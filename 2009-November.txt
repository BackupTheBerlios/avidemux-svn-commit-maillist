From mean at mail.berlios.de  Wed Nov  4 07:47:41 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Wed, 4 Nov 2009 07:47:41 +0100
Subject: [Avidemux-svn-commit] r5433 - in branches/avidemux_2.6_branch_mean:
	avidemux/common avidemux/qt4/ADM_userInterfaces/ADM_dialog
	avidemux/qt4/ADM_userInterfaces/ADM_gui
	avidemux_core/ADM_core/include avidemux_core/ADM_core/src
Message-ID: <200911040647.nA46lfF5018190@sheep.berlios.de>

Author: mean
Date: 2009-11-04 07:47:40 +0100 (Wed, 04 Nov 2009)
New Revision: 5433

Modified:
   branches/avidemux_2.6_branch_mean/avidemux/common/gtk_gui.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/gui_navigate.cpp
   branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_dialog/Q_props.cpp
   branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_dialog/Q_working.cpp
   branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_dialog/T_index_pg.cpp
   branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_gui/Q_gui2.cpp
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_core/include/ADM_vidMisc.h
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_core/src/ADM_misc.cpp
Log:
[All] Simplify ms2time, use all uint32_t

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/gtk_gui.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/gtk_gui.cpp	2009-10-30 19:13:14 UTC (rev 5432)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/gtk_gui.cpp	2009-11-04 06:47:40 UTC (rev 5433)
@@ -90,7 +90,7 @@
 extern uint8_t DIA_RecentFiles( char **name );
 extern void    DIA_properties( void);
 extern uint8_t DIA_Preferences(void);
-extern uint8_t DIA_gotoTime(uint16_t *hh, uint16_t *mm, uint16_t *ss);
+extern uint8_t DIA_gotoTime(uint16_t *hh, uint32_t *mm, uint32_t *ss);
 extern uint8_t DIA_builtin(void);
 extern void    DIA_Calculator(uint32_t *sizeInMeg, uint32_t *avgBitrate );
 extern uint8_t DIA_pluginsInfo(void);

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/gui_navigate.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/gui_navigate.cpp	2009-10-30 19:13:14 UTC (rev 5432)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/gui_navigate.cpp	2009-11-04 06:47:40 UTC (rev 5433)
@@ -35,7 +35,7 @@
 #include "ADM_preview.h"
 
 extern void UI_purge(void);
-extern uint8_t DIA_gotoTime(uint16_t *hh, uint16_t *mm, uint16_t *ss);
+extern uint8_t DIA_gotoTime(uint32_t *hh, uint32_t *mm, uint32_t *ss);
 extern bool SliderIsShifted;
 bool   GUI_GoToTime(uint64_t time);
 uint8_t A_jumpToTime(uint32_t hh,uint32_t mm,uint32_t ss,uint32_t ms);
@@ -188,7 +188,7 @@
            // Get current time
             uint64_t pts=admPreview::getCurrentPts();
 
-	      uint16_t mm, hh, ss, ms;
+	      uint32_t mm, hh, ss, ms;
             ms2time((uint32_t)(pts/1000),&hh,&mm,&ss,&ms);
 	      if (DIA_gotoTime(&hh, &mm, &ss))
           {

Modified: branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_dialog/Q_props.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_dialog/Q_props.cpp	2009-10-30 19:13:14 UTC (rev 5432)
+++ branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_dialog/Q_props.cpp	2009-11-04 06:47:40 UTC (rev 5433)
@@ -28,7 +28,7 @@
      uint8_t gmc, qpel,vop;
  uint32_t info=0;
  uint32_t war,har;
- uint16_t hh, mm, ss, ms;
+ uint32_t hh, mm, ss, ms;
  char text[80];
  const char *s;
   

Modified: branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_dialog/Q_working.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_dialog/Q_working.cpp	2009-10-30 19:13:14 UTC (rev 5432)
+++ branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_dialog/Q_working.cpp	2009-11-04 06:47:40 UTC (rev 5433)
@@ -91,10 +91,10 @@
         _nextUpdate=elapsed+1000;
         lastper=percent;
 
-		uint32_t hh,mm,ss;
+		uint32_t hh,mm,ss,mms;
 		char string[9];
 
-		ms2time(elapsed,&hh,&mm,&ss);
+		ms2time(elapsed,&hh,&mm,&ss,&mms);
 		sprintf(string,"%02d:%02d:%02d",hh,mm,ss);
 
         workWindow *wind=(workWindow *)_priv; ADM_assert(wind);

Modified: branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_dialog/T_index_pg.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_dialog/T_index_pg.cpp	2009-10-30 19:13:14 UTC (rev 5432)
+++ branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_dialog/T_index_pg.cpp	2009-11-04 06:47:40 UTC (rev 5433)
@@ -130,7 +130,7 @@
 	{
         char string[256];
         double f;
-        	uint32_t   tom,zhh,zmm,zss;
+        	uint32_t   tom,zhh,zmm,zss,zmms;
 
 		_nextUpdate=tim+GUI_UPDATE_RATE;
         sprintf(string,"%02d:%02d:%02d",hh,mm,ss);
@@ -154,7 +154,7 @@
         tom=(uint32_t)floor(f);
         if(tim>tom) return 1;
         tom=tom-tim;
-        ms2time(tom,&zhh,&zmm,&zss);
+        ms2time(tom,&zhh,&zmm,&zss,&zmms);
         sprintf(string,QT_TR_NOOP("Time Left :%02d:%02d:%02d"),zhh,zmm,zss);
         dialog->setETA(string);
         UI_purge();

Modified: branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_gui/Q_gui2.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_gui/Q_gui2.cpp	2009-10-30 19:13:14 UTC (rev 5432)
+++ branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_gui/Q_gui2.cpp	2009-11-04 06:47:40 UTC (rev 5433)
@@ -881,7 +881,7 @@
 void UI_updateTimeCount(uint32_t curFrame,uint32_t fps)
 {
 	char text[80];   
-	uint16_t mm,hh,ss,ms;
+	uint32_t mm,hh,ss,ms;
 
 	frame2time(curFrame,fps, &hh, &mm, &ss, &ms);
 	sprintf(text, "%02d:%02d:%02d.%03d", hh, mm, ss, ms);
@@ -895,7 +895,7 @@
 void UI_setTimeCount(uint32_t curFrame,uint32_t total, uint32_t fps)
 {
 	char text[80];   
-	uint16_t mm,hh,ss,ms;
+	uint32_t mm,hh,ss,ms;
 
 	if(total) total--; // We display from 0 to X
 
@@ -916,7 +916,7 @@
 void UI_setCurrentTime(uint64_t curTime)
 {
   char text[80];
- uint16_t mm,hh,ss,ms;
+ uint32_t mm,hh,ss,ms;
  uint32_t shorty=(uint32_t)(curTime/1000);
 
     ms2time(shorty,&hh,&mm,&ss,&ms);
@@ -932,7 +932,7 @@
 void UI_setTotalTime(uint64_t curTime)
 {
   char text[80];
- uint16_t mm,hh,ss,ms;
+ uint32_t mm,hh,ss,ms;
  uint32_t shorty=(uint32_t)(curTime/1000);
 
     ms2time(shorty,&hh,&mm,&ss,&ms);
@@ -946,7 +946,7 @@
 void UI_setMarkers(uint64_t a, uint64_t b)
 {
 	char text[80];
-    uint16_t hh,mm,ss,ms;
+    uint32_t hh,mm,ss,ms;
     uint32_t timems;
     a/=1000;
     b/=1000;

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_core/include/ADM_vidMisc.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_core/include/ADM_vidMisc.h	2009-10-30 19:13:14 UTC (rev 5432)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_core/include/ADM_vidMisc.h	2009-11-04 06:47:40 UTC (rev 5433)
@@ -16,18 +16,16 @@
 #ifndef __ADM_VIDMISC__
 #define __ADM_VIDMISC__
 
-void            frame2time(uint32_t frame, uint32_t fps, uint16_t * hh, uint16_t * mm,
-                                uint16_t * ss, uint16_t * ms);
+void            frame2time(uint32_t frame, uint32_t fps, uint32_t * hh, uint32_t * mm,
+                                uint32_t * ss, uint32_t * ms);
 void            time2frame(uint32_t *frame, uint32_t fps, uint32_t hh, uint32_t mm,
                                 uint32_t ss, uint32_t ms);
-void            ms2time(uint32_t len2,uint16_t * hh, uint16_t * mm,
-                                uint16_t * ss, uint16_t * ms);				
 char*			ms2timedisplay(uint32_t ms);
-
+uint8_t         ms2time(uint32_t ms, uint32_t *h,uint32_t *m, uint32_t *s,uint32_t *mms);
 #define FRAME_PAL 1
 #define FRAME_FILM 2
 #define FRAME_NTSC 3
 
 uint8_t 	identMovieType(uint32_t fps1000); // identify the movie type (mainly for mpeg1/2) 
-uint8_t 	ms2time(uint32_t ms, uint32_t *h,uint32_t *m, uint32_t *s);
+uint8_t 	ms2time(uint32_t ms, uint32_t *h,uint32_t *m, uint32_t *s,uint32_t *mms);
 #endif

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_core/src/ADM_misc.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_core/src/ADM_misc.cpp	2009-10-30 19:13:14 UTC (rev 5432)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_core/src/ADM_misc.cpp	2009-11-04 06:47:40 UTC (rev 5433)
@@ -91,8 +91,8 @@
 
 }
 /// convert frame number and fps to hour/mn/sec/ms
-void  frame2time(	uint32_t frame, uint32_t fps, uint16_t * hh, uint16_t * mm,
-                                uint16_t * ss, uint16_t * ms)
+void  frame2time(	uint32_t frame, uint32_t fps, uint32_t * hh, uint32_t * mm,
+                                uint32_t * ss, uint32_t * ms)
 {
     UNUSED_ARG(fps);
 double d;
@@ -105,18 +105,6 @@
     ms2time(len2,hh,mm,ss,ms);
 }
 
-void ms2time(uint32_t len2,uint16_t * hh, uint16_t * mm,
-	 			uint16_t * ss, uint16_t * ms)
-{
-    *hh = (uint32_t) floor(len2 / (3600.F * 1000.F));
-    len2 -= (uint32_t) floor(*hh * 3600.F * 1000.F);
-    *mm = (uint32_t) floor(len2 / (60.F * 1000.F));
-    len2 -= (uint32_t) floor(*mm * 60.F * 1000.F);
-    *ss = (uint32_t) floor(len2 / (1000.F));
-    len2 -= (uint32_t) floor((*ss * 1000.F));
-    *ms = (uint32_t) floor(len2);
-
-}
 void            time2frame(uint32_t *frame, uint32_t fps, uint32_t hh, uint32_t mm,
                                 uint32_t ss, uint32_t ms)
 {
@@ -185,7 +173,7 @@
 
       return r;
 }
-uint8_t ms2time(uint32_t ms, uint32_t *h,uint32_t *m, uint32_t *s)
+uint8_t ms2time(uint32_t ms, uint32_t *h,uint32_t *m, uint32_t *s,uint32_t *mms)
 {
       uint32_t sectogo;
       int  mm,ss,hh;
@@ -201,6 +189,7 @@
                               *h=hh;
                               *m=mm;
                               *s=ss;
+                              *mms=ms-1000*(ms/1000);
       return 1;
 }
 



From mean at mail.berlios.de  Wed Nov  4 07:47:43 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Wed, 4 Nov 2009 07:47:43 +0100
Subject: [Avidemux-svn-commit] r5434 -
	branches/avidemux_2.6_branch_mean/avidemux/common/ADM_commonUI
Message-ID: <200911040647.nA46lhAR018200@sheep.berlios.de>

Author: mean
Date: 2009-11-04 07:47:43 +0100 (Wed, 04 Nov 2009)
New Revision: 5434

Modified:
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_commonUI/DIA_gototime.cpp
Log:
[All] Simplify ms2time, use all uint32_t

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_commonUI/DIA_gototime.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_commonUI/DIA_gototime.cpp	2009-11-04 06:47:40 UTC (rev 5433)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_commonUI/DIA_gototime.cpp	2009-11-04 06:47:43 UTC (rev 5434)
@@ -2,7 +2,7 @@
 #include "ADM_default.h"
 #include "DIA_factory.h"
 
-uint8_t DIA_gotoTime(uint16_t *hh, uint16_t *mm, uint16_t *ss)
+uint8_t DIA_gotoTime(uint32_t *hh, uint32_t *mm, uint32_t *ss)
 {
 uint32_t h=*hh,m=*mm,s=*ss;
 



From mean at mail.berlios.de  Wed Nov  4 07:47:47 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Wed, 4 Nov 2009 07:47:47 +0100
Subject: [Avidemux-svn-commit] r5436 - in
	branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces:
	ADM_dialog ADM_gui2
Message-ID: <200911040647.nA46llRR018220@sheep.berlios.de>

Author: mean
Date: 2009-11-04 07:47:47 +0100 (Wed, 04 Nov 2009)
New Revision: 5436

Modified:
   branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/ADM_dialog/DIA_encoding.cpp
   branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/ADM_dialog/DIA_properties.cpp
   branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/ADM_dialog/DIA_working.cpp
   branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/ADM_gui2/GUI_bindings.cpp
Log:
[UI] Ms2time cleanup, gtk version

Modified: branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/ADM_dialog/DIA_encoding.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/ADM_dialog/DIA_encoding.cpp	2009-11-04 06:47:44 UTC (rev 5435)
+++ branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/ADM_dialog/DIA_encoding.cpp	2009-11-04 06:47:47 UTC (rev 5436)
@@ -392,11 +392,11 @@
           sprintf(string,"%.2f",_fps_average);
           gtk_label_set_text(GTK_LABEL(WID(label_fps)),string);
 
-          uint32_t   hh,mm,ss;
+          uint32_t   hh,mm,ss,mms;
 
             double framesLeft=(_total-_lastnb);
 
-			ms2time(tim,&hh,&mm,&ss);
+			ms2time(tim,&hh,&mm,&ss,&mms);
 			sprintf(string,"%02d:%02d:%02d",hh,mm,ss);
 			gtk_label_set_text(GTK_LABEL(WID(label_elapsed)),string);
 

Modified: branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/ADM_dialog/DIA_properties.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/ADM_dialog/DIA_properties.cpp	2009-11-04 06:47:44 UTC (rev 5435)
+++ branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/ADM_dialog/DIA_properties.cpp	2009-11-04 06:47:47 UTC (rev 5436)
@@ -19,7 +19,7 @@
 {
 
  char text[80];
- uint16_t hh, mm, ss, ms;
+ uint32_t hh, mm, ss, ms;
  GtkWidget *dialog;
  uint8_t gmc, qpel,vop;
  uint32_t info=0;

Modified: branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/ADM_dialog/DIA_working.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/ADM_dialog/DIA_working.cpp	2009-11-04 06:47:44 UTC (rev 5435)
+++ branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/ADM_dialog/DIA_working.cpp	2009-11-04 06:47:47 UTC (rev 5436)
@@ -132,10 +132,10 @@
 	GtkWidget *dialog;
 	dialog=(GtkWidget *)_priv;
 
-	uint32_t hh,mm,ss;
+	uint32_t hh,mm,ss,mms;
 	char string[9];
 
-	ms2time(elapsed,&hh,&mm,&ss);
+	ms2time(elapsed,&hh,&mm,&ss,&mms);
 	sprintf(string,"%02d:%02d:%02d",hh,mm,ss);
 	gtk_label_set_text(GTK_LABEL(WID(labelElapsed)),string);
 

Modified: branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/ADM_gui2/GUI_bindings.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/ADM_gui2/GUI_bindings.cpp	2009-11-04 06:47:44 UTC (rev 5435)
+++ branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/ADM_gui2/GUI_bindings.cpp	2009-11-04 06:47:47 UTC (rev 5436)
@@ -798,7 +798,7 @@
 void UI_setTotalTime(uint64_t curTime)
 {
   char text[80];
- uint16_t mm,hh,ss,ms;
+ uint32_t mm,hh,ss,ms;
  uint32_t shorty=(uint32_t)(curTime/1000);
 
     ms2time(shorty,&hh,&mm,&ss,&ms);
@@ -814,7 +814,7 @@
 void UI_setCurrentTime(uint64_t curTime)
 {
   char text[80];
- uint16_t mm,hh,ss,ms;
+ uint32_t mm,hh,ss,ms;
  uint32_t shorty=(uint32_t)(curTime/1000);
 
     ms2time(shorty,&hh,&mm,&ss,&ms);
@@ -826,7 +826,7 @@
 void UI_updateTimeCount(uint32_t curFrame,uint32_t fps)
 {
   char text[80];
- uint16_t mm,hh,ss,ms;
+ uint32_t mm,hh,ss,ms;
 
  	frame2time(curFrame,fps, &hh, &mm, &ss, &ms);
   	sprintf(text, "%02d:%02d:%02d.%03d", hh, mm, ss, ms);
@@ -947,7 +947,7 @@
 void UI_setMarkers(uint64_t a, uint64_t b )
 {
 char text[500];
-  uint16_t hh,mm,ss,ms;
+  uint32_t hh,mm,ss,ms;
   uint32_t timems;
     a/=1000;
     b/=1000;



From mean at mail.berlios.de  Wed Nov  4 07:47:45 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Wed, 4 Nov 2009 07:47:45 +0100
Subject: [Avidemux-svn-commit] r5435 - in
	branches/avidemux_2.6_branch_mean/avidemux/common: ADM_editor
	ADM_toolkit
Message-ID: <200911040647.nA46ljhg018210@sheep.berlios.de>

Author: mean
Date: 2009-11-04 07:47:44 +0100 (Wed, 04 Nov 2009)
New Revision: 5435

Added:
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edVideoCopy.cpp
Modified:
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edRender.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edRenderInternal.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edSearch.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edit.hxx
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_segment.h
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_toolkit/automation.cpp
Log:
[editor] More on video copy

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edRender.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edRender.cpp	2009-11-04 06:47:43 UTC (rev 5434)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edRender.cpp	2009-11-04 06:47:44 UTC (rev 5435)
@@ -205,53 +205,7 @@
         return true;
 }
 
-/**
-        \fn getCompressedPicture
-        \brief bypass decoder and directly get the source image
 
-*/
-bool        ADM_Composer::getCompressedPicture(ADMCompressedImage *img)
-{
-    uint64_t tail;
-    //
-    _SEGMENT *seg=_segments.getSegment(_currentSegment);
-    ADM_assert(seg);
-    _VIDEOS *vid=_segments.getRefVideo(seg->_reference);
-    ADM_assert(vid);
-    vidHeader *demuxer=vid->_aviheader;
-    ADM_assert(demuxer);
-
-    // Get next pic?
-    if(false==demuxer->getFrame (vid->lastSentFrame,img))
-    {
-        ADM_info("Failed to get next frame for ref %"LU"\n",seg->_reference);
-        goto nextSeg;
-    }
-    vid->lastSentFrame++;
-    // Need to switch seg ?
-    tail=seg->_refStartTimeUs+seg->_durationUs;
-    if(img->demuxerDts!= ADM_NO_PTS && img->demuxerDts>=tail) goto nextSeg;
-    if(img->demuxerPts!= ADM_NO_PTS && img->demuxerPts>=tail) goto nextSeg;
-    {
-    // Recalibrate PTS & DTS...
-    int64_t offset=seg->_refStartTimeUs;
-    offset=seg->_startTimeUs;
-    recalibrate(&(img->demuxerPts),seg);
-    recalibrate(&(img->demuxerDts),seg);
-    }
-    return true;
-
-nextSeg:
-    if(false==switchToNextSegment())
-    {
-        ADM_warning("Cannot update to new segment\n");
-        return false;
-    }
-    ADM_info("Retrying for next segment\n");
-    return getCompressedPicture(img);
-   
-}
-
 /**
         \fn dupe
 */
@@ -305,15 +259,15 @@
     \fn switchToNextSegment
     \brief Switch to the next segment
 
-*/
-bool        ADM_Composer::switchToNextSegment(void)
+*/  
+bool        ADM_Composer::switchToNextSegment(bool dontdecode)
 {
     if(_currentSegment==_segments.getNbSegments()-1)
     {
         ADM_warning("This is the last segment (%"LU")\n",_currentSegment);
         return false;
     }
-    if(true==switchToSegment(_currentSegment+1)) return true;
+    if(true==switchToSegment(_currentSegment+1,dontdecode)) return true;
     return false;
 }
 /**
@@ -321,7 +275,7 @@
     \brief Switch to the segment given as argument
 
 */
-bool        ADM_Composer::switchToSegment(uint32_t s)
+bool        ADM_Composer::switchToSegment(uint32_t s,bool dontdecode)
 {
     if(s+1>_segments.getNbSegments())
     {
@@ -349,13 +303,13 @@
                 from=pts;
         }
     }
-    if(false==seektoTime(seg->_reference,from))
+    if(false==seektoTime(seg->_reference,from,dontdecode))
     {
             ADM_warning("Cannot seek to beginning of segment %"LU" at  %"LLU" ms\n",s,from/1000);
             return false;
     }
     _currentSegment=s;
-    ADM_info("Switched ok to segment %"LU"\n",s);
+    ADM_info("Switched ok to segment %"LU" (dontdecode=%d)\n",s,dontdecode);
     return true;
 }
 /**

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edRenderInternal.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edRenderInternal.cpp	2009-11-04 06:47:43 UTC (rev 5434)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edRenderInternal.cpp	2009-11-04 06:47:44 UTC (rev 5435)
@@ -36,7 +36,7 @@
     \brief Seek to frame with timestamp given as arg
 
 */
-bool ADM_Composer::seektoTime(uint32_t ref,uint64_t timeToSeek)
+bool ADM_Composer::seektoTime(uint32_t ref,uint64_t timeToSeek,bool dontdecode)
 {
    _VIDEOS *vid=_segments.getRefVideo(ref);
     vidHeader *demuxer=vid->_aviheader;
@@ -58,8 +58,15 @@
             return false;
         }
     }
+    uint32_t frame=_segments.intraTimeToFrame(ref,seekTime);
+    if(dontdecode==true)
+    {
+        vid->lastSentFrame=frame;
+        ADM_info("Seek to time without decoding ok\n");
+        return true;
+    }
     // ok now seek...
-    uint32_t frame=_segments.intraTimeToFrame(ref,seekTime);
+    
     if(false==DecodePictureUpToIntra(ref,frame))
     {
         ADM_warning("Cannot decode up to intra %"LLU" at %"LLU" ms\n",frame,seekTime/1000);

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edSearch.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edSearch.cpp	2009-11-04 06:47:43 UTC (rev 5434)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edSearch.cpp	2009-11-04 06:47:44 UTC (rev 5435)
@@ -17,7 +17,7 @@
 #include "ADM_default.h"
 #include "fourcc.h"
 #include "ADM_editor/ADM_edit.hxx"
-
+#include "ADM_vidMisc.h"
 /**
     \fn getNKFramePTS
 */
@@ -52,6 +52,11 @@
             return false;
         }
         // Go to the next segment
+        if(seg==_segments.getNbSegments()-1)
+        {
+            ADM_warning("Last segment\n");
+            return false;
+        }
         seg++;
         goto again;
     }
@@ -145,7 +150,10 @@
         if(pts==ADM_NO_PTS) continue;
         if(pts>refTime)
         {
-            ADM_info("Found nextkeyframe %"LLU" at frame %"LU"\n",pts/1000,i);
+            uint32_t hh,mm,ss,ms,ms2;
+            ms=pts/1000;
+            ms2time(ms,&hh,&mm,&ss,&ms2);
+            ADM_info("Found nextkeyframe %"LLU" %u:%u:%u at frame %"LU"\n",ms,hh,mm,ss,i);
             *nkTime=pts;
             return true;
         }

Added: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edVideoCopy.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edVideoCopy.cpp	2009-11-04 06:47:43 UTC (rev 5434)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edVideoCopy.cpp	2009-11-04 06:47:44 UTC (rev 5435)
@@ -0,0 +1,100 @@
+/***************************************************************************
+    \file  ADM_edVideoCopy.cpp  
+    \brief handle direct stream copy for video
+    \author mean (c) 2002/2009 fixounet at free.fr
+
+    
+
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+#include <math.h>
+#include "ADM_default.h"
+#include "ADM_editor/ADM_edit.hxx"
+
+#if defined(ADM_DEBUG) && 0
+#define aprintf printf
+#else
+#define aprintf(...) {}// printf
+#endif
+
+/**
+        \fn getCompressedPicture
+        \brief bypass decoder and directly get the source image
+
+    The dropBframe is as follow :
+            0 : Dont drop b frame
+            1 : Follow the next bframes
+            2 : Drop
+
+
+*/
+bool        ADM_Composer::getCompressedPicture(ADMCompressedImage *img)
+{
+    uint64_t tail;
+    //
+againGet:
+    _SEGMENT *seg=_segments.getSegment(_currentSegment);
+    ADM_assert(seg);
+    _VIDEOS *vid=_segments.getRefVideo(seg->_reference);
+    ADM_assert(vid);
+    vidHeader *demuxer=vid->_aviheader;
+    ADM_assert(demuxer);
+
+    // Get next pic?
+    if(false==demuxer->getFrame (vid->lastSentFrame,img))
+    {
+        ADM_info("Failed to get next frame for ref %"LU"\n",seg->_reference);
+        goto nextSeg;
+    }
+    vid->lastSentFrame++;
+    //
+    if(img->flags & AVI_B_FRAME)
+    {
+        if(seg->_dropBframes==2) 
+        {
+            ADM_warning("Dropping bframes\n");
+            goto againGet;
+        }
+    }else
+    { // not a bframe
+        switch(seg->_dropBframes)
+        {
+            case 2: seg->_dropBframes=0;break;
+            case 1: seg->_dropBframes=2;break;
+            default: break;
+        }
+    }
+    // Need to switch seg ?
+    tail=seg->_refStartTimeUs+seg->_durationUs;
+    ADM_info("Frame : Flags :%X, DTS:%"LLD" PTS=%"LLD" tail=%"LLD"\n",img->flags,img->demuxerDts/1000,img->demuxerPts/1000,tail);
+    if(img->demuxerDts!= ADM_NO_PTS && img->demuxerDts>=tail) goto nextSeg;
+    if(img->demuxerPts!= ADM_NO_PTS && img->demuxerPts>=tail) goto nextSeg;
+    {
+    // Recalibrate PTS & DTS...
+    recalibrate(&(img->demuxerPts),seg);
+    recalibrate(&(img->demuxerDts),seg);
+    }
+    
+    return true;
+
+nextSeg:
+    if(false==switchToNextSegment(true))
+    {
+        ADM_warning("Cannot update to new segment\n");
+        return false;
+    }
+    // Mark it as drop b frames...
+    _SEGMENT *thisseg=_segments.getSegment(_currentSegment);
+    thisseg->_dropBframes=1;
+    ADM_info("Retrying for next segment\n");
+    return getCompressedPicture(img);
+   
+}
\ No newline at end of file

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edit.hxx
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edit.hxx	2009-11-04 06:47:43 UTC (rev 5434)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edit.hxx	2009-11-04 06:47:44 UTC (rev 5435)
@@ -65,13 +65,13 @@
   private:
 //*********************************PRIVATE API *******************************************
                     //bool		decodeCache(uint32_t ref, uint32_t frame,ADMImage *image);
-                    bool        switchToNextSegment(void);
-                    bool        switchToSegment(uint32_t s);
+                    bool        switchToNextSegment(bool dontdecode=false);
+                    bool        switchToSegment(uint32_t s,bool dontdecode=false);
                     uint32_t    currentFrame;
 
                     bool        nextPictureInternal(uint32_t ref,ADMImage *image);
                     bool        samePictureInternal(uint32_t ref,ADMImage *image);
-                    bool        seektoTime(uint32_t ref,uint64_t timeToSeek);
+                    bool        seektoTime(uint32_t ref,uint64_t timeToSeek,bool dontdecode=false);
                     // Some useful functions...
                     void        recalibrate(uint64_t *time,_SEGMENT *seg);
                     bool        updateImageTiming(_SEGMENT *seg,ADMImage *image);

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_segment.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_segment.h	2009-11-04 06:47:43 UTC (rev 5434)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_segment.h	2009-11-04 06:47:44 UTC (rev 5435)
@@ -80,6 +80,7 @@
         uint64_t _refStartTimeUs; /// Starting time in reference
         uint64_t _startTimeUs; /// Start time in current (=sum(_duration of previous seg))
         uint64_t _durationUs; ///
+        uint32_t _dropBframes;
         
 } _SEGMENT;
 /*

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/CMakeLists.txt	2009-11-04 06:47:43 UTC (rev 5434)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/CMakeLists.txt	2009-11-04 06:47:44 UTC (rev 5435)
@@ -11,6 +11,7 @@
 ADM_edMarker.cpp
 ADM_edStub.cpp
 ADM_edPtsDts.cpp
+ADM_edVideoCopy.cpp
 ADM_segment.cpp
 )
 

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_toolkit/automation.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_toolkit/automation.cpp	2009-11-04 06:47:43 UTC (rev 5434)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_toolkit/automation.cpp	2009-11-04 06:47:44 UTC (rev 5435)
@@ -501,7 +501,7 @@
    printf("   Number of frames: %d frames\n", avifileinfo->nb_frames);
    printf("   Codec FourCC: %s\n", fourCC::tostring(avifileinfo->fcc));
    if(avifileinfo->nb_frames){
-     uint16_t hh, mm, ss, ms;
+     uint32_t hh, mm, ss, ms;
       frame2time(avifileinfo->nb_frames, avifileinfo->fps1000,&hh, &mm, &ss, &ms);
       printf("   Duration: %02d:%02d:%02d.%03d\n", hh, mm, ss, ms);
    }else{
@@ -526,7 +526,7 @@
       printf("   Frequency: %u Hz\n", wavinfo->frequency);
       {
 double du = 0;// BAZOOKA video_body->getAudioLength();
-        uint16_t hh, mm, ss, ms;
+        uint32_t hh, mm, ss, ms;
          du*=1000;
          du/=wavinfo->byterate;
          ms2time((uint32_t)floor(du), &hh, &mm, &ss, &ms);



From mean at mail.berlios.de  Wed Nov  4 07:47:49 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Wed, 4 Nov 2009 07:47:49 +0100
Subject: [Avidemux-svn-commit] r5437 - in
	branches/avidemux_2.6_branch_mean/avidemux/common: ADM_editor
	ADM_script
Message-ID: <200911040647.nA46lnJV018230@sheep.berlios.de>

Author: mean
Date: 2009-11-04 07:47:49 +0100 (Wed, 04 Nov 2009)
New Revision: 5437

Modified:
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edRender.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edVideoCopy.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edit.hxx
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_segment.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_segment.h
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script/ADM_JSAvidemux.cpp
Log:
[JS] Add segment handling capabilities to js

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edRender.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edRender.cpp	2009-11-04 06:47:47 UTC (rev 5436)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edRender.cpp	2009-11-04 06:47:49 UTC (rev 5437)
@@ -322,4 +322,27 @@
         return DecodePictureUpToIntra(0,0);
 
 }
+/**
+    \fn addSegment
+    \brief add a segment. The startTime will be computed later.
+*/
+bool    ADM_Composer::addSegment(uint32_t ref, uint64_t startRef, uint64_t duration)
+{
+    ADM_assert(ref<_segments.getNbRefVideos());
+    _SEGMENT seg;
+    memset(&seg,0,sizeof(seg));
+    seg._durationUs=duration;
+    seg._reference=ref;
+    seg._refStartTimeUs=startRef;
+    return _segments.addSegment(&seg);
+}
+/**
+    \fn clearSegment
+    \brief empty the segment list
+*/  
+bool   ADM_Composer::clearSegment(void)
+{
+    return _segments.deleteSegments();
+}
+
 //EOF

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edVideoCopy.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edVideoCopy.cpp	2009-11-04 06:47:47 UTC (rev 5436)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edVideoCopy.cpp	2009-11-04 06:47:49 UTC (rev 5437)
@@ -82,7 +82,7 @@
     recalibrate(&(img->demuxerPts),seg);
     recalibrate(&(img->demuxerDts),seg);
     }
-    
+    ADM_info("Frame after RECAL: Flags :%X, DTS:%"LLD" PTS=%"LLD" tail=%"LLD"\n",img->flags,img->demuxerDts/1000,img->demuxerPts/1000,tail);
     return true;
 
 nextSeg:

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edit.hxx
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edit.hxx	2009-11-04 06:47:47 UTC (rev 5436)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edit.hxx	2009-11-04 06:47:49 UTC (rev 5437)
@@ -204,6 +204,8 @@
 /******************************* /Post Processing ************************************/	
 /******************************* Editing ************************************/	
                     bool                remove(uint64_t start,uint64_t end);
+                    bool                addSegment(uint32_t ref, uint64_t startRef, uint64_t duration);
+                    bool                clearSegment(void);
 /******************************* /Editing **********************************/										
 /******************************* Misc ************************************/				
                     uint8_t             setEnv(_ENV_EDITOR_FLAGS newflag);

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_segment.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_segment.cpp	2009-11-04 06:47:47 UTC (rev 5436)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_segment.cpp	2009-11-04 06:47:49 UTC (rev 5437)
@@ -90,8 +90,28 @@
     updateStartTime();
     return true;
 }
+/**
+    \fn deleteSegments
+    \brief Empty the segments list
+*/
+bool        ADM_EditorSegment::deleteSegments()
+{
+    ADM_info("Clearing a new segment\n");
+    segments.clear();
+    return true;
+}
+/**
+    \fn deleteSegments
+    \brief Empty the segments list
+*/
+bool        ADM_EditorSegment::addSegment(_SEGMENT *seg)
+{
+    ADM_info("Adding a new segment\n");
+    segments.push_back(*seg);
+    updateStartTime();
+    return true;
+}
 
-
 /**
 	\fn deleteAll
     \brief delete datas associated with all video

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_segment.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_segment.h	2009-11-04 06:47:47 UTC (rev 5436)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_segment.h	2009-11-04 06:47:49 UTC (rev 5437)
@@ -104,9 +104,13 @@
             void        dump(void);
                         ADM_EditorSegment(void);
                         ~ADM_EditorSegment();
+
             bool        addReferenceVideo(_VIDEOS *ref);
             bool        deleteAll(void);
+
             bool        resetSegment(void);
+            bool        deleteSegments(void);
+            bool        addSegment(_SEGMENT *seg);
 
             _VIDEOS     *getRefVideo(int i);
             int         getNbRefVideos(void);

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script/ADM_JSAvidemux.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script/ADM_JSAvidemux.cpp	2009-11-04 06:47:47 UTC (rev 5436)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script/ADM_JSAvidemux.cpp	2009-11-04 06:47:49 UTC (rev 5437)
@@ -401,6 +401,10 @@
         else
                 frameEnd=0;
 }
+/**
+    \fn ClearSegments
+    \brief empty the segment list
+*/
 JSBool ADM_JSAvidemux::ClearSegments(JSContext *cx, JSObject *obj, uintN argc, 
                                        jsval *argv, jsval *rval)
 {// begin ClearSegments
@@ -411,13 +415,15 @@
                 return JS_FALSE;
         printf("clearing segments \n");
         enterLock();
-//        *rval = BOOLEAN_TO_JSVAL(video_body->deleteAllSegments());
-	leaveLock();
+        *rval = BOOLEAN_TO_JSVAL(video_body->clearSegment());
+        leaveLock();
         updateAll();
         return JS_TRUE;
 }// end ClearSegments
-/*
-add a segment. addsegment(source video,startframe, nbframes)",     
+/**
+    \fn AddSegment
+    \brief add a segment. addsegment(ref video,refStartTime, duration) 
+    
 */
 JSBool ADM_JSAvidemux::AddSegment(JSContext *cx, JSObject *obj, uintN argc, 
                                        jsval *argv, jsval *rval)
@@ -429,13 +435,13 @@
                 return JS_FALSE;
 	if(JSVAL_IS_INT(argv[0]) == false || JSVAL_IS_INT(argv[1]) == false || JSVAL_IS_INT(argv[2]) == false)
 		return JS_FALSE;
-        int a = JSVAL_TO_INT(argv[0]);
-        int b = JSVAL_TO_INT(argv[1]);
-        int c = JSVAL_TO_INT(argv[2]);
+        uint64_t ref = JSVAL_TO_INT(argv[0]);
+        uint64_t start= JSVAL_TO_INT(argv[1]);
+        uint64_t duration= JSVAL_TO_INT(argv[2]);
         aprintf("adding segment :%d %d %d\n",a,b,c);
         enterLock();
-//        *rval = BOOLEAN_TO_JSVAL( video_body->addSegment(a,b,c));
-	leaveLock();
+        *rval = BOOLEAN_TO_JSVAL( video_body->addSegment(ref,start,duration));
+        leaveLock();
         updateAll();
         return JS_TRUE;
 }// end AddSegment



From mean at mail.berlios.de  Wed Nov  4 07:47:52 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Wed, 4 Nov 2009 07:47:52 +0100
Subject: [Avidemux-svn-commit] r5439 -
	branches/avidemux_2.6_branch_mean/avidemux/common
Message-ID: <200911040647.nA46lpT0018250@sheep.berlios.de>

Author: mean
Date: 2009-11-04 07:47:51 +0100 (Wed, 04 Nov 2009)
New Revision: 5439

Modified:
   branches/avidemux_2.6_branch_mean/avidemux/common/gtk_gui.cpp
Log:
[Main] Remove unused forward declaration

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/gtk_gui.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/gtk_gui.cpp	2009-11-04 06:47:50 UTC (rev 5438)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/gtk_gui.cpp	2009-11-04 06:47:51 UTC (rev 5439)
@@ -100,7 +100,7 @@
 static void cleanUp (void);
 void        updateLoaded (void);
 extern void encoderSetLogFile (char *name);
-extern void videoCodecSelect (void);
+
 //__________
 extern bool parseECMAScript(const char *name);
 
@@ -439,7 +439,11 @@
             else    
             {
               A_ResetMarkers();              
-              A_Resync();
+              A_Resync(); // total duration & stuff
+            // Rewind to first frame...
+               video_body->rewind();
+               admPreview::samePicture();
+               GUI_setCurrentFrameAndTime();
             }
         }
         



From mean at mail.berlios.de  Wed Nov  4 07:47:50 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Wed, 4 Nov 2009 07:47:50 +0100
Subject: [Avidemux-svn-commit] r5438 -
	branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor
Message-ID: <200911040647.nA46loEc018240@sheep.berlios.de>

Author: mean
Date: 2009-11-04 07:47:50 +0100 (Wed, 04 Nov 2009)
New Revision: 5438

Modified:
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_segment.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_segment.h
Log:
[Editor] Remove empty segments

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_segment.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_segment.cpp	2009-11-04 06:47:49 UTC (rev 5437)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_segment.cpp	2009-11-04 06:47:50 UTC (rev 5438)
@@ -419,6 +419,7 @@
         segments.erase(segments.begin()+startSeg+1);
     }
     updateStartTime();
+    removeEmptySegments();
     dump();
     return true;
 }
@@ -473,4 +474,24 @@
     *dts=d+deltaFrame*vid->timeIncrementInUs;
     return true;
 }
+/**
+    \fn removeEmptySegments
+    \brief Remove empty segments after a cut.
+*/
+bool        ADM_EditorSegment::removeEmptySegments(void)
+{
+    while(1)
+    {
+        int index=-1;
+        int n=getNbSegments();
+        for(int i=0;i<n;i++)
+        {
+                _SEGMENT *seg=getSegment(i);
+                if(seg->_durationUs==0) index=i;
+        }
+        if(index==-1) break;
+        segments.erase(segments.begin()+index);
+    }
+    return true;
+}
 //EOF

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_segment.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_segment.h	2009-11-04 06:47:49 UTC (rev 5437)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_segment.h	2009-11-04 06:47:50 UTC (rev 5438)
@@ -112,6 +112,8 @@
             bool        deleteSegments(void);
             bool        addSegment(_SEGMENT *seg);
 
+            bool        removeEmptySegments(void);
+
             _VIDEOS     *getRefVideo(int i);
             int         getNbRefVideos(void);
 



From mean at mail.berlios.de  Wed Nov  4 07:47:53 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Wed, 4 Nov 2009 07:47:53 +0100
Subject: [Avidemux-svn-commit] r5440 - in
	branches/avidemux_2.6_branch_mean/avidemux/common: . ADM_editor
Message-ID: <200911040647.nA46lrvR018260@sheep.berlios.de>

Author: mean
Date: 2009-11-04 07:47:52 +0100 (Wed, 04 Nov 2009)
New Revision: 5440

Modified:
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edRender.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_segment.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/gtk_gui.cpp
Log:
[Render] Better display + factorize rewind properly

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edRender.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edRender.cpp	2009-11-04 06:47:51 UTC (rev 5439)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edRender.cpp	2009-11-04 06:47:52 UTC (rev 5440)
@@ -319,7 +319,7 @@
 bool ADM_Composer::rewind(void)
 {
         ADM_info("Rewinding\n");
-        return DecodePictureUpToIntra(0,0);
+        return switchToSegment(0);
 
 }
 /**

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_segment.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_segment.cpp	2009-11-04 06:47:51 UTC (rev 5439)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_segment.cpp	2009-11-04 06:47:52 UTC (rev 5440)
@@ -21,7 +21,7 @@
  #include "../ADM_editor/ADM_edCache.h"
  #include "ADM_pp.h"
  #include "ADM_colorspace.h"
-
+#include "ADM_vidMisc.h"
 #include "ADM_audiocodec/ADM_audiocodec.h"
 
 ADM_EditorSegment::ADM_EditorSegment(void)
@@ -423,6 +423,18 @@
     dump();
     return true;
 }
+
+
+static const char *us2plain(uint64_t ams)
+{
+static char buffer[256];
+uint32_t ms=(uint32_t)(ams/1000);
+    uint32_t hh,mm,ss,mms;
+    ms2time(ms,&hh,&mm,&ss,&mms);
+    sprintf(buffer," %02"LU":%02"LU":%02"LU",%03"LU" ",hh,mm,ss,mms);
+    return buffer;
+
+}
 /**
     \fn dump
     \brief Dump the segment content
@@ -434,11 +446,12 @@
     for(int i=0;i<n;i++)
     {
         _SEGMENT *s=getSegment(i);
+        
         printf("Segment :%d/%d\n",i,n);
-        printf("\tReference    :%"LU"\n",s->_reference);
-        printf("\tstartLinear  :%"LLU"\n",s->_startTimeUs);
-        printf("\tduration     :%"LLU"\n",s->_durationUs);
-        printf("\trefStart     :%"LLU"\n",s->_refStartTimeUs);
+        printf("\tReference    :%"LU"\n",s->_reference,us2plain(s->_reference));
+        printf("\tstartLinear  :%08"LLU" %s\n",s->_startTimeUs,us2plain(s->_startTimeUs));
+        printf("\tduration     :%08"LLU" %s\n",s->_durationUs,us2plain(s->_durationUs));
+        printf("\trefStart     :%08"LLU" %s\n",s->_refStartTimeUs,us2plain(s->_refStartTimeUs));
 
     }
 }

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/gtk_gui.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/gtk_gui.cpp	2009-11-04 06:47:51 UTC (rev 5439)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/gtk_gui.cpp	2009-11-04 06:47:52 UTC (rev 5440)
@@ -62,6 +62,7 @@
 extern uint8_t A_autoDrive(Action action);
 uint8_t A_TimeShift(void);
 void    A_ResetMarkers(void);
+void    A_Rewind(void);
 extern void A_jog(void);
 uint8_t A_jumpToTime(uint32_t hh,uint32_t mm,uint32_t ss,uint32_t ms);
 //***********************************
@@ -441,9 +442,7 @@
               A_ResetMarkers();              
               A_Resync(); // total duration & stuff
             // Rewind to first frame...
-               video_body->rewind();
-               admPreview::samePicture();
-               GUI_setCurrentFrameAndTime();
+                A_Rewind();
             }
         }
         
@@ -749,11 +748,7 @@
   }
 
 
-
-      video_body->rewind();
-      admPreview::samePicture();
-      GUI_setCurrentFrameAndTime();
-
+    A_Rewind();
    ADM_info(" conf updated \n");
 }
 
@@ -1439,5 +1434,15 @@
         video_body->setMarkerAPts(0);
         video_body->setMarkerBPts(duration);
 }
+/**
+    \fn A_Rewind
+    \brief Go back to the first frame
+*/
+void A_Rewind(void)
+{
+               video_body->rewind();
+               admPreview::samePicture();
+               GUI_setCurrentFrameAndTime();
+}
 //
 // EOF



From mean at mail.berlios.de  Wed Nov  4 07:47:54 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Wed, 4 Nov 2009 07:47:54 +0100
Subject: [Avidemux-svn-commit] r5441 -
	branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor
Message-ID: <200911040647.nA46lstQ018270@sheep.berlios.de>

Author: mean
Date: 2009-11-04 07:47:54 +0100 (Wed, 04 Nov 2009)
New Revision: 5441

Modified:
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edSearch.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edVideoCopy.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_segment.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_segment.h
Log:
[Editor] Also switch segment when DTS limit is reached

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edSearch.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edSearch.cpp	2009-11-04 06:47:52 UTC (rev 5440)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edSearch.cpp	2009-11-04 06:47:54 UTC (rev 5441)
@@ -221,7 +221,7 @@
     // Search the frame with correct PTS
     uint64_t pts=segTime+s->_refStartTimeUs;
     uint64_t dts;
-    if(false==_segments.ptsFromDts(s->_reference,pts,&dts))
+    if(false==_segments.dtsFromPts(s->_reference,pts,&dts))
     {
         ADM_warning("Cannot get DTS from PTS=%"LLU"ms\n",pts/1000);
         return false;

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edVideoCopy.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edVideoCopy.cpp	2009-11-04 06:47:52 UTC (rev 5440)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edVideoCopy.cpp	2009-11-04 06:47:54 UTC (rev 5441)
@@ -74,15 +74,35 @@
     }
     // Need to switch seg ?
     tail=seg->_refStartTimeUs+seg->_durationUs;
-    ADM_info("Frame : Flags :%X, DTS:%"LLD" PTS=%"LLD" tail=%"LLD"\n",img->flags,img->demuxerDts/1000,img->demuxerPts/1000,tail);
+   // ADM_info("Frame : Flags :%X, DTS:%"LLD" PTS=%"LLD" tail=%"LLD"\n",img->flags,img->demuxerDts/1000,img->demuxerPts/1000,tail);
     if(img->demuxerDts!= ADM_NO_PTS && img->demuxerDts>=tail) goto nextSeg;
     if(img->demuxerPts!= ADM_NO_PTS && img->demuxerPts>=tail) goto nextSeg;
     {
-    // Recalibrate PTS & DTS...
-    recalibrate(&(img->demuxerPts),seg);
-    recalibrate(&(img->demuxerDts),seg);
+        // Recalibrate PTS & DTS...
+        recalibrate(&(img->demuxerPts),seg);
+        recalibrate(&(img->demuxerDts),seg);
     }
-    ADM_info("Frame after RECAL: Flags :%X, DTS:%"LLD" PTS=%"LLD" tail=%"LLD"\n",img->flags,img->demuxerDts/1000,img->demuxerPts/1000,tail);
+    // Check the DTS is not too late compared to next seg beginning...
+    if(_currentSegment+1<_segments.getNbSegments() && img->demuxerDts!=ADM_NO_PTS)
+    {
+        _SEGMENT *nextSeg=_segments.getSegment(_currentSegment+1);
+        int64_t nextDts=nextSeg->_startTimeUs+nextSeg->_refStartDts;
+        if(nextDts<nextSeg->_refStartTimeUs)
+        {
+            ADM_warning("next DTS is negative %"LLU" %"LLU" ms\n",nextDts,nextSeg->_refStartTimeUs);
+        }else       
+        {
+            nextDts-=nextSeg->_refStartTimeUs;
+            if(img->demuxerDts>=nextDts)
+            {
+                ADM_warning("have to switch segment, DTS limit reached %"LLU" %"LLU"\n",img->demuxerDts/1000,nextDts/1000);
+                goto nextSeg;
+            }
+        }
+
+
+    }
+   // ADM_info("Frame after RECAL: Flags :%X, DTS:%"LLD" PTS=%"LLD" tail=%"LLD"\n",img->flags,img->demuxerDts/1000,img->demuxerPts/1000,tail);
     return true;
 
 nextSeg:

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_segment.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_segment.cpp	2009-11-04 06:47:52 UTC (rev 5440)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_segment.cpp	2009-11-04 06:47:54 UTC (rev 5441)
@@ -231,6 +231,18 @@
         segments[i]._startTimeUs=t;
         t+=segments[i]._durationUs;
     }
+    // Now set the _refStartDts field
+    for(int i=0;i<n;i++)
+    {
+        _VIDEOS *vid=getRefVideo(segments[i]._reference);
+        _SEGMENT *seg=getSegment(i);
+
+        uint64_t pts,dts;
+        pts=seg->_refStartTimeUs;
+        dtsFromPts(seg->_reference,pts,&dts);
+        seg->_refStartDts=dts;
+    }
+
     return true;
 }
 /**
@@ -451,15 +463,17 @@
         printf("\tReference    :%"LU"\n",s->_reference,us2plain(s->_reference));
         printf("\tstartLinear  :%08"LLU" %s\n",s->_startTimeUs,us2plain(s->_startTimeUs));
         printf("\tduration     :%08"LLU" %s\n",s->_durationUs,us2plain(s->_durationUs));
-        printf("\trefStart     :%08"LLU" %s\n",s->_refStartTimeUs,us2plain(s->_refStartTimeUs));
+        printf("\trefStartPts  :%08"LLU" %s\n",s->_refStartTimeUs,us2plain(s->_refStartTimeUs));
+        printf("\trefStartDts  :%08"LLU" %s\n",s->_refStartTimeUs,us2plain(s->_refStartDts));
 
     }
 }
+
 /**
-    \fn ptsFromDts
+    \fn dtsFromPts
     \brief guestimate DTS from PTS
 */
- bool        ADM_EditorSegment::ptsFromDts(uint32_t refVideo,uint64_t pts,uint64_t *dts)
+ bool        ADM_EditorSegment::dtsFromPts(uint32_t refVideo,uint64_t pts,uint64_t *dts)
 {
     uint32_t frame,flags;
     _VIDEOS *vid=getRefVideo(refVideo);

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_segment.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_segment.h	2009-11-04 06:47:52 UTC (rev 5440)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_segment.h	2009-11-04 06:47:54 UTC (rev 5441)
@@ -81,6 +81,7 @@
         uint64_t _startTimeUs; /// Start time in current (=sum(_duration of previous seg))
         uint64_t _durationUs; ///
         uint32_t _dropBframes;
+        uint64_t _refStartDts;
         
 } _SEGMENT;
 /*
@@ -133,7 +134,7 @@
             bool        isKeyFrameByTime(uint32_t refVideo,uint64_t seekTime);
 
             bool        removeChunk(uint64_t from, uint64_t to);
-            bool        ptsFromDts(uint32_t refVideo,uint64_t pts,uint64_t *dts);
+            bool        dtsFromPts(uint32_t refVideo,uint64_t pts,uint64_t *dts);
 };
 
 #endif



From mean at mail.berlios.de  Thu Nov  5 19:24:36 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Thu, 5 Nov 2009 19:24:36 +0100
Subject: [Avidemux-svn-commit] r5442 - in
	branches/avidemux_2.6_branch_mean/avidemux/common: ADM_editor
	ADM_script
Message-ID: <200911051824.nA5IOa6x030046@sheep.berlios.de>

Author: mean
Date: 2009-11-05 19:24:29 +0100 (Thu, 05 Nov 2009)
New Revision: 5442

Modified:
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edit.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edit.hxx
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script/ADM_JSAvidemuxVideo.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script/ADM_JSAvidemuxVideo.h
Log:
[JS] Add app.video.dumpEditing() function

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edit.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edit.cpp	2009-11-04 06:47:54 UTC (rev 5441)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edit.cpp	2009-11-05 18:24:29 UTC (rev 5442)
@@ -575,5 +575,15 @@
 {
     return _segments.removeChunk(start,end);
 }
+/**
+    \fn dumpEditing
+    \brief Dump segment, video & al
+*/
+bool            ADM_Composer::dumpEditing(void)
+{
+    _segments.dump();
+    return true;
+}
+
 //
 //

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edit.hxx
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edit.hxx	2009-11-04 06:47:54 UTC (rev 5441)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edit.hxx	2009-11-05 18:24:29 UTC (rev 5442)
@@ -101,6 +101,8 @@
                     ADM_PP      _pp;             // Postprocessing settings
                     ADMImage	*_imageBuffer;   // Temp buffer used for decoding
                     uint32_t    _currentSegment;   // Current video segment
+                    uint64_t    _nextFrameDts;      // COPYMODE Used in copy mode to fill the missing timestamp
+                                                    // Warning, it is actually the DTS of the NEXT frame to fetch
 //****************************** Audio **********************************
                     // _audiooffset points to the offset / the total segment
                     // not the used part !
@@ -153,7 +155,7 @@
                     bool        rewind(void);
 // Used for stream copy
                     bool        GoToIntraTime_noDecoding(uint64_t time,uint32_t *toframe=NULL);
-                    bool        getCompressedPicture(ADMCompressedImage *img);                    
+                    bool        getCompressedPicture(ADMCompressedImage *img);     //COPYMODE                
 public:
                     uint8_t	    updateVideoInfo(aviInfo *info);
                     uint32_t 	getSpecificMpeg4Info( void );
@@ -206,6 +208,7 @@
                     bool                remove(uint64_t start,uint64_t end);
                     bool                addSegment(uint32_t ref, uint64_t startRef, uint64_t duration);
                     bool                clearSegment(void);
+                    bool                dumpEditing(void);
 /******************************* /Editing **********************************/										
 /******************************* Misc ************************************/				
                     uint8_t             setEnv(_ENV_EDITOR_FLAGS newflag);

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script/ADM_JSAvidemuxVideo.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script/ADM_JSAvidemuxVideo.cpp	2009-11-04 06:47:54 UTC (rev 5441)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script/ADM_JSAvidemuxVideo.cpp	2009-11-05 18:24:29 UTC (rev 5442)
@@ -52,17 +52,20 @@
 	{ "saveJpeg", SaveJPEG, 1, 0, 0 },	// save the current frame as a JPEG
 	{ "listBlackFrames", ListBlackFrames, 1, 0, 0 },	// output a list of the black frame to a file
 	{ "setPostProc", PostProcess, 3, 0, 0 },	// Postprocess
-        { "setFps1000", SetFps1000, 1, 0, 0 },        // Postprocess
-        { "getFps1000", GetFps1000, 0, 0, 0 },        // Postprocess
-        { "getNbFrames", GetNbFrames, 0, 0, 0 },        // Postprocess
-        { "getWidth", GetWidth, 0, 0, 0 },        // Postprocess
-        { "getHeight", GetHeight, 0, 0, 0 },        // Postprocess
-        { "getFCC", GetFCC, 0, 0, 0 },        // Postprocess
-        { "isVopPacked", isVopPacked, 0, 0, 0 },        // Postprocess
-        { "hasQpel", hasQpel, 0, 0, 0 },        // Postprocess
-        { "hasGmc", hasGmc, 0, 0, 0 },        // Postprocess
-        { "frameSize", getFrameSize, 1, 0, 0 },        // FrameSize
-        { "frameType", getFrameType, 1, 0, 0 },        // Postprocess
+    { "setFps1000", SetFps1000, 1, 0, 0 },        // Postprocess
+    { "getFps1000", GetFps1000, 0, 0, 0 },        // Postprocess
+    { "getNbFrames", GetNbFrames, 0, 0, 0 },        // Postprocess
+    { "getWidth", GetWidth, 0, 0, 0 },        // Postprocess
+    { "getHeight", GetHeight, 0, 0, 0 },        // Postprocess
+    { "getFCC", GetFCC, 0, 0, 0 },        // Postprocess
+    { "isVopPacked", isVopPacked, 0, 0, 0 },        // Postprocess
+    { "hasQpel", hasQpel, 0, 0, 0 },        // Postprocess
+    { "hasGmc", hasGmc, 0, 0, 0 },        // Postprocess
+    { "frameSize", getFrameSize, 1, 0, 0 },        // FrameSize
+    { "frameType", getFrameType, 1, 0, 0 },        // Postprocess
+
+
+    { "dumpEditing", dumpEditing,0,0,0},
 	{ 0 }
 };
 
@@ -607,4 +610,23 @@
 #endif
         return JS_TRUE;
 }// end PostProcess
+/**
+    \fn dumpEditing
+    \brief dump segment, video & all
+*/
+JSBool ADM_JSAvidemuxVideo::dumpEditing(JSContext *cx, JSObject *obj, uintN argc, 
+                                       jsval *argv, jsval *rval)
+{// begin PostProcess
+uint32_t info;
+uint32_t frame;
+uint32_t sz;
+        if(argc != 0)
+          return JS_FALSE;
+  
+        enterLock();
+        video_body->dumpEditing();
+        leaveLock(); 
+        
+        return JS_TRUE;
+}// end PostProcess
 /* EOF */

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script/ADM_JSAvidemuxVideo.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script/ADM_JSAvidemuxVideo.h	2009-11-04 06:47:54 UTC (rev 5441)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script/ADM_JSAvidemuxVideo.h	2009-11-05 18:24:29 UTC (rev 5442)
@@ -45,6 +45,7 @@
 	static JSBool hasQpel(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval);
         static JSBool getFrameSize(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval);
 	static JSBool getFrameType(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval);
+	static JSBool dumpEditing(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval);
 
 
 	static JSPropertySpec avidemuxvideo_properties[];



From mean at mail.berlios.de  Thu Nov  5 19:24:40 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Thu, 5 Nov 2009 19:24:40 +0100
Subject: [Avidemux-svn-commit] r5443 -
	branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor
Message-ID: <200911051824.nA5IOeGo030176@sheep.berlios.de>

Author: mean
Date: 2009-11-05 19:24:39 +0100 (Thu, 05 Nov 2009)
New Revision: 5443

Modified:
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edRender.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edSearch.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edVideoCopy.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_segment.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_segment.h
Log:
[Editor] Better cut for video, works ok-ish for mpeg2

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edRender.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edRender.cpp	2009-11-05 18:24:29 UTC (rev 5442)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edRender.cpp	2009-11-05 18:24:39 UTC (rev 5443)
@@ -88,6 +88,26 @@
     }
     if(toframe) *toframe=frame;
     ref->lastSentFrame=frame; // For copy
+    // Initialize _nextFrameDts, in fact next DTS
+    uint64_t pts,dts;
+    ref->_aviheader->getPtsDts(frame,&pts,&dts);
+    if(dts==ADM_NO_PTS)
+    {
+        if(pts==ADM_NO_PTS) 
+        {
+            ADM_warning("No PTS nor DTS, cannot set start DTS");
+            return false; // Fixme we can still guess DTS
+        }
+        // convert to linear time
+        _segments.dtsFromPts(seg->_reference,pts,&dts);
+    }
+        time=(int64_t)dts;
+        time-=seg->_refStartTimeUs;
+        time+=seg->_startTimeUs;
+        dts=time;
+    
+    _nextFrameDts=dts;
+    seg->_dropBframes=1;
     return true;
 }
 /**
@@ -287,22 +307,15 @@
     ADM_info("Trying to switch to seg %"LU" with startTime in reference pic= %"LU" ms\n",s,seg->_refStartTimeUs/1000);
         // If the refStartTime is 0, it is the first image
         // But the fist image might not be = 0
-        _VIDEOS *vid=_segments.getRefVideo(seg->_reference);
-        vidHeader 	*demuxer=vid->_aviheader;  
-        ADM_assert(vid);
-        uint64_t from=seg->_refStartTimeUs;
-      uint32_t flags;
+      _VIDEOS *vid=_segments.getRefVideo(seg->_reference);
+      vidHeader 	*demuxer=vid->_aviheader;  
+      ADM_assert(vid);
+      uint64_t from=seg->_refStartTimeUs;
       uint64_t pts,dts;
-        demuxer->getFlags(0,&flags);
-        demuxer->getPtsDts(0,&pts,&dts);
-    if(!seg->_refStartTimeUs)
-    {
-        if(pts!=ADM_NO_PTS && pts)
-        {
-                ADM_info("This segment does not start at 0,...\n");
-                from=pts;
-        }
-    }
+
+      if(!from) from=vid->firstFramePts;
+
+    
     if(false==seektoTime(seg->_reference,from,dontdecode))
     {
             ADM_warning("Cannot seek to beginning of segment %"LU" at  %"LLU" ms\n",s,from/1000);

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edSearch.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edSearch.cpp	2009-11-05 18:24:29 UTC (rev 5442)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edSearch.cpp	2009-11-05 18:24:39 UTC (rev 5443)
@@ -84,20 +84,13 @@
         ADM_warning(" Cannot find seg for time %"LLD"\n",*frameTime);
         return false;
     }   
-    // Special case : The very first frame
+    // Special case : The very first frame FIXME
     if(*frameTime<=1)
       {
           _VIDEOS *vid=_segments.getRefVideo(0);
-          uint64_t pts,dts;
-          vid->_aviheader->getPtsDts(0,&pts,&dts);
-          if(pts!=ADM_NO_PTS)
-            {
-              if(pts>0)
-                {
-                    ADM_warning("This video does not start at 0 but at %"LLU" ms, compensating\n",pts/1000);
-                    _segments.convertLinearTimeToSeg(  *frameTime+pts, &seg, &segTime);
-                }
-            }
+          uint64_t pts=vid->firstFramePts;
+          ADM_warning("This video does not start at 0 but at %"LLU" ms, compensating\n",pts/1000);
+          _segments.convertLinearTimeToSeg(  *frameTime+pts, &seg, &segTime);
       }
     // 
 again:

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edVideoCopy.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edVideoCopy.cpp	2009-11-05 18:24:29 UTC (rev 5442)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edVideoCopy.cpp	2009-11-05 18:24:39 UTC (rev 5443)
@@ -41,6 +41,9 @@
     uint64_t tail;
     //
 againGet:
+    static uint32_t fn;
+    fn++;
+
     _SEGMENT *seg=_segments.getSegment(_currentSegment);
     ADM_assert(seg);
     _VIDEOS *vid=_segments.getRefVideo(seg->_reference);
@@ -60,7 +63,7 @@
     {
         if(seg->_dropBframes==2) 
         {
-            ADM_warning("Dropping bframes\n");
+            ADM_warning("%"LU" Dropping bframes\n",fn);
             goto againGet;
         }
     }else
@@ -74,6 +77,8 @@
     }
     // Need to switch seg ?
     tail=seg->_refStartTimeUs+seg->_durationUs;
+    // Guess DTS
+
    // ADM_info("Frame : Flags :%X, DTS:%"LLD" PTS=%"LLD" tail=%"LLD"\n",img->flags,img->demuxerDts/1000,img->demuxerPts/1000,tail);
     if(img->demuxerDts!= ADM_NO_PTS && img->demuxerDts>=tail) goto nextSeg;
     if(img->demuxerPts!= ADM_NO_PTS && img->demuxerPts>=tail) goto nextSeg;
@@ -82,6 +87,20 @@
         recalibrate(&(img->demuxerPts),seg);
         recalibrate(&(img->demuxerDts),seg);
     }
+    // From here we are in linear time...
+    if(img->demuxerDts==ADM_NO_PTS)
+    {
+        img->demuxerDts=_nextFrameDts;
+    }else
+    {
+        if(_nextFrameDts>img->demuxerDts) 
+        {
+         ADM_error("Frame %"LU" DTS is going back in time : expected : %"LLU" ms got : %"LLU" ms\n",fn,_nextFrameDts/1000,img->demuxerDts/1000);
+        }
+        _nextFrameDts=img->demuxerDts;
+    }
+    // Increase for next one
+    _nextFrameDts+=vid->timeIncrementInUs;
     // Check the DTS is not too late compared to next seg beginning...
     if(_currentSegment+1<_segments.getNbSegments() && img->demuxerDts!=ADM_NO_PTS)
     {
@@ -89,13 +108,13 @@
         int64_t nextDts=nextSeg->_startTimeUs+nextSeg->_refStartDts;
         if(nextDts<nextSeg->_refStartTimeUs)
         {
-            ADM_warning("next DTS is negative %"LLU" %"LLU" ms\n",nextDts,nextSeg->_refStartTimeUs);
+            ADM_warning("%"LU" next DTS is negative %"LLU" %"LLU" ms\n",fn,nextDts,nextSeg->_refStartTimeUs);
         }else       
         {
             nextDts-=nextSeg->_refStartTimeUs;
             if(img->demuxerDts>=nextDts)
             {
-                ADM_warning("have to switch segment, DTS limit reached %"LLU" %"LLU"\n",img->demuxerDts/1000,nextDts/1000);
+                ADM_warning("%"LU" have to switch segment, DTS limit reached %"LLU" %"LLU"\n",fn,img->demuxerDts/1000,nextDts/1000);
                 goto nextSeg;
             }
         }

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_segment.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_segment.cpp	2009-11-05 18:24:29 UTC (rev 5442)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_segment.cpp	2009-11-05 18:24:39 UTC (rev 5443)
@@ -76,15 +76,13 @@
     uint64_t pts,dts;
         demuxer->getFlags(0,&flags);
         demuxer->getPtsDts(0,&pts,&dts);
-
+        ref->firstFramePts=0;
         if(pts!=ADM_NO_PTS &&pts)
         {
             ADM_warning("The first frame has a PTS >0, adjusting to %"LLU" ms\n",pts/1000);
-//            seg._refStartTimeUs=pts;
+            ref->firstFramePts=pts;
         }
-    //
 
-
     segments.push_back(seg);
     videos.push_back(*ref);
     updateStartTime();
@@ -464,8 +462,7 @@
         printf("\tstartLinear  :%08"LLU" %s\n",s->_startTimeUs,us2plain(s->_startTimeUs));
         printf("\tduration     :%08"LLU" %s\n",s->_durationUs,us2plain(s->_durationUs));
         printf("\trefStartPts  :%08"LLU" %s\n",s->_refStartTimeUs,us2plain(s->_refStartTimeUs));
-        printf("\trefStartDts  :%08"LLU" %s\n",s->_refStartTimeUs,us2plain(s->_refStartDts));
-
+        printf("\trefStartDts  :%08"LLU" %s\n",s->_refStartDts,us2plain(s->_refStartDts));
     }
 }
 

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_segment.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_segment.h	2009-11-05 18:24:29 UTC (rev 5442)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_segment.h	2009-11-05 18:24:39 UTC (rev 5443)
@@ -67,6 +67,8 @@
       uint64_t lastDecodedPts; /// Pts of last frame out of decoder
       uint64_t lastReadPts; /// Pts of the last frame we read
       uint64_t timeIncrementInUs; /// in case the video has no PTS, time increment (us)
+
+      uint64_t firstFramePts; /// Pts of firstFrame
 }_VIDEOS;
 
 /**



From mean at mail.berlios.de  Thu Nov  5 19:24:47 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Thu, 5 Nov 2009 19:24:47 +0100
Subject: [Avidemux-svn-commit] r5444 -
	branches/avidemux_2.6_branch_mean/avidemux/common/ADM_muxerGate/src
Message-ID: <200911051824.nA5IOlGV030339@sheep.berlios.de>

Author: mean
Date: 2009-11-05 19:24:44 +0100 (Thu, 05 Nov 2009)
New Revision: 5444

Modified:
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_muxerGate/src/ADM_videoCopy.cpp
Log:
[MuxerGate] dropping orphean bframes will be done by editor

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_muxerGate/src/ADM_videoCopy.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_muxerGate/src/ADM_videoCopy.cpp	2009-11-05 18:24:39 UTC (rev 5443)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_muxerGate/src/ADM_videoCopy.cpp	2009-11-05 18:24:44 UTC (rev 5444)
@@ -110,6 +110,7 @@
     }
     *len=image.dataLength;
     ADM_assert(*len<maxLen);
+#if 0
     if(image.demuxerPts!=ADM_NO_PTS)
         if(image.demuxerPts<startTimePts)   
         {
@@ -119,6 +120,7 @@
                 goto again;
             }
         }
+#endif
     *pts=rescaleTs(image.demuxerPts);
     *dts=rescaleTs(image.demuxerDts);
     if(image.demuxerPts!=ADM_NO_PTS)



From mean at mail.berlios.de  Thu Nov  5 19:25:00 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Thu, 5 Nov 2009 19:25:00 +0100
Subject: [Avidemux-svn-commit] r5445 -
	branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreMuxer/src
Message-ID: <200911051825.nA5IP09k030501@sheep.berlios.de>

Author: mean
Date: 2009-11-05 19:24:59 +0100 (Thu, 05 Nov 2009)
New Revision: 5445

Modified:
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreMuxer/src/ADM_coreMuxerFfmpeg.cpp
Log:
[FFMuxer] Silence

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreMuxer/src/ADM_coreMuxerFfmpeg.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreMuxer/src/ADM_coreMuxerFfmpeg.cpp	2009-11-05 18:24:44 UTC (rev 5444)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreMuxer/src/ADM_coreMuxerFfmpeg.cpp	2009-11-05 18:24:59 UTC (rev 5445)
@@ -421,7 +421,7 @@
                         if(audioDts>lastVideoDts+videoIncrement) break;
                     }
                 }
-                if(!nb) printf("[FF] A: No audio for video frame %d\n",written);
+                //if(!nb) printf("[FF] A: No audio for video frame %d\n",written);
             }
 
     }



From mean at mail.berlios.de  Thu Nov  5 19:25:11 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Thu, 5 Nov 2009 19:25:11 +0100
Subject: [Avidemux-svn-commit] r5446 -
	branches/avidemux_2.6_branch_mean/autononreg/videofunc
Message-ID: <200911051825.nA5IPBp8030756@sheep.berlios.de>

Author: mean
Date: 2009-11-05 19:25:03 +0100 (Thu, 05 Nov 2009)
New Revision: 5446

Added:
   branches/avidemux_2.6_branch_mean/autononreg/videofunc/dumpEditing.js
Log:
[JS] Sample app.video.dumpEditing()

Added: branches/avidemux_2.6_branch_mean/autononreg/videofunc/dumpEditing.js
===================================================================
--- branches/avidemux_2.6_branch_mean/autononreg/videofunc/dumpEditing.js	2009-11-05 18:24:59 UTC (rev 5445)
+++ branches/avidemux_2.6_branch_mean/autononreg/videofunc/dumpEditing.js	2009-11-05 18:25:03 UTC (rev 5446)
@@ -0,0 +1,5 @@
+//AD  <- These first 4 characters need to be the first 4 characters to identify the ECMAScript file to Avidemux
+var app = new Avidemux();
+app.video.dumpEditing();
+/* End of test
+*/



From mean at mail.berlios.de  Thu Nov  5 19:35:33 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Thu, 5 Nov 2009 19:35:33 +0100
Subject: [Avidemux-svn-commit] r5447 -
	branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreImage/include
Message-ID: <200911051835.nA5IZXsE023477@sheep.berlios.de>

Author: mean
Date: 2009-11-05 19:35:32 +0100 (Thu, 05 Nov 2009)
New Revision: 5447

Modified:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreImage/include/ADM_videoFilter_internal.h
Log:
[Filter] Make partial works again, patch by forumer ratte

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreImage/include/ADM_videoFilter_internal.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreImage/include/ADM_videoFilter_internal.h	2009-11-05 18:25:03 UTC (rev 5446)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreImage/include/ADM_videoFilter_internal.h	2009-11-05 18:35:32 UTC (rev 5447)
@@ -33,7 +33,7 @@
 }VF_CATEGORY;
 #define VF_INVALID 		  0
 
-#define VF_PARTIAL_FILTER 9
+#define VF_PARTIAL_FILTER  filterGetTagFromName( "partial" )
 #define VF_START_TAG 	  10
 
 typedef uint32_t VF_FILTERS ;



From mean at mail.berlios.de  Fri Nov  6 19:13:15 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Fri, 6 Nov 2009 19:13:15 +0100
Subject: [Avidemux-svn-commit] r5448 -
	branches/avidemux_2.6_branch_mean/avidemux/common
Message-ID: <200911061813.nA6IDFW5009704@sheep.berlios.de>

Author: mean
Date: 2009-11-06 19:13:13 +0100 (Fri, 06 Nov 2009)
New Revision: 5448

Added:
   branches/avidemux_2.6_branch_mean/avidemux/common/A_functions.h
Modified:
   branches/avidemux_2.6_branch_mean/avidemux/common/gtk_gui.cpp
Log:
[Main] Put A_function declarations in a separate file

Added: branches/avidemux_2.6_branch_mean/avidemux/common/A_functions.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/A_functions.h	2009-11-05 18:35:32 UTC (rev 5447)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/A_functions.h	2009-11-06 18:13:13 UTC (rev 5448)
@@ -0,0 +1,30 @@
+ /**
+    \file   A_function.h
+    \brief  Declaration A_function
+*/
+#ifndef A_FUNCTION_H
+#define A_FUNCTION_H
+
+int     A_delete(uint32_t start, uint32_t end);
+void    A_externalAudioTrack( void );
+uint8_t A_rebuildKeyFrame (void);
+void    A_openBrokenAvi (const char *name);
+int     A_openAvi2 (const char *name, uint8_t mode);
+int     A_appendAvi (const char *name);
+void    A_saveWorkbench (const char *name);
+void    A_videoCheck( void);
+void	A_setPostproc( void );
+void    A_Resync(void);
+void    A_addJob(void);
+void    A_audioTrack(void);
+int     A_Save(const char *name);
+int     A_SaveWrapper( char *name);
+void    A_parseECMAScript(const char *name);
+uint8_t A_autoDrive(Action action);
+uint8_t A_TimeShift(void);
+void    A_ResetMarkers(void);
+void    A_Rewind(void);
+void    A_jog(void);
+uint8_t A_jumpToTime(uint32_t hh,uint32_t mm,uint32_t ss,uint32_t ms);
+
+#endif
\ No newline at end of file

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/gtk_gui.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/gtk_gui.cpp	2009-11-05 18:35:32 UTC (rev 5447)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/gtk_gui.cpp	2009-11-06 18:13:13 UTC (rev 5448)
@@ -44,27 +44,7 @@
 //***********************************
 //******** A Function ***************
 //***********************************
-int     A_delete(uint32_t start, uint32_t end);
-void    A_externalAudioTrack( void );
-uint8_t A_rebuildKeyFrame (void);
-void    A_openBrokenAvi (const char *name);
-int     A_openAvi2 (const char *name, uint8_t mode);
-int     A_appendAvi (const char *name);
-void    A_saveWorkbench (const char *name);
-static void A_videoCheck( void);
-static void	A_setPostproc( void );
-void    A_Resync(void);
-void    A_addJob(void);
-void    A_audioTrack(void);
-extern int A_Save(const char *name);
-int     A_SaveWrapper( char *name);
-void    A_parseECMAScript(const char *name);
-extern uint8_t A_autoDrive(Action action);
-uint8_t A_TimeShift(void);
-void    A_ResetMarkers(void);
-void    A_Rewind(void);
-extern void A_jog(void);
-uint8_t A_jumpToTime(uint32_t hh,uint32_t mm,uint32_t ss,uint32_t ms);
+#include "A_functions.h"
 //***********************************
 //******** GUI Function**************
 //***********************************
@@ -84,6 +64,7 @@
        void    GUI_avsProxy(void);
        uint8_t GUI_close(void);
 extern int     GUI_GoToFrame(uint32_t frame);;
+extern bool    GUI_GoToTime(uint64_t time);
 //***********************************
 //******** DIA Function**************
 //***********************************
@@ -441,8 +422,10 @@
             {
               A_ResetMarkers();              
               A_Resync(); // total duration & stuff
-            // Rewind to first frame...
-                A_Rewind();
+              // Rewind to first frame...
+              //A_Rewind();
+              GUI_GoToTime(a);
+                
             }
         }
         



From mean at mail.berlios.de  Fri Nov  6 19:13:18 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Fri, 6 Nov 2009 19:13:18 +0100
Subject: [Avidemux-svn-commit] r5449 -
	branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor
Message-ID: <200911061813.nA6IDILh009726@sheep.berlios.de>

Author: mean
Date: 2009-11-06 19:13:17 +0100 (Fri, 06 Nov 2009)
New Revision: 5449

Modified:
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADMedAVIAUD.cpp
Log:
[Audio] Fix segment switching when copying audio

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADMedAVIAUD.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADMedAVIAUD.cpp	2009-11-06 18:13:13 UTC (rev 5448)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADMedAVIAUD.cpp	2009-11-06 18:13:17 UTC (rev 5449)
@@ -238,7 +238,6 @@
     _SEGMENT *seg=_segments.getSegment(_audioSeg);
     ADM_audioStreamTrack *trk=getTrack(seg->_reference);
     if(!trk) return 0;
-    uint64_t off=lastDts-seg->_startTimeUs;
    
     // Read a packet
 zgain:
@@ -255,14 +254,19 @@
             ADM_warning("Audio packet is too early %"LLU" ms, this segment starts at %"LLU"ms\n",*odts,seg->_refStartTimeUs);
             goto zgain;
         }
-        
+#if 0
+        ADM_info("Audio DTS:%"LLU" ms, ref StartTime :%"LLU" Delta:%"LLU" duration :%"LLU"\n",
+                    *odts/1000,seg->_refStartTimeUs/1000,(*odts-seg->_refStartTimeUs)/1000,seg->_durationUs/1000);
+#endif
         *odts-=seg->_refStartTimeUs;
         if(*odts>seg->_durationUs)
         {
             if(switchToNextAudioSegment()==false)
             {
+                
                 return false;
             }
+            seg=_segments.getSegment(_audioSeg);
             goto zgain;
         }
         *odts+=seg->_startTimeUs;



From mean at mail.berlios.de  Sat Nov  7 09:43:04 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sat, 7 Nov 2009 09:43:04 +0100
Subject: [Avidemux-svn-commit] r5450 -
	branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiofilter
Message-ID: <200911070843.nA78h4l2018767@sheep.berlios.de>

Author: mean
Date: 2009-11-07 09:43:04 +0100 (Sat, 07 Nov 2009)
New Revision: 5450

Modified:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiofilter/audio_encoderPlugin.cpp
Log:
[audioEncoder] Remove static enc, refs #49, probably hides memory corruption

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiofilter/audio_encoderPlugin.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiofilter/audio_encoderPlugin.cpp	2009-11-06 18:13:17 UTC (rev 5449)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiofilter/audio_encoderPlugin.cpp	2009-11-07 08:43:04 UTC (rev 5450)
@@ -343,8 +343,9 @@
 AUDMEncoder *audioEncoderCreate(AUDMAudioFilter *filter)
 {
       ADM_assert(currentEncoder<ListOfAudioEncoder.size());
-      static ADM_audioEncoder *enc=ListOfAudioEncoder[currentEncoder];
-     return enc->create(filter);
+      printf("[**] Current encoder : %d :%s\n",currentEncoder,ListOfAudioEncoder[currentEncoder]->menuName);
+      ADM_audioEncoder *enc=ListOfAudioEncoder[currentEncoder];
+      return enc->create(filter);
 }
 /**
         \fn getAudioExtraConf



From mean at mail.berlios.de  Sun Nov  8 18:39:17 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sun, 8 Nov 2009 18:39:17 +0100
Subject: [Avidemux-svn-commit] r5451 -
	branches/avidemux_2.6_branch_mean/avidemux/common
Message-ID: <200911081739.nA8HdHaN007961@sheep.berlios.de>

Author: mean
Date: 2009-11-08 18:39:16 +0100 (Sun, 08 Nov 2009)
New Revision: 5451

Modified:
   branches/avidemux_2.6_branch_mean/avidemux/common/gui_navigate.cpp
Log:
[GUI] Implement GUI_GoToTime

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/gui_navigate.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/gui_navigate.cpp	2009-11-07 08:43:04 UTC (rev 5450)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/gui_navigate.cpp	2009-11-08 17:39:16 UTC (rev 5451)
@@ -461,7 +461,14 @@
 */
 bool GUI_GoToTime(uint64_t time)
 {
-    ADM_warning("GUI_GoToTime called\n");
-    return false; 
+
+    // We have to call the editor as the frames needed to decode the target frame may be hidden
+    if(false==video_body->goToTimeVideo(time))
+    {
+        GUI_Error_HIG("Seek", "Error seekting to %"LLU" ms",time/1000);
+    }
+    admPreview::samePicture();
+    GUI_setCurrentFrameAndTime();
+    return true;
 }   
 // EOF



From mean at mail.berlios.de  Sun Nov  8 18:56:41 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sun, 8 Nov 2009 18:56:41 +0100
Subject: [Avidemux-svn-commit] r5452 -
	branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiofilter
Message-ID: <200911081756.nA8HufUf015650@sheep.berlios.de>

Author: mean
Date: 2009-11-08 18:56:38 +0100 (Sun, 08 Nov 2009)
New Revision: 5452

Modified:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiofilter/audiofilter_buildchain.cpp
Log:
[FAAC/Calculator] Dont use null encoder if initiliazing audio encoder fails, fixes #25

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiofilter/audiofilter_buildchain.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiofilter/audiofilter_buildchain.cpp	2009-11-08 17:39:16 UTC (rev 5451)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiofilter/audiofilter_buildchain.cpp	2009-11-08 17:56:38 UTC (rev 5452)
@@ -285,25 +285,30 @@
     printf(" buildInternalAudioFilter failed\n");
     return 0;
   }
+  
   if(lastFilter->getInfo()->channels > audioFilter_getMaxChannels())
   {
     GUI_Error_HIG(QT_TR_NOOP("Codec Error"),QT_TR_NOOP("The number of channels is greater than what the selected audio codec can do.\n"
         "Either change codec or use the mixer filter to have less channels."));
     deleteAudioFilter(NULL);
-    return 0; 
+    return NULL; 
   }
-
+  
   tmpfilter=audioEncoderCreate(lastFilter);
   if(!tmpfilter || !tmpfilter->initialize())
   {
+    
     if(tmpfilter) delete tmpfilter;
     tmpfilter=NULL;
-    GUI_Error_HIG(QT_TR_NOOP("[BuildChain] Encoder initialization failed"), QT_TR_NOOP("Not activated."));
+    GUI_Error_HIG(QT_TR_NOOP("[BuildChain] Encoder initialization failed"), QT_TR_NOOP("Not activated, make sure number of channels and bitrate are compatible with encoder!"));
+    return NULL;
   }
+  
   ADM_audioEncoderWrapper *wrapper=new ADM_audioEncoderWrapper(tmpfilter);
   output=wrapper;
   currentaudiostream->beginDecompress();
   ADM_assert(output);
+  
   return output;
 }
 



From mean at mail.berlios.de  Mon Nov  9 19:17:59 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Mon, 9 Nov 2009 19:17:59 +0100
Subject: [Avidemux-svn-commit] r5453 - in branches/avidemux_2.6_branch_mean:
	avidemux/common/ADM_editor avidemux_core/ADM_core/include
	avidemux_core/ADM_core/src
Message-ID: <200911091817.nA9IHxiP017782@sheep.berlios.de>

Author: mean
Date: 2009-11-09 19:17:57 +0100 (Mon, 09 Nov 2009)
New Revision: 5453

Modified:
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_segment.cpp
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_core/include/ADM_vidMisc.h
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_core/src/ADM_misc.cpp
Log:
[Misc] Move ADM_us2plain to avidemux_core

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_segment.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_segment.cpp	2009-11-08 17:56:38 UTC (rev 5452)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_segment.cpp	2009-11-09 18:17:57 UTC (rev 5453)
@@ -435,16 +435,6 @@
 }
 
 
-static const char *us2plain(uint64_t ams)
-{
-static char buffer[256];
-uint32_t ms=(uint32_t)(ams/1000);
-    uint32_t hh,mm,ss,mms;
-    ms2time(ms,&hh,&mm,&ss,&mms);
-    sprintf(buffer," %02"LU":%02"LU":%02"LU",%03"LU" ",hh,mm,ss,mms);
-    return buffer;
-
-}
 /**
     \fn dump
     \brief Dump the segment content
@@ -458,11 +448,11 @@
         _SEGMENT *s=getSegment(i);
         
         printf("Segment :%d/%d\n",i,n);
-        printf("\tReference    :%"LU"\n",s->_reference,us2plain(s->_reference));
-        printf("\tstartLinear  :%08"LLU" %s\n",s->_startTimeUs,us2plain(s->_startTimeUs));
-        printf("\tduration     :%08"LLU" %s\n",s->_durationUs,us2plain(s->_durationUs));
-        printf("\trefStartPts  :%08"LLU" %s\n",s->_refStartTimeUs,us2plain(s->_refStartTimeUs));
-        printf("\trefStartDts  :%08"LLU" %s\n",s->_refStartDts,us2plain(s->_refStartDts));
+        printf("\tReference    :%"LU"\n",s->_reference,ADM_us2plain(s->_reference));
+        printf("\tstartLinear  :%08"LLU" %s\n",s->_startTimeUs,ADM_us2plain(s->_startTimeUs));
+        printf("\tduration     :%08"LLU" %s\n",s->_durationUs,ADM_us2plain(s->_durationUs));
+        printf("\trefStartPts  :%08"LLU" %s\n",s->_refStartTimeUs,ADM_us2plain(s->_refStartTimeUs));
+        printf("\trefStartDts  :%08"LLU" %s\n",s->_refStartDts,ADM_us2plain(s->_refStartDts));
     }
 }
 

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_core/include/ADM_vidMisc.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_core/include/ADM_vidMisc.h	2009-11-08 17:56:38 UTC (rev 5452)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_core/include/ADM_vidMisc.h	2009-11-09 18:17:57 UTC (rev 5453)
@@ -22,10 +22,12 @@
                                 uint32_t ss, uint32_t ms);
 char*			ms2timedisplay(uint32_t ms);
 uint8_t         ms2time(uint32_t ms, uint32_t *h,uint32_t *m, uint32_t *s,uint32_t *mms);
+
 #define FRAME_PAL 1
 #define FRAME_FILM 2
 #define FRAME_NTSC 3
 
 uint8_t 	identMovieType(uint32_t fps1000); // identify the movie type (mainly for mpeg1/2) 
 uint8_t 	ms2time(uint32_t ms, uint32_t *h,uint32_t *m, uint32_t *s,uint32_t *mms);
+const char *ADM_us2plain(uint64_t ams);
 #endif

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_core/src/ADM_misc.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_core/src/ADM_misc.cpp	2009-11-08 17:56:38 UTC (rev 5452)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_core/src/ADM_misc.cpp	2009-11-09 18:17:57 UTC (rev 5453)
@@ -192,7 +192,20 @@
                               *mms=ms-1000*(ms/1000);
       return 1;
 }
+/**
+    \fn The Office_6x08_HDTV.2HD.en
+    \brief convert a time in us to a string in 0:0:0'0 format
+*/
+const char *ADM_us2plain(uint64_t ams)
+{
+static char buffer[256];
+uint32_t ms=(uint32_t)(ams/1000);
+    uint32_t hh,mm,ss,mms;
+    ms2time(ms,&hh,&mm,&ss,&mms);
+    sprintf(buffer," %02"LU":%02"LU":%02"LU",%03"LU" ",hh,mm,ss,mms);
+    return buffer;
 
+}
 
 /**
         \fn ADM_LowerCase



From mean at mail.berlios.de  Mon Nov  9 19:18:08 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Mon, 9 Nov 2009 19:18:08 +0100
Subject: [Avidemux-svn-commit] r5454 -
	branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor
Message-ID: <200911091818.nA9II8Mp018004@sheep.berlios.de>

Author: mean
Date: 2009-11-09 19:18:03 +0100 (Mon, 09 Nov 2009)
New Revision: 5454

Modified:
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edSearch.cpp
Log:
[Editor] Fix previous keyframe when switching segment

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edSearch.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edSearch.cpp	2009-11-09 18:17:57 UTC (rev 5453)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edSearch.cpp	2009-11-09 18:18:03 UTC (rev 5454)
@@ -95,10 +95,18 @@
     // 
 again:
     _SEGMENT *s=_segments.getSegment(seg);
+    int64_t delta=*frameTime-s->_startTimeUs; // Delta compared to the beginning of this seg
+    
+    delta+=s->_refStartTimeUs;
+    if(delta<0)
+    {
+        ADM_error("Time is negative\n");
+        return false;
+    }
     uint32_t ref=s->_reference;
     // 2- Now search the previous keyframe in the ref image...
     // The time in reference = relTime+segmentStartTime
-    refTime=s->_refStartTimeUs+segTime; // Absolute time in the reference image
+    refTime=delta;
     
     r=searchPreviousKeyFrameInRef(ref,refTime,&nkTime);
 
@@ -107,7 +115,8 @@
     {
         if(!seg)
         {
-            ADM_warning(" No previous previous keyfr for frameTime %"LLU"\n",*frameTime);
+            ADM_warning(" No previous previous keyfr for frameTime %"LLU" in ref %"LU" seg:%"LU" nkTime %"LLU" refTime:%"LLU" ms startTime=%"LLU" r=%d\n",
+                            *frameTime,ref,seg,nkTime/1000,refTime/1000,s->_refStartTimeUs/1000,r);
             return false;
         }
         // Go to the next segment



From mean at mail.berlios.de  Wed Nov 11 18:46:30 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Wed, 11 Nov 2009 18:46:30 +0100
Subject: [Avidemux-svn-commit] r5455 - in
	branches/avidemux_2.6_branch_mean/avidemux_plugins:
	ADM_demuxers/Asf ADM_demuxers/Flv ADM_demuxers/Matroska
	ADM_demuxers/Mp4 ADM_demuxers/MpegPS ADM_demuxers/MpegTS
	ADM_demuxers/OpenDml ADM_demuxers/Pictures ADM_muxers/muxerRaw
Message-ID: <200911111746.nABHkUe1011035@sheep.berlios.de>

Author: mean
Date: 2009-11-11 18:46:28 +0100 (Wed, 11 Nov 2009)
New Revision: 5455

Modified:
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/Asf/ADM_asf.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/Asf/ADM_asfAudio.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/Flv/ADM_flv.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/Flv/ADM_flvAudio.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/Matroska/ebml.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/Mp4/ADM_mp4.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/Mp4/ADM_mp4Plugin.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/Mp4/ADM_mp4audio.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegPS/ADM_psPlugin.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/ADM_tsPlugin.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/OpenDml/ADM_odml_audio.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/OpenDml/ADM_openDML.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/OpenDml/ADM_openDMLPlugin.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/OpenDml/ADM_riff.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/Pictures/ADM_pics.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerRaw/muxerRaw.cpp
Log:
[Plugins] fopen->ADM_fopen

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/Asf/ADM_asf.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/Asf/ADM_asf.cpp	2009-11-09 18:18:03 UTC (rev 5454)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/Asf/ADM_asf.cpp	2009-11-11 17:46:28 UTC (rev 5455)
@@ -147,7 +147,7 @@
 
 uint8_t asfHeader::open(const char *name)
 {
-  _fd=fopen(name,"rb");
+  _fd=ADM_fopen(name,"rb");
   if(!_fd)
   {
     GUI_Error_HIG("File Error.","Cannot open file\n");

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/Asf/ADM_asfAudio.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/Asf/ADM_asfAudio.cpp	2009-11-09 18:18:03 UTC (rev 5454)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/Asf/ADM_asfAudio.cpp	2009-11-11 17:46:28 UTC (rev 5455)
@@ -57,7 +57,7 @@
     extraData= _track->extraData;
     _streamId=_track->streamIndex;
     _dataStart=_father->_dataStartOffset;
-    _fd=fopen(_father->myName,"rb");
+    _fd=ADM_fopen(_father->myName,"rb");
     ADM_assert(_fd);
     fseeko(_fd,_dataStart,SEEK_SET);
     _packetSize=_father->_packetSize;

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/Flv/ADM_flv.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/Flv/ADM_flv.cpp	2009-11-09 18:18:03 UTC (rev 5454)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/Flv/ADM_flv.cpp	2009-11-11 17:46:28 UTC (rev 5455)
@@ -248,7 +248,7 @@
   videoTrack=NULL;
   _videostream.dwRate=0;
   _filename=ADM_strdup(name);
-  _fd=fopen(name,"rb");
+  _fd=ADM_fopen(name,"rb");
   if(!_fd)
   {
     printf("[FLV] Cannot open %s\n",name);

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/Flv/ADM_flvAudio.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/Flv/ADM_flvAudio.cpp	2009-11-09 18:18:03 UTC (rev 5454)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/Flv/ADM_flvAudio.cpp	2009-11-11 17:46:28 UTC (rev 5455)
@@ -44,7 +44,7 @@
 */
 ADM_flvAccess::ADM_flvAccess(const char *name,flvTrak *track) : ADM_audioAccess()
 {
-        _fd=fopen(name,"rb");
+        _fd=ADM_fopen(name,"rb");
         ADM_assert(_fd);
         _track=track;
         goToBlock(0);

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/Matroska/ebml.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/Matroska/ebml.cpp	2009-11-09 18:18:03 UTC (rev 5454)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/Matroska/ebml.cpp	2009-11-11 17:46:28 UTC (rev 5455)
@@ -269,7 +269,7 @@
 uint8_t ADM_ebml_file::open(const char *name)
 {
 
-  fp=fopen(name,"rb");
+  fp=ADM_fopen(name,"rb");
   if(!fp)
   {
     aprintf("[EBML FILE] Failed to open <%s>\n",name);

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/Mp4/ADM_mp4.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/Mp4/ADM_mp4.cpp	2009-11-09 18:18:03 UTC (rev 5454)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/Mp4/ADM_mp4.cpp	2009-11-11 17:46:28 UTC (rev 5455)
@@ -246,7 +246,7 @@
 uint8_t    MP4Header::open(const char *name)
 {
         printf("** opening 3gpp files **");
-        _fd=fopen(name,"rb");
+        _fd=ADM_fopen(name,"rb");
         if(!_fd)
         {
                 printf("\n cannot open %s \n",name);

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/Mp4/ADM_mp4Plugin.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/Mp4/ADM_mp4Plugin.cpp	2009-11-09 18:18:03 UTC (rev 5454)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/Mp4/ADM_mp4Plugin.cpp	2009-11-11 17:46:28 UTC (rev 5455)
@@ -32,7 +32,7 @@
 extern "C"  uint32_t         probe(uint32_t magic, const char *fileName)
 {
 uint8_t head[8];
-    FILE *f=fopen(fileName,"r");
+    FILE *f=ADM_fopen(fileName,"r");
     if(!f) return 0;
     fread(head,8,1,f);
     fclose(f);

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/Mp4/ADM_mp4audio.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/Mp4/ADM_mp4audio.cpp	2009-11-09 18:18:03 UTC (rev 5454)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/Mp4/ADM_mp4audio.cpp	2009-11-11 17:46:28 UTC (rev 5455)
@@ -46,7 +46,7 @@
  ADM_mp4AudioAccess::ADM_mp4AudioAccess(const char *name,MP4Track *track)
 {
 	_nb_chunks=track->nbIndex;
-	_fd=fopen(name,"rb");
+	_fd=ADM_fopen(name,"rb");
     ADM_assert(_fd);
 	_current_index=0;
 	_index=track->index;

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegPS/ADM_psPlugin.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegPS/ADM_psPlugin.cpp	2009-11-09 18:18:03 UTC (rev 5454)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegPS/ADM_psPlugin.cpp	2009-11-11 17:46:28 UTC (rev 5455)
@@ -46,7 +46,7 @@
     if(ADM_fileExist(index)) 
     {
         printf(" [PS Demuxer] There is an index for that file \n");
-        FILE *f=fopen(index,"rt");
+        FILE *f=ADM_fopen(index,"rt");
         char signature[10];
         fread(signature,4,1,f);
         signature[4]=0;
@@ -98,7 +98,7 @@
     uint32_t bufferSize;
     uint32_t nbPacket,nbMatch=0;
 
-    FILE *f=fopen(file,"rb");
+    FILE *f=ADM_fopen(file,"rb");
     if(!f) return false;
     bufferSize=fread(buffer,1,PROBE_SIZE,f);
     fclose(f);

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/ADM_tsPlugin.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/ADM_tsPlugin.cpp	2009-11-09 18:18:03 UTC (rev 5454)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/ADM_tsPlugin.cpp	2009-11-11 17:46:28 UTC (rev 5455)
@@ -47,7 +47,7 @@
     if(ADM_fileExist(index)) 
     {
         printf(" [TS Demuxer] There is an index for that file \n");
-        FILE *f=fopen(index,"rt");
+        FILE *f=ADM_fopen(index,"rt");
         char signature[10];
         fread(signature,4,1,f);
         signature[4]=0;
@@ -103,7 +103,7 @@
     uint32_t bufferSize;
     uint32_t nbPacket,nbMatch=0;
 
-    FILE *f=fopen(file,"rb");
+    FILE *f=ADM_fopen(file,"rb");
     if(!f) return false;
     bufferSize=fread(buffer,1,PROBE_SIZE,f);
     fclose(f);

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/OpenDml/ADM_odml_audio.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/OpenDml/ADM_odml_audio.cpp	2009-11-09 18:18:03 UTC (rev 5454)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/OpenDml/ADM_odml_audio.cpp	2009-11-11 17:46:28 UTC (rev 5455)
@@ -50,7 +50,7 @@
     nbIndex=nbchunk;
     length=0;
     for(int i=0;i<nbIndex;i++) length+=idx[i].size;
-    fd=fopen(name,"r");
+    fd=ADM_fopen(name,"r");
     ADM_assert(fd);
     pos=0;
     currentIndex=0;

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/OpenDml/ADM_openDML.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/OpenDml/ADM_openDML.cpp	2009-11-09 18:18:03 UTC (rev 5454)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/OpenDml/ADM_openDML.cpp	2009-11-11 17:46:28 UTC (rev 5455)
@@ -252,7 +252,7 @@
 
 	printf("** opening OpenDML files **");	
         
-	_fd=fopen(name,"rb");
+	_fd=ADM_fopen(name,"rb");
 	if(!_fd)
 	{
 		printf("\n cannot open %s \n",name);

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/OpenDml/ADM_openDMLPlugin.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/OpenDml/ADM_openDMLPlugin.cpp	2009-11-09 18:18:03 UTC (rev 5454)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/OpenDml/ADM_openDMLPlugin.cpp	2009-11-11 17:46:28 UTC (rev 5455)
@@ -34,7 +34,7 @@
     if (fourCC::check (magic, (uint8_t *) "RIFF"))
     {
         // Make sure it is really an avi...
-          FILE *f=fopen(fileName,"r");
+          FILE *f=ADM_fopen(fileName,"r");
           if(!f) return 0;
           uint8_t buf[12];
           fread(buf,12,1,f);

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/OpenDml/ADM_riff.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/OpenDml/ADM_riff.cpp	2009-11-09 18:18:03 UTC (rev 5454)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/OpenDml/ADM_riff.cpp	2009-11-11 17:46:28 UTC (rev 5455)
@@ -73,7 +73,7 @@
 }
 riffParser::riffParser(const char *name)
 {
-	ADM_assert(fd=fopen(name,"rb"));
+	ADM_assert(fd=ADM_fopen(name,"rb"));
 	startPos=0;
 	fseeko(fd,0,SEEK_END);
 	endPos=ftello(fd);

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/Pictures/ADM_pics.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/Pictures/ADM_pics.cpp	2009-11-09 18:18:03 UTC (rev 5454)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/Pictures/ADM_pics.cpp	2009-11-11 17:46:28 UTC (rev 5455)
@@ -178,7 +178,7 @@
     // 1- identity the file type
     //
     fcc = (uint32_t *) fcc_tab;
-    fd = fopen(inname, "rb");
+    fd = ADM_fopen(inname, "rb");
     if (!fd) {
 	printf("\n Cannot open that file!\n");
 	return 0;
@@ -250,7 +250,7 @@
 		sprintf(realname, realstring, i + _first);
 		printf(" %"LU" : %s\n", i, realname);
 
-		fd = fopen(realname, "rb");
+		fd = ADM_fopen(realname, "rb");
 
 		if (fd == NULL)
 			break;
@@ -477,7 +477,7 @@
 
 	sprintf(filename, _fileMask, frameNum + _first);
 
-	return fopen(filename, "rb");
+	return ADM_fopen(filename, "rb");
 }
 bool       picHeader::getPtsDts(uint32_t frame,uint64_t *pts,uint64_t *dts)
 {

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerRaw/muxerRaw.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerRaw/muxerRaw.cpp	2009-11-09 18:18:03 UTC (rev 5454)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerRaw/muxerRaw.cpp	2009-11-11 17:46:28 UTC (rev 5455)
@@ -57,7 +57,7 @@
 {
 
     vStream=s;
-    file=fopen(fil,"w");
+    file=ADM_fopen(fil,"w");
     if(!file) 
     {
         printf("[RawMuxer] Cannot open %s\n",fil);



From mean at mail.berlios.de  Wed Nov 11 18:46:38 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Wed, 11 Nov 2009 18:46:38 +0100
Subject: [Avidemux-svn-commit] r5456 - in
	branches/avidemux_2.6_branch_mean/avidemux_core:
	ADM_coreDemuxerMpeg/src ADM_coreImage/src ADM_coreUtils/src
	ADM_coreVideoEncoder/src
Message-ID: <200911111746.nABHkc3R011102@sheep.berlios.de>

Author: mean
Date: 2009-11-11 18:46:35 +0100 (Wed, 11 Nov 2009)
New Revision: 5456

Modified:
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreDemuxerMpeg/src/ADM_indexFile.cpp
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreDemuxerMpeg/src/dmx_io.cpp
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreImage/src/ADM_imageSave.cpp
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/src/ADM_quota.cpp
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoEncoder/src/ADM_coreVideoEncoderFFmpeg.cpp
Log:
[core] fopen->ADM_fopen

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreDemuxerMpeg/src/ADM_indexFile.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreDemuxerMpeg/src/ADM_indexFile.cpp	2009-11-11 17:46:28 UTC (rev 5455)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreDemuxerMpeg/src/ADM_indexFile.cpp	2009-11-11 17:46:35 UTC (rev 5456)
@@ -108,7 +108,7 @@
 
 bool indexFile::open(const char *name)
 {
-    file=fopen(name,"rt");
+    file=ADM_fopen(name,"rt");
     if(!file) return false;
     return true;
 }

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreDemuxerMpeg/src/dmx_io.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreDemuxerMpeg/src/dmx_io.cpp	2009-11-11 17:46:28 UTC (rev 5455)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreDemuxerMpeg/src/dmx_io.cpp	2009-11-11 17:46:35 UTC (rev 5456)
@@ -112,7 +112,7 @@
                 _sizeFdCumul = new uint64_t [_nbFd];
 
                 // open file
-                if(! (_fd[0] = fopen(filename, "rb")) )
+                if(! (_fd[0] = ADM_fopen(filename, "rb")) )
                   { return 0; }
 
                 // calculate file-size
@@ -163,7 +163,7 @@
                         strcat( followup, right );
 
                         // open file
-                        buffer_fd[count] = fopen(followup, "rb");
+                        buffer_fd[count] = ADM_fopen(followup, "rb");
                         if(! buffer_fd[count] )
                         {
                                 // we need at least one file!

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreImage/src/ADM_imageSave.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreImage/src/ADM_imageSave.cpp	2009-11-11 17:46:28 UTC (rev 5455)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreImage/src/ADM_imageSave.cpp	2009-11-11 17:46:35 UTC (rev 5456)
@@ -68,7 +68,7 @@
               ADM_dealloc(out);
               return 0;
         }
-        fd = fopen (filename, "wb");
+        fd = ADM_fopen (filename, "wb");
         if (!fd)
         {
                 GUI_Error_HIG (QT_TR_NOOP("Something bad happened"), NULL);
@@ -168,7 +168,7 @@
         }
         // Ok now write our file...
         {
-            FILE *f=fopen(filename,"wb");
+            FILE *f=ADM_fopen(filename,"wb");
             if(f)
             {
                 fwrite(buffer,sz,1,f);

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/src/ADM_quota.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/src/ADM_quota.cpp	2009-11-11 17:46:28 UTC (rev 5455)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/src/ADM_quota.cpp	2009-11-11 17:46:35 UTC (rev 5456)
@@ -72,7 +72,7 @@
   FILE * FD = NULL;
   int fd;
 	while( !FD ){
-		FD = fopen (path,mode);
+		FD = ADM_fopen (path,mode);
 		if( !FD && (errno == ENOSPC 
 #ifndef __MINGW32__
 || errno == EDQUOT

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoEncoder/src/ADM_coreVideoEncoderFFmpeg.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoEncoder/src/ADM_coreVideoEncoderFFmpeg.cpp	2009-11-11 17:46:28 UTC (rev 5455)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoEncoder/src/ADM_coreVideoEncoderFFmpeg.cpp	2009-11-11 17:46:35 UTC (rev 5456)
@@ -329,7 +329,7 @@
 bool ADM_coreVideoEncoderFFmpeg::loadStatFile(const char *file)
 {
   printf("[FFmpeg] Loading stat file :%s\n",file);
-  FILE *_statfile = fopen (file, "rb");
+  FILE *_statfile = ADM_fopen (file, "rb");
   int statSize;
 
   if (!_statfile)
@@ -541,7 +541,7 @@
                     printf("[ffMpeg4] Setup-ing Pass 1\n");
                     _context->flags |= CODEC_FLAG_PASS1;
                     // Open stat file
-                    statFile=fopen(statFileName,"wt");
+                    statFile=ADM_fopen(statFileName,"wt");
                     if(!statFile)
                     {
                         printf("[ffmpeg] Cannot open statfile %s for writing\n",statFileName);



From mean at mail.berlios.de  Wed Nov 11 18:46:42 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Wed, 11 Nov 2009 18:46:42 +0100
Subject: [Avidemux-svn-commit] r5457 - in
	branches/avidemux_2.6_branch_mean/avidemux/common: .
	ADM_editor ADM_script
Message-ID: <200911111746.nABHkgnR011141@sheep.berlios.de>

Author: mean
Date: 2009-11-11 18:46:41 +0100 (Wed, 11 Nov 2009)
New Revision: 5457

Modified:
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edIdentify.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edit.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_imageLoader.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script/ADM_JSGlobal.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/gtk_gui.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/gui_blackframes.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/gui_save.cpp
Log:
[main] fopen->ADM_fopen

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edIdentify.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edIdentify.cpp	2009-11-11 17:46:35 UTC (rev 5456)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edIdentify.cpp	2009-11-11 17:46:41 UTC (rev 5457)
@@ -35,7 +35,7 @@
   FILE *    tmp;
   uint8_t    ret =    1;
 
-  tmp = fopen (name, "rb");
+  tmp = ADM_fopen (name, "rb");
   if (!tmp)
     return 0;
 

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edit.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edit.cpp	2009-11-11 17:46:35 UTC (rev 5456)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edit.cpp	2009-11-11 17:46:41 UTC (rev 5457)
@@ -131,7 +131,7 @@
 
 	
   
-    FILE *f=fopen(name,"r");
+    FILE *f=ADM_fopen(name,"r");
     uint8_t buffer[4];
     if(!f) return 0;
     fread(buffer,4,1,f);

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_imageLoader.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_imageLoader.cpp	2009-11-11 17:46:35 UTC (rev 5456)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_imageLoader.cpp	2009-11-11 17:46:41 UTC (rev 5457)
@@ -100,7 +100,7 @@
 	uint32_t w = 0, h = 0;
 	   
 
-		fd = fopen(filename, "rb");
+		fd = ADM_fopen(filename, "rb");
 		fseek(fd, 0, SEEK_END);
 		_imgSize = ftell(fd);
 		fseek(fd, 0, SEEK_SET);
@@ -206,7 +206,7 @@
     uint16_t  s16;
     uint32_t s32;
 
-		fd = fopen(filename, "rb");
+		fd = ADM_fopen(filename, "rb");
 		fseek(fd, 0, SEEK_END);
 		_imgSize = ftell(fd);
 		fseek(fd, 0, SEEK_SET);
@@ -265,7 +265,7 @@
     FILE *fd=NULL;
     uint32_t w,h;
 
-		fd = fopen(filename, "rb");
+		fd = ADM_fopen(filename, "rb");
  	    fseek(fd, 10, SEEK_SET);
 
  #define MK32() (fcc_tab[0]+(fcc_tab[1]<<8)+(fcc_tab[2]<<16)+ \
@@ -315,7 +315,7 @@
     FILE *fd=NULL;
     uint32_t w,h;
 
-		fd = fopen(filename, "rb");
+		fd = ADM_fopen(filename, "rb");
  	    fseek(fd, 0, SEEK_END);
  	    size=ftell(fd);
  	   fseek(fd, 0, SEEK_SET);
@@ -362,7 +362,7 @@
 		    // 1- identity the file type
 		    //
 		    fcc = (uint32_t *) fcc_tab;
-		    fd = fopen(filename, "rb");
+		    fd = ADM_fopen(filename, "rb");
 		    if (!fd) 
 		    {
 		    	printf("[imageIdentify] Cannot open that file!\n");

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script/ADM_JSGlobal.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script/ADM_JSGlobal.cpp	2009-11-11 17:46:35 UTC (rev 5456)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script/ADM_JSGlobal.cpp	2009-11-11 17:46:41 UTC (rev 5457)
@@ -28,7 +28,7 @@
 {// begin printJSError
 int quiet=GUI_isQuiet();
 char buf[4];
-FILE *fd = fopen(report->filename,"rb");
+FILE *fd = ADM_fopen(report->filename,"rb");
         if(quiet)
                 GUI_Verbose();
 	if( fd ){

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/gtk_gui.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/gtk_gui.cpp	2009-11-11 17:46:35 UTC (rev 5456)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/gtk_gui.cpp	2009-11-11 17:46:41 UTC (rev 5457)
@@ -554,7 +554,7 @@
     return 0;
   /// check if name exists
   FILE *fd;
-  fd = fopen (name, "rb");
+  fd = ADM_fopen (name, "rb");
   if (!fd){
     if( errno == EACCES ){
       GUI_Error_HIG(QT_TR_NOOP("Permission error"), QT_TR_NOOP("Cannot open \"%s\"."), name);
@@ -609,7 +609,7 @@
 	/* check myself it is a project file (transparent detected and read
         ** by video_body->addFile (name);
 	*/
-	if( (fd = fopen(longname,"rb"))  ){
+	if( (fd = ADM_fopen(longname,"rb"))  ){
 		if( fread(magic,4,1,fd) == 4 ){
 			/* remember a workbench file */
 			if( !strncmp(magic,"ADMW",4) ){

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/gui_blackframes.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/gui_blackframes.cpp	2009-11-11 17:46:35 UTC (rev 5456)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/gui_blackframes.cpp	2009-11-11 17:46:41 UTC (rev 5457)
@@ -229,7 +229,7 @@
    
     if ( !outfile )
         return 0;
-    fd=fopen(outfile, "wb");
+    fd=ADM_fopen(outfile, "wb");
     if ( fd == NULL )
     {
         fprintf(stderr, "cannot create output file for list of black frames\n");

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/gui_save.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/gui_save.cpp	2009-11-11 17:46:35 UTC (rev 5456)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/gui_save.cpp	2009-11-11 17:46:41 UTC (rev 5457)
@@ -152,7 +152,7 @@
     return;
 
 
-  if (!(out = fopen (name, "wb")))
+  if (!(out = ADM_fopen (name, "wb")))
     {
       GUI_Error_HIG (QT_TR_NOOP("File error"), QT_TR_NOOP("Cannot open \"%s\" for writing."), name);
       return;
@@ -277,7 +277,7 @@
     }
 
 
-  out = fopen (name, "wb");
+  out = ADM_fopen (name, "wb");
   if (!out) return;
 
   work=createWorking(QT_TR_NOOP("Saving audio"));



From mean at mail.berlios.de  Wed Nov 11 18:46:44 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Wed, 11 Nov 2009 18:46:44 +0100
Subject: [Avidemux-svn-commit] r5458 -
	branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoFilter2
Message-ID: <200911111746.nABHkit0011199@sheep.berlios.de>

Author: mean
Date: 2009-11-11 18:46:44 +0100 (Wed, 11 Nov 2009)
New Revision: 5458

Modified:
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoFilter2/ADM_filterChain.cpp
Log:
[Filter] Simplify

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoFilter2/ADM_filterChain.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoFilter2/ADM_filterChain.cpp	2009-11-11 17:46:41 UTC (rev 5457)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoFilter2/ADM_filterChain.cpp	2009-11-11 17:46:44 UTC (rev 5458)
@@ -42,8 +42,9 @@
     {
         ADM_coreVideoFilter *filter=(*chain)[i];
         delete filter;
+        (*chain)[i]=NULL;
     }
-    chain->erase(chain->begin(),chain->end()-1);
+    chain->clear();
     return true;
 }
 



From mean at mail.berlios.de  Wed Nov 11 18:46:47 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Wed, 11 Nov 2009 18:46:47 +0100
Subject: [Avidemux-svn-commit] r5459 -
	branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor
Message-ID: <200911111746.nABHklNw011254@sheep.berlios.de>

Author: mean
Date: 2009-11-11 18:46:46 +0100 (Wed, 11 Nov 2009)
New Revision: 5459

Modified:
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edSearch.cpp
Log:
[Editor] Handle 1st frame not starting at 0 for mkv... output

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edSearch.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edSearch.cpp	2009-11-11 17:46:44 UTC (rev 5458)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edSearch.cpp	2009-11-11 17:46:46 UTC (rev 5459)
@@ -89,8 +89,10 @@
       {
           _VIDEOS *vid=_segments.getRefVideo(0);
           uint64_t pts=vid->firstFramePts;
+          //
+          *frameTime+=pts;
           ADM_warning("This video does not start at 0 but at %"LLU" ms, compensating\n",pts/1000);
-          _segments.convertLinearTimeToSeg(  *frameTime+pts, &seg, &segTime);
+          _segments.convertLinearTimeToSeg(  *frameTime, &seg, &segTime);
       }
     // 
 again:



From mean at mail.berlios.de  Wed Nov 11 19:24:49 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Wed, 11 Nov 2009 19:24:49 +0100
Subject: [Avidemux-svn-commit] r5460 - in
	branches/avidemux_2.5_branch_gruntster/avidemux: ADM_editor
	ADM_libraries/ADM_utilities
Message-ID: <200911111824.nABIOni7026652@sheep.berlios.de>

Author: mean
Date: 2009-11-11 19:24:39 +0100 (Wed, 11 Nov 2009)
New Revision: 5460

Modified:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_editor/ADM_Video.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/avidemutils.cpp
Log:
[Demuxer] Initialize to 0 all static members of ADM_video

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_editor/ADM_Video.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_editor/ADM_Video.cpp	2009-11-11 17:46:46 UTC (rev 5459)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_editor/ADM_Video.cpp	2009-11-11 18:24:39 UTC (rev 5460)
@@ -53,6 +53,11 @@
   _name = NULL;
   _videoExtraData = NULL;
   _videoExtraLen = 0;
+// Clear headers
+#define ADM_BZERO(x) memset(&x,0,sizeof(x));
+    ADM_BZERO(_mainaviheader);
+    ADM_BZERO(_audiostream);
+    ADM_BZERO(_videostream);
 }
 uint32_t             vidHeader::ptsDtsDelta(uint32_t framenum)
 {

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/avidemutils.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/avidemutils.cpp	2009-11-11 17:46:46 UTC (rev 5459)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/avidemutils.cpp	2009-11-11 18:24:39 UTC (rev 5460)
@@ -293,6 +293,7 @@
         X_DUMP( biXPelsPerMeter);
         X_DUMP( biYPelsPerMeter);
         X_DUMP( biClrUsed);
+        X_DUMP( biClrImportant);
 }
 
 void printWavHeader(WAVHeader *hdr)



From mean at mail.berlios.de  Thu Nov 12 16:40:31 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Thu, 12 Nov 2009 16:40:31 +0100
Subject: [Avidemux-svn-commit] r5461 - in
	branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils:
	include src
Message-ID: <200911121540.nACFeV1A010172@sheep.berlios.de>

Author: mean
Date: 2009-11-12 16:40:31 +0100 (Thu, 12 Nov 2009)
New Revision: 5461

Added:
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/include/ADM_confCouple.h
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/include/ADM_paramList.h
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/src/ADM_confCouple.cpp
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/src/ADM_paramList.cpp
Modified:
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/src/CMakeLists.txt
Log:
[All] New more flexible custom configuration for audio codec in plain text

Added: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/include/ADM_confCouple.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/include/ADM_confCouple.h	2009-11-11 18:24:39 UTC (rev 5460)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/include/ADM_confCouple.h	2009-11-12 15:40:31 UTC (rev 5461)
@@ -0,0 +1,55 @@
+/***************************************************************************
+                          CONFcouple.cpp  -  description
+                             -------------------
+	Used to set a pair name/value
+	--> filters
+
+    begin                : Sun Apr 14 2002
+    copyright            : (C) 2002 by mean
+    email                : fixounet at free.fr
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+ #ifndef __CONFCOUPLE__
+ #define __CONFCOUPLE__
+
+class CONFcouple
+{
+	private:
+			uint32_t    nb;
+			char 		**name;
+			char 		**value;
+			uint8_t	cur;
+
+
+	public:
+			int32_t lookupName(const char *myname);
+			CONFcouple(uint32_t nb);
+			~CONFcouple();
+			uint8_t setCouple(const char *name,uint32_t value);
+			uint8_t setCouple(const char *name,int32_t value);
+			uint8_t setCouple(const char *name,const char *value);
+			uint8_t setCouple(const char *name,const ADM_filename *value);
+			uint8_t setCouple(const char *name,double value);
+			uint8_t setCouple(const char *name,float value);
+
+			uint8_t getCouple(const char *name,int32_t *value);
+			uint8_t getCouple(const char *name,uint32_t *value);
+			uint8_t getCouple(const char *name,char **value);
+			uint8_t getCouple(const char *name,ADM_filename **value);
+			uint8_t getCouple(const char *name,double *value);
+			uint8_t getCouple(const char *name,float *value);
+			uint32_t getNumber(void) { return nb;};
+			uint8_t getEntry(uint32_t n, char **nm, char **val)
+				 { assert(n<nb); *nm=name[n];*val=value[n];return 1;};
+			void dump(void );
+
+};
+#endif

Added: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/include/ADM_paramList.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/include/ADM_paramList.h	2009-11-11 18:24:39 UTC (rev 5460)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/include/ADM_paramList.h	2009-11-12 15:40:31 UTC (rev 5461)
@@ -0,0 +1,55 @@
+/**
+        \file ADM_paramList
+        \brief Structure and stuff to handle autoconfiguration of configuration struct
+        Mean,2009
+        GPL V2
+*/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+#ifndef ADM_PARAM_LIST_H
+#define ADM_PARAM_LIST_H
+
+#include "ADM_confCouple.h"
+/**
+        \enum ADM_paramType
+        \brief Type of parameter
+
+*/
+typedef enum
+{
+        ADM_param_uint32_t=1,
+        ADM_param_int32_t=2,
+        ADM_param_float=3,
+       // ADM_param_bool=4,
+        ADM_param_string=5
+}ADM_paramType;
+
+
+/**
+        \struct ADM_paramList
+        \brief  one parmeter desc
+
+*/
+typedef struct
+{
+        const char      *paramName;
+        uint32_t        offset;
+        const char      *typeAsString;
+        ADM_paramType   type;
+}ADM_paramList;
+
+/// Couple -> structure
+bool ADM_paramLoad(CONFcouple *couples, const ADM_paramList *params,void *s);
+/// Structure -> couples
+bool ADM_paramSave(CONFcouple **couples, const ADM_paramList *params,void *s);
+
+
+#endif
+//EOF
\ No newline at end of file

Added: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/src/ADM_confCouple.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/src/ADM_confCouple.cpp	2009-11-11 18:24:39 UTC (rev 5460)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/src/ADM_confCouple.cpp	2009-11-12 15:40:31 UTC (rev 5461)
@@ -0,0 +1,186 @@
+/***************************************************************************
+                          ADM_genvideo.cpp  -  description
+                             -------------------
+    begin                : Sun Apr 14 2002
+    copyright            : (C) 2002 by mean
+    email                : fixounet at free.fr
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+
+#include "ADM_default.h"
+
+//#include "fourcc.h"
+
+#include "ADM_confCouple.h"
+//#include "ADM_videoFilter.h"
+static char tmpstring[1024]; // should be enougth
+CONFcouple::CONFcouple(uint32_t nub)
+{
+	nb=nub;
+	name=new char *[nb];
+	value=new char *[nb];
+
+	for(uint32_t i=0;i<nb;i++)
+		{
+			name[i]=NULL;
+			value[i]=NULL;
+		}
+
+	cur=0;
+};
+
+CONFcouple::~CONFcouple()
+{
+	for(uint32_t i=0;i<nb;i++)
+		{
+			if(name[i]) delete name[i];
+			if(value[i]) delete value[i];
+		}
+		delete [] name;
+		delete [] value;
+
+
+};
+
+uint8_t CONFcouple::setCouple(const char *myname,uint32_t val)
+{
+	ADM_assert(cur<nb);
+
+	name[cur]=ADM_strdup(myname);
+	sprintf(tmpstring,"%"LU,val);
+	value[cur]=ADM_strdup(tmpstring);
+	cur++;
+	return 1;
+}
+uint8_t CONFcouple::setCouple(const char *myname,float val)
+{
+	ADM_assert(cur<nb);
+
+	name[cur]=ADM_strdup(myname);
+	sprintf(tmpstring,"%f",val);
+	value[cur]=ADM_strdup(tmpstring);
+	cur++;
+	return 1;
+}
+uint8_t CONFcouple::setCouple(const char *myname,double val)
+{
+	ADM_assert(cur<nb);
+
+	name[cur]=ADM_strdup(myname);
+	sprintf(tmpstring,"%f",val);
+	value[cur]=ADM_strdup(tmpstring);
+	cur++;
+	return 1;
+}
+uint8_t CONFcouple::setCouple(const char *myname,int32_t val)
+{
+	ADM_assert(cur<nb);
+
+	name[cur]=ADM_strdup(myname);
+	sprintf(tmpstring,"%"LD,val);
+	value[cur]=ADM_strdup(tmpstring);
+	cur++;
+	return 1;
+}
+uint8_t CONFcouple::setCouple(const char *myname,const char *val)
+{
+	ADM_assert(cur<nb);
+
+	name[cur]=ADM_strdup(myname);
+	value[cur]=ADM_strdup(val);
+	cur++;
+	return 1;
+}
+uint8_t CONFcouple::setCouple(const char *myname,const ADM_filename *val)
+{
+	ADM_assert(cur<nb);
+
+	name[cur]=ADM_strdup(myname);
+	value[cur]=ADM_strdup((char *)val);
+	cur++;
+	return 1;
+}
+
+uint8_t CONFcouple::getCouple(const char *myname,uint32_t *val)
+{
+	int32_t index=lookupName(myname);
+
+	ADM_assert(index!=-1);
+	ADM_assert(index<(int)nb);
+	*val=(int)atoi(value[index]);
+	return 1;
+}
+uint8_t CONFcouple::getCouple(const char *myname,int32_t *val)
+{
+	int32_t index=lookupName(myname);
+
+	ADM_assert(index!=-1);
+	ADM_assert(index<(int)nb);
+	*val=(int)atoi(value[index]);
+	return 1;
+}
+uint8_t CONFcouple::getCouple(const char *myname,char **val)
+{
+	int32_t index=lookupName(myname);
+
+	ADM_assert(index!=-1);
+	ADM_assert(index<(int)nb);
+	*val=ADM_strdup(value[index]);
+	return 1;
+}
+uint8_t CONFcouple::getCouple(const char *myname,ADM_filename **val)
+{
+	int32_t index=lookupName(myname);
+
+	ADM_assert(index!=-1);
+	ADM_assert(index<(int)nb);
+	*val=(ADM_filename *)ADM_strdup(value[index]);
+	return 1;
+}
+
+uint8_t CONFcouple::getCouple(const char *myname,float *val)
+{
+	int32_t index=lookupName(myname);
+
+	ADM_assert(index!=-1);
+	ADM_assert(index<(int)nb);
+	sscanf(value[index],"%f",val);;
+	return 1;
+}
+uint8_t CONFcouple::getCouple(const char *myname,double *val)
+{
+	int32_t index=lookupName(myname);
+
+	ADM_assert(index!=-1);
+	ADM_assert(index<(int)nb);
+	sscanf(value[index],"%lf",val);;
+	return 1;
+}
+
+int32_t CONFcouple::lookupName(const char *myname)
+{
+	for(uint32_t i=0;i<nb;i++)
+	{
+		if(!strcmp(name[i],myname)) return i;
+
+	}
+	return -1;
+
+}
+void CONFcouple::dump(void )
+{
+	for(uint32_t i=0;i<nb;i++)
+	{
+		if(name[i]) printf ("nm:%s ",name[i]); else printf("!! no name !! ");
+		if(value[i]) printf ("val:%s ",value[i]); else printf("!! no value !! ");
+	}
+}
+

Added: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/src/ADM_paramList.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/src/ADM_paramList.cpp	2009-11-11 18:24:39 UTC (rev 5460)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/src/ADM_paramList.cpp	2009-11-12 15:40:31 UTC (rev 5461)
@@ -0,0 +1,115 @@
+/** *************************************************************************
+    \file ADM_paramList
+    \brief Handle Param list 
+                      
+    copyright            : (C) 2009 by mean
+    
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ ***************************************************************************/
+#include "ADM_default.h"
+#include "ADM_paramList.h"
+/**
+    \fn ADM_paramValidate
+    \brief Check the confcouples match the param list
+*/
+bool ADM_paramValidate(CONFcouple *couples, const ADM_paramList *params)
+{
+    int n=couples->getNumber();
+    int found=0;
+    int p=0;
+    const ADM_paramList *l=params;
+    while(l->paramName)
+    {
+        p++;
+        l++;
+    };
+    if(n!=p)
+    {
+        ADM_warning("Number of parameter mistmatch :%d vs %d\n",n,p);
+        return false;
+    }
+    // Now for each param, check we have it...
+    for(int i=0;i<p;i++)
+    {
+        const char *name=params[i].paramName;
+        int index=couples->lookupName(name);
+        if(index==-1)
+        {
+            ADM_warning("Cannot find param with name %s in configuration\n",name);
+            return false;
+        }
+    }
+    return true;
+}
+/**
+    \fn ADM_paramLoad
+    \brief Load a structure from a list of confCouple
+*/
+bool ADM_paramLoad(CONFcouple *couples, const ADM_paramList *params,void *s)
+{
+    uint8_t *address=(uint8_t *)s;
+    if(false==ADM_paramValidate(couples,params)) return false;
+    int n=couples->getNumber();
+    for(int i=0;i<n;i++)
+    {
+        const char *name=params[i].paramName;
+        int index=couples->lookupName(name);
+        ADM_assert(index!=-1);
+        switch(params[i].type)
+        {
+#define SWAL(entry,type,var) case  entry: {type   var;\
+                        couples->getCouple(name,&var); \
+                        *(type *)(address+params[i].offset)=var;}break;
+           SWAL(ADM_param_uint32_t,uint32_t,u32)
+           SWAL(ADM_param_int32_t, int32_t, i32)
+           SWAL(ADM_param_float,   float ,  f)
+     //      SWAL(ADM_param_bool,    bool ,   b)
+           case ADM_param_string: ADM_error("not implemented string for paramList\n");ADM_assert(0);
+        }
+    }
+    return true;
+}
+/**
+    \fn ADM_paramLoad
+    \brief Load a structure from a list of confCouple
+*/
+bool ADM_paramSave(CONFcouple **couples, const ADM_paramList *params,void *s)
+{
+    *couples=NULL;
+    int p=0;
+    const ADM_paramList *l=params;
+    while(l->paramName)
+    {
+        p++;
+        l++;
+    };
+    *couples=new CONFcouple(p);
+    CONFcouple *c=*couples;
+    uint8_t *address=(uint8_t *)s;
+   
+    for(int i=0;i<p;i++)
+    {
+        const char *name=params[i].paramName;
+        switch(params[i].type)
+        {
+#undef SWAL
+#define SWAL(entry,type,var) case  entry: \
+                                    {type var; \
+                                    var=*(type *)(address+params[i].offset);\
+                                    c->setCouple(name,var);}break;
+           SWAL(ADM_param_uint32_t,uint32_t,u32)
+           SWAL(ADM_param_int32_t, int32_t, i32)
+           SWAL(ADM_param_float,   float ,  f)
+    //       SWAL(ADM_param_bool,    bool ,   b)
+           case ADM_param_string: ADM_error("not implemented string for paramList\n");ADM_assert(0);
+        }
+    }
+    return true;
+}

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/src/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/src/CMakeLists.txt	2009-11-11 18:24:39 UTC (rev 5460)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/src/CMakeLists.txt	2009-11-12 15:40:31 UTC (rev 5461)
@@ -1,4 +1,5 @@
 SET(ADM_coreUtils_SRCS 
+ADM_confCouple.cpp  
 ADM_bitstream.cpp 
 avidemutils.cpp  
 ADM_quota.cpp
@@ -7,6 +8,7 @@
 ADM_frameType.cpp
 ADM_codecType.cpp
 ADM_file.cpp
+ADM_paramList.cpp
 prefs.cpp)
 
 ADD_LIBRARY(ADM_coreUtils6 SHARED ${ADM_coreUtils_SRCS})



From mean at mail.berlios.de  Thu Nov 12 16:40:34 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Thu, 12 Nov 2009 16:40:34 +0100
Subject: [Avidemux-svn-commit] r5462 - in
	branches/avidemux_2.6_branch_mean/avidemux/common:
	ADM_audioFilter/src ADM_editor ADM_script
Message-ID: <200911121540.nACFeYux010183@sheep.berlios.de>

Author: mean
Date: 2009-11-12 16:40:33 +0100 (Thu, 12 Nov 2009)
New Revision: 5462

Modified:
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_audioFilter/src/audio_encoderPlugin.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edLoadSave.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script/ADM_JSAvidemuxAudio.cpp
Log:
[All] New more flexible custom configuration for audio codec in plain text

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_audioFilter/src/audio_encoderPlugin.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_audioFilter/src/audio_encoderPlugin.cpp	2009-11-12 15:40:31 UTC (rev 5461)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_audioFilter/src/audio_encoderPlugin.cpp	2009-11-12 15:40:33 UTC (rev 5462)
@@ -347,7 +347,7 @@
         \brief 
 */
 
-uint8_t getAudioExtraConf(uint32_t *bitrate,uint32_t *extraDataSize, uint8_t **extradata)
+bool getAudioExtraConf(uint32_t *bitrate,CONFcouple **couple)
 {
     if(!currentEncoder)
     {
@@ -358,25 +358,28 @@
      ADM_audioEncoder *encoder= ListOfAudioEncoder[currentEncoder];
      *bitrate=encoder->getBitrate();
      if(encoder->getConfigurationData)
-        return encoder->getConfigurationData(extraDataSize,extradata);
+        return encoder->getConfigurationData(couple);
      else return 1;
 }
 /**
     \fn setAudioExtraConf
 */
-uint8_t setAudioExtraConf(uint32_t bitrate,uint32_t extraDataSize, uint8_t *extradata)
+bool setAudioExtraConf(uint32_t bitrate,CONFcouple *c)
 {
     if(!currentEncoder)
     {
         printf("[AudioEncoder] Cannot set conf on copy!\n");
-        return 0;
+        return false;
     }
      ADM_assert(currentEncoder<ListOfAudioEncoder.size());
      ADM_audioEncoder *encoder= ListOfAudioEncoder[currentEncoder];
      encoder->setBitrate(bitrate);
      if(encoder->setConfigurationData)
-        return encoder->setConfigurationData(extraDataSize,extradata);
-    else return 1;
+     {
+        if(c)             return encoder->setConfigurationData(c);
+        ADM_warning("Null extra configuration given to audio codec!\n");
+     }
+     return true;
 }     
 /**
         \fn audio_selectCodecByTag

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edLoadSave.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edLoadSave.cpp	2009-11-12 15:40:31 UTC (rev 5461)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edLoadSave.cpp	2009-11-12 15:40:33 UTC (rev 5462)
@@ -22,11 +22,12 @@
 #include "ADM_quota.h"
 #include "ADM_editor/ADM_edit.hxx"
 
-
+#include "audioEncoderApi.h"
 #include "DIA_coreToolkit.h"
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_videoFilter.h"
 #include "ADM_videoFilter_internal.h"
+#include "ADM_paramList.h"
 #include "prefs.h"
 #include "avi_vars.h"
 
@@ -182,16 +183,28 @@
                         qfprintf(fd,"app.audio.setTrack(%d);\n", source); 
                         
         }
-
-   getAudioExtraConf(&bitrate,&extraDataSize,&extraData);
-   qfprintf(fd,"app.audio.codec(\"%s\",%d,%d,\"", audioCodecGetName(),bitrate,extraDataSize); 
-   for(int i=0;i<extraDataSize;i++)
-   {
-     qfprintf(fd,"%02x ",extraData[i]);
-   }
-   qfprintf(fd,"\");\n");
+#endif
+   CONFcouple *couples=NULL;
+   getAudioExtraConf(&bitrate,&couples);
+   if(couples==NULL)
+    qfprintf(fd,"app.audio.codec(\"%s\",%d);\n",audioCodecGetName(),bitrate); 
+   else
+    {
+        qfprintf(fd,"app.audio.codec(\"%s\",%d", audioCodecGetName(),bitrate); 
+        uint32_t n=couples->getNumber();
+        
+        for(int i=0;i<n;i++)
+        {
+            char *name,*value;
+            couples->getEntry(i,&name,&value);
+            qfprintf(fd,",\"%s=%s\"",name,value);
+        }
+        qfprintf(fd,");\n");
+        delete couples;
+        couples=NULL;
+    }
    
-   
+#if 0   
    //qfprintf(fd,"app.audio.process=%s;\n",truefalse[audioProcessMode()]);
    qfprintf(fd,"app.audio.normalizeMode=%d;\n",audioGetNormalizeMode());
    qfprintf(fd,"app.audio.normalizeValue=%d;\n",audioGetNormalizeValue());

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script/ADM_JSAvidemuxAudio.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script/ADM_JSAvidemuxAudio.cpp	2009-11-12 15:40:31 UTC (rev 5461)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script/ADM_JSAvidemuxAudio.cpp	2009-11-12 15:40:33 UTC (rev 5462)
@@ -22,6 +22,7 @@
 #include "ADM_editor/ADM_outputfmt.h"
 #include "ADM_script/ADM_container.h"
 #include "ADM_audioFilter/include/ADM_audioFilterInterface.h"
+#include "audioEncoderApi.h"
 
 extern int A_audioSave(char *name);
 extern int A_loadAC3 (char *name);
@@ -361,45 +362,63 @@
 JSBool ADM_JSAvidemuxAudio::Codec(JSContext *cx, JSObject *obj, uintN argc, 
                                       jsval *argv, jsval *rval)
 {// begin Codec
-#if 0
         ADM_JSAvidemuxAudio *p = (ADM_JSAvidemuxAudio *)JS_GetPrivate(cx, obj);
         // default return value
         *rval = BOOLEAN_TO_JSVAL(false);
-        if(argc != 4)
+        if(argc < 2)
                 return JS_FALSE;
-        if(JSVAL_IS_STRING(argv[0]) == false || JSVAL_IS_INT(argv[1]) == false || JSVAL_IS_INT(argv[2]) == false  ||  JSVAL_IS_STRING(argv[3]) == false  )
-                return JS_FALSE;
+        if(JSVAL_IS_STRING(argv[0]) == false || JSVAL_IS_INT(argv[1]) == false )            return JS_FALSE;
+        for(int i=2;i<argc;i++)  if(JSVAL_IS_STRING(argv[i]) == false) return JS_FALSE;
+
+        // Get Codec...
         char *name = JS_GetStringBytes(JSVAL_TO_STRING(argv[0]));
         ADM_LowerCase(name);
         enterLock();
         // First search the codec by its name
         if(!audioCodecSetByName(name))
+        {
                 *rval = BOOLEAN_TO_JSVAL(false);
+                ADM_error("Cannot set audio codec %s\n",name);
+        }
         else
-        {// begin set bitrate
-        //audioFilter_SetBitrate(JSVAL_TO_INT(argv[1]));
-          uint32_t bitrate,size;
-          char  *extra;
-          uint8_t *data=NULL;
-                bitrate=JSVAL_TO_INT(argv[1]);
-                size=JSVAL_TO_INT(argv[2]);
-                extra=JS_GetStringBytes(JSVAL_TO_STRING(argv[3])); 
-                if(size)
+        {
+        // begin set bitrate
+        uint32_t bitrate=JSVAL_TO_INT(argv[1]);
+        // Construct couples
+        CONFcouple *c=NULL;
+        if(argc>2)
+        {
+            int nb=argc-2;
+            c=new CONFcouple(nb);
+            for(int i=0;i<nb;i++)
+            {
+                char *param = JS_GetStringBytes(JSVAL_TO_STRING(argv[2+i]));
+                char *dupe=   ADM_strdup(param);
+                char *name,*value;
+                // dupe is in the form name=value
+                name=dupe;
+                value=name;
+                char *tail=dupe+strlen(dupe);
+                while(value<tail)
                 {
-                          data=new uint8_t[size];
-                          for (uint32_t k = 0; k < size; k++)
-                            {
-                              data[k] = mk_hex (*extra, *(extra + 1));
-                              extra += 3;
-                            }
-                        setAudioExtraConf(bitrate,size,data);
-                        delete [] data; 
+                    if(*value=='=') 
+                        {
+                            *value=0;
+                            value++;
+                            break;
+                        }
+                    value++;
                 }
+                c->setCouple(name,value);
+                //printf("%s -> [%s,%s]\n",param,name,value);
+                ADM_dezalloc(dupe);
+            }
 
-                *rval = BOOLEAN_TO_JSVAL(true);
+        }
+
+            *rval = BOOLEAN_TO_JSVAL(setAudioExtraConf(bitrate,c));
         }// end set bitrate
         leaveLock();
-#endif
         return JS_TRUE;
 }// end Codec
 JSBool ADM_JSAvidemuxAudio::getNbTracks(JSContext *cx, JSObject *obj, uintN argc, 



From mean at mail.berlios.de  Thu Nov 12 16:40:35 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Thu, 12 Nov 2009 16:40:35 +0100
Subject: [Avidemux-svn-commit] r5463 - in
	branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioEncoders:
	faac lame lavcodec twolame vorbis
Message-ID: <200911121540.nACFeZ4B010193@sheep.berlios.de>

Author: mean
Date: 2009-11-12 16:40:35 +0100 (Thu, 12 Nov 2009)
New Revision: 5463

Added:
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioEncoders/lame/lame_encoder.conf
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioEncoders/lame/lame_encoder.h
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioEncoders/lame/lame_encoder_desc.cpp
Removed:
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioEncoders/twolame/audioencoder_twolame_param.h
Modified:
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioEncoders/faac/audioencoder_faac.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioEncoders/lame/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioEncoders/lame/audioencoder_lame.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioEncoders/lame/audioencoder_lame.h
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioEncoders/lavcodec/audioencoder_lavcodec.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioEncoders/twolame/audioencoder_twolame.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioEncoders/vorbis/audioencoder_vorbis.cpp
Log:
[Audio] Switch to new configuration scheme

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioEncoders/faac/audioencoder_faac.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioEncoders/faac/audioencoder_faac.cpp	2009-11-12 15:40:33 UTC (rev 5462)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioEncoders/faac/audioencoder_faac.cpp	2009-11-12 15:40:35 UTC (rev 5463)
@@ -29,7 +29,7 @@
 #include "audioencoder_faac_param.h"
 
 static bool configure(void);
-
+static uint32_t faacBitrate;
 static FAAC_encoderParam faacParm={
     128
 };
@@ -58,7 +58,7 @@
 
   NULL
 };
-ADM_DECLARE_AUDIO_ENCODER_CONFIG( faacParm);
+ADM_DECLARE_AUDIO_ENCODER_CONFIG( NULL,NULL,faacBitrate);
 
 /******************* / Declare plugin*******************************************************/
 

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioEncoders/lame/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioEncoders/lame/CMakeLists.txt	2009-11-12 15:40:33 UTC (rev 5462)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioEncoders/lame/CMakeLists.txt	2009-11-12 15:40:35 UTC (rev 5463)
@@ -1,6 +1,6 @@
 	INCLUDE(ae_plugin)
 
-	SET(ADM_ae_lame_SRCS audioencoder_lame.cpp)
+	SET(ADM_ae_lame_SRCS audioencoder_lame.cpp )
 
 	ADD_LIBRARY(ADM_ae_lame SHARED ${ADM_ae_lame_SRCS})
 

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioEncoders/lame/audioencoder_lame.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioEncoders/lame/audioencoder_lame.cpp	2009-11-12 15:40:33 UTC (rev 5462)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioEncoders/lame/audioencoder_lame.cpp	2009-11-12 15:40:35 UTC (rev 5463)
@@ -22,13 +22,13 @@
 #include "audioencoderInternal.h"
 #include "audioencoder_lame_param.h"
 #include "audioencoder_lame.h"
+#include "lame_encoder.h"
+#include "lame_encoder_desc.cpp"
 
-static LAME_encoderParam myLameParam = {
-  128,
-  ADM_LAME_PRESET_CBR,		// preset;
-  2,				//uint32_t        quality;
-  0,				//uint32_t        disableReservoir; // usefull for strict CBR (FLV)
-};
+static uint32_t lameBitrate=128;
+static lame_encoder lameConf={ADM_LAME_PRESET_CBR,2,0};
+
+
 extern "C"
 {
 static bool configure (void);
@@ -59,7 +59,7 @@
 
   NULL
 };
-ADM_DECLARE_AUDIO_ENCODER_CONFIG(myLameParam);
+ADM_DECLARE_AUDIO_ENCODER_CONFIG(lame_encoder_param,&lameConf,lameBitrate);
 
 /******************* / Declare plugin*******************************************************/
 #define MYFLAGS (lame_global_flags *)lameFlags
@@ -103,9 +103,9 @@
   int ret;
   MPEG_mode_e mmode;
   uint32_t frequence;
-  LAME_encoderParam *lameConf = (LAME_encoderParam *) & myLameParam;
 
 
+
   lameFlags = lame_init ();
   if (lameFlags == NULL)
     return false;
@@ -140,10 +140,10 @@
       printf ("[Lame] mono audio mp3");
     }
 
-  ret = lame_set_brate (MYFLAGS, lameConf->bitrate);
+  ret = lame_set_brate (MYFLAGS, lameBitrate);
   ret = lame_set_mode (MYFLAGS, mmode);	// 0 stereo 1 jstero
-  ret = lame_set_quality (MYFLAGS, lameConf->quality);	// 0 stereo 1 jstero
-  ret = lame_set_disable_reservoir (MYFLAGS, lameConf->disableReservoir);
+  ret = lame_set_quality (MYFLAGS, lameConf.quality);	// 0 stereo 1 jstero
+  ret = lame_set_disable_reservoir (MYFLAGS, lameConf.disableBitReservoir);
   printf ("[Lame]Using quality of %d\n", lame_get_quality (MYFLAGS));
   ret = lame_init_params (MYFLAGS);
   if (ret == -1)
@@ -152,18 +152,18 @@
         return false;
     }
   // update bitrate in header
-  wavheader.byterate = (lameConf->bitrate >> 3) * 1000;
+  wavheader.byterate = (lameBitrate >> 3) * 1000;
 #define BLOCK_SIZE 1152
   // configure CBR/ABR/...
 
-  switch (lameConf->preset)
+  switch (lameConf.preset)
     {
     default:
     case ADM_LAME_PRESET_CBR:
       break;
     case ADM_LAME_PRESET_ABR:
 
-      lame_set_preset (MYFLAGS, lameConf->bitrate);
+      lame_set_preset (MYFLAGS, lameBitrate);
       wavheader.blockalign = BLOCK_SIZE;
       break;
     case ADM_LAME_PRESET_EXTREME:
@@ -187,7 +187,7 @@
 */
 bool AUDMEncoder_Lame::isVBR (void)
 {
-  if (myLameParam.preset == ADM_LAME_PRESET_CBR)
+  if (lameConf.preset == ADM_LAME_PRESET_CBR)
     return false;
   return true;
 
@@ -260,11 +260,11 @@
   char string[400];
   uint32_t mmode, ppreset;
 #define SZT(x) sizeof(x)/sizeof(diaMenuEntry )
-#define PX(x) &(lameParam->x)
+#define PX(x) &(lameConf.x)
 
-  LAME_encoderParam *lameParam = &myLameParam;
-  ppreset = lameParam->preset;
 
+  ppreset = lameConf.preset;
+
   diaMenuEntry encodingMode[] = {
     {ADM_LAME_PRESET_CBR, QT_TR_NOOP ("CBR"), NULL},
     {ADM_LAME_PRESET_ABR, QT_TR_NOOP ("ABR"), NULL},
@@ -285,17 +285,17 @@
   };
 
 //***
-  diaElemMenu bitrate (PX(bitrate), QT_TR_NOOP ("_Bitrate:"), SZT (bitrateM),
+  diaElemMenu bitrate (&lameBitrate, QT_TR_NOOP ("_Bitrate:"), SZT (bitrateM),
 		       bitrateM);
   diaElemUInteger quality (PX (quality), QT_TR_NOOP ("_Quality:"), 0, 9);
-  diaElemToggle reservoir (PX (disableReservoir),
+  diaElemToggle reservoir (PX (disableBitReservoir),
 			   QT_TR_NOOP ("_Disable reservoir:"));
 
   diaElem *elems[] = { &Mode, &bitrate,&quality, &reservoir };
 
   if (diaFactoryRun (QT_TR_NOOP ("LAME Configuration"), 4, elems))
     {
-      lameParam->preset=(ADM_LAME_PRESET)ppreset;
+      lameConf.preset=(ADM_LAME_PRESET)ppreset;
       return 1;
     }
   return 0;
@@ -308,7 +308,7 @@
 {
     if(!strcasecmp(paramName,"MP3DisableReservoir"))
     {
-        myLameParam.disableReservoir=value;
+        lameConf.disableBitReservoir=value;
         return 1;
     }
     return 0;

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioEncoders/lame/audioencoder_lame.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioEncoders/lame/audioencoder_lame.h	2009-11-12 15:40:33 UTC (rev 5462)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioEncoders/lame/audioencoder_lame.h	2009-11-12 15:40:35 UTC (rev 5463)
@@ -15,7 +15,7 @@
  ***************************************************************************/
 #ifndef AUDMaudioLame_H
 #define AUDMaudioLame_H
-
+#include "lame_encoder.h"
  /**
         \class AUDMEncoder_Lame
         \brief Front end for libmp3lame

Added: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioEncoders/lame/lame_encoder.conf
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioEncoders/lame/lame_encoder.conf	2009-11-12 15:40:33 UTC (rev 5462)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioEncoders/lame/lame_encoder.conf	2009-11-12 15:40:35 UTC (rev 5463)
@@ -0,0 +1,3 @@
+uint32_t:preset
+uint32_t:quality
+uint32_t:disableBitReservoir

Added: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioEncoders/lame/lame_encoder.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioEncoders/lame/lame_encoder.h	2009-11-12 15:40:33 UTC (rev 5462)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioEncoders/lame/lame_encoder.h	2009-11-12 15:40:35 UTC (rev 5463)
@@ -0,0 +1,10 @@
+// Automatically generated, do not edit!
+#ifndef ADM_lame_encoder_CONF_H
+#define ADM_lame_encoder_CONF_H
+typedef struct {
+   uint32_t preset;
+   uint32_t quality;
+   uint32_t disableBitReservoir;
+}lame_encoder;
+#endif //lame_encoder
+//EOF

Added: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioEncoders/lame/lame_encoder_desc.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioEncoders/lame/lame_encoder_desc.cpp	2009-11-12 15:40:33 UTC (rev 5462)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioEncoders/lame/lame_encoder_desc.cpp	2009-11-12 15:40:35 UTC (rev 5463)
@@ -0,0 +1,7 @@
+// Automatically generated, do not edit!
+const ADM_paramList lame_encoder_param[]={
+ {"preset",offsetof( lame_encoder,preset),"uint32_t",ADM_param_uint32_t},
+ {"quality",offsetof( lame_encoder,quality),"uint32_t",ADM_param_uint32_t},
+ {"disableBitReservoir",offsetof( lame_encoder,disableBitReservoir),"uint32_t",ADM_param_uint32_t},
+{NULL,0,NULL}
+};

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioEncoders/lavcodec/audioencoder_lavcodec.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioEncoders/lavcodec/audioencoder_lavcodec.cpp	2009-11-12 15:40:33 UTC (rev 5462)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioEncoders/lavcodec/audioencoder_lavcodec.cpp	2009-11-12 15:40:35 UTC (rev 5463)
@@ -19,7 +19,6 @@
 #include "ADM_default.h"
 #include "DIA_factory.h"
 #include "DIA_coreToolkit.h"
-//#include <lame/lame.h>
 #include "audioencoder.h"
 #include "audioencoderInternal.h"
 //
@@ -31,12 +30,8 @@
 
 #include "audioencoder_lavcodec.h"
 
-typedef struct 
-{
-    uint32_t bitrate;
-}LavAudioEncoder_PARAM;
-static LavAudioEncoder_PARAM lavConfig={128};
 static bool configure (void);
+static uint32_t lavBitrate=128;
 /********************* Declare Plugin *****************************************************/
 ADM_DECLARE_AUDIO_ENCODER_PREAMBLE(AUDMEncoder_Lavcodec);
 
@@ -63,7 +58,7 @@
 
   NULL
 };
-ADM_DECLARE_AUDIO_ENCODER_CONFIG(lavConfig);
+ADM_DECLARE_AUDIO_ENCODER_CONFIG(NULL,NULL,lavBitrate);
 
 /******************* / Declare plugin*******************************************************/
 #define CONTEXT ((AVCodecContext  	*)_context)
@@ -112,16 +107,16 @@
     printf("[Lavcodec]Too many channels\n");
     return 0; 
   }
-  wavheader.byterate=(lavConfig.bitrate*1000)>>3;         
+  wavheader.byterate=(lavBitrate*1000)>>3;         
       
     _chunk = ADM_LAV_SAMPLE_PER_P*wavheader.channels; // AC3
   printf("[Lavcodec]Incoming : fq : %"LU", channel : %"LU" bitrate: %"LU" \n",
-         wavheader.frequency,wavheader.channels,lavConfig.bitrate);
+         wavheader.frequency,wavheader.channels,lavBitrate);
   
   
   CONTEXT->channels     =  wavheader.channels;
   CONTEXT->sample_rate  =  wavheader.frequency;
-  CONTEXT->bit_rate     = (lavConfig.bitrate*1000); // bits -> kbits
+  CONTEXT->bit_rate     = (lavBitrate*1000); // bits -> kbits
 
   AVCodec *codec;
   CodecID codecID;
@@ -198,7 +193,7 @@
                               BITRATE(224),
                               BITRATE(384)
                           };
-    diaElemMenu bitrate(&(lavConfig.bitrate),   QT_TR_NOOP("_Bitrate:"), SZT(bitrateM),bitrateM);
+    diaElemMenu bitrate(&(lavBitrate),   QT_TR_NOOP("_Bitrate:"), SZT(bitrateM),bitrateM);
   
     
 

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioEncoders/twolame/audioencoder_twolame.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioEncoders/twolame/audioencoder_twolame.cpp	2009-11-12 15:40:33 UTC (rev 5462)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioEncoders/twolame/audioencoder_twolame.cpp	2009-11-12 15:40:35 UTC (rev 5463)
@@ -22,7 +22,6 @@
 #include "audioencoder.h"
 #include "audioencoderInternal.h"
 #include "audioencoder_twolame.h"
-#include "audioencoder_twolame_param.h"
 
 extern "C"
 {
@@ -30,11 +29,7 @@
 }
 
 #define OPTIONS (twolame_options_struct *)_twolameOptions
-
-static TWOLAME_encoderParam twolameParam=
-{
-    128
-};
+uint32_t bitrateTwoLame=128;
 static bool configure (void);
 /********************* Declare Plugin *****************************************************/
 ADM_DECLARE_AUDIO_ENCODER_PREAMBLE(AUDMEncoder_Twolame);
@@ -61,7 +56,7 @@
 
   NULL
 };
-ADM_DECLARE_AUDIO_ENCODER_CONFIG(twolameParam);
+ADM_DECLARE_AUDIO_ENCODER_CONFIG(NULL,NULL,bitrateTwoLame);
 
 /******************* / Declare plugin*******************************************************/
 /**
@@ -96,8 +91,7 @@
   int ret;
   TWOLAME_MPEG_mode mmode;
   uint32_t frequence;
-  TWOLAME_encoderParam *lameConf=&twolameParam;
-    int channels=wavheader.channels;
+  int channels=wavheader.channels;
 
   _twolameOptions = twolame_init();
   if (_twolameOptions == NULL)
@@ -108,14 +102,14 @@
     printf("[TwoLame]Too many channels\n");
     return 0;
   }
-  wavheader.byterate=(lameConf->bitrate*1000)>>3;
+  wavheader.byterate=(bitrateTwoLame*1000)>>3;
 
 
   _chunk = 1152*channels;
 
 
   printf("[TwoLame]Incoming :fq : %"LU", channel : %"LU" bitrate: %"LU" \n",
-        wavheader.frequency,channels,lameConf->bitrate);
+        wavheader.frequency,channels,bitrateTwoLame);
 
 
   twolame_set_in_samplerate(OPTIONS, wavheader.frequency);
@@ -127,7 +121,7 @@
   twolame_set_mode(OPTIONS,mmode);
   twolame_set_error_protection(OPTIONS,TRUE);
     	//toolame_setPadding (options,TRUE);
-  twolame_set_bitrate (OPTIONS,lameConf->bitrate);
+  twolame_set_bitrate (OPTIONS,bitrateTwoLame);
   twolame_set_verbosity(OPTIONS, 2);
   if(twolame_init_params(OPTIONS))
   {
@@ -199,7 +193,7 @@
                               BITRATE(224),
                               BITRATE(384)
                           };
-    diaElemMenu bitrate(&(twolameParam.bitrate),   QT_TR_NOOP("_Bitrate:"), SZT(bitrateM),bitrateM);
+    diaElemMenu bitrate(&(bitrateTwoLame),   QT_TR_NOOP("_Bitrate:"), SZT(bitrateM),bitrateM);
 
 
     diaElem *elems[]={&bitrate};

Deleted: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioEncoders/twolame/audioencoder_twolame_param.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioEncoders/twolame/audioencoder_twolame_param.h	2009-11-12 15:40:33 UTC (rev 5462)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioEncoders/twolame/audioencoder_twolame_param.h	2009-11-12 15:40:35 UTC (rev 5463)
@@ -1,16 +0,0 @@
-/**
-        \file 
-
-*/
-
-#ifndef AUDM_TWOLAME_PARAM_H
-#define AUDM_TWOLAME_PARAM_H
-
-
-typedef struct 
-{
-  uint32_t        bitrate;
-
-}TWOLAME_encoderParam;
-
-#endif

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioEncoders/vorbis/audioencoder_vorbis.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioEncoders/vorbis/audioencoder_vorbis.cpp	2009-11-12 15:40:33 UTC (rev 5462)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioEncoders/vorbis/audioencoder_vorbis.cpp	2009-11-12 15:40:35 UTC (rev 5463)
@@ -40,6 +40,8 @@
 	vorbis_block     vb ;
 	vorbis_comment   vc ;
 }vorbisStruct;
+//
+static uint32_t vorbisBitrate=128;
 //___________
 static VORBIS_encoderParam vorbisParam=
 {
@@ -74,7 +76,7 @@
 
   NULL
 };
-ADM_DECLARE_AUDIO_ENCODER_CONFIG(vorbisParam);
+ADM_DECLARE_AUDIO_ENCODER_CONFIG(NULL,NULL,vorbisBitrate);
 
 /******************* / Declare plugin*******************************************************/
 



From mean at mail.berlios.de  Thu Nov 12 16:40:39 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Thu, 12 Nov 2009 16:40:39 +0100
Subject: [Avidemux-svn-commit] r5465 -
	branches/avidemux_2.6_branch_mean/cmake
Message-ID: <200911121540.nACFeddK010213@sheep.berlios.de>

Author: mean
Date: 2009-11-12 16:40:38 +0100 (Thu, 12 Nov 2009)
New Revision: 5465

Added:
   branches/avidemux_2.6_branch_mean/cmake/admSerialization.pl
Log:
[tools] Simple script to generate the tables

Added: branches/avidemux_2.6_branch_mean/cmake/admSerialization.pl
===================================================================
--- branches/avidemux_2.6_branch_mean/cmake/admSerialization.pl	2009-11-12 15:40:37 UTC (rev 5464)
+++ branches/avidemux_2.6_branch_mean/cmake/admSerialization.pl	2009-11-12 15:40:38 UTC (rev 5465)
@@ -0,0 +1,110 @@
+#!/usr/bin/perl -w
+
+my %ctypes;
+my %atypes;
+my $input;
+my $structName;
+#
+#
+#
+$ctypes{"uint32_t"}="uint32_t";
+$ctypes{"int32_t"}="int32_t";
+$ctypes{"bool"}="bool";
+$ctypes{"string"}="char *";
+$ctypes{"bool"}="bool";
+
+$atypes{"uint32_t"}="ADM_param_uint32_t";
+$atypes{"int32_t"}="ADM_param_int32_t";
+$atypes{"float"}="ADM_param_float";
+$atypes{"bool"}="ADM_param_bool";
+$atypes{"string"}="ADM_param_string";
+
+#
+sub processLine
+{
+
+        my $type=shift;
+        my $varName=shift;
+        my $ctype;
+        my $atype;
+
+        #print "<$type,$varName>\n";
+
+        $ctype=$ctypes{$type};
+        if(!defined($ctype)){ die("Type <$type> unknown\n");}
+        $atype=$atypes{$type};
+        if(!defined($atype)){ die("aType <$type> unknown\n");}
+
+        #print "$type=>$ctype\n";
+        print OUT_H "   $ctype $varName;\n";
+
+        print OUT_DESC " {\"$varName\",offsetof( $structName,$varName),\"$ctype\",$atype},\n";
+
+}
+sub writeDescHead
+{
+        print OUT_DESC "// Automatically generated, do not edit!\n";
+        print OUT_DESC "const ADM_paramList ".$structName."_param[]={\n";
+
+
+}
+sub writeDescFoot
+{
+        print OUT_DESC "{NULL,0,NULL}\n";
+        print OUT_DESC "};\n";
+
+
+}
+sub writeHeaderHead
+{
+        print OUT_H "// Automatically generated, do not edit!\n";
+        print OUT_H "#ifndef ADM_".$structName."_CONF_H\n";
+        print OUT_H "#define ADM_".$structName."_CONF_H\n";
+        print OUT_H "typedef struct {\n";
+
+}
+sub writeHeaderFoot
+{
+        my $str=shift;
+        print OUT_H "}$structName;\n";
+        print OUT_H "#endif //".$structName."\n";
+        print OUT_H "//EOF\n";
+
+}
+#
+# Main
+#
+if(scalar(@ARGV)==0)
+{
+        die("Need at least one arg!");
+}
+$input=$ARGV[0];
+$structName=$input;
+$structName=~s/\.conf//g;
+$output_h=$structName.".h";
+$output_desc=$structName."_desc.cpp";
+
+open(IN,$input) || die("Cannot open $input for reading");
+open(OUT_H,">$output_h") || die("Cannot open $output_h to write header");
+open(OUT_DESC,">$output_desc") || die ("cannot open $output_desc to write struc");
+writeHeaderHead();
+writeDescHead();
+
+while($a=<IN>)
+{
+        chomp($a);
+        $a=~s/#.*$//g;
+        $a=~s/^[ \t]*//g;
+        my $type;
+        my $name;
+        ($type,$name)=split ":",$a;
+        #print "1: ".$a.",2:".$type.",3:".$name."\n" ;
+        processLine($type,$name);
+}
+writeHeaderFoot();
+writeDescFoot();
+close(IN);
+close(OUT_H);
+close(OUT_DESC);
+print "Done.\n" ;
+



From mean at mail.berlios.de  Thu Nov 12 16:40:37 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Thu, 12 Nov 2009 16:40:37 +0100
Subject: [Avidemux-svn-commit] r5464 - in branches/avidemux_2.6_branch_mean:
	avidemux_core/ADM_coreAudioEncoder/include
	avidemux_core/ADM_coreAudioFilter/include cmake
Message-ID: <200911121540.nACFeb1W010203@sheep.berlios.de>

Author: mean
Date: 2009-11-12 16:40:37 +0100 (Thu, 12 Nov 2009)
New Revision: 5464

Modified:
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreAudioEncoder/include/audioencoderInternal.h
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreAudioFilter/include/audioEncoderApi.h
   branches/avidemux_2.6_branch_mean/cmake/ae_plugin.cmake
Log:
[audio encoder] update macros

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreAudioEncoder/include/audioencoderInternal.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreAudioEncoder/include/audioencoderInternal.h	2009-11-12 15:40:35 UTC (rev 5463)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreAudioEncoder/include/audioencoderInternal.h	2009-11-12 15:40:37 UTC (rev 5464)
@@ -15,8 +15,9 @@
 #ifndef AUDIOENCODERINTERNAL_H
 #define AUDIOENCODERINTERNAL_H
 
-#define ADM_AUDIO_ENCODER_API_VERSION 2
+#define ADM_AUDIO_ENCODER_API_VERSION 3
 #include "audioencoder.h"
+#include "ADM_paramList.h"
 class AUDMEncoder;
 class ADM_AudioEncoder;
 
@@ -42,8 +43,8 @@
     uint32_t     major,minor,patch;     // Const
     uint32_t     wavTag;                // const Avi fourcc
     uint32_t     priority;              // const Higher means the codec is prefered and should appear first in the list
-    bool         (*getConfigurationData)(uint32_t *l, uint8_t **d); // Get the encoder private conf
-    bool         (*setConfigurationData)(uint32_t l, uint8_t *d); // Get the encoder private conf
+    bool         (*getConfigurationData)(CONFcouple **conf); // Get the encoder private conf
+    bool         (*setConfigurationData)(CONFcouple *conf); // Get the encoder private conf
 
     uint32_t     (*getBitrate)(void);
     void         (*setBitrate)(uint32_t br);
@@ -56,8 +57,8 @@
 // Macros to declare audio encoder
 /**************************************************************************/
 #define ADM_DECLARE_AUDIO_ENCODER_PREAMBLE(Class) \
-static bool getConfigurationData (uint32_t * l, uint8_t ** d); \
-static bool setConfigurationData (uint32_t l, uint8_t * d);\
+static bool getConfigurationData (CONFcouple **conf); \
+static bool setConfigurationData (CONFcouple *conf);\
 static uint32_t     getBitrate(void); \
 static void         setBitrate(uint32_t br); \
 \
@@ -71,23 +72,15 @@
   delete z; \
 } 
 //******************************************************
-#define ADM_DECLARE_AUDIO_ENCODER_CONFIG(configData) \
-bool getConfigurationData (uint32_t * l, uint8_t ** d)\
+#define ADM_DECLARE_AUDIO_ENCODER_CONFIG(templ,configData,bitrateVar) \
+bool         getConfigurationData(CONFcouple **conf) \
 {\
-  *l = sizeof (configData); \
-  *d = (uint8_t *) & configData; \
-  return 1; \
+    if(configData==NULL) {*conf=NULL;return true;} \
+    return ADM_paramSave(conf,templ,configData); \
 } \
-bool setConfigurationData (uint32_t l, uint8_t * d)\
+bool setConfigurationData (CONFcouple *conf)\
 {\
-  if (sizeof (configData) != l) \
-    {\
-      GUI_Error_HIG ("Audio Encoder",\
-		     "The configuration size does not match the codec size"); \
-      return 0; \
-    }\
-  memcpy (&configData, d, l); \
-  return 1;\
+ return ADM_paramLoad(conf,templ,configData); \
 }\
 \
 \
@@ -95,8 +88,8 @@
 { \
   return &encoderDesc; \
 }  \
-uint32_t     getBitrate(void) {return configData.bitrate;};\
-void         setBitrate(uint32_t br) {configData.bitrate=br;}
+uint32_t     getBitrate(void) {return bitrateVar;};\
+void         setBitrate(uint32_t br) {bitrateVar=br;}
 
 #ifndef QT_TR_NOOP
 #define QT_TR_NOOP(x) x

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreAudioFilter/include/audioEncoderApi.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreAudioFilter/include/audioEncoderApi.h	2009-11-12 15:40:35 UTC (rev 5463)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreAudioFilter/include/audioEncoderApi.h	2009-11-12 15:40:37 UTC (rev 5464)
@@ -5,7 +5,9 @@
 */
 #ifndef AUDIOENCODERAPI_H
 #define AUDIOENCODERAPI_H
-
+#include "ADM_confCouple.h"
+class AUDMAudioFilter;
+class ADM_AudioEncoder;
 /// Select the best encoder using the audio fourcc : WAV_MP3 etc...
 uint8_t audio_selectCodecByTag(uint32_t tag);
 /// Set an option for example "DISABLERESERVOIR",1
@@ -25,9 +27,9 @@
 /// Returns 1 if we are in process mode, 0 if in copy mode
 uint32_t audioProcessMode(void);
 /// Retrieve current audio encoder configuration
-uint8_t getAudioExtraConf(uint32_t *bitrate,uint32_t *extraDataSize, uint8_t **extradata);
+bool getAudioExtraConf(uint32_t *bitrate,CONFcouple **c);
 /// Set current audio encoder configuration
-uint8_t setAudioExtraConf(uint32_t bitrate,uint32_t extraDataSize, uint8_t *extradata);
+bool setAudioExtraConf(uint32_t bitrate,CONFcouple *c);
 
 
 

Modified: branches/avidemux_2.6_branch_mean/cmake/ae_plugin.cmake
===================================================================
--- branches/avidemux_2.6_branch_mean/cmake/ae_plugin.cmake	2009-11-12 15:40:35 UTC (rev 5463)
+++ branches/avidemux_2.6_branch_mean/cmake/ae_plugin.cmake	2009-11-12 15:40:37 UTC (rev 5464)
@@ -10,5 +10,5 @@
 
 MACRO(INSTALL_AUDIOENCODER _lib)
 	INSTALL(TARGETS ${_lib} DESTINATION "${CMAKE_INSTALL_PREFIX}/lib/ADM_plugins6/audioEncoders/")
-	TARGET_LINK_LIBRARIES(${_lib} ADM_core6 ADM_coreUI6 ADM_coreAudio6 ADM_coreAudioEncoder6)
+	TARGET_LINK_LIBRARIES(${_lib} ADM_core6 ADM_coreUI6 ADM_coreAudio6 ADM_coreAudioEncoder6 ADM_coreUtils6)
 ENDMACRO(INSTALL_AUDIOENCODER)



From mean at mail.berlios.de  Thu Nov 12 16:40:40 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Thu, 12 Nov 2009 16:40:40 +0100
Subject: [Avidemux-svn-commit] r5466 - in
	branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreImage:
	include src
Message-ID: <200911121540.nACFeer0010223@sheep.berlios.de>

Author: mean
Date: 2009-11-12 16:40:40 +0100 (Thu, 12 Nov 2009)
New Revision: 5466

Removed:
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreImage/include/ADM_confCouple.h
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreImage/src/ADM_confCouple.cpp
Log:
[core] Move conf from ADM_core to ADM_coreUtils

Deleted: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreImage/include/ADM_confCouple.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreImage/include/ADM_confCouple.h	2009-11-12 15:40:38 UTC (rev 5465)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreImage/include/ADM_confCouple.h	2009-11-12 15:40:40 UTC (rev 5466)
@@ -1,54 +0,0 @@
-/***************************************************************************
-                          CONFcouple.cpp  -  description
-                             -------------------
-	Used to set a pair name/value
-	--> filters
-
-    begin                : Sun Apr 14 2002
-    copyright            : (C) 2002 by mean
-    email                : fixounet at free.fr
- ***************************************************************************/
-
-/***************************************************************************
- *                                                                         *
- *   This program is free software; you can redistribute it and/or modify  *
- *   it under the terms of the GNU General Public License as published by  *
- *   the Free Software Foundation; either version 2 of the License, or     *
- *   (at your option) any later version.                                   *
- *                                                                         *
- ***************************************************************************/
- #ifndef __CONFCOUPLE__
- #define __CONFCOUPLE__
-
-class CONFcouple
-{
-	private:
-			uint32_t    nb;
-			char 		**name;
-			char 		**value;
-			uint8_t	cur;
-
-			int32_t lookupName(const char *myname);
-	public:
-			CONFcouple(uint32_t nb);
-			~CONFcouple();
-			uint8_t setCouple(const char *name,uint32_t value);
-			uint8_t setCouple(const char *name,int32_t value);
-			uint8_t setCouple(const char *name,const char *value);
-			uint8_t setCouple(const char *name,const ADM_filename *value);
-			uint8_t setCouple(const char *name,double value);
-			uint8_t setCouple(const char *name,float value);
-
-			uint8_t getCouple(const char *name,int32_t *value);
-			uint8_t getCouple(const char *name,uint32_t *value);
-			uint8_t getCouple(const char *name,char **value);
-			uint8_t getCouple(const char *name,ADM_filename **value);
-			uint8_t getCouple(const char *name,double *value);
-			uint8_t getCouple(const char *name,float *value);
-			uint32_t getNumber(void) { return nb;};
-			uint8_t getEntry(uint32_t n, char **nm, char **val)
-				 { assert(n<nb); *nm=name[n];*val=value[n];return 1;};
-			void dump(void );
-
-};
-#endif

Deleted: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreImage/src/ADM_confCouple.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreImage/src/ADM_confCouple.cpp	2009-11-12 15:40:38 UTC (rev 5465)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreImage/src/ADM_confCouple.cpp	2009-11-12 15:40:40 UTC (rev 5466)
@@ -1,186 +0,0 @@
-/***************************************************************************
-                          ADM_genvideo.cpp  -  description
-                             -------------------
-    begin                : Sun Apr 14 2002
-    copyright            : (C) 2002 by mean
-    email                : fixounet at free.fr
- ***************************************************************************/
-
-/***************************************************************************
- *                                                                         *
- *   This program is free software; you can redistribute it and/or modify  *
- *   it under the terms of the GNU General Public License as published by  *
- *   the Free Software Foundation; either version 2 of the License, or     *
- *   (at your option) any later version.                                   *
- *                                                                         *
- ***************************************************************************/
-
-#include "ADM_default.h"
-
-#include "fourcc.h"
-#include "ADM_assert.h"
-
-#include "ADM_videoFilter.h"
-static char tmpstring[1024]; // should be enougth
-CONFcouple::CONFcouple(uint32_t nub)
-{
-	nb=nub;
-	name=new char *[nb];
-	value=new char *[nb];
-
-	for(uint32_t i=0;i<nb;i++)
-		{
-			name[i]=NULL;
-			value[i]=NULL;
-		}
-
-	cur=0;
-};
-
-CONFcouple::~CONFcouple()
-{
-	for(uint32_t i=0;i<nb;i++)
-		{
-			if(name[i]) delete name[i];
-			if(value[i]) delete value[i];
-		}
-		delete [] name;
-		delete [] value;
-
-
-};
-
-uint8_t CONFcouple::setCouple(const char *myname,uint32_t val)
-{
-	ADM_assert(cur<nb);
-
-	name[cur]=ADM_strdup(myname);
-	sprintf(tmpstring,"%"LU,val);
-	value[cur]=ADM_strdup(tmpstring);
-	cur++;
-	return 1;
-}
-uint8_t CONFcouple::setCouple(const char *myname,float val)
-{
-	ADM_assert(cur<nb);
-
-	name[cur]=ADM_strdup(myname);
-	sprintf(tmpstring,"%f",val);
-	value[cur]=ADM_strdup(tmpstring);
-	cur++;
-	return 1;
-}
-uint8_t CONFcouple::setCouple(const char *myname,double val)
-{
-	ADM_assert(cur<nb);
-
-	name[cur]=ADM_strdup(myname);
-	sprintf(tmpstring,"%f",val);
-	value[cur]=ADM_strdup(tmpstring);
-	cur++;
-	return 1;
-}
-uint8_t CONFcouple::setCouple(const char *myname,int32_t val)
-{
-	ADM_assert(cur<nb);
-
-	name[cur]=ADM_strdup(myname);
-	sprintf(tmpstring,"%"LD,val);
-	value[cur]=ADM_strdup(tmpstring);
-	cur++;
-	return 1;
-}
-uint8_t CONFcouple::setCouple(const char *myname,const char *val)
-{
-	ADM_assert(cur<nb);
-
-	name[cur]=ADM_strdup(myname);
-	value[cur]=ADM_strdup(val);
-	cur++;
-	return 1;
-}
-uint8_t CONFcouple::setCouple(const char *myname,const ADM_filename *val)
-{
-	ADM_assert(cur<nb);
-
-	name[cur]=ADM_strdup(myname);
-	value[cur]=ADM_strdup((char *)val);
-	cur++;
-	return 1;
-}
-
-uint8_t CONFcouple::getCouple(const char *myname,uint32_t *val)
-{
-	int32_t index=lookupName(myname);
-
-	ADM_assert(index!=-1);
-	ADM_assert(index<(int)nb);
-	*val=(int)atoi(value[index]);
-	return 1;
-}
-uint8_t CONFcouple::getCouple(const char *myname,int32_t *val)
-{
-	int32_t index=lookupName(myname);
-
-	ADM_assert(index!=-1);
-	ADM_assert(index<(int)nb);
-	*val=(int)atoi(value[index]);
-	return 1;
-}
-uint8_t CONFcouple::getCouple(const char *myname,char **val)
-{
-	int32_t index=lookupName(myname);
-
-	ADM_assert(index!=-1);
-	ADM_assert(index<(int)nb);
-	*val=ADM_strdup(value[index]);
-	return 1;
-}
-uint8_t CONFcouple::getCouple(const char *myname,ADM_filename **val)
-{
-	int32_t index=lookupName(myname);
-
-	ADM_assert(index!=-1);
-	ADM_assert(index<(int)nb);
-	*val=(ADM_filename *)ADM_strdup(value[index]);
-	return 1;
-}
-
-uint8_t CONFcouple::getCouple(const char *myname,float *val)
-{
-	int32_t index=lookupName(myname);
-
-	ADM_assert(index!=-1);
-	ADM_assert(index<(int)nb);
-	sscanf(value[index],"%f",val);;
-	return 1;
-}
-uint8_t CONFcouple::getCouple(const char *myname,double *val)
-{
-	int32_t index=lookupName(myname);
-
-	ADM_assert(index!=-1);
-	ADM_assert(index<(int)nb);
-	sscanf(value[index],"%lf",val);;
-	return 1;
-}
-
-int32_t CONFcouple::lookupName(const char *myname)
-{
-	for(uint32_t i=0;i<nb;i++)
-	{
-		if(!strcmp(name[i],myname)) return i;
-
-	}
-	return -1;
-
-}
-void CONFcouple::dump(void )
-{
-	for(uint32_t i=0;i<nb;i++)
-	{
-		if(name[i]) printf ("nm:%s ",name[i]); else printf("!! no name !! ");
-		if(value[i]) printf ("val:%s ",value[i]); else printf("!! no value !! ");
-	}
-}
-



From mean at mail.berlios.de  Thu Nov 12 16:40:42 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Thu, 12 Nov 2009 16:40:42 +0100
Subject: [Avidemux-svn-commit] r5467 -
	branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreImage/src
Message-ID: <200911121540.nACFegL1010236@sheep.berlios.de>

Author: mean
Date: 2009-11-12 16:40:42 +0100 (Thu, 12 Nov 2009)
New Revision: 5467

Modified:
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreImage/src/CMakeLists.txt
Log:
[core] Move conf from ADM_core to ADM_coreUtils

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreImage/src/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreImage/src/CMakeLists.txt	2009-11-12 15:40:40 UTC (rev 5466)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreImage/src/CMakeLists.txt	2009-11-12 15:40:42 UTC (rev 5467)
@@ -1,5 +1,4 @@
 SET(ADM_coreImage_SRCS 
-	ADM_confCouple.cpp  
         ADM_videoFilter.cpp  
         ADM_videoFilterCache.cpp
         ADM_image.cpp  



From mean at mail.berlios.de  Thu Nov 12 16:40:45 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Thu, 12 Nov 2009 16:40:45 +0100
Subject: [Avidemux-svn-commit] r5468 - in branches/avidemux_2.6_branch_mean:
	avidemux_core/ADM_coreAudioEncoder/include
	avidemux_plugins/ADM_audioEncoders/faac
	avidemux_plugins/ADM_audioEncoders/vorbis cmake
Message-ID: <200911121540.nACFejjA010246@sheep.berlios.de>

Author: mean
Date: 2009-11-12 16:40:44 +0100 (Thu, 12 Nov 2009)
New Revision: 5468

Added:
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioEncoders/vorbis/vorbis_encoder.conf
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioEncoders/vorbis/vorbis_encoder.h
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioEncoders/vorbis/vorbis_encoder_desc.cpp
Removed:
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioEncoders/faac/audioencoder_faac_param.h
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioEncoders/vorbis/audioencoder_vorbis_param.h
Modified:
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreAudioEncoder/include/audioencoderInternal.h
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioEncoders/faac/audioencoder_faac.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioEncoders/vorbis/audioencoder_vorbis.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioEncoders/vorbis/audioencoder_vorbis.h
   branches/avidemux_2.6_branch_mean/cmake/admSerialization.pl
Log:
[AudioEncoder] Switch vorbis to new setup scheme

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreAudioEncoder/include/audioencoderInternal.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreAudioEncoder/include/audioencoderInternal.h	2009-11-12 15:40:42 UTC (rev 5467)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreAudioEncoder/include/audioencoderInternal.h	2009-11-12 15:40:44 UTC (rev 5468)
@@ -16,6 +16,7 @@
 #define AUDIOENCODERINTERNAL_H
 
 #define ADM_AUDIO_ENCODER_API_VERSION 3
+#include "stddef.h"
 #include "audioencoder.h"
 #include "ADM_paramList.h"
 class AUDMEncoder;

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioEncoders/faac/audioencoder_faac.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioEncoders/faac/audioencoder_faac.cpp	2009-11-12 15:40:42 UTC (rev 5467)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioEncoders/faac/audioencoder_faac.cpp	2009-11-12 15:40:44 UTC (rev 5468)
@@ -26,13 +26,10 @@
 
 #include "faac.h"
 #include "audioencoder_faac.h"
-#include "audioencoder_faac_param.h"
 
+
 static bool configure(void);
 static uint32_t faacBitrate;
-static FAAC_encoderParam faacParm={
-    128
-};
 /********************* Declare Plugin *****************************************************/
 ADM_DECLARE_AUDIO_ENCODER_PREAMBLE(AUDMEncoder_Faac);
 
@@ -117,7 +114,7 @@
     if(!_handle)
     {
           printf("[FAAC]Cannot open faac with fq=%"LU" chan=%"LU" br=%"LU"\n",
-          wavheader.frequency,channels,faacParm.bitrate);
+          wavheader.frequency,channels,faacBitrate);
           return 0;
     }
     printf(" [FAAC] : Sample input:%"LU", max byte output%"LU" \n",(uint32_t)samples_input,(uint32_t)max_bytes_output);
@@ -129,14 +126,14 @@
     cfg->bandWidth= (wavheader.frequency*3)/4; // Should be relevant
     cfg->useTns = 0;
     cfg->allowMidside = 0;
-    cfg->bitRate = (faacParm.bitrate*1000)/channels; // It is per channel
+    cfg->bitRate = (faacBitrate*1000)/channels; // It is per channel
     cfg->outputFormat = 0; // 0 Raw 1 ADTS
     cfg->inputFormat = FAAC_INPUT_FLOAT;
     cfg->useLfe=0;	
     if (!(ret=faacEncSetConfiguration(_handle, cfg))) 
     {
         printf("[FAAC] Cannot set conf for faac with fq=%"LU" chan=%"LU" br=%"LU" (err:%d)\n",
-				wavheader.frequency,channels,faacParm.bitrate,ret);
+				wavheader.frequency,channels,faacBitrate,ret);
 	return 0;
     }
      unsigned char *data=NULL;
@@ -151,7 +148,7 @@
      memcpy(_extraData,data,size);
 
     // update
-     wavheader.byterate=(faacParm.bitrate*1000)/8;
+     wavheader.byterate=(faacBitrate*1000)/8;
 //    _wavheader->dwScale=1024;
 //    _wavheader->dwSampleSize=0;
     wavheader.blockalign=4096;
@@ -274,7 +271,7 @@
                               BITRATE(224),
                               BITRATE(384)
                           };
-    diaElemMenu bitrate(&(faacParm.bitrate),   QT_TR_NOOP("_Bitrate:"), SZT(bitrateM),bitrateM);
+    diaElemMenu bitrate(&(faacBitrate),   QT_TR_NOOP("_Bitrate:"), SZT(bitrateM),bitrateM);
   
     
 

Deleted: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioEncoders/faac/audioencoder_faac_param.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioEncoders/faac/audioencoder_faac_param.h	2009-11-12 15:40:42 UTC (rev 5467)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioEncoders/faac/audioencoder_faac_param.h	2009-11-12 15:40:44 UTC (rev 5468)
@@ -1,8 +0,0 @@
-
-#ifndef FAAC_PARAM_H
-#define FAAC_PARAM_H
-typedef struct 
-{
-  uint32_t bitrate;
-}FAAC_encoderParam;
-#endif

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioEncoders/vorbis/audioencoder_vorbis.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioEncoders/vorbis/audioencoder_vorbis.cpp	2009-11-12 15:40:42 UTC (rev 5467)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioEncoders/vorbis/audioencoder_vorbis.cpp	2009-11-12 15:40:44 UTC (rev 5468)
@@ -11,9 +11,7 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
-#include <math.h>
 
-#include <math.h>
 
 #include "ADM_default.h"
 #include "DIA_factory.h"
@@ -21,12 +19,14 @@
 
 #include "audioencoder.h"
 #include "audioencoderInternal.h"
-#include "audioencoder_vorbis_param.h"
 #include "audioencoder_vorbis.h"
 
+#include "vorbis_encoder.h"
+#include "vorbis_encoder_desc.cpp"
 
 #include "vorbis/vorbisenc.h"
-
+#include <math.h>
+//********************************
 #define OPTIONS (twolame_options_struct *)_twolameOptions
 
 #define VD (((vorbisStruct *)_handle)->vd)
@@ -40,16 +40,25 @@
 	vorbis_block     vb ;
 	vorbis_comment   vc ;
 }vorbisStruct;
+
+
+typedef enum
+{
+  ADM_VORBIS_CBR,
+  ADM_VORBIS_VBR,
+  ADM_VORBIS_QUALITY
+
+}ADM_VORBIS_MODE;
+
 //
 static uint32_t vorbisBitrate=128;
 //___________
-static VORBIS_encoderParam vorbisParam=
+vorbis_encoder vorbisConf=
 {
-    128,
-    ADM_VORBIS_VBR,
-    9
+ADM_VORBIS_VBR,9.
 };
 
+
 static bool configure(void);
 /********************* Declare Plugin *****************************************************/
 ADM_DECLARE_AUDIO_ENCODER_PREAMBLE(AUDMEncoder_Vorbis);
@@ -76,7 +85,7 @@
 
   NULL
 };
-ADM_DECLARE_AUDIO_ENCODER_CONFIG(NULL,NULL,vorbisBitrate);
+ADM_DECLARE_AUDIO_ENCODER_CONFIG(vorbis_encoder_param,&vorbisConf,vorbisBitrate);
 
 /******************* / Declare plugin*******************************************************/
 
@@ -122,7 +131,7 @@
 bool AUDMEncoder_Vorbis::initialize(void)
 {
   int ret;
-  VORBIS_encoderParam *vorbisConf=&vorbisParam;
+  
 
 
   ogg_packet header1,header2,header3;
@@ -132,7 +141,7 @@
 
   vorbis_info_init(&VI) ;
 
-  switch(vorbisConf->mode)
+  switch(vorbisConf.mode)
   {
 
     case ADM_VORBIS_VBR:
@@ -140,7 +149,7 @@
                               wavheader.channels,
                               wavheader.frequency,
                               -1, // Max bitrate
-                              vorbisConf->bitrate*1000, //long nominal_bitrate,
+                              vorbisBitrate*1000, //long nominal_bitrate,
                               -1 //long min_bitrate))
                             );
                       break;
@@ -148,7 +157,7 @@
                     err=vorbis_encode_init_vbr(&VI,
                                 wavheader.channels,
                                 wavheader.frequency,
-                                vorbisConf->quality/10
+                                vorbisConf.quality/10
                               );
                     break;
 
@@ -193,13 +202,13 @@
   vorbis_comment_clear(&VC);
 
   printf("\n[Vorbis]Vorbis encoder initialized\n");
-  switch(vorbisConf->mode)
+  switch(vorbisConf.mode)
   {
     case ADM_VORBIS_VBR:
-      printf("[Vorbis]CBR Bitrate:%"LU"\n",vorbisConf->bitrate);
+      printf("[Vorbis]CBR Bitrate:%"LU"\n",vorbisBitrate);
       break;
     case ADM_VORBIS_QUALITY: //FIXME FIXME FIXME
-      printf("[Vorbis]VBR Quality:%.1f\n",vorbisConf->quality);
+      printf("[Vorbis]VBR Quality:%.1f\n",vorbisConf.quality);
     break;
     default:
       ADM_assert(0);
@@ -294,11 +303,11 @@
     ELEM_TYPE_FLOAT qqual;
 
 
-   VORBIS_encoderParam *vParam=&vorbisParam;
 
-    mmode=vParam->mode;
-    qqual=(ELEM_TYPE_FLOAT)vParam->quality;
 
+    mmode=vorbisConf.mode;
+    qqual=(ELEM_TYPE_FLOAT)vorbisConf.quality;
+
     diaMenuEntry channelMode[]={
                              {ADM_VORBIS_VBR,      QT_TR_NOOP("VBR"),NULL},
                              {ADM_VORBIS_QUALITY,   QT_TR_NOOP("Quality based"),NULL}};
@@ -317,7 +326,7 @@
                               BITRATE(192),
                               BITRATE(224)
                           };
-    diaElemMenu bitrate(&(vParam->bitrate),   QT_TR_NOOP("_Bitrate:"), SZT(bitrateM),bitrateM);
+    diaElemMenu bitrate(&(vorbisBitrate),   QT_TR_NOOP("_Bitrate:"), SZT(bitrateM),bitrateM);
 
     diaElemFloat quality(&qqual,QT_TR_NOOP("_Quality:"),-1.,10.);
 
@@ -328,8 +337,8 @@
 
   if( diaFactoryRun(QT_TR_NOOP("Vorbis Configuration"),3,elems))
   {
-    vParam->mode=(ADM_VORBIS_MODE)mmode;
-    vParam->quality=(float)qqual;
+    vorbisConf.mode=(ADM_VORBIS_MODE)mmode;
+    vorbisConf.quality=(float)qqual;
     return 1;
   }
   return 0;

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioEncoders/vorbis/audioencoder_vorbis.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioEncoders/vorbis/audioencoder_vorbis.h	2009-11-12 15:40:42 UTC (rev 5467)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioEncoders/vorbis/audioencoder_vorbis.h	2009-11-12 15:40:44 UTC (rev 5468)
@@ -12,10 +12,13 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
-#ifndef AUDMaudioVorbis
-#define AUDMaudioVorbis
+#ifndef AUDMaudioVorbis_H
+#define AUDMaudioVorbis_H
 
- //_____________________________________________
+/**
+    \fn AUDMEncoder_Vorbis
+    \brief Vorbis encoder
+*/
 class AUDMEncoder_Vorbis : public ADM_AudioEncoder
 {
   protected:
@@ -26,11 +29,11 @@
 
          
   public:
-            bool     initialize(void);
-            virtual     ~AUDMEncoder_Vorbis();
-                        AUDMEncoder_Vorbis(AUDMAudioFilter *instream);	
+                    bool     initialize(void);
+        virtual     ~AUDMEncoder_Vorbis();
+                    AUDMEncoder_Vorbis(AUDMAudioFilter *instream);	
             
-   virtual bool	encode(uint8_t *dest, uint32_t *len, uint32_t *samples);
+        virtual bool	encode(uint8_t *dest, uint32_t *len, uint32_t *samples);
 };
 
 #endif

Deleted: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioEncoders/vorbis/audioencoder_vorbis_param.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioEncoders/vorbis/audioencoder_vorbis_param.h	2009-11-12 15:40:42 UTC (rev 5467)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioEncoders/vorbis/audioencoder_vorbis_param.h	2009-11-12 15:40:44 UTC (rev 5468)
@@ -1,18 +0,0 @@
-#ifndef AUDM_VORBIS_PARAM_H
-#define AUDM_VORBIS_PARAM_H
-
-typedef enum 
-{
-  ADM_VORBIS_CBR,
-  ADM_VORBIS_VBR,
-  ADM_VORBIS_QUALITY
-  
-}ADM_VORBIS_MODE;
-
-typedef struct 
-{
-  uint32_t           bitrate;
-  ADM_VORBIS_MODE    mode;   // 0 cbr 1 vbr 2 quality
-  float              quality;
-}VORBIS_encoderParam;
-#endif

Added: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioEncoders/vorbis/vorbis_encoder.conf
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioEncoders/vorbis/vorbis_encoder.conf	2009-11-12 15:40:42 UTC (rev 5467)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioEncoders/vorbis/vorbis_encoder.conf	2009-11-12 15:40:44 UTC (rev 5468)
@@ -0,0 +1,2 @@
+uint32_t:mode
+float:quality

Added: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioEncoders/vorbis/vorbis_encoder.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioEncoders/vorbis/vorbis_encoder.h	2009-11-12 15:40:42 UTC (rev 5467)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioEncoders/vorbis/vorbis_encoder.h	2009-11-12 15:40:44 UTC (rev 5468)
@@ -0,0 +1,9 @@
+// Automatically generated, do not edit!
+#ifndef ADM_vorbis_encoder_CONF_H
+#define ADM_vorbis_encoder_CONF_H
+typedef struct {
+   uint32_t mode;
+   float quality;
+}vorbis_encoder;
+#endif //vorbis_encoder
+//EOF

Added: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioEncoders/vorbis/vorbis_encoder_desc.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioEncoders/vorbis/vorbis_encoder_desc.cpp	2009-11-12 15:40:42 UTC (rev 5467)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioEncoders/vorbis/vorbis_encoder_desc.cpp	2009-11-12 15:40:44 UTC (rev 5468)
@@ -0,0 +1,6 @@
+// Automatically generated, do not edit!
+const ADM_paramList vorbis_encoder_param[]={
+ {"mode",offsetof( vorbis_encoder,mode),"uint32_t",ADM_param_uint32_t},
+ {"quality",offsetof( vorbis_encoder,quality),"float",ADM_param_float}, 
+{NULL,0,NULL}
+};

Modified: branches/avidemux_2.6_branch_mean/cmake/admSerialization.pl
===================================================================
--- branches/avidemux_2.6_branch_mean/cmake/admSerialization.pl	2009-11-12 15:40:42 UTC (rev 5467)
+++ branches/avidemux_2.6_branch_mean/cmake/admSerialization.pl	2009-11-12 15:40:44 UTC (rev 5468)
@@ -12,12 +12,14 @@
 $ctypes{"bool"}="bool";
 $ctypes{"string"}="char *";
 $ctypes{"bool"}="bool";
+$ctypes{"float"}="float";
 
 $atypes{"uint32_t"}="ADM_param_uint32_t";
 $atypes{"int32_t"}="ADM_param_int32_t";
 $atypes{"float"}="ADM_param_float";
 $atypes{"bool"}="ADM_param_bool";
 $atypes{"string"}="ADM_param_string";
+$atypes{"float"}="ADM_param_float";
 
 #
 sub processLine



From mean at mail.berlios.de  Thu Nov 12 19:05:41 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Thu, 12 Nov 2009 19:05:41 +0100
Subject: [Avidemux-svn-commit] r5469 - in branches/avidemux_2.6_branch_mean:
	avidemux/common/ADM_editor avidemux/common/ADM_script
	avidemux_core/ADM_coreImage/src avidemux_core/ADM_coreUtils/include
	avidemux_core/ADM_coreUtils/src
	avidemux_plugins/ADM_audioEncoders/lame
Message-ID: <200911121805.nACI5fip008537@sheep.berlios.de>

Author: mean
Date: 2009-11-12 19:05:39 +0100 (Thu, 12 Nov 2009)
New Revision: 5469

Modified:
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edLoadSave.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script/ADM_JSAvidemuxAudio.cpp
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreImage/src/ADM_vidFields.cpp
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreImage/src/ADM_videoFilter.cpp
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/include/ADM_confCouple.h
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/include/ADM_paramList.h
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/src/ADM_confCouple.cpp
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/src/ADM_paramList.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioEncoders/lame/audioencoder_lame.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioEncoders/lame/lame_encoder.conf
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioEncoders/lame/lame_encoder.h
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioEncoders/lame/lame_encoder_desc.cpp
Log:
[Couples] Cleanup, add explicit names to couples handling, add a full bool type

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edLoadSave.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edLoadSave.cpp	2009-11-12 15:40:44 UTC (rev 5468)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edLoadSave.cpp	2009-11-12 18:05:39 UTC (rev 5469)
@@ -191,12 +191,12 @@
    else
     {
         qfprintf(fd,"app.audio.codec(\"%s\",%d", audioCodecGetName(),bitrate); 
-        uint32_t n=couples->getNumber();
+        uint32_t n=couples->getSize();
         
         for(int i=0;i<n;i++)
         {
             char *name,*value;
-            couples->getEntry(i,&name,&value);
+            couples->getInternalName(i,&name,&value);
             qfprintf(fd,",\"%s=%s\"",name,value);
         }
         qfprintf(fd,");\n");

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script/ADM_JSAvidemuxAudio.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script/ADM_JSAvidemuxAudio.cpp	2009-11-12 15:40:44 UTC (rev 5468)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script/ADM_JSAvidemuxAudio.cpp	2009-11-12 18:05:39 UTC (rev 5469)
@@ -409,7 +409,7 @@
                         }
                     value++;
                 }
-                c->setCouple(name,value);
+                c->setInternalName(name,value);
                 //printf("%s -> [%s,%s]\n",param,name,value);
                 ADM_dezalloc(dupe);
             }

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreImage/src/ADM_vidFields.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreImage/src/ADM_vidFields.cpp	2009-11-12 15:40:44 UTC (rev 5468)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreImage/src/ADM_vidFields.cpp	2009-11-12 18:05:39 UTC (rev 5469)
@@ -39,8 +39,8 @@
 	if(couples)
 	{
 			_param=NEW(DEINT_PARAM);
-			GET(motion_trigger);
-			GET(blend_trigger);
+//			GET(motion_trigger);
+			//GET(blend_trigger);
 	}
 	else
 	{
@@ -57,8 +57,8 @@
 			*couples=new CONFcouple(2);
 
 #define CSET(x)  (*couples)->setCouple((char *)#x,(_param->x))
-	CSET(motion_trigger);
-	CSET(blend_trigger);
+//	CSET(motion_trigger);
+//	CSET(blend_trigger);
 			return 1;
 
 }

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreImage/src/ADM_videoFilter.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreImage/src/ADM_videoFilter.cpp	2009-11-12 15:40:44 UTC (rev 5468)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreImage/src/ADM_videoFilter.cpp	2009-11-12 18:05:39 UTC (rev 5469)
@@ -151,6 +151,7 @@
 //______________________________________________________
 CONFcouple *filterBuildCouple(FILTER_PARAM *param,uint32_t nb,Arg *args)
 {
+#if 0
 int found,l;
 int trans[MAXPARAM];
 	if(param->nb>VARIABLE_PARAMS)
@@ -248,5 +249,6 @@
 		}
 		return couple;
 	}
-
+#endif
+    return NULL;
 }

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/include/ADM_confCouple.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/include/ADM_confCouple.h	2009-11-12 15:40:44 UTC (rev 5468)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/include/ADM_confCouple.h	2009-11-12 18:05:39 UTC (rev 5469)
@@ -1,11 +1,7 @@
-/***************************************************************************
-                          CONFcouple.cpp  -  description
-                             -------------------
-	Used to set a pair name/value
-	--> filters
-
-    begin                : Sun Apr 14 2002
-    copyright            : (C) 2002 by mean
+/** *************************************************************************
+    \file ADM_confCouple.h
+    \brief Handle Key/value pair
+    copyright            : (C) 2002/2009 by mean
     email                : fixounet at free.fr
  ***************************************************************************/
 
@@ -27,28 +23,34 @@
 			char 		**name;
 			char 		**value;
 			uint8_t	cur;
+            
 
-
 	public:
 			int32_t lookupName(const char *myname);
+
 			CONFcouple(uint32_t nb);
 			~CONFcouple();
-			uint8_t setCouple(const char *name,uint32_t value);
-			uint8_t setCouple(const char *name,int32_t value);
-			uint8_t setCouple(const char *name,const char *value);
-			uint8_t setCouple(const char *name,const ADM_filename *value);
-			uint8_t setCouple(const char *name,double value);
-			uint8_t setCouple(const char *name,float value);
 
-			uint8_t getCouple(const char *name,int32_t *value);
-			uint8_t getCouple(const char *name,uint32_t *value);
-			uint8_t getCouple(const char *name,char **value);
-			uint8_t getCouple(const char *name,ADM_filename **value);
-			uint8_t getCouple(const char *name,double *value);
-			uint8_t getCouple(const char *name,float *value);
-			uint32_t getNumber(void) { return nb;};
-			uint8_t getEntry(uint32_t n, char **nm, char **val)
-				 { assert(n<nb); *nm=name[n];*val=value[n];return 1;};
+			bool writeAsUint32(const char *name,uint32_t value);
+			bool writeAsInt32(const char *name,int32_t value);
+			bool writeAsString(const char *name,const char *value);
+			bool writeAsFloat(const char *name,float value);
+            bool writeAsBool(const char *name,bool value);
+			
+
+
+            bool readAsUint32(const char *name,uint32_t *value);    
+			bool readAsInt32(const char *name,int32_t *value);
+			bool readAsString(const char *name,char **value);
+			bool readAsFloat(const char *name,float *value);
+            bool readAsBool(const char *name,bool *value);
+
+            bool exist(const char *name);
+
+			uint32_t getSize(void) { return nb;};
+
+            bool     setInternalName(const char *name, const char *key);
+			bool     getInternalName(uint32_t n, char **nm, char **val);
 			void dump(void );
 
 };

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/include/ADM_paramList.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/include/ADM_paramList.h	2009-11-12 15:40:44 UTC (rev 5468)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/include/ADM_paramList.h	2009-11-12 18:05:39 UTC (rev 5469)
@@ -27,7 +27,7 @@
         ADM_param_uint32_t=1,
         ADM_param_int32_t=2,
         ADM_param_float=3,
-       // ADM_param_bool=4,
+        ADM_param_bool=4,
         ADM_param_string=5
 }ADM_paramType;
 

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/src/ADM_confCouple.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/src/ADM_confCouple.cpp	2009-11-12 15:40:44 UTC (rev 5468)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/src/ADM_confCouple.cpp	2009-11-12 18:05:39 UTC (rev 5469)
@@ -1,8 +1,8 @@
-/***************************************************************************
-                          ADM_genvideo.cpp  -  description
-                             -------------------
-    begin                : Sun Apr 14 2002
-    copyright            : (C) 2002 by mean
+/** *************************************************************************
+        \file ADM_confCouple.cpp
+        \brief Handle storage of data into key/value pairs
+
+    copyright            : (C) 2002/2009 by mean
     email                : fixounet at free.fr
  ***************************************************************************/
 
@@ -16,12 +16,10 @@
  ***************************************************************************/
 
 #include "ADM_default.h"
+#include "ADM_confCouple.h"
 
-//#include "fourcc.h"
+static char tmpstring[1024]; // should be enougth
 
-#include "ADM_confCouple.h"
-//#include "ADM_videoFilter.h"
-static char tmpstring[1024]; // should be enougth
 CONFcouple::CONFcouple(uint32_t nub)
 {
 	nb=nub;
@@ -49,28 +47,26 @@
 
 
 };
-
-uint8_t CONFcouple::setCouple(const char *myname,uint32_t val)
+/**
+    \fn exist
+*/
+bool CONFcouple::exist(const char *name)
 {
-	ADM_assert(cur<nb);
-
-	name[cur]=ADM_strdup(myname);
-	sprintf(tmpstring,"%"LU,val);
-	value[cur]=ADM_strdup(tmpstring);
-	cur++;
-	return 1;
+    int i=lookupName(name);
+    if(i==-1) return false;
+    return true;
 }
-uint8_t CONFcouple::setCouple(const char *myname,float val)
+bool CONFcouple::writeAsUint32(const char *myname,uint32_t val)
 {
 	ADM_assert(cur<nb);
 
 	name[cur]=ADM_strdup(myname);
-	sprintf(tmpstring,"%f",val);
+	sprintf(tmpstring,"%"LU,val);
 	value[cur]=ADM_strdup(tmpstring);
 	cur++;
 	return 1;
 }
-uint8_t CONFcouple::setCouple(const char *myname,double val)
+bool CONFcouple::writeAsFloat(const char *myname,float val)
 {
 	ADM_assert(cur<nb);
 
@@ -80,7 +76,7 @@
 	cur++;
 	return 1;
 }
-uint8_t CONFcouple::setCouple(const char *myname,int32_t val)
+bool CONFcouple::writeAsInt32(const char *myname,int32_t val)
 {
 	ADM_assert(cur<nb);
 
@@ -90,7 +86,8 @@
 	cur++;
 	return 1;
 }
-uint8_t CONFcouple::setCouple(const char *myname,const char *val)
+#warning TODO: ESCAPE!
+bool CONFcouple::writeAsString(const char *myname,const char *val)
 {
 	ADM_assert(cur<nb);
 
@@ -99,26 +96,31 @@
 	cur++;
 	return 1;
 }
-uint8_t CONFcouple::setCouple(const char *myname,const ADM_filename *val)
+bool CONFcouple::writeAsBool(const char *myname,bool v)
 {
 	ADM_assert(cur<nb);
 
 	name[cur]=ADM_strdup(myname);
-	value[cur]=ADM_strdup((char *)val);
+    if(v==true) value[cur]=ADM_strdup("True");
+        else value[cur]=ADM_strdup("False");
+	
 	cur++;
 	return 1;
 }
 
-uint8_t CONFcouple::getCouple(const char *myname,uint32_t *val)
+// ******************************************
+bool CONFcouple::readAsBool(const char *myname,bool *v)
 {
 	int32_t index=lookupName(myname);
 
 	ADM_assert(index!=-1);
 	ADM_assert(index<(int)nb);
-	*val=(int)atoi(value[index]);
+    char *test=value[index];
+    if(!strcasecmp(test,"true")) *v=true;
+        else *v=false;
 	return 1;
 }
-uint8_t CONFcouple::getCouple(const char *myname,int32_t *val)
+bool CONFcouple::readAsUint32(const char *myname,uint32_t *val)
 {
 	int32_t index=lookupName(myname);
 
@@ -127,26 +129,26 @@
 	*val=(int)atoi(value[index]);
 	return 1;
 }
-uint8_t CONFcouple::getCouple(const char *myname,char **val)
+bool CONFcouple::readAsInt32(const char *myname,int32_t *val)
 {
 	int32_t index=lookupName(myname);
 
 	ADM_assert(index!=-1);
 	ADM_assert(index<(int)nb);
-	*val=ADM_strdup(value[index]);
+	*val=(int)atoi(value[index]);
 	return 1;
 }
-uint8_t CONFcouple::getCouple(const char *myname,ADM_filename **val)
+bool CONFcouple::readAsString(const char *myname,char **val)
 {
 	int32_t index=lookupName(myname);
-
+#warning TODO : unescape
 	ADM_assert(index!=-1);
 	ADM_assert(index<(int)nb);
-	*val=(ADM_filename *)ADM_strdup(value[index]);
+	*val=ADM_strdup(value[index]);
 	return 1;
 }
 
-uint8_t CONFcouple::getCouple(const char *myname,float *val)
+bool CONFcouple::readAsFloat(const char *myname,float *val)
 {
 	int32_t index=lookupName(myname);
 
@@ -155,16 +157,10 @@
 	sscanf(value[index],"%f",val);;
 	return 1;
 }
-uint8_t CONFcouple::getCouple(const char *myname,double *val)
-{
-	int32_t index=lookupName(myname);
-
-	ADM_assert(index!=-1);
-	ADM_assert(index<(int)nb);
-	sscanf(value[index],"%lf",val);;
-	return 1;
-}
-
+/**
+    \fn lookupName
+    \brief Return index of name in the couples, -1 if not fount
+*/
 int32_t CONFcouple::lookupName(const char *myname)
 {
 	for(uint32_t i=0;i<nb;i++)
@@ -184,3 +180,19 @@
 	}
 }
 
+ bool     CONFcouple::setInternalName(const char *nm, const char *val)
+{
+   ADM_assert(cur<nb);
+
+	name[cur]=ADM_strdup(nm);
+	value[cur]=ADM_strdup(val);
+	cur++;
+	return 1;
+}
+bool  CONFcouple::getInternalName(uint32_t n, char **nm, char **val)
+{ 
+    assert(n<nb); 
+    *nm=name[n];
+    *val=value[n];
+    return true;
+};
\ No newline at end of file

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/src/ADM_paramList.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/src/ADM_paramList.cpp	2009-11-12 15:40:44 UTC (rev 5468)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/src/ADM_paramList.cpp	2009-11-12 18:05:39 UTC (rev 5469)
@@ -21,7 +21,7 @@
 */
 bool ADM_paramValidate(CONFcouple *couples, const ADM_paramList *params)
 {
-    int n=couples->getNumber();
+    int n=couples->getSize();
     int found=0;
     int p=0;
     const ADM_paramList *l=params;
@@ -39,8 +39,7 @@
     for(int i=0;i<p;i++)
     {
         const char *name=params[i].paramName;
-        int index=couples->lookupName(name);
-        if(index==-1)
+        if(false==couples->exist(name))
         {
             ADM_warning("Cannot find param with name %s in configuration\n",name);
             return false;
@@ -56,7 +55,7 @@
 {
     uint8_t *address=(uint8_t *)s;
     if(false==ADM_paramValidate(couples,params)) return false;
-    int n=couples->getNumber();
+    int n=couples->getSize();
     for(int i=0;i<n;i++)
     {
         const char *name=params[i].paramName;
@@ -64,13 +63,13 @@
         ADM_assert(index!=-1);
         switch(params[i].type)
         {
-#define SWAL(entry,type,var) case  entry: {type   var;\
-                        couples->getCouple(name,&var); \
+#define SWAL(entry,type,var,access) case  entry: {type   var;\
+                        couples->readAs##access(name,&var); \
                         *(type *)(address+params[i].offset)=var;}break;
-           SWAL(ADM_param_uint32_t,uint32_t,u32)
-           SWAL(ADM_param_int32_t, int32_t, i32)
-           SWAL(ADM_param_float,   float ,  f)
-     //      SWAL(ADM_param_bool,    bool ,   b)
+           SWAL(ADM_param_uint32_t,uint32_t,u32,Uint32)
+           SWAL(ADM_param_int32_t, int32_t, i32,Int32)
+           SWAL(ADM_param_float,   float ,  f,Float)
+           SWAL(ADM_param_bool,    bool ,   b,Bool)
            case ADM_param_string: ADM_error("not implemented string for paramList\n");ADM_assert(0);
         }
     }
@@ -100,14 +99,14 @@
         switch(params[i].type)
         {
 #undef SWAL
-#define SWAL(entry,type,var) case  entry: \
+#define SWAL(entry,type,var,access) case  entry: \
                                     {type var; \
                                     var=*(type *)(address+params[i].offset);\
-                                    c->setCouple(name,var);}break;
-           SWAL(ADM_param_uint32_t,uint32_t,u32)
-           SWAL(ADM_param_int32_t, int32_t, i32)
-           SWAL(ADM_param_float,   float ,  f)
-    //       SWAL(ADM_param_bool,    bool ,   b)
+                                    c->writeAs##access(name,var);}break;
+           SWAL(ADM_param_uint32_t,uint32_t,u32,Uint32)
+           SWAL(ADM_param_int32_t, int32_t, i32,Int32)
+           SWAL(ADM_param_float,   float ,  f,Float)
+           SWAL(ADM_param_bool,    bool ,   b,Bool)
            case ADM_param_string: ADM_error("not implemented string for paramList\n");ADM_assert(0);
         }
     }

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioEncoders/lame/audioencoder_lame.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioEncoders/lame/audioencoder_lame.cpp	2009-11-12 15:40:44 UTC (rev 5468)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioEncoders/lame/audioencoder_lame.cpp	2009-11-12 18:05:39 UTC (rev 5469)
@@ -288,7 +288,8 @@
   diaElemMenu bitrate (&lameBitrate, QT_TR_NOOP ("_Bitrate:"), SZT (bitrateM),
 		       bitrateM);
   diaElemUInteger quality (PX (quality), QT_TR_NOOP ("_Quality:"), 0, 9);
-  diaElemToggle reservoir (PX (disableBitReservoir),
+  uint32_t reservoir32=lameConf.disableBitReservoir;
+  diaElemToggle reservoir (&reservoir32,
 			   QT_TR_NOOP ("_Disable reservoir:"));
 
   diaElem *elems[] = { &Mode, &bitrate,&quality, &reservoir };
@@ -296,6 +297,7 @@
   if (diaFactoryRun (QT_TR_NOOP ("LAME Configuration"), 4, elems))
     {
       lameConf.preset=(ADM_LAME_PRESET)ppreset;
+      lameConf.disableBitReservoir=reservoir32;
       return 1;
     }
   return 0;

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioEncoders/lame/lame_encoder.conf
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioEncoders/lame/lame_encoder.conf	2009-11-12 15:40:44 UTC (rev 5468)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioEncoders/lame/lame_encoder.conf	2009-11-12 18:05:39 UTC (rev 5469)
@@ -1,3 +1,3 @@
 uint32_t:preset
 uint32_t:quality
-uint32_t:disableBitReservoir
+bool:disableBitReservoir

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioEncoders/lame/lame_encoder.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioEncoders/lame/lame_encoder.h	2009-11-12 15:40:44 UTC (rev 5468)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioEncoders/lame/lame_encoder.h	2009-11-12 18:05:39 UTC (rev 5469)
@@ -4,7 +4,7 @@
 typedef struct {
    uint32_t preset;
    uint32_t quality;
-   uint32_t disableBitReservoir;
+   bool disableBitReservoir;
 }lame_encoder;
 #endif //lame_encoder
 //EOF

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioEncoders/lame/lame_encoder_desc.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioEncoders/lame/lame_encoder_desc.cpp	2009-11-12 15:40:44 UTC (rev 5468)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioEncoders/lame/lame_encoder_desc.cpp	2009-11-12 18:05:39 UTC (rev 5469)
@@ -2,6 +2,6 @@
 const ADM_paramList lame_encoder_param[]={
  {"preset",offsetof( lame_encoder,preset),"uint32_t",ADM_param_uint32_t},
  {"quality",offsetof( lame_encoder,quality),"uint32_t",ADM_param_uint32_t},
- {"disableBitReservoir",offsetof( lame_encoder,disableBitReservoir),"uint32_t",ADM_param_uint32_t},
+ {"disableBitReservoir",offsetof( lame_encoder,disableBitReservoir),"bool",ADM_param_bool},
 {NULL,0,NULL}
 };



From mean at mail.berlios.de  Fri Nov 13 09:20:12 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Fri, 13 Nov 2009 09:20:12 +0100
Subject: [Avidemux-svn-commit] r5470 -
	branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreImage/src
Message-ID: <200911130820.nAD8KCK0003560@sheep.berlios.de>

Author: mean
Date: 2009-11-13 09:20:12 +0100 (Fri, 13 Nov 2009)
New Revision: 5470

Modified:
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreImage/src/CMakeLists.txt
Log:
[coreImage] Solve win32 dependencies

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreImage/src/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreImage/src/CMakeLists.txt	2009-11-12 18:05:39 UTC (rev 5469)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreImage/src/CMakeLists.txt	2009-11-13 08:20:12 UTC (rev 5470)
@@ -25,6 +25,6 @@
 	TARGET_LINK_LIBRARIES(ADM_coreImage6 -Wl,-read_only_relocs,suppress)
 ENDIF (APPLE)
 
-TARGET_LINK_LIBRARIES(ADM_coreImage6 ADM_core6 ADM_coreUI6 ADM_libswscale6 ADM_libpostproc6)
+TARGET_LINK_LIBRARIES(ADM_coreImage6 ADM_core6 ADM_coreUI6 ADM_libswscale6 ADM_libpostproc6 ADM_coreUtils6)
 TARGET_LINK_LIBRARIES(ADM_coreImage6 ADM_libavcodec6 ADM_libavutil6 )
 ADM_INSTALL_LIB(ADM_coreImage6)



From mean at mail.berlios.de  Fri Nov 13 09:32:56 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Fri, 13 Nov 2009 09:32:56 +0100
Subject: [Avidemux-svn-commit] r5471 -
	branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoEncoder/include
Message-ID: <200911130832.nAD8Wu5K004162@sheep.berlios.de>

Author: mean
Date: 2009-11-13 09:32:56 +0100 (Fri, 13 Nov 2009)
New Revision: 5471

Modified:
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoEncoder/include/ADM_coreVideoEncoder.h
Log:
[CoreVideoEncoder] Remove warning

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoEncoder/include/ADM_coreVideoEncoder.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoEncoder/include/ADM_coreVideoEncoder.h	2009-11-13 08:20:12 UTC (rev 5470)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoEncoder/include/ADM_coreVideoEncoder.h	2009-11-13 08:32:56 UTC (rev 5471)
@@ -58,4 +58,5 @@
 bool                  videoEncoder6Configure(void);
 bool                  videoEncoder6_SetCurrentEncoder(uint32_t index);
 
-#endif
\ No newline at end of file
+#endif
+



From mean at mail.berlios.de  Fri Nov 13 09:32:57 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Fri, 13 Nov 2009 09:32:57 +0100
Subject: [Avidemux-svn-commit] r5472 -
	branches/avidemux_2.6_branch_mean/cmake
Message-ID: <200911130832.nAD8WvTC004172@sheep.berlios.de>

Author: mean
Date: 2009-11-13 09:32:57 +0100 (Fri, 13 Nov 2009)
New Revision: 5472

Modified:
   branches/avidemux_2.6_branch_mean/cmake/vf_plugin.cmake
Log:
[VideoFilter] Link to coreUtils

Modified: branches/avidemux_2.6_branch_mean/cmake/vf_plugin.cmake
===================================================================
--- branches/avidemux_2.6_branch_mean/cmake/vf_plugin.cmake	2009-11-13 08:32:56 UTC (rev 5471)
+++ branches/avidemux_2.6_branch_mean/cmake/vf_plugin.cmake	2009-11-13 08:32:57 UTC (rev 5472)
@@ -12,6 +12,6 @@
 
 MACRO(INSTALL_VIDEO_FILTER _lib)
 	INSTALL(TARGETS ${_lib} DESTINATION "${VF_PLUGIN_DIR}")
-	TARGET_LINK_LIBRARIES(${_lib} ADM_core6 ADM_coreUI6 ADM_coreVideoFilter6 ADM_coreImage6)
+	TARGET_LINK_LIBRARIES(${_lib} ADM_core6 ADM_coreUI6 ADM_coreVideoFilter6 ADM_coreImage6 ADM_coreUtils6)
 ENDMACRO(INSTALL_VIDEO_FILTER)
 



From mean at mail.berlios.de  Fri Nov 13 14:35:10 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Fri, 13 Nov 2009 14:35:10 +0100
Subject: [Avidemux-svn-commit] r5473 - in
	branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers:
	muxerAvi muxerDummy muxerFlv muxerMp4 muxerffPS muxerffTS
Message-ID: <200911131335.nADDZAwY012668@sheep.berlios.de>

Author: mean
Date: 2009-11-13 14:35:10 +0100 (Fri, 13 Nov 2009)
New Revision: 5473

Added:
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerMp4/mp4_muxer.conf
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerMp4/mp4_muxer.h
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerMp4/mp4_muxer_desc.cpp
Modified:
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerAvi/muxerAviPlugin.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerDummy/ADM_dummyPlugin.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerFlv/muxerFlvPlugin.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerMp4/muxerMP4.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerMp4/muxerMP4.h
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerMp4/muxerMP4Config.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerMp4/muxerMP4Plugin.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerffPS/muxerffPSPlugin.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerffTS/muxerffTSPlugin.cpp
Log:
[MP4Muxer] Use new conf scheme

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerAvi/muxerAviPlugin.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerAvi/muxerAviPlugin.cpp	2009-11-13 08:32:57 UTC (rev 5472)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerAvi/muxerAviPlugin.cpp	2009-11-13 13:35:10 UTC (rev 5473)
@@ -26,7 +26,7 @@
                     "AVI muxer plugin (c) Mean 2008",
                     "AVI Muxer", // DIsplay name
                     AviConfigure,
-                    &muxerConfig,
-                    sizeof(muxerConfig)
+                    NULL,
+                    NULL
                 );
 

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerDummy/ADM_dummyPlugin.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerDummy/ADM_dummyPlugin.cpp	2009-11-13 08:32:57 UTC (rev 5472)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerDummy/ADM_dummyPlugin.cpp	2009-11-13 13:35:10 UTC (rev 5473)
@@ -26,8 +26,8 @@
                     "dummy",    // Internal name
                     "dummy2 muxer plugin (c) Mean 2008",
                     "Dummy Muxer", // Display name
-                    confDummy,
-                    NULL,
-                    0
+                    confDummy, //conf func
+                    NULL, // template
+                    NULL  // conf data
                 );
 

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerFlv/muxerFlvPlugin.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerFlv/muxerFlvPlugin.cpp	2009-11-13 08:32:57 UTC (rev 5472)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerFlv/muxerFlvPlugin.cpp	2009-11-13 13:35:10 UTC (rev 5473)
@@ -26,7 +26,7 @@
                     "FLV muxer plugin (c) Mean 2008",
                     "FLV Muxer", // DIsplay name
                     flvConfigure,
-                    &muxerConfig,
-                    sizeof(muxerConfig)
+                    NULL,
+                    NULL
                 );
 

Added: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerMp4/mp4_muxer.conf
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerMp4/mp4_muxer.conf	2009-11-13 08:32:57 UTC (rev 5472)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerMp4/mp4_muxer.conf	2009-11-13 13:35:10 UTC (rev 5473)
@@ -0,0 +1,2 @@
+uint32_t:muxerType
+bool:useAlternateMp3Tag

Added: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerMp4/mp4_muxer.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerMp4/mp4_muxer.h	2009-11-13 08:32:57 UTC (rev 5472)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerMp4/mp4_muxer.h	2009-11-13 13:35:10 UTC (rev 5473)
@@ -0,0 +1,9 @@
+// Automatically generated, do not edit!
+#ifndef ADM_mp4_muxer_CONF_H
+#define ADM_mp4_muxer_CONF_H
+typedef struct {
+   uint32_t muxerType;
+   bool useAlternateMp3Tag;
+}mp4_muxer;
+#endif //mp4_muxer
+//EOF

Added: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerMp4/mp4_muxer_desc.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerMp4/mp4_muxer_desc.cpp	2009-11-13 08:32:57 UTC (rev 5472)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerMp4/mp4_muxer_desc.cpp	2009-11-13 13:35:10 UTC (rev 5473)
@@ -0,0 +1,6 @@
+// Automatically generated, do not edit!
+const ADM_paramList mp4_muxer_param[]={
+ {"muxerType",offsetof( mp4_muxer,muxerType),"uint32_t",ADM_param_uint32_t},
+ {"useAlternateMp3Tag",offsetof( mp4_muxer,useAlternateMp3Tag),"bool",ADM_param_bool},
+{NULL,0,NULL}
+};

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerMp4/muxerMP4.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerMp4/muxerMP4.cpp	2009-11-13 08:32:57 UTC (rev 5472)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerMp4/muxerMP4.cpp	2009-11-13 13:35:10 UTC (rev 5473)
@@ -28,7 +28,7 @@
 #define aprintf printf
 #endif
 
-M4MUXERCONFIG muxerConfig=
+mp4_muxer muxerConfig=
 {
     MP4_MUXER_MP4,
     true

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerMp4/muxerMP4.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerMp4/muxerMP4.h	2009-11-13 08:32:57 UTC (rev 5472)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerMp4/muxerMP4.h	2009-11-13 13:35:10 UTC (rev 5473)
@@ -25,14 +25,9 @@
     MP4_MUXER_PSP
 }MP4_MUXER_TYPE;
 
-typedef struct
-{
-    MP4_MUXER_TYPE muxerType;
-    uint32_t       useAlternateMP3Tag;
-}M4MUXERCONFIG;
+#include "mp4_muxer.h"
+extern mp4_muxer muxerConfig;
 
-extern M4MUXERCONFIG muxerConfig;
-
 class muxerMP4 : public muxerFFmpeg
 {
 protected:

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerMp4/muxerMP4Config.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerMp4/muxerMP4Config.cpp	2009-11-13 08:32:57 UTC (rev 5472)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerMp4/muxerMP4Config.cpp	2009-11-13 13:35:10 UTC (rev 5473)
@@ -21,7 +21,7 @@
 bool mp4Configure(void)
 {
         uint32_t fmt=(uint32_t)muxerConfig.muxerType;
-        uint32_t alt=(uint32_t)muxerConfig.useAlternateMP3Tag;
+        uint32_t alt=(uint32_t)muxerConfig.useAlternateMp3Tag;
         diaMenuEntry format[]={{MP4_MUXER_MP4,"MP4"},{MP4_MUXER_PSP,"PSP"}};
         diaElemMenu  menuFormat(&fmt,"Muxing Format",2,format,"");
         diaElemToggle alternate(&alt,"Use alternate MP3 tag");
@@ -30,7 +30,7 @@
         if( diaFactoryRun(("MP4 Muxer"),2,tabs))
         {
             muxerConfig.muxerType=(MP4_MUXER_TYPE)fmt;
-            muxerConfig.useAlternateMP3Tag=alt;
+            muxerConfig.useAlternateMp3Tag=alt;
             return true;
         }
         return false;

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerMp4/muxerMP4Plugin.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerMp4/muxerMP4Plugin.cpp	2009-11-13 08:32:57 UTC (rev 5472)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerMp4/muxerMP4Plugin.cpp	2009-11-13 13:35:10 UTC (rev 5473)
@@ -18,15 +18,16 @@
 #include "muxerMP4.h"
 
 #include "fourcc.h"
+#include "mp4_muxer_desc.cpp"
  bool mp4Configure(void);
 
 ADM_MUXER_BEGIN( muxerMP4,
                     1,0,0,
                     "MP4",    // Internal name
-                    "MP4 muxer plugin (c) Mean 2008",
+                    "MP4 muxer plugin (c) Mean 2009",
                     "MP4 Muxer", // DIsplay name
-                    mp4Configure,
-                    &muxerConfig,
-                    sizeof(muxerConfig)
+                    mp4Configure, // configure function
+                    mp4_muxer_param, // Template
+                    &muxerConfig  // conf
                 );
 

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerffPS/muxerffPSPlugin.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerffPS/muxerffPSPlugin.cpp	2009-11-13 08:32:57 UTC (rev 5472)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerffPS/muxerffPSPlugin.cpp	2009-11-13 13:35:10 UTC (rev 5473)
@@ -26,7 +26,7 @@
                     "ffMpeg PS muxer plugin (c) Mean 2009",
                     "ffPS Muxer", // DIsplay name
                     ffPSConfigure,
-                    &psMuxerConfig,
-                    sizeof(psMuxerConfig)
+                    NULL,
+                    NULL
                 );
 

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerffTS/muxerffTSPlugin.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerffTS/muxerffTSPlugin.cpp	2009-11-13 08:32:57 UTC (rev 5472)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerffTS/muxerffTSPlugin.cpp	2009-11-13 13:35:10 UTC (rev 5473)
@@ -26,7 +26,7 @@
                     "ffMpeg PS muxer plugin (c) Mean 2009",
                     "ffTS Muxer", // DIsplay name
                     ffTSConfigure,
-                    &tsMuxerConfig,
-                    sizeof(tsMuxerConfig)
+                    NULL,
+                    NULL
                 );
 



From mean at mail.berlios.de  Fri Nov 13 14:35:13 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Fri, 13 Nov 2009 14:35:13 +0100
Subject: [Avidemux-svn-commit] r5474 - in
	branches/avidemux_2.6_branch_mean/avidemux/common: ADM_editor
	ADM_script
Message-ID: <200911131335.nADDZDcS012720@sheep.berlios.de>

Author: mean
Date: 2009-11-13 14:35:12 +0100 (Fri, 13 Nov 2009)
New Revision: 5474

Modified:
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edLoadSave.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script/ADM_JSAvidemux.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script/ADM_JSAvidemuxAudio.cpp
Log:
[Editor] Load/Save new conf scheme for muxer, factorize code

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edLoadSave.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edLoadSave.cpp	2009-11-13 13:35:10 UTC (rev 5473)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edLoadSave.cpp	2009-11-13 13:35:12 UTC (rev 5474)
@@ -30,7 +30,8 @@
 #include "ADM_paramList.h"
 #include "prefs.h"
 #include "avi_vars.h"
-
+#include "ADM_muxerProto.h"
+#include "GUI_ui.h"
 // Ugly but sooo usefull
 extern uint32_t frameStart,frameEnd;
 static uint32_t edFrameStart,edFrameEnd;
@@ -240,11 +241,29 @@
         if (audioGetDrc()) qfprintf(fd,"app.audio.drc=true;\n");
         
 #endif        
-  // Mixer
-
-  // container
-        
-  qfprintf(fd,"app.setContainer(\"%s\");\n",getCurrentContainerAsString());
+  // -------- Muxer -----------------------
+        CONFcouple *containerConf=NULL;
+        uint32_t index=UI_GetCurrentFormat();
+        const char *containerName=ADM_mx_getName(index);
+        ADM_mx_getExtraConf( index,&containerConf);
+        if(containerConf==NULL)
+            qfprintf(fd,"app.setContainer(\"%s\");\n",containerName); 
+        else
+        {
+            qfprintf(fd,"app.setContainer(\"%s\"", containerName); 
+            uint32_t n=containerConf->getSize();
+            
+            for(int i=0;i<n;i++)
+            {
+                char *name,*value;
+                containerConf->getInternalName(i,&name,&value);
+                qfprintf(fd,",\"%s=%s\"",name,value);
+            }
+            qfprintf(fd,");\n");
+            delete couples;
+            couples=NULL;
+        }
+  // -------- /Muxer -----------------------
   if(outputname)
   {
         char *o=ADM_cleanupPath(outputname);

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script/ADM_JSAvidemux.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script/ADM_JSAvidemux.cpp	2009-11-13 13:35:10 UTC (rev 5473)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script/ADM_JSAvidemux.cpp	2009-11-13 13:35:12 UTC (rev 5474)
@@ -1,15 +1,18 @@
-// // C++ Interface: Spider Monkey interface
-//
-// Description: 
-//
-//
-// Author: Anish Mistry
-//      Some modification by mean
-//
-// Copyright: See COPYING file that comes with this distribution
-//
-//
+/**
+    \file ADM_JSAvidemux
+    \brief SpiderMonkey<->Avidemux interface for avidemux class
+    \author Anish Mistry, modified by mean & gruntster also
 
+*/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
 #include <math.h>
 
 #include "ADM_default.h"
@@ -17,8 +20,8 @@
 #include "avi_vars.h"
 #include "DIA_coreToolkit.h"
 #include "ADM_commonUI/GUI_ui.h"
+#include "ADM_muxerProto.h"
 
-
 #include "ADM_debugID.h"
 #define MODULE_NAME MODULE_SCRIPT
 #include "ADM_debug.h"
@@ -36,9 +39,10 @@
 extern uint8_t addFile(char *name);
 
 bool           A_setContainer(const char *cont);
-const char     *getCurrentContainerAsString(void);
-extern int     ADM_MuxerIndexFromName(const char *name);
 
+
+bool jsArgToConfCouple(int nb,CONFcouple **conf,  jsval *argv);
+
 JSPropertySpec ADM_JSAvidemux::avidemux_properties[] = 
 { 
 
@@ -523,20 +527,34 @@
         leaveLock();
         return JS_TRUE;
 }
+/**
+    \fn setContainer
+bool jsArgToConfCouple(int nb,CONFcouple **conf,  jsval *argv);
+*/
 JSBool ADM_JSAvidemux::setContainer(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval)
 {
 
-ADM_JSAvidemux *p = (ADM_JSAvidemux *)JS_GetPrivate(cx, obj);
+        ADM_JSAvidemux *p = (ADM_JSAvidemux *)JS_GetPrivate(cx, obj);
         // default return value
         *rval = BOOLEAN_TO_JSVAL(false);
-        if(argc != 1)
+        if(argc < 1)
                 return JS_FALSE;
         if(JSVAL_IS_STRING(argv[0]) == false)
                 return JS_FALSE;
         char *str = JS_GetStringBytes(JSVAL_TO_STRING(argv[0]));
         enterLock();
         if(A_setContainer(str))
-                *rval = BOOLEAN_TO_JSVAL( true);
+        {
+            CONFcouple *c;
+            jsArgToConfCouple(argc-1,&c,argv+1);
+            int idx=ADM_MuxerIndexFromName(str);
+            if(idx!=-1)
+            {
+                *rval = BOOLEAN_TO_JSVAL( ADM_mx_setExtraConf(idx,c));
+            }
+        }
+        /* Now lockup extra params....*/
+        
         leaveLock();
         return JS_TRUE;
 }
@@ -555,15 +573,4 @@
     UI_SetCurrentFormat(idx);
     return true;
 }
-/**
-    \fn getCurrentContainerAsString
-    \brief
-*/
-extern const char *ADM_mx_getName(uint32_t i);
-const char *getCurrentContainerAsString(void)
-{
-        uint32_t index=UI_GetCurrentFormat();
-    
-        return ADM_mx_getName(index);
-}
 //EOF

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script/ADM_JSAvidemuxAudio.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script/ADM_JSAvidemuxAudio.cpp	2009-11-13 13:35:10 UTC (rev 5473)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script/ADM_JSAvidemuxAudio.cpp	2009-11-13 13:35:12 UTC (rev 5474)
@@ -24,12 +24,16 @@
 #include "ADM_audioFilter/include/ADM_audioFilterInterface.h"
 #include "audioEncoderApi.h"
 
+
+
 extern int A_audioSave(char *name);
 extern int A_loadAC3 (char *name);
 extern int A_loadMP3 (char *name);
 extern int A_loadWave (char *name);
 extern void HandleAction(Action act);
 
+bool jsArgToConfCouple(int nb,CONFcouple **conf,  jsval *argv);
+
 JSPropertySpec ADM_JSAvidemuxAudio::avidemuxaudio_properties[] = 
 { 
 
@@ -359,6 +363,9 @@
 }// end Reset
 // app.audio.codec("lame",128,8,"00 00 00 00 01 00 00 00 ");
 extern uint8_t mk_hex (uint8_t a, uint8_t b);
+/**
+    \fn Codec
+*/
 JSBool ADM_JSAvidemuxAudio::Codec(JSContext *cx, JSObject *obj, uintN argc, 
                                       jsval *argv, jsval *rval)
 {// begin Codec
@@ -382,45 +389,59 @@
         }
         else
         {
-        // begin set bitrate
-        uint32_t bitrate=JSVAL_TO_INT(argv[1]);
-        // Construct couples
-        CONFcouple *c=NULL;
-        if(argc>2)
-        {
-            int nb=argc-2;
-            c=new CONFcouple(nb);
-            for(int i=0;i<nb;i++)
+            // begin set bitrate
+            uint32_t bitrate=JSVAL_TO_INT(argv[1]);
+            // Construct couples
+            CONFcouple *c=NULL;
+            if(argc>2)
             {
-                char *param = JS_GetStringBytes(JSVAL_TO_STRING(argv[2+i]));
-                char *dupe=   ADM_strdup(param);
-                char *name,*value;
-                // dupe is in the form name=value
-                name=dupe;
-                value=name;
-                char *tail=dupe+strlen(dupe);
-                while(value<tail)
-                {
-                    if(*value=='=') 
-                        {
-                            *value=0;
-                            value++;
-                            break;
-                        }
-                    value++;
-                }
-                c->setInternalName(name,value);
-                //printf("%s -> [%s,%s]\n",param,name,value);
-                ADM_dezalloc(dupe);
+                int nb=argc-2;
+                jsArgToConfCouple( nb,&c,  argv+2);
             }
 
+            *rval = BOOLEAN_TO_JSVAL(setAudioExtraConf(bitrate,c));
         }
-
-            *rval = BOOLEAN_TO_JSVAL(setAudioExtraConf(bitrate,c));
-        }// end set bitrate
+        // end set bitrate
         leaveLock();
         return JS_TRUE;
 }// end Codec
+/**
+    \fn jsArgToConfCouple
+    \brief Convert js args to confcouple
+
+*/
+bool jsArgToConfCouple(int nb,CONFcouple **conf,  jsval *argv)
+{
+  *conf=NULL;
+  if(!nb) return true;
+  CONFcouple *c=new CONFcouple(nb);
+  *conf=c;
+    for(int i=0;i<nb;i++)
+    {
+        char *param = JS_GetStringBytes(JSVAL_TO_STRING(argv[i]));
+        char *dupe=   ADM_strdup(param);
+        char *name,*value;
+        // dupe is in the form name=value
+        name=dupe;
+        value=name;
+        char *tail=dupe+strlen(dupe);
+        while(value<tail)
+        {
+            if(*value=='=') 
+                {
+                    *value=0;
+                    value++;
+                    break;
+                }
+            value++;
+        }
+        c->setInternalName(name,value);
+        //printf("%s -> [%s,%s]\n",param,name,value);
+        ADM_dezalloc(dupe);
+    }
+    return true;
+}
+
 JSBool ADM_JSAvidemuxAudio::getNbTracks(JSContext *cx, JSObject *obj, uintN argc, 
                                       jsval *argv, jsval *rval)
 {



From mean at mail.berlios.de  Fri Nov 13 14:35:16 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Fri, 13 Nov 2009 14:35:16 +0100
Subject: [Avidemux-svn-commit] r5475 - in
	branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreMuxer:
	include src
Message-ID: <200911131335.nADDZGCB012743@sheep.berlios.de>

Author: mean
Date: 2009-11-13 14:35:16 +0100 (Fri, 13 Nov 2009)
New Revision: 5475

Added:
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreMuxer/include/ADM_muxerProto.h
Modified:
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreMuxer/include/ADM_muxerInternal.h
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreMuxer/src/ADM_dynaMuxer.cpp
Log:
[Muxer] export new muxing configuration scheme, same as for audio

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreMuxer/include/ADM_muxerInternal.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreMuxer/include/ADM_muxerInternal.h	2009-11-13 13:35:12 UTC (rev 5474)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreMuxer/include/ADM_muxerInternal.h	2009-11-13 13:35:16 UTC (rev 5475)
@@ -16,9 +16,11 @@
 #ifndef  ADM_muxerInternal_H
 #define  ADM_muxerInternal_H
 
-#define ADM_MUXER_API_VERSION 2
+#define ADM_MUXER_API_VERSION 3
+#include <stddef.h>
 #include "ADM_dynamicLoading.h"
 #include "ADM_muxer.h"
+#include "ADM_paramList.h"
 class ADM_dynMuxer :public ADM_LibWrapper
 {
 public:
@@ -31,8 +33,8 @@
         const char    *descriptor;
         uint32_t      apiVersion;
         bool  (*configure)(void);
-        bool  (*getConfiguration)(uint32_t *len,uint8_t *data);
-        bool  (*setConfiguration)(uint32_t *len,uint8_t *data);
+        bool  (*getConfiguration)(CONFcouple **conf);
+        bool  (*setConfiguration)(CONFcouple *conf);
 
         ADM_dynMuxer(const char *file) : ADM_LibWrapper()
         {
@@ -69,7 +71,7 @@
         }
 };
 
-#define ADM_MUXER_BEGIN( Class,maj,mn,pat,name,desc,displayName,configureFunc,conf,confSize) \
+#define ADM_MUXER_BEGIN( Class,maj,mn,pat,name,desc,displayName,configureFunc,confTemplate,confVar) \
 extern "C" {\
 ADM_muxer   *create(void){ return new Class; } \
 void         destroy(ADM_muxer *h){ Class *z=(Class *)h;delete z;} \
@@ -78,14 +80,19 @@
 const char  *getName(void) {return name;} \
 const char  *getDescriptor(void) {return desc;} \
 const char  *getDisplayName(void) { return displayName;} \
-bool        getConfiguration(uint32_t *len,uint8_t **data) \
-                    {*len=confSize;*data=(uint8_t *)conf;return true;}\
-bool        setConfiguration(uint32_t *len,uint8_t *data)\
-                    {\
-                    if(*len!=confSize) return false;\
-                    if(conf) memcpy(conf,data,confSize);\
-                    return true;} \
- bool  configure(void) {return configureFunc();}\
+bool        getConfiguration(CONFcouple **conf) \
+{\
+         if(confTemplate==NULL) {*conf=NULL;return true;} \
+         return ADM_paramSave(conf,confTemplate,confVar); \
+}\
+bool        setConfiguration(CONFcouple *conf)\
+{\
+                  return ADM_paramLoad(conf,confTemplate,confVar); \
+} \
+ bool  configure(void) \
+{ \
+ if(configureFunc==NULL) return true;\
+ return configureFunc();}\
 }
 
 #endif

Added: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreMuxer/include/ADM_muxerProto.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreMuxer/include/ADM_muxerProto.h	2009-11-13 13:35:12 UTC (rev 5474)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreMuxer/include/ADM_muxerProto.h	2009-11-13 13:35:16 UTC (rev 5475)
@@ -0,0 +1,32 @@
+/***************************************************************************
+    \file ADM_muxerProto.h
+    \brief Prototypes for muxers plugins functions
+    \author Mean (C) 2009, fixounet at free.fr
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+#ifndef ADM_MUXER_PROTO_H
+#define ADM_MUXER_PROTO_H
+class ADM_muxer;
+class CONFcouple;
+bool        ADM_mux_configure(int index);
+uint32_t    ADM_mx_getNbMuxers(void);
+const char *ADM_mx_getDisplayName(uint32_t i);
+const char *ADM_mx_getName(uint32_t i);
+bool        ADM_mx_getMuxerInfo(int filter, const char **name, uint32_t *major,uint32_t *minor,uint32_t *patch);
+bool        ADM_mx_getExtraConf(int index,CONFcouple **c);
+bool        ADM_mx_setExtraConf(int index,CONFcouple *c);
+int         ADM_MuxerIndexFromName(const char *name);
+ADM_muxer   *ADM_MuxerSpawn(const char *name);
+ADM_muxer   *ADM_MuxerSpawnFromIndex(int index);
+
+
+
+#endif

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreMuxer/src/ADM_dynaMuxer.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreMuxer/src/ADM_dynaMuxer.cpp	2009-11-13 13:35:12 UTC (rev 5474)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreMuxer/src/ADM_dynaMuxer.cpp	2009-11-13 13:35:16 UTC (rev 5475)
@@ -16,6 +16,7 @@
 #include <vector>
 #include "ADM_default.h"
 #include "ADM_muxerInternal.h"
+#include "ADM_muxerProto.h"
 
 void ADM_muxersCleanup(void);
 ADM_muxer *ADM_muxerSpawn(uint32_t magic,const char *name);
@@ -119,6 +120,38 @@
 	return 1;
 }
 /**
+    \fn ADM_mx_getExtraConf
+    \brief Retrieve extra configuration from current muxer
+*/
+bool ADM_mx_getExtraConf(int index,CONFcouple **c)
+{
+    *c=NULL;
+    if(index>=ListOfMuxers.size())
+    {
+        ADM_error("Given index exceeds muxer list\n",index);
+        return false;
+    }
+    ADM_dynMuxer *mux=ListOfMuxers[index];
+    return mux->getConfiguration(c);
+    
+}
+/**
+    \fn ADM_mx_setExtraConf
+    \brief Set extra configuration from current muxer
+*/
+bool ADM_mx_setExtraConf(int index,CONFcouple *c)
+{
+    if(!c) return true;
+    if(index>=ListOfMuxers.size())
+    {
+        ADM_error("Given index exceeds muxer list\n",index);
+        return false;
+    }
+    ADM_dynMuxer *mux=ListOfMuxers[index];
+    return mux->setConfiguration(c);
+    
+}
+/**
         \fn ADM_MuxersCleanup
         \brief Current device is no longer used, delete
 */
@@ -174,6 +207,8 @@
     ADM_assert(index<ListOfMuxers.size());
     return ListOfMuxers[index]->createmuxer();
 }
+
+
 //___________________________________________
 extern "C"
 {



From mean at mail.berlios.de  Fri Nov 13 14:35:18 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Fri, 13 Nov 2009 14:35:18 +0100
Subject: [Avidemux-svn-commit] r5476 -
	branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_gui
Message-ID: <200911131335.nADDZIEm012753@sheep.berlios.de>

Author: mean
Date: 2009-11-13 14:35:18 +0100 (Fri, 13 Nov 2009)
New Revision: 5476

Modified:
   branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_gui/Q_gui2.cpp
Log:
[QGui] Use ADM_muserProto.h rather than local declaration

Modified: branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_gui/Q_gui2.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_gui/Q_gui2.cpp	2009-11-13 13:35:16 UTC (rev 5475)
+++ branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_gui/Q_gui2.cpp	2009-11-13 13:35:18 UTC (rev 5476)
@@ -30,7 +30,9 @@
 #include "avi_vars.h"
 
 #include "ADM_render/GUI_renderInternal.h"
-#include "ADM_coreVideoEncoderInternal.h"
+#include "ADM_coreVideoEncoderInternal.h"
+#include "ADM_muxerProto.h"
+
 extern int global_argc;
 extern char **global_argv;
 
@@ -52,9 +54,6 @@
 extern char *actual_workbench_file;
 extern void FileSel_ReadWrite(SELFILE_CB *cb, int rw, const char *name, const char *actual_workbench_file);
 
-uint32_t ADM_mx_getNbMuxers(void);
-const char *ADM_mx_getName(uint32_t i);
-
 
 int SliderIsShifted=0;
 static void setupMenus(void);



From mean at mail.berlios.de  Fri Nov 13 14:35:22 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Fri, 13 Nov 2009 14:35:22 +0100
Subject: [Avidemux-svn-commit] r5478 - in
	branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers:
	muxerAvi muxerffTS
Message-ID: <200911131335.nADDZM41012773@sheep.berlios.de>

Author: mean
Date: 2009-11-13 14:35:21 +0100 (Fri, 13 Nov 2009)
New Revision: 5478

Added:
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerAvi/avi_muxer_desc.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerffTS/ts_muxer.conf
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerffTS/ts_muxer.h
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerffTS/ts_muxer_desc.cpp
Log:
[Muxer] Update all muxer to use the new configuration scheme + update javascript

Added: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerAvi/avi_muxer_desc.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerAvi/avi_muxer_desc.cpp	2009-11-13 13:35:19 UTC (rev 5477)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerAvi/avi_muxer_desc.cpp	2009-11-13 13:35:21 UTC (rev 5478)
@@ -0,0 +1,5 @@
+// Automatically generated, do not edit!
+const ADM_paramList avi_muxer_param[]={
+ {"odmlType",offsetof( avi_muxer,odmlType),"uint32_t",ADM_param_uint32_t},
+{NULL,0,NULL}
+};

Added: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerffTS/ts_muxer.conf
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerffTS/ts_muxer.conf	2009-11-13 13:35:19 UTC (rev 5477)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerffTS/ts_muxer.conf	2009-11-13 13:35:21 UTC (rev 5478)
@@ -0,0 +1 @@
+bool:acceptNonCompliant

Added: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerffTS/ts_muxer.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerffTS/ts_muxer.h	2009-11-13 13:35:19 UTC (rev 5477)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerffTS/ts_muxer.h	2009-11-13 13:35:21 UTC (rev 5478)
@@ -0,0 +1,8 @@
+// Automatically generated, do not edit!
+#ifndef ADM_ts_muxer_CONF_H
+#define ADM_ts_muxer_CONF_H
+typedef struct {
+   bool acceptNonCompliant;
+}ts_muxer;
+#endif //ts_muxer
+//EOF

Added: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerffTS/ts_muxer_desc.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerffTS/ts_muxer_desc.cpp	2009-11-13 13:35:19 UTC (rev 5477)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerffTS/ts_muxer_desc.cpp	2009-11-13 13:35:21 UTC (rev 5478)
@@ -0,0 +1,5 @@
+// Automatically generated, do not edit!
+const ADM_paramList ts_muxer_param[]={
+ {"acceptNonCompliant",offsetof( ts_muxer,acceptNonCompliant),"bool",ADM_param_bool},
+{NULL,0,NULL}
+};



From mean at mail.berlios.de  Fri Nov 13 14:35:20 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Fri, 13 Nov 2009 14:35:20 +0100
Subject: [Avidemux-svn-commit] r5477 - in branches/avidemux_2.6_branch_mean:
	avidemux/common/ADM_editor avidemux_plugins/ADM_muxers/muxerAvi
	avidemux_plugins/ADM_muxers/muxerFlv
	avidemux_plugins/ADM_muxers/muxerMkv
	avidemux_plugins/ADM_muxers/muxerffPS
	avidemux_plugins/ADM_muxers/muxerffTS
Message-ID: <200911131335.nADDZKlX012763@sheep.berlios.de>

Author: mean
Date: 2009-11-13 14:35:19 +0100 (Fri, 13 Nov 2009)
New Revision: 5477

Added:
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerAvi/avi_muxer.conf
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerAvi/avi_muxer.h
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerffPS/ps_muxer.conf
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerffPS/ps_muxer.h
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerffPS/ps_muxer_desc.cpp
Modified:
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edLoadSave.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerAvi/muxerAvi.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerAvi/muxerAvi.h
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerAvi/muxerAviPlugin.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerAvi/op_aviwrite.hxx
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerFlv/muxerFlv.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerFlv/muxerFlv.h
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerFlv/muxerFlvConfig.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerMkv/muxerMkvPlugin.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerffPS/muxerffPS.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerffPS/muxerffPS.h
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerffPS/muxerffPSPlugin.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerffTS/muxerffTS.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerffTS/muxerffTS.h
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerffTS/muxerffTSPlugin.cpp
Log:
[Muxer] Update all muxer to use the new configuration scheme + update javascript

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edLoadSave.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edLoadSave.cpp	2009-11-13 13:35:18 UTC (rev 5476)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edLoadSave.cpp	2009-11-13 13:35:19 UTC (rev 5477)
@@ -187,11 +187,9 @@
 #endif
    CONFcouple *couples=NULL;
    getAudioExtraConf(&bitrate,&couples);
-   if(couples==NULL)
-    qfprintf(fd,"app.audio.codec(\"%s\",%d);\n",audioCodecGetName(),bitrate); 
-   else
+    qfprintf(fd,"app.audio.codec(\"%s\",%d",audioCodecGetName(),bitrate); 
+   if(couples)
     {
-        qfprintf(fd,"app.audio.codec(\"%s\",%d", audioCodecGetName(),bitrate); 
         uint32_t n=couples->getSize();
         
         for(int i=0;i<n;i++)
@@ -200,10 +198,10 @@
             couples->getInternalName(i,&name,&value);
             qfprintf(fd,",\"%s=%s\"",name,value);
         }
-        qfprintf(fd,");\n");
         delete couples;
         couples=NULL;
     }
+    qfprintf(fd,");\n");
    
 #if 0   
    //qfprintf(fd,"app.audio.process=%s;\n",truefalse[audioProcessMode()]);
@@ -242,15 +240,15 @@
         
 #endif        
   // -------- Muxer -----------------------
+        qfprintf(fd,"\n//** Muxer **\n");
         CONFcouple *containerConf=NULL;
         uint32_t index=UI_GetCurrentFormat();
         const char *containerName=ADM_mx_getName(index);
         ADM_mx_getExtraConf( index,&containerConf);
-        if(containerConf==NULL)
-            qfprintf(fd,"app.setContainer(\"%s\");\n",containerName); 
-        else
+        
+        qfprintf(fd,"app.setContainer(\"%s\"",containerName); 
+        if(containerConf)
         {
-            qfprintf(fd,"app.setContainer(\"%s\"", containerName); 
             uint32_t n=containerConf->getSize();
             
             for(int i=0;i<n;i++)
@@ -259,10 +257,11 @@
                 containerConf->getInternalName(i,&name,&value);
                 qfprintf(fd,",\"%s=%s\"",name,value);
             }
-            qfprintf(fd,");\n");
+         
             delete couples;
             couples=NULL;
         }
+        qfprintf(fd,");\n");
   // -------- /Muxer -----------------------
   if(outputname)
   {

Added: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerAvi/avi_muxer.conf
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerAvi/avi_muxer.conf	2009-11-13 13:35:18 UTC (rev 5476)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerAvi/avi_muxer.conf	2009-11-13 13:35:19 UTC (rev 5477)
@@ -0,0 +1 @@
+uint32_t:odmlType

Added: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerAvi/avi_muxer.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerAvi/avi_muxer.h	2009-11-13 13:35:18 UTC (rev 5476)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerAvi/avi_muxer.h	2009-11-13 13:35:19 UTC (rev 5477)
@@ -0,0 +1,8 @@
+// Automatically generated, do not edit!
+#ifndef ADM_avi_muxer_CONF_H
+#define ADM_avi_muxer_CONF_H
+typedef struct {
+   uint32_t odmlType;
+}avi_muxer;
+#endif //avi_muxer
+//EOF

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerAvi/muxerAvi.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerAvi/muxerAvi.cpp	2009-11-13 13:35:18 UTC (rev 5476)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerAvi/muxerAvi.cpp	2009-11-13 13:35:19 UTC (rev 5477)
@@ -36,7 +36,7 @@
 #define aprintf printf
 #endif
 
-AVIMUXERCONFIG muxerConfig=
+avi_muxer muxerConfig=
 {
     HIDDEN
 };

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerAvi/muxerAvi.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerAvi/muxerAvi.h	2009-11-13 13:35:18 UTC (rev 5476)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerAvi/muxerAvi.h	2009-11-13 13:35:19 UTC (rev 5477)
@@ -20,13 +20,10 @@
 #include "ADM_muxer.h"
 #include "op_aviwrite.hxx"
 #include "ADM_audioClock.h"
+#include "avi_muxer.h"
 
-typedef struct
-{
-        doODML_t odmlType;
-}AVIMUXERCONFIG;
 
-extern AVIMUXERCONFIG muxerConfig;
+extern avi_muxer muxerConfig;
 
 /**
     \class muxerAvi

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerAvi/muxerAviPlugin.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerAvi/muxerAviPlugin.cpp	2009-11-13 13:35:18 UTC (rev 5476)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerAvi/muxerAviPlugin.cpp	2009-11-13 13:35:19 UTC (rev 5477)
@@ -16,7 +16,7 @@
 #include "ADM_default.h"
 #include "ADM_muxerInternal.h"
 #include "muxerAvi.h"
-
+#include "avi_muxer_desc.cpp"
 #include "fourcc.h"
  extern "C" bool AviConfigure(void);
 
@@ -26,7 +26,7 @@
                     "AVI muxer plugin (c) Mean 2008",
                     "AVI Muxer", // DIsplay name
                     AviConfigure,
-                    NULL,
-                    NULL
+                    avi_muxer_param, //template
+                    &muxerConfig
                 );
 

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerAvi/op_aviwrite.hxx
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerAvi/op_aviwrite.hxx	2009-11-13 13:35:18 UTC (rev 5476)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerAvi/op_aviwrite.hxx	2009-11-13 13:35:19 UTC (rev 5477)
@@ -86,7 +86,7 @@
  class  aviWrite
  {
  protected:
-        doODML_t             doODML;
+        uint32_t             doODML;
 		FILE 		         *_out;
         ADMFile              *_file;
 		MainAVIHeader	     _mainheader;

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerFlv/muxerFlv.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerFlv/muxerFlv.cpp	2009-11-13 13:35:18 UTC (rev 5476)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerFlv/muxerFlv.cpp	2009-11-13 13:35:19 UTC (rev 5477)
@@ -28,10 +28,6 @@
 #define aprintf printf
 #endif
 
-FLVMUXERCONFIG muxerConfig=
-{
-    0
-};
 
 
 /**

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerFlv/muxerFlv.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerFlv/muxerFlv.h	2009-11-13 13:35:18 UTC (rev 5476)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerFlv/muxerFlv.h	2009-11-13 13:35:19 UTC (rev 5477)
@@ -19,14 +19,7 @@
 
 #include "ADM_muxer.h"
 #include "ADM_coreMuxerFfmpeg.h"
-typedef struct
-{
-    
-    uint32_t       dummy;
-}FLVMUXERCONFIG;
 
-extern FLVMUXERCONFIG muxerConfig;
-
 class muxerFlv : public muxerFFmpeg
 {
 protected:

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerFlv/muxerFlvConfig.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerFlv/muxerFlvConfig.cpp	2009-11-13 13:35:18 UTC (rev 5476)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerFlv/muxerFlvConfig.cpp	2009-11-13 13:35:19 UTC (rev 5477)
@@ -20,22 +20,7 @@
 #include "fourcc.h"
 bool flvConfigure(void)
 {
-/*
-        uint32_t fmt=(uint32_t)muxerConfig.muxerType;
-        uint32_t alt=(uint32_t)muxerConfig.useAlternateMP3Tag;
-        diaMenuEntry format[]={{MP4_MUXER_MP4,"MP4"},{MP4_MUXER_PSP,"PSP"}};
-        diaElemMenu  menuFormat(&fmt,"Muxing Format",2,format,"");
-        diaElemToggle alternate(&alt,"Use alternate MP3 tag");
 
-        diaElem *tabs[]={&menuFormat,&alternate};
-        if( diaFactoryRun(("MP4 Muxer"),2,tabs))
-        {
-            muxerConfig.muxerType=(MP4_MUXER_TYPE)fmt;
-            muxerConfig.useAlternateMP3Tag=alt;
-            return true;
-        }
-        return false;
-*/
     return true;
 }
 

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerMkv/muxerMkvPlugin.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerMkv/muxerMkvPlugin.cpp	2009-11-13 13:35:18 UTC (rev 5476)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerMkv/muxerMkvPlugin.cpp	2009-11-13 13:35:19 UTC (rev 5477)
@@ -27,6 +27,6 @@
                     "Mkv Muxer", // DIsplay name
                     mkvConfigure,
                     NULL,
-                    0
+                    NULL
                 );
 

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerffPS/muxerffPS.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerffPS/muxerffPS.cpp	2009-11-13 13:35:18 UTC (rev 5476)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerffPS/muxerffPS.cpp	2009-11-13 13:35:19 UTC (rev 5477)
@@ -43,7 +43,7 @@
     { "dvd", 224,11000,9800},
 };
 
-psMuxerConfig_s psMuxerConfig=
+ps_muxer psMuxerConfig=
 {
     MUXER_DVD,false
 };
@@ -172,7 +172,7 @@
 
 */
 #define FAIL(x) {*er=x;return false;}
-bool muxerffPS::verifyCompatibility(bool nonCompliantOk, psMuxingType muxingType,
+bool muxerffPS::verifyCompatibility(bool nonCompliantOk, uint32_t muxingType,
                                     ADM_videoStream *s,uint32_t nbAudioTrack,ADM_audioStream **a, 
                                     const char **er)
 {

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerffPS/muxerffPS.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerffPS/muxerffPS.h	2009-11-13 13:35:18 UTC (rev 5476)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerffPS/muxerffPS.h	2009-11-13 13:35:19 UTC (rev 5477)
@@ -19,7 +19,7 @@
 
 #include "ADM_muxer.h"
 #include "ADM_coreMuxerFfmpeg.h"
-
+#include "ps_muxer.h"
 typedef enum
 {
     MUXER_VCD=0,
@@ -27,14 +27,10 @@
     MUXER_DVD=2
 }psMuxingType;
 
-typedef struct
-{
-    psMuxingType muxingType;
-    bool         acceptNonCompliant;
-}psMuxerConfig_s;
 
-extern psMuxerConfig_s psMuxerConfig;
 
+extern ps_muxer psMuxerConfig;
+
 /**
     \fn class muxerffPS
 */
@@ -43,7 +39,7 @@
 protected:
         
         bool muxerRescaleVideoTimeDts(uint64_t *time,uint64_t computedDts);
-        bool verifyCompatibility(bool nonCompliantOk, psMuxingType muxingType,
+        bool verifyCompatibility(bool nonCompliantOk, uint32_t muxingType,
                                     ADM_videoStream *s,uint32_t nbAudioTrack,ADM_audioStream **a, 
                                     const char **er);
 

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerffPS/muxerffPSPlugin.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerffPS/muxerffPSPlugin.cpp	2009-11-13 13:35:18 UTC (rev 5476)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerffPS/muxerffPSPlugin.cpp	2009-11-13 13:35:19 UTC (rev 5477)
@@ -16,7 +16,7 @@
 #include "ADM_default.h"
 #include "ADM_muxerInternal.h"
 #include "muxerffPS.h"
-
+#include "ps_muxer_desc.cpp"
 #include "fourcc.h"
  bool ffPSConfigure(void);
 
@@ -26,7 +26,7 @@
                     "ffMpeg PS muxer plugin (c) Mean 2009",
                     "ffPS Muxer", // DIsplay name
                     ffPSConfigure,
-                    NULL,
-                    NULL
+                    ps_muxer_param, //template
+                    &psMuxerConfig //config
                 );
 

Added: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerffPS/ps_muxer.conf
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerffPS/ps_muxer.conf	2009-11-13 13:35:18 UTC (rev 5476)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerffPS/ps_muxer.conf	2009-11-13 13:35:19 UTC (rev 5477)
@@ -0,0 +1,2 @@
+uint32_t:muxingType
+bool:acceptNonCompliant

Added: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerffPS/ps_muxer.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerffPS/ps_muxer.h	2009-11-13 13:35:18 UTC (rev 5476)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerffPS/ps_muxer.h	2009-11-13 13:35:19 UTC (rev 5477)
@@ -0,0 +1,9 @@
+// Automatically generated, do not edit!
+#ifndef ADM_ps_muxer_CONF_H
+#define ADM_ps_muxer_CONF_H
+typedef struct {
+   uint32_t muxingType;
+   bool acceptNonCompliant;
+}ps_muxer;
+#endif //ps_muxer
+//EOF

Added: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerffPS/ps_muxer_desc.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerffPS/ps_muxer_desc.cpp	2009-11-13 13:35:18 UTC (rev 5476)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerffPS/ps_muxer_desc.cpp	2009-11-13 13:35:19 UTC (rev 5477)
@@ -0,0 +1,6 @@
+// Automatically generated, do not edit!
+const ADM_paramList ps_muxer_param[]={
+ {"muxingType",offsetof( ps_muxer,muxingType),"uint32_t",ADM_param_uint32_t},
+ {"acceptNonCompliant",offsetof( ps_muxer,acceptNonCompliant),"bool",ADM_param_bool},
+{NULL,0,NULL}
+};

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerffTS/muxerffTS.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerffTS/muxerffTS.cpp	2009-11-13 13:35:18 UTC (rev 5476)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerffTS/muxerffTS.cpp	2009-11-13 13:35:19 UTC (rev 5477)
@@ -28,7 +28,7 @@
 #define aprintf printf
 #endif
 
-tsMuxerConfig_s tsMuxerConfig=
+ts_muxer tsMuxerConfig=
 {
     false
 };

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerffTS/muxerffTS.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerffTS/muxerffTS.h	2009-11-13 13:35:18 UTC (rev 5476)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerffTS/muxerffTS.h	2009-11-13 13:35:19 UTC (rev 5477)
@@ -19,15 +19,10 @@
 
 #include "ADM_muxer.h"
 #include "ADM_coreMuxerFfmpeg.h"
+#include "ts_muxer.h"
 
-typedef struct
-{
- 
-    bool         acceptNonCompliant;
-}tsMuxerConfig_s;
+extern ts_muxer tsMuxerConfig;
 
-extern tsMuxerConfig_s tsMuxerConfig;
-
 /**
     \fn class muxerffTS
 */

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerffTS/muxerffTSPlugin.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerffTS/muxerffTSPlugin.cpp	2009-11-13 13:35:18 UTC (rev 5476)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerffTS/muxerffTSPlugin.cpp	2009-11-13 13:35:19 UTC (rev 5477)
@@ -16,7 +16,7 @@
 #include "ADM_default.h"
 #include "ADM_muxerInternal.h"
 #include "muxerffTS.h"
-
+#include "ts_muxer_desc.cpp"
 #include "fourcc.h"
  bool ffTSConfigure(void);
 
@@ -26,7 +26,7 @@
                     "ffMpeg PS muxer plugin (c) Mean 2009",
                     "ffTS Muxer", // DIsplay name
                     ffTSConfigure,
-                    NULL,
-                    NULL
+                    ts_muxer_param, //template
+                    &tsMuxerConfig //config
                 );
 



From mean at mail.berlios.de  Fri Nov 13 15:34:25 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Fri, 13 Nov 2009 15:34:25 +0100
Subject: [Avidemux-svn-commit] r5479 - in branches/avidemux_2.6_branch_mean:
	avidemux/common/ADM_audioFilter/src
	avidemux/common/ADM_editor avidemux/common/ADM_script
	avidemux_core/ADM_coreAudio/include
Message-ID: <200911131434.nADEYP8B016520@sheep.berlios.de>

Author: mean
Date: 2009-11-13 15:34:23 +0100 (Fri, 13 Nov 2009)
New Revision: 5479

Modified:
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_audioFilter/src/audiofilter_mixer.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edLoadSave.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script/ADM_AvidemuxAudio.h
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script/ADM_JSAvidemuxAudio.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script/ADM_JSAvidemuxAudio.h
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreAudio/include/ADM_audiodef.h
Log:
[Audio] Hook more js<->audio filter properties/functions

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_audioFilter/src/audiofilter_mixer.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_audioFilter/src/audiofilter_mixer.cpp	2009-11-13 13:35:21 UTC (rev 5478)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_audioFilter/src/audiofilter_mixer.cpp	2009-11-13 14:34:23 UTC (rev 5479)
@@ -605,4 +605,26 @@
     return rd;
     
 }
-
+/**
+    \fn AudioMixerIdToString
+    \brief convert channel conf to plain string
+*/
+const char *AudioMixerIdToString(CHANNEL_CONF  cnf)
+{
+    for(int i=0;i<NB_MIXER_DESC;i++)
+        if(cnf==mixerStringDescriptor[i].conf) return mixerStringDescriptor[i].desc;
+    return NULL;
+}
+/**
+    \fn AudioMuxerStringToId
+    \brief convert channel conf from plain string
+*/
+CHANNEL_CONF AudioMuxerStringToId(const char *st)
+{
+  for(int i=0;i<NB_MIXER_DESC;i++)
+  {
+        const AudioChannelDesc *s=&(mixerStringDescriptor[i]);
+        if(!strcasecmp(st,s->desc)) return s->conf;
+  }
+  return CHANNEL_INVALID;
+}

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edLoadSave.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edLoadSave.cpp	2009-11-13 13:35:21 UTC (rev 5478)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edLoadSave.cpp	2009-11-13 14:34:23 UTC (rev 5479)
@@ -31,32 +31,31 @@
 #include "prefs.h"
 #include "avi_vars.h"
 #include "ADM_muxerProto.h"
+#include "ADM_audioFilterInterface.h"
 #include "GUI_ui.h"
-// Ugly but sooo usefull
-extern uint32_t frameStart,frameEnd;
-static uint32_t edFrameStart,edFrameEnd;
-const char *getCurrentContainerAsString(void);
 
 
-/*______________________________________________
-        Save the project as a script
-______________________________________________*/
+/**
+    \fn        saveAsScript
+    \brief     Save the project as a script
+*/
 uint8_t ADM_Composer::saveAsScript (const char *name, const char *outputname)
 {
-const char *truefalse[]={"false","true"};
-printf("\n **Saving script project **\n");
-  char *    tmp;
+    const char *truefalse[]={"false","true"};
+    ADM_info(" **Saving script project %s**\n",name);
+    char *    tmp;
 
-  if (!_segments.getNbSegments())
-    return 1;
+    if (!_segments.getNbSegments())
+        return 1;
 
-  FILE *    fd;
+    FILE *fd=NULL;
 
-  if( !(fd = qfopen (name, "wt")) ){
+    if( !(fd = qfopen (name, "wt")) )
+    {
     fprintf(stderr,"\ncan't open script file \"%s\" for writing: %u (%s)\n",
                    name, errno, strerror(errno));
     return 0;
-  }
+    }
 
 // Save source and segment
 //______________________________________________
@@ -68,23 +67,20 @@
   qfprintf (fd, "var app = new Avidemux();\n");
   qfprintf (fd,"\n//** Video **\n");
   qfprintf (fd,"// %02ld videos source \n", _segments.getNbRefVideos());
+
   char *nm;
-  uint32_t vop=!!(video_body->getSpecificMpeg4Info()&ADM_VOP_ON);
+  
 
   for (uint32_t i = 0; i < _segments.getNbRefVideos(); i++)
     {
         nm=ADM_cleanupPath(_segments.getRefVideo(i)->_aviheader->getMyName() );
-        if(vop)
-        {
-          qfprintf(fd,"app.forceUnpack();\n");
-        }
         if(!i)
         {
                 qfprintf (fd, "app.load(\"%s\");\n", nm);
         }
         else
         {
-            qfprintf (fd, "app.append(\"%s\");\n", nm);
+                qfprintf (fd, "app.append(\"%s\");\n", nm);
         }
         ADM_dealloc(nm);
     }
@@ -202,43 +198,33 @@
         couples=NULL;
     }
     qfprintf(fd,");\n");
-   
-#if 0   
-   //qfprintf(fd,"app.audio.process=%s;\n",truefalse[audioProcessMode()]);
-   qfprintf(fd,"app.audio.normalizeMode=%d;\n",audioGetNormalizeMode());
-   qfprintf(fd,"app.audio.normalizeValue=%d;\n",audioGetNormalizeValue());
-   qfprintf(fd,"app.audio.delay=%d;\n",audioGetDelay());
-   qfprintf(fd,"app.audio.mixer(\"%s\");\n",getCurrentMixerString());
 
-    // VBR ?
-    if(currentaudiostream)
-    {
-        uint32_t encoding=currentaudiostream->getInfo()->encoding;
-        if((encoding==WAV_MP3 || encoding==WAV_MP2))
-        {
-            qfprintf(fd,"app.audio.scanVBR();\n");
-        }
-    }
 
+    uint32_t x=audioFilterGetResample();
+    if(x) qfprintf(fd,"app.audio.resample=%u;\n",audioFilterGetResample());
 
+    
+//   qfprintf(fd,"app.audio.normalizeMode=%d;\n",audioGetNormalizeMode());
+//   qfprintf(fd,"app.audio.normalizeValue=%d;\n",audioGetNormalizeValue());
+//   qfprintf(fd,"app.audio.delay=%d;\n",audioGetDelay());
+// if (audioGetDrc()) qfprintf(fd,"app.audio.drc=true;\n");
+   if(CHANNEL_INVALID!=audioFilterGetMixer())
+        qfprintf(fd,"app.audio.mixer(\"%s\");\n",AudioMixerIdToString(audioFilterGetMixer()));
+
+   
+
    // Change fps ?
-        switch(audioGetFpsConv())
+        switch(audioFilterGetFrameRate())
         {
                 case FILMCONV_NONE:      ;break;
                 case FILMCONV_PAL2FILM:  qfprintf(fd,"app.audio.pal2film=true;\n");break;
                 case FILMCONV_FILM2PAL:  qfprintf(fd,"app.audio.film2pal=true;\n");break;
                 default:ADM_assert(0);
         }
-   // Resampling
-        switch(audioGetResampling())
-        {
-                case RESAMPLING_NONE:         ;break;
-                case RESAMPLING_CUSTOM:        qfprintf(fd,"app.audio.resample=%u;\n",audioGetResample());break;
-                default:ADM_assert(0);
-        }
-        if (audioGetDrc()) qfprintf(fd,"app.audio.drc=true;\n");
+   
+       
         
-#endif        
+  
   // -------- Muxer -----------------------
         qfprintf(fd,"\n//** Muxer **\n");
         CONFcouple *containerConf=NULL;

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script/ADM_AvidemuxAudio.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script/ADM_AvidemuxAudio.h	2009-11-13 13:35:21 UTC (rev 5478)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script/ADM_AvidemuxAudio.h	2009-11-13 14:34:23 UTC (rev 5479)
@@ -5,20 +5,8 @@
 class ADM_AvidemuxAudio
 {
 public:
-	ADM_AvidemuxAudio(void) : m_bNormalize(false), m_nResample(0), m_nDelay(0), m_bFilm2PAL(false), m_bPAL2Film(false) {}
+	ADM_AvidemuxAudio(void){}
 	virtual ~ADM_AvidemuxAudio(void);
-
-	// member variables
-        bool m_bAudioProcess;
-	bool m_bNormalize;
-	unsigned long m_nResample;
-	int m_nDelay;
-	bool m_bFilm2PAL;
-	bool m_bPAL2Film;
-        int  m_bDRC;
-        int  m_nNormalizeMode;
-        int  m_nNormalizeValue;
-        
 };
 
 #endif

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script/ADM_JSAvidemuxAudio.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script/ADM_JSAvidemuxAudio.cpp	2009-11-13 13:35:21 UTC (rev 5478)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script/ADM_JSAvidemuxAudio.cpp	2009-11-13 14:34:23 UTC (rev 5479)
@@ -37,7 +37,6 @@
 JSPropertySpec ADM_JSAvidemuxAudio::avidemuxaudio_properties[] = 
 { 
 
-        { "process", audioprocess_prop, JSPROP_ENUMERATE },        // process audio when saving
         { "resample", resample_prop, JSPROP_ENUMERATE },	// resample
         { "delay", delay_prop, JSPROP_ENUMERATE },	// set audio delay
         { "film2pal", film2pal_prop, JSPROP_ENUMERATE },	// convert film to pal
@@ -128,29 +127,26 @@
                 ADM_JSAvidemuxAudio *priv = (ADM_JSAvidemuxAudio *) JS_GetPrivate(cx, obj);
                 switch(JSVAL_TO_INT(id))
                 {
-                        case audioprocess_prop:
-                                *vp = BOOLEAN_TO_JSVAL(priv->getObject()->m_bAudioProcess);
-                                break;
                         case resample_prop:
-                                *vp = INT_TO_JSVAL(priv->getObject()->m_nResample);
+                                *vp=INT_TO_JSVAL(audioFilterGetResample());
                                 break;
                         case delay_prop:
-                                *vp = INT_TO_JSVAL(priv->getObject()->m_nDelay);
+//                                *vp = INT_TO_JSVAL(priv->getObject()->m_nDelay);
                                 break;
                         case film2pal_prop:
-                                *vp = BOOLEAN_TO_JSVAL(priv->getObject()->m_bFilm2PAL);
+//                                *vp = BOOLEAN_TO_JSVAL(priv->getObject()->m_bFilm2PAL);
                                 break;
                         case pal2film_prop:
-                                *vp = BOOLEAN_TO_JSVAL(priv->getObject()->m_bPAL2Film);
+//                                *vp = BOOLEAN_TO_JSVAL(priv->getObject()->m_bPAL2Film);
                                 break;
                         case normalizemode_prop:
-                              *vp = BOOLEAN_TO_JSVAL(priv->getObject()->m_nNormalizeMode);
+//                              *vp = BOOLEAN_TO_JSVAL(priv->getObject()->m_nNormalizeMode);
                               break;
                         case normalizevalue_prop:
-                          *vp = BOOLEAN_TO_JSVAL(priv->getObject()->m_nNormalizeValue);
+//                          *vp = BOOLEAN_TO_JSVAL(priv->getObject()->m_nNormalizeValue);
                           break;
                         case drc_prop:
-                            *vp = BOOLEAN_TO_JSVAL(priv->getObject()->m_bDRC);
+//                            *vp = BOOLEAN_TO_JSVAL(priv->getObject()->m_bDRC);
                             break;
 /*
                         case audio_prop:
@@ -164,23 +160,13 @@
 
 JSBool ADM_JSAvidemuxAudio::JSSetProperty(JSContext *cx, JSObject *obj, jsval id, jsval *vp)
 {
-#if 0
         if (JSVAL_IS_INT(id)) 
         {
                 
                 ADM_JSAvidemuxAudio *priv = (ADM_JSAvidemuxAudio *) JS_GetPrivate(cx, obj);
                 switch(JSVAL_TO_INT(id))
                 {
-                        case audioprocess_prop:
-                        {
-                                if(JSVAL_IS_BOOLEAN(*vp) == false)
-                                        break;
-                                priv->getObject()->m_bNormalize = JSVAL_TO_BOOLEAN(*vp);
-                                enterLock();
-                                UI_setAProcessToggleStatus(priv->getObject()->m_bAudioProcess);
-                                leaveLock();
-                                break;
-                        }
+#if 0                     
                         case drc_prop:
                         {
                                 if(JSVAL_IS_BOOLEAN(*vp) == false)
@@ -191,16 +177,7 @@
                                 leaveLock();
                                 break;
                         }
-                        case resample_prop:
-                        {
-                                if(JSVAL_IS_INT(*vp) == false)
-                                        break;
-                                priv->getObject()->m_nResample = JSVAL_TO_INT(*vp);
-                                enterLock();
-                                audioFilterResample(priv->getObject()->m_nResample);
-                                leaveLock();
-                                break;
-                        }
+                       
                         case delay_prop:
                         {
                                 if(JSVAL_IS_INT(*vp) == false)
@@ -248,11 +225,46 @@
                                   leaveLock();
                                   break;
                         }
+#endif
+
+                        case film2pal_prop:
+                        {
+                                if(JSVAL_IS_BOOLEAN(*vp) == false)
+                                        break;
+                                enterLock();
+                                if(JSVAL_TO_BOOLEAN(*vp)) 
+                                    audioFilterSetFrameRate(FILMCONV_FILM2PAL);
+                                else
+                                    audioFilterSetFrameRate(FILMCONV_NONE);
+                                leaveLock();
+                                break;
+                        }
+                        case pal2film_prop:
+                        {
+                                if(JSVAL_IS_BOOLEAN(*vp) == false)
+                                        break;
+                                enterLock();
+                                if(JSVAL_TO_BOOLEAN(*vp)) 
+                                    audioFilterSetFrameRate(FILMCONV_PAL2FILM);
+                                else
+                                    audioFilterSetFrameRate(FILMCONV_NONE);
+                                leaveLock();
+                                break;
+                        }
+                    case resample_prop:
+                        {
+                                if(JSVAL_IS_INT(*vp) == false)
+                                        break;
+                                enterLock();
+                                audioFilterSetResample(JSVAL_TO_INT(*vp));
+                                leaveLock();
+                                break;
+                        }
                         default : printf("UNKNOWN AUDIO PROP\n");
                         return JS_FALSE;
                 }
         }
-#endif
+
         return JS_TRUE;
 }
 
@@ -513,24 +525,21 @@
 JSBool ADM_JSAvidemuxAudio::mixer(JSContext *cx, JSObject *obj, uintN argc, 
                                       jsval *argv, jsval *rval)
 {
-#if 0
 uint32_t nb=0,nw=0;
 uint32_t *infos=NULL;
         // default return value
         ADM_JSAvidemuxAudio *p = (ADM_JSAvidemuxAudio *)JS_GetPrivate(cx, obj);
 
         // default return value
-      if(argc != 1)
+        if(argc != 1)
                 return JS_FALSE;
+        if(JSVAL_IS_STRING(argv[0]) == false) 
+                return JS_FALSE;
         char *pArg0 = JS_GetStringBytes(JSVAL_TO_STRING(argv[0]));
         enterLock();
-
-        if(setCurrentMixerFromString(pArg0))
-                *rval=BOOLEAN_TO_JSVAL(true);
-        else
-                *rval=BOOLEAN_TO_JSVAL(false);
+        CHANNEL_CONF c=AudioMuxerStringToId(pArg0);
+        *rval=BOOLEAN_TO_JSVAL(audioFilterSetMixer(c));
         leaveLock();
-#endif
         return JS_TRUE;
 
 }// end Codec

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script/ADM_JSAvidemuxAudio.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script/ADM_JSAvidemuxAudio.h	2009-11-13 13:35:21 UTC (rev 5478)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script/ADM_JSAvidemuxAudio.h	2009-11-13 14:34:23 UTC (rev 5479)
@@ -17,8 +17,7 @@
 
 	static JSBool JSGetProperty(JSContext *cx, JSObject *obj, jsval id, jsval *vp);
 	static JSBool JSSetProperty(JSContext *cx, JSObject *obj, jsval id, jsval *vp);
-	static JSBool JSConstructor(JSContext *cx, JSObject *obj, uintN argc, 
-								jsval *argv, jsval *rval);
+	static JSBool JSConstructor(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval);
 	static void JSDestructor(JSContext *cx, JSObject *obj);
 	static JSObject *JSInit(JSContext *cx, JSObject *obj, JSObject *proto = NULL);
 	static JSBool ScanVBR(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval);
@@ -26,26 +25,26 @@
 	static JSBool Load(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval);
 	static JSBool Reset(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval);
 	static JSBool Codec(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval);
-        static JSBool getNbTracks(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval);
-        static JSBool setTrack(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval);
-        static JSBool lamePreset(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval);
-        static JSBool mixer(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval);
-        static JSBool secondAudioTrack(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval);
-        static JSBool getNbChannels(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval);
-        static JSBool getBitrate(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval);
+    static JSBool getNbTracks(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval);
+    static JSBool setTrack(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval);
+    static JSBool lamePreset(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval);
+    static JSBool mixer(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval);
+    static JSBool secondAudioTrack(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval);
+    static JSBool getNbChannels(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval);
+    static JSBool getBitrate(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval);
 
 	static JSPropertySpec avidemuxaudio_properties[];
 	static JSFunctionSpec avidemuxaudio_methods[];
 	enum
 	{
-                audioprocess_prop,
+        audioprocess_prop,
 		resample_prop,
 		delay_prop,
 		film2pal_prop,
 		pal2film_prop,
-                normalizemode_prop,
-                normalizevalue_prop,
-                drc_prop
+        normalizemode_prop,
+        normalizevalue_prop,
+        drc_prop
 	};
 	static JSClass m_classAvidemuxAudio;
         

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreAudio/include/ADM_audiodef.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreAudio/include/ADM_audiodef.h	2009-11-13 13:35:21 UTC (rev 5478)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreAudio/include/ADM_audiodef.h	2009-11-13 14:34:23 UTC (rev 5479)
@@ -67,11 +67,28 @@
 bool ADM_audioCompareChannelMapping(WAVHeader *wh1, WAVHeader *wh2,CHANNEL_TYPE *map1,CHANNEL_TYPE *map2);
 
 
+
 typedef struct
 {
   const char    *desc;
   CHANNEL_CONF  conf;
 }AudioChannelDesc;
+
+const AudioChannelDesc mixerStringDescriptor[]=
+{
+#define MUXERSTRING(x) {#x,CHANNEL_##x}
+    MUXERSTRING(MONO),
+    MUXERSTRING(STEREO),
+    MUXERSTRING(2F_1R),
+    MUXERSTRING(3F),
+    MUXERSTRING(3F_1R),
+    MUXERSTRING(2F_2R),
+    MUXERSTRING(3F_2R),
+    MUXERSTRING(3F_2R_LFE),
+    MUXERSTRING(DOLBY_PROLOGIC),
+    MUXERSTRING(DOLBY_PROLOGIC2)
+};
+#undef MUXERSTRING
 const AudioChannelDesc localDownmixing[]=
 {
   {"No downmixing (multichannel)", CHANNEL_INVALID},
@@ -80,5 +97,11 @@
   {"Dolby Prologic II", CHANNEL_DOLBY_PROLOGIC2}
   
 };
+
+const char *AudioMixerIdToString(CHANNEL_CONF  cnf);
+CHANNEL_CONF AudioMuxerStringToId(const char *st);
+
 #define NB_LOCAL_DOWNMIX (sizeof(localDownmixing)/sizeof(AudioChannelDesc))
+#define NB_MIXER_DESC    (sizeof(mixerStringDescriptor)/sizeof(AudioChannelDesc))
+
 #endif



From mean at mail.berlios.de  Fri Nov 13 15:34:28 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Fri, 13 Nov 2009 15:34:28 +0100
Subject: [Avidemux-svn-commit] r5480 - in
	branches/avidemux_2.6_branch_mean/avidemux/common: ADM_script
	ADM_toolkit
Message-ID: <200911131434.nADEYSVq016531@sheep.berlios.de>

Author: mean
Date: 2009-11-13 15:34:27 +0100 (Fri, 13 Nov 2009)
New Revision: 5480

Modified:
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script/ADM_Avidemux.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script/ADM_JSAvidemux.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script/ADM_JSAvidemuxAudio.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script/ADM_JSAvidemuxVideo.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_toolkit/automation.cpp
Log:
[JS] Add a dump js (--js) command to show all available hookd avidemux<->js

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script/ADM_Avidemux.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script/ADM_Avidemux.cpp	2009-11-13 14:34:23 UTC (rev 5479)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script/ADM_Avidemux.cpp	2009-11-13 14:34:27 UTC (rev 5480)
@@ -32,3 +32,48 @@
 {// begin ~ADM_Avidemux
 
 }// end ~ADM_Avidemux
+/******************************************/
+JSPropertySpec *ADM_JsAudioGetProperties(void);
+JSFunctionSpec *ADM_JsAudioGetFunctions(void);
+JSPropertySpec *ADM_JsVideoGetProperties(void);
+JSFunctionSpec *ADM_JsVideoGetFunctions(void);
+JSPropertySpec *ADM_JsClassGetProperties(void);
+JSFunctionSpec *ADM_JsClassGetFunctions(void);
+
+static void dumpFunc(JSFunctionSpec *f)
+{
+    while(f->name)
+    {
+        printf("\t%s(..)\n",f->name);
+        f++;
+    }
+}
+static void dumpProps(JSPropertySpec *f)
+{
+    while(f->name)
+    {
+        printf("\t%s=xxx\n",f->name);
+        f++;
+    }
+}
+/**
+    \fn ADM_dumpJSHooks
+    \brief Printf the additional avidemux functions/properties
+*/
+void ADM_dumpJSHooks(void)
+{
+    printf("Dumping JS interface\n");
+    printf("********************\n");
+    printf("app.\n");
+    dumpFunc(ADM_JsClassGetFunctions());
+    dumpProps(ADM_JsClassGetProperties());
+    printf("app.video\n");
+    dumpFunc(ADM_JsVideoGetFunctions());
+    dumpProps(ADM_JsVideoGetProperties());
+    printf("app.audio\n");
+    dumpFunc(ADM_JsAudioGetFunctions());
+    dumpProps(ADM_JsAudioGetProperties());
+    printf("Done\n");
+    printf("****\n");
+
+}
\ No newline at end of file

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script/ADM_JSAvidemux.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script/ADM_JSAvidemux.cpp	2009-11-13 14:34:23 UTC (rev 5479)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script/ADM_JSAvidemux.cpp	2009-11-13 14:34:27 UTC (rev 5480)
@@ -64,19 +64,26 @@
 	{ "load", Load, 1, 0, 0 },	// Load movie
 	{ "loadFilters", LoadFilters, 1, 0, 0 },	// Load filters from file
 	{ "save", Save, 1, 0, 0 },	// Save movie
-/*	{ "saveDVD", SaveDVD, 1, 0, 0 },	// Save movie as DVD
-	{ "saveOGM", SaveOGM, 1, 0, 0 },	// Save movie as OGM*/
-        { "clearSegments", ClearSegments ,0,0,0}, // Clear all segments
-        { "addSegment", AddSegment ,3,0,0}, // Clear all segments
+    { "clearSegments", ClearSegments ,0,0,0}, // Clear all segments
+    { "addSegment", AddSegment ,3,0,0}, // Clear all segments
 	{ "goToTime", GoToTime, 3, 0, 0 },	// more current frame to time index
 	{ "forceUnpack", forceUnpack, 0, 0, 0 },
-        { "smartCopyMode", smartcopyMode, 0, 0, 0 },
-        { "setContainer", setContainer, 1, 0, 0 },
-        { "rebuildIndex", rebuildIndex, 0, 0, 0 },
+    { "smartCopyMode", smartcopyMode, 0, 0, 0 },
+    { "setContainer", setContainer, 1, 0, 0 },
+    { "rebuildIndex", rebuildIndex, 0, 0, 0 },
 
 	{ 0 }
 };
-
+/*******************************************/
+JSPropertySpec *ADM_JsClassGetProperties(void)
+{
+    return ADM_JSAvidemux::avidemux_properties;
+}
+JSFunctionSpec *ADM_JsClassGetFunctions(void)
+{
+    return ADM_JSAvidemux::avidemux_methods;
+}
+/*******************************************/
 JSClass ADM_JSAvidemux::m_classAvidemux = 
 {
 	"Avidemux", JSCLASS_HAS_PRIVATE,

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script/ADM_JSAvidemuxAudio.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script/ADM_JSAvidemuxAudio.cpp	2009-11-13 14:34:23 UTC (rev 5479)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script/ADM_JSAvidemuxAudio.cpp	2009-11-13 14:34:27 UTC (rev 5480)
@@ -49,7 +49,6 @@
 
 JSFunctionSpec ADM_JSAvidemuxAudio::avidemuxaudio_methods[] = 
 {
-        { "scanVBR", ScanVBR, 0, 0, 0 },	// scan variable bit rate audio
         { "save", Save, 1, 0, 0 },	// save audio stream
         { "load", Load, 2, 0, 0 },	// load audio stream
         { "reset", Reset, 0, 0, 0 },	// reset audio stream
@@ -62,7 +61,16 @@
         { "getBitrate", getBitrate, 1, 0, 0 },
         { 0 }
 };
-
+//*******************************
+JSPropertySpec *ADM_JsAudioGetProperties(void)
+{
+    return ADM_JSAvidemuxAudio::avidemuxaudio_properties;
+}
+JSFunctionSpec *ADM_JsAudioGetFunctions(void)
+{
+    return ADM_JSAvidemuxAudio::avidemuxaudio_methods;
+}
+//*******************************
 JSClass ADM_JSAvidemuxAudio::m_classAvidemuxAudio = 
 {
         "AvidemuxAudio", JSCLASS_HAS_PRIVATE,
@@ -268,21 +276,6 @@
         return JS_TRUE;
 }
 
-JSBool ADM_JSAvidemuxAudio::ScanVBR(JSContext *cx, JSObject *obj, uintN argc, 
-                                      jsval *argv, jsval *rval)
-{// begin ScanVBR
-        ADM_JSAvidemuxAudio *p = (ADM_JSAvidemuxAudio *)JS_GetPrivate(cx, obj);
-        // default return value
-        *rval = BOOLEAN_TO_JSVAL(false);
-        if(argc != 0)
-                return JS_FALSE;
-        printf("Scaning Audio... \n");
-        enterLock();
-        HandleAction(ACT_AudioMap);
-        leaveLock()
-        *rval = BOOLEAN_TO_JSVAL(true);
-        return JS_TRUE;
-}// end ScanVBR
 
 JSBool ADM_JSAvidemuxAudio::Save(JSContext *cx, JSObject *obj, uintN argc, 
                                       jsval *argv, jsval *rval)

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script/ADM_JSAvidemuxVideo.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script/ADM_JSAvidemuxVideo.cpp	2009-11-13 14:34:23 UTC (rev 5479)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script/ADM_JSAvidemuxVideo.cpp	2009-11-13 14:34:27 UTC (rev 5480)
@@ -35,7 +35,7 @@
 
 JSPropertySpec ADM_JSAvidemuxVideo::avidemuxvideo_properties[] = 
 { 
-        { "process", videoprocess_prop, JSPROP_ENUMERATE },        // process video when saving
+       
 	{ 0 }
 };
 
@@ -43,7 +43,7 @@
 {
 	{ "clear", Clear, 0, 0, 0 },	// clear
 	{ "add", Add, 3, 0, 0 },	// add
-        { "clearFilters", ClearFilters, 0, 0, 0 }, // Delete all filters
+    { "clearFilters", ClearFilters, 0, 0, 0 }, // Delete all filters
 	{ "addFilter", AddFilter, 10, 0, 0 },	// Add filter to filter chain
 	{ "codec", Codec, 3, 0, 0 },	// Set the video codec
 	{ "codecPlugin", codecPlugin, 4, 0, 0 },	// Set the video codec plugin
@@ -68,7 +68,16 @@
     { "dumpEditing", dumpEditing,0,0,0},
 	{ 0 }
 };
-
+/*********************************/
+JSPropertySpec *ADM_JsVideoGetProperties(void)
+{
+    return ADM_JSAvidemuxVideo::avidemuxvideo_properties;
+}
+JSFunctionSpec *ADM_JsVideoGetFunctions(void)
+{
+    return ADM_JSAvidemuxVideo::avidemuxvideo_methods;
+}
+/*********************************/
 JSClass ADM_JSAvidemuxVideo::m_classAvidemuxVideo = 
 {
 	"AvidemuxVideo", JSCLASS_HAS_PRIVATE,

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_toolkit/automation.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_toolkit/automation.cpp	2009-11-13 14:34:23 UTC (rev 5479)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_toolkit/automation.cpp	2009-11-13 14:34:27 UTC (rev 5480)
@@ -97,6 +97,7 @@
 extern uint8_t A_rebuildKeyFrame (void);
 extern uint8_t A_setContainer(const char *cont);
 uint8_t scriptAddVar(char *var,char *value);
+extern void ADM_dumpJSHooks(void);
 extern uint8_t ADM_vob2vobsub(char *nameVob, char *nameVobSub, char *nameIfo);
 
 #ifdef __WIN32
@@ -136,6 +137,7 @@
 
 AUTOMATON reaction_table[]=
 {
+        {"js",                  0,"Dump the javascript functions",(one_arg_type)ADM_dumpJSHooks},
         {"nogui",               0,"Run in silent mode",		(one_arg_type)GUI_Quiet}   ,
 //        {"listfilters",		0,"list all filters by name",		(one_arg_type)filterListAll}   ,
         {"run",			1,"load and run a script",		(one_arg_type)A_parseECMAScript},



From mean at mail.berlios.de  Fri Nov 13 18:29:31 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Fri, 13 Nov 2009 18:29:31 +0100
Subject: [Avidemux-svn-commit] r5481 -
	branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoFilter2
Message-ID: <200911131729.nADHTVJZ026977@sheep.berlios.de>

Author: mean
Date: 2009-11-13 18:29:31 +0100 (Fri, 13 Nov 2009)
New Revision: 5481

Removed:
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoFilter2/ADM_filterChain.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoFilter2/ADM_pluginLoad.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoFilter2/ADM_videoFilterBridge.cpp
Modified:
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoFilter2/CMakeLists.txt
Log:
[VideoFilter] Create folder structure

Deleted: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoFilter2/ADM_filterChain.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoFilter2/ADM_filterChain.cpp	2009-11-13 14:34:27 UTC (rev 5480)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoFilter2/ADM_filterChain.cpp	2009-11-13 17:29:31 UTC (rev 5481)
@@ -1,51 +0,0 @@
-/***************************************************************************
-                          \fn ADM_filterChain.cpp
-                          \brief Base class for Video Filters
-                           (c) Mean 2009
-
-
-
- ***************************************************************************/
-
-/***************************************************************************
- *                                                                         *
- *   This program is free software; you can redistribute it and/or modify  *
- *   it under the terms of the GNU General Public License as published by  *
- *   the Free Software Foundation; either version 2 of the License, or     *
- *   (at your option) any later version.                                   *
- *                                                                         *
- ***************************************************************************/
-#include "ADM_default.h"
-#include "ADM_coreVideoFilter.h"
-#include "ADM_filterChain.h"
-#include "ADM_videoFilterBridge.h"
-/**
-    \fn createVideoFilterChain
-    \brief Create a filter chain
-*/
-ADM_videoFilterChain *createVideoFilterChain(uint64_t startAt,uint64_t endAt)
-{
-    ADM_videoFilterChain *chain=new ADM_videoFilterChain;
-    // 1- Add bridge always # 1
-    ADM_videoFilterBridge *bridge=new ADM_videoFilterBridge(startAt,endAt);
-    chain->push_back(bridge);
-    return chain;
-}
-/**
-        \fn destroyVideoFilterChain
-        \brief Destroy a filter chain
-*/
-bool                 destroyVideoFilterChain(ADM_videoFilterChain *chain)
-{
-    ADM_assert(chain->size());
-    for(int i=0;i<chain->size();i++)
-    {
-        ADM_coreVideoFilter *filter=(*chain)[i];
-        delete filter;
-        (*chain)[i]=NULL;
-    }
-    chain->clear();
-    return true;
-}
-
-// EOF

Deleted: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoFilter2/ADM_pluginLoad.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoFilter2/ADM_pluginLoad.cpp	2009-11-13 14:34:27 UTC (rev 5480)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoFilter2/ADM_pluginLoad.cpp	2009-11-13 17:29:31 UTC (rev 5481)
@@ -1,186 +0,0 @@
-/**
-        \file ADM_pluginLoad.cpp
-        \brief Interface for dynamically loaded video filter
-
-
-*/
-
-
-/***************************************************************************
- *                                                                         *
- *   This program is free software; you can redistribute it and/or modify  *
- *   it under the terms of the GNU General Public License as published by  *
- *   the Free Software Foundation; either version 2 of the License, or     *
- *   (at your option) any later version.                                   *
- ***************************************************************************/
-#include "ADM_default.h"
-#include "ADM_vf_plugin.h"
-#include "DIA_fileSel.h"
-#include "ADM_dynamicLoading.h"
-#include <vector>
-
-#if 1
-#define aprintf printf
-#else
-#define aprintf(...) {}
-#endif
-/**
-    \struct admVideoFilterInfo
-*/
-typedef struct  
-{
-        const char                  *internalName;
-        const char                  *displayName;
-        const char                  *desc;
-        VF_CATEGORY                 category;   
-}admVideoFilterInfo;
-
-/**
- *  \class ADM_vf_plugin
- *  \brief Base class for video filter loader
- */
-class ADM_vf_plugin : public ADM_LibWrapper
-{
-	public:
-		ADM_vf_CreateFunction		*create;
-		ADM_vf_DeleteFunction		*destroy;
-		ADM_vf_SupportedUI		    *supportedUI;
-        
-		ADM_vf_GetApiVersion		*getApiVersion;
-		ADM_vf_GetPluginVersion	    *getFilterVersion;
-		ADM_vf_GetString    	    *getDesc;
-        ADM_vf_GetString    	    *getInternalName;
-        ADM_vf_GetString    	    *getDisplayName;
-        ADM_vf_getCategory          *getCategory;
-
-        const char 					*nameOfLibrary;
-	
-        admVideoFilterInfo          info;
-
-		ADM_vf_plugin(const char *file) : ADM_LibWrapper()
-		{
-			initialised = (loadLibrary(file) && getSymbols(9,
-				&create, "create",
-				&destroy, "destroy",
-				&getApiVersion, "getApiVersion",
-				&supportedUI, "supportedUI",
-				&getFilterVersion, "getFilterVersion",
-				&getDesc, "getDesc",
-				&getInternalName, "getInternalName",
-				&getDisplayName, "getDisplayName",
-                &getCategory,"getCategory"
-                ));
-		};
-};
-
-std::vector<ADM_vf_plugin *> ADM_videoFilterPluginsList;
-/**
- * 	\fn tryLoadingVideoFilterPlugin
- *  \brief try to load the plugin given as argument..
- */
-static uint8_t tryLoadingVideoFilterPlugin(const char *file)
-{
-	ADM_vf_plugin *plugin = new ADM_vf_plugin(file);
-    admVideoFilterInfo          *info=NULL;
-
-	if (!plugin->isAvailable())
-	{
-		printf("[ADM_vf_plugin] Unable to load %s\n", ADM_GetFileName(file));
-		goto Err_ad;
-	}
-
-	// Check API version
-	if (plugin->getApiVersion() != VF_API_VERSION)
-	{
-		printf("[ADM_vf_plugin] File %s has API version too old (%d vs %d)\n",
-			ADM_GetFileName(file), plugin->getApiVersion(), VF_API_VERSION);
-		goto Err_ad;
-	}
-    if(!(plugin->supportedUI() & 0xff))
-    {  // FIXME
-
-
-    }
-	// Get infos
-	uint32_t major, minor, patch;
-
-	plugin->getFilterVersion(&major, &minor, &patch);
-	plugin->nameOfLibrary = ADM_strdup(ADM_GetFileName(file));
-
-    info=&(plugin->info);
-
-
-    info->internalName=plugin->getInternalName();
-    info->desc=plugin->getDesc();
-    info->displayName=plugin->getDisplayName();
-    info->category=plugin->getCategory();
-
-	printf("[ADM_vf_plugin] Plugin loaded version %d.%d.%d, name %s/%s\n",
-		major, minor, patch, info->internalName, info->displayName);
-
-	ADM_videoFilterPluginsList.push_back(plugin);
-
-	return 1;
-
-Err_ad:
-	delete plugin;
-	return 0;
-}
-/**
-    \fn ADM_ad_GetPluginVersion
-    \brief returns the # of loaded audio decoder
-*/
-uint32_t ADM_vf_getNbFilters(void)
-{
-    return (uint32_t )ADM_videoFilterPluginsList.size();
-}
-/**
-    \fn ADM_vf_getFilterInfo
-    \brief returns infos about a given filter
-    @param filter [in] # of the filter we are intereseted in, between 0 & ADM_ad_getNbFilters
-    @param name [out] Name of the decoder plugin
-    @param major, minor,patch [out] Version number
-    @return true
-*/
-bool ADM_vf_getFilterInfo(int filter, const char **name, uint32_t *major,uint32_t *minor,uint32_t *patch)
-{
-
-        ADM_assert(filter>=0 && filter<ADM_videoFilterPluginsList.size());
-
-    	ADM_vf_plugin *a=ADM_videoFilterPluginsList[filter];
-        a->getFilterVersion(major, minor, patch);
-
-        *name=a->info.displayName;
-        return 1;
-}
-
-/**
- * 	\fn ADM_ad_GetPluginVersion
- *  \brief load all audio plugins
- */
-uint8_t ADM_vf_loadPlugins(const char *path)
-{
-#define MAX_EXTERNAL_FILTER 50
-
-	char *files[MAX_EXTERNAL_FILTER];
-	uint32_t nbFile;
-
-	memset(files,0,sizeof(char *)*MAX_EXTERNAL_FILTER);
-	printf("[ADM_vf_plugin] Scanning directory %s\n",path);
-
-	if(!buildDirectoryContent(&nbFile, path, files, MAX_EXTERNAL_FILTER, SHARED_LIB_EXT))
-	{
-		printf("[ADM_vf_plugin] Cannot parse plugin\n");
-		return 0;
-	}
-
-	for(int i=0;i<nbFile;i++)
-		tryLoadingVideoFilterPlugin(files[i]);
-
-	printf("[ADM_vf_plugin] Scanning done, found %d codec\n", (int)ADM_videoFilterPluginsList.size());
-
-	return 1;
-}
-
-
-//EOF

Deleted: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoFilter2/ADM_videoFilterBridge.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoFilter2/ADM_videoFilterBridge.cpp	2009-11-13 14:34:27 UTC (rev 5480)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoFilter2/ADM_videoFilterBridge.cpp	2009-11-13 17:29:31 UTC (rev 5481)
@@ -1,128 +0,0 @@
-/***************************************************************************
-                          \fn ADM_videoFilterBridge
-                          \brief Interface between editor & filter chain
-                           (c) Mean 2009
-
-
-
- ***************************************************************************/
-
-/***************************************************************************
- *                                                                         *
- *   This program is free software; you can redistribute it and/or modify  *
- *   it under the terms of the GNU General Public License as published by  *
- *   the Free Software Foundation; either version 2 of the License, or     *
- *   (at your option) any later version.                                   *
- *                                                                         *
- ***************************************************************************/
-
-#include "ADM_default.h"
-#include "ADM_videoFilterBridge.h"
-#include "ADM_editor/ADM_edit.hxx"
-extern ADM_Composer *video_body;
-/**
-    \fn ADM_videoFilterBridge
-
-*/
-ADM_videoFilterBridge::ADM_videoFilterBridge(uint64_t startTime, uint64_t endTime) : ADM_coreVideoFilter(NULL,NULL)
-{
-    printf("[VideoFilterBridge] Creating bridge from %"LU" s to %"LU" s\n",(uint32_t)(startTime/1000000LL),(uint32_t)(endTime/1000000LL));
-    this->startTime=startTime;
-    this->endTime=endTime;
-    
-    aviInfo fo;
-    video_body->getVideoInfo(&fo);
-    bridgeInfo.width=fo.width;
-    bridgeInfo.height=fo.height;
-    bridgeInfo.frameIncrement=video_body->getFrameIncrement();
-    bridgeInfo.totalDuration=video_body->getVideoDuration();
-    bridgeInfo.frameIncrement=video_body->getFrameIncrement();
-    rewind();
-}
-/**
-    \fn rewind
-    \brief go or return to the original position...
-*/
-bool ADM_videoFilterBridge::rewind(void)
-{
-    printf("[VideoBridge] Goint to %"LU" ms\n",(uint32_t)(startTime/1000));
-    video_body->goToTimeVideo(startTime);
-    firstImage=true;
-    lastSentImage=0;
-    return true;
-}
-
-/**
-    \fn ADM_videoFilterBridge
-
-*/
-ADM_videoFilterBridge::~ADM_videoFilterBridge()
-{
-
-}
-/**
-    \fn getNextFrame
-    \brief
-*/
-bool         ADM_videoFilterBridge::nextFrame(ADMImage *image)
-{
-again:
-    bool r=false;
-    if(firstImage==true)
-    {
-        firstImage=false;
-        r=video_body->samePicture(image);
-        lastSentImage=0;
-    }else
-    {
-        r=   video_body->nextPicture(image);
-        lastSentImage++;
-    }
-    if(r==false) return false;
-    // Translate pts if any
-    int64_t pts=image->Pts;
-    if(pts>endTime)
-    {
-        printf("[VideoBridge] This frame is too late (%"LLD" vs %"LLU")\n",pts,startTime);
-        return false;
-    }
-    if(pts<startTime) 
-    {
-            printf("[VideoBridge] This frame is too early (%"LLD" vs %"LLU")\n",pts,endTime);
-            goto again;
-    }
-    // Rescale time
-    image->Pts-=startTime;
-    return true;
-}
-/**
-    \fn getFrame
-    \brief This one is special. the lower level can only do sequential access
-            so we in case of non-sequential access we rely on the cache of decoded image.
-            (TODO)
-*/
-bool         ADM_videoFilterBridge::getFrame(uint32_t frame,ADMImage *image)
-{
-    if(frame==0)
-    {
-        rewind();
-        return nextFrame(image);
-    }
-    // Sequential access ?
-    if(frame==lastSentImage+1)
-    {
-        return nextFrame(image);
-    }
-    // Non sequential access : todo
-    ADM_assert(0);
-    return false;
-}
-/**
-    \fn ADM_videoFilterBridge
-
-*/
-FilterInfo  *ADM_videoFilterBridge::getInfo(void)
-{
-    return &bridgeInfo;
-}
-// EOF

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoFilter2/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoFilter2/CMakeLists.txt	2009-11-13 14:34:27 UTC (rev 5480)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoFilter2/CMakeLists.txt	2009-11-13 17:29:31 UTC (rev 5481)
@@ -1,6 +1 @@
-SET(ADM_internalVideoFilter_SRCS 
-	ADM_videoFilterBridge.cpp
-        ADM_filterChain.cpp
-        ADM_pluginLoad.cpp
-)
-ADD_LIBRARY(ADM_internalVideoFilter6 STATIC ${ADM_internalVideoFilter_SRCS})
+ADD_SUBDIRECTORY(src)



From mean at mail.berlios.de  Fri Nov 13 18:29:34 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Fri, 13 Nov 2009 18:29:34 +0100
Subject: [Avidemux-svn-commit] r5482 - in branches/avidemux_2.6_branch_mean:
	avidemux avidemux/common avidemux/common/ADM_videoFilter2
	avidemux/common/ADM_videoFilter2/include
	avidemux/common/ADM_videoFilter2/src
	avidemux/qt4/ADM_userInterfaces/ADM_filters
	avidemux_core/ADM_coreVideoFilter/include
Message-ID: <200911131729.nADHTY76026990@sheep.berlios.de>

Author: mean
Date: 2009-11-13 18:29:33 +0100 (Fri, 13 Nov 2009)
New Revision: 5482

Added:
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoFilter2/include/
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoFilter2/include/ADM_filterChain.h
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoFilter2/include/ADM_videoFilterApi.h
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoFilter2/src/
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoFilter2/src/ADM_videoFilterBridge.h
Removed:
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoFilter/include/ADM_filterChain.h
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoFilter/include/ADM_vf_plugin.h
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoFilter/include/ADM_videoFilterBridge.h
Modified:
   branches/avidemux_2.6_branch_mean/avidemux/common/gtk_gui.cpp
   branches/avidemux_2.6_branch_mean/avidemux/commonCmakeApplication.cmake
   branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_filters/Q_mainfilter.cpp
Log:
[VideoFilter] cleanup plugin a bit, minimal reactivation of qt4 ui

Copied: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoFilter2/include/ADM_filterChain.h (from rev 5481, branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoFilter/include/ADM_filterChain.h)
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoFilter/include/ADM_filterChain.h	2009-11-13 17:29:31 UTC (rev 5481)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoFilter2/include/ADM_filterChain.h	2009-11-13 17:29:33 UTC (rev 5482)
@@ -0,0 +1,30 @@
+/***************************************************************************
+                          \fn ADM_filterChain.h
+                          \brief Base class for Video Filters
+                           (c) Mean 2009
+
+
+
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+
+#ifndef ADM_filterChain_H
+#define ADM_filterChain_H
+#include "ADM_coreVideoFilter.h"
+#include <vector>
+typedef std::vector <ADM_coreVideoFilter *>ADM_videoFilterChain;
+
+
+ADM_videoFilterChain *createVideoFilterChain(uint64_t startAt,uint64_t endAt);
+bool                 destroyVideoFilterChain(ADM_videoFilterChain *chain);
+
+
+#endif
\ No newline at end of file

Added: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoFilter2/include/ADM_videoFilterApi.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoFilter2/include/ADM_videoFilterApi.h	2009-11-13 17:29:31 UTC (rev 5481)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoFilter2/include/ADM_videoFilterApi.h	2009-11-13 17:29:33 UTC (rev 5482)
@@ -0,0 +1,25 @@
+/**
+        \file ADM_videoFilterApi.h
+        \brief Public functions
+*/
+
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ ***************************************************************************/
+#ifndef ADM_VIDEO_FILTER_API_H
+#define ADM_VIDEO_FILTER_API_H
+
+uint8_t ADM_vf_loadPlugins(const char *path);
+
+uint32_t ADM_vf_getNbFilters(void);
+uint32_t ADM_vf_getNbFiltersInCategory(VF_CATEGORY cat);
+
+bool     ADM_vf_getFilterInfo(VF_CATEGORY cat,int filter, const char **name,const char **desc, uint32_t *major,uint32_t *minor,uint32_t *patch);
+
+
+#endif //ADM_VIDEO_FILTER_API_H

Copied: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoFilter2/src/ADM_videoFilterBridge.h (from rev 5481, branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoFilter/include/ADM_videoFilterBridge.h)
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoFilter/include/ADM_videoFilterBridge.h	2009-11-13 17:29:31 UTC (rev 5481)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoFilter2/src/ADM_videoFilterBridge.h	2009-11-13 17:29:33 UTC (rev 5482)
@@ -0,0 +1,47 @@
+/***************************************************************************
+                          \fn ADM_videoFilterBridge.h
+                          \brief Base class for Video Filters
+                           (c) Mean 2009
+
+
+
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+#ifndef ADM_VIDEO_FILTER_BRIDGE_H
+#define ADM_VIDEO_FILTER_BRIDGE_H
+
+#include "ADM_coreVideoFilter.h"
+/**
+    \class ADM_videoFilterBridge
+    \brief Class that transform Editor API to coreVideoFilter API
+
+*/
+class ADM_videoFilterBridge : public ADM_coreVideoFilter
+{
+protected:
+        uint64_t            startTime,endTime;
+        FilterInfo          bridgeInfo;
+        bool                firstImage;
+        uint32_t            lastSentImage;
+        virtual bool        nextFrame(ADMImage *image);    /// Return the next image
+public:
+                            ADM_videoFilterBridge(uint64_t startTime, uint64_t endTime);
+                            ~ADM_videoFilterBridge();
+       virtual bool         getFrame(uint32_t frame,ADMImage *image);
+       
+	   virtual FilterInfo  *getInfo(void);                                      /// Return picture parameters after this filter
+	   virtual bool         getCoupledConf(CONFcouple **couples) {*couples=NULL;return true;} ; /// Return the current filter configuration
+
+        bool                rewind(void);
+
+};
+
+#endif

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/gtk_gui.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/gtk_gui.cpp	2009-11-13 17:29:31 UTC (rev 5481)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/gtk_gui.cpp	2009-11-13 17:29:33 UTC (rev 5482)
@@ -482,13 +482,14 @@
 
       break;
     case ACT_VideoParameter:
+        GUI_handleVFilter();
+        break;
 #if 0
       // first remove current viewer
       if (getPreviewMode()!=ADM_PREVIEW_NONE)
         {
 	         admPreview::stop();
         }
-      GUI_handleVFilter();
       if( getLastVideoFilter()->getInfo()->width % 8 ){
         GUI_Error_HIG(QT_TR_NOOP("Width is not a multiple of 8"),
                       QT_TR_NOOP("This will make trouble for AVI files."));

Modified: branches/avidemux_2.6_branch_mean/avidemux/commonCmakeApplication.cmake
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/commonCmakeApplication.cmake	2009-11-13 17:29:31 UTC (rev 5481)
+++ branches/avidemux_2.6_branch_mean/avidemux/commonCmakeApplication.cmake	2009-11-13 17:29:33 UTC (rev 5482)
@@ -32,6 +32,7 @@
 INCLUDE_DIRECTORIES("${CMAKE_CURRENT_SOURCE_DIR}/../common/")
 INCLUDE_DIRECTORIES("${CMAKE_CURRENT_SOURCE_DIR}/../common/ADM_audioFilter/include")
 INCLUDE_DIRECTORIES("${CMAKE_CURRENT_SOURCE_DIR}/../common/ADM_commonUI")
+INCLUDE_DIRECTORIES("${CMAKE_CURRENT_SOURCE_DIR}/../common/ADM_videoFilter2/include")
 #
 # Add main source
 #

Modified: branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_filters/Q_mainfilter.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_filters/Q_mainfilter.cpp	2009-11-13 17:29:31 UTC (rev 5481)
+++ branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_filters/Q_mainfilter.cpp	2009-11-13 17:29:33 UTC (rev 5482)
@@ -1,6 +1,8 @@
 /***************************************************************************
-    copyright            : (C) 2007 by mean
-    email                : fixounet at free.fr
+
+    \file Q_mainfilter.cpp
+    \brief UI for filters
+    \author mean, fixount at free.fr 2007/2009
     
     * We hide some info the the "type"
     * I.e.
@@ -22,26 +24,22 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
-
-
 #include <vector>
-
 #include "Q_mainfilter.h"
 #include "ADM_default.h"
 #include "DIA_fileSel.h"
-
-# include "prefs.h"
-//#include "ADM_audiodevice/audio_out.h"
-
+#include "DIA_factory.h"
 #include "ADM_render/GUI_render.h"
 
 #include "DIA_coreToolkit.h"
 #include "ADM_editor/ADM_edit.hxx"
-#include "ADM_videoFilter.h"
-#include "ADM_videoFilter_internal.h"
-//#include "ADM_video/ADM_vidPartial.h"
-//#include "ADM_filter/vidVCD.h"
-#include "DIA_factory.h"
+#include "ADM_coreVideoFilter.h"
+#include "ADM_filterCategory.h"
+#include "ADM_videoFilterApi.h"
+
+#include "prefs.h"
+
+
 /*******************************************************/
 #define NB_TREE 8
 #define myFg 0xFF
@@ -49,19 +47,10 @@
 static int max=0;
 /******************************************************/
 #define ALL_FILTER_BASE       1000
-#define EXTERNAL_FILTER_BASE  2000
 #define ACTIVE_FILTER_BASE    3000
 /******************************************************/
-extern FILTER videofilters[VF_MAX_FILTER];
-extern uint32_t nb_active_filter;
-extern std::vector <FilterDescriptor *> allfilters;
-extern std::vector <FilterDescriptor *> filterCategories[VF_MAX];
+uint32_t nb_active_filter=1;
 
-
-extern const char  *filterGetNameFromTag(VF_FILTERS tag);
-extern ADM_Composer *video_body;
-extern AVDMGenericVideoStream *filterCreateFromTag(VF_FILTERS tag,CONFcouple *conf, AVDMGenericVideoStream *in) ;
-extern uint32_t curframe;
 /*******************************************************/
 
 FilterItemEventFilter::FilterItemEventFilter(QWidget *parent) : QObject(parent) {}
@@ -120,19 +109,7 @@
 
 void filtermainWindow::preview(bool b)
 {
-	QListWidgetItem *item = activeList->currentItem();
 
-	if (!item)
-	{
-		printf("No selection\n");
-		return;
-	}
-
-	int itag = item->type();
-	ADM_assert(itag > ACTIVE_FILTER_BASE);
-	itag -= ACTIVE_FILTER_BASE;
-
-	DIA_filterPreview(QT_TR_NOOP("Preview"), videofilters[itag].filter, curframe);
 }
 
 /**
@@ -151,6 +128,7 @@
 */
 void filtermainWindow::add( bool b)
 {
+#if 0
   /* Now that we have the tab, get the selection */
    QListWidgetItem *item=availableList->currentItem();
    VF_FILTERS tag;
@@ -188,7 +166,7 @@
 		buildActiveFilterList();
         setSelected(nb_active_filter - 1);
    }
-
+#endif
 }
 /**
         \fn     remove( bool b)
@@ -196,6 +174,7 @@
 */
 void filtermainWindow::remove( bool b)
 {
+#if 0
    /* Get selection if any */
   /* Now that we have the tab, get the selection */
    QListWidgetItem *item=activeList->currentItem();
@@ -241,7 +220,7 @@
               else
                   setSelected(nb_active_filter-1);
             }
-  
+#endif  
 }
 #if 1
 #define MAKE_BUTTON(button,call) \
@@ -266,6 +245,7 @@
 */
 void filtermainWindow::configure( bool b)
 {
+#if 0
    /* Get selection if any */
   /* Now that we have the tab, get the selection */
    QListWidgetItem *item=activeList->currentItem();
@@ -291,6 +271,7 @@
         getFirstVideoFilter ();
         buildActiveFilterList ();
 		setSelected(itag);
+#endif
 }
 /**
         \fn     up( bool b)
@@ -298,6 +279,7 @@
 */
 void filtermainWindow::up( bool b)
 {
+#if 0
    QListWidgetItem *item=activeList->currentItem();
    if(!item)
    {
@@ -322,6 +304,7 @@
         getFirstVideoFilter ();
         buildActiveFilterList ();
         setSelected(itag-1);
+#endif
 }
 /**
         \fn     down( bool b)
@@ -329,6 +312,7 @@
 */
 void filtermainWindow::down( bool b)
 {
+#if 0
    QListWidgetItem *item=activeList->currentItem();
    if(!item)
    {
@@ -355,6 +339,7 @@
             buildActiveFilterList ();
             setSelected(itag+1);
         }
+#endif
 }
 /**
         \fn     filtermainWindow::filterFamilyClick( QListWidgetItem  *item)
@@ -363,34 +348,43 @@
 
 void filtermainWindow::filterFamilyClick(QListWidgetItem *item)
 {
+
     int family= ui.listFilterCategory->currentRow();
     if(family>=0)
         displayFamily(family);
+
 }
 void filtermainWindow::filterFamilyClick(int  m)
 {
+
         if(m>=0)
                 displayFamily(m);
+
 }
 void filtermainWindow::displayFamily(uint32_t family)
 {
-  printf("Family :%u\n",family);
+
+  
   ADM_assert(family<VF_MAX);
-  std::vector <FilterDescriptor *> vec=filterCategories[family];
-  availableList->clear();
+ 
+  uint32_t nb=ADM_vf_getNbFiltersInCategory((VF_CATEGORY)family);
+    ADM_info("Video filter Family :%u, nb %d\n",family,nb);
   QSize sz;
-  
-  for (uint32_t i = 0; i < vec.size(); i++)
+  availableList->clear();
+  for (uint32_t i = 0; i < nb; i++)
     {
-          QString str = QString("<b>") + vec[i]->name + QString("</b><br>\n<small>") + vec[i]->description + QString("</small>");
+        const char *name,*desc;
+        uint32_t major,minor,patch;
+          ADM_vf_getFilterInfo((VF_CATEGORY)family,i,&name, &desc,&major,&minor,&patch);
+          QString str = QString("<b>") + name + QString("</b><br>\n<small>") + desc + QString("</small>");
          
           QListWidgetItem *item;
           item=new QListWidgetItem(str,availableList,ALL_FILTER_BASE+i+family*100);
-          item->setToolTip(vec[i]->description);
+          item->setToolTip(desc);
           availableList->addItem(item);
      }
 
-  if (vec.size())
+  if (nb)
 	  availableList->setCurrentRow(0);
 }
 
@@ -478,6 +472,7 @@
 */
 void filtermainWindow::buildActiveFilterList(void)
 {
+#if 0
 	activeList->clear();
 
 	for (uint32_t i = 1; i < nb_active_filter; i++)
@@ -500,6 +495,7 @@
 		QListWidgetItem *item=new QListWidgetItem(str,activeList,ACTIVE_FILTER_BASE+i);
 		activeList->addItem(item);
 	}
+#endif
 }
   /**
   */
@@ -568,10 +564,12 @@
 static void partialCb(void *cookie);
 void partialCb(void *cookie)
 {
+#if 0
   void **params=(void **)cookie;
   AVDMGenericVideoStream *son=(AVDMGenericVideoStream *)params[0];
   AVDMGenericVideoStream *previous=(AVDMGenericVideoStream *)params[1];
   son->configure(previous);
+#endif
 }
 /** 
     \fn DIA_getPartial

Deleted: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoFilter/include/ADM_filterChain.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoFilter/include/ADM_filterChain.h	2009-11-13 17:29:31 UTC (rev 5481)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoFilter/include/ADM_filterChain.h	2009-11-13 17:29:33 UTC (rev 5482)
@@ -1,30 +0,0 @@
-/***************************************************************************
-                          \fn ADM_filterChain.h
-                          \brief Base class for Video Filters
-                           (c) Mean 2009
-
-
-
- ***************************************************************************/
-
-/***************************************************************************
- *                                                                         *
- *   This program is free software; you can redistribute it and/or modify  *
- *   it under the terms of the GNU General Public License as published by  *
- *   the Free Software Foundation; either version 2 of the License, or     *
- *   (at your option) any later version.                                   *
- *                                                                         *
- ***************************************************************************/
-
-#ifndef ADM_filterChain_H
-#define ADM_filterChain_H
-#include "ADM_coreVideoFilter.h"
-#include <vector>
-typedef std::vector <ADM_coreVideoFilter *>ADM_videoFilterChain;
-
-
-ADM_videoFilterChain *createVideoFilterChain(uint64_t startAt,uint64_t endAt);
-bool                 destroyVideoFilterChain(ADM_videoFilterChain *chain);
-
-
-#endif
\ No newline at end of file

Deleted: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoFilter/include/ADM_vf_plugin.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoFilter/include/ADM_vf_plugin.h	2009-11-13 17:29:31 UTC (rev 5481)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoFilter/include/ADM_vf_plugin.h	2009-11-13 17:29:33 UTC (rev 5482)
@@ -1,66 +0,0 @@
-/**
-        \fn ADM_vf_plugin.h
-        \brief Interface for dynamically loaded video filter
-*/
-#ifndef ADM_vf_plugin_h
-#define ADM_vf_plugin_h
-#include "ADM_default.h"
-#include "DIA_uiTypes.h"
-#include "ADM_coreVideoFilter.h"
-#include "ADM_filterCategory.h"
-
-#define VF_API_VERSION 1
-/* These are the 6 functions exported by each plugin ...*/
-typedef ADM_coreVideoFilter  *(ADM_vf_CreateFunction)(ADM_coreVideoFilter *previous,CONFcouple *conf);
-typedef void              (ADM_vf_DeleteFunction)(ADM_coreVideoFilter *codec);
-typedef int               (ADM_vf_SupportedUI)(void); //  QT4/GTK / ALL
-typedef uint32_t          (ADM_vf_GetApiVersion)(void);
-typedef bool              (ADM_vf_GetPluginVersion)(uint32_t *major, uint32_t *minor, uint32_t *patch);
-typedef const char       *(ADM_vf_GetString)(void);
-typedef VF_CATEGORY       (ADM_vf_getCategory)(void);
-
-#define DECLARE_VIDEO_FILTER(Class,Major,Minor,Patch,UI,category,internalName,displayName,Desc) \
-	extern "C" { \
-	ADM_coreVideoFilter *create(ADM_coreVideoFilter *previous,CONFcouple *conf)\
-	{ \
-		return new Class(previous,conf);\
-	} \
-	void *destroy(ADM_coreVideoFilter *codec) \
-	{ \
-		Class *a=(Class *)codec;\
-		delete a;\
-	}\
-	int supportedUI(void) \
-	{ \
-		return UI; \
-	} \
-	uint32_t getApiVersion(void)\
-	{\
-			return VF_API_VERSION;\
-	}\
-	bool getFilterVersion(uint32_t *major,uint32_t *minor, uint32_t *patch)\
-	{\
-		*major=Major;\
-		*minor=Minor;\
-		*patch=Patch;\
-		return true;\
-	}\
-	const char *getDesc(void)\
-	{\
-		return Desc; \
-	}\
-	const char *getInternalName(void)\
-	{\
-		return internalName; \
-	}\
-	const char *getDisplayName(void)\
-	{\
-		return displayName; \
-	}\
-    VF_CATEGORY getCategory(void) \
-    { \
-        return category;\
-    }\
-	}
-
-#endif

Deleted: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoFilter/include/ADM_videoFilterBridge.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoFilter/include/ADM_videoFilterBridge.h	2009-11-13 17:29:31 UTC (rev 5481)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoFilter/include/ADM_videoFilterBridge.h	2009-11-13 17:29:33 UTC (rev 5482)
@@ -1,47 +0,0 @@
-/***************************************************************************
-                          \fn ADM_videoFilterBridge.h
-                          \brief Base class for Video Filters
-                           (c) Mean 2009
-
-
-
- ***************************************************************************/
-
-/***************************************************************************
- *                                                                         *
- *   This program is free software; you can redistribute it and/or modify  *
- *   it under the terms of the GNU General Public License as published by  *
- *   the Free Software Foundation; either version 2 of the License, or     *
- *   (at your option) any later version.                                   *
- *                                                                         *
- ***************************************************************************/
-#ifndef ADM_VIDEO_FILTER_BRIDGE_H
-#define ADM_VIDEO_FILTER_BRIDGE_H
-
-#include "ADM_coreVideoFilter.h"
-/**
-    \class ADM_videoFilterBridge
-    \brief Class that transform Editor API to coreVideoFilter API
-
-*/
-class ADM_videoFilterBridge : public ADM_coreVideoFilter
-{
-protected:
-        uint64_t            startTime,endTime;
-        FilterInfo          bridgeInfo;
-        bool                firstImage;
-        uint32_t            lastSentImage;
-        virtual bool        nextFrame(ADMImage *image);    /// Return the next image
-public:
-                            ADM_videoFilterBridge(uint64_t startTime, uint64_t endTime);
-                            ~ADM_videoFilterBridge();
-       virtual bool         getFrame(uint32_t frame,ADMImage *image);
-       
-	   virtual FilterInfo  *getInfo(void);                                      /// Return picture parameters after this filter
-	   virtual bool         getCoupledConf(CONFcouple **couples) {*couples=NULL;return true;} ; /// Return the current filter configuration
-
-        bool                rewind(void);
-
-};
-
-#endif



From mean at mail.berlios.de  Fri Nov 13 18:29:35 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Fri, 13 Nov 2009 18:29:35 +0100
Subject: [Avidemux-svn-commit] r5483 - in branches/avidemux_2.6_branch_mean:
	avidemux/common/ADM_videoFilter2/src
	avidemux_core/ADM_coreVideoFilter/include
Message-ID: <200911131729.nADHTZNJ027001@sheep.berlios.de>

Author: mean
Date: 2009-11-13 18:29:35 +0100 (Fri, 13 Nov 2009)
New Revision: 5483

Added:
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoFilter2/src/ADM_filterChain.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoFilter2/src/ADM_pluginLoad.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoFilter2/src/ADM_videoFilterBridge.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoFilter2/src/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoFilter/include/ADM_coreVideoFilterInternal.h
Log:
[VideoFilter] cleanup plugin a bit, minimal reactivation of qt4 ui

Added: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoFilter2/src/ADM_filterChain.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoFilter2/src/ADM_filterChain.cpp	2009-11-13 17:29:33 UTC (rev 5482)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoFilter2/src/ADM_filterChain.cpp	2009-11-13 17:29:35 UTC (rev 5483)
@@ -0,0 +1,51 @@
+/***************************************************************************
+                          \fn ADM_filterChain.cpp
+                          \brief Base class for Video Filters
+                           (c) Mean 2009
+
+
+
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+#include "ADM_default.h"
+#include "ADM_coreVideoFilter.h"
+#include "ADM_filterChain.h"
+#include "ADM_videoFilterBridge.h"
+/**
+    \fn createVideoFilterChain
+    \brief Create a filter chain
+*/
+ADM_videoFilterChain *createVideoFilterChain(uint64_t startAt,uint64_t endAt)
+{
+    ADM_videoFilterChain *chain=new ADM_videoFilterChain;
+    // 1- Add bridge always # 1
+    ADM_videoFilterBridge *bridge=new ADM_videoFilterBridge(startAt,endAt);
+    chain->push_back(bridge);
+    return chain;
+}
+/**
+        \fn destroyVideoFilterChain
+        \brief Destroy a filter chain
+*/
+bool                 destroyVideoFilterChain(ADM_videoFilterChain *chain)
+{
+    ADM_assert(chain->size());
+    for(int i=0;i<chain->size();i++)
+    {
+        ADM_coreVideoFilter *filter=(*chain)[i];
+        delete filter;
+        (*chain)[i]=NULL;
+    }
+    chain->clear();
+    return true;
+}
+
+// EOF

Added: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoFilter2/src/ADM_pluginLoad.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoFilter2/src/ADM_pluginLoad.cpp	2009-11-13 17:29:33 UTC (rev 5482)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoFilter2/src/ADM_pluginLoad.cpp	2009-11-13 17:29:35 UTC (rev 5483)
@@ -0,0 +1,211 @@
+/**
+        \file ADM_pluginLoad.cpp
+        \brief Interface for dynamically loaded video filter
+
+
+*/
+
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ ***************************************************************************/
+#include "ADM_default.h"
+#include "ADM_coreVideoFilterInternal.h"
+#include "ADM_dynamicLoading.h"
+#include "ADM_videoFilterApi.h"
+#include <vector>
+
+#if 1
+#define aprintf printf
+#else
+#define aprintf(...) {}
+#endif
+static uint32_t lastTag=100;
+/**
+    \struct admVideoFilterInfo
+*/
+typedef struct  
+{
+        const char                  *internalName;
+        const char                  *displayName;
+        const char                  *desc;
+        VF_CATEGORY                 category;   
+}admVideoFilterInfo;
+
+/**
+ *  \class ADM_vf_plugin
+ *  \brief Base class for video filter loader
+ */
+class ADM_vf_plugin : public ADM_LibWrapper
+{
+	public:
+		ADM_vf_CreateFunction		*create;
+		ADM_vf_DeleteFunction		*destroy;
+		ADM_vf_SupportedUI		    *supportedUI;
+        
+		ADM_vf_GetApiVersion		*getApiVersion;
+		ADM_vf_GetPluginVersion	    *getFilterVersion;
+		ADM_vf_GetString    	    *getDesc;
+        ADM_vf_GetString    	    *getInternalName;
+        ADM_vf_GetString    	    *getDisplayName;
+        ADM_vf_getCategory          *getCategory;
+
+        const char 					*nameOfLibrary;
+	    VF_FILTERS                  tag;
+        admVideoFilterInfo          info;
+
+		ADM_vf_plugin(const char *file) : ADM_LibWrapper()
+		{
+			initialised = (loadLibrary(file) && getSymbols(9,
+				&create, "create",
+				&destroy, "destroy",
+				&getApiVersion, "getApiVersion",
+				&supportedUI, "supportedUI",
+				&getFilterVersion, "getFilterVersion",
+				&getDesc, "getDesc",
+				&getInternalName, "getInternalName",
+				&getDisplayName, "getDisplayName",
+                &getCategory,"getCategory"
+                ));
+		};
+};
+
+std::vector<ADM_vf_plugin *> ADM_videoFilterPluginsList[VF_MAX];
+/**
+ * 	\fn tryLoadingVideoFilterPlugin
+ *  \brief try to load the plugin given as argument..
+ */
+static uint8_t tryLoadingVideoFilterPlugin(const char *file)
+{
+	ADM_vf_plugin *plugin = new ADM_vf_plugin(file);
+    admVideoFilterInfo          *info=NULL;
+
+	if (!plugin->isAvailable())
+	{
+		printf("[ADM_vf_plugin] Unable to load %s\n", ADM_GetFileName(file));
+		goto Err_ad;
+	}
+
+	// Check API version
+	if (plugin->getApiVersion() != VF_API_VERSION)
+	{
+		printf("[ADM_vf_plugin] File %s has API version too old (%d vs %d)\n",
+			ADM_GetFileName(file), plugin->getApiVersion(), VF_API_VERSION);
+		goto Err_ad;
+	}
+    if(!(plugin->supportedUI() & 0xff))
+    {  // FIXME
+
+
+    }
+	// Get infos
+	uint32_t major, minor, patch;
+
+	plugin->getFilterVersion(&major, &minor, &patch);
+	plugin->nameOfLibrary = ADM_strdup(ADM_GetFileName(file));
+
+    info=&(plugin->info);
+
+
+    info->internalName=plugin->getInternalName();
+    info->desc=plugin->getDesc();
+    info->displayName=plugin->getDisplayName();
+    info->category=plugin->getCategory();
+
+	printf("[ADM_vf_plugin] Plugin loaded version %d.%d.%d, name %s/%s\n",
+		major, minor, patch, info->internalName, info->displayName);
+    if(info->category>=VF_MAX)
+    {
+        ADM_error("This filter has an unknown caregory!\n");
+        goto Err_ad;
+    
+    }else   
+    {
+        plugin->tag=lastTag++;
+        ADM_videoFilterPluginsList[info->category].push_back(plugin);
+    }
+
+	return 1;
+
+Err_ad:
+	delete plugin;
+	return 0;
+}
+/**
+    \fn ADM_vf_getNbFilters
+    \brief returns the # of loaded video filter
+*/
+uint32_t ADM_vf_getNbFilters(void)
+{
+    uint32_t sum=0;
+    for(int i=0;i<VF_MAX;i++)
+    {
+        sum+=ADM_videoFilterPluginsList[i].size();
+    }
+    return sum;
+}
+/**
+    \fn ADM_vf_getNbFiltersInCategory
+    \brief returns the # of loaded video filter in the given family
+*/
+uint32_t ADM_vf_getNbFiltersInCategory(VF_CATEGORY cat)
+{
+    ADM_assert(cat<VF_MAX);
+    return  ADM_videoFilterPluginsList[cat].size();
+}
+/**
+    \fn ADM_vf_getFilterInfo
+    \brief returns infos about a given filter
+    @param filter [in] # of the filter we are intereseted in, between 0 & ADM_ad_getNbFilters
+    @param name [out] Name of the decoder plugin
+    @param major, minor,patch [out] Version number
+    @return true
+*/
+bool ADM_vf_getFilterInfo(VF_CATEGORY cat,int filter, const char **name,const char **desc,
+                uint32_t *major,uint32_t *minor,uint32_t *patch       )
+{
+
+        ADM_assert(filter>=0 && cat<VF_MAX && filter<ADM_videoFilterPluginsList[cat].size());
+
+    	ADM_vf_plugin *a=ADM_videoFilterPluginsList[cat][filter];
+        a->getFilterVersion(major, minor, patch);
+
+        *name=a->info.displayName;
+        *desc=a->info.desc;
+        return 1;
+}
+
+/**
+ * 	\fn ADM_ad_GetPluginVersion
+ *  \brief load all audio plugins
+ */
+uint8_t ADM_vf_loadPlugins(const char *path)
+{
+#define MAX_EXTERNAL_FILTER 50
+
+	char *files[MAX_EXTERNAL_FILTER];
+	uint32_t nbFile;
+
+	memset(files,0,sizeof(char *)*MAX_EXTERNAL_FILTER);
+	printf("[ADM_vf_plugin] Scanning directory %s\n",path);
+
+	if(!buildDirectoryContent(&nbFile, path, files, MAX_EXTERNAL_FILTER, SHARED_LIB_EXT))
+	{
+		printf("[ADM_vf_plugin] Cannot parse plugin\n");
+		return 0;
+	}
+
+	for(int i=0;i<nbFile;i++)
+		tryLoadingVideoFilterPlugin(files[i]);
+
+	printf("[ADM_vf_plugin] Scanning done, found %d video filer(s)\n", (int)ADM_vf_getNbFilters());
+
+	return 1;
+}
+
+
+//EOF

Added: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoFilter2/src/ADM_videoFilterBridge.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoFilter2/src/ADM_videoFilterBridge.cpp	2009-11-13 17:29:33 UTC (rev 5482)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoFilter2/src/ADM_videoFilterBridge.cpp	2009-11-13 17:29:35 UTC (rev 5483)
@@ -0,0 +1,128 @@
+/***************************************************************************
+                          \fn ADM_videoFilterBridge
+                          \brief Interface between editor & filter chain
+                           (c) Mean 2009
+
+
+
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+
+#include "ADM_default.h"
+#include "ADM_videoFilterBridge.h"
+#include "ADM_editor/ADM_edit.hxx"
+extern ADM_Composer *video_body;
+/**
+    \fn ADM_videoFilterBridge
+
+*/
+ADM_videoFilterBridge::ADM_videoFilterBridge(uint64_t startTime, uint64_t endTime) : ADM_coreVideoFilter(NULL,NULL)
+{
+    printf("[VideoFilterBridge] Creating bridge from %"LU" s to %"LU" s\n",(uint32_t)(startTime/1000000LL),(uint32_t)(endTime/1000000LL));
+    this->startTime=startTime;
+    this->endTime=endTime;
+    
+    aviInfo fo;
+    video_body->getVideoInfo(&fo);
+    bridgeInfo.width=fo.width;
+    bridgeInfo.height=fo.height;
+    bridgeInfo.frameIncrement=video_body->getFrameIncrement();
+    bridgeInfo.totalDuration=video_body->getVideoDuration();
+    bridgeInfo.frameIncrement=video_body->getFrameIncrement();
+    rewind();
+}
+/**
+    \fn rewind
+    \brief go or return to the original position...
+*/
+bool ADM_videoFilterBridge::rewind(void)
+{
+    printf("[VideoBridge] Goint to %"LU" ms\n",(uint32_t)(startTime/1000));
+    video_body->goToTimeVideo(startTime);
+    firstImage=true;
+    lastSentImage=0;
+    return true;
+}
+
+/**
+    \fn ADM_videoFilterBridge
+
+*/
+ADM_videoFilterBridge::~ADM_videoFilterBridge()
+{
+
+}
+/**
+    \fn getNextFrame
+    \brief
+*/
+bool         ADM_videoFilterBridge::nextFrame(ADMImage *image)
+{
+again:
+    bool r=false;
+    if(firstImage==true)
+    {
+        firstImage=false;
+        r=video_body->samePicture(image);
+        lastSentImage=0;
+    }else
+    {
+        r=   video_body->nextPicture(image);
+        lastSentImage++;
+    }
+    if(r==false) return false;
+    // Translate pts if any
+    int64_t pts=image->Pts;
+    if(pts>endTime)
+    {
+        printf("[VideoBridge] This frame is too late (%"LLD" vs %"LLU")\n",pts,startTime);
+        return false;
+    }
+    if(pts<startTime) 
+    {
+            printf("[VideoBridge] This frame is too early (%"LLD" vs %"LLU")\n",pts,endTime);
+            goto again;
+    }
+    // Rescale time
+    image->Pts-=startTime;
+    return true;
+}
+/**
+    \fn getFrame
+    \brief This one is special. the lower level can only do sequential access
+            so we in case of non-sequential access we rely on the cache of decoded image.
+            (TODO)
+*/
+bool         ADM_videoFilterBridge::getFrame(uint32_t frame,ADMImage *image)
+{
+    if(frame==0)
+    {
+        rewind();
+        return nextFrame(image);
+    }
+    // Sequential access ?
+    if(frame==lastSentImage+1)
+    {
+        return nextFrame(image);
+    }
+    // Non sequential access : todo
+    ADM_assert(0);
+    return false;
+}
+/**
+    \fn ADM_videoFilterBridge
+
+*/
+FilterInfo  *ADM_videoFilterBridge::getInfo(void)
+{
+    return &bridgeInfo;
+}
+// EOF

Added: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoFilter2/src/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoFilter2/src/CMakeLists.txt	2009-11-13 17:29:33 UTC (rev 5482)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoFilter2/src/CMakeLists.txt	2009-11-13 17:29:35 UTC (rev 5483)
@@ -0,0 +1,6 @@
+SET(ADM_internalVideoFilter_SRCS 
+	ADM_videoFilterBridge.cpp
+        ADM_filterChain.cpp
+        ADM_pluginLoad.cpp
+)
+ADD_LIBRARY(ADM_internalVideoFilter6 STATIC ${ADM_internalVideoFilter_SRCS})

Added: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoFilter/include/ADM_coreVideoFilterInternal.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoFilter/include/ADM_coreVideoFilterInternal.h	2009-11-13 17:29:33 UTC (rev 5482)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoFilter/include/ADM_coreVideoFilterInternal.h	2009-11-13 17:29:35 UTC (rev 5483)
@@ -0,0 +1,66 @@
+/**
+        \fn ADM_vf_plugin.h
+        \brief Interface for dynamically loaded video filter
+*/
+#ifndef ADM_vf_plugin_h
+#define ADM_vf_plugin_h
+#include "ADM_default.h"
+#include "DIA_uiTypes.h"
+#include "ADM_coreVideoFilter.h"
+#include "ADM_filterCategory.h"
+
+#define VF_API_VERSION 1
+/* These are the 6 functions exported by each plugin ...*/
+typedef ADM_coreVideoFilter  *(ADM_vf_CreateFunction)(ADM_coreVideoFilter *previous,CONFcouple *conf);
+typedef void              (ADM_vf_DeleteFunction)(ADM_coreVideoFilter *codec);
+typedef int               (ADM_vf_SupportedUI)(void); //  QT4/GTK / ALL
+typedef uint32_t          (ADM_vf_GetApiVersion)(void);
+typedef bool              (ADM_vf_GetPluginVersion)(uint32_t *major, uint32_t *minor, uint32_t *patch);
+typedef const char       *(ADM_vf_GetString)(void);
+typedef VF_CATEGORY       (ADM_vf_getCategory)(void);
+
+#define DECLARE_VIDEO_FILTER(Class,Major,Minor,Patch,UI,category,internalName,displayName,Desc) \
+	extern "C" { \
+	ADM_coreVideoFilter *create(ADM_coreVideoFilter *previous,CONFcouple *conf)\
+	{ \
+		return new Class(previous,conf);\
+	} \
+	void *destroy(ADM_coreVideoFilter *codec) \
+	{ \
+		Class *a=(Class *)codec;\
+		delete a;\
+	}\
+	int supportedUI(void) \
+	{ \
+		return UI; \
+	} \
+	uint32_t getApiVersion(void)\
+	{\
+			return VF_API_VERSION;\
+	}\
+	bool getFilterVersion(uint32_t *major,uint32_t *minor, uint32_t *patch)\
+	{\
+		*major=Major;\
+		*minor=Minor;\
+		*patch=Patch;\
+		return true;\
+	}\
+	const char *getDesc(void)\
+	{\
+		return Desc; \
+	}\
+	const char *getInternalName(void)\
+	{\
+		return internalName; \
+	}\
+	const char *getDisplayName(void)\
+	{\
+		return displayName; \
+	}\
+    VF_CATEGORY getCategory(void) \
+    { \
+        return category;\
+    }\
+	}
+
+#endif



From mean at mail.berlios.de  Fri Nov 13 18:29:38 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Fri, 13 Nov 2009 18:29:38 +0100
Subject: [Avidemux-svn-commit] r5484 -
	branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/ADM_filters
Message-ID: <200911131729.nADHTc7Q027011@sheep.berlios.de>

Author: mean
Date: 2009-11-13 18:29:37 +0100 (Fri, 13 Nov 2009)
New Revision: 5484

Modified:
   branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/ADM_filters/gui_filtermanager.cpp
Log:
[Gtk] Make it compile

Modified: branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/ADM_filters/gui_filtermanager.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/ADM_filters/gui_filtermanager.cpp	2009-11-13 17:29:35 UTC (rev 5483)
+++ branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/ADM_filters/gui_filtermanager.cpp	2009-11-13 17:29:37 UTC (rev 5484)
@@ -154,7 +154,8 @@
 // the action
 //______________________________________________________
 void on_action (gui_act action)
-{
+{
+#if 0
     uint32_t action_parameter;
     VF_FILTERS tag = VF_INVALID;
 
@@ -229,7 +230,8 @@
         break;
 
     case A_PARTIAL:
-#if 0
+
+
         if (!action_parameter) break;
         AVDMGenericVideoStream *replace;
         CONFcouple *conf;
@@ -257,9 +259,7 @@
 			setSelectionNumber(nb_active_filter-1, WID(treeview0), stores[0], action_parameter-1);
         }
         else delete replace;
-#endif
-        break;
-
+        break;
     case A_UP:
         if (action_parameter < 2) break;
         // swap action parameter & action parameter -1
@@ -352,20 +352,23 @@
         else
 
             GUI_FileSelWrite (QT_TR_NOOP("Save set of filters"), filterSaveXml);
-        break;
-#if 0
+        break;
+
+
     default:
         printf ("Unknown action :%d, action param %d\n", action, action_parameter);
         ADM_assert (0);
+
+    } //end of switch
 #endif
-    } //end of switch
 }
 /*
  	\fn getFilterFromSelection
 	\brief returns the tag of the selected filter
 */
 VF_FILTERS getFilterFromSelection (void)
-{
+{
+#if 0
     uint32_t sel = 0;
 	uint8_t ret = 0;
     VF_FILTERS tag = VF_INVALID;
@@ -377,7 +380,8 @@
 	{
         tag = filterCategories[page-1][sel]->tag;
 	}
-    return tag;
+    return tag;
+#endif
 }
 /**
  * 	\fn createFilterDialog
@@ -386,9 +390,10 @@
  */
 GtkWidget *
 createFilterDialog (void)
-{
+{
+
     dialog = create_dialog1();
-
+#if 0
     //connect toolbar
 #define CALLME_TOOLBAR(x,y) gtk_signal_connect(GTK_OBJECT(WID(x)),"clicked",  GTK_SIGNAL_FUNC(wrapToolButton), (void *) y);
 #define CALLME(x,y) gtk_dialog_add_action_widget (GTK_DIALOG (dialog), WID(x), y)
@@ -492,7 +497,8 @@
                       "size-allocate",
                       G_CALLBACK(on_treeview1_size_allocate),
                       renderers[i]);
-    }
+    }
+#endif
     return dialog;
 }
 /**
@@ -500,7 +506,8 @@
  *  \brief Update the list of activated filters
  */
 void updateFilterList (void)
-{
+{
+#if 0
     g_signal_handler_block(stores[0], row_inserted_id);
     g_signal_handler_block(stores[0], row_deleted_id);
     GtkTreeIter iter;
@@ -557,7 +564,8 @@
         g_free(str);
     }
     g_signal_handler_unblock(stores[0], row_inserted_id);
-    g_signal_handler_unblock(stores[0], row_deleted_id);
+    g_signal_handler_unblock(stores[0], row_deleted_id);
+#endif
 }
 
 void
@@ -582,7 +590,8 @@
 
 void
 on_treeview0_row_deleted(GtkTreeModel *treemodel, GtkTreePath *arg1, gpointer user_data)
-{
+{
+#if 0
     GtkTreeIter iter;
     VF_FILTERS				tag;
 	CONFcouple				*conf = 0;
@@ -605,7 +614,8 @@
             gtk_tree_model_iter_next (GTK_TREE_MODEL(stores[0]), &iter);
 	    }
     updateFilterList();
-    //on_action(A_REORDERED);
+    //on_action(A_REORDERED);
+#endif
 }
 void
 on_treeview0_row_inserted(GtkTreeModel *treemodel, GtkTreePath *arg1, GtkTreeIter *arg2, gpointer user_data)



From mean at mail.berlios.de  Fri Nov 13 18:29:39 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Fri, 13 Nov 2009 18:29:39 +0100
Subject: [Avidemux-svn-commit] r5485 -
	branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoEncoder/include
Message-ID: <200911131729.nADHTddV027021@sheep.berlios.de>

Author: mean
Date: 2009-11-13 18:29:38 +0100 (Fri, 13 Nov 2009)
New Revision: 5485

Modified:
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoEncoder/include/ADM_coreVideoEncoderInternal.h
Log:
[videoEncoder] Switch to new configuration scheme

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoEncoder/include/ADM_coreVideoEncoderInternal.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoEncoder/include/ADM_coreVideoEncoderInternal.h	2009-11-13 17:29:37 UTC (rev 5484)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoEncoder/include/ADM_coreVideoEncoderInternal.h	2009-11-13 17:29:38 UTC (rev 5485)
@@ -15,9 +15,10 @@
 #ifndef VIDEOENCODERINTERNAL_H
 #define VIDEOENCODERINTERNAL_H
 
-#define ADM_VIDEO_ENCODER_API_VERSION 1
+#define ADM_VIDEO_ENCODER_API_VERSION 2
 #include "ADM_coreVideoEncoder.h"
 #include "DIA_uiTypes.h"
+#include "ADM_paramList.h"
 
 /*!
   This structure defines a video encoder
@@ -36,8 +37,8 @@
     ADM_coreVideoEncoder *(*create)(ADM_coreVideoFilter *head);  
     void         (*destroy)(ADM_coreVideoEncoder *codec);
     bool         (*configure)(void);                                // Call UI to set it up
-    bool         (*getConfigurationData)(uint32_t *l, uint8_t **d); // Get the encoder private conf
-    bool         (*setConfigurationData)(uint32_t l, uint8_t *d);   // Set the encoder private conf
+    bool         (*getConfigurationData)(CONFcouple **c); // Get the encoder private conf
+    bool         (*setConfigurationData)(CONFcouple *c);   // Set the encoder private conf
 
     ADM_UI_TYPE  UIType;                // Type of UI
     uint32_t     major,minor,patch;     // Version of the plugin
@@ -48,8 +49,8 @@
 // Macros to declare audio encoder
 /**************************************************************************/
 #define ADM_DECLARE_VIDEO_ENCODER_PREAMBLE(Class) \
-static bool getConfigurationData (uint32_t * l, uint8_t ** d); \
-static bool setConfigurationData (uint32_t l, uint8_t * d);\
+static bool getConfigurationData (CONFcouple **c); \
+static bool setConfigurationData (CONFcouple *c);\
 \
 static ADM_coreVideoEncoder * create (ADM_coreVideoFilter * head) \
 { \
@@ -61,42 +62,8 @@
   delete z; \
 } 
 //******************************************************
-#define ADM_DECLARE_VIDEO_ENCODER_CONFIG(configData) \
-bool getConfigurationData (uint32_t * l, uint8_t ** d)\
-{\
-  *l = sizeof (configData); \
-  *d = (uint8_t *) & configData; \
-  return 1; \
-} \
-bool setConfigurationData (uint32_t l, uint8_t * d)\
-{\
-  if (sizeof (configData) != l) \
-    {\
-      GUI_Error_HIG ("Audio Encoder",\
-		     "The configuration size does not match the codec size"); \
-      return 0; \
-    }\
-  memcpy (&configData, d, l); \
-  return 1;\
-}
 
-
-// Use that one is the encoder has not configuration
-
-#define ADM_DECLARE_VIDEO_ENCODER_NO_CONFIG() \
-bool getConfigurationData (uint32_t * l, uint8_t ** d)\
-{\
-  *l =0; \
-  *d = NULL; \
-  return 1; \
-} \
-bool setConfigurationData (uint32_t l, uint8_t * d)\
-{\
-  return 1;\
-}
-
-
-#define ADM_DECLARE_VIDEO_ENCODER_MAIN(name,menuName,desc,configure,uiType,maj,minV,patch) \
+#define ADM_DECLARE_VIDEO_ENCODER_MAIN(name,menuName,desc,configure,uiType,maj,minV,patch,confTemplate,confVar) \
 static ADM_videoEncoderDesc encoderDesc={\
     name,\
     menuName,\
@@ -111,6 +78,15 @@
     maj,minV,patch,\
     NULL\
 };\
+bool getConfigurationData (CONFcouple **c)\
+{\
+         if(confTemplate==NULL) {*c=NULL;return true;} \
+         return ADM_paramSave(c,confTemplate,confVar); \
+}\
+bool setConfigurationData (CONFcouple *c)\
+{\
+        return ADM_paramLoad(c,confTemplate,confVar); \
+} \
 extern "C" ADM_videoEncoderDesc *getInfo (void) \
 { \
   return &encoderDesc; \



From mean at mail.berlios.de  Fri Nov 13 18:29:40 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Fri, 13 Nov 2009 18:29:40 +0100
Subject: [Avidemux-svn-commit] r5486 - in
	branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder:
	ffFlv1 ffMpeg4 ffMsMpeg4 huff jpeg png yv12
Message-ID: <200911131729.nADHTeeo027031@sheep.berlios.de>

Author: mean
Date: 2009-11-13 18:29:40 +0100 (Fri, 13 Nov 2009)
New Revision: 5486

Modified:
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/ffFlv1/ffFlv1Plugin.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/ffMpeg4/ffMpeg4Plugin.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/ffMsMpeg4/ffMsMp4Plugin.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/huff/huffPlugin.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/jpeg/jpegPlugin.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/png/pngPlugin.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/yv12/yv12Plugin.cpp
Log:
[videoEncoder] Update encoder to follow new way of declaring encoders

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/ffFlv1/ffFlv1Plugin.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/ffFlv1/ffFlv1Plugin.cpp	2009-11-13 17:29:38 UTC (rev 5485)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/ffFlv1/ffFlv1Plugin.cpp	2009-11-13 17:29:40 UTC (rev 5486)
@@ -22,10 +22,12 @@
 extern bool         ffFlv1Configure(void);
 
 ADM_DECLARE_VIDEO_ENCODER_PREAMBLE(ADM_ffFlv1Encoder);
-ADM_DECLARE_VIDEO_ENCODER_NO_CONFIG();
 ADM_DECLARE_VIDEO_ENCODER_MAIN("ffFlv1",
                                "FLV1(flash)",
                                "Simple ffmpeg based Flv1 Encoder (c) 2009 Mean",
                                 ffFlv1Configure, // No configuration
                                 ADM_UI_ALL,
-                                1,0,0);
+                                1,0,0,
+                                NULL, // conf template
+                                NULL // conf var
+);

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/ffMpeg4/ffMpeg4Plugin.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/ffMpeg4/ffMpeg4Plugin.cpp	2009-11-13 17:29:38 UTC (rev 5485)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/ffMpeg4/ffMpeg4Plugin.cpp	2009-11-13 17:29:40 UTC (rev 5486)
@@ -22,10 +22,12 @@
 extern bool         ffMpeg4Configure(void);
 
 ADM_DECLARE_VIDEO_ENCODER_PREAMBLE(ADM_ffMpeg4Encoder);
-ADM_DECLARE_VIDEO_ENCODER_NO_CONFIG();
 ADM_DECLARE_VIDEO_ENCODER_MAIN("ffMpeg4",
                                "Mpeg4 ASP (ff)",
                                "Simple ffmpeg based mpeg4 Encoder (c) 2009 Mean",
                                 ffMpeg4Configure, // No configuration
                                 ADM_UI_ALL,
-                                1,0,0);
+                                1,0,0,
+                                NULL, // conf template
+                                NULL // conf var
+);

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/ffMsMpeg4/ffMsMp4Plugin.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/ffMsMpeg4/ffMsMp4Plugin.cpp	2009-11-13 17:29:38 UTC (rev 5485)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/ffMsMpeg4/ffMsMp4Plugin.cpp	2009-11-13 17:29:40 UTC (rev 5486)
@@ -22,10 +22,12 @@
 extern bool         ffMsMp4Configure(void);
 
 ADM_DECLARE_VIDEO_ENCODER_PREAMBLE(ADM_ffMsMp4Encoder);
-ADM_DECLARE_VIDEO_ENCODER_NO_CONFIG();
 ADM_DECLARE_VIDEO_ENCODER_MAIN("ffMsMp4",
                                "MsMpeg4(Divx3)",
                                "Simple ffmpeg based ms mpeg4 Encoder (c) 2009 Mean",
                                 ffMsMp4Configure, // No configuration
                                 ADM_UI_ALL,
-                                1,0,0);
+                                1,0,0,
+                                NULL, // conf template
+                                NULL // conf var
+);

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/huff/huffPlugin.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/huff/huffPlugin.cpp	2009-11-13 17:29:38 UTC (rev 5485)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/huff/huffPlugin.cpp	2009-11-13 17:29:40 UTC (rev 5486)
@@ -22,10 +22,12 @@
 extern bool         huffConfigure(void);
 
 ADM_DECLARE_VIDEO_ENCODER_PREAMBLE(ADM_huffEncoder);
-ADM_DECLARE_VIDEO_ENCODER_NO_CONFIG();
 ADM_DECLARE_VIDEO_ENCODER_MAIN("HUFFYUV",
                                "(FF)HuffYUV",
                                "FF Huffyuv (c) 2009 Mean",
                                 huffConfigure, // No configuration
                                 ADM_UI_ALL,
-                                1,0,0);
+                                1,0,0,
+                                NULL, // conf template
+                                NULL // conf var
+);

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/jpeg/jpegPlugin.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/jpeg/jpegPlugin.cpp	2009-11-13 17:29:38 UTC (rev 5485)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/jpeg/jpegPlugin.cpp	2009-11-13 17:29:40 UTC (rev 5486)
@@ -22,10 +22,12 @@
 extern bool         jpegConfigure(void);
 
 ADM_DECLARE_VIDEO_ENCODER_PREAMBLE(ADM_jpegEncoder);
-ADM_DECLARE_VIDEO_ENCODER_NO_CONFIG();
 ADM_DECLARE_VIDEO_ENCODER_MAIN("Mjpeg",
                                "Mjpeg Encoder",
                                "Simple jpeg Encoder (c) 2009 Mean",
                                 jpegConfigure, // No configuration
                                 ADM_UI_ALL,
-                                1,0,0);
+                                1,0,0,
+                                NULL, // conf template
+                                NULL // conf var
+);

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/png/pngPlugin.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/png/pngPlugin.cpp	2009-11-13 17:29:38 UTC (rev 5485)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/png/pngPlugin.cpp	2009-11-13 17:29:40 UTC (rev 5486)
@@ -21,10 +21,12 @@
 
 
 ADM_DECLARE_VIDEO_ENCODER_PREAMBLE(ADM_pngEncoder);
-ADM_DECLARE_VIDEO_ENCODER_NO_CONFIG();
 ADM_DECLARE_VIDEO_ENCODER_MAIN("PNG",
                                "PNG Encoder",
                                "Simple PNG Encoder (c) 2009 Mean",
                                 NULL, // No configuration
                                 ADM_UI_ALL,
-                                1,0,0);
\ No newline at end of file
+                                1,0,0,
+                                NULL, // conf template
+                                NULL // conf var
+);
\ No newline at end of file

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/yv12/yv12Plugin.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/yv12/yv12Plugin.cpp	2009-11-13 17:29:38 UTC (rev 5485)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/yv12/yv12Plugin.cpp	2009-11-13 17:29:40 UTC (rev 5486)
@@ -21,10 +21,12 @@
 
 
 ADM_DECLARE_VIDEO_ENCODER_PREAMBLE(ADM_yv12Encoder);
-ADM_DECLARE_VIDEO_ENCODER_NO_CONFIG();
 ADM_DECLARE_VIDEO_ENCODER_MAIN("YV12Encoder",
                                "YV12 Encoder",
                                "Simple YV12 Encoder (c) 2009 Mean",
                                 NULL, // No configuration
                                 ADM_UI_ALL,
-                                1,0,0);
\ No newline at end of file
+                                1,0,0,
+                                NULL, // conf template
+                                NULL // conf var
+);
\ No newline at end of file



From mean at mail.berlios.de  Fri Nov 13 18:29:42 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Fri, 13 Nov 2009 18:29:42 +0100
Subject: [Avidemux-svn-commit] r5487 -
	branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/dummy
Message-ID: <200911131729.nADHTgXt027041@sheep.berlios.de>

Author: mean
Date: 2009-11-13 18:29:42 +0100 (Fri, 13 Nov 2009)
New Revision: 5487

Modified:
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/dummy/dummyVideoFilter.cpp
Log:
[VideoFilter] Update as ADM_vf_plugin is now called ADM_coreVideoFilterInternal.h

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/dummy/dummyVideoFilter.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/dummy/dummyVideoFilter.cpp	2009-11-13 17:29:40 UTC (rev 5486)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/dummy/dummyVideoFilter.cpp	2009-11-13 17:29:42 UTC (rev 5487)
@@ -16,7 +16,7 @@
  ***************************************************************************/
 
 #include "ADM_default.h"
-#include "ADM_vf_plugin.h"
+#include "ADM_coreVideoFilterInternal.h"
 
 /**
     \class dummyVideoFilter



From mean at mail.berlios.de  Fri Nov 13 18:29:44 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Fri, 13 Nov 2009 18:29:44 +0100
Subject: [Avidemux-svn-commit] r5488 - in branches/avidemux_2.6_branch_mean:
	avidemux avidemux/common avidemux/common/ADM_editor
	avidemux/common/ADM_script avidemux/common/ADM_toolkit
	avidemux/common/ADM_videoEncoder
	avidemux/common/ADM_videoEncoder/include
	avidemux/common/ADM_videoEncoder/src
	avidemux_core/ADM_coreVideoEncoder/include
	avidemux_plugins/ADM_videoEncoder/huff
Message-ID: <200911131729.nADHTiMi027051@sheep.berlios.de>

Author: mean
Date: 2009-11-13 18:29:44 +0100 (Fri, 13 Nov 2009)
New Revision: 5488

Added:
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoEncoder/include/
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoEncoder/include/ADM_videoEncoderApi.h
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoEncoder/src/
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoEncoder/src/ADM_VideoEncoders.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoEncoder/src/ADM_dynVideoEncoder.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoEncoder/src/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/huff/huff_encoder.conf
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/huff/huff_encoder.h
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/huff/huff_encoder_desc.cpp
Removed:
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoEncoder/ADM_VideoEncoders.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoEncoder/ADM_dynVideoEncoder.cpp
Modified:
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edLoadSave.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script/ADM_JSAvidemuxVideo.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_toolkit/automation.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoEncoder/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux/common/gtk_gui.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/gui_savenew.cpp
   branches/avidemux_2.6_branch_mean/avidemux/commonCmakeApplication.cmake
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoEncoder/include/ADM_coreVideoEncoder.h
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/huff/ADM_huffEncoder.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/huff/ADM_huffEncoder.h
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/huff/huffPlugin.cpp
Log:
[VideoEncoder] Use param list to store video encoder configuration to file

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edLoadSave.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edLoadSave.cpp	2009-11-13 17:29:42 UTC (rev 5487)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edLoadSave.cpp	2009-11-13 17:29:44 UTC (rev 5488)
@@ -27,6 +27,7 @@
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_videoFilter.h"
 #include "ADM_videoFilter_internal.h"
+#include "ADM_videoEncoderApi.h"
 #include "ADM_paramList.h"
 #include "prefs.h"
 #include "avi_vars.h"
@@ -125,29 +126,27 @@
 
 // Video codec
 //___________________________
-#if 0
-		uint8_t *extraData;
-		uint32_t extraDataSize;
-
+        
 		qfprintf(fd, "\n//** Video Codec conf **\n");
-		videoCodecGetConf(&extraDataSize, &extraData);
+        CONFcouple *couples=NULL;
+    
+        qfprintf(fd, "app.video.codec(\"%s\"", videoEncoder6_GetCurrentEncoderName());
+        videoEncoder6_GetConfiguration(&couples);
+        if(couples)
+        {
+            uint32_t n=couples->getSize();
+        
+            for(int i=0;i<n;i++)
+            {
+                char *name,*value;
+                couples->getInternalName(i,&name,&value);
+                qfprintf(fd,",\"%s=%s\"",name,value);
+            }
+            delete couples;
+            couples=NULL;
+        }
+        qfprintf(fd,");\n");
 
-		if (videoCodecGetType() == CodecExternal)
-			qfprintf(fd, "app.video.codecPlugin(\"%s\", \"%s\", \"%s\", \"%s\");\n", videoCodecPluginGetGuid(), videoCodecGetName(), videoCodecGetMode(), extraData);
-		else
-		{
-			qfprintf(fd, "app.video.codec(\"%s\", \"%s\", \"", videoCodecGetName(), videoCodecGetMode());
-
-			// Now deal with extra data
-			qfprintf(fd, "%d ", extraDataSize);
-
-			if (extraDataSize)
-				for(int i = 0; i < extraDataSize; i++)
-					qfprintf(fd, "%02x ", extraData[i]);
-
-			qfprintf(fd, "\");\n");
-		}
-#endif        
 // Audio Source
 //______________________________________________
 
@@ -181,7 +180,7 @@
                         
         }
 #endif
-   CONFcouple *couples=NULL;
+   couples=NULL;
    getAudioExtraConf(&bitrate,&couples);
     qfprintf(fd,"app.audio.codec(\"%s\",%d",audioCodecGetName(),bitrate); 
    if(couples)

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script/ADM_JSAvidemuxVideo.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script/ADM_JSAvidemuxVideo.cpp	2009-11-13 17:29:42 UTC (rev 5487)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script/ADM_JSAvidemuxVideo.cpp	2009-11-13 17:29:44 UTC (rev 5488)
@@ -24,6 +24,7 @@
 #include "ADM_editor/ADM_outputfmt.h"
 #include "ADM_commonUI/GUI_ui.h"
 #include "ADM_script/ADM_container.h"
+#include "ADM_videoEncoderApi.h"
 
 extern VF_FILTERS filterGetTagFromName(const char *inname);
 extern uint8_t A_ListAllBlackFrames( char *file );
@@ -32,7 +33,10 @@
 extern int A_saveJpg (char *name);
 extern uint8_t loadVideoCodecConf( const char *name);
 extern void filterCleanUp( void );
+extern bool jsArgToConfCouple(int nb,CONFcouple **conf,  jsval *argv);
+bool A_setVideoCodec(const char *nm);
 
+
 JSPropertySpec ADM_JSAvidemuxVideo::avidemuxvideo_properties[] = 
 { 
        
@@ -45,9 +49,7 @@
 	{ "add", Add, 3, 0, 0 },	// add
     { "clearFilters", ClearFilters, 0, 0, 0 }, // Delete all filters
 	{ "addFilter", AddFilter, 10, 0, 0 },	// Add filter to filter chain
-	{ "codec", Codec, 3, 0, 0 },	// Set the video codec
-	{ "codecPlugin", codecPlugin, 4, 0, 0 },	// Set the video codec plugin
-	{ "codecConf", CodecConf, 1, 0, 0 },	// load video codec config
+	{ "codec", Codec, 1, 0, 0 },	// Set the video codec
 	{ "save", Save, 1, 0, 0 },	// save video portion of the stream
 	{ "saveJpeg", SaveJPEG, 1, 0, 0 },	// save the current frame as a JPEG
 	{ "listBlackFrames", ListBlackFrames, 1, 0, 0 },	// output a list of the black frame to a file
@@ -246,110 +248,39 @@
 #endif        
         return JS_TRUE;
 }// end AddFilter
-
+/**
+    \fn Codec
+*/
 JSBool ADM_JSAvidemuxVideo::Codec(JSContext *cx, JSObject *obj, uintN argc, 
                                        jsval *argv, jsval *rval)
 {// begin Codec
         *rval = BOOLEAN_TO_JSVAL(false);
-        if(argc > 3)
+        if(argc <1)
                 return JS_FALSE;
-        printf("Codec ... \n");
-        if(JSVAL_IS_STRING(argv[0]) == false || JSVAL_IS_STRING(argv[1]) == false  || JSVAL_IS_STRING(argv[2]) == false)
+        if(JSVAL_IS_STRING(argv[0]) == false )
+        {
+                ADM_error("Cannot set codec\n");
                 return JS_FALSE;
-        
-                printf("[codec]%s\n",JS_GetStringBytes(JSVAL_TO_STRING(argv[0])));
-                printf("[conf ]%s\n",JS_GetStringBytes(JSVAL_TO_STRING(argv[1])));
-                printf("[xtra ]%s\n",JS_GetStringBytes(JSVAL_TO_STRING(argv[2])));
-                
-                char *codec,*conf,*codecConfString;
-                codec = JS_GetStringBytes(JSVAL_TO_STRING(argv[0]));
-                conf = JS_GetStringBytes(JSVAL_TO_STRING(argv[1]));
-                codecConfString = JS_GetStringBytes(JSVAL_TO_STRING(argv[2]));
-                enterLock();
-#if 0
-                if(!videoCodecSelectByName(codec))
-                        *rval = BOOLEAN_TO_JSVAL(false);
-                else
-                {// begin conf
-                        // now do the conf
-                        // format CBR=bitrate in kbits
-                        //	  CQ=Q
-                        //	  2 Pass=size
-                        // We have to replace
-                        if(!videoCodecConfigure(conf,0,NULL))
-                                *rval = BOOLEAN_TO_JSVAL(false);
-                        else
-                        {
-                                *rval = BOOLEAN_TO_JSVAL(true);
-                                if(!loadVideoCodecConfString(codecConfString))
-                                        *rval = BOOLEAN_TO_JSVAL(false);
-                                else
-                                        *rval = BOOLEAN_TO_JSVAL(true);
-                        }
+        }
+        char *codec=JS_GetStringBytes(JSVAL_TO_STRING(argv[0]));
+        // Set codec.
+        enterLock();
+        if(A_setVideoCodec(codec)==false)
+        {
+            ADM_error("Could not select codec %s\n",codec);
+            leaveLock();
+            return JS_FALSE;
+        }
+        CONFcouple *c;
+        jsArgToConfCouple(argc-1,&c,argv+1);
+        *rval = BOOLEAN_TO_JSVAL( videoEncoder6_SetConfiguration(c));
+        printf("Selected codec %s\n",codec);
+        leaveLock();
 
-                }// end conf
-#endif
-                leaveLock();
-
         return JS_TRUE;
 }// end Codec
 
-JSBool ADM_JSAvidemuxVideo::codecPlugin(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval)
-{
-	*rval = BOOLEAN_TO_JSVAL(false);
-#if 0
-	if (argc != 4)
-		return JS_FALSE;
 
-	printf("Codec Plugin ... \n");
-
-	if (!JSVAL_IS_STRING(argv[0]) || !JSVAL_IS_STRING(argv[1]) || !JSVAL_IS_STRING(argv[2]) || !JSVAL_IS_STRING(argv[3]))
-		return JS_FALSE;
-
-	char *guid = JS_GetStringBytes(JSVAL_TO_STRING(argv[0]));
-	char *desc = JS_GetStringBytes(JSVAL_TO_STRING(argv[1]));
-	char *conf = JS_GetStringBytes(JSVAL_TO_STRING(argv[2]));
-	char *data = JS_GetStringBytes(JSVAL_TO_STRING(argv[3]));
-
-	printf("[guid] %s\n", guid);
-	printf("[desc] %s\n", desc);
-	printf("[conf] %s\n", conf);
-	printf("[data] %s\n", data);
-
-	enterLock();
-
-	if (!videoCodecPluginSelectByGuid(guid))
-		*rval = BOOLEAN_TO_JSVAL(false);
-	else
-		*rval = BOOLEAN_TO_JSVAL(videoCodecConfigure(conf, 0, (uint8_t*)data));
-
-	leaveLock();
-#endif
-	return JS_TRUE;
-}
-
-JSBool ADM_JSAvidemuxVideo::CodecConf(JSContext *cx, JSObject *obj, uintN argc, 
-                                       jsval *argv, jsval *rval)
-{
-	*rval = BOOLEAN_TO_JSVAL(false);
-#if 0
-	if (argc != 1)
-		return JS_FALSE;
-
-	if (!JSVAL_IS_STRING(argv[0]))
-		return JS_FALSE;
-
-	char *pTempStr = JS_GetStringBytes(JSVAL_TO_STRING(argv[0]));
-
-	printf("Codec Conf Video \"%s\"\n", pTempStr);
-
-	enterLock();
-	*rval = INT_TO_JSVAL(loadVideoCodecConf(pTempStr));
-	leaveLock();
-#endif
-	return JS_TRUE;
-}
-
 JSBool ADM_JSAvidemuxVideo::Save(JSContext *cx, JSObject *obj, uintN argc, 
                                        jsval *argv, jsval *rval)
 {// begin Save
@@ -638,4 +569,20 @@
         
         return JS_TRUE;
 }// end PostProcess
+/**
+    \fn A_setVideoCodec
+*/
+bool A_setVideoCodec(const char *nm)
+{
+    int idx=videoEncoder6_GetIndexFromName(nm);
+    if(idx==-1)
+    {
+        ADM_error("No such encoder :%s\n",nm);
+    }
+    // Select by index
+    videoEncoder6_SetCurrentEncoder(idx);
+    UI_setVideoCodec(idx);
+    return true;
+}
+
 /* EOF */

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_toolkit/automation.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_toolkit/automation.cpp	2009-11-13 17:29:42 UTC (rev 5487)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_toolkit/automation.cpp	2009-11-13 17:29:44 UTC (rev 5488)
@@ -43,6 +43,7 @@
 
 #include "ADM_vidMisc.h"
 #include "ADM_coreVideoEncoder.h"
+#include "ADM_videoEncoderApi.h"
 #include "ADM_audioFilter/include/ADM_audioFilterInterface.h"
 //extern void filterListAll(void );
 

Deleted: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoEncoder/ADM_VideoEncoders.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoEncoder/ADM_VideoEncoders.cpp	2009-11-13 17:29:42 UTC (rev 5487)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoEncoder/ADM_VideoEncoders.cpp	2009-11-13 17:29:44 UTC (rev 5488)
@@ -1,21 +0,0 @@
-/***************************************************************************
-                          \fn ADM_VideoEncoders
-                          \brief Internal handling of video encoders
-                             -------------------
-    
-    copyright            : (C) 2002/2009 by mean
-    email                : fixounet at free.fr
- ***************************************************************************/
-
-/***************************************************************************
- *                                                                         *
- *   This program is free software; you can redistribute it and/or modify  *
- *   it under the terms of the GNU General Public License as published by  *
- *   the Free Software Foundation; either version 2 of the License, or     *
- *   (at your option) any later version.                                   *
- *                                                                         *
- ***************************************************************************/
-#include "ADM_default.h"
-#include "ADM_coreVideoEncoder.h"
-#include "ADM_filterChain.h"
-// EOF

Deleted: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoEncoder/ADM_dynVideoEncoder.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoEncoder/ADM_dynVideoEncoder.cpp	2009-11-13 17:29:42 UTC (rev 5487)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoEncoder/ADM_dynVideoEncoder.cpp	2009-11-13 17:29:44 UTC (rev 5488)
@@ -1,242 +0,0 @@
-/***************************************************************************
-                             ADM_dynVideoEncoder.cpp
-
-    begin                : Mon Apr 14 2008
-    copyright            : (C) 2008 2009 by gruntster/mean
- ***************************************************************************/
-
-/***************************************************************************
- *                                                                         *
- *   This program is free software; you can redistribute it and/or modify  *
- *   it under the terms of the GNU General Public License as published by  *
- *   the Free Software Foundation; either version 2 of the License, or     *
- *   (at your option) any later version.                                   *
- *                                                                         *
- ***************************************************************************/
-
-
-#include "ADM_default.h"
-#include <vector>
-
-#include "DIA_fileSel.h"
-
-#include "ADM_coreVideoEncoder.h"
-#include "ADM_coreVideoEncoderInternal.h"
-#include "DIA_uiTypes.h"
-#include "ADM_dynamicLoading.h"
-
-static int currentVideoCodec=0;
-/**
-    \class ADM_videoEncoder6
-    \brief Plugin Wrapper Class
-
-*/
-class ADM_videoEncoder6 :public ADM_LibWrapper
-{
-public:
-        int                  initialised;
-        ADM_videoEncoderDesc *desc;
-        ADM_videoEncoderDesc  *(*getInfo)();
-        ADM_videoEncoder6(const char *file) : ADM_LibWrapper()
-        {
-			initialised = (loadLibrary(file) && getSymbols(1,
-				&getInfo, "getInfo"));
-                if(initialised)
-                {
-                    desc=getInfo();
-                    printf("[videoEncoder6]Name :%s ApiVersion :%d Description :%s\n",
-                                                        desc->encoderName,
-                                                        desc->apiVersion,
-                                                        desc->description);
-                }else
-                {
-                    printf("[videoEncoder6]Symbol loading failed for %s\n",file);
-                }
-        }
-};
-
-std::vector <ADM_videoEncoder6 *> ListOfEncoders;
-// 
-ADM_videoEncoderDesc copyDesc={
-        "Copy",
-        "Copy",
-        "Copy encoder",
-        ADM_VIDEO_ENCODER_API_VERSION, //uint32_t     apiVersion;            // const
-
-        NULL, //ADM_coreVideoEncoder *(*create)(ADM_coreVideoFilter *head);  
-        NULL, //void         (*destroy)(ADM_coreVideoEncoder *codec);
-        NULL, //bool         (*configure)(void);                                // Call UI to set it up
-        NULL, //bool         (*getConfigurationData)(uint32_t *l, uint8_t **d); // Get the encoder private conf
-        NULL, //bool         (*setConfigurationData)(uint32_t l, uint8_t *d);   // Set the encoder private conf
-
-        ADM_UI_ALL, //ADM_UI_TYPE  UIType;                // Type of UI
-        1,0,0, //uint32_t     major,minor,patch;     // Version of the plugin
-        NULL  //void         *opaque;               // Hide stuff in here
-};
-
-/**
-        \fn ADM_ve6_getNbEncoders
-        \brief Returns the number of demuxers plugins except one
-*/
-uint32_t ADM_ve6_getNbEncoders(void)
-{
-    return ListOfEncoders.size();
-}
-/**
-    \fn     ADM_ve6_getEncoderInfo
-    \brief  Get Infos about the demuxer #th plugin
-*/
-bool     ADM_ve6_getEncoderInfo(int filter, const char **name, uint32_t *major,uint32_t *minor,uint32_t *patch)
-{
-    ADM_assert(filter<ListOfEncoders.size());
-    ADM_videoEncoderDesc *desc=ListOfEncoders[filter]->desc;
-    ADM_assert(desc);
-    *name=desc->menuName;
-    *major=desc->major;
-    *minor=desc->minor;
-    *patch=desc->patch;
-    return true;
-}
-/**
-    \fn tryLoadingFilterPlugin
-    \brief Try loading the file given as argument as an audio device plugin
-
-*/
-#define Fail(x) {printf("%s:"#x"\n",file);goto er;}
-static bool tryLoadingEncoderPlugin(const char *file)
-{
-	ADM_videoEncoder6 *dll=new ADM_videoEncoder6(file);
-    if(!dll->initialised) Fail(CannotLoad);
-    if(dll->desc->apiVersion!=ADM_VIDEO_ENCODER_API_VERSION) Fail(WrongApiVersion);
-//fixme todo also check uiType    
-    ListOfEncoders.push_back(dll); // Needed for cleanup. FIXME TODO Delete it.
-    printf("[VideoEncoder6] Registered filter %s as  %s\n",file,dll->desc->description);
-    return true;
-	// Fail!
-er:
-	delete dll;
-	return false;
-
-}
-/**
- * 	\fn ADM_ve6_loadPlugins
- *  \brief load all audio device plugins
- */
-uint8_t ADM_ve6_loadPlugins(const char *path)
-{
-#define MAX_EXTERNAL_FILTER 100
-// FIXME Factorize
-
-	char *files[MAX_EXTERNAL_FILTER];
-	uint32_t nbFile;
-
-	memset(files,0,sizeof(char *)*MAX_EXTERNAL_FILTER);
-	printf("[ADM_ve6_plugin] Scanning directory %s\n",path);
-
-	if(!buildDirectoryContent(&nbFile, path, files, MAX_EXTERNAL_FILTER, SHARED_LIB_EXT))
-	{
-		printf("[ADM_ve6_plugin] Cannot parse plugin\n");
-		return 0;
-	}
-    // Add our copy encoder....
-    ADM_videoEncoder6 *dll=new ADM_videoEncoder6("copyADM");
-    dll->desc=&copyDesc;
-    ListOfEncoders.push_back(dll);
-
-	for(int i=0;i<nbFile;i++)
-		tryLoadingEncoderPlugin(files[i]);
-    
-	printf("[ADM_ve6_plugin] Scanning done\n");
-
-	return 1;
-}
-/**
-        \fn ADM_ve6_cleanup
-        \brief Current device is no longer used, delete
-*/
-void ADM_ve6_cleanup(void)
-{
-        int nb=ListOfEncoders.size();
-        for(int i=0;i<nb;i++)
-                {
-                        if(ListOfEncoders[i]) delete ListOfEncoders[i];
-                        ListOfEncoders[i]=NULL;
-                }
-}
-
-/**
-    \fn ADM_ve6_getMenuName
-    \brief IT starts from 0, ignoring the copy one
-*/
-const char *ADM_ve6_getMenuName(uint32_t i)
-{
-	 int nb=ListOfEncoders.size();
-
-	ADM_assert(i < nb);
-
-	return ListOfEncoders[i]->desc->menuName;
-}
-/**
-    \fn ADM_ve6_Changed
-*/
-void ADM_ve6_Changed(int newCodecIndex)
-{
-	int nb=ListOfEncoders.size();
-	ADM_assert(newCodecIndex < nb);
-
-	currentVideoCodec=newCodecIndex;
-}
-
-
-/**
-    \fn createVideoEncoder
-*/
-ADM_coreVideoEncoder *createVideoEncoderFromIndex(ADM_coreVideoFilter *chain,int index)
-{
-    int nb=ListOfEncoders.size();
-	ADM_assert(index < nb);
-    ADM_assert(index); // 0 is for copy, should not get it through here
-    ADM_videoEncoder6 *plugin=ListOfEncoders[index];
-
-    ADM_coreVideoEncoder *enc=plugin->desc->create(chain);
-    return enc;
-}
-/**
-    \fn videoEncoder6SelectByName
-*/
-bool videoEncoder6SelectByName(const char *name)
-{
-    int nb=ListOfEncoders.size();
-    for(int i=0;i<nb;i++)
-    {
-        ADM_videoEncoderDesc *desc=ListOfEncoders[i]->desc;
-        if(!strcasecmp(name,desc->encoderName))
-        {
-            currentVideoCodec=i;
-            return true;
-        }
-    }
-    return false;
-}
-/**
-    \fn videoEncoder6Configure
-
-*/
-bool                  videoEncoder6Configure(void)
-{
-    ADM_videoEncoderDesc *desc=ListOfEncoders[currentVideoCodec]->desc;
-    if(desc->configure) return desc->configure();
-    return true;
-}
-/**
-    \fn videoEncoder6_SetCurrentEncoder
-
-*/
-bool                  videoEncoder6_SetCurrentEncoder(uint32_t index)
-{
-      int nb=ListOfEncoders.size();
-      if(index>=nb) return false;
-      currentVideoCodec=index;
-      return true;
-}
-//EOF

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoEncoder/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoEncoder/CMakeLists.txt	2009-11-13 17:29:42 UTC (rev 5487)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoEncoder/CMakeLists.txt	2009-11-13 17:29:44 UTC (rev 5488)
@@ -1,5 +1 @@
-SET(ADM_internalVideoEncoder_SRCS 
-	ADM_VideoEncoders.cpp
-        ADM_dynVideoEncoder.cpp
-)
-ADD_LIBRARY(ADM_videoEncoder6 STATIC ${ADM_internalVideoEncoder_SRCS})
+ADD_SUBDIRECTORY(src)

Added: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoEncoder/include/ADM_videoEncoderApi.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoEncoder/include/ADM_videoEncoderApi.h	2009-11-13 17:29:42 UTC (rev 5487)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoEncoder/include/ADM_videoEncoderApi.h	2009-11-13 17:29:44 UTC (rev 5488)
@@ -0,0 +1,39 @@
+/***************************************************************************
+                          \fn ADM_videoEncoderApi.h
+                          \brief Api to deal with video encoder
+                             -------------------
+    
+    copyright            : (C) 2002/2009 by mean
+    email                : fixounet at free.fr
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+#ifndef ADM_VIDEO_ENCODER_API_H
+#define ADM_VIDEO_ENCODER_API_H
+class ADM_coreVideoEncoder;
+class ADM_coreVideoFilter;
+// Spawn a new encoder using the index from the menu = the index in the vector
+ADM_coreVideoEncoder *createVideoEncoderFromIndex(ADM_coreVideoFilter *chain,int index);
+
+bool                  videoEncoder6SelectByName(const char *name);
+bool                  videoEncoder6Configure(void);
+
+int                   videoEncoder6_GetIndexFromName(const char *name);
+
+bool                  videoEncoder6_SetCurrentEncoder(uint32_t index);
+
+const char            *videoEncoder6_GetCurrentEncoderName(void);
+
+bool                  videoEncoder6_SetConfiguration(CONFcouple *c);
+bool                  videoEncoder6_GetConfiguration(CONFcouple **c);
+
+ADM_coreVideoEncoder *createVideoEncoderFromIndex(ADM_coreVideoFilter *chain,int index);
+
+#endif

Copied: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoEncoder/src/ADM_VideoEncoders.cpp (from rev 5487, branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoEncoder/ADM_VideoEncoders.cpp)
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoEncoder/ADM_VideoEncoders.cpp	2009-11-13 17:29:42 UTC (rev 5487)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoEncoder/src/ADM_VideoEncoders.cpp	2009-11-13 17:29:44 UTC (rev 5488)
@@ -0,0 +1,21 @@
+/***************************************************************************
+                          \fn ADM_VideoEncoders
+                          \brief Internal handling of video encoders
+                             -------------------
+    
+    copyright            : (C) 2002/2009 by mean
+    email                : fixounet at free.fr
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+#include "ADM_default.h"
+#include "ADM_coreVideoEncoder.h"
+#include "ADM_filterChain.h"
+// EOF

Copied: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoEncoder/src/ADM_dynVideoEncoder.cpp (from rev 5487, branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoEncoder/ADM_dynVideoEncoder.cpp)
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoEncoder/ADM_dynVideoEncoder.cpp	2009-11-13 17:29:42 UTC (rev 5487)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoEncoder/src/ADM_dynVideoEncoder.cpp	2009-11-13 17:29:44 UTC (rev 5488)
@@ -0,0 +1,283 @@
+/***************************************************************************
+                             ADM_dynVideoEncoder.cpp
+
+    begin                : Mon Apr 14 2008
+    copyright            : (C) 2008 2009 by gruntster/mean
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+
+
+#include "ADM_default.h"
+#include <vector>
+
+#include "DIA_fileSel.h"
+
+#include "ADM_coreVideoEncoder.h"
+#include "ADM_coreVideoEncoderInternal.h"
+#include "DIA_uiTypes.h"
+#include "ADM_dynamicLoading.h"
+#include "ADM_videoEncoderApi.h"
+static int currentVideoCodec=0;
+/**
+    \class ADM_videoEncoder6
+    \brief Plugin Wrapper Class
+
+*/
+class ADM_videoEncoder6 :public ADM_LibWrapper
+{
+public:
+        int                  initialised;
+        ADM_videoEncoderDesc *desc;
+        ADM_videoEncoderDesc  *(*getInfo)();
+        ADM_videoEncoder6(const char *file) : ADM_LibWrapper()
+        {
+			initialised = (loadLibrary(file) && getSymbols(1,
+				&getInfo, "getInfo"));
+                if(initialised)
+                {
+                    desc=getInfo();
+                    printf("[videoEncoder6]Name :%s ApiVersion :%d Description :%s\n",
+                                                        desc->encoderName,
+                                                        desc->apiVersion,
+                                                        desc->description);
+                }else
+                {
+                    printf("[videoEncoder6]Symbol loading failed for %s\n",file);
+                }
+        }
+};
+
+std::vector <ADM_videoEncoder6 *> ListOfEncoders;
+// 
+ADM_videoEncoderDesc copyDesc={
+        "Copy",
+        "Copy",
+        "Copy encoder",
+        ADM_VIDEO_ENCODER_API_VERSION, //uint32_t     apiVersion;            // const
+
+        NULL, //ADM_coreVideoEncoder *(*create)(ADM_coreVideoFilter *head);  
+        NULL, //void         (*destroy)(ADM_coreVideoEncoder *codec);
+        NULL, //bool         (*configure)(void);                                // Call UI to set it up
+        NULL, //bool         (*getConfigurationData)(uint32_t *l, uint8_t **d); // Get the encoder private conf
+        NULL, //bool         (*setConfigurationData)(uint32_t l, uint8_t *d);   // Set the encoder private conf
+
+        ADM_UI_ALL, //ADM_UI_TYPE  UIType;                // Type of UI
+        1,0,0, //uint32_t     major,minor,patch;     // Version of the plugin
+        NULL  //void         *opaque;               // Hide stuff in here
+};
+
+/**
+        \fn ADM_ve6_getNbEncoders
+        \brief Returns the number of demuxers plugins except one
+*/
+uint32_t ADM_ve6_getNbEncoders(void)
+{
+    return ListOfEncoders.size();
+}
+/**
+    \fn     ADM_ve6_getEncoderInfo
+    \brief  Get Infos about the demuxer #th plugin
+*/
+bool     ADM_ve6_getEncoderInfo(int filter, const char **name, uint32_t *major,uint32_t *minor,uint32_t *patch)
+{
+    ADM_assert(filter<ListOfEncoders.size());
+    ADM_videoEncoderDesc *desc=ListOfEncoders[filter]->desc;
+    ADM_assert(desc);
+    *name=desc->menuName;
+    *major=desc->major;
+    *minor=desc->minor;
+    *patch=desc->patch;
+    return true;
+}
+/**
+    \fn tryLoadingFilterPlugin
+    \brief Try loading the file given as argument as an audio device plugin
+
+*/
+#define Fail(x) {printf("%s:"#x"\n",file);goto er;}
+static bool tryLoadingEncoderPlugin(const char *file)
+{
+	ADM_videoEncoder6 *dll=new ADM_videoEncoder6(file);
+    if(!dll->initialised) Fail(CannotLoad);
+    if(dll->desc->apiVersion!=ADM_VIDEO_ENCODER_API_VERSION) Fail(WrongApiVersion);
+//fixme todo also check uiType    
+    ListOfEncoders.push_back(dll); // Needed for cleanup. FIXME TODO Delete it.
+    printf("[VideoEncoder6] Registered filter %s as  %s\n",file,dll->desc->description);
+    return true;
+	// Fail!
+er:
+	delete dll;
+	return false;
+
+}
+/**
+ * 	\fn ADM_ve6_loadPlugins
+ *  \brief load all audio device plugins
+ */
+uint8_t ADM_ve6_loadPlugins(const char *path)
+{
+#define MAX_EXTERNAL_FILTER 100
+// FIXME Factorize
+
+	char *files[MAX_EXTERNAL_FILTER];
+	uint32_t nbFile;
+
+	memset(files,0,sizeof(char *)*MAX_EXTERNAL_FILTER);
+	printf("[ADM_ve6_plugin] Scanning directory %s\n",path);
+
+	if(!buildDirectoryContent(&nbFile, path, files, MAX_EXTERNAL_FILTER, SHARED_LIB_EXT))
+	{
+		printf("[ADM_ve6_plugin] Cannot parse plugin\n");
+		return 0;
+	}
+    // Add our copy encoder....
+    ADM_videoEncoder6 *dll=new ADM_videoEncoder6("copyADM");
+    dll->desc=&copyDesc;
+    ListOfEncoders.push_back(dll);
+
+	for(int i=0;i<nbFile;i++)
+		tryLoadingEncoderPlugin(files[i]);
+    
+	printf("[ADM_ve6_plugin] Scanning done\n");
+
+	return 1;
+}
+/**
+        \fn ADM_ve6_cleanup
+        \brief Current device is no longer used, delete
+*/
+void ADM_ve6_cleanup(void)
+{
+        int nb=ListOfEncoders.size();
+        for(int i=0;i<nb;i++)
+                {
+                        if(ListOfEncoders[i]) delete ListOfEncoders[i];
+                        ListOfEncoders[i]=NULL;
+                }
+}
+
+/**
+    \fn ADM_ve6_getMenuName
+    \brief IT starts from 0, ignoring the copy one
+*/
+const char *ADM_ve6_getMenuName(uint32_t i)
+{
+	 int nb=ListOfEncoders.size();
+
+	ADM_assert(i < nb);
+
+	return ListOfEncoders[i]->desc->menuName;
+}
+/**
+    \fn ADM_ve6_Changed
+*/
+void ADM_ve6_Changed(int newCodecIndex)
+{
+	int nb=ListOfEncoders.size();
+	ADM_assert(newCodecIndex < nb);
+
+	currentVideoCodec=newCodecIndex;
+}
+
+
+/**
+    \fn createVideoEncoder
+*/
+ADM_coreVideoEncoder *createVideoEncoderFromIndex(ADM_coreVideoFilter *chain,int index)
+{
+    int nb=ListOfEncoders.size();
+	ADM_assert(index < nb);
+    ADM_assert(index); // 0 is for copy, should not get it through here
+    ADM_videoEncoder6 *plugin=ListOfEncoders[index];
+
+    ADM_coreVideoEncoder *enc=plugin->desc->create(chain);
+    return enc;
+}
+/**
+    \fn videoEncoder6SelectByName
+*/
+bool videoEncoder6SelectByName(const char *name)
+{
+    int i=videoEncoder6_GetIndexFromName(name);
+    if(i==-1) return false;
+    
+    currentVideoCodec=i;
+    return true;
+}
+/**
+    \fn videoEncoder6Configure
+
+*/
+bool                  videoEncoder6Configure(void)
+{
+    ADM_videoEncoderDesc *desc=ListOfEncoders[currentVideoCodec]->desc;
+    if(desc->configure) return desc->configure();
+    return true;
+}
+/**
+    \fn videoEncoder6_SetCurrentEncoder
+
+*/
+bool                  videoEncoder6_SetCurrentEncoder(uint32_t index)
+{
+      int nb=ListOfEncoders.size();
+      if(index>=nb) return false;
+      currentVideoCodec=index;
+      return true;
+}
+/**
+    \fn videoEncoder6_GetCurrentEncoderName
+*/
+const char            *videoEncoder6_GetCurrentEncoderName(void)
+{
+    ADM_assert(currentVideoCodec<ListOfEncoders.size());
+    ADM_videoEncoder6 *e=ListOfEncoders[currentVideoCodec];
+    return e->desc->encoderName;
+}
+/**
+    \fn videoEncoder6_GetCurrentEncoderName
+*/
+
+bool                  videoEncoder6_SetConfiguration(CONFcouple *c)
+{
+    if(!c) return true;
+    ADM_assert(currentVideoCodec<ListOfEncoders.size());
+    ADM_videoEncoder6 *e=ListOfEncoders[currentVideoCodec];
+    return e->desc->setConfigurationData(c);
+}
+/**
+    \fn videoEncoder6_GetConfiguration
+*/
+
+bool                  videoEncoder6_GetConfiguration(CONFcouple **c)
+{
+    ADM_assert(currentVideoCodec<ListOfEncoders.size());
+    ADM_videoEncoder6 *e=ListOfEncoders[currentVideoCodec];
+    return e->desc->getConfigurationData(c);
+}
+/**
+    \fn videoEncoder6_GetIndexFromName
+*/
+int                   videoEncoder6_GetIndexFromName(const char *name)
+{
+    int nb=ListOfEncoders.size();
+    for(int i=0;i<nb;i++)
+    {
+        ADM_videoEncoderDesc *desc=ListOfEncoders[i]->desc;
+        if(!strcasecmp(name,desc->encoderName))
+        {
+           
+            return i;
+        }
+    }
+    return -1;
+}
+//EOF

Copied: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoEncoder/src/CMakeLists.txt (from rev 5487, branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoEncoder/CMakeLists.txt)
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoEncoder/CMakeLists.txt	2009-11-13 17:29:42 UTC (rev 5487)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoEncoder/src/CMakeLists.txt	2009-11-13 17:29:44 UTC (rev 5488)
@@ -0,0 +1,5 @@
+SET(ADM_internalVideoEncoder_SRCS 
+	ADM_VideoEncoders.cpp
+        ADM_dynVideoEncoder.cpp
+)
+ADD_LIBRARY(ADM_videoEncoder6 STATIC ${ADM_internalVideoEncoder_SRCS})

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/gtk_gui.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/gtk_gui.cpp	2009-11-13 17:29:42 UTC (rev 5487)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/gtk_gui.cpp	2009-11-13 17:29:44 UTC (rev 5488)
@@ -35,6 +35,7 @@
 #include "ADM_vidMisc.h"
 #include "ADM_preview.h"
 #include "ADM_coreVideoEncoder.h"
+#include "ADM_videoEncoderApi.h"
 #include "ADM_audioFilter/include/ADM_audioFilterInterface.h"
 
 #include "avi_vars.h"

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/gui_savenew.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/gui_savenew.cpp	2009-11-13 17:29:42 UTC (rev 5487)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/gui_savenew.cpp	2009-11-13 17:29:44 UTC (rev 5488)
@@ -39,6 +39,7 @@
 #include "ADM_muxerGate/include/ADM_videoProcess.h"
 #include "ADM_bitstream.h"
 #include "ADM_filterChain.h"
+#include "ADM_videoEncoderApi.h"
 /*
     
 */

Modified: branches/avidemux_2.6_branch_mean/avidemux/commonCmakeApplication.cmake
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/commonCmakeApplication.cmake	2009-11-13 17:29:42 UTC (rev 5487)
+++ branches/avidemux_2.6_branch_mean/avidemux/commonCmakeApplication.cmake	2009-11-13 17:29:44 UTC (rev 5488)
@@ -33,6 +33,7 @@
 INCLUDE_DIRECTORIES("${CMAKE_CURRENT_SOURCE_DIR}/../common/ADM_audioFilter/include")
 INCLUDE_DIRECTORIES("${CMAKE_CURRENT_SOURCE_DIR}/../common/ADM_commonUI")
 INCLUDE_DIRECTORIES("${CMAKE_CURRENT_SOURCE_DIR}/../common/ADM_videoFilter2/include")
+INCLUDE_DIRECTORIES("${CMAKE_CURRENT_SOURCE_DIR}/../common/ADM_videoEncoder/include")
 #
 # Add main source
 #

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoEncoder/include/ADM_coreVideoEncoder.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoEncoder/include/ADM_coreVideoEncoder.h	2009-11-13 17:29:42 UTC (rev 5487)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoEncoder/include/ADM_coreVideoEncoder.h	2009-11-13 17:29:44 UTC (rev 5488)
@@ -21,6 +21,7 @@
 #include "ADM_coreVideoFilter.h"
 #include "ADM_bitstream.h"
 #include "ADM_frameType.h"
+#include "stddef.h"
 typedef enum
 {
     ADM_ENCODER_OPTION_MOV_MODE=1
@@ -52,11 +53,6 @@
                uint64_t    getTotalDuration(void) {return source->getInfo()->totalDuration;}
 virtual        bool        setPassAndLogFile(int pass,const char *name) {return false;}
 };
-// Spawn a new encoder using the index from the menu = the index in the vector
-ADM_coreVideoEncoder *createVideoEncoderFromIndex(ADM_coreVideoFilter *chain,int index);
-bool                  videoEncoder6SelectByName(const char *name);
-bool                  videoEncoder6Configure(void);
-bool                  videoEncoder6_SetCurrentEncoder(uint32_t index);
 
 #endif
 

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/huff/ADM_huffEncoder.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/huff/ADM_huffEncoder.cpp	2009-11-13 17:29:42 UTC (rev 5487)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/huff/ADM_huffEncoder.cpp	2009-11-13 17:29:44 UTC (rev 5488)
@@ -25,7 +25,7 @@
     ADM_HUFF_YUV,
     ADM_FF_HUFF_YUV
 };
-int huffType=ADM_HUFF_YUV;
+huff_encoder huffType={ADM_HUFF_YUV};
 //
 /**
         \fn ADM_huffEncoder
@@ -33,7 +33,7 @@
 ADM_huffEncoder::ADM_huffEncoder(ADM_coreVideoFilter *src) : ADM_coreVideoEncoderFFmpeg(src)
 {
     printf("[huffEncoder] Creating.\n");
-    if(huffType==ADM_HUFF_YUV)
+    if(huffType.encoderType==ADM_HUFF_YUV)
         targetColorSpace=ADM_COLOR_YUV422P;
     else
         targetColorSpace=ADM_COLOR_YV12;
@@ -44,7 +44,7 @@
 bool ADM_huffEncoder::setup(void)
 {
     CodecID id=CODEC_ID_HUFFYUV;
-    if(huffType==ADM_FF_HUFF_YUV) id=CODEC_ID_FFVHUFF;
+    if(huffType.encoderType==ADM_FF_HUFF_YUV) id=CODEC_ID_FFVHUFF;
     return ADM_coreVideoEncoderFFmpeg::setup(id);
 }
 
@@ -62,7 +62,7 @@
 */
 const  char        *ADM_huffEncoder::getFourcc(void)
 {
-    if(huffType==ADM_HUFF_YUV) return "HFYU";
+    if(huffType.encoderType==ADM_HUFF_YUV) return "HFYU";
     else return "FFVH";
 
 }
@@ -109,14 +109,14 @@
 {
 uint32_t colorM;
     printf("[huff] Configure\n");
-    colorM=(uint32_t)huffType;
+    colorM=(uint32_t)huffType.encoderType;
 
     diaElemMenu      c(&colorM,QT_TR_NOOP("Type:"),2,colorMenus);
     diaElem *elems[1]={&c};
     
       if( diaFactoryRun(QT_TR_NOOP("HuffYUV Configuration"),1 ,elems))
       {
-        huffType=colorM;
+        huffType.encoderType=colorM;
         return false;
       }
       return true;

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/huff/ADM_huffEncoder.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/huff/ADM_huffEncoder.h	2009-11-13 17:29:42 UTC (rev 5487)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/huff/ADM_huffEncoder.h	2009-11-13 17:29:44 UTC (rev 5488)
@@ -18,11 +18,13 @@
 #ifndef ADM_huff_ENCODER_H
 #define ADM_huff_ENCODER_H
 #include "ADM_coreVideoEncoderFFmpeg.h"
+#include "huff_encoder.h"
 /**
         \class ADM_huffEncoder
         \brief Dummy encoder that does nothing
 
 */
+extern huff_encoder huffType;
 class ADM_huffEncoder : public ADM_coreVideoEncoderFFmpeg
 {
 protected:

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/huff/huffPlugin.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/huff/huffPlugin.cpp	2009-11-13 17:29:42 UTC (rev 5487)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/huff/huffPlugin.cpp	2009-11-13 17:29:44 UTC (rev 5488)
@@ -18,6 +18,7 @@
 #include "ADM_default.h"
 #include "ADM_huffEncoder.h"
 #include "ADM_coreVideoEncoderInternal.h"
+#include "huff_encoder_desc.cpp"
 
 extern bool         huffConfigure(void);
 
@@ -28,6 +29,6 @@
                                 huffConfigure, // No configuration
                                 ADM_UI_ALL,
                                 1,0,0,
-                                NULL, // conf template
-                                NULL // conf var
+                                huff_encoder_param, // conf template
+                                &huffType // conf var
 );

Added: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/huff/huff_encoder.conf
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/huff/huff_encoder.conf	2009-11-13 17:29:42 UTC (rev 5487)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/huff/huff_encoder.conf	2009-11-13 17:29:44 UTC (rev 5488)
@@ -0,0 +1 @@
+uint32_t:encoderType

Added: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/huff/huff_encoder.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/huff/huff_encoder.h	2009-11-13 17:29:42 UTC (rev 5487)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/huff/huff_encoder.h	2009-11-13 17:29:44 UTC (rev 5488)
@@ -0,0 +1,8 @@
+// Automatically generated, do not edit!
+#ifndef ADM_huff_encoder_CONF_H
+#define ADM_huff_encoder_CONF_H
+typedef struct {
+   uint32_t encoderType;
+}huff_encoder;
+#endif //huff_encoder
+//EOF

Added: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/huff/huff_encoder_desc.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/huff/huff_encoder_desc.cpp	2009-11-13 17:29:42 UTC (rev 5487)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/huff/huff_encoder_desc.cpp	2009-11-13 17:29:44 UTC (rev 5488)
@@ -0,0 +1,5 @@
+// Automatically generated, do not edit!
+const ADM_paramList huff_encoder_param[]={
+ {"encoderType",offsetof( huff_encoder,encoderType),"uint32_t",ADM_param_uint32_t},
+{NULL,0,NULL}
+};



From mean at mail.berlios.de  Fri Nov 13 19:27:16 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Fri, 13 Nov 2009 19:27:16 +0100
Subject: [Avidemux-svn-commit] r5489 -
	branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/jpeg
Message-ID: <200911131827.nADIRGux019582@sheep.berlios.de>

Author: mean
Date: 2009-11-13 19:27:16 +0100 (Fri, 13 Nov 2009)
New Revision: 5489

Modified:
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/jpeg/ADM_jpegEncoder.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/jpeg/ADM_jpegEncoder.h
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/jpeg/jpegPlugin.cpp
Log:
[VideoEncoder/Mjpeg] Switch to new configuration scheme

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/jpeg/ADM_jpegEncoder.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/jpeg/ADM_jpegEncoder.cpp	2009-11-13 17:29:44 UTC (rev 5488)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/jpeg/ADM_jpegEncoder.cpp	2009-11-13 18:27:16 UTC (rev 5489)
@@ -19,16 +19,14 @@
 #include "ADM_default.h"
 #include "ADM_jpegEncoder.h"
 #include "DIA_factory.h"
-
-static uint32_t Quantizer=2;
-static ADM_colorspace jpegColor=ADM_COLOR_YV12; //ADM_COLOR_YUV422P; //ADM_COLOR_YV12;
+jpeg_encoder jpegConf= {ADM_COLOR_YV12,2};
 /**
         \fn ADM_jpegEncoder
 */
 ADM_jpegEncoder::ADM_jpegEncoder(ADM_coreVideoFilter *src) : ADM_coreVideoEncoderFFmpeg(src)
 {
     printf("[jpegEncoder] Creating.\n");
-    targetColorSpace=jpegColor;
+    targetColorSpace=(ADM_colorspace)jpegConf.colorSpace;
 }
 /**
     \fn setup
@@ -44,7 +42,7 @@
 */
 ADM_jpegEncoder::~ADM_jpegEncoder()
 {
-    printf("[jpegEncoder] Destroying.\n");
+    ADM_info("[jpegEncoder] Destroying.\n");
     
 }
 
@@ -55,11 +53,11 @@
 {
     if(false==preEncode()) return false;
     _context->flags |= CODEC_FLAG_QSCALE;
-    _frame.quality = (int) floor (FF_QP2LAMBDA * Quantizer+ 0.5);
+    _frame.quality = (int) floor (FF_QP2LAMBDA * jpegConf.quantizer+ 0.5);
     int sz=0;
     if ((sz = avcodec_encode_video (_context, out->data, out->bufferSize, &_frame)) < 0)
     {
-        printf("[jpeg] Error %d encoding video\n",sz);
+        ADM_error("[jpeg] Error %d encoding video\n",sz);
         return false;
     }
     
@@ -77,21 +75,23 @@
 	{ADM_COLOR_YUV422P,QT_TR_NOOP("YUV422")},
 	{ADM_COLOR_YV12,QT_TR_NOOP("YUV420")},
 };
-
+/**
+    \fn jpegConfigure
+*/
 bool         jpegConfigure(void)
 {
 uint32_t colorM;
     printf("[jpeg] Configure\n");
-    colorM=(uint32_t)jpegColor;
+    colorM=(uint32_t)jpegConf.colorSpace;
 
-    diaElemUInteger  q(&(Quantizer),QT_TR_NOOP("_Quantizer:"),2,31);
+    diaElemUInteger  q(&(jpegConf.quantizer),QT_TR_NOOP("_Quantizer:"),2,31);
     diaElemMenu      c(&colorM,QT_TR_NOOP("_ColorSpace:"),2,colorMenus);
 
     diaElem *elems[2]={&q,&c};
     
   if( diaFactoryRun(QT_TR_NOOP("Mjpeg Configuration"),2 ,elems))
   {
-    jpegColor=(ADM_colorspace)colorM;
+    jpegConf.colorSpace=colorM;
     return false;
   }
   return true;

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/jpeg/ADM_jpegEncoder.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/jpeg/ADM_jpegEncoder.h	2009-11-13 17:29:44 UTC (rev 5488)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/jpeg/ADM_jpegEncoder.h	2009-11-13 18:27:16 UTC (rev 5489)
@@ -18,11 +18,13 @@
 #ifndef ADM_jpeg_ENCODER_H
 #define ADM_jpeg_ENCODER_H
 #include "ADM_coreVideoEncoderFFmpeg.h"
+#include "jpeg_encoder.h"
 /**
         \class ADM_jpegEncoder
         \brief Dummy encoder that does nothing
 
 */
+extern jpeg_encoder jpegConf;
 class ADM_jpegEncoder : public ADM_coreVideoEncoderFFmpeg
 {
 protected:

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/jpeg/jpegPlugin.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/jpeg/jpegPlugin.cpp	2009-11-13 17:29:44 UTC (rev 5488)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/jpeg/jpegPlugin.cpp	2009-11-13 18:27:16 UTC (rev 5489)
@@ -16,9 +16,11 @@
  *                                                                         *
  ***************************************************************************/
 #include "ADM_default.h"
+#include "ADM_coreVideoEncoderInternal.h"
 #include "ADM_jpegEncoder.h"
-#include "ADM_coreVideoEncoderInternal.h"
 
+#include "jpeg_encoder_desc.cpp"
+
 extern bool         jpegConfigure(void);
 
 ADM_DECLARE_VIDEO_ENCODER_PREAMBLE(ADM_jpegEncoder);
@@ -28,6 +30,6 @@
                                 jpegConfigure, // No configuration
                                 ADM_UI_ALL,
                                 1,0,0,
-                                NULL, // conf template
-                                NULL // conf var
+                                jpeg_encoder_param, // conf template
+                                &jpegConf // conf var
 );



From mean at mail.berlios.de  Fri Nov 13 19:27:18 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Fri, 13 Nov 2009 19:27:18 +0100
Subject: [Avidemux-svn-commit] r5490 -
	branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/jpeg
Message-ID: <200911131827.nADIRIKk019619@sheep.berlios.de>

Author: mean
Date: 2009-11-13 19:27:18 +0100 (Fri, 13 Nov 2009)
New Revision: 5490

Added:
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/jpeg/jpeg_encoder.conf
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/jpeg/jpeg_encoder.h
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/jpeg/jpeg_encoder_desc.cpp
Log:
[VideoEncoder/Mjpeg] Switch to new configuration scheme (conf files)

Added: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/jpeg/jpeg_encoder.conf
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/jpeg/jpeg_encoder.conf	2009-11-13 18:27:16 UTC (rev 5489)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/jpeg/jpeg_encoder.conf	2009-11-13 18:27:18 UTC (rev 5490)
@@ -0,0 +1,2 @@
+uint32_t:colorSpace
+uint32_t:quantizer

Added: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/jpeg/jpeg_encoder.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/jpeg/jpeg_encoder.h	2009-11-13 18:27:16 UTC (rev 5489)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/jpeg/jpeg_encoder.h	2009-11-13 18:27:18 UTC (rev 5490)
@@ -0,0 +1,9 @@
+// Automatically generated, do not edit!
+#ifndef ADM_jpeg_encoder_CONF_H
+#define ADM_jpeg_encoder_CONF_H
+typedef struct {
+   uint32_t colorSpace;
+   uint32_t quantizer;
+}jpeg_encoder;
+#endif //jpeg_encoder
+//EOF

Added: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/jpeg/jpeg_encoder_desc.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/jpeg/jpeg_encoder_desc.cpp	2009-11-13 18:27:16 UTC (rev 5489)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/jpeg/jpeg_encoder_desc.cpp	2009-11-13 18:27:18 UTC (rev 5490)
@@ -0,0 +1,6 @@
+// Automatically generated, do not edit!
+const ADM_paramList jpeg_encoder_param[]={
+ {"colorSpace",offsetof( jpeg_encoder,colorSpace),"uint32_t",ADM_param_uint32_t},
+ {"quantizer",offsetof( jpeg_encoder,quantizer),"uint32_t",ADM_param_uint32_t},
+{NULL,0,NULL}
+};



From mean at mail.berlios.de  Sat Nov 14 08:41:53 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sat, 14 Nov 2009 08:41:53 +0100
Subject: [Avidemux-svn-commit] r5491 -
	branches/avidemux_2.6_branch_mean/cmake
Message-ID: <200911140741.nAE7frB1006077@sheep.berlios.de>

Author: mean
Date: 2009-11-14 08:41:52 +0100 (Sat, 14 Nov 2009)
New Revision: 5491

Modified:
   branches/avidemux_2.6_branch_mean/cmake/ve_plugin.cmake
Log:
[Win32] Lib deps for video encoder plugin

Modified: branches/avidemux_2.6_branch_mean/cmake/ve_plugin.cmake
===================================================================
--- branches/avidemux_2.6_branch_mean/cmake/ve_plugin.cmake	2009-11-13 18:27:18 UTC (rev 5490)
+++ branches/avidemux_2.6_branch_mean/cmake/ve_plugin.cmake	2009-11-14 07:41:52 UTC (rev 5491)
@@ -15,6 +15,6 @@
 
 MACRO(INSTALL_VIDEO_ENCODER _lib)
 	INSTALL(TARGETS ${_lib} DESTINATION "${VE_PLUGIN_DIR}")
-	TARGET_LINK_LIBRARIES(${_lib} ADM_core6 ADM_coreUI6 ADM_coreVideoEncoder6 ADM_coreImage6)
+	TARGET_LINK_LIBRARIES(${_lib} ADM_core6 ADM_coreUI6 ADM_coreVideoEncoder6 ADM_coreImage6 ADM_coreUtils6)
 ENDMACRO(INSTALL_VIDEO_ENCODER)
 



From mean at mail.berlios.de  Sat Nov 14 09:24:57 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sat, 14 Nov 2009 09:24:57 +0100
Subject: [Avidemux-svn-commit] r5492 -
	branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_matroska
Message-ID: <200911140824.nAE8Ovnm008272@sheep.berlios.de>

Author: mean
Date: 2009-11-14 09:24:57 +0100 (Sat, 14 Nov 2009)
New Revision: 5492

Modified:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_matroska/ADM_mkvTrackType.cpp
Log:
[MKV] Add PCM support (2.5)

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_matroska/ADM_mkvTrackType.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_matroska/ADM_mkvTrackType.cpp	2009-11-14 07:41:52 UTC (rev 5491)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_matroska/ADM_mkvTrackType.cpp	2009-11-14 08:24:57 UTC (rev 5492)
@@ -46,7 +46,7 @@
   {"A_AAC/MPEG2/LC",0,WAV_AAC,""},
   {"A_AAC/MPEG4/LC/SBR",0,WAV_AAC,""},
   {"A_AAC/MPEG4/LC",0,WAV_AAC,""},
-  
+  {"A_PCM/INT/LIT",0,WAV_PCM,""},
   {"A_AAC",0,WAV_AAC,""},
   {"A_VORBIS",0,WAV_OGG,""},
   {"A_DTS",0,WAV_DTS,""},



From mean at mail.berlios.de  Sat Nov 14 09:25:13 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sat, 14 Nov 2009 09:25:13 +0100
Subject: [Avidemux-svn-commit] r5493 -
	branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/Matroska
Message-ID: <200911140825.nAE8PDN6008304@sheep.berlios.de>

Author: mean
Date: 2009-11-14 09:25:12 +0100 (Sat, 14 Nov 2009)
New Revision: 5493

Modified:
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/Matroska/ADM_mkvTrackType.cpp
Log:
[MKV/Demux] Add PCM type (most common flavor) to audio track type

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/Matroska/ADM_mkvTrackType.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/Matroska/ADM_mkvTrackType.cpp	2009-11-14 08:24:57 UTC (rev 5492)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/Matroska/ADM_mkvTrackType.cpp	2009-11-14 08:25:12 UTC (rev 5493)
@@ -41,6 +41,7 @@
   {"A_AAC/MPEG2/LC",0,WAV_AAC,""},
   {"A_AAC/MPEG4/LC/SBR",0,WAV_AAC,""},
   {"A_AAC/MPEG4/LC",0,WAV_AAC,""},
+  {"A_PCM/INT/LIT",0,WAV_PCM,""},
 
   {"A_AAC",0,WAV_AAC,""},
   {"A_VORBIS",0,WAV_OGG_VORBIS,""},



From mean at mail.berlios.de  Sat Nov 14 16:23:37 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sat, 14 Nov 2009 16:23:37 +0100
Subject: [Avidemux-svn-commit] r5494 - in branches/avidemux_2.6_branch_mean:
	avidemux/common avidemux/common/ADM_editor
	avidemux/common/ADM_script avidemux/common/ADM_videoEncoder/include
	avidemux/common/ADM_videoFilter2/include
	avidemux/common/ADM_videoFilter2/src avidemux/qt4
	avidemux/qt4/ADM_UIs/src avidemux/qt4/ADM_userInterfaces/ADM_dialog
	avidemux/qt4/ADM_userInterfaces/ADM_filters
	avidemux/qt4/ADM_userInterfaces/ADM_gui
	avidemux_core/ADM_coreImage/src avidemux_plugins/ADM_videoFilters6
Message-ID: <200911141523.nAEFNbPe012653@sheep.berlios.de>

Author: mean
Date: 2009-11-14 16:23:35 +0100 (Sat, 14 Nov 2009)
New Revision: 5494

Added:
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoFilter2/include/ADM_videoFilterBridge.h
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoFilter2/include/ADM_videoFilters.h
Removed:
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoFilter2/src/ADM_videoFilterBridge.h
Modified:
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edIdentify.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edLoadSave.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edit.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_preview.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script/ADM_JSAvidemuxAudio.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script/ADM_JSAvidemuxVideo.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script/ADM_JSFunctions.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script/ADM_JSFunctionsNonRegFactory.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script/adm_scanner.h
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoEncoder/include/ADM_videoEncoderApi.h
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoFilter2/include/ADM_videoFilterApi.h
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoFilter2/src/ADM_filterChain.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoFilter2/src/ADM_pluginLoad.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoFilter2/src/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux/common/gui_blackframes.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/gui_play.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/gui_savenew.cpp
   branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_UIs/src/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_UIs/src/T_flyDialogQt4.cpp
   branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_dialog/DIA_none.cpp
   branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_dialog/T_index_pg.cpp
   branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_filters/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_filters/Q_mainfilter.cpp
   branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_filters/Q_seekablePreview.h
   branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_gui/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux/qt4/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreImage/src/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/CMakeLists.txt
Log:
[VideoFilter] Begin to remove part of old video filter api

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edIdentify.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edIdentify.cpp	2009-11-14 08:25:12 UTC (rev 5493)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edIdentify.cpp	2009-11-14 15:23:35 UTC (rev 5494)
@@ -20,7 +20,7 @@
 #include "ADM_default.h"
 #include "fourcc.h"
 #include "ADM_editor/ADM_edit.hxx"
-#include "ADM_videoFilter.h"
+//#include "ADM_videoFilter.h"
 
 #include "ADM_coreDemuxerMpeg/include/dmx_identify.h"
 

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edLoadSave.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edLoadSave.cpp	2009-11-14 08:25:12 UTC (rev 5493)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edLoadSave.cpp	2009-11-14 15:23:35 UTC (rev 5494)
@@ -25,8 +25,8 @@
 #include "audioEncoderApi.h"
 #include "DIA_coreToolkit.h"
 #include "ADM_editor/ADM_edit.hxx"
-#include "ADM_videoFilter.h"
-#include "ADM_videoFilter_internal.h"
+//#include "ADM_videoFilter.h"
+//#include "ADM_videoFilter_internal.h"
 #include "ADM_videoEncoderApi.h"
 #include "ADM_paramList.h"
 #include "prefs.h"

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edit.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edit.cpp	2009-11-14 08:25:12 UTC (rev 5493)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edit.cpp	2009-11-14 15:23:35 UTC (rev 5494)
@@ -29,7 +29,7 @@
 
 #include "DIA_coreToolkit.h"
 #include "ADM_editor/ADM_edit.hxx"
-#include "ADM_videoFilter.h"
+//#include "ADM_videoFilter.h"
 #include "prefs.h"
 
 #include "ADM_debugID.h"

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_preview.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_preview.cpp	2009-11-14 08:25:12 UTC (rev 5493)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_preview.cpp	2009-11-14 15:23:35 UTC (rev 5494)
@@ -37,8 +37,8 @@
 
 
 #include "ADM_editor/ADM_edit.hxx"
-#include "ADM_videoFilter.h"
-#include "ADM_videoFilter_internal.h"
+//#include "ADM_videoFilter.h"
+//#include "ADM_videoFilter_internal.h"
 #include "ADM_render/GUI_render.h"
 
 #include "ADM_debugID.h"
@@ -49,8 +49,8 @@
 #include "ADM_preview.h"
 #define MAX(a,b) ( (a)>(b) ? (a) : (b) )
 
-extern FILTER  videofilters[VF_MAX_FILTER];
-extern uint32_t nb_active_filter;
+//extern FILTER  videofilters[VF_MAX_FILTER];
+//extern uint32_t nb_active_filter;
 extern void    UI_setCurrentTime(uint64_t curTime);
 
 static void previewBlit(ADMImage *from,ADMImage *to,uint32_t startx,uint32_t starty);
@@ -187,15 +187,17 @@
             ADM_assert(!original);
             switch(previewMode)
             {
+#if 0
               case  ADM_PREVIEW_SEPARATE:
                   DIA_previewInit(preview->getInfo()->width,preview->getInfo()->height);
-                  
+#endif                  
                   /* no break here, not a mistake */
               case  ADM_PREVIEW_NONE:
               
                   rdrWindowWUnzoomed=rdrPhysicalW;
                   rdrWindowHUnzoomed=rdrPhysicalH;
                   break;
+#if 0
               case  ADM_PREVIEW_OUTPUT:
                   rdrWindowWUnzoomed=preview->getInfo()->width;
                   rdrWindowHUnzoomed=preview->getInfo()->height;
@@ -215,6 +217,7 @@
                   original=new ADMImage(rdrWindowWUnzoomed,rdrWindowHUnzoomed);
                   break;
               }
+#endif
               default: ADM_assert(0);
             }
         if(zoom!=ZOOM_1_1)
@@ -255,6 +258,7 @@
 void admPreview::stop( void )
 {
   renderLock();
+#if 0
       if(previewMode==ADM_PREVIEW_SEPARATE)
                 DIA_previewEnd();
       if(  previewMode==ADM_PREVIEW_SIDE || previewMode==ADM_PREVIEW_TOP)
@@ -263,6 +267,7 @@
         delete original;
         original=NULL; 
       }
+#endif
       renderResize(rdrWindowWUnzoomed,rdrWindowHUnzoomed,rdrWindowWUnzoomed,rdrWindowHUnzoomed);
       if(previewImage)
       {
@@ -582,6 +587,7 @@
                 renderUpdateImage(resized->data,zoom);
             }
             break;
+#if 0
       case ADM_PREVIEW_SEPARATE:
             if(zoom==ZOOM_1_1 || renderHasAccelZoom()  )
             {
@@ -606,6 +612,7 @@
               renderUpdateImage(resized->data,zoom);
             }
               break;
+#endif
       default: ADM_assert(0);
     }
 }

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script/ADM_JSAvidemuxAudio.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script/ADM_JSAvidemuxAudio.cpp	2009-11-14 08:25:12 UTC (rev 5493)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script/ADM_JSAvidemuxAudio.cpp	2009-11-14 15:23:35 UTC (rev 5494)
@@ -18,7 +18,7 @@
 #include "ADM_commonUI/GUI_ui.h"
 #include "avi_vars.h"
 #include "gui_action.hxx"
-#include "ADM_videoFilter.h"
+
 #include "ADM_editor/ADM_outputfmt.h"
 #include "ADM_script/ADM_container.h"
 #include "ADM_audioFilter/include/ADM_audioFilterInterface.h"

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script/ADM_JSAvidemuxVideo.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script/ADM_JSAvidemuxVideo.cpp	2009-11-14 08:25:12 UTC (rev 5493)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script/ADM_JSAvidemuxVideo.cpp	2009-11-14 15:23:35 UTC (rev 5494)
@@ -19,14 +19,14 @@
 #include "ADM_commonUI/GUI_ui.h"
 #include "avi_vars.h"
 #include "gui_action.hxx"
-#include "ADM_videoFilter.h"
-#include "ADM_videoFilter_internal.h"
+
+
 #include "ADM_editor/ADM_outputfmt.h"
 #include "ADM_commonUI/GUI_ui.h"
 #include "ADM_script/ADM_container.h"
 #include "ADM_videoEncoderApi.h"
 
-extern VF_FILTERS filterGetTagFromName(const char *inname);
+//extern VF_FILTERS filterGetTagFromName(const char *inname);
 extern uint8_t A_ListAllBlackFrames( char *file );
 extern uint8_t loadVideoCodecConfString( const char *name);
 extern uint8_t ADM_saveRaw (const char *name);

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script/ADM_JSFunctions.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script/ADM_JSFunctions.cpp	2009-11-14 08:25:12 UTC (rev 5493)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script/ADM_JSFunctions.cpp	2009-11-14 15:23:35 UTC (rev 5494)
@@ -34,7 +34,7 @@
 #include "adm_scanner.h" 
 #include "avi_vars.h"
 #include "gui_action.hxx"
-#include "ADM_videoFilter.h"
+//#include "ADM_videoFilter.h"
 #include "ADM_editor/ADM_outputfmt.h"
 
 #include "ADM_script/ADM_container.h"

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script/ADM_JSFunctionsNonRegFactory.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script/ADM_JSFunctionsNonRegFactory.cpp	2009-11-14 08:25:12 UTC (rev 5493)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script/ADM_JSFunctionsNonRegFactory.cpp	2009-11-14 15:23:35 UTC (rev 5494)
@@ -35,7 +35,7 @@
 #include "avi_vars.h"
 #include "gui_action.hxx"
 
-#include "ADM_videoFilter.h"
+//#include "ADM_videoFilter.h"
 #include "ADM_editor/ADM_outputfmt.h"
 
 #include "ADM_script/ADM_container.h"

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script/adm_scanner.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script/adm_scanner.h	2009-11-14 08:25:12 UTC (rev 5493)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script/adm_scanner.h	2009-11-14 15:23:35 UTC (rev 5494)
@@ -6,7 +6,7 @@
 #define ADMSCANNER
 
 #define ADM_MAX_VAR 50
-#include "ADM_videoFilter_iface.h"
+//#include "ADM_videoFilter_iface.h"
 
 typedef enum
 {
@@ -17,7 +17,7 @@
 	ASC_EXEC_FAILED
 }ASC_ERROR;
 
-int PushParam(APM_TYPE, char *value);
+//int PushParam(APM_TYPE, char *value);
 int Call(char *string);
 
 

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoEncoder/include/ADM_videoEncoderApi.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoEncoder/include/ADM_videoEncoderApi.h	2009-11-14 08:25:12 UTC (rev 5493)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoEncoder/include/ADM_videoEncoderApi.h	2009-11-14 15:23:35 UTC (rev 5494)
@@ -19,6 +19,7 @@
 #define ADM_VIDEO_ENCODER_API_H
 class ADM_coreVideoEncoder;
 class ADM_coreVideoFilter;
+class CONFcouple;
 // Spawn a new encoder using the index from the menu = the index in the vector
 ADM_coreVideoEncoder *createVideoEncoderFromIndex(ADM_coreVideoFilter *chain,int index);
 

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoFilter2/include/ADM_videoFilterApi.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoFilter2/include/ADM_videoFilterApi.h	2009-11-14 08:25:12 UTC (rev 5493)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoFilter2/include/ADM_videoFilterApi.h	2009-11-14 15:23:35 UTC (rev 5494)
@@ -13,13 +13,18 @@
  ***************************************************************************/
 #ifndef ADM_VIDEO_FILTER_API_H
 #define ADM_VIDEO_FILTER_API_H
+#include <vector>
+#include "ADM_filterCategory.h"
+class ADM_coreVideoFilter;
+class CONFcouple;
+uint8_t     ADM_vf_loadPlugins(const char *path);
 
-uint8_t ADM_vf_loadPlugins(const char *path);
+uint32_t    ADM_vf_getNbFilters(void);
+uint32_t    ADM_vf_getNbFiltersInCategory(VF_CATEGORY cat);
 
-uint32_t ADM_vf_getNbFilters(void);
-uint32_t ADM_vf_getNbFiltersInCategory(VF_CATEGORY cat);
+bool        ADM_vf_getFilterInfo(VF_CATEGORY cat,int filter, const char **name,const char **desc, uint32_t *major,uint32_t *minor,uint32_t *patch);
+const char *ADM_vf_getDisplayNameFromTag(uint32_t tag);
 
-bool     ADM_vf_getFilterInfo(VF_CATEGORY cat,int filter, const char **name,const char **desc, uint32_t *major,uint32_t *minor,uint32_t *patch);
+ADM_coreVideoFilter *ADM_vf_createFromTag(uint32_t tag,ADM_coreVideoFilter *last,CONFcouple *couples);
 
-
 #endif //ADM_VIDEO_FILTER_API_H

Copied: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoFilter2/include/ADM_videoFilterBridge.h (from rev 5493, branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoFilter2/src/ADM_videoFilterBridge.h)
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoFilter2/src/ADM_videoFilterBridge.h	2009-11-14 08:25:12 UTC (rev 5493)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoFilter2/include/ADM_videoFilterBridge.h	2009-11-14 15:23:35 UTC (rev 5494)
@@ -0,0 +1,47 @@
+/***************************************************************************
+                          \fn ADM_videoFilterBridge.h
+                          \brief Base class for Video Filters
+                           (c) Mean 2009
+
+
+
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+#ifndef ADM_VIDEO_FILTER_BRIDGE_H
+#define ADM_VIDEO_FILTER_BRIDGE_H
+
+#include "ADM_coreVideoFilter.h"
+/**
+    \class ADM_videoFilterBridge
+    \brief Class that transform Editor API to coreVideoFilter API
+
+*/
+class ADM_videoFilterBridge : public ADM_coreVideoFilter
+{
+protected:
+        uint64_t            startTime,endTime;
+        FilterInfo          bridgeInfo;
+        bool                firstImage;
+        uint32_t            lastSentImage;
+        virtual bool        nextFrame(ADMImage *image);    /// Return the next image
+public:
+                            ADM_videoFilterBridge(uint64_t startTime, uint64_t endTime);
+                            ~ADM_videoFilterBridge();
+       virtual bool         getFrame(uint32_t frame,ADMImage *image);
+       
+	   virtual FilterInfo  *getInfo(void);                                      /// Return picture parameters after this filter
+	   virtual bool         getCoupledConf(CONFcouple **couples) {*couples=NULL;return true;} ; /// Return the current filter configuration
+
+        bool                rewind(void);
+
+};
+
+#endif

Added: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoFilter2/include/ADM_videoFilters.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoFilter2/include/ADM_videoFilters.h	2009-11-14 08:25:12 UTC (rev 5493)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoFilter2/include/ADM_videoFilters.h	2009-11-14 15:23:35 UTC (rev 5494)
@@ -0,0 +1,38 @@
+/**
+        \file  ADM_videoFilters.h
+        \brief Handle current filter list
+
+
+*/
+
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ ***************************************************************************/
+#ifndef ADM_VIDEO_FILTERS_H
+#define ADM_VIDEO_FILTERS_H
+
+class ADM_coreVideoFilter;
+/**
+    \struct ADM_VideoFilterElment
+*/
+typedef struct
+{
+    uint32_t            tag; // Temporary filter tag
+    ADM_coreVideoFilter *instance;
+}ADM_VideoFilterElement;
+
+extern std::vector<ADM_VideoFilterElement> ADM_VideoFilters;
+
+// Get list
+uint32_t                ADM_vf_getSize(void);
+ADM_coreVideoFilter     *ADM_vf_getInstance(int index);
+uint32_t                ADM_vf_getTag(int index);
+
+bool                    ADM_vf_addFilterFromTag(uint32_t tag);
+bool                    ADM_vf_removeFilterAtIndex(int index);
+#endif
\ No newline at end of file

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoFilter2/src/ADM_filterChain.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoFilter2/src/ADM_filterChain.cpp	2009-11-14 08:25:12 UTC (rev 5493)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoFilter2/src/ADM_filterChain.cpp	2009-11-14 15:23:35 UTC (rev 5494)
@@ -19,6 +19,10 @@
 #include "ADM_coreVideoFilter.h"
 #include "ADM_filterChain.h"
 #include "ADM_videoFilterBridge.h"
+
+
+
+
 /**
     \fn createVideoFilterChain
     \brief Create a filter chain

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoFilter2/src/ADM_pluginLoad.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoFilter2/src/ADM_pluginLoad.cpp	2009-11-14 08:25:12 UTC (rev 5493)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoFilter2/src/ADM_pluginLoad.cpp	2009-11-14 15:23:35 UTC (rev 5494)
@@ -125,7 +125,7 @@
     
     }else   
     {
-        plugin->tag=lastTag++;
+        plugin->tag=ADM_videoFilterPluginsList[info->category].size();
         ADM_videoFilterPluginsList[info->category].push_back(plugin);
     }
 
@@ -206,6 +206,42 @@
 
 	return 1;
 }
-
-
+/**
+    \fn ADM_vf_getPluginFromTag
+    \brief 
+*/
+static ADM_vf_plugin *ADM_vf_getPluginFromTag(uint32_t tag)
+{
+    for(int cat=0;cat<VF_MAX;cat++)
+    {
+        int nb=ADM_videoFilterPluginsList[cat].size();
+        for(int i=0;i<nb;i++)
+        {
+            if(ADM_videoFilterPluginsList[cat][i]->tag==tag)
+            {
+                return ADM_videoFilterPluginsList[cat][i];
+            }
+        }
+    }
+    ADM_error("Cannot get video filter from tag %"LU"\n",tag);
+    ADM_assert(0);
+}
+/**
+    \fn ADM_VideoFilters
+    \brief
+*/
+const char *ADM_vf_getDisplayNameFromTag(uint32_t tag)
+{
+    ADM_vf_plugin *plugin=ADM_vf_getPluginFromTag(tag);
+    return plugin->info.displayName;
+}
+/**
+    \fn ADM_vf_createFromTag
+    \brief Create a new filter from its tag
+*/
+ADM_coreVideoFilter *ADM_vf_createFromTag(uint32_t tag,ADM_coreVideoFilter *last,CONFcouple *couples)
+{
+     ADM_vf_plugin *plugin=ADM_vf_getPluginFromTag(tag);
+     return plugin->create(last,couples);
+}
 //EOF

Deleted: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoFilter2/src/ADM_videoFilterBridge.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoFilter2/src/ADM_videoFilterBridge.h	2009-11-14 08:25:12 UTC (rev 5493)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoFilter2/src/ADM_videoFilterBridge.h	2009-11-14 15:23:35 UTC (rev 5494)
@@ -1,47 +0,0 @@
-/***************************************************************************
-                          \fn ADM_videoFilterBridge.h
-                          \brief Base class for Video Filters
-                           (c) Mean 2009
-
-
-
- ***************************************************************************/
-
-/***************************************************************************
- *                                                                         *
- *   This program is free software; you can redistribute it and/or modify  *
- *   it under the terms of the GNU General Public License as published by  *
- *   the Free Software Foundation; either version 2 of the License, or     *
- *   (at your option) any later version.                                   *
- *                                                                         *
- ***************************************************************************/
-#ifndef ADM_VIDEO_FILTER_BRIDGE_H
-#define ADM_VIDEO_FILTER_BRIDGE_H
-
-#include "ADM_coreVideoFilter.h"
-/**
-    \class ADM_videoFilterBridge
-    \brief Class that transform Editor API to coreVideoFilter API
-
-*/
-class ADM_videoFilterBridge : public ADM_coreVideoFilter
-{
-protected:
-        uint64_t            startTime,endTime;
-        FilterInfo          bridgeInfo;
-        bool                firstImage;
-        uint32_t            lastSentImage;
-        virtual bool        nextFrame(ADMImage *image);    /// Return the next image
-public:
-                            ADM_videoFilterBridge(uint64_t startTime, uint64_t endTime);
-                            ~ADM_videoFilterBridge();
-       virtual bool         getFrame(uint32_t frame,ADMImage *image);
-       
-	   virtual FilterInfo  *getInfo(void);                                      /// Return picture parameters after this filter
-	   virtual bool         getCoupledConf(CONFcouple **couples) {*couples=NULL;return true;} ; /// Return the current filter configuration
-
-        bool                rewind(void);
-
-};
-
-#endif

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoFilter2/src/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoFilter2/src/CMakeLists.txt	2009-11-14 08:25:12 UTC (rev 5493)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoFilter2/src/CMakeLists.txt	2009-11-14 15:23:35 UTC (rev 5494)
@@ -2,5 +2,6 @@
 	ADM_videoFilterBridge.cpp
         ADM_filterChain.cpp
         ADM_pluginLoad.cpp
+        ADM_videoFilters.cpp
 )
 ADD_LIBRARY(ADM_internalVideoFilter6 STATIC ${ADM_internalVideoFilter_SRCS})

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/gui_blackframes.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/gui_blackframes.cpp	2009-11-14 08:25:12 UTC (rev 5493)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/gui_blackframes.cpp	2009-11-14 15:23:35 UTC (rev 5494)
@@ -33,8 +33,8 @@
 #include "DIA_coreToolkit.h"
 #include "ADM_render/GUI_render.h"
 #include "DIA_working.h"
-#include "ADM_videoFilter.h"
-#include "ADM_videoFilter_internal.h"
+//#include "ADM_videoFilter.h"
+//#include "ADM_videoFilter_internal.h"
 #include "ADM_commonUI/DIA_busy.h"
 #include "ADM_commonUI/GUI_ui.h"
 

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/gui_play.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/gui_play.cpp	2009-11-14 08:25:12 UTC (rev 5493)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/gui_play.cpp	2009-11-14 15:23:35 UTC (rev 5494)
@@ -21,8 +21,8 @@
 #include "avi_vars.h"
 #include "audio_out.h"
 #include "DIA_coreToolkit.h"
-#include "ADM_videoFilter.h"
-#include "ADM_videoFilter_internal.h"
+//#include "ADM_videoFilter.h"
+//#include "ADM_videoFilter_internal.h"
 #include "gtkgui.h"
 #include "ADM_render/GUI_render.h"
 #include "avidemutils.h"

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/gui_savenew.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/gui_savenew.cpp	2009-11-14 08:25:12 UTC (rev 5493)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/gui_savenew.cpp	2009-11-14 15:23:35 UTC (rev 5494)
@@ -24,8 +24,8 @@
 #include "DIA_enter.h"
 #include "ADM_coreAudio.h"
 
-#include "ADM_videoFilter.h"
-#include "ADM_videoFilter_internal.h"
+//#include "ADM_videoFilter.h"
+//#include "ADM_videoFilter_internal.h"
 #include "ADM_encoderConf.h"
 
 #include "ADM_encoderConf.h"

Modified: branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_UIs/src/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_UIs/src/CMakeLists.txt	2009-11-14 08:25:12 UTC (rev 5493)
+++ branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_UIs/src/CMakeLists.txt	2009-11-14 15:23:35 UTC (rev 5494)
@@ -7,7 +7,8 @@
 SET(${ADM_LIB}_T
 	T_bitrate.cpp  T_button.cpp  T_dialogFactory.cpp  T_filesel.cpp  T_menu.cpp
 	T_slider.cpp  T_threadCount.cpp  T_toggle.cpp  T_notch.cpp
-    T_flyDialogQt4.cpp T_QCanvas.cpp
+        #T_flyDialogQt4.cpp 
+        #T_QCanvas.cpp
 )
 
 SET(${ADM_LIB}_SRCS

Modified: branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_UIs/src/T_flyDialogQt4.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_UIs/src/T_flyDialogQt4.cpp	2009-11-14 08:25:12 UTC (rev 5493)
+++ branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_UIs/src/T_flyDialogQt4.cpp	2009-11-14 15:23:35 UTC (rev 5494)
@@ -20,7 +20,7 @@
 
 #include "ADM_default.h"
 
-#include "ADM_videoFilter.h"
+//#include "ADM_videoFilter.h"
 #include "DIA_flyDialog.h"
 #include "DIA_flyDialogQt4.h"
 

Modified: branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_dialog/DIA_none.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_dialog/DIA_none.cpp	2009-11-14 08:25:12 UTC (rev 5493)
+++ branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_dialog/DIA_none.cpp	2009-11-14 15:23:35 UTC (rev 5494)
@@ -15,12 +15,8 @@
  ***************************************************************************/
 #include "config.h"
 #include "ADM_default.h"
-#include "ADM_videoFilter.h"
+//#include "ADM_videoFilter.h"
 
-
-
-
-
 #include "ADM_encoderConf.h"
 //#include "ADM_audioEncoder/include/audioencoder_enum.h"
 
@@ -43,9 +39,10 @@
 int32_t UI_readJog(void) {return 0;}
 struct THRESHOLD_PARAM;
 struct ADMVideoThreshold;
-uint8_t DIA_threshold(AVDMGenericVideoStream *in,
+/*uint8_t DIA_threshold(AVDMGenericVideoStream *in,
                       ADMVideoThreshold * thresholdp,
                       THRESHOLD_PARAM * param) { return 255; }
+
 struct SWISSARMYKNIFE_PARAM;
 struct ADMVideoSwissArmyKnife;
 struct MenuMapping;
@@ -68,5 +65,6 @@
                       PARTICLE_PARAM * param,
                       const MenuMapping * menu_mapping,
                       uint32_t menu_mapping_count) { return 255; }
+*/
 
 //EOF

Modified: branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_dialog/T_index_pg.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_dialog/T_index_pg.cpp	2009-11-14 08:25:12 UTC (rev 5493)
+++ branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_dialog/T_index_pg.cpp	2009-11-14 15:23:35 UTC (rev 5494)
@@ -21,7 +21,7 @@
 
 #include "T_index_pg.h"
 #include "ADM_default.h"
-#include "ADM_videoFilter.h"
+//#include "ADM_videoFilter.h"
 //#include "ADM_encoderConf.h"
 //#include "ADM_encoder/adm_encoder.h"
 #include "DIA_idx_pg.h"

Modified: branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_filters/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_filters/CMakeLists.txt	2009-11-14 08:25:12 UTC (rev 5493)
+++ branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_filters/CMakeLists.txt	2009-11-14 15:23:35 UTC (rev 5494)
@@ -1,11 +1,14 @@
 SET(ADM_LIB ADM_filtersQt4)
 
-QT4_WRAP_UI(${ADM_LIB}_header  mainfilter.ui seekablePreview.ui)
-QT4_WRAP_CPP(${ADM_LIB}_source  Q_mainfilter.h Q_seekablePreview.h)
+QT4_WRAP_UI(${ADM_LIB}_header  mainfilter.ui )# seekablePreview.ui)
+QT4_WRAP_CPP(${ADM_LIB}_source  Q_mainfilter.h )# Q_seekablePreview.h)
 QT4_ADD_RESOURCES(${ADM_LIB}_resource  filter.qrc)
 
 SET(${ADM_LIB}_SRCS
-	filter_none.cpp  Q_mainfilter.cpp Q_seekablePreview.cpp ${${ADM_LIB}_header}  ${${ADM_LIB}_source}  ${${ADM_LIB}_resource})
+	filter_none.cpp  
+        Q_mainfilter.cpp 
+        #Q_seekablePreview.cpp 
+        ${${ADM_LIB}_header}  ${${ADM_LIB}_source}  ${${ADM_LIB}_resource})
 
 INCLUDE_DIRECTORIES(${CMAKE_CURRENT_BINARY_DIR})
 ADD_LIBRARY(${ADM_LIB} STATIC ${${ADM_LIB}_SRCS})

Modified: branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_filters/Q_mainfilter.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_filters/Q_mainfilter.cpp	2009-11-14 08:25:12 UTC (rev 5493)
+++ branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_filters/Q_mainfilter.cpp	2009-11-14 15:23:35 UTC (rev 5494)
@@ -36,6 +36,7 @@
 #include "ADM_coreVideoFilter.h"
 #include "ADM_filterCategory.h"
 #include "ADM_videoFilterApi.h"
+#include "ADM_videoFilters.h"
 
 #include "prefs.h"
 
@@ -49,7 +50,7 @@
 #define ALL_FILTER_BASE       1000
 #define ACTIVE_FILTER_BASE    3000
 /******************************************************/
-uint32_t nb_active_filter=1;
+#define nb_active_filter ADM_vf_getSize()
 
 /*******************************************************/
 
@@ -118,8 +119,7 @@
 */
 void filtermainWindow::setSelected( int sel)
 {
-  if(!sel) return;
-  activeList->setCurrentRow(sel-1);
+  activeList->setCurrentRow(sel);
 }
 
 /**
@@ -128,45 +128,34 @@
 */
 void filtermainWindow::add( bool b)
 {
-#if 0
   /* Now that we have the tab, get the selection */
    QListWidgetItem *item=availableList->currentItem();
    VF_FILTERS tag;
    if(item)
    {
      int itag=item->type();
-     if(itag>=ALL_FILTER_BASE && itag < EXTERNAL_FILTER_BASE)
+
+     if(itag<ALL_FILTER_BASE || itag >= ALL_FILTER_BASE+(VF_MAX*100))
      {
-    	 // Extract family & index
-    	 itag-=ALL_FILTER_BASE;
-    	 int index=itag%100;
-    	 int family=(itag-index)/100;
-    	 ADM_assert(family<VF_MAX);
-    	 ADM_assert(index<filterCategories[family].size());
-         tag=filterCategories[family][index]->tag;
-     }else
-     {
-        ADM_assert(0); 
+            ADM_assert(0); 
      }
-      printf("Tag : %d\n",itag);
-      
-      // Create our filter...
-      
-       CONFcouple *coup;
-        videofilters[nb_active_filter].filter = filterCreateFromTag (tag, NULL, videofilters[nb_active_filter - 1].filter);
-        if(!videofilters[nb_active_filter].filter->    configure (videofilters[nb_active_filter - 1].filter))
+     // Extract family & index
+     itag-=ALL_FILTER_BASE;
+     int index=itag%100;
+     int family=(itag-index)/100;
+     ADM_assert(family<VF_MAX);
+     ADM_assert(index<ADM_vf_getNbFiltersInCategory((VF_CATEGORY)family));
+     tag=index; //filterCategories[family][index]->tag;
+     ADM_info("Tag : %d->family=%d, index=%d\n",itag,family,tag);
+
+     if(true==ADM_vf_addFilterFromTag(tag))
         {
-            delete videofilters[nb_active_filter].filter;
-            return;
+            buildActiveFilterList();
+            setSelected(nb_active_filter-1);
         }
-        videofilters[nb_active_filter].filter->getCoupledConf (&coup);
-        videofilters[nb_active_filter].tag = tag;
-        videofilters[nb_active_filter].conf = coup;
-        nb_active_filter++;
-		buildActiveFilterList();
-        setSelected(nb_active_filter - 1);
+     
    }
-#endif
+
 }
 /**
         \fn     remove( bool b)
@@ -174,53 +163,25 @@
 */
 void filtermainWindow::remove( bool b)
 {
-#if 0
    /* Get selection if any */
   /* Now that we have the tab, get the selection */
    QListWidgetItem *item=activeList->currentItem();
    if(!item)
    {
-      printf("No selection\n");
+      ADM_warning("No selection\n");
       return;
    }
-    
+     
      int itag=item->type();
-     ADM_assert(itag>ACTIVE_FILTER_BASE);
+     ADM_assert(itag>=ACTIVE_FILTER_BASE);
      itag-=ACTIVE_FILTER_BASE;
-     /* Filter 0 is the decoder ...*/
-      printf("Rank : %d\n",itag); 
-     ADM_assert(itag);
-     /**/
-      if (videofilters[itag].conf)
-            {
-                    delete videofilters[itag].conf;
-                    videofilters[itag].conf = NULL;
-            }
-        // recreate derivated filters
-
-        for (uint32_t i = itag ; i < nb_active_filter-1; i++)
-        {
-                    delete videofilters[i ].filter;
-                    videofilters[i ].filter = filterCreateFromTag(videofilters[i+1].tag,
-                                                    videofilters[i+1].conf,
-                                                    videofilters[i - 1].filter);
-                    videofilters[i ].conf = videofilters[i+1].conf;
-                    videofilters[i ].tag = videofilters[i+1].tag;
-        }
-        
-        /* Delete last filter which is now at last filter -1 */
-            delete videofilters[nb_active_filter - 1].filter;
-            videofilters[nb_active_filter - 1].filter = NULL;
-            nb_active_filter--;
-            buildActiveFilterList ();
-            if(nb_active_filter>1)
-            {
-              if(itag<nb_active_filter-1)
-                  setSelected(itag);
-              else
-                  setSelected(nb_active_filter-1);
-            }
-#endif  
+     ADM_info("Deleting item %d\n",itag);
+     ADM_vf_removeFilterAtIndex(itag);
+     buildActiveFilterList ();
+     if(nb_active_filter)
+     {
+          setSelected(nb_active_filter-1);
+     }
 }
 #if 1
 #define MAKE_BUTTON(button,call) \
@@ -472,12 +433,17 @@
 */
 void filtermainWindow::buildActiveFilterList(void)
 {
-#if 0
-	activeList->clear();
 
-	for (uint32_t i = 1; i < nb_active_filter; i++)
+	activeList->clear();
+    int nb=ADM_vf_getSize();
+	for (uint32_t i = 0; i < nb; i++)
 	{
-		const char *name = filterGetNameFromTag(videofilters[i].tag);
+            uint32_t                instanceTag=ADM_vf_getTag(i);
+            ADM_coreVideoFilter     *instance=ADM_vf_getInstance(i);
+            const char *name= ADM_vf_getDisplayNameFromTag(instanceTag);
+            const char *conf=instance->getConfiguration();
+#if 0            
+		const char *name = instance->;
 		const char *conf = videofilters[i].filter->printConf ();
 		int namelen = strlen (name);
 
@@ -490,12 +456,12 @@
 			while (*conf == ' ' || *conf == ':')
 				++conf;
 		}
-
+#endif
 		QString str = QString("<b>") + name + QString("</b><br>\n<small>") + conf + QString("</small>");
 		QListWidgetItem *item=new QListWidgetItem(str,activeList,ACTIVE_FILTER_BASE+i);
 		activeList->addItem(item);
 	}
-#endif
+
 }
   /**
   */

Modified: branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_filters/Q_seekablePreview.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_filters/Q_seekablePreview.h	2009-11-14 08:25:12 UTC (rev 5493)
+++ branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_filters/Q_seekablePreview.h	2009-11-14 15:23:35 UTC (rev 5494)
@@ -18,7 +18,7 @@
 #include "ui_seekablePreview.h"
 
 #include "ADM_assert.h"
-#include "ADM_videoFilter.h"
+//#include "ADM_videoFilter.h"
 #include "DIA_flyDialog.h"
 #include "../ADM_dialog/DIA_flyPreview.h"
 

Modified: branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_gui/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_gui/CMakeLists.txt	2009-11-14 08:25:12 UTC (rev 5493)
+++ branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_gui/CMakeLists.txt	2009-11-14 15:23:35 UTC (rev 5494)
@@ -6,7 +6,7 @@
 
 SET(${ADM_LIB}_SRCS
 	Q_gui2.cpp  
-        T_preview.cpp  
+        #T_preview.cpp  
         #stubs.cpp
         file_qt4.cpp  gui_none.cpp  ADM_qslider.cpp
 	${${ADM_LIB}_header}  ${${ADM_LIB}_source}  ${${ADM_LIB}_resource})

Modified: branches/avidemux_2.6_branch_mean/avidemux/qt4/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/qt4/CMakeLists.txt	2009-11-14 08:25:12 UTC (rev 5493)
+++ branches/avidemux_2.6_branch_mean/avidemux/qt4/CMakeLists.txt	2009-11-14 15:23:35 UTC (rev 5494)
@@ -80,6 +80,7 @@
 TARGET_LINK_LIBRARIES(avidemux3_qt4 ADM_dialogQt4)
 TARGET_LINK_LIBRARIES(avidemux3_qt4 ADM_guiQt4)
 TARGET_LINK_LIBRARIES(avidemux3_qt4 ADM_filtersQt4)
+TARGET_LINK_LIBRARIES(avidemux3_qt4 ADM_internalVideoFilter6)
 TARGET_LINK_LIBRARIES(avidemux3_qt4 ADM_UIQT4)
 TARGET_LINK_LIBRARIES(avidemux3_qt4 ADM_guiQt4)
 TARGET_LINK_LIBRARIES(avidemux3_qt4 ADM_UI_QT4)

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreImage/src/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreImage/src/CMakeLists.txt	2009-11-14 08:25:12 UTC (rev 5493)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreImage/src/CMakeLists.txt	2009-11-14 15:23:35 UTC (rev 5494)
@@ -1,6 +1,6 @@
 SET(ADM_coreImage_SRCS 
-        ADM_videoFilter.cpp  
-        ADM_videoFilterCache.cpp
+#        ADM_videoFilter.cpp  
+        #ADM_videoFilterCache.cpp
         ADM_image.cpp  
         ADM_imageUtils.cpp
         ADM_imageResizer.cpp
@@ -10,12 +10,12 @@
         ADM_rgb.cpp
         ADM_pp.cpp
         ADM_print.cpp
-        ADM_vidFieldUtil.cpp
-        ADM_vidFields.cpp
-        ADM_vidFieldASM.cpp
-        ADM_vidFieldBlend.cpp
-        ADM_interlaceUtil.cpp
-        DIA_flyDialog.cpp
+        #ADM_vidFieldUtil.cpp
+        #ADM_vidFields.cpp
+        #ADM_vidFieldASM.cpp
+        #ADM_vidFieldBlend.cpp
+#        ADM_interlaceUtil.cpp
+#        DIA_flyDialog.cpp
         ADM_imageSave.cpp
 )
 

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/CMakeLists.txt	2009-11-14 08:25:12 UTC (rev 5493)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/CMakeLists.txt	2009-11-14 15:23:35 UTC (rev 5494)
@@ -1 +1,2 @@
 ADD_SUBDIRECTORY(dummy)
+ADD_SUBDIRECTORY(verticalFlip)



From mean at mail.berlios.de  Sat Nov 14 16:23:40 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sat, 14 Nov 2009 16:23:40 +0100
Subject: [Avidemux-svn-commit] r5495 - in branches/avidemux_2.6_branch_mean:
	avidemux/common/ADM_videoFilter2/src
	avidemux_plugins/ADM_videoFilters6
	avidemux_plugins/ADM_videoFilters6/verticalFlip
Message-ID: <200911141523.nAEFNeap012677@sheep.berlios.de>

Author: mean
Date: 2009-11-14 16:23:40 +0100 (Sat, 14 Nov 2009)
New Revision: 5495

Added:
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoFilter2/src/ADM_videoFilters.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/verticalFlip/
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/verticalFlip/ADM_vidFlipV.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/verticalFlip/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/verticalFlip/verticalFlip.cpp
Log:
[VideoFilter] Add a second dummy video filter + create new API file for video filter

Added: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoFilter2/src/ADM_videoFilters.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoFilter2/src/ADM_videoFilters.cpp	2009-11-14 15:23:35 UTC (rev 5494)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoFilter2/src/ADM_videoFilters.cpp	2009-11-14 15:23:40 UTC (rev 5495)
@@ -0,0 +1,111 @@
+/**
+        \file  ADM_videoFilters.cpp
+        \brief Handle current filter list
+
+
+*/
+
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ ***************************************************************************/
+#include "ADM_default.h"
+#include "ADM_videoFilterApi.h"
+#include "ADM_videoFilters.h"
+#include "ADM_videoFilterBridge.h"
+static ADM_coreVideoFilter *bridge=NULL;
+
+std::vector<ADM_VideoFilterElement> ADM_VideoFilters;
+
+/**
+    \fn ADM_vf_getSize
+    \brief Returns # of active filters
+*/
+uint32_t                ADM_vf_getSize(void)
+{
+    return (uint32_t)ADM_VideoFilters.size();
+}
+/**
+    \fn ADM_vf_getInstance
+    \brief Return filter instance  of rank index
+*/
+ADM_coreVideoFilter     *ADM_vf_getInstance(int index)
+{
+    ADM_assert(index<ADM_vf_getSize());
+    return ADM_VideoFilters[index].instance;
+}
+/**
+    \fn ADM_vf_getTag
+    \brief Return tag of index active filter
+*/
+uint32_t                ADM_vf_getTag(int index)
+{
+    ADM_assert(index<ADM_vf_getSize());
+    return ADM_VideoFilters[index].tag;
+}
+/**
+    \fn getLastVideoFilter
+*/
+static ADM_coreVideoFilter *getLastVideoFilter(void)
+{
+ADM_coreVideoFilter *last=NULL;
+   if(!ADM_vf_getSize())
+    {
+        if(!bridge)
+            bridge=new ADM_videoFilterBridge(0,2*3600*1000*1000LL);
+        last=bridge;
+    }
+    else    
+        last=ADM_VideoFilters[ADM_vf_getSize()-1].instance;
+    return last;
+}
+/**
+        \fn ADM_vf_addFilterFromTag
+        \brief Add a new video filter (identified by tag) at the end of the activate filter list
+*/
+bool                    ADM_vf_addFilterFromTag(uint32_t tag)
+{
+    ADM_info("Creating video filter using tag %"LU" \n",tag);
+    // Fetch the descriptor...
+    
+    ADM_coreVideoFilter *last=getLastVideoFilter();
+ 
+    ADM_coreVideoFilter *nw=ADM_vf_createFromTag(tag,last,NULL);
+    if(nw->configure()==false)
+    {
+        delete nw;
+        return false;
+    }
+    ADM_VideoFilterElement e;
+    e.tag=tag;
+    e.instance=nw;
+    ADM_VideoFilters.push_back(e);
+    return true;
+}
+/**
+    \fn ADM_vf_removeFilterAtIndex
+    
+*/
+bool ADM_vf_removeFilterAtIndex(int index)
+{
+    ADM_info("Deleting video filter at index %d\n",index);
+    //
+    ADM_assert(index<ADM_vf_getSize());
+    if(index==ADM_vf_getSize()-1)
+    {
+        // last filter, destroy..
+        ADM_VideoFilterElement *e=&(ADM_VideoFilters[index]);
+        delete e->instance;
+        ADM_VideoFilters.clear();
+        ADM_info("Deleting last filter\n");
+        return true;
+    }
+    // Else we have a==b==c => a==c==d ...
+    // So we need to create an new string from c to the end...
+    return true;
+}
+// EOF
\ No newline at end of file

Added: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/verticalFlip/ADM_vidFlipV.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/verticalFlip/ADM_vidFlipV.cpp	2009-11-14 15:23:35 UTC (rev 5494)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/verticalFlip/ADM_vidFlipV.cpp	2009-11-14 15:23:40 UTC (rev 5495)
@@ -0,0 +1,130 @@
+/***************************************************************************
+                          ADM_vidFlipV.cpp  -  description
+                             -------------------
+    begin                : Wed Nov 6 2002
+    copyright            : (C) 2002 by mean
+    email                : fixounet at free.fr
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+
+#include "ADM_default.h"
+#include "ADM_videoFilterDynamic.h"
+//********** Class Definition ************
+ class ADMVideoFlipV : public AVDMGenericVideoStream 
+ {
+
+protected:
+	AVDMGenericVideoStream *_in;
+	virtual char *printConf(void);
+
+public:
+
+	ADMVideoFlipV(AVDMGenericVideoStream *in, CONFcouple *setup);
+	virtual ~ADMVideoFlipV();
+	virtual uint8_t getFrameNumberNoAlloc(uint32_t frame, uint32_t *len,
+			ADMImage *data, uint32_t *flags);
+	virtual uint8_t configure(AVDMGenericVideoStream *instream) 
+	{
+		UNUSED_ARG(instream);
+		return 1;
+	};
+};
+
+//********** Register chunk ************
+static FILTER_PARAM flipParam={0,{""}};
+
+
+VF_DEFINE_FILTER(ADMVideoFlipV,flipParam,
+				flipV,
+				QT_TR_NOOP("Vertical flip"),
+				1,
+				VF_TRANSFORM,
+				QT_TR_NOOP("Vertically flip the picture."));
+//************************************
+char *ADMVideoFlipV::printConf( void )
+{
+ 	ADM_FILTER_DECLARE_CONF(" V-Flip");
+        
+}
+
+ADMVideoFlipV::ADMVideoFlipV(  AVDMGenericVideoStream *in,CONFcouple *setup)
+{
+    UNUSED_ARG(setup);
+ 	_in=in;		
+   	memcpy(&_info,_in->getInfo(),sizeof(_info)); 	
+  	_info.encoding=1;	
+	_uncompressed=new ADMImage(_in->getInfo()->width,_in->getInfo()->height);
+	ADM_assert(_uncompressed);    	  	
+}
+ADMVideoFlipV::~ADMVideoFlipV()
+{
+ 	delete  _uncompressed;	
+	_uncompressed=NULL;
+  
+}
+uint8_t ADMVideoFlipV::getFrameNumberNoAlloc(uint32_t frame,
+				uint32_t *len,
+   				ADMImage *data,
+				uint32_t *flags)
+{
+
+	if (frame>= _info.nb_frames)
+		return 0;
+	// read uncompressed frame
+	if (!_in->getFrameNumberNoAlloc(frame, len, _uncompressed, flags))
+		return 0;
+
+	uint8_t *in, *out;
+	uint32_t stride=_info.width;
+	uint32_t h=_info.height;
+	uint32_t page, qpage;
+
+	page=stride*h;
+	qpage=page>>2;
+
+	in=YPLANE(_uncompressed);
+	out=YPLANE(data)+(h-1)*stride;
+	// flip y
+	for (uint32_t y=h; y>0; y--) 
+	{
+		memcpy(out,in,stride);
+		in+=stride;
+		out-=stride;
+	}
+	// Flip U & V			         
+	stride>>=1;
+	in=UPLANE(_uncompressed);
+	out=UPLANE(data)+qpage-stride;
+	// flip u
+	for (uint32_t y=h>>1; y>0; y--) 
+	{
+		memcpy(out,in,stride);
+		in+=stride;
+		out-=stride;
+	}
+	in=VPLANE(_uncompressed);
+	out=VPLANE(data)+qpage-stride;
+
+	// flip u
+	for (uint32_t y=h>>1; y>0; y--)
+	{
+		memcpy(out,in,stride);
+		in+=stride;
+		out-=stride;
+	}
+	data->copyInfo(_uncompressed);
+	return 1;
+}
+//EOF
+
+
+
+

Added: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/verticalFlip/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/verticalFlip/CMakeLists.txt	2009-11-14 15:23:35 UTC (rev 5494)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/verticalFlip/CMakeLists.txt	2009-11-14 15:23:40 UTC (rev 5495)
@@ -0,0 +1,9 @@
+INCLUDE(vf_plugin)
+
+
+SET(ADM_vf_vflip_SRCS verticalFlip.cpp)
+
+ADD_LIBRARY(ADM_vf_vflip SHARED ${ADM_vf_vflip_SRCS})
+
+INIT_VIDEO_FILTER(ADM_vf_vflip)
+INSTALL_VIDEO_FILTER(ADM_vf_vflip)

Added: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/verticalFlip/verticalFlip.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/verticalFlip/verticalFlip.cpp	2009-11-14 15:23:35 UTC (rev 5494)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/verticalFlip/verticalFlip.cpp	2009-11-14 15:23:40 UTC (rev 5495)
@@ -0,0 +1,95 @@
+/** *************************************************************************
+                    \fn       verticalFlipFilter.cpp  
+                    \brief simplest of all video filters, it does nothing
+
+    copyright            : (C) 2009 by mean
+
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+
+#include "ADM_default.h"
+#include "ADM_coreVideoFilterInternal.h"
+
+/**
+    \class verticalFlipFilter
+*/
+class verticalFlipFilter : public  ADM_coreVideoFilter
+{
+public:
+                    verticalFlipFilter(ADM_coreVideoFilter *previous,CONFcouple *conf);
+                    ~verticalFlipFilter();
+
+       virtual const char   *getConfiguration(void);                   /// Return  current configuration as a human readable string
+       virtual bool         getFrame(uint32_t frame,ADMImage *image);    /// Return the next image
+	 //  virtual FilterInfo  *getInfo(void);                             /// Return picture parameters after this filter
+	   virtual bool         getCoupledConf(CONFcouple **couples) ;   /// Return the current filter configuration
+       virtual bool         configure(void) {return true;}             /// Start graphical user interface
+};
+
+// Add the hook to make it valid plugin
+DECLARE_VIDEO_FILTER(   verticalFlipFilter,   // Class
+                        1,0,0,              // Version
+                        ADM_UI_ALL,         // UI
+                        VF_TRANSFORM,            // Category
+                        "vflip",            // internal name (must be uniq!)
+                        "Vertical Flip",            // Display name
+                        "Vertically flip the image." // Description
+                    );
+
+// Now implements the interesting parts
+/**
+    \fn verticalFlipFilter
+    \brief constructor
+*/
+verticalFlipFilter::verticalFlipFilter(  ADM_coreVideoFilter *in,CONFcouple *setup) : ADM_coreVideoFilter(in,setup)
+{
+UNUSED_ARG(setup);
+
+    // By default the info field contains the output of previous filter
+    // Tweak it here if you change fps, duration, width,...
+}
+/**
+    \fn verticalFlipFilter
+    \brief destructor
+*/
+verticalFlipFilter::~verticalFlipFilter()
+{
+		
+}
+/**
+    \fn getFrame
+    \brief Get a processed frame
+*/
+bool verticalFlipFilter::getFrame(uint32_t frame,ADMImage *image)
+{
+    // since we do nothing, just get the output of previous filter
+    return previousFilter->getFrame(frame,image);
+}
+/**
+    \fn getCoupledConf
+    \brief Return our current configuration as couple name=value
+*/
+bool         verticalFlipFilter::getCoupledConf(CONFcouple **couples)
+{
+    *couples=new CONFcouple(0); // Even if we dont have configuration we must allocate one 
+    return true;
+}
+/**
+    \fn getConfiguration
+    \brief Return current setting as a string
+*/
+const char *verticalFlipFilter::getConfiguration(void)
+{
+    
+    return "Vertical flip.";
+}
+// Normally not needed :virtual FilterInfo  *getInfo(void)
+//EOF



From mean at mail.berlios.de  Sat Nov 14 16:23:42 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sat, 14 Nov 2009 16:23:42 +0100
Subject: [Avidemux-svn-commit] r5496 -
	branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_gui
Message-ID: <200911141523.nAEFNgTf012691@sheep.berlios.de>

Author: mean
Date: 2009-11-14 16:23:42 +0100 (Sat, 14 Nov 2009)
New Revision: 5496

Modified:
   branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_gui/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_gui/T_preview.cpp
Log:
[Qt4] Re-enable part of Qt4

Modified: branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_gui/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_gui/CMakeLists.txt	2009-11-14 15:23:40 UTC (rev 5495)
+++ branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_gui/CMakeLists.txt	2009-11-14 15:23:42 UTC (rev 5496)
@@ -6,7 +6,7 @@
 
 SET(${ADM_LIB}_SRCS
 	Q_gui2.cpp  
-        #T_preview.cpp  
+        T_preview.cpp  
         #stubs.cpp
         file_qt4.cpp  gui_none.cpp  ADM_qslider.cpp
 	${${ADM_LIB}_header}  ${${ADM_LIB}_source}  ${${ADM_LIB}_resource})

Modified: branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_gui/T_preview.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_gui/T_preview.cpp	2009-11-14 15:23:40 UTC (rev 5495)
+++ branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_gui/T_preview.cpp	2009-11-14 15:23:42 UTC (rev 5496)
@@ -46,12 +46,14 @@
 
 uint8_t	DIA_filterPreview(const char *captionText, AVDMGenericVideoStream *videoStream, uint32_t frame)
 {
+#if 0
 	ADM_assert(frame <= videoStream->getInfo()->nb_frames);
 
 	printf("** DIA_filterPreview %i **\n", frame);
 	Ui_seekablePreviewWindow previewDialog(NULL,videoStream, frame);
 
 	previewDialog.exec();
+#endif
 }
 
 //****************************************************************************************************



From mean at mail.berlios.de  Sat Nov 14 16:23:44 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sat, 14 Nov 2009 16:23:44 +0100
Subject: [Avidemux-svn-commit] r5497 - in
	branches/avidemux_2.6_branch_mean/avidemux:
	common/ADM_videoFilter2/include common/ADM_videoFilter2/src
	qt4/ADM_userInterfaces/ADM_filters
Message-ID: <200911141523.nAEFNijc012701@sheep.berlios.de>

Author: mean
Date: 2009-11-14 16:23:44 +0100 (Sat, 14 Nov 2009)
New Revision: 5497

Modified:
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoFilter2/include/ADM_videoFilters.h
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoFilter2/src/ADM_pluginLoad.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoFilter2/src/ADM_videoFilters.cpp
   branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_filters/Q_mainfilter.cpp
Log:
[VideoFilter] Basic video filter list handling

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoFilter2/include/ADM_videoFilters.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoFilter2/include/ADM_videoFilters.h	2009-11-14 15:23:42 UTC (rev 5496)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoFilter2/include/ADM_videoFilters.h	2009-11-14 15:23:44 UTC (rev 5497)
@@ -35,4 +35,7 @@
 
 bool                    ADM_vf_addFilterFromTag(uint32_t tag);
 bool                    ADM_vf_removeFilterAtIndex(int index);
+bool                    ADM_vf_configureFilterAtIndex(int index);
+bool                    ADM_vf_moveFilterDown(int index);
+bool                    ADM_vf_moveFilterUp(int index);
 #endif
\ No newline at end of file

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoFilter2/src/ADM_pluginLoad.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoFilter2/src/ADM_pluginLoad.cpp	2009-11-14 15:23:42 UTC (rev 5496)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoFilter2/src/ADM_pluginLoad.cpp	2009-11-14 15:23:44 UTC (rev 5497)
@@ -125,7 +125,7 @@
     
     }else   
     {
-        plugin->tag=ADM_videoFilterPluginsList[info->category].size();
+        plugin->tag=ADM_videoFilterPluginsList[info->category].size()+info->category*100;
         ADM_videoFilterPluginsList[info->category].push_back(plugin);
     }
 

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoFilter2/src/ADM_videoFilters.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoFilter2/src/ADM_videoFilters.cpp	2009-11-14 15:23:42 UTC (rev 5496)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoFilter2/src/ADM_videoFilters.cpp	2009-11-14 15:23:44 UTC (rev 5497)
@@ -87,6 +87,37 @@
     return true;
 }
 /**
+    \fn ADM_vf_recreateChain
+    \brief Rebuild the whole filterchain
+*/
+static bool ADM_vf_recreateChain(void)
+{
+    ADM_assert(bridge);
+    ADM_coreVideoFilter *f=bridge;
+    
+    std::vector<ADM_coreVideoFilter *> bin;
+    for(int i=0;i<ADM_VideoFilters.size();i++)
+    {
+            // Get configuration
+            CONFcouple *c;
+            ADM_coreVideoFilter *old=ADM_VideoFilters[i].instance;
+            uint32_t tag=ADM_VideoFilters[i].tag;
+            old->getCoupledConf(&c);
+            ADM_coreVideoFilter *nw=ADM_vf_createFromTag(tag,f,c);
+            ADM_VideoFilters[i].instance=nw;
+            bin.push_back(old);
+            if(c) delete c;
+            f=nw;
+    }
+    // Now delete bin
+    for(int i=0;i<bin.size();i++)
+    {
+        delete bin[i];
+    }
+    bin.clear();
+    return true;
+}
+/**
     \fn ADM_vf_removeFilterAtIndex
     
 */
@@ -95,17 +126,60 @@
     ADM_info("Deleting video filter at index %d\n",index);
     //
     ADM_assert(index<ADM_vf_getSize());
-    if(index==ADM_vf_getSize()-1)
+    // last filter, destroy..
+    ADM_VideoFilterElement *e=&(ADM_VideoFilters[index]);
+    delete e->instance;
+    ADM_VideoFilters.erase(ADM_VideoFilters.begin() + index);        
+    return ADM_vf_recreateChain();
+}
+/**
+    \fn ADM_vf_configureFilterAtIndex
+*/
+bool ADM_vf_configureFilterAtIndex(int index)
+{
+    ADM_info("Configuring filter at index %d\n",index);
+    //
+    ADM_assert(index<ADM_vf_getSize());
+    ADM_VideoFilterElement *e=&(ADM_VideoFilters[index]);
+    if(e->instance->configure())
     {
-        // last filter, destroy..
-        ADM_VideoFilterElement *e=&(ADM_VideoFilters[index]);
-        delete e->instance;
-        ADM_VideoFilters.clear();
-        ADM_info("Deleting last filter\n");
-        return true;
+        if(e->instance->configure())
+        {
+            return ADM_vf_recreateChain();
+        }
     }
-    // Else we have a==b==c => a==c==d ...
-    // So we need to create an new string from c to the end...
     return true;
 }
+
+/**
+    \fn ADM_vf_moveFilterUp
+*/
+bool ADM_vf_moveFilterUp(int index)
+{
+    ADM_info("Moving up filter at index %d\n",index);
+    //
+    ADM_assert(index);
+    uint32_t top=index-1;
+    ADM_VideoFilterElement scratch=ADM_VideoFilters[top];
+
+    ADM_VideoFilters[top]=ADM_VideoFilters[top+1];
+    ADM_VideoFilters[top+1]=scratch;
+    return ADM_vf_recreateChain();
+}
+
+/**
+    \fn ADM_vf_moveFilterDown
+*/
+bool ADM_vf_moveFilterDown(int index)
+{
+    ADM_info("Moving down filter at index %d\n",index);
+    //
+    ADM_assert(index+1<ADM_VideoFilters.size());
+    uint32_t top=index;
+    ADM_VideoFilterElement scratch=ADM_VideoFilters[top];
+
+    ADM_VideoFilters[top]=ADM_VideoFilters[top+1];
+    ADM_VideoFilters[top+1]=scratch;
+    return ADM_vf_recreateChain();
+}
 // EOF
\ No newline at end of file

Modified: branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_filters/Q_mainfilter.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_filters/Q_mainfilter.cpp	2009-11-14 15:23:42 UTC (rev 5496)
+++ branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_filters/Q_mainfilter.cpp	2009-11-14 15:23:44 UTC (rev 5497)
@@ -148,7 +148,7 @@
      tag=index; //filterCategories[family][index]->tag;
      ADM_info("Tag : %d->family=%d, index=%d\n",itag,family,tag);
 
-     if(true==ADM_vf_addFilterFromTag(tag))
+     if(true==ADM_vf_addFilterFromTag(itag))
         {
             buildActiveFilterList();
             setSelected(nb_active_filter-1);
@@ -206,33 +206,25 @@
 */
 void filtermainWindow::configure( bool b)
 {
-#if 0
    /* Get selection if any */
   /* Now that we have the tab, get the selection */
    QListWidgetItem *item=activeList->currentItem();
    if(!item)
    {
-      printf("No selection\n");
+      ADM_warning("No selection\n");
       return;
    }
     
      int itag=item->type();
-     ADM_assert(itag>ACTIVE_FILTER_BASE);
+     ADM_assert(itag>=ACTIVE_FILTER_BASE);
      itag-=ACTIVE_FILTER_BASE;
      /* Filter 0 is the decoder ...*/
-      printf("Rank : %d\n",itag); 
-     ADM_assert(itag);
+      ADM_info("Rank : %d\n",itag); 
+   //   ADM_assert(itag);
      /**/
-     
-        if(!videofilters[itag].filter->configure (videofilters[itag - 1].filter)) return;
-        /* Recreate chain if needed , config has changed */
-        CONFcouple *couple;
-        videofilters[itag].filter->getCoupledConf (&couple);
-        videofilters[itag].conf = couple;
-        getFirstVideoFilter ();
+        ADM_vf_configureFilterAtIndex(itag);
         buildActiveFilterList ();
 		setSelected(itag);
-#endif
 }
 /**
         \fn     up( bool b)
@@ -240,32 +232,22 @@
 */
 void filtermainWindow::up( bool b)
 {
-#if 0
    QListWidgetItem *item=activeList->currentItem();
    if(!item)
    {
-      printf("No selection\n");
+      ADM_warning("No selection\n");
       return;
    }
     
      int itag=item->type();
-     ADM_assert(itag>ACTIVE_FILTER_BASE);
+     ADM_assert(itag>=ACTIVE_FILTER_BASE);
      itag-=ACTIVE_FILTER_BASE;
-     /* Filter 0 is the decoder ...*/
-      printf("Rank : %d\n",itag); 
-     ADM_assert(itag);
+      ADM_info("Rank : %d\n",itag); 
      
-     if (itag < 2) return;
-        // swap action parameter & action parameter -1
-        FILTER tmp;
-        memcpy (&tmp, &videofilters[itag - 1], sizeof (FILTER));
-        memcpy (&videofilters[itag - 1],
-            &videofilters[itag], sizeof (FILTER));
-        memcpy (&videofilters[itag], &tmp, sizeof (FILTER));
-        getFirstVideoFilter ();
+        if (!itag ) return;
+        ADM_vf_moveFilterUp(itag);
         buildActiveFilterList ();
         setSelected(itag-1);
-#endif
 }
 /**
         \fn     down( bool b)
@@ -273,34 +255,26 @@
 */
 void filtermainWindow::down( bool b)
 {
-#if 0
    QListWidgetItem *item=activeList->currentItem();
    if(!item)
    {
-      printf("No selection\n");
+      ADM_warning("No selection\n");
       return;
    }
     
      int itag=item->type();
-     ADM_assert(itag>ACTIVE_FILTER_BASE);
+     ADM_assert(itag>=ACTIVE_FILTER_BASE);
      itag-=ACTIVE_FILTER_BASE;
      /* Filter 0 is the decoder ...*/
-      printf("Rank : %d\n",itag); 
-     ADM_assert(itag);
+      ADM_info("Rank : %d\n",itag); 
+     //ADM_assert(itag);
      
-    if (((int) itag < (int) (nb_active_filter - 1)) && (itag))
+    if (((int) itag < (int) (nb_active_filter - 1)))
         {
-            // swap action parameter & action parameter -1
-            FILTER tmp;
-            memcpy (&tmp, &videofilters[itag + 1], sizeof (FILTER));
-            memcpy (&videofilters[itag + 1],
-                        &videofilters[itag], sizeof (FILTER));
-            memcpy (&videofilters[itag], &tmp, sizeof (FILTER));
-            getFirstVideoFilter ();
+            ADM_vf_moveFilterDown(itag);
             buildActiveFilterList ();
             setSelected(itag+1);
         }
-#endif
 }
 /**
         \fn     filtermainWindow::filterFamilyClick( QListWidgetItem  *item)
@@ -383,11 +357,11 @@
    }
     
      int itag=item->type();
-     ADM_assert(itag>ACTIVE_FILTER_BASE);
+     ADM_assert(itag>=ACTIVE_FILTER_BASE);
      itag-=ACTIVE_FILTER_BASE;
      /* Filter 0 is the decoder ...*/
-      printf("Rank : %d\n",itag); 
-      ADM_assert(itag);
+      ADM_info("Rank : %d\n",itag); 
+      //ADM_assert(itag);
      
         AVDMGenericVideoStream *replace;
         CONFcouple *conf;
@@ -442,6 +416,7 @@
             ADM_coreVideoFilter     *instance=ADM_vf_getInstance(i);
             const char *name= ADM_vf_getDisplayNameFromTag(instanceTag);
             const char *conf=instance->getConfiguration();
+            printf("%d %s\n",i,name);
 #if 0            
 		const char *name = instance->;
 		const char *conf = videofilters[i].filter->printConf ();



From mean at mail.berlios.de  Sat Nov 14 16:23:45 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sat, 14 Nov 2009 16:23:45 +0100
Subject: [Avidemux-svn-commit] r5498 -
	branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoFilter2/src
Message-ID: <200911141523.nAEFNjPC012712@sheep.berlios.de>

Author: mean
Date: 2009-11-14 16:23:45 +0100 (Sat, 14 Nov 2009)
New Revision: 5498

Modified:
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoFilter2/src/ADM_filterChain.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoFilter2/src/ADM_videoFilters.cpp
Log:
[VideoFilter] Map filterchain to our new video filter engine

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoFilter2/src/ADM_filterChain.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoFilter2/src/ADM_filterChain.cpp	2009-11-14 15:23:44 UTC (rev 5497)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoFilter2/src/ADM_filterChain.cpp	2009-11-14 15:23:45 UTC (rev 5498)
@@ -23,33 +23,4 @@
 
 
 
-/**
-    \fn createVideoFilterChain
-    \brief Create a filter chain
-*/
-ADM_videoFilterChain *createVideoFilterChain(uint64_t startAt,uint64_t endAt)
-{
-    ADM_videoFilterChain *chain=new ADM_videoFilterChain;
-    // 1- Add bridge always # 1
-    ADM_videoFilterBridge *bridge=new ADM_videoFilterBridge(startAt,endAt);
-    chain->push_back(bridge);
-    return chain;
-}
-/**
-        \fn destroyVideoFilterChain
-        \brief Destroy a filter chain
-*/
-bool                 destroyVideoFilterChain(ADM_videoFilterChain *chain)
-{
-    ADM_assert(chain->size());
-    for(int i=0;i<chain->size();i++)
-    {
-        ADM_coreVideoFilter *filter=(*chain)[i];
-        delete filter;
-        (*chain)[i]=NULL;
-    }
-    chain->clear();
-    return true;
-}
-
 // EOF

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoFilter2/src/ADM_videoFilters.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoFilter2/src/ADM_videoFilters.cpp	2009-11-14 15:23:44 UTC (rev 5497)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoFilter2/src/ADM_videoFilters.cpp	2009-11-14 15:23:45 UTC (rev 5498)
@@ -17,6 +17,7 @@
 #include "ADM_videoFilterApi.h"
 #include "ADM_videoFilters.h"
 #include "ADM_videoFilterBridge.h"
+#include "ADM_filterChain.h"
 static ADM_coreVideoFilter *bridge=NULL;
 
 std::vector<ADM_VideoFilterElement> ADM_VideoFilters;
@@ -182,4 +183,52 @@
     ADM_VideoFilters[top+1]=scratch;
     return ADM_vf_recreateChain();
 }
+
+
+
+/**
+    \fn createVideoFilterChain
+    \brief Create a filter chain
+*/
+ADM_videoFilterChain *createVideoFilterChain(uint64_t startAt,uint64_t endAt)
+{
+    ADM_videoFilterChain *chain=new ADM_videoFilterChain;
+    // 1- Add bridge always # 1
+    ADM_videoFilterBridge *bridge=new ADM_videoFilterBridge(startAt,endAt);
+    chain->push_back(bridge);
+    ADM_coreVideoFilter *f=bridge;
+    // Now create a clone of the videoFilterChain we have here
+    int nb=ADM_VideoFilters.size();
+    for(int i=0;i<nb;i++)
+    {
+            // Get configuration
+            CONFcouple *c;
+            ADM_coreVideoFilter *old=ADM_VideoFilters[i].instance;
+            uint32_t tag=ADM_VideoFilters[i].tag;
+            old->getCoupledConf(&c);
+
+            ADM_coreVideoFilter *nw=ADM_vf_createFromTag(tag,f,c);
+            if(c) delete c;
+            f=nw;
+            chain->push_back(nw);
+    }
+    return chain;
+}
+/**
+        \fn destroyVideoFilterChain
+        \brief Destroy a filter chain
+*/
+bool                 destroyVideoFilterChain(ADM_videoFilterChain *chain)
+{
+    ADM_assert(chain->size());
+    int nb=chain->size();
+    for(int i=0;i<nb;i++)
+    {
+        ADM_coreVideoFilter *filter=(*chain)[i];
+        delete filter;
+        (*chain)[i]=NULL;
+    }
+    chain->clear();
+    return true;
+}
 // EOF
\ No newline at end of file



From mean at mail.berlios.de  Sat Nov 14 16:23:47 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sat, 14 Nov 2009 16:23:47 +0100
Subject: [Avidemux-svn-commit] r5499 -
	branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/verticalFlip
Message-ID: <200911141523.nAEFNl4m012722@sheep.berlios.de>

Author: mean
Date: 2009-11-14 16:23:46 +0100 (Sat, 14 Nov 2009)
New Revision: 5499

Modified:
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/verticalFlip/verticalFlip.cpp
Log:
[VFlip] Do something actually

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/verticalFlip/verticalFlip.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/verticalFlip/verticalFlip.cpp	2009-11-14 15:23:45 UTC (rev 5498)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/verticalFlip/verticalFlip.cpp	2009-11-14 15:23:46 UTC (rev 5499)
@@ -64,6 +64,20 @@
 {
 		
 }
+
+static void flipMe(uint8_t *data, uint32_t w,uint32_t h)
+{
+    uint8_t scratch[w];
+    int count=h>>1;
+    for(int i=0;i<count;i++)
+    {
+        uint8_t *top=data+w*i;
+        uint8_t *bottom=data+(h-i-1)*w;
+        memcpy(scratch, top,w);
+        memcpy(top, bottom,w);
+        memcpy(bottom,scratch,w);
+    }
+}
 /**
     \fn getFrame
     \brief Get a processed frame
@@ -71,7 +85,18 @@
 bool verticalFlipFilter::getFrame(uint32_t frame,ADMImage *image)
 {
     // since we do nothing, just get the output of previous filter
-    return previousFilter->getFrame(frame,image);
+    if(false==previousFilter->getFrame(frame,image))
+    {
+        ADM_warning("Vertical flip : Cannot get frame\n");
+        return false;
+    }
+    // do in place flip
+    int w=info.width;
+    int h=info.height;
+    flipMe(YPLANE(image),w,h);
+    flipMe(UPLANE(image),w>>1,h>>1);
+    flipMe(VPLANE(image),w>>1,h>>1);
+    return true;
 }
 /**
     \fn getCoupledConf



From mean at mail.berlios.de  Sat Nov 14 16:23:48 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sat, 14 Nov 2009 16:23:48 +0100
Subject: [Avidemux-svn-commit] r5500 -
	branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_UIs/src
Message-ID: <200911141523.nAEFNmsR012732@sheep.berlios.de>

Author: mean
Date: 2009-11-14 16:23:48 +0100 (Sat, 14 Nov 2009)
New Revision: 5500

Modified:
   branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_UIs/src/CMakeLists.txt
Log:
[Gtk] Make it compile

Modified: branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_UIs/src/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_UIs/src/CMakeLists.txt	2009-11-14 15:23:46 UTC (rev 5499)
+++ branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_UIs/src/CMakeLists.txt	2009-11-14 15:23:48 UTC (rev 5500)
@@ -22,7 +22,7 @@
         choice.cpp       
         toolkit_dialog.cpp
         toolkit.cpp
-        DIA_flyDialogGtk.cpp
+#        DIA_flyDialogGtk.cpp
 )
 INCLUDE_DIRECTORIES(${CMAKE_CURRENT_SOURCE_DIR}/../include)
 ADD_LIBRARY(${ADM_LIB} SHARED ${${ADM_LIB}_SRCS})



From mean at mail.berlios.de  Sat Nov 14 16:39:02 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sat, 14 Nov 2009 16:39:02 +0100
Subject: [Avidemux-svn-commit] r5501 -
	branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_gui
Message-ID: <200911141539.nAEFd2ds013728@sheep.berlios.de>

Author: mean
Date: 2009-11-14 16:39:02 +0100 (Sat, 14 Nov 2009)
New Revision: 5501

Modified:
   branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_gui/T_preview.cpp
Log:
[Win32] Fix build

Modified: branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_gui/T_preview.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_gui/T_preview.cpp	2009-11-14 15:23:48 UTC (rev 5500)
+++ branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_gui/T_preview.cpp	2009-11-14 15:39:02 UTC (rev 5501)
@@ -27,7 +27,7 @@
 #endif
 
 #include "T_preview.h"
-#include "Q_seekablePreview.h"
+//#include "Q_seekablePreview.h"
 #include "../ADM_render/GUI_render.h"
 #include "../ADM_render/GUI_accelRender.h"
     



From mean at mail.berlios.de  Sat Nov 14 18:40:44 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sat, 14 Nov 2009 18:40:44 +0100
Subject: [Avidemux-svn-commit] r5502 -
	branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264
Message-ID: <200911141740.nAEHeiDn025896@sheep.berlios.de>

Author: mean
Date: 2009-11-14 18:40:44 +0100 (Sat, 14 Nov 2009)
New Revision: 5502

Modified:
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/x264Options.cpp
Log:
[x264] Fix locales for x264 settings in xml, patch from KrissN

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/x264Options.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/x264Options.cpp	2009-11-14 15:39:02 UTC (rev 5501)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/x264Options.cpp	2009-11-14 17:40:44 UTC (rev 5502)
@@ -22,6 +22,7 @@
  ***************************************************************************/
 
 #include <math.h>
+#include <locale.h>
 #include <libxml/parser.h>
 #include <libxml/xmlschemas.h>
 
@@ -1350,6 +1351,8 @@
 
 void x264Options::parseOptions(xmlNode *node)
 {
+    char *curLocale = setlocale(LC_NUMERIC, "C");
+
 	for (xmlNode *xmlChild = node->children; xmlChild; xmlChild = xmlChild->next)
 	{
 		if (xmlChild->type == XML_ELEMENT_NODE)
@@ -1461,6 +1464,8 @@
 			xmlFree(content);
 		}
 	}
+
+    setlocale(LC_NUMERIC, curLocale);
 }
 
 void x264Options::parseVuiOptions(xmlNode *node)
@@ -1800,7 +1805,7 @@
 		else if (strcmp((char*)xmlChild->name, "quantiser") == 0)
 			option.setQuantiser(atoi(content));
 		else if (strcmp((char*)xmlChild->name, "bitrateFactor") == 0)
-			option.setBitrateFactor((int)floor(atoi(content) * 100 + .5));
+			option.setBitrateFactor((int)floor(atof(content) * 100 + .5));
 
 		xmlFree(content);
 	}



From mean at mail.berlios.de  Sun Nov 15 12:08:51 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sun, 15 Nov 2009 12:08:51 +0100
Subject: [Avidemux-svn-commit] r5503 - in branches/avidemux_2.6_branch_mean:
	. avidemux/common avidemux/common/ADM_script
	avidemux_core/ADM_coreDemuxer/include cmake foreignBuilds
Message-ID: <200911151108.nAFB8pDl006309@sheep.berlios.de>

Author: mean
Date: 2009-11-15 12:08:50 +0100 (Sun, 15 Nov 2009)
New Revision: 5503

Modified:
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script/ADM_JSFunctions.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script/ADM_JSFunctionsNonRegFactory.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/gui_action.cpp
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreDemuxer/include/avifmt.h
   branches/avidemux_2.6_branch_mean/bootStrapCrossMingw.sh
   branches/avidemux_2.6_branch_mean/cmake/admCrossCompile.cmake
   branches/avidemux_2.6_branch_mean/foreignBuilds/cross_mingw_core
   branches/avidemux_2.6_branch_mean/foreignBuilds/cross_mingw_plugins
   branches/avidemux_2.6_branch_mean/foreignBuilds/cross_mingw_qt4
Log:
[CrossMingw] Some tweak to support mingw-w32 and later mingw-w64

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script/ADM_JSFunctions.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script/ADM_JSFunctions.cpp	2009-11-14 17:40:44 UTC (rev 5502)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script/ADM_JSFunctions.cpp	2009-11-15 11:08:50 UTC (rev 5503)
@@ -9,6 +9,7 @@
 // Copyright: See COPYING file that comes with this distribution
 //
 //
+#include <string>
 #include "ADM_default.h"
 #include <sys/types.h>
 #include <sys/stat.h>
@@ -25,7 +26,6 @@
 #include <limits.h>
 #include <math.h>
 #include <vector>
-#include <string>
 #include "ADM_JSAvidemux.h"
 #include "ADM_JSGlobal.h"
 #include "ADM_default.h"

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script/ADM_JSFunctionsNonRegFactory.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script/ADM_JSFunctionsNonRegFactory.cpp	2009-11-14 17:40:44 UTC (rev 5502)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script/ADM_JSFunctionsNonRegFactory.cpp	2009-11-15 11:08:50 UTC (rev 5503)
@@ -9,6 +9,7 @@
 // Copyright: See COPYING file that comes with this distribution
 //
 //
+#include <string>
 #include "ADM_default.h"
 #include <sys/types.h>
 #include <sys/stat.h>
@@ -25,7 +26,6 @@
 #include <limits.h>
 #include <math.h>
 #include <vector>
-#include <string>
 #include "ADM_JSAvidemux.h"
 #include "ADM_JSGlobal.h"
 #include "ADM_default.h"

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/gui_action.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/gui_action.cpp	2009-11-14 17:40:44 UTC (rev 5502)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/gui_action.cpp	2009-11-15 11:08:50 UTC (rev 5503)
@@ -1,3 +1,4 @@
+#include <iterator>
 #include "ADM_default.h"
 #include <strings.h>
 
@@ -6,7 +7,6 @@
 #include <utility>
 using std::pair;
 using std::make_pair;
-#include <iterator>
 using std::back_inserter;
 #include <algorithm>
 using std::transform;

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreDemuxer/include/avifmt.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreDemuxer/include/avifmt.h	2009-11-14 17:40:44 UTC (rev 5502)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreDemuxer/include/avifmt.h	2009-11-15 11:08:50 UTC (rev 5503)
@@ -12,7 +12,7 @@
 
 #ifndef NOAVIFMT
 
-#if !defined(__WINE_WINDEF_H) && !defined(_WINDEF_H)
+#if !defined(__WINE_WINDEF_H) && !defined(_WINDEF_H) && !defined(_WINDEF_)
 #define LOBYTE(w)              ((uint8_t)(uint16_t)(w))
 #define HIBYTE(w)              ((uint8_t)((uint16_t)(w) >> 8))
 

Modified: branches/avidemux_2.6_branch_mean/bootStrapCrossMingw.sh
===================================================================
--- branches/avidemux_2.6_branch_mean/bootStrapCrossMingw.sh	2009-11-14 17:40:44 UTC (rev 5502)
+++ branches/avidemux_2.6_branch_mean/bootStrapCrossMingw.sh	2009-11-15 11:08:50 UTC (rev 5503)
@@ -1,6 +1,6 @@
 #!/bin/bash
 # ** Put your config here **
-export PREFIX=i586-mingw32msvc
+export CROSS_PREFIX=i586-mingw32msvc
 export SDLDIR=/mingw
 export MINGW=/mingw
 export QT_HOME=/mingw/Qt/4.5.2

Modified: branches/avidemux_2.6_branch_mean/cmake/admCrossCompile.cmake
===================================================================
--- branches/avidemux_2.6_branch_mean/cmake/admCrossCompile.cmake	2009-11-14 17:40:44 UTC (rev 5502)
+++ branches/avidemux_2.6_branch_mean/cmake/admCrossCompile.cmake	2009-11-15 11:08:50 UTC (rev 5503)
@@ -3,12 +3,12 @@
         MESSAGE(STATUS " ** Win32 Cross compiling activated, overriding cmake internals **")
         # the name of the target operating system
         SET(CMAKE_SYSTEM_NAME Windows)
-        
+        SET(PFIX  $ENV{CROSS_PREFIX})        
         # which compilers to use for C and C++
-        SET(CMAKE_C_COMPILER i586-mingw32msvc-gcc)
-        SET(CMAKE_CXX_COMPILER i586-mingw32msvc-g++)
-        SET(CMAKE_LINKER i586-mingw32msvc-ld)
-        SET(CMAKE_AR i586-mingw32msvc-ar)
+        SET(CMAKE_C_COMPILER ${PFIX}-gcc)
+        SET(CMAKE_CXX_COMPILER ${PFIX}-g++)
+        SET(CMAKE_LINKER ${PFIX}-ld)
+        SET(CMAKE_AR ${PFIX}-ar)
         
         # here is the target environment located
         SET(CMAKE_FIND_ROOT_PATH  /usr/i586-mingw32msvc ${CROSS} )

Modified: branches/avidemux_2.6_branch_mean/foreignBuilds/cross_mingw_core
===================================================================
--- branches/avidemux_2.6_branch_mean/foreignBuilds/cross_mingw_core	2009-11-14 17:40:44 UTC (rev 5502)
+++ branches/avidemux_2.6_branch_mean/foreignBuilds/cross_mingw_core	2009-11-15 11:08:50 UTC (rev 5503)
@@ -12,10 +12,10 @@
 cmake   -DCROSS=$MINGW \
         -DCMAKE_INCLUDE_PATH=$MINGW/include -DCMAKE_LIBRARY_PATH=$MINGW/lib \
         -DCMAKE_INSTALL_PREFIX=$MINGW/Release \
-        -DCMAKE_C_COMPILER:STRING=$PREFIX-gcc \
-        -DCMAKE_CXX_COMPILER:STRING=$PREFIX-g++ \
-        -DCMAKE_LINKER:STRING=$PREFIX-ld \
-        -DCMAKE_AR:STRING=$PREFIX-ar \
+        -DCMAKE_C_COMPILER:STRING=$CROSS_PREFIX-gcc \
+        -DCMAKE_CXX_COMPILER:STRING=$CROSS_PREFIX-g++ \
+        -DCMAKE_LINKER:STRING=$CROSS_PREFIX-ld \
+        -DCMAKE_AR:STRING=$CROSS_PREFIX-ar \
         -DCMAKE_SYSTEM_NAME:STRING=Windows \
         $DEBUG\
         -DAVIDEMUX_TOP_SOURCE_DIR="$TOP"  \

Modified: branches/avidemux_2.6_branch_mean/foreignBuilds/cross_mingw_plugins
===================================================================
--- branches/avidemux_2.6_branch_mean/foreignBuilds/cross_mingw_plugins	2009-11-14 17:40:44 UTC (rev 5502)
+++ branches/avidemux_2.6_branch_mean/foreignBuilds/cross_mingw_plugins	2009-11-15 11:08:50 UTC (rev 5503)
@@ -12,10 +12,10 @@
 cmake   -DCROSS=$MINGW \
         -DCMAKE_INCLUDE_PATH=$MINGW/include -DCMAKE_LIBRARY_PATH=$MINGW/lib \
         -DCMAKE_INSTALL_PREFIX=$MINGW/Release \
-        -DCMAKE_C_COMPILER:STRING=$PREFIX-gcc \
-        -DCMAKE_CXX_COMPILER:STRING=$PREFIX-g++ \
-        -DCMAKE_LINKER:STRING=$PREFIX-ld \
-        -DCMAKE_AR:STRING=$PREFIX-ar \
+        -DCMAKE_C_COMPILER:STRING=$CROSS_PREFIX-gcc \
+        -DCMAKE_CXX_COMPILER:STRING=$CROSS_PREFIX-g++ \
+        -DCMAKE_LINKER:STRING=$CROSS_PREFIX-ld \
+        -DCMAKE_AR:STRING=$CROSS_PREFIX-ar \
         -DCMAKE_SYSTEM_NAME:STRING=Windows \
         -DQT_HOME:STRING=$QT_HOME \
          $DEBUG -G "CodeBlocks - Unix Makefiles"  \

Modified: branches/avidemux_2.6_branch_mean/foreignBuilds/cross_mingw_qt4
===================================================================
--- branches/avidemux_2.6_branch_mean/foreignBuilds/cross_mingw_qt4	2009-11-14 17:40:44 UTC (rev 5502)
+++ branches/avidemux_2.6_branch_mean/foreignBuilds/cross_mingw_qt4	2009-11-15 11:08:50 UTC (rev 5503)
@@ -13,10 +13,10 @@
 cmake   -DCROSS=$MINGW \
         -DCMAKE_INCLUDE_PATH=$MINGW/include -DCMAKE_LIBRARY_PATH=$MINGW/lib \
         -DCMAKE_INSTALL_PREFIX=$MINGW/Release \
-        -DCMAKE_C_COMPILER:STRING=$PREFIX-gcc \
-        -DCMAKE_CXX_COMPILER:STRING=$PREFIX-g++ \
-        -DCMAKE_LINKER:STRING=$PREFIX-ld \
-        -DCMAKE_AR:STRING=$PREFIX-ar \
+        -DCMAKE_C_COMPILER:STRING=$CROSS_PREFIX-gcc \
+        -DCMAKE_CXX_COMPILER:STRING=$CROSS_PREFIX-g++ \
+        -DCMAKE_LINKER:STRING=$CROSS_PREFIX-ld \
+        -DCMAKE_AR:STRING=$CROSS_PREFIX-ar \
         -DCMAKE_SYSTEM_NAME:STRING=Windows \
         -DQT_HOME:STRING=$QT_HOME \
         $DEBUG \



From mean at mail.berlios.de  Sun Nov 15 12:22:48 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sun, 15 Nov 2009 12:22:48 +0100
Subject: [Avidemux-svn-commit] r5504 - branches/avidemux_2.6_branch_mean
Message-ID: <200911151122.nAFBMmgR007038@sheep.berlios.de>

Author: mean
Date: 2009-11-15 12:22:48 +0100 (Sun, 15 Nov 2009)
New Revision: 5504

Added:
   branches/avidemux_2.6_branch_mean/bootStrapCrossMingw_w32.sh
Log:
[Win32] Bootstrap script for mingw-w32

Added: branches/avidemux_2.6_branch_mean/bootStrapCrossMingw_w32.sh
===================================================================
--- branches/avidemux_2.6_branch_mean/bootStrapCrossMingw_w32.sh	2009-11-15 11:08:50 UTC (rev 5503)
+++ branches/avidemux_2.6_branch_mean/bootStrapCrossMingw_w32.sh	2009-11-15 11:22:48 UTC (rev 5504)
@@ -0,0 +1,46 @@
+#!/bin/bash
+# ** Put your config here **
+export PATH=$PATH:/mingw/bin
+export CROSS_PREFIX=i686-w64-mingw32
+export SDLDIR=/mingw
+export MINGW=/mingw
+export QT_HOME=/mingw/Qt/4.5.2
+# ** Put your config here **
+
+fail()
+{
+        echo "** Failed at $1**"
+        exit 1
+}
+
+Process()
+{
+        export BUILDDIR=$1
+        export SCRIPT=$2
+        echo "Building $BUILDDIR from $SOURCEDIR"
+        rm -Rf ./$BUILDDIR
+        mkdir $BUILDDIR || fail mkdir
+        cd $BUILDDIR 
+        sh $TOP/foreignBuilds/$SCRIPT || fail cmake
+        make -j 2 > /tmp/log$BUILDDIR || fail make
+        make install || fail make_install
+}
+
+echo "**BootStrapping avidemux **"
+export TOP=$PWD
+echo "Top dir : $TOP"
+echo "** CORE **"
+cd $TOP
+Process buildMingwCore cross_mingw_core
+echo "** QT4 **"
+cd $TOP
+Process buildMingwQt4 cross_mingw_qt4 
+#echo "** GTK **"
+#cd $TOP
+#Process buildGtk ../avidemux/gtk
+echo "** Plugins **"
+cd $TOP
+Process buildMingwPlugins cross_mingw_plugins 
+echo "** All done **"
+cd $TOP
+echo "** ALL DONE **"



From mean at mail.berlios.de  Sun Nov 15 17:47:12 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sun, 15 Nov 2009 17:47:12 +0100
Subject: [Avidemux-svn-commit] r5505 -
	branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor
Message-ID: <200911151647.nAFGlCuY020419@sheep.berlios.de>

Author: mean
Date: 2009-11-15 17:47:11 +0100 (Sun, 15 Nov 2009)
New Revision: 5505

Modified:
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_segment.cpp
Log:
[Editor] Last frame is part of the last segment

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_segment.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_segment.cpp	2009-11-15 11:22:48 UTC (rev 5504)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_segment.cpp	2009-11-15 16:47:11 UTC (rev 5505)
@@ -316,6 +316,18 @@
             return true;
         }
     }
+    int max=segments.size();
+    if(max)
+    {
+        _SEGMENT *last=&(segments[max-1]);
+        if(frameTime==last->_startTimeUs+last->_durationUs)
+        {
+            ADM_info("End of last segment\n");
+            *seg=max-1;
+            *segTime=frameTime-last->_startTimeUs;
+            return true;
+        }
+    }
     ADM_warning("Cannot find segment matching time %"LLU"ms \n",frameTime/1000);
     return false;
 }



From mean at mail.berlios.de  Sun Nov 15 17:47:13 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sun, 15 Nov 2009 17:47:13 +0100
Subject: [Avidemux-svn-commit] r5506 -
	branches/avidemux_2.6_branch_mean/avidemux/common
Message-ID: <200911151647.nAFGlDc3020429@sheep.berlios.de>

Author: mean
Date: 2009-11-15 17:47:13 +0100 (Sun, 15 Nov 2009)
New Revision: 5506

Modified:
   branches/avidemux_2.6_branch_mean/avidemux/common/gtk_gui.cpp
Log:
[GUI] Update markers after loading/reset/cut

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/gtk_gui.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/gtk_gui.cpp	2009-11-15 16:47:11 UTC (rev 5505)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/gtk_gui.cpp	2009-11-15 16:47:13 UTC (rev 5506)
@@ -394,20 +394,21 @@
     case ACT_ResetSegments:
        if(avifileinfo)
          if(GUI_Question(QT_TR_NOOP("Are you sure?")))
-	{
-		video_body->resetSeg();
-  		video_body->getVideoInfo (avifileinfo);
+        {
+            video_body->resetSeg();
+            video_body->getVideoInfo (avifileinfo);
 		
       		GUI_setAllFrameAndTime ();
             A_ResetMarkers();
       		ReSync ();
 
-		// forget last project file
-		if( actual_workbench_file ){
-			ADM_dealloc(actual_workbench_file);
-			actual_workbench_file = NULL;
-		}
-	}
+            // forget last project file
+            if( actual_workbench_file )
+            {
+                ADM_dealloc(actual_workbench_file);
+                actual_workbench_file = NULL;
+            }
+        }
 	break;
 
     case ACT_Delete:
@@ -1165,7 +1166,6 @@
         if(!avifileinfo) return;
         GUI_setAllFrameAndTime();
         UI_setMarkers (video_body->getMarkerAPts(),video_body->getMarkerBPts());
-        GUI_GoToFrame(0);
 }
 uint8_t  DIA_job_select(char **jobname, char **filename);
 void A_addJob(void)
@@ -1416,8 +1416,11 @@
 void A_ResetMarkers(void)
 {
 uint64_t duration=video_body->getVideoDuration();
+        ADM_info("Video Total duration : %s ms\n",ADM_us2plain(duration));
         video_body->setMarkerAPts(0);
         video_body->setMarkerBPts(duration);
+        UI_setMarkers(0,duration);
+        
 }
 /**
     \fn A_Rewind



From mean at mail.berlios.de  Sun Nov 15 18:35:05 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sun, 15 Nov 2009 18:35:05 +0100
Subject: [Avidemux-svn-commit] r5507 - in branches/avidemux_2.6_branch_mean:
	avidemux_core/ADM_coreVideoFilter/include
	avidemux_plugins/ADM_videoFilters6
	avidemux_plugins/ADM_videoFilters6/resize
	avidemux_plugins/ADM_videoFilters6/resize/gtk
	avidemux_plugins/ADM_videoFilters6/resize/qt4
	avidemux_plugins/ADM_videoFilters6/verticalFlip
Message-ID: <200911151735.nAFHZ5ng026813@sheep.berlios.de>

Author: mean
Date: 2009-11-15 18:35:04 +0100 (Sun, 15 Nov 2009)
New Revision: 5507

Added:
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/resize/
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/resize/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/resize/gtk/
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/resize/gtk/gtk_resize.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/resize/qt4/
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/resize/qt4/Q_resize.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/resize/qt4/Q_resize.h
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/resize/qt4/resizing.ui
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/resize/swScaleResize.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/resize/swresize.conf
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/resize/swresize.h
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/resize/swresize_desc.cpp
Removed:
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/verticalFlip/ADM_vidFlipV.cpp
Modified:
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoFilter/include/ADM_coreVideoFilterInternal.h
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/CMakeLists.txt
Log:
[Filter] Add simple resize filter

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoFilter/include/ADM_coreVideoFilterInternal.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoFilter/include/ADM_coreVideoFilterInternal.h	2009-11-15 16:47:13 UTC (rev 5506)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoFilter/include/ADM_coreVideoFilterInternal.h	2009-11-15 17:35:04 UTC (rev 5507)
@@ -4,10 +4,12 @@
 */
 #ifndef ADM_vf_plugin_h
 #define ADM_vf_plugin_h
+#include <stddef.h>
 #include "ADM_default.h"
 #include "DIA_uiTypes.h"
 #include "ADM_coreVideoFilter.h"
 #include "ADM_filterCategory.h"
+#include "ADM_paramList.h"
 
 #define VF_API_VERSION 1
 /* These are the 6 functions exported by each plugin ...*/

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/CMakeLists.txt	2009-11-15 16:47:13 UTC (rev 5506)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/CMakeLists.txt	2009-11-15 17:35:04 UTC (rev 5507)
@@ -1,2 +1,3 @@
 ADD_SUBDIRECTORY(dummy)
 ADD_SUBDIRECTORY(verticalFlip)
+ADD_SUBDIRECTORY(resize)

Added: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/resize/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/resize/CMakeLists.txt	2009-11-15 16:47:13 UTC (rev 5506)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/resize/CMakeLists.txt	2009-11-15 17:35:04 UTC (rev 5507)
@@ -0,0 +1,9 @@
+INCLUDE(vf_plugin)
+
+
+SET(ADM_vf_swscaleResize_SRCS swScaleResize.cpp)
+
+ADD_LIBRARY(ADM_vf_swscaleResize SHARED ${ADM_vf_swscaleResize_SRCS})
+
+INIT_VIDEO_FILTER(ADM_vf_swscaleResize)
+INSTALL_VIDEO_FILTER(ADM_vf_swscaleResize)

Added: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/resize/gtk/gtk_resize.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/resize/gtk/gtk_resize.cpp	2009-11-15 16:47:13 UTC (rev 5506)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/resize/gtk/gtk_resize.cpp	2009-11-15 17:35:04 UTC (rev 5507)
@@ -0,0 +1,561 @@
+/*
+	Resize GUI
+
+*/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+#include <math.h>
+
+#include "ADM_toolkitGtk.h"
+#include "ADM_default.h"
+#define aprintf(...) {}
+
+#include <gdk/gdkkeysyms.h>
+#include <gtk/gtk.h>
+
+
+#include "ADM_gladeSupport.h"
+
+#define FILL_ENTRY(widget_name,string) 		{r=-1;   \
+gtk_editable_delete_text(GTK_EDITABLE(lookup_widget(dialog,#widget_name)), 0,-1);\
+gtk_editable_insert_text(GTK_EDITABLE(lookup_widget(dialog,#widget_name)), string, strlen(string), &r);}
+#define CHECKBOX(x,y) if(TRUE==gtk_toggle_button_get_active(GTK_TOGGLE_BUTTON(lookup_widget(dialog,#x))))  \
+			y=1; else y=0;
+#define READ_ENTRY(widget_name)   gtk_editable_get_chars(GTK_EDITABLE (lookup_widget(dialog,#widget_name)), 0, -1);
+
+#define SPIN_GET(x,y) {y= gtk_spin_button_get_value_as_int(GTK_SPIN_BUTTON(WID(x))) ;}
+#define SPIN_SET(x,y)  {gtk_spin_button_set_value(GTK_SPIN_BUTTON(WID(x)),(gfloat)y) ;}
+
+
+/*----------------------------------------------*/
+static GtkWidget	*create_dialog1 (void);
+static void drag(GtkButton * button, gpointer user_data);
+static void read (void );
+static void write (void );
+/*----------------------------------------------*/
+static GtkWidget *dialog;
+static uint32_t iw,ih,ow,oh;
+static GtkAdjustment *adj_angle;
+static gint  r;
+static int sar;
+static int dar;
+static int resizeMethod;
+static int roundBool;
+static float erx,ery;
+static double aspectRatio[2][3]={
+								{1.,0.888888,1.19}, // NTSC 1:1 4:3 16:9
+								{1.,1.066667,1.43} // PAL  1:1 4:3 16:9
+							};
+static int pal=1;
+/*----------------------------------------------*/
+uint8_t DIA_resize(uint32_t *width,uint32_t *height,uint32_t *alg,uint32_t originalw, uint32_t originalh,uint32_t fps1000)
+{
+
+
+	char str[100];
+	uint8_t ret=0;
+
+
+	if(fps1000>24600 && fps1000<25400)
+	{
+		aprintf("Pal\n");
+		pal=1;
+	}
+	else
+	{
+		aprintf("NTSC\n");
+		pal=0;
+	}
+
+	ow=originalw;
+	oh=originalh;
+
+	iw=*width;
+	ih=*height;
+	dialog=create_dialog1();
+	//gtk_transient(dialog);
+        gtk_register_dialog(dialog);
+	erx=ery=0;
+
+	double val;
+	val=100.*iw;
+	if(ow) val=val/ow;
+	adj_angle=	gtk_range_get_adjustment (GTK_RANGE(WID(hscale1)));
+	gtk_adjustment_set_value( GTK_ADJUSTMENT(adj_angle),(  gdouble  ) val );
+
+	// remember algo
+ 	gtk_option_menu_set_history (GTK_OPTION_MENU (WID(optionmenu1)), *alg);
+
+
+	#define CONNECT(w,x) gtk_signal_connect(GTK_OBJECT(lookup_widget(dialog,#w)), #x, \
+		       GTK_SIGNAL_FUNC(drag), NULL)
+
+		       	CONNECT(hscale1,drag_data_received);
+			CONNECT(hscale1,drag_motion);
+			CONNECT(hscale1,drag_data_get);
+			CONNECT(hscale1,drag_begin);
+
+			gtk_signal_connect(GTK_OBJECT(adj_angle),"value_changed",    GTK_SIGNAL_FUNC(drag), NULL);
+
+	write();
+
+	ret=0;
+	uint8_t stop=0;
+	while(!stop)
+	{
+		switch(gtk_dialog_run(GTK_DIALOG(dialog)))
+		{
+			case GTK_RESPONSE_OK:
+				gchar *s;
+
+                                SPIN_GET(spinbutton_width,*width);
+                                SPIN_GET(spinbutton_height,*height);
+				*alg= getRangeInMenu(lookup_widget(dialog,"optionmenu1"));
+				ret=1;
+				stop=1;
+				break;
+		default:			
+		case GTK_RESPONSE_CANCEL:
+				stop=1;
+				break;
+		case GTK_RESPONSE_APPLY:
+				drag(NULL,NULL);
+				break;
+							
+		}
+
+	}
+        gtk_unregister_dialog(dialog);
+	gtk_widget_destroy(dialog);
+
+	return ret;
+
+}
+/*
+	Called when the hscale is changed
+*/
+void drag(GtkButton * button, gpointer user_data)
+{
+  UNUSED_ARG(button);
+  UNUSED_ARG(user_data);
+
+  double percent;
+  float x,y;
+  float sr_mul,dst_mul;
+
+ int32_t xx,yy;
+
+
+
+  percent = GTK_ADJUSTMENT(adj_angle)->value;
+  if(percent<10.0) percent=10.;
+  read();
+
+  aprintf("drag called : %f \n",percent);
+  x=ow;
+  y=oh;
+ erx=0;
+ ery=0;
+  sr_mul=1.;
+  if(sar)
+  	{  // source is 4/3 or 16/9
+			sr_mul=aspectRatio[pal][sar];
+
+	}
+
+dst_mul=1.;
+  if(dar)
+  	{  // dst is 4/3 or 16/9
+
+			dst_mul=1/aspectRatio[pal][dar];
+	}
+	aprintf("source mul %02.2f , dst mul : %02.2f\n",sr_mul,dst_mul);
+	x=x*sr_mul*dst_mul;
+	y=y;
+
+	// normalize it to recover 100% width
+	y=y/(x/ow);
+	x=ow;
+
+	aprintf("AR:x,y  : %03f %03f \n",x,y);
+
+  	percent/=100.;
+  	x=x*percent;
+  	y=y*percent;
+
+
+	aprintf("AR x,y  : %03f %03f \n",x,y);
+  	xx=(uint32_t)floor(x+0.5);
+	yy=(uint32_t)floor(y+0.5);
+
+	if(xx&1) xx--;
+	if(yy&1) yy--;
+
+
+	if(roundBool)
+	{
+		int32_t ox=xx,oy=yy;
+		xx=(xx +7) & 0xfffff0;
+		yy=(yy +7) & 0xfffff0;
+
+		erx=(xx-ox);
+		erx=erx/xx;
+		ery=(yy-oy);
+		ery=ery/yy;
+
+		aprintf("x: %d -> %d : err %f\n",ox,xx,erx);
+		aprintf("y: %d -> %d : err %f\n",oy,yy,ery);
+	}
+
+	iw=xx;
+	ih=yy;
+	write();
+
+  }
+//---------------------------------------------
+// 	read all value from dialog
+//---------------------------------------------
+void read (void )
+{
+	// Read source and dest aspect ratio
+ 	sar=getRangeInMenu(WID(optionmenu_source));
+	dar=getRangeInMenu(WID(optionmenu_dest));
+	// Read resizing method
+	resizeMethod=getRangeInMenu(WID(optionmenu1));
+	// Read round to neareast 16
+	CHECKBOX(checkbutton_16,roundBool);
+
+}
+//---------------------------------------------
+// 	update dialog with new value
+//---------------------------------------------
+
+void write (void )
+{
+ char str[100];
+
+        SPIN_SET(spinbutton_width,iw);
+        SPIN_SET(spinbutton_height,ih);
+
+	sprintf(str,"%2.2f",erx*100.);
+	gtk_label_set_text(GTK_LABEL(WID(label_errorx)),str);
+
+	sprintf(str,"%2.2f",ery*100.);
+	gtk_label_set_text(GTK_LABEL(WID(label_errory)),str);
+
+}
+
+//----------------------------
+GtkWidget*
+create_dialog1 (void)
+{
+  GtkWidget *dialog1;
+  GtkWidget *dialog_vbox1;
+  GtkWidget *vbox1;
+  GtkWidget *table2;
+  GtkWidget *label1;
+  GtkWidget *label2;
+  GtkObject *spinbutton_width_adj;
+  GtkWidget *spinbutton_width;
+  GtkObject *spinbutton_height_adj;
+  GtkWidget *spinbutton_height;
+  GtkWidget *label5;
+  GtkWidget *label6;
+  GtkWidget *optionmenu_source;
+  GtkWidget *menu1;
+  GtkWidget *item1_1;
+  GtkWidget *_4_1;
+  GtkWidget *_16_1;
+  GtkWidget *optionmenu_dest;
+  GtkWidget *menu2;
+  GtkWidget *menuitem1;
+  GtkWidget *menuitem2;
+  GtkWidget *menuitem3;
+  GtkWidget *label3;
+  GtkWidget *label_errorx;
+  GtkWidget *label7;
+  GtkWidget *label_errory;
+  GtkWidget *checkbutton_16;
+  GtkWidget *optionmenu1;
+  GtkWidget *menu3;
+  GtkWidget *bilinear1;
+  GtkWidget *bicubic1;
+  GtkWidget *lanczos1;
+  GtkWidget *alignment1;
+  GtkWidget *fixed1;
+  GtkWidget *fixed2;
+  GtkWidget *hscale1;
+  GtkWidget *dialog_action_area1;
+  GtkWidget *cancelbutton1;
+  GtkWidget *applybutton1;
+  GtkWidget *okbutton1;
+
+  dialog1 = gtk_dialog_new ();
+  gtk_window_set_title (GTK_WINDOW (dialog1), QT_TR_NOOP("Resize"));
+  gtk_window_set_type_hint (GTK_WINDOW (dialog1), GDK_WINDOW_TYPE_HINT_DIALOG);
+
+  dialog_vbox1 = GTK_DIALOG (dialog1)->vbox;
+  gtk_widget_show (dialog_vbox1);
+
+  vbox1 = gtk_vbox_new (FALSE, 0);
+  gtk_widget_show (vbox1);
+  gtk_box_pack_start (GTK_BOX (dialog_vbox1), vbox1, TRUE, TRUE, 0);
+
+  table2 = gtk_table_new (4, 4, FALSE);
+  gtk_widget_show (table2);
+  gtk_box_pack_start (GTK_BOX (vbox1), table2, FALSE, FALSE, 0);
+
+  label1 = gtk_label_new (QT_TR_NOOP(" Width "));
+  gtk_widget_show (label1);
+  gtk_table_attach (GTK_TABLE (table2), label1, 0, 1, 0, 1,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+  gtk_misc_set_alignment (GTK_MISC (label1), 0, 0.5);
+
+  label2 = gtk_label_new (QT_TR_NOOP(" Height "));
+  gtk_widget_show (label2);
+  gtk_table_attach (GTK_TABLE (table2), label2, 0, 1, 1, 2,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+  gtk_misc_set_alignment (GTK_MISC (label2), 0, 0.5);
+
+  spinbutton_width_adj = gtk_adjustment_new (2, 0, 3000, 1, 10, 10);
+  spinbutton_width = gtk_spin_button_new (GTK_ADJUSTMENT (spinbutton_width_adj), 1, 0);
+  gtk_widget_show (spinbutton_width);
+  gtk_table_attach (GTK_TABLE (table2), spinbutton_width, 1, 2, 0, 1,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+  gtk_spin_button_set_numeric (GTK_SPIN_BUTTON (spinbutton_width), TRUE);
+
+  spinbutton_height_adj = gtk_adjustment_new (1, 0, 3000, 1, 10, 10);
+  spinbutton_height = gtk_spin_button_new (GTK_ADJUSTMENT (spinbutton_height_adj), 1, 0);
+  gtk_widget_show (spinbutton_height);
+  gtk_table_attach (GTK_TABLE (table2), spinbutton_height, 1, 2, 1, 2,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+  gtk_spin_button_set_numeric (GTK_SPIN_BUTTON (spinbutton_height), TRUE);
+
+  label5 = gtk_label_new (QT_TR_NOOP("Source :"));
+  gtk_widget_show (label5);
+  gtk_table_attach (GTK_TABLE (table2), label5, 2, 3, 0, 1,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+
+  label6 = gtk_label_new (QT_TR_NOOP("Destination"));
+  gtk_widget_show (label6);
+  gtk_table_attach (GTK_TABLE (table2), label6, 2, 3, 1, 2,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+
+  optionmenu_source = gtk_option_menu_new ();
+  gtk_widget_show (optionmenu_source);
+  gtk_table_attach (GTK_TABLE (table2), optionmenu_source, 3, 4, 0, 1,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+
+  menu1 = gtk_menu_new ();
+
+  item1_1 = gtk_menu_item_new_with_mnemonic (QT_TR_NOOP("1:1"));
+  gtk_widget_show (item1_1);
+  gtk_container_add (GTK_CONTAINER (menu1), item1_1);
+
+  _4_1 = gtk_menu_item_new_with_mnemonic (QT_TR_NOOP("4:3"));
+  gtk_widget_show (_4_1);
+  gtk_container_add (GTK_CONTAINER (menu1), _4_1);
+
+  _16_1 = gtk_menu_item_new_with_mnemonic (QT_TR_NOOP("16:9"));
+  gtk_widget_show (_16_1);
+  gtk_container_add (GTK_CONTAINER (menu1), _16_1);
+
+  gtk_option_menu_set_menu (GTK_OPTION_MENU (optionmenu_source), menu1);
+
+  optionmenu_dest = gtk_option_menu_new ();
+  gtk_widget_show (optionmenu_dest);
+  gtk_table_attach (GTK_TABLE (table2), optionmenu_dest, 3, 4, 1, 2,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+
+  menu2 = gtk_menu_new ();
+
+  menuitem1 = gtk_menu_item_new_with_mnemonic (QT_TR_NOOP("1:1"));
+  gtk_widget_show (menuitem1);
+  gtk_container_add (GTK_CONTAINER (menu2), menuitem1);
+
+  menuitem2 = gtk_menu_item_new_with_mnemonic (QT_TR_NOOP("4:3"));
+  gtk_widget_show (menuitem2);
+  gtk_container_add (GTK_CONTAINER (menu2), menuitem2);
+
+  menuitem3 = gtk_menu_item_new_with_mnemonic (QT_TR_NOOP("16:9"));
+  gtk_widget_show (menuitem3);
+  gtk_container_add (GTK_CONTAINER (menu2), menuitem3);
+
+  gtk_option_menu_set_menu (GTK_OPTION_MENU (optionmenu_dest), menu2);
+
+  label3 = gtk_label_new (QT_TR_NOOP(" Error X:"));
+  gtk_widget_show (label3);
+  gtk_table_attach (GTK_TABLE (table2), label3, 0, 1, 2, 3,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+  gtk_misc_set_alignment (GTK_MISC (label3), 0, 0.5);
+
+  label_errorx = gtk_label_new (QT_TR_NOOP("0"));
+  gtk_widget_show (label_errorx);
+  gtk_table_attach (GTK_TABLE (table2), label_errorx, 1, 2, 2, 3,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+  gtk_misc_set_alignment (GTK_MISC (label_errorx), 0, 0.5);
+
+  label7 = gtk_label_new (QT_TR_NOOP(" Error Y:"));
+  gtk_widget_show (label7);
+  gtk_table_attach (GTK_TABLE (table2), label7, 0, 1, 3, 4,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+  gtk_misc_set_alignment (GTK_MISC (label7), 0, 0.5);
+
+  label_errory = gtk_label_new (QT_TR_NOOP("0"));
+  gtk_widget_show (label_errory);
+  gtk_table_attach (GTK_TABLE (table2), label_errory, 1, 2, 3, 4,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+  gtk_misc_set_alignment (GTK_MISC (label_errory), 0, 0.5);
+
+  checkbutton_16 = gtk_check_button_new_with_mnemonic (QT_TR_NOOP("16 round up"));
+  gtk_widget_show (checkbutton_16);
+  gtk_table_attach (GTK_TABLE (table2), checkbutton_16, 3, 4, 2, 3,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+
+  optionmenu1 = gtk_option_menu_new ();
+  gtk_widget_show (optionmenu1);
+  gtk_table_attach (GTK_TABLE (table2), optionmenu1, 3, 4, 3, 4,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+
+  menu3 = gtk_menu_new ();
+
+  bilinear1 = gtk_menu_item_new_with_mnemonic (QT_TR_NOOP("Bilinear"));
+  gtk_widget_show (bilinear1);
+  gtk_container_add (GTK_CONTAINER (menu3), bilinear1);
+
+  bicubic1 = gtk_menu_item_new_with_mnemonic (QT_TR_NOOP("Bicubic"));
+  gtk_widget_show (bicubic1);
+  gtk_container_add (GTK_CONTAINER (menu3), bicubic1);
+
+  lanczos1 = gtk_menu_item_new_with_mnemonic (QT_TR_NOOP("Lanczos3"));
+  gtk_widget_show (lanczos1);
+  gtk_container_add (GTK_CONTAINER (menu3), lanczos1);
+
+  gtk_option_menu_set_menu (GTK_OPTION_MENU (optionmenu1), menu3);
+
+  alignment1 = gtk_alignment_new (0.5, 0.5, 1, 1);
+  gtk_widget_show (alignment1);
+  gtk_table_attach (GTK_TABLE (table2), alignment1, 2, 3, 2, 3,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (GTK_FILL), 0, 0);
+
+  fixed1 = gtk_fixed_new ();
+  gtk_widget_show (fixed1);
+  gtk_container_add (GTK_CONTAINER (alignment1), fixed1);
+
+  fixed2 = gtk_fixed_new ();
+  gtk_widget_show (fixed2);
+  gtk_table_attach (GTK_TABLE (table2), fixed2, 2, 3, 3, 4,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (GTK_FILL), 0, 0);
+
+  hscale1 = gtk_hscale_new (GTK_ADJUSTMENT (gtk_adjustment_new (100, 0, 100, 1, 1, 0)));
+  gtk_widget_show (hscale1);
+  gtk_box_pack_start (GTK_BOX (vbox1), hscale1, FALSE, FALSE, 0);
+  gtk_scale_set_digits (GTK_SCALE (hscale1), 0);
+
+  dialog_action_area1 = GTK_DIALOG (dialog1)->action_area;
+  gtk_widget_show (dialog_action_area1);
+  gtk_button_box_set_layout (GTK_BUTTON_BOX (dialog_action_area1), GTK_BUTTONBOX_END);
+
+  cancelbutton1 = gtk_button_new_from_stock ("gtk-cancel");
+  gtk_widget_show (cancelbutton1);
+  gtk_dialog_add_action_widget (GTK_DIALOG (dialog1), cancelbutton1, GTK_RESPONSE_CANCEL);
+  GTK_WIDGET_SET_FLAGS (cancelbutton1, GTK_CAN_DEFAULT);
+
+  applybutton1 = gtk_button_new_from_stock ("gtk-apply");
+  gtk_widget_show (applybutton1);
+  gtk_dialog_add_action_widget (GTK_DIALOG (dialog1), applybutton1, GTK_RESPONSE_APPLY);
+  GTK_WIDGET_SET_FLAGS (applybutton1, GTK_CAN_DEFAULT);
+
+  okbutton1 = gtk_button_new_from_stock ("gtk-ok");
+  gtk_widget_show (okbutton1);
+  gtk_dialog_add_action_widget (GTK_DIALOG (dialog1), okbutton1, GTK_RESPONSE_OK);
+  GTK_WIDGET_SET_FLAGS (okbutton1, GTK_CAN_DEFAULT);
+/*
+  g_signal_connect ((gpointer) _4_1, "activate",
+                    G_CALLBACK (on_4_1_activate),
+                    NULL);
+  g_signal_connect ((gpointer) _16_1, "activate",
+                    G_CALLBACK (on_16_1_activate),
+                    NULL);
+  g_signal_connect ((gpointer) menuitem2, "activate",
+                    G_CALLBACK (on_4_1_activate),
+                    NULL);
+  g_signal_connect ((gpointer) menuitem3, "activate",
+                    G_CALLBACK (on_16_1_activate),
+                    NULL);
+  g_signal_connect ((gpointer) bilinear1, "activate",
+                    G_CALLBACK (on_bilinear1_activate),
+                    NULL);
+  g_signal_connect ((gpointer) bicubic1, "activate",
+                    G_CALLBACK (on_bicubic1_activate),
+                    NULL);
+  g_signal_connect ((gpointer) lanczos1, "activate",
+                    G_CALLBACK (on_lanczos1_activate),
+                    NULL);
+*/
+  /* Store pointers to all widgets, for use by lookup_widget(). */
+  GLADE_HOOKUP_OBJECT_NO_REF (dialog1, dialog1, "dialog1");
+  GLADE_HOOKUP_OBJECT_NO_REF (dialog1, dialog_vbox1, "dialog_vbox1");
+  GLADE_HOOKUP_OBJECT (dialog1, vbox1, "vbox1");
+  GLADE_HOOKUP_OBJECT (dialog1, table2, "table2");
+  GLADE_HOOKUP_OBJECT (dialog1, label1, "label1");
+  GLADE_HOOKUP_OBJECT (dialog1, label2, "label2");
+  GLADE_HOOKUP_OBJECT (dialog1, spinbutton_width, "spinbutton_width");
+  GLADE_HOOKUP_OBJECT (dialog1, spinbutton_height, "spinbutton_height");
+  GLADE_HOOKUP_OBJECT (dialog1, label5, "label5");
+  GLADE_HOOKUP_OBJECT (dialog1, label6, "label6");
+  GLADE_HOOKUP_OBJECT (dialog1, optionmenu_source, "optionmenu_source");
+  GLADE_HOOKUP_OBJECT (dialog1, menu1, "menu1");
+  GLADE_HOOKUP_OBJECT (dialog1, item1_1, "item1_1");
+  GLADE_HOOKUP_OBJECT (dialog1, _4_1, "_4_1");
+  GLADE_HOOKUP_OBJECT (dialog1, _16_1, "_16_1");
+  GLADE_HOOKUP_OBJECT (dialog1, optionmenu_dest, "optionmenu_dest");
+  GLADE_HOOKUP_OBJECT (dialog1, menu2, "menu2");
+  GLADE_HOOKUP_OBJECT (dialog1, menuitem1, "menuitem1");
+  GLADE_HOOKUP_OBJECT (dialog1, menuitem2, "menuitem2");
+  GLADE_HOOKUP_OBJECT (dialog1, menuitem3, "menuitem3");
+  GLADE_HOOKUP_OBJECT (dialog1, label3, "label3");
+  GLADE_HOOKUP_OBJECT (dialog1, label_errorx, "label_errorx");
+  GLADE_HOOKUP_OBJECT (dialog1, label7, "label7");
+  GLADE_HOOKUP_OBJECT (dialog1, label_errory, "label_errory");
+  GLADE_HOOKUP_OBJECT (dialog1, checkbutton_16, "checkbutton_16");
+  GLADE_HOOKUP_OBJECT (dialog1, optionmenu1, "optionmenu1");
+  GLADE_HOOKUP_OBJECT (dialog1, menu3, "menu3");
+  GLADE_HOOKUP_OBJECT (dialog1, bilinear1, "bilinear1");
+  GLADE_HOOKUP_OBJECT (dialog1, bicubic1, "bicubic1");
+  GLADE_HOOKUP_OBJECT (dialog1, lanczos1, "lanczos1");
+  GLADE_HOOKUP_OBJECT (dialog1, alignment1, "alignment1");
+  GLADE_HOOKUP_OBJECT (dialog1, fixed1, "fixed1");
+  GLADE_HOOKUP_OBJECT (dialog1, fixed2, "fixed2");
+  GLADE_HOOKUP_OBJECT (dialog1, hscale1, "hscale1");
+  GLADE_HOOKUP_OBJECT_NO_REF (dialog1, dialog_action_area1, "dialog_action_area1");
+  GLADE_HOOKUP_OBJECT (dialog1, cancelbutton1, "cancelbutton1");
+  GLADE_HOOKUP_OBJECT (dialog1, applybutton1, "applybutton1");
+  GLADE_HOOKUP_OBJECT (dialog1, okbutton1, "okbutton1");
+
+  return dialog1;
+}
+

Added: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/resize/qt4/Q_resize.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/resize/qt4/Q_resize.cpp	2009-11-15 16:47:13 UTC (rev 5506)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/resize/qt4/Q_resize.cpp	2009-11-15 17:35:04 UTC (rev 5507)
@@ -0,0 +1,278 @@
+/***************************************************************************
+    copyright            : (C) 2001 by mean
+    email                : fixounet at free.fr
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+
+#include <math.h>
+
+#include "Q_resize.h"
+#include "DIA_coreToolkit.h"
+
+static double aspectRatio[2][3]={
+                              {1.,0.888888,1.19}, // NTSC 1:1 4:3 16:9
+                              {1.,1.066667,1.43} // PAL  1:1 4:3 16:9
+                            };
+#define aprintf
+
+resizeWindow::resizeWindow(resParam *param) : QDialog()
+ {
+     ui.setupUi(this);
+	 lastPercentage = 100;
+     _param=param;
+     ui.spinBoxWidth->setValue(_param->width);
+     ui.spinBoxHeight->setValue(_param->height);
+     ui.horizontalSlider->setValue(100);
+     updateWidthHeightSpinners();
+
+	 connect(ui.comboBoxSource, SIGNAL(currentIndexChanged(int)), this, SLOT(aspectRatioChanged(int)));
+	 connect(ui.comboBoxDestination, SIGNAL(currentIndexChanged(int)), this, SLOT(aspectRatioChanged(int)));
+	 connect(ui.checkBoxRoundup, SIGNAL(toggled(bool)), this, SLOT(roundupToggled(bool)));
+	 connect(ui.lockArCheckBox, SIGNAL(toggled(bool)), this, SLOT(lockArToggled(bool)));
+	 connect(ui.buttonBox, SIGNAL(accepted()), this, SLOT(okButtonClicked()));
+
+	 connectDimensionControls();
+ }
+
+ void resizeWindow::gather(void)
+ {
+    _param->width=ui.spinBoxWidth->value();
+    _param->height=ui.spinBoxHeight->value();
+    _param->algo=ui.comboBoxAlgo->currentIndex();
+ }
+ 
+ void resizeWindow::sliderChanged(int value)
+{
+	disconnectDimensionControls();
+
+	percentageSpinBoxChanged(value);
+
+	connectDimensionControls();
+}
+
+void resizeWindow::percentageSpinBoxChanged(int value)
+{
+	disconnectDimensionControls();
+
+	if (ui.checkBoxRoundup->isChecked())
+	{
+		if (lastPercentage > value)
+			ui.spinBoxWidth->setValue(ui.spinBoxWidth->value() - 16);
+		else
+			ui.spinBoxWidth->setValue(ui.spinBoxWidth->value() + 16);
+	}
+	else
+	{
+		float width = _param->originalWidth;
+
+		width /= 100.;
+		width *= value;
+
+		ui.spinBoxWidth->setValue(floor(width + 0.5));
+	}
+
+	updateWidthHeightSpinners(false);
+
+	lastPercentage = ui.percentageSpinBox->value();
+
+	connectDimensionControls();
+}
+
+void resizeWindow::widthSpinBoxChanged(int value)
+{
+	disconnectDimensionControls();
+
+	if (ui.lockArCheckBox->isChecked())
+		updateWidthHeightSpinners(false);
+
+	connectDimensionControls();
+}
+
+void resizeWindow::heightSpinBoxChanged(int value)
+{
+	disconnectDimensionControls();
+
+	if (ui.lockArCheckBox->isChecked())
+		updateWidthHeightSpinners(true);
+
+	connectDimensionControls();
+}
+
+void resizeWindow::aspectRatioChanged(int index)
+{
+	disconnectDimensionControls();
+
+	if (ui.lockArCheckBox->isChecked())
+		updateWidthHeightSpinners();
+
+	connectDimensionControls();
+}
+
+void resizeWindow::disconnectDimensionControls()
+{
+	disconnect(ui.spinBoxHeight, SIGNAL(valueChanged(int)), this, SLOT(heightSpinBoxChanged(int)));
+	disconnect(ui.spinBoxWidth, SIGNAL(valueChanged(int)), this, SLOT(widthSpinBoxChanged(int)));
+	disconnect(ui.horizontalSlider, SIGNAL(valueChanged(int)), this, SLOT(sliderChanged(int)));
+	disconnect(ui.percentageSpinBox, SIGNAL(valueChanged(int)), this, SLOT(percentageSpinBoxChanged(int)));
+}
+
+void resizeWindow::connectDimensionControls()
+{
+	connect(ui.spinBoxHeight, SIGNAL(valueChanged(int)), this, SLOT(heightSpinBoxChanged(int)));
+	connect(ui.spinBoxWidth, SIGNAL(valueChanged(int)), this, SLOT(widthSpinBoxChanged(int)));
+	connect(ui.horizontalSlider, SIGNAL(valueChanged(int)), this, SLOT(sliderChanged(int)));
+	connect(ui.percentageSpinBox, SIGNAL(valueChanged(int)), this, SLOT(percentageSpinBoxChanged(int)));
+}
+
+void resizeWindow::updateWidthHeightSpinners(bool useHeightAsRef)
+{
+	int sar = ui.comboBoxSource->currentIndex();
+	int dar = ui.comboBoxDestination->currentIndex();
+	float x = ui.spinBoxWidth->value();
+	float y = ui.spinBoxHeight->value();
+	float sr_mul = 1.;
+	float dst_mul = 1.;
+	float ar = 1.;
+
+	if (sar)
+	{  // source is 4/3 or 16/9
+		sr_mul = aspectRatio[_param->pal][sar];
+	}
+
+	if (dar)
+	{  // dst is 4/3 or 16/9
+		dst_mul = 1 / aspectRatio[_param->pal][dar];
+	}
+
+	aprintf("source mul %02.2f , dst mul: %02.2f\n", sr_mul, dst_mul);
+
+	ar = _param->originalWidth / (_param->originalHeight / (sr_mul * dst_mul));
+
+	if (useHeightAsRef)
+		x = y * ar;
+	else
+		y = x / ar;
+
+	aprintf("x, y: %03f, %03f\n", x, y);
+
+	int xx = floor(x + 0.5);
+	int yy = floor(y + 0.5);
+
+	if (xx & 1)
+		xx--;
+
+	if (yy & 1)
+		yy--;
+
+	roundUp(xx, yy);
+	updateSlider();
+}
+
+void resizeWindow::updateSlider()
+{
+	float percent = (((float)ui.spinBoxWidth->value() / (float)_param->originalWidth) * 100.) + 0.5;
+
+	ui.horizontalSlider->setValue(percent);
+	ui.percentageSpinBox->setValue(percent);
+}
+
+void resizeWindow::roundUp(int xx, int yy)
+{
+	float erx = 0.;
+	float ery = 0.;
+
+	if (ui.checkBoxRoundup->checkState())
+	{
+		int ox = xx, oy = yy;
+
+		xx = (xx + 7) & 0xfffff0;
+		yy = (yy + 7) & 0xfffff0;
+
+		erx = xx - ox;
+		erx = erx / xx;
+		ery = yy - oy;
+		ery = ery / yy;
+
+		aprintf("x: %d -> %d : err %f\n", ox, xx, erx);
+		aprintf("y: %d -> %d : err %f\n", oy, yy, ery);
+	}
+
+	ui.spinBoxWidth->setValue(xx);
+	ui.spinBoxHeight->setValue(yy);
+
+	ui.labelErrorXY->setText(QString("%1").arg(erx * 100., 0, 'f', 2) + " / " + QString("%1").arg(ery * 100., 0, 'f', 2));
+}
+
+void resizeWindow::lockArToggled(bool toggled)
+{
+	if (ui.lockArCheckBox->isChecked())
+		widthSpinBoxChanged(0);
+	else
+		ui.checkBoxRoundup->setChecked(false);
+}
+
+void resizeWindow::roundupToggled(bool toggled)
+{
+	if (toggled)
+	{
+		disconnectDimensionControls();
+
+		ui.spinBoxWidth->setSingleStep(16);
+		ui.spinBoxHeight->setSingleStep(16);
+		widthSpinBoxChanged(0);
+
+		connectDimensionControls();
+	}
+	else
+	{
+		ui.spinBoxWidth->setSingleStep(2);
+		ui.spinBoxHeight->setSingleStep(2);
+	}
+}
+
+void resizeWindow::okButtonClicked()
+{
+	if (ui.spinBoxWidth->value() & 1 || ui.spinBoxHeight->value() & 1)
+		GUI_Error_HIG(QT_TR_NOOP("Width and height cannot be odd"), NULL);
+	else
+		accept();
+}
+
+/**
+    \fn DIA_resize
+    \brief Handle resize dialo
+*/
+uint8_t DIA_resize(uint32_t *width,uint32_t *height,uint32_t *alg,uint32_t originalw, uint32_t originalh,uint32_t fps1000)
+{
+uint8_t r=0;
+      resParam param={*width,*height,originalw,originalh,fps1000,*alg,0};
+      //
+      if(fps1000>24600 && fps1000<25400)
+        {
+                param.pal=1;
+        }
+       
+
+     // Fetch info
+     resizeWindow resizewindow(&param) ;
+     ;
+     if(resizewindow.exec()==QDialog::Accepted)
+     {
+       resizewindow.gather();
+       *width=param.width;
+       *height=param.height;
+       *alg=param.algo;
+       r=1;
+     }
+     return r;
+}  
+//********************************************
+//EOF

Added: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/resize/qt4/Q_resize.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/resize/qt4/Q_resize.h	2009-11-15 16:47:13 UTC (rev 5506)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/resize/qt4/Q_resize.h	2009-11-15 17:35:04 UTC (rev 5507)
@@ -0,0 +1,31 @@
+#ifndef Q_resizing_h
+#define Q_resizing_h
+
+#include "ui_resizing.h"
+
+typedef struct resParam
+{
+	uint32_t width,height;
+	uint32_t originalWidth, originalHeight;
+	uint32_t fps1000;
+	uint32_t algo;
+	uint32_t pal;
+} resParam;
+
+class resizeWindow : public QDialog
+{
+	Q_OBJECT
+
+protected: 
+	resParam *_param;
+
+public:
+	resizeWindow(resParam *param);
+	~resizeWindow();
+	Ui_resizeDialog ui;
+
+public slots:
+	void gather(void);
+	void update(int i);
+};
+#endif	// Q_resizing_h

Added: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/resize/qt4/resizing.ui
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/resize/qt4/resizing.ui	2009-11-15 16:47:13 UTC (rev 5506)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/resize/qt4/resizing.ui	2009-11-15 17:35:04 UTC (rev 5507)
@@ -0,0 +1,724 @@
+<ui version="4.0" >
+ <class>resizeDialog</class>
+ <widget class="QDialog" name="resizeDialog" >
+  <property name="geometry" >
+   <rect>
+    <x>0</x>
+    <y>0</y>
+    <width>350</width>
+    <height>342</height>
+   </rect>
+  </property>
+  <property name="windowTitle" >
+   <string>Resize</string>
+  </property>
+  <layout class="QVBoxLayout" >
+   <property name="margin" >
+    <number>9</number>
+   </property>
+   <property name="spacing" >
+    <number>6</number>
+   </property>
+   <item>
+    <widget class="QGroupBox" name="groupBox_2" >
+     <property name="title" >
+      <string>Aspect Ratio</string>
+     </property>
+     <layout class="QVBoxLayout" >
+      <property name="margin" >
+       <number>9</number>
+      </property>
+      <property name="spacing" >
+       <number>6</number>
+      </property>
+      <item>
+       <widget class="QCheckBox" name="lockArCheckBox" >
+        <property name="text" >
+         <string>Lock Aspect Ratio</string>
+        </property>
+        <property name="checked" >
+         <bool>true</bool>
+        </property>
+       </widget>
+      </item>
+      <item>
+       <layout class="QHBoxLayout" >
+        <property name="margin" >
+         <number>0</number>
+        </property>
+        <property name="spacing" >
+         <number>6</number>
+        </property>
+        <item>
+         <widget class="QLabel" name="label_4" >
+          <property name="text" >
+           <string>Source:</string>
+          </property>
+         </widget>
+        </item>
+        <item>
+         <widget class="QComboBox" name="comboBoxSource" >
+          <item>
+           <property name="text" >
+            <string>1:1</string>
+           </property>
+          </item>
+          <item>
+           <property name="text" >
+            <string>4:3</string>
+           </property>
+          </item>
+          <item>
+           <property name="text" >
+            <string>16:9</string>
+           </property>
+          </item>
+         </widget>
+        </item>
+        <item>
+         <spacer>
+          <property name="orientation" >
+           <enum>Qt::Horizontal</enum>
+          </property>
+          <property name="sizeType" >
+           <enum>QSizePolicy::Fixed</enum>
+          </property>
+          <property name="sizeHint" >
+           <size>
+            <width>30</width>
+            <height>20</height>
+           </size>
+          </property>
+         </spacer>
+        </item>
+        <item>
+         <widget class="QLabel" name="label_3" >
+          <property name="text" >
+           <string>Destination:</string>
+          </property>
+         </widget>
+        </item>
+        <item>
+         <widget class="QComboBox" name="comboBoxDestination" >
+          <item>
+           <property name="text" >
+            <string>1:1</string>
+           </property>
+          </item>
+          <item>
+           <property name="text" >
+            <string>4:3</string>
+           </property>
+          </item>
+          <item>
+           <property name="text" >
+            <string>16:9</string>
+           </property>
+          </item>
+         </widget>
+        </item>
+        <item>
+         <spacer>
+          <property name="orientation" >
+           <enum>Qt::Horizontal</enum>
+          </property>
+          <property name="sizeHint" >
+           <size>
+            <width>40</width>
+            <height>20</height>
+           </size>
+          </property>
+         </spacer>
+        </item>
+       </layout>
+      </item>
+     </layout>
+    </widget>
+   </item>
+   <item>
+    <widget class="QGroupBox" name="groupBox" >
+     <property name="title" >
+      <string>Resize Dimensions</string>
+     </property>
+     <layout class="QVBoxLayout" >
+      <property name="margin" >
+       <number>9</number>
+      </property>
+      <property name="spacing" >
+       <number>6</number>
+      </property>
+      <item>
+       <layout class="QHBoxLayout" >
+        <property name="margin" >
+         <number>0</number>
+        </property>
+        <property name="spacing" >
+         <number>6</number>
+        </property>
+        <item>
+         <widget class="QLabel" name="label" >
+          <property name="text" >
+           <string>Width:</string>
+          </property>
+         </widget>
+        </item>
+        <item>
+         <widget class="QSpinBox" name="spinBoxWidth" >
+          <property name="maximum" >
+           <number>2900</number>
+          </property>
+          <property name="minimum" >
+           <number>16</number>
+          </property>
+          <property name="singleStep" >
+           <number>2</number>
+          </property>
+         </widget>
+        </item>
+        <item>
+         <spacer>
+          <property name="orientation" >
+           <enum>Qt::Horizontal</enum>
+          </property>
+          <property name="sizeType" >
+           <enum>QSizePolicy::Fixed</enum>
+          </property>
+          <property name="sizeHint" >
+           <size>
+            <width>30</width>
+            <height>20</height>
+           </size>
+          </property>
+         </spacer>
+        </item>
+        <item>
+         <widget class="QLabel" name="label_2" >
+          <property name="text" >
+           <string>Height:</string>
+          </property>
+         </widget>
+        </item>
+        <item>
+         <widget class="QSpinBox" name="spinBoxHeight" >
+          <property name="maximum" >
+           <number>2000</number>
+          </property>
+          <property name="minimum" >
+           <number>16</number>
+          </property>
+          <property name="singleStep" >
+           <number>2</number>
+          </property>
+         </widget>
+        </item>
+        <item>
+         <spacer>
+          <property name="orientation" >
+           <enum>Qt::Horizontal</enum>
+          </property>
+          <property name="sizeHint" >
+           <size>
+            <width>40</width>
+            <height>20</height>
+           </size>
+          </property>
+         </spacer>
+        </item>
+       </layout>
+      </item>
+      <item>
+       <widget class="QCheckBox" name="checkBoxRoundup" >
+        <property name="text" >
+         <string>Round to the Nearest Multiple of 16</string>
+        </property>
+       </widget>
+      </item>
+      <item>
+       <spacer>
+        <property name="orientation" >
+         <enum>Qt::Vertical</enum>
+        </property>
+        <property name="sizeType" >
+         <enum>QSizePolicy::Fixed</enum>
+        </property>
+        <property name="sizeHint" >
+         <size>
+          <width>312</width>
+          <height>4</height>
+         </size>
+        </property>
+       </spacer>
+      </item>
+      <item>
+       <layout class="QVBoxLayout" >
+        <property name="margin" >
+         <number>0</number>
+        </property>
+        <property name="spacing" >
+         <number>6</number>
+        </property>
+        <item>
+         <layout class="QHBoxLayout" >
+          <property name="margin" >
+           <number>0</number>
+          </property>
+          <property name="spacing" >
+           <number>12</number>
+          </property>
+          <item>
+           <layout class="QVBoxLayout" >
+            <property name="margin" >
+             <number>0</number>
+            </property>
+            <property name="spacing" >
+             <number>6</number>
+            </property>
+            <item>
+             <layout class="QHBoxLayout" >
+              <property name="margin" >
+               <number>0</number>
+              </property>
+              <property name="spacing" >
+               <number>6</number>
+              </property>
+              <item>
+               <widget class="QLabel" name="label_8" >
+                <property name="text" >
+                 <string>1%</string>
+                </property>
+               </widget>
+              </item>
+              <item>
+               <spacer>
+                <property name="orientation" >
+                 <enum>Qt::Horizontal</enum>
+                </property>
+                <property name="sizeHint" >
+                 <size>
+                  <width>40</width>
+                  <height>20</height>
+                 </size>
+                </property>
+               </spacer>
+              </item>
+              <item>
+               <widget class="QLabel" name="label_5" >
+                <property name="text" >
+                 <string>Percent</string>
+                </property>
+               </widget>
+              </item>
+              <item>
+               <spacer>
+                <property name="orientation" >
+                 <enum>Qt::Horizontal</enum>
+                </property>
+                <property name="sizeHint" >
+                 <size>
+                  <width>40</width>
+                  <height>20</height>
+                 </size>
+                </property>
+               </spacer>
+              </item>
+              <item>
+               <widget class="QLabel" name="label_9" >
+                <property name="text" >
+                 <string>200%</string>
+                </property>
+               </widget>
+              </item>
+             </layout>
+            </item>
+            <item>
+             <widget class="QSlider" name="horizontalSlider" >
+              <property name="minimum" >
+               <number>1</number>
+              </property>
+              <property name="maximum" >
+               <number>200</number>
+              </property>
+              <property name="value" >
+               <number>100</number>
+              </property>
+              <property name="orientation" >
+               <enum>Qt::Horizontal</enum>
+              </property>
+             </widget>
+            </item>
+           </layout>
+          </item>
+          <item>
+           <widget class="QSpinBox" name="percentageSpinBox" >
+            <property name="maximum" >
+             <number>200</number>
+            </property>
+            <property name="minimum" >
+             <number>1</number>
+            </property>
+            <property name="value" >
+             <number>100</number>
+            </property>
+           </widget>
+          </item>
+         </layout>
+        </item>
+        <item>
+         <layout class="QHBoxLayout" >
+          <property name="margin" >
+           <number>0</number>
+          </property>
+          <property name="spacing" >
+           <number>6</number>
+          </property>
+          <item>
+           <widget class="QLabel" name="label_10" >
+            <property name="text" >
+             <string>Error X / Y:</string>
+            </property>
+           </widget>
+          </item>
+          <item>
+           <widget class="QLabel" name="labelErrorXY" >
+            <property name="text" >
+             <string>0.00 / 0.00</string>
+            </property>
+           </widget>
+          </item>
+          <item>
+           <spacer>
+            <property name="orientation" >
+             <enum>Qt::Horizontal</enum>
+            </property>
+            <property name="sizeHint" >
+             <size>
+              <width>40</width>
+              <height>20</height>
+             </size>
+            </property>
+           </spacer>
+          </item>
+         </layout>
+        </item>
+       </layout>
+      </item>
+     </layout>
+    </widget>
+   </item>
+   <item>
+    <spacer>
+     <property name="orientation" >
+      <enum>Qt::Vertical</enum>
+     </property>
+     <property name="sizeType" >
+      <enum>QSizePolicy::Fixed</enum>
+     </property>
+     <property name="sizeHint" >
+      <size>
+       <width>332</width>
+       <height>6</height>
+      </size>
+     </property>
+    </spacer>
+   </item>
+   <item>
+    <layout class="QHBoxLayout" >
+     <property name="margin" >
+      <number>0</number>
+     </property>
+     <property name="spacing" >
+      <number>6</number>
+     </property>
+     <item>
+      <widget class="QLabel" name="label_6" >
+       <property name="text" >
+        <string>Resize Method:</string>
+       </property>
+      </widget>
+     </item>
+     <item>
+      <widget class="QComboBox" name="comboBoxAlgo" >
+       <item>
+        <property name="text" >
+         <string>Bilinear</string>
+        </property>
+       </item>
+       <item>
+        <property name="text" >
+         <string>Bicubic</string>
+        </property>
+       </item>
+       <item>
+        <property name="text" >
+         <string>Lanzcos3</string>
+        </property>
+       </item>
+      </widget>
+     </item>
+     <item>
+      <spacer>
+       <property name="orientation" >
+        <enum>Qt::Horizontal</enum>
+       </property>
+       <property name="sizeHint" >
+        <size>
+         <width>40</width>
+         <height>20</height>
+        </size>
+       </property>
+      </spacer>
+     </item>
+    </layout>
+   </item>
+   <item>
+    <spacer>
+     <property name="orientation" >
+      <enum>Qt::Vertical</enum>
+     </property>
+     <property name="sizeType" >
+      <enum>QSizePolicy::MinimumExpanding</enum>
+     </property>
+     <property name="sizeHint" >
+      <size>
+       <width>20</width>
+       <height>16</height>
+      </size>
+     </property>
+    </spacer>
+   </item>
+   <item>
+    <widget class="QDialogButtonBox" name="buttonBox" >
+     <property name="orientation" >
+      <enum>Qt::Horizontal</enum>
+     </property>
+     <property name="standardButtons" >
+      <set>QDialogButtonBox::Cancel|QDialogButtonBox::NoButton|QDialogButtonBox::Ok</set>
+     </property>
+    </widget>
+   </item>
+  </layout>
+ </widget>
+ <tabstops>
+  <tabstop>lockArCheckBox</tabstop>
+  <tabstop>comboBoxSource</tabstop>
+  <tabstop>comboBoxDestination</tabstop>
+  <tabstop>spinBoxWidth</tabstop>
+  <tabstop>spinBoxHeight</tabstop>
+  <tabstop>checkBoxRoundup</tabstop>
+  <tabstop>horizontalSlider</tabstop>
+  <tabstop>percentageSpinBox</tabstop>
+  <tabstop>comboBoxAlgo</tabstop>
+  <tabstop>buttonBox</tabstop>
+ </tabstops>
+ <resources/>
+ <connections>
+  <connection>
+   <sender>buttonBox</sender>
+   <signal>rejected()</signal>
+   <receiver>resizeDialog</receiver>
+   <slot>reject()</slot>
+   <hints>
+    <hint type="sourcelabel" >
+     <x>316</x>
+     <y>260</y>
+    </hint>
+    <hint type="destinationlabel" >
+     <x>286</x>
+     <y>274</y>
+    </hint>
+   </hints>
+  </connection>
+  <connection>
+   <sender>lockArCheckBox</sender>
+   <signal>toggled(bool)</signal>
+   <receiver>label_8</receiver>
+   <slot>setEnabled(bool)</slot>
+   <hints>
+    <hint type="sourcelabel" >
+     <x>184</x>
+     <y>117</y>
+    </hint>
+    <hint type="destinationlabel" >
+     <x>39</x>
+     <y>148</y>
+    </hint>
+   </hints>
+  </connection>
+  <connection>
+   <sender>lockArCheckBox</sender>
+   <signal>toggled(bool)</signal>
+   <receiver>label_5</receiver>
+   <slot>setEnabled(bool)</slot>
+   <hints>
+    <hint type="sourcelabel" >
+     <x>184</x>
+     <y>117</y>
+    </hint>
+    <hint type="destinationlabel" >
+     <x>150</x>
+     <y>148</y>
+    </hint>
+   </hints>
+  </connection>
+  <connection>
+   <sender>lockArCheckBox</sender>
+   <signal>toggled(bool)</signal>
+   <receiver>label_9</receiver>
+   <slot>setEnabled(bool)</slot>
+   <hints>
+    <hint type="sourcelabel" >
+     <x>184</x>
+     <y>117</y>
+    </hint>
+    <hint type="destinationlabel" >
+     <x>267</x>
+     <y>148</y>
+    </hint>
+   </hints>
+  </connection>
+  <connection>
+   <sender>lockArCheckBox</sender>
+   <signal>toggled(bool)</signal>
+   <receiver>horizontalSlider</receiver>
+   <slot>setEnabled(bool)</slot>
+   <hints>
+    <hint type="sourcelabel" >
+     <x>184</x>
+     <y>117</y>
+    </hint>
+    <hint type="destinationlabel" >
+     <x>156</x>
+     <y>164</y>
+    </hint>
+   </hints>
+  </connection>
+  <connection>
+   <sender>lockArCheckBox</sender>
+   <signal>toggled(bool)</signal>
+   <receiver>percentageSpinBox</receiver>
+   <slot>setEnabled(bool)</slot>
+   <hints>
+    <hint type="sourcelabel" >
+     <x>184</x>
+     <y>117</y>
+    </hint>
+    <hint type="destinationlabel" >
+     <x>317</x>
+     <y>155</y>
+    </hint>
+   </hints>
+  </connection>
+  <connection>
+   <sender>lockArCheckBox</sender>
+   <signal>toggled(bool)</signal>
+   <receiver>checkBoxRoundup</receiver>
+   <slot>setEnabled(bool)</slot>
+   <hints>
+    <hint type="sourcelabel" >
+     <x>184</x>
+     <y>95</y>
+    </hint>
+    <hint type="destinationlabel" >
+     <x>184</x>
+     <y>117</y>
+    </hint>
+   </hints>
+  </connection>
+  <connection>
+   <sender>lockArCheckBox</sender>
+   <signal>toggled(bool)</signal>
+   <receiver>label_10</receiver>
+   <slot>setEnabled(bool)</slot>
+   <hints>
+    <hint type="sourcelabel" >
+     <x>182</x>
+     <y>155</y>
+    </hint>
+    <hint type="destinationlabel" >
+     <x>55</x>
+     <y>251</y>
+    </hint>
+   </hints>
+  </connection>
+  <connection>
+   <sender>lockArCheckBox</sender>
+   <signal>toggled(bool)</signal>
+   <receiver>labelErrorXY</receiver>
+   <slot>setEnabled(bool)</slot>
+   <hints>
+    <hint type="sourcelabel" >
+     <x>182</x>
+     <y>155</y>
+    </hint>
+    <hint type="destinationlabel" >
+     <x>114</x>
+     <y>251</y>
+    </hint>
+   </hints>
+  </connection>
+  <connection>
+   <sender>lockArCheckBox</sender>
+   <signal>toggled(bool)</signal>
+   <receiver>label_4</receiver>
+   <slot>setEnabled(bool)</slot>
+   <hints>
+    <hint type="sourcelabel" >
+     <x>182</x>
+     <y>69</y>
+    </hint>
+    <hint type="destinationlabel" >
+     <x>46</x>
+     <y>95</y>
+    </hint>
+   </hints>
+  </connection>
+  <connection>
+   <sender>lockArCheckBox</sender>
+   <signal>toggled(bool)</signal>
+   <receiver>comboBoxSource</receiver>
+   <slot>setEnabled(bool)</slot>
+   <hints>
+    <hint type="sourcelabel" >
+     <x>182</x>
+     <y>69</y>
+    </hint>
+    <hint type="destinationlabel" >
+     <x>94</x>
+     <y>95</y>
+    </hint>
+   </hints>
+  </connection>
+  <connection>
+   <sender>lockArCheckBox</sender>
+   <signal>toggled(bool)</signal>
+   <receiver>label_3</receiver>
+   <slot>setEnabled(bool)</slot>
+   <hints>
+    <hint type="sourcelabel" >
+     <x>182</x>
+     <y>69</y>
+    </hint>
+    <hint type="destinationlabel" >
+     <x>188</x>
+     <y>95</y>
+    </hint>
+   </hints>
+  </connection>
+  <connection>
+   <sender>lockArCheckBox</sender>
+   <signal>toggled(bool)</signal>
+   <receiver>comboBoxDestination</receiver>
+   <slot>setEnabled(bool)</slot>
+   <hints>
+    <hint type="sourcelabel" >
+     <x>182</x>
+     <y>69</y>
+    </hint>
+    <hint type="destinationlabel" >
+     <x>247</x>
+     <y>95</y>
+    </hint>
+   </hints>
+  </connection>
+ </connections>
+</ui>

Added: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/resize/swScaleResize.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/resize/swScaleResize.cpp	2009-11-15 16:47:13 UTC (rev 5506)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/resize/swScaleResize.cpp	2009-11-15 17:35:04 UTC (rev 5507)
@@ -0,0 +1,264 @@
+/** *************************************************************************
+                    \fn       swScaleResizeFilter.cpp  
+                    \brief simplest of all video filters, it does nothing
+
+    copyright            : (C) 2009 by mean
+
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+
+#include "ADM_default.h"
+#include "ADM_coreVideoFilterInternal.h"
+#include "DIA_factory.h"
+extern "C" {
+#include "ADM_ffmpeg/libavcodec/avcodec.h"
+#include "ADM_ffmpeg/libavutil/avutil.h"
+#include "ADM_ffmpeg/libswscale/swscale.h"
+}
+#include "swresize.h"
+#include "swresize_desc.cpp"
+
+typedef struct alg
+{
+					int in;
+					char *name;
+}alg;
+#define DECLARE(y) {SWS_##y,(char *)#y}
+
+/**
+	Convert mplayer-resize numbering <--> avidemux one
+
+*/
+alg algs[]={
+				DECLARE(BILINEAR),
+				DECLARE(BICUBIC),
+				DECLARE(LANCZOS)
+		};
+
+
+/**
+    \class swScaleResizeFilter
+*/
+class swScaleResizeFilter : public  ADM_coreVideoFilter
+{
+protected:
+            
+				SwsContext	*_context;
+				bool        reset(uint32_t nw, uint32_t old,uint32_t algo);
+				bool        clean( void );
+                ADMImage    *original;
+                swresize    configuration;
+
+public:
+                    swScaleResizeFilter(ADM_coreVideoFilter *previous,CONFcouple *conf);
+                    ~swScaleResizeFilter();
+
+       virtual const char   *getConfiguration(void);                   /// Return  current configuration as a human readable string
+       virtual bool         getFrame(uint32_t frame,ADMImage *image);    /// Return the next image
+       virtual FilterInfo  *getInfo(void);                             /// Return picture parameters after this filter
+	   virtual bool         getCoupledConf(CONFcouple **couples) ;   /// Return the current filter configuration
+       virtual bool         configure(void) ;             /// Start graphical user interface
+};
+
+// Add the hook to make it valid plugin
+DECLARE_VIDEO_FILTER(   swScaleResizeFilter,   // Class
+                        1,0,0,              // Version
+                        ADM_UI_ALL,         // UI
+                        VF_TRANSFORM,            // Category
+                        "swscale",            // internal name (must be uniq!)
+                        "swsResize",            // Display name
+                        "swScale Resizer." // Description
+                    );
+
+// Now implements the interesting parts
+/**
+    \fn swScaleResizeFilter
+    \brief constructor
+*/
+swScaleResizeFilter::swScaleResizeFilter(  ADM_coreVideoFilter *in,CONFcouple *setup) : ADM_coreVideoFilter(in,setup)
+{
+UNUSED_ARG(setup);
+
+    original=new ADMImage(in->getInfo()->width,in->getInfo()->height);
+    if(!setup || !ADM_paramLoad(setup,swresize_param,&configuration))
+    {
+        // Default value
+        configuration.width=info.width;
+        configuration.height=info.height;
+        configuration.algo=SWS_BILINEAR;
+        configuration.sourceAR=1;
+        configuration.targetAR=1;
+    }
+    info.width=configuration.width;
+    info.height=configuration.height;
+    _context=NULL;
+	reset(configuration.width,configuration.height,configuration.algo);
+}
+/**
+    \fn swScaleResizeFilter
+    \brief destructor
+*/
+swScaleResizeFilter::~swScaleResizeFilter()
+{
+        if(original) delete original;
+        original=NULL;  
+        clean();
+}
+
+/**
+    \fn getFrame
+    \brief Get a processed frame
+*/
+bool swScaleResizeFilter::getFrame(uint32_t frame,ADMImage *image)
+{
+    // since we do nothing, just get the output of previous filter
+    if(false==previousFilter->getFrame(frame,original))
+    {
+        ADM_warning("Vertical flip : Cannot get frame\n");
+        return false;
+    }
+    uint8_t *src[3];
+    uint8_t *dst[3];
+    int ssrc[3];
+    int ddst[3];
+
+    uint32_t page;
+
+    page=original->_width*original->_height;
+    src[0]=YPLANE(original);
+    src[1]=UPLANE(original);
+    src[2]=VPLANE(original);
+
+    ssrc[0]=original->_width;
+    ssrc[1]=ssrc[2]=original->_width>>1;
+
+    page=info.width*info.height;
+    dst[0]=YPLANE(image);
+    dst[1]=UPLANE(image);
+    dst[2]=VPLANE(image);
+    ddst[0]=info.width;
+    ddst[1]=ddst[2]=info.width>>1;
+
+    sws_scale(_context,src,ssrc,0,original->_height,dst,ddst);
+    image->copyInfo(original);
+// Fixme change A/R ?
+return true;
+}
+/**
+    \fn getCoupledConf
+    \brief Return our current configuration as couple name=value
+*/
+bool         swScaleResizeFilter::getCoupledConf(CONFcouple **couples)
+{
+    return ADM_paramSave(couples, swresize_param,&configuration);
+}
+/**
+    \fn getConfiguration
+    \brief Return current setting as a string
+*/
+const char *swScaleResizeFilter::getConfiguration(void)
+{
+    static char conf[80];
+    conf[0]=0;
+    snprintf(conf,80,"swscale Resize : %"LU"x%"LU" => %"LU"x%"LU", algo %"LU"\n",
+                previousFilter->getInfo()->width,
+                previousFilter->getInfo()->height,
+                configuration.width, configuration.height,configuration.algo);
+    return conf;
+}
+/**
+    \fn getInfo
+*/
+FilterInfo  *swScaleResizeFilter::getInfo(void)
+{
+    return &info;
+}
+/**
+    \fn clean
+    \brief delete resizer
+*/
+bool swScaleResizeFilter::clean(void)
+{
+		if(_context)
+		{
+			sws_freeContext(_context);
+		}
+		_context=NULL;
+		return true;
+}
+/**
+    \fn reset
+    \brief reset resizer
+*/
+
+bool swScaleResizeFilter::reset(uint32_t nw, uint32_t old,uint32_t algo)
+{
+ 				 SwsFilter 		    *srcFilter=NULL;
+				 SwsFilter		    *dstFilter=NULL;
+				 int 			   flags=0;
+
+
+				clean();
+                flags=algo;
+                switch(flags)
+                {
+                    case 0: //bilinear
+                            flags=SWS_BILINEAR;break;
+                    case 1: //bicubic
+                            flags=SWS_BICUBIC;break;
+                    case 2: //Lanczos
+                            flags=SWS_LANCZOS;break;
+                    default:ADM_assert(0);
+
+                }
+#ifdef ADM_CPU_X86		
+		#define ADD(x,y) if( CpuCaps::has##x()) flags|=SWS_CPU_CAPS_##y;
+		ADD(MMX,MMX);		
+		ADD(3DNOW,3DNOW);
+		ADD(MMXEXT,MMX2);
+#endif	
+#ifdef ADM_CPU_ALTIVEC
+		flags|=SWS_CPU_CAPS_ALTIVEC;
+#endif
+                _context=sws_getContext(
+                        previousFilter->getInfo()->width,previousFilter->getInfo()->height,
+                    PIX_FMT_YUV420P,
+                    nw,old,
+                    PIX_FMT_YUV420P,
+                        flags, srcFilter, dstFilter,NULL);
+
+				if(!_context) return 0;
+				return 1;
+
+
+}
+/**
+    \fn configure
+
+*/
+bool         swScaleResizeFilter::configure(void) 
+{
+    // Simple resampler using dialogFactory
+#define PX(x) &(configuration.x)
+        diaElemUInteger  W(PX(width),"Width", 16, 4096,"");
+        diaElemUInteger  H(PX(height),"Height", 16, 4096,"");
+        diaElem *tabs[]={&W,&H};
+        if( diaFactoryRun(("SwScaler Resize"),2,tabs))
+        {
+            // Update info
+            info.height=configuration.height;
+            info.width=configuration.width;
+            reset(info.width, info.height,configuration.algo);
+            return true;
+        }
+        return false;
+}
+//EOF

Added: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/resize/swresize.conf
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/resize/swresize.conf	2009-11-15 16:47:13 UTC (rev 5506)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/resize/swresize.conf	2009-11-15 17:35:04 UTC (rev 5507)
@@ -0,0 +1,5 @@
+uint32_t:width
+uint32_t:height
+uint32_t:algo
+uint32_t:sourceAR
+uint32_t:targetAR

Added: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/resize/swresize.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/resize/swresize.h	2009-11-15 16:47:13 UTC (rev 5506)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/resize/swresize.h	2009-11-15 17:35:04 UTC (rev 5507)
@@ -0,0 +1,12 @@
+// Automatically generated, do not edit!
+#ifndef ADM_swresize_CONF_H
+#define ADM_swresize_CONF_H
+typedef struct {
+   uint32_t width;
+   uint32_t height;
+   uint32_t algo;
+   uint32_t sourceAR;
+   uint32_t targetAR;
+}swresize;
+#endif //swresize
+//EOF

Added: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/resize/swresize_desc.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/resize/swresize_desc.cpp	2009-11-15 16:47:13 UTC (rev 5506)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/resize/swresize_desc.cpp	2009-11-15 17:35:04 UTC (rev 5507)
@@ -0,0 +1,9 @@
+// Automatically generated, do not edit!
+const ADM_paramList swresize_param[]={
+ {"width",offsetof( swresize,width),"uint32_t",ADM_param_uint32_t},
+ {"height",offsetof( swresize,height),"uint32_t",ADM_param_uint32_t},
+ {"algo",offsetof( swresize,algo),"uint32_t",ADM_param_uint32_t},
+ {"sourceAR",offsetof( swresize,sourceAR),"uint32_t",ADM_param_uint32_t},
+ {"targetAR",offsetof( swresize,targetAR),"uint32_t",ADM_param_uint32_t},
+{NULL,0,NULL}
+};

Deleted: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/verticalFlip/ADM_vidFlipV.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/verticalFlip/ADM_vidFlipV.cpp	2009-11-15 16:47:13 UTC (rev 5506)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/verticalFlip/ADM_vidFlipV.cpp	2009-11-15 17:35:04 UTC (rev 5507)
@@ -1,130 +0,0 @@
-/***************************************************************************
-                          ADM_vidFlipV.cpp  -  description
-                             -------------------
-    begin                : Wed Nov 6 2002
-    copyright            : (C) 2002 by mean
-    email                : fixounet at free.fr
- ***************************************************************************/
-
-/***************************************************************************
- *                                                                         *
- *   This program is free software; you can redistribute it and/or modify  *
- *   it under the terms of the GNU General Public License as published by  *
- *   the Free Software Foundation; either version 2 of the License, or     *
- *   (at your option) any later version.                                   *
- *                                                                         *
- ***************************************************************************/
-
-#include "ADM_default.h"
-#include "ADM_videoFilterDynamic.h"
-//********** Class Definition ************
- class ADMVideoFlipV : public AVDMGenericVideoStream 
- {
-
-protected:
-	AVDMGenericVideoStream *_in;
-	virtual char *printConf(void);
-
-public:
-
-	ADMVideoFlipV(AVDMGenericVideoStream *in, CONFcouple *setup);
-	virtual ~ADMVideoFlipV();
-	virtual uint8_t getFrameNumberNoAlloc(uint32_t frame, uint32_t *len,
-			ADMImage *data, uint32_t *flags);
-	virtual uint8_t configure(AVDMGenericVideoStream *instream) 
-	{
-		UNUSED_ARG(instream);
-		return 1;
-	};
-};
-
-//********** Register chunk ************
-static FILTER_PARAM flipParam={0,{""}};
-
-
-VF_DEFINE_FILTER(ADMVideoFlipV,flipParam,
-				flipV,
-				QT_TR_NOOP("Vertical flip"),
-				1,
-				VF_TRANSFORM,
-				QT_TR_NOOP("Vertically flip the picture."));
-//************************************
-char *ADMVideoFlipV::printConf( void )
-{
- 	ADM_FILTER_DECLARE_CONF(" V-Flip");
-        
-}
-
-ADMVideoFlipV::ADMVideoFlipV(  AVDMGenericVideoStream *in,CONFcouple *setup)
-{
-    UNUSED_ARG(setup);
- 	_in=in;		
-   	memcpy(&_info,_in->getInfo(),sizeof(_info)); 	
-  	_info.encoding=1;	
-	_uncompressed=new ADMImage(_in->getInfo()->width,_in->getInfo()->height);
-	ADM_assert(_uncompressed);    	  	
-}
-ADMVideoFlipV::~ADMVideoFlipV()
-{
- 	delete  _uncompressed;	
-	_uncompressed=NULL;
-  
-}
-uint8_t ADMVideoFlipV::getFrameNumberNoAlloc(uint32_t frame,
-				uint32_t *len,
-   				ADMImage *data,
-				uint32_t *flags)
-{
-
-	if (frame>= _info.nb_frames)
-		return 0;
-	// read uncompressed frame
-	if (!_in->getFrameNumberNoAlloc(frame, len, _uncompressed, flags))
-		return 0;
-
-	uint8_t *in, *out;
-	uint32_t stride=_info.width;
-	uint32_t h=_info.height;
-	uint32_t page, qpage;
-
-	page=stride*h;
-	qpage=page>>2;
-
-	in=YPLANE(_uncompressed);
-	out=YPLANE(data)+(h-1)*stride;
-	// flip y
-	for (uint32_t y=h; y>0; y--) 
-	{
-		memcpy(out,in,stride);
-		in+=stride;
-		out-=stride;
-	}
-	// Flip U & V			         
-	stride>>=1;
-	in=UPLANE(_uncompressed);
-	out=UPLANE(data)+qpage-stride;
-	// flip u
-	for (uint32_t y=h>>1; y>0; y--) 
-	{
-		memcpy(out,in,stride);
-		in+=stride;
-		out-=stride;
-	}
-	in=VPLANE(_uncompressed);
-	out=VPLANE(data)+qpage-stride;
-
-	// flip u
-	for (uint32_t y=h>>1; y>0; y--)
-	{
-		memcpy(out,in,stride);
-		in+=stride;
-		out-=stride;
-	}
-	data->copyInfo(_uncompressed);
-	return 1;
-}
-//EOF
-
-
-
-



From mean at mail.berlios.de  Mon Nov 16 07:11:54 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Mon, 16 Nov 2009 07:11:54 +0100
Subject: [Avidemux-svn-commit] r5508 -
	branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/resize
Message-ID: <200911160611.nAG6Bsov001928@sheep.berlios.de>

Author: mean
Date: 2009-11-16 07:11:52 +0100 (Mon, 16 Nov 2009)
New Revision: 5508

Modified:
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/resize/CMakeLists.txt
Log:
[resize] Link to swscale

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/resize/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/resize/CMakeLists.txt	2009-11-15 17:35:04 UTC (rev 5507)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/resize/CMakeLists.txt	2009-11-16 06:11:52 UTC (rev 5508)
@@ -4,6 +4,6 @@
 SET(ADM_vf_swscaleResize_SRCS swScaleResize.cpp)
 
 ADD_LIBRARY(ADM_vf_swscaleResize SHARED ${ADM_vf_swscaleResize_SRCS})
-
+TARGET_LINK_LIBRARIES(ADM_vf_swscaleResize ADM_libswscale6)
 INIT_VIDEO_FILTER(ADM_vf_swscaleResize)
 INSTALL_VIDEO_FILTER(ADM_vf_swscaleResize)



From mean at mail.berlios.de  Mon Nov 16 07:11:58 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Mon, 16 Nov 2009 07:11:58 +0100
Subject: [Avidemux-svn-commit] r5509 -
	branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor
Message-ID: <200911160611.nAG6BwxI002236@sheep.berlios.de>

Author: mean
Date: 2009-11-16 07:11:58 +0100 (Mon, 16 Nov 2009)
New Revision: 5509

Modified:
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edPtsDts.cpp
Log:
[Editor] Incomplete PTS/DTS filler

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edPtsDts.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edPtsDts.cpp	2009-11-16 06:11:52 UTC (rev 5508)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edPtsDts.cpp	2009-11-16 06:11:58 UTC (rev 5509)
@@ -91,5 +91,89 @@
 */
 bool setMpeg4PtsFromDts(vidHeader *hdr,uint64_t timeIncrementUs)
 {
+    bool bframe=false;
+    aviInfo info;
+    uint32_t flags;
+    hdr->getVideoInfo(&info);
+
+    uint64_t lastPts=ADM_NO_PTS;
+    uint64_t lastDts=ADM_NO_PTS;
+    // Scan to see if we have b-frames
+    for(int i=0;i<info.nb_frames;i++)
+    {
+        hdr->getFlags(i,&flags);
+        if(flags & AVI_B_FRAME)
+        {
+            bframe=true;
+            break;
+        }
+    }
+    if(false==bframe)
+    {
+        ADM_info("No B frame found, settings PTS=DTS\n");
+        return setPtsEqualDts(hdr,timeIncrementUs);
+    }
+#if 0
+    for(int i=0;i<info.nb_frames;i++)
+    {
+        uint64_t pts,dts;
+        if(true!=hdr->getPtsDts(i,&pts,&dts))
+        {
+            printf("[Editor] GetPtsDts failed for frame %"LU"\n",i);
+            return false;
+        }
+        int k=0;
+        if(pts==ADM_NO_PTS) k+=GOT_NO_PTS;
+        if(dts==ADM_NO_PTS) k+=GOT_NO_DTS;
+        switch(k)
+        {
+            case GOT_BOTH : // Got both
+                    lastPts=pts;
+                    lastDts=dts;
+                continue;            
+                break;
+            case GOT_NONE: // Got none
+                {
+                        if(lastDts!=ADM_NO_PTS)
+                        {
+                            lastDts+=timeIncrementUs; // Say this one = previous + timeIncrement
+                            dts=lastDts;
+                        }else
+                            continue;   // We dont have a previous skip that one
+                }
+                break;
+            case GOT_NO_DTS :  // got only pts
+                        if(lastDts!=ADM_NO_PTS)
+                        {
+                            lastDts+=timeIncrementUs; // Say this one = previous + timeIncrement
+                            dts=lastDts;
+                        }else
+                            continue;   // We dont have a previous skip that one
+                        //
+                        ADM_assert(dts<=pts);
+                // Dts from PTS
+                break;
+            case GOT_NO_PTS: // got only dts
+                lastDts=dts;
+                {
+                    uint32_t flags;
+                    hdr->getFlags(i,&flags);
+                    if(flags & AVI_B_FRAME) pts=dts;
+                }
+                // Pts from DTS
+                break;
+            default:
+                ADM_assert(0);
+                break;
+        }
+        ADM_assert(dts<=pts);
+        // update
+        if(true!=hdr->setPtsDts(i,pts,dts))
+        {
+            printf("[Editor] SetPtsDts failed for frame %"LU"\n",i);
+            return false;
+        }
+    }
+#endif
     return true;
 }



From mean at mail.berlios.de  Mon Nov 16 20:06:42 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Mon, 16 Nov 2009 20:06:42 +0100
Subject: [Avidemux-svn-commit] r5511 -
	branches/avidemux_2.6_branch_mean/avidemux_core/ADM_core/src
Message-ID: <200911161906.nAGJ6gdd020152@sheep.berlios.de>

Author: mean
Date: 2009-11-16 20:06:42 +0100 (Mon, 16 Nov 2009)
New Revision: 5511

Modified:
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_core/src/ADM_misc.cpp
Log:
[Core] Better print out

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_core/src/ADM_misc.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_core/src/ADM_misc.cpp	2009-11-16 19:06:40 UTC (rev 5510)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_core/src/ADM_misc.cpp	2009-11-16 19:06:42 UTC (rev 5511)
@@ -36,6 +36,8 @@
 #include "ADM_vidMisc.h"
 #undef fopen
 #undef fclose
+#warning FIXME
+#define ADM_NO_PTS 0xFFFFFFFFFFFFFFFFLL // FIXME
 //
 //    Sleep for n ms
 //
@@ -201,8 +203,13 @@
 static char buffer[256];
 uint32_t ms=(uint32_t)(ams/1000);
     uint32_t hh,mm,ss,mms;
-    ms2time(ms,&hh,&mm,&ss,&mms);
-    sprintf(buffer," %02"LU":%02"LU":%02"LU",%03"LU" ",hh,mm,ss,mms);
+    if(ams==ADM_NO_PTS)
+        sprintf(buffer," xx:xx:xx,xxx ",hh,mm,ss,mms);
+    else    
+    {
+        ms2time(ms,&hh,&mm,&ss,&mms);
+        sprintf(buffer," %02"LU":%02"LU":%02"LU",%03"LU" ",hh,mm,ss,mms);
+    }
     return buffer;
 
 }



From mean at mail.berlios.de  Mon Nov 16 20:06:41 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Mon, 16 Nov 2009 20:06:41 +0100
Subject: [Avidemux-svn-commit] r5510 - in
	branches/avidemux_2.6_branch_mean/avidemux/common: ADM_editor
	ADM_script
Message-ID: <200911161906.nAGJ6f12020142@sheep.berlios.de>

Author: mean
Date: 2009-11-16 20:06:40 +0100 (Mon, 16 Nov 2009)
New Revision: 5510

Modified:
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edit.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edit.hxx
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script/ADM_JSAvidemuxVideo.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script/ADM_JSAvidemuxVideo.h
Log:
[JS] Add dumptiming debug helper

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edit.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edit.cpp	2009-11-16 06:11:58 UTC (rev 5509)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edit.cpp	2009-11-16 19:06:40 UTC (rev 5510)
@@ -38,6 +38,7 @@
 
 //#include "ADM_outputfmt.h"
 #include "ADM_edPtsDts.h"
+#include "ADM_vidMisc.h"
 
 vidHeader *ADM_demuxerSpawn(uint32_t magic,const char *name);
 
@@ -584,6 +585,29 @@
     _segments.dump();
     return true;
 }
+/**
+    \fn dumpTiming
+*/
+bool               ADM_Composer::dumpTiming(void)
+{
+    if(!_segments.getNbRefVideos()) return true;
+    _VIDEOS *v=_segments.getRefVideo(0);
+   
+    aviInfo info;
+    v->_aviheader->getVideoInfo(&info);
+    int nb=info.nb_frames;
+    for(int i=0;i<nb;i++)
+    {
+        uint64_t pts,dts;
+        uint32_t flags;
 
+            v->_aviheader->getFlags(i,&flags);
+            v->_aviheader->getPtsDts(i,&pts,&dts);
+            printf("%"LU" flags:%04"LX" ",i,flags);
+            printf("pts :%s ",ADM_us2plain(pts));
+            printf("dts :%s \n",ADM_us2plain(dts));
+    }
+    return true;
+}
 //
 //

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edit.hxx
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edit.hxx	2009-11-16 06:11:58 UTC (rev 5509)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edit.hxx	2009-11-16 19:06:40 UTC (rev 5510)
@@ -209,6 +209,7 @@
                     bool                addSegment(uint32_t ref, uint64_t startRef, uint64_t duration);
                     bool                clearSegment(void);
                     bool                dumpEditing(void);
+                    bool                dumpTiming(void);
 /******************************* /Editing **********************************/										
 /******************************* Misc ************************************/				
                     uint8_t             setEnv(_ENV_EDITOR_FLAGS newflag);

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script/ADM_JSAvidemuxVideo.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script/ADM_JSAvidemuxVideo.cpp	2009-11-16 06:11:58 UTC (rev 5509)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script/ADM_JSAvidemuxVideo.cpp	2009-11-16 19:06:40 UTC (rev 5510)
@@ -68,6 +68,7 @@
 
 
     { "dumpEditing", dumpEditing,0,0,0},
+    { "dumpTiming", dumpTiming,0,0,0},
 	{ 0 }
 };
 /*********************************/
@@ -570,6 +571,25 @@
         return JS_TRUE;
 }// end PostProcess
 /**
+    \fn dumpTiming
+    \brief dump segment, video & all
+*/
+JSBool ADM_JSAvidemuxVideo::dumpTiming(JSContext *cx, JSObject *obj, uintN argc, 
+                                       jsval *argv, jsval *rval)
+{// begin PostProcess
+uint32_t info;
+uint32_t frame;
+uint32_t sz;
+        if(argc != 0)
+          return JS_FALSE;
+  
+        enterLock();
+        video_body->dumpTiming();
+        leaveLock(); 
+        
+        return JS_TRUE;
+}// end PostProcess
+/**
     \fn A_setVideoCodec
 */
 bool A_setVideoCodec(const char *nm)

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script/ADM_JSAvidemuxVideo.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script/ADM_JSAvidemuxVideo.h	2009-11-16 06:11:58 UTC (rev 5509)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script/ADM_JSAvidemuxVideo.h	2009-11-16 19:06:40 UTC (rev 5510)
@@ -46,6 +46,7 @@
         static JSBool getFrameSize(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval);
 	static JSBool getFrameType(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval);
 	static JSBool dumpEditing(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval);
+	static JSBool dumpTiming(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval);
 
 
 	static JSPropertySpec avidemuxvideo_properties[];



From mean at mail.berlios.de  Mon Nov 16 20:06:44 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Mon, 16 Nov 2009 20:06:44 +0100
Subject: [Avidemux-svn-commit] r5512 -
	branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS
Message-ID: <200911161906.nAGJ6i3V020162@sheep.berlios.de>

Author: mean
Date: 2009-11-16 20:06:43 +0100 (Mon, 16 Nov 2009)
New Revision: 5512

Modified:
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/ADM_tsComputeTimeStamp.cpp
Log:
[TS] Handle wrapping (video)

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/ADM_tsComputeTimeStamp.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/ADM_tsComputeTimeStamp.cpp	2009-11-16 19:06:42 UTC (rev 5511)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/ADM_tsComputeTimeStamp.cpp	2009-11-16 19:06:43 UTC (rev 5512)
@@ -26,7 +26,15 @@
 TODO / FIXME : Handle wrap
 TODO / FIXME : Handle PTS reordering 
 */
-
+static uint64_t wrapIt(uint64_t val, uint64_t start)
+{
+    if(val==ADM_NO_PTS) return val;
+    if(val>=start) return val-start;
+    uint64_t r;
+        r=val+(1LL<<32);
+        r-=start;
+        return r;
+}
 bool tsHeader::updatePtsDts(void)
 {
         uint64_t lastDts=0,lastPts=0,dtsIncrement=0;
@@ -100,8 +108,8 @@
         for(int i=0;i<ListOfFrames.size();i++)
         {
             dmxFrame *f=ListOfFrames[i];
-            if(f->pts!=ADM_NO_PTS) f->pts-=startDts;
-            if(f->dts!=ADM_NO_PTS) f->dts-=startDts;
+            f->pts=wrapIt(f->pts,startDts);
+            f->dts=wrapIt(f->dts,startDts);
         }
         // Audio start at 0 too
         for(int i=0;i<listOfAudioTracks.size();i++)



From mean at mail.berlios.de  Mon Nov 16 20:06:45 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Mon, 16 Nov 2009 20:06:45 +0100
Subject: [Avidemux-svn-commit] r5513 -
	branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS
Message-ID: <200911161906.nAGJ6jA6020172@sheep.berlios.de>

Author: mean
Date: 2009-11-16 20:06:44 +0100 (Mon, 16 Nov 2009)
New Revision: 5513

Modified:
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/ADM_tsAudio.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/ADM_tsComputeTimeStamp.cpp
Log:
[TS] Handle wrap (audio part)

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/ADM_tsAudio.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/ADM_tsAudio.cpp	2009-11-16 19:06:43 UTC (rev 5512)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/ADM_tsAudio.cpp	2009-11-16 19:06:44 UTC (rev 5513)
@@ -113,6 +113,10 @@
 uint64_t ADM_tsAccess::timeConvert(uint64_t x)
 {
     if(x==ADM_NO_PTS) return ADM_NO_PTS;
+    if(x<dtsOffset)
+    {
+        x+=1LL<<32;
+    }
     x=x-dtsOffset;
     x=x*1000;
     x/=90;

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/ADM_tsComputeTimeStamp.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/ADM_tsComputeTimeStamp.cpp	2009-11-16 19:06:43 UTC (rev 5512)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/ADM_tsComputeTimeStamp.cpp	2009-11-16 19:06:44 UTC (rev 5513)
@@ -26,7 +26,7 @@
 TODO / FIXME : Handle wrap
 TODO / FIXME : Handle PTS reordering 
 */
-static uint64_t wrapIt(uint64_t val, uint64_t start)
+uint64_t wrapIt(uint64_t val, uint64_t start)
 {
     if(val==ADM_NO_PTS) return val;
     if(val>=start) return val-start;



From mean at mail.berlios.de  Mon Nov 16 20:06:46 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Mon, 16 Nov 2009 20:06:46 +0100
Subject: [Avidemux-svn-commit] r5514 -
	branches/avidemux_2.6_branch_mean/autononreg/videofunc
Message-ID: <200911161906.nAGJ6kaG020200@sheep.berlios.de>

Author: mean
Date: 2009-11-16 20:06:46 +0100 (Mon, 16 Nov 2009)
New Revision: 5514

Added:
   branches/avidemux_2.6_branch_mean/autononreg/videofunc/dumpTiming.js
Log:
[JS] New simple function app.video.dumpTiming

Added: branches/avidemux_2.6_branch_mean/autononreg/videofunc/dumpTiming.js
===================================================================
--- branches/avidemux_2.6_branch_mean/autononreg/videofunc/dumpTiming.js	2009-11-16 19:06:44 UTC (rev 5513)
+++ branches/avidemux_2.6_branch_mean/autononreg/videofunc/dumpTiming.js	2009-11-16 19:06:46 UTC (rev 5514)
@@ -0,0 +1,5 @@
+//AD  <- These first 4 characters need to be the first 4 characters to identify the ECMAScript file to Avidemux
+var app = new Avidemux();
+app.video.dumpTiming();
+/* End of test
+*/



From mean at mail.berlios.de  Tue Nov 17 07:22:01 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Tue, 17 Nov 2009 07:22:01 +0100
Subject: [Avidemux-svn-commit] r5515 -
	branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegPS
Message-ID: <200911170622.nAH6M1nu009850@sheep.berlios.de>

Author: mean
Date: 2009-11-17 07:21:59 +0100 (Tue, 17 Nov 2009)
New Revision: 5515

Modified:
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegPS/ADM_psPlugin.cpp
Log:
[PS] Raise a bit the threshold to avoid mis-detection

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegPS/ADM_psPlugin.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegPS/ADM_psPlugin.cpp	2009-11-16 19:06:46 UTC (rev 5514)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegPS/ADM_psPlugin.cpp	2009-11-17 06:21:59 UTC (rev 5515)
@@ -114,7 +114,7 @@
         if(code==0xE0) nbMatch++;
     }
     printf(" match :%d / %d (probeSize:%d)\n",nbMatch,nbPacket,bufferSize);
-    if(nbMatch>nbPacket/3)
+    if(nbMatch*10>nbPacket*4)
         return true;
     return false;
 }



From mean at mail.berlios.de  Tue Nov 17 19:27:08 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Tue, 17 Nov 2009 19:27:08 +0100
Subject: [Avidemux-svn-commit] r5516 -
	branches/avidemux_2.5_branch_gruntster/po
Message-ID: <200911171827.nAHIR8rT030984@sheep.berlios.de>

Author: mean
Date: 2009-11-17 19:26:52 +0100 (Tue, 17 Nov 2009)
New Revision: 5516

Added:
   branches/avidemux_2.5_branch_gruntster/po/zh_CN.po
Log:
[I18N] Traditional chinese by zdw

Added: branches/avidemux_2.5_branch_gruntster/po/zh_CN.po
===================================================================
--- branches/avidemux_2.5_branch_gruntster/po/zh_CN.po	2009-11-17 06:21:59 UTC (rev 5515)
+++ branches/avidemux_2.5_branch_gruntster/po/zh_CN.po	2009-11-17 18:26:52 UTC (rev 5516)
@@ -0,0 +1,972 @@
+??
+
+
+
+
+
+?
+
+
+
+?
+
+
+?
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+J
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+?
+?
+?
+
+
+
+
+
+?
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+6
+:
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+c
+
+
+
+
+
+
+
+
+
+
+
+
+
+j
+
+
+
+
+
+
+

+

+
+
+

+ Reuse the existing log-file ?
+
+Do you want to replace it?
+
+You can either resume or Abort it.
+all above values are normalized to 256!
+
+Click OK to generate debug information. This may take a few minutes to complete.
 DV codec only accepts 720*576 at 25
+
+You can do it later with "Audio -> Build VBR Time Map".
+under the terms of the GNU General Public License version 2
+as published by the Free Software Foundation.
+
+		    GNU GENERAL PUBLIC LICENSE
+		       Version 2, June 1991
+
+ Copyright (C) 1989, 1991 Free Software Foundation, Inc.
+                       51 Franklin St, Fifth Floor, Boston, MA  02110-1301  USA
+ Everyone is permitted to copy and distribute verbatim copies
+ of this license document, but changing it is not allowed.
+
+			    Preamble
+
+  The licenses for most software are designed to take away your
+freedom to share and change it.  By contrast, the GNU General Public
+License is intended to guarantee your freedom to share and change free
+software--to make sure the software is free for all its users.  This
+General Public License applies to most of the Free Software
+Foundation's software and to any other program whose authors commit to
+using it.  (Some other Free Software Foundation software is covered by
+the GNU Library General Public License instead.)  You can apply it to
+your programs, too.
+
+  When we speak of free software, we are referring to freedom, not
+price.  Our General Public Licenses are designed to make sure that you
+have the freedom to distribute copies of free software (and charge for
+this service if you wish), that you receive source code or can get it
+if you want it, that you can change the software or use pieces of it
+in new free programs; and that you know you can do these things.
+
+  To protect your rights, we need to make restrictions that forbid
+anyone to deny you these rights or to ask you to surrender the rights.
+These restrictions translate to certain responsibilities for you if you
+distribute copies of the software, or if you modify it.
+
+  For example, if you distribute copies of such a program, whether
+gratis or for a fee, you must give the recipients all the rights that
+you have.  You must make sure that they, too, receive or can get the
+source code.  And you must show them these terms so they know their
+rights.
+
+  We protect your rights with two steps: (1) copyright the software, and
+(2) offer you this license which gives you legal permission to copy,
+distribute and/or modify the software.
+
+  Also, for each author's protection and ours, we want to make certain
+that everyone understands that there is no warranty for this free
+software.  If the software is modified by someone else and passed on, we
+want its recipients to know that what they have is not the original, so
+that any problems introduced by others will not reflect on the original
+authors' reputations.
+
+  Finally, any free program is threatened constantly by software
+patents.  We wish to avoid the danger that redistributors of a free
+program will individually obtain patent licenses, in effect making the
+program proprietary.  To prevent this, we have made it clear that any
+patent must be licensed for everyone's free use or not licensed at all.
+
+  The precise terms and conditions for copying, distribution and
+modification follow.
+
+		    GNU GENERAL PUBLIC LICENSE
+   TERMS AND CONDITIONS FOR COPYING, DISTRIBUTION AND MODIFICATION
+
+  0. This License applies to any program or other work which contains
+a notice placed by the copyright holder saying it may be distributed
+under the terms of this General Public License.  The "Program", below,
+refers to any such program or work, and a "work based on the Program"
+means either the Program or any derivative work under copyright law:
+that is to say, a work containing the Program or a portion of it,
+either verbatim or with modifications and/or translated into another
+language.  (Hereinafter, translation is included without limitation in
+the term "modification".)  Each licensee is addressed as "you".
+
+Activities other than copying, distribution and modification are not
+covered by this License; they are outside its scope.  The act of
+running the Program is not restricted, and the output from the Program
+is covered only if its contents constitute a work based on the
+Program (independent of having been made by running the Program).
+Whether that is true depends on what the Program does.
+
+  1. You may copy and distribute verbatim copies of the Program's
+source code as you receive it, in any medium, provided that you
+conspicuously and appropriately publish on each copy an appropriate
+copyright notice and disclaimer of warranty; keep intact all the
+notices that refer to this License and to the absence of any warranty;
+and give any other recipients of the Program a copy of this License
+along with the Program.
+
+You may charge a fee for the physical act of transferring a copy, and
+you may at your option offer warranty protection in exchange for a fee.
+
+  2. You may modify your copy or copies of the Program or any portion
+of it, thus forming a work based on the Program, and copy and
+distribute such modifications or work under the terms of Section 1
+above, provided that you also meet all of these conditions:
+
+    a) You must cause the modified files to carry prominent notices
+    stating that you changed the files and the date of any change.
+
+    b) You must cause any work that you distribute or publish, that in
+    whole or in part contains or is derived from the Program or any
+    part thereof, to be licensed as a whole at no charge to all third
+    parties under the terms of this License.
+
+    c) If the modified program normally reads commands interactively
+    when run, you must cause it, when started running for such
+    interactive use in the most ordinary way, to print or display an
+    announcement including an appropriate copyright notice and a
+    notice that there is no warranty (or else, saying that you provide
+    a warranty) and that users may redistribute the program under
+    these conditions, and telling the user how to view a copy of this
+    License.  (Exception: if the Program itself is interactive but
+    does not normally print such an announcement, your work based on
+    the Program is not required to print an announcement.)
+
+These requirements apply to the modified work as a whole.  If
+identifiable sections of that work are not derived from the Program,
+and can be reasonably considered independent and separate works in
+themselves, then this License, and its terms, do not apply to those
+sections when you distribute them as separate works.  But when you
+distribute the same sections as part of a whole which is a work based
+on the Program, the distribution of the whole must be on the terms of
+this License, whose permissions for other licensees extend to the
+entire whole, and thus to each and every part regardless of who wrote it.
+
+Thus, it is not the intent of this section to claim rights or contest
+your rights to work written entirely by you; rather, the intent is to
+exercise the right to control the distribution of derivative or
+collective works based on the Program.
+
+In addition, mere aggregation of another work not based on the Program
+with the Program (or with a work based on the Program) on a volume of
+a storage or distribution medium does not bring the other work under
+the scope of this License.
+
+  3. You may copy and distribute the Program (or a work based on it,
+under Section 2) in object code or executable form under the terms of
+Sections 1 and 2 above provided that you also do one of the following:
+
+    a) Accompany it with the complete corresponding machine-readable
+    source code, which must be distributed under the terms of Sections
+    1 and 2 above on a medium customarily used for software interchange; or,
+
+    b) Accompany it with a written offer, valid for at least three
+    years, to give any third party, for a charge no more than your
+    cost of physically performing source distribution, a complete
+    machine-readable copy of the corresponding source code, to be
+    distributed under the terms of Sections 1 and 2 above on a medium
+    customarily used for software interchange; or,
+
+    c) Accompany it with the information you received as to the offer
+    to distribute corresponding source code.  (This alternative is
+    allowed only for noncommercial distribution and only if you
+    received the program in object code or executable form with such
+    an offer, in accord with Subsection b above.)
+
+The source code for a work means the preferred form of the work for
+making modifications to it.  For an executable work, complete source
+code means all the source code for all modules it contains, plus any
+associated interface definition files, plus the scripts used to
+control compilation and installation of the executable.  However, as a
+special exception, the source code distributed need not include
+anything that is normally distributed (in either source or binary
+form) with the major components (compiler, kernel, and so on) of the
+operating system on which the executable runs, unless that component
+itself accompanies the executable.
+
+If distribution of executable or object code is made by offering
+access to copy from a designated place, then offering equivalent
+access to copy the source code from the same place counts as
+distribution of the source code, even though third parties are not
+compelled to copy the source along with the object code.
+
+  4. You may not copy, modify, sublicense, or distribute the Program
+except as expressly provided under this License.  Any attempt
+otherwise to copy, modify, sublicense or distribute the Program is
+void, and will automatically terminate your rights under this License.
+However, parties who have received copies, or rights, from you under
+this License will not have their licenses terminated so long as such
+parties remain in full compliance.
+
+  5. You are not required to accept this License, since you have not
+signed it.  However, nothing else grants you permission to modify or
+distribute the Program or its derivative works.  These actions are
+prohibited by law if you do not accept this License.  Therefore, by
+modifying or distributing the Program (or any work based on the
+Program), you indicate your acceptance of this License to do so, and
+all its terms and conditions for copying, distributing or modifying
+the Program or works based on it.
+
+  6. Each time you redistribute the Program (or any work based on the
+Program), the recipient automatically receives a license from the
+original licensor to copy, distribute or modify the Program subject to
+these terms and conditions.  You may not impose any further
+restrictions on the recipients' exercise of the rights granted herein.
+You are not responsible for enforcing compliance by third parties to
+this License.
+
+  7. If, as a consequence of a court judgment or allegation of patent
+infringement or for any other reason (not limited to patent issues),
+conditions are imposed on you (whether by court order, agreement or
+otherwise) that contradict the conditions of this License, they do not
+excuse you from the conditions of this License.  If you cannot
+distribute so as to satisfy simultaneously your obligations under this
+License and any other pertinent obligations, then as a consequence you
+may not distribute the Program at all.  For example, if a patent
+license would not permit royalty-free redistribution of the Program by
+all those who receive copies directly or indirectly through you, then
+the only way you could satisfy both it and this License would be to
+refrain entirely from distribution of the Program.
+
+If any portion of this section is held invalid or unenforceable under
+any particular circumstance, the balance of the section is intended to
+apply and the section as a whole is intended to apply in other
+circumstances.
+
+It is not the purpose of this section to induce you to infringe any
+patents or other property right claims or to contest validity of any
+such claims; this section has the sole purpose of protecting the
+integrity of the free software distribution system, which is
+implemented by public license practices.  Many people have made
+generous contributions to the wide range of software distributed
+through that system in reliance on consistent application of that
+system; it is up to the author/donor to decide if he or she is willing
+to distribute software through any other system and a licensee cannot
+impose that choice.
+
+This section is intended to make thoroughly clear what is believed to
+be a consequence of the rest of this License.
+
+  8. If the distribution and/or use of the Program is restricted in
+certain countries either by patents or by copyrighted interfaces, the
+original copyright holder who places the Program under this License
+may add an explicit geographical distribution limitation excluding
+those countries, so that distribution is permitted only in or among
+countries not thus excluded.  In such case, this License incorporates
+the limitation as if written in the body of this License.
+
+  9. The Free Software Foundation may publish revised and/or new versions
+of the General Public License from time to time.  Such new versions will
+be similar in spirit to the present version, but may differ in detail to
+address new problems or concerns.
+
+Each version is given a distinguishing version number.  If the Program
+specifies a version number of this License which applies to it and "any
+later version", you have the option of following the terms and conditions
+either of that version or of any later version published by the Free
+Software Foundation.  If the Program does not specify a version number of
+this License, you may choose any version ever published by the Free Software
+Foundation.
+
+  10. If you wish to incorporate parts of the Program into other free
+programs whose distribution conditions are different, write to the author
+to ask for permission.  For software which is copyrighted by the Free
+Software Foundation, write to the Free Software Foundation; we sometimes
+make exceptions for this.  Our decision will be guided by the two goals
+of preserving the free status of all derivatives of our free software and
+of promoting the sharing and reuse of software generally.
+
+			    NO WARRANTY
+
+  11. BECAUSE THE PROGRAM IS LICENSED FREE OF CHARGE, THERE IS NO WARRANTY
+FOR THE PROGRAM, TO THE EXTENT PERMITTED BY APPLICABLE LAW.  EXCEPT WHEN
+OTHERWISE STATED IN WRITING THE COPYRIGHT HOLDERS AND/OR OTHER PARTIES
+PROVIDE THE PROGRAM "AS IS" WITHOUT WARRANTY OF ANY KIND, EITHER EXPRESSED
+OR IMPLIED, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF
+MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  THE ENTIRE RISK AS
+TO THE QUALITY AND PERFORMANCE OF THE PROGRAM IS WITH YOU.  SHOULD THE
+PROGRAM PROVE DEFECTIVE, YOU ASSUME THE COST OF ALL NECESSARY SERVICING,
+REPAIR OR CORRECTION.
+
+  12. IN NO EVENT UNLESS REQUIRED BY APPLICABLE LAW OR AGREED TO IN WRITING
+WILL ANY COPYRIGHT HOLDER, OR ANY OTHER PARTY WHO MAY MODIFY AND/OR
+REDISTRIBUTE THE PROGRAM AS PERMITTED ABOVE, BE LIABLE TO YOU FOR DAMAGES,
+INCLUDING ANY GENERAL, SPECIAL, INCIDENTAL OR CONSEQUENTIAL DAMAGES ARISING
+OUT OF THE USE OR INABILITY TO USE THE PROGRAM (INCLUDING BUT NOT LIMITED
+TO LOSS OF DATA OR DATA BEING RENDERED INACCURATE OR LOSSES SUSTAINED BY
+YOU OR THIRD PARTIES OR A FAILURE OF THE PROGRAM TO OPERATE WITH ANY OTHER
+PROGRAMS), EVEN IF SUCH HOLDER OR OTHER PARTY HAS BEEN ADVISED OF THE
+POSSIBILITY OF SUCH DAMAGES.
+
+		     END OF TERMS AND CONDITIONS
+
+	    How to Apply These Terms to Your New Programs
+
+  If you develop a new program, and you want it to be of the greatest
+possible use to the public, the best way to achieve this is to make it
+free software which everyone can redistribute and change under these terms.
+
+  To do so, attach the following notices to the program.  It is safest
+to attach them to the start of each source file to most effectively
+convey the exclusion of warranty; and each file should have at least
+the "copyright" line and a pointer to where the full notice is found.
+
+    <one line to give the program's name and a brief idea of what it does.>
+    Copyright (C) <year>  <name of author>
+
+    This program is free software; you can redistribute it and/or modify
+    it under the terms of the GNU General Public License as published by
+    the Free Software Foundation; either version 2 of the License, or
+    (at your option) any later version.
+
+    This program is distributed in the hope that it will be useful,
+    but WITHOUT ANY WARRANTY; without even the implied warranty of
+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+    GNU General Public License for more details.
+
+    You should have received a copy of the GNU General Public License
+    along with this program; if not, write to the Free Software
+    Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA  02110-1301  USA
+
+
+Also add information on how to contact you by electronic and paper mail.
+
+If the program is interactive, make it output a short notice like this
+when it starts in an interactive mode:
+
+    Gnomovision version 69, Copyright (C) year name of author
+    Gnomovision comes with ABSOLUTELY NO WARRANTY; for details type `show w'.
+    This is free software, and you are welcome to redistribute it
+    under certain conditions; type `show c' for details.
+
+The hypothetical commands `show w' and `show c' should show the appropriate
+parts of the General Public License.  Of course, the commands you use may
+be called something other than `show w' and `show c'; they could even be
+mouse-clicks or menu items--whatever suits your program.
+
+You should also get your employer (if you work as a programmer) or your
+school, if any, to sign a "copyright disclaimer" for the program, if
+necessary.  Here is a sample; alter the names:
+
+  Yoyodyne, Inc., hereby disclaims all copyright interest in the program
+  `Gnomovision' (which makes passes at compilers) written by James Hacker.
+
+  <signature of Ty Coon>, 1 April 1989
+  Ty Coon, President of Vice
+
+This General Public License does not permit incorporating your program into
+proprietary programs.  If your program is a subroutine library, you may
+consider it more useful to permit linking proprietary applications with the
+library.  If this is what you want to do, use the GNU Library General
+Public License instead of this License.
ge framerate while keeping duration.
DVD (mpeg2enc)
Divx like packed vop, DO NOT SET, it is ugly
+Is it running ?
ecise.
+Do you want to load it  ?
+(It will be deleted in all cases, you should save it if you want to keep it)
+Avidemux can use another mode which is safe but YOU WILL LOSE FRAME ACCURACY.
+Do you want to use that mode?
 Configuration
+file image mult. by this when loaded):
+(where A = (1-alpha)*A + alpha*(curr_frame + lookahead)):
owed for H.263
oking B-frames
+multiplied by this):
 directory
s not (s)QCIF
+
+Continue anyway?
+Please move the A marker.
+Go to Audio->MainTrack to select the active one.
+Either change codec or use the mixer filter to have less channels.
+Continue ?
+ Do you want to index it?
e:
+ continue anyway ?
+1.) "resize" / "add border" / "crop" each stream to the same resolution
+2.) concatinate them together
+It is needed to create PSP compatible video.
+It is needed to create FLV  video.
+ Enable it ?
+in file image when loaded):
uration
+Report-Msgid-Bugs-To: 
+POT-Creation-Date: 2009-11-17 19:36+0800 
+PO-Revision-Date: 2009-11-17 19:36+0800
+Last-Translator: Dewei Zhu <zdw163 at hotmail.com>
+Language-Team: 
+MIME-Version: 1.0
+Content-Type: text/plain; charset=UTF-8
+Content-Transfer-Encoding: 8bit
+X-Poedit-Language: Chinese (Simplified)
+X-Poedit-Country: CHINA
+
+ ????????????????????????????????????
+
+??????????????????
+
+???????????????????????????
+??????????????????????????????????????? 256!
+
+?????? ?????? ??????????????????????????????????????????????????????
V ????????????????????? 720*576 at 25
+
+?????????????????? "?????? -> ?????? VBR ????????????" ????????????
+????????? GNU ??????????????????????????? (GNU General Public License) ??????????????????
+??????????????????????????????
+
+		    GNU GENERAL PUBLIC LICENSE
+		       Version 2, June 1991
+
+ Copyright (C) 1989, 1991 Free Software Foundation, Inc.
+                       51 Franklin St, Fifth Floor, Boston, MA  02110-1301  USA
+ Everyone is permitted to copy and distribute verbatim copies
+ of this license document, but changing it is not allowed.
+
+			    Preamble
+
+  The licenses for most software are designed to take away your
+freedom to share and change it.  By contrast, the GNU General Public
+License is intended to guarantee your freedom to share and change free
+software--to make sure the software is free for all its users.  This
+General Public License applies to most of the Free Software
+Foundation's software and to any other program whose authors commit to
+using it.  (Some other Free Software Foundation software is covered by
+the GNU Library General Public License instead.)  You can apply it to
+your programs, too.
+
+  When we speak of free software, we are referring to freedom, not
+price.  Our General Public Licenses are designed to make sure that you
+have the freedom to distribute copies of free software (and charge for
+this service if you wish), that you receive source code or can get it
+if you want it, that you can change the software or use pieces of it
+in new free programs; and that you know you can do these things.
+
+  To protect your rights, we need to make restrictions that forbid
+anyone to deny you these rights or to ask you to surrender the rights.
+These restrictions translate to certain responsibilities for you if you
+distribute copies of the software, or if you modify it.
+
+  For example, if you distribute copies of such a program, whether
+gratis or for a fee, you must give the recipients all the rights that
+you have.  You must make sure that they, too, receive or can get the
+source code.  And you must show them these terms so they know their
+rights.
+
+  We protect your rights with two steps: (1) copyright the software, and
+(2) offer you this license which gives you legal permission to copy,
+distribute and/or modify the software.
+
+  Also, for each author's protection and ours, we want to make certain
+that everyone understands that there is no warranty for this free
+software.  If the software is modified by someone else and passed on, we
+want its recipients to know that what they have is not the original, so
+that any problems introduced by others will not reflect on the original
+authors' reputations.
+
+  Finally, any free program is threatened constantly by software
+patents.  We wish to avoid the danger that redistributors of a free
+program will individually obtain patent licenses, in effect making the
+program proprietary.  To prevent this, we have made it clear that any
+patent must be licensed for everyone's free use or not licensed at all.
+
+  The precise terms and conditions for copying, distribution and
+modification follow.
+
+		    GNU GENERAL PUBLIC LICENSE
+   TERMS AND CONDITIONS FOR COPYING, DISTRIBUTION AND MODIFICATION
+
+  0. This License applies to any program or other work which contains
+a notice placed by the copyright holder saying it may be distributed
+under the terms of this General Public License.  The "Program", below,
+refers to any such program or work, and a "work based on the Program"
+means either the Program or any derivative work under copyright law:
+that is to say, a work containing the Program or a portion of it,
+either verbatim or with modifications and/or translated into another
+language.  (Hereinafter, translation is included without limitation in
+the term "modification".)  Each licensee is addressed as "you".
+
+Activities other than copying, distribution and modification are not
+covered by this License; they are outside its scope.  The act of
+running the Program is not restricted, and the output from the Program
+is covered only if its contents constitute a work based on the
+Program (independent of having been made by running the Program).
+Whether that is true depends on what the Program does.
+
+  1. You may copy and distribute verbatim copies of the Program's
+source code as you receive it, in any medium, provided that you
+conspicuously and appropriately publish on each copy an appropriate
+copyright notice and disclaimer of warranty; keep intact all the
+notices that refer to this License and to the absence of any warranty;
+and give any other recipients of the Program a copy of this License
+along with the Program.
+
+You may charge a fee for the physical act of transferring a copy, and
+you may at your option offer warranty protection in exchange for a fee.
+
+  2. You may modify your copy or copies of the Program or any portion
+of it, thus forming a work based on the Program, and copy and
+distribute such modifications or work under the terms of Section 1
+above, provided that you also meet all of these conditions:
+
+    a) You must cause the modified files to carry prominent notices
+    stating that you changed the files and the date of any change.
+
+    b) You must cause any work that you distribute or publish, that in
+    whole or in part contains or is derived from the Program or any
+    part thereof, to be licensed as a whole at no charge to all third
+    parties under the terms of this License.
+
+    c) If the modified program normally reads commands interactively
+    when run, you must cause it, when started running for such
+    interactive use in the most ordinary way, to print or display an
+    announcement including an appropriate copyright notice and a
+    notice that there is no warranty (or else, saying that you provide
+    a warranty) and that users may redistribute the program under
+    these conditions, and telling the user how to view a copy of this
+    License.  (Exception: if the Program itself is interactive but
+    does not normally print such an announcement, your work based on
+    the Program is not required to print an announcement.)
+
+These requirements apply to the modified work as a whole.  If
+identifiable sections of that work are not derived from the Program,
+and can be reasonably considered independent and separate works in
+themselves, then this License, and its terms, do not apply to those
+sections when you distribute them as separate works.  But when you
+distribute the same sections as part of a whole which is a work based
+on the Program, the distribution of the whole must be on the terms of
+this License, whose permissions for other licensees extend to the
+entire whole, and thus to each and every part regardless of who wrote it.
+
+Thus, it is not the intent of this section to claim rights or contest
+your rights to work written entirely by you; rather, the intent is to
+exercise the right to control the distribution of derivative or
+collective works based on the Program.
+
+In addition, mere aggregation of another work not based on the Program
+with the Program (or with a work based on the Program) on a volume of
+a storage or distribution medium does not bring the other work under
+the scope of this License.
+
+  3. You may copy and distribute the Program (or a work based on it,
+under Section 2) in object code or executable form under the terms of
+Sections 1 and 2 above provided that you also do one of the following:
+
+    a) Accompany it with the complete corresponding machine-readable
+    source code, which must be distributed under the terms of Sections
+    1 and 2 above on a medium customarily used for software interchange; or,
+
+    b) Accompany it with a written offer, valid for at least three
+    years, to give any third party, for a charge no more than your
+    cost of physically performing source distribution, a complete
+    machine-readable copy of the corresponding source code, to be
+    distributed under the terms of Sections 1 and 2 above on a medium
+    customarily used for software interchange; or,
+
+    c) Accompany it with the information you received as to the offer
+    to distribute corresponding source code.  (This alternative is
+    allowed only for noncommercial distribution and only if you
+    received the program in object code or executable form with such
+    an offer, in accord with Subsection b above.)
+
+The source code for a work means the preferred form of the work for
+making modifications to it.  For an executable work, complete source
+code means all the source code for all modules it contains, plus any
+associated interface definition files, plus the scripts used to
+control compilation and installation of the executable.  However, as a
+special exception, the source code distributed need not include
+anything that is normally distributed (in either source or binary
+form) with the major components (compiler, kernel, and so on) of the
+operating system on which the executable runs, unless that component
+itself accompanies the executable.
+
+If distribution of executable or object code is made by offering
+access to copy from a designated place, then offering equivalent
+access to copy the source code from the same place counts as
+distribution of the source code, even though third parties are not
+compelled to copy the source along with the object code.
+
+  4. You may not copy, modify, sublicense, or distribute the Program
+except as expressly provided under this License.  Any attempt
+otherwise to copy, modify, sublicense or distribute the Program is
+void, and will automatically terminate your rights under this License.
+However, parties who have received copies, or rights, from you under
+this License will not have their licenses terminated so long as such
+parties remain in full compliance.
+
+  5. You are not required to accept this License, since you have not
+signed it.  However, nothing else grants you permission to modify or
+distribute the Program or its derivative works.  These actions are
+prohibited by law if you do not accept this License.  Therefore, by
+modifying or distributing the Program (or any work based on the
+Program), you indicate your acceptance of this License to do so, and
+all its terms and conditions for copying, distributing or modifying
+the Program or works based on it.
+
+  6. Each time you redistribute the Program (or any work based on the
+Program), the recipient automatically receives a license from the
+original licensor to copy, distribute or modify the Program subject to
+these terms and conditions.  You may not impose any further
+restrictions on the recipients' exercise of the rights granted herein.
+You are not responsible for enforcing compliance by third parties to
+this License.
+
+  7. If, as a consequence of a court judgment or allegation of patent
+infringement or for any other reason (not limited to patent issues),
+conditions are imposed on you (whether by court order, agreement or
+otherwise) that contradict the conditions of this License, they do not
+excuse you from the conditions of this License.  If you cannot
+distribute so as to satisfy simultaneously your obligations under this
+License and any other pertinent obligations, then as a consequence you
+may not distribute the Program at all.  For example, if a patent
+license would not permit royalty-free redistribution of the Program by
+all those who receive copies directly or indirectly through you, then
+the only way you could satisfy both it and this License would be to
+refrain entirely from distribution of the Program.
+
+If any portion of this section is held invalid or unenforceable under
+any particular circumstance, the balance of the section is intended to
+apply and the section as a whole is intended to apply in other
+circumstances.
+
+It is not the purpose of this section to induce you to infringe any
+patents or other property right claims or to contest validity of any
+such claims; this section has the sole purpose of protecting the
+integrity of the free software distribution system, which is
+implemented by public license practices.  Many people have made
+generous contributions to the wide range of software distributed
+through that system in reliance on consistent application of that
+system; it is up to the author/donor to decide if he or she is willing
+to distribute software through any other system and a licensee cannot
+impose that choice.
+
+This section is intended to make thoroughly clear what is believed to
+be a consequence of the rest of this License.
+
+  8. If the distribution and/or use of the Program is restricted in
+certain countries either by patents or by copyrighted interfaces, the
+original copyright holder who places the Program under this License
+may add an explicit geographical distribution limitation excluding
+those countries, so that distribution is permitted only in or among
+countries not thus excluded.  In such case, this License incorporates
+the limitation as if written in the body of this License.
+
+  9. The Free Software Foundation may publish revised and/or new versions
+of the General Public License from time to time.  Such new versions will
+be similar in spirit to the present version, but may differ in detail to
+address new problems or concerns.
+
+Each version is given a distinguishing version number.  If the Program
+specifies a version number of this License which applies to it and "any
+later version", you have the option of following the terms and conditions
+either of that version or of any later version published by the Free
+Software Foundation.  If the Program does not specify a version number of
+this License, you may choose any version ever published by the Free Software
+Foundation.
+
+  10. If you wish to incorporate parts of the Program into other free
+programs whose distribution conditions are different, write to the author
+to ask for permission.  For software which is copyrighted by the Free
+Software Foundation, write to the Free Software Foundation; we sometimes
+make exceptions for this.  Our decision will be guided by the two goals
+of preserving the free status of all derivatives of our free software and
+of promoting the sharing and reuse of software generally.
+
+			    NO WARRANTY
+
+  11. BECAUSE THE PROGRAM IS LICENSED FREE OF CHARGE, THERE IS NO WARRANTY
+FOR THE PROGRAM, TO THE EXTENT PERMITTED BY APPLICABLE LAW.  EXCEPT WHEN
+OTHERWISE STATED IN WRITING THE COPYRIGHT HOLDERS AND/OR OTHER PARTIES
+PROVIDE THE PROGRAM "AS IS" WITHOUT WARRANTY OF ANY KIND, EITHER EXPRESSED
+OR IMPLIED, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF
+MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  THE ENTIRE RISK AS
+TO THE QUALITY AND PERFORMANCE OF THE PROGRAM IS WITH YOU.  SHOULD THE
+PROGRAM PROVE DEFECTIVE, YOU ASSUME THE COST OF ALL NECESSARY SERVICING,
+REPAIR OR CORRECTION.
+
+  12. IN NO EVENT UNLESS REQUIRED BY APPLICABLE LAW OR AGREED TO IN WRITING
+WILL ANY COPYRIGHT HOLDER, OR ANY OTHER PARTY WHO MAY MODIFY AND/OR
+REDISTRIBUTE THE PROGRAM AS PERMITTED ABOVE, BE LIABLE TO YOU FOR DAMAGES,
+INCLUDING ANY GENERAL, SPECIAL, INCIDENTAL OR CONSEQUENTIAL DAMAGES ARISING
+OUT OF THE USE OR INABILITY TO USE THE PROGRAM (INCLUDING BUT NOT LIMITED
+TO LOSS OF DATA OR DATA BEING RENDERED INACCURATE OR LOSSES SUSTAINED BY
+YOU OR THIRD PARTIES OR A FAILURE OF THE PROGRAM TO OPERATE WITH ANY OTHER
+PROGRAMS), EVEN IF SUCH HOLDER OR OTHER PARTY HAS BEEN ADVISED OF THE
+POSSIBILITY OF SUCH DAMAGES.
+
+		     END OF TERMS AND CONDITIONS
+
+	    How to Apply These Terms to Your New Programs
+
+  If you develop a new program, and you want it to be of the greatest
+possible use to the public, the best way to achieve this is to make it
+free software which everyone can redistribute and change under these terms.
+
+  To do so, attach the following notices to the program.  It is safest
+to attach them to the start of each source file to most effectively
+convey the exclusion of warranty; and each file should have at least
+the "copyright" line and a pointer to where the full notice is found.
+
+    <one line to give the program's name and a brief idea of what it does.>
+    Copyright (C) <year>  <name of author>
+
+    This program is free software; you can redistribute it and/or modify
+    it under the terms of the GNU General Public License as published by
+    the Free Software Foundation; either version 2 of the License, or
+    (at your option) any later version.
+
+    This program is distributed in the hope that it will be useful,
+    but WITHOUT ANY WARRANTY; without even the implied warranty of
+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+    GNU General Public License for more details.
+
+    You should have received a copy of the GNU General Public License
+    along with this program; if not, write to the Free Software
+    Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA  02110-1301  USA
+
+
+Also add information on how to contact you by electronic and paper mail.
+
+If the program is interactive, make it output a short notice like this
+when it starts in an interactive mode:
+
+    Gnomovision version 69, Copyright (C) year name of author
+    Gnomovision comes with ABSOLUTELY NO WARRANTY; for details type `show w'.
+    This is free software, and you are welcome to redistribute it
+    under certain conditions; type `show c' for details.
+
+The hypothetical commands `show w' and `show c' should show the appropriate
+parts of the General Public License.  Of course, the commands you use may
+be called something other than `show w' and `show c'; they could even be
+mouse-clicks or menu items--whatever suits your program.
+
+You should also get your employer (if you work as a programmer) or your
+school, if any, to sign a "copyright disclaimer" for the program, if
+necessary.  Here is a sample; alter the names:
+
+  Yoyodyne, Inc., hereby disclaims all copyright interest in the program
+  `Gnomovision' (which makes passes at compilers) written by James Hacker.
+
+  <signature of Ty Coon>, 1 April 1989
+  Ty Coon, President of Vice
+
+This General Public License does not permit incorporating your program into
+proprietary programs.  If your program is a subroutine library, you may
+consider it more useful to permit linking proprietary applications with the
+library.  If this is what you want to do, use the GNU Library General
+Public License instead of this License.
????????????
????????????????????)
??????????
+?????????????????????
?
+??????????????? ?
+(???????????????????????????????????????????????????????????????????????????)
+Avidemux ??????????????????????????????????????????<b>??????????????????????????????</b>???
+??????????????????????????? ?
rnelDeint)
+??????????????????????????????????????????)(_M):
+(?????? A = (1-alpha)*A + alpha*(????????????+???????????????)):
?????:
sub ???????????????
+??????????????????????????????????????????)(_M):
????????????????????
????
???????????????
+
+??????????????????????????????
+??????????????? A ???
+?????? ??????->???????????? ???????????????????????????
+????????????????????????????????????????????????????????????????????????
+??????????
+ ????????????????
4]
+ ?????????????????????????????? ?
+1.) "????????????" / "????????????" / "??????" ????????????????????????????????????
+2.) ??????????????????
+?????? PSP ???????????????????????????
+?????? FLV ?????????????????????
+ ???????????? ?
+????????????????????????????????????):
?????????????????????? (%s)
\ No newline at end of file



From mean at mail.berlios.de  Tue Nov 17 19:44:39 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Tue, 17 Nov 2009 19:44:39 +0100
Subject: [Avidemux-svn-commit] r5517 -
	branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoFilter/src
Message-ID: <200911171844.nAHIidxw032326@sheep.berlios.de>

Author: mean
Date: 2009-11-17 19:44:39 +0100 (Tue, 17 Nov 2009)
New Revision: 5517

Modified:
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoFilter/src/ADM_coreVideoFilter.cpp
Log:
[VideoFilter] If an error is met, abort

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoFilter/src/ADM_coreVideoFilter.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoFilter/src/ADM_coreVideoFilter.cpp	2009-11-17 18:26:52 UTC (rev 5516)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoFilter/src/ADM_coreVideoFilter.cpp	2009-11-17 18:44:39 UTC (rev 5517)
@@ -71,6 +71,6 @@
 {
       bool r=getFrame(nextFrame,image);
       nextFrame++;
-      return true;
+      return r;
 }
 // EOF



From mean at mail.berlios.de  Tue Nov 17 19:44:41 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Tue, 17 Nov 2009 19:44:41 +0100
Subject: [Avidemux-svn-commit] r5518 -
	branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor
Message-ID: <200911171844.nAHIif79032348@sheep.berlios.de>

Author: mean
Date: 2009-11-17 19:44:40 +0100 (Tue, 17 Nov 2009)
New Revision: 5518

Modified:
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edRender.cpp
Log:
[Editor] In process mode, dont barf if the first frame has a pts >0

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edRender.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edRender.cpp	2009-11-17 18:44:39 UTC (rev 5517)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edRender.cpp	2009-11-17 18:44:40 UTC (rev 5518)
@@ -146,6 +146,12 @@
     
     // Try to seek...
     _SEGMENT *s=_segments.getSegment(seg);
+    if(!s->_reference && !segTime)
+    {
+        _VIDEOS *v=_segments.getRefVideo(s->_reference);
+        segTime=v->firstFramePts;
+        ADM_warning("Fixating start time to %"LLU" ms\n",segTime/1000);
+    }
     uint64_t to=segTime+s->_refStartTimeUs;
     if(false==seektoTime(s->_reference,to))
     {



From mean at mail.berlios.de  Wed Nov 18 19:23:16 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Wed, 18 Nov 2009 19:23:16 +0100
Subject: [Avidemux-svn-commit] r5519 -
	branches/avidemux_2.5_branch_gruntster/po
Message-ID: <200911181823.nAIINGlY016025@sheep.berlios.de>

Author: mean
Date: 2009-11-18 19:23:13 +0100 (Wed, 18 Nov 2009)
New Revision: 5519

Modified:
   branches/avidemux_2.5_branch_gruntster/po/zh_CN.po
Log:
[i18n] Regenerate po from mo for zh_CN

Modified: branches/avidemux_2.5_branch_gruntster/po/zh_CN.po
===================================================================
--- branches/avidemux_2.5_branch_gruntster/po/zh_CN.po	2009-11-17 18:44:40 UTC (rev 5518)
+++ branches/avidemux_2.5_branch_gruntster/po/zh_CN.po	2009-11-18 18:23:13 UTC (rev 5519)
@@ -1,972 +1,6518 @@
-??
-
-
-
-
-
-?
-
-
-
-?
-
-
-?
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-J
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-?
-?
-?
-
-
-
-
-
-?
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-6
-:
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-c
-
-
-
-
-
-
-
-
-
-
-
-
-
-j
-
-
-
-
-
-
-

-

-
-
-

- Reuse the existing log-file ?
+msgid ""
+msgstr ""
+"Project-Id-Version: \n"
+"Report-Msgid-Bugs-To: \n"
+"POT-Creation-Date: 2009-11-17 19:36+0800 \n"
+"PO-Revision-Date: 2009-11-17 19:36+0800\n"
+"Last-Translator: Dewei Zhu <zdw163 at hotmail.com>\n"
+"Language-Team: \n"
+"MIME-Version: 1.0\n"
+"Content-Type: text/plain; charset=UTF-8\n"
+"Content-Transfer-Encoding: 8bit\n"
+"X-Poedit-Language: Chinese (Simplified)\n"
+"X-Poedit-Country: CHINA\n"
 
-Do you want to replace it?
+msgid ""
+"\n"
+" Reuse the existing log-file ?"
+msgstr ""
+"\n"
+" ????????????????????????????????????"
 
-You can either resume or Abort it.
-all above values are normalized to 256!
+msgid " "
+msgstr " "
 
-Click OK to generate debug information. This may take a few minutes to complete.
 DV codec only accepts 720*576 at 25
+msgid "  Job Name  "
+msgstr "  ????????????  "
 
-You can do it later with "Audio -> Build VBR Time Map".
-under the terms of the GNU General Public License version 2
-as published by the Free Software Foundation.
+msgid " 0000000"
+msgstr " 0000000"
 
-		    GNU GENERAL PUBLIC LICENSE
-		       Version 2, June 1991
+msgid " Error X:"
+msgstr "?????? X:"
 
- Copyright (C) 1989, 1991 Free Software Foundation, Inc.
-                       51 Franklin St, Fifth Floor, Boston, MA  02110-1301  USA
- Everyone is permitted to copy and distribute verbatim copies
- of this license document, but changing it is not allowed.
+msgid " Error Y:"
+msgstr "?????? Y:"
 
-			    Preamble
+msgid " Height "
+msgstr "???"
 
-  The licenses for most software are designed to take away your
-freedom to share and change it.  By contrast, the GNU General Public
-License is intended to guarantee your freedom to share and change free
-software--to make sure the software is free for all its users.  This
-General Public License applies to most of the Free Software
-Foundation's software and to any other program whose authors commit to
-using it.  (Some other Free Software Foundation software is covered by
-the GNU Library General Public License instead.)  You can apply it to
-your programs, too.
+msgid " Text:"
+msgstr "??????:"
 
-  When we speak of free software, we are referring to freedom, not
-price.  Our General Public Licenses are designed to make sure that you
-have the freedom to distribute copies of free software (and charge for
-this service if you wish), that you receive source code or can get it
-if you want it, that you can change the software or use pieces of it
-in new free programs; and that you know you can do these things.
+msgid " Width "
+msgstr "???"
 
-  To protect your rights, we need to make restrictions that forbid
-anyone to deny you these rights or to ask you to surrender the rights.
-These restrictions translate to certain responsibilities for you if you
-distribute copies of the software, or if you modify it.
+msgid "\"%s\" does not exist."
+msgstr "\"%s\" ?????????"
 
-  For example, if you distribute copies of such a program, whether
-gratis or for a fee, you must give the recipients all the rights that
-you have.  You must make sure that they, too, receive or can get the
-source code.  And you must show them these terms so they know their
-rights.
+msgid "\"Erase\" arbitrary areas of each frame"
+msgstr "\"??????\" ???????????????????????????"
 
-  We protect your rights with two steps: (1) copyright the software, and
-(2) offer you this license which gives you legal permission to copy,
-distribute and/or modify the software.
+msgid "# of Glyphs :"
+msgstr "??????????????? #:"
 
-  Also, for each author's protection and ours, we want to make certain
-that everyone understands that there is no warranty for this free
-software.  If the software is modified by someone else and passed on, we
-want its recipients to know that what they have is not the original, so
-that any problems introduced by others will not reflect on the original
-authors' reputations.
+msgid "# of lines"
+msgstr "?????? #"
 
-  Finally, any free program is threatened constantly by software
-patents.  We wish to avoid the danger that redistributors of a free
-program will individually obtain patent licenses, in effect making the
-program proprietary.  To prevent this, we have made it clear that any
-patent must be licensed for everyone's free use or not licensed at all.
+msgid "%.2f MB"
+msgstr "%.2f MB"
 
-  The precise terms and conditions for copying, distribution and
-modification follow.
+msgid "%02d:%02d:%02d.%03d"
+msgstr "%02d:%02d:%02d.%03d"
 
-		    GNU GENERAL PUBLIC LICENSE
-   TERMS AND CONDITIONS FOR COPYING, DISTRIBUTION AND MODIFICATION
+msgid "%2.3f fps"
+msgstr "%2.3f fps"
 
-  0. This License applies to any program or other work which contains
-a notice placed by the copyright holder saying it may be distributed
-under the terms of this General Public License.  The "Program", below,
-refers to any such program or work, and a "work based on the Program"
-means either the Program or any derivative work under copyright law:
-that is to say, a work containing the Program or a portion of it,
-either verbatim or with modifications and/or translated into another
-language.  (Hereinafter, translation is included without limitation in
-the term "modification".)  Each licensee is addressed as "you".
+msgid "%d%%"
+msgstr "%d%%"
 
-Activities other than copying, distribution and modification are not
-covered by this License; they are outside its scope.  The act of
-running the Program is not restricted, and the output from the Program
-is covered only if its contents constitute a work based on the
-Program (independent of having been made by running the Program).
-Whether that is true depends on what the Program does.
+msgid "%ld frames"
+msgstr "%ld ??????"
 
-  1. You may copy and distribute verbatim copies of the Program's
-source code as you receive it, in any medium, provided that you
-conspicuously and appropriately publish on each copy an appropriate
-copyright notice and disclaimer of warranty; keep intact all the
-notices that refer to this License and to the absence of any warranty;
-and give any other recipients of the Program a copy of this License
-along with the Program.
+msgid "%lu Bps / %lu kbps"
+msgstr "%lu Bps / %lu kbps"
 
-You may charge a fee for the physical act of transferring a copy, and
-you may at your option offer warranty protection in exchange for a fee.
+msgid "%lu Hz"
+msgstr "%lu Hz"
 
-  2. You may modify your copy or copies of the Program or any portion
-of it, thus forming a work based on the Program, and copy and
-distribute such modifications or work under the terms of Section 1
-above, provided that you also meet all of these conditions:
+msgid "%lu MB"
+msgstr "%lu MB"
 
-    a) You must cause the modified files to carry prominent notices
-    stating that you changed the files and the date of any change.
+msgid "%lu minute"
+msgstr "%lu ???"
 
-    b) You must cause any work that you distribute or publish, that in
-    whole or in part contains or is derived from the Program or any
-    part thereof, to be licensed as a whole at no charge to all third
-    parties under the terms of this License.
+msgid "%lu minutes"
+msgstr "%lu ??????"
 
-    c) If the modified program normally reads commands interactively
-    when run, you must cause it, when started running for such
-    interactive use in the most ordinary way, to print or display an
-    announcement including an appropriate copyright notice and a
-    notice that there is no warranty (or else, saying that you provide
-    a warranty) and that users may redistribute the program under
-    these conditions, and telling the user how to view a copy of this
-    License.  (Exception: if the Program itself is interactive but
-    does not normally print such an announcement, your work based on
-    the Program is not required to print an announcement.)
+msgid "%lu second"
+msgstr "%lu ???"
 
-These requirements apply to the modified work as a whole.  If
-identifiable sections of that work are not derived from the Program,
-and can be reasonably considered independent and separate works in
-themselves, then this License, and its terms, do not apply to those
-sections when you distribute them as separate works.  But when you
-distribute the same sections as part of a whole which is a work based
-on the Program, the distribution of the whole must be on the terms of
-this License, whose permissions for other licensees extend to the
-entire whole, and thus to each and every part regardless of who wrote it.
+msgid "%lu seconds"
+msgstr "%lu ???"
 
-Thus, it is not the intent of this section to claim rights or contest
-your rights to work written entirely by you; rather, the intent is to
-exercise the right to control the distribution of derivative or
-collective works based on the Program.
+msgid "%lu x %lu"
+msgstr "%lu x %lu"
 
-In addition, mere aggregation of another work not based on the Program
-with the Program (or with a work based on the Program) on a volume of
-a storage or distribution medium does not bring the other work under
-the scope of this License.
+msgid "%s (%u:%u)"
+msgstr "%s (%u:%u)"
 
-  3. You may copy and distribute the Program (or a work based on it,
-under Section 2) in object code or executable form under the terms of
-Sections 1 and 2 above provided that you also do one of the following:
+msgid ""
+"%s already exists.\n"
+"\n"
+"Do you want to replace it?"
+msgstr ""
+"%s ???????????????\n"
+"\n"
+"??????????????????"
 
-    a) Accompany it with the complete corresponding machine-readable
-    source code, which must be distributed under the terms of Sections
-    1 and 2 above on a medium customarily used for software interchange; or,
+msgid "-"
+msgstr "-"
 
-    b) Accompany it with a written offer, valid for at least three
-    years, to give any third party, for a charge no more than your
-    cost of physically performing source distribution, a complete
-    machine-readable copy of the corresponding source code, to be
-    distributed under the terms of Sections 1 and 2 above on a medium
-    customarily used for software interchange; or,
+msgid "---"
+msgstr "---"
 
-    c) Accompany it with the information you received as to the offer
-    to distribute corresponding source code.  (This alternative is
-    allowed only for noncommercial distribution and only if you
-    received the program in object code or executable form with such
-    an offer, in accord with Subsection b above.)
+msgid "...are reduced by (%):"
+msgstr "...???????????? (%):"
 
-The source code for a work means the preferred form of the work for
-making modifications to it.  For an executable work, complete source
-code means all the source code for all modules it contains, plus any
-associated interface definition files, plus the scripts used to
-control compilation and installation of the executable.  However, as a
-special exception, the source code distributed need not include
-anything that is normally distributed (in either source or binary
-form) with the major components (compiler, kernel, and so on) of the
-operating system on which the executable runs, unless that component
-itself accompanies the executable.
+msgid "/ 0000000"
+msgstr "/ 0000000"
 
-If distribution of executable or object code is made by offering
-access to copy from a designated place, then offering equivalent
-access to copy the source code from the same place counts as
-distribution of the source code, even though third parties are not
-compelled to copy the source along with the object code.
+msgid "/ 00:00:00,000"
+msgstr "/ 00:00:00,000"
 
-  4. You may not copy, modify, sublicense, or distribute the Program
-except as expressly provided under this License.  Any attempt
-otherwise to copy, modify, sublicense or distribute the Program is
-void, and will automatically terminate your rights under this License.
-However, parties who have received copies, or rights, from you under
-this License will not have their licenses terminated so long as such
-parties remain in full compliance.
+msgid "/dev/null"
+msgstr "/dev/null"
 
-  5. You are not required to accept this License, since you have not
-signed it.  However, nothing else grants you permission to modify or
-distribute the Program or its derivative works.  These actions are
-prohibited by law if you do not accept this License.  Therefore, by
-modifying or distributing the Program (or any work based on the
-Program), you indicate your acceptance of this License to do so, and
-all its terms and conditions for copying, distributing or modifying
-the Program or works based on it.
+msgid "0"
+msgstr "0"
 
-  6. Each time you redistribute the Program (or any work based on the
-Program), the recipient automatically receives a license from the
-original licensor to copy, distribute or modify the Program subject to
-these terms and conditions.  You may not impose any further
-restrictions on the recipients' exercise of the rights granted herein.
-You are not responsible for enforcing compliance by third parties to
-this License.
+msgid "0 - None"
+msgstr "0 - ???"
 
-  7. If, as a consequence of a court judgment or allegation of patent
-infringement or for any other reason (not limited to patent issues),
-conditions are imposed on you (whether by court order, agreement or
-otherwise) that contradict the conditions of this License, they do not
-excuse you from the conditions of this License.  If you cannot
-distribute so as to satisfy simultaneously your obligations under this
-License and any other pertinent obligations, then as a consequence you
-may not distribute the Program at all.  For example, if a patent
-license would not permit royalty-free redistribution of the Program by
-all those who receive copies directly or indirectly through you, then
-the only way you could satisfy both it and this License would be to
-refrain entirely from distribution of the Program.
+msgid "0 - Off"
+msgstr "0 - ??????"
 
-If any portion of this section is held invalid or unenforceable under
-any particular circumstance, the balance of the section is intended to
-apply and the section as a whole is intended to apply in other
-circumstances.
+msgid ""
+"0 = default from core (let XviD decide), else overflow payback percent per "
+"frame"
+msgstr "0 = ????????????(??? XviD ??????)????????????????????????????????????"
 
-It is not the purpose of this section to induce you to infringe any
-patents or other property right claims or to contest validity of any
-such claims; this section has the sole purpose of protecting the
-integrity of the free software distribution system, which is
-implemented by public license practices.  Many people have made
-generous contributions to the wide range of software distributed
-through that system in reliance on consistent application of that
-system; it is up to the author/donor to decide if he or she is willing
-to distribute software through any other system and a licensee cannot
-impose that choice.
+msgid "0 MB"
+msgstr "0 MB"
 
-This section is intended to make thoroughly clear what is believed to
-be a consequence of the rest of this License.
+msgid "0 kB/s"
+msgstr "0 kB/s"
 
-  8. If the distribution and/or use of the Program is restricted in
-certain countries either by patents or by copyrighted interfaces, the
-original copyright holder who places the Program under this License
-may add an explicit geographical distribution limitation excluding
-those countries, so that distribution is permitted only in or among
-countries not thus excluded.  In such case, this License incorporates
-the limitation as if written in the body of this License.
+msgid "0.0"
+msgstr "0.0"
 
-  9. The Free Software Foundation may publish revised and/or new versions
-of the General Public License from time to time.  Such new versions will
-be similar in spirit to the present version, but may differ in detail to
-address new problems or concerns.
+msgid "00:00:00"
+msgstr "00:00:00"
 
-Each version is given a distinguishing version number.  If the Program
-specifies a version number of this License which applies to it and "any
-later version", you have the option of following the terms and conditions
-either of that version or of any later version published by the Free
-Software Foundation.  If the Program does not specify a version number of
-this License, you may choose any version ever published by the Free Software
-Foundation.
+msgid "00:00:00.000"
+msgstr "00:00:00.000"
 
-  10. If you wish to incorporate parts of the Program into other free
-programs whose distribution conditions are different, write to the author
-to ask for permission.  For software which is copyrighted by the Free
-Software Foundation, write to the Free Software Foundation; we sometimes
-make exceptions for this.  Our decision will be guided by the two goals
-of preserving the free status of all derivatives of our free software and
-of promoting the sharing and reuse of software generally.
+msgid "0:0:0"
+msgstr "0:0:0"
 
-			    NO WARRANTY
+msgid "1"
+msgstr "1"
 
-  11. BECAUSE THE PROGRAM IS LICENSED FREE OF CHARGE, THERE IS NO WARRANTY
-FOR THE PROGRAM, TO THE EXTENT PERMITTED BY APPLICABLE LAW.  EXCEPT WHEN
-OTHERWISE STATED IN WRITING THE COPYRIGHT HOLDERS AND/OR OTHER PARTIES
-PROVIDE THE PROGRAM "AS IS" WITHOUT WARRANTY OF ANY KIND, EITHER EXPRESSED
-OR IMPLIED, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF
-MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  THE ENTIRE RISK AS
-TO THE QUALITY AND PERFORMANCE OF THE PROGRAM IS WITH YOU.  SHOULD THE
-PROGRAM PROVE DEFECTIVE, YOU ASSUME THE COST OF ALL NECESSARY SERVICING,
-REPAIR OR CORRECTION.
+msgid "1  - Extremely Low (Fastest)"
+msgstr "1  - ???????????? (??????)"
 
-  12. IN NO EVENT UNLESS REQUIRED BY APPLICABLE LAW OR AGREED TO IN WRITING
-WILL ANY COPYRIGHT HOLDER, OR ANY OTHER PARTY WHO MAY MODIFY AND/OR
-REDISTRIBUTE THE PROGRAM AS PERMITTED ABOVE, BE LIABLE TO YOU FOR DAMAGES,
-INCLUDING ANY GENERAL, SPECIAL, INCIDENTAL OR CONSEQUENTIAL DAMAGES ARISING
-OUT OF THE USE OR INABILITY TO USE THE PROGRAM (INCLUDING BUT NOT LIMITED
-TO LOSS OF DATA OR DATA BEING RENDERED INACCURATE OR LOSSES SUSTAINED BY
-YOU OR THIRD PARTIES OR A FAILURE OF THE PROGRAM TO OPERATE WITH ANY OTHER
-PROGRAMS), EVEN IF SUCH HOLDER OR OTHER PARTY HAS BEEN ADVISED OF THE
-POSSIBILITY OF SUCH DAMAGES.
+msgid "1 - Mode decision"
+msgstr "1 - ????????????"
 
-		     END OF TERMS AND CONDITIONS
+msgid "1 - Very low"
+msgstr "1 - ?????????"
 
-	    How to Apply These Terms to Your New Programs
+msgid "1- Very low"
+msgstr "1- ?????????"
 
-  If you develop a new program, and you want it to be of the greatest
-possible use to the public, the best way to achieve this is to make it
-free software which everyone can redistribute and change under these terms.
+msgid "11x11"
+msgstr "11x11"
 
-  To do so, attach the following notices to the program.  It is safest
-to attach them to the start of each source file to most effectively
-convey the exclusion of warranty; and each file should have at least
-the "copyright" line and a pointer to where the full notice is found.
+msgid "15x15"
+msgstr "15x15"
 
-    <one line to give the program's name and a brief idea of what it does.>
-    Copyright (C) <year>  <name of author>
+msgid "16 round up"
+msgstr "16 ??????"
 
-    This program is free software; you can redistribute it and/or modify
-    it under the terms of the GNU General Public License as published by
-    the Free Software Foundation; either version 2 of the License, or
-    (at your option) any later version.
+msgid "16:9"
+msgstr "16:9"
 
-    This program is distributed in the hope that it will be useful,
-    but WITHOUT ANY WARRANTY; without even the implied warranty of
-    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-    GNU General Public License for more details.
+msgid "180 degrees"
+msgstr "180 ???"
 
-    You should have received a copy of the GNU General Public License
-    along with this program; if not, write to the Free Software
-    Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA  02110-1301  USA
+msgid "180??"
+msgstr "180??"
 
+msgid "1:1"
+msgstr "1:1"
 
-Also add information on how to contact you by electronic and paper mail.
+msgid "1st Pass"
+msgstr "???????????????"
 
-If the program is interactive, make it output a short notice like this
-when it starts in an interactive mode:
+msgid "1x 74 min. CD"
+msgstr "1x 74 ?????? CD"
 
-    Gnomovision version 69, Copyright (C) year name of author
-    Gnomovision comes with ABSOLUTELY NO WARRANTY; for details type `show w'.
-    This is free software, and you are welcome to redistribute it
-    under certain conditions; type `show c' for details.
+msgid "1x 80 min. CD"
+msgstr "1x 80 ?????? CD"
 
-The hypothetical commands `show w' and `show c' should show the appropriate
-parts of the General Public License.  Of course, the commands you use may
-be called something other than `show w' and `show c'; they could even be
-mouse-clicks or menu items--whatever suits your program.
+msgid "1x1"
+msgstr "1x1"
 
-You should also get your employer (if you work as a programmer) or your
-school, if any, to sign a "copyright disclaimer" for the program, if
-necessary.  Here is a sample; alter the names:
+msgid "2"
+msgstr "2"
 
-  Yoyodyne, Inc., hereby disclaims all copyright interest in the program
-  `Gnomovision' (which makes passes at compilers) written by James Hacker.
+msgid "2  - Very Low"
+msgstr "2  - ?????????"
 
-  <signature of Ty Coon>, 1 April 1989
-  Ty Coon, President of Vice
+msgid "2 - Limited search"
+msgstr "2 - ????????????"
 
-This General Public License does not permit incorporating your program into
-proprietary programs.  If your program is a subroutine library, you may
-consider it more useful to permit linking proprietary applications with the
-library.  If this is what you want to do, use the GNU Library General
-Public License instead of this License.
ge framerate while keeping duration.
DVD (mpeg2enc)
Divx like packed vop, DO NOT SET, it is ugly
-Is it running ?
ecise.
-Do you want to load it  ?
-(It will be deleted in all cases, you should save it if you want to keep it)
-Avidemux can use another mode which is safe but YOU WILL LOSE FRAME ACCURACY.
-Do you want to use that mode?
 Configuration
-file image mult. by this when loaded):
-(where A = (1-alpha)*A + alpha*(curr_frame + lookahead)):
owed for H.263
oking B-frames
-multiplied by this):
 directory
s not (s)QCIF
+msgid "2 - Low"
+msgstr "2 - ???"
 
-Continue anyway?
-Please move the A marker.
-Go to Audio->MainTrack to select the active one.
-Either change codec or use the mixer filter to have less channels.
-Continue ?
- Do you want to index it?
e:
- continue anyway ?
-1.) "resize" / "add border" / "crop" each stream to the same resolution
-2.) concatinate them together
-It is needed to create PSP compatible video.
-It is needed to create FLV  video.
- Enable it ?
-in file image when loaded):
uration
-Report-Msgid-Bugs-To: 
-POT-Creation-Date: 2009-11-17 19:36+0800 
-PO-Revision-Date: 2009-11-17 19:36+0800
-Last-Translator: Dewei Zhu <zdw163 at hotmail.com>
-Language-Team: 
-MIME-Version: 1.0
-Content-Type: text/plain; charset=UTF-8
-Content-Transfer-Encoding: 8bit
-X-Poedit-Language: Chinese (Simplified)
-X-Poedit-Country: CHINA
-
- ????????????????????????????????????
+msgid "2- Low"
+msgstr "2- ???"
 
-??????????????????
+msgid "21x21"
+msgstr "21x21"
 
-???????????????????????????
-??????????????????????????????????????? 256!
+msgid "270 degrees"
+msgstr "270 ???"
 
-?????? ?????? ??????????????????????????????????????????????????????
V ????????????????????? 720*576 at 25
+msgid "270??"
+msgstr "270??"
 
-?????????????????? "?????? -> ?????? VBR ????????????" ????????????
-????????? GNU ??????????????????????????? (GNU General Public License) ??????????????????
-??????????????????????????????
+msgid "2nd Pass"
+msgstr "???????????????"
 
-		    GNU GENERAL PUBLIC LICENSE
-		       Version 2, June 1991
+msgid "2x 74 min. CD"
+msgstr "2x 74 ?????? CD"
 
- Copyright (C) 1989, 1991 Free Software Foundation, Inc.
-                       51 Franklin St, Fifth Floor, Boston, MA  02110-1301  USA
- Everyone is permitted to copy and distribute verbatim copies
- of this license document, but changing it is not allowed.
+msgid "2x 80 min. CD"
+msgstr "2x 80 ?????? CD"
 
-			    Preamble
+msgid "3  - Low"
+msgstr "3  - ???"
 
-  The licenses for most software are designed to take away your
-freedom to share and change it.  By contrast, the GNU General Public
-License is intended to guarantee your freedom to share and change free
-software--to make sure the software is free for all its users.  This
-General Public License applies to most of the Free Software
-Foundation's software and to any other program whose authors commit to
-using it.  (Some other Free Software Foundation software is covered by
-the GNU Library General Public License instead.)  You can apply it to
-your programs, too.
+msgid "3 - Medium"
+msgstr "3 - ??????"
 
-  When we speak of free software, we are referring to freedom, not
-price.  Our General Public Licenses are designed to make sure that you
-have the freedom to distribute copies of free software (and charge for
-this service if you wish), that you receive source code or can get it
-if you want it, that you can change the software or use pieces of it
-in new free programs; and that you know you can do these things.
+msgid "3 - Medium search"
+msgstr "3 - ????????????"
 
-  To protect your rights, we need to make restrictions that forbid
-anyone to deny you these rights or to ask you to surrender the rights.
-These restrictions translate to certain responsibilities for you if you
-distribute copies of the software, or if you modify it.
+msgid "3- Medium"
+msgstr "3- ??????"
 
-  For example, if you distribute copies of such a program, whether
-gratis or for a fee, you must give the recipients all the rights that
-you have.  You must make sure that they, too, receive or can get the
-source code.  And you must show them these terms so they know their
-rights.
+msgid "3:2 Pulldown"
+msgstr "3:2 Pulldown"
 
-  We protect your rights with two steps: (1) copyright the software, and
-(2) offer you this license which gives you legal permission to copy,
-distribute and/or modify the software.
+msgid "3:2 pulldown"
+msgstr "3:2 pulldown"
 
-  Also, for each author's protection and ours, we want to make certain
-that everyone understands that there is no warranty for this free
-software.  If the software is modified by someone else and passed on, we
-want its recipients to know that what they have is not the original, so
-that any problems introduced by others will not reflect on the original
-authors' reputations.
+msgid "3x3"
+msgstr "3x3"
 
-  Finally, any free program is threatened constantly by software
-patents.  We wish to avoid the danger that redistributors of a free
-program will individually obtain patent licenses, in effect making the
-program proprietary.  To prevent this, we have made it clear that any
-patent must be licensed for everyone's free use or not licensed at all.
+msgid "4  - Medium"
+msgstr "4  - ???"
 
-  The precise terms and conditions for copying, distribution and
-modification follow.
+msgid "4 - High"
+msgstr "4 - ???"
 
-		    GNU GENERAL PUBLIC LICENSE
-   TERMS AND CONDITIONS FOR COPYING, DISTRIBUTION AND MODIFICATION
+msgid "4 - Wide search"
+msgstr "4 - ????????????"
 
-  0. This License applies to any program or other work which contains
-a notice placed by the copyright holder saying it may be distributed
-under the terms of this General Public License.  The "Program", below,
-refers to any such program or work, and a "work based on the Program"
-means either the Program or any derivative work under copyright law:
-that is to say, a work containing the Program or a portion of it,
-either verbatim or with modifications and/or translated into another
-language.  (Hereinafter, translation is included without limitation in
-the term "modification".)  Each licensee is addressed as "you".
+msgid "4 fields check"
+msgstr "4 ????????????"
 
-Activities other than copying, distribution and modification are not
-covered by this License; they are outside its scope.  The act of
-running the Program is not restricted, and the output from the Program
-is covered only if its contents constitute a work based on the
-Program (independent of having been made by running the Program).
-Whether that is true depends on what the Program does.
+msgid "4 fields check (no avg)"
+msgstr "4 ???????????? (no avg)"
 
-  1. You may copy and distribute verbatim copies of the Program's
-source code as you receive it, in any medium, provided that you
-conspicuously and appropriately publish on each copy an appropriate
-copyright notice and disclaimer of warranty; keep intact all the
-notices that refer to this License and to the absence of any warranty;
-and give any other recipients of the Program a copy of this License
-along with the Program.
+msgid "4- High"
+msgstr "4- ???"
 
-You may charge a fee for the physical act of transferring a copy, and
-you may at your option offer warranty protection in exchange for a fee.
+msgid "4:3"
+msgstr "4:3"
 
-  2. You may modify your copy or copies of the Program or any portion
-of it, thus forming a work based on the Program, and copy and
-distribute such modifications or work under the terms of Section 1
-above, provided that you also meet all of these conditions:
+msgid "4_MV"
+msgstr "4_MV"
 
-    a) You must cause the modified files to carry prominent notices
-    stating that you changed the files and the date of any change.
+msgid "4x4 Intra search"
+msgstr "4x4 ????????????"
 
-    b) You must cause any work that you distribute or publish, that in
-    whole or in part contains or is derived from the Program or any
-    part thereof, to be licensed as a whole at no charge to all third
-    parties under the terms of this License.
+msgid "4x4, 4x8 and 8x4 P-frame search"
+msgstr "4x4, 4x8 ??? 8x4 P-frame ??????"
 
-    c) If the modified program normally reads commands interactively
-    when run, you must cause it, when started running for such
-    interactive use in the most ordinary way, to print or display an
-    announcement including an appropriate copyright notice and a
-    notice that there is no warranty (or else, saying that you provide
-    a warranty) and that users may redistribute the program under
-    these conditions, and telling the user how to view a copy of this
-    License.  (Exception: if the Program itself is interactive but
-    does not normally print such an announcement, your work based on
-    the Program is not required to print an announcement.)
+msgid "5  - High (Default)"
+msgstr "5  - ??? (??????)"
 
-These requirements apply to the modified work as a whole.  If
-identifiable sections of that work are not derived from the Program,
-and can be reasonably considered independent and separate works in
-themselves, then this License, and its terms, do not apply to those
-sections when you distribute them as separate works.  But when you
-distribute the same sections as part of a whole which is a work based
-on the Program, the distribution of the whole must be on the terms of
-this License, whose permissions for other licensees extend to the
-entire whole, and thus to each and every part regardless of who wrote it.
+msgid "5 - Very high"
+msgstr "5 - ?????????"
 
-Thus, it is not the intent of this section to claim rights or contest
-your rights to work written entirely by you; rather, the intent is to
-exercise the right to control the distribution of derivative or
-collective works based on the Program.
+msgid "5 channels"
+msgstr "5 ??????"
 
-In addition, mere aggregation of another work not based on the Program
-with the Program (or with a work based on the Program) on a volume of
-a storage or distribution medium does not bring the other work under
-the scope of this License.
+msgid "5 fields check"
+msgstr "5 ????????????"
 
-  3. You may copy and distribute the Program (or a work based on it,
-under Section 2) in object code or executable form under the terms of
-Sections 1 and 2 above provided that you also do one of the following:
+msgid "5 fields check (no avg)"
+msgstr "5 ???????????? (no avg)"
 
-    a) Accompany it with the complete corresponding machine-readable
-    source code, which must be distributed under the terms of Sections
-    1 and 2 above on a medium customarily used for software interchange; or,
+msgid "5- Very High"
+msgstr "5- ?????????"
 
-    b) Accompany it with a written offer, valid for at least three
-    years, to give any third party, for a charge no more than your
-    cost of physically performing source distribution, a complete
-    machine-readable copy of the corresponding source code, to be
-    distributed under the terms of Sections 1 and 2 above on a medium
-    customarily used for software interchange; or,
+msgid "5.1"
+msgstr "5.1"
 
-    c) Accompany it with the information you received as to the offer
-    to distribute corresponding source code.  (This alternative is
-    allowed only for noncommercial distribution and only if you
-    received the program in object code or executable form with such
-    an offer, in accord with Subsection b above.)
+msgid "5x5"
+msgstr "5x5"
 
-The source code for a work means the preferred form of the work for
-making modifications to it.  For an executable work, complete source
-code means all the source code for all modules it contains, plus any
-associated interface definition files, plus the scripts used to
-control compilation and installation of the executable.  However, as a
-special exception, the source code distributed need not include
-anything that is normally distributed (in either source or binary
-form) with the major components (compiler, kernel, and so on) of the
-operating system on which the executable runs, unless that component
-itself accompanies the executable.
+msgid "6  - Very High"
+msgstr "6  - ?????????"
 
-If distribution of executable or object code is made by offering
-access to copy from a designated place, then offering equivalent
-access to copy the source code from the same place counts as
-distribution of the source code, even though third parties are not
-compelled to copy the source along with the object code.
+msgid "6 - Ultra high"
+msgstr "6 - ??????"
 
-  4. You may not copy, modify, sublicense, or distribute the Program
-except as expressly provided under this License.  Any attempt
-otherwise to copy, modify, sublicense or distribute the Program is
-void, and will automatically terminate your rights under this License.
-However, parties who have received copies, or rights, from you under
-this License will not have their licenses terminated so long as such
-parties remain in full compliance.
+msgid "6- Ultra High"
+msgstr "6- ??????"
 
-  5. You are not required to accept this License, since you have not
-signed it.  However, nothing else grants you permission to modify or
-distribute the Program or its derivative works.  These actions are
-prohibited by law if you do not accept this License.  Therefore, by
-modifying or distributing the Program (or any work based on the
-Program), you indicate your acceptance of this License to do so, and
-all its terms and conditions for copying, distributing or modifying
-the Program or works based on it.
+msgid "6B - Very High (RDO on B-frames)"
+msgstr "6B - ????????? (??? B-????????? RDO)"
 
-  6. Each time you redistribute the Program (or any work based on the
-Program), the recipient automatically receives a license from the
-original licensor to copy, distribute or modify the Program subject to
-these terms and conditions.  You may not impose any further
-restrictions on the recipients' exercise of the rights granted herein.
-You are not responsible for enforcing compliance by third parties to
-this License.
+msgid "7  - Ultra High"
+msgstr "7 - ??????"
 
-  7. If, as a consequence of a court judgment or allegation of patent
-infringement or for any other reason (not limited to patent issues),
-conditions are imposed on you (whether by court order, agreement or
-otherwise) that contradict the conditions of this License, they do not
-excuse you from the conditions of this License.  If you cannot
-distribute so as to satisfy simultaneously your obligations under this
-License and any other pertinent obligations, then as a consequence you
-may not distribute the Program at all.  For example, if a patent
-license would not permit royalty-free redistribution of the Program by
-all those who receive copies directly or indirectly through you, then
-the only way you could satisfy both it and this License would be to
-refrain entirely from distribution of the Program.
+msgid "7B - Ultra High (RDO on B-frames)"
+msgstr "7B - ?????? (??? B-????????? RDO)"
 
-If any portion of this section is held invalid or unenforceable under
-any particular circumstance, the balance of the section is intended to
-apply and the section as a whole is intended to apply in other
-circumstances.
+msgid "7x7"
+msgstr "7x7"
 
-It is not the purpose of this section to induce you to infringe any
-patents or other property right claims or to contest validity of any
-such claims; this section has the sole purpose of protecting the
-integrity of the free software distribution system, which is
-implemented by public license practices.  Many people have made
-generous contributions to the wide range of software distributed
-through that system in reliance on consistent application of that
-system; it is up to the author/donor to decide if he or she is willing
-to distribute software through any other system and a licensee cannot
-impose that choice.
+msgid "8-bit PCM"
+msgstr "8-?????? PCM"
 
-This section is intended to make thoroughly clear what is believed to
-be a consequence of the rest of this License.
+msgid "8x8 Intra search"
+msgstr "8x8 ????????????"
 
-  8. If the distribution and/or use of the Program is restricted in
-certain countries either by patents or by copyrighted interfaces, the
-original copyright holder who places the Program under this License
-may add an explicit geographical distribution limitation excluding
-those countries, so that distribution is permitted only in or among
-countries not thus excluded.  In such case, this License incorporates
-the limitation as if written in the body of this License.
+msgid "8x8 Transform"
+msgstr "8x8 ??????"
 
-  9. The Free Software Foundation may publish revised and/or new versions
-of the General Public License from time to time.  Such new versions will
-be similar in spirit to the present version, but may differ in detail to
-address new problems or concerns.
+msgid "8x8, 8x16 and 16x8 B-frame search"
+msgstr "8x8, 8x16 ??? 16x8 B-????????????"
 
-Each version is given a distinguishing version number.  If the Program
-specifies a version number of this License which applies to it and "any
-later version", you have the option of following the terms and conditions
-either of that version or of any later version published by the Free
-Software Foundation.  If the Program does not specify a version number of
-this License, you may choose any version ever published by the Free Software
-Foundation.
+msgid "8x8, 8x16 and 16x8 P-frame search"
+msgstr "8x8, 8x16 ??? 16x8 P-frame ??????"
 
-  10. If you wish to incorporate parts of the Program into other free
-programs whose distribution conditions are different, write to the author
-to ask for permission.  For software which is copyrighted by the Free
-Software Foundation, write to the Free Software Foundation; we sometimes
-make exceptions for this.  Our decision will be guided by the two goals
-of preserving the free status of all derivatives of our free software and
-of promoting the sharing and reuse of software generally.
+msgid "90 degrees"
+msgstr "90 ???"
 
-			    NO WARRANTY
+msgid "90??"
+msgstr "90??"
 
-  11. BECAUSE THE PROGRAM IS LICENSED FREE OF CHARGE, THERE IS NO WARRANTY
-FOR THE PROGRAM, TO THE EXTENT PERMITTED BY APPLICABLE LAW.  EXCEPT WHEN
-OTHERWISE STATED IN WRITING THE COPYRIGHT HOLDERS AND/OR OTHER PARTIES
-PROVIDE THE PROGRAM "AS IS" WITHOUT WARRANTY OF ANY KIND, EITHER EXPRESSED
-OR IMPLIED, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF
-MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  THE ENTIRE RISK AS
-TO THE QUALITY AND PERFORMANCE OF THE PROGRAM IS WITH YOU.  SHOULD THE
-PROGRAM PROVE DEFECTIVE, YOU ASSUME THE COST OF ALL NECESSARY SERVICING,
-REPAIR OR CORRECTION.
+msgid "9x9"
+msgstr "9x9"
 
-  12. IN NO EVENT UNLESS REQUIRED BY APPLICABLE LAW OR AGREED TO IN WRITING
-WILL ANY COPYRIGHT HOLDER, OR ANY OTHER PARTY WHO MAY MODIFY AND/OR
-REDISTRIBUTE THE PROGRAM AS PERMITTED ABOVE, BE LIABLE TO YOU FOR DAMAGES,
-INCLUDING ANY GENERAL, SPECIAL, INCIDENTAL OR CONSEQUENTIAL DAMAGES ARISING
-OUT OF THE USE OR INABILITY TO USE THE PROGRAM (INCLUDING BUT NOT LIMITED
-TO LOSS OF DATA OR DATA BEING RENDERED INACCURATE OR LOSSES SUSTAINED BY
-YOU OR THIRD PARTIES OR A FAILURE OF THE PROGRAM TO OPERATE WITH ANY OTHER
-PROGRAMS), EVEN IF SUCH HOLDER OR OTHER PARTY HAS BEEN ADVISED OF THE
-POSSIBILITY OF SUCH DAMAGES.
+msgid ":"
+msgstr ":"
 
-		     END OF TERMS AND CONDITIONS
+msgid "<b >Active Filters</b>"
+msgstr "<b >???????????????</b>"
 
-	    How to Apply These Terms to Your New Programs
+msgid "<b>Audio Bitrate</b>"
+msgstr "<b>???????????????</b>"
 
-  If you develop a new program, and you want it to be of the greatest
-possible use to the public, the best way to achieve this is to make it
-free software which everyone can redistribute and change under these terms.
+msgid "<b>Audio Codec:</b>"
+msgstr "<b>???????????????:</b>"
 
-  To do so, attach the following notices to the program.  It is safest
-to attach them to the start of each source file to most effectively
-convey the exclusion of warranty; and each file should have at least
-the "copyright" line and a pointer to where the full notice is found.
+msgid "<b>Audio Size:</b>"
+msgstr "<b>????????????:</b>"
 
-    <one line to give the program's name and a brief idea of what it does.>
-    Copyright (C) <year>  <name of author>
+msgid "<b>Audio</b>"
+msgstr "<b>??????</b>"
 
-    This program is free software; you can redistribute it and/or modify
-    it under the terms of the GNU General Public License as published by
-    the Free Software Foundation; either version 2 of the License, or
-    (at your option) any later version.
+msgid "<b>Available Filters</b>"
+msgstr "<b>???????????????</b>"
 
-    This program is distributed in the hope that it will be useful,
-    but WITHOUT ANY WARRANTY; without even the implied warranty of
-    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-    GNU General Public License for more details.
+msgid "<b>Average Bitrate:</b>"
+msgstr "<b>???????????????:</b>"
 
-    You should have received a copy of the GNU General Public License
-    along with this program; if not, write to the Free Software
-    Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA  02110-1301  USA
+msgid "<b>B-Frames</b>"
+msgstr "<b>B-??????</b>"
 
+msgid "<b>Bitmap</b>"
+msgstr "<b>?????????</b>"
 
-Also add information on how to contact you by electronic and paper mail.
+msgid "<b>Bitrate</b>"
+msgstr "<b>?????????</b>"
 
-If the program is interactive, make it output a short notice like this
-when it starts in an interactive mode:
+msgid "<b>Color Correction Matrix</b>"
+msgstr "<b>??????????????????</b>"
 
-    Gnomovision version 69, Copyright (C) year name of author
-    Gnomovision comes with ABSOLUTELY NO WARRANTY; for details type `show w'.
-    This is free software, and you are welcome to redistribute it
-    under certain conditions; type `show c' for details.
+msgid "<b>Container:</b>"
+msgstr "<b>??????:</b>"
 
-The hypothetical commands `show w' and `show c' should show the appropriate
-parts of the General Public License.  Of course, the commands you use may
-be called something other than `show w' and `show c'; they could even be
-mouse-clicks or menu items--whatever suits your program.
+msgid "<b>Elapsed:</b>"
+msgstr "<b>??????????????????:</b>"
 
-You should also get your employer (if you work as a programmer) or your
-school, if any, to sign a "copyright disclaimer" for the program, if
-necessary.  Here is a sample; alter the names:
+msgid ""
+"<b>Encoding is paused.</b>\n"
+"\n"
+"You can either resume or Abort it."
+msgstr ""
+"<b>??????????????????</b>\n"
+"\n"
+"???????????????????????????"
 
-  Yoyodyne, Inc., hereby disclaims all copyright interest in the program
-  `Gnomovision' (which makes passes at compilers) written by James Hacker.
+msgid "<b>Extra Video Properties</b>"
+msgstr "<b>?????????????????????</b>"
 
-  <signature of Ty Coon>, 1 April 1989
-  Ty Coon, President of Vice
+msgid "<b>Format</b>"
+msgstr "<b>??????</b>"
 
-This General Public License does not permit incorporating your program into
-proprietary programs.  If your program is a subroutine library, you may
-consider it more useful to permit linking proprietary applications with the
-library.  If this is what you want to do, use the GNU Library General
-Public License instead of this License.
????????????
????????????????????)
??????????
-?????????????????????
?
-??????????????? ?
-(???????????????????????????????????????????????????????????????????????????)
-Avidemux ??????????????????????????????????????????<b>??????????????????????????????</b>???
-??????????????????????????? ?
rnelDeint)
-??????????????????????????????????????????)(_M):
-(?????? A = (1-alpha)*A + alpha*(????????????+???????????????)):
?????:
sub ???????????????
-??????????????????????????????????????????)(_M):
????????????????????
????
???????????????
+msgid "<b>Frames/sec:</b>"
+msgstr "<b>??????/???:</b>"
 
-??????????????????????????????
-??????????????? A ???
-?????? ??????->???????????? ???????????????????????????
-????????????????????????????????????????????????????????????????????????
-??????????
- ????????????????
4]
- ?????????????????????????????? ?
-1.) "????????????" / "????????????" / "??????" ????????????????????????????????????
-2.) ??????????????????
-?????? PSP ???????????????????????????
-?????? FLV ?????????????????????
- ???????????? ?
-????????????????????????????????????):
?????????????????????? (%s)
\ No newline at end of file
+msgid "<b>Gamma</b>"
+msgstr "<b>Gamma</b>"
+
+msgid "<b>Hue:</b>"
+msgstr "<b>??????:</b>"
+
+msgid "<b>Inter Matrix</b>"
+msgstr "<b>????????????</b>"
+
+msgid "<b>Intra Matrix</b>"
+msgstr "<b>????????????</b>"
+
+msgid ""
+"<b>Matrix Warning :</b>\n"
+"all above values are normalized to 256!"
+msgstr ""
+"<b>???????????? :</b>\n"
+"??????????????????????????????????????? 256!"
+
+msgid "<b>Misc. Options</b>"
+msgstr "<b>??????. ?????????</b>"
+
+msgid "<b>Misc</b>"
+msgstr "<b>??????</b>"
+
+msgid "<b>Mode</b>"
+msgstr "<b>??????</b>"
+
+msgid "<b>More Rate Settings</b>"
+msgstr "<b>??????????????????</b>"
+
+msgid "<b>Motion Estimation</b>"
+msgstr "<b>????????????</b>"
+
+msgid "<b>Partition Macroblocks</b>"
+msgstr "<b>??????????????????</b>"
+
+msgid "<b>Phase:</b>"
+msgstr "<b>??????:</b>"
+
+msgid "<b>Preview</b>"
+msgstr "<b>??????</b>"
+
+msgid "<b>Processed Frames:</b>"
+msgstr "<b>?????????????????????</b>"
+
+msgid "<b>Quantiser:</b>"
+msgstr "<b>?????????:</b>"
+
+msgid "<b>Quantization Limits</b>"
+msgstr "<b>??????????????????</b>"
+
+msgid "<b>Quantization Matrices</b>"
+msgstr "<b>??????????????????</b>"
+
+msgid "<b>Quantizers</b>"
+msgstr "<b>?????????</b>"
+
+msgid "<b>Result</b>"
+msgstr "<b>??????</b>"
+
+msgid "<b>Sample Aspect Ratio</b>"
+msgstr "<b>??????????????????</b>"
+
+msgid "<b>Saturation:</b>"
+msgstr "<b>?????????:</b>"
+
+msgid "<b>Scene change Treshold</b>"
+msgstr "<b>?????????????????????</b>"
+
+msgid "<b>Selection</b>"
+msgstr "<b>????????????</b>"
+
+msgid "<b>Settings</b>"
+msgstr "<b>??????</b>"
+
+msgid "<b>Stats</b>"
+msgstr "<b>??????</b>"
+
+msgid "<b>Target</b>"
+msgstr "<b>??????</b>"
+
+msgid "<b>Time Remaining:</b>"
+msgstr "<b>???????????????:</b>"
+
+msgid "<b>Time remaining:</b>"
+msgstr "<b>???????????????:</b>"
+
+msgid "<b>Total Frames:</b>"
+msgstr "<b>????????????:</b>"
+
+msgid "<b>Total Size:</b>"
+msgstr "<b>?????????:</b>"
+
+msgid "<b>Video Buffer Verifier</b>"
+msgstr "<b>?????????????????????</b>"
+
+msgid "<b>Video Codec:</b>"
+msgstr "<b>???????????????:</b>"
+
+msgid "<b>Video Size:</b>"
+msgstr "<b>????????????:</b>"
+
+msgid "<b>Video</b>"
+msgstr "<b>??????</b>"
+
+msgid "<b>frame2</b>"
+msgstr "<b>??????2</b>"
+
+msgid "A = convolve(P); Load convolution kernel from file"
+msgstr "A = ??????(P); ???????????????????????????"
+
+msgid "A = floating point constant value"
+msgstr "A = ??????????????????"
+
+msgid "A = pixel from image file as float; Load image from file"
+msgstr "A = ????????????????????????????????????; ?????????????????????"
+
+msgid "A = pixel from image file as integer; Load image from file"
+msgstr "A = ?????????????????????????????????; ?????????????????????"
+
+msgid "A = rolling average of pixel: A = A*(1-alpha)+(P*alpha)"
+msgstr "A = ????????????????????????: A = A*(1-alpha)+(P*alpha)"
+
+msgid ""
+"A fatal error has occurred.\n"
+"\n"
+"Click OK to generate debug information. This may take a few minutes to "
+"complete."
+msgstr ""
+"??????????????????????????????\n"
+"\n"
+"?????? ?????? ??????????????????????????????????????????????????????"
+
+msgid "A value of 20 will give 20% more bits to every I-frame"
+msgstr "20 ?????????????????? 2 ????????????????????? I-??????"
+
+msgid "A variant of stabilize."
+msgstr "????????????????????????"
+
+msgid "A:"
+msgstr "A:"
+
+msgid "AAC"
+msgstr "AAC"
+
+msgid "AB at ODU format (includes shape info)"
+msgstr "AB at ODU ?????? (??????????????????)"
+
+msgid "ABR"
+msgstr "ABR"
+
+msgid "AC3"
+msgstr "AC3"
+
+msgid "ALSA"
+msgstr "ALSA"
+
+msgid "ALSA _device:"
+msgstr "ALSA??????(_D):"
+
+msgid "AMR-NB"
+msgstr "AMR-NB"
+
+msgid "ASHARP"
+msgstr "ASHARP"
+
+msgid "ASS"
+msgstr "ASS"
+
+msgid "ASharp by MarcFD"
+msgstr "ASharp ????????? MarcFD"
+
+msgid "AVI"
+msgstr "AVI"
+
+msgid "AVI Muxer Options"
+msgstr "AVI ???????????????"
+
+msgid "AVI _Muxer Options"
+msgstr "AVI ???????????????(_M)"
+
+msgid "AVI, dual audio"
+msgstr "AVI, ?????????"
+
+msgid "AVI, pack VOP"
+msgstr "AVI, ????????????VOP"
+
+msgid "AVI, unpack VOP"
+msgstr "AVI, ??????????????????VOP"
+
+msgid "A_dd to Joblist..."
+msgstr "?????????????????????...(_D)"
+
+msgid "A_uto"
+msgstr "??????(_U)"
+
+msgid "A_vg Quantizer:"
+msgstr "???????????????:"
+
+msgid "Abort"
+msgstr "??????"
+
+msgid "Abort Requested"
+msgstr "??????????????????"
+
+msgid "Aborted"
+msgstr "?????????"
+
+msgid "Aborting"
+msgstr "????????????"
+
+msgid "Aborting."
+msgstr "????????????"
+
+msgid "Above Normal"
+msgstr "????????????"
+
+msgid "Above normal"
+msgstr "????????????"
+
+msgid "Adaptative DCT"
+msgstr "????????? DCT"
+
+msgid "Adaptative sharpener by MarcFD."
+msgstr "?????????????????????????????? MarcFD"
+
+msgid "Add ASS/SSA subtitles to the picture."
+msgstr "?????? ASS/SSA ??????????????????"
+
+msgid "Add Borders"
+msgstr "????????????"
+
+msgid "Add Framenumber"
+msgstr "??????????????????"
+
+msgid "Add Video Filter"
+msgstr "??????????????????"
+
+msgid "Add a png as logo."
+msgstr "???????????? png ???????????????"
+
+msgid "Add black borders"
+msgstr "????????????"
+
+msgid "Add pure black border(s). Enlarges the picture."
+msgstr "????????????????????????????????????"
+
+msgid "Add selected filter to the Active Filters list"
+msgstr "?????????????????????????????????????????????"
+
+msgid "Add srt/sub subtitles to the picture."
+msgstr "?????? srt/sub ??????????????????"
+
+msgid "Adjust contrast, brightness and colors."
+msgstr "?????????????????????????????????"
+
+msgid "Adjust contrast, brightness, saturation and gamma."
+msgstr "?????????????????????????????????????????????"
+
+msgid "Adjust hue and saturation."
+msgstr "???????????????????????????"
+
+msgid "Advanced"
+msgstr "??????"
+
+msgid "Advanced Simple Profile"
+msgstr "???????????????"
+
+msgid "Aften"
+msgstr "Aften"
+
+msgid "Alert"
+msgstr "??????"
+
+msgid "All"
+msgstr "??????"
+
+msgid "All FFmpeg deinterlace filters (bicubic, median, ...)."
+msgstr "?????? FFmpeg ??????????????? (?????????????????????...)???"
+
+msgid "All parameters must be even and within range."
+msgstr "????????????????????????????????????????????????"
+
+msgid ""
+"Allow B-frames to make references non-linearly to another B-frame (instead "
+"of creating a duplicate copy)"
+msgstr "?????? B-????????????????????? B-????????????????????????(?????????????????????????????????)"
+
+msgid ""
+"Allowed variance of average bitrate. Lower values mean less variance. Higher "
+"values mean more variance."
+msgstr ""
+"????????????????????????????????????????????????????????????????????????????????????????????????????????????"
+
+msgid ""
+"Allowed variance of average quantizer or quality. Lower values mean less "
+"variance. Higher values mean more variance. Note that 0 means constant "
+"quality while 1 means constant fluctuation. Recommended 0.6."
+msgstr ""
+"???????????????????????????????????????????????????????????????????????????????????????????????????????????????"
+"??????????????????0?????????????????????????????????1????????????????????????????????? 0.6???"
+
+msgid "Alter colors (auto white balance etc...). Ported from Avisynth."
+msgstr "???????????? (??????????????????...)?????? Avisynth ?????????"
+
+msgid "AltiVec"
+msgstr "AltiVec"
+
+msgid "Always"
+msgstr "??????"
+
+msgid "An audio track is necessary to create such file"
+msgstr "?????????????????????????????????????????????"
+
+msgid "Animated Menu"
+msgstr "???????????????"
+
+msgid "Anime"
+msgstr "??????"
+
+msgid "Application path/name (/usr/bin/sox...)"
+msgstr "?????????????????????/?????? (/usr/bin/sox...)"
+
+msgid "Apply blind postprocessing."
+msgstr "???????????????????????????"
+
+msgid ""
+"Apply operation like P'=P*A, P-A, P+A, etc. using a convolution, rolling "
+"average, image from file, or constant"
+msgstr "??????????????? P'=P*A, P-A, P+A ???????????????????????????????????????????????????????????????"
+
+msgid "Apply the current filter only to a part of the file"
+msgstr "????????????????????????????????????????????????"
+
+msgid "Arabic"
+msgstr "?????????"
+
+msgid "Are you sure you want to delete %s job ?"
+msgstr "??????????????? %s ?????? ?"
+
+msgid "Are you sure you want to delete all jobs ?"
+msgstr "???????????????????????????"
+
+msgid "Are you sure?"
+msgstr "????????????"
+
+msgid "Area com_bing threshold:"
+msgstr "???????????????????????????:"
+
+msgid "Artefact _protection threshold:"
+msgstr "?????????????????????(_P):"
+
+msgid "As Input"
+msgstr "????????????"
+
+msgid "Aspect Ratio:"
+msgstr "????????????:"
+
+msgid "Aspect _ratio:"
+msgstr "????????????(_R):"
+
+msgid "At the moment, the DV codec only accepts 720*576 at 25"
+msgstr "???????????? DV ????????????????????? 720*576 at 25"
+
+msgid "Attempt to open %s failed!"
+msgstr "??????????????? %s ?????????"
+
+msgid "Audio"
+msgstr "??????"
+
+msgid "Audio Codecs"
+msgstr "???????????????"
+
+msgid "Audio Configuration"
+msgstr "????????????"
+
+msgid "Audio Filters"
+msgstr "????????????"
+
+msgid "Audio bitrate in kb/s for track 1 (0 for no audio)"
+msgstr "?????? 1  ?????????????????? kb/s (0 ????????????)"
+
+msgid "Audio bitrate in kb/s for track 2 (optional)"
+msgstr "?????? 2  ?????????????????? kb/s (????????????)"
+
+msgid "Audio filters"
+msgstr "????????????"
+
+msgid "Audio must be mp3 for flv output."
+msgstr "flv ?????????????????? mp3"
+
+msgid "Audio size (MB):"
+msgstr "???????????? (MB):"
+
+msgid "Audio track is not suitable"
+msgstr "??????????????????"
+
+msgid "Audio/video file information"
+msgstr "??????/?????? ??????"
+
+msgid "Audio/video time shift (ms)"
+msgstr "??????/?????? ???????????? (ms)"
+
+msgid "AudioCodec"
+msgstr "???????????????"
+
+msgid "Auto"
+msgstr "??????"
+
+msgid "Auto (might not work)"
+msgstr "?????? (????????????)"
+
+msgid "Auto Crop"
+msgstr "????????????"
+
+msgid "Auto Wizard"
+msgstr "????????????"
+
+msgid "Auto-detect"
+msgstr "????????????"
+
+msgid "AutoGain"
+msgstr "????????????"
+
+msgid "AutoWhite"
+msgstr "????????????"
+
+msgid "Automatic (max -3 dB)"
+msgstr "?????? (max -3 dB)"
+
+msgid "Automatically _build VBR map"
+msgstr "???????????????????????????(VBR)??????(_B)"
+
+msgid "Automatically _index MPEG files"
+msgstr "???????????? MPEG ??????(_I)"
+
+msgid "Automatically _rebuild index"
+msgstr "????????????????????????(_R)"
+
+msgid "Automatically _swap A and B if A>B"
+msgstr "?????? A>B ?????????????????? A ??? B(_S)"
+
+msgid "Automatically remove _packed bitstream"
+msgstr "????????????????????????????????????(_P)"
+
+msgid "Automation"
+msgstr "?????????"
+
+msgid "Average bitrate (kb/s):"
+msgstr "??????????????? (kb/s):"
+
+msgid "Average bitrate:"
+msgstr "???????????????:"
+
+msgid "Average so far"
+msgstr "????????????????????????"
+
+msgid "Avidemux"
+msgstr "Avidemux"
+
+msgid ""
+"Avidemux detected VBR MP3 audio in this file. For keeping audio/video in "
+"sync, time map is needed. Build it now?\n"
+"\n"
+"You can do it later with \"Audio -> Build VBR Time Map\"."
+msgstr ""
+"Avidemux ??????????????????????????? VBR MP3 ?????????????????????????????????????????????????????????"
+"????????????????????????\n"
+"\n"
+"?????????????????? \"?????? -> ?????? VBR ????????????\" ????????????"
+
+msgid ""
+"Avidemux is free software; you can redistribute it and/or modify it\n"
+"under the terms of the GNU General Public License version 2\n"
+"as published by the Free Software Foundation.\n"
+"\n"
+"\t\t    GNU GENERAL PUBLIC LICENSE\n"
+"\t\t       Version 2, June 1991\n"
+"\n"
+" Copyright (C) 1989, 1991 Free Software Foundation, Inc.\n"
+"                       51 Franklin St, Fifth Floor, Boston, MA  02110-1301  "
+"USA\n"
+" Everyone is permitted to copy and distribute verbatim copies\n"
+" of this license document, but changing it is not allowed.\n"
+"\n"
+"\t\t\t    Preamble\n"
+"\n"
+"  The licenses for most software are designed to take away your\n"
+"freedom to share and change it.  By contrast, the GNU General Public\n"
+"License is intended to guarantee your freedom to share and change free\n"
+"software--to make sure the software is free for all its users.  This\n"
+"General Public License applies to most of the Free Software\n"
+"Foundation's software and to any other program whose authors commit to\n"
+"using it.  (Some other Free Software Foundation software is covered by\n"
+"the GNU Library General Public License instead.)  You can apply it to\n"
+"your programs, too.\n"
+"\n"
+"  When we speak of free software, we are referring to freedom, not\n"
+"price.  Our General Public Licenses are designed to make sure that you\n"
+"have the freedom to distribute copies of free software (and charge for\n"
+"this service if you wish), that you receive source code or can get it\n"
+"if you want it, that you can change the software or use pieces of it\n"
+"in new free programs; and that you know you can do these things.\n"
+"\n"
+"  To protect your rights, we need to make restrictions that forbid\n"
+"anyone to deny you these rights or to ask you to surrender the rights.\n"
+"These restrictions translate to certain responsibilities for you if you\n"
+"distribute copies of the software, or if you modify it.\n"
+"\n"
+"  For example, if you distribute copies of such a program, whether\n"
+"gratis or for a fee, you must give the recipients all the rights that\n"
+"you have.  You must make sure that they, too, receive or can get the\n"
+"source code.  And you must show them these terms so they know their\n"
+"rights.\n"
+"\n"
+"  We protect your rights with two steps: (1) copyright the software, and\n"
+"(2) offer you this license which gives you legal permission to copy,\n"
+"distribute and/or modify the software.\n"
+"\n"
+"  Also, for each author's protection and ours, we want to make certain\n"
+"that everyone understands that there is no warranty for this free\n"
+"software.  If the software is modified by someone else and passed on, we\n"
+"want its recipients to know that what they have is not the original, so\n"
+"that any problems introduced by others will not reflect on the original\n"
+"authors' reputations.\n"
+"\n"
+"  Finally, any free program is threatened constantly by software\n"
+"patents.  We wish to avoid the danger that redistributors of a free\n"
+"program will individually obtain patent licenses, in effect making the\n"
+"program proprietary.  To prevent this, we have made it clear that any\n"
+"patent must be licensed for everyone's free use or not licensed at all.\n"
+"\n"
+"  The precise terms and conditions for copying, distribution and\n"
+"modification follow.\n"
+"\n"
+"\t\t    GNU GENERAL PUBLIC LICENSE\n"
+"   TERMS AND CONDITIONS FOR COPYING, DISTRIBUTION AND MODIFICATION\n"
+"\n"
+"  0. This License applies to any program or other work which contains\n"
+"a notice placed by the copyright holder saying it may be distributed\n"
+"under the terms of this General Public License.  The \"Program\", below,\n"
+"refers to any such program or work, and a \"work based on the Program\"\n"
+"means either the Program or any derivative work under copyright law:\n"
+"that is to say, a work containing the Program or a portion of it,\n"
+"either verbatim or with modifications and/or translated into another\n"
+"language.  (Hereinafter, translation is included without limitation in\n"
+"the term \"modification\".)  Each licensee is addressed as \"you\".\n"
+"\n"
+"Activities other than copying, distribution and modification are not\n"
+"covered by this License; they are outside its scope.  The act of\n"
+"running the Program is not restricted, and the output from the Program\n"
+"is covered only if its contents constitute a work based on the\n"
+"Program (independent of having been made by running the Program).\n"
+"Whether that is true depends on what the Program does.\n"
+"\n"
+"  1. You may copy and distribute verbatim copies of the Program's\n"
+"source code as you receive it, in any medium, provided that you\n"
+"conspicuously and appropriately publish on each copy an appropriate\n"
+"copyright notice and disclaimer of warranty; keep intact all the\n"
+"notices that refer to this License and to the absence of any warranty;\n"
+"and give any other recipients of the Program a copy of this License\n"
+"along with the Program.\n"
+"\n"
+"You may charge a fee for the physical act of transferring a copy, and\n"
+"you may at your option offer warranty protection in exchange for a fee.\n"
+"\n"
+"  2. You may modify your copy or copies of the Program or any portion\n"
+"of it, thus forming a work based on the Program, and copy and\n"
+"distribute such modifications or work under the terms of Section 1\n"
+"above, provided that you also meet all of these conditions:\n"
+"\n"
+"    a) You must cause the modified files to carry prominent notices\n"
+"    stating that you changed the files and the date of any change.\n"
+"\n"
+"    b) You must cause any work that you distribute or publish, that in\n"
+"    whole or in part contains or is derived from the Program or any\n"
+"    part thereof, to be licensed as a whole at no charge to all third\n"
+"    parties under the terms of this License.\n"
+"\n"
+"    c) If the modified program normally reads commands interactively\n"
+"    when run, you must cause it, when started running for such\n"
+"    interactive use in the most ordinary way, to print or display an\n"
+"    announcement including an appropriate copyright notice and a\n"
+"    notice that there is no warranty (or else, saying that you provide\n"
+"    a warranty) and that users may redistribute the program under\n"
+"    these conditions, and telling the user how to view a copy of this\n"
+"    License.  (Exception: if the Program itself is interactive but\n"
+"    does not normally print such an announcement, your work based on\n"
+"    the Program is not required to print an announcement.)\n"
+"\n"
+"These requirements apply to the modified work as a whole.  If\n"
+"identifiable sections of that work are not derived from the Program,\n"
+"and can be reasonably considered independent and separate works in\n"
+"themselves, then this License, and its terms, do not apply to those\n"
+"sections when you distribute them as separate works.  But when you\n"
+"distribute the same sections as part of a whole which is a work based\n"
+"on the Program, the distribution of the whole must be on the terms of\n"
+"this License, whose permissions for other licensees extend to the\n"
+"entire whole, and thus to each and every part regardless of who wrote it.\n"
+"\n"
+"Thus, it is not the intent of this section to claim rights or contest\n"
+"your rights to work written entirely by you; rather, the intent is to\n"
+"exercise the right to control the distribution of derivative or\n"
+"collective works based on the Program.\n"
+"\n"
+"In addition, mere aggregation of another work not based on the Program\n"
+"with the Program (or with a work based on the Program) on a volume of\n"
+"a storage or distribution medium does not bring the other work under\n"
+"the scope of this License.\n"
+"\n"
+"  3. You may copy and distribute the Program (or a work based on it,\n"
+"under Section 2) in object code or executable form under the terms of\n"
+"Sections 1 and 2 above provided that you also do one of the following:\n"
+"\n"
+"    a) Accompany it with the complete corresponding machine-readable\n"
+"    source code, which must be distributed under the terms of Sections\n"
+"    1 and 2 above on a medium customarily used for software interchange; "
+"or,\n"
+"\n"
+"    b) Accompany it with a written offer, valid for at least three\n"
+"    years, to give any third party, for a charge no more than your\n"
+"    cost of physically performing source distribution, a complete\n"
+"    machine-readable copy of the corresponding source code, to be\n"
+"    distributed under the terms of Sections 1 and 2 above on a medium\n"
+"    customarily used for software interchange; or,\n"
+"\n"
+"    c) Accompany it with the information you received as to the offer\n"
+"    to distribute corresponding source code.  (This alternative is\n"
+"    allowed only for noncommercial distribution and only if you\n"
+"    received the program in object code or executable form with such\n"
+"    an offer, in accord with Subsection b above.)\n"
+"\n"
+"The source code for a work means the preferred form of the work for\n"
+"making modifications to it.  For an executable work, complete source\n"
+"code means all the source code for all modules it contains, plus any\n"
+"associated interface definition files, plus the scripts used to\n"
+"control compilation and installation of the executable.  However, as a\n"
+"special exception, the source code distributed need not include\n"
+"anything that is normally distributed (in either source or binary\n"
+"form) with the major components (compiler, kernel, and so on) of the\n"
+"operating system on which the executable runs, unless that component\n"
+"itself accompanies the executable.\n"
+"\n"
+"If distribution of executable or object code is made by offering\n"
+"access to copy from a designated place, then offering equivalent\n"
+"access to copy the source code from the same place counts as\n"
+"distribution of the source code, even though third parties are not\n"
+"compelled to copy the source along with the object code.\n"
+"\n"
+"  4. You may not copy, modify, sublicense, or distribute the Program\n"
+"except as expressly provided under this License.  Any attempt\n"
+"otherwise to copy, modify, sublicense or distribute the Program is\n"
+"void, and will automatically terminate your rights under this License.\n"
+"However, parties who have received copies, or rights, from you under\n"
+"this License will not have their licenses terminated so long as such\n"
+"parties remain in full compliance.\n"
+"\n"
+"  5. You are not required to accept this License, since you have not\n"
+"signed it.  However, nothing else grants you permission to modify or\n"
+"distribute the Program or its derivative works.  These actions are\n"
+"prohibited by law if you do not accept this License.  Therefore, by\n"
+"modifying or distributing the Program (or any work based on the\n"
+"Program), you indicate your acceptance of this License to do so, and\n"
+"all its terms and conditions for copying, distributing or modifying\n"
+"the Program or works based on it.\n"
+"\n"
+"  6. Each time you redistribute the Program (or any work based on the\n"
+"Program), the recipient automatically receives a license from the\n"
+"original licensor to copy, distribute or modify the Program subject to\n"
+"these terms and conditions.  You may not impose any further\n"
+"restrictions on the recipients' exercise of the rights granted herein.\n"
+"You are not responsible for enforcing compliance by third parties to\n"
+"this License.\n"
+"\n"
+"  7. If, as a consequence of a court judgment or allegation of patent\n"
+"infringement or for any other reason (not limited to patent issues),\n"
+"conditions are imposed on you (whether by court order, agreement or\n"
+"otherwise) that contradict the conditions of this License, they do not\n"
+"excuse you from the conditions of this License.  If you cannot\n"
+"distribute so as to satisfy simultaneously your obligations under this\n"
+"License and any other pertinent obligations, then as a consequence you\n"
+"may not distribute the Program at all.  For example, if a patent\n"
+"license would not permit royalty-free redistribution of the Program by\n"
+"all those who receive copies directly or indirectly through you, then\n"
+"the only way you could satisfy both it and this License would be to\n"
+"refrain entirely from distribution of the Program.\n"
+"\n"
+"If any portion of this section is held invalid or unenforceable under\n"
+"any particular circumstance, the balance of the section is intended to\n"
+"apply and the section as a whole is intended to apply in other\n"
+"circumstances.\n"
+"\n"
+"It is not the purpose of this section to induce you to infringe any\n"
+"patents or other property right claims or to contest validity of any\n"
+"such claims; this section has the sole purpose of protecting the\n"
+"integrity of the free software distribution system, which is\n"
+"implemented by public license practices.  Many people have made\n"
+"generous contributions to the wide range of software distributed\n"
+"through that system in reliance on consistent application of that\n"
+"system; it is up to the author/donor to decide if he or she is willing\n"
+"to distribute software through any other system and a licensee cannot\n"
+"impose that choice.\n"
+"\n"
+"This section is intended to make thoroughly clear what is believed to\n"
+"be a consequence of the rest of this License.\n"
+"\n"
+"  8. If the distribution and/or use of the Program is restricted in\n"
+"certain countries either by patents or by copyrighted interfaces, the\n"
+"original copyright holder who places the Program under this License\n"
+"may add an explicit geographical distribution limitation excluding\n"
+"those countries, so that distribution is permitted only in or among\n"
+"countries not thus excluded.  In such case, this License incorporates\n"
+"the limitation as if written in the body of this License.\n"
+"\n"
+"  9. The Free Software Foundation may publish revised and/or new versions\n"
+"of the General Public License from time to time.  Such new versions will\n"
+"be similar in spirit to the present version, but may differ in detail to\n"
+"address new problems or concerns.\n"
+"\n"
+"Each version is given a distinguishing version number.  If the Program\n"
+"specifies a version number of this License which applies to it and \"any\n"
+"later version\", you have the option of following the terms and conditions\n"
+"either of that version or of any later version published by the Free\n"
+"Software Foundation.  If the Program does not specify a version number of\n"
+"this License, you may choose any version ever published by the Free "
+"Software\n"
+"Foundation.\n"
+"\n"
+"  10. If you wish to incorporate parts of the Program into other free\n"
+"programs whose distribution conditions are different, write to the author\n"
+"to ask for permission.  For software which is copyrighted by the Free\n"
+"Software Foundation, write to the Free Software Foundation; we sometimes\n"
+"make exceptions for this.  Our decision will be guided by the two goals\n"
+"of preserving the free status of all derivatives of our free software and\n"
+"of promoting the sharing and reuse of software generally.\n"
+"\n"
+"\t\t\t    NO WARRANTY\n"
+"\n"
+"  11. BECAUSE THE PROGRAM IS LICENSED FREE OF CHARGE, THERE IS NO WARRANTY\n"
+"FOR THE PROGRAM, TO THE EXTENT PERMITTED BY APPLICABLE LAW.  EXCEPT WHEN\n"
+"OTHERWISE STATED IN WRITING THE COPYRIGHT HOLDERS AND/OR OTHER PARTIES\n"
+"PROVIDE THE PROGRAM \"AS IS\" WITHOUT WARRANTY OF ANY KIND, EITHER "
+"EXPRESSED\n"
+"OR IMPLIED, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF\n"
+"MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  THE ENTIRE RISK AS\n"
+"TO THE QUALITY AND PERFORMANCE OF THE PROGRAM IS WITH YOU.  SHOULD THE\n"
+"PROGRAM PROVE DEFECTIVE, YOU ASSUME THE COST OF ALL NECESSARY SERVICING,\n"
+"REPAIR OR CORRECTION.\n"
+"\n"
+"  12. IN NO EVENT UNLESS REQUIRED BY APPLICABLE LAW OR AGREED TO IN WRITING\n"
+"WILL ANY COPYRIGHT HOLDER, OR ANY OTHER PARTY WHO MAY MODIFY AND/OR\n"
+"REDISTRIBUTE THE PROGRAM AS PERMITTED ABOVE, BE LIABLE TO YOU FOR DAMAGES,\n"
+"INCLUDING ANY GENERAL, SPECIAL, INCIDENTAL OR CONSEQUENTIAL DAMAGES ARISING\n"
+"OUT OF THE USE OR INABILITY TO USE THE PROGRAM (INCLUDING BUT NOT LIMITED\n"
+"TO LOSS OF DATA OR DATA BEING RENDERED INACCURATE OR LOSSES SUSTAINED BY\n"
+"YOU OR THIRD PARTIES OR A FAILURE OF THE PROGRAM TO OPERATE WITH ANY OTHER\n"
+"PROGRAMS), EVEN IF SUCH HOLDER OR OTHER PARTY HAS BEEN ADVISED OF THE\n"
+"POSSIBILITY OF SUCH DAMAGES.\n"
+"\n"
+"\t\t     END OF TERMS AND CONDITIONS\n"
+"\n"
+"\t    How to Apply These Terms to Your New Programs\n"
+"\n"
+"  If you develop a new program, and you want it to be of the greatest\n"
+"possible use to the public, the best way to achieve this is to make it\n"
+"free software which everyone can redistribute and change under these terms.\n"
+"\n"
+"  To do so, attach the following notices to the program.  It is safest\n"
+"to attach them to the start of each source file to most effectively\n"
+"convey the exclusion of warranty; and each file should have at least\n"
+"the \"copyright\" line and a pointer to where the full notice is found.\n"
+"\n"
+"    <one line to give the program's name and a brief idea of what it does.>\n"
+"    Copyright (C) <year>  <name of author>\n"
+"\n"
+"    This program is free software; you can redistribute it and/or modify\n"
+"    it under the terms of the GNU General Public License as published by\n"
+"    the Free Software Foundation; either version 2 of the License, or\n"
+"    (at your option) any later version.\n"
+"\n"
+"    This program is distributed in the hope that it will be useful,\n"
+"    but WITHOUT ANY WARRANTY; without even the implied warranty of\n"
+"    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n"
+"    GNU General Public License for more details.\n"
+"\n"
+"    You should have received a copy of the GNU General Public License\n"
+"    along with this program; if not, write to the Free Software\n"
+"    Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA  02110-1301  "
+"USA\n"
+"\n"
+"\n"
+"Also add information on how to contact you by electronic and paper mail.\n"
+"\n"
+"If the program is interactive, make it output a short notice like this\n"
+"when it starts in an interactive mode:\n"
+"\n"
+"    Gnomovision version 69, Copyright (C) year name of author\n"
+"    Gnomovision comes with ABSOLUTELY NO WARRANTY; for details type `show "
+"w'.\n"
+"    This is free software, and you are welcome to redistribute it\n"
+"    under certain conditions; type `show c' for details.\n"
+"\n"
+"The hypothetical commands `show w' and `show c' should show the appropriate\n"
+"parts of the General Public License.  Of course, the commands you use may\n"
+"be called something other than `show w' and `show c'; they could even be\n"
+"mouse-clicks or menu items--whatever suits your program.\n"
+"\n"
+"You should also get your employer (if you work as a programmer) or your\n"
+"school, if any, to sign a \"copyright disclaimer\" for the program, if\n"
+"necessary.  Here is a sample; alter the names:\n"
+"\n"
+"  Yoyodyne, Inc., hereby disclaims all copyright interest in the program\n"
+"  `Gnomovision' (which makes passes at compilers) written by James Hacker.\n"
+"\n"
+"  <signature of Ty Coon>, 1 April 1989\n"
+"  Ty Coon, President of Vice\n"
+"\n"
+"This General Public License does not permit incorporating your program into\n"
+"proprietary programs.  If your program is a subroutine library, you may\n"
+"consider it more useful to permit linking proprietary applications with the\n"
+"library.  If this is what you want to do, use the GNU Library General\n"
+"Public License instead of this License."
+msgstr ""
+"Avidemux ??????????????????????????????????????????????????????/(Free Software Foundation)/\n"
+"????????? GNU ??????????????????????????? (GNU General Public License) ??????????????????\n"
+"??????????????????????????????\n"
+"\n"
+"\t\t    GNU GENERAL PUBLIC LICENSE\n"
+"\t\t       Version 2, June 1991\n"
+"\n"
+" Copyright (C) 1989, 1991 Free Software Foundation, Inc.\n"
+"                       51 Franklin St, Fifth Floor, Boston, MA  02110-1301  "
+"USA\n"
+" Everyone is permitted to copy and distribute verbatim copies\n"
+" of this license document, but changing it is not allowed.\n"
+"\n"
+"\t\t\t    Preamble\n"
+"\n"
+"  The licenses for most software are designed to take away your\n"
+"freedom to share and change it.  By contrast, the GNU General Public\n"
+"License is intended to guarantee your freedom to share and change free\n"
+"software--to make sure the software is free for all its users.  This\n"
+"General Public License applies to most of the Free Software\n"
+"Foundation's software and to any other program whose authors commit to\n"
+"using it.  (Some other Free Software Foundation software is covered by\n"
+"the GNU Library General Public License instead.)  You can apply it to\n"
+"your programs, too.\n"
+"\n"
+"  When we speak of free software, we are referring to freedom, not\n"
+"price.  Our General Public Licenses are designed to make sure that you\n"
+"have the freedom to distribute copies of free software (and charge for\n"
+"this service if you wish), that you receive source code or can get it\n"
+"if you want it, that you can change the software or use pieces of it\n"
+"in new free programs; and that you know you can do these things.\n"
+"\n"
+"  To protect your rights, we need to make restrictions that forbid\n"
+"anyone to deny you these rights or to ask you to surrender the rights.\n"
+"These restrictions translate to certain responsibilities for you if you\n"
+"distribute copies of the software, or if you modify it.\n"
+"\n"
+"  For example, if you distribute copies of such a program, whether\n"
+"gratis or for a fee, you must give the recipients all the rights that\n"
+"you have.  You must make sure that they, too, receive or can get the\n"
+"source code.  And you must show them these terms so they know their\n"
+"rights.\n"
+"\n"
+"  We protect your rights with two steps: (1) copyright the software, and\n"
+"(2) offer you this license which gives you legal permission to copy,\n"
+"distribute and/or modify the software.\n"
+"\n"
+"  Also, for each author's protection and ours, we want to make certain\n"
+"that everyone understands that there is no warranty for this free\n"
+"software.  If the software is modified by someone else and passed on, we\n"
+"want its recipients to know that what they have is not the original, so\n"
+"that any problems introduced by others will not reflect on the original\n"
+"authors' reputations.\n"
+"\n"
+"  Finally, any free program is threatened constantly by software\n"
+"patents.  We wish to avoid the danger that redistributors of a free\n"
+"program will individually obtain patent licenses, in effect making the\n"
+"program proprietary.  To prevent this, we have made it clear that any\n"
+"patent must be licensed for everyone's free use or not licensed at all.\n"
+"\n"
+"  The precise terms and conditions for copying, distribution and\n"
+"modification follow.\n"
+"\n"
+"\t\t    GNU GENERAL PUBLIC LICENSE\n"
+"   TERMS AND CONDITIONS FOR COPYING, DISTRIBUTION AND MODIFICATION\n"
+"\n"
+"  0. This License applies to any program or other work which contains\n"
+"a notice placed by the copyright holder saying it may be distributed\n"
+"under the terms of this General Public License.  The \"Program\", below,\n"
+"refers to any such program or work, and a \"work based on the Program\"\n"
+"means either the Program or any derivative work under copyright law:\n"
+"that is to say, a work containing the Program or a portion of it,\n"
+"either verbatim or with modifications and/or translated into another\n"
+"language.  (Hereinafter, translation is included without limitation in\n"
+"the term \"modification\".)  Each licensee is addressed as \"you\".\n"
+"\n"
+"Activities other than copying, distribution and modification are not\n"
+"covered by this License; they are outside its scope.  The act of\n"
+"running the Program is not restricted, and the output from the Program\n"
+"is covered only if its contents constitute a work based on the\n"
+"Program (independent of having been made by running the Program).\n"
+"Whether that is true depends on what the Program does.\n"
+"\n"
+"  1. You may copy and distribute verbatim copies of the Program's\n"
+"source code as you receive it, in any medium, provided that you\n"
+"conspicuously and appropriately publish on each copy an appropriate\n"
+"copyright notice and disclaimer of warranty; keep intact all the\n"
+"notices that refer to this License and to the absence of any warranty;\n"
+"and give any other recipients of the Program a copy of this License\n"
+"along with the Program.\n"
+"\n"
+"You may charge a fee for the physical act of transferring a copy, and\n"
+"you may at your option offer warranty protection in exchange for a fee.\n"
+"\n"
+"  2. You may modify your copy or copies of the Program or any portion\n"
+"of it, thus forming a work based on the Program, and copy and\n"
+"distribute such modifications or work under the terms of Section 1\n"
+"above, provided that you also meet all of these conditions:\n"
+"\n"
+"    a) You must cause the modified files to carry prominent notices\n"
+"    stating that you changed the files and the date of any change.\n"
+"\n"
+"    b) You must cause any work that you distribute or publish, that in\n"
+"    whole or in part contains or is derived from the Program or any\n"
+"    part thereof, to be licensed as a whole at no charge to all third\n"
+"    parties under the terms of this License.\n"
+"\n"
+"    c) If the modified program normally reads commands interactively\n"
+"    when run, you must cause it, when started running for such\n"
+"    interactive use in the most ordinary way, to print or display an\n"
+"    announcement including an appropriate copyright notice and a\n"
+"    notice that there is no warranty (or else, saying that you provide\n"
+"    a warranty) and that users may redistribute the program under\n"
+"    these conditions, and telling the user how to view a copy of this\n"
+"    License.  (Exception: if the Program itself is interactive but\n"
+"    does not normally print such an announcement, your work based on\n"
+"    the Program is not required to print an announcement.)\n"
+"\n"
+"These requirements apply to the modified work as a whole.  If\n"
+"identifiable sections of that work are not derived from the Program,\n"
+"and can be reasonably considered independent and separate works in\n"
+"themselves, then this License, and its terms, do not apply to those\n"
+"sections when you distribute them as separate works.  But when you\n"
+"distribute the same sections as part of a whole which is a work based\n"
+"on the Program, the distribution of the whole must be on the terms of\n"
+"this License, whose permissions for other licensees extend to the\n"
+"entire whole, and thus to each and every part regardless of who wrote it.\n"
+"\n"
+"Thus, it is not the intent of this section to claim rights or contest\n"
+"your rights to work written entirely by you; rather, the intent is to\n"
+"exercise the right to control the distribution of derivative or\n"
+"collective works based on the Program.\n"
+"\n"
+"In addition, mere aggregation of another work not based on the Program\n"
+"with the Program (or with a work based on the Program) on a volume of\n"
+"a storage or distribution medium does not bring the other work under\n"
+"the scope of this License.\n"
+"\n"
+"  3. You may copy and distribute the Program (or a work based on it,\n"
+"under Section 2) in object code or executable form under the terms of\n"
+"Sections 1 and 2 above provided that you also do one of the following:\n"
+"\n"
+"    a) Accompany it with the complete corresponding machine-readable\n"
+"    source code, which must be distributed under the terms of Sections\n"
+"    1 and 2 above on a medium customarily used for software interchange; "
+"or,\n"
+"\n"
+"    b) Accompany it with a written offer, valid for at least three\n"
+"    years, to give any third party, for a charge no more than your\n"
+"    cost of physically performing source distribution, a complete\n"
+"    machine-readable copy of the corresponding source code, to be\n"
+"    distributed under the terms of Sections 1 and 2 above on a medium\n"
+"    customarily used for software interchange; or,\n"
+"\n"
+"    c) Accompany it with the information you received as to the offer\n"
+"    to distribute corresponding source code.  (This alternative is\n"
+"    allowed only for noncommercial distribution and only if you\n"
+"    received the program in object code or executable form with such\n"
+"    an offer, in accord with Subsection b above.)\n"
+"\n"
+"The source code for a work means the preferred form of the work for\n"
+"making modifications to it.  For an executable work, complete source\n"
+"code means all the source code for all modules it contains, plus any\n"
+"associated interface definition files, plus the scripts used to\n"
+"control compilation and installation of the executable.  However, as a\n"
+"special exception, the source code distributed need not include\n"
+"anything that is normally distributed (in either source or binary\n"
+"form) with the major components (compiler, kernel, and so on) of the\n"
+"operating system on which the executable runs, unless that component\n"
+"itself accompanies the executable.\n"
+"\n"
+"If distribution of executable or object code is made by offering\n"
+"access to copy from a designated place, then offering equivalent\n"
+"access to copy the source code from the same place counts as\n"
+"distribution of the source code, even though third parties are not\n"
+"compelled to copy the source along with the object code.\n"
+"\n"
+"  4. You may not copy, modify, sublicense, or distribute the Program\n"
+"except as expressly provided under this License.  Any attempt\n"
+"otherwise to copy, modify, sublicense or distribute the Program is\n"
+"void, and will automatically terminate your rights under this License.\n"
+"However, parties who have received copies, or rights, from you under\n"
+"this License will not have their licenses terminated so long as such\n"
+"parties remain in full compliance.\n"
+"\n"
+"  5. You are not required to accept this License, since you have not\n"
+"signed it.  However, nothing else grants you permission to modify or\n"
+"distribute the Program or its derivative works.  These actions are\n"
+"prohibited by law if you do not accept this License.  Therefore, by\n"
+"modifying or distributing the Program (or any work based on the\n"
+"Program), you indicate your acceptance of this License to do so, and\n"
+"all its terms and conditions for copying, distributing or modifying\n"
+"the Program or works based on it.\n"
+"\n"
+"  6. Each time you redistribute the Program (or any work based on the\n"
+"Program), the recipient automatically receives a license from the\n"
+"original licensor to copy, distribute or modify the Program subject to\n"
+"these terms and conditions.  You may not impose any further\n"
+"restrictions on the recipients' exercise of the rights granted herein.\n"
+"You are not responsible for enforcing compliance by third parties to\n"
+"this License.\n"
+"\n"
+"  7. If, as a consequence of a court judgment or allegation of patent\n"
+"infringement or for any other reason (not limited to patent issues),\n"
+"conditions are imposed on you (whether by court order, agreement or\n"
+"otherwise) that contradict the conditions of this License, they do not\n"
+"excuse you from the conditions of this License.  If you cannot\n"
+"distribute so as to satisfy simultaneously your obligations under this\n"
+"License and any other pertinent obligations, then as a consequence you\n"
+"may not distribute the Program at all.  For example, if a patent\n"
+"license would not permit royalty-free redistribution of the Program by\n"
+"all those who receive copies directly or indirectly through you, then\n"
+"the only way you could satisfy both it and this License would be to\n"
+"refrain entirely from distribution of the Program.\n"
+"\n"
+"If any portion of this section is held invalid or unenforceable under\n"
+"any particular circumstance, the balance of the section is intended to\n"
+"apply and the section as a whole is intended to apply in other\n"
+"circumstances.\n"
+"\n"
+"It is not the purpose of this section to induce you to infringe any\n"
+"patents or other property right claims or to contest validity of any\n"
+"such claims; this section has the sole purpose of protecting the\n"
+"integrity of the free software distribution system, which is\n"
+"implemented by public license practices.  Many people have made\n"
+"generous contributions to the wide range of software distributed\n"
+"through that system in reliance on consistent application of that\n"
+"system; it is up to the author/donor to decide if he or she is willing\n"
+"to distribute software through any other system and a licensee cannot\n"
+"impose that choice.\n"
+"\n"
+"This section is intended to make thoroughly clear what is believed to\n"
+"be a consequence of the rest of this License.\n"
+"\n"
+"  8. If the distribution and/or use of the Program is restricted in\n"
+"certain countries either by patents or by copyrighted interfaces, the\n"
+"original copyright holder who places the Program under this License\n"
+"may add an explicit geographical distribution limitation excluding\n"
+"those countries, so that distribution is permitted only in or among\n"
+"countries not thus excluded.  In such case, this License incorporates\n"
+"the limitation as if written in the body of this License.\n"
+"\n"
+"  9. The Free Software Foundation may publish revised and/or new versions\n"
+"of the General Public License from time to time.  Such new versions will\n"
+"be similar in spirit to the present version, but may differ in detail to\n"
+"address new problems or concerns.\n"
+"\n"
+"Each version is given a distinguishing version number.  If the Program\n"
+"specifies a version number of this License which applies to it and \"any\n"
+"later version\", you have the option of following the terms and conditions\n"
+"either of that version or of any later version published by the Free\n"
+"Software Foundation.  If the Program does not specify a version number of\n"
+"this License, you may choose any version ever published by the Free "
+"Software\n"
+"Foundation.\n"
+"\n"
+"  10. If you wish to incorporate parts of the Program into other free\n"
+"programs whose distribution conditions are different, write to the author\n"
+"to ask for permission.  For software which is copyrighted by the Free\n"
+"Software Foundation, write to the Free Software Foundation; we sometimes\n"
+"make exceptions for this.  Our decision will be guided by the two goals\n"
+"of preserving the free status of all derivatives of our free software and\n"
+"of promoting the sharing and reuse of software generally.\n"
+"\n"
+"\t\t\t    NO WARRANTY\n"
+"\n"
+"  11. BECAUSE THE PROGRAM IS LICENSED FREE OF CHARGE, THERE IS NO WARRANTY\n"
+"FOR THE PROGRAM, TO THE EXTENT PERMITTED BY APPLICABLE LAW.  EXCEPT WHEN\n"
+"OTHERWISE STATED IN WRITING THE COPYRIGHT HOLDERS AND/OR OTHER PARTIES\n"
+"PROVIDE THE PROGRAM \"AS IS\" WITHOUT WARRANTY OF ANY KIND, EITHER "
+"EXPRESSED\n"
+"OR IMPLIED, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF\n"
+"MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  THE ENTIRE RISK AS\n"
+"TO THE QUALITY AND PERFORMANCE OF THE PROGRAM IS WITH YOU.  SHOULD THE\n"
+"PROGRAM PROVE DEFECTIVE, YOU ASSUME THE COST OF ALL NECESSARY SERVICING,\n"
+"REPAIR OR CORRECTION.\n"
+"\n"
+"  12. IN NO EVENT UNLESS REQUIRED BY APPLICABLE LAW OR AGREED TO IN WRITING\n"
+"WILL ANY COPYRIGHT HOLDER, OR ANY OTHER PARTY WHO MAY MODIFY AND/OR\n"
+"REDISTRIBUTE THE PROGRAM AS PERMITTED ABOVE, BE LIABLE TO YOU FOR DAMAGES,\n"
+"INCLUDING ANY GENERAL, SPECIAL, INCIDENTAL OR CONSEQUENTIAL DAMAGES ARISING\n"
+"OUT OF THE USE OR INABILITY TO USE THE PROGRAM (INCLUDING BUT NOT LIMITED\n"
+"TO LOSS OF DATA OR DATA BEING RENDERED INACCURATE OR LOSSES SUSTAINED BY\n"
+"YOU OR THIRD PARTIES OR A FAILURE OF THE PROGRAM TO OPERATE WITH ANY OTHER\n"
+"PROGRAMS), EVEN IF SUCH HOLDER OR OTHER PARTY HAS BEEN ADVISED OF THE\n"
+"POSSIBILITY OF SUCH DAMAGES.\n"
+"\n"
+"\t\t     END OF TERMS AND CONDITIONS\n"
+"\n"
+"\t    How to Apply These Terms to Your New Programs\n"
+"\n"
+"  If you develop a new program, and you want it to be of the greatest\n"
+"possible use to the public, the best way to achieve this is to make it\n"
+"free software which everyone can redistribute and change under these terms.\n"
+"\n"
+"  To do so, attach the following notices to the program.  It is safest\n"
+"to attach them to the start of each source file to most effectively\n"
+"convey the exclusion of warranty; and each file should have at least\n"
+"the \"copyright\" line and a pointer to where the full notice is found.\n"
+"\n"
+"    <one line to give the program's name and a brief idea of what it does.>\n"
+"    Copyright (C) <year>  <name of author>\n"
+"\n"
+"    This program is free software; you can redistribute it and/or modify\n"
+"    it under the terms of the GNU General Public License as published by\n"
+"    the Free Software Foundation; either version 2 of the License, or\n"
+"    (at your option) any later version.\n"
+"\n"
+"    This program is distributed in the hope that it will be useful,\n"
+"    but WITHOUT ANY WARRANTY; without even the implied warranty of\n"
+"    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n"
+"    GNU General Public License for more details.\n"
+"\n"
+"    You should have received a copy of the GNU General Public License\n"
+"    along with this program; if not, write to the Free Software\n"
+"    Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA  02110-1301  "
+"USA\n"
+"\n"
+"\n"
+"Also add information on how to contact you by electronic and paper mail.\n"
+"\n"
+"If the program is interactive, make it output a short notice like this\n"
+"when it starts in an interactive mode:\n"
+"\n"
+"    Gnomovision version 69, Copyright (C) year name of author\n"
+"    Gnomovision comes with ABSOLUTELY NO WARRANTY; for details type `show "
+"w'.\n"
+"    This is free software, and you are welcome to redistribute it\n"
+"    under certain conditions; type `show c' for details.\n"
+"\n"
+"The hypothetical commands `show w' and `show c' should show the appropriate\n"
+"parts of the General Public License.  Of course, the commands you use may\n"
+"be called something other than `show w' and `show c'; they could even be\n"
+"mouse-clicks or menu items--whatever suits your program.\n"
+"\n"
+"You should also get your employer (if you work as a programmer) or your\n"
+"school, if any, to sign a \"copyright disclaimer\" for the program, if\n"
+"necessary.  Here is a sample; alter the names:\n"
+"\n"
+"  Yoyodyne, Inc., hereby disclaims all copyright interest in the program\n"
+"  `Gnomovision' (which makes passes at compilers) written by James Hacker.\n"
+"\n"
+"  <signature of Ty Coon>, 1 April 1989\n"
+"  Ty Coon, President of Vice\n"
+"\n"
+"This General Public License does not permit incorporating your program into\n"
+"proprietary programs.  If your program is a subroutine library, you may\n"
+"consider it more useful to permit linking proprietary applications with the\n"
+"library.  If this is what you want to do, use the GNU Library General\n"
+"Public License instead of this License."
+
+msgid "Avisynth ColorYUV"
+msgstr "Avisynth ColorYUV"
+
+msgid "AvsProxy"
+msgstr "AvsProxy"
+
+msgid "B Frames"
+msgstr "B ??????"
+
+msgid "B-Frame Direct Mode"
+msgstr "B-??????????????????"
+
+msgid "B-frame Reduction (%)"
+msgstr "?????? B-?????? (%)"
+
+msgid "B-frame quantizer - Min:"
+msgstr "B-??????????????? - ??????:"
+
+msgid "B:"
+msgstr "B:"
+
+msgid "BMP op failed"
+msgstr "BMP ????????????"
+
+msgid "Baltic"
+msgstr "????????????"
+
+msgid "Band"
+msgstr "??????"
+
+msgid "Basic"
+msgstr "??????"
+
+msgid "Below Normal"
+msgstr "????????????"
+
+msgid "Below normal"
+msgstr "????????????"
+
+msgid "Bias"
+msgstr "??????"
+
+msgid "Bicubic"
+msgstr "?????????"
+
+msgid "Bidirectional ME"
+msgstr "????????? ME"
+
+msgid "Bilinear"
+msgstr "?????????"
+
+msgid "Bit_rate mode:"
+msgstr "???????????????:"
+
+msgid "Bitmap source failed"
+msgstr "?????????????????????"
+
+msgid "Bitrate"
+msgstr "?????????"
+
+msgid "Bitrate (kb/s):"
+msgstr "????????? (kb/s):"
+
+msgid "Bitrate Histogram"
+msgstr "??????????????????"
+
+msgid "Bitrate Variability (%)"
+msgstr "?????????????????? (%)"
+
+msgid "Bitrate Variance"
+msgstr "???????????????"
+
+msgid "Bitrate/size calculator"
+msgstr "?????????/?????? ?????????"
+
+msgid "Bitrate:"
+msgstr "?????????:"
+
+msgid "Bits per pixel:"
+msgstr "??????????????????:"
+
+msgid "Bl_end"
+msgstr "??????(_E)"
+
+msgid "Blacken Borders"
+msgstr "????????????"
+
+msgid "Blacken borders"
+msgstr "????????????"
+
+msgid "Blend Removal"
+msgstr "????????????"
+
+msgid "Blend Threshold"
+msgstr "???????????????"
+
+msgid "Blend a logo by interpolating its surrounding box."
+msgstr "???????????????????????????????????????????????????"
+
+msgid "Blend remover"
+msgstr "???????????????"
+
+msgid "Block Adaptative :"
+msgstr "????????????:"
+
+msgid "Bob, skip spatial temporal check"
+msgstr "Bob???????????????????????????"
+
+msgid "Bob, temporal & spatial check"
+msgstr "Bob????????????????????????"
+
+msgid "Bobber - convert each field into a full sized frame."
+msgstr "Bobber - ??????????????????????????????????????????????????????"
+
+msgid "Botto_m margin"
+msgstr "????????????"
+
+msgid "Bottom"
+msgstr "??????"
+
+msgid "Bottom field (keep top)"
+msgstr "????????????(????????????)"
+
+msgid "Bottom field first"
+msgstr "??????????????????"
+
+msgid "Brigh_tness:"
+msgstr "??????:"
+
+msgid "Brightness"
+msgstr "??????"
+
+msgid "Brush _Mode:"
+msgstr "????????????(_M):"
+
+msgid "Brush _Size:"
+msgstr "????????????(_S):"
+
+msgid "Build Time Map"
+msgstr "??????????????????"
+
+msgid "Build VBR time map?"
+msgstr "????????????????????????(VBR)???????????????"
+
+msgid "Building VBR map"
+msgstr "???????????????????????????(VBR)??????"
+
+msgid "Built-in Support"
+msgstr "???????????????"
+
+msgid "Busy"
+msgstr "??????"
+
+msgid "CABAC"
+msgstr "CABAC"
+
+msgid "CBR"
+msgstr "CBR"
+
+msgid "CPU"
+msgstr "CPU"
+
+msgid "C_hannel mode:"
+msgstr "????????????:"
+
+msgid "C_heck Frames (slow)"
+msgstr "???????????? (???)(_H)"
+
+msgid "C_hroma lock:"
+msgstr "????????????:"
+
+msgid "C_hroma motion"
+msgstr "????????????"
+
+msgid "C_hroma optimizer"
+msgstr "???????????????"
+
+msgid "C_hroma threshold:"
+msgstr "???????????????:"
+
+msgid "C_onfigure"
+msgstr "??????(_O)"
+
+msgid "C_ycle:"
+msgstr "??????(_Y):"
+
+msgid "Ca_rtoon mode"
+msgstr "????????????"
+
+msgid "Calculate referencing individually based on each partition"
+msgstr "????????????????????????????????????????????????"
+
+msgid "Calculator"
+msgstr "?????????"
+
+msgid "Can't determine aspect ratio"
+msgstr "????????????????????????"
+
+msgid "Can't determine the Application Data folder."
+msgstr "??????????????????????????????????????????"
+
+msgid "Cannot copy."
+msgstr "????????????"
+
+msgid "Cannot create the .avidemux directory"
+msgstr "???????????? .avidemux ?????????"
+
+msgid "Cannot decode frame"
+msgstr "??????????????????"
+
+msgid "Cannot decode keyframe."
+msgstr "????????????????????????"
+
+msgid "Cannot decode next frame."
+msgstr "???????????????????????????"
+
+msgid "Cannot decode the frame."
+msgstr "?????????????????????"
+
+msgid "Cannot decompress audio frame"
+msgstr "????????????????????????"
+
+msgid "Cannot decompress the audio stream"
+msgstr "???????????????????????????"
+
+msgid "Cannot delete the selection."
+msgstr "???????????????????????????"
+
+msgid "Cannot encode the frame"
+msgstr "?????????????????????"
+
+msgid "Cannot get this frame to save"
+msgstr "?????????????????????????????????"
+
+msgid "Cannot identify subtitle format"
+msgstr "???????????????????????????"
+
+msgid "Cannot initialize the audio stream"
+msgstr "???????????????????????????"
+
+msgid "Cannot initialize the video stream"
+msgstr "???????????????????????????"
+
+msgid "Cannot initiate save"
+msgstr "??????????????????"
+
+msgid "Cannot load"
+msgstr "????????????"
+
+msgid "Cannot load the glyphset file."
+msgstr "???????????????????????????????????????"
+
+msgid "Cannot open \"%s\" for writing."
+msgstr "???????????? \"%s\" ????????????"
+
+msgid "Cannot open \"%s\"."
+msgstr "???????????? \"%s\"."
+
+msgid "Cannot open AMR codec."
+msgstr "???????????? AMR ?????????"
+
+msgid "Cannot open WMA2 codec."
+msgstr "???????????? WMA2 ?????????"
+
+msgid "Cannot open directory as a file"
+msgstr "??????????????????????????????????????????"
+
+msgid "Cannot open project using the video loader."
+msgstr "?????????????????????????????????????????????"
+
+msgid "Cannot save the audio in copy mode"
+msgstr "????????? ???????????? ?????????????????????"
+
+msgid "Cannot select FLV1  codec."
+msgstr "???????????? FLV1  ?????????"
+
+msgid "Cannot select mpeg4 sp codec."
+msgstr "???????????? mpeg4 sp ?????????"
+
+msgid "Cannot select the MPEG-4 SP codec."
+msgstr "??????????????? MPEG-4 SP ???????????????"
+
+msgid "Cannot write .idx"
+msgstr "???????????? .idx"
+
+msgid "Cannot write .sub"
+msgstr "???????????? .sub"
+
+msgid "Cannot write the file"
+msgstr "??????????????????"
+
+msgid "Ch_roma temporal threshold:"
+msgstr "?????????????????????:"
+
+msgid "Ch_roma threshold:"
+msgstr "???_????????????:"
+
+msgid "Change FrameRate"
+msgstr "???????????????"
+
+msgid "Change framerate while keeping duration."
+msgstr "??????????????????????????????????????????"
+
+msgid "Change image size. Faster than Avisynth's Resize."
+msgstr "???????????????????????? Avisynth ????????????????????????"
+
+msgid "Channels:"
+msgstr "??????:"
+
+msgid "Check the permissions for /dev/dsp."
+msgstr "?????? /dev/dsp ?????????"
+
+msgid "Checking video"
+msgstr "??????????????????"
+
+msgid "Chinese Simplified (GB2312)"
+msgstr "???????????? (GB2312)"
+
+msgid "Chinese Traditional (Big5)"
+msgstr "???????????? (Big5)"
+
+msgid "Chroma ME"
+msgstr "?????? ME"
+
+msgid "Chroma Noise Reduction 2"
+msgstr "?????????????????? 2"
+
+msgid "Chroma QP Offset"
+msgstr "?????? QP ?????????"
+
+msgid "Chroma Shift"
+msgstr "????????????"
+
+msgid "Chroma U"
+msgstr "?????? U"
+
+msgid "Chroma U :"
+msgstr "?????? U :"
+
+msgid "Chroma U only"
+msgstr "???????????? U"
+
+msgid "Chroma V"
+msgstr "?????? V"
+
+msgid "Chroma V :"
+msgstr "?????? V :"
+
+msgid "Chroma V only"
+msgstr "???????????? V"
+
+msgid "Chroma noise reduction filter by MarcFD/Tritical."
+msgstr "????????????????????????????????? MarcFD/Tritical???"
+
+msgid "Chroma shift"
+msgstr "????????????"
+
+msgid "Chroma v"
+msgstr "?????? v"
+
+msgid "ChromaShift"
+msgstr "????????????"
+
+msgid "Cnr2"
+msgstr "Cnr2"
+
+msgid "Co_nnect to avsproxy"
+msgstr "?????? avsproxy(_N)"
+
+msgid "Codec 4CC:"
+msgstr "????????? 4CC:"
+
+msgid "Codec Error"
+msgstr "??????????????????"
+
+msgid "Codec:"
+msgstr "?????????:"
+
+msgid "Codecs"
+msgstr "?????????"
+
+msgid "ColorYuv (From avisynth)"
+msgstr "??????????????????(??? avisynth)"
+
+msgid "Colors"
+msgstr "??????"
+
+msgid "Combe_d threshold:"
+msgstr "?????????????????????:"
+
+msgid "Compute Average"
+msgstr "???????????????"
+
+msgid ""
+"Compute average luma value for each pixel throughout all frames, and save to "
+"file"
+msgstr "???????????????????????????????????????????????????????????????????????????????????????"
+
+msgid "ComputeAverage"
+msgstr "???????????????"
+
+msgid "Configure"
+msgstr "??????"
+
+msgid "Configure audio encoder"
+msgstr "??????????????????"
+
+msgid "Configure codec"
+msgstr "???????????????"
+
+msgid "Configure filter"
+msgstr "????????????"
+
+msgid "Configure partialized filter"
+msgstr "?????????????????????"
+
+msgid "Configure video encoder"
+msgstr "??????????????????"
+
+msgid "Constant Bitrate (kbps)"
+msgstr "?????????????????? (kbps)"
+
+msgid "Constant Quantizer"
+msgstr "???????????????"
+
+msgid ""
+"Constant Quantizer - Each frame will have the same compression. Low numbers "
+"equal higher quality while high numbers equal lower quality."
+msgstr ""
+"??????????????? - ?????????????????????????????????????????????????????????????????????????????????????????????"
+"??????"
+
+msgid "Constant quantizer - each frame will get the same compression"
+msgstr "??????????????? - ?????????????????????????????????"
+
+msgid "Continue indexing"
+msgstr "???????????????"
+
+msgid "Contrast"
+msgstr "??????"
+
+msgid "Convert 24 fps to 30 fps by repeating fields."
+msgstr "????????????????????? 24 fps ?????? 30 fps???"
+
+msgid "Convert picture to grey, keeping only chroma U."
+msgstr "??????????????????????????????????????? U???"
+
+msgid "Convert picture to grey, keeping only chroma V."
+msgstr "??????????????????????????????????????? V???"
+
+msgid "Convert picture to greyscale (black and white)."
+msgstr "????????????????????? (???????????????)???"
+
+msgid "Copy"
+msgstr "????????????"
+
+msgid "Core Audio"
+msgstr "Core Audio"
+
+msgid "Coring"
+msgstr "?????????"
+
+msgid "Could not find a filter"
+msgstr "??????????????????"
+
+msgid "Could not get tracks info"
+msgstr "????????????????????????"
+
+msgid "Could not initialize audio"
+msgstr "?????????????????????"
+
+msgid "Could not initialize video"
+msgstr "?????????????????????"
+
+msgid "Could not open \"%s\" for writing."
+msgstr "??????????????????????????? \"%s\""
+
+msgid "Could not open OSS audio device"
+msgstr "???????????? OSS ????????????"
+
+msgid "Could not open subtitle file"
+msgstr "????????????????????????"
+
+msgid "Could not open the file"
+msgstr "??????????????????"
+
+msgid "Could not read \"%s\"."
+msgstr "???????????? \"%s\"."
+
+msgid "Could not save all images."
+msgstr "????????????????????????"
+
+msgid "Could not unpack the video"
+msgstr "??????????????????????????????"
+
+msgid "Could not write the file"
+msgstr "??????????????????"
+
+msgid "Couldn't find pixmap file: %s"
+msgstr "????????????????????????: %s"
+
+msgid "Crash file"
+msgstr "????????????"
+
+msgid "Create _OpenDML files"
+msgstr "??????_OpenDML ??????"
+
+msgid "Create a video made of 6 mini windows, very useful to do DVD menus."
+msgstr "??? 6 ????????????????????????????????????????????? DVD ?????????????????????"
+
+msgid "Crop"
+msgstr "??????"
+
+msgid "Crop Bottom:"
+msgstr "????????????:"
+
+msgid "Crop Left:"
+msgstr "????????????:"
+
+msgid "Crop Right:"
+msgstr "????????????:"
+
+msgid "Crop Settings"
+msgstr "????????????"
+
+msgid "Crop Top:"
+msgstr "????????????:"
+
+msgid "Cu_t"
+msgstr "??????(_T)"
+
+msgid "Cubic interpolate"
+msgstr "????????????"
+
+msgid "Cubic interpolation"
+msgstr "???????????????"
+
+msgid "Current Glyph"
+msgstr "??????????????????"
+
+msgid "Current frame"
+msgstr "????????????"
+
+msgid "Current frame minus average so far"
+msgstr "??????????????????????????????????????????"
+
+msgid "Current time"
+msgstr "????????????"
+
+msgid "Curve compression"
+msgstr "???????????????"
+
+msgid "Custom"
+msgstr "??????"
+
+msgid "Custom Matrix"
+msgstr "????????????"
+
+msgid "Cyrillic"
+msgstr "???????????????"
+
+msgid "DCT Decimate"
+msgstr "??????????????????(DCT)????????????"
+
+msgid "DG at UWA format (includes shape info & bounding box)"
+msgstr "DG at UWA ?????? (?????????????????????????????????)"
+
+msgid "DGBob"
+msgstr "DGBob"
+
+msgid "DTS"
+msgstr "DTS"
+
+msgid "DUMMY"
+msgstr "??????"
+
+msgid "DV (lavc)"
+msgstr "DV (lavc)"
+
+msgid "DVB sub"
+msgstr "DVB sub"
+
+msgid "DVD"
+msgstr "DVD"
+
+msgid "DVD (lavc)"
+msgstr "DVD (lavc)"
+
+msgid "DVD (mpeg2enc)"
+msgstr "DVD (mpeg2enc)"
+
+msgid "DVD 224 kB"
+msgstr "DVD 224 kB"
+
+msgid "DVD Res"
+msgstr "DVD ?????????"
+
+msgid "DVD half D1"
+msgstr "DVD half D1"
+
+msgid "DVD res"
+msgstr "DVD ?????????"
+
+msgid "DVD resolution [Ctrl-1]"
+msgstr "DVD ????????? [Ctrl-1]"
+
+msgid "DVD5"
+msgstr "DVD5"
+
+msgid "De_ringing"
+msgstr "???????????????(_R)"
+
+msgid "Deblocking Filter"
+msgstr "???????????????"
+
+msgid "Debu_g"
+msgstr "??????(_D)"
+
+msgid "Debug:"
+msgstr "??????:"
+
+msgid "Debugging settings (bits):   "
+msgstr "???????????? (??????):"
+
+msgid "Decoder Options"
+msgstr "???????????????"
+
+msgid "Decomb Decimate"
+msgstr "Decomb ???????????????"
+
+msgid "Decomb Telecide"
+msgstr "Decomb ????????????"
+
+msgid "Decompressing error"
+msgstr "????????????"
+
+msgid "Default"
+msgstr "??????"
+
+msgid "Default Postprocessing"
+msgstr "?????????????????????"
+
+msgid ""
+"Define how many pixels are analysed for motion estimation. The higher the "
+"range the more accurate the analysis but the slower the encoding time."
+msgstr "?????????????????????????????????????????????????????????????????????????????????????????????"
+
+msgid ""
+"Define how much the bitrate can fluctuate over the entire video. 0% results "
+"in a constant bitrate stream, while 100% results in a pure quality based "
+"bitrate stream."
+msgstr ""
+"????????????????????????????????????????????????????????????????????????????????????????????? 0%??????????????????"
+"?????????????????????????????? 100%???"
+
+msgid ""
+"Define how much the quantizer rate can change between two consecutive frames"
+msgstr "????????????????????????????????????????????????????????????"
+
+msgid "Deinterlace"
+msgstr "?????????"
+
+msgid "Delete ALL jobs"
+msgstr "??????????????????"
+
+msgid "Delete All Jobs"
+msgstr "??????????????????"
+
+msgid "Delete Job"
+msgstr "????????????"
+
+msgid "Delete job"
+msgstr "????????????"
+
+msgid "Deleted"
+msgstr "??????"
+
+msgid "Denoise"
+msgstr "????????????"
+
+msgid "Destination"
+msgstr "????????????"
+
+msgid "Diamond Search"
+msgstr "????????????"
+
+msgid "Difference between current and previous picture."
+msgstr "????????????????????????????????????????????????"
+
+msgid "Disable"
+msgstr "??????"
+
+msgid "Discard closer"
+msgstr "??????????????????"
+
+msgid "Discard longer dupe (animes)"
+msgstr "?????? longer dupe (animes)"
+
+msgid "Display Stats"
+msgstr "????????????"
+
+msgid "Display _Mode:"
+msgstr "????????????(_M):"
+
+msgid "Display _Output"
+msgstr "????????????(_O)"
+
+msgid "Display all alerts"
+msgstr "??????????????????"
+
+msgid "Display nothing (fast for batch processing)"
+msgstr "??????????????? (???????????????????????????)"
+
+msgid "Display only error alerts"
+msgstr "????????????????????????"
+
+msgid "DivX"
+msgstr "DivX"
+
+msgid "DivX 5 + packed?"
+msgstr "DivX 5 + ??????????"
+
+msgid "Do you want me to unpack it ?"
+msgstr "????????????????????????"
+
+msgid "Do you want to abort indexing ?"
+msgstr "???????????????????????????"
+
+msgid "Do you want to print metrics on screen ?"
+msgstr "???????????????????????????????????????"
+
+msgid "Do you want to save an index ?"
+msgstr "???????????????????????? ?"
+
+msgid "Dolby Pro Logic"
+msgstr "??????????????????"
+
+msgid "Dolby Pro Logic II"
+msgstr "???????????????????????????"
+
+msgid "Done"
+msgstr "??????"
+
+msgid "Double nb of frames (slow motion)"
+msgstr "?????????????????????(?????????)"
+
+msgid "Double nb of frames and fps"
+msgstr "??????????????? fps ?????????"
+
+msgid "Drop"
+msgstr "??????"
+
+msgid "Drop Out"
+msgstr "??????"
+
+msgid "Drop damaged fields (e.g. from VHS capture)."
+msgstr "????????????????????? (???????????? VHS ??????)???"
+
+msgid "DropOut Threshold"
+msgstr "???????????????"
+
+msgid "Dual audio can only be used in copy mode"
+msgstr "???????????????????????? ???????????? ?????????"
+
+msgid "Dual pass (MBytes)"
+msgstr "???????????? (MBytes)"
+
+msgid "Dummy"
+msgstr "??????"
+
+msgid "Duration:"
+msgstr "????????????:"
+
+msgid "EPZS"
+msgstr "EPZS"
+
+msgid "ESD"
+msgstr "ESD"
+
+msgid "Each field becomes full picture, half sized."
+msgstr "???????????????????????????????????????????????????????????????"
+
+msgid ""
+"Early skip detection on P-frames to speedup encoding. Quality will be "
+"slightly reduced."
+msgstr "??? P-???????????????????????????????????????????????????????????????????????????"
+
+msgid "Edit Custom Matrix"
+msgstr "??????????????????"
+
+msgid "Edit loaded custom quantization matrix file"
+msgstr "?????????????????????????????????????????????"
+
+msgid "Embed DVB-T subtitle."
+msgstr "?????? DVB-T ?????????"
+
+msgid "Embed VobSub subtitles into picture."
+msgstr "?????? VobSub ?????????????????????"
+
+msgid "Enable 3DNOW"
+msgstr "?????? 3DNOW"
+
+msgid "Enable 3DNOWEXT"
+msgstr "?????? 3DNOWEXT"
+
+msgid "Enable DCT Intra block search to improve quality"
+msgstr "?????? DCT ?????????????????????????????????"
+
+msgid "Enable MMX"
+msgstr "?????? MMX"
+
+msgid "Enable MMXEXT"
+msgstr "?????? MMXEXT"
+
+msgid "Enable SSE"
+msgstr "?????? SSE"
+
+msgid "Enable SSE2"
+msgstr "?????? SSE2"
+
+msgid "Enable SSE3"
+msgstr "?????? SSE3"
+
+msgid "Enable SSSE3"
+msgstr "?????? SSSE3"
+
+msgid ""
+"Enable a better prediction of AC component. Turns on Lumi masking - applies "
+"more compression to dark/light areas that the eye cannot notice easily"
+msgstr ""
+"????????????????????? AC ????????????????????? Lumi  ??????  - ??? ???/??? ???(????????????????????????"
+"???)??????????????????"
+
+msgid "Enable all SIMD"
+msgstr "???????????? SIMD"
+
+msgid "Enable in-loop deblocking to filter the video"
+msgstr "???????????????????????????????????????"
+
+msgid "Enable time shift"
+msgstr "??????????????????"
+
+msgid "Enables Divx like packed vop, DO NOT SET, it is ugly"
+msgstr "?????? Divx ??????????????? VOP?????????????????????????????????"
+
+msgid "Enables a chroma optimizer prefilter"
+msgstr "???????????????????????????????????????"
+
+msgid "Enables fast 1st pass encoding"
+msgstr "??????????????????????????????"
+
+msgid ""
+"Enables interlaced frame support - use only if your source contains "
+"interlacing artifacts (i.e. fields instead of progressive frames)"
+msgstr ""
+"?????????????????????????????? - ???????????????????????????????????????????????????(???????????????????????????"
+"??????)"
+
+msgid "Enables special motion estimation features for cartoons/anime"
+msgstr "????????? ??????/?????? ????????????????????????"
+
+msgid "Enables weighting of B-frames to help fades"
+msgstr "?????? B-???????????????????????????????????????"
+
+msgid "Encode in black & white"
+msgstr "??????????????????"
+
+msgid "Encoder initialization failed"
+msgstr "???????????????????????????"
+
+msgid "Encoding"
+msgstr "?????????"
+
+msgid "Encoding Mode"
+msgstr "????????????"
+
+msgid "Encoding type:"
+msgstr "????????????:"
+
+msgid "Encoding..."
+msgstr "?????????..."
+
+msgid "End frame for partial :"
+msgstr "?????????????????????:"
+
+msgid "End reached"
+msgstr "???????????????"
+
+msgid "Enforce a maximum quantizer level"
+msgstr "??????????????????????????????"
+
+msgid "Enforce a minimum quantizer level"
+msgstr "??????????????????????????????"
+
+msgid ""
+"Enforce the size of a decoded pixel decoded to a certain value. Set this to "
+"1:1 for non-anamorphic video."
+msgstr ""
+"???????????????????????????????????????????????????????????????????????????????????? 1:1 ?????????????????????"
+
+msgid "Enhance difference between near pixels."
+msgstr "???????????????????????????"
+
+msgid "Enter parameters (i.e. -b 192 -m s ...)"
+msgstr "???????????? (i.e. -b 192 -m s ...)"
+
+msgid "Equalizer"
+msgstr "?????????"
+
+msgid "Erase"
+msgstr "?????????"
+
+msgid "Eraser"
+msgstr "?????????"
+
+msgid "Eraser Configuration"
+msgstr "???????????????"
+
+msgid "Eraser _Data File:"
+msgstr "?????????????????????(_D):"
+
+msgid "Error"
+msgstr "??????"
+
+msgid "Error Loading"
+msgstr "????????????"
+
+msgid "Error Writing"
+msgstr "????????????"
+
+msgid "Error converting to BMP"
+msgstr "?????? BMP ??????"
+
+msgid "Error in pass 1"
+msgstr "??? pass 1 ????????????"
+
+msgid "Error in pass 2"
+msgstr "??? pass 2 ????????????"
+
+msgid "Error initalizing audio filters"
+msgstr "?????????????????????????????????"
+
+msgid "Error initalizing video filters"
+msgstr "?????????????????????????????????"
+
+msgid "Error loadind the custom matrix file."
+msgstr "???????????????????????????????????????"
+
+msgid "Error loading the AC3 file"
+msgstr "?????? AC3 ????????????"
+
+msgid "Error loading the MP3 file"
+msgstr "?????? MP3 ????????????"
+
+msgid "Error loading the WAV file"
+msgstr "?????? WAV ????????????"
+
+msgid "Error reading ifo file, aborting."
+msgstr "??????????????? ifo ??????????????????"
+
+msgid "Error while encoding"
+msgstr "????????????????????????"
+
+msgid "Error writing the custom matrix file."
+msgstr "????????????????????????????????????"
+
+msgid "Errors found in %u frames"
+msgstr "??? %u ??????????????????"
+
+msgid "Exhaustive Search"
+msgstr "????????????"
+
+msgid "Expect a crash."
+msgstr "??????????????????"
+
+msgid "External"
+msgstr "?????????"
+
+msgid "External AC3"
+msgstr "????????? AC3"
+
+msgid "External Filters"
+msgstr "???????????????"
+
+msgid "External MP3"
+msgstr "????????? MP3"
+
+msgid "External WAV"
+msgstr "????????? WAV"
+
+msgid "Extra Settings"
+msgstr "???????????????"
+
+msgid "Extra Shrink Factor :"
+msgstr "?????????????????????:"
+
+msgid "Extra check, avoid using it"
+msgstr "?????????????????????????????????"
+
+msgid "Extra slow (same as 3+multiple reference frames)"
+msgstr "????????? (??????3???3??????????????????????????????)"
+
+msgid "Extrapolate better (better not to use it)"
+msgstr "???????????????(??????????????????)"
+
+msgid "Extreme"
+msgstr "??????"
+
+msgid "FAAC"
+msgstr "FAAC"
+
+msgid "FAAD2"
+msgstr "FAAD2"
+
+msgid "FF Huffyuv (lavc)"
+msgstr "FF Huffyuv (lavc)"
+
+msgid "FFV1 (lavc)"
+msgstr "FFV1 (lavc)"
+
+msgid "FFmpeg MPEG-1 VBR"
+msgstr "FFmpeg MPEG-1 VBR"
+
+msgid "FFmpeg MPEG-2 DVD VBR"
+msgstr "FFmpeg MPEG-2 DVD VBR"
+
+msgid "FFmpeg MPEG-2 SVCD VBR"
+msgstr "FFmpeg MPEG-2 SVCD VBR"
+
+msgid "FFmpeg deint"
+msgstr "FFmpeg ?????????"
+
+msgid "FILM- 24 FPS"
+msgstr "FILM- 24 FPS"
+
+msgid "FLV"
+msgstr "FLV"
+
+msgid "FLV1 (lavc)"
+msgstr "FLV1 (lavc)"
+
+msgid "FLV1 Configuration"
+msgstr "FLV1 ??????"
+
+msgid "F_LV"
+msgstr "F_LV"
+
+msgid "Factor between I and P-frame Quants"
+msgstr "I-????????? P-???????????????????????????"
+
+msgid "Factor between P and B-frame Quants"
+msgstr "P-????????? B-???????????????????????????"
+
+msgid "Fade"
+msgstr "??????"
+
+msgid "Fade in"
+msgstr "??????"
+
+msgid "Fade in/out."
+msgstr "??????/??????"
+
+msgid "Fade out"
+msgstr "??????"
+
+msgid "Fade to _black"
+msgstr "?????????????????????(_B)"
+
+msgid "Failed"
+msgstr "??????"
+
+msgid ""
+"Failed to connect to avsproxy.\n"
+"Is it running ?"
+msgstr ""
+"?????? avsproxy ?????????\n"
+"?????????????????????"
+
+msgid "Failed to open the file"
+msgstr "??????????????????"
+
+msgid "Fast"
+msgstr "??????"
+
+msgid "Fast (partial luma and chroma)"
+msgstr "??? (????????????????????????)"
+
+msgid "Fast Convolution"
+msgstr "????????????"
+
+msgid "Fast P-Skip"
+msgstr "?????? P-Skip"
+
+msgid "Fastest (no chroma, partial luma)"
+msgstr "?????? (??????????????????????????????)"
+
+msgid "Fatal Error"
+msgstr "???????????????"
+
+msgid "Fatal error"
+msgstr "???????????????"
+
+msgid "Fewest bits (vhq)"
+msgstr "??????????????? (vhq)"
+
+msgid "Fil_ters"
+msgstr "??????(_F)"
+
+msgid "File %s has been successfully saved."
+msgstr "??????%s?????????????????????"
+
+msgid "File %s was NOT saved correctly."
+msgstr "?????? %s ??????????????????"
+
+msgid "File Size:"
+msgstr "????????????:"
+
+msgid "File error"
+msgstr "????????????"
+
+msgid "File type identified but no loader support detected..."
+msgstr "??????????????????????????????????????????????????????????????????"
+
+msgid "Filesystem full / quota exceeded"
+msgstr "?????????????????? / ???????????????"
+
+msgid "Fill borders with pure black. Doesn't alter size."
+msgstr "??????????????????????????????????????????"
+
+msgid "Film to PAL"
+msgstr "Film to PAL"
+
+msgid "Filter init failed"
+msgstr "?????????????????????"
+
+msgid "Filters"
+msgstr "??????"
+
+msgid "Finding black frames"
+msgstr "?????????????????????"
+
+msgid "Finished at"
+msgstr "?????????"
+
+msgid "First frame"
+msgstr "?????????"
+
+msgid "Flat Matrix"
+msgstr "????????????"
+
+msgid "Float"
+msgstr "??????"
+
+msgid "FluxSmooth"
+msgstr "????????????"
+
+msgid "Font Size:"
+msgstr "????????????:"
+
+msgid "Fontconfig"
+msgstr "Fontconfig"
+
+msgid "For DVD, audio must be 48 kHz MP2(stereo), AC3, DTS or LPCM (stereo)."
+msgstr "DVD?????????????????? 48 kHz MP2(??????), AC3, DTS ??? LPCM (??????)???"
+
+msgid "For DVD, audio must be 48 kHz MP2, AC3 or LPCM."
+msgstr "DVD?????????????????? 48 kHz MP2, AC3 ??? LPCM???"
+
+msgid "For DVD, audio must be MP2 or AC3."
+msgstr "DVD ?????????????????? MP2 ??? AC3"
+
+msgid "For VCD, audio must be 44.1 kHz MP2."
+msgstr "VCD?????????????????? 44.1 kHz MP2???"
+
+msgid "Force too-bright/too-dim pixels to 0 and the rest to 255 or vice-versa"
+msgstr "?????? ??????/?????? ???????????? 0 ?????????????????? 255 ???????????????"
+
+msgid "Forced Postprocessing"
+msgstr "?????????????????????"
+
+msgid "Forced postprocessing"
+msgstr "?????????????????????"
+
+msgid "Frame Count:"
+msgstr "?????????:"
+
+msgid "Frame Hex Dump"
+msgstr "??????16 ????????????"
+
+msgid "Frame Rate"
+msgstr "?????????"
+
+msgid "Frame Rate:"
+msgstr "?????????:"
+
+msgid "Frame size:"
+msgstr "????????????:"
+
+msgid "Frame type:"
+msgstr "????????????:"
+
+msgid "Frame: "
+msgstr "??????:"
+
+msgid "Frame: ?"
+msgstr "??????:???"
+
+msgid "Frame:%c(%02d)"
+msgstr "??????:%c(%02d)"
+
+msgid "FreeType 2"
+msgstr "FreeType 2"
+
+msgid "Frequency must be 44100, 22050 or 11025 Hz."
+msgstr "??????????????? 44100, 22050 ??? 11025 Hz."
+
+msgid "Frequency:"
+msgstr "??????:"
+
+msgid "Full"
+msgstr "??????"
+
+msgid "Full link"
+msgstr "????????????"
+
+msgid "Full parameter line"
+msgstr "???????????????"
+
+msgid "Further enable DCT Intra block search to improve quality"
+msgstr "??????????????? DCT ?????????????????????????????????"
+
+msgid "Further improve the P-frame quality"
+msgstr "?????????????????? P-frame ?????????"
+
+msgid "GTK+ (slow)"
+msgstr "GTK+ (???)"
+
+msgid "G_ain value:"
+msgstr "?????????:"
+
+msgid "Gain"
+msgstr "??????"
+
+msgid "Gamma"
+msgstr "Gamma"
+
+msgid "Gauss smooth"
+msgstr "????????????"
+
+msgid "Gaussian smooth. Blur the picture."
+msgstr "??????????????????????????????"
+
+msgid "General block breakdown transformation"
+msgstr "????????????????????????"
+
+msgid "Generating VobSub file"
+msgstr "?????? VobSub ??????"
+
+msgid "Get Frame"
+msgstr "????????????"
+
+msgid "Get PAR from input video file"
+msgstr "?????????????????????????????? PAR"
+
+msgid "Gettext"
+msgstr "Gettext"
+
+msgid "Gl_yphSet:"
+msgstr "??????????????????:"
+
+msgid "Global GlyphSet"
+msgstr "???????????????????????????"
+
+msgid ""
+"Global Motion Compensation can save bits on camera pans, zooming and rotation"
+msgstr "?????????????????????????????????????????????????????????????????????????????????"
+
+msgid "Global Motion Compensation:"
+msgstr "??????????????????:"
+
+msgid "GlyphSet filename"
+msgstr "???????????????????????????"
+
+msgid "Go to Fra_me..."
+msgstr "????????????...(_M)"
+
+msgid "Go to Frame"
+msgstr "????????????"
+
+msgid "Go to Marker _A"
+msgstr "???????????? _A"
+
+msgid "Go to Marker _B"
+msgstr "???????????? _B"
+
+msgid "Go to Time"
+msgstr "????????????"
+
+msgid "Go to _Time..."
+msgstr "????????????...(_T)"
+
+msgid "Go to marker A"
+msgstr "????????????A"
+
+msgid "Go to marker B"
+msgstr "????????????B"
+
+msgid "Great deinterlacing package including IVTC."
+msgstr "???????????? IVTC ?????????????????????"
+
+msgid "Greek"
+msgstr "??????"
+
+msgid "H"
+msgstr "H"
+
+msgid "H.263"
+msgstr "H.263"
+
+msgid "H.263 (lavc)"
+msgstr "H.263 (lavc)"
+
+msgid "H.263 quantizers smooth the picture (useful at lower bitrates)"
+msgstr "H.263 ???????????????????????? (????????????????????????)"
+
+msgid "H.263+ (lavc)"
+msgstr "H.263+ (lavc)"
+
+msgid "H.264 detected"
+msgstr "????????? H.264"
+
+msgid "H263 Quantizer"
+msgstr "H263 ?????????"
+
+msgid "HQ _AC"
+msgstr "HQ _AC"
+
+msgid "Hadamard Exhaustive Search"
+msgstr "????????????????????????"
+
+msgid "Half D1 Res"
+msgstr "Half D1 ?????????"
+
+msgid "Half D1 res"
+msgstr "Half D1 ?????????"
+
+msgid "Half D1 resolution [Ctrl-2]"
+msgstr "Half D1 ????????? [Ctrl-2]"
+
+msgid "Hard IVTC Removal"
+msgstr "????????? IVTC"
+
+msgid "Hard pulldown removal"
+msgstr "???????????? Pulldown"
+
+msgid "Head reached"
+msgstr "????????????????????????"
+
+msgid "Hebrew"
+msgstr "?????????"
+
+msgid "Hexagonal Search"
+msgstr "???????????????"
+
+msgid "High"
+msgstr "???"
+
+msgid "High bitrate scenes (%):"
+msgstr "??????????????????(%):"
+
+msgid "High quality version of denoise3d. Slower but more precise."
+msgstr "denoise3d ????????????????????? ?????????????????????"
+
+msgid ""
+"Higher settings give higher quality results, at the cost of slower encoding"
+msgstr "???????????????????????????????????????????????????????????????????????????"
+
+msgid ""
+"How much of the overflow the codec can eat into during oversized sections - "
+"larger values will bridge the gap faster"
+msgstr "???????????????????????????????????????????????????????????? - ????????????????????????????????????"
+
+msgid ""
+"How much of the overflow the codec can eat into during undersized sections - "
+"larger values will bridge the gap faster"
+msgstr "???????????????????????????????????????????????????????????? - ????????????????????????????????????"
+
+msgid "Hue"
+msgstr "??????"
+
+msgid "Hue/Saturation"
+msgstr "??????/?????????"
+
+msgid "Huffyuv (lavc)"
+msgstr "Huffyuv (lavc)"
+
+msgid "Hz Stack fields"
+msgstr "Hz ????????????"
+
+msgid ""
+"I have detected a crash file. \n"
+"Do you want to load it  ?\n"
+"(It will be deleted in all cases, you should save it if you want to keep it)"
+msgstr ""
+"???????????????????????????. \n"
+"??????????????? ?\n"
+"(???????????????????????????????????????????????????????????????????????????)"
+
+msgid "I-frame boost (%):"
+msgstr "I-???????????? (%):"
+
+msgid "I-frame interval - Min:"
+msgstr "I-???????????? - ?????????:"
+
+msgid "I-frame quantizer - Min:"
+msgstr "I-??????????????? - ??????:"
+
+msgid ""
+"I-frames appearing in the range below this value will be treated as "
+"consecutive keyframes"
+msgstr "????????????????????? I-????????????????????????????????????????????????????????????????????????"
+
+msgid "I-frames closer than ... frames..."
+msgstr "I-?????????????????? ... ??????..."
+
+msgid "IMA ADPCM"
+msgstr "IMA ADPCM"
+
+msgid "IPOD (mpeg4)"
+msgstr "IPOD (mpeg4)"
+
+msgid "I_dentical:"
+msgstr "??????:"
+
+msgid "Identify 'particles' (groups of pixels)"
+msgstr "?????? '??????' (???????????????)"
+
+msgid "If metric is less than identical, images are considered identical"
+msgstr "??????????????????????????????????????????????????????????????????"
+
+msgid "If pixels are closer than noise, they are considered to be the same"
+msgstr "???????????????????????????????????????????????????"
+
+msgid "If still combed"
+msgstr "???????????????????????????"
+
+msgid ""
+"If the file is using B-frames as reference it can lead to a crash or "
+"stuttering.\n"
+"Avidemux can use another mode which is safe but YOU WILL LOSE FRAME "
+"ACCURACY.\n"
+"Do you want to use that mode?"
+msgstr ""
+"???????????????????????? B-???????????????????????????????????????????????????????????????\n"
+"Avidemux ??????????????????????????????????????????<b>??????????????????????????????</b>???\n"
+"??????????????????????????? ?"
+
+msgid "If the glyphs are too thin, enter a lower value here"
+msgstr "?????????????????????????????????????????????????????????"
+
+msgid ""
+"If value is smaller than threshold it is considered valid. Smaller value "
+"might mean more false positive"
+msgstr "????????????????????????????????????????????????????????????????????????????????????????????????"
+
+msgid ""
+"If value is smaller than threshold it is considered valid.Smaller value "
+"might mean more false positive."
+msgstr "???????????????????????????????????????????????????????????????????????????????????????????????????"
+
+msgid "Ifo error"
+msgstr "Ifo ??????"
+
+msgid "Ignore"
+msgstr "??????"
+
+msgid "Image Size:"
+msgstr "????????????:"
+
+msgid "Images"
+msgstr "??????"
+
+msgid "Improve the B-frame quality"
+msgstr "?????? B-???????????????"
+
+msgid "Improve the P-frame quality"
+msgstr "?????? P-frame ?????????"
+
+msgid "In"
+msgstr "???"
+
+msgid "In-range values go black, out-of-range go white"
+msgstr "???????????????????????????????????????????????????"
+
+msgid "In-range values go black, out-of-range values go white"
+msgstr "???????????????????????????????????????????????????"
+
+msgid "In-range values go white, out-of-range go black"
+msgstr "???????????????????????????????????????????????????"
+
+msgid "In-range values go white, out-of-range values go black"
+msgstr "???????????????????????????????????????????????????"
+
+msgid "Incompatible audio"
+msgstr "??????????????????"
+
+msgid "Incompatible frame rate"
+msgstr "?????????????????????"
+
+msgid "Incompatible output format"
+msgstr "????????????????????????"
+
+msgid "Incompatible settings"
+msgstr "???????????????"
+
+msgid "Incorrect parameters"
+msgstr "??????????????????"
+
+msgid ""
+"Increase / decrease probability for how often B-frames are used. It will not "
+"violate the maximum consecutive frame limit."
+msgstr ""
+"?????? / ?????? ???????????????????????? B-??????????????????????????????????????????????????????????????????"
+
+msgid ""
+"Increase / decrease sensitivity for detecting scene changes. Improves I-"
+"frame usage and quality."
+msgstr ""
+"??????/?????? ??????????????????????????????????????????????????? I-????????????????????????????????????"
+
+msgid "Index is not up to date"
+msgstr "?????????????????????"
+
+msgid "Indexing"
+msgstr "?????????"
+
+msgid "Indexing :"
+msgstr "???????????????:"
+
+msgid "Indexing failed"
+msgstr "???????????????"
+
+msgid "Indexing..."
+msgstr "????????????..."
+
+msgid ""
+"Init By _Rolling (compute head start using a rolling average rather than a "
+"straight average)"
+msgstr "?????????????????????(_R)(??????????????????????????????????????????????????????????????????)"
+
+msgid "Init _End Frame (last frame # to use for head start):"
+msgstr "????????????????????? (???????????? # ???????????????)(_E):"
+
+msgid "Init _Start Frame (first frame # to use for head start):"
+msgstr "????????????????????? (??????????????? # ???????????????)(_S):"
+
+msgid "Initial VBV Buffer (%)"
+msgstr "?????? VBV ?????? (%)"
+
+msgid "Input"
+msgstr "??????"
+
+msgid "Input TS:"
+msgstr "?????? TS:"
+
+msgid "Input _Constant:"
+msgstr "???????????????(_C):"
+
+msgid "Input _File (image or convolution kernel):"
+msgstr "???????????? (?????????????????????)(_F):"
+
+msgid "Input _Type:"
+msgstr "????????????(_T):"
+
+msgid "Input file error"
+msgstr "??????????????????"
+
+msgid "Input video is interlaced"
+msgstr "???????????????"
+
+msgid "Interlaced"
+msgstr "?????????"
+
+msgid "Interlaced BFF"
+msgstr "????????? BFF"
+
+msgid "Interlaced TFF"
+msgstr "????????? TFF"
+
+msgid "Interlacing"
+msgstr "??????"
+
+msgid "Interleave top and bottom part of the picture."
+msgstr "????????????????????????????????????"
+
+msgid "Internal error"
+msgstr "??????????????????"
+
+msgid "Internal error finding codec '"
+msgstr "???????????????????????????????????????"
+
+msgid "Internal error opening codec"
+msgstr "????????????????????????????????????????????????"
+
+msgid "Internal error with context for  codec"
+msgstr "???????????????????????????????????????????????????"
+
+msgid "Invalid audio stream detected"
+msgstr "???????????????????????????"
+
+msgid "Invert chroma U and chroma V."
+msgstr "?????? U ??? V ????????????"
+
+msgid "It is not MPEG-4 video. File will not be saved."
+msgstr "?????? MPEG-4 ?????????????????????????????????"
+
+msgid "It is possible that you are trying to overwrite an input file!"
+msgstr "?????????????????????????????????????????????!"
+
+msgid "JACK"
+msgstr "JACK"
+
+msgid "JVT Matrix"
+msgstr "JVT ??????"
+
+msgid "Jobs"
+msgstr "??????"
+
+msgid "Joint stereo"
+msgstr "????????????"
+
+msgid "KVCD"
+msgstr "KVCD"
+
+msgid "Keep bottom fileds. Gives a half height picture."
+msgstr "??????????????????????????????????????????????????????"
+
+msgid "Keep even fields"
+msgstr "??????????????????"
+
+msgid "Keep nb of frames and fps"
+msgstr "??????????????? fps ?????????"
+
+msgid "Keep odd fields"
+msgstr "??????????????????"
+
+msgid "Keep top fields. Gives a half height picture."
+msgstr "??????????????????????????????????????????????????????"
+
+msgid "Kernel deinterlacer by Donald Graft."
+msgstr "??????????????????????????? Donald Graft???"
+
+msgid "Kernel interpolation"
+msgstr "???????????????"
+
+msgid "KernelDeint"
+msgstr "???????????????(KernelDeint)"
+
+msgid "KeyFrame error"
+msgstr "??????????????????"
+
+msgid "Keyframe Boost (%)"
+msgstr "?????????????????? (%)"
+
+msgid "LAME"
+msgstr "LAME"
+
+msgid "LAME Configuration"
+msgstr "LAME ??????"
+
+msgid "LPCM"
+msgstr "LPCM"
+
+msgid "L_uma threshold:"
+msgstr "???????????????:"
+
+msgid "Lame command"
+msgstr "Lame ??????"
+
+msgid "Lanczos3"
+msgstr "Lanczos3"
+
+msgid "Large Median 5x5"
+msgstr "???????????? 5x5"
+
+msgid "Last frame"
+msgstr "????????????"
+
+msgid "Latin-1 (Western European)"
+msgstr "Latin-1 (??????)"
+
+msgid "Latin-2 (Central European)"
+msgstr "Latin-2 (??????)"
+
+msgid "LavCodec"
+msgstr "Lav ????????????"
+
+msgid "Level"
+msgstr "??????"
+
+msgid "Libraries"
+msgstr "?????????"
+
+msgid "Light denoiser."
+msgstr "?????????????????????"
+
+msgid "Linear blend"
+msgstr "????????????"
+
+msgid "Linear interpolate"
+msgstr "????????????"
+
+msgid "Load Custom Matrix:  "
+msgstr "??????????????????  "
+
+msgid ""
+"Load _Multiplier (each pixel in\n"
+"file image mult. by this when loaded):"
+msgstr ""
+"??????????????? (????????????\n"
+"??????????????????????????????????????????)(_M):"
+
+msgid "Load it"
+msgstr "?????????"
+
+msgid "Load set of filters"
+msgstr "?????????????????????"
+
+msgid "Log"
+msgstr "??????"
+
+msgid "Logo"
+msgstr "??????"
+
+msgid "Look ahead _N frames:"
+msgstr "????????? _N ??????:"
+
+msgid ""
+"Lossless compression technique that reduces bitrate by approximately 10%. "
+"Increases encoding and decoding time."
+msgstr "????????????????????????????????? 10% ?????????????????????????????????????????????"
+
+msgid "Low"
+msgstr "???"
+
+msgid "Low bitrate scenes (%):"
+msgstr "??????????????????(%):"
+
+msgid "Luma"
+msgstr "??????"
+
+msgid "Luma :"
+msgstr "??????:"
+
+msgid "Luma Y"
+msgstr "?????? Y"
+
+msgid "Luma correction filter with histogram."
+msgstr "??????????????????????????????"
+
+msgid "Luma delta"
+msgstr "????????????"
+
+msgid "Luma equalizer"
+msgstr "???????????????"
+
+msgid "Luma only"
+msgstr "????????????"
+
+msgid "MAD"
+msgstr "MAD"
+
+msgid "MB comparison"
+msgstr "MB ??????"
+
+msgid "MJPEG"
+msgstr "MJPEG"
+
+msgid "MJPEG (lavc)"
+msgstr "MJPEG (lavc)"
+
+msgid "MJPEG Configuration"
+msgstr "MJPEG ??????"
+
+msgid "MKV"
+msgstr "MKV"
+
+msgid "MP2"
+msgstr "MP2"
+
+msgid "MP3"
+msgstr "MP3"
+
+msgid "MP4"
+msgstr "MP4"
+
+msgid "MPEG"
+msgstr "MPEG"
+
+msgid "MPEG DVD"
+msgstr "MPEG DVD"
+
+msgid "MPEG ES"
+msgstr "MPEG ES"
+
+msgid "MPEG Quantizer"
+msgstr "MPEG ?????????"
+
+msgid "MPEG Requantizer"
+msgstr "MPEG ???????????????"
+
+msgid "MPEG SVCD"
+msgstr "MPEG SVCD"
+
+msgid "MPEG TS"
+msgstr "MPEG TS"
+
+msgid "MPEG VCD"
+msgstr "MPEG VCD"
+
+msgid ""
+"MPEG quantizers (slightly slower) produce sharper picture (useful at higher "
+"bitrates)"
+msgstr "MPEG ????????? (????????????) ???????????????????????? (????????????????????????)"
+
+msgid "MPEG renumbering error"
+msgstr "MPEG ???????????????"
+
+msgid "MPEG video"
+msgstr "MPEG ??????"
+
+msgid "MPEG-2 Configuration"
+msgstr "MPEG-2 ??????"
+
+msgid "MPEG-2 requant"
+msgstr "MPEG-2 ????????????"
+
+msgid "MPEG-4 ASP (Xvid4)"
+msgstr "MPEG-4 ASP (Xvid4)"
+
+msgid "MPEG-4 ASP (lavc)"
+msgstr "MPEG-4 ASP (lavc)"
+
+msgid "MPEG-4 AVC (x264)"
+msgstr "MPEG-4 AVC (x264)"
+
+msgid "MPEG-PS (A+V)"
+msgstr "MPEG-PS (A+V)"
+
+msgid "MPEG-TS (A+V)"
+msgstr "MPEG-TS (A+V)"
+
+msgid "MPlayer delogo"
+msgstr "Mplayer ????????????"
+
+msgid "MPlayer denoise3d"
+msgstr "MPlayer denoise3d"
+
+msgid "MPlayer eq2"
+msgstr "MPlayer eq2"
+
+msgid "MPlayer hqdn3d"
+msgstr "MPlayer hqdn3d"
+
+msgid "MPlayer hue"
+msgstr "MPlayer ??????"
+
+msgid "MPlayer resize"
+msgstr "MPlayer ????????????"
+
+msgid "MSADPCM"
+msgstr "MSADPCM"
+
+msgid "MSharpen"
+msgstr "M?????????"
+
+msgid "MSmooth"
+msgstr "MSmooth ??????"
+
+msgid "MSmooth by Donald Graft"
+msgstr "MSmooth ??????????????? Donald Graft"
+
+msgid "Ma_x. bitrate:"
+msgstr "???????????????:"
+
+msgid "Ma_x. quantizer:"
+msgstr "???????????????:"
+
+msgid "Ma_ximum area for a particle to be detected:"
+msgstr "????????????????????????????????????:"
+
+msgid "Ma_ximum value to be in-range:"
+msgstr "????????????????????????:"
+
+msgid "Main"
+msgstr "??????"
+
+msgid "Main Audio Track"
+msgstr "????????????"
+
+msgid "Malformed header"
+msgstr "??????????????????"
+
+msgid "Manual"
+msgstr "??????"
+
+msgid "Mark A > B"
+msgstr "?????? A > B"
+
+msgid "Marker A > B"
+msgstr "?????? A > B"
+
+msgid "Mask interlacing artifacts. Port of Smart deinterlace."
+msgstr "???????????????????????????????????????????????????"
+
+msgid "Master"
+msgstr "??????"
+
+msgid "Matrices"
+msgstr "??????"
+
+msgid "Matrix"
+msgstr "??????"
+
+msgid "Matrix Loaded"
+msgstr "???????????????"
+
+msgid "Max"
+msgstr "??????"
+
+msgid "Max Consecutive"
+msgstr "???????????????"
+
+msgid "Max I Frame Qzer"
+msgstr "????????? I ???????????????"
+
+msgid "Max I frame interval "
+msgstr "?????? I ????????????"
+
+msgid "Max IDR Frame Interval"
+msgstr "?????? IDR ??????????????????"
+
+msgid "Max P Frame Qzer"
+msgstr "????????? P ???????????????"
+
+msgid "Max QP"
+msgstr "?????? Qp"
+
+msgid "Max QP Step"
+msgstr "?????? QP ??????"
+
+msgid "Max overflow degradation (%):"
+msgstr "??????????????????(%):"
+
+msgid "Max overflow improvement (%):"
+msgstr "??????????????????(%):"
+
+msgid "Max. B frames:"
+msgstr "?????? B ?????????:"
+
+msgid "Max. Ref. Frames"
+msgstr "?????????????????????"
+
+msgid "Max. bitrate:"
+msgstr "???????????????:"
+
+msgid "Max. quantizer _difference:"
+msgstr "??????????????????(_D):"
+
+msgid "Max:"
+msgstr "??????:"
+
+msgid "Maximum Local Bitrate"
+msgstr "????????????????????????"
+
+msgid "Maximum number of frames allowed between I-frames"
+msgstr "???????????? I-??????????????????????????????"
+
+msgid ""
+"Maximum number of sequential B-frames (when set to 0, the original I/P "
+"encoder is used)"
+msgstr "????????? B-????????????????????? (???????????? 0????????????????????? I/P ?????????)"
+
+msgid "Maximum quantizer allowed for B-frames"
+msgstr "B-?????????????????????????????????"
+
+msgid "Maximum quantizer allowed for I-frames"
+msgstr "I-?????????????????????????????????"
+
+msgid "Maximum quantizer allowed for P-frames"
+msgstr "P-?????????????????????????????????"
+
+msgid "Maximum value to be in-range:"
+msgstr "????????????????????????:"
+
+msgid "May be related to an old index file."
+msgstr "????????????????????????????????????"
+
+msgid "Mean"
+msgstr "??????"
+
+msgid "Mean (blur) kernel."
+msgstr "?????? (??????) ?????????"
+
+msgid "Median"
+msgstr "??????"
+
+msgid "Median (5x5)"
+msgstr "?????? (5x5)"
+
+msgid "Median interpolate"
+msgstr "????????????"
+
+msgid "Median kernel 3x3. Remove high frequency noise."
+msgstr "???????????? 3x3???????????????????????????"
+
+msgid "Median kernel 5x5. Good for reducing chroma noise."
+msgstr "???????????? 5x5?????????????????????????????????"
+
+msgid "Medium"
+msgstr "??????"
+
+msgid "Medium (full luma, no chroma)"
+msgstr "?????? (??????????????????????????????)"
+
+msgid "Memory Error"
+msgstr "???????????????"
+
+msgid ""
+"Memory constant _alpha\n"
+"(where A = (1-alpha)*A + alpha*(curr_frame + lookahead)):"
+msgstr ""
+"??????????????? _alpha ?????????\n"
+"(?????? A = (1-alpha)*A + alpha*(????????????+???????????????)):"
+
+msgid "Memory error"
+msgstr "???????????????"
+
+msgid "Merge fields"
+msgstr "????????????"
+
+msgid "Merge two pictures as if they were two fields."
+msgstr "????????????????????????????????????????????????"
+
+msgid "Method"
+msgstr "??????"
+
+msgid "Metrics"
+msgstr "??????"
+
+msgid "Mi_n. bitrate:"
+msgstr "???????????????:"
+
+msgid "Mi_n. quantizer:"
+msgstr "???????????????:"
+
+msgid "Mi_nimum area for a particle to be detected:"
+msgstr "????????????????????????????????????:"
+
+msgid "Mi_nimum value to be in-range:"
+msgstr "????????????????????????:"
+
+msgid "Min I Frame Qzer"
+msgstr "????????? I ???????????????"
+
+msgid "Min I frame interval"
+msgstr "?????? I ????????????"
+
+msgid "Min IDR Frame Interval"
+msgstr "?????? IDR ??????????????????"
+
+msgid "Min P Frame Qzer"
+msgstr "????????? P ???????????????"
+
+msgid "Min QP"
+msgstr "?????? Qp"
+
+msgid "Mini OCR"
+msgstr "Mini OCR"
+
+msgid "Minimum quantizer allowed for B-frames"
+msgstr "B-?????????????????????????????????"
+
+msgid "Minimum quantizer allowed for I-frames"
+msgstr "I-?????????????????????????????????"
+
+msgid "Minimum quantizer allowed for P-frames"
+msgstr "P-?????????????????????????????????"
+
+msgid "Minimum space between I-frames, 1 will disable forced I-frame spacing"
+msgstr "I-??????????????????????????????1 ?????????????????? I-????????????"
+
+msgid "Minimum value to be in-range:"
+msgstr "????????????????????????:"
+
+msgid "Misc"
+msgstr "??????"
+
+msgid "Miscellaneous"
+msgstr "????????????"
+
+msgid "Mixed Refs"
+msgstr "????????????"
+
+msgid "Modified ELA"
+msgstr "????????? ELA"
+
+msgid "Modified ELA-2"
+msgstr "????????? ELA-2"
+
+msgid "Mono"
+msgstr "??????"
+
+msgid "More"
+msgstr "??????"
+
+msgid "Mosaic"
+msgstr "?????????"
+
+msgid "Motion & Misc"
+msgstr "?????? & ??????"
+
+msgid "Motion Estimation"
+msgstr "????????????"
+
+msgid "Motion Search"
+msgstr "????????????"
+
+msgid "Motion Threshold"
+msgstr "???????????????"
+
+msgid "Motion adaptative deinterlacer by Tritical."
+msgstr "????????????????????????????????? Tritical???"
+
+msgid "Motion compensation deinterlacer. Ported from MPlayer."
+msgstr "?????????????????????????????? MPlayer ?????????"
+
+msgid "Motion search precision:"
+msgstr "?????????????????????:"
+
+msgid "Motion threshold, c_hroma:"
+msgstr "????????????????????????:"
+
+msgid "Motion threshold, l_uma:"
+msgstr "????????????????????????:"
+
+msgid "Move filter down"
+msgstr "????????????"
+
+msgid "Move filter up"
+msgstr "????????????"
+
+msgid "Mplayer Delogo"
+msgstr "Mplayer Delogo"
+
+msgid "Multi-platform Video Editor"
+msgstr "???????????????????????????"
+
+msgid "Multi-threading"
+msgstr "?????????"
+
+msgid "Multiple Audio Tracks"
+msgstr "?????????"
+
+msgid "Mux _every x video frames:"
+msgstr "???????????? x ????????????(_E):"
+
+msgid "Mux by packet size"
+msgstr "???????????????????????????"
+
+msgid "Mux every N video frames"
+msgstr "???????????? N ????????????"
+
+msgid "Mux in _blocks of x bytes:"
+msgstr "??? x ??????????????????????????????(_B):"
+
+msgid "Muxing _type:"
+msgstr "????????????(_T):"
+
+msgid "NTSC 16:9"
+msgstr "NTSC 16:9"
+
+msgid "NTSC 4:3"
+msgstr "NTSC 4:3"
+
+msgid "NTSC converted from PAL"
+msgstr "??? PAL ?????? NTSC"
+
+msgid "NTSC- 30 FPS"
+msgstr "NTSC- 30 FPS"
+
+msgid "Narrow"
+msgstr "??????"
+
+msgid "Nb pictures seen :"
+msgstr "??????????????????:"
+
+msgid "Ne_xt Black Frame"
+msgstr "???????????????(_X)"
+
+msgid "Never"
+msgstr "??????"
+
+msgid "New format, preferred, good for Tracker3D"
+msgstr "??????????????? Tracker3D ???????????????"
+
+msgid "Next Empty"
+msgstr "??????????????????"
+
+msgid "Next _Intra Frame"
+msgstr "??????????????????(_I)"
+
+msgid "Next black frame"
+msgstr "???????????????"
+
+msgid "Next frame"
+msgstr "?????????"
+
+msgid "Next keyframe"
+msgstr "??????????????????"
+
+msgid "No"
+msgstr "???"
+
+msgid "No Strategy"
+msgstr "?????????"
+
+msgid "No alerts"
+msgstr "??????????????????"
+
+msgid "No audio"
+msgstr "????????????"
+
+msgid "No audio decoder found for this file"
+msgstr "???????????????????????????????????????????????????"
+
+msgid "No audio track"
+msgstr "????????????"
+
+msgid "No change"
+msgstr "????????????"
+
+msgid "No data"
+msgstr "????????????"
+
+msgid "No downmixing"
+msgstr "????????????"
+
+msgid "No error found"
+msgstr "??????????????????"
+
+msgid "No filter found"
+msgstr "????????????????????????"
+
+msgid "No frames to encode"
+msgstr "??????????????????????????????"
+
+msgid "No link"
+msgstr "????????????"
+
+msgid "No more glyphs"
+msgstr "???????????????????????????"
+
+msgid "No more supported."
+msgstr "???????????????"
+
+msgid "No strategy"
+msgstr "????????????"
+
+msgid "No stts table"
+msgstr "?????? stts ???"
+
+msgid "No subs"
+msgstr "?????? sub"
+
+msgid "No tag found"
+msgstr "????????????????????????"
+
+msgid "No video loaded"
+msgstr "?????????????????????"
+
+msgid "No write access to \"%s\"."
+msgstr "????????????????????????????????? \"%s\"???"
+
+msgid "Node not found"
+msgstr "??????????????????"
+
+msgid "Noise"
+msgstr "??????"
+
+msgid "Noise Reduction"
+msgstr "????????????"
+
+msgid "None"
+msgstr "???"
+
+msgid "None but compute"
+msgstr "????????????"
+
+msgid "Normal"
+msgstr "??????"
+
+msgid "Not Yet!"
+msgstr "????????????"
+
+msgid "Not a WAV file?"
+msgstr "???????????? WAV ?????????"
+
+msgid "Not activated."
+msgstr "???????????????"
+
+msgid "Not coded in this version"
+msgstr "????????????????????????"
+
+msgid "Not indexable"
+msgstr "??????????????????"
+
+msgid "Nothing to save"
+msgstr "??????????????????????????????"
+
+msgid "Number of B frames:"
+msgstr "B ???????????????:"
+
+msgid "Number of B-frames:"
+msgstr "B-???????????????:"
+
+msgid "Number of I frames:"
+msgstr "I ???????????????:"
+
+msgid "Number of P frames:"
+msgstr "P ???????????????:"
+
+msgid "OCR (TS->srt)"
+msgstr "OCR (TS ?????? srt)"
+
+msgid "OGM"
+msgstr "OGM"
+
+msgid "OSS"
+msgstr "OSS"
+
+msgid "Obsolete"
+msgstr "??????"
+
+msgid "Ogg Vorbis"
+msgstr "Ogg Vorbis"
+
+msgid "Ok"
+msgstr "??????"
+
+msgid "Old format project file"
+msgstr "??????????????????"
+
+msgid "Old format that Tracker3D can't read directly"
+msgstr "????????? Tracker3D ??????????????????"
+
+msgid "Only FLV1 and VP6 video are supported"
+msgstr "????????? FLV1 ??? VP6 ??????"
+
+msgid "Only QCIF and subQCIF are allowed for H.263"
+msgstr "H.263 ????????? QCIF ??? subQCIF"
+
+msgid "Only YV12/I420 or YUY2/I422 JPegs are supported"
+msgstr "????????? YV12/I420 ??? YUY2/I422 JPegs"
+
+msgid "Oops"
+msgstr "Oops"
+
+msgid "Open Avidemux"
+msgstr "?????? Avidemux"
+
+msgid "Open CQM file"
+msgstr "?????? CQM ??????"
+
+msgid "Open a file"
+msgstr "????????????"
+
+msgid "Open filter list [Ctrl-O]"
+msgstr "?????????????????? [Ctrl-O]"
+
+msgid "Opening MPEG"
+msgstr "?????? MPEG ???"
+
+msgid "Opening Nuppel video"
+msgstr "?????? Nuppel ??????"
+
+msgid "Opt"
+msgstr "??????"
+
+msgid ""
+"Optimise both motion vectors in B-frames. This will improve quality but take "
+"more time for encoding."
+msgstr ""
+"??? B-??????????????????????????????????????????????????????????????????????????????????????????????????????"
+
+msgid "Out"
+msgstr "???"
+
+msgid "Out of bounds"
+msgstr "????????????"
+
+msgid "Out of memory"
+msgstr "???????????????"
+
+msgid "Output"
+msgstr "??????"
+
+msgid "Output \"_Color\" for all masked pixels:"
+msgstr "????????????????????????????????? \"??????\" (_C):"
+
+msgid "Output SRT file"
+msgstr "?????? SRT ??????"
+
+msgid "Output _File:"
+msgstr "????????????(_F):"
+
+msgid "Output _Format:"
+msgstr "????????????(_F):"
+
+msgid "Output container format"
+msgstr "??????????????????"
+
+msgid "Output file error"
+msgstr "??????????????????"
+
+msgid "Output values:"
+msgstr "?????????:"
+
+msgid "Output values:   "
+msgstr "?????????:"
+
+msgid "Overflow control strength (%):"
+msgstr "?????????????????? (%):"
+
+msgid "P' = A"
+msgstr "P' = A"
+
+msgid "P' = A - P"
+msgstr "P' = A - P"
+
+msgid "P' = A / P"
+msgstr "P' = A / P"
+
+msgid "P' = P"
+msgstr "P' = P"
+
+msgid "P' = P * A"
+msgstr "P' = P * A"
+
+msgid "P' = P + A"
+msgstr "P' = P + A"
+
+msgid "P' = P - A"
+msgstr "P' = P - A"
+
+msgid "P' = P / A"
+msgstr "P' = P / A"
+
+msgid "P' = max (P, A)"
+msgstr "P' = max (P, A)"
+
+msgid "P' = min (P, A)"
+msgstr "P' = min (P, A)"
+
+msgid "P-frame quantizer - Min:"
+msgstr "P-frame ????????? - ??????:"
+
+msgid "PAL - 25 FPS"
+msgstr "PAL - 25 FPS"
+
+msgid "PAL 16:9"
+msgstr "PAL 16:9"
+
+msgid "PAL 4:3"
+msgstr "PAL 4:3"
+
+msgid "PAL field shift"
+msgstr "PAL ????????????"
+
+msgid "PAL smart"
+msgstr "PAL ?????????"
+
+msgid "PAL to Film"
+msgstr "PAL to Film"
+
+msgid "PAL/SECAM"
+msgstr "PAL/SECAM"
+
+msgid "PC->TV"
+msgstr "PC ?????? TV"
+
+msgid "PC->TV.Y"
+msgstr "PC ?????? TV.Y"
+
+msgid "PCM"
+msgstr "PCM"
+
+msgid "PSP"
+msgstr "PSP"
+
+msgid "PSP (_H.264)"
+msgstr "PSP (_H.264)"
+
+msgid "PSP 480*272"
+msgstr "PSP 480*272"
+
+msgid "PSP full res (720*480"
+msgstr "PSP ??????????????? (720*480"
+
+msgid "P_artial"
+msgstr "??????(_A)"
+
+msgid "P_review"
+msgstr "??????(_R)"
+
+msgid "P_revious Frame"
+msgstr "?????????(_R)"
+
+msgid "P_rocess chroma"
+msgstr "????????????(_R)"
+
+msgid "Packed Bitstream detected"
+msgstr "??????????????????????????????"
+
+msgid "Packed Bitstream:"
+msgstr "?????????????????????:"
+
+msgid "Packed bitstream"
+msgstr "?????????????????????"
+
+msgid "Pal Field Shift"
+msgstr "Pal ?????????"
+
+msgid "Pal/Secam"
+msgstr "Pal/Secam"
+
+msgid "Parameter Error"
+msgstr "????????????"
+
+msgid "Partial"
+msgstr "??????"
+
+msgid "Particle Analysis Configuration"
+msgstr "??????????????????"
+
+msgid "Particle List"
+msgstr "????????????"
+
+msgid "Partition Decision"
+msgstr "????????????"
+
+msgid "Partitions & Frames"
+msgstr "?????????????????????"
+
+msgid "Pass 1/2"
+msgstr "Pass 1/2"
+
+msgid "Pass 2"
+msgstr "Pass 2"
+
+msgid "Pass 2/2"
+msgstr "Pass 2/2"
+
+msgid "Pass one"
+msgstr "Pass 1"
+
+msgid "Pause / Abort"
+msgstr "?????? / ??????"
+
+msgid "Paused"
+msgstr "??????"
+
+msgid "Permission error"
+msgstr "??????????????????"
+
+msgid "Phods"
+msgstr "Phods"
+
+msgid "Picture resizer ported from Avisynth."
+msgstr "???????????????????????? Avisynth ?????????"
+
+msgid "Pipe to"
+msgstr "?????????"
+
+msgid "Pixel Aspect Ratio"
+msgstr "??????????????????"
+
+msgid "Pixel Height"
+msgstr "?????????"
+
+msgid "Pixel Width"
+msgstr "?????????"
+
+msgid "Play"
+msgstr "??????"
+
+msgid "Play video backward."
+msgstr "?????????????????????"
+
+msgid "Please Select a valid TS file."
+msgstr "???????????????????????? TS ??????"
+
+msgid "Please Select a valid output SRT file."
+msgstr "??????????????????????????? SRT ??????"
+
+msgid "Please check markers. Is \"A>\" == \">B\"?"
+msgstr "?????????????????? ??? \"A>\" == \">B\"?"
+
+msgid "Please select a correct VobSub path/dir"
+msgstr "???????????????????????? VobSub ??????/?????????"
+
+msgid "Port of Transcode DNR."
+msgstr "??? DNR ???????????????"
+
+msgid "Positive values will soften the video, negative values will sharpen"
+msgstr "??????????????????????????????????????????????????????"
+
+msgid "Postp_rocessing threshold:"
+msgstr "?????????????????????:"
+
+msgid "Postproc and show zones (debug)"
+msgstr "??????????????????????????? (??????)"
+
+msgid "Postproc on best match"
+msgstr "???????????????????????????"
+
+msgid "PowerPC"
+msgstr "PowerPC"
+
+msgid "Pr_evious Intra Frame"
+msgstr "??????????????????(_E)"
+
+msgid "Pre_ferences"
+msgstr "?????????(_F)"
+
+msgid "Predefined Aspect Ratio"
+msgstr "????????????????????????"
+
+msgid "Preferences"
+msgstr "?????????"
+
+msgid "Prev. Empty"
+msgstr "??????????????????"
+
+msgid "Preview"
+msgstr "??????"
+
+msgid "Previou_s Black Frame"
+msgstr "???????????????(_S)"
+
+msgid "Previous black frame"
+msgstr "???????????????"
+
+msgid "Previous frame"
+msgstr "?????????"
+
+msgid "Previous keyframe"
+msgstr "??????????????????"
+
+msgid "Print frame number directly in image"
+msgstr "?????????????????????????????????"
+
+msgid "Prioritisation"
+msgstr "??????"
+
+msgid "Priority:"
+msgstr "?????????:"
+
+msgid "Privileges Required"
+msgstr "??????????????????"
+
+msgid "Pro Logic"
+msgstr "????????????"
+
+msgid "Pro Logic II"
+msgstr "?????????????????????"
+
+msgid "Problem loading sub"
+msgstr "?????? sub ???????????????"
+
+msgid "Problem opening the mpeg files"
+msgstr "?????? mpeg ?????????????????????"
+
+msgid "Problem reading SVQ3 headers"
+msgstr "?????? SVQ3 ????????????????????????"
+
+msgid "Problem reading XML filters"
+msgstr "?????? XML ?????????????????????"
+
+msgid "Process image (not fields)"
+msgstr "???????????? (?????????)"
+
+msgid "Process image (not fields), debug"
+msgstr "???????????? (?????????)?????????"
+
+msgid "Process luma plane"
+msgstr "??????????????????"
+
+msgid "Processing"
+msgstr "?????????"
+
+msgid "Produces nicer-looking B-frames"
+msgstr "???????????????????????? B-??????"
+
+msgid "Progressive"
+msgstr "??????"
+
+msgid "Proper_ties"
+msgstr "??????(_T)"
+
+msgid "Properties"
+msgstr "??????"
+
+msgid "Pulldown"
+msgstr "Pulldown"
+
+msgid "Pulldown dupe removal"
+msgstr "?????? Pulldown ??????"
+
+msgid "Pulse Audio"
+msgstr "Pulse Audio"
+
+msgid "Put botj fields side by side."
+msgstr "??? botj ?????????????????????"
+
+msgid "Put two fields on top of one another."
+msgstr "????????????????????????????????????"
+
+msgid "QDM2"
+msgstr "QDM2"
+
+msgid "Quality based"
+msgstr "????????????"
+
+msgid "Quantization"
+msgstr "????????????"
+
+msgid "Quantization difference between chroma (color) and luma (brightness)"
+msgstr "????????? (??????) ??? ?????? (??????)???????????????????????????"
+
+msgid "Quantization factors used between I and P-frames"
+msgstr "I-????????? P-?????? ??????????????????????????????"
+
+msgid "Quantization type:"
+msgstr "??????????????????:"
+
+msgid "Quantization used between P and B-frames"
+msgstr "P-????????? B-??????????????????????????????"
+
+msgid "Quantizer"
+msgstr "?????????"
+
+msgid "Quantizer Compression"
+msgstr "???????????????"
+
+msgid "Quantizer _blur:"
+msgstr "???????????????(_B):"
+
+msgid "Quantizer restrictions"
+msgstr "???????????????"
+
+msgid "Quantizer:"
+msgstr "?????????:"
+
+msgid "Quarter Pixel:"
+msgstr "??????????????????:"
+
+msgid "R_esampling (Hz):"
+msgstr "?????? (Hz):"
+
+msgid "Range"
+msgstr "??????"
+
+msgid "Rate Control"
+msgstr "????????????"
+
+msgid "Rate distortion"
+msgstr "???????????????"
+
+msgid "Rate distortion quantization, will find optimal encoding for each block"
+msgstr "????????????????????????????????????????????????????????????????????????"
+
+msgid "Ready"
+msgstr "??????"
+
+msgid "Rebuild all Keyframes?"
+msgstr "?????????????????????????????????"
+
+msgid "Rebuilding Frames"
+msgstr "??????????????????"
+
+msgid "Rec.709"
+msgstr "Rec.709"
+
+msgid "Recent files"
+msgstr "???????????????"
+
+msgid "Reduce noise, smooth image, increase compressibility."
+msgstr "????????????????????????????????????????????????"
+
+msgid "Reduced fluctuations in Quantizer (before curve compression)"
+msgstr "????????????????????? (?????????????????????)"
+
+msgid ""
+"Reduction of bitrate for the first consecutive I-frames. The last I-frame "
+"will get treated normally"
+msgstr "?????????????????? I-????????????????????????????????? I-????????????????????????"
+
+msgid "Remove IVTC that has been analog captured or resized."
+msgstr "?????? IVTC ?????????????????????????????????"
+
+msgid "Remove blend between previous and next picture."
+msgstr "?????????????????????????????????"
+
+msgid "Remove filter"
+msgstr "????????????"
+
+msgid "Remove lines from top/bottom/left/right."
+msgstr "?????????/??????/??????/??????????????????"
+
+msgid "Replace (interpolate)"
+msgstr "?????? (??????)"
+
+msgid "Requant"
+msgstr "????????????"
+
+msgid "Requant Configuration"
+msgstr "??????????????????"
+
+msgid "Resample fps"
+msgstr "???????????? fps"
+
+msgid "Resampling frequency (Hz)"
+msgstr "???????????? (Hz)"
+
+msgid "Resize"
+msgstr "????????????"
+
+msgid ""
+"Result _Multiplier (each result pixel\n"
+"multiplied by this):"
+msgstr ""
+"????????? (????????????\n"
+"??????????????????????????????????????????)(_M):"
+
+msgid "Resume"
+msgstr "??????"
+
+msgid "Retry"
+msgstr "??????"
+
+msgid "Reuse log file ?"
+msgstr "???????????????????????????"
+
+msgid "Reverse"
+msgstr "??????"
+
+msgid "Root privileges are required to perform this operation."
+msgstr "?????? Root ???????????????????????????"
+
+msgid "Rotate"
+msgstr "??????"
+
+msgid "Rotate the picture by 90, 180 or 270 degrees."
+msgstr "???????????? 90???180 ??? 270 ??????"
+
+msgid "Run Job"
+msgstr "????????????"
+
+msgid "Run all jobs"
+msgstr "??????????????????"
+
+msgid "Running"
+msgstr "?????????"
+
+msgid "SDL"
+msgstr "SDL"
+
+msgid "SDL (DirectX)"
+msgstr "SDL (DirectX)"
+
+msgid "SDL (GDI)"
+msgstr "SDL (GDI)"
+
+msgid "SDL (good)"
+msgstr "SDL (???)"
+
+msgid "SIMD"
+msgstr "SIMD"
+
+msgid "SVCD"
+msgstr "SVCD"
+
+msgid "SVCD (lavc)"
+msgstr "SVCD (lavc)"
+
+msgid "SVCD (mpeg2enc)"
+msgstr "SVCD (mpeg2enc)"
+
+msgid "SVCD 112 kB"
+msgstr "SVCD 112 kB"
+
+msgid "SVCD Res"
+msgstr "SVCD ?????????"
+
+msgid "SVCD res"
+msgstr "SVCD ?????????"
+
+msgid "SVCD resolution [Ctrl-3]"
+msgstr "SVCD ????????? [Ctrl-3]"
+
+msgid "S_ave..."
+msgstr "??????...(_A)"
+
+msgid "S_elect C_olor"
+msgstr "????????????"
+
+msgid "S_kip all"
+msgstr "????????????"
+
+msgid "S_patial chroma strength:"
+msgstr "?????????????????????(_P):"
+
+msgid "Same Quantizer as Input"
+msgstr "???????????????????????????"
+
+msgid "Save (A+V) will generate bad AVI. Save audio will work."
+msgstr "?????? (A+V) ?????????????????? AVI??????????????????????????????"
+
+msgid "Save Glyph"
+msgstr "??????????????????"
+
+msgid "Save GlyphSet"
+msgstr "????????????????????????"
+
+msgid "Save GlyphSet file"
+msgstr "??????????????????????????????"
+
+msgid "Save Job"
+msgstr "????????????"
+
+msgid "Save P_roject As..."
+msgstr "???????????????...(_R)"
+
+msgid "Save SRT file"
+msgstr "?????? SRT ??????"
+
+msgid "Save Script"
+msgstr "????????????"
+
+msgid "Save _BMP Image..."
+msgstr "?????????BMP ??????...(_B)"
+
+msgid "Save _JPEG Image..."
+msgstr "?????????JPEG ??????...(_J)"
+
+msgid "Save _Project"
+msgstr "????????????(_P)"
+
+msgid "Save _Selection as JPEG Images..."
+msgstr "????????????????????????JPEG ??????...(_S)"
+
+msgid "Save _Video..."
+msgstr "????????????...(_V)"
+
+msgid "Save as script"
+msgstr "???????????????"
+
+msgid "Save as script [Ctrl-J]"
+msgstr "??????????????? [Ctrl-J]"
+
+msgid "Save filter list [Ctrl-S]"
+msgstr "?????????????????? [Ctrl-S]"
+
+msgid "Save set of filters"
+msgstr "?????????????????????"
+
+msgid "Save the file"
+msgstr "????????????"
+
+msgid "Saved \"%s\"."
+msgstr "????????? \"%s\"."
+
+msgid "Saved %d images."
+msgstr "????????? %d ??????"
+
+msgid "Saving"
+msgstr "?????????"
+
+msgid "Saving %s as a BMP file failed."
+msgstr "?????? %s ??? BMP ???????????????"
+
+msgid "Saving as set of jpegs"
+msgstr "??????????????? jpeg ??????"
+
+msgid "Saving audio"
+msgstr "???????????????"
+
+msgid "Saving failed"
+msgstr "????????????"
+
+msgid "Saving raw video stream"
+msgstr "??????????????????????????????"
+
+msgid "Saving the job failed. Maybe you have permission issue with ~/.avidemux"
+msgstr "??????????????????????????????????????????????????? ~/.avidemux"
+
+msgid "Saving..."
+msgstr "??????..."
+
+msgid "Scanning OGM"
+msgstr "???????????? OGM"
+
+msgid "Scene Cut Threshold"
+msgstr "?????????????????????"
+
+msgid "Search string"
+msgstr "????????????"
+
+msgid "Second Audio Track"
+msgstr "????????????"
+
+msgid "Second Pass"
+msgstr "???????????????"
+
+msgid "Second track loaded"
+msgstr "???????????????"
+
+msgid "Seeking"
+msgstr "?????????"
+
+msgid "Select .idx"
+msgstr "?????? .idx"
+
+msgid "Select .idx file"
+msgstr "?????? .idx ??????"
+
+msgid "Select 1-pass or 2-pass encoding"
+msgstr "?????? 1-pass ??? 2-pass ??????"
+
+msgid "Select AC3 to Load"
+msgstr "?????? AC3 ????????????"
+
+msgid "Select AVI File to Append..."
+msgstr "?????? AVI ??????????????????..."
+
+msgid "Select AVI File to Write"
+msgstr "?????? AVI ??????????????????"
+
+msgid "Select AVI File..."
+msgstr "?????? AVI ??????..."
+
+msgid "Select BMP to Save"
+msgstr "?????? BMP ????????????"
+
+msgid "Select Color"
+msgstr "????????????"
+
+msgid "Select Copy as the video codec."
+msgstr "?????? ???????????? ???????????????????????????"
+
+msgid "Select Custom Matrix File to write"
+msgstr "???????????????????????????????????????"
+
+msgid "Select DVD as the video codec for MPEG TS output."
+msgstr "?????? DVD ????????????????????????????????? MPEG TS"
+
+msgid "Select ECMAScript to Run"
+msgstr "?????? ECMAScript ?????????"
+
+msgid "Select File to Save"
+msgstr "????????????????????????"
+
+msgid "Select File to Save Audio"
+msgstr "??????????????????????????????"
+
+msgid "Select GlyphFile to edit"
+msgstr "????????????????????????????????????"
+
+msgid "Select GlyphSet file"
+msgstr "??????????????????????????????"
+
+msgid "Select IFO file"
+msgstr "?????? IFO ??????:"
+
+msgid "Select JPEG Sequence to Save"
+msgstr "?????? JPEG ??????????????????"
+
+msgid "Select JPEG file"
+msgstr "?????? JPEG ??????"
+
+msgid "Select JPEG to Save"
+msgstr "?????? JPG ????????????"
+
+msgid "Select Language :"
+msgstr "???????????? :"
+
+msgid "Select MP3 to Load"
+msgstr "?????? MP3 ????????????"
+
+msgid "Select MPEG as the output."
+msgstr "?????? MPEG"
+
+msgid "Select OGM File to Write"
+msgstr "?????? OGM ??????????????????"
+
+msgid "Select Raw File to Save"
+msgstr "?????? RAW ??????????????????"
+
+msgid "Select Sub"
+msgstr "?????? Sub"
+
+msgid "Select Subtitle file"
+msgstr "??????????????????"
+
+msgid "Select TS file"
+msgstr "?????? TS ??????"
+
+msgid "Select TTF file"
+msgstr "?????? TTF ??????"
+
+msgid "Select VOB file(s)"
+msgstr "?????? VOB ??????"
+
+msgid "Select Video To Write"
+msgstr "?????????????????????"
+
+msgid "Select VobSub file"
+msgstr "?????? VobSub ??????"
+
+msgid ""
+"Select WAV PCM as the audio codec, otherwise the audio file would be raw PCM."
+msgstr "?????? WAV PCM ??????????????????????????????????????????????????????????????? PCM???"
+
+msgid "Select WAV to Load"
+msgstr "?????? WAV ????????????"
+
+msgid "Select Workbench to Save"
+msgstr "???????????????????????????"
+
+msgid "Select Xvid matrix file to load"
+msgstr "?????? Xvid ????????????????????????"
+
+msgid "Select _Operation on each pixel P and input A:"
+msgstr "????????????????????? P ?????????????????? A(_O):"
+
+msgid "Select a directory"
+msgstr "???????????????"
+
+msgid "Select a second audio track in the Audio menu."
+msgstr "??????????????????????????????????????????"
+
+msgid "Select background image"
+msgstr "??????????????????"
+
+msgid "Select data file"
+msgstr "??????????????????"
+
+msgid "Select dual audio AVI to write"
+msgstr "?????????????????? AVI ????????????"
+
+msgid "Select file"
+msgstr "????????????"
+
+msgid "Select filter directory"
+msgstr "?????????????????????"
+
+msgid "Select idx file:"
+msgstr "?????? idx ??????:"
+
+msgid "Select input and ouput files"
+msgstr "??????????????????????????????"
+
+msgid "Select output file"
+msgstr "??????????????????"
+
+msgid "Select postprocessing level"
+msgstr "????????????????????????"
+
+msgid "Selection: end"
+msgstr "????????????:??????"
+
+msgid "Selection: start"
+msgstr "????????????:??????"
+
+msgid "Sensibility"
+msgstr "?????????"
+
+msgid "Separate"
+msgstr "????????????"
+
+msgid "Separate fields"
+msgstr "????????????"
+
+msgid "Set Marker _A"
+msgstr "???????????? _A"
+
+msgid "Set Marker _B"
+msgstr "???????????? _B"
+
+msgid "Set Size and _Position"
+msgstr "?????????????????????(_P)"
+
+msgid "Set a common predefined aspect ratio"
+msgstr "????????????????????????????????????????????????"
+
+msgid ""
+"Set a custom aspect ratio. The default 1:1 is recommended for most video."
+msgstr "?????????????????????????????????????????????????????????????????????1:1???"
+
+msgid ""
+"Set how many previous frames can be referenced by a P/B-frame. Numbers above "
+"5 do not seem to improve quality greatly. Numbers 3 to 5 are recommended."
+msgstr ""
+"??????????????????????????????????????? P/B-??????????????????????????? 5 ?????????????????????????????????"
+"?????????????????? 3 ??? 5???"
+
+msgid "Set how much \"bitrate bonus\" a keyframe can get"
+msgstr "??????????????????????????????????????? \"??????????????????\""
+
+msgid ""
+"Set how much bitrate is deducted from a B-frame as compared to the previous "
+"P-frame"
+msgstr "???????????????????????????????????? B-??????????????????????????? P-??????"
+
+msgid ""
+"Set maximum frame interval between IDR frames. Defines the maximum amount a "
+"frame can be reused and referenced by other frames before a new IDR frame is "
+"established."
+msgstr ""
+"????????? IDR ???????????????????????????????????????????????????????????????????????????????????????????????????"
+"????????????????????????????????????????????????"
+
+msgid ""
+"Set minimum frame interval between IDR frames. Defines the minimum amount a "
+"frame can be reused and referenced by other frames before a new IDR frame is "
+"established."
+msgstr ""
+"????????? IDR ???????????????????????????????????????????????????????????????????????????????????????????????????"
+"????????????????????????????????????????????????"
+
+msgid "Set the amount of noise reduction"
+msgstr "????????????????????????"
+
+msgid ""
+"Set the maximum number of consecutive B-frames. This defines how many "
+"duplicate frames can be dropped. Numbers 2 to 5 are recommended. This "
+"greatly improves the use of bitrate and quality."
+msgstr ""
+"???????????? B-?????????????????????????????????????????????????????????????????????????????????????????? 2 ??? "
+"5???????????????????????????????????????????????????"
+
+msgid "Set your markers correctly."
+msgstr "???????????????????????????"
+
+msgid "Sharpen"
+msgstr "?????????"
+
+msgid "Sharpen edges without amplifying noise. By Donald Graft."
+msgstr "???????????????????????????????????????????????? Donald Graft???"
+
+msgid "Sharpen/Blur"
+msgstr "??????/??????"
+
+msgid "Sharpness"
+msgstr "?????????"
+
+msgid "Shift (ms) :"
+msgstr "?????? (ms) :"
+
+msgid "Shift chroma U/V to fix badly synced luma/chroma."
+msgstr "???????????? U/V ????????????????????????/???????????????"
+
+msgid "Shift fields by one. Useful for some PAL movies."
+msgstr "???????????????????????????????????????????????? PAL ?????????"
+
+msgid "Shift:"
+msgstr "??????:"
+
+msgid "Sho_w info"
+msgstr "????????????(_W)"
+
+msgid "Show _Joblist"
+msgstr "??????????????????(_J)"
+
+msgid "Show _frame"
+msgstr "????????????(_F)"
+
+msgid "Show _mask"
+msgstr "????????????(_m)"
+
+msgid "Show interlaced areas (for test!)"
+msgstr "?????????????????????(????????????)"
+
+msgid "Show metric in image (debug)"
+msgstr "?????????????????? (??????)"
+
+msgid "Show motion _vectors"
+msgstr "??????????????????(_V)"
+
+msgid "Shut down computer when finished"
+msgstr "?????????????????????"
+
+msgid "Shutting down"
+msgstr "?????????"
+
+msgid "Side"
+msgstr "????????????"
+
+msgid "Single Pass - Bitrate"
+msgstr "???????????? - ?????????"
+
+msgid "Single Pass - Bitrate (Average)"
+msgstr "???????????? - ?????????(?????????)"
+
+msgid "Single Pass - Quality Quantizer (Average)"
+msgstr "???????????? - ?????????????????? (?????????)"
+
+msgid "Single Pass - Quality Quantizer (Constant)"
+msgstr "???????????? - ?????????????????? (?????????)"
+
+msgid "Single Pass - Quantizer"
+msgstr "???????????? - ?????????"
+
+msgid "Single pass - Average quantizer"
+msgstr "???????????? - ???????????????"
+
+msgid "Single pass - bitrate"
+msgstr "???????????? - ?????????"
+
+msgid "Single pass - constant quality"
+msgstr "???????????? - ????????????"
+
+msgid "Single pass - same qz as input"
+msgstr "???????????? - ????????????????????????"
+
+msgid "Size (MBytes):"
+msgstr "?????? (MBytes):"
+
+msgid "Size is not (s)QCIF"
+msgstr "???????????? (s)QCIF"
+
+msgid "Size mismatch"
+msgstr "???????????????"
+
+msgid "Skip Glyph"
+msgstr "??????????????????"
+
+msgid "Skip spatial temporal check"
+msgstr "????????????????????????"
+
+msgid "Skip the current letter/glyph"
+msgstr "???????????? ??????/????????????"
+
+msgid "Skip the whole image"
+msgstr "??????????????????"
+
+msgid "Slovene"
+msgstr "???????????????"
+
+msgid "Slow (full luma and chroma)"
+msgstr "??? (????????????????????????)"
+
+msgid "Slow iterative motion search"
+msgstr "????????????????????????"
+
+msgid "Smaller means more deinterlacing"
+msgstr "??????????????????????????????"
+
+msgid "Smart Copy"
+msgstr "???????????????"
+
+msgid "Smart swap fields"
+msgstr "?????????????????????"
+
+msgid "Smartly revert non constant PAL field shift."
+msgstr "???????????????????????? PAL ???????????????"
+
+msgid "Smartly swap fields. Needed when field order changes."
+msgstr "???????????????????????????????????????????????????"
+
+msgid "Smooth the image, don't blur edges. Useful on anime."
+msgstr "??????????????????????????????????????????????????????"
+
+msgid "Snow (lavc)"
+msgstr "Snow (lavc)"
+
+msgid "Soften"
+msgstr "Soften"
+
+msgid "Something bad happened"
+msgstr "?????????????????????????????????"
+
+msgid "Something bad happened (II)"
+msgstr "????????????????????????????????? (II)"
+
+msgid "Something bad happened (II))"
+msgstr "????????????????????????????????? (II))"
+
+msgid "Something failed when appending"
+msgstr "??????????????????????????????"
+
+msgid "Something very wrong happened when building joblist."
+msgstr "?????????????????????????????????????????????"
+
+msgid "Source :"
+msgstr "?????? :"
+
+msgid "Spatial"
+msgstr "????????????"
+
+msgid "Spatio-temporal cleaner by Ross Thomas."
+msgstr "???????????????????????? Ross Thomas???"
+
+msgid "Split the picture into tiny thumbnails."
+msgstr "??????????????????????????????????????????"
+
+msgid "Stabilize"
+msgstr "??????"
+
+msgid "Stabilize Threshold"
+msgstr "???????????????"
+
+msgid "Stack fields"
+msgstr "????????????"
+
+msgid "Standard FrameRate:"
+msgstr "???????????????:"
+
+msgid "Start frame for partial :"
+msgstr "?????????????????????:"
+
+msgid "Start must be before end, and both within video # of frames."
+msgstr "????????????????????????????????????????????????????????? # ?????????"
+
+msgid "Started at"
+msgstr "?????????"
+
+msgid "Stereo"
+msgstr "??????"
+
+msgid "Stereo front+stereo rear"
+msgstr "????????????+????????????"
+
+msgid "Stereo+center"
+msgstr "??????+??????"
+
+msgid "Stereo+center+surround"
+msgstr "??????+??????+??????"
+
+msgid "Stereo+surround"
+msgstr "??????+??????"
+
+msgid "Stop"
+msgstr "??????"
+
+msgid "Strength"
+msgstr "??????"
+
+msgid "Strength :"
+msgstr "??????:"
+
+msgid "String"
+msgstr "??????"
+
+msgid "Subtitle PID:"
+msgstr "?????? PID:"
+
+msgid "Subtitle Size and Position"
+msgstr "?????????????????????"
+
+msgid "Subtitler"
+msgstr "?????????"
+
+msgid "Subtitles"
+msgstr "??????"
+
+msgid "Succeeded"
+msgstr "??????"
+
+msgid "Sure ?"
+msgstr "?????????"
+
+msgid "Sure you want to abort ?"
+msgstr "??????????????????"
+
+msgid "Sure!"
+msgstr "?????????"
+
+msgid "Swap U and V"
+msgstr "?????? U ??? V"
+
+msgid "Swap fields"
+msgstr "????????????"
+
+msgid "Swap top and bottom fields."
+msgstr "?????????????????????????????????"
+
+msgid "Swiss Army Knife"
+msgstr "????????????"
+
+msgid "Swiss Army Knife Configuration"
+msgstr "??????????????????"
+
+msgid "Switch audio codec to Copy."
+msgstr "??????????????????????????? ????????????"
+
+msgid "TDeint"
+msgstr "TDeint"
+
+msgid "TMPGEnc"
+msgstr "TMPGEnc"
+
+msgid "TV->PC"
+msgstr "TV ?????? PC"
+
+msgid "T_hreshold 2:"
+msgstr "????????? 2:"
+
+msgid "T_woway"
+msgstr "??????(_W)"
+
+msgid "Take audio from external AC3 file"
+msgstr "???????????? AC3 ??????????????????"
+
+msgid "Take audio from external MP3 file"
+msgstr "???????????? MP3 ??????????????????"
+
+msgid "Take audio from external WAV file"
+msgstr "???????????? WAV ??????????????????"
+
+msgid "Take audio from video file"
+msgstr "?????????????????????"
+
+msgid "Take second track ?"
+msgstr "?????????????????????"
+
+msgid "Target Size"
+msgstr "????????????"
+
+msgid "Target bitrate (kb/s):"
+msgstr "?????????????????? (kb/s):"
+
+msgid "Target bitrate or file size"
+msgstr "?????????????????????????????????"
+
+msgid "Target video bitrate"
+msgstr "?????????????????????"
+
+msgid "Target video size (MB):"
+msgstr "?????????????????? (MBytes):"
+
+msgid "Temp. Blur of Est. Frame Complexity"
+msgstr "???????????????????????????????????????????????????"
+
+msgid "Temp. Blur of Quant. after CC"
+msgstr "??????????????????????????????????????????????????????"
+
+msgid "Temporal"
+msgstr "?????????"
+
+msgid "Temporal & spatial check"
+msgstr "?????????????????????"
+
+msgid "Temporal Cleaner"
+msgstr "???????????????"
+
+msgid "Test uinteger"
+msgstr "???????????????"
+
+msgid ""
+"The audio stream may be invalid for this container.\n"
+"\n"
+"Continue anyway?"
+msgstr ""
+"?????????????????????????????????????????????\n"
+"\n"
+"??????????????????????????????"
+
+msgid ""
+"The beginning frame is not a key frame.\n"
+"Please move the A marker."
+msgstr ""
+"??????????????????????????????????????????\n"
+"??????????????? A ???"
+
+msgid "The custom matrix file has been successfully loaded."
+msgstr "????????????????????????????????????"
+
+msgid ""
+"The file you just loaded contains several audio tracks.\n"
+"Go to Audio->MainTrack to select the active one."
+msgstr ""
+"????????????????????????????????????????????????\n"
+"?????? ??????->???????????? ???????????????????????????"
+
+msgid "The filter is already partial"
+msgstr "??????????????????????????????"
+
+msgid "The first frame is not intra frame"
+msgstr "?????????????????????????????????"
+
+msgid ""
+"The higher this value, the more bits get assigned to frames below the "
+"average frame size"
+msgstr "??????????????????????????????????????????????????????????????????????????????"
+
+msgid ""
+"The higher this value, the more bits get taken from frames larger than the "
+"average size, and redistributed to others"
+msgstr "????????????????????????????????????????????????????????????????????????????????????????????????"
+
+msgid "The idx/sub file does not exist."
+msgstr "idx/sub ???????????????"
+
+msgid "The idx/sub file does not set."
+msgstr "??? idx/sub ??????????????????"
+
+msgid ""
+"The number of channels is greater than what the selected audio codec can "
+"do.\n"
+"Either change codec or use the mixer filter to have less channels."
+msgstr ""
+"??????????????????????????????????????????????????????????????????\n"
+"????????????????????????????????????????????????????????????????????????"
+
+msgid "The selected audio file does not exist."
+msgstr "??????????????????????????????"
+
+msgid "The selected vobfile does not exist"
+msgstr "????????? vob ???????????????"
+
+msgid "The unpacking succeedeed but the index is still not up to date."
+msgstr "????????????????????????????????????????????????"
+
+msgid "There are no jobs stored"
+msgstr "????????????????????????"
+
+msgid "There is no audio track"
+msgstr "????????????"
+
+msgid "There is no second track"
+msgstr "??????????????????"
+
+msgid "There is several mpeg file, append them ?"
+msgstr "????????? mpeg ???????????????????????????"
+
+msgid "This a VOP packed AVI."
+msgstr "??????????????? VOP ??? AVI"
+
+msgid "This cannot have packed VOP"
+msgstr "????????????????????? VOP"
+
+msgid "This glyph will be ignored from now on"
+msgstr "?????????????????????????????????????????????"
+
+msgid "This is not MPEG compatible"
+msgstr "???????????? MPEG"
+
+msgid ""
+"This is to be used to undo packed VOP on MPEG-4.\n"
+"Continue ?"
+msgstr ""
+"??? MPEG-4 ?????????????????????????????? VOP .\n"
+"??????????"
+
+msgid ""
+"This looks like mpeg\n"
+" Do you want to index it?"
+msgstr ""
+"??????????????? mpeg\n"
+" ????????????????"
+
+msgid "This will make trouble for AVI files."
+msgstr "???????????? AVI ?????????????????????"
+
+msgid "Threading"
+msgstr "?????????"
+
+msgid "Threshold"
+msgstr "?????????"
+
+msgid "Threshold :"
+msgstr "?????????:"
+
+msgid "Threshold Configuration"
+msgstr "???????????????"
+
+msgid ""
+"Threshold for block detection. Positive values will detect more blocks, "
+"negative values will detect less."
+msgstr "?????????????????????????????????????????????????????????????????????????????????"
+
+msgid "Time left :"
+msgstr "???????????????:"
+
+msgid "Time shift value (ms)"
+msgstr "??????????????? (ms)"
+
+msgid "Time: "
+msgstr "??????:"
+
+msgid "TimeCode:"
+msgstr "?????????:"
+
+msgid "Timecode :"
+msgstr "?????????:"
+
+msgid "Timecode:"
+msgstr "?????????:"
+
+msgid "Toggle"
+msgstr "??????"
+
+msgid "Top"
+msgstr "????????????"
+
+msgid "Top field (keep bottom)"
+msgstr "????????????(????????????)"
+
+msgid "Top field first"
+msgstr "??????????????????"
+
+msgid "Total Duration:"
+msgstr "???????????????:"
+
+msgid "Total size"
+msgstr "?????????"
+
+msgid "Total size (MB):"
+msgstr "????????? (MB):"
+
+msgid "Total size (custom)"
+msgstr "?????????(??????)"
+
+msgid "Track _1:"
+msgstr "?????? _1:"
+
+msgid "Track _2: "
+msgstr "?????? _2: "
+
+msgid "Transform"
+msgstr "??????"
+
+msgid "Transformation"
+msgstr "??????"
+
+msgid "Trellis"
+msgstr "??????"
+
+msgid "Trouble initializing audio device"
+msgstr "?????????????????????????????????"
+
+msgid "Troubles ahead"
+msgstr "????????????"
+
+msgid "Try 'File' -> 'Load/Run Project...'"
+msgstr "?????? '??????' -> '??????/?????? ??????...'"
+
+msgid "Try _weave"
+msgstr "????????????(_W)"
+
+msgid "Turbo Mode"
+msgstr "??????????????????"
+
+msgid "Turkish"
+msgstr "?????????"
+
+msgid "Two Pass - Average Bitrate"
+msgstr "???????????? - ???????????????"
+
+msgid "Two Pass - Video Size"
+msgstr "???????????? - ????????????"
+
+msgid "Two pass - average bitrate"
+msgstr "???????????? - ???????????????"
+
+msgid "Two pass - video size"
+msgstr "???????????? - ????????????"
+
+msgid "Two pass tuning"
+msgstr "??????????????????"
+
+msgid "U Shift :"
+msgstr "U ??????:"
+
+msgid "ULAW"
+msgstr "ULAW"
+
+msgid "UTF-16"
+msgstr "UTF-16"
+
+msgid "UTF-8"
+msgstr "UTF-8"
+
+msgid "UV to Y"
+msgstr "UV to Y"
+
+msgid "Uinteger"
+msgstr "?????????????????????"
+
+msgid "Un-Erase"
+msgstr "???????????????"
+
+msgid "Uneven Multi-hexagon"
+msgstr "????????????????????????"
+
+msgid "Unknown"
+msgstr "??????"
+
+msgid "Unknown codec"
+msgstr "?????????????????????"
+
+msgid "Unknown event"
+msgstr "???????????????"
+
+msgid "Unknown flag :"
+msgstr "???????????????:"
+
+msgid "Unknown source type"
+msgstr "?????????????????????"
+
+msgid "Unpacking bitstream"
+msgstr "???????????????????????????"
+
+msgid "Unstack fields"
+msgstr "???????????????"
+
+msgid "Unsupported"
+msgstr "????????????"
+
+msgid "Unsupported audio"
+msgstr "??????????????????"
+
+msgid "Unsupported video"
+msgstr "??????????????????"
+
+msgid "Use 4 motion vectors per macroblock, might give better compression"
+msgstr "????????????????????????4?????????????????????????????????????????????"
+
+msgid "Use GlyphSet (optional):"
+msgstr "???????????????????????? (?????????):"
+
+msgid "Use Quarter pixel resolution for a more precise motion estimation"
+msgstr "??????????????????????????????????????????????????????????????????"
+
+msgid ""
+"Use Trellis Rate Distortion Optimisation to find optimal encoding for each "
+"block. Level 0 equals disabled, level 1 equals normal and level 2 equals "
+"high."
+msgstr ""
+"???????????????????????????????????????????????????????????????????????????????????? 0 ????????????????????? 1 "
+"????????????????????? 2 ????????????"
+
+msgid "Use _Global GlyphSet"
+msgstr "?????????????????????????????????(_G)"
+
+msgid "Use also chroma to detect scene change"
+msgstr "????????????????????????????????????"
+
+msgid "Use as Reference"
+msgstr "???????????????"
+
+msgid "Use ch_roma to evalute"
+msgstr "?????????????????????(_R)"
+
+msgid "Use chroma information to estimate motion"
+msgstr "?????????????????????????????????"
+
+msgid "Use color information for detecting motion to improve quality"
+msgstr "????????????????????????????????????????????????"
+
+msgid "Use custom value"
+msgstr "???????????????"
+
+msgid ""
+"Use fewer B-frames if needed. This is always recommended. If not enabled, "
+"the codec will always use the maximum number of consecutive B-frames."
+msgstr ""
+"??????????????????????????? B-????????????????????????????????????????????????????????????????????????????????????"
+"??? B-?????????????????????"
+
+msgid "Use glyphset (optional):"
+msgstr "???????????????????????? (?????????):"
+
+msgid "Use safe mode"
+msgstr "??????????????????"
+
+msgid "Use the &lt;&lt; and the &gt;&gt; buttons to move using Intra frames."
+msgstr "?????? &lt;&lt; ??? &gt;&gt; ?????????????????????????????????????????????"
+
+msgid "Useful to remove dupes left by Telecide."
+msgstr "???????????????????????????????????????"
+
+msgid "Useless whirlwind effect."
+msgstr "????????????????????????"
+
+msgid "User Interface"
+msgstr "???????????????"
+
+msgid "Using backup decoder - not frame accurate."
+msgstr "????????????????????? - ??????????????????"
+
+msgid "V Shift :"
+msgstr "V ??????:"
+
+msgid "VBR"
+msgstr "VBR"
+
+msgid "VBV Buffer Size"
+msgstr "VBV ????????????"
+
+msgid "VCD"
+msgstr "VCD"
+
+msgid "VCD (lavc)"
+msgstr "VCD (lavc)"
+
+msgid "VCD (mpeg2enc)"
+msgstr "VCD (mpeg2enc)"
+
+msgid "VCD 40 kB"
+msgstr "VCD 40 kB"
+
+msgid "VCD Res"
+msgstr "VCD ?????????"
+
+msgid "VCD res"
+msgstr "VCD ?????????"
+
+msgid "VCD resolution [Ctrl-4]"
+msgstr "VCD ????????? [Ctrl-4]"
+
+msgid "VHQ enables an additional search process to increase quality"
+msgstr "VHQ ????????????????????????????????????????????????"
+
+msgid "VHQ mode:"
+msgstr "VHQ ??????:"
+
+msgid "VOB to VobSub"
+msgstr "VOB ?????? VobSub"
+
+msgid "Variable Bitrate:"
+msgstr "???????????????:"
+
+msgid "Variable bitrate mode"
+msgstr "?????????????????????"
+
+msgid "Vertical flip"
+msgstr "????????????"
+
+msgid "Vertically flip the picture."
+msgstr "?????????????????????"
+
+msgid "Vi_deo"
+msgstr "??????(_D)"
+
+msgid "Video"
+msgstr "??????"
+
+msgid "Video Codecs"
+msgstr "???????????????"
+
+msgid "Video Filter Manager"
+msgstr "?????????????????????"
+
+msgid "Video Filters"
+msgstr "????????????"
+
+msgid "Video _display:"
+msgstr "????????????(_D):"
+
+msgid "Video bitrate:"
+msgstr "???????????????:"
+
+msgid "Video encoder"
+msgstr "???????????????"
+
+msgid "Video filters"
+msgstr "????????????"
+
+msgid "Video size (MB):"
+msgstr "???????????? (MB):"
+
+msgid "Vignette _Height:"
+msgstr "????????????(_H):"
+
+msgid "Vignette _Width:"
+msgstr "????????????(_W):"
+
+msgid "Vignette frame number"
+msgstr "?????????????????????"
+
+msgid "Vlad59's Avisynth port of Jim Casaburi's denoiser."
+msgstr "Vlad59 ??? Avisynth ??? Jim Casaburi ????????????????????????"
+
+msgid "VobSub"
+msgstr "VobSub"
+
+msgid "VobSub Settings"
+msgstr "VobSub ??????"
+
+msgid "VobSub file:"
+msgstr "VobSub ??????:"
+
+msgid "Vorbis"
+msgstr "Vorbis"
+
+msgid "Vorbis Configuration"
+msgstr "Vorbis ??????"
+
+msgid "W"
+msgstr "W"
+
+msgid "WAV open file failed..."
+msgstr "WAV ??????????????????..."
+
+msgid "WMA"
+msgstr "WMA"
+
+msgid "Weighted Biprediction"
+msgstr "??????????????????"
+
+msgid "Weird"
+msgstr "?????????"
+
+msgid "Whirl"
+msgstr "??????"
+
+msgid "Width and height cannot be 0"
+msgstr "?????????????????? 0"
+
+msgid "Width and height cannot be odd"
+msgstr "????????????????????????"
+
+msgid "Width is not a multiple of 8"
+msgstr "????????? 8 ?????????"
+
+msgid ""
+"Width is not a multiple of 8\n"
+" continue anyway ?"
+msgstr ""
+"????????? 8 ?????????\n"
+" ?????????????????????????????? ?"
+
+msgid "Win32"
+msgstr "Win32"
+
+msgid "Wrong Colorspace"
+msgstr "???????????????"
+
+msgid "Wrong VobSub parametering"
+msgstr "????????? VobSub ??????"
+
+msgid "Wrong output format"
+msgstr "?????????????????????"
+
+msgid "Wrong video codec"
+msgstr "????????????????????????"
+
+msgid "X"
+msgstr "X"
+
+msgid "X1"
+msgstr "X1"
+
+msgid "XVideo"
+msgstr "XVideo"
+
+msgid "XVideo (best)"
+msgstr "XVideo (??????)"
+
+msgid "X_vid threads:"
+msgstr "X_vid ?????????:"
+
+msgid "XviD encoding options"
+msgstr "XviD ????????????"
+
+msgid "Xvid"
+msgstr "Xvid"
+
+msgid "Xvid Encoder"
+msgstr "Xvid ?????????"
+
+msgid "Xvid4"
+msgstr "Xvid4"
+
+msgid "Xvid4 and FAAC support is required for the iPod profile."
+msgstr "iPod ????????????????????? Xvid4 ??? FAAC???"
+
+msgid "Y"
+msgstr "Y"
+
+msgid "Y to UV"
+msgstr "Y to UV"
+
+msgid "Y800"
+msgstr "Y800"
+
+msgid "Y800 (lavc)"
+msgstr "Y800 (lavc)"
+
+msgid "YV12"
+msgstr "YV12"
+
+msgid "YV12 (raw)"
+msgstr "YV12 (raw)"
+
+msgid "Yes"
+msgstr "???"
+
+msgid "Yet Another DeInterlacer. Ported from MPlayer."
+msgstr "??????????????????????????? MPlayer ?????????"
+
+msgid "You can't remove all frames"
+msgstr "??????????????????????????????"
+
+msgid "You can't use the Copy codec."
+msgstr "????????????????????????????????????"
+
+msgid ""
+"You cannot mix different video dimensions yet. Using the partial video "
+"filter later, will not work around this problem. The workaround is:\n"
+"1.) \"resize\" / \"add border\" / \"crop\" each stream to the same "
+"resolution\n"
+"2.) concatinate them together"
+msgstr ""
+"?????????????????????????????????????????? ???????????????????????????????????????????????? ????????????:\n"
+"1.) \"????????????\" / \"????????????\" / \"??????\" ????????????????????????????????????\n"
+"2.) ??????????????????"
+
+msgid ""
+"You don't have FAAC!.\n"
+"It is needed to create PSP compatible video."
+msgstr ""
+"??????????????? FAAC???.\n"
+"?????? PSP ???????????????????????????"
+
+msgid ""
+"You don't have LAME!.\n"
+"It is needed to create FLV  video."
+msgstr ""
+"??????????????? LAME???.\n"
+"?????? FLV ?????????????????????"
+
+msgid ""
+"You may need smart copy.\n"
+" Enable it ?"
+msgstr ""
+"???????????????????????????\n"
+" ???????????? ?"
+
+msgid "You should use Tool->Rebuild frame. Do it now ?"
+msgstr "??????????????? ??????->???????????????????????????????????????"
+
+msgid "Z_oom 1:2"
+msgstr "????????? 1:2(_O)"
+
+msgid "Zoom _1:1"
+msgstr "????????? _1:1"
+
+msgid "Zoom _2:1"
+msgstr "????????? _2:1"
+
+msgid "_4MV"
+msgstr "4MV"
+
+msgid "_A/V Sidebar"
+msgstr "??????/?????? ??????(_A)"
+
+msgid "_AP type:"
+msgstr "AP ??????:"
+
+msgid "_About"
+msgstr "??????(_A)"
+
+msgid "_Accept non-standard audio frequency for DVD"
+msgstr "????????? DVD ??????????????????????????????"
+
+msgid "_Alpha:"
+msgstr "??????:"
+
+msgid "_Angle:"
+msgstr "??????:"
+
+msgid "_Append..."
+msgstr "??????...(_A)"
+
+msgid "_Audio"
+msgstr "??????(_A)"
+
+msgid "_Audio output:"
+msgstr "????????????:"
+
+msgid "_Audio source:"
+msgstr "????????????:"
+
+msgid "_Auto split"
+msgstr "????????????"
+
+msgid "_Autolevel"
+msgstr "????????????(_A)"
+
+msgid "_Average bitrate (kb/s):"
+msgstr "??????????????? (kb/s):"
+
+msgid "_BVHQ"
+msgstr "BVHQ"
+
+msgid "_Background Image:"
+msgstr "????????????:"
+
+msgid "_Backward threshold:"
+msgstr "???????????????:"
+
+msgid ""
+"_Bias (only for display; use 0 for average, 128 for frame minus average):"
+msgstr "?????? (???????????????????????? 0 ???????????????128 ????????????????????????):"
+
+msgid "_Bias (will be added to result):"
+msgstr "?????? (????????????????????????):"
+
+msgid "_Bitrate (kb/s):"
+msgstr "????????? (kb/s):"
+
+msgid "_Bitrate Histogram"
+msgstr "??????????????????(_B)"
+
+msgid "_Bitrate:"
+msgstr "?????????:"
+
+msgid "_Blend"
+msgstr "??????(_B)"
+
+msgid "_Blue:"
+msgstr "???:"
+
+msgid "_Bottom border:"
+msgstr "????????????(_B):"
+
+msgid "_Bottom crop (ignore particles in):"
+msgstr "???????????? (?????? particles in ):"
+
+msgid "_Browse..."
+msgstr "??????...(_B)"
+
+msgid "_Buffer size:"
+msgstr "????????????:"
+
+msgid "_Build VBR Time Map"
+msgstr "?????????????????????(VBR)????????????(_B)"
+
+msgid "_Built-in Support"
+msgstr "???????????????(_B)"
+
+msgid "_Calculator"
+msgstr "?????????(_C)"
+
+msgid "_Calibrate"
+msgstr "??????(_C)"
+
+msgid "_Camera number:"
+msgstr "???????????????:"
+
+msgid "_Contrast:"
+msgstr "??????:"
+
+msgid "_Copy"
+msgstr "??????(_C)"
+
+msgid "_Custom"
+msgstr "??????(_C)"
+
+msgid "_Custom Matrix"
+msgstr "????????????(_C)"
+
+msgid "_Custom size (MB):"
+msgstr "???????????? (MB):"
+
+msgid "_DVD"
+msgstr "_DVD"
+
+msgid "_Debugging settings (bits):"
+msgstr "???????????? (bits):"
+
+msgid "_Decoder Options"
+msgstr "???????????????(_D)"
+
+msgid "_Defaults"
+msgstr "??????(_D)"
+
+msgid "_Deinterlacing:"
+msgstr "?????????(_D):"
+
+msgid "_Delay (ms):"
+msgstr "?????? (ms):"
+
+msgid "_Delete"
+msgstr "??????(_D)"
+
+msgid "_Denoise"
+msgstr "????????????(_D)"
+
+msgid "_Deringing"
+msgstr "??????????????????(_D)"
+
+msgid "_Destination aspect ratio:"
+msgstr "???????????????????????????:"
+
+msgid "_Direct threshold:"
+msgstr "???????????????:"
+
+msgid "_Disable NUV audio sync"
+msgstr "?????? NUV ????????????(_D)"
+
+msgid "_Disable reservoir:"
+msgstr "???????????????:"
+
+msgid "_Dynamic range compression"
+msgstr "??????????????????"
+
+msgid "_Edit"
+msgstr "??????(_E)"
+
+msgid "_Edit Glyph"
+msgstr "??????????????????(_E)"
+
+msgid "_Encoder"
+msgstr "?????????(_E)"
+
+msgid "_Encoding mode:"
+msgstr "?????????????????????"
+
+msgid "_Encoding priority:"
+msgstr "??????????????????:"
+
+msgid "_Encoding:"
+msgstr "????????????:"
+
+msgid "_End Frame (last frame # to include), -1 = last:"
+msgstr "???????????? (???????????????????????? #), -1 = ??????:"
+
+msgid "_End frame:"
+msgstr "????????????:"
+
+msgid "_Evalute all frames"
+msgstr "?????????????????????(_E)"
+
+msgid "_External file:"
+msgstr "???????????????:"
+
+msgid "_Extra"
+msgstr "?????????(_E)"
+
+msgid "_Fade type:"
+msgstr "?????????????????????:"
+
+msgid "_Field dominance:"
+msgstr "????????????:"
+
+msgid "_Field order:"
+msgstr "??????????????????:"
+
+msgid "_File"
+msgstr "??????(_F)"
+
+msgid "_Filesize tolerance (kb):"
+msgstr "??????????????????????????? (kb):"
+
+msgid "_Filter directory:"
+msgstr "???????????????:"
+
+msgid "_Filter strength:"
+msgstr "????????????:"
+
+msgid "_Filters"
+msgstr "??????(_F)"
+
+msgid "_First Frame"
+msgstr "?????????(_F)"
+
+msgid "_Font (TTF):"
+msgstr "?????? (TTF):"
+
+msgid "_Font scale:"
+msgstr "????????????:"
+
+msgid "_Format:"
+msgstr "??????:"
+
+msgid "_Frame Hex Dump"
+msgstr "????????????????????????(_F)"
+
+msgid "_Frame Rate"
+msgstr "?????????(_F)"
+
+msgid "_Frame rate change:"
+msgstr "???????????????:"
+
+msgid "_Frames per second"
+msgstr "???????????????(_F)"
+
+msgid "_GMC"
+msgstr "_GMC"
+
+msgid "_GOP size:"
+msgstr "GOP ??????:"
+
+msgid "_Gain mode:"
+msgstr "????????????:"
+
+msgid "_Go"
+msgstr "??????(_G)"
+
+msgid "_Go to frame:"
+msgstr "????????????(_G):"
+
+msgid "_Green:"
+msgstr "???:"
+
+msgid "_Greyscale"
+msgstr "??????(_G)"
+
+msgid "_H.263"
+msgstr "H.263"
+
+msgid "_Help"
+msgstr "??????(_H)"
+
+msgid "_High Q"
+msgstr "??? Q(_H)"
+
+msgid "_High quality"
+msgstr "?????????(_H)"
+
+msgid "_Histogram every N frames (0 to disable):"
+msgstr "??? N ????????????????????? (0 ?????????)(_H):"
+
+msgid "_Horizontal deblocking"
+msgstr "????????????????????????(_H)"
+
+msgid "_Horizontal stacking:"
+msgstr "????????????:"
+
+msgid "_Hours:"
+msgstr "??????:"
+
+msgid "_IFO file:"
+msgstr "IFO ??????:"
+
+msgid "_Identical:"
+msgstr "??????:"
+
+msgid "_Ignore glyph"
+msgstr "??????????????????(_I)"
+
+msgid "_Indexing/unpacking priority:"
+msgstr "??????/???????????????????????????:"
+
+msgid "_Initial:"
+msgstr "??????:"
+
+msgid "_Interlaced"
+msgstr "??????(_I)"
+
+msgid "_Interlacing:"
+msgstr "??????:"
+
+msgid "_Interpolate:"
+msgstr "??????:"
+
+msgid "_Job name:"
+msgstr "????????????:"
+
+msgid "_Last Frame"
+msgstr "????????????(_L)"
+
+msgid "_Left border:"
+msgstr "?????????(_L):"
+
+msgid "_Left side crop (ignore particles in):"
+msgstr "???????????? (??????particles in ):"
+
+msgid "_Line spacing:"
+msgstr "?????????:"
+
+msgid "_Link:"
+msgstr "??????:"
+
+msgid ""
+"_Load Bias (added to each pixel\n"
+"in file image when loaded):"
+msgstr ""
+"????????????(????????????\n"
+"????????????????????????????????????):"
+
+msgid "_Load external filters"
+msgstr "?????????????????????"
+
+msgid "_Load/Run Project..."
+msgstr "??????/?????? ??????...(_L)"
+
+msgid "_Local playback downmixing:"
+msgstr "??????????????????:"
+
+msgid "_Logo (jpg file):"
+msgstr "_?????? (jpg ??????):"
+
+msgid "_Luma lock:"
+msgstr "????????????:"
+
+msgid "_Luma temporal threshold:"
+msgstr "?????????????????????:"
+
+msgid "_Luma threshold:"
+msgstr "???????????????:"
+
+msgid "_MPEG"
+msgstr "MPEG"
+
+msgid "_Macroblock decision:"
+msgstr "??????????????????:"
+
+msgid "_Main Toolbar"
+msgstr "????????????(_M)"
+
+msgid "_Main Track"
+msgstr "?????????(_M)"
+
+msgid "_Map"
+msgstr "??????(_M)"
+
+msgid "_Mask"
+msgstr "??????(_M)"
+
+msgid "_Matrices:"
+msgstr "??????:"
+
+msgid "_Medium:"
+msgstr "???:"
+
+msgid "_Message level:"
+msgstr "????????????:"
+
+msgid "_Minutes:"
+msgstr "??????:"
+
+msgid "_Mixer:"
+msgstr "?????????:"
+
+msgid "_MntMode:"
+msgstr "_MntMode:"
+
+msgid "_Mode:"
+msgstr "??????:"
+
+msgid "_NTSC(default is Pal):"
+msgstr "NTSC(????????? PAL):"
+
+msgid "_New frame rate:"
+msgstr "????????????:"
+
+msgid "_Next"
+msgstr "?????????(_N)"
+
+msgid "_Next Frame"
+msgstr "?????????(_N)"
+
+msgid "_Noise threshold:"
+msgstr "???????????????:"
+
+msgid "_Noise:"
+msgstr "??????:"
+
+msgid "_Number of B frames:"
+msgstr "B ???????????????(_N):"
+
+msgid "_OCR (VobSub -> srt)"
+msgstr "_OCR (VobSub ?????? srt)"
+
+msgid "_Open..."
+msgstr "??????...(_O)"
+
+msgid "_Order:"
+msgstr "??????:"
+
+msgid "_Output File:"
+msgstr "????????????:"
+
+msgid "_PSP"
+msgstr "_PSP"
+
+msgid "_Paste"
+msgstr "??????(_P)"
+
+msgid "_Play/Stop"
+msgstr "??????/??????(_P)"
+
+msgid "_Playback priority:"
+msgstr "??????????????????"
+
+msgid "_Postprocessing"
+msgstr "????????????(_P)"
+
+msgid "_Postprocessing:"
+msgstr "????????????:"
+
+msgid "_Preview"
+msgstr "??????(_P)"
+
+msgid "_Previous"
+msgstr "?????????(_P)"
+
+msgid "_Process luma"
+msgstr "????????????(_P)"
+
+msgid "_Qp:"
+msgstr "_Qp:"
+
+msgid "_Qpel"
+msgstr "Qpel"
+
+msgid "_Quality:"
+msgstr "??????:"
+
+msgid "_Quantization type:"
+msgstr "??????????????????:"
+
+msgid "_Quantizer compression:"
+msgstr "???????????????:"
+
+msgid "_Quantizer:"
+msgstr "?????????:"
+
+msgid "_Quarter pixel"
+msgstr "??????????????????(_Q)"
+
+msgid "_Quit"
+msgstr "??????(_Q)"
+
+msgid "_Radius:"
+msgstr "??????:"
+
+msgid "_Rebuild Frames (I & B)"
+msgstr "?????????????????? (I & B)"
+
+msgid "_Red:"
+msgstr "???:"
+
+msgid "_Reset Edits"
+msgstr "????????????(_R)"
+
+msgid "_Result Bias (added to each result pixel):"
+msgstr "???????????? (????????????????????????)(_R):"
+
+msgid "_Right border:"
+msgstr "?????????(_R):"
+
+msgid "_Right side crop (ignore particles in):"
+msgstr "???????????? (?????? particles in ):"
+
+msgid "_SVCD"
+msgstr "_SVCD"
+
+msgid "_Saturation:"
+msgstr "?????????:"
+
+msgid "_Save"
+msgstr "??????(_S)"
+
+msgid "_Scan for Black Frames..."
+msgstr "???????????????...(_S)"
+
+msgid "_Scene change:"
+msgstr "????????????:"
+
+msgid "_Second Track"
+msgstr "?????????(_S)"
+
+msgid "_Seconds:"
+msgstr "???:"
+
+msgid "_Sharp"
+msgstr "??????"
+
+msgid "_Sharper engine:"
+msgstr "???????????????:"
+
+msgid "_Show metrics"
+msgstr "????????????"
+
+msgid "_Shrink Factor:"
+msgstr "????????????:"
+
+msgid "_Shrink factor:"
+msgstr "????????????:"
+
+msgid "_Source aspect ratio:"
+msgstr "?????????????????????:"
+
+msgid "_Spatial luma strength:"
+msgstr "?????????????????????(_S):"
+
+msgid "_Spatial threshold:"
+msgstr "???????????????(_S):"
+
+msgid "_Split MPEG files every (MB):"
+msgstr "MPEG ?????????????????????????????? (MB):"
+
+msgid "_Split every MB:"
+msgstr "???????????????????????????MB:"
+
+msgid "_Start Frame (first frame # to include in average):"
+msgstr "????????????(????????????????????????????????? #):"
+
+msgid "_Start frame:"
+msgstr "????????????:"
+
+msgid "_Strategy:"
+msgstr "??????:"
+
+msgid "_Strength:"
+msgstr "??????:"
+
+msgid "_Subtitle file (ASS/SSA):"
+msgstr "???????????? (ASS/SSA):"
+
+msgid "_Subtitle file:"
+msgstr "????????????:"
+
+msgid "_Swap U and V"
+msgstr "?????? U ??? V (_S)"
+
+msgid "_Swap U&V"
+msgstr "?????? U&V(_S)"
+
+msgid "_Target type:"
+msgstr "????????????:"
+
+msgid "_Temporal strength:"
+msgstr "????????????:"
+
+msgid "_Temporal threshold:"
+msgstr "???????????????(_T):"
+
+msgid "_Threshold 1:"
+msgstr "????????? 1:"
+
+msgid "_Threshold:"
+msgstr "?????????:"
+
+msgid "_Time shift (ms):"
+msgstr "???????????? (ms):"
+
+msgid "_Tools"
+msgstr "??????(_T)"
+
+msgid "_Top border:"
+msgstr "????????????(_T):"
+
+msgid "_Top crop (ignore particles in):"
+msgstr "???????????? (?????? particles in ):"
+
+msgid "_Top margin:"
+msgstr "????????????:"
+
+msgid "_Track from video:"
+msgstr "??????????????????:"
+
+msgid "_Trellis quantization"
+msgstr "??????????????????(_T)"
+
+msgid "_Try backward:"
+msgstr "????????????:"
+
+msgid "_Try reverse"
+msgstr "????????????(_T)"
+
+msgid "_Type:"
+msgstr "??????:"
+
+msgid "_Use Xvid rate control"
+msgstr "?????? Xvid ???????????????"
+
+msgid "_Use alternative tag for MP3 in .mp4"
+msgstr "??? .mp4 ??? MP3 ????????????????????????"
+
+msgid "_Use chroma to decide"
+msgstr "?????????????????????(_U)"
+
+msgid "_Use libavcodec MPEG-2 decoder"
+msgstr "?????? libavcodec MPEG-2 ?????????(_U)"
+
+msgid "_Use systray while encoding"
+msgstr "???????????????????????????(_U)"
+
+msgid "_VCD"
+msgstr "_VCD"
+
+msgid "_VOB -> VobSub"
+msgstr "_VOB ?????? VobSub"
+
+msgid "_VOB file(s):"
+msgstr "VOB ??????:"
+
+msgid "_Vertical deblocking"
+msgstr "????????????????????????(_V)"
+
+msgid "_Vertical stacking:"
+msgstr "????????????:"
+
+msgid "_Video size (MB):"
+msgstr "???????????? (MB):"
+
+msgid "_View"
+msgstr "??????(_V)"
+
+msgid "_Volume control:"
+msgstr "????????????:"
+
+msgid "_Weight:"
+msgstr "???:"
+
+msgid "_X Position:"
+msgstr "_X ??????:"
+
+msgid "_Y Position:"
+msgstr "_Y ??????:"
+
+msgid "_Zoom 1:4"
+msgstr "????????? 1:4(_Z)"
+
+msgid "_lavc threads:"
+msgstr "_lavc ?????????:"
+
+msgid "_x264 threads:"
+msgstr "_x264 ?????????:"
+
+msgid "aRts"
+msgstr "aRts"
+
+msgid "amrnb"
+msgstr "amrnb"
+
+msgid "and all the others."
+msgstr "??????????????????"
+
+msgid "asharp"
+msgstr "???????????????"
+
+msgid "avsproxy"
+msgstr "avsproxy"
+
+msgid "can't create custom directory (%s)."
+msgstr "?????????????????????????????? (%s)."
+
+msgid "can't create job directory (%s)."
+msgstr "??????????????????????????? (%s)"
+
+msgid "can't determine $HOME."
+msgstr "???????????? $HOME."
+
+msgid "dialog1"
+msgstr "??????1"
+
+msgid "dummy"
+msgstr "??????"
+
+msgid "label1"
+msgstr "??????1"
+
+msgid "liba52"
+msgstr "liba52"
+
+msgid "libavcodec MPEG-2 Configuration"
+msgstr "libavcodec MPEG-2 ??????"
+
+msgid "libavcodec MPEG-4 configuration"
+msgstr "libavcodec MPEG-4 ??????"
+
+msgid "libavcodec deinterlacer"
+msgstr "libavcodec ????????????"
+
+msgid "libdca"
+msgstr "libdca"
+
+msgid "libmpeg2enc DVD"
+msgstr "libmpeg2enc DVD"
+
+msgid "libmpeg2enc SVCD"
+msgstr "libmpeg2enc SVCD"
+
+msgid "libmpeg2enc VCD"
+msgstr "libmpeg2enc VCD"
+
+msgid "lvemux init failed"
+msgstr "lvemux ???????????????"
+
+msgid "mcDeinterlace"
+msgstr "mc ?????????"
+
+msgid "menu"
+msgstr "??????"
+
+msgid "none"
+msgstr "???"
+
+msgid "translator-credits"
+msgstr "ZDW (zdw163 at hotmail.com)"
+
+msgid "x264"
+msgstr "x264"
+
+msgid "x264 Configuration"
+msgstr "x264 ??????"
+
+msgid "x86"
+msgstr "x86"
+
+msgid "x86-64"
+msgstr "x86-64"
+
+msgid "yadif"
+msgstr "yadif"



From mean at mail.berlios.de  Wed Nov 18 19:51:49 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Wed, 18 Nov 2009 19:51:49 +0100
Subject: [Avidemux-svn-commit] r5520 -
	branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoFilter2/src
Message-ID: <200911181851.nAIIpnOt022159@sheep.berlios.de>

Author: mean
Date: 2009-11-18 19:51:49 +0100 (Wed, 18 Nov 2009)
New Revision: 5520

Modified:
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoFilter2/src/ADM_videoFilterBridge.cpp
Log:
[VideoFilter] Output proper duration and fix display for early/late frames

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoFilter2/src/ADM_videoFilterBridge.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoFilter2/src/ADM_videoFilterBridge.cpp	2009-11-18 18:23:13 UTC (rev 5519)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoFilter2/src/ADM_videoFilterBridge.cpp	2009-11-18 18:51:49 UTC (rev 5520)
@@ -35,7 +35,7 @@
     bridgeInfo.width=fo.width;
     bridgeInfo.height=fo.height;
     bridgeInfo.frameIncrement=video_body->getFrameIncrement();
-    bridgeInfo.totalDuration=video_body->getVideoDuration();
+    bridgeInfo.totalDuration=endTime-startTime;
     bridgeInfo.frameIncrement=video_body->getFrameIncrement();
     rewind();
 }
@@ -83,12 +83,12 @@
     int64_t pts=image->Pts;
     if(pts>endTime)
     {
-        printf("[VideoBridge] This frame is too late (%"LLD" vs %"LLU")\n",pts,startTime);
+        printf("[VideoBridge] This frame is too late (%"LLD" vs %"LLU")\n",pts,endTime);
         return false;
     }
     if(pts<startTime) 
     {
-            printf("[VideoBridge] This frame is too early (%"LLD" vs %"LLU")\n",pts,endTime);
+            printf("[VideoBridge] This frame is too early (%"LLD" vs %"LLU")\n",pts,startTime);
             goto again;
     }
     // Rescale time



From mean at mail.berlios.de  Wed Nov 18 19:51:50 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Wed, 18 Nov 2009 19:51:50 +0100
Subject: [Avidemux-svn-commit] r5521 -
	branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_dialog
Message-ID: <200911181851.nAIIpoNR022169@sheep.berlios.de>

Author: mean
Date: 2009-11-18 19:51:50 +0100 (Wed, 18 Nov 2009)
New Revision: 5521

Modified:
   branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_dialog/Q_working.cpp
Log:
[Qt4/Working] Can now abort the Working dialog

Modified: branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_dialog/Q_working.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_dialog/Q_working.cpp	2009-11-18 18:51:49 UTC (rev 5520)
+++ branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_dialog/Q_working.cpp	2009-11-18 18:51:50 UTC (rev 5521)
@@ -23,7 +23,14 @@
 workWindow::workWindow()     : QDialog()
  {
      ui.setupUi(this);
+     active=true;
+     connect( ui.buttonCancel,SIGNAL(clicked(bool)),this,SLOT(stop(bool)));
  }
+ void workWindow::stop(bool a) 
+{
+    ADM_info("Stop Request\n");
+    active=false;
+}
 //*******************************************
 
 namespace ADM_Qt4CoreUIToolkit
@@ -31,6 +38,7 @@
 
 class DIA_workingQt4 : public DIA_workingBase
 {
+
 protected:
         virtual void 	    postCtor( void ) ;
 public:
@@ -43,15 +51,8 @@
                 void        closeDialog(void);
         
 };
+//********************************************************
 
-
-
-
-
-
-/****************************************/
-//*******************************************
-
 DIA_workingQt4::DIA_workingQt4( const char *title ) : DIA_workingBase(title)
 {
   workWindow *wind;
@@ -59,6 +60,8 @@
   _priv=(void *)wind;
   wind->setWindowTitle(title);
   postCtor();
+
+  
 }
 void DIA_workingQt4 :: postCtor( void )
 {
@@ -127,7 +130,8 @@
 uint8_t DIA_workingQt4::isAlive (void )
 {
 	if(!_priv) return 0;
-	return 1;
+    workWindow *wind=(workWindow *)_priv; ADM_assert(wind);
+	return wind->active;
 }
 
 DIA_workingQt4::~DIA_workingQt4()
@@ -140,6 +144,8 @@
   workWindow *wind=(workWindow *)_priv; ADM_assert(wind);
     if(wind) delete wind;
     wind=NULL;
+    _priv=NULL;
+   
 }
 /**
     \fn createWorking



From mean at mail.berlios.de  Wed Nov 18 19:51:51 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Wed, 18 Nov 2009 19:51:51 +0100
Subject: [Avidemux-svn-commit] r5522 -
	branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_dialog
Message-ID: <200911181851.nAIIpprA022179@sheep.berlios.de>

Author: mean
Date: 2009-11-18 19:51:51 +0100 (Wed, 18 Nov 2009)
New Revision: 5522

Modified:
   branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_dialog/Q_working.h
Log:
[Qt4/Working] Can now abort the Working dialog

Modified: branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_dialog/Q_working.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_dialog/Q_working.h	2009-11-18 18:51:50 UTC (rev 5521)
+++ branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_dialog/Q_working.h	2009-11-18 18:51:51 UTC (rev 5522)
@@ -6,9 +6,12 @@
 class workWindow : public QDialog
 {
 	Q_OBJECT
-
-public:
+    
+public:
+    bool active;
 	workWindow();
-	Ui_workingDialog ui;
+	Ui_workingDialog ui;
+public slots:
+    void stop(bool a);
 };
 #endif	// Q_working_h



From mean at mail.berlios.de  Wed Nov 18 19:51:53 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Wed, 18 Nov 2009 19:51:53 +0100
Subject: [Avidemux-svn-commit] r5523 -
	branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerAvi
Message-ID: <200911181851.nAIIpreZ022191@sheep.berlios.de>

Author: mean
Date: 2009-11-18 19:51:53 +0100 (Wed, 18 Nov 2009)
New Revision: 5523

Modified:
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerAvi/muxerAvi.cpp
Log:
[AviMuxer] Let the audio drift up to 32 ms before correcting

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerAvi/muxerAvi.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerAvi/muxerAvi.cpp	2009-11-18 18:51:51 UTC (rev 5522)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerAvi/muxerAvi.cpp	2009-11-18 18:51:53 UTC (rev 5523)
@@ -24,11 +24,6 @@
 
 #define ADM_NO_PTS 0xFFFFFFFFFFFFFFFFLL // FIXME
 #define AUDIO_BUFFER_SIZE 48000*6*sizeof(float)
-// Fwd ref
-uint8_t isMpeg4Compatible (uint32_t fourcc);
-uint8_t isH264Compatible (uint32_t fourcc);
-uint8_t isMSMpeg4Compatible (uint32_t fourcc);
-uint8_t isDVCompatible (uint32_t fourcc);
 
 #if 1
 #define aprintf(...) {}
@@ -43,7 +38,7 @@
 
 
 /**
-    \fn     muxerMP4
+    \fn     muxerAVI
     \brief  Constructor
 */
 muxerAvi::muxerAvi()
@@ -53,7 +48,7 @@
     clocks=NULL;
 };
 /**
-    \fn     muxerMP4
+    \fn     muxerAVI
     \brief  Destructor
 */
 
@@ -116,9 +111,9 @@
                 {
                     aprintf("[Audio] Packet size %"LU" sample:%"LU" dts:%"LLU" target :%"LLU"\n",audioSize,nbSample,audioDts,targetDts);
                     if(audioDts!=ADM_NO_PTS)
-                        if( abs(audioDts-clk->getTimeUs())>5000)
+                        if( abs(audioDts-clk->getTimeUs())>32000)
                         {
-                            printf("[AviMuxer] Audio skew!");
+                            ADM_warning("[AviMuxer] Audio skew!\n");
                             clk->setTimeUs(audioDts);
                         }
                     nb=writter.saveAudioFrame(audioIndex,audioSize,audioBuffer) ;
@@ -151,7 +146,7 @@
     audioBuffer=new uint8_t[AUDIO_BUFFER_SIZE];
     videoBuffer=new uint8_t[bufSize];
 
-    printf("[AviMuxer]avg fps=%u\n",vStream->getAvgFps1000());
+    ADM_info("[AviMuxer]avg fps=%u\n",vStream->getAvgFps1000());
 
     uint64_t aviTime=0;
     if(false==vStream->getPacket(&len, videoBuffer, bufSize,&pts,&dts,&flags)) goto abt;
@@ -170,7 +165,7 @@
             {
                 if(!writter.saveVideoFrame( len, flags,videoBuffer))  // Put our real video
                 {
-                        printf("[AviMuxer] Error writting video frame\n");
+                        ADM_warning("[AviMuxer] Error writting video frame\n");
                         result=false;
                         goto abt;
                 }
@@ -200,7 +195,7 @@
     videoBuffer=NULL;
     delete [] audioBuffer;
     audioBuffer=NULL;
-    printf("[AviMuxer] Wrote %d frames, nb audio streams %d\n",written,nbAStreams);
+    ADM_info("[AviMuxer] Wrote %d frames, nb audio streams %d\n",written,nbAStreams);
     return result;
 }
 /**
@@ -210,7 +205,7 @@
 bool muxerAvi::close(void)
 {
 
-    printf("[AviMuxer] Closing\n");
+    ADM_info("[AviMuxer] Closing\n");
     return true;
 }
 //EOF



From mean at mail.berlios.de  Thu Nov 19 07:45:50 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Thu, 19 Nov 2009 07:45:50 +0100
Subject: [Avidemux-svn-commit] r5524 -
	branches/avidemux_2.5_branch_gruntster/cmake
Message-ID: <200911190645.nAJ6joR7010540@sheep.berlios.de>

Author: mean
Date: 2009-11-19 07:45:48 +0100 (Thu, 19 Nov 2009)
New Revision: 5524

Added:
   branches/avidemux_2.5_branch_gruntster/cmake/vf_plugin_cli.cmake
Log:
[Filter] Add cli cmake helper

Added: branches/avidemux_2.5_branch_gruntster/cmake/vf_plugin_cli.cmake
===================================================================
--- branches/avidemux_2.5_branch_gruntster/cmake/vf_plugin_cli.cmake	2009-11-18 18:51:53 UTC (rev 5523)
+++ branches/avidemux_2.5_branch_gruntster/cmake/vf_plugin_cli.cmake	2009-11-19 06:45:48 UTC (rev 5524)
@@ -0,0 +1,7 @@
+MACRO(INIT_VIDEOFILTER_PLUGIN_CLI  lib  _srcsCli )
+
+ADD_LIBRARY(${lib} SHARED ${ARGN} ${_srcsCli})
+ADD_TARGET_CFLAGS(${lib} "-DADM_UI_TYPE_BUILD=1")
+INIT_VIDEOFILTER_PLUGIN(${lib})
+INSTALL_VIDEOFILTER(${lib})
+ENDMACRO(INIT_VIDEOFILTER_PLUGIN_CLI)



From mean at mail.berlios.de  Thu Nov 19 07:45:53 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Thu, 19 Nov 2009 07:45:53 +0100
Subject: [Avidemux-svn-commit] r5525 - in
	branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/MplayerResize:
	. cli
Message-ID: <200911190645.nAJ6jrpc010579@sheep.berlios.de>

Author: mean
Date: 2009-11-19 07:45:51 +0100 (Thu, 19 Nov 2009)
New Revision: 5525

Added:
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/MplayerResize/cli/
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/MplayerResize/cli/cli_resize.cpp
Modified:
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/MplayerResize/CMakeLists.txt
Log:
[VideoFilter] Mplayer Resize, cli version

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/MplayerResize/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/MplayerResize/CMakeLists.txt	2009-11-19 06:45:48 UTC (rev 5524)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/MplayerResize/CMakeLists.txt	2009-11-19 06:45:51 UTC (rev 5525)
@@ -2,6 +2,7 @@
 include(admFFmpegUtil)
 
 SET(resizeCommon_SRCS ADM_vidMPLResize.cpp)
+SET(resizeCommonCLI_SRCS cli/cli_resize.cpp)
 SET(resizeCommonGtk_SRCS gtk/gtk_resize.cpp)
 SET(resizeCommonQT_SRCS qt4/Q_resize.cpp)
 SET(resizeCommonQT_Headers qt4/Q_resize.h)
@@ -19,17 +20,26 @@
 
 add_library(ADM_libavutil UNKNOWN IMPORTED)
 set_property(TARGET ADM_libavutil PROPERTY IMPORTED_LOCATION "${FFMPEG_LIB_DIR}/${LIBAVUTIL_LIB}")
-
+ # GTK
 INCLUDE(vf_plugin_gtk)
 INIT_VIDEOFILTER_PLUGIN_GTK(ADM_vf_mplayerResize_gtk ${resizeCommonGtk_SRCS} ${resizeCommon_SRCS})
 
 IF (GTK_FOUND AND GTHREAD_FOUND)
 	TARGET_LINK_LIBRARIES(ADM_vf_mplayerResize_gtk ADM_libswscale ADM_libavcodec ADM_libavutil ADM_UIGtk)
 ENDIF (GTK_FOUND AND GTHREAD_FOUND)
-
+#/GTK
+#QT
 INCLUDE(vf_plugin_qt4)
 INIT_VIDEOFILTER_PLUGIN_QT4(ADM_vf_mplayerResize_qt4 ${resizeCommonQT_SRCS} ${resizeCommonQT_Headers} ${resizeCommonQT_UI} ${resizeCommon_SRCS})
 
 IF (QT4_FOUND)
 	TARGET_LINK_LIBRARIES(ADM_vf_mplayerResize_qt4 ADM_libswscale ADM_libavcodec ADM_libavutil ADM_UIQT4)
 ENDIF (QT4_FOUND)
+#/QT
+#CLI
+##
+INCLUDE (vf_plugin_cli)
+INIT_VIDEOFILTER_PLUGIN_CLI(ADM_vf_mplayerResize_cli ${resizeCommon_SRCS} ${resizeCommonCLI_SRCS})
+TARGET_LINK_LIBRARIES(ADM_vf_mplayerResize_cli ADM_libswscale ADM_libavcodec ADM_libavutil )
+INSTALL_VIDEOFILTER(ADM_vf_mplayerResize_cli)
+#CLI

Added: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/MplayerResize/cli/cli_resize.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/MplayerResize/cli/cli_resize.cpp	2009-11-19 06:45:48 UTC (rev 5524)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/MplayerResize/cli/cli_resize.cpp	2009-11-19 06:45:51 UTC (rev 5525)
@@ -0,0 +1,25 @@
+/*
+	Resize CLI
+
+*/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+#include <math.h>
+
+#include "ADM_toolkitGtk.h"
+#include "ADM_default.h"
+#define aprintf(...) {}
+
+/*----------------------------------------------*/
+uint8_t DIA_resize(uint32_t *width,uint32_t *height,uint32_t *alg,uint32_t originalw, uint32_t originalh,uint32_t fps1000)
+{
+        return 0;
+}
+



From mean at mail.berlios.de  Thu Nov 19 19:25:10 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Thu, 19 Nov 2009 19:25:10 +0100
Subject: [Avidemux-svn-commit] r5526 - in
	branches/avidemux_2.5_branch_gruntster:
	avidemux/ADM_UIs/ADM_CLI/include cmake
	plugins/ADM_videoFilters/ASharp plugins/ADM_videoFilters/ASharp/cli
	plugins/ADM_videoFilters/AvisynthResize
	plugins/ADM_videoFilters/AvisynthResize/cli
	plugins/ADM_videoFilters/CNR2 plugins/ADM_videoFilters/CNR2/cli
	plugins/ADM_videoFilters/ChromaShift
	plugins/ADM_videoFilters/ChromaShift/cli
	plugins/ADM_videoFilters/Contrast
	plugins/ADM_videoFilters/Contrast/cli plugins/ADM_videoFilters/Crop
	plugins/ADM_videoFilters/Crop/cli
	plugins/ADM_videoFilters/Eq2 plugins/ADM_videoFilters/Eq2/cli
	plugins/ADM_videoFilters/Equalizer
	plugins/ADM_videoFilters/Equalizer/cli
	plugins/ADM_videoFilters/Hue plugins/ADM_videoFilters/Hue/cli
	plugins/ADM_videoFilters/MPDelogo
	plugins/ADM_videoFilters/MPDelogo/cli
	plugins/ADM_videoFilters/Srt plugins/ADM_videoFilters/Srt/cli
	plugins/ADM_videoFilters/colorYUV
	plugins/ADM_videoFilters/colorYUV/cli
Message-ID: <200911191825.nAJIPAgr000939@sheep.berlios.de>

Author: mean
Date: 2009-11-19 19:25:06 +0100 (Thu, 19 Nov 2009)
New Revision: 5526

Added:
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/ASharp/cli/
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/ASharp/cli/DIA_asharp.cpp
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/AvisynthResize/cli/
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/AvisynthResize/cli/cli_resize.cpp
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/CNR2/cli/
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/CNR2/cli/DIA_cnr2.cpp
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/ChromaShift/cli/
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/ChromaShift/cli/DIA_chromaShift.cpp
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/Contrast/cli/
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/Contrast/cli/DIA_contrast.cpp
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/Crop/cli/
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/Crop/cli/DIA_crop.cpp
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/Eq2/cli/
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/Eq2/cli/DIA_eq2.cpp
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/Equalizer/cli/
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/Equalizer/cli/DIA_equalizer.cpp
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/Hue/cli/
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/Hue/cli/DIA_hue.cpp
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/MPDelogo/cli/
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/MPDelogo/cli/DIA_mpdelogo.cpp
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/Srt/cli/
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/Srt/cli/DIA_srt.cpp
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/colorYUV/cli/
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/colorYUV/cli/DIA_coloryuv.cpp
Modified:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_CLI/include/DIA_flyDialogCli.h
   branches/avidemux_2.5_branch_gruntster/cmake/vf_plugin_cli.cmake
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/ASharp/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/AvisynthResize/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/CNR2/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/ChromaShift/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/Contrast/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/Crop/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/Eq2/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/Equalizer/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/Hue/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/MPDelogo/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/Srt/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/colorYUV/CMakeLists.txt
Log:
[VideoFilter] Add configure stubs so that filters are available from avidemux2_cli

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_CLI/include/DIA_flyDialogCli.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_CLI/include/DIA_flyDialogCli.h	2009-11-19 06:45:51 UTC (rev 5525)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_CLI/include/DIA_flyDialogCli.h	2009-11-19 18:25:06 UTC (rev 5526)
@@ -24,7 +24,7 @@
                               void *canvas, void *slider, int yuv, ResizeMethod resizeMethod):
                                 ADM_flyDialog(width,height,in,canvas,slider,yuv,resizeMethod) {};
 
-  virtual uint8_t  cleanup2(void);
+  //virtual uint8_t  cleanup2(void);
   virtual uint8_t  isRgbInverted(void);
   virtual uint8_t  display(void);
   virtual float   calcZoomFactor(void);

Modified: branches/avidemux_2.5_branch_gruntster/cmake/vf_plugin_cli.cmake
===================================================================
--- branches/avidemux_2.5_branch_gruntster/cmake/vf_plugin_cli.cmake	2009-11-19 06:45:51 UTC (rev 5525)
+++ branches/avidemux_2.5_branch_gruntster/cmake/vf_plugin_cli.cmake	2009-11-19 18:25:06 UTC (rev 5526)
@@ -1,6 +1,7 @@
 MACRO(INIT_VIDEOFILTER_PLUGIN_CLI  lib  _srcsCli )
 
 ADD_LIBRARY(${lib} SHARED ${ARGN} ${_srcsCli})
+INCLUDE_DIRECTORIES(${AVIDEMUX_SOURCE_DIR}/avidemux/ADM_UIs/ADM_CLI/include/)
 ADD_TARGET_CFLAGS(${lib} "-DADM_UI_TYPE_BUILD=1")
 INIT_VIDEOFILTER_PLUGIN(${lib})
 INSTALL_VIDEOFILTER(${lib})

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/ASharp/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/ASharp/CMakeLists.txt	2009-11-19 06:45:51 UTC (rev 5525)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/ASharp/CMakeLists.txt	2009-11-19 18:25:06 UTC (rev 5526)
@@ -8,6 +8,7 @@
 INCLUDE(vf_plugin_gtk)
 INCLUDE(vf_plugin_qt4)
 
+SET(asharpCLI_SRCS cli/DIA_asharp.cpp)
 SET(asharpGtk_SRCS gtk/DIA_asharp.cpp)
 SET(asharpQT_SRCS  qt4/Q_asharp.cpp)
 SET(asharpQT_HEADERS  qt4/Q_asharp.h)
@@ -17,4 +18,9 @@
                 ${asharpQT_SRCS} ${asharpQT_HEADERS} ${asharpQT_UI} ${asharpCommon_SRCS})
 INIT_VIDEOFILTER_PLUGIN_GTK(  ADM_vf_asharp_gtk 
                 ${asharpGtk_SRCS} ${asharpCommon_SRCS})
+#CLI
+INCLUDE (vf_plugin_cli)
+INIT_VIDEOFILTER_PLUGIN_CLI(ADM_vf_asharp_cli ${asharpCommon_SRCS} ${asharpCLI_SRCS})
+INSTALL_VIDEOFILTER(ADM_vf_asharp_cli)
+#CLI
 

Added: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/ASharp/cli/DIA_asharp.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/ASharp/cli/DIA_asharp.cpp	2009-11-19 06:45:51 UTC (rev 5525)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/ASharp/cli/DIA_asharp.cpp	2009-11-19 18:25:06 UTC (rev 5526)
@@ -0,0 +1,46 @@
+/**/
+/***************************************************************************
+                          DIA_hue
+                             -------------------
+
+                           Ui for hue & sat
+
+    begin                : 08 Apr 2005
+    copyright            : (C) 2004/5 by mean
+    email                : fixounet at free.fr
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+
+#include "ADM_default.h"
+
+#include "ADM_image.h"
+#include "ADM_videoFilter.h"
+#include "ADM_vidASharp_param.h"
+#include "DIA_flyDialog.h"
+#include "DIA_flyAsharp.h"
+
+//
+//
+uint8_t DIA_getASharp(ASHARP_PARAM *param, AVDMGenericVideoStream *in)
+{
+return 1;
+}
+
+/**************************************/
+uint8_t flyASharp::upload(void)
+{
+        return 1;
+}
+uint8_t flyASharp::download (void)
+{
+    
+        return 1;
+}

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/AvisynthResize/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/AvisynthResize/CMakeLists.txt	2009-11-19 06:45:51 UTC (rev 5525)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/AvisynthResize/CMakeLists.txt	2009-11-19 18:25:06 UTC (rev 5526)
@@ -1,12 +1,9 @@
 INCLUDE(vf_plugin)
 
-SET(avisynthResizeCommon_SRCS 
-	ADM_resizebis.cpp  ADM_resizeter.cpp  ADM_vidResize.cpp
-)
+SET(avisynthResizeCommon_SRCS ADM_resizebis.cpp  ADM_resizeter.cpp  ADM_vidResize.cpp)
 
-
 SET(resizeCommonGtk_SRCS gtk/gtk_resize.cpp)
-
+SET(resizeCLI_SRCS cli/cli_resize.cpp)
 SET(resizeQt_SRCS qt4/Q_resize.cpp)
 SET(resizeQt_Headers qt4/Q_resize.h)
 SET(resizeQt_UI qt4/resizing)
@@ -18,3 +15,8 @@
                 ${resizeQt_SRCS} ${resizeQt_Headers} ${resizeQt_UI} ${avisynthResizeCommon_SRCS})
 INIT_VIDEOFILTER_PLUGIN_GTK(ADM_vf_avisynthResize_gtk 
                 ${resizeCommonGtk_SRCS} ${avisynthResizeCommon_SRCS})
+#CLI
+INCLUDE (vf_plugin_cli)
+INIT_VIDEOFILTER_PLUGIN_CLI(ADM_vf_resize_cli ${avisynthResizeCommon_SRCS}  ${resizeCLI_SRCS})
+INSTALL_VIDEOFILTER(ADM_vf_resize_cli)
+#CLI

Added: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/AvisynthResize/cli/cli_resize.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/AvisynthResize/cli/cli_resize.cpp	2009-11-19 06:45:51 UTC (rev 5525)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/AvisynthResize/cli/cli_resize.cpp	2009-11-19 18:25:06 UTC (rev 5526)
@@ -0,0 +1,22 @@
+/*
+	Resize GUI
+
+*/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+#include <math.h>
+
+#include "ADM_default.h"
+/*----------------------------------------------*/
+uint8_t DIA_resize(uint32_t *width,uint32_t *height,uint32_t *alg,uint32_t originalw, uint32_t originalh,uint32_t fps1000)
+{
+	return 0;
+}
+

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/CNR2/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/CNR2/CMakeLists.txt	2009-11-19 06:45:51 UTC (rev 5525)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/CNR2/CMakeLists.txt	2009-11-19 18:25:06 UTC (rev 5526)
@@ -8,6 +8,7 @@
 INCLUDE(vf_plugin_gtk)
 INCLUDE(vf_plugin_qt4)
 
+SET(cnr2CLI_SRCS cli/DIA_cnr2.cpp)
 SET(cnr2Gtk_SRCS gtk/DIA_cnr2.cpp)
 SET(cnr2QT_SRCS  qt4/Q_cnr2.cpp)
 SET(cnr2QT_HEADERS  qt4/Q_cnr2.h)
@@ -16,4 +17,10 @@
 INIT_VIDEOFILTER_PLUGIN_GTK(  ADM_vf_cnr2_gtk 
                 ${cnr2Gtk_SRCS} ${cnr2Common_SRCS})
 INIT_VIDEOFILTER_PLUGIN_QT4(ADM_vf_cnr2_qt4 
-                ${cnr2QT_SRCS} ${cnr2QT_HEADERS} ${cnr2QT_UI} ${cnr2Common_SRCS})
\ No newline at end of file
+                ${cnr2QT_SRCS} ${cnr2QT_HEADERS} ${cnr2QT_UI} ${cnr2Common_SRCS})
+#CLI
+INCLUDE (vf_plugin_cli)
+INIT_VIDEOFILTER_PLUGIN_CLI(ADM_vf_cnr2_cli ${cnr2Common_SRCS} ${cnr2CLI_SRCS})
+INSTALL_VIDEOFILTER(ADM_vf_cnr2_cli)
+#CLI
+

Added: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/CNR2/cli/DIA_cnr2.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/CNR2/cli/DIA_cnr2.cpp	2009-11-19 06:45:51 UTC (rev 5525)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/CNR2/cli/DIA_cnr2.cpp	2009-11-19 18:25:06 UTC (rev 5526)
@@ -0,0 +1,21 @@
+//
+// C++ Implementation: DIA_Msmooth
+//
+// Description: 
+//
+//
+// Author: mean <fixounet at free.fr>, (C) 2004
+//
+// Copyright: See COPYING file that comes with this distribution
+//
+//
+//
+#include "ADM_default.h"
+#include "ADM_vidCNR2_param.h"
+
+uint8_t DIA_cnr2(CNR2Param *param)
+{
+        return 1;
+
+}
+

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/ChromaShift/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/ChromaShift/CMakeLists.txt	2009-11-19 06:45:51 UTC (rev 5525)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/ChromaShift/CMakeLists.txt	2009-11-19 18:25:06 UTC (rev 5526)
@@ -9,6 +9,7 @@
 INCLUDE(vf_plugin_gtk)
 INCLUDE(vf_plugin_qt4)
 
+SET(chromashiftCLI_SRCS cli/DIA_chromaShift.cpp)
 SET(chromashiftGtk_SRCS gtk/DIA_chromaShift.cpp)
 SET(chromashiftQT_SRCS  qt4/Q_chromashift.cpp)
 SET(chromashiftQT_HEADERS  qt4/Q_chromashift.h)
@@ -18,4 +19,10 @@
                 ${chromashiftQT_SRCS} ${chromashiftQT_HEADERS} ${chromashiftQT_UI} ${chromashiftCommon_SRCS})
 INIT_VIDEOFILTER_PLUGIN_GTK(  ADM_vf_chromaShift_gtk 
                 ${chromashiftGtk_SRCS} ${chromashiftCommon_SRCS})
+#CLI
+INCLUDE (vf_plugin_cli)
+INIT_VIDEOFILTER_PLUGIN_CLI(ADM_vf_chromashift_cli ${chromashiftCommon_SRCS} ${chromashiftCLI_SRCS})
+INSTALL_VIDEOFILTER(ADM_vf_chromashift_cli)
+#CLI
 
+

Added: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/ChromaShift/cli/DIA_chromaShift.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/ChromaShift/cli/DIA_chromaShift.cpp	2009-11-19 06:45:51 UTC (rev 5525)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/ChromaShift/cli/DIA_chromaShift.cpp	2009-11-19 18:25:06 UTC (rev 5526)
@@ -0,0 +1,42 @@
+/***************************************************************************
+                          ADM_guiChromaShift.cpp  -  description
+                             -------------------
+    begin                : Sun Aug 24 2003
+    copyright            : (C) 2002-2003 by mean
+    email                : fixounet at free.fr
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+#include "ADM_default.h"
+
+
+#include "ADM_image.h"
+#include "ADM_videoFilter.h"
+
+#include "ADM_assert.h"
+#include "DIA_flyDialog.h"
+#include "../ADM_vidChromaShift_param.h"
+#include "DIA_flyChromaShift.h"
+uint8_t DIA_getChromaShift( AVDMGenericVideoStream *instream,CHROMASHIFT_PARAM    *param );
+uint8_t DIA_getChromaShift( AVDMGenericVideoStream *in,CHROMASHIFT_PARAM    *param )
+{
+        return 1;
+}
+uint8_t    flyChromaShift::upload(void)
+{
+  return 1;
+}
+uint8_t    flyChromaShift::download(void)
+{
+  
+  return 1;
+}
+
+

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/Contrast/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/Contrast/CMakeLists.txt	2009-11-19 06:45:51 UTC (rev 5525)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/Contrast/CMakeLists.txt	2009-11-19 18:25:06 UTC (rev 5526)
@@ -9,6 +9,7 @@
 INCLUDE(vf_plugin_qt4)
 
 SET(contrastGtk_SRCS gtk/DIA_contrast.cpp)
+SET(contrastCLI_SRCS cli/DIA_contrast.cpp)
 SET(contrastQT_SRCS  qt4/Q_contrast.cpp)
 SET(contrastQT_HEADERS  qt4/Q_contrast.h)
 SET(contrastQT_UI    qt4/contrast)
@@ -17,4 +18,9 @@
                 ${contrastQT_SRCS} ${contrastQT_HEADERS} ${contrastQT_UI} ${contrastCommon_SRCS})
 INIT_VIDEOFILTER_PLUGIN_GTK(  ADM_vf_contrast_gtk 
                 ${contrastGtk_SRCS} ${contrastCommon_SRCS})
+#CLI
+INCLUDE (vf_plugin_cli)
+INIT_VIDEOFILTER_PLUGIN_CLI(ADM_vf_contrast_cli ${contrastCommon_SRCS} ${contrastCLI_SRCS})
+INSTALL_VIDEOFILTER(ADM_vf_contrast_cli)
+#CLI
 

Added: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/Contrast/cli/DIA_contrast.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/Contrast/cli/DIA_contrast.cpp	2009-11-19 06:45:51 UTC (rev 5525)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/Contrast/cli/DIA_contrast.cpp	2009-11-19 18:25:06 UTC (rev 5526)
@@ -0,0 +1,38 @@
+/***************************************************************************
+                          DIA_contrast.cpp  -  description
+                             -------------------
+    begin                : Mon Sep 23 2002
+    copyright            : (C) 2002 by mean
+    email                : fixounet at free.fr
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+#include "ADM_default.h"
+#include "ADM_videoFilter.h"
+#include "ADM_vidContrast.h"
+
+
+#include "DIA_flyDialog.h"
+#include "DIA_flyContrast.h"
+/********************************************************************/
+uint8_t DIA_contrast(AVDMGenericVideoStream *in,CONTRAST_PARAM *param)
+{
+       return 1;
+}
+uint8_t flyContrast::upload(void)
+{
+    return 1;
+}
+uint8_t flyContrast::download (void)
+{
+   return 1;
+}
+//
+

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/Crop/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/Crop/CMakeLists.txt	2009-11-19 06:45:51 UTC (rev 5525)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/Crop/CMakeLists.txt	2009-11-19 18:25:06 UTC (rev 5526)
@@ -1,14 +1,13 @@
 INCLUDE(vf_plugin)
 
 
-SET(CropCommon_SRCS 
-ADM_vidCrop.cpp  DIA_flyCrop.cpp
-)
+SET(CropCommon_SRCS ADM_vidCrop.cpp  DIA_flyCrop.cpp)
 
 INCLUDE(vf_plugin_gtk)
 INCLUDE(vf_plugin_qt4)
 
 SET(CropGtk_SRCS gtk/DIA_crop.cpp)
+SET(CropCLI_SRCS cli/DIA_crop.cpp)
 SET(CropQT_SRCS  qt4/Q_crop.cpp)
 SET(CropQT_HEADERS  qt4/Q_crop.h)
 SET(CropQT_UI    qt4/crop)
@@ -17,4 +16,9 @@
                 ${CropQT_SRCS} ${CropQT_HEADERS} ${CropQT_UI} ${CropCommon_SRCS})
 INIT_VIDEOFILTER_PLUGIN_GTK(  ADM_vf_Crop_gtk 
                 ${CropGtk_SRCS} ${CropCommon_SRCS})
+#CLI
+INCLUDE (vf_plugin_cli)
+INIT_VIDEOFILTER_PLUGIN_CLI(ADM_vf_crop_cli ${CropCommon_SRCS} ${CropCLI_SRCS})
+INSTALL_VIDEOFILTER(ADM_vf_crop_cli)
+#CLI
 

Added: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/Crop/cli/DIA_crop.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/Crop/cli/DIA_crop.cpp	2009-11-19 06:45:51 UTC (rev 5525)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/Crop/cli/DIA_crop.cpp	2009-11-19 18:25:06 UTC (rev 5526)
@@ -0,0 +1,45 @@
+/***************************************************************************
+                          DIA_crop.cpp  -  description
+                             -------------------
+
+			    GUI for cropping including autocrop
+			    +Revisted the Gtk2 way
+			     +Autocrop now in RGB space (more accurate)
+
+    begin                : Fri May 3 2002
+    copyright            : (C) 2002/2007 by mean
+    email                : fixounet at free.fr
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+
+
+#include "ADM_image.h"
+#include "ADM_videoFilter.h"
+
+#include "DIA_flyDialog.h"
+#include "DIA_flyCrop.h"
+#include "ADM_vidCrop_param.h"
+
+int DIA_getCropParams(const char *name, CROP_PARAMS *param, AVDMGenericVideoStream *in)
+{
+	return 0;
+}
+
+//____________________________________
+uint8_t flyCrop::upload(void)
+{
+        return 1;
+}
+uint8_t flyCrop::download(void)
+{
+	return 1;
+}
+	

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/Eq2/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/Eq2/CMakeLists.txt	2009-11-19 06:45:51 UTC (rev 5525)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/Eq2/CMakeLists.txt	2009-11-19 18:25:06 UTC (rev 5526)
@@ -8,6 +8,7 @@
 INCLUDE(vf_plugin_gtk)
 INCLUDE(vf_plugin_qt4)
 
+SET(eq2CLI_SRCS cli/DIA_eq2.cpp)
 SET(eq2Gtk_SRCS gtk/DIA_eq2.cpp)
 SET(eq2QT_SRCS  qt4/Q_eq2.cpp)
 SET(eq2QT_HEADERS  qt4/Q_eq2.h)
@@ -17,4 +18,9 @@
                 ${eq2QT_SRCS} ${eq2QT_HEADERS} ${eq2QT_UI} ${eq2Common_SRCS})
 INIT_VIDEOFILTER_PLUGIN_GTK(  ADM_vf_eq2_gtk 
                 ${eq2Gtk_SRCS} ${eq2Common_SRCS})
+#CLI
+INCLUDE (vf_plugin_cli)
+INIT_VIDEOFILTER_PLUGIN_CLI(ADM_vf_eq2_cli ${eq2Common_SRCS} ${eq2CLI_SRCS})
+INSTALL_VIDEOFILTER(ADM_vf_eq2_cli)
+#CLI
 

Added: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/Eq2/cli/DIA_eq2.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/Eq2/cli/DIA_eq2.cpp	2009-11-19 06:45:51 UTC (rev 5525)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/Eq2/cli/DIA_eq2.cpp	2009-11-19 18:25:06 UTC (rev 5526)
@@ -0,0 +1,49 @@
+/***************************************************************************
+                           Fly-Ui for hue & sat
+
+    copyright            : (C) 2004/5/7 by mean
+    email                : fixounet at free.fr
+    
+    
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+#include "ADM_default.h"
+#include "DIA_flyDialog.h"
+
+
+#include "ADM_image.h"
+#include "ADM_videoFilter.h"
+
+#include "ADM_vidEq2.h"
+
+#include "DIA_flyEq2.h"
+
+/**
+ * 		\fn DIA_getEQ2Param
+ * 		\brief flyDialogGtk handling the mplayer EQ2 user Interface dialog.
+ */
+uint8_t DIA_getEQ2Param(Eq2_Param *param, AVDMGenericVideoStream *in)
+{
+       return 1;
+
+}
+/**************************************/
+
+uint8_t flyEq2::upload(void)
+{
+  return 1;
+}
+uint8_t flyEq2::download (void)
+{
+
+ return 1;
+}
+

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/Equalizer/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/Equalizer/CMakeLists.txt	2009-11-19 06:45:51 UTC (rev 5525)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/Equalizer/CMakeLists.txt	2009-11-19 18:25:06 UTC (rev 5526)
@@ -10,6 +10,7 @@
 INCLUDE_DIRECTORIES("${AVIDEMUX_SOURCE_DIR}/avidemux/ADM_libraries/ffmpeg")
 
 SET(equalizerGtk_SRCS gtk/DIA_equalizer.cpp)
+SET(equalizerCLI_SRCS cli/DIA_equalizer.cpp)
 SET(equalizerQT_SRCS  DIA_flyEqualiser.cpp  qt4/Q_equaliser.cpp  qt4/T_gridFrame.cpp  qt4/T_EqualiserPath.cpp)
 SET(equalizerQT_HEADERS  qt4/Q_equaliser.h  qt4/T_gridFrame.h  qt4/T_EqualiserPath.h)
 SET(equalizerQT_UI    qt4/equaliser)
@@ -17,4 +18,11 @@
 INIT_VIDEOFILTER_PLUGIN_GTK(  ADM_vf_equalizer_gtk 
                 ${equalizerGtk_SRCS} ${equalizerCommon_SRCS})
 INIT_VIDEOFILTER_PLUGIN_QT4(ADM_vf_equalizer_qt4 
-                "${equalizerQT_SRCS}" "${equalizerQT_HEADERS}" "${equalizerQT_UI}" "${equalizerCommon_SRCS}")
\ No newline at end of file
+                "${equalizerQT_SRCS}" "${equalizerQT_HEADERS}" "${equalizerQT_UI}" "${equalizerCommon_SRCS}")
+
+#CLI
+INCLUDE (vf_plugin_cli)
+INIT_VIDEOFILTER_PLUGIN_CLI(ADM_vf_equalizer_cli ${equalizerCommon_SRCS} ${equalizerCLI_SRCS})
+INSTALL_VIDEOFILTER(ADM_vf_equalizer_cli)
+#CLI
+

Added: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/Equalizer/cli/DIA_equalizer.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/Equalizer/cli/DIA_equalizer.cpp	2009-11-19 06:45:51 UTC (rev 5525)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/Equalizer/cli/DIA_equalizer.cpp	2009-11-19 18:25:06 UTC (rev 5526)
@@ -0,0 +1,38 @@
+
+//
+/***************************************************************************
+                          DIA_Equalizer
+                             -------------------
+
+			   Ui for equalizer, ugly
+
+    begin                : 30 Dec 2004
+    copyright            : (C) 2004/5 by mean
+    email                : fixounet at free.fr
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+#include <math.h>
+
+
+#include "ADM_image.h"
+#include "ADM_videoFilter.h"
+#include "ADM_vidEqualizer.h"
+#include "ADM_colorspace.h"
+//
+//	Video is in YV12 Colorspace
+//
+//
+uint8_t DIA_getEqualizer(EqualizerParam *param, AVDMGenericVideoStream *in)
+{
+	return 1;
+
+}
+

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/Hue/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/Hue/CMakeLists.txt	2009-11-19 06:45:51 UTC (rev 5525)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/Hue/CMakeLists.txt	2009-11-19 18:25:06 UTC (rev 5526)
@@ -8,6 +8,7 @@
 INCLUDE(vf_plugin_gtk)
 INCLUDE(vf_plugin_qt4)
 
+SET(HueCLI_SRCS cli/DIA_hue.cpp)
 SET(HueGtk_SRCS gtk/DIA_hue.cpp)
 SET(HueQT_SRCS  qt4/Q_hue.cpp)
 SET(HueQT_HEADERS  qt4/Q_hue.h)
@@ -17,4 +18,6 @@
                 ${HueQT_SRCS} ${HueQT_HEADERS} ${HueQT_UI} ${HueCommon_SRCS})
 INIT_VIDEOFILTER_PLUGIN_GTK(  ADM_vf_hue_gtk 
                 ${HueGtk_SRCS} ${HueCommon_SRCS})
+INIT_VIDEOFILTER_PLUGIN_CLI(ADM_vf_Hue_cli ${HueCommon_SRCS} ${HueCLI_SRCS})
+INSTALL_VIDEOFILTER(ADM_vf_Hue_cli)
 

Added: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/Hue/cli/DIA_hue.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/Hue/cli/DIA_hue.cpp	2009-11-19 06:45:51 UTC (rev 5525)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/Hue/cli/DIA_hue.cpp	2009-11-19 18:25:06 UTC (rev 5526)
@@ -0,0 +1,48 @@
+/**/
+/***************************************************************************
+                          DIA_hue
+                             -------------------
+
+			   Ui for hue & sat
+
+    begin                : 08 Apr 2005
+    copyright            : (C) 2004/7 by mean
+    email                : fixounet at free.fr
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+
+#include "DIA_flyDialog.h"
+#include "ADM_image.h"
+#include "ADM_videoFilter.h"
+#include "ADM_vidHue.h"
+
+#include "DIA_flyHue.h"
+/**
+      \fn DIA_getHue
+      \brief Handle Hue (fly)Dialog
+*/
+uint8_t DIA_getHue(Hue_Param *param, AVDMGenericVideoStream *in)
+{
+        return 1;
+}
+/**************************************/
+uint8_t flyHue::upload(void)
+{
+        return 1;
+}
+uint8_t flyHue::download (void)
+{
+        return 1;
+}
+
+
+
+

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/MPDelogo/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/MPDelogo/CMakeLists.txt	2009-11-19 06:45:51 UTC (rev 5525)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/MPDelogo/CMakeLists.txt	2009-11-19 18:25:06 UTC (rev 5526)
@@ -8,6 +8,7 @@
 INCLUDE(vf_plugin_gtk)
 INCLUDE(vf_plugin_qt4)
 
+SET(mpdelogoCLI_SRCS cli/DIA_mpdelogo.cpp )
 SET(mpdelogoGtk_SRCS gtk/DIA_mpdelogo.cpp )
 SET(mpdelogoQT_SRCS  qt4/Q_mpdelogo.cpp)
 SET(mpdelogoQT_HEADERS  qt4/Q_mpdelogo.h)
@@ -17,3 +18,9 @@
                 ${mpdelogoQT_SRCS} ${mpdelogoQT_HEADERS} ${mpdelogoQT_UI} ${mpdelogoCommon_SRCS})
 INIT_VIDEOFILTER_PLUGIN_GTK(  ADM_vf_mpdelogo_gtk 
                 ${mpdelogoGtk_SRCS} ${mpdelogoCommon_SRCS})
+#CLI
+INCLUDE (vf_plugin_cli)
+INIT_VIDEOFILTER_PLUGIN_CLI(ADM_vf_mpdelogo_cli ${mpdelogoCommon_SRCS} ${mpdelogoCLI_SRCS})
+INSTALL_VIDEOFILTER(ADM_vf_mpdelogo_cli)
+#CLI
+

Added: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/MPDelogo/cli/DIA_mpdelogo.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/MPDelogo/cli/DIA_mpdelogo.cpp	2009-11-19 06:45:51 UTC (rev 5525)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/MPDelogo/cli/DIA_mpdelogo.cpp	2009-11-19 18:25:06 UTC (rev 5526)
@@ -0,0 +1,44 @@
+/***************************************************************************
+                              DIA_mpdelogo.cpp
+                              ----------------
+
+                        GUI for MPlayer Delogo filter
+
+    begin                : Fri May 3 2002
+    copyright            : (C) 2002 by mean
+    email                : fixounet at free.fr
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+
+#include <math.h>
+#include "ADM_default.h"
+#include "ADM_image.h"
+#include "ADM_videoFilter.h"
+#include "ADM_colorspace.h"
+#include "ADM_vidMPdelogo.h"
+#include "DIA_flyDialog.h"
+#include "DIA_flyMpDelogo.h"
+
+uint8_t DIA_getMPdelogo(MPDELOGO_PARAM *param, AVDMGenericVideoStream *in)
+{
+	return 1;
+}
+
+uint8_t flyMpDelogo::download(void)
+{
+	return 1;
+}
+
+uint8_t flyMpDelogo::upload(void)
+{
+	return 1;
+}
+

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/Srt/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/Srt/CMakeLists.txt	2009-11-19 06:45:51 UTC (rev 5525)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/Srt/CMakeLists.txt	2009-11-19 18:25:06 UTC (rev 5526)
@@ -12,6 +12,7 @@
 	INCLUDE(vf_plugin_qt4)
 
 	SET(srtGtk_SRCS gtk/DIA_srt.cpp)
+	SET(srtCLI_SRCS cli/DIA_srt.cpp)
 	SET(srtQT_SRCS  qt4/Q_srt.cpp)
 	SET(srtQT_HEADERS  qt4/Q_srt.h)
 	SET(srtQT_UI    qt4/srt)
@@ -35,4 +36,10 @@
 	IF (QT4_FOUND)
 		ADD_TARGET_LDFLAGS(ADM_vf_sub_qt4 "${FREETYPE2_LDFLAGS} ${LIBICONV_LIBRARY_DIR}")
 	ENDIF (QT4_FOUND)
-ENDIF(USE_FREETYPE)
\ No newline at end of file
+#CLI
+	INCLUDE (vf_plugin_cli)
+	INIT_VIDEOFILTER_PLUGIN_CLI(ADM_vf_sub_cli ${srtCLI_SRCS} ${srtCommon_SRCS})
+	INSTALL_VIDEOFILTER(ADM_vf_sub_cli)
+	ADD_TARGET_LDFLAGS(ADM_vf_sub_cli "${FREETYPE2_LDFLAGS} ${LIBICONV_LIBRARY_DIR}")
+#CLI
+ENDIF(USE_FREETYPE)

Added: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/Srt/cli/DIA_srt.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/Srt/cli/DIA_srt.cpp	2009-11-19 06:45:51 UTC (rev 5525)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/Srt/cli/DIA_srt.cpp	2009-11-19 18:25:06 UTC (rev 5526)
@@ -0,0 +1,45 @@
+/***************************************************************************
+                          ADM_guiSRT.cpp  -  description
+                             -------------------
+    begin                : Wed Dec 18 2002
+    copyright            : (C) 2002 by mean
+    email                : fixounet at free.fr
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+#include "DIA_flyDialog.h"
+
+
+#include "DIA_fileSel.h"
+
+#include "ADM_videoFilter.h"
+
+class ADMfont;
+#include "ADM_vidSRT.h"
+#include "DIA_flySrtPos.h"
+#include "ADM_colorspace.h"
+
+/**
+      \fn DIA_srtPos
+      \brief Dialog that handles subtitle size and position
+*/
+int DIA_srtPos(AVDMGenericVideoStream *in,uint32_t *size,uint32_t *position)
+{
+	return 1;
+}
+
+uint8_t    flySrtPos::upload(void)
+{
+        return 1;
+}
+uint8_t    flySrtPos::download(void)
+{
+        return 1;
+}

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/colorYUV/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/colorYUV/CMakeLists.txt	2009-11-19 06:45:51 UTC (rev 5525)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/colorYUV/CMakeLists.txt	2009-11-19 18:25:06 UTC (rev 5526)
@@ -9,6 +9,7 @@
 INCLUDE(vf_plugin_qt4)
 
 SET(colorYUVGtk_SRCS gtk/DIA_coloryuv.cpp)
+SET(colorYUVCLI_SRCS cli/DIA_coloryuv.cpp)
 SET(colorYUVQT_SRCS  qt4/Q_coloryuv.cpp)
 SET(colorYUVQT_HEADERS  qt4/Q_coloryuv.h)
 SET(colorYUVQT_UI    qt4/coloryuv)
@@ -16,4 +17,9 @@
 INIT_VIDEOFILTER_PLUGIN_GTK(  ADM_vf_colorYUV_gtk 
                 ${colorYUVGtk_SRCS} ${colorYUVCommon_SRCS})
 INIT_VIDEOFILTER_PLUGIN_QT4(ADM_vf_colorYUV_qt4 
-                ${colorYUVQT_SRCS} ${colorYUVQT_HEADERS} ${colorYUVQT_UI} ${colorYUVCommon_SRCS})
\ No newline at end of file
+                ${colorYUVQT_SRCS} ${colorYUVQT_HEADERS} ${colorYUVQT_UI} ${colorYUVCommon_SRCS})
+#CLI
+INCLUDE (vf_plugin_cli)
+INIT_VIDEOFILTER_PLUGIN_CLI(ADM_vf_colorYUV_cli ${colorYUVCommon_SRCS} ${colorYUVCLI_SRCS})
+INSTALL_VIDEOFILTER(ADM_vf_colorYUV_cli)
+#CLI

Added: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/colorYUV/cli/DIA_coloryuv.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/colorYUV/cli/DIA_coloryuv.cpp	2009-11-19 06:45:51 UTC (rev 5525)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/colorYUV/cli/DIA_coloryuv.cpp	2009-11-19 18:25:06 UTC (rev 5526)
@@ -0,0 +1,12 @@
+/*
+ * DO NOT EDIT THIS FILE - it is generated by Glade.
+ */
+
+#include "ADM_vidColorYuv_param.h"
+
+int DIA_coloryuv(COLOR_YUV_PARAM *param)
+{
+    int ret=0;
+    return ret;
+}
+    



From mean at mail.berlios.de  Thu Nov 19 20:31:22 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Thu, 19 Nov 2009 20:31:22 +0100
Subject: [Avidemux-svn-commit] r5528 -
	branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoEncoder/src
Message-ID: <200911191931.nAJJVMmi008824@sheep.berlios.de>

Author: mean
Date: 2009-11-19 20:31:22 +0100 (Thu, 19 Nov 2009)
New Revision: 5528

Modified:
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoEncoder/src/ADM_dynVideoEncoder.cpp
Log:
[Encoder] Fix crash when encoder has no configuration (copy)

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoEncoder/src/ADM_dynVideoEncoder.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoEncoder/src/ADM_dynVideoEncoder.cpp	2009-11-19 19:31:20 UTC (rev 5527)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoEncoder/src/ADM_dynVideoEncoder.cpp	2009-11-19 19:31:22 UTC (rev 5528)
@@ -261,6 +261,12 @@
 {
     ADM_assert(currentVideoCodec<ListOfEncoders.size());
     ADM_videoEncoder6 *e=ListOfEncoders[currentVideoCodec];
+    if(!e->desc->getConfigurationData)
+    {
+        ADM_warning("No configuration data for this encoder\n");
+        *c=NULL;
+        return true;
+    }
     return e->desc->getConfigurationData(c);
 }
 /**



From mean at mail.berlios.de  Thu Nov 19 20:31:20 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Thu, 19 Nov 2009 20:31:20 +0100
Subject: [Avidemux-svn-commit] r5527 -
	branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_dialog
Message-ID: <200911191931.nAJJVKok008810@sheep.berlios.de>

Author: mean
Date: 2009-11-19 20:31:20 +0100 (Thu, 19 Nov 2009)
New Revision: 5527

Modified:
   branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_dialog/Q_working.cpp
Log:
[Qt4] Make the working window modal

Modified: branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_dialog/Q_working.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_dialog/Q_working.cpp	2009-11-19 18:25:06 UTC (rev 5526)
+++ branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_dialog/Q_working.cpp	2009-11-19 19:31:20 UTC (rev 5527)
@@ -24,6 +24,7 @@
  {
      ui.setupUi(this);
      active=true;
+     setWindowModality (Qt::ApplicationModal);
      connect( ui.buttonCancel,SIGNAL(clicked(bool)),this,SLOT(stop(bool)));
  }
  void workWindow::stop(bool a) 



From gruntster at mail.berlios.de  Thu Nov 19 21:07:34 2009
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Thu, 19 Nov 2009 21:07:34 +0100
Subject: [Avidemux-svn-commit] r5529 -
	branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_CLI/include
Message-ID: <200911192007.nAJK7Yf3012077@sheep.berlios.de>

Author: gruntster
Date: 2009-11-19 21:07:27 +0100 (Thu, 19 Nov 2009)
New Revision: 5529

Modified:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_CLI/include/DIA_flyDialogCli.h
Log:
[build] compilation fix

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_CLI/include/DIA_flyDialogCli.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_CLI/include/DIA_flyDialogCli.h	2009-11-19 19:31:22 UTC (rev 5528)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_CLI/include/DIA_flyDialogCli.h	2009-11-19 20:07:27 UTC (rev 5529)
@@ -24,6 +24,7 @@
                               void *canvas, void *slider, int yuv, ResizeMethod resizeMethod):
                                 ADM_flyDialog(width,height,in,canvas,slider,yuv,resizeMethod) {};
 
+  virtual ~ADM_flyDialogCli(void);
   //virtual uint8_t  cleanup2(void);
   virtual uint8_t  isRgbInverted(void);
   virtual uint8_t  display(void);



From gruntster at mail.berlios.de  Thu Nov 19 23:18:00 2009
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Thu, 19 Nov 2009 23:18:00 +0100
Subject: [Avidemux-svn-commit] r5530 - in
	branches/avidemux_2.5_branch_gruntster:
	avidemux/ADM_UIs/ADM_CLI/include avidemux/ADM_UIs/ADM_CLI/src cmake
Message-ID: <200911192218.nAJMI0eK025688@sheep.berlios.de>

Author: gruntster
Date: 2009-11-19 23:17:52 +0100 (Thu, 19 Nov 2009)
New Revision: 5530

Modified:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_CLI/include/DIA_flyDialogCli.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_CLI/src/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/cmake/vf_plugin_cli.cmake
Log:
[build] compilation fix

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_CLI/include/DIA_flyDialogCli.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_CLI/include/DIA_flyDialogCli.h	2009-11-19 20:07:27 UTC (rev 5529)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_CLI/include/DIA_flyDialogCli.h	2009-11-19 22:17:52 UTC (rev 5530)
@@ -24,7 +24,6 @@
                               void *canvas, void *slider, int yuv, ResizeMethod resizeMethod):
                                 ADM_flyDialog(width,height,in,canvas,slider,yuv,resizeMethod) {};
 
-  virtual ~ADM_flyDialogCli(void);
   //virtual uint8_t  cleanup2(void);
   virtual uint8_t  isRgbInverted(void);
   virtual uint8_t  display(void);

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_CLI/src/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_CLI/src/CMakeLists.txt	2009-11-19 20:07:27 UTC (rev 5529)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_CLI/src/CMakeLists.txt	2009-11-19 22:17:52 UTC (rev 5530)
@@ -8,5 +8,6 @@
 )
 INCLUDE_DIRECTORIES(${CMAKE_CURRENT_SOURCE_DIR}/../include)
 ADD_LIBRARY(${ADM_LIB}  SHARED ${${ADM_LIB}_SRCS})
+TARGET_LINK_LIBRARIES(${ADM_LIB} ADM_coreImage)
 ADD_SOURCE_CFLAGS(DIA_flyDialogCli.cpp " -DADM_UI_TYPE_BUILD=1")
 INSTALL(TARGETS ${ADM_LIB} RUNTIME DESTINATION ${BIN_DIR}  LIBRARY DESTINATION lib${LIB_SUFFIX}  ARCHIVE DESTINATION lib${LIB_SUFFIX})

Modified: branches/avidemux_2.5_branch_gruntster/cmake/vf_plugin_cli.cmake
===================================================================
--- branches/avidemux_2.5_branch_gruntster/cmake/vf_plugin_cli.cmake	2009-11-19 20:07:27 UTC (rev 5529)
+++ branches/avidemux_2.5_branch_gruntster/cmake/vf_plugin_cli.cmake	2009-11-19 22:17:52 UTC (rev 5530)
@@ -3,6 +3,7 @@
 ADD_LIBRARY(${lib} SHARED ${ARGN} ${_srcsCli})
 INCLUDE_DIRECTORIES(${AVIDEMUX_SOURCE_DIR}/avidemux/ADM_UIs/ADM_CLI/include/)
 ADD_TARGET_CFLAGS(${lib} "-DADM_UI_TYPE_BUILD=1")
+TARGET_LINK_LIBRARIES(${lib} ADM_UICli)
 INIT_VIDEOFILTER_PLUGIN(${lib})
 INSTALL_VIDEOFILTER(${lib})
 ENDMACRO(INIT_VIDEOFILTER_PLUGIN_CLI)



From mean at mail.berlios.de  Fri Nov 20 07:40:37 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Fri, 20 Nov 2009 07:40:37 +0100
Subject: [Avidemux-svn-commit] r5531 -
	branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreMuxer/src
Message-ID: <200911200640.nAK6ebrT017726@sheep.berlios.de>

Author: mean
Date: 2009-11-20 07:40:35 +0100 (Fri, 20 Nov 2009)
New Revision: 5531

Modified:
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreMuxer/src/ADM_coreMuxerFfmpeg.cpp
Log:
[ffMuxer] Assume about correct interleaving is done by muxer

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreMuxer/src/ADM_coreMuxerFfmpeg.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreMuxer/src/ADM_coreMuxerFfmpeg.cpp	2009-11-19 22:17:52 UTC (rev 5530)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreMuxer/src/ADM_coreMuxerFfmpeg.cpp	2009-11-20 06:40:35 UTC (rev 5531)
@@ -376,7 +376,7 @@
             pkt.size= len;
             if(flags & 0x10) // FIXME AVI_KEY_FRAME
                         pkt.flags |= PKT_FLAG_KEY;
-            ret =av_interleaved_write_frame(oc, &pkt);
+            ret =av_write_frame(oc, &pkt);
             aprintf("[FF]Frame:%u, DTS=%08lu PTS=%08lu\n",written,dts,pts);
             if(ret)
             {
@@ -409,7 +409,7 @@
                     pkt.stream_index=1+audio;
                     pkt.data= audioBuffer;
                     pkt.size= audioSize;
-                    ret =av_interleaved_write_frame(oc, &pkt);
+                    ret =av_write_frame(oc, &pkt);
                     if(ret)
                     {
                         printf("[FF]Error writing audio packet\n");



From mean at mail.berlios.de  Fri Nov 20 20:17:10 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Fri, 20 Nov 2009 20:17:10 +0100
Subject: [Avidemux-svn-commit] r5532 -
	branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_mp4
Message-ID: <200911201917.nAKJHAr1021291@sheep.berlios.de>

Author: mean
Date: 2009-11-20 20:17:10 +0100 (Fri, 20 Nov 2009)
New Revision: 5532

Modified:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_mp4/ADM_mp4.cpp
Log:
[mov] Dont close the file twice in case of error

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_mp4/ADM_mp4.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_mp4/ADM_mp4.cpp	2009-11-20 06:40:35 UTC (rev 5531)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_mp4/ADM_mp4.cpp	2009-11-20 19:17:10 UTC (rev 5532)
@@ -245,6 +245,7 @@
         {
           printf("Cannot find needed atom\n");
           fclose(_fd);
+          _fd=NULL;
 		  delete atom;
           return 0;
         }



From mean at mail.berlios.de  Fri Nov 20 21:15:14 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Fri, 20 Nov 2009 21:15:14 +0100
Subject: [Avidemux-svn-commit] r5533 -
	branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_mp4
Message-ID: <200911202015.nAKKFEld025989@sheep.berlios.de>

Author: mean
Date: 2009-11-20 21:15:14 +0100 (Fri, 20 Nov 2009)
New Revision: 5533

Modified:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_mp4/ADM_mp4.cpp
Log:
[qt] fix kino files reading

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_mp4/ADM_mp4.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_mp4/ADM_mp4.cpp	2009-11-20 19:17:10 UTC (rev 5532)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_mp4/ADM_mp4.cpp	2009-11-20 20:15:14 UTC (rev 5533)
@@ -220,19 +220,26 @@
         // detect and workaround...
         // Check it is not mdat start(ADM_memcpy_0)     
         uint8_t check[4];
+        uint64_t fileSize;
+        fseeko(_fd,0,SEEK_END);
+        fileSize=ftello(_fd);
         fseeko(_fd,4,SEEK_SET);
         fread(check,4,1,_fd);
         fseeko(_fd,0,SEEK_SET);
         if(check[0]=='m' && check[1]=='d' &&check[2]=='a' && check[3]=='t')
         {
                         uint64_t of;
+                        uint64_t hi,lo;
                                         printf("Data first, header later...\n");
                                         of=atom->read32();
                                         if(of==1)
                                         {
                                           atom->read32();	// size
                                           atom->read32();	// fcc
-                                          of=atom->read64();
+                                          hi=atom->read32();
+                                          lo=atom->read32();
+                                          of=(hi<<32)+lo;
+                                          if(of>fileSize) of=hi;
                                         }
                                         fseeko(_fd,of,SEEK_SET);        
                                         printf("Header starts at %x\n",of);



From mean at mail.berlios.de  Fri Nov 20 21:16:20 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Fri, 20 Nov 2009 21:16:20 +0100
Subject: [Avidemux-svn-commit] r5534 -
	branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/Mp4
Message-ID: <200911202016.nAKKGK7b026067@sheep.berlios.de>

Author: mean
Date: 2009-11-20 21:16:20 +0100 (Fri, 20 Nov 2009)
New Revision: 5534

Modified:
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/Mp4/ADM_mp4.cpp
Log:
[qt4] fix kino mov readin (2.6)

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/Mp4/ADM_mp4.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/Mp4/ADM_mp4.cpp	2009-11-20 20:15:14 UTC (rev 5533)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/Mp4/ADM_mp4.cpp	2009-11-20 20:16:20 UTC (rev 5534)
@@ -266,19 +266,26 @@
         // detect and workaround...
         // Check it is not mdat start(ADM_memcpy_0)
         uint8_t check[4];
+        uint64_t fileSize;
+        fseeko(_fd,0,SEEK_END);
+        fileSize=ftello(_fd);
         fseeko(_fd,4,SEEK_SET);
         fread(check,4,1,_fd);
         fseeko(_fd,0,SEEK_SET);
         if(check[0]=='m' && check[1]=='d' &&check[2]=='a' && check[3]=='t')
         {
                         uint64_t of;
+                        uint64_t hi,lo;
                                         printf("Data first, header later...\n");
                                         of=atom->read32();
                                         if(of==1)
                                         {
                                           atom->read32();	// size
                                           atom->read32();	// fcc
-                                          of=atom->read64();
+                                          hi=atom->read32();
+                                          lo=atom->read32();
+                                          of=(hi<<32)+lo;
+                                          if(of>fileSize) of=hi;
                                         }
                                         fseeko(_fd,of,SEEK_SET);
                                         printf("Header starts at %"LLX"\n",of);



From mean at mail.berlios.de  Fri Nov 20 21:19:14 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Fri, 20 Nov 2009 21:19:14 +0100
Subject: [Avidemux-svn-commit] r5535 -
	branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/Mp4
Message-ID: <200911202019.nAKKJEYp026244@sheep.berlios.de>

Author: mean
Date: 2009-11-20 21:19:14 +0100 (Fri, 20 Nov 2009)
New Revision: 5535

Modified:
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/Mp4/ADM_mp4.cpp
Log:
[qt4] dont double close mov when failed to read moov

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/Mp4/ADM_mp4.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/Mp4/ADM_mp4.cpp	2009-11-20 20:16:20 UTC (rev 5534)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/Mp4/ADM_mp4.cpp	2009-11-20 20:19:14 UTC (rev 5535)
@@ -298,6 +298,7 @@
         {
           printf("Cannot find needed atom\n");
           fclose(_fd);
+          _fd=NULL;
 		  delete atom;
           return 0;
         }



From mean at mail.berlios.de  Sat Nov 21 09:17:03 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sat, 21 Nov 2009 09:17:03 +0100
Subject: [Avidemux-svn-commit] r5536 -
	branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiocodec
Message-ID: <200911210817.nAL8H3d8022542@sheep.berlios.de>

Author: mean
Date: 2009-11-21 09:17:03 +0100 (Sat, 21 Nov 2009)
New Revision: 5536

Modified:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiocodec/ADM_codecwma.cpp
Log:
[avcodec] Set codec type for audio to avoid crash

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiocodec/ADM_codecwma.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiocodec/ADM_codecwma.cpp	2009-11-20 20:19:14 UTC (rev 5535)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiocodec/ADM_codecwma.cpp	2009-11-21 08:17:03 UTC (rev 5536)
@@ -60,6 +60,7 @@
     _channels=info->channels;
     _blockalign=_context->block_align = info->blockalign;
     _context->bit_rate = info->byterate*8;
+    _context->codec_type=CODEC_TYPE_AUDIO;
     switch(fourcc)
     {
       case WAV_WMA:



From mean at mail.berlios.de  Sat Nov 21 10:27:51 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sat, 21 Nov 2009 10:27:51 +0100
Subject: [Avidemux-svn-commit] r5537 - branches/avidemux_2.6_branch_mean
Message-ID: <200911210927.nAL9Rphs005467@sheep.berlios.de>

Author: mean
Date: 2009-11-21 10:27:51 +0100 (Sat, 21 Nov 2009)
New Revision: 5537

Modified:
   branches/avidemux_2.6_branch_mean/bootStrapCrossMingw_w32.sh
Log:
[crossWin32] Update to Qt 4.5.3

Modified: branches/avidemux_2.6_branch_mean/bootStrapCrossMingw_w32.sh
===================================================================
--- branches/avidemux_2.6_branch_mean/bootStrapCrossMingw_w32.sh	2009-11-21 08:17:03 UTC (rev 5536)
+++ branches/avidemux_2.6_branch_mean/bootStrapCrossMingw_w32.sh	2009-11-21 09:27:51 UTC (rev 5537)
@@ -4,7 +4,7 @@
 export CROSS_PREFIX=i686-w64-mingw32
 export SDLDIR=/mingw
 export MINGW=/mingw
-export QT_HOME=/mingw/Qt/4.5.2
+export QT_HOME=/mingw/Qt/4.5.3
 # ** Put your config here **
 
 fail()



From mean at mail.berlios.de  Sun Nov 22 10:14:43 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sun, 22 Nov 2009 10:14:43 +0100
Subject: [Avidemux-svn-commit] r5538 - branches/avidemux_2.6_branch_mean
Message-ID: <200911220914.nAM9EhLc001792@sheep.berlios.de>

Author: mean
Date: 2009-11-22 10:14:43 +0100 (Sun, 22 Nov 2009)
New Revision: 5538

Modified:
   branches/avidemux_2.6_branch_mean/bootStrap.bash
Log:
[Build] Improved bootstrap

Modified: branches/avidemux_2.6_branch_mean/bootStrap.bash
===================================================================
--- branches/avidemux_2.6_branch_mean/bootStrap.bash	2009-11-21 09:27:51 UTC (rev 5537)
+++ branches/avidemux_2.6_branch_mean/bootStrap.bash	2009-11-22 09:14:43 UTC (rev 5538)
@@ -1,5 +1,8 @@
 #!/bin/bash
-
+do_core=1
+do_gtk=1
+do_qt4=0
+do_plugins=1
 fail()
 {
         echo "** Failed at $1**"
@@ -18,24 +21,106 @@
         make -j 2 > /tmp/log$BUILDDIR || fail make
         fakeroot make package DESTDIR=debPack || fail package
 }
+printModule()
+{
+        value=$1
+        name=$2
+        if [ "x$value" = "x1" ]; then echo "    $name will be built"
+        else echo "     $name will be skipped"
+        fi
+        
 
+}
+config()
+{
+        echo "Build configuration :"
+        echo "******************* :"
+        printModule $do_core Core
+        printModule $do_gtk Gtk
+        printModule $do_qt4 Qt4
+        printModule $do_plugins Plugins
+}
+usage()
+{
+        echo "Bootstrap avidemux 2.6:"
+        echo "***********************"
+        echo "  --help            : Print usage"
+        echo "  --with-core       : Build core"
+        echo "  --without-core    : Dont build core"
+        echo "  --with-gtk        : Build gtk"
+        echo "  --without-gtk     : Dont build gtk"
+        echo "  --with-core       : Build core"
+        echo "  --without-qt4     : Dont build qt4"
+        echo "  --with-plugins    : Build plugins"
+        echo "  --without-plugins : Dont build plugins"
+        config 
+
+}
+# Could probably do it with getopts...
+while [ $# != 0 ] ;do
+        case "$1" in
+         -h|--help)
+             usage
+             exit 1
+             ;;
+         --without-qt4)
+                do_qt4=0
+             ;;
+         --without-gtk)
+                do_gtk=0
+             ;;
+         --without-plugins)
+                do_plugins=0
+             ;;
+         --without-core)
+                do_core=0
+             ;;
+         --with-qt4)
+                do_qt4=1
+             ;;
+         --with-gtk)
+                do_gtk=1
+             ;;
+         --with-plugins)
+                do_plugins=1
+             ;;
+         --with-core)
+                do_core=1
+             ;;
+        *)
+                echo "unknown parameter $1"
+                usage
+                exit 1
+                ;;
+     esac
+     shift
+done
+config
 echo "**BootStrapping avidemux **"
 export TOP=$PWD
 echo "Top dir : $TOP"
-echo "** CORE **"
-cd $TOP
-Process buildCore ../avidemux_core
-echo " Core needs to be installed, installing through sudo make install ...."
-cd $TOP/buildCore && sudo make install
-echo "** QT4 **"
-cd $TOP
-#Process buildQt4 ../avidemux/qt4
-echo "** GTK **"
-cd $TOP
-Process buildGtk ../avidemux/gtk
-echo "** Plugins **"
-cd $TOP
-Process buildPlugins ../avidemux_plugins
+if [ "x$do_core" = "x1" ] ; then 
+        echo "** CORE **"
+        cd $TOP
+        Process buildCore ../avidemux_core
+        echo " Core needs to be installed, installing through sudo make install ...."
+        cd $TOP/buildCore && sudo make install
+fi
+if [ "x$do_qt4" = "x1" ] ; then 
+        echo "** QT4 **"
+        cd $TOP
+        Process buildQt4 ../avidemux/qt4
+fi
+if [ "x$do_qt4" = "x1" ] ; then 
+        echo "** GTK **"
+        cd $TOP
+        Process buildGtk ../avidemux/gtk
+fi
+if [ "x$do_plugins" = "x1" ] ; then 
+        echo "** Plugins **"
+        cd $TOP
+        Process buildPlugins ../avidemux_plugins
+fi
 echo "** Preparing debs **"
 cd $TOP
 rm -Rf debs



From mean at mail.berlios.de  Sun Nov 22 10:18:36 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sun, 22 Nov 2009 10:18:36 +0100
Subject: [Avidemux-svn-commit] r5539 -
	branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/MplayerResize/cli
Message-ID: <200911220918.nAM9Ia5K002048@sheep.berlios.de>

Author: mean
Date: 2009-11-22 10:18:36 +0100 (Sun, 22 Nov 2009)
New Revision: 5539

Modified:
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/MplayerResize/cli/cli_resize.cpp
Log:
[filter] mplayer_cli does not need gtk

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/MplayerResize/cli/cli_resize.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/MplayerResize/cli/cli_resize.cpp	2009-11-22 09:14:43 UTC (rev 5538)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/MplayerResize/cli/cli_resize.cpp	2009-11-22 09:18:36 UTC (rev 5539)
@@ -13,7 +13,6 @@
  ***************************************************************************/
 #include <math.h>
 
-#include "ADM_toolkitGtk.h"
 #include "ADM_default.h"
 #define aprintf(...) {}
 



From gruntster at mail.berlios.de  Mon Nov 23 19:37:42 2009
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Mon, 23 Nov 2009 19:37:42 +0100
Subject: [Avidemux-svn-commit] r5540 - in
	branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder:
	ADM_vidEnc_x264 common
Message-ID: <200911231837.nANIbgSV027235@sheep.berlios.de>

Author: gruntster
Date: 2009-11-23 19:37:37 +0100 (Mon, 23 Nov 2009)
New Revision: 5540

Modified:
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/x264Options.cpp
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/common/PluginXmlOptions.cpp
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/common/PluginXmlOptions.h
Log:
[x264] locale neutral parsing

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/x264Options.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/x264Options.cpp	2009-11-22 09:18:36 UTC (rev 5539)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/x264Options.cpp	2009-11-23 18:37:37 UTC (rev 5540)
@@ -22,7 +22,7 @@
  ***************************************************************************/
 
 #include <math.h>
-#include <locale.h>
+#include <locale.h>
 #include <libxml/parser.h>
 #include <libxml/xmlschemas.h>
 
@@ -1351,8 +1351,6 @@
 
 void x264Options::parseOptions(xmlNode *node)
 {
-    char *curLocale = setlocale(LC_NUMERIC, "C");
-
 	for (xmlNode *xmlChild = node->children; xmlChild; xmlChild = xmlChild->next)
 	{
 		if (xmlChild->type == XML_ELEMENT_NODE)
@@ -1464,8 +1462,6 @@
 			xmlFree(content);
 		}
 	}
-
-    setlocale(LC_NUMERIC, curLocale);
 }
 
 void x264Options::parseVuiOptions(xmlNode *node)
@@ -1748,17 +1744,17 @@
 			else if (strcmp((char*)xmlChild->name, "quantiserStep") == 0)
 				setQuantiserStep(atoi(content));
 			else if (strcmp((char*)xmlChild->name, "averageBitrateTolerance") == 0)
-				setAverageBitrateTolerance(atof(content));
+				setAverageBitrateTolerance(string2Float(content));
 			else if (strcmp((char*)xmlChild->name, "vbvMaximumBitrate") == 0)
 				setVbvMaximumBitrate(atoi(content));
 			else if (strcmp((char*)xmlChild->name, "vbvBufferSize") == 0)
 				setVbvBufferSize(atoi(content));
 			else if (strcmp((char*)xmlChild->name, "vbvInitialOccupancy") == 0)
-				setVbvInitialOccupancy(atof(content));
+				setVbvInitialOccupancy(string2Float(content));
 			else if (strcmp((char*)xmlChild->name, "ipFrameQuantiser") == 0)
-				setIpFrameQuantiser(atof(content));
+				setIpFrameQuantiser(string2Float(content));
 			else if (strcmp((char*)xmlChild->name, "pbFrameQuantiser") == 0)
-				setPbFrameQuantiser(atof(content));
+				setPbFrameQuantiser(string2Float(content));
 #if X264_BUILD >= 62
 			else if (strcmp((char*)xmlChild->name, "adaptiveQuantiserMode") == 0)
 			{
@@ -1772,14 +1768,14 @@
 				setAdaptiveQuantiserMode(adaptiveQuantiserMode);
 			}
 			else if (strcmp((char*)xmlChild->name, "adaptiveQuantiserStrength") == 0)
-				setAdaptiveQuantiserStrength(atof(content));
+				setAdaptiveQuantiserStrength(string2Float(content));
 #endif
 			else if (strcmp((char*)xmlChild->name, "quantiserCurveCompression") == 0)
-				setQuantiserCurveCompression(atof(content));
+				setQuantiserCurveCompression(string2Float(content));
 			else if (strcmp((char*)xmlChild->name, "reduceFluxBeforeCurveCompression") == 0)
-				setReduceFluxBeforeCurveCompression(atof(content));
+				setReduceFluxBeforeCurveCompression(string2Float(content));
 			else if (strcmp((char*)xmlChild->name, "reduceFluxAfterCurveCompression") == 0)
-				setReduceFluxAfterCurveCompression(atof(content));
+				setReduceFluxAfterCurveCompression(string2Float(content));
 			else if (strcmp((char*)xmlChild->name, "zone") == 0)
 				parseZoneOptions(xmlChild);
 			else
@@ -1805,7 +1801,7 @@
 		else if (strcmp((char*)xmlChild->name, "quantiser") == 0)
 			option.setQuantiser(atoi(content));
 		else if (strcmp((char*)xmlChild->name, "bitrateFactor") == 0)
-			option.setBitrateFactor((int)floor(atof(content) * 100 + .5));
+			option.setBitrateFactor((int)floor(string2Float(content) * 100 + .5));
 
 		xmlFree(content);
 	}

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/common/PluginXmlOptions.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/common/PluginXmlOptions.cpp	2009-11-22 09:18:36 UTC (rev 5539)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/common/PluginXmlOptions.cpp	2009-11-23 18:37:37 UTC (rev 5540)
@@ -70,11 +70,21 @@
 	return buffer;
 }
 
-bool PluginXmlOptions::string2Boolean(char *buffer)
+bool PluginXmlOptions::string2Boolean(const char *buffer)
 {
 	return (strcmp(buffer, "true") == 0);
 }
 
+float PluginXmlOptions::string2Float(const char *buffer)
+{
+	std::istringstream stream(buffer);
+	float value;
+
+	stream >> value;
+
+	return value;
+}
+
 char* PluginXmlOptions::dumpXmlDocToMemory(xmlDocPtr xmlDoc)
 {
 	xmlChar *tempBuffer;

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/common/PluginXmlOptions.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/common/PluginXmlOptions.h	2009-11-22 09:18:36 UTC (rev 5539)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/common/PluginXmlOptions.h	2009-11-23 18:37:37 UTC (rev 5540)
@@ -31,7 +31,9 @@
 	xmlChar* number2String(xmlChar *buffer, size_t size, unsigned int number);
 	xmlChar* number2String(xmlChar *buffer, size_t size, float number);
 	xmlChar* boolean2String(xmlChar *buffer, size_t size, bool boolean);
-	bool string2Boolean(char *buffer);
+	
+	bool string2Boolean(const char *buffer);
+	float string2Float(const char *buffer);
 
 	virtual char* dumpXmlDocToMemory(xmlDocPtr xmlDoc);
 	virtual bool validateXml(xmlDocPtr doc, const char* schemaFile);



From gruntster at mail.berlios.de  Mon Nov 23 19:54:57 2009
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Mon, 23 Nov 2009 19:54:57 +0100
Subject: [Avidemux-svn-commit] r5541 -
	branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/AvisynthResize
Message-ID: <200911231854.nANIsvAe032397@sheep.berlios.de>

Author: gruntster
Date: 2009-11-23 19:54:53 +0100 (Mon, 23 Nov 2009)
New Revision: 5541

Modified:
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/AvisynthResize/CMakeLists.txt
Log:
[resize] keep same name for cli filter library

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/AvisynthResize/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/AvisynthResize/CMakeLists.txt	2009-11-23 18:37:37 UTC (rev 5540)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/AvisynthResize/CMakeLists.txt	2009-11-23 18:54:53 UTC (rev 5541)
@@ -17,6 +17,6 @@
                 ${resizeCommonGtk_SRCS} ${avisynthResizeCommon_SRCS})
 #CLI
 INCLUDE (vf_plugin_cli)
-INIT_VIDEOFILTER_PLUGIN_CLI(ADM_vf_resize_cli ${avisynthResizeCommon_SRCS}  ${resizeCLI_SRCS})
-INSTALL_VIDEOFILTER(ADM_vf_resize_cli)
+INIT_VIDEOFILTER_PLUGIN_CLI(ADM_vf_avisynthResize_cli ${avisynthResizeCommon_SRCS}  ${resizeCLI_SRCS})
+INSTALL_VIDEOFILTER(ADM_vf_avisynthResize_cli)
 #CLI



From mean at mail.berlios.de  Mon Nov 23 19:59:59 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Mon, 23 Nov 2009 19:59:59 +0100
Subject: [Avidemux-svn-commit] r5543 - in
	branches/avidemux_2.6_branch_mean/avidemux_core:
	ADM_coreImage/src ADM_ffmpeg/ffmpeg_config ADM_ffmpeg/libswscale
Message-ID: <200911231859.nANIxxqZ032743@sheep.berlios.de>

Author: mean
Date: 2009-11-23 19:59:59 +0100 (Mon, 23 Nov 2009)
New Revision: 5543

Modified:
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreImage/src/ADM_imageResizer.cpp
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreImage/src/ADM_rgb.cpp
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/ffmpeg_config/config.h
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/ffmpeg_config/ffconf.c
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libswscale/CMakeLists.txt
Log:
[FFmpeg] Update wrapper

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreImage/src/ADM_imageResizer.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreImage/src/ADM_imageResizer.cpp	2009-11-23 18:59:44 UTC (rev 5542)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreImage/src/ADM_imageResizer.cpp	2009-11-23 18:59:59 UTC (rev 5543)
@@ -65,9 +65,9 @@
 #endif
 
 	_context = (void *)sws_getContext(orgWidth, orgHeight,
-									  srcFormat,
+									  (PixelFormat)srcFormat,
 									  destWidth, destHeight,
-									  destFormat,
+									  (PixelFormat)destFormat,
 									  flags, NULL, NULL,NULL);
 }
 

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreImage/src/ADM_rgb.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreImage/src/ADM_rgb.cpp	2009-11-23 18:59:44 UTC (rev 5542)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreImage/src/ADM_rgb.cpp	2009-11-23 18:59:59 UTC (rev 5543)
@@ -345,7 +345,7 @@
 
          _context=(void *)sws_getContext(
 				    		ww,hh,
-						c ,
+						(PixelFormat)c ,
 		 				ww,hh,
 	   					PIX_FMT_YUV420P,
 	    					flags, NULL, NULL,NULL);
@@ -502,7 +502,7 @@
     }
          _context=(void *)sws_getContext(
                                                 ww,hh,
-                                                c ,
+                                                (PixelFormat)c ,
                                                 ww,hh,
                                                 PIX_FMT_YUV420P,
                                                 flags, NULL, NULL,NULL);

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/ffmpeg_config/config.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/ffmpeg_config/config.h	2009-11-23 18:59:44 UTC (rev 5542)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/ffmpeg_config/config.h	2009-11-23 18:59:59 UTC (rev 5543)
@@ -405,6 +405,7 @@
 #define CONFIG_MPEG2SVCD_MUXER 1
 #define CONFIG_MPEG2DVD_MUXER 1
 #define CONFIG_MPEG2VOB_MUXER 1
+#define CONFIG_W64_DEMUXER 0
 #define CONFIG_ENCODERS 1
 #define CONFIG_DVVIDEO_ENCODER 1
 #define CONFIG_SNOW_ENCODER 1
@@ -416,6 +417,7 @@
 #define CONFIG_VC1_DECODER 1
 #define CONFIG_WMV2_DECODER 1
 #define CONFIG_WMV3_DECODER 1
+#define CONFIG_SWSCALE_ALPHA 0
 #define CONFIG_MPEGAUDIO_HP 1
 #define CONFIG_ZLIB 1
 #define CONFIG_GPL 1

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/ffmpeg_config/ffconf.c
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/ffmpeg_config/ffconf.c	2009-11-23 18:59:44 UTC (rev 5542)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/ffmpeg_config/ffconf.c	2009-11-23 18:59:59 UTC (rev 5543)
@@ -459,6 +459,8 @@
 	DECLARE_MUXER(MPEG2SVCD, tgp)
 	DECLARE_MUXER(MPEG2DVD, tgp)
 	DECLARE_MUXER(MPEG2VOB, tgp)
+#define DECLARE_DEMUXER(a,b); printf("#define CONFIG_"#a"_DEMUXER 0\n");
+        DECLARE_DEMUXER(W64,w64)
 
 	printf("#define CONFIG_ENCODERS 1\n");
 	printf("#define CONFIG_DVVIDEO_ENCODER 1\n");
@@ -474,6 +476,8 @@
 	DECLARE_CONFIG_DECODER(VC1, vc1);
 	DECLARE_CONFIG_DECODER(WMV2, wmv2);
 	DECLARE_CONFIG_DECODER(WMV3, wmv3);
+
+	printf("#define CONFIG_SWSCALE_ALPHA 0\n");
 
 	printf("#define CONFIG_MPEGAUDIO_HP 1\n");
 	printf("#define CONFIG_ZLIB 1\n");

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libswscale/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libswscale/CMakeLists.txt	2009-11-23 18:59:44 UTC (rev 5542)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libswscale/CMakeLists.txt	2009-11-23 18:59:59 UTC (rev 5543)
@@ -1,6 +1,12 @@
 SET(ADM_LIB ADM_libswscale6)
-SET(${ADM_LIB}_SRCS swscale.c yuv2rgb.c rgb2rgb.c ADM_mp.cpp swscale_avoption.c)
+SET(${ADM_LIB}_SRCS 
+        swscale.c yuv2rgb.c rgb2rgb.c ADM_mp.cpp swscale_avoption.c
+)
 
+IF(ADM_CPU_X86)
+SET(${ADM_LIB}_SRCS ${${ADM_LIB}_SRCS} x86/yuv2rgb_mmx.c)
+ENDIF(ADM_CPU_X86)
+
 IF (ADM_CPU_ALTIVEC)
 	SET(${ADM_LIB}_SRCS ${${ADM_LIB}_SRCS} yuv2rgb_altivec.c)
 ENDIF (ADM_CPU_ALTIVEC)



From mean at mail.berlios.de  Mon Nov 23 20:00:09 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Mon, 23 Nov 2009 20:00:09 +0100
Subject: [Avidemux-svn-commit] r5545 - in
	branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg:
	libavcodec patches
Message-ID: <200911231900.nANJ095Z000133@sheep.berlios.de>

Author: mean
Date: 2009-11-23 20:00:09 +0100 (Mon, 23 Nov 2009)
New Revision: 5545

Modified:
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavcodec/ac3dec.c
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavcodec/ac3dec.h
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavcodec/ac3dec_data.c
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavcodec/ac3dec_data.h
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavcodec/eac3dec.c
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/patches/libavcodec_eac3_patch.patch
Log:
[FFmpeg] Eac3 patch (updated)

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavcodec/ac3dec.c
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavcodec/ac3dec.c	2009-11-23 19:00:01 UTC (rev 5544)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavcodec/ac3dec.c	2009-11-23 19:00:09 UTC (rev 5545)
@@ -812,15 +812,101 @@
 
     /* spectral extension strategy */
     if (s->eac3 && (!blk || get_bits1(gbc))) {
-        if (get_bits1(gbc)) {
-            av_log_missing_feature(s->avctx, "Spectral extension", 1);
-            return -1;
+        s->spx_in_use = get_bits1(gbc);
+        if (s->spx_in_use) {
+            int begf, endf;
+            int spx_end_subband;
+
+            /* determine which channels use spx */
+            if (s->channel_mode == AC3_CHMODE_MONO) {
+                s->channel_in_spx[1] = 1;
+            } else {
+                for (ch = 1; ch <= fbw_channels; ch++)
+                    s->channel_in_spx[ch] = get_bits1(gbc);
+            }
+
+            s->spx_copy_start_freq = get_bits(gbc, 2) * 12 + 25;
+            begf = get_bits(gbc, 3);
+            endf = get_bits(gbc, 3);
+            s->spx_start_subband = begf < 6 ? begf+2 : 2*begf-3;
+            spx_end_subband      = endf < 4 ? endf+5 : 2*endf+3;
+            if (s->spx_start_subband >= spx_end_subband) {
+                av_log(s->avctx, AV_LOG_ERROR, "invalid spectral extension range (%d >= %d)\n",
+                       s->spx_start_subband, spx_end_subband);
+                return -1;
+            }
+            s->spx_start_freq    = s->spx_start_subband * 12 + 25;
+            s->spx_end_freq      = spx_end_subband      * 12 + 25;
+            if (s->spx_copy_start_freq >= s->spx_start_freq) {
+                av_log(s->avctx, AV_LOG_ERROR, "invalid spectral extension copy start bin (%d >= %d)\n",
+                       s->spx_copy_start_freq, s->spx_start_freq);
+                return -1;
+            }
+/*
+  decode_band_structure(gbc, blk, s->eac3, 0, cpl_start_subband,
+                                  cpl_end_subband,
+                                  ff_eac3_default_cpl_band_struct,
+                                  &s->num_cpl_bands, s->cpl_band_sizes);
+*/
+            decode_band_structure(gbc, blk, s->eac3, 0,
+                                  s->spx_start_subband, spx_end_subband,
+                                  ff_eac3_default_spx_band_struct,
+                                  /*s->spx_band_struct,*/ &s->num_spx_bands,
+                                  s->spx_band_sizes);
+        } else {
+            for (ch = 1; ch <= fbw_channels; ch++) {
+                s->channel_in_spx[ch] = 0;
+                s->first_spx_coords[ch] = 1;
+            }
         }
-        /* TODO: parse spectral extension strategy info */
     }
 
-    /* TODO: spectral extension coordinates */
+    /* spectral extension coordinates */
+    if (s->spx_in_use) {
+        for (ch = 1; ch <= fbw_channels; ch++) {
+            if (s->channel_in_spx[ch]) {
+                if (s->first_spx_coords[ch] || get_bits1(gbc)) {
+                    int bin;
+                    float spx_blend;
+                    int master_spx_coord;
+                    s->first_spx_coords[ch] = 0;
+                    spx_blend = get_bits(gbc, 5) / 32.0f;
+                    master_spx_coord = get_bits(gbc, 2) * 3;
+                    bin = s->spx_start_freq;
+                    for (bnd = 0; bnd < s->num_spx_bands; bnd++) {
+                        int bandsize;
+                        int spx_coord_exp, spx_coord_mant;
+                        float nratio, sblend, nblend, spx_coord;
 
+                        /* calculate blending factors */
+                        bandsize = s->spx_band_sizes[bnd];
+                        nratio = ((float)((bin + (bandsize >> 1))) / s->spx_end_freq) - spx_blend;
+                        nratio = av_clipf(nratio, 0.0f, 1.0f);
+                        nblend = sqrt(       nratio);
+                        sblend = sqrt(1.0f - nratio);
+                        nblend *= 1.73205077648f; // scale noise to give unity variance
+                        bin += bandsize;
+
+                        /* decode spx coordinates */
+                        spx_coord_exp  = get_bits(gbc, 4);
+                        spx_coord_mant = get_bits(gbc, 2);
+                        if (spx_coord_exp == 15)
+                            spx_coord = spx_coord_mant / 4.0f;
+                        else
+                            spx_coord = (spx_coord_mant + 4) / 8.0f;
+                        spx_coord /= (float)(1 << (spx_coord_exp + master_spx_coord));
+
+                        /* multiply noise and signal blending factors by spx coordinate */
+                        s->spx_noise_blend [ch][bnd] = nblend * spx_coord * 32.0f;
+                        s->spx_signal_blend[ch][bnd] = sblend * spx_coord * 32.0f;
+                    }
+                }
+            } else {
+                s->first_spx_coords[ch] = 1;
+            }
+        }
+    }
+
     /* coupling strategy */
     if (s->eac3 ? s->cpl_strategy_exists[blk] : get_bits1(gbc)) {
         memset(bit_alloc_stages, 3, AC3_MAX_CHANNELS);
@@ -856,9 +942,9 @@
                 s->phase_flags_in_use = get_bits1(gbc);
 
             /* coupling frequency range */
-            /* TODO: modify coupling end freq if spectral extension is used */
             cpl_start_subband = get_bits(gbc, 4);
-            cpl_end_subband   = get_bits(gbc, 4) + 3;
+            cpl_end_subband = s->spx_in_use ? s->spx_start_subband - 1 :
+                                              get_bits(gbc, 4) + 3;
             if (cpl_start_subband >= cpl_end_subband) {
                 av_log(s->avctx, AV_LOG_ERROR, "invalid coupling range (%d >= %d)\n",
                        cpl_start_subband, cpl_end_subband);
@@ -931,8 +1017,11 @@
     if (channel_mode == AC3_CHMODE_STEREO) {
         if ((s->eac3 && !blk) || get_bits1(gbc)) {
             s->num_rematrixing_bands = 4;
-            if(cpl_in_use && s->start_freq[CPL_CH] <= 61)
+            if (cpl_in_use && s->start_freq[CPL_CH] <= 61) {
                 s->num_rematrixing_bands -= 1 + (s->start_freq[CPL_CH] == 37);
+            } else if (s->spx_in_use && s->spx_start_freq <= 61) {
+                s->num_rematrixing_bands -= 1;
+            }
             for(bnd=0; bnd<s->num_rematrixing_bands; bnd++)
                 s->rematrixing_flags[bnd] = get_bits1(gbc);
         } else if (!blk) {
@@ -957,6 +1046,8 @@
             int prev = s->end_freq[ch];
             if (s->channel_in_cpl[ch])
                 s->end_freq[ch] = s->start_freq[CPL_CH];
+            else if (s->channel_in_spx[ch])
+                s->end_freq[ch] = s->spx_start_freq;
             else {
                 int bandwidth_code = get_bits(gbc, 6);
                 if (bandwidth_code > 60) {
@@ -1153,8 +1244,6 @@
 
     /* TODO: generate enhanced coupling coordinates and uncouple */
 
-    /* TODO: apply spectral extension */
-
     /* recover coefficients if rematrixing is in use */
     if(s->channel_mode == AC3_CHMODE_STEREO)
         do_rematrixing(s);
@@ -1170,6 +1259,10 @@
         s->dsp.int32_to_float_fmul_scalar(s->transform_coeffs[ch], s->fixed_coeffs[ch], gain, 256);
     }
 
+    /* apply spectral extension to high frequency bins */
+    if (s->spx_in_use)
+        ff_eac3_apply_spectral_extension(s);
+
     /* downmix and MDCT. order depends on whether block switching is used for
        any channel in this block. this is because coefficients for the long
        and short transforms cannot be mixed. */
@@ -1211,8 +1304,8 @@
 static int ac3_decode_frame(AVCodecContext * avctx, void *data, int *data_size,
                             AVPacket *avpkt)
 {
-    const uint8_t *buf = avpkt->data;
-    int buf_size = avpkt->size;
+    const uint8_t *buf=avpkt->data;
+    int buf_size=avpkt->size;
     AC3DecodeContext *s = avctx->priv_data;
     int16_t *out_samples = (int16_t *)data;
     int blk, ch, err;

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavcodec/ac3dec.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavcodec/ac3dec.h	2009-11-23 19:00:01 UTC (rev 5544)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavcodec/ac3dec.h	2009-11-23 19:00:09 UTC (rev 5545)
@@ -42,6 +42,7 @@
 #define AC3_MAX_COEFS   256
 #define AC3_BLOCK_SIZE  256
 #define MAX_BLOCKS        6
+#define SPX_MAX_BANDS    17
 
 typedef struct {
     AVCodecContext *avctx;                  ///< parent context
@@ -88,6 +89,23 @@
     int cpl_coords[AC3_MAX_CHANNELS][18];   ///< coupling coordinates                   (cplco)
 ///@}
 
+///@defgroup spx spectral extension
+///@{
+    int spx_in_use;                             ///< spectral extension in use              (spxinu)
+    uint8_t channel_in_spx[AC3_MAX_CHANNELS];   ///< channel in spectral extension          (chinspx)
+    int8_t spx_atten_code[AC3_MAX_CHANNELS];    ///< spx attenuation code                   (spxattencod)
+    int spx_start_subband;                      ///< spx beginning frequency band           (spxbegf)
+    int spx_start_freq;                         ///< spx start frequency bin
+    int spx_end_freq;                           ///< spx end frequency bin
+    int spx_copy_start_freq;                    ///< spx starting frequency for copying     (copystartmant)
+    int num_spx_bands;                          ///< number of spx bands                    (nspxbnds)
+    uint8_t spx_band_struct[SPX_MAX_BANDS];     ///< spectral extension band structure      (spxbndstrc)
+    uint8_t spx_band_sizes[SPX_MAX_BANDS];      ///< number of bins in each band            (spxbndsztab)
+    uint8_t first_spx_coords[AC3_MAX_CHANNELS]; ///< first spx coordinates states           (firstspxcos)
+    float spx_noise_blend[AC3_MAX_CHANNELS][SPX_MAX_BANDS]; ///< spx noise blending factor  (nblendfact)
+    float spx_signal_blend[AC3_MAX_CHANNELS][SPX_MAX_BANDS];///< spx signal blending factor (sblendfact)
+///@}
+
 ///@defgroup aht adaptive hybrid transform
     int channel_uses_aht[AC3_MAX_CHANNELS];                         ///< channel AHT in use (chahtinu)
     int pre_mantissa[AC3_MAX_CHANNELS][AC3_MAX_COEFS][MAX_BLOCKS];  ///< pre-IDCT mantissas
@@ -178,4 +196,11 @@
  */
 void ff_eac3_decode_transform_coeffs_aht_ch(AC3DecodeContext *s, int ch);
 
+/**
+ * Apply spectral extension to each channel by copying lower frequency
+ * coefficients to higher frequency bins and applying side information to
+ * approximate the original high frequency signal.
+ */
+void ff_eac3_apply_spectral_extension(AC3DecodeContext *s);
+
 #endif /* AVCODEC_AC3DEC_H */

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavcodec/ac3dec_data.c
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavcodec/ac3dec_data.c	2009-11-23 19:00:01 UTC (rev 5544)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavcodec/ac3dec_data.c	2009-11-23 19:00:09 UTC (rev 5545)
@@ -64,3 +64,48 @@
  */
 const uint8_t ff_eac3_default_cpl_band_struct[18] =
 { 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 1, 1, 0, 1, 1, 1, 1, 1 };
+
+/**
+ * Table E2.15 Default Spectral Extension Banding Structure
+ */
+const uint8_t ff_eac3_default_spx_band_struct[17] =
+{ 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1 };
+
+/**
+ * Table E.25: Spectral Extension Attenuation Table
+ * ff_eac3_spx_atten_tab[code][bin]=pow(2.0,(bin+1)*(code+1)/-15.0);
+ */
+const float ff_eac3_spx_atten_tab[32][3] = {
+    { 0.954841603910416503f, 0.911722488558216804f, 0.870550563296124125f },
+    { 0.911722488558216804f, 0.831237896142787758f, 0.757858283255198995f },
+    { 0.870550563296124125f, 0.757858283255198995f, 0.659753955386447100f },
+    { 0.831237896142787758f, 0.690956439983888004f, 0.574349177498517438f },
+    { 0.793700525984099792f, 0.629960524947436595f, 0.500000000000000000f },
+    { 0.757858283255198995f, 0.574349177498517438f, 0.435275281648062062f },
+    { 0.723634618720189082f, 0.523647061410313364f, 0.378929141627599553f },
+    { 0.690956439983888004f, 0.477420801955208307f, 0.329876977693223550f },
+    { 0.659753955386447100f, 0.435275281648062062f, 0.287174588749258719f },
+    { 0.629960524947436595f, 0.396850262992049896f, 0.250000000000000000f },
+    { 0.601512518041058319f, 0.361817309360094541f, 0.217637640824031003f },
+    { 0.574349177498517438f, 0.329876977693223550f, 0.189464570813799776f },
+    { 0.548412489847312945f, 0.300756259020529160f, 0.164938488846611775f },
+    { 0.523647061410313364f, 0.274206244923656473f, 0.143587294374629387f },
+    { 0.500000000000000000f, 0.250000000000000000f, 0.125000000000000000f },
+    { 0.477420801955208307f, 0.227930622139554201f, 0.108818820412015502f },
+    { 0.455861244279108402f, 0.207809474035696939f, 0.094732285406899888f },
+    { 0.435275281648062062f, 0.189464570813799776f, 0.082469244423305887f },
+    { 0.415618948071393879f, 0.172739109995972029f, 0.071793647187314694f },
+    { 0.396850262992049896f, 0.157490131236859149f, 0.062500000000000000f },
+    { 0.378929141627599553f, 0.143587294374629387f, 0.054409410206007751f },
+    { 0.361817309360094541f, 0.130911765352578369f, 0.047366142703449930f },
+    { 0.345478219991944002f, 0.119355200488802049f, 0.041234622211652958f },
+    { 0.329876977693223550f, 0.108818820412015502f, 0.035896823593657347f },
+    { 0.314980262473718298f, 0.099212565748012460f, 0.031250000000000000f },
+    { 0.300756259020529160f, 0.090454327340023621f, 0.027204705103003875f },
+    { 0.287174588749258719f, 0.082469244423305887f, 0.023683071351724965f },
+    { 0.274206244923656473f, 0.075189064755132290f, 0.020617311105826479f },
+    { 0.261823530705156682f, 0.068551561230914118f, 0.017948411796828673f },
+    { 0.250000000000000000f, 0.062500000000000000f, 0.015625000000000000f },
+    { 0.238710400977604098f, 0.056982655534888536f, 0.013602352551501938f },
+    { 0.227930622139554201f, 0.051952368508924235f, 0.011841535675862483f }
+};

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavcodec/ac3dec_data.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavcodec/ac3dec_data.h	2009-11-23 19:00:01 UTC (rev 5544)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavcodec/ac3dec_data.h	2009-11-23 19:00:09 UTC (rev 5545)
@@ -29,5 +29,7 @@
 
 extern const uint8_t ff_eac3_hebap_tab[64];
 extern const uint8_t ff_eac3_default_cpl_band_struct[18];
+extern const uint8_t ff_eac3_default_spx_band_struct[17];
+extern const float   ff_eac3_spx_atten_tab[32][3];
 
 #endif /* AVCODEC_AC3DEC_DATA_H */

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavcodec/eac3dec.c
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavcodec/eac3dec.c	2009-11-23 19:00:01 UTC (rev 5544)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavcodec/eac3dec.c	2009-11-23 19:00:09 UTC (rev 5545)
@@ -23,10 +23,6 @@
 /*
  * There are several features of E-AC-3 that this decoder does not yet support.
  *
- * Spectral Extension
- *     There is a patch to get this working for the two samples we have that
- *     use it, but it needs some minor changes in order to be accepted.
- *
  * Enhanced Coupling
  *     No known samples exist.  If any ever surface, this feature should not be
  *     too difficult to implement.
@@ -67,6 +63,95 @@
 
 #define EAC3_SR_CODE_REDUCED  3
 
+void ff_eac3_apply_spectral_extension(AC3DecodeContext *s)
+{
+    int bin, bnd, ch, i;
+    uint8_t wrapflag[SPX_MAX_BANDS]={0,}, num_copy_sections, copy_sizes[SPX_MAX_BANDS];
+    float rms_energy[SPX_MAX_BANDS];
+
+    /* Set copy index mapping table. Set wrap flags to apply a notch filter at
+       wrap points later on. */
+    wrapflag[0] = 1;
+    bin = s->spx_copy_start_freq;
+    num_copy_sections = 0;
+    for (bnd = 0; bnd < s->num_spx_bands; bnd++) {
+        int copysize;
+        int bandsize = s->spx_band_sizes[bnd];
+        if ((bin + bandsize) > s->spx_start_freq) {
+            copy_sizes[num_copy_sections++] = bin - s->spx_copy_start_freq;
+            bin = s->spx_copy_start_freq;
+            wrapflag[bnd] = 1;
+        }
+        for (i = 0; i < bandsize; i += copysize) {
+            if (bin == s->spx_start_freq) {
+                copy_sizes[num_copy_sections++] = bin - s->spx_copy_start_freq;
+                bin = s->spx_copy_start_freq;
+            }
+            copysize = FFMIN(bandsize - i, s->spx_start_freq - bin);
+            bin += copysize;
+        }
+    }
+    copy_sizes[num_copy_sections++] = bin - s->spx_copy_start_freq;
+
+    for (ch = 1; ch <= s->fbw_channels; ch++) {
+        if (!s->channel_in_spx[ch])
+            continue;
+
+        /* Copy coeffs from normal bands to extension bands */
+        bin = s->spx_start_freq;
+        for (i = 0; i < num_copy_sections; i++) {
+            memcpy(&s->transform_coeffs[ch][bin],
+                   &s->transform_coeffs[ch][s->spx_copy_start_freq],
+                   copy_sizes[i]*sizeof(float));
+            bin += copy_sizes[i];
+        }
+
+        /* Calculate RMS energy for each SPX band. */
+        bin = s->spx_start_freq;
+        for (bnd = 0; bnd < s->num_spx_bands; bnd++) {
+            int bandsize = s->spx_band_sizes[bnd];
+            float accum = 0.0f;
+            for (i = 0; i < bandsize; i++) {
+                float coeff = s->transform_coeffs[ch][bin++];
+                accum += coeff * coeff;
+            }
+            rms_energy[bnd] = sqrt(accum / (float)bandsize);
+        }
+
+        /* Apply a notch filter at transitions between normal and extension
+           bands and at all wrap points. */
+        if (s->spx_atten_code[ch] >= 0) {
+            const float *atten_tab = ff_eac3_spx_atten_tab[s->spx_atten_code[ch]];
+            bin = s->spx_start_freq - 2;
+            for (bnd = 0; bnd < s->num_spx_bands; bnd++) {
+                if (wrapflag[bnd]) {
+                    float *coeffs = &s->transform_coeffs[ch][bin];
+                    coeffs[0] *= atten_tab[0];
+                    coeffs[1] *= atten_tab[1];
+                    coeffs[2] *= atten_tab[2];
+                    coeffs[3] *= atten_tab[1];
+                    coeffs[4] *= atten_tab[0];
+                }
+                bin += s->spx_band_sizes[bnd];
+            }
+        }
+
+        /* Apply noise-blended coefficient scaling based on previously
+           calculated RMS energy, blending factors, and SPX coordinates for
+           each band. */
+        bin = s->spx_start_freq;
+        for (bnd = 0; bnd < s->num_spx_bands; bnd++) {
+            float nscale = s->spx_noise_blend[ch][bnd] * rms_energy[bnd];
+            float sscale = s->spx_signal_blend[ch][bnd];
+            for (i = 0; i < s->spx_band_sizes[bnd]; i++) {
+                float noise  = nscale * (((int)av_lfg_get(&s->dith_state))/(float)(1<<31));
+                s->transform_coeffs[ch][bin]   *= sscale;
+                s->transform_coeffs[ch][bin++] += noise;
+            }
+        }
+    }
+}
+
 /** lrint(M_SQRT2*cos(2*M_PI/12)*(1<<23)) */
 #define COEFF_0 10273905LL
 
@@ -492,13 +577,11 @@
     }
 
     /* spectral extension attenuation data */
-    if (parse_spx_atten_data) {
-        av_log_missing_feature(s->avctx, "Spectral extension attenuation", 1);
-        for (ch = 1; ch <= s->fbw_channels; ch++) {
-            if (get_bits1(gbc)) { // channel has spx attenuation
-                skip_bits(gbc, 5); // skip spx attenuation code
-            }
-        }
+    for (ch = 1; ch <= s->fbw_channels; ch++) {
+        if (parse_spx_atten_data && get_bits1(gbc))
+            s->spx_atten_code[ch] = get_bits(gbc, 5);
+        else
+            s->spx_atten_code[ch] = -1;
     }
 
     /* block start information */
@@ -514,6 +597,7 @@
 
     /* syntax state initialization */
     for (ch = 1; ch <= s->fbw_channels; ch++) {
+        s->first_spx_coords[ch] = 1;
         s->first_cpl_coords[ch] = 1;
     }
     s->first_cpl_leak = 1;

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/patches/libavcodec_eac3_patch.patch
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/patches/libavcodec_eac3_patch.patch	2009-11-23 19:00:01 UTC (rev 5544)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/patches/libavcodec_eac3_patch.patch	2009-11-23 19:00:09 UTC (rev 5545)
@@ -1,23 +1,8 @@
-diff --git a/avidemux_core/ADM_ffmpeg/libavcodec/CMakeLists.txt b/avidemux_core/ADM_ffmpeg/libavcodec/CMakeLists.txt
-index d584ef4..086861b 100644
---- libavcodec/CMakeLists.txt
-+++ libavcodec/CMakeLists.txt
-@@ -20,8 +20,8 @@ SET(${ADM_LIB}_SRCS
-         flacdata.c
-         vp6dsp.c
-         tscc.c  resample2.c    qdm2.c  bitstream_filter.c  eval.c  vc1.c
--	vc1dsp.c  vp56.c  vp6.c  vp5.c  indeo2.c  smacker.c  opt.c  fraps.c  dnxhddec.c
--	mpeg12data.c  mpegaudiodata.c  msmpeg4data.c  vc1data.c  vp56data.c  mjpegbdec.c
-+	vp56.c  vp6.c  vp5.c  indeo2.c  smacker.c  opt.c  fraps.c  dnxhddec.c
-+	mpeg12data.c  mpegaudiodata.c  msmpeg4data.c   vp56data.c  mjpegbdec.c
- 	h263_parser.c  h264_parser.c  mpeg4video_parser.c  mpegvideo_enc.c  mpeg12enc.c
- 	mpegaudioenc.c  
-         mjpegenc.c  mjpegdec.c  wma.c  
 diff --git a/avidemux_core/ADM_ffmpeg/libavcodec/ac3dec.c b/avidemux_core/ADM_ffmpeg/libavcodec/ac3dec.c
-index baff415..d6de1e0 100644
---- libavcodec/ac3dec.c
-+++ libavcodec/ac3dec.c
-@@ -826,14 +826,94 @@ static int decode_audio_block(AC3DecodeContext *s, int blk)
+index f2cadf0..61b857c 100644
+--- a/avidemux_core/ADM_ffmpeg/libavcodec/ac3dec.c
++++ b/avidemux_core/ADM_ffmpeg/libavcodec/ac3dec.c
+@@ -812,14 +812,100 @@ static int decode_audio_block(AC3DecodeContext *s, int blk)
  
      /* spectral extension strategy */
      if (s->eac3 && (!blk || get_bits1(gbc))) {
@@ -54,10 +39,16 @@
 +                       s->spx_copy_start_freq, s->spx_start_freq);
 +                return -1;
 +            }
++/*
++  decode_band_structure(gbc, blk, s->eac3, 0, cpl_start_subband,
++                                  cpl_end_subband,
++                                  ff_eac3_default_cpl_band_struct,
++                                  &s->num_cpl_bands, s->cpl_band_sizes);
++*/
 +            decode_band_structure(gbc, blk, s->eac3, 0,
 +                                  s->spx_start_subband, spx_end_subband,
 +                                  ff_eac3_default_spx_band_struct,
-+                                  s->spx_band_struct, &s->num_spx_bands,
++                                  /*s->spx_band_struct,*/ &s->num_spx_bands,
 +                                  s->spx_band_sizes);
 +        } else {
 +            for (ch = 1; ch <= fbw_channels; ch++) {
@@ -117,7 +108,7 @@
  
      /* coupling strategy */
      if (s->eac3 ? s->cpl_strategy_exists[blk] : get_bits1(gbc)) {
-@@ -870,9 +950,9 @@ static int decode_audio_block(AC3DecodeContext *s, int blk)
+@@ -856,9 +942,9 @@ static int decode_audio_block(AC3DecodeContext *s, int blk)
                  s->phase_flags_in_use = get_bits1(gbc);
  
              /* coupling frequency range */
@@ -129,7 +120,7 @@
              if (cpl_start_subband >= cpl_end_subband) {
                  av_log(s->avctx, AV_LOG_ERROR, "invalid coupling range (%d >= %d)\n",
                         cpl_start_subband, cpl_end_subband);
-@@ -945,8 +1025,11 @@ static int decode_audio_block(AC3DecodeContext *s, int blk)
+@@ -931,8 +1017,11 @@ static int decode_audio_block(AC3DecodeContext *s, int blk)
      if (channel_mode == AC3_CHMODE_STEREO) {
          if ((s->eac3 && !blk) || get_bits1(gbc)) {
              s->num_rematrixing_bands = 4;
@@ -142,7 +133,7 @@
              for(bnd=0; bnd<s->num_rematrixing_bands; bnd++)
                  s->rematrixing_flags[bnd] = get_bits1(gbc);
          } else if (!blk) {
-@@ -971,6 +1054,8 @@ static int decode_audio_block(AC3DecodeContext *s, int blk)
+@@ -957,6 +1046,8 @@ static int decode_audio_block(AC3DecodeContext *s, int blk)
              int prev = s->end_freq[ch];
              if (s->channel_in_cpl[ch])
                  s->end_freq[ch] = s->start_freq[CPL_CH];
@@ -151,7 +142,7 @@
              else {
                  int bandwidth_code = get_bits(gbc, 6);
                  if (bandwidth_code > 60) {
-@@ -1167,8 +1252,6 @@ static int decode_audio_block(AC3DecodeContext *s, int blk)
+@@ -1153,8 +1244,6 @@ static int decode_audio_block(AC3DecodeContext *s, int blk)
  
      /* TODO: generate enhanced coupling coordinates and uncouple */
  
@@ -160,7 +151,7 @@
      /* recover coefficients if rematrixing is in use */
      if(s->channel_mode == AC3_CHMODE_STEREO)
          do_rematrixing(s);
-@@ -1184,6 +1267,10 @@ static int decode_audio_block(AC3DecodeContext *s, int blk)
+@@ -1170,6 +1259,10 @@ static int decode_audio_block(AC3DecodeContext *s, int blk)
          s->dsp.int32_to_float_fmul_scalar(s->transform_coeffs[ch], s->fixed_coeffs[ch], gain, 256);
      }
  
@@ -171,7 +162,7 @@
      /* downmix and MDCT. order depends on whether block switching is used for
         any channel in this block. this is because coefficients for the long
         and short transforms cannot be mixed. */
-@@ -1225,8 +1312,8 @@ static int decode_audio_block(AC3DecodeContext *s, int blk)
+@@ -1211,8 +1304,8 @@ static int decode_audio_block(AC3DecodeContext *s, int blk)
  static int ac3_decode_frame(AVCodecContext * avctx, void *data, int *data_size,
                              AVPacket *avpkt)
  {
@@ -183,9 +174,9 @@
      int16_t *out_samples = (int16_t *)data;
      int blk, ch, err;
 diff --git a/avidemux_core/ADM_ffmpeg/libavcodec/ac3dec.h b/avidemux_core/ADM_ffmpeg/libavcodec/ac3dec.h
-index 38c2deb..79ed731 100644
---- libavcodec/ac3dec.h
-+++ libavcodec/ac3dec.h
+index 52eb0ef..4cffbb5 100644
+--- a/avidemux_core/ADM_ffmpeg/libavcodec/ac3dec.h
++++ b/avidemux_core/ADM_ffmpeg/libavcodec/ac3dec.h
 @@ -42,6 +42,7 @@
  #define AC3_MAX_COEFS   256
  #define AC3_BLOCK_SIZE  256
@@ -218,7 +209,7 @@
  ///@defgroup aht adaptive hybrid transform
      int channel_uses_aht[AC3_MAX_CHANNELS];                         ///< channel AHT in use (chahtinu)
      int pre_mantissa[AC3_MAX_CHANNELS][AC3_MAX_COEFS][MAX_BLOCKS];  ///< pre-IDCT mantissas
-@@ -179,4 +197,11 @@ int ff_eac3_parse_header(AC3DecodeContext *s);
+@@ -178,4 +196,11 @@ int ff_eac3_parse_header(AC3DecodeContext *s);
   */
  void ff_eac3_decode_transform_coeffs_aht_ch(AC3DecodeContext *s, int ch);
  
@@ -232,8 +223,8 @@
  #endif /* AVCODEC_AC3DEC_H */
 diff --git a/avidemux_core/ADM_ffmpeg/libavcodec/ac3dec_data.c b/avidemux_core/ADM_ffmpeg/libavcodec/ac3dec_data.c
 index 907a3ae..57bed8d 100644
---- libavcodec/ac3dec_data.c
-+++ libavcodec/ac3dec_data.c
+--- a/avidemux_core/ADM_ffmpeg/libavcodec/ac3dec_data.c
++++ b/avidemux_core/ADM_ffmpeg/libavcodec/ac3dec_data.c
 @@ -64,3 +64,48 @@ const uint8_t ff_eac3_hebap_tab[64] = {
   */
  const uint8_t ff_eac3_default_cpl_band_struct[18] =
@@ -285,8 +276,8 @@
 +};
 diff --git a/avidemux_core/ADM_ffmpeg/libavcodec/ac3dec_data.h b/avidemux_core/ADM_ffmpeg/libavcodec/ac3dec_data.h
 index 8d9db05..877ea0b 100644
---- libavcodec/ac3dec_data.h
-+++ libavcodec/ac3dec_data.h
+--- a/avidemux_core/ADM_ffmpeg/libavcodec/ac3dec_data.h
++++ b/avidemux_core/ADM_ffmpeg/libavcodec/ac3dec_data.h
 @@ -29,5 +29,7 @@ extern const uint8_t ff_ac3_rematrix_band_tab[5];
  
  extern const uint8_t ff_eac3_hebap_tab[64];
@@ -297,8 +288,8 @@
  #endif /* AVCODEC_AC3DEC_DATA_H */
 diff --git a/avidemux_core/ADM_ffmpeg/libavcodec/eac3dec.c b/avidemux_core/ADM_ffmpeg/libavcodec/eac3dec.c
 index 3784ccf..79f3c3b 100644
---- libavcodec/eac3dec.c
-+++ libavcodec/eac3dec.c
+--- a/avidemux_core/ADM_ffmpeg/libavcodec/eac3dec.c
++++ b/avidemux_core/ADM_ffmpeg/libavcodec/eac3dec.c
 @@ -23,10 +23,6 @@
  /*
   * There are several features of E-AC-3 that this decoder does not yet support.



From gruntster at mail.berlios.de  Mon Nov 23 20:05:09 2009
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Mon, 23 Nov 2009 20:05:09 +0100
Subject: [Avidemux-svn-commit] r5546 -
	branches/avidemux_2.5_branch_gruntster/platforms/windows/installer
Message-ID: <200911231905.nANJ59x5000723@sheep.berlios.de>

Author: gruntster
Date: 2009-11-23 20:05:04 +0100 (Mon, 23 Nov 2009)
New Revision: 5546

Modified:
   branches/avidemux_2.5_branch_gruntster/platforms/windows/installer/avidemux.nsi
Log:
[win32] bundle cli filters

Modified: branches/avidemux_2.5_branch_gruntster/platforms/windows/installer/avidemux.nsi
===================================================================
--- branches/avidemux_2.5_branch_gruntster/platforms/windows/installer/avidemux.nsi	2009-11-23 19:00:09 UTC (rev 5545)
+++ branches/avidemux_2.5_branch_gruntster/platforms/windows/installer/avidemux.nsi	2009-11-23 19:05:04 UTC (rev 5546)
@@ -542,6 +542,7 @@
 				SectionIn 1 2
 				SetOverwrite on
 				SetOutPath $INSTDIR\plugins\videoFilter
+				${File} plugins\videoFilter\libADM_vf_avisynthResize_cli.dll
 !ifdef INST_GTK
 				!insertmacro SectionFlagIsSet ${SecUiGtk} ${SF_SELECTED} InstallGtk CheckQt
 InstallGtk:
@@ -565,6 +566,7 @@
 				SectionIn 1 2
 				SetOverwrite on
 				SetOutPath $INSTDIR\plugins\videoFilter
+				${File} plugins\videoFilter\libADM_vf_crop_cli.dll
 !ifdef INST_GTK
 				!insertmacro SectionFlagIsSet ${SecUiGtk} ${SF_SELECTED} InstallGtk CheckQt
 InstallGtk:
@@ -588,6 +590,7 @@
 				SectionIn 1 2
 				SetOverwrite on
 				SetOutPath $INSTDIR\plugins\videoFilter
+				${File} plugins\videoFilter\libADM_vf_mplayerResize_cli.dll
 !ifdef INST_GTK
 				!insertmacro SectionFlagIsSet ${SecUiGtk} ${SF_SELECTED} InstallGtk CheckQt
 InstallGtk:
@@ -789,6 +792,7 @@
 				SectionIn 1 2
 				SetOverwrite on
 				SetOutPath $INSTDIR\plugins\videoFilter
+				${File} plugins\videoFilter\libADM_vf_colorYUV_cli.dll
 !ifdef INST_GTK
 				!insertmacro SectionFlagIsSet ${SecUiGtk} ${SF_SELECTED} InstallGtk CheckQt
 InstallGtk:
@@ -812,6 +816,7 @@
 				SectionIn 1 2
 				SetOverwrite on
 				SetOutPath $INSTDIR\plugins\videoFilter
+				${File} plugins\videoFilter\libADM_vf_chromashift_cli.dll
 !ifdef INST_GTK
 				!insertmacro SectionFlagIsSet ${SecUiGtk} ${SF_SELECTED} InstallGtk CheckQt
 InstallGtk:
@@ -849,6 +854,7 @@
 				SectionIn 1 2
 				SetOverwrite on
 				SetOutPath $INSTDIR\plugins\videoFilter
+				${File} plugins\videoFilter\libADM_vf_contrast_cli.dll
 !ifdef INST_GTK
 				!insertmacro SectionFlagIsSet ${SecUiGtk} ${SF_SELECTED} InstallGtk CheckQt
 InstallGtk:
@@ -872,6 +878,7 @@
 				SectionIn 1 2
 				SetOverwrite on
 				SetOutPath $INSTDIR\plugins\videoFilter
+				${File} plugins\videoFilter\libADM_vf_equalizer_cli.dll
 !ifdef INST_GTK
 				!insertmacro SectionFlagIsSet ${SecUiGtk} ${SF_SELECTED} InstallGtk CheckQt
 InstallGtk:
@@ -895,6 +902,7 @@
 				SectionIn 1 2
 				SetOverwrite on
 				SetOutPath $INSTDIR\plugins\videoFilter
+				${File} plugins\videoFilter\libADM_vf_eq2_cli.dll
 !ifdef INST_GTK
 				!insertmacro SectionFlagIsSet ${SecUiGtk} ${SF_SELECTED} InstallGtk CheckQt
 InstallGtk:
@@ -912,6 +920,7 @@
 				SectionIn 1 2
 				SetOverwrite on
 				SetOutPath $INSTDIR\plugins\videoFilter
+				${File} plugins\videoFilter\libADM_vf_Hue_cli.dll
 !ifdef INST_GTK
 				!insertmacro SectionFlagIsSet ${SecUiGtk} ${SF_SELECTED} InstallGtk CheckQt
 InstallGtk:
@@ -937,6 +946,7 @@
 				SectionIn 1 2
 				SetOverwrite on
 				SetOutPath $INSTDIR\plugins\videoFilter
+				${File} plugins\videoFilter\libADM_vf_cnr2_cli.dll
 !ifdef INST_GTK
 				!insertmacro SectionFlagIsSet ${SecUiGtk} ${SF_SELECTED} InstallGtk CheckQt
 InstallGtk:
@@ -1010,6 +1020,7 @@
 				SectionIn 1 2
 				SetOverwrite on
 				SetOutPath $INSTDIR\plugins\videoFilter
+				${File} plugins\videoFilter\libADM_vf_asharp_cli.dll
 !ifdef INST_GTK
 				!insertmacro SectionFlagIsSet ${SecUiGtk} ${SF_SELECTED} InstallGtk CheckQt
 InstallGtk:
@@ -1057,6 +1068,7 @@
 				SectionIn 1 2
 				SetOverwrite on
 				SetOutPath $INSTDIR\plugins\videoFilter
+				${File} plugins\videoFilter\libADM_vf_sub_cli.dll
 !ifdef INST_GTK
 				!insertmacro SectionFlagIsSet ${SecUiGtk} ${SF_SELECTED} InstallGtk CheckQt
 InstallGtk:
@@ -1082,6 +1094,7 @@
 				SectionIn 1 2
 				SetOverwrite on
 				SetOutPath $INSTDIR\plugins\videoFilter
+				${File} plugins\videoFilter\libADM_vf_mpdelogo_cli.dll
 !ifdef INST_GTK
 				!insertmacro SectionFlagIsSet ${SecUiGtk} ${SF_SELECTED} InstallGtk CheckQt
 InstallGtk:



From mean at mail.berlios.de  Mon Nov 23 20:16:44 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Mon, 23 Nov 2009 20:16:44 +0100
Subject: [Avidemux-svn-commit] r5547 -
	branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/ffmpeg_config
Message-ID: <200911231916.nANJGio1001800@sheep.berlios.de>

Author: mean
Date: 2009-11-23 20:16:44 +0100 (Mon, 23 Nov 2009)
New Revision: 5547

Modified:
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/ffmpeg_config/ffconf.c
Log:
[FFmpeg] 32bits fix

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/ffmpeg_config/ffconf.c
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/ffmpeg_config/ffconf.c	2009-11-23 19:05:04 UTC (rev 5546)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/ffmpeg_config/ffconf.c	2009-11-23 19:16:44 UTC (rev 5547)
@@ -514,6 +514,7 @@
 	printf("#if defined(ADM_CPU_X86_32)\n");
 	printf("#	define ARCH_X86 1\n");
 	printf("#	define ARCH_X86_32 1\n");
+	printf("#	define ARCH_X86_64 0\n");
 	printf("#elif defined(ADM_CPU_X86_64)\n");
 	printf("#	define ARCH_X86 1\n");
 	printf("#	define ARCH_X86_64 1\n");



From mean at mail.berlios.de  Mon Nov 23 20:20:16 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Mon, 23 Nov 2009 20:20:16 +0100
Subject: [Avidemux-svn-commit] r5548 -
	branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/ffmpeg_config
Message-ID: <200911231920.nANJKGFp002001@sheep.berlios.de>

Author: mean
Date: 2009-11-23 20:20:16 +0100 (Mon, 23 Nov 2009)
New Revision: 5548

Modified:
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/ffmpeg_config/config.h
Log:
[FFmpeg] 32bit, config.h

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/ffmpeg_config/config.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/ffmpeg_config/config.h	2009-11-23 19:16:44 UTC (rev 5547)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/ffmpeg_config/config.h	2009-11-23 19:20:16 UTC (rev 5548)
@@ -446,6 +446,7 @@
 #if defined(ADM_CPU_X86_32)
 #	define ARCH_X86 1
 #	define ARCH_X86_32 1
+#	define ARCH_X86_64 0
 #elif defined(ADM_CPU_X86_64)
 #	define ARCH_X86 1
 #	define ARCH_X86_64 1



From gruntster at mail.berlios.de  Mon Nov 23 21:14:13 2009
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Mon, 23 Nov 2009 21:14:13 +0100
Subject: [Avidemux-svn-commit] r5549 -
	branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/src
Message-ID: <200911232014.nANKED1b006184@sheep.berlios.de>

Author: gruntster
Date: 2009-11-23 21:14:09 +0100 (Mon, 23 Nov 2009)
New Revision: 5549

Modified:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/src/ADM_fileio.cpp
Log:
[win32] retrieve wide char version of program folder (refs #56)

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/src/ADM_fileio.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/src/ADM_fileio.cpp	2009-11-23 19:20:16 UTC (rev 5548)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/src/ADM_fileio.cpp	2009-11-23 20:14:09 UTC (rev 5549)
@@ -313,10 +313,15 @@
 char *ADM_getInstallRelativePath(const char *base1, const char *base2,const char *base3)
 {
 #ifdef __WIN32
-	char moduleName[MAX_PATH];
+	wchar_t wcModuleName[MAX_PATH];
 
-	GetModuleFileName(0, moduleName, sizeof(moduleName) / sizeof(char));
+	GetModuleFileNameW(0, wcModuleName, sizeof(wcModuleName) / sizeof(wchar_t));
 
+	int len = wideCharStringToUtf8(wcModuleName, -1, NULL);
+	char moduleName[len];
+
+	wideCharStringToUtf8(wcModuleName, -1, moduleName);
+
 	char *slash = strrchr(moduleName, '\\');
 		
 	if (slash)



From gruntster at mail.berlios.de  Mon Nov 23 21:16:55 2009
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Mon, 23 Nov 2009 21:16:55 +0100
Subject: [Avidemux-svn-commit] r5550 -
	branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/src
Message-ID: <200911232016.nANKGtFr006464@sheep.berlios.de>

Author: gruntster
Date: 2009-11-23 21:16:51 +0100 (Mon, 23 Nov 2009)
New Revision: 5550

Modified:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/src/ADM_dynamicLoading.cpp
Log:
[win32] use wide char load library function for plugins (fixes #56)

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/src/ADM_dynamicLoading.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/src/ADM_dynamicLoading.cpp	2009-11-23 20:14:09 UTC (rev 5549)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/src/ADM_dynamicLoading.cpp	2009-11-23 20:16:51 UTC (rev 5550)
@@ -1,9 +1,9 @@
 /** *************************************************************************
     \fn 	ADM_dynamicLoading.cpp
-    \brief 	Wrapper for dlopen & friends  
-                      
+    \brief 	Wrapper for dlopen & friends
+
     copyright            : (C) 2008 by Gruntster
-    
+
  ***************************************************************************/
 
 /***************************************************************************
@@ -27,6 +27,10 @@
 #include "ADM_default.h"
 #include "ADM_dynamicLoading.h"
 
+#ifdef __WIN32
+extern int utf8StringToWideChar(const char *utf8String, int utf8StringLength, wchar_t *wideCharString);
+#endif
+
 // By default the library is silent, being part of ADM_core cannot use the debug_id funcs
 #if 1
 #define aprintf(...) {}
@@ -73,13 +77,18 @@
 bool ADM_LibWrapper::loadLibrary(const char* path)
 {
 #ifdef __WIN32
-	hinstLib = LoadLibrary(path);
+	int pathLength = utf8StringToWideChar(path, -1, NULL);
+	wchar_t wcPath[pathLength];
 
+	utf8StringToWideChar(path, -1, wcPath);
+
+	hinstLib = LoadLibraryW(wcPath);
+
 	if (hinstLib == NULL)
 	{
 		char* lpMsg = formatMessage(GetLastError());
 
-		aprintf("Unable to load [%s]: %s\n", path, lpMsg);
+		printf("Unable to load [%s]: %s\n", path, lpMsg);
 		LocalFree(lpMsg);
 
 		return false;



From gruntster at mail.berlios.de  Mon Nov 23 21:18:19 2009
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Mon, 23 Nov 2009 21:18:19 +0100
Subject: [Avidemux-svn-commit] r5551 -
	branches/avidemux_2.5_branch_gruntster/platforms/windows/installer
Message-ID: <200911232018.nANKIJBp006574@sheep.berlios.de>

Author: gruntster
Date: 2009-11-23 21:18:15 +0100 (Mon, 23 Nov 2009)
New Revision: 5551

Modified:
   branches/avidemux_2.5_branch_gruntster/platforms/windows/installer/avidemux.nsi
Log:
[win32] only install cli filters if command line version is selected

Modified: branches/avidemux_2.5_branch_gruntster/platforms/windows/installer/avidemux.nsi
===================================================================
--- branches/avidemux_2.5_branch_gruntster/platforms/windows/installer/avidemux.nsi	2009-11-23 20:16:51 UTC (rev 5550)
+++ branches/avidemux_2.5_branch_gruntster/platforms/windows/installer/avidemux.nsi	2009-11-23 20:18:15 UTC (rev 5551)
@@ -542,7 +542,10 @@
 				SectionIn 1 2
 				SetOverwrite on
 				SetOutPath $INSTDIR\plugins\videoFilter
+				!insertmacro SectionFlagIsSet ${SecUiCli} ${SF_SELECTED} InstallCli CheckGtk
+InstallCli:
 				${File} plugins\videoFilter\libADM_vf_avisynthResize_cli.dll
+CheckGtk:
 !ifdef INST_GTK
 				!insertmacro SectionFlagIsSet ${SecUiGtk} ${SF_SELECTED} InstallGtk CheckQt
 InstallGtk:
@@ -566,7 +569,10 @@
 				SectionIn 1 2
 				SetOverwrite on
 				SetOutPath $INSTDIR\plugins\videoFilter
+				!insertmacro SectionFlagIsSet ${SecUiCli} ${SF_SELECTED} InstallCli CheckGtk
+InstallCli:
 				${File} plugins\videoFilter\libADM_vf_crop_cli.dll
+CheckGtk:
 !ifdef INST_GTK
 				!insertmacro SectionFlagIsSet ${SecUiGtk} ${SF_SELECTED} InstallGtk CheckQt
 InstallGtk:
@@ -590,7 +596,10 @@
 				SectionIn 1 2
 				SetOverwrite on
 				SetOutPath $INSTDIR\plugins\videoFilter
+				!insertmacro SectionFlagIsSet ${SecUiCli} ${SF_SELECTED} InstallCli CheckGtk
+InstallCli:
 				${File} plugins\videoFilter\libADM_vf_mplayerResize_cli.dll
+CheckGtk:
 !ifdef INST_GTK
 				!insertmacro SectionFlagIsSet ${SecUiGtk} ${SF_SELECTED} InstallGtk CheckQt
 InstallGtk:
@@ -792,7 +801,10 @@
 				SectionIn 1 2
 				SetOverwrite on
 				SetOutPath $INSTDIR\plugins\videoFilter
+				!insertmacro SectionFlagIsSet ${SecUiCli} ${SF_SELECTED} InstallCli CheckGtk
+InstallCli:
 				${File} plugins\videoFilter\libADM_vf_colorYUV_cli.dll
+CheckGtk:
 !ifdef INST_GTK
 				!insertmacro SectionFlagIsSet ${SecUiGtk} ${SF_SELECTED} InstallGtk CheckQt
 InstallGtk:
@@ -816,7 +828,10 @@
 				SectionIn 1 2
 				SetOverwrite on
 				SetOutPath $INSTDIR\plugins\videoFilter
+				!insertmacro SectionFlagIsSet ${SecUiCli} ${SF_SELECTED} InstallCli CheckGtk
+InstallCli:
 				${File} plugins\videoFilter\libADM_vf_chromashift_cli.dll
+CheckGtk:
 !ifdef INST_GTK
 				!insertmacro SectionFlagIsSet ${SecUiGtk} ${SF_SELECTED} InstallGtk CheckQt
 InstallGtk:
@@ -854,7 +869,10 @@
 				SectionIn 1 2
 				SetOverwrite on
 				SetOutPath $INSTDIR\plugins\videoFilter
+				!insertmacro SectionFlagIsSet ${SecUiCli} ${SF_SELECTED} InstallCli CheckGtk
+InstallCli:
 				${File} plugins\videoFilter\libADM_vf_contrast_cli.dll
+CheckGtk:
 !ifdef INST_GTK
 				!insertmacro SectionFlagIsSet ${SecUiGtk} ${SF_SELECTED} InstallGtk CheckQt
 InstallGtk:
@@ -878,7 +896,10 @@
 				SectionIn 1 2
 				SetOverwrite on
 				SetOutPath $INSTDIR\plugins\videoFilter
+				!insertmacro SectionFlagIsSet ${SecUiCli} ${SF_SELECTED} InstallCli CheckGtk
+InstallCli:
 				${File} plugins\videoFilter\libADM_vf_equalizer_cli.dll
+CheckGtk:
 !ifdef INST_GTK
 				!insertmacro SectionFlagIsSet ${SecUiGtk} ${SF_SELECTED} InstallGtk CheckQt
 InstallGtk:
@@ -902,7 +923,10 @@
 				SectionIn 1 2
 				SetOverwrite on
 				SetOutPath $INSTDIR\plugins\videoFilter
+				!insertmacro SectionFlagIsSet ${SecUiCli} ${SF_SELECTED} InstallCli CheckGtk
+InstallCli:
 				${File} plugins\videoFilter\libADM_vf_eq2_cli.dll
+CheckGtk:
 !ifdef INST_GTK
 				!insertmacro SectionFlagIsSet ${SecUiGtk} ${SF_SELECTED} InstallGtk CheckQt
 InstallGtk:
@@ -920,7 +944,10 @@
 				SectionIn 1 2
 				SetOverwrite on
 				SetOutPath $INSTDIR\plugins\videoFilter
+				!insertmacro SectionFlagIsSet ${SecUiCli} ${SF_SELECTED} InstallCli CheckGtk
+InstallCli:
 				${File} plugins\videoFilter\libADM_vf_Hue_cli.dll
+CheckGtk:
 !ifdef INST_GTK
 				!insertmacro SectionFlagIsSet ${SecUiGtk} ${SF_SELECTED} InstallGtk CheckQt
 InstallGtk:
@@ -946,7 +973,10 @@
 				SectionIn 1 2
 				SetOverwrite on
 				SetOutPath $INSTDIR\plugins\videoFilter
+				!insertmacro SectionFlagIsSet ${SecUiCli} ${SF_SELECTED} InstallCli CheckGtk
+InstallCli:
 				${File} plugins\videoFilter\libADM_vf_cnr2_cli.dll
+CheckGtk:
 !ifdef INST_GTK
 				!insertmacro SectionFlagIsSet ${SecUiGtk} ${SF_SELECTED} InstallGtk CheckQt
 InstallGtk:
@@ -1020,7 +1050,10 @@
 				SectionIn 1 2
 				SetOverwrite on
 				SetOutPath $INSTDIR\plugins\videoFilter
+				!insertmacro SectionFlagIsSet ${SecUiCli} ${SF_SELECTED} InstallCli CheckGtk
+InstallCli:
 				${File} plugins\videoFilter\libADM_vf_asharp_cli.dll
+CheckGtk:
 !ifdef INST_GTK
 				!insertmacro SectionFlagIsSet ${SecUiGtk} ${SF_SELECTED} InstallGtk CheckQt
 InstallGtk:
@@ -1068,7 +1101,10 @@
 				SectionIn 1 2
 				SetOverwrite on
 				SetOutPath $INSTDIR\plugins\videoFilter
+				!insertmacro SectionFlagIsSet ${SecUiCli} ${SF_SELECTED} InstallCli CheckGtk
+InstallCli:
 				${File} plugins\videoFilter\libADM_vf_sub_cli.dll
+CheckGtk:
 !ifdef INST_GTK
 				!insertmacro SectionFlagIsSet ${SecUiGtk} ${SF_SELECTED} InstallGtk CheckQt
 InstallGtk:
@@ -1094,7 +1130,10 @@
 				SectionIn 1 2
 				SetOverwrite on
 				SetOutPath $INSTDIR\plugins\videoFilter
+				!insertmacro SectionFlagIsSet ${SecUiCli} ${SF_SELECTED} InstallCli CheckGtk
+InstallCli:
 				${File} plugins\videoFilter\libADM_vf_mpdelogo_cli.dll
+CheckGtk:
 !ifdef INST_GTK
 				!insertmacro SectionFlagIsSet ${SecUiGtk} ${SF_SELECTED} InstallGtk CheckQt
 InstallGtk:



From mean at mail.berlios.de  Mon Nov 23 21:45:20 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Mon, 23 Nov 2009 21:45:20 +0100
Subject: [Avidemux-svn-commit] r5552 - in
	branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg:
	libavutil patches
Message-ID: <200911232045.nANKjKds008422@sheep.berlios.de>

Author: mean
Date: 2009-11-23 21:45:20 +0100 (Mon, 23 Nov 2009)
New Revision: 5552

Modified:
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavutil/lfg.c
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/patches/libavutil_lfg.patch
Log:
[FFmpeg] #undef index as a field is named index

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavutil/lfg.c
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavutil/lfg.c	2009-11-23 20:18:15 UTC (rev 5551)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavutil/lfg.c	2009-11-23 20:45:20 UTC (rev 5552)
@@ -23,7 +23,7 @@
 #include "lfg.h"
 #include "md5.h"
 #include "intreadwrite.h"
-
+#undef index //MEANS
 void av_cold av_lfg_init(AVLFG *c, unsigned int seed){
     uint8_t tmp[16]={0};
     int i;

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/patches/libavutil_lfg.patch
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/patches/libavutil_lfg.patch	2009-11-23 20:18:15 UTC (rev 5551)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/patches/libavutil_lfg.patch	2009-11-23 20:45:20 UTC (rev 5552)
@@ -1,13 +1,31 @@
-diff --git a/avidemux/ADM_libraries/ADM_ffmpeg/libavutil/lfg.c b/avidemux/ADM_libraries/ADM_ffmpeg/libavutil/lfg.c
-index e876d18..ff6a888 100644
---- a/avidemux/ADM_libraries/ADM_ffmpeg/libavutil/lfg.c
-+++ b/avidemux/ADM_libraries/ADM_ffmpeg/libavutil/lfg.c
+diff --git a/avidemux_core/ADM_ffmpeg/libavutil/lfg.c b/avidemux_core/ADM_ffmpeg/libavutil/lfg.c
+index e876d18..8729bfc 100644
+--- a/avidemux_core/ADM_ffmpeg/libavutil/lfg.c
++++ b/avidemux_core/ADM_ffmpeg/libavutil/lfg.c
 @@ -23,7 +23,7 @@
  #include "lfg.h"
  #include "md5.h"
  #include "intreadwrite.h"
 -
-+#undef index
++#undef index //MEANS
  void av_cold av_lfg_init(AVLFG *c, unsigned int seed){
      uint8_t tmp[16]={0};
      int i;
+diff --git a/avidemux_core/ADM_ffmpeg/patches/libavutil_lfg.patch b/avidemux_core/ADM_ffmpeg/patches/libavutil_lfg.patch
+index 0596b37..e69de29 100644
+--- a/avidemux_core/ADM_ffmpeg/patches/libavutil_lfg.patch
++++ b/avidemux_core/ADM_ffmpeg/patches/libavutil_lfg.patch
+@@ -1,13 +0,0 @@
+-diff --git a/avidemux/ADM_libraries/ADM_ffmpeg/libavutil/lfg.c b/avidemux/ADM_libraries/ADM_ffmpeg/libavutil/lfg.c
+-index e876d18..ff6a888 100644
+---- a/avidemux/ADM_libraries/ADM_ffmpeg/libavutil/lfg.c
+-+++ b/avidemux/ADM_libraries/ADM_ffmpeg/libavutil/lfg.c
+-@@ -23,7 +23,7 @@
+- #include "lfg.h"
+- #include "md5.h"
+- #include "intreadwrite.h"
+--
+-+#undef index
+- void av_cold av_lfg_init(AVLFG *c, unsigned int seed){
+-     uint8_t tmp[16]={0};
+-     int i;



From gruntster at mail.berlios.de  Mon Nov 23 23:05:45 2009
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Mon, 23 Nov 2009 23:05:45 +0100
Subject: [Avidemux-svn-commit] r5553 - in
	branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264:
	. qt4
Message-ID: <200911232205.nANM5juk014025@sheep.berlios.de>

Author: gruntster
Date: 2009-11-23 23:05:38 +0100 (Mon, 23 Nov 2009)
New Revision: 5553

Modified:
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/x264Options.cpp
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/x264Options.h
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/x264Param.xsd
Log:
[x264] add psychovisual RDO option

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp	2009-11-23 20:45:20 UTC (rev 5552)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp	2009-11-23 22:05:38 UTC (rev 5553)
@@ -116,6 +116,11 @@
 	ui.bFrameMotionEstCheckBox->setVisible(false);
 #endif
 
+#if X264_BUILD < 64
+	ui.lblPsychoRDO->setVisible(false);
+	ui.psychoRdoSpinBox->setVisible(false);
+#endif
+
 	// Quantiser tab
 #if X264_BUILD < 59
 	ui.aqGroupBox->setEnabled(false);
@@ -719,6 +724,11 @@
 
 	ui.fastPSkipCheckBox->setChecked(options->getFastPSkip());
 	ui.dctDecimateCheckBox->setChecked(options->getDctDecimate());
+
+#if X264_BUILD >= 64
+	ui.psychoRdoSpinBox->setValue(options->getPsychoRdo());
+#endif
+
 	ui.noiseReductionSpinBox->setValue(options->getNoiseReduction());
 	ui.interLumaSpinBox->setValue(options->getInterLumaDeadzone());
 	ui.intraLumaSpinBox->setValue(options->getIntraLumaDeadzone());
@@ -926,6 +936,11 @@
 
 	options->setFastPSkip(ui.fastPSkipCheckBox->isChecked());
 	options->setDctDecimate(ui.dctDecimateCheckBox->isChecked());
+
+#if X264_BUILD >= 64
+	options->setPsychoRdo(ui.psychoRdoSpinBox->value());
+#endif
+
 	options->setNoiseReduction(ui.noiseReductionSpinBox->value());
 	options->setInterLumaDeadzone(ui.interLumaSpinBox->value());
 	options->setIntraLumaDeadzone(ui.intraLumaSpinBox->value());

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui	2009-11-23 20:45:20 UTC (rev 5552)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui	2009-11-23 22:05:38 UTC (rev 5553)
@@ -6,8 +6,8 @@
    <rect>
     <x>0</x>
     <y>0</y>
-    <width>509</width>
-    <height>530</height>
+    <width>523</width>
+    <height>540</height>
    </rect>
   </property>
   <property name="windowTitle" >
@@ -2095,7 +2095,28 @@
            <number>6</number>
           </property>
           <item>
-           <layout class="QVBoxLayout" >
+           <widget class="QCheckBox" name="mixedRefsCheckBox" >
+            <property name="text" >
+             <string>Mixed References</string>
+            </property>
+           </widget>
+          </item>
+          <item>
+           <widget class="QCheckBox" name="chromaMotionEstCheckBox" >
+            <property name="text" >
+             <string>Chroma Motion Estimation</string>
+            </property>
+           </widget>
+          </item>
+          <item>
+           <widget class="QCheckBox" name="bFrameMotionEstCheckBox" >
+            <property name="text" >
+             <string>Motion Estimation Before and After B-frames</string>
+            </property>
+           </widget>
+          </item>
+          <item>
+           <layout class="QHBoxLayout" >
             <property name="margin" >
              <number>0</number>
             </property>
@@ -2103,123 +2124,132 @@
              <number>6</number>
             </property>
             <item>
-             <widget class="QCheckBox" name="mixedRefsCheckBox" >
+             <widget class="QCheckBox" name="trellisCheckBox" >
               <property name="text" >
-               <string>Mixed References</string>
+               <string>Trellis Quantization:</string>
               </property>
              </widget>
             </item>
             <item>
-             <widget class="QCheckBox" name="chromaMotionEstCheckBox" >
-              <property name="text" >
-               <string>Chroma Motion Estimation</string>
+             <widget class="QComboBox" name="trellisComboBox" >
+              <property name="enabled" >
+               <bool>false</bool>
               </property>
+              <item>
+               <property name="text" >
+                <string>Final Macroblock Only</string>
+               </property>
+              </item>
+              <item>
+               <property name="text" >
+                <string>Always On</string>
+               </property>
+              </item>
              </widget>
             </item>
             <item>
-             <widget class="QCheckBox" name="bFrameMotionEstCheckBox" >
+             <spacer>
+              <property name="orientation" >
+               <enum>Qt::Horizontal</enum>
+              </property>
+              <property name="sizeHint" >
+               <size>
+                <width>40</width>
+                <height>20</height>
+               </size>
+              </property>
+             </spacer>
+            </item>
+           </layout>
+          </item>
+          <item>
+           <widget class="QCheckBox" name="fastPSkipCheckBox" >
+            <property name="text" >
+             <string>Fast Skip Detection on P-frames</string>
+            </property>
+           </widget>
+          </item>
+          <item>
+           <widget class="QCheckBox" name="dctDecimateCheckBox" >
+            <property name="text" >
+             <string>DCT Decimation on P-frames</string>
+            </property>
+           </widget>
+          </item>
+          <item>
+           <layout class="QHBoxLayout" >
+            <property name="margin" >
+             <number>0</number>
+            </property>
+            <property name="spacing" >
+             <number>6</number>
+            </property>
+            <item>
+             <widget class="QLabel" name="lblPsychoRDO" >
               <property name="text" >
-               <string>Motion Estimation Before and After B-frames</string>
+               <string>Psychovisual Rate Distortion Optimisation:</string>
               </property>
              </widget>
             </item>
             <item>
-             <layout class="QHBoxLayout" >
-              <property name="margin" >
-               <number>0</number>
+             <widget class="QDoubleSpinBox" name="psychoRdoSpinBox" >
+              <property name="maximum" >
+               <double>10.000000000000000</double>
               </property>
-              <property name="spacing" >
-               <number>6</number>
+              <property name="singleStep" >
+               <double>0.100000000000000</double>
               </property>
-              <item>
-               <widget class="QCheckBox" name="trellisCheckBox" >
-                <property name="text" >
-                 <string>Trellis Quantization:</string>
-                </property>
-               </widget>
-              </item>
-              <item>
-               <widget class="QComboBox" name="trellisComboBox" >
-                <property name="enabled" >
-                 <bool>false</bool>
-                </property>
-                <item>
-                 <property name="text" >
-                  <string>Final Macroblock Only</string>
-                 </property>
-                </item>
-                <item>
-                 <property name="text" >
-                  <string>Always On</string>
-                 </property>
-                </item>
-               </widget>
-              </item>
-              <item>
-               <spacer>
-                <property name="orientation" >
-                 <enum>Qt::Horizontal</enum>
-                </property>
-                <property name="sizeHint" >
-                 <size>
-                  <width>40</width>
-                  <height>20</height>
-                 </size>
-                </property>
-               </spacer>
-              </item>
-             </layout>
+             </widget>
             </item>
             <item>
-             <widget class="QCheckBox" name="fastPSkipCheckBox" >
+             <spacer>
+              <property name="orientation" >
+               <enum>Qt::Horizontal</enum>
+              </property>
+              <property name="sizeHint" >
+               <size>
+                <width>40</width>
+                <height>20</height>
+               </size>
+              </property>
+             </spacer>
+            </item>
+           </layout>
+          </item>
+          <item>
+           <layout class="QHBoxLayout" >
+            <property name="margin" >
+             <number>0</number>
+            </property>
+            <property name="spacing" >
+             <number>6</number>
+            </property>
+            <item>
+             <widget class="QLabel" name="label_42" >
               <property name="text" >
-               <string>Fast Skip Detection on P-frames</string>
+               <string>Noise Reduction:</string>
               </property>
              </widget>
             </item>
             <item>
-             <widget class="QCheckBox" name="dctDecimateCheckBox" >
-              <property name="text" >
-               <string>DCT Decimation on P-frames</string>
+             <widget class="QSpinBox" name="noiseReductionSpinBox" >
+              <property name="maximum" >
+               <number>65536</number>
               </property>
              </widget>
             </item>
             <item>
-             <layout class="QHBoxLayout" >
-              <property name="margin" >
-               <number>0</number>
+             <spacer>
+              <property name="orientation" >
+               <enum>Qt::Horizontal</enum>
               </property>
-              <property name="spacing" >
-               <number>6</number>
+              <property name="sizeHint" >
+               <size>
+                <width>40</width>
+                <height>20</height>
+               </size>
               </property>
-              <item>
-               <widget class="QLabel" name="label_42" >
-                <property name="text" >
-                 <string>Noise Reduction:</string>
-                </property>
-               </widget>
-              </item>
-              <item>
-               <widget class="QSpinBox" name="noiseReductionSpinBox" >
-                <property name="maximum" >
-                 <number>65536</number>
-                </property>
-               </widget>
-              </item>
-              <item>
-               <spacer>
-                <property name="orientation" >
-                 <enum>Qt::Horizontal</enum>
-                </property>
-                <property name="sizeHint" >
-                 <size>
-                  <width>40</width>
-                  <height>20</height>
-                 </size>
-                </property>
-               </spacer>
-              </item>
-             </layout>
+             </spacer>
             </item>
            </layout>
           </item>
@@ -4144,6 +4174,9 @@
   </layout>
  </widget>
  <tabstops>
+  <tabstop>configurationComboBox</tabstop>
+  <tabstop>saveAsButton</tabstop>
+  <tabstop>deleteButton</tabstop>
   <tabstop>tabWidget</tabstop>
   <tabstop>encodingModeComboBox</tabstop>
   <tabstop>targetRateControlSpinBox</tabstop>
@@ -4198,6 +4231,7 @@
   <tabstop>trellisComboBox</tabstop>
   <tabstop>fastPSkipCheckBox</tabstop>
   <tabstop>dctDecimateCheckBox</tabstop>
+  <tabstop>psychoRdoSpinBox</tabstop>
   <tabstop>noiseReductionSpinBox</tabstop>
   <tabstop>intraLumaSpinBox</tabstop>
   <tabstop>interLumaSpinBox</tabstop>
@@ -4235,9 +4269,7 @@
   <tabstop>colourMatrixComboBox</tabstop>
   <tabstop>chromaSampleSpinBox</tabstop>
   <tabstop>fullRangeSamplesCheckBox</tabstop>
-  <tabstop>configurationComboBox</tabstop>
-  <tabstop>saveAsButton</tabstop>
-  <tabstop>deleteButton</tabstop>
+  <tabstop>buttonBox</tabstop>
  </tabstops>
  <resources/>
  <connections>

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/x264Options.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/x264Options.cpp	2009-11-23 20:45:20 UTC (rev 5552)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/x264Options.cpp	2009-11-23 22:05:38 UTC (rev 5553)
@@ -719,6 +719,19 @@
 	_param.analyse.b_dct_decimate = dctDecimate;
 }
 
+#if X264_BUILD >= 64
+float x264Options::getPsychoRdo(void)
+{
+	return _param.analyse.f_psy_rd;
+}
+
+void x264Options::setPsychoRdo(float psychoRdo)
+{
+	if (psychoRdo >= 0 && psychoRdo <= 10)
+		_param.analyse.f_psy_rd = psychoRdo;
+}
+#endif
+
 unsigned int x264Options::getNoiseReduction(void)
 {
 	return _param.analyse.i_noise_reduction;
@@ -1280,6 +1293,7 @@
 	xmlNewChild(xmlNodeChild, NULL, (xmlChar*)"trellis", xmlBuffer);
 	xmlNewChild(xmlNodeChild, NULL, (xmlChar*)"fastPSkip", boolean2String(xmlBuffer, bufferSize, getFastPSkip()));
 	xmlNewChild(xmlNodeChild, NULL, (xmlChar*)"dctDecimate", boolean2String(xmlBuffer, bufferSize, getDctDecimate()));
+	xmlNewChild(xmlNodeChild, NULL, (xmlChar*)"psychoRdo", number2String(xmlBuffer, bufferSize, getPsychoRdo()));
 	xmlNewChild(xmlNodeChild, NULL, (xmlChar*)"noiseReduction", number2String(xmlBuffer, bufferSize, getNoiseReduction()));
 	xmlNewChild(xmlNodeChild, NULL, (xmlChar*)"interLumaDeadzone", number2String(xmlBuffer, bufferSize, getInterLumaDeadzone()));
 	xmlNewChild(xmlNodeChild, NULL, (xmlChar*)"intraLumaDeadzone", number2String(xmlBuffer, bufferSize, getIntraLumaDeadzone()));
@@ -1717,6 +1731,8 @@
 				setFastPSkip(string2Boolean(content));
 			else if (strcmp((char*)xmlChild->name, "dctDecimate") == 0)
 				setDctDecimate(string2Boolean(content));
+			else if (strcmp((char*)xmlChild->name, "psychoRdo") == 0)
+				setPsychoRdo(string2Float(content));
 			else if (strcmp((char*)xmlChild->name, "noiseReduction") == 0)
 				setNoiseReduction(atoi(content));
 			else if (strcmp((char*)xmlChild->name, "interLumaDeadzone") == 0)

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/x264Options.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/x264Options.h	2009-11-23 20:45:20 UTC (rev 5552)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/x264Options.h	2009-11-23 22:05:38 UTC (rev 5553)
@@ -234,6 +234,11 @@
 	bool getDctDecimate(void);
 	void setDctDecimate(bool dctDecimate);
 
+#if X264_BUILD >= 64
+	float getPsychoRdo(void);
+	void setPsychoRdo(float psychoRdo);
+#endif
+
 	unsigned int getNoiseReduction(void);
 	void setNoiseReduction(unsigned int noiseReduction);
 

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/x264Param.xsd
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/x264Param.xsd	2009-11-23 20:45:20 UTC (rev 5552)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/x264Param.xsd	2009-11-23 22:05:38 UTC (rev 5553)
@@ -361,6 +361,14 @@
                     </xs:element>
                     <xs:element name="fastPSkip" type="xs:boolean" minOccurs="0"/>
                     <xs:element name="dctDecimate" type="xs:boolean" minOccurs="0"/>
+                    <xs:element name="psychoRdo" minOccurs="0">
+                      <xs:simpleType>
+                        <xs:restriction base="xs:float">
+                          <xs:minInclusive value="0"/>
+                          <xs:maxInclusive value="10"/>
+                        </xs:restriction>
+                      </xs:simpleType>
+                    </xs:element>
                     <xs:element name="noiseReduction" minOccurs="0">
                       <xs:simpleType>
                         <xs:restriction base="xs:integer">



From mean at mail.berlios.de  Tue Nov 24 07:25:23 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Tue, 24 Nov 2009 07:25:23 +0100
Subject: [Avidemux-svn-commit] r5554 -
	branches/avidemux_2.5_branch_gruntster/cmake
Message-ID: <200911240625.nAO6PNma002796@sheep.berlios.de>

Author: mean
Date: 2009-11-24 07:25:20 +0100 (Tue, 24 Nov 2009)
New Revision: 5554

Modified:
   branches/avidemux_2.5_branch_gruntster/cmake/admFFmpegBuild.cmake
Log:
[FFmpeg] Enable ac3 parser, needed for eac3

Modified: branches/avidemux_2.5_branch_gruntster/cmake/admFFmpegBuild.cmake
===================================================================
--- branches/avidemux_2.5_branch_gruntster/cmake/admFFmpegBuild.cmake	2009-11-23 22:05:38 UTC (rev 5553)
+++ branches/avidemux_2.5_branch_gruntster/cmake/admFFmpegBuild.cmake	2009-11-24 06:25:20 UTC (rev 5554)
@@ -12,7 +12,7 @@
 					 nellymoser  png  qdm2  rawvideo rv10  rv20  snow  svq1  svq3  tscc  vc1  vcr1  vp3  vp5  vp6  vp6a  vp6f  wmav2  wmv1  wmv2  wmv3)
 set(FFMPEG_ENCODERS  ac3  dvbsub  dvvideo  ffv1  ffvhuff  flv  flv1  h263  h263p  huffyuv  mjpeg  mpeg1video  mpeg2video  mp2  mpeg4  msmpeg4v3  snow)
 set(FFMPEG_MUXERS  flv  ipod  matroska  mov  mp4  psp  tg2  tgp)
-set(FFMPEG_PARSERS  h263  h264  mpeg4video)
+set(FFMPEG_PARSERS  h263  h264  mpeg4video ac3)
 set(FFMPEG_PROTOCOLS  file)
 set(FFMPEG_FLAGS  --enable-shared --disable-static --disable-filters --disable-protocols --disable-indevs --disable-outdevs --disable-bsfs
 				  --disable-parsers --disable-decoders --disable-encoders --disable-demuxers --disable-muxers --enable-postproc --enable-gpl 



From mean at mail.berlios.de  Tue Nov 24 07:25:51 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Tue, 24 Nov 2009 07:25:51 +0100
Subject: [Avidemux-svn-commit] r5555 -
	branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audio
Message-ID: <200911240625.nAO6PpRI003371@sheep.berlios.de>

Author: mean
Date: 2009-11-24 07:25:50 +0100 (Tue, 24 Nov 2009)
New Revision: 5555

Modified:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audio/ADM_a52info.cpp
Log:
[A52] Use ffmpeg ac3 parser to correctly parse eac3

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audio/ADM_a52info.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audio/ADM_a52info.cpp	2009-11-24 06:25:20 UTC (rev 5554)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audio/ADM_a52info.cpp	2009-11-24 06:25:50 UTC (rev 5555)
@@ -15,7 +15,15 @@
 #include "ADM_default.h"
 #include "ADM_assert.h"
 #include "ADM_audio/ADM_a52info.h"
+extern "C"
+{
+#define ADM_NO_CONFIG_H
+#define sign_extend
+#include "libavcodec/internal.h"
+#include "libavcodec/ac3_parser.h"
 
+};
+
 #define A52_CHANNEL 0
 #define A52_MONO 1
 #define A52_STEREO 2
@@ -90,6 +98,50 @@
 uint32_t l;
 int ibr,ifq,flags;
 uint32_t of=0;
+
+	*syncoff=of=0;
+ //    	printf("\n Syncing on %d \n",len);
+	// Search for startcode
+	// 0x0b 0x77
+	while(1)
+	{
+		 if(len<7)
+		 {
+		 	printf("Not enough info to find a52 syncword\n");
+		 	return 0;
+		 }
+		 if( *buf!=0x0b || *(buf+1)!=0x77)
+		 {
+		 	len--;
+			buf++;
+			of++;
+			continue;
+		 }
+            AC3HeaderInfo hdr;
+            GetBitContext gb;
+            init_get_bits(&gb,buf,len*8);
+            if(ff_ac3_parse_header(&gb, &hdr))
+            {
+                len--;
+                buf++;
+                of++;
+                printf("Sync failed..continuing\n");
+                continue;
+            }
+//            printf("Sync found at offset %"LU"\n",of);
+            *syncoff=of;
+            *fq=(uint32_t)hdr.sample_rate;
+            *br=(uint32_t)hdr.bit_rate>>3;
+            *chan=hdr.channels;
+            //info->frameSizeInBytes=hdr.frame_size;
+            //info->samples=265*6; // ??
+            return 1;
+		}
+		return 1;
+#if 0
+uint32_t l;
+int ibr,ifq,flags;
+uint32_t of=0;
 		
 	*syncoff=of=0;
      	printf("\n Syncing on %d \n",len);
@@ -150,4 +202,5 @@
 		return 1;
 	}
 	return 0;
+#endif
 }



From mean at mail.berlios.de  Tue Nov 24 08:02:50 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Tue, 24 Nov 2009 08:02:50 +0100
Subject: [Avidemux-svn-commit] r5556 -
	branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audio
Message-ID: <200911240702.nAO72oT0021268@sheep.berlios.de>

Author: mean
Date: 2009-11-24 08:02:48 +0100 (Tue, 24 Nov 2009)
New Revision: 5556

Modified:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audio/ADM_a52info.cpp
Log:
[A52] Revert eac3 part, not enough

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audio/ADM_a52info.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audio/ADM_a52info.cpp	2009-11-24 06:25:50 UTC (rev 5555)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audio/ADM_a52info.cpp	2009-11-24 07:02:48 UTC (rev 5556)
@@ -15,15 +15,7 @@
 #include "ADM_default.h"
 #include "ADM_assert.h"
 #include "ADM_audio/ADM_a52info.h"
-extern "C"
-{
-#define ADM_NO_CONFIG_H
-#define sign_extend
-#include "libavcodec/internal.h"
-#include "libavcodec/ac3_parser.h"
 
-};
-
 #define A52_CHANNEL 0
 #define A52_MONO 1
 #define A52_STEREO 2
@@ -98,50 +90,6 @@
 uint32_t l;
 int ibr,ifq,flags;
 uint32_t of=0;
-
-	*syncoff=of=0;
- //    	printf("\n Syncing on %d \n",len);
-	// Search for startcode
-	// 0x0b 0x77
-	while(1)
-	{
-		 if(len<7)
-		 {
-		 	printf("Not enough info to find a52 syncword\n");
-		 	return 0;
-		 }
-		 if( *buf!=0x0b || *(buf+1)!=0x77)
-		 {
-		 	len--;
-			buf++;
-			of++;
-			continue;
-		 }
-            AC3HeaderInfo hdr;
-            GetBitContext gb;
-            init_get_bits(&gb,buf,len*8);
-            if(ff_ac3_parse_header(&gb, &hdr))
-            {
-                len--;
-                buf++;
-                of++;
-                printf("Sync failed..continuing\n");
-                continue;
-            }
-//            printf("Sync found at offset %"LU"\n",of);
-            *syncoff=of;
-            *fq=(uint32_t)hdr.sample_rate;
-            *br=(uint32_t)hdr.bit_rate>>3;
-            *chan=hdr.channels;
-            //info->frameSizeInBytes=hdr.frame_size;
-            //info->samples=265*6; // ??
-            return 1;
-		}
-		return 1;
-#if 0
-uint32_t l;
-int ibr,ifq,flags;
-uint32_t of=0;
 		
 	*syncoff=of=0;
      	printf("\n Syncing on %d \n",len);
@@ -202,5 +150,4 @@
 		return 1;
 	}
 	return 0;
-#endif
 }



From gruntster at mail.berlios.de  Tue Nov 24 20:28:24 2009
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Tue, 24 Nov 2009 20:28:24 +0100
Subject: [Avidemux-svn-commit] r5557 - in
	branches/avidemux_2.5_branch_gruntster/cmake: . patches
Message-ID: <200911241928.nAOJSOml019399@sheep.berlios.de>

Author: gruntster
Date: 2009-11-24 20:28:15 +0100 (Tue, 24 Nov 2009)
New Revision: 5557

Modified:
   branches/avidemux_2.5_branch_gruntster/cmake/admFFmpegBuild.cmake
   branches/avidemux_2.5_branch_gruntster/cmake/patches/libavcodec_avcodec.h.patch
   branches/avidemux_2.5_branch_gruntster/cmake/patches/libavcodec_h263dec.c.patch
   branches/avidemux_2.5_branch_gruntster/cmake/patches/libavcodec_h264.c.patch
   branches/avidemux_2.5_branch_gruntster/cmake/patches/libavcodec_utils.c.patch
   branches/avidemux_2.5_branch_gruntster/cmake/patches/libavformat_flvenc.c.patch
   branches/avidemux_2.5_branch_gruntster/cmake/patches/libavformat_isom.c.patch
   branches/avidemux_2.5_branch_gruntster/cmake/patches/libavformat_movenc.c.patch
   branches/avidemux_2.5_branch_gruntster/cmake/patches/libavutil_internal.h.patch
Log:
[ffmpeg] update FFmpeg to r20602 & libswscale r29964

Modified: branches/avidemux_2.5_branch_gruntster/cmake/admFFmpegBuild.cmake
===================================================================
--- branches/avidemux_2.5_branch_gruntster/cmake/admFFmpegBuild.cmake	2009-11-24 07:02:48 UTC (rev 5556)
+++ branches/avidemux_2.5_branch_gruntster/cmake/admFFmpegBuild.cmake	2009-11-24 19:28:15 UTC (rev 5557)
@@ -1,7 +1,7 @@
 include(admFFmpegUtil)
 
-set(FFMPEG_VERSION 20383)	# http://git.ffmpeg.org/?p=ffmpeg;a=snapshot;h=b977b67fd675b4253f7a71b38c5a8542fc7ad16f;sf=tgz
-set(SWSCALE_VERSION 29799)	# http://git.ffmpeg.org/?p=libswscale;a=snapshot;h=0e9c9e056c98d7474e3ea40519f3bd8c623b5a3f;sf=tgz
+set(FFMPEG_VERSION 20602)	# http://git.ffmpeg.org/?p=ffmpeg;a=snapshot;h=cd19c43eca5350279332e3112f51fc0442531b54;sf=tgz
+set(SWSCALE_VERSION 29964)	# http://git.ffmpeg.org/?p=libswscale;a=snapshot;h=abcb4191ddc81061de1b0083ea06d364836d616d;sf=tgz
 
 set(LIBRARY_SOURCE_DIR "${CMAKE_SOURCE_DIR}/avidemux/ADM_libraries")
 set(FFMPEG_SOURCE_DIR "${LIBRARY_SOURCE_DIR}/ffmpeg")

Modified: branches/avidemux_2.5_branch_gruntster/cmake/patches/libavcodec_avcodec.h.patch
===================================================================
--- branches/avidemux_2.5_branch_gruntster/cmake/patches/libavcodec_avcodec.h.patch	2009-11-24 07:02:48 UTC (rev 5556)
+++ branches/avidemux_2.5_branch_gruntster/cmake/patches/libavcodec_avcodec.h.patch	2009-11-24 19:28:15 UTC (rev 5557)
@@ -1,8 +1,8 @@
-*** libavcodec/avcodec.h.old	Sun Oct 18 17:15:04 2009
---- libavcodec/avcodec.h	Sun Oct 18 17:15:04 2009
+*** libavcodec/avcodec.h.old	Tue Nov 24 18:57:43 2009
+--- libavcodec/avcodec.h	Tue Nov 24 18:57:43 2009
 ***************
-*** 573,578 ****
---- 573,580 ----
+*** 580,585 ****
+--- 580,587 ----
   #define CODEC_FLAG2_CHUNKS        0x00008000 ///< Input bitstream might be truncated at a packet boundaries instead of only at frame boundaries.
   #define CODEC_FLAG2_NON_LINEAR_QUANT 0x00010000 ///< Use MPEG-2 nonlinear quantizer.
   #define CODEC_FLAG2_BIT_RESERVOIR 0x00020000 ///< Use a bit reservoir when encoding if possible
@@ -12,8 +12,8 @@
   /* Unsupported options :
    *              Syntax Arithmetic coding (SAC)
 ***************
-*** 1431,1436 ****
---- 1433,1439 ----
+*** 1438,1443 ****
+--- 1440,1446 ----
        * - decoding: unused
        */
       int rc_max_rate;
@@ -22,8 +22,8 @@
       /**
        * minimum bitrate
 ***************
-*** 1445,1450 ****
---- 1448,1455 ----
+*** 1452,1457 ****
+--- 1455,1462 ----
        * - decoding: unused
        */
       int rc_buffer_size;

Modified: branches/avidemux_2.5_branch_gruntster/cmake/patches/libavcodec_h263dec.c.patch
===================================================================
--- branches/avidemux_2.5_branch_gruntster/cmake/patches/libavcodec_h263dec.c.patch	2009-11-24 07:02:48 UTC (rev 5556)
+++ branches/avidemux_2.5_branch_gruntster/cmake/patches/libavcodec_h263dec.c.patch	2009-11-24 19:28:15 UTC (rev 5557)
@@ -1,8 +1,8 @@
-*** libavcodec/h263dec.c.old	Sun Aug  2 10:23:00 2009
---- libavcodec/h263dec.c	Sun Aug  2 10:22:59 2009
+*** libavcodec/h263dec.c.old	Tue Nov 24 18:57:47 2009
+--- libavcodec/h263dec.c	Tue Nov 24 18:57:47 2009
 ***************
-*** 123,128 ****
---- 123,145 ----
+*** 124,129 ****
+--- 124,146 ----
   
       return 0;
   }
@@ -27,8 +27,8 @@
   av_cold int ff_h263_decode_end(AVCodecContext *avctx)
   {
 ***************
-*** 418,423 ****
---- 435,446 ----
+*** 419,424 ****
+--- 436,447 ----
       } else {
           ret = h263_decode_picture_header(s);
       }
@@ -42,8 +42,8 @@
       if(ret==FRAME_SKIPPED) return get_consumed_bytes(s, buf_size);
   
 ***************
-*** 704,709 ****
---- 727,740 ----
+*** 711,716 ****
+--- 734,747 ----
   
   assert(s->current_picture.pict_type == s->current_picture_ptr->pict_type);
   assert(s->current_picture.pict_type == s->pict_type);

Modified: branches/avidemux_2.5_branch_gruntster/cmake/patches/libavcodec_h264.c.patch
===================================================================
--- branches/avidemux_2.5_branch_gruntster/cmake/patches/libavcodec_h264.c.patch	2009-11-24 07:02:48 UTC (rev 5556)
+++ branches/avidemux_2.5_branch_gruntster/cmake/patches/libavcodec_h264.c.patch	2009-11-24 19:28:15 UTC (rev 5557)
@@ -1,8 +1,8 @@
-*** libavcodec/h264.c.old	Sun Oct 18 17:15:06 2009
---- libavcodec/h264.c	Sun Oct 18 17:15:06 2009
+*** libavcodec/h264.c.old	Tue Nov 24 18:57:52 2009
+--- libavcodec/h264.c	Tue Nov 24 18:57:52 2009
 ***************
-*** 8159,8164 ****
---- 8159,8175 ----
+*** 8161,8166 ****
+--- 8161,8177 ----
       return 0;
   }
   

Modified: branches/avidemux_2.5_branch_gruntster/cmake/patches/libavcodec_utils.c.patch
===================================================================
--- branches/avidemux_2.5_branch_gruntster/cmake/patches/libavcodec_utils.c.patch	2009-11-24 07:02:48 UTC (rev 5556)
+++ branches/avidemux_2.5_branch_gruntster/cmake/patches/libavcodec_utils.c.patch	2009-11-24 19:28:15 UTC (rev 5557)
@@ -1,8 +1,8 @@
-*** libavcodec/utils.c.old	Sun Oct 18 17:15:08 2009
---- libavcodec/utils.c	Sun Oct 18 17:15:08 2009
+*** libavcodec/utils.c.old	Tue Nov 24 18:58:03 2009
+--- libavcodec/utils.c	Tue Nov 24 18:58:03 2009
 ***************
-*** 631,640 ****
---- 631,642 ----
+*** 614,623 ****
+--- 614,625 ----
   
       if((avctx->codec->capabilities & CODEC_CAP_DELAY) || avpkt->size){
           //FIXME remove the check below _after_ ensuring that all audio check that the available space is enough
@@ -16,7 +16,7 @@
           *frame_size_ptr < avctx->channels * avctx->frame_size * sizeof(int16_t)){
               av_log(avctx, AV_LOG_ERROR, "buffer %d too small\n", *frame_size_ptr);
 ***************
-*** 1071,1077 ****
+*** 1051,1057 ****
           return -1;
       }
   #if !HAVE_MKSTEMP
@@ -24,7 +24,7 @@
   #else
       snprintf(*filename, len, "/tmp/%sXXXXXX", prefix);
       fd = mkstemp(*filename);
---- 1073,1079 ----
+--- 1053,1059 ----
           return -1;
       }
   #if !HAVE_MKSTEMP

Modified: branches/avidemux_2.5_branch_gruntster/cmake/patches/libavformat_flvenc.c.patch
===================================================================
--- branches/avidemux_2.5_branch_gruntster/cmake/patches/libavformat_flvenc.c.patch	2009-11-24 07:02:48 UTC (rev 5556)
+++ branches/avidemux_2.5_branch_gruntster/cmake/patches/libavformat_flvenc.c.patch	2009-11-24 19:28:15 UTC (rev 5557)
@@ -1,7 +1,7 @@
-*** libavformat/flvenc.c.old	Sun Oct 18 17:15:09 2009
---- libavformat/flvenc.c	Sun Oct 18 17:15:09 2009
+*** libavformat/flvenc.c.old	Tue Nov 24 18:58:08 2009
+--- libavformat/flvenc.c	Tue Nov 24 18:58:08 2009
 ***************
-*** 405,411 ****
+*** 406,412 ****
       "video/x-flv",
       "flv",
       sizeof(FLVContext),
@@ -9,7 +9,7 @@
       CODEC_ID_MP3,
   #else // CONFIG_LIBMP3LAME
       CODEC_ID_ADPCM_SWF,
---- 405,412 ----
+--- 406,413 ----
       "video/x-flv",
       "flv",
       sizeof(FLVContext),
@@ -19,8 +19,8 @@
   #else // CONFIG_LIBMP3LAME
       CODEC_ID_ADPCM_SWF,
 ***************
-*** 417,419 ****
---- 418,426 ----
+*** 418,420 ****
+--- 419,427 ----
       .codec_tag= (const AVCodecTag* const []){flv_video_codec_ids, flv_audio_codec_ids, 0},
       .flags= AVFMT_GLOBALHEADER | AVFMT_VARIABLE_FPS,
   };

Modified: branches/avidemux_2.5_branch_gruntster/cmake/patches/libavformat_isom.c.patch
===================================================================
--- branches/avidemux_2.5_branch_gruntster/cmake/patches/libavformat_isom.c.patch	2009-11-24 07:02:48 UTC (rev 5556)
+++ branches/avidemux_2.5_branch_gruntster/cmake/patches/libavformat_isom.c.patch	2009-11-24 19:28:15 UTC (rev 5557)
@@ -1,7 +1,7 @@
-*** libavformat/isom.c.old	Sat Jun 27 18:45:27 2009
---- libavformat/isom.c	Sat Jun 27 18:45:27 2009
+*** libavformat/isom.c.old	Tue Nov 24 18:58:10 2009
+--- libavformat/isom.c	Tue Nov 24 18:58:10 2009
 ***************
-*** 198,204 ****
+*** 200,206 ****
       { CODEC_ID_MP1, MKTAG('.', 'm', 'p', '1') }, /* MPEG layer 1 */
       { CODEC_ID_MP2, MKTAG('.', 'm', 'p', '2') }, /* MPEG layer 2 */
   
@@ -9,7 +9,7 @@
       { CODEC_ID_MP3, 0x6D730055 }, /* MPEG layer 3 */
   
   /*  { CODEC_ID_OGG_VORBIS, MKTAG('O', 'g', 'g', 'S') }, *//* sample files at http://heroinewarrior.com/xmovie.php3 use this tag */
---- 198,207 ----
+--- 200,209 ----
       { CODEC_ID_MP1, MKTAG('.', 'm', 'p', '1') }, /* MPEG layer 1 */
       { CODEC_ID_MP2, MKTAG('.', 'm', 'p', '2') }, /* MPEG layer 2 */
   

Modified: branches/avidemux_2.5_branch_gruntster/cmake/patches/libavformat_movenc.c.patch
===================================================================
--- branches/avidemux_2.5_branch_gruntster/cmake/patches/libavformat_movenc.c.patch	2009-11-24 07:02:48 UTC (rev 5556)
+++ branches/avidemux_2.5_branch_gruntster/cmake/patches/libavformat_movenc.c.patch	2009-11-24 19:28:15 UTC (rev 5557)
@@ -1,8 +1,8 @@
-*** libavformat/movenc.c.old	Mon May 25 14:32:22 2009
---- libavformat/movenc.c	Mon May 25 14:32:22 2009
+*** libavformat/movenc.c.old	Tue Nov 24 18:58:13 2009
+--- libavformat/movenc.c	Tue Nov 24 18:58:13 2009
 ***************
-*** 2061,2063 ****
---- 2061,2075 ----
+*** 2066,2068 ****
+--- 2066,2080 ----
       .codec_tag = (const AVCodecTag* const []){codec_ipod_tags, 0},
   };
   #endif

Modified: branches/avidemux_2.5_branch_gruntster/cmake/patches/libavutil_internal.h.patch
===================================================================
--- branches/avidemux_2.5_branch_gruntster/cmake/patches/libavutil_internal.h.patch	2009-11-24 07:02:48 UTC (rev 5556)
+++ branches/avidemux_2.5_branch_gruntster/cmake/patches/libavutil_internal.h.patch	2009-11-24 19:28:15 UTC (rev 5557)
@@ -1,8 +1,8 @@
-*** libavutil/internal.h.old	Mon May 25 14:32:23 2009
---- libavutil/internal.h	Mon May 25 14:32:23 2009
+*** libavutil/internal.h.old	Tue Nov 24 18:58:16 2009
+--- libavutil/internal.h	Tue Nov 24 18:58:16 2009
 ***************
-*** 218,229 ****
---- 218,231 ----
+*** 214,225 ****
+--- 214,227 ----
   #endif
   
   /* avoid usage of dangerous/inappropriate system functions */



From gruntster at mail.berlios.de  Tue Nov 24 21:48:14 2009
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Tue, 24 Nov 2009 21:48:14 +0100
Subject: [Avidemux-svn-commit] r5558 - in
	branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264:
	. qt4
Message-ID: <200911242048.nAOKmE3a026417@sheep.berlios.de>

Author: gruntster
Date: 2009-11-24 21:48:08 +0100 (Tue, 24 Nov 2009)
New Revision: 5558

Modified:
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.h
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/x264Options.cpp
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/x264Options.h
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/x264Param.xsd
Log:
[x264] add macroblock-tree optimisation option

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp	2009-11-24 19:28:15 UTC (rev 5557)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp	2009-11-24 20:48:08 UTC (rev 5558)
@@ -70,6 +70,12 @@
 	connect(ui.quantiserSpinBox, SIGNAL(valueChanged(int)), this, SLOT(quantiserSpinBox_valueChanged(int)));
 	connect(ui.targetRateControlSpinBox, SIGNAL(valueChanged(int)), this, SLOT(targetRateControlSpinBox_valueChanged(int)));
 
+#if X264_BUILD >= 69
+	connect(ui.mbTreeCheckBox, SIGNAL(toggled(bool)), this, SLOT(mbTreeCheckBox_toggled(bool)));
+#else
+	ui.mbTreeCheckBox->setVisible(false);
+#endif
+
 	ui.sarAsInputLabel->setText(QString("%1:%2").arg(properties->parWidth).arg(properties->parHeight));
 
 	// Motion Estimation tab
@@ -80,7 +86,7 @@
 
 #if X264_BUILD >= 57
 	ui.meMethodComboBox->addItem(QT_TR_NOOP("Hadamard Exhaustive Search"));
-#endif	// X264_BUILD >= 57
+#endif
 
 #if X264_BUILD >= 65
 	ui.rdoCheckBox->setVisible(false);
@@ -125,6 +131,9 @@
 #if X264_BUILD < 59
 	ui.aqGroupBox->setEnabled(false);
 #endif
+#if X264_BUILD >= 69
+	connect(ui.aqVarianceCheckBox, SIGNAL(toggled(bool)), this, SLOT(aqVarianceCheckBox_toggled(bool)));
+#endif
 
 	// Advanced tab
 	ui.zoneTableView->sortByColumn(0, Qt::AscendingOrder);
@@ -427,6 +436,17 @@
 		lastBitrate = value;
 }
 
+#if X264_BUILD >= 69
+void x264ConfigDialog::mbTreeCheckBox_toggled(bool checked)
+{
+	if (!disableGenericSlots && checked && !ui.aqVarianceCheckBox->isChecked())
+		if (GUI_Question(QT_TR_NOOP("Macroblock-Tree optimisation requires Variance Adaptive Quantisation to be enabled.  Variance Adaptive Quantisation will automatically be enabled.\n\nDo you wish to continue?")))
+			ui.aqVarianceCheckBox->setChecked(true);
+		else
+			ui.mbTreeCheckBox->setChecked(false);
+}
+#endif
+
 // Motion Estimation tab
 void x264ConfigDialog::meSlider_valueChanged(int value)
 {
@@ -482,7 +502,7 @@
 // Analysis tab
 void x264ConfigDialog::trellisCheckBox_toggled(bool checked)
 {
-	if (disableGenericSlots && checked && !ui.cabacCheckBox->isChecked())
+	if (!disableGenericSlots && checked && !ui.cabacCheckBox->isChecked())
 		if (GUI_Question(QT_TR_NOOP("Trellis optimisation requires CABAC coding to be enabled.  CABAC coding will automatically be enabled.\n\nDo you wish to continue?")))
 			ui.cabacCheckBox->setChecked(true);
 		else
@@ -500,6 +520,19 @@
 	}
 }
 
+// Quantiser tab
+#if X264_BUILD >= 69
+void x264ConfigDialog::aqVarianceCheckBox_toggled(bool checked)
+{
+	if (!disableGenericSlots && !checked && ui.mbTreeCheckBox->isChecked())
+		if (GUI_Question(QT_TR_NOOP("Macroblock-Tree optimisation requires Variance Adaptive Quantisation to be enabled.  Macroblock-Tree optimisation will automatically be disabled.\n\nDo you wish to continue?")))
+			ui.mbTreeCheckBox->setChecked(false);
+		else
+			ui.aqVarianceCheckBox->setChecked(true);
+}
+#endif
+
+// Advanced tab
 void x264ConfigDialog::zoneAddButton_pressed()
 {
 	zoneTableModel.insertRows(0, 1, QModelIndex());
@@ -608,6 +641,10 @@
 			break;
 	}
 
+#if X264_BUILD >= 69
+	ui.mbTreeCheckBox->setChecked(options->getMbTree());
+#endif
+
 	if (options->getSarAsInput())
 		ui.sarAsInputRadioButton->setChecked(true);
 	else
@@ -843,6 +880,11 @@
 	PluginConfigType configurationType = (PluginConfigType)ui.configurationComboBox->itemData(ui.configurationComboBox->currentIndex()).toInt();
 
 	options->setPresetConfiguration(ui.configurationComboBox->currentText().toUtf8().constData(), configurationType);
+
+#if X264_BUILD >= 69
+	options->setMbTree(ui.mbTreeCheckBox->isChecked());
+#endif
+
 	options->setSarAsInput(ui.sarAsInputRadioButton->isChecked());
 
 	if (ui.sarCustomRadioButton->isChecked())

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.h	2009-11-24 19:28:15 UTC (rev 5557)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.h	2009-11-24 20:48:08 UTC (rev 5558)
@@ -1,8 +1,8 @@
 #ifndef x264ConfigDialog_h
 #define x264ConfigDialog_h
 #include "ui_x264ConfigDialog.h"
-#define ADM_LEGACY_PROGGY
-#include "ADM_default.h"
+#define ADM_LEGACY_PROGGY
+#include "ADM_default.h"
 #include "../x264Options.h"
 #include "x264ZoneTableModel.h"
 #include "x264ZoneTableDelegate.h"
@@ -72,6 +72,9 @@
 	void quantiserSlider_valueChanged(int value);
 	void quantiserSpinBox_valueChanged(int value);
 	void targetRateControlSpinBox_valueChanged(int value);
+#if X264_BUILD >= 69
+	void mbTreeCheckBox_toggled(bool checked);
+#endif
 
 	// Motion Estimation tab
 	void meSlider_valueChanged(int value);
@@ -87,6 +90,11 @@
 	void trellisCheckBox_toggled(bool checked);
 	void matrixCustomEditButton_pressed();
 
+	// Quantiser tab
+#if X264_BUILD >= 69
+	void aqVarianceCheckBox_toggled(bool checked);
+#endif
+
 	// Advanced Rate Control tab
 	void zoneAddButton_pressed();
 	void zoneEditButton_pressed();

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui	2009-11-24 19:28:15 UTC (rev 5557)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui	2009-11-24 20:48:08 UTC (rev 5558)
@@ -477,6 +477,13 @@
             </item>
            </layout>
           </item>
+          <item>
+           <widget class="QCheckBox" name="mbTreeCheckBox" >
+            <property name="text" >
+             <string>Macroblock-Tree Rate Control</string>
+            </property>
+           </widget>
+          </item>
          </layout>
         </widget>
        </item>
@@ -4182,6 +4189,7 @@
   <tabstop>targetRateControlSpinBox</tabstop>
   <tabstop>quantiserSlider</tabstop>
   <tabstop>quantiserSpinBox</tabstop>
+  <tabstop>mbTreeCheckBox</tabstop>
   <tabstop>sarCustomRadioButton</tabstop>
   <tabstop>sarCustomSpinBox1</tabstop>
   <tabstop>sarCustomSpinBox2</tabstop>

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/x264Options.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/x264Options.cpp	2009-11-24 19:28:15 UTC (rev 5557)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/x264Options.cpp	2009-11-24 20:48:08 UTC (rev 5558)
@@ -887,6 +887,18 @@
 }
 #endif
 
+#if X264_BUILD >= 69
+bool x264Options::getMbTree(void)
+{
+	return _param.rc.b_mb_tree;
+}
+
+void x264Options::setMbTree(bool mbTree)
+{
+	_param.rc.b_mb_tree = mbTree;
+}
+#endif
+
 float x264Options::getQuantiserCurveCompression(void)
 {
 	return _param.rc.f_qcompress;
@@ -1323,6 +1335,11 @@
 	xmlNewChild(xmlNodeChild, NULL, (xmlChar*)"adaptiveQuantiserMode", xmlBuffer);
 	xmlNewChild(xmlNodeChild, NULL, (xmlChar*)"adaptiveQuantiserStrength", number2String(xmlBuffer, bufferSize, getAdaptiveQuantiserStrength()));
 #endif
+
+#if X264_BUILD >= 69
+	xmlNewChild(xmlNodeChild, NULL, (xmlChar*)"mbTree", boolean2String(xmlBuffer, bufferSize, getMbTree()));
+#endif
+
 	xmlNewChild(xmlNodeChild, NULL, (xmlChar*)"quantiserCurveCompression", number2String(xmlBuffer, bufferSize, getQuantiserCurveCompression()));
 	xmlNewChild(xmlNodeChild, NULL, (xmlChar*)"reduceFluxBeforeCurveCompression", number2String(xmlBuffer, bufferSize, getReduceFluxBeforeCurveCompression()));
 	xmlNewChild(xmlNodeChild, NULL, (xmlChar*)"reduceFluxAfterCurveCompression", number2String(xmlBuffer, bufferSize, getReduceFluxAfterCurveCompression()));
@@ -1786,6 +1803,10 @@
 			else if (strcmp((char*)xmlChild->name, "adaptiveQuantiserStrength") == 0)
 				setAdaptiveQuantiserStrength(string2Float(content));
 #endif
+#if X264_BUILD >= 69
+			else if (strcmp((char*)xmlChild->name, "mbTree") == 0)
+				setMbTree(string2Boolean(content));
+#endif
 			else if (strcmp((char*)xmlChild->name, "quantiserCurveCompression") == 0)
 				setQuantiserCurveCompression(string2Float(content));
 			else if (strcmp((char*)xmlChild->name, "reduceFluxBeforeCurveCompression") == 0)

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/x264Options.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/x264Options.h	2009-11-24 19:28:15 UTC (rev 5557)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/x264Options.h	2009-11-24 20:48:08 UTC (rev 5558)
@@ -289,6 +289,11 @@
 	void setAdaptiveQuantiserStrength(float adaptiveQuantiserStrength);
 #endif
 
+#if X264_BUILD >= 69
+	bool getMbTree(void);
+	void setMbTree(bool mbTree);
+#endif
+
 	float getQuantiserCurveCompression(void);
 	void setQuantiserCurveCompression(float quantiserCurveCompression);
 

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/x264Param.xsd
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/x264Param.xsd	2009-11-24 19:28:15 UTC (rev 5557)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/x264Param.xsd	2009-11-24 20:48:08 UTC (rev 5558)
@@ -480,6 +480,7 @@
                       </xs:simpleType>
                     </xs:element>
                     <xs:element name="adaptiveQuantiserStrength" type="xs:float" minOccurs="0"/>
+                    <xs:element name="mbTree" type="xs:boolean" minOccurs="0"/>
                     <xs:element name="quantiserCurveCompression" minOccurs="0">
                       <xs:simpleType>
                         <xs:restriction base="xs:float">



From mean at mail.berlios.de  Wed Nov 25 19:56:42 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Wed, 25 Nov 2009 19:56:42 +0100
Subject: [Avidemux-svn-commit] r5559 - branches/avidemux_2.5_branch_gruntster
Message-ID: <200911251856.nAPIugt2026506@sheep.berlios.de>

Author: mean
Date: 2009-11-25 19:56:42 +0100 (Wed, 25 Nov 2009)
New Revision: 5559

Added:
   branches/avidemux_2.5_branch_gruntster/bootStrap_debug.sh
Log:
[Build] Add bootstrap  debug script

Added: branches/avidemux_2.5_branch_gruntster/bootStrap_debug.sh
===================================================================
--- branches/avidemux_2.5_branch_gruntster/bootStrap_debug.sh	2009-11-24 20:48:08 UTC (rev 5558)
+++ branches/avidemux_2.5_branch_gruntster/bootStrap_debug.sh	2009-11-25 18:56:42 UTC (rev 5559)
@@ -0,0 +1,33 @@
+#!/bin/bash
+#
+fail()
+{
+        echo "*** fail $1 ***"
+        exit 1
+        cd $TOP
+}
+export PREFIX=/usr
+export TOP=$PWD
+echo "* Avidemux simple build script *"
+echo "* Need sudo to install libs *"
+sudo -v
+echo "* Building Main *"
+rm -Rf buildMain_debug
+mkdir -p buildMain_debug
+cd buildMain_debug
+cmake -DCMAKE_EDIT_COMMAND=vim -DCMAKE_BUILD_TYPE=Debug --DCMAKE_INSTALL_PREFIX=$PREFIX -DAVIDEMUX_INSTALL_PREFIX=$PREFIX -G "CodeBlocks - Unix Makefiles" .. || fail cmake
+make -j 3 || fail make_main
+sudo make install || fail install_main
+sudo ldconfig
+echo "*  Main Ok*"
+cd $TOP
+echo "* Making plugins *"
+rm -Rf buildPlugins_debug
+mkdir -p buildPlugins_debug
+cd buildPlugins_debug
+cmake -DCMAKE_EDIT_COMMAND=vim -DCMAKE_BUILD_TYPE=Debug --DCMAKE_INSTALL_PREFIX=$PREFIX -DAVIDEMUX_INSTALL_PREFIX=$PREFIX  -DAVIDEMUX_SOURCE_DIR=$TOP/  -DAVIDEMUX_CORECONFIG_DIR=$TOP/buildMain_debug/config -G "CodeBlocks - Unix Makefiles" ../plugins || fail cmake_plugins
+make -j 3  || fail make_plugins
+sudo make install
+echo "*  All Done  *"
+
+



From mean at mail.berlios.de  Wed Nov 25 19:57:17 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Wed, 25 Nov 2009 19:57:17 +0100
Subject: [Avidemux-svn-commit] r5560 -
	branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_asf
Message-ID: <200911251857.nAPIvHsh026572@sheep.berlios.de>

Author: mean
Date: 2009-11-25 19:57:17 +0100 (Wed, 25 Nov 2009)
New Revision: 5560

Modified:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_asf/ADM_asf.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_asf/ADM_asf.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_asf/ADM_asf_audio.cpp
Log:
[ASF] Switch to dynamically created ASF index

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_asf/ADM_asf.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_asf/ADM_asf.cpp	2009-11-25 18:56:42 UTC (rev 5559)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_asf/ADM_asf.cpp	2009-11-25 18:57:17 UTC (rev 5560)
@@ -83,11 +83,6 @@
     delete [] _extraData;
     _extraData=NULL; 
   }
-  if(_index)
-  {
-    delete [] _index; 
-  }
-  _index=NULL;
   if(_packet)
     delete _packet;
   _packet=NULL;
@@ -118,8 +113,6 @@
   _extraData=NULL;
   _packetSize=0;
   _videoStreamId=0;
-  nbImage=0;
-  _index=NULL;
   _packet=NULL;
   _curAudio=NULL;
   _nbPackets=0;
@@ -175,7 +168,7 @@
 
   uint8_t  asfHeader::setFlag(uint32_t frame,uint32_t flags)
 {
-  ADM_assert(frame<nbImage);
+  ADM_assert(frame<_index.size());
   _index[frame].flags=flags;
   return 1; 
 }
@@ -185,7 +178,7 @@
 
 uint32_t asfHeader::getFlags(uint32_t frame,uint32_t *flags)
 {
-  if(frame>=nbImage) return 0;
+  if(frame>=_index.size()) return 0;
   if(!frame) *flags=AVI_KEY_FRAME;
   else 
       *flags=_index[frame].flags;
@@ -199,9 +192,9 @@
 {
   img->dataLength=0;
   img->flags=AVI_KEY_FRAME;
-  if(framenum>=nbImage)
+  if(framenum>=_index.size())
   {
-    printf("[ASF] Going out of bound %u %u\n",framenum, nbImage);
+    printf("[ASF] Going out of bound %u %u\n",framenum, _index.size());
     return 0;
   }
   if(!_index[framenum].frameLen)
@@ -652,33 +645,32 @@
   uint32_t sequence=1;
   uint32_t ceilImage=MAXIMAGE;
 
-  nbImage=0;
+  
   asfIndex *tmpIndex=new asfIndex[ceilImage];
   memset(tmpIndex,0,sizeof(asfIndex)*ceilImage);
   len=0;
-  tmpIndex[0].segNb=1;
+  asfIndex currentIndex;
+  memset(&currentIndex,0,sizeof(currentIndex));
+  currentIndex.segNb=1;
+  bool first=true;
   while(packet<_nbPackets)
   {
     while(!readQueue.isEmpty())
     {
       asfBit *bit=NULL;
       ADM_assert(readQueue.pop((void**)&bit));
-      if(nbImage>=ceilImage-1)
-      {  // Expand if our first guess was too small
-           uint32_t newceil=ceilImage*2;
-           asfIndex *tmptmpIndex=new asfIndex[newceil];
-           memset(tmptmpIndex,0,sizeof(asfIndex)*newceil);
-           memcpy(tmptmpIndex,tmpIndex,sizeof(asfIndex)*ceilImage);
-           delete [] tmpIndex;
-           tmpIndex=tmptmpIndex;
-           ceilImage=newceil;
-      }
       if(bit->stream==_videoStreamId)
       {
           aprintf(">found packet of size %d seq %d, while curseq =%d\n",bit->len,bit->sequence,curSeq);
+          if(first==true)
+          {
+            currentIndex.segNb=sequence=bit->sequence;
+            currentIndex.flags=AVI_KEY_FRAME;
+            first=false;
+          }else
           if(bit->sequence!=sequence)
           {
-            tmpIndex[nbImage].frameLen=len;
+            currentIndex.frameLen=len;
             aprintf("New sequence\n");
             if( ((sequence+1)&0xff)!=(bit->sequence&0xff))
             {
@@ -691,22 +683,30 @@
                 start&=0xff;
                 printf("!!!!!!!!!!!! Delta %d\n",start);
                 
-                for(int filler=0;filler<start;filler++)
+                
+                if(start)
                 {
-                  tmpIndex[++nbImage].frameLen=0;
+                    asfIndex fillerIndex;
+                    memset(&fillerIndex,0,sizeof(fillerIndex));
+                    for(int filler=0;filler<start;filler++)
+                       _index.push_back(fillerIndex);
                 }
     #endif            
-            }
-            nbImage++;
-            ADM_assert(nbImage<ceilImage);
-            tmpIndex[nbImage].frameLen=0;
-            tmpIndex[nbImage].segNb=bit->sequence;
-            tmpIndex[nbImage].packetNb=bit->packet;
-            tmpIndex[nbImage].flags=bit->flags;
+           }
+            _index.push_back(currentIndex);
+            aprintf("Adding new packet of size %u\n",currentIndex.frameLen);
+            memset(&currentIndex,0,sizeof(currentIndex));
+            
+            // Start a new one
+            
+            currentIndex.frameLen=0;
+            currentIndex.segNb=bit->sequence;
+            currentIndex.packetNb=bit->packet;
+            currentIndex.flags=bit->flags;
 
             for(int z=0;z<_nbAudioTrack;z++)
             {
-              tmpIndex[nbImage].audioSeen[z]=_allAudioTracks[z].length;
+              currentIndex.audioSeen[z]=_allAudioTracks[z].length;
             }
             readQueue.pushBack(bit);
     
@@ -723,7 +723,6 @@
         {
           if(bit->stream == _allAudioTracks[i].streamIndex)
           {
-            
             _allAudioTracks[i].length+=bit->len;
             found=1;
           }
@@ -737,28 +736,25 @@
      delete bit;
     }
     //working->update(packet,_nbPackets);
-
     packet++;
     aPacket->nextPacket(0xff); // All packets
     aPacket->skipPacket();
   }
   delete aPacket;
-  //delete working;
-  /* Compact index */
-  _index=new asfIndex[nbImage];
-  memcpy(_index,tmpIndex,sizeof(asfIndex)*nbImage);
-  delete [] tmpIndex;
   
   fseeko(_fd,_dataStartOffset,SEEK_SET);
-  printf("[ASF] %u images found\n",nbImage);
+  printf("[ASF] %u images found\n",_index.size());
   printf("[ASF] ******** End of buildindex *******\n");
-  _videostream.dwLength=_mainaviheader.dwTotalFrames=nbImage;
-  if(!nbImage) return 0;
+  for(int i=0;i<10;i++)
+        printf("%d %d flags:%x\n",i,_index[i].frameLen,_index[i].flags);
+
+  _videostream.dwLength=_mainaviheader.dwTotalFrames=_index.size();
+  if(!_index.size()) return 0;
   
   // Update fps
   // In fact it is an average fps
   // FIXME
-  float f=nbImage;
+  float f=_index.size();
   uint32_t ps;
   
   f*=1000.*1000.*10000.;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_asf/ADM_asf.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_asf/ADM_asf.h	2009-11-25 18:56:42 UTC (rev 5559)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_asf/ADM_asf.h	2009-11-25 18:57:17 UTC (rev 5560)
@@ -25,7 +25,8 @@
 
 #include "ADM_osSupport/ADM_queue.h"
 #include "ADM_asfPacket.h"
-
+#include <vector>
+using std::vector;
 #define ASF_MAX_AUDIO_TRACK 8
 
 typedef struct 
@@ -120,8 +121,11 @@
     virtual uint8_t             extraData(uint32_t *l,uint8_t **d);
 };
 
-
-
+typedef vector <asfIndex > listOfAsfIndeces;
+/**
+    \class asfHeader
+    
+*/
 class asfHeader         :public vidHeader
 {
   protected:
@@ -148,8 +152,7 @@
   public: // Shared with audio track
     char                    *myName;
     
-    uint32_t                nbImage;
-    asfIndex                *_index;
+    listOfAsfIndeces        _index;
     uint32_t                _packetSize;
     uint32_t                _dataStartOffset;
     uint32_t                _nbAudioTrack;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_asf/ADM_asf_audio.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_asf/ADM_asf_audio.cpp	2009-11-25 18:56:42 UTC (rev 5559)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_asf/ADM_asf_audio.cpp	2009-11-25 18:57:17 UTC (rev 5560)
@@ -93,7 +93,7 @@
 {
   // Look into the index until we find the audio
   // just after the wanted value
-  for(int i=0;i<_father->nbImage;i++)
+  for(int i=0;i<_father->_index.size();i++)
   {
     if(!_father->_index[i].audioSeen[_myRank]) continue;
     if(_father->_index[i].audioSeen[_myRank]>=newoffset)



From mean at mail.berlios.de  Thu Nov 26 20:18:11 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Thu, 26 Nov 2009 20:18:11 +0100
Subject: [Avidemux-svn-commit] r5561 -
	branches/avidemux_2.5_branch_gruntster/po
Message-ID: <200911261918.nAQJIBYI024684@sheep.berlios.de>

Author: mean
Date: 2009-11-26 20:18:09 +0100 (Thu, 26 Nov 2009)
New Revision: 5561

Added:
   branches/avidemux_2.5_branch_gruntster/po/hu.po
Log:
[i18n] Hungarian translation by alaci

Added: branches/avidemux_2.5_branch_gruntster/po/hu.po
===================================================================
--- branches/avidemux_2.5_branch_gruntster/po/hu.po	2009-11-25 18:57:17 UTC (rev 5560)
+++ branches/avidemux_2.5_branch_gruntster/po/hu.po	2009-11-26 19:18:09 UTC (rev 5561)
@@ -0,0 +1,7688 @@
+# Hungarian translations for PACKAGE package.
+# Copyright (C) 2009 THE PACKAGE'S COPYRIGHT HOLDER
+# This file is distributed under the same license as the PACKAGE package.
+# Laszlo Andrassy <andrassy.laszlo at gmail.com>, 2009.
+#
+msgid ""
+msgstr ""
+"Project-Id-Version: Avidemux 2.5+svn_5560\n"
+"Report-Msgid-Bugs-To: \n"
+"POT-Creation-Date: 2009-05-30 23:43+0200\n"
+"PO-Revision-Date: 2009-11-26 15:31+0100\n"
+"Last-Translator: Laszlo Andrassy <andrassy.laszlo at gmail.com>\n"
+"Language-Team: Hungarian\n"
+"MIME-Version: 1.0\n"
+"Content-Type: text/plain; charset=UTF-8\n"
+"Content-Transfer-Encoding: 8bit\n"
+"Plural-Forms: nplurals=2; plural=(n != 1);\n"
+
+#: avidemux/ADM_editor/ADM_outputfmt.h:43
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:501
+#: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:370
+msgid "AVI"
+msgstr "AVI"
+
+#: avidemux/ADM_editor/ADM_outputfmt.h:44
+msgid "AVI, dual audio"
+msgstr "AVI, dual audi?"
+
+#: avidemux/ADM_editor/ADM_outputfmt.h:45
+msgid "AVI, pack VOP"
+msgstr "AVI, pack VOP"
+
+#: avidemux/ADM_editor/ADM_outputfmt.h:46
+msgid "AVI, unpack VOP"
+msgstr "AVI, unpack VOP"
+
+#: avidemux/ADM_editor/ADM_outputfmt.h:47
+msgid "MPEG-PS (A+V)"
+msgstr "MPEG-PS (A+V)"
+
+#: avidemux/ADM_editor/ADM_outputfmt.h:48
+msgid "MPEG-TS (A+V)"
+msgstr "MPEG-TS (A+V)"
+
+#: avidemux/ADM_editor/ADM_outputfmt.h:49
+msgid "MPEG video"
+msgstr "MPEG vide?"
+
+#: avidemux/ADM_editor/ADM_outputfmt.h:50
+#: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:494
+#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:120
+msgid "MP4"
+msgstr "MP4"
+
+#: avidemux/ADM_editor/ADM_outputfmt.h:51
+msgid "MP4 (PSP)"
+msgstr "MP4 (PSP)"
+
+#: avidemux/ADM_editor/ADM_outputfmt.h:52
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:505
+#: avidemux/ADM_outputs/oplug_ogm/op_ogsave.cpp:108
+msgid "OGM"
+msgstr "OGM"
+
+#: avidemux/ADM_editor/ADM_outputfmt.h:53
+#: avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp:179
+#: avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp:246
+msgid "FLV"
+msgstr "FLV"
+
+#: avidemux/ADM_editor/ADM_outputfmt.h:54
+#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:121
+msgid "MKV"
+msgstr "MKV"
+
+#: avidemux/ADM_editor/ADM_outputfmt.h:55
+msgid "DUMMY"
+msgstr "DUMMY"
+
+#: avidemux/ADM_encoder/adm_encmpeg2enc.h:58
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:509
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:47
+msgid "MPEG"
+msgstr "MPEG"
+
+#: avidemux/ADM_encoder/adm_encyv12.h:70
+msgid "YV12"
+msgstr "YV12"
+
+#: avidemux/ADM_encoder/adm_encmjpeg.h:61
+msgid "MJPEG"
+msgstr "MJPEG"
+
+#: avidemux/ADM_encoder/adm_encxvid.h:61
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp:127
+msgid "Xvid"
+msgstr "Xvid"
+
+#: avidemux/ADM_encoder/adm_encXvid4.h:63
+msgid "Xvid4"
+msgstr "Xvid4"
+
+#: avidemux/ADM_encoder/adm_encffmpeg.h:48
+msgid "LavCodec"
+msgstr "LavCodec"
+
+#: avidemux/ADM_encoder/adm_encdivx.h:53
+msgid "DivX"
+msgstr "DivX"
+
+#: avidemux/ADM_encoder/ADM_encCodecDesc.h:14
+msgid "YV12 (raw)"
+msgstr "YV12 (raw)"
+
+#: avidemux/ADM_encoder/ADM_encCodecDesc.h:112
+msgid "H.263 (lavc)"
+msgstr "H.263 (lavc)"
+
+#: avidemux/ADM_encoder/ADM_encCodecDesc.h:128
+msgid "H.263+ (lavc)"
+msgstr "H.263+ (lavc)"
+
+#: avidemux/ADM_encoder/ADM_encCodecDesc.h:144
+msgid "MPEG-4 ASP (lavc)"
+msgstr "MPEG-4 ASP (lavc)"
+
+#: avidemux/ADM_encoder/ADM_encCodecDesc.h:160
+msgid "DV (lavc)"
+msgstr "DV (lavc)"
+
+#: avidemux/ADM_encoder/ADM_encCodecDesc.h:176
+msgid "FLV1 (lavc)"
+msgstr "FLV1 (lavc)"
+
+#: avidemux/ADM_encoder/ADM_encCodecDesc.h:192
+msgid "Snow (lavc)"
+msgstr "Snow (lavc)"
+
+#: avidemux/ADM_encoder/ADM_encCodecDesc.h:208
+msgid "FF Huffyuv (lavc)"
+msgstr "FF Huffyuv (lavc)"
+
+#: avidemux/ADM_encoder/ADM_encCodecDesc.h:224
+msgid "Huffyuv (lavc)"
+msgstr "Huffyuv (lavc)"
+
+#: avidemux/ADM_encoder/ADM_encCodecDesc.h:240
+msgid "FFV1 (lavc)"
+msgstr "FFV1 (lavc)"
+
+#: avidemux/ADM_encoder/ADM_encCodecDesc.h:258
+msgid "MJPEG (lavc)"
+msgstr "MJPEG (lavc)"
+
+#: avidemux/ADM_encoder/ADM_encCodecDesc.h:315
+msgid "VCD (lavc)"
+msgstr "VCD (lavc)"
+
+#: avidemux/ADM_encoder/ADM_encCodecDesc.h:375
+msgid "DVD (lavc)"
+msgstr "DVD (lavc)"
+
+#: avidemux/ADM_encoder/ADM_encCodecDesc.h:435
+msgid "SVCD (lavc)"
+msgstr "SVCD (lavc)"
+
+#: avidemux/ADM_encoder/ADM_encCodecDesc.h:462
+msgid "VCD (mpeg2enc)"
+msgstr "VCD (mpeg2enc)"
+
+#: avidemux/ADM_encoder/ADM_encCodecDesc.h:494
+msgid "SVCD (mpeg2enc)"
+msgstr "SVCD (mpeg2enc)"
+
+#: avidemux/ADM_encoder/ADM_encCodecDesc.h:513
+msgid "MPEG-2 requant"
+msgstr "MPEG-2 requant"
+
+#: avidemux/ADM_encoder/ADM_encCodecDesc.h:540
+msgid "DVD (mpeg2enc)"
+msgstr "DVD (mpeg2enc)"
+
+#: avidemux/ADM_encoder/ADM_encCodecDesc.h:672
+msgid "MPEG-4 ASP (Xvid4)"
+msgstr "MPEG-4 ASP (Xvid4)"
+
+#: avidemux/ADM_encoder/ADM_encCodecDesc.h:689
+msgid "dummy"
+msgstr "dummy"
+
+#: avidemux/ADM_encoder/ADM_encCodecDesc.h:692
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1084
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1124
+#: avidemux/ADM_outputs/oplug_dummy/oplug_dummy.cpp:136
+#: avidemux/ADM_outputs/oplug_dummy/oplug_dummy.cpp:168
+#: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:272
+#: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:368
+#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:155
+#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:243
+#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:255
+#: avidemux/ADM_outputs/oplug_ogm/op_ogaudio.cpp:86
+#: avidemux/ADM_outputs/oplug_ogm/op_ogsavecopy.cpp:55
+#: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:365
+#: avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp:182
+#: avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp:228
+#: avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp:249
+#: avidemux/ADM_outputs/oplug_mpeg/op_mpegpass.cpp:173
+#: avidemux/ADM_outputs/oplug_mpeg/op_mpegpass.cpp:177
+#: avidemux/ADM_encoder/adm_encCopy.cpp:85
+msgid "Copy"
+msgstr "M?sol?s"
+
+#: avidemux/ADM_audiocodec/ADM_codecwma.cpp:88
+msgid "Internal error"
+msgstr "Bels? hiba"
+
+#: avidemux/ADM_audiocodec/ADM_codecwma.cpp:88
+msgid "Cannot open WMA2 codec."
+msgstr "Nem lehet megnyitni a WMA2 kodeket"
+
+#: avidemux/ADM_UIs/ADM_GTK/src/DIA_filesel.cpp:119
+#: avidemux/ADM_UIs/ADM_GTK/src/DIA_filesel.cpp:279
+msgid "_Browse..."
+msgstr "_Tall?z?s..."
+
+#: avidemux/ADM_UIs/ADM_GTK/src/FAC_bitrate.cpp:111
+msgid "_Encoding mode:"
+msgstr "_K?dol?si m?d:"
+
+#: avidemux/ADM_UIs/ADM_GTK/src/FAC_bitrate.cpp:121
+#: avidemux/ADM_UIs/ADM_GTK/src/FAC_bitrate.cpp:283
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flv1.cpp:36
+msgid "_Bitrate (kb/s):"
+msgstr "_Bitr?ta (kb/s):"
+
+#: avidemux/ADM_UIs/ADM_GTK/src/FAC_bitrate.cpp:135
+msgid "Single pass - bitrate"
+msgstr "Egymenetes - bitr?ta"
+
+#: avidemux/ADM_UIs/ADM_GTK/src/FAC_bitrate.cpp:137
+msgid "Single pass - constant quality"
+msgstr "Egymenetes - ?lland? min?s?g"
+
+#: avidemux/ADM_UIs/ADM_GTK/src/FAC_bitrate.cpp:139
+msgid "Single pass - same qz as input"
+msgstr "Egymenetes - ugyanaz a qz mint az inputn?l"
+
+#: avidemux/ADM_UIs/ADM_GTK/src/FAC_bitrate.cpp:141
+msgid "Single pass - Average quantizer"
+msgstr "Egymenetes - ?tlagos quantizer"
+
+#: avidemux/ADM_UIs/ADM_GTK/src/FAC_bitrate.cpp:144
+msgid "Two pass - video size"
+msgstr "K?tmenetes - video m?ret"
+
+#: avidemux/ADM_UIs/ADM_GTK/src/FAC_bitrate.cpp:146
+msgid "Two pass - average bitrate"
+msgstr "K?tmenetes - ?tlagos bitr?ta"
+
+#: avidemux/ADM_UIs/ADM_GTK/src/FAC_bitrate.cpp:288
+#: plugins/ADM_videoFilters/ForcedPP/ADM_vidForcedPP.cpp:45
+msgid "_Quantizer:"
+msgstr "_Quantizer:"
+
+#: avidemux/ADM_UIs/ADM_GTK/src/FAC_bitrate.cpp:293
+msgid "A_vg Quantizer:"
+msgstr "?_tl Quantizer:"
+
+#: avidemux/ADM_UIs/ADM_GTK/src/FAC_bitrate.cpp:298
+msgid "_Video size (MB):"
+msgstr "_Video m?ret (MB):"
+
+#: avidemux/ADM_UIs/ADM_GTK/src/FAC_bitrate.cpp:303
+msgid "_Average bitrate (kb/s):"
+msgstr "_?tlagos bitr?ta (kb/s):"
+
+#: avidemux/ADM_UIs/ADM_GTK/src/FAC_bitrate.cpp:308
+msgid "-"
+msgstr "-"
+
+#: avidemux/ADM_UIs/ADM_GTK/src/FAC_threadCount.cpp:87
+msgid "Disable"
+msgstr "Letilt?s"
+
+#: avidemux/ADM_UIs/ADM_GTK/src/FAC_threadCount.cpp:91
+msgid "Auto-detect"
+msgstr "Auto-felismer?s"
+
+#: avidemux/ADM_UIs/ADM_GTK/src/FAC_threadCount.cpp:99
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:549
+msgid "Custom"
+msgstr "Egy?ni"
+
+#: avidemux/ADM_UIs/ADM_GTK/src/DIA_color.cpp:51
+msgid "Select Color"
+msgstr "Sz?nkiv?laszt?s"
+
+#: avidemux/ADM_UIs/ADM_GTK/src/FAC_hex.cpp:103
+#: avidemux/ADM_UIs/ADM_GTK/src/FAC_hex.cpp:137
+msgid "_Previous"
+msgstr "_El?z?"
+
+#: avidemux/ADM_UIs/ADM_GTK/src/FAC_hex.cpp:111
+#: avidemux/ADM_UIs/ADM_GTK/src/FAC_hex.cpp:167
+msgid "_Next"
+msgstr "_K?vetkez?"
+
+#: avidemux/ADM_audiofilter/audiofilter_buildchain.cpp:290
+#: avidemux/gui_autodrive.cpp:64 avidemux/gui_autodrive.cpp:78
+#: avidemux/gui_autodrive.cpp:109 avidemux/gui_autodrive.cpp:115
+#: avidemux/gui_autodrive.cpp:130 avidemux/gui_autodrive.cpp:157
+#: avidemux/gui_autodrive.cpp:192
+msgid "Codec Error"
+msgstr "Kodek hiba"
+
+#: avidemux/ADM_audiofilter/audiofilter_buildchain.cpp:290
+msgid ""
+"The number of channels is greater than what the selected audio codec can "
+"do.\n"
+"Either change codec or use the mixer filter to have less channels."
+msgstr ""
+"A csatorn?k sz?ma nagyobb mint amit a kiv?lasztott audi? kodek t?mogat.\n"
+"V?lasszon m?s kodek-et vagy haszn?lja a mixer sz?r?t a kevesebb csatorna "
+"?rdek?ben."
+
+#: avidemux/ADM_audiofilter/audiofilter_buildchain.cpp:301
+msgid "[BuildChain] Encoder initialization failed"
+msgstr "[BuildChain] k?dol? inicializ?l?sa sikertelen"
+
+#: avidemux/ADM_audiofilter/audiofilter_buildchain.cpp:301
+msgid "Not activated."
+msgstr "Nem aktiv?lt"
+
+#: avidemux/ADM_libraries/ADM_lvemux/ADM_muxer.cpp:75
+#: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:179
+msgid "Incompatible audio"
+msgstr "Nem kompatibilis audi?"
+
+#: avidemux/ADM_libraries/ADM_lvemux/ADM_muxer.cpp:75
+msgid "For DVD, audio must be MP2 or AC3."
+msgstr "DVD-n?l az audi? MP2 vagy AC3 lehet."
+
+#: avidemux/ADM_libraries/ADM_lvemux/ADM_muxer.cpp:82
+msgid "lvemux init failed"
+msgstr "Lvemux inicializ?l?sa sikertelen"
+
+#: avidemux/ADM_libraries/ADM_utilities/ADM_gettext.cpp:46
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:290
+msgid "_File"
+msgstr "_F?jl"
+
+#: avidemux/ADM_libraries/ADM_utilities/avidemutils.cpp:321
+msgid "NTSC 4:3"
+msgstr "NTSC 4:3"
+
+#: avidemux/ADM_libraries/ADM_utilities/avidemutils.cpp:322
+#: avidemux/ADM_libraries/ADM_utilities/avidemutils.cpp:323
+msgid "NTSC 16:9"
+msgstr "NTSC 16:9"
+
+#: avidemux/ADM_libraries/ADM_utilities/avidemutils.cpp:324
+msgid "PAL 4:3"
+msgstr "PAL 4:3"
+
+#: avidemux/ADM_libraries/ADM_utilities/avidemutils.cpp:325
+msgid "PAL 16:9"
+msgstr "PAL 16:9"
+
+#: avidemux/ADM_libraries/ADM_utilities/avidemutils.cpp:326
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_resize.cpp:368
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_resize.cpp:390
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_resizeWiz.cpp:42
+#: plugins/ADM_videoFilters/AvisynthResize/gtk/gtk_resize.cpp:365
+#: plugins/ADM_videoFilters/AvisynthResize/gtk/gtk_resize.cpp:387
+#: plugins/ADM_videoFilters/MplayerResize/gtk/gtk_resize.cpp:365
+#: plugins/ADM_videoFilters/MplayerResize/gtk/gtk_resize.cpp:387
+msgid "1:1"
+msgstr "1:1"
+
+#: avidemux/ADM_libraries/ADM_utilities/avidemutils.cpp:328
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:585
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:782
+msgid "Unknown"
+msgstr "Ismeretlen"
+
+#: avidemux/ADM_libraries/ADM_utilities/ADM_imageLoader.cpp:184
+msgid "Wrong Colorspace"
+msgstr "Hib?s sz?nt?r"
+
+#: avidemux/ADM_libraries/ADM_utilities/ADM_imageLoader.cpp:184
+msgid "Only YV12/I420 or YUY2/I422 JPegs are supported"
+msgstr "Csak YV12/I420 vagy YUY2/I422 JPeg-ek t?mogatottak"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_preview.cpp:175
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_threshold.cpp:536
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtersub.cpp:151
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager.cpp:332
+msgid "Preview"
+msgstr "El?n?zet"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_busy.cpp:102
+msgid "Busy"
+msgstr "Foglalt"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_ocr.cpp:45
+msgid "Mini OCR"
+msgstr "Mini OCR"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_ocr.cpp:63
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_ocr.cpp:77
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:648
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:655
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:662
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:775
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:622
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:638
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:654
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:684
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_resize.cpp:411
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_resize.cpp:425
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_idx_pg.cpp:154
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_idx_pg.cpp:194
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1220
+#: plugins/ADM_videoFilters/AvisynthResize/gtk/gtk_resize.cpp:408
+#: plugins/ADM_videoFilters/AvisynthResize/gtk/gtk_resize.cpp:422
+#: plugins/ADM_videoFilters/Tdeint/DIA_tdeint.cpp:68
+#: plugins/ADM_videoFilters/MplayerResize/gtk/gtk_resize.cpp:408
+#: plugins/ADM_videoFilters/MplayerResize/gtk/gtk_resize.cpp:422
+msgid "0"
+msgstr "0"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_ocr.cpp:70
+msgid "0:0:0"
+msgstr "0:0:0"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_ocr.cpp:84
+msgid "# of lines"
+msgstr "# / sor"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_ocr.cpp:92
+msgid "TimeCode:"
+msgstr "Id?k?d:"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_ocr.cpp:100
+msgid "# of Glyphs :"
+msgstr "# / Bet?k?p :"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_ocr.cpp:108
+msgid "<b>Stats</b>"
+msgstr "<b>?llapot</b>"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_ocr.cpp:125
+msgid "Current Glyph"
+msgstr "Aktu?lis bet?k?p"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_ocr.cpp:138
+msgid " Text:"
+msgstr " Sz?veg:"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_ocr.cpp:145
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:242
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:263
+#: plugins/ADM_videoFilters/ASharp/gtk/DIA_asharp.cpp:246
+msgid " "
+msgstr " "
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_ocr.cpp:160
+msgid "_Calibrate"
+msgstr "_Kalibr?l"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_ocr.cpp:164
+msgid "If the glyphs are too thin, enter a lower value here"
+msgstr "Ha a bet?k?pek t?l v?konyak adjon meg kisebb ?rt?ket"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_ocr.cpp:166
+msgid "S_kip all"
+msgstr "?sszes ?t_l?p?se"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_ocr.cpp:170
+msgid "Skip the whole image"
+msgstr "A teljes k?p ?tl?p?se"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_ocr.cpp:172
+msgid "Skip Glyph"
+msgstr "Bet?k?p ?tl?p?se"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_ocr.cpp:176
+msgid "Skip the current letter/glyph"
+msgstr "Az aktu?lis bet?/bet?k?p ?tl?p?se"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_ocr.cpp:178
+msgid "_Ignore glyph"
+msgstr "B_et?k?p mell?z?se"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_ocr.cpp:182
+msgid "This glyph will be ignored from now on"
+msgstr "Ez a bet?k?p mostant?l figyelmen k?v?l lesz hagyva"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_ocr.cpp:184
+msgid "Ok"
+msgstr "Ok"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_ocr.cpp:198
+msgid "<b>Bitmap</b>"
+msgstr "<b>Bitt?rk?p</b>"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:148
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:170
+msgid "Privileges Required"
+msgstr "Enged?ly sz?ks?ges"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:148
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:170
+msgid "Root privileges are required to perform this operation."
+msgstr "Root jog sz?ks?ges a m?velet v?grehajt?s?hoz."
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:191
+msgid "Shutting down"
+msgstr "Le?ll?t?s"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:368
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_working.cpp:138
+#, c-format
+msgid "%d%%"
+msgstr "%d%%"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:391
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:398
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:405
+#, c-format
+msgid "%lu MB"
+msgstr "%lu MB"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:501
+msgid "Encoding..."
+msgstr "K?dol?s..."
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:532
+msgid "<b>Phase:</b>"
+msgstr "<b>F?zis:</b>"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:540
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:555
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:570
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_vobsub.cpp:211
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:66
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:75
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:37
+#: avidemux/ADM_outputs/oplug_dummy/oplug_dummy.cpp:134
+#: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:257
+#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:153
+#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:247
+#: avidemux/ADM_outputs/oplug_ogm/op_ogaudio.cpp:66
+#: avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp:180
+#: avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp:232 avidemux/gtk_gui.cpp:1999
+#: avidemux/gtk_gui.cpp:2098
+#: plugins/ADM_videoFilters/lavDeinterlace/ADM_lavpp_deint.cpp:106
+#: plugins/ADM_videoFilters/colorYUV/gtk/DIA_coloryuv.cpp:356
+#: plugins/ADM_videoFilters/colorYUV/gtk/DIA_coloryuv.cpp:364
+#: plugins/ADM_videoFilters/colorYUV/gtk/DIA_coloryuv.cpp:372
+#: plugins/ADM_videoFilters/Rotate/ADM_vidRotate.cpp:259
+#: plugins/ADM_videoFilters/Telecide/ADM_vidDecTelecide.cpp:93
+msgid "None"
+msgstr "Nincs"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:547
+msgid "<b>Video Codec:</b>"
+msgstr "<b>Vide? Kodek:</b>"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:562
+msgid "<b>Audio Codec:</b>"
+msgstr "<b>Audi? Kodek:</b>"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:577
+msgid "<b>Container:</b>"
+msgstr "<b>T?rol?:</b>"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:609
+msgid "<b>Processed Frames:</b>"
+msgstr "<b>Feldolgozott frame-ek:</b>"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:617
+msgid "<b>Total Frames:</b>"
+msgstr "<b>?sszes frame:</b>"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:625
+msgid "<b>Quantiser:</b>"
+msgstr "<b>Quantiser:</b>"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:633
+msgid "<b>Average Bitrate:</b>"
+msgstr "<b>?tlagos bitr?ta:</b>"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:641
+msgid "0 kB/s"
+msgstr "0 kB/s"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:686
+msgid "<b>Video Size:</b>"
+msgstr "<b>Vide? m?ret:</b>"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:694
+msgid "<b>Audio Size:</b>"
+msgstr "<b>Audi? m?ret:</b>"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:702
+msgid "<b>Total Size:</b>"
+msgstr "<b>Teljes m?ret:</b>"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:710
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:718
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:726
+msgid "0 MB"
+msgstr "0 MB"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:751
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_working.cpp:232
+msgid "<b>Elapsed:</b>"
+msgstr "<b>Eltelt:</b>"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:759
+msgid "<b>Time Remaining:</b>"
+msgstr "<b>H?tral?v? id?:</b>"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:767
+msgid "<b>Frames/sec:</b>"
+msgstr "<b>Frame/mp:</b>"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:789
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:437
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_idx_pg.cpp:186
+msgid "00:00:00"
+msgstr "00:00:00"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:813
+msgid "Shut down computer when finished"
+msgstr "Sz?m?t?g?p le?ll?t?sa befejez?s ut?n"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:821
+msgid "Priority:"
+msgstr "Priorit?s:"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:830
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:223
+msgid "High"
+msgstr "Magas"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:831
+msgid "Above Normal"
+msgstr "Norm?l feletti"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:832
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:225
+#: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:64
+msgid "Normal"
+msgstr "Norm?l"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:833
+msgid "Below Normal"
+msgstr "Norm?l alatti"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:834
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:227
+msgid "Low"
+msgstr "Alacsony"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:871
+msgid "Pause / Abort"
+msgstr "Sz?net / Megszak?t"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/toolkit_dialog.cpp:481
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/toolkit_dialog.cpp:559
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/toolkit_dialog.cpp:627
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/toolkit_dialog.cpp:687
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/toolkit_dialog.cpp:750
+msgid "label1"
+msgstr "c?mke1"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/toolkit_dialog.cpp:614
+msgid "Alert"
+msgstr "Riaszt?s"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:391
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1002
+msgid "Calculator"
+msgstr "Sz?mol?g?p"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:404
+msgid "<b>Target</b>"
+msgstr "<b>C?l</b>"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:431
+msgid "Duration:"
+msgstr "Id?tartam:"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:451
+msgid "_Medium:"
+msgstr "_M?dia:"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:462
+msgid "_Format:"
+msgstr "_Form?tum:"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:473
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:531
+msgid "Total size (custom)"
+msgstr "Teljes m?ret (egy?ni)"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:483
+msgid "_Custom size (MB):"
+msgstr "_Egy?ni m?ret (MB):"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:497
+msgid "Output container format"
+msgstr "Kimeneti t?rol? form?tuma"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:524
+msgid "Total size"
+msgstr "Teljes m?ret"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:528
+msgid "1x 80 min. CD"
+msgstr "1x 80 perc CD"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:533
+msgid "2x 80 min. CD"
+msgstr "2x 80 perc CD"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:537
+msgid "1x 74 min. CD"
+msgstr "1x 74 perc CD"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:541
+msgid "2x 74 min. CD"
+msgstr "2x 74 perc CD"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:545
+msgid "DVD5"
+msgstr "DVD5"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:561
+msgid "Track _1:"
+msgstr "S?v _1:"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:569
+msgid "Audio bitrate in kb/s for track 1 (0 for no audio)"
+msgstr "Audi? bitr?ta kb/mp-ben -> s?v 1 (0 - nincs audi?)"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:576
+msgid "Track _2: "
+msgstr "S?v _2:"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:584
+msgid "Audio bitrate in kb/s for track 2 (optional)"
+msgstr "Audi? bitr?ta kb/mp-ben -> s?v 2 (opcion?lis)"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:588
+msgid "<b>Audio Bitrate</b>"
+msgstr "<b>Audi? bitr?ta</b>"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:614
+msgid "Audio size (MB):"
+msgstr "Audi? m?ret (MB):"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:630
+msgid "Video size (MB):"
+msgstr "Vide? m?ret (MB):"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:646
+msgid "Total size (MB):"
+msgstr "Teljes m?ret (MB):"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:668
+msgid "Video bitrate:"
+msgstr "Vide? bitr?ta:"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:676
+msgid "Bits per pixel:"
+msgstr "Bit/pixel:"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:692
+msgid "0.0"
+msgstr "0.0"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:700
+msgid "<b>Result</b>"
+msgstr "<b>Eredm?ny</b>"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_quota.cpp:69
+msgid "Filesystem full / quota exceeded"
+msgstr "F?jlrendszer megtelt / kv?ta t?ll?p?s"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_quota.cpp:112
+msgid "Ignore"
+msgstr "Mell?z"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_quota.cpp:134
+msgid "Retry"
+msgstr "Ism?tl?s"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_partial.cpp:110
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtersub.cpp:145
+#: avidemux/ADM_filter/filter_declaration.cpp:57
+msgid "Partial"
+msgstr "R?szleges"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_partial.cpp:124
+msgid "Start frame for partial :"
+msgstr "Kezd? frame :"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_partial.cpp:131
+msgid "End frame for partial :"
+msgstr "Utols? frame :"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_partial.cpp:154
+msgid "Configure partialized filter"
+msgstr "Sz?r? be?ll?t?sa"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:27
+msgid "No"
+msgstr "Nem"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:27
+msgid "Yes"
+msgstr "Igen"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:47
+#, possible-c-format
+msgid "%lu x %lu"
+msgstr "%lu x %lu"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:50
+#, possible-c-format
+msgid "%2.3f fps"
+msgstr "%2.3f fps"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:53
+#, possible-c-format
+msgid "%ld frames"
+msgstr "%ld frame"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:63
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:113
+#, possible-c-format
+msgid "%02d:%02d:%02d.%03d"
+msgstr "%02d:%02d:%02d.%03d"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:76
+#, possible-c-format
+msgid "%s (%u:%u)"
+msgstr "%s (%u:%u)"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:87
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:89
+#: plugins/ADM_audioEncoders/twolame/audioencoder_twolame.cpp:212
+#: plugins/ADM_audioEncoders/lame/audioencoder_lame.cpp:286
+msgid "Mono"
+msgstr "Mono"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:90
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:90
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:277
+#: plugins/ADM_audioEncoders/twolame/audioencoder_twolame.cpp:210
+#: plugins/ADM_audioEncoders/lame/audioencoder_lame.cpp:284
+msgid "Stereo"
+msgstr "Sztere?"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:98
+#, possible-c-format
+msgid "%lu Hz"
+msgstr "%lu Hz"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:100
+#, possible-c-format
+msgid "%lu Bps / %lu kbps"
+msgstr "%lu B/mp / %lu kb/mp"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:116
+#, possible-c-format
+msgid "%.2f MB"
+msgstr "%.2f MB"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:185
+msgid "Properties"
+msgstr "Tulajdons?gok"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:214
+msgid "Frame Rate:"
+msgstr "Frame-r?ta:"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:221
+msgid "Frame Count:"
+msgstr "Frame ?sszeg:"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:228
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:406
+msgid "Total Duration:"
+msgstr "Teljes id?tartam:"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:249
+msgid "Image Size:"
+msgstr "K?p m?rete:"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:270
+msgid "Codec 4CC:"
+msgstr "Kodek 4CC:"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:284
+msgid "Aspect Ratio:"
+msgstr "K?par?ny:"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:298
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1066
+msgid "<b>Video</b>"
+msgstr "<b>Vide?</b>"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:317
+msgid "Global Motion Compensation:"
+msgstr "Global Motion Compensation (GMC):"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:331
+msgid "Packed Bitstream:"
+msgstr "Packed Bitstream:"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:345
+msgid "Quarter Pixel:"
+msgstr "Quarter Pixel:"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:359
+msgid "<b>Extra Video Properties</b>"
+msgstr "<b>Extra Vide? tulajdons?gok</b>"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:378
+msgid "Codec:"
+msgstr "Kodek:"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:385
+msgid "Channels:"
+msgstr "Csatorn?k:"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:392
+msgid "Bitrate:"
+msgstr "Bitr?ta:"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:399
+msgid "Frequency:"
+msgstr "Frekvencia:"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:448
+msgid "File Size:"
+msgstr "F?jl m?rete:"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:462
+msgid "Variable Bitrate:"
+msgstr "V?ltoz? bitr?ta"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:476
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1106
+msgid "<b>Audio</b>"
+msgstr "<b>Audi?</b>"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_threshold.cpp:194
+#: avidemux/ADM_videoFilter/ADM_vidThreshold.cpp:152
+msgid "Threshold Configuration"
+msgstr "Hat?r?rt?k be?ll?t?sa"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_threshold.cpp:395
+#: avidemux/ADM_filter/filter_declaration.cpp:51
+msgid "Threshold"
+msgstr "Hat?r?rt?k"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_threshold.cpp:417
+msgid "Minimum value to be in-range:"
+msgstr "Minimum ?rt?k a tartom?nyon bel?l:"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_threshold.cpp:450
+msgid "Maximum value to be in-range:"
+msgstr "Maximum ?rt?k a tartom?nyon bel?l:"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_threshold.cpp:481
+msgid "Output values:   "
+msgstr "Kimeneti ?rt?k:   "
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_threshold.cpp:488
+msgid "In-range values go black, out-of-range values go white"
+msgstr "Tartom?nyon bel?li ?rt?k fekete, tartom?nyon k?v?li ?rt?k feh?r legyen"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_threshold.cpp:489
+msgid "In-range values go white, out-of-range values go black"
+msgstr "Tartom?nyon bel?li ?rt?k feh?r, tartom?nyon k?v?li ?rt?k fekete legyen"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_threshold.cpp:495
+msgid "Debugging settings (bits):   "
+msgstr "Hibakeres?si be?ll?t?sok (bits):   "
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs.cpp:8
+msgid "Ready"
+msgstr "K?sz"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs.cpp:8
+msgid "Succeeded"
+msgstr "Siker?lt"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs.cpp:8
+#: avidemux/gtk_gui.cpp:2276
+msgid "Failed"
+msgstr "Sikertelen"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs.cpp:8
+msgid "Deleted"
+msgstr "T?r?lt"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs.cpp:8
+msgid "Running"
+msgstr "Fut"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs.cpp:87
+msgid "  Job Name  "
+msgstr "  Feladat neve  "
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs.cpp:92
+msgid "Started at"
+msgstr "Elind?tva"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs.cpp:96
+msgid "Finished at"
+msgstr "Befejezve"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs.cpp:123
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs.cpp:161
+msgid "Sure!"
+msgstr "Biztos!"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs.cpp:123
+msgid "Delete ALL jobs"
+msgstr "Az ?sszes feladat t?rl?se"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs.cpp:123
+msgid "Are you sure you want to delete all jobs ?"
+msgstr "Biztos, hogy t?r?lni akarja az ?sszes feladatot ?"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs.cpp:161
+msgid "Delete job"
+msgstr "Feladat t?rl?se"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs.cpp:161
+#, possible-c-format
+msgid "Are you sure you want to delete %s job ?"
+msgstr "Biztos, hogy t?rli a(z) %s feladatot ?"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs.cpp:170
+msgid "Unknown event"
+msgstr "Ismeretlen esem?ny"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs.cpp:251
+msgid "Jobs"
+msgstr "Feladatok"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs.cpp:277
+msgid "Delete All Jobs"
+msgstr "?sszes feladat t?rl?se"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs.cpp:282
+msgid "Delete Job"
+msgstr "Feladat t?rl?se"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs.cpp:287
+msgid "Run all jobs"
+msgstr "?sszes feladat ind?t?sa"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs.cpp:292
+msgid "Run Job"
+msgstr "Feladat ind?t?sa"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_pipe.cpp:78
+msgid "Pipe to"
+msgstr "Tov?bb?t?s a"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_pipe.cpp:87
+msgid "Application path/name (/usr/bin/sox...)"
+msgstr "Alkalmaz?s ?tvonal/n?v (/usr/bin/sox...)"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_pipe.cpp:96
+msgid "Full parameter line"
+msgstr "Teljes param?ter sor"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_vobsub.cpp:81
+msgid "none"
+msgstr "nincs"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_vobsub.cpp:90
+msgid "Select .idx file"
+msgstr ".idx f?jl kiv?laszt?sa"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_vobsub.cpp:101
+msgid "Wrong VobSub parametering"
+msgstr "Rossz VobSub param?terez?s"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_vobsub.cpp:101
+msgid "The idx/sub file does not set."
+msgstr "Az idx/sub f?jl nincs be?ll?tva"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_vobsub.cpp:188
+msgid "VobSub Settings"
+msgstr "VobSub be?ll?t?sok"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_vobsub.cpp:205
+msgid "Select .idx"
+msgstr ".idx kiv?laszt?sa"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_vobsub.cpp:219
+msgid "Select Language :"
+msgstr "Nyelv kiv?laszt?sa :"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_vobsub.cpp:233
+msgid "Select Sub"
+msgstr "Felirat kiv?laszt?sa"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_vobsub.cpp:246
+msgid "Extra Shrink Factor :"
+msgstr "Extra Shrink t?nyez? :"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_vobsub.cpp:261
+msgid "Shift (ms) :"
+msgstr "Eltol?s (ms)"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_vobsub.cpp:275
+msgid "Extra Settings"
+msgstr "Extra be?ll?t?sok"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_resize.cpp:304
+#: plugins/ADM_videoFilters/AvisynthResize/gtk/gtk_resize.cpp:301
+#: plugins/ADM_videoFilters/AvisynthResize/ADM_vidResize.cpp:39
+#: plugins/ADM_videoFilters/MplayerResize/gtk/gtk_resize.cpp:301
+msgid "Resize"
+msgstr "?tm?retez?s"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_resize.cpp:318
+#: plugins/ADM_videoFilters/AvisynthResize/gtk/gtk_resize.cpp:315
+#: plugins/ADM_videoFilters/MplayerResize/gtk/gtk_resize.cpp:315
+msgid " Width "
+msgstr " Sz?less?g "
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_resize.cpp:325
+#: plugins/ADM_videoFilters/AvisynthResize/gtk/gtk_resize.cpp:322
+#: plugins/ADM_videoFilters/MplayerResize/gtk/gtk_resize.cpp:322
+msgid " Height "
+msgstr " Magass?g "
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_resize.cpp:348
+#: plugins/ADM_videoFilters/AvisynthResize/gtk/gtk_resize.cpp:345
+#: plugins/ADM_videoFilters/MplayerResize/gtk/gtk_resize.cpp:345
+msgid "Source :"
+msgstr "Forr?s :"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_resize.cpp:354
+#: plugins/ADM_videoFilters/AvisynthResize/gtk/gtk_resize.cpp:351
+#: plugins/ADM_videoFilters/MplayerResize/gtk/gtk_resize.cpp:351
+msgid "Destination"
+msgstr "C?l"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_resize.cpp:372
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_resize.cpp:394
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp:42
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_resizeWiz.cpp:43
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_SVCD.cpp:42
+#: plugins/ADM_videoFilters/AvisynthResize/gtk/gtk_resize.cpp:369
+#: plugins/ADM_videoFilters/AvisynthResize/gtk/gtk_resize.cpp:391
+#: plugins/ADM_videoFilters/MplayerResize/gtk/gtk_resize.cpp:369
+#: plugins/ADM_videoFilters/MplayerResize/gtk/gtk_resize.cpp:391
+msgid "4:3"
+msgstr "4:3"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_resize.cpp:376
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_resize.cpp:398
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp:43
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_resizeWiz.cpp:44
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_SVCD.cpp:43
+#: plugins/ADM_videoFilters/AvisynthResize/gtk/gtk_resize.cpp:373
+#: plugins/ADM_videoFilters/AvisynthResize/gtk/gtk_resize.cpp:395
+#: plugins/ADM_videoFilters/MplayerResize/gtk/gtk_resize.cpp:373
+#: plugins/ADM_videoFilters/MplayerResize/gtk/gtk_resize.cpp:395
+msgid "16:9"
+msgstr "16:9"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_resize.cpp:404
+#: plugins/ADM_videoFilters/AvisynthResize/gtk/gtk_resize.cpp:401
+#: plugins/ADM_videoFilters/MplayerResize/gtk/gtk_resize.cpp:401
+msgid " Error X:"
+msgstr " Hiba X:"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_resize.cpp:418
+#: plugins/ADM_videoFilters/AvisynthResize/gtk/gtk_resize.cpp:415
+#: plugins/ADM_videoFilters/MplayerResize/gtk/gtk_resize.cpp:415
+msgid " Error Y:"
+msgstr " Hiba Y:"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_resize.cpp:432
+#: plugins/ADM_videoFilters/AvisynthResize/gtk/gtk_resize.cpp:429
+#: plugins/ADM_videoFilters/MplayerResize/gtk/gtk_resize.cpp:429
+msgid "16 round up"
+msgstr "16-ra kerek?t?s"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_resize.cpp:446
+#: plugins/ADM_videoFilters/AvisynthResize/gtk/gtk_resize.cpp:443
+#: plugins/ADM_videoFilters/MplayerResize/gtk/gtk_resize.cpp:443
+msgid "Bilinear"
+msgstr "Bilinear"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_resize.cpp:450
+#: plugins/ADM_videoFilters/AvisynthResize/gtk/gtk_resize.cpp:447
+#: plugins/ADM_videoFilters/MplayerResize/gtk/gtk_resize.cpp:447
+msgid "Bicubic"
+msgstr "Bicubic"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_resize.cpp:454
+#: plugins/ADM_videoFilters/AvisynthResize/gtk/gtk_resize.cpp:451
+#: plugins/ADM_videoFilters/MplayerResize/gtk/gtk_resize.cpp:451
+msgid "Lanczos3"
+msgstr "Lanczos3"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_particle.cpp:269
+msgid "Particle Analysis Configuration"
+msgstr "R?szecske-elemz?si konfigur?ci?"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_vcodec.cpp:78
+msgid "Video encoder"
+msgstr "Vide? k?dol?"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_vcodec.cpp:92
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1086
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1126
+msgid "Configure"
+msgstr "Be?ll?t?s"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_idx_pg.cpp:39
+msgid "Continue indexing"
+msgstr "Indexel?s folytat?sa"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_idx_pg.cpp:39
+msgid "Abort Requested"
+msgstr "Megszak?t?st k?rt"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_idx_pg.cpp:39
+msgid "Do you want to abort indexing ?"
+msgstr "Biztos, hogy megszak?tja az indexel?st ?"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_idx_pg.cpp:141
+msgid "Indexing..."
+msgstr "Indexel?s..."
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_idx_pg.cpp:162
+msgid "Time left :"
+msgstr "H?tral?v? id? :"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_idx_pg.cpp:170
+msgid "Timecode :"
+msgstr "Id?k?d :"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_idx_pg.cpp:178
+msgid "Nb pictures seen :"
+msgstr "Feldolgozott k?pek sz?ma :"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_idx_pg.cpp:202
+msgid "Indexing :"
+msgstr "Indexel?s :"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_idx_pg.cpp:210
+msgid "/dev/null"
+msgstr "/dev/null"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_about.cpp:33
+msgid "and all the others."
+msgstr "?s minden egy?b"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_about.cpp:56
+msgid "Multi-platform Video Editor"
+msgstr "T?bb-plattformos Vide? Szerkeszt?"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_about.cpp:57
+msgid ""
+"Avidemux is free software; you can redistribute it and/or modify it\n"
+"under the terms of the GNU General Public License version 2\n"
+"as published by the Free Software Foundation.\n"
+"\n"
+"\t\t    GNU GENERAL PUBLIC LICENSE\n"
+"\t\t       Version 2, June 1991\n"
+"\n"
+" Copyright (C) 1989, 1991 Free Software Foundation, Inc.\n"
+"                       51 Franklin St, Fifth Floor, Boston, MA  02110-1301  "
+"USA\n"
+" Everyone is permitted to copy and distribute verbatim copies\n"
+" of this license document, but changing it is not allowed.\n"
+"\n"
+"\t\t\t    Preamble\n"
+"\n"
+"  The licenses for most software are designed to take away your\n"
+"freedom to share and change it.  By contrast, the GNU General Public\n"
+"License is intended to guarantee your freedom to share and change free\n"
+"software--to make sure the software is free for all its users.  This\n"
+"General Public License applies to most of the Free Software\n"
+"Foundation's software and to any other program whose authors commit to\n"
+"using it.  (Some other Free Software Foundation software is covered by\n"
+"the GNU Library General Public License instead.)  You can apply it to\n"
+"your programs, too.\n"
+"\n"
+"  When we speak of free software, we are referring to freedom, not\n"
+"price.  Our General Public Licenses are designed to make sure that you\n"
+"have the freedom to distribute copies of free software (and charge for\n"
+"this service if you wish), that you receive source code or can get it\n"
+"if you want it, that you can change the software or use pieces of it\n"
+"in new free programs; and that you know you can do these things.\n"
+"\n"
+"  To protect your rights, we need to make restrictions that forbid\n"
+"anyone to deny you these rights or to ask you to surrender the rights.\n"
+"These restrictions translate to certain responsibilities for you if you\n"
+"distribute copies of the software, or if you modify it.\n"
+"\n"
+"  For example, if you distribute copies of such a program, whether\n"
+"gratis or for a fee, you must give the recipients all the rights that\n"
+"you have.  You must make sure that they, too, receive or can get the\n"
+"source code.  And you must show them these terms so they know their\n"
+"rights.\n"
+"\n"
+"  We protect your rights with two steps: (1) copyright the software, and\n"
+"(2) offer you this license which gives you legal permission to copy,\n"
+"distribute and/or modify the software.\n"
+"\n"
+"  Also, for each author's protection and ours, we want to make certain\n"
+"that everyone understands that there is no warranty for this free\n"
+"software.  If the software is modified by someone else and passed on, we\n"
+"want its recipients to know that what they have is not the original, so\n"
+"that any problems introduced by others will not reflect on the original\n"
+"authors' reputations.\n"
+"\n"
+"  Finally, any free program is threatened constantly by software\n"
+"patents.  We wish to avoid the danger that redistributors of a free\n"
+"program will individually obtain patent licenses, in effect making the\n"
+"program proprietary.  To prevent this, we have made it clear that any\n"
+"patent must be licensed for everyone's free use or not licensed at all.\n"
+"\n"
+"  The precise terms and conditions for copying, distribution and\n"
+"modification follow.\n"
+"\n"
+"\t\t    GNU GENERAL PUBLIC LICENSE\n"
+"   TERMS AND CONDITIONS FOR COPYING, DISTRIBUTION AND MODIFICATION\n"
+"\n"
+"  0. This License applies to any program or other work which contains\n"
+"a notice placed by the copyright holder saying it may be distributed\n"
+"under the terms of this General Public License.  The \"Program\", below,\n"
+"refers to any such program or work, and a \"work based on the Program\"\n"
+"means either the Program or any derivative work under copyright law:\n"
+"that is to say, a work containing the Program or a portion of it,\n"
+"either verbatim or with modifications and/or translated into another\n"
+"language.  (Hereinafter, translation is included without limitation in\n"
+"the term \"modification\".)  Each licensee is addressed as \"you\".\n"
+"\n"
+"Activities other than copying, distribution and modification are not\n"
+"covered by this License; they are outside its scope.  The act of\n"
+"running the Program is not restricted, and the output from the Program\n"
+"is covered only if its contents constitute a work based on the\n"
+"Program (independent of having been made by running the Program).\n"
+"Whether that is true depends on what the Program does.\n"
+"\n"
+"  1. You may copy and distribute verbatim copies of the Program's\n"
+"source code as you receive it, in any medium, provided that you\n"
+"conspicuously and appropriately publish on each copy an appropriate\n"
+"copyright notice and disclaimer of warranty; keep intact all the\n"
+"notices that refer to this License and to the absence of any warranty;\n"
+"and give any other recipients of the Program a copy of this License\n"
+"along with the Program.\n"
+"\n"
+"You may charge a fee for the physical act of transferring a copy, and\n"
+"you may at your option offer warranty protection in exchange for a fee.\n"
+"\n"
+"  2. You may modify your copy or copies of the Program or any portion\n"
+"of it, thus forming a work based on the Program, and copy and\n"
+"distribute such modifications or work under the terms of Section 1\n"
+"above, provided that you also meet all of these conditions:\n"
+"\n"
+"    a) You must cause the modified files to carry prominent notices\n"
+"    stating that you changed the files and the date of any change.\n"
+"\n"
+"    b) You must cause any work that you distribute or publish, that in\n"
+"    whole or in part contains or is derived from the Program or any\n"
+"    part thereof, to be licensed as a whole at no charge to all third\n"
+"    parties under the terms of this License.\n"
+"\n"
+"    c) If the modified program normally reads commands interactively\n"
+"    when run, you must cause it, when started running for such\n"
+"    interactive use in the most ordinary way, to print or display an\n"
+"    announcement including an appropriate copyright notice and a\n"
+"    notice that there is no warranty (or else, saying that you provide\n"
+"    a warranty) and that users may redistribute the program under\n"
+"    these conditions, and telling the user how to view a copy of this\n"
+"    License.  (Exception: if the Program itself is interactive but\n"
+"    does not normally print such an announcement, your work based on\n"
+"    the Program is not required to print an announcement.)\n"
+"\n"
+"These requirements apply to the modified work as a whole.  If\n"
+"identifiable sections of that work are not derived from the Program,\n"
+"and can be reasonably considered independent and separate works in\n"
+"themselves, then this License, and its terms, do not apply to those\n"
+"sections when you distribute them as separate works.  But when you\n"
+"distribute the same sections as part of a whole which is a work based\n"
+"on the Program, the distribution of the whole must be on the terms of\n"
+"this License, whose permissions for other licensees extend to the\n"
+"entire whole, and thus to each and every part regardless of who wrote it.\n"
+"\n"
+"Thus, it is not the intent of this section to claim rights or contest\n"
+"your rights to work written entirely by you; rather, the intent is to\n"
+"exercise the right to control the distribution of derivative or\n"
+"collective works based on the Program.\n"
+"\n"
+"In addition, mere aggregation of another work not based on the Program\n"
+"with the Program (or with a work based on the Program) on a volume of\n"
+"a storage or distribution medium does not bring the other work under\n"
+"the scope of this License.\n"
+"\n"
+"  3. You may copy and distribute the Program (or a work based on it,\n"
+"under Section 2) in object code or executable form under the terms of\n"
+"Sections 1 and 2 above provided that you also do one of the following:\n"
+"\n"
+"    a) Accompany it with the complete corresponding machine-readable\n"
+"    source code, which must be distributed under the terms of Sections\n"
+"    1 and 2 above on a medium customarily used for software interchange; "
+"or,\n"
+"\n"
+"    b) Accompany it with a written offer, valid for at least three\n"
+"    years, to give any third party, for a charge no more than your\n"
+"    cost of physically performing source distribution, a complete\n"
+"    machine-readable copy of the corresponding source code, to be\n"
+"    distributed under the terms of Sections 1 and 2 above on a medium\n"
+"    customarily used for software interchange; or,\n"
+"\n"
+"    c) Accompany it with the information you received as to the offer\n"
+"    to distribute corresponding source code.  (This alternative is\n"
+"    allowed only for noncommercial distribution and only if you\n"
+"    received the program in object code or executable form with such\n"
+"    an offer, in accord with Subsection b above.)\n"
+"\n"
+"The source code for a work means the preferred form of the work for\n"
+"making modifications to it.  For an executable work, complete source\n"
+"code means all the source code for all modules it contains, plus any\n"
+"associated interface definition files, plus the scripts used to\n"
+"control compilation and installation of the executable.  However, as a\n"
+"special exception, the source code distributed need not include\n"
+"anything that is normally distributed (in either source or binary\n"
+"form) with the major components (compiler, kernel, and so on) of the\n"
+"operating system on which the executable runs, unless that component\n"
+"itself accompanies the executable.\n"
+"\n"
+"If distribution of executable or object code is made by offering\n"
+"access to copy from a designated place, then offering equivalent\n"
+"access to copy the source code from the same place counts as\n"
+"distribution of the source code, even though third parties are not\n"
+"compelled to copy the source along with the object code.\n"
+"\n"
+"  4. You may not copy, modify, sublicense, or distribute the Program\n"
+"except as expressly provided under this License.  Any attempt\n"
+"otherwise to copy, modify, sublicense or distribute the Program is\n"
+"void, and will automatically terminate your rights under this License.\n"
+"However, parties who have received copies, or rights, from you under\n"
+"this License will not have their licenses terminated so long as such\n"
+"parties remain in full compliance.\n"
+"\n"
+"  5. You are not required to accept this License, since you have not\n"
+"signed it.  However, nothing else grants you permission to modify or\n"
+"distribute the Program or its derivative works.  These actions are\n"
+"prohibited by law if you do not accept this License.  Therefore, by\n"
+"modifying or distributing the Program (or any work based on the\n"
+"Program), you indicate your acceptance of this License to do so, and\n"
+"all its terms and conditions for copying, distributing or modifying\n"
+"the Program or works based on it.\n"
+"\n"
+"  6. Each time you redistribute the Program (or any work based on the\n"
+"Program), the recipient automatically receives a license from the\n"
+"original licensor to copy, distribute or modify the Program subject to\n"
+"these terms and conditions.  You may not impose any further\n"
+"restrictions on the recipients' exercise of the rights granted herein.\n"
+"You are not responsible for enforcing compliance by third parties to\n"
+"this License.\n"
+"\n"
+"  7. If, as a consequence of a court judgment or allegation of patent\n"
+"infringement or for any other reason (not limited to patent issues),\n"
+"conditions are imposed on you (whether by court order, agreement or\n"
+"otherwise) that contradict the conditions of this License, they do not\n"
+"excuse you from the conditions of this License.  If you cannot\n"
+"distribute so as to satisfy simultaneously your obligations under this\n"
+"License and any other pertinent obligations, then as a consequence you\n"
+"may not distribute the Program at all.  For example, if a patent\n"
+"license would not permit royalty-free redistribution of the Program by\n"
+"all those who receive copies directly or indirectly through you, then\n"
+"the only way you could satisfy both it and this License would be to\n"
+"refrain entirely from distribution of the Program.\n"
+"\n"
+"If any portion of this section is held invalid or unenforceable under\n"
+"any particular circumstance, the balance of the section is intended to\n"
+"apply and the section as a whole is intended to apply in other\n"
+"circumstances.\n"
+"\n"
+"It is not the purpose of this section to induce you to infringe any\n"
+"patents or other property right claims or to contest validity of any\n"
+"such claims; this section has the sole purpose of protecting the\n"
+"integrity of the free software distribution system, which is\n"
+"implemented by public license practices.  Many people have made\n"
+"generous contributions to the wide range of software distributed\n"
+"through that system in reliance on consistent application of that\n"
+"system; it is up to the author/donor to decide if he or she is willing\n"
+"to distribute software through any other system and a licensee cannot\n"
+"impose that choice.\n"
+"\n"
+"This section is intended to make thoroughly clear what is believed to\n"
+"be a consequence of the rest of this License.\n"
+"\n"
+"  8. If the distribution and/or use of the Program is restricted in\n"
+"certain countries either by patents or by copyrighted interfaces, the\n"
+"original copyright holder who places the Program under this License\n"
+"may add an explicit geographical distribution limitation excluding\n"
+"those countries, so that distribution is permitted only in or among\n"
+"countries not thus excluded.  In such case, this License incorporates\n"
+"the limitation as if written in the body of this License.\n"
+"\n"
+"  9. The Free Software Foundation may publish revised and/or new versions\n"
+"of the General Public License from time to time.  Such new versions will\n"
+"be similar in spirit to the present version, but may differ in detail to\n"
+"address new problems or concerns.\n"
+"\n"
+"Each version is given a distinguishing version number.  If the Program\n"
+"specifies a version number of this License which applies to it and \"any\n"
+"later version\", you have the option of following the terms and conditions\n"
+"either of that version or of any later version published by the Free\n"
+"Software Foundation.  If the Program does not specify a version number of\n"
+"this License, you may choose any version ever published by the Free "
+"Software\n"
+"Foundation.\n"
+"\n"
+"  10. If you wish to incorporate parts of the Program into other free\n"
+"programs whose distribution conditions are different, write to the author\n"
+"to ask for permission.  For software which is copyrighted by the Free\n"
+"Software Foundation, write to the Free Software Foundation; we sometimes\n"
+"make exceptions for this.  Our decision will be guided by the two goals\n"
+"of preserving the free status of all derivatives of our free software and\n"
+"of promoting the sharing and reuse of software generally.\n"
+"\n"
+"\t\t\t    NO WARRANTY\n"
+"\n"
+"  11. BECAUSE THE PROGRAM IS LICENSED FREE OF CHARGE, THERE IS NO WARRANTY\n"
+"FOR THE PROGRAM, TO THE EXTENT PERMITTED BY APPLICABLE LAW.  EXCEPT WHEN\n"
+"OTHERWISE STATED IN WRITING THE COPYRIGHT HOLDERS AND/OR OTHER PARTIES\n"
+"PROVIDE THE PROGRAM \"AS IS\" WITHOUT WARRANTY OF ANY KIND, EITHER "
+"EXPRESSED\n"
+"OR IMPLIED, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF\n"
+"MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  THE ENTIRE RISK AS\n"
+"TO THE QUALITY AND PERFORMANCE OF THE PROGRAM IS WITH YOU.  SHOULD THE\n"
+"PROGRAM PROVE DEFECTIVE, YOU ASSUME THE COST OF ALL NECESSARY SERVICING,\n"
+"REPAIR OR CORRECTION.\n"
+"\n"
+"  12. IN NO EVENT UNLESS REQUIRED BY APPLICABLE LAW OR AGREED TO IN WRITING\n"
+"WILL ANY COPYRIGHT HOLDER, OR ANY OTHER PARTY WHO MAY MODIFY AND/OR\n"
+"REDISTRIBUTE THE PROGRAM AS PERMITTED ABOVE, BE LIABLE TO YOU FOR DAMAGES,\n"
+"INCLUDING ANY GENERAL, SPECIAL, INCIDENTAL OR CONSEQUENTIAL DAMAGES ARISING\n"
+"OUT OF THE USE OR INABILITY TO USE THE PROGRAM (INCLUDING BUT NOT LIMITED\n"
+"TO LOSS OF DATA OR DATA BEING RENDERED INACCURATE OR LOSSES SUSTAINED BY\n"
+"YOU OR THIRD PARTIES OR A FAILURE OF THE PROGRAM TO OPERATE WITH ANY OTHER\n"
+"PROGRAMS), EVEN IF SUCH HOLDER OR OTHER PARTY HAS BEEN ADVISED OF THE\n"
+"POSSIBILITY OF SUCH DAMAGES.\n"
+"\n"
+"\t\t     END OF TERMS AND CONDITIONS\n"
+"\n"
+"\t    How to Apply These Terms to Your New Programs\n"
+"\n"
+"  If you develop a new program, and you want it to be of the greatest\n"
+"possible use to the public, the best way to achieve this is to make it\n"
+"free software which everyone can redistribute and change under these terms.\n"
+"\n"
+"  To do so, attach the following notices to the program.  It is safest\n"
+"to attach them to the start of each source file to most effectively\n"
+"convey the exclusion of warranty; and each file should have at least\n"
+"the \"copyright\" line and a pointer to where the full notice is found.\n"
+"\n"
+"    <one line to give the program's name and a brief idea of what it does.>\n"
+"    Copyright (C) <year>  <name of author>\n"
+"\n"
+"    This program is free software; you can redistribute it and/or modify\n"
+"    it under the terms of the GNU General Public License as published by\n"
+"    the Free Software Foundation; either version 2 of the License, or\n"
+"    (at your option) any later version.\n"
+"\n"
+"    This program is distributed in the hope that it will be useful,\n"
+"    but WITHOUT ANY WARRANTY; without even the implied warranty of\n"
+"    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n"
+"    GNU General Public License for more details.\n"
+"\n"
+"    You should have received a copy of the GNU General Public License\n"
+"    along with this program; if not, write to the Free Software\n"
+"    Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA  02110-1301  "
+"USA\n"
+"\n"
+"\n"
+"Also add information on how to contact you by electronic and paper mail.\n"
+"\n"
+"If the program is interactive, make it output a short notice like this\n"
+"when it starts in an interactive mode:\n"
+"\n"
+"    Gnomovision version 69, Copyright (C) year name of author\n"
+"    Gnomovision comes with ABSOLUTELY NO WARRANTY; for details type `show "
+"w'.\n"
+"    This is free software, and you are welcome to redistribute it\n"
+"    under certain conditions; type `show c' for details.\n"
+"\n"
+"The hypothetical commands `show w' and `show c' should show the appropriate\n"
+"parts of the General Public License.  Of course, the commands you use may\n"
+"be called something other than `show w' and `show c'; they could even be\n"
+"mouse-clicks or menu items--whatever suits your program.\n"
+"\n"
+"You should also get your employer (if you work as a programmer) or your\n"
+"school, if any, to sign a \"copyright disclaimer\" for the program, if\n"
+"necessary.  Here is a sample; alter the names:\n"
+"\n"
+"  Yoyodyne, Inc., hereby disclaims all copyright interest in the program\n"
+"  `Gnomovision' (which makes passes at compilers) written by James Hacker.\n"
+"\n"
+"  <signature of Ty Coon>, 1 April 1989\n"
+"  Ty Coon, President of Vice\n"
+"\n"
+"This General Public License does not permit incorporating your program into\n"
+"proprietary programs.  If your program is a subroutine library, you may\n"
+"consider it more useful to permit linking proprietary applications with the\n"
+"library.  If this is what you want to do, use the GNU Library General\n"
+"Public License instead of this License."
+msgstr ""
+"Avidemux is free software; you can redistribute it and/or modify it\n"
+"under the terms of the GNU General Public License version 2\n"
+"as published by the Free Software Foundation.\n"
+"\n"
+"\t\t    GNU GENERAL PUBLIC LICENSE\n"
+"\t\t       Version 2, June 1991\n"
+"\n"
+" Copyright (C) 1989, 1991 Free Software Foundation, Inc.\n"
+"                       51 Franklin St, Fifth Floor, Boston, MA  02110-1301  USA\n"
+" Everyone is permitted to copy and distribute verbatim copies\n"
+" of this license document, but changing it is not allowed.\n"
+"\n"
+"\t\t\t    Preamble\n"
+"\n"
+"  The licenses for most software are designed to take away your\n"
+"freedom to share and change it.  By contrast, the GNU General Public\n"
+"License is intended to guarantee your freedom to share and change free\n"
+"software--to make sure the software is free for all its users.  This\n"
+"General Public License applies to most of the Free Software\n"
+"Foundation's software and to any other program whose authors commit to\n"
+"using it.  (Some other Free Software Foundation software is covered by\n"
+"the GNU Library General Public License instead.)  You can apply it to\n"
+"your programs, too.\n"
+"\n"
+"  When we speak of free software, we are referring to freedom, not\n"
+"price.  Our General Public Licenses are designed to make sure that you\n"
+"have the freedom to distribute copies of free software (and charge for\n"
+"this service if you wish), that you receive source code or can get it\n"
+"if you want it, that you can change the software or use pieces of it\n"
+"in new free programs; and that you know you can do these things.\n"
+"\n"
+"  To protect your rights, we need to make restrictions that forbid\n"
+"anyone to deny you these rights or to ask you to surrender the rights.\n"
+"These restrictions translate to certain responsibilities for you if you\n"
+"distribute copies of the software, or if you modify it.\n"
+"\n"
+"  For example, if you distribute copies of such a program, whether\n"
+"gratis or for a fee, you must give the recipients all the rights that\n"
+"you have.  You must make sure that they, too, receive or can get the\n"
+"source code.  And you must show them these terms so they know their\n"
+"rights.\n"
+"\n"
+"  We protect your rights with two steps: (1) copyright the software, and\n"
+"(2) offer you this license which gives you legal permission to copy,\n"
+"distribute and/or modify the software.\n"
+"\n"
+"  Also, for each author's protection and ours, we want to make certain\n"
+"that everyone understands that there is no warranty for this free\n"
+"software.  If the software is modified by someone else and passed on, we\n"
+"want its recipients to know that what they have is not the original, so\n"
+"that any problems introduced by others will not reflect on the original\n"
+"authors' reputations.\n"
+"\n"
+"  Finally, any free program is threatened constantly by software\n"
+"patents.  We wish to avoid the danger that redistributors of a free\n"
+"program will individually obtain patent licenses, in effect making the\n"
+"program proprietary.  To prevent this, we have made it clear that any\n"
+"patent must be licensed for everyone's free use or not licensed at all.\n"
+"\n"
+"  The precise terms and conditions for copying, distribution and\n"
+"modification follow.\n"
+"\n"
+"\t\t    GNU GENERAL PUBLIC LICENSE\n"
+"   TERMS AND CONDITIONS FOR COPYING, DISTRIBUTION AND MODIFICATION\n"
+"\n"
+"  0. This License applies to any program or other work which contains\n"
+"a notice placed by the copyright holder saying it may be distributed\n"
+"under the terms of this General Public License.  The \"Program\", below,\n"
+"refers to any such program or work, and a \"work based on the Program\"\n"
+"means either the Program or any derivative work under copyright law:\n"
+"that is to say, a work containing the Program or a portion of it,\n"
+"either verbatim or with modifications and/or translated into another\n"
+"language.  (Hereinafter, translation is included without limitation in\n"
+"the term \"modification\".)  Each licensee is addressed as \"you\".\n"
+"\n"
+"Activities other than copying, distribution and modification are not\n"
+"covered by this License; they are outside its scope.  The act of\n"
+"running the Program is not restricted, and the output from the Program\n"
+"is covered only if its contents constitute a work based on the\n"
+"Program (independent of having been made by running the Program).\n"
+"Whether that is true depends on what the Program does.\n"
+"\n"
+"  1. You may copy and distribute verbatim copies of the Program's\n"
+"source code as you receive it, in any medium, provided that you\n"
+"conspicuously and appropriately publish on each copy an appropriate\n"
+"copyright notice and disclaimer of warranty; keep intact all the\n"
+"notices that refer to this License and to the absence of any warranty;\n"
+"and give any other recipients of the Program a copy of this License\n"
+"along with the Program.\n"
+"\n"
+"You may charge a fee for the physical act of transferring a copy, and\n"
+"you may at your option offer warranty protection in exchange for a fee.\n"
+"\n"
+"  2. You may modify your copy or copies of the Program or any portion\n"
+"of it, thus forming a work based on the Program, and copy and\n"
+"distribute such modifications or work under the terms of Section 1\n"
+"above, provided that you also meet all of these conditions:\n"
+"\n"
+"    a) You must cause the modified files to carry prominent notices\n"
+"    stating that you changed the files and the date of any change.\n"
+"\n"
+"    b) You must cause any work that you distribute or publish, that in\n"
+"    whole or in part contains or is derived from the Program or any\n"
+"    part thereof, to be licensed as a whole at no charge to all third\n"
+"    parties under the terms of this License.\n"
+"\n"
+"    c) If the modified program normally reads commands interactively\n"
+"    when run, you must cause it, when started running for such\n"
+"    interactive use in the most ordinary way, to print or display an\n"
+"    announcement including an appropriate copyright notice and a\n"
+"    notice that there is no warranty (or else, saying that you provide\n"
+"    a warranty) and that users may redistribute the program under\n"
+"    these conditions, and telling the user how to view a copy of this\n"
+"    License.  (Exception: if the Program itself is interactive but\n"
+"    does not normally print such an announcement, your work based on\n"
+"    the Program is not required to print an announcement.)\n"
+"\n"
+"These requirements apply to the modified work as a whole.  If\n"
+"identifiable sections of that work are not derived from the Program,\n"
+"and can be reasonably considered independent and separate works in\n"
+"themselves, then this License, and its terms, do not apply to those\n"
+"sections when you distribute them as separate works.  But when you\n"
+"distribute the same sections as part of a whole which is a work based\n"
+"on the Program, the distribution of the whole must be on the terms of\n"
+"this License, whose permissions for other licensees extend to the\n"
+"entire whole, and thus to each and every part regardless of who wrote it.\n"
+"\n"
+"Thus, it is not the intent of this section to claim rights or contest\n"
+"your rights to work written entirely by you; rather, the intent is to\n"
+"exercise the right to control the distribution of derivative or\n"
+"collective works based on the Program.\n"
+"\n"
+"In addition, mere aggregation of another work not based on the Program\n"
+"with the Program (or with a work based on the Program) on a volume of\n"
+"a storage or distribution medium does not bring the other work under\n"
+"the scope of this License.\n"
+"\n"
+"  3. You may copy and distribute the Program (or a work based on it,\n"
+"under Section 2) in object code or executable form under the terms of\n"
+"Sections 1 and 2 above provided that you also do one of the following:\n"
+"\n"
+"    a) Accompany it with the complete corresponding machine-readable\n"
+"    source code, which must be distributed under the terms of Sections\n"
+"    1 and 2 above on a medium customarily used for software interchange; or,\n"
+"\n"
+"    b) Accompany it with a written offer, valid for at least three\n"
+"    years, to give any third party, for a charge no more than your\n"
+"    cost of physically performing source distribution, a complete\n"
+"    machine-readable copy of the corresponding source code, to be\n"
+"    distributed under the terms of Sections 1 and 2 above on a medium\n"
+"    customarily used for software interchange; or,\n"
+"\n"
+"    c) Accompany it with the information you received as to the offer\n"
+"    to distribute corresponding source code.  (This alternative is\n"
+"    allowed only for noncommercial distribution and only if you\n"
+"    received the program in object code or executable form with such\n"
+"    an offer, in accord with Subsection b above.)\n"
+"\n"
+"The source code for a work means the preferred form of the work for\n"
+"making modifications to it.  For an executable work, complete source\n"
+"code means all the source code for all modules it contains, plus any\n"
+"associated interface definition files, plus the scripts used to\n"
+"control compilation and installation of the executable.  However, as a\n"
+"special exception, the source code distributed need not include\n"
+"anything that is normally distributed (in either source or binary\n"
+"form) with the major components (compiler, kernel, and so on) of the\n"
+"operating system on which the executable runs, unless that component\n"
+"itself accompanies the executable.\n"
+"\n"
+"If distribution of executable or object code is made by offering\n"
+"access to copy from a designated place, then offering equivalent\n"
+"access to copy the source code from the same place counts as\n"
+"distribution of the source code, even though third parties are not\n"
+"compelled to copy the source along with the object code.\n"
+"\n"
+"  4. You may not copy, modify, sublicense, or distribute the Program\n"
+"except as expressly provided under this License.  Any attempt\n"
+"otherwise to copy, modify, sublicense or distribute the Program is\n"
+"void, and will automatically terminate your rights under this License.\n"
+"However, parties who have received copies, or rights, from you under\n"
+"this License will not have their licenses terminated so long as such\n"
+"parties remain in full compliance.\n"
+"\n"
+"  5. You are not required to accept this License, since you have not\n"
+"signed it.  However, nothing else grants you permission to modify or\n"
+"distribute the Program or its derivative works.  These actions are\n"
+"prohibited by law if you do not accept this License.  Therefore, by\n"
+"modifying or distributing the Program (or any work based on the\n"
+"Program), you indicate your acceptance of this License to do so, and\n"
+"all its terms and conditions for copying, distributing or modifying\n"
+"the Program or works based on it.\n"
+"\n"
+"  6. Each time you redistribute the Program (or any work based on the\n"
+"Program), the recipient automatically receives a license from the\n"
+"original licensor to copy, distribute or modify the Program subject to\n"
+"these terms and conditions.  You may not impose any further\n"
+"restrictions on the recipients' exercise of the rights granted herein.\n"
+"You are not responsible for enforcing compliance by third parties to\n"
+"this License.\n"
+"\n"
+"  7. If, as a consequence of a court judgment or allegation of patent\n"
+"infringement or for any other reason (not limited to patent issues),\n"
+"conditions are imposed on you (whether by court order, agreement or\n"
+"otherwise) that contradict the conditions of this License, they do not\n"
+"excuse you from the conditions of this License.  If you cannot\n"
+"distribute so as to satisfy simultaneously your obligations under this\n"
+"License and any other pertinent obligations, then as a consequence you\n"
+"may not distribute the Program at all.  For example, if a patent\n"
+"license would not permit royalty-free redistribution of the Program by\n"
+"all those who receive copies directly or indirectly through you, then\n"
+"the only way you could satisfy both it and this License would be to\n"
+"refrain entirely from distribution of the Program.\n"
+"\n"
+"If any portion of this section is held invalid or unenforceable under\n"
+"any particular circumstance, the balance of the section is intended to\n"
+"apply and the section as a whole is intended to apply in other\n"
+"circumstances.\n"
+"\n"
+"It is not the purpose of this section to induce you to infringe any\n"
+"patents or other property right claims or to contest validity of any\n"
+"such claims; this section has the sole purpose of protecting the\n"
+"integrity of the free software distribution system, which is\n"
+"implemented by public license practices.  Many people have made\n"
+"generous contributions to the wide range of software distributed\n"
+"through that system in reliance on consistent application of that\n"
+"system; it is up to the author/donor to decide if he or she is willing\n"
+"to distribute software through any other system and a licensee cannot\n"
+"impose that choice.\n"
+"\n"
+"This section is intended to make thoroughly clear what is believed to\n"
+"be a consequence of the rest of this License.\n"
+"\n"
+"  8. If the distribution and/or use of the Program is restricted in\n"
+"certain countries either by patents or by copyrighted interfaces, the\n"
+"original copyright holder who places the Program under this License\n"
+"may add an explicit geographical distribution limitation excluding\n"
+"those countries, so that distribution is permitted only in or among\n"
+"countries not thus excluded.  In such case, this License incorporates\n"
+"the limitation as if written in the body of this License.\n"
+"\n"
+"  9. The Free Software Foundation may publish revised and/or new versions\n"
+"of the General Public License from time to time.  Such new versions will\n"
+"be similar in spirit to the present version, but may differ in detail to\n"
+"address new problems or concerns.\n"
+"\n"
+"Each version is given a distinguishing version number.  If the Program\n"
+"specifies a version number of this License which applies to it and \"any\n"
+"later version\", you have the option of following the terms and conditions\n"
+"either of that version or of any later version published by the Free\n"
+"Software Foundation.  If the Program does not specify a version number of\n"
+"this License, you may choose any version ever published by the Free Software\n"
+"Foundation.\n"
+"\n"
+"  10. If you wish to incorporate parts of the Program into other free\n"
+"programs whose distribution conditions are different, write to the author\n"
+"to ask for permission.  For software which is copyrighted by the Free\n"
+"Software Foundation, write to the Free Software Foundation; we sometimes\n"
+"make exceptions for this.  Our decision will be guided by the two goals\n"
+"of preserving the free status of all derivatives of our free software and\n"
+"of promoting the sharing and reuse of software generally.\n"
+"\n"
+"\t\t\t    NO WARRANTY\n"
+"\n"
+"  11. BECAUSE THE PROGRAM IS LICENSED FREE OF CHARGE, THERE IS NO WARRANTY\n"
+"FOR THE PROGRAM, TO THE EXTENT PERMITTED BY APPLICABLE LAW.  EXCEPT WHEN\n"
+"OTHERWISE STATED IN WRITING THE COPYRIGHT HOLDERS AND/OR OTHER PARTIES\n"
+"PROVIDE THE PROGRAM \"AS IS\" WITHOUT WARRANTY OF ANY KIND, EITHER EXPRESSED\n"
+"OR IMPLIED, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF\n"
+"MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  THE ENTIRE RISK AS\n"
+"TO THE QUALITY AND PERFORMANCE OF THE PROGRAM IS WITH YOU.  SHOULD THE\n"
+"PROGRAM PROVE DEFECTIVE, YOU ASSUME THE COST OF ALL NECESSARY SERVICING,\n"
+"REPAIR OR CORRECTION.\n"
+"\n"
+"  12. IN NO EVENT UNLESS REQUIRED BY APPLICABLE LAW OR AGREED TO IN WRITING\n"
+"WILL ANY COPYRIGHT HOLDER, OR ANY OTHER PARTY WHO MAY MODIFY AND/OR\n"
+"REDISTRIBUTE THE PROGRAM AS PERMITTED ABOVE, BE LIABLE TO YOU FOR DAMAGES,\n"
+"INCLUDING ANY GENERAL, SPECIAL, INCIDENTAL OR CONSEQUENTIAL DAMAGES ARISING\n"
+"OUT OF THE USE OR INABILITY TO USE THE PROGRAM (INCLUDING BUT NOT LIMITED\n"
+"TO LOSS OF DATA OR DATA BEING RENDERED INACCURATE OR LOSSES SUSTAINED BY\n"
+"YOU OR THIRD PARTIES OR A FAILURE OF THE PROGRAM TO OPERATE WITH ANY OTHER\n"
+"PROGRAMS), EVEN IF SUCH HOLDER OR OTHER PARTY HAS BEEN ADVISED OF THE\n"
+"POSSIBILITY OF SUCH DAMAGES.\n"
+"\n"
+"\t\t     END OF TERMS AND CONDITIONS\n"
+"\n"
+"\t    How to Apply These Terms to Your New Programs\n"
+"\n"
+"  If you develop a new program, and you want it to be of the greatest\n"
+"possible use to the public, the best way to achieve this is to make it\n"
+"free software which everyone can redistribute and change under these terms.\n"
+"\n"
+"  To do so, attach the following notices to the program.  It is safest\n"
+"to attach them to the start of each source file to most effectively\n"
+"convey the exclusion of warranty; and each file should have at least\n"
+"the \"copyright\" line and a pointer to where the full notice is found.\n"
+"\n"
+"    <one line to give the program's name and a brief idea of what it does.>\n"
+"    Copyright (C) <year>  <name of author>\n"
+"\n"
+"    This program is free software; you can redistribute it and/or modify\n"
+"    it under the terms of the GNU General Public License as published by\n"
+"    the Free Software Foundation; either version 2 of the License, or\n"
+"    (at your option) any later version.\n"
+"\n"
+"    This program is distributed in the hope that it will be useful,\n"
+"    but WITHOUT ANY WARRANTY; without even the implied warranty of\n"
+"    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n"
+"    GNU General Public License for more details.\n"
+"\n"
+"    You should have received a copy of the GNU General Public License\n"
+"    along with this program; if not, write to the Free Software\n"
+"    Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA  02110-1301  USA\n"
+"\n"
+"\n"
+"Also add information on how to contact you by electronic and paper mail.\n"
+"\n"
+"If the program is interactive, make it output a short notice like this\n"
+"when it starts in an interactive mode:\n"
+"\n"
+"    Gnomovision version 69, Copyright (C) year name of author\n"
+"    Gnomovision comes with ABSOLUTELY NO WARRANTY; for details type `show w'.\n"
+"    This is free software, and you are welcome to redistribute it\n"
+"    under certain conditions; type `show c' for details.\n"
+"\n"
+"The hypothetical commands `show w' and `show c' should show the appropriate\n"
+"parts of the General Public License.  Of course, the commands you use may\n"
+"be called something other than `show w' and `show c'; they could even be\n"
+"mouse-clicks or menu items--whatever suits your program.\n"
+"\n"
+"You should also get your employer (if you work as a programmer) or your\n"
+"school, if any, to sign a \"copyright disclaimer\" for the program, if\n"
+"necessary.  Here is a sample; alter the names:\n"
+"\n"
+"  Yoyodyne, Inc., hereby disclaims all copyright interest in the program\n"
+"  `Gnomovision' (which makes passes at compilers) written by James Hacker.\n"
+"\n"
+"  <signature of Ty Coon>, 1 April 1989\n"
+"  Ty Coon, President of Vice\n"
+"\n"
+"This General Public License does not permit incorporating your program into\n"
+"proprietary programs.  If your program is a subroutine library, you may\n"
+"consider it more useful to permit linking proprietary applications with the\n"
+"library.  If this is what you want to do, use the GNU Library General\n"
+"Public License instead of this License."
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_about.cpp:62
+msgid "translator-credits"
+msgstr "Andr?ssy L?szl?, <andrassy.laszlo at gmail.com>"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_exLame.cpp:63
+msgid "Lame command"
+msgstr "Lame parancs"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_exLame.cpp:72
+msgid "Enter parameters (i.e. -b 192 -m s ...)"
+msgstr "Param?terek (pl. -b 192 -m s ...)"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_pause.cpp:76
+msgid "Paused"
+msgstr "Meg?ll?tva"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_pause.cpp:92
+msgid ""
+"<b>Encoding is paused.</b>\n"
+"\n"
+"You can either resume or Abort it."
+msgstr ""
+"<b>K?dol?s meg?ll?tva.</b>\n"
+"\n"
+"Folytathatja vagy megszak?thatja."
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_pause.cpp:119
+msgid "Abort"
+msgstr "Megszak?t?s"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_pause.cpp:141
+msgid "Resume"
+msgstr "Folytat?s"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_acodec.cpp:119
+msgid "AudioCodec"
+msgstr "Audi? Kodek"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_acodec.cpp:147
+msgid "Configure codec"
+msgstr "Kodek be?ll?t?sa"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_SwissArmyKnife.cpp:505
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:385
+msgid "Swiss Army Knife Configuration"
+msgstr "Sv?jci bicska be?ll?t?sa"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_recent.cpp:90
+msgid "Recent files"
+msgstr "Legut?bbi f?jlok"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_working.cpp:211
+msgid "Processing"
+msgstr "Feldolgoz?s..."
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_working.cpp:247
+msgid "<b>Time remaining:</b>"
+msgstr "<b>H?tral?v? id?:</b>"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/TLK_filesel.cpp:95
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/TLK_filesel.cpp:199
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/TLK_filesel.cpp:383
+msgid "Cannot open directory as a file"
+msgstr "Nem lehet k?nyvt?rat megnyitni f?jlk?nt"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/TLK_filesel.cpp:437
+msgid "Images"
+msgstr "K?pek"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/TLK_filesel.cpp:448
+msgid "All"
+msgstr "?sszes"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_ocr/adm_ocr.cpp:156
+msgid "Sure ?"
+msgstr "Biztos ?"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_ocr/adm_editglyph.cpp:43
+msgid "Select GlyphFile to edit"
+msgstr "Bet?k?p kiv?laszt?sa szerkeszt?sre"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_ocr/adm_editglyph.cpp:111
+msgid "String"
+msgstr "Sz?tag"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_ocr/adm_editglyph.cpp:113
+msgid "Search string"
+msgstr "Sz?tag keres?se"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_ocr/adm_editglyph.cpp:139
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_ocr/adm_editglyph.cpp:182
+msgid "End reached"
+msgstr "V?g?re ?rt"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_ocr/adm_editglyph.cpp:139
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_ocr/adm_editglyph.cpp:182
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_ocr/adm_editglyph.cpp:206
+msgid "No more glyphs"
+msgstr "Nincs t?bb bet?k?p"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_ocr/adm_editglyph.cpp:206
+msgid "Head reached"
+msgstr "Elej?re ?rt"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_ocr/adm_editglyph.cpp:334
+msgid "dialog1"
+msgstr "p?rbesz?d1"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_ocr/adm_editglyph.cpp:386
+msgid "Prev. Empty"
+msgstr "El?z? ?res"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_ocr/adm_editglyph.cpp:408
+msgid "Next Empty"
+msgstr "K?vetkez? ?res"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_bindings.cpp:534
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:334
+msgid "Input"
+msgstr "Bemenet"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_bindings.cpp:535
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:338
+msgid "Output"
+msgstr "Kimenet"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_bindings.cpp:536
+msgid "Side"
+msgstr "Mellette"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_bindings.cpp:537
+#: plugins/ADM_videoFilters/KernelDeint/ADM_vidKernelDeint.cpp:69
+#: plugins/ADM_videoFilters/McDeint/ADM_vidMcDeint.cpp:96
+#: plugins/ADM_videoFilters/DgBob/ADM_vidDGbob.cpp:75
+#: plugins/ADM_videoFilters/Telecide/ADM_vidDecTelecide.cpp:82
+msgid "Top"
+msgstr "F?l?tte"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_bindings.cpp:538
+msgid "Separate"
+msgstr "K?l?nb?z?"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_bindings.cpp:723
+#, possible-c-format
+msgid "Frame:%c(%02d)"
+msgstr "Frame:%c(%02d)"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:273
+msgid "Avidemux"
+msgstr "Avidemux"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:297
+msgid "_Open..."
+msgstr "_Megnyit?s..."
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:308
+msgid "_Append..."
+msgstr "_Hozz?f?z?s..."
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:319
+msgid "_Save"
+msgstr "M_ent?s"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:330
+msgid "Save _Video..."
+msgstr "_Vide? ment?se..."
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:342
+msgid "Save _BMP Image..."
+msgstr "_BMP k?p ment?se..."
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:346
+msgid "Save _JPEG Image..."
+msgstr "_JPEG k?p ment?se..."
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:350
+msgid "Save _Selection as JPEG Images..."
+msgstr "Kijel?l?_s ment?se JPEG k?pekbe..."
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:363
+msgid "Save _Project"
+msgstr "_Projekt ment?se..."
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:371
+msgid "Save P_roject As..."
+msgstr "P_rojekt ment?se m?sk?nt..."
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:379
+msgid "_Load/Run Project..."
+msgstr "Projekt bet?_lt?se/ind?t?sa..."
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:387
+msgid "A_dd to Joblist..."
+msgstr "Fela_datlist?hoz ad..."
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:391
+msgid "Show _Joblist"
+msgstr "_Feladatlista megjelen?t?se"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:403
+msgid "Co_nnect to avsproxy"
+msgstr "Csatla_koz?s Avsproxy-hoz"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:412
+msgid "Proper_ties"
+msgstr "_Tulajdons?gok"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:423
+msgid "AVI _Muxer glyph"
+msgstr "AVI _Muxer be?ll?t?sa"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:432
+msgid "_Quit"
+msgstr "_Kil?p?s"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:443
+msgid "_Edit"
+msgstr "Sz_erkeszt?s"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:450
+msgid "_Reset Edits"
+msgstr "_M?dos?t?sok vissza?ll?t?sa"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:463
+msgid "Cu_t"
+msgstr "_Kiv?g?s"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:474
+msgid "_Copy"
+msgstr "_M?sol?s"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:485
+msgid "_Paste"
+msgstr "_Beilleszt?s"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:496
+msgid "_Delete"
+msgstr "_T?rl?s"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:512
+msgid "Set Marker _A"
+msgstr "?_A? jelz? be?ll?t?sa"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:519
+msgid "Set Marker _B"
+msgstr "?_B? jelz? be?ll?t?sa"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:531
+msgid "Pre_ferences"
+msgstr "Be?ll?t?sok"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:539
+msgid "_View"
+msgstr "_N?zet"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:546
+msgid "_Main Toolbar"
+msgstr "_Eszk?zt?r"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:551
+msgid "_A/V Sidebar"
+msgstr "_A/V oldals?v"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:561
+msgid "_Zoom 1:4"
+msgstr "_Nagy?t?s 1:4"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:568
+msgid "Z_oom 1:2"
+msgstr "N_agy?t?s 1:2"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:575
+msgid "Zoom _1:1"
+msgstr "Nagy?t?_s 1:1"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:582
+msgid "Zoom _2:1"
+msgstr "Nagy?_t?s 2:1"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:589
+msgid "Vi_deo"
+msgstr "Vi_de?"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:596
+msgid "_Decoder Options"
+msgstr "_Dek?dol? be?ll?t?sa"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:603
+msgid "_Postprocessing"
+msgstr "_Ut?munk?latok"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:606
+msgid "Select postprocessing level"
+msgstr "Ut?munk?latok szintj?nek be?ll?t?sa"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:616
+msgid "P_review"
+msgstr "El?_n?zet"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:623
+msgid "Display _Output"
+msgstr "Ki_menet megjelen?t?se"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:635
+msgid "_Frame Rate"
+msgstr "_Frame-r?ta"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:639
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:688
+msgid "_Encoder"
+msgstr "K?_dol?"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:646
+msgid "Fil_ters"
+msgstr "S_z?r?k"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:653
+msgid "_Audio"
+msgstr "_Audi?"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:660
+msgid "_Main Track"
+msgstr "_F? hangs?v"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:664
+msgid "_Second Track"
+msgstr "_M?sodik hangs?v"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:668
+msgid "_Build VBR Time Map"
+msgstr "V_BR id?t?rk?p k?sz?t?se"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:677
+msgid "S_ave..."
+msgstr "_Ment?s"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:695
+msgid "_Filters"
+msgstr "_Sz?r?k"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:699
+msgid "_Tools"
+msgstr "_Eszk?z?k"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:706
+msgid "_Calculator"
+msgstr "_Sz?mol?g?p"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:722
+msgid "_Rebuild Frames (I & B)"
+msgstr "F_rame-ek ?jra?p?t?se (I & B)"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:726
+msgid "C_heck Frames (slow)"
+msgstr "Fr_ame-ek ellen?rz?se (lass?)"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:730
+msgid "_Bitrate Histogram"
+msgstr "_Bitr?ta hisztogram"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:734
+msgid "_Scan for Black Frames..."
+msgstr "Bla_ck frame-ek keres?se..."
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:743
+msgid "_VOB -> VobSub"
+msgstr "_VOB -> VobSub"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:747
+msgid "_OCR (VobSub -> srt)"
+msgstr "_OCR (VobSub -> srt)"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:751
+msgid "OCR (TS->srt)"
+msgstr "OC_R (TS->srt)"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:755
+msgid "_Edit Glyph"
+msgstr "B_et?k?p szerkeszt?se"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:764
+msgid "_Frame Hex Dump"
+msgstr "_Frame Hex Dump"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:768
+msgid "A_uto"
+msgstr "A_uto"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:775
+msgid "_VCD"
+msgstr "_VCD"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:779
+msgid "_SVCD"
+msgstr "_SVCD"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:783
+msgid "_DVD"
+msgstr "_DVD"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:787
+msgid "_PSP"
+msgstr "_PSP"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:791
+msgid "PSP (_H.264)"
+msgstr "PSP (_H.264)"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:795
+msgid "F_LV"
+msgstr "F_LV"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:799
+msgid "IPOD (mpeg4)"
+msgstr "_IPOD (mpeg4)"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:803
+msgid "_Go"
+msgstr "_Ind?t?s"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:810
+msgid "_Play/Stop"
+msgstr "_Lej?tsz?s/Stop"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:821
+msgid "P_revious Frame"
+msgstr "El?z? f_rame"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:832
+msgid "_Next Frame"
+msgstr "K?_vetkez? frame"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:843
+msgid "Pr_evious Intra Frame"
+msgstr "El?_z? Intra frame"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:854
+msgid "Next _Intra Frame"
+msgstr "K?ve_tkez? Intra frame"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:865
+msgid "Previou_s Black Frame"
+msgstr "El?z? Bl_ack frame"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:869
+msgid "Ne_xt Black Frame"
+msgstr "K?vetke_z? Black frame"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:873
+msgid "_First Frame"
+msgstr "El_s? frame"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:884
+msgid "_Last Frame"
+msgstr "Uto_ls? frame"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:900
+msgid "Go to Marker _A"
+msgstr "?_A? jelz?h?z ugr?s"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:907
+msgid "Go to Marker _B"
+msgstr "?_B? jelz?h?z ugr?s"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:919
+msgid "Go to Fra_me..."
+msgstr "Fra_me-hez ugr?s..."
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:930
+msgid "Go to _Time..."
+msgstr "Id?ponthoz _ugr?s..."
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:941
+msgid "_Custom"
+msgstr "E_gy?ni"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:945
+msgid "_Help"
+msgstr "_S?g?"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:952
+msgid "_Plugins"
+msgstr "_Plugin-ok"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:956
+msgid "_Built-in Support"
+msgstr "_Be?p?tett t?mogat?sok"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:960
+msgid "_About"
+msgstr "_N?vjegy"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:978
+msgid "Open a file"
+msgstr "F?jl megnyit?sa"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:988
+msgid "Save the file"
+msgstr "F?jl ment?se"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:994
+msgid "Audio/video file information"
+msgstr "A f?jl Audi?/Vide? inform?ci?i"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1005
+msgid "Bitrate/size calculator"
+msgstr "Bitr?ta/m?ret kalkul?tor"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1089
+msgid "Configure video encoder"
+msgstr "Vide? k?d?l? be?ll?t?sa"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1094
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1150
+msgid "Filters"
+msgstr "Sz?r?k"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1097
+msgid "Video filters"
+msgstr "Vide? sz?r?k"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1129
+msgid "Configure audio encoder"
+msgstr "Audi? k?d?l? be?ll?t?sa"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1137
+msgid "Audio filters"
+msgstr "Audi? sz?r?k"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1158
+msgid "Shift:"
+msgstr "Eltol?s:"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1161
+msgid "Enable time shift"
+msgstr "Id?eltol?s enged?lyez?se"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1167
+msgid "Audio/video time shift (ms)"
+msgstr "Audi?/Vide? id? eltol?sa (ms)"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1170
+msgid "ms"
+msgstr "ms"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1178
+msgid "<b>Format</b>"
+msgstr "<b>Form?tum</b>"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1211
+msgid "Frame: "
+msgstr "Frame: "
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1218
+msgid "Current frame"
+msgstr "Aktu?lis frame"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1223
+msgid "/ 0000000"
+msgstr "/ 0000000"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1230
+msgid "Time: "
+msgstr "Id?: "
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1237
+msgid "Current time"
+msgstr "Aktu?lis id?"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1238
+msgid "00:00:00.000"
+msgstr "00:00:00.000"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1241
+msgid "/ 00:00:00,000"
+msgstr "/ 00:00:00,000"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1248
+msgid "Frame: ?"
+msgstr "Frame: ?"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1272
+msgid "Play"
+msgstr "Lej?tsz?s"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1286
+msgid "Stop"
+msgstr "Stop"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1298
+msgid "Previous frame"
+msgstr "El?z? frame"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1313
+msgid "Next frame"
+msgstr "K?vetkez? frame"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1328
+msgid "Previous keyframe"
+msgstr "El?z? keyframe"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1343
+msgid "Next keyframe"
+msgstr "K?vetkez? keyframe"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1357
+msgid "Selection: start"
+msgstr "Kijel?l?s: eleje"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1368
+msgid "Selection: end"
+msgstr "Kijel?l?s: v?ge"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1379
+msgid "Previous black frame"
+msgstr "El?z? Black frame"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1390
+msgid "Next black frame"
+msgstr "K?vetkez? Black frame"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1401
+msgid "First frame"
+msgstr "Els? frame"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1412
+msgid "Last frame"
+msgstr "Utols? frame"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1426
+msgid "<b>Selection</b>"
+msgstr "<b>Kijel?l?s</b>"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1443
+msgid "B:"
+msgstr "B:"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1450
+msgid "Go to marker B"
+msgstr "?B? jelz?h?z ugr?s"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1452
+msgid "A:"
+msgstr "A:"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1459
+msgid "Go to marker A"
+msgstr "?A? jelz?h?z ugr?s"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1461
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1469
+msgid " 0000000"
+msgstr " 0000000"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager_dialog.cpp:124
+msgid "Video Filter Manager"
+msgstr "Vide?sz?r? kezel?"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager_dialog.cpp:146
+msgid "Open filter list [Ctrl-O]"
+msgstr "Filter lista megnyit?sa [Ctrl-O]"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager_dialog.cpp:155
+msgid "Save filter list [Ctrl-S]"
+msgstr "Sz?r?lista ment?se [Ctrl-S]"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager_dialog.cpp:163
+msgid "Save Script"
+msgstr "Szkript ment?se"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager_dialog.cpp:166
+msgid "Save as script [Ctrl-J]"
+msgstr "Szkript ment?se m?s n?ven [Ctrl-J]"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager_dialog.cpp:174
+msgid "DVD Res"
+msgstr "DVD felb"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager_dialog.cpp:177
+msgid "DVD resolution [Ctrl-1]"
+msgstr "DVD felbont?s [Ctrl-1]"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager_dialog.cpp:185
+msgid "Half D1 Res"
+msgstr "F?l D1 felb"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager_dialog.cpp:188
+msgid "Half D1 resolution [Ctrl-2]"
+msgstr "F?l D1 felbont?s [Ctrl-2]"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager_dialog.cpp:196
+msgid "SVCD Res"
+msgstr "SVCD felb"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager_dialog.cpp:199
+msgid "SVCD resolution [Ctrl-3]"
+msgstr "SVCD felbont?s [Ctrl-3]"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager_dialog.cpp:207
+msgid "VCD Res"
+msgstr "VCD felb"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager_dialog.cpp:210
+msgid "VCD resolution [Ctrl-4]"
+msgstr "VCD felbont?s [Ctrl-4]"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager_dialog.cpp:261
+msgid "Transform"
+msgstr "?talak?t?s"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager_dialog.cpp:286
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filterlist.cpp:125
+msgid "Interlacing"
+msgstr "V?ltottsoros"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager_dialog.cpp:310
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filterlist.cpp:150
+msgid "Colors"
+msgstr "Sz?nek"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager_dialog.cpp:334
+msgid "Noise"
+msgstr "Zaj"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager_dialog.cpp:358
+msgid "Sharpness"
+msgstr "?les?t?s"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager_dialog.cpp:382
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filterlist.cpp:225
+msgid "Subtitles"
+msgstr "Feliratok"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager_dialog.cpp:406
+msgid "Misc"
+msgstr "Vegyes"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager_dialog.cpp:417
+msgid "External"
+msgstr "K?ls?"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager_dialog.cpp:428
+msgid "Add selected filter to the Active Filters list"
+msgstr "A kiv?lasztott sz?r? hozz?ad?sa az akt?v sz?r?k list?j?hoz"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager_dialog.cpp:434
+msgid "<b>Available Filters</b>"
+msgstr "<b>El?rhet? sz?r?k</b>"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager_dialog.cpp:479
+msgid "Remove filter"
+msgstr "Sz?r? elt?vol?t?sa"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager_dialog.cpp:488
+msgid "Move filter down"
+msgstr "Sz?r? mozgat?sa le"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager_dialog.cpp:497
+msgid "Move filter up"
+msgstr "Sz?r? mozgat?sa fel"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager_dialog.cpp:503
+msgid "P_artial"
+msgstr "R?sz_leges"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager_dialog.cpp:506
+msgid "Apply the current filter only to a part of the file"
+msgstr "Sz?r? alkalmaz?sa csak a f?jl egy r?sz?n"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager_dialog.cpp:511
+msgid "Configure filter"
+msgstr "Sz?r? be?ll?t?sa"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager_dialog.cpp:521
+msgid "C_onfigure"
+msgstr "B_e?ll?t?s"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager_dialog.cpp:525
+msgid "<b >Active Filters</b>"
+msgstr "<b>Akt?v sz?r?k</b>"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager_dialog.cpp:552
+msgid "_Preview"
+msgstr "El?_n?zet"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtersub.cpp:53
+msgid "Video Filters"
+msgstr "Video sz?r?k"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtersub.cpp:113
+msgid "VCD res"
+msgstr "VCD felb"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtersub.cpp:119
+msgid "SVCD res"
+msgstr "SVCD felb"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtersub.cpp:125
+msgid "DVD res"
+msgstr "DVD felb"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtersub.cpp:131
+msgid "Half D1 res"
+msgstr "F?l D1 felb"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtersub.cpp:157
+msgid "Save as script"
+msgstr "Szkript ment?se"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager.cpp:240
+msgid "The filter is already partial"
+msgstr "A sz?r? m?r r?szleges"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager.cpp:338
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager.cpp:340
+msgid "Load set of filters"
+msgstr "Sz?r?k be?ll?t?sainak beolvas?sa"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager.cpp:353
+msgid "Nothing to save"
+msgstr "Ne mentsen semmit"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager.cpp:357
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager.cpp:359
+msgid "Save set of filters"
+msgstr "Sz?r?k be?ll?t?sainak ment?se"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filterlist.cpp:66
+msgid "Add Video Filter"
+msgstr "Vide? sz?r? hozz?ad?sa"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filterlist.cpp:100
+msgid "Transformation"
+msgstr "?talak?t?s"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filterlist.cpp:175
+#: plugins/ADM_videoFilters/Denoise/ADM_vidDenoise.cpp:40
+#: plugins/ADM_videoFilters/Denoise/ADM_vidDenoise.cpp:393
+msgid "Denoise"
+msgstr "Zajsz?r?s"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filterlist.cpp:200
+msgid "Sharpen/Blur"
+msgstr "?les?t?s/elmos?s"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filterlist.cpp:250
+msgid "Miscellaneous"
+msgstr "Egyebek"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/ADM_tray_gtk.cpp:53
+msgid "Open Avidemux"
+msgstr "Avidemux megnyit?sa"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/ADM_icons.cpp:228
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/ADM_icons.cpp:252
+#, c-format
+msgid "Couldn't find pixmap file: %s"
+msgstr "A k?pf?jl nem tal?lhat?: %s"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ui_support.cpp:54
+msgid "GTK+"
+msgstr "GTK+"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_plugins.cpp:45
+msgid "Audio Plugins"
+msgstr "Audi? sz?r?k"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_plugins.cpp:68
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:344
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:347
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:352
+msgid "Audio"
+msgstr "Audi?"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_plugins.cpp:74
+msgid "Video Encoder Plugins"
+msgstr "Vide?-k?dol? plugin-ok"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_plugins.cpp:98
+msgid "Video Encoder"
+msgstr "Vide?-k?d?l?"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_plugins.cpp:103
+msgid "Audio Device Plugins"
+msgstr "Audi? eszk?z plugin-ok"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_plugins.cpp:125
+msgid "Audio Device"
+msgstr "Audi? eszk?z"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_plugins.cpp:132
+msgid "Audio Encoder Plugins"
+msgstr "Audi?-k?dol? plugin-ok"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_plugins.cpp:154
+msgid "Audio Encoders"
+msgstr "Audi?-k?d?l?"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_plugins.cpp:161
+msgid "Plugins Info"
+msgstr "Plugin inf?"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:81
+msgid "Select idx file:"
+msgstr "Idx f?jl kiv?laszt?sa:"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:82
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:198
+msgid "Use GlyphSet (optional):"
+msgstr "Bet?k?p-be?ll?t?s haszn?lata (opcion?lis):"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:82
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:198
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:321
+msgid "Select GlyphSet file"
+msgstr "Bet?k?p-be?ll?t?s f?jl kiv?laszt?sa"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:83
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:199
+msgid "Output SRT file"
+msgstr "SRT kimeneti f?jl"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:83
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:199
+msgid "Save SRT file"
+msgstr "SRT f?jl ment?se"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:93
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:210
+msgid "Select input and ouput files"
+msgstr "Bemeneti ?s kimeneti f?jlok kiv?laszt?sa"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:103
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:108
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:115
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:124
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:221
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:227
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:234
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:243
+#: avidemux/ADM_outputs/oplug_ogm/op_ogsave.cpp:101
+#: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:352
+#: avidemux/ADM_ocr/adm_glyph.cpp:217
+#: avidemux/ADM_coreUI/src/DIA_fileSel.cpp:129 avidemux/gtk_gui.cpp:889
+#: avidemux/gtk_gui.cpp:1499 avidemux/gtk_gui.cpp:2607
+msgid "File error"
+msgstr "F?jl hiba"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:103
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:115
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:234
+msgid "The idx/sub file does not exist."
+msgstr "Az idx/sub f?jl nem l?tezik."
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:108
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:227
+msgid "Please Select a valid output SRT file."
+msgstr "V?lasszon ki ?rv?nyes kimeneti SRT f?jlt."
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:124
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:243
+msgid "Cannot load the glyphset file."
+msgstr "Bet?k?p-be?ll?t? f?jl beolvas?sa sikertelen."
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:143
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:264
+msgid "GlyphSet filename"
+msgstr "Bet?k?p-be?ll?t? f?jl neve"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:143
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:264
+msgid "Save GlyphSet file"
+msgstr "Bet?k?p-be?ll?t? f?jl ment?se"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:145
+msgid "Save Glyph"
+msgstr "Bet?k?p ment?se"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:196
+msgid "Input TS:"
+msgstr "Bemeneti TS:"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:196
+msgid "Select TS file"
+msgstr "TS f?jl kiv?laszt?sa"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:197
+msgid "Subtitle PID:"
+msgstr "Felirat PID:"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:221
+msgid "Please Select a valid TS file."
+msgstr "V?lasszon ki ?rv?nyes TS f?jlt."
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:266
+msgid "Save GlyphSet"
+msgstr "Bet?k?p-be?ll?t?s ment?se"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp:45
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_SVCD.cpp:45
+msgid "Default"
+msgstr "Alap?rtelmezett"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp:46
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_SVCD.cpp:46
+msgid "TMPGEnc"
+msgstr "TMPGEnc"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp:47
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_SVCD.cpp:47
+msgid "Anime"
+msgstr "Anime"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp:48
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_SVCD.cpp:48
+msgid "KVCD"
+msgstr "KVCD"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp:51
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_SVCD.cpp:51
+msgid "Progressive"
+msgstr "Progressz?v"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp:52
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_SVCD.cpp:52
+msgid "Interlaced TFF"
+msgstr "V?ltottsoros TFF"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp:53
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_SVCD.cpp:53
+msgid "Interlaced BFF"
+msgstr "V?ltottsoros BFF"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp:57
+msgid "VCD 40 kB"
+msgstr "VCD 40 kB"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp:58
+msgid "SVCD 112 kB"
+msgstr "SVCD 112 kB"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp:59
+msgid "DVD 224 kB"
+msgstr "DVD 224 kB"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp:64
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_SVCD.cpp:60
+msgid "Ma_x. bitrate:"
+msgstr "Ma_x. bitr?ta:"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp:65
+msgid "Mi_n. bitrate:"
+msgstr "Mi_n. bitr?ta:"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp:66
+msgid "_Use Xvid rate control"
+msgstr "Xvid bitr?ta kontrol haszn?lata"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp:68
+msgid "_Buffer size:"
+msgstr "_Puffer m?ret"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp:70
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_SVCD.cpp:57
+msgid "Aspect _ratio:"
+msgstr "K?par?ny:"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp:71
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_SVCD.cpp:58
+msgid "_Matrices:"
+msgstr "_M?trixok:"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp:72
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_SVCD.cpp:59
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flv1.cpp:37
+msgid "_GOP size:"
+msgstr "_GOP m?ret:"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp:78
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_SVCD.cpp:66
+msgid "_Interlacing:"
+msgstr "_V?ltottsoros:"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp:82
+msgid "libavcodec MPEG-2 Configuration"
+msgstr "Libavcodec MPEG-2 be?ll?t?sa"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_bitrateHisto.cpp:55
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_bitrateHisto.cpp:124
+msgid "No data"
+msgstr "Nincs adat"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_bitrateHisto.cpp:210
+msgid "Max. bitrate:"
+msgstr "Max. bitr?ta:"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_bitrateHisto.cpp:211
+msgid "Average bitrate:"
+msgstr "?tlagos bitr?ta:"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_bitrateHisto.cpp:212
+msgid "Number of I frames:"
+msgstr "I frame-ek sz?ma:"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_bitrateHisto.cpp:213
+msgid "Number of P frames:"
+msgstr "P frame-ek sz?ma:"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_bitrateHisto.cpp:214
+msgid "Number of B frames:"
+msgstr "B frame-ek sz?ma:"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_bitrateHisto.cpp:215
+msgid "Max. B frames:"
+msgstr "Max. B frame-ek:"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_bitrateHisto.cpp:228
+msgid "Bitrate Histogram"
+msgstr "Bitr?ta hisztogram"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_mjpeg.cpp:30
+#: plugins/ADM_videoFilters/Decimate/ADM_vidDecDec.cpp:184
+#: plugins/ADM_audioEncoders/vorbis/audioencoder_vorbis.cpp:320
+#: plugins/ADM_audioEncoders/lame/audioencoder_lame.cpp:317
+msgid "_Quality:"
+msgstr "_Min?s?g"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_mjpeg.cpp:31
+msgid "_Swap U&V"
+msgstr "U&V c_sere"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_mjpeg.cpp:33
+msgid "MJPEG Configuration"
+msgstr "MJPEG be?ll?t?sa"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp:126
+msgid "Video Codecs"
+msgstr "Video kodek-ek"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp:128
+msgid "x264"
+msgstr "x264"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp:136
+msgid "aRts"
+msgstr "aRts"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp:137
+msgid "ESD"
+msgstr "ESD"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp:138
+msgid "Fontconfig"
+msgstr "Fontbe?ll?t?s"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp:139
+msgid "FreeType 2"
+msgstr "FreeType 2"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp:140
+msgid "Gettext"
+msgstr "Gettext"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp:141
+msgid "ALSA"
+msgstr "ALSA"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp:142
+msgid "OSS"
+msgstr "OSS"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp:143
+msgid "SDL"
+msgstr "SDL"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp:144
+msgid "XVideo"
+msgstr "XVideo"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp:146
+msgid "AltiVec"
+msgstr "AltiVec"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp:147
+msgid "PowerPC"
+msgstr "PowerPC"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp:148
+msgid "x86"
+msgstr "x86"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp:149
+msgid "x86-64"
+msgstr "x86-64"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp:156
+msgid "Codecs"
+msgstr "Kodekek"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp:157
+msgid "Libraries"
+msgstr "K?nyvt?rak"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp:158
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:362
+msgid "CPU"
+msgstr "CPU"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp:162
+msgid "Built-in Support"
+msgstr "Be?p?tett t?mogat?sok"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavDecoder.cpp:27
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_postproc.cpp:22
+msgid "_Swap U and V"
+msgstr "U ?s V c_sere"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavDecoder.cpp:28
+msgid "Show motion _vectors"
+msgstr "Motion vektorok megjelen?t?se"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavDecoder.cpp:30
+msgid "Decoder Options"
+msgstr "Dek?dol? be?ll?t?sa"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_requant.cpp:39
+msgid "_Shrink Factor:"
+msgstr "_Shrink faktor:"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_requant.cpp:42
+msgid "Requant Configuration"
+msgstr "Requant be?ll?t?sok"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_gototime.cpp:9
+msgid "_Hours:"
+msgstr "?_r?k:"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_gototime.cpp:10
+msgid "_Minutes:"
+msgstr "_Percek:"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_gototime.cpp:11
+msgid "_Seconds:"
+msgstr "_M?sodpercek"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_gototime.cpp:14
+msgid "Go to Time"
+msgstr "Id?pontra ug?s"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_resizeWiz.cpp:32
+msgid "VCD"
+msgstr "VCD"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_resizeWiz.cpp:33
+msgid "SVCD"
+msgstr "SVCD"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_resizeWiz.cpp:34
+msgid "DVD"
+msgstr "DVD"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_resizeWiz.cpp:35
+msgid "DVD half D1"
+msgstr "DVD f?l D1"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_resizeWiz.cpp:36
+msgid "PSP (480 * 272)"
+msgstr "PSP (480 * 272)"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_resizeWiz.cpp:37
+msgid "PSP full res. (720 * 480)"
+msgstr "PSP teljes felb. (720 * 480)"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_resizeWiz.cpp:53
+msgid "_Target type:"
+msgstr "C?l _t?pusa:"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_resizeWiz.cpp:54
+msgid "_Source aspect ratio:"
+msgstr "_Forr?s k?par?nya:"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_resizeWiz.cpp:55
+msgid "_Destination aspect ratio:"
+msgstr "C?_l k?par?nya:"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_resizeWiz.cpp:60
+msgid "Auto Wizard"
+msgstr "Var?zsl?"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_SVCD.cpp:70
+msgid "MPEG-2 Configuration"
+msgstr "MPEG-2 be?ll?t?sa"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:48
+msgid "_Dynamic range compression"
+msgstr "_Dynamic range compression"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:50
+msgid "_Time shift (ms):"
+msgstr "I_d?eltol?s (ms):"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:50
+msgid "Time shift value (ms)"
+msgstr "Id?eltol?s m?rt?ke (ms):"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:58
+msgid "R_esampling (Hz):"
+msgstr "R_esampling (Hz):"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:58
+msgid "Resampling frequency (Hz)"
+msgstr "Resampling frekvencia (Hz)"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:67
+msgid "Film to PAL"
+msgstr "Film -> PAL"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:68
+msgid "PAL to Film"
+msgstr "PAL -> film"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:71
+msgid "_Frame rate change:"
+msgstr "_Frame-r?ta csere:"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:76
+msgid "Automatic (max -3 dB)"
+msgstr "Automatikus (max -3 dB)"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:77
+msgid "Manual"
+msgstr "K?zi"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:79
+msgid "_Gain mode:"
+msgstr "_Gain m?d:"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:81
+msgid "G_ain value:"
+msgstr "G_ain ?rt?ke:"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:83
+#: plugins/ADM_videoFilters/colorYUV/gtk/DIA_coloryuv.cpp:183
+msgid "Gain"
+msgstr "Gain"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:88
+msgid "No change"
+msgstr "Nincs csere"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:91
+msgid "Stereo+surround"
+msgstr "Sztere?+Surround"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:92
+msgid "Stereo+center"
+msgstr "Sztere?+K?z?p"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:93
+msgid "Stereo+center+surround"
+msgstr "Sztere?+K?z?p+Surround"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:94
+msgid "Stereo front+stereo rear"
+msgstr "Sztere? els?+sztere? h?ts?"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:95
+msgid "5 channels"
+msgstr "5 csatorna"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:96
+msgid "5.1"
+msgstr "5.1"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:97
+msgid "Dolby Pro Logic"
+msgstr "Dolby Pro Logic"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:98
+msgid "Dolby Pro Logic II"
+msgstr "Dolby Pro Logic II"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:101
+msgid "_Mixer:"
+msgstr "_Mixer:"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:105
+msgid "Audio Filters"
+msgstr "Audi? sz?r?k"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flv1.cpp:41
+msgid "FLV1 Configuration"
+msgstr "FLV1 be?ll?t?sok"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_postproc.cpp:21
+#: plugins/ADM_videoFilters/ForcedPP/ADM_vidForcedPP.cpp:44
+msgid "_Filter strength:"
+msgstr "Sz?_r? er?ss?ge:"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_postproc.cpp:32
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:298
+#: plugins/ADM_videoFilters/ForcedPP/ADM_vidForcedPP.cpp:56
+msgid "_Horizontal deblocking"
+msgstr "_V?zszintes deblocking"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_postproc.cpp:33
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:299
+#: plugins/ADM_videoFilters/ForcedPP/ADM_vidForcedPP.cpp:57
+msgid "_Vertical deblocking"
+msgstr "_F?gg?leges deblocking"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_postproc.cpp:34
+#: plugins/ADM_videoFilters/ForcedPP/ADM_vidForcedPP.cpp:58
+msgid "_Deringing"
+msgstr "_Deringing"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_postproc.cpp:38
+msgid "Postprocessing"
+msgstr "Ut?munk?latok"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_jobs_save.cpp:7
+msgid "_Job name:"
+msgstr "_Feladat neve:"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_jobs_save.cpp:8
+msgid "Output _File:"
+msgstr "Kimeneti _f?jl:"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_jobs_save.cpp:8
+msgid "Select Video To Write"
+msgstr "Video kijel?l?se ?r?sra"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_jobs_save.cpp:11
+msgid "Save Job"
+msgstr "Feladat ment?se"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_v2v.cpp:35
+msgid "_VOB file(s):"
+msgstr "VOB f?jl(ok):"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_v2v.cpp:35
+msgid "Select VOB file(s)"
+msgstr "VOB f?jl(ok) kiv?laszt?sa"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_v2v.cpp:36
+msgid "_IFO file:"
+msgstr "_IFO f?jl:"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_v2v.cpp:36
+msgid "Select IFO file"
+msgstr "IFO f?jl kiv?lasz?sa"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_v2v.cpp:37
+msgid "VobSub file:"
+msgstr "VobSub f?jl:"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_v2v.cpp:37
+msgid "Select VobSub file"
+msgstr "VobSub f?jl kiv?laszt?sa:"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_v2v.cpp:42
+msgid "VOB to VobSub"
+msgstr "VOB VobSub-ba"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_v2v.cpp:46
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_v2v.cpp:51
+msgid "The selected vobfile does not exist"
+msgstr "A kiv?lasztott VOB f?jl nem l?tezik"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_v2v.cpp:56
+msgid "Please select a correct VobSub path/dir"
+msgstr "A megfelel? VobSub ?tvonal/k?nyvt?r kiv?laszt?sa"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:175
+msgid "_Use systray while encoding"
+msgstr "T?lca (panel) haszn?la_ta a k?dol?s alatt"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:176
+msgid "_Accept non-standard audio frequency for DVD"
+msgstr "Nem sz_abv?nyos DVD audi? frekvencia elfogad?sa"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:177
+msgid "Create _OpenDML files"
+msgstr "_OpenDML f?jlok l?trehoz?sa"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:178
+msgid "Automatically _index MPEG files"
+msgstr "MPEG f?jlok automat_ikus indexel?se"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:179
+msgid "Automatically _swap A and B if A>B"
+msgstr "A ?s B automatikus c_ser?je ha A>B"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:180
+msgid "_Disable NUV audio sync"
+msgstr "NUV au_di? szinkron tilt?sa"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:182
+msgid "Automatically _build VBR map"
+msgstr "V_BR t?rk?p automatikus l?trehoz?sa"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:183
+msgid "Automatically _rebuild index"
+msgstr "Index automatikus l?t_rehoz?sa"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:184
+msgid "Automatically remove _packed bitstream"
+msgstr "_Packed Bitstream automatikus elt?vol?t?sa"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:186
+msgid "SIMD"
+msgstr "SIMD"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:188
+msgid "Enable all SIMD"
+msgstr "?sszes SIMD enged?lyez?se"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:189
+msgid "Enable MMX"
+msgstr "MMX enged?lyez?se"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:190
+msgid "Enable MMXEXT"
+msgstr "MMXEXT enged?lyez?se"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:191
+msgid "Enable 3DNOW"
+msgstr "3DNOW enged?lyez?se"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:192
+msgid "Enable 3DNOWEXT"
+msgstr "3DNOWEXT enged?lyez?se"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:193
+msgid "Enable SSE"
+msgstr "SSE enged?lyez?se"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:194
+msgid "Enable SSE2"
+msgstr "SSE2 enged?lyez?se"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:195
+msgid "Enable SSE3"
+msgstr "SSE3 enged?lyez?se"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:196
+msgid "Enable SSSE3"
+msgstr "SSSE3 enged?lyez?se"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:217
+msgid "_lavc threads:"
+msgstr "_Lavc sz?lak:"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:219
+msgid "Multi-threading"
+msgstr "T?bbsz?las"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:224
+msgid "Above normal"
+msgstr "Norm?l feletti"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:226
+msgid "Below normal"
+msgstr "Norm?l alatti"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:229
+msgid "_Encoding priority:"
+msgstr "_K?dol?si priorit?s:"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:230
+msgid "_Indexing/unpacking priority:"
+msgstr "_Indexel?si/kicsomagol?si priorit?s"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:231
+msgid "_Playback priority:"
+msgstr "_Visszaj?tsz?si priorit?s"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:233
+msgid "Prioritisation"
+msgstr "Priorit?sok be?ll?t?sa"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:238
+msgid "_Split MPEG files every (MB):"
+msgstr "MPEG f?jlok feloszt?sa az al?bbi m?retre (MB) :"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:240
+msgid "_Use alternative tag for MP3 in .mp4"
+msgstr "Alternat?v MP3 Tag haszn?lata .mp4-ben"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:244
+msgid "XVideo (best)"
+msgstr "XVideo (legjobb)"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:248
+msgid "SDL (MS Windows GDI)"
+msgstr "SDL (MS Windows GDI)"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:249
+msgid "SDL (MS Windows DirectX)"
+msgstr "SDL (MS Windows DirectX)"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:251
+msgid "SDL (good)"
+msgstr "SDL (j?)"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:255
+msgid "Video _display:"
+msgstr "Vi_de? megjelen?t?se:"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:260
+msgid "No alerts"
+msgstr "Nincs figyelmeztet?s"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:261
+msgid "Display only error alerts"
+msgstr "Csak a hibajelz?sek megjelen?t?se"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:262
+msgid "Display all alerts"
+msgstr "?sszes figyelmeztet?s megjelen?t?se"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:264
+msgid "_Message level:"
+msgstr "_?zenetek szintje:"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:269
+#: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:487
+msgid "PCM"
+msgstr "PCM"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:270
+msgid "Master"
+msgstr "Master"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:271
+msgid "_Volume control:"
+msgstr "_Hanger?szab?lyz?:"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:276
+msgid "No downmixing"
+msgstr "Nincs lekever?s"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:278
+msgid "Pro Logic"
+msgstr "Pro Logic"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:279
+msgid "Pro Logic II"
+msgstr "Pro Logic II"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:281
+msgid "_Local playback downmixing:"
+msgstr "_Helyi lej?tsz?s lekever?se:"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:295
+msgid "_AudioDevice"
+msgstr "_Audi?eszk?z"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:300
+msgid "De_ringing"
+msgstr "De_ringing"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:301
+#: plugins/ADM_videoFilters/MSmooth/ADM_vidMsmooth.cpp:184
+#: plugins/ADM_videoFilters/MSharpen/ADM_vidMSharpen.cpp:160
+msgid "_Strength:"
+msgstr "_Er?ss?g:"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:302
+msgid "Default Postprocessing"
+msgstr "Alap?rtelmezet ut?munk?latok"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:316
+msgid "_Filter directory:"
+msgstr "_Sz?r?k k?nyvt?ra:"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:316
+msgid "Select filter directory"
+msgstr "Sz?r?k k?nyvt?r?nak kiv?laszt?sa"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:317
+msgid "_Load external filters"
+msgstr "_K?ls? sz?r?k beolvas?sa"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:320
+msgid "Use _Global GlyphSet"
+msgstr "Glob?lis bet?k?p haszn?lata"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:321
+msgid "Gl_yphSet:"
+msgstr "Bet?k?p be?ll?t?s:"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:326
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:84
+msgid "User Interface"
+msgstr "Felhaszn?l?i fel?let"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:330
+msgid "Automation"
+msgstr "Automatiz?l?s"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:358
+#: avidemux/gtk_gui.cpp:1998
+msgid "Video"
+msgstr "Vide?"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:366
+msgid "Threading"
+msgstr "Sz?lak"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:370
+msgid "Global GlyphSet"
+msgstr "Glob?lis bet?k?p-be?ll?t?s"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:374
+msgid "External Filters"
+msgstr "K?ls? sz?r?k"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:378
+msgid "Preferences"
+msgstr "Tulajdons?gok"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:38
+msgid "Full"
+msgstr "Teljes"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:39
+msgid "Log"
+msgstr "Log"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:40
+msgid "Phods"
+msgstr "Phods"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:41
+msgid "EPZS"
+msgstr "EPZS"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:42
+msgid "X1"
+msgstr "X1"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:46
+msgid "H.263"
+msgstr "H.263"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:51
+msgid "MB comparison"
+msgstr "MB ?sszehasonl?t?s"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:52
+msgid "Fewest bits (vhq)"
+msgstr "Legkevesebb bit(ek) (vhq)"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:53
+msgid "Rate distortion"
+msgstr "R?ta torz?t?sa"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:59
+msgid "Matrices"
+msgstr "M?trixok"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:60
+msgid "Mi_n. quantizer:"
+msgstr "Mi_n. quantizer:"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:61
+msgid "Ma_x. quantizer:"
+msgstr "Ma_x. quantizer:"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:62
+msgid "Max. quantizer _difference:"
+msgstr "Max. quantizer _difference:"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:64
+msgid "4_MV"
+msgstr "4_MV"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:65
+msgid "_Trellis quantization"
+msgstr "_Trellis quantization"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:67
+msgid "_Quarter pixel"
+msgstr "_Quarter pixel"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:68
+msgid "_GMC"
+msgstr "_GMC"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:71
+msgid "_Number of B frames:"
+msgstr "B frame-ek sz?ma:"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:72
+msgid "_Quantization type:"
+msgstr "_Quantization t?pus:"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:74
+msgid "_Macroblock decision:"
+msgstr "_Macroblock d?nt?s:"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:76
+msgid "_Filesize tolerance (kb):"
+msgstr "_F?jlm?ret tolerancia (kb):"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:78
+msgid "_Quantizer compression:"
+msgstr "_Quantizer t?m?r?t?s:"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:79
+msgid "Quantizer _blur:"
+msgstr "Quantizer el_mos?s:"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:87
+msgid "Advanced Simple Profile"
+msgstr "Advanced Simple Profile"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:94
+msgid "Motion Estimation"
+msgstr "Motion Estimation"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:98
+msgid "Quantization"
+msgstr "Quantization"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:103
+msgid "Rate Control"
+msgstr "R?ta fel?gyelet"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:106
+msgid "libavcodec MPEG-4 configuration"
+msgstr "Libavcodec MPEG-4 be?ll?t?sa"
+
+#: avidemux/ADM_outputs/oplug_dummy/oplug_dummy.cpp:128
+#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:145
+#: avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp:174
+msgid "Cannot initialize the video stream"
+msgstr "A vide? stream-et nem lehet inicializ?lni"
+
+#: avidemux/ADM_outputs/oplug_dummy/oplug_dummy.cpp:133
+msgid "Dummy"
+msgstr "Dummy"
+
+#: avidemux/ADM_outputs/oplug_dummy/oplug_dummy.cpp:142
+#: avidemux/ADM_outputs/oplug_avi/op_saveprocess.cpp:101
+#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:180
+#: avidemux/ADM_outputs/oplug_ogm/op_ogsaveprocess.cpp:87
+#: avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp:188
+msgid "Filter init failed"
+msgstr "Sz?r? aktiv?l?s sikertelen"
+
+#: avidemux/ADM_outputs/oplug_dummy/oplug_dummy.cpp:146
+#: avidemux/ADM_outputs/oplug_avi/op_saveprocess.cpp:262
+#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:191
+#: avidemux/ADM_outputs/oplug_ogm/op_ogsaveprocess.cpp:165
+#: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:359
+#: avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp:192
+msgid "Encoding"
+msgstr "K?dol?s"
+
+#: avidemux/ADM_outputs/oplug_dummy/oplug_dummy.cpp:199
+#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:302
+#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:454
+#: avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp:313
+#: avidemux/ADM_outputs/oplug_mpeg/op_mpegpass.cpp:304
+msgid "Error while encoding"
+msgstr "Hiba a k?dol?s alatt"
+
+#: avidemux/ADM_outputs/oplug_dummy/oplug_dummy.cpp:206
+#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:309
+#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:461
+#: avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp:320
+msgid "KeyFrame error"
+msgstr "KeyFrame hiba"
+
+#: avidemux/ADM_outputs/oplug_dummy/oplug_dummy.cpp:206
+#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:309
+#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:461
+#: avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp:320
+msgid ""
+"The beginning frame is not a key frame.\n"
+"Please move the A marker."
+msgstr ""
+"A kezd? frame nem keyframe.\n"
+"Helyezze ?t az ?A? jelz?t."
+
+#: avidemux/ADM_outputs/oplug_avi/op_savesmart.cpp:97
+#: avidemux/gui_savenew.cpp:342
+msgid "Smart Copy"
+msgstr "Intelligens m?sol?s"
+
+#: avidemux/ADM_outputs/oplug_avi/op_avisavecopy_pack.cpp:118
+#: avidemux/ADM_outputs/oplug_avi/op_avisavecopy.cpp:90
+#: avidemux/ADM_outputs/oplug_avi/op_avisavecopy_unpack.cpp:92
+#: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:447
+msgid "Cannot initiate save"
+msgstr "Nem kezdem?nyezhet ment?st"
+
+#: avidemux/ADM_outputs/oplug_avi/op_avisavecopy_pack.cpp:131
+#: avidemux/ADM_outputs/oplug_avi/op_avisavecopy.cpp:103
+#: avidemux/ADM_outputs/oplug_avi/op_avisavecopy_unpack.cpp:105
+#: avidemux/ADM_outputs/oplug_mpeg/op_mpegpass.cpp:175
+msgid "Saving"
+msgstr "Ment?s"
+
+#: avidemux/ADM_outputs/oplug_avi/op_saveprocess.cpp:67
+msgid ""
+"Width is not a multiple of 8\n"
+" continue anyway ?"
+msgstr ""
+"A sz?less?g nem t?bbsz?r?se a 8-nak\n"
+" mindenk?ppen folytatja ?"
+
+#: avidemux/ADM_outputs/oplug_avi/op_saveprocess.cpp:92
+#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:173
+#: avidemux/ADM_outputs/oplug_ogm/op_ogsaveprocess.cpp:78
+#: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:238
+msgid "Reuse the existing log file?"
+msgstr "Haszn?lja a m?r l?tez? log f?jlt?"
+
+#: avidemux/ADM_outputs/oplug_avi/op_saveprocess.cpp:132
+#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:420
+msgid "1st Pass"
+msgstr "1. menet"
+
+#: avidemux/ADM_outputs/oplug_avi/op_saveprocess.cpp:147
+msgid "Aborting"
+msgstr "Megszak?t?s"
+
+#: avidemux/ADM_outputs/oplug_avi/op_saveprocess.cpp:264
+#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:493
+msgid "2nd Pass"
+msgstr "2. menet"
+
+#: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:65
+msgid "Mux every N video frames"
+msgstr "Minden N-edik vide? frame multiplexel?se"
+
+#: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:66
+msgid "Mux by packet size"
+msgstr "Multiplexel?s m?ret alapj?n"
+
+#: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:69
+msgid "Muxing _type:"
+msgstr "Multiplexel?s _t?pusa:"
+
+#: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:70
+msgid "_Split every MB:"
+msgstr "Feloszt?s az al?bbi m?retre (MB) :"
+
+#: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:72
+msgid "Mux _every x video frames:"
+msgstr "Minden X-edik vide? frame multiplexel?se"
+
+#: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:73
+msgid "Mux in _blocks of x bytes:"
+msgstr "Multiplex?l?s x b?jtos blokkokban"
+
+#: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:80
+msgid "AVI Muxer Options"
+msgstr "AVI Multiplexer be?ll?t?sa"
+
+#: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:179
+msgid "Error initalizing audio filters"
+msgstr "Az audi? sz?r? aktiv?l?sa nem siker?lt"
+
+#: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:188
+msgid "Error initalizing video filters"
+msgstr "A vide? sz?r? aktiv?l?sa nem siker?lt"
+
+#: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:486
+msgid "DTS"
+msgstr "DTS"
+
+#: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:488
+msgid "MP2"
+msgstr "MP2"
+
+#: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:489
+msgid "MP3"
+msgstr "MP3"
+
+#: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:490
+msgid "WMA"
+msgstr "WMA"
+
+#: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:491
+msgid "LPCM"
+msgstr "LPCM"
+
+#: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:492
+msgid "AC3"
+msgstr "AC3"
+
+#: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:493
+msgid "Ogg Vorbis"
+msgstr "Ogg Vorbis"
+
+#: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:495
+msgid "AAC"
+msgstr "AAC"
+
+#: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:496
+msgid "QDM2"
+msgstr "QDM2"
+
+#: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:497
+msgid "AMR-NB"
+msgstr "AMR-NB"
+
+#: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:498
+msgid "MSADPCM"
+msgstr "MSADPCM"
+
+#: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:499
+msgid "ULAW"
+msgstr "ULAW"
+
+#: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:500
+msgid "IMA ADPCM"
+msgstr "IMA ADPCM"
+
+#: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:501
+msgid "8-bit PCM"
+msgstr "8-bites PCM"
+
+#: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:503
+msgid "Unknown codec"
+msgstr "Ismeretlen kodek"
+
+#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:119
+msgid "PSP"
+msgstr "PSP"
+
+#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:216
+#: avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp:217
+msgid "Cannot initialize the audio stream"
+msgstr "Az audi? stream inicializ?l?sa sikertelen"
+
+#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:234
+msgid "Invalid audio stream detected"
+msgstr "?rv?nytelen audi? stream"
+
+#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:234
+msgid ""
+"The audio stream may be invalid for this container.\n"
+"\n"
+"Continue anyway?"
+msgstr ""
+"Az audi? stream ?rv?nytelen ebben a t?rol? form?tumban.\n"
+"\n"
+"Mindenk?ppen folytatja?"
+
+#: avidemux/ADM_outputs/oplug_ogm/op_ogsaveprocess.cpp:112
+msgid "Pass one"
+msgstr "Menet 1"
+
+#: avidemux/ADM_outputs/oplug_ogm/op_ogsaveprocess.cpp:161
+msgid "Pass 2"
+msgstr "Menet 2"
+
+#: avidemux/ADM_outputs/oplug_ogm/op_ogsave.cpp:101
+#: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:352
+#: avidemux/gtk_gui.cpp:1499 avidemux/gtk_gui.cpp:2607
+#, possible-c-format
+msgid "Cannot open \"%s\" for writing."
+msgstr "Nem lehet megnyitni \"%s\" ?r?sra."
+
+#: avidemux/ADM_outputs/oplug_ogm/op_ogsave.cpp:115
+msgid "Could not initialize video"
+msgstr "A vide? inicializ?l?sa sikertelen"
+
+#: avidemux/ADM_outputs/oplug_ogm/op_ogsave.cpp:123
+msgid "Could not initialize audio"
+msgstr "Az audi? inicializ?l?sa sikertelen"
+
+#: avidemux/ADM_outputs/oplug_ogm/op_ogsavecopy.cpp:56
+msgid "Saving..."
+msgstr "Ment?s..."
+
+#: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:128
+#: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:139
+#: avidemux/ADM_outputs/oplug_mpeg/op_mpegpass.cpp:84
+msgid "There is no audio track"
+msgstr "Ez nem audi? s?v"
+
+#: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:149
+#: avidemux/ADM_outputs/oplug_mpeg/op_mpegpass.cpp:103
+msgid "Audio track is not suitable"
+msgstr "Az audi? s?v nem megfelel?"
+
+#: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:159
+msgid "For VCD, audio must be 44.1 kHz MP2."
+msgstr "VCD audi?nak 44.1kHz-es MP2-nek kell lennie."
+
+#: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:179
+msgid "For DVD, audio must be 48 kHz MP2, AC3 or LPCM."
+msgstr "DVD audi?nak 48kHz-es MP2-nek, AC3-nak vagy LPCM-nek kell lennie."
+
+#: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:255
+msgid "libmpeg2enc VCD"
+msgstr "Libmpeg2enc VCD"
+
+#: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:258
+msgid "libmpeg2enc SVCD"
+msgstr "Libmpeg2enc SVCD"
+
+#: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:261
+msgid "libmpeg2enc DVD"
+msgstr "Libmpeg2enc DVD"
+
+#: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:264
+msgid "FFmpeg MPEG-1 VBR"
+msgstr "FFmpeg MPEG-1 VBR"
+
+#: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:267
+msgid "FFmpeg MPEG-2 SVCD VBR"
+msgstr "FFmpeg MPEG-2 SVCD VBR"
+
+#: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:270
+msgid "FFmpeg MPEG-2 DVD VBR"
+msgstr "FFmpeg MPEG-2 DVD VBR"
+
+#: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:273
+msgid "MPEG Requantizer"
+msgstr "MPEG Requantizer"
+
+#: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:281
+msgid "MPEG ES"
+msgstr "MPEG ES"
+
+#: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:282
+#: avidemux/ADM_outputs/oplug_mpeg/op_mpegpass.cpp:182
+msgid "MPEG TS"
+msgstr "MPEG TS"
+
+#: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:283
+#: avidemux/ADM_outputs/oplug_mpeg/op_mpegpass.cpp:183
+msgid "MPEG VCD"
+msgstr "MPEG VCD"
+
+#: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:284
+#: avidemux/ADM_outputs/oplug_mpeg/op_mpegpass.cpp:184
+msgid "MPEG SVCD"
+msgstr "MPEG SVCD"
+
+#: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:285
+#: avidemux/ADM_outputs/oplug_mpeg/op_mpegpass.cpp:185
+msgid "MPEG DVD"
+msgstr "MPEG DVD"
+
+#: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:297
+msgid "Pass 1/2"
+msgstr "Menet 1/2"
+
+#: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:306
+msgid "Error in pass 1"
+msgstr "Hiba az els? menetben"
+
+#: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:357
+msgid "Pass 2/2"
+msgstr "Menet 2/2"
+
+#: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:449
+msgid "Error in pass 2"
+msgstr "Hiba a m?sodik menetben"
+
+#: avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp:136
+msgid "Unsupported video"
+msgstr "Nem t?mogatott vide?"
+
+#: avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp:136
+msgid "Only FLV1 and VP6 video are supported"
+msgstr "Csak az FLV1 ?s a VP6 vide? t?mogatott"
+
+#: avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp:158
+#: avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp:163
+msgid "Unsupported audio"
+msgstr "Nem t?mogatott audi?"
+
+#: avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp:158
+msgid "Audio must be mp3 for flv output."
+msgstr "Flv kimenetn?l az audi?nak MP3-nak kell lennie"
+
+#: avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp:163
+msgid "Frequency must be 44100, 22050 or 11025 Hz."
+msgstr "A frekvenci?nak 44100, 22500 vagy 11025Hz-nek kell lennie"
+
+#: avidemux/ADM_outputs/oplug_mpeg/op_mpegpass.cpp:79
+msgid "This is not MPEG compatible"
+msgstr "Ez nem MPEG kompatibilis"
+
+#: avidemux/ADM_outputs/oplug_mpeg/op_mpegpass.cpp:79
+msgid "You can't use the Copy codec."
+msgstr "Nem haszn?lhat \"M?sol?s\" kodeket"
+
+#: avidemux/ADM_outputs/oplug_mpeg/op_mpegpass.cpp:91
+msgid "The first frame is not intra frame"
+msgstr "Az els? frame nem intra frame."
+
+#: avidemux/ADM_outputs/oplug_mpeg/op_mpegpass.cpp:91
+msgid "Use the &lt;&lt; and the &gt;&gt; buttons to move using Intra frames."
+msgstr "Haszn?lja az &lt;&lt; ?s a &gt;&gt; gombokat az intra frame-ek mozgat?s?hoz."
+
+#: avidemux/ADM_outputs/oplug_mpeg/op_mpegpass.cpp:135
+msgid "For DVD, audio must be 48 kHz MP2(stereo), AC3, DTS or LPCM (stereo)."
+msgstr "DVD audi?nak 48kHz-es sztere? MP2-nek, AC3-nak vagy LPCM-nek kell lennie."
+
+#: avidemux/ADM_outputs/oplug_mpeg/op_mpegpass.cpp:174
+msgid "---"
+msgstr "---"
+
+#: avidemux/ADM_outputs/ADM_lavformat.cpp:377
+msgid "Incompatible frame rate"
+msgstr "Nem kompatibilis frame-r?ta"
+
+#: avidemux/ADM_filter/filter_saveload.cpp:149
+msgid "Problem reading XML filters"
+msgstr "Hiba az XML sz?r?k olvas?s?n?l"
+
+#: avidemux/ADM_filter/filter_saveload.cpp:157
+msgid "No filter found"
+msgstr "Sz?r? nem tal?lhat?"
+
+#: avidemux/ADM_filter/filter_saveload.cpp:193
+msgid "Could not find a filter"
+msgstr "A sz?r? nem tal?lhat?"
+
+#: avidemux/ADM_filter/filter_saveload.cpp:201
+msgid "No tag found"
+msgstr "A Tag nem tal?lhat?"
+
+#: avidemux/ADM_filter/filter_saveload.cpp:281
+msgid "Node not found"
+msgstr "A node nem tal?lhat?"
+
+#: avidemux/ADM_filter/filter_declaration.cpp:46
+msgid "VobSub"
+msgstr "VobSub"
+
+#: avidemux/ADM_filter/filter_declaration.cpp:46
+msgid "Embed VobSub subtitles into picture."
+msgstr "Be?gyazott VobSub felirat a k?pben"
+
+#: avidemux/ADM_filter/filter_declaration.cpp:47
+msgid "DVB sub"
+msgstr "DVB felirat"
+
+#: avidemux/ADM_filter/filter_declaration.cpp:47
+msgid "Embed DVB-T subtitle."
+msgstr "Be?gyazott DVB-T felirat."
+
+#: avidemux/ADM_filter/filter_declaration.cpp:50
+msgid "Compute Average"
+msgstr "?tlagsz?m?t?s"
+
+#: avidemux/ADM_filter/filter_declaration.cpp:50
+msgid "Compute average luma value for each pixel throughout all frames, and save to file"
+msgstr "Sz?moljon ?tlagos luma ?rt?ket minden pixel-re az ?sszes frame-en, ?s mentse f?jlba"
+
+#: avidemux/ADM_filter/filter_declaration.cpp:51
+msgid "Force too-bright/too-dim pixels to 0 and the rest to 255 or vice-versa"
+msgstr "T?l vil?gos/t?l s?t?t pixeleket 0-ra, a t?bbit 255-re m?dos?tja vagy ford?tva"
+
+#: avidemux/ADM_filter/filter_declaration.cpp:52
+msgid "Particle List"
+msgstr "Elemek list?ja"
+
+#: avidemux/ADM_filter/filter_declaration.cpp:52
+msgid "Identify 'particles' (groups of pixels)"
+msgstr "'Elemek' azonos?t?sa (pixelcsoportok)"
+
+#: avidemux/ADM_filter/filter_declaration.cpp:53
+msgid "Eraser"
+msgstr "T?rl?"
+
+#: avidemux/ADM_filter/filter_declaration.cpp:53
+msgid "\"Erase\" arbitrary areas of each frame"
+msgstr "Minden frame tetsz?leges ter?let?nek 't?rl?se'"
+
+#: avidemux/ADM_filter/filter_declaration.cpp:54
+msgid "Swiss Army Knife"
+msgstr "Sv?jci bicska"
+
+#: avidemux/ADM_filter/filter_declaration.cpp:54
+msgid "Apply operation like P'=P*A, P-A, P+A, etc. using a convolution, rolling average, image from file, or constant"
+msgstr "M?velet alkalmaz?sa, mint P '= P * A, PA, P + A, stb. konvol?ci? seg?ts?g?vel, mozg? ?tlag, k?p <- f?jlb?l, vagy ?lland?"
+
+#: avidemux/ADM_filter/filter_declaration.cpp:58
+msgid "Add Framenumber"
+msgstr "Frame sorsz?m hozz?ad?sa"
+
+#: avidemux/ADM_filter/filter_declaration.cpp:58
+msgid "Print frame number directly in image"
+msgstr "Frame sorsz?m k?zvetlen megjelen?t?se a k?pben"
+
+#: avidemux/ADM_editor/ADM_edit.cpp:72
+msgid ""
+"Avidemux detected VBR MP3 audio in this file. For keeping audio/video in sync, time map is needed. Build it now?\n"
+"\n"
+"You can do it later with \"Audio -> Build VBR Time Map\"."
+msgstr ""
+"Az Avidemux, VBR MP3 audi?t ?szlelt a f?jlban. Az audi?/vide? szinkronfenntart?sa ?rdek?ben sz?ks?g van id?t?rk?pre.\n"
+"Megcsin?lja most?\n"
+"K?s?bb is megteheti ebben a men?pontban: \"Audio -> VBR id?t?rk?p k?sz?t?se\"."
+
+#: avidemux/ADM_editor/ADM_edit.cpp:397
+msgid "File type identified but no loader support detected..."
+msgstr "A f?jl t?pusa azonos?tva, de nincs el?rhet? bet?lt? t?mogat?s"
+
+#: avidemux/ADM_editor/ADM_edit.cpp:398
+msgid "May be related to an old index file."
+msgstr "?sszef?gg?sbe hozhat? egy r?gi index f?jl-al"
+
+#: avidemux/ADM_editor/ADM_edit.cpp:405
+#, c-format
+msgid "Attempt to open %s failed!"
+msgstr "A %s f?jl megnyit?si k?s?rlete sikertelen"
+
+#: avidemux/ADM_editor/ADM_edit.cpp:421
+msgid "Video dimensions don't match."
+msgstr "A vide? m?retei nem egyeznek"
+
+#: avidemux/ADM_editor/ADM_edit.cpp:421
+msgid ""
+"You cannot mix different video dimensions yet. Using the partial video filter later will not work around this problem. The workaround is:\n"
+"\n"
+"1) \"Resize\" / \"Add Border\" / \"Crop\" each stream to the same resolution\n"
+"2) Concatenate them together"
+msgstr ""
+"Egyel?re a k?l?nb?z? vide? m?reteket nem lehet keverni. A r?szleges vide? sz?r? haszn?lata nem megold?s erre a probl?m?ra. A megold?s a k?vetkez?:\n"
+"\n"
+"1) \"?tm?retez?s\"/ \" Keret hozz?ad?sa\"/ \" V?g?s \" minden stream ugyanazzal a felbont?ssal\n"
+"2) ?sszef?zni ?ket"
+
+#: avidemux/ADM_editor/ADM_edit.cpp:533
+msgid "Build Time Map"
+msgstr "Id?t?rk?p k?sz?t?se"
+
+#: avidemux/ADM_editor/ADM_edit.cpp:533
+msgid "Build VBR time map?"
+msgstr "K?sz?t VBR id?t?rk?pet?"
+
+#: avidemux/ADM_editor/ADM_edit.cpp:567
+msgid "Use safe mode"
+msgstr "Biztons?gos m?d haszn?lata"
+
+#: avidemux/ADM_editor/ADM_edit.cpp:567
+msgid "H.264 detected"
+msgstr "H.264 felismerve"
+
+#: avidemux/ADM_editor/ADM_edit.cpp:567
+msgid ""
+"If the file is using B-frames as reference it can lead to a crash or stuttering.\n"
+"Avidemux can use another mode which is safe but YOU WILL LOSE FRAME ACCURACY.\n"
+"Do you want to use that mode?"
+msgstr ""
+"Ha a f?jl B-frame-et haszn?l referenciak?nt, az ?sszeoml?shoz vagy akadoz?shoz vezethet.\n"
+"Az Avidemux haszn?lhat m?s m?dot is, amely biztons?gos de elvesz?ti a frame-ek pontoss?g?t.\n"
+"Szeretn?, hogy haszn?lja ezt a m?dot?"
+
+#: avidemux/ADM_editor/ADM_edit.cpp:697
+msgid "Packed Bitstream detected"
+msgstr "Packed Bitstream felismerve"
+
+#: avidemux/ADM_editor/ADM_edit.cpp:698
+msgid "Do you want me to unpack it ?"
+msgstr "Ki akarja csomagolni?"
+
+#: avidemux/ADM_editor/ADM_edit.cpp:718
+msgid "Could not unpack the video"
+msgstr "Nem lehet kicsomagolni a vide?t"
+
+#: avidemux/ADM_editor/ADM_edit.cpp:718
+msgid "Using backup decoder - not frame accurate."
+msgstr "A biztons?gi m?solat dek?der haszn?lata - nem frame pontos."
+
+#: avidemux/ADM_editor/ADM_edit.cpp:723
+msgid "Weird"
+msgstr "Furcsa"
+
+#: avidemux/ADM_editor/ADM_edit.cpp:723
+msgid "The unpacking succeedeed but the index is still not up to date."
+msgstr "A kicsomagol?s sikeres, de az index m?g mindig nem naprak?sz."
+
+#: avidemux/ADM_editor/ADM_edit.cpp:729
+msgid "Troubles ahead"
+msgstr "Probl?m?k el?l"
+
+#: avidemux/ADM_editor/ADM_edit.cpp:729
+msgid "This a VOP packed AVI."
+msgstr "Ez egy VOP csomagolt AVI."
+
+#: avidemux/ADM_editor/ADM_edit.cpp:740
+msgid "Index is not up to date"
+msgstr "Az index nem naprak?sz"
+
+#: avidemux/ADM_editor/ADM_edit.cpp:740
+msgid "You should use Tool->Rebuild frame. Do it now ?"
+msgstr ""
+"?rdemes haszn?lni az Eszk?z?k->Frame-ek ?jra?p?t?se men?pontot.\n"
+"Elind?tja most?"
+
+#: avidemux/ADM_editor/ADM_edit.cpp:1502
+msgid ""
+"This looks like mpeg\n"
+" Do you want to index it?"
+msgstr ""
+"A f?jl, MPEG stream.\n"
+"K?sz?t hozz? indexet?"
+
+#: avidemux/ADM_editor/ADM_edit.cpp:1554
+msgid "Indexing failed"
+msgstr "Indexel?s sikertelen"
+
+#: avidemux/ADM_editor/ADM_edFrameType.cpp:56
+msgid "No video loaded"
+msgstr "Nincs vide? bet?ltve"
+
+#: avidemux/ADM_editor/ADM_edFrameType.cpp:61
+msgid "Not indexable"
+msgstr "Nem indexelhet?"
+
+#: avidemux/ADM_editor/ADM_edFrameType.cpp:61
+msgid "DivX 5 + packed?"
+msgstr "DivX 5 + packed?"
+
+#: avidemux/ADM_editor/ADM_edFrameType.cpp:91
+msgid "Rebuilding Frames"
+msgstr "Frame-ek ?jra?p?t?se"
+
+#: avidemux/ADM_editor/ADM_edFrameType.cpp:127
+msgid "Aborted"
+msgstr "Megszak?tva"
+
+#: avidemux/ADM_editor/ADM_edLoadSave.cpp:70
+msgid "Unsupported"
+msgstr "Nem t?mogatott"
+
+#: avidemux/ADM_editor/ADM_edLoadSave.cpp:298
+msgid "Old format project file"
+msgstr "R?gi form?tum? projekt f?jl"
+
+#: avidemux/ADM_editor/ADM_edLoadSave.cpp:298
+msgid "No more supported."
+msgstr "M?r nem t?mogatott"
+
+#: avidemux/ADM_codecs/ADM_ffmp43.cpp:44
+msgid "Internal error finding codec"
+msgstr "Bels? hiba a kodek keres?s?n?l"
+
+#: avidemux/ADM_codecs/ADM_ffmpeg.cpp:50
+msgid "Internal error opening codec"
+msgstr "Bels? hiba a kodek megnyit?s?n?l"
+
+#: avidemux/ADM_codecs/ADM_ffmpeg.cpp:53
+msgid "Internal error with context for  codec"
+msgstr "Bels? hiba a kodek-el ?sszef?g?sben"
+
+#: avidemux/ADM_audio/audiotimeline.cpp:78
+#: avidemux/ADM_audio/audiotimeline.cpp:89
+msgid "Building VBR map"
+msgstr "VBR t?rk?p l?trehoz?sa"
+
+#: avidemux/ADM_script/ADM_JSFunctions.cpp:242
+msgid "Select a directory"
+msgstr "K?nyvt?r kiv?laszt?sa"
+
+#: avidemux/ADM_script/ADM_JSFunctions.cpp:513
+msgid "Uinteger"
+msgstr "Uinteger"
+
+#: avidemux/ADM_script/ADM_JSFunctions.cpp:516
+msgid "Test uinteger"
+msgstr "Teszt uinteger"
+
+#: avidemux/ADM_script/ADM_JSFunctions.cpp:528
+msgid "Float"
+msgstr "Float"
+
+#: avidemux/ADM_script/ADM_JSFunctions.cpp:546
+msgid "Toggle"
+msgstr "Kapcsol?"
+
+#: avidemux/ADM_script/ADM_JSFunctions.cpp:568
+msgid "No Strategy"
+msgstr "Nincs strat?gia"
+
+#: avidemux/ADM_script/ADM_JSFunctions.cpp:569
+msgid "3:2 Pulldown"
+msgstr "3:2 Pulldown"
+
+#: avidemux/ADM_script/ADM_JSFunctions.cpp:570
+msgid "Pal/Secam"
+msgstr "Pal/Secam"
+
+#: avidemux/ADM_script/ADM_JSFunctions.cpp:571
+#: plugins/ADM_videoFilters/Telecide/ADM_vidDecTelecide.cpp:78
+msgid "NTSC converted from PAL"
+msgstr "NTSC konvert?l?sa PAL-b?l"
+
+#: avidemux/ADM_script/ADM_JSFunctions.cpp:573
+msgid "menu"
+msgstr "men?"
+
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:258
+msgid "P' = A"
+msgstr "P' = A"
+
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:259
+msgid "P' = P"
+msgstr "P' = P"
+
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:260
+msgid "P' = P - A"
+msgstr "P' = P - A"
+
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:261
+msgid "P' = A - P"
+msgstr "P' = A - P"
+
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:262
+msgid "P' = P + A"
+msgstr "P' = P + A"
+
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:263
+msgid "P' = P * A"
+msgstr "P' = P * A"
+
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:264
+msgid "P' = P / A"
+msgstr "P' = P / A"
+
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:265
+msgid "P' = A / P"
+msgstr "P' = A / P"
+
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:266
+msgid "P' = min (P, A)"
+msgstr "P' = min (P, A)"
+
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:267
+msgid "P' = max (P, A)"
+msgstr "P' = max (P, A)"
+
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:272
+msgid "A = convolve(P); Load convolution kernel from file"
+msgstr "A = '?sszeteker'(P); '?sszeteker?' kernel beolvas?sa f?jlb?l"
+
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:274
+msgid "A = pixel from image file as float; Load image from file"
+msgstr "A = pixel k?pf?jlb?l float-k?nt; K?p bet?lt?se f?jlb?l"
+
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:276
+msgid "A = pixel from image file as integer; Load image from file"
+msgstr "A = pixel k?pf?jlb?l integer-k?nt; K?p bet?lt?se f?jlb?l"
+
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:278
+msgid "A = floating point constant value"
+msgstr "A = lebeg?pontos ?lland? ?rt?k"
+
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:280
+msgid "A = rolling average of pixel: A = A*(1-alpha)+(P*alpha)"
+msgstr "A = pixel mozg?si ?tlaga: A = A*(1-alpha)+(P*alpha)"
+
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:285
+msgid "Select _Operation on each pixel P and input A:"
+msgstr "M?velet _kiv?laszt?sa minden P pixelen ?s A: bemeneten"
+
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:290
+msgid "Input _Type:"
+msgstr "Bemenet t?pusa:"
+
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:321
+msgid "Input _File (image or convolution kernel):"
+msgstr "Bemeneti _F?jl (k?p vagy konvol?ci?s kernel):"
+
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:321
+#: avidemux/ADM_videoFilter/ADM_vidParticle.cpp:187 avidemux/gtk_gui.cpp:2010
+#: avidemux/gtk_gui.cpp:2107
+msgid "Select file"
+msgstr "F?jl kiv?laszt?sa"
+
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:324
+msgid ""
+"_Load Bias (added to each pixel\n"
+"in file image when loaded):"
+msgstr ""
+"_Bias bet?lt?se (hozz?dva minden pixelhez\n"
+"a k?pf?jl bet?lt?sekor):"
+
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:329
+msgid ""
+"Load _Multiplier (each pixel in\n"
+"file image mult. by this when loaded):"
+msgstr ""
+"Szor_z? bet?lt?se (minden pixel megszorozva\n"
+"a k?pf?jl bet?lt?sekor):"
+
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:335
+msgid "Input _Constant:"
+msgstr "Bemeneti ?lland?:"
+
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:339
+msgid ""
+"Memory constant _alpha\n"
+"(where A = (1-alpha)*A + alpha*(curr_frame + lookahead)):"
+msgstr ""
+"Mem?ria ?lland? _alpha\n"
+"(ahol A = (1-alpha)*A + alpha*(aktu?lis f_rame + lookahead)):"
+
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:344
+msgid "Look ahead _N frames:"
+msgstr "_N frame el?olvas?sa:"
+
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:348
+msgid "Init _Start Frame (first frame # to use for head start):"
+msgstr "Kezd? frame (els? frame # f? ind?t?shoz haszn?lhat?):"
+
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:352
+msgid "Init _End Frame (last frame # to use for head start):"
+msgstr "Befejez? frame (utols? frame # f? ind?t?shoz haszn?lhat?):"
+
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:356
+msgid "Init By _Rolling (compute head start using a rolling average rather than a straight average)"
+msgstr "Mozg?si ?tlag m?dszer (a fej ind?t?s?t mozg?si ?tlaggal sz?m?tja ki, egyenes ?tlag helyett)"
+
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:361
+msgid "_Bias (will be added to result):"
+msgstr "_Bias (hozz?ad?dik az eredm?nyhez):"
+
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:364
+msgid "_Result Bias (added to each result pixel):"
+msgstr "Bias e_redm?ny (hozz?adva minden pixel eredm?nyhez):"
+
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:368
+msgid ""
+"Result _Multiplier (each result pixel\n"
+"multiplied by this):"
+msgstr "Eredm?ny szorz? (minden pixel eredm?nyt megszorozza ezzel):"
+
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:373
+msgid "_Histogram every N frames (0 to disable):"
+msgstr "Hisztogram minden N frame-re (0 - letilt?s)"
+
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:375
+#: avidemux/ADM_videoFilter/ADM_vidEraser.cpp:251
+#: avidemux/ADM_videoFilter/ADM_vidThreshold.cpp:148
+#: avidemux/ADM_videoFilter/ADM_vidParticle.cpp:192
+msgid "_Debugging settings (bits):"
+msgstr "_Hibakeres?s be?ll?t?sok (bitek):"
+
+#: avidemux/ADM_videoFilter/ADM_vidEraser.cpp:187
+msgid "Erase"
+msgstr "T?rl?s"
+
+#: avidemux/ADM_videoFilter/ADM_vidEraser.cpp:188
+msgid "Un-Erase"
+msgstr "T?rl?s visszavon?sa"
+
+#: avidemux/ADM_videoFilter/ADM_vidEraser.cpp:192
+msgid "1x1"
+msgstr "1x1"
+
+#: avidemux/ADM_videoFilter/ADM_vidEraser.cpp:193
+msgid "3x3"
+msgstr "3x3"
+
+#: avidemux/ADM_videoFilter/ADM_vidEraser.cpp:194
+msgid "5x5"
+msgstr "5x5"
+
+#: avidemux/ADM_videoFilter/ADM_vidEraser.cpp:195
+msgid "7x7"
+msgstr "7x7"
+
+#: avidemux/ADM_videoFilter/ADM_vidEraser.cpp:196
+msgid "9x9"
+msgstr "9x9"
+
+#: avidemux/ADM_videoFilter/ADM_vidEraser.cpp:197
+msgid "11x11"
+msgstr "11x11"
+
+#: avidemux/ADM_videoFilter/ADM_vidEraser.cpp:198
+msgid "15x15"
+msgstr "15x15"
+
+#: avidemux/ADM_videoFilter/ADM_vidEraser.cpp:199
+msgid "21x21"
+msgstr "21x21"
+
+#: avidemux/ADM_videoFilter/ADM_vidEraser.cpp:203
+msgid "Brush _Mode:"
+msgstr "Ecset _M?d:"
+
+#: avidemux/ADM_videoFilter/ADM_vidEraser.cpp:207
+msgid "Brush _Size:"
+msgstr "Ecset _m?rete:"
+
+#: avidemux/ADM_videoFilter/ADM_vidEraser.cpp:240
+msgid "Output \"_Color\" for all masked pixels:"
+msgstr "Kimeneti \"_Sz?n\" minden maszkolt pixeln?l:"
+
+#: avidemux/ADM_videoFilter/ADM_vidEraser.cpp:246
+msgid "Eraser _Data File:"
+msgstr "A_datf?jl t?rl?:"
+
+#: avidemux/ADM_videoFilter/ADM_vidEraser.cpp:246
+msgid "Select data file"
+msgstr "Adatf?jl kiv?laszt?sa"
+
+#: avidemux/ADM_videoFilter/ADM_vidEraser.cpp:257
+msgid "Eraser Configuration"
+msgstr "T?rl? be?ll?t?sa"
+
+#: avidemux/ADM_videoFilter/ADM_vidThreshold.cpp:135
+msgid "Mi_nimum value to be in-range:"
+msgstr "Minimum ?rt?k a tartom?nyon bel?l"
+
+#: avidemux/ADM_videoFilter/ADM_vidThreshold.cpp:136
+msgid "Ma_ximum value to be in-range:"
+msgstr "Maximum ?rt?k a tartom?nyon bel?l"
+
+#: avidemux/ADM_videoFilter/ADM_vidThreshold.cpp:139
+msgid "In-range values go white, out-of-range go black"
+msgstr "Tartom?nyon bel?li ?rt?kn?l feh?r, tartom?nyon k?v?li ?rt?kn?l fekete legyen"
+
+#: avidemux/ADM_videoFilter/ADM_vidThreshold.cpp:140
+msgid "In-range values go black, out-of-range go white"
+msgstr ""
+"Tartom?nyon bel?li ?rt?kn?l fekete,\n"
+"tartom?nyon k?v?li ?rt?kn?l feh?r legyen"
+
+#: avidemux/ADM_videoFilter/ADM_vidThreshold.cpp:145
+msgid "Output values:"
+msgstr "Kimeneti ?rt?kek:"
+
+#: avidemux/ADM_videoFilter/ADM_vidParticle.cpp:131
+msgid "New format, preferred, good for Tracker3D"
+msgstr "?j form?tum ami jobb a Tracker3D-nek"
+
+#: avidemux/ADM_videoFilter/ADM_vidParticle.cpp:133
+msgid "DG at UWA format (includes shape info & bounding box)"
+msgstr "DG at UWA form?tum (tartalmazza az alak inf?t & bounding box-ot)"
+
+#: avidemux/ADM_videoFilter/ADM_vidParticle.cpp:135
+msgid "AB at ODU format (includes shape info)"
+msgstr "DG at UWA form?tum (tartalmazza az alak inf?t)"
+
+#: avidemux/ADM_videoFilter/ADM_vidParticle.cpp:137
+msgid "Old format that Tracker3D can't read directly"
+msgstr "R?gi form?tum? Tracker3D melyet nem lehet olvasni k?zvetlen?l"
+
+#: avidemux/ADM_videoFilter/ADM_vidParticle.cpp:141
+msgid "Output _Format:"
+msgstr "Kimeneti _Form?tum:"
+
+#: avidemux/ADM_videoFilter/ADM_vidParticle.cpp:166
+msgid "Mi_nimum area for a particle to be detected:"
+msgstr "Mi_nimum ter?let egy r?szecske ?rz?kel?se sz?m?ra"
+
+#: avidemux/ADM_videoFilter/ADM_vidParticle.cpp:169
+msgid "Ma_ximum area for a particle to be detected:"
+msgstr "Ma_ximum ter?let egy r?szecske ?rz?kel?se sz?m?ra"
+
+#: avidemux/ADM_videoFilter/ADM_vidParticle.cpp:173
+msgid "_Left side crop (ignore particles in):"
+msgstr "Ba_l oldali v?g?s (r?szecsk?ket mell?zi):"
+
+#: avidemux/ADM_videoFilter/ADM_vidParticle.cpp:176
+msgid "_Right side crop (ignore particles in):"
+msgstr "_Jobb oldali v?g?s (r?szecsk?ket mell?zi):"
+
+#: avidemux/ADM_videoFilter/ADM_vidParticle.cpp:179
+msgid "_Top crop (ignore particles in):"
+msgstr "_Fels? oldali v?g?s (r?szecsk?ket mell?zi):"
+
+#: avidemux/ADM_videoFilter/ADM_vidParticle.cpp:182
+msgid "_Bottom crop (ignore particles in):"
+msgstr "_Als? oldali v?g?s (r?szecsk?ket mell?zi):"
+
+#: avidemux/ADM_videoFilter/ADM_vidParticle.cpp:187
+#: avidemux/ADM_videoFilter/ADM_vidComputeAverage.cpp:179
+msgid "_Output File:"
+msgstr "_Kimeneti f?jl:"
+
+#: avidemux/ADM_videoFilter/ADM_vidParticle.cpp:190
+msgid "_Camera number:"
+msgstr "_Kamera sz?ma:"
+
+#: avidemux/ADM_videoFilter/ADM_vidComputeAverage.cpp:171
+msgid "_Start Frame (first frame # to include in average):"
+msgstr "Kezd? frame (els? frame # ?tlagba belesz?m?t):"
+
+#: avidemux/ADM_videoFilter/ADM_vidComputeAverage.cpp:175
+msgid "_End Frame (last frame # to include), -1 = last:"
+msgstr "Utols? frame (utols? frame # belesz?m?t), -1 = utols?:"
+
+#: avidemux/ADM_videoFilter/ADM_vidComputeAverage.cpp:179
+msgid "Select output file"
+msgstr "Kimeneti f?jl kiv?laszt?sa"
+
+#: avidemux/ADM_videoFilter/ADM_vidComputeAverage.cpp:182
+msgid "_Bias (only for display; use 0 for average, 128 for frame minus average):"
+msgstr "_Bias (csak megjelen?t?s, 0 = ?tlagos, 128 = frame m?nusz ?tlag):"
+
+#: avidemux/ADM_videoFilter/ADM_vidComputeAverage.cpp:186
+msgid "Current frame minus average so far"
+msgstr "Aktu?lis frame m?nusz eddigi ?tlag"
+
+#: avidemux/ADM_videoFilter/ADM_vidComputeAverage.cpp:187
+msgid "Average so far"
+msgstr "Eddigi ?tlag"
+
+#: avidemux/ADM_videoFilter/ADM_vidComputeAverage.cpp:189
+msgid "Display nothing (fast for batch processing)"
+msgstr "Megjelen?t?s nincs (gyors a batch feldolgoz?sn?l)"
+
+#: avidemux/ADM_videoFilter/ADM_vidComputeAverage.cpp:193
+msgid "Display _Mode:"
+msgstr "_Megjelen?t?si m?d:"
+
+#: avidemux/ADM_videoFilter/ADM_vidComputeAverage.cpp:198
+msgid "ComputeAverage"
+msgstr "?tlagsz?m?t?s"
+
+#: avidemux/ADM_osSupport/ADM_crashHook.cpp:64
+msgid "Load it"
+msgstr "Beolvas?sa"
+
+#: avidemux/ADM_osSupport/ADM_crashHook.cpp:64
+msgid "Crash file"
+msgstr "?sszeoml?s f?jl"
+
+#: avidemux/ADM_osSupport/ADM_crashHook.cpp:65
+msgid ""
+"I have detected a crash file. \n"
+"Do you want to load it  ?\n"
+"(It will be deleted in all cases, you should save it if you want to keep it)"
+msgstr ""
+"?sszeomlott f?jlt tal?ltam. \n"
+"Be akarja t?lteni?\n"
+"(Ez k?s?bb minden esetben t?r?lve lesz. Ha meg akarja tartani, mentenie kell)"
+
+#: avidemux/ADM_osSupport/ADM_misc.cpp:15
+#, possible-c-format
+msgid "%lu minutes"
+msgstr "%lu perc"
+
+#: avidemux/ADM_osSupport/ADM_misc.cpp:19
+#, possible-c-format
+msgid "%lu minute"
+msgstr "%lu perc"
+
+#: avidemux/ADM_osSupport/ADM_misc.cpp:27
+#, possible-c-format
+msgid "%lu second"
+msgstr "%lu m?sodperc"
+
+#: avidemux/ADM_osSupport/ADM_misc.cpp:31
+#, possible-c-format
+msgid "%lu seconds"
+msgstr "%lu m?sodperc"
+
+#: avidemux/ADM_encoder/adm_encffmpeg.cpp:266
+msgid "Incompatible settings"
+msgstr "Nem kompatibilis be?ll?t?s"
+
+#: avidemux/ADM_encoder/adm_encffmpeg.cpp:266
+msgid "At the moment, the DV codec only accepts 720*576 at 25"
+msgstr "Jelenleg a DV codec csak 720*576 at 25-?s felbont?st fogad el "
+
+#: avidemux/ADM_encoder/adm_encRequant.cpp:93
+msgid "Requant"
+msgstr "Requant"
+
+#: avidemux/ADM_encoder/adm_encConfig.cpp:619
+msgid "Only QCIF and subQCIF are allowed for H.263"
+msgstr "H.263-n?l csak QCIF ?s subQCIF megengedettek"
+
+#: avidemux/ADM_inputs/ADM_openDML/ADM_openDML.cpp:270
+#: avidemux/ADM_inputs/ADM_openDML/ADM_openDML.cpp:352
+#: avidemux/ADM_inputs/ADM_openDML/ADM_openDML.cpp:487
+msgid "Malformed header"
+msgstr "Hib?s form?tum? fejl?c"
+
+#: avidemux/ADM_inputs/ADM_openDML/ADM_openDMLDepack.cpp:86
+msgid "Unpacking bitstream"
+msgstr "Bitsream kicsomagol?sa"
+
+#: avidemux/ADM_inputs/ADM_openDML/ADM_opendml_reindex.cpp:60
+msgid "Indexing"
+msgstr "Indexel?s"
+
+#: avidemux/ADM_inputs/ADM_mp4/ADM_mp4Indexer.cpp:341
+msgid "No stts table"
+msgstr "Nincs STTS t?bla"
+
+#: avidemux/ADM_inputs/ADM_mp4/ADM_mp4Analyzer.cpp:626
+msgid "Problem reading SVQ3 headers"
+msgstr "Probl?ma a SVQ3 fejek olvas?s?n?l"
+
+#: avidemux/ADM_inputs/ADM_h263/ADM_h263.cpp:256
+msgid "Size is not (s)QCIF"
+msgstr "A m?ret nem (s)QCIF"
+
+#: avidemux/ADM_inputs/ADM_mpegdemuxer/dmx_indexer.cpp:144
+msgid "There is several mpeg file, append them ?"
+msgstr "T?bb MPEG f?jl, ?sszef?zi ?ket?"
+
+#: avidemux/ADM_inputs/ADM_mpegdemuxer/dmx_indexer.cpp:239
+msgid "Can't determine aspect ratio"
+msgstr "Nem lehet meghat?rozni a k?par?nyt"
+
+#: avidemux/ADM_inputs/ADM_mpegdemuxer/dmx_video.cpp:348
+msgid "Out of memory"
+msgstr "Elfogyott a mem?ria"
+
+#: avidemux/ADM_inputs/ADM_mpegdemuxer/dmx_video.cpp:363
+msgid "Opening MPEG"
+msgstr "MPEG megnyit?sa"
+
+#: avidemux/ADM_inputs/ADM_mpegdemuxer/dmx_video.cpp:532
+msgid "MPEG renumbering error"
+msgstr "MPEG ?tsz?moz?si hiba"
+
+#: avidemux/ADM_inputs/ADM_ogm/ADM_ogm.cpp:340
+msgid "Take second track ?"
+msgstr "Megtartja a m?sodik s?vot ?"
+
+#: avidemux/ADM_inputs/ADM_ogm/ADM_ogm.cpp:420
+msgid "Scanning OGM"
+msgstr "IGM vizsg?lata"
+
+#: avidemux/ADM_inputs/ADM_nuv/ADM_nuv.cpp:538
+#: avidemux/ADM_inputs/ADM_nuv/ADM_nuv.cpp:567
+msgid "Opening Nuppel video"
+msgstr "Nuppel vide? megnyit?sa"
+
+#: avidemux/ADM_inputs/ADM_nuv/ADM_nuv.cpp:543
+msgid "Sure you want to abort ?"
+msgstr "Biztos, hogy megszak?tja ?"
+
+#: avidemux/ADM_inputs/ADM_nuv/ADM_nuv.cpp:754
+msgid "Size mismatch"
+msgstr "M?ret elt?r?s"
+
+#: avidemux/ADM_inputs/ADM_nuv/ADM_nuv.cpp:754
+msgid "Expect a crash."
+msgstr "?sszeoml?s v?rhat?"
+
+#: avidemux/ADM_inputs/ADM_nuv/ADM_nuv.cpp:1046
+msgid "Do you want to save an index ?"
+msgstr "Menteni akarja az index-et?"
+
+#: avidemux/ADM_ocr/adm_glyph.cpp:169
+msgid "Could not write the file"
+msgstr "A f?jl ?r?sa sikertelen"
+
+#: avidemux/ADM_ocr/adm_glyph.cpp:217
+#, c-format
+msgid "Could not read \"%s\"."
+msgstr "A f?jl \"%s\" olvas?sa sikertelen."
+
+#: avidemux/ADM_ocr/ADM_ocrEngine.cpp:75
+msgid "Output file error"
+msgstr "Kimeneti f?jl hiba"
+
+#: avidemux/ADM_ocr/ADM_ocrEngine.cpp:75
+#, possible-c-format
+msgid "Could not open \"%s\" for writing."
+msgstr "A f?jlt \"%s\" nem lehet ?r?sra megnyitni."
+
+#: avidemux/ADM_ocr/ADM_ocrEngine.cpp:83
+#: avidemux/ADM_ocr/ADM_ocrEngine.cpp:89
+msgid "Input file error"
+msgstr "Bemeneti f?jl hiba"
+
+#: avidemux/ADM_ocr/ADM_ocrEngine.cpp:83
+msgid "Unknown source type"
+msgstr "Ismeretlen forr?s t?pus"
+
+#: avidemux/ADM_ocr/ADM_ocrEngine.cpp:89
+msgid "Bitmap source failed"
+msgstr "Bitmap forr?s sikertelen"
+
+#: avidemux/ADM_ocr/ADM_ocrEngine.cpp:97
+msgid "Problem loading sub"
+msgstr "Felirat beolvas?si probl?ma"
+
+#: avidemux/ADM_ocr/ADM_ocrEngine.cpp:97
+msgid "No subs"
+msgstr "Nincs felirat"
+
+#: avidemux/ADM_ocr/ADM_vob2vobsub.cpp:250
+msgid "Ifo error"
+msgstr "IFO hiba"
+
+#: avidemux/ADM_ocr/ADM_vob2vobsub.cpp:250
+msgid "Error reading ifo file, aborting."
+msgstr "Hiba az IFO f?jl olvas?sakor, megszak?tva."
+
+#: avidemux/ADM_ocr/ADM_vob2vobsub.cpp:258
+msgid "Cannot write .idx"
+msgstr "Az .idx-et nem lehet ?rni"
+
+#: avidemux/ADM_ocr/ADM_vob2vobsub.cpp:271
+msgid "Cannot write .sub"
+msgstr "A .sub-ot nem lehet ?rni"
+
+#: avidemux/ADM_ocr/ADM_vob2vobsub.cpp:283
+msgid "Problem opening the mpeg files"
+msgstr "Probl?ma az MPEG f?jl(ok) megnyit?sakor"
+
+#: avidemux/ADM_ocr/ADM_vob2vobsub.cpp:296
+msgid "Generating VobSub file"
+msgstr "VobSub f?jl gener?l?sa"
+
+#: avidemux/ADM_coreUI/src/DIA_fileSel.cpp:129
+#, c-format
+msgid "Cannot open \"%s\"."
+msgstr "A f?jl \"%s\" megnyit?sa sikertelen."
+
+#: avidemux/ADM_coreUI/src/DIA_fileSel.cpp:142
+#, possible-c-format
+msgid ""
+"%s already exists.\n"
+"\n"
+"Do you want to replace it?"
+msgstr ""
+"%s m?r l?tezik.\n"
+"\n"
+"Fel?l?rja?"
+
+#: avidemux/ADM_coreUI/src/DIA_fileSel.cpp:169
+#: avidemux/ADM_coreUI/src/DIA_fileSel.cpp:183
+msgid "It is possible that you are trying to overwrite an input file!"
+msgstr "Lehet, hogy bemeneti f?jlt pr?b?l fel?l?rni!"
+
+#: avidemux/ADM_coreUI/src/DIA_fileSel.cpp:194
+msgid "Cannot write the file"
+msgstr "A f?jl ?r?sa sikertelen"
+
+#: avidemux/ADM_coreUI/src/DIA_fileSel.cpp:194
+#, possible-c-format
+msgid "No write access to \"%s\"."
+msgstr "Nincs ?r?si hozz?f?r?s \"%s\"."
+
+#: avidemux/gui_navigate.cpp:74
+#: avidemux/gui_navigate.cpp:394
+msgid "Decompressing error"
+msgstr "Kicsomagol?si hiba"
+
+#: avidemux/gui_navigate.cpp:74
+msgid "Cannot decode next frame."
+msgstr "A k?vetkez? frame dek?dol?sa sikertelen"
+
+#: avidemux/gui_navigate.cpp:112
+msgid "Cannot decode keyframe."
+msgstr "A keyframe dek?dol?sa sikertelen"
+
+#: avidemux/gui_navigate.cpp:238
+msgid "Seeking"
+msgstr "Keres?s"
+
+#: avidemux/gui_navigate.cpp:319
+msgid "Finding black frames"
+msgstr "Black frame keres?se"
+
+#: avidemux/gui_navigate.cpp:394
+msgid "Cannot decode the frame."
+msgstr "A frame dek?dol?sa sikertelen"
+
+#: avidemux/gtk_gui.cpp:246
+msgid "Select ECMAScript to Run"
+msgstr "V?lassza ki az ECMAScript-et a futtat?shoz"
+
+#: avidemux/gtk_gui.cpp:313
+msgid "Obsolete"
+msgstr "Elavult"
+
+#: avidemux/gtk_gui.cpp:341
+msgid "Not coded in this version"
+msgstr "Nem szerepel ebben a verzi?ban"
+
+#: avidemux/gtk_gui.cpp:356
+msgid "Select Video/Image File..."
+msgstr "Vide?/K?p f?jl kiv?laszt?sa..."
+
+#: avidemux/gtk_gui.cpp:409
+msgid ""
+"This is to be used to undo packed VOP on MPEG-4.\n"
+"Continue ?"
+msgstr ""
+"Ezt a t?m?r?tett VOP visszavon?s?ra lehet haszn?lni MPEG-4-n?l.\n"
+"Folytatja ?"
+
+#: avidemux/gtk_gui.cpp:411
+msgid "Select AVI File to Write"
+msgstr "AVI f?jl kiv?laszt?sa ?r?sra"
+
+#: avidemux/gtk_gui.cpp:417
+msgid "Select OGM File to Write"
+msgstr "OGM f?jl kiv?laszt?sa ?r?sra"
+
+#: avidemux/gtk_gui.cpp:421
+msgid "Select Workbench to Save"
+msgstr "Projekt kiv?laszt?sa ment?sre"
+
+#: avidemux/gtk_gui.cpp:463
+msgid "Select Raw File to Save"
+msgstr "Raw f?jl kiv?laszt?sa ment?sre"
+
+#: avidemux/gtk_gui.cpp:473
+msgid "Select AVI File..."
+msgstr "AVI f?jl kiv?laszt?sa..."
+
+#: avidemux/gtk_gui.cpp:476
+msgid "Select AVI File to Append..."
+msgstr "AVI f?jl kiv?laszt?sa hozz?f?z?sre"
+
+#: avidemux/gtk_gui.cpp:480
+msgid "Select File to Save Audio"
+msgstr "F?jl kiv?laszt?sa audi? ment?sre"
+
+#: avidemux/gtk_gui.cpp:514
+msgid "Select JPEG Sequence to Save"
+msgstr "JPEG k?psor kiv?laszt?sa ment?sre"
+
+#: avidemux/gtk_gui.cpp:517
+msgid "Select BMP to Save"
+msgstr "BMP kiv?laszt?sa ment?sre"
+
+#: avidemux/gtk_gui.cpp:521
+msgid "Select JPEG to Save"
+msgstr "JPEG kiv?laszt?sa ment?sre"
+
+#: avidemux/gtk_gui.cpp:574
+msgid "Select File to Save"
+msgstr "F?jl kiv?laszt?sa ment?sre"
+
+#: avidemux/gtk_gui.cpp:626
+msgid "Select MP3 to Load"
+msgstr "MP3 kiv?laszt?sa beolvas?sra"
+
+#: avidemux/gtk_gui.cpp:629
+msgid "Select AC3 to Load"
+msgstr "AC3 kiv?laszt?sa beolvas?sra"
+
+#: avidemux/gtk_gui.cpp:632
+msgid "Select WAV to Load"
+msgstr "WAV kiv?laszt?sa beolvas?sra"
+
+#: avidemux/gtk_gui.cpp:670
+msgid "Go to Frame"
+msgstr "Ugr?s frame-hez"
+
+#: avidemux/gtk_gui.cpp:670
+msgid "_Go to frame:"
+msgstr "U_gr?s frame-hez"
+
+#: avidemux/gtk_gui.cpp:675
+msgid "Out of bounds"
+msgstr "Megengedett ter?leten k?v?li"
+
+#: avidemux/gtk_gui.cpp:681
+#: avidemux/gtk_gui.cpp:1909
+msgid "Marker A > B"
+msgstr "Jelz? A > B"
+
+#: avidemux/gtk_gui.cpp:681
+msgid "An invalid frame range has been selected.  Make sure marker A is placed before marker B."
+msgstr "?rv?nytelen frame tartom?ny van kijel?lve. Gy?z?dj?n meg r?la, hogy egy ?A? jelz? el van helyezve a ?B? el?tt."
+
+#: avidemux/gtk_gui.cpp:689
+msgid "Cannot copy."
+msgstr "Nem lehet m?solni."
+
+#: avidemux/gtk_gui.cpp:701
+msgid "Something bad happened (II))"
+msgstr "Valami rossz t?rt?nt (II)"
+
+#: avidemux/gtk_gui.cpp:715
+msgid "Are you sure?"
+msgstr "Biztos?"
+
+#: avidemux/gtk_gui.cpp:774
+msgid "Use custom value"
+msgstr "Egy?ni ?rt?k haszn?lata"
+
+#: avidemux/gtk_gui.cpp:775
+msgid "Frame Rate"
+msgstr "Frame-r?ta"
+
+#: avidemux/gtk_gui.cpp:775
+msgid "_Frames per second"
+msgstr "_Frame / m?sodperc"
+
+#: avidemux/gtk_gui.cpp:778
+msgid "PAL - 25 FPS"
+msgstr "PAL - 25 FPS"
+
+#: avidemux/gtk_gui.cpp:779
+msgid "FILM - 24 FPS"
+msgstr "FILM - 24 FPS"
+
+#: avidemux/gtk_gui.cpp:780
+msgid "NTSC - 30 FPS"
+msgstr "NTSC - 30 FPS"
+
+#: avidemux/gtk_gui.cpp:782
+msgid "Standard Frame Rate:"
+msgstr "Szabv?nyos frame-r?ta:"
+
+#: avidemux/gtk_gui.cpp:788
+msgid "Change Frame Rate"
+msgstr "Frame-r?ta m?dos?t?sa"
+
+#: avidemux/gtk_gui.cpp:819
+msgid "Width is not a multiple of 8"
+msgstr "A sz?less?g nem t?bbsz?r?se a 8-nak"
+
+#: avidemux/gtk_gui.cpp:820
+msgid "This will make trouble for AVI files."
+msgstr "Ez probl?m?t okozhat az AVI f?jloknak"
+
+#: avidemux/gtk_gui.cpp:830
+msgid "Rebuild all Keyframes?"
+msgstr "Minden keyframe ?jra?p?t?se?"
+
+#: avidemux/gtk_gui.cpp:886
+msgid "Permission error"
+msgstr "Enged?ly hiba"
+
+#: avidemux/gtk_gui.cpp:889
+#, possible-c-format
+msgid "\"%s\" does not exist."
+msgstr "\"%s\" nem l?tezik."
+
+#: avidemux/gtk_gui.cpp:892
+msgid "Error opening file"
+msgstr "F?jl megnyit?si hiba"
+
+#: avidemux/gtk_gui.cpp:892
+#, possible-c-format
+msgid "Error opening \"%s\"."
+msgstr "Megnyit?si hiba \"%s\"."
+
+#: avidemux/gtk_gui.cpp:936
+msgid "Cannot open project using the video loader."
+msgstr "Nem lehet megnyitni a projektet a vide? bet?lt?vel."
+
+#: avidemux/gtk_gui.cpp:937
+msgid "Try 'File' -> 'Load/Run Project...'"
+msgstr "Pr?b?lja ?gy: 'F?jl' -> 'Projekt bet?lt?se/ind?t?sa...'"
+
+#: avidemux/gtk_gui.cpp:939
+msgid "Could not open the file"
+msgstr "Nem lehet megnyitni a f?jlt"
+
+#: avidemux/gtk_gui.cpp:973
+msgid "Multiple Audio Tracks"
+msgstr "T?bb Audi? s?v"
+
+#: avidemux/gtk_gui.cpp:973
+msgid ""
+"The file you just loaded contains several audio tracks.\n"
+"Go to Audio->MainTrack to select the active one."
+msgstr ""
+"Az im?nt bet?lt?tt f?jl t?bb audi? s?vot tartalmaz.\n"
+"Nyissa meg az 'Audi?' -> 'F? audi? s?v' men?t ?s v?lassza ki az egyiket."
+
+#: avidemux/gtk_gui.cpp:1027
+msgid "No audio decoder found for this file"
+msgstr "Audi? dek?der a f?jlhoz nem tal?lhat?"
+
+#: avidemux/gtk_gui.cpp:1028
+msgid "Save (A+V) will generate bad AVI. Save audio will work."
+msgstr "(A+V) ment?se hib?s AVI-t fog gener?lni. Az audi? ment?se m?k?dni fog."
+
+#: avidemux/gtk_gui.cpp:1087
+msgid "Something failed when appending"
+msgstr "A hozz?f?z?sn?l valami nem siker?lt"
+
+#: avidemux/gtk_gui.cpp:1098
+msgid "Something bad happened (II)"
+msgstr "Valami rossz t?rt?nt (II)"
+
+#: avidemux/gtk_gui.cpp:1162
+msgid "Cannot save the audio in copy mode"
+msgstr "M?sol?s m?dban nem lehet az audi?t menteni"
+
+#: avidemux/gtk_gui.cpp:1162
+msgid "Select WAV PCM as the audio codec, otherwise the audio file would be raw PCM."
+msgstr "V?lasszuk a PCM WAV-ot mint audi? codec-et, ellenkez? esetben a hangf?jlt nyers PCM lenne."
+
+#: avidemux/gtk_gui.cpp:1170
+msgid "Saving audio"
+msgstr "Audi? ment?se"
+
+#: avidemux/gtk_gui.cpp:1247
+msgid "Get Frame"
+msgstr "Frame bek?r?s"
+
+#: avidemux/gtk_gui.cpp:1247
+msgid "Cannot get this frame to save"
+msgstr "Ezt a frame-et nem lehet menteni"
+
+#: avidemux/gtk_gui.cpp:1285
+msgid "Mark A > B"
+msgstr "Jelz? A > B"
+
+#: avidemux/gtk_gui.cpp:1285
+msgid "Set your markers correctly."
+msgstr "?ll?tsa be helyesen a jelz?ket."
+
+#: avidemux/gtk_gui.cpp:1294
+msgid "Saving as set of jpegs"
+msgstr "Ment?s mint JPEG be?ll?t?s"
+
+#: avidemux/gtk_gui.cpp:1300
+msgid "Cannot decode frame"
+msgstr "Frame dek?dol?sa sikertelen"
+
+#: avidemux/gtk_gui.cpp:1300
+msgid "Aborting."
+msgstr "Megszak?tva."
+
+#: avidemux/gtk_gui.cpp:1311
+#: avidemux/gtk_gui.cpp:2272
+msgid "Done"
+msgstr "K?sz"
+
+#: avidemux/gtk_gui.cpp:1311
+#, possible-c-format
+msgid "Saved %d images."
+msgstr "%d k?p mentve."
+
+#: avidemux/gtk_gui.cpp:1313
+msgid "Error"
+msgstr "Hiba"
+
+#: avidemux/gtk_gui.cpp:1313
+msgid "Could not save all images."
+msgstr "Nem lehetett menteni az ?sszes k?pet"
+
+#: avidemux/gtk_gui.cpp:1330
+#, possible-c-format
+msgid "Saved \"%s\"."
+msgstr "Mentve \"%s\"."
+
+#: avidemux/gtk_gui.cpp:1332
+msgid "BMP op failed"
+msgstr "BMP m?velet sikertelen"
+
+#: avidemux/gtk_gui.cpp:1332
+#, possible-c-format
+msgid "Saving %s as a BMP file failed."
+msgstr "%s ment?se mint BMP f?jl, sikertelen"
+
+#: avidemux/gtk_gui.cpp:1354 avidemux/gtk_gui.cpp:1420
+msgid "Failed to open the file"
+msgstr "F?jl megnyit?sa sikertelen"
+
+#: avidemux/gtk_gui.cpp:1354
+msgid "Not a WAV file?"
+msgstr "Ez nem WAV f?jl?"
+
+#: avidemux/gtk_gui.cpp:1355
+msgid "WAV open file failed..."
+msgstr "WAV f?jl megnyit?sa sikertelen..."
+
+#: avidemux/gtk_gui.cpp:1492
+msgid "Cannot decompress audio frame"
+msgstr "Audi? frame kicsomagol?sa sikertelen"
+
+#: avidemux/gtk_gui.cpp:1506
+msgid "Memory Error"
+msgstr "Mem?ria hiba"
+
+#: avidemux/gtk_gui.cpp:1559
+msgid "No frames to encode"
+msgstr "Nincs k?dolhat? frame"
+
+#: avidemux/gtk_gui.cpp:1559
+msgid "Please check markers. Is \"A>\" == \">B\"?"
+msgstr "Ellen?rizze a jelz?ket. \"A>\" == \">B\"?"
+
+#: avidemux/gtk_gui.cpp:1698
+msgid "Saving raw video stream"
+msgstr "Nyers (RAW) vide? stream ment?se"
+
+#: avidemux/gtk_gui.cpp:1844
+msgid "Checking video"
+msgstr "Vide? ellen?rz?se"
+
+#: avidemux/gtk_gui.cpp:1860
+msgid "No error found"
+msgstr "Nincs hiba"
+
+#: avidemux/gtk_gui.cpp:1864
+#, c-format
+msgid "Errors found in %u frames"
+msgstr "Hiba van %u frame-ben"
+
+#: avidemux/gtk_gui.cpp:1882
+msgid "Cannot decompress the audio stream"
+msgstr "Audi? stream kicsomagol?sa sikertelen"
+
+#: avidemux/gtk_gui.cpp:1882
+msgid "Switch audio codec to Copy."
+msgstr "Az audi? kodek ?tkapcsol?sa 'M?sol?s'-ra"
+
+#: avidemux/gtk_gui.cpp:1909
+msgid "Cannot delete the selection."
+msgstr "A kijel?l?st nem lehet t?r?lni"
+
+#: avidemux/gtk_gui.cpp:1914
+msgid "You can't remove all frames"
+msgstr "Nem lehet elt?vol?tani az ?sszes frame-et"
+
+#: avidemux/gtk_gui.cpp:1921
+msgid "Something bad happened"
+msgstr "Valami rossz t?rt?nt"
+
+#: avidemux/gtk_gui.cpp:1990
+msgid "Could not get tracks info"
+msgstr "A s?v(ok) inform?ci?i nem el?rhet?ek."
+
+#: avidemux/gtk_gui.cpp:1998
+msgid "Take audio from video file"
+msgstr "Audi? beemel?se vide? f?jlb?l"
+
+#: avidemux/gtk_gui.cpp:1999
+msgid "No audio"
+msgstr "Nem audi?"
+
+#: avidemux/gtk_gui.cpp:2000
+msgid "External AC3"
+msgstr "K?ls? AC3"
+
+#: avidemux/gtk_gui.cpp:2000
+msgid "Take audio from external AC3 file"
+msgstr "Audi? beemel?se k?ls? AC3 f?jlb?l"
+
+#: avidemux/gtk_gui.cpp:2001
+msgid "External MP3"
+msgstr "K?ls? MP3"
+
+#: avidemux/gtk_gui.cpp:2001
+msgid "Take audio from external MP3 file"
+msgstr "Audi? beemel?se k?ls? MP3 f?jlb?l"
+
+#: avidemux/gtk_gui.cpp:2002
+msgid "External WAV"
+msgstr "K?ls? WAV"
+
+#: avidemux/gtk_gui.cpp:2002
+msgid "Take audio from external WAV file"
+msgstr "Audi? beemel?se k?ls? WAV f?jlb?l"
+
+#: avidemux/gtk_gui.cpp:2006
+msgid "_Audio source:"
+msgstr "_Audi? forr?s:"
+
+#: avidemux/gtk_gui.cpp:2010
+msgid "_External file:"
+msgstr "_K?ls? f?jl:"
+
+#: avidemux/gtk_gui.cpp:2019
+#, possible-c-format
+msgid "Audio track %d (%s/%d channels/%d kbit per s/%d ms shift)"
+msgstr "Audi? s?v %d (%s/%d csatorna - %d kbit/mp - %d ms eltol?s)"
+
+#: avidemux/gtk_gui.cpp:2025
+msgid "_Track from video:"
+msgstr "_S?v vide?b?l:"
+
+#: avidemux/gtk_gui.cpp:2035
+msgid "Main Audio Track"
+msgstr "F? audi? s?v"
+
+#: avidemux/gtk_gui.cpp:2041
+msgid "Cannot load"
+msgstr "Beolvas?s sikertelen"
+
+#: avidemux/gtk_gui.cpp:2041
+msgid "The selected audio file does not exist."
+msgstr "A kiv?lasztott audi? f?jl nem l?tezik"
+
+#: avidemux/gtk_gui.cpp:2116
+msgid "Second Audio Track"
+msgstr "M?sodik audi? s?v"
+
+#: avidemux/gtk_gui.cpp:2148
+msgid "Error loading the MP3 file"
+msgstr "MP3 f?jl bet?lt?si hiba"
+
+#: avidemux/gtk_gui.cpp:2157
+#: avidemux/gtk_gui.cpp:2201
+msgid "Second track loaded"
+msgstr "M?sodik s?v beolvasva"
+
+#: avidemux/gtk_gui.cpp:2171
+msgid "Error loading the AC3 file"
+msgstr "AC3 f?jl bet?lt?si hiba"
+
+#: avidemux/gtk_gui.cpp:2193
+msgid "Error loading the WAV file"
+msgstr "WAV f?jl bet?lt?si hiba"
+
+#: avidemux/gtk_gui.cpp:2260
+msgid "Saving failed"
+msgstr "Ment?s sikertelen"
+
+#: avidemux/gtk_gui.cpp:2260
+msgid "Saving the job failed. Maybe you have permission issue with ~/.avidemux"
+msgstr "A feladat ment?se sikertelen. Lehet, hogy jogosults?g hiba a(z) ~/.avidemux k?nyvt?rban"
+
+#: avidemux/gtk_gui.cpp:2272
+#, c-format
+msgid "File %s has been successfully saved."
+msgstr "A %s f?jl sikeresen mentve."
+
+#: avidemux/gtk_gui.cpp:2276
+#, c-format
+msgid "File %s was NOT saved correctly."
+msgstr "A %s f?jl ment?se NEM siker?lt"
+
+#: avidemux/gtk_gui.cpp:2442
+msgid "AvsProxy"
+msgstr "AvsProxy"
+
+#: avidemux/gtk_gui.cpp:2442
+msgid ""
+"Failed to connect to avsproxy.\n"
+"Is it running ?"
+msgstr ""
+"Csatlakoz?s az AvsProxy-hoz sikertelen.\n"
+"El lett ind?tva ?"
+
+#: avidemux/gtk_gui.cpp:2447
+msgid "avsproxy"
+msgstr "AvsProxy"
+
+#: avidemux/gtk_gui.cpp:2475
+msgid "Frame type:"
+msgstr "Frame t?pus:"
+
+#: avidemux/gtk_gui.cpp:2476
+msgid "Frame size:"
+msgstr "Frame m?ret"
+
+#: avidemux/gtk_gui.cpp:2478
+msgid "Frame Hex Dump"
+msgstr "Frame Hex Dump"
+
+#: avidemux/gtk_gui.cpp:2529
+msgid "Memory error"
+msgstr "Mem?ria hiba"
+
+#: avidemux/gtk_gui.cpp:2536
+msgid "Error converting to BMP"
+msgstr "BMP-be konvert?l?s sikertelen"
+
+#: avidemux/gtk_gui.cpp:2598
+msgid "Cannot encode the frame"
+msgstr "A frame k?dol?sa sikertelen"
+
+#: avidemux/GUI_jobs.cpp:37
+msgid "Oops"
+msgstr "Oops"
+
+#: avidemux/GUI_jobs.cpp:37
+msgid "Something very wrong happened when building joblist."
+msgstr "Valami nagyon rossz t?rt?nt, a feladatlista gener?l?s?n?l."
+
+#: avidemux/GUI_jobs.cpp:42
+msgid "There are no jobs stored"
+msgstr "Nincsenek t?rolt feladatok"
+
+#: avidemux/gui_autodrive.cpp:48
+msgid "No audio track"
+msgstr "Nincs audi? s?v"
+
+#: avidemux/gui_autodrive.cpp:48
+msgid "An audio track is necessary to create such file"
+msgstr "Egy audi? s?v sz?ks?ges az ilyen t?pus? f?jl l?trehoz?s?hoz"
+
+#: avidemux/gui_autodrive.cpp:64
+msgid "Cannot select the MPEG-4 SP codec."
+msgstr "Nem lehet kiv?lasztani az MPEG-4 SP kodek-et."
+
+#: avidemux/gui_autodrive.cpp:78
+msgid "No AAC audio encoder plugin found."
+msgstr "AAC audi? k?dol? plugin nem tal?lhat?."
+
+#: avidemux/gui_autodrive.cpp:110
+msgid ""
+"The MP3 codec does not allow disabling reservoir.\n"
+"Install lame plugin"
+msgstr ""
+"Az MP3 kodek nem engedi letiltani t?rol?t.\n"
+"Telep?tse a LAME plugin-t"
+
+#: avidemux/gui_autodrive.cpp:116
+msgid ""
+"You don't have LAME!.\n"
+"It is needed to create FLV  video."
+msgstr ""
+"Nincs LAME telep?tve!\n"
+"Ez sz?ks?ges FLV vide? k?sz?t?shez."
+
+#: avidemux/gui_autodrive.cpp:130
+msgid "Cannot select FLV1  codec."
+msgstr "Nem v?laszthat? FLV1 kodek."
+
+#: avidemux/gui_autodrive.cpp:157
+msgid "Cannot select mpeg4 sp codec."
+msgstr "Nem v?laszthat? MPEG4 SP kodek."
+
+#: avidemux/gui_autodrive.cpp:193
+msgid ""
+"You don't have FAAC!.\n"
+"It is needed to create PSP compatible video."
+msgstr ""
+"Nincs FAAC telep?tve!\n"
+"Ez sz?ks?ges PSP kompatibilis vide? k?sz?t?shez."
+
+#: avidemux/guiplay.cpp:352
+msgid "Trouble initializing audio device"
+msgstr "Probl?ma az audi? eszk?z inicializ?s?n?l"
+
+#: avidemux/gui_savenew.cpp:79
+msgid "Dual audio can only be used in copy mode"
+msgstr "Dual audi?s?vot csak 'M?sol?s' m?dban lehet haszn?lni"
+
+#: avidemux/gui_savenew.cpp:79
+msgid "Select Copy as the video codec."
+msgstr "'M?sol?s' m?d kiv?laszt?sa mint vide? kodek"
+
+#: avidemux/gui_savenew.cpp:199
+#: avidemux/gui_savenew.cpp:228
+msgid "Incompatible output format"
+msgstr "Nem kompatibilis kimeneti form?tum"
+
+#: avidemux/gui_savenew.cpp:249
+msgid "There is no second track"
+msgstr "Nincs m?sodik s?v"
+
+#: avidemux/gui_savenew.cpp:249
+msgid "Select a second audio track in the Audio menu."
+msgstr "M?sodik audi? s?v kiv?laszt?sa az 'Audi?' men?ben"
+
+#: avidemux/gui_savenew.cpp:253
+msgid "Select dual audio AVI to write"
+msgstr "Dual audi? s?vos AVI kiv?laszt?sa ?r?sra"
+
+#: avidemux/gui_savenew.cpp:275
+msgid "This cannot have packed VOP"
+msgstr "Ez nem tud VOP-ot becsomagolni"
+
+#: avidemux/gui_savenew.cpp:275
+msgid "It is not MPEG-4 video. File will not be saved."
+msgstr "Ez nem MPEG-4 vide?. A f?jl nem lehet menteni."
+
+#: avidemux/gui_savenew.cpp:339
+msgid ""
+"You may need smart copy.\n"
+"Enable it?"
+msgstr ""
+"Gyorsm?sol?sra van sz?ks?g.\n"
+"Enged?lyezi?"
+
+#: avidemux/gui_savenew.cpp:342
+msgid "_Q factor (set 4):"
+msgstr "_Q faktor (be?ll?t?s 4):"
+
+#: plugins/ADM_videoFilters/Deinterlace/ADM_vidDeinterlace.cpp:36
+msgid "Deinterlace"
+msgstr "V?ltottsoros m?d megsz?ntet?se"
+
+#: plugins/ADM_videoFilters/Deinterlace/ADM_vidDeinterlace.cpp:39
+msgid "Mask interlacing artifacts. Port of Smart deinterlace."
+msgstr "Mask interlacing artifacts. Port of Smart deinterlace."
+
+#: plugins/ADM_videoFilters/Hue/gtk/DIA_hue.cpp:62
+msgid "Hue"
+msgstr "?rnyalat"
+
+#: plugins/ADM_videoFilters/Hue/gtk/DIA_hue.cpp:159
+msgid "Hue/Saturation"
+msgstr "?rnyalat/tel?tetts?g"
+
+#: plugins/ADM_videoFilters/Hue/gtk/DIA_hue.cpp:173
+msgid "<b>Hue:</b>"
+msgstr "<b>?rnyalat:</b>"
+
+#: plugins/ADM_videoFilters/Hue/gtk/DIA_hue.cpp:181
+msgid "<b>Saturation:</b>"
+msgstr "<b>Tel?tetts?g:</b>"
+
+#: plugins/ADM_videoFilters/Hue/ADM_vidHue.cpp:49
+msgid "MPlayer hue"
+msgstr "MPlayer ?rnyalat"
+
+#: plugins/ADM_videoFilters/Hue/ADM_vidHue.cpp:52
+msgid "Adjust hue and saturation."
+msgstr "?rnyalat/tel?tetts?g igaz?t?sa."
+
+#: plugins/ADM_videoFilters/ResampleFps/ADM_vidResampleFPS.cpp:53
+#: plugins/ADM_videoFilters/ResampleFps/ADM_vidResampleFPS.cpp:76
+msgid "Resample fps"
+msgstr "Fps m?dos?t?sa"
+
+#: plugins/ADM_videoFilters/ResampleFps/ADM_vidResampleFPS.cpp:56
+msgid "Change framerate while keeping duration."
+msgstr "Frame-r?ta m?dos?t?sa az id?tartam megtart?s?val"
+
+#: plugins/ADM_videoFilters/ResampleFps/ADM_vidResampleFPS.cpp:71
+msgid "_New frame rate:"
+msgstr "?_j frame-r?ta:"
+
+#: plugins/ADM_videoFilters/ResampleFps/ADM_vidResampleFPS.cpp:72
+msgid "_Blend"
+msgstr "_Kever?s"
+
+#: plugins/ADM_videoFilters/lavDeinterlace/ADM_lavpp_deint.cpp:90
+#: plugins/ADM_videoFilters/lavDeinterlace/ADM_lavpp_deint.cpp:120
+msgid "libavcodec deinterlacer"
+msgstr "Libavcodec deinterlacer"
+
+#: plugins/ADM_videoFilters/lavDeinterlace/ADM_lavpp_deint.cpp:93
+msgid "All FFmpeg deinterlace filters (bicubic, median, ...)."
+msgstr "Az ?sszes FFmpeg Deinterlace sz?r? (bicubic, median, ...)."
+
+#: plugins/ADM_videoFilters/lavDeinterlace/ADM_lavpp_deint.cpp:107
+msgid "Linear blend"
+msgstr "Line?ris kever?s"
+
+#: plugins/ADM_videoFilters/lavDeinterlace/ADM_lavpp_deint.cpp:108
+msgid "Linear interpolate"
+msgstr "Linearis interpol?l?s"
+
+#: plugins/ADM_videoFilters/lavDeinterlace/ADM_lavpp_deint.cpp:109
+msgid "Cubic interpolate"
+msgstr "Cubic interpol?l?s"
+
+#: plugins/ADM_videoFilters/lavDeinterlace/ADM_lavpp_deint.cpp:110
+msgid "Median interpolate"
+msgstr "Median interpol?l?s"
+
+#: plugins/ADM_videoFilters/lavDeinterlace/ADM_lavpp_deint.cpp:111
+msgid "FFmpeg deint"
+msgstr "FFmpeg deint"
+
+#: plugins/ADM_videoFilters/lavDeinterlace/ADM_lavpp_deint.cpp:115
+msgid "_Deinterlacing:"
+msgstr "_Deinterlacing:"
+
+#: plugins/ADM_videoFilters/lavDeinterlace/ADM_lavpp_deint.cpp:116
+msgid "_Autolevel"
+msgstr "_Auto-szint"
+
+#: plugins/ADM_videoFilters/BlendRemover/ADM_vidBlendRemoval.cpp:56
+#: plugins/ADM_videoFilters/BlendRemover/ADM_vidBlendRemoval.cpp:77
+msgid "Blend Removal"
+msgstr "Blend elt?vol?t?"
+
+#: plugins/ADM_videoFilters/BlendRemover/ADM_vidBlendRemoval.cpp:59
+msgid "Try to remove blending."
+msgstr "Pr?b?lja meg elt?vol?tani a Blending-et."
+
+#: plugins/ADM_videoFilters/BlendRemover/ADM_vidBlendRemoval.cpp:68
+#: plugins/ADM_videoFilters/BlendRemover/ADM_vidHardIvtcRemoval.cpp:78
+#: plugins/ADM_videoFilters/MSmooth/ADM_vidMsmooth.cpp:183
+#: plugins/ADM_videoFilters/KernelDeint/ADM_vidKernelDeint.cpp:75
+#: plugins/ADM_videoFilters/MSharpen/ADM_vidMSharpen.cpp:159
+#: plugins/ADM_videoFilters/DgBob/ADM_vidDGbob.cpp:86
+msgid "_Threshold:"
+msgstr "_Hat?r?rt?k"
+
+#: plugins/ADM_videoFilters/BlendRemover/ADM_vidBlendRemoval.cpp:69
+msgid "If value is smaller than threshold it is considered valid.Smaller value might mean more false positive."
+msgstr "Ha az ?rt?k kisebb, mint a hat?r?rt?k, az ?rv?nyesnek tekinthet?. Lehet, hogy a kisebb ?rt?k t?bb hamis pozit?vot jelent."
+
+#: plugins/ADM_videoFilters/BlendRemover/ADM_vidBlendRemoval.cpp:71
+#: plugins/ADM_videoFilters/BlendRemover/ADM_vidHardIvtcRemoval.cpp:81
+msgid "_Noise:"
+msgstr "_Zaj:"
+
+#: plugins/ADM_videoFilters/BlendRemover/ADM_vidBlendRemoval.cpp:71
+#: plugins/ADM_videoFilters/BlendRemover/ADM_vidHardIvtcRemoval.cpp:81
+msgid "If pixels are closer than noise, they are considered to be the same"
+msgstr "Ha a k?ppontok k?zelebbiek mint a zaj, azokat azonosnak kell tekinteni"
+
+#: plugins/ADM_videoFilters/BlendRemover/ADM_vidBlendRemoval.cpp:72
+msgid "I_dentical:"
+msgstr "_Megegyez?:"
+
+#: plugins/ADM_videoFilters/BlendRemover/ADM_vidBlendRemoval.cpp:72
+#: plugins/ADM_videoFilters/BlendRemover/ADM_vidHardIvtcRemoval.cpp:82
+msgid "If metric is less than identical, images are considered identical"
+msgstr "Ha a metrika kevesebb mint megegyez?, a k?peket azonosnak kell tekinteni"
+
+#: plugins/ADM_videoFilters/BlendRemover/ADM_vidBlendRemoval.cpp:73
+#: plugins/ADM_videoFilters/BlendRemover/ADM_vidHardIvtcRemoval.cpp:83
+msgid "_Show metrics"
+msgstr "Metrika megjelen?t?_se"
+
+#: plugins/ADM_videoFilters/BlendRemover/ADM_vidBlendRemoval.cpp:73
+#: plugins/ADM_videoFilters/BlendRemover/ADM_vidHardIvtcRemoval.cpp:83
+msgid "Show metric in image (debug)"
+msgstr "Metrika megjelen?t?_se a k?pben (hibakeress?s)"
+
+#: plugins/ADM_videoFilters/BlendRemover/ADM_vidHardIvtcRemoval.cpp:69
+msgid "Remove IVTC that has been analog captured or resized."
+msgstr "IVTC elt?vol?t?sa, ha anal?g m?don r?gz?tett vagy ?tm?retezett."
+
+#: plugins/ADM_videoFilters/BlendRemover/ADM_vidHardIvtcRemoval.cpp:79
+msgid "If value is smaller than threshold it is considered valid. Smaller value might mean more false positive"
+msgstr "Ha az ?rt?k kisebb, mint a hat?r?rt?k, az ?rv?nyesnek tekinthet?. Lehet, hogy a kisebb ?rt?k t?bb hamis pozit?vot jelent."
+
+#: plugins/ADM_videoFilters/BlendRemover/ADM_vidHardIvtcRemoval.cpp:82
+msgid "_Identical:"
+msgstr "_Megegyez?:"
+
+#: plugins/ADM_videoFilters/BlendRemover/ADM_vidHardIvtcRemoval.cpp:87
+msgid "Hard IVTC Removal"
+msgstr "Er?ltetett IVTC elt?vol?t?s"
+
+#: plugins/ADM_videoFilters/Whirl/ADM_vidWhirl.cpp:60
+msgid "Whirl"
+msgstr "?rv?ny"
+
+#: plugins/ADM_videoFilters/Whirl/ADM_vidWhirl.cpp:63
+msgid "Useless whirlwind effect."
+msgstr "?rv?ny hat?s haszn?lhatatlan"
+
+#: plugins/ADM_videoFilters/Ass/ADM_vidASS.cpp:47
+#: plugins/ADM_videoFilters/Ass/ADM_vidASS.cpp:92
+msgid "ASS"
+msgstr "ASS"
+
+#: plugins/ADM_videoFilters/Ass/ADM_vidASS.cpp:50
+msgid "Add ASS/SSA subtitles to the picture."
+msgstr "ASS/SSA felirat hozz?ad?sa a k?phez"
+
+#: plugins/ADM_videoFilters/Ass/ADM_vidASS.cpp:84
+msgid "_Subtitle file (ASS/SSA):"
+msgstr "_Felirat f?jl (ASS/SSA):"
+
+#: plugins/ADM_videoFilters/Ass/ADM_vidASS.cpp:84
+#: plugins/ADM_videoFilters/Srt/DIA_srt.cpp:84
+msgid "Select Subtitle file"
+msgstr "Felirat f?jl kiv?laszt?sa"
+
+#: plugins/ADM_videoFilters/Ass/ADM_vidASS.cpp:85
+msgid "_Line spacing:"
+msgstr "_Sork?z:"
+
+#: plugins/ADM_videoFilters/Ass/ADM_vidASS.cpp:86
+msgid "_Font scale:"
+msgstr "_Font m?ret:"
+
+#: plugins/ADM_videoFilters/Ass/ADM_vidASS.cpp:87
+msgid "_Top margin:"
+msgstr "_Fels? marg?"
+
+#: plugins/ADM_videoFilters/Ass/ADM_vidASS.cpp:88
+msgid "Botto_m margin"
+msgstr "_Als? marg?"
+
+#: plugins/ADM_videoFilters/MSmooth/ADM_vidMsmooth.cpp:103
+msgid "MSmooth by Donald Graft"
+msgstr "MSmooth Donald Graft-t?l"
+
+#: plugins/ADM_videoFilters/MSmooth/ADM_vidMsmooth.cpp:106
+msgid "Smooth the image, don't blur edges. Useful on anime."
+msgstr "K?p l?gy?t?sa. Nem mossa el az ?leket. Anime-n?l hasznos."
+
+#: plugins/ADM_videoFilters/MSmooth/ADM_vidMsmooth.cpp:181
+msgid "_High quality"
+msgstr "_K?v?l? min?s?g"
+
+#: plugins/ADM_videoFilters/MSmooth/ADM_vidMsmooth.cpp:182
+msgid "Show _mask"
+msgstr "Maszk megjelen?t?se"
+
+#: plugins/ADM_videoFilters/MSmooth/ADM_vidMsmooth.cpp:188
+msgid "MSmooth"
+msgstr "MSmooth"
+
+#: plugins/ADM_videoFilters/Eq2/gtk/DIA_eq2.cpp:196
+#: plugins/ADM_videoFilters/Eq2/ADM_vidEq2.cpp:57
+msgid "MPlayer eq2"
+msgstr "MPlayer eq2"
+
+#: plugins/ADM_videoFilters/Eq2/gtk/DIA_eq2.cpp:222
+msgid "Brigh_tness:"
+msgstr "F?nye_r?"
+
+#: plugins/ADM_videoFilters/Eq2/gtk/DIA_eq2.cpp:230
+msgid "_Saturation:"
+msgstr "_Tel?tetts?g:"
+
+#: plugins/ADM_videoFilters/Eq2/gtk/DIA_eq2.cpp:265
+msgid "_Contrast:"
+msgstr "_Kontraszt:"
+
+#: plugins/ADM_videoFilters/Eq2/gtk/DIA_eq2.cpp:291
+msgid "_Initial:"
+msgstr "_Kez_d?:"
+
+#: plugins/ADM_videoFilters/Eq2/gtk/DIA_eq2.cpp:317
+msgid "_Red:"
+msgstr "_V?r?s:"
+
+#: plugins/ADM_videoFilters/Eq2/gtk/DIA_eq2.cpp:334
+msgid "_Green:"
+msgstr "_Z?ld:"
+
+#: plugins/ADM_videoFilters/Eq2/gtk/DIA_eq2.cpp:342
+msgid "_Blue:"
+msgstr "_K?k:"
+
+#: plugins/ADM_videoFilters/Eq2/gtk/DIA_eq2.cpp:350
+msgid "_Weight:"
+msgstr "Sz?_negyens?ly:"
+
+#: plugins/ADM_videoFilters/Eq2/gtk/DIA_eq2.cpp:376
+msgid "<b>Gamma</b>"
+msgstr "<b>Gamma</b>"
+
+#: plugins/ADM_videoFilters/Eq2/ADM_vidEq2.cpp:60
+msgid "Adjust contrast, brightness, saturation and gamma."
+msgstr "Kontraszt, f?nyer?, tel?tetts?g ?s gamma be?ll?t?sa"
+
+#: plugins/ADM_videoFilters/AvisynthResize/qt4/Q_resize.cpp:246
+#: plugins/ADM_videoFilters/AvisynthResize/ADM_vidResize.cpp:245
+#: plugins/ADM_videoFilters/MplayerResize/qt4/Q_resize.cpp:246
+#: plugins/ADM_videoFilters/MplayerResize/ADM_vidMPLResize.cpp:133
+msgid "Width and height cannot be odd"
+msgstr "A sz?less?g ?s magass?g nem lehet p?ratlan sz?m"
+
+#: plugins/ADM_videoFilters/AvisynthResize/ADM_vidResize.cpp:42
+msgid "Picture resizer ported from Avisynth (C Version, slow)."
+msgstr "K?p ?tm?retez?, Avisynt-b?l portolva (C verzi?, lass?)"
+
+#: plugins/ADM_videoFilters/AvisynthResize/ADM_vidResize.cpp:243
+#: plugins/ADM_videoFilters/MplayerResize/ADM_vidMPLResize.cpp:131
+msgid "Width and height cannot be 0"
+msgstr "A sz?less?g ?s magass?g nem lehet 0"
+
+#: plugins/ADM_videoFilters/Tdeint/DIA_tdeint.cpp:31
+#: plugins/ADM_videoFilters/Tdeint/DIA_tdeint.cpp:37
+msgid "Auto (might not work)"
+msgstr "Auto (lehet, hogy nem m?k?dik)"
+
+#: plugins/ADM_videoFilters/Tdeint/DIA_tdeint.cpp:32
+#: plugins/ADM_videoFilters/Yadif/ADM_vidYadif.cpp:143
+msgid "Top field first"
+msgstr "Fels? mez? el?sz?r"
+
+#: plugins/ADM_videoFilters/Tdeint/DIA_tdeint.cpp:33
+#: plugins/ADM_videoFilters/Yadif/ADM_vidYadif.cpp:142
+msgid "Bottom field first"
+msgstr "Als? mez? el?sz?r"
+
+#: plugins/ADM_videoFilters/Tdeint/DIA_tdeint.cpp:38
+msgid "Bottom field (keep top)"
+msgstr "Als? mez? (fels? megtart?sa)"
+
+#: plugins/ADM_videoFilters/Tdeint/DIA_tdeint.cpp:39
+msgid "Top field (keep bottom)"
+msgstr "Fels? mez? (als? megtart?sa)"
+
+#: plugins/ADM_videoFilters/Tdeint/DIA_tdeint.cpp:44
+msgid "Cubic interpolation"
+msgstr "Cubic interpol?ci?"
+
+#: plugins/ADM_videoFilters/Tdeint/DIA_tdeint.cpp:45
+msgid "Modified ELA"
+msgstr "M?dos?tott ELA"
+
+#: plugins/ADM_videoFilters/Tdeint/DIA_tdeint.cpp:46
+msgid "Kernel interpolation"
+msgstr "Kernel interpol?ci?"
+
+#: plugins/ADM_videoFilters/Tdeint/DIA_tdeint.cpp:47
+msgid "Modified ELA-2"
+msgstr "M?dos?tott ELA-2"
+
+#: plugins/ADM_videoFilters/Tdeint/DIA_tdeint.cpp:52
+msgid "4 fields check"
+msgstr "4 mez? ellen?rz?s"
+
+#: plugins/ADM_videoFilters/Tdeint/DIA_tdeint.cpp:53
+msgid "5 fields check"
+msgstr "5 mez? ellen?rz?s"
+
+#: plugins/ADM_videoFilters/Tdeint/DIA_tdeint.cpp:54
+msgid "4 fields check (no avg)"
+msgstr "4 mez? ellen?rz?s (nem ?tlag)"
+
+#: plugins/ADM_videoFilters/Tdeint/DIA_tdeint.cpp:55
+msgid "5 fields check (no avg)"
+msgstr "5 mez? ellen?rz?s (nem ?tlag)"
+
+#: plugins/ADM_videoFilters/Tdeint/DIA_tdeint.cpp:61
+msgid "No link"
+msgstr "Nincs kapcsolat"
+
+#: plugins/ADM_videoFilters/Tdeint/DIA_tdeint.cpp:62
+msgid "Full link"
+msgstr "Teljes kapcsolat"
+
+#: plugins/ADM_videoFilters/Tdeint/DIA_tdeint.cpp:63
+msgid "Y to UV"
+msgstr "Y -> UV"
+
+#: plugins/ADM_videoFilters/Tdeint/DIA_tdeint.cpp:64
+msgid "UV to Y"
+msgstr "UV -> Y"
+
+#: plugins/ADM_videoFilters/Tdeint/DIA_tdeint.cpp:69
+msgid "1"
+msgstr "1"
+
+#: plugins/ADM_videoFilters/Tdeint/DIA_tdeint.cpp:70
+msgid "2"
+msgstr "2"
+
+#: plugins/ADM_videoFilters/Tdeint/DIA_tdeint.cpp:77
+#: plugins/ADM_videoFilters/KernelDeint/ADM_vidKernelDeint.cpp:74
+#: plugins/ADM_videoFilters/DgBob/ADM_vidDGbob.cpp:84
+#: plugins/ADM_videoFilters/Telecide/ADM_vidDecTelecide.cpp:103
+msgid "_Field order:"
+msgstr "_Mez? sorrend:"
+
+#: plugins/ADM_videoFilters/Tdeint/DIA_tdeint.cpp:78
+msgid "_Interpolate:"
+msgstr "_Interpol?l?s:"
+
+#: plugins/ADM_videoFilters/Tdeint/DIA_tdeint.cpp:80
+#: plugins/ADM_videoFilters/TIsophote/ADM_vidTisophote.cpp:66
+msgid "_Type:"
+msgstr "_T?pus:"
+
+#: plugins/ADM_videoFilters/Tdeint/DIA_tdeint.cpp:81
+msgid "_MntMode:"
+msgstr "_Mnt m?d:"
+
+#: plugins/ADM_videoFilters/Tdeint/DIA_tdeint.cpp:82
+msgid "_Link:"
+msgstr "_Kapcsolat:"
+
+#: plugins/ADM_videoFilters/Tdeint/DIA_tdeint.cpp:83
+msgid "_AP type:"
+msgstr "_AP t?pus:"
+
+#: plugins/ADM_videoFilters/Tdeint/DIA_tdeint.cpp:86
+msgid "Use ch_roma to evalute"
+msgstr "Chorma haszn?lata a ki?rt?kel?shez"
+
+#: plugins/ADM_videoFilters/Tdeint/DIA_tdeint.cpp:87
+msgid "Try _weave"
+msgstr "Pr?b?lja _hull?mmal"
+
+#: plugins/ADM_videoFilters/Tdeint/DIA_tdeint.cpp:88
+msgid "_Denoise"
+msgstr "_Zajmentes?t?s"
+
+#: plugins/ADM_videoFilters/Tdeint/DIA_tdeint.cpp:89
+#: plugins/ADM_videoFilters/KernelDeint/ADM_vidKernelDeint.cpp:76
+msgid "_Sharp"
+msgstr "?_les?t?s"
+
+#: plugins/ADM_videoFilters/Tdeint/DIA_tdeint.cpp:90
+msgid "_Evalute all frames"
+msgstr "?sszes f_rame ki?rt?kel?se"
+
+#: plugins/ADM_videoFilters/Tdeint/DIA_tdeint.cpp:93
+msgid "Motion threshold, l_uma:"
+msgstr "Motion hat?r?rt?k, l_uma:"
+
+#: plugins/ADM_videoFilters/Tdeint/DIA_tdeint.cpp:94
+msgid "Motion threshold, c_hroma:"
+msgstr "Motion hat?r?rt?k, c_hroma:"
+
+#: plugins/ADM_videoFilters/Tdeint/DIA_tdeint.cpp:95
+msgid "Area com_bing threshold:"
+msgstr "Ter?let ?sszef?s?l?si hat?r?rt?k:"
+
+#: plugins/ADM_videoFilters/Tdeint/DIA_tdeint.cpp:96
+msgid "Combe_d threshold:"
+msgstr "?sszef?s?l?si hat?r?rt?k:"
+
+#: plugins/ADM_videoFilters/Tdeint/DIA_tdeint.cpp:97
+msgid "Artefact _protection threshold:"
+msgstr "Munkaanya_g v?delmi hat?r?rt?k:"
+
+#: plugins/ADM_videoFilters/Tdeint/DIA_tdeint.cpp:98
+msgid "Debug:"
+msgstr "Hibakeres?s:"
+
+#: plugins/ADM_videoFilters/Tdeint/DIA_tdeint.cpp:107
+#: plugins/ADM_videoFilters/Tdeint/ADM_vidTdeint.cpp:152
+msgid "TDeint"
+msgstr "TDeint"
+
+#: plugins/ADM_videoFilters/Tdeint/ADM_vidTdeint.cpp:155
+msgid "Motion adaptative deinterlacer by Tritical."
+msgstr "Motion adaptative deinterlacer by Tritical."
+
+#: plugins/ADM_videoFilters/Unblend/ADM_vidUnblend.cpp:47
+#: plugins/ADM_videoFilters/LargeMedian/ADM_vidLargeMedian.cpp:33
+msgid "Median (5x5)"
+msgstr "Median (5x5)"
+
+#: plugins/ADM_videoFilters/Unblend/ADM_vidUnblend.cpp:50
+msgid "Unblend by Bach"
+msgstr "Unblend by Bach"
+
+#: plugins/ADM_videoFilters/Delta/ADM_vidDelta.cpp:40
+msgid "Luma delta"
+msgstr "Luma delta"
+
+#: plugins/ADM_videoFilters/Delta/ADM_vidDelta.cpp:43
+msgid "Difference between current and previous picture."
+msgstr "Az el?z? ?s a jelenlegi k?p k?z?tti k?l?nbs?g:"
+
+#: plugins/ADM_videoFilters/PulldownRemoval/ADM_vidFieldUnblend.cpp:73
+msgid "Metrics"
+msgstr "Metrik?k"
+
+#: plugins/ADM_videoFilters/PulldownRemoval/ADM_vidFieldUnblend.cpp:73
+msgid "Do you want to print metrics on screen ?"
+msgstr "Szeretn? a metrik?t a k?perny?re nyomtatni ?"
+
+#: plugins/ADM_videoFilters/FastConvolution/Mean.cpp:26
+#: plugins/ADM_videoFilters/FastConvolution/Gauss.cpp:27
+msgid "Gauss smooth"
+msgstr "Gauss l?gy?t?s"
+
+#: plugins/ADM_videoFilters/FastConvolution/Mean.cpp:26
+#: plugins/ADM_videoFilters/FastConvolution/Gauss.cpp:30
+msgid "Gaussian smooth. Blur the picture."
+msgstr "Gaussian l?gy?t?s. Elmossa a k?pet."
+
+#: plugins/ADM_videoFilters/FastConvolution/Mean.cpp:27
+#: plugins/ADM_videoFilters/FastConvolution/Median.cpp:27
+msgid "Median"
+msgstr "Median"
+
+#: plugins/ADM_videoFilters/FastConvolution/Mean.cpp:27
+#: plugins/ADM_videoFilters/FastConvolution/Median.cpp:30
+msgid "Median kernel 3x3. Remove high frequency noise."
+msgstr "Median kernel 3x3. Nagyfrekvenci?s zajok elt?vol?t?sa"
+
+#: plugins/ADM_videoFilters/FastConvolution/Mean.cpp:31
+msgid "Mean"
+msgstr "Mean"
+
+#: plugins/ADM_videoFilters/FastConvolution/Mean.cpp:34
+msgid "Mean (blur) kernel."
+msgstr "Mean (blur) kernel."
+
+#: plugins/ADM_videoFilters/FastConvolution/Sharpen.cpp:26
+msgid "Sharpen"
+msgstr "?les?t?s"
+
+#: plugins/ADM_videoFilters/FastConvolution/Sharpen.cpp:29
+msgid "Enhance difference between near pixels."
+msgstr "Pixelek k?z?tti k?l?nbs?g n?vel?se"
+
+#: plugins/ADM_videoFilters/FastConvolution/ADM_vidFastConvolution.cpp:175
+#: plugins/ADM_videoFilters/LargeMedian/ADM_vidLargeMedian.cpp:293
+msgid "_Process luma"
+msgstr "_Process luma"
+
+#: plugins/ADM_videoFilters/FastConvolution/ADM_vidFastConvolution.cpp:175
+#: plugins/ADM_videoFilters/LargeMedian/ADM_vidLargeMedian.cpp:293
+msgid "Process luma plane"
+msgstr "Process luma plane"
+
+#: plugins/ADM_videoFilters/FastConvolution/ADM_vidFastConvolution.cpp:176
+#: plugins/ADM_videoFilters/LargeMedian/ADM_vidLargeMedian.cpp:294
+msgid "P_rocess chroma"
+msgstr "P_rocess chroma"
+
+#: plugins/ADM_videoFilters/FastConvolution/ADM_vidFastConvolution.cpp:180
+msgid "Fast Convolution"
+msgstr "Gyorsteker?s"
+
+#: plugins/ADM_videoFilters/Contrast/gtk/DIA_contrast.cpp:53
+#: plugins/ADM_videoFilters/Contrast/gtk/DIA_contrast.cpp:175
+#: plugins/ADM_videoFilters/Contrast/gtk/DIA_contrast.cpp:193
+#: plugins/ADM_videoFilters/Contrast/ADM_vidContrast.cpp:30
+#: plugins/ADM_videoFilters/colorYUV/gtk/DIA_coloryuv.cpp:162
+msgid "Contrast"
+msgstr "Kontraszt"
+
+#: plugins/ADM_videoFilters/Contrast/gtk/DIA_contrast.cpp:202
+#: plugins/ADM_videoFilters/colorYUV/gtk/DIA_coloryuv.cpp:169
+msgid "Brightness"
+msgstr "F?nyer?"
+
+#: plugins/ADM_videoFilters/Contrast/gtk/DIA_contrast.cpp:216
+msgid "Luma"
+msgstr "Luma"
+
+#: plugins/ADM_videoFilters/Contrast/gtk/DIA_contrast.cpp:220
+#: plugins/ADM_videoFilters/Chroma/ADM_vidChromaU.cpp:30
+#: plugins/ADM_videoFilters/colorYUV/gtk/DIA_coloryuv.cpp:197
+msgid "Chroma U"
+msgstr "Chroma U"
+
+#: plugins/ADM_videoFilters/Contrast/gtk/DIA_contrast.cpp:224
+msgid "Chroma v"
+msgstr "Chroma v"
+
+#: plugins/ADM_videoFilters/Contrast/ADM_vidContrast.cpp:33
+msgid "Adjust contrast, brightness and colors."
+msgstr "Kontraszt, f?nyer? ?s sz?nbe?ll?t?s"
+
+#: plugins/ADM_videoFilters/ForcedPP/ADM_vidForcedPP.cpp:32
+msgid "Forced postprocessing"
+msgstr "K?nyszer?tett ut?munk?latok"
+
+#: plugins/ADM_videoFilters/ForcedPP/ADM_vidForcedPP.cpp:35
+msgid "Apply blind postprocessing.."
+msgstr "Vak ut?munk?latok v?grehajt?sa..."
+
+#: plugins/ADM_videoFilters/ForcedPP/ADM_vidForcedPP.cpp:65
+msgid "Forced Postprocessing"
+msgstr "K?nyszer?tett ut?munk?latok"
+
+#: plugins/ADM_videoFilters/Crop/gtk/DIA_crop.cpp:246
+msgid "Crop Settings"
+msgstr "V?g?s be?ll?t?sa"
+
+#: plugins/ADM_videoFilters/Crop/gtk/DIA_crop.cpp:271
+msgid "Crop Left:"
+msgstr "V?g?s-Bal:"
+
+#: plugins/ADM_videoFilters/Crop/gtk/DIA_crop.cpp:278
+msgid "Crop Right:"
+msgstr "V?g?s-Jobb:"
+
+#: plugins/ADM_videoFilters/Crop/gtk/DIA_crop.cpp:285
+msgid "Crop Top:"
+msgstr "V?g?s-Fel?l:"
+
+#: plugins/ADM_videoFilters/Crop/gtk/DIA_crop.cpp:292
+msgid "Crop Bottom:"
+msgstr "V?g?s-Alul:"
+
+#: plugins/ADM_videoFilters/Crop/gtk/DIA_crop.cpp:335
+msgid "Auto Crop"
+msgstr "Auto v?g?s"
+
+#: plugins/ADM_videoFilters/Crop/ADM_vidCrop.cpp:52
+msgid "Crop"
+msgstr "V?g?s"
+
+#: plugins/ADM_videoFilters/Crop/ADM_vidCrop.cpp:55
+msgid "Remove lines from top/bottom/left/right."
+msgstr "Sorok elt?vol?t?sa /fels?/als?/bal/jobb."
+
+#: plugins/ADM_videoFilters/KernelDeint/ADM_vidKernelDeint.cpp:48
+#: plugins/ADM_videoFilters/KernelDeint/ADM_vidKernelDeint.cpp:82
+#: plugins/ADM_videoFilters/TIsophote/ADM_vidTisophote.cpp:73
+msgid "KernelDeint"
+msgstr "KernelDeint"
+
+#: plugins/ADM_videoFilters/KernelDeint/ADM_vidKernelDeint.cpp:51
+msgid "Kernel deinterlacer by Donald Graft."
+msgstr "Kernel deinterlacer Donald Graft-t?l."
+
+#: plugins/ADM_videoFilters/KernelDeint/ADM_vidKernelDeint.cpp:70
+#: plugins/ADM_videoFilters/McDeint/ADM_vidMcDeint.cpp:97
+#: plugins/ADM_videoFilters/DgBob/ADM_vidDGbob.cpp:76
+#: plugins/ADM_videoFilters/Telecide/ADM_vidDecTelecide.cpp:83
+msgid "Bottom"
+msgstr "Als?"
+
+#: plugins/ADM_videoFilters/KernelDeint/ADM_vidKernelDeint.cpp:75
+#: plugins/ADM_videoFilters/TIsophote/ADM_vidTisophote.cpp:67
+msgid "Smaller means more deinterlacing"
+msgstr "Deinterlace - kisebb t?bbet jelent"
+
+#: plugins/ADM_videoFilters/KernelDeint/ADM_vidKernelDeint.cpp:76
+msgid "_Sharper engine:"
+msgstr "?_les?t? motor:"
+
+#: plugins/ADM_videoFilters/KernelDeint/ADM_vidKernelDeint.cpp:77
+msgid "T_woway"
+msgstr "_K?tutas"
+
+#: plugins/ADM_videoFilters/KernelDeint/ADM_vidKernelDeint.cpp:77
+msgid "Extrapolate better (better not to use it)"
+msgstr "Jobban Extrapol?lt (jobb, ha nem haszn?lja)"
+
+#: plugins/ADM_videoFilters/KernelDeint/ADM_vidKernelDeint.cpp:78
+msgid "_Map"
+msgstr "_T?rk?p"
+
+#: plugins/ADM_videoFilters/KernelDeint/ADM_vidKernelDeint.cpp:78
+msgid "Show interlaced areas (for test!)"
+msgstr "V?tottsoros ter?let megjelen?t?se (teszt!)"
+
+#: plugins/ADM_videoFilters/ChromaShift/gtk/DIA_chromaShift.cpp:63
+msgid "Chroma Shift"
+msgstr "Chroma eltol?s"
+
+#: plugins/ADM_videoFilters/ChromaShift/gtk/DIA_chromaShift.cpp:180
+msgid "ChromaShift"
+msgstr "Chroma-eltol?s"
+
+#: plugins/ADM_videoFilters/ChromaShift/gtk/DIA_chromaShift.cpp:194
+msgid "U Shift :"
+msgstr "U eltol?s:"
+
+#: plugins/ADM_videoFilters/ChromaShift/gtk/DIA_chromaShift.cpp:201
+msgid "V Shift :"
+msgstr "V eltol?s:"
+
+#: plugins/ADM_videoFilters/ChromaShift/gtk/DIA_chromaShift.cpp:243
+msgid "<b>Preview</b>"
+msgstr "<b>El?n?zet</b>"
+
+#: plugins/ADM_videoFilters/ChromaShift/ADM_vidChromaShift.cpp:36
+msgid "Chroma shift"
+msgstr "Chroma eltol?s"
+
+#: plugins/ADM_videoFilters/ChromaShift/ADM_vidChromaShift.cpp:39
+msgid "Shift chroma U/V to fix badly synced luma/chroma."
+msgstr "Chroma U/V eltol?sa, rosszul szinkroniz?lt luma/chroma jav?t?s?ra"
+
+#: plugins/ADM_videoFilters/MplayerDenoise3D/ADM_vidMPLD3D.cpp:32
+#: plugins/ADM_videoFilters/MplayerDenoise3D/ADM_vidMPLD3D.cpp:66
+msgid "MPlayer hqdn3d"
+msgstr "MPlayer hqdn3d"
+
+#: plugins/ADM_videoFilters/MplayerDenoise3D/ADM_vidMPLD3D.cpp:35
+msgid "High quality version of denoise3d. Slower but more precise."
+msgstr "Denoise3d k?v?l? min?s?g? verzi?ja. Lassabb de pontosabb."
+
+#: plugins/ADM_videoFilters/MplayerDenoise3D/ADM_vidMPLD3D.cpp:60
+#: plugins/ADM_videoFilters/MplayerDenoise3D/ADM_vidMPLD3Dlow.cpp:60
+msgid "_Spatial luma strength:"
+msgstr "_T?rbeli luma er?ss?ge:"
+
+#: plugins/ADM_videoFilters/MplayerDenoise3D/ADM_vidMPLD3D.cpp:61
+#: plugins/ADM_videoFilters/MplayerDenoise3D/ADM_vidMPLD3Dlow.cpp:61
+msgid "S_patial chroma strength:"
+msgstr "T?_rbeli chroma er?ss?ge:"
+
+#: plugins/ADM_videoFilters/MplayerDenoise3D/ADM_vidMPLD3D.cpp:62
+#: plugins/ADM_videoFilters/MplayerDenoise3D/ADM_vidMPLD3Dlow.cpp:62
+msgid "_Temporal strength:"
+msgstr "_?tmenet er?ss?ge"
+
+#: plugins/ADM_videoFilters/MplayerDenoise3D/ADM_vidMPLD3Dlow.cpp:33
+#: plugins/ADM_videoFilters/MplayerDenoise3D/ADM_vidMPLD3Dlow.cpp:66
+msgid "MPlayer denoise3d"
+msgstr "MPlayer denoise3d"
+
+#: plugins/ADM_videoFilters/MplayerDenoise3D/ADM_vidMPLD3Dlow.cpp:36
+msgid "Reduce noise, smooth image, increase compressibility."
+msgstr "Zaj cs?kkent?se, k?p l?gy?t?sa, t?m?r?thet?s?g n?vel?se."
+
+#: plugins/ADM_videoFilters/AddBorders/ADM_vidAddBorder.cpp:32
+msgid "Add black borders"
+msgstr "Fekete szeg?ly hozz?ad?sa"
+
+#: plugins/ADM_videoFilters/AddBorders/ADM_vidAddBorder.cpp:35
+msgid "Add pure black border(s)."
+msgstr "Tiszta fekete szeg?ly(ek) hozz?ad?sa"
+
+#: plugins/ADM_videoFilters/AddBorders/ADM_vidAddBorder.cpp:214
+#: plugins/ADM_videoFilters/BlackenBorders/ADM_vidBlackenBorders.cpp:211
+msgid "_Left border:"
+msgstr "_Szeg?ly-Bal:"
+
+#: plugins/ADM_videoFilters/AddBorders/ADM_vidAddBorder.cpp:215
+#: plugins/ADM_videoFilters/BlackenBorders/ADM_vidBlackenBorders.cpp:212
+msgid "_Right border:"
+msgstr "S_zeg?ly-Jobb:"
+
+#: plugins/ADM_videoFilters/AddBorders/ADM_vidAddBorder.cpp:216
+#: plugins/ADM_videoFilters/BlackenBorders/ADM_vidBlackenBorders.cpp:213
+msgid "_Top border:"
+msgstr "Sz_eg?ly-Fels?:"
+
+#: plugins/ADM_videoFilters/AddBorders/ADM_vidAddBorder.cpp:217
+#: plugins/ADM_videoFilters/BlackenBorders/ADM_vidBlackenBorders.cpp:214
+msgid "_Bottom border:"
+msgstr "Sze_g?ly-Als?:"
+
+#: plugins/ADM_videoFilters/AddBorders/ADM_vidAddBorder.cpp:220
+msgid "Add Borders"
+msgstr "Szeg?lyek hozz?ad?sa"
+
+#: plugins/ADM_videoFilters/AddBorders/ADM_vidAddBorder.cpp:224
+#: plugins/ADM_videoFilters/BlackenBorders/ADM_vidBlackenBorders.cpp:222
+msgid "Incorrect parameters"
+msgstr "Helytelen param?ter"
+
+#: plugins/ADM_videoFilters/AddBorders/ADM_vidAddBorder.cpp:224
+#: plugins/ADM_videoFilters/BlackenBorders/ADM_vidBlackenBorders.cpp:222
+msgid "All parameters must be even and within range."
+msgstr "Minden param?ter hat?k?r?n bel?l kell hogy legyen."
+
+#: plugins/ADM_videoFilters/Chroma/ADM_vidChromaU.cpp:33
+msgid "Keep chroma U only."
+msgstr "Csak a Chroma U megtart?sa"
+
+#: plugins/ADM_videoFilters/Chroma/ADM_vidChromaV.cpp:30
+#: plugins/ADM_videoFilters/colorYUV/gtk/DIA_coloryuv.cpp:204
+msgid "Chroma V"
+msgstr "Chroma V"
+
+#: plugins/ADM_videoFilters/Chroma/ADM_vidChromaV.cpp:33
+msgid "Keep chroma V only."
+msgstr "Csak a Chroma V megtart?sa"
+
+#: plugins/ADM_videoFilters/PalShift/ADM_vidPalShift.cpp:31
+msgid "PAL field shift"
+msgstr "PAL mez?eltol?s"
+
+#: plugins/ADM_videoFilters/PalShift/ADM_vidPalShift.cpp:34
+msgid "Shift fields by one. Useful for some PAL movies."
+msgstr "Mez?k elmozgat?sa eggyel. Hasznos n?h?ny PAL filmn?l."
+
+#: plugins/ADM_videoFilters/PalShift/ADM_vidPalShift.cpp:67
+msgid "_Try reverse"
+msgstr "_Pr?b?lja ki ford?tva"
+
+#: plugins/ADM_videoFilters/PalShift/ADM_vidPalShift.cpp:71
+msgid "Pal Field Shift"
+msgstr "PAL mez?eltol?s"
+
+#: plugins/ADM_videoFilters/PalShift/ADM_vidPalSmart.cpp:41
+msgid "PAL smart"
+msgstr "PAL smart"
+
+#: plugins/ADM_videoFilters/PalShift/ADM_vidPalSmart.cpp:44
+msgid "Smartly revert non constant PAL field shift."
+msgstr "Nem ?lland? PAL mez?k eltol?s?nak 'okos' visszat?r?se"
+
+#: plugins/ADM_videoFilters/Decimate/ADM_vidDecDec.cpp:154
+#: plugins/ADM_videoFilters/Decimate/ADM_vidDecDec.cpp:191
+msgid "Decomb Decimate"
+msgstr "Decomb Decimate"
+
+#: plugins/ADM_videoFilters/Decimate/ADM_vidDecDec.cpp:157
+msgid "Useful to remove dupes left by Telecide."
+msgstr "Telecide visszamaradt duplik?ci?inak elt?vol?t?s?ra haszn?lhat?"
+
+#: plugins/ADM_videoFilters/Decimate/ADM_vidDecDec.cpp:170
+msgid "Discard closer"
+msgstr "K?zelebbi elhagy?sa"
+
+#: plugins/ADM_videoFilters/Decimate/ADM_vidDecDec.cpp:171
+msgid "Replace (interpolate)"
+msgstr "Kicser?l (interpolate)"
+
+#: plugins/ADM_videoFilters/Decimate/ADM_vidDecDec.cpp:172
+msgid "Discard longer dupe (anim?s)"
+msgstr "Discard longer dupe (anim?s)"
+
+#: plugins/ADM_videoFilters/Decimate/ADM_vidDecDec.cpp:173
+msgid "Pulldown dupe removal"
+msgstr "Leg?rd?l? dupe elt?vol?t?sa"
+
+#: plugins/ADM_videoFilters/Decimate/ADM_vidDecDec.cpp:176
+msgid "Fastest (no chroma, partial luma)"
+msgstr "Leggyorsabb (nincs chroma, r?szleges luma)"
+
+#: plugins/ADM_videoFilters/Decimate/ADM_vidDecDec.cpp:177
+msgid "Fast (partial luma and chroma)"
+msgstr "Gyors (r?szleges luma ?s chroma)"
+
+#: plugins/ADM_videoFilters/Decimate/ADM_vidDecDec.cpp:178
+msgid "Medium (full luma, no chroma)"
+msgstr "K?zepes (teljes luma, nincs chroma)"
+
+#: plugins/ADM_videoFilters/Decimate/ADM_vidDecDec.cpp:179
+msgid "Slow (full luma and chroma)"
+msgstr "Lass? (teljes luma ?s chroma)"
+
+#: plugins/ADM_videoFilters/Decimate/ADM_vidDecDec.cpp:183
+#: plugins/ADM_videoFilters/McDeint/ADM_vidMcDeint.cpp:100
+#: plugins/ADM_videoFilters/Yadif/ADM_vidYadif.cpp:146
+#: plugins/ADM_videoFilters/DgBob/ADM_vidDGbob.cpp:85
+#: plugins/ADM_audioEncoders/vorbis/audioencoder_vorbis.cpp:304
+msgid "_Mode:"
+msgstr "_M?d:"
+
+#: plugins/ADM_videoFilters/Decimate/ADM_vidDecDec.cpp:185
+msgid "_Threshold 1:"
+msgstr "_Hat?r?rt?k 1:"
+
+#: plugins/ADM_videoFilters/Decimate/ADM_vidDecDec.cpp:186
+msgid "T_hreshold 2:"
+msgstr "H_at?r?rt?k 2:"
+
+#: plugins/ADM_videoFilters/Decimate/ADM_vidDecDec.cpp:187
+msgid "C_ycle:"
+msgstr "_Ciklus:"
+
+#: plugins/ADM_videoFilters/MSharpen/ADM_vidMSharpen.cpp:81
+#: plugins/ADM_videoFilters/MSharpen/ADM_vidMSharpen.cpp:165
+msgid "MSharpen"
+msgstr "MSharpen"
+
+#: plugins/ADM_videoFilters/MSharpen/ADM_vidMSharpen.cpp:84
+msgid "Sharpen edges without amplifying noise. By Donald Graft."
+msgstr "?lek ?les?t?se, zaj n?vel?se n?k?l. Donald Graft-t?l."
+
+#: plugins/ADM_videoFilters/MSharpen/ADM_vidMSharpen.cpp:156
+msgid "_Mask"
+msgstr "_Maszk"
+
+#: plugins/ADM_videoFilters/MSharpen/ADM_vidMSharpen.cpp:157
+msgid "_High Q"
+msgstr "_High Q"
+
+#: plugins/ADM_videoFilters/TemporalCleaner/ADM_vidVlad.cpp:72
+#: plugins/ADM_videoFilters/TemporalCleaner/ADM_vidVlad.cpp:96
+msgid "Temporal Cleaner"
+msgstr "?tmenet t?rl?"
+
+#: plugins/ADM_videoFilters/TemporalCleaner/ADM_vidVlad.cpp:75
+msgid "Vlad59's Avisynth port of Jim Casaburi's denoiser."
+msgstr "Vlad59's Avisynth port of Jim Casaburi's denoiser."
+
+#: plugins/ADM_videoFilters/TemporalCleaner/ADM_vidVlad.cpp:91
+msgid "_Luma temporal threshold:"
+msgstr "_Luma ?tmenet hat?r?rt?k:"
+
+#: plugins/ADM_videoFilters/TemporalCleaner/ADM_vidVlad.cpp:92
+msgid "Ch_roma temporal threshold:"
+msgstr "_Chroma ?tmenet hat?r?rt?k:"
+
+#: plugins/ADM_videoFilters/ASharp/gtk/DIA_asharp.cpp:65
+msgid "ASHARP"
+msgstr "ASHARP"
+
+#: plugins/ADM_videoFilters/ASharp/gtk/DIA_asharp.cpp:177
+msgid "ASharp by MarcFD"
+msgstr "ASharp by MarcFD"
+
+#: plugins/ADM_videoFilters/ASharp/gtk/DIA_asharp.cpp:190
+msgid "Threshold :"
+msgstr "Hat?r?rt?k:"
+
+#: plugins/ADM_videoFilters/ASharp/gtk/DIA_asharp.cpp:198
+msgid "Strength :"
+msgstr "Er?ss?g:"
+
+#: plugins/ADM_videoFilters/ASharp/gtk/DIA_asharp.cpp:206
+msgid "Block Adaptative :"
+msgstr "Block Adaptative:"
+
+#: plugins/ADM_videoFilters/ASharp/gtk/DIA_asharp.cpp:214
+msgid "Unknown flag :"
+msgstr "Ismeretlen jelz?:"
+
+#: plugins/ADM_videoFilters/ASharp/ADM_vidAsharp.cpp:59
+msgid "asharp"
+msgstr "Asharp"
+
+#: plugins/ADM_videoFilters/ASharp/ADM_vidAsharp.cpp:62
+msgid "Adaptative sharpener by MarcFD."
+msgstr "Adaptative sharpener by MarcFD."
+
+#: plugins/ADM_videoFilters/TIsophote/ADM_vidTisophote.cpp:46
+msgid "TIsophote"
+msgstr "TIsophote"
+
+#: plugins/ADM_videoFilters/TIsophote/ADM_vidTisophote.cpp:49
+msgid "Port of TIsophote by tritical ."
+msgstr "Port of TIsophote by tritical ."
+
+#: plugins/ADM_videoFilters/TIsophote/ADM_vidTisophote.cpp:60
+msgid "Simple"
+msgstr "Egyszer?"
+
+#: plugins/ADM_videoFilters/TIsophote/ADM_vidTisophote.cpp:61
+#: plugins/ADM_videoFilters/McDeint/ADM_vidMcDeint.cpp:92
+msgid "Medium"
+msgstr "K?zepes"
+
+#: plugins/ADM_videoFilters/TIsophote/ADM_vidTisophote.cpp:62
+msgid "Slow"
+msgstr "Lass?"
+
+#: plugins/ADM_videoFilters/TIsophote/ADM_vidTisophote.cpp:67
+msgid "_Iterations:"
+msgstr "_Ism?tl?d?s:"
+
+#: plugins/ADM_videoFilters/TIsophote/ADM_vidTisophote.cpp:68
+msgid "_Chroma:"
+msgstr "_Chroma:"
+
+#: plugins/ADM_videoFilters/TIsophote/ADM_vidTisophote.cpp:68
+msgid "Process chroma."
+msgstr "Chroma feldolgoz?s"
+
+#: plugins/ADM_videoFilters/TIsophote/ADM_vidTisophote.cpp:69
+msgid "_Step:"
+msgstr "_L?p?s"
+
+#: plugins/ADM_videoFilters/TIsophote/ADM_vidTisophote.cpp:69
+msgid "Step."
+msgstr "L?p?s."
+
+#: plugins/ADM_videoFilters/BlackenBorders/ADM_vidBlackenBorders.cpp:58
+msgid "Blacken borders"
+msgstr "Fekete szeg?lyek"
+
+#: plugins/ADM_videoFilters/BlackenBorders/ADM_vidBlackenBorders.cpp:61
+msgid "Fill borders with pure black. Doesn't alter size."
+msgstr "Szeg?lyek megt?lt?se feket?vel. Nem v?ltoztatja a m?retet."
+
+#: plugins/ADM_videoFilters/BlackenBorders/ADM_vidBlackenBorders.cpp:217
+msgid "Blacken Borders"
+msgstr "Fekete szeg?lyek"
+
+#: plugins/ADM_videoFilters/Animated/DIA_animated.cpp:37
+msgid "_Background Image:"
+msgstr "_H?tt?rk?p:"
+
+#: plugins/ADM_videoFilters/Animated/DIA_animated.cpp:37
+msgid "Select background image"
+msgstr "H?tt?rk?p kiv?laszt?sa"
+
+#: plugins/ADM_videoFilters/Animated/DIA_animated.cpp:38
+msgid "_NTSC (default is PAL):"
+msgstr "_NTSC (alap?rtelmez?s PAL):"
+
+#: plugins/ADM_videoFilters/Animated/DIA_animated.cpp:39
+msgid "Vignette _Width:"
+msgstr "C?mke sz?less?ge:"
+
+#: plugins/ADM_videoFilters/Animated/DIA_animated.cpp:40
+msgid "Vignette _Height:"
+msgstr "C?mke magass?ga:"
+
+#: plugins/ADM_videoFilters/Animated/DIA_animated.cpp:43
+msgid "Vignette frame number"
+msgstr "C?mke frame sorsz?ma:"
+
+#: plugins/ADM_videoFilters/Animated/DIA_animated.cpp:47
+msgid "Timecode:"
+msgstr "Id?k?d:"
+
+#: plugins/ADM_videoFilters/Animated/DIA_animated.cpp:54
+#: plugins/ADM_videoFilters/Animated/ADM_vidAnimated.cpp:35
+msgid "Animated Menu"
+msgstr "Anim?lt men?"
+
+#: plugins/ADM_videoFilters/Animated/ADM_vidAnimated.cpp:38
+msgid "Create a video made of 6 mini windows, very useful to do DVD menus."
+msgstr "Vide? k?sz?t?se 6 mini ablakkal, nagyon hasznos DVD men?kn?l."
+
+#: plugins/ADM_videoFilters/colorYUV/gtk/DIA_coloryuv.cpp:138
+msgid "ColorYuv (From avisynth)"
+msgstr "ColorYuv (Avisynth-b?l)"
+
+#: plugins/ADM_videoFilters/colorYUV/gtk/DIA_coloryuv.cpp:176
+msgid "Gamma"
+msgstr "Gamma"
+
+#: plugins/ADM_videoFilters/colorYUV/gtk/DIA_coloryuv.cpp:190
+msgid "Luma Y"
+msgstr "Luma Y"
+
+#: plugins/ADM_videoFilters/colorYUV/gtk/DIA_coloryuv.cpp:307
+msgid "<b>Color Correction Matrix</b>"
+msgstr "<b>Sz?nkorrekci?s M?trix</b>"
+
+#: plugins/ADM_videoFilters/colorYUV/gtk/DIA_coloryuv.cpp:330
+msgid "Matrix"
+msgstr "M?trix"
+
+#: plugins/ADM_videoFilters/colorYUV/gtk/DIA_coloryuv.cpp:337
+msgid "Opt"
+msgstr "Opt"
+
+#: plugins/ADM_videoFilters/colorYUV/gtk/DIA_coloryuv.cpp:344
+msgid "Level"
+msgstr "Szint"
+
+#: plugins/ADM_videoFilters/colorYUV/gtk/DIA_coloryuv.cpp:357
+msgid "Rec.709"
+msgstr "Rec.709"
+
+#: plugins/ADM_videoFilters/colorYUV/gtk/DIA_coloryuv.cpp:365
+msgid "Coring"
+msgstr "Coring"
+
+#: plugins/ADM_videoFilters/colorYUV/gtk/DIA_coloryuv.cpp:373
+msgid "TV->PC"
+msgstr "TV->PC"
+
+#: plugins/ADM_videoFilters/colorYUV/gtk/DIA_coloryuv.cpp:374
+msgid "PC->TV"
+msgstr "PC->TV"
+
+#: plugins/ADM_videoFilters/colorYUV/gtk/DIA_coloryuv.cpp:375
+msgid "PC->TV.Y"
+msgstr "PC->TV.Y"
+
+#: plugins/ADM_videoFilters/colorYUV/gtk/DIA_coloryuv.cpp:381
+msgid ""
+"<b>Matrix Warning :</b>\n"
+"all above values are normalized to 256!"
+msgstr ""
+"<b>M?trix figyelmeztet?s: </b>\n"
+"Az ?sszes fenti ?rt?k normaliz?lt 256-ra!"
+
+#: plugins/ADM_videoFilters/colorYUV/gtk/DIA_coloryuv.cpp:387
+msgid "AutoGain"
+msgstr "AutoGain"
+
+#: plugins/ADM_videoFilters/colorYUV/gtk/DIA_coloryuv.cpp:391
+msgid "Display Stats"
+msgstr "Statisztika megjelen?t?se"
+
+#: plugins/ADM_videoFilters/colorYUV/gtk/DIA_coloryuv.cpp:395
+msgid "AutoWhite"
+msgstr "Auto feh?regyens?ly"
+
+#: plugins/ADM_videoFilters/colorYUV/gtk/DIA_coloryuv.cpp:399
+msgid "<b>frame2</b>"
+msgstr "<b>frame2</b>"
+
+#: plugins/ADM_videoFilters/colorYUV/ADM_vidColorYuv.cpp:69
+msgid "Avisynth ColorYUV"
+msgstr "Avisynth ColorYUV"
+
+#: plugins/ADM_videoFilters/colorYUV/ADM_vidColorYuv.cpp:72
+msgid "Alter colors (auto white balance etc...). Ported from Avisynth."
+msgstr "Sz?nek megv?ltoztat?sa (automatikus feh?regyens?ly, stb...) AviSynth-b?l portolva."
+
+#: plugins/ADM_videoFilters/McDeint/ADM_vidMcDeint.cpp:75
+#: plugins/ADM_videoFilters/McDeint/ADM_vidMcDeint.cpp:106
+msgid "mcDeinterlace"
+msgstr "mcDeinterlace"
+
+#: plugins/ADM_videoFilters/McDeint/ADM_vidMcDeint.cpp:78
+msgid "Motion compensation deinterlacer. Ported from MPlayer."
+msgstr "Motion compensation deinterlacer. MPlayer-b?l portolva."
+
+#: plugins/ADM_videoFilters/McDeint/ADM_vidMcDeint.cpp:91
+msgid "Fast"
+msgstr "Gyors"
+
+#: plugins/ADM_videoFilters/McDeint/ADM_vidMcDeint.cpp:93
+msgid "Slow iterative motion search"
+msgstr "Lass? ism?tl?d? mozg?s keres?se"
+
+#: plugins/ADM_videoFilters/McDeint/ADM_vidMcDeint.cpp:94
+msgid "Extra slow (same as 3+multiple reference frames)"
+msgstr "Nagyon lass? (ugyanaz, mint 3+t?bbsz?r?s referencia frame-ek)"
+
+#: plugins/ADM_videoFilters/McDeint/ADM_vidMcDeint.cpp:101
+msgid "_Field dominance:"
+msgstr "_Mez? dominancia:"
+
+#: plugins/ADM_videoFilters/McDeint/ADM_vidMcDeint.cpp:102
+msgid "_Qp:"
+msgstr "_Qp:"
+
+#: plugins/ADM_videoFilters/VerticalFlip/ADM_vidFlipV.cpp:47
+msgid "Vertical flip"
+msgstr "F?gg?leges t?kr?z?s"
+
+#: plugins/ADM_videoFilters/VerticalFlip/ADM_vidFlipV.cpp:50
+msgid "Vertically flip the picture."
+msgstr "A k?p f?gg?leges t?kr?z?se"
+
+#: plugins/ADM_videoFilters/SwapUV/ADM_vidUVSwap.cpp:28
+msgid "Swap U and V"
+msgstr "U ?s V csere"
+
+#: plugins/ADM_videoFilters/SwapUV/ADM_vidUVSwap.cpp:31
+msgid "Invert chroma U and chroma V."
+msgstr "Chroma U ?s Chroma V invert?l?sa."
+
+#: plugins/ADM_videoFilters/Denoise/ADM_vidDenoise.cpp:43
+msgid "Port of Transcode DNR."
+msgstr "Port of Transcode DNR."
+
+#: plugins/ADM_videoFilters/Denoise/ADM_vidDenoise.cpp:382
+msgid "_Luma lock:"
+msgstr "_Luma z?r:"
+
+#: plugins/ADM_videoFilters/Denoise/ADM_vidDenoise.cpp:383
+msgid "C_hroma lock:"
+msgstr "C_hroma z?r:"
+
+#: plugins/ADM_videoFilters/Denoise/ADM_vidDenoise.cpp:384
+msgid "L_uma threshold:"
+msgstr "L_uma hat?r?rt?k:"
+
+#: plugins/ADM_videoFilters/Denoise/ADM_vidDenoise.cpp:385
+msgid "Ch_roma threshold:"
+msgstr "Ch_roma hat?r?rt?k:"
+
+#: plugins/ADM_videoFilters/Denoise/ADM_vidDenoise.cpp:387
+msgid "_Scene change:"
+msgstr "_Jelenetv?lt?s:"
+
+#: plugins/ADM_videoFilters/Stabilize/ADM_vidStabilize.cpp:31
+#: plugins/ADM_videoFilters/Stabilize/ADM_vidStabilize.cpp:34
+msgid "Light denoiser."
+msgstr "Light denoiser."
+
+#: plugins/ADM_videoFilters/Stabilize/ADM_vidStabilize.cpp:70
+msgid "Stabilize Threshold"
+msgstr "Hat?r?rt?k stabiliz?l?sa"
+
+#: plugins/ADM_videoFilters/Stabilize/ADM_vidStabilize.cpp:73
+msgid "Stabilize"
+msgstr "Stabiliz?l?s"
+
+#: plugins/ADM_videoFilters/KeepField/ADM_vidHzStackField.cpp:33
+msgid "separatefields"
+msgstr "K?l?n?ll? mez?k"
+
+#: plugins/ADM_videoFilters/KeepField/ADM_vidHzStackField.cpp:36
+msgid "Put botj fields side by side."
+msgstr "Botj mez?ket egym?s mell? tenni"
+
+#: plugins/ADM_videoFilters/KeepField/ADM_vidUnstackField.cpp:34
+msgid "Unstack fields"
+msgstr "Unstack mez?k"
+
+#: plugins/ADM_videoFilters/KeepField/ADM_vidUnstackField.cpp:37
+msgid "Interleave top and bottom part of the picture."
+msgstr "K?p als? ?s fels? r?sz?t ?szef?s?lni"
+
+#: plugins/ADM_videoFilters/KeepField/ADM_vidMergeField.cpp:36
+msgid "Merge fields"
+msgstr "Mez?k egyes?t?se"
+
+#: plugins/ADM_videoFilters/KeepField/ADM_vidMergeField.cpp:39
+msgid "Merge two pictures as if they were two fields."
+msgstr "K?t k?p egyes?t?se, mintha k?t mez? voln?nak"
+
+#: plugins/ADM_videoFilters/KeepField/ADM_vidSeparateField.cpp:34
+#: plugins/ADM_videoFilters/Fade/ADM_vidFade.cpp:41
+#: plugins/ADM_videoFilters/Fade/ADM_vidFade.cpp:64
+msgid "Fade"
+msgstr "?tt?n?s"
+
+#: plugins/ADM_videoFilters/KeepField/ADM_vidSeparateField.cpp:37
+msgid "Each field becomes full picture, half sized."
+msgstr "Mindegyik fele m?ret? mez? teljes k?p lesz."
+
+#: plugins/ADM_videoFilters/KeepField/ADM_vidStackField.cpp:35
+msgid "Stack fields"
+msgstr "Stack fields"
+
+#: plugins/ADM_videoFilters/KeepField/ADM_vidStackField.cpp:38
+msgid "Put two fields on top of one another."
+msgstr "K?t mez? helyez?se egy m?sik tetej?re."
+
+#: plugins/ADM_videoFilters/MplayerResize/ADM_vidMPLResize.cpp:84
+msgid "MPlayer resize"
+msgstr "MPlayer resize"
+
+#: plugins/ADM_videoFilters/MplayerResize/ADM_vidMPLResize.cpp:87
+msgid "Change image size. Faster than Avisynth's Resize."
+msgstr "K?p ?tm?retez?se. Gyorsabb mint az Avisynt ?tm?retez?"
+
+#: plugins/ADM_videoFilters/DropOut/ADM_vidDropOut.cpp:29
+msgid "Drop"
+msgstr "Eldob"
+
+#: plugins/ADM_videoFilters/DropOut/ADM_vidDropOut.cpp:32
+msgid "Drop damaged fields (e.g. from VHS capture)."
+msgstr "K?rosodott mez?k eldob?sa (pl. a VHS-r?gz?t?s)."
+
+#: plugins/ADM_videoFilters/DropOut/ADM_vidDropOut.cpp:51
+msgid "DropOut Threshold"
+msgstr "Eldob?si hat?r?rt?k"
+
+#: plugins/ADM_videoFilters/DropOut/ADM_vidDropOut.cpp:54
+msgid "Drop Out"
+msgstr "Eldob?s"
+
+#: plugins/ADM_videoFilters/Yadif/ADM_vidYadif.cpp:76
+#: plugins/ADM_videoFilters/Yadif/ADM_vidYadif.cpp:151
+msgid "yadif"
+msgstr "yadif"
+
+#: plugins/ADM_videoFilters/Yadif/ADM_vidYadif.cpp:79
+msgid "Yet Another DeInterlacer. Ported from MPlayer."
+msgstr "Yet Another DeInterlacer. Ported from MPlayer."
+
+#: plugins/ADM_videoFilters/Yadif/ADM_vidYadif.cpp:136
+msgid "Temporal & spatial check"
+msgstr "Id?beli & t?rbeli ellen?rz?s"
+
+#: plugins/ADM_videoFilters/Yadif/ADM_vidYadif.cpp:137
+msgid "Bob, temporal & spatial check"
+msgstr "Bob, id?beli & t?rbeli ellen?rz?s"
+
+#: plugins/ADM_videoFilters/Yadif/ADM_vidYadif.cpp:138
+msgid "Skip spatial temporal check"
+msgstr "Id?beli & t?rbeli ellen?rz?s ?tl?p?se"
+
+#: plugins/ADM_videoFilters/Yadif/ADM_vidYadif.cpp:139
+msgid "Bob, skip spatial temporal check"
+msgstr "Bob, id?beli & t?rbeli ellen?rz?s ?tl?p?se"
+
+#: plugins/ADM_videoFilters/Yadif/ADM_vidYadif.cpp:147
+msgid "_Order:"
+msgstr "S_orrend:"
+
+#: plugins/ADM_videoFilters/Rotate/ADM_vidRotate.cpp:53
+#: plugins/ADM_videoFilters/Rotate/ADM_vidRotate.cpp:266
+msgid "Rotate"
+msgstr "Elforgat?s"
+
+#: plugins/ADM_videoFilters/Rotate/ADM_vidRotate.cpp:56
+msgid "Rotate the picture by 90, 180 or 270 degrees."
+msgstr "K?p elforgat?sa 90, 180 vagy 270 fokkal"
+
+#: plugins/ADM_videoFilters/Rotate/ADM_vidRotate.cpp:260
+msgid "90 degrees"
+msgstr "90 fok"
+
+#: plugins/ADM_videoFilters/Rotate/ADM_vidRotate.cpp:260
+msgid "90?"
+msgstr "90?"
+
+#: plugins/ADM_videoFilters/Rotate/ADM_vidRotate.cpp:261
+msgid "180 degrees"
+msgstr "180 fok"
+
+#: plugins/ADM_videoFilters/Rotate/ADM_vidRotate.cpp:261
+msgid "180?"
+msgstr "180?"
+
+#: plugins/ADM_videoFilters/Rotate/ADM_vidRotate.cpp:262
+msgid "270 degrees"
+msgstr "270 fok"
+
+#: plugins/ADM_videoFilters/Rotate/ADM_vidRotate.cpp:262
+msgid "270?"
+msgstr "270?"
+
+#: plugins/ADM_videoFilters/Rotate/ADM_vidRotate.cpp:264
+msgid "_Angle:"
+msgstr "_Sz?g"
+
+#: plugins/ADM_videoFilters/Soften/ADM_vidSoften.cpp:55
+#: plugins/ADM_videoFilters/Soften/ADM_vidSoften.cpp:75
+msgid "Soften"
+msgstr "L?gy?t?s"
+
+#: plugins/ADM_videoFilters/Soften/ADM_vidSoften.cpp:58
+msgid "A variant of stabilize."
+msgstr "A stabiliz?l?s egy v?ltozata"
+
+#: plugins/ADM_videoFilters/Soften/ADM_vidSoften.cpp:69
+msgid "_Luma threshold:"
+msgstr "_Luma hat?r?rt?k:"
+
+#: plugins/ADM_videoFilters/Soften/ADM_vidSoften.cpp:70
+msgid "C_hroma threshold:"
+msgstr "C_hroma hat?r?rt?k:"
+
+#: plugins/ADM_videoFilters/Soften/ADM_vidSoften.cpp:71
+msgid "_Radius:"
+msgstr "_R?diusz:"
+
+#: plugins/ADM_videoFilters/Fade/ADM_vidFade.cpp:44
+msgid "Fade in/out."
+msgstr "?tt?n?s, els?t?t?t?s/kivil?gos?t?s"
+
+#: plugins/ADM_videoFilters/Fade/ADM_vidFade.cpp:51
+msgid "Out"
+msgstr "Els?t?t?t?s"
+
+#: plugins/ADM_videoFilters/Fade/ADM_vidFade.cpp:51
+msgid "Fade out"
+msgstr "Els?t?t?t?s"
+
+#: plugins/ADM_videoFilters/Fade/ADM_vidFade.cpp:51
+msgid "In"
+msgstr "Kivil?gos?t?s"
+
+#: plugins/ADM_videoFilters/Fade/ADM_vidFade.cpp:51
+msgid "Fade in"
+msgstr "Kivil?gos?t?s"
+
+#: plugins/ADM_videoFilters/Fade/ADM_vidFade.cpp:57
+msgid "_Fade type:"
+msgstr "?_tt?n?s t?pusa:"
+
+#: plugins/ADM_videoFilters/Fade/ADM_vidFade.cpp:58
+msgid "_Start frame:"
+msgstr "_Kezd? frame:"
+
+#: plugins/ADM_videoFilters/Fade/ADM_vidFade.cpp:59
+msgid "_End frame:"
+msgstr "_Befejel? frame:"
+
+#: plugins/ADM_videoFilters/Fade/ADM_vidFade.cpp:60
+msgid "Fade to _black"
+msgstr "Els?t?t?t?s feket?re"
+
+#: plugins/ADM_videoFilters/Fade/ADM_vidFade.cpp:69
+msgid "Parameter Error"
+msgstr "Param?ter hiba"
+
+#: plugins/ADM_videoFilters/Fade/ADM_vidFade.cpp:69
+msgid "Start must be before end, and both within video # of frames."
+msgstr "A kezd?snek a v?g el?tt kell lennie, ?s mindkett?nek vide?n bel?l # frame-ek."
+
+#: plugins/ADM_videoFilters/LumaOnly/ADM_vidLuma.cpp:28
+msgid "Luma only"
+msgstr "Csak Luma"
+
+#: plugins/ADM_videoFilters/LumaOnly/ADM_vidLuma.cpp:31
+msgid "Convert picture to greyscale (black and white)."
+msgstr "K?p sz?rke?rnyalatoss? alak?t?sa (fekete-feh?r)"
+
+#: plugins/ADM_videoFilters/Logo/ADM_vidLogo.cpp:64
+#: plugins/ADM_videoFilters/Logo/ADM_vidLogo.cpp:86
+msgid "Logo"
+msgstr "Log?"
+
+#: plugins/ADM_videoFilters/Logo/ADM_vidLogo.cpp:67
+msgid "Add a png as logo."
+msgstr "Png hozz?ad?sa mint log?."
+
+#: plugins/ADM_videoFilters/Logo/ADM_vidLogo.cpp:79
+msgid "_Logo (jpg file):"
+msgstr "_Log? (jpg f?jl):"
+
+#: plugins/ADM_videoFilters/Logo/ADM_vidLogo.cpp:79
+msgid "Select JPEG file"
+msgstr "JPEG f?jl kiv?laszt?sa:"
+
+#: plugins/ADM_videoFilters/Logo/ADM_vidLogo.cpp:80
+msgid "_X Position:"
+msgstr "_X Poz?ci?:"
+
+#: plugins/ADM_videoFilters/Logo/ADM_vidLogo.cpp:81
+msgid "_Y Position:"
+msgstr "_Y Poz?ci?:"
+
+#: plugins/ADM_videoFilters/Logo/ADM_vidLogo.cpp:82
+msgid "_Alpha:"
+msgstr "_Alfa:"
+
+#: plugins/ADM_videoFilters/Equalizer/gtk/DIA_equalizer.cpp:436
+msgid "Equalizer"
+msgstr "Equalizer"
+
+#: plugins/ADM_videoFilters/Equalizer/ADM_vidEqualizer.cpp:23
+msgid "Luma equalizer"
+msgstr "Luma equalizer"
+
+#: plugins/ADM_videoFilters/Equalizer/ADM_vidEqualizer.cpp:26
+msgid "Luma correction filter with histogram."
+msgstr "Luma korrekci?s sz?r? hisztogrammal."
+
+#: plugins/ADM_videoFilters/CNR2/gtk/DIA_cnr2.cpp:122
+msgid "Chroma Noise Reduction 2"
+msgstr "Chroma zajcs?kkent?s 2"
+
+#: plugins/ADM_videoFilters/CNR2/gtk/DIA_cnr2.cpp:147
+msgid "<b>Scene change Treshold</b>"
+msgstr "<b>Jelenet v?lt?si hat?r?rt?k</b>"
+
+#: plugins/ADM_videoFilters/CNR2/gtk/DIA_cnr2.cpp:166
+msgid "Sensibility"
+msgstr "?rz?kenys?g"
+
+#: plugins/ADM_videoFilters/CNR2/gtk/DIA_cnr2.cpp:174
+msgid "Max"
+msgstr "Max"
+
+#: plugins/ADM_videoFilters/CNR2/gtk/DIA_cnr2.cpp:189
+msgid "Luma :"
+msgstr "Luma :"
+
+#: plugins/ADM_videoFilters/CNR2/gtk/DIA_cnr2.cpp:196
+msgid "Chroma U :"
+msgstr "Chroma U :"
+
+#: plugins/ADM_videoFilters/CNR2/gtk/DIA_cnr2.cpp:203
+msgid "Chroma V :"
+msgstr "Chroma V :"
+
+#: plugins/ADM_videoFilters/CNR2/gtk/DIA_cnr2.cpp:246
+msgid "Narrow"
+msgstr "Pontos"
+
+#: plugins/ADM_videoFilters/CNR2/gtk/DIA_cnr2.cpp:271
+msgid "<b>Settings</b>"
+msgstr "<b>Be?ll?t?sok</b>"
+
+#: plugins/ADM_videoFilters/CNR2/gtk/DIA_cnr2.cpp:290
+msgid "Use also chroma to detect scene change"
+msgstr "Chroma haszn?lata a jelenetv?lt?s ?rz?kel?s?re"
+
+#: plugins/ADM_videoFilters/CNR2/gtk/DIA_cnr2.cpp:294
+msgid "<b>Mode</b>"
+msgstr "<b>M?d</b>"
+
+#: plugins/ADM_videoFilters/CNR2/ADM_vidCNR2.cpp:82
+msgid "Cnr2"
+msgstr "Cnr2"
+
+#: plugins/ADM_videoFilters/CNR2/ADM_vidCNR2.cpp:85
+msgid "Chroma noise reduction filter by MarcFD/Tritical.."
+msgstr "Chroma zajcs?kkent? sz?r? MarcFD/Tritical-t?l..."
+
+#: plugins/ADM_videoFilters/Pulldown/ADM_vidPulldown.cpp:38
+msgid "Pulldown"
+msgstr "Leny?l?"
+
+#: plugins/ADM_videoFilters/Pulldown/ADM_vidPulldown.cpp:41
+msgid "Convert 24 fps to 30 fps by repeating fields."
+msgstr "24 fps-r?l 30 fps-re konvert?l?s a mez?k ism?tl?s?vel"
+
+#: plugins/ADM_videoFilters/MPDelogo/gtk/DIA_mpdelogo.cpp:203
+msgid "Mplayer Delogo"
+msgstr "Mplayer log? elt?vol?t?"
+
+#: plugins/ADM_videoFilters/MPDelogo/gtk/DIA_mpdelogo.cpp:221
+msgid "X"
+msgstr "X"
+
+#: plugins/ADM_videoFilters/MPDelogo/gtk/DIA_mpdelogo.cpp:228
+msgid "Y"
+msgstr "Y"
+
+#: plugins/ADM_videoFilters/MPDelogo/gtk/DIA_mpdelogo.cpp:235
+msgid "W"
+msgstr "W"
+
+#: plugins/ADM_videoFilters/MPDelogo/gtk/DIA_mpdelogo.cpp:242
+msgid "H"
+msgstr "H"
+
+#: plugins/ADM_videoFilters/MPDelogo/gtk/DIA_mpdelogo.cpp:249
+msgid "Band"
+msgstr "Band"
+
+#: plugins/ADM_videoFilters/MPDelogo/ADM_vidMPdelogo.cpp:43
+msgid "MPlayer delogo"
+msgstr "Mplayer log? elt?vol?t?"
+
+#: plugins/ADM_videoFilters/MPDelogo/ADM_vidMPdelogo.cpp:46
+msgid "Blend a logo by interpolating its surrounding box."
+msgstr "Elt?ntet egy log?t ?gy, hogy interpol?lja a kijel?l?s k?rnyezet?t."
+
+#: plugins/ADM_videoFilters/LargeMedian/ADM_vidLargeMedian.cpp:36
+msgid "Median kernel 5x5. Good for reducing chroma noise."
+msgstr "Median kernel 5x5. Chroma zaj cs?kkent?s?re haszn?lhat?."
+
+#: plugins/ADM_videoFilters/LargeMedian/ADM_vidLargeMedian.cpp:298
+msgid "Large Median 5x5"
+msgstr "Nagy Median 5x5"
+
+#: plugins/ADM_videoFilters/FluxSmooth/ADM_vidFlux.cpp:56
+#: plugins/ADM_videoFilters/FluxSmooth/ADM_vidFlux.cpp:127
+msgid "FluxSmooth"
+msgstr "FluxSmooth"
+
+#: plugins/ADM_videoFilters/FluxSmooth/ADM_vidFlux.cpp:59
+msgid "Spatio-temporal cleaner by Ross Thomas."
+msgstr "Id?beli & t?rbeli tiszt?t? Ross Thomas-t?l."
+
+#: plugins/ADM_videoFilters/FluxSmooth/ADM_vidFlux.cpp:122
+msgid "_Temporal threshold:"
+msgstr "_T?rbeli hat?r?rt?k:"
+
+#: plugins/ADM_videoFilters/FluxSmooth/ADM_vidFlux.cpp:123
+msgid "_Spatial threshold:"
+msgstr "_Id?beli hat?r?rt?k:"
+
+#: plugins/ADM_videoFilters/Srt/gtk/DIA_srt.cpp:65
+#: plugins/ADM_videoFilters/Srt/gtk/DIA_srt.cpp:196
+msgid "Subtitle Size and Position"
+msgstr "Felirat m?rete ?s poz?ci?ja"
+
+#: plugins/ADM_videoFilters/Srt/gtk/DIA_srt.cpp:210
+msgid "Font Size:"
+msgstr "Font m?ret:"
+
+#: plugins/ADM_videoFilters/Srt/DIA_srt.cpp:37
+msgid "Arabic"
+msgstr "Arab"
+
+#: plugins/ADM_videoFilters/Srt/DIA_srt.cpp:38
+msgid "Baltic"
+msgstr "Balti"
+
+#: plugins/ADM_videoFilters/Srt/DIA_srt.cpp:39
+msgid "Chinese Simplified (GB2312)"
+msgstr "K?nai egyszer?s?tett (GB2312)"
+
+#: plugins/ADM_videoFilters/Srt/DIA_srt.cpp:40
+msgid "Chinese Traditional (Big5)"
+msgstr "K?nai trad?cion?lis (Big5)"
+
+#: plugins/ADM_videoFilters/Srt/DIA_srt.cpp:41
+msgid "Cyrillic"
+msgstr "Cirill"
+
+#: plugins/ADM_videoFilters/Srt/DIA_srt.cpp:42
+msgid "Latin-1 (Western European)"
+msgstr "Latin-1 (Nyugat-Eur?pai)"
+
+#: plugins/ADM_videoFilters/Srt/DIA_srt.cpp:43
+msgid "Latin-2 (Central European)"
+msgstr "Latin-2 (Kelet-Eur?pai)"
+
+#: plugins/ADM_videoFilters/Srt/DIA_srt.cpp:44
+msgid "Greek"
+msgstr "G?r?g"
+
+#: plugins/ADM_videoFilters/Srt/DIA_srt.cpp:45
+msgid "Hebrew"
+msgstr "H?ber"
+
+#: plugins/ADM_videoFilters/Srt/DIA_srt.cpp:46
+msgid "Slovene"
+msgstr "Szlov?n"
+
+#: plugins/ADM_videoFilters/Srt/DIA_srt.cpp:47
+msgid "Turkish"
+msgstr "T?r?k"
+
+#: plugins/ADM_videoFilters/Srt/DIA_srt.cpp:48
+msgid "UTF-8"
+msgstr "UTF-8"
+
+#: plugins/ADM_videoFilters/Srt/DIA_srt.cpp:49
+msgid "UTF-16"
+msgstr "UTF-16"
+
+#: plugins/ADM_videoFilters/Srt/DIA_srt.cpp:84
+msgid "_Subtitle file:"
+msgstr "F_elirat f?jl:"
+
+#: plugins/ADM_videoFilters/Srt/DIA_srt.cpp:85
+msgid "_Font (TTF):"
+msgstr "_Font (TTF):"
+
+#: plugins/ADM_videoFilters/Srt/DIA_srt.cpp:85
+msgid "Select TTF file"
+msgstr "TTF f?jl kiv?laszt?sa"
+
+#: plugins/ADM_videoFilters/Srt/DIA_srt.cpp:100
+msgid "_Encoding:"
+msgstr "_K?dol?s:"
+
+#: plugins/ADM_videoFilters/Srt/DIA_srt.cpp:102
+msgid "S_elect C_olor"
+msgstr "S_z?n kiv?laszt?sa"
+
+#: plugins/ADM_videoFilters/Srt/DIA_srt.cpp:103
+msgid "Set Size and _Position"
+msgstr "M?ret ?s poz?ci? be?ll?t?sa"
+
+#: plugins/ADM_videoFilters/Srt/DIA_srt.cpp:104
+msgid "_Auto split"
+msgstr "_Aut? feloszt?s:"
+
+#: plugins/ADM_videoFilters/Srt/DIA_srt.cpp:105
+msgid "_Delay (ms):"
+msgstr "_K?sleltet?s (ms):"
+
+#: plugins/ADM_videoFilters/Srt/DIA_srt.cpp:108
+#: plugins/ADM_videoFilters/Srt/ADM_vidSRT.cpp:37
+msgid "Subtitler"
+msgstr "Feliratoz?"
+
+#: plugins/ADM_videoFilters/Srt/ADM_vidSRT.cpp:40
+msgid "Add srt/sub subtitles to the picture."
+msgstr "Srt/Sub felirat hozz?ad?sa a k?phez."
+
+#: plugins/ADM_videoFilters/Srt/ADM_vidSRT.cpp:191
+msgid "Could not open subtitle file"
+msgstr "A feliratf?jlt nem lehet megynitni"
+
+#: plugins/ADM_videoFilters/Srt/ADM_vidSRT.cpp:211
+msgid "Cannot identify subtitle format"
+msgstr "A felirat form?tuma nem azonos?that?"
+
+#: plugins/ADM_videoFilters/Mosaic/ADM_vidMosaic.cpp:64
+msgid "mosaic"
+msgstr "mozaik"
+
+#: plugins/ADM_videoFilters/Mosaic/ADM_vidMosaic.cpp:67
+msgid "Split the picture into tiny thumbnails."
+msgstr "K?p sz?tbont?sa kis k?pekre"
+
+#: plugins/ADM_videoFilters/Mosaic/ADM_vidMosaic.cpp:76
+msgid "_Horizontal stacking:"
+msgstr "_V?zszintes csoportos?t?s:"
+
+#: plugins/ADM_videoFilters/Mosaic/ADM_vidMosaic.cpp:77
+msgid "_Vertical stacking:"
+msgstr "_F?gg?leges csoportos?t?s:"
+
+#: plugins/ADM_videoFilters/Mosaic/ADM_vidMosaic.cpp:78
+msgid "_Shrink factor:"
+msgstr "_Shrink faktor:"
+
+#: plugins/ADM_videoFilters/Mosaic/ADM_vidMosaic.cpp:79
+msgid "Show _frame"
+msgstr "_Frame megjelen?t?se:"
+
+#: plugins/ADM_videoFilters/Mosaic/ADM_vidMosaic.cpp:84
+msgid "Mosaic"
+msgstr "Mozaik"
+
+#: plugins/ADM_videoFilters/Reverse/ADM_vidReverse.cpp:33
+msgid "Reverse"
+msgstr "Ford?tva"
+
+#: plugins/ADM_videoFilters/Reverse/ADM_vidReverse.cpp:36
+msgid "Play video backward."
+msgstr "Video lej?tsz?sa visszafel?."
+
+#: plugins/ADM_videoFilters/DgBob/ADM_vidDGbob.cpp:63
+msgid "DG Bob"
+msgstr "DG Bob"
+
+#: plugins/ADM_videoFilters/DgBob/ADM_vidDGbob.cpp:66
+msgid "Donald Graft Bob."
+msgstr "Donald Graft Bob."
+
+#: plugins/ADM_videoFilters/DgBob/ADM_vidDGbob.cpp:79
+msgid "Keep nb of frames and fps"
+msgstr "Frame sz?m ?s fps fenntart?sa"
+
+#: plugins/ADM_videoFilters/DgBob/ADM_vidDGbob.cpp:80
+msgid "Double nb of frames and fps"
+msgstr "Frame sz?m ?s fps k?tszerez?se"
+
+#: plugins/ADM_videoFilters/DgBob/ADM_vidDGbob.cpp:81
+msgid "Double nb of frames (slow motion)"
+msgstr "Frame sz?m k?tszerez?se (slow motion)"
+
+#: plugins/ADM_videoFilters/DgBob/ADM_vidDGbob.cpp:87
+msgid "_Extra"
+msgstr "_Extra"
+
+#: plugins/ADM_videoFilters/DgBob/ADM_vidDGbob.cpp:87
+msgid "Extra check, avoid using it"
+msgstr "Extra ellen?rz?s (ne haszn?lja)"
+
+#: plugins/ADM_videoFilters/DgBob/ADM_vidDGbob.cpp:90
+msgid "DGBob"
+msgstr "DGBob"
+
+#: plugins/ADM_videoFilters/SwapField/ADM_vidSwapFields.cpp:33
+msgid "Swap fields"
+msgstr "Mez?k felcser?l?se"
+
+#: plugins/ADM_videoFilters/SwapField/ADM_vidSwapFields.cpp:36
+msgid "Swap top and bottom fields."
+msgstr "Fels? ?s als? mez?k felcser?l?se"
+
+#: plugins/ADM_videoFilters/SwapField/ADM_vidSwapSmart.cpp:36
+msgid "Smart swap fields"
+msgstr "'Okos' mez?felcser?l?s"
+
+#: plugins/ADM_videoFilters/SwapField/ADM_vidSwapSmart.cpp:39
+msgid "Smartly swap fields. Needed when field order changes."
+msgstr "Intelligens mez? felcser?l?s. Sz?ks?ges, amikor a mez?k sorrendje megv?ltozik."
+
+#: plugins/ADM_videoFilters/SwapField/ADM_vidKeepOddFields.cpp:37
+msgid "Keep odd fields"
+msgstr "P?ratlan mez?k megtart?sa"
+
+#: plugins/ADM_videoFilters/SwapField/ADM_vidKeepOddFields.cpp:40
+msgid "Keep bottom fields. Gives a half height picture.."
+msgstr "Az als? mez?k megtart?sa. F?l magass?g? k?pet ad."
+
+#: plugins/ADM_videoFilters/SwapField/ADM_vidKeepEvenFields.cpp:36
+msgid "Keep even fields"
+msgstr "Mez?k megtart?sa"
+
+#: plugins/ADM_videoFilters/SwapField/ADM_vidKeepEvenFields.cpp:39
+msgid "Keep top fields. Gives a half height picture.."
+msgstr "A fels? mez?k megtart?sa. F?l magass?g? k?pet ad."
+
+#: plugins/ADM_videoFilters/Telecide/ADM_vidDecTelecide.cpp:53
+#: plugins/ADM_videoFilters/Telecide/ADM_vidDecTelecide.cpp:123
+msgid "Decomb Telecide"
+msgstr "Decomb Telecide"
+
+#: plugins/ADM_videoFilters/Telecide/ADM_vidDecTelecide.cpp:56
+msgid "Great deinterlacing package including IVTC."
+msgstr "Nagyszer? deinterlace csomag, IVTC-vel"
+
+#: plugins/ADM_videoFilters/Telecide/ADM_vidDecTelecide.cpp:75
+msgid "No strategy"
+msgstr "Nincs strat?gia"
+
+#: plugins/ADM_videoFilters/Telecide/ADM_vidDecTelecide.cpp:76
+msgid "3:2 pulldown"
+msgstr "3:2 pulldown"
+
+#: plugins/ADM_videoFilters/Telecide/ADM_vidDecTelecide.cpp:77
+msgid "PAL/SECAM"
+msgstr "PAL/SECAM"
+
+#: plugins/ADM_videoFilters/Telecide/ADM_vidDecTelecide.cpp:87
+msgid "Never"
+msgstr "Soha"
+
+#: plugins/ADM_videoFilters/Telecide/ADM_vidDecTelecide.cpp:88
+msgid "If still combed"
+msgstr "Ha m?g ?sszef?s?lt"
+
+#: plugins/ADM_videoFilters/Telecide/ADM_vidDecTelecide.cpp:89
+msgid "Always"
+msgstr "Mindig"
+
+#: plugins/ADM_videoFilters/Telecide/ADM_vidDecTelecide.cpp:94
+msgid "None but compute"
+msgstr "Nincs, de sz?m?tsa"
+
+#: plugins/ADM_videoFilters/Telecide/ADM_vidDecTelecide.cpp:95
+msgid "Postproc on best match"
+msgstr "Ut?munk?latok a legjobb egyez?s?g?rt"
+
+#: plugins/ADM_videoFilters/Telecide/ADM_vidDecTelecide.cpp:96
+msgid "Postproc and show zones (debug)"
+msgstr "Ut?munk?latok ?s z?n?k megjelen?t?se (hibakeres?s)."
+
+#: plugins/ADM_videoFilters/Telecide/ADM_vidDecTelecide.cpp:97
+msgid "Process image (not fields)"
+msgstr "K?pfeldolgoz?s (nem mez?k)"
+
+#: plugins/ADM_videoFilters/Telecide/ADM_vidDecTelecide.cpp:98
+msgid "Process image (not fields), debug"
+msgstr "K?pfeldolgoz?s (nem mez?k), hibakeres?s"
+
+#: plugins/ADM_videoFilters/Telecide/ADM_vidDecTelecide.cpp:102
+msgid "_Strategy:"
+msgstr "_Strat?gia:"
+
+#: plugins/ADM_videoFilters/Telecide/ADM_vidDecTelecide.cpp:104
+msgid "_Postprocessing:"
+msgstr "_Ut?munk?latok:"
+
+#: plugins/ADM_videoFilters/Telecide/ADM_vidDecTelecide.cpp:105
+msgid "_Try backward:"
+msgstr "_Pr?b?lja visszafel?"
+
+#: plugins/ADM_videoFilters/Telecide/ADM_vidDecTelecide.cpp:107
+msgid "_Direct threshold:"
+msgstr "_K?zvetlen hat?r?rt?k:"
+
+#: plugins/ADM_videoFilters/Telecide/ADM_vidDecTelecide.cpp:108
+msgid "_Backward threshold:"
+msgstr "_Visszafel? hat?r?rt?ke:"
+
+#: plugins/ADM_videoFilters/Telecide/ADM_vidDecTelecide.cpp:109
+msgid "_Noise threshold:"
+msgstr "_Zaj hat?r?rt?k:"
+
+#: plugins/ADM_videoFilters/Telecide/ADM_vidDecTelecide.cpp:110
+msgid "Postp_rocessing threshold:"
+msgstr "_Ut?munk?latok hat?r?rt?ke:"
+
+#: plugins/ADM_videoFilters/Telecide/ADM_vidDecTelecide.cpp:112
+msgid "_Use chroma to decide"
+msgstr "C_hroma haszn?lata a d?nt?shez"
+
+#: plugins/ADM_videoFilters/Telecide/ADM_vidDecTelecide.cpp:113
+msgid "Sho_w info"
+msgstr "Inf? megjelen?t?se"
+
+#: plugins/ADM_videoFilters/Telecide/ADM_vidDecTelecide.cpp:114
+msgid "Debu_g"
+msgstr "Hi_bakeres?s"
+
+#: plugins/ADM_videoFilters/Telecide/ADM_vidDecTelecide.cpp:115
+msgid "Bl_end"
+msgstr "Kever?s"
+
+#: plugins/ADM_audioEncoders/lavcodec/audioencoder_lavcodec.cpp:226
+#: plugins/ADM_audioEncoders/vorbis/audioencoder_vorbis.cpp:318
+#: plugins/ADM_audioEncoders/twolame/audioencoder_twolame.cpp:226
+#: plugins/ADM_audioEncoders/faac/audioencoder_faac.cpp:268
+#: plugins/ADM_audioEncoders/aften/audioencoder_aften.cpp:218
+#: plugins/ADM_audioEncoders/lame/audioencoder_lame.cpp:315
+msgid "_Bitrate:"
+msgstr "_Bitr?ta:"
+
+#: plugins/ADM_audioEncoders/lavcodec/audioencoder_lavcodec.cpp:232
+#: plugins/ADM_audioEncoders/faac/audioencoder_faac.cpp:274
+#: plugins/ADM_audioEncoders/aften/audioencoder_aften.cpp:224
+msgid "Aften Configuration"
+msgstr "Aften be?ll?t?s"
+
+#: plugins/ADM_audioEncoders/vorbis/audioencoder_vorbis.cpp:301
+msgid "VBR"
+msgstr "VBR"
+
+#: plugins/ADM_audioEncoders/vorbis/audioencoder_vorbis.cpp:302
+msgid "Quality based"
+msgstr "Min?s?gre alapul?"
+
+#: plugins/ADM_audioEncoders/vorbis/audioencoder_vorbis.cpp:327
+msgid "Vorbis Configuration"
+msgstr "Vorbis be?ll?t?s"
+
+#: plugins/ADM_audioEncoders/twolame/audioencoder_twolame.cpp:211
+#: plugins/ADM_audioEncoders/lame/audioencoder_lame.cpp:285
+msgid "Joint stereo"
+msgstr "Egyes?tett sztere?"
+
+#: plugins/ADM_audioEncoders/twolame/audioencoder_twolame.cpp:228
+#: plugins/ADM_audioEncoders/lame/audioencoder_lame.cpp:289
+msgid "C_hannel mode:"
+msgstr "Csatorna m?d:"
+
+#: plugins/ADM_audioEncoders/twolame/audioencoder_twolame.cpp:232
+msgid "TwoLame Configuration"
+msgstr "TwoLame be?ll?t?s"
+
+#: plugins/ADM_audioEncoders/lame/audioencoder_lame.cpp:293
+msgid "CBR"
+msgstr "CBR"
+
+#: plugins/ADM_audioEncoders/lame/audioencoder_lame.cpp:294
+msgid "ABR"
+msgstr "ABR"
+
+#: plugins/ADM_audioEncoders/lame/audioencoder_lame.cpp:296
+msgid "Extreme"
+msgstr "Extr?m"
+
+#: plugins/ADM_audioEncoders/lame/audioencoder_lame.cpp:299
+msgid "Bit_rate mode:"
+msgstr "Bitr?ta m?d:"
+
+#: plugins/ADM_audioEncoders/lame/audioencoder_lame.cpp:319
+msgid "_Disable reservoir"
+msgstr "_T?rol? letilt?sa"
+
+#: plugins/ADM_audioEncoders/lame/audioencoder_lame.cpp:323
+msgid "LAME Configuration"
+msgstr "LAME be?ll?t?sa"
+
+#: plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidConfigDialog.cpp:113
+#: plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp:188
+msgid "<default>"
+msgstr "<alap?rtelmezett>"
+
+#: plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidConfigDialog.cpp:114
+#: plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp:189
+msgid "<custom>"
+msgstr "<egy?ni>"
+
+#: plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidConfigDialog.cpp:222
+#: plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp:327
+msgid "Save As"
+msgstr "Ment?s m?sk?nt..."
+
+#: plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidConfigDialog.cpp:222
+msgid "Xvid Configuration File (*.xml)"
+msgstr "Xvid konvigur?ci?s f?jl (*.xml)"
+
+#: plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidConfigDialog.cpp:253
+#: plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp:358
+msgid "Are you sure you wish to delete the selected configuration?"
+msgstr "Biztos, hogy t?rli a kiv?lasztott be?ll?t?st?"
+
+#: plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidConfigDialog.cpp:273
+#: plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp:376
+msgid "Target Bitrate:"
+msgstr "C?l bitr?ta:"
+
+#: plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidConfigDialog.cpp:274
+#: plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidConfigDialog.cpp:294
+#: plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp:377
+#: plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp:395
+msgid "kbit/s"
+msgstr "kbit/s"
+
+#: plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidConfigDialog.cpp:280
+#: plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp:381
+msgid "Quantiser:"
+msgstr "Quantiser:"
+
+#: plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidConfigDialog.cpp:286
+#: plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp:389
+msgid "Target Video Size:"
+msgstr "C?l vide? m?rete:"
+
+#: plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidConfigDialog.cpp:287
+#: plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp:390
+msgid "MB"
+msgstr "MB"
+
+#: plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidConfigDialog.cpp:293
+#: plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp:394
+msgid "Average Bitrate:"
+msgstr "?tlag bitr?ta:"
+
+#: plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidCustomMatrixDialog.cpp:41
+#: plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264CustomMatrixDialog.cpp:49
+msgid "Select Matrix File"
+msgstr "M?trix f?jl kiv?laszt?sa"
+
+#: plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidCustomMatrixDialog.cpp:48
+#: plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264CustomMatrixDialog.cpp:60
+msgid "Read Error"
+msgstr "Olvas?si hiba"
+
+#: plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidCustomMatrixDialog.cpp:48
+#: plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264CustomMatrixDialog.cpp:60
+msgid "Error reading custom matrix file."
+msgstr "Hiba az egy?ni m?trix f?jl beolvas?sakor."
+
+#: plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ZoneTableDelegate.cpp:51
+#: plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ZoneTableModel.cpp:76
+msgid "Quantiser"
+msgstr "Quantiser"
+
+#: plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ZoneTableDelegate.cpp:52
+#: plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ZoneTableModel.cpp:78
+msgid "Bitrate Factor"
+msgstr "Bitr?ta Faktor"
+
+#: plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ZoneTableModel.cpp:110
+msgid "Frame Start"
+msgstr "Kezd? frame"
+
+#: plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ZoneTableModel.cpp:112
+msgid "Frame End"
+msgstr "Utols? frame"
+
+#: plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ZoneTableModel.cpp:114
+msgid "Mode"
+msgstr "M?d"
+
+#: plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ZoneTableModel.cpp:116
+msgid "Value"
+msgstr "?rt?k"
+
+#: plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp:83
+msgid "Hadamard Exhaustive Search"
+msgstr "Hadamard alapos keres?s"
+
+#: plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp:88
+msgid "9 (Best)"
+msgstr "9 (Legjobb)"
+
+#: plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp:108
+msgid "Disabled"
+msgstr "Letiltva"
+
+#: plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp:109
+msgid "Enabled"
+msgstr "Enged?lyezve"
+
+#: plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp:327
+msgid "x264 Configuration File (*.xml)"
+msgstr "x264 konfigur?ci?s f?jl (*.xml)"
+
+#: plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp:385
+msgid "Quality:"
+msgstr "Min?s?g:"
+
+#: plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp:475
+msgid ""
+"Trellis optimisation isn't possible without CABAC coding enabled.  Trellis optimisation will automatically be disabled.\n"
+"\n"
+" Do you wish to continue?"
+msgstr ""
+"Trellis optimaliz?l?s nem lehets?ges a CABAC k?dol?s enged?lyez?se n?lk?l. Trellis optimaliz?l?s automatikusan letiltva.\n"
+"Biztos, hogy folytatja?"
+
+#: plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp:485
+msgid ""
+"Trellis optimisation requires CABAC coding to be enabled.  CABAC coding will automatically be enabled.\n"
+"\n"
+"Do you wish to continue?"
+msgstr ""
+"Trellis optimaliz?l?s nem lehets?ges a CABAC k?dol?s enged?lyez?se n?lk?l. Trellis optimaliz?l?s automatikusan enged?lyezve.\n"
+"Biztos, hogy folytatja?"
+
+#: plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp:516
+msgid "Are you sure you wish to delete the selected zone?"
+msgstr "Biztos, hogy t?rli a kiv?lasztott z?n?t?"
+



From gruntster at mail.berlios.de  Thu Nov 26 21:03:10 2009
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Thu, 26 Nov 2009 21:03:10 +0100
Subject: [Avidemux-svn-commit] r5562 -
	branches/avidemux_2.5_branch_gruntster/platforms/windows/installer
Message-ID: <200911262003.nAQK3A5U030047@sheep.berlios.de>

Author: gruntster
Date: 2009-11-26 21:03:05 +0100 (Thu, 26 Nov 2009)
New Revision: 5562

Modified:
   branches/avidemux_2.5_branch_gruntster/platforms/windows/installer/avidemux.nsi
Log:
[win32] remove intl.dll from GTK+ installer

Modified: branches/avidemux_2.5_branch_gruntster/platforms/windows/installer/avidemux.nsi
===================================================================
--- branches/avidemux_2.5_branch_gruntster/platforms/windows/installer/avidemux.nsi	2009-11-26 19:18:09 UTC (rev 5561)
+++ branches/avidemux_2.5_branch_gruntster/platforms/windows/installer/avidemux.nsi	2009-11-26 20:03:05 UTC (rev 5562)
@@ -319,7 +319,6 @@
         SetOutPath $INSTDIR
         ${File} avidemux2_gtk.exe
         ${File} gtk2_prefs.exe
-        ${File} intl.dll
         ${File} libADM_render_gtk.dll
         ${File} libADM_UIGtk.dll
         ${File} libatk-1.0-0.dll



From gruntster at mail.berlios.de  Thu Nov 26 21:05:54 2009
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Thu, 26 Nov 2009 21:05:54 +0100
Subject: [Avidemux-svn-commit] r5563 -
	branches/avidemux_2.5_branch_gruntster/avidemux/ADM_toolkit
Message-ID: <200911262005.nAQK5sjj030261@sheep.berlios.de>

Author: gruntster
Date: 2009-11-26 21:05:50 +0100 (Thu, 26 Nov 2009)
New Revision: 5563

Modified:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_toolkit/automation.cpp
Log:
[win32] convert CLI parameters from ANSI to UTF-8

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_toolkit/automation.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_toolkit/automation.cpp	2009-11-26 20:03:05 UTC (rev 5562)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_toolkit/automation.cpp	2009-11-26 20:05:50 UTC (rev 5563)
@@ -221,15 +221,29 @@
 int automation(void )
 
 {
-static char **argv;
-static int argc;
-static int cur;
-static int myargc;
-static three_arg_type three;
-static two_arg_type two;
-static int index;
-          argv=global_argv;
-          argc=global_argc;
+	char **argv;
+	int argc, cur, myargc, index;
+	three_arg_type three;
+	two_arg_type two;
+
+	argc = global_argc;
+
+#ifdef __WIN32
+	int utf8StringLength;
+
+	argv = new char*[argc];
+
+	for (int arg = 0; arg < argc; arg++)
+	{
+		utf8StringLength = ansiStringToUtf8(global_argv[arg], -1, NULL);
+		argv[arg] = new char[utf8StringLength];
+
+		ansiStringToUtf8(global_argv[arg], -1, argv[arg]);
+	}
+#else
+	argv = global_argv;
+#endif
+
           printf("\n *** Automated : %d entries*************\n",(int)NB_AUTO);
           // we need to process
           argc-=1;
@@ -239,20 +253,8 @@
           {
                       if(( *argv[cur]!='-') || (*(argv[cur]+1)!='-'))
                       {
-                            if(cur==1) 
-                            {
-#ifdef __WIN32
-								int utf8StringLength = ansiStringToUtf8(argv[cur], -1, NULL);
-								char utf8FileName[utf8StringLength];
-
-								ansiStringToUtf8(argv[cur], -1, utf8FileName);
-
-								A_openAvi(utf8FileName);
-#else
+                            if(cur==1)
 								A_openAvi(argv[cur]);
-#endif
-	
-                            }
                             else
                                 printf("\n Found garbage %s\n",argv[cur]);
                             cur+=1;myargc-=1;				
@@ -295,6 +297,14 @@
           } // end while
           GUI_Verbose();
           printf("\n ********** Automation ended***********\n");
+
+#ifdef __WIN32
+	for (int arg = 0; arg < argc; arg++)
+		delete [] argv[arg];
+
+	delete argv;
+#endif
+
           return 0; // Do not call me anymore
 }
 //_________________________________________________________________________



From gruntster at mail.berlios.de  Thu Nov 26 21:26:32 2009
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Thu, 26 Nov 2009 21:26:32 +0100
Subject: [Avidemux-svn-commit] r5564 -
	branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_xvid/gtk
Message-ID: <200911262026.nAQKQWKx031353@sheep.berlios.de>

Author: gruntster
Date: 2009-11-26 21:26:28 +0100 (Thu, 26 Nov 2009)
New Revision: 5564

Modified:
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_xvid/gtk/xvidConfigDialog.cpp
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_xvid/gtk/xvidConfigDialog.h
Log:
[xvid] save settings when using GTK+ (fixes #55)

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_xvid/gtk/xvidConfigDialog.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_xvid/gtk/xvidConfigDialog.cpp	2009-11-26 20:05:50 UTC (rev 5563)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_xvid/gtk/xvidConfigDialog.cpp	2009-11-26 20:26:28 UTC (rev 5564)
@@ -34,21 +34,6 @@
 #include "xvidConfigDialog.h"
 
 #define WID(x) lookup_widget(dialog, #x)
-
-static GtkWidget *create_dialog1 (void);
-static GtkWidget *create_dialog3 (void);
-
-static void loadOptions(GtkWidget *dialog, XvidOptions *options);
-void saveOptions(GtkWidget *dialog, XvidOptions *options);
-
-static unsigned char editMatrix(unsigned char *inter, unsigned char *intra, GtkWidget *parent);
-static void updateMode(GtkWidget *dialog, int encodeMode, int encodeModeParameter);
-static int getCurrentEncodeMode(GtkWidget *dialog);
-
-static int cb_mod(GtkObject *object, gpointer user_data);
-static int ch_par_asinput(GtkObject *object, gpointer user_data);
-static int entryEntry_changed(GtkObject* object, gpointer user_data);
-
 #define CALL_Z(x,y)  gtk_dialog_add_action_widget (GTK_DIALOG (dialog), WID(x),XVID4_RESPONSE_##y);
 
 typedef enum 
@@ -81,8 +66,8 @@
 	_parWidth = properties->parWidth;
 	_parHeight = properties->parHeight;
 
-	updateMode(dialog, encodeOptions->encodeMode, encodeOptions->encodeModeParameter);
 	loadOptions(dialog, options);
+	updateMode(dialog, encodeOptions->encodeMode, encodeOptions->encodeModeParameter);
 
 	gtk_signal_connect(GTK_OBJECT(WID(optionmenuType)), "changed", GTK_SIGNAL_FUNC(cb_mod), dialog);
 	gtk_signal_connect(GTK_OBJECT(WID(checkbutton_par_asinput)), "clicked", GTK_SIGNAL_FUNC(ch_par_asinput), options);
@@ -93,7 +78,7 @@
 
 _again:
 	int code = gtk_dialog_run(GTK_DIALOG(dialog));
-	int b, ret = 0;
+	int b;
 
 	if (code == XVID4_RESPONSE_EDIT_MATRIX)
 	{
@@ -172,7 +157,7 @@
 
 	gtk_widget_destroy(dialog);
 
-	return ret;
+	return code == GTK_RESPONSE_OK;
 }
 
 int getRangeInMenu(GtkWidget *menu)

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_xvid/gtk/xvidConfigDialog.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_xvid/gtk/xvidConfigDialog.h	2009-11-26 20:05:50 UTC (rev 5563)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_xvid/gtk/xvidConfigDialog.h	2009-11-26 20:26:28 UTC (rev 5564)
@@ -6,4 +6,18 @@
 #include "ADM_vidEnc_plugin.h"
 }
 
+static GtkWidget *create_dialog1 (void);
+static GtkWidget *create_dialog3 (void);
+
+static void loadOptions(GtkWidget *dialog, XvidOptions *options);
+static void saveOptions(GtkWidget *dialog, XvidOptions *options);
+
+static unsigned char editMatrix(unsigned char *inter, unsigned char *intra, GtkWidget *parent);
+static void updateMode(GtkWidget *dialog, int encodeMode, int encodeModeParameter);
+static int getCurrentEncodeMode(GtkWidget *dialog);
+
+static int cb_mod(GtkObject *object, gpointer user_data);
+static int ch_par_asinput(GtkObject *object, gpointer user_data);
+static int entryEntry_changed(GtkObject* object, gpointer user_data);
+
 #endif	// xvidConfigDialog_h



From gruntster at mail.berlios.de  Thu Nov 26 21:33:16 2009
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Thu, 26 Nov 2009 21:33:16 +0100
Subject: [Avidemux-svn-commit] r5565 -
	branches/avidemux_2.5_branch_gruntster/plugins/ADM_audioEncoders/lame
Message-ID: <200911262033.nAQKXGKH031734@sheep.berlios.de>

Author: gruntster
Date: 2009-11-26 21:33:11 +0100 (Thu, 26 Nov 2009)
New Revision: 5565

Modified:
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_audioEncoders/lame/audioencoder_lame.cpp
Log:
[lame] add support for 256 and 320kbps (patch by surfer)

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_audioEncoders/lame/audioencoder_lame.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_audioEncoders/lame/audioencoder_lame.cpp	2009-11-26 20:26:28 UTC (rev 5564)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_audioEncoders/lame/audioencoder_lame.cpp	2009-11-26 20:33:11 UTC (rev 5565)
@@ -312,7 +312,9 @@
     BITRATE (128),
     BITRATE (160),
     BITRATE (192),
-    BITRATE (224)
+    BITRATE (224),
+	BITRATE (256),
+	BITRATE (320)
   };
 
 //***  



From gruntster at mail.berlios.de  Thu Nov 26 22:24:59 2009
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Thu, 26 Nov 2009 22:24:59 +0100
Subject: [Avidemux-svn-commit] r5566 - in
	branches/avidemux_2.5_branch_gruntster: cmake
	plugins/ADM_videoEncoder/ADM_vidEnc_x264
	plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk
	plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4
Message-ID: <200911262124.nAQLOxB1003214@sheep.berlios.de>

Author: gruntster
Date: 2009-11-26 22:24:49 +0100 (Thu, 26 Nov 2009)
New Revision: 5566

Modified:
   branches/avidemux_2.5_branch_gruntster/cmake/admCheckX264.cmake
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/encoder.cpp
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk/x264ConfigDialog.cpp
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk/x264ConfigDialog.glade
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/x264Options.cpp
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/x264Options.h
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/x264Param.xsd
Log:
[x264] increase minimum supported core version to 67

Modified: branches/avidemux_2.5_branch_gruntster/cmake/admCheckX264.cmake
===================================================================
--- branches/avidemux_2.5_branch_gruntster/cmake/admCheckX264.cmake	2009-11-26 20:33:11 UTC (rev 5565)
+++ branches/avidemux_2.5_branch_gruntster/cmake/admCheckX264.cmake	2009-11-26 21:24:49 UTC (rev 5566)
@@ -14,14 +14,14 @@
 				STRING(REGEX REPLACE ".*[ ]([0-9]+).*" "\\1" x264_version "${X264_H}")
 				MESSAGE(STATUS "  core version: ${x264_version}")
 				
-				IF (x264_version LESS 54)
-					MESSAGE("WARNING: x264 core version is too old.  At least version 54 is required.")
+				IF (x264_version LESS 67)
+					MESSAGE("WARNING: x264 core version is too old.  At least version 67 is required.")
 					SET(X264_FOUND 0)
 				ELSEIF (x264_version GREATER 73)
 					FIND_HEADER_AND_LIB(X264 x264.h x264 x264_encoder_open_${x264_version})
-				ELSE (x264_version LESS 54)
+				ELSE (x264_version LESS 67)
 					FIND_HEADER_AND_LIB(X264 x264.h x264 x264_encoder_open)
-				ENDIF (x264_version LESS 54)
+				ENDIF (x264_version LESS 67)
 			ELSE (_X264_FOUND)
 				SET(X264_FOUND 0)
 			ENDIF (_X264_FOUND)

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/encoder.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/encoder.cpp	2009-11-26 20:33:11 UTC (rev 5565)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/encoder.cpp	2009-11-26 21:24:49 UTC (rev 5566)
@@ -603,17 +603,11 @@
 	printf("[x264] rc.f_rf_constant = %f\n", x264Param->rc.f_rf_constant);
 	printf("[x264] rc.i_qp_constant = %d\n", x264Param->rc.i_qp_constant);	
 	printf("[x264] analyse.i_subpel_refine = %d\n", x264Param->analyse.i_subpel_refine);
-#if X264_BUILD < 65
-	printf("[x264] analyse.b_bframe_rdo = %d\n", x264Param->analyse.b_bframe_rdo);
-#endif
 	printf("[x264] analyse.i_me_method = %d\n", x264Param->analyse.i_me_method);
 	printf("[x264] analyse.i_me_range = %d\n", x264Param->analyse.i_me_range);
 	printf("[x264] analyse.i_mv_range = %d\n", x264Param->analyse.i_mv_range);
 	printf("[x264] analyse.i_mv_range_thread = %d\n", x264Param->analyse.i_mv_range_thread);
 	printf("[x264] analyse.i_direct_mv_pred = %d\n", x264Param->analyse.i_direct_mv_pred);
-#if X264_BUILD < 66
-	printf("[x264] analyse.i_direct_8x8_inference = %d\n", x264Param->analyse.i_direct_8x8_inference);
-#endif
 	printf("[x264] analyse.b_weighted_bipred = %d\n", x264Param->analyse.b_weighted_bipred);
 	printf("[x264] analyse.b_transform_8x8 = %d\n", x264Param->analyse.b_transform_8x8);
 	printf("[x264] analyse.inter = %d\n", x264Param->analyse.inter);
@@ -630,22 +624,12 @@
 #else
 	printf("[x264] b_bframe_pyramid = %d\n", x264Param->b_bframe_pyramid);
 #endif
-#if X264_BUILD >= 63
 	printf("[x264] i_bframe_adaptive = %d\n", x264Param->i_bframe_adaptive);
-#else
-	printf("[x264] b_bframe_adaptive = %d\n", x264Param->b_bframe_adaptive);
-#endif
 	printf("[x264] i_keyint_max = %d\n", x264Param->i_keyint_max);
 	printf("[x264] i_keyint_min = %d\n", x264Param->i_keyint_min);
 	printf("[x264] i_scenecut_threshold = %d\n", x264Param->i_scenecut_threshold);
-#if X264_BUILD < 67
-	printf("[x264] b_pre_scenecut = %d\n", x264Param->b_pre_scenecut);
-#endif
 	printf("[x264] analyse.b_mixed_references = %d\n", x264Param->analyse.b_mixed_references);
 	printf("[x264] analyse.b_chroma_me = %d\n", x264Param->analyse.b_chroma_me);
-#if X264_BUILD < 65
-	printf("[x264] analyse.b_bidir_me = %d\n", x264Param->analyse.b_bidir_me);
-#endif
 	printf("[x264] analyse.i_trellis = %d\n", x264Param->analyse.i_trellis);
 	printf("[x264] analyse.b_fast_pskip = %d\n", x264Param->analyse.b_fast_pskip);
 	printf("[x264] analyse.b_dct_decimate = %d\n", x264Param->analyse.b_dct_decimate);

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk/x264ConfigDialog.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk/x264ConfigDialog.cpp	2009-11-26 20:33:11 UTC (rev 5565)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk/x264ConfigDialog.cpp	2009-11-26 21:24:49 UTC (rev 5566)
@@ -78,34 +78,6 @@
 	gtk_window_set_transient_for(GTK_WINDOW(dialog), GTK_WINDOW(configParameters->parent));
 	gtk_dialog_add_action_widget(GTK_DIALOG(dialog), WID(buttonResetDaults), ACTION_LOAD_DEFAULT);
 
-#if X264_BUILD >= 58
-	gtk_combo_box_append_text(GTK_COMBO_BOX(WID(comboboxMethod)), _("Hadamard Exhaustive Search"));
-#endif
-
-#if X264_BUILD >= 65
-	gtk_combo_box_append_text (GTK_COMBO_BOX(WID(comboboxPartitionDecision)), _("1 - QPel SAD (Fastest)"));
-	gtk_combo_box_append_text (GTK_COMBO_BOX(WID(comboboxPartitionDecision)), _("2 - QPel SATD"));
-	gtk_combo_box_append_text (GTK_COMBO_BOX(WID(comboboxPartitionDecision)), _("3 - HPel on MB then QPel"));
-	gtk_combo_box_append_text (GTK_COMBO_BOX(WID(comboboxPartitionDecision)), _("4 - Always QPel"));
-	gtk_combo_box_append_text (GTK_COMBO_BOX(WID(comboboxPartitionDecision)), _("5 - QPel + Bidirectional ME"));
-	gtk_combo_box_append_text (GTK_COMBO_BOX(WID(comboboxPartitionDecision)), _("6 - RD on I/P frames (Default)"));
-	gtk_combo_box_append_text (GTK_COMBO_BOX(WID(comboboxPartitionDecision)), _("7 - RD on all frames"));
-	gtk_combo_box_append_text (GTK_COMBO_BOX(WID(comboboxPartitionDecision)), _("8 - RD refinement on I/P frames"));
-	gtk_combo_box_append_text (GTK_COMBO_BOX(WID(comboboxPartitionDecision)), _("9 - RD refinement on all frames"));
-
-	gtk_widget_hide(WID(checkbuttonBidirME));
-#else
-	gtk_combo_box_append_text (GTK_COMBO_BOX(WID(comboboxPartitionDecision)), _("1  - Extremely Low (Fastest)"));
-	gtk_combo_box_append_text (GTK_COMBO_BOX(WID(comboboxPartitionDecision)), _("2  - Very Low"));
-	gtk_combo_box_append_text (GTK_COMBO_BOX(WID(comboboxPartitionDecision)), _("3  - Low"));
-	gtk_combo_box_append_text (GTK_COMBO_BOX(WID(comboboxPartitionDecision)), _("4  - Medium"));
-	gtk_combo_box_append_text (GTK_COMBO_BOX(WID(comboboxPartitionDecision)), _("5  - High (Default)"));
-	gtk_combo_box_append_text (GTK_COMBO_BOX(WID(comboboxPartitionDecision)), _("6  - Very High"));
-	gtk_combo_box_append_text (GTK_COMBO_BOX(WID(comboboxPartitionDecision)), _("6B - Very High (RDO on B-frames)"));
-	gtk_combo_box_append_text (GTK_COMBO_BOX(WID(comboboxPartitionDecision)), _("7  - Ultra High"));
-	gtk_combo_box_append_text (GTK_COMBO_BOX(WID(comboboxPartitionDecision)), _("7B - Ultra High (RDO on B-frames)"));
-#endif
-
 	loadOptions(dialog, options);
 	updateMode(dialog, encodeOptions->encodeMode, encodeOptions->encodeModeParameter);
 	updateDeblockingFilter(dialog);
@@ -293,9 +265,6 @@
 	gtk_toggle_button_set_active(GTK_TOGGLE_BUTTON(WID(checkbuttonDCTDecimate)), options->getDctDecimate());
 	gtk_toggle_button_set_active(GTK_TOGGLE_BUTTON(WID(checkbuttoninterlaced)), options->getInterlaced());
 	gtk_toggle_button_set_active(GTK_TOGGLE_BUTTON(WID(checkbuttonBasReference)), options->getBFrameReferences());
-#if X264_BUILD < 65
-	gtk_toggle_button_set_active(GTK_TOGGLE_BUTTON(WID(checkbuttonBidirME)), options->getBidirectionalMotionEstimation());
-#endif
 	gtk_toggle_button_set_active(GTK_TOGGLE_BUTTON(WID(checkbuttonAdaptative)), options->getAdaptiveBFrameDecision());
 	gtk_toggle_button_set_active(GTK_TOGGLE_BUTTON(WID(checkbuttonWeighted)), options->getWeightedPrediction());
 	gtk_toggle_button_set_active(GTK_TOGGLE_BUTTON(WID(checkbuttonMixedRefs)), options->getMixedReferences());
@@ -343,28 +312,7 @@
 	gtk_toggle_button_set_active(GTK_TOGGLE_BUTTON(WID(checkbutton8x8I)), options->getPartitionI8x8());
 	gtk_toggle_button_set_active(GTK_TOGGLE_BUTTON(WID(checkbutton4x4I)), options->getPartitionI4x4());
 	gtk_toggle_button_set_active(GTK_TOGGLE_BUTTON(WID(radiobuttonAsInputAR)), options->getSarAsInput());
-
-#if X264_BUILD < 65
-	int decisionItem;
-
-	if (options->getSubpixelRefinement() < 6)
-		decisionItem = options->getSubpixelRefinement() - 1;
-	else
-		if (options->getSubpixelRefinement() == 6)
-			if (options->getBFrameRdo())
-				decisionItem = 6;
-			else
-				decisionItem = 5;
-		else
-			if (options->getBFrameRdo())
-				decisionItem = 8;
-			else
-				decisionItem = 7;
-#else
-	int decisionItem = options->getSubpixelRefinement() - 1;
-#endif
-
-	gtk_combo_box_set_active(GTK_COMBO_BOX(WID(comboboxPartitionDecision)), decisionItem);
+	gtk_combo_box_set_active(GTK_COMBO_BOX(WID(comboboxPartitionDecision)), options->getSubpixelRefinement() - 1);
 }
 
 void saveOptions(GtkWidget *dialog, x264Options *options)
@@ -373,9 +321,6 @@
 	options->setDctDecimate(gtk_toggle_button_get_active(GTK_TOGGLE_BUTTON(WID(checkbuttonDCTDecimate))));
 	options->setInterlaced(gtk_toggle_button_get_active(GTK_TOGGLE_BUTTON(WID(checkbuttoninterlaced))));
 	options->setBFrameReferences(gtk_toggle_button_get_active(GTK_TOGGLE_BUTTON(WID(checkbuttonBasReference))));
-#if X264_BUILD < 65
-	options->setBidirectionalMotionEstimation(gtk_toggle_button_get_active(GTK_TOGGLE_BUTTON(WID(checkbuttonBidirME))));
-#endif
 	options->setAdaptiveBFrameDecision(gtk_toggle_button_get_active(GTK_TOGGLE_BUTTON(WID(checkbuttonAdaptative))));
 	options->setWeightedPrediction(gtk_toggle_button_get_active(GTK_TOGGLE_BUTTON(WID(checkbuttonWeighted))));
 	options->setMixedReferences(gtk_toggle_button_get_active(GTK_TOGGLE_BUTTON(WID(checkbuttonMixedRefs))));
@@ -434,28 +379,7 @@
 	}
 
 	options->setSarAsInput(gtk_toggle_button_get_active(GTK_TOGGLE_BUTTON(WID(radiobuttonAsInputAR))));
-
-	uint32_t decisionItem = gtk_combo_box_get_active(GTK_COMBO_BOX(WID(comboboxPartitionDecision)));
-
-#if X264_BUILD < 65
-	if (decisionItem < 6)
-	{
-		options->setSubpixelRefinement(decisionItem + 1);
-		options->setBFrameRdo(false);
-	}
-	else if (decisionItem == 6)
-	{
-		options->setSubpixelRefinement(6);
-		options->setBFrameRdo(true);
-	}
-	else
-	{
-		options->setSubpixelRefinement(7);
-		options->setBFrameRdo(decisionItem == 8);
-	}
-#else
-	options->setSubpixelRefinement(decisionItem + 1);
-#endif
+	options->setSubpixelRefinement(gtk_combo_box_get_active(GTK_COMBO_BOX(WID(comboboxPartitionDecision))) + 1);
 }
 
 GtkWidget*
@@ -561,7 +485,6 @@
   GtkWidget *spinbuttonMaxBFrame;
   GtkWidget *alignment20;
   GtkWidget *table6;
-  GtkWidget *checkbuttonBidirME;
   GtkWidget *checkbuttonWeighted;
   GtkWidget *checkbuttonAdaptative;
   GtkWidget *checkbuttonBasReference;
@@ -801,6 +724,15 @@
   gtk_table_attach (GTK_TABLE (table7), comboboxPartitionDecision, 1, 3, 0, 1,
                     (GtkAttachOptions) (GTK_FILL),
                     (GtkAttachOptions) (GTK_FILL), 0, 0);
+  gtk_combo_box_append_text (GTK_COMBO_BOX (comboboxPartitionDecision), _("1 - QPel SAD (Fastest)"));
+  gtk_combo_box_append_text (GTK_COMBO_BOX (comboboxPartitionDecision), _("2 - QPel SATD"));
+  gtk_combo_box_append_text (GTK_COMBO_BOX (comboboxPartitionDecision), _("3 - HPel on MB then QPel"));
+  gtk_combo_box_append_text (GTK_COMBO_BOX (comboboxPartitionDecision), _("4 - Always QPel"));
+  gtk_combo_box_append_text (GTK_COMBO_BOX (comboboxPartitionDecision), _("5 - QPel + Bidirectional ME"));
+  gtk_combo_box_append_text (GTK_COMBO_BOX (comboboxPartitionDecision), _("6 - RD on I/P frames (Default)"));
+  gtk_combo_box_append_text (GTK_COMBO_BOX (comboboxPartitionDecision), _("7 - RD on all frames"));
+  gtk_combo_box_append_text (GTK_COMBO_BOX (comboboxPartitionDecision), _("8 - RD refinement on I/P frames"));
+  gtk_combo_box_append_text (GTK_COMBO_BOX (comboboxPartitionDecision), _("9 - RD refinement on all frames"));
 
   comboboxMethod = gtk_combo_box_new_text ();
   gtk_widget_show (comboboxMethod);
@@ -811,6 +743,7 @@
   gtk_combo_box_append_text (GTK_COMBO_BOX (comboboxMethod), _("Hexagonal Search"));
   gtk_combo_box_append_text (GTK_COMBO_BOX (comboboxMethod), _("Uneven Multi-hexagon"));
   gtk_combo_box_append_text (GTK_COMBO_BOX (comboboxMethod), _("Exhaustive Search"));
+  gtk_combo_box_append_text (GTK_COMBO_BOX (comboboxMethod), _("Hadamard Exhaustive Search"));
 
   table11 = gtk_table_new (2, 3, FALSE);
   gtk_widget_show (table11);
@@ -1217,13 +1150,6 @@
   gtk_table_set_row_spacings (GTK_TABLE (table6), 3);
   gtk_table_set_col_spacings (GTK_TABLE (table6), 10);
 
-  checkbuttonBidirME = gtk_check_button_new_with_mnemonic (_("Bidirectional ME"));
-  gtk_widget_show (checkbuttonBidirME);
-  gtk_table_attach (GTK_TABLE (table6), checkbuttonBidirME, 1, 2, 0, 1,
-                    (GtkAttachOptions) (GTK_FILL),
-                    (GtkAttachOptions) (0), 0, 0);
-  gtk_tooltips_set_tip (tooltips, checkbuttonBidirME, _("Optimise both motion vectors in B-frames. This will improve quality but take more time for encoding."), NULL);
-
   checkbuttonWeighted = gtk_check_button_new_with_mnemonic (_("Weighted Biprediction"));
   gtk_widget_show (checkbuttonWeighted);
   gtk_table_attach (GTK_TABLE (table6), checkbuttonWeighted, 1, 2, 1, 2,
@@ -1888,7 +1814,6 @@
   GLADE_HOOKUP_OBJECT (dialog1, spinbuttonMaxBFrame, "spinbuttonMaxBFrame");
   GLADE_HOOKUP_OBJECT (dialog1, alignment20, "alignment20");
   GLADE_HOOKUP_OBJECT (dialog1, table6, "table6");
-  GLADE_HOOKUP_OBJECT (dialog1, checkbuttonBidirME, "checkbuttonBidirME");
   GLADE_HOOKUP_OBJECT (dialog1, checkbuttonWeighted, "checkbuttonWeighted");
   GLADE_HOOKUP_OBJECT (dialog1, checkbuttonAdaptative, "checkbuttonAdaptative");
   GLADE_HOOKUP_OBJECT (dialog1, checkbuttonBasReference, "checkbuttonBasReference");

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk/x264ConfigDialog.glade
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk/x264ConfigDialog.glade	2009-11-26 20:33:11 UTC (rev 5565)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk/x264ConfigDialog.glade	2009-11-26 21:24:49 UTC (rev 5566)
@@ -401,16 +401,15 @@
 				  <child>
 				    <widget class="GtkComboBox" id="comboboxPartitionDecision">
 				      <property name="visible">True</property>
-				      <property name="items" translatable="yes">1  - Extremely Low (Fastest)
-2  - Very Low
-3  - Low
-4  - Medium
-5  - High (Default)
-6  - Very High
-6B - Very High (RDO on B-frames)
-7  - Ultra High
-7B - Ultra High (RDO on B-frames)
-</property>
+				      <property name="items" translatable="yes">1 - QPel SAD (Fastest)
+2 - QPel SATD
+3 - HPel on MB then QPel
+4 - Always QPel
+5 - QPel + Bidirectional ME
+6 - RD on I/P frames (Default)
+7 - RD on all frames
+8 - RD refinement on I/P frames
+9 - RD refinement on all frames</property>
 				      <property name="add_tearoffs">False</property>
 				      <property name="focus_on_click">True</property>
 				    </widget>
@@ -430,7 +429,8 @@
 				      <property name="items" translatable="yes">Diamond Search
 Hexagonal Search
 Uneven Multi-hexagon
-Exhaustive Search</property>
+Exhaustive Search
+Hadamard Exhaustive Search</property>
 				      <property name="add_tearoffs">False</property>
 				      <property name="focus_on_click">True</property>
 				    </widget>
@@ -1748,29 +1748,6 @@
 				      <property name="column_spacing">10</property>
 
 				      <child>
-					<widget class="GtkCheckButton" id="checkbuttonBidirME">
-					  <property name="visible">True</property>
-					  <property name="tooltip" translatable="yes">Optimise both motion vectors in B-frames. This will improve quality but take more time for encoding.</property>
-					  <property name="can_focus">True</property>
-					  <property name="label" translatable="yes">Bidirectional ME</property>
-					  <property name="use_underline">True</property>
-					  <property name="relief">GTK_RELIEF_NORMAL</property>
-					  <property name="focus_on_click">True</property>
-					  <property name="active">False</property>
-					  <property name="inconsistent">False</property>
-					  <property name="draw_indicator">True</property>
-					</widget>
-					<packing>
-					  <property name="left_attach">1</property>
-					  <property name="right_attach">2</property>
-					  <property name="top_attach">0</property>
-					  <property name="bottom_attach">1</property>
-					  <property name="x_options">fill</property>
-					  <property name="y_options"></property>
-					</packing>
-				      </child>
-
-				      <child>
 					<widget class="GtkCheckButton" id="checkbuttonWeighted">
 					  <property name="visible">True</property>
 					  <property name="tooltip" translatable="yes">Enables weighting of B-frames to help fades</property>

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp	2009-11-26 20:33:11 UTC (rev 5565)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp	2009-11-26 21:24:49 UTC (rev 5566)
@@ -84,53 +84,17 @@
 	connect(ui.dct8x8CheckBox, SIGNAL(toggled(bool)), this, SLOT(dct8x8CheckBox_toggled(bool)));
 	connect(ui.p8x8CheckBox, SIGNAL(toggled(bool)), this, SLOT(p8x8CheckBox_toggled(bool)));
 
-#if X264_BUILD >= 57
-	ui.meMethodComboBox->addItem(QT_TR_NOOP("Hadamard Exhaustive Search"));
-#endif
-
-#if X264_BUILD >= 65
-	ui.rdoCheckBox->setVisible(false);
-	ui.label_37->setText(QT_TR_NOOP("9 (Best)"));
-	ui.meSlider->setMaximum(9);
-	ui.meSpinBox->setMaximum(9);
-#endif
-
-#if X264_BUILD >= 66
-	ui.label_41->setVisible(false);
-	ui.predictSizeComboBox->setVisible(false);
-#endif
-
-#if X264_BUILD >= 67
 	ui.scenecutDetectionCheckBox->setVisible(false);
-#endif
 
 	// Frame tab
 	connect(ui.loopFilterCheckBox, SIGNAL(toggled(bool)), this, SLOT(loopFilterCheckBox_toggled(bool)));
 	connect(ui.cabacCheckBox, SIGNAL(toggled(bool)), this, SLOT(cabacCheckBox_toggled(bool)));
 
-#if X264_BUILD < 63
-	ui.adaptiveBFrameComboBox->clear();
-	ui.adaptiveBFrameComboBox->addItem(QT_TR_NOOP("Disabled"));
-	ui.adaptiveBFrameComboBox->addItem(QT_TR_NOOP("Enabled"));
-#endif
-
 	// Analysis tab
 	connect(ui.trellisCheckBox, SIGNAL(toggled(bool)), this, SLOT(trellisCheckBox_toggled(bool)));
 	connect(ui.matrixCustomEditButton, SIGNAL(pressed()), this, SLOT(matrixCustomEditButton_pressed()));
 
-#if X264_BUILD >= 65
-	ui.bFrameMotionEstCheckBox->setVisible(false);
-#endif
-
-#if X264_BUILD < 64
-	ui.lblPsychoRDO->setVisible(false);
-	ui.psychoRdoSpinBox->setVisible(false);
-#endif
-
 	// Quantiser tab
-#if X264_BUILD < 59
-	ui.aqGroupBox->setEnabled(false);
-#endif
 #if X264_BUILD >= 69
 	connect(ui.aqVarianceCheckBox, SIGNAL(toggled(bool)), this, SLOT(aqVarianceCheckBox_toggled(bool)));
 #endif
@@ -451,13 +415,6 @@
 void x264ConfigDialog::meSlider_valueChanged(int value)
 {
 	ui.meSpinBox->setValue(value);
-
-#if X264_BUILD < 65
-	ui.rdoCheckBox->setEnabled(value >= 6);
-
-	if (value < 6)
-		ui.rdoCheckBox->setChecked(false);
-#endif
 }
 
 void x264ConfigDialog::meSpinBox_valueChanged(int value)
@@ -685,9 +642,6 @@
 
 	// Motion Estimation tab
 	ui.meSpinBox->setValue(options->getSubpixelRefinement());
-#if X264_BUILD < 65
-	ui.rdoCheckBox->setChecked(options->getBFrameRdo());
-#endif
 	ui.meMethodComboBox->setCurrentIndex(options->getMotionEstimationMethod());
 	ui.mvRangeSpinBox->setValue(options->getMotionVectorSearchRange());
 
@@ -708,16 +662,9 @@
 	}
 
 	ui.predictModeComboBox->setCurrentIndex(options->getDirectPredictionMode());
-
-#if X264_BUILD < 66
-	if (options->getDirectPredictionSize() == -1)
-		ui.predictSizeComboBox->setCurrentIndex(0);
-	else
-		ui.predictSizeComboBox->setCurrentIndex(options->getDirectPredictionSize());
-#endif
-
-	// Prediction tab
 	ui.weightedPredictCheckBox->setChecked(options->getWeightedPrediction());
+
+	// Partition tab
 	ui.p8x8CheckBox->setChecked(options->getPartitionP8x8());
 	ui.b8x8CheckBox->setChecked(options->getPartitionB8x8());
 	ui.p4x4CheckBox->setChecked(options->getPartitionP4x4());
@@ -740,16 +687,10 @@
 	ui.maxGopSizeSpinBox->setValue(options->getGopMaximumSize());
 	ui.minGopSizeSpinBox->setValue(options->getGopMinimumSize());
 	ui.IFrameThresholdSpinBox->setValue(options->getScenecutThreshold());
-#if X264_BUILD < 67
-	ui.scenecutDetectionCheckBox->setChecked(options->getPreScenecutDetection());
-#endif
 
 	// Analysis tab
 	ui.mixedRefsCheckBox->setChecked(options->getMixedReferences());
 	ui.chromaMotionEstCheckBox->setChecked(options->getChromaMotionEstimation());
-#if X264_BUILD < 65
-	ui.bFrameMotionEstCheckBox->setChecked(options->getBidirectionalMotionEstimation());
-#endif
 
 	if (options->getTrellis() && options->getCabac())
 	{
@@ -761,10 +702,7 @@
 
 	ui.fastPSkipCheckBox->setChecked(options->getFastPSkip());
 	ui.dctDecimateCheckBox->setChecked(options->getDctDecimate());
-
-#if X264_BUILD >= 64
 	ui.psychoRdoSpinBox->setValue(options->getPsychoRdo());
-#endif
 
 	ui.noiseReductionSpinBox->setValue(options->getNoiseReduction());
 	ui.interLumaSpinBox->setValue(options->getInterLumaDeadzone());
@@ -801,11 +739,8 @@
 	ui.quantiserCurveCompressSpinBox->setValue((int)floor(options->getQuantiserCurveCompression() * 100 + .5));
 	ui.quantiserBeforeCompressSpinBox->setValue(options->getReduceFluxBeforeCurveCompression());
 	ui.quantiserAfterCompressSpinBox->setValue(options->getReduceFluxAfterCurveCompression());
-
-#if X264_BUILD >= 62
 	ui.aqVarianceCheckBox->setChecked(options->getAdaptiveQuantiserMode() == X264_AQ_VARIANCE);
 	ui.aqStrengthSpinBox->setValue(options->getAdaptiveQuantiserStrength());
-#endif	// X264_BUILD >= 62
 
 	// Advanced tab
 	ui.vbvMaxBitrateSpinBox->setValue(options->getVbvMaximumBitrate());
@@ -913,9 +848,6 @@
 
 	// Motion Estimation tab
 	options->setSubpixelRefinement(ui.meSpinBox->value());
-#if X264_BUILD < 65
-	options->setBFrameRdo(ui.rdoCheckBox->isChecked());
-#endif
 	options->setMotionEstimationMethod(ui.meMethodComboBox->currentIndex());
 	options->setMotionVectorSearchRange(ui.mvRangeSpinBox->value());
 	
@@ -930,14 +862,6 @@
 		options->setMotionVectorThreadBuffer(-1);
 
 	options->setDirectPredictionMode(ui.predictModeComboBox->currentIndex());
-
-#if X264_BUILD < 66
-	if (ui.predictSizeComboBox->currentIndex() == 0)
-		options->setDirectPredictionSize(-1);
-	else
-		options->setDirectPredictionSize(ui.predictSizeComboBox->currentIndex());
-#endif
-
 	options->setWeightedPrediction(ui.weightedPredictCheckBox->isChecked());
 	options->setDct8x8(ui.dct8x8CheckBox->isChecked());
 	options->setPartitionP8x8(ui.p8x8CheckBox->isChecked());
@@ -960,16 +884,10 @@
 	options->setGopMaximumSize(ui.maxGopSizeSpinBox->value());
 	options->setGopMinimumSize(ui.minGopSizeSpinBox->value());
 	options->setScenecutThreshold(ui.IFrameThresholdSpinBox->value());
-#if X264_BUILD < 67
-	options->setPreScenecutDetection(ui.scenecutDetectionCheckBox->isChecked());
-#endif
 
 	// Analysis tab
 	options->setMixedReferences(ui.mixedRefsCheckBox->isChecked());
 	options->setChromaMotionEstimation(ui.chromaMotionEstCheckBox->isChecked());
-#if X264_BUILD < 65
-	options->setBidirectionalMotionEstimation(ui.bFrameMotionEstCheckBox->isChecked());
-#endif
 
 	if (ui.trellisCheckBox->isChecked())
 		options->setTrellis(ui.trellisComboBox->currentIndex() + 1);
@@ -978,11 +896,7 @@
 
 	options->setFastPSkip(ui.fastPSkipCheckBox->isChecked());
 	options->setDctDecimate(ui.dctDecimateCheckBox->isChecked());
-
-#if X264_BUILD >= 64
 	options->setPsychoRdo(ui.psychoRdoSpinBox->value());
-#endif
-
 	options->setNoiseReduction(ui.noiseReductionSpinBox->value());
 	options->setInterLumaDeadzone(ui.interLumaSpinBox->value());
 	options->setIntraLumaDeadzone(ui.intraLumaSpinBox->value());
@@ -1015,14 +929,12 @@
 	options->setReduceFluxBeforeCurveCompression(ui.quantiserBeforeCompressSpinBox->value());
 	options->setReduceFluxAfterCurveCompression(ui.quantiserAfterCompressSpinBox->value());
 
-#if X264_BUILD >= 62
 	if (ui.aqVarianceCheckBox->isChecked())
 		options->setAdaptiveQuantiserMode(X264_AQ_VARIANCE);
 	else
 		options->setAdaptiveQuantiserMode(X264_AQ_NONE);
 
 	options->setAdaptiveQuantiserStrength(ui.aqStrengthSpinBox->value());
-#endif	// X264_BUILD >= 62
 
 	// Advanced tab
 	options->setVbvMaximumBitrate(ui.vbvMaxBitrateSpinBox->value());

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui	2009-11-26 20:33:11 UTC (rev 5565)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui	2009-11-26 21:24:49 UTC (rev 5566)
@@ -7,7 +7,7 @@
     <x>0</x>
     <y>0</y>
     <width>523</width>
-    <height>540</height>
+    <height>536</height>
    </rect>
   </property>
   <property name="windowTitle" >
@@ -100,7 +100,7 @@
      </property>
      <property name="sizeHint" >
       <size>
-       <width>491</width>
+       <width>505</width>
        <height>10</height>
       </size>
      </property>
@@ -846,6 +846,11 @@
                   <string>Exhaustive Search</string>
                  </property>
                 </item>
+                <item>
+                 <property name="text" >
+                  <string>Hadamard Exhaustive Search</string>
+                 </property>
+                </item>
                </widget>
               </item>
               <item>
@@ -866,7 +871,7 @@
            </layout>
           </item>
           <item>
-           <layout class="QVBoxLayout" >
+           <layout class="QHBoxLayout" >
             <property name="margin" >
              <number>0</number>
             </property>
@@ -879,18 +884,18 @@
                <number>0</number>
               </property>
               <property name="spacing" >
-               <number>6</number>
+               <number>12</number>
               </property>
               <item>
-               <layout class="QHBoxLayout" >
+               <layout class="QVBoxLayout" >
                 <property name="margin" >
                  <number>0</number>
                 </property>
                 <property name="spacing" >
-                 <number>12</number>
+                 <number>0</number>
                 </property>
                 <item>
-                 <layout class="QVBoxLayout" >
+                 <layout class="QHBoxLayout" >
                   <property name="margin" >
                    <number>0</number>
                   </property>
@@ -898,142 +903,119 @@
                    <number>0</number>
                   </property>
                   <item>
-                   <layout class="QHBoxLayout" >
-                    <property name="margin" >
-                     <number>0</number>
+                   <widget class="QLabel" name="label_35" >
+                    <property name="text" >
+                     <string>1 (Fast)</string>
                     </property>
-                    <property name="spacing" >
-                     <number>0</number>
-                    </property>
-                    <item>
-                     <widget class="QLabel" name="label_35" >
-                      <property name="text" >
-                       <string>1 (Fast)</string>
-                      </property>
-                     </widget>
-                    </item>
-                    <item>
-                     <spacer>
-                      <property name="orientation" >
-                       <enum>Qt::Horizontal</enum>
-                      </property>
-                      <property name="sizeHint" >
-                       <size>
-                        <width>40</width>
-                        <height>20</height>
-                       </size>
-                      </property>
-                     </spacer>
-                    </item>
-                    <item>
-                     <widget class="QLabel" name="label_36" >
-                      <property name="text" >
-                       <string>Subpixel Refinement</string>
-                      </property>
-                     </widget>
-                    </item>
-                    <item>
-                     <spacer>
-                      <property name="orientation" >
-                       <enum>Qt::Horizontal</enum>
-                      </property>
-                      <property name="sizeHint" >
-                       <size>
-                        <width>40</width>
-                        <height>20</height>
-                       </size>
-                      </property>
-                     </spacer>
-                    </item>
-                    <item>
-                     <widget class="QLabel" name="label_37" >
-                      <property name="text" >
-                       <string>7 (Best)</string>
-                      </property>
-                     </widget>
-                    </item>
-                   </layout>
+                   </widget>
                   </item>
                   <item>
-                   <widget class="QSlider" name="meSlider" >
-                    <property name="sizePolicy" >
-                     <sizepolicy>
-                      <hsizetype>5</hsizetype>
-                      <vsizetype>0</vsizetype>
-                      <horstretch>0</horstretch>
-                      <verstretch>0</verstretch>
-                     </sizepolicy>
+                   <spacer>
+                    <property name="orientation" >
+                     <enum>Qt::Horizontal</enum>
                     </property>
-                    <property name="minimumSize" >
+                    <property name="sizeHint" >
                      <size>
-                      <width>375</width>
-                      <height>0</height>
+                      <width>40</width>
+                      <height>20</height>
                      </size>
                     </property>
-                    <property name="minimum" >
-                     <number>1</number>
+                   </spacer>
+                  </item>
+                  <item>
+                   <widget class="QLabel" name="label_36" >
+                    <property name="text" >
+                     <string>Subpixel Refinement</string>
                     </property>
-                    <property name="maximum" >
-                     <number>7</number>
-                    </property>
-                    <property name="pageStep" >
-                     <number>1</number>
-                    </property>
-                    <property name="value" >
-                     <number>5</number>
-                    </property>
+                   </widget>
+                  </item>
+                  <item>
+                   <spacer>
                     <property name="orientation" >
                      <enum>Qt::Horizontal</enum>
                     </property>
-                    <property name="tickPosition" >
-                     <enum>QSlider::TicksBelow</enum>
+                    <property name="sizeHint" >
+                     <size>
+                      <width>40</width>
+                      <height>20</height>
+                     </size>
                     </property>
+                   </spacer>
+                  </item>
+                  <item>
+                   <widget class="QLabel" name="label_37" >
+                    <property name="text" >
+                     <string>9 (Best)</string>
+                    </property>
                    </widget>
                   </item>
                  </layout>
                 </item>
                 <item>
-                 <widget class="QSpinBox" name="meSpinBox" >
-                  <property name="maximum" >
-                   <number>7</number>
+                 <widget class="QSlider" name="meSlider" >
+                  <property name="sizePolicy" >
+                   <sizepolicy>
+                    <hsizetype>5</hsizetype>
+                    <vsizetype>0</vsizetype>
+                    <horstretch>0</horstretch>
+                    <verstretch>0</verstretch>
+                   </sizepolicy>
                   </property>
+                  <property name="minimumSize" >
+                   <size>
+                    <width>375</width>
+                    <height>0</height>
+                   </size>
+                  </property>
                   <property name="minimum" >
                    <number>1</number>
                   </property>
+                  <property name="maximum" >
+                   <number>9</number>
+                  </property>
+                  <property name="pageStep" >
+                   <number>1</number>
+                  </property>
                   <property name="value" >
                    <number>5</number>
                   </property>
+                  <property name="orientation" >
+                   <enum>Qt::Horizontal</enum>
+                  </property>
+                  <property name="tickPosition" >
+                   <enum>QSlider::TicksBelow</enum>
+                  </property>
                  </widget>
                 </item>
                </layout>
               </item>
               <item>
-               <spacer>
-                <property name="orientation" >
-                 <enum>Qt::Horizontal</enum>
+               <widget class="QSpinBox" name="meSpinBox" >
+                <property name="maximum" >
+                 <number>9</number>
                 </property>
-                <property name="sizeHint" >
-                 <size>
-                  <width>40</width>
-                  <height>20</height>
-                 </size>
+                <property name="minimum" >
+                 <number>1</number>
                 </property>
-               </spacer>
+                <property name="value" >
+                 <number>5</number>
+                </property>
+               </widget>
               </item>
              </layout>
             </item>
             <item>
-             <widget class="QCheckBox" name="rdoCheckBox" >
-              <property name="enabled" >
-               <bool>false</bool>
+             <spacer>
+              <property name="orientation" >
+               <enum>Qt::Horizontal</enum>
               </property>
-              <property name="text" >
-               <string>Rate Distortion Optimisation for B-frames</string>
+              <property name="sizeHint" >
+               <size>
+                <width>40</width>
+                <height>20</height>
+               </size>
               </property>
-              <property name="checked" >
-               <bool>false</bool>
-              </property>
-             </widget>
+             </spacer>
             </item>
            </layout>
           </item>
@@ -1210,7 +1192,7 @@
            <number>6</number>
           </property>
           <item>
-           <layout class="QVBoxLayout" >
+           <layout class="QHBoxLayout" >
             <property name="margin" >
              <number>0</number>
             </property>
@@ -1218,130 +1200,71 @@
              <number>6</number>
             </property>
             <item>
-             <layout class="QGridLayout" >
+             <widget class="QLabel" name="label_40" >
+              <property name="text" >
+               <string>Direct Prediction Mode:</string>
+              </property>
+             </widget>
+            </item>
+            <item>
+             <layout class="QHBoxLayout" >
               <property name="margin" >
                <number>0</number>
               </property>
               <property name="spacing" >
                <number>6</number>
               </property>
-              <item row="1" column="0" >
-               <widget class="QLabel" name="label_41" >
-                <property name="text" >
-                 <string>Direct Prediction Size:</string>
+              <item>
+               <widget class="QComboBox" name="predictModeComboBox" >
+                <property name="currentIndex" >
+                 <number>1</number>
                 </property>
-               </widget>
-              </item>
-              <item row="0" column="0" >
-               <widget class="QLabel" name="label_40" >
-                <property name="text" >
-                 <string>Direct Prediction Mode:</string>
-                </property>
-               </widget>
-              </item>
-              <item row="0" column="1" >
-               <layout class="QHBoxLayout" >
-                <property name="margin" >
-                 <number>0</number>
-                </property>
-                <property name="spacing" >
-                 <number>6</number>
-                </property>
                 <item>
-                 <widget class="QComboBox" name="predictModeComboBox" >
-                  <property name="currentIndex" >
-                   <number>1</number>
-                  </property>
-                  <item>
-                   <property name="text" >
-                    <string>None</string>
-                   </property>
-                  </item>
-                  <item>
-                   <property name="text" >
-                    <string>Spatial</string>
-                   </property>
-                  </item>
-                  <item>
-                   <property name="text" >
-                    <string>Temporal</string>
-                   </property>
-                  </item>
-                  <item>
-                   <property name="text" >
-                    <string>Auto</string>
-                   </property>
-                  </item>
-                 </widget>
+                 <property name="text" >
+                  <string>None</string>
+                 </property>
                 </item>
                 <item>
-                 <spacer>
-                  <property name="orientation" >
-                   <enum>Qt::Horizontal</enum>
-                  </property>
-                  <property name="sizeHint" >
-                   <size>
-                    <width>40</width>
-                    <height>20</height>
-                   </size>
-                  </property>
-                 </spacer>
+                 <property name="text" >
+                  <string>Spatial</string>
+                 </property>
                 </item>
-               </layout>
-              </item>
-              <item row="1" column="1" >
-               <layout class="QHBoxLayout" >
-                <property name="margin" >
-                 <number>0</number>
-                </property>
-                <property name="spacing" >
-                 <number>6</number>
-                </property>
                 <item>
-                 <widget class="QComboBox" name="predictSizeComboBox" >
-                  <item>
-                   <property name="text" >
-                    <string>Smallest Possible</string>
-                   </property>
-                  </item>
-                  <item>
-                   <property name="text" >
-                    <string>4x4</string>
-                   </property>
-                  </item>
-                  <item>
-                   <property name="text" >
-                    <string>8x8</string>
-                   </property>
-                  </item>
-                 </widget>
+                 <property name="text" >
+                  <string>Temporal</string>
+                 </property>
                 </item>
                 <item>
-                 <spacer>
-                  <property name="orientation" >
-                   <enum>Qt::Horizontal</enum>
-                  </property>
-                  <property name="sizeHint" >
-                   <size>
-                    <width>40</width>
-                    <height>20</height>
-                   </size>
-                  </property>
-                 </spacer>
+                 <property name="text" >
+                  <string>Auto</string>
+                 </property>
                 </item>
-               </layout>
+               </widget>
               </item>
+              <item>
+               <spacer>
+                <property name="orientation" >
+                 <enum>Qt::Horizontal</enum>
+                </property>
+                <property name="sizeHint" >
+                 <size>
+                  <width>40</width>
+                  <height>20</height>
+                 </size>
+                </property>
+               </spacer>
+              </item>
              </layout>
             </item>
-            <item>
-             <widget class="QCheckBox" name="weightedPredictCheckBox" >
-              <property name="text" >
-               <string>Weighted Prediction for B-frames</string>
-              </property>
-             </widget>
-            </item>
            </layout>
           </item>
+          <item>
+           <widget class="QCheckBox" name="weightedPredictCheckBox" >
+            <property name="text" >
+             <string>Weighted Prediction for B-frames</string>
+            </property>
+           </widget>
+          </item>
          </layout>
         </widget>
        </item>
@@ -2116,13 +2039,6 @@
            </widget>
           </item>
           <item>
-           <widget class="QCheckBox" name="bFrameMotionEstCheckBox" >
-            <property name="text" >
-             <string>Motion Estimation Before and After B-frames</string>
-            </property>
-           </widget>
-          </item>
-          <item>
            <layout class="QHBoxLayout" >
             <property name="margin" >
              <number>0</number>
@@ -4203,14 +4119,12 @@
   <tabstop>meMethodComboBox</tabstop>
   <tabstop>meSlider</tabstop>
   <tabstop>meSpinBox</tabstop>
-  <tabstop>rdoCheckBox</tabstop>
   <tabstop>mvRangeSpinBox</tabstop>
   <tabstop>mvLengthCheckBox</tabstop>
   <tabstop>mvLengthSpinBox</tabstop>
   <tabstop>minThreadBufferCheckBox</tabstop>
   <tabstop>minThreadBufferSpinBox</tabstop>
   <tabstop>predictModeComboBox</tabstop>
-  <tabstop>predictSizeComboBox</tabstop>
   <tabstop>weightedPredictCheckBox</tabstop>
   <tabstop>dct8x8CheckBox</tabstop>
   <tabstop>p8x8CheckBox</tabstop>
@@ -4234,7 +4148,6 @@
   <tabstop>scenecutDetectionCheckBox</tabstop>
   <tabstop>mixedRefsCheckBox</tabstop>
   <tabstop>chromaMotionEstCheckBox</tabstop>
-  <tabstop>bFrameMotionEstCheckBox</tabstop>
   <tabstop>trellisCheckBox</tabstop>
   <tabstop>trellisComboBox</tabstop>
   <tabstop>fastPSkipCheckBox</tabstop>

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/x264Options.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/x264Options.cpp	2009-11-26 20:33:11 UTC (rev 5565)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/x264Options.cpp	2009-11-26 21:24:49 UTC (rev 5566)
@@ -276,18 +276,6 @@
 		_param.i_scenecut_threshold = scenecutThreshold;
 }
 
-#if X264_BUILD < 67
-bool x264Options::getPreScenecutDetection(void)
-{
-	return _param.b_pre_scenecut;
-}
-
-void x264Options::setPreScenecutDetection(bool preScenecutDetection)
-{
-	_param.b_pre_scenecut = preScenecutDetection;
-}
-#endif
-
 unsigned int x264Options::getBFrames(void)
 {
 	return _param.i_bframe;
@@ -301,21 +289,13 @@
 
 unsigned int x264Options::getAdaptiveBFrameDecision(void)
 {
-#if X264_BUILD >= 63
 	return _param.i_bframe_adaptive;
-#else
-	return _param.b_bframe_adaptive;
-#endif
 }
 
 void x264Options::setAdaptiveBFrameDecision(unsigned int adaptiveBframeDecision)
 {
 	if (adaptiveBframeDecision <= 2)
-#if X264_BUILD >= 63
 		_param.i_bframe_adaptive = adaptiveBframeDecision;
-#else
-		_param.b_bframe_adaptive = adaptiveBframeDecision;
-#endif
 }
 
 int x264Options::getBFrameBias(void)
@@ -566,19 +546,6 @@
 		_param.analyse.i_direct_mv_pred = directPredictionMode;
 }
 
-#if X264_BUILD < 66
-int x264Options::getDirectPredictionSize(void)
-{
-	return _param.analyse.i_direct_8x8_inference;
-}
-
-void x264Options::setDirectPredictionSize(int directPredictionSize)
-{
-	if (directPredictionSize >= -1 && directPredictionSize <= 1)
-		_param.analyse.i_direct_8x8_inference = directPredictionSize;
-}
-#endif
-
 int x264Options::getChromaLumaQuantiserDifference(void)
 {
 	return _param.analyse.i_chroma_qp_offset;
@@ -644,18 +611,6 @@
 		_param.analyse.i_subpel_refine = subpixelRefinement;
 }
 
-#if X264_BUILD < 65
-bool x264Options::getBidirectionalMotionEstimation(void)
-{
-	return _param.analyse.b_bidir_me;
-}
-
-void x264Options::setBidirectionalMotionEstimation(bool bidirectionalMotionEstimation)
-{
-	_param.analyse.b_bidir_me = bidirectionalMotionEstimation;
-}
-#endif
-
 bool x264Options::getChromaMotionEstimation(void)
 {
 	return _param.analyse.b_chroma_me;
@@ -666,18 +621,6 @@
 	_param.analyse.b_chroma_me = chromaMotionEstimation;
 }
 
-#if X264_BUILD < 65
-bool x264Options::getBFrameRdo(void)
-{
-	return _param.analyse.b_bframe_rdo;
-}
-
-void x264Options::setBFrameRdo(bool bFrameRdo)
-{
-	_param.analyse.b_bframe_rdo = bFrameRdo;
-}
-#endif
-
 bool x264Options::getMixedReferences(void)
 {
 	return _param.analyse.b_mixed_references;
@@ -719,7 +662,6 @@
 	_param.analyse.b_dct_decimate = dctDecimate;
 }
 
-#if X264_BUILD >= 64
 float x264Options::getPsychoRdo(void)
 {
 	return _param.analyse.f_psy_rd;
@@ -730,7 +672,6 @@
 	if (psychoRdo >= 0 && psychoRdo <= 10)
 		_param.analyse.f_psy_rd = psychoRdo;
 }
-#endif
 
 unsigned int x264Options::getNoiseReduction(void)
 {
@@ -864,7 +805,6 @@
 		_param.rc.f_pb_factor = pbFrameQuantiser;
 }
 
-#if X264_BUILD >= 62
 unsigned int x264Options::getAdaptiveQuantiserMode(void)
 {
 	return _param.rc.i_aq_mode;
@@ -885,7 +825,6 @@
 {
 	_param.rc.f_aq_strength = adaptiveQuantiserStrength;
 }
-#endif
 
 #if X264_BUILD >= 69
 bool x264Options::getMbTree(void)
@@ -1142,9 +1081,6 @@
 	xmlNewChild(xmlNodeRoot, NULL, (xmlChar*)"gopMaximumSize", number2String(xmlBuffer, bufferSize, getGopMaximumSize()));
 	xmlNewChild(xmlNodeRoot, NULL, (xmlChar*)"gopMinimumSize", number2String(xmlBuffer, bufferSize, getGopMinimumSize()));
 	xmlNewChild(xmlNodeRoot, NULL, (xmlChar*)"scenecutThreshold", number2String(xmlBuffer, bufferSize, getScenecutThreshold()));
-#if X264_BUILD < 67
-	xmlNewChild(xmlNodeRoot, NULL, (xmlChar*)"preScenecutDetection", boolean2String(xmlBuffer, bufferSize, getPreScenecutDetection()));
-#endif
 	xmlNewChild(xmlNodeRoot, NULL, (xmlChar*)"bFrames", number2String(xmlBuffer, bufferSize, getBFrames()));
 	xmlNewChild(xmlNodeRoot, NULL, (xmlChar*)"adaptiveBframeDecision", number2String(xmlBuffer, bufferSize, getAdaptiveBFrameDecision()));
 	xmlNewChild(xmlNodeRoot, NULL, (xmlChar*)"bFrameBias", number2String(xmlBuffer, bufferSize, getBFrameBias()));
@@ -1232,25 +1168,6 @@
 			break;
 	}
 
-	xmlNewChild(xmlNodeChild, NULL, (xmlChar*)"directPredictionMode", xmlBuffer);
-
-#if X264_BUILD < 66
-	switch (getDirectPredictionSize())
-	{
-		case 0:
-			strcpy((char*)xmlBuffer, "4x4");
-			break;
-		case 1:
-			strcpy((char*)xmlBuffer, "8x8");
-			break;
-		case -1:
-			strcpy((char*)xmlBuffer, "smallest");
-			break;
-	}
-
-	xmlNewChild(xmlNodeChild, NULL, (xmlChar*)"directPredictionSize", xmlBuffer);
-#endif
-
 	xmlNewChild(xmlNodeChild, NULL, (xmlChar*)"chromaLumaQuantiserDifference", number2String(xmlBuffer, bufferSize, getChromaLumaQuantiserDifference()));
 
 	switch (getMotionEstimationMethod())
@@ -1264,11 +1181,9 @@
 		case X264_ME_ESA:
 			strcpy((char*)xmlBuffer, "exhaustive");
 			break;
-#if X264_BUILD >= 57
 		case X264_ME_TESA:
 			strcpy((char*)xmlBuffer, "hadamard");
 			break;
-#endif
 		case X264_ME_HEX:
 		default:
 			strcpy((char*)xmlBuffer, "hexagonal");
@@ -1280,13 +1195,7 @@
 	xmlNewChild(xmlNodeChild, NULL, (xmlChar*)"motionVectorLength", number2String(xmlBuffer, bufferSize, getMotionVectorLength()));
 	xmlNewChild(xmlNodeChild, NULL, (xmlChar*)"motionVectorThreadBuffer", number2String(xmlBuffer, bufferSize, getMotionVectorThreadBuffer()));
 	xmlNewChild(xmlNodeChild, NULL, (xmlChar*)"subpixelRefinement", number2String(xmlBuffer, bufferSize, getSubpixelRefinement()));
-#if X264_BUILD < 65
-	xmlNewChild(xmlNodeChild, NULL, (xmlChar*)"bidirectionalMotionEstimation", boolean2String(xmlBuffer, bufferSize, getBidirectionalMotionEstimation()));
-#endif
 	xmlNewChild(xmlNodeChild, NULL, (xmlChar*)"chromaMotionEstimation", boolean2String(xmlBuffer, bufferSize, getChromaMotionEstimation()));
-#if X264_BUILD < 65
-	xmlNewChild(xmlNodeChild, NULL, (xmlChar*)"bFrameRdo", boolean2String(xmlBuffer, bufferSize, getBFrameRdo()));
-#endif
 	xmlNewChild(xmlNodeChild, NULL, (xmlChar*)"mixedReferences", boolean2String(xmlBuffer, bufferSize, getMixedReferences()));
 
 	switch (getTrellis())
@@ -1321,7 +1230,6 @@
 	xmlNewChild(xmlNodeChild, NULL, (xmlChar*)"ipFrameQuantiser", number2String(xmlBuffer, bufferSize, getIpFrameQuantiser()));
 	xmlNewChild(xmlNodeChild, NULL, (xmlChar*)"pbFrameQuantiser", number2String(xmlBuffer, bufferSize, getPbFrameQuantiser()));
 
-#if X264_BUILD >= 62
 	switch (getAdaptiveQuantiserMode())
 	{
 		case X264_AQ_NONE:
@@ -1334,7 +1242,6 @@
 
 	xmlNewChild(xmlNodeChild, NULL, (xmlChar*)"adaptiveQuantiserMode", xmlBuffer);
 	xmlNewChild(xmlNodeChild, NULL, (xmlChar*)"adaptiveQuantiserStrength", number2String(xmlBuffer, bufferSize, getAdaptiveQuantiserStrength()));
-#endif
 
 #if X264_BUILD >= 69
 	xmlNewChild(xmlNodeChild, NULL, (xmlChar*)"mbTree", boolean2String(xmlBuffer, bufferSize, getMbTree()));
@@ -1404,10 +1311,6 @@
 				setGopMinimumSize(atoi(content));
 			else if (strcmp((char*)xmlChild->name, "scenecutThreshold") == 0)
 				setScenecutThreshold(atoi(content));
-#if X264_BUILD < 67
-			else if (strcmp((char*)xmlChild->name, "preScenecutDetection") == 0)
-				setPreScenecutDetection(string2Boolean(content));
-#endif
 			else if (strcmp((char*)xmlChild->name, "bFrames") == 0)
 				setBFrames(atoi(content));
 			else if (strcmp((char*)xmlChild->name, "adaptiveBframeDecision") == 0)
@@ -1675,21 +1578,6 @@
 
 				setDirectPredictionMode(directPredictionMode);
 			}
-#if X264_BUILD < 66
-			else if (strcmp((char*)xmlChild->name, "directPredictionSize") == 0)
-			{
-				int directPredictionSize = -1;
-
-				if (strcmp(content, "4x4") == 0)
-					directPredictionSize = 0;
-				else if (strcmp(content, "8x8") == 0)
-					directPredictionSize = 1;
-				else if (strcmp(content, "smallest") == 0)
-					directPredictionSize = -1;
-
-				setDirectPredictionSize(directPredictionSize);
-			}
-#endif
 			else if (strcmp((char*)xmlChild->name, "chromaLumaQuantiserDifference") == 0)
 				setChromaLumaQuantiserDifference(atoi(content));
 			else if (strcmp((char*)xmlChild->name, "motionEstimationMethod") == 0)
@@ -1704,10 +1592,8 @@
 					motionEstimationMethod = X264_ME_UMH;
 				else if (strcmp(content, "exhaustive") == 0)
 					motionEstimationMethod = X264_ME_ESA;
-#if X264_BUILD >= 57
 				else if (strcmp(content, "hadamard") == 0)
 					motionEstimationMethod = X264_ME_TESA;
-#endif
 
 				setMotionEstimationMethod(motionEstimationMethod);
 			}
@@ -1719,16 +1605,8 @@
 				setMotionVectorThreadBuffer(atoi(content));
 			else if (strcmp((char*)xmlChild->name, "subpixelRefinement") == 0)
 				setSubpixelRefinement(atoi(content));
-#if X264_BUILD < 65
-			else if (strcmp((char*)xmlChild->name, "bidirectionalMotionEstimation") == 0)
-				setBidirectionalMotionEstimation(string2Boolean(content));
-#endif
 			else if (strcmp((char*)xmlChild->name, "chromaMotionEstimation") == 0)
 				setChromaMotionEstimation(string2Boolean(content));
-#if X264_BUILD < 65
-			else if (strcmp((char*)xmlChild->name, "bFrameRdo") == 0)
-				setBFrameRdo(string2Boolean(content));
-#endif
 			else if (strcmp((char*)xmlChild->name, "mixedReferences") == 0)
 				setMixedReferences(string2Boolean(content));
 			else if (strcmp((char*)xmlChild->name, "trellis") == 0)
@@ -1788,7 +1666,6 @@
 				setIpFrameQuantiser(string2Float(content));
 			else if (strcmp((char*)xmlChild->name, "pbFrameQuantiser") == 0)
 				setPbFrameQuantiser(string2Float(content));
-#if X264_BUILD >= 62
 			else if (strcmp((char*)xmlChild->name, "adaptiveQuantiserMode") == 0)
 			{
 				int adaptiveQuantiserMode = X264_AQ_VARIANCE;
@@ -1802,7 +1679,6 @@
 			}
 			else if (strcmp((char*)xmlChild->name, "adaptiveQuantiserStrength") == 0)
 				setAdaptiveQuantiserStrength(string2Float(content));
-#endif
 #if X264_BUILD >= 69
 			else if (strcmp((char*)xmlChild->name, "mbTree") == 0)
 				setMbTree(string2Boolean(content));

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/x264Options.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/x264Options.h	2009-11-26 20:33:11 UTC (rev 5565)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/x264Options.h	2009-11-26 21:24:49 UTC (rev 5566)
@@ -109,11 +109,6 @@
 	unsigned int getScenecutThreshold(void);
 	void setScenecutThreshold(unsigned int scenecutThreshold);
 
-#if X264_BUILD < 67
-	bool getPreScenecutDetection(void);
-	void setPreScenecutDetection(bool preScenecutDetection);
-#endif
-
 	unsigned int getBFrames(void);
 	void setBFrames(unsigned int bFrames);
 
@@ -186,11 +181,6 @@
 	unsigned int getDirectPredictionMode(void);
 	void setDirectPredictionMode(unsigned int directPredictionMode);
 
-#if X264_BUILD < 66
-	int getDirectPredictionSize(void);
-	void setDirectPredictionSize(int directPredictionSize);
-#endif
-
 	int getChromaLumaQuantiserDifference(void);
 	void setChromaLumaQuantiserDifference(int chromaLumaQuantiserDifference);
 
@@ -209,19 +199,9 @@
 	unsigned int getSubpixelRefinement(void);
 	void setSubpixelRefinement(unsigned int subpixelRefinement);
 
-#if X264_BUILD < 65
-	bool getBidirectionalMotionEstimation(void);
-	void setBidirectionalMotionEstimation(bool bidirectionalMotionEstimation);
-#endif
-
 	bool getChromaMotionEstimation(void);
 	void setChromaMotionEstimation(bool chromaMotionEstimation);
 
-#if X264_BUILD < 65
-	bool getBFrameRdo(void);
-	void setBFrameRdo(bool bFrameRdo);
-#endif
-
 	bool getMixedReferences(void);
 	void setMixedReferences(bool mixedReferences);
 
@@ -234,10 +214,8 @@
 	bool getDctDecimate(void);
 	void setDctDecimate(bool dctDecimate);
 
-#if X264_BUILD >= 64
 	float getPsychoRdo(void);
 	void setPsychoRdo(float psychoRdo);
-#endif
 
 	unsigned int getNoiseReduction(void);
 	void setNoiseReduction(unsigned int noiseReduction);
@@ -281,13 +259,11 @@
 	float getPbFrameQuantiser(void);
 	void setPbFrameQuantiser(float pbFrameQuantiser);
 
-#if X264_BUILD >= 62
 	unsigned int getAdaptiveQuantiserMode(void);
 	void setAdaptiveQuantiserMode(unsigned int adaptiveQuantiserMode);
 
 	float getAdaptiveQuantiserStrength(void);
 	void setAdaptiveQuantiserStrength(float adaptiveQuantiserStrength);
-#endif
 
 #if X264_BUILD >= 69
 	bool getMbTree(void);

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/x264Param.xsd
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/x264Param.xsd	2009-11-26 20:33:11 UTC (rev 5565)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/x264Param.xsd	2009-11-26 21:24:49 UTC (rev 5566)
@@ -177,6 +177,7 @@
                   </xs:restriction>
                 </xs:simpleType>
               </xs:element>
+              <!-- preScenecutDetection deprecated core 67 -->
               <xs:element name="preScenecutDetection" type="xs:boolean" minOccurs="0"/>
               <xs:element name="bFrames" minOccurs="0">
                 <xs:simpleType>
@@ -293,6 +294,7 @@
                         </xs:restriction>
                       </xs:simpleType>
                     </xs:element>
+                    <!-- directPredictionSize deprecated core 66 -->
                     <xs:element name="directPredictionSize" minOccurs="0">
                       <xs:simpleType>
                         <xs:restriction base="xs:string">
@@ -346,8 +348,10 @@
                         </xs:restriction>
                       </xs:simpleType>
                     </xs:element>
+                    <!-- bidirectionalMotionEstimation deprecated core 65 -->
                     <xs:element name="bidirectionalMotionEstimation" type="xs:boolean" minOccurs="0"/>
                     <xs:element name="chromaMotionEstimation" type="xs:boolean" minOccurs="0"/>
+                    <!-- bFrameRdo deprecated core 65 -->
                     <xs:element name="bFrameRdo" type="xs:boolean" minOccurs="0"/>
                     <xs:element name="mixedReferences" type="xs:boolean" minOccurs="0"/>
                     <xs:element name="trellis" minOccurs="0">



From gruntster at mail.berlios.de  Thu Nov 26 22:52:59 2009
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Thu, 26 Nov 2009 22:52:59 +0100
Subject: [Avidemux-svn-commit] r5567 - in
	branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264:
	. qt4
Message-ID: <200911262152.nAQLqxMH004860@sheep.berlios.de>

Author: gruntster
Date: 2009-11-26 22:52:53 +0100 (Thu, 26 Nov 2009)
New Revision: 5567

Modified:
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/x264Options.cpp
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/x264Options.h
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/x264Param.xsd
Log:
[x264] add frametype lookahead option for Qt interface

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp	2009-11-26 21:24:49 UTC (rev 5566)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp	2009-11-26 21:52:53 UTC (rev 5567)
@@ -74,6 +74,9 @@
 	connect(ui.mbTreeCheckBox, SIGNAL(toggled(bool)), this, SLOT(mbTreeCheckBox_toggled(bool)));
 #else
 	ui.mbTreeCheckBox->setVisible(false);
+	ui.lblLookahead->setVisible(false);
+	ui.lookaheadSpinBox->setVisible(false);
+	ui.lblLookaheadFrames>setVisible(false);
 #endif
 
 	ui.sarAsInputLabel->setText(QString("%1:%2").arg(properties->parWidth).arg(properties->parHeight));
@@ -600,6 +603,7 @@
 
 #if X264_BUILD >= 69
 	ui.mbTreeCheckBox->setChecked(options->getMbTree());
+	ui.lookaheadSpinBox->setValue(options->getFrametypeLookahead());
 #endif
 
 	if (options->getSarAsInput())
@@ -818,6 +822,7 @@
 
 #if X264_BUILD >= 69
 	options->setMbTree(ui.mbTreeCheckBox->isChecked());
+	options->setFrametypeLookahead(ui.lookaheadSpinBox->value());
 #endif
 
 	options->setSarAsInput(ui.sarAsInputRadioButton->isChecked());

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui	2009-11-26 21:24:49 UTC (rev 5566)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui	2009-11-26 21:52:53 UTC (rev 5567)
@@ -484,6 +484,50 @@
             </property>
            </widget>
           </item>
+          <item>
+           <layout class="QHBoxLayout" >
+            <property name="margin" >
+             <number>0</number>
+            </property>
+            <property name="spacing" >
+             <number>6</number>
+            </property>
+            <item>
+             <widget class="QLabel" name="lblLookahead" >
+              <property name="text" >
+               <string>Frametype Lookahead:</string>
+              </property>
+             </widget>
+            </item>
+            <item>
+             <widget class="QSpinBox" name="lookaheadSpinBox" >
+              <property name="maximum" >
+               <number>250</number>
+              </property>
+             </widget>
+            </item>
+            <item>
+             <widget class="QLabel" name="lblLookaheadFrames" >
+              <property name="text" >
+               <string>frames</string>
+              </property>
+             </widget>
+            </item>
+            <item>
+             <spacer>
+              <property name="orientation" >
+               <enum>Qt::Horizontal</enum>
+              </property>
+              <property name="sizeHint" >
+               <size>
+                <width>40</width>
+                <height>20</height>
+               </size>
+              </property>
+             </spacer>
+            </item>
+           </layout>
+          </item>
          </layout>
         </widget>
        </item>
@@ -4106,6 +4150,7 @@
   <tabstop>quantiserSlider</tabstop>
   <tabstop>quantiserSpinBox</tabstop>
   <tabstop>mbTreeCheckBox</tabstop>
+  <tabstop>lookaheadSpinBox</tabstop>
   <tabstop>sarCustomRadioButton</tabstop>
   <tabstop>sarCustomSpinBox1</tabstop>
   <tabstop>sarCustomSpinBox2</tabstop>

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/x264Options.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/x264Options.cpp	2009-11-26 21:24:49 UTC (rev 5566)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/x264Options.cpp	2009-11-26 21:52:53 UTC (rev 5567)
@@ -836,6 +836,17 @@
 {
 	_param.rc.b_mb_tree = mbTree;
 }
+
+unsigned int x264Options::getFrametypeLookahead(void)
+{
+	return _param.rc.i_lookahead;
+}
+
+void x264Options::setFrametypeLookahead(unsigned int frames)
+{
+	if (frames <= 250)
+		_param.rc.i_lookahead = frames;
+}
 #endif
 
 float x264Options::getQuantiserCurveCompression(void)
@@ -1245,6 +1256,7 @@
 
 #if X264_BUILD >= 69
 	xmlNewChild(xmlNodeChild, NULL, (xmlChar*)"mbTree", boolean2String(xmlBuffer, bufferSize, getMbTree()));
+	xmlNewChild(xmlNodeChild, NULL, (xmlChar*)"frametypeLookahead", number2String(xmlBuffer, bufferSize, getFrametypeLookahead()));
 #endif
 
 	xmlNewChild(xmlNodeChild, NULL, (xmlChar*)"quantiserCurveCompression", number2String(xmlBuffer, bufferSize, getQuantiserCurveCompression()));
@@ -1682,6 +1694,8 @@
 #if X264_BUILD >= 69
 			else if (strcmp((char*)xmlChild->name, "mbTree") == 0)
 				setMbTree(string2Boolean(content));
+			else if (strcmp((char*)xmlChild->name, "frametypeLookahead") == 0)
+				setFrametypeLookahead(atoi(content));
 #endif
 			else if (strcmp((char*)xmlChild->name, "quantiserCurveCompression") == 0)
 				setQuantiserCurveCompression(string2Float(content));

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/x264Options.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/x264Options.h	2009-11-26 21:24:49 UTC (rev 5566)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/x264Options.h	2009-11-26 21:52:53 UTC (rev 5567)
@@ -268,6 +268,9 @@
 #if X264_BUILD >= 69
 	bool getMbTree(void);
 	void setMbTree(bool mbTree);
+
+	unsigned int getFrametypeLookahead(void);
+	void setFrametypeLookahead(unsigned int frames);
 #endif
 
 	float getQuantiserCurveCompression(void);

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/x264Param.xsd
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/x264Param.xsd	2009-11-26 21:24:49 UTC (rev 5566)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/x264Param.xsd	2009-11-26 21:52:53 UTC (rev 5567)
@@ -485,6 +485,14 @@
                     </xs:element>
                     <xs:element name="adaptiveQuantiserStrength" type="xs:float" minOccurs="0"/>
                     <xs:element name="mbTree" type="xs:boolean" minOccurs="0"/>
+                    <xs:element name="frametypeLookahead" minOccurs="0">
+                      <xs:simpleType>
+                        <xs:restriction base="xs:integer">
+                          <xs:minInclusive value="0"/>
+                          <xs:maxInclusive value="250"/>
+                        </xs:restriction>
+                      </xs:simpleType>
+                    </xs:element>
                     <xs:element name="quantiserCurveCompression" minOccurs="0">
                       <xs:simpleType>
                         <xs:restriction base="xs:float">



From gruntster at mail.berlios.de  Sat Nov 28 12:05:07 2009
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Sat, 28 Nov 2009 12:05:07 +0100
Subject: [Avidemux-svn-commit] r5568 -
	branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264
Message-ID: <200911281105.nASB57g9016034@sheep.berlios.de>

Author: gruntster
Date: 2009-11-28 12:05:02 +0100 (Sat, 28 Nov 2009)
New Revision: 5568

Modified:
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/x264Options.cpp
Log:
[x264] save direct prediction mode (regression introduced r5566)

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/x264Options.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/x264Options.cpp	2009-11-26 21:52:53 UTC (rev 5567)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/x264Options.cpp	2009-11-28 11:05:02 UTC (rev 5568)
@@ -1179,6 +1179,7 @@
 			break;
 	}
 
+	xmlNewChild(xmlNodeChild, NULL, (xmlChar*)"directPredictionMode", xmlBuffer);
 	xmlNewChild(xmlNodeChild, NULL, (xmlChar*)"chromaLumaQuantiserDifference", number2String(xmlBuffer, bufferSize, getChromaLumaQuantiserDifference()));
 
 	switch (getMotionEstimationMethod())



From mean at mail.berlios.de  Sat Nov 28 14:48:00 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sat, 28 Nov 2009 14:48:00 +0100
Subject: [Avidemux-svn-commit] r5569 -
	branches/avidemux_2.6_branch_mean/avidemux_core/ADM_core/src
Message-ID: <200911281348.nASDm0hL013350@sheep.berlios.de>

Author: mean
Date: 2009-11-28 14:48:00 +0100 (Sat, 28 Nov 2009)
New Revision: 5569

Modified:
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_core/src/ADM_dynamicLoading.cpp
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_core/src/ADM_fileio.cpp
Log:
[win32] Merge gruntster fixes from 2.5(wchar path)

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_core/src/ADM_dynamicLoading.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_core/src/ADM_dynamicLoading.cpp	2009-11-28 11:05:02 UTC (rev 5568)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_core/src/ADM_dynamicLoading.cpp	2009-11-28 13:48:00 UTC (rev 5569)
@@ -26,6 +26,10 @@
 
 #include "ADM_default.h"
 #include "ADM_dynamicLoading.h"
+#ifdef __WIN32
+extern int utf8StringToWideChar(const char *utf8String, int utf8StringLength, wchar_t *wideCharString);
+#endif
+
 
 // By default the library is silent, being part of ADM_core cannot use the debug_id funcs
 #if 1
@@ -73,7 +77,13 @@
 bool ADM_LibWrapper::loadLibrary(const char* path)
 {
 #ifdef __WIN32
-	hinstLib = LoadLibrary(path);
+	int pathLength = utf8StringToWideChar(path, -1, NULL);
+	wchar_t wcPath[pathLength];
+
+	utf8StringToWideChar(path, -1, wcPath);
+
+	hinstLib = LoadLibraryW(wcPath);
+
 
 	if (hinstLib == NULL)
 	{

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_core/src/ADM_fileio.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_core/src/ADM_fileio.cpp	2009-11-28 11:05:02 UTC (rev 5568)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_core/src/ADM_fileio.cpp	2009-11-28 13:48:00 UTC (rev 5569)
@@ -272,10 +272,16 @@
 char *ADM_getInstallRelativePath(const char *base1, const char *base2,const char *base3)
 {
 #ifdef __WIN32
-	char moduleName[MAX_PATH];
+       	wchar_t wcModuleName[MAX_PATH];
 
-	GetModuleFileName(0, moduleName, sizeof(moduleName) / sizeof(char));
+	GetModuleFileNameW(0, wcModuleName, sizeof(wcModuleName) / sizeof(wchar_t));
 
+	int len = wideCharStringToUtf8(wcModuleName, -1, NULL);
+	char moduleName[len];
+
+	wideCharStringToUtf8(wcModuleName, -1, moduleName);
+
+
 	char *slash = strrchr(moduleName, '\\');
 		
 	if (slash)



From mean at mail.berlios.de  Sat Nov 28 14:48:04 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sat, 28 Nov 2009 14:48:04 +0100
Subject: [Avidemux-svn-commit] r5571 - in
	branches/avidemux_2.6_branch_mean/avidemux/common: ADM_editor
	ADM_videoFilter2/include ADM_videoFilter2/src
Message-ID: <200911281348.nASDm44i013370@sheep.berlios.de>

Author: mean
Date: 2009-11-28 14:48:03 +0100 (Sat, 28 Nov 2009)
New Revision: 5571

Modified:
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edLoadSave.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoFilter2/include/ADM_videoFilterApi.h
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoFilter2/include/ADM_videoFilters.h
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoFilter2/src/ADM_pluginLoad.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoFilter2/src/ADM_videoFilters.cpp
Log:
[VideoFilter] Add load save using the new parameter scheme

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edLoadSave.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edLoadSave.cpp	2009-11-28 13:48:02 UTC (rev 5570)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edLoadSave.cpp	2009-11-28 13:48:03 UTC (rev 5571)
@@ -25,8 +25,6 @@
 #include "audioEncoderApi.h"
 #include "DIA_coreToolkit.h"
 #include "ADM_editor/ADM_edit.hxx"
-//#include "ADM_videoFilter.h"
-//#include "ADM_videoFilter_internal.h"
 #include "ADM_videoEncoderApi.h"
 #include "ADM_paramList.h"
 #include "prefs.h"
@@ -34,8 +32,9 @@
 #include "ADM_muxerProto.h"
 #include "ADM_audioFilterInterface.h"
 #include "GUI_ui.h"
+#include "ADM_videoFilters.h"
+#include "ADM_videoFilterApi.h"
 
-
 /**
     \fn        saveAsScript
     \brief     Save the project as a script
@@ -105,10 +104,10 @@
 // postproc
 //___________________________
 
-        uint32_t pptype, ppstrength,ppswap;
-                video_body->getPostProc( &pptype, &ppstrength, &ppswap);
-                qfprintf(fd,"\n//** Postproc **\n");
-                qfprintf(fd,"app.video.setPostProc(%d,%d,%d);\n",pptype,ppstrength,ppswap);
+uint32_t pptype, ppstrength,ppswap;
+        video_body->getPostProc( &pptype, &ppstrength, &ppswap);
+        qfprintf(fd,"\n//** Postproc **\n");
+        qfprintf(fd,"app.video.setPostProc(%d,%d,%d);\n",pptype,ppstrength,ppswap);
 
 // fps
 #if 0
@@ -119,10 +118,6 @@
 		qfprintf(fd,"\napp.video.setFps1000(%u);\n",info.fps1000);
 	}
 #endif
-// Filter
-//___________________________
-        qfprintf(fd,"\n//** Filters **\n");
-//        filterSaveScriptJS(fd);
 
 // Video codec
 //___________________________
@@ -147,6 +142,34 @@
         }
         qfprintf(fd,");\n");
 
+// Video filters....
+//______________________________________________
+    qfprintf(fd,"\n//** Filters **\n");
+    int nbFilter=ADM_vf_getSize();
+    for(int i=0;i<nbFilter;i++)
+    {
+        // Grab its name...
+        uint32_t tag=ADM_vf_getTag(i);
+        qfprintf(fd, "app.video.addFilter(\"%s\"", ADM_vf_getInternalNameFromTag(tag));
+        // Now get the filter settings (if any)
+        CONFcouple *c=NULL;
+        ADM_vf_getConfigurationFromIndex(i,&c);
+        if(c)
+        {
+            uint32_t n=c->getSize();
+            for(int j=0;j<n;j++)
+            {
+                char *name,*value;
+                c->getInternalName(j,&name,&value);
+                qfprintf(fd,",\"%s=%s\"",name,value);
+            }
+            delete c;
+            c=NULL;
+        }
+        qfprintf(fd, ");\n");
+    }
+
+
 // Audio Source
 //______________________________________________
 

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoFilter2/include/ADM_videoFilterApi.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoFilter2/include/ADM_videoFilterApi.h	2009-11-28 13:48:02 UTC (rev 5570)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoFilter2/include/ADM_videoFilterApi.h	2009-11-28 13:48:03 UTC (rev 5571)
@@ -24,7 +24,7 @@
 
 bool        ADM_vf_getFilterInfo(VF_CATEGORY cat,int filter, const char **name,const char **desc, uint32_t *major,uint32_t *minor,uint32_t *patch);
 const char *ADM_vf_getDisplayNameFromTag(uint32_t tag);
-
+const char *ADM_vf_getInternalNameFromTag(uint32_t tag);
 ADM_coreVideoFilter *ADM_vf_createFromTag(uint32_t tag,ADM_coreVideoFilter *last,CONFcouple *couples);
 
 #endif //ADM_VIDEO_FILTER_API_H

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoFilter2/include/ADM_videoFilters.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoFilter2/include/ADM_videoFilters.h	2009-11-28 13:48:02 UTC (rev 5570)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoFilter2/include/ADM_videoFilters.h	2009-11-28 13:48:03 UTC (rev 5571)
@@ -32,6 +32,7 @@
 uint32_t                ADM_vf_getSize(void);
 ADM_coreVideoFilter     *ADM_vf_getInstance(int index);
 uint32_t                ADM_vf_getTag(int index);
+bool                    ADM_vf_getConfigurationFromIndex(int index,CONFcouple **c);
 
 bool                    ADM_vf_addFilterFromTag(uint32_t tag);
 bool                    ADM_vf_removeFilterAtIndex(int index);

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoFilter2/src/ADM_pluginLoad.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoFilter2/src/ADM_pluginLoad.cpp	2009-11-28 13:48:02 UTC (rev 5570)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoFilter2/src/ADM_pluginLoad.cpp	2009-11-28 13:48:03 UTC (rev 5571)
@@ -244,4 +244,14 @@
      ADM_vf_plugin *plugin=ADM_vf_getPluginFromTag(tag);
      return plugin->create(last,couples);
 }
+/**
+    \fn ADM_vf_getNameFromTag
+    \brief return the uniq name of a filter from the tag , which can vary from one run to another
+*/
+const char *ADM_vf_getInternalNameFromTag(uint32_t tag)
+{
+  ADM_vf_plugin *plugin=ADM_vf_getPluginFromTag(tag);
+    return plugin->getInternalName();
+}
+
 //EOF

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoFilter2/src/ADM_videoFilters.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoFilter2/src/ADM_videoFilters.cpp	2009-11-28 13:48:02 UTC (rev 5570)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoFilter2/src/ADM_videoFilters.cpp	2009-11-28 13:48:03 UTC (rev 5571)
@@ -231,4 +231,15 @@
     chain->clear();
     return true;
 }
+/**
+    \fn ADM_vf_getConfigurationFromIndex
+*/
+bool ADM_vf_getConfigurationFromIndex(int index,CONFcouple **c)
+{
+        ADM_assert(index<ADM_VideoFilters.size());
+            ADM_coreVideoFilter *old=ADM_VideoFilters[index].instance;
+            old->getCoupledConf(c);
+
+        return true;
+}
 // EOF
\ No newline at end of file



From mean at mail.berlios.de  Sat Nov 28 14:48:05 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sat, 28 Nov 2009 14:48:05 +0100
Subject: [Avidemux-svn-commit] r5572 -
	branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor
Message-ID: <200911281348.nASDm53a013380@sheep.berlios.de>

Author: mean
Date: 2009-11-28 14:48:05 +0100 (Sat, 28 Nov 2009)
New Revision: 5572

Modified:
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edLoadSave.cpp
Log:
[Editor] Factorize some project generation code

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edLoadSave.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edLoadSave.cpp	2009-11-28 13:48:03 UTC (rev 5571)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edLoadSave.cpp	2009-11-28 13:48:05 UTC (rev 5572)
@@ -34,8 +34,25 @@
 #include "GUI_ui.h"
 #include "ADM_videoFilters.h"
 #include "ADM_videoFilterApi.h"
-
 /**
+    \fn dumpConf
+    \brief dump configuration as name=value pairs
+*/
+static void dumpConf(FILE *fd,CONFcouple *c)
+{
+ if(!c) return;
+        
+    uint32_t n=c->getSize();
+    for(int j=0;j<n;j++)
+    {
+        char *name,*value;
+        c->getInternalName(j,&name,&value);
+        qfprintf(fd,",\"%s=%s\"",name,value);
+    }
+    delete c;
+    c=NULL;
+}
+/**
     \fn        saveAsScript
     \brief     Save the project as a script
 */
@@ -127,19 +144,7 @@
     
         qfprintf(fd, "app.video.codec(\"%s\"", videoEncoder6_GetCurrentEncoderName());
         videoEncoder6_GetConfiguration(&couples);
-        if(couples)
-        {
-            uint32_t n=couples->getSize();
-        
-            for(int i=0;i<n;i++)
-            {
-                char *name,*value;
-                couples->getInternalName(i,&name,&value);
-                qfprintf(fd,",\"%s=%s\"",name,value);
-            }
-            delete couples;
-            couples=NULL;
-        }
+        dumpConf(fd,couples);
         qfprintf(fd,");\n");
 
 // Video filters....
@@ -154,18 +159,7 @@
         // Now get the filter settings (if any)
         CONFcouple *c=NULL;
         ADM_vf_getConfigurationFromIndex(i,&c);
-        if(c)
-        {
-            uint32_t n=c->getSize();
-            for(int j=0;j<n;j++)
-            {
-                char *name,*value;
-                c->getInternalName(j,&name,&value);
-                qfprintf(fd,",\"%s=%s\"",name,value);
-            }
-            delete c;
-            c=NULL;
-        }
+        dumpConf(fd,c);
         qfprintf(fd, ");\n");
     }
 
@@ -206,19 +200,7 @@
    couples=NULL;
    getAudioExtraConf(&bitrate,&couples);
     qfprintf(fd,"app.audio.codec(\"%s\",%d",audioCodecGetName(),bitrate); 
-   if(couples)
-    {
-        uint32_t n=couples->getSize();
-        
-        for(int i=0;i<n;i++)
-        {
-            char *name,*value;
-            couples->getInternalName(i,&name,&value);
-            qfprintf(fd,",\"%s=%s\"",name,value);
-        }
-        delete couples;
-        couples=NULL;
-    }
+    dumpConf(fd,couples);
     qfprintf(fd,");\n");
 
 
@@ -255,20 +237,7 @@
         ADM_mx_getExtraConf( index,&containerConf);
         
         qfprintf(fd,"app.setContainer(\"%s\"",containerName); 
-        if(containerConf)
-        {
-            uint32_t n=containerConf->getSize();
-            
-            for(int i=0;i<n;i++)
-            {
-                char *name,*value;
-                containerConf->getInternalName(i,&name,&value);
-                qfprintf(fd,",\"%s=%s\"",name,value);
-            }
-         
-            delete couples;
-            couples=NULL;
-        }
+        dumpConf(fd,containerConf);
         qfprintf(fd,");\n");
   // -------- /Muxer -----------------------
   if(outputname)



From mean at mail.berlios.de  Sat Nov 28 14:48:02 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sat, 28 Nov 2009 14:48:02 +0100
Subject: [Avidemux-svn-commit] r5570 -
	branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavcodec
Message-ID: <200911281348.nASDm2DE013360@sheep.berlios.de>

Author: mean
Date: 2009-11-28 14:48:02 +0100 (Sat, 28 Nov 2009)
New Revision: 5570

Modified:
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavcodec/ac3dec.c
Log:
[FFmpeg] Eac3 take 2

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavcodec/ac3dec.c
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavcodec/ac3dec.c	2009-11-28 13:48:00 UTC (rev 5569)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavcodec/ac3dec.c	2009-11-28 13:48:02 UTC (rev 5570)
@@ -848,8 +848,8 @@
                                   ff_eac3_default_cpl_band_struct,
                                   &s->num_cpl_bands, s->cpl_band_sizes);
 */
-            decode_band_structure(gbc, blk, s->eac3, 0,
-                                  s->spx_start_subband, spx_end_subband,
+            decode_band_structure(gbc, blk, s->eac3, 0, s->spx_start_subband,
+                                  spx_end_subband,
                                   ff_eac3_default_spx_band_struct,
                                   /*s->spx_band_struct,*/ &s->num_spx_bands,
                                   s->spx_band_sizes);



From mean at mail.berlios.de  Sat Nov 28 14:48:08 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sat, 28 Nov 2009 14:48:08 +0100
Subject: [Avidemux-svn-commit] r5574 -
	branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_filters
Message-ID: <200911281348.nASDm8lL013400@sheep.berlios.de>

Author: mean
Date: 2009-11-28 14:48:08 +0100 (Sat, 28 Nov 2009)
New Revision: 5574

Modified:
   branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_filters/Q_mainfilter.cpp
Log:
[Filter/script] save/load video filters from js

Modified: branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_filters/Q_mainfilter.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_filters/Q_mainfilter.cpp	2009-11-28 13:48:06 UTC (rev 5573)
+++ branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_filters/Q_mainfilter.cpp	2009-11-28 13:48:08 UTC (rev 5574)
@@ -148,7 +148,7 @@
      tag=index; //filterCategories[family][index]->tag;
      ADM_info("Tag : %d->family=%d, index=%d\n",itag,family,tag);
 
-     if(true==ADM_vf_addFilterFromTag(itag))
+     if(true==ADM_vf_addFilterFromTag(itag,NULL,true))
         {
             buildActiveFilterList();
             setSelected(nb_active_filter-1);



From mean at mail.berlios.de  Sat Nov 28 14:48:10 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sat, 28 Nov 2009 14:48:10 +0100
Subject: [Avidemux-svn-commit] r5575 -
	branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script
Message-ID: <200911281348.nASDmAGs013410@sheep.berlios.de>

Author: mean
Date: 2009-11-28 14:48:09 +0100 (Sat, 28 Nov 2009)
New Revision: 5575

Modified:
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script/ADM_JSAvidemux.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script/ADM_JSAvidemuxAudio.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script/ADM_JSAvidemuxVideo.cpp
Log:
[Filter/script] save/load video filters from js

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script/ADM_JSAvidemux.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script/ADM_JSAvidemux.cpp	2009-11-28 13:48:08 UTC (rev 5574)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script/ADM_JSAvidemux.cpp	2009-11-28 13:48:09 UTC (rev 5575)
@@ -559,6 +559,7 @@
             {
                 *rval = BOOLEAN_TO_JSVAL( ADM_mx_setExtraConf(idx,c));
             }
+            if(c) delete c;
         }
         /* Now lockup extra params....*/
         

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script/ADM_JSAvidemuxAudio.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script/ADM_JSAvidemuxAudio.cpp	2009-11-28 13:48:08 UTC (rev 5574)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script/ADM_JSAvidemuxAudio.cpp	2009-11-28 13:48:09 UTC (rev 5575)
@@ -403,9 +403,10 @@
                 int nb=argc-2;
                 jsArgToConfCouple( nb,&c,  argv+2);
             }
-
             *rval = BOOLEAN_TO_JSVAL(setAudioExtraConf(bitrate,c));
+            if(c) delete c;
         }
+
         // end set bitrate
         leaveLock();
         return JS_TRUE;

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script/ADM_JSAvidemuxVideo.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script/ADM_JSAvidemuxVideo.cpp	2009-11-28 13:48:08 UTC (rev 5574)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script/ADM_JSAvidemuxVideo.cpp	2009-11-28 13:48:09 UTC (rev 5575)
@@ -25,6 +25,8 @@
 #include "ADM_commonUI/GUI_ui.h"
 #include "ADM_script/ADM_container.h"
 #include "ADM_videoEncoderApi.h"
+#include "ADM_videoFilterApi.h"
+#include "ADM_videoFilters.h"
 
 //extern VF_FILTERS filterGetTagFromName(const char *inname);
 extern uint8_t A_ListAllBlackFrames( char *file );
@@ -215,38 +217,24 @@
 JSBool ADM_JSAvidemuxVideo::AddFilter(JSContext *cx, JSObject *obj, uintN argc, 
                                        jsval *argv, jsval *rval)
 {// begin AddFilter
-#if 0
-        VF_FILTERS filter;
 
+        uint32_t filterTag;
+
         // default return value
         *rval = BOOLEAN_TO_JSVAL(false);
         if(argc == 0)
                 return JS_FALSE;
+        char *filterName=JS_GetStringBytes(JSVAL_TO_STRING(argv[0]));
+        filterTag = ADM_vf_getTagFromInternalName(filterName);
+        ADM_info("Adding Filter %s -> %"LU"... \n",filterName,filterTag);
 
-        filter = filterGetTagFromName(JS_GetStringBytes(JSVAL_TO_STRING(argv[0])));
-        printf("Adding Filter \"%d\"... \n",filter);
-
-        Arg args[argc];
-        char *v;
-        for(int i=0;i<argc;i++) 
-        {
-                args[i].type=APM_STRING;
-                if(JSVAL_IS_STRING(argv[i]) == false)
-                {
-                        return JS_FALSE;
-                }
-                v=ADM_strdup(JS_GetStringBytes(JSVAL_TO_STRING(argv[i])));
-                args[i].arg.string=v;
-        }
         enterLock();
-        *rval= BOOLEAN_TO_JSVAL(filterAddScript(filter,argc,args));
+        CONFcouple *c=NULL;
+        if(argc)
+            jsArgToConfCouple(argc-1,&c,argv+1);
+        *rval=BOOLEAN_TO_JSVAL(  ADM_vf_addFilterFromTag(filterTag,c,false));
+        if(c) delete c;
         leaveLock();
-        
-        for(int i=0;i<argc;i++) 
-        {
-            ADM_dealloc(args[i].arg.string);
-        }
-#endif        
         return JS_TRUE;
 }// end AddFilter
 /**
@@ -275,7 +263,8 @@
         CONFcouple *c;
         jsArgToConfCouple(argc-1,&c,argv+1);
         *rval = BOOLEAN_TO_JSVAL( videoEncoder6_SetConfiguration(c));
-        printf("Selected codec %s\n",codec);
+        ADM_info("Selected codec %s\n",codec);
+        if(c) delete c;
         leaveLock();
 
         return JS_TRUE;



From mean at mail.berlios.de  Sat Nov 28 14:48:12 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sat, 28 Nov 2009 14:48:12 +0100
Subject: [Avidemux-svn-commit] r5576 - in branches/avidemux_2.6_branch_mean:
	. avidemux/cli avidemux/cli/ADM_UIs/src
	avidemux/cli/ADM_userInterfaces
	avidemux/cli/ADM_userInterfaces/ADM_dialog
	avidemux/cli/ADM_userInterfaces/ADM_filters
	avidemux/cli/ADM_userInterfaces/ADM_gui2 avidemux/common
Message-ID: <200911281348.nASDmCR7013420@sheep.berlios.de>

Author: mean
Date: 2009-11-28 14:48:11 +0100 (Sat, 28 Nov 2009)
New Revision: 5576

Added:
   branches/avidemux_2.6_branch_mean/avidemux/cli/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux/cli/cliPackageDebian.cmake
Modified:
   branches/avidemux_2.6_branch_mean/avidemux/cli/ADM_UIs/src/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux/cli/ADM_UIs/src/FAC_toggle.cpp
   branches/avidemux_2.6_branch_mean/avidemux/cli/ADM_userInterfaces/ADM_dialog/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux/cli/ADM_userInterfaces/ADM_dialog/DIA_none.cpp
   branches/avidemux_2.6_branch_mean/avidemux/cli/ADM_userInterfaces/ADM_dialog/DIA_working.cpp
   branches/avidemux_2.6_branch_mean/avidemux/cli/ADM_userInterfaces/ADM_filters/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux/cli/ADM_userInterfaces/ADM_gui2/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux/cli/ADM_userInterfaces/ADM_gui2/gui_none.cpp
   branches/avidemux_2.6_branch_mean/avidemux/cli/ADM_userInterfaces/ADM_gui2/preview_none.cpp
   branches/avidemux_2.6_branch_mean/avidemux/cli/ADM_userInterfaces/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux/common/main.cpp
   branches/avidemux_2.6_branch_mean/bootStrap.bash
Log:
[cli] Cli build target (untested)

Modified: branches/avidemux_2.6_branch_mean/avidemux/cli/ADM_UIs/src/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/cli/ADM_UIs/src/CMakeLists.txt	2009-11-28 13:48:09 UTC (rev 5575)
+++ branches/avidemux_2.6_branch_mean/avidemux/cli/ADM_UIs/src/CMakeLists.txt	2009-11-28 13:48:11 UTC (rev 5576)
@@ -1,4 +1,4 @@
-SET(ADM_LIB ADM_UICli)
+SET(ADM_LIB ADM_UI_Cli6)
 
 SET(${ADM_LIB}_SRCS 
 	DIA_dialogFactory.cpp

Modified: branches/avidemux_2.6_branch_mean/avidemux/cli/ADM_UIs/src/FAC_toggle.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/cli/ADM_UIs/src/FAC_toggle.cpp	2009-11-28 13:48:09 UTC (rev 5575)
+++ branches/avidemux_2.6_branch_mean/avidemux/cli/ADM_UIs/src/FAC_toggle.cpp	2009-11-28 13:48:11 UTC (rev 5576)
@@ -97,7 +97,7 @@
 //******************************************************
 
 diaElemFloat::diaElemFloat(ELEM_TYPE_FLOAT *intValue,const char *toggleTitle, 
-                            ELEM_TYPE_FLOAT min, ELEM_TYPE_FLOAT max,const char *tip)
+                            ELEM_TYPE_FLOAT min, ELEM_TYPE_FLOAT max,const char *tip,int decimal)
   : diaElem(ELEM_FLOAT)
 {
 }

Modified: branches/avidemux_2.6_branch_mean/avidemux/cli/ADM_userInterfaces/ADM_dialog/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/cli/ADM_userInterfaces/ADM_dialog/CMakeLists.txt	2009-11-28 13:48:09 UTC (rev 5575)
+++ branches/avidemux_2.6_branch_mean/avidemux/cli/ADM_userInterfaces/ADM_dialog/CMakeLists.txt	2009-11-28 13:48:11 UTC (rev 5576)
@@ -1,8 +1,7 @@
-SET(ADM_LIB ADM_dialogNone)
+SET(ADM_LIB ADM_dialogCli6)
 
 SET(${ADM_LIB}_SRCS 
 	alert_none.cpp  DIA_busy.cpp  
-#DIA_encoding.cpp   i
         DIA_indexing.cpp  DIA_none.cpp  DIA_working.cpp  OCR_none.cpp)
 
-ADD_ADM_LIB_CLI_TARGET(${ADM_LIB} ${${ADM_LIB}_SRCS})
+ADD_LIBRARY(${ADM_LIB} SHARED ${${ADM_LIB}_SRCS})

Modified: branches/avidemux_2.6_branch_mean/avidemux/cli/ADM_userInterfaces/ADM_dialog/DIA_none.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/cli/ADM_userInterfaces/ADM_dialog/DIA_none.cpp	2009-11-28 13:48:09 UTC (rev 5575)
+++ branches/avidemux_2.6_branch_mean/avidemux/cli/ADM_userInterfaces/ADM_dialog/DIA_none.cpp	2009-11-28 13:48:11 UTC (rev 5576)
@@ -27,20 +27,14 @@
 #include "ADM_videoFilter.h"
 
 
-#include "ADM_video/ADM_vidPartial_param.h"
 
 
-#include "ADM_videoFilter/ADM_vobsubinfo.h"
-#include "ADM_videoFilter/ADM_vidVobSub.h"
-
-
 #include "audioencoder.h"
 #include "ADM_lavcodec.h"
-#include "ADM_codecs/ADM_ffmpegConfig.h"
+#include "ADM_render/GUI_render.cpp"
+//#include "ADM_codecs/ADM_ffmpegConfig.h"
 
-#include "ADM_ocr/ADM_ocr.h"
-#include "ADM_ocr/ADM_ocrInternal.h"
-#include "ADM_userInterfaces/ADM_render/GUI_renderInternal.h"
+//#include "ADM_userInterfaces/ADM_render/GUI_renderInternal.h"
 extern int global_argc;
 extern char **global_argv;
 extern void initTranslator(void);
@@ -61,9 +55,9 @@
 
 
 
-uint8_t DIA_getPartial(PARTIAL_CONFIG *param,AVDMGenericVideoStream *son,AVDMGenericVideoStream *previous) {return 0;}
+//uint8_t DIA_getPartial(PARTIAL_CONFIG *param,AVDMGenericVideoStream *son,AVDMGenericVideoStream *previous) {return 0;}
 uint8_t DIA_pipe(char **cmd,char **param) {return 0;}
-uint8_t DIA_vobsub(vobSubParam *param) {return 0;}
+//uint8_t DIA_vobsub(vobSubParam *param) {return 0;}
 uint8_t DIA_quota(char *) {return 0;}
 const char * GUI_getCustomScript(uint32_t nb) {return 0;}
 uint8_t DIA_RecentFiles( char **name ) {return 0;}
@@ -112,14 +106,14 @@
                       PARTICLE_PARAM * param,
                       const MenuMapping * menu_mapping,
                       uint32_t menu_mapping_count) { return 255; }
-uint8_t ADM_ocrUpdateNbLines(void *ui,uint32_t cur,uint32_t total) {return 0;}
-uint8_t ADM_ocrUpdateNbGlyphs(void *ui,uint32_t nbGlyphs) {return 0;}
-uint8_t ADM_ocrUpdateTextAndTime(void *ui,char *decodedString,char *timeCode) {	return 0;}
-uint8_t ADM_ocrDrawFull(void *d,uint8_t *data) {return 0;}
-uint8_t ADM_ocrUiEnd(void *d) {	return 0;}
-void *ADM_ocrUiSetup(void) {return 0;}
-uint8_t ADM_ocrSetRedrawSize(void *ui,uint32_t w,uint32_t h) {return 0;}
-ReplyType glyphToText(admGlyph *glyph,admGlyph *head,char *decodedString) {return ReplyOk;}
+//uint8_t ADM_ocrUpdateNbLines(void *ui,uint32_t cur,uint32_t total) {return 0;}
+//uint8_t ADM_ocrUpdateNbGlyphs(void *ui,uint32_t nbGlyphs) {return 0;}
+//uint8_t ADM_ocrUpdateTextAndTime(void *ui,char *decodedString,char *timeCode) {	return 0;}
+//uint8_t ADM_ocrDrawFull(void *d,uint8_t *data) {return 0;}
+//uint8_t ADM_ocrUiEnd(void *d) {	return 0;}
+//void *ADM_ocrUiSetup(void) {return 0;}
+//uint8_t ADM_ocrSetRedrawSize(void *ui,uint32_t w,uint32_t h) {return 0;}
+//ReplyType glyphToText(admGlyph *glyph,admGlyph *head,char *decodedString) {return ReplyOk;}
 extern void UI_purge(void);
 extern ADM_RENDER_TYPE UI_getPreferredRender(void);
 

Modified: branches/avidemux_2.6_branch_mean/avidemux/cli/ADM_userInterfaces/ADM_dialog/DIA_working.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/cli/ADM_userInterfaces/ADM_dialog/DIA_working.cpp	2009-11-28 13:48:09 UTC (rev 5575)
+++ branches/avidemux_2.6_branch_mean/avidemux/cli/ADM_userInterfaces/ADM_dialog/DIA_working.cpp	2009-11-28 13:48:11 UTC (rev 5576)
@@ -30,9 +30,7 @@
 #include "config.h"
 #include "ADM_default.h"
 
-#include "ADM_osSupport/ADM_debugID.h"
-#define MODULE_NAME MODULE_CLOCKnTIMELEFT
-#include "ADM_osSupport/ADM_debug.h"
+#define aprintf ADM_info
 
 # include "config.h"
 #include "DIA_working.h"

Modified: branches/avidemux_2.6_branch_mean/avidemux/cli/ADM_userInterfaces/ADM_filters/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/cli/ADM_userInterfaces/ADM_filters/CMakeLists.txt	2009-11-28 13:48:09 UTC (rev 5575)
+++ branches/avidemux_2.6_branch_mean/avidemux/cli/ADM_userInterfaces/ADM_filters/CMakeLists.txt	2009-11-28 13:48:11 UTC (rev 5576)
@@ -1,6 +1,6 @@
-SET(ADM_LIB ADM_dialogFiltersNone)
+SET(ADM_LIB ADM_filtersCli6)
 
 SET(${ADM_LIB}_SRCS 
 	filter_none.cpp)
 
-ADD_ADM_LIB_CLI_TARGET(${ADM_LIB} ${${ADM_LIB}_SRCS})
\ No newline at end of file
+ADD_LIBRARY(${ADM_LIB} SHARED ${${ADM_LIB}_SRCS})

Modified: branches/avidemux_2.6_branch_mean/avidemux/cli/ADM_userInterfaces/ADM_gui2/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/cli/ADM_userInterfaces/ADM_gui2/CMakeLists.txt	2009-11-28 13:48:09 UTC (rev 5575)
+++ branches/avidemux_2.6_branch_mean/avidemux/cli/ADM_userInterfaces/ADM_gui2/CMakeLists.txt	2009-11-28 13:48:11 UTC (rev 5576)
@@ -1,6 +1,6 @@
-SET(ADM_LIB ADM_dialogGuiNone)
+SET(ADM_LIB ADM_gui2Cli6)
 
 SET(${ADM_LIB}_SRCS 
 	file_none.cpp  gui_none.cpp  preview_none.cpp)
 
-ADD_ADM_LIB_CLI_TARGET(${ADM_LIB} ${${ADM_LIB}_SRCS})
\ No newline at end of file
+ADD_LIBRARY(${ADM_LIB} SHARED ${${ADM_LIB}_SRCS})

Modified: branches/avidemux_2.6_branch_mean/avidemux/cli/ADM_userInterfaces/ADM_gui2/gui_none.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/cli/ADM_userInterfaces/ADM_gui2/gui_none.cpp	2009-11-28 13:48:09 UTC (rev 5575)
+++ branches/avidemux_2.6_branch_mean/avidemux/cli/ADM_userInterfaces/ADM_gui2/gui_none.cpp	2009-11-28 13:48:11 UTC (rev 5576)
@@ -15,7 +15,7 @@
 #include "GUI_ui.h"
 #include "ADM_colorspace.h"
 
-static uint32_t format=0;
+static uint32_t cliFormat=0;
 static int audioCodec=0;
 static int videoCodec=0;
  
@@ -31,15 +31,17 @@
 }
 
 //**************************************************
-bool 	UI_SetCurrentFormat( uint32_t fmt )
+#if 0
+uint8_t 	UI_SetCurrentFormat( ADM_OUT_FORMAT fmt )
 {
 format=fmt;
 }
 
-uint32_t 	UI_GetCurrentFormat( void )
+ADM_OUT_FORMAT 	UI_GetCurrentFormat( void )
 {
   return format;
 }
+#endif
 //**************************************************
 int 	UI_getCurrentVCodec(void)
 {
@@ -73,12 +75,9 @@
 
 void UI_updateTimeCount(uint32_t curFrame, uint32_t fps)
 {}
-void UI_setCurrentTime(uint64_t curTime)
+void UI_setTimeCount(uint32_t curFrame,uint32_t total, uint32_t fps)
 {}
-void UI_setTotalTime(uint64_t curTime)
-{}
 
-
 double 	UI_readScale( void )
 {
   return 0;
@@ -87,8 +86,6 @@
 {}
 void 	UI_setFrameType( uint32_t frametype,uint32_t qp)
 {}
-void 	UI_setMarkers(uint64_t a, uint64_t b )
-{}
 void 	UI_setTitle(const char *name)
 {}
 
@@ -144,5 +141,22 @@
 }
 void UI_purge( void )
 {}
+uint32_t UI_GetCurrentFormat( void )
+{
+	return cliFormat;
+}
+bool UI_SetCurrentFormat( uint32_t f )
+{
+	cliFormat=f;
+}
+void UI_setCurrentTime(uint64_t x)
+{
 
+}
+void UI_setMarkers(uint64_t a,uint64_t b)
+{
+}
+void UI_setTotalTime(uint64_t t)
+{
+}
 // EOF

Modified: branches/avidemux_2.6_branch_mean/avidemux/cli/ADM_userInterfaces/ADM_gui2/preview_none.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/cli/ADM_userInterfaces/ADM_gui2/preview_none.cpp	2009-11-28 13:48:09 UTC (rev 5575)
+++ branches/avidemux_2.6_branch_mean/avidemux/cli/ADM_userInterfaces/ADM_gui2/preview_none.cpp	2009-11-28 13:48:11 UTC (rev 5576)
@@ -12,7 +12,7 @@
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_videoFilter.h"
 
-#include "ADM_userInterfaces/ADM_render/GUI_render.h"
+#include "ADM_render/GUI_render.h"
 
 void UI_rgbDraw(void *widg,uint32_t w, uint32_t h,uint8_t *ptr) {}
 void UI_updateDrawWindowSize(void *win,uint32_t w,uint32_t h) {}
@@ -23,4 +23,3 @@
 uint8_t DIA_previewUpdate(uint8_t *buffer) {return 1;}
 void DIA_previewEnd(void) {}
 uint8_t DIA_previewStillAlive(void) {return 1;}
-uint8_t DIA_filterPreview(const char *captionText, AVDMGenericVideoStream *videoStream, uint32_t frame) {}

Modified: branches/avidemux_2.6_branch_mean/avidemux/cli/ADM_userInterfaces/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/cli/ADM_userInterfaces/CMakeLists.txt	2009-11-28 13:48:09 UTC (rev 5575)
+++ branches/avidemux_2.6_branch_mean/avidemux/cli/ADM_userInterfaces/CMakeLists.txt	2009-11-28 13:48:11 UTC (rev 5576)
@@ -1,5 +1,5 @@
-ADD_ADM_LIB_CLI_TARGET(ADM_UI_None ui_support.cpp)
 
 ADD_SUBDIRECTORY(ADM_dialog)
 ADD_SUBDIRECTORY(ADM_filters)
 ADD_SUBDIRECTORY(ADM_gui2)
+ADD_LIBRARY(ADM_toolkitCli6 SHARED ui_support.cpp)

Added: branches/avidemux_2.6_branch_mean/avidemux/cli/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/cli/CMakeLists.txt	2009-11-28 13:48:09 UTC (rev 5575)
+++ branches/avidemux_2.6_branch_mean/avidemux/cli/CMakeLists.txt	2009-11-28 13:48:11 UTC (rev 5576)
@@ -0,0 +1,124 @@
+MESSAGE("#########################################")
+MESSAGE("Configure for avidemux Cli Started")
+MESSAGE("#########################################")
+MESSAGE("")
+SET(VERSION 2.6.0)
+CMAKE_MINIMUM_REQUIRED(VERSION 2.4.7 FATAL_ERROR)
+if (COMMAND cmake_policy)
+	cmake_policy(VERSION 2.4)
+	cmake_policy(SET CMP0003 NEW)
+	#cmake_policy(SET CMP0011 OLD)
+endif (COMMAND cmake_policy)
+SET( ADM_PROJECT Avidemux_cli)
+
+include(../commonCmakeApplication.cmake)
+##########################################
+# Config
+##########################################
+ADD_DEFINITIONS(-DADM_UI_TYPE_BUILD=ADM_UI_CLI)
+SET(CONFIG_HEADER_TYPE ADM_BUILD_CLI)
+SET(UI_SUFFIX cli)
+#
+CONFIGURE_FILE("${AVIDEMUX_TOP_SOURCE_DIR}/cmake/config.h.cmake" "${CMAKE_BINARY_DIR}/config/cli/config.h")
+MESSAGE(STATUS "CLI config.h generated")
+
+INCLUDE_DIRECTORIES("${CMAKE_BINARY_DIR}/config/cli/")
+###########################################
+# Executable
+###########################################
+ADD_EXECUTABLE(avidemux3_cli ${ADM_EXE_SRCS})
+ADD_TARGET_CFLAGS(avidemux3_cli "-I${CMAKE_BINARY_DIR}/config/cli")
+########################################
+# Add subdirectories 
+########################################
+ADD_SUBDIRECTORY(../common ./common)
+ADD_SUBDIRECTORY(ADM_UIs ./ADM_UIsCli)
+ADD_SUBDIRECTORY(ADM_userInterfaces ./ADM_userInterfacesCli)
+# Executable
+
+SDLify(../common/main.cpp)
+ADD_SOURCE_CFLAGS(../common/main.cpp "-DADM_SUBVERSION=${ADM_SUBVERSION}")
+###########################################
+# Construct common libraries
+###########################################
+
+IF (ADM_DEBUG AND FIND_LEAKS)
+	TARGET_LINK_LIBRARIES(avidemux3_cli ADM_nvwa)
+ENDIF (ADM_DEBUG AND FIND_LEAKS)
+
+FOREACH (_libName ${commonLibs1})
+        TARGET_LINK_LIBRARIES(avidemux3_cli ${_libName})
+ENDFOREACH (_libName ${commonLibs})
+
+TARGET_LINK_LIBRARIES(avidemux3_cli ADM_filtersCli6)
+
+FOREACH (_libName ${commonLibs2})
+        TARGET_LINK_LIBRARIES(avidemux3_cli ${_libName})
+ENDFOREACH (_libName ${commonLibs})
+FOREACH (_libName ${coreLibs})
+        TARGET_LINK_LIBRARIES(avidemux3_cli ${_libName})
+ENDFOREACH (_libName ${commonLibs})
+
+#############################################
+# Add gtk specific libs
+#############################################
+TARGET_LINK_LIBRARIES(avidemux3_cli ADM_UI_Cli6)
+TARGET_LINK_LIBRARIES(avidemux3_cli ADM_dialogCli6)
+TARGET_LINK_LIBRARIES(avidemux3_cli ADM_gui2Cli6)
+TARGET_LINK_LIBRARIES(avidemux3_cli ADM_toolkitCli6)
+TARGET_LINK_LIBRARIES(avidemux3_cli ADM_UI_Cli6)
+###########################################
+# External libs
+###########################################
+# gettext
+IF (GETTEXT_FOUND)
+	TARGET_LINK_LIBRARIES(avidemux3_cli ${GETTEXT_LIBRARY_DIR})
+ENDIF (GETTEXT_FOUND)
+# PNG
+IF (USE_PNG)
+        TARGET_LINK_LIBRARIES(avidemux3_cli ${PNG_LIBRARIES})
+	
+ENDIF (USE_PNG)
+
+
+# XVideo
+IF (USE_XV)
+        TARGET_LINK_LIBRARIES(avidemux3_cli ${XVIDEO_LIBRARY_DIR})
+ENDIF (USE_XV)
+
+# SDL
+IF (USE_SDL)
+        TARGET_LINK_LIBRARIES(avidemux3_cli ${SDL_LIBRARY})
+ENDIF (USE_SDL)
+
+###########################################
+# UI Specific
+###########################################
+ADD_TARGET_LDFLAGS(avidemux3_cli ${GTK_LDFLAGS} ${GTHREAD_LDFLAGS})
+
+
+###########################################
+# OS Specific
+###########################################
+IF (WIN32)
+	target_link_libraries(ADM_osSupport)
+
+	IF (MINGW)
+		target_link_libraries(avidemux3_cli -mno-cygwin)
+	ENDIF (MINGW)
+
+	target_link_libraries(avidemux3_cli winmm)
+        ADD_TARGET_LDFLAGS(avidemux3_cli "-mwindows")
+
+ENDIF (WIN32)
+#
+# libxml2
+#
+TARGET_LINK_LIBRARIES(avidemux3_cli ${LIBXML2_LIBRARIES})
+###########################################
+# Install
+###########################################
+ADM_LINK_THREAD(avidemux3_cli)
+ADM_INSTALL_BIN(avidemux3_cli)
+INSTALL(FILES ${CMAKE_BINARY_DIR}/config/cli/config.h DESTINATION "${AVIDEMUX_INCLUDE_DIR}/avidemux/2.6/cli") 
+include(./cliPackageDebian.cmake)

Added: branches/avidemux_2.6_branch_mean/avidemux/cli/cliPackageDebian.cmake
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/cli/cliPackageDebian.cmake	2009-11-28 13:48:09 UTC (rev 5575)
+++ branches/avidemux_2.6_branch_mean/avidemux/cli/cliPackageDebian.cmake	2009-11-28 13:48:11 UTC (rev 5576)
@@ -0,0 +1,34 @@
+##############################
+# DEBIAN
+##############################
+SET(CPACK_SET_DESTDIR "ON")
+SET(CPACK_DEBIAN_PACKAGE_NAME "avidemux3-cli")
+SET (CPACK_GENERATOR "DEB")
+# ARCH
+IF (X86_64_SUPPORTED)
+SET(CPACK_DEBIAN_PACKAGE_ARCHITECTURE "amd64")
+ELSE (X86_64_SUPPORTED)
+SET(CPACK_DEBIAN_PACKAGE_ARCHITECTURE "i386")
+ENDIF (X86_64_SUPPORTED)
+# Mandatory
+SET(CPACK_DEBIAN_PACKAGE_MAINTAINER "mean")
+SET(CPACK_DEBIAN_PACKAGE_DESCRIPTION "Simple video editori,main program gtk version ")
+
+# Build our deps list
+# Build deps SET(DEPS "debhelper (>> 4), libfreetype6-dev, libxml2-dev,  libxv-dev, dpatch , cmake, desktop-file-utils")
+SET(DEPS "libc6 (>=2.4),libglib2.0-0 (>=2.14.0),libstdc++6 (>=4.2.1),libx11-6,  libxml2 (>=2.6.27), libxv1, zlib1g (>=1:1.1.4), avidemux3-core (>=2.6.0)")
+# Add optional DEPS here
+SET(CPACK_DEBIAN_PACKAGE_DEPENDS "${DEPS}")
+#
+SET(CPACK_DEBIAN_PACKAGE_SECTION "extra")
+SET(CPACK_DEBIAN_PACKAGE_PRIORITY "optional")
+# Some more infos
+SET(CPACK_PACKAGE_VERSION_MAJOR "2")
+SET(CPACK_PACKAGE_VERSION_MINOR "6")
+SET(CPACK_PACKAGE_VERSION_PATCH "0")
+SET(CPACK_PACKAGE_VERSION_PATCH "0-${ADM_SUBVERSION}")
+#
+SET(CPACK_PACKAGE_NAME "avidemux3-cli")
+#
+
+include(CPack)

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/main.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/main.cpp	2009-11-28 13:48:09 UTC (rev 5575)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/main.cpp	2009-11-28 13:48:11 UTC (rev 5576)
@@ -293,7 +293,7 @@
 	__try1(exceptionHandler);
 #endif
 
-#ifdef USE_VDPAU
+#if defined( USE_VDPAU) && (ADM_UI_TYPE_BUILD!=ADM_UI_CLI)
     printf("Probing for VDPAU...\n");
     if(vdpauProbe()==true) printf("VDPAU available\n");
         else printf("VDPAU not available\n");

Modified: branches/avidemux_2.6_branch_mean/bootStrap.bash
===================================================================
--- branches/avidemux_2.6_branch_mean/bootStrap.bash	2009-11-28 13:48:09 UTC (rev 5575)
+++ branches/avidemux_2.6_branch_mean/bootStrap.bash	2009-11-28 13:48:11 UTC (rev 5576)
@@ -1,5 +1,6 @@
 #!/bin/bash
 do_core=1
+do_cli=0
 do_gtk=1
 do_qt4=0
 do_plugins=1
@@ -38,6 +39,7 @@
         printModule $do_core Core
         printModule $do_gtk Gtk
         printModule $do_qt4 Qt4
+        printModule $do_cli Cli
         printModule $do_plugins Plugins
 }
 usage()
@@ -47,6 +49,8 @@
         echo "  --help            : Print usage"
         echo "  --with-core       : Build core"
         echo "  --without-core    : Dont build core"
+        echo "  --with-cli        : Build cli"
+        echo "  --without-cli     : Dont build cli"
         echo "  --with-gtk        : Build gtk"
         echo "  --without-gtk     : Dont build gtk"
         echo "  --with-core       : Build core"
@@ -66,6 +70,9 @@
          --without-qt4)
                 do_qt4=0
              ;;
+         --without-cli)
+                do_cli=0
+             ;;
          --without-gtk)
                 do_gtk=0
              ;;
@@ -78,6 +85,9 @@
          --with-qt4)
                 do_qt4=1
              ;;
+         --with-cli)
+                do_cli=1
+             ;;
          --with-gtk)
                 do_gtk=1
              ;;
@@ -111,6 +121,11 @@
         cd $TOP
         Process buildQt4 ../avidemux/qt4
 fi
+if [ "x$do_cli" = "x1" ] ; then 
+        echo "** CLI **"
+        cd $TOP
+        Process buildCli ../avidemux/cli
+fi
 if [ "x$do_qt4" = "x1" ] ; then 
         echo "** GTK **"
         cd $TOP



From mean at mail.berlios.de  Sat Nov 28 14:48:14 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sat, 28 Nov 2009 14:48:14 +0100
Subject: [Avidemux-svn-commit] r5577 -
	branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoFilter2/src
Message-ID: <200911281348.nASDmE3r013430@sheep.berlios.de>

Author: mean
Date: 2009-11-28 14:48:14 +0100 (Sat, 28 Nov 2009)
New Revision: 5577

Modified:
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoFilter2/src/ADM_pluginLoad.cpp
Log:
[VideoFilter] Only load filter compatible with our own UI

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoFilter2/src/ADM_pluginLoad.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoFilter2/src/ADM_pluginLoad.cpp	2009-11-28 13:48:11 UTC (rev 5576)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoFilter2/src/ADM_pluginLoad.cpp	2009-11-28 13:48:14 UTC (rev 5577)
@@ -25,6 +25,7 @@
 #define aprintf(...) {}
 #endif
 static uint32_t lastTag=100;
+extern ADM_UI_TYPE UI_GetCurrentUI(void);
 /**
     \struct admVideoFilterInfo
 */
@@ -97,10 +98,11 @@
 			ADM_GetFileName(file), plugin->getApiVersion(), VF_API_VERSION);
 		goto Err_ad;
 	}
-    if(!(plugin->supportedUI() & 0xff))
+    if(!(plugin->supportedUI() & UI_GetCurrentUI()))
     {  // FIXME
+        ADM_info("==> wrong UI\n");
+        goto Err_ad;
 
-
     }
 	// Get infos
 	uint32_t major, minor, patch;



From mean at mail.berlios.de  Sat Nov 28 14:48:07 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sat, 28 Nov 2009 14:48:07 +0100
Subject: [Avidemux-svn-commit] r5573 - in
	branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoFilter2:
	include src
Message-ID: <200911281348.nASDm7Ds013390@sheep.berlios.de>

Author: mean
Date: 2009-11-28 14:48:06 +0100 (Sat, 28 Nov 2009)
New Revision: 5573

Modified:
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoFilter2/include/ADM_videoFilterApi.h
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoFilter2/include/ADM_videoFilters.h
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoFilter2/src/ADM_pluginLoad.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoFilter2/src/ADM_videoFilters.cpp
Log:
[Filter/script] save/load video filters from js

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoFilter2/include/ADM_videoFilterApi.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoFilter2/include/ADM_videoFilterApi.h	2009-11-28 13:48:05 UTC (rev 5572)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoFilter2/include/ADM_videoFilterApi.h	2009-11-28 13:48:06 UTC (rev 5573)
@@ -27,4 +27,7 @@
 const char *ADM_vf_getInternalNameFromTag(uint32_t tag);
 ADM_coreVideoFilter *ADM_vf_createFromTag(uint32_t tag,ADM_coreVideoFilter *last,CONFcouple *couples);
 
+uint32_t    ADM_vf_getTagFromInternalName(const char *name);
+bool        ADM_vf_addFilter(uint32_t tag,CONFcouple *couples);
+
 #endif //ADM_VIDEO_FILTER_API_H

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoFilter2/include/ADM_videoFilters.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoFilter2/include/ADM_videoFilters.h	2009-11-28 13:48:05 UTC (rev 5572)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoFilter2/include/ADM_videoFilters.h	2009-11-28 13:48:06 UTC (rev 5573)
@@ -34,7 +34,7 @@
 uint32_t                ADM_vf_getTag(int index);
 bool                    ADM_vf_getConfigurationFromIndex(int index,CONFcouple **c);
 
-bool                    ADM_vf_addFilterFromTag(uint32_t tag);
+bool                    ADM_vf_addFilterFromTag(uint32_t tag,CONFcouple *c,bool runConfigure);
 bool                    ADM_vf_removeFilterAtIndex(int index);
 bool                    ADM_vf_configureFilterAtIndex(int index);
 bool                    ADM_vf_moveFilterDown(int index);

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoFilter2/src/ADM_pluginLoad.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoFilter2/src/ADM_pluginLoad.cpp	2009-11-28 13:48:05 UTC (rev 5572)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoFilter2/src/ADM_pluginLoad.cpp	2009-11-28 13:48:06 UTC (rev 5573)
@@ -227,6 +227,26 @@
     ADM_assert(0);
 }
 /**
+    \fn ADM_vf_getPluginFromTag
+    \brief 
+*/
+static ADM_vf_plugin *ADM_vf_getPluginFromInternalName(const char *name)
+{
+    for(int cat=0;cat<VF_MAX;cat++)
+    {
+        int nb=ADM_videoFilterPluginsList[cat].size();
+        for(int i=0;i<nb;i++)
+        {
+            if(!strcasecmp(ADM_videoFilterPluginsList[cat][i]->getInternalName(),name))
+            {
+                return ADM_videoFilterPluginsList[cat][i];
+            }
+        }
+    }
+    ADM_error("Cannot get video filter from name %s\n",name);
+    ADM_assert(0);
+}
+/**
     \fn ADM_VideoFilters
     \brief
 */
@@ -253,5 +273,14 @@
   ADM_vf_plugin *plugin=ADM_vf_getPluginFromTag(tag);
     return plugin->getInternalName();
 }
+/**
+    \fn ADM_vf_getTagFromInternalName
+    \brief 
+*/
+uint32_t    ADM_vf_getTagFromInternalName(const char *name)
+{
+    ADM_vf_plugin *plg=ADM_vf_getPluginFromInternalName(name);
+    return plg->tag;
 
+}
 //EOF

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoFilter2/src/ADM_videoFilters.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoFilter2/src/ADM_videoFilters.cpp	2009-11-28 13:48:05 UTC (rev 5572)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoFilter2/src/ADM_videoFilters.cpp	2009-11-28 13:48:06 UTC (rev 5573)
@@ -68,19 +68,20 @@
         \fn ADM_vf_addFilterFromTag
         \brief Add a new video filter (identified by tag) at the end of the activate filter list
 */
-bool                    ADM_vf_addFilterFromTag(uint32_t tag)
+bool                    ADM_vf_addFilterFromTag(uint32_t tag,CONFcouple *c,bool configure)
 {
     ADM_info("Creating video filter using tag %"LU" \n",tag);
     // Fetch the descriptor...
     
     ADM_coreVideoFilter *last=getLastVideoFilter();
  
-    ADM_coreVideoFilter *nw=ADM_vf_createFromTag(tag,last,NULL);
-    if(nw->configure()==false)
-    {
-        delete nw;
-        return false;
-    }
+    ADM_coreVideoFilter *nw=ADM_vf_createFromTag(tag,last,c);
+    if(true==configure)
+        if(nw->configure()==false)
+        {
+            delete nw;
+            return false;
+        }
     ADM_VideoFilterElement e;
     e.tag=tag;
     e.instance=nw;



From mean at mail.berlios.de  Sat Nov 28 14:48:15 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sat, 28 Nov 2009 14:48:15 +0100
Subject: [Avidemux-svn-commit] r5578 -
	branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoFilter2/src
Message-ID: <200911281348.nASDmFUY013440@sheep.berlios.de>

Author: mean
Date: 2009-11-28 14:48:15 +0100 (Sat, 28 Nov 2009)
New Revision: 5578

Modified:
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoFilter2/src/ADM_videoFilters.cpp
Log:
[VideoFilter] Dont call configure twice

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoFilter2/src/ADM_videoFilters.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoFilter2/src/ADM_videoFilters.cpp	2009-11-28 13:48:14 UTC (rev 5577)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoFilter2/src/ADM_videoFilters.cpp	2009-11-28 13:48:15 UTC (rev 5578)
@@ -143,13 +143,14 @@
     //
     ADM_assert(index<ADM_vf_getSize());
     ADM_VideoFilterElement *e=&(ADM_VideoFilters[index]);
-    if(e->instance->configure())
-    {
-        if(e->instance->configure())
+    ADM_coreVideoFilter *instance=e->instance;
+    ADM_assert(instance);
+
+        if(instance->configure())
         {
             return ADM_vf_recreateChain();
         }
-    }
+
     return true;
 }
 



From mean at mail.berlios.de  Sat Nov 28 14:48:18 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sat, 28 Nov 2009 14:48:18 +0100
Subject: [Avidemux-svn-commit] r5580 - in
	branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/resize:
	. cli gtk qt4
Message-ID: <200911281348.nASDmIgQ013460@sheep.berlios.de>

Author: mean
Date: 2009-11-28 14:48:17 +0100 (Sat, 28 Nov 2009)
New Revision: 5580

Added:
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/resize/cli/
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/resize/cli/cli_resize.cpp
Modified:
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/resize/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/resize/gtk/gtk_resize.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/resize/qt4/Q_resize.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/resize/qt4/Q_resize.h
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/resize/swScaleResize.cpp
Log:
[vfilter:resize] First version with gtk/qt4/...

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/resize/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/resize/CMakeLists.txt	2009-11-28 13:48:16 UTC (rev 5579)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/resize/CMakeLists.txt	2009-11-28 13:48:17 UTC (rev 5580)
@@ -1,9 +1,29 @@
 INCLUDE(vf_plugin)
 
-
 SET(ADM_vf_swscaleResize_SRCS swScaleResize.cpp)
 
-ADD_LIBRARY(ADM_vf_swscaleResize SHARED ${ADM_vf_swscaleResize_SRCS})
-TARGET_LINK_LIBRARIES(ADM_vf_swscaleResize ADM_libswscale6)
-INIT_VIDEO_FILTER(ADM_vf_swscaleResize)
-INSTALL_VIDEO_FILTER(ADM_vf_swscaleResize)
+
+# ---------- QT4 Version ----------------
+INCLUDE(vf_plugin_qt4)
+SET(ADM_vf_swscaleResize_QT4_SRCS    qt4/Q_resize.cpp)
+SET(ADM_vf_swscaleResize_QT4_Headers qt4/Q_resize.h)
+SET(ADM_vf_swscaleResize_QT4_UI      qt4/resizing)
+INIT_VIDEO_FILTER_QT4(ADM_vf_swscaleResize_qt4 ${ADM_vf_swscaleResize_QT4_SRCS} ${ADM_vf_swscaleResize_QT4_Headers} ${ADM_vf_swscaleResize_QT4_UI} ${ADM_vf_swscaleResize_SRCS})
+TARGET_LINK_LIBRARIES(ADM_vf_swscaleResize_qt4 ADM_libswscale6 )
+# /QT4
+
+
+# ----------------- GTK Version -----------------------
+INCLUDE(vf_plugin_gtk)
+SET(ADM_vf_swscaleResize_GTK_SRCS    gtk/gtk_resize.cpp)
+INIT_VIDEO_FILTER_GTK(ADM_vf_swscaleResize_gtk ${ADM_vf_swscaleResize_GTK_SRCS} ${ADM_vf_swscaleResize_SRCS})
+TARGET_LINK_LIBRARIES(ADM_vf_swscaleResize_gtk ADM_libswscale6 )
+
+# ----------------- CLI Version -----------------------
+#INCLUDE(vf_plugin_cli)
+#SET(ADM_vf_swscaleResize_CLI_SRCS    cli/cli_resize.cpp)
+#INIT_VIDEO_FILTER_CLI(ADM_vf_swscaleResize_cli ${ADM_vf_swscaleResize_CLI_SRCS} ${ADM_vf_swscaleResize_SRCS})
+#TARGET_LINK_LIBRARIES(ADM_vf_swscaleResize_cli ADM_libswscale6 )
+
+
+# /QT4
\ No newline at end of file

Added: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/resize/cli/cli_resize.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/resize/cli/cli_resize.cpp	2009-11-28 13:48:16 UTC (rev 5579)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/resize/cli/cli_resize.cpp	2009-11-28 13:48:17 UTC (rev 5580)
@@ -0,0 +1,29 @@
+/***************************************************************************
+    copyright            : (C) 2001 by mean
+    email                : fixounet at free.fr
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+
+#include <math.h>
+
+#include "ADM_default.h"
+#include "DIA_coreToolkit.h"
+#include "swresize.h"
+/**
+    \fn DIA_resize
+    \brief Handle resize dialo
+*/
+bool         DIA_resize(uint32_t originalWidth,uint32_t originalHeight,uint32_t fps1000,swresize *resize)
+{
+     return true;
+}  
+//********************************************
+//EOF

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/resize/gtk/gtk_resize.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/resize/gtk/gtk_resize.cpp	2009-11-28 13:48:16 UTC (rev 5579)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/resize/gtk/gtk_resize.cpp	2009-11-28 13:48:17 UTC (rev 5580)
@@ -16,7 +16,7 @@
 #include "ADM_toolkitGtk.h"
 #include "ADM_default.h"
 #define aprintf(...) {}
-
+#include "swresize.h"
 #include <gdk/gdkkeysyms.h>
 #include <gtk/gtk.h>
 
@@ -54,11 +54,12 @@
 								{1.,1.066667,1.43} // PAL  1:1 4:3 16:9
 							};
 static int pal=1;
-/*----------------------------------------------*/
-uint8_t DIA_resize(uint32_t *width,uint32_t *height,uint32_t *alg,uint32_t originalw, uint32_t originalh,uint32_t fps1000)
+/**
+    \fn DIA_resize
+    \brief Dialog for resizer, gtk flavor
+*/
+bool         DIA_resize(uint32_t originalWidth,uint32_t originalHeight,uint32_t fps1000,swresize *resize)
 {
-
-
 	char str[100];
 	uint8_t ret=0;
 
@@ -74,11 +75,11 @@
 		pal=0;
 	}
 
-	ow=originalw;
-	oh=originalh;
+	ow=originalWidth;
+	oh=originalHeight;
 
-	iw=*width;
-	ih=*height;
+	iw=resize->width;
+	ih=resize->height;
 	dialog=create_dialog1();
 	//gtk_transient(dialog);
         gtk_register_dialog(dialog);
@@ -91,13 +92,15 @@
 	gtk_adjustment_set_value( GTK_ADJUSTMENT(adj_angle),(  gdouble  ) val );
 
 	// remember algo
- 	gtk_option_menu_set_history (GTK_OPTION_MENU (WID(optionmenu1)), *alg);
+ 	gtk_option_menu_set_history (GTK_OPTION_MENU (WID(optionmenu1)), resize->algo);
+    gtk_option_menu_set_history (GTK_OPTION_MENU (WID(optionmenu_source)), resize->sourceAR);
+    gtk_option_menu_set_history (GTK_OPTION_MENU (WID(optionmenu_dest)), resize->targetAR);
 
 
 	#define CONNECT(w,x) gtk_signal_connect(GTK_OBJECT(lookup_widget(dialog,#w)), #x, \
 		       GTK_SIGNAL_FUNC(drag), NULL)
 
-		       	CONNECT(hscale1,drag_data_received);
+            CONNECT(hscale1,drag_data_received);
 			CONNECT(hscale1,drag_motion);
 			CONNECT(hscale1,drag_data_get);
 			CONNECT(hscale1,drag_begin);
@@ -115,9 +118,11 @@
 			case GTK_RESPONSE_OK:
 				gchar *s;
 
-                                SPIN_GET(spinbutton_width,*width);
-                                SPIN_GET(spinbutton_height,*height);
-				*alg= getRangeInMenu(lookup_widget(dialog,"optionmenu1"));
+                SPIN_GET(spinbutton_width,resize->width);
+                SPIN_GET(spinbutton_height,resize->height);
+                resize->algo= getRangeInMenu(lookup_widget(dialog,"optionmenu1"));
+                resize->sourceAR=getRangeInMenu(WID(optionmenu_source));
+                resize->targetAR=getRangeInMenu(WID(optionmenu_dest));
 				ret=1;
 				stop=1;
 				break;
@@ -132,7 +137,7 @@
 		}
 
 	}
-        gtk_unregister_dialog(dialog);
+    gtk_unregister_dialog(dialog);
 	gtk_widget_destroy(dialog);
 
 	return ret;

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/resize/qt4/Q_resize.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/resize/qt4/Q_resize.cpp	2009-11-28 13:48:16 UTC (rev 5579)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/resize/qt4/Q_resize.cpp	2009-11-28 13:48:17 UTC (rev 5580)
@@ -15,7 +15,9 @@
 #include <math.h>
 
 #include "Q_resize.h"
+#include "ADM_default.h"
 #include "DIA_coreToolkit.h"
+#include "ADM_toolkitQt.h"
 
 static double aspectRatio[2][3]={
                               {1.,0.888888,1.19}, // NTSC 1:1 4:3 16:9
@@ -23,14 +25,17 @@
                             };
 #define aprintf
 
-resizeWindow::resizeWindow(resParam *param) : QDialog()
+resizeWindow::resizeWindow(QWidget *parent, resParam *param) : QDialog(parent)
  {
      ui.setupUi(this);
 	 lastPercentage = 100;
      _param=param;
-     ui.spinBoxWidth->setValue(_param->width);
-     ui.spinBoxHeight->setValue(_param->height);
+     ui.spinBoxWidth->setValue(_param->rsz.width);
+     ui.spinBoxHeight->setValue(_param->rsz.height);
      ui.horizontalSlider->setValue(100);
+	 ui.comboBoxAlgo->setCurrentIndex(_param->rsz.algo);
+     ui.comboBoxSource->setCurrentIndex(_param->rsz.sourceAR);
+     ui.comboBoxDestination->setCurrentIndex(_param->rsz.targetAR);
      updateWidthHeightSpinners();
 
 	 connect(ui.comboBoxSource, SIGNAL(currentIndexChanged(int)), this, SLOT(aspectRatioChanged(int)));
@@ -44,9 +49,11 @@
 
  void resizeWindow::gather(void)
  {
-    _param->width=ui.spinBoxWidth->value();
-    _param->height=ui.spinBoxHeight->value();
-    _param->algo=ui.comboBoxAlgo->currentIndex();
+    _param->rsz.width=ui.spinBoxWidth->value();
+    _param->rsz.height=ui.spinBoxHeight->value();
+    _param->rsz.algo=ui.comboBoxAlgo->currentIndex();
+    _param->rsz.sourceAR=ui.comboBoxSource->currentIndex();
+    _param->rsz.targetAR=ui.comboBoxDestination->currentIndex();
  }
  
  void resizeWindow::sliderChanged(int value)
@@ -250,10 +257,16 @@
     \fn DIA_resize
     \brief Handle resize dialo
 */
-uint8_t DIA_resize(uint32_t *width,uint32_t *height,uint32_t *alg,uint32_t originalw, uint32_t originalh,uint32_t fps1000)
+bool         DIA_resize(uint32_t originalWidth,uint32_t originalHeight,uint32_t fps1000,swresize *resize)
 {
-uint8_t r=0;
-      resParam param={*width,*height,originalw,originalh,fps1000,*alg,0};
+bool r=false;
+      resParam param={  
+                        originalWidth,
+                        originalHeight,
+                        fps1000,
+                        0,
+                        *resize
+                    };
       //
       if(fps1000>24600 && fps1000<25400)
         {
@@ -262,16 +275,19 @@
        
 
      // Fetch info
-     resizeWindow resizewindow(&param) ;
-     ;
+     resizeWindow resizewindow(qtLastRegisteredDialog(), &param);
+
+     qtRegisterDialog(&resizewindow);
+
      if(resizewindow.exec()==QDialog::Accepted)
      {
        resizewindow.gather();
-       *width=param.width;
-       *height=param.height;
-       *alg=param.algo;
-       r=1;
+       *resize=param.rsz;
+       r=true;
      }
+
+	 qtUnregisterDialog(&resizewindow);
+
      return r;
 }  
 //********************************************

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/resize/qt4/Q_resize.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/resize/qt4/Q_resize.h	2009-11-28 13:48:16 UTC (rev 5579)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/resize/qt4/Q_resize.h	2009-11-28 13:48:17 UTC (rev 5580)
@@ -1,31 +1,47 @@
-#ifndef Q_resizing_h
-#define Q_resizing_h
-
-#include "ui_resizing.h"
-
+#ifndef Q_resizing_h
+#define Q_resizing_h
+
+#include "ui_resizing.h"
+#include "ADM_default.h"
+#include "swresize.h"
+
 typedef struct resParam
 {
-	uint32_t width,height;
 	uint32_t originalWidth, originalHeight;
 	uint32_t fps1000;
-	uint32_t algo;
-	uint32_t pal;
-} resParam;
-
+    uint32_t pal;
+    swresize rsz;
+	
+} resParam;
+
 class resizeWindow : public QDialog
 {
 	Q_OBJECT
 
-protected: 
+private:
+	int lastPercentage;
+	void updateWidthHeightSpinners(bool useHeightAsRef = false);
+	void updateSlider();
+	void connectDimensionControls();
+	void disconnectDimensionControls();
+	void roundUp(int xx, int yy);
+
+protected:
 	resParam *_param;
 
 public:
-	resizeWindow(resParam *param);
-	~resizeWindow();
+	resizeWindow(QWidget *parent, resParam *param);
 	Ui_resizeDialog ui;
 
 public slots:
 	void gather(void);
-	void update(int i);
+	void okButtonClicked();
+	void sliderChanged(int value);
+	void percentageSpinBoxChanged(int value);
+	void widthSpinBoxChanged(int value);
+	void heightSpinBoxChanged(int value);
+	void lockArToggled(bool toggled);
+	void roundupToggled(bool toggled);
+	void aspectRatioChanged(int index);
 };
-#endif	// Q_resizing_h
+#endif	// Q_resizing_h

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/resize/swScaleResize.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/resize/swScaleResize.cpp	2009-11-28 13:48:16 UTC (rev 5579)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/resize/swScaleResize.cpp	2009-11-28 13:48:17 UTC (rev 5580)
@@ -71,7 +71,7 @@
 // Add the hook to make it valid plugin
 DECLARE_VIDEO_FILTER(   swScaleResizeFilter,   // Class
                         1,0,0,              // Version
-                        ADM_UI_ALL,         // UI
+                        ADM_UI_TYPE_BUILD,         // UI
                         VF_TRANSFORM,            // Category
                         "swscale",            // internal name (must be uniq!)
                         "swsResize",            // Display name
@@ -240,25 +240,17 @@
 
 
 }
+
+extern bool         DIA_resize(uint32_t originalWidth,uint32_t originalHeight,uint32_t fps1000,swresize *resize);
 /**
     \fn configure
 
 */
 bool         swScaleResizeFilter::configure(void) 
 {
-    // Simple resampler using dialogFactory
-#define PX(x) &(configuration.x)
-        diaElemUInteger  W(PX(width),"Width", 16, 4096,"");
-        diaElemUInteger  H(PX(height),"Height", 16, 4096,"");
-        diaElem *tabs[]={&W,&H};
-        if( diaFactoryRun(("SwScaler Resize"),2,tabs))
-        {
-            // Update info
-            info.height=configuration.height;
-            info.width=configuration.width;
-            reset(info.width, info.height,configuration.algo);
-            return true;
-        }
-        return false;
+    uint32_t fps1000=23976;
+    return DIA_resize(previousFilter->getInfo()->width,previousFilter->getInfo()->height,
+                        fps1000,&configuration);
+
 }
 //EOF



From mean at mail.berlios.de  Sat Nov 28 14:48:16 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sat, 28 Nov 2009 14:48:16 +0100
Subject: [Avidemux-svn-commit] r5579 -
	branches/avidemux_2.6_branch_mean/cmake
Message-ID: <200911281348.nASDmGeS013450@sheep.berlios.de>

Author: mean
Date: 2009-11-28 14:48:16 +0100 (Sat, 28 Nov 2009)
New Revision: 5579

Modified:
   branches/avidemux_2.6_branch_mean/cmake/vf_plugin_gtk.cmake
   branches/avidemux_2.6_branch_mean/cmake/vf_plugin_qt4.cmake
Log:
[cmake] Fix qt/gtk wrapper + add cli wrapper

Modified: branches/avidemux_2.6_branch_mean/cmake/vf_plugin_gtk.cmake
===================================================================
--- branches/avidemux_2.6_branch_mean/cmake/vf_plugin_gtk.cmake	2009-11-28 13:48:15 UTC (rev 5578)
+++ branches/avidemux_2.6_branch_mean/cmake/vf_plugin_gtk.cmake	2009-11-28 13:48:16 UTC (rev 5579)
@@ -1,4 +1,4 @@
-MACRO(INIT_VIDEOFILTER_PLUGIN_GTK  lib  _srcsGtk )
+MACRO(INIT_VIDEO_FILTER_GTK  lib  _srcsGtk )
 INCLUDE(admCheckGtk)
 INCLUDE(admCheckGettext)
 
@@ -16,7 +16,7 @@
         ADD_DEFINITIONS(${GTK_CFLAGS})
 
         ADD_LIBRARY(${lib} SHARED ${ARGN} ${_srcsGtk})
-        INCLUDE_DIRECTORIES(${AVIDEMUX_TOP_SOURCE_DIR}/avidemux/ADM_UIs/ADM_GTK/include/)
+        INCLUDE_DIRECTORIES(${AVIDEMUX_TOP_SOURCE_DIR}/avidemux/gtk/ADM_UIs/include/)
         TARGET_LINK_LIBRARIES( ${lib} ADM_UIGtk6 ADM_render6_gtk)
         TARGET_LINK_LIBRARIES(${lib} ${GTK_LDFLAGS} ${GTHREAD_LDFLAGS})
 
@@ -24,7 +24,7 @@
 		TARGET_LINK_LIBRARIES(${lib} ${GETTEXT_LIBRARY_DIR})
 	ENDIF(GETTEXT_FOUND)
 		ADD_TARGET_CFLAGS(${lib} "-DADM_UI_TYPE_BUILD=2")
-        INIT_VIDEOFILTER_PLUGIN(${lib})
-        INSTALL_VIDEOFILTER(${lib})
+        INIT_VIDEO_FILTER(${lib})
+        INSTALL_VIDEO_FILTER(${lib})
 ENDIF (GTK_FOUND AND GTHREAD_FOUND)
-ENDMACRO(INIT_VIDEOFILTER_PLUGIN_GTK)
+ENDMACRO(INIT_VIDEO_FILTER_GTK)

Modified: branches/avidemux_2.6_branch_mean/cmake/vf_plugin_qt4.cmake
===================================================================
--- branches/avidemux_2.6_branch_mean/cmake/vf_plugin_qt4.cmake	2009-11-28 13:48:15 UTC (rev 5578)
+++ branches/avidemux_2.6_branch_mean/cmake/vf_plugin_qt4.cmake	2009-11-28 13:48:16 UTC (rev 5579)
@@ -1,24 +1,20 @@
-MACRO(INIT_VIDEOFILTER_PLUGIN_QT4  lib  _srcsQt _headersQt _srcQt_ui  )
+MACRO(INIT_VIDEO_FILTER_QT4  lib  _srcsQt _headersQt _srcQt_ui  )
 	INCLUDE(admCheckQt4)
 
 	checkQt4()
 
 	IF (QT4_FOUND)
 		INCLUDE_DIRECTORIES(${CMAKE_CURRENT_BINARY_DIR} ${QT_INCLUDE_DIR})
-		INCLUDE_DIRECTORIES(${CMAKE_CURRENT_BINARY_DIR}/qt4)
-		INCLUDE_DIRECTORIES(${AVIDEMUX_TOP_SOURCE_DIR}/avidemux/ADM_UIs/ADM_QT4/include/)
-
+		INCLUDE_DIRECTORIES(${AVIDEMUX_TOP_SOURCE_DIR}/avidemux/qt4/ADM_UIs/include/)
 		QT4_WRAP_UI(qt4_ui ${_srcQt_ui}.ui)
 		QT4_WRAP_CPP(qt4_cpp ${_headersQt})
 
 		ADD_LIBRARY(${lib} SHARED ${ARGN} ${_srcsQt} ${qt4_cpp} ${qt4_ui})
 		ADD_TARGET_CFLAGS(${lib} "-DADM_UI_TYPE_BUILD=4")
-	        ADD_TARGET_CFLAGS(${lib} "-I${CMAKE_BINARY_DIR}/config/qt4 ")
-
 		TARGET_LINK_LIBRARIES( ${lib} ADM_UIQT4  ADM_render6_qt4)
 		TARGET_LINK_LIBRARIES(${lib} ${QT_QTGUI_LIBRARY} ${QT_QTCORE_LIBRARY})
 
-		INIT_VIDEOFILTER_PLUGIN(${lib})
-		INSTALL_VIDEOFILTER(${lib})
+		INIT_VIDEO_FILTER(${lib})
+		INSTALL_VIDEO_FILTER(${lib})
 	ENDIF (QT4_FOUND)
-ENDMACRO(INIT_VIDEOFILTER_PLUGIN_QT4)
+ENDMACRO(INIT_VIDEO_FILTER_QT4)



From mean at mail.berlios.de  Sat Nov 28 14:48:21 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sat, 28 Nov 2009 14:48:21 +0100
Subject: [Avidemux-svn-commit] r5582 - in
	branches/avidemux_2.6_branch_mean/avidemux_core:
	ADM_coreUtils/include ADM_coreUtils/src ADM_coreVideoFilter/include
Message-ID: <200911281348.nASDmLpO013480@sheep.berlios.de>

Author: mean
Date: 2009-11-28 14:48:21 +0100 (Sat, 28 Nov 2009)
New Revision: 5582

Added:
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/include/ADM_coreUtils.h
Modified:
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/src/avidemutils.cpp
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoFilter/include/ADM_coreVideoFilterInternal.h
Log:
[Filter] Add fps1000<->timeincrement translation function

Added: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/include/ADM_coreUtils.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/include/ADM_coreUtils.h	2009-11-28 13:48:19 UTC (rev 5581)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/include/ADM_coreUtils.h	2009-11-28 13:48:21 UTC (rev 5582)
@@ -0,0 +1,17 @@
+/**
+    \file ADM_coreUtils.h
+    \brief Declaration of coreUtils
+
+*/
+#ifndef ADM_CORE_UTILS_H
+#define ADM_CORE_UTILS_H
+
+bool        ADM_findMpegStartCode(uint8_t *start, uint8_t *end,uint8_t *outstartcode,uint32_t *offset);
+char        *ADM_escape(const ADM_filename *incoming);
+uint32_t    ADM_computeBitrate(uint32_t fps1000, uint32_t nbFrame, uint32_t sizeInMB);
+uint32_t    ADM_UsecFromFps1000(uint32_t fps1000);
+uint32_t    ADM_Fps1000FromUs(uint64_t us);
+
+
+
+#endif
\ No newline at end of file

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/src/avidemutils.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/src/avidemutils.cpp	2009-11-28 13:48:19 UTC (rev 5581)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/src/avidemutils.cpp	2009-11-28 13:48:21 UTC (rev 5582)
@@ -33,6 +33,7 @@
 void     memcpyswap(uint8_t *dest, uint8_t *src, uint32_t size);
 uint32_t ADM_computeBitrate(uint32_t fps1000, uint32_t nbFrame, uint32_t sizeInMB);
 uint32_t ADM_UsecFromFps1000(uint32_t fps1000);
+uint32_t ADM_Fps1000FromUs(uint64_t us);
 //_________________________________________________
 //      Convert a frame number into equivalent in ms
 //_________________________________________________
@@ -283,6 +284,20 @@
       return (uint32_t) floor(f);
 
 }
+/**
+    \fn ADM_Fps1000FromUs
+    \brief time increment to fps1000
+*/
+uint32_t ADM_Fps1000FromUs(uint64_t us)
+{
+    if(us<1000) return 1000;
+    float f;
+    f=us;
+    f=1000000./f;
+    f*=1000;
+    return (uint32_t)(f+0.5);
+
+}
 void printBih(ADM_BITMAPINFOHEADER *bi)
 {
 #undef X_DUMP

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoFilter/include/ADM_coreVideoFilterInternal.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoFilter/include/ADM_coreVideoFilterInternal.h	2009-11-28 13:48:19 UTC (rev 5581)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoFilter/include/ADM_coreVideoFilterInternal.h	2009-11-28 13:48:21 UTC (rev 5582)
@@ -10,6 +10,7 @@
 #include "ADM_coreVideoFilter.h"
 #include "ADM_filterCategory.h"
 #include "ADM_paramList.h"
+#include "ADM_coreUtils.h"
 
 #define VF_API_VERSION 1
 /* These are the 6 functions exported by each plugin ...*/



From mean at mail.berlios.de  Sat Nov 28 14:48:19 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sat, 28 Nov 2009 14:48:19 +0100
Subject: [Avidemux-svn-commit] r5581 - in branches/avidemux_2.6_branch_mean:
	. avidemux_plugins avidemux_plugins/ADM_videoFilters6/resize
	avidemux_plugins/ADM_videoFilters6/verticalFlip cmake
Message-ID: <200911281348.nASDmJ0p013470@sheep.berlios.de>

Author: mean
Date: 2009-11-28 14:48:19 +0100 (Sat, 28 Nov 2009)
New Revision: 5581

Modified:
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/resize/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/resize/swScaleResize.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/verticalFlip/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux_plugins/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux_plugins/pluginsPackageDebian.cmake
   branches/avidemux_2.6_branch_mean/bootStrap.bash
   branches/avidemux_2.6_branch_mean/cmake/admConfigSummary.cmake
   branches/avidemux_2.6_branch_mean/cmake/admPluginConfigSummary.cmake
   branches/avidemux_2.6_branch_mean/cmake/vf_plugin.cmake
   branches/avidemux_2.6_branch_mean/cmake/vf_plugin_gtk.cmake
   branches/avidemux_2.6_branch_mean/cmake/vf_plugin_qt4.cmake
Log:
[All] Build plugin related to flavor

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/resize/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/resize/CMakeLists.txt	2009-11-28 13:48:17 UTC (rev 5580)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/resize/CMakeLists.txt	2009-11-28 13:48:19 UTC (rev 5581)
@@ -9,7 +9,9 @@
 SET(ADM_vf_swscaleResize_QT4_Headers qt4/Q_resize.h)
 SET(ADM_vf_swscaleResize_QT4_UI      qt4/resizing)
 INIT_VIDEO_FILTER_QT4(ADM_vf_swscaleResize_qt4 ${ADM_vf_swscaleResize_QT4_SRCS} ${ADM_vf_swscaleResize_QT4_Headers} ${ADM_vf_swscaleResize_QT4_UI} ${ADM_vf_swscaleResize_SRCS})
-TARGET_LINK_LIBRARIES(ADM_vf_swscaleResize_qt4 ADM_libswscale6 )
+IF(DO_QT4)
+    TARGET_LINK_LIBRARIES(ADM_vf_swscaleResize_qt4 ADM_libswscale6 )
+ENDIF(DO_QT4)
 # /QT4
 
 
@@ -17,13 +19,16 @@
 INCLUDE(vf_plugin_gtk)
 SET(ADM_vf_swscaleResize_GTK_SRCS    gtk/gtk_resize.cpp)
 INIT_VIDEO_FILTER_GTK(ADM_vf_swscaleResize_gtk ${ADM_vf_swscaleResize_GTK_SRCS} ${ADM_vf_swscaleResize_SRCS})
-TARGET_LINK_LIBRARIES(ADM_vf_swscaleResize_gtk ADM_libswscale6 )
+IF(DO_GTK)
+    TARGET_LINK_LIBRARIES(ADM_vf_swscaleResize_gtk ADM_libswscale6 )
+ENDIF(DO_GTK)
 
 # ----------------- CLI Version -----------------------
-#INCLUDE(vf_plugin_cli)
-#SET(ADM_vf_swscaleResize_CLI_SRCS    cli/cli_resize.cpp)
-#INIT_VIDEO_FILTER_CLI(ADM_vf_swscaleResize_cli ${ADM_vf_swscaleResize_CLI_SRCS} ${ADM_vf_swscaleResize_SRCS})
-#TARGET_LINK_LIBRARIES(ADM_vf_swscaleResize_cli ADM_libswscale6 )
+INCLUDE(vf_plugin_cli)
+SET(ADM_vf_swscaleResize_CLI_SRCS    cli/cli_resize.cpp)
+INIT_VIDEO_FILTER_CLI(ADM_vf_swscaleResize_cli ${ADM_vf_swscaleResize_SRCS} ${ADM_vf_swscaleResize_CLI_SRCS})
+IF(DO_CLI)
+    TARGET_LINK_LIBRARIES(ADM_vf_swscaleResize_cli ADM_libswscale6 )
+ENDIF(DO_CLI)
 
-
-# /QT4
\ No newline at end of file
+# /QT4

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/resize/swScaleResize.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/resize/swScaleResize.cpp	2009-11-28 13:48:17 UTC (rev 5580)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/resize/swScaleResize.cpp	2009-11-28 13:48:19 UTC (rev 5581)
@@ -248,7 +248,7 @@
 */
 bool         swScaleResizeFilter::configure(void) 
 {
-    uint32_t fps1000=23976;
+    uint32_t fps1000=ADM_Fps1000FromUs(info.frameIncrement);
     return DIA_resize(previousFilter->getInfo()->width,previousFilter->getInfo()->height,
                         fps1000,&configuration);
 

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/verticalFlip/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/verticalFlip/CMakeLists.txt	2009-11-28 13:48:17 UTC (rev 5580)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/verticalFlip/CMakeLists.txt	2009-11-28 13:48:19 UTC (rev 5581)
@@ -3,7 +3,7 @@
 
 SET(ADM_vf_vflip_SRCS verticalFlip.cpp)
 
-ADD_LIBRARY(ADM_vf_vflip SHARED ${ADM_vf_vflip_SRCS})
+ADD_VIDEO_FILTER(ADM_vf_vflip ${ADM_vf_vflip_SRCS})
 
 INIT_VIDEO_FILTER(ADM_vf_vflip)
 INSTALL_VIDEO_FILTER(ADM_vf_vflip)

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/CMakeLists.txt	2009-11-28 13:48:17 UTC (rev 5580)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/CMakeLists.txt	2009-11-28 13:48:19 UTC (rev 5581)
@@ -41,30 +41,118 @@
 # Global options
 ########################################
 OPTION(VERBOSE "" OFF)
-
+########################################
+# Select our UI
+########################################
+SET(DO_GTK    0)
+SET(DO_QT4    0)
+SET(DO_COMMON 0)
+SET(DO_CLI    0)
+
+IF (NOT PLUGIN_UI)
+	MESSAGE(FATAL_ERROR "Please add -DPLUGIN_UI=[ALL|QT4|GTK|CLI|COMMON]")
+ENDIF (NOT PLUGIN_UI)
+if(PLUGIN_UI MATCHES "ALL")
+    SET(DO_COMMON 1)
+    SET(DO_GTK    1)
+    SET(DO_QT4    1)
+    SET(DO_CLI    1)
+endif(PLUGIN_UI MATCHES "ALL")
+if(PLUGIN_UI MATCHES "QT4")
+    SET(DO_QT4    1)
+endif(PLUGIN_UI MATCHES "QT4")
+if(PLUGIN_UI MATCHES "GTK")
+    SET(DO_GTK    1)
+endif(PLUGIN_UI MATCHES "GTK")
+if(PLUGIN_UI MATCHES "COMMON")
+    SET(DO_GTK    1)
+endif(PLUGIN_UI MATCHES "COMMON")
+if(PLUGIN_UI MATCHES "CLI")
+    SET(DO_CLI    1)
+endif(PLUGIN_UI MATCHES "CLI")
+MESSAGE(STATUS "Plugin UI : ${PLUGIN_UI}")
 ########################################
-# Check for libraries
-########################################
+# Check for UI libraries
+########################################
+MACRO(CHECK_ADM_CONFIG_H flavor result)
+    MESSAGE(STATUS "Checking for avidemux/${flavor} includes and lib...")
+    MESSAGE(STATUS "It should be ${AVIDEMUX_INCLUDE_DIR}/avidemux/2.6/${flavor}/config.h")
+    set(ADM_INC "NOTFOUND")
+    FIND_PATH(ADM_INC config.h "${AVIDEMUX_INCLUDE_DIR}/avidemux/2.6/${flavor}")
+    #MESSAGE(STATUS "result : ${ADM_INC_NOT_FOUND},${ADM_INC}")
+    IF(${ADM_INC} MATCHES "NOTFOUND")
+        SET(${result} 0)
+        MESSAGE(STATUS "Include for ${flavor} not found")
+    ELSE(${ADM_INC} MATCHES "NOTFOUND")
+        SET(${result} 1)
+        MESSAGE(STATUS "Include for ${flavor} found")
+    ENDIF(${ADM_INC} MATCHES "NOTFOUND")
+ENDMACRO(CHECK_ADM_CONFIG_H flavor result)
+#*****
+# GTK
+#*****
+MESSAGE(STATUS "Checking flavors to build (gtk/qt4/...)")
+MESSAGE(STATUS "***************************************")
+if(DO_GTK)
+    INCLUDE(admCheckGtk)
+    INCLUDE(admCheckGlade)
+    INCLUDE(admCheckGettext)
+    checkGtk()
+    checkGlade()
+    checkGettext()
+    IF (GTK_FOUND AND GTHREAD_FOUND)
+        MESSAGE(STATUS "Gtk and gthread found, good")
+        CHECK_ADM_CONFIG_H(gtk ADM_INC)
+        IF(NOT ADM_INC)
+            MESSAGE(ERROR " GTK UI requested, but cannot find header file for avidemux/gtk...disabling it")
+            SET(DO_GTK 0)
+        ENDIF(NOT ADM_INC)
+    else (GTK_FOUND AND GTHREAD_FOUND)
+        MESSAGE(ERROR " GTK UI requested, but gtk/gthread libraties not found... disabling it")
+        SET(DO_GTK 0)
+    endif (GTK_FOUND AND GTHREAD_FOUND)
+endif(DO_GTK)
+#*****
+# QT4
+#*****
+if(DO_QT4)
+    INCLUDE(admCheckQt4)
+    checkQt4()
+    IF (NOT QT4_FOUND)
+        SET(DO_QT4 0)
+        MESSAGE(ERROR " QT4 UI requested, but qt4 libraties not found... disabling it")
+    ELSE (NOT QT4_FOUND)
+        MESSAGE(STATUS " QT4 libraries found, good")
+        CHECK_ADM_CONFIG_H(qt4 ADM_INC)
+        IF(NOT ADM_INC)
+            MESSAGE(ERROR " QT4 UI requested, but cannot find header file for avidemux/qt4...disabling it")
+            SET(DO_QT4 0)
+        ENDIF(NOT ADM_INC)
+    ENDIF (NOT QT4_FOUND)
+endif(DO_QT4)
+#*****
+# CLI
+#*****
+if(DO_CLI)
+        CHECK_ADM_CONFIG_H(cli ADM_INC)
+        IF(NOT ADM_INC)
+            MESSAGE(ERROR " CLI UI requested, but cannot find header file for avidemux/cli...disabling it")
+            SET(DO_CLI 0)
+        ENDIF(NOT ADM_INC)
+endif(DO_CLI)
 
-INCLUDE(admCheckGtk)
-INCLUDE(admCheckGlade)
-checkGtk()
-checkGlade()
-
-INCLUDE(admCheckQt4)
-checkQt4()
-
 ########################################
 # Actual work to do..
-########################################
-ADD_SUBDIRECTORY(ADM_audioDecoders)
-ADD_SUBDIRECTORY(ADM_audioDevices)
-ADD_SUBDIRECTORY(ADM_videoEncoder)
+########################################
+IF(DO_COMMON)
+    ADD_SUBDIRECTORY(ADM_audioDecoders)
+    ADD_SUBDIRECTORY(ADM_audioDevices)
+    ADD_SUBDIRECTORY(ADM_videoEncoder)
+    ADD_SUBDIRECTORY(ADM_audioEncoders)
+    ADD_SUBDIRECTORY(ADM_demuxers)
+    ADD_SUBDIRECTORY(ADM_muxers)
+ENDIF(DO_COMMON)
 ADD_SUBDIRECTORY(ADM_videoFilters6)
-ADD_SUBDIRECTORY(ADM_audioEncoders)
-ADD_SUBDIRECTORY(ADM_demuxers)
-ADD_SUBDIRECTORY(ADM_muxers)
-
 ########################################
 # Config Summary
 ########################################

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/pluginsPackageDebian.cmake
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/pluginsPackageDebian.cmake	2009-11-28 13:48:17 UTC (rev 5580)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/pluginsPackageDebian.cmake	2009-11-28 13:48:19 UTC (rev 5581)
@@ -2,7 +2,7 @@
 # DEBIAN
 ##############################
 SET(CPACK_SET_DESTDIR "ON")
-SET(CPACK_DEBIAN_PACKAGE_NAME "avidemux3-plugins")
+SET(CPACK_DEBIAN_PACKAGE_NAME "avidemux3-plugins-${PLUGIN_UI}")
 SET (CPACK_GENERATOR "DEB")
 # ARCH
 IF (X86_64_SUPPORTED)
@@ -28,7 +28,7 @@
 SET(CPACK_PACKAGE_VERSION_PATCH "0")
 SET(CPACK_PACKAGE_VERSION_PATCH "0-${ADM_SUBVERSION}")
 #
-SET(CPACK_PACKAGE_NAME "avidemux3-plugins")
+SET(CPACK_PACKAGE_NAME "avidemux3-plugins-${PLUGIN_UI}")
 #
 
 include(CPack)

Modified: branches/avidemux_2.6_branch_mean/bootStrap.bash
===================================================================
--- branches/avidemux_2.6_branch_mean/bootStrap.bash	2009-11-28 13:48:17 UTC (rev 5580)
+++ branches/avidemux_2.6_branch_mean/bootStrap.bash	2009-11-28 13:48:19 UTC (rev 5581)
@@ -14,11 +14,12 @@
 {
         export BUILDDIR=$1
         export SOURCEDIR=$2
-        echo "Building $BUILDDIR from $SOURCEDIR"
+        export EXTRA=$3
+        echo "Building $BUILDDIR from $SOURCEDIRi with EXTRA=$EXTRA"
         rm -Rf ./$BUILDDIR
         mkdir $BUILDDIR || fail mkdir
         cd $BUILDDIR 
-        cmake -DAVIDEMUX_SOURCE_DIR=$TOP -DCMAKE_INSTALL_PREFIX=/usr $SOURCEDIR || fail cmake
+        cmake -DCMAKE_EDIT_COMMAND=vim -DAVIDEMUX_SOURCE_DIR=$TOP -DCMAKE_INSTALL_PREFIX=/usr $EXTRA $SOURCEDIR || fail cmake
         make -j 2 > /tmp/log$BUILDDIR || fail make
         fakeroot make package DESTDIR=debPack || fail package
 }
@@ -134,8 +135,24 @@
 if [ "x$do_plugins" = "x1" ] ; then 
         echo "** Plugins **"
         cd $TOP
-        Process buildPlugins ../avidemux_plugins
+        Process buildPluginsCommon ../avidemux_plugins -DPLUGIN_UI=COMMON
 fi
+if [ "x$do_plugins" = "x1" -a "x$do_qt4" = "x1" ] ; then 
+        echo "** Plugins Qt4 **"
+        cd $TOP
+        Process buildPluginsQt4 ../avidemux_plugins -DPLUGIN_UI=QT4
+fi
+if [ "x$do_plugins" = "x1" -a "x$do_gtk" = "x1" ] ; then 
+        echo "** Plugins Gtk **"
+        cd $TOP
+        Process buildPluginsGtk ../avidemux_plugins -DPLUGIN_UI=GTK
+fi
+if [ "x$do_plugins" = "x1" -a "x$do_cli" = "x1" ] ; then 
+        echo "** Plugins CLI **"
+        cd $TOP
+        Process buildPluginsCLI ../avidemux_plugins -DPLUGIN_UI=CLI
+fi
+
 echo "** Preparing debs **"
 cd $TOP
 rm -Rf debs

Modified: branches/avidemux_2.6_branch_mean/cmake/admConfigSummary.cmake
===================================================================
--- branches/avidemux_2.6_branch_mean/cmake/admConfigSummary.cmake	2009-11-28 13:48:17 UTC (rev 5580)
+++ branches/avidemux_2.6_branch_mean/cmake/admConfigSummary.cmake	2009-11-28 13:48:19 UTC (rev 5581)
@@ -20,8 +20,8 @@
 MESSAGE("*********************")
 MESSAGE("***    SUMMARY    ***")
 MESSAGE("*********************")
-ADM_DISPLAY("GTK+      " "${ADM_UI_GTK}")
-ADM_DISPLAY("Qt 4      " "${ADM_UI_QT4}")
+#ADM_DISPLAY("GTK+      " "${ADM_UI_GTK}")
+#ADM_DISPLAY("Qt 4      " "${ADM_UI_QT4}")
 
 #MESSAGE("*** Audio Device  ***")
 #ADM_DISPLAY("ALSA      " "${ALSA_SUPPORT}" "${ALSA_CAPABLE}")

Modified: branches/avidemux_2.6_branch_mean/cmake/admPluginConfigSummary.cmake
===================================================================
--- branches/avidemux_2.6_branch_mean/cmake/admPluginConfigSummary.cmake	2009-11-28 13:48:17 UTC (rev 5580)
+++ branches/avidemux_2.6_branch_mean/cmake/admPluginConfigSummary.cmake	2009-11-28 13:48:19 UTC (rev 5581)
@@ -40,6 +40,11 @@
 	MESSAGE("***  Debug Build  ***")
 ELSE (CMAKE_BUILD_TYPE STREQUAL "Debug")
 	MESSAGE("*** Release Build ***")
-ENDIF(CMAKE_BUILD_TYPE STREQUAL "Debug")
+ENDIF(CMAKE_BUILD_TYPE STREQUAL "Debug")
+MESSAGE("******** UI *************")
+ADM_DISPLAY("Common    " "${DO_COMMON}")
+ADM_DISPLAY("Gtk       " "${DO_GTK}")
+ADM_DISPLAY("Qt4       " "${DO_QT4}")
+ADM_DISPLAY("Cli       " "${DO_CLI}")
 
 MESSAGE("*********************")

Modified: branches/avidemux_2.6_branch_mean/cmake/vf_plugin.cmake
===================================================================
--- branches/avidemux_2.6_branch_mean/cmake/vf_plugin.cmake	2009-11-28 13:48:17 UTC (rev 5580)
+++ branches/avidemux_2.6_branch_mean/cmake/vf_plugin.cmake	2009-11-28 13:48:19 UTC (rev 5581)
@@ -1,17 +1,38 @@
 SET(VF_PLUGIN_DIR "${CMAKE_INSTALL_PREFIX}/lib/ADM_plugins6/videoFilters/")
-MACRO(INIT_VIDEO_FILTER _lib)
-        INCLUDE_DIRECTORIES(.)
-	#INCLUDE_DIRECTORIES("${AVIDEMUX_CORECONFIG_DIR}")
+############## INIT_VIDEO_FILTER_INTERNAL ###################"
+MACRO(INIT_VIDEO_FILTER_INTERNAL _lib)
+    INCLUDE_DIRECTORIES(.)
 	INCLUDE_DIRECTORIES("${AVIDEMUX_TOP_SOURCE_DIR}/avidemux_core/ADM_core/include")
 	INCLUDE_DIRECTORIES("${AVIDEMUX_TOP_SOURCE_DIR}/avidemux_core/ADM_coreUI/include")
 	INCLUDE_DIRECTORIES("${AVIDEMUX_TOP_SOURCE_DIR}/avidemux_core/ADM_coreUtils/include/")
 	INCLUDE_DIRECTORIES("${AVIDEMUX_TOP_SOURCE_DIR}/avidemux_core/ADM_coreVideoFilter/include/")
 	INCLUDE_DIRECTORIES("${AVIDEMUX_TOP_SOURCE_DIR}/avidemux_core/ADM_coreImage/include/")
         ADD_DEFINITIONS("-DADM_MINIMAL_UI_INTERFACE")
-ENDMACRO(INIT_VIDEO_FILTER)
+ENDMACRO(INIT_VIDEO_FILTER_INTERNAL)
 
-MACRO(INSTALL_VIDEO_FILTER _lib)
+############## INIT_VIDEO_FILTER ###################"
+
+MACRO(INIT_VIDEO_FILTER _lib)
+    if(DO_COMMON)
+        INIT_VIDEO_FILTER_INTERNAL(${_lib})
+    endif(DO_COMMON)
+ENDMACRO(INIT_VIDEO_FILTER _lib)
+############## INSTALL_VIDEO_FILTER_INTERNAL ###################"
+MACRO(INSTALL_VIDEO_FILTER_INTERNAL _lib)
 	INSTALL(TARGETS ${_lib} DESTINATION "${VF_PLUGIN_DIR}")
 	TARGET_LINK_LIBRARIES(${_lib} ADM_core6 ADM_coreUI6 ADM_coreVideoFilter6 ADM_coreImage6 ADM_coreUtils6)
-ENDMACRO(INSTALL_VIDEO_FILTER)
+ENDMACRO(INSTALL_VIDEO_FILTER_INTERNAL)
 
+############## INSTALL_VIDEO_FILTER ###################"
+MACRO(INSTALL_VIDEO_FILTER _lib)
+    IF(DO_COMMON)
+        INSTALL_VIDEO_FILTER_INTERNAL(${_lib})
+    ENDIF(DO_COMMON)
+ENDMACRO(INSTALL_VIDEO_FILTER _lib)
+############## ADD_VIDEO_FILTER ###################"
+MACRO(ADD_VIDEO_FILTER name)
+    IF(DO_COMMON)
+        ADD_LIBRARY(${name} SHARED ${ARGN})
+    ENDIF(DO_COMMON)
+ENDMACRO(ADD_VIDEO_FILTER name)
+

Modified: branches/avidemux_2.6_branch_mean/cmake/vf_plugin_gtk.cmake
===================================================================
--- branches/avidemux_2.6_branch_mean/cmake/vf_plugin_gtk.cmake	2009-11-28 13:48:17 UTC (rev 5580)
+++ branches/avidemux_2.6_branch_mean/cmake/vf_plugin_gtk.cmake	2009-11-28 13:48:19 UTC (rev 5581)
@@ -1,13 +1,6 @@
 MACRO(INIT_VIDEO_FILTER_GTK  lib  _srcsGtk )
-INCLUDE(admCheckGtk)
-INCLUDE(admCheckGettext)
 
-
-checkGtk()
-
-IF (GTK_FOUND AND GTHREAD_FOUND)
-	checkGettext()
-
+IF (DO_GTK)
 	IF (GETTEXT_FOUND)
 		ADD_DEFINITIONS("-DHAVE_GETTEXT")
 		INCLUDE_DIRECTORIES(${GETTEXT_INCLUDE_DIR})
@@ -20,11 +13,11 @@
         TARGET_LINK_LIBRARIES( ${lib} ADM_UIGtk6 ADM_render6_gtk)
         TARGET_LINK_LIBRARIES(${lib} ${GTK_LDFLAGS} ${GTHREAD_LDFLAGS})
 
-	IF (GETTEXT_FOUND)
-		TARGET_LINK_LIBRARIES(${lib} ${GETTEXT_LIBRARY_DIR})
-	ENDIF(GETTEXT_FOUND)
+        IF (GETTEXT_FOUND)
+            TARGET_LINK_LIBRARIES(${lib} ${GETTEXT_LIBRARY_DIR})
+        ENDIF(GETTEXT_FOUND)
 		ADD_TARGET_CFLAGS(${lib} "-DADM_UI_TYPE_BUILD=2")
-        INIT_VIDEO_FILTER(${lib})
-        INSTALL_VIDEO_FILTER(${lib})
-ENDIF (GTK_FOUND AND GTHREAD_FOUND)
+        INIT_VIDEO_FILTER_INTERNAL(${lib})
+        INSTALL_VIDEO_FILTER_INTERNAL(${lib})
+ENDIF (DO_GTK)
 ENDMACRO(INIT_VIDEO_FILTER_GTK)

Modified: branches/avidemux_2.6_branch_mean/cmake/vf_plugin_qt4.cmake
===================================================================
--- branches/avidemux_2.6_branch_mean/cmake/vf_plugin_qt4.cmake	2009-11-28 13:48:17 UTC (rev 5580)
+++ branches/avidemux_2.6_branch_mean/cmake/vf_plugin_qt4.cmake	2009-11-28 13:48:19 UTC (rev 5581)
@@ -1,9 +1,5 @@
 MACRO(INIT_VIDEO_FILTER_QT4  lib  _srcsQt _headersQt _srcQt_ui  )
-	INCLUDE(admCheckQt4)
-
-	checkQt4()
-
-	IF (QT4_FOUND)
+	IF (DO_QT4)
 		INCLUDE_DIRECTORIES(${CMAKE_CURRENT_BINARY_DIR} ${QT_INCLUDE_DIR})
 		INCLUDE_DIRECTORIES(${AVIDEMUX_TOP_SOURCE_DIR}/avidemux/qt4/ADM_UIs/include/)
 		QT4_WRAP_UI(qt4_ui ${_srcQt_ui}.ui)
@@ -14,7 +10,7 @@
 		TARGET_LINK_LIBRARIES( ${lib} ADM_UIQT4  ADM_render6_qt4)
 		TARGET_LINK_LIBRARIES(${lib} ${QT_QTGUI_LIBRARY} ${QT_QTCORE_LIBRARY})
 
-		INIT_VIDEO_FILTER(${lib})
-		INSTALL_VIDEO_FILTER(${lib})
-	ENDIF (QT4_FOUND)
+		INIT_VIDEO_FILTER_INTERNAL(${lib})
+		INSTALL_VIDEO_FILTER_INTERNAL(${lib})
+	ENDIF (DO_QT4)
 ENDMACRO(INIT_VIDEO_FILTER_QT4)



From mean at mail.berlios.de  Sat Nov 28 14:48:22 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sat, 28 Nov 2009 14:48:22 +0100
Subject: [Avidemux-svn-commit] r5583 -
	branches/avidemux_2.6_branch_mean/cmake
Message-ID: <200911281348.nASDmMoI013490@sheep.berlios.de>

Author: mean
Date: 2009-11-28 14:48:22 +0100 (Sat, 28 Nov 2009)
New Revision: 5583

Added:
   branches/avidemux_2.6_branch_mean/cmake/vf_plugin_cli.cmake
Log:
[Filter] Cli flavor helper script

Added: branches/avidemux_2.6_branch_mean/cmake/vf_plugin_cli.cmake
===================================================================
--- branches/avidemux_2.6_branch_mean/cmake/vf_plugin_cli.cmake	2009-11-28 13:48:21 UTC (rev 5582)
+++ branches/avidemux_2.6_branch_mean/cmake/vf_plugin_cli.cmake	2009-11-28 13:48:22 UTC (rev 5583)
@@ -0,0 +1,21 @@
+MACRO(INIT_VIDEO_FILTER_CLI  lib  _srcsGtk )
+
+IF (DO_CLI)
+	IF (GETTEXT_FOUND)
+		ADD_DEFINITIONS("-DHAVE_GETTEXT")
+		INCLUDE_DIRECTORIES(${GETTEXT_INCLUDE_DIR})
+	ENDIF (GETTEXT_FOUND)
+
+
+        ADD_LIBRARY(${lib} SHARED ${ARGN} ${_srcsGtk})
+        INCLUDE_DIRECTORIES(${AVIDEMUX_TOP_SOURCE_DIR}/avidemux/cli/ADM_UIs/include/)
+        TARGET_LINK_LIBRARIES( ${lib} ADM_UIc_Cli6 ADM_render6_cli)
+
+        IF (GETTEXT_FOUND)
+            TARGET_LINK_LIBRARIES(${lib} ${GETTEXT_LIBRARY_DIR})
+        ENDIF(GETTEXT_FOUND)
+		ADD_TARGET_CFLAGS(${lib} "-DADM_UI_TYPE_BUILD=1")
+        INIT_VIDEO_FILTER_INTERNAL(${lib})
+        INSTALL_VIDEO_FILTER_INTERNAL(${lib})
+ENDIF (DO_CLI)
+ENDMACRO(INIT_VIDEO_FILTER_CLI)



From mean at mail.berlios.de  Sat Nov 28 14:48:23 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sat, 28 Nov 2009 14:48:23 +0100
Subject: [Avidemux-svn-commit] r5584 - in branches/avidemux_2.6_branch_mean:
	. foreignBuilds
Message-ID: <200911281348.nASDmNVr013500@sheep.berlios.de>

Author: mean
Date: 2009-11-28 14:48:23 +0100 (Sat, 28 Nov 2009)
New Revision: 5584

Modified:
   branches/avidemux_2.6_branch_mean/bootStrapCrossMingw_w32.sh
   branches/avidemux_2.6_branch_mean/foreignBuilds/cross_mingw_plugins
Log:
[Build] Update win32 X-scripts

Modified: branches/avidemux_2.6_branch_mean/bootStrapCrossMingw_w32.sh
===================================================================
--- branches/avidemux_2.6_branch_mean/bootStrapCrossMingw_w32.sh	2009-11-28 13:48:22 UTC (rev 5583)
+++ branches/avidemux_2.6_branch_mean/bootStrapCrossMingw_w32.sh	2009-11-28 13:48:23 UTC (rev 5584)
@@ -17,11 +17,12 @@
 {
         export BUILDDIR=$1
         export SCRIPT=$2
-        echo "Building $BUILDDIR from $SOURCEDIR"
+        export EXTRA=$3
+        echo "Building $BUILDDIR from $SOURCEDIR (Extra=$EXTRA)"
         rm -Rf ./$BUILDDIR
         mkdir $BUILDDIR || fail mkdir
         cd $BUILDDIR 
-        sh $TOP/foreignBuilds/$SCRIPT || fail cmake
+        sh $TOP/foreignBuilds/$SCRIPT $EXTRA || fail cmake
         make -j 2 > /tmp/log$BUILDDIR || fail make
         make install || fail make_install
 }
@@ -40,7 +41,8 @@
 #Process buildGtk ../avidemux/gtk
 echo "** Plugins **"
 cd $TOP
-Process buildMingwPlugins cross_mingw_plugins 
+Process buildMingwPluginsCommon cross_mingw_plugins -DPLUGIN_UI=COMMON
+Process buildMingwPluginsQt4 cross_mingw_plugins -DPLUGIN_UI=QT4
 echo "** All done **"
 cd $TOP
 echo "** ALL DONE **"

Modified: branches/avidemux_2.6_branch_mean/foreignBuilds/cross_mingw_plugins
===================================================================
--- branches/avidemux_2.6_branch_mean/foreignBuilds/cross_mingw_plugins	2009-11-28 13:48:22 UTC (rev 5583)
+++ branches/avidemux_2.6_branch_mean/foreignBuilds/cross_mingw_plugins	2009-11-28 13:48:23 UTC (rev 5584)
@@ -20,4 +20,5 @@
         -DQT_HOME:STRING=$QT_HOME \
          $DEBUG -G "CodeBlocks - Unix Makefiles"  \
         -DAVIDEMUX_SOURCE_DIR="$TOP"  \
+        $@ \
         $TOP/avidemux_plugins



From gruntster at mail.berlios.de  Sat Nov 28 17:20:47 2009
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Sat, 28 Nov 2009 17:20:47 +0100
Subject: [Avidemux-svn-commit] r5585 -
	branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog
Message-ID: <200911281620.nASGKlLX005446@sheep.berlios.de>

Author: gruntster
Date: 2009-11-28 17:20:40 +0100 (Sat, 28 Nov 2009)
New Revision: 5585

Modified:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_vobsub.cpp
Log:
[vobsub] remove Extra Shrink Factor option from GTK+ settings window since it's not used (refs #59)

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_vobsub.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_vobsub.cpp	2009-11-28 13:48:23 UTC (rev 5584)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_vobsub.cpp	2009-11-28 16:20:40 UTC (rev 5585)
@@ -172,14 +172,8 @@
   GtkWidget *label4;
   GtkWidget *optionmenu1;
   GtkWidget *label2;
-  GtkWidget *frame2;
-  GtkWidget *table2;
-  GtkWidget *label6;
-  GtkObject *spinbutton1_adj;
-  GtkWidget *spinbutton1;
   GtkWidget *label7;
   GtkWidget *entryShift;
-  GtkWidget *label5;
   GtkWidget *dialog_action_area1;
   GtkWidget *cancelbutton1;
   GtkWidget *okbutton1;
@@ -235,32 +229,9 @@
   gtk_frame_set_label_widget (GTK_FRAME (frame1), label2);
   gtk_label_set_justify (GTK_LABEL (label2), GTK_JUSTIFY_LEFT);
 
-  frame2 = gtk_frame_new (NULL);
-  gtk_widget_show (frame2);
-  gtk_box_pack_start (GTK_BOX (vbox1), frame2, TRUE, TRUE, 0);
-
-  table2 = gtk_table_new (2, 2, FALSE);
-  gtk_widget_show (table2);
-  gtk_container_add (GTK_CONTAINER (frame2), table2);
-
-  label6 = gtk_label_new (QT_TR_NOOP("Extra Shrink Factor :"));
-  gtk_widget_show (label6);
-  gtk_table_attach (GTK_TABLE (table2), label6, 0, 1, 0, 1,
-                    (GtkAttachOptions) (GTK_FILL),
-                    (GtkAttachOptions) (0), 0, 0);
-  gtk_label_set_justify (GTK_LABEL (label6), GTK_JUSTIFY_LEFT);
-  gtk_misc_set_alignment (GTK_MISC (label6), 0, 0.5);
-
-  spinbutton1_adj = gtk_adjustment_new (1, 1, 2, 0.1, 0.2, 0);
-  spinbutton1 = gtk_spin_button_new (GTK_ADJUSTMENT (spinbutton1_adj), 1, 0);
-  gtk_widget_show (spinbutton1);
-  gtk_table_attach (GTK_TABLE (table2), spinbutton1, 1, 2, 0, 1,
-                    (GtkAttachOptions) (GTK_EXPAND | GTK_FILL),
-                    (GtkAttachOptions) (0), 0, 0);
-
   label7 = gtk_label_new (QT_TR_NOOP("Shift (ms) :"));
   gtk_widget_show (label7);
-  gtk_table_attach (GTK_TABLE (table2), label7, 0, 1, 1, 2,
+  gtk_table_attach (GTK_TABLE (table1), label7, 0, 1, 2, 3,
                     (GtkAttachOptions) (GTK_FILL),
                     (GtkAttachOptions) (0), 0, 0);
   gtk_label_set_justify (GTK_LABEL (label7), GTK_JUSTIFY_LEFT);
@@ -268,15 +239,10 @@
 
   entryShift = gtk_entry_new ();
   gtk_widget_show (entryShift);
-  gtk_table_attach (GTK_TABLE (table2), entryShift, 1, 2, 1, 2,
+  gtk_table_attach (GTK_TABLE (table1), entryShift, 1, 2, 2, 3,
                     (GtkAttachOptions) (GTK_EXPAND | GTK_FILL),
                     (GtkAttachOptions) (0), 0, 0);
 
-  label5 = gtk_label_new (QT_TR_NOOP("Extra Settings"));
-  gtk_widget_show (label5);
-  gtk_frame_set_label_widget (GTK_FRAME (frame2), label5);
-  gtk_label_set_justify (GTK_LABEL (label5), GTK_JUSTIFY_LEFT);
-
   dialog_action_area1 = GTK_DIALOG (dialog1)->action_area;
   gtk_widget_show (dialog_action_area1);
   gtk_button_box_set_layout (GTK_BUTTON_BOX (dialog_action_area1), GTK_BUTTONBOX_END);
@@ -302,13 +268,8 @@
   GLADE_HOOKUP_OBJECT (dialog1, label4, "label4");
   GLADE_HOOKUP_OBJECT (dialog1, optionmenu1, "optionmenu1");
   GLADE_HOOKUP_OBJECT (dialog1, label2, "label2");
-  GLADE_HOOKUP_OBJECT (dialog1, frame2, "frame2");
-  GLADE_HOOKUP_OBJECT (dialog1, table2, "table2");
-  GLADE_HOOKUP_OBJECT (dialog1, label6, "label6");
-  GLADE_HOOKUP_OBJECT (dialog1, spinbutton1, "spinbutton1");
   GLADE_HOOKUP_OBJECT (dialog1, label7, "label7");
   GLADE_HOOKUP_OBJECT (dialog1, entryShift, "entryShift");
-  GLADE_HOOKUP_OBJECT (dialog1, label5, "label5");
   GLADE_HOOKUP_OBJECT_NO_REF (dialog1, dialog_action_area1, "dialog_action_area1");
   GLADE_HOOKUP_OBJECT (dialog1, cancelbutton1, "cancelbutton1");
   GLADE_HOOKUP_OBJECT (dialog1, okbutton1, "okbutton1");



From gruntster at mail.berlios.de  Sat Nov 28 18:52:57 2009
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Sat, 28 Nov 2009 18:52:57 +0100
Subject: [Avidemux-svn-commit] r5586 -
	branches/avidemux_2.5_branch_gruntster/avidemux
Message-ID: <200911281752.nASHqv7C025651@sheep.berlios.de>

Author: gruntster
Date: 2009-11-28 18:52:49 +0100 (Sat, 28 Nov 2009)
New Revision: 5586

Modified:
   branches/avidemux_2.5_branch_gruntster/avidemux/gtk_gui.cpp
Log:
[gui] protect frame seeking to prevent crashes in Qt interface (fixes #53)

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/gtk_gui.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/gtk_gui.cpp	2009-11-28 16:20:40 UTC (rev 5585)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/gtk_gui.cpp	2009-11-28 17:52:49 UTC (rev 5586)
@@ -566,12 +566,24 @@
       A_setPostproc();
       break;
 
-    case ACT_NextFrame:
-      GUI_NextFrame ();
-      break;
-    case ACT_NextKFrame:
-      GUI_NextKeyFrame ();
-      break;
+	case ACT_NextFrame:
+		if (!ignore_change)
+		{
+			ignore_change++;
+			GUI_NextFrame();
+			ignore_change--;
+		}
+
+		break;
+	case ACT_NextKFrame:
+		if (!ignore_change)
+		{
+			ignore_change++;
+			GUI_NextKeyFrame();
+			ignore_change--;
+		}
+
+		break;
     case ACT_NextBlackFrame:
       GUI_NextPrevBlackFrame(1);
       break;
@@ -582,9 +594,15 @@
       GUI_FileSelWrite (QT_TR_NOOP("Select File to Save"), (SELFILE_CB *)A_ListAllBlackFrames);
         break;                        
     
-    case ACT_PreviousFrame:
-        GUI_PrevFrame();
-      break;
+	case ACT_PreviousFrame:
+		if (!ignore_change)
+		{
+			ignore_change++;
+			GUI_PrevFrame();
+			ignore_change--;
+		}
+
+		break;
     case ACT_Forward100Frames:
       GUI_GoToKFrame (curframe + (avifileinfo->fps1000 / 1000 * 4));
       break;
@@ -621,9 +639,15 @@
 	}
       break;
 
-    case ACT_PreviousKFrame:
-      GUI_PreviousKeyFrame ();
-      break;
+	case ACT_PreviousKFrame:
+		if (!ignore_change)
+		{
+			ignore_change++;
+			GUI_PreviousKeyFrame();
+			ignore_change--;
+		}
+
+		break;
     case ACT_AudioSourceAvi:
       //currentaudiostream=aviaudiostream;
       A_changeAudioStream (aviaudiostream, AudioAvi,NULL);



From gruntster at mail.berlios.de  Sat Nov 28 19:10:23 2009
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Sat, 28 Nov 2009 19:10:23 +0100
Subject: [Avidemux-svn-commit] r5587 - in
	branches/avidemux_2.5_branch_gruntster/platforms/windows:
	build_scripts/avidemux installer
Message-ID: <200911281810.nASIAN6o011665@sheep.berlios.de>

Author: gruntster
Date: 2009-11-28 19:10:14 +0100 (Sat, 28 Nov 2009)
New Revision: 5587

Modified:
   branches/avidemux_2.5_branch_gruntster/platforms/windows/build_scripts/avidemux/Package Notes.xml
   branches/avidemux_2.5_branch_gruntster/platforms/windows/installer/avidemux.nsi
Log:
[win32] update installer for latest Pango runtime

Modified: branches/avidemux_2.5_branch_gruntster/platforms/windows/build_scripts/avidemux/Package Notes.xml
===================================================================
--- branches/avidemux_2.5_branch_gruntster/platforms/windows/build_scripts/avidemux/Package Notes.xml	2009-11-28 17:52:49 UTC (rev 5586)
+++ branches/avidemux_2.5_branch_gruntster/platforms/windows/build_scripts/avidemux/Package Notes.xml	2009-11-28 18:10:14 UTC (rev 5587)
@@ -1,5 +1,31 @@
 <?xml version="1.0"?>
 <log>
+  <buildentry revision="5567" date="2009-11-26">
+  </buildentry>
+  <buildentry revision="5558" date="2009-11-24">
+  </buildentry>
+  <buildentry revision="5546" date="2009-11-23">
+    <comment>Updated x264 to r1347.</comment>
+  </buildentry>
+  <buildentry revision="5530" date="2009-11-19">
+    <comment>Updated x264 to r1342.</comment>
+  </buildentry>
+  <buildentry revision="5422" date="2009-10-27">
+    <comment>Updated SDL to version 1.2.14.</comment>
+    <comment>Updated x264 to r1310.</comment>
+  </buildentry>
+  <buildentry revision="5369" date="2009-10-05">
+    <comment>Updated ATK to version 1.28.0-1.</comment>
+    <comment>Updated Fontconfig to version 2.7.3-1.</comment>
+    <comment>Updated GLib to version 2.22.1-1.</comment>
+    <comment>Updated GTK+ to version 2.18.1-1.</comment>
+    <comment>Updated libpng to version 1.2.39-1.</comment>
+    <comment>Updated Libxml2 to version 2.7.4-1.</comment>
+    <comment>Updated NSPR to version 4.8.</comment>
+    <comment>Updated opencore-amr to version 0.1.2.</comment>
+    <comment>Updated Qt to version 4.5.3.</comment>
+    <comment>Updated x264 to r1271.</comment>
+  </buildentry>
   <buildentry revision="5341" date="2009-09-17">
     <comment>Updated x264 to r1259.</comment>
   </buildentry>

Modified: branches/avidemux_2.5_branch_gruntster/platforms/windows/installer/avidemux.nsi
===================================================================
--- branches/avidemux_2.5_branch_gruntster/platforms/windows/installer/avidemux.nsi	2009-11-28 17:52:49 UTC (rev 5586)
+++ branches/avidemux_2.5_branch_gruntster/platforms/windows/installer/avidemux.nsi	2009-11-28 18:10:14 UTC (rev 5587)
@@ -333,6 +333,7 @@
         ${File} libgtk-win32-2.0-0.dll
         ${File} libpango-1.0-0.dll
         ${File} libpangocairo-1.0-0.dll
+        ${File} libpangoft2-1.0-0.dll
         ${File} libpangowin32-1.0-0.dll
         ${File} libpng12-0.dll
     ${MementoSectionEnd}



From gruntster at mail.berlios.de  Sat Nov 28 20:54:23 2009
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Sat, 28 Nov 2009 20:54:23 +0100
Subject: [Avidemux-svn-commit] r5588 - in
	branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264:
	. qt4
Message-ID: <200911281954.nASJsNAP005054@sheep.berlios.de>

Author: gruntster
Date: 2009-11-28 20:54:16 +0100 (Sat, 28 Nov 2009)
New Revision: 5588

Modified:
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/x264Options.cpp
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/x264Options.h
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/x264Param.xsd
Log:
[x264] add slicing options to Qt interface

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp	2009-11-28 18:10:14 UTC (rev 5587)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp	2009-11-28 19:54:16 UTC (rev 5588)
@@ -116,6 +116,10 @@
 	connect(ui.zoneEditButton, SIGNAL(pressed()), this, SLOT(zoneEditButton_pressed()));
 	connect(ui.zoneDeleteButton, SIGNAL(pressed()), this, SLOT(zoneDeleteButton_pressed()));
 
+#if X264_BUILD < 73
+	ui.slicingGroupBox->setEnabled(false);
+#endif
+
 	QWidgetList widgetList = QApplication::allWidgets();
 
 	for (int widgetIndex = 0; widgetIndex < widgetList.size(); widgetIndex++)
@@ -751,6 +755,12 @@
 	ui.vbvBufferSizeSpinBox->setValue(options->getVbvBufferSize());
 	ui.vbvBufferOccupancySpinBox->setValue((int)floor(options->getVbvInitialOccupancy() * 100 + .5));
 
+#if X264_BUILD >= 73
+	ui.maxSliceSizeSpinBox->setValue(options->getSliceMaxSize());
+	ui.maxSliceMbSpinBox->setValue(options->getSliceMaxMacroblocks());
+	ui.slicesPerFrameSpinBox->setValue(options->getSliceCount());
+#endif
+
 	zoneTableModel.removeRows();
 
 	int zoneCount = options->getZoneCount();
@@ -946,6 +956,12 @@
 	options->setVbvBufferSize(ui.vbvBufferSizeSpinBox->value());
 	options->setVbvInitialOccupancy((float)ui.vbvBufferOccupancySpinBox->value() / 100);
 
+#if X264_BUILD >= 73
+	options->setSliceMaxSize(ui.maxSliceSizeSpinBox->value());
+	options->setSliceMaxMacroblocks(ui.maxSliceMbSpinBox->value());
+	options->setSliceCount(ui.slicesPerFrameSpinBox->value());
+#endif
+
 	options->clearZones();
 
 	QList<x264ZoneOptions*> zoneOptions = zoneTableModel.getList();

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui	2009-11-28 18:10:14 UTC (rev 5587)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui	2009-11-28 19:54:16 UTC (rev 5588)
@@ -1868,7 +1868,7 @@
               <property name="spacing" >
                <number>6</number>
               </property>
-              <item row="1" column="1" >
+              <item row="0" column="1" >
                <layout class="QHBoxLayout" >
                 <property name="margin" >
                  <number>0</number>
@@ -1904,7 +1904,7 @@
                 </item>
                </layout>
               </item>
-              <item row="0" column="0" >
+              <item row="1" column="0" >
                <widget class="QLabel" name="label_26" >
                 <property name="text" >
                  <string>Maximum GOP Size:</string>
@@ -1918,7 +1918,7 @@
                 </property>
                </widget>
               </item>
-              <item row="0" column="1" >
+              <item row="1" column="1" >
                <layout class="QHBoxLayout" >
                 <property name="margin" >
                  <number>0</number>
@@ -1957,7 +1957,7 @@
                 </item>
                </layout>
               </item>
-              <item row="1" column="0" >
+              <item row="0" column="0" >
                <widget class="QLabel" name="label_28" >
                 <property name="text" >
                  <string>Minimum GOP Size:</string>
@@ -3327,6 +3327,139 @@
         </widget>
        </item>
        <item>
+        <widget class="QGroupBox" name="slicingGroupBox" >
+         <property name="title" >
+          <string>Slicing</string>
+         </property>
+         <layout class="QGridLayout" >
+          <property name="margin" >
+           <number>9</number>
+          </property>
+          <property name="spacing" >
+           <number>6</number>
+          </property>
+          <item row="2" column="0" >
+           <widget class="QLabel" name="label_25" >
+            <property name="text" >
+             <string>Slices per Frame:</string>
+            </property>
+           </widget>
+          </item>
+          <item row="0" column="0" >
+           <widget class="QLabel" name="label_23" >
+            <property name="text" >
+             <string>Maximum Size per Slice:</string>
+            </property>
+           </widget>
+          </item>
+          <item row="0" column="1" colspan="2" >
+           <layout class="QHBoxLayout" >
+            <property name="margin" >
+             <number>0</number>
+            </property>
+            <property name="spacing" >
+             <number>6</number>
+            </property>
+            <item>
+             <widget class="QSpinBox" name="maxSliceSizeSpinBox" >
+              <property name="maximum" >
+               <number>2147483647</number>
+              </property>
+             </widget>
+            </item>
+            <item>
+             <widget class="QLabel" name="label_32" >
+              <property name="text" >
+               <string>bytes</string>
+              </property>
+             </widget>
+            </item>
+            <item>
+             <spacer>
+              <property name="orientation" >
+               <enum>Qt::Horizontal</enum>
+              </property>
+              <property name="sizeHint" >
+               <size>
+                <width>461</width>
+                <height>16</height>
+               </size>
+              </property>
+             </spacer>
+            </item>
+           </layout>
+          </item>
+          <item row="1" column="0" >
+           <widget class="QLabel" name="label_24" >
+            <property name="text" >
+             <string>Maximum Macroblocks per Slice:</string>
+            </property>
+           </widget>
+          </item>
+          <item row="1" column="1" >
+           <layout class="QHBoxLayout" >
+            <property name="margin" >
+             <number>0</number>
+            </property>
+            <property name="spacing" >
+             <number>6</number>
+            </property>
+            <item>
+             <widget class="QSpinBox" name="maxSliceMbSpinBox" >
+              <property name="maximum" >
+               <number>2147483647</number>
+              </property>
+             </widget>
+            </item>
+            <item>
+             <spacer>
+              <property name="orientation" >
+               <enum>Qt::Horizontal</enum>
+              </property>
+              <property name="sizeHint" >
+               <size>
+                <width>40</width>
+                <height>20</height>
+               </size>
+              </property>
+             </spacer>
+            </item>
+           </layout>
+          </item>
+          <item row="2" column="1" >
+           <layout class="QHBoxLayout" >
+            <property name="margin" >
+             <number>0</number>
+            </property>
+            <property name="spacing" >
+             <number>6</number>
+            </property>
+            <item>
+             <widget class="QSpinBox" name="slicesPerFrameSpinBox" >
+              <property name="maximum" >
+               <number>2147483647</number>
+              </property>
+             </widget>
+            </item>
+            <item>
+             <spacer>
+              <property name="orientation" >
+               <enum>Qt::Horizontal</enum>
+              </property>
+              <property name="sizeHint" >
+               <size>
+                <width>40</width>
+                <height>20</height>
+               </size>
+              </property>
+             </spacer>
+            </item>
+           </layout>
+          </item>
+         </layout>
+        </widget>
+       </item>
+       <item>
         <widget class="QGroupBox" name="groupBox_21" >
          <property name="title" >
           <string>Zones</string>
@@ -4187,8 +4320,8 @@
   <tabstop>BFrameBiasSpinBox</tabstop>
   <tabstop>adaptiveBFrameComboBox</tabstop>
   <tabstop>bFrameRefCheckBox</tabstop>
+  <tabstop>minGopSizeSpinBox</tabstop>
   <tabstop>maxGopSizeSpinBox</tabstop>
-  <tabstop>minGopSizeSpinBox</tabstop>
   <tabstop>IFrameThresholdSpinBox</tabstop>
   <tabstop>scenecutDetectionCheckBox</tabstop>
   <tabstop>mixedRefsCheckBox</tabstop>
@@ -4220,6 +4353,9 @@
   <tabstop>vbvMaxBitrateSpinBox</tabstop>
   <tabstop>vbvBufferSizeSpinBox</tabstop>
   <tabstop>vbvBufferOccupancySpinBox</tabstop>
+  <tabstop>maxSliceSizeSpinBox</tabstop>
+  <tabstop>maxSliceMbSpinBox</tabstop>
+  <tabstop>slicesPerFrameSpinBox</tabstop>
   <tabstop>zoneTableView</tabstop>
   <tabstop>zoneAddButton</tabstop>
   <tabstop>zoneEditButton</tabstop>

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/x264Options.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/x264Options.cpp	2009-11-28 18:10:14 UTC (rev 5587)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/x264Options.cpp	2009-11-28 19:54:16 UTC (rev 5588)
@@ -942,6 +942,38 @@
 	}
 }
 
+#if X264_BUILD >= 73
+unsigned int x264Options::getSliceMaxSize(void)
+{
+	return _param.i_slice_max_size;
+}
+
+void x264Options::setSliceMaxSize(unsigned int maxSize)
+{
+	_param.i_slice_max_size = maxSize;
+}
+
+unsigned int x264Options::getSliceMaxMacroblocks(void)
+{
+	return _param.i_slice_max_mbs;
+}
+
+void x264Options::setSliceMaxMacroblocks(unsigned int maxMbs)
+{
+	_param.i_slice_max_mbs = maxMbs;
+}
+
+unsigned int x264Options::getSliceCount(void)
+{
+	return _param.i_slice_count;
+}
+
+void x264Options::setSliceCount(unsigned int sliceCount)
+{
+	_param.i_slice_count = sliceCount;
+}
+#endif
+
 void x264Options::addOptionsToXml(xmlNodePtr xmlNodeRoot)
 {
 	const int bufferSize = 100;
@@ -1291,6 +1323,12 @@
 
 	xmlNewChild(xmlNodeRoot, NULL, (xmlChar*)"accessUnitDelimiters", boolean2String(xmlBuffer, bufferSize, getAccessUnitDelimiters()));
 	xmlNewChild(xmlNodeRoot, NULL, (xmlChar*)"spsIdentifier", number2String(xmlBuffer, bufferSize, getSpsIdentifier()));
+
+#if X264_BUILD >= 73
+	xmlNewChild(xmlNodeRoot, NULL, (xmlChar*)"sliceMaxSize", number2String(xmlBuffer, bufferSize, getSliceMaxSize()));
+	xmlNewChild(xmlNodeRoot, NULL, (xmlChar*)"sliceMaxMacroblocks", number2String(xmlBuffer, bufferSize, getSliceMaxMacroblocks()));
+	xmlNewChild(xmlNodeRoot, NULL, (xmlChar*)"sliceCount", number2String(xmlBuffer, bufferSize, getSliceCount()));
+#endif
 }
 
 int x264Options::fromXml(const char *xml, PluginXmlType xmlType)
@@ -1405,6 +1443,14 @@
 				setAccessUnitDelimiters(string2Boolean(content));
 			else if (strcmp((char*)xmlChild->name, "spsIdentifier") == 0)
 				setSpsIdentifier(atoi(content));
+#if X264_BUILD >= 73
+			else if (strcmp((char*)xmlChild->name, "sliceMaxSize") == 0)
+				setSliceMaxSize(atoi(content));
+			else if (strcmp((char*)xmlChild->name, "sliceMaxMacroblocks") == 0)
+				setSliceMaxMacroblocks(atoi(content));
+			else if (strcmp((char*)xmlChild->name, "sliceCount") == 0)
+				setSliceCount(atoi(content));
+#endif
 
 			xmlFree(content);
 		}

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/x264Options.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/x264Options.h	2009-11-28 18:10:14 UTC (rev 5587)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/x264Options.h	2009-11-28 19:54:16 UTC (rev 5588)
@@ -293,6 +293,17 @@
 	unsigned int getSpsIdentifier(void);
 	void setSpsIdentifier(unsigned int spsIdentifier);
 
+#if X264_BUILD >= 73
+	unsigned int getSliceMaxSize(void);
+	void setSliceMaxSize(unsigned int maxSize);
+
+	unsigned int getSliceMaxMacroblocks(void);
+	void setSliceMaxMacroblocks(unsigned int maxMbs);
+
+	unsigned int getSliceCount(void);
+	void setSliceCount(unsigned int sliceCount);
+#endif
+
 	int fromXml(const char *xml, PluginXmlType xmlType);
 };
 

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/x264Param.xsd
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/x264Param.xsd	2009-11-28 18:10:14 UTC (rev 5587)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/x264Param.xsd	2009-11-28 19:54:16 UTC (rev 5588)
@@ -545,6 +545,9 @@
                   </xs:restriction>
                 </xs:simpleType>
               </xs:element>
+              <xs:element name="sliceMaxSize" type="xs:integer" minOccurs="0"/>
+              <xs:element name="sliceMaxMacroblocks" type="xs:integer" minOccurs="0"/>
+              <xs:element name="sliceCount" type="xs:integer" minOccurs="0"/>
             </xs:sequence>
           </xs:complexType>
         </xs:element>



From gruntster at mail.berlios.de  Sat Nov 28 21:09:23 2009
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Sat, 28 Nov 2009 21:09:23 +0100
Subject: [Avidemux-svn-commit] r5589 -
	branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4
Message-ID: <200911282009.nASK9NNi006272@sheep.berlios.de>

Author: gruntster
Date: 2009-11-28 21:09:18 +0100 (Sat, 28 Nov 2009)
New Revision: 5589

Modified:
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp
Log:
[x264] fix typo

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp	2009-11-28 19:54:16 UTC (rev 5588)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp	2009-11-28 20:09:18 UTC (rev 5589)
@@ -76,7 +76,7 @@
 	ui.mbTreeCheckBox->setVisible(false);
 	ui.lblLookahead->setVisible(false);
 	ui.lookaheadSpinBox->setVisible(false);
-	ui.lblLookaheadFrames>setVisible(false);
+	ui.lblLookaheadFrames->setVisible(false);
 #endif
 
 	ui.sarAsInputLabel->setText(QString("%1:%2").arg(properties->parWidth).arg(properties->parHeight));



From gruntster at mail.berlios.de  Sat Nov 28 23:17:28 2009
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Sat, 28 Nov 2009 23:17:28 +0100
Subject: [Avidemux-svn-commit] r5590 - in
	branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264:
	. qt4
Message-ID: <200911282217.nASMHSYq015217@sheep.berlios.de>

Author: gruntster
Date: 2009-11-28 23:17:21 +0100 (Sat, 28 Nov 2009)
New Revision: 5590

Modified:
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/x264Options.cpp
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/x264Options.h
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/x264Param.xsd
Log:
[x264] add threaded lookahead option to Qt interface

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp	2009-11-28 20:09:18 UTC (rev 5589)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp	2009-11-28 22:17:21 UTC (rev 5590)
@@ -79,6 +79,12 @@
 	ui.lblLookaheadFrames->setVisible(false);
 #endif
 
+#if X264_BUILD < 75
+	ui.threadedLookaheadCheckBox->setVisible(false);
+	ui.threadedLookaheadSpinBox->setVisible(false);
+	ui.lblThreadedFrames->setVisible(false);
+#endif
+
 	ui.sarAsInputLabel->setText(QString("%1:%2").arg(properties->parWidth).arg(properties->parHeight));
 
 	// Motion Estimation tab
@@ -648,6 +654,15 @@
 			ui.threadCustomSpinBox->setValue(options->getThreads());
 	}
 
+#if X264_BUILD >= 75
+	int threadedLookahead = options->getThreadedLookahead();
+
+	ui.threadedLookaheadCheckBox->setChecked(threadedLookahead > -1);
+
+	if (threadedLookahead > -1)
+		ui.threadedLookaheadSpinBox->setValue(threadedLookahead);
+#endif
+
 	// Motion Estimation tab
 	ui.meSpinBox->setValue(options->getSubpixelRefinement());
 	ui.meMethodComboBox->setCurrentIndex(options->getMotionEstimationMethod());
@@ -861,6 +876,13 @@
 	else
 		options->setThreads(ui.threadCustomSpinBox->value());
 
+#if X264_BUILD >= 75
+	if (ui.threadedLookaheadCheckBox->isChecked())
+		options->setThreadedLookahead(ui.threadedLookaheadSpinBox->value());
+	else
+		options->setThreadedLookahead(-1);
+#endif
+
 	// Motion Estimation tab
 	options->setSubpixelRefinement(ui.meSpinBox->value());
 	options->setMotionEstimationMethod(ui.meMethodComboBox->currentIndex());

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui	2009-11-28 20:09:18 UTC (rev 5589)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui	2009-11-28 22:17:21 UTC (rev 5590)
@@ -7,7 +7,7 @@
     <x>0</x>
     <y>0</y>
     <width>523</width>
-    <height>536</height>
+    <height>600</height>
    </rect>
   </property>
   <property name="windowTitle" >
@@ -101,7 +101,7 @@
      <property name="sizeHint" >
       <size>
        <width>505</width>
-       <height>10</height>
+       <height>16</height>
       </size>
      </property>
     </spacer>
@@ -532,9 +532,9 @@
         </widget>
        </item>
        <item>
-        <widget class="QGroupBox" name="groupBox_15" >
+        <widget class="QGroupBox" name="groupBox_17" >
          <property name="title" >
-          <string>Pixel Aspect Ratio</string>
+          <string>Multithreading</string>
          </property>
          <layout class="QVBoxLayout" >
           <property name="margin" >
@@ -544,31 +544,31 @@
            <number>6</number>
           </property>
           <item>
-           <layout class="QGridLayout" >
+           <layout class="QVBoxLayout" >
             <property name="margin" >
              <number>0</number>
             </property>
             <property name="spacing" >
              <number>6</number>
             </property>
-            <item row="0" column="0" >
-             <widget class="QRadioButton" name="sarCustomRadioButton" >
+            <item>
+             <widget class="QRadioButton" name="threadDisableRadioButton" >
               <property name="text" >
-               <string>Custom:</string>
+               <string>Disable</string>
               </property>
-              <property name="checked" >
-               <bool>true</bool>
-              </property>
              </widget>
             </item>
-            <item row="2" column="0" >
-             <widget class="QRadioButton" name="sarAsInputRadioButton" >
+            <item>
+             <widget class="QRadioButton" name="threadAutoDetectRadioButton" >
               <property name="text" >
-               <string>As Input</string>
+               <string>Auto-detect</string>
               </property>
+              <property name="checked" >
+               <bool>true</bool>
+              </property>
              </widget>
             </item>
-            <item row="2" column="1" >
+            <item>
              <layout class="QHBoxLayout" >
               <property name="margin" >
                <number>0</number>
@@ -577,72 +577,26 @@
                <number>6</number>
               </property>
               <item>
-               <widget class="QLabel" name="sarAsInputLabel" >
-                <property name="enabled" >
-                 <bool>false</bool>
-                </property>
+               <widget class="QRadioButton" name="threadCustomRadioButton" >
                 <property name="text" >
-                 <string/>
+                 <string>Custom:</string>
                 </property>
                </widget>
               </item>
               <item>
-               <spacer>
-                <property name="orientation" >
-                 <enum>Qt::Horizontal</enum>
+               <widget class="QSpinBox" name="threadCustomSpinBox" >
+                <property name="enabled" >
+                 <bool>false</bool>
                 </property>
-                <property name="sizeHint" >
-                 <size>
-                  <width>40</width>
-                  <height>20</height>
-                 </size>
-                </property>
-               </spacer>
-              </item>
-             </layout>
-            </item>
-            <item row="0" column="1" >
-             <layout class="QHBoxLayout" >
-              <property name="margin" >
-               <number>0</number>
-              </property>
-              <property name="spacing" >
-               <number>6</number>
-              </property>
-              <item>
-               <widget class="QSpinBox" name="sarCustomSpinBox1" >
                 <property name="maximum" >
-                 <number>9999</number>
+                 <number>32</number>
                 </property>
                 <property name="minimum" >
-                 <number>1</number>
+                 <number>2</number>
                 </property>
-                <property name="value" >
-                 <number>1</number>
-                </property>
                </widget>
               </item>
               <item>
-               <widget class="QLabel" name="sarCustomLabel" >
-                <property name="text" >
-                 <string>:</string>
-                </property>
-               </widget>
-              </item>
-              <item>
-               <widget class="QSpinBox" name="sarCustomSpinBox2" >
-                <property name="maximum" >
-                 <number>9999</number>
-                </property>
-                <property name="minimum" >
-                 <number>1</number>
-                </property>
-                <property name="value" >
-                 <number>1</number>
-                </property>
-               </widget>
-              </item>
-              <item>
                <spacer>
                 <property name="orientation" >
                  <enum>Qt::Horizontal</enum>
@@ -657,82 +611,17 @@
               </item>
              </layout>
             </item>
-            <item row="1" column="0" >
-             <widget class="QRadioButton" name="sarPredefinedRadioButton" >
-              <property name="text" >
-               <string>Predefined Aspect Ratio:</string>
-              </property>
-             </widget>
-            </item>
-            <item row="1" column="1" >
-             <layout class="QHBoxLayout" >
-              <property name="margin" >
-               <number>0</number>
-              </property>
-              <property name="spacing" >
-               <number>6</number>
-              </property>
-              <item>
-               <widget class="QComboBox" name="sarPredefinedComboBox" >
-                <property name="enabled" >
-                 <bool>false</bool>
-                </property>
-                <item>
-                 <property name="text" >
-                  <string>16:15 (PAL 4:3)</string>
-                 </property>
-                </item>
-                <item>
-                 <property name="text" >
-                  <string>64:45 (PAL 16:9)</string>
-                 </property>
-                </item>
-                <item>
-                 <property name="text" >
-                  <string>8:9 (NTSC 4:3)</string>
-                 </property>
-                </item>
-                <item>
-                 <property name="text" >
-                  <string>32:27 (NTSC 16:9)</string>
-                 </property>
-                </item>
-               </widget>
-              </item>
-              <item>
-               <spacer>
-                <property name="orientation" >
-                 <enum>Qt::Horizontal</enum>
-                </property>
-                <property name="sizeHint" >
-                 <size>
-                  <width>40</width>
-                  <height>20</height>
-                 </size>
-                </property>
-               </spacer>
-              </item>
-             </layout>
-            </item>
            </layout>
           </item>
-         </layout>
-        </widget>
-       </item>
-       <item>
-        <widget class="QGroupBox" name="groupBox_17" >
-         <property name="title" >
-          <string>Multithreading</string>
-         </property>
-         <layout class="QVBoxLayout" >
-          <property name="margin" >
-           <number>9</number>
-          </property>
-          <property name="spacing" >
-           <number>6</number>
-          </property>
           <item>
-           <layout class="QVBoxLayout" >
+           <widget class="QCheckBox" name="repeatabilityCheckBox" >
+            <property name="text" >
+             <string>Enforce Repeatability</string>
+            </property>
+           </widget>
+          </item>
+          <item>
+           <layout class="QHBoxLayout" >
             <property name="margin" >
              <number>0</number>
             </property>
@@ -740,65 +629,45 @@
              <number>6</number>
             </property>
             <item>
-             <widget class="QRadioButton" name="threadDisableRadioButton" >
+             <widget class="QCheckBox" name="threadedLookaheadCheckBox" >
               <property name="text" >
-               <string>Disable</string>
+               <string>Custom Threaded Lookahead Buffer:</string>
               </property>
              </widget>
             </item>
             <item>
-             <widget class="QRadioButton" name="threadAutoDetectRadioButton" >
-              <property name="text" >
-               <string>Auto-detect</string>
+             <widget class="QSpinBox" name="threadedLookaheadSpinBox" >
+              <property name="enabled" >
+               <bool>false</bool>
               </property>
-              <property name="checked" >
-               <bool>true</bool>
+              <property name="maximum" >
+               <number>250</number>
               </property>
              </widget>
             </item>
             <item>
-             <layout class="QHBoxLayout" >
-              <property name="margin" >
-               <number>0</number>
+             <widget class="QLabel" name="lblThreadedFrames" >
+              <property name="enabled" >
+               <bool>false</bool>
               </property>
-              <property name="spacing" >
-               <number>6</number>
+              <property name="text" >
+               <string>frames</string>
               </property>
-              <item>
-               <widget class="QRadioButton" name="threadCustomRadioButton" >
-                <property name="text" >
-                 <string>Custom:</string>
-                </property>
-               </widget>
-              </item>
-              <item>
-               <widget class="QSpinBox" name="threadCustomSpinBox" >
-                <property name="enabled" >
-                 <bool>false</bool>
-                </property>
-                <property name="maximum" >
-                 <number>32</number>
-                </property>
-                <property name="minimum" >
-                 <number>2</number>
-                </property>
-               </widget>
-              </item>
-              <item>
-               <spacer>
-                <property name="orientation" >
-                 <enum>Qt::Horizontal</enum>
-                </property>
-                <property name="sizeHint" >
-                 <size>
-                  <width>40</width>
-                  <height>20</height>
-                 </size>
-                </property>
-               </spacer>
-              </item>
-             </layout>
+             </widget>
             </item>
+            <item>
+             <spacer>
+              <property name="orientation" >
+               <enum>Qt::Horizontal</enum>
+              </property>
+              <property name="sizeHint" >
+               <size>
+                <width>461</width>
+                <height>20</height>
+               </size>
+              </property>
+             </spacer>
+            </item>
            </layout>
           </item>
          </layout>
@@ -3564,206 +3433,278 @@
            <number>6</number>
           </property>
           <item>
-           <layout class="QVBoxLayout" >
+           <layout class="QGridLayout" >
             <property name="margin" >
              <number>0</number>
             </property>
             <property name="spacing" >
              <number>6</number>
             </property>
-            <item>
-             <layout class="QGridLayout" >
+            <item row="0" column="1" >
+             <layout class="QHBoxLayout" >
               <property name="margin" >
                <number>0</number>
               </property>
               <property name="spacing" >
                <number>6</number>
               </property>
-              <item row="0" column="1" >
-               <layout class="QHBoxLayout" >
-                <property name="margin" >
+              <item>
+               <widget class="QComboBox" name="idcLevelComboBox" >
+                <property name="currentIndex" >
                  <number>0</number>
                 </property>
-                <property name="spacing" >
-                 <number>6</number>
-                </property>
                 <item>
-                 <widget class="QComboBox" name="idcLevelComboBox" >
-                  <property name="currentIndex" >
-                   <number>0</number>
-                  </property>
-                  <item>
-                   <property name="text" >
-                    <string>Auto</string>
-                   </property>
-                  </item>
-                  <item>
-                   <property name="text" >
-                    <string>1</string>
-                   </property>
-                  </item>
-                  <item>
-                   <property name="text" >
-                    <string>1.1</string>
-                   </property>
-                  </item>
-                  <item>
-                   <property name="text" >
-                    <string>1.2</string>
-                   </property>
-                  </item>
-                  <item>
-                   <property name="text" >
-                    <string>1.3</string>
-                   </property>
-                  </item>
-                  <item>
-                   <property name="text" >
-                    <string>2</string>
-                   </property>
-                  </item>
-                  <item>
-                   <property name="text" >
-                    <string>2.1</string>
-                   </property>
-                  </item>
-                  <item>
-                   <property name="text" >
-                    <string>2.2</string>
-                   </property>
-                  </item>
-                  <item>
-                   <property name="text" >
-                    <string>3</string>
-                   </property>
-                  </item>
-                  <item>
-                   <property name="text" >
-                    <string>3.1</string>
-                   </property>
-                  </item>
-                  <item>
-                   <property name="text" >
-                    <string>3.2</string>
-                   </property>
-                  </item>
-                  <item>
-                   <property name="text" >
-                    <string>4</string>
-                   </property>
-                  </item>
-                  <item>
-                   <property name="text" >
-                    <string>4.1</string>
-                   </property>
-                  </item>
-                  <item>
-                   <property name="text" >
-                    <string>4.2</string>
-                   </property>
-                  </item>
-                  <item>
-                   <property name="text" >
-                    <string>5</string>
-                   </property>
-                  </item>
-                  <item>
-                   <property name="text" >
-                    <string>5.1</string>
-                   </property>
-                  </item>
-                 </widget>
+                 <property name="text" >
+                  <string>Auto</string>
+                 </property>
                 </item>
                 <item>
-                 <spacer>
-                  <property name="orientation" >
-                   <enum>Qt::Horizontal</enum>
-                  </property>
-                  <property name="sizeHint" >
-                   <size>
-                    <width>40</width>
-                    <height>20</height>
-                   </size>
-                  </property>
-                 </spacer>
+                 <property name="text" >
+                  <string>1</string>
+                 </property>
                 </item>
-               </layout>
+                <item>
+                 <property name="text" >
+                  <string>1.1</string>
+                 </property>
+                </item>
+                <item>
+                 <property name="text" >
+                  <string>1.2</string>
+                 </property>
+                </item>
+                <item>
+                 <property name="text" >
+                  <string>1.3</string>
+                 </property>
+                </item>
+                <item>
+                 <property name="text" >
+                  <string>2</string>
+                 </property>
+                </item>
+                <item>
+                 <property name="text" >
+                  <string>2.1</string>
+                 </property>
+                </item>
+                <item>
+                 <property name="text" >
+                  <string>2.2</string>
+                 </property>
+                </item>
+                <item>
+                 <property name="text" >
+                  <string>3</string>
+                 </property>
+                </item>
+                <item>
+                 <property name="text" >
+                  <string>3.1</string>
+                 </property>
+                </item>
+                <item>
+                 <property name="text" >
+                  <string>3.2</string>
+                 </property>
+                </item>
+                <item>
+                 <property name="text" >
+                  <string>4</string>
+                 </property>
+                </item>
+                <item>
+                 <property name="text" >
+                  <string>4.1</string>
+                 </property>
+                </item>
+                <item>
+                 <property name="text" >
+                  <string>4.2</string>
+                 </property>
+                </item>
+                <item>
+                 <property name="text" >
+                  <string>5</string>
+                 </property>
+                </item>
+                <item>
+                 <property name="text" >
+                  <string>5.1</string>
+                 </property>
+                </item>
+               </widget>
               </item>
-              <item row="1" column="0" >
-               <widget class="QLabel" name="label_55" >
-                <property name="text" >
-                 <string>Sequence Parameter Set Identifer:</string>
+              <item>
+               <spacer>
+                <property name="orientation" >
+                 <enum>Qt::Horizontal</enum>
                 </property>
+                <property name="sizeHint" >
+                 <size>
+                  <width>40</width>
+                  <height>20</height>
+                 </size>
+                </property>
+               </spacer>
+              </item>
+             </layout>
+            </item>
+            <item row="1" column="0" >
+             <widget class="QLabel" name="label_55" >
+              <property name="text" >
+               <string>Sequence Parameter Set Identifer:</string>
+              </property>
+             </widget>
+            </item>
+            <item row="0" column="0" >
+             <widget class="QLabel" name="label_56" >
+              <property name="text" >
+               <string>IDC Level:</string>
+              </property>
+             </widget>
+            </item>
+            <item row="1" column="1" >
+             <layout class="QHBoxLayout" >
+              <property name="margin" >
+               <number>0</number>
+              </property>
+              <property name="spacing" >
+               <number>6</number>
+              </property>
+              <item>
+               <widget class="QComboBox" name="spsiComboBox" >
+                <item>
+                 <property name="text" >
+                  <string>0</string>
+                 </property>
+                </item>
+                <item>
+                 <property name="text" >
+                  <string>1</string>
+                 </property>
+                </item>
+                <item>
+                 <property name="text" >
+                  <string>3</string>
+                 </property>
+                </item>
+                <item>
+                 <property name="text" >
+                  <string>7</string>
+                 </property>
+                </item>
+                <item>
+                 <property name="text" >
+                  <string>15</string>
+                 </property>
+                </item>
+                <item>
+                 <property name="text" >
+                  <string>31</string>
+                 </property>
+                </item>
                </widget>
               </item>
-              <item row="0" column="0" >
-               <widget class="QLabel" name="label_56" >
+              <item>
+               <spacer>
+                <property name="orientation" >
+                 <enum>Qt::Horizontal</enum>
+                </property>
+                <property name="sizeHint" >
+                 <size>
+                  <width>40</width>
+                  <height>20</height>
+                 </size>
+                </property>
+               </spacer>
+              </item>
+             </layout>
+            </item>
+           </layout>
+          </item>
+          <item>
+           <widget class="QCheckBox" name="accessUnitCheckBox" >
+            <property name="text" >
+             <string>Generate Access Unit Delimiters</string>
+            </property>
+           </widget>
+          </item>
+         </layout>
+        </widget>
+       </item>
+       <item>
+        <widget class="QGroupBox" name="groupBox_15" >
+         <property name="title" >
+          <string>Pixel Aspect Ratio</string>
+         </property>
+         <layout class="QVBoxLayout" >
+          <property name="margin" >
+           <number>9</number>
+          </property>
+          <property name="spacing" >
+           <number>6</number>
+          </property>
+          <item>
+           <layout class="QGridLayout" >
+            <property name="margin" >
+             <number>0</number>
+            </property>
+            <property name="spacing" >
+             <number>6</number>
+            </property>
+            <item row="0" column="0" >
+             <widget class="QRadioButton" name="sarCustomRadioButton" >
+              <property name="text" >
+               <string>Custom:</string>
+              </property>
+              <property name="checked" >
+               <bool>true</bool>
+              </property>
+             </widget>
+            </item>
+            <item row="2" column="0" >
+             <widget class="QRadioButton" name="sarAsInputRadioButton" >
+              <property name="text" >
+               <string>As Input</string>
+              </property>
+             </widget>
+            </item>
+            <item row="2" column="1" >
+             <layout class="QHBoxLayout" >
+              <property name="margin" >
+               <number>0</number>
+              </property>
+              <property name="spacing" >
+               <number>6</number>
+              </property>
+              <item>
+               <widget class="QLabel" name="sarAsInputLabel" >
+                <property name="enabled" >
+                 <bool>false</bool>
+                </property>
                 <property name="text" >
-                 <string>IDC Level:</string>
+                 <string/>
                 </property>
                </widget>
               </item>
-              <item row="1" column="1" >
-               <layout class="QHBoxLayout" >
-                <property name="margin" >
-                 <number>0</number>
+              <item>
+               <spacer>
+                <property name="orientation" >
+                 <enum>Qt::Horizontal</enum>
                 </property>
-                <property name="spacing" >
-                 <number>6</number>
+                <property name="sizeHint" >
+                 <size>
+                  <width>40</width>
+                  <height>20</height>
+                 </size>
                 </property>
-                <item>
-                 <widget class="QComboBox" name="spsiComboBox" >
-                  <item>
-                   <property name="text" >
-                    <string>0</string>
-                   </property>
-                  </item>
-                  <item>
-                   <property name="text" >
-                    <string>1</string>
-                   </property>
-                  </item>
-                  <item>
-                   <property name="text" >
-                    <string>3</string>
-                   </property>
-                  </item>
-                  <item>
-                   <property name="text" >
-                    <string>7</string>
-                   </property>
-                  </item>
-                  <item>
-                   <property name="text" >
-                    <string>15</string>
-                   </property>
-                  </item>
-                  <item>
-                   <property name="text" >
-                    <string>31</string>
-                   </property>
-                  </item>
-                 </widget>
-                </item>
-                <item>
-                 <spacer>
-                  <property name="orientation" >
-                   <enum>Qt::Horizontal</enum>
-                  </property>
-                  <property name="sizeHint" >
-                   <size>
-                    <width>40</width>
-                    <height>20</height>
-                   </size>
-                  </property>
-                 </spacer>
-                </item>
-               </layout>
+               </spacer>
               </item>
              </layout>
             </item>
-            <item>
-             <layout class="QVBoxLayout" >
+            <item row="0" column="1" >
+             <layout class="QHBoxLayout" >
               <property name="margin" >
                <number>0</number>
               </property>
@@ -3771,21 +3712,110 @@
                <number>6</number>
               </property>
               <item>
-               <widget class="QCheckBox" name="repeatabilityCheckBox" >
-                <property name="text" >
-                 <string>Enforce Repeatability</string>
+               <widget class="QSpinBox" name="sarCustomSpinBox1" >
+                <property name="maximum" >
+                 <number>9999</number>
                 </property>
+                <property name="minimum" >
+                 <number>1</number>
+                </property>
+                <property name="value" >
+                 <number>1</number>
+                </property>
                </widget>
               </item>
               <item>
-               <widget class="QCheckBox" name="accessUnitCheckBox" >
+               <widget class="QLabel" name="sarCustomLabel" >
                 <property name="text" >
-                 <string>Use Access Unit Delimiters</string>
+                 <string>:</string>
                 </property>
                </widget>
               </item>
+              <item>
+               <widget class="QSpinBox" name="sarCustomSpinBox2" >
+                <property name="maximum" >
+                 <number>9999</number>
+                </property>
+                <property name="minimum" >
+                 <number>1</number>
+                </property>
+                <property name="value" >
+                 <number>1</number>
+                </property>
+               </widget>
+              </item>
+              <item>
+               <spacer>
+                <property name="orientation" >
+                 <enum>Qt::Horizontal</enum>
+                </property>
+                <property name="sizeHint" >
+                 <size>
+                  <width>40</width>
+                  <height>20</height>
+                 </size>
+                </property>
+               </spacer>
+              </item>
              </layout>
             </item>
+            <item row="1" column="0" >
+             <widget class="QRadioButton" name="sarPredefinedRadioButton" >
+              <property name="text" >
+               <string>Predefined Aspect Ratio:</string>
+              </property>
+             </widget>
+            </item>
+            <item row="1" column="1" >
+             <layout class="QHBoxLayout" >
+              <property name="margin" >
+               <number>0</number>
+              </property>
+              <property name="spacing" >
+               <number>6</number>
+              </property>
+              <item>
+               <widget class="QComboBox" name="sarPredefinedComboBox" >
+                <property name="enabled" >
+                 <bool>false</bool>
+                </property>
+                <item>
+                 <property name="text" >
+                  <string>16:15 (PAL 4:3)</string>
+                 </property>
+                </item>
+                <item>
+                 <property name="text" >
+                  <string>64:45 (PAL 16:9)</string>
+                 </property>
+                </item>
+                <item>
+                 <property name="text" >
+                  <string>8:9 (NTSC 4:3)</string>
+                 </property>
+                </item>
+                <item>
+                 <property name="text" >
+                  <string>32:27 (NTSC 16:9)</string>
+                 </property>
+                </item>
+               </widget>
+              </item>
+              <item>
+               <spacer>
+                <property name="orientation" >
+                 <enum>Qt::Horizontal</enum>
+                </property>
+                <property name="sizeHint" >
+                 <size>
+                  <width>40</width>
+                  <height>20</height>
+                 </size>
+                </property>
+               </spacer>
+              </item>
+             </layout>
+            </item>
            </layout>
           </item>
          </layout>
@@ -4284,16 +4314,12 @@
   <tabstop>quantiserSpinBox</tabstop>
   <tabstop>mbTreeCheckBox</tabstop>
   <tabstop>lookaheadSpinBox</tabstop>
-  <tabstop>sarCustomRadioButton</tabstop>
-  <tabstop>sarCustomSpinBox1</tabstop>
-  <tabstop>sarCustomSpinBox2</tabstop>
-  <tabstop>sarPredefinedRadioButton</tabstop>
-  <tabstop>sarPredefinedComboBox</tabstop>
-  <tabstop>sarAsInputRadioButton</tabstop>
   <tabstop>threadDisableRadioButton</tabstop>
   <tabstop>threadAutoDetectRadioButton</tabstop>
   <tabstop>threadCustomRadioButton</tabstop>
   <tabstop>threadCustomSpinBox</tabstop>
+  <tabstop>repeatabilityCheckBox</tabstop>
+  <tabstop>threadedLookaheadSpinBox</tabstop>
   <tabstop>meMethodComboBox</tabstop>
   <tabstop>meSlider</tabstop>
   <tabstop>meSpinBox</tabstop>
@@ -4362,8 +4388,13 @@
   <tabstop>zoneDeleteButton</tabstop>
   <tabstop>idcLevelComboBox</tabstop>
   <tabstop>spsiComboBox</tabstop>
-  <tabstop>repeatabilityCheckBox</tabstop>
   <tabstop>accessUnitCheckBox</tabstop>
+  <tabstop>sarCustomRadioButton</tabstop>
+  <tabstop>sarCustomSpinBox1</tabstop>
+  <tabstop>sarCustomSpinBox2</tabstop>
+  <tabstop>sarPredefinedRadioButton</tabstop>
+  <tabstop>sarPredefinedComboBox</tabstop>
+  <tabstop>sarAsInputRadioButton</tabstop>
   <tabstop>overscanComboBox</tabstop>
   <tabstop>videoFormatComboBox</tabstop>
   <tabstop>colourPrimariesComboBox</tabstop>
@@ -4376,70 +4407,6 @@
  <resources/>
  <connections>
   <connection>
-   <sender>sarPredefinedRadioButton</sender>
-   <signal>toggled(bool)</signal>
-   <receiver>sarPredefinedComboBox</receiver>
-   <slot>setEnabled(bool)</slot>
-   <hints>
-    <hint type="sourcelabel" >
-     <x>108</x>
-     <y>290</y>
-    </hint>
-    <hint type="destinationlabel" >
-     <x>243</x>
-     <y>290</y>
-    </hint>
-   </hints>
-  </connection>
-  <connection>
-   <sender>sarCustomRadioButton</sender>
-   <signal>toggled(bool)</signal>
-   <receiver>sarCustomSpinBox1</receiver>
-   <slot>setEnabled(bool)</slot>
-   <hints>
-    <hint type="sourcelabel" >
-     <x>108</x>
-     <y>262</y>
-    </hint>
-    <hint type="destinationlabel" >
-     <x>209</x>
-     <y>262</y>
-    </hint>
-   </hints>
-  </connection>
-  <connection>
-   <sender>sarCustomRadioButton</sender>
-   <signal>toggled(bool)</signal>
-   <receiver>sarCustomSpinBox2</receiver>
-   <slot>setEnabled(bool)</slot>
-   <hints>
-    <hint type="sourcelabel" >
-     <x>108</x>
-     <y>262</y>
-    </hint>
-    <hint type="destinationlabel" >
-     <x>272</x>
-     <y>262</y>
-    </hint>
-   </hints>
-  </connection>
-  <connection>
-   <sender>sarCustomRadioButton</sender>
-   <signal>toggled(bool)</signal>
-   <receiver>sarCustomLabel</receiver>
-   <slot>setEnabled(bool)</slot>
-   <hints>
-    <hint type="sourcelabel" >
-     <x>108</x>
-     <y>262</y>
-    </hint>
-    <hint type="destinationlabel" >
-     <x>240</x>
-     <y>262</y>
-    </hint>
-   </hints>
-  </connection>
-  <connection>
    <sender>mvLengthCheckBox</sender>
    <signal>toggled(bool)</signal>
    <receiver>mvLengthSpinBox</receiver>
@@ -4600,22 +4567,6 @@
    </hints>
   </connection>
   <connection>
-   <sender>sarAsInputRadioButton</sender>
-   <signal>toggled(bool)</signal>
-   <receiver>sarAsInputLabel</receiver>
-   <slot>setEnabled(bool)</slot>
-   <hints>
-    <hint type="sourcelabel" >
-     <x>108</x>
-     <y>318</y>
-    </hint>
-    <hint type="destinationlabel" >
-     <x>184</x>
-     <y>317</y>
-    </hint>
-   </hints>
-  </connection>
-  <connection>
    <sender>threadCustomRadioButton</sender>
    <signal>toggled(bool)</signal>
    <receiver>threadCustomSpinBox</receiver>
@@ -4695,5 +4646,37 @@
     </hint>
    </hints>
   </connection>
+  <connection>
+   <sender>threadedLookaheadCheckBox</sender>
+   <signal>toggled(bool)</signal>
+   <receiver>threadedLookaheadSpinBox</receiver>
+   <slot>setEnabled(bool)</slot>
+   <hints>
+    <hint type="sourcelabel" >
+     <x>142</x>
+     <y>470</y>
+    </hint>
+    <hint type="destinationlabel" >
+     <x>273</x>
+     <y>470</y>
+    </hint>
+   </hints>
+  </connection>
+  <connection>
+   <sender>threadedLookaheadCheckBox</sender>
+   <signal>toggled(bool)</signal>
+   <receiver>lblThreadedFrames</receiver>
+   <slot>setEnabled(bool)</slot>
+   <hints>
+    <hint type="sourcelabel" >
+     <x>142</x>
+     <y>470</y>
+    </hint>
+    <hint type="destinationlabel" >
+     <x>318</x>
+     <y>470</y>
+    </hint>
+   </hints>
+  </connection>
  </connections>
 </ui>

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/x264Options.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/x264Options.cpp	2009-11-28 20:09:18 UTC (rev 5589)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/x264Options.cpp	2009-11-28 22:17:21 UTC (rev 5590)
@@ -97,6 +97,19 @@
 	_param.b_deterministic = deterministic;
 }
 
+#if X264_BUILD >= 75
+int x264Options::getThreadedLookahead(void)
+{
+	return _param.i_sync_lookahead;
+}
+
+void x264Options::setThreadedLookahead(int frames)
+{
+	if (frames >= -1 && frames <= 250)
+		_param.i_sync_lookahead = frames;
+}
+#endif
+
 int x264Options::getIdcLevel(void)
 {
 	return _param.i_level_idc;
@@ -983,6 +996,9 @@
 	xmlNodeRoot = xmlNewChild(xmlNodeRoot, NULL, (xmlChar*)getOptionsTagRoot(), NULL);
 	xmlNewChild(xmlNodeRoot, NULL, (xmlChar*)"threads", number2String(xmlBuffer, bufferSize, getThreads()));
 	xmlNewChild(xmlNodeRoot, NULL, (xmlChar*)"deterministic", boolean2String(xmlBuffer, bufferSize, getDeterministic()));
+#if X264_BUILD >= 75
+	xmlNewChild(xmlNodeRoot, NULL, (xmlChar*)"threadedLookahead", number2String(xmlBuffer, bufferSize, getThreadedLookahead()));
+#endif
 	xmlNewChild(xmlNodeRoot, NULL, (xmlChar*)"idcLevel", number2String(xmlBuffer, bufferSize, getIdcLevel()));
 
 	xmlNodeChild = xmlNewChild(xmlNodeRoot, NULL, (xmlChar*)"vui", NULL);
@@ -1350,6 +1366,10 @@
 				setThreads(atoi(content));
 			else if (strcmp((char*)xmlChild->name, "deterministic") == 0)
 				setDeterministic(string2Boolean(content));
+#if X264_BUILD >= 75
+			else if (strcmp((char*)xmlChild->name, "threadedLookahead") == 0)
+				setThreadedLookahead(atoi(content));
+#endif
 			else if (strcmp((char*)xmlChild->name, "idcLevel") == 0)
 				setIdcLevel(atoi(content));
 			else if (strcmp((char*)xmlChild->name, "vui") == 0)

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/x264Options.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/x264Options.h	2009-11-28 20:09:18 UTC (rev 5589)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/x264Options.h	2009-11-28 22:17:21 UTC (rev 5590)
@@ -64,6 +64,11 @@
 	bool getDeterministic(void);
 	void setDeterministic(bool deterministic);
 
+#if X264_BUILD >= 75
+	int getThreadedLookahead(void);
+	void setThreadedLookahead(int frames);
+#endif
+
 	int getIdcLevel(void);
 	void setIdcLevel(int idcLevel);
 

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/x264Param.xsd
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/x264Param.xsd	2009-11-28 20:09:18 UTC (rev 5589)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/x264Param.xsd	2009-11-28 22:17:21 UTC (rev 5590)
@@ -42,6 +42,14 @@
             <xs:sequence>
               <xs:element name="threads" type="uint" minOccurs="0"/>
               <xs:element name="deterministic" type="xs:boolean" minOccurs="0"/>
+              <xs:element name="threadedLookahead" minOccurs="0">
+                <xs:simpleType>
+                  <xs:restriction base="xs:integer">
+                    <xs:minInclusive value="-1"/>
+                    <xs:maxInclusive value="250"/>
+                  </xs:restriction>
+                </xs:simpleType>
+              </xs:element>
               <xs:element name="idcLevel" minOccurs="0">
                 <xs:simpleType>
                   <xs:restriction base="xs:integer">
@@ -545,9 +553,9 @@
                   </xs:restriction>
                 </xs:simpleType>
               </xs:element>
-              <xs:element name="sliceMaxSize" type="xs:integer" minOccurs="0"/>
-              <xs:element name="sliceMaxMacroblocks" type="xs:integer" minOccurs="0"/>
-              <xs:element name="sliceCount" type="xs:integer" minOccurs="0"/>
+              <xs:element name="sliceMaxSize" type="uint" minOccurs="0"/>
+              <xs:element name="sliceMaxMacroblocks" type="uint" minOccurs="0"/>
+              <xs:element name="sliceCount" type="uint" minOccurs="0"/>
             </xs:sequence>
           </xs:complexType>
         </xs:element>



From mean at mail.berlios.de  Sun Nov 29 09:57:31 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sun, 29 Nov 2009 09:57:31 +0100
Subject: [Avidemux-svn-commit] r5591 - in
	branches/avidemux_2.6_branch_mean/avidemux_plugins: .
	ADM_videoFilters6/dummy
Message-ID: <200911290857.nAT8vVEc026824@sheep.berlios.de>

Author: mean
Date: 2009-11-29 09:57:31 +0100 (Sun, 29 Nov 2009)
New Revision: 5591

Modified:
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/dummy/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux_plugins/CMakeLists.txt
Log:
[plugins] Fix typos in build script

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/dummy/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/dummy/CMakeLists.txt	2009-11-28 22:17:21 UTC (rev 5590)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/dummy/CMakeLists.txt	2009-11-29 08:57:31 UTC (rev 5591)
@@ -3,7 +3,7 @@
 
 SET(ADM_vf_dummy_SRCS dummyVideoFilter.cpp)
 
-ADD_LIBRARY(ADM_vf_dummy SHARED ${ADM_vf_dummy_SRCS})
+ADD_VIDEO_FILTER(ADM_vf_dummy ${ADM_vf_dummy_SRCS})
 
 INIT_VIDEO_FILTER(ADM_vf_dummy)
 INSTALL_VIDEO_FILTER(ADM_vf_dummy)

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/CMakeLists.txt	2009-11-28 22:17:21 UTC (rev 5590)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/CMakeLists.txt	2009-11-29 08:57:31 UTC (rev 5591)
@@ -65,7 +65,7 @@
     SET(DO_GTK    1)
 endif(PLUGIN_UI MATCHES "GTK")
 if(PLUGIN_UI MATCHES "COMMON")
-    SET(DO_GTK    1)
+    SET(DO_COMMON    1)
 endif(PLUGIN_UI MATCHES "COMMON")
 if(PLUGIN_UI MATCHES "CLI")
     SET(DO_CLI    1)



From gruntster at mail.berlios.de  Sun Nov 29 19:15:24 2009
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Sun, 29 Nov 2009 19:15:24 +0100
Subject: [Avidemux-svn-commit] r5592 - in
	branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264:
	. qt4
Message-ID: <200911291815.nATIFO0o019062@sheep.berlios.de>

Author: gruntster
Date: 2009-11-29 19:15:15 +0100 (Sun, 29 Nov 2009)
New Revision: 5592

Modified:
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/x264Options.cpp
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/x264Options.h
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/x264Param.xsd
Log:
[x264] extend bframe as references option on Qt interface

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp	2009-11-29 08:57:31 UTC (rev 5591)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp	2009-11-29 18:15:15 UTC (rev 5592)
@@ -99,6 +99,12 @@
 	connect(ui.loopFilterCheckBox, SIGNAL(toggled(bool)), this, SLOT(loopFilterCheckBox_toggled(bool)));
 	connect(ui.cabacCheckBox, SIGNAL(toggled(bool)), this, SLOT(cabacCheckBox_toggled(bool)));
 
+#if X264_BUILD < 78
+	ui.bFrameRefComboBox->clear();
+	ui.bFrameRefComboBox->addItem(QT_TR_NOOP("Disabled"));
+	ui.bFrameRefComboBox->addItem(QT_TR_NOOP("Enabled"));
+#endif
+
 	// Analysis tab
 	connect(ui.trellisCheckBox, SIGNAL(toggled(bool)), this, SLOT(trellisCheckBox_toggled(bool)));
 	connect(ui.matrixCustomEditButton, SIGNAL(pressed()), this, SLOT(matrixCustomEditButton_pressed()));
@@ -705,7 +711,7 @@
 	ui.maxBFramesSpinBox->setValue(options->getBFrames());
 	ui.BFrameBiasSpinBox->setValue(options->getBFrameBias());
 	ui.refFramesSpinBox->setValue(options->getReferenceFrames());
-	ui.bFrameRefCheckBox->setChecked(options->getBFrameReferences());
+	ui.bFrameRefComboBox->setCurrentIndex(options->getBFrameReferences());
 	ui.adaptiveBFrameComboBox->setCurrentIndex(options->getAdaptiveBFrameDecision());
 	ui.maxGopSizeSpinBox->setValue(options->getGopMaximumSize());
 	ui.minGopSizeSpinBox->setValue(options->getGopMinimumSize());
@@ -916,7 +922,7 @@
 	options->setBFrames(ui.maxBFramesSpinBox->value());
 	options->setBFrameBias(ui.BFrameBiasSpinBox->value());
 	options->setReferenceFrames(ui.refFramesSpinBox->value());
-	options->setBFrameReferences(ui.bFrameRefCheckBox->isChecked());
+	options->setBFrameReferences(ui.bFrameRefComboBox->currentIndex());
 	options->setAdaptiveBFrameDecision(ui.adaptiveBFrameComboBox->currentIndex());
 	options->setGopMaximumSize(ui.maxGopSizeSpinBox->value());
 	options->setGopMinimumSize(ui.minGopSizeSpinBox->value());

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui	2009-11-29 08:57:31 UTC (rev 5591)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui	2009-11-29 18:15:15 UTC (rev 5592)
@@ -7,7 +7,7 @@
     <x>0</x>
     <y>0</y>
     <width>523</width>
-    <height>600</height>
+    <height>590</height>
    </rect>
   </property>
   <property name="windowTitle" >
@@ -101,7 +101,7 @@
      <property name="sizeHint" >
       <size>
        <width>505</width>
-       <height>16</height>
+       <height>10</height>
       </size>
      </property>
     </spacer>
@@ -1534,178 +1534,194 @@
          <property name="title" >
           <string>B-frames</string>
          </property>
-         <layout class="QVBoxLayout" >
+         <layout class="QGridLayout" >
           <property name="margin" >
            <number>9</number>
           </property>
           <property name="spacing" >
            <number>6</number>
           </property>
-          <item>
-           <layout class="QGridLayout" >
+          <item row="4" column="0" >
+           <widget class="QLabel" name="label_33" >
+            <property name="text" >
+             <string>B-frames as References:</string>
+            </property>
+           </widget>
+          </item>
+          <item row="4" column="1" >
+           <layout class="QHBoxLayout" >
             <property name="margin" >
              <number>0</number>
             </property>
             <property name="spacing" >
              <number>6</number>
             </property>
-            <item row="0" column="0" >
-             <widget class="QLabel" name="label_31" >
-              <property name="text" >
-               <string>Maximum Consecutive B-frames:</string>
-              </property>
+            <item>
+             <widget class="QComboBox" name="bFrameRefComboBox" >
+              <item>
+               <property name="text" >
+                <string>Disabled</string>
+               </property>
+              </item>
+              <item>
+               <property name="text" >
+                <string>Strictly Hierarchical Pyramid</string>
+               </property>
+              </item>
+              <item>
+               <property name="text" >
+                <string>Non-strict (Not Blu-ray Compatible)</string>
+               </property>
+              </item>
              </widget>
             </item>
-            <item row="2" column="0" >
-             <widget class="QLabel" name="label_4" >
-              <property name="text" >
-               <string>Adaptive B-frame Decision:</string>
+            <item>
+             <spacer>
+              <property name="orientation" >
+               <enum>Qt::Horizontal</enum>
               </property>
-             </widget>
-            </item>
-            <item row="1" column="0" >
-             <widget class="QLabel" name="label_29" >
-              <property name="text" >
-               <string>B-frame Bias:</string>
+              <property name="sizeHint" >
+               <size>
+                <width>40</width>
+                <height>20</height>
+               </size>
               </property>
-             </widget>
+             </spacer>
             </item>
-            <item row="2" column="1" >
-             <layout class="QHBoxLayout" >
-              <property name="margin" >
-               <number>0</number>
-              </property>
-              <property name="spacing" >
-               <number>6</number>
-              </property>
+           </layout>
+          </item>
+          <item row="3" column="1" >
+           <layout class="QHBoxLayout" >
+            <property name="margin" >
+             <number>0</number>
+            </property>
+            <property name="spacing" >
+             <number>6</number>
+            </property>
+            <item>
+             <widget class="QComboBox" name="adaptiveBFrameComboBox" >
               <item>
-               <widget class="QComboBox" name="adaptiveBFrameComboBox" >
-                <item>
-                 <property name="text" >
-                  <string>Disabled</string>
-                 </property>
-                </item>
-                <item>
-                 <property name="text" >
-                  <string>Fast</string>
-                 </property>
-                </item>
-                <item>
-                 <property name="text" >
-                  <string>Optimal</string>
-                 </property>
-                </item>
-               </widget>
+               <property name="text" >
+                <string>Disabled</string>
+               </property>
               </item>
               <item>
-               <spacer>
-                <property name="orientation" >
-                 <enum>Qt::Horizontal</enum>
-                </property>
-                <property name="sizeHint" >
-                 <size>
-                  <width>40</width>
-                  <height>20</height>
-                 </size>
-                </property>
-               </spacer>
+               <property name="text" >
+                <string>Fast</string>
+               </property>
               </item>
-             </layout>
+              <item>
+               <property name="text" >
+                <string>Optimal</string>
+               </property>
+              </item>
+             </widget>
             </item>
-            <item row="1" column="1" >
-             <layout class="QHBoxLayout" >
-              <property name="margin" >
-               <number>0</number>
+            <item>
+             <spacer>
+              <property name="orientation" >
+               <enum>Qt::Horizontal</enum>
               </property>
-              <property name="spacing" >
-               <number>6</number>
+              <property name="sizeHint" >
+               <size>
+                <width>40</width>
+                <height>20</height>
+               </size>
               </property>
-              <item>
-               <widget class="QSpinBox" name="BFrameBiasSpinBox" >
-                <property name="maximum" >
-                 <number>100</number>
-                </property>
-                <property name="minimum" >
-                 <number>-100</number>
-                </property>
-               </widget>
-              </item>
-              <item>
-               <spacer>
-                <property name="orientation" >
-                 <enum>Qt::Horizontal</enum>
-                </property>
-                <property name="sizeType" >
-                 <enum>QSizePolicy::MinimumExpanding</enum>
-                </property>
-                <property name="sizeHint" >
-                 <size>
-                  <width>10</width>
-                  <height>20</height>
-                 </size>
-                </property>
-               </spacer>
-              </item>
-             </layout>
+             </spacer>
             </item>
-            <item row="0" column="1" >
-             <layout class="QHBoxLayout" >
-              <property name="margin" >
-               <number>0</number>
+           </layout>
+          </item>
+          <item rowspan="2" row="1" column="1" >
+           <layout class="QHBoxLayout" >
+            <property name="margin" >
+             <number>0</number>
+            </property>
+            <property name="spacing" >
+             <number>6</number>
+            </property>
+            <item>
+             <widget class="QSpinBox" name="BFrameBiasSpinBox" >
+              <property name="maximum" >
+               <number>100</number>
               </property>
-              <property name="spacing" >
-               <number>6</number>
+              <property name="minimum" >
+               <number>-100</number>
               </property>
-              <item>
-               <widget class="QSpinBox" name="maxBFramesSpinBox" >
-                <property name="maximum" >
-                 <number>16</number>
-                </property>
-               </widget>
-              </item>
-              <item>
-               <spacer>
-                <property name="orientation" >
-                 <enum>Qt::Horizontal</enum>
-                </property>
-                <property name="sizeType" >
-                 <enum>QSizePolicy::MinimumExpanding</enum>
-                </property>
-                <property name="sizeHint" >
-                 <size>
-                  <width>10</width>
-                  <height>20</height>
-                 </size>
-                </property>
-               </spacer>
-              </item>
-             </layout>
+             </widget>
             </item>
+            <item>
+             <spacer>
+              <property name="orientation" >
+               <enum>Qt::Horizontal</enum>
+              </property>
+              <property name="sizeType" >
+               <enum>QSizePolicy::MinimumExpanding</enum>
+              </property>
+              <property name="sizeHint" >
+               <size>
+                <width>10</width>
+                <height>20</height>
+               </size>
+              </property>
+             </spacer>
+            </item>
            </layout>
           </item>
-          <item>
-           <spacer>
-            <property name="orientation" >
-             <enum>Qt::Vertical</enum>
+          <item row="0" column="1" >
+           <layout class="QHBoxLayout" >
+            <property name="margin" >
+             <number>0</number>
             </property>
-            <property name="sizeType" >
-             <enum>QSizePolicy::Fixed</enum>
+            <property name="spacing" >
+             <number>6</number>
             </property>
-            <property name="sizeHint" >
-             <size>
-              <width>362</width>
-              <height>2</height>
-             </size>
+            <item>
+             <widget class="QSpinBox" name="maxBFramesSpinBox" >
+              <property name="maximum" >
+               <number>16</number>
+              </property>
+             </widget>
+            </item>
+            <item>
+             <spacer>
+              <property name="orientation" >
+               <enum>Qt::Horizontal</enum>
+              </property>
+              <property name="sizeType" >
+               <enum>QSizePolicy::MinimumExpanding</enum>
+              </property>
+              <property name="sizeHint" >
+               <size>
+                <width>10</width>
+                <height>20</height>
+               </size>
+              </property>
+             </spacer>
+            </item>
+           </layout>
+          </item>
+          <item row="1" column="0" >
+           <widget class="QLabel" name="label_29" >
+            <property name="text" >
+             <string>B-frame Bias:</string>
             </property>
-           </spacer>
+           </widget>
           </item>
-          <item>
-           <widget class="QCheckBox" name="bFrameRefCheckBox" >
+          <item row="0" column="0" >
+           <widget class="QLabel" name="label_31" >
             <property name="text" >
-             <string>Use B-frames as References</string>
+             <string>Maximum Consecutive B-frames:</string>
             </property>
            </widget>
           </item>
+          <item rowspan="2" row="2" column="0" >
+           <widget class="QLabel" name="label_4" >
+            <property name="text" >
+             <string>Adaptive B-frame Decision:</string>
+            </property>
+           </widget>
+          </item>
          </layout>
         </widget>
        </item>
@@ -4319,6 +4335,7 @@
   <tabstop>threadCustomRadioButton</tabstop>
   <tabstop>threadCustomSpinBox</tabstop>
   <tabstop>repeatabilityCheckBox</tabstop>
+  <tabstop>threadedLookaheadCheckBox</tabstop>
   <tabstop>threadedLookaheadSpinBox</tabstop>
   <tabstop>meMethodComboBox</tabstop>
   <tabstop>meSlider</tabstop>
@@ -4345,7 +4362,7 @@
   <tabstop>maxBFramesSpinBox</tabstop>
   <tabstop>BFrameBiasSpinBox</tabstop>
   <tabstop>adaptiveBFrameComboBox</tabstop>
-  <tabstop>bFrameRefCheckBox</tabstop>
+  <tabstop>bFrameRefComboBox</tabstop>
   <tabstop>minGopSizeSpinBox</tabstop>
   <tabstop>maxGopSizeSpinBox</tabstop>
   <tabstop>IFrameThresholdSpinBox</tabstop>
@@ -4407,6 +4424,70 @@
  <resources/>
  <connections>
   <connection>
+   <sender>sarPredefinedRadioButton</sender>
+   <signal>toggled(bool)</signal>
+   <receiver>sarPredefinedComboBox</receiver>
+   <slot>setEnabled(bool)</slot>
+   <hints>
+    <hint type="sourcelabel" >
+     <x>108</x>
+     <y>290</y>
+    </hint>
+    <hint type="destinationlabel" >
+     <x>243</x>
+     <y>290</y>
+    </hint>
+   </hints>
+  </connection>
+  <connection>
+   <sender>sarCustomRadioButton</sender>
+   <signal>toggled(bool)</signal>
+   <receiver>sarCustomSpinBox1</receiver>
+   <slot>setEnabled(bool)</slot>
+   <hints>
+    <hint type="sourcelabel" >
+     <x>108</x>
+     <y>262</y>
+    </hint>
+    <hint type="destinationlabel" >
+     <x>209</x>
+     <y>262</y>
+    </hint>
+   </hints>
+  </connection>
+  <connection>
+   <sender>sarCustomRadioButton</sender>
+   <signal>toggled(bool)</signal>
+   <receiver>sarCustomSpinBox2</receiver>
+   <slot>setEnabled(bool)</slot>
+   <hints>
+    <hint type="sourcelabel" >
+     <x>108</x>
+     <y>262</y>
+    </hint>
+    <hint type="destinationlabel" >
+     <x>272</x>
+     <y>262</y>
+    </hint>
+   </hints>
+  </connection>
+  <connection>
+   <sender>sarCustomRadioButton</sender>
+   <signal>toggled(bool)</signal>
+   <receiver>sarCustomLabel</receiver>
+   <slot>setEnabled(bool)</slot>
+   <hints>
+    <hint type="sourcelabel" >
+     <x>108</x>
+     <y>262</y>
+    </hint>
+    <hint type="destinationlabel" >
+     <x>240</x>
+     <y>262</y>
+    </hint>
+   </hints>
+  </connection>
+  <connection>
    <sender>mvLengthCheckBox</sender>
    <signal>toggled(bool)</signal>
    <receiver>mvLengthSpinBox</receiver>
@@ -4567,6 +4648,22 @@
    </hints>
   </connection>
   <connection>
+   <sender>sarAsInputRadioButton</sender>
+   <signal>toggled(bool)</signal>
+   <receiver>sarAsInputLabel</receiver>
+   <slot>setEnabled(bool)</slot>
+   <hints>
+    <hint type="sourcelabel" >
+     <x>108</x>
+     <y>318</y>
+    </hint>
+    <hint type="destinationlabel" >
+     <x>184</x>
+     <y>317</y>
+    </hint>
+   </hints>
+  </connection>
+  <connection>
    <sender>threadCustomRadioButton</sender>
    <signal>toggled(bool)</signal>
    <receiver>threadCustomSpinBox</receiver>

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/x264Options.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/x264Options.cpp	2009-11-29 08:57:31 UTC (rev 5591)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/x264Options.cpp	2009-11-29 18:15:15 UTC (rev 5592)
@@ -322,7 +322,7 @@
 		_param.i_bframe_bias = bFrameBias;
 }
 
-bool x264Options::getBFrameReferences(void)
+unsigned int x264Options::getBFrameReferences(void)
 {
 #if X264_BUILD >= 78
 	return _param.i_bframe_pyramid;
@@ -331,12 +331,13 @@
 #endif
 }
 
-void x264Options::setBFrameReferences(bool bFrameReferences)
+void x264Options::setBFrameReferences(unsigned int bFrameReferences)
 {
 #if X264_BUILD >= 78
-	_param.i_bframe_pyramid = bFrameReferences;
+	if (bFrameReferences <= 2)
+		_param.i_bframe_pyramid = bFrameReferences;
 #else
-	_param.b_bframe_pyramid = bFrameReferences;
+	_param.b_bframe_pyramid = !!bFrameReferences;
 #endif
 }
 
@@ -1143,7 +1144,27 @@
 	xmlNewChild(xmlNodeRoot, NULL, (xmlChar*)"bFrames", number2String(xmlBuffer, bufferSize, getBFrames()));
 	xmlNewChild(xmlNodeRoot, NULL, (xmlChar*)"adaptiveBframeDecision", number2String(xmlBuffer, bufferSize, getAdaptiveBFrameDecision()));
 	xmlNewChild(xmlNodeRoot, NULL, (xmlChar*)"bFrameBias", number2String(xmlBuffer, bufferSize, getBFrameBias()));
-	xmlNewChild(xmlNodeRoot, NULL, (xmlChar*)"bFrameReferences", number2String(xmlBuffer, bufferSize, getBFrameReferences()));
+
+#if X264_BUILD >= 78
+	switch (getBFrameReferences())
+	{
+		case 0:
+			strcpy((char*)xmlBuffer, "none");
+			break;
+		case 1:
+			strcpy((char*)xmlBuffer, "strict");
+			break;
+		case 2:
+			strcpy((char*)xmlBuffer, "normal");
+			break;
+	}
+
+	xmlNewChild(xmlNodeChild, NULL, (xmlChar*)"bFrameReferences", xmlBuffer);
+#else
+	xmlNewChild(xmlNodeRoot, NULL, (xmlChar*)"bFrameReferences", boolean2String(xmlBuffer, bufferSize, (bool)getBFrameReferences()));
+#endif
+
+
 	xmlNewChild(xmlNodeRoot, NULL, (xmlChar*)"loopFilter", boolean2String(xmlBuffer, bufferSize, getLoopFilter()));
 	xmlNewChild(xmlNodeRoot, NULL, (xmlChar*)"loopFilterAlphaC0", number2String(xmlBuffer, bufferSize, getLoopFilterAlphaC0()));
 	xmlNewChild(xmlNodeRoot, NULL, (xmlChar*)"loopFilterBeta", number2String(xmlBuffer, bufferSize, getLoopFilterBeta()));
@@ -1389,7 +1410,20 @@
 			else if (strcmp((char*)xmlChild->name, "bFrameBias") == 0)
 				setBFrameBias(atoi(content));
 			else if (strcmp((char*)xmlChild->name, "bFrameReferences") == 0)
-				setBFrameReferences(atoi(content));
+			{
+				int bFrameReferences = 0;
+
+				if (strcmp(content, "strict") == 0)
+					bFrameReferences = 1;
+				else if (strcmp(content, "normal") == 0 || strcmp(content, "true") == 0)
+#if X264_BUILD >= 78
+					bFrameReferences = 2;
+#else
+					bFrameReferences = 1;
+#endif
+
+				setBFrameReferences(bFrameReferences);
+			}
 			else if (strcmp((char*)xmlChild->name, "loopFilter") == 0)
 				setLoopFilter(string2Boolean(content));
 			else if (strcmp((char*)xmlChild->name, "loopFilterAlphaC0") == 0)

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/x264Options.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/x264Options.h	2009-11-29 08:57:31 UTC (rev 5591)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/x264Options.h	2009-11-29 18:15:15 UTC (rev 5592)
@@ -123,8 +123,8 @@
 	int getBFrameBias(void);
 	void setBFrameBias(int bFrameBias);
 
-	bool getBFrameReferences(void);
-	void setBFrameReferences(bool bFrameReferences);
+	unsigned int getBFrameReferences(void);
+	void setBFrameReferences(unsigned int bFrameReferences);
 
 	bool getLoopFilter(void);
 	void setLoopFilter(bool loopFilter);

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/x264Param.xsd
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/x264Param.xsd	2009-11-29 08:57:31 UTC (rev 5591)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/x264Param.xsd	2009-11-29 18:15:15 UTC (rev 5592)
@@ -211,7 +211,19 @@
                   </xs:restriction>
                 </xs:simpleType>
               </xs:element>
-              <xs:element name="bFrameReferences" type="xs:boolean" minOccurs="0"/>
+              <xs:element name="bFrameReferences" minOccurs="0">
+                <xs:simpleType>
+                  <xs:restriction base="xs:string">
+                    <xs:enumeration value="none"/>
+                    <xs:enumeration value="strict"/>
+                    <xs:enumeration value="normal"/>
+
+                    <!-- boolean values deprecated core 78 -->
+                    <xs:enumeration value="true"/>
+                    <xs:enumeration value="false"/>
+                  </xs:restriction>
+                </xs:simpleType>
+              </xs:element>
               <xs:element name="loopFilter" type="xs:boolean" minOccurs="0"/>
               <xs:element name="loopFilterAlphaC0" minOccurs="0">
                 <xs:simpleType>



From gruntster at mail.berlios.de  Sun Nov 29 19:35:26 2009
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Sun, 29 Nov 2009 19:35:26 +0100
Subject: [Avidemux-svn-commit] r5593 - in
	branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264:
	. qt4
Message-ID: <200911291835.nATIZQaZ027605@sheep.berlios.de>

Author: gruntster
Date: 2009-11-29 19:35:19 +0100 (Sun, 29 Nov 2009)
New Revision: 5593

Modified:
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/x264Options.cpp
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/x264Options.h
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/x264Param.xsd
Log:
[x264] add constrained intra prediction option to Qt interface

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp	2009-11-29 18:15:15 UTC (rev 5592)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp	2009-11-29 18:35:19 UTC (rev 5593)
@@ -99,6 +99,10 @@
 	connect(ui.loopFilterCheckBox, SIGNAL(toggled(bool)), this, SLOT(loopFilterCheckBox_toggled(bool)));
 	connect(ui.cabacCheckBox, SIGNAL(toggled(bool)), this, SLOT(cabacCheckBox_toggled(bool)));
 
+#if X264_BUILD < 77
+	ui.constrainedIntraCheckBox->setVisible(false);
+#endif
+
 #if X264_BUILD < 78
 	ui.bFrameRefComboBox->clear();
 	ui.bFrameRefComboBox->addItem(QT_TR_NOOP("Disabled"));
@@ -705,6 +709,11 @@
 	// Frame tab
 	ui.cabacCheckBox->setChecked(options->getCabac());
 	ui.interlacedCheckBox->setChecked(options->getInterlaced());
+
+#if X264_BUILD >= 77
+	ui.constrainedIntraCheckBox->setChecked(options->getConstrainedIntraPrediction());
+#endif
+
 	ui.loopFilterCheckBox->setChecked(options->getLoopFilter());
 	ui.alphaC0SpinBox->setValue(options->getLoopFilterAlphaC0());
 	ui.betaSpinBox->setValue(options->getLoopFilterBeta());
@@ -916,6 +925,11 @@
 	// Frame tab
 	options->setCabac(ui.cabacCheckBox->isChecked());
 	options->setInterlaced(ui.interlacedCheckBox->isChecked());
+
+#if X264_BUILD >= 77
+	options->setConstrainedIntraPrediction(ui.constrainedIntraCheckBox->isChecked());
+#endif
+
 	options->setLoopFilter(ui.loopFilterCheckBox->isChecked());
 	options->setLoopFilterAlphaC0(ui.alphaC0SpinBox->value());
 	options->setLoopFilterBeta(ui.betaSpinBox->value());

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui	2009-11-29 18:15:15 UTC (rev 5592)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui	2009-11-29 18:35:19 UTC (rev 5593)
@@ -1178,6 +1178,13 @@
             </property>
            </widget>
           </item>
+          <item>
+           <widget class="QCheckBox" name="constrainedIntraCheckBox" >
+            <property name="text" >
+             <string>Constrained Intra Prediction</string>
+            </property>
+           </widget>
+          </item>
          </layout>
         </widget>
        </item>
@@ -4347,6 +4354,7 @@
   <tabstop>minThreadBufferSpinBox</tabstop>
   <tabstop>predictModeComboBox</tabstop>
   <tabstop>weightedPredictCheckBox</tabstop>
+  <tabstop>constrainedIntraCheckBox</tabstop>
   <tabstop>dct8x8CheckBox</tabstop>
   <tabstop>p8x8CheckBox</tabstop>
   <tabstop>b8x8CheckBox</tabstop>

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/x264Options.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/x264Options.cpp	2009-11-29 18:15:15 UTC (rev 5592)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/x264Options.cpp	2009-11-29 18:35:19 UTC (rev 5593)
@@ -393,6 +393,18 @@
 	_param.b_interlaced = interlaced;
 }
 
+#if X264_BUILD >= 77
+bool x264Options::getConstrainedIntraPrediction(void)
+{
+	return _param.b_constrained_intra;
+}
+
+void x264Options::setConstrainedIntraPrediction(bool constrainedIntra)
+{
+	_param.b_constrained_intra = constrainedIntra;
+}
+#endif
+
 unsigned int x264Options::getCqmPreset(void)
 {
 	return _param.i_cqm_preset;
@@ -1170,6 +1182,9 @@
 	xmlNewChild(xmlNodeRoot, NULL, (xmlChar*)"loopFilterBeta", number2String(xmlBuffer, bufferSize, getLoopFilterBeta()));
 	xmlNewChild(xmlNodeRoot, NULL, (xmlChar*)"cabac", boolean2String(xmlBuffer, bufferSize, getCabac()));
 	xmlNewChild(xmlNodeRoot, NULL, (xmlChar*)"interlaced", boolean2String(xmlBuffer, bufferSize, getInterlaced()));
+#if X264_BUILD >= 77
+	xmlNewChild(xmlNodeRoot, NULL, (xmlChar*)"constrainedIntraPrediction", boolean2String(xmlBuffer, bufferSize, getConstrainedIntraPrediction()));
+#endif
 
 	switch (getCqmPreset())
 	{
@@ -1434,6 +1449,10 @@
 				setCabac(string2Boolean(content));
 			else if (strcmp((char*)xmlChild->name, "interlaced") == 0)
 				setInterlaced(string2Boolean(content));
+#if X264_BUILD >= 77
+			else if (strcmp((char*)xmlChild->name, "constrainedIntraPrediction") == 0)
+				setConstrainedIntraPrediction(string2Boolean(content));
+#endif
 			else if (strcmp((char*)xmlChild->name, "cqmPreset") == 0)
 			{
 				int cqmPreset = 0;

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/x264Options.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/x264Options.h	2009-11-29 18:15:15 UTC (rev 5592)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/x264Options.h	2009-11-29 18:35:19 UTC (rev 5593)
@@ -141,6 +141,11 @@
 	bool getInterlaced(void);
 	void setInterlaced(bool interlaced);
 
+#if X264_BUILD >= 77
+	bool getConstrainedIntraPrediction(void);
+	void setConstrainedIntraPrediction(bool constrainedIntra);
+#endif
+
 	unsigned int getCqmPreset(void);
 	void setCqmPreset(unsigned int cqmPreset);
 

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/x264Param.xsd
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/x264Param.xsd	2009-11-29 18:15:15 UTC (rev 5592)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/x264Param.xsd	2009-11-29 18:35:19 UTC (rev 5593)
@@ -243,6 +243,7 @@
               </xs:element>
               <xs:element name="cabac" type="xs:boolean" minOccurs="0"/>
               <xs:element name="interlaced" type="xs:boolean" minOccurs="0"/>
+              <xs:element name="constrainedIntraPrediction" type="xs:boolean" minOccurs="0"/>
               <xs:element name="cqmPreset" minOccurs="0">
                 <xs:simpleType>
                   <xs:restriction base="xs:string">



From mean at mail.berlios.de  Sun Nov 29 20:25:45 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sun, 29 Nov 2009 20:25:45 +0100
Subject: [Avidemux-svn-commit] r5594 - in branches/avidemux_2.6_branch_mean:
	. avidemux_core
Message-ID: <200911291925.nATJPjSD002590@sheep.berlios.de>

Author: mean
Date: 2009-11-29 20:25:45 +0100 (Sun, 29 Nov 2009)
New Revision: 5594

Added:
   branches/avidemux_2.6_branch_mean/avidemux_core/corePackageRpm.cmake
Modified:
   branches/avidemux_2.6_branch_mean/avidemux_core/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/bootStrap.bash
Log:
[Build] Add rpm target in addition to deb

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/CMakeLists.txt	2009-11-29 18:35:19 UTC (rev 5593)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/CMakeLists.txt	2009-11-29 19:25:45 UTC (rev 5594)
@@ -70,6 +70,10 @@
 #
 # Packaging
 #
-INCLUDE(./corePackageDebian.cmake)
+IF(RPM)
+        INCLUDE(./corePackageRpm.cmake)
+ELSE(RPM)
+        INCLUDE(./corePackageDebian.cmake)
+ENDIF(RPM)
 INSTALL(FILES ${CMAKE_BINARY_DIR}/config/ADM_coreConfig.h DESTINATION "${AVIDEMUX_INCLUDE_DIR}/avidemux/2.6") 
 MESSAGE("")

Added: branches/avidemux_2.6_branch_mean/avidemux_core/corePackageRpm.cmake
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/corePackageRpm.cmake	2009-11-29 18:35:19 UTC (rev 5593)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/corePackageRpm.cmake	2009-11-29 19:25:45 UTC (rev 5594)
@@ -0,0 +1,27 @@
+##############################
+# RPM
+##############################
+SET(CPACK_SET_DESTDIR "ON")
+SET(CPACK_RPM_PACKAGE_NAME "avidemux3-core")
+SET (CPACK_GENERATOR "RPM")
+# ARCH
+IF (X86_64_SUPPORTED)
+SET(CPACK_RPM_PACKAGE_ARCHITECTURE "amd64")
+ELSE (X86_64_SUPPORTED)
+SET(CPACK_RPM_PACKAGE_ARCHITECTURE "i686")
+ENDIF (X86_64_SUPPORTED)
+# Mandatory
+SET(CPACK_RPM_PACKAGE_VENDOR "mean")
+SET(CPACK_RPM_PACKAGE_DESCRIPTION "Simple video editor,core libraries")
+
+# Some more infos
+SET(CPACK_PACKAGE_VERSION_MAJOR "2")
+SET(CPACK_PACKAGE_VERSION_MINOR "6")
+SET(CPACK_PACKAGE_VERSION_PATCH "0")
+
+SET(CPACK_PACKAGE_VERSION_PATCH "0-r${ADM_SUBVERSION}")
+#
+SET(CPACK_PACKAGE_NAME "avidemux3-core")
+#
+
+include(CPack)

Modified: branches/avidemux_2.6_branch_mean/bootStrap.bash
===================================================================
--- branches/avidemux_2.6_branch_mean/bootStrap.bash	2009-11-29 18:35:19 UTC (rev 5593)
+++ branches/avidemux_2.6_branch_mean/bootStrap.bash	2009-11-29 19:25:45 UTC (rev 5594)
@@ -19,7 +19,7 @@
         rm -Rf ./$BUILDDIR
         mkdir $BUILDDIR || fail mkdir
         cd $BUILDDIR 
-        cmake -DCMAKE_EDIT_COMMAND=vim -DAVIDEMUX_SOURCE_DIR=$TOP -DCMAKE_INSTALL_PREFIX=/usr $EXTRA $SOURCEDIR || fail cmake
+        cmake $PKG -DCMAKE_EDIT_COMMAND=vim -DAVIDEMUX_SOURCE_DIR=$TOP -DCMAKE_INSTALL_PREFIX=/usr $EXTRA $SOURCEDIR || fail cmake
         make -j 2 > /tmp/log$BUILDDIR || fail make
         fakeroot make package DESTDIR=debPack || fail package
 }
@@ -48,6 +48,7 @@
         echo "Bootstrap avidemux 2.6:"
         echo "***********************"
         echo "  --help            : Print usage"
+        echo "  --rpm             : Build rpm packages rather than deb"
         echo "  --with-core       : Build core"
         echo "  --without-core    : Dont build core"
         echo "  --with-cli        : Build cli"
@@ -68,6 +69,9 @@
              usage
              exit 1
              ;;
+         --rpm)
+                PKG="$PKG -DRPM=1"
+                ;;
          --without-qt4)
                 do_qt4=0
              ;;



From mean at mail.berlios.de  Sun Nov 29 20:35:39 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sun, 29 Nov 2009 20:35:39 +0100
Subject: [Avidemux-svn-commit] r5595 -
	branches/avidemux_2.6_branch_mean/avidemux/qt4
Message-ID: <200911291935.nATJZdt9003156@sheep.berlios.de>

Author: mean
Date: 2009-11-29 20:35:39 +0100 (Sun, 29 Nov 2009)
New Revision: 5595

Added:
   branches/avidemux_2.6_branch_mean/avidemux/qt4/qt4PackageRpm.cmake
Modified:
   branches/avidemux_2.6_branch_mean/avidemux/qt4/CMakeLists.txt
Log:
[Build] Add RPM for avidemux/QT4

Modified: branches/avidemux_2.6_branch_mean/avidemux/qt4/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/qt4/CMakeLists.txt	2009-11-29 19:25:45 UTC (rev 5594)
+++ branches/avidemux_2.6_branch_mean/avidemux/qt4/CMakeLists.txt	2009-11-29 19:35:39 UTC (rev 5595)
@@ -150,4 +150,8 @@
 ADM_LINK_THREAD(avidemux3_qt4)
 ADM_INSTALL_BIN(avidemux3_qt4)
 INSTALL(FILES ${CMAKE_BINARY_DIR}/config/qt4/config.h DESTINATION "${AVIDEMUX_INCLUDE_DIR}/avidemux/2.6/qt4") 
-include(./qt4PackageDebian.cmake)
+IF(RPM)
+        INCLUDE(./qt4PackageRpm.cmake)
+ELSE(RPM)
+        INCLUDE(./qt4PackageDebian.cmake)
+ENDIF(RPM)

Added: branches/avidemux_2.6_branch_mean/avidemux/qt4/qt4PackageRpm.cmake
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/qt4/qt4PackageRpm.cmake	2009-11-29 19:25:45 UTC (rev 5594)
+++ branches/avidemux_2.6_branch_mean/avidemux/qt4/qt4PackageRpm.cmake	2009-11-29 19:35:39 UTC (rev 5595)
@@ -0,0 +1,26 @@
+##############################
+# RPM
+##############################
+SET(CPACK_SET_DESTDIR "ON")
+SET(CPACK_RPM_PACKAGE_NAME "avidemux3-qt4")
+SET (CPACK_GENERATOR "DEB")
+# ARCH
+IF (X86_64_SUPPORTED)
+SET(CPACK_RPM_PACKAGE_ARCHITECTURE "amd64")
+ELSE (X86_64_SUPPORTED)
+SET(CPACK_RPM_PACKAGE_ARCHITECTURE "i386")
+ENDIF (X86_64_SUPPORTED)
+# Mandatory
+SET(CPACK_RPM_PACKAGE_VENDOR "mean")
+SET(CPACK_RPM_PACKAGE_DESCRIPTION "Simple video editori,main program qt4 version ")
+
+# Some more infos
+SET(CPACK_PACKAGE_VERSION_MAJOR "2")
+SET(CPACK_PACKAGE_VERSION_MINOR "6")
+SET(CPACK_PACKAGE_VERSION_PATCH "0")
+SET(CPACK_PACKAGE_VERSION_PATCH "0-${ADM_SUBVERSION}")
+#
+SET(CPACK_PACKAGE_NAME "avidemux3-qt4")
+#
+
+include(CPack)



From mean at mail.berlios.de  Sun Nov 29 20:40:40 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sun, 29 Nov 2009 20:40:40 +0100
Subject: [Avidemux-svn-commit] r5596 - in branches/avidemux_2.6_branch_mean:
	avidemux/qt4 avidemux_core
Message-ID: <200911291940.nATJee1e003545@sheep.berlios.de>

Author: mean
Date: 2009-11-29 20:40:40 +0100 (Sun, 29 Nov 2009)
New Revision: 5596

Modified:
   branches/avidemux_2.6_branch_mean/avidemux/qt4/qt4PackageRpm.cmake
   branches/avidemux_2.6_branch_mean/avidemux_core/corePackageRpm.cmake
Log:
[Build] Rpm naming scheme

Modified: branches/avidemux_2.6_branch_mean/avidemux/qt4/qt4PackageRpm.cmake
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/qt4/qt4PackageRpm.cmake	2009-11-29 19:35:39 UTC (rev 5595)
+++ branches/avidemux_2.6_branch_mean/avidemux/qt4/qt4PackageRpm.cmake	2009-11-29 19:40:40 UTC (rev 5596)
@@ -18,7 +18,7 @@
 SET(CPACK_PACKAGE_VERSION_MAJOR "2")
 SET(CPACK_PACKAGE_VERSION_MINOR "6")
 SET(CPACK_PACKAGE_VERSION_PATCH "0")
-SET(CPACK_PACKAGE_VERSION_PATCH "0-${ADM_SUBVERSION}")
+SET(CPACK_PACKAGE_VERSION_PATCH "0_${ADM_SUBVERSION}")
 #
 SET(CPACK_PACKAGE_NAME "avidemux3-qt4")
 #

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/corePackageRpm.cmake
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/corePackageRpm.cmake	2009-11-29 19:35:39 UTC (rev 5595)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/corePackageRpm.cmake	2009-11-29 19:40:40 UTC (rev 5596)
@@ -19,7 +19,7 @@
 SET(CPACK_PACKAGE_VERSION_MINOR "6")
 SET(CPACK_PACKAGE_VERSION_PATCH "0")
 
-SET(CPACK_PACKAGE_VERSION_PATCH "0-r${ADM_SUBVERSION}")
+SET(CPACK_PACKAGE_VERSION_PATCH "0_r${ADM_SUBVERSION}")
 #
 SET(CPACK_PACKAGE_NAME "avidemux3-core")
 #



From gruntster at mail.berlios.de  Sun Nov 29 21:22:49 2009
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Sun, 29 Nov 2009 21:22:49 +0100
Subject: [Avidemux-svn-commit] r5597 - in
	branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264:
	. qt4
Message-ID: <200911292022.nATKMnev006264@sheep.berlios.de>

Author: gruntster
Date: 2009-11-29 21:22:43 +0100 (Sun, 29 Nov 2009)
New Revision: 5597

Modified:
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/x264Options.cpp
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/x264Options.h
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/x264Param.xsd
Log:
[x264] add weighted prediction for pframe option to Qt interface

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp	2009-11-29 19:40:40 UTC (rev 5596)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp	2009-11-29 20:22:43 UTC (rev 5597)
@@ -95,6 +95,11 @@
 
 	ui.scenecutDetectionCheckBox->setVisible(false);
 
+#if X264_BUILD < 79
+	ui.lblWeightedPPredict->setVisible(false);
+	ui.weightedPPredictComboBox->setVisible(false);
+#endif
+
 	// Frame tab
 	connect(ui.loopFilterCheckBox, SIGNAL(toggled(bool)), this, SLOT(loopFilterCheckBox_toggled(bool)));
 	connect(ui.cabacCheckBox, SIGNAL(toggled(bool)), this, SLOT(cabacCheckBox_toggled(bool)));
@@ -695,6 +700,11 @@
 	}
 
 	ui.predictModeComboBox->setCurrentIndex(options->getDirectPredictionMode());
+
+#if X264_BUILD >= 79
+	ui.weightedPPredictComboBox->setCurrentIndex(options->getWeightedPredictionPFrames());
+#endif
+
 	ui.weightedPredictCheckBox->setChecked(options->getWeightedPrediction());
 
 	// Partition tab
@@ -914,6 +924,11 @@
 		options->setMotionVectorThreadBuffer(-1);
 
 	options->setDirectPredictionMode(ui.predictModeComboBox->currentIndex());
+
+#if X264_BUILD >= 79
+	options->setWeightedPredictionPFrames(ui.weightedPPredictComboBox->currentIndex());
+#endif
+
 	options->setWeightedPrediction(ui.weightedPredictCheckBox->isChecked());
 	options->setDct8x8(ui.dct8x8CheckBox->isChecked());
 	options->setPartitionP8x8(ui.p8x8CheckBox->isChecked());

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui	2009-11-29 19:40:40 UTC (rev 5596)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui	2009-11-29 20:22:43 UTC (rev 5597)
@@ -1097,29 +1097,78 @@
          <property name="title" >
           <string>Prediction</string>
          </property>
-         <layout class="QVBoxLayout" >
+         <layout class="QGridLayout" >
           <property name="margin" >
            <number>9</number>
           </property>
           <property name="spacing" >
            <number>6</number>
           </property>
-          <item>
-           <layout class="QHBoxLayout" >
+          <item row="0" column="0" >
+           <layout class="QGridLayout" >
             <property name="margin" >
              <number>0</number>
             </property>
             <property name="spacing" >
              <number>6</number>
             </property>
-            <item>
+            <item row="1" column="1" >
+             <layout class="QHBoxLayout" >
+              <property name="margin" >
+               <number>0</number>
+              </property>
+              <property name="spacing" >
+               <number>6</number>
+              </property>
+              <item>
+               <widget class="QComboBox" name="weightedPPredictComboBox" >
+                <item>
+                 <property name="text" >
+                  <string>Disabled</string>
+                 </property>
+                </item>
+                <item>
+                 <property name="text" >
+                  <string>Blind Offset</string>
+                 </property>
+                </item>
+                <item>
+                 <property name="text" >
+                  <string>Smart Analysis</string>
+                 </property>
+                </item>
+               </widget>
+              </item>
+              <item>
+               <spacer>
+                <property name="orientation" >
+                 <enum>Qt::Horizontal</enum>
+                </property>
+                <property name="sizeHint" >
+                 <size>
+                  <width>40</width>
+                  <height>20</height>
+                 </size>
+                </property>
+               </spacer>
+              </item>
+             </layout>
+            </item>
+            <item row="0" column="0" >
              <widget class="QLabel" name="label_40" >
               <property name="text" >
                <string>Direct Prediction Mode:</string>
               </property>
              </widget>
             </item>
-            <item>
+            <item row="1" column="0" >
+             <widget class="QLabel" name="lblWeightedPPredict" >
+              <property name="text" >
+               <string>Weighted Prediction for P-frames:</string>
+              </property>
+             </widget>
+            </item>
+            <item row="0" column="1" >
              <layout class="QHBoxLayout" >
               <property name="margin" >
                <number>0</number>
@@ -1171,14 +1220,14 @@
             </item>
            </layout>
           </item>
-          <item>
+          <item row="1" column="0" >
            <widget class="QCheckBox" name="weightedPredictCheckBox" >
             <property name="text" >
              <string>Weighted Prediction for B-frames</string>
             </property>
            </widget>
           </item>
-          <item>
+          <item row="2" column="0" >
            <widget class="QCheckBox" name="constrainedIntraCheckBox" >
             <property name="text" >
              <string>Constrained Intra Prediction</string>
@@ -4353,6 +4402,7 @@
   <tabstop>minThreadBufferCheckBox</tabstop>
   <tabstop>minThreadBufferSpinBox</tabstop>
   <tabstop>predictModeComboBox</tabstop>
+  <tabstop>weightedPPredictComboBox</tabstop>
   <tabstop>weightedPredictCheckBox</tabstop>
   <tabstop>constrainedIntraCheckBox</tabstop>
   <tabstop>dct8x8CheckBox</tabstop>

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/x264Options.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/x264Options.cpp	2009-11-29 19:40:40 UTC (rev 5596)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/x264Options.cpp	2009-11-29 20:22:43 UTC (rev 5597)
@@ -551,6 +551,18 @@
 	_param.analyse.b_transform_8x8 = dct8x8;
 }
 
+#if X264_BUILD >= 79
+unsigned int x264Options::getWeightedPredictionPFrames(void)
+{
+	return _param.analyse.i_weighted_pred;
+}
+
+void x264Options::setWeightedPredictionPFrames(unsigned int weightedPrediction)
+{
+	_param.analyse.i_weighted_pred = weightedPrediction;
+}
+#endif
+
 bool x264Options::getWeightedPrediction(void)
 {
 	return _param.analyse.b_weighted_bipred;
@@ -1245,6 +1257,24 @@
 	xmlNewChild(xmlNodeChild, NULL, (xmlChar*)"partitionP4x4", boolean2String(xmlBuffer, bufferSize, getPartitionP4x4()));
 	xmlNewChild(xmlNodeChild, NULL, (xmlChar*)"partitionB8x8", boolean2String(xmlBuffer, bufferSize, getPartitionB8x8()));
 	xmlNewChild(xmlNodeChild, NULL, (xmlChar*)"dct8x8", boolean2String(xmlBuffer, bufferSize, getDct8x8()));
+
+#if X264_BUILD >= 79
+	switch (getWeightedPredictionPFrames())
+	{
+		case X264_WEIGHTP_NONE:
+			strcpy((char*)xmlBuffer, "none");
+			break;
+		case X264_WEIGHTP_BLIND:
+			strcpy((char*)xmlBuffer, "blind");
+			break;
+		case X264_WEIGHTP_SMART:
+			strcpy((char*)xmlBuffer, "smart");
+			break;
+	}
+
+	xmlNewChild(xmlNodeChild, NULL, (xmlChar*)"weightedPredictionPframes", xmlBuffer);
+#endif
+
 	xmlNewChild(xmlNodeChild, NULL, (xmlChar*)"weightedPrediction", boolean2String(xmlBuffer, bufferSize, getWeightedPrediction()));
 
 	switch (getDirectPredictionMode())
@@ -1693,6 +1723,19 @@
 				setPartitionB8x8(string2Boolean(content));
 			else if (strcmp((char*)xmlChild->name, "dct8x8") == 0)
 				setDct8x8(string2Boolean(content));
+#if X264_BUILD >= 79
+			else if (strcmp((char*)xmlChild->name, "weightedPredictionPframes") == 0)
+			{
+				int weightedPredPFrames = X264_WEIGHTP_NONE;
+
+				if (strcmp(content, "blind") == 0)
+					weightedPredPFrames = X264_WEIGHTP_BLIND;
+				else if (strcmp(content, "smart") == 0)
+					weightedPredPFrames = X264_WEIGHTP_SMART;
+
+				setWeightedPredictionPFrames(weightedPredPFrames);
+			}
+#endif
 			else if (strcmp((char*)xmlChild->name, "weightedPrediction") == 0)
 				setWeightedPrediction(string2Boolean(content));
 			else if (strcmp((char*)xmlChild->name, "directPredictionMode") == 0)

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/x264Options.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/x264Options.h	2009-11-29 19:40:40 UTC (rev 5596)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/x264Options.h	2009-11-29 20:22:43 UTC (rev 5597)
@@ -185,6 +185,11 @@
 	bool getDct8x8(void);
 	void setDct8x8(bool dct8x8);
 
+#if X264_BUILD >= 79
+	unsigned int getWeightedPredictionPFrames(void);
+	void setWeightedPredictionPFrames(unsigned int weightedPrediction);
+#endif
+
 	bool getWeightedPrediction(void);
 	void setWeightedPrediction(bool weightedPrediction);
 

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/x264Param.xsd
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/x264Param.xsd	2009-11-29 19:40:40 UTC (rev 5596)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/x264Param.xsd	2009-11-29 20:22:43 UTC (rev 5597)
@@ -304,6 +304,15 @@
                     <xs:element name="partitionP4x4" type="xs:boolean" minOccurs="0"/>
                     <xs:element name="partitionB8x8" type="xs:boolean" minOccurs="0"/>
                     <xs:element name="dct8x8" type="xs:boolean" minOccurs="0"/>
+                    <xs:element name="weightedPredictionPframes" minOccurs="0">
+                      <xs:simpleType>
+                        <xs:restriction base="xs:string">
+                          <xs:enumeration value="none"/>
+                          <xs:enumeration value="blind"/>
+                          <xs:enumeration value="smart"/>
+                        </xs:restriction>
+                      </xs:simpleType>
+                    </xs:element>
                     <xs:element name="weightedPrediction" type="xs:boolean" minOccurs="0"/>
                     <xs:element name="directPredictionMode" minOccurs="0">
                       <xs:simpleType>



From mean at mail.berlios.de  Mon Nov 30 07:12:45 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Mon, 30 Nov 2009 07:12:45 +0100
Subject: [Avidemux-svn-commit] r5598 - in branches/avidemux_2.6_branch_mean:
	avidemux/qt4 avidemux_plugins
Message-ID: <200911300612.nAU6CjeS015051@sheep.berlios.de>

Author: mean
Date: 2009-11-30 07:12:37 +0100 (Mon, 30 Nov 2009)
New Revision: 5598

Added:
   branches/avidemux_2.6_branch_mean/avidemux_plugins/pluginsPackageRpm.cmake
Modified:
   branches/avidemux_2.6_branch_mean/avidemux/qt4/qt4PackageDebian.cmake
   branches/avidemux_2.6_branch_mean/avidemux/qt4/qt4PackageRpm.cmake
   branches/avidemux_2.6_branch_mean/avidemux_plugins/CMakeLists.txt
Log:
[Build] Fix RPM target + add plugins

Modified: branches/avidemux_2.6_branch_mean/avidemux/qt4/qt4PackageDebian.cmake
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/qt4/qt4PackageDebian.cmake	2009-11-29 20:22:43 UTC (rev 5597)
+++ branches/avidemux_2.6_branch_mean/avidemux/qt4/qt4PackageDebian.cmake	2009-11-30 06:12:37 UTC (rev 5598)
@@ -12,7 +12,7 @@
 ENDIF (X86_64_SUPPORTED)
 # Mandatory
 SET(CPACK_DEBIAN_PACKAGE_MAINTAINER "mean")
-SET(CPACK_DEBIAN_PACKAGE_DESCRIPTION "Simple video editori,main program qt4 version ")
+SET(CPACK_DEBIAN_PACKAGE_DESCRIPTION "Simple video editor,main program qt4 version ")
 
 # Build our deps list
 # Build deps SET(DEPS "debhelper (>> 4), libfreetype6-dev, libxml2-dev,  libxv-dev, dpatch , cmake, desktop-file-utils")

Modified: branches/avidemux_2.6_branch_mean/avidemux/qt4/qt4PackageRpm.cmake
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/qt4/qt4PackageRpm.cmake	2009-11-29 20:22:43 UTC (rev 5597)
+++ branches/avidemux_2.6_branch_mean/avidemux/qt4/qt4PackageRpm.cmake	2009-11-30 06:12:37 UTC (rev 5598)
@@ -3,7 +3,7 @@
 ##############################
 SET(CPACK_SET_DESTDIR "ON")
 SET(CPACK_RPM_PACKAGE_NAME "avidemux3-qt4")
-SET (CPACK_GENERATOR "DEB")
+SET (CPACK_GENERATOR "RPM")
 # ARCH
 IF (X86_64_SUPPORTED)
 SET(CPACK_RPM_PACKAGE_ARCHITECTURE "amd64")
@@ -12,7 +12,7 @@
 ENDIF (X86_64_SUPPORTED)
 # Mandatory
 SET(CPACK_RPM_PACKAGE_VENDOR "mean")
-SET(CPACK_RPM_PACKAGE_DESCRIPTION "Simple video editori,main program qt4 version ")
+SET(CPACK_RPM_PACKAGE_DESCRIPTION "Simple video editor,main program qt4 version ")
 
 # Some more infos
 SET(CPACK_PACKAGE_VERSION_MAJOR "2")

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/CMakeLists.txt	2009-11-29 20:22:43 UTC (rev 5597)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/CMakeLists.txt	2009-11-30 06:12:37 UTC (rev 5598)
@@ -158,4 +158,8 @@
 ########################################
 INCLUDE(admPluginConfigSummary)
 MESSAGE("")
-include(./pluginsPackageDebian.cmake)
+IF(RPM)
+        include(./pluginsPackageRpm.cmake)
+ELSE(RPM)
+        include(./pluginsPackageDebian.cmake)
+ENDIF(RPM)

Copied: branches/avidemux_2.6_branch_mean/avidemux_plugins/pluginsPackageRpm.cmake (from rev 5596, branches/avidemux_2.6_branch_mean/avidemux/qt4/qt4PackageRpm.cmake)
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/qt4/qt4PackageRpm.cmake	2009-11-29 19:40:40 UTC (rev 5596)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/pluginsPackageRpm.cmake	2009-11-30 06:12:37 UTC (rev 5598)
@@ -0,0 +1,29 @@
+##############################
+# RPM
+##############################
+SET(CPACK_SET_DESTDIR "ON")
+SET(CPACK_RPM_PACKAGE_NAME "avidemux3-plugins-${PLUGIN_UI}")
+SET (CPACK_GENERATOR "RPM")
+# ARCH
+IF (X86_64_SUPPORTED)
+SET(CPACK_RPM_PACKAGE_ARCHITECTURE "amd64")
+ELSE (X86_64_SUPPORTED)
+SET(CPACK_RPM_PACKAGE_ARCHITECTURE "i386")
+ENDIF (X86_64_SUPPORTED)
+# Mandatory
+SET(CPACK_RPM_PACKAGE_VENDOR "mean")
+SET(CPACK_RPM_PACKAGE_DESCRIPTION "Simple video editor, plugins ")
+
+#
+SET(CPACK_RPM_PACKAGE_SECTION "extra")
+SET(CPACK_RPM_PACKAGE_PRIORITY "optional")
+# Some more infos
+SET(CPACK_PACKAGE_VERSION_MAJOR "2")
+SET(CPACK_PACKAGE_VERSION_MINOR "6")
+SET(CPACK_PACKAGE_VERSION_PATCH "0")
+SET(CPACK_PACKAGE_VERSION_PATCH "0_r${ADM_SUBVERSION}")
+#
+SET(CPACK_PACKAGE_NAME "avidemux3-plugins-${PLUGIN_UI}")
+#
+
+include(CPack)



From mean at mail.berlios.de  Mon Nov 30 07:24:24 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Mon, 30 Nov 2009 07:24:24 +0100
Subject: [Avidemux-svn-commit] r5599 - branches/avidemux_2.6_branch_mean
Message-ID: <200911300624.nAU6OOGb003089@sheep.berlios.de>

Author: mean
Date: 2009-11-30 07:24:22 +0100 (Mon, 30 Nov 2009)
New Revision: 5599

Modified:
   branches/avidemux_2.6_branch_mean/bootStrap.bash
Log:
[Build] Fix typo in bootstrap for gtk

Modified: branches/avidemux_2.6_branch_mean/bootStrap.bash
===================================================================
--- branches/avidemux_2.6_branch_mean/bootStrap.bash	2009-11-30 06:12:37 UTC (rev 5598)
+++ branches/avidemux_2.6_branch_mean/bootStrap.bash	2009-11-30 06:24:22 UTC (rev 5599)
@@ -131,7 +131,7 @@
         cd $TOP
         Process buildCli ../avidemux/cli
 fi
-if [ "x$do_qt4" = "x1" ] ; then 
+if [ "x$do_gtk" = "x1" ] ; then 
         echo "** GTK **"
         cd $TOP
         Process buildGtk ../avidemux/gtk



From mean at mail.berlios.de  Mon Nov 30 07:37:20 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Mon, 30 Nov 2009 07:37:20 +0100
Subject: [Avidemux-svn-commit] r5600 - branches/avidemux_2.6_branch_mean
Message-ID: <200911300637.nAU6bKOg021995@sheep.berlios.de>

Author: mean
Date: 2009-11-30 07:37:19 +0100 (Mon, 30 Nov 2009)
New Revision: 5600

Modified:
   branches/avidemux_2.6_branch_mean/bootStrap.bash
Log:
[Build] Also gather rpm files

Modified: branches/avidemux_2.6_branch_mean/bootStrap.bash
===================================================================
--- branches/avidemux_2.6_branch_mean/bootStrap.bash	2009-11-30 06:24:22 UTC (rev 5599)
+++ branches/avidemux_2.6_branch_mean/bootStrap.bash	2009-11-30 06:37:19 UTC (rev 5600)
@@ -1,4 +1,5 @@
 #!/bin/bash
+packages_ext=deb
 do_core=1
 do_cli=0
 do_gtk=1
@@ -70,6 +71,7 @@
              exit 1
              ;;
          --rpm)
+                packages_ext=rpm
                 PKG="$PKG -DRPM=1"
                 ;;
          --without-qt4)
@@ -161,7 +163,7 @@
 cd $TOP
 rm -Rf debs
 mkdir debs
-find . -name "*.deb" | grep -vi cpa | xargs cp -t debs
+find . -name "*.$packages_ext" | grep -vi cpa | xargs cp -t debs
 echo "** debs directory ready **"
 ls -l debs
 echo "** ALL DONE **"



From mean at mail.berlios.de  Mon Nov 30 07:37:25 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Mon, 30 Nov 2009 07:37:25 +0100
Subject: [Avidemux-svn-commit] r5601 - branches/avidemux_2.6_branch_mean
Message-ID: <200911300637.nAU6bPYs022214@sheep.berlios.de>

Author: mean
Date: 2009-11-30 07:37:23 +0100 (Mon, 30 Nov 2009)
New Revision: 5601

Modified:
   branches/avidemux_2.6_branch_mean/bootStrap.bash
Log:
[Build] Also install qt4/... main app

Modified: branches/avidemux_2.6_branch_mean/bootStrap.bash
===================================================================
--- branches/avidemux_2.6_branch_mean/bootStrap.bash	2009-11-30 06:37:19 UTC (rev 5600)
+++ branches/avidemux_2.6_branch_mean/bootStrap.bash	2009-11-30 06:37:23 UTC (rev 5601)
@@ -127,16 +127,22 @@
         echo "** QT4 **"
         cd $TOP
         Process buildQt4 ../avidemux/qt4
+        echo " Qt4 needs to be installed, installing through sudo make install ...."
+        cd $TOP/buildQt4 && sudo make install
 fi
 if [ "x$do_cli" = "x1" ] ; then 
         echo "** CLI **"
         cd $TOP
         Process buildCli ../avidemux/cli
+        echo " Cli needs to be installed, installing through sudo make install ...."
+        cd $TOP/buildCli && sudo make install
 fi
 if [ "x$do_gtk" = "x1" ] ; then 
         echo "** GTK **"
         cd $TOP
         Process buildGtk ../avidemux/gtk
+        echo " Gtk needs to be installed, installing through sudo make install ...."
+        cd $TOP/buildGtk && sudo make install
 fi
 if [ "x$do_plugins" = "x1" ] ; then 
         echo "** Plugins **"



From gruntster at mail.berlios.de  Mon Nov 30 21:17:03 2009
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Mon, 30 Nov 2009 21:17:03 +0100
Subject: [Avidemux-svn-commit] r5602 -
	branches/avidemux_2.5_branch_gruntster/avidemux
Message-ID: <200911302017.nAUKH3hY032485@sheep.berlios.de>

Author: gruntster
Date: 2009-11-30 21:16:58 +0100 (Mon, 30 Nov 2009)
New Revision: 5602

Modified:
   branches/avidemux_2.5_branch_gruntster/avidemux/gtk_gui.cpp
Log:
[gui] fix cut and paste - it never seems to have worked??? (fixes #41)

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/gtk_gui.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/gtk_gui.cpp	2009-11-30 06:37:23 UTC (rev 5601)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/gtk_gui.cpp	2009-11-30 20:16:58 UTC (rev 5602)
@@ -764,10 +764,15 @@
 	}
 	break;
 
+	case ACT_Cut:
+		if (frameEnd < frameStart)
+		{
+			GUI_Error_HIG(QT_TR_NOOP("Marker A > B"), QT_TR_NOOP("Cannot cut."));
+			break;
+		}
+		else
+			video_body->copyToClipBoard(frameStart, frameEnd);
     case ACT_Delete:
-    case ACT_Cut:
-    
-     
       old=frameStart;
       if( A_delete(frameStart,frameEnd))
       {



