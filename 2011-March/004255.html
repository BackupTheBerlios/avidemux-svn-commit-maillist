<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Avidemux-svn-commit] r7093 - in	branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/x264:	. qt4
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/avidemux-svn-commit/2011-March/index.html" >
   <LINK REL="made" HREF="mailto:avidemux-svn-commit%40lists.berlios.de?Subject=Re%3A%20%5BAvidemux-svn-commit%5D%20r7093%20-%20in%0A%09branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/x264%3A%0A%09.%20qt4&In-Reply-To=%3C20110326185105.9B6DB4807EC%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="004254.html">
   <LINK REL="Next"  HREF="004256.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Avidemux-svn-commit] r7093 - in	branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/x264:	. qt4</H1>
    <B>mean at mail.berlios.de</B> 
    <A HREF="mailto:avidemux-svn-commit%40lists.berlios.de?Subject=Re%3A%20%5BAvidemux-svn-commit%5D%20r7093%20-%20in%0A%09branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/x264%3A%0A%09.%20qt4&In-Reply-To=%3C20110326185105.9B6DB4807EC%40sheep.berlios.de%3E"
       TITLE="[Avidemux-svn-commit] r7093 - in	branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/x264:	. qt4">mean at mail.berlios.de
       </A><BR>
    <I>Sat Mar 26 19:51:05 CET 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="004254.html">[Avidemux-svn-commit] r7092 - in	branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/x264:	. qt4
</A></li>
        <LI>Next message: <A HREF="004256.html">[Avidemux-svn-commit] r7094 -	branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/x264
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4255">[ date ]</a>
              <a href="thread.html#4255">[ thread ]</a>
              <a href="subject.html#4255">[ subject ]</a>
              <a href="author.html#4255">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: mean
Date: 2011-03-26 19:51:05 +0100 (Sat, 26 Mar 2011)
New Revision: 7093

Modified:
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/x264/ADM_x264.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/x264/ADM_x264Plugin.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/x264/qt4/Q_x264.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/x264/qt4/x264ConfigDialog.ui
Log:
[x264/qt4 dialog] Map more options

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/x264/ADM_x264.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/x264/ADM_x264.cpp	2011-03-26 18:51:03 UTC (rev 7092)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/x264/ADM_x264.cpp	2011-03-26 18:51:05 UTC (rev 7093)
@@ -42,6 +42,7 @@
 
 x264_encoder x264Settings=
 {
+   { // General
     {
     COMPRESS_AQ, //COMPRESSION_MODE  mode;
     20,              // uint32_t          qz;           /// Quantizer
@@ -55,8 +56,43 @@
         0*ADM_ENC_CAP_2PASS_BR+
         ADM_ENC_CAP_GLOBAL+
         0*ADM_ENC_CAP_SAME
-    }
-    
+    },
+    99, // Threads : auto
+    },
+    31, // Level
+    {1,1}, // Sar width/height
+    2, //uint32_t MaxRefFrames;
+    100, // uint32_t MinIdr;
+    500, // uint32_t MaxIdr;
+    2, //uint32_t MaxBFrame;
+    0, //uint32_t i_bframe_adaptative;
+    0, //uint32_t i_bframe_bias;
+    0, //uint32_t i_bframe_pyramid;
+    0, //bool b_deblocking_filter;
+    0, //int32_t i_deblocking_filter_alphac0;
+    0, //int32_t i_deblocking_filter_beta;
+    true, //bool cabac;
+    false, //bool interlaced;
+    true, //    bool b_8x8;
+    false, //    bool b_i4x4;
+    false, //    bool b_i8x8;
+    false, //    bool b_p8x8;
+    false, //    bool b_p16x16;
+    false, //    bool b_b16x16;
+    0, //    uint32_t weighted_pred;
+    0, //    bool weighted_bipred;
+    0, //    uint32_t direct_mv_pred;
+    0, //    uint32_t chroma_offset;
+    0, //    uint32_t me_method;
+    7, //    uint32_t subpel_refine;
+    false, //    bool chroma_me;
+    false, //    bool mixed_references;
+    1, //    uint32_t trellis;
+    true, //    bool fast_pskip;
+    false, //    bool dct_decimate;
+    0,//    uint32_t noise_reduction;
+    true,//    bool psy;
+//    
 };
 /**
         \fn x264Encoder

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/x264/ADM_x264Plugin.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/x264/ADM_x264Plugin.cpp	2011-03-26 18:51:03 UTC (rev 7092)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/x264/ADM_x264Plugin.cpp	2011-03-26 18:51:05 UTC (rev 7093)
@@ -26,7 +26,7 @@
                                &quot;Mpeg4 AVC (x264)&quot;,
                                &quot;x264 based mpeg4 AVC Encoder (c) 2010 Mean/Gruntster&quot;,
                                 x264Configure, // No configuration
-                                ADM_UI_ALL,
+                                ADM_UI_TYPE_BUILD,
                                 1,0,0,
                                 x264_encoder_param, // conf template
                                 &amp;x264Settings // conf var

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/x264/qt4/Q_x264.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/x264/qt4/Q_x264.cpp	2011-03-26 18:51:03 UTC (rev 7092)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/x264/qt4/Q_x264.cpp	2011-03-26 18:51:05 UTC (rev 7093)
@@ -61,6 +61,7 @@
 #define MK_CHECKBOX(x,y) ui.x-&gt;setChecked(myCopy.y)
 #define MK_UINT(x,y)  ui.x-&gt;setValue(myCopy.y)
 #define DISABLE(x) ui.x-&gt;setEnabled(false);
+#define MK_MENU(x,y) ui.x-&gt;setCurrentIndex(myCopy.y)
 bool x264Dialog::upload(void)
 {
           
@@ -83,7 +84,11 @@
           MK_UINT(maxBFramesSpinBox,MaxRefFrames);
           MK_UINT(minGopSizeSpinBox,MinIdr);
           MK_UINT(maxGopSizeSpinBox,MaxIdr);
+          MK_UINT(meSpinBox,analyze.subpel_refine);
 
+          MK_MENU(meMethodComboBox,analyze.me_method);
+          MK_MENU(weightedPPredictComboBox,analyze.weighted_pred);
+          MK_MENU(bFrameRefComboBox,i_bframe_pyramid);
 
         switch(ENCODING(mode))
         {
@@ -119,16 +124,33 @@
           DISABLE(loopFilterCheckBox);
           DISABLE(openGopCheckBox);
           DISABLE(interlacedCheckBox);
-          DISABLE(BFrameBiasSpinBox);
           DISABLE(intraRefreshCheckBox);
           DISABLE(noiseReductionSpinBox);
           DISABLE(mbTreeCheckBox);
+          DISABLE(mvRangeSpinBox);
+          DISABLE(mvLengthSpinBox);
+          DISABLE(minThreadBufferSpinBox);
+          DISABLE(predictModeComboBox);
+          DISABLE(constrainedIntraCheckBox);
+          DISABLE(IFrameThresholdSpinBox);
+          DISABLE(intraLumaSpinBox);
+          DISABLE(interLumaSpinBox);
+          DISABLE(groupBox_14);
+          DISABLE(tab_7);
+          DISABLE(tab_6);
+          DISABLE(tab_9);
+          DISABLE(tab);
+          DISABLE(maxCrfCheckBox);
+          DISABLE(lookaheadSpinBox);
+          DISABLE(psychoRdoSpinBox);
           return true;
 }
 #undef MK_CHECKBOX
 #undef MK_UINT
-#define MK_CHECKBOX(x,y) myCopy.y=ui.x-&gt;isChecked()
-#define MK_UINT(x,y)  myCopy.y=ui.x-&gt;value()
+#undef MK_MENU
+#define MK_CHECKBOX(x,y)    myCopy.y=ui.x-&gt;isChecked()
+#define MK_UINT(x,y)        myCopy.y=ui.x-&gt;value()
+#define MK_MENU(x,y)        myCopy.y=ui.x-&gt;currentIndex()
 bool x264Dialog::download(void)
 {
           MK_CHECKBOX(fastFirstPassCheckBox,analyze.fast_pskip);
@@ -150,7 +172,13 @@
           MK_UINT(maxBFramesSpinBox,MaxRefFrames);
           MK_UINT(minGopSizeSpinBox,MinIdr);
           MK_UINT(maxGopSizeSpinBox,MaxIdr);
+          MK_UINT(meSpinBox,analyze.subpel_refine);
+          MK_UINT(BFrameBiasSpinBox,i_bframe_bias);
 
+          MK_MENU(meMethodComboBox,analyze.me_method);
+          MK_MENU(weightedPPredictComboBox,analyze.weighted_pred);
+          MK_MENU(bFrameRefComboBox,i_bframe_pyramid);
+
           switch(ui.encodingModeComboBox-&gt;currentIndex())
           {
             case 0: ENCODING(mode)=COMPRESS_CBR; ENCODING(bitrate)=ui.targetRateControlSpinBox-&gt;value();break;

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/x264/qt4/x264ConfigDialog.ui
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/x264/qt4/x264ConfigDialog.ui	2011-03-26 18:51:03 UTC (rev 7092)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/x264/qt4/x264ConfigDialog.ui	2011-03-26 18:51:05 UTC (rev 7093)
@@ -7,8 +7,8 @@
    &lt;rect&gt;
     &lt;x&gt;0&lt;/x&gt;
     &lt;y&gt;0&lt;/y&gt;
-    &lt;width&gt;529&lt;/width&gt;
-    &lt;height&gt;599&lt;/height&gt;
+    &lt;width&gt;536&lt;/width&gt;
+    &lt;height&gt;638&lt;/height&gt;
    &lt;/rect&gt;
   &lt;/property&gt;
   &lt;property name=&quot;windowTitle&quot;&gt;
@@ -104,7 +104,7 @@
    &lt;item&gt;
     &lt;widget class=&quot;QTabWidget&quot; name=&quot;tabWidget&quot;&gt;
      &lt;property name=&quot;currentIndex&quot;&gt;
-      &lt;number&gt;0&lt;/number&gt;
+      &lt;number&gt;4&lt;/number&gt;
      &lt;/property&gt;
      &lt;widget class=&quot;QWidget&quot; name=&quot;tab_1&quot;&gt;
       &lt;attribute name=&quot;title&quot;&gt;


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="004254.html">[Avidemux-svn-commit] r7092 - in	branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/x264:	. qt4
</A></li>
	<LI>Next message: <A HREF="004256.html">[Avidemux-svn-commit] r7094 -	branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/x264
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4255">[ date ]</a>
              <a href="thread.html#4255">[ thread ]</a>
              <a href="subject.html#4255">[ subject ]</a>
              <a href="author.html#4255">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">More information about the Avidemux-svn-commit
mailing list</a><br>
</body></html>
