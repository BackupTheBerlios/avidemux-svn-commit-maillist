From gruntster at mail.berlios.de  Fri Feb  1 15:43:31 2008
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Fri, 1 Feb 2008 15:43:31 +0100
Subject: [Avidemux-svn-commit] r3783 - in
	branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces:
	ADM_GTK/ADM_dialog ADM_GTK/glade ADM_QT4/ADM_dialog
Message-ID: <200802011443.m11EhV7f004377@sheep.berlios.de>

Author: gruntster
Date: 2008-02-01 15:43:14 +0100 (Fri, 01 Feb 2008)
New Revision: 3783

Modified:
   branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp
   branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/glade/project_x264.glade
   branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_x264.cpp
Log:
[x264] add tesa motion estimation

Modified: branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp	2008-01-29 20:12:26 UTC (rev 3782)
+++ branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp	2008-02-01 14:43:14 UTC (rev 3783)
@@ -1,4 +1,4 @@
-# include <config.h>
+#include "config.h"
 
 #include <sys/stat.h>
 #include <unistd.h>
@@ -9,23 +9,22 @@
 #include <gdk/gdkkeysyms.h>
 #include <gtk/gtk.h>
 
-
-#include <gdk/gdkkeysyms.h>
-#include <gtk/gtk.h>
-
 #include "default.h"
 
-
 #include "ADM_toolkit_gtk/ADM_gladeSupport.h"
 #include "ADM_toolkit/toolkit.hxx"
 #include "ADM_toolkit_gtk/toolkit_gtk.h"
 #include "ADM_toolkit_gtk/toolkit_gtk_include.h"
 
 #include "ADM_assert.h" 
-
 #include "avidemutils.h"
 
 #ifdef USE_X264
+extern "C"
+{
+#include "x264.h"
+}
+
 #include "ADM_video/ADM_genvideo.hxx"
 #include "ADM_encoder/ADM_vidEncode.hxx"
 #include "ADM_encoder/adm_encoder.h"
@@ -51,7 +50,7 @@
 static GtkWidget *dialog;
 
 static void updateMode( void );
-static int cb_mod(GtkObject * object, gpointer user_data);
+static int signalReceiver(GtkObject * object, gpointer user_data);
 static ADM_x264Param *specific;
 static void upload(GtkWidget *dialog,ADM_x264Param *param);
 static void download(GtkWidget *dialog,ADM_x264Param *param);
@@ -95,32 +94,46 @@
 }x264_actions;
 uint8_t DIA_x264(COMPRES_PARAMS *config)
 {
-  
+
   uint8_t ret=0;
-  
+
         ADM_assert(config->extraSettingsLen==sizeof(ADM_x264Param));
-  
+
         memcpy(&generic,config,sizeof(generic));
         specific=(ADM_x264Param *)config->extraSettings;
-       
+
         dialog=create_dialog1();
         gtk_register_dialog(dialog);
         gtk_dialog_add_action_widget (GTK_DIALOG (dialog), WID(buttonResetDaults),ACTION_LOAD_DEFAULT);
-        //DISABLE(buttonLoadDefaults);
-        //DISABLE(buttonSaveDefaults);
+
+#if X264_BUILD >= 58
+		gtk_combo_box_append_text(GTK_COMBO_BOX(WID(comboboxMethod)), QT_TR_NOOP("Hadamard Exhaustive Search"));
+#endif
+
         upload(dialog,specific);
-        
         updateMode();
         
         // Fill in A/R
         for(int i=0;i<NB_X264_AR;i++)
-        {
           gtk_combo_box_append_text(GTK_COMBO_BOX(WID(comboboxentry1)),x264_ar[i].symbol); 
-          
-        }
+
         gtk_combo_box_set_active(GTK_COMBO_BOX(WID(comboboxentry1)),0);
-        gtk_signal_connect(GTK_OBJECT(WID(comboboxMode)), "changed",
-                           GTK_SIGNAL_FUNC(cb_mod), NULL);
+        gtk_signal_connect(GTK_OBJECT(WID(comboboxMode)), "changed", GTK_SIGNAL_FUNC(signalReceiver), NULL);
+
+		char text[80];
+		uint32_t war,har;
+		const char *s;
+
+		war = video_body->getPARWidth();
+		har = video_body->getPARHeight();
+
+		getAspectRatioFromAR(war, har, &s);
+		sprintf(text, "%s (%u:%u)", s, war, har);
+		gtk_label_set_text(GTK_LABEL(WID(label40)), text);
+
+		// Connect signal for deblocking filter
+		gtk_signal_connect(GTK_OBJECT(WID(checkbuttonDeblockingFilter)), "toggled", GTK_SIGNAL_FUNC(signalReceiver), NULL);
+
         int reply=0;
         while(1)
         {
@@ -227,23 +240,37 @@
       ADM_assert(0);
 #undef COMBO
   }
-}               
-int cb_mod(GtkObject * object, gpointer user_data)
+
+	int toggled = gtk_toggle_button_get_active(GTK_TOGGLE_BUTTON(WID(checkbuttonDeblockingFilter)));
+
+	if (toggled)
+		ENABLE(table8);
+	else
+		DISABLE(table8);
+}
+
+int signalReceiver(GtkObject * object, gpointer user_data)
 {
-  int r;
-  r=gtk_combo_box_get_active(GTK_COMBO_BOX(WID(comboboxMode)));
-  switch(r)
-  {
-    case 0: generic.mode=COMPRESS_AQ ;break;
-    case 1: generic.mode=COMPRESS_CQ ;break;
-    case 2: generic.mode=COMPRESS_CBR ;break;
-    case 3: generic.mode=COMPRESS_2PASS ;break;
-    case 4: generic.mode=COMPRESS_2PASS_BITRATE ;break;
-    default: ADM_assert(0);
-        
-  }
-  updateMode();
+	if (object == GTK_OBJECT(WID(comboboxMode)))
+	{
+		int r = gtk_combo_box_get_active(GTK_COMBO_BOX(WID(comboboxMode)));
+
+		switch(r)
+		{
+			case 0: generic.mode=COMPRESS_AQ; break;
+			case 1: generic.mode=COMPRESS_CQ; break;
+			case 2: generic.mode=COMPRESS_CBR; break;
+			case 3: generic.mode=COMPRESS_2PASS; break;
+			case 4: generic.mode=COMPRESS_2PASS_BITRATE; break;
+			default: ADM_assert(0);
+		}
+
+		updateMode();
+	}
+	else if (object == GTK_OBJECT(WID(checkbuttonDeblockingFilter)))
+		updateMode();
 }
+
 #undef SPIN_SET
 #undef SPIN_GET
 #define CHECK_SET(x)  {gtk_toggle_button_set_active( GTK_TOGGLE_BUTTON(WID(checkbutton##x)),param->x);}
@@ -354,12 +381,11 @@
   GtkWidget *alignment14;
   GtkWidget *tableBitrate;
   GtkWidget *labelEncodingMode;
-  GtkWidget *entryTarget;
   GtkWidget *labelQuantizer;
+  GtkWidget *labelTarget;
   GtkObject *spinbuttonQuantizer_adj;
   GtkWidget *spinbuttonQuantizer;
-  GtkWidget *hbuttonbox1;
-  GtkWidget *labelTarget;
+  GtkWidget *entryTarget;
   GtkWidget *comboboxMode;
   GtkWidget *labelPageBitrate;
   GtkWidget *alignment15;
@@ -373,12 +399,12 @@
   GtkWidget *comboboxPartitionDecision;
   GtkWidget *comboboxMethod;
   GtkWidget *table11;
-  GtkObject *spinbuttonMaxRefFrames_adj;
-  GtkWidget *spinbuttonMaxRefFrames;
   GtkWidget *labelMaxRefFrames;
   GtkWidget *labelRange;
   GtkObject *spinbuttonRange_adj;
   GtkWidget *spinbuttonRange;
+  GtkObject *spinbuttonMaxRefFrames_adj;
+  GtkWidget *spinbuttonMaxRefFrames;
   GtkWidget *checkbuttonChromaME;
   GtkWidget *checkbuttonMixedRefs;
   GtkWidget *hbox8;
@@ -393,18 +419,20 @@
   GtkWidget *entryAR_Num;
   GtkWidget *label53;
   GtkWidget *entryAR_Den;
-  GtkWidget *radiobuttonAsInputAR;
   GtkWidget *radiobuttonCustomAR;
   GSList *radiobuttonCustomAR_group = NULL;
   GtkWidget *radiobuttonPredefinedAR;
+  GtkWidget *radiobuttonAsInputAR;
+  GtkWidget *label40;
   GtkWidget *comboboxentry1;
-  GtkWidget *label40;
   GtkWidget *label39;
   GtkWidget *frame7;
   GtkWidget *alignment7;
   GtkWidget *vbox7;
+  GtkWidget *alignment21;
   GtkWidget *hbox2;
   GtkWidget *checkbuttonCABAC;
+  GtkWidget *hbox7;
   GtkWidget *labelTrellis;
   GtkObject *spinbuttonTrellis_adj;
   GtkWidget *spinbuttonTrellis;
@@ -415,12 +443,12 @@
   GtkWidget *hbox3;
   GtkWidget *checkbuttonDeblockingFilter;
   GtkWidget *table8;
+  GtkWidget *labelThreshold;
+  GtkWidget *labelStrength;
+  GtkObject *spinbuttonThreshold_adj;
+  GtkWidget *spinbuttonThreshold;
   GtkObject *spinbuttonStrength_adj;
   GtkWidget *spinbuttonStrength;
-  GtkObject *spinbuttonThreshold_adj;
-  GtkWidget *spinbuttonThreshold;
-  GtkWidget *labelThreshold;
-  GtkWidget *labelStrength;
   GtkWidget *label25;
   GtkWidget *labelPageMotion_More;
   GtkWidget *alignment16;
@@ -440,11 +468,12 @@
   GtkWidget *vbox4;
   GtkWidget *table5;
   GtkWidget *labelBias;
+  GtkWidget *labelMaxConsecutive;
   GtkObject *spinbuttonBias_adj;
   GtkWidget *spinbuttonBias;
   GtkObject *spinbuttonMaxBFrame_adj;
   GtkWidget *spinbuttonMaxBFrame;
-  GtkWidget *labelMaxConsecutive;
+  GtkWidget *alignment20;
   GtkWidget *table6;
   GtkWidget *checkbuttonBidirME;
   GtkWidget *checkbuttonWeighted;
@@ -462,13 +491,13 @@
   GtkWidget *table2;
   GtkObject *spinbuttonKeyframeBoost_adj;
   GtkWidget *spinbuttonKeyframeBoost;
-  GtkWidget *labelKeyframeboost;
-  GtkWidget *label11;
-  GtkWidget *label12;
   GtkObject *spinbuttonBframeReduction_adj;
   GtkWidget *spinbuttonBframeReduction;
   GtkObject *spinbuttonBitrateVariability_adj;
   GtkWidget *spinbuttonBitrateVariability;
+  GtkWidget *labelKeyframeboost;
+  GtkWidget *label11;
+  GtkWidget *label12;
   GtkWidget *label7;
   GtkWidget *frame2;
   GtkWidget *alignment2;
@@ -486,9 +515,9 @@
   GtkWidget *frame3;
   GtkWidget *alignment3;
   GtkWidget *table4;
-  GtkWidget *label16;
   GtkObject *spinbuttonSceneCut_adj;
   GtkWidget *spinbuttonSceneCut;
+  GtkWidget *label16;
   GtkWidget *label17;
   GtkObject *spinbuttonMinIdr_adj;
   GtkWidget *spinbuttonMinIdr;
@@ -515,9 +544,9 @@
   GtkWidget *frame10;
   GtkWidget *alignment10;
   GtkWidget *table15;
+  GtkWidget *labelBitrateVariance;
   GtkObject *spinbuttonBitrateVariance_adj;
   GtkWidget *spinbuttonBitrateVariance;
-  GtkWidget *labelBitrateVariance;
   GtkObject *spinbuttonQuantizerCompression_adj;
   GtkWidget *spinbuttonQuantizerCompression;
   GtkObject *spinbuttonTempBlurFrame_adj;
@@ -543,14 +572,16 @@
   GtkWidget *labelQuantizers;
   GtkWidget *frame9;
   GtkWidget *alignment9;
-  GtkWidget *table14;
+  GtkWidget *vbox9;
+  GtkWidget *radiobuttonFlatmatrix;
+  GSList *radiobuttonFlatmatrix_group = NULL;
+  GtkWidget *radiobuttonJVTmatrix;
+  GtkWidget *hbox13;
   GtkWidget *radiobuttonCustommatrix;
-  GSList *radiobuttonCustommatrix_group = NULL;
+  GtkWidget *hbox14;
   GtkWidget *filechooserbuttonOpenCQMFile;
-  GtkWidget *radiobuttonJVTmatrix;
-  GtkWidget *radiobuttonFlatmatrix;
+  GtkWidget *vseparator1;
   GtkWidget *buttonEditCustomMatrix;
-  GtkWidget *vseparator1;
   GtkWidget *labelFrameQuantizationMatrices;
   GtkWidget *labelMore;
   GtkWidget *dialog_action_area1;
@@ -562,7 +593,7 @@
   tooltips = gtk_tooltips_new ();
 
   dialog1 = gtk_dialog_new ();
-  gtk_window_set_title (GTK_WINDOW (dialog1), QT_TR_NOOP("x264 configuration"));
+  gtk_window_set_title (GTK_WINDOW (dialog1), QT_TR_NOOP("x264 Configuration"));
   gtk_window_set_type_hint (GTK_WINDOW (dialog1), GDK_WINDOW_TYPE_HINT_DIALOG);
 
   dialog_vbox1 = GTK_DIALOG (dialog1)->vbox;
@@ -574,62 +605,58 @@
 
   alignment14 = gtk_alignment_new (0.5, 0.5, 1, 1);
   gtk_widget_show (alignment14);
-  gtk_container_add (GTK_CONTAINER(notebook1), alignment14);
-  gtk_alignment_set_padding (GTK_ALIGNMENT (alignment14), 2, 10, 6, 6);
+  gtk_container_add (GTK_CONTAINER (notebook1), alignment14);
+  gtk_alignment_set_padding (GTK_ALIGNMENT (alignment14), 7, 7, 7, 7);
 
-  tableBitrate = gtk_table_new (4, 2, FALSE);
+  tableBitrate = gtk_table_new (3, 2, FALSE);
   gtk_widget_show (tableBitrate);
   gtk_container_add (GTK_CONTAINER (alignment14), tableBitrate);
+  gtk_table_set_row_spacings (GTK_TABLE (tableBitrate), 3);
+  gtk_table_set_col_spacings (GTK_TABLE (tableBitrate), 10);
 
   labelEncodingMode = gtk_label_new (QT_TR_NOOP("Encoding Mode"));
   gtk_widget_show (labelEncodingMode);
   gtk_table_attach (GTK_TABLE (tableBitrate), labelEncodingMode, 0, 1, 0, 1,
                     (GtkAttachOptions) (GTK_FILL),
-                    (GtkAttachOptions) (0), 5, 2);
+                    (GtkAttachOptions) (0), 0, 0);
   gtk_misc_set_alignment (GTK_MISC (labelEncodingMode), 0, 0.5);
 
-  entryTarget = gtk_entry_new ();
-  gtk_widget_show (entryTarget);
-  gtk_table_attach (GTK_TABLE (tableBitrate), entryTarget, 1, 2, 1, 2,
-                    (GtkAttachOptions) (GTK_EXPAND | GTK_FILL),
-                    (GtkAttachOptions) (0), 5, 2);
-  gtk_tooltips_set_tip (tooltips, entryTarget, QT_TR_NOOP("Target bitrate or file size"), NULL);
-
   labelQuantizer = gtk_label_new (QT_TR_NOOP("Quantizer"));
   gtk_widget_show (labelQuantizer);
   gtk_table_attach (GTK_TABLE (tableBitrate), labelQuantizer, 0, 1, 2, 3,
                     (GtkAttachOptions) (GTK_FILL),
-                    (GtkAttachOptions) (0), 5, 2);
+                    (GtkAttachOptions) (0), 0, 0);
   gtk_misc_set_alignment (GTK_MISC (labelQuantizer), 0, 0.5);
 
+  labelTarget = gtk_label_new (QT_TR_NOOP("Target Size"));
+  gtk_widget_show (labelTarget);
+  gtk_table_attach (GTK_TABLE (tableBitrate), labelTarget, 0, 1, 1, 2,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+  gtk_misc_set_alignment (GTK_MISC (labelTarget), 0, 0.5);
+
   spinbuttonQuantizer_adj = gtk_adjustment_new (4, 0, 51, 1, 10, 10);
   spinbuttonQuantizer = gtk_spin_button_new (GTK_ADJUSTMENT (spinbuttonQuantizer_adj), 1, 0);
   gtk_widget_show (spinbuttonQuantizer);
   gtk_table_attach (GTK_TABLE (tableBitrate), spinbuttonQuantizer, 1, 2, 2, 3,
-                    (GtkAttachOptions) (GTK_EXPAND | GTK_FILL),
-                    (GtkAttachOptions) (0), 5, 2);
+                    (GtkAttachOptions) (GTK_SHRINK | GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
   gtk_tooltips_set_tip (tooltips, spinbuttonQuantizer, QT_TR_NOOP("Constant Quantizer - Each frame will have the same compression. Low numbers equal higher quality while high numbers equal lower quality."), NULL);
   gtk_spin_button_set_numeric (GTK_SPIN_BUTTON (spinbuttonQuantizer), TRUE);
 
-  hbuttonbox1 = gtk_hbutton_box_new ();
-  gtk_widget_show (hbuttonbox1);
-  gtk_table_attach (GTK_TABLE (tableBitrate), hbuttonbox1, 0, 2, 3, 4,
-                    (GtkAttachOptions) (GTK_FILL),
-                    (GtkAttachOptions) (GTK_EXPAND | GTK_FILL), 40, 65);
-  gtk_button_box_set_layout (GTK_BUTTON_BOX (hbuttonbox1), GTK_BUTTONBOX_SPREAD);
+  entryTarget = gtk_entry_new ();
+  gtk_widget_show (entryTarget);
+  gtk_table_attach (GTK_TABLE (tableBitrate), entryTarget, 1, 2, 1, 2,
+                    (GtkAttachOptions) (GTK_SHRINK | GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+  gtk_tooltips_set_tip (tooltips, entryTarget, QT_TR_NOOP("Target bitrate or file size"), NULL);
+  gtk_entry_set_width_chars (GTK_ENTRY (entryTarget), 4);
 
-  labelTarget = gtk_label_new (QT_TR_NOOP("Target Size"));
-  gtk_widget_show (labelTarget);
-  gtk_table_attach (GTK_TABLE (tableBitrate), labelTarget, 0, 1, 1, 2,
-                    (GtkAttachOptions) (GTK_FILL),
-                    (GtkAttachOptions) (0), 5, 2);
-  gtk_misc_set_alignment (GTK_MISC (labelTarget), 0, 0.5);
-
   comboboxMode = gtk_combo_box_new_text ();
   gtk_widget_show (comboboxMode);
   gtk_table_attach (GTK_TABLE (tableBitrate), comboboxMode, 1, 2, 0, 1,
-                    (GtkAttachOptions) (GTK_EXPAND | GTK_FILL),
-                    (GtkAttachOptions) (GTK_FILL), 5, 2);
+                    (GtkAttachOptions) (GTK_SHRINK | GTK_FILL),
+                    (GtkAttachOptions) (GTK_FILL), 0, 0);
   gtk_combo_box_append_text (GTK_COMBO_BOX (comboboxMode), QT_TR_NOOP("Single Pass - Quality Quantizer (Average)"));
   gtk_combo_box_append_text (GTK_COMBO_BOX (comboboxMode), QT_TR_NOOP("Single Pass - Quality Quantizer (Constant)"));
   gtk_combo_box_append_text (GTK_COMBO_BOX (comboboxMode), QT_TR_NOOP("Single Pass - Bitrate (Average)"));
@@ -643,10 +670,10 @@
 
   alignment15 = gtk_alignment_new (0.5, 0.5, 1, 1);
   gtk_widget_show (alignment15);
-  gtk_container_add (GTK_CONTAINER(notebook1), alignment15);
-  gtk_alignment_set_padding (GTK_ALIGNMENT (alignment15), 2, 10, 6, 6);
+  gtk_container_add (GTK_CONTAINER (notebook1), alignment15);
+  gtk_alignment_set_padding (GTK_ALIGNMENT (alignment15), 7, 7, 7, 7);
 
-  vbox5 = gtk_vbox_new (FALSE, 6);
+  vbox5 = gtk_vbox_new (FALSE, 3);
   gtk_widget_show (vbox5);
   gtk_container_add (GTK_CONTAINER (alignment15), vbox5);
 
@@ -657,35 +684,37 @@
   alignment6 = gtk_alignment_new (0.5, 0.5, 1, 1);
   gtk_widget_show (alignment6);
   gtk_container_add (GTK_CONTAINER (frame6), alignment6);
-  gtk_alignment_set_padding (GTK_ALIGNMENT (alignment6), 0, 0, 12, 0);
+  gtk_alignment_set_padding (GTK_ALIGNMENT (alignment6), 7, 4, 7, 7);
 
-  vbox6 = gtk_vbox_new (FALSE, 0);
+  vbox6 = gtk_vbox_new (FALSE, 3);
   gtk_widget_show (vbox6);
   gtk_container_add (GTK_CONTAINER (alignment6), vbox6);
 
   table7 = gtk_table_new (2, 3, FALSE);
   gtk_widget_show (table7);
   gtk_box_pack_start (GTK_BOX (vbox6), table7, FALSE, TRUE, 0);
+  gtk_table_set_row_spacings (GTK_TABLE (table7), 3);
+  gtk_table_set_col_spacings (GTK_TABLE (table7), 10);
 
-  labelPartitionDecision = gtk_label_new (QT_TR_NOOP("Partition decision"));
+  labelPartitionDecision = gtk_label_new (QT_TR_NOOP("Partition Decision"));
   gtk_widget_show (labelPartitionDecision);
   gtk_table_attach (GTK_TABLE (table7), labelPartitionDecision, 0, 1, 0, 1,
                     (GtkAttachOptions) (GTK_FILL),
-                    (GtkAttachOptions) (0), 0, 1);
+                    (GtkAttachOptions) (0), 0, 0);
   gtk_misc_set_alignment (GTK_MISC (labelPartitionDecision), 0, 0.5);
 
   labelMethod = gtk_label_new (QT_TR_NOOP("Method"));
   gtk_widget_show (labelMethod);
   gtk_table_attach (GTK_TABLE (table7), labelMethod, 0, 1, 1, 2,
                     (GtkAttachOptions) (GTK_FILL),
-                    (GtkAttachOptions) (0), 0, 1);
+                    (GtkAttachOptions) (0), 0, 0);
   gtk_misc_set_alignment (GTK_MISC (labelMethod), 0, 0.5);
 
   comboboxPartitionDecision = gtk_combo_box_new_text ();
   gtk_widget_show (comboboxPartitionDecision);
   gtk_table_attach (GTK_TABLE (table7), comboboxPartitionDecision, 1, 3, 0, 1,
-                    (GtkAttachOptions) (GTK_SHRINK | GTK_FILL),
-                    (GtkAttachOptions) (GTK_SHRINK | GTK_FILL), 5, 2);
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (GTK_FILL), 0, 0);
   gtk_combo_box_append_text (GTK_COMBO_BOX (comboboxPartitionDecision), QT_TR_NOOP("1  - Extremely Low (Fastest)"));
   gtk_combo_box_append_text (GTK_COMBO_BOX (comboboxPartitionDecision), QT_TR_NOOP("2  - Very Low"));
   gtk_combo_box_append_text (GTK_COMBO_BOX (comboboxPartitionDecision), QT_TR_NOOP("3  - Low"));
@@ -693,60 +722,62 @@
   gtk_combo_box_append_text (GTK_COMBO_BOX (comboboxPartitionDecision), QT_TR_NOOP("5  - High (Default)"));
   gtk_combo_box_append_text (GTK_COMBO_BOX (comboboxPartitionDecision), QT_TR_NOOP("6  - Very High"));
   gtk_combo_box_append_text (GTK_COMBO_BOX (comboboxPartitionDecision), QT_TR_NOOP("6B - Very High (RDO on B-frames)"));
-  gtk_combo_box_append_text (GTK_COMBO_BOX (comboboxPartitionDecision), QT_TR_NOOP("7 - Ultra High"));
+  gtk_combo_box_append_text (GTK_COMBO_BOX (comboboxPartitionDecision), QT_TR_NOOP("7  - Ultra High"));
   gtk_combo_box_append_text (GTK_COMBO_BOX (comboboxPartitionDecision), QT_TR_NOOP("7B - Ultra High (RDO on B-frames)"));
 
   comboboxMethod = gtk_combo_box_new_text ();
   gtk_widget_show (comboboxMethod);
   gtk_table_attach (GTK_TABLE (table7), comboboxMethod, 1, 3, 1, 2,
                     (GtkAttachOptions) (GTK_FILL),
-                    (GtkAttachOptions) (GTK_FILL), 5, 2);
-  gtk_combo_box_append_text (GTK_COMBO_BOX (comboboxMethod), QT_TR_NOOP("Diamond search"));
-  gtk_combo_box_append_text (GTK_COMBO_BOX (comboboxMethod), QT_TR_NOOP("Hexagonal search"));
-  gtk_combo_box_append_text (GTK_COMBO_BOX (comboboxMethod), QT_TR_NOOP("Uneven multi-hexagon"));
-  gtk_combo_box_append_text (GTK_COMBO_BOX (comboboxMethod), QT_TR_NOOP("Exhaustive search"));
+                    (GtkAttachOptions) (GTK_FILL), 0, 0);
+  gtk_combo_box_append_text (GTK_COMBO_BOX (comboboxMethod), QT_TR_NOOP("Diamond Search"));
+  gtk_combo_box_append_text (GTK_COMBO_BOX (comboboxMethod), QT_TR_NOOP("Hexagonal Search"));
+  gtk_combo_box_append_text (GTK_COMBO_BOX (comboboxMethod), QT_TR_NOOP("Uneven Multi-hexagon"));
+  gtk_combo_box_append_text (GTK_COMBO_BOX (comboboxMethod), QT_TR_NOOP("Exhaustive Search"));
 
   table11 = gtk_table_new (2, 3, FALSE);
   gtk_widget_show (table11);
   gtk_box_pack_start (GTK_BOX (vbox6), table11, TRUE, FALSE, 0);
+  gtk_table_set_row_spacings (GTK_TABLE (table11), 3);
+  gtk_table_set_col_spacings (GTK_TABLE (table11), 10);
 
-  spinbuttonMaxRefFrames_adj = gtk_adjustment_new (0, 0, 16, 1, 10, 10);
-  spinbuttonMaxRefFrames = gtk_spin_button_new (GTK_ADJUSTMENT (spinbuttonMaxRefFrames_adj), 1, 0);
-  gtk_widget_show (spinbuttonMaxRefFrames);
-  gtk_table_attach (GTK_TABLE (table11), spinbuttonMaxRefFrames, 1, 2, 1, 2,
-                    (GtkAttachOptions) (GTK_EXPAND | GTK_FILL),
-                    (GtkAttachOptions) (0), 6, 2);
-  gtk_tooltips_set_tip (tooltips, spinbuttonMaxRefFrames, QT_TR_NOOP("Set how many previous frames can be referenced by a P/B-frame. Numbers above 5 do not seem to improve quality greatly. Numbers 3 to 5 are recommended."), NULL);
-  gtk_spin_button_set_numeric (GTK_SPIN_BUTTON (spinbuttonMaxRefFrames), TRUE);
-
-  labelMaxRefFrames = gtk_label_new (QT_TR_NOOP("Max. Ref. frames"));
+  labelMaxRefFrames = gtk_label_new (QT_TR_NOOP("Max. Ref. Frames"));
   gtk_widget_show (labelMaxRefFrames);
   gtk_table_attach (GTK_TABLE (table11), labelMaxRefFrames, 0, 1, 1, 2,
                     (GtkAttachOptions) (GTK_FILL),
-                    (GtkAttachOptions) (0), 0, 1);
+                    (GtkAttachOptions) (0), 0, 0);
   gtk_misc_set_alignment (GTK_MISC (labelMaxRefFrames), 0, 0.5);
 
   labelRange = gtk_label_new (QT_TR_NOOP("Range"));
   gtk_widget_show (labelRange);
   gtk_table_attach (GTK_TABLE (table11), labelRange, 0, 1, 0, 1,
                     (GtkAttachOptions) (GTK_FILL),
-                    (GtkAttachOptions) (0), 0, 1);
+                    (GtkAttachOptions) (0), 0, 0);
   gtk_misc_set_alignment (GTK_MISC (labelRange), 0, 0.5);
 
-  spinbuttonRange_adj = gtk_adjustment_new (16, 0, 64, 1, 10, 10);
+  spinbuttonRange_adj = gtk_adjustment_new (17, 0, 64, 1, 10, 10);
   spinbuttonRange = gtk_spin_button_new (GTK_ADJUSTMENT (spinbuttonRange_adj), 1, 0);
   gtk_widget_show (spinbuttonRange);
   gtk_table_attach (GTK_TABLE (table11), spinbuttonRange, 1, 2, 0, 1,
-                    (GtkAttachOptions) (GTK_EXPAND | GTK_FILL),
-                    (GtkAttachOptions) (0), 6, 2);
+                    (GtkAttachOptions) (GTK_SHRINK | GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
   gtk_tooltips_set_tip (tooltips, spinbuttonRange, QT_TR_NOOP("Define how many pixels are analysed for motion estimation. The higher the range the more accurate the analysis but the slower the encoding time."), NULL);
   gtk_spin_button_set_numeric (GTK_SPIN_BUTTON (spinbuttonRange), TRUE);
 
+  spinbuttonMaxRefFrames_adj = gtk_adjustment_new (1, 0, 16, 1, 10, 10);
+  spinbuttonMaxRefFrames = gtk_spin_button_new (GTK_ADJUSTMENT (spinbuttonMaxRefFrames_adj), 1, 0);
+  gtk_widget_show (spinbuttonMaxRefFrames);
+  gtk_table_attach (GTK_TABLE (table11), spinbuttonMaxRefFrames, 1, 2, 1, 2,
+                    (GtkAttachOptions) (GTK_SHRINK | GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+  gtk_tooltips_set_tip (tooltips, spinbuttonMaxRefFrames, QT_TR_NOOP("Set how many previous frames can be referenced by a P/B-frame. Numbers above 5 do not seem to improve quality greatly. Numbers 3 to 5 are recommended."), NULL);
+  gtk_spin_button_set_numeric (GTK_SPIN_BUTTON (spinbuttonMaxRefFrames), TRUE);
+
   checkbuttonChromaME = gtk_check_button_new_with_mnemonic (QT_TR_NOOP("Chroma ME"));
   gtk_widget_show (checkbuttonChromaME);
   gtk_table_attach (GTK_TABLE (table11), checkbuttonChromaME, 2, 3, 0, 1,
                     (GtkAttachOptions) (GTK_FILL),
-                    (GtkAttachOptions) (0), 11, 2);
+                    (GtkAttachOptions) (0), 30, 0);
   gtk_tooltips_set_tip (tooltips, checkbuttonChromaME, QT_TR_NOOP("Use color information for detecting motion to improve quality"), NULL);
   gtk_toggle_button_set_active (GTK_TOGGLE_BUTTON (checkbuttonChromaME), TRUE);
 
@@ -754,12 +785,12 @@
   gtk_widget_show (checkbuttonMixedRefs);
   gtk_table_attach (GTK_TABLE (table11), checkbuttonMixedRefs, 2, 3, 1, 2,
                     (GtkAttachOptions) (GTK_FILL),
-                    (GtkAttachOptions) (0), 11, 2);
+                    (GtkAttachOptions) (0), 30, 0);
   gtk_tooltips_set_tip (tooltips, checkbuttonMixedRefs, QT_TR_NOOP("Calculate referencing individually based on each partition"), NULL);
 
   hbox8 = gtk_hbox_new (TRUE, 0);
   gtk_widget_show (hbox8);
-  gtk_box_pack_start (GTK_BOX (vbox6), hbox8, TRUE, FALSE, 3);
+  gtk_box_pack_start (GTK_BOX (vbox6), hbox8, TRUE, TRUE, 0);
 
   checkbuttonfastPSkip = gtk_check_button_new_with_mnemonic (QT_TR_NOOP("Fast P-Skip"));
   gtk_widget_show (checkbuttonfastPSkip);
@@ -767,11 +798,12 @@
   gtk_tooltips_set_tip (tooltips, checkbuttonfastPSkip, QT_TR_NOOP("Early skip detection on P-frames to speedup encoding. Quality will be slightly reduced."), NULL);
   gtk_toggle_button_set_active (GTK_TOGGLE_BUTTON (checkbuttonfastPSkip), TRUE);
 
-  checkbuttonDCTDecimate = gtk_check_button_new_with_mnemonic (QT_TR_NOOP("DCT decimate"));
+  checkbuttonDCTDecimate = gtk_check_button_new_with_mnemonic (QT_TR_NOOP("DCT Decimate"));
   gtk_widget_show (checkbuttonDCTDecimate);
   gtk_box_pack_start (GTK_BOX (hbox8), checkbuttonDCTDecimate, FALSE, FALSE, 0);
+  gtk_toggle_button_set_active (GTK_TOGGLE_BUTTON (checkbuttonDCTDecimate), TRUE);
 
-  checkbuttoninterlaced = gtk_check_button_new_with_mnemonic (QT_TR_NOOP("Interlace"));
+  checkbuttoninterlaced = gtk_check_button_new_with_mnemonic (QT_TR_NOOP("Interlaced"));
   gtk_widget_show (checkbuttoninterlaced);
   gtk_box_pack_start (GTK_BOX (hbox8), checkbuttoninterlaced, FALSE, FALSE, 0);
   gtk_tooltips_set_tip (tooltips, checkbuttoninterlaced, QT_TR_NOOP("Input video is interlaced"), NULL);
@@ -788,106 +820,104 @@
   alignment12 = gtk_alignment_new (0.5, 0.5, 1, 1);
   gtk_widget_show (alignment12);
   gtk_container_add (GTK_CONTAINER (frameSampleAR), alignment12);
-  gtk_alignment_set_padding (GTK_ALIGNMENT (alignment12), 0, 4, 12, 0);
+  gtk_alignment_set_padding (GTK_ALIGNMENT (alignment12), 7, 7, 7, 7);
 
-  table35 = gtk_table_new (2, 2, FALSE);
+  table35 = gtk_table_new (3, 2, FALSE);
   gtk_widget_show (table35);
   gtk_container_add (GTK_CONTAINER (alignment12), table35);
+  gtk_table_set_row_spacings (GTK_TABLE (table35), 3);
+  gtk_table_set_col_spacings (GTK_TABLE (table35), 10);
 
   hbox12 = gtk_hbox_new (FALSE, 0);
   gtk_widget_show (hbox12);
   gtk_table_attach (GTK_TABLE (table35), hbox12, 1, 2, 1, 2,
-                    (GtkAttachOptions) (GTK_EXPAND | GTK_FILL),
-                    (GtkAttachOptions) (GTK_EXPAND | GTK_FILL), 11, 2);
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (GTK_FILL), 0, 0);
 
   entryAR_Num = gtk_entry_new ();
   gtk_widget_show (entryAR_Num);
   gtk_box_pack_start (GTK_BOX (hbox12), entryAR_Num, TRUE, TRUE, 0);
   gtk_tooltips_set_tip (tooltips, entryAR_Num, QT_TR_NOOP("Enforce the size of a decoded pixel decoded to a certain value. Set this to 1:1 for non-anamorphic video."), NULL);
   gtk_entry_set_text (GTK_ENTRY (entryAR_Num), QT_TR_NOOP("1"));
-  gtk_entry_set_width_chars (GTK_ENTRY (entryAR_Num), 3);
+  gtk_entry_set_width_chars (GTK_ENTRY (entryAR_Num), 4);
 
   label53 = gtk_label_new (QT_TR_NOOP(":"));
   gtk_widget_show (label53);
-  gtk_box_pack_start (GTK_BOX (hbox12), label53, FALSE, FALSE, 0);
-  gtk_label_set_justify (GTK_LABEL (label53), GTK_JUSTIFY_CENTER);
+  gtk_box_pack_start (GTK_BOX (hbox12), label53, FALSE, FALSE, 3);
 
   entryAR_Den = gtk_entry_new ();
   gtk_widget_show (entryAR_Den);
   gtk_box_pack_start (GTK_BOX (hbox12), entryAR_Den, TRUE, TRUE, 0);
   gtk_tooltips_set_tip (tooltips, entryAR_Den, QT_TR_NOOP("Enforce the size of a decoded pixel decoded to a certain value. Set this to 1:1 for non-anamorphic video."), NULL);
   gtk_entry_set_text (GTK_ENTRY (entryAR_Den), QT_TR_NOOP("1"));
-  gtk_entry_set_width_chars (GTK_ENTRY (entryAR_Den), 3);
+  gtk_entry_set_width_chars (GTK_ENTRY (entryAR_Den), 4);
 
   radiobuttonCustomAR = gtk_radio_button_new_with_mnemonic (NULL, QT_TR_NOOP("Custom"));
   gtk_widget_show (radiobuttonCustomAR);
   gtk_table_attach (GTK_TABLE (table35), radiobuttonCustomAR, 0, 1, 1, 2,
                     (GtkAttachOptions) (GTK_FILL),
-                    (GtkAttachOptions) (0), 0, 1);
+                    (GtkAttachOptions) (0), 0, 0);
   gtk_tooltips_set_tip (tooltips, radiobuttonCustomAR, QT_TR_NOOP("Set a custom aspect ratio. The default 1:1 is recommended for most video."), NULL);
   gtk_radio_button_set_group (GTK_RADIO_BUTTON (radiobuttonCustomAR), radiobuttonCustomAR_group);
   radiobuttonCustomAR_group = gtk_radio_button_get_group (GTK_RADIO_BUTTON (radiobuttonCustomAR));
   gtk_toggle_button_set_active (GTK_TOGGLE_BUTTON (radiobuttonCustomAR), TRUE);
 
-  radiobuttonPredefinedAR = gtk_radio_button_new_with_mnemonic (NULL, QT_TR_NOOP("Predefined Aspect Ratios"));
+  radiobuttonPredefinedAR = gtk_radio_button_new_with_mnemonic (NULL, QT_TR_NOOP("Predefined Aspect Ratio"));
   gtk_widget_show (radiobuttonPredefinedAR);
   gtk_table_attach (GTK_TABLE (table35), radiobuttonPredefinedAR, 0, 1, 0, 1,
                     (GtkAttachOptions) (GTK_FILL),
-                    (GtkAttachOptions) (0), 0, 1);
+                    (GtkAttachOptions) (0), 0, 0);
   gtk_tooltips_set_tip (tooltips, radiobuttonPredefinedAR, QT_TR_NOOP("Set a common predefined aspect ratio"), NULL);
   gtk_radio_button_set_group (GTK_RADIO_BUTTON (radiobuttonPredefinedAR), radiobuttonCustomAR_group);
   radiobuttonCustomAR_group = gtk_radio_button_get_group (GTK_RADIO_BUTTON (radiobuttonPredefinedAR));
 
-  radiobuttonAsInputAR = gtk_radio_button_new_with_mnemonic (NULL, QT_TR_NOOP("As input"));
+  radiobuttonAsInputAR = gtk_radio_button_new_with_mnemonic (NULL, QT_TR_NOOP("As Input"));
   gtk_widget_show (radiobuttonAsInputAR);
   gtk_table_attach (GTK_TABLE (table35), radiobuttonAsInputAR, 0, 1, 2, 3,
                     (GtkAttachOptions) (GTK_FILL),
-                    (GtkAttachOptions) (0), 0, 1);
-  gtk_tooltips_set_tip (tooltips, radiobuttonAsInputAR, QT_TR_NOOP("Get Pixel Aspect Ratio from input video file"), NULL);
+                    (GtkAttachOptions) (0), 0, 0);
   gtk_radio_button_set_group (GTK_RADIO_BUTTON (radiobuttonAsInputAR), radiobuttonCustomAR_group);
   radiobuttonCustomAR_group = gtk_radio_button_get_group (GTK_RADIO_BUTTON (radiobuttonAsInputAR));
 
-  char text[80];
-  uint32_t war,har;
-  const char *s;
-  war=video_body->getPARWidth();
-  har=video_body->getPARHeight();
-  getAspectRatioFromAR(war,har, &s);
-  sprintf(text, " %s (%u:%u)", s,war,har);
-
-  label40 = gtk_label_new (text);
+  label40 = gtk_label_new ("1:1 (1:1)");
   gtk_widget_show (label40);
   gtk_table_attach (GTK_TABLE (table35), label40, 1, 2, 2, 3,
-                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0),
                     (GtkAttachOptions) (0), 0, 0);
+  gtk_misc_set_alignment (GTK_MISC (label40), 0, 0.5);
 
   comboboxentry1 = gtk_combo_box_new_text ();
   gtk_widget_show (comboboxentry1);
   gtk_table_attach (GTK_TABLE (table35), comboboxentry1, 1, 2, 0, 1,
                     (GtkAttachOptions) (GTK_FILL),
-                    (GtkAttachOptions) (GTK_FILL), 11, 2);
+                    (GtkAttachOptions) (GTK_FILL), 0, 0);
 
-  label39 = gtk_label_new (QT_TR_NOOP("<b>Sample Aspect Ratio (A/R)</b>"));
+  label39 = gtk_label_new (QT_TR_NOOP("<b>Sample Aspect Ratio</b>"));
   gtk_widget_show (label39);
   gtk_frame_set_label_widget (GTK_FRAME (frameSampleAR), label39);
   gtk_label_set_use_markup (GTK_LABEL (label39), TRUE);
 
   frame7 = gtk_frame_new (NULL);
   gtk_widget_show (frame7);
-  gtk_box_pack_start (GTK_BOX (vbox5), frame7, FALSE, TRUE, 1);
+  gtk_box_pack_start (GTK_BOX (vbox5), frame7, FALSE, TRUE, 0);
 
   alignment7 = gtk_alignment_new (0.5, 0.5, 1, 1);
   gtk_widget_show (alignment7);
   gtk_container_add (GTK_CONTAINER (frame7), alignment7);
-  gtk_alignment_set_padding (GTK_ALIGNMENT (alignment7), 0, 4, 12, 0);
+  gtk_alignment_set_padding (GTK_ALIGNMENT (alignment7), 7, 7, 7, 7);
 
-  vbox7 = gtk_vbox_new (FALSE, 0);
+  vbox7 = gtk_vbox_new (FALSE, 3);
   gtk_widget_show (vbox7);
   gtk_container_add (GTK_CONTAINER (alignment7), vbox7);
 
-  hbox2 = gtk_hbox_new (FALSE, 0);
+  alignment21 = gtk_alignment_new (0.5, 0.5, 1, 1);
+  gtk_widget_show (alignment21);
+  gtk_box_pack_start (GTK_BOX (vbox7), alignment21, TRUE, TRUE, 0);
+  gtk_alignment_set_padding (GTK_ALIGNMENT (alignment21), 0, 3, 0, 0);
+
+  hbox2 = gtk_hbox_new (FALSE, 17);
   gtk_widget_show (hbox2);
-  gtk_box_pack_start (GTK_BOX (vbox7), hbox2, TRUE, TRUE, 0);
+  gtk_container_add (GTK_CONTAINER (alignment21), hbox2);
 
   checkbuttonCABAC = gtk_check_button_new_with_mnemonic (QT_TR_NOOP("CABAC"));
   gtk_widget_show (checkbuttonCABAC);
@@ -895,35 +925,39 @@
   gtk_tooltips_set_tip (tooltips, checkbuttonCABAC, QT_TR_NOOP("Lossless compression technique that reduces bitrate by approximately 10%. Increases encoding and decoding time."), NULL);
   gtk_toggle_button_set_active (GTK_TOGGLE_BUTTON (checkbuttonCABAC), TRUE);
 
+  hbox7 = gtk_hbox_new (FALSE, 10);
+  gtk_widget_show (hbox7);
+  gtk_box_pack_start (GTK_BOX (hbox2), hbox7, FALSE, FALSE, 0);
+
   labelTrellis = gtk_label_new (QT_TR_NOOP("Trellis"));
   gtk_widget_show (labelTrellis);
-  gtk_box_pack_start (GTK_BOX (hbox2), labelTrellis, TRUE, TRUE, 11);
-  gtk_misc_set_alignment (GTK_MISC (labelTrellis), 1, 0.5);
+  gtk_box_pack_start (GTK_BOX (hbox7), labelTrellis, FALSE, FALSE, 0);
+  gtk_misc_set_alignment (GTK_MISC (labelTrellis), 0, 0.5);
 
-  spinbuttonTrellis_adj = gtk_adjustment_new (1, 0, 2, 1, 10, 10);
+  spinbuttonTrellis_adj = gtk_adjustment_new (0, 0, 2, 1, 10, 10);
   spinbuttonTrellis = gtk_spin_button_new (GTK_ADJUSTMENT (spinbuttonTrellis_adj), 1, 0);
   gtk_widget_show (spinbuttonTrellis);
-  gtk_box_pack_start (GTK_BOX (hbox2), spinbuttonTrellis, FALSE, TRUE, 11);
+  gtk_box_pack_start (GTK_BOX (hbox7), spinbuttonTrellis, FALSE, FALSE, 0);
   gtk_tooltips_set_tip (tooltips, spinbuttonTrellis, QT_TR_NOOP("Use Trellis Rate Distortion Optimisation to find optimal encoding for each block. Level 0 equals disabled, level 1 equals normal and level 2 equals high."), NULL);
   gtk_spin_button_set_numeric (GTK_SPIN_BUTTON (spinbuttonTrellis), TRUE);
 
-  hbox11 = gtk_hbox_new (FALSE, 0);
+  hbox11 = gtk_hbox_new (FALSE, 10);
   gtk_widget_show (hbox11);
-  gtk_box_pack_start (GTK_BOX (vbox7), hbox11, TRUE, TRUE, 8);
+  gtk_box_pack_start (GTK_BOX (hbox2), hbox11, FALSE, FALSE, 2);
 
   labelNoiseReduction = gtk_label_new (QT_TR_NOOP("Noise Reduction"));
   gtk_widget_show (labelNoiseReduction);
-  gtk_box_pack_start (GTK_BOX (hbox11), labelNoiseReduction, TRUE, TRUE, 11);
-  gtk_misc_set_alignment (GTK_MISC (labelNoiseReduction), 1, 0.5);
+  gtk_box_pack_start (GTK_BOX (hbox11), labelNoiseReduction, FALSE, FALSE, 0);
+  gtk_misc_set_alignment (GTK_MISC (labelNoiseReduction), 0, 0.5);
 
   spinbuttonNoiseReduction_adj = gtk_adjustment_new (0, 0, 1000000000, 1, 10, 10);
   spinbuttonNoiseReduction = gtk_spin_button_new (GTK_ADJUSTMENT (spinbuttonNoiseReduction_adj), 1, 0);
   gtk_widget_show (spinbuttonNoiseReduction);
-  gtk_box_pack_start (GTK_BOX (hbox11), spinbuttonNoiseReduction, TRUE, TRUE, 11);
+  gtk_box_pack_start (GTK_BOX (hbox11), spinbuttonNoiseReduction, FALSE, FALSE, 0);
   gtk_tooltips_set_tip (tooltips, spinbuttonNoiseReduction, QT_TR_NOOP("Set the amount of noise reduction"), NULL);
   gtk_spin_button_set_numeric (GTK_SPIN_BUTTON (spinbuttonNoiseReduction), TRUE);
 
-  hbox3 = gtk_hbox_new (FALSE, 0);
+  hbox3 = gtk_hbox_new (FALSE, 10);
   gtk_widget_show (hbox3);
   gtk_box_pack_start (GTK_BOX (vbox7), hbox3, TRUE, TRUE, 0);
 
@@ -936,41 +970,43 @@
   table8 = gtk_table_new (2, 2, FALSE);
   gtk_widget_show (table8);
   gtk_box_pack_start (GTK_BOX (hbox3), table8, TRUE, TRUE, 0);
+  gtk_table_set_row_spacings (GTK_TABLE (table8), 3);
+  gtk_table_set_col_spacings (GTK_TABLE (table8), 10);
 
-  spinbuttonStrength_adj = gtk_adjustment_new (0, -6, 6, 1, 10, 10);
-  spinbuttonStrength = gtk_spin_button_new (GTK_ADJUSTMENT (spinbuttonStrength_adj), 1, 0);
-  gtk_widget_show (spinbuttonStrength);
-  gtk_table_attach (GTK_TABLE (table8), spinbuttonStrength, 1, 2, 0, 1,
-                    (GtkAttachOptions) (GTK_EXPAND | GTK_FILL),
-                    (GtkAttachOptions) (0), 11, 1);
-  gtk_tooltips_set_tip (tooltips, spinbuttonStrength, QT_TR_NOOP("Positive values will soften the video, negative values will sharpen."), NULL);
-  gtk_spin_button_set_numeric (GTK_SPIN_BUTTON (spinbuttonStrength), TRUE);
-
-  spinbuttonThreshold_adj = gtk_adjustment_new (0, -6, 6, 1, 10, 10);
-  spinbuttonThreshold = gtk_spin_button_new (GTK_ADJUSTMENT (spinbuttonThreshold_adj), 1, 0);
-  gtk_widget_show (spinbuttonThreshold);
-  gtk_table_attach (GTK_TABLE (table8), spinbuttonThreshold, 1, 2, 1, 2,
-                    (GtkAttachOptions) (GTK_EXPAND | GTK_FILL),
-                    (GtkAttachOptions) (0), 11, 1);
-  gtk_tooltips_set_tip (tooltips, spinbuttonThreshold, QT_TR_NOOP("Threshold for block detection. Positive values will detect more blocks, negative values will detect less."), NULL);
-  gtk_spin_button_set_numeric (GTK_SPIN_BUTTON (spinbuttonThreshold), TRUE);
-
-  labelThreshold = gtk_label_new (QT_TR_NOOP("<i>Threshold</i>"));
+  labelThreshold = gtk_label_new (QT_TR_NOOP("Threshold"));
   gtk_widget_show (labelThreshold);
   gtk_table_attach (GTK_TABLE (table8), labelThreshold, 0, 1, 1, 2,
                     (GtkAttachOptions) (GTK_FILL),
-                    (GtkAttachOptions) (0), 5, 1);
+                    (GtkAttachOptions) (0), 0, 0);
   gtk_label_set_use_markup (GTK_LABEL (labelThreshold), TRUE);
   gtk_misc_set_alignment (GTK_MISC (labelThreshold), 0, 0.5);
 
-  labelStrength = gtk_label_new (QT_TR_NOOP("<i>Strength</i>"));
+  labelStrength = gtk_label_new (QT_TR_NOOP("Strength"));
   gtk_widget_show (labelStrength);
   gtk_table_attach (GTK_TABLE (table8), labelStrength, 0, 1, 0, 1,
                     (GtkAttachOptions) (GTK_FILL),
-                    (GtkAttachOptions) (0), 5, 1);
+                    (GtkAttachOptions) (0), 0, 0);
   gtk_label_set_use_markup (GTK_LABEL (labelStrength), TRUE);
   gtk_misc_set_alignment (GTK_MISC (labelStrength), 0, 0.5);
 
+  spinbuttonThreshold_adj = gtk_adjustment_new (0, -6, 6, 1, 10, 10);
+  spinbuttonThreshold = gtk_spin_button_new (GTK_ADJUSTMENT (spinbuttonThreshold_adj), 1, 0);
+  gtk_widget_show (spinbuttonThreshold);
+  gtk_table_attach (GTK_TABLE (table8), spinbuttonThreshold, 1, 2, 1, 2,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+  gtk_tooltips_set_tip (tooltips, spinbuttonThreshold, QT_TR_NOOP("Threshold for block detection. Positive values will detect more blocks, negative values will detect less."), NULL);
+  gtk_spin_button_set_numeric (GTK_SPIN_BUTTON (spinbuttonThreshold), TRUE);
+
+  spinbuttonStrength_adj = gtk_adjustment_new (0, -6, 6, 1, 10, 10);
+  spinbuttonStrength = gtk_spin_button_new (GTK_ADJUSTMENT (spinbuttonStrength_adj), 1, 0);
+  gtk_widget_show (spinbuttonStrength);
+  gtk_table_attach (GTK_TABLE (table8), spinbuttonStrength, 1, 2, 0, 1,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+  gtk_tooltips_set_tip (tooltips, spinbuttonStrength, QT_TR_NOOP("Positive values will soften the video, negative values will sharpen"), NULL);
+  gtk_spin_button_set_numeric (GTK_SPIN_BUTTON (spinbuttonStrength), TRUE);
+
   label25 = gtk_label_new (QT_TR_NOOP("<b>Misc. Options</b>"));
   gtk_widget_show (label25);
   gtk_frame_set_label_widget (GTK_FRAME (frame7), label25);
@@ -982,10 +1018,10 @@
 
   alignment16 = gtk_alignment_new (0.5, 0.5, 1, 1);
   gtk_widget_show (alignment16);
-  gtk_container_add (GTK_CONTAINER(notebook1), alignment16);
-  gtk_alignment_set_padding (GTK_ALIGNMENT (alignment16), 2, 10, 6, 6);
+  gtk_container_add (GTK_CONTAINER (notebook1), alignment16);
+  gtk_alignment_set_padding (GTK_ALIGNMENT (alignment16), 7, 7, 7, 7);
 
-  vbox2 = gtk_vbox_new (FALSE, 6);
+  vbox2 = gtk_vbox_new (FALSE, 3);
   gtk_widget_show (vbox2);
   gtk_container_add (GTK_CONTAINER (alignment16), vbox2);
 
@@ -996,9 +1032,9 @@
   alignment4 = gtk_alignment_new (0.5, 0.5, 1, 1);
   gtk_widget_show (alignment4);
   gtk_container_add (GTK_CONTAINER (frame4), alignment4);
-  gtk_alignment_set_padding (GTK_ALIGNMENT (alignment4), 0, 4, 12, 0);
+  gtk_alignment_set_padding (GTK_ALIGNMENT (alignment4), 7, 7, 7, 7);
 
-  vbox3 = gtk_vbox_new (FALSE, 0);
+  vbox3 = gtk_vbox_new (FALSE, 3);
   gtk_widget_show (vbox3);
   gtk_container_add (GTK_CONTAINER (alignment4), vbox3);
 
@@ -1044,20 +1080,22 @@
 
   frame5 = gtk_frame_new (NULL);
   gtk_widget_show (frame5);
-  gtk_box_pack_start (GTK_BOX (vbox2), frame5, FALSE, TRUE, 1);
+  gtk_box_pack_start (GTK_BOX (vbox2), frame5, FALSE, TRUE, 0);
 
   alignment5 = gtk_alignment_new (0.5, 0.5, 1, 1);
   gtk_widget_show (alignment5);
   gtk_container_add (GTK_CONTAINER (frame5), alignment5);
-  gtk_alignment_set_padding (GTK_ALIGNMENT (alignment5), 0, 4, 12, 0);
+  gtk_alignment_set_padding (GTK_ALIGNMENT (alignment5), 7, 7, 7, 7);
 
-  vbox4 = gtk_vbox_new (FALSE, 0);
+  vbox4 = gtk_vbox_new (FALSE, 3);
   gtk_widget_show (vbox4);
   gtk_container_add (GTK_CONTAINER (alignment5), vbox4);
 
   table5 = gtk_table_new (2, 2, FALSE);
   gtk_widget_show (table5);
   gtk_box_pack_start (GTK_BOX (vbox4), table5, TRUE, TRUE, 0);
+  gtk_table_set_row_spacings (GTK_TABLE (table5), 3);
+  gtk_table_set_col_spacings (GTK_TABLE (table5), 10);
 
   labelBias = gtk_label_new (QT_TR_NOOP("Bias"));
   gtk_widget_show (labelBias);
@@ -1066,12 +1104,19 @@
                     (GtkAttachOptions) (0), 0, 0);
   gtk_misc_set_alignment (GTK_MISC (labelBias), 0, 0.5);
 
+  labelMaxConsecutive = gtk_label_new (QT_TR_NOOP("Max Consecutive"));
+  gtk_widget_show (labelMaxConsecutive);
+  gtk_table_attach (GTK_TABLE (table5), labelMaxConsecutive, 0, 1, 0, 1,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+  gtk_misc_set_alignment (GTK_MISC (labelMaxConsecutive), 0, 0.5);
+
   spinbuttonBias_adj = gtk_adjustment_new (0, -100, 100, 1, 10, 10);
   spinbuttonBias = gtk_spin_button_new (GTK_ADJUSTMENT (spinbuttonBias_adj), 1, 0);
   gtk_widget_show (spinbuttonBias);
   gtk_table_attach (GTK_TABLE (table5), spinbuttonBias, 1, 2, 1, 2,
-                    (GtkAttachOptions) (GTK_EXPAND | GTK_FILL),
-                    (GtkAttachOptions) (0), 11, 2);
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
   gtk_tooltips_set_tip (tooltips, spinbuttonBias, QT_TR_NOOP("Increase / decrease probability for how often B-frames are used. It will not violate the maximum consecutive frame limit."), NULL);
   gtk_spin_button_set_numeric (GTK_SPIN_BUTTON (spinbuttonBias), TRUE);
 
@@ -1079,34 +1124,34 @@
   spinbuttonMaxBFrame = gtk_spin_button_new (GTK_ADJUSTMENT (spinbuttonMaxBFrame_adj), 1, 0);
   gtk_widget_show (spinbuttonMaxBFrame);
   gtk_table_attach (GTK_TABLE (table5), spinbuttonMaxBFrame, 1, 2, 0, 1,
-                    (GtkAttachOptions) (GTK_EXPAND | GTK_FILL),
-                    (GtkAttachOptions) (0), 11, 2);
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
   gtk_tooltips_set_tip (tooltips, spinbuttonMaxBFrame, QT_TR_NOOP("Set the maximum number of consecutive B-frames. This defines how many duplicate frames can be dropped. Numbers 2 to 5 are recommended. This greatly improves the use of bitrate and quality."), NULL);
   gtk_spin_button_set_numeric (GTK_SPIN_BUTTON (spinbuttonMaxBFrame), TRUE);
 
-  labelMaxConsecutive = gtk_label_new (QT_TR_NOOP("Max Consecutive"));
-  gtk_widget_show (labelMaxConsecutive);
-  gtk_table_attach (GTK_TABLE (table5), labelMaxConsecutive, 0, 1, 0, 1,
-                    (GtkAttachOptions) (GTK_EXPAND | GTK_FILL),
-                    (GtkAttachOptions) (0), 0, 0);
-  gtk_misc_set_alignment (GTK_MISC (labelMaxConsecutive), 0, 0.5);
+  alignment20 = gtk_alignment_new (0.5, 0.5, 1, 1);
+  gtk_widget_show (alignment20);
+  gtk_box_pack_start (GTK_BOX (vbox4), alignment20, TRUE, TRUE, 0);
+  gtk_alignment_set_padding (GTK_ALIGNMENT (alignment20), 3, 3, 0, 0);
 
   table6 = gtk_table_new (2, 2, FALSE);
   gtk_widget_show (table6);
-  gtk_box_pack_start (GTK_BOX (vbox4), table6, TRUE, TRUE, 5);
+  gtk_container_add (GTK_CONTAINER (alignment20), table6);
+  gtk_table_set_row_spacings (GTK_TABLE (table6), 3);
+  gtk_table_set_col_spacings (GTK_TABLE (table6), 10);
 
   checkbuttonBidirME = gtk_check_button_new_with_mnemonic (QT_TR_NOOP("Bidirectional ME"));
   gtk_widget_show (checkbuttonBidirME);
   gtk_table_attach (GTK_TABLE (table6), checkbuttonBidirME, 1, 2, 0, 1,
                     (GtkAttachOptions) (GTK_FILL),
-                    (GtkAttachOptions) (0), 5, 1);
-  gtk_tooltips_set_tip (tooltips, checkbuttonBidirME, QT_TR_NOOP("Optimize both motion vectors in B-frames. This will improve quality but take more time for encoding."), NULL);
+                    (GtkAttachOptions) (0), 0, 0);
+  gtk_tooltips_set_tip (tooltips, checkbuttonBidirME, QT_TR_NOOP("Optimise both motion vectors in B-frames. This will improve quality but take more time for encoding."), NULL);
 
-  checkbuttonWeighted = gtk_check_button_new_with_mnemonic (QT_TR_NOOP("Weighted biprediction"));
+  checkbuttonWeighted = gtk_check_button_new_with_mnemonic (QT_TR_NOOP("Weighted Biprediction"));
   gtk_widget_show (checkbuttonWeighted);
   gtk_table_attach (GTK_TABLE (table6), checkbuttonWeighted, 1, 2, 1, 2,
                     (GtkAttachOptions) (GTK_FILL),
-                    (GtkAttachOptions) (0), 5, 1);
+                    (GtkAttachOptions) (0), 0, 0);
   gtk_tooltips_set_tip (tooltips, checkbuttonWeighted, QT_TR_NOOP("Enables weighting of B-frames to help fades"), NULL);
   gtk_toggle_button_set_active (GTK_TOGGLE_BUTTON (checkbuttonWeighted), TRUE);
 
@@ -1114,29 +1159,29 @@
   gtk_widget_show (checkbuttonAdaptative);
   gtk_table_attach (GTK_TABLE (table6), checkbuttonAdaptative, 0, 1, 1, 2,
                     (GtkAttachOptions) (GTK_FILL),
-                    (GtkAttachOptions) (0), 5, 1);
+                    (GtkAttachOptions) (0), 0, 0);
   gtk_tooltips_set_tip (tooltips, checkbuttonAdaptative, QT_TR_NOOP("Use fewer B-frames if needed. This is always recommended. If not enabled, the codec will always use the maximum number of consecutive B-frames."), NULL);
   gtk_toggle_button_set_active (GTK_TOGGLE_BUTTON (checkbuttonAdaptative), TRUE);
 
-  checkbuttonBasReference = gtk_check_button_new_with_mnemonic (QT_TR_NOOP("Use as reference"));
+  checkbuttonBasReference = gtk_check_button_new_with_mnemonic (QT_TR_NOOP("Use as Reference"));
   gtk_widget_show (checkbuttonBasReference);
   gtk_table_attach (GTK_TABLE (table6), checkbuttonBasReference, 0, 1, 0, 1,
                     (GtkAttachOptions) (GTK_FILL),
-                    (GtkAttachOptions) (0), 5, 1);
+                    (GtkAttachOptions) (0), 0, 0);
   gtk_tooltips_set_tip (tooltips, checkbuttonBasReference, QT_TR_NOOP("Allow B-frames to make references non-linearly to another B-frame (instead of creating a duplicate copy)"), NULL);
 
-  hbox1 = gtk_hbox_new (FALSE, 0);
+  hbox1 = gtk_hbox_new (FALSE, 10);
   gtk_widget_show (hbox1);
-  gtk_box_pack_start (GTK_BOX (vbox4), hbox1, TRUE, FALSE, 5);
+  gtk_box_pack_start (GTK_BOX (vbox4), hbox1, TRUE, TRUE, 0);
 
   labelBFrameDirectMode = gtk_label_new (QT_TR_NOOP("B-Frame Direct Mode"));
   gtk_widget_show (labelBFrameDirectMode);
-  gtk_box_pack_start (GTK_BOX (hbox1), labelBFrameDirectMode, TRUE, TRUE, 0);
+  gtk_box_pack_start (GTK_BOX (hbox1), labelBFrameDirectMode, FALSE, TRUE, 0);
   gtk_misc_set_alignment (GTK_MISC (labelBFrameDirectMode), 0, 0.5);
 
   comboboxDirectMode = gtk_combo_box_new_text ();
   gtk_widget_show (comboboxDirectMode);
-  gtk_box_pack_start (GTK_BOX (hbox1), comboboxDirectMode, TRUE, TRUE, 11);
+  gtk_box_pack_start (GTK_BOX (hbox1), comboboxDirectMode, FALSE, TRUE, 0);
   gtk_combo_box_append_text (GTK_COMBO_BOX (comboboxDirectMode), QT_TR_NOOP("Auto"));
   gtk_combo_box_append_text (GTK_COMBO_BOX (comboboxDirectMode), QT_TR_NOOP("Temporal"));
   gtk_combo_box_append_text (GTK_COMBO_BOX (comboboxDirectMode), QT_TR_NOOP("Spatial"));
@@ -1153,10 +1198,10 @@
 
   alignment17 = gtk_alignment_new (0.5, 0.5, 1, 1);
   gtk_widget_show (alignment17);
-  gtk_container_add (GTK_CONTAINER(notebook1), alignment17);
-  gtk_alignment_set_padding (GTK_ALIGNMENT (alignment17), 2, 10, 6, 6);
+  gtk_container_add (GTK_CONTAINER (notebook1), alignment17);
+  gtk_alignment_set_padding (GTK_ALIGNMENT (alignment17), 7, 7, 7, 7);
 
-  vbox1 = gtk_vbox_new (FALSE, 4);
+  vbox1 = gtk_vbox_new (FALSE, 3);
   gtk_widget_show (vbox1);
   gtk_container_add (GTK_CONTAINER (alignment17), vbox1);
 
@@ -1167,61 +1212,63 @@
   alignment1 = gtk_alignment_new (0.5, 0.5, 1, 1);
   gtk_widget_show (alignment1);
   gtk_container_add (GTK_CONTAINER (frame1), alignment1);
-  gtk_alignment_set_padding (GTK_ALIGNMENT (alignment1), 0, 4, 12, 0);
+  gtk_alignment_set_padding (GTK_ALIGNMENT (alignment1), 7, 7, 7, 7);
 
   table2 = gtk_table_new (3, 2, FALSE);
   gtk_widget_show (table2);
   gtk_container_add (GTK_CONTAINER (alignment1), table2);
+  gtk_table_set_row_spacings (GTK_TABLE (table2), 3);
+  gtk_table_set_col_spacings (GTK_TABLE (table2), 10);
 
   spinbuttonKeyframeBoost_adj = gtk_adjustment_new (40, 0, 100, 1, 10, 10);
   spinbuttonKeyframeBoost = gtk_spin_button_new (GTK_ADJUSTMENT (spinbuttonKeyframeBoost_adj), 1, 0);
   gtk_widget_show (spinbuttonKeyframeBoost);
   gtk_table_attach (GTK_TABLE (table2), spinbuttonKeyframeBoost, 1, 2, 0, 1,
-                    (GtkAttachOptions) (GTK_EXPAND | GTK_FILL),
-                    (GtkAttachOptions) (0), 11, 2);
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
   gtk_widget_set_size_request (spinbuttonKeyframeBoost, 115, -1);
   gtk_tooltips_set_tip (tooltips, spinbuttonKeyframeBoost, QT_TR_NOOP("Set how much \"bitrate bonus\" a keyframe can get"), NULL);
   gtk_spin_button_set_numeric (GTK_SPIN_BUTTON (spinbuttonKeyframeBoost), TRUE);
 
-  labelKeyframeboost = gtk_label_new (QT_TR_NOOP("Keyframe boost (%)"));
+  spinbuttonBframeReduction_adj = gtk_adjustment_new (30, 0, 100, 1, 10, 10);
+  spinbuttonBframeReduction = gtk_spin_button_new (GTK_ADJUSTMENT (spinbuttonBframeReduction_adj), 1, 0);
+  gtk_widget_show (spinbuttonBframeReduction);
+  gtk_table_attach (GTK_TABLE (table2), spinbuttonBframeReduction, 1, 2, 1, 2,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+  gtk_tooltips_set_tip (tooltips, spinbuttonBframeReduction, QT_TR_NOOP("Set how much bitrate is deducted from a B-frame as compared to the previous P-frame"), NULL);
+  gtk_spin_button_set_numeric (GTK_SPIN_BUTTON (spinbuttonBframeReduction), TRUE);
+
+  spinbuttonBitrateVariability_adj = gtk_adjustment_new (60, 0, 100, 1, 10, 10);
+  spinbuttonBitrateVariability = gtk_spin_button_new (GTK_ADJUSTMENT (spinbuttonBitrateVariability_adj), 1, 0);
+  gtk_widget_show (spinbuttonBitrateVariability);
+  gtk_table_attach (GTK_TABLE (table2), spinbuttonBitrateVariability, 1, 2, 2, 3,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+  gtk_tooltips_set_tip (tooltips, spinbuttonBitrateVariability, QT_TR_NOOP("Define how much the bitrate can fluctuate over the entire video. 0% results in a constant bitrate stream, while 100% results in a pure quality based bitrate stream."), NULL);
+  gtk_spin_button_set_numeric (GTK_SPIN_BUTTON (spinbuttonBitrateVariability), TRUE);
+
+  labelKeyframeboost = gtk_label_new (QT_TR_NOOP("Keyframe Boost (%)"));
   gtk_widget_show (labelKeyframeboost);
   gtk_table_attach (GTK_TABLE (table2), labelKeyframeboost, 0, 1, 0, 1,
-                    (GtkAttachOptions) (GTK_EXPAND | GTK_FILL),
+                    (GtkAttachOptions) (GTK_FILL),
                     (GtkAttachOptions) (0), 0, 0);
   gtk_misc_set_alignment (GTK_MISC (labelKeyframeboost), 0, 0.5);
 
-  label11 = gtk_label_new (QT_TR_NOOP("B-frame reduction (%)"));
+  label11 = gtk_label_new (QT_TR_NOOP("B-frame Reduction (%)"));
   gtk_widget_show (label11);
   gtk_table_attach (GTK_TABLE (table2), label11, 0, 1, 1, 2,
-                    (GtkAttachOptions) (GTK_EXPAND | GTK_FILL),
+                    (GtkAttachOptions) (GTK_FILL),
                     (GtkAttachOptions) (0), 0, 0);
   gtk_misc_set_alignment (GTK_MISC (label11), 0, 0.5);
 
-  label12 = gtk_label_new (QT_TR_NOOP("Bitrate variability (%)"));
+  label12 = gtk_label_new (QT_TR_NOOP("Bitrate Variability (%)"));
   gtk_widget_show (label12);
   gtk_table_attach (GTK_TABLE (table2), label12, 0, 1, 2, 3,
-                    (GtkAttachOptions) (GTK_EXPAND | GTK_FILL),
+                    (GtkAttachOptions) (GTK_FILL),
                     (GtkAttachOptions) (0), 0, 0);
   gtk_misc_set_alignment (GTK_MISC (label12), 0, 0.5);
 
-  spinbuttonBframeReduction_adj = gtk_adjustment_new (30, 0, 100, 1, 10, 10);
-  spinbuttonBframeReduction = gtk_spin_button_new (GTK_ADJUSTMENT (spinbuttonBframeReduction_adj), 1, 0);
-  gtk_widget_show (spinbuttonBframeReduction);
-  gtk_table_attach (GTK_TABLE (table2), spinbuttonBframeReduction, 1, 2, 1, 2,
-                    (GtkAttachOptions) (GTK_EXPAND | GTK_FILL),
-                    (GtkAttachOptions) (0), 11, 2);
-  gtk_tooltips_set_tip (tooltips, spinbuttonBframeReduction, QT_TR_NOOP("Set how much bitrate is deducted from a B-frame as compared to the previous P-frame"), NULL);
-  gtk_spin_button_set_numeric (GTK_SPIN_BUTTON (spinbuttonBframeReduction), TRUE);
-
-  spinbuttonBitrateVariability_adj = gtk_adjustment_new (60, 0, 100, 1, 10, 10);
-  spinbuttonBitrateVariability = gtk_spin_button_new (GTK_ADJUSTMENT (spinbuttonBitrateVariability_adj), 1, 0);
-  gtk_widget_show (spinbuttonBitrateVariability);
-  gtk_table_attach (GTK_TABLE (table2), spinbuttonBitrateVariability, 1, 2, 2, 3,
-                    (GtkAttachOptions) (GTK_EXPAND | GTK_FILL),
-                    (GtkAttachOptions) (0), 11, 2);
-  gtk_tooltips_set_tip (tooltips, spinbuttonBitrateVariability, QT_TR_NOOP("Define how much the bitrate can fluctuate over the entire video. 0% results in a constant bitrate stream, while 100% results in a pure quality based bitrate stream."), NULL);
-  gtk_spin_button_set_numeric (GTK_SPIN_BUTTON (spinbuttonBitrateVariability), TRUE);
-
   label7 = gtk_label_new (QT_TR_NOOP("<b>Bitrate</b>"));
   gtk_widget_show (label7);
   gtk_frame_set_label_widget (GTK_FRAME (frame1), label7);
@@ -1234,30 +1281,32 @@
   alignment2 = gtk_alignment_new (0.5, 0.5, 1, 1);
   gtk_widget_show (alignment2);
   gtk_container_add (GTK_CONTAINER (frame2), alignment2);
-  gtk_alignment_set_padding (GTK_ALIGNMENT (alignment2), 0, 4, 12, 0);
+  gtk_alignment_set_padding (GTK_ALIGNMENT (alignment2), 7, 7, 7, 7);
 
   table3 = gtk_table_new (3, 2, FALSE);
   gtk_widget_show (table3);
   gtk_container_add (GTK_CONTAINER (alignment2), table3);
+  gtk_table_set_row_spacings (GTK_TABLE (table3), 3);
+  gtk_table_set_col_spacings (GTK_TABLE (table3), 20);
 
   label13 = gtk_label_new (QT_TR_NOOP("Min QP"));
   gtk_widget_show (label13);
   gtk_table_attach (GTK_TABLE (table3), label13, 0, 1, 0, 1,
-                    (GtkAttachOptions) (GTK_EXPAND | GTK_FILL),
+                    (GtkAttachOptions) (GTK_FILL),
                     (GtkAttachOptions) (0), 0, 0);
   gtk_misc_set_alignment (GTK_MISC (label13), 0, 0.5);
 
   label14 = gtk_label_new (QT_TR_NOOP("Max QP"));
   gtk_widget_show (label14);
   gtk_table_attach (GTK_TABLE (table3), label14, 0, 1, 1, 2,
-                    (GtkAttachOptions) (GTK_EXPAND | GTK_FILL),
+                    (GtkAttachOptions) (GTK_FILL),
                     (GtkAttachOptions) (0), 0, 0);
   gtk_misc_set_alignment (GTK_MISC (label14), 0, 0.5);
 
   label15 = gtk_label_new (QT_TR_NOOP("Max QP Step"));
   gtk_widget_show (label15);
   gtk_table_attach (GTK_TABLE (table3), label15, 0, 1, 2, 3,
-                    (GtkAttachOptions) (GTK_EXPAND | GTK_FILL),
+                    (GtkAttachOptions) (GTK_FILL),
                     (GtkAttachOptions) (0), 0, 0);
   gtk_misc_set_alignment (GTK_MISC (label15), 0, 0.5);
 
@@ -1265,8 +1314,8 @@
   spinbuttonMinQp = gtk_spin_button_new (GTK_ADJUSTMENT (spinbuttonMinQp_adj), 1, 0);
   gtk_widget_show (spinbuttonMinQp);
   gtk_table_attach (GTK_TABLE (table3), spinbuttonMinQp, 1, 2, 0, 1,
-                    (GtkAttachOptions) (GTK_EXPAND | GTK_FILL),
-                    (GtkAttachOptions) (0), 11, 2);
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
   gtk_widget_set_size_request (spinbuttonMinQp, 54, -1);
   gtk_tooltips_set_tip (tooltips, spinbuttonMinQp, QT_TR_NOOP("Enforce a minimum quantizer level"), NULL);
   gtk_spin_button_set_numeric (GTK_SPIN_BUTTON (spinbuttonMinQp), TRUE);
@@ -1275,8 +1324,8 @@
   spinbuttonMaxQp = gtk_spin_button_new (GTK_ADJUSTMENT (spinbuttonMaxQp_adj), 1, 0);
   gtk_widget_show (spinbuttonMaxQp);
   gtk_table_attach (GTK_TABLE (table3), spinbuttonMaxQp, 1, 2, 1, 2,
-                    (GtkAttachOptions) (GTK_EXPAND | GTK_FILL),
-                    (GtkAttachOptions) (0), 11, 2);
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
   gtk_tooltips_set_tip (tooltips, spinbuttonMaxQp, QT_TR_NOOP("Enforce a maximum quantizer level"), NULL);
   gtk_spin_button_set_numeric (GTK_SPIN_BUTTON (spinbuttonMaxQp), TRUE);
 
@@ -1284,8 +1333,8 @@
   spinbuttonQpStep = gtk_spin_button_new (GTK_ADJUSTMENT (spinbuttonQpStep_adj), 1, 0);
   gtk_widget_show (spinbuttonQpStep);
   gtk_table_attach (GTK_TABLE (table3), spinbuttonQpStep, 1, 2, 2, 3,
-                    (GtkAttachOptions) (GTK_EXPAND | GTK_FILL),
-                    (GtkAttachOptions) (0), 11, 2);
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
   gtk_tooltips_set_tip (tooltips, spinbuttonQpStep, QT_TR_NOOP("Define how much the quantizer rate can change between two consecutive frames"), NULL);
   gtk_spin_button_set_numeric (GTK_SPIN_BUTTON (spinbuttonQpStep), TRUE);
 
@@ -1301,33 +1350,35 @@
   alignment3 = gtk_alignment_new (0.5, 0.5, 1, 1);
   gtk_widget_show (alignment3);
   gtk_container_add (GTK_CONTAINER (frame3), alignment3);
-  gtk_alignment_set_padding (GTK_ALIGNMENT (alignment3), 0, 4, 12, 0);
+  gtk_alignment_set_padding (GTK_ALIGNMENT (alignment3), 7, 7, 7, 7);
 
   table4 = gtk_table_new (3, 2, FALSE);
   gtk_widget_show (table4);
   gtk_container_add (GTK_CONTAINER (alignment3), table4);
+  gtk_table_set_row_spacings (GTK_TABLE (table4), 3);
+  gtk_table_set_col_spacings (GTK_TABLE (table4), 10);
 
-  label16 = gtk_label_new (QT_TR_NOOP("Scene Cut Threshold"));
-  gtk_widget_show (label16);
-  gtk_table_attach (GTK_TABLE (table4), label16, 0, 1, 0, 1,
-                    (GtkAttachOptions) (GTK_EXPAND | GTK_FILL),
-                    (GtkAttachOptions) (0), 0, 0);
-  gtk_misc_set_alignment (GTK_MISC (label16), 0, 0.5);
-
   spinbuttonSceneCut_adj = gtk_adjustment_new (40, 0, 100, 1, 10, 10);
   spinbuttonSceneCut = gtk_spin_button_new (GTK_ADJUSTMENT (spinbuttonSceneCut_adj), 1, 0);
   gtk_widget_show (spinbuttonSceneCut);
   gtk_table_attach (GTK_TABLE (table4), spinbuttonSceneCut, 1, 2, 0, 1,
-                    (GtkAttachOptions) (GTK_EXPAND | GTK_FILL),
-                    (GtkAttachOptions) (0), 11, 2);
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
   gtk_widget_set_size_request (spinbuttonSceneCut, 115, -1);
   gtk_tooltips_set_tip (tooltips, spinbuttonSceneCut, QT_TR_NOOP("Increase / decrease sensitivity for detecting scene changes. Improves I-frame usage and quality."), NULL);
   gtk_spin_button_set_numeric (GTK_SPIN_BUTTON (spinbuttonSceneCut), TRUE);
 
-  label17 = gtk_label_new (QT_TR_NOOP("Min IDR frame interval"));
+  label16 = gtk_label_new (QT_TR_NOOP("Scene Cut Threshold"));
+  gtk_widget_show (label16);
+  gtk_table_attach (GTK_TABLE (table4), label16, 0, 1, 0, 1,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+  gtk_misc_set_alignment (GTK_MISC (label16), 0, 0.5);
+
+  label17 = gtk_label_new (QT_TR_NOOP("Min IDR Frame Interval"));
   gtk_widget_show (label17);
   gtk_table_attach (GTK_TABLE (table4), label17, 0, 1, 1, 2,
-                    (GtkAttachOptions) (GTK_EXPAND | GTK_FILL),
+                    (GtkAttachOptions) (GTK_FILL),
                     (GtkAttachOptions) (0), 0, 0);
   gtk_misc_set_alignment (GTK_MISC (label17), 0, 0.5);
 
@@ -1335,8 +1386,8 @@
   spinbuttonMinIdr = gtk_spin_button_new (GTK_ADJUSTMENT (spinbuttonMinIdr_adj), 1, 0);
   gtk_widget_show (spinbuttonMinIdr);
   gtk_table_attach (GTK_TABLE (table4), spinbuttonMinIdr, 1, 2, 1, 2,
-                    (GtkAttachOptions) (GTK_EXPAND | GTK_FILL),
-                    (GtkAttachOptions) (0), 11, 2);
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
   gtk_tooltips_set_tip (tooltips, spinbuttonMinIdr, QT_TR_NOOP("Set minimum frame interval between IDR frames. Defines the minimum amount a frame can be reused and referenced by other frames before a new IDR frame is established."), NULL);
   gtk_spin_button_set_numeric (GTK_SPIN_BUTTON (spinbuttonMinIdr), TRUE);
 
@@ -1344,15 +1395,15 @@
   spinbuttonMaxIdr = gtk_spin_button_new (GTK_ADJUSTMENT (spinbuttonMaxIdr_adj), 1, 0);
   gtk_widget_show (spinbuttonMaxIdr);
   gtk_table_attach (GTK_TABLE (table4), spinbuttonMaxIdr, 1, 2, 2, 3,
-                    (GtkAttachOptions) (GTK_EXPAND | GTK_FILL),
-                    (GtkAttachOptions) (0), 11, 2);
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
   gtk_tooltips_set_tip (tooltips, spinbuttonMaxIdr, QT_TR_NOOP("Set maximum frame interval between IDR frames. Defines the maximum amount a frame can be reused and referenced by other frames before a new IDR frame is established."), NULL);
   gtk_spin_button_set_numeric (GTK_SPIN_BUTTON (spinbuttonMaxIdr), TRUE);
 
-  label18 = gtk_label_new (QT_TR_NOOP("Max IDR frame interval"));
+  label18 = gtk_label_new (QT_TR_NOOP("Max IDR Frame Interval"));
   gtk_widget_show (label18);
   gtk_table_attach (GTK_TABLE (table4), label18, 0, 1, 2, 3,
-                    (GtkAttachOptions) (GTK_EXPAND | GTK_FILL),
+                    (GtkAttachOptions) (GTK_FILL),
                     (GtkAttachOptions) (0), 0, 0);
   gtk_misc_set_alignment (GTK_MISC (label18), 0, 0.5);
 
@@ -1368,30 +1419,32 @@
   alignment11 = gtk_alignment_new (0.5, 0.5, 1, 1);
   gtk_widget_show (alignment11);
   gtk_container_add (GTK_CONTAINER (frameVideoBufferVerifier), alignment11);
-  gtk_alignment_set_padding (GTK_ALIGNMENT (alignment11), 0, 4, 12, 0);
+  gtk_alignment_set_padding (GTK_ALIGNMENT (alignment11), 7, 7, 7, 7);
 
-  table12 = gtk_table_new (3, 2, TRUE);
+  table12 = gtk_table_new (3, 2, FALSE);
   gtk_widget_show (table12);
   gtk_container_add (GTK_CONTAINER (alignment11), table12);
+  gtk_table_set_row_spacings (GTK_TABLE (table12), 3);
+  gtk_table_set_col_spacings (GTK_TABLE (table12), 10);
 
-  labelVBVBufferSize = gtk_label_new (QT_TR_NOOP("VBV buffer size"));
+  labelVBVBufferSize = gtk_label_new (QT_TR_NOOP("VBV Buffer Size"));
   gtk_widget_show (labelVBVBufferSize);
   gtk_table_attach (GTK_TABLE (table12), labelVBVBufferSize, 0, 1, 1, 2,
-                    (GtkAttachOptions) (GTK_EXPAND | GTK_FILL),
+                    (GtkAttachOptions) (GTK_FILL),
                     (GtkAttachOptions) (0), 0, 0);
   gtk_misc_set_alignment (GTK_MISC (labelVBVBufferSize), 0, 0.5);
 
-  labelVBVInitialbuffer = gtk_label_new (QT_TR_NOOP("Initial VBV buffer (%)"));
+  labelVBVInitialbuffer = gtk_label_new (QT_TR_NOOP("Initial VBV Buffer (%)"));
   gtk_widget_show (labelVBVInitialbuffer);
   gtk_table_attach (GTK_TABLE (table12), labelVBVInitialbuffer, 0, 1, 2, 3,
-                    (GtkAttachOptions) (GTK_EXPAND | GTK_FILL),
+                    (GtkAttachOptions) (GTK_FILL),
                     (GtkAttachOptions) (0), 0, 0);
   gtk_misc_set_alignment (GTK_MISC (labelVBVInitialbuffer), 0, 0.5);
 
-  labelVBVMaximumBitrate = gtk_label_new (QT_TR_NOOP("Maximum local bitrate"));
+  labelVBVMaximumBitrate = gtk_label_new (QT_TR_NOOP("Maximum Local Bitrate"));
   gtk_widget_show (labelVBVMaximumBitrate);
   gtk_table_attach (GTK_TABLE (table12), labelVBVMaximumBitrate, 0, 1, 0, 1,
-                    (GtkAttachOptions) (GTK_EXPAND | GTK_FILL),
+                    (GtkAttachOptions) (GTK_FILL),
                     (GtkAttachOptions) (0), 0, 0);
   gtk_misc_set_alignment (GTK_MISC (labelVBVMaximumBitrate), 0, 0.5);
 
@@ -1400,7 +1453,7 @@
   gtk_widget_show (spinbuttonvbv_max_bitrate);
   gtk_table_attach (GTK_TABLE (table12), spinbuttonvbv_max_bitrate, 1, 2, 0, 1,
                     (GtkAttachOptions) (GTK_FILL),
-                    (GtkAttachOptions) (0), 11, 2);
+                    (GtkAttachOptions) (0), 0, 0);
   gtk_spin_button_set_numeric (GTK_SPIN_BUTTON (spinbuttonvbv_max_bitrate), TRUE);
 
   spinbuttonvbv_buffer_size_adj = gtk_adjustment_new (0, 0, 99999, 1, 10, 10);
@@ -1408,15 +1461,15 @@
   gtk_widget_show (spinbuttonvbv_buffer_size);
   gtk_table_attach (GTK_TABLE (table12), spinbuttonvbv_buffer_size, 1, 2, 1, 2,
                     (GtkAttachOptions) (GTK_FILL),
-                    (GtkAttachOptions) (0), 11, 2);
+                    (GtkAttachOptions) (0), 0, 0);
   gtk_spin_button_set_numeric (GTK_SPIN_BUTTON (spinbuttonvbv_buffer_size), TRUE);
 
   spinbuttonvbv_buffer_init_adj = gtk_adjustment_new (90, 0, 100, 1, 10, 10);
-  spinbuttonvbv_buffer_init = gtk_spin_button_new (GTK_ADJUSTMENT (spinbuttonvbv_buffer_init_adj), 5, 0);
+  spinbuttonvbv_buffer_init = gtk_spin_button_new (GTK_ADJUSTMENT (spinbuttonvbv_buffer_init_adj), 1, 0);
   gtk_widget_show (spinbuttonvbv_buffer_init);
   gtk_table_attach (GTK_TABLE (table12), spinbuttonvbv_buffer_init, 1, 2, 2, 3,
                     (GtkAttachOptions) (GTK_FILL),
-                    (GtkAttachOptions) (0), 11, 2);
+                    (GtkAttachOptions) (0), 0, 0);
   gtk_spin_button_set_numeric (GTK_SPIN_BUTTON (spinbuttonvbv_buffer_init), TRUE);
 
   labelVideoBufferVerifier = gtk_label_new (QT_TR_NOOP("<b>Video Buffer Verifier</b>"));
@@ -1430,10 +1483,10 @@
 
   alignment18 = gtk_alignment_new (0.5, 0.5, 1, 1);
   gtk_widget_show (alignment18);
-  gtk_container_add (GTK_CONTAINER(notebook1), alignment18);
-  gtk_alignment_set_padding (GTK_ALIGNMENT (alignment18), 2, 10, 6, 6);
+  gtk_container_add (GTK_CONTAINER (notebook1), alignment18);
+  gtk_alignment_set_padding (GTK_ALIGNMENT (alignment18), 7, 7, 7, 7);
 
-  vbox8 = gtk_vbox_new (FALSE, 4);
+  vbox8 = gtk_vbox_new (FALSE, 3);
   gtk_widget_show (vbox8);
   gtk_container_add (GTK_CONTAINER (alignment18), vbox8);
 
@@ -1444,34 +1497,36 @@
   alignment10 = gtk_alignment_new (0.5, 0.5, 1, 1);
   gtk_widget_show (alignment10);
   gtk_container_add (GTK_CONTAINER (frame10), alignment10);
-  gtk_alignment_set_padding (GTK_ALIGNMENT (alignment10), 0, 4, 12, 0);
+  gtk_alignment_set_padding (GTK_ALIGNMENT (alignment10), 7, 7, 7, 7);
 
   table15 = gtk_table_new (4, 2, FALSE);
   gtk_widget_show (table15);
   gtk_container_add (GTK_CONTAINER (alignment10), table15);
+  gtk_table_set_row_spacings (GTK_TABLE (table15), 3);
+  gtk_table_set_col_spacings (GTK_TABLE (table15), 10);
 
+  labelBitrateVariance = gtk_label_new (QT_TR_NOOP("Bitrate Variance"));
+  gtk_widget_show (labelBitrateVariance);
+  gtk_table_attach (GTK_TABLE (table15), labelBitrateVariance, 0, 1, 0, 1,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+  gtk_misc_set_alignment (GTK_MISC (labelBitrateVariance), 0, 0.5);
+
   spinbuttonBitrateVariance_adj = gtk_adjustment_new (1, 0, 1, 0.10000000149, 10, 10);
   spinbuttonBitrateVariance = gtk_spin_button_new (GTK_ADJUSTMENT (spinbuttonBitrateVariance_adj), 0.10000000149, 1);
   gtk_widget_show (spinbuttonBitrateVariance);
   gtk_table_attach (GTK_TABLE (table15), spinbuttonBitrateVariance, 1, 2, 0, 1,
-                    (GtkAttachOptions) (GTK_EXPAND | GTK_FILL),
-                    (GtkAttachOptions) (0), 11, 2);
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
   gtk_tooltips_set_tip (tooltips, spinbuttonBitrateVariance, QT_TR_NOOP("Allowed variance of average bitrate. Lower values mean less variance. Higher values mean more variance."), NULL);
   gtk_spin_button_set_numeric (GTK_SPIN_BUTTON (spinbuttonBitrateVariance), TRUE);
 
-  labelBitrateVariance = gtk_label_new (QT_TR_NOOP("Bitrate Variance"));
-  gtk_widget_show (labelBitrateVariance);
-  gtk_table_attach (GTK_TABLE (table15), labelBitrateVariance, 0, 1, 0, 1,
-                    (GtkAttachOptions) (GTK_EXPAND | GTK_FILL),
-                    (GtkAttachOptions) (0), 0, 0);
-  gtk_misc_set_alignment (GTK_MISC (labelBitrateVariance), 0, 0.5);
-
   spinbuttonQuantizerCompression_adj = gtk_adjustment_new (0.600000023842, 0, 1, 0.10000000149, 10, 10);
   spinbuttonQuantizerCompression = gtk_spin_button_new (GTK_ADJUSTMENT (spinbuttonQuantizerCompression_adj), 0.10000000149, 1);
   gtk_widget_show (spinbuttonQuantizerCompression);
   gtk_table_attach (GTK_TABLE (table15), spinbuttonQuantizerCompression, 1, 2, 1, 2,
-                    (GtkAttachOptions) (GTK_EXPAND | GTK_FILL),
-                    (GtkAttachOptions) (0), 11, 2);
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
   gtk_tooltips_set_tip (tooltips, spinbuttonQuantizerCompression, QT_TR_NOOP("Allowed variance of average quantizer or quality. Lower values mean less variance. Higher values mean more variance. Note that 0 means constant quality while 1 means constant fluctuation. Recommended 0.6."), NULL);
   gtk_spin_button_set_numeric (GTK_SPIN_BUTTON (spinbuttonQuantizerCompression), TRUE);
 
@@ -1479,8 +1534,8 @@
   spinbuttonTempBlurFrame = gtk_spin_button_new (GTK_ADJUSTMENT (spinbuttonTempBlurFrame_adj), 1, 0);
   gtk_widget_show (spinbuttonTempBlurFrame);
   gtk_table_attach (GTK_TABLE (table15), spinbuttonTempBlurFrame, 1, 2, 2, 3,
-                    (GtkAttachOptions) (GTK_EXPAND | GTK_FILL),
-                    (GtkAttachOptions) (0), 11, 2);
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
   gtk_tooltips_set_tip (tooltips, spinbuttonTempBlurFrame, QT_TR_NOOP("Reduced fluctuations in Quantizer (before curve compression)"), NULL);
   gtk_spin_button_set_numeric (GTK_SPIN_BUTTON (spinbuttonTempBlurFrame), TRUE);
 
@@ -1488,29 +1543,28 @@
   spinbuttonTempBlurQuant = gtk_spin_button_new (GTK_ADJUSTMENT (spinbuttonTempBlurQuant_adj), 0.5, 1);
   gtk_widget_show (spinbuttonTempBlurQuant);
   gtk_table_attach (GTK_TABLE (table15), spinbuttonTempBlurQuant, 1, 2, 3, 4,
-                    (GtkAttachOptions) (GTK_EXPAND | GTK_FILL),
-                    (GtkAttachOptions) (0), 11, 2);
-  gtk_tooltips_set_tip (tooltips, spinbuttonTempBlurQuant, QT_TR_NOOP("Reduce fluctuations in Quantizer (after curve compression)"), NULL);
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
   gtk_spin_button_set_numeric (GTK_SPIN_BUTTON (spinbuttonTempBlurQuant), TRUE);
 
   labelQuantizerCompression = gtk_label_new (QT_TR_NOOP("Quantizer Compression"));
   gtk_widget_show (labelQuantizerCompression);
   gtk_table_attach (GTK_TABLE (table15), labelQuantizerCompression, 0, 1, 1, 2,
-                    (GtkAttachOptions) (GTK_EXPAND | GTK_FILL),
+                    (GtkAttachOptions) (GTK_FILL),
                     (GtkAttachOptions) (0), 0, 0);
   gtk_misc_set_alignment (GTK_MISC (labelQuantizerCompression), 0, 0.5);
 
-  labelTempBlurEstFrame = gtk_label_new (QT_TR_NOOP("Temp. Blur of est Frame Complexity"));
+  labelTempBlurEstFrame = gtk_label_new (QT_TR_NOOP("Temp. Blur of Est. Frame Complexity"));
   gtk_widget_show (labelTempBlurEstFrame);
   gtk_table_attach (GTK_TABLE (table15), labelTempBlurEstFrame, 0, 1, 2, 3,
-                    (GtkAttachOptions) (GTK_EXPAND | GTK_FILL),
+                    (GtkAttachOptions) (GTK_FILL),
                     (GtkAttachOptions) (0), 0, 0);
   gtk_misc_set_alignment (GTK_MISC (labelTempBlurEstFrame), 0, 0.5);
 
-  labelTempBlueQuant = gtk_label_new (QT_TR_NOOP("Temp. Blur of Quant after CC"));
+  labelTempBlueQuant = gtk_label_new (QT_TR_NOOP("Temp. Blur of Quant. after CC"));
   gtk_widget_show (labelTempBlueQuant);
   gtk_table_attach (GTK_TABLE (table15), labelTempBlueQuant, 0, 1, 3, 4,
-                    (GtkAttachOptions) (GTK_EXPAND | GTK_FILL),
+                    (GtkAttachOptions) (GTK_FILL),
                     (GtkAttachOptions) (0), 0, 0);
   gtk_misc_set_alignment (GTK_MISC (labelTempBlueQuant), 0, 0.5);
 
@@ -1526,18 +1580,20 @@
   alignment13 = gtk_alignment_new (0.5, 0.5, 1, 1);
   gtk_widget_show (alignment13);
   gtk_container_add (GTK_CONTAINER (frame11), alignment13);
-  gtk_alignment_set_padding (GTK_ALIGNMENT (alignment13), 0, 4, 12, 0);
+  gtk_alignment_set_padding (GTK_ALIGNMENT (alignment13), 7, 7, 7, 7);
 
   table16 = gtk_table_new (3, 2, FALSE);
   gtk_widget_show (table16);
   gtk_container_add (GTK_CONTAINER (alignment13), table16);
+  gtk_table_set_row_spacings (GTK_TABLE (table16), 3);
+  gtk_table_set_col_spacings (GTK_TABLE (table16), 10);
 
-  spinbutton8_adj = gtk_adjustment_new (1.4, 1, 10, 0.10000000149, 10, 10);
+  spinbutton8_adj = gtk_adjustment_new (1.39999997616, 1, 10, 0.10000000149, 10, 10);
   spinbutton8 = gtk_spin_button_new (GTK_ADJUSTMENT (spinbutton8_adj), 0.10000000149, 1);
   gtk_widget_show (spinbutton8);
   gtk_table_attach (GTK_TABLE (table16), spinbutton8, 1, 2, 0, 1,
-                    (GtkAttachOptions) (GTK_EXPAND | GTK_FILL),
-                    (GtkAttachOptions) (0), 11, 2);
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
   gtk_tooltips_set_tip (tooltips, spinbutton8, QT_TR_NOOP("Quantization factors used between I and P-frames"), NULL);
   gtk_spin_button_set_numeric (GTK_SPIN_BUTTON (spinbutton8), TRUE);
 
@@ -1545,8 +1601,8 @@
   spinbutton9 = gtk_spin_button_new (GTK_ADJUSTMENT (spinbutton9_adj), 0.10000000149, 1);
   gtk_widget_show (spinbutton9);
   gtk_table_attach (GTK_TABLE (table16), spinbutton9, 1, 2, 1, 2,
-                    (GtkAttachOptions) (GTK_EXPAND | GTK_FILL),
-                    (GtkAttachOptions) (0), 11, 2);
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
   gtk_tooltips_set_tip (tooltips, spinbutton9, QT_TR_NOOP("Quantization used between P and B-frames"), NULL);
   gtk_spin_button_set_numeric (GTK_SPIN_BUTTON (spinbutton9), TRUE);
 
@@ -1554,29 +1610,29 @@
   spinbuttonChromaQPOffset = gtk_spin_button_new (GTK_ADJUSTMENT (spinbuttonChromaQPOffset_adj), 1, 0);
   gtk_widget_show (spinbuttonChromaQPOffset);
   gtk_table_attach (GTK_TABLE (table16), spinbuttonChromaQPOffset, 1, 2, 2, 3,
-                    (GtkAttachOptions) (GTK_EXPAND | GTK_FILL),
-                    (GtkAttachOptions) (0), 11, 2);
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
   gtk_tooltips_set_tip (tooltips, spinbuttonChromaQPOffset, QT_TR_NOOP("Quantization difference between chroma (color) and luma (brightness)"), NULL);
   gtk_spin_button_set_numeric (GTK_SPIN_BUTTON (spinbuttonChromaQPOffset), TRUE);
 
   labelFactorbetweenIandP = gtk_label_new (QT_TR_NOOP("Factor between I and P-frame Quants"));
   gtk_widget_show (labelFactorbetweenIandP);
   gtk_table_attach (GTK_TABLE (table16), labelFactorbetweenIandP, 0, 1, 0, 1,
-                    (GtkAttachOptions) (GTK_EXPAND | GTK_FILL),
+                    (GtkAttachOptions) (GTK_FILL),
                     (GtkAttachOptions) (0), 0, 0);
   gtk_misc_set_alignment (GTK_MISC (labelFactorbetweenIandP), 0, 0.5);
 
   labelFactorbetweenPandB = gtk_label_new (QT_TR_NOOP("Factor between P and B-frame Quants"));
   gtk_widget_show (labelFactorbetweenPandB);
   gtk_table_attach (GTK_TABLE (table16), labelFactorbetweenPandB, 0, 1, 1, 2,
-                    (GtkAttachOptions) (GTK_EXPAND | GTK_FILL),
+                    (GtkAttachOptions) (GTK_FILL),
                     (GtkAttachOptions) (0), 0, 0);
   gtk_misc_set_alignment (GTK_MISC (labelFactorbetweenPandB), 0, 0.5);
 
   labelChromaQPOffset = gtk_label_new (QT_TR_NOOP("Chroma QP Offset"));
   gtk_widget_show (labelChromaQPOffset);
   gtk_table_attach (GTK_TABLE (table16), labelChromaQPOffset, 0, 1, 2, 3,
-                    (GtkAttachOptions) (GTK_EXPAND | GTK_FILL),
+                    (GtkAttachOptions) (GTK_FILL),
                     (GtkAttachOptions) (0), 0, 0);
   gtk_misc_set_alignment (GTK_MISC (labelChromaQPOffset), 0, 0.5);
 
@@ -1592,57 +1648,52 @@
   alignment9 = gtk_alignment_new (0.5, 0.5, 1, 1);
   gtk_widget_show (alignment9);
   gtk_container_add (GTK_CONTAINER (frame9), alignment9);
-  gtk_alignment_set_padding (GTK_ALIGNMENT (alignment9), 0, 4, 12, 6);
+  gtk_alignment_set_padding (GTK_ALIGNMENT (alignment9), 7, 7, 7, 7);
 
-  table14 = gtk_table_new (3, 4, FALSE);
-  gtk_widget_show (table14);
-  gtk_container_add (GTK_CONTAINER (alignment9), table14);
+  vbox9 = gtk_vbox_new (FALSE, 3);
+  gtk_widget_show (vbox9);
+  gtk_container_add (GTK_CONTAINER (alignment9), vbox9);
 
-  radiobuttonCustommatrix = gtk_radio_button_new_with_mnemonic (NULL, QT_TR_NOOP("Custom matrix"));
+  radiobuttonFlatmatrix = gtk_radio_button_new_with_mnemonic (NULL, QT_TR_NOOP("Flat Matrix"));
+  gtk_widget_show (radiobuttonFlatmatrix);
+  gtk_box_pack_start (GTK_BOX (vbox9), radiobuttonFlatmatrix, FALSE, FALSE, 0);
+  gtk_radio_button_set_group (GTK_RADIO_BUTTON (radiobuttonFlatmatrix), radiobuttonFlatmatrix_group);
+  radiobuttonFlatmatrix_group = gtk_radio_button_get_group (GTK_RADIO_BUTTON (radiobuttonFlatmatrix));
+  gtk_toggle_button_set_active (GTK_TOGGLE_BUTTON (radiobuttonFlatmatrix), TRUE);
+
+  radiobuttonJVTmatrix = gtk_radio_button_new_with_mnemonic (NULL, QT_TR_NOOP("JVT Matrix"));
+  gtk_widget_show (radiobuttonJVTmatrix);
+  gtk_box_pack_start (GTK_BOX (vbox9), radiobuttonJVTmatrix, FALSE, FALSE, 0);
+  gtk_radio_button_set_group (GTK_RADIO_BUTTON (radiobuttonJVTmatrix), radiobuttonFlatmatrix_group);
+  radiobuttonFlatmatrix_group = gtk_radio_button_get_group (GTK_RADIO_BUTTON (radiobuttonJVTmatrix));
+
+  hbox13 = gtk_hbox_new (FALSE, 10);
+  gtk_widget_show (hbox13);
+  gtk_box_pack_start (GTK_BOX (vbox9), hbox13, FALSE, FALSE, 0);
+
+  radiobuttonCustommatrix = gtk_radio_button_new_with_mnemonic (NULL, QT_TR_NOOP("Custom Matrix"));
   gtk_widget_show (radiobuttonCustommatrix);
-  gtk_table_attach (GTK_TABLE (table14), radiobuttonCustommatrix, 0, 1, 2, 3,
-                    (GtkAttachOptions) (GTK_EXPAND | GTK_FILL),
-                    (GtkAttachOptions) (0), 0, 0);
-  gtk_radio_button_set_group (GTK_RADIO_BUTTON (radiobuttonCustommatrix), radiobuttonCustommatrix_group);
-  radiobuttonCustommatrix_group = gtk_radio_button_get_group (GTK_RADIO_BUTTON (radiobuttonCustommatrix));
+  gtk_box_pack_start (GTK_BOX (hbox13), radiobuttonCustommatrix, TRUE, TRUE, 0);
+  gtk_radio_button_set_group (GTK_RADIO_BUTTON (radiobuttonCustommatrix), radiobuttonFlatmatrix_group);
+  radiobuttonFlatmatrix_group = gtk_radio_button_get_group (GTK_RADIO_BUTTON (radiobuttonCustommatrix));
 
-  /* Open custom quanitization matrix file */
+  hbox14 = gtk_hbox_new (FALSE, 0);
+  gtk_widget_show (hbox14);
+  gtk_box_pack_start (GTK_BOX (hbox13), hbox14, TRUE, TRUE, 0);
+
   filechooserbuttonOpenCQMFile = gtk_file_chooser_button_new (QT_TR_NOOP("Open CQM file"), GTK_FILE_CHOOSER_ACTION_OPEN);
   gtk_widget_show (filechooserbuttonOpenCQMFile);
-  gtk_table_attach (GTK_TABLE (table14), filechooserbuttonOpenCQMFile, 1, 2, 2, 3,
-                    (GtkAttachOptions) (GTK_EXPAND | GTK_FILL),
-                    (GtkAttachOptions) (GTK_FILL), 5, 2);
+  gtk_box_pack_start (GTK_BOX (hbox14), filechooserbuttonOpenCQMFile, TRUE, TRUE, 0);
 
-  radiobuttonJVTmatrix = gtk_radio_button_new_with_mnemonic (NULL, QT_TR_NOOP("JVT matrix"));
-  gtk_widget_show (radiobuttonJVTmatrix);
-  gtk_table_attach (GTK_TABLE (table14), radiobuttonJVTmatrix, 0, 4, 1, 2,
-                    (GtkAttachOptions) (GTK_FILL),
-                    (GtkAttachOptions) (0), 0, 2);
-  gtk_radio_button_set_group (GTK_RADIO_BUTTON (radiobuttonJVTmatrix), radiobuttonCustommatrix_group);
-  radiobuttonCustommatrix_group = gtk_radio_button_get_group (GTK_RADIO_BUTTON (radiobuttonJVTmatrix));
+  vseparator1 = gtk_vseparator_new ();
+  gtk_widget_show (vseparator1);
+  gtk_box_pack_start (GTK_BOX (hbox14), vseparator1, TRUE, TRUE, 0);
 
-  radiobuttonFlatmatrix = gtk_radio_button_new_with_mnemonic (NULL, QT_TR_NOOP("Flat matrix"));
-  gtk_widget_show (radiobuttonFlatmatrix);
-  gtk_table_attach (GTK_TABLE (table14), radiobuttonFlatmatrix, 0, 4, 0, 1,
-                    (GtkAttachOptions) (GTK_FILL),
-                    (GtkAttachOptions) (0), 0, 2);
-  gtk_radio_button_set_group (GTK_RADIO_BUTTON (radiobuttonFlatmatrix), radiobuttonCustommatrix_group);
-  radiobuttonCustommatrix_group = gtk_radio_button_get_group (GTK_RADIO_BUTTON (radiobuttonFlatmatrix));
-  gtk_toggle_button_set_active (GTK_TOGGLE_BUTTON (radiobuttonFlatmatrix), TRUE);
-
   buttonEditCustomMatrix = gtk_button_new_with_mnemonic (QT_TR_NOOP("Edit Custom Matrix"));
   gtk_widget_show (buttonEditCustomMatrix);
-  gtk_table_attach (GTK_TABLE (table14), buttonEditCustomMatrix, 3, 4, 2, 3,
-                    (GtkAttachOptions) (GTK_FILL),
-                    (GtkAttachOptions) (GTK_FILL), 5, 2);
+  gtk_box_pack_start (GTK_BOX (hbox14), buttonEditCustomMatrix, FALSE, FALSE, 0);
   gtk_tooltips_set_tip (tooltips, buttonEditCustomMatrix, QT_TR_NOOP("Edit loaded custom quantization matrix file"), NULL);
 
-  vseparator1 = gtk_vseparator_new ();
-  gtk_widget_show (vseparator1);
-  gtk_table_attach (GTK_TABLE (table14), vseparator1, 2, 3, 2, 3,
-                    (GtkAttachOptions) (GTK_EXPAND | GTK_FILL),
-                    (GtkAttachOptions) (GTK_FILL), 0, 0);
-
   labelFrameQuantizationMatrices = gtk_label_new (QT_TR_NOOP("<b>Quantization Matrices</b>"));
   gtk_widget_show (labelFrameQuantizationMatrices);
   gtk_frame_set_label_widget (GTK_FRAME (frame9), labelFrameQuantizationMatrices);
@@ -1656,7 +1707,7 @@
   gtk_widget_show (dialog_action_area1);
   gtk_button_box_set_layout (GTK_BUTTON_BOX (dialog_action_area1), GTK_BUTTONBOX_END);
 
-  buttonResetDaults = gtk_button_new_with_mnemonic (QT_TR_NOOP("Defaults"));
+  buttonResetDaults = gtk_button_new_with_mnemonic (QT_TR_NOOP("_Defaults"));
   gtk_widget_show (buttonResetDaults);
   gtk_dialog_add_action_widget (GTK_DIALOG (dialog1), buttonResetDaults, 0);
   GTK_WIDGET_SET_FLAGS (buttonResetDaults, GTK_CAN_DEFAULT);
@@ -1675,15 +1726,16 @@
   GLADE_HOOKUP_OBJECT_NO_REF (dialog1, dialog1, "dialog1");
   GLADE_HOOKUP_OBJECT_NO_REF (dialog1, dialog_vbox1, "dialog_vbox1");
   GLADE_HOOKUP_OBJECT (dialog1, notebook1, "notebook1");
+  GLADE_HOOKUP_OBJECT (dialog1, alignment14, "alignment14");
   GLADE_HOOKUP_OBJECT (dialog1, tableBitrate, "tableBitrate");
   GLADE_HOOKUP_OBJECT (dialog1, labelEncodingMode, "labelEncodingMode");
-  GLADE_HOOKUP_OBJECT (dialog1, entryTarget, "entryTarget");
   GLADE_HOOKUP_OBJECT (dialog1, labelQuantizer, "labelQuantizer");
+  GLADE_HOOKUP_OBJECT (dialog1, labelTarget, "labelTarget");
   GLADE_HOOKUP_OBJECT (dialog1, spinbuttonQuantizer, "spinbuttonQuantizer");
-  GLADE_HOOKUP_OBJECT (dialog1, hbuttonbox1, "hbuttonbox1");
-  GLADE_HOOKUP_OBJECT (dialog1, labelTarget, "labelTarget");
+  GLADE_HOOKUP_OBJECT (dialog1, entryTarget, "entryTarget");
   GLADE_HOOKUP_OBJECT (dialog1, comboboxMode, "comboboxMode");
   GLADE_HOOKUP_OBJECT (dialog1, labelPageBitrate, "labelPageBitrate");
+  GLADE_HOOKUP_OBJECT (dialog1, alignment15, "alignment15");
   GLADE_HOOKUP_OBJECT (dialog1, vbox5, "vbox5");
   GLADE_HOOKUP_OBJECT (dialog1, frame6, "frame6");
   GLADE_HOOKUP_OBJECT (dialog1, alignment6, "alignment6");
@@ -1694,10 +1746,10 @@
   GLADE_HOOKUP_OBJECT (dialog1, comboboxPartitionDecision, "comboboxPartitionDecision");
   GLADE_HOOKUP_OBJECT (dialog1, comboboxMethod, "comboboxMethod");
   GLADE_HOOKUP_OBJECT (dialog1, table11, "table11");
-  GLADE_HOOKUP_OBJECT (dialog1, spinbuttonMaxRefFrames, "spinbuttonMaxRefFrames");
   GLADE_HOOKUP_OBJECT (dialog1, labelMaxRefFrames, "labelMaxRefFrames");
   GLADE_HOOKUP_OBJECT (dialog1, labelRange, "labelRange");
   GLADE_HOOKUP_OBJECT (dialog1, spinbuttonRange, "spinbuttonRange");
+  GLADE_HOOKUP_OBJECT (dialog1, spinbuttonMaxRefFrames, "spinbuttonMaxRefFrames");
   GLADE_HOOKUP_OBJECT (dialog1, checkbuttonChromaME, "checkbuttonChromaME");
   GLADE_HOOKUP_OBJECT (dialog1, checkbuttonMixedRefs, "checkbuttonMixedRefs");
   GLADE_HOOKUP_OBJECT (dialog1, hbox8, "hbox8");
@@ -1715,13 +1767,16 @@
   GLADE_HOOKUP_OBJECT (dialog1, radiobuttonCustomAR, "radiobuttonCustomAR");
   GLADE_HOOKUP_OBJECT (dialog1, radiobuttonPredefinedAR, "radiobuttonPredefinedAR");
   GLADE_HOOKUP_OBJECT (dialog1, radiobuttonAsInputAR, "radiobuttonAsInputAR");
+  GLADE_HOOKUP_OBJECT (dialog1, label40, "label40");
   GLADE_HOOKUP_OBJECT (dialog1, comboboxentry1, "comboboxentry1");
   GLADE_HOOKUP_OBJECT (dialog1, label39, "label39");
   GLADE_HOOKUP_OBJECT (dialog1, frame7, "frame7");
   GLADE_HOOKUP_OBJECT (dialog1, alignment7, "alignment7");
   GLADE_HOOKUP_OBJECT (dialog1, vbox7, "vbox7");
+  GLADE_HOOKUP_OBJECT (dialog1, alignment21, "alignment21");
   GLADE_HOOKUP_OBJECT (dialog1, hbox2, "hbox2");
   GLADE_HOOKUP_OBJECT (dialog1, checkbuttonCABAC, "checkbuttonCABAC");
+  GLADE_HOOKUP_OBJECT (dialog1, hbox7, "hbox7");
   GLADE_HOOKUP_OBJECT (dialog1, labelTrellis, "labelTrellis");
   GLADE_HOOKUP_OBJECT (dialog1, spinbuttonTrellis, "spinbuttonTrellis");
   GLADE_HOOKUP_OBJECT (dialog1, hbox11, "hbox11");
@@ -1730,12 +1785,13 @@
   GLADE_HOOKUP_OBJECT (dialog1, hbox3, "hbox3");
   GLADE_HOOKUP_OBJECT (dialog1, checkbuttonDeblockingFilter, "checkbuttonDeblockingFilter");
   GLADE_HOOKUP_OBJECT (dialog1, table8, "table8");
-  GLADE_HOOKUP_OBJECT (dialog1, spinbuttonStrength, "spinbuttonStrength");
-  GLADE_HOOKUP_OBJECT (dialog1, spinbuttonThreshold, "spinbuttonThreshold");
   GLADE_HOOKUP_OBJECT (dialog1, labelThreshold, "labelThreshold");
   GLADE_HOOKUP_OBJECT (dialog1, labelStrength, "labelStrength");
+  GLADE_HOOKUP_OBJECT (dialog1, spinbuttonThreshold, "spinbuttonThreshold");
+  GLADE_HOOKUP_OBJECT (dialog1, spinbuttonStrength, "spinbuttonStrength");
   GLADE_HOOKUP_OBJECT (dialog1, label25, "label25");
   GLADE_HOOKUP_OBJECT (dialog1, labelPageMotion_More, "labelPageMotion_More");
+  GLADE_HOOKUP_OBJECT (dialog1, alignment16, "alignment16");
   GLADE_HOOKUP_OBJECT (dialog1, vbox2, "vbox2");
   GLADE_HOOKUP_OBJECT (dialog1, frame4, "frame4");
   GLADE_HOOKUP_OBJECT (dialog1, alignment4, "alignment4");
@@ -1752,9 +1808,10 @@
   GLADE_HOOKUP_OBJECT (dialog1, vbox4, "vbox4");
   GLADE_HOOKUP_OBJECT (dialog1, table5, "table5");
   GLADE_HOOKUP_OBJECT (dialog1, labelBias, "labelBias");
+  GLADE_HOOKUP_OBJECT (dialog1, labelMaxConsecutive, "labelMaxConsecutive");
   GLADE_HOOKUP_OBJECT (dialog1, spinbuttonBias, "spinbuttonBias");
   GLADE_HOOKUP_OBJECT (dialog1, spinbuttonMaxBFrame, "spinbuttonMaxBFrame");
-  GLADE_HOOKUP_OBJECT (dialog1, labelMaxConsecutive, "labelMaxConsecutive");
+  GLADE_HOOKUP_OBJECT (dialog1, alignment20, "alignment20");
   GLADE_HOOKUP_OBJECT (dialog1, table6, "table6");
   GLADE_HOOKUP_OBJECT (dialog1, checkbuttonBidirME, "checkbuttonBidirME");
   GLADE_HOOKUP_OBJECT (dialog1, checkbuttonWeighted, "checkbuttonWeighted");
@@ -1765,16 +1822,17 @@
   GLADE_HOOKUP_OBJECT (dialog1, comboboxDirectMode, "comboboxDirectMode");
   GLADE_HOOKUP_OBJECT (dialog1, label20, "label20");
   GLADE_HOOKUP_OBJECT (dialog1, labelPagePartion_Frame, "labelPagePartion_Frame");
+  GLADE_HOOKUP_OBJECT (dialog1, alignment17, "alignment17");
   GLADE_HOOKUP_OBJECT (dialog1, vbox1, "vbox1");
   GLADE_HOOKUP_OBJECT (dialog1, frame1, "frame1");
   GLADE_HOOKUP_OBJECT (dialog1, alignment1, "alignment1");
   GLADE_HOOKUP_OBJECT (dialog1, table2, "table2");
   GLADE_HOOKUP_OBJECT (dialog1, spinbuttonKeyframeBoost, "spinbuttonKeyframeBoost");
+  GLADE_HOOKUP_OBJECT (dialog1, spinbuttonBframeReduction, "spinbuttonBframeReduction");
+  GLADE_HOOKUP_OBJECT (dialog1, spinbuttonBitrateVariability, "spinbuttonBitrateVariability");
   GLADE_HOOKUP_OBJECT (dialog1, labelKeyframeboost, "labelKeyframeboost");
   GLADE_HOOKUP_OBJECT (dialog1, label11, "label11");
   GLADE_HOOKUP_OBJECT (dialog1, label12, "label12");
-  GLADE_HOOKUP_OBJECT (dialog1, spinbuttonBframeReduction, "spinbuttonBframeReduction");
-  GLADE_HOOKUP_OBJECT (dialog1, spinbuttonBitrateVariability, "spinbuttonBitrateVariability");
   GLADE_HOOKUP_OBJECT (dialog1, label7, "label7");
   GLADE_HOOKUP_OBJECT (dialog1, frame2, "frame2");
   GLADE_HOOKUP_OBJECT (dialog1, alignment2, "alignment2");
@@ -1789,8 +1847,8 @@
   GLADE_HOOKUP_OBJECT (dialog1, frame3, "frame3");
   GLADE_HOOKUP_OBJECT (dialog1, alignment3, "alignment3");
   GLADE_HOOKUP_OBJECT (dialog1, table4, "table4");
+  GLADE_HOOKUP_OBJECT (dialog1, spinbuttonSceneCut, "spinbuttonSceneCut");
   GLADE_HOOKUP_OBJECT (dialog1, label16, "label16");
-  GLADE_HOOKUP_OBJECT (dialog1, spinbuttonSceneCut, "spinbuttonSceneCut");
   GLADE_HOOKUP_OBJECT (dialog1, label17, "label17");
   GLADE_HOOKUP_OBJECT (dialog1, spinbuttonMinIdr, "spinbuttonMinIdr");
   GLADE_HOOKUP_OBJECT (dialog1, spinbuttonMaxIdr, "spinbuttonMaxIdr");
@@ -1807,12 +1865,13 @@
   GLADE_HOOKUP_OBJECT (dialog1, spinbuttonvbv_buffer_init, "spinbuttonvbv_buffer_init");
   GLADE_HOOKUP_OBJECT (dialog1, labelVideoBufferVerifier, "labelVideoBufferVerifier");
   GLADE_HOOKUP_OBJECT (dialog1, labelPageRateControl, "labelPageRateControl");
+  GLADE_HOOKUP_OBJECT (dialog1, alignment18, "alignment18");
   GLADE_HOOKUP_OBJECT (dialog1, vbox8, "vbox8");
   GLADE_HOOKUP_OBJECT (dialog1, frame10, "frame10");
   GLADE_HOOKUP_OBJECT (dialog1, alignment10, "alignment10");
   GLADE_HOOKUP_OBJECT (dialog1, table15, "table15");
+  GLADE_HOOKUP_OBJECT (dialog1, labelBitrateVariance, "labelBitrateVariance");
   GLADE_HOOKUP_OBJECT (dialog1, spinbuttonBitrateVariance, "spinbuttonBitrateVariance");
-  GLADE_HOOKUP_OBJECT (dialog1, labelBitrateVariance, "labelBitrateVariance");
   GLADE_HOOKUP_OBJECT (dialog1, spinbuttonQuantizerCompression, "spinbuttonQuantizerCompression");
   GLADE_HOOKUP_OBJECT (dialog1, spinbuttonTempBlurFrame, "spinbuttonTempBlurFrame");
   GLADE_HOOKUP_OBJECT (dialog1, spinbuttonTempBlurQuant, "spinbuttonTempBlurQuant");
@@ -1832,13 +1891,15 @@
   GLADE_HOOKUP_OBJECT (dialog1, labelQuantizers, "labelQuantizers");
   GLADE_HOOKUP_OBJECT (dialog1, frame9, "frame9");
   GLADE_HOOKUP_OBJECT (dialog1, alignment9, "alignment9");
-  GLADE_HOOKUP_OBJECT (dialog1, table14, "table14");
+  GLADE_HOOKUP_OBJECT (dialog1, vbox9, "vbox9");
+  GLADE_HOOKUP_OBJECT (dialog1, radiobuttonFlatmatrix, "radiobuttonFlatmatrix");
+  GLADE_HOOKUP_OBJECT (dialog1, radiobuttonJVTmatrix, "radiobuttonJVTmatrix");
+  GLADE_HOOKUP_OBJECT (dialog1, hbox13, "hbox13");
   GLADE_HOOKUP_OBJECT (dialog1, radiobuttonCustommatrix, "radiobuttonCustommatrix");
+  GLADE_HOOKUP_OBJECT (dialog1, hbox14, "hbox14");
   GLADE_HOOKUP_OBJECT (dialog1, filechooserbuttonOpenCQMFile, "filechooserbuttonOpenCQMFile");
-  GLADE_HOOKUP_OBJECT (dialog1, radiobuttonJVTmatrix, "radiobuttonJVTmatrix");
-  GLADE_HOOKUP_OBJECT (dialog1, radiobuttonFlatmatrix, "radiobuttonFlatmatrix");
+  GLADE_HOOKUP_OBJECT (dialog1, vseparator1, "vseparator1");
   GLADE_HOOKUP_OBJECT (dialog1, buttonEditCustomMatrix, "buttonEditCustomMatrix");
-  GLADE_HOOKUP_OBJECT (dialog1, vseparator1, "vseparator1");
   GLADE_HOOKUP_OBJECT (dialog1, labelFrameQuantizationMatrices, "labelFrameQuantizationMatrices");
   GLADE_HOOKUP_OBJECT (dialog1, labelMore, "labelMore");
   GLADE_HOOKUP_OBJECT_NO_REF (dialog1, dialog_action_area1, "dialog_action_area1");

Modified: branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/glade/project_x264.glade
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/glade/project_x264.glade	2008-01-29 20:12:26 UTC (rev 3782)
+++ branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/glade/project_x264.glade	2008-02-01 14:43:14 UTC (rev 3783)
@@ -1,2373 +1,3609 @@
-<?xml version="1.0" standalone="no"?> <!--*- mode: xml -*-->
-<!DOCTYPE glade-interface SYSTEM "http://glade.gnome.org/glade-2.0.dtd">
-
-<glade-interface>
-
-<widget class="GtkDialog" id="dialog1">
-  <property name="visible">True</property>
-  <property name="title" translatable="yes">X264 configuration</property>
-  <property name="type">GTK_WINDOW_TOPLEVEL</property>
-  <property name="window_position">GTK_WIN_POS_NONE</property>
-  <property name="modal">False</property>
-  <property name="resizable">True</property>
-  <property name="destroy_with_parent">False</property>
-  <property name="decorated">True</property>
-  <property name="skip_taskbar_hint">False</property>
-  <property name="skip_pager_hint">False</property>
-  <property name="type_hint">GDK_WINDOW_TYPE_HINT_DIALOG</property>
-  <property name="gravity">GDK_GRAVITY_NORTH_WEST</property>
-  <property name="focus_on_map">True</property>
-  <property name="urgency_hint">False</property>
-  <property name="has_separator">True</property>
-
-  <child internal-child="vbox">
-    <widget class="GtkVBox" id="dialog-vbox1">
-      <property name="visible">True</property>
-      <property name="homogeneous">False</property>
-      <property name="spacing">0</property>
-
-      <child internal-child="action_area">
-	<widget class="GtkHButtonBox" id="dialog-action_area1">
-	  <property name="visible">True</property>
-	  <property name="layout_style">GTK_BUTTONBOX_END</property>
-
-	  <child>
-	    <widget class="GtkButton" id="cancelbutton1">
-	      <property name="visible">True</property>
-	      <property name="can_default">True</property>
-	      <property name="can_focus">True</property>
-	      <property name="label">gtk-cancel</property>
-	      <property name="use_stock">True</property>
-	      <property name="relief">GTK_RELIEF_NORMAL</property>
-	      <property name="focus_on_click">True</property>
-	      <property name="response_id">-6</property>
-	    </widget>
-	  </child>
-
-	  <child>
-	    <widget class="GtkButton" id="okbutton1">
-	      <property name="visible">True</property>
-	      <property name="can_default">True</property>
-	      <property name="can_focus">True</property>
-	      <property name="label">gtk-ok</property>
-	      <property name="use_stock">True</property>
-	      <property name="relief">GTK_RELIEF_NORMAL</property>
-	      <property name="focus_on_click">True</property>
-	      <property name="response_id">-5</property>
-	    </widget>
-	  </child>
-	</widget>
-	<packing>
-	  <property name="padding">0</property>
-	  <property name="expand">False</property>
-	  <property name="fill">True</property>
-	  <property name="pack_type">GTK_PACK_END</property>
-	</packing>
-      </child>
-
-      <child>
-	<widget class="GtkNotebook" id="notebook1">
-	  <property name="visible">True</property>
-	  <property name="can_focus">True</property>
-	  <property name="show_tabs">True</property>
-	  <property name="show_border">True</property>
-	  <property name="tab_pos">GTK_POS_TOP</property>
-	  <property name="scrollable">False</property>
-	  <property name="enable_popup">False</property>
-
-	  <child>
-	    <widget class="GtkTable" id="tableBitrate">
-	      <property name="visible">True</property>
-	      <property name="n_rows">4</property>
-	      <property name="n_columns">2</property>
-	      <property name="homogeneous">False</property>
-	      <property name="row_spacing">2</property>
-	      <property name="column_spacing">0</property>
-
-	      <child>
-		<widget class="GtkLabel" id="labelEncodingMode">
-		  <property name="visible">True</property>
-		  <property name="label" translatable="yes">Encoding Mode:</property>
-		  <property name="use_underline">False</property>
-		  <property name="use_markup">False</property>
-		  <property name="justify">GTK_JUSTIFY_LEFT</property>
-		  <property name="wrap">False</property>
-		  <property name="selectable">False</property>
-		  <property name="xalign">0</property>
-		  <property name="yalign">0.5</property>
-		  <property name="xpad">0</property>
-		  <property name="ypad">0</property>
-		  <property name="ellipsize">PANGO_ELLIPSIZE_NONE</property>
-		  <property name="width_chars">-1</property>
-		  <property name="single_line_mode">False</property>
-		  <property name="angle">0</property>
-		</widget>
-		<packing>
-		  <property name="left_attach">0</property>
-		  <property name="right_attach">1</property>
-		  <property name="top_attach">0</property>
-		  <property name="bottom_attach">1</property>
-		  <property name="x_padding">5</property>
-		  <property name="y_padding">1</property>
-		  <property name="x_options">fill</property>
-		  <property name="y_options"></property>
-		</packing>
-	      </child>
-
-	      <child>
-		<widget class="GtkEntry" id="entryTarget">
-		  <property name="visible">True</property>
-		  <property name="tooltip" translatable="yes">Entry input for target file size or bitrate</property>
-		  <property name="can_focus">True</property>
-		  <property name="editable">True</property>
-		  <property name="visibility">True</property>
-		  <property name="max_length">0</property>
-		  <property name="text" translatable="yes"></property>
-		  <property name="has_frame">True</property>
-		  <property name="invisible_char">*</property>
-		  <property name="activates_default">False</property>
-		</widget>
-		<packing>
-		  <property name="left_attach">1</property>
-		  <property name="right_attach">2</property>
-		  <property name="top_attach">1</property>
-		  <property name="bottom_attach">2</property>
-		  <property name="x_padding">2</property>
-		  <property name="y_options"></property>
-		</packing>
-	      </child>
-
-	      <child>
-		<widget class="GtkLabel" id="labelQuantizer">
-		  <property name="visible">True</property>
-		  <property name="label" translatable="yes">Quantizer (0-51):</property>
-		  <property name="use_underline">False</property>
-		  <property name="use_markup">False</property>
-		  <property name="justify">GTK_JUSTIFY_LEFT</property>
-		  <property name="wrap">False</property>
-		  <property name="selectable">False</property>
-		  <property name="xalign">0</property>
-		  <property name="yalign">0.5</property>
-		  <property name="xpad">0</property>
-		  <property name="ypad">0</property>
-		  <property name="ellipsize">PANGO_ELLIPSIZE_NONE</property>
-		  <property name="width_chars">-1</property>
-		  <property name="single_line_mode">False</property>
-		  <property name="angle">0</property>
-		</widget>
-		<packing>
-		  <property name="left_attach">0</property>
-		  <property name="right_attach">1</property>
-		  <property name="top_attach">2</property>
-		  <property name="bottom_attach">3</property>
-		  <property name="x_padding">5</property>
-		  <property name="y_padding">1</property>
-		  <property name="x_options">fill</property>
-		  <property name="y_options"></property>
-		</packing>
-	      </child>
-
-	      <child>
-		<widget class="GtkSpinButton" id="spinbuttonQuantizer">
-		  <property name="visible">True</property>
-		  <property name="tooltip" translatable="yes">Constant Quantizer - Each frame will the same compression. Low numbers equal higher quality while high numbers equal lower quality</property>
-		  <property name="can_focus">True</property>
-		  <property name="climb_rate">1</property>
-		  <property name="digits">0</property>
-		  <property name="numeric">True</property>
-		  <property name="update_policy">GTK_UPDATE_ALWAYS</property>
-		  <property name="snap_to_ticks">False</property>
-		  <property name="wrap">False</property>
-		  <property name="adjustment">4 0 51 1 10 10</property>
-		</widget>
-		<packing>
-		  <property name="left_attach">1</property>
-		  <property name="right_attach">2</property>
-		  <property name="top_attach">2</property>
-		  <property name="bottom_attach">3</property>
-		  <property name="x_padding">1</property>
-		  <property name="y_options"></property>
-		</packing>
-	      </child>
-
-	      <child>
-		<widget class="GtkHButtonBox" id="hbuttonbox1">
-		  <property name="visible">True</property>
-		  <property name="layout_style">GTK_BUTTONBOX_SPREAD</property>
-		  <property name="spacing">0</property>
-
-		  <child>
-		    <widget class="GtkButton" id="buttonLoadDefaults">
-		      <property name="visible">True</property>
-		      <property name="tooltip" translatable="yes">Load the stored default settings for the codec</property>
-		      <property name="can_default">True</property>
-		      <property name="can_focus">True</property>
-		      <property name="label" translatable="yes">Load Defaults</property>
-		      <property name="use_underline">True</property>
-		      <property name="relief">GTK_RELIEF_NORMAL</property>
-		      <property name="focus_on_click">True</property>
-		    </widget>
-		  </child>
-
-		  <child>
-		    <widget class="GtkButton" id="buttonSaveDefaults">
-		      <property name="visible">True</property>
-		      <property name="tooltip" translatable="yes">Save the current codec configuration as the stored default settings</property>
-		      <property name="can_default">True</property>
-		      <property name="can_focus">True</property>
-		      <property name="label" translatable="yes">Save Defaults</property>
-		      <property name="use_underline">True</property>
-		      <property name="relief">GTK_RELIEF_NORMAL</property>
-		      <property name="focus_on_click">True</property>
-		    </widget>
-		  </child>
-
-		  <child>
-		    <widget class="GtkButton" id="buttonResetDefaults">
-		      <property name="visible">True</property>
-		      <property name="tooltip" translatable="yes">Reload the initial default codec settings</property>
-		      <property name="can_default">True</property>
-		      <property name="can_focus">True</property>
-		      <property name="label" translatable="yes">Reset Defaults</property>
-		      <property name="use_underline">True</property>
-		      <property name="relief">GTK_RELIEF_NORMAL</property>
-		      <property name="focus_on_click">True</property>
-		    </widget>
-		  </child>
-		</widget>
-		<packing>
-		  <property name="left_attach">0</property>
-		  <property name="right_attach">2</property>
-		  <property name="top_attach">3</property>
-		  <property name="bottom_attach">4</property>
-		  <property name="x_padding">40</property>
-		  <property name="y_padding">65</property>
-		  <property name="x_options">fill</property>
-		</packing>
-	      </child>
-
-	      <child>
-		<widget class="GtkLabel" id="labelTarget">
-		  <property name="visible">True</property>
-		  <property name="label" translatable="yes">Target Size:</property>
-		  <property name="use_underline">False</property>
-		  <property name="use_markup">False</property>
-		  <property name="justify">GTK_JUSTIFY_LEFT</property>
-		  <property name="wrap">False</property>
-		  <property name="selectable">False</property>
-		  <property name="xalign">0</property>
-		  <property name="yalign">0.5</property>
-		  <property name="xpad">0</property>
-		  <property name="ypad">0</property>
-		  <property name="ellipsize">PANGO_ELLIPSIZE_NONE</property>
-		  <property name="width_chars">-1</property>
-		  <property name="single_line_mode">False</property>
-		  <property name="angle">0</property>
-		</widget>
-		<packing>
-		  <property name="left_attach">0</property>
-		  <property name="right_attach">1</property>
-		  <property name="top_attach">1</property>
-		  <property name="bottom_attach">2</property>
-		  <property name="x_padding">5</property>
-		  <property name="x_options">fill</property>
-		  <property name="y_options"></property>
-		</packing>
-	      </child>
-
-	      <child>
-		<widget class="GtkComboBox" id="comboboxMode">
-		  <property name="visible">True</property>
-		  <property name="items" translatable="yes">Single Pass - Quality Quantizer (Constant)
-Single Pass - Bitrate (Average)
-Two Pass - File Size
-Two Pass - Average bitrate</property>
-		  <property name="add_tearoffs">False</property>
-		  <property name="focus_on_click">True</property>
-		</widget>
-		<packing>
-		  <property name="left_attach">1</property>
-		  <property name="right_attach">2</property>
-		  <property name="top_attach">0</property>
-		  <property name="bottom_attach">1</property>
-		  <property name="y_options">fill</property>
-		</packing>
-	      </child>
-	    </widget>
-	    <packing>
-	      <property name="tab_expand">False</property>
-	      <property name="tab_fill">True</property>
-	    </packing>
-	  </child>
-
-	  <child>
-	    <widget class="GtkLabel" id="labelPageBitrate">
-	      <property name="visible">True</property>
-	      <property name="label" translatable="yes">Bitrate</property>
-	      <property name="use_underline">False</property>
-	      <property name="use_markup">False</property>
-	      <property name="justify">GTK_JUSTIFY_LEFT</property>
-	      <property name="wrap">False</property>
-	      <property name="selectable">False</property>
-	      <property name="xalign">0</property>
-	      <property name="yalign">0.5</property>
-	      <property name="xpad">0</property>
-	      <property name="ypad">0</property>
-	      <property name="ellipsize">PANGO_ELLIPSIZE_NONE</property>
-	      <property name="width_chars">-1</property>
-	      <property name="single_line_mode">False</property>
-	      <property name="angle">0</property>
-	    </widget>
-	    <packing>
-	      <property name="type">tab</property>
-	    </packing>
-	  </child>
-
-	  <child>
-	    <widget class="GtkVBox" id="vbox5">
-	      <property name="visible">True</property>
-	      <property name="homogeneous">False</property>
-	      <property name="spacing">0</property>
-
-	      <child>
-		<widget class="GtkFrame" id="frame6">
-		  <property name="visible">True</property>
-		  <property name="label_xalign">0</property>
-		  <property name="label_yalign">0.5</property>
-		  <property name="shadow_type">GTK_SHADOW_ETCHED_IN</property>
-
-		  <child>
-		    <widget class="GtkAlignment" id="alignment6">
-		      <property name="visible">True</property>
-		      <property name="xalign">0.5</property>
-		      <property name="yalign">0.5</property>
-		      <property name="xscale">1</property>
-		      <property name="yscale">1</property>
-		      <property name="top_padding">0</property>
-		      <property name="bottom_padding">0</property>
-		      <property name="left_padding">12</property>
-		      <property name="right_padding">0</property>
-
-		      <child>
-			<widget class="GtkVBox" id="vbox6">
-			  <property name="visible">True</property>
-			  <property name="homogeneous">False</property>
-			  <property name="spacing">0</property>
-
-			  <child>
-			    <widget class="GtkTable" id="table7">
-			      <property name="visible">True</property>
-			      <property name="n_rows">2</property>
-			      <property name="n_columns">3</property>
-			      <property name="homogeneous">False</property>
-			      <property name="row_spacing">0</property>
-			      <property name="column_spacing">0</property>
-
-			      <child>
-				<widget class="GtkLabel" id="labelPartitionDecision">
-				  <property name="visible">True</property>
-				  <property name="label" translatable="yes">Partition decision</property>
-				  <property name="use_underline">False</property>
-				  <property name="use_markup">False</property>
-				  <property name="justify">GTK_JUSTIFY_LEFT</property>
-				  <property name="wrap">False</property>
-				  <property name="selectable">False</property>
-				  <property name="xalign">0</property>
-				  <property name="yalign">0.5</property>
-				  <property name="xpad">0</property>
-				  <property name="ypad">0</property>
-				  <property name="ellipsize">PANGO_ELLIPSIZE_NONE</property>
-				  <property name="width_chars">-1</property>
-				  <property name="single_line_mode">False</property>
-				  <property name="angle">0</property>
-				</widget>
-				<packing>
-				  <property name="left_attach">0</property>
-				  <property name="right_attach">1</property>
-				  <property name="top_attach">0</property>
-				  <property name="bottom_attach">1</property>
-				  <property name="x_padding">5</property>
-				  <property name="y_padding">1</property>
-				  <property name="x_options">fill</property>
-				  <property name="y_options"></property>
-				</packing>
-			      </child>
-
-			      <child>
-				<widget class="GtkLabel" id="labelMethod">
-				  <property name="visible">True</property>
-				  <property name="label" translatable="yes">Method</property>
-				  <property name="use_underline">False</property>
-				  <property name="use_markup">False</property>
-				  <property name="justify">GTK_JUSTIFY_LEFT</property>
-				  <property name="wrap">False</property>
-				  <property name="selectable">False</property>
-				  <property name="xalign">0</property>
-				  <property name="yalign">0.5</property>
-				  <property name="xpad">0</property>
-				  <property name="ypad">0</property>
-				  <property name="ellipsize">PANGO_ELLIPSIZE_NONE</property>
-				  <property name="width_chars">-1</property>
-				  <property name="single_line_mode">False</property>
-				  <property name="angle">0</property>
-				</widget>
-				<packing>
-				  <property name="left_attach">0</property>
-				  <property name="right_attach">1</property>
-				  <property name="top_attach">1</property>
-				  <property name="bottom_attach">2</property>
-				  <property name="x_padding">5</property>
-				  <property name="y_padding">1</property>
-				  <property name="x_options">fill</property>
-				  <property name="y_options"></property>
-				</packing>
-			      </child>
-
-			      <child>
-				<widget class="GtkComboBox" id="comboboxPartitionDecision">
-				  <property name="visible">True</property>
-				  <property name="items" translatable="yes">1  - Extremely Low (Fastest)
-2  - Very Low
-3  - Low
-4  - Medium
-5  - High (Default)
-6  - Very High
-6B - Very High (RDO on Bframes)
-7 - Ultra High
-7B - Ultra High (RDO on Bframes)
-</property>
-				  <property name="add_tearoffs">False</property>
-				  <property name="focus_on_click">True</property>
-				</widget>
-				<packing>
-				  <property name="left_attach">1</property>
-				  <property name="right_attach">3</property>
-				  <property name="top_attach">0</property>
-				  <property name="bottom_attach">1</property>
-				  <property name="x_padding">1</property>
-				  <property name="x_options">shrink|fill</property>
-				  <property name="y_options">shrink|fill</property>
-				</packing>
-			      </child>
-
-			      <child>
-				<widget class="GtkComboBox" id="comboboxMethod">
-				  <property name="visible">True</property>
-				  <property name="items" translatable="yes">Diamond search
-Hexagonal search
-Uneven multi hexagon
-Exhaustive search</property>
-				  <property name="add_tearoffs">False</property>
-				  <property name="focus_on_click">True</property>
-				</widget>
-				<packing>
-				  <property name="left_attach">1</property>
-				  <property name="right_attach">3</property>
-				  <property name="top_attach">1</property>
-				  <property name="bottom_attach">2</property>
-				  <property name="x_padding">1</property>
-				  <property name="x_options">fill</property>
-				  <property name="y_options">fill</property>
-				</packing>
-			      </child>
-			    </widget>
-			    <packing>
-			      <property name="padding">0</property>
-			      <property name="expand">False</property>
-			      <property name="fill">True</property>
-			    </packing>
-			  </child>
-
-			  <child>
-			    <widget class="GtkTable" id="table11">
-			      <property name="visible">True</property>
-			      <property name="n_rows">2</property>
-			      <property name="n_columns">3</property>
-			      <property name="homogeneous">False</property>
-			      <property name="row_spacing">0</property>
-			      <property name="column_spacing">0</property>
-
-			      <child>
-				<widget class="GtkSpinButton" id="spinbuttonMaxRefFrames">
-				  <property name="visible">True</property>
-				  <property name="tooltip" translatable="yes">Set how many previous frames can be referenced by a P/B-frame. Numbers above 5 do not seem to improve quality greatly. Numbers are 3 to 5 are recommended</property>
-				  <property name="can_focus">True</property>
-				  <property name="climb_rate">1</property>
-				  <property name="digits">0</property>
-				  <property name="numeric">True</property>
-				  <property name="update_policy">GTK_UPDATE_ALWAYS</property>
-				  <property name="snap_to_ticks">False</property>
-				  <property name="wrap">False</property>
-				  <property name="adjustment">1 0 16 1 10 10</property>
-				</widget>
-				<packing>
-				  <property name="left_attach">1</property>
-				  <property name="right_attach">2</property>
-				  <property name="top_attach">1</property>
-				  <property name="bottom_attach">2</property>
-				  <property name="y_options"></property>
-				</packing>
-			      </child>
-
-			      <child>
-				<widget class="GtkLabel" id="labelMaxRefFrames">
-				  <property name="visible">True</property>
-				  <property name="label" translatable="yes">Max. Ref. frames</property>
-				  <property name="use_underline">False</property>
-				  <property name="use_markup">False</property>
-				  <property name="justify">GTK_JUSTIFY_LEFT</property>
-				  <property name="wrap">False</property>
-				  <property name="selectable">False</property>
-				  <property name="xalign">0</property>
-				  <property name="yalign">0.5</property>
-				  <property name="xpad">0</property>
-				  <property name="ypad">0</property>
-				  <property name="ellipsize">PANGO_ELLIPSIZE_NONE</property>
-				  <property name="width_chars">-1</property>
-				  <property name="single_line_mode">False</property>
-				  <property name="angle">0</property>
-				</widget>
-				<packing>
-				  <property name="left_attach">0</property>
-				  <property name="right_attach">1</property>
-				  <property name="top_attach">1</property>
-				  <property name="bottom_attach">2</property>
-				  <property name="x_padding">7</property>
-				  <property name="x_options">fill</property>
-				  <property name="y_options"></property>
-				</packing>
-			      </child>
-
-			      <child>
-				<widget class="GtkLabel" id="labelRange">
-				  <property name="visible">True</property>
-				  <property name="label" translatable="yes">Range</property>
-				  <property name="use_underline">False</property>
-				  <property name="use_markup">False</property>
-				  <property name="justify">GTK_JUSTIFY_LEFT</property>
-				  <property name="wrap">False</property>
-				  <property name="selectable">False</property>
-				  <property name="xalign">0</property>
-				  <property name="yalign">0.5</property>
-				  <property name="xpad">0</property>
-				  <property name="ypad">0</property>
-				  <property name="ellipsize">PANGO_ELLIPSIZE_NONE</property>
-				  <property name="width_chars">-1</property>
-				  <property name="single_line_mode">False</property>
-				  <property name="angle">0</property>
-				</widget>
-				<packing>
-				  <property name="left_attach">0</property>
-				  <property name="right_attach">1</property>
-				  <property name="top_attach">0</property>
-				  <property name="bottom_attach">1</property>
-				  <property name="x_padding">7</property>
-				  <property name="x_options">fill</property>
-				  <property name="y_options"></property>
-				</packing>
-			      </child>
-
-			      <child>
-				<widget class="GtkCheckButton" id="checkbuttonChromaME">
-				  <property name="visible">True</property>
-				  <property name="tooltip" translatable="yes">Uses chroma (color) components for motion for compression and helps the quality</property>
-				  <property name="can_focus">True</property>
-				  <property name="label" translatable="yes">Chroma ME</property>
-				  <property name="use_underline">True</property>
-				  <property name="relief">GTK_RELIEF_NORMAL</property>
-				  <property name="focus_on_click">True</property>
-				  <property name="active">True</property>
-				  <property name="inconsistent">False</property>
-				  <property name="draw_indicator">True</property>
-				</widget>
-				<packing>
-				  <property name="left_attach">2</property>
-				  <property name="right_attach">3</property>
-				  <property name="top_attach">0</property>
-				  <property name="bottom_attach">1</property>
-				  <property name="x_padding">15</property>
-				  <property name="x_options">fill</property>
-				  <property name="y_options"></property>
-				</packing>
-			      </child>
-
-			      <child>
-				<widget class="GtkCheckButton" id="checkbuttonMixedRefs">
-				  <property name="visible">True</property>
-				  <property name="tooltip" translatable="yes">Calculate referencing individually based on each partition</property>
-				  <property name="can_focus">True</property>
-				  <property name="label" translatable="yes">Mixed Refs</property>
-				  <property name="use_underline">True</property>
-				  <property name="relief">GTK_RELIEF_NORMAL</property>
-				  <property name="focus_on_click">True</property>
-				  <property name="active">False</property>
-				  <property name="inconsistent">False</property>
-				  <property name="draw_indicator">True</property>
-				</widget>
-				<packing>
-				  <property name="left_attach">2</property>
-				  <property name="right_attach">3</property>
-				  <property name="top_attach">1</property>
-				  <property name="bottom_attach">2</property>
-				  <property name="x_padding">15</property>
-				  <property name="x_options">fill</property>
-				  <property name="y_options"></property>
-				</packing>
-			      </child>
-
-			      <child>
-				<widget class="GtkSpinButton" id="spinbuttonRange">
-				  <property name="visible">True</property>
-				  <property name="tooltip" translatable="yes">Define how many pixels are analysised. The higher the range the more accurate the analysis but the slower the encoding time</property>
-				  <property name="can_focus">True</property>
-				  <property name="climb_rate">1</property>
-				  <property name="digits">0</property>
-				  <property name="numeric">False</property>
-				  <property name="update_policy">GTK_UPDATE_ALWAYS</property>
-				  <property name="snap_to_ticks">False</property>
-				  <property name="wrap">False</property>
-				  <property name="adjustment">16 0 64 1 10 10</property>
-				</widget>
-				<packing>
-				  <property name="left_attach">1</property>
-				  <property name="right_attach">2</property>
-				  <property name="top_attach">0</property>
-				  <property name="bottom_attach">1</property>
-				  <property name="y_options"></property>
-				</packing>
-			      </child>
-			    </widget>
-			    <packing>
-			      <property name="padding">0</property>
-			      <property name="expand">True</property>
-			      <property name="fill">False</property>
-			    </packing>
-			  </child>
-			</widget>
-		      </child>
-		    </widget>
-		  </child>
-
-		  <child>
-		    <widget class="GtkLabel" id="label24">
-		      <property name="visible">True</property>
-		      <property name="label" translatable="yes">&lt;b&gt;Motion Estimation&lt;/b&gt;</property>
-		      <property name="use_underline">False</property>
-		      <property name="use_markup">True</property>
-		      <property name="justify">GTK_JUSTIFY_LEFT</property>
-		      <property name="wrap">False</property>
-		      <property name="selectable">False</property>
-		      <property name="xalign">0.5</property>
-		      <property name="yalign">0.5</property>
-		      <property name="xpad">0</property>
-		      <property name="ypad">0</property>
-		      <property name="ellipsize">PANGO_ELLIPSIZE_NONE</property>
-		      <property name="width_chars">-1</property>
-		      <property name="single_line_mode">False</property>
-		      <property name="angle">0</property>
-		    </widget>
-		    <packing>
-		      <property name="type">label_item</property>
-		    </packing>
-		  </child>
-		</widget>
-		<packing>
-		  <property name="padding">0</property>
-		  <property name="expand">True</property>
-		  <property name="fill">True</property>
-		</packing>
-	      </child>
-
-	      <child>
-		<widget class="GtkFrame" id="frame7">
-		  <property name="visible">True</property>
-		  <property name="label_xalign">0</property>
-		  <property name="label_yalign">0.5</property>
-		  <property name="shadow_type">GTK_SHADOW_ETCHED_IN</property>
-
-		  <child>
-		    <widget class="GtkAlignment" id="alignment7">
-		      <property name="visible">True</property>
-		      <property name="xalign">0.5</property>
-		      <property name="yalign">0.5</property>
-		      <property name="xscale">1</property>
-		      <property name="yscale">1</property>
-		      <property name="top_padding">0</property>
-		      <property name="bottom_padding">0</property>
-		      <property name="left_padding">12</property>
-		      <property name="right_padding">0</property>
-
-		      <child>
-			<widget class="GtkVBox" id="vbox7">
-			  <property name="visible">True</property>
-			  <property name="homogeneous">False</property>
-			  <property name="spacing">0</property>
-
-			  <child>
-			    <widget class="GtkHBox" id="hbox2">
-			      <property name="visible">True</property>
-			      <property name="homogeneous">False</property>
-			      <property name="spacing">0</property>
-
-			      <child>
-				<widget class="GtkLabel" id="labelSampleAR">
-				  <property name="visible">True</property>
-				  <property name="label" translatable="yes">Sample A/R </property>
-				  <property name="use_underline">False</property>
-				  <property name="use_markup">False</property>
-				  <property name="justify">GTK_JUSTIFY_LEFT</property>
-				  <property name="wrap">False</property>
-				  <property name="selectable">False</property>
-				  <property name="xalign">0.5</property>
-				  <property name="yalign">0.5</property>
-				  <property name="xpad">0</property>
-				  <property name="ypad">0</property>
-				  <property name="ellipsize">PANGO_ELLIPSIZE_NONE</property>
-				  <property name="width_chars">-1</property>
-				  <property name="single_line_mode">False</property>
-				  <property name="angle">0</property>
-				</widget>
-				<packing>
-				  <property name="padding">0</property>
-				  <property name="expand">False</property>
-				  <property name="fill">False</property>
-				</packing>
-			      </child>
-
-			      <child>
-				<widget class="GtkEntry" id="entryAR_Num">
-				  <property name="visible">True</property>
-				  <property name="tooltip" translatable="yes">Enforce the size of a decoded pixel decoded to a certain value. Leave this at 1:1 for non-anamorphic video</property>
-				  <property name="can_focus">True</property>
-				  <property name="editable">True</property>
-				  <property name="visibility">True</property>
-				  <property name="max_length">0</property>
-				  <property name="text" translatable="yes">1</property>
-				  <property name="has_frame">True</property>
-				  <property name="invisible_char">*</property>
-				  <property name="activates_default">False</property>
-				</widget>
-				<packing>
-				  <property name="padding">0</property>
-				  <property name="expand">True</property>
-				  <property name="fill">True</property>
-				</packing>
-			      </child>
-
-			      <child>
-				<widget class="GtkLabel" id="label38">
-				  <property name="visible">True</property>
-				  <property name="label" translatable="yes">:</property>
-				  <property name="use_underline">False</property>
-				  <property name="use_markup">False</property>
-				  <property name="justify">GTK_JUSTIFY_CENTER</property>
-				  <property name="wrap">False</property>
-				  <property name="selectable">False</property>
-				  <property name="xalign">0.5</property>
-				  <property name="yalign">0.5</property>
-				  <property name="xpad">0</property>
-				  <property name="ypad">0</property>
-				  <property name="ellipsize">PANGO_ELLIPSIZE_NONE</property>
-				  <property name="width_chars">-1</property>
-				  <property name="single_line_mode">False</property>
-				  <property name="angle">0</property>
-				</widget>
-				<packing>
-				  <property name="padding">2</property>
-				  <property name="expand">False</property>
-				  <property name="fill">False</property>
-				</packing>
-			      </child>
-
-			      <child>
-				<widget class="GtkEntry" id="entryAR_Den">
-				  <property name="visible">True</property>
-				  <property name="tooltip" translatable="yes">Enforce the size of a decoded pixel decoded to a certain value. Leave this at 1:1 for non-anamorphic video</property>
-				  <property name="can_focus">True</property>
-				  <property name="editable">True</property>
-				  <property name="visibility">True</property>
-				  <property name="max_length">0</property>
-				  <property name="text" translatable="yes">1</property>
-				  <property name="has_frame">True</property>
-				  <property name="invisible_char">*</property>
-				  <property name="activates_default">False</property>
-				</widget>
-				<packing>
-				  <property name="padding">0</property>
-				  <property name="expand">True</property>
-				  <property name="fill">True</property>
-				</packing>
-			      </child>
-			    </widget>
-			    <packing>
-			      <property name="padding">0</property>
-			      <property name="expand">True</property>
-			      <property name="fill">True</property>
-			    </packing>
-			  </child>
-
-			  <child>
-			    <widget class="GtkHBox" id="hbox3">
-			      <property name="visible">True</property>
-			      <property name="homogeneous">False</property>
-			      <property name="spacing">0</property>
-
-			      <child>
-				<widget class="GtkCheckButton" id="checkbuttonDeblockingFilter">
-				  <property name="visible">True</property>
-				  <property name="tooltip" translatable="yes">Enable in-loop deblocking to filter the video</property>
-				  <property name="can_focus">True</property>
-				  <property name="label" translatable="yes">Deblocking Filter :</property>
-				  <property name="use_underline">True</property>
-				  <property name="relief">GTK_RELIEF_NORMAL</property>
-				  <property name="focus_on_click">True</property>
-				  <property name="active">True</property>
-				  <property name="inconsistent">False</property>
-				  <property name="draw_indicator">True</property>
-				</widget>
-				<packing>
-				  <property name="padding">0</property>
-				  <property name="expand">False</property>
-				  <property name="fill">False</property>
-				</packing>
-			      </child>
-
-			      <child>
-				<widget class="GtkTable" id="table8">
-				  <property name="visible">True</property>
-				  <property name="n_rows">2</property>
-				  <property name="n_columns">2</property>
-				  <property name="homogeneous">False</property>
-				  <property name="row_spacing">0</property>
-				  <property name="column_spacing">0</property>
-
-				  <child>
-				    <widget class="GtkSpinButton" id="spinbuttonStrength">
-				      <property name="visible">True</property>
-				      <property name="tooltip" translatable="yes">Set the amount of blurring to use for block edges when they are found</property>
-				      <property name="can_focus">True</property>
-				      <property name="climb_rate">1</property>
-				      <property name="digits">0</property>
-				      <property name="numeric">True</property>
-				      <property name="update_policy">GTK_UPDATE_ALWAYS</property>
-				      <property name="snap_to_ticks">False</property>
-				      <property name="wrap">False</property>
-				      <property name="adjustment">0 -6 6 1 10 10</property>
-				    </widget>
-				    <packing>
-				      <property name="left_attach">1</property>
-				      <property name="right_attach">2</property>
-				      <property name="top_attach">0</property>
-				      <property name="bottom_attach">1</property>
-				      <property name="y_options"></property>
-				    </packing>
-				  </child>
-
-				  <child>
-				    <widget class="GtkSpinButton" id="spinbuttonThreshold">
-				      <property name="visible">True</property>
-				      <property name="tooltip" translatable="yes">Define the level for when deblocking is applied</property>
-				      <property name="can_focus">True</property>
-				      <property name="climb_rate">1</property>
-				      <property name="digits">0</property>
-				      <property name="numeric">True</property>
-				      <property name="update_policy">GTK_UPDATE_ALWAYS</property>
-				      <property name="snap_to_ticks">False</property>
-				      <property name="wrap">False</property>
-				      <property name="adjustment">0 -6 6 1 10 10</property>
-				    </widget>
-				    <packing>
-				      <property name="left_attach">1</property>
-				      <property name="right_attach">2</property>
-				      <property name="top_attach">1</property>
-				      <property name="bottom_attach">2</property>
-				      <property name="y_options"></property>
-				    </packing>
-				  </child>
-
-				  <child>
-				    <widget class="GtkLabel" id="labelThreshold">
-				      <property name="visible">True</property>
-				      <property name="label" translatable="yes">&lt;i&gt;Threshold&lt;/i&gt;</property>
-				      <property name="use_underline">False</property>
-				      <property name="use_markup">True</property>
-				      <property name="justify">GTK_JUSTIFY_LEFT</property>
-				      <property name="wrap">False</property>
-				      <property name="selectable">False</property>
-				      <property name="xalign">0</property>
-				      <property name="yalign">0.5</property>
-				      <property name="xpad">0</property>
-				      <property name="ypad">0</property>
-				      <property name="ellipsize">PANGO_ELLIPSIZE_NONE</property>
-				      <property name="width_chars">-1</property>
-				      <property name="single_line_mode">False</property>
-				      <property name="angle">0</property>
-				    </widget>
-				    <packing>
-				      <property name="left_attach">0</property>
-				      <property name="right_attach">1</property>
-				      <property name="top_attach">1</property>
-				      <property name="bottom_attach">2</property>
-				      <property name="x_padding">5</property>
-				      <property name="x_options">fill</property>
-				      <property name="y_options"></property>
-				    </packing>
-				  </child>
-
-				  <child>
-				    <widget class="GtkLabel" id="labelStrength">
-				      <property name="visible">True</property>
-				      <property name="label" translatable="yes">&lt;i&gt;Strength&lt;/i&gt;</property>
-				      <property name="use_underline">False</property>
-				      <property name="use_markup">True</property>
-				      <property name="justify">GTK_JUSTIFY_LEFT</property>
-				      <property name="wrap">False</property>
-				      <property name="selectable">False</property>
-				      <property name="xalign">0</property>
-				      <property name="yalign">0.5</property>
-				      <property name="xpad">0</property>
-				      <property name="ypad">0</property>
-				      <property name="ellipsize">PANGO_ELLIPSIZE_NONE</property>
-				      <property name="width_chars">-1</property>
-				      <property name="single_line_mode">False</property>
-				      <property name="angle">0</property>
-				    </widget>
-				    <packing>
-				      <property name="left_attach">0</property>
-				      <property name="right_attach">1</property>
-				      <property name="top_attach">0</property>
-				      <property name="bottom_attach">1</property>
-				      <property name="x_padding">5</property>
-				      <property name="x_options">fill</property>
-				      <property name="y_options"></property>
-				    </packing>
-				  </child>
-				</widget>
-				<packing>
-				  <property name="padding">0</property>
-				  <property name="expand">True</property>
-				  <property name="fill">True</property>
-				</packing>
-			      </child>
-			    </widget>
-			    <packing>
-			      <property name="padding">0</property>
-			      <property name="expand">True</property>
-			      <property name="fill">True</property>
-			    </packing>
-			  </child>
-
-			  <child>
-			    <widget class="GtkHBox" id="hbox4">
-			      <property name="visible">True</property>
-			      <property name="homogeneous">False</property>
-			      <property name="spacing">0</property>
-
-			      <child>
-				<widget class="GtkCheckButton" id="checkbuttonCABAC">
-				  <property name="visible">True</property>
-				  <property name="tooltip" translatable="yes">Lossless compression method which usually improves the bitrate usage by 15% (especially on high bitrate). Helps the quality a lot but is slower. </property>
-				  <property name="can_focus">True</property>
-				  <property name="label" translatable="yes">CABAC</property>
-				  <property name="use_underline">True</property>
-				  <property name="relief">GTK_RELIEF_NORMAL</property>
-				  <property name="focus_on_click">True</property>
-				  <property name="active">True</property>
-				  <property name="inconsistent">False</property>
-				  <property name="draw_indicator">True</property>
-				</widget>
-				<packing>
-				  <property name="padding">4</property>
-				  <property name="expand">False</property>
-				  <property name="fill">False</property>
-				</packing>
-			      </child>
-
-			      <child>
-				<widget class="GtkLabel" id="labelTrellis">
-				  <property name="visible">True</property>
-				  <property name="label" translatable="yes">Trellis</property>
-				  <property name="use_underline">False</property>
-				  <property name="use_markup">False</property>
-				  <property name="justify">GTK_JUSTIFY_LEFT</property>
-				  <property name="wrap">False</property>
-				  <property name="selectable">False</property>
-				  <property name="xalign">1</property>
-				  <property name="yalign">0.5</property>
-				  <property name="xpad">0</property>
-				  <property name="ypad">0</property>
-				  <property name="ellipsize">PANGO_ELLIPSIZE_NONE</property>
-				  <property name="width_chars">-1</property>
-				  <property name="single_line_mode">False</property>
-				  <property name="angle">0</property>
-				</widget>
-				<packing>
-				  <property name="padding">4</property>
-				  <property name="expand">True</property>
-				  <property name="fill">True</property>
-				</packing>
-			      </child>
-
-			      <child>
-				<widget class="GtkSpinButton" id="spinbuttonTrellis">
-				  <property name="visible">True</property>
-				  <property name="tooltip" translatable="yes">Use rate distortion quantization to find optimal encoding for each block. Level 0 equals disabled, level 1 equals normal and level 2 equals high</property>
-				  <property name="can_focus">True</property>
-				  <property name="climb_rate">1</property>
-				  <property name="digits">0</property>
-				  <property name="numeric">False</property>
-				  <property name="update_policy">GTK_UPDATE_ALWAYS</property>
-				  <property name="snap_to_ticks">False</property>
-				  <property name="wrap">False</property>
-				  <property name="adjustment">1 0 2 1 10 10</property>
-				</widget>
-				<packing>
-				  <property name="padding">1</property>
-				  <property name="expand">False</property>
-				  <property name="fill">True</property>
-				</packing>
-			      </child>
-
-			      <child>
-				<widget class="GtkLabel" id="labelNoiseReduction">
-				  <property name="visible">True</property>
-				  <property name="label" translatable="yes">Noise Reduction</property>
-				  <property name="use_underline">False</property>
-				  <property name="use_markup">False</property>
-				  <property name="justify">GTK_JUSTIFY_LEFT</property>
-				  <property name="wrap">False</property>
-				  <property name="selectable">False</property>
-				  <property name="xalign">0.800000011921</property>
-				  <property name="yalign">0.5</property>
-				  <property name="xpad">0</property>
-				  <property name="ypad">0</property>
-				  <property name="ellipsize">PANGO_ELLIPSIZE_NONE</property>
-				  <property name="width_chars">-1</property>
-				  <property name="single_line_mode">False</property>
-				  <property name="angle">0</property>
-				</widget>
-				<packing>
-				  <property name="padding">0</property>
-				  <property name="expand">True</property>
-				  <property name="fill">True</property>
-				</packing>
-			      </child>
-
-			      <child>
-				<widget class="GtkSpinButton" id="spinbuttonNoiseReduction">
-				  <property name="visible">True</property>
-				  <property name="tooltip" translatable="yes">Set the amount of noise reduction</property>
-				  <property name="can_focus">True</property>
-				  <property name="climb_rate">1</property>
-				  <property name="digits">0</property>
-				  <property name="numeric">False</property>
-				  <property name="update_policy">GTK_UPDATE_ALWAYS</property>
-				  <property name="snap_to_ticks">False</property>
-				  <property name="wrap">False</property>
-				  <property name="adjustment">0 0 1000000000 1 10 10</property>
-				</widget>
-				<packing>
-				  <property name="padding">0</property>
-				  <property name="expand">True</property>
-				  <property name="fill">True</property>
-				</packing>
-			      </child>
-			    </widget>
-			    <packing>
-			      <property name="padding">0</property>
-			      <property name="expand">True</property>
-			      <property name="fill">True</property>
-			    </packing>
-			  </child>
-			</widget>
-		      </child>
-		    </widget>
-		  </child>
-
-		  <child>
-		    <widget class="GtkLabel" id="label25">
-		      <property name="visible">True</property>
-		      <property name="label" translatable="yes">&lt;b&gt;Misc. Options&lt;/b&gt;</property>
-		      <property name="use_underline">False</property>
-		      <property name="use_markup">True</property>
-		      <property name="justify">GTK_JUSTIFY_LEFT</property>
-		      <property name="wrap">False</property>
-		      <property name="selectable">False</property>
-		      <property name="xalign">0.5</property>
-		      <property name="yalign">0.5</property>
-		      <property name="xpad">0</property>
-		      <property name="ypad">0</property>
-		      <property name="ellipsize">PANGO_ELLIPSIZE_NONE</property>
-		      <property name="width_chars">-1</property>
-		      <property name="single_line_mode">False</property>
-		      <property name="angle">0</property>
-		    </widget>
-		    <packing>
-		      <property name="type">label_item</property>
-		    </packing>
-		  </child>
-		</widget>
-		<packing>
-		  <property name="padding">1</property>
-		  <property name="expand">True</property>
-		  <property name="fill">True</property>
-		</packing>
-	      </child>
-	    </widget>
-	    <packing>
-	      <property name="tab_expand">False</property>
-	      <property name="tab_fill">True</property>
-	    </packing>
-	  </child>
-
-	  <child>
-	    <widget class="GtkLabel" id="labelPageMotion&amp;More">
-	      <property name="visible">True</property>
-	      <property name="label" translatable="yes">Motion &amp; Misc</property>
-	      <property name="use_underline">False</property>
-	      <property name="use_markup">False</property>
-	      <property name="justify">GTK_JUSTIFY_LEFT</property>
-	      <property name="wrap">False</property>
-	      <property name="selectable">False</property>
-	      <property name="xalign">0.5</property>
-	      <property name="yalign">0.5</property>
-	      <property name="xpad">0</property>
-	      <property name="ypad">0</property>
-	      <property name="ellipsize">PANGO_ELLIPSIZE_NONE</property>
-	      <property name="width_chars">-1</property>
-	      <property name="single_line_mode">False</property>
-	      <property name="angle">0</property>
-	    </widget>
-	    <packing>
-	      <property name="type">tab</property>
-	    </packing>
-	  </child>
-
-	  <child>
-	    <widget class="GtkVBox" id="vbox2">
-	      <property name="visible">True</property>
-	      <property name="homogeneous">False</property>
-	      <property name="spacing">0</property>
-
-	      <child>
-		<widget class="GtkFrame" id="frame4">
-		  <property name="visible">True</property>
-		  <property name="label_xalign">0</property>
-		  <property name="label_yalign">0.5</property>
-		  <property name="shadow_type">GTK_SHADOW_IN</property>
-
-		  <child>
-		    <widget class="GtkAlignment" id="alignment4">
-		      <property name="visible">True</property>
-		      <property name="xalign">0.5</property>
-		      <property name="yalign">0.5</property>
-		      <property name="xscale">1</property>
-		      <property name="yscale">1</property>
-		      <property name="top_padding">0</property>
-		      <property name="bottom_padding">0</property>
-		      <property name="left_padding">12</property>
-		      <property name="right_padding">0</property>
-
-		      <child>
-			<widget class="GtkVBox" id="vbox3">
-			  <property name="visible">True</property>
-			  <property name="homogeneous">False</property>
-			  <property name="spacing">0</property>
-
-			  <child>
-			    <widget class="GtkCheckButton" id="checkbutton8x8">
-			      <property name="visible">True</property>
-			      <property name="tooltip" translatable="yes">General block breakdown transformation</property>
-			      <property name="can_focus">True</property>
-			      <property name="label" translatable="yes">8x8 Transform</property>
-			      <property name="use_underline">True</property>
-			      <property name="relief">GTK_RELIEF_NORMAL</property>
-			      <property name="focus_on_click">True</property>
-			      <property name="active">True</property>
-			      <property name="inconsistent">False</property>
-			      <property name="draw_indicator">True</property>
-			    </widget>
-			    <packing>
-			      <property name="padding">0</property>
-			      <property name="expand">False</property>
-			      <property name="fill">False</property>
-			    </packing>
-			  </child>
-
-			  <child>
-			    <widget class="GtkCheckButton" id="checkbutton8x8P">
-			      <property name="visible">True</property>
-			      <property name="tooltip" translatable="yes">Improve the P-frame quality</property>
-			      <property name="can_focus">True</property>
-			      <property name="label" translatable="yes">8x8, 8x16 and 16x8 P-frame search</property>
-			      <property name="use_underline">True</property>
-			      <property name="relief">GTK_RELIEF_NORMAL</property>
-			      <property name="focus_on_click">True</property>
-			      <property name="active">True</property>
-			      <property name="inconsistent">False</property>
-			      <property name="draw_indicator">True</property>
-			    </widget>
-			    <packing>
-			      <property name="padding">0</property>
-			      <property name="expand">False</property>
-			      <property name="fill">False</property>
-			    </packing>
-			  </child>
-
-			  <child>
-			    <widget class="GtkCheckButton" id="checkbutton8x8B">
-			      <property name="visible">True</property>
-			      <property name="tooltip" translatable="yes">Improve the B-frame quality</property>
-			      <property name="can_focus">True</property>
-			      <property name="label" translatable="yes">8x8, 8x16 and 16x8 B-frame search</property>
-			      <property name="use_underline">True</property>
-			      <property name="relief">GTK_RELIEF_NORMAL</property>
-			      <property name="focus_on_click">True</property>
-			      <property name="active">True</property>
-			      <property name="inconsistent">False</property>
-			      <property name="draw_indicator">True</property>
-			    </widget>
-			    <packing>
-			      <property name="padding">0</property>
-			      <property name="expand">False</property>
-			      <property name="fill">False</property>
-			    </packing>
-			  </child>
-
-			  <child>
-			    <widget class="GtkCheckButton" id="checkbutton4x4">
-			      <property name="visible">True</property>
-			      <property name="tooltip" translatable="yes">Further improve the P-frame quality</property>
-			      <property name="can_focus">True</property>
-			      <property name="label" translatable="yes">4x4, 4x8 and 8x4 P-frame search</property>
-			      <property name="use_underline">True</property>
-			      <property name="relief">GTK_RELIEF_NORMAL</property>
-			      <property name="focus_on_click">True</property>
-			      <property name="active">False</property>
-			      <property name="inconsistent">False</property>
-			      <property name="draw_indicator">True</property>
-			    </widget>
-			    <packing>
-			      <property name="padding">0</property>
-			      <property name="expand">False</property>
-			      <property name="fill">False</property>
-			    </packing>
-			  </child>
-
-			  <child>
-			    <widget class="GtkCheckButton" id="checkbutton8x8I">
-			      <property name="visible">True</property>
-			      <property name="tooltip" translatable="yes">Enable DCT Intra block search to improve quality</property>
-			      <property name="can_focus">True</property>
-			      <property name="label" translatable="yes">8x8 Intra search</property>
-			      <property name="use_underline">True</property>
-			      <property name="relief">GTK_RELIEF_NORMAL</property>
-			      <property name="focus_on_click">True</property>
-			      <property name="active">True</property>
-			      <property name="inconsistent">False</property>
-			      <property name="draw_indicator">True</property>
-			    </widget>
-			    <packing>
-			      <property name="padding">0</property>
-			      <property name="expand">False</property>
-			      <property name="fill">False</property>
-			    </packing>
-			  </child>
-
-			  <child>
-			    <widget class="GtkCheckButton" id="checkbutton4x4I">
-			      <property name="visible">True</property>
-			      <property name="tooltip" translatable="yes">Further enable DCT Intra block search to improve quality</property>
-			      <property name="can_focus">True</property>
-			      <property name="label" translatable="yes">4x4 Intra search</property>
-			      <property name="use_underline">True</property>
-			      <property name="relief">GTK_RELIEF_NORMAL</property>
-			      <property name="focus_on_click">True</property>
-			      <property name="active">True</property>
-			      <property name="inconsistent">False</property>
-			      <property name="draw_indicator">True</property>
-			    </widget>
-			    <packing>
-			      <property name="padding">0</property>
-			      <property name="expand">False</property>
-			      <property name="fill">False</property>
-			    </packing>
-			  </child>
-			</widget>
-		      </child>
-		    </widget>
-		  </child>
-
-		  <child>
-		    <widget class="GtkLabel" id="label19">
-		      <property name="visible">True</property>
-		      <property name="label" translatable="yes">&lt;b&gt;Partition Macroblocks&lt;/b&gt;</property>
-		      <property name="use_underline">False</property>
-		      <property name="use_markup">True</property>
-		      <property name="justify">GTK_JUSTIFY_LEFT</property>
-		      <property name="wrap">False</property>
-		      <property name="selectable">False</property>
-		      <property name="xalign">0.5</property>
-		      <property name="yalign">0.5</property>
-		      <property name="xpad">0</property>
-		      <property name="ypad">0</property>
-		      <property name="ellipsize">PANGO_ELLIPSIZE_NONE</property>
-		      <property name="width_chars">-1</property>
-		      <property name="single_line_mode">False</property>
-		      <property name="angle">0</property>
-		    </widget>
-		    <packing>
-		      <property name="type">label_item</property>
-		    </packing>
-		  </child>
-		</widget>
-		<packing>
-		  <property name="padding">0</property>
-		  <property name="expand">True</property>
-		  <property name="fill">True</property>
-		</packing>
-	      </child>
-
-	      <child>
-		<widget class="GtkFrame" id="frame5">
-		  <property name="visible">True</property>
-		  <property name="label_xalign">0</property>
-		  <property name="label_yalign">0.5</property>
-		  <property name="shadow_type">GTK_SHADOW_IN</property>
-
-		  <child>
-		    <widget class="GtkAlignment" id="alignment5">
-		      <property name="visible">True</property>
-		      <property name="xalign">0.5</property>
-		      <property name="yalign">0.5</property>
-		      <property name="xscale">1</property>
-		      <property name="yscale">1</property>
-		      <property name="top_padding">0</property>
-		      <property name="bottom_padding">0</property>
-		      <property name="left_padding">12</property>
-		      <property name="right_padding">0</property>
-
-		      <child>
-			<widget class="GtkVBox" id="vbox4">
-			  <property name="visible">True</property>
-			  <property name="homogeneous">False</property>
-			  <property name="spacing">0</property>
-
-			  <child>
-			    <widget class="GtkTable" id="table5">
-			      <property name="visible">True</property>
-			      <property name="n_rows">2</property>
-			      <property name="n_columns">2</property>
-			      <property name="homogeneous">False</property>
-			      <property name="row_spacing">0</property>
-			      <property name="column_spacing">0</property>
-
-			      <child>
-				<widget class="GtkLabel" id="labelBias">
-				  <property name="visible">True</property>
-				  <property name="label" translatable="yes">Bias</property>
-				  <property name="use_underline">False</property>
-				  <property name="use_markup">False</property>
-				  <property name="justify">GTK_JUSTIFY_LEFT</property>
-				  <property name="wrap">False</property>
-				  <property name="selectable">False</property>
-				  <property name="xalign">0</property>
-				  <property name="yalign">0.5</property>
-				  <property name="xpad">0</property>
-				  <property name="ypad">0</property>
-				  <property name="ellipsize">PANGO_ELLIPSIZE_NONE</property>
-				  <property name="width_chars">-1</property>
-				  <property name="single_line_mode">False</property>
-				  <property name="angle">0</property>
-				</widget>
-				<packing>
-				  <property name="left_attach">0</property>
-				  <property name="right_attach">1</property>
-				  <property name="top_attach">1</property>
-				  <property name="bottom_attach">2</property>
-				  <property name="x_options">fill</property>
-				  <property name="y_options"></property>
-				</packing>
-			      </child>
-
-			      <child>
-				<widget class="GtkSpinButton" id="spinbuttonBias">
-				  <property name="visible">True</property>
-				  <property name="tooltip" translatable="yes">Increase / decrease probability for how often B-frames are used. Will not violate the maximum consecutive frame limit</property>
-				  <property name="can_focus">True</property>
-				  <property name="climb_rate">1</property>
-				  <property name="digits">0</property>
-				  <property name="numeric">True</property>
-				  <property name="update_policy">GTK_UPDATE_ALWAYS</property>
-				  <property name="snap_to_ticks">False</property>
-				  <property name="wrap">False</property>
-				  <property name="adjustment">0 -100 100 1 10 10</property>
-				</widget>
-				<packing>
-				  <property name="left_attach">1</property>
-				  <property name="right_attach">2</property>
-				  <property name="top_attach">1</property>
-				  <property name="bottom_attach">2</property>
-				  <property name="y_options"></property>
-				</packing>
-			      </child>
-
-			      <child>
-				<widget class="GtkLabel" id="labelMaxConsecutive">
-				  <property name="visible">True</property>
-				  <property name="label" translatable="yes">Max Consecutive</property>
-				  <property name="use_underline">False</property>
-				  <property name="use_markup">False</property>
-				  <property name="justify">GTK_JUSTIFY_LEFT</property>
-				  <property name="wrap">False</property>
-				  <property name="selectable">False</property>
-				  <property name="xalign">0</property>
-				  <property name="yalign">0.5</property>
-				  <property name="xpad">0</property>
-				  <property name="ypad">0</property>
-				  <property name="ellipsize">PANGO_ELLIPSIZE_NONE</property>
-				  <property name="width_chars">-1</property>
-				  <property name="single_line_mode">False</property>
-				  <property name="angle">0</property>
-				</widget>
-				<packing>
-				  <property name="left_attach">0</property>
-				  <property name="right_attach">1</property>
-				  <property name="top_attach">0</property>
-				  <property name="bottom_attach">1</property>
-				  <property name="y_options"></property>
-				</packing>
-			      </child>
-
-			      <child>
-				<widget class="GtkSpinButton" id="spinbuttonMaxBFrame">
-				  <property name="visible">True</property>
-				  <property name="tooltip" translatable="yes">Set the maximum number of consecutive B-frames. This defines how many duplicate frames can be droped. Numbers 2 to 5 are recommended. This greatly improves the use of bitrate and quality</property>
-				  <property name="can_focus">True</property>
-				  <property name="climb_rate">1</property>
-				  <property name="digits">0</property>
-				  <property name="numeric">True</property>
-				  <property name="update_policy">GTK_UPDATE_ALWAYS</property>
-				  <property name="snap_to_ticks">False</property>
-				  <property name="wrap">False</property>
-				  <property name="adjustment">3 0 15 1 10 10</property>
-				</widget>
-				<packing>
-				  <property name="left_attach">1</property>
-				  <property name="right_attach">2</property>
-				  <property name="top_attach">0</property>
-				  <property name="bottom_attach">1</property>
-				  <property name="y_options"></property>
-				</packing>
-			      </child>
-			    </widget>
-			    <packing>
-			      <property name="padding">0</property>
-			      <property name="expand">True</property>
-			      <property name="fill">True</property>
-			    </packing>
-			  </child>
-
-			  <child>
-			    <widget class="GtkTable" id="table6">
-			      <property name="visible">True</property>
-			      <property name="n_rows">2</property>
-			      <property name="n_columns">2</property>
-			      <property name="homogeneous">False</property>
-			      <property name="row_spacing">0</property>
-			      <property name="column_spacing">0</property>
-
-			      <child>
-				<widget class="GtkCheckButton" id="checkbuttonBidirME">
-				  <property name="visible">True</property>
-				  <property name="tooltip" translatable="yes">Jointly optimize both Motion Vector's in B-frames. This will improve quality but take more time for encoding</property>
-				  <property name="can_focus">True</property>
-				  <property name="label" translatable="yes">Bidirectional ME</property>
-				  <property name="use_underline">True</property>
-				  <property name="relief">GTK_RELIEF_NORMAL</property>
-				  <property name="focus_on_click">True</property>
-				  <property name="active">False</property>
-				  <property name="inconsistent">False</property>
-				  <property name="draw_indicator">True</property>
-				</widget>
-				<packing>
-				  <property name="left_attach">1</property>
-				  <property name="right_attach">2</property>
-				  <property name="top_attach">0</property>
-				  <property name="bottom_attach">1</property>
-				  <property name="x_options">fill</property>
-				  <property name="y_options"></property>
-				</packing>
-			      </child>
-
-			      <child>
-				<widget class="GtkCheckButton" id="checkbuttonWeighted">
-				  <property name="visible">True</property>
-				  <property name="tooltip" translatable="yes">Enables weighting of B-frames to help fades</property>
-				  <property name="can_focus">True</property>
-				  <property name="label" translatable="yes">Weighted biprediction</property>
-				  <property name="use_underline">True</property>
-				  <property name="relief">GTK_RELIEF_NORMAL</property>
-				  <property name="focus_on_click">True</property>
-				  <property name="active">True</property>
-				  <property name="inconsistent">False</property>
-				  <property name="draw_indicator">True</property>
-				</widget>
-				<packing>
-				  <property name="left_attach">1</property>
-				  <property name="right_attach">2</property>
-				  <property name="top_attach">1</property>
-				  <property name="bottom_attach">2</property>
-				  <property name="x_options">fill</property>
-				  <property name="y_options"></property>
-				</packing>
-			      </child>
-
-			      <child>
-				<widget class="GtkCheckButton" id="checkbuttonAdaptative">
-				  <property name="visible">True</property>
-				  <property name="tooltip" translatable="yes">Use fewer B-frame if needed. This is always recommended. If not enabled, the codec will always use the maximum number of consecutive B-frames</property>
-				  <property name="can_focus">True</property>
-				  <property name="label" translatable="yes">Adaptative DCT</property>
-				  <property name="use_underline">True</property>
-				  <property name="relief">GTK_RELIEF_NORMAL</property>
-				  <property name="focus_on_click">True</property>
-				  <property name="active">True</property>
-				  <property name="inconsistent">False</property>
-				  <property name="draw_indicator">True</property>
-				</widget>
-				<packing>
-				  <property name="left_attach">0</property>
-				  <property name="right_attach">1</property>
-				  <property name="top_attach">1</property>
-				  <property name="bottom_attach">2</property>
-				  <property name="x_padding">4</property>
-				  <property name="x_options">fill</property>
-				  <property name="y_options"></property>
-				</packing>
-			      </child>
-
-			      <child>
-				<widget class="GtkCheckButton" id="checkbuttonBasReference">
-				  <property name="visible">True</property>
-				  <property name="tooltip" translatable="yes">Allow B-frames to make references non-linearly to another B-frame (instead of creating a duplicate copy)</property>
-				  <property name="can_focus">True</property>
-				  <property name="label" translatable="yes">Use as reference</property>
-				  <property name="use_underline">True</property>
-				  <property name="relief">GTK_RELIEF_NORMAL</property>
-				  <property name="focus_on_click">True</property>
-				  <property name="active">False</property>
-				  <property name="inconsistent">False</property>
-				  <property name="draw_indicator">True</property>
-				</widget>
-				<packing>
-				  <property name="left_attach">0</property>
-				  <property name="right_attach">1</property>
-				  <property name="top_attach">0</property>
-				  <property name="bottom_attach">1</property>
-				  <property name="x_padding">5</property>
-				  <property name="x_options">fill</property>
-				  <property name="y_options"></property>
-				</packing>
-			      </child>
-			    </widget>
-			    <packing>
-			      <property name="padding">0</property>
-			      <property name="expand">True</property>
-			      <property name="fill">True</property>
-			    </packing>
-			  </child>
-
-			  <child>
-			    <widget class="GtkHBox" id="hbox1">
-			      <property name="visible">True</property>
-			      <property name="homogeneous">False</property>
-			      <property name="spacing">0</property>
-
-			      <child>
-				<widget class="GtkLabel" id="labelBFrameDirectMode">
-				  <property name="visible">True</property>
-				  <property name="label" translatable="yes">B-Frame Direct Mode:  </property>
-				  <property name="use_underline">False</property>
-				  <property name="use_markup">False</property>
-				  <property name="justify">GTK_JUSTIFY_LEFT</property>
-				  <property name="wrap">False</property>
-				  <property name="selectable">False</property>
-				  <property name="xalign">1</property>
-				  <property name="yalign">0.5</property>
-				  <property name="xpad">0</property>
-				  <property name="ypad">0</property>
-				  <property name="ellipsize">PANGO_ELLIPSIZE_NONE</property>
-				  <property name="width_chars">-1</property>
-				  <property name="single_line_mode">False</property>
-				  <property name="angle">0</property>
-				</widget>
-				<packing>
-				  <property name="padding">0</property>
-				  <property name="expand">True</property>
-				  <property name="fill">True</property>
-				</packing>
-			      </child>
-
-			      <child>
-				<widget class="GtkComboBox" id="comboboxDirectMode">
-				  <property name="visible">True</property>
-				  <property name="has_default">True</property>
-				  <property name="items" translatable="yes">Temporal
-Spatial</property>
-				  <property name="add_tearoffs">False</property>
-				  <property name="focus_on_click">True</property>
-				</widget>
-				<packing>
-				  <property name="padding">0</property>
-				  <property name="expand">True</property>
-				  <property name="fill">True</property>
-				</packing>
-			      </child>
-			    </widget>
-			    <packing>
-			      <property name="padding">0</property>
-			      <property name="expand">True</property>
-			      <property name="fill">True</property>
-			    </packing>
-			  </child>
-			</widget>
-		      </child>
-		    </widget>
-		  </child>
-
-		  <child>
-		    <widget class="GtkLabel" id="label20">
-		      <property name="visible">True</property>
-		      <property name="label" translatable="yes">&lt;b&gt;B-Frames&lt;/b&gt;</property>
-		      <property name="use_underline">False</property>
-		      <property name="use_markup">True</property>
-		      <property name="justify">GTK_JUSTIFY_LEFT</property>
-		      <property name="wrap">False</property>
-		      <property name="selectable">False</property>
-		      <property name="xalign">0.5</property>
-		      <property name="yalign">0.5</property>
-		      <property name="xpad">0</property>
-		      <property name="ypad">0</property>
-		      <property name="ellipsize">PANGO_ELLIPSIZE_NONE</property>
-		      <property name="width_chars">-1</property>
-		      <property name="single_line_mode">False</property>
-		      <property name="angle">0</property>
-		    </widget>
-		    <packing>
-		      <property name="type">label_item</property>
-		    </packing>
-		  </child>
-		</widget>
-		<packing>
-		  <property name="padding">1</property>
-		  <property name="expand">True</property>
-		  <property name="fill">True</property>
-		</packing>
-	      </child>
-	    </widget>
-	    <packing>
-	      <property name="tab_expand">False</property>
-	      <property name="tab_fill">True</property>
-	    </packing>
-	  </child>
-
-	  <child>
-	    <widget class="GtkLabel" id="labelPagePartion&amp;Frame">
-	      <property name="visible">True</property>
-	      <property name="label" translatable="yes">Partitions &amp; Frames</property>
-	      <property name="use_underline">False</property>
-	      <property name="use_markup">False</property>
-	      <property name="justify">GTK_JUSTIFY_LEFT</property>
-	      <property name="wrap">False</property>
-	      <property name="selectable">False</property>
-	      <property name="xalign">0.5</property>
-	      <property name="yalign">0.5</property>
-	      <property name="xpad">0</property>
-	      <property name="ypad">0</property>
-	      <property name="ellipsize">PANGO_ELLIPSIZE_NONE</property>
-	      <property name="width_chars">-1</property>
-	      <property name="single_line_mode">False</property>
-	      <property name="angle">0</property>
-	    </widget>
-	    <packing>
-	      <property name="type">tab</property>
-	    </packing>
-	  </child>
-
-	  <child>
-	    <widget class="GtkVBox" id="vbox1">
-	      <property name="visible">True</property>
-	      <property name="homogeneous">False</property>
-	      <property name="spacing">0</property>
-
-	      <child>
-		<widget class="GtkFrame" id="frame1">
-		  <property name="visible">True</property>
-		  <property name="label_xalign">0</property>
-		  <property name="label_yalign">0.5</property>
-		  <property name="shadow_type">GTK_SHADOW_ETCHED_IN</property>
-
-		  <child>
-		    <widget class="GtkAlignment" id="alignment1">
-		      <property name="visible">True</property>
-		      <property name="xalign">0.5</property>
-		      <property name="yalign">0.5</property>
-		      <property name="xscale">1</property>
-		      <property name="yscale">1</property>
-		      <property name="top_padding">0</property>
-		      <property name="bottom_padding">0</property>
-		      <property name="left_padding">12</property>
-		      <property name="right_padding">0</property>
-
-		      <child>
-			<widget class="GtkTable" id="table2">
-			  <property name="visible">True</property>
-			  <property name="n_rows">3</property>
-			  <property name="n_columns">2</property>
-			  <property name="homogeneous">False</property>
-			  <property name="row_spacing">0</property>
-			  <property name="column_spacing">0</property>
-
-			  <child>
-			    <widget class="GtkSpinButton" id="spinbuttonKeyframeBoost">
-			      <property name="width_request">115</property>
-			      <property name="visible">True</property>
-			      <property name="tooltip" translatable="yes">Set how much &quot;bitrate bonus&quot; a keyframe can get</property>
-			      <property name="can_focus">True</property>
-			      <property name="climb_rate">1</property>
-			      <property name="digits">0</property>
-			      <property name="numeric">True</property>
-			      <property name="update_policy">GTK_UPDATE_ALWAYS</property>
-			      <property name="snap_to_ticks">False</property>
-			      <property name="wrap">False</property>
-			      <property name="adjustment">40 0 100 1 10 10</property>
-			    </widget>
-			    <packing>
-			      <property name="left_attach">1</property>
-			      <property name="right_attach">2</property>
-			      <property name="top_attach">0</property>
-			      <property name="bottom_attach">1</property>
-			      <property name="y_options"></property>
-			    </packing>
-			  </child>
-
-			  <child>
-			    <widget class="GtkLabel" id="label10">
-			      <property name="visible">True</property>
-			      <property name="label" translatable="yes">Keyframe boots (%)</property>
-			      <property name="use_underline">False</property>
-			      <property name="use_markup">False</property>
-			      <property name="justify">GTK_JUSTIFY_LEFT</property>
-			      <property name="wrap">False</property>
-			      <property name="selectable">False</property>
-			      <property name="xalign">0</property>
-			      <property name="yalign">0.5</property>
-			      <property name="xpad">0</property>
-			      <property name="ypad">0</property>
-			      <property name="ellipsize">PANGO_ELLIPSIZE_NONE</property>
-			      <property name="width_chars">-1</property>
-			      <property name="single_line_mode">False</property>
-			      <property name="angle">0</property>
-			    </widget>
-			    <packing>
-			      <property name="left_attach">0</property>
-			      <property name="right_attach">1</property>
-			      <property name="top_attach">0</property>
-			      <property name="bottom_attach">1</property>
-			      <property name="y_options"></property>
-			    </packing>
-			  </child>
-
-			  <child>
-			    <widget class="GtkLabel" id="label11">
-			      <property name="visible">True</property>
-			      <property name="label" translatable="yes">B-frame reduction (%)</property>
-			      <property name="use_underline">False</property>
-			      <property name="use_markup">False</property>
-			      <property name="justify">GTK_JUSTIFY_LEFT</property>
-			      <property name="wrap">False</property>
-			      <property name="selectable">False</property>
-			      <property name="xalign">0</property>
-			      <property name="yalign">0.5</property>
-			      <property name="xpad">0</property>
-			      <property name="ypad">0</property>
-			      <property name="ellipsize">PANGO_ELLIPSIZE_NONE</property>
-			      <property name="width_chars">-1</property>
-			      <property name="single_line_mode">False</property>
-			      <property name="angle">0</property>
-			    </widget>
-			    <packing>
-			      <property name="left_attach">0</property>
-			      <property name="right_attach">1</property>
-			      <property name="top_attach">1</property>
-			      <property name="bottom_attach">2</property>
-			      <property name="y_options"></property>
-			    </packing>
-			  </child>
-
-			  <child>
-			    <widget class="GtkLabel" id="label12">
-			      <property name="visible">True</property>
-			      <property name="label" translatable="yes">Bitrate variability (%)</property>
-			      <property name="use_underline">False</property>
-			      <property name="use_markup">False</property>
-			      <property name="justify">GTK_JUSTIFY_LEFT</property>
-			      <property name="wrap">False</property>
-			      <property name="selectable">False</property>
-			      <property name="xalign">0</property>
-			      <property name="yalign">0.5</property>
-			      <property name="xpad">0</property>
-			      <property name="ypad">0</property>
-			      <property name="ellipsize">PANGO_ELLIPSIZE_NONE</property>
-			      <property name="width_chars">-1</property>
-			      <property name="single_line_mode">False</property>
-			      <property name="angle">0</property>
-			    </widget>
-			    <packing>
-			      <property name="left_attach">0</property>
-			      <property name="right_attach">1</property>
-			      <property name="top_attach">2</property>
-			      <property name="bottom_attach">3</property>
-			      <property name="y_options"></property>
-			    </packing>
-			  </child>
-
-			  <child>
-			    <widget class="GtkSpinButton" id="spinbuttonBframeReduction">
-			      <property name="visible">True</property>
-			      <property name="tooltip" translatable="yes">Set how much bitrate is deducted from a B-frame as compared to the previous P-frame</property>
-			      <property name="can_focus">True</property>
-			      <property name="climb_rate">1</property>
-			      <property name="digits">0</property>
-			      <property name="numeric">True</property>
-			      <property name="update_policy">GTK_UPDATE_ALWAYS</property>
-			      <property name="snap_to_ticks">False</property>
-			      <property name="wrap">False</property>
-			      <property name="adjustment">30 0 100 1 10 10</property>
-			    </widget>
-			    <packing>
-			      <property name="left_attach">1</property>
-			      <property name="right_attach">2</property>
-			      <property name="top_attach">1</property>
-			      <property name="bottom_attach">2</property>
-			      <property name="y_options"></property>
-			    </packing>
-			  </child>
-
-			  <child>
-			    <widget class="GtkSpinButton" id="spinbuttonBitrateVariability">
-			      <property name="visible">True</property>
-			      <property name="tooltip" translatable="yes">Define how much the bitrate can fluctuate over the entire video. 0% results in a constant bitrate stream, while 100% results in a pure quality based bitrate stream</property>
-			      <property name="can_focus">True</property>
-			      <property name="climb_rate">1</property>
-			      <property name="digits">0</property>
-			      <property name="numeric">True</property>
-			      <property name="update_policy">GTK_UPDATE_ALWAYS</property>
-			      <property name="snap_to_ticks">False</property>
-			      <property name="wrap">False</property>
-			      <property name="adjustment">60 0 100 1 10 10</property>
-			    </widget>
-			    <packing>
-			      <property name="left_attach">1</property>
-			      <property name="right_attach">2</property>
-			      <property name="top_attach">2</property>
-			      <property name="bottom_attach">3</property>
-			      <property name="y_options"></property>
-			    </packing>
-			  </child>
-			</widget>
-		      </child>
-		    </widget>
-		  </child>
-
-		  <child>
-		    <widget class="GtkLabel" id="label7">
-		      <property name="visible">True</property>
-		      <property name="label" translatable="yes">&lt;b&gt;Bitrate&lt;/b&gt;</property>
-		      <property name="use_underline">False</property>
-		      <property name="use_markup">True</property>
-		      <property name="justify">GTK_JUSTIFY_LEFT</property>
-		      <property name="wrap">False</property>
-		      <property name="selectable">False</property>
-		      <property name="xalign">0.5</property>
-		      <property name="yalign">0.5</property>
-		      <property name="xpad">0</property>
-		      <property name="ypad">0</property>
-		      <property name="ellipsize">PANGO_ELLIPSIZE_NONE</property>
-		      <property name="width_chars">-1</property>
-		      <property name="single_line_mode">False</property>
-		      <property name="angle">0</property>
-		    </widget>
-		    <packing>
-		      <property name="type">label_item</property>
-		    </packing>
-		  </child>
-		</widget>
-		<packing>
-		  <property name="padding">1</property>
-		  <property name="expand">True</property>
-		  <property name="fill">True</property>
-		</packing>
-	      </child>
-
-	      <child>
-		<widget class="GtkFrame" id="frame2">
-		  <property name="visible">True</property>
-		  <property name="label_xalign">0</property>
-		  <property name="label_yalign">0.5</property>
-		  <property name="shadow_type">GTK_SHADOW_ETCHED_IN</property>
-
-		  <child>
-		    <widget class="GtkAlignment" id="alignment2">
-		      <property name="visible">True</property>
-		      <property name="xalign">0.5</property>
-		      <property name="yalign">0.5</property>
-		      <property name="xscale">1</property>
-		      <property name="yscale">1</property>
-		      <property name="top_padding">0</property>
-		      <property name="bottom_padding">0</property>
-		      <property name="left_padding">12</property>
-		      <property name="right_padding">0</property>
-
-		      <child>
-			<widget class="GtkTable" id="table3">
-			  <property name="visible">True</property>
-			  <property name="n_rows">3</property>
-			  <property name="n_columns">2</property>
-			  <property name="homogeneous">False</property>
-			  <property name="row_spacing">0</property>
-			  <property name="column_spacing">0</property>
-
-			  <child>
-			    <widget class="GtkLabel" id="label13">
-			      <property name="visible">True</property>
-			      <property name="label" translatable="yes">Min Qp</property>
-			      <property name="use_underline">False</property>
-			      <property name="use_markup">False</property>
-			      <property name="justify">GTK_JUSTIFY_LEFT</property>
-			      <property name="wrap">False</property>
-			      <property name="selectable">False</property>
-			      <property name="xalign">0</property>
-			      <property name="yalign">0.5</property>
-			      <property name="xpad">0</property>
-			      <property name="ypad">0</property>
-			      <property name="ellipsize">PANGO_ELLIPSIZE_NONE</property>
-			      <property name="width_chars">-1</property>
-			      <property name="single_line_mode">False</property>
-			      <property name="angle">0</property>
-			    </widget>
-			    <packing>
-			      <property name="left_attach">0</property>
-			      <property name="right_attach">1</property>
-			      <property name="top_attach">0</property>
-			      <property name="bottom_attach">1</property>
-			      <property name="y_options"></property>
-			    </packing>
-			  </child>
-
-			  <child>
-			    <widget class="GtkLabel" id="label14">
-			      <property name="visible">True</property>
-			      <property name="label" translatable="yes">Max Qp</property>
-			      <property name="use_underline">False</property>
-			      <property name="use_markup">False</property>
-			      <property name="justify">GTK_JUSTIFY_LEFT</property>
-			      <property name="wrap">False</property>
-			      <property name="selectable">False</property>
-			      <property name="xalign">0</property>
-			      <property name="yalign">0.5</property>
-			      <property name="xpad">0</property>
-			      <property name="ypad">0</property>
-			      <property name="ellipsize">PANGO_ELLIPSIZE_NONE</property>
-			      <property name="width_chars">-1</property>
-			      <property name="single_line_mode">False</property>
-			      <property name="angle">0</property>
-			    </widget>
-			    <packing>
-			      <property name="left_attach">0</property>
-			      <property name="right_attach">1</property>
-			      <property name="top_attach">1</property>
-			      <property name="bottom_attach">2</property>
-			      <property name="y_options"></property>
-			    </packing>
-			  </child>
-
-			  <child>
-			    <widget class="GtkLabel" id="label15">
-			      <property name="visible">True</property>
-			      <property name="label" translatable="yes">Max QP Step</property>
-			      <property name="use_underline">False</property>
-			      <property name="use_markup">False</property>
-			      <property name="justify">GTK_JUSTIFY_LEFT</property>
-			      <property name="wrap">False</property>
-			      <property name="selectable">False</property>
-			      <property name="xalign">0</property>
-			      <property name="yalign">0.5</property>
-			      <property name="xpad">0</property>
-			      <property name="ypad">0</property>
-			      <property name="ellipsize">PANGO_ELLIPSIZE_NONE</property>
-			      <property name="width_chars">-1</property>
-			      <property name="single_line_mode">False</property>
-			      <property name="angle">0</property>
-			    </widget>
-			    <packing>
-			      <property name="left_attach">0</property>
-			      <property name="right_attach">1</property>
-			      <property name="top_attach">2</property>
-			      <property name="bottom_attach">3</property>
-			      <property name="y_options"></property>
-			    </packing>
-			  </child>
-
-			  <child>
-			    <widget class="GtkSpinButton" id="spinbuttonMinQp">
-			      <property name="width_request">54</property>
-			      <property name="visible">True</property>
-			      <property name="tooltip" translatable="yes">Enforce a minimum quantizer level</property>
-			      <property name="can_focus">True</property>
-			      <property name="climb_rate">1</property>
-			      <property name="digits">0</property>
-			      <property name="numeric">True</property>
-			      <property name="update_policy">GTK_UPDATE_ALWAYS</property>
-			      <property name="snap_to_ticks">False</property>
-			      <property name="wrap">False</property>
-			      <property name="adjustment">10 10 51 1 10 10</property>
-			    </widget>
-			    <packing>
-			      <property name="left_attach">1</property>
-			      <property name="right_attach">2</property>
-			      <property name="top_attach">0</property>
-			      <property name="bottom_attach">1</property>
-			      <property name="y_options"></property>
-			    </packing>
-			  </child>
-
-			  <child>
-			    <widget class="GtkSpinButton" id="spinbuttonMaxQp">
-			      <property name="visible">True</property>
-			      <property name="tooltip" translatable="yes">Enforce a maximum quantizer level</property>
-			      <property name="can_focus">True</property>
-			      <property name="climb_rate">1</property>
-			      <property name="digits">0</property>
-			      <property name="numeric">True</property>
-			      <property name="update_policy">GTK_UPDATE_ALWAYS</property>
-			      <property name="snap_to_ticks">False</property>
-			      <property name="wrap">False</property>
-			      <property name="adjustment">51 10 51 1 10 10</property>
-			    </widget>
-			    <packing>
-			      <property name="left_attach">1</property>
-			      <property name="right_attach">2</property>
-			      <property name="top_attach">1</property>
-			      <property name="bottom_attach">2</property>
-			      <property name="y_options"></property>
-			    </packing>
-			  </child>
-
-			  <child>
-			    <widget class="GtkSpinButton" id="spinbuttonQpStep">
-			      <property name="visible">True</property>
-			      <property name="tooltip" translatable="yes">Define how much the quantizer rate can change between two consecutive frames</property>
-			      <property name="can_focus">True</property>
-			      <property name="climb_rate">1</property>
-			      <property name="digits">0</property>
-			      <property name="numeric">True</property>
-			      <property name="update_policy">GTK_UPDATE_ALWAYS</property>
-			      <property name="snap_to_ticks">False</property>
-			      <property name="wrap">False</property>
-			      <property name="adjustment">4 0 10 1 10 10</property>
-			    </widget>
-			    <packing>
-			      <property name="left_attach">1</property>
-			      <property name="right_attach">2</property>
-			      <property name="top_attach">2</property>
-			      <property name="bottom_attach">3</property>
-			      <property name="y_options"></property>
-			    </packing>
-			  </child>
-			</widget>
-		      </child>
-		    </widget>
-		  </child>
-
-		  <child>
-		    <widget class="GtkLabel" id="label8">
-		      <property name="visible">True</property>
-		      <property name="label" translatable="yes">&lt;b&gt;Quantization Limits&lt;/b&gt;</property>
-		      <property name="use_underline">False</property>
-		      <property name="use_markup">True</property>
-		      <property name="justify">GTK_JUSTIFY_LEFT</property>
-		      <property name="wrap">False</property>
-		      <property name="selectable">False</property>
-		      <property name="xalign">0.5</property>
-		      <property name="yalign">0.5</property>
-		      <property name="xpad">0</property>
-		      <property name="ypad">0</property>
-		      <property name="ellipsize">PANGO_ELLIPSIZE_NONE</property>
-		      <property name="width_chars">-1</property>
-		      <property name="single_line_mode">False</property>
-		      <property name="angle">0</property>
-		    </widget>
-		    <packing>
-		      <property name="type">label_item</property>
-		    </packing>
-		  </child>
-		</widget>
-		<packing>
-		  <property name="padding">1</property>
-		  <property name="expand">True</property>
-		  <property name="fill">True</property>
-		</packing>
-	      </child>
-
-	      <child>
-		<widget class="GtkFrame" id="frame3">
-		  <property name="visible">True</property>
-		  <property name="label_xalign">0</property>
-		  <property name="label_yalign">0.5</property>
-		  <property name="shadow_type">GTK_SHADOW_ETCHED_IN</property>
-
-		  <child>
-		    <widget class="GtkAlignment" id="alignment3">
-		      <property name="visible">True</property>
-		      <property name="xalign">0.5</property>
-		      <property name="yalign">0.5</property>
-		      <property name="xscale">1</property>
-		      <property name="yscale">1</property>
-		      <property name="top_padding">0</property>
-		      <property name="bottom_padding">0</property>
-		      <property name="left_padding">12</property>
-		      <property name="right_padding">0</property>
-
-		      <child>
-			<widget class="GtkTable" id="table4">
-			  <property name="visible">True</property>
-			  <property name="n_rows">3</property>
-			  <property name="n_columns">2</property>
-			  <property name="homogeneous">False</property>
-			  <property name="row_spacing">0</property>
-			  <property name="column_spacing">0</property>
-
-			  <child>
-			    <widget class="GtkLabel" id="label16">
-			      <property name="visible">True</property>
-			      <property name="label" translatable="yes">Scene Cut Threshold</property>
-			      <property name="use_underline">False</property>
-			      <property name="use_markup">False</property>
-			      <property name="justify">GTK_JUSTIFY_LEFT</property>
-			      <property name="wrap">False</property>
-			      <property name="selectable">False</property>
-			      <property name="xalign">0</property>
-			      <property name="yalign">0.5</property>
-			      <property name="xpad">0</property>
-			      <property name="ypad">0</property>
-			      <property name="ellipsize">PANGO_ELLIPSIZE_NONE</property>
-			      <property name="width_chars">-1</property>
-			      <property name="single_line_mode">False</property>
-			      <property name="angle">0</property>
-			    </widget>
-			    <packing>
-			      <property name="left_attach">0</property>
-			      <property name="right_attach">1</property>
-			      <property name="top_attach">0</property>
-			      <property name="bottom_attach">1</property>
-			      <property name="y_options"></property>
-			    </packing>
-			  </child>
-
-			  <child>
-			    <widget class="GtkSpinButton" id="spinbuttonSceneCut">
-			      <property name="width_request">115</property>
-			      <property name="visible">True</property>
-			      <property name="tooltip" translatable="yes">Increase / decrease sensitivity for detecting Scene Changes to compensate for. Improves I-frame usage and helps quality</property>
-			      <property name="can_focus">True</property>
-			      <property name="climb_rate">1</property>
-			      <property name="digits">0</property>
-			      <property name="numeric">True</property>
-			      <property name="update_policy">GTK_UPDATE_ALWAYS</property>
-			      <property name="snap_to_ticks">False</property>
-			      <property name="wrap">False</property>
-			      <property name="adjustment">40 0 100 1 10 10</property>
-			    </widget>
-			    <packing>
-			      <property name="left_attach">1</property>
-			      <property name="right_attach">2</property>
-			      <property name="top_attach">0</property>
-			      <property name="bottom_attach">1</property>
-			      <property name="y_options"></property>
-			    </packing>
-			  </child>
-
-			  <child>
-			    <widget class="GtkLabel" id="label17">
-			      <property name="visible">True</property>
-			      <property name="label" translatable="yes">Min IDR frame interval</property>
-			      <property name="use_underline">False</property>
-			      <property name="use_markup">False</property>
-			      <property name="justify">GTK_JUSTIFY_LEFT</property>
-			      <property name="wrap">False</property>
-			      <property name="selectable">False</property>
-			      <property name="xalign">0</property>
-			      <property name="yalign">0.5</property>
-			      <property name="xpad">0</property>
-			      <property name="ypad">0</property>
-			      <property name="ellipsize">PANGO_ELLIPSIZE_NONE</property>
-			      <property name="width_chars">-1</property>
-			      <property name="single_line_mode">False</property>
-			      <property name="angle">0</property>
-			    </widget>
-			    <packing>
-			      <property name="left_attach">0</property>
-			      <property name="right_attach">1</property>
-			      <property name="top_attach">1</property>
-			      <property name="bottom_attach">2</property>
-			      <property name="y_options"></property>
-			    </packing>
-			  </child>
-
-			  <child>
-			    <widget class="GtkSpinButton" id="spinbuttonMinIdr">
-			      <property name="visible">True</property>
-			      <property name="tooltip" translatable="yes">Set minimum frame interval between IDR frames. Defines the minimum amount a frame can be reused and referenced by other frames before a new clean one is established</property>
-			      <property name="can_focus">True</property>
-			      <property name="climb_rate">1</property>
-			      <property name="digits">0</property>
-			      <property name="numeric">True</property>
-			      <property name="update_policy">GTK_UPDATE_ALWAYS</property>
-			      <property name="snap_to_ticks">False</property>
-			      <property name="wrap">False</property>
-			      <property name="adjustment">25 0 100 1 10 10</property>
-			    </widget>
-			    <packing>
-			      <property name="left_attach">1</property>
-			      <property name="right_attach">2</property>
-			      <property name="top_attach">1</property>
-			      <property name="bottom_attach">2</property>
-			      <property name="y_options"></property>
-			    </packing>
-			  </child>
-
-			  <child>
-			    <widget class="GtkSpinButton" id="spinbuttonMaxIdr">
-			      <property name="visible">True</property>
-			      <property name="tooltip" translatable="yes">Set maximum frame interval between IDR frames. Defines the maximum amount a frame can be reused and referenced by other frames before a new clean one is established</property>
-			      <property name="can_focus">True</property>
-			      <property name="climb_rate">1</property>
-			      <property name="digits">0</property>
-			      <property name="numeric">True</property>
-			      <property name="update_policy">GTK_UPDATE_ALWAYS</property>
-			      <property name="snap_to_ticks">False</property>
-			      <property name="wrap">False</property>
-			      <property name="adjustment">250 1 1000 1 10 10</property>
-			    </widget>
-			    <packing>
-			      <property name="left_attach">1</property>
-			      <property name="right_attach">2</property>
-			      <property name="top_attach">2</property>
-			      <property name="bottom_attach">3</property>
-			      <property name="y_options"></property>
-			    </packing>
-			  </child>
-
-			  <child>
-			    <widget class="GtkLabel" id="label18">
-			      <property name="visible">True</property>
-			      <property name="label" translatable="yes">Max IDR frame interval</property>
-			      <property name="use_underline">False</property>
-			      <property name="use_markup">False</property>
-			      <property name="justify">GTK_JUSTIFY_LEFT</property>
-			      <property name="wrap">False</property>
-			      <property name="selectable">False</property>
-			      <property name="xalign">0</property>
-			      <property name="yalign">0.5</property>
-			      <property name="xpad">0</property>
-			      <property name="ypad">0</property>
-			      <property name="ellipsize">PANGO_ELLIPSIZE_NONE</property>
-			      <property name="width_chars">-1</property>
-			      <property name="single_line_mode">False</property>
-			      <property name="angle">0</property>
-			    </widget>
-			    <packing>
-			      <property name="left_attach">0</property>
-			      <property name="right_attach">1</property>
-			      <property name="top_attach">2</property>
-			      <property name="bottom_attach">3</property>
-			      <property name="y_options"></property>
-			    </packing>
-			  </child>
-			</widget>
-		      </child>
-		    </widget>
-		  </child>
-
-		  <child>
-		    <widget class="GtkLabel" id="labelMoreEncodingSettings">
-		      <property name="visible">True</property>
-		      <property name="label" translatable="yes">&lt;b&gt;More Rate Settings&lt;/b&gt;</property>
-		      <property name="use_underline">False</property>
-		      <property name="use_markup">True</property>
-		      <property name="justify">GTK_JUSTIFY_LEFT</property>
-		      <property name="wrap">False</property>
-		      <property name="selectable">False</property>
-		      <property name="xalign">0.5</property>
-		      <property name="yalign">0.5</property>
-		      <property name="xpad">0</property>
-		      <property name="ypad">0</property>
-		      <property name="ellipsize">PANGO_ELLIPSIZE_NONE</property>
-		      <property name="width_chars">-1</property>
-		      <property name="single_line_mode">False</property>
-		      <property name="angle">0</property>
-		    </widget>
-		    <packing>
-		      <property name="type">label_item</property>
-		    </packing>
-		  </child>
-		</widget>
-		<packing>
-		  <property name="padding">1</property>
-		  <property name="expand">True</property>
-		  <property name="fill">True</property>
-		</packing>
-	      </child>
-	    </widget>
-	    <packing>
-	      <property name="tab_expand">False</property>
-	      <property name="tab_fill">True</property>
-	    </packing>
-	  </child>
-
-	  <child>
-	    <widget class="GtkLabel" id="labelPageRateControl">
-	      <property name="visible">True</property>
-	      <property name="label" translatable="yes">Rate Control</property>
-	      <property name="use_underline">False</property>
-	      <property name="use_markup">False</property>
-	      <property name="justify">GTK_JUSTIFY_LEFT</property>
-	      <property name="wrap">False</property>
-	      <property name="selectable">False</property>
-	      <property name="xalign">0.5</property>
-	      <property name="yalign">0.5</property>
-	      <property name="xpad">0</property>
-	      <property name="ypad">0</property>
-	      <property name="ellipsize">PANGO_ELLIPSIZE_NONE</property>
-	      <property name="width_chars">-1</property>
-	      <property name="single_line_mode">False</property>
-	      <property name="angle">0</property>
-	    </widget>
-	    <packing>
-	      <property name="type">tab</property>
-	    </packing>
-	  </child>
-	</widget>
-	<packing>
-	  <property name="padding">0</property>
-	  <property name="expand">True</property>
-	  <property name="fill">True</property>
-	</packing>
-      </child>
-    </widget>
-  </child>
-</widget>
-
-</glade-interface>
+<?xml version="1.0" standalone="no"?> <!--*- mode: xml -*-->
+<!DOCTYPE glade-interface SYSTEM "http://glade.gnome.org/glade-2.0.dtd">
+
+<glade-interface>
+
+<widget class="GtkDialog" id="dialog1">
+  <property name="visible">True</property>
+  <property name="title" translatable="yes">x264 Configuration</property>
+  <property name="type">GTK_WINDOW_TOPLEVEL</property>
+  <property name="window_position">GTK_WIN_POS_NONE</property>
+  <property name="modal">False</property>
+  <property name="resizable">True</property>
+  <property name="destroy_with_parent">False</property>
+  <property name="decorated">True</property>
+  <property name="skip_taskbar_hint">False</property>
+  <property name="skip_pager_hint">False</property>
+  <property name="type_hint">GDK_WINDOW_TYPE_HINT_DIALOG</property>
+  <property name="gravity">GDK_GRAVITY_NORTH_WEST</property>
+  <property name="focus_on_map">True</property>
+  <property name="has_separator">True</property>
+
+  <child internal-child="vbox">
+    <widget class="GtkVBox" id="dialog-vbox1">
+      <property name="visible">True</property>
+      <property name="homogeneous">False</property>
+      <property name="spacing">0</property>
+
+      <child internal-child="action_area">
+	<widget class="GtkHButtonBox" id="dialog-action_area1">
+	  <property name="visible">True</property>
+	  <property name="layout_style">GTK_BUTTONBOX_END</property>
+
+	  <child>
+	    <widget class="GtkButton" id="buttonResetDaults">
+	      <property name="visible">True</property>
+	      <property name="can_default">True</property>
+	      <property name="can_focus">True</property>
+	      <property name="label" translatable="yes">_Defaults</property>
+	      <property name="use_underline">True</property>
+	      <property name="relief">GTK_RELIEF_NORMAL</property>
+	      <property name="focus_on_click">True</property>
+	      <property name="response_id">0</property>
+	    </widget>
+	  </child>
+
+	  <child>
+	    <widget class="GtkButton" id="cancelbutton1">
+	      <property name="visible">True</property>
+	      <property name="can_default">True</property>
+	      <property name="can_focus">True</property>
+	      <property name="label">gtk-cancel</property>
+	      <property name="use_stock">True</property>
+	      <property name="relief">GTK_RELIEF_NORMAL</property>
+	      <property name="focus_on_click">True</property>
+	      <property name="response_id">-6</property>
+	    </widget>
+	  </child>
+
+	  <child>
+	    <widget class="GtkButton" id="okbutton1">
+	      <property name="visible">True</property>
+	      <property name="can_default">True</property>
+	      <property name="can_focus">True</property>
+	      <property name="label">gtk-ok</property>
+	      <property name="use_stock">True</property>
+	      <property name="relief">GTK_RELIEF_NORMAL</property>
+	      <property name="focus_on_click">True</property>
+	      <property name="response_id">-5</property>
+	    </widget>
+	  </child>
+	</widget>
+	<packing>
+	  <property name="padding">0</property>
+	  <property name="expand">False</property>
+	  <property name="fill">True</property>
+	  <property name="pack_type">GTK_PACK_END</property>
+	</packing>
+      </child>
+
+      <child>
+	<widget class="GtkNotebook" id="notebook1">
+	  <property name="visible">True</property>
+	  <property name="can_focus">True</property>
+	  <property name="show_tabs">True</property>
+	  <property name="show_border">True</property>
+	  <property name="tab_pos">GTK_POS_TOP</property>
+	  <property name="scrollable">False</property>
+	  <property name="enable_popup">False</property>
+
+	  <child>
+	    <widget class="GtkAlignment" id="alignment14">
+	      <property name="visible">True</property>
+	      <property name="xalign">0.5</property>
+	      <property name="yalign">0.5</property>
+	      <property name="xscale">1</property>
+	      <property name="yscale">1</property>
+	      <property name="top_padding">7</property>
+	      <property name="bottom_padding">7</property>
+	      <property name="left_padding">7</property>
+	      <property name="right_padding">7</property>
+
+	      <child>
+		<widget class="GtkTable" id="tableBitrate">
+		  <property name="visible">True</property>
+		  <property name="n_rows">3</property>
+		  <property name="n_columns">2</property>
+		  <property name="homogeneous">False</property>
+		  <property name="row_spacing">3</property>
+		  <property name="column_spacing">10</property>
+
+		  <child>
+		    <widget class="GtkLabel" id="labelEncodingMode">
+		      <property name="visible">True</property>
+		      <property name="label" translatable="yes">Encoding Mode</property>
+		      <property name="use_underline">False</property>
+		      <property name="use_markup">False</property>
+		      <property name="justify">GTK_JUSTIFY_LEFT</property>
+		      <property name="wrap">False</property>
+		      <property name="selectable">False</property>
+		      <property name="xalign">0</property>
+		      <property name="yalign">0.5</property>
+		      <property name="xpad">0</property>
+		      <property name="ypad">0</property>
+		      <property name="ellipsize">PANGO_ELLIPSIZE_NONE</property>
+		      <property name="width_chars">-1</property>
+		      <property name="single_line_mode">False</property>
+		      <property name="angle">0</property>
+		    </widget>
+		    <packing>
+		      <property name="left_attach">0</property>
+		      <property name="right_attach">1</property>
+		      <property name="top_attach">0</property>
+		      <property name="bottom_attach">1</property>
+		      <property name="x_options">fill</property>
+		      <property name="y_options"></property>
+		    </packing>
+		  </child>
+
+		  <child>
+		    <widget class="GtkLabel" id="labelQuantizer">
+		      <property name="visible">True</property>
+		      <property name="label" translatable="yes">Quantizer</property>
+		      <property name="use_underline">False</property>
+		      <property name="use_markup">False</property>
+		      <property name="justify">GTK_JUSTIFY_LEFT</property>
+		      <property name="wrap">False</property>
+		      <property name="selectable">False</property>
+		      <property name="xalign">0</property>
+		      <property name="yalign">0.5</property>
+		      <property name="xpad">0</property>
+		      <property name="ypad">0</property>
+		      <property name="ellipsize">PANGO_ELLIPSIZE_NONE</property>
+		      <property name="width_chars">-1</property>
+		      <property name="single_line_mode">False</property>
+		      <property name="angle">0</property>
+		    </widget>
+		    <packing>
+		      <property name="left_attach">0</property>
+		      <property name="right_attach">1</property>
+		      <property name="top_attach">2</property>
+		      <property name="bottom_attach">3</property>
+		      <property name="x_options">fill</property>
+		      <property name="y_options"></property>
+		    </packing>
+		  </child>
+
+		  <child>
+		    <widget class="GtkLabel" id="labelTarget">
+		      <property name="visible">True</property>
+		      <property name="label" translatable="yes">Target Size</property>
+		      <property name="use_underline">False</property>
+		      <property name="use_markup">False</property>
+		      <property name="justify">GTK_JUSTIFY_LEFT</property>
+		      <property name="wrap">False</property>
+		      <property name="selectable">False</property>
+		      <property name="xalign">0</property>
+		      <property name="yalign">0.5</property>
+		      <property name="xpad">0</property>
+		      <property name="ypad">0</property>
+		      <property name="ellipsize">PANGO_ELLIPSIZE_NONE</property>
+		      <property name="width_chars">-1</property>
+		      <property name="single_line_mode">False</property>
+		      <property name="angle">0</property>
+		    </widget>
+		    <packing>
+		      <property name="left_attach">0</property>
+		      <property name="right_attach">1</property>
+		      <property name="top_attach">1</property>
+		      <property name="bottom_attach">2</property>
+		      <property name="x_options">fill</property>
+		      <property name="y_options"></property>
+		    </packing>
+		  </child>
+
+		  <child>
+		    <widget class="GtkSpinButton" id="spinbuttonQuantizer">
+		      <property name="visible">True</property>
+		      <property name="tooltip" translatable="yes">Constant Quantizer - Each frame will have the same compression. Low numbers equal higher quality while high numbers equal lower quality.</property>
+		      <property name="can_focus">True</property>
+		      <property name="climb_rate">1</property>
+		      <property name="digits">0</property>
+		      <property name="numeric">True</property>
+		      <property name="update_policy">GTK_UPDATE_ALWAYS</property>
+		      <property name="snap_to_ticks">False</property>
+		      <property name="wrap">False</property>
+		      <property name="adjustment">4 0 51 1 10 10</property>
+		    </widget>
+		    <packing>
+		      <property name="left_attach">1</property>
+		      <property name="right_attach">2</property>
+		      <property name="top_attach">2</property>
+		      <property name="bottom_attach">3</property>
+		      <property name="x_options">shrink|fill</property>
+		      <property name="y_options"></property>
+		    </packing>
+		  </child>
+
+		  <child>
+		    <widget class="GtkEntry" id="entryTarget">
+		      <property name="visible">True</property>
+		      <property name="tooltip" translatable="yes">Target bitrate or file size</property>
+		      <property name="can_focus">True</property>
+		      <property name="editable">True</property>
+		      <property name="visibility">True</property>
+		      <property name="max_length">0</property>
+		      <property name="text" translatable="yes"></property>
+		      <property name="has_frame">True</property>
+		      <property name="invisible_char">*</property>
+		      <property name="activates_default">False</property>
+		      <property name="width_chars">4</property>
+		    </widget>
+		    <packing>
+		      <property name="left_attach">1</property>
+		      <property name="right_attach">2</property>
+		      <property name="top_attach">1</property>
+		      <property name="bottom_attach">2</property>
+		      <property name="x_options">shrink|fill</property>
+		      <property name="y_options"></property>
+		    </packing>
+		  </child>
+
+		  <child>
+		    <widget class="GtkComboBox" id="comboboxMode">
+		      <property name="visible">True</property>
+		      <property name="items" translatable="yes">Single Pass - Quality Quantizer (Average)
+Single Pass - Quality Quantizer (Constant)
+Single Pass - Bitrate (Average)
+Two Pass - Video Size
+Two Pass - Average Bitrate</property>
+		      <property name="add_tearoffs">False</property>
+		      <property name="focus_on_click">True</property>
+		    </widget>
+		    <packing>
+		      <property name="left_attach">1</property>
+		      <property name="right_attach">2</property>
+		      <property name="top_attach">0</property>
+		      <property name="bottom_attach">1</property>
+		      <property name="x_options">shrink|fill</property>
+		      <property name="y_options">fill</property>
+		    </packing>
+		  </child>
+		</widget>
+	      </child>
+	    </widget>
+	    <packing>
+	      <property name="tab_expand">False</property>
+	      <property name="tab_fill">True</property>
+	    </packing>
+	  </child>
+
+	  <child>
+	    <widget class="GtkLabel" id="labelPageBitrate">
+	      <property name="visible">True</property>
+	      <property name="label" translatable="yes">Bitrate</property>
+	      <property name="use_underline">False</property>
+	      <property name="use_markup">False</property>
+	      <property name="justify">GTK_JUSTIFY_LEFT</property>
+	      <property name="wrap">False</property>
+	      <property name="selectable">False</property>
+	      <property name="xalign">0</property>
+	      <property name="yalign">0.5</property>
+	      <property name="xpad">0</property>
+	      <property name="ypad">0</property>
+	      <property name="ellipsize">PANGO_ELLIPSIZE_NONE</property>
+	      <property name="width_chars">-1</property>
+	      <property name="single_line_mode">False</property>
+	      <property name="angle">0</property>
+	    </widget>
+	    <packing>
+	      <property name="type">tab</property>
+	    </packing>
+	  </child>
+
+	  <child>
+	    <widget class="GtkAlignment" id="alignment15">
+	      <property name="visible">True</property>
+	      <property name="xalign">0.5</property>
+	      <property name="yalign">0.5</property>
+	      <property name="xscale">1</property>
+	      <property name="yscale">1</property>
+	      <property name="top_padding">7</property>
+	      <property name="bottom_padding">7</property>
+	      <property name="left_padding">7</property>
+	      <property name="right_padding">7</property>
+
+	      <child>
+		<widget class="GtkVBox" id="vbox5">
+		  <property name="visible">True</property>
+		  <property name="homogeneous">False</property>
+		  <property name="spacing">3</property>
+
+		  <child>
+		    <widget class="GtkFrame" id="frame6">
+		      <property name="visible">True</property>
+		      <property name="label_xalign">0</property>
+		      <property name="label_yalign">0.5</property>
+		      <property name="shadow_type">GTK_SHADOW_ETCHED_IN</property>
+
+		      <child>
+			<widget class="GtkAlignment" id="alignment6">
+			  <property name="visible">True</property>
+			  <property name="xalign">0.5</property>
+			  <property name="yalign">0.5</property>
+			  <property name="xscale">1</property>
+			  <property name="yscale">1</property>
+			  <property name="top_padding">7</property>
+			  <property name="bottom_padding">4</property>
+			  <property name="left_padding">7</property>
+			  <property name="right_padding">7</property>
+
+			  <child>
+			    <widget class="GtkVBox" id="vbox6">
+			      <property name="visible">True</property>
+			      <property name="homogeneous">False</property>
+			      <property name="spacing">3</property>
+
+			      <child>
+				<widget class="GtkTable" id="table7">
+				  <property name="visible">True</property>
+				  <property name="n_rows">2</property>
+				  <property name="n_columns">3</property>
+				  <property name="homogeneous">False</property>
+				  <property name="row_spacing">3</property>
+				  <property name="column_spacing">10</property>
+
+				  <child>
+				    <widget class="GtkLabel" id="labelPartitionDecision">
+				      <property name="visible">True</property>
+				      <property name="label" translatable="yes">Partition Decision</property>
+				      <property name="use_underline">False</property>
+				      <property name="use_markup">False</property>
+				      <property name="justify">GTK_JUSTIFY_LEFT</property>
+				      <property name="wrap">False</property>
+				      <property name="selectable">False</property>
+				      <property name="xalign">0</property>
+				      <property name="yalign">0.5</property>
+				      <property name="xpad">0</property>
+				      <property name="ypad">0</property>
+				      <property name="ellipsize">PANGO_ELLIPSIZE_NONE</property>
+				      <property name="width_chars">-1</property>
+				      <property name="single_line_mode">False</property>
+				      <property name="angle">0</property>
+				    </widget>
+				    <packing>
+				      <property name="left_attach">0</property>
+				      <property name="right_attach">1</property>
+				      <property name="top_attach">0</property>
+				      <property name="bottom_attach">1</property>
+				      <property name="x_options">fill</property>
+				      <property name="y_options"></property>
+				    </packing>
+				  </child>
+
+				  <child>
+				    <widget class="GtkLabel" id="labelMethod">
+				      <property name="visible">True</property>
+				      <property name="label" translatable="yes">Method</property>
+				      <property name="use_underline">False</property>
+				      <property name="use_markup">False</property>
+				      <property name="justify">GTK_JUSTIFY_LEFT</property>
+				      <property name="wrap">False</property>
+				      <property name="selectable">False</property>
+				      <property name="xalign">0</property>
+				      <property name="yalign">0.5</property>
+				      <property name="xpad">0</property>
+				      <property name="ypad">0</property>
+				      <property name="ellipsize">PANGO_ELLIPSIZE_NONE</property>
+				      <property name="width_chars">-1</property>
+				      <property name="single_line_mode">False</property>
+				      <property name="angle">0</property>
+				    </widget>
+				    <packing>
+				      <property name="left_attach">0</property>
+				      <property name="right_attach">1</property>
+				      <property name="top_attach">1</property>
+				      <property name="bottom_attach">2</property>
+				      <property name="x_options">fill</property>
+				      <property name="y_options"></property>
+				    </packing>
+				  </child>
+
+				  <child>
+				    <widget class="GtkComboBox" id="comboboxPartitionDecision">
+				      <property name="visible">True</property>
+				      <property name="items" translatable="yes">1  - Extremely Low (Fastest)
+2  - Very Low
+3  - Low
+4  - Medium
+5  - High (Default)
+6  - Very High
+6B - Very High (RDO on B-frames)
+7  - Ultra High
+7B - Ultra High (RDO on B-frames)
+</property>
+				      <property name="add_tearoffs">False</property>
+				      <property name="focus_on_click">True</property>
+				    </widget>
+				    <packing>
+				      <property name="left_attach">1</property>
+				      <property name="right_attach">3</property>
+				      <property name="top_attach">0</property>
+				      <property name="bottom_attach">1</property>
+				      <property name="x_options">fill</property>
+				      <property name="y_options">fill</property>
+				    </packing>
+				  </child>
+
+				  <child>
+				    <widget class="GtkComboBox" id="comboboxMethod">
+				      <property name="visible">True</property>
+				      <property name="items" translatable="yes">Diamond Search
+Hexagonal Search
+Uneven Multi-hexagon
+Exhaustive Search</property>
+				      <property name="add_tearoffs">False</property>
+				      <property name="focus_on_click">True</property>
+				    </widget>
+				    <packing>
+				      <property name="left_attach">1</property>
+				      <property name="right_attach">3</property>
+				      <property name="top_attach">1</property>
+				      <property name="bottom_attach">2</property>
+				      <property name="x_options">fill</property>
+				      <property name="y_options">fill</property>
+				    </packing>
+				  </child>
+				</widget>
+				<packing>
+				  <property name="padding">0</property>
+				  <property name="expand">False</property>
+				  <property name="fill">True</property>
+				</packing>
+			      </child>
+
+			      <child>
+				<widget class="GtkTable" id="table11">
+				  <property name="visible">True</property>
+				  <property name="n_rows">2</property>
+				  <property name="n_columns">3</property>
+				  <property name="homogeneous">False</property>
+				  <property name="row_spacing">3</property>
+				  <property name="column_spacing">10</property>
+
+				  <child>
+				    <widget class="GtkLabel" id="labelMaxRefFrames">
+				      <property name="visible">True</property>
+				      <property name="label" translatable="yes">Max. Ref. Frames</property>
+				      <property name="use_underline">False</property>
+				      <property name="use_markup">False</property>
+				      <property name="justify">GTK_JUSTIFY_LEFT</property>
+				      <property name="wrap">False</property>
+				      <property name="selectable">False</property>
+				      <property name="xalign">0</property>
+				      <property name="yalign">0.5</property>
+				      <property name="xpad">0</property>
+				      <property name="ypad">0</property>
+				      <property name="ellipsize">PANGO_ELLIPSIZE_NONE</property>
+				      <property name="width_chars">-1</property>
+				      <property name="single_line_mode">False</property>
+				      <property name="angle">0</property>
+				    </widget>
+				    <packing>
+				      <property name="left_attach">0</property>
+				      <property name="right_attach">1</property>
+				      <property name="top_attach">1</property>
+				      <property name="bottom_attach">2</property>
+				      <property name="x_options">fill</property>
+				      <property name="y_options"></property>
+				    </packing>
+				  </child>
+
+				  <child>
+				    <widget class="GtkLabel" id="labelRange">
+				      <property name="visible">True</property>
+				      <property name="label" translatable="yes">Range</property>
+				      <property name="use_underline">False</property>
+				      <property name="use_markup">False</property>
+				      <property name="justify">GTK_JUSTIFY_LEFT</property>
+				      <property name="wrap">False</property>
+				      <property name="selectable">False</property>
+				      <property name="xalign">0</property>
+				      <property name="yalign">0.5</property>
+				      <property name="xpad">0</property>
+				      <property name="ypad">0</property>
+				      <property name="ellipsize">PANGO_ELLIPSIZE_NONE</property>
+				      <property name="width_chars">-1</property>
+				      <property name="single_line_mode">False</property>
+				      <property name="angle">0</property>
+				    </widget>
+				    <packing>
+				      <property name="left_attach">0</property>
+				      <property name="right_attach">1</property>
+				      <property name="top_attach">0</property>
+				      <property name="bottom_attach">1</property>
+				      <property name="x_options">fill</property>
+				      <property name="y_options"></property>
+				    </packing>
+				  </child>
+
+				  <child>
+				    <widget class="GtkSpinButton" id="spinbuttonRange">
+				      <property name="visible">True</property>
+				      <property name="tooltip" translatable="yes">Define how many pixels are analysed for motion estimation. The higher the range the more accurate the analysis but the slower the encoding time.</property>
+				      <property name="can_focus">True</property>
+				      <property name="climb_rate">1</property>
+				      <property name="digits">0</property>
+				      <property name="numeric">True</property>
+				      <property name="update_policy">GTK_UPDATE_ALWAYS</property>
+				      <property name="snap_to_ticks">False</property>
+				      <property name="wrap">False</property>
+				      <property name="adjustment">17 0 64 1 10 10</property>
+				    </widget>
+				    <packing>
+				      <property name="left_attach">1</property>
+				      <property name="right_attach">2</property>
+				      <property name="top_attach">0</property>
+				      <property name="bottom_attach">1</property>
+				      <property name="x_options">shrink|fill</property>
+				      <property name="y_options"></property>
+				    </packing>
+				  </child>
+
+				  <child>
+				    <widget class="GtkSpinButton" id="spinbuttonMaxRefFrames">
+				      <property name="visible">True</property>
+				      <property name="tooltip" translatable="yes">Set how many previous frames can be referenced by a P/B-frame. Numbers above 5 do not seem to improve quality greatly. Numbers 3 to 5 are recommended.</property>
+				      <property name="can_focus">True</property>
+				      <property name="climb_rate">1</property>
+				      <property name="digits">0</property>
+				      <property name="numeric">True</property>
+				      <property name="update_policy">GTK_UPDATE_ALWAYS</property>
+				      <property name="snap_to_ticks">False</property>
+				      <property name="wrap">False</property>
+				      <property name="adjustment">1 0 16 1 10 10</property>
+				    </widget>
+				    <packing>
+				      <property name="left_attach">1</property>
+				      <property name="right_attach">2</property>
+				      <property name="top_attach">1</property>
+				      <property name="bottom_attach">2</property>
+				      <property name="x_options">shrink|fill</property>
+				      <property name="y_options"></property>
+				    </packing>
+				  </child>
+
+				  <child>
+				    <widget class="GtkCheckButton" id="checkbuttonChromaME">
+				      <property name="visible">True</property>
+				      <property name="tooltip" translatable="yes">Use color information for detecting motion to improve quality</property>
+				      <property name="can_focus">True</property>
+				      <property name="label" translatable="yes">Chroma ME</property>
+				      <property name="use_underline">True</property>
+				      <property name="relief">GTK_RELIEF_NORMAL</property>
+				      <property name="focus_on_click">True</property>
+				      <property name="active">True</property>
+				      <property name="inconsistent">False</property>
+				      <property name="draw_indicator">True</property>
+				    </widget>
+				    <packing>
+				      <property name="left_attach">2</property>
+				      <property name="right_attach">3</property>
+				      <property name="top_attach">0</property>
+				      <property name="bottom_attach">1</property>
+				      <property name="x_padding">30</property>
+				      <property name="x_options">fill</property>
+				      <property name="y_options"></property>
+				    </packing>
+				  </child>
+
+				  <child>
+				    <widget class="GtkCheckButton" id="checkbuttonMixedRefs">
+				      <property name="visible">True</property>
+				      <property name="tooltip" translatable="yes">Calculate referencing individually based on each partition</property>
+				      <property name="can_focus">True</property>
+				      <property name="label" translatable="yes">Mixed Refs</property>
+				      <property name="use_underline">True</property>
+				      <property name="relief">GTK_RELIEF_NORMAL</property>
+				      <property name="focus_on_click">True</property>
+				      <property name="active">False</property>
+				      <property name="inconsistent">False</property>
+				      <property name="draw_indicator">True</property>
+				    </widget>
+				    <packing>
+				      <property name="left_attach">2</property>
+				      <property name="right_attach">3</property>
+				      <property name="top_attach">1</property>
+				      <property name="bottom_attach">2</property>
+				      <property name="x_padding">30</property>
+				      <property name="x_options">fill</property>
+				      <property name="y_options"></property>
+				    </packing>
+				  </child>
+				</widget>
+				<packing>
+				  <property name="padding">0</property>
+				  <property name="expand">True</property>
+				  <property name="fill">False</property>
+				</packing>
+			      </child>
+
+			      <child>
+				<widget class="GtkHBox" id="hbox8">
+				  <property name="visible">True</property>
+				  <property name="homogeneous">True</property>
+				  <property name="spacing">0</property>
+
+				  <child>
+				    <widget class="GtkCheckButton" id="checkbuttonfastPSkip">
+				      <property name="visible">True</property>
+				      <property name="tooltip" translatable="yes">Early skip detection on P-frames to speedup encoding. Quality will be slightly reduced.</property>
+				      <property name="can_focus">True</property>
+				      <property name="label" translatable="yes">Fast P-Skip</property>
+				      <property name="use_underline">True</property>
+				      <property name="relief">GTK_RELIEF_NORMAL</property>
+				      <property name="focus_on_click">True</property>
+				      <property name="active">True</property>
+				      <property name="inconsistent">False</property>
+				      <property name="draw_indicator">True</property>
+				    </widget>
+				    <packing>
+				      <property name="padding">0</property>
+				      <property name="expand">False</property>
+				      <property name="fill">False</property>
+				    </packing>
+				  </child>
+
+				  <child>
+				    <widget class="GtkCheckButton" id="checkbuttonDCTDecimate">
+				      <property name="visible">True</property>
+				      <property name="can_focus">True</property>
+				      <property name="label" translatable="yes">DCT Decimate</property>
+				      <property name="use_underline">True</property>
+				      <property name="relief">GTK_RELIEF_NORMAL</property>
+				      <property name="focus_on_click">True</property>
+				      <property name="active">True</property>
+				      <property name="inconsistent">False</property>
+				      <property name="draw_indicator">True</property>
+				    </widget>
+				    <packing>
+				      <property name="padding">0</property>
+				      <property name="expand">False</property>
+				      <property name="fill">False</property>
+				    </packing>
+				  </child>
+
+				  <child>
+				    <widget class="GtkCheckButton" id="checkbuttoninterlaced">
+				      <property name="visible">True</property>
+				      <property name="tooltip" translatable="yes">Input video is interlaced</property>
+				      <property name="can_focus">True</property>
+				      <property name="label" translatable="yes">Interlaced</property>
+				      <property name="use_underline">True</property>
+				      <property name="relief">GTK_RELIEF_NORMAL</property>
+				      <property name="focus_on_click">True</property>
+				      <property name="active">False</property>
+				      <property name="inconsistent">False</property>
+				      <property name="draw_indicator">True</property>
+				    </widget>
+				    <packing>
+				      <property name="padding">0</property>
+				      <property name="expand">False</property>
+				      <property name="fill">False</property>
+				    </packing>
+				  </child>
+				</widget>
+				<packing>
+				  <property name="padding">0</property>
+				  <property name="expand">True</property>
+				  <property name="fill">True</property>
+				</packing>
+			      </child>
+			    </widget>
+			  </child>
+			</widget>
+		      </child>
+
+		      <child>
+			<widget class="GtkLabel" id="label24">
+			  <property name="visible">True</property>
+			  <property name="label" translatable="yes">&lt;b&gt;Motion Estimation&lt;/b&gt;</property>
+			  <property name="use_underline">False</property>
+			  <property name="use_markup">True</property>
+			  <property name="justify">GTK_JUSTIFY_LEFT</property>
+			  <property name="wrap">False</property>
+			  <property name="selectable">False</property>
+			  <property name="xalign">0.5</property>
+			  <property name="yalign">0.5</property>
+			  <property name="xpad">0</property>
+			  <property name="ypad">0</property>
+			  <property name="ellipsize">PANGO_ELLIPSIZE_NONE</property>
+			  <property name="width_chars">-1</property>
+			  <property name="single_line_mode">False</property>
+			  <property name="angle">0</property>
+			</widget>
+			<packing>
+			  <property name="type">label_item</property>
+			</packing>
+		      </child>
+		    </widget>
+		    <packing>
+		      <property name="padding">0</property>
+		      <property name="expand">False</property>
+		      <property name="fill">True</property>
+		    </packing>
+		  </child>
+
+		  <child>
+		    <widget class="GtkFrame" id="frameSampleAR">
+		      <property name="visible">True</property>
+		      <property name="label_xalign">0</property>
+		      <property name="label_yalign">0.5</property>
+		      <property name="shadow_type">GTK_SHADOW_ETCHED_IN</property>
+
+		      <child>
+			<widget class="GtkAlignment" id="alignment12">
+			  <property name="visible">True</property>
+			  <property name="xalign">0.5</property>
+			  <property name="yalign">0.5</property>
+			  <property name="xscale">1</property>
+			  <property name="yscale">1</property>
+			  <property name="top_padding">7</property>
+			  <property name="bottom_padding">7</property>
+			  <property name="left_padding">7</property>
+			  <property name="right_padding">7</property>
+
+			  <child>
+			    <widget class="GtkTable" id="table35">
+			      <property name="visible">True</property>
+			      <property name="n_rows">3</property>
+			      <property name="n_columns">2</property>
+			      <property name="homogeneous">False</property>
+			      <property name="row_spacing">3</property>
+			      <property name="column_spacing">10</property>
+
+			      <child>
+				<widget class="GtkHBox" id="hbox12">
+				  <property name="visible">True</property>
+				  <property name="homogeneous">False</property>
+				  <property name="spacing">0</property>
+
+				  <child>
+				    <widget class="GtkEntry" id="entryAR_Num">
+				      <property name="visible">True</property>
+				      <property name="tooltip" translatable="yes">Enforce the size of a decoded pixel decoded to a certain value. Set this to 1:1 for non-anamorphic video.</property>
+				      <property name="can_focus">True</property>
+				      <property name="editable">True</property>
+				      <property name="visibility">True</property>
+				      <property name="max_length">0</property>
+				      <property name="text" translatable="yes">1</property>
+				      <property name="has_frame">True</property>
+				      <property name="invisible_char">*</property>
+				      <property name="activates_default">False</property>
+				      <property name="width_chars">4</property>
+				    </widget>
+				    <packing>
+				      <property name="padding">0</property>
+				      <property name="expand">True</property>
+				      <property name="fill">True</property>
+				    </packing>
+				  </child>
+
+				  <child>
+				    <widget class="GtkLabel" id="label53">
+				      <property name="visible">True</property>
+				      <property name="label" translatable="yes">:</property>
+				      <property name="use_underline">False</property>
+				      <property name="use_markup">False</property>
+				      <property name="justify">GTK_JUSTIFY_LEFT</property>
+				      <property name="wrap">False</property>
+				      <property name="selectable">False</property>
+				      <property name="xalign">0.5</property>
+				      <property name="yalign">0.5</property>
+				      <property name="xpad">0</property>
+				      <property name="ypad">0</property>
+				      <property name="ellipsize">PANGO_ELLIPSIZE_NONE</property>
+				      <property name="width_chars">-1</property>
+				      <property name="single_line_mode">False</property>
+				      <property name="angle">0</property>
+				    </widget>
+				    <packing>
+				      <property name="padding">3</property>
+				      <property name="expand">False</property>
+				      <property name="fill">False</property>
+				    </packing>
+				  </child>
+
+				  <child>
+				    <widget class="GtkEntry" id="entryAR_Den">
+				      <property name="visible">True</property>
+				      <property name="tooltip" translatable="yes">Enforce the size of a decoded pixel decoded to a certain value. Set this to 1:1 for non-anamorphic video.</property>
+				      <property name="can_focus">True</property>
+				      <property name="editable">True</property>
+				      <property name="visibility">True</property>
+				      <property name="max_length">0</property>
+				      <property name="text" translatable="yes">1</property>
+				      <property name="has_frame">True</property>
+				      <property name="invisible_char">*</property>
+				      <property name="activates_default">False</property>
+				      <property name="width_chars">4</property>
+				    </widget>
+				    <packing>
+				      <property name="padding">0</property>
+				      <property name="expand">True</property>
+				      <property name="fill">True</property>
+				    </packing>
+				  </child>
+				</widget>
+				<packing>
+				  <property name="left_attach">1</property>
+				  <property name="right_attach">2</property>
+				  <property name="top_attach">1</property>
+				  <property name="bottom_attach">2</property>
+				  <property name="x_options">fill</property>
+				  <property name="y_options">fill</property>
+				</packing>
+			      </child>
+
+			      <child>
+				<widget class="GtkRadioButton" id="radiobuttonCustomAR">
+				  <property name="visible">True</property>
+				  <property name="tooltip" translatable="yes">Set a custom aspect ratio. The default 1:1 is recommended for most video.</property>
+				  <property name="can_focus">True</property>
+				  <property name="label" translatable="yes">Custom</property>
+				  <property name="use_underline">True</property>
+				  <property name="relief">GTK_RELIEF_NORMAL</property>
+				  <property name="focus_on_click">True</property>
+				  <property name="active">True</property>
+				  <property name="inconsistent">False</property>
+				  <property name="draw_indicator">True</property>
+				</widget>
+				<packing>
+				  <property name="left_attach">0</property>
+				  <property name="right_attach">1</property>
+				  <property name="top_attach">1</property>
+				  <property name="bottom_attach">2</property>
+				  <property name="x_options">fill</property>
+				  <property name="y_options"></property>
+				</packing>
+			      </child>
+
+			      <child>
+				<widget class="GtkRadioButton" id="radiobuttonPredefinedAR">
+				  <property name="visible">True</property>
+				  <property name="tooltip" translatable="yes">Set a common predefined aspect ratio</property>
+				  <property name="can_focus">True</property>
+				  <property name="label" translatable="yes">Predefined Aspect Ratio</property>
+				  <property name="use_underline">True</property>
+				  <property name="relief">GTK_RELIEF_NORMAL</property>
+				  <property name="focus_on_click">True</property>
+				  <property name="active">False</property>
+				  <property name="inconsistent">False</property>
+				  <property name="draw_indicator">True</property>
+				  <property name="group">radiobuttonCustomAR</property>
+				</widget>
+				<packing>
+				  <property name="left_attach">0</property>
+				  <property name="right_attach">1</property>
+				  <property name="top_attach">0</property>
+				  <property name="bottom_attach">1</property>
+				  <property name="x_options">fill</property>
+				  <property name="y_options"></property>
+				</packing>
+			      </child>
+
+			      <child>
+				<widget class="GtkRadioButton" id="radiobuttonAsInputAR">
+				  <property name="visible">True</property>
+				  <property name="can_focus">True</property>
+				  <property name="label" translatable="yes">As Input</property>
+				  <property name="use_underline">True</property>
+				  <property name="relief">GTK_RELIEF_NORMAL</property>
+				  <property name="focus_on_click">True</property>
+				  <property name="active">False</property>
+				  <property name="inconsistent">False</property>
+				  <property name="draw_indicator">True</property>
+				  <property name="group">radiobuttonCustomAR</property>
+				</widget>
+				<packing>
+				  <property name="left_attach">0</property>
+				  <property name="right_attach">1</property>
+				  <property name="top_attach">2</property>
+				  <property name="bottom_attach">3</property>
+				  <property name="x_options">fill</property>
+				  <property name="y_options"></property>
+				</packing>
+			      </child>
+
+			      <child>
+				<widget class="GtkLabel" id="label40">
+				  <property name="visible">True</property>
+				  <property name="label">1:1 (1:1)</property>
+				  <property name="use_underline">False</property>
+				  <property name="use_markup">False</property>
+				  <property name="justify">GTK_JUSTIFY_LEFT</property>
+				  <property name="wrap">False</property>
+				  <property name="selectable">False</property>
+				  <property name="xalign">0</property>
+				  <property name="yalign">0.5</property>
+				  <property name="xpad">0</property>
+				  <property name="ypad">0</property>
+				  <property name="ellipsize">PANGO_ELLIPSIZE_NONE</property>
+				  <property name="width_chars">-1</property>
+				  <property name="single_line_mode">False</property>
+				  <property name="angle">0</property>
+				</widget>
+				<packing>
+				  <property name="left_attach">1</property>
+				  <property name="right_attach">2</property>
+				  <property name="top_attach">2</property>
+				  <property name="bottom_attach">3</property>
+				  <property name="x_options"></property>
+				  <property name="y_options"></property>
+				</packing>
+			      </child>
+
+			      <child>
+				<widget class="GtkComboBox" id="comboboxentry1">
+				  <property name="visible">True</property>
+				  <property name="add_tearoffs">False</property>
+				  <property name="focus_on_click">True</property>
+				</widget>
+				<packing>
+				  <property name="left_attach">1</property>
+				  <property name="right_attach">2</property>
+				  <property name="top_attach">0</property>
+				  <property name="bottom_attach">1</property>
+				  <property name="x_options">fill</property>
+				  <property name="y_options">fill</property>
+				</packing>
+			      </child>
+			    </widget>
+			  </child>
+			</widget>
+		      </child>
+
+		      <child>
+			<widget class="GtkLabel" id="label39">
+			  <property name="visible">True</property>
+			  <property name="label" translatable="yes">&lt;b&gt;Sample Aspect Ratio&lt;/b&gt;</property>
+			  <property name="use_underline">False</property>
+			  <property name="use_markup">True</property>
+			  <property name="justify">GTK_JUSTIFY_LEFT</property>
+			  <property name="wrap">False</property>
+			  <property name="selectable">False</property>
+			  <property name="xalign">0.5</property>
+			  <property name="yalign">0.5</property>
+			  <property name="xpad">0</property>
+			  <property name="ypad">0</property>
+			  <property name="ellipsize">PANGO_ELLIPSIZE_NONE</property>
+			  <property name="width_chars">-1</property>
+			  <property name="single_line_mode">False</property>
+			  <property name="angle">0</property>
+			</widget>
+			<packing>
+			  <property name="type">label_item</property>
+			</packing>
+		      </child>
+		    </widget>
+		    <packing>
+		      <property name="padding">0</property>
+		      <property name="expand">False</property>
+		      <property name="fill">True</property>
+		    </packing>
+		  </child>
+
+		  <child>
+		    <widget class="GtkFrame" id="frame7">
+		      <property name="visible">True</property>
+		      <property name="label_xalign">0</property>
+		      <property name="label_yalign">0.5</property>
+		      <property name="shadow_type">GTK_SHADOW_ETCHED_IN</property>
+
+		      <child>
+			<widget class="GtkAlignment" id="alignment7">
+			  <property name="visible">True</property>
+			  <property name="xalign">0.5</property>
+			  <property name="yalign">0.5</property>
+			  <property name="xscale">1</property>
+			  <property name="yscale">1</property>
+			  <property name="top_padding">7</property>
+			  <property name="bottom_padding">7</property>
+			  <property name="left_padding">7</property>
+			  <property name="right_padding">7</property>
+
+			  <child>
+			    <widget class="GtkVBox" id="vbox7">
+			      <property name="visible">True</property>
+			      <property name="homogeneous">False</property>
+			      <property name="spacing">3</property>
+
+			      <child>
+				<widget class="GtkAlignment" id="alignment21">
+				  <property name="visible">True</property>
+				  <property name="xalign">0.5</property>
+				  <property name="yalign">0.5</property>
+				  <property name="xscale">1</property>
+				  <property name="yscale">1</property>
+				  <property name="top_padding">0</property>
+				  <property name="bottom_padding">3</property>
+				  <property name="left_padding">0</property>
+				  <property name="right_padding">0</property>
+
+				  <child>
+				    <widget class="GtkHBox" id="hbox2">
+				      <property name="visible">True</property>
+				      <property name="homogeneous">False</property>
+				      <property name="spacing">17</property>
+
+				      <child>
+					<widget class="GtkCheckButton" id="checkbuttonCABAC">
+					  <property name="visible">True</property>
+					  <property name="tooltip" translatable="yes">Lossless compression technique that reduces bitrate by approximately 10%. Increases encoding and decoding time.</property>
+					  <property name="can_focus">True</property>
+					  <property name="label" translatable="yes">CABAC</property>
+					  <property name="use_underline">True</property>
+					  <property name="relief">GTK_RELIEF_NORMAL</property>
+					  <property name="focus_on_click">True</property>
+					  <property name="active">True</property>
+					  <property name="inconsistent">False</property>
+					  <property name="draw_indicator">True</property>
+					</widget>
+					<packing>
+					  <property name="padding">0</property>
+					  <property name="expand">False</property>
+					  <property name="fill">False</property>
+					</packing>
+				      </child>
+
+				      <child>
+					<widget class="GtkHBox" id="hbox7">
+					  <property name="visible">True</property>
+					  <property name="homogeneous">False</property>
+					  <property name="spacing">10</property>
+
+					  <child>
+					    <widget class="GtkLabel" id="labelTrellis">
+					      <property name="visible">True</property>
+					      <property name="label" translatable="yes">Trellis</property>
+					      <property name="use_underline">False</property>
+					      <property name="use_markup">False</property>
+					      <property name="justify">GTK_JUSTIFY_LEFT</property>
+					      <property name="wrap">False</property>
+					      <property name="selectable">False</property>
+					      <property name="xalign">0</property>
+					      <property name="yalign">0.5</property>
+					      <property name="xpad">0</property>
+					      <property name="ypad">0</property>
+					      <property name="ellipsize">PANGO_ELLIPSIZE_NONE</property>
+					      <property name="width_chars">-1</property>
+					      <property name="single_line_mode">False</property>
+					      <property name="angle">0</property>
+					    </widget>
+					    <packing>
+					      <property name="padding">0</property>
+					      <property name="expand">False</property>
+					      <property name="fill">False</property>
+					    </packing>
+					  </child>
+
+					  <child>
+					    <widget class="GtkSpinButton" id="spinbuttonTrellis">
+					      <property name="visible">True</property>
+					      <property name="tooltip" translatable="yes">Use Trellis Rate Distortion Optimisation to find optimal encoding for each block. Level 0 equals disabled, level 1 equals normal and level 2 equals high.</property>
+					      <property name="can_focus">True</property>
+					      <property name="climb_rate">1</property>
+					      <property name="digits">0</property>
+					      <property name="numeric">True</property>
+					      <property name="update_policy">GTK_UPDATE_ALWAYS</property>
+					      <property name="snap_to_ticks">False</property>
+					      <property name="wrap">False</property>
+					      <property name="adjustment">0 0 2 1 10 10</property>
+					    </widget>
+					    <packing>
+					      <property name="padding">0</property>
+					      <property name="expand">False</property>
+					      <property name="fill">False</property>
+					    </packing>
+					  </child>
+					</widget>
+					<packing>
+					  <property name="padding">0</property>
+					  <property name="expand">False</property>
+					  <property name="fill">False</property>
+					</packing>
+				      </child>
+
+				      <child>
+					<widget class="GtkHBox" id="hbox11">
+					  <property name="visible">True</property>
+					  <property name="homogeneous">False</property>
+					  <property name="spacing">10</property>
+
+					  <child>
+					    <widget class="GtkLabel" id="labelNoiseReduction">
+					      <property name="visible">True</property>
+					      <property name="label" translatable="yes">Noise Reduction</property>
+					      <property name="use_underline">False</property>
+					      <property name="use_markup">False</property>
+					      <property name="justify">GTK_JUSTIFY_LEFT</property>
+					      <property name="wrap">False</property>
+					      <property name="selectable">False</property>
+					      <property name="xalign">0</property>
+					      <property name="yalign">0.5</property>
+					      <property name="xpad">0</property>
+					      <property name="ypad">0</property>
+					      <property name="ellipsize">PANGO_ELLIPSIZE_NONE</property>
+					      <property name="width_chars">-1</property>
+					      <property name="single_line_mode">False</property>
+					      <property name="angle">0</property>
+					    </widget>
+					    <packing>
+					      <property name="padding">0</property>
+					      <property name="expand">False</property>
+					      <property name="fill">False</property>
+					    </packing>
+					  </child>
+
+					  <child>
+					    <widget class="GtkSpinButton" id="spinbuttonNoiseReduction">
+					      <property name="visible">True</property>
+					      <property name="tooltip" translatable="yes">Set the amount of noise reduction</property>
+					      <property name="can_focus">True</property>
+					      <property name="climb_rate">1</property>
+					      <property name="digits">0</property>
+					      <property name="numeric">True</property>
+					      <property name="update_policy">GTK_UPDATE_ALWAYS</property>
+					      <property name="snap_to_ticks">False</property>
+					      <property name="wrap">False</property>
+					      <property name="adjustment">0 0 1000000000 1 10 10</property>
+					    </widget>
+					    <packing>
+					      <property name="padding">0</property>
+					      <property name="expand">False</property>
+					      <property name="fill">False</property>
+					    </packing>
+					  </child>
+					</widget>
+					<packing>
+					  <property name="padding">2</property>
+					  <property name="expand">False</property>
+					  <property name="fill">False</property>
+					</packing>
+				      </child>
+				    </widget>
+				  </child>
+				</widget>
+				<packing>
+				  <property name="padding">0</property>
+				  <property name="expand">True</property>
+				  <property name="fill">True</property>
+				</packing>
+			      </child>
+
+			      <child>
+				<widget class="GtkHBox" id="hbox3">
+				  <property name="visible">True</property>
+				  <property name="homogeneous">False</property>
+				  <property name="spacing">10</property>
+
+				  <child>
+				    <widget class="GtkCheckButton" id="checkbuttonDeblockingFilter">
+				      <property name="visible">True</property>
+				      <property name="tooltip" translatable="yes">Enable in-loop deblocking to filter the video</property>
+				      <property name="can_focus">True</property>
+				      <property name="label" translatable="yes">Deblocking Filter</property>
+				      <property name="use_underline">True</property>
+				      <property name="relief">GTK_RELIEF_NORMAL</property>
+				      <property name="focus_on_click">True</property>
+				      <property name="active">True</property>
+				      <property name="inconsistent">False</property>
+				      <property name="draw_indicator">True</property>
+				    </widget>
+				    <packing>
+				      <property name="padding">0</property>
+				      <property name="expand">False</property>
+				      <property name="fill">False</property>
+				    </packing>
+				  </child>
+
+				  <child>
+				    <widget class="GtkTable" id="table8">
+				      <property name="visible">True</property>
+				      <property name="n_rows">2</property>
+				      <property name="n_columns">2</property>
+				      <property name="homogeneous">False</property>
+				      <property name="row_spacing">3</property>
+				      <property name="column_spacing">10</property>
+
+				      <child>
+					<widget class="GtkLabel" id="labelThreshold">
+					  <property name="visible">True</property>
+					  <property name="label" translatable="yes">Threshold</property>
+					  <property name="use_underline">False</property>
+					  <property name="use_markup">True</property>
+					  <property name="justify">GTK_JUSTIFY_LEFT</property>
+					  <property name="wrap">False</property>
+					  <property name="selectable">False</property>
+					  <property name="xalign">0</property>
+					  <property name="yalign">0.5</property>
+					  <property name="xpad">0</property>
+					  <property name="ypad">0</property>
+					  <property name="ellipsize">PANGO_ELLIPSIZE_NONE</property>
+					  <property name="width_chars">-1</property>
+					  <property name="single_line_mode">False</property>
+					  <property name="angle">0</property>
+					</widget>
+					<packing>
+					  <property name="left_attach">0</property>
+					  <property name="right_attach">1</property>
+					  <property name="top_attach">1</property>
+					  <property name="bottom_attach">2</property>
+					  <property name="x_options">fill</property>
+					  <property name="y_options"></property>
+					</packing>
+				      </child>
+
+				      <child>
+					<widget class="GtkLabel" id="labelStrength">
+					  <property name="visible">True</property>
+					  <property name="label" translatable="yes">Strength</property>
+					  <property name="use_underline">False</property>
+					  <property name="use_markup">True</property>
+					  <property name="justify">GTK_JUSTIFY_LEFT</property>
+					  <property name="wrap">False</property>
+					  <property name="selectable">False</property>
+					  <property name="xalign">0</property>
+					  <property name="yalign">0.5</property>
+					  <property name="xpad">0</property>
+					  <property name="ypad">0</property>
+					  <property name="ellipsize">PANGO_ELLIPSIZE_NONE</property>
+					  <property name="width_chars">-1</property>
+					  <property name="single_line_mode">False</property>
+					  <property name="angle">0</property>
+					</widget>
+					<packing>
+					  <property name="left_attach">0</property>
+					  <property name="right_attach">1</property>
+					  <property name="top_attach">0</property>
+					  <property name="bottom_attach">1</property>
+					  <property name="x_options">fill</property>
+					  <property name="y_options"></property>
+					</packing>
+				      </child>
+
+				      <child>
+					<widget class="GtkSpinButton" id="spinbuttonThreshold">
+					  <property name="visible">True</property>
+					  <property name="tooltip" translatable="yes">Threshold for block detection. Positive values will detect more blocks, negative values will detect less.</property>
+					  <property name="can_focus">True</property>
+					  <property name="climb_rate">1</property>
+					  <property name="digits">0</property>
+					  <property name="numeric">True</property>
+					  <property name="update_policy">GTK_UPDATE_ALWAYS</property>
+					  <property name="snap_to_ticks">False</property>
+					  <property name="wrap">False</property>
+					  <property name="adjustment">0 -6 6 1 10 10</property>
+					</widget>
+					<packing>
+					  <property name="left_attach">1</property>
+					  <property name="right_attach">2</property>
+					  <property name="top_attach">1</property>
+					  <property name="bottom_attach">2</property>
+					  <property name="x_options">fill</property>
+					  <property name="y_options"></property>
+					</packing>
+				      </child>
+
+				      <child>
+					<widget class="GtkSpinButton" id="spinbuttonStrength">
+					  <property name="visible">True</property>
+					  <property name="tooltip" translatable="yes">Positive values will soften the video, negative values will sharpen</property>
+					  <property name="can_focus">True</property>
+					  <property name="climb_rate">1</property>
+					  <property name="digits">0</property>
+					  <property name="numeric">True</property>
+					  <property name="update_policy">GTK_UPDATE_ALWAYS</property>
+					  <property name="snap_to_ticks">False</property>
+					  <property name="wrap">False</property>
+					  <property name="adjustment">0 -6 6 1 10 10</property>
+					</widget>
+					<packing>
+					  <property name="left_attach">1</property>
+					  <property name="right_attach">2</property>
+					  <property name="top_attach">0</property>
+					  <property name="bottom_attach">1</property>
+					  <property name="x_options">fill</property>
+					  <property name="y_options"></property>
+					</packing>
+				      </child>
+				    </widget>
+				    <packing>
+				      <property name="padding">0</property>
+				      <property name="expand">True</property>
+				      <property name="fill">True</property>
+				    </packing>
+				  </child>
+				</widget>
+				<packing>
+				  <property name="padding">0</property>
+				  <property name="expand">True</property>
+				  <property name="fill">True</property>
+				</packing>
+			      </child>
+			    </widget>
+			  </child>
+			</widget>
+		      </child>
+
+		      <child>
+			<widget class="GtkLabel" id="label25">
+			  <property name="visible">True</property>
+			  <property name="label" translatable="yes">&lt;b&gt;Misc. Options&lt;/b&gt;</property>
+			  <property name="use_underline">False</property>
+			  <property name="use_markup">True</property>
+			  <property name="justify">GTK_JUSTIFY_LEFT</property>
+			  <property name="wrap">False</property>
+			  <property name="selectable">False</property>
+			  <property name="xalign">0.5</property>
+			  <property name="yalign">0.5</property>
+			  <property name="xpad">0</property>
+			  <property name="ypad">0</property>
+			  <property name="ellipsize">PANGO_ELLIPSIZE_NONE</property>
+			  <property name="width_chars">-1</property>
+			  <property name="single_line_mode">False</property>
+			  <property name="angle">0</property>
+			</widget>
+			<packing>
+			  <property name="type">label_item</property>
+			</packing>
+		      </child>
+		    </widget>
+		    <packing>
+		      <property name="padding">0</property>
+		      <property name="expand">False</property>
+		      <property name="fill">True</property>
+		    </packing>
+		  </child>
+		</widget>
+	      </child>
+	    </widget>
+	    <packing>
+	      <property name="tab_expand">False</property>
+	      <property name="tab_fill">True</property>
+	    </packing>
+	  </child>
+
+	  <child>
+	    <widget class="GtkLabel" id="labelPageMotion&amp;More">
+	      <property name="visible">True</property>
+	      <property name="label" translatable="yes">Motion &amp; Misc</property>
+	      <property name="use_underline">False</property>
+	      <property name="use_markup">False</property>
+	      <property name="justify">GTK_JUSTIFY_LEFT</property>
+	      <property name="wrap">False</property>
+	      <property name="selectable">False</property>
+	      <property name="xalign">0.5</property>
+	      <property name="yalign">0.5</property>
+	      <property name="xpad">0</property>
+	      <property name="ypad">0</property>
+	      <property name="ellipsize">PANGO_ELLIPSIZE_NONE</property>
+	      <property name="width_chars">-1</property>
+	      <property name="single_line_mode">False</property>
+	      <property name="angle">0</property>
+	    </widget>
+	    <packing>
+	      <property name="type">tab</property>
+	    </packing>
+	  </child>
+
+	  <child>
+	    <widget class="GtkAlignment" id="alignment16">
+	      <property name="visible">True</property>
+	      <property name="xalign">0.5</property>
+	      <property name="yalign">0.5</property>
+	      <property name="xscale">1</property>
+	      <property name="yscale">1</property>
+	      <property name="top_padding">7</property>
+	      <property name="bottom_padding">7</property>
+	      <property name="left_padding">7</property>
+	      <property name="right_padding">7</property>
+
+	      <child>
+		<widget class="GtkVBox" id="vbox2">
+		  <property name="visible">True</property>
+		  <property name="homogeneous">False</property>
+		  <property name="spacing">3</property>
+
+		  <child>
+		    <widget class="GtkFrame" id="frame4">
+		      <property name="visible">True</property>
+		      <property name="label_xalign">0</property>
+		      <property name="label_yalign">0.5</property>
+		      <property name="shadow_type">GTK_SHADOW_ETCHED_IN</property>
+
+		      <child>
+			<widget class="GtkAlignment" id="alignment4">
+			  <property name="visible">True</property>
+			  <property name="xalign">0.5</property>
+			  <property name="yalign">0.5</property>
+			  <property name="xscale">1</property>
+			  <property name="yscale">1</property>
+			  <property name="top_padding">7</property>
+			  <property name="bottom_padding">7</property>
+			  <property name="left_padding">7</property>
+			  <property name="right_padding">7</property>
+
+			  <child>
+			    <widget class="GtkVBox" id="vbox3">
+			      <property name="visible">True</property>
+			      <property name="homogeneous">False</property>
+			      <property name="spacing">3</property>
+
+			      <child>
+				<widget class="GtkCheckButton" id="checkbutton8x8">
+				  <property name="visible">True</property>
+				  <property name="tooltip" translatable="yes">General block breakdown transformation</property>
+				  <property name="can_focus">True</property>
+				  <property name="label" translatable="yes">8x8 Transform</property>
+				  <property name="use_underline">True</property>
+				  <property name="relief">GTK_RELIEF_NORMAL</property>
+				  <property name="focus_on_click">True</property>
+				  <property name="active">True</property>
+				  <property name="inconsistent">False</property>
+				  <property name="draw_indicator">True</property>
+				</widget>
+				<packing>
+				  <property name="padding">0</property>
+				  <property name="expand">False</property>
+				  <property name="fill">False</property>
+				</packing>
+			      </child>
+
+			      <child>
+				<widget class="GtkCheckButton" id="checkbutton8x8P">
+				  <property name="visible">True</property>
+				  <property name="tooltip" translatable="yes">Improve the P-frame quality</property>
+				  <property name="can_focus">True</property>
+				  <property name="label" translatable="yes">8x8, 8x16 and 16x8 P-frame search</property>
+				  <property name="use_underline">True</property>
+				  <property name="relief">GTK_RELIEF_NORMAL</property>
+				  <property name="focus_on_click">True</property>
+				  <property name="active">True</property>
+				  <property name="inconsistent">False</property>
+				  <property name="draw_indicator">True</property>
+				</widget>
+				<packing>
+				  <property name="padding">0</property>
+				  <property name="expand">False</property>
+				  <property name="fill">False</property>
+				</packing>
+			      </child>
+
+			      <child>
+				<widget class="GtkCheckButton" id="checkbutton8x8B">
+				  <property name="visible">True</property>
+				  <property name="tooltip" translatable="yes">Improve the B-frame quality</property>
+				  <property name="can_focus">True</property>
+				  <property name="label" translatable="yes">8x8, 8x16 and 16x8 B-frame search</property>
+				  <property name="use_underline">True</property>
+				  <property name="relief">GTK_RELIEF_NORMAL</property>
+				  <property name="focus_on_click">True</property>
+				  <property name="active">True</property>
+				  <property name="inconsistent">False</property>
+				  <property name="draw_indicator">True</property>
+				</widget>
+				<packing>
+				  <property name="padding">0</property>
+				  <property name="expand">False</property>
+				  <property name="fill">False</property>
+				</packing>
+			      </child>
+
+			      <child>
+				<widget class="GtkCheckButton" id="checkbutton4x4">
+				  <property name="visible">True</property>
+				  <property name="tooltip" translatable="yes">Further improve the P-frame quality</property>
+				  <property name="can_focus">True</property>
+				  <property name="label" translatable="yes">4x4, 4x8 and 8x4 P-frame search</property>
+				  <property name="use_underline">True</property>
+				  <property name="relief">GTK_RELIEF_NORMAL</property>
+				  <property name="focus_on_click">True</property>
+				  <property name="active">False</property>
+				  <property name="inconsistent">False</property>
+				  <property name="draw_indicator">True</property>
+				</widget>
+				<packing>
+				  <property name="padding">0</property>
+				  <property name="expand">False</property>
+				  <property name="fill">False</property>
+				</packing>
+			      </child>
+
+			      <child>
+				<widget class="GtkCheckButton" id="checkbutton8x8I">
+				  <property name="visible">True</property>
+				  <property name="tooltip" translatable="yes">Enable DCT Intra block search to improve quality</property>
+				  <property name="can_focus">True</property>
+				  <property name="label" translatable="yes">8x8 Intra search</property>
+				  <property name="use_underline">True</property>
+				  <property name="relief">GTK_RELIEF_NORMAL</property>
+				  <property name="focus_on_click">True</property>
+				  <property name="active">True</property>
+				  <property name="inconsistent">False</property>
+				  <property name="draw_indicator">True</property>
+				</widget>
+				<packing>
+				  <property name="padding">0</property>
+				  <property name="expand">False</property>
+				  <property name="fill">False</property>
+				</packing>
+			      </child>
+
+			      <child>
+				<widget class="GtkCheckButton" id="checkbutton4x4I">
+				  <property name="visible">True</property>
+				  <property name="tooltip" translatable="yes">Further enable DCT Intra block search to improve quality</property>
+				  <property name="can_focus">True</property>
+				  <property name="label" translatable="yes">4x4 Intra search</property>
+				  <property name="use_underline">True</property>
+				  <property name="relief">GTK_RELIEF_NORMAL</property>
+				  <property name="focus_on_click">True</property>
+				  <property name="active">True</property>
+				  <property name="inconsistent">False</property>
+				  <property name="draw_indicator">True</property>
+				</widget>
+				<packing>
+				  <property name="padding">0</property>
+				  <property name="expand">False</property>
+				  <property name="fill">False</property>
+				</packing>
+			      </child>
+			    </widget>
+			  </child>
+			</widget>
+		      </child>
+
+		      <child>
+			<widget class="GtkLabel" id="label19">
+			  <property name="visible">True</property>
+			  <property name="label" translatable="yes">&lt;b&gt;Partition Macroblocks&lt;/b&gt;</property>
+			  <property name="use_underline">False</property>
+			  <property name="use_markup">True</property>
+			  <property name="justify">GTK_JUSTIFY_LEFT</property>
+			  <property name="wrap">False</property>
+			  <property name="selectable">False</property>
+			  <property name="xalign">0.5</property>
+			  <property name="yalign">0.5</property>
+			  <property name="xpad">0</property>
+			  <property name="ypad">0</property>
+			  <property name="ellipsize">PANGO_ELLIPSIZE_NONE</property>
+			  <property name="width_chars">-1</property>
+			  <property name="single_line_mode">False</property>
+			  <property name="angle">0</property>
+			</widget>
+			<packing>
+			  <property name="type">label_item</property>
+			</packing>
+		      </child>
+		    </widget>
+		    <packing>
+		      <property name="padding">0</property>
+		      <property name="expand">False</property>
+		      <property name="fill">True</property>
+		    </packing>
+		  </child>
+
+		  <child>
+		    <widget class="GtkFrame" id="frame5">
+		      <property name="visible">True</property>
+		      <property name="label_xalign">0</property>
+		      <property name="label_yalign">0.5</property>
+		      <property name="shadow_type">GTK_SHADOW_ETCHED_IN</property>
+
+		      <child>
+			<widget class="GtkAlignment" id="alignment5">
+			  <property name="visible">True</property>
+			  <property name="xalign">0.5</property>
+			  <property name="yalign">0.5</property>
+			  <property name="xscale">1</property>
+			  <property name="yscale">1</property>
+			  <property name="top_padding">7</property>
+			  <property name="bottom_padding">7</property>
+			  <property name="left_padding">7</property>
+			  <property name="right_padding">7</property>
+
+			  <child>
+			    <widget class="GtkVBox" id="vbox4">
+			      <property name="visible">True</property>
+			      <property name="homogeneous">False</property>
+			      <property name="spacing">3</property>
+
+			      <child>
+				<widget class="GtkTable" id="table5">
+				  <property name="visible">True</property>
+				  <property name="n_rows">2</property>
+				  <property name="n_columns">2</property>
+				  <property name="homogeneous">False</property>
+				  <property name="row_spacing">3</property>
+				  <property name="column_spacing">10</property>
+
+				  <child>
+				    <widget class="GtkLabel" id="labelBias">
+				      <property name="visible">True</property>
+				      <property name="label" translatable="yes">Bias</property>
+				      <property name="use_underline">False</property>
+				      <property name="use_markup">False</property>
+				      <property name="justify">GTK_JUSTIFY_LEFT</property>
+				      <property name="wrap">False</property>
+				      <property name="selectable">False</property>
+				      <property name="xalign">0</property>
+				      <property name="yalign">0.5</property>
+				      <property name="xpad">0</property>
+				      <property name="ypad">0</property>
+				      <property name="ellipsize">PANGO_ELLIPSIZE_NONE</property>
+				      <property name="width_chars">-1</property>
+				      <property name="single_line_mode">False</property>
+				      <property name="angle">0</property>
+				    </widget>
+				    <packing>
+				      <property name="left_attach">0</property>
+				      <property name="right_attach">1</property>
+				      <property name="top_attach">1</property>
+				      <property name="bottom_attach">2</property>
+				      <property name="x_options">fill</property>
+				      <property name="y_options"></property>
+				    </packing>
+				  </child>
+
+				  <child>
+				    <widget class="GtkLabel" id="labelMaxConsecutive">
+				      <property name="visible">True</property>
+				      <property name="label" translatable="yes">Max Consecutive</property>
+				      <property name="use_underline">False</property>
+				      <property name="use_markup">False</property>
+				      <property name="justify">GTK_JUSTIFY_LEFT</property>
+				      <property name="wrap">False</property>
+				      <property name="selectable">False</property>
+				      <property name="xalign">0</property>
+				      <property name="yalign">0.5</property>
+				      <property name="xpad">0</property>
+				      <property name="ypad">0</property>
+				      <property name="ellipsize">PANGO_ELLIPSIZE_NONE</property>
+				      <property name="width_chars">-1</property>
+				      <property name="single_line_mode">False</property>
+				      <property name="angle">0</property>
+				    </widget>
+				    <packing>
+				      <property name="left_attach">0</property>
+				      <property name="right_attach">1</property>
+				      <property name="top_attach">0</property>
+				      <property name="bottom_attach">1</property>
+				      <property name="x_options">fill</property>
+				      <property name="y_options"></property>
+				    </packing>
+				  </child>
+
+				  <child>
+				    <widget class="GtkSpinButton" id="spinbuttonBias">
+				      <property name="visible">True</property>
+				      <property name="tooltip" translatable="yes">Increase / decrease probability for how often B-frames are used. It will not violate the maximum consecutive frame limit.</property>
+				      <property name="can_focus">True</property>
+				      <property name="climb_rate">1</property>
+				      <property name="digits">0</property>
+				      <property name="numeric">True</property>
+				      <property name="update_policy">GTK_UPDATE_ALWAYS</property>
+				      <property name="snap_to_ticks">False</property>
+				      <property name="wrap">False</property>
+				      <property name="adjustment">0 -100 100 1 10 10</property>
+				    </widget>
+				    <packing>
+				      <property name="left_attach">1</property>
+				      <property name="right_attach">2</property>
+				      <property name="top_attach">1</property>
+				      <property name="bottom_attach">2</property>
+				      <property name="x_options">fill</property>
+				      <property name="y_options"></property>
+				    </packing>
+				  </child>
+
+				  <child>
+				    <widget class="GtkSpinButton" id="spinbuttonMaxBFrame">
+				      <property name="visible">True</property>
+				      <property name="tooltip" translatable="yes">Set the maximum number of consecutive B-frames. This defines how many duplicate frames can be dropped. Numbers 2 to 5 are recommended. This greatly improves the use of bitrate and quality.</property>
+				      <property name="can_focus">True</property>
+				      <property name="climb_rate">1</property>
+				      <property name="digits">0</property>
+				      <property name="numeric">True</property>
+				      <property name="update_policy">GTK_UPDATE_ALWAYS</property>
+				      <property name="snap_to_ticks">False</property>
+				      <property name="wrap">False</property>
+				      <property name="adjustment">3 0 15 1 10 10</property>
+				    </widget>
+				    <packing>
+				      <property name="left_attach">1</property>
+				      <property name="right_attach">2</property>
+				      <property name="top_attach">0</property>
+				      <property name="bottom_attach">1</property>
+				      <property name="x_options">fill</property>
+				      <property name="y_options"></property>
+				    </packing>
+				  </child>
+				</widget>
+				<packing>
+				  <property name="padding">0</property>
+				  <property name="expand">True</property>
+				  <property name="fill">True</property>
+				</packing>
+			      </child>
+
+			      <child>
+				<widget class="GtkAlignment" id="alignment20">
+				  <property name="visible">True</property>
+				  <property name="xalign">0.5</property>
+				  <property name="yalign">0.5</property>
+				  <property name="xscale">1</property>
+				  <property name="yscale">1</property>
+				  <property name="top_padding">3</property>
+				  <property name="bottom_padding">3</property>
+				  <property name="left_padding">0</property>
+				  <property name="right_padding">0</property>
+
+				  <child>
+				    <widget class="GtkTable" id="table6">
+				      <property name="visible">True</property>
+				      <property name="n_rows">2</property>
+				      <property name="n_columns">2</property>
+				      <property name="homogeneous">False</property>
+				      <property name="row_spacing">3</property>
+				      <property name="column_spacing">10</property>
+
+				      <child>
+					<widget class="GtkCheckButton" id="checkbuttonBidirME">
+					  <property name="visible">True</property>
+					  <property name="tooltip" translatable="yes">Optimise both motion vectors in B-frames. This will improve quality but take more time for encoding.</property>
+					  <property name="can_focus">True</property>
+					  <property name="label" translatable="yes">Bidirectional ME</property>
+					  <property name="use_underline">True</property>
+					  <property name="relief">GTK_RELIEF_NORMAL</property>
+					  <property name="focus_on_click">True</property>
+					  <property name="active">False</property>
+					  <property name="inconsistent">False</property>
+					  <property name="draw_indicator">True</property>
+					</widget>
+					<packing>
+					  <property name="left_attach">1</property>
+					  <property name="right_attach">2</property>
+					  <property name="top_attach">0</property>
+					  <property name="bottom_attach">1</property>
+					  <property name="x_options">fill</property>
+					  <property name="y_options"></property>
+					</packing>
+				      </child>
+
+				      <child>
+					<widget class="GtkCheckButton" id="checkbuttonWeighted">
+					  <property name="visible">True</property>
+					  <property name="tooltip" translatable="yes">Enables weighting of B-frames to help fades</property>
+					  <property name="can_focus">True</property>
+					  <property name="label" translatable="yes">Weighted Biprediction</property>
+					  <property name="use_underline">True</property>
+					  <property name="relief">GTK_RELIEF_NORMAL</property>
+					  <property name="focus_on_click">True</property>
+					  <property name="active">True</property>
+					  <property name="inconsistent">False</property>
+					  <property name="draw_indicator">True</property>
+					</widget>
+					<packing>
+					  <property name="left_attach">1</property>
+					  <property name="right_attach">2</property>
+					  <property name="top_attach">1</property>
+					  <property name="bottom_attach">2</property>
+					  <property name="x_options">fill</property>
+					  <property name="y_options"></property>
+					</packing>
+				      </child>
+
+				      <child>
+					<widget class="GtkCheckButton" id="checkbuttonAdaptative">
+					  <property name="visible">True</property>
+					  <property name="tooltip" translatable="yes">Use fewer B-frames if needed. This is always recommended. If not enabled, the codec will always use the maximum number of consecutive B-frames.</property>
+					  <property name="can_focus">True</property>
+					  <property name="label" translatable="yes">Adaptative DCT</property>
+					  <property name="use_underline">True</property>
+					  <property name="relief">GTK_RELIEF_NORMAL</property>
+					  <property name="focus_on_click">True</property>
+					  <property name="active">True</property>
+					  <property name="inconsistent">False</property>
+					  <property name="draw_indicator">True</property>
+					</widget>
+					<packing>
+					  <property name="left_attach">0</property>
+					  <property name="right_attach">1</property>
+					  <property name="top_attach">1</property>
+					  <property name="bottom_attach">2</property>
+					  <property name="x_options">fill</property>
+					  <property name="y_options"></property>
+					</packing>
+				      </child>
+
+				      <child>
+					<widget class="GtkCheckButton" id="checkbuttonBasReference">
+					  <property name="visible">True</property>
+					  <property name="tooltip" translatable="yes">Allow B-frames to make references non-linearly to another B-frame (instead of creating a duplicate copy)</property>
+					  <property name="can_focus">True</property>
+					  <property name="label" translatable="yes">Use as Reference</property>
+					  <property name="use_underline">True</property>
+					  <property name="relief">GTK_RELIEF_NORMAL</property>
+					  <property name="focus_on_click">True</property>
+					  <property name="active">False</property>
+					  <property name="inconsistent">False</property>
+					  <property name="draw_indicator">True</property>
+					</widget>
+					<packing>
+					  <property name="left_attach">0</property>
+					  <property name="right_attach">1</property>
+					  <property name="top_attach">0</property>
+					  <property name="bottom_attach">1</property>
+					  <property name="x_options">fill</property>
+					  <property name="y_options"></property>
+					</packing>
+				      </child>
+				    </widget>
+				  </child>
+				</widget>
+				<packing>
+				  <property name="padding">0</property>
+				  <property name="expand">True</property>
+				  <property name="fill">True</property>
+				</packing>
+			      </child>
+
+			      <child>
+				<widget class="GtkHBox" id="hbox1">
+				  <property name="visible">True</property>
+				  <property name="homogeneous">False</property>
+				  <property name="spacing">10</property>
+
+				  <child>
+				    <widget class="GtkLabel" id="labelBFrameDirectMode">
+				      <property name="visible">True</property>
+				      <property name="label" translatable="yes">B-Frame Direct Mode</property>
+				      <property name="use_underline">False</property>
+				      <property name="use_markup">False</property>
+				      <property name="justify">GTK_JUSTIFY_LEFT</property>
+				      <property name="wrap">False</property>
+				      <property name="selectable">False</property>
+				      <property name="xalign">0</property>
+				      <property name="yalign">0.5</property>
+				      <property name="xpad">0</property>
+				      <property name="ypad">0</property>
+				      <property name="ellipsize">PANGO_ELLIPSIZE_NONE</property>
+				      <property name="width_chars">-1</property>
+				      <property name="single_line_mode">False</property>
+				      <property name="angle">0</property>
+				    </widget>
+				    <packing>
+				      <property name="padding">0</property>
+				      <property name="expand">False</property>
+				      <property name="fill">True</property>
+				    </packing>
+				  </child>
+
+				  <child>
+				    <widget class="GtkComboBox" id="comboboxDirectMode">
+				      <property name="visible">True</property>
+				      <property name="has_default">True</property>
+				      <property name="items" translatable="yes">Auto
+Temporal
+Spatial
+None</property>
+				      <property name="add_tearoffs">False</property>
+				      <property name="focus_on_click">True</property>
+				    </widget>
+				    <packing>
+				      <property name="padding">0</property>
+				      <property name="expand">False</property>
+				      <property name="fill">True</property>
+				    </packing>
+				  </child>
+				</widget>
+				<packing>
+				  <property name="padding">0</property>
+				  <property name="expand">True</property>
+				  <property name="fill">True</property>
+				</packing>
+			      </child>
+			    </widget>
+			  </child>
+			</widget>
+		      </child>
+
+		      <child>
+			<widget class="GtkLabel" id="label20">
+			  <property name="visible">True</property>
+			  <property name="label" translatable="yes">&lt;b&gt;B-Frames&lt;/b&gt;</property>
+			  <property name="use_underline">False</property>
+			  <property name="use_markup">True</property>
+			  <property name="justify">GTK_JUSTIFY_LEFT</property>
+			  <property name="wrap">False</property>
+			  <property name="selectable">False</property>
+			  <property name="xalign">0.5</property>
+			  <property name="yalign">0.5</property>
+			  <property name="xpad">0</property>
+			  <property name="ypad">0</property>
+			  <property name="ellipsize">PANGO_ELLIPSIZE_NONE</property>
+			  <property name="width_chars">-1</property>
+			  <property name="single_line_mode">False</property>
+			  <property name="angle">0</property>
+			</widget>
+			<packing>
+			  <property name="type">label_item</property>
+			</packing>
+		      </child>
+		    </widget>
+		    <packing>
+		      <property name="padding">0</property>
+		      <property name="expand">False</property>
+		      <property name="fill">True</property>
+		    </packing>
+		  </child>
+		</widget>
+	      </child>
+	    </widget>
+	    <packing>
+	      <property name="tab_expand">False</property>
+	      <property name="tab_fill">True</property>
+	    </packing>
+	  </child>
+
+	  <child>
+	    <widget class="GtkLabel" id="labelPagePartion&amp;Frame">
+	      <property name="visible">True</property>
+	      <property name="label" translatable="yes">Partitions &amp; Frames</property>
+	      <property name="use_underline">False</property>
+	      <property name="use_markup">False</property>
+	      <property name="justify">GTK_JUSTIFY_LEFT</property>
+	      <property name="wrap">False</property>
+	      <property name="selectable">False</property>
+	      <property name="xalign">0.5</property>
+	      <property name="yalign">0.5</property>
+	      <property name="xpad">0</property>
+	      <property name="ypad">0</property>
+	      <property name="ellipsize">PANGO_ELLIPSIZE_NONE</property>
+	      <property name="width_chars">-1</property>
+	      <property name="single_line_mode">False</property>
+	      <property name="angle">0</property>
+	    </widget>
+	    <packing>
+	      <property name="type">tab</property>
+	    </packing>
+	  </child>
+
+	  <child>
+	    <widget class="GtkAlignment" id="alignment17">
+	      <property name="visible">True</property>
+	      <property name="xalign">0.5</property>
+	      <property name="yalign">0.5</property>
+	      <property name="xscale">1</property>
+	      <property name="yscale">1</property>
+	      <property name="top_padding">7</property>
+	      <property name="bottom_padding">7</property>
+	      <property name="left_padding">7</property>
+	      <property name="right_padding">7</property>
+
+	      <child>
+		<widget class="GtkVBox" id="vbox1">
+		  <property name="visible">True</property>
+		  <property name="homogeneous">False</property>
+		  <property name="spacing">3</property>
+
+		  <child>
+		    <widget class="GtkFrame" id="frame1">
+		      <property name="visible">True</property>
+		      <property name="label_xalign">0</property>
+		      <property name="label_yalign">0.5</property>
+		      <property name="shadow_type">GTK_SHADOW_ETCHED_IN</property>
+
+		      <child>
+			<widget class="GtkAlignment" id="alignment1">
+			  <property name="visible">True</property>
+			  <property name="xalign">0.5</property>
+			  <property name="yalign">0.5</property>
+			  <property name="xscale">1</property>
+			  <property name="yscale">1</property>
+			  <property name="top_padding">7</property>
+			  <property name="bottom_padding">7</property>
+			  <property name="left_padding">7</property>
+			  <property name="right_padding">7</property>
+
+			  <child>
+			    <widget class="GtkTable" id="table2">
+			      <property name="visible">True</property>
+			      <property name="n_rows">3</property>
+			      <property name="n_columns">2</property>
+			      <property name="homogeneous">False</property>
+			      <property name="row_spacing">3</property>
+			      <property name="column_spacing">10</property>
+
+			      <child>
+				<widget class="GtkSpinButton" id="spinbuttonKeyframeBoost">
+				  <property name="width_request">115</property>
+				  <property name="visible">True</property>
+				  <property name="tooltip" translatable="yes">Set how much &quot;bitrate bonus&quot; a keyframe can get</property>
+				  <property name="can_focus">True</property>
+				  <property name="climb_rate">1</property>
+				  <property name="digits">0</property>
+				  <property name="numeric">True</property>
+				  <property name="update_policy">GTK_UPDATE_ALWAYS</property>
+				  <property name="snap_to_ticks">False</property>
+				  <property name="wrap">False</property>
+				  <property name="adjustment">40 0 100 1 10 10</property>
+				</widget>
+				<packing>
+				  <property name="left_attach">1</property>
+				  <property name="right_attach">2</property>
+				  <property name="top_attach">0</property>
+				  <property name="bottom_attach">1</property>
+				  <property name="x_options">fill</property>
+				  <property name="y_options"></property>
+				</packing>
+			      </child>
+
+			      <child>
+				<widget class="GtkSpinButton" id="spinbuttonBframeReduction">
+				  <property name="visible">True</property>
+				  <property name="tooltip" translatable="yes">Set how much bitrate is deducted from a B-frame as compared to the previous P-frame</property>
+				  <property name="can_focus">True</property>
+				  <property name="climb_rate">1</property>
+				  <property name="digits">0</property>
+				  <property name="numeric">True</property>
+				  <property name="update_policy">GTK_UPDATE_ALWAYS</property>
+				  <property name="snap_to_ticks">False</property>
+				  <property name="wrap">False</property>
+				  <property name="adjustment">30 0 100 1 10 10</property>
+				</widget>
+				<packing>
+				  <property name="left_attach">1</property>
+				  <property name="right_attach">2</property>
+				  <property name="top_attach">1</property>
+				  <property name="bottom_attach">2</property>
+				  <property name="x_options">fill</property>
+				  <property name="y_options"></property>
+				</packing>
+			      </child>
+
+			      <child>
+				<widget class="GtkSpinButton" id="spinbuttonBitrateVariability">
+				  <property name="visible">True</property>
+				  <property name="tooltip" translatable="yes">Define how much the bitrate can fluctuate over the entire video. 0% results in a constant bitrate stream, while 100% results in a pure quality based bitrate stream.</property>
+				  <property name="can_focus">True</property>
+				  <property name="climb_rate">1</property>
+				  <property name="digits">0</property>
+				  <property name="numeric">True</property>
+				  <property name="update_policy">GTK_UPDATE_ALWAYS</property>
+				  <property name="snap_to_ticks">False</property>
+				  <property name="wrap">False</property>
+				  <property name="adjustment">60 0 100 1 10 10</property>
+				</widget>
+				<packing>
+				  <property name="left_attach">1</property>
+				  <property name="right_attach">2</property>
+				  <property name="top_attach">2</property>
+				  <property name="bottom_attach">3</property>
+				  <property name="x_options">fill</property>
+				  <property name="y_options"></property>
+				</packing>
+			      </child>
+
+			      <child>
+				<widget class="GtkLabel" id="labelKeyframeboost">
+				  <property name="visible">True</property>
+				  <property name="label" translatable="yes">Keyframe Boost (%)</property>
+				  <property name="use_underline">False</property>
+				  <property name="use_markup">False</property>
+				  <property name="justify">GTK_JUSTIFY_LEFT</property>
+				  <property name="wrap">False</property>
+				  <property name="selectable">False</property>
+				  <property name="xalign">0</property>
+				  <property name="yalign">0.5</property>
+				  <property name="xpad">0</property>
+				  <property name="ypad">0</property>
+				  <property name="ellipsize">PANGO_ELLIPSIZE_NONE</property>
+				  <property name="width_chars">-1</property>
+				  <property name="single_line_mode">False</property>
+				  <property name="angle">0</property>
+				</widget>
+				<packing>
+				  <property name="left_attach">0</property>
+				  <property name="right_attach">1</property>
+				  <property name="top_attach">0</property>
+				  <property name="bottom_attach">1</property>
+				  <property name="x_options">fill</property>
+				  <property name="y_options"></property>
+				</packing>
+			      </child>
+
+			      <child>
+				<widget class="GtkLabel" id="label11">
+				  <property name="visible">True</property>
+				  <property name="label" translatable="yes">B-frame Reduction (%)</property>
+				  <property name="use_underline">False</property>
+				  <property name="use_markup">False</property>
+				  <property name="justify">GTK_JUSTIFY_LEFT</property>
+				  <property name="wrap">False</property>
+				  <property name="selectable">False</property>
+				  <property name="xalign">0</property>
+				  <property name="yalign">0.5</property>
+				  <property name="xpad">0</property>
+				  <property name="ypad">0</property>
+				  <property name="ellipsize">PANGO_ELLIPSIZE_NONE</property>
+				  <property name="width_chars">-1</property>
+				  <property name="single_line_mode">False</property>
+				  <property name="angle">0</property>
+				</widget>
+				<packing>
+				  <property name="left_attach">0</property>
+				  <property name="right_attach">1</property>
+				  <property name="top_attach">1</property>
+				  <property name="bottom_attach">2</property>
+				  <property name="x_options">fill</property>
+				  <property name="y_options"></property>
+				</packing>
+			      </child>
+
+			      <child>
+				<widget class="GtkLabel" id="label12">
+				  <property name="visible">True</property>
+				  <property name="label" translatable="yes">Bitrate Variability (%)</property>
+				  <property name="use_underline">False</property>
+				  <property name="use_markup">False</property>
+				  <property name="justify">GTK_JUSTIFY_LEFT</property>
+				  <property name="wrap">False</property>
+				  <property name="selectable">False</property>
+				  <property name="xalign">0</property>
+				  <property name="yalign">0.5</property>
+				  <property name="xpad">0</property>
+				  <property name="ypad">0</property>
+				  <property name="ellipsize">PANGO_ELLIPSIZE_NONE</property>
+				  <property name="width_chars">-1</property>
+				  <property name="single_line_mode">False</property>
+				  <property name="angle">0</property>
+				</widget>
+				<packing>
+				  <property name="left_attach">0</property>
+				  <property name="right_attach">1</property>
+				  <property name="top_attach">2</property>
+				  <property name="bottom_attach">3</property>
+				  <property name="x_options">fill</property>
+				  <property name="y_options"></property>
+				</packing>
+			      </child>
+			    </widget>
+			  </child>
+			</widget>
+		      </child>
+
+		      <child>
+			<widget class="GtkLabel" id="label7">
+			  <property name="visible">True</property>
+			  <property name="label" translatable="yes">&lt;b&gt;Bitrate&lt;/b&gt;</property>
+			  <property name="use_underline">False</property>
+			  <property name="use_markup">True</property>
+			  <property name="justify">GTK_JUSTIFY_LEFT</property>
+			  <property name="wrap">False</property>
+			  <property name="selectable">False</property>
+			  <property name="xalign">0.5</property>
+			  <property name="yalign">0.5</property>
+			  <property name="xpad">0</property>
+			  <property name="ypad">0</property>
+			  <property name="ellipsize">PANGO_ELLIPSIZE_NONE</property>
+			  <property name="width_chars">-1</property>
+			  <property name="single_line_mode">False</property>
+			  <property name="angle">0</property>
+			</widget>
+			<packing>
+			  <property name="type">label_item</property>
+			</packing>
+		      </child>
+		    </widget>
+		    <packing>
+		      <property name="padding">1</property>
+		      <property name="expand">False</property>
+		      <property name="fill">True</property>
+		    </packing>
+		  </child>
+
+		  <child>
+		    <widget class="GtkFrame" id="frame2">
+		      <property name="visible">True</property>
+		      <property name="label_xalign">0</property>
+		      <property name="label_yalign">0.5</property>
+		      <property name="shadow_type">GTK_SHADOW_ETCHED_IN</property>
+
+		      <child>
+			<widget class="GtkAlignment" id="alignment2">
+			  <property name="visible">True</property>
+			  <property name="xalign">0.5</property>
+			  <property name="yalign">0.5</property>
+			  <property name="xscale">1</property>
+			  <property name="yscale">1</property>
+			  <property name="top_padding">7</property>
+			  <property name="bottom_padding">7</property>
+			  <property name="left_padding">7</property>
+			  <property name="right_padding">7</property>
+
+			  <child>
+			    <widget class="GtkTable" id="table3">
+			      <property name="visible">True</property>
+			      <property name="n_rows">3</property>
+			      <property name="n_columns">2</property>
+			      <property name="homogeneous">False</property>
+			      <property name="row_spacing">3</property>
+			      <property name="column_spacing">20</property>
+
+			      <child>
+				<widget class="GtkLabel" id="label13">
+				  <property name="visible">True</property>
+				  <property name="label" translatable="yes">Min QP</property>
+				  <property name="use_underline">False</property>
+				  <property name="use_markup">False</property>
+				  <property name="justify">GTK_JUSTIFY_LEFT</property>
+				  <property name="wrap">False</property>
+				  <property name="selectable">False</property>
+				  <property name="xalign">0</property>
+				  <property name="yalign">0.5</property>
+				  <property name="xpad">0</property>
+				  <property name="ypad">0</property>
+				  <property name="ellipsize">PANGO_ELLIPSIZE_NONE</property>
+				  <property name="width_chars">-1</property>
+				  <property name="single_line_mode">False</property>
+				  <property name="angle">0</property>
+				</widget>
+				<packing>
+				  <property name="left_attach">0</property>
+				  <property name="right_attach">1</property>
+				  <property name="top_attach">0</property>
+				  <property name="bottom_attach">1</property>
+				  <property name="x_options">fill</property>
+				  <property name="y_options"></property>
+				</packing>
+			      </child>
+
+			      <child>
+				<widget class="GtkLabel" id="label14">
+				  <property name="visible">True</property>
+				  <property name="label" translatable="yes">Max QP</property>
+				  <property name="use_underline">False</property>
+				  <property name="use_markup">False</property>
+				  <property name="justify">GTK_JUSTIFY_LEFT</property>
+				  <property name="wrap">False</property>
+				  <property name="selectable">False</property>
+				  <property name="xalign">0</property>
+				  <property name="yalign">0.5</property>
+				  <property name="xpad">0</property>
+				  <property name="ypad">0</property>
+				  <property name="ellipsize">PANGO_ELLIPSIZE_NONE</property>
+				  <property name="width_chars">-1</property>
+				  <property name="single_line_mode">False</property>
+				  <property name="angle">0</property>
+				</widget>
+				<packing>
+				  <property name="left_attach">0</property>
+				  <property name="right_attach">1</property>
+				  <property name="top_attach">1</property>
+				  <property name="bottom_attach">2</property>
+				  <property name="x_options">fill</property>
+				  <property name="y_options"></property>
+				</packing>
+			      </child>
+
+			      <child>
+				<widget class="GtkLabel" id="label15">
+				  <property name="visible">True</property>
+				  <property name="label" translatable="yes">Max QP Step</property>
+				  <property name="use_underline">False</property>
+				  <property name="use_markup">False</property>
+				  <property name="justify">GTK_JUSTIFY_LEFT</property>
+				  <property name="wrap">False</property>
+				  <property name="selectable">False</property>
+				  <property name="xalign">0</property>
+				  <property name="yalign">0.5</property>
+				  <property name="xpad">0</property>
+				  <property name="ypad">0</property>
+				  <property name="ellipsize">PANGO_ELLIPSIZE_NONE</property>
+				  <property name="width_chars">-1</property>
+				  <property name="single_line_mode">False</property>
+				  <property name="angle">0</property>
+				</widget>
+				<packing>
+				  <property name="left_attach">0</property>
+				  <property name="right_attach">1</property>
+				  <property name="top_attach">2</property>
+				  <property name="bottom_attach">3</property>
+				  <property name="x_options">fill</property>
+				  <property name="y_options"></property>
+				</packing>
+			      </child>
+
+			      <child>
+				<widget class="GtkSpinButton" id="spinbuttonMinQp">
+				  <property name="width_request">54</property>
+				  <property name="visible">True</property>
+				  <property name="tooltip" translatable="yes">Enforce a minimum quantizer level</property>
+				  <property name="can_focus">True</property>
+				  <property name="climb_rate">1</property>
+				  <property name="digits">0</property>
+				  <property name="numeric">True</property>
+				  <property name="update_policy">GTK_UPDATE_ALWAYS</property>
+				  <property name="snap_to_ticks">False</property>
+				  <property name="wrap">False</property>
+				  <property name="adjustment">10 10 51 1 10 10</property>
+				</widget>
+				<packing>
+				  <property name="left_attach">1</property>
+				  <property name="right_attach">2</property>
+				  <property name="top_attach">0</property>
+				  <property name="bottom_attach">1</property>
+				  <property name="x_options">fill</property>
+				  <property name="y_options"></property>
+				</packing>
+			      </child>
+
+			      <child>
+				<widget class="GtkSpinButton" id="spinbuttonMaxQp">
+				  <property name="visible">True</property>
+				  <property name="tooltip" translatable="yes">Enforce a maximum quantizer level</property>
+				  <property name="can_focus">True</property>
+				  <property name="climb_rate">1</property>
+				  <property name="digits">0</property>
+				  <property name="numeric">True</property>
+				  <property name="update_policy">GTK_UPDATE_ALWAYS</property>
+				  <property name="snap_to_ticks">False</property>
+				  <property name="wrap">False</property>
+				  <property name="adjustment">51 10 51 1 10 10</property>
+				</widget>
+				<packing>
+				  <property name="left_attach">1</property>
+				  <property name="right_attach">2</property>
+				  <property name="top_attach">1</property>
+				  <property name="bottom_attach">2</property>
+				  <property name="x_options">fill</property>
+				  <property name="y_options"></property>
+				</packing>
+			      </child>
+
+			      <child>
+				<widget class="GtkSpinButton" id="spinbuttonQpStep">
+				  <property name="visible">True</property>
+				  <property name="tooltip" translatable="yes">Define how much the quantizer rate can change between two consecutive frames</property>
+				  <property name="can_focus">True</property>
+				  <property name="climb_rate">1</property>
+				  <property name="digits">0</property>
+				  <property name="numeric">True</property>
+				  <property name="update_policy">GTK_UPDATE_ALWAYS</property>
+				  <property name="snap_to_ticks">False</property>
+				  <property name="wrap">False</property>
+				  <property name="adjustment">4 0 10 1 10 10</property>
+				</widget>
+				<packing>
+				  <property name="left_attach">1</property>
+				  <property name="right_attach">2</property>
+				  <property name="top_attach">2</property>
+				  <property name="bottom_attach">3</property>
+				  <property name="x_options">fill</property>
+				  <property name="y_options"></property>
+				</packing>
+			      </child>
+			    </widget>
+			  </child>
+			</widget>
+		      </child>
+
+		      <child>
+			<widget class="GtkLabel" id="label8">
+			  <property name="visible">True</property>
+			  <property name="label" translatable="yes">&lt;b&gt;Quantization Limits&lt;/b&gt;</property>
+			  <property name="use_underline">False</property>
+			  <property name="use_markup">True</property>
+			  <property name="justify">GTK_JUSTIFY_LEFT</property>
+			  <property name="wrap">False</property>
+			  <property name="selectable">False</property>
+			  <property name="xalign">0.5</property>
+			  <property name="yalign">0.5</property>
+			  <property name="xpad">0</property>
+			  <property name="ypad">0</property>
+			  <property name="ellipsize">PANGO_ELLIPSIZE_NONE</property>
+			  <property name="width_chars">-1</property>
+			  <property name="single_line_mode">False</property>
+			  <property name="angle">0</property>
+			</widget>
+			<packing>
+			  <property name="type">label_item</property>
+			</packing>
+		      </child>
+		    </widget>
+		    <packing>
+		      <property name="padding">1</property>
+		      <property name="expand">False</property>
+		      <property name="fill">True</property>
+		    </packing>
+		  </child>
+
+		  <child>
+		    <widget class="GtkFrame" id="frame3">
+		      <property name="visible">True</property>
+		      <property name="label_xalign">0</property>
+		      <property name="label_yalign">0.5</property>
+		      <property name="shadow_type">GTK_SHADOW_ETCHED_IN</property>
+
+		      <child>
+			<widget class="GtkAlignment" id="alignment3">
+			  <property name="visible">True</property>
+			  <property name="xalign">0.5</property>
+			  <property name="yalign">0.5</property>
+			  <property name="xscale">1</property>
+			  <property name="yscale">1</property>
+			  <property name="top_padding">7</property>
+			  <property name="bottom_padding">7</property>
+			  <property name="left_padding">7</property>
+			  <property name="right_padding">7</property>
+
+			  <child>
+			    <widget class="GtkTable" id="table4">
+			      <property name="visible">True</property>
+			      <property name="n_rows">3</property>
+			      <property name="n_columns">2</property>
+			      <property name="homogeneous">False</property>
+			      <property name="row_spacing">3</property>
+			      <property name="column_spacing">10</property>
+
+			      <child>
+				<widget class="GtkSpinButton" id="spinbuttonSceneCut">
+				  <property name="width_request">115</property>
+				  <property name="visible">True</property>
+				  <property name="tooltip" translatable="yes">Increase / decrease sensitivity for detecting scene changes. Improves I-frame usage and quality.</property>
+				  <property name="can_focus">True</property>
+				  <property name="climb_rate">1</property>
+				  <property name="digits">0</property>
+				  <property name="numeric">True</property>
+				  <property name="update_policy">GTK_UPDATE_ALWAYS</property>
+				  <property name="snap_to_ticks">False</property>
+				  <property name="wrap">False</property>
+				  <property name="adjustment">40 0 100 1 10 10</property>
+				</widget>
+				<packing>
+				  <property name="left_attach">1</property>
+				  <property name="right_attach">2</property>
+				  <property name="top_attach">0</property>
+				  <property name="bottom_attach">1</property>
+				  <property name="x_options">fill</property>
+				  <property name="y_options"></property>
+				</packing>
+			      </child>
+
+			      <child>
+				<widget class="GtkLabel" id="label16">
+				  <property name="visible">True</property>
+				  <property name="label" translatable="yes">Scene Cut Threshold</property>
+				  <property name="use_underline">False</property>
+				  <property name="use_markup">False</property>
+				  <property name="justify">GTK_JUSTIFY_LEFT</property>
+				  <property name="wrap">False</property>
+				  <property name="selectable">False</property>
+				  <property name="xalign">0</property>
+				  <property name="yalign">0.5</property>
+				  <property name="xpad">0</property>
+				  <property name="ypad">0</property>
+				  <property name="ellipsize">PANGO_ELLIPSIZE_NONE</property>
+				  <property name="width_chars">-1</property>
+				  <property name="single_line_mode">False</property>
+				  <property name="angle">0</property>
+				</widget>
+				<packing>
+				  <property name="left_attach">0</property>
+				  <property name="right_attach">1</property>
+				  <property name="top_attach">0</property>
+				  <property name="bottom_attach">1</property>
+				  <property name="x_options">fill</property>
+				  <property name="y_options"></property>
+				</packing>
+			      </child>
+
+			      <child>
+				<widget class="GtkLabel" id="label17">
+				  <property name="visible">True</property>
+				  <property name="label" translatable="yes">Min IDR Frame Interval</property>
+				  <property name="use_underline">False</property>
+				  <property name="use_markup">False</property>
+				  <property name="justify">GTK_JUSTIFY_LEFT</property>
+				  <property name="wrap">False</property>
+				  <property name="selectable">False</property>
+				  <property name="xalign">0</property>
+				  <property name="yalign">0.5</property>
+				  <property name="xpad">0</property>
+				  <property name="ypad">0</property>
+				  <property name="ellipsize">PANGO_ELLIPSIZE_NONE</property>
+				  <property name="width_chars">-1</property>
+				  <property name="single_line_mode">False</property>
+				  <property name="angle">0</property>
+				</widget>
+				<packing>
+				  <property name="left_attach">0</property>
+				  <property name="right_attach">1</property>
+				  <property name="top_attach">1</property>
+				  <property name="bottom_attach">2</property>
+				  <property name="x_options">fill</property>
+				  <property name="y_options"></property>
+				</packing>
+			      </child>
+
+			      <child>
+				<widget class="GtkSpinButton" id="spinbuttonMinIdr">
+				  <property name="visible">True</property>
+				  <property name="tooltip" translatable="yes">Set minimum frame interval between IDR frames. Defines the minimum amount a frame can be reused and referenced by other frames before a new IDR frame is established.</property>
+				  <property name="can_focus">True</property>
+				  <property name="climb_rate">1</property>
+				  <property name="digits">0</property>
+				  <property name="numeric">True</property>
+				  <property name="update_policy">GTK_UPDATE_ALWAYS</property>
+				  <property name="snap_to_ticks">False</property>
+				  <property name="wrap">False</property>
+				  <property name="adjustment">25 0 100 1 10 10</property>
+				</widget>
+				<packing>
+				  <property name="left_attach">1</property>
+				  <property name="right_attach">2</property>
+				  <property name="top_attach">1</property>
+				  <property name="bottom_attach">2</property>
+				  <property name="x_options">fill</property>
+				  <property name="y_options"></property>
+				</packing>
+			      </child>
+
+			      <child>
+				<widget class="GtkSpinButton" id="spinbuttonMaxIdr">
+				  <property name="visible">True</property>
+				  <property name="tooltip" translatable="yes">Set maximum frame interval between IDR frames. Defines the maximum amount a frame can be reused and referenced by other frames before a new IDR frame is established.</property>
+				  <property name="can_focus">True</property>
+				  <property name="climb_rate">1</property>
+				  <property name="digits">0</property>
+				  <property name="numeric">True</property>
+				  <property name="update_policy">GTK_UPDATE_ALWAYS</property>
+				  <property name="snap_to_ticks">False</property>
+				  <property name="wrap">False</property>
+				  <property name="adjustment">250 1 1000 1 10 10</property>
+				</widget>
+				<packing>
+				  <property name="left_attach">1</property>
+				  <property name="right_attach">2</property>
+				  <property name="top_attach">2</property>
+				  <property name="bottom_attach">3</property>
+				  <property name="x_options">fill</property>
+				  <property name="y_options"></property>
+				</packing>
+			      </child>
+
+			      <child>
+				<widget class="GtkLabel" id="label18">
+				  <property name="visible">True</property>
+				  <property name="label" translatable="yes">Max IDR Frame Interval</property>
+				  <property name="use_underline">False</property>
+				  <property name="use_markup">False</property>
+				  <property name="justify">GTK_JUSTIFY_LEFT</property>
+				  <property name="wrap">False</property>
+				  <property name="selectable">False</property>
+				  <property name="xalign">0</property>
+				  <property name="yalign">0.5</property>
+				  <property name="xpad">0</property>
+				  <property name="ypad">0</property>
+				  <property name="ellipsize">PANGO_ELLIPSIZE_NONE</property>
+				  <property name="width_chars">-1</property>
+				  <property name="single_line_mode">False</property>
+				  <property name="angle">0</property>
+				</widget>
+				<packing>
+				  <property name="left_attach">0</property>
+				  <property name="right_attach">1</property>
+				  <property name="top_attach">2</property>
+				  <property name="bottom_attach">3</property>
+				  <property name="x_options">fill</property>
+				  <property name="y_options"></property>
+				</packing>
+			      </child>
+			    </widget>
+			  </child>
+			</widget>
+		      </child>
+
+		      <child>
+			<widget class="GtkLabel" id="labelMoreEncodingSettings">
+			  <property name="visible">True</property>
+			  <property name="label" translatable="yes">&lt;b&gt;More Rate Settings&lt;/b&gt;</property>
+			  <property name="use_underline">False</property>
+			  <property name="use_markup">True</property>
+			  <property name="justify">GTK_JUSTIFY_LEFT</property>
+			  <property name="wrap">False</property>
+			  <property name="selectable">False</property>
+			  <property name="xalign">0.5</property>
+			  <property name="yalign">0.5</property>
+			  <property name="xpad">0</property>
+			  <property name="ypad">0</property>
+			  <property name="ellipsize">PANGO_ELLIPSIZE_NONE</property>
+			  <property name="width_chars">-1</property>
+			  <property name="single_line_mode">False</property>
+			  <property name="angle">0</property>
+			</widget>
+			<packing>
+			  <property name="type">label_item</property>
+			</packing>
+		      </child>
+		    </widget>
+		    <packing>
+		      <property name="padding">1</property>
+		      <property name="expand">False</property>
+		      <property name="fill">True</property>
+		    </packing>
+		  </child>
+
+		  <child>
+		    <widget class="GtkFrame" id="frameVideoBufferVerifier">
+		      <property name="visible">True</property>
+		      <property name="label_xalign">0</property>
+		      <property name="label_yalign">0.5</property>
+		      <property name="shadow_type">GTK_SHADOW_ETCHED_IN</property>
+
+		      <child>
+			<widget class="GtkAlignment" id="alignment11">
+			  <property name="visible">True</property>
+			  <property name="xalign">0.5</property>
+			  <property name="yalign">0.5</property>
+			  <property name="xscale">1</property>
+			  <property name="yscale">1</property>
+			  <property name="top_padding">7</property>
+			  <property name="bottom_padding">7</property>
+			  <property name="left_padding">7</property>
+			  <property name="right_padding">7</property>
+
+			  <child>
+			    <widget class="GtkTable" id="table12">
+			      <property name="visible">True</property>
+			      <property name="n_rows">3</property>
+			      <property name="n_columns">2</property>
+			      <property name="homogeneous">False</property>
+			      <property name="row_spacing">3</property>
+			      <property name="column_spacing">10</property>
+
+			      <child>
+				<widget class="GtkLabel" id="labelVBVBufferSize">
+				  <property name="visible">True</property>
+				  <property name="label" translatable="yes">VBV Buffer Size</property>
+				  <property name="use_underline">False</property>
+				  <property name="use_markup">False</property>
+				  <property name="justify">GTK_JUSTIFY_LEFT</property>
+				  <property name="wrap">False</property>
+				  <property name="selectable">False</property>
+				  <property name="xalign">0</property>
+				  <property name="yalign">0.5</property>
+				  <property name="xpad">0</property>
+				  <property name="ypad">0</property>
+				  <property name="ellipsize">PANGO_ELLIPSIZE_NONE</property>
+				  <property name="width_chars">-1</property>
+				  <property name="single_line_mode">False</property>
+				  <property name="angle">0</property>
+				</widget>
+				<packing>
+				  <property name="left_attach">0</property>
+				  <property name="right_attach">1</property>
+				  <property name="top_attach">1</property>
+				  <property name="bottom_attach">2</property>
+				  <property name="x_options">fill</property>
+				  <property name="y_options"></property>
+				</packing>
+			      </child>
+
+			      <child>
+				<widget class="GtkLabel" id="labelVBVInitialbuffer">
+				  <property name="visible">True</property>
+				  <property name="label" translatable="yes">Initial VBV Buffer (%)</property>
+				  <property name="use_underline">False</property>
+				  <property name="use_markup">False</property>
+				  <property name="justify">GTK_JUSTIFY_LEFT</property>
+				  <property name="wrap">False</property>
+				  <property name="selectable">False</property>
+				  <property name="xalign">0</property>
+				  <property name="yalign">0.5</property>
+				  <property name="xpad">0</property>
+				  <property name="ypad">0</property>
+				  <property name="ellipsize">PANGO_ELLIPSIZE_NONE</property>
+				  <property name="width_chars">-1</property>
+				  <property name="single_line_mode">False</property>
+				  <property name="angle">0</property>
+				</widget>
+				<packing>
+				  <property name="left_attach">0</property>
+				  <property name="right_attach">1</property>
+				  <property name="top_attach">2</property>
+				  <property name="bottom_attach">3</property>
+				  <property name="x_options">fill</property>
+				  <property name="y_options"></property>
+				</packing>
+			      </child>
+
+			      <child>
+				<widget class="GtkLabel" id="labelVBVMaximumBitrate">
+				  <property name="visible">True</property>
+				  <property name="label" translatable="yes">Maximum Local Bitrate</property>
+				  <property name="use_underline">False</property>
+				  <property name="use_markup">False</property>
+				  <property name="justify">GTK_JUSTIFY_LEFT</property>
+				  <property name="wrap">False</property>
+				  <property name="selectable">False</property>
+				  <property name="xalign">0</property>
+				  <property name="yalign">0.5</property>
+				  <property name="xpad">0</property>
+				  <property name="ypad">0</property>
+				  <property name="ellipsize">PANGO_ELLIPSIZE_NONE</property>
+				  <property name="width_chars">-1</property>
+				  <property name="single_line_mode">False</property>
+				  <property name="angle">0</property>
+				</widget>
+				<packing>
+				  <property name="left_attach">0</property>
+				  <property name="right_attach">1</property>
+				  <property name="top_attach">0</property>
+				  <property name="bottom_attach">1</property>
+				  <property name="x_options">fill</property>
+				  <property name="y_options"></property>
+				</packing>
+			      </child>
+
+			      <child>
+				<widget class="GtkSpinButton" id="spinbuttonvbv_max_bitrate">
+				  <property name="visible">True</property>
+				  <property name="can_focus">True</property>
+				  <property name="climb_rate">1</property>
+				  <property name="digits">0</property>
+				  <property name="numeric">True</property>
+				  <property name="update_policy">GTK_UPDATE_ALWAYS</property>
+				  <property name="snap_to_ticks">False</property>
+				  <property name="wrap">False</property>
+				  <property name="adjustment">0 0 99999 1 10 10</property>
+				</widget>
+				<packing>
+				  <property name="left_attach">1</property>
+				  <property name="right_attach">2</property>
+				  <property name="top_attach">0</property>
+				  <property name="bottom_attach">1</property>
+				  <property name="x_options">fill</property>
+				  <property name="y_options"></property>
+				</packing>
+			      </child>
+
+			      <child>
+				<widget class="GtkSpinButton" id="spinbuttonvbv_buffer_size">
+				  <property name="visible">True</property>
+				  <property name="can_focus">True</property>
+				  <property name="climb_rate">1</property>
+				  <property name="digits">0</property>
+				  <property name="numeric">True</property>
+				  <property name="update_policy">GTK_UPDATE_ALWAYS</property>
+				  <property name="snap_to_ticks">False</property>
+				  <property name="wrap">False</property>
+				  <property name="adjustment">0 0 99999 1 10 10</property>
+				</widget>
+				<packing>
+				  <property name="left_attach">1</property>
+				  <property name="right_attach">2</property>
+				  <property name="top_attach">1</property>
+				  <property name="bottom_attach">2</property>
+				  <property name="x_options">fill</property>
+				  <property name="y_options"></property>
+				</packing>
+			      </child>
+
+			      <child>
+				<widget class="GtkSpinButton" id="spinbuttonvbv_buffer_init">
+				  <property name="visible">True</property>
+				  <property name="can_focus">True</property>
+				  <property name="climb_rate">1</property>
+				  <property name="digits">0</property>
+				  <property name="numeric">True</property>
+				  <property name="update_policy">GTK_UPDATE_ALWAYS</property>
+				  <property name="snap_to_ticks">False</property>
+				  <property name="wrap">False</property>
+				  <property name="adjustment">90 0 100 1 10 10</property>
+				</widget>
+				<packing>
+				  <property name="left_attach">1</property>
+				  <property name="right_attach">2</property>
+				  <property name="top_attach">2</property>
+				  <property name="bottom_attach">3</property>
+				  <property name="x_options">fill</property>
+				  <property name="y_options"></property>
+				</packing>
+			      </child>
+			    </widget>
+			  </child>
+			</widget>
+		      </child>
+
+		      <child>
+			<widget class="GtkLabel" id="labelVideoBufferVerifier">
+			  <property name="visible">True</property>
+			  <property name="label" translatable="yes">&lt;b&gt;Video Buffer Verifier&lt;/b&gt;</property>
+			  <property name="use_underline">False</property>
+			  <property name="use_markup">True</property>
+			  <property name="justify">GTK_JUSTIFY_LEFT</property>
+			  <property name="wrap">False</property>
+			  <property name="selectable">False</property>
+			  <property name="xalign">0.5</property>
+			  <property name="yalign">0.5</property>
+			  <property name="xpad">0</property>
+			  <property name="ypad">0</property>
+			  <property name="ellipsize">PANGO_ELLIPSIZE_NONE</property>
+			  <property name="width_chars">-1</property>
+			  <property name="single_line_mode">False</property>
+			  <property name="angle">0</property>
+			</widget>
+			<packing>
+			  <property name="type">label_item</property>
+			</packing>
+		      </child>
+		    </widget>
+		    <packing>
+		      <property name="padding">0</property>
+		      <property name="expand">False</property>
+		      <property name="fill">True</property>
+		    </packing>
+		  </child>
+		</widget>
+	      </child>
+	    </widget>
+	    <packing>
+	      <property name="tab_expand">False</property>
+	      <property name="tab_fill">True</property>
+	    </packing>
+	  </child>
+
+	  <child>
+	    <widget class="GtkLabel" id="labelPageRateControl">
+	      <property name="visible">True</property>
+	      <property name="label" translatable="yes">Rate Control</property>
+	      <property name="use_underline">False</property>
+	      <property name="use_markup">False</property>
+	      <property name="justify">GTK_JUSTIFY_LEFT</property>
+	      <property name="wrap">False</property>
+	      <property name="selectable">False</property>
+	      <property name="xalign">0.5</property>
+	      <property name="yalign">0.5</property>
+	      <property name="xpad">0</property>
+	      <property name="ypad">0</property>
+	      <property name="ellipsize">PANGO_ELLIPSIZE_NONE</property>
+	      <property name="width_chars">-1</property>
+	      <property name="single_line_mode">False</property>
+	      <property name="angle">0</property>
+	    </widget>
+	    <packing>
+	      <property name="type">tab</property>
+	    </packing>
+	  </child>
+
+	  <child>
+	    <widget class="GtkAlignment" id="alignment18">
+	      <property name="visible">True</property>
+	      <property name="xalign">0.5</property>
+	      <property name="yalign">0.5</property>
+	      <property name="xscale">1</property>
+	      <property name="yscale">1</property>
+	      <property name="top_padding">7</property>
+	      <property name="bottom_padding">7</property>
+	      <property name="left_padding">7</property>
+	      <property name="right_padding">7</property>
+
+	      <child>
+		<widget class="GtkVBox" id="vbox8">
+		  <property name="visible">True</property>
+		  <property name="homogeneous">False</property>
+		  <property name="spacing">3</property>
+
+		  <child>
+		    <widget class="GtkFrame" id="frame10">
+		      <property name="visible">True</property>
+		      <property name="label_xalign">0</property>
+		      <property name="label_yalign">0.5</property>
+		      <property name="shadow_type">GTK_SHADOW_ETCHED_IN</property>
+
+		      <child>
+			<widget class="GtkAlignment" id="alignment10">
+			  <property name="visible">True</property>
+			  <property name="xalign">0.5</property>
+			  <property name="yalign">0.5</property>
+			  <property name="xscale">1</property>
+			  <property name="yscale">1</property>
+			  <property name="top_padding">7</property>
+			  <property name="bottom_padding">7</property>
+			  <property name="left_padding">7</property>
+			  <property name="right_padding">7</property>
+
+			  <child>
+			    <widget class="GtkTable" id="table15">
+			      <property name="visible">True</property>
+			      <property name="n_rows">4</property>
+			      <property name="n_columns">2</property>
+			      <property name="homogeneous">False</property>
+			      <property name="row_spacing">3</property>
+			      <property name="column_spacing">10</property>
+
+			      <child>
+				<widget class="GtkLabel" id="labelBitrateVariance">
+				  <property name="visible">True</property>
+				  <property name="label" translatable="yes">Bitrate Variance</property>
+				  <property name="use_underline">False</property>
+				  <property name="use_markup">False</property>
+				  <property name="justify">GTK_JUSTIFY_LEFT</property>
+				  <property name="wrap">False</property>
+				  <property name="selectable">False</property>
+				  <property name="xalign">0</property>
+				  <property name="yalign">0.5</property>
+				  <property name="xpad">0</property>
+				  <property name="ypad">0</property>
+				  <property name="ellipsize">PANGO_ELLIPSIZE_NONE</property>
+				  <property name="width_chars">-1</property>
+				  <property name="single_line_mode">False</property>
+				  <property name="angle">0</property>
+				</widget>
+				<packing>
+				  <property name="left_attach">0</property>
+				  <property name="right_attach">1</property>
+				  <property name="top_attach">0</property>
+				  <property name="bottom_attach">1</property>
+				  <property name="x_options">fill</property>
+				  <property name="y_options"></property>
+				</packing>
+			      </child>
+
+			      <child>
+				<widget class="GtkSpinButton" id="spinbuttonBitrateVariance">
+				  <property name="visible">True</property>
+				  <property name="tooltip" translatable="yes">Allowed variance of average bitrate. Lower values mean less variance. Higher values mean more variance.</property>
+				  <property name="can_focus">True</property>
+				  <property name="climb_rate">0.10000000149</property>
+				  <property name="digits">1</property>
+				  <property name="numeric">True</property>
+				  <property name="update_policy">GTK_UPDATE_ALWAYS</property>
+				  <property name="snap_to_ticks">False</property>
+				  <property name="wrap">False</property>
+				  <property name="adjustment">1 0 1 0.10000000149 10 10</property>
+				</widget>
+				<packing>
+				  <property name="left_attach">1</property>
+				  <property name="right_attach">2</property>
+				  <property name="top_attach">0</property>
+				  <property name="bottom_attach">1</property>
+				  <property name="x_options">fill</property>
+				  <property name="y_options"></property>
+				</packing>
+			      </child>
+
+			      <child>
+				<widget class="GtkSpinButton" id="spinbuttonQuantizerCompression">
+				  <property name="visible">True</property>
+				  <property name="tooltip" translatable="yes">Allowed variance of average quantizer or quality. Lower values mean less variance. Higher values mean more variance. Note that 0 means constant quality while 1 means constant fluctuation. Recommended 0.6.</property>
+				  <property name="can_focus">True</property>
+				  <property name="climb_rate">0.10000000149</property>
+				  <property name="digits">1</property>
+				  <property name="numeric">True</property>
+				  <property name="update_policy">GTK_UPDATE_ALWAYS</property>
+				  <property name="snap_to_ticks">False</property>
+				  <property name="wrap">False</property>
+				  <property name="adjustment">0.600000023842 0 1 0.10000000149 10 10</property>
+				</widget>
+				<packing>
+				  <property name="left_attach">1</property>
+				  <property name="right_attach">2</property>
+				  <property name="top_attach">1</property>
+				  <property name="bottom_attach">2</property>
+				  <property name="x_options">fill</property>
+				  <property name="y_options"></property>
+				</packing>
+			      </child>
+
+			      <child>
+				<widget class="GtkSpinButton" id="spinbuttonTempBlurFrame">
+				  <property name="visible">True</property>
+				  <property name="tooltip" translatable="yes">Reduced fluctuations in Quantizer (before curve compression)</property>
+				  <property name="can_focus">True</property>
+				  <property name="climb_rate">1</property>
+				  <property name="digits">0</property>
+				  <property name="numeric">True</property>
+				  <property name="update_policy">GTK_UPDATE_ALWAYS</property>
+				  <property name="snap_to_ticks">False</property>
+				  <property name="wrap">False</property>
+				  <property name="adjustment">20 0 999 1 10 10</property>
+				</widget>
+				<packing>
+				  <property name="left_attach">1</property>
+				  <property name="right_attach">2</property>
+				  <property name="top_attach">2</property>
+				  <property name="bottom_attach">3</property>
+				  <property name="x_options">fill</property>
+				  <property name="y_options"></property>
+				</packing>
+			      </child>
+
+			      <child>
+				<widget class="GtkSpinButton" id="spinbuttonTempBlurQuant">
+				  <property name="visible">True</property>
+				  <property name="can_focus">True</property>
+				  <property name="climb_rate">0.5</property>
+				  <property name="digits">1</property>
+				  <property name="numeric">True</property>
+				  <property name="update_policy">GTK_UPDATE_ALWAYS</property>
+				  <property name="snap_to_ticks">False</property>
+				  <property name="wrap">False</property>
+				  <property name="adjustment">0.5 0 1 0.5 10 10</property>
+				</widget>
+				<packing>
+				  <property name="left_attach">1</property>
+				  <property name="right_attach">2</property>
+				  <property name="top_attach">3</property>
+				  <property name="bottom_attach">4</property>
+				  <property name="x_options">fill</property>
+				  <property name="y_options"></property>
+				</packing>
+			      </child>
+
+			      <child>
+				<widget class="GtkLabel" id="labelQuantizerCompression">
+				  <property name="visible">True</property>
+				  <property name="label" translatable="yes">Quantizer Compression</property>
+				  <property name="use_underline">False</property>
+				  <property name="use_markup">False</property>
+				  <property name="justify">GTK_JUSTIFY_LEFT</property>
+				  <property name="wrap">False</property>
+				  <property name="selectable">False</property>
+				  <property name="xalign">0</property>
+				  <property name="yalign">0.5</property>
+				  <property name="xpad">0</property>
+				  <property name="ypad">0</property>
+				  <property name="ellipsize">PANGO_ELLIPSIZE_NONE</property>
+				  <property name="width_chars">-1</property>
+				  <property name="single_line_mode">False</property>
+				  <property name="angle">0</property>
+				</widget>
+				<packing>
+				  <property name="left_attach">0</property>
+				  <property name="right_attach">1</property>
+				  <property name="top_attach">1</property>
+				  <property name="bottom_attach">2</property>
+				  <property name="x_options">fill</property>
+				  <property name="y_options"></property>
+				</packing>
+			      </child>
+
+			      <child>
+				<widget class="GtkLabel" id="labelTempBlurEstFrame">
+				  <property name="visible">True</property>
+				  <property name="label" translatable="yes">Temp. Blur of Est. Frame Complexity</property>
+				  <property name="use_underline">False</property>
+				  <property name="use_markup">False</property>
+				  <property name="justify">GTK_JUSTIFY_LEFT</property>
+				  <property name="wrap">False</property>
+				  <property name="selectable">False</property>
+				  <property name="xalign">0</property>
+				  <property name="yalign">0.5</property>
+				  <property name="xpad">0</property>
+				  <property name="ypad">0</property>
+				  <property name="ellipsize">PANGO_ELLIPSIZE_NONE</property>
+				  <property name="width_chars">-1</property>
+				  <property name="single_line_mode">False</property>
+				  <property name="angle">0</property>
+				</widget>
+				<packing>
+				  <property name="left_attach">0</property>
+				  <property name="right_attach">1</property>
+				  <property name="top_attach">2</property>
+				  <property name="bottom_attach">3</property>
+				  <property name="x_options">fill</property>
+				  <property name="y_options"></property>
+				</packing>
+			      </child>
+
+			      <child>
+				<widget class="GtkLabel" id="labelTempBlueQuant">
+				  <property name="visible">True</property>
+				  <property name="label" translatable="yes">Temp. Blur of Quant. after CC</property>
+				  <property name="use_underline">False</property>
+				  <property name="use_markup">False</property>
+				  <property name="justify">GTK_JUSTIFY_LEFT</property>
+				  <property name="wrap">False</property>
+				  <property name="selectable">False</property>
+				  <property name="xalign">0</property>
+				  <property name="yalign">0.5</property>
+				  <property name="xpad">0</property>
+				  <property name="ypad">0</property>
+				  <property name="ellipsize">PANGO_ELLIPSIZE_NONE</property>
+				  <property name="width_chars">-1</property>
+				  <property name="single_line_mode">False</property>
+				  <property name="angle">0</property>
+				</widget>
+				<packing>
+				  <property name="left_attach">0</property>
+				  <property name="right_attach">1</property>
+				  <property name="top_attach">3</property>
+				  <property name="bottom_attach">4</property>
+				  <property name="x_options">fill</property>
+				  <property name="y_options"></property>
+				</packing>
+			      </child>
+			    </widget>
+			  </child>
+			</widget>
+		      </child>
+
+		      <child>
+			<widget class="GtkLabel" id="labelMisc">
+			  <property name="visible">True</property>
+			  <property name="label" translatable="yes">&lt;b&gt;Misc&lt;/b&gt;</property>
+			  <property name="use_underline">False</property>
+			  <property name="use_markup">True</property>
+			  <property name="justify">GTK_JUSTIFY_LEFT</property>
+			  <property name="wrap">False</property>
+			  <property name="selectable">False</property>
+			  <property name="xalign">0.5</property>
+			  <property name="yalign">0.5</property>
+			  <property name="xpad">0</property>
+			  <property name="ypad">0</property>
+			  <property name="ellipsize">PANGO_ELLIPSIZE_NONE</property>
+			  <property name="width_chars">-1</property>
+			  <property name="single_line_mode">False</property>
+			  <property name="angle">0</property>
+			</widget>
+			<packing>
+			  <property name="type">label_item</property>
+			</packing>
+		      </child>
+		    </widget>
+		    <packing>
+		      <property name="padding">0</property>
+		      <property name="expand">False</property>
+		      <property name="fill">True</property>
+		    </packing>
+		  </child>
+
+		  <child>
+		    <widget class="GtkFrame" id="frame11">
+		      <property name="visible">True</property>
+		      <property name="label_xalign">0</property>
+		      <property name="label_yalign">0.5</property>
+		      <property name="shadow_type">GTK_SHADOW_ETCHED_IN</property>
+
+		      <child>
+			<widget class="GtkAlignment" id="alignment13">
+			  <property name="visible">True</property>
+			  <property name="xalign">0.5</property>
+			  <property name="yalign">0.5</property>
+			  <property name="xscale">1</property>
+			  <property name="yscale">1</property>
+			  <property name="top_padding">7</property>
+			  <property name="bottom_padding">7</property>
+			  <property name="left_padding">7</property>
+			  <property name="right_padding">7</property>
+
+			  <child>
+			    <widget class="GtkTable" id="table16">
+			      <property name="visible">True</property>
+			      <property name="n_rows">3</property>
+			      <property name="n_columns">2</property>
+			      <property name="homogeneous">False</property>
+			      <property name="row_spacing">3</property>
+			      <property name="column_spacing">10</property>
+
+			      <child>
+				<widget class="GtkSpinButton" id="spinbutton8">
+				  <property name="visible">True</property>
+				  <property name="tooltip" translatable="yes">Quantization factors used between I and P-frames</property>
+				  <property name="can_focus">True</property>
+				  <property name="climb_rate">0.10000000149</property>
+				  <property name="digits">1</property>
+				  <property name="numeric">True</property>
+				  <property name="update_policy">GTK_UPDATE_ALWAYS</property>
+				  <property name="snap_to_ticks">False</property>
+				  <property name="wrap">False</property>
+				  <property name="adjustment">1.39999997616 1 10 0.10000000149 10 10</property>
+				</widget>
+				<packing>
+				  <property name="left_attach">1</property>
+				  <property name="right_attach">2</property>
+				  <property name="top_attach">0</property>
+				  <property name="bottom_attach">1</property>
+				  <property name="x_options">fill</property>
+				  <property name="y_options"></property>
+				</packing>
+			      </child>
+
+			      <child>
+				<widget class="GtkSpinButton" id="spinbutton9">
+				  <property name="visible">True</property>
+				  <property name="tooltip" translatable="yes">Quantization used between P and B-frames</property>
+				  <property name="can_focus">True</property>
+				  <property name="climb_rate">0.10000000149</property>
+				  <property name="digits">1</property>
+				  <property name="numeric">True</property>
+				  <property name="update_policy">GTK_UPDATE_ALWAYS</property>
+				  <property name="snap_to_ticks">False</property>
+				  <property name="wrap">False</property>
+				  <property name="adjustment">1.29999995232 1 10 0.10000000149 10 10</property>
+				</widget>
+				<packing>
+				  <property name="left_attach">1</property>
+				  <property name="right_attach">2</property>
+				  <property name="top_attach">1</property>
+				  <property name="bottom_attach">2</property>
+				  <property name="x_options">fill</property>
+				  <property name="y_options"></property>
+				</packing>
+			      </child>
+
+			      <child>
+				<widget class="GtkSpinButton" id="spinbuttonChromaQPOffset">
+				  <property name="visible">True</property>
+				  <property name="tooltip" translatable="yes">Quantization difference between chroma (color) and luma (brightness)</property>
+				  <property name="can_focus">True</property>
+				  <property name="climb_rate">1</property>
+				  <property name="digits">0</property>
+				  <property name="numeric">True</property>
+				  <property name="update_policy">GTK_UPDATE_ALWAYS</property>
+				  <property name="snap_to_ticks">False</property>
+				  <property name="wrap">False</property>
+				  <property name="adjustment">0 -12 12 1 10 10</property>
+				</widget>
+				<packing>
+				  <property name="left_attach">1</property>
+				  <property name="right_attach">2</property>
+				  <property name="top_attach">2</property>
+				  <property name="bottom_attach">3</property>
+				  <property name="x_options">fill</property>
+				  <property name="y_options"></property>
+				</packing>
+			      </child>
+
+			      <child>
+				<widget class="GtkLabel" id="labelFactorbetweenIandP">
+				  <property name="visible">True</property>
+				  <property name="label" translatable="yes">Factor between I and P-frame Quants</property>
+				  <property name="use_underline">False</property>
+				  <property name="use_markup">False</property>
+				  <property name="justify">GTK_JUSTIFY_LEFT</property>
+				  <property name="wrap">False</property>
+				  <property name="selectable">False</property>
+				  <property name="xalign">0</property>
+				  <property name="yalign">0.5</property>
+				  <property name="xpad">0</property>
+				  <property name="ypad">0</property>
+				  <property name="ellipsize">PANGO_ELLIPSIZE_NONE</property>
+				  <property name="width_chars">-1</property>
+				  <property name="single_line_mode">False</property>
+				  <property name="angle">0</property>
+				</widget>
+				<packing>
+				  <property name="left_attach">0</property>
+				  <property name="right_attach">1</property>
+				  <property name="top_attach">0</property>
+				  <property name="bottom_attach">1</property>
+				  <property name="x_options">fill</property>
+				  <property name="y_options"></property>
+				</packing>
+			      </child>
+
+			      <child>
+				<widget class="GtkLabel" id="labelFactorbetweenPandB">
+				  <property name="visible">True</property>
+				  <property name="label" translatable="yes">Factor between P and B-frame Quants</property>
+				  <property name="use_underline">False</property>
+				  <property name="use_markup">False</property>
+				  <property name="justify">GTK_JUSTIFY_LEFT</property>
+				  <property name="wrap">False</property>
+				  <property name="selectable">False</property>
+				  <property name="xalign">0</property>
+				  <property name="yalign">0.5</property>
+				  <property name="xpad">0</property>
+				  <property name="ypad">0</property>
+				  <property name="ellipsize">PANGO_ELLIPSIZE_NONE</property>
+				  <property name="width_chars">-1</property>
+				  <property name="single_line_mode">False</property>
+				  <property name="angle">0</property>
+				</widget>
+				<packing>
+				  <property name="left_attach">0</property>
+				  <property name="right_attach">1</property>
+				  <property name="top_attach">1</property>
+				  <property name="bottom_attach">2</property>
+				  <property name="x_options">fill</property>
+				  <property name="y_options"></property>
+				</packing>
+			      </child>
+
+			      <child>
+				<widget class="GtkLabel" id="labelChromaQPOffset">
+				  <property name="visible">True</property>
+				  <property name="label" translatable="yes">Chroma QP Offset</property>
+				  <property name="use_underline">False</property>
+				  <property name="use_markup">False</property>
+				  <property name="justify">GTK_JUSTIFY_LEFT</property>
+				  <property name="wrap">False</property>
+				  <property name="selectable">False</property>
+				  <property name="xalign">0</property>
+				  <property name="yalign">0.5</property>
+				  <property name="xpad">0</property>
+				  <property name="ypad">0</property>
+				  <property name="ellipsize">PANGO_ELLIPSIZE_NONE</property>
+				  <property name="width_chars">-1</property>
+				  <property name="single_line_mode">False</property>
+				  <property name="angle">0</property>
+				</widget>
+				<packing>
+				  <property name="left_attach">0</property>
+				  <property name="right_attach">1</property>
+				  <property name="top_attach">2</property>
+				  <property name="bottom_attach">3</property>
+				  <property name="x_options">fill</property>
+				  <property name="y_options"></property>
+				</packing>
+			      </child>
+			    </widget>
+			  </child>
+			</widget>
+		      </child>
+
+		      <child>
+			<widget class="GtkLabel" id="labelQuantizers">
+			  <property name="visible">True</property>
+			  <property name="label" translatable="yes">&lt;b&gt;Quantizers&lt;/b&gt;</property>
+			  <property name="use_underline">False</property>
+			  <property name="use_markup">True</property>
+			  <property name="justify">GTK_JUSTIFY_LEFT</property>
+			  <property name="wrap">False</property>
+			  <property name="selectable">False</property>
+			  <property name="xalign">0.5</property>
+			  <property name="yalign">0.5</property>
+			  <property name="xpad">0</property>
+			  <property name="ypad">0</property>
+			  <property name="ellipsize">PANGO_ELLIPSIZE_NONE</property>
+			  <property name="width_chars">-1</property>
+			  <property name="single_line_mode">False</property>
+			  <property name="angle">0</property>
+			</widget>
+			<packing>
+			  <property name="type">label_item</property>
+			</packing>
+		      </child>
+		    </widget>
+		    <packing>
+		      <property name="padding">0</property>
+		      <property name="expand">False</property>
+		      <property name="fill">True</property>
+		    </packing>
+		  </child>
+
+		  <child>
+		    <widget class="GtkFrame" id="frame9">
+		      <property name="visible">True</property>
+		      <property name="label_xalign">0</property>
+		      <property name="label_yalign">0.5</property>
+		      <property name="shadow_type">GTK_SHADOW_ETCHED_IN</property>
+
+		      <child>
+			<widget class="GtkAlignment" id="alignment9">
+			  <property name="visible">True</property>
+			  <property name="xalign">0.5</property>
+			  <property name="yalign">0.5</property>
+			  <property name="xscale">1</property>
+			  <property name="yscale">1</property>
+			  <property name="top_padding">7</property>
+			  <property name="bottom_padding">7</property>
+			  <property name="left_padding">7</property>
+			  <property name="right_padding">7</property>
+
+			  <child>
+			    <widget class="GtkVBox" id="vbox9">
+			      <property name="visible">True</property>
+			      <property name="homogeneous">False</property>
+			      <property name="spacing">3</property>
+
+			      <child>
+				<widget class="GtkRadioButton" id="radiobuttonFlatmatrix">
+				  <property name="visible">True</property>
+				  <property name="can_focus">True</property>
+				  <property name="label" translatable="yes">Flat Matrix</property>
+				  <property name="use_underline">True</property>
+				  <property name="relief">GTK_RELIEF_NORMAL</property>
+				  <property name="focus_on_click">True</property>
+				  <property name="active">True</property>
+				  <property name="inconsistent">False</property>
+				  <property name="draw_indicator">True</property>
+				</widget>
+				<packing>
+				  <property name="padding">0</property>
+				  <property name="expand">False</property>
+				  <property name="fill">False</property>
+				</packing>
+			      </child>
+
+			      <child>
+				<widget class="GtkRadioButton" id="radiobuttonJVTmatrix">
+				  <property name="visible">True</property>
+				  <property name="can_focus">True</property>
+				  <property name="label" translatable="yes">JVT Matrix</property>
+				  <property name="use_underline">True</property>
+				  <property name="relief">GTK_RELIEF_NORMAL</property>
+				  <property name="focus_on_click">True</property>
+				  <property name="active">False</property>
+				  <property name="inconsistent">False</property>
+				  <property name="draw_indicator">True</property>
+				  <property name="group">radiobuttonFlatmatrix</property>
+				</widget>
+				<packing>
+				  <property name="padding">0</property>
+				  <property name="expand">False</property>
+				  <property name="fill">False</property>
+				</packing>
+			      </child>
+
+			      <child>
+				<widget class="GtkHBox" id="hbox13">
+				  <property name="visible">True</property>
+				  <property name="homogeneous">False</property>
+				  <property name="spacing">10</property>
+
+				  <child>
+				    <widget class="GtkRadioButton" id="radiobuttonCustommatrix">
+				      <property name="visible">True</property>
+				      <property name="can_focus">True</property>
+				      <property name="label" translatable="yes">Custom Matrix</property>
+				      <property name="use_underline">True</property>
+				      <property name="relief">GTK_RELIEF_NORMAL</property>
+				      <property name="focus_on_click">True</property>
+				      <property name="active">False</property>
+				      <property name="inconsistent">False</property>
+				      <property name="draw_indicator">True</property>
+				      <property name="group">radiobuttonFlatmatrix</property>
+				    </widget>
+				    <packing>
+				      <property name="padding">0</property>
+				      <property name="expand">True</property>
+				      <property name="fill">True</property>
+				    </packing>
+				  </child>
+
+				  <child>
+				    <widget class="GtkHBox" id="hbox14">
+				      <property name="visible">True</property>
+				      <property name="homogeneous">False</property>
+				      <property name="spacing">0</property>
+
+				      <child>
+					<widget class="GtkFileChooserButton" id="filechooserbuttonOpenCQMFile">
+					  <property name="visible">True</property>
+					  <property name="title" translatable="yes">Open CQM file</property>
+					  <property name="action">GTK_FILE_CHOOSER_ACTION_OPEN</property>
+					  <property name="local_only">True</property>
+					  <property name="show_hidden">False</property>
+					  <property name="width_chars">-1</property>
+					</widget>
+					<packing>
+					  <property name="padding">0</property>
+					  <property name="expand">True</property>
+					  <property name="fill">True</property>
+					</packing>
+				      </child>
+
+				      <child>
+					<widget class="GtkVSeparator" id="vseparator1">
+					  <property name="visible">True</property>
+					</widget>
+					<packing>
+					  <property name="padding">0</property>
+					  <property name="expand">True</property>
+					  <property name="fill">True</property>
+					</packing>
+				      </child>
+
+				      <child>
+					<widget class="GtkButton" id="buttonEditCustomMatrix">
+					  <property name="visible">True</property>
+					  <property name="tooltip" translatable="yes">Edit loaded custom quantization matrix file</property>
+					  <property name="can_focus">True</property>
+					  <property name="label" translatable="yes">Edit Custom Matrix</property>
+					  <property name="use_underline">True</property>
+					  <property name="relief">GTK_RELIEF_NORMAL</property>
+					  <property name="focus_on_click">True</property>
+					</widget>
+					<packing>
+					  <property name="padding">0</property>
+					  <property name="expand">False</property>
+					  <property name="fill">False</property>
+					</packing>
+				      </child>
+				    </widget>
+				    <packing>
+				      <property name="padding">0</property>
+				      <property name="expand">True</property>
+				      <property name="fill">True</property>
+				    </packing>
+				  </child>
+				</widget>
+				<packing>
+				  <property name="padding">0</property>
+				  <property name="expand">False</property>
+				  <property name="fill">False</property>
+				</packing>
+			      </child>
+			    </widget>
+			  </child>
+			</widget>
+		      </child>
+
+		      <child>
+			<widget class="GtkLabel" id="labelFrameQuantizationMatrices">
+			  <property name="visible">True</property>
+			  <property name="label" translatable="yes">&lt;b&gt;Quantization Matrices&lt;/b&gt;</property>
+			  <property name="use_underline">False</property>
+			  <property name="use_markup">True</property>
+			  <property name="justify">GTK_JUSTIFY_LEFT</property>
+			  <property name="wrap">False</property>
+			  <property name="selectable">False</property>
+			  <property name="xalign">0.5</property>
+			  <property name="yalign">0.5</property>
+			  <property name="xpad">0</property>
+			  <property name="ypad">0</property>
+			  <property name="ellipsize">PANGO_ELLIPSIZE_NONE</property>
+			  <property name="width_chars">-1</property>
+			  <property name="single_line_mode">False</property>
+			  <property name="angle">0</property>
+			</widget>
+			<packing>
+			  <property name="type">label_item</property>
+			</packing>
+		      </child>
+		    </widget>
+		    <packing>
+		      <property name="padding">0</property>
+		      <property name="expand">False</property>
+		      <property name="fill">True</property>
+		    </packing>
+		  </child>
+		</widget>
+	      </child>
+	    </widget>
+	    <packing>
+	      <property name="tab_expand">False</property>
+	      <property name="tab_fill">True</property>
+	    </packing>
+	  </child>
+
+	  <child>
+	    <widget class="GtkLabel" id="labelMore">
+	      <property name="visible">True</property>
+	      <property name="label" translatable="yes">More</property>
+	      <property name="use_underline">False</property>
+	      <property name="use_markup">False</property>
+	      <property name="justify">GTK_JUSTIFY_LEFT</property>
+	      <property name="wrap">False</property>
+	      <property name="selectable">False</property>
+	      <property name="xalign">0.5</property>
+	      <property name="yalign">0.5</property>
+	      <property name="xpad">0</property>
+	      <property name="ypad">0</property>
+	      <property name="ellipsize">PANGO_ELLIPSIZE_NONE</property>
+	      <property name="width_chars">-1</property>
+	      <property name="single_line_mode">False</property>
+	      <property name="angle">0</property>
+	    </widget>
+	    <packing>
+	      <property name="type">tab</property>
+	    </packing>
+	  </child>
+	</widget>
+	<packing>
+	  <property name="padding">0</property>
+	  <property name="expand">True</property>
+	  <property name="fill">True</property>
+	</packing>
+      </child>
+    </widget>
+  </child>
+</widget>
+
+</glade-interface>

Modified: branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_x264.cpp
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_x264.cpp	2008-01-29 20:12:26 UTC (rev 3782)
+++ branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_x264.cpp	2008-02-01 14:43:14 UTC (rev 3783)
@@ -8,26 +8,26 @@
 #include <stdio.h>
 #include <stdlib.h>
 #include <string.h>
-#include <ADM_assert.h>
 #include <math.h>
-#include <math.h>
-#include <iconv.h>
+
+#include "ADM_assert.h"
 #include "config.h"
 
-
 #include "fourcc.h"
 #include "avio.hxx"
-
 #include "avi_vars.h"
 
 #include "ADM_toolkit/toolkit.hxx"
-
 #include "ADM_userInterfaces/ADM_commonUI/DIA_factory.h"
-#include "ADM_assert.h" 
-
 #include "ADM_encoder/ADM_vidEncode.hxx"
+#include "ADM_codecs/ADM_x264param.h"
 
-#include "ADM_codecs/ADM_x264param.h"
+#ifdef USE_X264
+extern "C"
+{
+#include "x264.h"
+}
+#endif
 /**
       \fn DIA_x264
       \brief Dialog for x264 codec settings
@@ -62,19 +62,30 @@
                 ,{5,    QT_TR_NOOP("5  - High (Default)")}
                 ,{6,    QT_TR_NOOP("6  - Very High")}
                 ,{7,    QT_TR_NOOP("6B - Very High (RDO on Bframes)")}
-                ,{8,    QT_TR_NOOP("7 - Ultra High")}
+                ,{8,    QT_TR_NOOP("7  - Ultra High")}
                 ,{9,    QT_TR_NOOP("7B - Ultra High (RDO on Bframes)")}};
 
                             
         diaElemMenu parition(PX(PartitionDecision),QT_TR_NOOP("Partition Decision"),10,partitionM);
         
          diaMenuEntry meM[] = {
-                             {0,    QT_TR_NOOP("Diamond search")},
-                             {1,    QT_TR_NOOP("Hexagonal search")},
-                             {2,    QT_TR_NOOP("Uneven multi hexagon")},
-                             {3,    QT_TR_NOOP("Exhaustive search")}}
-                             ;
-         diaElemMenu      me(PX(Method),QT_TR_NOOP("VHQ Mode"),4,meM);
+                             {0,    QT_TR_NOOP("Diamond Search")},
+                             {1,    QT_TR_NOOP("Hexagonal Search")},
+                             {2,    QT_TR_NOOP("Uneven Multi-hexagon")},
+                             {3,    QT_TR_NOOP("Exhaustive Search")}
+#if X264_BUILD >= 58
+							 ,{4, QT_TR_NOOP("Hadamard Exhaustive Search")}
+#endif
+							 };
+
+         diaElemMenu      me(PX(Method),QT_TR_NOOP("VHQ Mode"),
+ #if X264_BUILD >= 58
+			 5
+#else
+			 4
+#endif
+			 ,meM);
+
          diaElemUInteger  rframe(PX(MaxRefFrames),QT_TR_NOOP("Max Ref Frames"),0,15);
          diaElemUInteger  range(PX(Range),QT_TR_NOOP("Max B Frames"),0,64);
          diaElemToggle    chromaMe(PX(ChromaME),QT_TR_NOOP("Chroma ME"));
@@ -149,7 +160,7 @@
            
           /* End of tabs */
         diaElemTabs *tabs[4]={&tabMain,&tabMotion,&tabMisc,&tabTransform};
-        if( diaFactoryRunTabs(QT_TR_NOOP("X264 Configuration"),4,tabs))
+        if( diaFactoryRunTabs(QT_TR_NOOP("x264 Configuration"),4,tabs))
 	{
            memcpy(config->extraSettings,&localParam,sizeof(localParam));
            return 1;



From gruntster at mail.berlios.de  Fri Feb  1 15:44:39 2008
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Fri, 1 Feb 2008 15:44:39 +0100
Subject: [Avidemux-svn-commit] r3784 - branches/avidemux_2.4_branch/avidemux
Message-ID: <200802011444.m11EidX9004624@sheep.berlios.de>

Author: gruntster
Date: 2008-02-01 15:44:32 +0100 (Fri, 01 Feb 2008)
New Revision: 3784

Modified:
   branches/avidemux_2.4_branch/avidemux/CMakeLists.txt
Log:
[Win32] build CLI as a console application

Modified: branches/avidemux_2.4_branch/avidemux/CMakeLists.txt
===================================================================
--- branches/avidemux_2.4_branch/avidemux/CMakeLists.txt	2008-02-01 14:43:14 UTC (rev 3783)
+++ branches/avidemux_2.4_branch/avidemux/CMakeLists.txt	2008-02-01 14:44:32 UTC (rev 3784)
@@ -401,8 +401,18 @@
 	add_libs_all_targets(wsock32)
 	add_libs_all_targets(imagehlp)
 
-	add_ldflags_all_targets("-mms-bitfield -mno-cygwin -mwinmm -mwindows ${CMAKE_SOURCE_DIR}/avidemux/xpm/adm.o -Wl,--export-all-symbols")
+	add_libs_all_targets("-mms-bitfield -mno-cygwin ${CMAKE_SOURCE_DIR}/avidemux/xpm/adm.o -Wl,--export-all-symbols")
 
+	TARGET_LINK_LIBRARIES(avidemux2_cli "-Wl,-subsystem,console")
+	
+	if (GTK_FOUND)
+		TARGET_LINK_LIBRARIES(avidemux2_gtk "-mwindows")
+	endif(GTK_FOUND)
+	
+	if (QT4_FOUND)
+		TARGET_LINK_LIBRARIES(avidemux2_qt4 "-mwindows")
+	endif(QT4_FOUND)
+
 	if(CMAKE_BUILD_TYPE STREQUAL "Release")
 		add_ldflags_all_targets("-Wl,-s")
 	endif(CMAKE_BUILD_TYPE STREQUAL "Release")



From mean at mail.berlios.de  Sat Feb  2 18:47:07 2008
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sat, 2 Feb 2008 18:47:07 +0100
Subject: [Avidemux-svn-commit] r3785 -
	branches/avidemux_2.4_branch/avidemux/ADM_encoder
Message-ID: <200802021747.m12Hl7ZG020780@sheep.berlios.de>

Author: mean
Date: 2008-02-02 18:46:58 +0100 (Sat, 02 Feb 2008)
New Revision: 3785

Modified:
   branches/avidemux_2.4_branch/avidemux/ADM_encoder/ADM_encCodecDesc.h
Log:
[encoder] Unlock same qz as input mode for lavc

Modified: branches/avidemux_2.4_branch/avidemux/ADM_encoder/ADM_encCodecDesc.h
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_encoder/ADM_encCodecDesc.h	2008-02-01 14:44:32 UTC (rev 3784)
+++ branches/avidemux_2.4_branch/avidemux/ADM_encoder/ADM_encCodecDesc.h	2008-02-02 17:46:58 UTC (rev 3785)
@@ -116,7 +116,7 @@
   1500,
   700,
   1000, // AVG
-  ADM_ENC_CAP_CBR + ADM_ENC_CAP_CQ + ADM_ENC_CAP_2PASS,
+  ADM_ENC_CAP_CBR + ADM_ENC_CAP_CQ + ADM_ENC_CAP_2PASS+ADM_ENC_CAP_SAME,
   ADM_EXTRA_PARAM,
   &ffmpeg4Extra,
   sizeof (ffmpeg4Extra),
@@ -132,7 +132,7 @@
   1500,
   700,
   1000, // AVG
-  ADM_ENC_CAP_CBR + ADM_ENC_CAP_CQ + ADM_ENC_CAP_2PASS,
+  ADM_ENC_CAP_CBR + ADM_ENC_CAP_CQ + ADM_ENC_CAP_2PASS+ADM_ENC_CAP_SAME,
   ADM_EXTRA_PARAM,
   &ffmpeg4Extra,
   sizeof (ffmpeg4Extra),
@@ -148,7 +148,7 @@
   1500,
   700,
   1000, // AVG
-  ADM_ENC_CAP_CBR + ADM_ENC_CAP_CQ + ADM_ENC_CAP_2PASS+ADM_ENC_CAP_2PASS_BR,
+  ADM_ENC_CAP_CBR + ADM_ENC_CAP_CQ + ADM_ENC_CAP_2PASS+ADM_ENC_CAP_2PASS_BR+ADM_ENC_CAP_SAME,
   ADM_EXTRA_PARAM,
   &ffmpeg4Extra,
   sizeof (ffmpeg4Extra),



From gruntster at mail.berlios.de  Sat Feb  2 20:53:55 2008
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Sat, 2 Feb 2008 20:53:55 +0100
Subject: [Avidemux-svn-commit] r3786 - in
	branches/avidemux_2.4_branch/avidemux: . ADM_osSupport
Message-ID: <200802021953.m12JrtlY019868@sheep.berlios.de>

Author: gruntster
Date: 2008-02-02 20:53:49 +0100 (Sat, 02 Feb 2008)
New Revision: 3786

Modified:
   branches/avidemux_2.4_branch/avidemux/ADM_osSupport/win32.cpp
   branches/avidemux_2.4_branch/avidemux/main.cpp
Log:
[Win32] redirect stdout and stderr to admlog.txt in user's profile folder

Modified: branches/avidemux_2.4_branch/avidemux/ADM_osSupport/win32.cpp
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_osSupport/win32.cpp	2008-02-02 17:46:58 UTC (rev 3785)
+++ branches/avidemux_2.4_branch/avidemux/ADM_osSupport/win32.cpp	2008-02-02 19:53:49 UTC (rev 3786)
@@ -13,6 +13,7 @@
 #include "ADM_assert.h" 
 
 uint8_t win32_netInit(void);
+extern char *ADM_getBaseDir(void);
 
 void ADM_usleep(unsigned long us)
 {
@@ -426,4 +427,59 @@
 		*height = monitorInfo.rcWork.bottom - monitorInfo.rcWork.top;
 	}
 }
+
+void redirectStdoutToFile(void)
+{
+	// Don't redirect stdout and stderr if SDL hasn't already hijacked it.
+	// This allows us to optionally compile all EXEs as console applications
+	// so the output can be printed to the terminal for debugging purposes.
+
+#ifdef USE_SDL
+	// Close SDL generated logs
+	fclose(stdout);
+	fclose(stderr);
+
+	// Briefly redirect to console
+	freopen("CON", "w", stdout);
+	freopen("CON", "w", stderr);
+
+	// Remove SDL logs to avoid confusion
+	char path[MAX_PATH];
+	char stdoutPath[MAX_PATH];
+	char stderrPath[MAX_PATH];
+	DWORD pathlen = GetModuleFileName(NULL, path, MAX_PATH);
+
+	while (pathlen > 0 && path[pathlen] != '\\')
+		pathlen--;
+
+	path[pathlen] = '\0';
+
+	strcpy(stdoutPath, path);
+	strcat(stdoutPath, "\\stdout.txt");
+	strcpy(stderrPath, path);
+	strcat(stderrPath, "\\stderr.txt");
+
+	remove(stdoutPath);
+	remove(stderrPath);
+
+	// Redirect output to log file in the user's profile directory
+	const char* logFile = "admlog.txt";
+	char* baseDir = ADM_getBaseDir();
+	char *logPath = new char[strlen(baseDir) + 2 + strlen(logFile)];
+	FILE* stream;
+
+	strcpy(logPath, baseDir);
+	strcat(logPath, "/");
+	strcat(logPath, logFile);
+
+	stream = freopen(logPath, "w", stdout);
+	*stderr = *stream;
+
+	// Line buffering
+	setvbuf(stdout, NULL, _IOLBF, BUFSIZ); 
+	setvbuf(stderr, NULL, _IOLBF, BUFSIZ);
+
+	delete[] logPath;
 #endif
+}
+#endif

Modified: branches/avidemux_2.4_branch/avidemux/main.cpp
===================================================================
--- branches/avidemux_2.4_branch/avidemux/main.cpp	2008-02-02 17:46:58 UTC (rev 3785)
+++ branches/avidemux_2.4_branch/avidemux/main.cpp	2008-02-02 19:53:49 UTC (rev 3786)
@@ -84,6 +84,7 @@
 #ifdef ADM_WIN32
 extern EXCEPTION_DISPOSITION exceptionHandler(struct _EXCEPTION_RECORD* pExceptionRec, void* pEstablisherFrame, struct _CONTEXT* pContextRecord, void* pDispatcherContext);
 extern bool getWindowsVersion(char* version);
+extern void redirectStdoutToFile(void);
 #else
 extern void installSigHandler(void);
 #endif
@@ -110,6 +111,10 @@
 
 int main(int argc, char *argv[])
 {
+#ifdef ADM_WIN32
+	redirectStdoutToFile();
+#endif
+
 #if defined(ADM_DEBUG) && defined(FIND_LEAKS)
 	new_progname = argv[0];
 #endif



From gruntster at mail.berlios.de  Sun Feb  3 10:40:27 2008
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Sun, 3 Feb 2008 10:40:27 +0100
Subject: [Avidemux-svn-commit] r3787 - branches/avidemux_2.4_branch/po
Message-ID: <200802030940.m139eRFJ014740@sheep.berlios.de>

Author: gruntster
Date: 2008-02-03 10:40:17 +0100 (Sun, 03 Feb 2008)
New Revision: 3787

Modified:
   branches/avidemux_2.4_branch/po/es.po
Log:
[I18N] Spanish update by F. Dacoba

Modified: branches/avidemux_2.4_branch/po/es.po
===================================================================
--- branches/avidemux_2.4_branch/po/es.po	2008-02-02 19:53:49 UTC (rev 3786)
+++ branches/avidemux_2.4_branch/po/es.po	2008-02-03 09:40:17 UTC (rev 3787)
@@ -1,21 +1,28 @@
-# translation of es.po to Castellano
-# This file is distributed under the same license as the PACKAGE package.
+# translation of es.po to Espa?ol
+# This file is distributed under the same license as the Avidemux package.
 # Copyright (C) YEAR THE PACKAGE'S COPYRIGHT HOLDER
 # David Losada G. <david.losadag at gmail.com>, 2007
 # with parts from Gustavo D. Vranjes <gvranjes at SoftHome.net>, 2003
+# Festor Wailon Dacoba <festor90 at gmail.com>, 2007
+# Rael Garcia Arnes <raelga at gmail.com>, 2007
 #
+# Post de organizaci?n: http://www.avidemux.org/admForum/viewtopic.php?id=4032
+#
+#
 msgid ""
 msgstr ""
-"Project-Id-Version: es\n"
+"Project-Id-Version: Avidemux 2.4\n"
 "Report-Msgid-Bugs-To: \n"
-"POT-Creation-Date: 2007-09-26 14:47+0100\n"
-"PO-Revision-Date: 2003-10-04 22:20GMT\n"
-"Last-Translator: David Losada G. <david.losadag at gmail.com>\n"
-"Language-Team: Castellano <es at li.org>\n"
+"POT-Creation-Date: 2007-04-24 13:16+0100\n"
+"PO-Revision-Date: 2007-12-22 11:50+0100\n"
+"Last-Translator: Festor Wailon Dacoba <festor90 at gmail.com>\n"
+"Language-Team: Linuxeros de toda la vida xD <festor90 at gmail.com>\n"
 "MIME-Version: 1.0\n"
 "Content-Type: text/plain; charset=UTF-8\n"
 "Content-Transfer-Encoding: 8bit\n"
 "X-Generator: KBabel 1.1\n"
+"X-Poedit-Language: Spanish\n"
+"X-Poedit-Country: SPAIN\n"
 
 #: avidemux/ADM_editor/ADM_outputfmt.h:42
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:511
@@ -27,27 +34,24 @@
 msgstr "AVI, sonido dual"
 
 #: avidemux/ADM_editor/ADM_outputfmt.h:44
-#, fuzzy
 msgid "AVI, pack VOP"
-msgstr "AVI, BOP desemp."
+msgstr "AVI, pack VOP"
 
 #: avidemux/ADM_editor/ADM_outputfmt.h:45
 msgid "AVI, unpack VOP"
-msgstr ""
+msgstr "AVI, unpack VOP"
 
 #: avidemux/ADM_editor/ADM_outputfmt.h:46
-#, fuzzy
 msgid "MPEG-PS (A+V)"
-msgstr "MPEG PS A+V"
+msgstr "MPEG-PS (A+V)"
 
 #: avidemux/ADM_editor/ADM_outputfmt.h:47
-#, fuzzy
 msgid "MPEG-TS (A+V)"
-msgstr "MPEG TS A+V"
+msgstr "MPEG-TS (A+V)"
 
 #: avidemux/ADM_editor/ADM_outputfmt.h:48
 msgid "MPEG video"
-msgstr ""
+msgstr "V?deo MPEG"
 
 #: avidemux/ADM_editor/ADM_outputfmt.h:49
 msgid "MP4"
@@ -64,19 +68,18 @@
 
 #: avidemux/ADM_editor/ADM_outputfmt.h:52
 msgid "FLV"
-msgstr ""
+msgstr "FLV"
 
 #: avidemux/ADM_editor/ADM_outputfmt.h:53
 msgid "MKV"
-msgstr ""
+msgstr "MKV"
 
 #: avidemux/ADM_editor/ADM_outputfmt.h:54
 msgid "DUMMY"
-msgstr ""
+msgstr "DUMMY"
 
 #: avidemux/ADM_audio/audiotimeline.cpp:85
 #: avidemux/ADM_audio/audiotimeline.cpp:96
-#, fuzzy
 msgid "Building VBR map"
 msgstr "Construyendo mapa de tiempo VBR"
 
@@ -109,9 +112,8 @@
 msgstr "Est(c)reo"
 
 #: avidemux/ADM_audiofilter/audioencoder_lame.cpp:221
-#, fuzzy
 msgid "Joint stereo"
-msgstr "Est(c)reo Enlazado"
+msgstr "Est?reo enlazado"
 
 #: avidemux/ADM_audiofilter/audioencoder_lame.cpp:222
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:103
@@ -121,38 +123,36 @@
 
 #: avidemux/ADM_audiofilter/audioencoder_lame.cpp:224
 msgid "C_hannel mode:"
-msgstr ""
+msgstr "<b>Modo de canal:</b>"
 
 #: avidemux/ADM_audiofilter/audioencoder_lame.cpp:227
-#, fuzzy
 msgid "CBR"
-msgstr "VBR"
+msgstr "CBR"
 
 #: avidemux/ADM_audiofilter/audioencoder_lame.cpp:228
-#, fuzzy
 msgid "ABR"
-msgstr "VBR"
+msgstr "ABR"
 
 #: avidemux/ADM_audiofilter/audioencoder_lame.cpp:230
 msgid "Extreme"
-msgstr ""
+msgstr "Extremo"
 
 #: avidemux/ADM_audiofilter/audioencoder_lame.cpp:233
 msgid "Bit_rate mode:"
-msgstr ""
+msgstr "Modo bitrate:"
 
 #: avidemux/ADM_audiofilter/audioencoder_lame.cpp:246
 #: avidemux/ADM_audiofilter/audioencoder_vorbis.cpp:288
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioconfig.cpp:59
 msgid "_Bitrate:"
-msgstr ""
+msgstr "Bitrate"
 
 #: avidemux/ADM_audiofilter/audioencoder_lame.cpp:251
 #: avidemux/ADM_audiofilter/audioencoder_vorbis.cpp:290
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_mjpeg.cpp:40
 #: avidemux/ADM_videoFilter/ADM_vidDecDec.cpp:204
 msgid "_Quality:"
-msgstr ""
+msgstr "_Calidad"
 
 #: avidemux/ADM_audiofilter/audioencoder_lame.cpp:252
 msgid "_Disable reservoir:"
@@ -164,27 +164,27 @@
 
 #: avidemux/ADM_audiofilter/audioencoder_vorbis.cpp:272
 msgid "Quality based"
-msgstr ""
+msgstr "Calidad "
 
 #: avidemux/ADM_audiofilter/audioencoder_vorbis.cpp:274
 #: avidemux/ADM_videoFilter/ADM_vidDecDec.cpp:203
 #: avidemux/ADM_videoFilter/ADM_vidDGbob.cpp:91
 #: avidemux/ADM_videoFilter/ADM_vidMcDeint.cpp:113
 #: avidemux/ADM_videoFilter/ADM_vidYadif.cpp:181
-#, fuzzy
 msgid "_Mode:"
-msgstr "Modo: "
+msgstr "_Modo:"
 
 #: avidemux/ADM_audiofilter/audiofilter_buildchain.cpp:322
-#: avidemux/gui_autodrive.cpp:78 avidemux/gui_autodrive.cpp:93
-#: avidemux/gui_autodrive.cpp:120 avidemux/gui_autodrive.cpp:154
+#: avidemux/gui_autodrive.cpp:78
+#: avidemux/gui_autodrive.cpp:93
+#: avidemux/gui_autodrive.cpp:120
+#: avidemux/gui_autodrive.cpp:154
 msgid "Codec Error"
 msgstr "Error de codec"
 
 #: avidemux/ADM_audiofilter/audiofilter_buildchain.cpp:322
 msgid ""
-"The number of channels is greater than what the selected audio codec can "
-"do.\n"
+"The number of channels is greater than what the selected audio codec can do.\n"
 "Either change codec or use the mixer filter to have less channels."
 msgstr ""
 "El n?mero de canales es mayor del soportado por el codec de sonido\n"
@@ -223,19 +223,16 @@
 msgstr "DivX 5 + Empaquetado"
 
 #: avidemux/ADM_editor/ADM_edFrameType.cpp:93
-#, fuzzy
 msgid "Rebuilding Frames"
 msgstr "Reconstruyendo Im?genes"
 
 #: avidemux/ADM_editor/ADM_edFrameType.cpp:129
-#, fuzzy
 msgid "Aborted"
 msgstr "Abortado"
 
 #: avidemux/ADM_editor/ADM_edit.cpp:407
 msgid "File type identified but no loader support detected..."
-msgstr ""
-"Tipo de archivo identificado pero no se ha detectado soporte para cargarlo..."
+msgstr "Tipo de archivo identificado pero no se ha detectado soporte para cargarlo..."
 
 #: avidemux/ADM_editor/ADM_edit.cpp:408
 msgid "May be related to an old index file."
@@ -248,30 +245,23 @@
 
 #: avidemux/ADM_editor/ADM_edit.cpp:439
 msgid ""
-"You cannot mix different video dimensions yet. Using the partial video "
-"filter later, will not work around this problem. The workaround is:\n"
-"1.) \"resize\" / \"add border\" / \"crop\" each stream to the same "
-"resolution\n"
+"You cannot mix different video dimensions yet. Using the partial video filter later, will not work around this problem. The workaround is:\n"
+"1.) \"resize\" / \"add border\" / \"crop\" each stream to the same resolution\n"
 "2.) concatinate them together"
 msgstr ""
-"Todav?a no se puede mezclar archivos de diferente tama?o. Utilizar un filtro "
-"sobre el video parcial no es la soluci?n. La soluci?n es:\n"
-"1.) \"Cambiar tama?o\" / \"A?adir borde\" / \"cortar\" cada escena a la "
-"misma resoluci?n\n"
+"Todav?a no se puede mezclar archivos de diferente tama?o. Utilizar un filtro sobre el video parcial no es la soluci?n. La soluci?n es:\n"
+"1.) \"Cambiar tama?o\" / \"A?adir borde\" / \"cortar\" cada escena a la misma resoluci?n\n"
 " 2.) Unir las escenas"
 
 #: avidemux/ADM_editor/ADM_edit.cpp:551
-#, fuzzy
 msgid "Build Time Map"
 msgstr "Construir mapa de tiempo"
 
 #: avidemux/ADM_editor/ADM_edit.cpp:551
-#, fuzzy
 msgid "Build VBR time map?"
 msgstr "?Construir mapa de tiempo VBR?"
 
 #: avidemux/ADM_editor/ADM_edit.cpp:585
-#, fuzzy
 msgid "Use that mode"
 msgstr "Utilizar este modo"
 
@@ -281,16 +271,12 @@
 
 #: avidemux/ADM_editor/ADM_edit.cpp:585
 msgid ""
-"If the file is using bframe as reference, it can lead to crash or "
-"stutteting.\n"
-"Avidemux can use another mode which is safed but <b>YOU WILL LOOSE FRAME "
-"ACCURACY</b>.\n"
+"If the file is using bframe as reference, it can lead to crash or stutteting.\n"
+"Avidemux can use another mode which is safed but <b>YOU WILL LOOSE FRAME ACCURACY</b>.\n"
 "Do you want to use that mode ?"
 msgstr ""
-"Si el archivo utiliza el imagen B como referencia, puede llevar a un cuelgue "
-"o malfuncionamiento.\n"
-"Avidemux puede utilizar otro modo de forma segura pero <b>PERDERA LA "
-"EXACTITUD DE IMAGEN</b>.\n"
+"Si el archivo utiliza el imagen B como referencia, puede llevar a un cuelgue o malfuncionamiento.\n"
+"Avidemux puede utilizar otro modo de forma segura pero <b>PERDERA LA EXACTITUD DE IMAGEN</b>.\n"
 "?Desea utilizar ese modo?"
 
 #: avidemux/ADM_editor/ADM_edit.cpp:712
@@ -382,13 +368,12 @@
 msgstr "Error fatal"
 
 #: avidemux/ADM_encoder/adm_encffmpeg.cpp:261
-#, fuzzy
 msgid "Incompatible settings"
-msgstr "Sonido incompatible"
+msgstr "Opciones incompatibles"
 
 #: avidemux/ADM_encoder/adm_encffmpeg.cpp:261
 msgid "At the moment, the DV codec only accepts 720*576 at 25"
-msgstr ""
+msgstr "Hasta el momento, el codec DV s?lo acepta 720*576 at 25"
 
 #: avidemux/ADM_filter/filter_saveload.cpp:155
 msgid "Problem reading XML filters"
@@ -427,7 +412,6 @@
 msgstr "Hay varios archivos mpeg, ?adjuntarlos?"
 
 #: avidemux/ADM_inputs/ADM_mpegdemuxer/dmx_indexer.cpp:250
-#, fuzzy
 msgid "Can't determine aspect ratio"
 msgstr "No se puede determinar la relaci?n de aspecto"
 
@@ -437,7 +421,7 @@
 
 #: avidemux/ADM_inputs/ADM_mpegdemuxer/dmx_video.cpp:370
 msgid "Opening MPEG"
-msgstr ""
+msgstr "Abriendo MPEG"
 
 #: avidemux/ADM_inputs/ADM_mpegdemuxer/dmx_video.cpp:539
 msgid "MPEG renumbering error"
@@ -445,8 +429,9 @@
 
 #: avidemux/ADM_inputs/ADM_nuv/ADM_nuv.cpp:542
 #: avidemux/ADM_inputs/ADM_nuv/ADM_nuv.cpp:571
+#, fuzzy
 msgid "Opening Nuppel video"
-msgstr ""
+msgstr "Abriendo video nuppel"
 
 #: avidemux/ADM_inputs/ADM_nuv/ADM_nuv.cpp:547
 msgid "Sure you want to abort ?"
@@ -480,11 +465,11 @@
 
 #: avidemux/ADM_inputs/ADM_openDML/ADM_openDMLDepack.cpp:93
 msgid "Unpacking bitstream"
-msgstr ""
+msgstr "Desempaquetando el flujo de bits"
 
 #: avidemux/ADM_inputs/ADM_openDML/ADM_opendml_reindex.cpp:68
 msgid "Indexing"
-msgstr ""
+msgstr "Indexando:"
 
 #: avidemux/ADM_libraries/ADM_lavformat/ADM_lavformat.cpp:373
 msgid "Incompatible frame rate"
@@ -515,7 +500,7 @@
 
 #: avidemux/ADM_libraries/ADM_utilities/ADM_imageLoader.cpp:191
 msgid "Only YV12/I420 or YUY2/I422 JPegs are supported"
-msgstr ""
+msgstr "S?lo est?n soportados YV12/I420 o YUY2/I422 JPegs"
 
 #: avidemux/ADM_libraries/ADM_utilities/ADM_imageUtils.cpp:403
 msgid "Memory error"
@@ -547,33 +532,35 @@
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:246
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:255
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/TLK_filesel.cpp:328
-#: avidemux/gtk_gui.cpp:896 avidemux/gtk_gui.cpp:1498
+#: avidemux/gtk_gui.cpp:896
+#: avidemux/gtk_gui.cpp:1498
 msgid "File error"
 msgstr "Error de archivo"
 
 #: avidemux/ADM_libraries/ADM_utilities/ADM_imageUtils.cpp:481
 #: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:366
-#: avidemux/ADM_outputs/oplug_ogm/op_ogsave.cpp:112 avidemux/gtk_gui.cpp:1498
+#: avidemux/ADM_outputs/oplug_ogm/op_ogsave.cpp:112
+#: avidemux/gtk_gui.cpp:1498
 #, c-format
 msgid "Cannot open \"%s\" for writing."
 msgstr "No se puede abrir \"%s\" para escritura."
 
 #: avidemux/ADM_libraries/ADM_utilities/avidemutils.cpp:324
 msgid "NTSC 4:3"
-msgstr ""
+msgstr "NTSC 4:3"
 
 #: avidemux/ADM_libraries/ADM_utilities/avidemutils.cpp:325
 #: avidemux/ADM_libraries/ADM_utilities/avidemutils.cpp:326
 msgid "NTSC 16:9"
-msgstr ""
+msgstr "NTSC 16:9"
 
 #: avidemux/ADM_libraries/ADM_utilities/avidemutils.cpp:327
 msgid "PAL 4:3"
-msgstr ""
+msgstr "PAL 4:3"
 
 #: avidemux/ADM_libraries/ADM_utilities/avidemutils.cpp:328
 msgid "PAL 16:9"
-msgstr ""
+msgstr "PAL 16:9"
 
 #: avidemux/ADM_libraries/ADM_utilities/avidemutils.cpp:329
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_resize.cpp:376
@@ -585,17 +572,16 @@
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:598
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:795
 msgid "Unknown"
-msgstr ""
+msgstr "Desconocido"
 
 #: avidemux/ADM_ocr/adm_glyph.cpp:173
-#, fuzzy
 msgid "Could not write the file"
-msgstr "No se pudo abrir el archivo"
+msgstr "No se pudo escribir el archivo"
 
 #: avidemux/ADM_ocr/adm_glyph.cpp:221
-#, fuzzy, c-format
+#, c-format
 msgid "Could not read \"%s\"."
-msgstr "No se pudo abrir \"%s\" para escritura."
+msgstr "No se pudo leer \"%s\"."
 
 #: avidemux/ADM_ocr/ADM_ocrEngine.cpp:87
 msgid "Output file error"
@@ -632,29 +618,33 @@
 
 #: avidemux/ADM_ocr/ADM_vob2vobsub.cpp:300
 msgid "Generating VobSub file"
-msgstr ""
+msgstr "Generando el archivo VobSub"
 
 #: avidemux/ADM_osSupport/ADM_crashdump.cpp:210
 #: avidemux/ADM_osSupport/ADM_crashdump.cpp:236
 msgid "Fatal Error"
-msgstr ""
+msgstr "Error fatal"
 
 #: avidemux/ADM_osSupport/ADM_crashdump.cpp:210
 #: avidemux/ADM_osSupport/ADM_crashdump.cpp:236
 msgid ""
 "A fatal error has occurred.\n"
 "\n"
-"Click OK to generate debug information. This may take a few minutes to "
-"complete."
+"Click OK to generate debug information. This may take a few minutes to complete."
 msgstr ""
+"Ha ocurrido un error inesperado.\n"
+"\n"
+"Pulse OK para generar la informaci?n de depuraci?n. Esto puede llevar algunos minutos hasta que se complete."
 
 #: avidemux/ADM_osSupport/ADM_crashdump.cpp:437
+#, fuzzy
 msgid "Load it"
-msgstr ""
+msgstr "Cargar Valores por Defecto"
 
 #: avidemux/ADM_osSupport/ADM_crashdump.cpp:437
+#, fuzzy
 msgid "Crash file"
-msgstr ""
+msgstr "Guardar el archivo"
 
 #: avidemux/ADM_osSupport/ADM_crashdump.cpp:438
 msgid ""
@@ -667,7 +657,8 @@
 #: avidemux/ADM_osSupport/ADM_fileio.cpp:126
 #: avidemux/ADM_osSupport/ADM_fileio.cpp:146
 #: avidemux/ADM_osSupport/ADM_fileio.cpp:153
-#: avidemux/ADM_osSupport/ADM_fileio.cpp:164 avidemux/GUI_jobs.cpp:37
+#: avidemux/ADM_osSupport/ADM_fileio.cpp:164
+#: avidemux/GUI_jobs.cpp:37
 msgid "Oops"
 msgstr "?Vaya!"
 
@@ -696,57 +687,53 @@
 #: avidemux/ADM_osSupport/ADM_misc.cpp:215
 #, c-format
 msgid "%lu minutes"
-msgstr ""
+msgstr "%lu minutos"
 
 #: avidemux/ADM_osSupport/ADM_misc.cpp:219
 #, c-format
 msgid "%lu minute"
-msgstr ""
+msgstr "%lu minuto"
 
 #: avidemux/ADM_osSupport/ADM_misc.cpp:227
 #, c-format
 msgid "%lu second"
-msgstr ""
+msgstr "%lu segundo"
 
+# c-format
 #: avidemux/ADM_osSupport/ADM_misc.cpp:231
-#, c-format
 msgid "%lu seconds"
-msgstr ""
+msgstr "%lu segundos"
 
 #: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:74
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:243
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:845
 msgid "Normal"
-msgstr ""
+msgstr "Normal"
 
 #: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:75
-#, fuzzy
 msgid "Mux every N video frames"
-msgstr " im?genes\n"
+msgstr "Codificar cada N fotogramas"
 
 #: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:76
 msgid "Mux by packet size"
-msgstr ""
+msgstr "Codificar segun el tama?o del paquete"
 
 #: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:79
 msgid "Muxing _type:"
-msgstr ""
+msgstr "_Tipo de codificaci?n"
 
 #: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:80
-msgid "_Split every MB:"
-msgstr ""
-
 #: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:82
 msgid "Mux _every x video frames:"
-msgstr ""
+msgstr "Codificar _cada X fotogramas"
 
 #: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:83
 msgid "Mux in _blocks of x bytes:"
-msgstr ""
+msgstr "Codificar en _bloques de x bytes"
 
 #: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:90
 msgid "AVI Muxer Options"
-msgstr ""
+msgstr "Opciones del _Codificador Avi"
 
 #: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:188
 msgid "Error initalizing audio filters"
@@ -782,11 +769,12 @@
 #: avidemux/ADM_outputs/oplug_avi/op_saveprocess.cpp:127
 #: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:399
 #: avidemux/ADM_outputs/oplug_ogm/op_ogsaveprocess.cpp:100
-#, fuzzy
 msgid ""
 "\n"
 " Reuse the existing log-file ?"
-msgstr "?Reutilizar registro (log) existente?"
+msgstr ""
+"\n"
+"?Reutilizar el archivo de registro existente?"
 
 #: avidemux/ADM_outputs/oplug_avi/op_saveprocess.cpp:152
 #: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:435
@@ -828,7 +816,7 @@
 
 #: avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp:151
 msgid "Unsupported video"
-msgstr ""
+msgstr "V?deo no soportado"
 
 #: avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp:151
 msgid "Only FLV1 and VP6 video are supported"
@@ -837,15 +825,15 @@
 #: avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp:173
 #: avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp:178
 msgid "Unsupported audio"
-msgstr ""
+msgstr "Audio no soportado"
 
 #: avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp:173
 msgid "Audio must be mp3 for flv output."
-msgstr ""
+msgstr "El formato de audio debe ser MP3 para el formato de salida FVL"
 
 #: avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp:178
 msgid "Frequency must be 44100, 22050 or 11025 Hz."
-msgstr ""
+msgstr "La frecuencia debe ser 44100, 22050 o 11025 Hz."
 
 #: avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp:254
 #: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:251
@@ -872,8 +860,7 @@
 
 #: avidemux/ADM_outputs/oplug_mpeg/op_mpegpass.cpp:101
 msgid "Use the &lt;&lt; and the &gt;&gt; buttons to move using Intra frames."
-msgstr ""
-"Utilizar los botones &lt;&lt; y &gt;&gt; para moverse entre Imagens Intra."
+msgstr "Utilizar los botones &lt;&lt; y &gt;&gt; para moverse entre Imagens Intra."
 
 #: avidemux/ADM_outputs/oplug_mpeg/op_mpegpass.cpp:113
 #: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:163
@@ -887,18 +874,15 @@
 
 #: avidemux/ADM_outputs/oplug_mpeg/op_mpegpass.cpp:182
 msgid "For DVD, audio must be 48 kHz MP2(stereo), AC3, DTS or LPCM (stereo)."
-msgstr ""
-"Para DVD, el sonido debe ser de 48 kHz MP2(estereo), AC3, DTS o LPCM "
-"(estereo)."
+msgstr "Para DVD, el sonido debe ser de 48 kHz MP2(estereo), AC3, DTS o LPCM (estereo)."
 
 #: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:193
 msgid "For DVD, audio must be 48 kHz MP2, AC3 or LPCM."
 msgstr "Para DVD, el sonido debe ser de 48 kHz MP2, AC3 o LPCM."
 
 #: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:305
-#, fuzzy
 msgid "Reuse log file ?"
-msgstr "?Reutilizar archivo de registro (log)?"
+msgstr "?Reutilizar archivo de registro?"
 
 #: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:320
 msgid "Error in pass 1"
@@ -917,31 +901,29 @@
 msgstr "No se pudo inicializar sonido"
 
 #: avidemux/ADM_script/ADM_JSFunctions.cpp:238
-#, fuzzy
 msgid "Select a directory"
-msgstr "Seleccionar color"
+msgstr "Seleccionar un directorio"
 
 #: avidemux/ADM_script/ADM_JSFunctions.cpp:504
 msgid "Uinteger"
-msgstr ""
+msgstr "Entero sin signo"
 
 #: avidemux/ADM_script/ADM_JSFunctions.cpp:519
-#, fuzzy
 msgid "Float"
-msgstr "_Formato:"
+msgstr "_Flotante:"
 
 #: avidemux/ADM_script/ADM_JSFunctions.cpp:537
 msgid "Toggle"
-msgstr ""
+msgstr "Alternar"
 
 #: avidemux/ADM_script/ADM_JSFunctions.cpp:558
-#, fuzzy
 msgid "No Strategy"
 msgstr "Sin estrategia"
 
+#fuzzy
 #: avidemux/ADM_script/ADM_JSFunctions.cpp:559
 msgid "3:2 Pulldown"
-msgstr ""
+msgstr "3:2"
 
 #: avidemux/ADM_script/ADM_JSFunctions.cpp:560
 msgid "Pal/Secam"
@@ -949,58 +931,61 @@
 
 #: avidemux/ADM_script/ADM_JSFunctions.cpp:561
 #: avidemux/ADM_videoFilter/ADM_vidDecTelecide.cpp:86
-#, fuzzy
 msgid "NTSC converted from PAL"
-msgstr "NTSC convertido de Pal"
+msgstr "NTSC convertido de PAL"
 
 #: avidemux/ADM_script/ADM_JSFunctions.cpp:563
-#, fuzzy
 msgid "menu"
-msgstr "m"
+msgstr "menu"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_animated.cpp:36
 msgid "_Background Image:"
-msgstr ""
+msgstr "_Imagen de fondo: "
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_animated.cpp:37
 msgid "_NTSC(default is Pal):"
-msgstr ""
+msgstr "_NTSC(Por defecto es PAL):"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_animated.cpp:38
+#, fuzzy
 msgid "Vignette _Width:"
-msgstr ""
+msgstr "Anchura de Vi?eta"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_animated.cpp:39
+#, fuzzy
 msgid "Vignette _Height:"
-msgstr ""
+msgstr "Altura de Vi?eta"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_animated.cpp:42
 msgid "Vignette frame number"
 msgstr ""
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_animated.cpp:46
+#, fuzzy
 msgid "Timecode:"
-msgstr ""
+msgstr "Marca de tiempo:"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:62
 msgid "_Dynamic range compression"
-msgstr ""
+msgstr "_Rango de compresi?n din?mica"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:64
+#, fuzzy
 msgid "_Time shift (ms):"
-msgstr ""
+msgstr "Desfase de tiempo"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:64
+#, fuzzy
 msgid "Time shift value (ms)"
-msgstr ""
+msgstr "Desfase de tiempo"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:72
 msgid "R_esampling (Hz):"
-msgstr ""
+msgstr "R_emuestreo (Hz)"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:72
 msgid "Resampling frequency (Hz)"
-msgstr ""
+msgstr "Frecuencia de Remuestreo (Hz)"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:80
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:89
@@ -1015,38 +1000,39 @@
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1124
 #: avidemux/ADM_videoFilter/ADM_lavpp_deint.cpp:105
 #: avidemux/ADM_videoFilter/ADM_vidDecTelecide.cpp:101
-#: avidemux/ADM_videoFilter/ADM_vidRotate.cpp:264 avidemux/gtk_gui.cpp:1998
+#: avidemux/ADM_videoFilter/ADM_vidRotate.cpp:264
+#: avidemux/gtk_gui.cpp:1998
 #: avidemux/gtk_gui.cpp:2097
 msgid "None"
 msgstr "Ninguno"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:81
 msgid "Film to PAL"
-msgstr ""
+msgstr "Film -> PAL"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:82
 msgid "PAL to Film"
-msgstr ""
+msgstr "PAL -> Film"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:85
 msgid "_Frame rate change:"
-msgstr ""
+msgstr "_Cambiar el n?mero de FPS:"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:90
 msgid "Automatic (max -3 dB)"
-msgstr ""
+msgstr "Autom?tico (max -3dB)"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:91
 msgid "Manual"
-msgstr ""
+msgstr "Manual "
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:93
 msgid "_Gain mode:"
-msgstr ""
+msgstr "Modo _Ganancia:"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:95
 msgid "G_ain value:"
-msgstr ""
+msgstr "Valor de la g_anancia:"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:97
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_coloryuv.cpp:200
@@ -1054,25 +1040,24 @@
 msgstr "Ganancia"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:102
-#, fuzzy
 msgid "No change"
-msgstr "No cambiar"
+msgstr "Sin cambios"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:105
 msgid "Stereo+surround"
-msgstr ""
+msgstr "Est?reo+Surround"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:106
 msgid "Stereo+center"
-msgstr ""
+msgstr "Est?reo+Centro"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:107
 msgid "Stereo+center+surround"
-msgstr ""
+msgstr "Estu?reo+Centro+Surround"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:108
 msgid "Stereo front+stereo rear"
-msgstr ""
+msgstr "Est?reo Frontal+Estg(c)reo Trasero"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:109
 msgid "5 channels"
@@ -1084,19 +1069,19 @@
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:111
 msgid "Dolby Pro Logic"
-msgstr ""
+msgstr "Dolby Pro Logic"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:112
 msgid "Dolby Pro Logic II"
-msgstr ""
+msgstr "Dolby Pro Logic II"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:115
 msgid "_Mixer:"
-msgstr ""
+msgstr "_Ecualizador:"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:119
 msgid "Audio Filters"
-msgstr ""
+msgstr "Filtros de sonido"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_bitrateHisto.cpp:59
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_bitrateHisto.cpp:128
@@ -1104,13 +1089,12 @@
 msgstr "Sin datos"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_bitrateHisto.cpp:232
-#, fuzzy
 msgid "Bitrate Histogram"
-msgstr "_Histograma de Tasa de bits"
+msgstr "_Histograma de Bitrate"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp:128
 msgid "Video Codecs"
-msgstr ""
+msgstr "Codecs de v?deo"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp:129
 msgid "Xvid"
@@ -1118,11 +1102,11 @@
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp:130
 msgid "x264"
-msgstr ""
+msgstr "x264"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp:135
 msgid "Audio Codecs"
-msgstr ""
+msgstr "Codecs de sonido"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp:136
 msgid "Aften"
@@ -1130,7 +1114,7 @@
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp:137
 msgid "amrnb"
-msgstr ""
+msgstr "amrnb"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp:138
 msgid "FAAC"
@@ -1138,23 +1122,23 @@
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp:139
 msgid "FAAD2"
-msgstr ""
+msgstr "FAAD2"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp:140
 msgid "LAME"
-msgstr ""
+msgstr "LAME"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp:141
 msgid "liba52"
-msgstr ""
+msgstr "liba52"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp:142
 msgid "libdca"
-msgstr ""
+msgstr "libdca"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp:143
 msgid "MAD"
-msgstr ""
+msgstr "MAD"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp:144
 msgid "Vorbis"
@@ -1162,7 +1146,7 @@
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp:156
 msgid "aRts"
-msgstr ""
+msgstr "aRts"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp:157
 msgid "ESD"
@@ -1174,15 +1158,15 @@
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp:159
 msgid "FreeType 2"
-msgstr ""
+msgstr "FreeType 2"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp:160
 msgid "gettext"
-msgstr ""
+msgstr "gettext"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp:161
 msgid "ALSA"
-msgstr ""
+msgstr "ALSA"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp:162
 msgid "OSS"
@@ -1190,44 +1174,44 @@
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp:163
 msgid "SDL"
-msgstr ""
+msgstr "SDL"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp:164
 msgid "XVideo"
-msgstr ""
+msgstr "XVideo"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp:166
 msgid "AltiVec"
-msgstr ""
+msgstr "Altivec"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp:167
 msgid "PowerPC"
-msgstr ""
+msgstr "PowerPC"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp:168
 msgid "x86"
-msgstr ""
+msgstr "x86"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp:169
 msgid "x86-64"
-msgstr ""
+msgstr "x86-64"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp:176
 msgid "Codecs"
-msgstr ""
+msgstr "Codecs"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp:177
 msgid "Libraries"
-msgstr ""
+msgstr "Librerias"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp:178
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:406
 msgid "CPU"
-msgstr ""
+msgstr "CPU"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp:182
 msgid "Built-in Support"
-msgstr ""
+msgstr "Soporte incorporado para"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp:52
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_SVCD.cpp:42
@@ -1251,7 +1235,7 @@
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp:56
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_SVCD.cpp:46
 msgid "TMPGEnc"
-msgstr ""
+msgstr "TMPGEnc"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp:57
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_SVCD.cpp:47
@@ -1260,9 +1244,8 @@
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp:58
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_SVCD.cpp:48
-#, fuzzy
 msgid "KVCD"
-msgstr "SVCD"
+msgstr "KVCD"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp:61
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_SVCD.cpp:51
@@ -1272,97 +1255,93 @@
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp:62
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_SVCD.cpp:52
 msgid "Interlaced TFF"
-msgstr ""
+msgstr "_Entrelazado TFF"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp:63
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_SVCD.cpp:53
 msgid "Interlaced BFF"
-msgstr ""
+msgstr "_Entrelazado BFF"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp:74
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_SVCD.cpp:60
 msgid "Ma_x. bitrate:"
-msgstr ""
+msgstr "Bitrate m?x:"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp:75
 msgid "Mi_n. bitrate:"
-msgstr ""
+msgstr "Bitrate min:"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp:76
 msgid "_Use Xvid rate control"
-msgstr ""
+msgstr "Utilizar el control de ratio Xvid"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp:78
 msgid "_Buffer size:"
-msgstr ""
+msgstr "Tama?o del buffer;"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp:80
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_SVCD.cpp:57
 msgid "Aspect _ratio:"
-msgstr ""
+msgstr "Relaci?n de aspecto:"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp:81
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_SVCD.cpp:58
 msgid "_Matrices:"
-msgstr ""
+msgstr "Matrices:"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp:82
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flv1.cpp:45
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_SVCD.cpp:59
 msgid "_GOP size:"
-msgstr ""
+msgstr "Tama?o _GOP:"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp:88
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_SVCD.cpp:66
 msgid "_Interlacing:"
-msgstr ""
+msgstr "Entrelazando:"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flv1.cpp:44
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_bitrate.cpp:109
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_bitrate.cpp:268
 msgid "_Bitrate (kb/s):"
-msgstr ""
+msgstr "_Tasa de Bits (kb/s):"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_gototime.cpp:27
 msgid "_Hours:"
-msgstr ""
+msgstr "_Horas:"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_gototime.cpp:28
 msgid "_Minutes:"
-msgstr ""
+msgstr "_Minutos:"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_gototime.cpp:29
+#, fuzzy
 msgid "_Seconds:"
-msgstr ""
+msgstr "Segunda pasada"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:52
-#, fuzzy
 msgid "Full"
-msgstr "1: Completo"
+msgstr "Completo"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:53
-#, fuzzy
 msgid "Log"
-msgstr "2: Registro"
+msgstr "2Registro"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:54
-#, fuzzy
 msgid "Phods"
-msgstr "3: Phods"
+msgstr "Phods"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:55
-#, fuzzy
 msgid "EPZS"
-msgstr "4: EPZS"
+msgstr "EPZS"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:56
-#, fuzzy
 msgid "X1"
-msgstr "1"
+msgstr "X1"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:60
 msgid "H.263"
-msgstr ""
+msgstr "H.263"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:61
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:519
@@ -1371,17 +1350,15 @@
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:65
 msgid "MB comparison"
-msgstr ""
+msgstr "Comparaci?n de MB"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:66
-#, fuzzy
 msgid "Fewest bits (vhq)"
-msgstr "1: Menos bits (vhq)"
+msgstr "Menos bits (vhq)"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:67
-#, fuzzy
 msgid "Rate distortion"
-msgstr "2: Distorsi?n de Tasa"
+msgstr "Distorsi?n de Tasa"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:73
 msgid "Matrices"
@@ -1389,19 +1366,19 @@
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:74
 msgid "Mi_n. quantizer:"
-msgstr ""
+msgstr "Cuantizador min:"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:75
 msgid "Ma_x. quantizer:"
-msgstr ""
+msgstr "Cuantizador max:"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:76
 msgid "Max. quantizer _difference:"
-msgstr ""
+msgstr "Diferencia m?xima de cuantizador:"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:78
 msgid "4_MV"
-msgstr ""
+msgstr "4_MV"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:79
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1235
@@ -1410,7 +1387,7 @@
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:81
 msgid "_Quarter pixel"
-msgstr ""
+msgstr "_Quarter pixel"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:82
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1018
@@ -1419,27 +1396,30 @@
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:85
 msgid "_Number of B frames:"
-msgstr ""
+msgstr "N?mero de im?genes B:"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:86
 msgid "_Quantization type:"
-msgstr ""
+msgstr "_Tipo de cuantizaci?n:"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:88
+#, fuzzy
 msgid "_Macroblock decision:"
-msgstr ""
+msgstr "Elecci?n de MacroBloque:"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:90
 msgid "_Filesize tolerance (kb):"
-msgstr ""
+msgstr "Tolerancia de tama?o (kb):"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:92
+#, fuzzy
 msgid "_Quantizer compression:"
-msgstr ""
+msgstr "Cuantizador de compresi?n:"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:93
+#, fuzzy
 msgid "Quantizer _blur:"
-msgstr ""
+msgstr "Cuantizador de mezcla:"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:98
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:374
@@ -1467,29 +1447,31 @@
 msgstr "Control de Frecuencia"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:120
+#, fuzzy
 msgid "libavcodec MPEG-4 configuration"
-msgstr ""
+msgstr "Opciones del Decodificador Libavcodec"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavDecoder.cpp:45
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_postproc.cpp:41
+#, fuzzy
 msgid "_Swap U and V"
-msgstr ""
+msgstr "Invertir U y V"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavDecoder.cpp:46
 msgid "Show motion _vectors"
-msgstr ""
+msgstr "Mostrar vectores de movimiento"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavDecoder.cpp:48
 msgid "Decoder Options"
-msgstr ""
+msgstr "Opciones del _decodificador"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_mjpeg.cpp:41
 msgid "_Swap U&V:"
-msgstr ""
+msgstr "_Swap U&V:"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:92
 msgid "Select idx file:"
-msgstr ""
+msgstr "Seleccionar ?ndice .idx"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:93
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:210
@@ -1499,68 +1481,68 @@
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:94
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:211
 msgid "Output SRT file"
-msgstr ""
+msgstr "_Archivo SRT de salida"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:105
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:222
 msgid "Select input and ouput files"
-msgstr ""
+msgstr "Seleccionar archivos de entrada y salida"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:115
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:127
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:246
 msgid "The idx/sub file does not exist."
-msgstr ""
+msgstr "El archivo  idx/sub no existe."
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:120
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:239
 msgid "Please Select a valid output SRT file."
-msgstr ""
+msgstr "Por favor seleccione o introduzca un archivo SRT v?lido"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:136
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:255
 msgid "Cannot load the glyphset file."
-msgstr ""
+msgstr "No se puede cargar el archivo glyphset."
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:156
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:276
+#, fuzzy
 msgid "Glyphset filename"
-msgstr ""
+msgstr "Nombre no v?lido"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:158
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:278
 msgid "Save Glyph"
-msgstr ""
+msgstr "Guardar Glyph"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:208
+#, fuzzy
 msgid "Input TS:"
-msgstr ""
+msgstr "Entrada"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:209
 msgid "Subtitle PID:"
-msgstr ""
+msgstr "Subt?tulos PID:"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:233
+#, fuzzy
 msgid "Please Select a valid TS file."
-msgstr ""
+msgstr "Por favor seleccione o introduzca un archivo ifo v?lido"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_postproc.cpp:40
 #: avidemux/ADM_videoFilter/ADM_vidForcedPP.cpp:60
-#, fuzzy
 msgid "_Filter strength:"
 msgstr "Intensidad de Filtrado: "
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_postproc.cpp:51
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:346
 #: avidemux/ADM_videoFilter/ADM_vidForcedPP.cpp:72
-#, fuzzy
 msgid "_Horizontal deblocking"
 msgstr "Desbloqueo horizontal"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_postproc.cpp:52
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:347
 #: avidemux/ADM_videoFilter/ADM_vidForcedPP.cpp:73
-#, fuzzy
 msgid "_Vertical deblocking"
 msgstr "Desbloqueo vertical"
 
@@ -1572,15 +1554,15 @@
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:188
 msgid "_Use systray while encoding"
-msgstr ""
+msgstr "_Minimizar en el icono de la barra de tareas al codificar"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:189
 msgid "_Accept non-standard audio frequency for DVD"
-msgstr ""
+msgstr "Permitir frecuencia de sonido no est?ndar para DVD"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:190
 msgid "_Use libavcodec MPEG-2 decoder"
-msgstr ""
+msgstr "_Utilizar decodificador MPEG libavcodec"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:191
 msgid "Create _OpenDML files"
@@ -1588,149 +1570,152 @@
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:192
 msgid "Automatically _index MPEG files"
-msgstr ""
+msgstr "Indexar _automaticamente archivos MPEG"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:193
+#, fuzzy
 msgid "Automatically _swap A and B if A>B"
-msgstr ""
+msgstr "_Intercambiar marcas A y B si A > B"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:194
 msgid "_Disable NUV audio sync"
-msgstr ""
+msgstr "_Desactivar sincronizaci?n de audio NUV"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:196
 msgid "Automatically _build VBR map"
-msgstr ""
+msgstr "Construir automaticamente mapa VBR"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:197
 msgid "Automatically _rebuild index"
-msgstr ""
+msgstr "Reconstruir automaticamente el ?ndice"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:198
 msgid "Automatically remove _packed bitstream"
-msgstr ""
+msgstr "Eliminar autom?ticamente el empaquetado bitstream"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:200
 msgid "SIMD"
-msgstr ""
+msgstr "SIMD"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:202
 msgid "Enable all SIMD"
-msgstr ""
+msgstr "Habilitar todos los SIMD"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:203
 msgid "Enable MMX"
-msgstr ""
+msgstr "Activar MMX"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:204
 msgid "Enable MMXEXT"
-msgstr ""
+msgstr "Activar MMXEXT"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:205
 msgid "Enable 3DNOW"
-msgstr ""
+msgstr "Activar 3DNOW"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:206
 msgid "Enable 3DNOWEXT"
-msgstr ""
+msgstr "Activar 3DNOWEXT"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:207
 msgid "Enable SSE"
-msgstr ""
+msgstr "Activar SSE"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:208
 msgid "Enable SSE2"
-msgstr ""
+msgstr "Activar SSE2"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:209
 msgid "Enable SSE3"
-msgstr ""
+msgstr "Activar SSE3"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:210
 msgid "Enable SSSE3"
-msgstr ""
+msgstr "Activar SSSE3"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:231
+#, fuzzy
 msgid "_lavc threads:"
-msgstr ""
+msgstr "Umbral Luma"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:232
 msgid "_x264 threads:"
-msgstr ""
+msgstr "Procesos _x264:"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:233
 msgid "X_vid threads:"
-msgstr ""
+msgstr "Procesos X_vid:"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:235
 msgid "Multi-threading"
-msgstr ""
+msgstr "Multi-tarea (Multi-threading)"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:241
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:843
 msgid "High"
-msgstr ""
+msgstr "Alto"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:242
 msgid "Above normal"
-msgstr ""
+msgstr "Por encima de lo normal"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:244
 msgid "Below normal"
-msgstr ""
+msgstr "Por debajo de lo normal"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:245
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:847
 msgid "Low"
-msgstr ""
+msgstr "Bajo"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:247
 msgid "_Encoding priority:"
-msgstr ""
+msgstr "Prioridad de codificaci?n:"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:248
 msgid "_Indexing/unpacking priority:"
-msgstr ""
+msgstr "Prioridad de _Indexado/descompresion:"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:249
 msgid "_Playback priority:"
-msgstr ""
+msgstr "Prioridad de _reproducci?n:"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:251
 msgid "Prioritisation"
-msgstr ""
+msgstr "Priorizaci?n"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:256
 msgid "_Split MPEG files every (MB):"
-msgstr ""
+msgstr "Auto dividir archivos MPEG cada (MB):"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:258
 msgid "_Use alternative tag for MP3 in .mp4"
-msgstr ""
+msgstr "_Usar un tag alternativo para MP3 en .mp4"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:261
 msgid "GTK+ (slow)"
-msgstr ""
+msgstr "GTK+ (Lento)"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:263
 msgid "XVideo (best)"
-msgstr ""
+msgstr "XVideo (mejor)"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:267
 msgid "SDL (GDI)"
-msgstr ""
+msgstr "SDL (GDI)"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:268
 msgid "SDL (DirectX)"
-msgstr ""
+msgstr "SDL (DirectX)"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:270
 msgid "SDL (good)"
-msgstr ""
+msgstr "SDL (buena)"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:274
+#, fuzzy
 msgid "Video _display:"
-msgstr ""
+msgstr "Duraci?n del video"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:279
 msgid "No alerts"
@@ -1746,50 +1731,48 @@
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:283
 msgid "_Message level:"
-msgstr ""
+msgstr "Nivel de mensaje"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:288
-#, fuzzy
 msgid "PCM"
-msgstr "_PCM"
+msgstr "PCM"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:289
-#, fuzzy
 msgid "Master"
 msgstr "Principal"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:290
 msgid "_Volume control:"
-msgstr ""
+msgstr "Control de volumen:"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:295
-#, fuzzy
 msgid "No downmixing"
 msgstr "Sin downmixing (multicanal)"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:297
 msgid "Pro Logic"
-msgstr ""
+msgstr "Pro Logic"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:298
 msgid "Pro Logic II"
-msgstr ""
+msgstr "Pro Logic II"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:300
 msgid "_Local playback downmixing:"
-msgstr ""
+msgstr "Downmixing de reproducci?n Local"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:332
 msgid "_Audio output:"
-msgstr ""
+msgstr "_Salida de sonido"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:335
 msgid "ALSA _device:"
 msgstr "_Elemento ALSA"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:348
+#, fuzzy
 msgid "De_ringing"
-msgstr ""
+msgstr "Aclarado de esquinas"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:349
 #: avidemux/ADM_videoFilter/ADM_vidMSharpen.cpp:167
@@ -1798,17 +1781,16 @@
 msgstr "Intensidad: "
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:350
-#, fuzzy
 msgid "Default Postprocessing"
-msgstr "_Establecer nivel de procesamiento posterior por defecto"
+msgstr "_Establecer nivel por defecto de post-procesamiento"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:364
 msgid "_Filter directory:"
-msgstr ""
+msgstr "Directorio de filtros:"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:365
 msgid "_Load external filters"
-msgstr ""
+msgstr "Cargar filtros externos"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:368
 msgid "Use _Global GlyphSet"
@@ -1820,7 +1802,7 @@
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:378
 msgid "Automation"
-msgstr ""
+msgstr "Automatizaci?n"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:382
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_bindings.cpp:430
@@ -1835,19 +1817,17 @@
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:391
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:394
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:397
-#, fuzzy
 msgid "Audio"
 msgstr "Sonido"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:402
 #: avidemux/gtk_gui.cpp:1997
-#, fuzzy
 msgid "Video"
-msgstr "Video"
+msgstr "V?deo"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:410
 msgid "Threading"
-msgstr ""
+msgstr "Hilos"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:414
 msgid "Global GlyphSet"
@@ -1855,75 +1835,83 @@
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:418
 msgid "External Filters"
-msgstr ""
+msgstr "Filtros externos"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:422
-#, fuzzy
 msgid "Preferences"
 msgstr "Preferencias"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_requant.cpp:48
+#, fuzzy
 msgid "_Shrink Factor:"
-msgstr ""
+msgstr "Factor de reducci?n: "
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_resizeWiz.cpp:59
+#, fuzzy
 msgid "_Target type:"
-msgstr ""
+msgstr "Tipo de destino: "
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_resizeWiz.cpp:60
+#, fuzzy
 msgid "_Source aspect ratio:"
-msgstr ""
+msgstr "Relaci?n de Aspecto de Origen: "
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_resizeWiz.cpp:61
+#, fuzzy
 msgid "_Destination aspect ratio:"
-msgstr ""
+msgstr "Relaci?n de Aspecto de Destino: "
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_srt.cpp:88
 msgid "_Subtitle file:"
-msgstr ""
+msgstr "Archivo de subt?tulos: "
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_srt.cpp:89
 msgid "_Font (TTF):"
-msgstr ""
+msgstr "Fuente (TTF):"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_srt.cpp:104
 msgid "_Encoding:"
-msgstr ""
+msgstr "Codificando:"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_srt.cpp:106
+#, fuzzy
 msgid "S_elect C_olor"
-msgstr ""
+msgstr "Seleccionar color"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_srt.cpp:107
 msgid "Set Size and _Position"
-msgstr ""
+msgstr "Establecer Tama?o y _Posici?n"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_srt.cpp:108
+#, fuzzy
 msgid "_Auto split"
-msgstr ""
+msgstr "Partido autom?tico"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_srt.cpp:109
+#, fuzzy
 msgid "_Delay (ms):"
-msgstr ""
+msgstr "Retraso en ms"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_srt.cpp:112
 msgid "Subtitler"
-msgstr ""
+msgstr "Subt?tulos"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:45
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:51
 msgid "Auto (might not work)"
-msgstr ""
+msgstr "Auto (puede no funcionar)"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:46
 #: avidemux/ADM_videoFilter/ADM_vidYadif.cpp:178
+#, fuzzy
 msgid "Top field first"
-msgstr ""
+msgstr "Campo sup. primero"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:47
 #: avidemux/ADM_videoFilter/ADM_vidYadif.cpp:177
+#, fuzzy
 msgid "Bottom field first"
-msgstr ""
+msgstr "Campo inf. primero"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:52
 msgid "Bottom field (keep top)"
@@ -1934,52 +1922,61 @@
 msgstr "Campo sup. (conservar inferior)"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:58
+#, fuzzy
 msgid "Cubic interpolation"
-msgstr ""
+msgstr "Interpolaci?n c?bica"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:59
 msgid "Modified ELA"
 msgstr "ELA modificada"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:60
+#, fuzzy
 msgid "Kernel interpolation"
-msgstr ""
+msgstr "Interpolaci?n Kernel"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:61
 msgid "Modified ELA-2"
 msgstr "ELA-2 modificada"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:66
+#, fuzzy
 msgid "4 fields check"
-msgstr ""
+msgstr "Comprobar 4 campo"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:67
+#, fuzzy
 msgid "5 fields check"
-msgstr ""
+msgstr "Comprobar 5 campo"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:68
+#, fuzzy
 msgid "4 fields check (no avg)"
-msgstr ""
+msgstr "Comprobar 4 campo (no medio)"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:69
+#, fuzzy
 msgid "5 fields check (no avg)"
-msgstr ""
+msgstr "Comprobar 5 campo (no medio)"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:75
 msgid "No link"
 msgstr "No enlazar"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:76
+#, fuzzy
 msgid "Full link"
-msgstr ""
+msgstr "Enlazado completo"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:77
+#, fuzzy
 msgid "Y to UV"
-msgstr ""
+msgstr "Enlazado de Y a UV"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:78
+#, fuzzy
 msgid "UV to Y"
-msgstr ""
+msgstr "Enlazado de UV a Y"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:82
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:632
@@ -2008,7 +2005,7 @@
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:84
 msgid "2"
-msgstr ""
+msgstr "2"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:91
 #: avidemux/ADM_videoFilter/ADM_vidDecTelecide.cpp:111
@@ -2019,36 +2016,43 @@
 msgstr "Orden de campo:"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:92
+#, fuzzy
 msgid "_Interpolate:"
-msgstr ""
+msgstr "Interpolar:"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:94
 msgid "_Type:"
-msgstr ""
+msgstr "Tipo: "
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:95
+#, fuzzy
 msgid "_MntMode:"
-msgstr ""
+msgstr "Modo Mnt"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:96
+#, fuzzy
 msgid "_Link:"
-msgstr ""
+msgstr "Enlazar"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:97
+#, fuzzy
 msgid "_AP type:"
-msgstr ""
+msgstr "Tipo AP"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:100
+#, fuzzy
 msgid "Use ch_roma to evalute"
-msgstr ""
+msgstr "Usar Croma para evaluar"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:101
+#, fuzzy
 msgid "Try _weave"
-msgstr ""
+msgstr "Probar onda"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:102
+#, fuzzy
 msgid "_Denoise"
-msgstr ""
+msgstr "Eliminar ruido"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:103
 #: avidemux/ADM_videoFilter/ADM_vidKernelDeint.cpp:94
@@ -2057,71 +2061,78 @@
 msgstr "Definir"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:104
+#, fuzzy
 msgid "_Evalute all frames"
-msgstr ""
+msgstr "Evaluar todas las im?genes"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:107
+#, fuzzy
 msgid "Motion threshold, l_uma:"
-msgstr ""
+msgstr "Umbral de movimiento, Luma"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:108
+#, fuzzy
 msgid "Motion threshold, c_hroma:"
-msgstr ""
+msgstr "Umbral de movimiento, Croma"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:109
+#, fuzzy
 msgid "Area com_bing threshold:"
-msgstr ""
+msgstr "Area combinando Umbral"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:110
+#, fuzzy
 msgid "Combe_d threshold:"
-msgstr ""
+msgstr "Umbral combinado"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:111
+#, fuzzy
 msgid "Artefact _protection threshold:"
-msgstr ""
+msgstr "Umbral de protecci?n de defectos"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:112
 msgid "Debug:"
-msgstr ""
+msgstr "Depurar:"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:121
+#, fuzzy
 msgid "TDeint"
-msgstr ""
+msgstr "Desent. MC"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_v2v.cpp:41
 msgid "_VOB file(s):"
-msgstr ""
+msgstr "Archivo(s) _VOB:"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_v2v.cpp:42
 msgid "_IFO file:"
-msgstr ""
+msgstr "_Archivo IFO:"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_v2v.cpp:43
 msgid "Vob_Sub file:"
-msgstr ""
+msgstr "Archivo Vob_Sub:"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_v2v.cpp:48
 msgid "VOB to VobSub"
-msgstr ""
+msgstr "VOB a VobSub"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_v2v.cpp:52
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_v2v.cpp:57
 msgid "The selected vobfile does not exist"
-msgstr ""
+msgstr "El archivo VOB no existe"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_v2v.cpp:62
+#, fuzzy
 msgid "Please select a correct VobSub path/dir"
-msgstr ""
+msgstr "Por favor seleccione o introduzca un archivo vobsub v?lido"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_about.cpp:66
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:273
-#, fuzzy
 msgid "Avidemux"
 msgstr "Avidemux"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_about.cpp:67
 msgid "? 2001-2007 Mean"
-msgstr ""
+msgstr "? 2001-2007 Mean"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_about.cpp:68
 msgid "Multiplatform video editor"
@@ -2137,8 +2148,7 @@
 "\t\t       Version 2, June 1991\n"
 "\n"
 " Copyright (C) 1989, 1991 Free Software Foundation, Inc.\n"
-"                       51 Franklin St, Fifth Floor, Boston, MA  02110-1301  "
-"USA\n"
+"                       51 Franklin St, Fifth Floor, Boston, MA  02110-1301  USA\n"
 " Everyone is permitted to copy and distribute verbatim copies\n"
 " of this license document, but changing it is not allowed.\n"
 "\n"
@@ -2273,8 +2283,7 @@
 "\n"
 "    a) Accompany it with the complete corresponding machine-readable\n"
 "    source code, which must be distributed under the terms of Sections\n"
-"    1 and 2 above on a medium customarily used for software interchange; "
-"or,\n"
+"    1 and 2 above on a medium customarily used for software interchange; or,\n"
 "\n"
 "    b) Accompany it with a written offer, valid for at least three\n"
 "    years, to give any third party, for a charge no more than your\n"
@@ -2381,8 +2390,7 @@
 "later version\", you have the option of following the terms and conditions\n"
 "either of that version or of any later version published by the Free\n"
 "Software Foundation.  If the Program does not specify a version number of\n"
-"this License, you may choose any version ever published by the Free "
-"Software\n"
+"this License, you may choose any version ever published by the Free Software\n"
 "Foundation.\n"
 "\n"
 "  10. If you wish to incorporate parts of the Program into other free\n"
@@ -2398,8 +2406,7 @@
 "  11. BECAUSE THE PROGRAM IS LICENSED FREE OF CHARGE, THERE IS NO WARRANTY\n"
 "FOR THE PROGRAM, TO THE EXTENT PERMITTED BY APPLICABLE LAW.  EXCEPT WHEN\n"
 "OTHERWISE STATED IN WRITING THE COPYRIGHT HOLDERS AND/OR OTHER PARTIES\n"
-"PROVIDE THE PROGRAM \"AS IS\" WITHOUT WARRANTY OF ANY KIND, EITHER "
-"EXPRESSED\n"
+"PROVIDE THE PROGRAM \"AS IS\" WITHOUT WARRANTY OF ANY KIND, EITHER EXPRESSED\n"
 "OR IMPLIED, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF\n"
 "MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  THE ENTIRE RISK AS\n"
 "TO THE QUALITY AND PERFORMANCE OF THE PROGRAM IS WITH YOU.  SHOULD THE\n"
@@ -2444,8 +2451,7 @@
 "\n"
 "    You should have received a copy of the GNU General Public License\n"
 "    along with this program; if not, write to the Free Software\n"
-"    Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA  02110-1301  "
-"USA\n"
+"    Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA  02110-1301  USA\n"
 "\n"
 "\n"
 "Also add information on how to contact you by electronic and paper mail.\n"
@@ -2454,8 +2460,7 @@
 "when it starts in an interactive mode:\n"
 "\n"
 "    Gnomovision version 69, Copyright (C) year name of author\n"
-"    Gnomovision comes with ABSOLUTELY NO WARRANTY; for details type `show "
-"w'.\n"
+"    Gnomovision comes with ABSOLUTELY NO WARRANTY; for details type `show w'.\n"
 "    This is free software, and you are welcome to redistribute it\n"
 "    under certain conditions; type `show c' for details.\n"
 "\n"
@@ -2480,9 +2485,356 @@
 "library.  If this is what you want to do, use the GNU Library General\n"
 "Public License instead of this License."
 msgstr ""
+"Avidemux es software libre; puede redistribuirlo o modificarlo\n"
+"bajo los t?rminos de la Licencia P?blica General GNU versi?n 2\n"
+"seg?n lo publicado por la Fundaci?n del Software Libre.\n"
+"\n"
+"Puede encontrar la siguiente licencia traducida al castellano en internet;\n"
+"traducci?n no oficial en:\n"
+"http://gugs.sindominio.net/licencias/gples.html\n"
+"\n"
+"\t\t    GNU LICENCIA P?BLICA GENERAL\n"
+"\t\t       Version 2, Junio 1991\n"
+"\n"
+" Copyright (C) 1989, 1991 Free Software Foundation, Inc.\n"
+"                       51 Franklin St, Fifth Floor, Boston, MA  02110-1301  USA\n"
+" Everyone is permitted to copy and distribute verbatim copies\n"
+" of this license document, but changing it is not allowed.\n"
+"\n"
+"\t\t\t    Preamble\n"
+"\n"
+"  The licenses for most software are designed to take away your\n"
+"freedom to share and change it.  By contrast, the GNU General Public\n"
+"License is intended to guarantee your freedom to share and change free\n"
+"software--to make sure the software is free for all its users.  This\n"
+"General Public License applies to most of the Free Software\n"
+"Foundation's software and to any other program whose authors commit to\n"
+"using it.  (Some other Free Software Foundation software is covered by\n"
+"the GNU Library General Public License instead.)  You can apply it to\n"
+"your programs, too.\n"
+"\n"
+"  When we speak of free software, we are referring to freedom, not\n"
+"price.  Our General Public Licenses are designed to make sure that you\n"
+"have the freedom to distribute copies of free software (and charge for\n"
+"this service if you wish), that you receive source code or can get it\n"
+"if you want it, that you can change the software or use pieces of it\n"
+"in new free programs; and that you know you can do these things.\n"
+"\n"
+"  To protect your rights, we need to make restrictions that forbid\n"
+"anyone to deny you these rights or to ask you to surrender the rights.\n"
+"These restrictions translate to certain responsibilities for you if you\n"
+"distribute copies of the software, or if you modify it.\n"
+"\n"
+"  For example, if you distribute copies of such a program, whether\n"
+"gratis or for a fee, you must give the recipients all the rights that\n"
+"you have.  You must make sure that they, too, receive or can get the\n"
+"source code.  And you must show them these terms so they know their\n"
+"rights.\n"
+"\n"
+"  We protect your rights with two steps: (1) copyright the software, and\n"
+"(2) offer you this license which gives you legal permission to copy,\n"
+"distribute and/or modify the software.\n"
+"\n"
+"  Also, for each author's protection and ours, we want to make certain\n"
+"that everyone understands that there is no warranty for this free\n"
+"software.  If the software is modified by someone else and passed on, we\n"
+"want its recipients to know that what they have is not the original, so\n"
+"that any problems introduced by others will not reflect on the original\n"
+"authors' reputations.\n"
+"\n"
+"  Finally, any free program is threatened constantly by software\n"
+"patents.  We wish to avoid the danger that redistributors of a free\n"
+"program will individually obtain patent licenses, in effect making the\n"
+"program proprietary.  To prevent this, we have made it clear that any\n"
+"patent must be licensed for everyone's free use or not licensed at all.\n"
+"\n"
+"  The precise terms and conditions for copying, distribution and\n"
+"modification follow.\n"
+"\n"
+"\t\t    GNU GENERAL PUBLIC LICENSE\n"
+"   TERMS AND CONDITIONS FOR COPYING, DISTRIBUTION AND MODIFICATION\n"
+"\n"
+"  0. This License applies to any program or other work which contains\n"
+"a notice placed by the copyright holder saying it may be distributed\n"
+"under the terms of this General Public License.  The \"Program\", below,\n"
+"refers to any such program or work, and a \"work based on the Program\"\n"
+"means either the Program or any derivative work under copyright law:\n"
+"that is to say, a work containing the Program or a portion of it,\n"
+"either verbatim or with modifications and/or translated into another\n"
+"language.  (Hereinafter, translation is included without limitation in\n"
+"the term \"modification\".)  Each licensee is addressed as \"you\".\n"
+"\n"
+"Activities other than copying, distribution and modification are not\n"
+"covered by this License; they are outside its scope.  The act of\n"
+"running the Program is not restricted, and the output from the Program\n"
+"is covered only if its contents constitute a work based on the\n"
+"Program (independent of having been made by running the Program).\n"
+"Whether that is true depends on what the Program does.\n"
+"\n"
+"  1. You may copy and distribute verbatim copies of the Program's\n"
+"source code as you receive it, in any medium, provided that you\n"
+"conspicuously and appropriately publish on each copy an appropriate\n"
+"copyright notice and disclaimer of warranty; keep intact all the\n"
+"notices that refer to this License and to the absence of any warranty;\n"
+"and give any other recipients of the Program a copy of this License\n"
+"along with the Program.\n"
+"\n"
+"You may charge a fee for the physical act of transferring a copy, and\n"
+"you may at your option offer warranty protection in exchange for a fee.\n"
+"\n"
+"  2. You may modify your copy or copies of the Program or any portion\n"
+"of it, thus forming a work based on the Program, and copy and\n"
+"distribute such modifications or work under the terms of Section 1\n"
+"above, provided that you also meet all of these conditions:\n"
+"\n"
+"    a) You must cause the modified files to carry prominent notices\n"
+"    stating that you changed the files and the date of any change.\n"
+"\n"
+"    b) You must cause any work that you distribute or publish, that in\n"
+"    whole or in part contains or is derived from the Program or any\n"
+"    part thereof, to be licensed as a whole at no charge to all third\n"
+"    parties under the terms of this License.\n"
+"\n"
+"    c) If the modified program normally reads commands interactively\n"
+"    when run, you must cause it, when started running for such\n"
+"    interactive use in the most ordinary way, to print or display an\n"
+"    announcement including an appropriate copyright notice and a\n"
+"    notice that there is no warranty (or else, saying that you provide\n"
+"    a warranty) and that users may redistribute the program under\n"
+"    these conditions, and telling the user how to view a copy of this\n"
+"    License.  (Exception: if the Program itself is interactive but\n"
+"    does not normally print such an announcement, your work based on\n"
+"    the Program is not required to print an announcement.)\n"
+"\n"
+"These requirements apply to the modified work as a whole.  If\n"
+"identifiable sections of that work are not derived from the Program,\n"
+"and can be reasonably considered independent and separate works in\n"
+"themselves, then this License, and its terms, do not apply to those\n"
+"sections when you distribute them as separate works.  But when you\n"
+"distribute the same sections as part of a whole which is a work based\n"
+"on the Program, the distribution of the whole must be on the terms of\n"
+"this License, whose permissions for other licensees extend to the\n"
+"entire whole, and thus to each and every part regardless of who wrote it.\n"
+"\n"
+"Thus, it is not the intent of this section to claim rights or contest\n"
+"your rights to work written entirely by you; rather, the intent is to\n"
+"exercise the right to control the distribution of derivative or\n"
+"collective works based on the Program.\n"
+"\n"
+"In addition, mere aggregation of another work not based on the Program\n"
+"with the Program (or with a work based on the Program) on a volume of\n"
+"a storage or distribution medium does not bring the other work under\n"
+"the scope of this License.\n"
+"\n"
+"  3. You may copy and distribute the Program (or a work based on it,\n"
+"under Section 2) in object code or executable form under the terms of\n"
+"Sections 1 and 2 above provided that you also do one of the following:\n"
+"\n"
+"    a) Accompany it with the complete corresponding machine-readable\n"
+"    source code, which must be distributed under the terms of Sections\n"
+"    1 and 2 above on a medium customarily used for software interchange; or,\n"
+"\n"
+"    b) Accompany it with a written offer, valid for at least three\n"
+"    years, to give any third party, for a charge no more than your\n"
+"    cost of physically performing source distribution, a complete\n"
+"    machine-readable copy of the corresponding source code, to be\n"
+"    distributed under the terms of Sections 1 and 2 above on a medium\n"
+"    customarily used for software interchange; or,\n"
+"\n"
+"    c) Accompany it with the information you received as to the offer\n"
+"    to distribute corresponding source code.  (This alternative is\n"
+"    allowed only for noncommercial distribution and only if you\n"
+"    received the program in object code or executable form with such\n"
+"    an offer, in accord with Subsection b above.)\n"
+"\n"
+"The source code for a work means the preferred form of the work for\n"
+"making modifications to it.  For an executable work, complete source\n"
+"code means all the source code for all modules it contains, plus any\n"
+"associated interface definition files, plus the scripts used to\n"
+"control compilation and installation of the executable.  However, as a\n"
+"special exception, the source code distributed need not include\n"
+"anything that is normally distributed (in either source or binary\n"
+"form) with the major components (compiler, kernel, and so on) of the\n"
+"operating system on which the executable runs, unless that component\n"
+"itself accompanies the executable.\n"
+"\n"
+"If distribution of executable or object code is made by offering\n"
+"access to copy from a designated place, then offering equivalent\n"
+"access to copy the source code from the same place counts as\n"
+"distribution of the source code, even though third parties are not\n"
+"compelled to copy the source along with the object code.\n"
+"\n"
+"  4. You may not copy, modify, sublicense, or distribute the Program\n"
+"except as expressly provided under this License.  Any attempt\n"
+"otherwise to copy, modify, sublicense or distribute the Program is\n"
+"void, and will automatically terminate your rights under this License.\n"
+"However, parties who have received copies, or rights, from you under\n"
+"this License will not have their licenses terminated so long as such\n"
+"parties remain in full compliance.\n"
+"\n"
+"  5. You are not required to accept this License, since you have not\n"
+"signed it.  However, nothing else grants you permission to modify or\n"
+"distribute the Program or its derivative works.  These actions are\n"
+"prohibited by law if you do not accept this License.  Therefore, by\n"
+"modifying or distributing the Program (or any work based on the\n"
+"Program), you indicate your acceptance of this License to do so, and\n"
+"all its terms and conditions for copying, distributing or modifying\n"
+"the Program or works based on it.\n"
+"\n"
+"  6. Each time you redistribute the Program (or any work based on the\n"
+"Program), the recipient automatically receives a license from the\n"
+"original licensor to copy, distribute or modify the Program subject to\n"
+"these terms and conditions.  You may not impose any further\n"
+"restrictions on the recipients' exercise of the rights granted herein.\n"
+"You are not responsible for enforcing compliance by third parties to\n"
+"this License.\n"
+"\n"
+"  7. If, as a consequence of a court judgment or allegation of patent\n"
+"infringement or for any other reason (not limited to patent issues),\n"
+"conditions are imposed on you (whether by court order, agreement or\n"
+"otherwise) that contradict the conditions of this License, they do not\n"
+"excuse you from the conditions of this License.  If you cannot\n"
+"distribute so as to satisfy simultaneously your obligations under this\n"
+"License and any other pertinent obligations, then as a consequence you\n"
+"may not distribute the Program at all.  For example, if a patent\n"
+"license would not permit royalty-free redistribution of the Program by\n"
+"all those who receive copies directly or indirectly through you, then\n"
+"the only way you could satisfy both it and this License would be to\n"
+"refrain entirely from distribution of the Program.\n"
+"\n"
+"If any portion of this section is held invalid or unenforceable under\n"
+"any particular circumstance, the balance of the section is intended to\n"
+"apply and the section as a whole is intended to apply in other\n"
+"circumstances.\n"
+"\n"
+"It is not the purpose of this section to induce you to infringe any\n"
+"patents or other property right claims or to contest validity of any\n"
+"such claims; this section has the sole purpose of protecting the\n"
+"integrity of the free software distribution system, which is\n"
+"implemented by public license practices.  Many people have made\n"
+"generous contributions to the wide range of software distributed\n"
+"through that system in reliance on consistent application of that\n"
+"system; it is up to the author/donor to decide if he or she is willing\n"
+"to distribute software through any other system and a licensee cannot\n"
+"impose that choice.\n"
+"\n"
+"This section is intended to make thoroughly clear what is believed to\n"
+"be a consequence of the rest of this License.\n"
+"\n"
+"  8. If the distribution and/or use of the Program is restricted in\n"
+"certain countries either by patents or by copyrighted interfaces, the\n"
+"original copyright holder who places the Program under this License\n"
+"may add an explicit geographical distribution limitation excluding\n"
+"those countries, so that distribution is permitted only in or among\n"
+"countries not thus excluded.  In such case, this License incorporates\n"
+"the limitation as if written in the body of this License.\n"
+"\n"
+"  9. The Free Software Foundation may publish revised and/or new versions\n"
+"of the General Public License from time to time.  Such new versions will\n"
+"be similar in spirit to the present version, but may differ in detail to\n"
+"address new problems or concerns.\n"
+"\n"
+"Each version is given a distinguishing version number.  If the Program\n"
+"specifies a version number of this License which applies to it and \"any\n"
+"later version\", you have the option of following the terms and conditions\n"
+"either of that version or of any later version published by the Free\n"
+"Software Foundation.  If the Program does not specify a version number of\n"
+"this License, you may choose any version ever published by the Free Software\n"
+"Foundation.\n"
+"\n"
+"  10. If you wish to incorporate parts of the Program into other free\n"
+"programs whose distribution conditions are different, write to the author\n"
+"to ask for permission.  For software which is copyrighted by the Free\n"
+"Software Foundation, write to the Free Software Foundation; we sometimes\n"
+"make exceptions for this.  Our decision will be guided by the two goals\n"
+"of preserving the free status of all derivatives of our free software and\n"
+"of promoting the sharing and reuse of software generally.\n"
+"\n"
+"\t\t\t    NO WARRANTY\n"
+"\n"
+"  11. BECAUSE THE PROGRAM IS LICENSED FREE OF CHARGE, THERE IS NO WARRANTY\n"
+"FOR THE PROGRAM, TO THE EXTENT PERMITTED BY APPLICABLE LAW.  EXCEPT WHEN\n"
+"OTHERWISE STATED IN WRITING THE COPYRIGHT HOLDERS AND/OR OTHER PARTIES\n"
+"PROVIDE THE PROGRAM \"AS IS\" WITHOUT WARRANTY OF ANY KIND, EITHER EXPRESSED\n"
+"OR IMPLIED, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF\n"
+"MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  THE ENTIRE RISK AS\n"
+"TO THE QUALITY AND PERFORMANCE OF THE PROGRAM IS WITH YOU.  SHOULD THE\n"
+"PROGRAM PROVE DEFECTIVE, YOU ASSUME THE COST OF ALL NECESSARY SERVICING,\n"
+"REPAIR OR CORRECTION.\n"
+"\n"
+"  12. IN NO EVENT UNLESS REQUIRED BY APPLICABLE LAW OR AGREED TO IN WRITING\n"
+"WILL ANY COPYRIGHT HOLDER, OR ANY OTHER PARTY WHO MAY MODIFY AND/OR\n"
+"REDISTRIBUTE THE PROGRAM AS PERMITTED ABOVE, BE LIABLE TO YOU FOR DAMAGES,\n"
+"INCLUDING ANY GENERAL, SPECIAL, INCIDENTAL OR CONSEQUENTIAL DAMAGES ARISING\n"
+"OUT OF THE USE OR INABILITY TO USE THE PROGRAM (INCLUDING BUT NOT LIMITED\n"
+"TO LOSS OF DATA OR DATA BEING RENDERED INACCURATE OR LOSSES SUSTAINED BY\n"
+"YOU OR THIRD PARTIES OR A FAILURE OF THE PROGRAM TO OPERATE WITH ANY OTHER\n"
+"PROGRAMS), EVEN IF SUCH HOLDER OR OTHER PARTY HAS BEEN ADVISED OF THE\n"
+"POSSIBILITY OF SUCH DAMAGES.\n"
+"\n"
+"\t\t     END OF TERMS AND CONDITIONS\n"
+"\n"
+"\t    How to Apply These Terms to Your New Programs\n"
+"\n"
+"  If you develop a new program, and you want it to be of the greatest\n"
+"possible use to the public, the best way to achieve this is to make it\n"
+"free software which everyone can redistribute and change under these terms.\n"
+"\n"
+"  To do so, attach the following notices to the program.  It is safest\n"
+"to attach them to the start of each source file to most effectively\n"
+"convey the exclusion of warranty; and each file should have at least\n"
+"the \"copyright\" line and a pointer to where the full notice is found.\n"
+"\n"
+"    <one line to give the program's name and a brief idea of what it does.>\n"
+"    Copyright (C) <year>  <name of author>\n"
+"\n"
+"    This program is free software; you can redistribute it and/or modify\n"
+"    it under the terms of the GNU General Public License as published by\n"
+"    the Free Software Foundation; either version 2 of the License, or\n"
+"    (at your option) any later version.\n"
+"\n"
+"    This program is distributed in the hope that it will be useful,\n"
+"    but WITHOUT ANY WARRANTY; without even the implied warranty of\n"
+"    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n"
+"    GNU General Public License for more details.\n"
+"\n"
+"    You should have received a copy of the GNU General Public License\n"
+"    along with this program; if not, write to the Free Software\n"
+"    Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA  02110-1301  USA\n"
+"\n"
+"\n"
+"Also add information on how to contact you by electronic and paper mail.\n"
+"\n"
+"If the program is interactive, make it output a short notice like this\n"
+"when it starts in an interactive mode:\n"
+"\n"
+"    Gnomovision version 69, Copyright (C) year name of author\n"
+"    Gnomovision comes with ABSOLUTELY NO WARRANTY; for details type `show w'.\n"
+"    This is free software, and you are welcome to redistribute it\n"
+"    under certain conditions; type `show c' for details.\n"
+"\n"
+"The hypothetical commands `show w' and `show c' should show the appropriate\n"
+"parts of the General Public License.  Of course, the commands you use may\n"
+"be called something other than `show w' and `show c'; they could even be\n"
+"mouse-clicks or menu items--whatever suits your program.\n"
+"\n"
+"You should also get your employer (if you work as a programmer) or your\n"
+"school, if any, to sign a \"copyright disclaimer\" for the program, if\n"
+"necessary.  Here is a sample; alter the names:\n"
+"\n"
+"  Yoyodyne, Inc., hereby disclaims all copyright interest in the program\n"
+"  `Gnomovision' (which makes passes at compilers) written by James Hacker.\n"
+"\n"
+"  <signature of Ty Coon>, 1 April 1989\n"
+"  Ty Coon, President of Vice\n"
+"\n"
+"This General Public License does not permit incorporating your program into\n"
+"proprietary programs.  If your program is a subroutine library, you may\n"
+"consider it more useful to permit linking proprietary applications with the\n"
+"library.  If this is what you want to do, use the GNU Library General\n"
+"Public License instead of this License."
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_about.cpp:71
-#, fuzzy
 msgid "http://www.avidemux.org"
 msgstr "http://www.avidemux.org"
 
@@ -2491,9 +2843,8 @@
 msgstr "Cr(c)ditos del traductor"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_acodec.cpp:138
-#, fuzzy
 msgid "AudioCodec"
-msgstr "Codec Sonido"
+msgstr "Codec de audio"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_acodec.cpp:163
 msgid "Configure codec"
@@ -2503,7 +2854,7 @@
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_chromaShift.cpp:67
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_contrast.cpp:72
 msgid "ASHARP"
-msgstr ""
+msgstr "ASHARP"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_asharp.cpp:183
 msgid "ASharp by MarcFD"
@@ -2546,14 +2897,12 @@
 msgstr "<b>Objetivo</b>"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:441
-#, fuzzy
 msgid "Duration:"
-msgstr "Destino:"
+msgstr "Duraci?n:"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:447
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:802
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_idx_pg.cpp:198
-#, fuzzy
 msgid "00:00:00"
 msgstr "00:00:00"
 
@@ -2599,7 +2948,6 @@
 msgstr "2x 74 min. CD"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:555
-#, fuzzy
 msgid "DVD5"
 msgstr "DVD5"
 
@@ -2670,9 +3018,8 @@
 msgstr "V Shift :"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_chromaShift.cpp:247
-#, fuzzy
 msgid "<b>Preview</b>"
-msgstr "<b>V?deo</b>"
+msgstr "<b>Previsualizaci?n</b>"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_cnr2.cpp:137
 msgid "Chroma Noise Reduction 2"
@@ -2769,7 +3116,7 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_coloryuv.cpp:374
 msgid "Rec.709"
-msgstr "Rec. 709"
+msgstr "Rec.709"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_coloryuv.cpp:382
 msgid "Coring"
@@ -2817,7 +3164,7 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_contrast.cpp:243
 msgid "Chroma v"
-msgstr ""
+msgstr "Chroma v"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_crop.cpp:258
 msgid "Crop Settings"
@@ -2850,45 +3197,45 @@
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:161
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:183
 msgid "Privileges Required"
-msgstr ""
+msgstr "Se necesitan Privilegios"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:161
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:183
 msgid "Root privileges are required to perform this operation."
-msgstr ""
+msgstr "Se necesitan privilegios de Superusuario para llevar a cabo esta operaci?n."
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:204
 msgid "Shutting down"
-msgstr ""
+msgstr "Apagando"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:381
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_working.cpp:150
 #, c-format
 msgid "%d%%"
-msgstr ""
+msgstr "%d%%"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:404
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:411
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:418
 #, c-format
 msgid "%lu MB"
-msgstr ""
+msgstr "%lu MB"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:514
 msgid "Encoding..."
-msgstr ""
+msgstr "Codificando... "
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:545
 msgid "<b>Phase:</b>"
-msgstr ""
+msgstr "<b>Fase:</b>"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:560
 msgid "<b>Video Codec:</b>"
-msgstr ""
+msgstr "<b>Codec de v?deo:</b>"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:575
 msgid "<b>Audio Codec:</b>"
-msgstr ""
+msgstr "<b>Codec de audio:</b>"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:590
 msgid "<b>Container:</b>"
@@ -2896,23 +3243,24 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:622
 msgid "<b>Processed Frames:</b>"
-msgstr ""
+msgstr "<b>Im?genes procesadas:</b>"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:630
 msgid "<b>Total Frames:</b>"
-msgstr ""
+msgstr "<b>Total de im?genes:</b>"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:638
 msgid "<b>Quantiser:</b>"
-msgstr ""
+msgstr "<b>Cuantizador:</b>"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:646
+#, fuzzy
 msgid "<b>Average Bitrate:</b>"
-msgstr ""
+msgstr "<b>Bits p/seg.:</b>"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:654
 msgid "0 kB/s"
-msgstr ""
+msgstr "0 kB/s"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:699
 msgid "<b>Video Size:</b>"
@@ -2930,52 +3278,50 @@
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:731
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:739
 msgid "0 MB"
-msgstr ""
+msgstr "0 MB"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:764
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_working.cpp:244
 msgid "<b>Elapsed:</b>"
-msgstr ""
+msgstr "<b>Transcurrido:</b>"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:772
 msgid "<b>Time Remaining:</b>"
-msgstr ""
+msgstr "<b>Tiempo restante</b>"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:780
 msgid "<b>Frames/sec:</b>"
-msgstr ""
+msgstr "<b>Im?genes/seg:</b>"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:826
 msgid "Shut down computer when finished"
-msgstr ""
+msgstr "Apagar el ordenador cuando finalize"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:834
 msgid "Priority:"
-msgstr ""
+msgstr "Prioridad"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:844
 msgid "Above Normal"
-msgstr ""
+msgstr "Por encima de lo Normal"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:846
 msgid "Below Normal"
-msgstr ""
+msgstr "Por debajo de lo Normal"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:884
 msgid "Pause / Abort"
 msgstr "Pausar / Cancelar"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_eq2.cpp:205
-#, fuzzy
 msgid "MPlayer eq2"
-msgstr "Mplayer eq2"
+msgstr "MPlayer eq2"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_eq2.cpp:231
 msgid "Brigh_tness:"
 msgstr "Brillo:"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_eq2.cpp:239
-#, fuzzy
 msgid "_Saturation:"
 msgstr "Saturaci?n:"
 
@@ -3024,7 +3370,6 @@
 msgstr ""
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_hue.cpp:171
-#, fuzzy
 msgid "Hue/Saturation"
 msgstr "Color/Saturaci?n"
 
@@ -3033,7 +3378,6 @@
 msgstr "<b>Color:</b>"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_hue.cpp:193
-#, fuzzy
 msgid "<b>Saturation:</b>"
 msgstr "<b>Saturaci?n:</b>"
 
@@ -3054,12 +3398,10 @@
 msgstr "Indizando..."
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_idx_pg.cpp:174
-#, fuzzy
 msgid "Time left :"
 msgstr "Tiempo restante:"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_idx_pg.cpp:182
-#, fuzzy
 msgid "Timecode :"
 msgstr "Marca de tiempo:"
 
@@ -3069,7 +3411,7 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_idx_pg.cpp:214
 msgid "Indexing :"
-msgstr "Indizando:"
+msgstr "Indexando:"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_idx_pg.cpp:222
 msgid "/dev/null"
@@ -3085,12 +3427,10 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs.cpp:25
 #: avidemux/gtk_gui.cpp:2275
-#, fuzzy
 msgid "Failed"
 msgstr "Error"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs.cpp:25
-#, fuzzy
 msgid "Deleted"
 msgstr "Borrado"
 
@@ -3103,7 +3443,6 @@
 msgstr "Nombre de Tarea"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs.cpp:103
-#, fuzzy
 msgid "Started at"
 msgstr "Comenzado a las"
 
@@ -3158,8 +3497,9 @@
 msgstr "Ejecutar tarea"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs_save.cpp:49
+#, fuzzy
 msgid "Select Video to Write"
-msgstr ""
+msgstr "Seleccionar archivo"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs_save.cpp:63
 msgid "Invalid filename"
@@ -3167,7 +3507,7 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs_save.cpp:63
 msgid "Please select or enter a valid filename."
-msgstr ""
+msgstr "Por favor seleccione o introduzca un nombre v?lido"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs_save.cpp:69
 msgid "Invalid jobname"
@@ -3175,15 +3515,13 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs_save.cpp:69
 msgid "Please select or enter a valid jobname."
-msgstr ""
+msgstr "Por favor seleccione o introduzca un nombre v?lido de tarea"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs_save.cpp:110
-#, fuzzy
 msgid "Save Job"
 msgstr "Guardar tarea"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs_save.cpp:131
-#, fuzzy
 msgid "Select the output file"
 msgstr "Seleccionar archivo de salida"
 
@@ -3195,9 +3533,7 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs_save.cpp:154
 msgid "Job name displayed in the job list and used as the script filename"
-msgstr ""
-"Nombre de tarea mostrado en la lista de tareas y utilizado como nombre del "
-"script"
+msgstr "Nombre de tarea mostrado en la lista de tareas y utilizado como nombre del script"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs_save.cpp:163
 msgid "Filename of the audio/video output"
@@ -3208,7 +3544,6 @@
 msgstr "_Nombre de tarea"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs_save.cpp:173
-#, fuzzy
 msgid "Output _file:"
 msgstr "_Archivo de Salida"
 
@@ -3241,7 +3576,6 @@
 msgstr "Mini OCR"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_ocr.cpp:86
-#, fuzzy
 msgid "0:0:0"
 msgstr "0:0:0"
 
@@ -3251,7 +3585,7 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_ocr.cpp:108
 msgid "TimeCode:"
-msgstr ""
+msgstr "Marca de tiempo:"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_ocr.cpp:116
 msgid "# of Glyphs :"
@@ -3262,9 +3596,8 @@
 msgstr "<b>Estad?sticas</b>"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_ocr.cpp:141
-#, fuzzy
 msgid "Current Glyph"
-msgstr "Glifo Actual"
+msgstr "Glyph Actual"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_ocr.cpp:154
 msgid " Text:"
@@ -3272,7 +3605,7 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_ocr.cpp:176
 msgid "_Calibrate"
-msgstr ""
+msgstr "Calibrar"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_ocr.cpp:180
 msgid "If the glyphs are too thin, enter a lower value here"
@@ -3280,11 +3613,11 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_ocr.cpp:182
 msgid "S_kip all"
-msgstr ""
+msgstr "Saltar todo"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_ocr.cpp:186
 msgid "Skip the whole image"
-msgstr ""
+msgstr "Saltar toda la imagen"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_ocr.cpp:188
 msgid "Skip Glyph"
@@ -3296,7 +3629,7 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_ocr.cpp:194
 msgid "_Ignore glyph"
-msgstr ""
+msgstr "Ignorar Glifo"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_ocr.cpp:198
 msgid "This glyph will be ignored from now on"
@@ -3343,7 +3676,6 @@
 "Puede continuar o cancelarla."
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_pause.cpp:136
-#, fuzzy
 msgid "Abort"
 msgstr "Cancelar"
 
@@ -3357,7 +3689,7 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_pipe.cpp:104
 msgid "Application path/name (/usr/bin/sox...)"
-msgstr "Ruta de Aplicaci?n/nombre (/usr/bin/sox...)"
+msgstr "Ruta de aplicaci?n/nombre (/usr/bin/sox...)"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_pipe.cpp:113
 msgid "Full parameter line"
@@ -3371,81 +3703,82 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:47
 msgid "No"
-msgstr ""
+msgstr "No"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:47
 msgid "Yes"
-msgstr ""
+msgstr "Si"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:67
 #, c-format
 msgid "%lu x %lu"
-msgstr ""
+msgstr "%lu x %lu"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:70
 #, c-format
 msgid "%2.3f fps"
-msgstr ""
+msgstr "%2.3f fps"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:73
 #, c-format
 msgid "%ld frames"
-msgstr ""
+msgstr "%ld im?genes"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:83
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:133
 #, c-format
 msgid "%02d:%02d:%02d.%03d"
-msgstr ""
+msgstr "%02d:%02d:%02d.%03d"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:96
 #, c-format
 msgid "%s (%u:%u)"
-msgstr ""
+msgstr "%s (%u:%u)"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:118
 #, c-format
 msgid "%lu Hz"
-msgstr ""
+msgstr "%lu Hz"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:120
 #, c-format
 msgid "%lu Bps / %lu kbps"
-msgstr ""
+msgstr "%lu Bps / %lu kbps"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:136
 #, c-format
 msgid "%.2f MB"
-msgstr ""
+msgstr "%.2f MB"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:205
 msgid "Properties"
-msgstr ""
+msgstr "Propiedades"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:234
 msgid "Frame Rate:"
-msgstr ""
+msgstr "Tasa de im?genes"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:241
+#, fuzzy
 msgid "Frame Count:"
-msgstr ""
+msgstr "Filtro de Apagado"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:248
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:426
 msgid "Total Duration:"
-msgstr ""
+msgstr "Duraci?n total:"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:269
 msgid "Image Size:"
-msgstr ""
+msgstr "Tama?o de la imagen:"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:290
 msgid "Codec 4CC:"
-msgstr ""
+msgstr "Codec 4CC:"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:304
 msgid "Aspect Ratio:"
-msgstr ""
+msgstr "Relaci?n de aspecto:"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:318
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1058
@@ -3458,39 +3791,41 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:351
 msgid "Packed Bitstream:"
-msgstr ""
+msgstr "Empaquetado Bitstream"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:365
+#, fuzzy
 msgid "Quarter Pixel:"
-msgstr ""
+msgstr "Quarter Pixel"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:379
 msgid "<b>Extra Video Properties</b>"
-msgstr ""
+msgstr "<b>Propiedades extra de v?deo</b>"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:398
 msgid "Codec:"
-msgstr ""
+msgstr "Codec:"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:405
 msgid "Channels:"
-msgstr ""
+msgstr "Canales:"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:412
 msgid "Bitrate:"
-msgstr ""
+msgstr "Bitrate:"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:419
 msgid "Frequency:"
-msgstr ""
+msgstr "Frecuencia:"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:468
 msgid "File Size:"
-msgstr ""
+msgstr "Tama?o del archivo: "
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:482
+#, fuzzy
 msgid "Variable Bitrate:"
-msgstr ""
+msgstr "Modo de tasa de bits variable"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:496
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1098
@@ -3560,40 +3895,35 @@
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_srt.cpp:91
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_srt.cpp:222
 msgid "Subtitle Size and Position"
-msgstr ""
+msgstr "Tama?o del subt?tulo y Posici?n"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_srt.cpp:236
 msgid "Font Size:"
-msgstr ""
+msgstr "Tama?o fuente"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_vcodec.cpp:104
-#, fuzzy
 msgid "Video encoder"
-msgstr "Sin codificador"
+msgstr "Codificaci?n de v?deo"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_vcodec.cpp:118
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1078
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1118
-#, fuzzy
 msgid "Configure"
 msgstr "Configurar"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_vobsub.cpp:98
-#, fuzzy
 msgid "Select .idx file"
-msgstr "Seleccionar ?ndice .idx"
+msgstr "Seleccionar archivo .idx"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_vobsub.cpp:196
 msgid "VobSub Settings"
 msgstr "Configuraci?n VobSub"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_vobsub.cpp:213
-#, fuzzy
 msgid "Select .idx"
 msgstr "Seleccionar .idx"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_vobsub.cpp:227
-#, fuzzy
 msgid "Select Language :"
 msgstr "Seleccionar Idioma:"
 
@@ -3615,16 +3945,16 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_working.cpp:223
 msgid "Processing"
-msgstr ""
+msgstr "Procesando"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_working.cpp:259
+#, fuzzy
 msgid "<b>Time remaining:</b>"
-msgstr ""
+msgstr "<b>Tiempo restante</b>"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:560
-#, fuzzy
 msgid "X264 configuration"
-msgstr "configuraci?n X264"
+msgstr "Configuraci?n X264"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:575
 msgid "Encoding Mode:"
@@ -3639,12 +3969,8 @@
 msgstr "Quantizer (0-51):"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:602
-msgid ""
-"Constant Quantizer - Each frame will the same compression. Low numbers equal "
-"higher quality while high numbers equal lower quality"
-msgstr ""
-"Cuantizador constante - Cada imagen obtendr? la misma compresi?n. A menor "
-"valor mayor calidad mientras que a mayor valor menor calidad."
+msgid "Constant Quantizer - Each frame will the same compression. Low numbers equal higher quality while high numbers equal lower quality"
+msgstr "Cuantizador constante - Cada imagen obtendr? la misma compresi?n. A menor valor mayor calidad mientras que a mayor valor menor calidad."
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:612
 msgid "Target Size:"
@@ -3684,7 +4010,7 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:675
 msgid "1  - Extremely Low (Fastest)"
-msgstr "1  - Extremadamente bajo (mas ropido)"
+msgstr "1  - Extremadamente bajo (mas r?pido)"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:676
 msgid "2  - Very Low"
@@ -3716,7 +4042,7 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:683
 msgid "7B - Ultra High (RDO on Bframes)"
-msgstr "7B - Ultra alto (RDO en imagensB)"
+msgstr "7B - Ultra alto (RDO en Bim?genes)"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:690
 msgid "Diamond search"
@@ -3735,13 +4061,8 @@
 msgstr "B?squeda exhaustiva"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:705
-msgid ""
-"Set how many previous frames can be referenced by a P/B-frame. Numbers above "
-"5 do not seem to improve quality greatly. Numbers are 3 to 5 are recommended"
-msgstr ""
-"Establecer cu?ntas im?genes previas pueden ser referenciadas por un imagen-P/"
-"B. Valores por encima de 5 no parecen incrementar mucho la calidad. Se "
-"recomiendan valores entre 3 y 5."
+msgid "Set how many previous frames can be referenced by a P/B-frame. Numbers above 5 do not seem to improve quality greatly. Numbers are 3 to 5 are recommended"
+msgstr "Establecer cu?ntas im?genes previas pueden ser referenciadas por un imagen-P/B. Valores por encima de 5 no parecen incrementar mucho la calidad. Se recomiendan valores entre 3 y 5."
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:708
 msgid "Max. Ref. frames"
@@ -3752,23 +4073,16 @@
 msgstr "Rango"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:728
-msgid ""
-"Define how many pixels are analysised. The higher the range the more "
-"accurate the analysis but the slower the encoding time"
-msgstr ""
-"Definir cu?ntos pixels ser?n analizados. Cuanto mas alto sea el rango mas "
-"preciso ser? el an?lisis pero mas lento el tiempo de codificado"
+msgid "Define how many pixels are analysised. The higher the range the more accurate the analysis but the slower the encoding time"
+msgstr "Definir cu?ntos pixels ser?n analizados. Cuanto mas alto sea el rango mas preciso ser? el an?lisis pero mas lento el tiempo de codificado"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:731
 msgid "Chroma ME"
 msgstr "Croma ME"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:736
-msgid ""
-"Uses chroma (color) components for motion for compression and helps the "
-"quality"
-msgstr ""
-"Utiliza componentes croma (color) comprimir movimiento y mejorar la calidad"
+msgid "Uses chroma (color) components for motion for compression and helps the quality"
+msgstr "Utiliza componentes croma (color) comprimir movimiento y mejorar la calidad"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:739
 msgid "Mixed Refs"
@@ -3792,14 +4106,12 @@
 msgstr "Decomb Decimate"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:760
-#, fuzzy
 msgid "Interlace"
 msgstr "_Entrelazado"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:763
-#, fuzzy
 msgid "Encode interlaced"
-msgstr "desentrelazado"
+msgstr "Codificaci?n desentrelizadad"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:765
 msgid "<b>Motion Estimation</b>"
@@ -3807,12 +4119,8 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:792
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:804
-msgid ""
-"Enforce the size of a decoded pixel decoded to a certain value. Leave this "
-"at 1:1 for non-anamorphic video"
-msgstr ""
-"Forzar el tama?o de un pixel decodificado a un valor decodificado concreto. "
-"Dejarlo a 1:1 para video no-anam?rfico"
+msgid "Enforce the size of a decoded pixel decoded to a certain value. Leave this at 1:1 for non-anamorphic video"
+msgstr "Forzar el tama?o de un pixel decodificado a un valor decodificado concreto. Dejarlo a 1:1 para video no-anam?rfico"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:796
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1051
@@ -3853,26 +4161,16 @@
 msgstr "CABAC"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:881
-msgid ""
-"Lossless compression method which usually improves the bitrate usage by 15% "
-"(especially on high bitrate). Helps the quality a lot but is slower. "
-msgstr ""
-"M(c)todo de compresi n sin p(c)rdida que generalmente mejora el uso del "
-"bitrate en un 15% (especialmente en frecuencias de bits altas). Mejora mucho "
-"la calidad pero es mas lento. "
+msgid "Lossless compression method which usually improves the bitrate usage by 15% (especially on high bitrate). Helps the quality a lot but is slower. "
+msgstr "M(c)todo de compresi n sin p(c)rdida que generalmente mejora el uso del bitrate en un 15% (especialmente en frecuencias de bits altas). Mejora mucho la calidad pero es mas lento. "
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:884
 msgid "Trellis"
 msgstr "Trellis"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:893
-msgid ""
-"Use rate distortion quantization to find optimal encoding for each block. "
-"Level 0 equals disabled, level 1 equals normal and level 2 equals high"
-msgstr ""
-"Utilice cuantizacian de cambio de frecuencia para encontrar la codificaci?n "
-"?ptima para cada bloque. Nivel 0 indica desactivado, nivel 1 normal y nivel "
-"2 es alto"
+msgid "Use rate distortion quantization to find optimal encoding for each block. Level 0 equals disabled, level 1 equals normal and level 2 equals high"
+msgstr "Utilice cuantizacian de cambio de frecuencia para encontrar la codificaci?n ?ptima para cada bloque. Nivel 0 indica desactivado, nivel 1 normal y nivel 2 es alto"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:900
 msgid "Noise Reduction"
@@ -3892,8 +4190,7 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:932
 msgid "Set the amount of blurring to use for block edges when they are found"
-msgstr ""
-"Establecer la intensidad de desenfoque para fijar bordes al localizarlos"
+msgstr "Establecer la intensidad de desenfoque para fijar bordes al localizarlos"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:941
 msgid "Define the level for when deblocking is applied"
@@ -3973,22 +4270,12 @@
 msgstr "Bias"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1056
-msgid ""
-"Increase / decrease probability for how often B-frames are used. Will not "
-"violate the maximum consecutive frame limit"
-msgstr ""
-"Incrementar / disminuir probabilidad de frecuencia de Imagens-B. No superar? "
-"el l?mite m?ximo de imagens-B"
+msgid "Increase / decrease probability for how often B-frames are used. Will not violate the maximum consecutive frame limit"
+msgstr "Incrementar / disminuir probabilidad de frecuencia de Imagens-B. No superar? el l?mite m?ximo de imagens-B"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1065
-msgid ""
-"Set the maximum number of consecutive B-frames. This defines how many "
-"duplicate frames can be droped. Numbers 2 to 5 are recommended. This greatly "
-"improves the use of bitrate and quality"
-msgstr ""
-"Establecer el n?mero m?ximo de Imagens-B consecutivos. Se define cu?ntas "
-"im?genes duplicadas se pueden eliminar. Se recomiendan valores de 2 a 5. "
-"Mejora sustancialmente la tasa de bits y la calidad"
+msgid "Set the maximum number of consecutive B-frames. This defines how many duplicate frames can be droped. Numbers 2 to 5 are recommended. This greatly improves the use of bitrate and quality"
+msgstr "Establecer el n?mero m?ximo de Imagens-B consecutivos. Se define cu?ntas im?genes duplicadas se pueden eliminar. Se recomiendan valores de 2 a 5. Mejora sustancialmente la tasa de bits y la calidad"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1068
 msgid "Max Consecutive"
@@ -3999,12 +4286,8 @@
 msgstr "ME Bidireccional"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1084
-msgid ""
-"Jointly optimize both Motion Vector's in B-frames. This will improve quality "
-"but take more time for encoding"
-msgstr ""
-"Optimizar conjuntamente ambos Vectores de Movimiento en Imagens-B. Mejorar? "
-"la calidad pero lleva mas tiempo la codificaci?n"
+msgid "Jointly optimize both Motion Vector's in B-frames. This will improve quality but take more time for encoding"
+msgstr "Optimizar conjuntamente ambos Vectores de Movimiento en Imagens-B. Mejorar? la calidad pero lleva mas tiempo la codificaci?n"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1086
 msgid "Weighted biprediction"
@@ -4019,12 +4302,8 @@
 msgstr "DCT adaptativo"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1099
-msgid ""
-"Use fewer B-frame if needed. This is always recommended. If not enabled, the "
-"codec will always use the maximum number of consecutive B-frames"
-msgstr ""
-"Utilizar menos imagens-B si es necesario. Se recomienda siempre. Si no se "
-"activa, el codec utilizar? siempre el m?ximo n?mero de imagens-B consecutivos"
+msgid "Use fewer B-frame if needed. This is always recommended. If not enabled, the codec will always use the maximum number of consecutive B-frames"
+msgstr "Utilizar menos imagens-B si es necesario. Se recomienda siempre. Si no se activa, el codec utilizar? siempre el m?ximo n?mero de imagens-B consecutivos"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1102
 #, fuzzy
@@ -4032,19 +4311,14 @@
 msgstr "Guardar preferencia"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1107
-msgid ""
-"Allow B-frames to make references non-linearly to another B-frame (instead "
-"of creating a duplicate copy)"
-msgstr ""
-"Permitir a los Imagens-B realizar referencias no-lineales a otro Imagen-B "
-"(en lugar de crear una copia duplicada)"
+msgid "Allow B-frames to make references non-linearly to another B-frame (instead of creating a duplicate copy)"
+msgstr "Permitir a los Imagens-B realizar referencias no-lineales a otro Imagen-B (en lugar de crear una copia duplicada)"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1113
 msgid "B-Frame Direct Mode:  "
 msgstr "Imagen-B Modo Directo: "
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1121
-#, fuzzy
 msgid "Auto"
 msgstr "A_uto"
 
@@ -4061,14 +4335,12 @@
 msgstr "<b>Imagens-B</b>"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1131
-#, fuzzy
 msgid "Partitions & Frames"
-msgstr "Separaciones y Imagens"
+msgstr "Separaciones y Im?genes"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1159
 msgid "Set how much \"bitrate bonus\" a keyframe can get"
-msgstr ""
-"Establecer cu?nta \"bonificaci?n de bits\" puede obtener un imagen clave"
+msgstr "Establecer cu?nta \"bonificaci?n de bits\" puede obtener un imagen clave"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1162
 #, fuzzy
@@ -4084,22 +4356,12 @@
 msgstr "Variabilidad de Tasa de Bits (%)"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1189
-msgid ""
-"Set how much bitrate is deducted from a B-frame as compared to the previous "
-"P-frame"
-msgstr ""
-"Establecer cantidad de bits deducidos de un Imagen-B si se compara con el "
-"Imagen-P previo"
+msgid "Set how much bitrate is deducted from a B-frame as compared to the previous P-frame"
+msgstr "Establecer cantidad de bits deducidos de un Imagen-B si se compara con el Imagen-P previo"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1198
-msgid ""
-"Define how much the bitrate can fluctuate over the entire video. 0% results "
-"in a constant bitrate stream, while 100% results in a pure quality based "
-"bitrate stream"
-msgstr ""
-"Definir cu?nto puede fluctuar la tasa de bits sobre el video completo. Con "
-"0% el resultado tiene una tasa de bits constante, mientras que con 100% se "
-"consigue una tasa de bits basada en calidad"
+msgid "Define how much the bitrate can fluctuate over the entire video. 0% results in a constant bitrate stream, while 100% results in a pure quality based bitrate stream"
+msgstr "Definir cu?nto puede fluctuar la tasa de bits sobre el video completo. Con 0% el resultado tiene una tasa de bits constante, mientras que con 100% se consigue una tasa de bits basada en calidad"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1201
 msgid "<b>Bitrate</b>"
@@ -4126,10 +4388,8 @@
 msgstr "Forzar un nivel de cuantizaci?n m?ximo"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1265
-msgid ""
-"Define how much the quantizer rate can change between two consecutive frames"
-msgstr ""
-"Definir cuanto puede cambiar la cuantizaci?n entre dos im?genes consecutivas"
+msgid "Define how much the quantizer rate can change between two consecutive frames"
+msgstr "Definir cuanto puede cambiar la cuantizaci?n entre dos im?genes consecutivas"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1268
 msgid "<b>Quantization Limits</b>"
@@ -4140,36 +4400,20 @@
 msgstr "Umbral de cambio de escena"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1300
-msgid ""
-"Increase / decrease sensitivity for detecting Scene Changes to compensate "
-"for. Improves I-frame usage and helps quality"
-msgstr ""
-"Incrementar / disminuir la sensibilidad para detectar cambios de escena. "
-"Aumenta el uso de imagens-I y mejora la calidad"
+msgid "Increase / decrease sensitivity for detecting Scene Changes to compensate for. Improves I-frame usage and helps quality"
+msgstr "Incrementar / disminuir la sensibilidad para detectar cambios de escena. Aumenta el uso de imagens-I y mejora la calidad"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1303
 msgid "Min IDR frame interval"
 msgstr "Intervalo de im?genes IDR m?n."
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1316
-msgid ""
-"Set minimum frame interval between IDR frames. Defines the minimum amount a "
-"frame can be reused and referenced by other frames before a new clean one is "
-"established"
-msgstr ""
-"Establecer intervalo m?nimo de im?genes entre Imagens IDR. Define el n?mero "
-"m?nimo de veces que una imagen puede ser reutilizada y referenciada por "
-"otras im?genes antes de que una nueva se establezca"
+msgid "Set minimum frame interval between IDR frames. Defines the minimum amount a frame can be reused and referenced by other frames before a new clean one is established"
+msgstr "Establecer intervalo m?nimo de im?genes entre Imagens IDR. Define el n?mero m?nimo de veces que una imagen puede ser reutilizada y referenciada por otras im?genes antes de que una nueva se establezca"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1325
-msgid ""
-"Set maximum frame interval between IDR frames. Defines the maximum amount a "
-"frame can be reused and referenced by other frames before a new clean one is "
-"established"
-msgstr ""
-"Establecer intervalo m?ximo de im?genes entre Imagens IDR. Define el n?mero "
-"m?ximo de veces que una imagen puede ser reutilizada y referenciada por "
-"otras im?genes antes de que una nueva se establezca"
+msgid "Set maximum frame interval between IDR frames. Defines the maximum amount a frame can be reused and referenced by other frames before a new clean one is established"
+msgstr "Establecer intervalo m?ximo de im?genes entre Imagens IDR. Define el n?mero m?ximo de veces que una imagen puede ser reutilizada y referenciada por otras im?genes antes de que una nueva se establezca"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1328
 msgid "Max IDR frame interval"
@@ -4198,9 +4442,7 @@
 msgstr "<b>Tama?o video:</b>"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1430
-msgid ""
-"Allowed variance of average bitrate. Lower values mean less variance. Higher "
-"values mean more variance."
+msgid "Allowed variance of average bitrate. Lower values mean less variance. Higher values mean more variance."
 msgstr ""
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1433
@@ -4209,10 +4451,7 @@
 msgstr "Bitrate"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1446
-msgid ""
-"Allowed variance of average quantizer or quality. Lower values mean less "
-"variance. Higher values mean more variance. Note that 0 means constant "
-"quality while 1 means constant fluctuation. Recommended 0.6."
+msgid "Allowed variance of average quantizer or quality. Lower values mean less variance. Higher values mean more variance. Note that 0 means constant quality while 1 means constant fluctuation. Recommended 0.6."
 msgstr ""
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1455
@@ -4224,7 +4463,6 @@
 msgstr ""
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1467
-#, fuzzy
 msgid "Quantizer Compression"
 msgstr "Cuantizador de compresi?n:"
 
@@ -4307,12 +4545,10 @@
 msgstr "<b>L?mites de Cuantizaci?n</b>"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1622
-#, fuzzy
 msgid "More"
-msgstr "Modo"
+msgstr "M?s"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1630
-#, fuzzy
 msgid "Defaults"
 msgstr "Por defecto"
 
@@ -4350,7 +4586,6 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid.cpp:357
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:884
-#, fuzzy
 msgid "0 - None"
 msgstr "0 - Ninguno"
 
@@ -4415,9 +4650,8 @@
 msgstr "?A?n no!"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid.cpp:490
-#, fuzzy
 msgid "B Frames"
-msgstr "Imagens-B:"
+msgstr "Im?genes B"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:109
 msgid "Select Xvid matrix file to load"
@@ -4441,20 +4675,23 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:179
 msgid "Size (MBytes):"
-msgstr ""
+msgstr "Tama?o (MBytes):"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:185
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:369
+#, fuzzy
 msgid "Average bitrate (kb/s):"
-msgstr ""
+msgstr "Tasa de bits m?x. (kbps):"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:354
+#, fuzzy
 msgid "Target bitrate (kb/s):"
-msgstr ""
+msgstr "Bitrate buscado (kbps)  "
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:362
+#, fuzzy
 msgid "Target size (MBytes):"
-msgstr ""
+msgstr "Tama?o total (MB):"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:479
 msgid "Select Custom Matrix File to write"
@@ -4527,12 +4764,8 @@
 msgstr "_Entrelazado"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:809
-msgid ""
-"Enables interlaced frame support - use only if your source contains "
-"interlacing artifacts (i.e. fields instead of progressive frames)"
-msgstr ""
-"Activa el soporte de im?genes entrelazadas - utilizar si el origen contiene "
-"datos entrelazados (p.e. si contiene campos en vez de im?genes progresivas)"
+msgid "Enables interlaced frame support - use only if your source contains interlacing artifacts (i.e. fields instead of progressive frames)"
+msgstr "Activa el soporte de im?genes entrelazadas - utilizar si el origen contiene datos entrelazados (p.e. si contiene campos en vez de im?genes progresivas)"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:811
 msgid "_Greyscale"
@@ -4548,8 +4781,7 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:823
 msgid "Enables special motion estimation features for cartoons/anime"
-msgstr ""
-"Activa caracter?sticas especiales de detecci?n de movimiento para animaci?n"
+msgstr "Activa caracter?sticas especiales de detecci?n de movimiento para animaci?n"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:825
 msgid "C_hroma optimizer"
@@ -4588,11 +4820,8 @@
 msgstr "Modo VHQ:"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:880
-msgid ""
-"Higher settings give higher quality results, at the cost of slower encoding"
-msgstr ""
-"Valores mas altos dan mejor calidad, con la contrapartida de ralentizar la "
-"codificaci?n"
+msgid "Higher settings give higher quality results, at the cost of slower encoding"
+msgstr "Valores mas altos dan mejor calidad, con la contrapartida de ralentizar la codificaci?n"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:888
 msgid "1 - Very low"
@@ -4620,8 +4849,7 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:917
 msgid "VHQ enables an additional search process to increase quality"
-msgstr ""
-"VHQ activa un proceso adicional de b?squeda para incrementar la calidad"
+msgstr "VHQ activa un proceso adicional de b?squeda para incrementar la calidad"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:921
 msgid "0 - Off"
@@ -4657,21 +4885,15 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:955
 msgid "Use 4 motion vectors per macroblock, might give better compression"
-msgstr ""
-"Utilizar 4 vectores de movimiento por MacroBloque, podr?a dar mejor "
-"compresi?n"
+msgstr "Utilizar 4 vectores de movimiento por MacroBloque, podr?a dar mejor compresi?n"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:957
 msgid "HQ _AC"
 msgstr "HQ _AC"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:960
-msgid ""
-"Enable a better prediction of AC component. Turns on Lumi masking - applies "
-"more compression to dark/light areas that the eye cannot notice easily"
-msgstr ""
-"Activar una mejor predicci?n de componente AC. Activa mascara Luma - Aplica "
-"mayor compresi?n para zonas iluminadas/oscuras que el ojo apenas percibe"
+msgid "Enable a better prediction of AC component. Turns on Lumi masking - applies more compression to dark/light areas that the eye cannot notice easily"
+msgstr "Activar una mejor predicci?n de componente AC. Activa mascara Luma - Aplica mayor compresi?n para zonas iluminadas/oscuras que el ojo apenas percibe"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:966
 msgid "I-frame interval - Min:"
@@ -4679,9 +4901,7 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:974
 msgid "Minimum space between I-frames, 1 will disable forced I-frame spacing"
-msgstr ""
-"Espacio m?nimo entre Imagens-I, se desactivar? espaciado forzado entre "
-"im?genes ?ndice"
+msgstr "Espacio m?nimo entre Imagens-I, se desactivar? espaciado forzado entre im?genes ?ndice"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:976
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1194
@@ -4695,17 +4915,12 @@
 msgstr "N?mero m?ximo de imagens permitido entre Imagens-I"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:999
-#, fuzzy
 msgid "Number of B-frames:"
-msgstr "N?mero de Imagens-B"
+msgstr "N?mero de im?genes-B:"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1007
-msgid ""
-"Maximum number of sequential B-frames (when set to 0, the original I/P "
-"encoder is used)"
-msgstr ""
-"N?mero m?ximo de Imagens-B (cuando se establece a 0, se utiliza el "
-"codificador I/P original "
+msgid "Maximum number of sequential B-frames (when set to 0, the original I/P encoder is used)"
+msgstr "N?mero m?ximo de Imagens-B (cuando se establece a 0, se utiliza el codificador I/P original "
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1013
 msgid "_Qpel"
@@ -4713,16 +4928,11 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1016
 msgid "Use Quarter pixel resolution for a more precise motion estimation"
-msgstr ""
-"Utilizar resoluci?n Quarter pixel para una estimaci?n de movimiento mas "
-"precisa"
+msgstr "Utilizar resoluci?n Quarter pixel para una estimaci?n de movimiento mas precisa"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1021
-msgid ""
-"Global Motion Compensation can save bits on camera pans, zooming and rotation"
-msgstr ""
-"Compensaci?n Global de Movimiento ahorra datos en desplazamiento de c?mara, "
-"zooms y rotaciones"
+msgid "Global Motion Compensation can save bits on camera pans, zooming and rotation"
+msgstr "Compensaci?n Global de Movimiento ahorra datos en desplazamiento de c?mara, zooms y rotaciones"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1023
 msgid "_BVHQ"
@@ -4762,12 +4972,8 @@
 msgstr "_MPEG"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1093
-msgid ""
-"MPEG quantizers (slightly slower) produce sharper picture (useful at higher "
-"bitrates)"
-msgstr ""
-"Cuantizadores MPEG (sensiblemente mas lento) producen im?genes mas n?tidas "
-"(?til a bits/seg. mas altos)"
+msgid "MPEG quantizers (slightly slower) produce sharper picture (useful at higher bitrates)"
+msgstr "Cuantizadores MPEG (sensiblemente mas lento) producen im?genes mas n?tidas (?til a bits/seg. mas altos)"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1097
 msgid "_Custom Matrix"
@@ -4819,9 +5025,7 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1238
 msgid "Rate distortion quantization, will find optimal encoding for each block"
-msgstr ""
-"Cuantizaci?n de distorsi?n de tasa, encontrar? la codificaci?n mas ?ptima "
-"para cada bloque"
+msgstr "Cuantizaci?n de distorsi?n de tasa, encontrar? la codificaci?n mas ?ptima para cada bloque"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1268
 msgid "I-frame boost (%):"
@@ -4849,36 +5053,20 @@
 msgstr "Un valor de 20 da un 20 por ciento mas de bits para cada Imagen-I"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1306
-msgid ""
-"I-frames appearing in the range below this value will be treated as "
-"consecutive keyframes"
-msgstr ""
-"Los Imagens-I que aparezcan en el rango de este valor se tratar?n como "
-"Imagens-Clave consecutivas"
+msgid "I-frames appearing in the range below this value will be treated as consecutive keyframes"
+msgstr "Los Imagens-I que aparezcan en el rango de este valor se tratar?n como Imagens-Clave consecutivas"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1311
-msgid ""
-"Reduction of bitrate for the first consecutive I-frames. The last I-frame "
-"will get treated normally"
-msgstr ""
-"Reducci?n de los bits/seg. para las primeras Imagens-I consecutivos. El "
-"?ltimo Imagen-I se tratar? de forma normal"
+msgid "Reduction of bitrate for the first consecutive I-frames. The last I-frame will get treated normally"
+msgstr "Reducci?n de los bits/seg. para las primeras Imagens-I consecutivos. El ?ltimo Imagen-I se tratar? de forma normal"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1316
-msgid ""
-"How much of the overflow the codec can eat into during undersized sections - "
-"larger values will bridge the gap faster"
-msgstr ""
-"Cu?nto de la sobrecarga puede utilizar el codec en secciones de tama?o "
-"reducido - A valores m?yores se completar? mas r?pido"
+msgid "How much of the overflow the codec can eat into during undersized sections - larger values will bridge the gap faster"
+msgstr "Cu?nto de la sobrecarga puede utilizar el codec en secciones de tama?o reducido - A valores m?yores se completar? mas r?pido"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1321
-msgid ""
-"How much of the overflow the codec can eat into during oversized sections - "
-"larger values will bridge the gap faster"
-msgstr ""
-"Cu?nto de la sobrecarga puede utilizar el codec en secciones de tama?o "
-"ampliado - A valores m?yores se completar? mas r?pido"
+msgid "How much of the overflow the codec can eat into during oversized sections - larger values will bridge the gap faster"
+msgstr "Cu?nto de la sobrecarga puede utilizar el codec en secciones de tama?o ampliado - A valores m?yores se completar? mas r?pido"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1323
 msgid "Two pass tuning"
@@ -4897,27 +5085,16 @@
 msgstr "Nivel de control de sobrecarga (%):"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1362
-msgid ""
-"The higher this value, the more bits get taken from frames larger than the "
-"average size, and redistributed to others"
-msgstr ""
-"A un valor mayor, se quitar?n mas bits de im?genes mayores que la media, y "
-"redistribuidos a otras."
+msgid "The higher this value, the more bits get taken from frames larger than the average size, and redistributed to others"
+msgstr "A un valor mayor, se quitar?n mas bits de im?genes mayores que la media, y redistribuidos a otras."
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1367
-msgid ""
-"The higher this value, the more bits get assigned to frames below the "
-"average frame size"
-msgstr ""
-"A un valor mayor, mas bits ser?n asignados a im?genes por debajo de la media."
+msgid "The higher this value, the more bits get assigned to frames below the average frame size"
+msgstr "A un valor mayor, mas bits ser?n asignados a im?genes por debajo de la media."
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1372
-msgid ""
-"0 = default from core (let XviD decide), else overflow payback percent per "
-"frame"
-msgstr ""
-"0 = Marcado por el codec (dejar que Xvid decida), de otra forma se recarga "
-"en porcentaje por imagen"
+msgid "0 = default from core (let XviD decide), else overflow payback percent per frame"
+msgstr "0 = Marcado por el codec (dejar que Xvid decida), de otra forma se recarga en porcentaje por imagen"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1374
 msgid "Curve compression"
@@ -4936,33 +5113,38 @@
 msgstr "<b>Intra-Matriz</b>"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/DIA_color.cpp:71
-#, fuzzy
 msgid "Select Color"
 msgstr "Seleccionar color"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_bitrate.cpp:99
+#, fuzzy
 msgid "_Encoding mode:"
-msgstr ""
+msgstr "Modo de codificaci?n"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_bitrate.cpp:125
+#, fuzzy
 msgid "Single pass - constant quality"
-msgstr ""
+msgstr "Pasada ?nica - cuantizador"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_bitrate.cpp:127
+#, fuzzy
 msgid "Single pass - same qz as input"
-msgstr ""
+msgstr "Pasada ?nica - cuantizador"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_bitrate.cpp:129
+#, fuzzy
 msgid "Single pass - Average quantizer"
-msgstr ""
+msgstr "Pasada ?nica - cuantizador"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_bitrate.cpp:132
+#, fuzzy
 msgid "Two pass - video size"
-msgstr ""
+msgstr "Dos pasadas - Tama?o de Archivo"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_bitrate.cpp:134
+#, fuzzy
 msgid "Two pass - average bitrate"
-msgstr ""
+msgstr "Dos pasadas, tasa de bits media"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_bitrate.cpp:273
 #: avidemux/ADM_videoFilter/ADM_vidForcedPP.cpp:61
@@ -4971,46 +5153,47 @@
 msgstr "Cuantizador:"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_bitrate.cpp:278
+#, fuzzy
 msgid "A_vg Quantizer:"
-msgstr ""
+msgstr "Cuantizador:"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_bitrate.cpp:283
+#, fuzzy
 msgid "_Video size (MB):"
-msgstr ""
+msgstr "Tama?o de video (MB):"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_bitrate.cpp:288
+#, fuzzy
 msgid "_Average bitrate (kb/s):"
-msgstr ""
+msgstr "Tasa de bits m?x. (kbps):"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_bitrate.cpp:293
 msgid "-"
-msgstr ""
+msgstr "-"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_hex.cpp:100
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_hex.cpp:134
 msgid "_Previous"
-msgstr ""
+msgstr "_Anterior"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_hex.cpp:108
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_hex.cpp:164
 msgid "_Next"
-msgstr ""
+msgstr "_Siguiente"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_threadCount.cpp:75
 msgid "Disable"
-msgstr ""
+msgstr "Deshabilitar"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_threadCount.cpp:79
 msgid "Auto-detect"
-msgstr ""
+msgstr "Autodetectar"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filterlist.cpp:64
-#, fuzzy
 msgid "Add Video Filter"
-msgstr "A?adir Filtro de Video"
+msgstr "A?adir filtro de v?deo"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filterlist.cpp:98
-#, fuzzy
 msgid "Transformation"
 msgstr "Transformaci?n"
 
@@ -5047,9 +5230,8 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager.cpp:342
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager.cpp:344
-#, fuzzy
 msgid "Load set of filters"
-msgstr "Cargar config. de filtros"
+msgstr "Cargar conjunto de filtros"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager.cpp:357
 msgid "Nothing to save"
@@ -5057,36 +5239,30 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager.cpp:361
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager.cpp:363
-#, fuzzy
 msgid "Save set of filters"
-msgstr "Guardar config. de filtros"
+msgstr "Guardar conjunto de filtros"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager_dialog.cpp:123
-#, fuzzy
 msgid "Video Filter Manager"
-msgstr "Edici?n de Fitros de Video"
+msgstr "Edici?n de filtros de v?deo"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager_dialog.cpp:145
 msgid "Open filter list [Ctrl-O]"
 msgstr "Abrir lista de filtros [Ctrl-O]"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager_dialog.cpp:154
-#, fuzzy
 msgid "Save filter list [Ctrl-S]"
 msgstr "Guardar lista de filtros [Ctrl-S]"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager_dialog.cpp:162
-#, fuzzy
 msgid "Save Script"
 msgstr "Guardar Script"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager_dialog.cpp:165
-#, fuzzy
 msgid "Save as script [Ctrl-J]"
-msgstr "Guardar como script [Ctrol-J]"
+msgstr "Guardar como script [Ctrl-J]"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager_dialog.cpp:173
-#, fuzzy
 msgid "DVD Res"
 msgstr "Res. DVD"
 
@@ -5103,7 +5279,6 @@
 msgstr "Resoluci?n Media D1 [Ctrl-2]"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager_dialog.cpp:195
-#, fuzzy
 msgid "SVCD Res"
 msgstr "Res. SVCD"
 
@@ -5112,7 +5287,6 @@
 msgstr "Resoluci?n SVCD [Ctrl-3]"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager_dialog.cpp:206
-#, fuzzy
 msgid "VCD Res"
 msgstr "Res. VCD"
 
@@ -5121,12 +5295,10 @@
 msgstr "Resoluci?n VCD [Ctrl-4]"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager_dialog.cpp:260
-#, fuzzy
 msgid "Transform"
 msgstr "Transform."
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager_dialog.cpp:333
-#, fuzzy
 msgid "Noise"
 msgstr "Ruido"
 
@@ -5139,9 +5311,8 @@
 msgstr "Misc"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager_dialog.cpp:416
-#, fuzzy
 msgid "External"
-msgstr "AC3 externo"
+msgstr "Externo"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager_dialog.cpp:427
 msgid "Add selected filter to the Active Filters list"
@@ -5152,7 +5323,6 @@
 msgstr "<b>Filtros disponibles</b>"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager_dialog.cpp:478
-#, fuzzy
 msgid "Remove filter"
 msgstr "Quitar filtro"
 
@@ -5173,12 +5343,10 @@
 msgstr "Aplicar el filtro seleccionado s?lo a una parte del archivo"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager_dialog.cpp:510
-#, fuzzy
 msgid "Configure filter"
 msgstr "Configurar filtro"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager_dialog.cpp:520
-#, fuzzy
 msgid "C_onfigure"
 msgstr "C_onfigurar"
 
@@ -5187,27 +5355,22 @@
 msgstr "<b>Filtros activos</b>"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager_dialog.cpp:551
-#, fuzzy
 msgid "_Preview"
 msgstr "_Previsualizar"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtersub.cpp:52
-#, fuzzy
 msgid "Video Filters"
 msgstr "Filtros Video"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtersub.cpp:112
-#, fuzzy
 msgid "VCD res"
 msgstr "Res. VCD"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtersub.cpp:118
-#, fuzzy
 msgid "SVCD res"
 msgstr "Res. SVCD"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtersub.cpp:124
-#, fuzzy
 msgid "DVD res"
 msgstr "Res. DVD"
 
@@ -5216,7 +5379,6 @@
 msgstr "Res. Medio D1"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtersub.cpp:156
-#, fuzzy
 msgid "Save as script"
 msgstr "Guardar como script"
 
@@ -5257,21 +5419,19 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:330
 msgid "Save _Video..."
-msgstr "Guardar _Video..."
+msgstr "Guardar V?deo..."
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:342
-#, fuzzy
 msgid "Save _BMP Image..."
-msgstr "Guardar imagen _BMP..."
+msgstr "Guardar imagen BMP..."
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:346
-#, fuzzy
 msgid "Save _JPEG Image..."
-msgstr "Guardar imagen _JPEG..."
+msgstr "Guardar imagen JPEG..."
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:350
 msgid "Save _Selection as JPEG Images..."
-msgstr ""
+msgstr "Guardar selecci?n como im?genes JPEG..."
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:363
 msgid "Save _Project"
@@ -5302,7 +5462,6 @@
 msgstr "Propie_dades"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:423
-#, fuzzy
 msgid "AVI _Muxer Options"
 msgstr "Opciones de Avi _Muxer"
 
@@ -5327,27 +5486,22 @@
 msgstr "_Copiar"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:485
-#, fuzzy
 msgid "_Paste"
 msgstr "_Pegar"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:496
-#, fuzzy
 msgid "_Delete"
 msgstr "_Borrar"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:512
-#, fuzzy
 msgid "Set Marker _A"
 msgstr "Establecer marcador _A"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:519
-#, fuzzy
 msgid "Set Marker _B"
 msgstr "Establecer marcador _B"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:531
-#, fuzzy
 msgid "Pre_ferences"
 msgstr "Pre_ferencias"
 
@@ -5380,25 +5534,22 @@
 msgstr "Zoom _2:1"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:589
-#, fuzzy
 msgid "Vi_deo"
-msgstr "Vi_deo"
+msgstr "V?_deo"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:596
-#, fuzzy
 msgid "_Decoder Options"
-msgstr "Opciones del _Decodificador"
+msgstr "Opciones del _decodificador"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:603
 msgid "_Postprocessing"
-msgstr "_Procesado Post."
+msgstr "_Postprocesando"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:606
 msgid "Select postprocessing level"
 msgstr "Seleccione el nivel de procesado posterior"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:616
-#, fuzzy
 msgid "P_review"
 msgstr "P_revisualizar"
 
@@ -5416,12 +5567,10 @@
 msgstr "_Codificador"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:646
-#, fuzzy
 msgid "Fil_ters"
 msgstr "Fil_tros"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:653
-#, fuzzy
 msgid "_Audio"
 msgstr "_Sonido"
 
@@ -5434,7 +5583,6 @@
 msgstr "Pista _Secundaria"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:668
-#, fuzzy
 msgid "_Build VBR Time Map"
 msgstr "_Construir mapa de tiempo VBR"
 
@@ -5443,7 +5591,6 @@
 msgstr "_Guardar"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:695
-#, fuzzy
 msgid "_Filters"
 msgstr "_Filtros"
 
@@ -5456,17 +5603,16 @@
 msgstr "_Calculadora"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:722
-#, fuzzy
 msgid "_Rebuild Frames (I & B)"
-msgstr "_Reconstruir Imagens I/B"
+msgstr "_Reconstruir Imagens (I & B)"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:726
 msgid "C_heck Frames (slow)"
-msgstr "C_omprobar Im?genes (lento)"
+msgstr "C_omprobar im?genes (lento)"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:730
 msgid "_Bitrate Histogram"
-msgstr "_Histograma de Tasa de bits"
+msgstr "_Histograma de tasa de bits"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:734
 msgid "_Scan for Black Frames..."
@@ -5482,46 +5628,45 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:751
 msgid "OCR (TS->srt)"
-msgstr ""
+msgstr "OCR (TS->srt)"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:755
+#, fuzzy
 msgid "_Edit Glyph"
-msgstr ""
+msgstr "Saltar Glifo"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:764
+#, fuzzy
 msgid "_Frame Hex Dump"
-msgstr ""
+msgstr "_Tasa de im?genes"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:768
 msgid "A_uto"
 msgstr "A_uto"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:775
-#, fuzzy
 msgid "_VCD"
 msgstr "_VCD"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:779
-#, fuzzy
 msgid "_SVCD"
 msgstr "_SVCD"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:783
-#, fuzzy
 msgid "_DVD"
 msgstr "_DVD"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:787
 msgid "_PSP"
-msgstr ""
+msgstr "_PSP"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:791
 msgid "PSP (_H.264)"
-msgstr ""
+msgstr "PSP (_H.264)"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:795
 msgid "F_LV"
-msgstr ""
+msgstr "F_LV"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:799
 msgid "_Go"
@@ -5532,12 +5677,10 @@
 msgstr "_Reproducir/Parar"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:817
-#, fuzzy
 msgid "P_revious Frame"
-msgstr "I_magen Previa"
+msgstr "I_magen previa"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:828
-#, fuzzy
 msgid "_Next Frame"
 msgstr "_Imagen siguiente"
 
@@ -5552,12 +5695,10 @@
 msgstr "Imagen-_Intra siguiente"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:861
-#, fuzzy
 msgid "Previou_s Black Frame"
 msgstr "Imagen en _Negro Anterior"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:865
-#, fuzzy
 msgid "Ne_xt Black Frame"
 msgstr "Imagen en Negro _Siguiente"
 
@@ -5570,26 +5711,24 @@
 msgstr "_?ltima Imagen"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:896
-#, fuzzy
 msgid "Go to Marker _A"
 msgstr "Ir a marcador _A"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:903
-#, fuzzy
 msgid "Go to Marker _B"
 msgstr "Ir a marcador _B"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:915
 msgid "Go to Fra_me..."
-msgstr ""
+msgstr "Ir a imagen..."
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:926
 msgid "Go to _Time..."
-msgstr ""
+msgstr "Saltar a _tiempo..."
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:937
 msgid "_Custom"
-msgstr ""
+msgstr "_Personalizar"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:941
 msgid "_Help"
@@ -5597,26 +5736,23 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:948
 msgid "_Built-in Support"
-msgstr ""
+msgstr "Soporte incorporado para"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:952
 msgid "_About"
 msgstr "A_cerca de..."
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:970
-#, fuzzy
 msgid "Open a file"
 msgstr "Abrir un archivo"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:980
-#, fuzzy
 msgid "Save the file"
 msgstr "Guardar el archivo"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:986
-#, fuzzy
 msgid "Audio/video file information"
-msgstr "Informaci?n de archivo de Sonido/Video"
+msgstr "Informaci?n de archivo de sonido/v?deo"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:997
 msgid "Bitrate/size calculator"
@@ -5624,7 +5760,6 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1076
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1116
-#, fuzzy
 msgid "Copy"
 msgstr "Copiar"
 
@@ -5634,7 +5769,6 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1086
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1142
-#, fuzzy
 msgid "Filters"
 msgstr "Filtros"
 
@@ -5647,7 +5781,6 @@
 msgstr "Configurar codificador de sonido"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1129
-#, fuzzy
 msgid "Audio filters"
 msgstr "Filtros de sonido"
 
@@ -5673,12 +5806,10 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1216
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1224
-#, fuzzy
 msgid " 0000000"
 msgstr " 0000000"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1232
-#, fuzzy
 msgid "A:"
 msgstr "A:"
 
@@ -5695,7 +5826,6 @@
 msgstr "Ir a marcador B"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1260
-#, fuzzy
 msgid "Play"
 msgstr "Reproducir"
 
@@ -5731,70 +5861,62 @@
 msgstr "Selecci?n: Final"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1367
-#, fuzzy
 msgid "Previous black frame"
-msgstr "Imagen en negro anterior"
+msgstr "Anterior imagen en negro"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1378
-#, fuzzy
 msgid "Next black frame"
-msgstr "Imagen en negro siguiente"
+msgstr "Siguiente imagen en negro"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1389
-#, fuzzy
 msgid "First frame"
 msgstr "Primera imagen"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1400
-#, fuzzy
 msgid "Last frame"
 msgstr "?ltima imagen"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1422
-#, fuzzy
 msgid "Frame: "
 msgstr "Imagen: "
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1429
-#, fuzzy
 msgid "Current frame"
 msgstr "Imagen actual"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1434
 msgid "/ 0000000"
-msgstr ""
+msgstr "/ 0000000"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1441
-#, fuzzy
 msgid "Time: "
 msgstr "Tiempo: "
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1448
-#, fuzzy
 msgid "Current time"
 msgstr "Tiempo actual"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1449
-#, fuzzy
 msgid "00:00:00.000"
-msgstr "00:00:00,000"
+msgstr "00:00:00.000"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1452
 msgid "/ 00:00:00,000"
-msgstr ""
+msgstr "/ 00:00:00,000"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1459
-#, fuzzy
 msgid "Frame: ?"
-msgstr "?Imagen?:"
+msgstr "Imagen: ?"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_ocr/adm_editglyph.cpp:53
+#, fuzzy
 msgid "Select GlyphFile to edit"
-msgstr ""
+msgstr "Seleccionar archivo para guardar"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_ocr/adm_editglyph.cpp:121
+#, fuzzy
 msgid "String"
-msgstr ""
+msgstr "Intensidad"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_ocr/adm_editglyph.cpp:123
 msgid "Search string"
@@ -5802,14 +5924,16 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_ocr/adm_editglyph.cpp:149
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_ocr/adm_editglyph.cpp:192
+#, fuzzy
 msgid "End reached"
-msgstr ""
+msgstr "desentrelazado"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_ocr/adm_editglyph.cpp:149
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_ocr/adm_editglyph.cpp:192
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_ocr/adm_editglyph.cpp:216
+#, fuzzy
 msgid "No more glyphs"
-msgstr ""
+msgstr "Ignorar Glifo"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_ocr/adm_editglyph.cpp:216
 msgid "Head reached"
@@ -5824,8 +5948,9 @@
 msgstr ""
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_ocr/adm_editglyph.cpp:418
+#, fuzzy
 msgid "Next Empty"
-msgstr ""
+msgstr "Siguiente imagen"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_ocr/adm_ocr.cpp:181
 msgid "Sure ?"
@@ -5855,9 +5980,9 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/TLK_filesel.cpp:363
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/TLK_filesel.cpp:377
+#, fuzzy
 msgid "It could be possible that you try to overwrite an input file!"
-msgstr ""
-"?Es posible que est(c)s intentando sobreescribir un archivo de entrada!"
+msgstr "?Es posible que est(c)s intentando sobreescribir un archivo de entrada!"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/TLK_filesel.cpp:388
 msgid "Cannot write the file"
@@ -5886,7 +6011,6 @@
 msgstr "etiqueta1"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/toolkit_dialog.cpp:706
-#, fuzzy
 msgid "Alert"
 msgstr "Alerta"
 
@@ -5945,23 +6069,27 @@
 
 #: avidemux/ADM_videoFilter/ADM_vidASS.cpp:87
 msgid "_Subtitle file (ASS/SSA):"
-msgstr ""
+msgstr "Archivo de subt?tulo (ASS/SSA):"
 
 #: avidemux/ADM_videoFilter/ADM_vidASS.cpp:88
+#, fuzzy
 msgid "_Line spacing:"
-msgstr ""
+msgstr "Espaciado de l?nea"
 
 #: avidemux/ADM_videoFilter/ADM_vidASS.cpp:89
+#, fuzzy
 msgid "_Font scale:"
-msgstr ""
+msgstr "Escala de fuente: "
 
 #: avidemux/ADM_videoFilter/ADM_vidASS.cpp:90
+#, fuzzy
 msgid "_Top margin:"
-msgstr ""
+msgstr "Margen superior"
 
 #: avidemux/ADM_videoFilter/ADM_vidASS.cpp:91
+#, fuzzy
 msgid "Botto_m margin"
-msgstr ""
+msgstr "Margen inferior"
 
 #: avidemux/ADM_videoFilter/ADM_vidBlendRemoval.cpp:82
 #: avidemux/ADM_videoFilter/ADM_vidDGbob.cpp:92
@@ -5973,10 +6101,9 @@
 msgstr "Umbral:"
 
 #: avidemux/ADM_videoFilter/ADM_vidBlendRemoval.cpp:83
-msgid ""
-"If value is smaller than threshold it is considered valid.Smaller value "
-"might mean more false positive."
-msgstr ""
+#, fuzzy
+msgid "If value is smaller than threshold it is considered valid.Smaller value might mean more false positive."
+msgstr "Si la imagen es mas cercana que el umbral, se considera v?lida, menos valor llevar?a a mas falsos positivos"
 
 #: avidemux/ADM_videoFilter/ADM_vidBlendRemoval.cpp:85
 #: avidemux/ADM_videoFilter/ADM_vidHardIvtcRemoval.cpp:90
@@ -5988,13 +6115,12 @@
 #: avidemux/ADM_videoFilter/ADM_vidHardIvtcRemoval.cpp:90
 #, fuzzy
 msgid "If pixels are closer than noise, they are considered to be the same"
-msgstr ""
-"Si los pixels son mas parecidos que el umbral de ruido, se consideran id(c)"
-"nticos"
+msgstr "Si los pixels son mas parecidos que el umbral de ruido, se consideran id(c)nticos"
 
 #: avidemux/ADM_videoFilter/ADM_vidBlendRemoval.cpp:86
+#, fuzzy
 msgid "I_dentical:"
-msgstr ""
+msgstr "_Inicial:"
 
 #: avidemux/ADM_videoFilter/ADM_vidBlendRemoval.cpp:86
 #: avidemux/ADM_videoFilter/ADM_vidHardIvtcRemoval.cpp:91
@@ -6024,12 +6150,12 @@
 
 #: avidemux/ADM_videoFilter/ADM_vidComputeAverage.cpp:195
 #: avidemux/ADM_videoFilter/ADM_vidParticle.cpp:160
+#, fuzzy
 msgid "_Output File:"
-msgstr ""
+msgstr "_Archivo de Salida"
 
 #: avidemux/ADM_videoFilter/ADM_vidComputeAverage.cpp:198
-msgid ""
-"_Bias (only for display; use 0 for average, 128 for frame minus average):"
+msgid "_Bias (only for display; use 0 for average, 128 for frame minus average):"
 msgstr ""
 
 #: avidemux/ADM_videoFilter/ADM_vidComputeAverage.cpp:202
@@ -6045,12 +6171,14 @@
 msgstr ""
 
 #: avidemux/ADM_videoFilter/ADM_vidComputeAverage.cpp:209
+#, fuzzy
 msgid "Display _Mode:"
-msgstr ""
+msgstr "_Salida a pantalla"
 
 #: avidemux/ADM_videoFilter/ADM_vidDecDec.cpp:190
+#, fuzzy
 msgid "Discard closer"
-msgstr ""
+msgstr "Descartar mas cercano"
 
 #: avidemux/ADM_videoFilter/ADM_vidDecDec.cpp:191
 #, fuzzy
@@ -6063,37 +6191,40 @@
 msgstr "Descargar los mas duplicados (animes)"
 
 #: avidemux/ADM_videoFilter/ADM_vidDecDec.cpp:193
+#, fuzzy
 msgid "Pulldown dupe removal"
-msgstr ""
+msgstr "Descartar duplicados"
 
 #: avidemux/ADM_videoFilter/ADM_vidDecDec.cpp:196
-#, fuzzy
 msgid "Fastest (no chroma, partial luma)"
-msgstr "El mds r?pido (sin croma, luma parcial)"
+msgstr "El m?s r?pido (sin croma, luma parcial)"
 
 #: avidemux/ADM_videoFilter/ADM_vidDecDec.cpp:197
 msgid "Fast (partial luma and chroma)"
-msgstr ""
+msgstr "R?pido (luma parcial y croma)"
 
 #: avidemux/ADM_videoFilter/ADM_vidDecDec.cpp:198
 msgid "Medium (full luma, no chroma)"
-msgstr ""
+msgstr "Medio (luma completa, no croma)"
 
 #: avidemux/ADM_videoFilter/ADM_vidDecDec.cpp:199
 msgid "Slow (full luma and chroma)"
 msgstr "Lento (luma completo y croma)"
 
 #: avidemux/ADM_videoFilter/ADM_vidDecDec.cpp:205
+#, fuzzy
 msgid "_Threshold 1:"
-msgstr ""
+msgstr "Umbral:"
 
 #: avidemux/ADM_videoFilter/ADM_vidDecDec.cpp:206
+#, fuzzy
 msgid "T_hreshold 2:"
-msgstr ""
+msgstr "Umbral:"
 
 #: avidemux/ADM_videoFilter/ADM_vidDecTelecide.cpp:83
+#, fuzzy
 msgid "No strategy"
-msgstr ""
+msgstr "Sin estrategia"
 
 #: avidemux/ADM_videoFilter/ADM_vidDecTelecide.cpp:84
 msgid "3:2 pulldown"
@@ -6101,7 +6232,7 @@
 
 #: avidemux/ADM_videoFilter/ADM_vidDecTelecide.cpp:85
 msgid "PAL/SECAM"
-msgstr ""
+msgstr "PAL/SECAM"
 
 #: avidemux/ADM_videoFilter/ADM_vidDecTelecide.cpp:91
 #: avidemux/ADM_videoFilter/ADM_vidDGbob.cpp:82
@@ -6147,47 +6278,55 @@
 
 #: avidemux/ADM_videoFilter/ADM_vidDecTelecide.cpp:110
 msgid "_Strategy:"
-msgstr ""
+msgstr "Estrategia:"
 
 #: avidemux/ADM_videoFilter/ADM_vidDecTelecide.cpp:112
 msgid "_Postprocessing:"
-msgstr ""
+msgstr "_Post-procesando:"
 
 #: avidemux/ADM_videoFilter/ADM_vidDecTelecide.cpp:113
+#, fuzzy
 msgid "_Try backward:"
-msgstr ""
+msgstr "Probar campo anterior"
 
 #: avidemux/ADM_videoFilter/ADM_vidDecTelecide.cpp:115
+#, fuzzy
 msgid "_Direct threshold:"
-msgstr ""
+msgstr "Umbral directo"
 
 #: avidemux/ADM_videoFilter/ADM_vidDecTelecide.cpp:116
+#, fuzzy
 msgid "_Backward threshold:"
-msgstr ""
+msgstr "Umbral anterior"
 
 #: avidemux/ADM_videoFilter/ADM_vidDecTelecide.cpp:117
+#, fuzzy
 msgid "_Noise threshold:"
-msgstr ""
+msgstr "Umbral de ruido: "
 
 #: avidemux/ADM_videoFilter/ADM_vidDecTelecide.cpp:118
+#, fuzzy
 msgid "Postp_rocessing threshold:"
-msgstr ""
+msgstr "Umbral de procesado post."
 
 #: avidemux/ADM_videoFilter/ADM_vidDecTelecide.cpp:120
+#, fuzzy
 msgid "_Use chroma to decide"
-msgstr ""
+msgstr "Usar croma para decisi?n"
 
 #: avidemux/ADM_videoFilter/ADM_vidDecTelecide.cpp:121
+#, fuzzy
 msgid "Sho_w info"
-msgstr ""
+msgstr "Mostrar"
 
 #: avidemux/ADM_videoFilter/ADM_vidDecTelecide.cpp:122
 msgid "Debu_g"
 msgstr ""
 
 #: avidemux/ADM_videoFilter/ADM_vidDecTelecide.cpp:123
+#, fuzzy
 msgid "Bl_end"
-msgstr ""
+msgstr "Mezclar"
 
 #: avidemux/ADM_videoFilter/ADM_vidDenoise.cpp:386
 #, fuzzy
@@ -6292,12 +6431,8 @@
 
 #: avidemux/ADM_videoFilter/ADM_vidHardIvtcRemoval.cpp:88
 #, fuzzy
-msgid ""
-"If value is smaller than threshold it is considered valid. Smaller value "
-"might mean more false positive"
-msgstr ""
-"Si la imagen es mas cercana que el umbral, se considera v?lida, menos valor "
-"llevar?a a mas falsos positivos"
+msgid "If value is smaller than threshold it is considered valid. Smaller value might mean more false positive"
+msgstr "Si la imagen es mas cercana que el umbral, se considera v?lida, menos valor llevar?a a mas falsos positivos"
 
 #: avidemux/ADM_videoFilter/ADM_vidHardIvtcRemoval.cpp:91
 #, fuzzy
@@ -6330,9 +6465,8 @@
 msgstr "Mapear"
 
 #: avidemux/ADM_videoFilter/ADM_vidKernelDeint.cpp:96
-#, fuzzy
 msgid "Show interlaced areas (for test!)"
-msgstr "Mostrar las ?reas intrelazadas (Solo comprobar)"
+msgstr "Mostrar las ?reas entrelazadas (?s?lo para testear!)"
 
 #: avidemux/ADM_videoFilter/ADM_vidLogo.cpp:88
 msgid "_Logo (jpg file):"
@@ -6351,24 +6485,20 @@
 msgstr ""
 
 #: avidemux/ADM_videoFilter/ADM_vidMcDeint.cpp:104
-#, fuzzy
 msgid "Fast"
-msgstr "'- R?pido"
+msgstr "R?pido"
 
 #: avidemux/ADM_videoFilter/ADM_vidMcDeint.cpp:105
-#, fuzzy
 msgid "Medium"
-msgstr "_Medio:"
+msgstr "Medio"
 
 #: avidemux/ADM_videoFilter/ADM_vidMcDeint.cpp:106
-#, fuzzy
 msgid "Slow iterative motion search"
-msgstr "2- Lento, estimaci?n de movimiento iterativa"
+msgstr "Lento, estimaci?n de movimiento iterativa"
 
 #: avidemux/ADM_videoFilter/ADM_vidMcDeint.cpp:107
-#, fuzzy
 msgid "Extra slow (same as 3+multiple reference frames)"
-msgstr "3- Extra lento, igual que el [2] + im?genes con referencia m?ltiple"
+msgstr "Extra lento (igual que el 3+im?genes con referencia m?ltiple)"
 
 #: avidemux/ADM_videoFilter/ADM_vidMcDeint.cpp:114
 #, fuzzy
@@ -6396,9 +6526,8 @@
 msgstr "Factor de reducci?n: "
 
 #: avidemux/ADM_videoFilter/ADM_vidMosaic.cpp:93
-#, fuzzy
 msgid "Show _frame"
-msgstr "Mostrar imagen #: "
+msgstr "Mostrar imagen"
 
 #: avidemux/ADM_videoFilter/ADM_vidMPLD3D.cpp:74
 #: avidemux/ADM_videoFilter/ADM_vidMPLD3Dlow.cpp:74
@@ -6429,8 +6558,9 @@
 msgstr "Alta Calidad"
 
 #: avidemux/ADM_videoFilter/ADM_vidPalShift.cpp:76
+#, fuzzy
 msgid "_Try reverse"
-msgstr ""
+msgstr "?Intentar revertir?"
 
 #: avidemux/ADM_videoFilter/ADM_vidParticle.cpp:129
 msgid "Mi_nimum area for a particle to be detected:"
@@ -6465,8 +6595,9 @@
 msgstr ""
 
 #: avidemux/ADM_videoFilter/ADM_vidParticle.cpp:155
+#, fuzzy
 msgid "_Output Format:"
-msgstr ""
+msgstr "Salida Srt"
 
 #: avidemux/ADM_videoFilter/ADM_vidParticle.cpp:163
 msgid "_Camera number:"
@@ -6494,7 +6625,7 @@
 
 #: avidemux/ADM_videoFilter/ADM_vidRotate.cpp:265
 msgid "90?"
-msgstr ""
+msgstr "90?"
 
 #: avidemux/ADM_videoFilter/ADM_vidRotate.cpp:266
 msgid "180 degrees"
@@ -6502,7 +6633,7 @@
 
 #: avidemux/ADM_videoFilter/ADM_vidRotate.cpp:266
 msgid "180?"
-msgstr ""
+msgstr "180?"
 
 #: avidemux/ADM_videoFilter/ADM_vidRotate.cpp:267
 msgid "270 degrees"
@@ -6510,15 +6641,17 @@
 
 #: avidemux/ADM_videoFilter/ADM_vidRotate.cpp:267
 msgid "270?"
-msgstr ""
+msgstr "270?"
 
 #: avidemux/ADM_videoFilter/ADM_vidRotate.cpp:269
+#, fuzzy
 msgid "_Angle:"
-msgstr ""
+msgstr "Anime"
 
 #: avidemux/ADM_videoFilter/ADM_vidRotate.cpp:271
+#, fuzzy
 msgid "Rotate"
-msgstr ""
+msgstr "Girar"
 
 #: avidemux/ADM_videoFilter/ADM_vidSoften.cpp:68
 #, fuzzy
@@ -6550,43 +6683,43 @@
 
 #: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:260
 msgid "P' = A"
-msgstr ""
+msgstr "P' = A"
 
 #: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:261
 msgid "P' = P"
-msgstr ""
+msgstr "P' = P"
 
 #: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:262
 msgid "P' = P - A"
-msgstr ""
+msgstr "P' = P - A"
 
 #: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:263
 msgid "P' = A - P"
-msgstr ""
+msgstr "P' = A - P"
 
 #: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:264
 msgid "P' = P + A"
-msgstr ""
+msgstr "P' = P + A"
 
 #: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:265
 msgid "P' = P * A"
-msgstr ""
+msgstr "P' = P * A"
 
 #: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:266
 msgid "P' = P / A"
-msgstr ""
+msgstr "P' = P / A"
 
 #: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:267
 msgid "P' = A / P"
-msgstr ""
+msgstr "P' = A / P"
 
 #: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:268
 msgid "P' = min (P, A)"
-msgstr ""
+msgstr "P' = min (P, A)"
 
 #: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:269
 msgid "P' = max (P, A)"
-msgstr ""
+msgstr "P' = max (P, A)"
 
 #: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:274
 msgid "A = convolve(P); Load convolution kernel from file"
@@ -6633,8 +6766,9 @@
 msgstr ""
 
 #: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:310
+#, fuzzy
 msgid "Input _Constant:"
-msgstr ""
+msgstr "_Contraste:"
 
 #: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:314
 msgid ""
@@ -6651,9 +6785,7 @@
 msgstr ""
 
 #: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:327
-msgid ""
-"Init By _Rolling (compute head start using a rolling average rather than a "
-"straight average)"
+msgid "Init By _Rolling (compute head start using a rolling average rather than a straight average)"
 msgstr ""
 
 #: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:332
@@ -6665,8 +6797,9 @@
 msgstr ""
 
 #: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:338
+#, fuzzy
 msgid "Ma_ximum value (will be scaled to 255):"
-msgstr ""
+msgstr "Bitrate m?ximo (kbps)"
 
 #: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:341
 msgid "_Histogram every N frames (0 to disable):"
@@ -6677,8 +6810,9 @@
 msgstr ""
 
 #: avidemux/ADM_videoFilter/ADM_vidThreshold.cpp:135
+#, fuzzy
 msgid "Ma_ximum value to be in-range:"
-msgstr ""
+msgstr "Bitrate m?ximo (kbps)"
 
 #: avidemux/ADM_videoFilter/ADM_vidThreshold.cpp:138
 msgid "In-range values go white, out-of-range go black"
@@ -6689,16 +6823,19 @@
 msgstr ""
 
 #: avidemux/ADM_videoFilter/ADM_vidThreshold.cpp:144
+#, fuzzy
 msgid "Output values:"
-msgstr ""
+msgstr "_Archivo de Salida"
 
 #: avidemux/ADM_videoFilter/ADM_vidVlad.cpp:101
+#, fuzzy
 msgid "_Luma temporal threshold:"
-msgstr ""
+msgstr "Umbral temporal"
 
 #: avidemux/ADM_videoFilter/ADM_vidVlad.cpp:102
+#, fuzzy
 msgid "Ch_roma temporal threshold:"
-msgstr ""
+msgstr "Umbral Croma"
 
 #: avidemux/ADM_videoFilter/ADM_vidYadif.cpp:171
 msgid "Temporal & spatial check"
@@ -6717,14 +6854,16 @@
 msgstr ""
 
 #: avidemux/ADM_videoFilter/ADM_vidYadif.cpp:182
+#, fuzzy
 msgid "_Order:"
-msgstr ""
+msgstr "Orden de Campos"
 
 #: avidemux/gtk_gui.cpp:251
 msgid "Select ECMAScript to Run"
-msgstr ""
+msgstr "Seleccione ECMAScript a ejecutar"
 
-#: avidemux/gtk_gui.cpp:298 avidemux/gtk_gui.cpp:337
+#: avidemux/gtk_gui.cpp:298
+#: avidemux/gtk_gui.cpp:337
 msgid "Obsolete"
 msgstr "Obsoleto"
 
@@ -6732,74 +6871,81 @@
 msgid "Not coded in this version"
 msgstr "Sin codificar en esta versi?n"
 
-#: avidemux/gtk_gui.cpp:380 avidemux/gtk_gui.cpp:385 avidemux/gtk_gui.cpp:507
+#: avidemux/gtk_gui.cpp:380
+#: avidemux/gtk_gui.cpp:385
+#: avidemux/gtk_gui.cpp:507
 #: avidemux/gtk_gui.cpp:510
 msgid "Select AVI File..."
-msgstr ""
+msgstr "Seleccionar archivo AVI..."
 
 #: avidemux/gtk_gui.cpp:441
 msgid ""
 "This is to be used to undo packed VOP on MPEG-4.\n"
 "Continue ?"
 msgstr ""
+"Esto se utiliza para deshacer el empaquetado vop en mpeg4.\n"
+"?Continuar?"
 
 #: avidemux/gtk_gui.cpp:443
 msgid "Select AVI File to Write"
-msgstr ""
+msgstr "Seleccione archivo AVI para escribir"
 
 #: avidemux/gtk_gui.cpp:449
 msgid "Select OGM File to Write"
-msgstr ""
+msgstr "Seleccione archivo OGM para escribir"
 
-#: avidemux/gtk_gui.cpp:453 avidemux/gtk_gui.cpp:465
+#: avidemux/gtk_gui.cpp:453
+#: avidemux/gtk_gui.cpp:465
 msgid "Select Workbench to Save"
-msgstr ""
+msgstr "Seleccione zona de trabajo para guardar"
 
 #: avidemux/gtk_gui.cpp:497
 msgid "Select Raw File to Save"
-msgstr ""
+msgstr "Seleccionar archivo raw para guardar"
 
 #: avidemux/gtk_gui.cpp:513
 msgid "Select AVI File to Append..."
-msgstr ""
+msgstr "Seleccionar archivo AVI para adjuntar..."
 
 #: avidemux/gtk_gui.cpp:517
 msgid "Select File to Save Audio"
-msgstr ""
+msgstr "Seleccionar archivo para guardar audio"
 
 #: avidemux/gtk_gui.cpp:551
 msgid "Select JPEG Sequence to Save"
-msgstr ""
+msgstr "Seleccionar secuencia JPEG para guardar"
 
 #: avidemux/gtk_gui.cpp:554
 msgid "Select BMP to Save"
-msgstr ""
+msgstr "Seleccionar BMP para guardar"
 
 #: avidemux/gtk_gui.cpp:558
 msgid "Select JPEG to Save"
-msgstr ""
+msgstr "Seleccionar JPEG para guardar"
 
-#: avidemux/gtk_gui.cpp:611 avidemux/gtk_gui.cpp:715
+#: avidemux/gtk_gui.cpp:611
+#: avidemux/gtk_gui.cpp:715
 msgid "Select File to Save"
-msgstr ""
+msgstr "Seleccionar archivo para guardar"
 
 #: avidemux/gtk_gui.cpp:655
 msgid "Select MP3 to Load"
-msgstr ""
+msgstr "Seleccionar MP3 para cargar"
 
 #: avidemux/gtk_gui.cpp:658
 msgid "Select AC3 to Load"
-msgstr ""
+msgstr "Seleccionar AC3 para cargar"
 
 #: avidemux/gtk_gui.cpp:661
 msgid "Select WAV to Load"
-msgstr ""
+msgstr "Seleccionar WAV para cargar"
 
 #: avidemux/gtk_gui.cpp:709
 msgid "Out of bounds"
 msgstr "Fuera de l?mites"
 
-#: avidemux/gtk_gui.cpp:720 avidemux/gtk_gui.cpp:1908
+#: avidemux/gtk_gui.cpp:720
+#: avidemux/gtk_gui.cpp:1908
 msgid "Marker A > B"
 msgstr "Marcador A > B"
 
@@ -6813,7 +6959,7 @@
 
 #: avidemux/gtk_gui.cpp:746
 msgid "Are you sure?"
-msgstr ""
+msgstr "?Est? seguro?"
 
 #: avidemux/gtk_gui.cpp:801
 msgid "Frame Rate"
@@ -6829,12 +6975,11 @@
 
 #: avidemux/gtk_gui.cpp:825
 msgid "This will make trouble for AVI files."
-msgstr ""
+msgstr "Esto dar? problemas con archivos .avi"
 
 #: avidemux/gtk_gui.cpp:835
-#, fuzzy
 msgid "Rebuild all Keyframes?"
-msgstr "?Reconstruir imagens I/P?"
+msgstr "?Reconstruir im?genes llave?"
 
 #: avidemux/gtk_gui.cpp:893
 msgid "Permission error"
@@ -6878,11 +7023,11 @@
 msgstr "Guardar (A+V) producir? un AVI erroneo. Guardar sonido funcionar?."
 
 #: avidemux/gtk_gui.cpp:1099
-#, fuzzy
 msgid "Something failed when appending"
 msgstr "Ha sucedido algo inesperado"
 
-#: avidemux/gtk_gui.cpp:1108 avidemux/gtk_gui.cpp:1927
+#: avidemux/gtk_gui.cpp:1108
+#: avidemux/gtk_gui.cpp:1927
 msgid "Something bad happened (II)"
 msgstr "Error no previsto (II)"
 
@@ -6891,26 +7036,21 @@
 msgstr "No se puede guardar el sonido en modo Copia"
 
 #: avidemux/gtk_gui.cpp:1172
-msgid ""
-"Select WAV PCM as the audio codec, otherwise the audio file would be raw PCM."
-msgstr ""
-"Elija WAV PCM como el codec de sonido, de otra manera el archivo de sonido "
-"ser? RAW PCM."
+msgid "Select WAV PCM as the audio codec, otherwise the audio file would be raw PCM."
+msgstr "Elija WAV PCM como el codec de sonido, de otra manera el archivo de sonido ser? RAW PCM."
 
-#: avidemux/gtk_gui.cpp:1180 avidemux/gtk_gui.cpp:1537
-#, fuzzy
+#: avidemux/gtk_gui.cpp:1180
+#: avidemux/gtk_gui.cpp:1537
 msgid "Saving audio"
 msgstr "Guardando sonido"
 
 #: avidemux/gtk_gui.cpp:1257
-#, fuzzy
 msgid "Get Frame"
 msgstr "_Imagen siguiente"
 
 #: avidemux/gtk_gui.cpp:1257
-#, fuzzy
 msgid "Cannot get this frame to save"
-msgstr "No se puede codificar la imagen"
+msgstr "No se puede codificar la imagen para guardarla"
 
 #: avidemux/gtk_gui.cpp:1294
 msgid "Mark A > B"
@@ -6921,9 +7061,8 @@
 msgstr "Establezca las marcas correctamente."
 
 #: avidemux/gtk_gui.cpp:1303
-#, fuzzy
 msgid "Saving as set of jpegs"
-msgstr "Guardar como conjunto de im?genes jpeg"
+msgstr "Guardar como conjunto de im?genes jpegs"
 
 #: avidemux/gtk_gui.cpp:1309
 msgid "Cannot decode frame"
@@ -6933,26 +7072,24 @@
 msgid "Aborting."
 msgstr "Cancelando."
 
-#: avidemux/gtk_gui.cpp:1320 avidemux/gtk_gui.cpp:1339
+#: avidemux/gtk_gui.cpp:1320
+#: avidemux/gtk_gui.cpp:1339
 #: avidemux/gtk_gui.cpp:2271
-#, fuzzy
 msgid "Done"
 msgstr "Hecho"
 
 #: avidemux/gtk_gui.cpp:1320
-#, fuzzy, c-format
+#, c-format
 msgid "Saved %d images."
 msgstr "%d im?genes guardadas."
 
 #: avidemux/gtk_gui.cpp:1322
-#, fuzzy
 msgid "Error"
-msgstr " Error X:"
+msgstr "Error"
 
 #: avidemux/gtk_gui.cpp:1322
-#, fuzzy
 msgid "Could not save all images."
-msgstr "No se pudo encontrar un filtro"
+msgstr "No se pudo guardar todas las im?genes."
 
 #: avidemux/gtk_gui.cpp:1339
 #, c-format
@@ -6969,11 +7106,13 @@
 msgid "Saving %s as a BMP file failed."
 msgstr ""
 
-#: avidemux/gtk_gui.cpp:1361 avidemux/gtk_gui.cpp:1427
+#: avidemux/gtk_gui.cpp:1361
+#: avidemux/gtk_gui.cpp:1427
 msgid "Failed to open the file"
 msgstr "Error al abrir archivo"
 
-#: avidemux/gtk_gui.cpp:1361 avidemux/gtk_gui.cpp:1427
+#: avidemux/gtk_gui.cpp:1361
+#: avidemux/gtk_gui.cpp:1427
 msgid "Not a WAV file?"
 msgstr "?No es un archivo WAV?"
 
@@ -6998,14 +7137,12 @@
 msgstr "Por favor compruebe marcadores. ?Es \"A>\" == \">B\"?"
 
 #: avidemux/gtk_gui.cpp:1697
-#, fuzzy
 msgid "Saving raw video stream"
-msgstr "Guardando video en formato RAW"
+msgstr "Guardando v?deo en formato RAW"
 
 #: avidemux/gtk_gui.cpp:1843
-#, fuzzy
 msgid "Checking video"
-msgstr "Comprobando video"
+msgstr "Comprobando v?deo"
 
 #: avidemux/gtk_gui.cpp:1859
 msgid "No error found"
@@ -7037,74 +7174,83 @@
 msgstr "No se pudo recoger info. de pistas"
 
 #: avidemux/gtk_gui.cpp:1997
-#, fuzzy
 msgid "Take audio from video file"
-msgstr "Coger PAR del video de entrada"
+msgstr "Extraer audio de un archivo de v?deo."
 
-#: avidemux/gtk_gui.cpp:1998 avidemux/gtk_gui.cpp:2097
-#, fuzzy
+#: avidemux/gtk_gui.cpp:1998
+#: avidemux/gtk_gui.cpp:2097
 msgid "No audio"
-msgstr "Sin pista de sonido"
+msgstr "Sin sonido"
 
-#: avidemux/gtk_gui.cpp:1999 avidemux/gtk_gui.cpp:2098
+#: avidemux/gtk_gui.cpp:1999
+#: avidemux/gtk_gui.cpp:2098
 msgid "External AC3"
 msgstr "AC3 externo"
 
-#: avidemux/gtk_gui.cpp:1999 avidemux/gtk_gui.cpp:2098
+#: avidemux/gtk_gui.cpp:1999
+#: avidemux/gtk_gui.cpp:2098
 msgid "Take audio from external AC3 file"
-msgstr ""
+msgstr "Tomar audio de un archivo AC3 externo"
 
-#: avidemux/gtk_gui.cpp:2000 avidemux/gtk_gui.cpp:2099
-#, fuzzy
+#: avidemux/gtk_gui.cpp:2000
+#: avidemux/gtk_gui.cpp:2099
 msgid "External MP3"
-msgstr "AC3 externo"
+msgstr "MP3 externo"
 
-#: avidemux/gtk_gui.cpp:2000 avidemux/gtk_gui.cpp:2099
+#: avidemux/gtk_gui.cpp:2000
+#: avidemux/gtk_gui.cpp:2099
 msgid "Take audio from external MP3 file"
-msgstr ""
+msgstr "Tomar audio de un archivo MP3 externo"
 
-#: avidemux/gtk_gui.cpp:2001 avidemux/gtk_gui.cpp:2100
+#: avidemux/gtk_gui.cpp:2001
+#: avidemux/gtk_gui.cpp:2100
 msgid "External WAV"
-msgstr ""
+msgstr " WAV externo"
 
-#: avidemux/gtk_gui.cpp:2001 avidemux/gtk_gui.cpp:2100
+#: avidemux/gtk_gui.cpp:2001
+#: avidemux/gtk_gui.cpp:2100
 msgid "Take audio from external WAV file"
-msgstr ""
+msgstr "Tomar audio de un archivo WAV externo"
 
-#: avidemux/gtk_gui.cpp:2005 avidemux/gtk_gui.cpp:2105
+#: avidemux/gtk_gui.cpp:2005
+#: avidemux/gtk_gui.cpp:2105
 msgid "_Audio source:"
-msgstr ""
+msgstr "_Fuente de audio"
 
-#: avidemux/gtk_gui.cpp:2009 avidemux/gtk_gui.cpp:2106
+#: avidemux/gtk_gui.cpp:2009
+#: avidemux/gtk_gui.cpp:2106
 msgid "_External file:"
-msgstr ""
+msgstr "_Archivo externo:"
 
 #: avidemux/gtk_gui.cpp:2024
+#, fuzzy
 msgid "_Track from video:"
-msgstr ""
+msgstr "Coger PAR del video de entrada"
 
 #: avidemux/gtk_gui.cpp:2034
 msgid "Main Audio Track"
-msgstr ""
+msgstr "Pistas de sonido principal"
 
-#: avidemux/gtk_gui.cpp:2040 avidemux/gtk_gui.cpp:2118
-#, fuzzy
+#: avidemux/gtk_gui.cpp:2040
+#: avidemux/gtk_gui.cpp:2118
 msgid "Cannot load"
-msgstr "No se puede copiar."
+msgstr "No se puede cargar."
 
-#: avidemux/gtk_gui.cpp:2040 avidemux/gtk_gui.cpp:2118
+#: avidemux/gtk_gui.cpp:2040
+#: avidemux/gtk_gui.cpp:2118
 msgid "The selected audio file does not exist."
-msgstr ""
+msgstr "El archivo de audio seleccionado no existe."
 
 #: avidemux/gtk_gui.cpp:2115
 msgid "Second Audio Track"
-msgstr ""
+msgstr "Segunda pista de audio"
 
 #: avidemux/gtk_gui.cpp:2147
 msgid "Error loading the MP3 file"
 msgstr "Error cargando el archivo MP3"
 
-#: avidemux/gtk_gui.cpp:2156 avidemux/gtk_gui.cpp:2178
+#: avidemux/gtk_gui.cpp:2156
+#: avidemux/gtk_gui.cpp:2178
 #: avidemux/gtk_gui.cpp:2200
 msgid "Second track loaded"
 msgstr "Cargada segunda pista"
@@ -7123,9 +7269,7 @@
 
 #: avidemux/gtk_gui.cpp:2259
 msgid "Saving the job failed. Maybe you have permission issue with ~/.avidemux"
-msgstr ""
-"Fall? el guardado de tarea. Puede que tenga problemas de permisos en ~/."
-"avidemux"
+msgstr "Fall? el guardado de tarea. Puede que tenga problemas de permisos en ~/.avidemux"
 
 #: avidemux/gtk_gui.cpp:2271
 #, c-format
@@ -7139,25 +7283,27 @@
 
 #: avidemux/gtk_gui.cpp:2438
 msgid "AvsProxy"
-msgstr ""
+msgstr "AvsProxy"
 
 #: avidemux/gtk_gui.cpp:2438
 msgid ""
 "Failed to connect to avsproxy.\n"
 "Is it running ?"
 msgstr ""
+"Error al conectarse al avsproxy.\n"
+"?Est? funcionando?"
 
 #: avidemux/gtk_gui.cpp:2443
 msgid "avsproxy"
-msgstr ""
+msgstr "avsproxy"
 
 #: avidemux/gtk_gui.cpp:2471
 msgid "Frame type:"
-msgstr ""
+msgstr "Tipo de imagen:"
 
 #: avidemux/gtk_gui.cpp:2472
 msgid "Frame size:"
-msgstr ""
+msgstr "Tama?o de la im?gen:"
 
 #: avidemux/gtk_gui.cpp:2474
 msgid "Frame Hex Dump"
@@ -7180,10 +7326,12 @@
 "You don't have LAME!.\n"
 "It is needed to create FLV  video."
 msgstr ""
+"No hay soporte para LAME.\n"
+"Es necesario para crear v?deos FLV."
 
 #: avidemux/gui_autodrive.cpp:93
 msgid "Cannot select FLV1  codec."
-msgstr ""
+msgstr "No se puede seleccionar el codec FLV1."
 
 #: avidemux/gui_autodrive.cpp:120
 msgid "Cannot select mpeg4 sp codec."
@@ -7199,14 +7347,16 @@
 
 #: avidemux/GUI_jobs.cpp:37
 msgid "Something very wrong happened when building joblist."
-msgstr ""
+msgstr "Error totalmente inesperado al construir la lista de tareas."
 
 #: avidemux/GUI_jobs.cpp:42
 msgid "There are no jobs stored"
-msgstr ""
+msgstr "No hay tareas guardadas."
 
-#: avidemux/gui_navigate.cpp:76 avidemux/gui_navigate.cpp:114
-#: avidemux/gui_navigate.cpp:390 avidemux/gui_navigate.cpp:426
+#: avidemux/gui_navigate.cpp:76
+#: avidemux/gui_navigate.cpp:114
+#: avidemux/gui_navigate.cpp:390
+#: avidemux/gui_navigate.cpp:426
 msgid "Decompressing error"
 msgstr "Error de descompresi?n"
 
@@ -7214,18 +7364,18 @@
 msgid "Cannot decode next frame."
 msgstr "No se puede decodificar la imagen siguiente."
 
-#: avidemux/gui_navigate.cpp:114 avidemux/gui_navigate.cpp:426
+#: avidemux/gui_navigate.cpp:114
+#: avidemux/gui_navigate.cpp:426
 msgid "Cannot decode keyframe."
 msgstr "No se puede decodificar el imagen clave"
 
 #: avidemux/gui_navigate.cpp:237
-#, fuzzy
 msgid "Seeking"
-msgstr "Guardando"
+msgstr "Buscando"
 
 #: avidemux/gui_navigate.cpp:315
 msgid "Finding black frames"
-msgstr ""
+msgstr "Buscando fotogramas en negro"
 
 #: avidemux/gui_navigate.cpp:390
 msgid "Cannot decode the frame."
@@ -7239,7 +7389,8 @@
 msgid "Select Copy as the video codec."
 msgstr "Seleccione copia como codec de v?deo."
 
-#: avidemux/gui_savenew.cpp:207 avidemux/gui_savenew.cpp:223
+#: avidemux/gui_savenew.cpp:207
+#: avidemux/gui_savenew.cpp:223
 #: avidemux/gui_savenew.cpp:236
 msgid "Incompatible output format"
 msgstr "Formato de salida incompatible"
@@ -7256,11 +7407,13 @@
 msgid "Select dual audio AVI to write"
 msgstr "Seleccione AVI de sonido dual para escribir"
 
-#: avidemux/gui_savenew.cpp:280 avidemux/gui_savenew.cpp:298
+#: avidemux/gui_savenew.cpp:280
+#: avidemux/gui_savenew.cpp:298
 msgid "This cannot have packed VOP"
 msgstr "Este formato no puede tener VOP empaquetado"
 
-#: avidemux/gui_savenew.cpp:280 avidemux/gui_savenew.cpp:298
+#: avidemux/gui_savenew.cpp:280
+#: avidemux/gui_savenew.cpp:298
 msgid "It is not MPEG-4 video. File will not be saved."
 msgstr "No es un v?deo MPEG-4. El archivo no se puede guardar."
 
@@ -7271,2955 +7424,3 @@
 msgstr ""
 "Puede necesitar copia inteligente.\n"
 "?Activar?"
-
-#, fuzzy
-#~ msgid "Channel Mode"
-#~ msgstr "<b>Modo de canal:</b>"
-
-#~ msgid "Mode"
-#~ msgstr "Modo"
-
-#~ msgid "Quality"
-#~ msgstr "Calidad"
-
-#, fuzzy
-#~ msgid "Quality Based"
-#~ msgstr "Calidad "
-
-#~ msgid "AVI, unp. VOP"
-#~ msgstr "AVI, BOP desemp."
-
-#, fuzzy
-#~ msgid "MPEG Video"
-#~ msgstr "Video MPEG"
-
-#~ msgid "Expect troubles"
-#~ msgstr "Espere problemas"
-
-#, fuzzy
-#~ msgid "Select Glyphfile to save to"
-#~ msgstr "Seleccionar archivo para guardar"
-
-#, fuzzy
-#~ msgid "Erase current glyphs ?"
-#~ msgstr "Glifo Actual"
-
-#, fuzzy
-#~ msgid "Muxing Type"
-#~ msgstr "Tipo de codificaci?n"
-
-#, fuzzy
-#~ msgid "Mux Every x video frames"
-#~ msgstr " im?genes\n"
-
-#, fuzzy
-#~ msgid "Avi Muxer Option"
-#~ msgstr "Opciones de Avi _Muxer"
-
-#, fuzzy
-#~ msgid "Option "
-#~ msgstr "Salida"
-
-#~ msgid "Tmpgenc"
-#~ msgstr "Tmpgec"
-
-#, fuzzy
-#~ msgid "Int. TFF"
-#~ msgstr "TFF entrelazado"
-
-#, fuzzy
-#~ msgid "Int. BFF"
-#~ msgstr "BFF entrelazado"
-
-#, fuzzy
-#~ msgid "Max Bitrate"
-#~ msgstr "Bitrate m?x:"
-
-#, fuzzy
-#~ msgid "Min Bitrate"
-#~ msgstr "Bitrate m?x:"
-
-#, fuzzy
-#~ msgid "Use Xvid Rate Control"
-#~ msgstr "Utilizar el control de bits de Xvid"
-
-#, fuzzy
-#~ msgid "Buffer Size"
-#~ msgstr "Tama?o buffer VBV"
-
-#, fuzzy
-#~ msgid "Aspect Ratio"
-#~ msgstr "Relaci?n de Aspecto"
-
-#, fuzzy
-#~ msgid "Gop Size"
-#~ msgstr "Tama?o de Gop:"
-
-#, fuzzy
-#~ msgid "Seconds"
-#~ msgstr "Segunda pasada"
-
-#, fuzzy
-#~ msgid "H263"
-#~ msgstr "_H.263"
-
-#, fuzzy
-#~ msgid "MB Comparison"
-#~ msgstr "0: comparaci?n de MB"
-
-#, fuzzy
-#~ msgid "Min Qz"
-#~ msgstr "Qp m?n."
-
-#, fuzzy
-#~ msgid "Max Qz"
-#~ msgstr "Qp m?x."
-
-#, fuzzy
-#~ msgid "Max QDiff"
-#~ msgstr "Qp m?x."
-
-#, fuzzy
-#~ msgid "4MV"
-#~ msgstr "_4MV"
-
-#, fuzzy
-#~ msgid "Quarter Pel"
-#~ msgstr "Quarter Pixel"
-
-#, fuzzy
-#~ msgid "GMC"
-#~ msgstr "_GMC"
-
-#, fuzzy
-#~ msgid "Number of BFrames"
-#~ msgstr "N?mero de Imagens-B"
-
-#, fuzzy
-#~ msgid "Quantization type"
-#~ msgstr "Tipo de cuantizaci?n"
-
-#, fuzzy
-#~ msgid "Macroblock decision"
-#~ msgstr "Elecci?n de MacroBloque:"
-
-#, fuzzy
-#~ msgid "Filesize tolerance (kb"
-#~ msgstr "Tolerancia de tama?o (kb):"
-
-#, fuzzy
-#~ msgid "Quantize compression"
-#~ msgstr "Cuantizador de compresi?n:"
-
-#, fuzzy
-#~ msgid "Quantize blur"
-#~ msgstr "Cuantizador de mezcla:"
-
-#, fuzzy
-#~ msgid "Lavcodec Mpeg4 configuration"
-#~ msgstr "Opciones del Decodificador Libavcodec"
-
-#, fuzzy
-#~ msgid "Swap U&V"
-#~ msgstr "Swap UV"
-
-#, fuzzy
-#~ msgid "Use systray while encoding"
-#~ msgstr "Ir a la _barra de tareas al codificar"
-
-#, fuzzy
-#~ msgid "Accept non standard audio frequency for DVD"
-#~ msgstr "Permitir frecuencia de sonido no est?ndar para DVD"
-
-#, fuzzy
-#~ msgid "Use lavcodec mpeg2 decoder"
-#~ msgstr "_Utilizar decodificador MPEG libavcodec"
-
-#, fuzzy
-#~ msgid "Automatically index mpeg files"
-#~ msgstr "Indizar _autom?ticamente archivos MPEG"
-
-#, fuzzy
-#~ msgid "Disable NUV audio sync"
-#~ msgstr "_Desactivar resincronizaci?n NuppelVideo"
-
-#, fuzzy
-#~ msgid "Load external filters"
-#~ msgstr "Cargar config. de filtros"
-
-#, fuzzy
-#~ msgid "Automatically build VBR map"
-#~ msgstr "Indizar _autom?ticamente archivos MPEG"
-
-#, fuzzy
-#~ msgid "Automatically rebuild index"
-#~ msgstr "Indizar _autom?ticamente archivos MPEG"
-
-#, fuzzy
-#~ msgid "Number of threads"
-#~ msgstr "N?mero de Imagens-B"
-
-#, fuzzy
-#~ msgid "Video Display"
-#~ msgstr "Duraci?n del video"
-
-#, fuzzy
-#~ msgid "Message level"
-#~ msgstr "Nivel de _Mensaje"
-
-#, fuzzy
-#~ msgid "Volume control"
-#~ msgstr "Control de _Volumen:"
-
-#, fuzzy
-#~ msgid "Prologic"
-#~ msgstr "Dolby Prologic"
-
-#, fuzzy
-#~ msgid "Prologic II"
-#~ msgstr "Dolby Prologic 2"
-
-#~ msgid "Local Playback Downmixing"
-#~ msgstr "Downmixing de Reproducci?n Local"
-
-#, fuzzy
-#~ msgid "Audio output"
-#~ msgstr "_Salida de sonido"
-
-#, fuzzy
-#~ msgid "Horizontal deblocking"
-#~ msgstr "Desbloqueo horizontal"
-
-#, fuzzy
-#~ msgid "Vertical deblocking"
-#~ msgstr "Desbloqueo vertical"
-
-#~ msgid "Deringing"
-#~ msgstr "Aclarado de esquinas"
-
-#, fuzzy
-#~ msgid "Strength:"
-#~ msgstr "Intensidad: "
-
-#, fuzzy
-#~ msgid "Filter directory"
-#~ msgstr "Intensidad de filtro"
-
-#, fuzzy
-#~ msgid "Target type"
-#~ msgstr "Tipo de destino: "
-
-#, fuzzy
-#~ msgid "Source aspect ratio"
-#~ msgstr "Relaci?n de Aspecto de Origen: "
-
-#, fuzzy
-#~ msgid "? 2001-2006 Mean"
-#~ msgstr "(c) 2001-2007 Mean"
-
-#~ msgid ""
-#~ "Avidemux is free software; you can redistribute it and/or modify it \n"
-#~ "under the terms of the GNU General Public License version 2 \n"
-#~ "as published by the Free Software Foundation.\n"
-#~ "\n"
-#~ "\t\t    GNU GENERAL PUBLIC LICENSE\n"
-#~ "\t\t       Version 2, June 1991\n"
-#~ "\n"
-#~ " Copyright (C) 1989, 1991 Free Software Foundation, Inc.\n"
-#~ "                       51 Franklin St, Fifth Floor, Boston, MA  02110-"
-#~ "1301  USA\n"
-#~ " Everyone is permitted to copy and distribute verbatim copies\n"
-#~ " of this license document, but changing it is not allowed.\n"
-#~ "\n"
-#~ "\t\t\t    Preamble\n"
-#~ "\n"
-#~ "  The licenses for most software are designed to take away your\n"
-#~ "freedom to share and change it.  By contrast, the GNU General Public\n"
-#~ "License is intended to guarantee your freedom to share and change free\n"
-#~ "software--to make sure the software is free for all its users.  This\n"
-#~ "General Public License applies to most of the Free Software\n"
-#~ "Foundation's software and to any other program whose authors commit to\n"
-#~ "using it.  (Some other Free Software Foundation software is covered by\n"
-#~ "the GNU Library General Public License instead.)  You can apply it to\n"
-#~ "your programs, too.\n"
-#~ "\n"
-#~ "  When we speak of free software, we are referring to freedom, not\n"
-#~ "price.  Our General Public Licenses are designed to make sure that you\n"
-#~ "have the freedom to distribute copies of free software (and charge for\n"
-#~ "this service if you wish), that you receive source code or can get it\n"
-#~ "if you want it, that you can change the software or use pieces of it\n"
-#~ "in new free programs; and that you know you can do these things.\n"
-#~ "\n"
-#~ "  To protect your rights, we need to make restrictions that forbid\n"
-#~ "anyone to deny you these rights or to ask you to surrender the rights.\n"
-#~ "These restrictions translate to certain responsibilities for you if you\n"
-#~ "distribute copies of the software, or if you modify it.\n"
-#~ "\n"
-#~ "  For example, if you distribute copies of such a program, whether\n"
-#~ "gratis or for a fee, you must give the recipients all the rights that\n"
-#~ "you have.  You must make sure that they, too, receive or can get the\n"
-#~ "source code.  And you must show them these terms so they know their\n"
-#~ "rights.\n"
-#~ "\n"
-#~ "  We protect your rights with two steps: (1) copyright the software, and\n"
-#~ "(2) offer you this license which gives you legal permission to copy,\n"
-#~ "distribute and/or modify the software.\n"
-#~ "\n"
-#~ "  Also, for each author's protection and ours, we want to make certain\n"
-#~ "that everyone understands that there is no warranty for this free\n"
-#~ "software.  If the software is modified by someone else and passed on, we\n"
-#~ "want its recipients to know that what they have is not the original, so\n"
-#~ "that any problems introduced by others will not reflect on the original\n"
-#~ "authors' reputations.\n"
-#~ "\n"
-#~ "  Finally, any free program is threatened constantly by software\n"
-#~ "patents.  We wish to avoid the danger that redistributors of a free\n"
-#~ "program will individually obtain patent licenses, in effect making the\n"
-#~ "program proprietary.  To prevent this, we have made it clear that any\n"
-#~ "patent must be licensed for everyone's free use or not licensed at all.\n"
-#~ "\n"
-#~ "  The precise terms and conditions for copying, distribution and\n"
-#~ "modification follow.\n"
-#~ "\n"
-#~ "\t\t    GNU GENERAL PUBLIC LICENSE\n"
-#~ "   TERMS AND CONDITIONS FOR COPYING, DISTRIBUTION AND MODIFICATION\n"
-#~ "\n"
-#~ "  0. This License applies to any program or other work which contains\n"
-#~ "a notice placed by the copyright holder saying it may be distributed\n"
-#~ "under the terms of this General Public License.  The \"Program\", below,\n"
-#~ "refers to any such program or work, and a \"work based on the Program\"\n"
-#~ "means either the Program or any derivative work under copyright law:\n"
-#~ "that is to say, a work containing the Program or a portion of it,\n"
-#~ "either verbatim or with modifications and/or translated into another\n"
-#~ "language.  (Hereinafter, translation is included without limitation in\n"
-#~ "the term \"modification\".)  Each licensee is addressed as \"you\".\n"
-#~ "\n"
-#~ "Activities other than copying, distribution and modification are not\n"
-#~ "covered by this License; they are outside its scope.  The act of\n"
-#~ "running the Program is not restricted, and the output from the Program\n"
-#~ "is covered only if its contents constitute a work based on the\n"
-#~ "Program (independent of having been made by running the Program).\n"
-#~ "Whether that is true depends on what the Program does.\n"
-#~ "\n"
-#~ "  1. You may copy and distribute verbatim copies of the Program's\n"
-#~ "source code as you receive it, in any medium, provided that you\n"
-#~ "conspicuously and appropriately publish on each copy an appropriate\n"
-#~ "copyright notice and disclaimer of warranty; keep intact all the\n"
-#~ "notices that refer to this License and to the absence of any warranty;\n"
-#~ "and give any other recipients of the Program a copy of this License\n"
-#~ "along with the Program.\n"
-#~ "\n"
-#~ "You may charge a fee for the physical act of transferring a copy, and\n"
-#~ "you may at your option offer warranty protection in exchange for a fee.\n"
-#~ "\n"
-#~ "  2. You may modify your copy or copies of the Program or any portion\n"
-#~ "of it, thus forming a work based on the Program, and copy and\n"
-#~ "distribute such modifications or work under the terms of Section 1\n"
-#~ "above, provided that you also meet all of these conditions:\n"
-#~ "\n"
-#~ "    a) You must cause the modified files to carry prominent notices\n"
-#~ "    stating that you changed the files and the date of any change.\n"
-#~ "\n"
-#~ "    b) You must cause any work that you distribute or publish, that in\n"
-#~ "    whole or in part contains or is derived from the Program or any\n"
-#~ "    part thereof, to be licensed as a whole at no charge to all third\n"
-#~ "    parties under the terms of this License.\n"
-#~ "\n"
-#~ "    c) If the modified program normally reads commands interactively\n"
-#~ "    when run, you must cause it, when started running for such\n"
-#~ "    interactive use in the most ordinary way, to print or display an\n"
-#~ "    announcement including an appropriate copyright notice and a\n"
-#~ "    notice that there is no warranty (or else, saying that you provide\n"
-#~ "    a warranty) and that users may redistribute the program under\n"
-#~ "    these conditions, and telling the user how to view a copy of this\n"
-#~ "    License.  (Exception: if the Program itself is interactive but\n"
-#~ "    does not normally print such an announcement, your work based on\n"
-#~ "    the Program is not required to print an announcement.)\n"
-#~ "\n"
-#~ "These requirements apply to the modified work as a whole.  If\n"
-#~ "identifiable sections of that work are not derived from the Program,\n"
-#~ "and can be reasonably considered independent and separate works in\n"
-#~ "themselves, then this License, and its terms, do not apply to those\n"
-#~ "sections when you distribute them as separate works.  But when you\n"
-#~ "distribute the same sections as part of a whole which is a work based\n"
-#~ "on the Program, the distribution of the whole must be on the terms of\n"
-#~ "this License, whose permissions for other licensees extend to the\n"
-#~ "entire whole, and thus to each and every part regardless of who wrote "
-#~ "it.\n"
-#~ "\n"
-#~ "Thus, it is not the intent of this section to claim rights or contest\n"
-#~ "your rights to work written entirely by you; rather, the intent is to\n"
-#~ "exercise the right to control the distribution of derivative or\n"
-#~ "collective works based on the Program.\n"
-#~ "\n"
-#~ "In addition, mere aggregation of another work not based on the Program\n"
-#~ "with the Program (or with a work based on the Program) on a volume of\n"
-#~ "a storage or distribution medium does not bring the other work under\n"
-#~ "the scope of this License.\n"
-#~ "\n"
-#~ "  3. You may copy and distribute the Program (or a work based on it,\n"
-#~ "under Section 2) in object code or executable form under the terms of\n"
-#~ "Sections 1 and 2 above provided that you also do one of the following:\n"
-#~ "\n"
-#~ "    a) Accompany it with the complete corresponding machine-readable\n"
-#~ "    source code, which must be distributed under the terms of Sections\n"
-#~ "    1 and 2 above on a medium customarily used for software interchange; "
-#~ "or,\n"
-#~ "\n"
-#~ "    b) Accompany it with a written offer, valid for at least three\n"
-#~ "    years, to give any third party, for a charge no more than your\n"
-#~ "    cost of physically performing source distribution, a complete\n"
-#~ "    machine-readable copy of the corresponding source code, to be\n"
-#~ "    distributed under the terms of Sections 1 and 2 above on a medium\n"
-#~ "    customarily used for software interchange; or,\n"
-#~ "\n"
-#~ "    c) Accompany it with the information you received as to the offer\n"
-#~ "    to distribute corresponding source code.  (This alternative is\n"
-#~ "    allowed only for noncommercial distribution and only if you\n"
-#~ "    received the program in object code or executable form with such\n"
-#~ "    an offer, in accord with Subsection b above.)\n"
-#~ "\n"
-#~ "The source code for a work means the preferred form of the work for\n"
-#~ "making modifications to it.  For an executable work, complete source\n"
-#~ "code means all the source code for all modules it contains, plus any\n"
-#~ "associated interface definition files, plus the scripts used to\n"
-#~ "control compilation and installation of the executable.  However, as a\n"
-#~ "special exception, the source code distributed need not include\n"
-#~ "anything that is normally distributed (in either source or binary\n"
-#~ "form) with the major components (compiler, kernel, and so on) of the\n"
-#~ "operating system on which the executable runs, unless that component\n"
-#~ "itself accompanies the executable.\n"
-#~ "\n"
-#~ "If distribution of executable or object code is made by offering\n"
-#~ "access to copy from a designated place, then offering equivalent\n"
-#~ "access to copy the source code from the same place counts as\n"
-#~ "distribution of the source code, even though third parties are not\n"
-#~ "compelled to copy the source along with the object code.\n"
-#~ "\n"
-#~ "  4. You may not copy, modify, sublicense, or distribute the Program\n"
-#~ "except as expressly provided under this License.  Any attempt\n"
-#~ "otherwise to copy, modify, sublicense or distribute the Program is\n"
-#~ "void, and will automatically terminate your rights under this License.\n"
-#~ "However, parties who have received copies, or rights, from you under\n"
-#~ "this License will not have their licenses terminated so long as such\n"
-#~ "parties remain in full compliance.\n"
-#~ "\n"
-#~ "  5. You are not required to accept this License, since you have not\n"
-#~ "signed it.  However, nothing else grants you permission to modify or\n"
-#~ "distribute the Program or its derivative works.  These actions are\n"
-#~ "prohibited by law if you do not accept this License.  Therefore, by\n"
-#~ "modifying or distributing the Program (or any work based on the\n"
-#~ "Program), you indicate your acceptance of this License to do so, and\n"
-#~ "all its terms and conditions for copying, distributing or modifying\n"
-#~ "the Program or works based on it.\n"
-#~ "\n"
-#~ "  6. Each time you redistribute the Program (or any work based on the\n"
-#~ "Program), the recipient automatically receives a license from the\n"
-#~ "original licensor to copy, distribute or modify the Program subject to\n"
-#~ "these terms and conditions.  You may not impose any further\n"
-#~ "restrictions on the recipients' exercise of the rights granted herein.\n"
-#~ "You are not responsible for enforcing compliance by third parties to\n"
-#~ "this License.\n"
-#~ "\n"
-#~ "  7. If, as a consequence of a court judgment or allegation of patent\n"
-#~ "infringement or for any other reason (not limited to patent issues),\n"
-#~ "conditions are imposed on you (whether by court order, agreement or\n"
-#~ "otherwise) that contradict the conditions of this License, they do not\n"
-#~ "excuse you from the conditions of this License.  If you cannot\n"
-#~ "distribute so as to satisfy simultaneously your obligations under this\n"
-#~ "License and any other pertinent obligations, then as a consequence you\n"
-#~ "may not distribute the Program at all.  For example, if a patent\n"
-#~ "license would not permit royalty-free redistribution of the Program by\n"
-#~ "all those who receive copies directly or indirectly through you, then\n"
-#~ "the only way you could satisfy both it and this License would be to\n"
-#~ "refrain entirely from distribution of the Program.\n"
-#~ "\n"
-#~ "If any portion of this section is held invalid or unenforceable under\n"
-#~ "any particular circumstance, the balance of the section is intended to\n"
-#~ "apply and the section as a whole is intended to apply in other\n"
-#~ "circumstances.\n"
-#~ "\n"
-#~ "It is not the purpose of this section to induce you to infringe any\n"
-#~ "patents or other property right claims or to contest validity of any\n"
-#~ "such claims; this section has the sole purpose of protecting the\n"
-#~ "integrity of the free software distribution system, which is\n"
-#~ "implemented by public license practices.  Many people have made\n"
-#~ "generous contributions to the wide range of software distributed\n"
-#~ "through that system in reliance on consistent application of that\n"
-#~ "system; it is up to the author/donor to decide if he or she is willing\n"
-#~ "to distribute software through any other system and a licensee cannot\n"
-#~ "impose that choice.\n"
-#~ "\n"
-#~ "This section is intended to make thoroughly clear what is believed to\n"
-#~ "be a consequence of the rest of this License.\n"
-#~ "\n"
-#~ "  8. If the distribution and/or use of the Program is restricted in\n"
-#~ "certain countries either by patents or by copyrighted interfaces, the\n"
-#~ "original copyright holder who places the Program under this License\n"
-#~ "may add an explicit geographical distribution limitation excluding\n"
-#~ "those countries, so that distribution is permitted only in or among\n"
-#~ "countries not thus excluded.  In such case, this License incorporates\n"
-#~ "the limitation as if written in the body of this License.\n"
-#~ "\n"
-#~ "  9. The Free Software Foundation may publish revised and/or new "
-#~ "versions\n"
-#~ "of the General Public License from time to time.  Such new versions will\n"
-#~ "be similar in spirit to the present version, but may differ in detail to\n"
-#~ "address new problems or concerns.\n"
-#~ "\n"
-#~ "Each version is given a distinguishing version number.  If the Program\n"
-#~ "specifies a version number of this License which applies to it and \"any\n"
-#~ "later version\", you have the option of following the terms and "
-#~ "conditions\n"
-#~ "either of that version or of any later version published by the Free\n"
-#~ "Software Foundation.  If the Program does not specify a version number "
-#~ "of\n"
-#~ "this License, you may choose any version ever published by the Free "
-#~ "Software\n"
-#~ "Foundation.\n"
-#~ "\n"
-#~ "  10. If you wish to incorporate parts of the Program into other free\n"
-#~ "programs whose distribution conditions are different, write to the "
-#~ "author\n"
-#~ "to ask for permission.  For software which is copyrighted by the Free\n"
-#~ "Software Foundation, write to the Free Software Foundation; we sometimes\n"
-#~ "make exceptions for this.  Our decision will be guided by the two goals\n"
-#~ "of preserving the free status of all derivatives of our free software "
-#~ "and\n"
-#~ "of promoting the sharing and reuse of software generally.\n"
-#~ "\n"
-#~ "\t\t\t    NO WARRANTY\n"
-#~ "\n"
-#~ "  11. BECAUSE THE PROGRAM IS LICENSED FREE OF CHARGE, THERE IS NO "
-#~ "WARRANTY\n"
-#~ "FOR THE PROGRAM, TO THE EXTENT PERMITTED BY APPLICABLE LAW.  EXCEPT WHEN\n"
-#~ "OTHERWISE STATED IN WRITING THE COPYRIGHT HOLDERS AND/OR OTHER PARTIES\n"
-#~ "PROVIDE THE PROGRAM \"AS IS\" WITHOUT WARRANTY OF ANY KIND, EITHER "
-#~ "EXPRESSED\n"
-#~ "OR IMPLIED, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF\n"
-#~ "MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  THE ENTIRE RISK "
-#~ "AS\n"
-#~ "TO THE QUALITY AND PERFORMANCE OF THE PROGRAM IS WITH YOU.  SHOULD THE\n"
-#~ "PROGRAM PROVE DEFECTIVE, YOU ASSUME THE COST OF ALL NECESSARY SERVICING,\n"
-#~ "REPAIR OR CORRECTION.\n"
-#~ "\n"
-#~ "  12. IN NO EVENT UNLESS REQUIRED BY APPLICABLE LAW OR AGREED TO IN "
-#~ "WRITING\n"
-#~ "WILL ANY COPYRIGHT HOLDER, OR ANY OTHER PARTY WHO MAY MODIFY AND/OR\n"
-#~ "REDISTRIBUTE THE PROGRAM AS PERMITTED ABOVE, BE LIABLE TO YOU FOR "
-#~ "DAMAGES,\n"
-#~ "INCLUDING ANY GENERAL, SPECIAL, INCIDENTAL OR CONSEQUENTIAL DAMAGES "
-#~ "ARISING\n"
-#~ "OUT OF THE USE OR INABILITY TO USE THE PROGRAM (INCLUDING BUT NOT "
-#~ "LIMITED\n"
-#~ "TO LOSS OF DATA OR DATA BEING RENDERED INACCURATE OR LOSSES SUSTAINED BY\n"
-#~ "YOU OR THIRD PARTIES OR A FAILURE OF THE PROGRAM TO OPERATE WITH ANY "
-#~ "OTHER\n"
-#~ "PROGRAMS), EVEN IF SUCH HOLDER OR OTHER PARTY HAS BEEN ADVISED OF THE\n"
-#~ "POSSIBILITY OF SUCH DAMAGES.\n"
-#~ "\n"
-#~ "\t\t     END OF TERMS AND CONDITIONS\n"
-#~ "\n"
-#~ "\t    How to Apply These Terms to Your New Programs\n"
-#~ "\n"
-#~ "  If you develop a new program, and you want it to be of the greatest\n"
-#~ "possible use to the public, the best way to achieve this is to make it\n"
-#~ "free software which everyone can redistribute and change under these "
-#~ "terms.\n"
-#~ "\n"
-#~ "  To do so, attach the following notices to the program.  It is safest\n"
-#~ "to attach them to the start of each source file to most effectively\n"
-#~ "convey the exclusion of warranty; and each file should have at least\n"
-#~ "the \"copyright\" line and a pointer to where the full notice is found.\n"
-#~ "\n"
-#~ "    <one line to give the program's name and a brief idea of what it does."
-#~ ">\n"
-#~ "    Copyright (C) <year>  <name of author>\n"
-#~ "\n"
-#~ "    This program is free software; you can redistribute it and/or modify\n"
-#~ "    it under the terms of the GNU General Public License as published by\n"
-#~ "    the Free Software Foundation; either version 2 of the License, or\n"
-#~ "    (at your option) any later version.\n"
-#~ "\n"
-#~ "    This program is distributed in the hope that it will be useful,\n"
-#~ "    but WITHOUT ANY WARRANTY; without even the implied warranty of\n"
-#~ "    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n"
-#~ "    GNU General Public License for more details.\n"
-#~ "\n"
-#~ "    You should have received a copy of the GNU General Public License\n"
-#~ "    along with this program; if not, write to the Free Software\n"
-#~ "    Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA  02110-"
-#~ "1301  USA\n"
-#~ "\n"
-#~ "\n"
-#~ "Also add information on how to contact you by electronic and paper mail.\n"
-#~ "\n"
-#~ "If the program is interactive, make it output a short notice like this\n"
-#~ "when it starts in an interactive mode:\n"
-#~ "\n"
-#~ "    Gnomovision version 69, Copyright (C) year name of author\n"
-#~ "    Gnomovision comes with ABSOLUTELY NO WARRANTY; for details type `show "
-#~ "w'.\n"
-#~ "    This is free software, and you are welcome to redistribute it\n"
-#~ "    under certain conditions; type `show c' for details.\n"
-#~ "\n"
-#~ "The hypothetical commands `show w' and `show c' should show the "
-#~ "appropriate\n"
-#~ "parts of the General Public License.  Of course, the commands you use "
-#~ "may\n"
-#~ "be called something other than `show w' and `show c'; they could even be\n"
-#~ "mouse-clicks or menu items--whatever suits your program.\n"
-#~ "\n"
-#~ "You should also get your employer (if you work as a programmer) or your\n"
-#~ "school, if any, to sign a \"copyright disclaimer\" for the program, if\n"
-#~ "necessary.  Here is a sample; alter the names:\n"
-#~ "\n"
-#~ "  Yoyodyne, Inc., hereby disclaims all copyright interest in the program\n"
-#~ "  `Gnomovision' (which makes passes at compilers) written by James "
-#~ "Hacker.\n"
-#~ "\n"
-#~ "  <signature of Ty Coon>, 1 April 1989\n"
-#~ "  Ty Coon, President of Vice\n"
-#~ "\n"
-#~ "This General Public License does not permit incorporating your program "
-#~ "into\n"
-#~ "proprietary programs.  If your program is a subroutine library, you may\n"
-#~ "consider it more useful to permit linking proprietary applications with "
-#~ "the\n"
-#~ "library.  If this is what you want to do, use the GNU Library General\n"
-#~ "Public License instead of this License."
-#~ msgstr ""
-#~ "Avidemux es software libre; puede redistribuirlo o modificarlo\n"
-#~ "bajo los t(c)rminos de la Licencia PDblica General GNU versi?n 2\n"
-#~ "seg?n lo publicado por la Fundaci?n del Software Libre.\n"
-#~ "\n"
-#~ "Puede encontrar la siguiente licencia traducida al castellano en "
-#~ "internet;\n"
-#~ "traducci?n no oficial en:\n"
-#~ "http://gugs.sindominio.net/licencias/gples.html\n"
-#~ "\n"
-#~ "\t\t    GNU LICENCIA P?BLICA GENERAL\n"
-#~ "\t\t       Version 2, Junio 1991\n"
-#~ "\n"
-#~ " Copyright (C) 1989, 1991 Free Software Foundation, Inc.\n"
-#~ "                       51 Franklin St, Fifth Floor, Boston, MA  02110-"
-#~ "1301  USA\n"
-#~ " Everyone is permitted to copy and distribute verbatim copies\n"
-#~ " of this license document, but changing it is not allowed.\n"
-#~ "\n"
-#~ "\t\t\t    Preamble\n"
-#~ "\n"
-#~ "  The licenses for most software are designed to take away your\n"
-#~ "freedom to share and change it.  By contrast, the GNU General Public\n"
-#~ "License is intended to guarantee your freedom to share and change free\n"
-#~ "software--to make sure the software is free for all its users.  This\n"
-#~ "General Public License applies to most of the Free Software\n"
-#~ "Foundation's software and to any other program whose authors commit to\n"
-#~ "using it.  (Some other Free Software Foundation software is covered by\n"
-#~ "the GNU Library General Public License instead.)  You can apply it to\n"
-#~ "your programs, too.\n"
-#~ "\n"
-#~ "  When we speak of free software, we are referring to freedom, not\n"
-#~ "price.  Our General Public Licenses are designed to make sure that you\n"
-#~ "have the freedom to distribute copies of free software (and charge for\n"
-#~ "this service if you wish), that you receive source code or can get it\n"
-#~ "if you want it, that you can change the software or use pieces of it\n"
-#~ "in new free programs; and that you know you can do these things.\n"
-#~ "\n"
-#~ "  To protect your rights, we need to make restrictions that forbid\n"
-#~ "anyone to deny you these rights or to ask you to surrender the rights.\n"
-#~ "These restrictions translate to certain responsibilities for you if you\n"
-#~ "distribute copies of the software, or if you modify it.\n"
-#~ "\n"
-#~ "  For example, if you distribute copies of such a program, whether\n"
-#~ "gratis or for a fee, you must give the recipients all the rights that\n"
-#~ "you have.  You must make sure that they, too, receive or can get the\n"
-#~ "source code.  And you must show them these terms so they know their\n"
-#~ "rights.\n"
-#~ "\n"
-#~ "  We protect your rights with two steps: (1) copyright the software, and\n"
-#~ "(2) offer you this license which gives you legal permission to copy,\n"
-#~ "distribute and/or modify the software.\n"
-#~ "\n"
-#~ "  Also, for each author's protection and ours, we want to make certain\n"
-#~ "that everyone understands that there is no warranty for this free\n"
-#~ "software.  If the software is modified by someone else and passed on, we\n"
-#~ "want its recipients to know that what they have is not the original, so\n"
-#~ "that any problems introduced by others will not reflect on the original\n"
-#~ "authors' reputations.\n"
-#~ "\n"
-#~ "  Finally, any free program is threatened constantly by software\n"
-#~ "patents.  We wish to avoid the danger that redistributors of a free\n"
-#~ "program will individually obtain patent licenses, in effect making the\n"
-#~ "program proprietary.  To prevent this, we have made it clear that any\n"
-#~ "patent must be licensed for everyone's free use or not licensed at all.\n"
-#~ "\n"
-#~ "  The precise terms and conditions for copying, distribution and\n"
-#~ "modification follow.\n"
-#~ "\n"
-#~ "\t\t    GNU GENERAL PUBLIC LICENSE\n"
-#~ "   TERMS AND CONDITIONS FOR COPYING, DISTRIBUTION AND MODIFICATION\n"
-#~ "\n"
-#~ "  0. This License applies to any program or other work which contains\n"
-#~ "a notice placed by the copyright holder saying it may be distributed\n"
-#~ "under the terms of this General Public License.  The \"Program\", below,\n"
-#~ "refers to any such program or work, and a \"work based on the Program\"\n"
-#~ "means either the Program or any derivative work under copyright law:\n"
-#~ "that is to say, a work containing the Program or a portion of it,\n"
-#~ "either verbatim or with modifications and/or translated into another\n"
-#~ "language.  (Hereinafter, translation is included without limitation in\n"
-#~ "the term \"modification\".)  Each licensee is addressed as \"you\".\n"
-#~ "\n"
-#~ "Activities other than copying, distribution and modification are not\n"
-#~ "covered by this License; they are outside its scope.  The act of\n"
-#~ "running the Program is not restricted, and the output from the Program\n"
-#~ "is covered only if its contents constitute a work based on the\n"
-#~ "Program (independent of having been made by running the Program).\n"
-#~ "Whether that is true depends on what the Program does.\n"
-#~ "\n"
-#~ "  1. You may copy and distribute verbatim copies of the Program's\n"
-#~ "source code as you receive it, in any medium, provided that you\n"
-#~ "conspicuously and appropriately publish on each copy an appropriate\n"
-#~ "copyright notice and disclaimer of warranty; keep intact all the\n"
-#~ "notices that refer to this License and to the absence of any warranty;\n"
-#~ "and give any other recipients of the Program a copy of this License\n"
-#~ "along with the Program.\n"
-#~ "\n"
-#~ "You may charge a fee for the physical act of transferring a copy, and\n"
-#~ "you may at your option offer warranty protection in exchange for a fee.\n"
-#~ "\n"
-#~ "  2. You may modify your copy or copies of the Program or any portion\n"
-#~ "of it, thus forming a work based on the Program, and copy and\n"
-#~ "distribute such modifications or work under the terms of Section 1\n"
-#~ "above, provided that you also meet all of these conditions:\n"
-#~ "\n"
-#~ "    a) You must cause the modified files to carry prominent notices\n"
-#~ "    stating that you changed the files and the date of any change.\n"
-#~ "\n"
-#~ "    b) You must cause any work that you distribute or publish, that in\n"
-#~ "    whole or in part contains or is derived from the Program or any\n"
-#~ "    part thereof, to be licensed as a whole at no charge to all third\n"
-#~ "    parties under the terms of this License.\n"
-#~ "\n"
-#~ "    c) If the modified program normally reads commands interactively\n"
-#~ "    when run, you must cause it, when started running for such\n"
-#~ "    interactive use in the most ordinary way, to print or display an\n"
-#~ "    announcement including an appropriate copyright notice and a\n"
-#~ "    notice that there is no warranty (or else, saying that you provide\n"
-#~ "    a warranty) and that users may redistribute the program under\n"
-#~ "    these conditions, and telling the user how to view a copy of this\n"
-#~ "    License.  (Exception: if the Program itself is interactive but\n"
-#~ "    does not normally print such an announcement, your work based on\n"
-#~ "    the Program is not required to print an announcement.)\n"
-#~ "\n"
-#~ "These requirements apply to the modified work as a whole.  If\n"
-#~ "identifiable sections of that work are not derived from the Program,\n"
-#~ "and can be reasonably considered independent and separate works in\n"
-#~ "themselves, then this License, and its terms, do not apply to those\n"
-#~ "sections when you distribute them as separate works.  But when you\n"
-#~ "distribute the same sections as part of a whole which is a work based\n"
-#~ "on the Program, the distribution of the whole must be on the terms of\n"
-#~ "this License, whose permissions for other licensees extend to the\n"
-#~ "entire whole, and thus to each and every part regardless of who wrote "
-#~ "it.\n"
-#~ "\n"
-#~ "Thus, it is not the intent of this section to claim rights or contest\n"
-#~ "your rights to work written entirely by you; rather, the intent is to\n"
-#~ "exercise the right to control the distribution of derivative or\n"
-#~ "collective works based on the Program.\n"
-#~ "\n"
-#~ "In addition, mere aggregation of another work not based on the Program\n"
-#~ "with the Program (or with a work based on the Program) on a volume of\n"
-#~ "a storage or distribution medium does not bring the other work under\n"
-#~ "the scope of this License.\n"
-#~ "\n"
-#~ "  3. You may copy and distribute the Program (or a work based on it,\n"
-#~ "under Section 2) in object code or executable form under the terms of\n"
-#~ "Sections 1 and 2 above provided that you also do one of the following:\n"
-#~ "\n"
-#~ "    a) Accompany it with the complete corresponding machine-readable\n"
-#~ "    source code, which must be distributed under the terms of Sections\n"
-#~ "    1 and 2 above on a medium customarily used for software interchange; "
-#~ "or,\n"
-#~ "\n"
-#~ "    b) Accompany it with a written offer, valid for at least three\n"
-#~ "    years, to give any third party, for a charge no more than your\n"
-#~ "    cost of physically performing source distribution, a complete\n"
-#~ "    machine-readable copy of the corresponding source code, to be\n"
-#~ "    distributed under the terms of Sections 1 and 2 above on a medium\n"
-#~ "    customarily used for software interchange; or,\n"
-#~ "\n"
-#~ "    c) Accompany it with the information you received as to the offer\n"
-#~ "    to distribute corresponding source code.  (This alternative is\n"
-#~ "    allowed only for noncommercial distribution and only if you\n"
-#~ "    received the program in object code or executable form with such\n"
-#~ "    an offer, in accord with Subsection b above.)\n"
-#~ "\n"
-#~ "The source code for a work means the preferred form of the work for\n"
-#~ "making modifications to it.  For an executable work, complete source\n"
-#~ "code means all the source code for all modules it contains, plus any\n"
-#~ "associated interface definition files, plus the scripts used to\n"
-#~ "control compilation and installation of the executable.  However, as a\n"
-#~ "special exception, the source code distributed need not include\n"
-#~ "anything that is normally distributed (in either source or binary\n"
-#~ "form) with the major components (compiler, kernel, and so on) of the\n"
-#~ "operating system on which the executable runs, unless that component\n"
-#~ "itself accompanies the executable.\n"
-#~ "\n"
-#~ "If distribution of executable or object code is made by offering\n"
-#~ "access to copy from a designated place, then offering equivalent\n"
-#~ "access to copy the source code from the same place counts as\n"
-#~ "distribution of the source code, even though third parties are not\n"
-#~ "compelled to copy the source along with the object code.\n"
-#~ "\n"
-#~ "  4. You may not copy, modify, sublicense, or distribute the Program\n"
-#~ "except as expressly provided under this License.  Any attempt\n"
-#~ "otherwise to copy, modify, sublicense or distribute the Program is\n"
-#~ "void, and will automatically terminate your rights under this License.\n"
-#~ "However, parties who have received copies, or rights, from you under\n"
-#~ "this License will not have their licenses terminated so long as such\n"
-#~ "parties remain in full compliance.\n"
-#~ "\n"
-#~ "  5. You are not required to accept this License, since you have not\n"
-#~ "signed it.  However, nothing else grants you permission to modify or\n"
-#~ "distribute the Program or its derivative works.  These actions are\n"
-#~ "prohibited by law if you do not accept this License.  Therefore, by\n"
-#~ "modifying or distributing the Program (or any work based on the\n"
-#~ "Program), you indicate your acceptance of this License to do so, and\n"
-#~ "all its terms and conditions for copying, distributing or modifying\n"
-#~ "the Program or works based on it.\n"
-#~ "\n"
-#~ "  6. Each time you redistribute the Program (or any work based on the\n"
-#~ "Program), the recipient automatically receives a license from the\n"
-#~ "original licensor to copy, distribute or modify the Program subject to\n"
-#~ "these terms and conditions.  You may not impose any further\n"
-#~ "restrictions on the recipients' exercise of the rights granted herein.\n"
-#~ "You are not responsible for enforcing compliance by third parties to\n"
-#~ "this License.\n"
-#~ "\n"
-#~ "  7. If, as a consequence of a court judgment or allegation of patent\n"
-#~ "infringement or for any other reason (not limited to patent issues),\n"
-#~ "conditions are imposed on you (whether by court order, agreement or\n"
-#~ "otherwise) that contradict the conditions of this License, they do not\n"
-#~ "excuse you from the conditions of this License.  If you cannot\n"
-#~ "distribute so as to satisfy simultaneously your obligations under this\n"
-#~ "License and any other pertinent obligations, then as a consequence you\n"
-#~ "may not distribute the Program at all.  For example, if a patent\n"
-#~ "license would not permit royalty-free redistribution of the Program by\n"
-#~ "all those who receive copies directly or indirectly through you, then\n"
-#~ "the only way you could satisfy both it and this License would be to\n"
-#~ "refrain entirely from distribution of the Program.\n"
-#~ "\n"
-#~ "If any portion of this section is held invalid or unenforceable under\n"
-#~ "any particular circumstance, the balance of the section is intended to\n"
-#~ "apply and the section as a whole is intended to apply in other\n"
-#~ "circumstances.\n"
-#~ "\n"
-#~ "It is not the purpose of this section to induce you to infringe any\n"
-#~ "patents or other property right claims or to contest validity of any\n"
-#~ "such claims; this section has the sole purpose of protecting the\n"
-#~ "integrity of the free software distribution system, which is\n"
-#~ "implemented by public license practices.  Many people have made\n"
-#~ "generous contributions to the wide range of software distributed\n"
-#~ "through that system in reliance on consistent application of that\n"
-#~ "system; it is up to the author/donor to decide if he or she is willing\n"
-#~ "to distribute software through any other system and a licensee cannot\n"
-#~ "impose that choice.\n"
-#~ "\n"
-#~ "This section is intended to make thoroughly clear what is believed to\n"
-#~ "be a consequence of the rest of this License.\n"
-#~ "\n"
-#~ "  8. If the distribution and/or use of the Program is restricted in\n"
-#~ "certain countries either by patents or by copyrighted interfaces, the\n"
-#~ "original copyright holder who places the Program under this License\n"
-#~ "may add an explicit geographical distribution limitation excluding\n"
-#~ "those countries, so that distribution is permitted only in or among\n"
-#~ "countries not thus excluded.  In such case, this License incorporates\n"
-#~ "the limitation as if written in the body of this License.\n"
-#~ "\n"
-#~ "  9. The Free Software Foundation may publish revised and/or new "
-#~ "versions\n"
-#~ "of the General Public License from time to time.  Such new versions will\n"
-#~ "be similar in spirit to the present version, but may differ in detail to\n"
-#~ "address new problems or concerns.\n"
-#~ "\n"
-#~ "Each version is given a distinguishing version number.  If the Program\n"
-#~ "specifies a version number of this License which applies to it and \"any\n"
-#~ "later version\", you have the option of following the terms and "
-#~ "conditions\n"
-#~ "either of that version or of any later version published by the Free\n"
-#~ "Software Foundation.  If the Program does not specify a version number "
-#~ "of\n"
-#~ "this License, you may choose any version ever published by the Free "
-#~ "Software\n"
-#~ "Foundation.\n"
-#~ "\n"
-#~ "  10. If you wish to incorporate parts of the Program into other free\n"
-#~ "programs whose distribution conditions are different, write to the "
-#~ "author\n"
-#~ "to ask for permission.  For software which is copyrighted by the Free\n"
-#~ "Software Foundation, write to the Free Software Foundation; we sometimes\n"
-#~ "make exceptions for this.  Our decision will be guided by the two goals\n"
-#~ "of preserving the free status of all derivatives of our free software "
-#~ "and\n"
-#~ "of promoting the sharing and reuse of software generally.\n"
-#~ "\n"
-#~ "\t\t\t    NO WARRANTY\n"
-#~ "\n"
-#~ "  11. BECAUSE THE PROGRAM IS LICENSED FREE OF CHARGE, THERE IS NO "
-#~ "WARRANTY\n"
-#~ "FOR THE PROGRAM, TO THE EXTENT PERMITTED BY APPLICABLE LAW.  EXCEPT WHEN\n"
-#~ "OTHERWISE STATED IN WRITING THE COPYRIGHT HOLDERS AND/OR OTHER PARTIES\n"
-#~ "PROVIDE THE PROGRAM \"AS IS\" WITHOUT WARRANTY OF ANY KIND, EITHER "
-#~ "EXPRESSED\n"
-#~ "OR IMPLIED, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF\n"
-#~ "MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  THE ENTIRE RISK "
-#~ "AS\n"
-#~ "TO THE QUALITY AND PERFORMANCE OF THE PROGRAM IS WITH YOU.  SHOULD THE\n"
-#~ "PROGRAM PROVE DEFECTIVE, YOU ASSUME THE COST OF ALL NECESSARY SERVICING,\n"
-#~ "REPAIR OR CORRECTION.\n"
-#~ "\n"
-#~ "  12. IN NO EVENT UNLESS REQUIRED BY APPLICABLE LAW OR AGREED TO IN "
-#~ "WRITING\n"
-#~ "WILL ANY COPYRIGHT HOLDER, OR ANY OTHER PARTY WHO MAY MODIFY AND/OR\n"
-#~ "REDISTRIBUTE THE PROGRAM AS PERMITTED ABOVE, BE LIABLE TO YOU FOR "
-#~ "DAMAGES,\n"
-#~ "INCLUDING ANY GENERAL, SPECIAL, INCIDENTAL OR CONSEQUENTIAL DAMAGES "
-#~ "ARISING\n"
-#~ "OUT OF THE USE OR INABILITY TO USE THE PROGRAM (INCLUDING BUT NOT "
-#~ "LIMITED\n"
-#~ "TO LOSS OF DATA OR DATA BEING RENDERED INACCURATE OR LOSSES SUSTAINED BY\n"
-#~ "YOU OR THIRD PARTIES OR A FAILURE OF THE PROGRAM TO OPERATE WITH ANY "
-#~ "OTHER\n"
-#~ "PROGRAMS), EVEN IF SUCH HOLDER OR OTHER PARTY HAS BEEN ADVISED OF THE\n"
-#~ "POSSIBILITY OF SUCH DAMAGES.\n"
-#~ "\n"
-#~ "\t\t     END OF TERMS AND CONDITIONS\n"
-#~ "\n"
-#~ "\t    How to Apply These Terms to Your New Programs\n"
-#~ "\n"
-#~ "  If you develop a new program, and you want it to be of the greatest\n"
-#~ "possible use to the public, the best way to achieve this is to make it\n"
-#~ "free software which everyone can redistribute and change under these "
-#~ "terms.\n"
-#~ "\n"
-#~ "  To do so, attach the following notices to the program.  It is safest\n"
-#~ "to attach them to the start of each source file to most effectively\n"
-#~ "convey the exclusion of warranty; and each file should have at least\n"
-#~ "the \"copyright\" line and a pointer to where the full notice is found.\n"
-#~ "\n"
-#~ "    <one line to give the program's name and a brief idea of what it does."
-#~ ">\n"
-#~ "    Copyright (C) <year>  <name of author>\n"
-#~ "\n"
-#~ "    This program is free software; you can redistribute it and/or modify\n"
-#~ "    it under the terms of the GNU General Public License as published by\n"
-#~ "    the Free Software Foundation; either version 2 of the License, or\n"
-#~ "    (at your option) any later version.\n"
-#~ "\n"
-#~ "    This program is distributed in the hope that it will be useful,\n"
-#~ "    but WITHOUT ANY WARRANTY; without even the implied warranty of\n"
-#~ "    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n"
-#~ "    GNU General Public License for more details.\n"
-#~ "\n"
-#~ "    You should have received a copy of the GNU General Public License\n"
-#~ "    along with this program; if not, write to the Free Software\n"
-#~ "    Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA  02110-"
-#~ "1301  USA\n"
-#~ "\n"
-#~ "\n"
-#~ "Also add information on how to contact you by electronic and paper mail.\n"
-#~ "\n"
-#~ "If the program is interactive, make it output a short notice like this\n"
-#~ "when it starts in an interactive mode:\n"
-#~ "\n"
-#~ "    Gnomovision version 69, Copyright (C) year name of author\n"
-#~ "    Gnomovision comes with ABSOLUTELY NO WARRANTY; for details type `show "
-#~ "w'.\n"
-#~ "    This is free software, and you are welcome to redistribute it\n"
-#~ "    under certain conditions; type `show c' for details.\n"
-#~ "\n"
-#~ "The hypothetical commands `show w' and `show c' should show the "
-#~ "appropriate\n"
-#~ "parts of the General Public License.  Of course, the commands you use "
-#~ "may\n"
-#~ "be called something other than `show w' and `show c'; they could even be\n"
-#~ "mouse-clicks or menu items--whatever suits your program.\n"
-#~ "\n"
-#~ "You should also get your employer (if you work as a programmer) or your\n"
-#~ "school, if any, to sign a \"copyright disclaimer\" for the program, if\n"
-#~ "necessary.  Here is a sample; alter the names:\n"
-#~ "\n"
-#~ "  Yoyodyne, Inc., hereby disclaims all copyright interest in the program\n"
-#~ "  `Gnomovision' (which makes passes at compilers) written by James "
-#~ "Hacker.\n"
-#~ "\n"
-#~ "  <signature of Ty Coon>, 1 April 1989\n"
-#~ "  Ty Coon, President of Vice\n"
-#~ "\n"
-#~ "This General Public License does not permit incorporating your program "
-#~ "into\n"
-#~ "proprietary programs.  If your program is a subroutine library, you may\n"
-#~ "consider it more useful to permit linking proprietary applications with "
-#~ "the\n"
-#~ "library.  If this is what you want to do, use the GNU Library General\n"
-#~ "Public License instead of this License."
-
-#~ msgid "Select background picture"
-#~ msgstr "Seleccione imagen de fondo"
-
-#~ msgid "Animated Menu"
-#~ msgstr "Men? Animado"
-
-#~ msgid "BackGround Image :"
-#~ msgstr "Imagen de fondo: "
-
-#~ msgid "Standard"
-#~ msgstr "Est?ndar"
-
-#~ msgid "NTSC (default is PAL)"
-#~ msgstr "NTSC (PAL por defecto)"
-
-#~ msgid "Vignette Width"
-#~ msgstr "Anchura de Vi?eta"
-
-#~ msgid "Vignette Height"
-#~ msgstr "Altura de Vi?eta"
-
-#~ msgid "<b>General</b>"
-#~ msgstr "<b>General</b>"
-
-#~ msgid "Chapter 1"
-#~ msgstr "Cap?tulo 1"
-
-#~ msgid "Chapter 2"
-#~ msgstr "Cap?tulo 2"
-
-#~ msgid "Chapter 3"
-#~ msgstr "Cap?tulo 3"
-
-#~ msgid "Chapter 4"
-#~ msgstr "Cap?tulo 4"
-
-#~ msgid "Chapter 5"
-#~ msgstr "Cap?tulo 5"
-
-#~ msgid "Chapter 6"
-#~ msgstr "Cap?tulo 6"
-
-#~ msgid "Start frame for this vignette."
-#~ msgstr "Empezar imagen por esta vi?eta."
-
-#~ msgid "<b>TimeCode</b>"
-#~ msgstr "<b>Marca de Tiempo</b>"
-
-#, fuzzy
-#~ msgid "Audio Processing"
-#~ msgstr "Procesar Audio"
-
-#~ msgid "DRC"
-#~ msgstr "DRC"
-
-#~ msgid "Timeshift"
-#~ msgstr "Desfase de tiempo"
-
-#~ msgid "Resample to hz"
-#~ msgstr "Remuestreo a hz"
-
-#~ msgid "<b>Resampling</b>"
-#~ msgstr "<b>Remuestreando</b>"
-
-#~ msgid "Film -> PAL"
-#~ msgstr "Film -> PAL"
-
-#~ msgid "PAL->Film"
-#~ msgstr "PAL->Film"
-
-#~ msgid "<b>Fps convert</b>"
-#~ msgstr "<b>Convertir a fps</b>"
-
-#~ msgid "Automatic ( max is -3dB)"
-#~ msgstr "Autom?tico (max. es -3dB)"
-
-#~ msgid "Manual (db) : "
-#~ msgstr "Manual (db): "
-
-#~ msgid "<b>Gain</b>"
-#~ msgstr "<b>Ganancia</b>"
-
-#~ msgid "Stereo+Surround"
-#~ msgstr "Est4(c)reo+Surround"
-
-#~ msgid "Stereo+Center"
-#~ msgstr "Est(c)reo+Centro"
-
-#~ msgid "Stereo+Center+Surround"
-#~ msgstr "Estu(c)reo+Centro+Surround"
-
-#~ msgid "Stereo Front+Stero Rear"
-#~ msgstr "Est(c)reo Frontal+Estg(c)reo Trasero"
-
-#~ msgid "Dolby Prologic"
-#~ msgstr "Dolby Prologic"
-
-#~ msgid "Dolby Prologic 2"
-#~ msgstr "Dolby Prologic 2"
-
-#~ msgid "<b>Mixer</b>"
-#~ msgstr "<b>Mezclador</b>"
-
-#~ msgid "Bitrate Calculator"
-#~ msgstr "Calculadora de Tasa de Bits"
-
-#~ msgid "Done : %02d%%"
-#~ msgstr "Hecho : %02d%%"
-
-#~ msgid "Encoding in Progress"
-#~ msgstr "Codificaci?n en progreso"
-
-#~ msgid "<b><big>Encoding files</big></b>"
-#~ msgstr "<b><big>Codificando archivos</big></b>"
-
-#~ msgid "<b>Phasis:</b>"
-#~ msgstr "<b>Fase:</b>"
-
-#~ msgid "<b>Frame:</b>"
-#~ msgstr "<b>Imagen:</b>"
-
-#, fuzzy
-#~ msgid "00000/00000"
-#~ msgstr "00000/00000"
-
-#~ msgid "<b>Vid codec:</b>"
-#~ msgstr "<b>Codec video:</b>"
-
-#~ msgid "<b>Aud Codec:</b>"
-#~ msgstr "<b>Codec sonido:</b>"
-
-#~ msgid "<b>FPS:</b>"
-#~ msgstr "<b>CPS:</b>"
-
-#~ msgid "<b>Vid Bitrate:</b>"
-#~ msgstr "<b>Bitrate de video:</b>"
-
-#~ msgid "<b>Quantizer:</b>"
-#~ msgstr "<b>Cuantizador:</b>"
-
-#~ msgid "31"
-#~ msgstr "31"
-
-#~ msgid "<b>ETA:</b>"
-#~ msgstr "<b>Tiempo restante aprox.:</b>"
-
-#~ msgid "0 h 0 mn 0 s"
-#~ msgstr "0 h 0 mn 0 s"
-
-#, fuzzy
-#~ msgid "Select video to write"
-#~ msgstr "Seleccionar archivo"
-
-#~ msgid "Please select or enter a valid filename"
-#~ msgstr "Por favor seleccione o introduzca un nombre v?lido"
-
-#~ msgid "Please select or enter a valid jobname"
-#~ msgstr "Por favor seleccione o introduzca un nombre v?lido"
-
-#, fuzzy
-#~ msgid "Libavcodec Decoder Option"
-#~ msgstr "Opciones del Decodificador Libavcodec"
-
-#~ msgid "Swap UV"
-#~ msgstr "Swap UV"
-
-#~ msgid "Show motion Vectors"
-#~ msgstr "Mostrar vectores de movimiento"
-
-#~ msgid "Mjpeg Codec settings"
-#~ msgstr "Config. Codec Mjpeg"
-
-#~ msgid "Swap U & V"
-#~ msgstr "Invertir U y V"
-
-#, fuzzy
-#~ msgid "Mpeg2 options"
-#~ msgstr "Opciones de Mpeg2"
-
-#~ msgid "Other arg"
-#~ msgstr "Otros arg."
-
-#~ msgid "Quantisation (2-31)"
-#~ msgstr "Cuantizaci?n (2-31)"
-
-#~ msgid "Maximum bitrate (kbps)"
-#~ msgstr "Bitrate m?ximo (kbps)"
-
-#~ msgid "<b>Glyphs</b>"
-#~ msgstr "<b>Glifos</b>"
-
-#~ msgid "  "
-#~ msgstr "  "
-
-#~ msgid "VobSub"
-#~ msgstr "VobSub"
-
-#, fuzzy
-#~ msgid "Output Srt"
-#~ msgstr "Salida Srt"
-
-#~ msgid "<b>Files</b>"
-#~ msgstr "<b>Archivos</b>"
-
-#~ msgid "StartOcr"
-#~ msgstr "Comenzar Ocr"
-
-#~ msgid "Calibrate"
-#~ msgstr "Calibrar"
-
-#~ msgid "Skip all"
-#~ msgstr "Saltar todo"
-
-#~ msgid "Ignore glyph"
-#~ msgstr "Ignorar Glifo"
-
-#~ msgid "Stack Field"
-#~ msgstr "Campo Pila"
-
-#, fuzzy
-#~ msgid " No"
-#~ msgstr "No"
-
-#~ msgid " Yes"
-#~ msgstr "Si"
-
-#~ msgid "NONE"
-#~ msgstr "NINGUNO"
-
-#, fuzzy
-#~ msgid "Informations"
-#~ msgstr "Informaci?n del video"
-
-#, fuzzy
-#~ msgid "# of frames"
-#~ msgstr "# de im?genes"
-
-#, fuzzy
-#~ msgid "Codec 4CC"
-#~ msgstr "4CC del codec"
-
-#, fuzzy
-#~ msgid "Video Duration  "
-#~ msgstr "Duraci?n del video"
-
-#~ msgid "Image size"
-#~ msgstr "Tama?o de la imagen"
-
-#~ msgid "-/-"
-#~ msgstr "-/-"
-
-#, fuzzy
-#~ msgid "Packed Bistream"
-#~ msgstr "Bitstream empaquetado"
-
-#~ msgid "Quarter Pixel"
-#~ msgstr "Quarter Pixel"
-
-#~ msgid "GMC "
-#~ msgstr "GMC "
-
-#~ msgid "<b>Extra Properties</b>"
-#~ msgstr "<b>Propiedades Extra</b>"
-
-#, fuzzy
-#~ msgid "Codec "
-#~ msgstr "Codec "
-
-#~ msgid "Channels  "
-#~ msgstr "Canales"
-
-#~ msgid "Bitrate "
-#~ msgstr "Bitrate"
-
-#~ msgid "Frequency"
-#~ msgstr "Frecuencia"
-
-#, fuzzy
-#~ msgid "Audio duration  "
-#~ msgstr "Duraci?n sonido"
-
-#~ msgid "Requantize Option"
-#~ msgstr "Opci?n de recuantizado"
-
-#~ msgid "Shrink factor"
-#~ msgstr "Factor de reducci?n"
-
-#~ msgid "Subtitle to load"
-#~ msgstr "Subt?tulo a cargar"
-
-#~ msgid "TTF font to use"
-#~ msgstr "Fuente TTF a usar"
-
-#~ msgid "Subtitle selector"
-#~ msgstr "Selector de subt?tulo"
-
-#~ msgid "Subtitle file "
-#~ msgstr "Archivo de Subt?tulo "
-
-#~ msgid "Font (TTF)"
-#~ msgstr "Fuente (TTF)"
-
-#~ msgid "Encoding "
-#~ msgstr "Codificando "
-
-#~ msgid "Font Size"
-#~ msgstr "Tama?o fuente"
-
-#~ msgid "sub"
-#~ msgstr "sub"
-
-#~ msgid "font"
-#~ msgstr "fuente"
-
-#~ msgid "Ascii"
-#~ msgstr "Ascii"
-
-#, fuzzy
-#~ msgid "Select color"
-#~ msgstr "Seleccionar color"
-
-#, fuzzy
-#~ msgid "Select"
-#~ msgstr "Seleccionar"
-
-#~ msgid "Auto split"
-#~ msgstr "Partido autom?tico"
-
-#~ msgid "Delay in ms"
-#~ msgstr "Retraso en ms"
-
-#~ msgid "Force background"
-#~ msgstr "Forzar fondo"
-
-#~ msgid "TDeint param"
-#~ msgstr "Param. TDeint"
-
-#~ msgid "Field Order :"
-#~ msgstr "Orden de campo:"
-
-#~ msgid "Bottom Field First"
-#~ msgstr "Campo inf. primero"
-
-#~ msgid "Top Field First"
-#~ msgstr "Campo sup. primero"
-
-#~ msgid "Interpolate :"
-#~ msgstr "Interpolar:"
-
-#~ msgid "Type"
-#~ msgstr "Tipo"
-
-#~ msgid "Cubic Interpolation"
-#~ msgstr "Interpolaci?n c?bica"
-
-#~ msgid "Kernerl interpolation"
-#~ msgstr "Interpolaci?n Kernel"
-
-#~ msgid "MntMode"
-#~ msgstr "Modo Mnt"
-
-#~ msgid "4 field check"
-#~ msgstr "Comprobar 4 campo"
-
-#~ msgid "5 field check"
-#~ msgstr "Comprobar 5 campo"
-
-#~ msgid "4 field check (no average)"
-#~ msgstr "Comprobar 4 campo (no medio)"
-
-#~ msgid "5 field check (no average)"
-#~ msgstr "Comprobar 5 campo (no medio)"
-
-#~ msgid "Use Chroma to evalute"
-#~ msgstr "Usar Croma para evaluar"
-
-#~ msgid "Try weave "
-#~ msgstr "Probar onda"
-
-#~ msgid "Link"
-#~ msgstr "Enlazar"
-
-#~ msgid "Full linking"
-#~ msgstr "Enlazado completo"
-
-#~ msgid "Y to UV link"
-#~ msgstr "Enlazado de Y a UV"
-
-#~ msgid "UV to Y link"
-#~ msgstr "Enlazado de UV a Y"
-
-#~ msgid "Sharp :"
-#~ msgstr "Definir:"
-
-#~ msgid "AP type"
-#~ msgstr "Tipo AP"
-
-#~ msgid "Evaluate ALL frames"
-#~ msgstr "Evaluar todas las im?genes"
-
-#~ msgid "0 (read manual)"
-#~ msgstr "0 (leer manual)"
-
-#~ msgid "1 (read manual)"
-#~ msgstr "1 (leer manual)"
-
-#~ msgid "2 (read manual)"
-#~ msgstr "2 (leer manual)"
-
-#~ msgid "motion Threshold, Luma"
-#~ msgstr "Umbral de movimiento, Luma"
-
-#~ msgid "motion Threshold, Chroma"
-#~ msgstr "Umbral de movimiento, Croma"
-
-#~ msgid "Area Combing Threshold"
-#~ msgstr "Area combinando Umbral"
-
-#~ msgid "Combed Treshold"
-#~ msgstr "Umbral combinado"
-
-#~ msgid "Artefact Protection threshold "
-#~ msgstr "Umbral de protecci?n de defectos"
-
-#, fuzzy
-#~ msgid "Select Vob file to scan"
-#~ msgstr "Seleccionar archivo Vob para examinar"
-
-#, fuzzy
-#~ msgid "Select ifo file to use"
-#~ msgstr "Seleccionar archivo ifo para usar"
-
-#~ msgid "Select vobsub to write"
-#~ msgstr "Seleccionar vobsub para escribir"
-
-#~ msgid "Invalid vobname"
-#~ msgstr "Nombre vob inv?lido"
-
-#~ msgid "Please select or enter a valid vob name"
-#~ msgstr "Por favor seleccione o introduzca un nombre vob v?lido"
-
-#~ msgid "Invalid ifo"
-#~ msgstr "Ifo inv?lido"
-
-#~ msgid "Please select or enter a valid ifo file"
-#~ msgstr "Por favor seleccione o introduzca un archivo ifo v?lido"
-
-#~ msgid "Invalid vobsubname"
-#~ msgstr "Subnombre vob inv?lido"
-
-#~ msgid "Please select or enter a valid vobsub file"
-#~ msgstr "Por favor seleccione o introduzca un archivo vobsub v?lido"
-
-#~ msgid "Vob to Vobsub"
-#~ msgstr "Vob a Vobsub"
-
-#~ msgid "Vob :"
-#~ msgstr "Vob:"
-
-#~ msgid "Ifo :"
-#~ msgstr "Ifo:"
-
-#~ msgid "Output vobsub (.idx) :"
-#~ msgstr "Vobsub de salida (.idx):"
-
-#, fuzzy
-#~ msgid "XVCD encoding"
-#~ msgstr "Codificaci?n XVCD"
-
-#~ msgid "Constant Bitrate"
-#~ msgstr "Tasa de bits constante"
-
-#~ msgid "Dual pass"
-#~ msgstr "Pasada Doble"
-
-#~ msgid "Min bitrate (kbps) :"
-#~ msgstr "Tasa de bits m?n. (kbps):"
-
-#~ msgid "Max bitrate (kbps) :"
-#~ msgstr "Tasa de bits m?x. (kbps):"
-
-#~ msgid "Default mpeg"
-#~ msgstr "Mpeg por defecto"
-
-#, fuzzy
-#~ msgid "Tmpeng "
-#~ msgstr "Tmpeng "
-
-#, fuzzy
-#~ msgid "Anim?"
-#~ msgstr "Anime"
-
-#, fuzzy
-#~ msgid "K-VCD"
-#~ msgstr "K-VCD"
-
-#~ msgid "Gop Size  (12):"
-#~ msgstr "Tama?o de Gop (12):"
-
-#~ msgid "Use Xvid ratecontrol"
-#~ msgstr "Utilizar el control de tasa de bits de Xvid"
-
-#~ msgid "Save _Selection as JPEG images..."
-#~ msgstr "Guardar _selecci?n como im?genes JPEG..."
-
-#~ msgid "Zoom _4:1"
-#~ msgstr "Zoom _4:1"
-
-#, fuzzy
-#~ msgid "_Jump to Frame..."
-#~ msgstr "_Saltar a imagen..."
-
-#, fuzzy
-#~ msgid "Jump to _Time..."
-#~ msgstr "Saltar a _Tiempo..."
-
-#~ msgid "Show builtin support"
-#~ msgstr "Mostrar soporte incorporado"
-
-#, fuzzy
-#~ msgid "/0000000"
-#~ msgstr "/0000000"
-
-#, fuzzy
-#~ msgid "/00:00:00,000"
-#~ msgstr "/'0:00:00,000"
-
-#~ msgid "Incorrect output file"
-#~ msgstr "Archivo de salida incorrecto"
-
-#, fuzzy
-#~ msgid "Select SRT to save"
-#~ msgstr "Seleccionar SRT para guardar"
-
-#~ msgid "Select Glyoh to save"
-#~ msgstr "Seleccionar Glyoh para guardar"
-
-#~ msgid "No glyphs to save"
-#~ msgstr "No hay glifos para guardar"
-
-#, fuzzy
-#~ msgid "Select Directory"
-#~ msgstr "Seleccionar color"
-
-#, fuzzy
-#~ msgid "Select File"
-#~ msgstr "Seleccionar ?ndice .idx"
-
-#, fuzzy
-#~ msgid "_Subtitle file (ass/ssa)"
-#~ msgstr "Archivo de subt?tulo (ass/ssa)"
-
-#, fuzzy
-#~ msgid "_Line spacing"
-#~ msgstr "Espaciado de l?nea"
-
-#, fuzzy
-#~ msgid "_Font scale"
-#~ msgstr "Escala de fuente: "
-
-#, fuzzy
-#~ msgid "_Top margin"
-#~ msgstr "Margen superior"
-
-#, fuzzy
-#~ msgid "_Bottom margin"
-#~ msgstr "Margen inferior"
-
-#, fuzzy
-#~ msgid "threshold"
-#~ msgstr "Umbral"
-
-#, fuzzy
-#~ msgid "noise"
-#~ msgstr "Eliminar ruido"
-
-#, fuzzy
-#~ msgid "If pixel are closer than noise, they are considered to be the same"
-#~ msgstr ""
-#~ "Si los pixels son mas parecidos que el umbral de ruido, se consideran id"
-#~ "(c)nticos"
-
-#, fuzzy
-#~ msgid "show"
-#~ msgstr "Mostrar"
-
-#~ msgid "Discard Closer"
-#~ msgstr "Descartar mas cercano"
-
-#, fuzzy
-#~ msgid "PullDown dupe removal"
-#~ msgstr "Descartar duplicados"
-
-#, fuzzy
-#~ msgid "Fast (parial luma and chroma)"
-#~ msgstr "R?pido (parcial luma y croma)"
-
-#, fuzzy
-#~ msgid "Medium (full luma no chroma)"
-#~ msgstr "Medio (luma completa, no croma)"
-
-#, fuzzy
-#~ msgid "Threshold 1"
-#~ msgstr "Umbral"
-
-#, fuzzy
-#~ msgid "Threshold 2"
-#~ msgstr "Umbral"
-
-#, fuzzy
-#~ msgid "Strategy"
-#~ msgstr "Sin estrategia"
-
-#~ msgid "Field Order"
-#~ msgstr "Orden de Campos"
-
-#, fuzzy
-#~ msgid "Post Processing"
-#~ msgstr "Procesado posterior"
-
-#, fuzzy
-#~ msgid "Try backward"
-#~ msgstr "Probar campo anterior"
-
-#, fuzzy
-#~ msgid "Direct Threshold"
-#~ msgstr "Umbral directo"
-
-#, fuzzy
-#~ msgid "Backward Threshold"
-#~ msgstr "Umbral anterior"
-
-#~ msgid "Noise Threshold"
-#~ msgstr "Umbral de ruido"
-
-#, fuzzy
-#~ msgid "Post Proc Threshold"
-#~ msgstr "Umbral de procesado post."
-
-#, fuzzy
-#~ msgid "Use Chroma to decide"
-#~ msgstr "Usar croma para decisi?n"
-
-#, fuzzy
-#~ msgid "Show info"
-#~ msgstr "Mostrar"
-
-#~ msgid "Blend"
-#~ msgstr "Mezclar"
-
-#, fuzzy
-#~ msgid "Try reverse"
-#~ msgstr "?Intentar revertir?"
-
-#, fuzzy
-#~ msgid "Angle"
-#~ msgstr "Anime"
-
-#, fuzzy
-#~ msgid "Rotate Params"
-#~ msgstr "Girar"
-
-#, fuzzy
-#~ msgid "Luma Temporal Threshold"
-#~ msgstr "Umbral temporal"
-
-#, fuzzy
-#~ msgid "Chroma Temporal Threshold"
-#~ msgstr "Umbral Croma"
-
-#, fuzzy
-#~ msgid "Bottom Field first"
-#~ msgstr "Campo inf. primero"
-
-#, fuzzy
-#~ msgid "Order"
-#~ msgstr "Orden de Campos"
-
-#~ msgid "Select ecmascript to run "
-#~ msgstr "Seleccione ecmascript a ejecutar"
-
-#, fuzzy
-#~ msgid "Select AVI file..."
-#~ msgstr "Seleccionar archivo AVI..."
-
-#~ msgid ""
-#~ "This is to be used to undo packed vop on mpeg4.\n"
-#~ "Continue ?"
-#~ msgstr ""
-#~ "Esto se utiliza para deshacer el vop empaquetado en mpeg4.\n"
-#~ "?Continuar?"
-
-#, fuzzy
-#~ msgid "Select Avi file to write"
-#~ msgstr "Seleccione archivo AVI para escribir"
-
-#, fuzzy
-#~ msgid "Select OGM file to write"
-#~ msgstr "Seleccione archivo OGM para escribir"
-
-#~ msgid "Select workbench to save "
-#~ msgstr "Seleccione zona de trabajo para guardar"
-
-#, fuzzy
-#~ msgid "Select raw file to save "
-#~ msgstr "Seleccionar archivo raw para guardar"
-
-#~ msgid "Select AVI file to append..."
-#~ msgstr "Seleccionar archivo AVI para adjuntar..."
-
-#~ msgid "Select file to save audio"
-#~ msgstr "Seleccionar archivo para guardar sonido"
-
-#~ msgid "Select Jpeg sequence to save "
-#~ msgstr "Seleccionar secuencia JPEG para guardar"
-
-#~ msgid "Select BMP to save "
-#~ msgstr "Seleccionar BMP para guardar"
-
-#~ msgid "Select Jpeg to save "
-#~ msgstr "Seleccionar JPEG para guardar"
-
-#, fuzzy
-#~ msgid "Select file to save"
-#~ msgstr "Seleccionar archivo para guardar"
-
-#~ msgid "Select MP3 to load "
-#~ msgstr "Seleccionar MP3 para cargar"
-
-#~ msgid "Select AC3 to load "
-#~ msgstr "Seleccionar AC3 para cargar"
-
-#~ msgid "Select WAV to load "
-#~ msgstr "Seleccionar WAV para cargar"
-
-#, fuzzy
-#~ msgid "Select  file to save "
-#~ msgstr "Seleccionar archivo para guardar"
-
-#~ msgid "Are you sure ?"
-#~ msgstr "?Est? seguro?"
-
-#~ msgid "This will make trouble for avi files."
-#~ msgstr "Esto dar? problemas con archivos avi."
-
-#, fuzzy
-#~ msgid "External Wav"
-#~ msgstr "Wav externo"
-
-#, fuzzy
-#~ msgid "Audio source"
-#~ msgstr "Fuente de audio"
-
-#, fuzzy
-#~ msgid "External filename"
-#~ msgstr "Nombre no v?lido"
-
-#, fuzzy
-#~ msgid "Filename"
-#~ msgstr "_Archivo"
-
-#, fuzzy
-#~ msgid "Select 2nd audio Track"
-#~ msgstr "Elija pista de sonido"
-
-#~ msgid "Something very wrong happened when buildint joblist"
-#~ msgstr "Error totalmente inesperado al construir la lista de tareas"
-
-#~ msgid "Nothing to do."
-#~ msgstr "No hay nada para hacer."
-
-#~ msgid "There is no jobs stored, nothing to do"
-#~ msgstr "No hay tareas guardadas, nada para ejecutar"
-
-#~ msgid "Anim(c)"
-#~ msgstr "Anime"
-
-#~ msgid "Builtin support for"
-#~ msgstr "Soporte incorporado para"
-
-#~ msgid ""
-#~ "If an option is not checked, it means\n"
-#~ "you must RECOMPILE avidemux to have\n"
-#~ "support for it!"
-#~ msgstr ""
-#~ "Si una opci?n no est? marcada, indica\n"
-#~ "que debes RECOMPILAR avidemux para\n"
-#~ "soportarla"
-
-#~ msgid "X264"
-#~ msgstr "X264"
-
-#~ msgid "Arts"
-#~ msgstr "Arts"
-
-#~ msgid "Altivec"
-#~ msgstr "Altivec"
-
-#~ msgid "Mad"
-#~ msgstr "Mad"
-
-#~ msgid "A52"
-#~ msgstr "A52"
-
-#~ msgid "Win32"
-#~ msgstr "Win32"
-
-#~ msgid "Freetype"
-#~ msgstr "Freetype"
-
-#~ msgid "FAAD"
-#~ msgstr "FAAD"
-
-#~ msgid "libDCA/libDTS"
-#~ msgstr "libDCA/libDTS"
-
-#~ msgid "Title"
-#~ msgstr "T?tulo"
-
-#, fuzzy
-#~ msgid "label2"
-#~ msgstr "etiqueta2"
-
-#~ msgid "DGbob"
-#~ msgstr "DGbob"
-
-#~ msgid "Extra check"
-#~ msgstr "Test Extra"
-
-#~ msgid "BFF"
-#~ msgstr "BFF"
-
-#~ msgid "TFF"
-#~ msgstr "TFF"
-
-#~ msgid "Keep fps and frame #"
-#~ msgstr "Conservar fps e imagen #"
-
-#, fuzzy
-#~ msgid "Go to time"
-#~ msgstr "Ir a tiempo"
-
-#~ msgid "h"
-#~ msgstr "h"
-
-#~ msgid "s"
-#~ msgstr "s"
-
-#~ msgid "DVD Parameters"
-#~ msgstr "Par?metros DVD"
-
-#~ msgid "Encoding Type:"
-#~ msgstr "Tipo de codificaci?n"
-
-#~ msgid "Single pass:Bitrate"
-#~ msgstr "Una pasada: Bitrate"
-
-#~ msgid "Single pass:Quantizer"
-#~ msgstr "Una pasada: Cuantizador"
-
-#~ msgid "Two pass"
-#~ msgstr "Dos pasadas"
-
-#~ msgid "Bitrate (kb/s)"
-#~ msgstr "Bitrate (kbps)"
-
-#~ msgid "Encoding mode"
-#~ msgstr "Modo de codificaci?n"
-
-#~ msgid "Kernel Deinterlacer"
-#~ msgstr "Desentrelazador Kernel"
-
-#, fuzzy
-#~ msgid "VideoCodec"
-#~ msgstr "Codec Video"
-
-#~ msgid "FFmpeg Mpeg4"
-#~ msgstr "FFmpeg Mpeg4"
-
-#~ msgid "FFmpeg H263"
-#~ msgstr "FFmpeg H263"
-
-#~ msgid "FFmpeg H263+"
-#~ msgstr "FFmpeg H263+"
-
-#~ msgid "FFmpeg Huffyuv"
-#~ msgstr "FFmpeg Huffyuv"
-
-#~ msgid "Divx"
-#~ msgstr "DivX"
-
-#~ msgid "Mjpeg"
-#~ msgstr "Mjpeg"
-
-#~ msgid "Configure Codec"
-#~ msgstr "Configurar Codec"
-
-#~ msgid "MSmooth settings"
-#~ msgstr "Config. MSmooth"
-
-#~ msgid "High Quality :"
-#~ msgstr "Alta Calidad: "
-
-#~ msgid "Show Mask :"
-#~ msgstr "Mostrar mascara: "
-
-#~ msgid "Mpeg, Select audio"
-#~ msgstr "Mpeg, Seleccione sonido"
-
-#, fuzzy
-#~ msgid "File :"
-#~ msgstr "Archivo: "
-
-#~ msgid "Type :"
-#~ msgstr "Tipo: "
-
-#, fuzzy
-#~ msgid "Video stream :"
-#~ msgstr "Canal de video:"
-
-#, fuzzy
-#~ msgid "label5"
-#~ msgstr "etiqueta5"
-
-#, fuzzy
-#~ msgid "label6"
-#~ msgstr "etiqueta6"
-
-#, fuzzy
-#~ msgid "label7"
-#~ msgstr "etiqueta7"
-
-#~ msgid "<b>Input file</b>"
-#~ msgstr "<b>Archivo de entrada</b>"
-
-#~ msgid "Detected Audio :"
-#~ msgstr "Sonido detectado: "
-
-#~ msgid "Bitrate out of range"
-#~ msgstr "Bitrate fuera de rango"
-
-#~ msgid "choosing maxBitrate instead"
-#~ msgstr "seleccionando Bitrate m?ximo en su lugar"
-
-#~ msgid "choosing minBitrate instead"
-#~ msgstr "seleccionando Bitrate m?nimo en su lugar"
-
-#~ msgid "DVD FFmpeg codec settings"
-#~ msgstr "Config. codec DVD FFmpeg"
-
-#~ msgid "Target Bitrate (kb/s)   "
-#~ msgstr "Bitrate buscado (kbps)  "
-
-#~ msgid "Single Pass - Bitrate"
-#~ msgstr "Una pasada - Bitrate"
-
-#~ msgid "Single Pass - Quantizer"
-#~ msgstr "Una pasada - Quantizer"
-
-#~ msgid "Two Pass (filesize) "
-#~ msgstr "Dos pasadas (tama?o archivo)"
-
-#~ msgid "Two Pass (bitrate) "
-#~ msgstr "Dos pasadas (bitrate)"
-
-#~ msgid "<b>Encoding mode </b>"
-#~ msgstr "<b>Modo de codificaci?n </b>"
-
-#~ msgid "Minimum Bitrate (kb/s) "
-#~ msgstr "Bitrate m?nimo (kbps)"
-
-#~ msgid "Maximum Bitrate (kb/s)"
-#~ msgstr "Bitrate m?ximo (kbps)"
-
-#~ msgid "VCD: 40 kB"
-#~ msgstr "VCD: 40 kB"
-
-#~ msgid "SVCD: 112 kB"
-#~ msgstr "SVCD: 112 kB"
-
-#~ msgid "DVD: 224 kB"
-#~ msgstr "DVD: 224 kB"
-
-#~ msgid "<b>RateControl</b>"
-#~ msgstr "<b>Control de Tasa</b>"
-
-#~ msgid "<b>Interlacing</b>"
-#~ msgstr "<b>Entrelazado</b>"
-
-#~ msgid "HR-Tmpgenc"
-#~ msgstr "HR-Tmpgenc"
-
-#~ msgid "<b>Matrices</b>"
-#~ msgstr "<b>Matrices</b>"
-
-#~ msgid "For info, size is : "
-#~ msgstr "Para inf., tama?o es: "
-
-#~ msgid "<b>Indicative audio size</b>"
-#~ msgstr "<b>Tama?o de sonido indicativo</b>"
-
-#~ msgid "Left:"
-#~ msgstr "Izquierda:"
-
-#~ msgid "Right:"
-#~ msgstr "Derecha:"
-
-#~ msgid "Top:"
-#~ msgstr "Superior:"
-
-#~ msgid "Bottom:"
-#~ msgstr "Inferior:"
-
-#~ msgid "Blend removal / Hard pulldown removal"
-#~ msgstr "Quitar mezcla / Quitar Hard pulldown"
-
-#~ msgid "%"
-#~ msgstr "%"
-
-#~ msgid "Noise threshold :"
-#~ msgstr "Umbral de ruido: "
-
-#~ msgid "Identical threshold :"
-#~ msgstr "Umbral Id(c)ntico: "
-
-#, fuzzy
-#~ msgid "Audio settings"
-#~ msgstr "Config. sonido"
-
-#~ msgid "Mode (ignored for mono)"
-#~ msgstr "Modo (ignorado para mono)"
-
-#, fuzzy
-#~ msgid "AVI muxer options"
-#~ msgstr "Opciones de AVI"
-
-#~ msgid "Mux audio every"
-#~ msgstr "Mezclar sonido cada"
-
-#~ msgid "Split in packets of"
-#~ msgstr "Dividir en paquetes de"
-
-#, fuzzy
-#~ msgid "video frame(s)"
-#~ msgstr "ImBgen(es) de video"
-
-#~ msgid "bytes"
-#~ msgstr "bytes"
-
-#~ msgid "Autosplit file every"
-#~ msgstr "Auto dividir archivo cada"
-
-#~ msgid "megabytes"
-#~ msgstr "megabytes"
-
-#~ msgid "Load Defaults"
-#~ msgstr "Cargar Valores por Defecto"
-
-#~ msgid "Load the stored default settings for the codec"
-#~ msgstr "Carga los valores por defecto almacenados para el codec"
-
-#~ msgid "Save Defaults"
-#~ msgstr "Guardar Valores por Defecto"
-
-#~ msgid "Save the current codec configutasan as the stored default settings"
-#~ msgstr ""
-#~ "Guardar la config. actual del codec como Valores por Defecto guardados"
-
-#, fuzzy
-#~ msgid "Reset Defaults"
-#~ msgstr "Establecer valores por defecto"
-
-#~ msgid "Reload the initial default codec settings"
-#~ msgstr "Reestablecer los valores por defecto del codec iniciales"
-
-#~ msgid "Sample A/R "
-#~ msgstr "Muestra A/R"
-
-#~ msgid "Lavc PP Deint"
-#~ msgstr "Lavc PP Desent."
-
-#~ msgid "Convolution settings"
-#~ msgstr "Convolution config."
-
-#~ msgid "Chroma"
-#~ msgstr "Croma"
-
-#~ msgid "Mosaic"
-#~ msgstr "Mosaico"
-
-#~ msgid "Donal Graft MSharpen"
-#~ msgstr "MSharpen de Donal Graft"
-
-#~ msgid "Show Mask"
-#~ msgstr "Mostrar mascara"
-
-#~ msgid "Strength"
-#~ msgstr "Intensidad"
-
-#~ msgid "Dynamic Noise Reduction"
-#~ msgstr "Reducci?n Din?mica de Ru?do"
-
-#~ msgid "Dutasan:"
-#~ msgstr "Duraci?n:"
-
-#~ msgid "Resize for VCD/SVCD/...."
-#~ msgstr "Escalar para VCD/SVCD/..."
-
-#~ msgid "Destination Aspect Tasa :"
-#~ msgstr "Relaci?n de Aspecto de Destino: "
-
-#, fuzzy
-#~ msgid "VCD"
-#~ msgstr "VCD"
-
-#~ msgid "SVCD"
-#~ msgstr "SVCD"
-
-#~ msgid "DVD"
-#~ msgstr "DVD"
-
-#~ msgid "DVD, half D1"
-#~ msgstr "DVD, D1 mitad"
-
-#~ msgid "Decomb Telecide"
-#~ msgstr "Decomb Telecide"
-
-#~ msgid "Telecine 3:2"
-#~ msgstr "Telecine 3:2"
-
-#~ msgid "Decomb strategy"
-#~ msgstr "Estrategia Decomb"
-
-#~ msgid "No postprocessing"
-#~ msgstr "Sin procesado posterior"
-
-#~ msgid "Ignore chroma to decide"
-#~ msgstr "Ignorar croma para decisi?n"
-
-#~ msgid "Blend or interpolate"
-#~ msgstr "Mezclar o interpolar"
-
-#~ msgid "Interpolate"
-#~ msgstr "Interpolar"
-
-#~ msgid "Vorbis encoder settings"
-#~ msgstr "Config. codificador Vorbis"
-
-#~ msgid "<b>Mode :</b>"
-#~ msgstr "<b>Modo :</b>"
-
-#~ msgid "<b>Bitrate :</b>"
-#~ msgstr "<b>Bits p/seg: </b>"
-
-#~ msgid "<b>Quality :</b>"
-#~ msgstr "<b>Calidad: </b>"
-
-#~ msgid "CBR (bitrate based)"
-#~ msgstr "CBR (Tasa bits/s constante)"
-
-#~ msgid "VBR (Quality based)"
-#~ msgstr "CBR (Tasa bits/s variable)"
-
-#~ msgid "Mplayer PostProc options"
-#~ msgstr "Opciones de procesado post. de Mplayer"
-
-#~ msgid "Cycle"
-#~ msgstr "Ciclo"
-
-#~ msgid "Threshold2 "
-#~ msgstr "Umbral 2"
-
-#~ msgid "Lame Encoder Settings"
-#~ msgstr "Config. de codificador Lame"
-
-#~ msgid "Joint-Stereo"
-#~ msgstr "Estereo-fusionado"
-
-#~ msgid "<b>Bitrate:</b>"
-#~ msgstr "<b>Bits p/seg.:</b>"
-
-#~ msgid "<b>Mode:</b>"
-#~ msgstr "<b>Modo:</b>"
-
-#~ msgid "<b>Quality:</b>"
-#~ msgstr "<b>Calidad:</b>"
-
-#~ msgid "_Swap marks A and B if A > B"
-#~ msgstr "_Intercambiar marcas A y B si A > B"
-
-#, fuzzy
-#~ msgid "S_ave preferences on exit"
-#~ msgstr "_Guardar preferencias al salir"
-
-#~ msgid "_MPEG auto split (MB):"
-#~ msgstr "Auto dividir _MPEG (MB):"
-
-#~ msgid "_Use OpenDML (don't split large AVI files)"
-#~ msgstr "_Utilizar OpenDML (no parte archivos AVI grandes)"
-
-#~ msgid "_Reuse 2-pass log"
-#~ msgstr "_Reutilizar registro (log) para 2 pasada"
-
-#~ msgid "_Video output:"
-#~ msgstr "Salida de _Video:"
-
-#~ msgid "Enable multithreading : "
-#~ msgstr "Activar multihilo: "
-
-#~ msgid "MultiThread"
-#~ msgstr "Multihilo"
-
-#~ msgid "Threads"
-#~ msgstr "Hilos"
-
-#, fuzzy
-#~ msgid "FFmpeg encoding options"
-#~ msgstr "Opciones del codificador FFmpeg"
-
-#~ msgid "Set quantizer for a constant quantizer/quality encoding"
-#~ msgstr "Establecer cuantizador para un cuantizador/calidad constante"
-
-#~ msgid "Enable interlaced encoding"
-#~ msgstr "Activar codificaci?n entrelazada"
-
-#~ msgid "_Aspect tasa"
-#~ msgstr "Relaci?n de _Aspecto"
-
-#~ msgid ""
-#~ "Set MPEG-4 aspect tasa (warning: MPlayer supports it, but most other "
-#~ "players don't)"
-#~ msgstr ""
-#~ "Establecer relaci?n de aspecto MPEG-4 (aviso: Mplayer lo soporta, pero la "
-#~ "mayor?a del resto de reproductores no)"
-
-#~ msgid "ME method:"
-#~ msgstr "M(c)todo ME:"
-
-#~ msgid "Max I-frame interval:"
-#~ msgstr "Intervalo de Imagen-I mox."
-
-#~ msgid "Allow 4 motion vectors per macroblock (slightly better quality)"
-#~ msgstr ""
-#~ "Permitir 4 vectores de movimiento por MacroBloque (calidad ligeramente "
-#~ "mejor)"
-
-#~ msgid "MV0"
-#~ msgstr "MV0"
-
-#~ msgid "Try  to encode each MB with MV=<0,0> and choose the better one"
-#~ msgstr "Intentar codificar cada MB con MV=<0,0> y seleccionar el mejor"
-
-#~ msgid ""
-#~ "Motion estimation method, 0-3 currently ignores the amount of bits spent, "
-#~ "so quality may be low"
-#~ msgstr ""
-#~ "M(c)todo de estimacisn de movimiento, 0-3 actualmente ignora la cantidad "
-#~ "de bits utilizados, por lo que la calidad puede ser baja"
-
-#, fuzzy
-#~ msgid "0: None"
-#~ msgstr "0: Ninguno"
-
-#~ msgid "5: X1"
-#~ msgstr "5: X1"
-
-#~ msgid "Maximum interval between keyframes in frames"
-#~ msgstr "Intervalo m?ximo entre imagens clave"
-
-#~ msgid "Maximum number of B-frames between non B-frames, 0-2 is a sane range"
-#~ msgstr "N?mero m?ximo de Imagens-B entre Imagens no B, recomendado de 0 a 2"
-
-#~ msgid "Use quarter pixel motion compensation (useful at higher bitrates)"
-#~ msgstr ""
-#~ "Utilizar compensaci?n de movimiento de Quarter Pixel (?til con frec. de "
-#~ "bit altas)"
-
-#~ msgid "Prepass:"
-#~ msgstr "Prepase:"
-
-#~ msgid ""
-#~ "Comparison function for motion estimation pre pass. Tip: SAD is fast, "
-#~ "SATD is good"
-#~ msgstr ""
-#~ "Funci?n de comparaci?n para prepase de estimaci?n de movimiento. Nota: "
-#~ "SAD is r?pido, SATD is bueno"
-
-#~ msgid "0: SAD"
-#~ msgstr "0: SAD"
-
-#~ msgid "1: SSE"
-#~ msgstr "1: SSE"
-
-#~ msgid "2: SATD"
-#~ msgstr "2: SATD"
-
-#~ msgid "3: DCT"
-#~ msgstr "3: DCT"
-
-#~ msgid "4: PSNR"
-#~ msgstr "4: PSNR"
-
-#~ msgid "5: BIT"
-#~ msgstr "5: BIT"
-
-#~ msgid "6: RD"
-#~ msgstr "6: RD"
-
-#~ msgid "7: ZERO"
-#~ msgstr "7: ZERO"
-
-#~ msgid "Full pixel:"
-#~ msgstr "Pixel completo:"
-
-#~ msgid "Comparison function for full pel motion estimation"
-#~ msgstr "Funci?n de comparaci?n para estimaci?n completa de movimiento"
-
-#~ msgid "Subpixel:"
-#~ msgstr "Subpixel:"
-
-#~ msgid "Comparison function for sub pel motion estimation"
-#~ msgstr "Funci?n de comparaci?n para "
-
-#~ msgid "Macroblock:"
-#~ msgstr "MacroBloque:"
-
-#~ msgid ""
-#~ "Comparison  function for the macroblock decision, used only when "
-#~ "macroblock decision is set to 0"
-#~ msgstr ""
-#~ "Funci?n de comparaci?n para la decisi?n de MacroBloque, utilizado s?lo "
-#~ "cuando la decisi?n de MacroBloque se establece a 0"
-
-#~ msgid "Use chroma, too, currently doesn't work (correctly) with B-frames"
-#~ msgstr ""
-#~ "Utilizar croma, tambi(c)n, actualmente no funciona (correctamente) con "
-#~ "Imagens-B"
-
-#~ msgid "ME comparison function"
-#~ msgstr "Funcion de comparaci?n ME"
-
-#~ msgid "ME:"
-#~ msgstr "ME:"
-
-#~ msgid "Diamond type and size for motion estimation pre pass"
-#~ msgstr "Tipo de diamante y tama?o para prepase de estimaci?n de movimiento"
-
-#~ msgid "adaptive, size 3"
-#~ msgstr "adaptable, tama?o 3"
-
-#~ msgid "adaptive, size 2"
-#~ msgstr "adaptable, tama?o 2"
-
-#~ msgid "experimental"
-#~ msgstr "experimental"
-
-#~ msgid "normal, size 1"
-#~ msgstr "normal, tama?o 1"
-
-#~ msgid "normal, size 2"
-#~ msgstr "normal, tama?o 2"
-
-#~ msgid "Diamond type and size for motion estimation"
-#~ msgstr "Tipo de diamante y tama?o para estimaci?n de movimiento"
-
-#~ msgid "Diamond type and size"
-#~ msgstr "Tipo de diamante y tama?o"
-
-#~ msgid "Quantizer range - Min:"
-#~ msgstr "Rango de Cuantizador - M?n.:"
-
-#~ msgid ""
-#~ "Macroblock decision algorithm (high quality mode), encode each macroblock "
-#~ "in all modes and choose the best"
-#~ msgstr ""
-#~ "Algoritmo de elecci?n de MacroBloque (modo de alta calidad), codifica "
-#~ "cada MacroBloque en todos los modos y selecciona el mejor"
-
-#~ msgid "MPEG quantizers produce sharper picture (useful at higher bitrates)"
-#~ msgstr ""
-#~ "Cuantizadores MPEG producen imagen mas n?tidas (util a tasas de bits "
-#~ "altas)"
-
-#~ msgid ""
-#~ "Minimum quantizer, 1 is not recommended, should be 2 for normal MPEG-4 "
-#~ "encoding"
-#~ msgstr ""
-#~ "Cuantizador m?nimo, 1 no se recomienda, debe ser 2 para codificaci?n MPEG-"
-#~ "4 habitual"
-
-#~ msgid "Maximum quantizer, 10-31 should be a sane range"
-#~ msgstr "Cuantizador m?ximo, entre 10-31 es un valor adecuado"
-
-#~ msgid ""
-#~ "Trellis searched quantization will find the optimal encoding for each 8x8 "
-#~ "block"
-#~ msgstr ""
-#~ "Cuantizaci?n calculada por Trellis indicar? la codificaci?n ?ptima para "
-#~ "cada bloque de 8x8"
-
-#~ msgid "Rate distorted CBP"
-#~ msgstr "CBP Tasa distorsionada"
-
-#~ msgid "Rate distorted optimal coded block pattern"
-#~ msgstr "Bloque modelo ?ptimamente codificado con tasa distorsionada"
-
-#~ msgid ""
-#~ "Sane range: 0-0.3. Large values might look good on some monitors, but "
-#~ "horrible on others (TV, LCD...)"
-#~ msgstr ""
-#~ "Valores adecuados: 0-0.3. Valores m?s altos pueden verse bien en algunos "
-#~ "monitores pero mal en otros (TV, LCD...)"
-
-#~ msgid ""
-#~ "Sane range: 0-0.5. Large values help against blockiness, but may "
-#~ "introduce ringing/mosquito noise artifacts on sharp edges"
-#~ msgstr ""
-#~ "Valor adecuado: 0-0.5. Valores m?s altos pueden evitar im?genes con "
-#~ "reimagens, pero puede generar defectos de ruido en lineas de perfil"
-
-#~ msgid "Darkness masking:"
-#~ msgstr "Enmascarado zonas oscuras:"
-
-#~ msgid "Spatial complexity masking:"
-#~ msgstr "Enmascarado de complejidad espacial"
-
-#~ msgid "Temporal complexity masking:"
-#~ msgstr "Enmascarado de complejidad temporal"
-
-#~ msgid "Lumi masking:"
-#~ msgstr "Enmascarado Luminancia:"
-
-#~ msgid "P block masking:"
-#~ msgstr "Enmascarado Imagen P:"
-
-#~ msgid "Normalize adaptive quantization"
-#~ msgstr "Normalizar cuantizaci?n adaptable"
-
-#~ msgid ""
-#~ "Attempt  to adjust the per-MB quantizers to maintain the proper average "
-#~ "when using adaptive quantization (*masking)"
-#~ msgstr ""
-#~ "Intentar ajustarse a los l?mites por MB para mantener una media adecuada "
-#~ "utilizando cuantizaci?n adaptativa (*enmascarar)"
-
-#~ msgid "Luminance:"
-#~ msgstr "Luminancia:"
-
-#~ msgid "Chrominance:"
-#~ msgstr "Crominancia:"
-
-#~ msgid "DC"
-#~ msgstr "DC"
-
-#~ msgid "Consider also the dc coefficient"
-#~ msgstr "Considerar tambi(c)n el coeficiente dc"
-
-#~ msgid "Single coefficient elimination threshold"
-#~ msgstr "Umbral de eliminaci?n de coeficiente ?nico"
-
-#~ msgid "Masking"
-#~ msgstr "Enmascarar"
-
-#~ msgid "Max quantizer difference:"
-#~ msgstr "Diferencia m?xima de Cuantizador:"
-
-#~ msgid "Maximum  quantizer difference between I or P frames"
-#~ msgstr "Diferencia m?xima de Cuantizador entre Imagens I o P"
-
-#~ msgid ""
-#~ "Quantizer  gaussian blur, larger values will average the quantizer more "
-#~ "over time (slower change)"
-#~ msgstr ""
-#~ "Cuantizador de emborronado Gauss, valores m?s altos atenuar?n el "
-#~ "Cuantizador en el tiempo (menores cambios)"
-
-#~ msgid "Filesize tolerance (1 kb = 1000 bits). 1000-100000 is a sane range"
-#~ msgstr ""
-#~ "Tolerancia de tama?o de archivo (1 kb = 1000 bits). Es adecuado un valor "
-#~ "de 1000-100000"
-
-#~ msgid "8000"
-#~ msgstr "8000"
-
-#~ msgid "Ratecontrol"
-#~ msgstr "Control de Tasa"
-
-#~ msgid "MC Deint"
-#~ msgstr "Desent. MC"
-
-#~ msgid "1- Medium"
-#~ msgstr "1- Medio"
-
-#, fuzzy
-#~ msgid "Audio Encoder Settings"
-#~ msgstr "Configuraci?n del Codificador de Sonido"
-
-#~ msgid "ASS/SSA Subtitle"
-#~ msgstr "Subt?tulo ASS/SSA"
-
-#~ msgid "Preview filtered video in a new window"
-#~ msgstr "Previsualizar video filtrado en una nueva ventana"
-
-#~ msgid "Display filtered output in the main window"
-#~ msgstr "Mostrar salida filtrada en la ventana principal"
-
-#~ msgid "PSP (broken)"
-#~ msgstr "PSP (no funciona)"
-
-#~ msgid "Use linear blend ?"
-#~ msgstr "?Utilizar mezclado lineal?"
-
-#~ msgid "Could not decode the frame"
-#~ msgstr "No se pudo decodificar la imagen"
-
-#~ msgid "Something failed"
-#~ msgstr "Algo ha fallado"
-
-#~ msgid "Cannot encode frame"
-#~ msgstr "No se puede codificar imagen"
-
-#~ msgid "Select 2nd track"
-#~ msgstr "Seleccione pista 2"
-
-#~ msgid "Cannot save in process mode."
-#~ msgstr "No se puede guardar en modo proceso."
-
-#, fuzzy
-#~ msgid "Audio size :"
-#~ msgstr "Tama?o de sonido: "
-
-#, fuzzy
-#~ msgid "Select Mpeg file..."
-#~ msgstr "Seleccione archivo Mpeg..."
-
-#, fuzzy
-#~ msgid "Smart:Next B frame\n"
-#~ msgstr "Modo inteligente: Siguiente imagen-B\n"
-
-#, fuzzy
-#~ msgid "rt"
-#~ msgstr "rt"
-
-#, fuzzy
-#~ msgid "Not activated."
-#~ msgstr "No activado."
-
-#, fuzzy
-#~ msgid "nuv audio"
-#~ msgstr "Sonido nuv"
-
-#, fuzzy
-#~ msgid "Opening nuppel video"
-#~ msgstr "Abriendo video nuppel"
-
-#, fuzzy
-#~ msgid " Video : %x"
-#~ msgstr " V?deo : %x"
-
-#, fuzzy
-#~ msgid "DTS audio"
-#~ msgstr "Sonido DTS"
-
-#, fuzzy
-#~ msgid "Selecting VCD output profile"
-#~ msgstr "Seleccionar perfil de salida VCD"
-
-#, fuzzy
-#~ msgid "audio done, creating video bitstream\n"
-#~ msgstr "Sonido terminado, creando la pista de video\n"
-
-#, fuzzy
-#~ msgid "Slave waking\n"
-#~ msgstr "Iniciando esclavo\n"
-
-#, fuzzy
-#~ msgid "output"
-#~ msgstr "Salida"
-
-#, fuzzy
-#~ msgid "split-segment"
-#~ msgstr "Partir segmento"
-
-#, fuzzy
-#~ msgid "copy"
-#~ msgstr "copiar"
-
-#, fuzzy
-#~ msgid "none"
-#~ msgstr "ninguno"
-
-#, fuzzy
-#~ msgid "Got frame %d\n"
-#~ msgstr "Coger imagen %d\n"
-
-#~ msgid "menuitem2"
-#~ msgstr "menuitem2"
-
-#, fuzzy
-#~ msgid "menuitem3"
-#~ msgstr "menuitem1"
-
-#~ msgid "activate"
-#~ msgstr "activar "
-
-#, fuzzy
-#~ msgid "Video dutasan :%lu\n"
-#~ msgstr "Video dutasan :%lu\n"
-
-#, fuzzy
-#~ msgid "search_previous_black_frame1"
-#~ msgstr "buscar_imagen_negra_anterior1"
-
-#, fuzzy
-#~ msgid "search_next_black_frame1"
-#~ msgstr "siguiente_intra_imagen1"
-
-#, fuzzy
-#~ msgid "first_frame1"
-#~ msgstr "primera_imagen1"
-
-#, fuzzy
-#~ msgid "last_frame1"
-#~ msgstr "?ltima_imagen1"
-
-#, fuzzy
-#~ msgid "Append   : %d\n"
-#~ msgstr "Adjuntar : %d\n"
-
-#, fuzzy
-#~ msgid "Cannot find any video stream\n"
-#~ msgstr "No se puede encontrar ning?n canal de v?deo\n"
-
-#, fuzzy
-#~ msgid "DVDS"
-#~ msgstr "DVDS"
-
-#, fuzzy
-#~ msgid "I frame"
-#~ msgstr "Imagen I"
-
-#, fuzzy
-#~ msgid "P frame"
-#~ msgstr "Imagen P"
-
-#, fuzzy
-#~ msgid "B frame"
-#~ msgstr "Imagen B"
-
-#, fuzzy
-#~ msgid "D frame"
-#~ msgstr "Imagen D"
-
-#, fuzzy
-#~ msgid "Frame :%lu"
-#~ msgstr "Imagen :%lu"
-
-#~ msgid "gtk-dialog-question"
-#~ msgstr "gtk-dialog-question"
-
-#, fuzzy
-#~ msgid "gtk-no"
-#~ msgstr "gtk-no"
-
-#, fuzzy
-#~ msgid "gtk-yes"
-#~ msgstr "gtk-yes"
-
-#, fuzzy
-#~ msgid "buttonYes"
-#~ msgstr "buttonYes"
-
-#, fuzzy
-#~ msgid "buttonNo"
-#~ msgstr "buttonNo"
-
-#~ msgid "gtk-dialog-info"
-#~ msgstr "gtk-dialog-info"
-
-#, fuzzy
-#~ msgid "gtk-dialog-error"
-#~ msgstr "gtk-dialog-error"
-
-#, fuzzy
-#~ msgid "sse"
-#~ msgstr "sse"
-
-#, fuzzy
-#~ msgid "filters"
-#~ msgstr "filtros"
-
-#, fuzzy
-#~ msgid "svcd-res"
-#~ msgstr "Res. svcd"
-
-#, fuzzy
-#~ msgid "begin"
-#~ msgstr "comenzar"
-
-#, fuzzy
-#~ msgid "set end frame"
-#~ msgstr "Establecer imagen final"
-
-#, fuzzy
-#~ msgid "save as dvd ps stream"
-#~ msgstr "guardar como formato dvd ps"
-
-#, fuzzy
-#~ msgid "save raw video stream (mpeg/... ) "
-#~ msgstr "Guardar stream crudo de video"
-
-#, fuzzy
-#~ msgid "info"
-#~ msgstr "Inf. Video"
-
-#, fuzzy
-#~ msgid "quit"
-#~ msgstr "salir"
-
-#, fuzzy
-#~ msgid "exit avidemux"
-#~ msgstr "Salir de avidemux"
-
-#, fuzzy
-#~ msgid "Video\n"
-#~ msgstr "V?deo\n"
-
-#, fuzzy
-#~ msgid "Open File"
-#~ msgstr "Abrir video"
-
-#, fuzzy
-#~ msgid "\\avidemux"
-#~ msgstr "\\avidemux"
-
-#, fuzzy
-#~ msgid "Filter"
-#~ msgstr "Filtro"
-
-#, fuzzy
-#~ msgid "crop"
-#~ msgstr "cortar"
-
-#, fuzzy
-#~ msgid "resize"
-#~ msgstr "escalar"
-
-#, fuzzy
-#~ msgid "Deinterlace"
-#~ msgstr "Desentrelazado"
-
-#, fuzzy
-#~ msgid "MPlayer hue"
-#~ msgstr "Mplayer hue"
-
-#, fuzzy
-#~ msgid "delta"
-#~ msgstr "delta"
-
-#, fuzzy
-#~ msgid "MPlayer delogo"
-#~ msgstr "Quitar logo (Mplayer)"
-
-#, fuzzy
-#~ msgid "animatedmenu"
-#~ msgstr "men?animado"
-
-#, fuzzy
-#~ msgid "keyframe\n"
-#~ msgstr "Imagenclave\n"
-
-#, fuzzy
-#~ msgid " is not activated\n"
-#~ msgstr " si no es activado\n"
-
-#, fuzzy
-#~ msgid " No activated\n"
-#~ msgstr "No activado\n"
-
-#, fuzzy
-#~ msgid "Build VBR failed!\n"
-#~ msgstr "?Construcci?n de mapa de tiempo VBR fallida!\n"
-
-#, fuzzy
-#~ msgid "markerA"
-#~ msgstr "marcadorA"
-
-#, fuzzy
-#~ msgid "markerB"
-#~ msgstr "marcadorB"
-
-#, fuzzy
-#~ msgid "currentFrame"
-#~ msgstr "imagenActual"
-
-#, fuzzy
-#~ msgid "delete"
-#~ msgstr "borrar"
-
-#, fuzzy
-#~ msgid "loadFilters"
-#~ msgstr "cargarFiltros"
-
-#, fuzzy
-#~ msgid "goToTime"
-#~ msgstr "irATiempo"
-
-#, fuzzy
-#~ msgid "rebuildIndex"
-#~ msgstr "reconstruir?ndice"
-
-#, fuzzy
-#~ msgid "process"
-#~ msgstr "Procesar"
-
-#, fuzzy
-#~ msgid "codec"
-#~ msgstr "codec"
-
-#, fuzzy
-#~ msgid "AvidemuxAudio"
-#~ msgstr "SonidoAvidemux"
-
-#, fuzzy
-#~ msgid "Saving Audio \"%s\"\n"
-#~ msgstr "Guardando Sonido \"%s\"\n"
-
-#, fuzzy
-#~ msgid "AvidemuxVideo"
-#~ msgstr "AvidemuxV?deo"
-
-#, fuzzy
-#~ msgid "param1"
-#~ msgstr "param1"
-
-#, fuzzy
-#~ msgid "param2"
-#~ msgstr "param2"
-
-#, fuzzy
-#~ msgid "autogain"
-#~ msgstr "autoganancia"
-
-#, fuzzy
-#~ msgid "index"
-#~ msgstr "?ndice"
-
-#, fuzzy
-#~ msgid "Opening index \n"
-#~ msgstr "Abriendo ?ndice\n"
-
-#, fuzzy
-#~ msgid "newfps"
-#~ msgstr "Cambiar fps"
-
-#, fuzzy
-#~ msgid "InternalCache"
-#~ msgstr "CacheInterno"
-
-#, fuzzy
-#~ msgid "D3D: next frame\n"
-#~ msgstr "D3D: Siguiente imagen\n"
-
-#, fuzzy
-#~ msgid "frame %d:"
-#~ msgstr "Imagen %d:"
-
-#, fuzzy
-#~ msgid "master"
-#~ msgstr "principal"
-
-#, fuzzy
-#~ msgid "avidemux"
-#~ msgstr "avidemux"
-
-#, fuzzy
-#~ msgid "B Frame"
-#~ msgstr "Imagen B:"
-
-#, fuzzy
-#~ msgid "Audio fourcc:%d (%x)\n"
-#~ msgstr "Sonido fourcc:%d (%x)\n"
-
-#, fuzzy
-#~ msgid "Socket failed\n"
-#~ msgstr "La conexi?n fall?\n"
-
-#, fuzzy
-#~ msgid "Go to Frame"
-#~ msgstr "Ir a Imagen"
-
-#, fuzzy
-#~ msgid "Done!"
-#~ msgstr "Hecho"
-
-#, fuzzy
-#~ msgid "1500000"
-#~ msgstr "1500000"
-
-#, fuzzy
-#~ msgid "9900000"
-#~ msgstr "9900000"
-
-#, fuzzy
-#~ msgid "5900000"
-#~ msgstr "5900000"
-
-#, fuzzy
-#~ msgid "device.audio.alsa_device"
-#~ msgstr "unidad.sonido.unidad.alsa"
-
-#, fuzzy
-#~ msgid "XSVCD"
-#~ msgstr "XSVCD"
-
-#, fuzzy
-#~ msgid "XDVD"
-#~ msgstr "XDVD"
-
-#, fuzzy
-#~ msgid ""
-#~ "\n"
-#~ " Process mode\n"
-#~ msgstr ""
-#~ "\n"
-#~ " Modo de proceso\n"
-
-#, fuzzy
-#~ msgid "Info\n"
-#~ msgstr "Info.\n"
-
-#, fuzzy
-#~ msgid "mpeg video"
-#~ msgstr "Video mpeg"
-
-#~ msgid "Save as dual audio avi"
-#~ msgstr "Guardar como avi de doble canal de sonido"
-
-#~ msgid "Export as mpeg video"
-#~ msgstr "Exportar como video mpg"
-
-#~ msgid "XVCD (ffmpeg Mpeg1)"
-#~ msgstr "XVCD (ffmpeg Mpeg1)"
-
-#~ msgid "External mpeg (mp2/mp3)"
-#~ msgstr "Mpeg externo (mp2/mp3)"
-
-#~ msgid "Index mpeg"
-#~ msgstr "Indizar mpeg"
-
-#~ msgid "Cut Wizard"
-#~ msgstr "Ayudante de Corte"
-
-#~ msgid "Audio Device"
-#~ msgstr "Dispositivo de Audio"
-
-#~ msgid " B:-1"
-#~ msgstr " B:-1"



From mean at mail.berlios.de  Sun Feb  3 13:04:20 2008
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sun, 3 Feb 2008 13:04:20 +0100
Subject: [Avidemux-svn-commit] r3788 - in
	branches/avidemux_2.4_branch/avidemux: ADM_filter
	ADM_userInterfaces/ADM_GTK/ADM_dialog
	ADM_userInterfaces/ADM_GTK/ADM_filters
	ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk
	ADM_userInterfaces/ADM_GTK/glade
	ADM_userInterfaces/ADM_NONE/ADM_dialog
	ADM_userInterfaces/ADM_QT4/ADM_dialog
	ADM_userInterfaces/ADM_commonUI ADM_videoFilter
Message-ID: <200802031204.m13C4KUd009861@sheep.berlios.de>

Author: mean
Date: 2008-02-03 13:04:10 +0100 (Sun, 03 Feb 2008)
New Revision: 3788

Modified:
   branches/avidemux_2.4_branch/avidemux/ADM_filter/filter.cpp
   branches/avidemux_2.4_branch/avidemux/ADM_filter/video_filters.h
   branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_SwissArmyKnife.cpp
   branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_eraser.cpp
   branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_flyDialog.cpp
   branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_particle.cpp
   branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_threshold.cpp
   branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager.cpp
   branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/ADM_jogshuttle.cpp
   branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/ADM_jogshuttle.h
   branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/mediactrl.c
   branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/glade/eraser.glade
   branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/glade/particle.glade
   branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/glade/swissarmyknife.glade
   branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/glade/threshold.glade
   branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_NONE/ADM_dialog/DIA_flyDialog.cpp
   branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_NONE/ADM_dialog/DIA_none.cpp
   branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_none.cpp
   branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/T_flyDialog.cpp
   branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flyDialog.cpp
   branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flyDialog.h
   branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flyEraser.cpp
   branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flyEraser.h
   branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flyParticle.cpp
   branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flyParticle.h
   branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flySwissArmyKnife.cpp
   branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flySwissArmyKnife.h
   branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flyThreshold.cpp
   branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flyThreshold.h
   branches/avidemux_2.4_branch/avidemux/ADM_videoFilter/ADM_vidComputeAverage.cpp
   branches/avidemux_2.4_branch/avidemux/ADM_videoFilter/ADM_vidEraser.cpp
   branches/avidemux_2.4_branch/avidemux/ADM_videoFilter/ADM_vidEraser.h
   branches/avidemux_2.4_branch/avidemux/ADM_videoFilter/ADM_vidParticle.cpp
   branches/avidemux_2.4_branch/avidemux/ADM_videoFilter/ADM_vidParticle.h
   branches/avidemux_2.4_branch/avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp
   branches/avidemux_2.4_branch/avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.h
   branches/avidemux_2.4_branch/avidemux/ADM_videoFilter/ADM_vidThreshold.cpp
   branches/avidemux_2.4_branch/avidemux/ADM_videoFilter/ADM_vidThreshold.h
Log:
[CMG] Chris Mc Gregor patch update

Modified: branches/avidemux_2.4_branch/avidemux/ADM_filter/filter.cpp
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_filter/filter.cpp	2008-02-03 09:40:17 UTC (rev 3787)
+++ branches/avidemux_2.4_branch/avidemux/ADM_filter/filter.cpp	2008-02-03 12:04:10 UTC (rev 3788)
@@ -212,6 +212,13 @@
 
 }
 
+FILTER * getCurrentVideoFilterList (uint32_t * count)
+{
+    if (count)
+        *count = nb_active_filter;
+    return videofilters;
+}
+
 //
 //	Parse the list of active filters, delete them et recreate them with (new ?) configuration
 //
@@ -288,20 +295,25 @@
 
 
 */
+const FILTER_ENTRY * filterGetEntryFromTag (VF_FILTERS tag)
+{
+    ADM_assert(tag!=VF_INVALID);
+    for(unsigned int i=0;i<allfilters.size();i++)
+    {
+        if(tag==allfilters[i].tag)
+        {
+            return &(allfilters[i]);
+        }
+    }
+    ADM_assert(0);
+    return NULL;                      
+}
+
 const char  *filterGetNameFromTag(VF_FILTERS tag)
 {
-
-                        ADM_assert(tag!=VF_INVALID);
-                        for(unsigned int i=0;i<allfilters.size();i++)
-                                {
-                                        if(tag==allfilters[i].tag)
-                                                {
-                                                        return allfilters[i].name;
-                                                        
-                                                }
-                                }
-                        ADM_assert(0);
-                        return NULL;                      
+    const FILTER_ENTRY * entry = filterGetEntryFromTag (tag);
+    ADM_assert(entry);
+    return entry->name;
 }
 /*____________________________________
 	Save and load current set of filters

Modified: branches/avidemux_2.4_branch/avidemux/ADM_filter/video_filters.h
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_filter/video_filters.h	2008-02-03 09:40:17 UTC (rev 3787)
+++ branches/avidemux_2.4_branch/avidemux/ADM_filter/video_filters.h	2008-02-03 12:04:10 UTC (rev 3788)
@@ -172,7 +172,10 @@
 AVDMGenericVideoStream *getFirstVideoFilter( uint32_t frameStart, uint32_t nbFrame);
 AVDMGenericVideoStream *getFirstVideoFilter( void);
 AVDMGenericVideoStream *getFirstCurrentVideoFilter( void);
-  
+FILTER * getCurrentVideoFilterList (uint32_t * count);
+const FILTER_ENTRY * filterGetEntryFromTag (VF_FILTERS tag);
+const char * filterGetNameFromTag(VF_FILTERS tag);
+
   void	filterSetPostProc( void );
   
 #ifdef USE_LIBXML2

Modified: branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_SwissArmyKnife.cpp
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_SwissArmyKnife.cpp	2008-02-03 09:40:17 UTC (rev 3787)
+++ branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_SwissArmyKnife.cpp	2008-02-03 12:04:10 UTC (rev 3788)
@@ -38,8 +38,13 @@
 #include "DIA_flyDialog.h"
 #include "DIA_flySwissArmyKnife.h"
 #include "ADM_userInterfaces/ADM_commonUI/DIA_factory.h" // for diaElemMenu etc.
+#include "ADM_filter/video_filters.h"
 
+#undef _
+#define _(_s) QT_TR_NOOP(_s)
+
 /********************************************************************/
+
 static GtkWidget *create_swiss_army_knife_dialog (void);
 static GtkWidget *dialog = 0;
 
@@ -59,10 +64,23 @@
     if (event->type != GDK_BUTTON_PRESS)
         return FALSE;
 
-    uint32_t x = static_cast <uint32_t> (event->x);
-    uint32_t y = static_cast <uint32_t> (event->y);
+    flySwissArmyKnife * myFly = static_cast <flySwissArmyKnife *> (data);
 
-    flySwissArmyKnife * myFly = static_cast <flySwissArmyKnife *> (data);
+    uint32_t x, y;
+
+    float zoom = myFly->getZoom();
+    if (zoom == 1.0)
+    {
+        x = static_cast <uint32_t> (event->x);
+        y = static_cast <uint32_t> (event->y);
+    }
+    else
+    {
+        zoom = 1 / zoom;
+        x = static_cast <uint32_t> (event->x * zoom + .5);
+        y = static_cast <uint32_t> (event->y * zoom + .5);
+    }
+
     ADMImage * image = event->button == 1
         ? myFly->getInputImage() : myFly->getOutputImage();
 
@@ -117,7 +135,7 @@
 
 /********************************************************************/
 
-void alphaRecalcOther (GtkSpinButton * spinbutton, gpointer user_data)
+static void alphaRecalcOther (GtkSpinButton * spinbutton, gpointer user_data)
 {
     static int alpha_lock = 0;
 
@@ -140,6 +158,8 @@
     --alpha_lock;
 }
 
+/********************************************************************/
+
 struct PixelValueScalingInfo
 {
     GtkAdjustment * addAdjustment;
@@ -168,7 +188,9 @@
     }
 };
 
-void updateScalingStuff (GtkAdjustment * adj, gpointer user_data)
+/********************************************************************/
+
+static void updateScalingStuff (GtkAdjustment * adj, gpointer user_data)
 {
     static int scaling_lock = 0;
 
@@ -294,7 +316,9 @@
     --scaling_lock;
 }
 
-void inputTypeChange (GtkComboBox * combo, gpointer user_data)
+/********************************************************************/
+
+static void inputTypeChange (GtkComboBox * combo, gpointer user_data)
 {
     flySwissArmyKnife * myFly = static_cast <flySwissArmyKnife *> (user_data);
     const MenuMapping * mm = myFly->lookupMenu ("inputTypeMenu");
@@ -350,10 +374,14 @@
              TRUE, 0, 0, max_x, max_y);
     }
 
+    myFly->download();
+    myFly->pushParam();
     myFly->sliderChanged();
 }
 
-void previewEnableButton (GtkToggleButton * button, gpointer user_data)
+/********************************************************************/
+
+static void previewEnableButton (GtkToggleButton * button, gpointer user_data)
 {
     flySwissArmyKnife * myFly = static_cast <flySwissArmyKnife *> (user_data);
     bool isActive = gtk_toggle_button_get_active (button);
@@ -366,6 +394,8 @@
     {
         gtk_widget_hide (previewDisabled);
         gtk_widget_show (previewVideo);
+        myFly->download();
+        myFly->pushParam();
         myFly->sliderChanged();
     }
     else
@@ -375,6 +405,8 @@
     }
 }
 
+/********************************************************************/
+
 void flySwissArmyKnife::updateConfigDescription (bool do_download)
 {
     if (do_download)
@@ -383,12 +415,80 @@
                         ADMVideoSwissArmyKnife::getConf (&param, true));
 }
 
-void updateConfigDescription (GtkSpinButton * button, gpointer user_data)
+/********************************************************************/
+
+static void updateConfigDescription (GtkSpinButton * button,
+                                     gpointer user_data)
 {
     flySwissArmyKnife * myFly = static_cast <flySwissArmyKnife *> (user_data);
     myFly->updateConfigDescription (true);
 }
 
+/********************************************************************/
+
+static void previewOutputMenuChange (GtkComboBox * combo, gpointer user_data)
+{
+    flySwissArmyKnife * myFly = static_cast <flySwissArmyKnife *> (user_data);
+    uint32_t index = gtk_combo_box_get_active (combo);
+    uint32_t filter_count;
+    FILTER * filters = getCurrentVideoFilterList (&filter_count);
+    FILTER * filter = filters + index;
+    VF_FILTERS tag = filter->tag;
+
+    gchar * activestr = gtk_combo_box_get_active_text (combo);
+
+    printf ("user selected preview of #%d = %s (%d) @%p (was %p)\n",
+            index, activestr, tag, filter->filter, myFly->getSource());
+
+    if (strncmp (activestr, "XX ", 3) == 0)
+    {
+        printf ("selected preview source has different dimensions - "
+                "forcing selection to current filter\n");
+        gtk_combo_box_set_active (combo, myFly->this_filter_index);
+    }
+    else
+    {
+        flySwissArmyKnife::PreviewMode mode;
+        if (index == myFly->this_filter_index)
+            mode = flySwissArmyKnife::PREVIEWMODE_THIS_FILTER;
+        else if (index > myFly->this_filter_index)
+            mode = flySwissArmyKnife::PREVIEWMODE_LATER_FILTER;
+        else // if (index < myFly->this_filter_index)
+            mode = flySwissArmyKnife::PREVIEWMODE_EARLIER_FILTER;
+
+        myFly->changeSource (filter->filter, mode);
+    }
+
+    g_free (activestr);
+}
+
+/********************************************************************/
+
+static gboolean preview_video_configured (GtkWidget * widget,
+                                          GdkEventConfigure * event,
+                                          gpointer user_data)
+{
+    fprintf (stderr, "preview_configured: now %dx%d @ +%d+%d\n",
+             event->width, event->height, event->x, event->y);
+
+    if (event->x == 1 && event->y == 1)
+        return FALSE;
+
+    flySwissArmyKnife * myFly = static_cast <flySwissArmyKnife *> (user_data);
+    myFly->recomputeSize();
+
+    gint scaled_width, scaled_height;
+    gtk_widget_get_size_request (widget, &scaled_width, &scaled_height);
+    GtkWidget * previewVideo = WID(previewVideo);
+    gtk_widget_set_size_request (widget == previewVideo ? WID(previewDisabled)
+                                 : previewVideo,
+                                 scaled_width, scaled_height);
+
+    return FALSE;
+}
+
+/********************************************************************/
+
 uint8_t DIA_SwissArmyKnife (AVDMGenericVideoStream * in,
                             ADMVideoSwissArmyKnife * sakp,
                             SWISSARMYKNIFE_PARAM * param,
@@ -403,7 +503,6 @@
     gtk_register_dialog (dialog);
     gtk_window_set_title (GTK_WINDOW (dialog),
                           QT_TR_NOOP("Swiss Army Knife Configuration"));
-    gtk_widget_set_size_request (WID(previewDisabled), width, height);
 
     // Fix up a bunch of things that Glade can't do.  This is less efficient
     // than just editing the Glade output, but it's not that big a deal and
@@ -447,6 +546,20 @@
                                  WID(previewVideo), WID(previewSlider),
                                  GTK_DIALOG(dialog), sakp, param,
                                  menu_mapping, menu_mapping_count);
+
+    gint scaled_width, scaled_height;
+    gtk_widget_get_size_request (WID(previewVideo),
+                                 &scaled_width, &scaled_height);
+    gtk_widget_set_size_request (WID(previewDisabled),
+                                 scaled_width, scaled_height);
+
+    g_signal_connect (GTK_OBJECT (WID(previewVideo)), "configure-event",
+                      GTK_SIGNAL_FUNC (preview_video_configured),
+                      gpointer (myDialog));
+    g_signal_connect (GTK_OBJECT (WID(previewDisabled)), "configure-event",
+                      GTK_SIGNAL_FUNC (preview_video_configured),
+                      gpointer (myDialog));
+
     myDialog->upload();
     myDialog->sliderChanged();
 
@@ -464,6 +577,7 @@
 
     CNX (constantValueSpinButton, "value_changed");
     CNX (rollingAvgAlphaDenomSpinButton, "value_changed");
+    CNX (rollingAvgLookaheadSpinButton, "value_changed");
     CNX (rollingAvgInitTypeMenu, "changed");
     CNX (rollingAvgInitStartSpinButton, "value_changed");
     CNX (rollingAvgInitEndSpinButton, "value_changed");
@@ -534,8 +648,8 @@
     // Reshuffle what is and isn't displayed when the user selects a different
     // input.
 
-    g_signal_connect(GTK_OBJECT(WID(inputTypeMenu)), "changed",
-                     GTK_SIGNAL_FUNC(inputTypeChange), gpointer(myDialog));
+    g_signal_connect (GTK_OBJECT(WID(inputTypeMenu)), "changed",
+                      GTK_SIGNAL_FUNC(inputTypeChange), gpointer(myDialog));
     inputTypeChange (GTK_COMBO_BOX(WID(inputTypeMenu)), gpointer(myDialog));
 
     // preview stuff:
@@ -561,15 +675,67 @@
                       gpointer(myDialog));
 #endif
 
+    GtkWidget * previewOutputMenu = WID(previewOutputMenu);
+    uint32_t filter_count;
+    FILTER * filters = getCurrentVideoFilterList (&filter_count);
+    int32_t active = -1;
+
+    // The " + (active < 0)" below is a bit of a hack.  We know that in
+    // on_action() in gui_filtermanager.cpp, case A_ADD, the new filter-to-be
+    // is added to the filter list without incrementing nb_active_filter yet.
+    // So if we get to the end of the list and haven't yet found the filter
+    // that we're configuring, we know it's a new one and therefore that it is
+    // one past the apparent end of the list.  It's not a clean solution, but
+    // it seems like the cleanEST solution.
+
+    for (uint32_t i = 0; i < filter_count + (active < 0); i++)
+    {
+        const char * name
+            = (i == 0) ? "(input)" : filterGetNameFromTag (filters [i].tag);
+        bool free_name = false;
+                                   
+        FILTER * filter = filters + i;
+        AVDMGenericVideoStream * source = filter->filter;
+        uint32_t w = source->getInfo()->width;
+        uint32_t h = source->getInfo()->height;
+        if (w != width || h != height)
+        {
+            name = g_strconcat ("XX ", name, " XX", NULL);
+            free_name = true;
+        }
+
+        printf ("filter [%d] = %s (%d) @ %p; %dx%d\n",
+                i, name, filter->tag, source, w, h);
+        gtk_combo_box_append_text (GTK_COMBO_BOX (previewOutputMenu), name);
+        if (filter->filter == myDialog->getSource())
+        {
+            gtk_combo_box_set_active (GTK_COMBO_BOX (previewOutputMenu), i);
+            printf ("\tfilter [%d] is being configured now\n", i);
+            active = i;
+        }
+
+        if (free_name)
+            g_free (const_cast <char *> (name));
+    }
+
+    ADM_assert (active >= 0);
+    myDialog->this_filter_index = active;
+
+    g_signal_connect (GTK_OBJECT(previewOutputMenu), "changed",
+                      GTK_SIGNAL_FUNC(previewOutputMenuChange),
+                      gpointer(myDialog));
+
     uint8_t ret = 0;
     int response = gtk_dialog_run(GTK_DIALOG(dialog));
 
     if (response == GTK_RESPONSE_OK)
     {
         myDialog->download();
-        myDialog->getParam (param);
+        myDialog->pushParam();
         ret = 1;
     }
+    else
+        myDialog->restoreParam();
 
     gtk_unregister_dialog(dialog);
     gtk_widget_destroy(dialog);
@@ -581,6 +747,8 @@
     return ret;
 }
 
+/********************************************************************/
+
 void frame_changed (GtkRange *, gpointer user_data)
 {
     flySwissArmyKnife * myDialog
@@ -589,6 +757,8 @@
     myDialog->sliderChanged();
 }
 
+/********************************************************************/
+
 void gui_update (GtkObject *, gpointer user_data)
 {
     if (lock)
@@ -600,6 +770,8 @@
     myDialog->update();
 }
 
+/********************************************************************/
+
 gboolean gui_draw (GtkWidget * widget, GdkEventExpose * event, gpointer user_data)
 {
     flySwissArmyKnife * myDialog
@@ -608,7 +780,7 @@
     return TRUE;
 }
 
-/**************************************/
+/********************************************************************/
 
 uint8_t flySwissArmyKnife::upload (void)
 {
@@ -634,6 +806,9 @@
     gtk_spin_button_set_value
         (GTK_SPIN_BUTTON(WID(rollingAvgAlphaSpinButton)),
          param.memory_constant_alpha);
+    gtk_spin_button_set_value
+        (GTK_SPIN_BUTTON(WID(rollingAvgLookaheadSpinButton)),
+         param.lookahead_n_frames);
     gtk_combo_box_set_active
         (GTK_COMBO_BOX(WID(rollingAvgInitTypeMenu)), param.init_by_rolling);
     gtk_spin_button_set_value
@@ -668,6 +843,8 @@
     return 1;
 }
 
+/********************************************************************/
+
 uint8_t flySwissArmyKnife::download (void)
 {
     getMenuValues();
@@ -702,6 +879,9 @@
     param.memory_constant_alpha
         = gtk_spin_button_get_value
         (GTK_SPIN_BUTTON(WID(rollingAvgAlphaSpinButton)));
+    param.lookahead_n_frames
+        = gtk_spin_button_get_value_as_int
+        (GTK_SPIN_BUTTON(WID(rollingAvgLookaheadSpinButton)));
     param.init_by_rolling
         = gtk_combo_box_get_active
         (GTK_COMBO_BOX(WID(rollingAvgInitTypeMenu)));
@@ -737,6 +917,8 @@
     return 1;
 }
 
+/********************************************************************/
+
 void flySwissArmyKnife::wipeOutputBuffer ()
 {
     // printf ("wiping output buffer\n");
@@ -755,6 +937,8 @@
     memset (VPLANE (_yuvBufferOut), 128, pixelcount >> 2);
 }
 
+/********************************************************************/
+
 // The following was generated by glade from swissarmyknife.glade once upon a
 // time (in fact, many times, since it took quite a few tries to get it right!
 // :-).  Thus far, I've avoided editing it, so regenerating the code from
@@ -824,6 +1008,11 @@
   GtkWidget *rollingAvgAlphaEqualsLabel;
   GtkObject *rollingAvgAlphaDenomSpinButton_adj;
   GtkWidget *rollingAvgAlphaDenomSpinButton;
+  GtkWidget *rollingAvgLookaheadHbox;
+  GtkWidget *rollingAvgLookaheadLabel1;
+  GtkObject *rollingAvgLookaheadSpinButton_adj;
+  GtkWidget *rollingAvgLookaheadSpinButton;
+  GtkWidget *rollingAvgLookaheadLabel2;
   GtkWidget *rollingAvgInitVbox;
   GtkWidget *rollingAvgInitHbox1;
   GtkWidget *rollingAvgInitLabel1;
@@ -895,7 +1084,9 @@
   GtkWidget *okButton;
 
   swiss_army_knife_dialog = gtk_dialog_new ();
-  gtk_window_set_title (GTK_WINDOW (swiss_army_knife_dialog), QT_TR_NOOP("Swiss Army Knife"));
+  //                                                NO NEED TO "FIX" THAT _("...")!!
+  //                                                see handy macro near top of file.
+  gtk_window_set_title (GTK_WINDOW (swiss_army_knife_dialog), _("Swiss Army Knife"));
   gtk_window_set_type_hint (GTK_WINDOW (swiss_army_knife_dialog), GDK_WINDOW_TYPE_HINT_DIALOG);
 
   dialogVbox = GTK_DIALOG (swiss_army_knife_dialog)->vbox;
@@ -922,7 +1113,7 @@
   gtk_widget_show (operationHbox);
   gtk_box_pack_start (GTK_BOX (settingsOuterVbox), operationHbox, TRUE, TRUE, 0);
 
-  operationLabel = gtk_label_new_with_mnemonic (QT_TR_NOOP("Select _Operation on each pixel P and input A:   "));
+  operationLabel = gtk_label_new_with_mnemonic (_("Select _Operation on each pixel P and input A:   "));
   gtk_widget_show (operationLabel);
   gtk_box_pack_start (GTK_BOX (operationHbox), operationLabel, FALSE, FALSE, 0);
 
@@ -934,7 +1125,7 @@
   gtk_widget_show (inputTypeHbox);
   gtk_box_pack_start (GTK_BOX (settingsOuterVbox), inputTypeHbox, TRUE, TRUE, 0);
 
-  inputTypeLabel = gtk_label_new_with_mnemonic (QT_TR_NOOP("Input _Type:   "));
+  inputTypeLabel = gtk_label_new_with_mnemonic (_("Input _Type:   "));
   gtk_widget_show (inputTypeLabel);
   gtk_box_pack_start (GTK_BOX (inputTypeHbox), inputTypeLabel, FALSE, FALSE, 0);
 
@@ -953,11 +1144,11 @@
   gtk_widget_show (convolutionInputFileHbox);
   gtk_box_pack_start (GTK_BOX (convolutionSettingsVbox), convolutionInputFileHbox, TRUE, TRUE, 0);
 
-  convolutionInputFileLabel = gtk_label_new_with_mnemonic (QT_TR_NOOP("Input _File (convolution kernel):   "));
+  convolutionInputFileLabel = gtk_label_new_with_mnemonic (_("Input _File (convolution kernel):   "));
   gtk_widget_show (convolutionInputFileLabel);
   gtk_box_pack_start (GTK_BOX (convolutionInputFileHbox), convolutionInputFileLabel, FALSE, FALSE, 0);
 
-  convolutionInputFileChooser = gtk_file_chooser_button_new (QT_TR_NOOP("Select Convolution Kernel File"), GTK_FILE_CHOOSER_ACTION_OPEN);
+  convolutionInputFileChooser = gtk_file_chooser_button_new (_("Select Convolution Kernel File"), GTK_FILE_CHOOSER_ACTION_OPEN);
   gtk_widget_show (convolutionInputFileChooser);
   gtk_box_pack_start (GTK_BOX (convolutionInputFileHbox), convolutionInputFileChooser, TRUE, TRUE, 0);
 
@@ -968,11 +1159,11 @@
   gtk_widget_show (imageInputFileHbox);
   gtk_box_pack_start (GTK_BOX (imageFileSettingsVbox), imageInputFileHbox, TRUE, TRUE, 0);
 
-  imageInputFileLabel = gtk_label_new_with_mnemonic (QT_TR_NOOP("Input _File (image file):   "));
+  imageInputFileLabel = gtk_label_new_with_mnemonic (_("Input _File (image file):   "));
   gtk_widget_show (imageInputFileLabel);
   gtk_box_pack_start (GTK_BOX (imageInputFileHbox), imageInputFileLabel, FALSE, FALSE, 0);
 
-  imageInputFileChooser = gtk_file_chooser_button_new (QT_TR_NOOP("Select Convolution Kernel File"), GTK_FILE_CHOOSER_ACTION_OPEN);
+  imageInputFileChooser = gtk_file_chooser_button_new (_("Select Convolution Kernel File"), GTK_FILE_CHOOSER_ACTION_OPEN);
   gtk_widget_show (imageInputFileChooser);
   gtk_box_pack_start (GTK_BOX (imageInputFileHbox), imageInputFileChooser, TRUE, TRUE, 0);
 
@@ -994,7 +1185,7 @@
   gtk_widget_show (imageFileScalingAddHbox);
   gtk_box_pack_start (GTK_BOX (imageFileScalingVbox), imageFileScalingAddHbox, TRUE, TRUE, 0);
 
-  imageFileScalingAddLabel = gtk_label_new_with_mnemonic (QT_TR_NOOP("First, _add to each float pixel value:   "));
+  imageFileScalingAddLabel = gtk_label_new_with_mnemonic (_("First, _add to each float pixel value:   "));
   gtk_widget_show (imageFileScalingAddLabel);
   gtk_box_pack_start (GTK_BOX (imageFileScalingAddHbox), imageFileScalingAddLabel, FALSE, FALSE, 0);
 
@@ -1008,7 +1199,7 @@
   gtk_widget_show (imageFileScalingMultHbox);
   gtk_box_pack_start (GTK_BOX (imageFileScalingVbox), imageFileScalingMultHbox, TRUE, TRUE, 0);
 
-  imageFileScalingMultLabel = gtk_label_new_with_mnemonic (QT_TR_NOOP("Then, _multiply each float pixel value by:   "));
+  imageFileScalingMultLabel = gtk_label_new_with_mnemonic (_("Then, _multiply each float pixel value by:   "));
   gtk_widget_show (imageFileScalingMultLabel);
   gtk_box_pack_start (GTK_BOX (imageFileScalingMultHbox), imageFileScalingMultLabel, FALSE, FALSE, 0);
 
@@ -1022,7 +1213,7 @@
   gtk_widget_show (imageFileScalingMinVbox);
   gtk_box_pack_start (GTK_BOX (imageFileScalingVbox), imageFileScalingMinVbox, TRUE, TRUE, 0);
 
-  imageFileScalingMinLabel = gtk_label_new_with_mnemonic (QT_TR_NOOP("Mi_nimum loaded pixel value (will be scaled to 0):"));
+  imageFileScalingMinLabel = gtk_label_new_with_mnemonic (_("Mi_nimum loaded pixel value (will be scaled to 0):"));
   gtk_widget_show (imageFileScalingMinLabel);
   gtk_box_pack_start (GTK_BOX (imageFileScalingMinVbox), imageFileScalingMinLabel, FALSE, FALSE, 0);
   gtk_misc_set_alignment (GTK_MISC (imageFileScalingMinLabel), 0, 0.5);
@@ -1048,7 +1239,7 @@
   gtk_widget_show (imageFileScalingMaxVbox);
   gtk_box_pack_start (GTK_BOX (imageFileScalingVbox), imageFileScalingMaxVbox, TRUE, TRUE, 0);
 
-  imageFileScalingMaxLabel = gtk_label_new_with_mnemonic (QT_TR_NOOP("Ma_ximum loaded pixel value (will be scaled to 255):"));
+  imageFileScalingMaxLabel = gtk_label_new_with_mnemonic (_("Ma_ximum loaded pixel value (will be scaled to 255):"));
   gtk_widget_show (imageFileScalingMaxLabel);
   gtk_box_pack_start (GTK_BOX (imageFileScalingMaxVbox), imageFileScalingMaxLabel, FALSE, FALSE, 0);
   gtk_misc_set_alignment (GTK_MISC (imageFileScalingMaxLabel), 0, 0.5);
@@ -1070,7 +1261,7 @@
   gtk_box_pack_start (GTK_BOX (imageFileScalingMaxHbox), imageFileScalingMaxSpinner, FALSE, TRUE, 0);
   gtk_spin_button_set_numeric (GTK_SPIN_BUTTON (imageFileScalingMaxSpinner), TRUE);
 
-  imageFileScalingFrameLabel = gtk_label_new (QT_TR_NOOP("Pixel Value Scaling as Image File is Loaded"));
+  imageFileScalingFrameLabel = gtk_label_new (_("Pixel Value Scaling as Image File is Loaded"));
   gtk_widget_show (imageFileScalingFrameLabel);
   gtk_frame_set_label_widget (GTK_FRAME (imageFileScalingFrame), imageFileScalingFrameLabel);
   gtk_label_set_use_markup (GTK_LABEL (imageFileScalingFrameLabel), TRUE);
@@ -1082,7 +1273,7 @@
   gtk_widget_show (constantValueHbox);
   gtk_box_pack_start (GTK_BOX (constantSettingsVbox), constantValueHbox, TRUE, TRUE, 0);
 
-  constantValueLabel = gtk_label_new_with_mnemonic (QT_TR_NOOP("Input _Constant:      "));
+  constantValueLabel = gtk_label_new_with_mnemonic (_("Input _Constant:      "));
   gtk_widget_show (constantValueLabel);
   gtk_box_pack_start (GTK_BOX (constantValueHbox), constantValueLabel, FALSE, FALSE, 0);
 
@@ -1099,7 +1290,7 @@
   gtk_widget_show (rollingAvgAlphaHbox);
   gtk_box_pack_start (GTK_BOX (rollingAvgSettingsVbox), rollingAvgAlphaHbox, TRUE, TRUE, 0);
 
-  rollingAvgAlphaLabel = gtk_label_new_with_mnemonic (QT_TR_NOOP("Memory constant _alpha:   "));
+  rollingAvgAlphaLabel = gtk_label_new_with_mnemonic (_("Memory constant _alpha:   "));
   gtk_widget_show (rollingAvgAlphaLabel);
   gtk_box_pack_start (GTK_BOX (rollingAvgAlphaHbox), rollingAvgAlphaLabel, FALSE, TRUE, 0);
 
@@ -1109,7 +1300,7 @@
   gtk_box_pack_start (GTK_BOX (rollingAvgAlphaHbox), rollingAvgAlphaSpinButton, FALSE, TRUE, 0);
   gtk_spin_button_set_numeric (GTK_SPIN_BUTTON (rollingAvgAlphaSpinButton), TRUE);
 
-  rollingAvgAlphaEqualsLabel = gtk_label_new (QT_TR_NOOP(" = 1 / "));
+  rollingAvgAlphaEqualsLabel = gtk_label_new (_(" = 1 / "));
   gtk_widget_show (rollingAvgAlphaEqualsLabel);
   gtk_box_pack_start (GTK_BOX (rollingAvgAlphaHbox), rollingAvgAlphaEqualsLabel, FALSE, FALSE, 0);
 
@@ -1119,6 +1310,25 @@
   gtk_box_pack_start (GTK_BOX (rollingAvgAlphaHbox), rollingAvgAlphaDenomSpinButton, FALSE, TRUE, 0);
   gtk_spin_button_set_numeric (GTK_SPIN_BUTTON (rollingAvgAlphaDenomSpinButton), TRUE);
 
+  rollingAvgLookaheadHbox = gtk_hbox_new (FALSE, 0);
+  gtk_widget_show (rollingAvgLookaheadHbox);
+  gtk_box_pack_start (GTK_BOX (rollingAvgSettingsVbox), rollingAvgLookaheadHbox, TRUE, TRUE, 0);
+
+  rollingAvgLookaheadLabel1 = gtk_label_new_with_mnemonic (_("_Look ahead "));
+  gtk_widget_show (rollingAvgLookaheadLabel1);
+  gtk_box_pack_start (GTK_BOX (rollingAvgLookaheadHbox), rollingAvgLookaheadLabel1, FALSE, FALSE, 0);
+  gtk_label_set_justify (GTK_LABEL (rollingAvgLookaheadLabel1), GTK_JUSTIFY_RIGHT);
+
+  rollingAvgLookaheadSpinButton_adj = gtk_adjustment_new (0, 0, 99999, 1, 1, 0);
+  rollingAvgLookaheadSpinButton = gtk_spin_button_new (GTK_ADJUSTMENT (rollingAvgLookaheadSpinButton_adj), 1, 0);
+  gtk_widget_show (rollingAvgLookaheadSpinButton);
+  gtk_box_pack_start (GTK_BOX (rollingAvgLookaheadHbox), rollingAvgLookaheadSpinButton, FALSE, TRUE, 0);
+  gtk_spin_button_set_numeric (GTK_SPIN_BUTTON (rollingAvgLookaheadSpinButton), TRUE);
+
+  rollingAvgLookaheadLabel2 = gtk_label_new_with_mnemonic (_(" frames.  (Anything > 0 will be slower.)"));
+  gtk_widget_show (rollingAvgLookaheadLabel2);
+  gtk_box_pack_start (GTK_BOX (rollingAvgLookaheadHbox), rollingAvgLookaheadLabel2, FALSE, FALSE, 0);
+
   rollingAvgInitVbox = gtk_vbox_new (FALSE, 0);
   gtk_widget_show (rollingAvgInitVbox);
   gtk_box_pack_start (GTK_BOX (rollingAvgSettingsVbox), rollingAvgInitVbox, TRUE, TRUE, 0);
@@ -1127,17 +1337,17 @@
   gtk_widget_show (rollingAvgInitHbox1);
   gtk_box_pack_start (GTK_BOX (rollingAvgInitVbox), rollingAvgInitHbox1, TRUE, TRUE, 0);
 
-  rollingAvgInitLabel1 = gtk_label_new_with_mnemonic (QT_TR_NOOP("_Initial average (\"head start\") is "));
+  rollingAvgInitLabel1 = gtk_label_new_with_mnemonic (_("_Initial average (\"head start\") is "));
   gtk_widget_show (rollingAvgInitLabel1);
   gtk_box_pack_start (GTK_BOX (rollingAvgInitHbox1), rollingAvgInitLabel1, FALSE, FALSE, 0);
 
   rollingAvgInitTypeMenu = gtk_combo_box_new_text ();
   gtk_widget_show (rollingAvgInitTypeMenu);
   gtk_box_pack_start (GTK_BOX (rollingAvgInitHbox1), rollingAvgInitTypeMenu, FALSE, TRUE, 0);
-  gtk_combo_box_append_text (GTK_COMBO_BOX (rollingAvgInitTypeMenu), QT_TR_NOOP("straight"));
-  gtk_combo_box_append_text (GTK_COMBO_BOX (rollingAvgInitTypeMenu), QT_TR_NOOP("rolling"));
+  gtk_combo_box_append_text (GTK_COMBO_BOX (rollingAvgInitTypeMenu), _("straight"));
+  gtk_combo_box_append_text (GTK_COMBO_BOX (rollingAvgInitTypeMenu), _("rolling"));
 
-  rollingAvgInitLabel2 = gtk_label_new (QT_TR_NOOP(" average"));
+  rollingAvgInitLabel2 = gtk_label_new (_(" average"));
   gtk_widget_show (rollingAvgInitLabel2);
   gtk_box_pack_start (GTK_BOX (rollingAvgInitHbox1), rollingAvgInitLabel2, FALSE, FALSE, 0);
 
@@ -1145,21 +1355,21 @@
   gtk_widget_show (rollingAvgInitHbox2);
   gtk_box_pack_start (GTK_BOX (rollingAvgInitVbox), rollingAvgInitHbox2, TRUE, TRUE, 0);
 
-  rollingAvgInitLabel3 = gtk_label_new (QT_TR_NOOP("      of frames "));
+  rollingAvgInitLabel3 = gtk_label_new (_("      of frames "));
   gtk_widget_show (rollingAvgInitLabel3);
   gtk_box_pack_start (GTK_BOX (rollingAvgInitHbox2), rollingAvgInitLabel3, FALSE, FALSE, 0);
 
-  rollingAvgInitStartSpinButton_adj = gtk_adjustment_new (1, 1, 99999, 1, 1, 0);
+  rollingAvgInitStartSpinButton_adj = gtk_adjustment_new (0, 0, 9999999, 1, 1, 0);
   rollingAvgInitStartSpinButton = gtk_spin_button_new (GTK_ADJUSTMENT (rollingAvgInitStartSpinButton_adj), 1, 0);
   gtk_widget_show (rollingAvgInitStartSpinButton);
   gtk_box_pack_start (GTK_BOX (rollingAvgInitHbox2), rollingAvgInitStartSpinButton, FALSE, TRUE, 0);
   gtk_spin_button_set_numeric (GTK_SPIN_BUTTON (rollingAvgInitStartSpinButton), TRUE);
 
-  rollingAvgInitLabel4 = gtk_label_new (QT_TR_NOOP(" through "));
+  rollingAvgInitLabel4 = gtk_label_new (_(" through "));
   gtk_widget_show (rollingAvgInitLabel4);
   gtk_box_pack_start (GTK_BOX (rollingAvgInitHbox2), rollingAvgInitLabel4, FALSE, FALSE, 0);
 
-  rollingAvgInitEndSpinButton_adj = gtk_adjustment_new (100, 1, 99999, 1, 1, 0);
+  rollingAvgInitEndSpinButton_adj = gtk_adjustment_new (99, 0, 9999999, 1, 1, 0);
   rollingAvgInitEndSpinButton = gtk_spin_button_new (GTK_ADJUSTMENT (rollingAvgInitEndSpinButton_adj), 1, 0);
   gtk_widget_show (rollingAvgInitEndSpinButton);
   gtk_box_pack_start (GTK_BOX (rollingAvgInitHbox2), rollingAvgInitEndSpinButton, FALSE, TRUE, 0);
@@ -1173,7 +1383,7 @@
   gtk_widget_show (biasVbox);
   gtk_box_pack_start (GTK_BOX (settingsOuterVbox), biasVbox, TRUE, TRUE, 0);
 
-  biasLabel = gtk_label_new_with_mnemonic (QT_TR_NOOP("Integer _Bias (will be added to result of selected operation):"));
+  biasLabel = gtk_label_new_with_mnemonic (_("Integer _Bias (will be added to result of selected operation):"));
   gtk_widget_show (biasLabel);
   gtk_box_pack_start (GTK_BOX (biasVbox), biasLabel, FALSE, FALSE, 0);
   gtk_misc_set_alignment (GTK_MISC (biasLabel), 0, 0.5);
@@ -1213,7 +1423,7 @@
   gtk_widget_show (resultScalingAddHbox);
   gtk_box_pack_start (GTK_BOX (resultScalingVbox), resultScalingAddHbox, TRUE, TRUE, 0);
 
-  resultScalingAddLabel = gtk_label_new_with_mnemonic (QT_TR_NOOP("First, _add to each pixel result value:   "));
+  resultScalingAddLabel = gtk_label_new_with_mnemonic (_("First, _add to each pixel result value:   "));
   gtk_widget_show (resultScalingAddLabel);
   gtk_box_pack_start (GTK_BOX (resultScalingAddHbox), resultScalingAddLabel, FALSE, FALSE, 0);
 
@@ -1227,7 +1437,7 @@
   gtk_widget_show (resultScalingMultHbox);
   gtk_box_pack_start (GTK_BOX (resultScalingVbox), resultScalingMultHbox, TRUE, TRUE, 0);
 
-  resultScalingMultLabel = gtk_label_new_with_mnemonic (QT_TR_NOOP("Then, _multiply each pixel result value by:   "));
+  resultScalingMultLabel = gtk_label_new_with_mnemonic (_("Then, _multiply each pixel result value by:   "));
   gtk_widget_show (resultScalingMultLabel);
   gtk_box_pack_start (GTK_BOX (resultScalingMultHbox), resultScalingMultLabel, FALSE, FALSE, 0);
 
@@ -1241,7 +1451,7 @@
   gtk_widget_show (resultScalingMinVbox);
   gtk_box_pack_start (GTK_BOX (resultScalingVbox), resultScalingMinVbox, TRUE, TRUE, 0);
 
-  resultScalingMinLabel = gtk_label_new_with_mnemonic (QT_TR_NOOP("Mi_nimum result value (will be scaled to 0):"));
+  resultScalingMinLabel = gtk_label_new_with_mnemonic (_("Mi_nimum result value (will be scaled to 0):"));
   gtk_widget_show (resultScalingMinLabel);
   gtk_box_pack_start (GTK_BOX (resultScalingMinVbox), resultScalingMinLabel, FALSE, FALSE, 0);
   gtk_misc_set_alignment (GTK_MISC (resultScalingMinLabel), 0, 0.5);
@@ -1267,7 +1477,7 @@
   gtk_widget_show (resultScalingMaxVbox);
   gtk_box_pack_start (GTK_BOX (resultScalingVbox), resultScalingMaxVbox, TRUE, TRUE, 0);
 
-  resultScalingMaxLabel = gtk_label_new_with_mnemonic (QT_TR_NOOP("Ma_ximum result value (will be scaled to 255):"));
+  resultScalingMaxLabel = gtk_label_new_with_mnemonic (_("Ma_ximum result value (will be scaled to 255):"));
   gtk_widget_show (resultScalingMaxLabel);
   gtk_box_pack_start (GTK_BOX (resultScalingMaxVbox), resultScalingMaxLabel, FALSE, FALSE, 0);
   gtk_misc_set_alignment (GTK_MISC (resultScalingMaxLabel), 0, 0.5);
@@ -1289,7 +1499,7 @@
   gtk_box_pack_start (GTK_BOX (resultScalingMaxHbox), resultScalingMaxSpinner, FALSE, TRUE, 0);
   gtk_spin_button_set_numeric (GTK_SPIN_BUTTON (resultScalingMaxSpinner), TRUE);
 
-  resultScalingFrameLabel = gtk_label_new (QT_TR_NOOP("Pixel Value Scaling on Result of Selected Operation"));
+  resultScalingFrameLabel = gtk_label_new (_("Pixel Value Scaling on Result of Selected Operation"));
   gtk_widget_show (resultScalingFrameLabel);
   gtk_frame_set_label_widget (GTK_FRAME (resultScalingFrame), resultScalingFrameLabel);
   gtk_label_set_use_markup (GTK_LABEL (resultScalingFrameLabel), TRUE);
@@ -1298,7 +1508,7 @@
   gtk_widget_show (hseparator2);
   gtk_box_pack_start (GTK_BOX (settingsOuterVbox), hseparator2, TRUE, TRUE, 0);
 
-  currentConfigDescription = gtk_label_new (QT_TR_NOOP("(description of current config will go here)"));
+  currentConfigDescription = gtk_label_new (_("(description of current config will go here)"));
   gtk_widget_show (currentConfigDescription);
   gtk_box_pack_start (GTK_BOX (settingsOuterVbox), currentConfigDescription, FALSE, FALSE, 0);
   GTK_WIDGET_SET_FLAGS (currentConfigDescription, GTK_CAN_FOCUS);
@@ -1315,7 +1525,7 @@
   gtk_widget_show (histogramHbox);
   gtk_box_pack_start (GTK_BOX (settingsOuterVbox), histogramHbox, TRUE, TRUE, 0);
 
-  histogramLabel = gtk_label_new_with_mnemonic (QT_TR_NOOP("_Histogram every N frames (0 to disable):   "));
+  histogramLabel = gtk_label_new_with_mnemonic (_("_Histogram every N frames (0 to disable):   "));
   gtk_widget_show (histogramLabel);
   gtk_box_pack_start (GTK_BOX (histogramHbox), histogramLabel, FALSE, FALSE, 0);
 
@@ -1329,7 +1539,7 @@
   gtk_widget_show (debugHbox);
   gtk_box_pack_start (GTK_BOX (settingsOuterVbox), debugHbox, TRUE, TRUE, 0);
 
-  debugLabel = gtk_label_new_with_mnemonic (QT_TR_NOOP("_Debugging settings (bits):   "));
+  debugLabel = gtk_label_new_with_mnemonic (_("_Debugging settings (bits):   "));
   gtk_widget_show (debugLabel);
   gtk_box_pack_start (GTK_BOX (debugHbox), debugLabel, FALSE, FALSE, 0);
 
@@ -1361,9 +1571,8 @@
   gtk_box_pack_start (GTK_BOX (previewVbox), previewControlHbox, TRUE, TRUE, 0);
 
   previewOutputMenu = gtk_combo_box_new_text ();
+  gtk_widget_show (previewOutputMenu);
   gtk_box_pack_start (GTK_BOX (previewControlHbox), previewOutputMenu, FALSE, TRUE, 0);
-  gtk_combo_box_append_text (GTK_COMBO_BOX (previewOutputMenu), QT_TR_NOOP("Swiss Army Knife output"));
-  gtk_combo_box_append_text (GTK_COMBO_BOX (previewOutputMenu), QT_TR_NOOP("Final output"));
 
   previewSlider = gtk_hscale_new (GTK_ADJUSTMENT (gtk_adjustment_new (0, 0, 99, 1, 1, 0)));
   gtk_widget_show (previewSlider);
@@ -1373,13 +1582,13 @@
   previewVideo = gtk_drawing_area_new ();
   gtk_widget_show (previewVideo);
   gtk_box_pack_start (GTK_BOX (previewVbox), previewVideo, TRUE, TRUE, 0);
-  gtk_widget_set_size_request (previewVideo, -1, 300);
+  gtk_widget_set_size_request (previewVideo, 30, 30);
   gtk_widget_set_events (previewVideo, GDK_BUTTON1_MOTION_MASK | GDK_BUTTON_PRESS_MASK);
 
   previewDisabled = gtk_drawing_area_new ();
   gtk_box_pack_start (GTK_BOX (previewVbox), previewDisabled, TRUE, TRUE, 0);
 
-  previewLabel = gtk_label_new (QT_TR_NOOP("Preview"));
+  previewLabel = gtk_label_new (_("Preview"));
   gtk_widget_show (previewLabel);
   gtk_frame_set_label_widget (GTK_FRAME (previewFrame), previewLabel);
 
@@ -1387,7 +1596,7 @@
   gtk_widget_show (previewEnableButtonHbox);
   gtk_box_pack_start (GTK_BOX (previewVboxOuter), previewEnableButtonHbox, FALSE, TRUE, 5);
 
-  previewEnableButton = gtk_toggle_button_new_with_mnemonic (QT_TR_NOOP("Enable Preview"));
+  previewEnableButton = gtk_toggle_button_new_with_mnemonic (_("Enable Preview"));
   gtk_widget_show (previewEnableButton);
   gtk_box_pack_end (GTK_BOX (previewEnableButtonHbox), previewEnableButton, FALSE, FALSE, 0);
 
@@ -1409,6 +1618,8 @@
   gtk_label_set_mnemonic_widget (GTK_LABEL (imageFileScalingMultLabel), imageFileScalingMultSpinButton);
   gtk_label_set_mnemonic_widget (GTK_LABEL (constantValueLabel), constantValueSpinButton);
   gtk_label_set_mnemonic_widget (GTK_LABEL (rollingAvgAlphaLabel), rollingAvgAlphaSpinButton);
+  gtk_label_set_mnemonic_widget (GTK_LABEL (rollingAvgLookaheadLabel1), rollingAvgLookaheadSpinButton);
+  gtk_label_set_mnemonic_widget (GTK_LABEL (rollingAvgLookaheadLabel2), rollingAvgLookaheadSpinButton);
   gtk_label_set_mnemonic_widget (GTK_LABEL (resultScalingAddLabel), resultScalingAddSpinButton);
   gtk_label_set_mnemonic_widget (GTK_LABEL (resultScalingMultLabel), resultScalingMultSpinButton);
   gtk_label_set_mnemonic_widget (GTK_LABEL (histogramLabel), histogramSpinButton);
@@ -1466,6 +1677,10 @@
   GLADE_HOOKUP_OBJECT (swiss_army_knife_dialog, rollingAvgAlphaSpinButton, "rollingAvgAlphaSpinButton");
   GLADE_HOOKUP_OBJECT (swiss_army_knife_dialog, rollingAvgAlphaEqualsLabel, "rollingAvgAlphaEqualsLabel");
   GLADE_HOOKUP_OBJECT (swiss_army_knife_dialog, rollingAvgAlphaDenomSpinButton, "rollingAvgAlphaDenomSpinButton");
+  GLADE_HOOKUP_OBJECT (swiss_army_knife_dialog, rollingAvgLookaheadHbox, "rollingAvgLookaheadHbox");
+  GLADE_HOOKUP_OBJECT (swiss_army_knife_dialog, rollingAvgLookaheadLabel1, "rollingAvgLookaheadLabel1");
+  GLADE_HOOKUP_OBJECT (swiss_army_knife_dialog, rollingAvgLookaheadSpinButton, "rollingAvgLookaheadSpinButton");
+  GLADE_HOOKUP_OBJECT (swiss_army_knife_dialog, rollingAvgLookaheadLabel2, "rollingAvgLookaheadLabel2");
   GLADE_HOOKUP_OBJECT (swiss_army_knife_dialog, rollingAvgInitVbox, "rollingAvgInitVbox");
   GLADE_HOOKUP_OBJECT (swiss_army_knife_dialog, rollingAvgInitHbox1, "rollingAvgInitHbox1");
   GLADE_HOOKUP_OBJECT (swiss_army_knife_dialog, rollingAvgInitLabel1, "rollingAvgInitLabel1");

Modified: branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_eraser.cpp
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_eraser.cpp	2008-02-03 09:40:17 UTC (rev 3787)
+++ branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_eraser.cpp	2008-02-03 12:04:10 UTC (rev 3788)
@@ -42,6 +42,7 @@
 #include "DIA_flyDialog.h"
 #include "DIA_flyEraser.h"
 #include "ADM_userInterfaces/ADM_commonUI/DIA_factory.h" // for diaElemMenu etc.
+#include "ADM_filter/video_filters.h"
 
 using namespace std;
 
@@ -73,6 +74,7 @@
     GtkTreeView * tree_view;
 public:
     GtkTreeSelection * tree_sel;
+    bool warned_about_scaling;
 
 public:
     uint8_t    download();
@@ -83,7 +85,7 @@
     flyEraserGtk (uint32_t width, uint32_t height,
                   AVDMGenericVideoStream * in,
                   void * canvas, void * slider, GtkWidget * dialog,
-                  ADMVideoEraser * eraserp, const ERASER_PARAM * in_param,
+                  ADMVideoEraser * eraserp, ERASER_PARAM * in_param,
                   const MenuMapping * menu_mapping,
                   uint32_t menu_mapping_count)
         : flyEraser (width, height, in, canvas, slider, dialog,
@@ -93,7 +95,8 @@
           tree_model (GTK_TREE_MODEL (list_store)),
           tree_view_widget (WID (rangeListTreeview)),
           tree_view (GTK_TREE_VIEW (tree_view_widget)),
-          tree_sel (gtk_tree_view_get_selection (tree_view))
+          tree_sel (gtk_tree_view_get_selection (tree_view)),
+          warned_about_scaling (false)
     {
         // printf ("flyEraserGtk::flyEraserGtk: "
         //         "in_param %p, &param %p\n", in_param, &param);
@@ -112,10 +115,34 @@
 };
 
 static gboolean previewSomeEvent (GtkWidget * widget,
-                                  uint8_t button, uint16_t x, uint16_t y,
+                                  uint8_t button, float fx, float fy,
                                   guint state, gpointer data)
 {
     flyEraserGtk * myFly = static_cast <flyEraserGtk *> (data);
+
+    uint32_t x, y;
+
+    float zoom = myFly->getZoom();
+    if (zoom == 1.0)
+    {
+        x = static_cast <uint32_t> (fx);
+        y = static_cast <uint32_t> (fy);
+    }
+    else
+    {
+        if (!myFly->warned_about_scaling)
+        {
+            fprintf (stderr, "******* WARNING: you are erasing in a "
+                     "scaled-down window (%.5f) - all pixel positions are "
+                     "therefore APPROXIMATE!!!\n", zoom);
+            myFly->warned_about_scaling = true;
+        }
+
+        zoom = 1 / zoom;
+        x = static_cast <uint32_t> (fx * zoom + .5);
+        y = static_cast <uint32_t> (fy * zoom + .5);
+    }
+
     bool erasing = (button == 1) ? myFly->param.brush_mode
                    : !myFly->param.brush_mode;
     ADMImage * image = myFly->getOutputImage();
@@ -355,11 +382,8 @@
     if (event->type != GDK_BUTTON_PRESS)
         return FALSE;
 
-    uint16_t x = static_cast <uint16_t> (event->x);
-    uint16_t y = static_cast <uint16_t> (event->y);
-
-    return previewSomeEvent (widget, event->button, x, y,
-                             event->state, data);
+    return previewSomeEvent (widget, event->button,
+                             event->x, event->y, event->state, data);
 }
 
 /********************************************************************/
@@ -371,9 +395,6 @@
     if (event->type != GDK_MOTION_NOTIFY)
         return FALSE;
 
-    uint16_t x = static_cast <uint16_t> (event->x);
-    uint16_t y = static_cast <uint16_t> (event->y);
-
     uint8_t button;
     if (event->state & GDK_BUTTON1_MASK)
         button = 1;
@@ -384,7 +405,8 @@
     else
         return FALSE;
 
-    return previewSomeEvent (widget, button, x, y, event->state, data);
+    return previewSomeEvent (widget, button, event->x, event->y,
+                             event->state, data);
 }
 
 /********************************************************************/
@@ -483,11 +505,10 @@
 
     uint32_t middle_frame = (current_mask->first_frame
                              + current_mask->last_frame) / 2;
-    // HERE: a better test might be "if (middle_frame > last_actual_frame)"...
-    if (current_mask->last_frame >= MAX_FRAME_NUM)
+    if (middle_frame >= _in->getInfo()->nb_frames)
         middle_frame = current_mask->first_frame;
 
-    if (middle_frame != sliderGet())
+    if (sliderGet() != middle_frame)
     {
         sliderSet (middle_frame);
         sliderChanged();
@@ -685,6 +706,58 @@
 
 /********************************************************************/
 
+static void previewOutputMenuChange (GtkComboBox * combo, gpointer user_data)
+{
+    flyEraserGtk * myFly = static_cast <flyEraserGtk *> (user_data);
+    uint32_t index = gtk_combo_box_get_active (combo);
+    uint32_t filter_count;
+    FILTER * filters = getCurrentVideoFilterList (&filter_count);
+    FILTER * filter = filters + index;
+    VF_FILTERS tag = filter->tag;
+
+    gchar * activestr = gtk_combo_box_get_active_text (combo);
+
+    printf ("user selected preview of #%d = %s (%d) @%p (was %p)\n",
+            index, activestr, tag, filter->filter, myFly->getSource());
+
+    if (strncmp (activestr, "XX ", 3) == 0)
+    {
+        printf ("selected preview source has different dimensions - "
+                "forcing selection to current filter\n");
+        gtk_combo_box_set_active (combo, myFly->this_filter_index);
+    }
+    else
+    {
+        flyEraserGtk::PreviewMode mode;
+        if (index == myFly->this_filter_index)
+            mode = flyEraserGtk::PREVIEWMODE_THIS_FILTER;
+        else if (index > myFly->this_filter_index)
+            mode = flyEraserGtk::PREVIEWMODE_LATER_FILTER;
+        else // if (index < myFly->this_filter_index)
+            mode = flyEraserGtk::PREVIEWMODE_EARLIER_FILTER;
+
+        myFly->changeSource (filter->filter, mode);
+    }
+
+    g_free (activestr);
+}
+
+/********************************************************************/
+
+gboolean preview_video_configured (GtkWidget * widget, GdkEventConfigure * event,
+                                   gpointer user_data)
+{
+    fprintf (stderr, "preview_configured: now %dx%d @ +%d+%d\n",
+             event->width, event->height, event->x, event->y);
+
+    flyEraserGtk * myFly = static_cast <flyEraserGtk *> (user_data);
+    myFly->recomputeSize();
+
+    return FALSE;
+}
+
+/********************************************************************/
+
 uint8_t DIA_eraser (AVDMGenericVideoStream * in, ADMVideoEraser * eraserp,
                     ERASER_PARAM * param, const MenuMapping * menu_mapping,
                     uint32_t menu_mapping_count)
@@ -729,6 +802,11 @@
                             WID(previewVideo), WID(previewSlider),
                             dialog, eraserp, param,
                             menu_mapping, menu_mapping_count);
+
+    g_signal_connect (GTK_OBJECT (WID(previewVideo)), "configure-event",
+                      GTK_SIGNAL_FUNC (preview_video_configured),
+                      gpointer (myDialog));
+
     myDialog->upload();
     myDialog->sliderChanged();
 
@@ -809,6 +887,56 @@
                       GTK_SIGNAL_FUNC(jump_last_button_clicked),
                       gpointer(myDialog));
 
+    GtkWidget * previewOutputMenu = WID(previewOutputMenu);
+    uint32_t filter_count;
+    FILTER * filters = getCurrentVideoFilterList (&filter_count);
+    int32_t active = -1;
+
+    // The " + (active < 0)" below is a bit of a hack.  We know that in
+    // on_action() in gui_filtermanager.cpp, case A_ADD, the new filter-to-be
+    // is added to the filter list without incrementing nb_active_filter yet.
+    // So if we get to the end of the list and haven't yet found the filter
+    // that we're configuring, we know it's a new one and therefore that it is
+    // one past the apparent end of the list.  It's not a clean solution, but
+    // it seems like the cleanEST solution.
+
+    for (uint32_t i = 0; i < filter_count + (active < 0); i++)
+    {
+        const char * name
+            = (i == 0) ? "(input)" : filterGetNameFromTag (filters [i].tag);
+        bool free_name = false;
+                                   
+        FILTER * filter = filters + i;
+        AVDMGenericVideoStream * source = filter->filter;
+        uint32_t w = source->getInfo()->width;
+        uint32_t h = source->getInfo()->height;
+        if (w != width || h != height)
+        {
+            name = g_strconcat ("XX ", name, " XX", NULL);
+            free_name = true;
+        }
+
+        printf ("filter [%d] = %s (%d) @ %p; %dx%d\n",
+                i, name, filter->tag, source, w, h);
+        gtk_combo_box_append_text (GTK_COMBO_BOX (previewOutputMenu), name);
+        if (filter->filter == myDialog->getSource())
+        {
+            gtk_combo_box_set_active (GTK_COMBO_BOX (previewOutputMenu), i);
+            printf ("\tfilter [%d] is being configured now\n", i);
+            active = i;
+        }
+
+        if (free_name)
+            g_free (const_cast <char *> (name));
+    }
+
+    ADM_assert (active >= 0);
+    myDialog->this_filter_index = active;
+
+    g_signal_connect (GTK_OBJECT(previewOutputMenu), "changed",
+                      GTK_SIGNAL_FUNC(previewOutputMenuChange),
+                      gpointer(myDialog));
+
     uint8_t ret = 0;
     int response = gtk_dialog_run(GTK_DIALOG(dialog));
 
@@ -823,9 +951,11 @@
             browse_button_clicked (NULL, gpointer (myDialog));
 
         myDialog->download();
-        myDialog->getParam (param);
+        myDialog->pushParam();
         ret = 1;
     }
+    else
+        myDialog->restoreParam();
 
     gtk_unregister_dialog(dialog);
     gtk_widget_destroy(dialog);
@@ -922,6 +1052,8 @@
     {
         uint32_t middle_frame = (current_mask->first_frame
                                  + current_mask->last_frame) / 2;
+        if (middle_frame >= _in->getInfo()->nb_frames)
+            middle_frame = current_mask->first_frame;
         sliderSet (middle_frame);
         sliderChanged();
     }
@@ -1051,7 +1183,7 @@
   tooltips = gtk_tooltips_new ();
 
   eraser_dialog = gtk_dialog_new ();
-  //                                                NO NEED TO "FIX" THAT _()!!
+  //                                                NO NEED TO "FIX" THAT _("...")!!
   //                                                see handy macros near top of file.
   gtk_window_set_title (GTK_WINDOW (eraser_dialog), _("Eraser Configuration"));
   gtk_window_set_type_hint (GTK_WINDOW (eraser_dialog), GDK_WINDOW_TYPE_HINT_DIALOG);
@@ -1276,9 +1408,8 @@
   gtk_box_pack_start (GTK_BOX (previewVbox), previewControlHbox, TRUE, TRUE, 0);
 
   previewOutputMenu = gtk_combo_box_new_text ();
+  gtk_widget_show (previewOutputMenu);
   gtk_box_pack_start (GTK_BOX (previewControlHbox), previewOutputMenu, FALSE, TRUE, 0);
-  gtk_combo_box_append_text (GTK_COMBO_BOX (previewOutputMenu), _("Eraser output"));
-  gtk_combo_box_append_text (GTK_COMBO_BOX (previewOutputMenu), _("Final output"));
 
   previewSlider = gtk_hscale_new (GTK_ADJUSTMENT (gtk_adjustment_new (0, 0, 99, 1, 1, 0)));
   gtk_widget_show (previewSlider);
@@ -1288,7 +1419,7 @@
   previewVideo = gtk_drawing_area_new ();
   gtk_widget_show (previewVideo);
   gtk_box_pack_start (GTK_BOX (previewVbox), previewVideo, TRUE, TRUE, 0);
-  gtk_widget_set_size_request (previewVideo, -1, 300);
+  gtk_widget_set_size_request (previewVideo, 30, 30);
   gtk_widget_set_events (previewVideo, GDK_BUTTON1_MOTION_MASK | GDK_BUTTON2_MOTION_MASK | GDK_BUTTON3_MOTION_MASK | GDK_BUTTON_PRESS_MASK);
 
   previewLabel = gtk_label_new (_("Preview"));

Modified: branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_flyDialog.cpp
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_flyDialog.cpp	2008-02-03 09:40:17 UTC (rev 3787)
+++ branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_flyDialog.cpp	2008-02-03 12:04:10 UTC (rev 3788)
@@ -23,11 +23,18 @@
 #include "DIA_factory.h"
 #include "ADM_assert.h"
 
+#ifdef USE_JOG
+#include "gui_action.hxx"
+#include "../ADM_toolkit_gtk/ADM_jogshuttle.h"
+
+extern PhysicalJogShuttle *physical_jog_shuttle;
+#endif
+
 extern void GUI_RGBDisplay(uint8_t * dis, uint32_t w, uint32_t h, void *widg);
 extern float UI_calcZoomToFitScreen(GtkWindow* window, GtkWidget* drawingArea, uint32_t imageWidth, uint32_t imageHeight);
 extern void UI_centreCanvasWindow(GtkWindow *window, GtkWidget *canvas, int newCanvasWidth, int newCanvasHeight);
 
-void ADM_flyDialog::postInit(void)
+void ADM_flyDialog::postInit(uint8_t reInit)
 {
 	if (_slider)
 	{
@@ -39,9 +46,59 @@
 
 	GtkWindow *window = (GtkWindow*)gtk_widget_get_ancestor((GtkWidget*)_canvas, GTK_TYPE_WINDOW);
 	UI_centreCanvasWindow(window, (GtkWidget*)_canvas, _zoomW, _zoomH);
-	gtk_widget_set_usize((GtkWidget*)_canvas, _zoomW, _zoomH);
+	gtk_widget_set_size_request((GtkWidget*)_canvas, _zoomW, _zoomH);
+#ifdef USE_JOG
+	physical_jog_shuttle->registerCBs (this, PhysicalJogShuttle::NoButtonCB,
+                                           jogDial, jogRing);
+#endif
 }
 
+uint8_t  ADM_flyDialog::cleanup2(void)
+{
+#ifdef USE_JOG
+	physical_jog_shuttle->deregisterCBs (this);
+#endif
+}
+
+#ifdef USE_JOG
+void ADM_flyDialog::jogDial (void * my_data, signed short offset)
+{
+    ADM_flyDialog * myFly = static_cast <ADM_flyDialog *> (my_data);
+    myFly->sliderSet (myFly->sliderGet() + offset);
+}
+
+static guint jogRingTimerID = 0;
+static signed short jogRingIncr = 0;
+
+static gboolean on_jogRingTimer (gpointer data)
+{
+    gdk_threads_enter();
+
+    ADM_flyDialog * myFly = static_cast <ADM_flyDialog *> (data);
+    myFly->sliderSet (myFly->sliderGet() + jogRingIncr);
+
+    gdk_threads_leave();
+    return TRUE;
+}
+
+void ADM_flyDialog::jogRing (void * my_data, gfloat angle)
+{
+    if (jogRingTimerID)
+    {
+        g_source_remove (jogRingTimerID);
+        jogRingTimerID = 0;
+    }
+
+    if (angle > -0.0001 && angle < 0.0001)
+        return;
+
+    jogRingIncr = (angle < 0) ? -1 : +1;
+    angle *= jogRingIncr; // absolute value
+    jogRingTimerID = g_timeout_add (guint ((1 - angle) * 500 + 10),
+                                    on_jogRingTimer, my_data);
+}
+#endif
+
 float ADM_flyDialog::calcZoomFactor(void)
 {
 	GtkWindow *window = (GtkWindow*)gtk_widget_get_ancestor((GtkWidget*)_canvas, GTK_TYPE_WINDOW);

Modified: branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_particle.cpp
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_particle.cpp	2008-02-03 09:40:17 UTC (rev 3787)
+++ branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_particle.cpp	2008-02-03 12:04:10 UTC (rev 3788)
@@ -39,7 +39,11 @@
 #include "DIA_flyDialog.h"
 #include "DIA_flyParticle.h"
 #include "ADM_userInterfaces/ADM_commonUI/DIA_factory.h" // for diaElemMenu etc.
+#include "ADM_filter/video_filters.h"
 
+#undef _
+#define _(_s) QT_TR_NOOP(_s)
+
 /********************************************************************/
 static GtkWidget *create_particle_dialog (void);
 static GtkWidget *dialog = 0;
@@ -55,10 +59,23 @@
     if (event->type != GDK_BUTTON_PRESS)
         return FALSE;
 
-    uint32_t x = static_cast <uint32_t> (event->x);
-    uint32_t y = static_cast <uint32_t> (event->y);
+    flyParticle * myFly = static_cast <flyParticle *> (data);
 
-    flyParticle * myFly = static_cast <flyParticle *> (data);
+    uint32_t x, y;
+
+    float zoom = myFly->getZoom();
+    if (zoom == 1.0)
+    {
+        x = static_cast <uint32_t> (event->x);
+        y = static_cast <uint32_t> (event->y);
+    }
+    else
+    {
+        zoom = 1 / zoom;
+        x = static_cast <uint32_t> (event->x * zoom + .5);
+        y = static_cast <uint32_t> (event->y * zoom + .5);
+    }
+
     ADMImage * image = event->button == 1
         ? myFly->getInputImage() : myFly->getOutputImage();
 
@@ -182,7 +199,62 @@
 
 /********************************************************************/
 
+static void previewOutputMenuChange (GtkComboBox * combo, gpointer user_data)
+{
+    flyParticle * myFly = static_cast <flyParticle *> (user_data);
+    uint32_t index = gtk_combo_box_get_active (combo);
+    uint32_t filter_count;
+    FILTER * filters = getCurrentVideoFilterList (&filter_count);
+    FILTER * filter = filters + index;
+    VF_FILTERS tag = filter->tag;
+
+
+    gchar * activestr = gtk_combo_box_get_active_text (combo);
+
+    printf ("user selected preview of #%d = %s (%d) @%p (was %p)\n",
+            index, activestr, tag, filter->filter, myFly->getSource());
+
+    if (strncmp (activestr, "XX ", 3) == 0)
+    {
+        printf ("selected preview source has different dimensions - "
+                "forcing selection to current filter\n");
+        gtk_combo_box_set_active (combo, myFly->this_filter_index);
+    }
+    else
+    {
+        flyParticle::PreviewMode mode;
+        if (index == myFly->this_filter_index)
+            mode = flyParticle::PREVIEWMODE_THIS_FILTER;
+        else if (index > myFly->this_filter_index)
+            mode = flyParticle::PREVIEWMODE_LATER_FILTER;
+        else // if (index < myFly->this_filter_index)
+            mode = flyParticle::PREVIEWMODE_EARLIER_FILTER;
+
+        myFly->changeSource (filter->filter, mode);
+    }
+
+    g_free (activestr);
+}
+
+/********************************************************************/
+
+static gboolean preview_video_configured (GtkWidget * widget,
+                                          GdkEventConfigure * event,
+                                          gpointer user_data)
+{
+    fprintf (stderr, "preview_configured: now %dx%d @ +%d+%d\n",
+             event->width, event->height, event->x, event->y);
+
+    flyParticle * myFly = static_cast <flyParticle *> (user_data);
+    myFly->recomputeSize();
+
+    return FALSE;
+}
+
+/********************************************************************/
+
 uint8_t DIA_particle (AVDMGenericVideoStream *in,
+                      ADMVideoParticle * particlep,
                       PARTICLE_PARAM * param,
                       const MenuMapping * menu_mapping,
                       uint32_t menu_mapping_count)
@@ -208,8 +280,13 @@
     flyParticle * myDialog
         = new flyParticle (width, height, in,
                            WID(previewVideo), WID(previewSlider),
-                           GTK_DIALOG(dialog), param,
+                           GTK_DIALOG(dialog), particlep, param,
                            menu_mapping, menu_mapping_count);
+
+    g_signal_connect (GTK_OBJECT (WID(previewVideo)), "configure-event",
+                      GTK_SIGNAL_FUNC (preview_video_configured),
+                      gpointer (myDialog));
+
     myDialog->upload();
     myDialog->sliderChanged();
 
@@ -243,15 +320,67 @@
                       gpointer(myDialog));
 #endif
 
+    GtkWidget * previewOutputMenu = WID(previewOutputMenu);
+    uint32_t filter_count;
+    FILTER * filters = getCurrentVideoFilterList (&filter_count);
+    int32_t active = -1;
+
+    // The " + (active < 0)" below is a bit of a hack.  We know that in
+    // on_action() in gui_filtermanager.cpp, case A_ADD, the new filter-to-be
+    // is added to the filter list without incrementing nb_active_filter yet.
+    // So if we get to the end of the list and haven't yet found the filter
+    // that we're configuring, we know it's a new one and therefore that it is
+    // one past the apparent end of the list.  It's not a clean solution, but
+    // it seems like the cleanEST solution.
+
+    for (uint32_t i = 0; i < filter_count + (active < 0); i++)
+    {
+        const char * name
+            = (i == 0) ? "(input)" : filterGetNameFromTag (filters [i].tag);
+        bool free_name = false;
+                                   
+        FILTER * filter = filters + i;
+        AVDMGenericVideoStream * source = filter->filter;
+        uint32_t w = source->getInfo()->width;
+        uint32_t h = source->getInfo()->height;
+        if (w != width || h != height)
+        {
+            name = g_strconcat ("XX ", name, " XX", NULL);
+            free_name = true;
+        }
+
+        printf ("filter [%d] = %s (%d) @ %p; %dx%d\n",
+                i, name, filter->tag, source, w, h);
+        gtk_combo_box_append_text (GTK_COMBO_BOX (previewOutputMenu), name);
+        if (filter->filter == myDialog->getSource())
+        {
+            gtk_combo_box_set_active (GTK_COMBO_BOX (previewOutputMenu), i);
+            printf ("\tfilter [%d] is being configured now\n", i);
+            active = i;
+        }
+
+        if (free_name)
+            g_free (const_cast <char *> (name));
+    }
+
+    ADM_assert (active >= 0);
+    myDialog->this_filter_index = active;
+
+    g_signal_connect (GTK_OBJECT(previewOutputMenu), "changed",
+                      GTK_SIGNAL_FUNC(previewOutputMenuChange),
+                      gpointer(myDialog));
+
     uint8_t ret = 0;
     int response = gtk_dialog_run(GTK_DIALOG(dialog));
 
     if (response == GTK_RESPONSE_OK)
     {
         myDialog->download();
-        myDialog->getParam (param);
+        myDialog->pushParam();
         ret = 1;
     }
+    else
+        myDialog->restoreParam();
 
     gtk_unregister_dialog(dialog);
     gtk_widget_destroy(dialog);
@@ -350,7 +479,7 @@
   GtkWidget *particle_dialog;
   GtkWidget *dialogVbox;
   GtkWidget *dialogHbox;
-  GtkWidget *allButButtonsVbox;
+  GtkWidget *allButButtonsHbox;
   GtkWidget *settingsOuterHbox;
   GtkWidget *settingsOuterVbox;
   GtkWidget *minAreaHbox;
@@ -402,14 +531,15 @@
   GtkWidget *previewOutputMenu;
   GtkWidget *previewSlider;
   GtkWidget *previewVideo;
-  GtkWidget *previewDisabled;
   GtkWidget *previewLabel;
   GtkWidget *dialogButtonBox;
   GtkWidget *cancelButton;
   GtkWidget *okButton;
 
   particle_dialog = gtk_dialog_new ();
-  gtk_window_set_title (GTK_WINDOW (particle_dialog), QT_TR_NOOP("Particle Detection"));
+  //                                                NO NEED TO "FIX" THAT _("...")!!
+  //                                                see handy macro near top of file.
+  gtk_window_set_title (GTK_WINDOW (particle_dialog), _("Particle Detection"));
   gtk_window_set_type_hint (GTK_WINDOW (particle_dialog), GDK_WINDOW_TYPE_HINT_DIALOG);
 
   dialogVbox = GTK_DIALOG (particle_dialog)->vbox;
@@ -419,24 +549,24 @@
   gtk_widget_show (dialogHbox);
   gtk_box_pack_start (GTK_BOX (dialogVbox), dialogHbox, TRUE, TRUE, 0);
 
-  allButButtonsVbox = gtk_vbox_new (FALSE, 12);
-  gtk_widget_show (allButButtonsVbox);
-  gtk_box_pack_start (GTK_BOX (dialogHbox), allButButtonsVbox, TRUE, TRUE, 0);
-  gtk_container_set_border_width (GTK_CONTAINER (allButButtonsVbox), 8);
+  allButButtonsHbox = gtk_hbox_new (FALSE, 12);
+  gtk_widget_show (allButButtonsHbox);
+  gtk_box_pack_start (GTK_BOX (dialogHbox), allButButtonsHbox, TRUE, TRUE, 0);
+  gtk_container_set_border_width (GTK_CONTAINER (allButButtonsHbox), 8);
 
   settingsOuterHbox = gtk_hbox_new (FALSE, 0);
   gtk_widget_show (settingsOuterHbox);
-  gtk_box_pack_start (GTK_BOX (allButButtonsVbox), settingsOuterHbox, FALSE, TRUE, 0);
+  gtk_box_pack_start (GTK_BOX (allButButtonsHbox), settingsOuterHbox, FALSE, TRUE, 0);
 
   settingsOuterVbox = gtk_vbox_new (FALSE, 12);
   gtk_widget_show (settingsOuterVbox);
-  gtk_box_pack_start (GTK_BOX (settingsOuterHbox), settingsOuterVbox, TRUE, TRUE, 0);
+  gtk_box_pack_start (GTK_BOX (settingsOuterHbox), settingsOuterVbox, FALSE, TRUE, 0);
 
   minAreaHbox = gtk_hbox_new (FALSE, 0);
   gtk_widget_show (minAreaHbox);
-  gtk_box_pack_start (GTK_BOX (settingsOuterVbox), minAreaHbox, TRUE, TRUE, 0);
+  gtk_box_pack_start (GTK_BOX (settingsOuterVbox), minAreaHbox, FALSE, TRUE, 0);
 
-  minAreaLabel = gtk_label_new_with_mnemonic (QT_TR_NOOP("Mi_nimum area for a particle to be detected:    "));
+  minAreaLabel = gtk_label_new_with_mnemonic (_("Mi_nimum area for a particle to be detected:    "));
   gtk_widget_show (minAreaLabel);
   gtk_box_pack_start (GTK_BOX (minAreaHbox), minAreaLabel, FALSE, FALSE, 0);
 
@@ -448,9 +578,9 @@
 
   maxAreaHbox = gtk_hbox_new (FALSE, 0);
   gtk_widget_show (maxAreaHbox);
-  gtk_box_pack_start (GTK_BOX (settingsOuterVbox), maxAreaHbox, TRUE, TRUE, 0);
+  gtk_box_pack_start (GTK_BOX (settingsOuterVbox), maxAreaHbox, FALSE, TRUE, 0);
 
-  maxAreaLabel = gtk_label_new_with_mnemonic (QT_TR_NOOP("Ma_ximum area for a particle to be detected:   "));
+  maxAreaLabel = gtk_label_new_with_mnemonic (_("Ma_ximum area for a particle to be detected:   "));
   gtk_widget_show (maxAreaLabel);
   gtk_box_pack_start (GTK_BOX (maxAreaHbox), maxAreaLabel, FALSE, FALSE, 0);
 
@@ -462,13 +592,13 @@
 
   aboveCropSeparator = gtk_hseparator_new ();
   gtk_widget_show (aboveCropSeparator);
-  gtk_box_pack_start (GTK_BOX (settingsOuterVbox), aboveCropSeparator, TRUE, TRUE, 0);
+  gtk_box_pack_start (GTK_BOX (settingsOuterVbox), aboveCropSeparator, FALSE, TRUE, 0);
 
   leftCropHbox = gtk_hbox_new (FALSE, 0);
   gtk_widget_show (leftCropHbox);
-  gtk_box_pack_start (GTK_BOX (settingsOuterVbox), leftCropHbox, TRUE, TRUE, 0);
+  gtk_box_pack_start (GTK_BOX (settingsOuterVbox), leftCropHbox, FALSE, TRUE, 0);
 
-  leftCropLabel = gtk_label_new_with_mnemonic (QT_TR_NOOP("_Left side crop (ignore this many pixels on the left):        "));
+  leftCropLabel = gtk_label_new_with_mnemonic (_("_Left side crop (ignore this many pixels on the left):        "));
   gtk_widget_show (leftCropLabel);
   gtk_box_pack_start (GTK_BOX (leftCropHbox), leftCropLabel, FALSE, FALSE, 0);
 
@@ -480,9 +610,9 @@
 
   rightCropHbox = gtk_hbox_new (FALSE, 0);
   gtk_widget_show (rightCropHbox);
-  gtk_box_pack_start (GTK_BOX (settingsOuterVbox), rightCropHbox, TRUE, TRUE, 0);
+  gtk_box_pack_start (GTK_BOX (settingsOuterVbox), rightCropHbox, FALSE, TRUE, 0);
 
-  rightCropLabel = gtk_label_new_with_mnemonic (QT_TR_NOOP("_Right side crop (ignore this many pixels on the right):     "));
+  rightCropLabel = gtk_label_new_with_mnemonic (_("_Right side crop (ignore this many pixels on the right):     "));
   gtk_widget_show (rightCropLabel);
   gtk_box_pack_start (GTK_BOX (rightCropHbox), rightCropLabel, FALSE, FALSE, 0);
 
@@ -494,9 +624,9 @@
 
   topCropHbox = gtk_hbox_new (FALSE, 0);
   gtk_widget_show (topCropHbox);
-  gtk_box_pack_start (GTK_BOX (settingsOuterVbox), topCropHbox, TRUE, TRUE, 0);
+  gtk_box_pack_start (GTK_BOX (settingsOuterVbox), topCropHbox, FALSE, TRUE, 0);
 
-  topCropLabel = gtk_label_new_with_mnemonic (QT_TR_NOOP("_Top crop (ignore this many pixels on the top):                  "));
+  topCropLabel = gtk_label_new_with_mnemonic (_("_Top crop (ignore this many pixels on the top):                  "));
   gtk_widget_show (topCropLabel);
   gtk_box_pack_start (GTK_BOX (topCropHbox), topCropLabel, FALSE, FALSE, 0);
 
@@ -508,9 +638,9 @@
 
   bottomCropHbox = gtk_hbox_new (FALSE, 0);
   gtk_widget_show (bottomCropHbox);
-  gtk_box_pack_start (GTK_BOX (settingsOuterVbox), bottomCropHbox, TRUE, TRUE, 0);
+  gtk_box_pack_start (GTK_BOX (settingsOuterVbox), bottomCropHbox, FALSE, TRUE, 0);
 
-  bottomCropLabel = gtk_label_new_with_mnemonic (QT_TR_NOOP("_Bottom crop (ignore this many pixels on the bottom):   "));
+  bottomCropLabel = gtk_label_new_with_mnemonic (_("_Bottom crop (ignore this many pixels on the bottom):   "));
   gtk_widget_show (bottomCropLabel);
   gtk_box_pack_start (GTK_BOX (bottomCropHbox), bottomCropLabel, FALSE, FALSE, 0);
 
@@ -522,13 +652,13 @@
 
   belowCropSeparator = gtk_hseparator_new ();
   gtk_widget_show (belowCropSeparator);
-  gtk_box_pack_start (GTK_BOX (settingsOuterVbox), belowCropSeparator, TRUE, TRUE, 0);
+  gtk_box_pack_start (GTK_BOX (settingsOuterVbox), belowCropSeparator, FALSE, TRUE, 0);
 
   outputFormatHbox = gtk_hbox_new (FALSE, 0);
   gtk_widget_show (outputFormatHbox);
-  gtk_box_pack_start (GTK_BOX (settingsOuterVbox), outputFormatHbox, TRUE, TRUE, 0);
+  gtk_box_pack_start (GTK_BOX (settingsOuterVbox), outputFormatHbox, FALSE, TRUE, 0);
 
-  outputFormatLabel = gtk_label_new_with_mnemonic (QT_TR_NOOP("Output _Format:   "));
+  outputFormatLabel = gtk_label_new_with_mnemonic (_("Output _Format:   "));
   gtk_widget_show (outputFormatLabel);
   gtk_box_pack_start (GTK_BOX (outputFormatHbox), outputFormatLabel, FALSE, FALSE, 0);
 
@@ -538,9 +668,9 @@
 
   outputFileHbox = gtk_hbox_new (FALSE, 5);
   gtk_widget_show (outputFileHbox);
-  gtk_box_pack_start (GTK_BOX (settingsOuterVbox), outputFileHbox, TRUE, TRUE, 0);
+  gtk_box_pack_start (GTK_BOX (settingsOuterVbox), outputFileHbox, FALSE, TRUE, 0);
 
-  outputFileLabel = gtk_label_new_with_mnemonic (QT_TR_NOOP("_Output File:"));
+  outputFileLabel = gtk_label_new_with_mnemonic (_("_Output File:"));
   gtk_widget_show (outputFileLabel);
   gtk_box_pack_start (GTK_BOX (outputFileHbox), outputFileLabel, FALSE, FALSE, 0);
 
@@ -550,15 +680,15 @@
   gtk_entry_set_invisible_char (GTK_ENTRY (outputFileEntry), 8226);
   gtk_entry_set_width_chars (GTK_ENTRY (outputFileEntry), 40);
 
-  outputFileBrowseButton = gtk_button_new_with_mnemonic (QT_TR_NOOP("_Browse..."));
+  outputFileBrowseButton = gtk_button_new_with_mnemonic (_("_Browse..."));
   gtk_widget_show (outputFileBrowseButton);
   gtk_box_pack_start (GTK_BOX (outputFileHbox), outputFileBrowseButton, FALSE, FALSE, 0);
 
   cameraNumberHbox = gtk_hbox_new (FALSE, 0);
   gtk_widget_show (cameraNumberHbox);
-  gtk_box_pack_start (GTK_BOX (settingsOuterVbox), cameraNumberHbox, TRUE, TRUE, 0);
+  gtk_box_pack_start (GTK_BOX (settingsOuterVbox), cameraNumberHbox, FALSE, TRUE, 0);
 
-  cameraNumberLabel = gtk_label_new_with_mnemonic (QT_TR_NOOP("_Camera Number for output file:      "));
+  cameraNumberLabel = gtk_label_new_with_mnemonic (_("_Camera Number for output file:      "));
   gtk_widget_show (cameraNumberLabel);
   gtk_box_pack_start (GTK_BOX (cameraNumberHbox), cameraNumberLabel, FALSE, FALSE, 0);
 
@@ -570,9 +700,9 @@
 
   debugHbox = gtk_hbox_new (FALSE, 0);
   gtk_widget_show (debugHbox);
-  gtk_box_pack_start (GTK_BOX (settingsOuterVbox), debugHbox, TRUE, TRUE, 0);
+  gtk_box_pack_start (GTK_BOX (settingsOuterVbox), debugHbox, FALSE, TRUE, 0);
 
-  debugLabel = gtk_label_new_with_mnemonic (QT_TR_NOOP("_Debugging settings (bits):   "));
+  debugLabel = gtk_label_new_with_mnemonic (_("_Debugging settings (bits):   "));
   gtk_widget_show (debugLabel);
   gtk_box_pack_start (GTK_BOX (debugHbox), debugLabel, FALSE, FALSE, 0);
 
@@ -584,7 +714,7 @@
 
   previewVboxOuter = gtk_vbox_new (FALSE, 0);
   gtk_widget_show (previewVboxOuter);
-  gtk_box_pack_start (GTK_BOX (allButButtonsVbox), previewVboxOuter, TRUE, TRUE, 0);
+  gtk_box_pack_start (GTK_BOX (allButButtonsHbox), previewVboxOuter, TRUE, TRUE, 0);
 
   previewFrame = gtk_frame_new (NULL);
   gtk_widget_show (previewFrame);
@@ -604,9 +734,8 @@
   gtk_box_pack_start (GTK_BOX (previewVbox), previewControlHbox, TRUE, TRUE, 0);
 
   previewOutputMenu = gtk_combo_box_new_text ();
+  gtk_widget_show (previewOutputMenu);
   gtk_box_pack_start (GTK_BOX (previewControlHbox), previewOutputMenu, FALSE, TRUE, 0);
-  gtk_combo_box_append_text (GTK_COMBO_BOX (previewOutputMenu), QT_TR_NOOP("Swiss Army Knife output"));
-  gtk_combo_box_append_text (GTK_COMBO_BOX (previewOutputMenu), QT_TR_NOOP("Final output"));
 
   previewSlider = gtk_hscale_new (GTK_ADJUSTMENT (gtk_adjustment_new (0, 0, 99, 1, 1, 0)));
   gtk_widget_show (previewSlider);
@@ -616,13 +745,10 @@
   previewVideo = gtk_drawing_area_new ();
   gtk_widget_show (previewVideo);
   gtk_box_pack_start (GTK_BOX (previewVbox), previewVideo, TRUE, TRUE, 0);
-  gtk_widget_set_size_request (previewVideo, -1, 300);
+  gtk_widget_set_size_request (previewVideo, 30, 30);
   gtk_widget_set_events (previewVideo, GDK_BUTTON1_MOTION_MASK | GDK_BUTTON_PRESS_MASK);
 
-  previewDisabled = gtk_drawing_area_new ();
-  gtk_box_pack_start (GTK_BOX (previewVbox), previewDisabled, TRUE, TRUE, 0);
-
-  previewLabel = gtk_label_new (QT_TR_NOOP("Preview"));
+  previewLabel = gtk_label_new (_("Preview"));
   gtk_widget_show (previewLabel);
   gtk_frame_set_label_widget (GTK_FRAME (previewFrame), previewLabel);
 
@@ -654,7 +780,7 @@
   GLADE_HOOKUP_OBJECT_NO_REF (particle_dialog, particle_dialog, "particle_dialog");
   GLADE_HOOKUP_OBJECT_NO_REF (particle_dialog, dialogVbox, "dialogVbox");
   GLADE_HOOKUP_OBJECT (particle_dialog, dialogHbox, "dialogHbox");
-  GLADE_HOOKUP_OBJECT (particle_dialog, allButButtonsVbox, "allButButtonsVbox");
+  GLADE_HOOKUP_OBJECT (particle_dialog, allButButtonsHbox, "allButButtonsHbox");
   GLADE_HOOKUP_OBJECT (particle_dialog, settingsOuterHbox, "settingsOuterHbox");
   GLADE_HOOKUP_OBJECT (particle_dialog, settingsOuterVbox, "settingsOuterVbox");
   GLADE_HOOKUP_OBJECT (particle_dialog, minAreaHbox, "minAreaHbox");
@@ -698,7 +824,6 @@
   GLADE_HOOKUP_OBJECT (particle_dialog, previewOutputMenu, "previewOutputMenu");
   GLADE_HOOKUP_OBJECT (particle_dialog, previewSlider, "previewSlider");
   GLADE_HOOKUP_OBJECT (particle_dialog, previewVideo, "previewVideo");
-  GLADE_HOOKUP_OBJECT (particle_dialog, previewDisabled, "previewDisabled");
   GLADE_HOOKUP_OBJECT (particle_dialog, previewLabel, "previewLabel");
   GLADE_HOOKUP_OBJECT_NO_REF (particle_dialog, dialogButtonBox, "dialogButtonBox");
   GLADE_HOOKUP_OBJECT (particle_dialog, cancelButton, "cancelButton");

Modified: branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_threshold.cpp
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_threshold.cpp	2008-02-03 09:40:17 UTC (rev 3787)
+++ branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_threshold.cpp	2008-02-03 12:04:10 UTC (rev 3788)
@@ -36,7 +36,11 @@
 #include "ADM_assert.h"
 #include "DIA_flyDialog.h"
 #include "DIA_flyThreshold.h"
+#include "ADM_filter/video_filters.h"
 
+#undef _
+#define _(_s) QT_TR_NOOP(_s)
+
 /********************************************************************/
 static GtkWidget *create_threshold_dialog (void);
 static GtkWidget *dialog = 0;
@@ -58,10 +62,23 @@
     if (event->type != GDK_BUTTON_PRESS)
         return FALSE;
 
-    uint32_t x = static_cast <uint32_t> (event->x);
-    uint32_t y = static_cast <uint32_t> (event->y);
+    flyThreshold * myFly = static_cast <flyThreshold *> (data);
 
-    flyThreshold * myFly = static_cast <flyThreshold *> (data);
+    uint32_t x, y;
+
+    float zoom = myFly->getZoom();
+    if (zoom == 1.0)
+    {
+        x = static_cast <uint32_t> (event->x);
+        y = static_cast <uint32_t> (event->y);
+    }
+    else
+    {
+        zoom = 1 / zoom;
+        x = static_cast <uint32_t> (event->x * zoom + .5);
+        y = static_cast <uint32_t> (event->y * zoom + .5);
+    }
+
     ADMImage * image = event->button == 1
         ? myFly->getInputImage() : myFly->getOutputImage();
 
@@ -116,8 +133,63 @@
 
 /********************************************************************/
 
-uint8_t DIA_threshold (AVDMGenericVideoStream *in, THRESHOLD_PARAM * param)
+static void previewOutputMenuChange (GtkComboBox * combo, gpointer user_data)
 {
+    flyThreshold * myFly = static_cast <flyThreshold *> (user_data);
+    uint32_t index = gtk_combo_box_get_active (combo);
+    uint32_t filter_count;
+    FILTER * filters = getCurrentVideoFilterList (&filter_count);
+    FILTER * filter = filters + index;
+    VF_FILTERS tag = filter->tag;
+
+    gchar * activestr = gtk_combo_box_get_active_text (combo);
+
+    printf ("user selected preview of #%d = %s (%d) @%p (was %p)\n",
+            index, activestr, tag, filter->filter, myFly->getSource());
+
+    if (strncmp (activestr, "XX ", 3) == 0)
+    {
+        printf ("selected preview source has different dimensions - "
+                "forcing selection to current filter\n");
+        gtk_combo_box_set_active (combo, myFly->this_filter_index);
+    }
+    else
+    {
+        flyThreshold::PreviewMode mode;
+        if (index == myFly->this_filter_index)
+            mode = flyThreshold::PREVIEWMODE_THIS_FILTER;
+        else if (index > myFly->this_filter_index)
+            mode = flyThreshold::PREVIEWMODE_LATER_FILTER;
+        else // if (index < myFly->this_filter_index)
+            mode = flyThreshold::PREVIEWMODE_EARLIER_FILTER;
+
+        myFly->changeSource (filter->filter, mode);
+    }
+
+    g_free (activestr);
+}
+
+/********************************************************************/
+
+static gboolean preview_video_configured (GtkWidget * widget,
+                                          GdkEventConfigure * event,
+                                          gpointer user_data)
+{
+    fprintf (stderr, "preview_configured: now %dx%d @ +%d+%d\n",
+             event->width, event->height, event->x, event->y);
+
+    flyThreshold * myFly = static_cast <flyThreshold *> (user_data);
+    myFly->recomputeSize();
+
+    return FALSE;
+}
+
+/********************************************************************/
+
+uint8_t DIA_threshold (AVDMGenericVideoStream *in,
+                       ADMVideoThreshold * thresholdp,
+                       THRESHOLD_PARAM * param)
+{
     // Allocate space for preview video
     uint32_t width = in->getInfo()->width;
     uint32_t height = in->getInfo()->height;
@@ -130,7 +202,12 @@
 
     myDialog = new flyThreshold (width, height, in,
                                  WID(previewVideo), WID(previewSlider),
-                                 param);
+                                 thresholdp, param);
+
+    g_signal_connect (GTK_OBJECT (WID(previewVideo)), "configure-event",
+                      GTK_SIGNAL_FUNC (preview_video_configured),
+                      gpointer (myDialog));
+
     myDialog->upload();
     myDialog->sliderChanged();
 
@@ -161,15 +238,67 @@
                      gpointer(myDialog));
 #endif
 
+    GtkWidget * previewOutputMenu = WID(previewOutputMenu);
+    uint32_t filter_count;
+    FILTER * filters = getCurrentVideoFilterList (&filter_count);
+    int32_t active = -1;
+
+    // The " + (active < 0)" below is a bit of a hack.  We know that in
+    // on_action() in gui_filtermanager.cpp, case A_ADD, the new filter-to-be
+    // is added to the filter list without incrementing nb_active_filter yet.
+    // So if we get to the end of the list and haven't yet found the filter
+    // that we're configuring, we know it's a new one and therefore that it is
+    // one past the apparent end of the list.  It's not a clean solution, but
+    // it seems like the cleanEST solution.
+
+    for (uint32_t i = 0; i < filter_count + (active < 0); i++)
+    {
+        const char * name
+            = (i == 0) ? "(input)" : filterGetNameFromTag (filters [i].tag);
+        bool free_name = false;
+                                   
+        FILTER * filter = filters + i;
+        AVDMGenericVideoStream * source = filter->filter;
+        uint32_t w = source->getInfo()->width;
+        uint32_t h = source->getInfo()->height;
+        if (w != width || h != height)
+        {
+            name = g_strconcat ("XX ", name, " XX", NULL);
+            free_name = true;
+        }
+
+        printf ("filter [%d] = %s (%d) @ %p; %dx%d\n",
+                i, name, filter->tag, source, w, h);
+        gtk_combo_box_append_text (GTK_COMBO_BOX (previewOutputMenu), name);
+        if (filter->filter == myDialog->getSource())
+        {
+            gtk_combo_box_set_active (GTK_COMBO_BOX (previewOutputMenu), i);
+            printf ("\tfilter [%d] is being configured now\n", i);
+            active = i;
+        }
+
+        if (free_name)
+            g_free (const_cast <char *> (name));
+    }
+
+    ADM_assert (active >= 0);
+    myDialog->this_filter_index = active;
+
+    g_signal_connect (GTK_OBJECT(previewOutputMenu), "changed",
+                      GTK_SIGNAL_FUNC(previewOutputMenuChange),
+                      gpointer(myDialog));
+
     uint8_t ret = 0;
     int response = gtk_dialog_run(GTK_DIALOG(dialog));
 
     if (response == GTK_RESPONSE_OK)
     {
         myDialog->download();
-        myDialog->getParam (param);
+        myDialog->pushParam();
         ret = 1;
     }
+    else
+        myDialog->restoreParam();
 
     gtk_unregister_dialog(dialog);
     gtk_widget_destroy(dialog);
@@ -396,13 +525,8 @@
   gtk_box_pack_start (GTK_BOX (previewVbox), previewControlHbox, TRUE, TRUE, 0);
 
   previewOutputMenu = gtk_combo_box_new_text ();
-#ifdef ORIGINAL_CODE_GENERATED_BY_GLADE
-  // temporarily (?) disable this until it's actually implemented
   gtk_widget_show (previewOutputMenu);
-#endif
   gtk_box_pack_start (GTK_BOX (previewControlHbox), previewOutputMenu, FALSE, TRUE, 0);
-  gtk_combo_box_append_text (GTK_COMBO_BOX (previewOutputMenu), QT_TR_NOOP("Threshold output"));
-  gtk_combo_box_append_text (GTK_COMBO_BOX (previewOutputMenu), QT_TR_NOOP("Final output"));
 
   previewSlider = gtk_hscale_new (GTK_ADJUSTMENT (gtk_adjustment_new (0, 0, 99, 1, 1, 1)));
   gtk_widget_show (previewSlider);
@@ -412,7 +536,7 @@
   previewVideo = gtk_drawing_area_new ();
   gtk_widget_show (previewVideo);
   gtk_box_pack_start (GTK_BOX (previewVbox), previewVideo, TRUE, TRUE, 0);
-  gtk_widget_set_size_request (previewVideo, -1, 300);
+  gtk_widget_set_size_request (previewVideo, 30, 30);
   gtk_widget_set_events (previewVideo, GDK_BUTTON1_MOTION_MASK | GDK_BUTTON_PRESS_MASK);
 
   previewLabel = gtk_label_new (QT_TR_NOOP("Preview"));

Modified: branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager.cpp
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager.cpp	2008-02-03 09:40:17 UTC (rev 3787)
+++ branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager.cpp	2008-02-03 12:04:10 UTC (rev 3788)
@@ -181,6 +181,7 @@
         CONFcouple *coup;
         videofilters[nb_active_filter].filter =
             filterCreateFromTag (tag, NULL, videofilters[nb_active_filter - 1].filter);
+        videofilters[nb_active_filter].tag = tag;
         if(!videofilters[nb_active_filter].filter->
                     configure (videofilters[nb_active_filter - 1].filter))
         {
@@ -188,7 +189,6 @@
             break;
         }
         videofilters[nb_active_filter].filter->getCoupledConf (&coup);
-        videofilters[nb_active_filter].tag = tag;
         videofilters[nb_active_filter].conf = coup;
         nb_active_filter++;
         updateFilterList ();
@@ -401,6 +401,8 @@
 #define CALLME(x,y) gtk_dialog_add_action_widget (GTK_DIALOG (dialog), WID(x), y)
 
 	//CALLME (toolbuttonAdd, A_ADD);
+        // Each of these triggers the following message:
+        // Gtk-CRITICAL **: gtk_box_pack_end: assertion `child->parent == NULL' failed
         CALLME (buttonRemove,		A_REMOVE);
         CALLME (buttonProperties,	A_CONFIGURE);
         CALLME (buttonUp, 		A_UP);

Modified: branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/ADM_jogshuttle.cpp
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/ADM_jogshuttle.cpp	2008-02-03 09:40:17 UTC (rev 3787)
+++ branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/ADM_jogshuttle.cpp	2008-02-03 12:04:10 UTC (rev 3788)
@@ -52,10 +52,7 @@
 #include "jogshuttle.h"
 #include "ADM_jogshuttle.h"
 #include "ADM_image.h"
-#include "gtkgui.h"
 
-GtkWidget * lookup_jog_shuttle_widget (void); // GUI_bindings.cpp
-
 /// PhysicalJogShuttle
 
 /** The global PhysicalJogShuttle object.
@@ -79,7 +76,6 @@
 /** Constructor
  */
 PhysicalJogShuttle::PhysicalJogShuttle() :
-    _callback (0),
     input_ (-1),
     monitorTag_ (-1),
     _modifier_code (0),
@@ -191,6 +187,18 @@
     }
 }
 
+void PhysicalJogShuttle::NoButtonCB (void *, unsigned short, Action)
+{
+}
+
+void PhysicalJogShuttle::NoJogDialCB (void *, signed short)
+{
+}
+
+void PhysicalJogShuttle::NoShuttleRingCB (void *, gfloat)
+{
+}
+
 /// A static wrappper for the GDK input handler callback
 void PhysicalJogShuttle::inputCallback (gpointer data, gint source,
                                         GdkInputCondition condition)
@@ -234,34 +242,37 @@
         media_ctrl_close (&_ctrl);
 }
 
-#if 0
 /** Register callback
  
-    Register an interest in getting notification when buttons are pressed
-    
-    \param callback Function to call
+    Register an interest in getting notification when buttons are pressed or
+    the jog dial or shuttle ring are manipulated
 */
-void PhysicalJogShuttle::registerCallback (void * user, JogShuttleCallback callback)
+void PhysicalJogShuttle::registerCBs (void * their_data,
+                                      ButtonCallback button_cb,
+                                      JogDialCallback jogdial_cb,
+                                      ShuttleRingCallback shuttlering_cb)
 {
-    if (_callback)
-        g_warning ("PhysicalJogShuttle::registerCallback - already registered\n");
-    _callback = callback;
-    _callbackdata = user;
+    cbstack.push (Callbacks (their_data, button_cb, jogdial_cb, shuttlering_cb));
 }
 
 /** Deregister callback
  
     Deregister an interest in getting notification when buttons are pressed
-    
-    \param callback Function to stop calling
 */
-void PhysicalJogShuttle::deregisterCallback ()
+void PhysicalJogShuttle::deregisterCBs (void * their_data)
 {
-    if (_callback == NULL)
-        g_warning( "PhysicalJogShuttle::deregisterCallback - not registered\n");
-    _callback = 0;
+    if (cbstack.empty())
+        g_warning( "PhysicalJogShuttle::deregister (callback) - none registered\n");
+    else
+    {
+        // if the data doesn't match, we could in theory search down the stack
+        // to see if someone skipped a deregister() call.  But more than one
+        // may have passed NULL as the data...
+        if (their_data != cbstack.top().their_data)
+            g_warning( "PhysicalJogShuttle::deregister (callback) - data doesn't match!!\n");
+        cbstack.pop();
+    }
 }
-#endif
 
 struct media_ctrl_key *PhysicalJogShuttle::getKeyset ()
 {
@@ -281,50 +292,36 @@
 {
     gdk_threads_enter();
     // printf ("jog %d\n", offs);
-    if (offs < 0)
-        GUI_PrevFrame (uint32_t (-offs));
-    else
-        GUI_NextFrame (uint32_t (offs));
+
+    if (!cbstack.empty())
+    {
+        Callbacks & cb = cbstack.top();
+        if (cb.jogdial_cb)
+            cb.jogdial_cb (cb.their_data, offs);
+    }
+
     gdk_threads_leave();
 }
 
 /** Handle movement of the shuttle ring.
  
-    \param angle A number from -15 to +15 that specifies a direction and speed.
+    \param angle A number from -1.0 to +1.0 that specifies a direction and speed.
 */
 void PhysicalJogShuttle::shuttle (gfloat angle)
 {
     gdk_threads_enter();
     // printf ("shuttle %f\n", angle);
-    GtkWidget * jsw = lookup_jog_shuttle_widget();
-    if (jsw)
-        jog_shuttle_set_value (jsw, angle);
-    gdk_threads_leave();
-}
 
-// This is part of a hack to allow the user to attach the Play and Stop
-// actions to buttons.  The problem is that once we launch the Play action,
-// HandleAction() doesn't return to its caller until avidemux stops playing,
-// so if HandleAction() is called directly from the event handler, there is no
-// way for the Stop button to be seen until something else has already stopped
-// it.  However, if we have the event handler just set up a timer, which
-// launches the play action, it's only the timer that is locked up, and since
-// we only use the timer for the Play action (and not any of the other
-// buttons), then everything (including the Stop button) works just fine.
-// A GTK expert might know of a better way to solve this problem, but I'm not
-// convinced that one exists in current GTK (2.10 on my FC7 system, but we
-// need to support older ones, too).
+    if (!cbstack.empty())
+    {
+        Callbacks & cb = cbstack.top();
+        if (cb.shuttlering_cb)
+            cb.shuttlering_cb (cb.their_data, angle);
+    }
 
-gint
-on_PlayButtonHackTimer (gpointer data)
-{
-   gdk_threads_enter();
-   HandleAction (ACT_PlayAvi);
-   gdk_threads_leave();
-   return 0;
+    gdk_threads_leave();
 }
 
-
 /** Handle key press
  
     \param ev The key event
@@ -346,6 +343,15 @@
     // Note: the modifier stuff is carried over from kino, but not currently
     // in use here.  I've left it here just in case someone decides to enable
     // it some day.  However, it doesn't seem to work the way I would expect.
+    // Probably the best thing would be to implement full modifier support
+    // wherein the standard keyboard modifiers work (Shift, Control, Alt,
+    // Meta, etc.) and (ideally) you can also select buttons on the device to
+    // act as true modifiers (that is, they work like the
+    // Shift/Control/etc. keys), rather than the hackish thing that is
+    // half-implemented here.  Or maybe it's easier on the user to have it be
+    // a button-sequence thing where you hit the "modifier" and then the other
+    // button, and don't have to hold one down.  I suppose the best thing
+    // would be to give the user the option...
 
     /* 
        Release may need to clear a modifier key
@@ -356,63 +362,49 @@
         return;
     }
 
-    /* Do a callback or action based command */
-    if (_callback != 0)
-    {
-        /* This is a key press - if there are no modifier, make sure that
-           this is saved */
-        if (_modifier_code == 0)
-            _modifier_code = ev->index + 1;
+    /* This is a key press - if there are no modifiers, make sure that
+       this is saved */
+    if (_modifier_code == 0)
+        _modifier_code = ev->code;
 
-        if (_modifier_code != ev->index + 1)
-        {
-            first = _modifier_code - 1;
-            second = ev->index + 1;
-        }
-        else
-        {
-            first = ev->index; /* Same as modifier */
-            second = 0;
-        }
-        _callback (_callbackdata, first, second);
+    if (_modifier_code != ev->code)
+    {
+        first = _modifier_code;
+        second = ev->code;
     }
     else
     {
-        /* This is a key press - if there are no modifier, make sure that
-           this is saved */
-        if (_modifier_code == 0)
-            _modifier_code = ev->code;
-
-        if (_modifier_code != ev->code)
-        {
-            first = _modifier_code;
-            second = ev->code;
-        }
-        else
-        {
-            first = ev->code; /* Same as modifier */
-            second = 0;
-        }
+        first = ev->code; /* Same as modifier */
+        second = 0;
+    }
 		
-        gdk_threads_enter();
+    gdk_threads_enter();
 
-        ButtonActionIter it = button_action_map.find (first);
-        if (it != button_action_map.end())
-        {
-            if (show_buttons)
-                printf ("button pressed: %d -> %s\n",
-                        first, getActionName (it->second));
-            // hack alert: see comment for on_PlayButtonHackTimer(), above
-            if (it->second == ACT_PlayAvi)
-                g_timeout_add (10, on_PlayButtonHackTimer, NULL);
-            else
-                HandleAction (it->second);
-        }
-        else if (show_buttons)
-            printf ("button pressed: %d (not mapped)\n", first);
+    ButtonActionIter it = button_action_map.find (first);
+    Action actn;
+    const char * name;
+    if (it == button_action_map.end())
+    {
+        actn = ACT_INVALID;
+        name = "(not mapped)";
+    }
+    else
+    {
+        actn = it->second;
+        name = getActionName (actn);
+    }
 
-        gdk_threads_leave();
+    if (show_buttons)
+        printf ("button pressed: %d -> %d: %s\n", first, actn, name);
+
+    if (!cbstack.empty())
+    {
+        Callbacks & cb = cbstack.top();
+        if (cb.button_cb)
+            cb.button_cb (cb.their_data, first, actn);
     }
+
+    gdk_threads_leave();
 }
 
 

Modified: branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/ADM_jogshuttle.h
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/ADM_jogshuttle.h	2008-02-03 09:40:17 UTC (rev 3787)
+++ branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/ADM_jogshuttle.h	2008-02-03 12:04:10 UTC (rev 3788)
@@ -25,6 +25,8 @@
 #define JOGSHUTTLE_H
 
 #include <map>
+#include <stack>
+#include <vector>
 
 #include <gtk/gtk.h>
 #ifdef USE_JOG
@@ -42,7 +44,7 @@
 /**
  * Class to encapsulate an abstract JogShuttle device.
  * 
- * This class is used by the kino core to interact with a JogShuttle
+ * This class was used by the kino core to interact with a JogShuttle
  * device.  (Also used by the preference dialog for configuration).
  * It depends on the GDK input system, and uses the libmediactrl stuff
  * to translate different (more or less broken) devices events into
@@ -51,14 +53,45 @@
 
 class PhysicalJogShuttle
 { 
-private: 
+public:
+    typedef void (* ButtonCallback) (void * your_data,
+                                     unsigned short raw_button,
+                                     Action gui_action);
+    typedef void (* JogDialCallback) (void * your_data,
+                                      signed short offset); // typ. -1 or +1
+    typedef void (* ShuttleRingCallback) (void * your_data,
+                                          gfloat angle); // -1.0 to 0 to +1.0
+
+    static void NoButtonCB (void *, unsigned short, Action);
+    static void NoJogDialCB (void *, signed short);
+    static void NoShuttleRingCB (void *, gfloat);
+
+private:
     /** Singleton pattern. */
     static PhysicalJogShuttle *_instance; 
-    /** Placeholder for callbacks. */
-    JogShuttleCallback _callback; 
-    /** Any client supplied callbackdata is here. */
-    void * _callbackdata;
 
+    struct Callbacks
+    {
+        void * their_data;
+        ButtonCallback button_cb;
+        JogDialCallback jogdial_cb;
+        ShuttleRingCallback shuttlering_cb;
+
+        Callbacks (void * their_data,
+                   ButtonCallback button_cb,
+                   JogDialCallback jogdial_cb,
+                   ShuttleRingCallback shuttlering_cb)
+            : their_data (their_data),
+              button_cb (button_cb),
+              jogdial_cb (jogdial_cb),
+              shuttlering_cb (shuttlering_cb)
+        {
+        }
+    };
+
+    typedef std::stack <Callbacks, std::vector <Callbacks> > CallbackStack;
+    CallbackStack cbstack;
+
 protected:
     static void inputCallback (gpointer data, gint source,
                                GdkInputCondition condition);
@@ -70,8 +103,11 @@
     bool start();
     void stop();
     static PhysicalJogShuttle & getInstance();
-    void registerCallback (void * user, JogShuttleCallback callback);
-    void deregisterCallback();
+    void registerCBs (void * your_data,
+                      ButtonCallback button_cb,
+                      JogDialCallback jogdial_cb,
+                      ShuttleRingCallback shuttlering_cb);
+    void deregisterCBs (void * your_data);
     struct media_ctrl_key *getKeyset();
 
 private:

Modified: branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/mediactrl.c
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/mediactrl.c	2008-02-03 09:40:17 UTC (rev 3787)
+++ branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/mediactrl.c	2008-02-03 12:04:10 UTC (rev 3788)
@@ -212,6 +212,7 @@
                         // and 1.  But I'm going to do it in a way that leaves
                         // the remaining values proportionate.
 				
+			//printf("Shuttle raw: %d\n", cv);
 			if ( cv == ctrl->lastshu ) return;
 			ctrl->lastshu = cv;
 				
@@ -376,7 +377,7 @@
 
 int probe_device(struct media_ctrl *mc, const char * devname)
 {
-	short devinfo[4];
+	struct input_id devinfo;
 	int i = 0;
 	  
         /* suck out the name information 
@@ -396,12 +397,15 @@
 	}
 	
 	do {
-		if ( supported_devices[i].vendor == devinfo[1] 
-			&& supported_devices[i].product == devinfo[2] ) {
+		if ( supported_devices[i].vendor == devinfo.vendor
+			&& supported_devices[i].product == devinfo.product ) {
 				
 			mc->device = &supported_devices[i];
-			printf("Success on %s: %s: %s\n",
-                               devname, name, mc->device->name);
+			printf("Success on %s: %s = %s (bus %04x vendor %04x "
+                               "product %04x version %04x)\n",
+                               devname, name, mc->device->name,
+                               devinfo.bustype, devinfo.vendor,
+                               devinfo.product, devinfo.version);
 			// mc->fd = fd;
 			// mc->translate = mc->device.translate_function;
 			// mc = malloc(sizeof(struct media_ctrl));
@@ -416,7 +420,10 @@
 	
 	} while ( supported_devices[++i].vendor != 0 );
 			
-        printf("Not interested in %s: %s\n", devname, name);
+        printf("Not interested in %s: %s (bus %04x vendor %04x "
+               "product %04x version %04x)\n",
+               devname, name, devinfo.bustype, devinfo.vendor,
+               devinfo.product, devinfo.version);
 	return 0;
 }
 

Modified: branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/glade/eraser.glade
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/glade/eraser.glade	2008-02-03 09:40:17 UTC (rev 3787)
+++ branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/glade/eraser.glade	2008-02-03 12:04:10 UTC (rev 3788)
@@ -798,8 +798,8 @@
 
 			      <child>
 				<widget class="GtkComboBox" id="previewOutputMenu">
-				  <property name="items" translatable="yes">Eraser output
-Final output</property>
+				  <property name="visible">True</property>
+				  <property name="items" translatable="yes"></property>
 				  <property name="add_tearoffs">False</property>
 				  <property name="focus_on_click">True</property>
 				</widget>
@@ -837,7 +837,8 @@
 
 			  <child>
 			    <widget class="GtkDrawingArea" id="previewVideo">
-			      <property name="height_request">300</property>
+			      <property name="width_request">30</property>
+			      <property name="height_request">30</property>
 			      <property name="visible">True</property>
 			      <property name="events">GDK_BUTTON1_MOTION_MASK | GDK_BUTTON2_MOTION_MASK | GDK_BUTTON3_MOTION_MASK | GDK_BUTTON_PRESS_MASK</property>
 			    </widget>

Modified: branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/glade/particle.glade
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/glade/particle.glade	2008-02-03 09:40:17 UTC (rev 3787)
+++ branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/glade/particle.glade	2008-02-03 12:04:10 UTC (rev 3788)
@@ -72,7 +72,7 @@
 	  <property name="spacing">0</property>
 
 	  <child>
-	    <widget class="GtkVBox" id="allButButtonsVbox">
+	    <widget class="GtkHBox" id="allButButtonsHbox">
 	      <property name="border_width">8</property>
 	      <property name="visible">True</property>
 	      <property name="homogeneous">False</property>
@@ -143,7 +143,7 @@
 			</widget>
 			<packing>
 			  <property name="padding">0</property>
-			  <property name="expand">True</property>
+			  <property name="expand">False</property>
 			  <property name="fill">True</property>
 			</packing>
 		      </child>
@@ -201,7 +201,7 @@
 			</widget>
 			<packing>
 			  <property name="padding">0</property>
-			  <property name="expand">True</property>
+			  <property name="expand">False</property>
 			  <property name="fill">True</property>
 			</packing>
 		      </child>
@@ -212,7 +212,7 @@
 			</widget>
 			<packing>
 			  <property name="padding">0</property>
-			  <property name="expand">True</property>
+			  <property name="expand">False</property>
 			  <property name="fill">True</property>
 			</packing>
 		      </child>
@@ -270,7 +270,7 @@
 			</widget>
 			<packing>
 			  <property name="padding">0</property>
-			  <property name="expand">True</property>
+			  <property name="expand">False</property>
 			  <property name="fill">True</property>
 			</packing>
 		      </child>
@@ -328,7 +328,7 @@
 			</widget>
 			<packing>
 			  <property name="padding">0</property>
-			  <property name="expand">True</property>
+			  <property name="expand">False</property>
 			  <property name="fill">True</property>
 			</packing>
 		      </child>
@@ -386,7 +386,7 @@
 			</widget>
 			<packing>
 			  <property name="padding">0</property>
-			  <property name="expand">True</property>
+			  <property name="expand">False</property>
 			  <property name="fill">True</property>
 			</packing>
 		      </child>
@@ -444,7 +444,7 @@
 			</widget>
 			<packing>
 			  <property name="padding">0</property>
-			  <property name="expand">True</property>
+			  <property name="expand">False</property>
 			  <property name="fill">True</property>
 			</packing>
 		      </child>
@@ -455,7 +455,7 @@
 			</widget>
 			<packing>
 			  <property name="padding">0</property>
-			  <property name="expand">True</property>
+			  <property name="expand">False</property>
 			  <property name="fill">True</property>
 			</packing>
 		      </child>
@@ -507,7 +507,7 @@
 			</widget>
 			<packing>
 			  <property name="padding">0</property>
-			  <property name="expand">True</property>
+			  <property name="expand">False</property>
 			  <property name="fill">True</property>
 			</packing>
 		      </child>
@@ -582,7 +582,7 @@
 			</widget>
 			<packing>
 			  <property name="padding">0</property>
-			  <property name="expand">True</property>
+			  <property name="expand">False</property>
 			  <property name="fill">True</property>
 			</packing>
 		      </child>
@@ -640,7 +640,7 @@
 			</widget>
 			<packing>
 			  <property name="padding">0</property>
-			  <property name="expand">True</property>
+			  <property name="expand">False</property>
 			  <property name="fill">True</property>
 			</packing>
 		      </child>
@@ -698,14 +698,14 @@
 			</widget>
 			<packing>
 			  <property name="padding">0</property>
-			  <property name="expand">True</property>
+			  <property name="expand">False</property>
 			  <property name="fill">True</property>
 			</packing>
 		      </child>
 		    </widget>
 		    <packing>
 		      <property name="padding">0</property>
-		      <property name="expand">True</property>
+		      <property name="expand">False</property>
 		      <property name="fill">True</property>
 		    </packing>
 		  </child>
@@ -756,8 +756,8 @@
 
 				  <child>
 				    <widget class="GtkComboBox" id="previewOutputMenu">
-				      <property name="items" translatable="yes">Swiss Army Knife output
-Final output</property>
+				      <property name="visible">True</property>
+				      <property name="items" translatable="yes"></property>
 				      <property name="add_tearoffs">False</property>
 				      <property name="focus_on_click">True</property>
 				    </widget>
@@ -795,7 +795,8 @@
 
 			      <child>
 				<widget class="GtkDrawingArea" id="previewVideo">
-				  <property name="height_request">300</property>
+				  <property name="width_request">30</property>
+				  <property name="height_request">30</property>
 				  <property name="visible">True</property>
 				  <property name="events">GDK_BUTTON1_MOTION_MASK | GDK_BUTTON_PRESS_MASK</property>
 				</widget>
@@ -805,16 +806,6 @@
 				  <property name="fill">True</property>
 				</packing>
 			      </child>
-
-			      <child>
-				<widget class="GtkDrawingArea" id="previewDisabled">
-				</widget>
-				<packing>
-				  <property name="padding">0</property>
-				  <property name="expand">True</property>
-				  <property name="fill">True</property>
-				</packing>
-			      </child>
 			    </widget>
 			  </child>
 			</widget>

Modified: branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/glade/swissarmyknife.glade
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/glade/swissarmyknife.glade	2008-02-03 09:40:17 UTC (rev 3787)
+++ branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/glade/swissarmyknife.glade	2008-02-03 12:04:10 UTC (rev 3788)
@@ -868,6 +868,90 @@
 			  </child>
 
 			  <child>
+			    <widget class="GtkHBox" id="rollingAvgLookaheadHbox">
+			      <property name="visible">True</property>
+			      <property name="homogeneous">False</property>
+			      <property name="spacing">0</property>
+
+			      <child>
+				<widget class="GtkLabel" id="rollingAvgLookaheadLabel1">
+				  <property name="visible">True</property>
+				  <property name="label" translatable="yes">_Look ahead </property>
+				  <property name="use_underline">True</property>
+				  <property name="use_markup">False</property>
+				  <property name="justify">GTK_JUSTIFY_RIGHT</property>
+				  <property name="wrap">False</property>
+				  <property name="selectable">False</property>
+				  <property name="xalign">0.5</property>
+				  <property name="yalign">0.5</property>
+				  <property name="xpad">0</property>
+				  <property name="ypad">0</property>
+				  <property name="mnemonic_widget">rollingAvgLookaheadSpinButton</property>
+				  <property name="ellipsize">PANGO_ELLIPSIZE_NONE</property>
+				  <property name="width_chars">-1</property>
+				  <property name="single_line_mode">False</property>
+				  <property name="angle">0</property>
+				</widget>
+				<packing>
+				  <property name="padding">0</property>
+				  <property name="expand">False</property>
+				  <property name="fill">False</property>
+				</packing>
+			      </child>
+
+			      <child>
+				<widget class="GtkSpinButton" id="rollingAvgLookaheadSpinButton">
+				  <property name="visible">True</property>
+				  <property name="can_focus">True</property>
+				  <property name="climb_rate">1</property>
+				  <property name="digits">0</property>
+				  <property name="numeric">True</property>
+				  <property name="update_policy">GTK_UPDATE_ALWAYS</property>
+				  <property name="snap_to_ticks">False</property>
+				  <property name="wrap">False</property>
+				  <property name="adjustment">0 0 99999 1 1 0</property>
+				</widget>
+				<packing>
+				  <property name="padding">0</property>
+				  <property name="expand">False</property>
+				  <property name="fill">True</property>
+				</packing>
+			      </child>
+
+			      <child>
+				<widget class="GtkLabel" id="rollingAvgLookaheadLabel2">
+				  <property name="visible">True</property>
+				  <property name="label" translatable="yes"> frames.  (Anything &gt; 0 will be slower.)</property>
+				  <property name="use_underline">True</property>
+				  <property name="use_markup">False</property>
+				  <property name="justify">GTK_JUSTIFY_LEFT</property>
+				  <property name="wrap">False</property>
+				  <property name="selectable">False</property>
+				  <property name="xalign">0.5</property>
+				  <property name="yalign">0.5</property>
+				  <property name="xpad">0</property>
+				  <property name="ypad">0</property>
+				  <property name="mnemonic_widget">rollingAvgLookaheadSpinButton</property>
+				  <property name="ellipsize">PANGO_ELLIPSIZE_NONE</property>
+				  <property name="width_chars">-1</property>
+				  <property name="single_line_mode">False</property>
+				  <property name="angle">0</property>
+				</widget>
+				<packing>
+				  <property name="padding">0</property>
+				  <property name="expand">False</property>
+				  <property name="fill">False</property>
+				</packing>
+			      </child>
+			    </widget>
+			    <packing>
+			      <property name="padding">0</property>
+			      <property name="expand">True</property>
+			      <property name="fill">True</property>
+			    </packing>
+			  </child>
+
+			  <child>
 			    <widget class="GtkVBox" id="rollingAvgInitVbox">
 			      <property name="visible">True</property>
 			      <property name="homogeneous">False</property>
@@ -992,7 +1076,7 @@
 				      <property name="update_policy">GTK_UPDATE_ALWAYS</property>
 				      <property name="snap_to_ticks">False</property>
 				      <property name="wrap">False</property>
-				      <property name="adjustment">1 1 99999 1 1 0</property>
+				      <property name="adjustment">0 0 9999999 1 1 0</property>
 				    </widget>
 				    <packing>
 				      <property name="padding">0</property>
@@ -1036,7 +1120,7 @@
 				      <property name="update_policy">GTK_UPDATE_ALWAYS</property>
 				      <property name="snap_to_ticks">False</property>
 				      <property name="wrap">False</property>
-				      <property name="adjustment">100 1 99999 1 1 0</property>
+				      <property name="adjustment">99 0 9999999 1 1 0</property>
 				    </widget>
 				    <packing>
 				      <property name="padding">0</property>
@@ -1740,8 +1824,8 @@
 
 			      <child>
 				<widget class="GtkComboBox" id="previewOutputMenu">
-				  <property name="items" translatable="yes">Swiss Army Knife output
-Final output</property>
+				  <property name="visible">True</property>
+				  <property name="items" translatable="yes"></property>
 				  <property name="add_tearoffs">False</property>
 				  <property name="focus_on_click">True</property>
 				</widget>
@@ -1779,7 +1863,8 @@
 
 			  <child>
 			    <widget class="GtkDrawingArea" id="previewVideo">
-			      <property name="height_request">300</property>
+			      <property name="width_request">30</property>
+			      <property name="height_request">30</property>
 			      <property name="visible">True</property>
 			      <property name="events">GDK_BUTTON1_MOTION_MASK | GDK_BUTTON_PRESS_MASK</property>
 			    </widget>

Modified: branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/glade/threshold.glade
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/glade/threshold.glade	2008-02-03 09:40:17 UTC (rev 3787)
+++ branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/glade/threshold.glade	2008-02-03 12:04:10 UTC (rev 3788)
@@ -416,8 +416,7 @@
 
 			  <child>
 			    <widget class="GtkComboBox" id="previewOutputMenu">
-			      <property name="items" translatable="yes">Threshold output
-Final output</property>
+			      <property name="items" translatable="yes"></property>
 			      <property name="add_tearoffs">False</property>
 			      <property name="focus_on_click">True</property>
 			    </widget>
@@ -455,7 +454,8 @@
 
 		      <child>
 			<widget class="GtkDrawingArea" id="previewVideo">
-			  <property name="height_request">300</property>
+			  <property name="width_request">30</property>
+			  <property name="height_request">30</property>
 			  <property name="visible">True</property>
 			  <property name="events">GDK_BUTTON1_MOTION_MASK | GDK_BUTTON_PRESS_MASK</property>
 			</widget>

Modified: branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_NONE/ADM_dialog/DIA_flyDialog.cpp
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_NONE/ADM_dialog/DIA_flyDialog.cpp	2008-02-03 09:40:17 UTC (rev 3787)
+++ branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_NONE/ADM_dialog/DIA_flyDialog.cpp	2008-02-03 12:04:10 UTC (rev 3788)
@@ -42,6 +42,10 @@
 {
   return 1; 
 }
+uint8_t ADM_flyDialog::cleanup2(void)
+{
+  return 1; 
+}
 
 
 //EOF

Modified: branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_NONE/ADM_dialog/DIA_none.cpp
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_NONE/ADM_dialog/DIA_none.cpp	2008-02-03 09:40:17 UTC (rev 3787)
+++ branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_NONE/ADM_dialog/DIA_none.cpp	2008-02-03 12:04:10 UTC (rev 3788)
@@ -106,7 +106,9 @@
 int DIA_colorSel(uint8_t *r, uint8_t *g, uint8_t *b) {return 0;}			
 uint8_t DIA_glyphEdit(void) {return 0;}
 struct THRESHOLD_PARAM;
+struct ADMVideoThreshold;
 uint8_t DIA_threshold(AVDMGenericVideoStream *in,
+                      ADMVideoThreshold * thresholdp,
                       THRESHOLD_PARAM * param) { return 255; }
 struct SWISSARMYKNIFE_PARAM;
 struct ADMVideoSwissArmyKnife;
@@ -124,7 +126,9 @@
                     const MenuMapping * menu_mapping,
                     uint32_t menu_mapping_count) { return 255; }
 struct PARTICLE_PARAM;
+struct ADMVideoParticle;
 uint8_t DIA_particle (AVDMGenericVideoStream *in,
+                      ADMVideoParticle * particlep,
                       PARTICLE_PARAM * param,
                       const MenuMapping * menu_mapping,
                       uint32_t menu_mapping_count) { return 255; }

Modified: branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_none.cpp
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_none.cpp	2008-02-03 09:40:17 UTC (rev 3787)
+++ branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_none.cpp	2008-02-03 12:04:10 UTC (rev 3788)
@@ -55,7 +55,9 @@
 uint8_t DIA_glyphEdit(void){ return 0;};
 int32_t UI_readJog(void) {return 0;}
 struct THRESHOLD_PARAM;
+struct ADMVideoThreshold;
 uint8_t DIA_threshold(AVDMGenericVideoStream *in,
+                      ADMVideoThreshold * thresholdp,
                       THRESHOLD_PARAM * param) { return 255; }
 struct SWISSARMYKNIFE_PARAM;
 struct ADMVideoSwissArmyKnife;
@@ -73,7 +75,9 @@
                     const MenuMapping * menu_mapping,
                     uint32_t menu_mapping_count) { return 255; }
 struct PARTICLE_PARAM;
+struct ADMVideoParticle;
 uint8_t DIA_particle (AVDMGenericVideoStream *in,
+                      ADMVideoParticle * particlep,
                       PARTICLE_PARAM * param,
                       const MenuMapping * menu_mapping,
                       uint32_t menu_mapping_count) { return 255; }

Modified: branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/T_flyDialog.cpp
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/T_flyDialog.cpp	2008-02-03 09:40:17 UTC (rev 3787)
+++ branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/T_flyDialog.cpp	2008-02-03 12:04:10 UTC (rev 3788)
@@ -23,7 +23,7 @@
 #include "DIA_flyDialog.h"
 #include "DIA_flyDialogQt4.h"
 
-void ADM_flyDialog::postInit()
+void ADM_flyDialog::postInit(uint8_t reInit)
 {
 	QWidget *graphicsView = ((ADM_QCanvas*)_canvas)->parentWidget();
 	QSlider  *slider=(QSlider *)_slider;
@@ -66,5 +66,9 @@
 {
   return 1; 
 }
+uint8_t ADM_flyDialog::cleanup2(void)
+{
+  return 1; 
+}
 
 //EOF

Modified: branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flyDialog.cpp
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flyDialog.cpp	2008-02-03 09:40:17 UTC (rev 3787)
+++ branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flyDialog.cpp	2008-02-03 12:04:10 UTC (rev 3788)
@@ -40,6 +40,7 @@
 	_canvas = canvas;
 	_cookie = NULL;
 	_resizeMethod = resizeMethod;
+        _zoomChangeCount = 0;
 
 	if (isRgbInverted())
 		_rgb=new ColYuvRgb(_w,_h,1);
@@ -65,16 +66,18 @@
 
 	if (_resizeMethod == RESIZE_AUTO || _resizeMethod == RESIZE_LAST)
 	{
-		float zoom = calcZoomFactor();
+		_zoom = calcZoomFactor();
 
-		if (zoom == 1)
+		if (_zoom == 1)
 			_resizeMethod = RESIZE_NONE;
 		else
 		{
-			_zoomW = uint32_t (_w * zoom);
-			_zoomH = uint32_t (_h * zoom);
+			_zoomW = uint32_t (_w * _zoom);
+			_zoomH = uint32_t (_h * _zoom);
 		}
 	}
+        else
+		_zoom = 1;
 
 	if (_resizeMethod == RESIZE_AUTO || _resizeMethod == RESIZE_LAST)
 	{
@@ -97,9 +100,74 @@
 		_rgbBufferDisplay = NULL;
 	}
 
-	postInit();
+	postInit (false);
 }
 
+void ADM_flyDialog::recomputeSize(void)
+{
+    float new_zoom = calcZoomFactor();
+
+    ResizeMethod new_resizeMethod;
+    uint32_t new_zoomW;
+    uint32_t new_zoomH;
+
+    if (new_zoom == 1)
+    {
+        new_resizeMethod = RESIZE_NONE;
+        new_zoomW = _w;
+        new_zoomH = _h;
+    }
+    else
+    {
+        new_resizeMethod = RESIZE_AUTO;
+        new_zoomW = uint32_t (_w * new_zoom);
+        new_zoomH = uint32_t (_h * new_zoom);
+    }
+
+    if (new_resizeMethod == _resizeMethod && new_zoom == _zoom
+        && new_zoomW == _zoomW && new_zoomH == _zoomH)
+        return;
+
+    if (++_zoomChangeCount > 3 || new_zoomH < 30 || new_zoomW < 30)
+    {
+        printf ("Resisting zoom size change from %dx%d (zoom %.5f) to %dx%d (zoom %.5f)\n",
+                _zoomW, _zoomH, _zoom, new_zoomW, new_zoomH, new_zoom);
+        return;
+    }
+
+    printf ("Fixing zoom size from %dx%d (zoom %.5f) to correct %dx%d (zoom %.5f)\n",
+            _zoomW, _zoomH, _zoom, new_zoomW, new_zoomH, new_zoom);
+
+    _resizeMethod = new_resizeMethod;
+    _zoom = new_zoom;
+    _zoomW = new_zoomW;
+    _zoomH = new_zoomH;
+
+    delete _resizer;
+    if (_resizeMethod == RESIZE_AUTO || _resizeMethod == RESIZE_LAST)
+    {
+        PixelFormat sourceColour;
+
+        if (_resizeMethod == RESIZE_AUTO || _isYuvProcessing)
+            sourceColour = PIX_FMT_YUV420P;
+        else
+            sourceColour = PIX_FMT_RGB32;
+
+        _resizer = new ADMImageResizer(_w, _h, _zoomW, _zoomH, sourceColour, PIX_FMT_RGB32);
+        if (!_rgbBufferDisplay)
+            _rgbBufferDisplay = new uint8_t[_w * _h * 4];
+    }
+    else
+    {
+        _resizer = NULL;
+        delete _rgbBufferDisplay;
+        _rgbBufferDisplay = NULL;
+    }
+
+    postInit (true);
+    sliderChanged();
+}
+
 /**
     \fn cleanup
     \brief deallocate
@@ -123,6 +191,7 @@
 */
 ADM_flyDialog::~ADM_flyDialog(void)
 {
+  cleanup2();
   cleanup(); 
 }
 
@@ -158,7 +227,7 @@
         process();
     }
 
-    display();
+    return display();
 }
 
 void ADM_flyDialog::copyYuvFinalToRgb(void)

Modified: branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flyDialog.h
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flyDialog.h	2008-02-03 09:40:17 UTC (rev 3787)
+++ branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flyDialog.h	2008-02-03 12:04:10 UTC (rev 3788)
@@ -40,10 +40,14 @@
     const diaMenuEntry * menu;
 };
 
+typedef float gfloat;
+
 class ADM_flyDialog
 {
   protected:
           uint32_t _w,_h, _zoomW, _zoomH;
+          float _zoom;
+          uint32_t _zoomChangeCount;
           AVDMGenericVideoStream *_in;
   
           ADMImage *_yuvBuffer;
@@ -55,7 +59,7 @@
 		  ResizeMethod _resizeMethod;
 		  ADMImageResizer *_resizer;
 
-  virtual void postInit(void);
+  virtual void postInit(uint8_t reInit);
 		  float calcZoomFactor(void);
           void copyYuvFinalToRgb(void);
           void copyYuvScratchToRgb(void);
@@ -67,6 +71,7 @@
                               const MenuMapping * menu_mapping,
                               uint32_t menu_mapping_count);
   public:
+          void recomputeSize(void);
           uint32_t getMenuValue (const MenuMapping * mm);
           const MenuMapping * lookupMenu (const char * widgetName,
                                           const MenuMapping * menu_mapping,
@@ -76,6 +81,7 @@
           void    *_slider; // widget
           void    *_canvas; // Drawing zone
           ColYuvRgb *_rgb;
+
           /* Filter dependant */
   virtual uint8_t    process(void)=0;
   virtual uint8_t    download(void)=0;
@@ -91,11 +97,16 @@
           uint8_t  isRgbInverted(void);
   virtual uint8_t  update(void) {};
           uint8_t  cleanup(void);
+  virtual uint8_t  cleanup2(void);
 
+#ifdef USE_JOG
+  static void jogDial (void * my_data, signed short offset);
+  static void jogRing (void * my_data, gfloat angle);
+#endif
+
           ADM_flyDialog(uint32_t width, uint32_t height, AVDMGenericVideoStream *in,
                              void *canvas, void *slider, int yuv, ResizeMethod resizeMethod);
   virtual ~ADM_flyDialog(void);
-
 };
 
 #endif

Modified: branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flyEraser.cpp
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flyEraser.cpp	2008-02-03 09:40:17 UTC (rev 3787)
+++ branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flyEraser.cpp	2008-02-03 12:04:10 UTC (rev 3788)
@@ -29,24 +29,98 @@
 
 uint8_t flyEraser::sliderChanged ()
 {
-    return ADM_flyDialog::sliderChanged();
+    ADM_assert(_yuvBuffer);
+    ADM_assert(_rgbBufferOut);
+    ADM_assert(_in);
+    
+    if (preview_mode == PREVIEWMODE_THIS_FILTER)
+    {
+        uint32_t frame = sliderGet();
+        uint32_t len, flags;
+
+        if (!_in->getFrameNumberNoAlloc (frame, &len, _yuvBuffer, &flags))
+        {
+            printf ("[FlyDialog] Cannot get frame %u\n", frame);
+            return 0;
+        }
+    }
+    else if (preview_mode == PREVIEWMODE_LATER_FILTER)
+    {
+        // No need to call getFrameNumberNoAlloc() here, because our process()
+        // (see below) will do it (indirectly, by calling the later filter's
+        // getFrameNumberNoAlloc(), which will call the preceding filter's
+        // getFrameNumberNoAlloc(), which in turn will call it for the filter
+        // before that, etc.):
+    }
+    else // if (preview_mode == PREVIEWMODE_EARLIER_FILTER)
+    {
+        // In this case, we just call the earlier filter's
+        // getFrameNumberNoAlloc() and send the result straight into the
+        // output buffer - we needn't do anything to it ourselves.
+
+        uint32_t frame = sliderGet();
+        uint32_t len, flags;
+
+        if (!source->getFrameNumberNoAlloc (frame, &len, _yuvBufferOut,
+                                            &flags))
+        {
+            printf ("[FlyDialog] Cannot get frame %u\n", frame);
+            return 0;
+        }
+    }
+
+    // Process...    
+    if (_isYuvProcessing)
+    {
+        process();
+        copyYuvFinalToRgb();
+    }
+    else // RGB Processing      
+    {
+        // HERE: we are NOT set up for this to work...
+        ADM_assert(0);
+        ADM_assert(_rgbBuffer);
+        copyYuvScratchToRgb();
+        process();
+    }
+
+    return display();
 }
 
 uint8_t  flyEraser::update ()
 {
     download();
+    pushParam();
     process();
     copyYuvFinalToRgb();
-    display();
-    return 1;
+    return display();
 }
 
 uint8_t flyEraser::process ()
 {
-    uint8_t ret = ADMVideoEraser::doEraser (_yuvBuffer, _yuvBufferOut,
-                                            _in, sliderGet(), eraserp,
-                                            &param, _w, _h);
-    return ret;
+    if (preview_mode == PREVIEWMODE_THIS_FILTER)
+    {
+        uint8_t ret = ADMVideoEraser::doEraser (_yuvBuffer, _yuvBufferOut,
+                                                _in, sliderGet(), eraserp,
+                                                &param, _w, _h);
+        return ret;
+    }
+    else if (preview_mode == PREVIEWMODE_LATER_FILTER)
+    {
+        uint32_t len = 0;
+        uint32_t flags = 0;
+        uint32_t frame = sliderGet();
+        return source->getFrameNumberNoAlloc (frame, &len, _yuvBufferOut,
+                                              &flags);
+    }
+    else // if (preview_mode == PREVIEWMODE_EARLIER_FILTER)
+    {
+        // nothing to do here - we've already arranged for the earlier filter
+        // to write the result into the output buffer, and changes in our
+        // parameters can't affect the result of an earlier filter.
+
+        return 1;
+    }
 }
 
 /************* COMMON PART *********************/

Modified: branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flyEraser.h
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flyEraser.h	2008-02-03 09:40:17 UTC (rev 3787)
+++ branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flyEraser.h	2008-02-03 12:04:10 UTC (rev 3788)
@@ -27,25 +27,50 @@
   private:
     const MenuMapping * menu_mapping;
     uint32_t menu_mapping_count;
+    ERASER_PARAM saved_param;
+    ERASER_PARAM * live_param;
+    AVDMGenericVideoStream * source;
 
   public:
     ERASER_PARAM param;
     Eraser::MaskVec::iterator current_mask;
 
+    // HERE: A lot of this should probably be moved up into ADM_flyDialog
+
+    uint16_t this_filter_index;
+
+    enum PreviewMode
+    {
+        PREVIEWMODE_INVALID = 0, // never use
+        PREVIEWMODE_EARLIER_FILTER,
+        PREVIEWMODE_THIS_FILTER,
+        PREVIEWMODE_LATER_FILTER
+    };
+
+  private:
+    PreviewMode preview_mode;
+
+  public:
     uint8_t    process();
     uint8_t    update();
 
     flyEraser (uint32_t width, uint32_t height,
                AVDMGenericVideoStream * in,
                void * canvas, void * slider, void * dialog,
-               ADMVideoEraser * eraserp, const ERASER_PARAM * in_param,
+               ADMVideoEraser * eraserp,
+               ERASER_PARAM * in_param,
                const MenuMapping * menu_mapping, uint32_t menu_mapping_count)
         : ADM_flyDialog (width, height, in, canvas, slider, 1, RESIZE_AUTO),
           eraserp (eraserp),
-          param (*in_param),
           menu_mapping (menu_mapping),
           menu_mapping_count (menu_mapping_count),
-          current_mask (eraserp->getMasks().begin())
+          saved_param (*in_param),
+          live_param (in_param),
+          source (eraserp),
+          param (*in_param),
+          current_mask (eraserp->getMasks().begin()),
+          this_filter_index (0),
+          preview_mode (PREVIEWMODE_THIS_FILTER)
     {
         _cookie = dialog;
         setupMenus (in_param, menu_mapping, menu_mapping_count);
@@ -55,11 +80,36 @@
 
     uint8_t sliderChanged (void);
 
+    void pushParam ()
+    {
+        *live_param = param;
+        eraserp->masksIsValid (true);
+    }
+
+    // no longer used
     void getParam (ERASER_PARAM * outputParam)
     {
         *outputParam = param;
     }
 
+    void restoreParam ()
+    {
+        *live_param = saved_param;
+        eraserp->masksIsValid (false);
+    }
+
+    AVDMGenericVideoStream * getSource () const
+    {
+        return source;
+    }
+
+    void changeSource (AVDMGenericVideoStream * in, PreviewMode mode)
+    {
+        source = in;
+        preview_mode = mode;
+        sliderChanged();
+    }
+
     ADMImage * getInputImage ()
     {
         return _yuvBuffer;
@@ -81,6 +131,11 @@
         ADM_flyDialog::getMenuValues (&param, menu_mapping,
                                       menu_mapping_count);
     }
+
+    float getZoom () const
+    {
+        return _zoom;
+    }
 };
 
 #endif

Modified: branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flyParticle.cpp
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flyParticle.cpp	2008-02-03 09:40:17 UTC (rev 3787)
+++ branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flyParticle.cpp	2008-02-03 12:04:10 UTC (rev 3788)
@@ -27,33 +27,130 @@
 
 /************* COMMON PART *********************/
 
+uint8_t flyParticle::sliderChanged ()
+{
+    ADM_assert(_yuvBuffer);
+    ADM_assert(_rgbBufferOut);
+    ADM_assert(_in);
+    
+    if (preview_mode == PREVIEWMODE_THIS_FILTER)
+    {
+        uint32_t frame = sliderGet();
+        uint32_t len, flags;
+
+        if (!_in->getFrameNumberNoAlloc (frame, &len, _yuvBuffer, &flags))
+        {
+            printf ("[FlyDialog] Cannot get frame %u\n", frame);
+            return 0;
+        }
+    }
+    else if (preview_mode == PREVIEWMODE_LATER_FILTER)
+    {
+        // No need to call getFrameNumberNoAlloc() here, because our process()
+        // (see below) will do it (indirectly, by calling the later filter's
+        // getFrameNumberNoAlloc(), which will call the preceding filter's
+        // getFrameNumberNoAlloc(), which in turn will call it for the filter
+        // before that, etc.):
+    }
+    else // if (preview_mode == PREVIEWMODE_EARLIER_FILTER)
+    {
+#if 0
+// in this filter, process() has to always reprocess (because we draw the crop
+// lines onto the output buffer), so no point in doing it here...
+
+       // In this case, we just call the earlier filter's
+        // getFrameNumberNoAlloc() and send the result straight into the
+        // output buffer - we needn't do anything to it ourselves.
+
+        uint32_t frame = sliderGet();
+        uint32_t len, flags;
+
+        if (!source->getFrameNumberNoAlloc (frame, &len, _yuvBufferOut,
+                                            &flags))
+        {
+            printf ("[FlyDialog] Cannot get frame %u\n", frame);
+            return 0;
+        }
+#endif
+    }
+
+    // Process...    
+    if (_isYuvProcessing)
+    {
+        process();
+        copyYuvFinalToRgb();
+    }
+    else // RGB Processing      
+    {
+        // HERE: we are NOT set up for this to work...
+        ADM_assert(0);
+        ADM_assert(_rgbBuffer);
+        copyYuvScratchToRgb();
+        process();
+    }
+
+    return display();
+}
+
 uint8_t flyParticle::update ()
 {
     download();
+    pushParam();
     process();
     copyYuvFinalToRgb();
-    display();
-    return 1;
+    return display();
 }
 
 static inline void draw_hline (uint8_t * fb, uint32_t width, uint32_t height,
                                uint32_t y)
 {
     for (uint8_t * pixp = fb + width * y; width--; pixp++)
-        *pixp ^= 0xff;
+        *pixp = ~*pixp;
 }
 
 static inline void draw_vline (uint8_t * fb, uint32_t width, uint32_t height,
                                uint32_t x)
 {
     for (uint8_t * pixp = fb + x; height--; pixp += width)
-        *pixp ^= 0xff;
+        *pixp = ~*pixp;
 }
 
 uint8_t flyParticle::process ()
 {
-    uint8_t ret = ADMVideoParticle::doParticle (_yuvBuffer, _yuvBufferOut,
-                                                _in, 0, 0, &param, _w, _h);
+    uint8_t ret;
+    if (preview_mode == PREVIEWMODE_THIS_FILTER)
+    {
+        ret = ADMVideoParticle::doParticle (_yuvBuffer, _yuvBufferOut,
+                                            _in, 0, 0, &param, _w, _h);
+    }
+    else if (preview_mode == PREVIEWMODE_LATER_FILTER)
+    {
+        uint32_t len = 0;
+        uint32_t flags = 0;
+        uint32_t frame = sliderGet();
+        ret = source->getFrameNumberNoAlloc (frame, &len, _yuvBufferOut,
+                                             &flags);
+    }
+    else // if (preview_mode == PREVIEWMODE_EARLIER_FILTER)
+    {
+#if 0
+// in this filter, process() has to always reprocess (because we draw the crop
+// lines onto the output buffer)...
+
+        // nothing to do here - we've already arranged for the earlier filter
+        // to write the result into the output buffer, and changes in our
+        // parameters can't affect the result of an earlier filter.
+
+        ret = 1;
+#else
+        uint32_t len = 0;
+        uint32_t flags = 0;
+        uint32_t frame = sliderGet();
+        ret = source->getFrameNumberNoAlloc (frame, &len, _yuvBufferOut,
+                                             &flags);
+#endif
+    }
+
     input_buffer_valid = false;
 
     uint8_t * fb = YPLANE(_yuvBufferOut);

Modified: branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flyParticle.h
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flyParticle.h	2008-02-03 09:40:17 UTC (rev 3787)
+++ branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flyParticle.h	2008-02-03 12:04:10 UTC (rev 3788)
@@ -25,10 +25,29 @@
     const MenuMapping * menu_mapping;
     uint32_t menu_mapping_count;
     bool input_buffer_valid;
+    PARTICLE_PARAM saved_param;
+    PARTICLE_PARAM * live_param;
+    AVDMGenericVideoStream * source;
 
   public:
     PARTICLE_PARAM param;
 
+    uint16_t this_filter_index;
+
+    // HERE: This should probably be moved up into ADM_flyDialog:
+
+    enum PreviewMode
+    {
+        PREVIEWMODE_INVALID = 0, // never use
+        PREVIEWMODE_EARLIER_FILTER,
+        PREVIEWMODE_THIS_FILTER,
+        PREVIEWMODE_LATER_FILTER
+    };
+
+  private:
+    PreviewMode preview_mode;
+
+  public:
     uint8_t    process(void);
     uint8_t    download(void);
     uint8_t    upload(void);
@@ -37,24 +56,55 @@
     flyParticle (uint32_t width, uint32_t height,
                  AVDMGenericVideoStream * in,
                  void * canvas, void * slider, void * dialog,
-                 const PARTICLE_PARAM * in_param,
+                 ADMVideoParticle * particlep,
+                 PARTICLE_PARAM * in_param,
                  const MenuMapping * menu_mapping,
                  uint32_t menu_mapping_count)
         : ADM_flyDialog (width, height, in, canvas, slider, 1, RESIZE_AUTO),
           menu_mapping (menu_mapping),
           menu_mapping_count (menu_mapping_count),
           input_buffer_valid (false),
-          param (*in_param)
+          saved_param (*in_param),
+          live_param (in_param),
+          source (particlep),
+          param (*in_param),
+          this_filter_index (0),
+          preview_mode (PREVIEWMODE_THIS_FILTER)
     {
         _cookie = dialog;
         setupMenus (in_param, menu_mapping, menu_mapping_count);
     };
 
+    uint8_t sliderChanged (void);
+
+    void pushParam ()
+    {
+        *live_param = param;
+    }
+
+    // no longer used
     void getParam (PARTICLE_PARAM * outputParam)
     {
         *outputParam = param;
     }
 
+    void restoreParam ()
+    {
+        *live_param = saved_param;
+    }
+
+    AVDMGenericVideoStream * getSource () const
+    {
+        return source;
+    }
+
+    void changeSource (AVDMGenericVideoStream * in, PreviewMode mode)
+    {
+        source = in;
+        preview_mode = mode;
+        sliderChanged();
+    }
+
     ADMImage * getInputImage ()
     {
         if (!input_buffer_valid)
@@ -90,6 +140,11 @@
         ADM_flyDialog::getMenuValues (&param, menu_mapping,
                                       menu_mapping_count);
     }
+
+    float getZoom () const
+    {
+        return _zoom;
+    }
 };
 
 #endif

Modified: branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flySwissArmyKnife.cpp
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flySwissArmyKnife.cpp	2008-02-03 09:40:17 UTC (rev 3787)
+++ branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flySwissArmyKnife.cpp	2008-02-03 12:04:10 UTC (rev 3788)
@@ -29,10 +29,69 @@
 
 uint8_t flySwissArmyKnife::sliderChanged ()
 {
+    // HERE: perhaps we should replace the preview enable button with an
+    // additional selection on the preview filter selection list ("Disable" or
+    // some such), with a corresponding PREVIEWMODE_NO_PREVIEW.
+
     if (!param.enable_preview)
         return 0;
 
-    return ADM_flyDialog::sliderChanged();
+    ADM_assert(_yuvBuffer);
+    ADM_assert(_rgbBufferOut);
+    ADM_assert(_in);
+    
+    if (preview_mode == PREVIEWMODE_THIS_FILTER)
+    {
+        uint32_t frame = sliderGet();
+        uint32_t len, flags;
+
+        if (!_in->getFrameNumberNoAlloc (frame, &len, _yuvBuffer, &flags))
+        {
+            printf ("[FlyDialog] Cannot get frame %u\n", frame);
+            return 0;
+        }
+    }
+    else if (preview_mode == PREVIEWMODE_LATER_FILTER)
+    {
+        // No need to call getFrameNumberNoAlloc() here, because our process()
+        // (see below) will do it (indirectly, by calling the later filter's
+        // getFrameNumberNoAlloc(), which will call the preceding filter's
+        // getFrameNumberNoAlloc(), which in turn will call it for the filter
+        // before that, etc.):
+    }
+    else // if (preview_mode == PREVIEWMODE_EARLIER_FILTER)
+    {
+        // In this case, we just call the earlier filter's
+        // getFrameNumberNoAlloc() and send the result straight into the
+        // output buffer - we needn't do anything to it ourselves.
+
+        uint32_t frame = sliderGet();
+        uint32_t len, flags;
+
+        if (!source->getFrameNumberNoAlloc (frame, &len, _yuvBufferOut,
+                                            &flags))
+        {
+            printf ("[FlyDialog] Cannot get frame %u\n", frame);
+            return 0;
+        }
+    }
+
+    // Process...    
+    if (_isYuvProcessing)
+    {
+        process();
+        copyYuvFinalToRgb();
+    }
+    else // RGB Processing      
+    {
+        // HERE: we are NOT set up for this to work...
+        ADM_assert(0);
+        ADM_assert(_rgbBuffer);
+        copyYuvScratchToRgb();
+        process();
+    }
+
+    return display();
 }
 
 uint8_t  flySwissArmyKnife::update ()
@@ -41,10 +100,10 @@
     if (!param.enable_preview)
         return 0;
 
+    pushParam();
     process();
     copyYuvFinalToRgb();
-    display();
-    return 1;
+    return display();
 }
 
 uint8_t flySwissArmyKnife::process ()
@@ -52,10 +111,53 @@
     if (!param.enable_preview)
         return 0;
 
-    uint8_t ret =
-        ADMVideoSwissArmyKnife::doSwissArmyKnife (_yuvBuffer, _yuvBufferOut,
-                                                  _in, sakp, &param, _w, _h);
-    return ret;
+    if (preview_mode == PREVIEWMODE_THIS_FILTER)
+    {
+        ADMImage * lai;
+        if (param.lookahead_n_frames)
+        {
+            if (lookaheadimage == NULL)
+                lookaheadimage = new ADMImage (_in->getInfo()->width,
+                                               _in->getInfo()->height);
+
+            uint32_t len = 0;
+            uint32_t flags = 0;
+            uint32_t frame = sliderGet();
+            if (frame + param.lookahead_n_frames >= _in->getInfo()->nb_frames)
+                lai = 0;
+            else if (!_in->getFrameNumberNoAlloc (frame
+                                                  + param.lookahead_n_frames,
+                                                  &len, lookaheadimage,
+                                                  &flags))
+                return 0;
+            else
+                lai = lookaheadimage;
+        }
+        else
+            lai = 0;
+
+        uint8_t ret =
+            ADMVideoSwissArmyKnife::doSwissArmyKnife (_yuvBuffer, lai,
+                                                      _yuvBufferOut, _in,
+                                                      sakp, &param, _w, _h);
+        return ret;
+    }
+    else if (preview_mode == PREVIEWMODE_LATER_FILTER)
+    {
+        uint32_t len = 0;
+        uint32_t flags = 0;
+        uint32_t frame = sliderGet();
+        return source->getFrameNumberNoAlloc (frame, &len, _yuvBufferOut,
+                                              &flags);
+    }
+    else // if (preview_mode == PREVIEWMODE_EARLIER_FILTER)
+    {
+        // nothing to do here - we've already arranged for the earlier filter
+        // to write the result into the output buffer, and changes in our
+        // parameters can't affect the result of an earlier filter.
+
+        return 1;
+    }
 }
 
 /************* COMMON PART *********************/

Modified: branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flySwissArmyKnife.h
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flySwissArmyKnife.h	2008-02-03 09:40:17 UTC (rev 3787)
+++ branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flySwissArmyKnife.h	2008-02-03 12:04:10 UTC (rev 3788)
@@ -25,10 +25,30 @@
     ADMVideoSwissArmyKnife * sakp;
     const MenuMapping * menu_mapping;
     uint32_t menu_mapping_count;
+    ADMImage * lookaheadimage;
+    SWISSARMYKNIFE_PARAM saved_param;
+    SWISSARMYKNIFE_PARAM * live_param;
+    AVDMGenericVideoStream * source;
 
   public:
     SWISSARMYKNIFE_PARAM param;
 
+    // HERE: A lot of this should probably be moved up into ADM_flyDialog
+
+    uint16_t this_filter_index;
+
+    enum PreviewMode
+    {
+        PREVIEWMODE_INVALID = 0, // never use
+        PREVIEWMODE_EARLIER_FILTER,
+        PREVIEWMODE_THIS_FILTER,
+        PREVIEWMODE_LATER_FILTER
+    };
+
+  private:
+    PreviewMode preview_mode;
+
+  public:
     uint8_t    process(void);
     uint8_t    download(void);
     uint8_t    upload(void);
@@ -38,14 +58,20 @@
                        AVDMGenericVideoStream * in,
                        void * canvas, void * slider, void * dialog,
                        ADMVideoSwissArmyKnife * sakp,
-                       const SWISSARMYKNIFE_PARAM * in_param,
+                       SWISSARMYKNIFE_PARAM * in_param,
                        const MenuMapping * menu_mapping,
                        uint32_t menu_mapping_count)
         : ADM_flyDialog (width, height, in, canvas, slider, 1, RESIZE_AUTO),
           sakp (sakp),
+          menu_mapping (menu_mapping),
+          menu_mapping_count (menu_mapping_count),
+          lookaheadimage (NULL),
+          saved_param (*in_param),
+          live_param (in_param),
+          source (sakp),
           param (*in_param),
-          menu_mapping (menu_mapping),
-          menu_mapping_count (menu_mapping_count)
+          this_filter_index (0),
+          preview_mode (PREVIEWMODE_THIS_FILTER)
     {
         _cookie = dialog;
         setupMenus (in_param, menu_mapping, menu_mapping_count);
@@ -53,13 +79,41 @@
         //         "in_param %p, &param %p\n", in_param, &param);
     };
 
+    ~flySwissArmyKnife ()
+    {
+        delete lookaheadimage;
+    }
+
     uint8_t sliderChanged (void);
 
+    void pushParam ()
+    {
+        *live_param = param;
+    }
+
+    // no longer used
     void getParam (SWISSARMYKNIFE_PARAM * outputParam)
     {
         *outputParam = param;
     }
 
+    void restoreParam ()
+    {
+        *live_param = saved_param;
+    }
+
+    AVDMGenericVideoStream * getSource () const
+    {
+        return source;
+    }
+
+    void changeSource (AVDMGenericVideoStream * in, PreviewMode mode)
+    {
+        source = in;
+        preview_mode = mode;
+        sliderChanged();
+    }
+
     ADMImage * getInputImage ()
     {
         return _yuvBuffer;
@@ -82,6 +136,11 @@
                                       menu_mapping_count);
     }
 
+    float getZoom () const
+    {
+        return _zoom;
+    }
+
     void updateConfigDescription (bool do_download);
     void wipeOutputBuffer ();
 };

Modified: branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flyThreshold.cpp
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flyThreshold.cpp	2008-02-03 09:40:17 UTC (rev 3787)
+++ branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flyThreshold.cpp	2008-02-03 12:04:10 UTC (rev 3788)
@@ -30,24 +30,105 @@
 
 /************* COMMON PART *********************/
 
+uint8_t flyThreshold::sliderChanged ()
+{
+    ADM_assert(_yuvBuffer);
+    ADM_assert(_rgbBufferOut);
+    ADM_assert(_in);
+    
+    if (preview_mode == PREVIEWMODE_THIS_FILTER)
+    {
+        uint32_t frame = sliderGet();
+        uint32_t len, flags;
+
+        if (!_in->getFrameNumberNoAlloc (frame, &len, _yuvBuffer, &flags))
+        {
+            printf ("[FlyDialog] Cannot get frame %u\n", frame);
+            return 0;
+        }
+    }
+    else if (preview_mode == PREVIEWMODE_LATER_FILTER)
+    {
+        // No need to call getFrameNumberNoAlloc() here, because our process()
+        // (see below) will do it (indirectly, by calling the later filter's
+        // getFrameNumberNoAlloc(), which will call the preceding filter's
+        // getFrameNumberNoAlloc(), which in turn will call it for the filter
+        // before that, etc.):
+    }
+    else // if (preview_mode == PREVIEWMODE_EARLIER_FILTER)
+    {
+        // In this case, we just call the earlier filter's
+        // getFrameNumberNoAlloc() and send the result straight into the
+        // output buffer - we needn't do anything to it ourselves.
+
+        uint32_t frame = sliderGet();
+        uint32_t len, flags;
+
+        if (!source->getFrameNumberNoAlloc (frame, &len, _yuvBufferOut,
+                                            &flags))
+        {
+            printf ("[FlyDialog] Cannot get frame %u\n", frame);
+            return 0;
+        }
+    }
+
+    // Process...    
+    if (_isYuvProcessing)
+    {
+        process();
+        copyYuvFinalToRgb();
+    }
+    else // RGB Processing      
+    {
+        // HERE: we are NOT set up for this to work...
+        ADM_assert(0);
+        ADM_assert(_rgbBuffer);
+        copyYuvScratchToRgb();
+        process();
+    }
+
+    return display();
+}
+
 uint8_t  flyThreshold::update ()
 {
     download();
+    pushParam();
     process();
     copyYuvFinalToRgb();
-    display();
-    return 1;
+    return display();
 }
 
 uint8_t flyThreshold::process ()
 {
-    uint8_t lookup_table [256];
-    if (ADMVideoThreshold::computeLookupTable (&param, lookup_table))
-        upload();
+    if (preview_mode == PREVIEWMODE_THIS_FILTER)
+    {
+        if (thresholdp->computeLookupTable (&param))
+            upload();
 
-    ADMVideoThreshold::doThreshold (_yuvBuffer, _yuvBufferOut,
-                                    lookup_table, (_h * _w * 3) >> 1);
-    return 1;
+        ADMVideoThreshold::doThreshold (_yuvBuffer, _yuvBufferOut, thresholdp,
+                                        (_h * _w * 3) >> 1);
+        return 1;
+    }
+    else if (preview_mode == PREVIEWMODE_LATER_FILTER)
+    {
+        if (thresholdp->computeLookupTable (&param))
+            upload();
+
+        uint32_t len = 0;
+        uint32_t flags = 0;
+        uint32_t frame = sliderGet();
+        return source->getFrameNumberNoAlloc (frame, &len, _yuvBufferOut,
+                                              &flags);
+    }
+    else // if (preview_mode == PREVIEWMODE_EARLIER_FILTER)
+    {
+        // nothing to do here - we've already arranged for the earlier filter
+        // to write the result into the output buffer, and changes in our
+        // parameters can't affect the result of an earlier filter.
+
+        return 1;
+    }
 }
 
 /************* COMMON PART *********************/

Modified: branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flyThreshold.h
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flyThreshold.h	2008-02-03 09:40:17 UTC (rev 3787)
+++ branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flyThreshold.h	2008-02-03 12:04:10 UTC (rev 3788)
@@ -22,9 +22,30 @@
 {
   
   private:
+    ADMVideoThreshold * thresholdp;
+    THRESHOLD_PARAM saved_param;
+    THRESHOLD_PARAM * live_param;
+    AVDMGenericVideoStream * source;
     THRESHOLD_PARAM param;
 
   public:
+
+    // HERE: A lot of this should probably be moved up into ADM_flyDialog
+
+    uint16_t this_filter_index;
+
+    enum PreviewMode
+    {
+        PREVIEWMODE_INVALID = 0, // never use
+        PREVIEWMODE_EARLIER_FILTER,
+        PREVIEWMODE_THIS_FILTER,
+        PREVIEWMODE_LATER_FILTER
+    };
+
+  private:
+    PreviewMode preview_mode;
+
+  public:
     uint8_t    process(void);
     uint8_t    download(void);
     uint8_t    upload(void);
@@ -33,17 +54,49 @@
     flyThreshold (uint32_t width, uint32_t height,
                   AVDMGenericVideoStream * in,
                   void * canvas, void * slider,
-                  const THRESHOLD_PARAM * in_param)
+                  ADMVideoThreshold * thresholdp,
+                  THRESHOLD_PARAM * in_param)
         : ADM_flyDialog (width, height, in, canvas, slider, 1, RESIZE_AUTO),
-          param (*in_param)
+          thresholdp (thresholdp),
+          saved_param (*in_param),
+          live_param (in_param),
+          source (thresholdp),
+          param (*in_param),
+          this_filter_index (0),
+          preview_mode (PREVIEWMODE_THIS_FILTER)
     {
     };
 
+    uint8_t sliderChanged (void);
+
+    void pushParam ()
+    {
+        *live_param = param;
+    }
+
+    // no longer used
     void getParam (THRESHOLD_PARAM * outputParam)
     {
         *outputParam = param;
     }
 
+    void restoreParam ()
+    {
+        *live_param = saved_param;
+    }
+
+    AVDMGenericVideoStream * getSource () const
+    {
+        return source;
+    }
+
+    void changeSource (AVDMGenericVideoStream * in, PreviewMode mode)
+    {
+        source = in;
+        preview_mode = mode;
+        sliderChanged();
+    }
+
     ADMImage * getInputImage ()
     {
         return _yuvBuffer;
@@ -53,6 +106,11 @@
     {
         return _yuvBufferOut;
     }
+
+    float getZoom () const
+    {
+        return _zoom;
+    }
 };
 
 #endif

Modified: branches/avidemux_2.4_branch/avidemux/ADM_videoFilter/ADM_vidComputeAverage.cpp
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_videoFilter/ADM_vidComputeAverage.cpp	2008-02-03 09:40:17 UTC (rev 3787)
+++ branches/avidemux_2.4_branch/avidemux/ADM_videoFilter/ADM_vidComputeAverage.cpp	2008-02-03 12:04:10 UTC (rev 3788)
@@ -78,7 +78,7 @@
     }
     else
     {
-        _param->start_frame = 1;
+        _param->start_frame = 0;
         _param->end_frame = -1;
         _param->output_file = ADM_strdup ("");
         _param->bias = 128;
@@ -296,12 +296,10 @@
         return 0;
     ADMImage * image = _uncompressed;
 
-    uint32_t start_frame = _param->start_frame - 1;
+    uint32_t start_frame = _param->start_frame;
     uint32_t end_frame = _param->end_frame;
     if (int32_t (end_frame) < 0)
         end_frame = int32_t (num_frames) + int32_t (end_frame); // 0-based, thus -1 = last frame
-    else
-        --end_frame;
 
     if (!myInfo->sums
         || myInfo->width != _info.width || myInfo->height != _info.height
@@ -356,7 +354,7 @@
         uint32_t half_frame_count = frame_count / 2;
         if (debug & 2)
             printf ("Including frame %u of %u, now have %u (%u - %u)\n",
-                    curr_frame + 1, num_frames, frame_count, start_frame, end_frame);
+                    curr_frame, num_frames, frame_count, start_frame, end_frame);
 
         if (_param->display_mode == DISPLAYMODE_AVERAGE)
         {
@@ -403,7 +401,7 @@
         uint32_t half_frame_count = frame_count / 2;
         if (debug & 2)
             printf ("Using %u frame(s) (%u - %u) worth of average on frame %u of %u\n",
-                    frame_count, start_frame, end_frame, curr_frame + 1, num_frames);
+                    frame_count, start_frame, end_frame, curr_frame, num_frames);
 
         if (frame_count == 0)
         {

Modified: branches/avidemux_2.4_branch/avidemux/ADM_videoFilter/ADM_vidEraser.cpp
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_videoFilter/ADM_vidEraser.cpp	2008-02-03 09:40:17 UTC (rev 3787)
+++ branches/avidemux_2.4_branch/avidemux/ADM_videoFilter/ADM_vidEraser.cpp	2008-02-03 12:04:10 UTC (rev 3788)
@@ -371,11 +371,16 @@
 //    uint32_t & mask_w = myInfo->mask_w;
 //    uint32_t & mask_h = myInfo->mask_h;
 
-    masks.clear();
+    const char * filename = _param->data_file.c_str();
+    if (filename[0] == '\0')
+    {
+        fprintf (stderr, "Eraser: no input file selected!\n");
+        return 0;
+    }
+
 //    mask_w = 0;
 //    mask_h = 0;
 
-    const char * filename = _param->data_file.c_str();
     ifstream inputStream (filename);
     if (!inputStream)
     {
@@ -385,6 +390,7 @@
         return 0;
     }
 
+    masks.clear();
     string buffer;
 
     while (inputStream)

Modified: branches/avidemux_2.4_branch/avidemux/ADM_videoFilter/ADM_vidEraser.h
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_videoFilter/ADM_vidEraser.h	2008-02-03 09:40:17 UTC (rev 3787)
+++ branches/avidemux_2.4_branch/avidemux/ADM_videoFilter/ADM_vidEraser.h	2008-02-03 12:04:10 UTC (rev 3788)
@@ -175,6 +175,11 @@
         return myInfo->masks;
     }
 
+    void masksIsValid (bool valid)
+    {
+        myInfo->mask_data_invalid = !valid;
+    }
+
 protected:
 
     uint8_t readDataFile (uint32_t width);

Modified: branches/avidemux_2.4_branch/avidemux/ADM_videoFilter/ADM_vidParticle.cpp
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_videoFilter/ADM_vidParticle.cpp	2008-02-03 09:40:17 UTC (rev 3787)
+++ branches/avidemux_2.4_branch/avidemux/ADM_videoFilter/ADM_vidParticle.cpp	2008-02-03 12:04:10 UTC (rev 3788)
@@ -128,7 +128,7 @@
 
 }
 
-uint8_t ADMVideoParticle::configure(AVDMGenericVideoStream *in)
+uint8_t ADMVideoParticle::configure (AVDMGenericVideoStream *in)
 {
     diaMenuEntry tOutputFmt [] = {
         { OUTPUTFMT_FORMAT_NEW,
@@ -150,7 +150,7 @@
           sizeof (tOutputFmt) / sizeof (diaMenuEntry), tOutputFmt },
     };
 
-    uint8_t ret = DIA_particle (_in, _param, menu_mapping,
+    uint8_t ret = DIA_particle (_in, this, _param, menu_mapping,
                                 sizeof (menu_mapping) / sizeof (MenuMapping));
     if (ret == 1)
     {
@@ -399,7 +399,7 @@
                 if (debug & (0x02 << ImageTool::SHIFT_PAST_SHOW_FLAGS))
                     printf ("frame %d, particle %d (%d total), "
                             "%d pixels centered at (%.6f,%.6f)\n",
-                            real_frame + 1, frameParticleNum,
+                            real_frame, frameParticleNum,
                             totalParticleNum, area, centroid_x, centroid_y);
 
                 if (!do_outfp)
@@ -437,7 +437,7 @@
                                  "%.5f %.5f %.5f  " // minang,maxang,max/min
                                  "%.5f %.5f " // len, len_angle
                                  "%.5f %.5f %.5f\n", // wid, wid_ang, len/wid
-                                 real_frame + 1, camera_number,
+                                 real_frame, camera_number,
                                  centroid_x, centroid_y,
                                  area, totalParticleNum,
                                  particle.maxx - particle.minx + 1,
@@ -452,7 +452,7 @@
 #ifdef OLD_PARTICLE_WEDGE_SCHEME
                         fprintf (do_outfp,
                                  "%d,%d,%d,%.6f,%.6f,%d,%d,%.5f,%.5f,%.5f\n",
-                                 real_frame + 1, frameParticleNum, area,
+                                 real_frame, frameParticleNum, area,
                                  centroid_x, centroid_y, mindim, maxdim,
                                  mindimangle, maxdimangle, minmaxratio);
 #else // ! OLD_PARTICLE_WEDGE_SCHEME
@@ -462,7 +462,7 @@
                                  "%.5f,%.5f, %.5f,  " // minang,maxang,max/min
                                  "%.5f,%.5f, " // len, len_angle
                                  "%.5f,%.5f, %.5f\n", // wid, wid_ang, len/wid
-                                 real_frame + 1, frameParticleNum, area,
+                                 real_frame, frameParticleNum, area,
                                  centroid_x, centroid_y, mindist, maxdist,
                                  mindistangle, maxdistangle, maxminratio,
                                  bf.length, bf.length_angle,
@@ -479,7 +479,7 @@
                     if (outfmt == OUTPUTFMT_FORMAT_NEW)
                     {
                         fprintf (do_outfp, "%d %d %.6f %.6f %d %d\n",
-                                 real_frame + 1, camera_number,
+                                 real_frame, camera_number,
                                  centroid_x, centroid_y,
                                  area, totalParticleNum);
                     }
@@ -487,7 +487,7 @@
                     {
                         fprintf (do_outfp, "%d %d %.6f %.6f %d\n",
                                  totalParticleNum, area,
-                                 centroid_x, centroid_y, real_frame + 1);
+                                 centroid_x, centroid_y, real_frame);
                     }
                 }
             }

Modified: branches/avidemux_2.4_branch/avidemux/ADM_videoFilter/ADM_vidParticle.h
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_videoFilter/ADM_vidParticle.h	2008-02-03 09:40:17 UTC (rev 3787)
+++ branches/avidemux_2.4_branch/avidemux/ADM_videoFilter/ADM_vidParticle.h	2008-02-03 12:04:10 UTC (rev 3788)
@@ -87,7 +87,8 @@
      static uint8_t doParticle (ADMImage * image, ADMImage * data,
                                 AVDMGenericVideoStream * in,
                                 uint32_t real_frame,
-                                FILE * do_outfp, PARTICLE_PARAM * param,
+                                FILE * do_outfp,
+                                PARTICLE_PARAM * param,
                                 uint32_t width, uint32_t height);
 };
 
@@ -843,6 +844,7 @@
 
 struct MenuMapping;
 uint8_t DIA_particle (AVDMGenericVideoStream *in,
+                      ADMVideoParticle * particlep,
                       PARTICLE_PARAM * param,
                       const MenuMapping * menu_mapping,
                       uint32_t menu_mapping_count);

Modified: branches/avidemux_2.4_branch/avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp	2008-02-03 09:40:17 UTC (rev 3787)
+++ branches/avidemux_2.4_branch/avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp	2008-02-03 12:04:10 UTC (rev 3788)
@@ -52,12 +52,12 @@
 
 static FILTER_PARAM swissArmyKnifeParam =
 {
-    15,
+    16,
     { "tool", "input_type", "input_file", "load_bias",              // 4
       "load_multiplier", "input_constant", "memory_constant_alpha", // + 3 = 7
-      "init_start_frame", "init_end_frame", "init_by_rolling",      // + 3 = 10
-      "bias", "result_bias", "result_multiplier",                   // + 3 = 13
-      "histogram_frame_interval", "debug"                           // + 2 = 15
+      "lookahead_n_frames", "init_start_frame", "init_end_frame",   // + 3 = 10
+      "init_by_rolling", "bias", "result_bias",                     // + 3 = 13
+      "result_multiplier", "histogram_frame_interval", "debug"      // + 3 = 16
     }
 };
 
@@ -107,7 +107,7 @@
         GET(tool);
         GET(input_type);
 
-		char* tmp;
+        char* tmp;
         GET2(input_file, tmp);
         GET(load_bias);
         GET(load_multiplier);
@@ -115,6 +115,7 @@
         GET(input_constant);
 
         GET(memory_constant_alpha);
+        GET(lookahead_n_frames);
         GET(init_start_frame);
         GET(init_end_frame);
         GET(init_by_rolling);
@@ -139,9 +140,10 @@
 
         _param->input_constant = 0;
 
-        _param->init_start_frame = 1;
-        _param->init_end_frame = 100;
         _param->memory_constant_alpha = 1.0 / _param->init_end_frame;
+        _param->lookahead_n_frames = 0;
+        _param->init_start_frame = 0;
+        _param->init_end_frame = 99;
         _param->init_by_rolling = false;
 
         _param->bias = 128;
@@ -239,6 +241,7 @@
     CSET(input_constant);
 
     CSET(memory_constant_alpha);
+    CSET(lookahead_n_frames);
     CSET(init_start_frame);
     CSET(init_end_frame);
     CSET(init_by_rolling);
@@ -314,7 +317,7 @@
         ADM_assert (ret == 255); // 255 = whizzy dialog not implemented
     }
 
-	char* file = ADM_strdup(_param->input_file.c_str());
+    char * file = ADM_strdup (_param->input_file.c_str());
 
     diaElemFile input_file
         (0, &file,
@@ -337,8 +340,12 @@
     diaElemFloat memory_constant_alpha
         (&(_param->memory_constant_alpha),
          QT_TR_NOOP("Memory constant _alpha\n"
-           "(where A = (1-alpha)*A + alpha*curr_frame):"),
+           "(where A = (1-alpha)*A + alpha*(curr_frame + lookahead)):"),
          0, 0x7fffffff);
+    diaElemUInteger lookahead_n_frames
+        (&(_param->lookahead_n_frames),
+         QT_TR_NOOP("Look ahead _N frames:"),
+         0, 0x7fffffff);
     diaElemUInteger init_start_frame
         (&(_param->init_start_frame),
          QT_TR_NOOP("Init _Start Frame (first frame # to use for head start):"),
@@ -372,10 +379,11 @@
 
     diaElem * elems[] = { &tool, &input_type, &input_file, &load_bias,
                           &load_multiplier, &input_constant,
-                          &memory_constant_alpha, &init_start_frame,
-                          &init_end_frame, &init_by_rolling,
-                          &bias, &result_bias, &result_multiplier,
-                          &histogram_frame_interval, &debug };
+                          &memory_constant_alpha, &lookahead_n_frames,
+                          &init_start_frame, &init_end_frame,
+                          &init_by_rolling, &bias, &result_bias,
+                          &result_multiplier, &histogram_frame_interval,
+                          &debug };
 
     ret = diaFactoryRun (QT_TR_NOOP("Swiss Army Knife Configuration"),
                          sizeof (elems) / sizeof (diaElem *), elems);
@@ -385,8 +393,8 @@
         myInfo->histogram_data_invalid = true;
     }
 
-	_param->input_file = file;
-	delete[] file;
+    _param->input_file = file;
+    delete[] file;
 
     return ret;
 }
@@ -449,6 +457,7 @@
         input_file = "**** no file selected ****";
 
     const char * space = forDialog ? " " : "";
+    char * cptr;
 
     switch (param->input_type)
     {
@@ -482,10 +491,15 @@
         break;
     case INPUT_ROLLING_AVERAGE:
         sprintf (inputstr, "A");
-        sprintf (where, " (where each frame, A=(A*(1-alpha))+(P*alpha), "
-                 "alpha%s=%s%.6f)",
-                 space, space, param->memory_constant_alpha);
-        if (param->init_start_frame)
+        cptr = where + sprintf (where, " (where each frame, "
+                                "A=(A*(1-alpha))+(P*alpha), alpha%s=%s%.6f",
+                                space, space, param->memory_constant_alpha);
+        if (param->lookahead_n_frames)
+            sprintf (cptr, ", P = pixel from %d frames ahead)",
+                     param->lookahead_n_frames);
+        else
+            strcpy (cptr, ")");
+        if (param->init_start_frame <= param->init_end_frame)
             sprintf (moreinfo, ", initial A = %s avg of frames %u - %u",
                      param->init_by_rolling ? "rolling" : "straight",
                      param->init_start_frame, param->init_end_frame);
@@ -496,7 +510,7 @@
         break;
     }
 
-    char * cptr = conf;
+    cptr = conf;
 
     bool result_is_scaled
         = (param->result_bias != 0.0 || param->result_multiplier != 1.0);
@@ -945,6 +959,117 @@
 
 //============================================================================
 
+// This one is used in the lookahead case; it takes the additional parameter
+// supplying the lookahead frame.
+
+template <typename Oper, typename Histo>
+void ADMVideoSwissArmyKnife::computeRollingAverage (ADMImage * image,
+                                                    ADMImage * lookaheadimage,
+                                                    ADMImage * data,
+                                                    uint32_t planesize,
+                                                    SWISSARMYKNIFE_PARAM * param,
+                                                    int32_t bias,
+                                                    const Oper & op_in,
+                                                    const Histo & histogram_in)
+{
+    // We make local copies of the functors so that the calls below to
+    // record_input() and record_output() (for the histogram) and operator()
+    // (for the op) are accessing stack data rather than incurring yet another
+    // indirection.  When it's per-pixel, every little bit helps!
+
+    Histo histogram = histogram_in;
+    Oper op = op_in;
+
+    float alpha = param->memory_constant_alpha;
+    float oneminusalpha = 1 - alpha;
+
+    // HERE: for speed, we do luma (Y plane) only.  However, some
+    // users might want chroma, too... we should make that
+    // an option or something.
+
+    uint8_t * currp = YPLANE (image) + planesize;
+    uint8_t * destp = YPLANE (data) + planesize;
+    float * bgp = myInfo->bg + planesize;
+    uint32_t pixremaining = planesize + 1;
+
+    uint32_t sathigh = 0;
+    uint32_t satlow = 0;
+
+    if (lookaheadimage)
+    {
+        uint8_t * aheadp = YPLANE (lookaheadimage) + planesize;
+
+        while (--pixremaining)
+        {
+            int32_t P = *--currp;
+            histogram.record_input (P);
+
+            float A = *--bgp;
+            *bgp = (A * oneminusalpha) + (*--aheadp * alpha);
+
+            int32_t result = op (P, A) + bias;
+
+            histogram.record_output (result);
+
+            if (result & 0xffffff00)
+            {
+                if (result < 0)
+                {
+                    result = 0;
+                    satlow++;
+                }
+                else // if (result > 255)
+                {
+                    result = 255;
+                    sathigh++;
+                }
+            }
+
+            *--destp = result;
+        }
+    }
+    else
+    {
+        while (--pixremaining)
+        {
+            int32_t P = *--currp;
+            histogram.record_input (P);
+
+            float A = *--bgp;
+            // no update of background - the lookahead is looking past the
+            // end of the video
+
+            int32_t result = op (P, A) + bias;
+
+            histogram.record_output (result);
+
+            if (result & 0xffffff00)
+            {
+                if (result < 0)
+                {
+                    result = 0;
+                    satlow++;
+                }
+                else // if (result > 255)
+                {
+                    result = 255;
+                    sathigh++;
+                }
+            }
+
+            *--destp = result;
+        }
+    }
+
+    if (param->debug & 2)
+    {
+        if (satlow || sathigh)
+            printf ("    Saturated %d low, %d high\n", satlow, sathigh);
+    }
+}
+
+//============================================================================
+
 template <typename InputImageType, typename Oper, typename Histo>
 void ADMVideoSwissArmyKnife::applyImage (ADMImage * image, ADMImage * data,
                                          uint32_t planesize,
@@ -1394,15 +1519,42 @@
 
     uint32_t planesize = _info.width * _info.height;
     uint32_t size = (planesize * 3) >> 1;
+    ADMImage * lookaheadimage;
+
+    if (_param->lookahead_n_frames)
+    {
+        if (myInfo->bg_lab_size != planesize)
+        {
+            delete myInfo->bg_lab;
+            myInfo->bg_lab_size = planesize;
+            myInfo->bg_lab = new ADMImage (_info.width, _info.height);
+        }
+
+        if (frame + _param->lookahead_n_frames >= _info.nb_frames)
+            lookaheadimage = 0;
+        else if (!_in->getFrameNumberNoAlloc (frame
+                                              + _param->lookahead_n_frames,
+                                              len, myInfo->bg_lab, flags))
+            return 0;
+        else
+            lookaheadimage = myInfo->bg_lab;
+    }
+    else
+        lookaheadimage = 0;
+
+    // printf ("%s\n", getConf (_param, true));
+
     *len = size;
 
-    uint8_t ret = doSwissArmyKnife (_uncompressed, data, _in, this, _param,
+    uint8_t ret = doSwissArmyKnife (_uncompressed, lookaheadimage,
+                                    data, _in, this, _param,
                                     _info.width, _info.height);
     return ret;
 }
 
 uint8_t
 ADMVideoSwissArmyKnife::doSwissArmyKnife (ADMImage * image,
+                                          ADMImage * lookaheadimage,
                                           ADMImage * data,
                                           AVDMGenericVideoStream * in,
                                           ADMVideoSwissArmyKnife * sak,
@@ -1674,6 +1826,7 @@
         if (!myInfo->bg
             || myInfo->bg_x != width || myInfo->bg_y != height
             || myInfo->bg_mca != param->memory_constant_alpha
+            || myInfo->bg_lanf != param->lookahead_n_frames
             || myInfo->bg_isf != param->init_start_frame
             || myInfo->bg_ief != param->init_end_frame
             || myInfo->bg_ibr != param->init_by_rolling)
@@ -1689,24 +1842,25 @@
             myInfo->histogram_data_invalid = true;
 
             myInfo->bg_mca = param->memory_constant_alpha;
+            myInfo->bg_lanf = param->lookahead_n_frames;
             myInfo->bg_isf = param->init_start_frame;
             myInfo->bg_ief = param->init_end_frame;
             myInfo->bg_ibr = param->init_by_rolling;
 
-            if (myInfo->bg_isf && myInfo->bg_isf <= myInfo->bg_ief)
+            if (myInfo->bg_isf <= myInfo->bg_ief)
             {
                 uint32_t do_frames = myInfo->bg_ief - myInfo->bg_isf + 1;
 
-                uint32_t firstframe = myInfo->bg_isf - 1;
-                uint32_t lastframe = myInfo->bg_ief - 1;
+                uint32_t firstframe = myInfo->bg_isf;
+                uint32_t lastframe = myInfo->bg_ief;
                 const ADV_Info & info = sak->getInfo();
                 if (lastframe >= info.nb_frames)
                 {
                     lastframe = info.nb_frames - 1;
-                    if (firstframe > info.nb_frames)
+                    if (firstframe >= info.nb_frames)
                     {
                         firstframe = lastframe - do_frames + 1;
-                        if (firstframe > info.nb_frames)
+                        if (firstframe >= info.nb_frames)
                             firstframe = 0;
                     }
                     do_frames = lastframe - firstframe + 1;
@@ -1719,7 +1873,7 @@
                         myInfo->bg_ibr ? "rolling average over"
                         : "straight average of",
                         do_frames, myInfo->bg_x, myInfo->bg_y,
-                        firstframe + 1, lastframe + 1, myInfo->bg_mca);
+                        firstframe, lastframe, myInfo->bg_mca);
 
                 ADMImage aimage (myInfo->bg_x, myInfo->bg_y);
 
@@ -1728,6 +1882,22 @@
                 // or something.  (...in which case bg should be big enough for
                 // all three planes.)
 
+
+//***************************************************************************
+//***************************************************************************
+//***************************************************************************
+
+                // HERE: issue: if we are not starting at the first frame,
+                // then I think that "in->getFrameNumberNoAlloc(framenum)"
+                // will give us framenum+frame_at_which_we_are_starting!!
+                // not sure this matters a lot in practice right now, but it
+                // might matter more if users start using a start frame > 1 to
+                // get a good fore/aft ratio...
+
+//***************************************************************************
+//***************************************************************************
+//***************************************************************************
+
                 if (myInfo->bg_ibr)
                 {
                     // We want to "prime" the rolling average with the values from
@@ -1870,6 +2040,21 @@
         tool += TOOL_ADD_SCALING;
     }
 
+    // It might look like the following switches could be collapsed
+    // significantly if we just used a pointer to the functor objects,
+    // assigning the appropriate operation, histogram functor, etc., and then
+    // using fewer cases.  The problem is that to get the fastest possible
+    // code (important since we're talking about per-pixel operations here),
+    // the tool functor object (e.g., OpPequalsAminusP) needs to be
+    // instantiated inline in the call to the operation template (e.g.,
+    // convolve(), computeRollingAverage(), etc.) so that the functor code can
+    // be inlined.  If we passed an object through a pointer or reference,
+    // we'd have much smaller code (both source and binary), but it would also
+    // be much slower because every pixel would have to traverse the pointer.
+    // So in this case we are buying performance at the cost of a bunch of big
+    // messy switches in the source plus massive template code expansion in
+    // the output.  It's worth it.
+
     if (doingConvolution)
     {
         if (kernel.empty())
@@ -2031,7 +2216,7 @@
             return 0;
         }
     }
-    else if (doingRollingAvg)
+    else if (doingRollingAvg && param->lookahead_n_frames == 0)
     {
         switch (tool)
         {
@@ -2225,6 +2410,220 @@
             return 0;
         }
     }
+    else if (doingRollingAvg)
+    {
+        switch (tool)
+        {
+        case TOOL_A:
+            sak->computeRollingAverage (image, lookaheadimage, data, planesize,
+                                        param, bias, OpPequalsA(), HistogramNull());
+            break;
+        case TOOL_P: // HERE: we could optimize this if we wanted to
+            sak->computeRollingAverage (image, lookaheadimage, data, planesize,
+                                        param, bias, OpPequalsP(), HistogramNull());
+            break;
+        case TOOL_P_MINUS_A:
+            sak->computeRollingAverage (image, lookaheadimage, data, planesize,
+                                        param, bias, OpPequalsPminusA(), HistogramNull());
+            break;
+        case TOOL_A_MINUS_P:
+            sak->computeRollingAverage (image, lookaheadimage, data, planesize,
+                                        param, bias, OpPequalsAminusP(), HistogramNull());
+            break;
+        case TOOL_P_PLUS_A:
+            sak->computeRollingAverage (image, lookaheadimage, data, planesize,
+                                        param, bias, OpPequalsPplusA(), HistogramNull());
+            break;
+        case TOOL_P_TIMES_A:
+            sak->computeRollingAverage (image, lookaheadimage, data, planesize,
+                                        param, bias, OpPequalsPtimesA(), HistogramNull());
+            break;
+        case TOOL_P_DIVBY_A:
+            sak->computeRollingAverage (image, lookaheadimage, data, planesize,
+                                        param, bias, OpPequalsPdivByA(), HistogramNull());
+            break;
+        case TOOL_A_DIVBY_P:
+            sak->computeRollingAverage (image, lookaheadimage, data, planesize,
+                                        param, bias, OpPequalsAdivByP(), HistogramNull());
+            break;
+        case TOOL_MIN_P_A:
+            sak->computeRollingAverage (image, lookaheadimage, data, planesize,
+                                        param, bias, OpPequalsMinPA(), HistogramNull());
+            break;
+        case TOOL_MAX_P_A:
+            sak->computeRollingAverage (image, lookaheadimage, data, planesize,
+                                        param, bias, OpPequalsMaxPA(), HistogramNull());
+            break;
+
+        case TOOL_A_WITH_HISTOGRAM:
+            sak->computeRollingAverage (image, lookaheadimage, data, planesize,
+                                        param, bias, OpPequalsA(), *histogram);
+            break;
+        case TOOL_P_WITH_HISTOGRAM: // HERE: we could optimize this if we wanted to
+            sak->computeRollingAverage (image, lookaheadimage, data, planesize,
+                                        param, bias, OpPequalsP(), *histogram);
+            break;
+        case TOOL_P_MINUS_A_WITH_HISTOGRAM:
+            sak->computeRollingAverage (image, lookaheadimage, data, planesize,
+                                        param, bias, OpPequalsPminusA(), *histogram);
+            break;
+        case TOOL_A_MINUS_P_WITH_HISTOGRAM:
+            sak->computeRollingAverage (image, lookaheadimage, data, planesize,
+                                        param, bias, OpPequalsAminusP(), *histogram);
+            break;
+        case TOOL_P_PLUS_A_WITH_HISTOGRAM:
+            sak->computeRollingAverage (image, lookaheadimage, data, planesize,
+                                        param, bias, OpPequalsPplusA(), *histogram);
+            break;
+        case TOOL_P_TIMES_A_WITH_HISTOGRAM:
+            sak->computeRollingAverage (image, lookaheadimage, data, planesize,
+                                        param, bias, OpPequalsPtimesA(), *histogram);
+            break;
+        case TOOL_P_DIVBY_A_WITH_HISTOGRAM:
+            sak->computeRollingAverage (image, lookaheadimage, data, planesize,
+                                        param, bias, OpPequalsPdivByA(), *histogram);
+            break;
+        case TOOL_A_DIVBY_P_WITH_HISTOGRAM:
+            sak->computeRollingAverage (image, lookaheadimage, data, planesize,
+                                        param, bias, OpPequalsAdivByP(), *histogram);
+            break;
+        case TOOL_MIN_P_A_WITH_HISTOGRAM:
+            sak->computeRollingAverage (image, lookaheadimage, data, planesize,
+                                        param, bias, OpPequalsMinPA(), *histogram);
+            break;
+        case TOOL_MAX_P_A_WITH_HISTOGRAM:
+            sak->computeRollingAverage (image, lookaheadimage, data, planesize,
+                                        param, bias, OpPequalsMaxPA(), *histogram);
+            break;
+
+        case TOOL_A_SCALED:
+            sak->computeRollingAverage (image, lookaheadimage, data, planesize,
+                                        param, bias,
+                                        OpPequalsA_Scaled (rbias, rmultiplier),
+                                        HistogramNull());
+            break;
+        case TOOL_P_SCALED: // HERE_SCALED: we could optimize this if we wanted to
+            sak->computeRollingAverage (image, lookaheadimage, data, planesize,
+                                        param, bias,
+                                        OpPequalsP_Scaled (rbias, rmultiplier),
+                                        HistogramNull());
+            break;
+        case TOOL_P_MINUS_A_SCALED:
+            sak->computeRollingAverage (image, lookaheadimage, data, planesize,
+                                        param, bias,
+                                        OpPequalsPminusA_Scaled (rbias, rmultiplier),
+                                        HistogramNull());
+            break;
+        case TOOL_A_MINUS_P_SCALED:
+            sak->computeRollingAverage (image, lookaheadimage, data, planesize,
+                                        param, bias,
+                                        OpPequalsAminusP_Scaled (rbias, rmultiplier),
+                                        HistogramNull());
+            break;
+        case TOOL_P_PLUS_A_SCALED:
+            sak->computeRollingAverage (image, lookaheadimage, data, planesize,
+                                        param, bias,
+                                        OpPequalsPplusA_Scaled (rbias, rmultiplier),
+                                        HistogramNull());
+            break;
+        case TOOL_P_TIMES_A_SCALED:
+            sak->computeRollingAverage (image, lookaheadimage, data, planesize,
+                                        param, bias,
+                                        OpPequalsPtimesA_Scaled (rbias, rmultiplier),
+                                        HistogramNull());
+            break;
+        case TOOL_P_DIVBY_A_SCALED:
+            sak->computeRollingAverage (image, lookaheadimage, data, planesize,
+                                        param, bias,
+                                        OpPequalsPdivByA_Scaled (rbias, rmultiplier),
+                                        HistogramNull());
+            break;
+        case TOOL_A_DIVBY_P_SCALED:
+            sak->computeRollingAverage (image, lookaheadimage, data, planesize,
+                                        param, bias,
+                                        OpPequalsAdivByP_Scaled (rbias, rmultiplier),
+                                        HistogramNull());
+            break;
+        case TOOL_MIN_P_A_SCALED:
+            sak->computeRollingAverage (image, lookaheadimage, data, planesize,
+                                        param, bias,
+                                        OpPequalsMinPA_Scaled (rbias, rmultiplier),
+                                        HistogramNull());
+            break;
+        case TOOL_MAX_P_A_SCALED:
+            sak->computeRollingAverage (image, lookaheadimage, data, planesize,
+                                        param, bias,
+                                        OpPequalsMaxPA_Scaled (rbias, rmultiplier),
+                                        HistogramNull());
+            break;
+
+        case TOOL_A_SCALED_WITH_HISTOGRAM:
+            sak->computeRollingAverage (image, lookaheadimage, data, planesize,
+                                        param, bias,
+                                        OpPequalsA_Scaled (rbias, rmultiplier),
+                                        *histogram);
+            break;
+        case TOOL_P_SCALED_WITH_HISTOGRAM: // HERE: we could optimize this if we wanted to
+            sak->computeRollingAverage (image, lookaheadimage, data, planesize,
+                                        param, bias,
+                                        OpPequalsP_Scaled (rbias, rmultiplier),
+                                        *histogram);
+            break;
+        case TOOL_P_MINUS_A_SCALED_WITH_HISTOGRAM:
+            sak->computeRollingAverage (image, lookaheadimage, data, planesize,
+                                        param, bias,
+                                        OpPequalsPminusA_Scaled (rbias, rmultiplier),
+                                        *histogram);
+            break;
+        case TOOL_A_MINUS_P_SCALED_WITH_HISTOGRAM:
+            sak->computeRollingAverage (image, lookaheadimage, data, planesize,
+                                        param, bias,
+                                        OpPequalsAminusP_Scaled (rbias, rmultiplier),
+                                        *histogram);
+            break;
+        case TOOL_P_PLUS_A_SCALED_WITH_HISTOGRAM:
+            sak->computeRollingAverage (image, lookaheadimage, data, planesize,
+                                        param, bias,
+                                        OpPequalsPplusA_Scaled (rbias, rmultiplier),
+                                        *histogram);
+            break;
+        case TOOL_P_TIMES_A_SCALED_WITH_HISTOGRAM:
+            sak->computeRollingAverage (image, lookaheadimage, data, planesize,
+                                        param, bias,
+                                        OpPequalsPtimesA_Scaled (rbias, rmultiplier),
+                                        *histogram);
+            break;
+        case TOOL_P_DIVBY_A_SCALED_WITH_HISTOGRAM:
+            sak->computeRollingAverage (image, lookaheadimage, data, planesize,
+                                        param, bias,
+                                        OpPequalsPdivByA_Scaled (rbias, rmultiplier),
+                                        *histogram);
+            break;
+        case TOOL_A_DIVBY_P_SCALED_WITH_HISTOGRAM:
+            sak->computeRollingAverage (image, lookaheadimage, data, planesize,
+                                        param, bias,
+                                        OpPequalsAdivByP_Scaled (rbias, rmultiplier),
+                                        *histogram);
+            break;
+        case TOOL_MIN_P_A_SCALED_WITH_HISTOGRAM:
+            sak->computeRollingAverage (image, lookaheadimage, data, planesize,
+                                        param, bias,
+                                        OpPequalsMinPA_Scaled (rbias, rmultiplier),
+                                        *histogram);
+            break;
+        case TOOL_MAX_P_A_SCALED_WITH_HISTOGRAM:
+            sak->computeRollingAverage (image, lookaheadimage, data, planesize,
+                                        param, bias,
+                                        OpPequalsMaxPA_Scaled (rbias, rmultiplier),
+                                        *histogram);
+            break;
+
+        default:
+            fprintf (stderr, "SwissArmyKnife: unknown operation (tool) %d!\n",
+                     param->tool);
+            return 0;
+        }
+    }
     else if (doingFileImageFloat)
     {
         if (width != myInfo->image_w || height != myInfo->image_h)

Modified: branches/avidemux_2.4_branch/avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.h
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.h	2008-02-03 09:40:17 UTC (rev 3787)
+++ branches/avidemux_2.4_branch/avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.h	2008-02-03 12:04:10 UTC (rev 3788)
@@ -39,6 +39,7 @@
     float input_constant;
 
     float    memory_constant_alpha;
+    uint32_t lookahead_n_frames;
     uint32_t init_start_frame;
     uint32_t init_end_frame;
     uint32_t init_by_rolling;
@@ -100,6 +101,9 @@
 
         float *       bg;
         float         bg_mca;
+        ADMImage *    bg_lab; // lookahead buffer
+        uint32_t      bg_lab_size;
+        uint32_t      bg_lanf;
         uint32_t      bg_isf;
         uint32_t      bg_ief;
         uint32_t      bg_x;
@@ -133,6 +137,9 @@
 
               bg (0),
               bg_mca (0),
+              bg_lab (0),
+              bg_lab_size (0),
+              bg_lanf (0),
               bg_isf (0),
               bg_ief (0),
               bg_x (0),
@@ -154,6 +161,7 @@
             delete [] image_int;
             delete [] image_float;
             delete [] bg;
+            delete bg_lab;
             delete [] histogram_input_data;
             delete [] histogram_output_data;
         }
@@ -260,6 +268,7 @@
     static char * getConf (SWISSARMYKNIFE_PARAM * param, bool forDialog);
 
     static uint8_t doSwissArmyKnife (ADMImage * from_image,
+                                     ADMImage * lookaheadimage,
                                      ADMImage * to_image,
                                      AVDMGenericVideoStream * in,
                                      ADMVideoSwissArmyKnife * sak,
@@ -276,6 +285,15 @@
                                 const Oper & op_in,
                                 const Histo & histogram_in);
 
+    template <typename Oper, typename Histo>
+    void computeRollingAverage (ADMImage * image, ADMImage * lookaheadimage,
+                                ADMImage * data,
+                                uint32_t planesize,
+                                SWISSARMYKNIFE_PARAM * param,
+                                int32_t bias,
+                                const Oper & op_in,
+                                const Histo & histogram_in);
+
     template <typename InputImageType, typename Oper, typename Histo>
     void applyImage (ADMImage * image, ADMImage * data,
                      uint32_t planesize,

Modified: branches/avidemux_2.4_branch/avidemux/ADM_videoFilter/ADM_vidThreshold.cpp
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_videoFilter/ADM_vidThreshold.cpp	2008-02-03 09:40:17 UTC (rev 3787)
+++ branches/avidemux_2.4_branch/avidemux/ADM_videoFilter/ADM_vidThreshold.cpp	2008-02-03 12:04:10 UTC (rev 3788)
@@ -39,15 +39,16 @@
 
 BUILD_CREATE(threshold_create,ADMVideoThreshold);
 
-ADMVideoThreshold::ADMVideoThreshold(AVDMGenericVideoStream *in,CONFcouple *couples)
+ADMVideoThreshold::ADMVideoThreshold (AVDMGenericVideoStream *in,
+                                      CONFcouple *couples)
 			
 {
     printf ("ADMVideoThreshold ctor (%p)\n", this);
     _in = in;
-    memcpy(&_info,in->getInfo(),sizeof(_info));
+    memcpy (&_info,in->getInfo(),sizeof(_info));
     _info.encoding = 1;
     _uncompressed = new ADMImage(_in->getInfo()->width, _in->getInfo()->height);
-    ADM_assert(_uncompressed);
+    ADM_assert (_uncompressed);
     _param = new THRESHOLD_PARAM;
     if (couples)
     {
@@ -64,11 +65,10 @@
         _param->debug = 0;
     }
 
-    computeLookupTable (_param, lookup_table);
+    computeLookupTable (_param);
 }
 
-uint8_t ADMVideoThreshold::computeLookupTable (THRESHOLD_PARAM * param,
-                                               uint8_t lookup_table [256])
+uint8_t ADMVideoThreshold::computeLookupTable (THRESHOLD_PARAM * param)
 {
     uint8_t changed = false;
 
@@ -123,19 +123,19 @@
     CSET(debug);
 
     return 1;
-
 }
 
-uint8_t ADMVideoThreshold::configure(AVDMGenericVideoStream *in)
+uint8_t ADMVideoThreshold::configure (AVDMGenericVideoStream *in)
 {
-    uint8_t ret = DIA_threshold (_in, _param);
+    uint8_t ret = DIA_threshold (_in, this, _param);
     if (ret == 1)
     {
-        computeLookupTable (_param, lookup_table);
+        computeLookupTable (_param);
         return ret;
     }
     else if (ret == 0) // 0 = cancel
     {
+        computeLookupTable (_param);
         return ret;
     }
     else
@@ -164,7 +164,7 @@
 
     if (ret) // 0 = cancel
     {
-        computeLookupTable (_param, lookup_table);
+        computeLookupTable (_param);
     }
 
     return ret;
@@ -234,20 +234,20 @@
     memset (UPLANE (data), 128, planesize >> 2);
     memset (VPLANE (data), 128, planesize >> 2);
 
-    data->copyInfo(image);
+    data->copyInfo (image);
     return 1;
 }	                           
 
 // This is used by the preview code for the configuration dialog.
 
 void ADMVideoThreshold::doThreshold (ADMImage * from, ADMImage * to,
-                                     uint8_t * lookup_table,
+                                     ADMVideoThreshold * thresholdp,
                                      uint32_t pixelcount)
 {
     uint8_t * currp = YPLANE (from) + pixelcount;
     uint8_t * destp = YPLANE (to) + pixelcount;
     uint32_t pixremaining = pixelcount + 1;
-    uint8_t * table = lookup_table;
+    const uint8_t * table = thresholdp->lookup_table;
 
     while (--pixremaining)
     {

Modified: branches/avidemux_2.4_branch/avidemux/ADM_videoFilter/ADM_vidThreshold.h
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_videoFilter/ADM_vidThreshold.h	2008-02-03 09:40:17 UTC (rev 3787)
+++ branches/avidemux_2.4_branch/avidemux/ADM_videoFilter/ADM_vidThreshold.h	2008-02-03 12:04:10 UTC (rev 3788)
@@ -47,16 +47,18 @@
                                                ADMImage *data,uint32_t *flags);
 
      virtual uint8_t 	configure (AVDMGenericVideoStream *instream);
-     virtual char 		   *printConf(void);
+     virtual char *     printConf(void);
      virtual uint8_t 	getCoupledConf (CONFcouple **couples);
 
-     static uint8_t computeLookupTable (THRESHOLD_PARAM * param,
-                                        uint8_t lookup_table [256]);
+     uint8_t computeLookupTable (THRESHOLD_PARAM * param);
+
      static void doThreshold (ADMImage * from, ADMImage * to,
-                              uint8_t * lookup_table, uint32_t pixelcount);
+                              ADMVideoThreshold * thresholdp,
+                              uint32_t pixelcount);
 };
 
 uint8_t DIA_threshold (AVDMGenericVideoStream *in,
+                       ADMVideoThreshold * thresholdp,
                        THRESHOLD_PARAM * param);
 
 #endif



From mean at mail.berlios.de  Wed Feb 13 19:52:52 2008
From: mean at mail.berlios.de (mean at BerliOS)
Date: Wed, 13 Feb 2008 19:52:52 +0100
Subject: [Avidemux-svn-commit] r3790 - branches/avidemux_2.4_branch/po
Message-ID: <200802131852.m1DIqqr0025784@sheep.berlios.de>

Author: mean
Date: 2008-02-13 19:52:51 +0100 (Wed, 13 Feb 2008)
New Revision: 3790

Modified:
   branches/avidemux_2.4_branch/po/ru.po
Log:
[I18N] fix ru

Modified: branches/avidemux_2.4_branch/po/ru.po
===================================================================
--- branches/avidemux_2.4_branch/po/ru.po	2008-02-04 19:02:05 UTC (rev 3789)
+++ branches/avidemux_2.4_branch/po/ru.po	2008-02-13 18:52:51 UTC (rev 3790)
@@ -5788,7 +5788,6 @@
 msgstr ""
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1300
-#, c-format
 msgid "A value of 20 will give 20% more bits to every I-frame"
 msgstr "???????? 20 ???? ??????? I-????? ?? 20% ???????? ??????"
 



From gruntster at mail.berlios.de  Thu Feb 14 12:28:05 2008
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Thu, 14 Feb 2008 12:28:05 +0100
Subject: [Avidemux-svn-commit] r3791 - branches/avidemux_2.4_branch
Message-ID: <200802141128.m1EBS5EH000061@sheep.berlios.de>

Author: gruntster
Date: 2008-02-14 12:27:55 +0100 (Thu, 14 Feb 2008)
New Revision: 3791

Modified:
   branches/avidemux_2.4_branch/ConfigureChecks.cmake
   branches/avidemux_2.4_branch/configure.in.in
Log:
[Release] stamp as 2.4.1

Modified: branches/avidemux_2.4_branch/ConfigureChecks.cmake
===================================================================
--- branches/avidemux_2.4_branch/ConfigureChecks.cmake	2008-02-13 18:52:51 UTC (rev 3790)
+++ branches/avidemux_2.4_branch/ConfigureChecks.cmake	2008-02-14 11:27:55 UTC (rev 3791)
@@ -127,8 +127,8 @@
 ########################################
 # Standard Avidemux defines
 ########################################
-SET(VERSION 2.4)
-SET(PACKAGE_VERSION 2.4)
+SET(VERSION 2.4.1)
+SET(PACKAGE_VERSION 2.4.1)
 
 SET(HAVE_BUILTIN_VECTOR 1)
 SET(HAVE_AUDIO 1)

Modified: branches/avidemux_2.4_branch/configure.in.in
===================================================================
--- branches/avidemux_2.4_branch/configure.in.in	2008-02-13 18:52:51 UTC (rev 3790)
+++ branches/avidemux_2.4_branch/configure.in.in	2008-02-14 11:27:55 UTC (rev 3791)
@@ -38,7 +38,7 @@
 dnl Perform program name transformation
 AC_ARG_PROGRAM
 dnl Automake doc recommends to do this only here. (Janos)
-AM_INIT_AUTOMAKE(avidemux,"2.4.0")
+AM_INIT_AUTOMAKE(avidemux,"2.4.1")
 ADM_SUBVERSION="0"
 
 if [[ -f .svn/entries ]]; then



From mean at mail.berlios.de  Wed Feb 20 19:10:42 2008
From: mean at mail.berlios.de (mean at BerliOS)
Date: Wed, 20 Feb 2008 19:10:42 +0100
Subject: [Avidemux-svn-commit] r3792 - branches
Message-ID: <200802201810.m1KIAgGU019377@sheep.berlios.de>

Author: mean
Date: 2008-02-20 19:10:41 +0100 (Wed, 20 Feb 2008)
New Revision: 3792

Removed:
   branches/avidemux_2.5_branch_mean/
Log:




From mean at mail.berlios.de  Wed Feb 20 19:11:22 2008
From: mean at mail.berlios.de (mean at BerliOS)
Date: Wed, 20 Feb 2008 19:11:22 +0100
Subject: [Avidemux-svn-commit] r3793 - branches
Message-ID: <200802201811.m1KIBMd1020349@sheep.berlios.de>

Author: mean
Date: 2008-02-20 19:11:22 +0100 (Wed, 20 Feb 2008)
New Revision: 3793

Added:
   branches/avidemux_2.5_branch_mean/
Log:
:x


Copied: branches/avidemux_2.5_branch_mean (from rev 3792, branches/avidemux_2.4_branch)



From mean at mail.berlios.de  Thu Feb 21 19:18:56 2008
From: mean at mail.berlios.de (mean at BerliOS)
Date: Thu, 21 Feb 2008 19:18:56 +0100
Subject: [Avidemux-svn-commit] r3794 - in
	branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK:
	ADM_dialog ADM_gui2
Message-ID: <200802211818.m1LIIuE8031531@sheep.berlios.de>

Author: mean
Date: 2008-02-21 19:18:54 +0100 (Thu, 21 Feb 2008)
New Revision: 3794

Modified:
   branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_flyDialog.cpp
   branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_bindings.cpp
   branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_gtkRender.cpp
Log:
[UI] Last chunk of Chris patch

Modified: branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_flyDialog.cpp
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_flyDialog.cpp	2008-02-20 18:11:22 UTC (rev 3793)
+++ branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_flyDialog.cpp	2008-02-21 18:18:54 UTC (rev 3794)
@@ -48,8 +48,9 @@
 	UI_centreCanvasWindow(window, (GtkWidget*)_canvas, _zoomW, _zoomH);
 	gtk_widget_set_size_request((GtkWidget*)_canvas, _zoomW, _zoomH);
 #ifdef USE_JOG
-	physical_jog_shuttle->registerCBs (this, PhysicalJogShuttle::NoButtonCB,
-                                           jogDial, jogRing);
+        if (!reInit)
+            physical_jog_shuttle->registerCBs (this, PhysicalJogShuttle::NoButtonCB,
+                                               jogDial, jogRing);
 #endif
 }
 

Modified: branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_bindings.cpp
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_bindings.cpp	2008-02-20 18:11:22 UTC (rev 3793)
+++ branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_bindings.cpp	2008-02-21 18:18:54 UTC (rev 3794)
@@ -44,6 +44,7 @@
 #include "../ADM_toolkit_gtk/gtkmarkscale.h"
 #include "../ADM_toolkit_gtk/jogshuttle.h"
 #include "../ADM_toolkit_gtk/ADM_jogshuttle.h"
+#include "gtkgui.h"
 
 uint8_t UI_getPhysicalScreenSize(uint32_t *w,uint32_t *h);
 
@@ -79,7 +80,7 @@
 static char     *customNames[ADM_MAC_CUSTOM_SCRIPT];
 static uint32_t ADM_nbCustom=0;
 // Needed for DND
-extern void A_openAvi (char *name);
+// extern int A_openAvi (char *name);
 extern void A_appendAvi (char *name);
 
 
@@ -202,6 +203,104 @@
   
 };
 
+#ifdef ENABLE_WINDOW_SIZING_HACK
+
+// This is a hack to empirically determine the largest window for which there
+// is room on the screen, allowing for panels and such.  There doesn't seem to
+// be any way to query GTK for this information, so we create a window,
+// maximize it and make it visible, wait for the real configure event that
+// comes after it is actually maximized, and record the size that it had in
+// that event.  That size is what we take to be the largest window that will
+// fit.  We use that information later to calculate how much (and whether or
+// not) to scale down the preview video in flyDialogs, via
+// UI_calcZoomToFitScreen() in GUI_gtkRender.cpp.
+
+int maxWindowWidth = -1;
+int maxWindowHeight = -1;
+
+gboolean tmpwin_configured (GtkWidget * widget, GdkEventConfigure * event,
+                            gpointer user_data)
+{
+    printf ("tmpwin_configured: now %dx%d @ +%d+%d\n",
+            event->width, event->height, event->x, event->y);
+
+    // it always seems to get two events, one at a 200x200 dimension and then
+    // the one at the maximized dimensions.  An alternate approach here would
+    // be to ignore the first configure event and use the 2nd.  Yet another
+    // way would be to do the maximize call here on the first event...
+
+    if (event->width > 200)
+    {
+        maxWindowWidth = event->width;
+        maxWindowHeight = event->height;
+        gtk_widget_destroy (widget);
+    }
+
+    return TRUE;
+}
+
+void do_tmpwin_hack (void)
+{
+    GtkWidget * tmpwin = gtk_window_new (GTK_WINDOW_TOPLEVEL);
+    g_signal_connect (GTK_OBJECT (tmpwin), "configure-event",
+                      GTK_SIGNAL_FUNC (tmpwin_configured),
+                      gpointer (tmpwin));
+    gtk_window_maximize (GTK_WINDOW(tmpwin));
+    gtk_widget_show (tmpwin);
+}
+
+#endif
+
+// This is part of a hack to allow the user to attach the Play and Stop
+// actions to buttons.  The problem is that once we launch the Play action,
+// HandleAction() doesn't return to its caller until avidemux stops playing,
+// so if HandleAction() is called directly from the event handler, there is no
+// way for the Stop button to be seen until something else has already stopped
+// it.  However, if we have the event handler just set up a timer, which
+// launches the play action, it's only the timer that is locked up, and since
+// we only use the timer for the Play action (and not any of the other
+// buttons), then everything (including the Stop button) works just fine.
+// A GTK expert might know of a better way to solve this problem, but I'm not
+// convinced that one exists in current GTK (2.10 on my FC7 system, but we
+// need to support older ones, too).
+
+static gboolean on_PlayButtonHackTimer (gpointer data)
+{
+    gdk_threads_enter();
+    HandleAction (ACT_PlayAvi);
+    gdk_threads_leave();
+    return FALSE;
+}
+
+void jogButton (void *, unsigned short /* raw_button */, Action gui_action)
+{
+    // hack alert: see comment for on_PlayButtonHackTimer(), above
+    if (gui_action == ACT_PlayAvi)
+        g_timeout_add (10, on_PlayButtonHackTimer, NULL);
+    else if (gui_action != ACT_INVALID)
+        HandleAction (gui_action);
+}
+
+void jogDial (void *, signed short offset) // offset usually -1 or +1
+{
+    if (offset < 0)
+        GUI_PrevFrame (uint32_t (-offset));
+    else
+        GUI_NextFrame (uint32_t (offset));
+}
+
+GtkWidget * lookup_jog_shuttle_widget (void)
+{
+    return lookup_widget(guiRootWindow,"jogg");
+}
+
+void jogRing (void *, gfloat angle) // angle is -1.0 to 0 to +1.0
+{
+    GtkWidget * jsw = lookup_jog_shuttle_widget();
+    if (jsw)
+        jog_shuttle_set_value (jsw, angle);
+}
+
 ///
 ///	Create main window and bind to it
 ///
@@ -214,6 +313,10 @@
 		
 		if(!guiRootWindow) return 0;
 
+#ifdef ENABLE_WINDOW_SIZING_HACK
+                do_tmpwin_hack();
+#endif
+
 		gtk_register_dialog(guiRootWindow);
 					
 		// and seek global sub entity
@@ -232,6 +335,7 @@
                 GUI_gtk_grow_off(1);
 #ifdef USE_JOG
                 physical_jog_shuttle = &(PhysicalJogShuttle::getInstance());
+                physical_jog_shuttle->registerCBs (NULL, jogButton, jogDial, jogRing);
 #endif 
 	return ret;
 }
@@ -243,6 +347,7 @@
 	for(int i=0;i<ADM_nbCustom;i++)
 		delete(customNames[i]);
 #ifdef USE_JOG
+        physical_jog_shuttle->deregisterCBs (NULL);
         delete physical_jog_shuttle;
 #endif
 }
@@ -588,11 +693,6 @@
         
 }
 
-GtkWidget * lookup_jog_shuttle_widget (void)
-{
-    return lookup_widget(guiRootWindow,"jogg");
-}
-
 void UI_setTitle(const char *name)
 {
         char title[1024];
@@ -1091,7 +1191,7 @@
                }
                else
                {
-                    fileReadWrite(A_openAvi, 0, (char*)filename);
+                    fileReadWrite(reinterpret_cast <void (*)(char *)> (A_openAvi), 0, (char*)filename);
                }
       ADM_dealloc(names[i]); 
     }

Modified: branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_gtkRender.cpp
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_gtkRender.cpp	2008-02-20 18:11:22 UTC (rev 3793)
+++ branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_gtkRender.cpp	2008-02-21 18:18:54 UTC (rev 3794)
@@ -46,6 +46,10 @@
 extern GtkWidget *getDrawWidget(void);
 extern uint8_t UI_getPhysicalScreenSize(uint32_t *w, uint32_t *h);
 
+#ifdef ENABLE_WINDOW_SIZING_HACK
+extern int maxWindowWidth, maxWindowHeight; // from GUI_bindings.cpp
+#endif
+
 ColYuvRgb rgbConverter(640,480);
 uint32_t lastW,lastH;
 /**
@@ -124,9 +128,65 @@
 #endif
 }
 
+#ifdef ENABLE_WINDOW_SIZING_HACK
+
+// This version depends on GUI_bindings.cpp providing maxWindowWidth and maxWindowHeight.
+
 // Calculate the zoom ratio required to fit the whole image on the screen.
 float UI_calcZoomToFitScreen(GtkWindow* window, GtkWidget* drawingArea, uint32_t imageWidth, uint32_t imageHeight)
 {
+    int windowWidth, windowHeight;
+    int drawingWidth, drawingHeight;
+    int reqWidth, reqHeight;
+    uint32_t screenWidth, screenHeight;
+	
+    gtk_window_get_size(window, &windowWidth, &windowHeight);
+    GtkRequisition size_req;
+    gtk_widget_size_request (drawingArea, &size_req);
+    drawingWidth = size_req.width;
+    drawingHeight = size_req.height;
+    gtk_widget_get_size_request(drawingArea, &reqWidth, &reqHeight);
+
+    // Take borders and captions into consideration (GTK doesn't seem to
+    // support this so we'll have to guess)
+    windowWidth += 10;
+    windowHeight += 10;
+
+    // Take drawing area out of the equation, how much extra do we need for additional controls?
+    // and then how much does that leave us for the image?
+    uint32_t availableWidth = maxWindowWidth - (windowWidth - drawingWidth);
+    uint32_t availableHeight = maxWindowHeight - (windowHeight - drawingHeight);
+
+    float ratio;
+    // Calculate zoom ratio
+    if (imageWidth > availableWidth || imageHeight > availableHeight)
+    {
+        float wratio = (imageWidth <= availableWidth) ? 1
+                       : (float (availableWidth) / float (imageWidth));
+        float hratio = (imageHeight <= availableHeight) ? 1
+                       : (float (availableHeight) / float (imageHeight));
+        if (wratio < hratio)
+            ratio = wratio;
+        else
+            ratio = hratio;
+    }
+    else
+        ratio = 1;
+
+    printf ("UI_calcZoomToFitScreen(): max %dx%d, win %dx%d, drawarea %dx%d (%dx%d), "
+            "available %dx%d, image %dx%d, scale %.6f\n",
+            maxWindowWidth, maxWindowHeight, windowWidth, windowHeight,
+            drawingWidth, drawingHeight, reqWidth, reqHeight,
+            availableWidth, availableHeight, imageWidth, imageHeight, ratio);
+
+    return ratio;
+}
+
+#else
+
+// Calculate the zoom ratio required to fit the whole image on the screen.
+float UI_calcZoomToFitScreen(GtkWindow* window, GtkWidget* drawingArea, uint32_t imageWidth, uint32_t imageHeight)
+{
 	int windowWidth, windowHeight;
 	int drawingWidth, drawingHeight;
 	uint32_t screenWidth, screenHeight;
@@ -160,6 +220,8 @@
 		return 1;
 }
 
+#endif
+
 // GTK doesn't centre the window correctly.  Use this function to centre windows with a canvas that is yet to resized.
 void UI_centreCanvasWindow(GtkWindow *window, GtkWidget *canvas, int newCanvasWidth, int newCanvasHeight)
 {



From mean at mail.berlios.de  Fri Feb 22 19:17:31 2008
From: mean at mail.berlios.de (mean at BerliOS)
Date: Fri, 22 Feb 2008 19:17:31 +0100
Subject: [Avidemux-svn-commit] r3795 - in
	branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK:
	ADM_dialog ADM_gui2
Message-ID: <200802221817.m1MIHVJ2031637@sheep.berlios.de>

Author: mean
Date: 2008-02-22 19:17:30 +0100 (Fri, 22 Feb 2008)
New Revision: 3795

Modified:
   branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_flyDialog.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_bindings.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_gtkRender.cpp
Log:
[UI] Merged r3794


Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_flyDialog.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_flyDialog.cpp	2008-02-21 18:18:54 UTC (rev 3794)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_flyDialog.cpp	2008-02-22 18:17:30 UTC (rev 3795)
@@ -48,8 +48,9 @@
 	UI_centreCanvasWindow(window, (GtkWidget*)_canvas, _zoomW, _zoomH);
 	gtk_widget_set_size_request((GtkWidget*)_canvas, _zoomW, _zoomH);
 #ifdef USE_JOG
-	physical_jog_shuttle->registerCBs (this, PhysicalJogShuttle::NoButtonCB,
-                                           jogDial, jogRing);
+         if (!reInit)
+             physical_jog_shuttle->registerCBs (this, PhysicalJogShuttle::NoButtonCB,
+                                               jogDial, jogRing);
 #endif
 }
 

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_bindings.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_bindings.cpp	2008-02-21 18:18:54 UTC (rev 3794)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_bindings.cpp	2008-02-22 18:17:30 UTC (rev 3795)
@@ -44,6 +44,7 @@
 #include "../ADM_toolkit_gtk/gtkmarkscale.h"
 #include "../ADM_toolkit_gtk/jogshuttle.h"
 #include "../ADM_toolkit_gtk/ADM_jogshuttle.h"
+#include "gtkgui.h"
 
 uint8_t UI_getPhysicalScreenSize(uint32_t *w,uint32_t *h);
 
@@ -79,7 +80,7 @@
 static char     *customNames[ADM_MAC_CUSTOM_SCRIPT];
 static uint32_t ADM_nbCustom=0;
 // Needed for DND
-extern void A_openAvi (char *name);
+// extern int A_openAvi (char *name);
 extern void A_appendAvi (char *name);
 
 
@@ -202,6 +203,104 @@
   
 };
 
+#ifdef ENABLE_WINDOW_SIZING_HACK
+
+// This is a hack to empirically determine the largest window for which there
+// is room on the screen, allowing for panels and such.  There doesn't seem to
+// be any way to query GTK for this information, so we create a window,
+// maximize it and make it visible, wait for the real configure event that
+// comes after it is actually maximized, and record the size that it had in
+// that event.  That size is what we take to be the largest window that will
+// fit.  We use that information later to calculate how much (and whether or
+// not) to scale down the preview video in flyDialogs, via
+// UI_calcZoomToFitScreen() in GUI_gtkRender.cpp.
+
+int maxWindowWidth = -1;
+int maxWindowHeight = -1;
+
+gboolean tmpwin_configured (GtkWidget * widget, GdkEventConfigure * event,
+                            gpointer user_data)
+{
+    printf ("tmpwin_configured: now %dx%d @ +%d+%d\n",
+            event->width, event->height, event->x, event->y);
+
+    // it always seems to get two events, one at a 200x200 dimension and then
+    // the one at the maximized dimensions.  An alternate approach here would
+    // be to ignore the first configure event and use the 2nd.  Yet another
+    // way would be to do the maximize call here on the first event...
+
+    if (event->width > 200)
+    {
+        maxWindowWidth = event->width;
+        maxWindowHeight = event->height;
+        gtk_widget_destroy (widget);
+    }
+
+    return TRUE;
+}
+
+void do_tmpwin_hack (void)
+{
+    GtkWidget * tmpwin = gtk_window_new (GTK_WINDOW_TOPLEVEL);
+    g_signal_connect (GTK_OBJECT (tmpwin), "configure-event",
+                      GTK_SIGNAL_FUNC (tmpwin_configured),
+                      gpointer (tmpwin));
+    gtk_window_maximize (GTK_WINDOW(tmpwin));
+    gtk_widget_show (tmpwin);
+}
+
+#endif
+
+// This is part of a hack to allow the user to attach the Play and Stop
+// actions to buttons.  The problem is that once we launch the Play action,
+// HandleAction() doesn't return to its caller until avidemux stops playing,
+// so if HandleAction() is called directly from the event handler, there is no
+// way for the Stop button to be seen until something else has already stopped
+// it.  However, if we have the event handler just set up a timer, which
+// launches the play action, it's only the timer that is locked up, and since
+// we only use the timer for the Play action (and not any of the other
+// buttons), then everything (including the Stop button) works just fine.
+// A GTK expert might know of a better way to solve this problem, but I'm not
+// convinced that one exists in current GTK (2.10 on my FC7 system, but we
+// need to support older ones, too).
+
+static gboolean on_PlayButtonHackTimer (gpointer data)
+{
+    gdk_threads_enter();
+    HandleAction (ACT_PlayAvi);
+    gdk_threads_leave();
+    return FALSE;
+}
+
+void jogButton (void *, unsigned short /* raw_button */, Action gui_action)
+{
+    // hack alert: see comment for on_PlayButtonHackTimer(), above
+    if (gui_action == ACT_PlayAvi)
+        g_timeout_add (10, on_PlayButtonHackTimer, NULL);
+    else if (gui_action != ACT_INVALID)
+        HandleAction (gui_action);
+}
+
+void jogDial (void *, signed short offset) // offset usually -1 or +1
+{
+    if (offset < 0)
+        GUI_PrevFrame (uint32_t (-offset));
+    else
+        GUI_NextFrame (uint32_t (offset));
+}
+
+GtkWidget * lookup_jog_shuttle_widget (void)
+{
+    return lookup_widget(guiRootWindow,"jogg");
+}
+
+void jogRing (void *, gfloat angle) // angle is -1.0 to 0 to +1.0
+{
+    GtkWidget * jsw = lookup_jog_shuttle_widget();
+    if (jsw)
+        jog_shuttle_set_value (jsw, angle);
+}
+
 ///
 ///	Create main window and bind to it
 ///
@@ -214,6 +313,10 @@
 		
 		if(!guiRootWindow) return 0;
 
+#ifdef ENABLE_WINDOW_SIZING_HACK
+                do_tmpwin_hack();
+#endif
+
 		gtk_register_dialog(guiRootWindow);
 					
 		// and seek global sub entity
@@ -232,6 +335,7 @@
                 GUI_gtk_grow_off(1);
 #ifdef USE_JOG
                 physical_jog_shuttle = &(PhysicalJogShuttle::getInstance());
+                physical_jog_shuttle->registerCBs (NULL, jogButton, jogDial, jogRing);
 #endif 
 	return ret;
 }
@@ -243,6 +347,7 @@
 	for(int i=0;i<ADM_nbCustom;i++)
 		delete(customNames[i]);
 #ifdef USE_JOG
+        physical_jog_shuttle->deregisterCBs (NULL);
         delete physical_jog_shuttle;
 #endif
 }
@@ -588,11 +693,6 @@
         
 }
 
-GtkWidget * lookup_jog_shuttle_widget (void)
-{
-    return lookup_widget(guiRootWindow,"jogg");
-}
-
 void UI_setTitle(const char *name)
 {
         char title[1024];
@@ -1091,7 +1191,7 @@
                }
                else
                {
-                    fileReadWrite(A_openAvi, 0, (char*)filename);
+                    fileReadWrite(reinterpret_cast <void (*)(char *)> (A_openAvi), 0, (char*)filename);
                }
       ADM_dealloc(names[i]); 
     }

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_gtkRender.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_gtkRender.cpp	2008-02-21 18:18:54 UTC (rev 3794)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_gtkRender.cpp	2008-02-22 18:17:30 UTC (rev 3795)
@@ -46,6 +46,10 @@
 extern GtkWidget *getDrawWidget(void);
 extern uint8_t UI_getPhysicalScreenSize(uint32_t *w, uint32_t *h);
 
+#ifdef ENABLE_WINDOW_SIZING_HACK
+extern int maxWindowWidth, maxWindowHeight; // from GUI_bindings.cpp
+#endif
+
 ColYuvRgb rgbConverter(640,480);
 uint32_t lastW,lastH;
 /**
@@ -124,9 +128,65 @@
 #endif
 }
 
+#ifdef ENABLE_WINDOW_SIZING_HACK
+
+// This version depends on GUI_bindings.cpp providing maxWindowWidth and maxWindowHeight.
+
 // Calculate the zoom ratio required to fit the whole image on the screen.
 float UI_calcZoomToFitScreen(GtkWindow* window, GtkWidget* drawingArea, uint32_t imageWidth, uint32_t imageHeight)
 {
+    int windowWidth, windowHeight;
+    int drawingWidth, drawingHeight;
+    int reqWidth, reqHeight;
+    uint32_t screenWidth, screenHeight;
+	
+    gtk_window_get_size(window, &windowWidth, &windowHeight);
+    GtkRequisition size_req;
+    gtk_widget_size_request (drawingArea, &size_req);
+    drawingWidth = size_req.width;
+    drawingHeight = size_req.height;
+    gtk_widget_get_size_request(drawingArea, &reqWidth, &reqHeight);
+
+    // Take borders and captions into consideration (GTK doesn't seem to
+    // support this so we'll have to guess)
+    windowWidth += 10;
+    windowHeight += 10;
+
+    // Take drawing area out of the equation, how much extra do we need for additional controls?
+    // and then how much does that leave us for the image?
+    uint32_t availableWidth = maxWindowWidth - (windowWidth - drawingWidth);
+    uint32_t availableHeight = maxWindowHeight - (windowHeight - drawingHeight);
+
+    float ratio;
+    // Calculate zoom ratio
+    if (imageWidth > availableWidth || imageHeight > availableHeight)
+    {
+        float wratio = (imageWidth <= availableWidth) ? 1
+                       : (float (availableWidth) / float (imageWidth));
+        float hratio = (imageHeight <= availableHeight) ? 1
+                       : (float (availableHeight) / float (imageHeight));
+        if (wratio < hratio)
+            ratio = wratio;
+        else
+            ratio = hratio;
+    }
+    else
+        ratio = 1;
+
+    printf ("UI_calcZoomToFitScreen(): max %dx%d, win %dx%d, drawarea %dx%d (%dx%d), "
+            "available %dx%d, image %dx%d, scale %.6f\n",
+            maxWindowWidth, maxWindowHeight, windowWidth, windowHeight,
+            drawingWidth, drawingHeight, reqWidth, reqHeight,
+            availableWidth, availableHeight, imageWidth, imageHeight, ratio);
+
+    return ratio;
+}
+
+#else
+
+// Calculate the zoom ratio required to fit the whole image on the screen.
+float UI_calcZoomToFitScreen(GtkWindow* window, GtkWidget* drawingArea, uint32_t imageWidth, uint32_t imageHeight)
+{
 	int windowWidth, windowHeight;
 	int drawingWidth, drawingHeight;
 	uint32_t screenWidth, screenHeight;
@@ -160,6 +220,8 @@
 		return 1;
 }
 
+#endif
+
 // GTK doesn't centre the window correctly.  Use this function to centre windows with a canvas that is yet to resized.
 void UI_centreCanvasWindow(GtkWindow *window, GtkWidget *canvas, int newCanvasWidth, int newCanvasHeight)
 {



From mean at mail.berlios.de  Fri Feb 22 20:10:02 2008
From: mean at mail.berlios.de (mean at BerliOS)
Date: Fri, 22 Feb 2008 20:10:02 +0100
Subject: [Avidemux-svn-commit] r3796 -
	branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_inpics
Message-ID: <200802221910.m1MJA20u028166@sheep.berlios.de>

Author: mean
Date: 2008-02-22 20:10:01 +0100 (Fri, 22 Feb 2008)
New Revision: 3796

Removed:
   branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_inpics/bitmap.h
Log:
[Cleanup] cleanup the BITMAPINFOHEADER mess


Deleted: branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_inpics/bitmap.h
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_inpics/bitmap.h	2008-02-22 18:17:30 UTC (rev 3795)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_inpics/bitmap.h	2008-02-22 19:10:01 UTC (rev 3796)
@@ -1,52 +0,0 @@
-/***************************************************************************
-                          bitmap.h  -  description
-                             -------------------
-    begin                : Sat Dec 22 2001
-    copyright            : (C) 2001 by mean
-    email                : fixounet at free.fr
- ***************************************************************************/
-
-/***************************************************************************
- *                                                                         *
- *   This program is free software; you can redistribute it and/or modify  *
- *   it under the terms of the GNU General Public License as published by  *
- *   the Free Software Foundation; either version 2 of the License, or     *
- *   (at your option) any later version.                                   *
- *                                                                         *
- ***************************************************************************/
-
-
-
-typedef struct BITMAPHEADER
-{
-    uint32_t size;
-    int32_t  width;
-    int32_t  height;
-    uint16_t numBitPlanes;
-    uint16_t numBitsPerPlane;
-    uint32_t compressionScheme;
-    uint32_t sizeOfImageData;
-    uint32_t xResolution;
-    uint32_t yResolution;
-    uint32_t numColorsUsed;
-    uint32_t numImportantColors;
-/*
-    uint16_t resolutionUnits;
-    uint16_t padding;
-    uint16_t origin;
-    uint16_t halftoning;
-    uint32_t halftoningParam1;
-    uint32_t halftoningParam2;
-    uint32_t colorEncoding;
-    uint32_t identifier;
-*/
-} BITMAPHEADER;
-
-typedef struct BITMAPFILEHEADER
-{
-   uint16_t    type;
-	 uint32_t    size;
-   int16_t     xHotspot;
-   int16_t     yHotspot;
-   uint32_t    offsetToBits;
-}  BITMAPFILEHEADER;



From mean at mail.berlios.de  Fri Feb 22 20:10:05 2008
From: mean at mail.berlios.de (mean at BerliOS)
Date: Fri, 22 Feb 2008 20:10:05 +0100
Subject: [Avidemux-svn-commit] r3797 - in
	branches/avidemux_2.5_branch_mean/avidemux: ADM_editor
	ADM_inputs/ADM_asf ADM_inputs/ADM_inpics
	ADM_inputs/ADM_matroska ADM_libraries/ADM_utilities
	ADM_outputs/oplug_avi ADM_toolkit
Message-ID: <200802221910.m1MJA5be028232@sheep.berlios.de>

Author: mean
Date: 2008-02-22 20:10:04 +0100 (Fri, 22 Feb 2008)
New Revision: 3797

Modified:
   branches/avidemux_2.5_branch_mean/avidemux/ADM_editor/ADM_Video.h
   branches/avidemux_2.5_branch_mean/avidemux/ADM_editor/ADM_edStub.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_editor/ADM_edit.hxx
   branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_asf/ADM_asf.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_inpics/ADM_pics.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_matroska/ADM_mkvEntries.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_utilities/ADM_imageLoader.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_utilities/ADM_imageUtils.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_utilities/avidemutils.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_utilities/avifmt2.h
   branches/avidemux_2.5_branch_mean/avidemux/ADM_outputs/oplug_avi/op_avisave.h
   branches/avidemux_2.5_branch_mean/avidemux/ADM_outputs/oplug_avi/op_aviwrite.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_outputs/oplug_avi/op_aviwrite.hxx
   branches/avidemux_2.5_branch_mean/avidemux/ADM_toolkit/bitmap.h
Log:
[Cleanup] cleanup the BITMAPINFOHEADER mess


Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_editor/ADM_Video.h
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_editor/ADM_Video.h	2008-02-22 19:10:01 UTC (rev 3796)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_editor/ADM_Video.h	2008-02-22 19:10:04 UTC (rev 3797)
@@ -56,7 +56,7 @@
           MainAVIHeader 	_mainaviheader;
           uint8_t		_isvideopresent;
           AVIStreamHeader 	_videostream;
-          BITMAPINFOHEADER  	_video_bih;
+          ADM_BITMAPINFOHEADER  _video_bih;
           uint8_t		_isaudiopresent;
           AVIStreamHeader 	_audiostream;
           void			*_audiostreaminfo;
@@ -121,7 +121,7 @@
 // New write avi engine
           AVIStreamHeader           *getVideoStreamHeader(void ) { return &_videostream;}
           MainAVIHeader             *getMainHeader(void ) { return &_mainaviheader;}
-          BITMAPINFOHEADER          *getBIH(void ) { return &_video_bih;}
+          ADM_BITMAPINFOHEADER      *getBIH(void ) { return &_video_bih;}
 
 };
 #endif

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_editor/ADM_edStub.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_editor/ADM_edStub.cpp	2008-02-22 19:10:01 UTC (rev 3796)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_editor/ADM_edStub.cpp	2008-02-22 19:10:04 UTC (rev 3797)
@@ -369,8 +369,7 @@
   return STUBB->getMainHeader ();
 }
 
-BITMAPINFOHEADER *
-ADM_Composer::getBIH (void)
+ADM_BITMAPINFOHEADER *ADM_Composer::getBIH (void)
 {
   return STUBB->getBIH ();
 };

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_editor/ADM_edit.hxx
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_editor/ADM_edit.hxx	2008-02-22 19:10:01 UTC (rev 3796)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_editor/ADM_edit.hxx	2008-02-22 19:10:04 UTC (rev 3797)
@@ -221,7 +221,7 @@
 			     		uint8_t 			setDecodeParam( uint32_t frame );
 	 				AVIStreamHeader 	*getVideoStreamHeader(void ) ;
 	 				MainAVIHeader 		*getMainHeader(void );
-	 				BITMAPINFOHEADER 	*getBIH(void ) ;
+	 				ADM_BITMAPINFOHEADER 	*getBIH(void ) ;
 	  				uint8_t			getVideoInfo(aviInfo *info);
 					WAVHeader 		*getAudioInfo(void )  ;
 					uint32_t 			getAudioLength(void);

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_asf/ADM_asf.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_asf/ADM_asf.cpp	2008-02-22 19:10:01 UTC (rev 3796)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_asf/ADM_asf.cpp	2008-02-22 19:10:04 UTC (rev 3797)
@@ -488,8 +488,8 @@
             trk->streamIndex=sid;
             s->read((uint8_t *)&(trk->wavHeader),sizeof(WAVHeader));
 
-		#ifdef ADM_BIG_ENDIAN
-			Endian_WavHeader(&(trk->wavHeader));
+		#ifdef ADM_BIG_ENDIAN
+			Endian_WavHeader(&(trk->wavHeader));
 		#endif
 
             trk->extraDataLen=s->read16();
@@ -560,11 +560,11 @@
             _video_bih.biHeight=h;
             printf("Pic Width  %04d\n",w);
             printf("Pic Height %04d\n",h);
-            printf(" BMP size  %04d (%04d)\n",x,sizeof(BITMAPINFOHEADER));
-            s->read((uint8_t *)&_video_bih,sizeof(BITMAPINFOHEADER));
+            printf(" BMP size  %04d (%04d)\n",x,sizeof(ADM_BITMAPINFOHEADER));
+            s->read((uint8_t *)&_video_bih,sizeof(ADM_BITMAPINFOHEADER));
 
-		#ifdef ADM_BIG_ENDIAN
-			Endian_BitMapInfo(&_video_bih);
+		#ifdef ADM_BIG_ENDIAN
+			Endian_BitMapInfo(&_video_bih);
 		#endif
 
             _videostream.dwScale=1000;
@@ -581,9 +581,9 @@
               return 0; 
             }
             printBih(&_video_bih);
-            if(x>sizeof(BITMAPINFOHEADER))
+            if(x>sizeof(ADM_BITMAPINFOHEADER))
             {
-              _extraDataLen=x-sizeof(BITMAPINFOHEADER);
+              _extraDataLen=x-sizeof(ADM_BITMAPINFOHEADER);
               _extraData=new uint8_t[_extraDataLen];
               s->read(_extraData,_extraDataLen);
             }

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_inpics/ADM_pics.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_inpics/ADM_pics.cpp	2008-02-22 19:10:01 UTC (rev 3796)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_inpics/ADM_pics.cpp	2008-02-22 19:10:04 UTC (rev 3797)
@@ -35,7 +35,7 @@
 
 #include "fourcc.h"
 #include "ADM_inpics/ADM_pics.h"
-#include "ADM_inpics/bitmap.h"
+#include "ADM_toolkit/bitmap.h"
 #include "ADM_toolkit/toolkit.hxx"
 #include <ADM_assert.h>
 #include "ADM_toolkit/filesel.h"
@@ -232,7 +232,7 @@
     switch (_type) {
     case PIC_BMP:
 	{
-	    BITMAPHEADER bmph;
+	    ADM_BITMAPINFOHEADER bmph;
 
 	    fread(&s16, 2, 1, _fd[0]);
 	    if (s16 != 0x4D42) {
@@ -243,14 +243,14 @@
 	    fread(&s32, 4, 1, _fd[0]);
 	    fread(&s32, 4, 1, _fd[0]);
 	    fread(&bmph, sizeof(bmph), 1, _fd[0]);
-	    if (bmph.compressionScheme != 0) {
+	    if (bmph.biCompression != 0) {
 		printf("\ncannot handle compressed bmp\n");
 		return 0;
 	    }
-	    _offset = bmph.size + 14;
-	    w = bmph.width;
-	    h = bmph.height;
-		bpp = bmph.numBitsPerPlane;
+	    _offset = bmph.biSize + 14;
+	    w = bmph.biWidth;
+	    h = bmph.biHeight;
+		bpp = bmph.biBitCount;
 	}
 	break;
 
@@ -300,7 +300,7 @@
 
     case PIC_BMP2:
 	{
-	    BITMAPINFOHEADER bmph;
+	    ADM_BITMAPINFOHEADER bmph;
 
 	    fseek(_fd[0], 10, SEEK_SET);
 

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_matroska/ADM_mkvEntries.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_matroska/ADM_mkvEntries.cpp	2008-02-22 19:10:01 UTC (rev 3796)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_matroska/ADM_mkvEntries.cpp	2008-02-22 19:10:04 UTC (rev 3797)
@@ -130,9 +130,9 @@
         _videostream.fccHandler=_video_bih.biCompression=entry.fcc;
         
         // if it is vfw...
-        if(fourCC::check(entry.fcc,(uint8_t *)"VFWX") && entry.extraData && entry.extraDataLen>=sizeof(BITMAPINFOHEADER))
+        if(fourCC::check(entry.fcc,(uint8_t *)"VFWX") && entry.extraData && entry.extraDataLen>=sizeof(ADM_BITMAPINFOHEADER))
         {
-          memcpy(& _video_bih,entry.extraData,sizeof(BITMAPINFOHEADER));
+          memcpy(& _video_bih,entry.extraData,sizeof(ADM_BITMAPINFOHEADER));
           delete [] _tracks[0].extraData;
           entry.extraData=NULL;
           entry.extraDataLen=0;

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_utilities/ADM_imageLoader.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_utilities/ADM_imageLoader.cpp	2008-02-22 19:10:01 UTC (rev 3796)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_utilities/ADM_imageLoader.cpp	2008-02-22 19:10:04 UTC (rev 3797)
@@ -218,7 +218,7 @@
 
 		//Retrieve width & height
 		//_______________________
-		   		BITMAPHEADER bmph;
+		   		ADM_BITMAPINFOHEADER bmph;
 
 			    fread(&s16, 2, 1, fd);
 			    if (s16 != 0x4D42) 
@@ -231,15 +231,15 @@
 			    fread(&s32, 4, 1, fd);
 			    fread(&s32, 4, 1, fd);
 			    fread(&bmph, sizeof(bmph), 1, fd);
-			    if (bmph.compressionScheme != 0) 
+			    if (bmph.biCompression != 0) 
 			    {
 			    	printf("[imageLoader]cannot handle compressed bmp\n");
 			    	fclose(fd);
 			    	return NULL;
 			    }
 			    
-			    w = bmph.width;
-			    h = bmph.height;
+			    w = bmph.biWidth;
+			    h = bmph.biHeight;
 			    
 			    
 			    printf("[ImageLoader] BMP %u * %u\n",w,h);
@@ -264,7 +264,7 @@
 ADMImage *createImageFromFile_Bmp2(const char *filename)
 {
     
-	BITMAPINFOHEADER bmph;
+	ADM_BITMAPINFOHEADER bmph;
     uint8_t fcc_tab[4];
     uint32_t offset;
     FILE *fd=NULL;
@@ -313,7 +313,7 @@
 ADMImage *createImageFromFile_png(const char *filename)
 {
     
-	BITMAPHEADER bmph;
+	ADM_BITMAPINFOHEADER bmph;
     uint8_t fcc_tab[4];
     uint32_t offset,size;
     FILE *fd=NULL;
@@ -430,7 +430,7 @@
 		    // BMP2?
 		    if (fcc_tab[0] == 'B' && fcc_tab[1] == 'M') 
 		    {
-		    	    BITMAPINFOHEADER bmph;
+		    	    ADM_BITMAPINFOHEADER bmph;
 
 		     	    fseek(fd, 10, SEEK_SET);
 		     	    fread(fcc_tab, 4, 1, fd);

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_utilities/ADM_imageUtils.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_utilities/ADM_imageUtils.cpp	2008-02-22 19:10:01 UTC (rev 3796)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_utilities/ADM_imageUtils.cpp	2008-02-22 19:10:04 UTC (rev 3797)
@@ -347,8 +347,8 @@
 #endif
         return tinySubstract(YPLANE(this),YPLANE(src1),YPLANE(src2),src1->_width*src1->_height);
 }
- BITMAPFILEHEADER bmfh;
-  BITMAPINFOHEADER bmph;
+ ADM_BITMAPFILEHEADER bmfh;
+ ADM_BITMAPINFOHEADER bmph;
   FILE *fd;
   uint32_t sz;
   uint16_t s16;
@@ -361,8 +361,8 @@
 */
 uint8_t  ADMImage::saveAsBmp(const char *filename)
 {
-  BITMAPFILEHEADER bmfh;
-  BITMAPINFOHEADER bmph;
+  ADM_BITMAPFILEHEADER bmfh;
+  ADM_BITMAPINFOHEADER bmph;
   FILE *fd;
   uint32_t sz;
   uint16_t s16;

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_utilities/avidemutils.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_utilities/avidemutils.cpp	2008-02-22 19:10:01 UTC (rev 3796)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_utilities/avidemutils.cpp	2008-02-22 19:10:04 UTC (rev 3797)
@@ -141,7 +141,7 @@
 
 }
 
-void Endian_BitMapInfo( BITMAPINFOHEADER *b)
+void Endian_BitMapInfo( ADM_BITMAPINFOHEADER *b)
 {
 #ifdef ADM_BIG_ENDIAN
 	#define SWAP32(x) b->x=R32(b->x)
@@ -286,7 +286,7 @@
       return (uint32_t) floor(f);
 
 }
-void printBih(BITMAPINFOHEADER *bi)
+void printBih(ADM_BITMAPINFOHEADER *bi)
 {
 #undef X_DUMP
 #define X_DUMP(x) printf(#x":\t\t:%ld\n",(long int)bi->x);

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_utilities/avifmt2.h
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_utilities/avifmt2.h	2008-02-22 19:10:01 UTC (rev 3796)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_utilities/avifmt2.h	2008-02-22 19:10:04 UTC (rev 3797)
@@ -21,62 +21,36 @@
 #ifndef __AVIFMT2__
 #define __AVIFMT2__
 
-#if !defined( WIN32_CLASH) || !defined(ADM_WIN32)
-typedef struct
-{
-    uint32_t 		biSize;
-    uint32_t  	biWidth;
-    uint32_t  	biHeight;
-    uint16_t 		biPlanes;
-    uint16_t 		biBitCount;
-    uint32_t 		biCompression;
-    uint32_t 		biSizeImage;
-    uint32_t  	biXPelsPerMeter;
-    uint32_t  	biYPelsPerMeter;
-    uint32_t 		biClrUsed;
-    uint32_t 		biClrImportant;
-} BITMAPINFOHEADER, *PBITMAPINFOHEADER, *LPBITMAPINFOHEADER;
-typedef struct {
-	BITMAPINFOHEADER bmiHeader;
-	int	bmiColors[1];
-} BITMAPINFO, *LPBITMAPINFO;
-#endif //win32clash
+#include "ADM_toolkit/bitmap.h"
 
-void printBih(BITMAPINFOHEADER *bi);
-/* Borrowed from vdub
-	Thanks to avery lee */
-#define AVI_INDEX_OF_CHUNKS 0X01
+void printBih(ADM_BITMAPINFOHEADER *bi);
 
 
 
-typedef struct _avistdindex_chunk {
-/*	uint32_t 		fcc;					// ?ix##?
-	DWORD 			cb;
-*/
-	uint16_t 	wLongsPerEntry;		// must be sizeof(aIndex[0])/sizeof(DWORD)
-	uint8_t 	bIndexSubType;			// must be 0
-	uint8_t 	bIndexType;			// must be AVI_INDEX_OF_CHUNKS
-	uint32_t 	nEntriesInUse;		//
-	uint32_t 	dwChunkId;			// ?##dc? or ?##db? or ?##wb? etc..
-/*	QUADWORD 	qwBaseOffset;		// all dwOffsets in aIndex array are
-														// relative to this
-*/
-	uint32_t  qw1,qw2;			// MN.
-	uint32_t 	dwReserved3;				// must be 0
+typedef struct _avistdindex_chunk 
+{
+        uint16_t 	wLongsPerEntry;		// must be sizeof(aIndex[0])/sizeof(DWORD)
+        uint8_t 	bIndexSubType;			// must be 0
+        uint8_t 	bIndexType;			// must be AVI_INDEX_OF_CHUNKS
+        uint32_t 	nEntriesInUse;		//
+        uint32_t 	dwChunkId;			// ?##dc? or ?##db? or ?##wb? etc..
+        uint32_t        qw1,qw2;			// MN.
+        uint32_t 	dwReserved3;				// must be 0
 	
 } AVISTDINDEX, * PAVISTDINDEX;
 
 
 
-#define AVI_KEY_FRAME 0x10
- #define AVI_B_FRAME		 0x4000	 // hopefully it is not used..
-#endif
+#define AVI_KEY_FRAME   0x10
+#define AVI_B_FRAME	0x4000	 // hopefully it is not used..
 
 #include "../ADM_audio/ADM_audiodef.h"
 
 void Endian_AviMainHeader(MainAVIHeader *m);
-void Endian_BitMapInfo( BITMAPINFOHEADER *b);
+void Endian_BitMapInfo( ADM_BITMAPINFOHEADER *b);
 void Endian_AviStreamHeader(AVIStreamHeader *s);
 void Endian_WavHeader(WAVHeader *w);
-//void Endian_BitMapHeader( BITMAPHEADER *b);
 
+#endif
+//EOF
+

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_outputs/oplug_avi/op_avisave.h
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_outputs/oplug_avi/op_avisave.h	2008-02-22 19:10:01 UTC (rev 3796)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_outputs/oplug_avi/op_avisave.h	2008-02-22 19:10:04 UTC (rev 3797)
@@ -72,7 +72,7 @@
 
 						//
 						AVIStreamHeader 	_videostreamheader;
-						BITMAPINFOHEADER  _bih;
+						ADM_BITMAPINFOHEADER  _bih;
 						MainAVIHeader			_mainaviheader;
      public:
      						GenericAviSave( void );

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_outputs/oplug_avi/op_aviwrite.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_outputs/oplug_avi/op_aviwrite.cpp	2008-02-22 19:10:01 UTC (rev 3796)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_outputs/oplug_avi/op_aviwrite.cpp	2008-02-22 19:10:04 UTC (rev 3797)
@@ -219,7 +219,7 @@
 		 0x1000);
 #else
   	setStreamInfo (_file, (uint8_t *) &_videostream,
-		  (uint8_t *)&_bih,sizeof(BITMAPINFOHEADER),
+		  (uint8_t *)&_bih,sizeof(ADM_BITMAPINFOHEADER),
 		// MOD Feb 2005 by GMV: ODML support
 		odml_video_super_idx_size,0,
 		// END MOD Feb 2005 by GMV
@@ -467,7 +467,7 @@
 		     MainAVIHeader 	*inmainheader, 
 		     uint32_t 		nb_frame,
 		     AVIStreamHeader * invideostream,
-		     BITMAPINFOHEADER	*bih,
+		     ADM_BITMAPINFOHEADER	*bih,
 		     uint8_t 		*videoextra,
 		     uint32_t  		videoextraLen,
 		     AVDMGenericAudioStream * inaudiostream,

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_outputs/oplug_avi/op_aviwrite.hxx
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_outputs/oplug_avi/op_aviwrite.hxx	2008-02-22 19:10:01 UTC (rev 3796)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_outputs/oplug_avi/op_aviwrite.hxx	2008-02-22 19:10:04 UTC (rev 3797)
@@ -29,7 +29,7 @@
                 
 		MainAVIHeader	_mainheader;
 		AVIStreamHeader _videostream;
-		BITMAPINFOHEADER _bih;
+		ADM_BITMAPINFOHEADER _bih;
 		AVIStreamHeader _audio1,_audio2;
 		uint32_t nb_audio;
 		uint32_t asize;
@@ -113,7 +113,7 @@
 							MainAVIHeader *mainheader,
 							uint32_t nb_frame,
 			AVIStreamHeader 	*invideostream,
-			BITMAPINFOHEADER	*bitmap,	
+			ADM_BITMAPINFOHEADER	*bitmap,	
 			uint8_t 		*videoextra,
 			uint32_t		videoextraLen,
 			AVDMGenericAudioStream 	*audiostream,

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_toolkit/bitmap.h
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_toolkit/bitmap.h	2008-02-22 19:10:01 UTC (rev 3796)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_toolkit/bitmap.h	2008-02-22 19:10:04 UTC (rev 3797)
@@ -15,38 +15,38 @@
  *                                                                         *
  ***************************************************************************/
 
+#ifndef ADM_BITMAP_H
+#define ADM_BITMAP_H
 
+typedef struct
+{
+    uint32_t 	biSize;
+    uint32_t  	biWidth;
+    uint32_t  	biHeight;
+    uint16_t 	biPlanes;
+    uint16_t 	biBitCount;
+    uint32_t 	biCompression;
+    uint32_t 	biSizeImage;
+    uint32_t  	biXPelsPerMeter;
+    uint32_t  	biYPelsPerMeter;
+    uint32_t 	biClrUsed;
+    uint32_t 	biClrImportant;
+} ADM_BITMAPINFOHEADER;
 
-typedef struct BITMAPHEADER
+typedef struct 
 {
-    uint32_t size;
-    int32_t  width;
-    int32_t  height;
-    uint16_t numBitPlanes;
-    uint16_t numBitsPerPlane;
-    uint32_t compressionScheme;
-    uint32_t sizeOfImageData;
-    uint32_t xResolution;
-    uint32_t yResolution;
-    uint32_t numColorsUsed;
-    uint32_t numImportantColors;
-/*
-    uint16_t resolutionUnits;
-    uint16_t padding;
-    uint16_t origin;
-    uint16_t halftoning;
-    uint32_t halftoningParam1;
-    uint32_t halftoningParam2;
-    uint32_t colorEncoding;
-    uint32_t identifier;
-*/
-} BITMAPHEADER;
+        ADM_BITMAPINFOHEADER bmiHeader;
+        int	bmiColors[1];
+} ADM_BITMAPINFO;
 
-typedef struct BITMAPFILEHEADER
+
+typedef struct 
 {
    uint16_t    type;
-	 uint32_t    size;
+   uint32_t    size;
    int16_t     xHotspot;
    int16_t     yHotspot;
    uint32_t    offsetToBits;
-}  BITMAPFILEHEADER;
+}  ADM_BITMAPFILEHEADER;
+
+#endif
\ No newline at end of file



From mean at mail.berlios.de  Fri Feb 22 20:47:26 2008
From: mean at mail.berlios.de (mean at BerliOS)
Date: Fri, 22 Feb 2008 20:47:26 +0100
Subject: [Avidemux-svn-commit] r3798 - in
	branches/avidemux_2.5_branch_mean/avidemux: ADM_audio
	ADM_audiocodec ADM_editor ADM_encoder ADM_filter
	ADM_libraries/ADM_libswscale ADM_libraries/ADM_utilities
	ADM_ocr ADM_outputs/oplug_avi ADM_outputs/oplug_ogm
	ADM_toolkit ADM_userInterfaces/ADM_GTK/ADM_dialog
	ADM_userInterfaces/ADM_GTK/ADM_ocr
	ADM_userInterfaces/ADM_NONE/ADM_gui2
	ADM_userInterfaces/ADM_QT4/ADM_dialog
	ADM_userInterfaces/ADM_QT4/ADM_gui
	ADM_userInterfaces/ADM_commonUI ADM_video ADM_videoFilter
Message-ID: <200802221947.m1MJlQGt031395@sheep.berlios.de>

Author: mean
Date: 2008-02-22 20:47:14 +0100 (Fri, 22 Feb 2008)
New Revision: 3798

Removed:
   branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_utilities/aviframe.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_utilities/aviio.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_utilities/avio.hxx
   branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_utilities/broken.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_utilities/indexer.hxx
   branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_utilities/subchunk.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_utilities/subchunk.h
Modified:
   branches/avidemux_2.5_branch_mean/avidemux/ADM_audio/audio_mpegidentify.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_audio/audiogen.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_audio/audiosource_ext.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_audio/audiotimeline.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_audio/aviaudio.hxx
   branches/avidemux_2.5_branch_mean/avidemux/ADM_audiocodec/ADM_codeculaw.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_audiocodec/ADM_codecwav.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_audiocodec/ADM_lpcm.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_editor/ADM_edAudio.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_editor/ADM_edFrameType.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_editor/ADM_edIdentify.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_editor/ADM_edLoadSave.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_editor/ADM_edRender.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_editor/ADM_edSearch.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_editor/ADM_edStub.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_editor/ADM_edit.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_editor/ADMedAVIAUD.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_encoder/adm_encmpeg2enc.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_filter/ADM_vidDummyFilter.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_filter/filter.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_filter/filter_declaration.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_filter/filter_dylib.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_filter/filter_saveload.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_filter/vidVCD.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_filter/video_filters.h
   branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_libswscale/ADM_mp.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_utilities/ADM_print.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_utilities/CMakeLists.txt
   branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_utilities/avidemutils.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_ocr/adm_leftturn.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_outputs/oplug_avi/avilist.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_outputs/oplug_avi/op_avisave.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_outputs/oplug_avi/op_avisavecopy.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_outputs/oplug_avi/op_avisavecopy_pack.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_outputs/oplug_avi/op_avisavecopy_unpack.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_outputs/oplug_avi/op_avisavedual.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_outputs/oplug_avi/op_aviwrite.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_outputs/oplug_avi/op_saveprocess.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_outputs/oplug_ogm/op_ogaudio.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_outputs/oplug_ogm/op_ogsave.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_outputs/oplug_ogm/op_ogsavecopy.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_outputs/oplug_ogm/op_ogsaveprocess.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_toolkit/bitmap.h
   branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_SwissArmyKnife.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_contrast.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_eraser.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_particle.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_srt.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_threshold.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_ocr/adm_ocr.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_NONE/ADM_gui2/preview_none.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_x264.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_xvid4.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/T_preview.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_postproc.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_video/ADM_cache.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_video/ADM_confCouples.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_video/ADM_genvideo.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_video/ADM_interlaced.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_video/ADM_vidCNR2.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_video/ADM_vidClean.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_video/ADM_vidColorYuv.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_video/ADM_vidEqualizer.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_video/ADM_vidFieldUnblend.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_video/ADM_vidFieldUtil.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_video/ADM_vidMPdelogo.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_video/ADM_vidNull.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_video/ADM_vidPartial.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_video/ADM_vidRaw.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_guiResize.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_resizebis.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_resizeter.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidASS.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidAddBorder.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidAnimated.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidAsharp.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidBSmear.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidBlend.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidBlendRemoval.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidChroma.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidChromaShift.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidComputeAverage.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidContrast.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidCrop.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidDGbob.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidDecDec.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidDecTelecide.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidDeintASM.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidDeinterlace.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidDelta.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidDenoise.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidDropOut.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidEraser.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidFade.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidFields.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidFlipV.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidFlux.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidForcedPP.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidHardIvtcRemoval.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidHue.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidKernelDeint.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidLargeMedian.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidLuma.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidMPLD3D.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidMPLD3Dlow.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidMPLResize.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidMSharpen.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidMcDeint.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidMosaic.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidMsmooth.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidPalShift.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidPalSmart.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidParticle.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidPulldown.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidResampleFPS.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidResize.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidReverse.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidSeparateField.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidSoften.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidStabilize.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidSwapFields.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidSwapSmart.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidTdeint.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidThreshold.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidUVSwap.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidUnblend.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidVlad.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidVobSubRender.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidVobsub.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidWhirl.cpp
Log:
[All] Remove old crufts, kill string to char warning on filters


Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_audio/audio_mpegidentify.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_audio/audio_mpegidentify.cpp	2008-02-22 19:10:04 UTC (rev 3797)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_audio/audio_mpegidentify.cpp	2008-02-22 19:47:14 UTC (rev 3798)
@@ -29,7 +29,6 @@
 #include "config.h"
 #include "avifmt.h"
 #include "avifmt2.h"
-#include "avio.hxx"
 #include "fourcc.h"
 #include "aviaudio.hxx"
 

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_audio/audiogen.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_audio/audiogen.cpp	2008-02-22 19:10:04 UTC (rev 3797)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_audio/audiogen.cpp	2008-02-22 19:47:14 UTC (rev 3798)
@@ -29,7 +29,6 @@
 #include "config.h"
 #include "avifmt.h"
 #include "avifmt2.h"
-#include "avio.hxx"
 #include "fourcc.h"
 #include "aviaudio.hxx"
 #include "ADM_outputs/oplug_avi/avilist.h"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_audio/audiosource_ext.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_audio/audiosource_ext.cpp	2008-02-22 19:10:04 UTC (rev 3797)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_audio/audiosource_ext.cpp	2008-02-22 19:47:14 UTC (rev 3798)
@@ -26,9 +26,7 @@
 #include "config.h"
 #include "avifmt.h"
 #include "avifmt2.h"
-#include "avio.hxx"
 #include "fourcc.h"
-#include "subchunk.h"
 #include "aviaudio.hxx"
 #include "ADM_audio/audiosource_ext.h"
 

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_audio/audiotimeline.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_audio/audiotimeline.cpp	2008-02-22 19:10:04 UTC (rev 3797)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_audio/audiotimeline.cpp	2008-02-22 19:47:14 UTC (rev 3798)
@@ -28,7 +28,6 @@
 #include "config.h"
 #include "avifmt.h"
 #include "avifmt2.h"
-#include "avio.hxx"
 #include "fourcc.h"
 #include "aviaudio.hxx"
 #include "prefs.h"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_audio/aviaudio.hxx
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_audio/aviaudio.hxx	2008-02-22 19:10:04 UTC (rev 3797)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_audio/aviaudio.hxx	2008-02-22 19:47:14 UTC (rev 3798)
@@ -167,7 +167,6 @@
 ;
 
 
-#include "indexer.hxx"
 uint8_t mpegAudioIdentify(uint8_t *ptr, uint32_t maxLookUp, WAVHeader *header, uint8_t *tokens=NULL);
 
 #endif

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_audiocodec/ADM_codeculaw.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_audiocodec/ADM_codeculaw.cpp	2008-02-22 19:10:04 UTC (rev 3797)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_audiocodec/ADM_codeculaw.cpp	2008-02-22 19:47:14 UTC (rev 3798)
@@ -29,7 +29,6 @@
 #include "config.h"
 #include "avifmt.h"
 #include "avifmt2.h"
-#include "avio.hxx"
 #include "fourcc.h"
 //#include "ADM_audio/aviaudio.hxx"
 #include "ADM_audiocodec/ADM_audiocodec.h"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_audiocodec/ADM_codecwav.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_audiocodec/ADM_codecwav.cpp	2008-02-22 19:10:04 UTC (rev 3797)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_audiocodec/ADM_codecwav.cpp	2008-02-22 19:47:14 UTC (rev 3798)
@@ -24,7 +24,6 @@
 #include "config.h"
 #include "avifmt.h"
 #include "avifmt2.h"
-#include "avio.hxx"
 #include "fourcc.h"
 //#include "ADM_audio/aviaudio.hxx"
 #include "ADM_audiocodec/ADM_audiocodec.h"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_audiocodec/ADM_lpcm.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_audiocodec/ADM_lpcm.cpp	2008-02-22 19:10:04 UTC (rev 3797)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_audiocodec/ADM_lpcm.cpp	2008-02-22 19:47:14 UTC (rev 3798)
@@ -26,7 +26,6 @@
 #include "config.h"
 #include "avifmt.h"
 #include "avifmt2.h"
-#include "avio.hxx"
 #include "fourcc.h"
 //#include "ADM_audio/aviaudio.hxx"
 #include "ADM_audiocodec/ADM_audiocodec.h"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_editor/ADM_edAudio.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_editor/ADM_edAudio.cpp	2008-02-22 19:10:04 UTC (rev 3797)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_editor/ADM_edAudio.cpp	2008-02-22 19:47:14 UTC (rev 3798)
@@ -30,9 +30,9 @@
 #include "config.h"
 #include "avifmt.h"
 #include "avifmt2.h"
-#include "avio.hxx"
+
 #include "fourcc.h"
-#include "indexer.hxx"
+
 //#include "aviaudio.hxx"
 
 #include "ADM_editor/ADM_edit.hxx"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_editor/ADM_edFrameType.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_editor/ADM_edFrameType.cpp	2008-02-22 19:10:04 UTC (rev 3797)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_editor/ADM_edFrameType.cpp	2008-02-22 19:47:14 UTC (rev 3798)
@@ -23,7 +23,6 @@
 
 #include "config.h"
 #include "fourcc.h"
-#include "avio.hxx"
 #include "prefs.h"
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_codecs/ADM_codec.h"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_editor/ADM_edIdentify.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_editor/ADM_edIdentify.cpp	2008-02-22 19:10:04 UTC (rev 3797)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_editor/ADM_edIdentify.cpp	2008-02-22 19:47:14 UTC (rev 3798)
@@ -24,7 +24,6 @@
 
 #include "config.h"
 #include "fourcc.h"
-#include "avio.hxx"
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_inpics/ADM_pics.h"
 #include "ADM_nuv/ADM_nuv.h"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_editor/ADM_edLoadSave.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_editor/ADM_edLoadSave.cpp	2008-02-22 19:10:04 UTC (rev 3797)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_editor/ADM_edLoadSave.cpp	2008-02-22 19:47:14 UTC (rev 3798)
@@ -25,7 +25,6 @@
 
 
 #include "fourcc.h"
-#include "avio.hxx"
 #include "ADM_osSupport/ADM_quota.h"
 #include <ADM_assert.h>
 #include "ADM_editor/ADM_edit.hxx"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_editor/ADM_edRender.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_editor/ADM_edRender.cpp	2008-02-22 19:10:04 UTC (rev 3797)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_editor/ADM_edRender.cpp	2008-02-22 19:47:14 UTC (rev 3798)
@@ -26,7 +26,6 @@
 
 #include "config.h"
 #include "fourcc.h"
-#include "avio.hxx"
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_codecs/ADM_codec.h"
 #include "ADM_video/ADM_genvideo.hxx"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_editor/ADM_edSearch.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_editor/ADM_edSearch.cpp	2008-02-22 19:10:04 UTC (rev 3797)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_editor/ADM_edSearch.cpp	2008-02-22 19:47:14 UTC (rev 3798)
@@ -21,7 +21,6 @@
 
 #include "config.h"
 #include "fourcc.h"
-#include "avio.hxx"
 #include "ADM_editor/ADM_edit.hxx"
 
 

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_editor/ADM_edStub.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_editor/ADM_edStub.cpp	2008-02-22 19:10:04 UTC (rev 3797)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_editor/ADM_edStub.cpp	2008-02-22 19:47:14 UTC (rev 3798)
@@ -22,7 +22,6 @@
 
 #include "config.h"
 #include "fourcc.h"
-#include "avio.hxx"
 #include "ADM_editor/ADM_edit.hxx"
 
 #define STUBB _videos[0]._aviheader

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_editor/ADM_edit.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_editor/ADM_edit.cpp	2008-02-22 19:10:04 UTC (rev 3797)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_editor/ADM_edit.cpp	2008-02-22 19:47:14 UTC (rev 3798)
@@ -36,7 +36,6 @@
 
 #include "config.h"
 #include "fourcc.h"
-#include "avio.hxx"
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_inpics/ADM_pics.h"
 #include "ADM_nuv/ADM_nuv.h"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_editor/ADMedAVIAUD.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_editor/ADMedAVIAUD.cpp	2008-02-22 19:10:04 UTC (rev 3797)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_editor/ADMedAVIAUD.cpp	2008-02-22 19:47:14 UTC (rev 3798)
@@ -27,8 +27,6 @@
 
 #include "config.h"
 #include "fourcc.h"
-#include "avio.hxx"
-#include "indexer.hxx"
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_editor/ADM_edAudio.hxx"
 

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_encoder/adm_encmpeg2enc.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_encoder/adm_encmpeg2enc.cpp	2008-02-22 19:10:04 UTC (rev 3797)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_encoder/adm_encmpeg2enc.cpp	2008-02-22 19:47:14 UTC (rev 3798)
@@ -31,7 +31,6 @@
 #include "ADM_toolkit/toolkit.hxx"
 #include <ADM_assert.h>
 
-#include "subchunk.h"
 
 #include "ADM_encoder/ADM_vidEncode.hxx"
 
@@ -45,9 +44,9 @@
 #include "fourcc.h"
 #include "avi_vars.h"
 #include "ADM_toolkit/toolkit.hxx"
-#include "subchunk.h"
 
 
+
 #include "ADM_audiofilter/audioprocess.hxx"
 
 #include "ADM_video/ADM_genvideo.hxx"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_filter/ADM_vidDummyFilter.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_filter/ADM_vidDummyFilter.cpp	2008-02-22 19:10:04 UTC (rev 3797)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_filter/ADM_vidDummyFilter.cpp	2008-02-22 19:47:14 UTC (rev 3798)
@@ -22,7 +22,6 @@
 
 #include "config.h"
 #include "fourcc.h"
-#include "avio.hxx"
 #include "config.h"
 #include "avi_vars.h"
 

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_filter/filter.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_filter/filter.cpp	2008-02-22 19:10:04 UTC (rev 3797)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_filter/filter.cpp	2008-02-22 19:47:14 UTC (rev 3798)
@@ -23,7 +23,6 @@
 #include "ADM_assert.h"
 #include "config.h"
 #include "fourcc.h"
-#include "avio.hxx"
 
 #include "ADM_toolkit/toolkit.hxx"
 #include "ADM_editor/ADM_edit.hxx"
@@ -80,7 +79,7 @@
 }
 void filterListAll( void )
 {
-char *name;
+const char *name;
 	printf("\nVideo filters\n");
 	for(uint32_t i=0;i<allfilters.size();i++)
 	{
@@ -95,7 +94,7 @@
 }
 VF_FILTERS filterGetTagFromName(char *inname)
 {
-char *name;
+const char *name;
 	VF_FILTERS filter=VF_DUMMY;
 	for(uint32_t i=0;i<allfilters.size();i++)
 	{
@@ -116,7 +115,7 @@
 }
 void registerFilter(const char *name,VF_FILTERS tag,uint8_t viewable
 		,AVDMGenericVideoStream *(*create) (AVDMGenericVideoStream *in, CONFcouple *)
-		,char *filtername)
+		,const char *filtername)
 {
 //        printf ("*nb_video_filter() = %d, max %d, name = %s\n", nb_video_filter(), (MAX_FILTER-1), name);
         allfilters.push_back (FILTER_ENTRY (name, create, tag, viewable, filtername));
@@ -128,7 +127,7 @@
 }
 void registerFilterEx(const char *name,VF_FILTERS tag,uint8_t viewable
 		,AVDMGenericVideoStream *(*create) (AVDMGenericVideoStream *in, CONFcouple *)
-		,char *filtername,AVDMGenericVideoStream *(*create_from_script) (AVDMGenericVideoStream *in, int n,Arg *args),char *desc)
+		,const char *filtername,AVDMGenericVideoStream *(*create_from_script) (AVDMGenericVideoStream *in, int n,Arg *args),const char *desc)
 {
 //    printf ("nb_video_filter = %d, max %d, name = %s\n", nb_video_filter, (MAX_FILTER-1), name);
         allfilters.push_back (FILTER_ENTRY (name, create, tag, viewable,

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_filter/filter_declaration.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_filter/filter_declaration.cpp	2008-02-22 19:10:04 UTC (rev 3797)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_filter/filter_declaration.cpp	2008-02-22 19:47:14 UTC (rev 3798)
@@ -26,7 +26,6 @@
 
 #include "config.h"
 #include "fourcc.h"
-#include "avio.hxx"
 
 #include "avi_vars.h"
 #ifdef HAVE_ENCODER

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_filter/filter_dylib.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_filter/filter_dylib.cpp	2008-02-22 19:10:04 UTC (rev 3797)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_filter/filter_dylib.cpp	2008-02-22 19:47:14 UTC (rev 3798)
@@ -35,7 +35,6 @@
 #include <ADM_assert.h>
 
 #include "fourcc.h"
-#include "avio.hxx"
 
 #include "ADM_toolkit/toolkit.hxx"
 #include "ADM_toolkit/filesel.h"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_filter/filter_saveload.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_filter/filter_saveload.cpp	2008-02-22 19:10:04 UTC (rev 3797)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_filter/filter_saveload.cpp	2008-02-22 19:47:14 UTC (rev 3798)
@@ -24,7 +24,6 @@
 
 
 #include "fourcc.h"
-#include "avio.hxx"
 #ifdef USE_LIBXML2
 	#include <libxml/tree.h>
 	#include <libxml/parser.h>

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_filter/vidVCD.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_filter/vidVCD.cpp	2008-02-22 19:10:04 UTC (rev 3797)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_filter/vidVCD.cpp	2008-02-22 19:47:14 UTC (rev 3798)
@@ -34,7 +34,6 @@
 #include <math.h>
 #include "config.h"
 #include "fourcc.h"
-#include "avio.hxx"
 #include "avi_vars.h"
 
 #include "ADM_toolkit/toolkit.hxx"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_filter/video_filters.h
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_filter/video_filters.h	2008-02-22 19:10:04 UTC (rev 3797)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_filter/video_filters.h	2008-02-22 19:47:14 UTC (rev 3798)
@@ -122,13 +122,13 @@
         void              (*destroy)( AVDMGenericVideoStream *old); /* Maybe needed ...*/
         VF_FILTERS        tag;
         uint8_t           viewable;
-        char              *filtername;
-        char              *description;
+        const char        *filtername;
+        const char        *description;
         ADM_create_from_scriptT *create_from_script;
 
        FILTER_ENTRY (const char * name, ADM_createT * create, VF_FILTERS tag,
-                     uint8_t viewable, char * filtername,
-                     char * description = 0,
+                     uint8_t viewable, const char * filtername,
+                     const char * description = 0,
                      ADM_create_from_scriptT * create_from_script = 0)
            : name (name),
              create (create),
@@ -193,13 +193,13 @@
 
 void registerFilter(const char *name,VF_FILTERS tag,uint8_t viewable,
                     ADM_createT  *create,
-                    char *fname);
+                    const char *fname);
                     
 void registerFilterEx(const char *name,VF_FILTERS tag,uint8_t viewable,
                 ADM_createT  *create,
-		char *filtername,
+                const char *filtername,
                 ADM_create_from_scriptT *create_from_script,
-                char *description);
+                const char *description);
                 
 void 		filterListAll( void );
 VF_FILTERS 	filterGetTagFromName(char *inname);

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_libswscale/ADM_mp.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_libswscale/ADM_mp.cpp	2008-02-22 19:10:04 UTC (rev 3797)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_libswscale/ADM_mp.cpp	2008-02-22 19:47:14 UTC (rev 3798)
@@ -23,7 +23,6 @@
 #include "../../ADM_assert.h"
 
 #include "fourcc.h"
-#include "avio.hxx"
 #include "ADM_utilities/default.h"
 
 #if (defined( ARCH_X86)  || defined(ARCH_X86_64))

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_utilities/ADM_print.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_utilities/ADM_print.cpp	2008-02-22 19:10:04 UTC (rev 3797)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_utilities/ADM_print.cpp	2008-02-22 19:47:14 UTC (rev 3798)
@@ -6,7 +6,6 @@
 
 #include "config.h"
 #include "fourcc.h"
-#include "avio.hxx"
 #include "default.h"
 #include "math.h"
 

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_utilities/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_utilities/CMakeLists.txt	2008-02-22 19:10:04 UTC (rev 3797)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_utilities/CMakeLists.txt	2008-02-22 19:47:14 UTC (rev 3798)
@@ -5,8 +5,8 @@
 SET(ADM_LIB ADM_utilities)
 #
 SET(${ADM_LIB}_SRCS 
-ADM_bitstream.cpp  ADM_image.cpp         ADM_imageUtils.cpp  ADM_print.cpp    aviframe.cpp    aviio.cpp   fourcc.cpp  subchunk.cpp
-ADM_fileio.cpp     ADM_imageResizer.cpp  ADM_pp.cpp          avidemutils.cpp  aviindexer.cpp  broken.cpp  prefs.cpp
+ADM_bitstream.cpp  ADM_image.cpp         ADM_imageUtils.cpp  ADM_print.cpp    fourcc.cpp  
+ADM_fileio.cpp     ADM_imageResizer.cpp  ADM_pp.cpp          avidemutils.cpp  prefs.cpp
 ADM_imageLoader.cpp  ADM_gettext.cpp
 )
 ADD_LIBRARY(${ADM_LIB} STATIC ${${ADM_LIB}_SRCS})

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_utilities/avidemutils.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_utilities/avidemutils.cpp	2008-02-22 19:10:04 UTC (rev 3797)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_utilities/avidemutils.cpp	2008-02-22 19:47:14 UTC (rev 3798)
@@ -25,9 +25,7 @@
 #include "config.h"
 #include "avifmt.h"
 #include "avifmt2.h"
-#include "avio.hxx"
 #include "fourcc.h"
-#include "subchunk.h"
 #include "ADM_toolkit/toolkit.hxx"
 #include "ADM_toolkit/bitmap.h"
 #include "avidemutils.h"

Deleted: branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_utilities/aviframe.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_utilities/aviframe.cpp	2008-02-22 19:10:04 UTC (rev 3797)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_utilities/aviframe.cpp	2008-02-22 19:47:14 UTC (rev 3798)
@@ -1 +0,0 @@
-// RMED

Deleted: branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_utilities/aviio.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_utilities/aviio.cpp	2008-02-22 19:10:04 UTC (rev 3797)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_utilities/aviio.cpp	2008-02-22 19:47:14 UTC (rev 3798)
@@ -1 +0,0 @@
-// RMED
\ No newline at end of file

Deleted: branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_utilities/avio.hxx
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_utilities/avio.hxx	2008-02-22 19:10:04 UTC (rev 3797)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_utilities/avio.hxx	2008-02-22 19:47:14 UTC (rev 3798)
@@ -1 +0,0 @@
-// RMED

Deleted: branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_utilities/broken.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_utilities/broken.cpp	2008-02-22 19:10:04 UTC (rev 3797)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_utilities/broken.cpp	2008-02-22 19:47:14 UTC (rev 3798)
@@ -1 +0,0 @@
-// RMED

Deleted: branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_utilities/indexer.hxx
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_utilities/indexer.hxx	2008-02-22 19:10:04 UTC (rev 3797)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_utilities/indexer.hxx	2008-02-22 19:47:14 UTC (rev 3798)
@@ -1 +0,0 @@
-// RMED

Deleted: branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_utilities/subchunk.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_utilities/subchunk.cpp	2008-02-22 19:10:04 UTC (rev 3797)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_utilities/subchunk.cpp	2008-02-22 19:47:14 UTC (rev 3798)
@@ -1 +0,0 @@
-// RMED

Deleted: branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_utilities/subchunk.h
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_utilities/subchunk.h	2008-02-22 19:10:04 UTC (rev 3797)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_utilities/subchunk.h	2008-02-22 19:47:14 UTC (rev 3798)
@@ -1 +0,0 @@
-// RMED

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_ocr/adm_leftturn.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_ocr/adm_leftturn.cpp	2008-02-22 19:10:04 UTC (rev 3797)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_ocr/adm_leftturn.cpp	2008-02-22 19:47:14 UTC (rev 3798)
@@ -17,7 +17,7 @@
 
 
 #include "fourcc.h"
-#include "avio.hxx"
+
 #include "config.h"
 #include "avi_vars.h"
 

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_outputs/oplug_avi/avilist.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_outputs/oplug_avi/avilist.cpp	2008-02-22 19:10:04 UTC (rev 3797)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_outputs/oplug_avi/avilist.cpp	2008-02-22 19:47:14 UTC (rev 3798)
@@ -34,11 +34,11 @@
 #include "config.h"
 #include "avifmt.h"
 #include "avifmt2.h"
-#include "avio.hxx"
+
 #include <ADM_assert.h>
 
 #include "fourcc.h"
-#include "subchunk.h"
+
 #include "avilist.h"
 #include "ADM_toolkit/toolkit.hxx"
 

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_outputs/oplug_avi/op_avisave.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_outputs/oplug_avi/op_avisave.cpp	2008-02-22 19:10:04 UTC (rev 3797)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_outputs/oplug_avi/op_avisave.cpp	2008-02-22 19:47:14 UTC (rev 3798)
@@ -35,7 +35,7 @@
 #include "fourcc.h"
 #include "avi_vars.h"
 #include "ADM_toolkit/toolkit.hxx"
-#include "subchunk.h"
+
 //#include "avilist.h"
 
 #include "ADM_video/ADM_genvideo.hxx"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_outputs/oplug_avi/op_avisavecopy.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_outputs/oplug_avi/op_avisavecopy.cpp	2008-02-22 19:10:04 UTC (rev 3797)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_outputs/oplug_avi/op_avisavecopy.cpp	2008-02-22 19:47:14 UTC (rev 3798)
@@ -33,7 +33,7 @@
 #include "fourcc.h"
 #include "avi_vars.h"
 #include "ADM_toolkit/toolkit.hxx"
-#include "subchunk.h"
+
 //#include "avilist.h"
 
 #include "ADM_video/ADM_genvideo.hxx"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_outputs/oplug_avi/op_avisavecopy_pack.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_outputs/oplug_avi/op_avisavecopy_pack.cpp	2008-02-22 19:10:04 UTC (rev 3797)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_outputs/oplug_avi/op_avisavecopy_pack.cpp	2008-02-22 19:47:14 UTC (rev 3798)
@@ -29,7 +29,7 @@
 #include "fourcc.h"
 #include "avi_vars.h"
 #include "ADM_toolkit/toolkit.hxx"
-#include "subchunk.h"
+
 //#include "avilist.h"
 
 #include "ADM_video/ADM_genvideo.hxx"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_outputs/oplug_avi/op_avisavecopy_unpack.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_outputs/oplug_avi/op_avisavecopy_unpack.cpp	2008-02-22 19:10:04 UTC (rev 3797)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_outputs/oplug_avi/op_avisavecopy_unpack.cpp	2008-02-22 19:47:14 UTC (rev 3798)
@@ -33,7 +33,7 @@
 #include "fourcc.h"
 #include "avi_vars.h"
 #include "ADM_toolkit/toolkit.hxx"
-#include "subchunk.h"
+
 //#include "avilist.h"
 
 #include "ADM_video/ADM_genvideo.hxx"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_outputs/oplug_avi/op_avisavedual.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_outputs/oplug_avi/op_avisavedual.cpp	2008-02-22 19:10:04 UTC (rev 3797)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_outputs/oplug_avi/op_avisavedual.cpp	2008-02-22 19:47:14 UTC (rev 3798)
@@ -31,7 +31,7 @@
 #include "fourcc.h"
 #include "avi_vars.h"
 #include "ADM_toolkit/toolkit.hxx"
-#include "subchunk.h"
+
 //#include "avilist.h"
 
 #include <ADM_assert.h>

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_outputs/oplug_avi/op_aviwrite.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_outputs/oplug_avi/op_aviwrite.cpp	2008-02-22 19:10:04 UTC (rev 3797)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_outputs/oplug_avi/op_aviwrite.cpp	2008-02-22 19:47:14 UTC (rev 3798)
@@ -39,7 +39,7 @@
 #include "avifmt2.h"
 #include "ADM_audio/aviaudio.hxx"
 #include "fourcc.h"
-#include "subchunk.h"
+
 #include "avilist.h"
 #include "op_aviwrite.hxx"
 #include "ADM_toolkit/toolkit.hxx"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_outputs/oplug_avi/op_saveprocess.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_outputs/oplug_avi/op_saveprocess.cpp	2008-02-22 19:10:04 UTC (rev 3797)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_outputs/oplug_avi/op_saveprocess.cpp	2008-02-22 19:47:14 UTC (rev 3798)
@@ -31,7 +31,7 @@
 #include "fourcc.h"
 #include "avi_vars.h"
 #include "ADM_toolkit/toolkit.hxx"
-#include "subchunk.h"
+
 //#include "avilist.h"
 
 #include "ADM_audio/aviaudio.hxx"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_outputs/oplug_ogm/op_ogaudio.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_outputs/oplug_ogm/op_ogaudio.cpp	2008-02-22 19:10:04 UTC (rev 3797)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_outputs/oplug_ogm/op_ogaudio.cpp	2008-02-22 19:47:14 UTC (rev 3798)
@@ -32,7 +32,7 @@
 #include "avi_vars.h"
 #include <ADM_assert.h>
 #include "ADM_toolkit/toolkit.hxx"
-#include "subchunk.h"
+
 //#include "avilist.h"
 
 #include "ADM_video/ADM_genvideo.hxx"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_outputs/oplug_ogm/op_ogsave.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_outputs/oplug_ogm/op_ogsave.cpp	2008-02-22 19:10:04 UTC (rev 3797)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_outputs/oplug_ogm/op_ogsave.cpp	2008-02-22 19:47:14 UTC (rev 3798)
@@ -33,7 +33,7 @@
 #include "fourcc.h"
 #include "avi_vars.h"
 #include "ADM_toolkit/toolkit.hxx"
-#include "subchunk.h"
+
 //#include "avilist.h"
 
 #include "ADM_video/ADM_genvideo.hxx"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_outputs/oplug_ogm/op_ogsavecopy.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_outputs/oplug_ogm/op_ogsavecopy.cpp	2008-02-22 19:10:04 UTC (rev 3797)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_outputs/oplug_ogm/op_ogsavecopy.cpp	2008-02-22 19:47:14 UTC (rev 3798)
@@ -26,7 +26,7 @@
 #include "avi_vars.h"
 #include "ADM_toolkit/toolkit.hxx"
 #include "ADM_assert.h"
-#include "subchunk.h"
+
 //#include "avilist.h"
 
 #include "ADM_video/ADM_genvideo.hxx"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_outputs/oplug_ogm/op_ogsaveprocess.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_outputs/oplug_ogm/op_ogsaveprocess.cpp	2008-02-22 19:10:04 UTC (rev 3797)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_outputs/oplug_ogm/op_ogsaveprocess.cpp	2008-02-22 19:47:14 UTC (rev 3798)
@@ -33,7 +33,7 @@
 #include "fourcc.h"
 #include "avi_vars.h"
 #include "ADM_toolkit/toolkit.hxx"
-#include "subchunk.h"
+
 //#include "avilist.h"
 
 #include "ADM_video/ADM_genvideo.hxx"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_toolkit/bitmap.h
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_toolkit/bitmap.h	2008-02-22 19:10:04 UTC (rev 3797)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_toolkit/bitmap.h	2008-02-22 19:47:14 UTC (rev 3798)
@@ -49,4 +49,4 @@
    uint32_t    offsetToBits;
 }  ADM_BITMAPFILEHEADER;
 
-#endif
\ No newline at end of file
+#endif

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_SwissArmyKnife.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_SwissArmyKnife.cpp	2008-02-22 19:10:04 UTC (rev 3797)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_SwissArmyKnife.cpp	2008-02-22 19:47:14 UTC (rev 3798)
@@ -21,8 +21,8 @@
 #include <cmath>
 
 #include "fourcc.h"
-#include "avio.hxx"
 
+
 #include "avi_vars.h"
 
 #ifdef HAVE_ENCODER

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp	2008-02-22 19:10:04 UTC (rev 3797)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp	2008-02-22 19:47:14 UTC (rev 3798)
@@ -24,7 +24,6 @@
 #include <gtk/gtk.h>
 
 #include "fourcc.h"
-#include "avio.hxx"
 
 
 #include "default.h"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_contrast.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_contrast.cpp	2008-02-22 19:10:04 UTC (rev 3797)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_contrast.cpp	2008-02-22 19:47:14 UTC (rev 3798)
@@ -27,8 +27,8 @@
 
 
 #include "fourcc.h"
-#include "avio.hxx"
 
+
 #include "avi_vars.h"
 #ifdef HAVE_ENCODER
 

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_eraser.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_eraser.cpp	2008-02-22 19:10:04 UTC (rev 3797)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_eraser.cpp	2008-02-22 19:47:14 UTC (rev 3798)
@@ -21,7 +21,7 @@
 #include <cmath>
 
 #include "fourcc.h"
-#include "avio.hxx"
+
 #include "prefs.h"
 
 #include "avi_vars.h"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_particle.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_particle.cpp	2008-02-22 19:10:04 UTC (rev 3797)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_particle.cpp	2008-02-22 19:47:14 UTC (rev 3798)
@@ -20,7 +20,7 @@
 #include <gtk/gtk.h>
 
 #include "fourcc.h"
-#include "avio.hxx"
+
 #include "prefs.h"
 
 #include "avi_vars.h"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_srt.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_srt.cpp	2008-02-22 19:10:04 UTC (rev 3797)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_srt.cpp	2008-02-22 19:47:14 UTC (rev 3798)
@@ -28,7 +28,6 @@
 
 
 #include "fourcc.h"
-#include "avio.hxx"
 
 #ifdef USE_FREETYPE
 

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_threshold.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_threshold.cpp	2008-02-22 19:10:04 UTC (rev 3797)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_threshold.cpp	2008-02-22 19:47:14 UTC (rev 3798)
@@ -20,8 +20,8 @@
 #include <gtk/gtk.h>
 
 #include "fourcc.h"
-#include "avio.hxx"
 
+
 #include "avi_vars.h"
 
 #ifdef HAVE_ENCODER

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_ocr/adm_ocr.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_ocr/adm_ocr.cpp	2008-02-22 19:10:04 UTC (rev 3797)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_ocr/adm_ocr.cpp	2008-02-22 19:47:14 UTC (rev 3798)
@@ -39,7 +39,6 @@
 
 
 #include "fourcc.h"
-#include "avio.hxx"
 #include "config.h"
 #include "avi_vars.h"
 

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_NONE/ADM_gui2/preview_none.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_NONE/ADM_gui2/preview_none.cpp	2008-02-22 19:10:04 UTC (rev 3797)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_NONE/ADM_gui2/preview_none.cpp	2008-02-22 19:47:14 UTC (rev 3798)
@@ -9,7 +9,6 @@
 
 #include <ADM_assert.h>
 #include "fourcc.h"
-#include "avio.hxx"
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_video/ADM_genvideo.hxx"
 

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_x264.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_x264.cpp	2008-02-22 19:10:04 UTC (rev 3797)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_x264.cpp	2008-02-22 19:47:14 UTC (rev 3798)
@@ -14,7 +14,6 @@
 #include "config.h"
 
 #include "fourcc.h"
-#include "avio.hxx"
 #include "avi_vars.h"
 
 #include "ADM_toolkit/toolkit.hxx"
@@ -73,8 +72,8 @@
                              {1,    QT_TR_NOOP("Hexagonal Search")},
                              {2,    QT_TR_NOOP("Uneven Multi-hexagon")},
                              {3,    QT_TR_NOOP("Exhaustive Search")}
-#if X264_BUILD >= 58
-							 ,{4, QT_TR_NOOP("Hadamard Exhaustive Search")}
+#if X264_BUILD >= 58
+							 ,{4, QT_TR_NOOP("Hadamard Exhaustive Search")}
 #endif
 							 };
 

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_xvid4.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_xvid4.cpp	2008-02-22 19:10:04 UTC (rev 3797)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_xvid4.cpp	2008-02-22 19:47:14 UTC (rev 3798)
@@ -16,7 +16,6 @@
 
 
 #include "fourcc.h"
-#include "avio.hxx"
 
 #include "avi_vars.h"
 

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/T_preview.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/T_preview.cpp	2008-02-22 19:10:04 UTC (rev 3797)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/T_preview.cpp	2008-02-22 19:47:14 UTC (rev 3798)
@@ -40,7 +40,6 @@
 #elif !defined(ADM_WIN32)
 #include <QX11Info>
 #endif
-#include "avio.hxx"
 
 #include "ADM_colorspace/ADM_rgb.h"
 #include "GUI_render.h"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp	2008-02-22 19:10:04 UTC (rev 3797)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp	2008-02-22 19:47:14 UTC (rev 3798)
@@ -23,8 +23,8 @@
 
 
 #include "fourcc.h"
-#include "avio.hxx"
 
+
 #include "avi_vars.h"
 
 #include "ADM_toolkit/toolkit.hxx"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp	2008-02-22 19:10:04 UTC (rev 3797)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp	2008-02-22 19:47:14 UTC (rev 3798)
@@ -23,8 +23,8 @@
 
 
 #include "fourcc.h"
-#include "avio.hxx"
 
+
 #include "avi_vars.h"
 
 #include "ADM_toolkit/toolkit.hxx"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_postproc.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_postproc.cpp	2008-02-22 19:10:04 UTC (rev 3797)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_postproc.cpp	2008-02-22 19:47:14 UTC (rev 3798)
@@ -23,8 +23,8 @@
 
 
 #include "fourcc.h"
-#include "avio.hxx"
 
+
 #include "avi_vars.h"
 
 #include "ADM_toolkit/toolkit.hxx"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp	2008-02-22 19:10:04 UTC (rev 3797)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp	2008-02-22 19:47:14 UTC (rev 3798)
@@ -23,8 +23,8 @@
 
 
 #include "fourcc.h"
-#include "avio.hxx"
 
+
 #include "avi_vars.h"
 
 #include "ADM_toolkit/toolkit.hxx"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_video/ADM_cache.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_video/ADM_cache.cpp	2008-02-22 19:10:04 UTC (rev 3797)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_video/ADM_cache.cpp	2008-02-22 19:47:14 UTC (rev 3798)
@@ -17,7 +17,6 @@
 
 #include "config.h"
 #include "fourcc.h"
-#include "avio.hxx"
 #include "avi_vars.h"
 
 #include "ADM_toolkit/toolkit.hxx"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_video/ADM_confCouples.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_video/ADM_confCouples.cpp	2008-02-22 19:10:04 UTC (rev 3797)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_video/ADM_confCouples.cpp	2008-02-22 19:47:14 UTC (rev 3798)
@@ -18,7 +18,6 @@
 #include "default.h"
 
 #include "fourcc.h"
-#include "avio.hxx"
 #include "ADM_assert.h"
 
 #include "ADM_video/ADM_confCouple.h"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_video/ADM_genvideo.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_video/ADM_genvideo.cpp	2008-02-22 19:10:04 UTC (rev 3797)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_video/ADM_genvideo.cpp	2008-02-22 19:47:14 UTC (rev 3798)
@@ -26,7 +26,7 @@
 
 
 #include "fourcc.h"
-#include "avio.hxx"
+
 #include "config.h"
 #include "ADM_toolkit/toolkit.hxx"
 #include <ADM_assert.h>

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_video/ADM_interlaced.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_video/ADM_interlaced.cpp	2008-02-22 19:10:04 UTC (rev 3797)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_video/ADM_interlaced.cpp	2008-02-22 19:47:14 UTC (rev 3798)
@@ -35,7 +35,7 @@
 #include <math.h>
 #include "config.h"
 #include "fourcc.h"
-#include "avio.hxx"
+
 #include "config.h"
  #include "avi_vars.h"
 

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_video/ADM_vidCNR2.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_video/ADM_vidCNR2.cpp	2008-02-22 19:10:04 UTC (rev 3797)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_video/ADM_vidCNR2.cpp	2008-02-22 19:47:14 UTC (rev 3798)
@@ -44,7 +44,6 @@
 
 #include "config.h"
 #include "fourcc.h"
-#include "avio.hxx"
 #include "avi_vars.h"
 #include "math.h"
 

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_video/ADM_vidClean.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_video/ADM_vidClean.cpp	2008-02-22 19:10:04 UTC (rev 3797)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_video/ADM_vidClean.cpp	2008-02-22 19:47:14 UTC (rev 3798)
@@ -21,7 +21,7 @@
 
 #include "config.h"
 #include "fourcc.h"
-#include "avio.hxx"
+
 #include "config.h"
 #include "avi_vars.h"
 

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_video/ADM_vidColorYuv.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_video/ADM_vidColorYuv.cpp	2008-02-22 19:10:04 UTC (rev 3797)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_video/ADM_vidColorYuv.cpp	2008-02-22 19:47:14 UTC (rev 3798)
@@ -52,7 +52,6 @@
 
 #include "config.h"
 #include "fourcc.h"
-#include "avio.hxx"
 #include "avi_vars.h"
 #include "math.h"
 

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_video/ADM_vidEqualizer.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_video/ADM_vidEqualizer.cpp	2008-02-22 19:10:04 UTC (rev 3797)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_video/ADM_vidEqualizer.cpp	2008-02-22 19:47:14 UTC (rev 3798)
@@ -15,7 +15,7 @@
 
 #include "config.h"
 #include "fourcc.h"
-#include "avio.hxx"
+
 #include "avi_vars.h"
 #include "math.h"
 

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_video/ADM_vidFieldUnblend.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_video/ADM_vidFieldUnblend.cpp	2008-02-22 19:10:04 UTC (rev 3797)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_video/ADM_vidFieldUnblend.cpp	2008-02-22 19:47:14 UTC (rev 3798)
@@ -24,7 +24,6 @@
 
 #include "config.h"
 #include "fourcc.h"
-#include "avio.hxx"
 #include "default.h"
 #include "math.h"
 

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_video/ADM_vidFieldUtil.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_video/ADM_vidFieldUtil.cpp	2008-02-22 19:10:04 UTC (rev 3797)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_video/ADM_vidFieldUtil.cpp	2008-02-22 19:47:14 UTC (rev 3798)
@@ -25,7 +25,7 @@
 
 #include "config.h"
 #include "fourcc.h"
-#include "avio.hxx"
+
 #include "config.h"
 #include "avi_vars.h"
 

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_video/ADM_vidMPdelogo.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_video/ADM_vidMPdelogo.cpp	2008-02-22 19:10:04 UTC (rev 3797)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_video/ADM_vidMPdelogo.cpp	2008-02-22 19:47:14 UTC (rev 3798)
@@ -15,7 +15,7 @@
 #include <ADM_assert.h>
 
 #include "fourcc.h"
-#include "avio.hxx"
+
 #include "avi_vars.h"
 
 #include "ADM_toolkit/toolkit.hxx"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_video/ADM_vidNull.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_video/ADM_vidNull.cpp	2008-02-22 19:10:04 UTC (rev 3797)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_video/ADM_vidNull.cpp	2008-02-22 19:47:14 UTC (rev 3798)
@@ -28,7 +28,7 @@
 
 #include "config.h"
 #include "fourcc.h"
-#include "avio.hxx"
+
 #include "config.h"
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_video/ADM_genvideo.hxx"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_video/ADM_vidPartial.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_video/ADM_vidPartial.cpp	2008-02-22 19:10:04 UTC (rev 3797)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_video/ADM_vidPartial.cpp	2008-02-22 19:47:14 UTC (rev 3798)
@@ -27,7 +27,6 @@
 
 #include "config.h"
 #include "fourcc.h"
-#include "avio.hxx"
 #include "config.h"
 #include "avi_vars.h"
 #ifdef HAVE_ENCODER

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_video/ADM_vidRaw.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_video/ADM_vidRaw.cpp	2008-02-22 19:10:04 UTC (rev 3797)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_video/ADM_vidRaw.cpp	2008-02-22 19:47:14 UTC (rev 3798)
@@ -24,7 +24,7 @@
 
 #include "config.h"
 #include "fourcc.h"
-#include "avio.hxx"
+
 #include "config.h"
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_video/ADM_genvideo.hxx"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_guiResize.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_guiResize.cpp	2008-02-22 19:10:04 UTC (rev 3797)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_guiResize.cpp	2008-02-22 19:47:14 UTC (rev 3798)
@@ -27,7 +27,6 @@
 #include <sys/time.h>
 #include "config.h"
 #include "fourcc.h"
-#include "avio.hxx"
 
 #include "avi_vars.h"
 #ifdef HAVE_ENCODER

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_resizebis.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_resizebis.cpp	2008-02-22 19:10:04 UTC (rev 3797)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_resizebis.cpp	2008-02-22 19:47:14 UTC (rev 3798)
@@ -28,7 +28,6 @@
 #include <math.h>
 #include "config.h"
 #include "fourcc.h"
-#include "avio.hxx"
 #include "config.h"
  #include "avi_vars.h"
 #ifdef HAVE_ENCODER

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_resizeter.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_resizeter.cpp	2008-02-22 19:10:04 UTC (rev 3797)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_resizeter.cpp	2008-02-22 19:47:14 UTC (rev 3798)
@@ -29,7 +29,6 @@
 #include <math.h>
 #include "config.h"
 #include "fourcc.h"
-#include "avio.hxx"
 #include "config.h"
 #include "avi_vars.h"
 

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidASS.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidASS.cpp	2008-02-22 19:10:04 UTC (rev 3797)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidASS.cpp	2008-02-22 19:47:14 UTC (rev 3798)
@@ -19,7 +19,6 @@
 
 
 #include "fourcc.h"
-#include "avio.hxx"
 #include "avi_vars.h"
 #ifdef HAVE_ENCODER
 

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidAddBorder.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidAddBorder.cpp	2008-02-22 19:10:04 UTC (rev 3797)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidAddBorder.cpp	2008-02-22 19:47:14 UTC (rev 3798)
@@ -21,7 +21,6 @@
 
 #include "config.h"
 #include "fourcc.h"
-#include "avio.hxx"
 #include "config.h"
 #include "avi_vars.h"
 #ifdef HAVE_ENCODER

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidAnimated.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidAnimated.cpp	2008-02-22 19:10:04 UTC (rev 3797)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidAnimated.cpp	2008-02-22 19:47:14 UTC (rev 3798)
@@ -19,7 +19,6 @@
 
 #include "config.h"
 #include "fourcc.h"
-#include "avio.hxx"
 #include "avi_vars.h"
 #include "math.h"
 

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidAsharp.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidAsharp.cpp	2008-02-22 19:10:04 UTC (rev 3797)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidAsharp.cpp	2008-02-22 19:47:14 UTC (rev 3798)
@@ -31,7 +31,7 @@
 
 #include "config.h"
 #include "fourcc.h"
-#include "avio.hxx"
+
 #include "avi_vars.h"
 
 #include "ADM_toolkit/toolkit.hxx"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidBSmear.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidBSmear.cpp	2008-02-22 19:10:04 UTC (rev 3797)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidBSmear.cpp	2008-02-22 19:47:14 UTC (rev 3798)
@@ -29,7 +29,6 @@
 
 #include "config.h"
 #include "fourcc.h"
-#include "avio.hxx"
 #include "avi_vars.h"
 
 #ifdef HAVE_ENCODER

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidBlend.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidBlend.cpp	2008-02-22 19:10:04 UTC (rev 3797)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidBlend.cpp	2008-02-22 19:47:14 UTC (rev 3798)
@@ -25,7 +25,6 @@
 
 #include "config.h"
 #include "fourcc.h"
-#include "avio.hxx"
 #include "config.h"
 #include "avi_vars.h"
 

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidBlendRemoval.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidBlendRemoval.cpp	2008-02-22 19:10:04 UTC (rev 3797)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidBlendRemoval.cpp	2008-02-22 19:47:14 UTC (rev 3798)
@@ -24,7 +24,6 @@
 
 #include "config.h"
 #include "fourcc.h"
-#include "avio.hxx"
 #include "default.h"
 #include "math.h"
 

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidChroma.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidChroma.cpp	2008-02-22 19:10:04 UTC (rev 3797)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidChroma.cpp	2008-02-22 19:47:14 UTC (rev 3798)
@@ -22,7 +22,6 @@
 
 #include "config.h"
 #include "fourcc.h"
-#include "avio.hxx"
 #include "config.h"
 #include "avi_vars.h"
 

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidChromaShift.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidChromaShift.cpp	2008-02-22 19:10:04 UTC (rev 3797)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidChromaShift.cpp	2008-02-22 19:47:14 UTC (rev 3798)
@@ -23,7 +23,6 @@
 
 #include "config.h"
 #include "fourcc.h"
-#include "avio.hxx"
 #include "config.h"
 #include "avi_vars.h"
 #ifdef HAVE_ENCODER

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidComputeAverage.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidComputeAverage.cpp	2008-02-22 19:10:04 UTC (rev 3797)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidComputeAverage.cpp	2008-02-22 19:47:14 UTC (rev 3798)
@@ -22,7 +22,7 @@
 
 #include "ADM_assert.h"
 #include "fourcc.h"
-#include "avio.hxx"
+
 #include "avi_vars.h"
 
 #include "ADM_toolkit/toolkit.hxx"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidContrast.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidContrast.cpp	2008-02-22 19:10:04 UTC (rev 3797)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidContrast.cpp	2008-02-22 19:47:14 UTC (rev 3798)
@@ -22,7 +22,7 @@
 
 #include "config.h"
 #include "fourcc.h"
-#include "avio.hxx"
+
 #include "config.h"
 #include "avi_vars.h"
 

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidCrop.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidCrop.cpp	2008-02-22 19:10:04 UTC (rev 3797)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidCrop.cpp	2008-02-22 19:47:14 UTC (rev 3798)
@@ -27,7 +27,7 @@
 
 #include "config.h"
 #include "fourcc.h"
-#include "avio.hxx"
+
 #include "config.h"
 #include "avi_vars.h"
 #ifdef HAVE_ENCODER

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidDGbob.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidDGbob.cpp	2008-02-22 19:10:04 UTC (rev 3797)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidDGbob.cpp	2008-02-22 19:47:14 UTC (rev 3798)
@@ -30,7 +30,6 @@
 
 #include "config.h"
 #include "fourcc.h"
-#include "avio.hxx"
 #include "avi_vars.h"
 
 #include "ADM_toolkit/toolkit.hxx"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidDecDec.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidDecDec.cpp	2008-02-22 19:10:04 UTC (rev 3797)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidDecDec.cpp	2008-02-22 19:47:14 UTC (rev 3798)
@@ -48,7 +48,6 @@
 
 #include "config.h"
 #include "fourcc.h"
-#include "avio.hxx"
 #include "avi_vars.h"
 
 #include "ADM_toolkit/toolkit.hxx"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidDecTelecide.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidDecTelecide.cpp	2008-02-22 19:10:04 UTC (rev 3797)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidDecTelecide.cpp	2008-02-22 19:47:14 UTC (rev 3798)
@@ -38,7 +38,6 @@
 
 #include "config.h"
 #include "fourcc.h"
-#include "avio.hxx"
 #include "avi_vars.h"
 
 #include "ADM_toolkit/toolkit.hxx"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidDeintASM.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidDeintASM.cpp	2008-02-22 19:10:04 UTC (rev 3797)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidDeintASM.cpp	2008-02-22 19:47:14 UTC (rev 3798)
@@ -25,7 +25,6 @@
 
 #include "config.h"
 #include "fourcc.h"
-#include "avio.hxx"
 #include "config.h"
 #include "avi_vars.h"
 

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidDeinterlace.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidDeinterlace.cpp	2008-02-22 19:10:04 UTC (rev 3797)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidDeinterlace.cpp	2008-02-22 19:47:14 UTC (rev 3798)
@@ -27,7 +27,6 @@
 
 #include "config.h"
 #include "fourcc.h"
-#include "avio.hxx"
 #include "config.h"
 #include "avi_vars.h"
 #ifdef HAVE_ENCODER

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidDelta.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidDelta.cpp	2008-02-22 19:10:04 UTC (rev 3797)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidDelta.cpp	2008-02-22 19:47:14 UTC (rev 3798)
@@ -13,7 +13,6 @@
 
 #include "config.h"
 #include "fourcc.h"
-#include "avio.hxx"
 #include "avi_vars.h"
 #include "math.h"
 

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidDenoise.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidDenoise.cpp	2008-02-22 19:10:04 UTC (rev 3797)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidDenoise.cpp	2008-02-22 19:47:14 UTC (rev 3798)
@@ -29,7 +29,6 @@
 
 #include "config.h"
 #include "fourcc.h"
-#include "avio.hxx"
 #include "config.h"
 #include "avi_vars.h"
 

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidDropOut.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidDropOut.cpp	2008-02-22 19:10:04 UTC (rev 3797)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidDropOut.cpp	2008-02-22 19:47:14 UTC (rev 3798)
@@ -22,7 +22,6 @@
 
 #include "config.h"
 #include "fourcc.h"
-#include "avio.hxx"
 #include "config.h"
 #include "avi_vars.h"
 #ifdef HAVE_ENCODER

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidEraser.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidEraser.cpp	2008-02-22 19:10:04 UTC (rev 3797)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidEraser.cpp	2008-02-22 19:47:14 UTC (rev 3798)
@@ -29,7 +29,6 @@
 
 #include "ADM_assert.h"
 #include "fourcc.h"
-#include "avio.hxx"
 #include "avi_vars.h"
 
 #include "ADM_toolkit/toolkit.hxx"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidFade.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidFade.cpp	2008-02-22 19:10:04 UTC (rev 3797)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidFade.cpp	2008-02-22 19:47:14 UTC (rev 3798)
@@ -16,7 +16,7 @@
 
 #include "config.h"
 #include "fourcc.h"
-#include "avio.hxx"
+
 #include "avi_vars.h"
 
 #include "ADM_toolkit/toolkit.hxx"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidFields.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidFields.cpp	2008-02-22 19:10:04 UTC (rev 3797)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidFields.cpp	2008-02-22 19:47:14 UTC (rev 3798)
@@ -21,7 +21,6 @@
 
 #include "config.h"
 #include "fourcc.h"
-#include "avio.hxx"
 #include "config.h"
 #include "avi_vars.h"
 #ifdef HAVE_ENCODER

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidFlipV.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidFlipV.cpp	2008-02-22 19:10:04 UTC (rev 3797)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidFlipV.cpp	2008-02-22 19:47:14 UTC (rev 3798)
@@ -22,7 +22,6 @@
 
 #include "config.h"
 #include "fourcc.h"
-#include "avio.hxx"
 #include "config.h"
 #include "avi_vars.h"
 #ifdef HAVE_ENCODER

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidFlux.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidFlux.cpp	2008-02-22 19:10:04 UTC (rev 3797)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidFlux.cpp	2008-02-22 19:47:14 UTC (rev 3798)
@@ -27,7 +27,6 @@
 
 #include "default.h"
 #include "fourcc.h"
-#include "avio.hxx"
 #include "config.h"
 
 

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidForcedPP.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidForcedPP.cpp	2008-02-22 19:10:04 UTC (rev 3797)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidForcedPP.cpp	2008-02-22 19:47:14 UTC (rev 3798)
@@ -23,7 +23,6 @@
 
 
 #include "fourcc.h"
-#include "avio.hxx"
 
 #include "avi_vars.h"
 

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidHardIvtcRemoval.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidHardIvtcRemoval.cpp	2008-02-22 19:10:04 UTC (rev 3797)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidHardIvtcRemoval.cpp	2008-02-22 19:47:14 UTC (rev 3798)
@@ -24,7 +24,6 @@
 
 #include "config.h"
 #include "fourcc.h"
-#include "avio.hxx"
 #include "default.h"
 #include "math.h"
 

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidHue.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidHue.cpp	2008-02-22 19:10:04 UTC (rev 3797)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidHue.cpp	2008-02-22 19:47:14 UTC (rev 3798)
@@ -21,7 +21,7 @@
 
 #include "config.h"
 #include "fourcc.h"
-#include "avio.hxx"
+
 #include "config.h"
 #include "avi_vars.h"
 #ifdef HAVE_ENCODER

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidKernelDeint.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidKernelDeint.cpp	2008-02-22 19:10:04 UTC (rev 3797)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidKernelDeint.cpp	2008-02-22 19:47:14 UTC (rev 3798)
@@ -45,7 +45,6 @@
 
 
 #include "fourcc.h"
-#include "avio.hxx"
 
 #include "avi_vars.h"
 

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidLargeMedian.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidLargeMedian.cpp	2008-02-22 19:10:04 UTC (rev 3797)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidLargeMedian.cpp	2008-02-22 19:47:14 UTC (rev 3798)
@@ -26,7 +26,6 @@
 
 #include "config.h"
 #include "fourcc.h"
-#include "avio.hxx"
 #include "config.h"
 #include "avi_vars.h"
 #ifdef HAVE_ENCODER

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidLuma.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidLuma.cpp	2008-02-22 19:10:04 UTC (rev 3797)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidLuma.cpp	2008-02-22 19:47:14 UTC (rev 3798)
@@ -22,7 +22,6 @@
 
 #include "config.h"
 #include "fourcc.h"
-#include "avio.hxx"
 #include "config.h"
 #include "avi_vars.h"
 #ifdef HAVE_ENCODER

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidMPLD3D.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidMPLD3D.cpp	2008-02-22 19:10:04 UTC (rev 3797)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidMPLD3D.cpp	2008-02-22 19:47:14 UTC (rev 3798)
@@ -24,7 +24,6 @@
 
 #include "config.h"
 #include "fourcc.h"
-#include "avio.hxx"
 #include "config.h"
 #include "avi_vars.h"
 

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidMPLD3Dlow.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidMPLD3Dlow.cpp	2008-02-22 19:10:04 UTC (rev 3797)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidMPLD3Dlow.cpp	2008-02-22 19:47:14 UTC (rev 3798)
@@ -24,7 +24,6 @@
 
 #include "config.h"
 #include "fourcc.h"
-#include "avio.hxx"
 #include "config.h"
 #include "avi_vars.h"
 

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidMPLResize.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidMPLResize.cpp	2008-02-22 19:10:04 UTC (rev 3797)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidMPLResize.cpp	2008-02-22 19:47:14 UTC (rev 3798)
@@ -28,7 +28,6 @@
 #include <ADM_assert.h>
 
 #include "fourcc.h"
-#include "avio.hxx"
 #include "avi_vars.h"
 
 #include "ADM_toolkit/toolkit.hxx"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidMSharpen.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidMSharpen.cpp	2008-02-22 19:10:04 UTC (rev 3797)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidMSharpen.cpp	2008-02-22 19:47:14 UTC (rev 3798)
@@ -41,7 +41,6 @@
 
 #include "config.h"
 #include "fourcc.h"
-#include "avio.hxx"
 #include "avi_vars.h"
 
 #include "ADM_toolkit/toolkit.hxx"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidMcDeint.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidMcDeint.cpp	2008-02-22 19:10:04 UTC (rev 3797)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidMcDeint.cpp	2008-02-22 19:47:14 UTC (rev 3798)
@@ -29,7 +29,6 @@
 
 #include "config.h"
 #include "fourcc.h"
-#include "avio.hxx"
 #include "config.h"
 #include "avi_vars.h"
 

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidMosaic.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidMosaic.cpp	2008-02-22 19:10:04 UTC (rev 3797)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidMosaic.cpp	2008-02-22 19:47:14 UTC (rev 3798)
@@ -23,7 +23,6 @@
 #include <ADM_assert.h>
 
 #include "fourcc.h"
-#include "avio.hxx"
 #include "avi_vars.h"
 
 #include "ADM_toolkit/toolkit.hxx"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidMsmooth.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidMsmooth.cpp	2008-02-22 19:10:04 UTC (rev 3797)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidMsmooth.cpp	2008-02-22 19:47:14 UTC (rev 3798)
@@ -36,7 +36,6 @@
 
 #include "config.h"
 #include "fourcc.h"
-#include "avio.hxx"
 #include "avi_vars.h"
 
 #include "ADM_toolkit/toolkit.hxx"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidPalShift.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidPalShift.cpp	2008-02-22 19:10:04 UTC (rev 3797)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidPalShift.cpp	2008-02-22 19:47:14 UTC (rev 3798)
@@ -21,7 +21,6 @@
 
 #include "config.h"
 #include "fourcc.h"
-#include "avio.hxx"
 #include "config.h"
 #include "avi_vars.h"
 #ifdef HAVE_ENCODER

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidPalSmart.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidPalSmart.cpp	2008-02-22 19:10:04 UTC (rev 3797)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidPalSmart.cpp	2008-02-22 19:47:14 UTC (rev 3798)
@@ -21,7 +21,6 @@
 
 #include "config.h"
 #include "fourcc.h"
-#include "avio.hxx"
 #include "config.h"
 #include "avi_vars.h"
 #ifdef HAVE_ENCODER

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidParticle.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidParticle.cpp	2008-02-22 19:10:04 UTC (rev 3797)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidParticle.cpp	2008-02-22 19:47:14 UTC (rev 3798)
@@ -27,7 +27,6 @@
 #include "ADM_assert.h"
 #undef memcpy   // avoid compile errors due to macro
 #include "fourcc.h"
-#include "avio.hxx"
 #include "avi_vars.h"
 
 #include "ADM_toolkit/toolkit.hxx"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidPulldown.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidPulldown.cpp	2008-02-22 19:10:04 UTC (rev 3797)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidPulldown.cpp	2008-02-22 19:47:14 UTC (rev 3798)
@@ -27,7 +27,6 @@
 
 #include "config.h"
 #include "fourcc.h"
-#include "avio.hxx"
 #include "config.h"
 #include "avi_vars.h"
 

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidResampleFPS.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidResampleFPS.cpp	2008-02-22 19:10:04 UTC (rev 3797)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidResampleFPS.cpp	2008-02-22 19:47:14 UTC (rev 3798)
@@ -24,7 +24,6 @@
 
 #include "config.h"
 #include "fourcc.h"
-#include "avio.hxx"
 #include "config.h"
 #include "avi_vars.h"
 #ifdef HAVE_ENCODER

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidResize.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidResize.cpp	2008-02-22 19:10:04 UTC (rev 3797)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidResize.cpp	2008-02-22 19:47:14 UTC (rev 3798)
@@ -28,7 +28,6 @@
 
 #include "config.h"
 #include "fourcc.h"
-#include "avio.hxx"
 #include "config.h"
 #include "avi_vars.h"
 #ifdef HAVE_ENCODER

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidReverse.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidReverse.cpp	2008-02-22 19:10:04 UTC (rev 3797)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidReverse.cpp	2008-02-22 19:47:14 UTC (rev 3798)
@@ -15,7 +15,6 @@
 
 #include "config.h"
 #include "fourcc.h"
-#include "avio.hxx"
 #include "avi_vars.h"
 
 #include "ADM_toolkit/toolkit.hxx"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidSeparateField.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidSeparateField.cpp	2008-02-22 19:10:04 UTC (rev 3797)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidSeparateField.cpp	2008-02-22 19:47:14 UTC (rev 3798)
@@ -27,7 +27,6 @@
 
 #include "config.h"
 #include "fourcc.h"
-#include "avio.hxx"
 #include "config.h"
 #include "avi_vars.h"
 

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidSoften.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidSoften.cpp	2008-02-22 19:10:04 UTC (rev 3797)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidSoften.cpp	2008-02-22 19:47:14 UTC (rev 3798)
@@ -27,7 +27,6 @@
 
 
 #include "fourcc.h"
-#include "avio.hxx"
 
 #include "avi_vars.h"
 

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidStabilize.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidStabilize.cpp	2008-02-22 19:10:04 UTC (rev 3797)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidStabilize.cpp	2008-02-22 19:47:14 UTC (rev 3798)
@@ -22,7 +22,6 @@
 
 #include "config.h"
 #include "fourcc.h"
-#include "avio.hxx"
 #include "config.h"
 #include "avi_vars.h"
 #ifdef HAVE_ENCODER

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidSwapFields.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidSwapFields.cpp	2008-02-22 19:10:04 UTC (rev 3797)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidSwapFields.cpp	2008-02-22 19:47:14 UTC (rev 3798)
@@ -25,7 +25,6 @@
 
 #include "config.h"
 #include "fourcc.h"
-#include "avio.hxx"
 #include "config.h"
 #include "avi_vars.h"
 #ifdef HAVE_ENCODER

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidSwapSmart.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidSwapSmart.cpp	2008-02-22 19:10:04 UTC (rev 3797)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidSwapSmart.cpp	2008-02-22 19:47:14 UTC (rev 3798)
@@ -25,7 +25,6 @@
 
 #include "config.h"
 #include "fourcc.h"
-#include "avio.hxx"
 #include "config.h"
 #include "avi_vars.h"
 #ifdef HAVE_ENCODER

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp	2008-02-22 19:10:04 UTC (rev 3797)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp	2008-02-22 19:47:14 UTC (rev 3798)
@@ -29,7 +29,6 @@
 
 #include "ADM_assert.h"
 #include "fourcc.h"
-#include "avio.hxx"
 #include "avi_vars.h"
 
 #include "ADM_toolkit/toolkit.hxx"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidTdeint.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidTdeint.cpp	2008-02-22 19:10:04 UTC (rev 3797)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidTdeint.cpp	2008-02-22 19:47:14 UTC (rev 3798)
@@ -39,7 +39,6 @@
 
 #include "config.h"
 #include "fourcc.h"
-#include "avio.hxx"
 #include "default.h"
 #include "math.h"
 

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidThreshold.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidThreshold.cpp	2008-02-22 19:10:04 UTC (rev 3797)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidThreshold.cpp	2008-02-22 19:47:14 UTC (rev 3798)
@@ -18,7 +18,6 @@
 
 #include "ADM_assert.h"
 #include "fourcc.h"
-#include "avio.hxx"
 #include "avi_vars.h"
 
 #include "ADM_toolkit/toolkit.hxx"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidUVSwap.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidUVSwap.cpp	2008-02-22 19:10:04 UTC (rev 3797)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidUVSwap.cpp	2008-02-22 19:47:14 UTC (rev 3798)
@@ -22,7 +22,6 @@
 
 #include "config.h"
 #include "fourcc.h"
-#include "avio.hxx"
 #include "config.h"
 #include "avi_vars.h"
 #ifdef HAVE_ENCODER

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidUnblend.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidUnblend.cpp	2008-02-22 19:10:04 UTC (rev 3797)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidUnblend.cpp	2008-02-22 19:47:14 UTC (rev 3798)
@@ -12,7 +12,7 @@
 
 #include "config.h"
 #include "fourcc.h"
-#include "avio.hxx"
+
 #include "avi_vars.h"
 #include "math.h"
 

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidVlad.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidVlad.cpp	2008-02-22 19:10:04 UTC (rev 3797)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidVlad.cpp	2008-02-22 19:47:14 UTC (rev 3798)
@@ -27,7 +27,6 @@
 
 #include "config.h"
 #include "fourcc.h"
-#include "avio.hxx"
 #include "config.h"
 #include "avi_vars.h"
 #include "admmangle.h"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidVobSubRender.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidVobSubRender.cpp	2008-02-22 19:10:04 UTC (rev 3797)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidVobSubRender.cpp	2008-02-22 19:47:14 UTC (rev 3798)
@@ -52,7 +52,7 @@
 
 #include "config.h"
 #include "fourcc.h"
-#include "avio.hxx"
+
 #include "config.h"
 #include "avi_vars.h"
 

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidVobsub.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidVobsub.cpp	2008-02-22 19:10:04 UTC (rev 3797)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidVobsub.cpp	2008-02-22 19:47:14 UTC (rev 3798)
@@ -28,7 +28,7 @@
 
 #include "config.h"
 #include "fourcc.h"
-#include "avio.hxx"
+
 #include "config.h"
 #include "avi_vars.h"
 

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidWhirl.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidWhirl.cpp	2008-02-22 19:10:04 UTC (rev 3797)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidWhirl.cpp	2008-02-22 19:47:14 UTC (rev 3798)
@@ -28,7 +28,6 @@
 
 #include "config.h"
 #include "fourcc.h"
-#include "avio.hxx"
 #include "config.h"
 #include "avi_vars.h"
 



From mean at mail.berlios.de  Sun Feb 24 18:26:51 2008
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sun, 24 Feb 2008 18:26:51 +0100
Subject: [Avidemux-svn-commit] r3799 - in
	branches/avidemux_2.5_branch_mean/avidemux: . ADM_core
	ADM_core/include ADM_libraries/ADM_utilities ADM_osSupport ADM_video
Message-ID: <200802241726.m1OHQpoI007382@sheep.berlios.de>

Author: mean
Date: 2008-02-24 18:26:50 +0100 (Sun, 24 Feb 2008)
New Revision: 3799

Added:
   branches/avidemux_2.5_branch_mean/avidemux/ADM_core/
   branches/avidemux_2.5_branch_mean/avidemux/ADM_core/include/
   branches/avidemux_2.5_branch_mean/avidemux/ADM_core/include/ADM_assert.h
   branches/avidemux_2.5_branch_mean/avidemux/ADM_core/include/ADM_clock.h
   branches/avidemux_2.5_branch_mean/avidemux/ADM_core/include/ADM_cpuCap.h
   branches/avidemux_2.5_branch_mean/avidemux/ADM_core/include/ADM_fileio.h
   branches/avidemux_2.5_branch_mean/avidemux/ADM_core/include/ADM_inttype.h
   branches/avidemux_2.5_branch_mean/avidemux/ADM_core/include/ADM_mangle.h
   branches/avidemux_2.5_branch_mean/avidemux/ADM_core/include/ADM_misc.h
   branches/avidemux_2.5_branch_mean/avidemux/ADM_core/include/ADM_threads.h
   branches/avidemux_2.5_branch_mean/avidemux/ADM_video/ADM_vidMisc.h
Removed:
   branches/avidemux_2.5_branch_mean/avidemux/ADM_assert.h
   branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_utilities/ADM_fileio.h
   branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_utilities/admmangle.h
   branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_utilities/default.h
   branches/avidemux_2.5_branch_mean/avidemux/ADM_osSupport/ADM_cpuCap.h
   branches/avidemux_2.5_branch_mean/avidemux/ADM_osSupport/ADM_misc.h
   branches/avidemux_2.5_branch_mean/avidemux/ADM_osSupport/ADM_threads.h
   branches/avidemux_2.5_branch_mean/avidemux/ADM_osSupport/TLK_clock.h
Log:
[All] Cleanup and begin to separate core


Deleted: branches/avidemux_2.5_branch_mean/avidemux/ADM_assert.h
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_assert.h	2008-02-22 19:47:14 UTC (rev 3798)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_assert.h	2008-02-24 17:26:50 UTC (rev 3799)
@@ -1,77 +0,0 @@
-/*
-	Replacement for assert etc...
-*/
-#ifndef ADM_ASSERT_H
-#define ADM_ASSERT_H
-
-#include <assert.h>
-
-#define ADM_assert(x) { if(!(x)) {ADM_backTrack(__LINE__,__FILE__);  }}
-
-/* Functions we want to override to have better os support / debug / error control */
-    
-#ifdef __cplusplus
-extern "C" {
-#endif
-void   ADM_backTrack(int lineno,const char *file);
-size_t ADM_fread (void *ptr, size_t size, size_t n, FILE *sstream);
-size_t ADM_fwrite (void *ptr, size_t size, size_t n, FILE *sstream);
-FILE  *ADM_fopen (const char *file, const char *mode);
-int    ADM_fclose (FILE *file);
-
-extern void *ADM_alloc(size_t size);
-extern void *ADM_calloc(size_t nbElm,size_t elSize);
-extern void *ADM_realloc(void *in,size_t size);
-extern void ADM_dezalloc(void *ptr);
-extern char *ADM_strdup( const char *in);
-extern char *slashToBackSlash(char *in);
-typedef void *(* adm_fast_memcpy)(void *to, const void *from, size_t len);
-extern adm_fast_memcpy myAdmMemcpy;
-
-#define ADM_memalign(x,y) ADM_alloc(y)
-
-#define ADM_dealloc(x) ADM_dezalloc( (void *)x)
-#define memcpy myAdmMemcpy
-
-// Override fread/fwrite ..
-#define fread   ADM_fread
-#define fwrite  ADM_fwrite
-#define fopen   ADM_fopen
-#define fclose  ADM_fclose
-
-#ifndef __APPLE__
-#ifndef ADM_LEGACY_PROGGY
-  #define malloc #error
-  #define realloc #error
-  #define memalign #error
-  #define free  #error
-  #undef strdup
-  #define strdup #error
-  #define calloc #error
-#else
-  #define malloc ADM_alloc
-  #define realloc ADM_realloc
-  #define memalign(x,y) ADM_alloc(y)
-  #define free  ADM_dealloc
-  #undef strdup
-  #define strdup ADM_strdup
-  #define calloc ADM_calloc
-#endif
-#endif    // __APPLE__
-#ifdef __cplusplus
-}
-#endif
-// Compatibility with fprintf etc.. with long long & win32
-#ifdef ADM_WIN32
-        #define LLX "I64x"
-        #define LLU "I64u"
-        
-        #define cleanupPath(x) slashToBackSlash(x)
-#else
-        #define LLX "llx"
-        #define LLU "llu"
-        #define cleanupPath(x) ADM_strdup(x)
-#endif
-
-
-#endif

Copied: branches/avidemux_2.5_branch_mean/avidemux/ADM_core/include/ADM_assert.h (from rev 3798, branches/avidemux_2.5_branch_mean/avidemux/ADM_assert.h)
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_assert.h	2008-02-22 19:47:14 UTC (rev 3798)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_core/include/ADM_assert.h	2008-02-24 17:26:50 UTC (rev 3799)
@@ -0,0 +1,77 @@
+/*
+	Replacement for assert etc...
+*/
+#ifndef ADM_ASSERT_H
+#define ADM_ASSERT_H
+
+#include <assert.h>
+
+#define ADM_assert(x) { if(!(x)) {ADM_backTrack(__LINE__,__FILE__);  }}
+
+/* Functions we want to override to have better os support / debug / error control */
+    
+#ifdef __cplusplus
+extern "C" {
+#endif
+void   ADM_backTrack(int lineno,const char *file);
+size_t ADM_fread (void *ptr, size_t size, size_t n, FILE *sstream);
+size_t ADM_fwrite (void *ptr, size_t size, size_t n, FILE *sstream);
+FILE  *ADM_fopen (const char *file, const char *mode);
+int    ADM_fclose (FILE *file);
+
+extern void *ADM_alloc(size_t size);
+extern void *ADM_calloc(size_t nbElm,size_t elSize);
+extern void *ADM_realloc(void *in,size_t size);
+extern void ADM_dezalloc(void *ptr);
+extern char *ADM_strdup( const char *in);
+extern char *slashToBackSlash(char *in);
+typedef void *(* adm_fast_memcpy)(void *to, const void *from, size_t len);
+extern adm_fast_memcpy myAdmMemcpy;
+
+#define ADM_memalign(x,y) ADM_alloc(y)
+
+#define ADM_dealloc(x) ADM_dezalloc( (void *)x)
+#define memcpy myAdmMemcpy
+
+// Override fread/fwrite ..
+#define fread   ADM_fread
+#define fwrite  ADM_fwrite
+#define fopen   ADM_fopen
+#define fclose  ADM_fclose
+
+#ifndef __APPLE__
+#ifndef ADM_LEGACY_PROGGY
+  #define malloc #error
+  #define realloc #error
+  #define memalign #error
+  #define free  #error
+  #undef strdup
+  #define strdup #error
+  #define calloc #error
+#else
+  #define malloc ADM_alloc
+  #define realloc ADM_realloc
+  #define memalign(x,y) ADM_alloc(y)
+  #define free  ADM_dealloc
+  #undef strdup
+  #define strdup ADM_strdup
+  #define calloc ADM_calloc
+#endif
+#endif    // __APPLE__
+#ifdef __cplusplus
+}
+#endif
+// Compatibility with fprintf etc.. with long long & win32
+#ifdef ADM_WIN32
+        #define LLX "I64x"
+        #define LLU "I64u"
+        
+        #define cleanupPath(x) slashToBackSlash(x)
+#else
+        #define LLX "llx"
+        #define LLU "llu"
+        #define cleanupPath(x) ADM_strdup(x)
+#endif
+
+
+#endif

Copied: branches/avidemux_2.5_branch_mean/avidemux/ADM_core/include/ADM_clock.h (from rev 3798, branches/avidemux_2.5_branch_mean/avidemux/ADM_osSupport/TLK_clock.h)
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_osSupport/TLK_clock.h	2008-02-22 19:47:14 UTC (rev 3798)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_core/include/ADM_clock.h	2008-02-24 17:26:50 UTC (rev 3799)
@@ -0,0 +1,16 @@
+//
+#ifndef __CLK__
+#define __CLK__
+class Clock
+{
+	private: uint32_t _startTime;
+
+	public:
+			Clock(void );
+			~Clock( );
+			uint32_t getElapsedMS( void );
+			uint8_t reset( void );
+
+
+};
+#endif

Copied: branches/avidemux_2.5_branch_mean/avidemux/ADM_core/include/ADM_cpuCap.h (from rev 3798, branches/avidemux_2.5_branch_mean/avidemux/ADM_osSupport/ADM_cpuCap.h)
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_osSupport/ADM_cpuCap.h	2008-02-22 19:47:14 UTC (rev 3798)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_core/include/ADM_cpuCap.h	2008-02-24 17:26:50 UTC (rev 3799)
@@ -0,0 +1,57 @@
+//
+// C++ Interface: ADM_cpuCap
+//
+// Description: 
+//
+//
+// Author: mean <fixounet at free.fr>, (C) 2004
+//
+// Copyright: See COPYING file that comes with this distribution
+//
+//
+#if defined(ARCH_X86_64) ||defined(ARCH_X86)
+
+#define CHECK_Z(x) {if(CpuCaps::myCpuCaps & ADM_CPU_##x & CpuCaps::myCpuMask) return 1; else return 0;} 
+
+#else
+#define         CHECK_Z(x) {return 0;}
+#endif
+
+typedef enum 
+{
+        ADM_CPU_NONE   =1,
+        ADM_CPU_MMX    =1<<1,
+        ADM_CPU_MMXEXT =1<<2,
+        ADM_CPU_3DNOW  =1<<3,
+        ADM_CPU_3DNOWEXT  =1<<4,
+        ADM_CPU_SSE    =1<<5,
+        ADM_CPU_SSE2   =1<<6,
+		ADM_CPU_SSE3   =1<<7,
+		ADM_CPU_SSSE3  =1<<8,
+        ADM_CPU_ALTIVEC=1<<9,
+        
+        ADM_CPU_ALL=0xffffffff
+} ADM_CPU_CAPS;
+
+class CpuCaps
+{
+public:
+        static uint32_t      myCpuCaps;
+        static uint32_t      myCpuMask;
+public:
+	static void 	init( void);
+	static uint8_t 	hasMMX (void) {CHECK_Z(MMX)};
+	static uint8_t 	hasMMXEXT (void){CHECK_Z(MMXEXT)};
+	static uint8_t 	has3DNOW (void) {CHECK_Z(3DNOW)};
+	static uint8_t 	hasSSE (void) {CHECK_Z(SSE)};
+	static uint8_t 	hasSSE2 (void){CHECK_Z(SSE2)};
+	static uint8_t 	hasSSE3 (void){CHECK_Z(SSE3)};
+	static uint8_t 	hasSSSE3 (void){CHECK_Z(SSSE3)};
+	static uint8_t 	has3DNOWEXT(void){CHECK_Z(3DNOWEXT)};
+
+
+};
+
+#if (defined( ARCH_X86)  || defined(ARCH_X86_64)) && defined(HAVE_BUILTIN_VECTOR)
+#define USE_SSE 1
+#endif

Copied: branches/avidemux_2.5_branch_mean/avidemux/ADM_core/include/ADM_fileio.h (from rev 3798, branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_utilities/ADM_fileio.h)
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_utilities/ADM_fileio.h	2008-02-22 19:47:14 UTC (rev 3798)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_core/include/ADM_fileio.h	2008-02-24 17:26:50 UTC (rev 3799)
@@ -0,0 +1,38 @@
+//
+// C++ Interface: %{MODULE}
+//
+// Description: 
+//
+//
+// Author: Mean fixounet at free.Fr, (C) 2005 GPL 2
+//
+// Copyright: See COPYING file that comes with this distribution
+//      This tries to implement bufferd output io
+//      to speed up things a bit
+//
+#ifndef ADM_FILE_IO
+#define ADM_FILE_IO
+
+
+
+class ADMFile
+{
+protected:
+        FILE            *_out;
+        uint32_t        _fill;
+        uint8_t         *_buffer;	  
+        uint64_t        _curPos;
+public:
+                        ADMFile();
+                        ~ADMFile();
+        uint8_t         open(FILE *in);
+        uint8_t         write(uint8_t *in, uint32_t size);
+        uint8_t         flush(void);
+        uint8_t         seek(uint64_t where);
+        uint64_t        tell(void);
+	  
+
+
+};
+
+#endif

Copied: branches/avidemux_2.5_branch_mean/avidemux/ADM_core/include/ADM_inttype.h (from rev 3798, branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_utilities/default.h)
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_utilities/default.h	2008-02-22 19:47:14 UTC (rev 3798)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_core/include/ADM_inttype.h	2008-02-24 17:26:50 UTC (rev 3799)
@@ -0,0 +1,111 @@
+/***************************************************************************
+                          default.h  -  description
+                             -------------------
+    begin                : Thu Nov 1 2001
+    copyright            : (C) 2001 by mean
+    email                : fixounet at free.fr
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+#ifndef __ZDEFAULT
+#define __ZDEFAULT
+
+#include "config.h"
+
+#include <stdio.h>
+#include <stdlib.h>
+#include <string.h>
+#ifdef HAVE_UNISTD_H
+#include <unistd.h>
+#endif
+
+/*
+   	The maximum width/height is MAXIMUM_SIZE 768*768 for now
+*/
+#define MAXIMUM_SIZE 2048
+
+typedef unsigned char ADM_filename ;
+
+#ifdef HAVE_STDINT_H
+#include <stdint.h>
+#define GOT_TYPES
+#endif
+
+#ifdef HAVE_INTTYPES_H
+	#define __STDC_FORMAT_MACROS
+	#include <inttypes.h>
+	#define GOT_TYPES
+#ifndef SCNu8
+#define SCNu8 "u"
+#endif
+#endif
+
+#ifndef GOT_TYPES
+#ifdef ARCH_64_BITS
+#define int32_t 	signed int
+#define int64_t 	signed long int 
+#define uint64_t 	unsigned long  int
+#else
+#define int32_t 	signed long  int
+#define int64_t 	signed long  long
+#define uint64_t 	unsigned long  long
+
+#endif
+#define uint8_t  	unsigned char
+#define int8_t   	signed char
+
+#define int16_t 	signed short int
+#define uint16_t 	unsigned short int
+#define uint32_t 	unsigned long  int
+
+#endif
+#define UNUSED_ARG(a) do {/* null */} while (&a == 0)
+
+#define MKFCC(a,b,c,d)   ((d<<24)+(c<<16)+(b<<8)+a)
+#define MKFCCR(a,b,c,d)   ((a<<24)+(b<<16)+(c<<8)+d)
+
+// 0 means error, 1 means ok, 2 means ignore
+// 2 is seldom used
+
+#define ADM_ERR 0
+#define ADM_OK 	1
+#define ADM_IGN 2
+
+/*
+ * Standard gettext macros.
+ */
+#ifdef HAVE_GETTEXT
+#  include <libintl.h>
+#  undef _
+#else
+#  define textdomain(String) (String)
+#  define gettext(String) (String)
+#  define dgettext(Domain,Message) (Message)
+#  define dcgettext(Domain,Message,Type) (Message)
+#  define bindtextdomain(Domain,Directory) (Domain)
+#endif
+
+extern const char* translate(const char *__domainname, const char *__msgid);
+
+#ifdef QT_TR_NOOP
+#undef QT_TR_NOOP
+#endif
+
+#define QT_TR_NOOP(String) translate (PACKAGE, String)
+
+#if (defined( HAVE_LIBESD) && defined(HAVE_ESD_H)) || \
+ defined(OSS_SUPPORT) || defined (USE_ARTS) || \
+  defined(USE_SDL) || defined(CONFIG_DARWIN) || \
+  defined(ADM_WIN32) || defined(ALSA_SUPPORT)
+  
+#define HAVE_AUDIO
+#endif
+               
+#endif

Copied: branches/avidemux_2.5_branch_mean/avidemux/ADM_core/include/ADM_mangle.h (from rev 3798, branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_utilities/admmangle.h)
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_utilities/admmangle.h	2008-02-22 19:47:14 UTC (rev 3798)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_core/include/ADM_mangle.h	2008-02-24 17:26:50 UTC (rev 3799)
@@ -0,0 +1,63 @@
+// Symbol mangling for asm
+// is different on win32
+// Shamelessly borrowed from lavcodec
+
+#ifdef CYG_MANGLING // CYGWIN
+	#define Mangle(x) "_" #x
+	#define MANGLE(x) "_" #x
+#else
+	#define Mangle(x) #x
+	#define MANGLE(x) #x
+#endif
+
+#define ADM_ALIGN16 ".p2align 4\n"
+/* Regiter renaming */
+#ifdef ARCH_X86_64
+#define REG_a  "rax" 
+#define REGa    rax 
+#define REGb    rbx 
+#define REGc    rcx 
+#define REG_b  "rbx"
+#define REG_c  "rcx" 
+#define REG_d  "rdx" 
+#define REG_S  "rsi" 
+#define REG_D  "rdi" 
+#define REGSP   rsp  
+#define REG_SP "rsp" 
+#define REG_BP "rbp" 
+#else
+#define REGa    eax  
+#define REGb    ebx 
+#define REGc    ecx 
+#define REG_a  "eax"  
+#define REG_b  "ebx" 
+#define REG_c  "ecx" 
+#define REG_d  "edx" 
+#define REG_S  "esi" 
+#define REG_D  "edi" 
+#define REG_SP "esp" 
+#define REGSP   esp  
+#define REG_BP "ebp" 
+#endif
+
+#define REG_ax "%%"REG_a
+#define REG_bx "%%"REG_b
+#define REG_cx "%%"REG_c
+#define REG_dx "%%"REG_d
+
+#define REG_si "%%"REG_S
+#define REG_di "%%"REG_D
+
+#define REG_sp "%%"REG_SP
+#define REG_bp "%%"REG_BP
+
+#ifndef attribute_used
+#if defined(__GNUC__) && (__GNUC__ > 3 || __GNUC__ == 3 && __GNUC_MINOR__ > 0)
+#    define attribute_used __attribute__((used))
+#else
+#    define attribute_used
+#endif
+#endif
+
+#define ASM_CONST attribute_used __attribute__ ((aligned(8)))
+

Copied: branches/avidemux_2.5_branch_mean/avidemux/ADM_core/include/ADM_misc.h (from rev 3798, branches/avidemux_2.5_branch_mean/avidemux/ADM_osSupport/ADM_misc.h)
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_osSupport/ADM_misc.h	2008-02-22 19:47:14 UTC (rev 3798)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_core/include/ADM_misc.h	2008-02-24 17:26:50 UTC (rev 3799)
@@ -0,0 +1,110 @@
+/***************************************************************************
+                          ADM_misc.h  -  description
+    copyright            : (C) 2001 by mean
+    email                : fixounet at free.fr
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+
+#ifndef __ADM_MISC__
+#define __ADM_MISC__
+//#include "time.h"
+
+typedef enum 
+{
+        ADM_LOG_NONE=0,
+        ADM_LOG_IMPORTANT=1,
+        ADM_LOG_INFO=2,
+        ADM_LOG_DEBUG=3
+  
+} ADM_LOG_LEVEL;
+typedef struct 
+{
+  uint32_t hours,minutes,seconds; 
+} ADM_date;
+void            TLK_getDate(ADM_date *date);
+void            PathSplit(char *str, char **root, char **ext);
+void	        PathStripName(char *str);
+const char      *GetFileName(const char *str);
+char            *PathCanonize(const char *tmpname);
+void            LowerCase(char *string);
+uint32_t        getTime( int called );;
+void            frame2time(uint32_t frame, uint32_t fps, uint16_t * hh, uint16_t * mm,
+                                uint16_t * ss, uint16_t * ms);
+void            time2frame(uint32_t *frame, uint32_t fps, uint32_t hh, uint32_t mm,
+                                uint32_t ss, uint32_t ms);
+void            ms2time(uint32_t len2,uint16_t * hh, uint16_t * mm,
+                                uint16_t * ss, uint16_t * ms);				
+char*			ms2timedisplay(uint32_t ms);
+uint32_t 		getTimeOfTheDay(void);
+uint64_t 	ADM_swap64(uint64_t in);
+uint32_t 	ADM_swap32(uint32_t in);
+uint16_t 	ADM_swap16(uint16_t in);
+inline uint32_t 		dontswap(uint32_t in) {return in;};
+char 		*ADM_rindex(const char *s, int c);
+char 		*ADM_index(const char *s, int c);
+void 		ADM_usleep(unsigned long us);
+uint8_t         ADM_fileExist(char *name);
+
+#ifdef HAVE_GETTIMEOFDAY
+	#define TIMZ struct timezone
+#else
+	#ifndef HAVE_STRUCT_TIMESPEC
+	#define HAVE_STRUCT_TIMESPEC
+	extern "C"
+	{
+		typedef struct timespec
+		{
+			time_t tv_sec;
+			long int tv_nsec;
+		};
+
+		void gettimeofday(struct timeval *p, void *tz);
+		};
+		#define timezone int
+		#define TIMZ int
+	#endif
+#endif
+
+#ifdef ADM_WIN32
+	#define PRIO_MIN -20
+	#define PRIO_MAX 20
+	#define PRIO_PROCESS 0
+
+	int getpriority(int which, int who);
+	int setpriority(int which, int who, int value);
+
+	#define RB_POWER_OFF 0x4321fedc
+	#define SHTDN_REASON_FLAG_PLANNED 0x80000000
+
+	int shutdown_win32(void);
+	void getWorkingArea(uint32_t *width, uint32_t *height);
+#else
+	#include <sys/resource.h>
+#endif
+
+bool shutdown(void);
+
+#define FRAME_PAL 1
+#define FRAME_FILM 2
+#define FRAME_NTSC 3
+
+uint8_t 	identMovieType(uint32_t fps1000); // identify the movie type (mainly for mpeg1/2) 
+uint8_t 	ms2time(uint32_t ms, uint32_t *h,uint32_t *m, uint32_t *s);
+#ifdef ADM_BIG_ENDIAN	
+	#define R64 ADM_swap64
+	#define R32 ADM_swap32
+	#define R16 ADM_swap16
+#else
+	#define R64(x) (x)
+	#define R32(x) (x) 
+	#define R16(x) (x) 
+#endif
+#endif

Copied: branches/avidemux_2.5_branch_mean/avidemux/ADM_core/include/ADM_threads.h (from rev 3798, branches/avidemux_2.5_branch_mean/avidemux/ADM_osSupport/ADM_threads.h)
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_osSupport/ADM_threads.h	2008-02-22 19:47:14 UTC (rev 3798)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_core/include/ADM_threads.h	2008-02-24 17:26:50 UTC (rev 3799)
@@ -0,0 +1,54 @@
+/***************************************************************************
+                    
+    copyright            : (C) 2006 by mean
+    email                : fixounet at free.fr
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+
+
+#ifndef ADM_THREADS_H
+#define ADM_THREADS_H
+
+#include <pthread.h>
+
+class admMutex
+{
+  private:
+    uint8_t       _locked;
+    const char    *_name;
+  public: 
+    pthread_mutex_t _tex;       
+    admMutex( const char *name=NULL);
+    ~admMutex();        
+    uint8_t lock(void);
+    uint8_t unlock(void);
+    uint8_t isLocked(void);
+};
+
+class admCond
+{
+  private:
+    pthread_cond_t  _cond;
+    admMutex        *_condtex;
+
+  public:        
+    uint8_t         waiting;
+    uint8_t         aborted;
+    admCond( admMutex *tex);
+    ~admCond();        
+    uint8_t wait(void);
+    uint8_t wakeup(void);
+    uint8_t iswaiting(void);
+    uint8_t abort(void);
+                
+};
+extern admMutex sharedMutex;
+#endif

Deleted: branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_utilities/ADM_fileio.h
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_utilities/ADM_fileio.h	2008-02-22 19:47:14 UTC (rev 3798)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_utilities/ADM_fileio.h	2008-02-24 17:26:50 UTC (rev 3799)
@@ -1,38 +0,0 @@
-//
-// C++ Interface: %{MODULE}
-//
-// Description: 
-//
-//
-// Author: Mean fixounet at free.Fr, (C) 2005 GPL 2
-//
-// Copyright: See COPYING file that comes with this distribution
-//      This tries to implement bufferd output io
-//      to speed up things a bit
-//
-#ifndef ADM_FILE_IO
-#define ADM_FILE_IO
-
-
-
-class ADMFile
-{
-protected:
-        FILE            *_out;
-        uint32_t        _fill;
-        uint8_t         *_buffer;	  
-        uint64_t        _curPos;
-public:
-                        ADMFile();
-                        ~ADMFile();
-        uint8_t         open(FILE *in);
-        uint8_t         write(uint8_t *in, uint32_t size);
-        uint8_t         flush(void);
-        uint8_t         seek(uint64_t where);
-        uint64_t        tell(void);
-	  
-
-
-};
-
-#endif

Deleted: branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_utilities/admmangle.h
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_utilities/admmangle.h	2008-02-22 19:47:14 UTC (rev 3798)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_utilities/admmangle.h	2008-02-24 17:26:50 UTC (rev 3799)
@@ -1,63 +0,0 @@
-// Symbol mangling for asm
-// is different on win32
-// Shamelessly borrowed from lavcodec
-
-#ifdef CYG_MANGLING // CYGWIN
-	#define Mangle(x) "_" #x
-	#define MANGLE(x) "_" #x
-#else
-	#define Mangle(x) #x
-	#define MANGLE(x) #x
-#endif
-
-#define ADM_ALIGN16 ".p2align 4\n"
-/* Regiter renaming */
-#ifdef ARCH_X86_64
-#define REG_a  "rax" 
-#define REGa    rax 
-#define REGb    rbx 
-#define REGc    rcx 
-#define REG_b  "rbx"
-#define REG_c  "rcx" 
-#define REG_d  "rdx" 
-#define REG_S  "rsi" 
-#define REG_D  "rdi" 
-#define REGSP   rsp  
-#define REG_SP "rsp" 
-#define REG_BP "rbp" 
-#else
-#define REGa    eax  
-#define REGb    ebx 
-#define REGc    ecx 
-#define REG_a  "eax"  
-#define REG_b  "ebx" 
-#define REG_c  "ecx" 
-#define REG_d  "edx" 
-#define REG_S  "esi" 
-#define REG_D  "edi" 
-#define REG_SP "esp" 
-#define REGSP   esp  
-#define REG_BP "ebp" 
-#endif
-
-#define REG_ax "%%"REG_a
-#define REG_bx "%%"REG_b
-#define REG_cx "%%"REG_c
-#define REG_dx "%%"REG_d
-
-#define REG_si "%%"REG_S
-#define REG_di "%%"REG_D
-
-#define REG_sp "%%"REG_SP
-#define REG_bp "%%"REG_BP
-
-#ifndef attribute_used
-#if defined(__GNUC__) && (__GNUC__ > 3 || __GNUC__ == 3 && __GNUC_MINOR__ > 0)
-#    define attribute_used __attribute__((used))
-#else
-#    define attribute_used
-#endif
-#endif
-
-#define ASM_CONST attribute_used __attribute__ ((aligned(8)))
-

Deleted: branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_utilities/default.h
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_utilities/default.h	2008-02-22 19:47:14 UTC (rev 3798)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_utilities/default.h	2008-02-24 17:26:50 UTC (rev 3799)
@@ -1,111 +0,0 @@
-/***************************************************************************
-                          default.h  -  description
-                             -------------------
-    begin                : Thu Nov 1 2001
-    copyright            : (C) 2001 by mean
-    email                : fixounet at free.fr
- ***************************************************************************/
-
-/***************************************************************************
- *                                                                         *
- *   This program is free software; you can redistribute it and/or modify  *
- *   it under the terms of the GNU General Public License as published by  *
- *   the Free Software Foundation; either version 2 of the License, or     *
- *   (at your option) any later version.                                   *
- *                                                                         *
- ***************************************************************************/
-#ifndef __ZDEFAULT
-#define __ZDEFAULT
-
-#include "config.h"
-
-#include <stdio.h>
-#include <stdlib.h>
-#include <string.h>
-#ifdef HAVE_UNISTD_H
-#include <unistd.h>
-#endif
-
-/*
-   	The maximum width/height is MAXIMUM_SIZE 768*768 for now
-*/
-#define MAXIMUM_SIZE 2048
-
-typedef unsigned char ADM_filename ;
-
-#ifdef HAVE_STDINT_H
-#include <stdint.h>
-#define GOT_TYPES
-#endif
-
-#ifdef HAVE_INTTYPES_H
-	#define __STDC_FORMAT_MACROS
-	#include <inttypes.h>
-	#define GOT_TYPES
-#ifndef SCNu8
-#define SCNu8 "u"
-#endif
-#endif
-
-#ifndef GOT_TYPES
-#ifdef ARCH_64_BITS
-#define int32_t 	signed int
-#define int64_t 	signed long int 
-#define uint64_t 	unsigned long  int
-#else
-#define int32_t 	signed long  int
-#define int64_t 	signed long  long
-#define uint64_t 	unsigned long  long
-
-#endif
-#define uint8_t  	unsigned char
-#define int8_t   	signed char
-
-#define int16_t 	signed short int
-#define uint16_t 	unsigned short int
-#define uint32_t 	unsigned long  int
-
-#endif
-#define UNUSED_ARG(a) do {/* null */} while (&a == 0)
-
-#define MKFCC(a,b,c,d)   ((d<<24)+(c<<16)+(b<<8)+a)
-#define MKFCCR(a,b,c,d)   ((a<<24)+(b<<16)+(c<<8)+d)
-
-// 0 means error, 1 means ok, 2 means ignore
-// 2 is seldom used
-
-#define ADM_ERR 0
-#define ADM_OK 	1
-#define ADM_IGN 2
-
-/*
- * Standard gettext macros.
- */
-#ifdef HAVE_GETTEXT
-#  include <libintl.h>
-#  undef _
-#else
-#  define textdomain(String) (String)
-#  define gettext(String) (String)
-#  define dgettext(Domain,Message) (Message)
-#  define dcgettext(Domain,Message,Type) (Message)
-#  define bindtextdomain(Domain,Directory) (Domain)
-#endif
-
-extern const char* translate(const char *__domainname, const char *__msgid);
-
-#ifdef QT_TR_NOOP
-#undef QT_TR_NOOP
-#endif
-
-#define QT_TR_NOOP(String) translate (PACKAGE, String)
-
-#if (defined( HAVE_LIBESD) && defined(HAVE_ESD_H)) || \
- defined(OSS_SUPPORT) || defined (USE_ARTS) || \
-  defined(USE_SDL) || defined(CONFIG_DARWIN) || \
-  defined(ADM_WIN32) || defined(ALSA_SUPPORT)
-  
-#define HAVE_AUDIO
-#endif
-               
-#endif

Deleted: branches/avidemux_2.5_branch_mean/avidemux/ADM_osSupport/ADM_cpuCap.h
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_osSupport/ADM_cpuCap.h	2008-02-22 19:47:14 UTC (rev 3798)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_osSupport/ADM_cpuCap.h	2008-02-24 17:26:50 UTC (rev 3799)
@@ -1,57 +0,0 @@
-//
-// C++ Interface: ADM_cpuCap
-//
-// Description: 
-//
-//
-// Author: mean <fixounet at free.fr>, (C) 2004
-//
-// Copyright: See COPYING file that comes with this distribution
-//
-//
-#if defined(ARCH_X86_64) ||defined(ARCH_X86)
-
-#define CHECK_Z(x) {if(CpuCaps::myCpuCaps & ADM_CPU_##x & CpuCaps::myCpuMask) return 1; else return 0;} 
-
-#else
-#define         CHECK_Z(x) {return 0;}
-#endif
-
-typedef enum 
-{
-        ADM_CPU_NONE   =1,
-        ADM_CPU_MMX    =1<<1,
-        ADM_CPU_MMXEXT =1<<2,
-        ADM_CPU_3DNOW  =1<<3,
-        ADM_CPU_3DNOWEXT  =1<<4,
-        ADM_CPU_SSE    =1<<5,
-        ADM_CPU_SSE2   =1<<6,
-		ADM_CPU_SSE3   =1<<7,
-		ADM_CPU_SSSE3  =1<<8,
-        ADM_CPU_ALTIVEC=1<<9,
-        
-        ADM_CPU_ALL=0xffffffff
-} ADM_CPU_CAPS;
-
-class CpuCaps
-{
-public:
-        static uint32_t      myCpuCaps;
-        static uint32_t      myCpuMask;
-public:
-	static void 	init( void);
-	static uint8_t 	hasMMX (void) {CHECK_Z(MMX)};
-	static uint8_t 	hasMMXEXT (void){CHECK_Z(MMXEXT)};
-	static uint8_t 	has3DNOW (void) {CHECK_Z(3DNOW)};
-	static uint8_t 	hasSSE (void) {CHECK_Z(SSE)};
-	static uint8_t 	hasSSE2 (void){CHECK_Z(SSE2)};
-	static uint8_t 	hasSSE3 (void){CHECK_Z(SSE3)};
-	static uint8_t 	hasSSSE3 (void){CHECK_Z(SSSE3)};
-	static uint8_t 	has3DNOWEXT(void){CHECK_Z(3DNOWEXT)};
-
-
-};
-
-#if (defined( ARCH_X86)  || defined(ARCH_X86_64)) && defined(HAVE_BUILTIN_VECTOR)
-#define USE_SSE 1
-#endif

Deleted: branches/avidemux_2.5_branch_mean/avidemux/ADM_osSupport/ADM_misc.h
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_osSupport/ADM_misc.h	2008-02-22 19:47:14 UTC (rev 3798)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_osSupport/ADM_misc.h	2008-02-24 17:26:50 UTC (rev 3799)
@@ -1,110 +0,0 @@
-/***************************************************************************
-                          ADM_misc.h  -  description
-    copyright            : (C) 2001 by mean
-    email                : fixounet at free.fr
- ***************************************************************************/
-
-/***************************************************************************
- *                                                                         *
- *   This program is free software; you can redistribute it and/or modify  *
- *   it under the terms of the GNU General Public License as published by  *
- *   the Free Software Foundation; either version 2 of the License, or     *
- *   (at your option) any later version.                                   *
- *                                                                         *
- ***************************************************************************/
-
-#ifndef __ADM_MISC__
-#define __ADM_MISC__
-//#include "time.h"
-
-typedef enum 
-{
-        ADM_LOG_NONE=0,
-        ADM_LOG_IMPORTANT=1,
-        ADM_LOG_INFO=2,
-        ADM_LOG_DEBUG=3
-  
-} ADM_LOG_LEVEL;
-typedef struct 
-{
-  uint32_t hours,minutes,seconds; 
-} ADM_date;
-void            TLK_getDate(ADM_date *date);
-void            PathSplit(char *str, char **root, char **ext);
-void	        PathStripName(char *str);
-const char      *GetFileName(const char *str);
-char            *PathCanonize(const char *tmpname);
-void            LowerCase(char *string);
-uint32_t        getTime( int called );;
-void            frame2time(uint32_t frame, uint32_t fps, uint16_t * hh, uint16_t * mm,
-                                uint16_t * ss, uint16_t * ms);
-void            time2frame(uint32_t *frame, uint32_t fps, uint32_t hh, uint32_t mm,
-                                uint32_t ss, uint32_t ms);
-void            ms2time(uint32_t len2,uint16_t * hh, uint16_t * mm,
-                                uint16_t * ss, uint16_t * ms);				
-char*			ms2timedisplay(uint32_t ms);
-uint32_t 		getTimeOfTheDay(void);
-uint64_t 	ADM_swap64(uint64_t in);
-uint32_t 	ADM_swap32(uint32_t in);
-uint16_t 	ADM_swap16(uint16_t in);
-inline uint32_t 		dontswap(uint32_t in) {return in;};
-char 		*ADM_rindex(const char *s, int c);
-char 		*ADM_index(const char *s, int c);
-void 		ADM_usleep(unsigned long us);
-uint8_t         ADM_fileExist(char *name);
-
-#ifdef HAVE_GETTIMEOFDAY
-	#define TIMZ struct timezone
-#else
-	#ifndef HAVE_STRUCT_TIMESPEC
-	#define HAVE_STRUCT_TIMESPEC
-	extern "C"
-	{
-		typedef struct timespec
-		{
-			time_t tv_sec;
-			long int tv_nsec;
-		};
-
-		void gettimeofday(struct timeval *p, void *tz);
-		};
-		#define timezone int
-		#define TIMZ int
-	#endif
-#endif
-
-#ifdef ADM_WIN32
-	#define PRIO_MIN -20
-	#define PRIO_MAX 20
-	#define PRIO_PROCESS 0
-
-	int getpriority(int which, int who);
-	int setpriority(int which, int who, int value);
-
-	#define RB_POWER_OFF 0x4321fedc
-	#define SHTDN_REASON_FLAG_PLANNED 0x80000000
-
-	int shutdown_win32(void);
-	void getWorkingArea(uint32_t *width, uint32_t *height);
-#else
-	#include <sys/resource.h>
-#endif
-
-bool shutdown(void);
-
-#define FRAME_PAL 1
-#define FRAME_FILM 2
-#define FRAME_NTSC 3
-
-uint8_t 	identMovieType(uint32_t fps1000); // identify the movie type (mainly for mpeg1/2) 
-uint8_t 	ms2time(uint32_t ms, uint32_t *h,uint32_t *m, uint32_t *s);
-#ifdef ADM_BIG_ENDIAN	
-	#define R64 ADM_swap64
-	#define R32 ADM_swap32
-	#define R16 ADM_swap16
-#else
-	#define R64(x) (x)
-	#define R32(x) (x) 
-	#define R16(x) (x) 
-#endif
-#endif

Deleted: branches/avidemux_2.5_branch_mean/avidemux/ADM_osSupport/ADM_threads.h
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_osSupport/ADM_threads.h	2008-02-22 19:47:14 UTC (rev 3798)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_osSupport/ADM_threads.h	2008-02-24 17:26:50 UTC (rev 3799)
@@ -1,54 +0,0 @@
-/***************************************************************************
-                    
-    copyright            : (C) 2006 by mean
-    email                : fixounet at free.fr
- ***************************************************************************/
-
-/***************************************************************************
- *                                                                         *
- *   This program is free software; you can redistribute it and/or modify  *
- *   it under the terms of the GNU General Public License as published by  *
- *   the Free Software Foundation; either version 2 of the License, or     *
- *   (at your option) any later version.                                   *
- *                                                                         *
- ***************************************************************************/
-
-
-#ifndef ADM_THREADS_H
-#define ADM_THREADS_H
-
-#include <pthread.h>
-
-class admMutex
-{
-  private:
-    uint8_t       _locked;
-    const char    *_name;
-  public: 
-    pthread_mutex_t _tex;       
-    admMutex( const char *name=NULL);
-    ~admMutex();        
-    uint8_t lock(void);
-    uint8_t unlock(void);
-    uint8_t isLocked(void);
-};
-
-class admCond
-{
-  private:
-    pthread_cond_t  _cond;
-    admMutex        *_condtex;
-
-  public:        
-    uint8_t         waiting;
-    uint8_t         aborted;
-    admCond( admMutex *tex);
-    ~admCond();        
-    uint8_t wait(void);
-    uint8_t wakeup(void);
-    uint8_t iswaiting(void);
-    uint8_t abort(void);
-                
-};
-extern admMutex sharedMutex;
-#endif

Deleted: branches/avidemux_2.5_branch_mean/avidemux/ADM_osSupport/TLK_clock.h
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_osSupport/TLK_clock.h	2008-02-22 19:47:14 UTC (rev 3798)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_osSupport/TLK_clock.h	2008-02-24 17:26:50 UTC (rev 3799)
@@ -1,16 +0,0 @@
-//
-#ifndef __CLK__
-#define __CLK__
-class Clock
-{
-	private: uint32_t _startTime;
-
-	public:
-			Clock(void );
-			~Clock( );
-			uint32_t getElapsedMS( void );
-			uint8_t reset( void );
-
-
-};
-#endif

Copied: branches/avidemux_2.5_branch_mean/avidemux/ADM_video/ADM_vidMisc.h (from rev 3798, branches/avidemux_2.5_branch_mean/avidemux/ADM_osSupport/ADM_misc.h)
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_osSupport/ADM_misc.h	2008-02-22 19:47:14 UTC (rev 3798)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_video/ADM_vidMisc.h	2008-02-24 17:26:50 UTC (rev 3799)
@@ -0,0 +1,110 @@
+/***************************************************************************
+                          ADM_misc.h  -  description
+    copyright            : (C) 2001 by mean
+    email                : fixounet at free.fr
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+
+#ifndef __ADM_MISC__
+#define __ADM_MISC__
+//#include "time.h"
+
+typedef enum 
+{
+        ADM_LOG_NONE=0,
+        ADM_LOG_IMPORTANT=1,
+        ADM_LOG_INFO=2,
+        ADM_LOG_DEBUG=3
+  
+} ADM_LOG_LEVEL;
+typedef struct 
+{
+  uint32_t hours,minutes,seconds; 
+} ADM_date;
+void            TLK_getDate(ADM_date *date);
+void            PathSplit(char *str, char **root, char **ext);
+void	        PathStripName(char *str);
+const char      *GetFileName(const char *str);
+char            *PathCanonize(const char *tmpname);
+void            LowerCase(char *string);
+uint32_t        getTime( int called );;
+void            frame2time(uint32_t frame, uint32_t fps, uint16_t * hh, uint16_t * mm,
+                                uint16_t * ss, uint16_t * ms);
+void            time2frame(uint32_t *frame, uint32_t fps, uint32_t hh, uint32_t mm,
+                                uint32_t ss, uint32_t ms);
+void            ms2time(uint32_t len2,uint16_t * hh, uint16_t * mm,
+                                uint16_t * ss, uint16_t * ms);				
+char*			ms2timedisplay(uint32_t ms);
+uint32_t 		getTimeOfTheDay(void);
+uint64_t 	ADM_swap64(uint64_t in);
+uint32_t 	ADM_swap32(uint32_t in);
+uint16_t 	ADM_swap16(uint16_t in);
+inline uint32_t 		dontswap(uint32_t in) {return in;};
+char 		*ADM_rindex(const char *s, int c);
+char 		*ADM_index(const char *s, int c);
+void 		ADM_usleep(unsigned long us);
+uint8_t         ADM_fileExist(char *name);
+
+#ifdef HAVE_GETTIMEOFDAY
+	#define TIMZ struct timezone
+#else
+	#ifndef HAVE_STRUCT_TIMESPEC
+	#define HAVE_STRUCT_TIMESPEC
+	extern "C"
+	{
+		typedef struct timespec
+		{
+			time_t tv_sec;
+			long int tv_nsec;
+		};
+
+		void gettimeofday(struct timeval *p, void *tz);
+		};
+		#define timezone int
+		#define TIMZ int
+	#endif
+#endif
+
+#ifdef ADM_WIN32
+	#define PRIO_MIN -20
+	#define PRIO_MAX 20
+	#define PRIO_PROCESS 0
+
+	int getpriority(int which, int who);
+	int setpriority(int which, int who, int value);
+
+	#define RB_POWER_OFF 0x4321fedc
+	#define SHTDN_REASON_FLAG_PLANNED 0x80000000
+
+	int shutdown_win32(void);
+	void getWorkingArea(uint32_t *width, uint32_t *height);
+#else
+	#include <sys/resource.h>
+#endif
+
+bool shutdown(void);
+
+#define FRAME_PAL 1
+#define FRAME_FILM 2
+#define FRAME_NTSC 3
+
+uint8_t 	identMovieType(uint32_t fps1000); // identify the movie type (mainly for mpeg1/2) 
+uint8_t 	ms2time(uint32_t ms, uint32_t *h,uint32_t *m, uint32_t *s);
+#ifdef ADM_BIG_ENDIAN	
+	#define R64 ADM_swap64
+	#define R32 ADM_swap32
+	#define R16 ADM_swap16
+#else
+	#define R64(x) (x)
+	#define R32(x) (x) 
+	#define R16(x) (x) 
+#endif
+#endif



From mean at mail.berlios.de  Sun Feb 24 18:30:58 2008
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sun, 24 Feb 2008 18:30:58 +0100
Subject: [Avidemux-svn-commit] r3800 - in branches/avidemux_2.5_branch_mean:
 . avidemux avidemux/ADM_audio avidemux/ADM_audiocodec
 avidemux/ADM_audiodevice avidemux/ADM_audiofilter avidemux/ADM_codecs
 avidemux/ADM_colorspace avidemux/ADM_core/include avidemux/ADM_editor
 avidemux/ADM_encoder avidemux/ADM_filter avidemux/ADM_infoExtractor
 avidemux/ADM_inputs/ADM_amv avidemux/ADM_inputs/ADM_asf
 avidemux/ADM_inputs/ADM_avsproxy avidemux/ADM_inputs/ADM_flv
 avidemux/ADM_inputs/ADM_h263 avidemux/ADM_inputs/ADM_inpics
 avidemux/ADM_inputs/ADM_matroska avidemux/ADM_inputs/ADM_mp4
 avidemux/ADM_inputs/ADM_mpegdemuxer avidemux/ADM_inputs/ADM_nuv
 avidemux/ADM_inputs/ADM_ogm avidemux/ADM_inputs/ADM_openDML
 avidemux/ADM_libraries/ADM_lavformat avidemux/ADM_libraries/ADM_libMad
 avidemux/ADM_libraries/ADM_libMpeg2Dec avidemux/ADM_libraries/ADM_liba52
 avidemux/ADM_libraries/ADM_libmpeg2enc
 avidemux/ADM_libraries/ADM_libswscale avidemux/ADM_libraries/ADM_libwrapper
 avidemux/ADM_libraries/ADM_lvemux avidemux/ADM_libr! aries/ADM_mplex
 avidemux/ADM_libraries/ADM_utilities avidemux/ADM_libraries/ADM_xvidratectl
 avidemux/ADM_ocr avidemux/ADM_osSupport avidemux/ADM_outputs/oplug_avi
 avidemux/ADM_outputs/oplug_dummy avidemux/ADM_outputs/oplug_flv
 avidemux/ADM_outputs/oplug_mpeg avidemux/ADM_outputs/oplug_mpegFF
 avidemux/ADM_outputs/oplug_ogm avidemux/ADM_requant avidemux/ADM_script
 avidemux/ADM_toolkit avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog
 avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory
 avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters
 avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2
 avidemux/ADM_userInterfaces/ADM_GTK/ADM_ocr
 avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk
 avidemux/ADM_userInterfaces/ADM_NONE/ADM_dialog
 avidemux/ADM_userInterfaces/ADM_NONE/ADM_dialogFactory
 avidemux/ADM_userInterfaces/ADM_NONE/ADM_gui2
 avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog
 avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory
 avidemux/ADM_userInterfaces/ADM_QT4/ADM_filters avidemux/ADM_u!
 serInterfaces/ADM_QT4/ADM_gui avidemux/ADM_userInterfaces/ADM_! QT4/ADM_
Message-ID: <200802241730.m1OHUwgW008322@sheep.berlios.de>

Author: mean
Date: 2008-02-24 18:29:52 +0100 (Sun, 24 Feb 2008)
New Revision: 3800

Modified:
   branches/avidemux_2.5_branch_mean/CMakeLists.txt
   branches/avidemux_2.5_branch_mean/avidemux/ADM_audio/ADM_a52info.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_audio/ADM_aacinfo.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_audio/ADM_dcainfo.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_audio/ADM_mp3info.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_audio/audio_packetizer.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_audiocodec/ADM_codecac3.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_audiocodec/ADM_codecimaadpcm.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_audiocodec/ADM_codecmsadpcm.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_audiocodec/ADM_dca.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_audiodevice/ADM_deviceALSA.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_audiodevice/ADM_deviceArts.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_audiodevice/ADM_deviceAudioCore.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_audiodevice/ADM_deviceEsd.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_audiodevice/ADM_deviceJack.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_audiodevice/ADM_deviceoss.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_audiofilter/audio_raw.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_audiofilter/audiodeng_buildfilters.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_audiofilter/audioencoder.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_audiofilter/audioencoder_aften.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_audiofilter/audioencoder_faac.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_audiofilter/audioencoder_lame.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_audiofilter/audioencoder_lavcodec.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_audiofilter/audioencoder_pcm.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_audiofilter/audioencoder_twolame.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_audiofilter/audioencoder_vorbis.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_audiofilter/audioeng_buff.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_audiofilter/audioeng_process.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_audiofilter/audiofilter_buildchain.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_audiofilter/audiofilter_mixer.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_audiofilter/audiofilter_sox.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_audiofilter/audiolib_sox.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_codecs/ADM_codecs.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_codecs/ADM_ffmp43.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_codecs/ADM_ffmpeg.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_codecs/ADM_mjpeg.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_codecs/ADM_mpeg.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_codecs/ADM_png.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_codecs/ADM_rgb16.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_codecs/ADM_theora_dec.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_codecs/ADM_uyvy.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_codecs/ADM_x264.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_codecs/ADM_xvid.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_codecs/ADM_xvid4.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_colorspace/ADM_colorspace.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_colorspace/ADM_rgb.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_colorspace/rgb2yuv.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_colorspace/yuv.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_core/include/ADM_misc.h
   branches/avidemux_2.5_branch_mean/avidemux/ADM_editor/ADM_edCache.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_encoder/adm_encx264.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_filter/filter_saveload.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_filter/vidVCD.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_infoExtractor/ADM_infoextractor.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_amv/ADM_amv.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_amv/ADM_amvAudio.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_asf/ADM_asf.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_asf/ADM_asfChunk.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_asf/ADM_asfPacket.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_asf/ADM_asf_audio.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_avsproxy/ADM_avsproxy.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_avsproxy/ADM_avsproxy_net.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_flv/ADM_flv.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_flv/ADM_flvAudio.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_flv/ADM_flvIndex.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_h263/ADM_h263.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_h263/ADM_mp4.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_h263/bitsRead.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_inpics/ADM_pics.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_matroska/ADM_mkv.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_matroska/ADM_mkvEntries.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_matroska/ADM_mkvIndexer.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_matroska/ADM_mkvTrackType.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_matroska/ADM_mkv_audio.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_matroska/ebml.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_mp4/ADM_atom.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_mp4/ADM_mp4.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_mp4/ADM_mp4Analyzer.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_mp4/ADM_mp4Indexer.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_mp4/ADM_mp4Leaf.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_mp4/ADM_mp4audio.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_mpegdemuxer/dmx_audio.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_mpegdemuxer/dmx_demuxer.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_mpegdemuxer/dmx_demuxerES.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_mpegdemuxer/dmx_demuxerMSDVR.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_mpegdemuxer/dmx_demuxerPS.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_mpegdemuxer/dmx_demuxerTS.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_mpegdemuxer/dmx_identify.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_mpegdemuxer/dmx_indexer.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_mpegdemuxer/dmx_indexer_h264.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_mpegdemuxer/dmx_indexer_mpeg2.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_mpegdemuxer/dmx_io.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_mpegdemuxer/dmx_probe.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_mpegdemuxer/dmx_probeTS.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_mpegdemuxer/dmx_video.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_nuv/ADM_nuv.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_nuv/ADM_nuvAudio.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_nuv/RTjpeg.c
   branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_nuv/RTjpeg.h
   branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_nuv/RTjpegN.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_nuv/RToldformat.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_ogm/ADM_ogm.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_ogm/ADM_ogmpages.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_ogm/ADM_ogmreorder.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_openDML/ADM_odml_audio.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_openDML/ADM_odml_odml.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_openDML/ADM_odml_regular.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_openDML/ADM_openDML.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_openDML/ADM_openDMLDepack.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_openDML/ADM_opendml_reindex.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_openDML/ADM_opendml_reorder.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_openDML/ADM_riff.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_lavformat/ADM_lavformat.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_lavformat/ADM_muxts.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_libMad/fixed.h
   branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_libMad/madmem.h
   branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_libMpeg2Dec/alloc.c
   branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_liba52/parse.c
   branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_libmpeg2enc/ADM_mpe2enc.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_libmpeg2enc/cpu_accel.cc
   branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_libmpeg2enc/motion.cc
   branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_libmpeg2enc/quantize_ref.cc
   branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_libmpeg2enc/readpic.cc
   branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_libmpeg2enc/transfrm_ref.cc
   branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_libswscale/ADM_mp.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_libswscale/rgb2rgb.c
   branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_libswscale/swscale.c
   branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_libswscale/wrapper.h
   branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_libswscale/yuv2rgb.c
   branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_libwrapper/libwrapper.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_libwrapper/libwrapper_amrnb.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_libwrapper/libwrapper_dca.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_libwrapper/libwrapper_global.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_lvemux/ADM_muxer.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_mplex/ADM_mplexin.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_mplex/ADM_mplexmuxer.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_mplex/ADM_mplexout.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_mplex/ADM_mthread.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_mplex/ADM_mthread.h
   branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_mplex/ADM_transfert.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_mplex/ADM_transfert.h
   branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_utilities/ADM_bitstream.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_utilities/ADM_fileio.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_utilities/ADM_image.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_utilities/ADM_image.h
   branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_utilities/ADM_imageLoader.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_utilities/ADM_imageResizer.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_utilities/ADM_imageUtils.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_utilities/ADM_pp.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_utilities/ADM_print.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_utilities/avifmt.h
   branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_utilities/fourcc.h
   branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_utilities/prefs.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_xvidratectl/ADM_xvidratectl.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_xvidratectl/ADM_xvidratectlVBV.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_ocr/ADM_bitmapSource.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_ocr/ADM_ocr.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_ocr/ADM_ocrEngine.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_ocr/ADM_vob2vobsub.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_ocr/adm_glyph.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_ocr/adm_glyph.h
   branches/avidemux_2.5_branch_mean/avidemux/ADM_osSupport/ADM_cpuCap.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_osSupport/ADM_crashdump.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_osSupport/ADM_debug.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_osSupport/ADM_fileio.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_osSupport/ADM_memcpy.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_osSupport/ADM_memsupport.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_osSupport/ADM_misc.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_osSupport/ADM_queue.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_osSupport/ADM_quota.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_osSupport/ADM_threads.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_osSupport/TLK_clock.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_osSupport/win32.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_outputs/oplug_avi/op_avisave.h
   branches/avidemux_2.5_branch_mean/avidemux/ADM_outputs/oplug_dummy/oplug_dummy.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_outputs/oplug_mpeg/op_mpegpass.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_outputs/oplug_ogm/op_ogpage.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_outputs/oplug_ogm/op_ogsave.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_outputs/oplug_ogm/op_ogsavecopy.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_outputs/oplug_ogm/op_ogsaveprocess.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_preview.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_requant/tcrequant.c
   branches/avidemux_2.5_branch_mean/avidemux/ADM_script/ADM_JSAvidemux.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_script/ADM_JSAvidemuxAudio.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_script/ADM_JSAvidemuxVideo.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_script/ADM_JSFunctions.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_script/ADM_JSGlobal.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_toolkit/ADM_audioQueue.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_toolkit/ADM_intfloat.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_toolkit/ADM_packetQueue.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_toolkit/ADM_packetQueue.h
   branches/avidemux_2.5_branch_mean/avidemux/ADM_toolkit/automation.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_toolkit/toolkit.hxx
   branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_SwissArmyKnife.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_about.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_acodec.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_asharp.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_busy.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_chromaShift.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_cnr2.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_coloryuv.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_contrast.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_crop.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_eq2.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_equalizer.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_eraser.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_exLame.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_flyDialog.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_hue.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_idx_pg.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs_save.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_mpdelogo.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_ocr.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_partial.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_particle.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_pause.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_pipe.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_preview.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_quota.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_recent.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_resize.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_srt.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_threshold.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_vcodec.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_vobsub.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_working.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/DIA_color.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/DIA_dialogFactory.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/DIA_filesel.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_bar.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_bitrate.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_button.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_float.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_frame.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_hex.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_integer.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_matrix.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_menu.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_notch.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_readOnlyText.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_threadCount.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_toggle.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_bindings.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_gtkRender.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_keymap.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_ocr/adm_editglyph.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_ocr/adm_ocr.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_ocr/adm_sup.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/ADM_gladeSupport.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/ADM_gladeSupport.h
   branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/ADM_tray_gtk.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/TLK_filesel.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/choice.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/eggtrayicon.c
   branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/toolkit.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/toolkit_dialog.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/toolkit_gtk.h
   branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/toolkit_gtk_include.h
   branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_NONE/ADM_dialog/DIA_busy.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_NONE/ADM_dialog/DIA_encoding.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_NONE/ADM_dialog/DIA_flyDialog.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_NONE/ADM_dialog/DIA_indexing.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_NONE/ADM_dialog/DIA_none.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_NONE/ADM_dialog/DIA_working.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_NONE/ADM_dialog/OCR_none.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_NONE/ADM_dialog/alert_none.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_NONE/ADM_dialogFactory/DIA_dialogFactory.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_NONE/ADM_dialogFactory/FAC_toggle.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_NONE/ADM_gui2/file_none.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_NONE/ADM_gui2/gui_none.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_busy.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_none.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_srt.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_x264.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_xvid4.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/OCR_none.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_asharp.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_chromashift.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_contrast.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_crop.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_encoding.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_eq2.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_hue.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_jobs.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_props.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_resizing.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_srt.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_vobsub.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_working.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/T_QCanvas.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/T_flyDialog.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/T_index_pg.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/alert_qt4.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/FAC_bar.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/FAC_float.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/FAC_frame.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/FAC_hex.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/FAC_integer.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/FAC_matrix.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/FAC_notch.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/FAC_readOnlyText.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_bitrate.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_button.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_dialogFactory.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_filesel.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_menu.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_slider.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_threadCount.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_toggle.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_QT4/ADM_filters/Q_mainfilter.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/Q_gui2.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/file_qt4.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_QT4/ADM_ocr/Q_ocr.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_SVCD.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_animated.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioconfig.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_bitrateHisto.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_encoding.h
   branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_enter.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flv1.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flyAsharp.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flyChromaShift.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flyContrast.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flyCrop.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flyDialog.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flyEq2.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flyEraser.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flyHue.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flyParticle.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flySrtPos.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flySwissArmyKnife.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flyThreshold.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_gototime.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_idx_pg.h
   branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavDecoder.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_mjpeg.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_postproc.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_requant.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_resizeWiz.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_srt.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tsSub.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_v2v.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_working.h
   branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_commonUI/GUI_render.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_commonUI/GUI_sdlRender.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_commonUI/GUI_xvRender.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_video/ADM_cache.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_video/ADM_cache.h
   branches/avidemux_2.5_branch_mean/avidemux/ADM_video/ADM_confCouples.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_video/ADM_interlaced.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_video/ADM_vidCNR2.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_video/ADM_vidClean.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_video/ADM_vidColorYuv.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_video/ADM_vidEqualizer.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_video/ADM_vidFieldUnblend.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_video/ADM_vidFieldUtil.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_video/ADM_vidFont.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_video/ADM_vidMPdelogo.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_video/ADM_vidMisc.h
   branches/avidemux_2.5_branch_mean/avidemux/ADM_video/ADM_vidPartial.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_guiResize.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_lavpp_deint.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_resizebis.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_resizeter.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidASS.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidAddBorder.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidAnimated.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidAsharp.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidBSmear.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidBlend.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidBlendRemoval.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidChroma.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidChromaShift.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidComputeAverage.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidContrast.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidCrop.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidDGbob.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidDecDec.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidDecTelecide.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidDeintASM.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidDeinterlace.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidDelta.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidDenoise.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidDropOut.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidDvbSub.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidEq2.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidEraser.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidFade.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidFastConvolution.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidFields.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidFlipV.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidFlux.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidForcedPP.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidHardIvtcRemoval.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidHue.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidKernelDeint.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidLargeMedian.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidLogo.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidLuma.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidMPLD3D.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidMPLD3Dlow.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidMPLResize.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidMSharpen.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidMcDeint.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidMosaic.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidMsmooth.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidPalShift.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidPalSmart.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidParticle.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidPulldown.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidResampleFPS.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidReverse.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidRotate.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidSRT.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidSRTRender.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidSRTload.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidSeparateField.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidSoften.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidStabilize.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidSwapFields.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidSwapSmart.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidTdeint.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidThreshold.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidUVSwap.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidUnblend.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidVlad.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidVobSubRender.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidWhirl.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidYadif.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidYadif_asm.c
   branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vobsubinfo.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADMmpdetc.cpp
   branches/avidemux_2.5_branch_mean/avidemux/GUI_jobs.cpp
   branches/avidemux_2.5_branch_mean/avidemux/avi_vars.h
   branches/avidemux_2.5_branch_mean/avidemux/gtk_gui.cpp
   branches/avidemux_2.5_branch_mean/avidemux/gui_navigate.cpp
   branches/avidemux_2.5_branch_mean/avidemux/main.cpp
   branches/avidemux_2.5_branch_mean/avidemux/prefs.h
Log:
[All] Cleanup and begin to separate core


Modified: branches/avidemux_2.5_branch_mean/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_mean/CMakeLists.txt	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/CMakeLists.txt	2008-02-24 17:29:52 UTC (rev 3800)
@@ -196,6 +196,7 @@
 include_DIRECTORIES(${CMAKE_CURRENT_BINARY_DIR} ${CMAKE_SOURCE_DIR}/avidemux ${CMAKE_SOURCE_DIR}/avidemux/ADM_libraries)
 include_directories(${CMAKE_SOURCE_DIR}/avidemux/ADM_libraries/ADM_utilities/ ${CMAKE_SOURCE_DIR}/avidemux/ADM_libraries/ADM_lavutil)
 include_directories(${CMAKE_SOURCE_DIR}/avidemux/ADM_libraries/ADM_lavcodec  )
+include_directories(${CMAKE_SOURCE_DIR}/avidemux/ADM_core/include  )
 
 #**********************************************
 # Some CFLAGS

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_audio/ADM_a52info.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_audio/ADM_a52info.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_audio/ADM_a52info.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -12,7 +12,7 @@
 
 #include "config.h"
 #include <stdio.h>
-#include "default.h"
+#include "ADM_default.h"
 #include <ADM_assert.h>
 #include "ADM_audio/ADM_a52info.h"
 

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_audio/ADM_aacinfo.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_audio/ADM_aacinfo.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_audio/ADM_aacinfo.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -27,7 +27,7 @@
 #include <math.h>
 
 
-#include "default.h"
+#include "ADM_default.h"
 #include "aviaudio.hxx"
 #include "ADM_audio/ADM_aacinfo.h"
 

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_audio/ADM_dcainfo.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_audio/ADM_dcainfo.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_audio/ADM_dcainfo.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -12,7 +12,7 @@
 
 #include "config.h"
 #include <stdio.h>
-#include "default.h"
+#include "ADM_default.h"
 #include "ADM_audio/ADM_dcainfo.h"
 extern "C"
 {

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_audio/ADM_mp3info.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_audio/ADM_mp3info.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_audio/ADM_mp3info.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -27,7 +27,7 @@
 #include <math.h>
 
 
-#include "default.h"
+#include "ADM_default.h"
 #include "aviaudio.hxx"
 #include "ADM_audio/ADM_mp3info.h"
 

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_audio/audio_packetizer.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_audio/audio_packetizer.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_audio/audio_packetizer.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -28,7 +28,7 @@
 #include <io.h>
 #endif
 
-#include "default.h"
+#include "ADM_default.h"
 #include "ADM_editor/ADM_Video.h"
 #include "fourcc.h"
 #include "aviaudio.hxx"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_audiocodec/ADM_codecac3.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_audiocodec/ADM_codecac3.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_audiocodec/ADM_codecac3.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -26,7 +26,6 @@
 #include "ADM_audiocodec/ADM_audiocodec.h"
 #include "ADM_audiofilter/audiofilter_channel_route.h"
 
-#include "ADM_osSupport/ADM_cpuCap.h"
 #include "prefs.h"
 
 #ifdef USE_AC3

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_audiocodec/ADM_codecimaadpcm.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_audiocodec/ADM_codecimaadpcm.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_audiocodec/ADM_codecimaadpcm.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -21,7 +21,7 @@
 #include <string.h>
 
 #include "config.h"
-#include "default.h"
+#include "ADM_default.h"
 #include "common.h"
 #include "bswap.h"
 #include "ADM_assert.h"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_audiocodec/ADM_codecmsadpcm.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_audiocodec/ADM_codecmsadpcm.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_audiocodec/ADM_codecmsadpcm.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -17,7 +17,7 @@
 #include <string.h>
 
 #include "config.h"
-#include "default.h"
+#include "ADM_default.h"
 #include "common.h"
 #include "bswap.h"
 #include "ADM_assert.h"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_audiocodec/ADM_dca.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_audiocodec/ADM_dca.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_audiocodec/ADM_dca.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -25,7 +25,7 @@
 #include "ADM_audio/aviaudio.hxx"
 #include "ADM_audiocodec/ADM_audiocodec.h"
 #include "ADM_audiofilter/audiofilter_channel_route.h"
-#include "ADM_osSupport/ADM_cpuCap.h"
+
 #include "prefs.h"
 
 #ifdef USE_LIBDCA

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_audiodevice/ADM_deviceALSA.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_audiodevice/ADM_deviceALSA.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_audiodevice/ADM_deviceALSA.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -32,7 +32,7 @@
 #include <alsa/asoundlib.h>
 #include <ADM_assert.h>
 
-#include "default.h"
+#include "ADM_default.h"
 
 
 #include "ADM_audiodevice.h"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_audiodevice/ADM_deviceArts.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_audiodevice/ADM_deviceArts.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_audiodevice/ADM_deviceArts.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -15,7 +15,7 @@
  *                                                                         *
  ***************************************************************************/
 
-#include "default.h"
+#include "ADM_default.h"
 
 #ifndef ADM_WIN32 
 #ifdef USE_ARTS

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_audiodevice/ADM_deviceAudioCore.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_audiodevice/ADM_deviceAudioCore.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_audiodevice/ADM_deviceAudioCore.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -22,7 +22,7 @@
 #include <pthread.h>
 #include <AudioUnit/AudioUnit.h>
 
-#include "default.h"
+#include "ADM_default.h"
 #include "ADM_assert.h"
 #include "ADM_audiodevice.h"
 #include "ADM_audiodevice/ADM_deviceAudioCore.h"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_audiodevice/ADM_deviceEsd.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_audiodevice/ADM_deviceEsd.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_audiodevice/ADM_deviceEsd.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -29,7 +29,7 @@
 #include <esd.h>
  
 
-#include "default.h"
+#include "ADM_default.h"
 #include "ADM_audiodevice.h"
 #include <ADM_assert.h>
 #include "ADM_audiodevice/ADM_deviceoss.h"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_audiodevice/ADM_deviceJack.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_audiodevice/ADM_deviceJack.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_audiodevice/ADM_deviceJack.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -14,7 +14,7 @@
 #include <stdint.h>
 
 
-#include "default.h"
+#include "ADM_default.h"
 #include "ADM_audiodevice.h"
 #include <ADM_assert.h>
 #include "ADM_audiodevice/ADM_deviceoss.h"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_audiodevice/ADM_deviceoss.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_audiodevice/ADM_deviceoss.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_audiodevice/ADM_deviceoss.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -44,7 +44,7 @@
  
  
 
-#include "default.h"
+#include "ADM_default.h"
 #include "ADM_audiodevice.h"
 #include <ADM_assert.h>
 #include  "ADM_audiodevice/ADM_deviceoss.h"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_audiofilter/audio_raw.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_audiofilter/audio_raw.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_audiofilter/audio_raw.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -26,7 +26,7 @@
 #include <ADM_assert.h>
 #include <math.h>
 
-#include "ADM_utilities/default.h"
+#include "ADM_default.h"
 
 
 #include "audioprocess.hxx"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_audiofilter/audiodeng_buildfilters.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_audiofilter/audiodeng_buildfilters.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_audiofilter/audiodeng_buildfilters.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -21,7 +21,7 @@
 #include <ADM_assert.h>
 #include <math.h>
 
-#include "ADM_utilities/default.h"
+#include "ADM_default.h"
 
 #include "ADM_audiofilter/audiofilter_limiter_param.h"
 #include "ADM_audiofilter/audiofilter_normalize_param.h"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_audiofilter/audioencoder.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_audiofilter/audioencoder.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_audiofilter/audioencoder.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -20,7 +20,7 @@
 
 #include <ADM_assert.h>
 
-#include "ADM_utilities/default.h"
+#include "ADM_default.h"
 
 #include "audioprocess.hxx"
 #include "audioeng_process.h"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_audiofilter/audioencoder_aften.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_audiofilter/audioencoder_aften.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_audiofilter/audioencoder_aften.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -25,7 +25,7 @@
 
 #include <ADM_assert.h>
 
-#include "ADM_utilities/default.h"
+#include "ADM_default.h"
 
 #include "audioprocess.hxx"
 #include "audioeng_process.h"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_audiofilter/audioencoder_faac.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_audiofilter/audioencoder_faac.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_audiofilter/audioencoder_faac.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -25,7 +25,7 @@
 
 #include <ADM_assert.h>
 
-#include "ADM_utilities/default.h"
+#include "ADM_default.h"
 
 #include "audioprocess.hxx"
 #include "audioeng_process.h"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_audiofilter/audioencoder_lame.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_audiofilter/audioencoder_lame.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_audiofilter/audioencoder_lame.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -19,7 +19,7 @@
 #include <math.h>
 
 #include <ADM_assert.h>
-#include "ADM_utilities/default.h"
+#include "ADM_default.h"
 
 #include "audioprocess.hxx"
 #include "audioeng_process.h"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_audiofilter/audioencoder_lavcodec.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_audiofilter/audioencoder_lavcodec.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_audiofilter/audioencoder_lavcodec.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -25,7 +25,7 @@
 #include <math.h>
 
 #include <ADM_assert.h>
-#include "ADM_utilities/default.h"
+#include "ADM_default.h"
 
 #include "audioprocess.hxx"
 #include "audioeng_process.h"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_audiofilter/audioencoder_pcm.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_audiofilter/audioencoder_pcm.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_audiofilter/audioencoder_pcm.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -19,7 +19,7 @@
 #include <math.h>
 
 #include <ADM_assert.h>
-#include "ADM_utilities/default.h"
+#include "ADM_default.h"
 
 #include "audioprocess.hxx"
 #include "audioeng_process.h"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_audiofilter/audioencoder_twolame.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_audiofilter/audioencoder_twolame.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_audiofilter/audioencoder_twolame.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -19,7 +19,7 @@
 #include <math.h>
 
 #include <ADM_assert.h>
-#include "ADM_utilities/default.h"
+#include "ADM_default.h"
 
 #include "audioprocess.hxx"
 #include "audioeng_process.h"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_audiofilter/audioencoder_vorbis.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_audiofilter/audioencoder_vorbis.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_audiofilter/audioencoder_vorbis.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -19,7 +19,7 @@
 #include <math.h>
 
 #include <ADM_assert.h>
-#include "ADM_utilities/default.h"
+#include "ADM_default.h"
 
 #include "audioprocess.hxx"
 #include "audioeng_process.h"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_audiofilter/audioeng_buff.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_audiofilter/audioeng_buff.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_audiofilter/audioeng_buff.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -25,7 +25,7 @@
 #include <ADM_assert.h>
 #include <math.h>
 
-#include "ADM_utilities/default.h"
+#include "ADM_default.h"
 
 #include "audioprocess.hxx"
 //

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_audiofilter/audioeng_process.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_audiofilter/audioeng_process.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_audiofilter/audioeng_process.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -20,7 +20,7 @@
 #include <math.h>
 
 #include <ADM_assert.h>
-#include "ADM_utilities/default.h"
+#include "ADM_default.h"
 
 #include "audioprocess.hxx"
 

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_audiofilter/audiofilter_buildchain.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_audiofilter/audiofilter_buildchain.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_audiofilter/audiofilter_buildchain.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -22,7 +22,7 @@
 #include <math.h>
 
 #include <ADM_assert.h>
-#include "ADM_utilities/default.h"
+#include "ADM_default.h"
 #include "ADM_toolkit/toolkit.hxx"
 
 #include "ADM_audio/audiomode.hxx"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_audiofilter/audiofilter_mixer.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_audiofilter/audiofilter_mixer.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_audiofilter/audiofilter_mixer.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -18,7 +18,7 @@
 #include <math.h>
 
 #include <ADM_assert.h>
-#include "ADM_utilities/default.h"
+#include "ADM_default.h"
 
 
 #include "audioeng_process.h"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_audiofilter/audiofilter_sox.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_audiofilter/audiofilter_sox.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_audiofilter/audiofilter_sox.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -19,7 +19,7 @@
 
 #include <ADM_assert.h>
 
-#include "ADM_utilities/default.h"
+#include "ADM_default.h"
 
 #include "audioeng_process.h"
 #include "audiofilter_sox.h"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_audiofilter/audiolib_sox.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_audiofilter/audiolib_sox.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_audiofilter/audiolib_sox.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -82,7 +82,7 @@
 
 #include <ADM_assert.h>
 
-#include "ADM_utilities/default.h"
+#include "ADM_default.h"
 
 #include "audioprocess.hxx"
 #include "resampl.h"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_codecs/ADM_codecs.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_codecs/ADM_codecs.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_codecs/ADM_codecs.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -32,7 +32,7 @@
 #include "ADM_lavcodec.h"
 };
 #endif
-#include "ADM_utilities/default.h"
+#include "ADM_default.h"
 #ifdef BIG_ENDIAN
 #undef BIG_ENDIAN
 #endif

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_codecs/ADM_ffmp43.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_codecs/ADM_ffmp43.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_codecs/ADM_ffmp43.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -26,7 +26,7 @@
 #include "ADM_assert.h"
 #include "prefs.h"
 #include "ADM_lavcodec.h"
-#include "ADM_utilities/default.h"
+#include "ADM_default.h"
 
 #include "ADM_codecs/ADM_codec.h"
 #include "ADM_codecs/ADM_ffmp43.h"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_codecs/ADM_ffmpeg.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_codecs/ADM_ffmpeg.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_codecs/ADM_ffmpeg.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -35,9 +35,10 @@
 #include "ADM_toolkit/toolkit.hxx"
 #include "ADM_assert.h"
 #include "ADM_codecs/ADM_ffmpeg.h"
-#include "ADM_osSupport/ADM_cpuCap.h"
+
 #include "prefs.h"
-
+#include "ADM_video/ADM_cache.h"
+#include "ADM_video/ADM_vidMisc.h"
 //#define TEST_NOB 1
 
 extern int ADM_cpu_num_processors(void);

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_codecs/ADM_mjpeg.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_codecs/ADM_mjpeg.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_codecs/ADM_mjpeg.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -23,7 +23,7 @@
 #include <ADM_assert.h>
 #include <string.h>
 #include <math.h>
-#include "ADM_utilities/default.h"
+#include "ADM_default.h"
 #include "config.h"
 #ifdef USE_MJPEG
 #include "ADM_colorspace/colorspace.h"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_codecs/ADM_mpeg.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_codecs/ADM_mpeg.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_codecs/ADM_mpeg.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -33,7 +33,7 @@
 
 #include <string.h>
 //#include <math.h>
-#include "ADM_utilities/default.h"
+#include "ADM_default.h"
 #include "avifmt.h"
 #include "avifmt2.h"
 #include "fourcc.h"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_codecs/ADM_png.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_codecs/ADM_png.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_codecs/ADM_png.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -22,7 +22,7 @@
 #include <string.h>
 #include <math.h>
 
-#include "ADM_utilities/default.h"
+#include "ADM_default.h"
 
 #include "ADM_colorspace/colorspace.h"
 

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_codecs/ADM_rgb16.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_codecs/ADM_rgb16.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_codecs/ADM_rgb16.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -20,7 +20,7 @@
 #include <stdlib.h>
 #include <string.h>
 
-#include "ADM_utilities/default.h"
+#include "ADM_default.h"
 #include "ADM_assert.h"
 #include "ADM_colorspace/colorspace.h"
 

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_codecs/ADM_theora_dec.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_codecs/ADM_theora_dec.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_codecs/ADM_theora_dec.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -21,7 +21,7 @@
 #include <string.h>
 #include <math.h>
 
-#include "ADM_utilities/default.h"
+#include "ADM_default.h"
 
 #include <ADM_assert.h>
 

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_codecs/ADM_uyvy.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_codecs/ADM_uyvy.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_codecs/ADM_uyvy.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -22,7 +22,7 @@
 
 #include <string.h>
 //#include <math.h>
-#include "ADM_utilities/default.h"
+#include "ADM_default.h"
 #include "avifmt.h"
 #include "avifmt2.h"
 #include "ADM_utilities/fourcc.h"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_codecs/ADM_x264.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_codecs/ADM_x264.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_codecs/ADM_x264.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -20,7 +20,7 @@
 #include <string.h>
 #include <math.h>
 
-#include "ADM_utilities/default.h"
+#include "ADM_default.h"
 #include "ADM_codecs/ADM_codec.h"
 #ifdef USE_X264
 
@@ -29,7 +29,7 @@
 {
 #include "x264.h"
 };
-#include "ADM_osSupport/ADM_cpuCap.h"
+
 #include <ADM_assert.h>
 #include "avi_vars.h"
 

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_codecs/ADM_xvid.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_codecs/ADM_xvid.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_codecs/ADM_xvid.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -26,7 +26,7 @@
 #include <string.h>
 #include <math.h>
 
-#include "ADM_utilities/default.h"
+#include "ADM_default.h"
 
 #include "ADM_codecs/ADM_codec.h"
 //#include "ADM_gui/GUI_xvidparam.h"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_codecs/ADM_xvid4.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_codecs/ADM_xvid4.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_codecs/ADM_xvid4.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -24,7 +24,7 @@
 #include <string.h>
 #include <math.h>
 
-#include "ADM_utilities/default.h"
+#include "ADM_default.h"
 #include "ADM_codecs/ADM_codec.h"
 #ifdef USE_XVID_4
 

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_colorspace/ADM_colorspace.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_colorspace/ADM_colorspace.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_colorspace/ADM_colorspace.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -19,12 +19,12 @@
 
 #include <string.h>
 
-#include "ADM_utilities/default.h"
+#include "ADM_default.h"
 #include <ADM_assert.h>
 
 #include "colorspace.h"
 
-#include "ADM_osSupport/ADM_cpuCap.h"
+
 #if (defined( ARCH_X86)  || defined(ARCH_X86_64))
 extern "C" {
 #include "ADM_lavcodec/avcodec.h"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_colorspace/ADM_rgb.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_colorspace/ADM_rgb.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_colorspace/ADM_rgb.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -24,11 +24,11 @@
 #include <stdlib.h>
 #include <string.h>
 
-#include "ADM_utilities/default.h"
+#include "ADM_default.h"
 #include "ADM_assert.h"
 
 #include "colorspace.h"
-#include "ADM_osSupport/ADM_cpuCap.h"
+
 #if (defined( ARCH_X86)  || defined(ARCH_X86_64))
 extern "C" {
 #include "ADM_lavcodec/avcodec.h"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_colorspace/rgb2yuv.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_colorspace/rgb2yuv.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_colorspace/rgb2yuv.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -25,8 +25,8 @@
 #include <string.h>
 #include <math.h>
 
-#include "ADM_utilities/default.h"
-#include "ADM_osSupport/ADM_cpuCap.h"
+#include "ADM_default.h"
+
 #if (defined( ARCH_X86)  || defined(ARCH_X86_64))
 extern "C" {
 #include "ADM_lavcodec/avcodec.h"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_colorspace/yuv.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_colorspace/yuv.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_colorspace/yuv.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -26,7 +26,7 @@
 
 #include <string.h>
 
-#include "ADM_utilities/default.h"
+#include "ADM_default.h"
 
 #include <ADM_assert.h>
 #include "colorspace.h"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_core/include/ADM_misc.h
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_core/include/ADM_misc.h	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_core/include/ADM_misc.h	2008-02-24 17:29:52 UTC (rev 3800)
@@ -25,10 +25,12 @@
         ADM_LOG_DEBUG=3
   
 } ADM_LOG_LEVEL;
+
 typedef struct 
 {
   uint32_t hours,minutes,seconds; 
 } ADM_date;
+
 void            TLK_getDate(ADM_date *date);
 void            PathSplit(char *str, char **root, char **ext);
 void	        PathStripName(char *str);
@@ -36,18 +38,11 @@
 char            *PathCanonize(const char *tmpname);
 void            LowerCase(char *string);
 uint32_t        getTime( int called );;
-void            frame2time(uint32_t frame, uint32_t fps, uint16_t * hh, uint16_t * mm,
-                                uint16_t * ss, uint16_t * ms);
-void            time2frame(uint32_t *frame, uint32_t fps, uint32_t hh, uint32_t mm,
-                                uint32_t ss, uint32_t ms);
-void            ms2time(uint32_t len2,uint16_t * hh, uint16_t * mm,
-                                uint16_t * ss, uint16_t * ms);				
-char*			ms2timedisplay(uint32_t ms);
-uint32_t 		getTimeOfTheDay(void);
+uint32_t 	getTimeOfTheDay(void);
 uint64_t 	ADM_swap64(uint64_t in);
 uint32_t 	ADM_swap32(uint32_t in);
 uint16_t 	ADM_swap16(uint16_t in);
-inline uint32_t 		dontswap(uint32_t in) {return in;};
+inline uint32_t dontswap(uint32_t in) {return in;};
 char 		*ADM_rindex(const char *s, int c);
 char 		*ADM_index(const char *s, int c);
 void 		ADM_usleep(unsigned long us);
@@ -92,12 +87,6 @@
 
 bool shutdown(void);
 
-#define FRAME_PAL 1
-#define FRAME_FILM 2
-#define FRAME_NTSC 3
-
-uint8_t 	identMovieType(uint32_t fps1000); // identify the movie type (mainly for mpeg1/2) 
-uint8_t 	ms2time(uint32_t ms, uint32_t *h,uint32_t *m, uint32_t *s);
 #ifdef ADM_BIG_ENDIAN	
 	#define R64 ADM_swap64
 	#define R32 ADM_swap32

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_editor/ADM_edCache.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_editor/ADM_edCache.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_editor/ADM_edCache.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -13,7 +13,7 @@
 #include <stdio.h>
 #include <stdlib.h>
 #include <string.h>
-#include "default.h"
+#include "ADM_default.h"
 #include "ADM_image.h"
 #include "ADM_editor/ADM_edCache.h"
 #include "ADM_assert.h"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_encoder/adm_encx264.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_encoder/adm_encx264.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_encoder/adm_encx264.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -26,7 +26,7 @@
 #include <string.h>
 #include <math.h>
 #include "ADM_assert.h"
-#include "ADM_utilities/default.h"
+#include "ADM_default.h"
 
 #include "fourcc.h"
 #include "avi_vars.h"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_filter/filter_saveload.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_filter/filter_saveload.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_filter/filter_saveload.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -16,13 +16,8 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
-#include "config.h"
-
-#include <stdio.h>
-#include <stdlib.h>
-#include <string.h>
-
-
+#define ADM_LEGACY_PROGGY
+#include "ADM_default.h"
 #include "fourcc.h"
 #ifdef USE_LIBXML2
 	#include <libxml/tree.h>

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_filter/vidVCD.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_filter/vidVCD.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_filter/vidVCD.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -44,6 +44,7 @@
 #include "ADM_filter/vidVCD.h"
 #include "prefs.h"
 #include "ADM_userInterfaces/ADM_commonUI/DIA_resizeWiz.h"
+#include "ADM_video/ADM_vidMisc.h"
 //___________________________________________
 extern FILTER videofilters[MAX_FILTER];
 extern uint32_t nb_active_filter;

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_infoExtractor/ADM_infoextractor.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_infoExtractor/ADM_infoextractor.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_infoExtractor/ADM_infoextractor.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -21,7 +21,7 @@
 #include "math.h"
 
 #include <ADM_assert.h>
-#include "default.h"
+#include "ADM_default.h"
 #include "ADM_editor/ADM_Video.h"
 
 

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_amv/ADM_amv.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_amv/ADM_amv.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_amv/ADM_amv.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -22,7 +22,7 @@
 
 #include "math.h"
 
-#include "default.h"
+#include "ADM_default.h"
 #include "ADM_editor/ADM_Video.h"
 #include <ADM_assert.h>
 

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_amv/ADM_amvAudio.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_amv/ADM_amvAudio.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_amv/ADM_amvAudio.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -20,7 +20,7 @@
 
 #include "math.h"
 
-#include "default.h"
+#include "ADM_default.h"
 #include "ADM_editor/ADM_Video.h"
 #include <ADM_assert.h>
 

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_asf/ADM_asf.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_asf/ADM_asf.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_asf/ADM_asf.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -20,7 +20,7 @@
 
 #include "math.h"
 
-#include "ADM_utilities/default.h"
+#include "ADM_default.h"
 #include "ADM_editor/ADM_Video.h"
 #include <ADM_assert.h>
 

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_asf/ADM_asfChunk.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_asf/ADM_asfChunk.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_asf/ADM_asfChunk.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -20,7 +20,7 @@
 
 #include "math.h"
 
-#include "default.h"
+#include "ADM_default.h"
 #include "ADM_editor/ADM_Video.h"
 #include <ADM_assert.h>
 

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_asf/ADM_asfPacket.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_asf/ADM_asfPacket.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_asf/ADM_asfPacket.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -20,7 +20,7 @@
 
 #include "math.h"
 
-#include "default.h"
+#include "ADM_default.h"
 #include "ADM_editor/ADM_Video.h"
 #include <ADM_assert.h>
 

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_asf/ADM_asf_audio.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_asf/ADM_asf_audio.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_asf/ADM_asf_audio.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -20,7 +20,7 @@
 
 #include "math.h"
 
-#include "default.h"
+#include "ADM_default.h"
 #include "ADM_editor/ADM_Video.h"
 #include <ADM_assert.h>
 

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_avsproxy/ADM_avsproxy.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_avsproxy/ADM_avsproxy.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_avsproxy/ADM_avsproxy.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -15,7 +15,7 @@
 #include <errno.h>
 
 #include <ADM_assert.h>
-#include "default.h"
+#include "ADM_default.h"
 #include "ADM_editor/ADM_Video.h"
 
 
@@ -28,9 +28,9 @@
 #define MODULE_NAME MODULE_3GP
 #include "ADM_osSupport/ADM_debug.h"
 
-#include "ADM_osSupport/TLK_clock.h"
 
 
+
 avsHeader::avsHeader()
 {
     mySocket=0;

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_avsproxy/ADM_avsproxy_net.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_avsproxy/ADM_avsproxy_net.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_avsproxy/ADM_avsproxy_net.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -20,7 +20,7 @@
 #include "math.h"
 #include <errno.h>
 #include <ADM_assert.h>
-#include "default.h"
+#include "ADM_default.h"
 #include "ADM_avsproxy_internal.h"
 #include "ADM_avsproxy.h"
 

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_flv/ADM_flv.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_flv/ADM_flv.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_flv/ADM_flv.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -22,7 +22,7 @@
 
 #include "math.h"
 
-#include "default.h"
+#include "ADM_default.h"
 #include "ADM_editor/ADM_Video.h"
 #include <ADM_assert.h>
 

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_flv/ADM_flvAudio.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_flv/ADM_flvAudio.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_flv/ADM_flvAudio.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -20,7 +20,7 @@
 
 #include "math.h"
 
-#include "default.h"
+#include "ADM_default.h"
 #include "ADM_editor/ADM_Video.h"
 #include <ADM_assert.h>
 

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_flv/ADM_flvIndex.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_flv/ADM_flvIndex.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_flv/ADM_flvIndex.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -22,7 +22,7 @@
 
 #include "math.h"
 
-#include "default.h"
+#include "ADM_default.h"
 #include "ADM_editor/ADM_Video.h"
 #include <ADM_assert.h>
 

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_h263/ADM_h263.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_h263/ADM_h263.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_h263/ADM_h263.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -27,7 +27,7 @@
 
 #include "math.h"
 
-#include "default.h"
+#include "ADM_default.h"
 #include "ADM_editor/ADM_Video.h"
 #include <ADM_assert.h>
 

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_h263/ADM_mp4.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_h263/ADM_mp4.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_h263/ADM_mp4.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -20,7 +20,7 @@
 #include <string.h>
 #include <math.h>
 
-#include "default.h"
+#include "ADM_default.h"
 #include "ADM_editor/ADM_Video.h"
 #include <ADM_assert.h>
 

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_h263/bitsRead.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_h263/bitsRead.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_h263/bitsRead.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -21,7 +21,7 @@
 
 #include "math.h"
 
-#include "default.h"
+#include "ADM_default.h"
 #include "ADM_editor/ADM_Video.h"
 #include <ADM_assert.h>
 

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_inpics/ADM_pics.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_inpics/ADM_pics.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_inpics/ADM_pics.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -29,7 +29,7 @@
 #include <string.h>
 #include "math.h"
 
-#include "default.h"
+#include "ADM_default.h"
 #include "ADM_editor/ADM_Video.h"
 
 

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_matroska/ADM_mkv.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_matroska/ADM_mkv.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_matroska/ADM_mkv.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -20,7 +20,7 @@
 
 #include "math.h"
 
-#include "default.h"
+#include "ADM_default.h"
 #include "ADM_editor/ADM_Video.h"
 #include <ADM_assert.h>
 

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_matroska/ADM_mkvEntries.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_matroska/ADM_mkvEntries.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_matroska/ADM_mkvEntries.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -20,7 +20,7 @@
 
 #include "math.h"
 
-#include "default.h"
+#include "ADM_default.h"
 #include "ADM_editor/ADM_Video.h"
 #include <ADM_assert.h>
 

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_matroska/ADM_mkvIndexer.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_matroska/ADM_mkvIndexer.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_matroska/ADM_mkvIndexer.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -20,7 +20,7 @@
 
 #include "math.h"
 
-#include "default.h"
+#include "ADM_default.h"
 #include "ADM_editor/ADM_Video.h"
 #include <ADM_assert.h>
 

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_matroska/ADM_mkvTrackType.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_matroska/ADM_mkvTrackType.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_matroska/ADM_mkvTrackType.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -20,7 +20,7 @@
 
 #include "math.h"
 
-#include "default.h"
+#include "ADM_default.h"
 #include "ADM_editor/ADM_Video.h"
 #include <ADM_assert.h>
 

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_matroska/ADM_mkv_audio.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_matroska/ADM_mkv_audio.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_matroska/ADM_mkv_audio.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -20,7 +20,7 @@
 
 #include "math.h"
 
-#include "default.h"
+#include "ADM_default.h"
 #include "ADM_editor/ADM_Video.h"
 #include <ADM_assert.h>
 

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_matroska/ebml.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_matroska/ebml.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_matroska/ebml.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -22,7 +22,7 @@
 #include <stdio.h>
 #include <stdlib.h>
 #include <stdint.h>
-#include "default.h"
+#include "ADM_default.h"
 #include "ADM_ebml.h"
 #define aprintf(...) {}
 

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_mp4/ADM_atom.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_mp4/ADM_atom.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_mp4/ADM_atom.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -26,7 +26,7 @@
 
 #include "math.h"
 #include <ADM_assert.h>
-#include "default.h"
+#include "ADM_default.h"
 #include "ADM_editor/ADM_Video.h"
 
 

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_mp4/ADM_mp4.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_mp4/ADM_mp4.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_mp4/ADM_mp4.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -62,7 +62,7 @@
 #include "math.h"
 
 #include <ADM_assert.h>
-#include "default.h"
+#include "ADM_default.h"
 #include "ADM_editor/ADM_Video.h"
 
 

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_mp4/ADM_mp4Analyzer.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_mp4/ADM_mp4Analyzer.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_mp4/ADM_mp4Analyzer.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -23,7 +23,7 @@
 #include "math.h"
 
 #include <ADM_assert.h>
-#include "default.h"
+#include "ADM_default.h"
 #include "ADM_editor/ADM_Video.h"
 
 

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_mp4/ADM_mp4Indexer.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_mp4/ADM_mp4Indexer.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_mp4/ADM_mp4Indexer.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -23,7 +23,7 @@
 #include "math.h"
 
 #include <ADM_assert.h>
-#include "default.h"
+#include "ADM_default.h"
 #include "ADM_editor/ADM_Video.h"
 
 

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_mp4/ADM_mp4Leaf.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_mp4/ADM_mp4Leaf.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_mp4/ADM_mp4Leaf.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -24,7 +24,7 @@
 #include "math.h"
 
 #include <ADM_assert.h>
-#include "default.h"
+#include "ADM_default.h"
 #include "fourcc.h"
 #include "ADM_atom.h"
 #include "ADM_mp4Tree.h"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_mp4/ADM_mp4audio.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_mp4/ADM_mp4audio.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_mp4/ADM_mp4audio.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -30,7 +30,7 @@
 #include "math.h"
 #include <ADM_assert.h>
 
-#include "default.h"
+#include "ADM_default.h"
 #include "ADM_editor/ADM_Video.h"
 #include "fourcc.h"
 #include "ADM_mp4/ADM_mp4.h"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_mpegdemuxer/dmx_audio.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_mpegdemuxer/dmx_audio.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_mpegdemuxer/dmx_audio.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -22,7 +22,7 @@
 #include "config.h"
 #include <math.h>
 
-#include "default.h"
+#include "ADM_default.h"
 #include "avifmt.h"
 #include "avifmt2.h"
 

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_mpegdemuxer/dmx_demuxer.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_mpegdemuxer/dmx_demuxer.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_mpegdemuxer/dmx_demuxer.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -21,7 +21,7 @@
 #include <string.h>
 #include <math.h>
 
-#include "default.h"
+#include "ADM_default.h"
 #include <ADM_assert.h>
 
 

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_mpegdemuxer/dmx_demuxerES.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_mpegdemuxer/dmx_demuxerES.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_mpegdemuxer/dmx_demuxerES.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -22,7 +22,7 @@
 #include <string.h>
 #include <math.h>
 
-#include "default.h"
+#include "ADM_default.h"
 #include <ADM_assert.h>
 
 

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_mpegdemuxer/dmx_demuxerMSDVR.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_mpegdemuxer/dmx_demuxerMSDVR.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_mpegdemuxer/dmx_demuxerMSDVR.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -21,7 +21,7 @@
 #include <string.h>
 #include <math.h>
 
-#include "default.h"
+#include "ADM_default.h"
 #include <ADM_assert.h>
 #include "dmx_demuxerMSDVR.h"
 

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_mpegdemuxer/dmx_demuxerPS.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_mpegdemuxer/dmx_demuxerPS.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_mpegdemuxer/dmx_demuxerPS.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -22,7 +22,7 @@
 #include <string.h>
 #include <math.h>
 
-#include "default.h"
+#include "ADM_default.h"
 #include <ADM_assert.h>
 
 

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_mpegdemuxer/dmx_demuxerTS.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_mpegdemuxer/dmx_demuxerTS.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_mpegdemuxer/dmx_demuxerTS.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -34,7 +34,7 @@
 #include <string.h>
 #include <math.h>
 
-#include "default.h"
+#include "ADM_default.h"
 #include <ADM_assert.h>
 
 //#define TS_VERBOSE 1

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_mpegdemuxer/dmx_identify.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_mpegdemuxer/dmx_identify.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_mpegdemuxer/dmx_identify.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -22,7 +22,7 @@
 #include <string.h>
 #include <math.h>
 
-#include "default.h"
+#include "ADM_default.h"
 #include <ADM_assert.h>
 
 #include "dmx_io.h"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_mpegdemuxer/dmx_indexer.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_mpegdemuxer/dmx_indexer.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_mpegdemuxer/dmx_indexer.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -21,7 +21,7 @@
 #include <string.h>
 #include <math.h>
 
-#include "default.h"
+#include "ADM_default.h"
 #include "prefs.h"
 #include <ADM_assert.h>
 

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_mpegdemuxer/dmx_indexer_h264.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_mpegdemuxer/dmx_indexer_h264.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_mpegdemuxer/dmx_indexer_h264.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -21,7 +21,7 @@
 #include <string.h>
 #include <math.h>
 
-#include "default.h"
+#include "ADM_default.h"
 #include <ADM_assert.h>
 
 

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_mpegdemuxer/dmx_indexer_mpeg2.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_mpegdemuxer/dmx_indexer_mpeg2.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_mpegdemuxer/dmx_indexer_mpeg2.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -21,7 +21,7 @@
 #include <string.h>
 #include <math.h>
 
-#include "default.h"
+#include "ADM_default.h"
 #include <ADM_assert.h>
 
 

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_mpegdemuxer/dmx_io.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_mpegdemuxer/dmx_io.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_mpegdemuxer/dmx_io.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -25,7 +25,7 @@
 #include "config.h"
 #include <math.h>
 
-#include "default.h"
+#include "ADM_default.h"
 #include <ADM_assert.h>
 
 #include "dmx_io.h"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_mpegdemuxer/dmx_probe.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_mpegdemuxer/dmx_probe.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_mpegdemuxer/dmx_probe.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -21,7 +21,7 @@
 #include <string.h>
 #include <math.h>
 
-#include "default.h"
+#include "ADM_default.h"
 #include <ADM_assert.h>
 
 

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_mpegdemuxer/dmx_probeTS.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_mpegdemuxer/dmx_probeTS.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_mpegdemuxer/dmx_probeTS.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -21,7 +21,7 @@
 #include <string.h>
 #include <math.h>
 
-#include "default.h"
+#include "ADM_default.h"
 #include <ADM_assert.h>
 
 

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_mpegdemuxer/dmx_video.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_mpegdemuxer/dmx_video.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_mpegdemuxer/dmx_video.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -22,7 +22,7 @@
 #include "config.h"
 #include <math.h>
 
-#include "default.h"
+#include "ADM_default.h"
 #include "avifmt.h"
 #include "avifmt2.h"
 

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_nuv/ADM_nuv.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_nuv/ADM_nuv.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_nuv/ADM_nuv.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -58,7 +58,7 @@
 
 #include "math.h"
 
-#include "default.h"
+#include "ADM_default.h"
 #include "ADM_editor/ADM_Video.h"
 
 #include <ADM_assert.h>

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_nuv/ADM_nuvAudio.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_nuv/ADM_nuvAudio.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_nuv/ADM_nuvAudio.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -39,7 +39,7 @@
 #include "math.h"
 #include <ADM_assert.h>
 
-#include "default.h"
+#include "ADM_default.h"
 #include "ADM_editor/ADM_Video.h"
 #include "fourcc.h"
 #include "ADM_nuv/ADM_nuv.h"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_nuv/RTjpeg.c
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_nuv/RTjpeg.c	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_nuv/RTjpeg.c	2008-02-24 17:29:52 UTC (rev 3800)
@@ -34,7 +34,7 @@
 #include "mmx.h"
 #endif
 /// MEANX
-#include "../../ADM_assert.h"
+#include "ADM_assert.h"
 /// /MEANX
     
 void RTjpeg_color_init(void);

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_nuv/RTjpeg.h
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_nuv/RTjpeg.h	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_nuv/RTjpeg.h	2008-02-24 17:29:52 UTC (rev 3800)
@@ -23,7 +23,7 @@
 */
 
 #ifndef _I386_TYPES_H
-#include "default.h"
+#include "ADM_default.h"
 typedef uint8_t __u8;
 typedef uint16_t __u16;
 typedef uint32_t __u32;

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_nuv/RTjpegN.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_nuv/RTjpegN.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_nuv/RTjpegN.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -45,7 +45,7 @@
 //#define SHOWBLOCK 1
 #define BETTERCOMPRESSION 1
 /// MEANX
-#include "../../ADM_assert.h"
+#include "ADM_assert.h"
 /// /MEANX
     
 static const unsigned char RTjpeg_ZZ[64]={

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_nuv/RToldformat.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_nuv/RToldformat.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_nuv/RToldformat.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -11,7 +11,7 @@
 #include <ADM_assert.h>
 #include <math.h>
 #include "config.h"
-#include <default.h>
+#include "ADM_default.h"
 
 #ifndef UNUSED_ARG
 	#define UNUSED_ARG(x) if(x) {}
@@ -19,7 +19,7 @@
 
 
 #if !defined(_I386_TYPES_H) || defined(ADM_BIG_ENDIAN)
-#include "default.h"
+
 typedef uint8_t __u8;
 typedef uint16_t __u16;
 typedef uint32_t __u32;

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_ogm/ADM_ogm.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_ogm/ADM_ogm.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_ogm/ADM_ogm.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -40,7 +40,7 @@
 #include "math.h"
 #include <ADM_assert.h>
 
-#include "default.h"
+#include "ADM_default.h"
 #include "fourcc.h"
 #include "ADM_ogm.h"
 #include "ADM_ogmpages.h"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_ogm/ADM_ogmpages.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_ogm/ADM_ogmpages.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_ogm/ADM_ogmpages.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -25,7 +25,7 @@
 #include "math.h"
 #include <ADM_assert.h>
 
-#include "default.h"
+#include "ADM_default.h"
 #include "fourcc.h"
 
 #include "ADM_ogm.h"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_ogm/ADM_ogmreorder.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_ogm/ADM_ogmreorder.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_ogm/ADM_ogmreorder.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -26,7 +26,7 @@
 #include "math.h"
 #include <ADM_assert.h>
 
-#include "default.h"
+#include "ADM_default.h"
 #include "fourcc.h"
 #include "ADM_ogm.h"
 #include "ADM_ogmpages.h"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_openDML/ADM_odml_audio.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_openDML/ADM_odml_audio.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_openDML/ADM_odml_audio.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -32,7 +32,7 @@
 #include <io.h>
 #endif
 
-#include "default.h"
+#include "ADM_default.h"
 #include "ADM_editor/ADM_Video.h"
 #include "fourcc.h"
 #include "ADM_openDML/ADM_openDML.h"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_openDML/ADM_odml_odml.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_openDML/ADM_odml_odml.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_openDML/ADM_odml_odml.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -25,7 +25,7 @@
 #include "math.h"
 #include <ADM_assert.h>
 
-#include "default.h"
+#include "ADM_default.h"
 #include "ADM_editor/ADM_Video.h"
 
 

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_openDML/ADM_odml_regular.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_openDML/ADM_odml_regular.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_openDML/ADM_odml_regular.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -26,7 +26,7 @@
 	//#define ODML_INDEX_VERBOSE
 #endif
 
-#include "default.h"
+#include "ADM_default.h"
 #include "ADM_editor/ADM_Video.h"
 
 

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_openDML/ADM_openDML.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_openDML/ADM_openDML.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_openDML/ADM_openDML.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -24,7 +24,7 @@
 #include "math.h"
 
 #include <ADM_assert.h>
-#include "default.h"
+#include "ADM_default.h"
 #include "ADM_editor/ADM_Video.h"
 
 

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_openDML/ADM_openDMLDepack.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_openDML/ADM_openDMLDepack.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_openDML/ADM_openDMLDepack.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -18,7 +18,7 @@
 
 #include "math.h"
 #include <ADM_assert.h>
-#include "default.h"
+#include "ADM_default.h"
 #include "ADM_editor/ADM_Video.h"
 #include "prefs.h"
 

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_openDML/ADM_opendml_reindex.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_openDML/ADM_opendml_reindex.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_openDML/ADM_opendml_reindex.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -25,7 +25,7 @@
 //	#define ODML_INDEX_VERBOSE
 #endif
 
-#include "default.h"
+#include "ADM_default.h"
 #include "ADM_editor/ADM_Video.h"
 
 

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_openDML/ADM_opendml_reorder.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_openDML/ADM_opendml_reorder.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_openDML/ADM_opendml_reorder.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -24,7 +24,7 @@
 #include "math.h"
 #include <ADM_assert.h>
 
-#include "default.h"
+#include "ADM_default.h"
 #include "ADM_editor/ADM_Video.h"
 
 

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_openDML/ADM_riff.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_openDML/ADM_riff.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_openDML/ADM_riff.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -15,7 +15,7 @@
 #include <stdio.h>
 #include <stdlib.h>
 
-#include "default.h"
+#include "ADM_default.h"
 #include <ADM_assert.h>
 
 #include "ADM_riff.h"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_lavformat/ADM_lavformat.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_lavformat/ADM_lavformat.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_lavformat/ADM_lavformat.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -35,7 +35,7 @@
 #undef realloc
 #undef free
 #include <ADM_assert.h>
-#include "default.h"
+#include "ADM_default.h"
 #include "ADM_toolkit/toolkit.hxx"
 
 #include "ADM_audiofilter/audioprocess.hxx"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_lavformat/ADM_muxts.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_lavformat/ADM_muxts.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_lavformat/ADM_muxts.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -28,7 +28,7 @@
 
 #include <ADM_assert.h>
 
-#include "default.h"
+#include "ADM_default.h"
 #include "ADM_toolkit/toolkit.hxx"
 
 #include "ADM_audiofilter/audioprocess.hxx"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_libMad/fixed.h
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_libMad/fixed.h	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_libMad/fixed.h	2008-02-24 17:29:52 UTC (rev 3800)
@@ -21,7 +21,7 @@
 
 # ifndef LIBMAD_FIXED_H
 # define LIBMAD_FIXED_H
-#include "../ADM_utilities/default.h"
+#include "ADM_default.h"
 #define mad_fixed_t     int32_t
 #define mad_fixed64hi_t int32_t
 #define mad_fixed64lo_t uint32_t

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_libMad/madmem.h
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_libMad/madmem.h	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_libMad/madmem.h	2008-02-24 17:29:52 UTC (rev 3800)
@@ -1,8 +1,15 @@
 #ifndef MADMEM_H
 #define MADMEM_H
-extern void *ADM_alloc(int size);
-extern void ADM_dezalloc(void *ptr);
+#define ADM_LEGACY_PROGGY
+#include "ADM_default.h"
+// // #if 0
+// // extern void *ADM_alloc(int size);
+// // extern void ADM_dezalloc(void *ptr);
+// // #endif
+#undef malloc
+#undef free
 #define malloc ADM_alloc
 #define free ADM_dezalloc
+
 #endif
 

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_libMpeg2Dec/alloc.c
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_libMpeg2Dec/alloc.c	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_libMpeg2Dec/alloc.c	2008-02-24 17:29:52 UTC (rev 3800)
@@ -20,12 +20,8 @@
  * along with this program; if not, write to the Free Software
  * Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA
  */
-#include <stdio.h>
-#include <stdlib.h>
-#include <inttypes.h>
-
+#include "ADM_default.h"
 #include "mpeg2.h"
-#include "../../ADM_assert.h"
 
 static void * (* malloc_hook) (unsigned size, mpeg2_alloc_t reason) = NULL;
 static int (* free_hook) (void * buf) = NULL;

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_liba52/parse.c
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_liba52/parse.c	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_liba52/parse.c	2008-02-24 17:29:52 UTC (rev 3800)
@@ -21,15 +21,10 @@
  * Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA
  */
 
-#include "config.h"
-#include <stdio.h>
-#include <stdlib.h>
-#include <string.h>
-#include <inttypes.h>
 
 //MEANX
 #define ADM_LEGACY_PROGGY
-#include "../../ADM_assert.h"
+#include "ADM_default.h"
 // /MEANX
 
     

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_libmpeg2enc/ADM_mpe2enc.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_libmpeg2enc/ADM_mpe2enc.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_libmpeg2enc/ADM_mpe2enc.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -40,7 +40,7 @@
 #include "ADM_mpeg2enc.h"
 #include "ADM_encoder/adm_encffmatrix.h"
 
-#include "default.h"
+#include "ADM_default.h"
 #include "prefs.h"
 
 

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_libmpeg2enc/cpu_accel.cc
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_libmpeg2enc/cpu_accel.cc	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_libmpeg2enc/cpu_accel.cc	2008-02-24 17:29:52 UTC (rev 3800)
@@ -25,9 +25,9 @@
 #include <setjmp.h>
 #include "cpu_accel.h"
 
-#include "default.h"
-#include "ADM_osSupport/ADM_cpuCap.h"
+#include "ADM_default.h"
 
+
 #if defined( HAVE_ALTIVEC ) && defined(USE_ALTIVEC)
 int detect_altivec(){};
 #endif

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_libmpeg2enc/motion.cc
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_libmpeg2enc/motion.cc	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_libmpeg2enc/motion.cc	2008-02-24 17:29:52 UTC (rev 3800)
@@ -3,7 +3,7 @@
 
 #include "mmxsse_motion.h"
 #include "mjpeg_logging.h"
-#include "ADM_osSupport/ADM_cpuCap.h"
+#include "ADM_cpuCap.h"
 void enable_mmxsse_motion(int cpucap)
 {
 #if defined( ARCH_X86)  || defined(ARCH_X86_64)

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_libmpeg2enc/quantize_ref.cc
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_libmpeg2enc/quantize_ref.cc	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_libmpeg2enc/quantize_ref.cc	2008-02-24 17:29:52 UTC (rev 3800)
@@ -61,7 +61,7 @@
 
 #include "cpu_accel.h"
 #include "simd.h"
-#include "ADM_osSupport/ADM_cpuCap.h"
+#include "ADM_cpuCap.h"
 
 #if defined( HAVE_ALTIVEC) && defined(USE_ALTIVEC)
 void enable_altivec_quantization(int op);//t->mpeg1);

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_libmpeg2enc/readpic.cc
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_libmpeg2enc/readpic.cc	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_libmpeg2enc/readpic.cc	2008-02-24 17:29:52 UTC (rev 3800)
@@ -79,9 +79,9 @@
 
 #include "mpegconsts.h"
 #include "yuv4mpeg.h"
- 
-#include "ADM_osSupport/ADM_cpuCap.h"
+#include "ADM_default.h" 
 
+
    /* NOTE: access toframes_read *must* be read-only in other threads
 	  once the chunk-reading worker thread has been started.
    */

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_libmpeg2enc/transfrm_ref.cc
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_libmpeg2enc/transfrm_ref.cc	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_libmpeg2enc/transfrm_ref.cc	2008-02-24 17:29:52 UTC (rev 3800)
@@ -47,7 +47,7 @@
  * 02111-1307, USA.
  *
  */
-
+#include "ADM_default.h"
 #include <stdio.h>
 #include "config.h"
 #include <math.h>
@@ -57,7 +57,7 @@
 #include "transfrm_ref.h"
 #include "cpu_accel.h"
 #include "simd.h"
-#include "ADM_osSupport/ADM_cpuCap.h"
+
 #if defined( HAVE_ALTIVEC ) && defined(USE_ALTIVEC)
 //#include "../utils/altivec/altivec_transform.h"
 #endif

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_libswscale/ADM_mp.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_libswscale/ADM_mp.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_libswscale/ADM_mp.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -20,10 +20,10 @@
 #include <stdlib.h>
 #include <string.h>
 #include <math.h>
-#include "../../ADM_assert.h"
+#include "ADM_assert.h"
 
 #include "fourcc.h"
-#include "ADM_utilities/default.h"
+#include "ADM_default.h"
 
 #if (defined( ARCH_X86)  || defined(ARCH_X86_64))
 extern "C" {
@@ -33,8 +33,8 @@
 
 #include "ADM_lavutil/avutil.h"
 #include "../ADM_libswscale/swscale.h"
-#include "../../ADM_osSupport/ADM_cpuCap.h"
 
+
 #include "ADM_mp.h"
 
 

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_libswscale/rgb2rgb.c
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_libswscale/rgb2rgb.c	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_libswscale/rgb2rgb.c	2008-02-24 17:29:52 UTC (rev 3800)
@@ -26,19 +26,18 @@
  * under the LGPL license too
  */
 // MEANX
-#include "config.h"
+#include "ADM_default.h"
+#include "wrapper.h"
 // /MEANX
 
-#include <inttypes.h>
-#include "config.h"
 #include "rgb2rgb.h"
 #include "swscale.h"
 #include "swscale_internal.h"
 #include "x86_cpu.h"
 #include "bswap.h"
 // MEANX
-//#include "wrapper.h"
-#include "admmangle.h"
+
+
 // /MEANX
 
 #define FAST_BGR2YV12 // use 7 bit coeffs instead of 15bit

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_libswscale/swscale.c
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_libswscale/swscale.c	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_libswscale/swscale.c	2008-02-24 17:29:52 UTC (rev 3800)
@@ -78,7 +78,7 @@
 
 // MEANX
 #include "wrapper.h"
-#include "admmangle.h"
+
 // /MEANX
 
 

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_libswscale/wrapper.h
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_libswscale/wrapper.h	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_libswscale/wrapper.h	2008-02-24 17:29:52 UTC (rev 3800)
@@ -2,7 +2,8 @@
 
 	Replacement for assert
 */
-#include "../../ADM_assert.h"
+#include "ADM_default.h"
+
 //******************
 #undef malloc
 #undef realloc

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_libswscale/yuv2rgb.c
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_libswscale/yuv2rgb.c	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_libswscale/yuv2rgb.c	2008-02-24 17:29:52 UTC (rev 3800)
@@ -48,7 +48,7 @@
 #endif
 // MEANX
 #include "wrapper.h"
-#include "admmangle.h"
+
 // /MEANX
 
 

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_libwrapper/libwrapper.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_libwrapper/libwrapper.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_libwrapper/libwrapper.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -2,7 +2,7 @@
 
 #include <stdlib.h>
 #include <stdio.h>
-#include "default.h"
+#include "ADM_default.h"
 #ifdef ADM_WIN32
 #include <windows.h>
 #else

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_libwrapper/libwrapper_amrnb.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_libwrapper/libwrapper_amrnb.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_libwrapper/libwrapper_amrnb.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -2,7 +2,7 @@
 
 #ifdef USE_AMR_NB
 #include <stdio.h>
-#include "default.h"
+#include "ADM_default.h"
 #include "libwrapper_amrnb.h"
 
 ADM_LibWrapperAmrnb::ADM_LibWrapperAmrnb() : ADM_LibWrapper()

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_libwrapper/libwrapper_dca.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_libwrapper/libwrapper_dca.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_libwrapper/libwrapper_dca.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -2,7 +2,7 @@
 
 #ifdef USE_LIBDCA
 #include <stdio.h>
-#include "default.h"
+#include "ADM_default.h"
 #include "libwrapper_dca.h"
 
 ADM_LibWrapperDca::ADM_LibWrapperDca() : ADM_LibWrapper()

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_libwrapper/libwrapper_global.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_libwrapper/libwrapper_global.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_libwrapper/libwrapper_global.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -1,5 +1,5 @@
 #include <stdio.h>
-#include "default.h"
+#include "ADM_default.h"
 #include "libwrapper_global.h"
 
 void initLibWrappers()

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_lvemux/ADM_muxer.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_lvemux/ADM_muxer.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_lvemux/ADM_muxer.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -27,7 +27,7 @@
 #include <sys/time.h>
 
 
-#include "default.h"
+#include "ADM_default.h"
 #include "ADM_toolkit/toolkit.hxx"
 
 #include "ADM_audiofilter/audioprocess.hxx"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_mplex/ADM_mplexin.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_mplex/ADM_mplexin.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_mplex/ADM_mplexin.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -27,7 +27,7 @@
 #undef free
 #include <ADM_assert.h>
 
-#include "default.h"
+#include "ADM_default.h"
 #include "ADM_toolkit/toolkit.hxx"
 
 

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_mplex/ADM_mplexmuxer.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_mplex/ADM_mplexmuxer.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_mplex/ADM_mplexmuxer.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -37,7 +37,7 @@
 #undef free
 #include <ADM_assert.h>
 
-#include "default.h"
+#include "ADM_default.h"
 #include "ADM_toolkit/toolkit.hxx"
 
 #include "ADM_audiofilter/audioprocess.hxx"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_mplex/ADM_mplexout.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_mplex/ADM_mplexout.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_mplex/ADM_mplexout.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -13,7 +13,7 @@
 #undef free
 #include <ADM_assert.h>
 
-#include "default.h"
+#include "ADM_default.h"
 #include "ADM_toolkit/toolkit.hxx"
 
 

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_mplex/ADM_mthread.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_mplex/ADM_mthread.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_mplex/ADM_mthread.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -20,7 +20,7 @@
 #include <math.h>
 #include <pthread.h>
 #define WIN32_CLASH
-#include "default.h"
+#include "ADM_default.h"
 
 #include "ADM_toolkit/toolkit.hxx"
 #include <ADM_assert.h>
@@ -37,7 +37,6 @@
 
 #include "ADM_encoder/ADM_vidEncode.hxx"
 
-#include "ADM_osSupport/ADM_threads.h"
 #include "ADM_lavformat/ADM_lavformat.h"
 #include "ADM_mthread.h"
 

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_mplex/ADM_mthread.h
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_mplex/ADM_mthread.h	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_mplex/ADM_mthread.h	2008-02-24 17:29:52 UTC (rev 3800)
@@ -20,7 +20,7 @@
 #ifndef ADM_MTHREADS_H
 #define ADM_MTHREADS_H
 typedef  void * (*THRINP)(void *p);
-#include "ADM_osSupport/ADM_threads.h"
+
 extern admMutex accessMutex;
 
 typedef struct 

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_mplex/ADM_transfert.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_mplex/ADM_transfert.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_mplex/ADM_transfert.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -23,7 +23,7 @@
 #include <stdlib.h>
 #include <string.h>
 #include <ADM_assert.h>
-#include "default.h"
+#include "ADM_default.h"
 
 
 #include"ADM_transfert.h"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_mplex/ADM_transfert.h
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_mplex/ADM_transfert.h	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_mplex/ADM_transfert.h	2008-02-24 17:29:52 UTC (rev 3800)
@@ -15,7 +15,6 @@
 #define TRANSFERT_BUFFER 1024*1024*10
 #define TRANSFERT_SLOT   10000
 
-#include "ADM_osSupport/ADM_threads.h"
 
 #include "ADM_toolkit/ADM_packetQueue.h"
 #endif

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_utilities/ADM_bitstream.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_utilities/ADM_bitstream.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_utilities/ADM_bitstream.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -17,7 +17,7 @@
 #include <stdio.h>
 #include <string.h>
 #include "ADM_assert.h"
-#include "default.h"
+#include "ADM_default.h"
 #include "ADM_bitstream.h"
 
 

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_utilities/ADM_fileio.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_utilities/ADM_fileio.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_utilities/ADM_fileio.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -21,7 +21,7 @@
 #include <string.h>
 #include <ADM_assert.h>
 #include <math.h>
-#include "default.h"
+#include "ADM_default.h"
 #include "ADM_fileio.h"
 #include "ADM_osSupport/ADM_quota.h"
 

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_utilities/ADM_image.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_utilities/ADM_image.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_utilities/ADM_image.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -17,10 +17,10 @@
 #include <stdio.h>
 #include <string.h>
 #include "ADM_assert.h"
-#include "default.h"
+#include "ADM_default.h"
 
 #include "ADM_image.h"
-#include "ADM_osSupport/ADM_cpuCap.h"
+
 //#include "ADM_assert.h"
 void ADMImage_stat( void );
 

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_utilities/ADM_image.h
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_utilities/ADM_image.h	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_utilities/ADM_image.h	2008-02-24 17:29:52 UTC (rev 3800)
@@ -22,7 +22,7 @@
 //
 #ifndef ADM_IMAGE
 #define ADM_IMAGE
-#include "../ADM_assert.h"
+#include "ADM_assert.h"
 #include "../ADM_colorspace/ADM_rgb.h"
 
 typedef enum 

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_utilities/ADM_imageLoader.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_utilities/ADM_imageLoader.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_utilities/ADM_imageLoader.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -17,17 +17,16 @@
 #include <stdio.h>
 #include <string.h>
 #include "ADM_assert.h"
-#include "default.h"
+#include "ADM_default.h"
 
 #include "ADM_lavcodec.h"
-#include "ADM_utilities/default.h"
 #include "ADM_utilities/fourcc.h"
 
 #include "ADM_colorspace/colorspace.h"
 
 #include "ADM_image.h"
-#include "ADM_osSupport/ADM_cpuCap.h"
 
+
 #include "ADM_codecs/ADM_codec.h"
 #include "ADM_codecs/ADM_ffmp43.h"
 #include "ADM_codecs/ADM_png.h"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_utilities/ADM_imageResizer.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_utilities/ADM_imageResizer.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_utilities/ADM_imageResizer.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -17,11 +17,11 @@
 #include <stdio.h>
 #include <string.h>
 #include "ADM_assert.h"
-#include "default.h"
+#include "ADM_default.h"
 
 #include "ADM_image.h"
-#include "ADM_osSupport/ADM_cpuCap.h"
 
+
 #if (defined( ARCH_X86)  || defined(ARCH_X86_64))
 extern "C" {
 #include "ADM_lavcodec/avcodec.h"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_utilities/ADM_imageUtils.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_utilities/ADM_imageUtils.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_utilities/ADM_imageUtils.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -18,14 +18,14 @@
 #include <stdio.h>
 #include <string.h>
 #include "ADM_assert.h"
-#include "default.h"
+#include "ADM_default.h"
 
 #include "ADM_image.h"
 #include "ADM_toolkit/bitmap.h"
 #include "avifmt.h"
 #include "ADM_utilities/avifmt2.h"
 #include "ADM_utilities/ADM_bitstream.h"
-#include "ADM_osSupport/ADM_cpuCap.h"
+
 #include "ADM_toolkit/toolkit.hxx"
 #include "ADM_colorspace/colorspace.h"
 #include "ADM_encoder/ADM_vidEncode.hxx"
@@ -33,7 +33,7 @@
 #include "ADM_codecs/ADM_codec.h"
 #include "ADM_lavcodec.h"
 #include "ADM_codecs/ADM_ffmpeg.h"
-#include "admmangle.h"
+
 static uint8_t tinyAverage(uint8_t *dst, uint8_t *src1, uint8_t *src2,uint32_t l)
 {
 

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_utilities/ADM_pp.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_utilities/ADM_pp.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_utilities/ADM_pp.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -26,9 +26,9 @@
 #include "ADM_lavcodec.h"
 #include <ADM_assert.h>
 
-#include "default.h"
+#include "ADM_default.h"
 
-#include "ADM_osSupport/ADM_cpuCap.h"
+
 #include "ADM_pp.h"
 
 

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_utilities/ADM_print.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_utilities/ADM_print.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_utilities/ADM_print.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -6,7 +6,7 @@
 
 #include "config.h"
 #include "fourcc.h"
-#include "default.h"
+#include "ADM_default.h"
 #include "math.h"
 
 #include "ADM_toolkit/toolkit.hxx"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_utilities/avifmt.h
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_utilities/avifmt.h	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_utilities/avifmt.h	2008-02-24 17:29:52 UTC (rev 3800)
@@ -8,7 +8,7 @@
  *
  ****************************************************************************/
 
-#include "default.h"
+#include "ADM_default.h"
 
 #ifndef NOAVIFMT
 

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_utilities/fourcc.h
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_utilities/fourcc.h	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_utilities/fourcc.h	2008-02-24 17:29:52 UTC (rev 3800)
@@ -16,7 +16,7 @@
  ***************************************************************************/
 #ifndef __FOUR_CC__
 #define __FOUR_CC__
- #include "default.h"
+#include "ADM_default.h"
 class fourCC
 {
 public:

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_utilities/prefs.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_utilities/prefs.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_utilities/prefs.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -12,26 +12,23 @@
  ***************************************************************************/
 
 
-#include "config.h"
-#include <stdlib.h>
-#include <stdio.h>
-#include <string.h>
-#include <strings.h>
-#include <unistd.h>	/* access(), R_OK */
-#include <errno.h>	/* errno, ENOENT */
-#include <dirent.h>
 
-#include "default.h"
-#include "ADM_toolkit/toolkit.hxx"
-#include "ADM_osSupport/ADM_quota.h"
 
+
 #include "config.h"
 
 #ifdef USE_LIBXML2
 #include <libxml/tree.h>
 #include <libxml/parser.h>
 #endif
-#include <ADM_assert.h>
+#include "ADM_default.h"
+#include "ADM_toolkit/toolkit.hxx"
+#include "ADM_osSupport/ADM_quota.h"
+#include <string.h>
+#include <strings.h>
+#include <unistd.h>	/* access(), R_OK */
+#include <errno.h>	/* errno, ENOENT */
+#include <dirent.h>
 
 #undef free
 extern char *ADM_getBaseDir(void);

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_xvidratectl/ADM_xvidratectl.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_xvidratectl/ADM_xvidratectl.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_xvidratectl/ADM_xvidratectl.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -49,15 +49,13 @@
 #include <errno.h>
 #include <math.h>
 #include <limits.h>
-#include "default.h"
-#include "ADM_osSupport/ADM_misc.h"
+#include "ADM_default.h"
 #include "ADM_osSupport/ADM_quota.h"
 #include "ADM_assert.h"
 #include "ADM_xvidr_internal.h"
 #include "ADM_osSupport/ADM_debugID.h"
 #define MODULE_NAME  MODULE_XVID_RCTL
 #include "ADM_osSupport/ADM_debug.h"
-#include "ADM_osSupport/ADM_misc.h"
 
 // Glueing to avidemux
 #define DPRINTF(a,b, args...) aprintf(b,## args);

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_xvidratectl/ADM_xvidratectlVBV.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_xvidratectl/ADM_xvidratectlVBV.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_xvidratectl/ADM_xvidratectlVBV.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -18,7 +18,7 @@
 #include <errno.h>
 #include <math.h>
 #include <limits.h>
-#include "default.h"
+#include "ADM_default.h"
 #include "ADM_assert.h"
 
 #include "ADM_osSupport/ADM_debugID.h"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_ocr/ADM_bitmapSource.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_ocr/ADM_bitmapSource.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_ocr/ADM_bitmapSource.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -15,7 +15,7 @@
  #include <stdlib.h>
  #include <string.h>
  #include "ADM_assert.h"
- #include "default.h"
+#include "ADM_default.h"
 
  #include "ADM_editor/ADM_edit.hxx"
  #include "ADM_video/ADM_genvideo.hxx"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_ocr/ADM_ocr.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_ocr/ADM_ocr.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_ocr/ADM_ocr.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -15,7 +15,7 @@
  #include <stdlib.h>
  #include <string.h>
  #include "ADM_assert.h"
- #include "default.h"
+#include "ADM_default.h"
 
  #include "ADM_editor/ADM_edit.hxx"
  #include "ADM_video/ADM_genvideo.hxx"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_ocr/ADM_ocrEngine.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_ocr/ADM_ocrEngine.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_ocr/ADM_ocrEngine.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -15,7 +15,7 @@
  #include <stdlib.h>
  #include <string.h>
  #include "ADM_assert.h"
- #include "default.h"
+#include "ADM_default.h"
 
  #include "ADM_editor/ADM_edit.hxx"
  #include "ADM_video/ADM_genvideo.hxx"
@@ -24,8 +24,8 @@
  #include "ADM_ocrInternal.h"
  #include "ADM_toolkit/toolkit.hxx"
 
+#include "ADM_video/ADM_vidMisc.h"
 
-
 /**************************
  *  UI Dependant part
  *************************/

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_ocr/ADM_vob2vobsub.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_ocr/ADM_vob2vobsub.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_ocr/ADM_vob2vobsub.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -36,7 +36,7 @@
 
 //#define TEST_V2V
 
-#include "default.h"
+#include "ADM_default.h"
 #include "ADM_toolkit/toolkit.hxx"
 #include "ADM_assert.h"
 
@@ -47,6 +47,9 @@
 #include "ADM_mpegdemuxer/dmx_demuxer.h"
 #include "ADM_mpegdemuxer/dmx_demuxerPS.h"
 #include "ADM_userInterfaces/ADM_commonUI/DIA_working.h"
+
+#include "ADM_video/ADM_vidMisc.h"
+
 #define ADM_VOBSUB_NO_PADDING
 static int vobsub_parse_ifo(const char *const name, 
                      uint32_t *palette, 

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_ocr/adm_glyph.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_ocr/adm_glyph.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_ocr/adm_glyph.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -11,7 +11,7 @@
  #include <stdlib.h>
  #include <string.h>
  #include "ADM_assert.h"
- #include "default.h"
+#include "ADM_default.h"
  #include "adm_glyph.h"
 #include "ADM_toolkit/toolkit.hxx"
  //*************************************************

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_ocr/adm_glyph.h
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_ocr/adm_glyph.h	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_ocr/adm_glyph.h	2008-02-24 17:29:52 UTC (rev 3800)
@@ -10,7 +10,7 @@
 #ifndef ADM_GLYPH_
 #define ADM_GLYPH_
 
-#include "default.h"
+#include "ADM_default.h"
 /*
     returns 1 if the line is empty
     0 if not

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_osSupport/ADM_cpuCap.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_osSupport/ADM_cpuCap.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_osSupport/ADM_cpuCap.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -19,9 +19,9 @@
 #include <sched.h>
 #endif
 
-#include "default.h"
-#include "admmangle.h"
-#include "ADM_osSupport/ADM_cpuCap.h"
+#include "ADM_default.h"
+
+
 #include "prefs.h"
 
 /* Cpu caps interface to other libs */

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_osSupport/ADM_crashdump.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_osSupport/ADM_crashdump.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_osSupport/ADM_crashdump.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -20,7 +20,7 @@
 #include <stdlib.h>
 #include <stdarg.h>
 #include <string.h>
-#include <default.h>
+#include "ADM_default.h"
 #include <unistd.h>
 
 #include <math.h>
@@ -33,7 +33,7 @@
 #include <imagehlp.h>
 #endif
 
-#include "default.h"
+
 #include "ADM_toolkit/toolkit.hxx"
 #include "ADM_userInterfaces/ADM_commonUI/DIA_factory.h"
 #include "ADM_editor/ADM_edit.hxx"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_osSupport/ADM_debug.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_osSupport/ADM_debug.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_osSupport/ADM_debug.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -22,7 +22,7 @@
 #include <stdlib.h>
 #include <stdarg.h>
 #include <string.h>
-#include <default.h>
+#include "ADM_default.h"
 #include <ADM_assert.h>
 #include <math.h>
 

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_osSupport/ADM_fileio.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_osSupport/ADM_fileio.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_osSupport/ADM_fileio.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -27,10 +27,10 @@
 #include <glib.h>
 #endif
 
-#include "default.h"
-#include "ADM_misc.h"
+#include "ADM_default.h"
 
 
+
 #include "ADM_toolkit/filesel.h"
 #include "ADM_toolkit/toolkit.hxx"
 

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_osSupport/ADM_memcpy.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_osSupport/ADM_memcpy.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_osSupport/ADM_memcpy.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -41,8 +41,8 @@
 #include <stdlib.h>
 #include <string.h>
 
-#include "default.h"
-#include "ADM_osSupport/ADM_cpuCap.h"
+#include "ADM_default.h"
+
 extern "C"
 {
         #include "ADM_lavcodec/dsputil_cpu.h"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_osSupport/ADM_memsupport.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_osSupport/ADM_memsupport.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_osSupport/ADM_memsupport.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -23,10 +23,10 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
-#include "default.h"
-#include "ADM_assert.h"
-#include "ADM_osSupport/ADM_threads.h"
+#include "ADM_default.h"
 
+
+
 #undef memalign
 #undef malloc
 #undef free

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_osSupport/ADM_misc.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_osSupport/ADM_misc.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_osSupport/ADM_misc.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -30,10 +30,10 @@
 #include <ctype.h>
 #include <sys/time.h>
 
-#include "default.h"
+#include "ADM_default.h"
 #include "ADM_assert.h"
-#include "ADM_misc.h"
 
+#include "ADM_video/ADM_vidMisc.h"
 
 //
 //    Sleep for n ms

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_osSupport/ADM_queue.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_osSupport/ADM_queue.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_osSupport/ADM_queue.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -18,8 +18,8 @@
 #include <stdlib.h>
 #include <string.h>
 #include <ADM_assert.h>
-#include "default.h"
-#include "ADM_osSupport/ADM_threads.h"
+#include "ADM_default.h"
+
 #include "ADM_queue.h"
 
 ADM_queue::ADM_queue()

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_osSupport/ADM_quota.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_osSupport/ADM_quota.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_osSupport/ADM_quota.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -1,12 +1,8 @@
-#include "config.h"
+#define ADM_LEGACY_PROGGY
+#include "ADM_default.h"
 #include <errno.h>
-#include <string.h>
-#include <stdarg.h>
-#include <assert.h>
-
 #include "ADM_quota.h"
 
-#include "default.h"
 
 extern uint8_t DIA_quota(char *);
 struct qfile_t {
@@ -19,7 +15,7 @@
 static qfile_t qfile[qfile_len];
 
 #include "ADM_toolkit/toolkit.hxx"
-//#include "ADM_misc.h"
+
          
 #ifdef USE_LIBXML2
 #include <libxml/tree.h>

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_osSupport/ADM_threads.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_osSupport/ADM_threads.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_osSupport/ADM_threads.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -18,10 +18,10 @@
 #include <stdlib.h>
 #include <string.h>
 #include <ADM_assert.h>
-#include "default.h"
-#include "ADM_osSupport/ADM_threads.h"
+#include "ADM_default.h"
 
 
+
 #define THR_CHECK(x) {int r=(x);if(r) {printf("Threading error :%d %s\n", \
                       r,strerror(r));exit(0);}}
 //**************** Mutex *******************

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_osSupport/TLK_clock.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_osSupport/TLK_clock.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_osSupport/TLK_clock.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -40,9 +40,9 @@
 #include "ADM_osSupport/ADM_debug.h"
 
 #include "avi_vars.h"
-//#include "toolkit.hxx"
-#include "ADM_misc.h"
-#include "TLK_clock.h"
+
+
+
 static uint8_t inited=0;
 static struct timeval _itimev;
 static uint32_t getAbsTime( void );

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_osSupport/win32.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_osSupport/win32.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_osSupport/win32.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -5,8 +5,8 @@
 #include <stdio.h>
 #include <stdlib.h>
 
-#include "default.h" 
-#include "ADM_misc.h"
+#include "ADM_default.h"
+
 #include "windows.h"
 #include "io.h"
 #include "winsock2.h"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_outputs/oplug_avi/op_avisave.h
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_outputs/oplug_avi/op_avisave.h	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_outputs/oplug_avi/op_avisave.h	2008-02-24 17:29:52 UTC (rev 3800)
@@ -17,7 +17,7 @@
  #ifndef __AVI_SAVE__
  #define   __AVI_SAVE__
 
- #include "default.h"
+#include "ADM_default.h"
  #include "DIA_working.h"
  #include "DIA_encoding.h"
  #include "ADM_image.h"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_outputs/oplug_dummy/oplug_dummy.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_outputs/oplug_dummy/oplug_dummy.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_outputs/oplug_dummy/oplug_dummy.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -29,7 +29,7 @@
 extern "C" {
 #include "ADM_lavcodec.h"
 };
-#include "default.h"
+#include "ADM_default.h"
 #include "ADM_editor/ADM_Video.h"
 #include "ADM_colorspace/colorspace.h"
 #include "ADM_toolkit/toolkit.hxx"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -28,7 +28,7 @@
 extern "C" {
 #include "ADM_lavcodec.h"
 };
-#include "default.h"
+#include "ADM_default.h"
 #include "ADM_editor/ADM_Video.h"
 #include "ADM_colorspace/colorspace.h"
 #include "ADM_toolkit/toolkit.hxx"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_outputs/oplug_mpeg/op_mpegpass.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_outputs/oplug_mpeg/op_mpegpass.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_outputs/oplug_mpeg/op_mpegpass.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -21,10 +21,10 @@
 #include <errno.h>
 
 
-#include "default.h"
+#include "ADM_default.h"
 
 
-#include "ADM_osSupport/ADM_threads.h"
+
 #define WIN32_CLASH
 #include "avi_vars.h"
 #include <ADM_assert.h>

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -61,7 +61,7 @@
 #include "ADM_encoder/adm_encConfig.h"
 #include "ADM_encoder/ADM_vidEncode.hxx"
 
-#include "ADM_osSupport/ADM_threads.h"
+
 #include "ADM_mplex/ADM_mthread.h"
 #warning REMOVE unistd
 #include "unistd.h"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_outputs/oplug_ogm/op_ogpage.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_outputs/oplug_ogm/op_ogpage.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_outputs/oplug_ogm/op_ogpage.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -27,7 +27,7 @@
 
 #include <math.h>
 #include <ADM_assert.h>
-#include "default.h"
+#include "ADM_default.h"
 #include "avifmt.h"
 #include "avifmt2.h"
 #include "oplug_ogm/op_ogpage.h"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_outputs/oplug_ogm/op_ogsave.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_outputs/oplug_ogm/op_ogsave.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_outputs/oplug_ogm/op_ogsave.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -45,7 +45,7 @@
 #include "ADM_audio/aviaudio.hxx"
 #include "ADM_audiofilter/audioprocess.hxx"
 
-#include "default.h"
+#include "ADM_default.h"
 #include "oplug_ogm/op_ogsave.h"
 
 //_______________________________________________

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_outputs/oplug_ogm/op_ogsavecopy.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_outputs/oplug_ogm/op_ogsavecopy.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_outputs/oplug_ogm/op_ogsavecopy.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -38,7 +38,7 @@
 #include "ADM_audio/aviaudio.hxx"
 #include "ADM_audiofilter/audioprocess.hxx"
 
-#include "default.h"
+#include "ADM_default.h"
 
 #include "oplug_ogm/op_ogsave.h"
 

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_outputs/oplug_ogm/op_ogsaveprocess.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_outputs/oplug_ogm/op_ogsaveprocess.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_outputs/oplug_ogm/op_ogsaveprocess.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -45,7 +45,7 @@
 #include "ADM_audio/aviaudio.hxx"
 #include "ADM_audiofilter/audioprocess.hxx"
 
-#include "default.h"
+#include "ADM_default.h"
 
 #include "oplug_ogm/op_ogsave.h"
 

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_preview.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_preview.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_preview.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -38,7 +38,7 @@
 #include "ADM_assert.h"
 #include "config.h"
 
-#include "default.h"
+#include "ADM_default.h"
 
 #include "ADM_toolkit/toolkit.hxx"
 #include "ADM_editor/ADM_edit.hxx"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_requant/tcrequant.c
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_requant/tcrequant.c	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_requant/tcrequant.c	2008-02-24 17:29:52 UTC (rev 3800)
@@ -55,14 +55,14 @@
 
 
 // MEANX
-#include "default.h"
+#include "ADM_default.h"
 #include "tcrequant.h"
 
 #include "../ADM_osSupport/ADM_debugID.h"
 #define MODULE_NAME MODULE_TCREQUANT
 #include "../ADM_osSupport/ADM_debug.h"
-#include "../ADM_assert.h"
 
+
 // / MEANX
  void mixDump_c(uint8_t *p, uint32_t l);
 

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_script/ADM_JSAvidemux.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_script/ADM_JSAvidemux.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_script/ADM_JSAvidemux.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -15,7 +15,7 @@
 #include <pthread.h>
 #define WIN32_CLASH
 #include "ADM_JSAvidemux.h"
-#include "default.h"
+#include "ADM_default.h"
 #include "ADM_toolkit/toolkit.hxx"
 #include "../ADM_userInterfaces/ADM_commonUI/GUI_ui.h"
 #include "ADM_editor/ADM_outputfmt.h"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_script/ADM_JSAvidemuxAudio.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_script/ADM_JSAvidemuxAudio.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_script/ADM_JSAvidemuxAudio.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -14,7 +14,7 @@
 #include <stdlib.h>
 #include "ADM_JSGlobal.h"
 #include "ADM_JSAvidemuxAudio.h"
-#include "default.h"
+#include "ADM_default.h"
 #include "ADM_toolkit/toolkit.hxx"
 #include "../ADM_userInterfaces/ADM_commonUI/GUI_ui.h"
 #include "ADM_audiofilter/audioeng_buildfilters.h"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_script/ADM_JSAvidemuxVideo.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_script/ADM_JSAvidemuxVideo.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_script/ADM_JSAvidemuxVideo.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -14,7 +14,7 @@
 #include <stdlib.h>
 #include "ADM_JSAvidemuxVideo.h"
 #include "ADM_JSGlobal.h"
-#include "default.h"
+#include "ADM_default.h"
 #include "ADM_toolkit/toolkit.hxx"
 #include "../ADM_userInterfaces/ADM_commonUI/GUI_ui.h"
 #include "ADM_audiofilter/audioeng_buildfilters.h"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_script/ADM_JSFunctions.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_script/ADM_JSFunctions.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_script/ADM_JSFunctions.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -26,7 +26,7 @@
 #include <string>
 #include "ADM_JSAvidemux.h"
 #include "ADM_JSGlobal.h"
-#include "default.h"
+#include "ADM_default.h"
 #include "ADM_toolkit/toolkit.hxx"
 #include "ADM_editor/ADM_outputfmt.h"
 #include "ADM_audiofilter/audioeng_buildfilters.h"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_script/ADM_JSGlobal.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_script/ADM_JSGlobal.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_script/ADM_JSGlobal.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -3,7 +3,7 @@
 #include <stdlib.h>
 #include <string.h>
 #include <pthread.h>
-#include "default.h"
+#include "ADM_default.h"
 #include "ADM_toolkit/toolkit.hxx"
 #include "ADM_JSGlobal.h"
 #include "ADM_JSAvidemux.h"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_toolkit/ADM_audioQueue.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_toolkit/ADM_audioQueue.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_toolkit/ADM_audioQueue.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -12,8 +12,8 @@
 #include <stdlib.h>
 #include <string.h>
 #include <ADM_assert.h>
-#include "ADM_utilities/default.h"
-#include "ADM_osSupport/ADM_threads.h"
+#include "ADM_default.h"
+
 #include "ADM_audiofilter/audioprocess.hxx"
 #include "ADM_audiofilter/audioeng_buildfilters.h"
 

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_toolkit/ADM_intfloat.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_toolkit/ADM_intfloat.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_toolkit/ADM_intfloat.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -16,9 +16,9 @@
 #include <stdlib.h>
 #include <string.h>
 
-#include "ADM_utilities/default.h"
-#include "ADM_osSupport/ADM_cpuCap.h"
+#include "ADM_default.h"
 
+
 #include "ADM_assert.h"
 
 #include "ADM_intfloat.h"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_toolkit/ADM_packetQueue.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_toolkit/ADM_packetQueue.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_toolkit/ADM_packetQueue.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -18,9 +18,9 @@
 #include <stdlib.h>
 #include <string.h>
 #include <ADM_assert.h>
-#include "ADM_utilities/default.h"
-#include "ADM_osSupport/ADM_threads.h"
+#include "ADM_default.h"
 
+
 #include "ADM_packetQueue.h"
 /*!
   Constructor for packetQueue

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_toolkit/ADM_packetQueue.h
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_toolkit/ADM_packetQueue.h	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_toolkit/ADM_packetQueue.h	2008-02-24 17:29:52 UTC (rev 3800)
@@ -14,7 +14,7 @@
  ***************************************************************************/
 #ifndef ADM_PACKET_QUEUE_H
 #define ADM_PACKET_QUEUE_H
-#include "ADM_osSupport/ADM_threads.h"
+
 typedef struct  
 {
   uint32_t      size;       //< Size of the packet

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_toolkit/automation.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_toolkit/automation.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_toolkit/automation.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -44,8 +44,8 @@
 #include "ADM_utilities/avidemutils.h"
 
 #include "ADM_filter/vidVCD.h"
+#include "ADM_video/ADM_vidMisc.h"
 
-
 extern void filterListAll(void );
 
 extern uint8_t loadVideoCodecConf( char *name);

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_toolkit/toolkit.hxx
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_toolkit/toolkit.hxx	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_toolkit/toolkit.hxx	2008-02-24 17:29:52 UTC (rev 3800)
@@ -17,7 +17,7 @@
 
 #ifndef __TOOLKIT__
 #define __TOOLKIT__
-#include "ADM_osSupport/ADM_misc.h"
+
 void            GUI_Alert(const char *alertstring);
 void            GUI_Info(const char *alertstring);
 void            GUI_Info_HIG(const ADM_LOG_LEVEL level,const char *primary, const char *secondary_format, ...);

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_SwissArmyKnife.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_SwissArmyKnife.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_SwissArmyKnife.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -15,9 +15,7 @@
  *                                                                         *
  ***************************************************************************/
 
-#include "default.h"
-
-#include <gtk/gtk.h>
+#include "ADM_toolkit_gtk/toolkit_gtk.h"
 #include <cmath>
 
 #include "fourcc.h"
@@ -31,10 +29,6 @@
 #include "ADM_video/ADM_genvideo.hxx"
 #include "ADM_videoFilter/ADM_vidSwissArmyKnife.h"
 #include "ADM_toolkit/toolkit.hxx"
-#include "ADM_toolkit_gtk/ADM_gladeSupport.h"
-#include "ADM_toolkit_gtk/toolkit_gtk.h"
-#include "ADM_toolkit_gtk/toolkit_gtk_include.h"
-#include "ADM_assert.h"
 #include "DIA_flyDialog.h"
 #include "DIA_flySwissArmyKnife.h"
 #include "ADM_userInterfaces/ADM_commonUI/DIA_factory.h" // for diaElemMenu etc.

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_about.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_about.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_about.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -3,19 +3,7 @@
  */
 
 
-#include "config.h"
-
-#include <sys/types.h>
-#include <sys/stat.h>
-#include <string.h>
-#include <stdio.h>
-
-#include <gdk/gdkkeysyms.h>
-#include <gtk/gtk.h>
-#include "default.h"
-#include "ADM_toolkit_gtk/ADM_gladeSupport.h"
 #include "ADM_toolkit_gtk/toolkit_gtk.h"
-#include "ADM_toolkit_gtk/toolkit_gtk_include.h"
 
 static GtkWidget	*create_aboutdialog1 (void);
 uint8_t DIA_about( void )

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_acodec.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_acodec.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_acodec.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -2,33 +2,12 @@
  * DO NOT EDIT THIS FILE - it is generated by Glade.
  */
 
-#include "config.h"
+#include "ADM_toolkit_gtk/toolkit_gtk.h"
 
-#include <sys/types.h>
-#include <sys/stat.h>
-#include <unistd.h>
-#include <string.h>
-#include <stdio.h>
-
-
-#include <gdk/gdkkeysyms.h>
-#include <gtk/gtk.h>
-
-#include "config.h"
-#include "default.h"
-// #include "avifmt.h"
-// #include "avifmt2.h"
-// #include "avio.hxx"
-// #include "fourcc.h"
-
-#include <ADM_assert.h>
-
 #include "ADM_audiofilter/audioprocess.hxx"
 #include "ADM_audiofilter/audioeng_buildfilters.h"
 #include "ADM_audiocodec/ADM_audiocodeclist.h"
 
-#include "ADM_toolkit_gtk/toolkit_gtk.h"
-#include "ADM_toolkit_gtk/ADM_gladeSupport.h"
 
 
 #define GLADE_HOOKUP_OBJECT(component,widget,name) \

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_asharp.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_asharp.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_asharp.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -21,17 +21,7 @@
 
 
 
-#include <config.h>
-
-
-#include <string.h>
-#include <stdio.h>
-#include <math.h>
-#include "default.h"
-#include "ADM_toolkit_gtk/ADM_gladeSupport.h"
 #include "ADM_toolkit_gtk/toolkit_gtk.h"
-#include "ADM_toolkit_gtk/toolkit_gtk_include.h"
-
 #include "ADM_colorspace/ADM_rgb.h"
 
 #include "ADM_image.h"
@@ -39,8 +29,8 @@
 #include "ADM_videoFilter/ADM_vidASharp_param.h"
 #include "DIA_flyDialog.h"
 #include "DIA_flyAsharp.h"
-#include "ADM_assert.h"
 
+
 uint8_t DIA_getASharp(ASHARP_PARAM *param, AVDMGenericVideoStream *in);
 
 static GtkWidget        *create_dialog1 (void);

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_busy.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_busy.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_busy.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -18,25 +18,7 @@
  *                                                                         *
  ***************************************************************************/
 
-#include <sys/types.h>
-#include <sys/stat.h>
-#include <unistd.h>
-#include <string.h>
-#include <stdio.h>
-#include <math.h>
-
-#include <gdk/gdkkeysyms.h>
-#include <gtk/gtk.h>
-
-#include "config.h"
-#include <gdk/gdkkeysyms.h>
-#include <gtk/gtk.h>
-
-
-#include "default.h"
-#include "ADM_toolkit_gtk/ADM_gladeSupport.h"
 #include "ADM_toolkit_gtk/toolkit_gtk.h"
-#include "ADM_toolkit_gtk/toolkit_gtk_include.h"
 #include "ADM_toolkit/toolkit.hxx"
 
 #include "DIA_busy.h"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -14,27 +14,14 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
-#include "config.h"
-
-#include <stdio.h>
-#include <stdlib.h>
-#include <string.h>
-
-#include <math.h>
-#include <gtk/gtk.h>
-
-#include "fourcc.h"
-
-
-#include "default.h"
 #include "ADM_toolkit_gtk/toolkit_gtk.h"
-#include "ADM_toolkit_gtk/toolkit_gtk_include.h"
+
 #include "ADM_toolkit/toolkit.hxx"
 #include "ADM_toolkit/filesel.h"
-#include "ADM_assert.h"
 
 
 
+
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_video/ADM_genvideo.hxx"
 
@@ -44,7 +31,8 @@
 
 
 #include "ADM_filter/video_filters.h"
-
+#include "ADM_video/ADM_vidMisc.h"
+#include "avi_vars.h"
 void DIA_Calculator(uint32_t *sizeInMeg, uint32_t *avgBitrate );
 static GtkWidget	*create_Calculator (void);  
 static GtkWidget *dialog;  

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_chromaShift.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_chromaShift.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_chromaShift.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -14,16 +14,7 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
-#include <config.h>
-#include <string.h>
-#include <stdio.h>
-#include <gdk/gdkkeysyms.h>
-#include <gtk/gtk.h>
-# include <math.h>
-
-#include "default.h"
 #include "ADM_toolkit_gtk/toolkit_gtk.h"
-#include "ADM_toolkit_gtk/toolkit_gtk_include.h"
 #include "ADM_toolkit/toolkit.hxx"
 
 #include "ADM_image.h"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_cnr2.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_cnr2.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_cnr2.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -11,27 +11,10 @@
 //
 //
 
-#include <config.h>
-
-
-#include <string.h>
-#include <stdio.h>
-#include "default.h"
-
-#include <gtk/gtk.h>
-
-
-#include <gdk/gdkkeysyms.h>
-#include <gtk/gtk.h>
-# include <math.h>
-
-
-#include "ADM_toolkit_gtk/ADM_gladeSupport.h"
 #include "ADM_toolkit_gtk/toolkit_gtk.h"
-#include "ADM_toolkit_gtk/toolkit_gtk_include.h"
 #include "ADM_toolkit/toolkit.hxx"
-#include "default.h"
 
+
 #include "ADM_video/ADM_vidCNR2_param.h"
 static GtkWidget        *create_dialog1 (void);
 

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_coloryuv.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_coloryuv.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_coloryuv.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -2,25 +2,10 @@
  * DO NOT EDIT THIS FILE - it is generated by Glade.
  */
 
-#include "config.h"
-
-#include <sys/types.h>
-#include <sys/stat.h>
-#include <unistd.h>
-#include <string.h>
-#include <stdio.h>
-#include <stdlib.h>
-
-#include <gdk/gdkkeysyms.h>
-#include <gtk/gtk.h>
-
-#include <ADM_assert.h>
-
+#include "ADM_toolkit_gtk/toolkit_gtk.h"
 #include "fourcc.h"
 #include "ADM_audio/aviaudio.hxx"
 #include "ADM_audiofilter/audioprocess.hxx"
-#include "ADM_toolkit_gtk/toolkit_gtk.h"
-#include "ADM_toolkit_gtk/toolkit_gtk_include.h"
 #include "ADM_audiofilter/audioeng_buildfilters.h"
 #include "ADM_toolkit_gtk/ADM_gladeSupport.h"
 

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_contrast.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_contrast.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_contrast.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -14,34 +14,17 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
-#include "config.h"
-
-#include <stdio.h>
-#include <stdlib.h>
-#include <string.h>
-
-#include <gtk/gtk.h>
-#include <time.h>
-#include <sys/time.h>
-#include <math.h>
-
-
+#include "ADM_toolkit_gtk/toolkit_gtk.h"
 #include "fourcc.h"
 
 
-#include "avi_vars.h"
-#ifdef HAVE_ENCODER
 
-
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_video/ADM_genvideo.hxx"
 #include "ADM_videoFilter/ADM_vidContrast.h"
 #include "ADM_toolkit/toolkit.hxx"
 #include "ADM_colorspace/ADM_rgb.h"
-#include "ADM_toolkit_gtk/ADM_gladeSupport.h"
-#include "ADM_toolkit_gtk/toolkit_gtk.h"
-#include "ADM_toolkit_gtk/toolkit_gtk_include.h"
-#include <ADM_assert.h>
+
 #include "DIA_flyDialog.h"
 #include "DIA_flyContrast.h"
 
@@ -290,5 +273,3 @@
   return dialog1;
 }
 
-
-#endif

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_crop.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_crop.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_crop.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -20,19 +20,13 @@
  *                                                                         *
  ***************************************************************************/
 
-#include "default.h"
-
-#include <gdk/gdkkeysyms.h>
-#include <gtk/gtk.h>
-
 #include "ADM_toolkit_gtk/toolkit_gtk.h"
-#include "ADM_toolkit_gtk/toolkit_gtk_include.h"
 #include "ADM_toolkit/toolkit.hxx"
 
 #include "ADM_image.h"
 #include "ADM_video/ADM_genvideo.hxx"
 #include "ADM_colorspace/ADM_rgb.h"
-#include "ADM_assert.h"
+
 #include "DIA_flyDialog.h"
 #include "DIA_flyCrop.h"
 

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -7,31 +7,15 @@
  *                                                                         *
  ***************************************************************************/
 
-#include <config.h>
-
-#include <sys/types.h>
-#include <sys/stat.h>
-#include <unistd.h>
-#include <string.h>
-#include <stdio.h>
-#include <math.h>
-
-#include <gdk/gdkkeysyms.h>
-#include <gtk/gtk.h>
-
-#include "default.h"
+#include "ADM_toolkit_gtk/toolkit_gtk.h"
 #include "prefs.h"
 
-#include "ADM_toolkit_gtk/ADM_gladeSupport.h"
 #include "ADM_toolkit/toolkit.hxx"
-#include "ADM_toolkit_gtk/toolkit_gtk.h"
-#include "ADM_toolkit_gtk/toolkit_gtk_include.h"
 #include "ADM_libraries/ADM_utilities/avidemutils.h"
 #include "ADM_userInterfaces/ADM_commonUI/DIA_working.h"
 
-#include "ADM_assert.h" 
-
 #include "DIA_encoding.h"
+#include "ADM_video/ADM_vidMisc.h"
 
 static GtkWidget *dialog=NULL;
 static GtkWidget	*create_dialog1 (void);

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_eq2.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_eq2.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_eq2.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -15,21 +15,7 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
-
-
-
-#include "config.h"
-#include <string.h>
-#include <stdio.h>
-#include <gdk/gdkkeysyms.h>
-#include <gtk/gtk.h>
-#include <math.h>
-
-#include "default.h"
-#include "ADM_toolkit_gtk/ADM_gladeSupport.h"
-
 #include "ADM_toolkit_gtk/toolkit_gtk.h"
-#include "ADM_toolkit_gtk/toolkit_gtk_include.h"
 #include "ADM_toolkit/toolkit.hxx"
 #include "ADM_image.h"
 #include "ADM_video/ADM_genvideo.hxx"
@@ -38,7 +24,6 @@
 #include "DIA_flyDialog.h"
 #include "DIA_flyEq2.h"
 
-#include "ADM_assert.h"
 
 static GtkWidget*create_dialog1 (void);
 static float getAdj(GtkWidget *widget);

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_equalizer.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_equalizer.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_equalizer.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -19,28 +19,17 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
-
-#include "config.h"
-
-#include <string.h>
-#include <stdio.h>
-#include <gdk/gdkkeysyms.h>
-#include <gtk/gtk.h>
-#include <math.h>
-
-#include "ADM_toolkit_gtk/ADM_gladeSupport.h"
 #include "ADM_toolkit_gtk/toolkit_gtk.h"
-#include "ADM_toolkit_gtk/toolkit_gtk_include.h"
 #include "ADM_toolkit/toolkit.hxx"
-#include "default.h"
+#include "avi_vars.h"
 
 #include "ADM_colorspace/ADM_rgb.h"
 
 #include "ADM_image.h"
 #include "ADM_video/ADM_genvideo.hxx"
 #include "ADM_video/ADM_vidEqualizer.h"
-#include "ADM_assert.h"
 
+
 extern "C" {
 #include "ADM_libraries/ADM_lavcodec/avcodec.h"
 }

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_eraser.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_eraser.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_eraser.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -15,13 +15,7 @@
  *                                                                         *
  ***************************************************************************/
 
-#include "default.h"
-
-#include <gtk/gtk.h>
-#include <cmath>
-
-#include "fourcc.h"
-
+#include "ADM_toolkit_gtk/toolkit_gtk.h"
 #include "prefs.h"
 
 #include "avi_vars.h"
@@ -34,11 +28,8 @@
 #include "ADM_video/ADM_genvideo.hxx"
 #include "ADM_videoFilter/ADM_vidEraser.h"
 #include "ADM_toolkit/toolkit.hxx"
-#include "ADM_toolkit_gtk/ADM_gladeSupport.h"
-#include "ADM_toolkit_gtk/toolkit_gtk.h"
-#include "ADM_toolkit_gtk/toolkit_gtk_include.h"
 #include "ADM_toolkit/filesel.h"
-#include "ADM_assert.h"
+
 #include "DIA_flyDialog.h"
 #include "DIA_flyEraser.h"
 #include "ADM_userInterfaces/ADM_commonUI/DIA_factory.h" // for diaElemMenu etc.

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_exLame.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_exLame.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_exLame.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -1,25 +1,8 @@
-#include <sys/types.h>
-#include <sys/stat.h>
-#include <unistd.h>
-#include <string.h>
-#include <stdio.h>
-
-#include <gdk/gdkkeysyms.h>
-#include <gtk/gtk.h>
-
-
-#include <gdk/gdkkeysyms.h>
-#include <gtk/gtk.h>
-# include <config.h>
-
-#include "default.h"
-#include "ADM_toolkit_gtk/ADM_gladeSupport.h"
 #include "ADM_toolkit_gtk/toolkit_gtk.h"
-#include "ADM_toolkit_gtk/toolkit_gtk_include.h"
 
 #include "prefs.h"
 static GtkWidget	*create_dialog1 (void);
-#include "ADM_assert.h"
+
 uint8_t DIA_lame(char **lame)
 {
 	GtkWidget *dialog;

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_flyDialog.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_flyDialog.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_flyDialog.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -12,17 +12,12 @@
 *                                                                         *
 ***************************************************************************///
 
-#include "default.h"
-
-#include <gtk/gtk.h>
-
 #include "ADM_toolkit_gtk/toolkit_gtk.h"
-#include "ADM_toolkit_gtk/toolkit_gtk_include.h"
 #include "ADM_video/ADM_genvideo.hxx"
 #include "DIA_flyDialog.h"
 #include "DIA_factory.h"
-#include "ADM_assert.h"
 
+
 #ifdef USE_JOG
 #include "gui_action.hxx"
 #include "../ADM_toolkit_gtk/ADM_jogshuttle.h"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_hue.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_hue.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_hue.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -18,22 +18,11 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
-#include <config.h>
-
-#include <string.h>
-#include <stdio.h>
-
-#include <gdk/gdkkeysyms.h>
-#include <gtk/gtk.h>
-#include <math.h>
-
-#include "default.h"
-#include "ADM_toolkit_gtk/ADM_gladeSupport.h"
 #include "ADM_toolkit_gtk/toolkit_gtk.h"
-#include "ADM_toolkit_gtk/toolkit_gtk_include.h"
 #include "ADM_toolkit/toolkit.hxx"
-#include "default.h"
 
+
+
 #include "ADM_colorspace/ADM_rgb.h"
 
 #include "ADM_image.h"
@@ -42,7 +31,6 @@
 #include "DIA_flyDialog.h"
 #include "DIA_flyHue.h"
 
-#include "ADM_assert.h"
 
 static GtkWidget	*create_dialog1 (void);
 static void  		update ( void);

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_idx_pg.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_idx_pg.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_idx_pg.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -15,28 +15,14 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
-#include <sys/types.h>
-#include <sys/stat.h>
-#include <unistd.h>
-#include <string.h>
-#include <stdio.h>
-#include <math.h>
-
-#include <gdk/gdkkeysyms.h>
-#include <gtk/gtk.h>
-
-#include "config.h"
-#include "ADM_toolkit_gtk/ADM_gladeSupport.h"
-#include "default.h"
 #include "ADM_toolkit_gtk/toolkit_gtk.h"
-#include "ADM_toolkit_gtk/toolkit_gtk_include.h"
 #include "ADM_toolkit/toolkit.hxx"
 
 #include "ADM_video/ADM_genvideo.hxx"
 #include "ADM_encoder/ADM_vidEncode.hxx"
 #include "ADM_encoder/adm_encoder.h"
 #include "DIA_idx_pg.h"
-
+#include "ADM_video/ADM_vidMisc.h"
 static GtkWidget *dialog=NULL;
 static GtkWidget       *create_dialog1 (void);
 static int abted;

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -1,21 +1,4 @@
-#include <sys/types.h>
-#include <sys/stat.h>
-#include <unistd.h>
-#include <string.h>
-#include <stdio.h>
-
-#include <gdk/gdkkeysyms.h>
-#include <gtk/gtk.h>
-
-
-#include <gdk/gdkkeysyms.h>
-#include <gtk/gtk.h>
-# include <math.h>
-# include "config.h"
-#include "default.h"
-#include "ADM_toolkit_gtk/ADM_gladeSupport.h"
 #include "ADM_toolkit_gtk/toolkit_gtk.h"
-#include "ADM_toolkit_gtk/toolkit_gtk_include.h"
 #include "ADM_toolkit/toolkit.hxx"
 
 static GtkWidget       *create_dialog1 (void);

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs_save.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs_save.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs_save.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -1,21 +1,4 @@
-#include <sys/types.h>
-#include <sys/stat.h>
-#include <unistd.h>
-#include <string.h>
-#include <stdio.h>
-
-#include <gdk/gdkkeysyms.h>
-#include <gtk/gtk.h>
-
-
-#include <gdk/gdkkeysyms.h>
-#include <gtk/gtk.h>
-# include <math.h>
-# include "config.h"
-#include "default.h"
-#include "ADM_toolkit_gtk/ADM_gladeSupport.h"
 #include "ADM_toolkit_gtk/toolkit_gtk.h"
-#include "ADM_toolkit_gtk/toolkit_gtk_include.h"
 #include "ADM_toolkit/toolkit.hxx"
 #include "ADM_toolkit/filesel.h"
 #include "avidemutils.h"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_mpdelogo.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_mpdelogo.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_mpdelogo.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -20,24 +20,13 @@
  *                                                                         *
  ***************************************************************************/
 
-#include "config.h"
-
-#include <string.h>
-#include <stdio.h>
-
-#include <gdk/gdkkeysyms.h>
-#include <gtk/gtk.h>
-#include <math.h>
-
-#include "default.h"
 #include "ADM_toolkit_gtk/toolkit_gtk.h"
-#include "ADM_toolkit_gtk/toolkit_gtk_include.h"
 #include "ADM_toolkit/toolkit.hxx"
 
 #include "ADM_image.h"
 #include "ADM_video/ADM_genvideo.hxx"
 #include "ADM_colorspace/ADM_rgb.h"
-#include "ADM_assert.h"
+
 #include "ADM_video/ADM_vidMPdelogo.h"
 
 extern "C" {

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_ocr.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_ocr.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_ocr.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -2,23 +2,7 @@
  * DO NOT EDIT THIS FILE - it is generated by Glade.
  */
 
-#ifdef HAVE_CONFIG_H
-#  include <config.h>
-#endif
-
-#include <sys/types.h>
-#include <sys/stat.h>
-#include <unistd.h>
-#include <string.h>
-#include <stdio.h>
-
-#include <gdk/gdkkeysyms.h>
-#include <gtk/gtk.h>
-
-#include "ADM_toolkit_gtk/ADM_gladeSupport.h"
 #include "ADM_toolkit_gtk/toolkit_gtk.h"
-#include "ADM_toolkit_gtk/toolkit_gtk_include.h"
-
 GtkWidget*
 DIA_ocr (void)
 {

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_partial.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_partial.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_partial.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -22,24 +22,7 @@
 //
 
 
-#include <config.h>
-
-#include <sys/types.h>
-#include <sys/stat.h>
-
-
-#include <gdk/gdkkeysyms.h>
-#include <gtk/gtk.h>
-
-
-#include <gdk/gdkkeysyms.h>
-#include <gtk/gtk.h>
-# include <math.h>
-
-#include "default.h"
-#include "ADM_toolkit_gtk/ADM_gladeSupport.h"
 #include "ADM_toolkit_gtk/toolkit_gtk.h"
-#include "ADM_toolkit_gtk/toolkit_gtk_include.h"
 #include "ADM_toolkit/toolkit.hxx"
 
 #include "ADM_video/ADM_vidPartial_param.h"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_particle.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_particle.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_particle.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -15,10 +15,7 @@
  *                                                                         *
  ***************************************************************************/
 
-#include "default.h"
-
-#include <gtk/gtk.h>
-
+#include "ADM_toolkit_gtk/toolkit_gtk.h"
 #include "fourcc.h"
 
 #include "prefs.h"
@@ -31,11 +28,8 @@
 #include "ADM_video/ADM_genvideo.hxx"
 #include "ADM_videoFilter/ADM_vidParticle.h"
 #include "ADM_toolkit/toolkit.hxx"
-#include "ADM_toolkit_gtk/ADM_gladeSupport.h"
-#include "ADM_toolkit_gtk/toolkit_gtk.h"
-#include "ADM_toolkit_gtk/toolkit_gtk_include.h"
 #include "ADM_toolkit/filesel.h"
-#include "ADM_assert.h"
+
 #include "DIA_flyDialog.h"
 #include "DIA_flyParticle.h"
 #include "ADM_userInterfaces/ADM_commonUI/DIA_factory.h" // for diaElemMenu etc.

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_pause.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_pause.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_pause.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -9,31 +9,9 @@
 // Copyright: See COPYING file that comes with this distribution
 //
 //
-# include <config.h>
-
-#include <sys/types.h>
-#include <sys/stat.h>
-#include <unistd.h>
-#include <string.h>
-#include <stdio.h>
-#include <math.h>
-
-
-#include <gdk/gdkkeysyms.h>
-#include <gtk/gtk.h>
-
-
-#include <gdk/gdkkeysyms.h>
-#include <gtk/gtk.h>
-
-
-
-#include "default.h"
-#include "ADM_toolkit_gtk/ADM_gladeSupport.h"
-#include "ADM_toolkit/toolkit.hxx"
 #include "ADM_toolkit_gtk/toolkit_gtk.h"
-#include "ADM_toolkit_gtk/toolkit_gtk_include.h"
-#include "ADM_assert.h" 
+#include "ADM_toolkit/toolkit.hxx"
+
 static GtkWidget	*create_dialog1 (void);
 //	Return 1 if resume, 0 if abort
 //

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_pipe.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_pipe.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_pipe.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -1,23 +1,6 @@
-#include <sys/types.h>
-#include <sys/stat.h>
-#include <unistd.h>
-#include <string.h>
-#include <stdio.h>
-
-#include <gdk/gdkkeysyms.h>
-#include <gtk/gtk.h>
-
-
-#include <gdk/gdkkeysyms.h>
-#include <gtk/gtk.h>
-# include <config.h>
-#include "default.h"
-#include "ADM_toolkit_gtk/ADM_gladeSupport.h"
 #include "ADM_toolkit_gtk/toolkit_gtk.h"
-#include "ADM_toolkit_gtk/toolkit_gtk_include.h"
-
 #include "prefs.h"
-#include "../ADM_assert.h"
+
 static GtkWidget	*create_dialog1 (void);
 
 uint8_t DIA_pipe(char **cmd,char **param)

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_preview.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_preview.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_preview.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -19,15 +19,10 @@
  *                                                                         *
  ***************************************************************************/
 
-#include "config.h"
-#include <gtk/gtk.h>
-
-#include "default.h"
 #include "ADM_toolkit_gtk/toolkit_gtk.h"
-#include "ADM_toolkit_gtk/toolkit_gtk_include.h"
 #include "ADM_video/ADM_genvideo.hxx"
-#include "ADM_assert.h"
 
+
 #include "DIA_flyDialog.h"
 #include "DIA_flyPreview.h"
 

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -2,26 +2,12 @@
  * This file was generated by Glade, once upon a time.
  */
 
-#include "default.h"
-
-#include <math.h>
-
-#include <gdk/gdkkeysyms.h>
-#include <gtk/gtk.h>
-
-#include "ADM_toolkit_gtk/ADM_gladeSupport.h"
-#include "ADM_toolkit/toolkit.hxx"
 #include "ADM_toolkit_gtk/toolkit_gtk.h"
-#include "ADM_toolkit_gtk/toolkit_gtk_include.h"
+#include "ADM_toolkit/toolkit.hxx"
 #include "avidemutils.h"
+#include "ADM_video/ADM_vidMisc.h"
 
-#define GLADE_HOOKUP_OBJECT(component,widget,name) \
-  g_object_set_data_full (G_OBJECT (component), name, \
-    gtk_widget_ref (widget), (GDestroyNotify) gtk_widget_unref)
-
-#define GLADE_HOOKUP_OBJECT_NO_REF(component,widget,name) \
-  g_object_set_data (G_OBJECT (component), name, widget)
-
+#include "avi_vars.h"
 #define FILL_ENTRY(x) gtk_label_set_text((GtkLabel *) lookup_widget(dialog,#x),text);
 #define SET_YES(x,y) gtk_label_set_text((GtkLabel *) lookup_widget(dialog,#x),yesno[y])
 #define DISABLE_WIDGET(x) gtk_widget_set_sensitive(lookup_widget(dialog,#x), false);

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_quota.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_quota.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_quota.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -9,30 +9,9 @@
 // Copyright: See COPYING file that comes with this distribution
 //
 //
-# include <config.h>
-
-#include <sys/types.h>
-#include <sys/stat.h>
-#include <unistd.h>
-#include <string.h>
-#include <stdio.h>
-#include <math.h>
-
-
-#include <gdk/gdkkeysyms.h>
-#include <gtk/gtk.h>
-
-
-#include <gdk/gdkkeysyms.h>
-#include <gtk/gtk.h>
-
-
-#include "default.h"
-#include "ADM_toolkit_gtk/ADM_gladeSupport.h"
-#include "ADM_toolkit/toolkit.hxx"
 #include "ADM_toolkit_gtk/toolkit_gtk.h"
-#include "ADM_toolkit_gtk/toolkit_gtk_include.h"
-#include "ADM_assert.h" 
+#include "ADM_toolkit/toolkit.hxx"
+
 static GtkWidget	*create_dialog1 (const char *);
 //	Return 1 if resume, 0 if ignore
 //

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_recent.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_recent.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_recent.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -2,23 +2,11 @@
  * DO NOT EDIT THIS FILE - it is generated by Glade.
  */
 
-#include <sys/types.h>
-#include <sys/stat.h>
-#include <unistd.h>
-#include <string.h>
-#include <stdio.h>
-
-#include <gdk/gdkkeysyms.h>
-#include <gtk/gtk.h>
-
-#include "config.h"
-#include "ADM_toolkit_gtk/ADM_gladeSupport.h"
-#include "default.h"
-
+#include "ADM_toolkit_gtk/toolkit_gtk.h"
 //___________________________________
 #include "avi_vars.h"
 #include "prefs.h"
-#include "ADM_toolkit_gtk/toolkit_gtk.h"
+
 //___________________________________
 #define GLADE_HOOKUP_OBJECT(component,widget,name) \
   g_object_set_data_full (G_OBJECT (component), name, \

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_resize.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_resize.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_resize.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -12,23 +12,7 @@
  *                                                                         *
  ***************************************************************************/
 
-#include <sys/types.h>
-#include <sys/stat.h>
-#include <unistd.h>
-#include <string.h>
-#include <stdio.h>
-# include <math.h>
-
-# include <config.h>
-
-#include <gdk/gdkkeysyms.h>
-#include <gtk/gtk.h>
-
-#include "default.h"
-#include "ADM_toolkit_gtk/ADM_gladeSupport.h"
 #include "ADM_toolkit_gtk/toolkit_gtk.h"
-#include "ADM_toolkit_gtk/toolkit_gtk_include.h"
-
 #include "ADM_osSupport/ADM_debugID.h"
 #define MODULE_NAME MODULE_UI
 #include "ADM_osSupport/ADM_debug.h"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_srt.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_srt.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_srt.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -14,24 +14,12 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
-#include "config.h"
-
-#include <stdio.h>
-#include <stdlib.h>
-#include <string.h>
-
-#include <gtk/gtk.h>
-#include <time.h>
-#include <sys/time.h>
-#include <math.h>
+#include "ADM_toolkit_gtk/toolkit_gtk.h"
 #include <iconv.h>
 
-
-#include "fourcc.h"
-
 #ifdef USE_FREETYPE
 
-#include "avi_vars.h"
+
 #include "ADM_toolkit/toolkit.hxx"
 #include "ADM_toolkit/filesel.h"
 
@@ -44,10 +32,6 @@
 class ADMfont;
 #include "ADM_videoFilter/ADM_vidSRT.h"
 
-#include "ADM_toolkit_gtk/ADM_gladeSupport.h"
-#include "ADM_toolkit_gtk/toolkit_gtk.h"
-#include "ADM_toolkit_gtk/toolkit_gtk_include.h"
-
 #include "ADM_colorspace/ADM_rgb.h"
 #include "ADM_colorspace/colorspace.h"
 
@@ -55,7 +39,6 @@
 #define MODULE_NAME MODULE_FILTER
 #include "ADM_osSupport/ADM_debug.h"
 
-#include <ADM_assert.h>
 #include "DIA_flyDialog.h"
 #include "DIA_flySrtPos.h"
 

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_threshold.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_threshold.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_threshold.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -15,25 +15,12 @@
  *                                                                         *
  ***************************************************************************/
 
-#include "default.h"
+#include "ADM_toolkit_gtk/toolkit_gtk.h"
 
-#include <gtk/gtk.h>
-
-#include "fourcc.h"
-
-
-#include "avi_vars.h"
-
-#ifdef HAVE_ENCODER
-
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_video/ADM_genvideo.hxx"
 #include "ADM_videoFilter/ADM_vidThreshold.h"
 #include "ADM_toolkit/toolkit.hxx"
-#include "ADM_toolkit_gtk/ADM_gladeSupport.h"
-#include "ADM_toolkit_gtk/toolkit_gtk.h"
-#include "ADM_toolkit_gtk/toolkit_gtk_include.h"
-#include "ADM_assert.h"
 #include "DIA_flyDialog.h"
 #include "DIA_flyThreshold.h"
 #include "ADM_filter/video_filters.h"
@@ -594,4 +581,3 @@
   return threshold_dialog;
 }
 
-#endif

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_vcodec.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_vcodec.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_vcodec.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -2,20 +2,8 @@
  * DO NOT EDIT THIS FILE - it is generated by Glade.
  */
 
-#include "config.h"
-
-#include <sys/types.h>
-#include <sys/stat.h>
-#include <unistd.h>
-#include <string.h>
-#include <stdio.h>
-#include "ADM_toolkit_gtk/toolkit_gtk_include.h"
 #include "ADM_toolkit_gtk/toolkit_gtk.h"
 
-#include "ADM_assert.h" 
-
-#include "default.h"
-
 //___________________________________
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_video/ADM_genvideo.hxx"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_vobsub.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_vobsub.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_vobsub.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -13,28 +13,10 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
-#include <config.h>
-
-#include <stdio.h>
-#include <stdlib.h>
-
-
-#include <gdk/gdkkeysyms.h>
-#include <gtk/gtk.h>
-
-
-#include <gdk/gdkkeysyms.h>
-#include <gtk/gtk.h>
-#include <math.h>
-
-
-#include "default.h"
-#include "ADM_toolkit_gtk/ADM_gladeSupport.h"
 #include "ADM_toolkit_gtk/toolkit_gtk.h"
-#include "ADM_toolkit_gtk/toolkit_gtk_include.h"
 #include "ADM_toolkit/toolkit.hxx"
 #include "ADM_toolkit/filesel.h"
-#include "ADM_assert.h" 
+
 #define CHECK_GET(x,y) {*y=gtk_toggle_button_get_active( GTK_TOGGLE_BUTTON(WID(x)));}
 #define CHECK_SET(x,y) {gtk_toggle_button_set_active( GTK_TOGGLE_BUTTON(WID(x)),*y);}   
 

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_working.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_working.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_working.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -18,30 +18,18 @@
  *                                                                         *
  ***************************************************************************/
 
-#include <sys/types.h>
-#include <sys/stat.h>
-#include <unistd.h>
-#include <string.h>
-#include <stdio.h>
-#include <math.h>
+#include "ADM_toolkit_gtk/toolkit_gtk.h"
 
-#include <gdk/gdkkeysyms.h>
-#include <gtk/gtk.h>
+#include "ADM_misc.h"
 
-
-#include "config.h"
-#include "default.h"
-#include "ADM_toolkit_gtk/ADM_gladeSupport.h"
-#include "ADM_toolkit_gtk/toolkit_gtk.h"
-#include "ADM_toolkit_gtk/toolkit_gtk_include.h"
 #include "ADM_osSupport/ADM_debugID.h"
 #define MODULE_NAME MODULE_CLOCKnTIMELEFT
 #include "ADM_osSupport/ADM_debug.h"
-#include "ADM_osSupport/ADM_misc.h"
 
+
 #include "DIA_working.h"
+#include "ADM_video/ADM_vidMisc.h"
 
-
 static GtkWidget	*create_dialog1 (void);
 static void on_work_abort(GtkObject * object, gpointer user_data);
 static gint on_destroy_abort(GtkObject * object, gpointer user_data);

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -1,24 +1,8 @@
-#include "config.h"
-
-#include <sys/stat.h>
-#include <unistd.h>
-#include <string.h>
-#include <stdio.h>
-#include <math.h>
-
-#include <gdk/gdkkeysyms.h>
-#include <gtk/gtk.h>
-
-#include "default.h"
-
-#include "ADM_toolkit_gtk/ADM_gladeSupport.h"
-#include "ADM_toolkit/toolkit.hxx"
 #include "ADM_toolkit_gtk/toolkit_gtk.h"
-#include "ADM_toolkit_gtk/toolkit_gtk_include.h"
+#include "ADM_toolkit/toolkit.hxx"
 
-#include "ADM_assert.h" 
 #include "avidemutils.h"
-
+#include "avi_vars.h"
 #ifdef USE_X264
 extern "C"
 {

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -1,27 +1,8 @@
-#include <config.h>
+#include "ADM_toolkit_gtk/toolkit_gtk.h"
 #include "ADM_lavcodec.h"
 
-
-
-#include <string.h>
-#include <stdio.h>
-
-#include <gdk/gdkkeysyms.h>
-#include <gtk/gtk.h>
-
-
-#include <gdk/gdkkeysyms.h>
-#include <gtk/gtk.h>
-# include <math.h>
-# include <config.h>
-
-#include "default.h"
-#include "ADM_toolkit_gtk/ADM_gladeSupport.h"
-#include "ADM_toolkit_gtk/toolkit_gtk.h"
-#include "ADM_toolkit_gtk/toolkit_gtk_include.h"
 #include "ADM_toolkit/toolkit.hxx"
 
-#include "ADM_assert.h"
 #include "ADM_encoder/ADM_vidEncode.hxx"
 //#include "ADM_gui/GUI_xvidparam.h"
 #include "prefs.h"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -1,35 +1,12 @@
-# include <config.h>
-
-#include <sys/stat.h>
-#include <unistd.h>
-#include <string.h>
-#include <stdio.h>
-#include <math.h>
-
-#include <gdk/gdkkeysyms.h>
-#include <gtk/gtk.h>
-
-
-#include <gdk/gdkkeysyms.h>
-#include <gtk/gtk.h>
-
-#include "default.h"
-
-
-#include "ADM_toolkit_gtk/ADM_gladeSupport.h"
+#include "ADM_toolkit_gtk/toolkit_gtk.h"
 #include "ADM_toolkit/filesel.h"
 #include "ADM_toolkit/toolkit.hxx"
-#include "ADM_toolkit_gtk/toolkit_gtk.h"
-#include "ADM_toolkit_gtk/toolkit_gtk_include.h"
 
-#include "ADM_assert.h" 
-
 #ifdef USE_XVID_4
 #include "ADM_encoder/ADM_vidEncode.hxx"
 
 #include "ADM_codecs/ADM_xvid4param.h"
-
-
+#include "avi_vars.h"
 static xvid4EncParam localParam;
 static uint32_t mQ,mB,mS,mA;
 static GtkWidget *dialog=NULL;

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/DIA_color.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/DIA_color.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/DIA_color.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -4,26 +4,7 @@
  * DO NOT EDIT THIS FILE - it is generated by Glade.
  */
 
-#include "config.h"
-
-#include <sys/types.h>
-#include <sys/stat.h>
-#include <unistd.h>
-#include <string.h>
-#include <stdio.h>
-
-#include <gdk/gdkkeysyms.h>
-#include <gtk/gtk.h>
-
-
-#include "default.h"
-
-
-#include "ADM_toolkit_gtk/ADM_gladeSupport.h"
 #include "ADM_toolkit_gtk/toolkit_gtk.h"
-#include "ADM_toolkit_gtk/toolkit_gtk_include.h"
-#include <ADM_assert.h>
-
  #define WID(x) lookup_widget(dialog,#x)
 
 static GtkWidget	*create_colorselectiondialog1 (void);

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/DIA_dialogFactory.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/DIA_dialogFactory.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/DIA_dialogFactory.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -12,19 +12,8 @@
  *                                                                         *
  ***************************************************************************/
 
-#include <config.h>
-
-
-#include <string.h>
-#include <stdio.h>
-#include <math.h>
-
-#include "default.h"
-#include "ADM_toolkit_gtk/ADM_gladeSupport.h"
 #include "ADM_toolkit_gtk/toolkit_gtk.h"
-#include "ADM_toolkit_gtk/toolkit_gtk_include.h"
 #include "ADM_commonUI/DIA_factory.h"
-#include "ADM_assert.h"
 
 
 static uint8_t  buildOneTab(GtkWidget *nb,int index, diaElemTabs *tab);

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/DIA_filesel.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/DIA_filesel.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/DIA_filesel.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -12,13 +12,8 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
-
-
-#include "ADM_toolkit_gtk/ADM_gladeSupport.h"
 #include "ADM_toolkit_gtk/toolkit_gtk.h"
-#include "ADM_toolkit_gtk/toolkit_gtk_include.h"
 #include "ADM_commonUI/DIA_factory.h"
-#include "ADM_assert.h"
 #include "ADM_toolkit/filesel.h"
 static void fileRead(void *w,void *p);
 static void dirSel(void *w,void *p);

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_bar.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_bar.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_bar.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -13,21 +13,11 @@
  *                                                                         *
  ***************************************************************************/
 
-#include <config.h>
-
-
-#include <string.h>
-#include <stdio.h>
-#include <math.h>
-
-#include "default.h"
-#include "ADM_toolkit_gtk/ADM_gladeSupport.h"
 #include "ADM_toolkit_gtk/toolkit_gtk.h"
-#include "ADM_toolkit_gtk/toolkit_gtk_include.h"
 #include "ADM_commonUI/DIA_factory.h"
-#include "ADM_assert.h"
 
 
+
 diaElemBar::diaElemBar(uint32_t percent,const char *toggleTitle)
   : diaElem(ELEM_BAR)
 {

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_bitrate.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_bitrate.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_bitrate.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -13,20 +13,10 @@
  *                                                                         *
  ***************************************************************************/
 
-#include <config.h>
-
-
-#include <string.h>
-#include <stdio.h>
-#include <math.h>
-
-#include "default.h"
-#include "ADM_toolkit_gtk/ADM_gladeSupport.h"
 #include "ADM_toolkit_gtk/toolkit_gtk.h"
-#include "ADM_toolkit_gtk/toolkit_gtk_include.h"
 #include "ADM_commonUI/DIA_factory.h"
-#include "ADM_assert.h"
 
+
 static void cb_mod(void *w,void *p);
 /**
  * 	\fn 	readPullDown

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_button.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_button.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_button.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -13,20 +13,10 @@
  *                                                                         *
  ***************************************************************************/
 
-#include <config.h>
-
-
-#include <string.h>
-#include <stdio.h>
-#include <math.h>
-
-#include "default.h"
-#include "ADM_toolkit_gtk/ADM_gladeSupport.h"
 #include "ADM_toolkit_gtk/toolkit_gtk.h"
-#include "ADM_toolkit_gtk/toolkit_gtk_include.h"
 #include "ADM_commonUI/DIA_factory.h"
-#include "ADM_assert.h"
 
+
 static void cb_button (GtkWidget *widget,gpointer callback_data);
 
 diaElemButton:: diaElemButton(const char *toggleTitle, ADM_FAC_CALLBACK *cb,void *cookie,const char *tip)

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_float.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_float.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_float.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -13,23 +13,9 @@
  *                                                                         *
  ***************************************************************************/
 
-#include <config.h>
-
-
-#include <string.h>
-#include <stdio.h>
-#include <math.h>
-
-#include "default.h"
-#include "ADM_toolkit_gtk/ADM_gladeSupport.h"
 #include "ADM_toolkit_gtk/toolkit_gtk.h"
-#include "ADM_toolkit_gtk/toolkit_gtk_include.h"
 #include "ADM_commonUI/DIA_factory.h"
-#include "ADM_assert.h"
 
-
-
-
 diaElemFloat::diaElemFloat(ELEM_TYPE_FLOAT *intValue,const char *toggleTitle, 
                             ELEM_TYPE_FLOAT min, ELEM_TYPE_FLOAT max,const char *tip)
   : diaElem(ELEM_FLOAT)

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_frame.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_frame.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_frame.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -13,21 +13,11 @@
  *                                                                         *
  ***************************************************************************/
 
-#include <config.h>
-
-
-#include <string.h>
-#include <stdio.h>
-#include <math.h>
-
-#include "default.h"
-#include "ADM_toolkit_gtk/ADM_gladeSupport.h"
 #include "ADM_toolkit_gtk/toolkit_gtk.h"
-#include "ADM_toolkit_gtk/toolkit_gtk_include.h"
 #include "ADM_commonUI/DIA_factory.h"
-#include "ADM_assert.h"
 
 
+
 diaElemFrame::diaElemFrame(const char *toggleTitle, const char *tip)
   : diaElem(ELEM_FRAME)
 {

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_hex.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_hex.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_hex.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -13,20 +13,10 @@
  *                                                                         *
  ***************************************************************************/
 
-#include <config.h>
-
-
-#include <string.h>
-#include <stdio.h>
-#include <math.h>
-
-#include "default.h"
-#include "ADM_toolkit_gtk/ADM_gladeSupport.h"
 #include "ADM_toolkit_gtk/toolkit_gtk.h"
-#include "ADM_toolkit_gtk/toolkit_gtk_include.h"
 #include "ADM_commonUI/DIA_factory.h"
-#include "ADM_assert.h"
 
+
 #define HEX_NB_LINE   8
 #define HEX_NB_COLUMN 16
 

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_integer.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_integer.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_integer.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -13,23 +13,9 @@
  *                                                                         *
  ***************************************************************************/
 
-#include <config.h>
-
-
-#include <string.h>
-#include <stdio.h>
-#include <math.h>
-
-#include "default.h"
-#include "ADM_toolkit_gtk/ADM_gladeSupport.h"
 #include "ADM_toolkit_gtk/toolkit_gtk.h"
-#include "ADM_toolkit_gtk/toolkit_gtk_include.h"
 #include "ADM_commonUI/DIA_factory.h"
-#include "ADM_assert.h"
 
-
-
-
 diaElemInteger::diaElemInteger(int32_t *intValue,const char *toggleTitle, int32_t min, int32_t max,const char *tip)
   : diaElem(ELEM_INTEGER)
 {

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_matrix.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_matrix.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_matrix.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -13,19 +13,8 @@
  *                                                                         *
  ***************************************************************************/
 
-#include <config.h>
-
-
-#include <string.h>
-#include <stdio.h>
-#include <math.h>
-
-#include "default.h"
-#include "ADM_toolkit_gtk/ADM_gladeSupport.h"
 #include "ADM_toolkit_gtk/toolkit_gtk.h"
-#include "ADM_toolkit_gtk/toolkit_gtk_include.h"
 #include "ADM_commonUI/DIA_factory.h"
-#include "ADM_assert.h"
 
 
 

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_menu.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_menu.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_menu.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -13,19 +13,8 @@
  *                                                                         *
  ***************************************************************************/
 
-#include <config.h>
-
-
-#include <string.h>
-#include <stdio.h>
-#include <math.h>
-
-#include "default.h"
-#include "ADM_toolkit_gtk/ADM_gladeSupport.h"
 #include "ADM_toolkit_gtk/toolkit_gtk.h"
-#include "ADM_toolkit_gtk/toolkit_gtk_include.h"
 #include "ADM_commonUI/DIA_factory.h"
-#include "ADM_assert.h"
 
 
 static void cb_menu(void *w,void *p);

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_notch.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_notch.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_notch.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -13,23 +13,10 @@
  *                                                                         *
  ***************************************************************************/
 
-#include <config.h>
-
-
-#include <string.h>
-#include <stdio.h>
-#include <math.h>
-
-#include "default.h"
-#include "ADM_toolkit_gtk/ADM_gladeSupport.h"
 #include "ADM_toolkit_gtk/toolkit_gtk.h"
-#include "ADM_toolkit_gtk/toolkit_gtk_include.h"
 #include "ADM_commonUI/DIA_factory.h"
-#include "ADM_assert.h"
 
 
-
-
 diaElemNotch::diaElemNotch(uint32_t yes,const char *toggleTitle, const char *tip)
   : diaElem(ELEM_NOTCH)
 {

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_readOnlyText.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_readOnlyText.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_readOnlyText.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -13,23 +13,10 @@
  *                                                                         *
  ***************************************************************************/
 
-#include <config.h>
-
-
-#include <string.h>
-#include <stdio.h>
-#include <math.h>
-
-#include "default.h"
-#include "ADM_toolkit_gtk/ADM_gladeSupport.h"
 #include "ADM_toolkit_gtk/toolkit_gtk.h"
-#include "ADM_toolkit_gtk/toolkit_gtk_include.h"
 #include "ADM_commonUI/DIA_factory.h"
-#include "ADM_assert.h"
 
 
-
-
 diaElemReadOnlyText::diaElemReadOnlyText(char *readyOnly,const char *toggleTitle,const char *tip)
   : diaElem(ELEM_ROTEXT)
 {

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_threadCount.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_threadCount.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_threadCount.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -13,11 +13,7 @@
  *                                                                         *
  ***************************************************************************/
 
-#include <stdio.h>
-
-#include "config.h"
-#include "default.h"
-#include "ADM_toolkit_gtk/toolkit_gtk_include.h"
+#include "ADM_toolkit_gtk/toolkit_gtk.h"
 #include "ADM_commonUI/DIA_factory.h"
 
 static void customToggled(void *widget, void *userData);

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_toggle.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_toggle.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_toggle.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -13,19 +13,8 @@
  *                                                                         *
  ***************************************************************************/
 
-#include <config.h>
-
-
-#include <string.h>
-#include <stdio.h>
-#include <math.h>
-
-#include "default.h"
-#include "ADM_toolkit_gtk/ADM_gladeSupport.h"
 #include "ADM_toolkit_gtk/toolkit_gtk.h"
-#include "ADM_toolkit_gtk/toolkit_gtk_include.h"
 #include "ADM_commonUI/DIA_factory.h"
-#include "ADM_assert.h"
 
 static void cb_menu(void *w,void *p);
 static void cb_menu2(void *w,void *p);

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -6,22 +6,17 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
-#include "config.h"
-
+#include "ADM_toolkit_gtk/toolkit_gtk.h"
 #include <vector>
-#include <gtk/gtk.h>
-#include <gdk/gdkkeysyms.h>
-
-#include "avi_vars.h"
 #include "ADM_toolkit/toolkit.hxx"
-#include <ADM_assert.h>
 #include "ADM_toolkit/filesel.h"
 #include "ADM_video/ADM_genvideo.hxx"
+#include "ADM_editor/ADM_edit.hxx"
 #include "ADM_video/ADM_videoNull.h"
 #include "ADM_filter/video_filters.h"
 #include "ADM_video/ADM_vidPartial.h"
 #include "ADM_toolkit_gtk/ADM_gladeSupport.h"
-#include "ADM_toolkit_gtk/toolkit_gtk.h"
+
 #include "ADM_filter/vidVCD.h"
 //___________________________________________
 typedef enum 

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_bindings.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_bindings.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_bindings.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -14,32 +14,21 @@
  *   (at your option) any later version.                                   *
  ***************************************************************************/
 
-#include "default.h"
-
-#include <stdio.h>
-#include <stdlib.h>
-#include <string.h>
-#include <math.h>
-
-#include <gdk/gdkkeysyms.h>
-#include <gtk/gtk.h>
-
-#include "../ADM_assert.h"
+#include "../ADM_toolkit_gtk/toolkit_gtk.h"
 #include "ADM_commonUI/GUI_render.h"
 #include "../gui_action.hxx"
 
 #include "../ADM_osSupport/ADM_debugID.h"
 #define MODULE_NAME MODULE_UI
 #include "../ADM_osSupport/ADM_debug.h"
-#include "../ADM_toolkit_gtk/toolkit_gtk.h"
-#include "../ADM_toolkit_gtk/ADM_gladeSupport.h"
 
+
 #include "../ADM_codecs/ADM_codec.h"
 #include "ADM_commonUI/GUI_ui.h"
 
 #include "../ADM_toolkit/filesel.h"
 #include "../ADM_editor/ADM_Video.h"
-#include "../ADM_osSupport/ADM_misc.h"
+
 #include "../prefs.h"
 #include "../ADM_toolkit_gtk/gtkmarkscale.h"
 #include "../ADM_toolkit_gtk/jogshuttle.h"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_gtkRender.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_gtkRender.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_gtkRender.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -15,8 +15,6 @@
  *                                                                         *
  ***************************************************************************/
 
-#include "default.h"
-
 #include <gtk/gtk.h>
 #ifdef ADM_WIN32
 #define WIN32_CLASH
@@ -29,15 +27,13 @@
 #else
 #include <gdk/gdkx.h>
 #endif
+#include "ADM_toolkit_gtk/toolkit_gtk.h"
 
-#include "../ADM_assert.h"
-#include "../ADM_osSupport/ADM_misc.h"
+#include "ADM_misc.h"
 
 #include "ADM_commonUI/GUI_render.h"
 #include "ADM_commonUI/GUI_accelRender.h"
 
-#include "ADM_toolkit_gtk/toolkit_gtk.h"
-
 #include "../../../ADM_colorspace/ADM_rgb.h"
 #include "../../../ADM_libraries/ADM_libswscale/ADM_mp.h"
 

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_keymap.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_keymap.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_keymap.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -33,8 +33,9 @@
 #include <gtk/gtk.h>
 
 #include "math.h"
-#include "default.h"
+#include "ADM_default.h"
 
+
 #include "../gui_action.hxx"
 extern void HandleAction(Action act);  
 // when keys are pressed

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_ocr/adm_editglyph.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_ocr/adm_editglyph.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_ocr/adm_editglyph.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -11,21 +11,10 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
-#include "config.h"
-#include <stdio.h>
-#include <stdlib.h>
-#include <string.h>
-#include "default.h"
-#include "gtk/gtk.h"
-#include <ADM_assert.h>
-
-
-
+#include "../ADM_toolkit_gtk/toolkit_gtk.h"
 #include "ADM_toolkit/toolkit.hxx"
 #include "ADM_toolkit/filesel.h"
 
-#include "../ADM_GTK/ADM_toolkit_gtk/toolkit_gtk.h"
-#include "../ADM_GTK/ADM_toolkit_gtk/toolkit_gtk_include.h"
 
 #include "ADM_ocr/adm_glyph.h"
 #include "ADM_userInterfaces/ADM_commonUI/DIA_factory.h"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_ocr/adm_ocr.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_ocr/adm_ocr.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_ocr/adm_ocr.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -30,23 +30,9 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
-#include "config.h"
-#include <stdio.h>
-#include <stdlib.h>
-#include <string.h>
-#include "gtk/gtk.h"
-#include <ADM_assert.h>
+#include "../ADM_toolkit_gtk/toolkit_gtk.h"
 
-
-#include "fourcc.h"
-#include "config.h"
-#include "avi_vars.h"
-
-//#include "unistd.h"
-
 #include "ADM_toolkit/toolkit.hxx"
-#include "../ADM_GTK/ADM_toolkit_gtk/toolkit_gtk.h"
-#include "../ADM_GTK/ADM_toolkit_gtk/toolkit_gtk_include.h"
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_video/ADM_genvideo.hxx"
 #include "ADM_filter/video_filters.h"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_ocr/adm_sup.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_ocr/adm_sup.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_ocr/adm_sup.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -1,16 +1,4 @@
-#include "config.h"
-#include <stdio.h>
-#include <stdlib.h>
-#include <string.h>
-#include "gtk/gtk.h"
-#include <ADM_assert.h>
-
-
-#include "fourcc.h"
-#include "avio.hxx"
-#include "config.h"
-#include "avi_vars.h"
-
+#include "toolkit_gtk.h"
 //#include "unistd.h"
 
 #include "ADM_toolkit/toolkit.hxx"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/ADM_gladeSupport.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/ADM_gladeSupport.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/ADM_gladeSupport.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -13,7 +13,8 @@
 
 #include "ADM_toolkit_gtk/ADM_gladeSupport.h"
 
-#include "default.h"
+#include "ADM_default.h"
+
 #include <ADM_assert.h>
 #include "xpm/play.xpm"
 #include "xpm/stop.xpm"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/ADM_gladeSupport.h
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/ADM_gladeSupport.h	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/ADM_gladeSupport.h	2008-02-24 17:29:52 UTC (rev 3800)
@@ -7,8 +7,9 @@
 #endif
 
 #include <gtk/gtk.h>
-#include "default.h"
+#include "ADM_default.h"
 
+
 /*
  * Public Functions.
  */

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/ADM_tray_gtk.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/ADM_tray_gtk.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/ADM_tray_gtk.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -19,18 +19,8 @@
  *                                                                         *
  ***************************************************************************/
 
-#include "config.h"
-
-#include <string.h>
-#include <stdio.h>
-
-
-
-#include "default.h"
-#include "ADM_toolkit_gtk/toolkit_gtk_include.h"
-#include <ADM_assert.h>
+#include "ADM_toolkit_gtk/toolkit_gtk.h"
 #include "ADM_tray.h"
-#include "ADM_toolkit_gtk/ADM_gladeSupport.h"
 extern "C"
 {
 #include "systray.h"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/TLK_filesel.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/TLK_filesel.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/TLK_filesel.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -17,26 +17,20 @@
  *                                                                         *
  ***************************************************************************/
 
-#include "default.h"
-
-#include <gtk/gtk.h>
-
+#include "ADM_toolkit_gtk/toolkit_gtk.h"
 #include <errno.h>
 #include <sys/types.h>
 #include <sys/stat.h>
 #include <dirent.h>
 
 #include "avi_vars.h"
-#include "ADM_misc.h"
-#include "ADM_assert.h"
 
+
 #include "ADM_toolkit/filesel.h"
 #include "ADM_toolkit/toolkit.hxx"
 #include "prefs.h"
 #define TH_READ 1
 #define TH_WRITE 2
-#include "ADM_toolkit_gtk/toolkit_gtk_include.h"
-#include "ADM_toolkit_gtk/toolkit_gtk.h"
 
 extern char * actual_workbench_file;
 

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/choice.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/choice.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/choice.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -14,16 +14,7 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
-#include <stdio.h>
-#include <stdlib.h>
-#include <time.h>
-#include <math.h>
-#include <sys/time.h>
-#include <gtk/gtk.h>
-
-#include "config.h"
-
-#include "avi_vars.h"
+#include "toolkit_gtk.h"
 #include "ADM_toolkit/toolkit.hxx"
 
 static void alert_cb_ok(void);

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/eggtrayicon.c
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/eggtrayicon.c	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/eggtrayicon.c	2008-02-24 17:29:52 UTC (rev 3800)
@@ -27,7 +27,7 @@
 #include "eggtrayicon.h"
 #include <string.h>
 #include "systray.h"
-#include "../ADM_assert.h"
+#include "ADM_assert.h"
 #define SYSTEM_TRAY_REQUEST_DOCK    0
 #define SYSTEM_TRAY_BEGIN_MESSAGE   1
 #define SYSTEM_TRAY_CANCEL_MESSAGE  2

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/toolkit.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/toolkit.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/toolkit.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -17,19 +17,15 @@
 *   (at your option) any later version.                                   *
 *                                                                         *
 ***************************************************************************/
-#include "config.h"
-#include <stdio.h>
-#include <stdlib.h>
-#include <gtk/gtk.h>
+#include "toolkit_gtk.h"
 
 #ifndef ADM_WIN32
 #include <unistd.h>
 #endif
 
-#include "avi_vars.h"
-#include "ADM_misc.h"
 
 
+
 GtkWidget *GUI_PixmapButtonDefault(GdkWindow * window, const gchar ** xpm,
                                   const gchar * tooltip);
 GtkWidget *GUI_PixmapButton(GdkWindow * window, const gchar ** xpm,

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/toolkit_dialog.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/toolkit_dialog.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/toolkit_dialog.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -18,23 +18,8 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
-#include <stdio.h>
-#include <stdlib.h>
-#include <time.h>
-#include <math.h>
-#include <unistd.h>
-#include <sys/time.h>
-#include <gtk/gtk.h>
-
-#include "config.h"
-
-#include "avi_vars.h"
-#include "ADM_misc.h"
-
-# include <config.h>
-#include "ADM_toolkit_gtk/ADM_gladeSupport.h"
+#include "ADM_toolkit_gtk/toolkit_gtk.h"
 #include "toolkit_gtk.h"
-#include "ADM_assert.h"
 #include "prefs.h"
 
 #define GLADE_HOOKUP_OBJECT(component,widget,name) \

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/toolkit_gtk.h
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/toolkit_gtk.h	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/toolkit_gtk.h	2008-02-24 17:29:52 UTC (rev 3800)
@@ -14,8 +14,20 @@
  ***************************************************************************/
 #ifndef ADM_TLK_GTK
 #define ADM_TLK_GTK
+#include <stdio.h>
+#include <stdlib.h>
+#include <math.h>
+#include "glib.h"
+#include <gdk/gdkkeysyms.h>
+#include <gtk/gtk.h>
 
-int     getRangeInMenu(GtkWidget * Menu);
+#include "ADM_default.h"
+#include "ADM_toolkit_gtk/ADM_gladeSupport.h"
+#include "ADM_toolkit_gtk/toolkit_gtk_include.h"
+
+
+
+uint8_t getRangeInMenu(GtkWidget * Menu);
 void    changeTextInMenu(GtkWidget *menu,int range,const char *text);
 void    UI_purge(void );
 uint8_t getSelectionNumber(uint32_t nb,GtkWidget *tree  , GtkListStore 	*store,uint32_t *number);

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/toolkit_gtk_include.h
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/toolkit_gtk_include.h	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/toolkit_gtk_include.h	2008-02-24 17:29:52 UTC (rev 3800)
@@ -7,7 +7,7 @@
 #include <gtk/gtk.h>
 
 
-#include "avi_vars.h"
+
 #include "ADM_toolkit_gtk/ADM_gladeSupport.h"
 # include <config.h>
 

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_NONE/ADM_dialog/DIA_busy.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_NONE/ADM_dialog/DIA_busy.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_NONE/ADM_dialog/DIA_busy.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -26,7 +26,8 @@
 #include <math.h>
 
 
-#include "default.h"
+#include "ADM_default.h"
+
 #include "ADM_toolkit/toolkit.hxx"
 
 #include "DIA_busy.h"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_NONE/ADM_dialog/DIA_encoding.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_NONE/ADM_dialog/DIA_encoding.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_NONE/ADM_dialog/DIA_encoding.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -16,7 +16,8 @@
 #include <stdio.h>
 #include <math.h>
 
-#include "default.h"
+#include "ADM_default.h"
+
 #include "prefs.h"
 
 #include "ADM_toolkit/toolkit.hxx"
@@ -24,7 +25,7 @@
 #include "ADM_assert.h" 
 
 #include "DIA_encoding.h"
-
+#include "ADM_video/ADM_vidMisc.h"
 DIA_encoding::DIA_encoding( uint32_t fps1000 )
 {
 uint32_t useTray=0;

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_NONE/ADM_dialog/DIA_flyDialog.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_NONE/ADM_dialog/DIA_flyDialog.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_NONE/ADM_dialog/DIA_flyDialog.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -19,8 +19,9 @@
 
 # include <math.h>
 
-#include "default.h"
+#include "ADM_default.h"
 
+
 #include "ADM_toolkit/toolkit.hxx"
 
 #include "ADM_colorspace/ADM_rgb.h"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_NONE/ADM_dialog/DIA_indexing.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_NONE/ADM_dialog/DIA_indexing.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_NONE/ADM_dialog/DIA_indexing.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -7,7 +7,8 @@
 #include <stdio.h>
 #include <math.h>
 
-#include "default.h"
+#include "ADM_default.h"
+
 #include "prefs.h"
 
 #include "ADM_toolkit/toolkit.hxx"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_NONE/ADM_dialog/DIA_none.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_NONE/ADM_dialog/DIA_none.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_NONE/ADM_dialog/DIA_none.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -20,7 +20,8 @@
 #include <stdio.h>
 #include <stdlib.h>
 
-#include "default.h"
+#include "ADM_default.h"
+
 #include "ADM_assert.h"
 
 #include "ADM_video/ADM_genvideo.hxx"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_NONE/ADM_dialog/DIA_working.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_NONE/ADM_dialog/DIA_working.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_NONE/ADM_dialog/DIA_working.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -28,7 +28,8 @@
 
 
 #include "config.h"
-#include "default.h"
+#include "ADM_default.h"
+
 #include "ADM_osSupport/ADM_debugID.h"
 #define MODULE_NAME MODULE_CLOCKnTIMELEFT
 #include "ADM_osSupport/ADM_debug.h"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_NONE/ADM_dialog/OCR_none.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_NONE/ADM_dialog/OCR_none.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_NONE/ADM_dialog/OCR_none.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -1,5 +1,6 @@
 #include <stdio.h>
-#include "default.h"
+#include "ADM_default.h"
+
 uint8_t ADM_ocr_engine( void)
 {
 	return 0;

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_NONE/ADM_dialog/alert_none.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_NONE/ADM_dialog/alert_none.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_NONE/ADM_dialog/alert_none.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -8,7 +8,8 @@
 #include <stdarg.h>
 #include <ctype.h>
 #include <math.h>
-#include "default.h"
+#include "ADM_default.h"
+
 #include "prefs.h"
 
 #include "ADM_toolkit/toolkit.hxx"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_NONE/ADM_dialogFactory/DIA_dialogFactory.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_NONE/ADM_dialogFactory/DIA_dialogFactory.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_NONE/ADM_dialogFactory/DIA_dialogFactory.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -19,7 +19,8 @@
 #include <stdio.h>
 #include <math.h>
 
-#include "default.h"
+#include "ADM_default.h"
+
 #include "ADM_commonUI/DIA_factory.h"
 #include "ADM_assert.h"
 

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_NONE/ADM_dialogFactory/FAC_toggle.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_NONE/ADM_dialogFactory/FAC_toggle.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_NONE/ADM_dialogFactory/FAC_toggle.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -20,7 +20,8 @@
 #include <stdio.h>
 #include <math.h>
 
-#include "default.h"
+#include "ADM_default.h"
+
 #include "ADM_commonUI/DIA_factory.h"
 #include "ADM_assert.h"
 

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_NONE/ADM_gui2/file_none.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_NONE/ADM_gui2/file_none.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_NONE/ADM_gui2/file_none.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -12,7 +12,7 @@
 #include <config.h>
 #include <stdio.h>
 #include <stdlib.h>
-#include "default.h"
+#include "ADM_default.h"
 #include "ADM_toolkit/toolkit.hxx"
 #include "ADM_toolkit/filesel.h"
 

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_NONE/ADM_gui2/gui_none.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_NONE/ADM_gui2/gui_none.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_NONE/ADM_gui2/gui_none.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -11,7 +11,8 @@
 #include <config.h>
 #include <stdio.h>
 #include <stdlib.h>
-#include "default.h"
+#include "ADM_default.h"
+#include "ADM_misc.h"
 #include "ADM_toolkit/toolkit.hxx"
 #include "GUI_ui.h"
 #include "ADM_colorspace/ADM_rgb.h"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_busy.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_busy.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_busy.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -17,19 +17,7 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
-#include "config.h"
-#include <stdio.h>
-#include <stdlib.h>
-
-#include <sys/types.h>
-#include <sys/stat.h>
-#include <unistd.h>
-#include <string.h>
-#include <stdio.h>
-#include <math.h>
-
-
-#include "default.h"
+#include "ADM_default.h"
 #include "ADM_toolkit/toolkit.hxx"
 
 #include "DIA_busy.h"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_none.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_none.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_none.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -13,15 +13,7 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
-#include "config.h"
-
-#include <string.h>
-#include <stdio.h>
-#include <stdlib.h>
-
-#include "default.h"
-#include "ADM_assert.h"
-
+#include "ADM_default.h"
 #include "ADM_video/ADM_genvideo.hxx"
 #include "ADM_video/ADM_vidCNR2_param.h"
 #include "ADM_video/ADM_vidColorYuv_param.h"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_srt.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_srt.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_srt.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -4,20 +4,12 @@
 // Copyright: See COPYING file that comes with this distribution
 //
 //
-#include "config.h"
-
-#include <stdio.h>
-#include <stdlib.h>
-#include <string.h>
-#include <ADM_assert.h>
-#include <math.h>
+#include "ADM_default.h"
 #include <iconv.h>
-#include "default.h"
 
 #include "ADM_toolkit/toolkit.hxx"
 
 #include "ADM_userInterfaces/ADM_commonUI/DIA_factory.h"
-#include "ADM_assert.h" 
 #include "ADM_toolkit/toolkit.hxx"
 #include "ADM_toolkit/filesel.h"
 

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_x264.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_x264.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_x264.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -5,17 +5,9 @@
 //
 //
 
-#include <stdio.h>
-#include <stdlib.h>
-#include <string.h>
-#include <math.h>
+#include "ADM_default.h"
 
-#include "ADM_assert.h"
-#include "config.h"
 
-#include "fourcc.h"
-#include "avi_vars.h"
-
 #include "ADM_toolkit/toolkit.hxx"
 #include "ADM_userInterfaces/ADM_commonUI/DIA_factory.h"
 #include "ADM_encoder/ADM_vidEncode.hxx"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_xvid4.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_xvid4.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_xvid4.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -5,24 +5,11 @@
 //
 //
 
-#include <stdio.h>
-#include <stdlib.h>
-#include <string.h>
-#include <ADM_assert.h>
-#include <math.h>
-#include <math.h>
-#include <iconv.h>
-#include "config.h"
+#include "ADM_default.h"
 
-
-#include "fourcc.h"
-
-#include "avi_vars.h"
-
 #include "ADM_toolkit/toolkit.hxx"
 
 #include "ADM_userInterfaces/ADM_commonUI/DIA_factory.h"
-#include "ADM_assert.h" 
 #ifdef USE_XVID_4
 #include "ADM_encoder/ADM_vidEncode.hxx"
 

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/OCR_none.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/OCR_none.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/OCR_none.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -1,5 +1,4 @@
-#include <stdio.h>
-#include "default.h"
+#include "ADM_default.h"
 uint8_t ADM_ocr_engine( void)
 {
 	return 0;

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_asharp.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_asharp.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_asharp.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -20,21 +20,17 @@
  *                                                                         *
  ***************************************************************************/
 
-#include <config.h>
-#include <string.h>
-#include <stdio.h>
-#include <math.h>
 
+
 #define Ui_Dialog Ui_asharpDialog
 #include "ui_asharp.h"
 #undef Ui_Dialog
 
-#include "default.h"
+#include "ADM_default.h"
 #include "ADM_toolkit/toolkit.hxx"
 #include "ADM_image.h"
 #include "ADM_video/ADM_genvideo.hxx"
 #include "ADM_colorspace/ADM_rgb.h"
-#include "ADM_assert.h"
 #include "DIA_flyDialog.h"
 #include "DIA_flyDialogQt4.h"
 #include "ADM_videoFilter/ADM_vidASharp_param.h"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_chromashift.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_chromashift.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_chromashift.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -20,21 +20,16 @@
  *                                                                         *
  ***************************************************************************/
 
-#include <config.h>
-#include <string.h>
-#include <stdio.h>
-#include <math.h>
-
 #define Ui_Dialog Ui_chromashiftDialog
 #include "ui_chromashift.h"
 #undef Ui_Dialog
 
-#include "default.h"
+#include "ADM_default.h"
+
 #include "ADM_toolkit/toolkit.hxx"
 #include "ADM_image.h"
 #include "ADM_video/ADM_genvideo.hxx"
 #include "ADM_colorspace/ADM_rgb.h"
-#include "ADM_assert.h"
 #include "DIA_flyDialog.h"
 #include "DIA_flyDialogQt4.h"
 #include "ADM_videoFilter/ADM_vidChromaShift_param.h"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_contrast.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_contrast.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_contrast.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -20,21 +20,17 @@
  *                                                                         *
  ***************************************************************************/
 
-#include <config.h>
-#include <string.h>
-#include <stdio.h>
-#include <math.h>
-
 #define Ui_Dialog Ui_contrastDialog
 #include "ui_contrast.h"
 #undef Ui_Dialog
 
-#include "default.h"
+#include "ADM_default.h"
+
 #include "ADM_toolkit/toolkit.hxx"
 #include "ADM_image.h"
 #include "ADM_video/ADM_genvideo.hxx"
 #include "ADM_colorspace/ADM_rgb.h"
-#include "ADM_assert.h"
+
 #include "DIA_flyDialog.h"
 #include "DIA_flyDialogQt4.h"
 #include "ADM_videoFilter/ADM_vidContrast.h"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_crop.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_crop.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_crop.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -20,21 +20,16 @@
  *                                                                         *
  ***************************************************************************/
 
-#include <config.h>
-#include <string.h>
-#include <stdio.h>
-#include <math.h>
-
 #define Ui_Dialog Ui_cropDialog
 #include "ui_crop.h"
 #undef Ui_Dialog
 
-#include "default.h"
+#include "ADM_default.h"
+
 #include "ADM_toolkit/toolkit.hxx"
 #include "ADM_image.h"
 #include "ADM_video/ADM_genvideo.hxx"
 #include "ADM_colorspace/ADM_rgb.h"
-#include "ADM_assert.h"
 #include "DIA_flyDialog.h"
 #include "DIA_flyDialogQt4.h"
 #include "DIA_flyCrop.h"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_encoding.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_encoding.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_encoding.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -11,24 +11,20 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
-#include "config.h"
-#include <stdio.h>
-#include <stdlib.h>
-#include <math.h>
-
 #define Ui_Dialog Ui_encodingDialog
 #include "ui_encoding.h"
 #undef Ui_Dialog 
 
-#include "default.h"
+#include "ADM_default.h"
+
 #include "prefs.h"
-#include "ADM_assert.h"
-#include "ADM_osSupport/ADM_misc.h"
 #include "DIA_working.h"
 #include "DIA_encoding.h"
 #include "ADM_toolkit/toolkit.hxx"
 #include "ADM_libraries/ADM_utilities/avidemutils.h"
-
+#include "math.h"
+#include "ADM_video/ADM_vidMisc.h"
+#include "ADM_video/ADM_vidMisc.h"
 extern void UI_purge(void);
 static int stopReq=0;
 class encodingWindow : public QDialog

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_eq2.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_eq2.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_eq2.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -14,19 +14,14 @@
  *                                                                         *
  ***************************************************************************/
 
-#include <config.h>
-#include <string.h>
-#include <stdio.h>
-#include <math.h>
-
 #include "ui_eq2.h"
 
-#include "default.h"
+#include "ADM_default.h"
+
 #include "ADM_toolkit/toolkit.hxx"
 #include "ADM_image.h"
 #include "ADM_video/ADM_genvideo.hxx"
 #include "ADM_colorspace/ADM_rgb.h"
-#include "ADM_assert.h"
 #include "ADM_videoFilter/ADM_vidEq2.h"
 
 #include "DIA_flyDialog.h"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_hue.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_hue.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_hue.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -20,21 +20,16 @@
  *                                                                         *
  ***************************************************************************/
 
-#include <config.h>
-#include <string.h>
-#include <stdio.h>
-#include <math.h>
-
 #define Ui_Dialog Ui_hueDialog
 #include "ui_hue.h"
 #undef Ui_Dialog
 
-#include "default.h"
+#include "ADM_default.h"
+
 #include "ADM_toolkit/toolkit.hxx"
 #include "ADM_image.h"
 #include "ADM_video/ADM_genvideo.hxx"
 #include "ADM_colorspace/ADM_rgb.h"
-#include "ADM_assert.h"
 #include "DIA_flyDialog.h"
 #include "DIA_flyDialogQt4.h"
 #include "ADM_videoFilter/ADM_vidHue.h"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_jobs.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_jobs.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_jobs.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -2,24 +2,12 @@
     Jobs dialog
     (c) Mean 2007
 */
-#include "config.h"
-
-#include <stdio.h>
-#include <stdlib.h>
-#include <unistd.h>
-#include <math.h>
-
-
 #include "ui_jobs.h"
 
+#include "ADM_default.h"
 
-#include "default.h"
-#include "avidemutils.h"
-#include "avi_vars.h"
-#include "ADM_osSupport/ADM_misc.h"
 
 #include "ADM_toolkit/toolkit.hxx"
-#include "ADM_assert.h"
 
 static void             updateStatus(void);
 extern bool parseECMAScript(const char *name);

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_props.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_props.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_props.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -11,18 +11,12 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
-#include "config.h"
-
-#include <stdio.h>
-#include <stdlib.h>
-#include <math.h>
-
-
 #include "ui_props.h"
-#include "default.h"
-#include "avidemutils.h"
+#include "ADM_default.h"
+#include "math.h"
 #include "avi_vars.h"
-#include "ADM_osSupport/ADM_misc.h"
+#include "avidemutils.h"
+#include "ADM_video/ADM_vidMisc.h"
 static const char *yesno[2]={QT_TR_NOOP("No"),QT_TR_NOOP("Yes")};
 extern const char *getStrFromAudioCodec( uint32_t codec);
  class propWindow : public QDialog

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_resizing.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_resizing.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_resizing.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -11,20 +11,12 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
-#include "config.h"
-
-#include <stdio.h>
-#include <stdlib.h>
-#include <math.h>
-
 #define Ui_Dialog Ui_resizeDialog
 #include "ui_resizing.h"
 #undef Ui_Dialog
+#include "math.h"
+#include "ADM_default.h"
 
-#include "default.h"
-#include "avidemutils.h"
-#include "avi_vars.h"
-#include "ADM_osSupport/ADM_misc.h"
 static double aspectRatio[2][3]={
                               {1.,0.888888,1.19}, // NTSC 1:1 4:3 16:9
                               {1.,1.066667,1.43} // PAL  1:1 4:3 16:9

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_srt.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_srt.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_srt.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -16,21 +16,16 @@
  *                                                                         *
  ***************************************************************************/
 
-#include <config.h>
-#include <string.h>
-#include <stdio.h>
-#include <math.h>
-
 #define Ui_Dialog Ui_srtDialog
 #include "ui_srt.h"
 #undef Ui_Dialog
 
-#include "default.h"
+#include "ADM_default.h"
+
 #include "ADM_toolkit/toolkit.hxx"
 #include "ADM_image.h"
 #include "ADM_video/ADM_genvideo.hxx"
 #include "ADM_colorspace/ADM_rgb.h"
-#include "ADM_assert.h"
 #include "DIA_flyDialog.h"
 #include "DIA_flyDialogQt4.h"
 

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_vobsub.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_vobsub.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_vobsub.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -16,14 +16,10 @@
  *                                                                         *
  ***************************************************************************/
 
-#include <config.h>
-#include <string.h>
-#include <stdio.h>
-#include <math.h>
-
 #include "ui_vobsub.h"
 
-#include "default.h"
+#include "ADM_default.h"
+
 #include "ADM_toolkit/toolkit.hxx"
 #include "ADM_toolkit/filesel.h"
 #include "ADM_image.h"
@@ -33,10 +29,6 @@
 #include "ADM_videoFilter/ADM_vobsubinfo.h"
 #include "ADM_videoFilter/ADM_vidVobSub.h"
 
-#include "ADM_assert.h"
-
-
-
 //
 //	Video is in YV12 Colorspace
 //

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_working.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_working.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_working.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -11,20 +11,15 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
-#include "config.h"
-#include <stdio.h>
-#include <stdlib.h>
-#include <math.h>
-
 #define Ui_Dialog Ui_workDialog
 #include "ui_working.h"
 #undef Ui_Dialog 
+#include "math.h"
+#include "ADM_default.h"
+#include "ADM_video/ADM_vidMisc.h"
 
-#include "default.h"
-#include "ADM_assert.h"
-#include "ADM_osSupport/ADM_misc.h"
 #include "DIA_working.h"
-    
+#include "ADM_video/ADM_vidMisc.h"
 extern void UI_purge(void);
 
 class workWindow : public QDialog
@@ -92,10 +87,10 @@
         _nextUpdate=elapsed+1000;
         lastper=percent;
 
-		uint32_t hh,mm,ss;
-		char string[9];
-
-		ms2time(elapsed,&hh,&mm,&ss);
+		uint32_t hh,mm,ss;
+		char string[9];
+
+		ms2time(elapsed,&hh,&mm,&ss);
 		sprintf(string,"%02d:%02d:%02d",hh,mm,ss);
 
         workWindow *wind=(workWindow *)_priv; ADM_assert(wind);

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/T_QCanvas.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/T_QCanvas.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/T_QCanvas.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -12,18 +12,11 @@
 *                                                                         *
 ***************************************************************************///
 
-#include "config.h"
-
-#include <string.h>
-#include <stdio.h>
-#include <stdlib.h>
-
-
-
 #include <QtGui/QGraphicsView>
 #include <QtGui/QSlider>
 
-#include "default.h"
+#include "ADM_default.h"
+
 class  ADM_QCanvas : public QWidget
 {
      Q_OBJECT

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/T_flyDialog.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/T_flyDialog.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/T_flyDialog.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -12,13 +12,12 @@
 *                                                                         *
 ***************************************************************************///
 
-#include "config.h"
 
 #include <QtGui/QGraphicsView>
 #include <QtGui/QSlider>
 
-#include "default.h"
-#include "ADM_assert.h"
+#include "ADM_default.h"
+
 #include "ADM_video/ADM_genvideo.hxx"
 #include "DIA_flyDialog.h"
 #include "DIA_flyDialogQt4.h"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/T_index_pg.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/T_index_pg.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/T_index_pg.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -15,14 +15,6 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
-#include "config.h"
-
-#include <stdio.h>
-#include <stdlib.h>
-#include <string.h>
-#include <math.h>
-#include <assert.h>
-
 #include <QtCore/QVariant>
 #include <QtGui/QAction>
 #include <QtGui/QApplication>
@@ -33,17 +25,16 @@
 #include <QtGui/QVBoxLayout>
 #include <QtGui/QWidget>
 
-
-
-#include "default.h"
+#include "ADM_default.h"
+#include "math.h"
 #include "ADM_toolkit/toolkit.hxx"
 
 #include "ADM_video/ADM_genvideo.hxx"
 #include "ADM_encoder/ADM_vidEncode.hxx"
 #include "ADM_encoder/adm_encoder.h"
 #include "DIA_idx_pg.h"
-#include "ADM_assert.h"
-
+#include "ADM_video/ADM_vidMisc.h"
+#include "ADM_video/ADM_vidMisc.h"
 extern void UI_purge( void );
 
 class Ui_iDialog

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/alert_qt4.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/alert_qt4.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/alert_qt4.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -1,24 +1,35 @@
-#include "config.h"
-#include <stdio.h>
-#include <stdlib.h>
-#include <sys/types.h>
-#include <sys/stat.h>
-#include <unistd.h>
-#include <string.h>
-#include <stdio.h>
-#include <stdarg.h>
-#include <ctype.h>
-#include <math.h>
-#include "default.h"
-#include "prefs.h"
-#include "default.h"
 
+
+
+
+
+
+
+
+/**
+    \fn alert_qt4
+   copyright            : (C) 2007 by mean
+    email                : Mean/fixounet at free.fr
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+
 #include <QDialog>
 #include <QMessageBox>
 
+#include "ADM_default.h"
+#include "prefs.h"
+
 #include "ADM_toolkit/toolkit.hxx"
-#include "ADM_assert.h" 
 
+
 static int beQuiet=0;
 extern QWidget *QuiMainWindows;
 

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/FAC_bar.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/FAC_bar.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/FAC_bar.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -27,7 +27,7 @@
 #include <QLabel>
 #include <QProgressBar>
 
-#include "default.h"
+#include "ADM_default.h"
 #include "ADM_commonUI/DIA_factory.h"
 #include "ADM_assert.h"
 

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/FAC_float.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/FAC_float.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/FAC_float.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -26,7 +26,7 @@
 #include <QGridLayout>
 #include <QLabel>
 
-#include "default.h"
+#include "ADM_default.h"
 #include "ADM_commonUI/DIA_factory.h"
 #include "ADM_assert.h"
 

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/FAC_frame.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/FAC_frame.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/FAC_frame.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -27,7 +27,7 @@
 #include <QCheckBox>
 #include <QLabel>
 
-#include "default.h"
+#include "ADM_default.h"
 #include "ADM_commonUI/DIA_factory.h"
 #include "ADM_assert.h"
 

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/FAC_hex.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/FAC_hex.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/FAC_hex.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -26,7 +26,7 @@
 #include <QGridLayout>
 #include <QCheckBox>
 
-#include "default.h"
+#include "ADM_default.h"
 #include "ADM_commonUI/DIA_factory.h"
 #include "ADM_assert.h"
 

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/FAC_integer.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/FAC_integer.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/FAC_integer.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -27,7 +27,7 @@
 #include <QLabel>
 #include <QSlider>
 
-#include "default.h"
+#include "ADM_default.h"
 #include "ADM_commonUI/DIA_factory.h"
 #include "ADM_assert.h"
 

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/FAC_matrix.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/FAC_matrix.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/FAC_matrix.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -26,7 +26,7 @@
 #include <QGridLayout>
 #include <QLabel>
 
-#include "default.h"
+#include "ADM_default.h"
 #include "ADM_commonUI/DIA_factory.h"
 #include "ADM_assert.h"
 

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/FAC_notch.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/FAC_notch.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/FAC_notch.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -26,7 +26,7 @@
 #include <QGridLayout>
 #include <QCheckBox>
 
-#include "default.h"
+#include "ADM_default.h"
 #include "ADM_commonUI/DIA_factory.h"
 #include "ADM_assert.h"
 

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/FAC_readOnlyText.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/FAC_readOnlyText.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/FAC_readOnlyText.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -27,7 +27,7 @@
 #include <QLabel>
 #include <QLineEdit>
 
-#include "default.h"
+#include "ADM_default.h"
 #include "ADM_commonUI/DIA_factory.h"
 #include "ADM_assert.h"
 

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_bitrate.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_bitrate.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_bitrate.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -28,7 +28,7 @@
 #include <QComboBox>
 #include <QLabel>
 
-#include "default.h"
+#include "ADM_default.h"
 #include "ADM_commonUI/DIA_factory.h"
 #include "ADM_assert.h"
 

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_button.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_button.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_button.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -28,7 +28,7 @@
 #include <QComboBox>
 #include <QLabel>
 
-#include "default.h"
+#include "ADM_default.h"
 #include "ADM_commonUI/DIA_factory.h"
 #include "ADM_assert.h"
 

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_dialogFactory.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_dialogFactory.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_dialogFactory.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -28,7 +28,7 @@
 #include <QPushButton>
 #include <QTabWidget>
 
-#include "default.h"
+#include "ADM_default.h"
 #include "ADM_commonUI/DIA_factory.h"
 #include "ADM_assert.h"
 

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_filesel.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_filesel.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_filesel.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -28,7 +28,7 @@
 #include <QLabel>
 #include <QDialogButtonBox>
 
-#include "default.h"
+#include "ADM_default.h"
 #include "prefs.h"
 #include "ADM_commonUI/DIA_factory.h"
 #include "ADM_assert.h"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_menu.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_menu.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_menu.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -26,7 +26,7 @@
 #include <QLabel>
 #include <QGridLayout>
 
-#include "default.h"
+#include "ADM_default.h"
 #include "ADM_commonUI/DIA_factory.h"
 #include "ADM_assert.h"
 

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_slider.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_slider.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_slider.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -27,7 +27,7 @@
 #include <QLabel>
 #include <QSlider>
 
-#include "default.h"
+#include "ADM_default.h"
 #include "ADM_commonUI/DIA_factory.h"
 #include "ADM_assert.h"
 

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_threadCount.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_threadCount.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_threadCount.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -21,7 +21,7 @@
 #include <QButtonGroup>
 #include <QSpinBox>
 
-#include "default.h"
+#include "ADM_default.h"
 #include "ADM_commonUI/DIA_factory.h"
 
 extern const char* shortkey(const char*);

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_toggle.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_toggle.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_toggle.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -27,7 +27,7 @@
 #include <QCheckBox>
 #include <QSpinBox>
 
-#include "default.h"
+#include "ADM_default.h"
 #include "ADM_commonUI/DIA_factory.h"
 #include "ADM_assert.h"
 

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_QT4/ADM_filters/Q_mainfilter.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_QT4/ADM_filters/Q_mainfilter.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_QT4/ADM_filters/Q_mainfilter.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -35,7 +35,7 @@
 #undef Ui_Dialog
 #include "QStringListModel" 
 #include "QColor" 
-#include "default.h"
+#include "ADM_default.h"
 #include "ADM_toolkit/filesel.h"
 
 # include "prefs.h"
@@ -44,7 +44,7 @@
 
 #include "ADM_assert.h"
 #include "GUI_render.h"
-#include "ADM_osSupport/ADM_cpuCap.h"
+
 #include "ADM_toolkit/toolkit.hxx"
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_video/ADM_genvideo.hxx"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/Q_gui2.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/Q_gui2.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/Q_gui2.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -30,14 +30,15 @@
 #include <QtGui/QValidator>
 
 #include "ADM_qslider.h"
-#include "default.h"
-#include "ADM_osSupport/ADM_misc.h"
+#include "ADM_default.h"
+
 #include "ADM_codecs/ADM_codec.h"
 #include "gui_action.hxx"
 #include "ADM_editor/ADM_outputfmt.h"
 #include "ADM_toolkit/filesel.h"
+#include "ADM_video/ADM_vidMisc.h"
 #include "prefs.h"
-
+#include "ADM_video/ADM_vidMisc.h"
 extern int global_argc;
 extern char **global_argv;
 

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/file_qt4.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/file_qt4.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/file_qt4.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -9,18 +9,16 @@
 //
 //
 
-#include <config.h>
-#include <stdio.h>
-#include <stdlib.h>
 #include <dirent.h>
-#include "default.h"
+
 #include <QtCore/QVariant>
 #include <QtGui/qfiledialog.h>
+#include "ADM_default.h"
 
 #include "ADM_toolkit/toolkit.hxx"
 #include "ADM_toolkit/filesel.h"
 #include "prefs.h"
-#include "ADM_assert.h"
+
     
 static void GUI_FileSelSelect(const char *label, char **name, uint32_t access) ;
 

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_QT4/ADM_ocr/Q_ocr.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_QT4/ADM_ocr/Q_ocr.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_QT4/ADM_ocr/Q_ocr.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -23,7 +23,7 @@
 
 #include "ui_ocr.h"
 
-#include "default.h"
+#include "ADM_default.h"
 #include "ADM_toolkit/toolkit.hxx"
 #include "ADM_toolkit/filesel.h"
 #include "ADM_image.h"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -4,7 +4,7 @@
 
 */
 
-#include "default.h"
+#include "ADM_default.h"
 
 #include "ADM_lavcodec.h"
 

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_SVCD.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_SVCD.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_SVCD.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -20,7 +20,7 @@
 
 # include <math.h>
 
-#include "default.h"
+#include "ADM_default.h"
 
 #include "ADM_codecs/ADM_codec.h"
 #include "ADM_encoder/ADM_vidEncode.hxx"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_animated.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_animated.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_animated.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -20,7 +20,7 @@
 
 # include <math.h>
 
-#include "default.h"
+#include "ADM_default.h"
 #include "ADM_videoFilter/ADM_vidAnimated_param.h"
 #include "ADM_assert.h" 
 #include "DIA_factory.h"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -12,21 +12,7 @@
 //
 //
 
-#include <stdio.h>
-#include <stdlib.h>
-#include <string.h>
-#include <ADM_assert.h>
-#include <math.h>
-#include <math.h>
-#include <iconv.h>
-#include "config.h"
-
-
-#include "fourcc.h"
-
-
-#include "avi_vars.h"
-
+#include "ADM_default.h"
 #include "ADM_toolkit/toolkit.hxx"
 
 #include "ADM_userInterfaces/ADM_commonUI/DIA_factory.h"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioconfig.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioconfig.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioconfig.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -14,7 +14,7 @@
  *                                                                         *
  ***************************************************************************/
 
-#include "default.h"
+#include "ADM_default.h"
 
 #include "ADM_assert.h"
 

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_bitrateHisto.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_bitrateHisto.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_bitrateHisto.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -18,18 +18,11 @@
  *                                                                         *
  ***************************************************************************/
 
-#include "config.h"
-
-#include <stdio.h>
-#include <stdlib.h>
-#include <math.h>
-
-#include "default.h"
-#include "avi_vars.h"
+#include "ADM_default.h"
 #include "ADM_toolkit/toolkit.hxx"
 #include "DIA_factory.h"
-#include "ADM_assert.h"
-
+#include "avi_vars.h"
+#include "math.h"
 /**
       \fn GUI_displayBitrate
       \brief display a bargraph with bitrates

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -29,8 +29,7 @@
 #include <stdio.h>
 #include <math.h>
 
-#include "default.h"
-#include "ADM_osSupport/ADM_misc.h"
+#include "ADM_default.h"
 #include "DIA_factory.h"
 #include "ADM_assert.h"
 #include "ADM_libraries/ADM_libwrapper/libwrapper_global.h"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_encoding.h
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_encoding.h	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_encoding.h	2008-02-24 17:29:52 UTC (rev 3800)
@@ -4,7 +4,7 @@
 #ifndef ADM_ENCODING_H
 #define ADM_ENCODING_H
 
-#include "ADM_osSupport/TLK_clock.h"
+
 #include "ADM_tray.h"
 #define MAX_BR_SLOT 200
 

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_enter.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_enter.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_enter.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -14,7 +14,7 @@
  *                                                                         *
  ***************************************************************************/
 
-#include "default.h"
+#include "ADM_default.h"
 
 #include "ADM_assert.h"
 

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flv1.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flv1.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flv1.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -12,7 +12,7 @@
 
 #include "ADM_lavcodec.h"
 
-#include "default.h"
+#include "ADM_default.h"
 #include "ADM_toolkit/toolkit.hxx"
 #include "ADM_codecs/ADM_codec.h"
 #include "ADM_encoder/ADM_vidEncode.hxx"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flyAsharp.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flyAsharp.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flyAsharp.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -19,7 +19,7 @@
  *                                                                         *
  ***************************************************************************/
 
-#include "default.h"
+#include "ADM_default.h"
 
 #include "ADM_colorspace/ADM_rgb.h"
 

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flyChromaShift.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flyChromaShift.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flyChromaShift.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -18,7 +18,7 @@
 #include <string.h>
 #include <stdio.h>
 #include <math.h>
-#include "default.h"
+#include "ADM_default.h"
 #include "ADM_colorspace/ADM_rgb.h"
 
 #include "ADM_image.h"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flyContrast.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flyContrast.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flyContrast.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -15,7 +15,7 @@
  *                                                                         *
  ***************************************************************************/
 
-#include "default.h"
+#include "ADM_default.h"
 
 #include "ADM_colorspace/ADM_rgb.h"
 

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flyCrop.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flyCrop.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flyCrop.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -17,7 +17,7 @@
  *                                                                         *
  ***************************************************************************/
 
-#include "default.h"
+#include "ADM_default.h"
 
 #include "ADM_image.h"
 #include "ADM_video/ADM_genvideo.hxx"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flyDialog.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flyDialog.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flyDialog.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -12,7 +12,7 @@
 *                                                                         *
 ***************************************************************************///
 
-#include "default.h"
+#include "ADM_default.h"
 
 #include "ADM_colorspace/ADM_rgb.h"
 #include "ADM_commonUI/GUI_render.h"
@@ -252,9 +252,9 @@
 	{
 		_resizer->resize(_rgbBufferOut, _rgbBufferDisplay);
 
-		uint8_t* tempRgb = _rgbBufferDisplay;
-
-		_rgbBufferDisplay = _rgbBufferOut;
+		uint8_t* tempRgb = _rgbBufferDisplay;
+
+		_rgbBufferDisplay = _rgbBufferOut;
 		_rgbBufferOut = tempRgb;
 	}
 }

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flyEq2.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flyEq2.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flyEq2.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -18,7 +18,7 @@
 #include <string.h>
 #include <stdio.h>
 #include <math.h>
-#include "default.h"
+#include "ADM_default.h"
 #include "ADM_colorspace/ADM_rgb.h"
 
 #include "ADM_image.h"
@@ -26,7 +26,7 @@
 #include "ADM_videoFilter/ADM_vidContrast.h"
 #include "DIA_flyDialog.h"
 #include "DIA_flyEq2.h"
-#include "ADM_osSupport/ADM_cpuCap.h"
+
 /************* COMMON PART *********************/
 uint8_t  flyEq2::update(void)
 {

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flyEraser.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flyEraser.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flyEraser.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -15,7 +15,7 @@
  *                                                                         *
  ***************************************************************************/
 
-#include "default.h"
+#include "ADM_default.h"
 
 #include "ADM_colorspace/ADM_rgb.h"
 

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flyHue.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flyHue.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flyHue.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -27,7 +27,7 @@
 #include <string.h>
 #include <stdio.h>
 
-#include "default.h"
+#include "ADM_default.h"
 #include "ADM_colorspace/ADM_rgb.h"
 #include "ADM_image.h"
 #include "ADM_video/ADM_genvideo.hxx"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flyParticle.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flyParticle.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flyParticle.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -15,7 +15,7 @@
  *                                                                         *
  ***************************************************************************/
 
-#include "default.h"
+#include "ADM_default.h"
 
 #include "ADM_colorspace/ADM_rgb.h"
 

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flySrtPos.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flySrtPos.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flySrtPos.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -19,7 +19,7 @@
 #include <string.h>
 
 #include <math.h>
-#include "default.h"
+#include "ADM_default.h"
 #include "ADM_colorspace/ADM_rgb.h"
 #include "ADM_image.h"
 

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flySwissArmyKnife.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flySwissArmyKnife.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flySwissArmyKnife.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -15,7 +15,7 @@
  *                                                                         *
  ***************************************************************************/
 
-#include "default.h"
+#include "ADM_default.h"
 
 #include "ADM_colorspace/ADM_rgb.h"
 

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flyThreshold.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flyThreshold.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flyThreshold.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -19,7 +19,7 @@
 #include <string.h>
 #include <stdio.h>
 #include <math.h>
-#include "default.h"
+#include "ADM_default.h"
 #include "ADM_colorspace/ADM_rgb.h"
 
 #include "ADM_image.h"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_gototime.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_gototime.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_gototime.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -14,8 +14,7 @@
 #include <iconv.h>
 
 
-#include "default.h"
-#include "ADM_osSupport/ADM_misc.h"
+#include "ADM_default.h"
 #include "ADM_userInterfaces/ADM_commonUI/DIA_factory.h"
 #include <ADM_assert.h>
 

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_idx_pg.h
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_idx_pg.h	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_idx_pg.h	2008-02-24 17:29:52 UTC (rev 3800)
@@ -1,7 +1,7 @@
 #ifndef DIA_IDX_PG
 #define DIA_IDX_PG
-#include "ADM_osSupport/TLK_clock.h"
 
+
 class DIA_progressIndexing
 {
 protected:

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavDecoder.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavDecoder.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavDecoder.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -12,7 +12,7 @@
 //
 //
 
-#include "default.h"
+#include "ADM_default.h"
 #include "ADM_userInterfaces/ADM_commonUI/DIA_factory.h"
 
 /**

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -12,21 +12,7 @@
 //
 //
 
-#include <stdio.h>
-#include <stdlib.h>
-#include <string.h>
-#include <ADM_assert.h>
-#include <math.h>
-#include <math.h>
-#include <iconv.h>
-#include "config.h"
-
-
-#include "fourcc.h"
-
-
-#include "avi_vars.h"
-
+#include "ADM_default.h"
 #include "ADM_toolkit/toolkit.hxx"
 
 #include "ADM_userInterfaces/ADM_commonUI/DIA_factory.h"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_mjpeg.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_mjpeg.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_mjpeg.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -4,7 +4,7 @@
 
 */
 
-#include "default.h"
+#include "ADM_default.h"
 
 #include "ADM_lavcodec.h"
 

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -29,7 +29,7 @@
 #include <stdlib.h>
 #include <math.h>
 
-#include "default.h"
+#include "ADM_default.h"
 
 
 #include "ADM_userInterfaces/ADM_commonUI/DIA_factory.h"
@@ -40,7 +40,6 @@
 #include "ADM_videoFilter/ADM_vobsubinfo.h"
 #include "ADM_videoFilter/ADM_vidVobSub.h"
 #include "ADM_ocr/ADM_ocr.h"
-#include "ADM_osSupport/ADM_misc.h"
 #include "ADM_toolkit/toolkit.hxx"
 #include "prefs.h"
 #include "ADM_assert.h"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_postproc.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_postproc.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_postproc.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -12,21 +12,7 @@
 //
 //
 
-#include <stdio.h>
-#include <stdlib.h>
-#include <string.h>
-#include <ADM_assert.h>
-#include <math.h>
-#include <math.h>
-#include <iconv.h>
-#include "config.h"
-
-
-#include "fourcc.h"
-
-
-#include "avi_vars.h"
-
+#include "ADM_default.h"
 #include "ADM_toolkit/toolkit.hxx"
 
 #include "ADM_userInterfaces/ADM_commonUI/DIA_factory.h"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -20,14 +20,14 @@
 #include <stdio.h>
 
 #include "config.h"
-#include "default.h"
+#include "ADM_default.h"
 
 # include "prefs.h"
 #include "ADM_audiodevice/audio_out.h"
 
 #include "ADM_assert.h"
 #include "GUI_render.h"
-#include "ADM_osSupport/ADM_cpuCap.h"
+
 #include "ADM_toolkit/toolkit.hxx"
 #include "ADM_commonUI/DIA_factory.h"
 

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_requant.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_requant.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_requant.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -11,7 +11,7 @@
 
 #include "ADM_lavcodec.h"
 
-#include "default.h"
+#include "ADM_default.h"
 #include "ADM_toolkit/toolkit.hxx"
 #include "ADM_codecs/ADM_codec.h"
 #include "ADM_encoder/ADM_vidEncode.hxx"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_resizeWiz.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_resizeWiz.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_resizeWiz.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -17,7 +17,7 @@
  *                                                                         *
  ***************************************************************************/
 
-#include "default.h"
+#include "ADM_default.h"
 
 #include "ADM_assert.h"
 

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_srt.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_srt.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_srt.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -19,7 +19,7 @@
 #include <math.h>
 #include <iconv.h>
 
-#include "default.h"
+#include "ADM_default.h"
 #include "ADM_commonUI/GUI_render.h"
 #include "ADM_video/ADM_genvideo.hxx"
 #include "DIA_flyDialog.h"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -12,25 +12,12 @@
 //
 //
 
-#include <stdio.h>
-#include <stdlib.h>
-#include <string.h>
-#include <ADM_assert.h>
+#include "ADM_default.h"
 #include <math.h>
-#include <math.h>
-#include <iconv.h>
-#include "config.h"
 
-
-#include "fourcc.h"
-
-
-#include "avi_vars.h"
-
 #include "ADM_toolkit/toolkit.hxx"
 
 #include "ADM_userInterfaces/ADM_commonUI/DIA_factory.h"
-#include "ADM_assert.h" 
 #include "ADM_videoFilter/ADM_vidTDeint_param.h"
 /**
       \fn DIA_tdeint

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tsSub.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tsSub.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tsSub.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -24,7 +24,7 @@
 
 # include <math.h>
 #include "ADM_lavcodec.h"
-#include "default.h"
+#include "ADM_default.h"
 #include "ADM_toolkit/toolkit.hxx"
 #include "ADM_toolkit/filesel.h"
 #include "DIA_factory.h"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_v2v.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_v2v.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_v2v.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -15,7 +15,7 @@
  *                                                                         *
  ***************************************************************************/
 
-#include "default.h"
+#include "ADM_default.h"
 
 #include "ADM_toolkit/toolkit.hxx"
 #include "ADM_toolkit/filesel.h"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_working.h
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_working.h	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_working.h	2008-02-24 17:29:52 UTC (rev 3800)
@@ -20,7 +20,7 @@
 
 #ifndef __DIA_WK__
 #define __DIA_WK__
-#include "ADM_osSupport/TLK_clock.h"
+
 	class DIA_working
 	{
 		private :

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_commonUI/GUI_render.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_commonUI/GUI_render.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_commonUI/GUI_render.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -18,7 +18,7 @@
  *                                                                         *
  ***************************************************************************/
 
-#include "default.h"
+#include "ADM_default.h"
 
 #include "ADM_assert.h"
 

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_commonUI/GUI_sdlRender.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_commonUI/GUI_sdlRender.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_commonUI/GUI_sdlRender.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -15,7 +15,7 @@
 //
 //
 
-#include "default.h"
+#include "ADM_default.h"
 
 #if defined(USE_SDL)
 

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_commonUI/GUI_xvRender.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_commonUI/GUI_xvRender.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_commonUI/GUI_xvRender.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -37,7 +37,7 @@
 #include <X11/extensions/XShm.h>
 
 
-#include "default.h"
+#include "ADM_default.h"
 
 #include "ADM_colorspace/colorspace.h"
 #include "ADM_commonUI//GUI_render.h"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_video/ADM_cache.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_video/ADM_cache.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_video/ADM_cache.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -9,16 +9,7 @@
 // Copyright: See COPYING file that comes with this distribution
 //
 //
-#include "config.h"
-#include <stdio.h>
-#include <stdlib.h>
-#include <string.h>
-#include <ADM_assert.h>
-
-#include "config.h"
-#include "fourcc.h"
-#include "avi_vars.h"
-
+#include "ADM_default.h"
 #include "ADM_toolkit/toolkit.hxx"
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_video/ADM_genvideo.hxx"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_video/ADM_cache.h
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_video/ADM_cache.h	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_video/ADM_cache.h	2008-02-24 17:29:52 UTC (rev 3800)
@@ -12,7 +12,7 @@
 
 #ifndef __ADM_CACHE__
 #define __ADM_CACHE__
-
+#include "ADM_video/ADM_genvideo.hxx"
 typedef struct vidCacheEntry
 {
 		uint32_t 	frameNum;

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_video/ADM_confCouples.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_video/ADM_confCouples.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_video/ADM_confCouples.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -15,7 +15,7 @@
  *                                                                         *
  ***************************************************************************/
 
-#include "default.h"
+#include "ADM_default.h"
 
 #include "fourcc.h"
 #include "ADM_assert.h"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_video/ADM_interlaced.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_video/ADM_interlaced.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_video/ADM_interlaced.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -28,31 +28,22 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
-#include <stdio.h>
-#include <stdlib.h>
-#include <string.h>
-#include <ADM_assert.h>
-#include <math.h>
-#include "config.h"
-#include "fourcc.h"
+#include "ADM_default.h"
 
-#include "config.h"
- #include "avi_vars.h"
-
 #include "ADM_toolkit/toolkit.hxx"
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_video/ADM_genvideo.hxx"
 #include "ADM_video/ADM_vidCommonFilter.h"
-#include "ADM_osSupport/ADM_cpuCap.h"
+
 //#define MMX_TRACE
 #define ASM_ILACING
 
 
 #include "mmx_macros.h"
 
-#include "admmangle.h"
 
 
+
 #define SKIP_FACTOR 2   // 2^SKIPFACTOR=SKIP_LINEAR+1
 #define SKIP_LINEAR   3
 

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_video/ADM_vidCNR2.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_video/ADM_vidCNR2.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_video/ADM_vidCNR2.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -36,15 +36,7 @@
 //         20/07/2002 - ver 2.0  - Avisynth filter coded (from scratch)
 
 
-#include "config.h"
-#include <stdio.h>
-#include <stdlib.h>
-#include <string.h>
-#include <ADM_assert.h>
-
-#include "config.h"
-#include "fourcc.h"
-#include "avi_vars.h"
+#include "ADM_default.h"
 #include "math.h"
 
 #include "ADM_toolkit/toolkit.hxx"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_video/ADM_vidClean.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_video/ADM_vidClean.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_video/ADM_vidClean.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -14,18 +14,8 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
-#include <stdio.h>
-#include <stdlib.h>
-#include <string.h>
-#include <ADM_assert.h>
+#include "ADM_default.h"
 
-#include "config.h"
-#include "fourcc.h"
-
-#include "config.h"
-#include "avi_vars.h"
-
-
 #include "ADM_toolkit/toolkit.hxx"
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_video/ADM_genvideo.hxx"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_video/ADM_vidColorYuv.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_video/ADM_vidColorYuv.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_video/ADM_vidColorYuv.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -44,15 +44,7 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
-#include "config.h"
-#include <stdio.h>
-#include <stdlib.h>
-#include <string.h>
-#include <ADM_assert.h>
-
-#include "config.h"
-#include "fourcc.h"
-#include "avi_vars.h"
+#include "ADM_default.h"
 #include "math.h"
 
 #include "ADM_toolkit/toolkit.hxx"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_video/ADM_vidEqualizer.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_video/ADM_vidEqualizer.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_video/ADM_vidEqualizer.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -7,16 +7,7 @@
    GPL version 2
 
  ***************************************************************************/
-#include "config.h"
-#include <stdio.h>
-#include <stdlib.h>
-#include <string.h>
-#include <ADM_assert.h>
-
-#include "config.h"
-#include "fourcc.h"
-
-#include "avi_vars.h"
+#include "ADM_default.h"
 #include "math.h"
 
 #include "ADM_toolkit/toolkit.hxx"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_video/ADM_vidFieldUnblend.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_video/ADM_vidFieldUnblend.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_video/ADM_vidFieldUnblend.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -24,7 +24,7 @@
 
 #include "config.h"
 #include "fourcc.h"
-#include "default.h"
+#include "ADM_default.h"
 #include "math.h"
 
 #include "ADM_toolkit/toolkit.hxx"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_video/ADM_vidFieldUtil.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_video/ADM_vidFieldUtil.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_video/ADM_vidFieldUtil.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -18,19 +18,8 @@
  *                                                                         *
  ***************************************************************************/
 
-#include <stdio.h>
-#include <stdlib.h>
-#include <string.h>
-#include <ADM_assert.h>
+#include "ADM_default.h"
 
-#include "config.h"
-#include "fourcc.h"
-
-#include "config.h"
-#include "avi_vars.h"
-
-
-
 #include "ADM_toolkit/toolkit.hxx"
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_video/ADM_genvideo.hxx"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_video/ADM_vidFont.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_video/ADM_vidFont.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_video/ADM_vidFont.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -15,7 +15,7 @@
  *                                                                         *
  ***************************************************************************/
 
-#include "default.h"
+#include "ADM_default.h"
 
 #include <iconv.h>
 

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_video/ADM_vidMPdelogo.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_video/ADM_vidMPdelogo.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_video/ADM_vidMPdelogo.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -6,18 +6,7 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
-#include "config.h"
-
-#include <stdio.h>
-#include <stdlib.h>
-#include <string.h>
-#include <math.h>
-#include <ADM_assert.h>
-
-#include "fourcc.h"
-
-#include "avi_vars.h"
-
+#include "ADM_default.h"
 #include "ADM_toolkit/toolkit.hxx"
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_video/ADM_genvideo.hxx"
@@ -34,7 +23,7 @@
 
 #include "ADM_lavutil/avutil.h"
 #include "../ADM_libswscale/swscale.h"
-#include "ADM_osSupport/ADM_cpuCap.h"
+
 #include "ADM_filter/video_filters.h"
 
 #include "ADM_video/ADM_cache.h"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_video/ADM_vidMisc.h
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_video/ADM_vidMisc.h	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_video/ADM_vidMisc.h	2008-02-24 17:29:52 UTC (rev 3800)
@@ -1,5 +1,5 @@
 /***************************************************************************
-                          ADM_misc.h  -  description
+                          ADM_vidMisc.h  -  description
     copyright            : (C) 2001 by mean
     email                : fixounet at free.fr
  ***************************************************************************/
@@ -13,29 +13,9 @@
  *                                                                         *
  ***************************************************************************/
 
-#ifndef __ADM_MISC__
-#define __ADM_MISC__
-//#include "time.h"
+#ifndef __ADM_VIDMISC__
+#define __ADM_VIDMISC__
 
-typedef enum 
-{
-        ADM_LOG_NONE=0,
-        ADM_LOG_IMPORTANT=1,
-        ADM_LOG_INFO=2,
-        ADM_LOG_DEBUG=3
-  
-} ADM_LOG_LEVEL;
-typedef struct 
-{
-  uint32_t hours,minutes,seconds; 
-} ADM_date;
-void            TLK_getDate(ADM_date *date);
-void            PathSplit(char *str, char **root, char **ext);
-void	        PathStripName(char *str);
-const char      *GetFileName(const char *str);
-char            *PathCanonize(const char *tmpname);
-void            LowerCase(char *string);
-uint32_t        getTime( int called );;
 void            frame2time(uint32_t frame, uint32_t fps, uint16_t * hh, uint16_t * mm,
                                 uint16_t * ss, uint16_t * ms);
 void            time2frame(uint32_t *frame, uint32_t fps, uint32_t hh, uint32_t mm,
@@ -43,68 +23,11 @@
 void            ms2time(uint32_t len2,uint16_t * hh, uint16_t * mm,
                                 uint16_t * ss, uint16_t * ms);				
 char*			ms2timedisplay(uint32_t ms);
-uint32_t 		getTimeOfTheDay(void);
-uint64_t 	ADM_swap64(uint64_t in);
-uint32_t 	ADM_swap32(uint32_t in);
-uint16_t 	ADM_swap16(uint16_t in);
-inline uint32_t 		dontswap(uint32_t in) {return in;};
-char 		*ADM_rindex(const char *s, int c);
-char 		*ADM_index(const char *s, int c);
-void 		ADM_usleep(unsigned long us);
-uint8_t         ADM_fileExist(char *name);
 
-#ifdef HAVE_GETTIMEOFDAY
-	#define TIMZ struct timezone
-#else
-	#ifndef HAVE_STRUCT_TIMESPEC
-	#define HAVE_STRUCT_TIMESPEC
-	extern "C"
-	{
-		typedef struct timespec
-		{
-			time_t tv_sec;
-			long int tv_nsec;
-		};
-
-		void gettimeofday(struct timeval *p, void *tz);
-		};
-		#define timezone int
-		#define TIMZ int
-	#endif
-#endif
-
-#ifdef ADM_WIN32
-	#define PRIO_MIN -20
-	#define PRIO_MAX 20
-	#define PRIO_PROCESS 0
-
-	int getpriority(int which, int who);
-	int setpriority(int which, int who, int value);
-
-	#define RB_POWER_OFF 0x4321fedc
-	#define SHTDN_REASON_FLAG_PLANNED 0x80000000
-
-	int shutdown_win32(void);
-	void getWorkingArea(uint32_t *width, uint32_t *height);
-#else
-	#include <sys/resource.h>
-#endif
-
-bool shutdown(void);
-
 #define FRAME_PAL 1
 #define FRAME_FILM 2
 #define FRAME_NTSC 3
 
 uint8_t 	identMovieType(uint32_t fps1000); // identify the movie type (mainly for mpeg1/2) 
 uint8_t 	ms2time(uint32_t ms, uint32_t *h,uint32_t *m, uint32_t *s);
-#ifdef ADM_BIG_ENDIAN	
-	#define R64 ADM_swap64
-	#define R32 ADM_swap32
-	#define R16 ADM_swap16
-#else
-	#define R64(x) (x)
-	#define R32(x) (x) 
-	#define R16(x) (x) 
 #endif
-#endif

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_video/ADM_vidPartial.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_video/ADM_vidPartial.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_video/ADM_vidPartial.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -20,18 +20,8 @@
  *                                                                         *
  ***************************************************************************/
 
-#include <stdio.h>
-#include <stdlib.h>
-#include <string.h>
-#include <ADM_assert.h>
+#include "ADM_default.h"
 
-#include "config.h"
-#include "fourcc.h"
-#include "config.h"
-#include "avi_vars.h"
-#ifdef HAVE_ENCODER
-
-
 #include "ADM_toolkit/toolkit.hxx"
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_video/ADM_genvideo.hxx"
@@ -162,5 +152,5 @@
 }  
 
  		                                                                         
-#endif
 
+

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_guiResize.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_guiResize.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_guiResize.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -17,21 +17,8 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
-#include "config.h"
+#include "ADM_default.h"
 
-#include <stdio.h>
-#include <stdlib.h>
-#include <string.h>
-
-#include <time.h>
-#include <sys/time.h>
-#include "config.h"
-#include "fourcc.h"
-
-#include "avi_vars.h"
-#ifdef HAVE_ENCODER
-
-
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_video/ADM_genvideo.hxx"
 #include "ADM_resizebis.hxx"
@@ -105,4 +92,4 @@
 }
 
 
-#endif
+

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_lavpp_deint.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_lavpp_deint.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_lavpp_deint.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -38,8 +38,8 @@
 
 #include "ADM_colorspace/colorspace.h"
 
-#include "ADM_osSupport/ADM_cpuCap.h"
 
+
 #include "ADM_osSupport/ADM_debugID.h"
 #define MODULE_NAME MODULE_FILTER
 #include "ADM_osSupport/ADM_debug.h"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_resizebis.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_resizebis.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_resizebis.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -21,17 +21,8 @@
  *                                                                         *
  ***************************************************************************/
 
-#include <stdio.h>
-#include <stdlib.h>
-#include <string.h>
-#include <ADM_assert.h>
-#include <math.h>
-#include "config.h"
-#include "fourcc.h"
-#include "config.h"
- #include "avi_vars.h"
-#ifdef HAVE_ENCODER
-
+#include "ADM_default.h"
+#include "math.h"
 #include "ADM_toolkit/toolkit.hxx"
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_video/ADM_genvideo.hxx"
@@ -362,4 +353,4 @@
 }
 
 
-#endif
+

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_resizeter.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_resizeter.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_resizeter.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -22,17 +22,8 @@
  *                                                                         *
  ***************************************************************************/
 
-#include <stdio.h>
-#include <stdlib.h>
-#include <string.h>
-#include <ADM_assert.h>
-#include <math.h>
-#include "config.h"
-#include "fourcc.h"
-#include "config.h"
-#include "avi_vars.h"
+#include "ADM_default.h"
 
-
 #include "ADM_toolkit/toolkit.hxx"
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_video/ADM_genvideo.hxx"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidASS.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidASS.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidASS.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -10,18 +10,8 @@
   Initial port from MPlayer by Moonz
 
 */
-#include "config.h"
+#include "ADM_default.h"
 
-#include <stdio.h>
-#include <stdlib.h>
-#include <string.h>
-#include "ADM_assert.h"
-
-
-#include "fourcc.h"
-#include "avi_vars.h"
-#ifdef HAVE_ENCODER
-
 #include "ADM_toolkit/toolkit.hxx"
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_video/ADM_genvideo.hxx"
@@ -371,5 +361,5 @@
         return 1;
 }
 /************************************************/
-#endif /* HAVE_ENCODER */
 #endif /* USE_FREETYPE */
+

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidAddBorder.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidAddBorder.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidAddBorder.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -14,18 +14,8 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
-#include <stdio.h>
-#include <stdlib.h>
-#include <string.h>
-#include <ADM_assert.h>
+#include "ADM_default.h"
 
-#include "config.h"
-#include "fourcc.h"
-#include "config.h"
-#include "avi_vars.h"
-#ifdef HAVE_ENCODER
-
-
 #include "ADM_toolkit/toolkit.hxx"
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_video/ADM_genvideo.hxx"
@@ -252,4 +242,4 @@
 
 
 
-#endif
+

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidAnimated.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidAnimated.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidAnimated.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -11,17 +11,7 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
-#include "config.h"
-#include <stdio.h>
-#include <stdlib.h>
-#include <string.h>
-#include <ADM_assert.h>
-
-#include "config.h"
-#include "fourcc.h"
-#include "avi_vars.h"
-#include "math.h"
-
+#include "ADM_default.h"
 #include "ADM_toolkit/toolkit.hxx"
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_video/ADM_genvideo.hxx"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidAsharp.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidAsharp.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidAsharp.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -23,17 +23,7 @@
         Foundation, Inc., 675 Mass Ave, Cambridge, MA 02139, USA.
 */
 
-#include "config.h"
-#include <stdio.h>
-#include <stdlib.h>
-#include <string.h>
-#include <ADM_assert.h>
-
-#include "config.h"
-#include "fourcc.h"
-
-#include "avi_vars.h"
-
+#include "ADM_default.h"
 #include "ADM_toolkit/toolkit.hxx"
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_video/ADM_genvideo.hxx"
@@ -43,7 +33,7 @@
 #define MODULE_NAME MODULE_FILTER
 #include "ADM_osSupport/ADM_debug.h"
 
-#include "ADM_osSupport/ADM_cpuCap.h"
+
 #include "ADM_filter/video_filters.h"
 
 #include "ADM_vidASharp_param.h"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidBSmear.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidBSmear.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidBSmear.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -22,17 +22,7 @@
  *                                                                         *
  ***************************************************************************/
 
-#include <stdio.h>
-#include <stdlib.h>
-#include <string.h>
-#include "ADM_assert.h"
-
-#include "config.h"
-#include "fourcc.h"
-#include "avi_vars.h"
-
-#ifdef HAVE_ENCODER
-
+#include "ADM_default.h"
 #include "ADM_toolkit/toolkit.hxx"
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_video/ADM_genvideo.hxx"
@@ -227,4 +217,4 @@
       }
 }
 
-#endif
+

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidBlend.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidBlend.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidBlend.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -18,26 +18,15 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
-#include <stdio.h>
-#include <stdlib.h>
-#include <string.h>
-#include <ADM_assert.h>
-
-#include "config.h"
-#include "fourcc.h"
-#include "config.h"
-#include "avi_vars.h"
-
-
-
+#include "ADM_default.h"
 #include "ADM_toolkit/toolkit.hxx"
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_video/ADM_genvideo.hxx"
 
 #include"ADM_vidField.h"
 
-#include "admmangle.h"
 
+
 #ifdef ARCH_X86_64
 static int64_t _l_w,_l_h;
 #else

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidBlendRemoval.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidBlendRemoval.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidBlendRemoval.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -24,7 +24,7 @@
 
 #include "config.h"
 #include "fourcc.h"
-#include "default.h"
+#include "ADM_default.h"
 #include "math.h"
 
 #include "ADM_toolkit/toolkit.hxx"
@@ -37,7 +37,7 @@
 #include "ADM_video/ADM_cache.h"
 #include "ADM_filter/video_filters.h"
 #include "ADM_userInterfaces/ADM_commonUI/DIA_enter.h"
-#include "ADM_osSupport/ADM_cpuCap.h"
+
 #include "ADM_userInterfaces/ADM_commonUI/DIA_factory.h"
 #include "ADM_vidBlendRemoval_param.h"
 #define MUL 1

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidChroma.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidChroma.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidChroma.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -15,17 +15,8 @@
  *                                                                         *
  ***************************************************************************/
 
-#include <stdio.h>
-#include <stdlib.h>
-#include <string.h>
-#include <ADM_assert.h>
+#include "ADM_default.h"
 
-#include "config.h"
-#include "fourcc.h"
-#include "config.h"
-#include "avi_vars.h"
-
-
 #include "ADM_toolkit/toolkit.hxx"
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_video/ADM_genvideo.hxx"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidChromaShift.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidChromaShift.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidChromaShift.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -16,18 +16,8 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
-#include <stdio.h>
-#include <stdlib.h>
-#include <string.h>
-#include <ADM_assert.h>
+#include "ADM_default.h"
 
-#include "config.h"
-#include "fourcc.h"
-#include "config.h"
-#include "avi_vars.h"
-#ifdef HAVE_ENCODER
-
-
 #include "ADM_toolkit/toolkit.hxx"
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_video/ADM_genvideo.hxx"
@@ -251,4 +241,4 @@
 
 }
 
-#endif
+

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidComputeAverage.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidComputeAverage.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidComputeAverage.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -18,13 +18,7 @@
  *                                                                         *
  ***************************************************************************/
  
-#include "default.h"
-
-#include "ADM_assert.h"
-#include "fourcc.h"
-
-#include "avi_vars.h"
-
+#include "ADM_default.h"
 #include "ADM_toolkit/toolkit.hxx"
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_video/ADM_genvideo.hxx"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidContrast.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidContrast.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidContrast.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -14,19 +14,8 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
-#include <stdio.h>
-#include <stdlib.h>
-#include <string.h>
-#include <ADM_assert.h>
-#include <math.h>
-
-#include "config.h"
-#include "fourcc.h"
-
-#include "config.h"
-#include "avi_vars.h"
-
-
+#include "ADM_default.h"
+#include "math.h"
 #include "ADM_toolkit/toolkit.hxx"
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_video/ADM_genvideo.hxx"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidCrop.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidCrop.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidCrop.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -20,18 +20,7 @@
  *                                                                         *
  ***************************************************************************/
 
-#include <stdio.h>
-#include <stdlib.h>
-#include <string.h>
-#include <ADM_assert.h>
-
-#include "config.h"
-#include "fourcc.h"
-
-#include "config.h"
-#include "avi_vars.h"
-#ifdef HAVE_ENCODER
-
+#include "ADM_default.h"
 #include "ADM_toolkit/toolkit.hxx"
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_video/ADM_genvideo.hxx"
@@ -203,4 +192,4 @@
 		}
 		return r;
 }
-#endif
+

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidDGbob.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidDGbob.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidDGbob.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -22,16 +22,7 @@
 */
 
 
-#include "config.h"
-#include <stdio.h>
-#include <stdlib.h>
-#include <string.h>
-#include <ADM_assert.h>
-
-#include "config.h"
-#include "fourcc.h"
-#include "avi_vars.h"
-
+#include "ADM_default.h"
 #include "ADM_toolkit/toolkit.hxx"
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_video/ADM_genvideo.hxx"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidDecDec.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidDecDec.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidDecDec.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -40,16 +40,7 @@
 	Donald Graft
 	neuron2 at attbi.com.
 */
-#include "config.h"
-#include <stdio.h>
-#include <stdlib.h>
-#include <string.h>
-#include <ADM_assert.h>
-
-#include "config.h"
-#include "fourcc.h"
-#include "avi_vars.h"
-
+#include "ADM_default.h"
 #include "ADM_toolkit/toolkit.hxx"
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_video/ADM_genvideo.hxx"
@@ -60,10 +51,10 @@
 #define MODULE_NAME MODULE_FILTER
 #include "ADM_osSupport/ADM_debug.h"
 
-#include "ADM_osSupport/ADM_cpuCap.h"
+
 #include "ADM_userInterfaces/ADM_commonUI/DIA_factory.h"
-#include "admmangle.h"
 
+
 #define PROGRESSIVE  0x00000001
 #define MAGIC_NUMBER (0xdeadbeef)
 #define IN_PATTERN   0x00000002

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidDecTelecide.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidDecTelecide.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidDecTelecide.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -30,16 +30,7 @@
 	along with this program; if not, write to the Free Software
 	Foundation, Inc., 675 Mass Ave, Cambridge, MA 02139, USA.
 */
-#include "config.h"
-#include <stdio.h>
-#include <stdlib.h>
-#include <string.h>
-#include <ADM_assert.h>
-
-#include "config.h"
-#include "fourcc.h"
-#include "avi_vars.h"
-
+#include "ADM_default.h"
 #include "ADM_toolkit/toolkit.hxx"
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_video/ADM_genvideo.hxx"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidDeintASM.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidDeintASM.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidDeintASM.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -18,18 +18,8 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
-#include <stdio.h>
-#include <stdlib.h>
-#include <string.h>
-#include <ADM_assert.h>
+#include "ADM_default.h"
 
-#include "config.h"
-#include "fourcc.h"
-#include "config.h"
-#include "avi_vars.h"
-
-
-
 #include "ADM_toolkit/toolkit.hxx"
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_video/ADM_genvideo.hxx"
@@ -40,7 +30,6 @@
 //	#define DEBUG_DEINT 1
 //	#define MMX_TRACE 1
 	#include "ADM_video/mmx_macros.h"
-#include "admmangle.h"
 
  void myDeintASM(void);
 

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidDeinterlace.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidDeinterlace.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidDeinterlace.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -20,19 +20,7 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
-#include <stdio.h>
-#include <stdlib.h>
-#include <string.h>
-#include <ADM_assert.h>
-
-#include "config.h"
-#include "fourcc.h"
-#include "config.h"
-#include "avi_vars.h"
-#ifdef HAVE_ENCODER
-
-
-
+#include "ADM_default.h"
 #include "ADM_toolkit/toolkit.hxx"
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_video/ADM_genvideo.hxx"
@@ -110,5 +98,5 @@
 }
 
 
-#endif
 
+

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidDelta.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidDelta.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidDelta.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -5,17 +5,7 @@
 //
 
 
-#include "config.h"
-#include <stdio.h>
-#include <stdlib.h>
-#include <string.h>
-#include <ADM_assert.h>
-
-#include "config.h"
-#include "fourcc.h"
-#include "avi_vars.h"
-#include "math.h"
-
+#include "ADM_default.h"
 #include "ADM_toolkit/toolkit.hxx"
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_video/ADM_genvideo.hxx"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidDenoise.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidDenoise.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidDenoise.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -21,18 +21,7 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
-#include <stdio.h>
-#include <stdlib.h>
-#include <string.h>
-#include <ADM_assert.h>
-#include <math.h>
-
-#include "config.h"
-#include "fourcc.h"
-#include "config.h"
-#include "avi_vars.h"
-
-
+#include "ADM_default.h"
 #include "ADM_toolkit/toolkit.hxx"
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_video/ADM_genvideo.hxx"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidDropOut.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidDropOut.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidDropOut.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -14,19 +14,7 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
-#include <stdio.h>
-#include <stdlib.h>
-#include <string.h>
-#include <ADM_assert.h>
-#include <math.h>
-
-#include "config.h"
-#include "fourcc.h"
-#include "config.h"
-#include "avi_vars.h"
-#ifdef HAVE_ENCODER
-
-
+#include "ADM_default.h"
 #include "ADM_toolkit/toolkit.hxx"
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_video/ADM_genvideo.hxx"
@@ -222,4 +210,4 @@
 }
 
 
-#endif
+

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidDvbSub.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidDvbSub.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidDvbSub.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -27,7 +27,7 @@
 #include <string.h>
 #include "ADM_lavcodec.h"
 #include "ADM_assert.h"
-#include "default.h"
+#include "ADM_default.h"
 
 #include "fourcc.h"
 

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidEq2.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidEq2.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidEq2.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -25,7 +25,7 @@
 #include <ADM_assert.h>
 
 
-#include "default.h"
+#include "ADM_default.h"
 
 
 #include "ADM_toolkit/toolkit.hxx"
@@ -35,8 +35,8 @@
 #include "ADM_userInterfaces/ADM_commonUI/DIA_enter.h"
 #include "ADM_video/ADM_cache.h"
 
-#include "admmangle.h"
-#include "ADM_osSupport/ADM_cpuCap.h"
+
+
 #include "ADM_vidEq2.h"
 static FILTER_PARAM Eq2Param={8,{"contrast","brightness","saturation",
                                 "gamma","gamma_weight","rgamma","ggamma","bgamma"}};

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidEraser.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidEraser.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidEraser.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -15,7 +15,7 @@
  *                                                                         *
  ***************************************************************************/
  
-#include "default.h"
+#include "ADM_default.h"
 
 #include <ctype.h>
 #include <errno.h>

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidFade.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidFade.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidFade.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -7,18 +7,8 @@
  *                                                                         *
  ***************************************************************************/
 
-#include "config.h"
-#include <stdio.h>
-#include <stdlib.h>
-#include <string.h>
-#include <math.h>
-#include <ADM_assert.h>
-
-#include "config.h"
-#include "fourcc.h"
-
-#include "avi_vars.h"
-
+#include "ADM_default.h"
+#include "math.h"
 #include "ADM_toolkit/toolkit.hxx"
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_video/ADM_genvideo.hxx"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidFastConvolution.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidFastConvolution.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidFastConvolution.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -19,7 +19,7 @@
 #include <stdio.h>
 #include <stdlib.h>
 #include <string.h>
-#include "default.h"
+#include "ADM_default.h"
 
 #include "ADM_toolkit/toolkit.hxx"
 #include "ADM_editor/ADM_edit.hxx"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidFields.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidFields.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidFields.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -14,25 +14,15 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
-#include <stdio.h>
-#include <stdlib.h>
-#include <string.h>
-#include <ADM_assert.h>
+#include "ADM_default.h"
 
-#include "config.h"
-#include "fourcc.h"
-#include "config.h"
-#include "avi_vars.h"
-#ifdef HAVE_ENCODER
 
-
-
 #include "ADM_toolkit/toolkit.hxx"
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_video/ADM_genvideo.hxx"
 
 #include"ADM_vidField.h"
-#include "ADM_osSupport/ADM_cpuCap.h"
+
 //_______________________________________________________________
 
 ADMVideoFields::ADMVideoFields(
@@ -239,4 +229,4 @@
 }      
 
 
-#endif
+

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidFlipV.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidFlipV.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidFlipV.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -15,18 +15,8 @@
  *                                                                         *
  ***************************************************************************/
 
- #include <stdio.h>
-#include <stdlib.h>
-#include <string.h>
-#include <ADM_assert.h>
+#include "ADM_default.h"
 
-#include "config.h"
-#include "fourcc.h"
-#include "config.h"
-#include "avi_vars.h"
-#ifdef HAVE_ENCODER
-
-
 #include "ADM_toolkit/toolkit.hxx"
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_video/ADM_genvideo.hxx"
@@ -121,4 +111,4 @@
 
 
 
-#endif
+

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidFlux.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidFlux.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidFlux.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -25,7 +25,7 @@
 #include <ADM_assert.h>
 #include <math.h>
 
-#include "default.h"
+#include "ADM_default.h"
 #include "fourcc.h"
 #include "config.h"
 
@@ -34,8 +34,8 @@
 //#include "ADM_toolkit/toolkit.hxx"
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_video/ADM_genvideo.hxx"
-#include "admmangle.h"
 
+
 #include "ADM_userInterfaces/ADM_commonUI/DIA_factory.h"
 #include "ADM_vidFlux.h"
 #include "ADM_filter/video_filters.h"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidForcedPP.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidForcedPP.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidForcedPP.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -12,20 +12,7 @@
 //
 //
 
-#include <stdio.h>
-#include <stdlib.h>
-#include <string.h>
-#include <ADM_assert.h>
-#include <math.h>
-#include <math.h>
-#include <iconv.h>
-#include "config.h"
-
-
-#include "fourcc.h"
-
-#include "avi_vars.h"
-
+#include "ADM_default.h"
 #include "ADM_toolkit/toolkit.hxx"
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_video/ADM_genvideo.hxx"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidHardIvtcRemoval.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidHardIvtcRemoval.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidHardIvtcRemoval.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -24,7 +24,7 @@
 
 #include "config.h"
 #include "fourcc.h"
-#include "default.h"
+#include "ADM_default.h"
 #include "math.h"
 
 #include "ADM_toolkit/toolkit.hxx"
@@ -37,7 +37,7 @@
 #include "ADM_video/ADM_cache.h"
 #include "ADM_filter/video_filters.h"
 #include "ADM_userInterfaces/ADM_commonUI/DIA_enter.h"
-#include "ADM_osSupport/ADM_cpuCap.h"
+
 #include "ADM_userInterfaces/ADM_commonUI/DIA_factory.h"
 
 #define MUL 1

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidHue.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidHue.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidHue.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -11,22 +11,8 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
-
-#include <stdio.h>
-#include <math.h>
-
-#include <stdlib.h>
-#include <string.h>
-#include <ADM_assert.h>
-
-#include "config.h"
-#include "fourcc.h"
-
-#include "config.h"
-#include "avi_vars.h"
-#ifdef HAVE_ENCODER
-
-
+#include "ADM_default.h"
+#include "math.h"
 #include "ADM_toolkit/toolkit.hxx"
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_video/ADM_genvideo.hxx"
@@ -34,7 +20,7 @@
 #include "ADM_userInterfaces/ADM_commonUI/DIA_enter.h"
 #include "ADM_video/ADM_cache.h"
 
-#include "admmangle.h"
+
 #include "ADM_vidHue.h"
 static FILTER_PARAM HueParam={2,{"hue","saturation"}};
 
@@ -177,4 +163,4 @@
 }
 
   
-#endif
+

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidKernelDeint.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidKernelDeint.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidKernelDeint.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -34,20 +34,8 @@
 	Foundation, Inc., 675 Mass Ave, Cambridge, MA 02139, USA.
 */
 
-#include <stdio.h>
-#include <stdlib.h>
-#include <string.h>
-#include <ADM_assert.h>
-#include <math.h>
-#include <math.h>
-#include <iconv.h>
-#include "config.h"
+#include "ADM_default.h"#include <iconv.h>
 
-
-#include "fourcc.h"
-
-#include "avi_vars.h"
-
 #include "ADM_toolkit/toolkit.hxx"
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_video/ADM_genvideo.hxx"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidLargeMedian.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidLargeMedian.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidLargeMedian.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -19,18 +19,8 @@
  *                                                                         *
  ***************************************************************************/
 
-#include <stdio.h>
-#include <stdlib.h>
-#include <string.h>
-#include <ADM_assert.h>
+#include "ADM_default.h"
 
-#include "config.h"
-#include "fourcc.h"
-#include "config.h"
-#include "avi_vars.h"
-#ifdef HAVE_ENCODER
-
-
 #include "ADM_toolkit/toolkit.hxx"
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_video/ADM_genvideo.hxx"
@@ -311,6 +301,6 @@
 
 
 
-#endif
 
 
+

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidLogo.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidLogo.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidLogo.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -24,7 +24,7 @@
 #include <string.h>
 #include "ADM_assert.h"
 
-#include "default.h"
+#include "ADM_default.h"
 
 
 

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidLuma.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidLuma.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidLuma.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -15,18 +15,7 @@
  *                                                                         *
  ***************************************************************************/
 
- #include <stdio.h>
-#include <stdlib.h>
-#include <string.h>
-#include <ADM_assert.h>
-
-#include "config.h"
-#include "fourcc.h"
-#include "config.h"
-#include "avi_vars.h"
-#ifdef HAVE_ENCODER
-
-
+#include "ADM_default.h"
 #include "ADM_toolkit/toolkit.hxx"
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_video/ADM_genvideo.hxx"
@@ -94,4 +83,4 @@
 
 
 
-#endif
+

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidMPLD3D.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidMPLD3D.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidMPLD3D.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -16,17 +16,8 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
-#include <stdio.h>
-#include <stdlib.h>
-#include <string.h>
-#include <ADM_assert.h>
-#include <math.h>
-
-#include "config.h"
-#include "fourcc.h"
-#include "config.h"
-#include "avi_vars.h"
-
+#include "ADM_default.h"
+#include "math.h"
 #include "ADM_toolkit/toolkit.hxx"
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_video/ADM_genvideo.hxx"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidMPLD3Dlow.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidMPLD3Dlow.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidMPLD3Dlow.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -16,17 +16,8 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
-#include <stdio.h>
-#include <stdlib.h>
-#include <string.h>
-#include <ADM_assert.h>
-#include <math.h>
-
-#include "config.h"
-#include "fourcc.h"
-#include "config.h"
-#include "avi_vars.h"
-
+#include "ADM_default.h"
+#include "math.h"
 #include "ADM_toolkit/toolkit.hxx"
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_video/ADM_genvideo.hxx"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidMPLResize.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidMPLResize.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidMPLResize.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -19,17 +19,7 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
-#include "config.h"
-
-#include <stdio.h>
-#include <stdlib.h>
-#include <string.h>
-#include <math.h>
-#include <ADM_assert.h>
-
-#include "fourcc.h"
-#include "avi_vars.h"
-
+#include "ADM_default.h"
 #include "ADM_toolkit/toolkit.hxx"
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_video/ADM_genvideo.hxx"
@@ -46,7 +36,7 @@
 
 #include "../ADM_lavutil/avutil.h"
 #include "../ADM_libswscale/swscale.h"
-#include "ADM_osSupport/ADM_cpuCap.h"
+
 #include "ADM_filter/video_filters.h"
 
 typedef struct alg

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidMSharpen.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidMSharpen.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidMSharpen.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -33,16 +33,7 @@
 	Foundation, Inc., 675 Mass Ave, Cambridge, MA 02139, USA.
 */
 
-#include "config.h"
-#include <stdio.h>
-#include <stdlib.h>
-#include <string.h>
-#include <ADM_assert.h>
-
-#include "config.h"
-#include "fourcc.h"
-#include "avi_vars.h"
-
+#include "ADM_default.h"
 #include "ADM_toolkit/toolkit.hxx"
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_video/ADM_genvideo.hxx"
@@ -52,13 +43,13 @@
 #define MODULE_NAME MODULE_FILTER
 #include "ADM_osSupport/ADM_debug.h"
 
-#include "ADM_osSupport/ADM_cpuCap.h"
+
 #include "ADM_filter/video_filters.h"
 
 #include "ADM_vidMSharpen_param.h"
 
 #include "ADM_userInterfaces/ADM_commonUI/DIA_factory.h"
-#include "admmangle.h"
+
 class Msharpen : public AVDMGenericVideoStream
 {
 private:

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidMcDeint.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidMcDeint.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidMcDeint.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -21,19 +21,10 @@
     Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA
 */
 
-#include <stdio.h>
-#include <stdlib.h>
-#include <string.h>
-#include <ADM_assert.h>
+#include "ADM_default.h"
 #include "ADM_lavcodec.h"
 
-#include "config.h"
-#include "fourcc.h"
-#include "config.h"
-#include "avi_vars.h"
 
-
-
 #include "ADM_toolkit/toolkit.hxx"
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_video/ADM_genvideo.hxx"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidMosaic.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidMosaic.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidMosaic.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -14,17 +14,7 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
-#include "config.h"
-
-#include <stdio.h>
-#include <stdlib.h>
-#include <string.h>
-#include <math.h>
-#include <ADM_assert.h>
-
-#include "fourcc.h"
-#include "avi_vars.h"
-
+#include "ADM_default.h"
 #include "ADM_toolkit/toolkit.hxx"
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_video/ADM_genvideo.hxx"
@@ -41,7 +31,7 @@
 
 #include "ADM_lavutil/avutil.h"
 #include "../ADM_libswscale/swscale.h"
-#include "ADM_osSupport/ADM_cpuCap.h"
+
 #include "ADM_filter/video_filters.h"
 
 #include "ADM_video/ADM_cache.h"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidMsmooth.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidMsmooth.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidMsmooth.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -28,16 +28,7 @@
 	Foundation, Inc., 675 Mass Ave, Cambridge, MA 02139, USA.
 */
 
-#include "config.h"
-#include <stdio.h>
-#include <stdlib.h>
-#include <string.h>
-#include <ADM_assert.h>
-
-#include "config.h"
-#include "fourcc.h"
-#include "avi_vars.h"
-
+#include "ADM_default.h"
 #include "ADM_toolkit/toolkit.hxx"
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_video/ADM_genvideo.hxx"
@@ -47,7 +38,7 @@
 #define MODULE_NAME MODULE_FILTER
 #include "ADM_osSupport/ADM_debug.h"
 
-#include "ADM_osSupport/ADM_cpuCap.h"
+
 #include "ADM_filter/video_filters.h"
 
 #include "ADM_userInterfaces/ADM_commonUI/DIA_factory.h"
@@ -69,8 +60,8 @@
 }
 
 #include "ADM_vidMSmooth_param.h"
-#include "admmangle.h"
 
+
 extern uint8_t 	PutHintingData(unsigned char *video, unsigned int hint);
 extern uint8_t 	GetHintingData(unsigned char *video, unsigned int *hint);
 extern void 	BitBlt(uint8_t * dstp, int dst_pitch, const uint8_t* srcp,

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidPalShift.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidPalShift.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidPalShift.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -14,18 +14,8 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
- #include <stdio.h>
-#include <stdlib.h>
-#include <string.h>
-#include <ADM_assert.h>
+#include "ADM_default.h"
 
-#include "config.h"
-#include "fourcc.h"
-#include "config.h"
-#include "avi_vars.h"
-#ifdef HAVE_ENCODER
-
-
 #include "ADM_toolkit/toolkit.hxx"
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_video/ADM_genvideo.hxx"
@@ -152,6 +142,3 @@
       return 1;
 }
 
-
-
-#endif

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidPalSmart.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidPalSmart.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidPalSmart.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -14,18 +14,7 @@
  ***************************************************************************/
 
 
-#include <stdio.h>
-#include <stdlib.h>
-#include <string.h>
-#include <ADM_assert.h>
-
-#include "config.h"
-#include "fourcc.h"
-#include "config.h"
-#include "avi_vars.h"
-#ifdef HAVE_ENCODER
-//#define EVEN_INTERLEAVE	
-
+#include "ADM_default.h"
 #include "ADM_toolkit/toolkit.hxx"
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_video/ADM_genvideo.hxx"
@@ -247,12 +236,3 @@
                  return m;
 }
 
-
-
-#endif
-
-
-
-
-
-

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidParticle.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidParticle.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidParticle.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -21,13 +21,13 @@
 #include <vector>
 using namespace std;
 
-#include "default.h"
+#include "ADM_default.h"
 #include <ctype.h>
 
 #include "ADM_assert.h"
 #undef memcpy   // avoid compile errors due to macro
 #include "fourcc.h"
-#include "avi_vars.h"
+//#include "avi_vars.h"
 
 #include "ADM_toolkit/toolkit.hxx"
 #include "ADM_editor/ADM_edit.hxx"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidPulldown.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidPulldown.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidPulldown.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -20,24 +20,14 @@
  *                                                                         *
  ***************************************************************************/
 
-#include <stdio.h>
-#include <stdlib.h>
-#include <string.h>
-#include <ADM_assert.h>
-
-#include "config.h"
-#include "fourcc.h"
-#include "config.h"
-#include "avi_vars.h"
-
-
+#include "ADM_default.h"
 #include "ADM_toolkit/toolkit.hxx"
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_video/ADM_genvideo.hxx"
 #include "ADM_video/ADM_vidFieldUtil.h"
 #include "ADM_vidPulldown.h"
 #include "ADM_video/ADM_interlaced.h"
-#include "ADM_osSupport/TLK_clock.h"
+
 #include "ADM_osSupport/ADM_debugID.h"
 #define MODULE_NAME MODULE_FILTER
 #include "ADM_osSupport/ADM_debug.h"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidResampleFPS.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidResampleFPS.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidResampleFPS.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -15,29 +15,17 @@
  *                                                                         *
  ***************************************************************************/
 
-#include <stdio.h>
-#include <math.h>
-
-#include <stdlib.h>
-#include <string.h>
-#include <ADM_assert.h>
-
-#include "config.h"
-#include "fourcc.h"
-#include "config.h"
-#include "avi_vars.h"
-#ifdef HAVE_ENCODER
-
-
+#include "ADM_default.h"
+#include "math.h"
 #include "ADM_toolkit/toolkit.hxx"
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_video/ADM_genvideo.hxx"
 #include "ADM_filter/video_filters.h"
 #include "ADM_userInterfaces/ADM_commonUI/DIA_enter.h"
 #include "ADM_video/ADM_cache.h"
-#include "ADM_osSupport/ADM_cpuCap.h"
-#include "admmangle.h"
 
+
+
 #include "ADM_userInterfaces/ADM_commonUI/DIA_factory.h"
 
 static FILTER_PARAM ResampParam={2,{"newfps","use_linear"}};
@@ -355,4 +343,4 @@
 
 
 
-#endif
+

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidReverse.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidReverse.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidReverse.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -7,16 +7,7 @@
  *                                                                         *
  ***************************************************************************/
 
-#include "config.h"
-#include <stdio.h>
-#include <stdlib.h>
-#include <string.h>
-#include <ADM_assert.h>
-
-#include "config.h"
-#include "fourcc.h"
-#include "avi_vars.h"
-
+#include "ADM_default.h"
 #include "ADM_toolkit/toolkit.hxx"
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_video/ADM_genvideo.hxx"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidRotate.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidRotate.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidRotate.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -19,9 +19,9 @@
 #include <stdlib.h>
 #include <string.h>
 
-#include "default.h"
-#include "ADM_osSupport/ADM_misc.h"
+#include "ADM_default.h"
 
+
 #include "ADM_toolkit/toolkit.hxx"
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_video/ADM_genvideo.hxx"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidSRT.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidSRT.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidSRT.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -15,7 +15,7 @@
  *                                                                         *
  ***************************************************************************/
 
-#include "default.h"
+#include "ADM_default.h"
 
 #include <math.h>
 #include <iconv.h>
@@ -23,8 +23,8 @@
 
 #ifdef USE_FREETYPE
 
-#include "ADM_osSupport/ADM_misc.h"
 
+
 #include "ADM_toolkit/toolkit.hxx"
 
 

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidSRTRender.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidSRTRender.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidSRTRender.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -15,7 +15,7 @@
  *                                                                         *
  ***************************************************************************/
 
-#include "default.h"
+#include "ADM_default.h"
 
 #include <math.h>
 #include <iconv.h>
@@ -23,9 +23,6 @@
 
 #ifdef USE_FREETYPE
 
-#include "ADM_osSupport/ADM_misc.h"
-
-
 #include "ADM_toolkit/toolkit.hxx"
 
 #include "ADM_editor/ADM_edit.hxx"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidSRTload.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidSRTload.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidSRTload.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -25,7 +25,7 @@
  *                                                                         *
  ***************************************************************************/
 
-#include "default.h"
+#include "ADM_default.h"
 
 #include <math.h>
 #include <iconv.h>
@@ -34,8 +34,8 @@
 
 #ifdef USE_FREETYPE
 //#define __STDC_ISO_10646__
-#include "ADM_osSupport/ADM_misc.h"
 
+
 #include "ADM_toolkit/toolkit.hxx"
 
 #include "ADM_toolkit/toolkit.hxx"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidSeparateField.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidSeparateField.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidSeparateField.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -20,17 +20,8 @@
  *                                                                         *
  ***************************************************************************/
 
-#include <stdio.h>
-#include <stdlib.h>
-#include <string.h>
-#include <ADM_assert.h>
+#include "ADM_default.h"
 
-#include "config.h"
-#include "fourcc.h"
-#include "config.h"
-#include "avi_vars.h"
-
-
 #include "ADM_toolkit/toolkit.hxx"
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_video/ADM_genvideo.hxx"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidSoften.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidSoften.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidSoften.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -16,20 +16,7 @@
 //	could use some stuff and some mmx too
 //
 
-#include <stdio.h>
-#include <stdlib.h>
-#include <string.h>
-#include <ADM_assert.h>
-#include <math.h>
-#include <math.h>
-#include <iconv.h>
-#include "config.h"
-
-
-#include "fourcc.h"
-
-#include "avi_vars.h"
-
+#include "ADM_default.h"
 #include "ADM_toolkit/toolkit.hxx"
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_video/ADM_genvideo.hxx"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidStabilize.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidStabilize.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidStabilize.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -14,19 +14,10 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
-#include <stdio.h>
-#include <stdlib.h>
-#include <string.h>
-#include <ADM_assert.h>
+#include "ADM_default.h"
 #include <math.h>
 
-#include "config.h"
-#include "fourcc.h"
-#include "config.h"
-#include "avi_vars.h"
-#ifdef HAVE_ENCODER
 
-
 #include "ADM_toolkit/toolkit.hxx"
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_video/ADM_genvideo.hxx"
@@ -208,4 +199,3 @@
 }
 
 
-#endif

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidSwapFields.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidSwapFields.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidSwapFields.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -18,24 +18,13 @@
  *                                                                         *
  ***************************************************************************/
 
-#include <stdio.h>
-#include <stdlib.h>
-#include <string.h>
-#include <ADM_assert.h>
+#include "ADM_default.h"
 
-#include "config.h"
-#include "fourcc.h"
-#include "config.h"
-#include "avi_vars.h"
-#ifdef HAVE_ENCODER
-
-
 #include "ADM_toolkit/toolkit.hxx"
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_video/ADM_genvideo.hxx"
 #include "ADM_video/ADM_vidFieldUtil.h"
 #include "ADM_vidSwapFields.h"
-//static void decimate(uint8_t *src,uint8_t *target, uint32_t linessrc, uint32_t width);
 #include "ADM_filter/video_filters.h"
 
 
@@ -197,4 +186,3 @@
       return 1;
 }
 
-#endif

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidSwapSmart.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidSwapSmart.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidSwapSmart.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -18,18 +18,8 @@
  *                                                                         *
  ***************************************************************************/
 
-#include <stdio.h>
-#include <stdlib.h>
-#include <string.h>
-#include <ADM_assert.h>
+#include "ADM_default.h"
 
-#include "config.h"
-#include "fourcc.h"
-#include "config.h"
-#include "avi_vars.h"
-#ifdef HAVE_ENCODER
-
-
 #include "ADM_toolkit/toolkit.hxx"
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_video/ADM_genvideo.hxx"
@@ -139,4 +129,3 @@
 }
 
 
-#endif

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -15,7 +15,7 @@
  *                                                                         *
  ***************************************************************************/
  
-#include "default.h"
+#include "ADM_default.h"
 
 #include <ctype.h>
 #include <errno.h>

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidTdeint.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidTdeint.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidTdeint.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -39,7 +39,7 @@
 
 #include "config.h"
 #include "fourcc.h"
-#include "default.h"
+#include "ADM_default.h"
 #include "math.h"
 
 #include "ADM_toolkit/toolkit.hxx"
@@ -52,8 +52,8 @@
 #include "ADM_video/ADM_cache.h"
 #include "ADM_filter/video_filters.h"
 #include "ADM_userInterfaces/ADM_commonUI/DIA_enter.h"
-#include "ADM_osSupport/ADM_cpuCap.h"
 
+
 #define min MIN
 #define max MAX
 

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidThreshold.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidThreshold.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidThreshold.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -14,12 +14,7 @@
  *                                                                         *
  ***************************************************************************/
  
-#include "default.h"
-
-#include "ADM_assert.h"
-#include "fourcc.h"
-#include "avi_vars.h"
-
+#include "ADM_default.h"
 #include "ADM_toolkit/toolkit.hxx"
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_video/ADM_genvideo.hxx"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidUVSwap.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidUVSwap.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidUVSwap.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -15,18 +15,7 @@
  *                                                                         *
  ***************************************************************************/
 
- #include <stdio.h>
-#include <stdlib.h>
-#include <string.h>
-#include <ADM_assert.h>
-
-#include "config.h"
-#include "fourcc.h"
-#include "config.h"
-#include "avi_vars.h"
-#ifdef HAVE_ENCODER
-
-
+#include "ADM_default.h"
 #include "ADM_toolkit/toolkit.hxx"
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_video/ADM_genvideo.hxx"
@@ -96,6 +85,3 @@
       return 1;
 }
 
-
-
-#endif

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidUnblend.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidUnblend.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidUnblend.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -4,16 +4,7 @@
 //      Probably GPL
 //
 //
-#include "config.h"
-#include <stdio.h>
-#include <stdlib.h>
-#include <string.h>
-#include <ADM_assert.h>
-
-#include "config.h"
-#include "fourcc.h"
-
-#include "avi_vars.h"
+#include "ADM_default.h"
 #include "math.h"
 
 #include "ADM_toolkit/toolkit.hxx"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidVlad.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidVlad.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidVlad.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -20,24 +20,15 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
-#include <stdio.h>
-#include <stdlib.h>
-#include <string.h>
-#include <ADM_assert.h>
+#include "ADM_default.h"
 
-#include "config.h"
-#include "fourcc.h"
-#include "config.h"
-#include "avi_vars.h"
-#include "admmangle.h"
-
 #include "ADM_toolkit/toolkit.hxx"
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_video/ADM_genvideo.hxx"
 #include "ADM_vidVlad.h"
 #include "ADM_filter/video_filters.h"
-#include "ADM_osSupport/ADM_cpuCap.h"
 
+
 #include "ADM_userInterfaces/ADM_commonUI/DIA_factory.h"
 
 #if  defined(ARCH_X86_64)

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidVobSubRender.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidVobSubRender.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidVobSubRender.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -80,8 +80,8 @@
 
 #include "../ADM_lavutil/avutil.h"
 #include "ADM_libswscale/swscale.h"
-#include "ADM_osSupport/ADM_cpuCap.h"
 
+
 #include "ADM_osSupport/ADM_debugID.h"
 #define MODULE_NAME MODULE_FILTER
 #include "ADM_osSupport/ADM_debug.h"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidWhirl.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidWhirl.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidWhirl.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -20,20 +20,11 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
-#include <stdio.h>
-#include <stdlib.h>
-#include <string.h>
-#include <math.h>
-#include <ADM_assert.h>
-
-#include "config.h"
-#include "fourcc.h"
-#include "config.h"
-#include "avi_vars.h"
-
+#include "ADM_default.h"
+#include "math.h"
 //#define LOOP
-#include "admmangle.h"
 
+
 #include "ADM_toolkit/toolkit.hxx"
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_video/ADM_genvideo.hxx"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidYadif.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidYadif.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidYadif.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -25,26 +25,14 @@
   Ported to avidemux by mean
   Same license as original (?GPL)
 */
-#include "config.h"
-
-#include <stdio.h>
-#include <stdlib.h>
-#include <string.h>
-#include <inttypes.h>
-#include <math.h>
-
-
-#include <ADM_assert.h>
-
-#include "admmangle.h"
-
+#include "ADM_default.h"
 #include "ADM_toolkit/toolkit.hxx"
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_video/ADM_genvideo.hxx"
-#include "ADM_vidVlad.h"
+#include "ADM_video/ADM_cache.h"
 #include "ADM_filter/video_filters.h"
-#include "ADM_osSupport/ADM_cpuCap.h"
 
+
 #include "ADM_userInterfaces/ADM_commonUI/DIA_factory.h"
 //************************************************
 #define MIN(a,b) ((a) > (b) ? (b) : (a))

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidYadif_asm.c
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidYadif_asm.c	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidYadif_asm.c	2008-02-24 17:29:52 UTC (rev 3800)
@@ -6,9 +6,9 @@
 #include <inttypes.h>
 #include <math.h>
 
-#include "default.h"
-#include "admmangle.h"
+#include "ADM_default.h"
 
+
 #if (defined( ARCH_X86)  || defined(ARCH_X86_64))
 
 

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vobsubinfo.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vobsubinfo.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vobsubinfo.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -22,7 +22,7 @@
 #include <stdlib.h>
 #include <string.h>
 #include <ADM_assert.h>
-#include "ADM_utilities/default.h"
+#include "ADM_default.h"
 #include "ADM_vobsubinfo.h"
 
 static uint8_t fillLine(char *str,VobSubInfo *sub,uint32_t line);

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADMmpdetc.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADMmpdetc.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADMmpdetc.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -16,19 +16,10 @@
 #define HAVE_DETC
 #ifdef HAVE_DETC
 
-#include <stdio.h>
-#include <stdlib.h>
-#include <string.h>
-#include <ADM_assert.h>
-
-#include "config.h"
-
+#include "ADM_default.h"
 #include "ADM_lavcodec.h"
-
+#include "math.h"
 #include "fourcc.h"
-#include "avio.hxx"
-#include "config.h"
-#include "avi_vars.h"
 
 
 

Modified: branches/avidemux_2.5_branch_mean/avidemux/GUI_jobs.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/GUI_jobs.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/GUI_jobs.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -18,7 +18,7 @@
 #include <string.h>
 #include <dirent.h>
 
-#include "default.h"
+#include "ADM_default.h"
 #include "ADM_assert.h"
 #include "ADM_toolkit/filesel.h"
 #include "ADM_toolkit/toolkit.hxx"

Modified: branches/avidemux_2.5_branch_mean/avidemux/avi_vars.h
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/avi_vars.h	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/avi_vars.h	2008-02-24 17:29:52 UTC (rev 3800)
@@ -1,6 +1,6 @@
 #ifndef __AVI_VARS
 #define __AVI_VARS
-#include "default.h"
+#include "ADM_default.h"
 #include <assert.h>
 #include "fourcc.h"
 #include "ADM_editor/ADM_edit.hxx"

Modified: branches/avidemux_2.5_branch_mean/avidemux/gtk_gui.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/gtk_gui.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/gtk_gui.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -67,7 +67,7 @@
 #include "ADM_libmpeg2enc/ADM_mpeg2enc.h"
 
 #include "ADM_userInterfaces/ADM_commonUI/DIA_factory.h"
-
+#include "ADM_video/ADM_vidMisc.h"
 void A_handleSecondTrack (int tracktype);
 int A_delete(uint32_t start, uint32_t end);
 void A_saveImg (char *name);

Modified: branches/avidemux_2.5_branch_mean/avidemux/gui_navigate.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/gui_navigate.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/gui_navigate.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -18,7 +18,7 @@
  *                                                                         *
  ***************************************************************************/
 
-//#include "default.h" // avi_vars.h includes this
+
 #include "avi_vars.h"
 
 #include <math.h>
@@ -41,6 +41,7 @@
 #include "ADM_filter/video_filters.h"
 #include "DIA_busy.h"
 #include "GUI_ui.h"
+#include "ADM_video/ADM_vidMisc.h"
 extern void    UI_purge(void );
 //____________________________________
 

Modified: branches/avidemux_2.5_branch_mean/avidemux/main.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/main.cpp	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/main.cpp	2008-02-24 17:29:52 UTC (rev 3800)
@@ -17,12 +17,6 @@
  *                                                                         *
  ***************************************************************************/
 
-#include "config.h"
-#include <stdio.h>
-#include <stdlib.h>
-
-#include "default.h"
-
 #ifdef ADM_WIN32
 #define WIN32_CLASH
 #include <windows.h>
@@ -30,6 +24,9 @@
 #include <excpt.h>
 #endif
 
+#include "ADM_default.h"
+
+
 #define __DECLARE__
 #include "avi_vars.h"
 
@@ -59,8 +56,6 @@
 #include "ADM_userInterfaces/ADM_commonUI/GUI_sdlRender.h"
 #endif
 
-#include "ADM_osSupport/ADM_cpuCap.h"
-#include "ADM_osSupport/ADM_threads.h"
 
 void onexit( void );
 //extern void automation(int argc, char **argv);

Modified: branches/avidemux_2.5_branch_mean/avidemux/prefs.h
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/prefs.h	2008-02-24 17:26:50 UTC (rev 3799)
+++ branches/avidemux_2.5_branch_mean/avidemux/prefs.h	2008-02-24 17:29:52 UTC (rev 3800)
@@ -1,7 +1,7 @@
 #ifndef _preferences_h_
 #define _preferences_h_
 
-#include "default.h"
+#include "ADM_default.h"
 
 #define RC_OK     1
 #define RC_FAILED 0



From gruntster at mail.berlios.de  Tue Feb 26 20:11:01 2008
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Tue, 26 Feb 2008 20:11:01 +0100
Subject: [Avidemux-svn-commit] r3802 - in
	branches/avidemux_2.5_branch_gruntster: . cmake
Message-ID: <200802261911.m1QJB1gO010042@sheep.berlios.de>

Author: gruntster
Date: 2008-02-26 20:10:54 +0100 (Tue, 26 Feb 2008)
New Revision: 3802

Modified:
   branches/avidemux_2.5_branch_gruntster/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/cmake/admDetermineSystem.cmake
   branches/avidemux_2.5_branch_gruntster/cmake/admSetLavcodecFlags.cmake
Log:
[CMake] merge BSD and SSSE3 patch

Modified: branches/avidemux_2.5_branch_gruntster/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/CMakeLists.txt	2008-02-25 23:37:42 UTC (rev 3801)
+++ branches/avidemux_2.5_branch_gruntster/CMakeLists.txt	2008-02-26 19:10:54 UTC (rev 3802)
@@ -46,7 +46,6 @@
 
 IF (ADM_OS_DARWIN)
 	SET(CYG_MANGLING 1)
-	SET(ADM_BSD_FAMILY 1)
 ENDIF (ADM_OS_DARWIN)
 
 IF (ADM_OS_LINUX)

Modified: branches/avidemux_2.5_branch_gruntster/cmake/admDetermineSystem.cmake
===================================================================
--- branches/avidemux_2.5_branch_gruntster/cmake/admDetermineSystem.cmake	2008-02-25 23:37:42 UTC (rev 3801)
+++ branches/avidemux_2.5_branch_gruntster/cmake/admDetermineSystem.cmake	2008-02-26 19:10:54 UTC (rev 3802)
@@ -9,26 +9,23 @@
 
 IF (WIN32)
 	SET(ADM_OS_WINDOWS 1)
-	
-	IF (${CMAKE_SYSTEM_PROCESSOR} STREQUAL "x86")
-		SET(ADM_CPU_X86 1)
-	ENDIF (${CMAKE_SYSTEM_PROCESSOR} STREQUAL "x86")
 ELSEIF (APPLE AND UNIX)
 	SET(ADM_OS_DARWIN 1)
-	
-	IF (${CMAKE_SYSTEM_PROCESSOR} STREQUAL "i386")
-		SET(ADM_CPU_X86 1)
-	ENDIF (${CMAKE_SYSTEM_PROCESSOR} STREQUAL "i386")
+	SET(ADM_BSD_FAMILY 1)
 ELSEIF (UNIX)
 	SET(ADM_OS_LINUX 1)
 	
-	IF (${CMAKE_SYSTEM_PROCESSOR} STREQUAL "i586" OR ${CMAKE_SYSTEM_PROCESSOR} STREQUAL "i686")
-		SET(ADM_CPU_X86 1)
-	ELSEIF(${CMAKE_SYSTEM_PROCESSOR} STREQUAL "x86_64" OR ${CMAKE_SYSTEM_PROCESSOR} STREQUAL "amd64")
-		SET(ADM_CPU_X86_64 1)
-	ENDIF (${CMAKE_SYSTEM_PROCESSOR} STREQUAL "i586" OR ${CMAKE_SYSTEM_PROCESSOR} STREQUAL "i686")
+	IF (CMAKE_SYSTEM_NAME STREQUAL "FreeBSD")
+		SET(ADM_BSD_FAMILY 1)
+	ENDIF (CMAKE_SYSTEM_NAME STREQUAL "FreeBSD")
 ENDIF (WIN32)
 
+IF (${CMAKE_SYSTEM_PROCESSOR} STREQUAL "x86" OR ${CMAKE_SYSTEM_PROCESSOR} STREQUAL "i386" OR ${CMAKE_SYSTEM_PROCESSOR} STREQUAL "i586" OR ${CMAKE_SYSTEM_PROCESSOR} STREQUAL "i686")
+	SET(ADM_CPU_X86 1)
+ELSEIF (${CMAKE_SYSTEM_PROCESSOR} STREQUAL "x86_64" OR ${CMAKE_SYSTEM_PROCESSOR} STREQUAL "amd64")
+	SET(ADM_CPU_X86_64 1)
+ENDIF (${CMAKE_SYSTEM_PROCESSOR} STREQUAL "x86" OR ${CMAKE_SYSTEM_PROCESSOR} STREQUAL "i386" OR ${CMAKE_SYSTEM_PROCESSOR} STREQUAL "i586" OR ${CMAKE_SYSTEM_PROCESSOR} STREQUAL "i686")
+
 IF (NOT ADM_OS_DARWIN AND NOT ADM_OS_WINDOWS AND NOT ADM_OS_LINUX)
 	MESSAGE(FATAL_ERROR "Operating System not supported (${CMAKE_SYSTEM_NAME})")
 ENDIF (NOT ADM_OS_DARWIN AND NOT ADM_OS_WINDOWS AND NOT ADM_OS_LINUX)

Modified: branches/avidemux_2.5_branch_gruntster/cmake/admSetLavcodecFlags.cmake
===================================================================
--- branches/avidemux_2.5_branch_gruntster/cmake/admSetLavcodecFlags.cmake	2008-02-25 23:37:42 UTC (rev 3801)
+++ branches/avidemux_2.5_branch_gruntster/cmake/admSetLavcodecFlags.cmake	2008-02-26 19:10:54 UTC (rev 3802)
@@ -31,10 +31,30 @@
 	SET(HAVE_FAST_64BIT 1)
 ENDIF (ADM_CPU_X86_64)
 
-IF (NOT NO_SSSE3)
-	SET(HAVE_SSSE3 1)
-ENDIF (NOT NO_SSSE3)
-
 IF (ADM_OS_DARWIN)
 	SET(CONFIG_DARWIN 1)
 ENDIF (ADM_OS_DARWIN)
+
+########################################
+# Check GCC support for SSSE3
+########################################
+MESSAGE(STATUS "Checking GCC support for SSSE3")
+MESSAGE(STATUS "******************************")
+
+IF (ADM_CPU_X86 OR ADM_CPU_X86_64)
+	ADM_COMPILE(ssse3_check.cpp "" "" "" SSSE3_SUPPORTED outputSsse3Test)
+
+	IF (SSSE3_SUPPORTED)
+		SET(HAVE_SSSE3 1)
+		
+		MESSAGE(STATUS "GCC supports SSSE3")
+	ELSE (SSSE3_SUPPORTED)
+		MESSAGE(STATUS "GCC doesn't support SSSE3")
+
+		IF (VERBOSE)
+			MESSAGE("Error Message: ${outputSsse3Test}")
+		ENDIF (VERBOSE)	
+	ENDIF (SSSE3_SUPPORTED)
+ENDIF (ADM_CPU_X86 OR ADM_CPU_X86_64)
+
+MESSAGE("")
\ No newline at end of file



From gruntster at mail.berlios.de  Tue Feb 26 22:02:13 2008
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Tue, 26 Feb 2008 22:02:13 +0100
Subject: [Avidemux-svn-commit] r3803 - in
	branches/avidemux_2.5_branch_gruntster: .
	avidemux/ADM_libraries/ADM_lavcodec
	avidemux/ADM_libraries/ADM_libmpeg2enc cmake
Message-ID: <200802262102.m1QL2DTf005145@sheep.berlios.de>

Author: gruntster
Date: 2008-02-26 22:02:00 +0100 (Tue, 26 Feb 2008)
New Revision: 3803

Modified:
   branches/avidemux_2.5_branch_gruntster/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_lavcodec/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libmpeg2enc/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/cmake/admDetermineSystem.cmake
Log:
[CMake] merge PowerPC changes

Modified: branches/avidemux_2.5_branch_gruntster/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/CMakeLists.txt	2008-02-26 19:10:54 UTC (rev 3802)
+++ branches/avidemux_2.5_branch_gruntster/CMakeLists.txt	2008-02-26 21:02:00 UTC (rev 3803)
@@ -73,6 +73,19 @@
 	SET(ARCH_X86 1)
 	SET(ARCH_X86_64 1)
 	SET(ARCH_64_BITS 1)
+ELSEIF (ADM_CPU_PPC)
+	SET(ADM_BIG_ENDIAN 1)
+	SET(WORDS_BIGENDIAN 1)
+
+	OPTION(ALTIVEC ""  ON)
+
+	IF (ALTIVEC)
+		SET(ADM_CPUCAP_ALTIVEC 1)
+		SET(ARCH_PPC 1)
+		SET(ARCH_POWERPC 1)
+		SET(USE_ALTIVEC 1)
+		SET(HAVE_ALTIVEC 1)
+	ENDIF (ALTIVEC)
 ENDIF (ADM_CPU_X86)
 
 # LibMad
@@ -80,6 +93,8 @@
 	SET(FPM_INTEL 1)
 ELSEIF (ADM_CPU_X86_64)
 	SET(FPM_DEFAULT 1)
+ELSEIF (ADM_CPU_PPC)
+	SET(FPM_PPC 1)
 ENDIF (ADM_CPU_X86)
 
 # Libavcodec
@@ -94,6 +109,19 @@
 	SET(ADM_DEBUG 1)
 ENDIF (NOT CMAKE_BUILD_TYPE)
 
+###########################################
+# CPU Specific
+###########################################
+IF (ADM_CPUCAP_ALTIVEC)
+	SET(CMAKE_C_FLAGS "${CMAKE_C_FLAGS} -mabi=altivec -maltivec")
+	SET(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} -mabi=altivec -maltivec")
+
+	IF (ADM_OS_APPLE)
+		SET(CMAKE_C_FLAGS "${CMAKE_C_FLAGS} -faltivec -force_cpusubtype_ALL")
+		SET(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} -faltivec -force_cpusubtype_ALL")
+	ENDIF (ADM_OS_APPLE)
+ENDIF (ADM_CPUCAP_ALTIVEC)
+
 ########################################
 # Subversion
 ########################################
@@ -157,6 +185,10 @@
 CHECK_INCLUDE_FILES(unistd.h     HAVE_UNISTD_H)		# internal use, ass, mad
 CHECK_INCLUDE_FILES(malloc.h     HAVE_MALLOC_H)		# libavcodec, libavutil, libpostproc, libswscale, mplex
 
+IF (ADM_CPUCAP_ALTIVEC)
+	CHECK_INCLUDE_FILES(altivec.h    HAVE_ALTIVEC_H)	# libavcodec, libpostproc, libswscale, mpeg2dec, mpeg2enc
+ENDIF (ADM_CPUCAP_ALTIVEC)
+
 MESSAGE("")
 
 ########################################

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_lavcodec/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_lavcodec/CMakeLists.txt	2008-02-26 19:10:54 UTC (rev 3802)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_lavcodec/CMakeLists.txt	2008-02-26 21:02:00 UTC (rev 3803)
@@ -40,13 +40,12 @@
 		i386/snowdsp_mmx.c i386/fft_3dn.c)
 ENDIF(ARCH_X86)
 
-IF (BUILD_ALTIVEC)
+IF (ADM_CPUCAP_ALTIVEC)
 	SET(${ADM_LIB}_SRCS  ${${ADM_LIB}_SRCS}
 		ppc/dsputil_altivec.c  ppc/dsputil_ppc.c  ppc/fdct_altivec.c  ppc/fft_altivec.c  ppc/float_altivec.c  ppc/gmc_altivec.c
 		ppc/h264_altivec.c  ppc/idct_altivec.c  ppc/int_altivec.c  ppc/mpegvideo_altivec.c  ppc/mpegvideo_ppc.c
-		ppc/snow_altivec.c  ppc/vc1dsp_altivec.c
-	)
-ENDIF (BUILD_ALTIVEC)
+		ppc/snow_altivec.c  ppc/vc1dsp_altivec.c)
+ENDIF (ADM_CPUCAP_ALTIVEC)
 
 ADD_ADM_LIB_ALL_TARGETS(${ADM_LIB} ${${ADM_LIB}_SRCS})
 ADD_CFLAGS_ALL_TARGETS(${ADM_LIB} "-I../ADM_lavutil -DHAVE_AV_CONFIG_H -Drestrict=__restrict__ -fomit-frame-pointer -include ffconf.h")

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libmpeg2enc/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libmpeg2enc/CMakeLists.txt	2008-02-26 19:10:54 UTC (rev 3802)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libmpeg2enc/CMakeLists.txt	2008-02-26 21:02:00 UTC (rev 3803)
@@ -11,16 +11,15 @@
 fdctref.cc            macroblock.cc         motion.cc                   predcomp_mmx.cc  putmpg.cc         ratectl.cc       ADM_mpe2enc.cpp
 )
 
-IF (BUILD_ALTIVEC)
+IF (ADM_CPUCAP_ALTIVEC)
 	SET(${ADM_LIB}_SRCS ${${ADM_LIB}_SRCS}
 		altivec/add_pred.c   altivec/amber.c  altivec/benchmark.c  altivec/bsad.c  altivec/bsumsq.c  altivec/bsumsq_sub22.c  altivec/build_sub22_mests.c
 		altivec/build_sub44_mests.c  altivec/detect.c  altivec/fdct.c  altivec/fdct_idct.c  altivec/field_dct_best.c  altivec/find_best_one_pel.c
 		altivec/idct.c  altivec/iquant_intra.c  altivec/iquant_non_intra.c  altivec/motion.c  altivec/pred_comp.c  altivec/quant_non_intra.c
 		altivec/quant_weight_coeff_sum.c  altivec/quantize.c  altivec/sad_00.c  altivec/sad_01.c  altivec/sad_10.c  altivec/sad_11.c
 		altivec/sub_mean_reduction.c  altivec/sub_mean_reduction_ppc.S  altivec/sub_pred.c  altivec/subsample_image.c  altivec/sumsq.c
-		altivec/sumsq_sub22.c  altivec/variance.c
-	)
-ENDIF (BUILD_ALTIVEC)
+		altivec/sumsq_sub22.c  altivec/variance.c)
+ENDIF (ADM_CPUCAP_ALTIVEC)
 
 ADD_ADM_LIB_ALL_TARGETS(${ADM_LIB} ${${ADM_LIB}_SRCS})
 ADD_CFLAGS_ALL_TARGETS(${ADM_LIB} "-I${CMAKE_CURRENT_SOURCE_DIR}")

Modified: branches/avidemux_2.5_branch_gruntster/cmake/admDetermineSystem.cmake
===================================================================
--- branches/avidemux_2.5_branch_gruntster/cmake/admDetermineSystem.cmake	2008-02-26 19:10:54 UTC (rev 3802)
+++ branches/avidemux_2.5_branch_gruntster/cmake/admDetermineSystem.cmake	2008-02-26 21:02:00 UTC (rev 3803)
@@ -7,6 +7,11 @@
 
 INCLUDE(CMakeDetermineSystem)
 
+# override detected processor for cross-compilation purposes
+IF (CROSS_SYSTEM_PROCESSOR)
+	SET(CMAKE_SYSTEM_PROCESSOR ${CROSS_SYSTEM_PROCESSOR})
+ENDIF (CROSS_SYSTEM_PROCESSOR)
+
 IF (WIN32)
 	SET(ADM_OS_WINDOWS 1)
 ELSEIF (APPLE AND UNIX)
@@ -24,6 +29,8 @@
 	SET(ADM_CPU_X86 1)
 ELSEIF (${CMAKE_SYSTEM_PROCESSOR} STREQUAL "x86_64" OR ${CMAKE_SYSTEM_PROCESSOR} STREQUAL "amd64")
 	SET(ADM_CPU_X86_64 1)
+ELSEIF (${CMAKE_SYSTEM_PROCESSOR} STREQUAL "ppc" OR ${CMAKE_SYSTEM_PROCESSOR} STREQUAL "powerpc" OR ${CMAKE_SYSTEM_PROCESSOR} STREQUAL "Power Macintosh")
+	SET(ADM_CPU_PPC 1)
 ENDIF (${CMAKE_SYSTEM_PROCESSOR} STREQUAL "x86" OR ${CMAKE_SYSTEM_PROCESSOR} STREQUAL "i386" OR ${CMAKE_SYSTEM_PROCESSOR} STREQUAL "i586" OR ${CMAKE_SYSTEM_PROCESSOR} STREQUAL "i686")
 
 IF (NOT ADM_OS_DARWIN AND NOT ADM_OS_WINDOWS AND NOT ADM_OS_LINUX)



From gruntster at mail.berlios.de  Tue Feb 26 22:54:54 2008
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Tue, 26 Feb 2008 22:54:54 +0100
Subject: [Avidemux-svn-commit] r3804 - in
	branches/avidemux_2.5_branch_gruntster: . cmake
Message-ID: <200802262154.m1QLssvt017128@sheep.berlios.de>

Author: gruntster
Date: 2008-02-26 22:54:51 +0100 (Tue, 26 Feb 2008)
New Revision: 3804

Modified:
   branches/avidemux_2.5_branch_gruntster/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/cmake/admDetermineSystem.cmake
Log:
[CMake] test for endianness

Modified: branches/avidemux_2.5_branch_gruntster/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/CMakeLists.txt	2008-02-26 21:02:00 UTC (rev 3803)
+++ branches/avidemux_2.5_branch_gruntster/CMakeLists.txt	2008-02-26 21:54:51 UTC (rev 3804)
@@ -74,9 +74,6 @@
 	SET(ARCH_X86_64 1)
 	SET(ARCH_64_BITS 1)
 ELSEIF (ADM_CPU_PPC)
-	SET(ADM_BIG_ENDIAN 1)
-	SET(WORDS_BIGENDIAN 1)
-
 	OPTION(ALTIVEC ""  ON)
 
 	IF (ALTIVEC)
@@ -88,6 +85,11 @@
 	ENDIF (ALTIVEC)
 ENDIF (ADM_CPU_X86)
 
+IF (CMAKE_WORDS_BIGENDIAN)
+	SET(ADM_BIG_ENDIAN 1)
+	SET(WORDS_BIGENDIAN 1)
+ENDIF (CMAKE_WORDS_BIGENDIAN)
+
 # LibMad
 IF (ADM_CPU_X86)
 	SET(FPM_INTEL 1)

Modified: branches/avidemux_2.5_branch_gruntster/cmake/admDetermineSystem.cmake
===================================================================
--- branches/avidemux_2.5_branch_gruntster/cmake/admDetermineSystem.cmake	2008-02-26 21:02:00 UTC (rev 3803)
+++ branches/avidemux_2.5_branch_gruntster/cmake/admDetermineSystem.cmake	2008-02-26 21:54:51 UTC (rev 3804)
@@ -6,6 +6,7 @@
 #  ADM_OS_WINDOWS   - Microsoft Windows was detected
 
 INCLUDE(CMakeDetermineSystem)
+INCLUDE(TestBigEndian)
 
 # override detected processor for cross-compilation purposes
 IF (CROSS_SYSTEM_PROCESSOR)
@@ -33,6 +34,9 @@
 	SET(ADM_CPU_PPC 1)
 ENDIF (${CMAKE_SYSTEM_PROCESSOR} STREQUAL "x86" OR ${CMAKE_SYSTEM_PROCESSOR} STREQUAL "i386" OR ${CMAKE_SYSTEM_PROCESSOR} STREQUAL "i586" OR ${CMAKE_SYSTEM_PROCESSOR} STREQUAL "i686")
 
+TEST_BIG_ENDIAN(CMAKE_WORDS_BIGENDIAN)
+MESSAGE("")
+
 IF (NOT ADM_OS_DARWIN AND NOT ADM_OS_WINDOWS AND NOT ADM_OS_LINUX)
 	MESSAGE(FATAL_ERROR "Operating System not supported (${CMAKE_SYSTEM_NAME})")
 ENDIF (NOT ADM_OS_DARWIN AND NOT ADM_OS_WINDOWS AND NOT ADM_OS_LINUX)



From mean at mail.berlios.de  Wed Feb 27 20:50:42 2008
From: mean at mail.berlios.de (mean at BerliOS)
Date: Wed, 27 Feb 2008 20:50:42 +0100
Subject: [Avidemux-svn-commit] r3805 - in
	branches/avidemux_2.5_branch_mean/avidemux: ADM_core
	ADM_core/src ADM_osSupport
Message-ID: <200802271950.m1RJogJb008747@sheep.berlios.de>

Author: mean
Date: 2008-02-27 20:50:36 +0100 (Wed, 27 Feb 2008)
New Revision: 3805

Added:
   branches/avidemux_2.5_branch_mean/avidemux/ADM_core/CMakeLists.txt
   branches/avidemux_2.5_branch_mean/avidemux/ADM_core/src/
   branches/avidemux_2.5_branch_mean/avidemux/ADM_core/src/ADM_cpuCap.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_core/src/ADM_crashdump.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_core/src/ADM_fileio.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_core/src/ADM_memcpy.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_core/src/ADM_memory.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_core/src/ADM_memsupport.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_core/src/ADM_misc.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_core/src/ADM_threads.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_core/src/ADM_win32.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_core/src/TLK_clock.cpp
Removed:
   branches/avidemux_2.5_branch_mean/avidemux/ADM_osSupport/ADM_cpuCap.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_osSupport/ADM_crashdump.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_osSupport/ADM_fileio.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_osSupport/ADM_memcpy.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_osSupport/ADM_memory.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_osSupport/ADM_memsupport.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_osSupport/ADM_misc.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_osSupport/ADM_threads.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_osSupport/TLK_clock.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_osSupport/win32.cpp
Log:
[Tree] Move source file to ADM_core/src


Added: branches/avidemux_2.5_branch_mean/avidemux/ADM_core/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_core/CMakeLists.txt	2008-02-26 21:54:51 UTC (rev 3804)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_core/CMakeLists.txt	2008-02-27 19:50:36 UTC (rev 3805)
@@ -0,0 +1,12 @@
+subdirs(PREORDER ADM_NONE)
+subdirs(PREORDER ADM_commonUI)
+
+if(GTK_FOUND)
+subdirs(PREORDER ADM_GTK)
+endif(GTK_FOUND)
+
+if(QT4_FOUND)
+subdirs(PREORDER ADM_QT4)
+endif(QT4_FOUND)
+
+include_directories(ADM_commonUI)

Copied: branches/avidemux_2.5_branch_mean/avidemux/ADM_core/src/ADM_cpuCap.cpp (from rev 3800, branches/avidemux_2.5_branch_mean/avidemux/ADM_osSupport/ADM_cpuCap.cpp)
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_osSupport/ADM_cpuCap.cpp	2008-02-24 17:29:52 UTC (rev 3800)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_core/src/ADM_cpuCap.cpp	2008-02-27 19:50:36 UTC (rev 3805)
@@ -0,0 +1,213 @@
+//
+// C++ Implementation: ADM_cpuCap
+//
+// Description: 
+//
+//
+// Author: mean <fixounet at free.fr>, (C) 2004
+//
+// Copyright: See COPYING file that comes with this distribution
+//
+//
+#include "config.h"
+#include <stdio.h>
+
+#if defined(ADM_WIN32)
+#include <pthread.h>
+#elif !defined(__APPLE__) && !defined(ADM_BSD_FAMILY)
+#include <string.h>
+#include <sched.h>
+#endif
+
+#include "ADM_default.h"
+
+
+#include "prefs.h"
+
+/* Cpu caps interface to other libs */
+extern "C"{ 
+	int ADM_lavcodec_mm_support(void);
+	int ADM_mpeg2dec_mm_support(void);
+	
+}
+
+
+#if defined(ARCH_X86) || defined(ARCH_X86_64)
+extern "C" 
+{
+#include "ADM_lavcodec/dsputil_cpu.h"
+}
+#endif
+
+#define cpuid(index,eax,ebx,ecx,edx)\
+    __asm __volatile\
+        ("mov %%"REG_b", %%"REG_S"\n\t"\
+         "cpuid\n\t"\
+         "xchg %%"REG_b", %%"REG_S\
+         : "=a" (eax), "=S" (ebx),\
+           "=c" (ecx), "=d" (edx)\
+         : "0" (index));
+
+
+/**
+ * 		\fn CpuCaps::init
+ * 		\brief Detect the SIM capabilities of CPU, borrowed from lavcodec
+ */
+  void 	CpuCaps::init( void)
+{
+	printf("[cpuCaps]Checking CPU capabilities\n");
+	myCpuCaps=0;
+	myCpuMask=0xffffffff;
+	prefs->get(FEATURE_CPU_CAPS,&myCpuMask);
+
+#if defined(ARCH_X86) || defined(ARCH_X86_64)
+int rval = 0;
+ int eax, ebx, ecx, edx;
+ int max_std_level, max_ext_level, std_caps=0, ext_caps=0;
+ long a, c;
+
+ __asm__ __volatile__ (
+                       /* See if CPUID instruction is supported ... */
+                       /* ... Get copies of EFLAGS into eax and ecx */
+                       "pushf\n\t"
+                       "pop %0\n\t"
+                       "mov %0, %1\n\t"
+
+                       /* ... Toggle the ID bit in one copy and store */
+                       /*     to the EFLAGS reg */
+                       "xor $0x200000, %0\n\t"
+                       "push %0\n\t"
+                       "popf\n\t"
+
+                       /* ... Get the (hopefully modified) EFLAGS */
+                       "pushf\n\t"
+                       "pop %0\n\t"
+                       : "=a" (a), "=c" (c)
+                       :
+                       : "cc"
+                       );
+
+ if (a == c)
+     return ; /* CPUID not supported */
+
+ cpuid(0, max_std_level, ebx, ecx, edx);
+
+ if(max_std_level >= 1)
+ {
+     cpuid(1, eax, ebx, ecx, std_caps);
+     if (std_caps & (1<<23))
+    	 myCpuCaps |= ADM_CPU_MMX;
+     if (std_caps & (1<<25))
+    	 myCpuCaps |= ADM_CPU_MMXEXT | ADM_CPU_SSE;
+     if (std_caps & (1<<26))
+    	 myCpuCaps |= ADM_CPU_SSE2;
+     if (ecx & 1)
+    	 myCpuCaps |= ADM_CPU_SSE3;
+     if (ecx & 0x00000200 )
+    	 myCpuCaps |= ADM_CPU_SSSE3;
+     
+     
+     
+ }
+
+ cpuid(0x80000000, max_ext_level, ebx, ecx, edx);
+
+ if(max_ext_level >= 0x80000001)
+ {
+     cpuid(0x80000001, eax, ebx, ecx, ext_caps);
+     if (ext_caps & (1<<31))
+    	 myCpuCaps |= ADM_CPU_3DNOW;
+     if (ext_caps & (1<<30))
+    	 myCpuCaps |= ADM_CPU_3DNOWEXT;
+     if (ext_caps & (1<<23))
+    	 myCpuCaps |= ADM_CPU_MMX;
+     if (ext_caps & (1<<22))
+    	 myCpuCaps |= ADM_CPU_MMXEXT;
+     
+ }
+#define CHECK(x) if(myCpuCaps & ADM_CPU_##x) { printf("\t\t"#x" detected ");\
+											if(!(myCpuMask&ADM_CPU_##x)) printf("  but disabled");printf("\n");}
+	CHECK(MMX);
+	CHECK(3DNOW);
+	CHECK(MMXEXT);
+	CHECK(SSE);
+	CHECK(SSE2);
+	CHECK(SSE3);
+	CHECK(SSSE3);
+
+#endif // X86
+	printf("[cpuCaps]End of CPU capabilities check (cpuMask :%x)\n",myCpuMask);
+	return ;
+}
+
+/************************************************************************/
+#if defined(ARCH_X86) || defined(ARCH_X86_64)
+#include "ADM_libraries/ADM_libMpeg2Dec/mpeg2_cpu.h"
+#endif
+
+int ADM_mpeg2dec_mm_support(void)
+{
+int rval=0;
+
+#if defined(ARCH_X86) || defined(ARCH_X86_64)
+#undef MATCH
+#define MATCH(x,y) if(CpuCaps::myCpuCaps & CpuCaps::myCpuMask & ADM_CPU_##x) rval|=MPEG2_ACCEL_X86_##x;
+	
+	MATCH(MMX,MMX);
+	MATCH(MMXEXT,MMXEXT);
+	MATCH(3DNOW,3DNOW);
+#endif
+
+	return rval;
+}
+//******************************************************
+#if defined(ARCH_X86) || defined(ARCH_X86_64)
+#include "ADM_lavcodec.h"
+#endif
+/**
+ * 		\fn lavcodec_mm_support
+ * 		\brief Give lavcodec CPU supported ( FF_MM_MMX)
+ */
+int ADM_lavcodec_mm_support(void)
+{
+int rval=0;
+
+#if defined(ARCH_X86) || defined(ARCH_X86_64)
+#undef MATCH
+#define MATCH(x,y) if(CpuCaps::myCpuCaps &  CpuCaps::myCpuMask & ADM_CPU_##x) rval|=MM_##x;
+
+	MATCH(MMX,MMX);
+	MATCH(MMXEXT,MMXEXT);
+	MATCH(SSE,SSE);
+	MATCH(SSE2,SSE2);
+	MATCH(SSE3,SSE3);
+	MATCH(SSSE3,SSSE3);
+	MATCH(3DNOW,3DNOW);
+	MATCH(3DNOWEXT,3DNOWEXT);
+#endif
+
+	return rval;
+}
+// EOF
+
+// Stolen from x264
+int ADM_cpu_num_processors(void)
+{
+#if defined(ADM_WIN32)
+    return pthread_num_processors_np();
+#elif !defined(__APPLE__) && !defined(ADM_BSD_FAMILY)
+    unsigned int bit;
+    int np;
+
+    cpu_set_t p_aff;
+    memset( &p_aff, 0, sizeof(p_aff) );
+    sched_getaffinity( 0, sizeof(p_aff), &p_aff );
+
+    for( np = 0, bit = 0; bit < sizeof(p_aff); bit++ )
+        np += (((uint8_t *)&p_aff)[bit / 8] >> (bit % 8)) & 1;
+
+    return np;
+#else
+    return 1;
+#endif
+}

Copied: branches/avidemux_2.5_branch_mean/avidemux/ADM_core/src/ADM_crashdump.cpp (from rev 3800, branches/avidemux_2.5_branch_mean/avidemux/ADM_osSupport/ADM_crashdump.cpp)
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_osSupport/ADM_crashdump.cpp	2008-02-24 17:29:52 UTC (rev 3800)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_core/src/ADM_crashdump.cpp	2008-02-27 19:50:36 UTC (rev 3805)
@@ -0,0 +1,449 @@
+/***************************************************************************
+  Try to display interesting crash dump
+
+    copyright            : (C) 2007 by mean, (C) 2007 Gruntster
+    email                : fixounet at free.fr
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+
+#include "config.h"
+
+#include <stdio.h>
+#include <stdlib.h>
+#include <stdarg.h>
+#include <string.h>
+#include "ADM_default.h"
+#include <unistd.h>
+
+#include <math.h>
+#include <ADM_assert.h>
+
+#if defined(ADM_WIN32)
+#define WIN32_CLASH
+#include <windows.h>
+#include <excpt.h>
+#include <imagehlp.h>
+#endif
+
+
+#include "ADM_toolkit/toolkit.hxx"
+#include "ADM_userInterfaces/ADM_commonUI/DIA_factory.h"
+#include "ADM_editor/ADM_edit.hxx"
+extern ADM_Composer *video_body;
+
+#define CRASH_FILE "crash.js"
+
+static void saveCrashProject(void);
+extern char *ADM_getBaseDir(void);
+extern void A_parseECMAScript(const char *name);
+
+#ifdef __APPLE__
+void installSigHandler() {}
+
+void ADM_backTrack(int lineno,const char *file)
+{
+	char bfr[1024];
+	saveCrashProject();
+	snprintf(bfr,1024,"Assert Failed at file %s, line %d\n",file,lineno);
+	GUI_Error_HIG("Fatal Error",bfr);
+	assert(0);
+}
+#elif defined(WIN32)
+typedef struct STACK_FRAME
+{
+    STACK_FRAME* ebp;	// address of the calling function frame
+    uint8_t* retAddr;	// return address
+    uint32_t param[0];	// parameter list (could be empty)
+} STACK_FRAME;
+
+static void dumpFrame(void* processId, void* frameAddr)
+{
+	MEMORY_BASIC_INFORMATION mbi;
+	char moduleName[MAX_PATH];
+	HMODULE moduleAddr;
+	DWORD symDisplacement;
+	IMAGEHLP_SYMBOL* pSymbol;
+
+	if (VirtualQuery(frameAddr, &mbi, sizeof(mbi)))
+	{
+		moduleName[0] = 0;
+		moduleAddr = (HMODULE)mbi.AllocationBase;
+		
+		GetModuleFileName(moduleAddr, moduleName, MAX_PATH);
+
+		printf("%s(", moduleName);
+
+		if (SymGetSymFromAddr(processId, (uint32_t)frameAddr, &symDisplacement, pSymbol))
+			printf("%s", pSymbol->Name);
+		else
+			printf("<unknown>");
+
+		printf("+0x%X) [0x%08X]\n", (uint32_t)frameAddr - (uint32_t)moduleAddr, frameAddr);
+
+		fflush(stdout);
+	}
+}
+	
+static void dumpExceptionInfo(void* processId, struct _EXCEPTION_RECORD* pExceptionRec, struct _CONTEXT* pContextRecord)
+{
+	printf("\n*********** EXCEPTION **************\n");
+	printf("Registers:\n");
+	printf("EAX: %08X  EBX: %08X  ECX: %08X  EDX: %08X  ESI: %08X\n", pContextRecord->Eax, pContextRecord->Ebx, pContextRecord->Ecx, pContextRecord->Edx, pContextRecord->Esi);
+	printf("EDI: %08X  ESP: %08X  EBP: %08X  EIP: %08X  EFlags: %08X\n\n", pContextRecord->Edi, pContextRecord->Esp, pContextRecord->Ebp, pContextRecord->Eip, pContextRecord->EFlags);
+
+	printf("Exception Code: ");
+
+	switch (pExceptionRec->ExceptionCode)
+	{
+		case EXCEPTION_ACCESS_VIOLATION:
+			printf("EXCEPTION_ACCESS_VIOLATION");
+			break;
+		case EXCEPTION_ARRAY_BOUNDS_EXCEEDED:
+			printf("EXCEPTION_ARRAY_BOUNDS_EXCEEDED");
+			break;
+		case EXCEPTION_BREAKPOINT:
+			printf("EXCEPTION_BREAKPOINT");
+			break;
+		case EXCEPTION_DATATYPE_MISALIGNMENT:
+			printf("EXCEPTION_DATATYPE_MISALIGNMENT");
+			break;
+		case EXCEPTION_FLT_DENORMAL_OPERAND:
+			printf("EXCEPTION_FLT_DENORMAL_OPERAND");
+			break;
+		case EXCEPTION_FLT_DIVIDE_BY_ZERO:
+			printf("EXCEPTION_FLT_DIVIDE_BY_ZERO");
+			break;
+		case EXCEPTION_FLT_INEXACT_RESULT:
+			printf("EXCEPTION_FLT_INEXACT_RESULT");
+			break;
+		case EXCEPTION_FLT_INVALID_OPERATION:
+			printf("EXCEPTION_FLT_INVALID_OPERATION");
+			break;
+		case EXCEPTION_FLT_OVERFLOW:
+			printf("EXCEPTION_FLT_OVERFLOW");
+			break;
+		case EXCEPTION_FLT_STACK_CHECK:
+			printf("EXCEPTION_FLT_STACK_CHECK");
+			break;
+		case EXCEPTION_FLT_UNDERFLOW:
+			printf("EXCEPTION_FLT_UNDERFLOW");
+			break;
+		case EXCEPTION_ILLEGAL_INSTRUCTION:
+			printf("EXCEPTION_ILLEGAL_INSTRUCTION");
+			break;
+		case EXCEPTION_IN_PAGE_ERROR:
+			printf("EXCEPTION_IN_PAGE_ERROR");
+			break;
+		case EXCEPTION_INT_DIVIDE_BY_ZERO:
+			printf("EXCEPTION_INT_DIVIDE_BY_ZERO");
+			break;
+		case EXCEPTION_INT_OVERFLOW:
+			printf("EXCEPTION_INT_OVERFLOW");
+			break;
+		case EXCEPTION_INVALID_DISPOSITION:
+			printf("EXCEPTION_INVALID_DISPOSITION");
+			break;
+		case EXCEPTION_NONCONTINUABLE_EXCEPTION:
+			printf("EXCEPTION_NONCONTINUABLE_EXCEPTION");
+			break;
+		case EXCEPTION_PRIV_INSTRUCTION:
+			printf("EXCEPTION_PRIV_INSTRUCTION");
+			break;
+		case EXCEPTION_SINGLE_STEP:
+			printf("EXCEPTION_SINGLE_STEP");
+			break;
+		case EXCEPTION_STACK_OVERFLOW:
+			printf("EXCEPTION_STACK_OVERFLOW");
+			break;
+		default:
+			printf("UNKNOWN");
+	}
+	
+	printf(" (%08X)\n", pExceptionRec->ExceptionCode);
+	printf("Exception Flags: %08X\n", pExceptionRec->ExceptionFlags);
+
+	printf("\nOrigin:\n");
+	dumpFrame(processId, (void*)pContextRecord->Eip);
+	printf("*********** EXCEPTION **************\n");
+	fflush(stdout);
+}
+
+extern "C"
+{
+void dumpBackTrace(void* processId)
+{
+	if (!processId)
+		processId = GetCurrentProcess();
+
+	const int maxAddrCount = 32;
+
+	printf("\n*********** BACKTRACE **************\n");
+
+	// Get frame address using builtin GCC function.
+	STACK_FRAME* stackFrame = (STACK_FRAME*)__builtin_frame_address(0);
+
+    for (int retAddrCount = 0; (retAddrCount < maxAddrCount) && !IsBadReadPtr(stackFrame, sizeof(STACK_FRAME)) && !IsBadCodePtr(FARPROC(stackFrame->retAddr)); retAddrCount++, stackFrame = stackFrame->ebp)
+    {
+		printf("Frame %2d: ", retAddrCount);
+		dumpFrame(processId, stackFrame->retAddr);
+		fflush(stdout);
+    }
+
+	printf("*********** BACKTRACE **************\n\n");
+}
+}
+
+void ADM_backTrack(int lineno, const char *file)
+{	
+	fflush(stderr);
+	fflush(stdout);
+	saveCrashProject();
+
+	GUI_Error_HIG(QT_TR_NOOP("Fatal Error"),QT_TR_NOOP("A fatal error has occurred.\n\nClick OK to generate debug information. This may take a few minutes to complete."));
+
+	void* currentProcessId = GetCurrentProcess();
+
+	SymInitialize(currentProcessId, NULL, TRUE);
+	dumpBackTrace(currentProcessId);
+	SymCleanup(currentProcessId);
+
+	printf("Assert failed at file %s, line %d\n\n",file,lineno);
+
+	exit(1);
+}
+
+EXCEPTION_DISPOSITION exceptionHandler(struct _EXCEPTION_RECORD* pExceptionRec, void* pEstablisherFrame, struct _CONTEXT* pContextRecord, void* pDispatcherContext)
+{
+	fflush(stderr);
+	fflush(stdout);
+	static int running=0;
+
+	if(running)
+		exit(1);
+
+	running=1;
+
+	saveCrashProject();
+
+	GUI_Error_HIG(QT_TR_NOOP("Fatal Error"),QT_TR_NOOP("A fatal error has occurred.\n\nClick OK to generate debug information. This may take a few minutes to complete."));
+
+	void* currentProcessId = GetCurrentProcess();
+
+	SymInitialize(currentProcessId, NULL, TRUE);
+
+	dumpExceptionInfo(currentProcessId, pExceptionRec, pContextRecord);
+	fflush(stdout);
+	dumpBackTrace(currentProcessId);
+
+	SymCleanup(currentProcessId);
+
+	exit(1);
+}
+#else
+#include <signal.h>
+#include <execinfo.h>
+void sig_segfault_handler(int signo);
+void installSigHandler()
+{
+    signal(11, sig_segfault_handler); // show stacktrace on default
+}
+extern void ADMImage_stat( void );
+
+static int lenCount(uint8_t *start,uint8_t *end,int *d)
+{
+  int val=0;
+  int digit=0;
+  *d=0;
+  while(*start>='0' && *start<='9' && start<end) 
+  {
+    val=val*10+*start-'0'; 
+    start++;
+    digit++;
+  }
+  *d=digit;
+  return val;
+}
+
+static int decodeOne(uint8_t *start, uint8_t *end,int *cons)
+{
+  *cons=0;
+  int len,digit;
+  uint8_t *org=start;
+  if(start+2>=end) return 0;
+  switch(*start )
+  {
+    case 'Z':
+    case 'P':  
+      
+        len=lenCount(start+1,end,&digit);
+        start+=1+digit;
+        for(int z=0;z<len;z++) printf("%c",*start++);
+        break;
+  }
+  return (int)((uint64_t)start-(uint64_t)org);
+}
+static int demangle(int i,  uint8_t *string)
+{
+ // Search 1st (
+  if(!string) return 0;
+  int len=strlen((char *)string);
+  if(!len) return 0;
+   
+  uint8_t *end=string+len;
+  uint8_t *start=string;
+  
+  while(*start!='(' && start+3<end) start++;
+  if(*start!='(') return 0;
+  start++;
+  
+  //  _qt(_Z9crashTestP9JSContextP8JSObjectjPlS3_+0) [0x4acf80]
+  
+  if(*start!='_' || start[1]!='Z')
+  {
+    return 0;
+  }
+  // Seems good !
+  start++;
+  start++;  
+  int digit;
+  // Function name..
+  int l=lenCount(start,end,&digit);
+  printf("\t<");
+  for(int i=0;i<l;i++)
+  {
+    printf("%c",start[digit+i]); 
+  }
+  printf(">(");
+  start+=digit+l;
+  
+  // Parama
+  int first=0;
+  while(start+2<end && *start=='P')
+  {
+    if(!first)  first=1;
+    else
+        printf(",");
+    
+      
+    start++;
+    l=lenCount(start,end,&digit);
+    for(int i=0;i<l;i++)
+    {
+      printf("%c",start[digit+i]); 
+    }
+    start+=digit+l;
+  }
+  printf(")\n");
+  return 1;
+}
+
+/**
+      \fn sig_segfault_handler
+      \brief our segfault handler
+
+*/
+void sig_segfault_handler(int signo)
+{
+     
+     static int running=0;
+      if(running) 
+      {
+        signo=0;
+        exit(1);
+      }
+      running=0; 
+      ADM_backTrack(0,"");
+}
+void ADM_backTrack(int lineno,const char *file)
+{
+     void *stack[20];
+     char **functions;
+     int count, i;
+      
+     saveCrashProject();
+      printf("\n*********** BACKTRACK **************\n");
+      count = backtrace(stack, 20);
+      functions = backtrace_symbols(stack, count);
+      
+         for (i=0; i < count; i++) 
+         {
+            printf("Frame %2d: %s \n", i, functions[i]);
+            demangle(i,(uint8_t *)functions[i]);
+            
+         }
+      printf("*********** BACKTRACK **************\n");
+     // Now use dialogFactory
+      char bfr[30];
+      snprintf(bfr,30,"Line:%u",lineno);
+      diaElemReadOnlyText *txt[count+1];
+      txt[0]=new diaElemReadOnlyText(bfr,file);
+      
+      for(i=0;i<count;i++)
+          txt[i+1]=new diaElemReadOnlyText(functions[i],"Function:");
+      const char *title="Crash BackTrace";
+      if(lineno) title="Assert failed";
+      diaFactoryRun(title,count+1,(diaElem **)txt);
+      
+      //
+     printf("Memory stat:\n");
+     ADMImage_stat();
+
+     exit(1); // _exit(1) ???
+}
+#endif
+/**
+    \fn saveCrashProject
+    \brief Try to save the current project, useful in case of crash
+*/
+void saveCrashProject(void)
+{
+  char *baseDir=ADM_getBaseDir();
+  char *name=CRASH_FILE;
+  static int crashCount=0;
+  if(crashCount) return ; // avoid endless looping
+  crashCount++;
+  char *where=new char[strlen(baseDir)+strlen(name)+2];
+  strcpy(where,baseDir);
+  strcat(where,"/");
+  strcat(where,name);
+  printf("Saving crash file to %s\n",where);
+  video_body->saveAsScript (where, NULL);
+  delete[] where;
+}
+/**
+    \fn checkCrashFile
+    \brief Check if there i a crash file
+*/
+
+void checkCrashFile(void)
+{
+  char *baseDir=ADM_getBaseDir();
+  char *name=CRASH_FILE;
+  static int crashCount=0;
+  char *where=new char[strlen(baseDir)+strlen(name)+2];
+  strcpy(where,baseDir);
+  strcat(where,"/");
+  strcat(where,name);
+  if(ADM_fileExist(where))
+  {
+    if(GUI_Confirmation_HIG(QT_TR_NOOP("Load it"),QT_TR_NOOP("Crash file"),
+       QT_TR_NOOP("I have detected a crash file. \nDo you want to load it  ?\n(It will be deleted in all cases, you should save it if you want to keep it)")))
+    {
+       A_parseECMAScript(where);
+    }
+    unlink(where);
+  }else
+  {
+    printf("No crash file (%s)\n",where); 
+  }
+  delete [] where;
+}
+//EOF

Copied: branches/avidemux_2.5_branch_mean/avidemux/ADM_core/src/ADM_fileio.cpp (from rev 3800, branches/avidemux_2.5_branch_mean/avidemux/ADM_osSupport/ADM_fileio.cpp)
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_osSupport/ADM_fileio.cpp	2008-02-24 17:29:52 UTC (rev 3800)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_core/src/ADM_fileio.cpp	2008-02-27 19:50:36 UTC (rev 3805)
@@ -0,0 +1,410 @@
+/***************************************************************************
+                    
+    copyright            : (C) 2006 by mean
+    email                : fixounet at free.fr
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+#include "config.h" 
+#include <stdio.h>
+#include <stdlib.h>
+#include <string.h>
+    
+#include <dirent.h>
+#include <errno.h>
+#include <sys/stat.h>
+
+#include <unistd.h>
+
+#ifdef WIN32
+#include <glib.h>
+#endif
+
+#include "ADM_default.h"
+
+
+
+#include "ADM_toolkit/filesel.h"
+#include "ADM_toolkit/toolkit.hxx"
+
+#include "ADM_assert.h"
+#undef fread
+#undef fwrite
+#undef fopen
+#undef fclose
+
+size_t ADM_fread (void *ptr, size_t size, size_t n, FILE *sstream)
+{
+  return fread(ptr,size,n,sstream); 
+  
+}
+
+size_t ADM_fwrite (void *ptr, size_t size, size_t n, FILE *sstream)
+{
+  return fwrite(ptr,size,n,sstream); 
+  
+}
+FILE  *ADM_fopen (const char *file, const char *mode)
+{
+  FILE *f;
+
+#ifndef ADM_WIN32
+  return fopen(file,mode); 
+#else
+  gchar *retval = g_locale_from_utf8 (file, -1, NULL, NULL, NULL);
+  f=fopen(retval,mode);
+  g_free (retval);
+  return f;  
+#endif
+}
+
+int    ADM_fclose (FILE *file)
+{
+  return fclose(file); 
+}
+//*****************************
+static char basedir[1024]={0};
+static char jobdir[1024]={0};
+static char customdir[1024]={0};
+int baseDirDone=0;
+int jobDirDone=0;
+int customDirDone=0;
+#ifdef ADM_WIN32
+const char *ADM_DIR_NAME="\\avidemux";
+#else
+const char *ADM_DIR_NAME="/.avidemux";
+#endif
+/*
+
+*/
+/*
+      Get the  directory where jobs are stored
+******************************************************/
+
+char *ADM_getCustomDir(void)
+{
+  if(customDirDone) return customdir;
+
+  char *rootDir;
+  rootDir=ADM_getBaseDir();
+  strncpy(customdir,rootDir,1023);
+#if defined(ADM_WIN32)
+  strcat(customdir,"\\custom"); 
+#else
+  strcat(customdir,"/custom");
+#endif
+  if(!ADM_mkdir(customdir))
+  {
+    GUI_Error_HIG(QT_TR_NOOP("Oops"),QT_TR_NOOP("can't create custom directory (%s)."),customdir);
+                return NULL;
+  }
+  customDirDone=1;
+  return customdir;
+}
+/*
+      Get the  directory where jobs are stored
+******************************************************/
+
+char *ADM_getJobDir(void)
+{
+  if(jobDirDone) return jobdir;
+
+  char *rootDir;
+  rootDir=ADM_getBaseDir();
+  strncpy(jobdir,rootDir,1023);
+#if defined(ADM_WIN32)
+  strcat(jobdir,"\\jobs"); 
+#else
+  strcat(jobdir,"/jobs");
+#endif
+  if(!ADM_mkdir(jobdir))
+  {
+    GUI_Error_HIG(QT_TR_NOOP("Oops"),QT_TR_NOOP("can't create job directory (%s)."),jobdir);
+                return NULL;
+  }
+  jobDirDone=1;
+  return jobdir;
+}
+/*
+      Get the root directory for .avidemux stuff
+******************************************************/
+char *ADM_getBaseDir(void)
+{
+char *dirname=NULL;
+DIR *dir=NULL;
+char *home;
+//
+        if(baseDirDone) return basedir;
+// Get the base directory
+#if defined(ADM_WIN32)
+        if( ! (home=getenv("USERPROFILE")) )
+        {
+          GUI_Error_HIG(QT_TR_NOOP("Oops"),QT_TR_NOOP("can't determine $USERPROFILE."));
+                    home="c:\\";
+        }
+
+#else
+        if( ! (home=getenv("HOME")) )
+        {
+          GUI_Error_HIG(QT_TR_NOOP("Oops"),QT_TR_NOOP("can't determine $HOME."));
+                return NULL;
+        }
+#endif
+
+ // Try to open the .avidemux directory
+        dirname=new char[strlen(home)+strlen(ADM_DIR_NAME)+2];
+        strcpy(dirname,home);
+        strcat(dirname,ADM_DIR_NAME);
+        if(!ADM_mkdir(dirname))
+        {
+          GUI_Error_HIG(QT_TR_NOOP("Oops"),QT_TR_NOOP("Cannot create the .avidemux directory"), NULL);
+                        delete [] dirname;
+                        return NULL;
+        }
+        delete [] dirname;
+
+        // Now built the filename
+        strncpy(basedir,home,1023);
+        strncat(basedir,ADM_DIR_NAME,1023-strlen(basedir));
+        baseDirDone=1;
+        printf("Using %s as base directory for prefs/jobs/...\n",basedir);
+        return basedir;
+}
+/*----------------------------------------
+      Create a directory
+      If it already exists, do nothing
+------------------------------------------*/
+uint8_t ADM_mkdir(const char *dirname)
+{
+DIR *dir=NULL;
+              // Check it already exists ?
+              dir=opendir(dirname);
+              if(dir)
+              { 
+                  printf("Directory %s exists.Good.\n",dirname);
+                  closedir(dir);
+                  return 1;
+              }
+#if defined(ADM_WIN32)
+                if(mkdir(dirname))
+                {
+                    printf("Oops: mkdir failed on %s\n",dirname);   
+                    return 0;
+                }
+                
+#else    
+                char *sys=new char[strlen(dirname)+strlen("mkdir ")+2];
+                strcpy(sys,"mkdir ");
+                strcat(sys,dirname);
+                printf("Creating dir :%s\n",sys);
+                system(sys);
+                delete [] sys;
+#endif		
+              if((dir=opendir(dirname))==NULL)
+                {
+                        return 0;
+                }
+              closedir(dir); 
+              return 1;
+}
+uint8_t buildDirectoryContent(uint32_t *outnb,const char *base, char *jobName[],int maxElems,const char *ext)
+{
+
+DIR *dir;
+struct dirent *direntry;
+int dirmax=0,len;
+int extlen=strlen(ext);
+    ADM_assert(extlen);
+    
+         dir=opendir(base);
+        if(!dir)
+        {
+                return 0;
+        }
+        while((direntry=readdir(dir)))
+        {
+                len=strlen(direntry->d_name);
+                if(len<(extlen+1)) continue;
+                int xbase=len-extlen;
+                if(memcmp(direntry->d_name+xbase,ext,extlen))
+                //if(direntry->d_name[len-1]!='s' || direntry->d_name[len-2]!='j' || direntry->d_name[len-3]!='.')
+                {
+                        printf("ignored:%s\n",direntry->d_name);
+                        continue;
+                }
+                jobName[dirmax]=(char *)ADM_alloc(strlen(base)+strlen(direntry->d_name)+2);
+                strcpy(jobName[dirmax],base);
+                strcat(jobName[dirmax],"/");
+                strcat(jobName[dirmax],direntry->d_name);
+                dirmax++;
+                if(dirmax>=maxElems)
+                {
+                        printf("[jobs]: Max # of jobs exceeded\n");
+                         break;
+                }
+        }
+        closedir(dir);
+        *outnb=dirmax;
+        return 1;
+}
+//------------------------------------------------------------------
+
+/*
+
+** note: it modifies it's first argument
+*/
+void simplify_path(char **buf){
+   unsigned int last1slash = 0;
+   unsigned int last2slash = 0;
+	while( !strncmp(*buf,"/../",4) )
+		memmove(*buf,*buf+3,strlen(*buf+3)+1);
+	for(unsigned int i=0;i<strlen(*buf)-2;i++)
+		while( !strncmp(*buf+i,"/./",3) )
+			memmove(*buf+i,*buf+i+2,strlen(*buf+i+2)+1);
+	for(unsigned int i=0;i<strlen(*buf)-3;i++){
+		if( *(*buf+i) == '/' ){
+			last2slash = last1slash;
+			last1slash = i;
+		}
+		if( !strncmp(*buf+i,"/../",4) ){
+			memmove(*buf+last2slash,*buf+i+3,strlen(*buf+i+3)+1);
+			return simplify_path(buf);
+		}
+	}
+}
+
+//
+//	Make it absolute
+//
+char *PathCanonize(const char *tmpname)
+{
+	char path[300];
+	char *out ;
+
+	if( ! getcwd(path,300) ){
+		fprintf(stderr,"\ngetcwd() failed with: %s (%u)\n",
+		               strerror(errno), errno );
+		path[0] = '\0';
+	}
+	if(!tmpname || tmpname[0]==0)
+	{
+		out=new char [strlen(path)+2];
+		strcpy(out,path);
+#ifndef ADM_WIN32		
+		strcat(out,"/");
+#else
+		strcat(out,"\\");
+#endif	
+		printf("\n Canonizing null string ??? (%s)\n",out);
+	}else if(tmpname[0]=='/'
+#if defined(ADM_WIN32)
+		|| tmpname[1]==':'
+#endif	
+	
+	)
+	{
+		out=new char[strlen(tmpname)+1];
+		strcpy(out,tmpname);
+		return out;
+	}else{
+		out=new char[strlen(path)+strlen(tmpname)+6];
+		strcpy(out,path);
+#ifndef ADM_WIN32		
+		strcat(out,"/");
+#else
+		strcat(out,"\\");
+#endif		
+		strcat(out,tmpname);
+	}
+	simplify_path(&out);
+	return out;
+}
+/*
+	Strip the path and only keep the name
+
+*/
+void		PathStripName(char *str)
+{
+		int len=strlen(str);
+		if(len<=1) return;
+		len--;
+#ifndef ADM_WIN32		
+		while( *(str+len)!='/' && len)
+#else
+	while( *(str+len)!='\\' && len)
+#endif		
+		{
+			 *(str+len)=0;
+			 len--;
+		}
+}
+
+/*
+	Get the filename without path
+
+*/
+const char *GetFileName(const char *str)
+{
+	char *filename;
+        char *filename2;
+#ifndef ADM_WIN32		
+	filename = strrchr(str, '/');
+        
+#else
+	filename = strrchr(str, '\\');
+        filename2 = strrchr(str, '/');
+        if(filename2 && filename)
+        {
+          if(filename2>filename) filename=filename2; 
+        }
+#endif
+	if (filename)
+		return filename+1;
+	else
+		return str;
+}
+
+/*
+	Split patch into absolute path+name and extention
+
+*/
+void PathSplit(char *str, char **root, char **ext)
+{
+	char *full;
+	uint32_t l;
+
+		full=PathCanonize(str);
+		// Search the last .
+		l=strlen(full);
+		l--;
+		ADM_assert(l>0);
+		while( *(full+l)!='.' && l) l--;
+		if(!l || l==(strlen(full)-1))
+		{
+			if(l==(strlen(full)-1))
+			{
+				*(full+l)=0;  // remove trailing .
+			}
+			*ext=new char[2];
+			*root=full;
+			strcpy(*ext,"");
+			return ;
+		}
+		// else we do get an extension
+		// starting at l+1
+		uint32_t suff;
+
+		suff=strlen(full)-l-1;
+		*ext=new char[suff+1];
+		strcpy(*ext,full+l+1);
+		*(full+l)=0;
+		*root=full;
+		return ;
+}

Copied: branches/avidemux_2.5_branch_mean/avidemux/ADM_core/src/ADM_memcpy.cpp (from rev 3800, branches/avidemux_2.5_branch_mean/avidemux/ADM_osSupport/ADM_memcpy.cpp)
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_osSupport/ADM_memcpy.cpp	2008-02-24 17:29:52 UTC (rev 3800)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_core/src/ADM_memcpy.cpp	2008-02-27 19:50:36 UTC (rev 3805)
@@ -0,0 +1,483 @@
+
+
+
+
+/* Adapted from Xine /Mplayer to avidemx2 */
+/*
+ * Copyright (C) 2001-2004 the xine project
+ *
+ * This file is part of xine, a free video player.
+ *
+ * xine is free software; you can redistribute it and/or modify
+ * it under the terms of the GNU General Public License as published by
+ * the Free Software Foundation; either version 2 of the License, or
+ * (at your option) any later version.
+ *
+ * xine is distributed in the hope that it will be useful,
+ * but WITHOUT ANY WARRANTY; without even the implied warranty of
+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+ * GNU General Public License for more details.
+ *
+ * You should have received a copy of the GNU General Public License
+ * along with this program; if not, write to the Free Software
+ * Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA
+ *
+ * These are the MMX/MMX2/SSE optimized versions of memcpy
+ *
+ * This code was adapted from Linux Kernel sources by Nick Kurshev to
+ * the mplayer program. (http://mplayer.sourceforge.net)
+ *
+ * Miguel Freitas split the #ifdefs into several specialized functions that
+ * are benchmarked at runtime by xine. Some original comments from Nick
+ * have been preserved documenting some MMX/SSE oddities.
+ * Also added kernel memcpy function that seems faster than libc one.
+ *
+ */
+
+
+#include "config.h"
+
+#include <stdio.h>
+#include <stdlib.h>
+#include <string.h>
+
+#include "ADM_default.h"
+
+extern "C"
+{
+        #include "ADM_lavcodec/dsputil_cpu.h"
+
+
+
+#include "ADM_assert.h"
+
+adm_fast_memcpy myAdmMemcpy=NULL;
+/* Original comments from mplayer (file: aclib.c)
+ This part of code was taken by me from Linux-2.4.3 and slightly modified
+for MMX, MMX2, SSE instruction set. I have done it since linux uses page aligned
+blocks but mplayer uses weakly ordered data and original sources can not
+speedup them. Only using PREFETCHNTA and MOVNTQ together have effect!
+
+>From IA-32 Intel Architecture Software Developer's Manual Volume 1,
+
+Order Number 245470:
+"10.4.6. Cacheability Control, Prefetch, and Memory Ordering Instructions"
+
+Data referenced by a program can be temporal (data will be used again) or
+non-temporal (data will be referenced once and not reused in the immediate
+future). To make efficient use of the processor's caches, it is generally
+desirable to cache temporal data and not cache non-temporal data. Overloading
+the processor's caches with non-temporal data is sometimes referred to as
+"polluting the caches".
+The non-temporal data is written to memory with Write-Combining semantics.
+
+The PREFETCHh instructions permits a program to load data into the processor
+at a suggested cache level, so that it is closer to the processors load and
+store unit when it is needed. If the data is already present in a level of
+the cache hierarchy that is closer to the processor, the PREFETCHh instruction
+will not result in any data movement.
+But we should you PREFETCHNTA: Non-temporal data fetch data into location
+close to the processor, minimizing cache pollution.
+
+The MOVNTQ (store quadword using non-temporal hint) instruction stores
+packed integer data from an MMX register to memory, using a non-temporal hint.
+The MOVNTPS (store packed single-precision floating-point values using
+non-temporal hint) instruction stores packed floating-point data from an
+XMM register to memory, using a non-temporal hint.
+
+The SFENCE (Store Fence) instruction controls write ordering by creating a
+fence for memory store operations. This instruction guarantees that the results
+of every store instruction that precedes the store fence in program order is
+globally visible before any store instruction that follows the fence. The
+SFENCE instruction provides an efficient way of ensuring ordering between
+procedures that produce weakly-ordered data and procedures that consume that
+data.
+
+If you have questions please contact with me: Nick Kurshev: nickols_k at mail.ru.
+*/
+
+/*  mmx v.1 Note: Since we added alignment of destinition it speedups
+    of memory copying on PentMMX, Celeron-1 and P2 upto 12% versus
+    standard (non MMX-optimized) version.
+    Note: on K6-2+ it speedups memory copying upto 25% and
+          on K7 and P3 about 500% (5 times).
+*/
+
+/* Additional notes on gcc assembly and processors: [MF]
+prefetch is specific for AMD processors, the intel ones should be
+prefetch0, prefetch1, prefetch2 which are not recognized by my gcc.
+prefetchnta is supported both on athlon and pentium 3.
+
+therefore i will take off prefetchnta instructions from the mmx1 version
+to avoid problems on pentium mmx and k6-2.
+
+quote of the day:
+"Using prefetches efficiently is more of an art than a science"
+*/
+
+
+#if defined(ARCH_X86) || defined(ARCH_X86_64)
+
+
+/* for small memory blocks (<256 bytes) this version is faster */
+#define small_memcpy(to,from,n)\
+{\
+register unsigned long int dummy;\
+__asm__ __volatile__(\
+  "rep; movsb"\
+  :"=&D"(to), "=&S"(from), "=&c"(dummy)\
+  :"0" (to), "1" (from),"2" (n)\
+  : "memory");\
+}
+
+/* linux kernel __memcpy (from: /include/asm/string.h) */
+static __inline__ void * linux_kernel_memcpy_impl (
+			       void * to,
+			       const void * from,
+			       size_t n)
+{
+int d0, d1, d2;
+
+  if( n < 4 ) {
+    small_memcpy(to,from,n);
+  }
+  else
+    __asm__ __volatile__(
+    "rep ; movsl\n\t"
+    "testb $2,%b4\n\t"
+    "je 1f\n\t"
+    "movsw\n"
+    "1:\ttestb $1,%b4\n\t"
+    "je 2f\n\t"
+    "movsb\n"
+    "2:"
+    : "=&c" (d0), "=&D" (d1), "=&S" (d2)
+    :"0" (n/4), "q" (n),"1" ((long) to),"2" ((long) from)
+    : "memory");
+
+  return (to);
+}
+
+#define SSE_MMREG_SIZE 16
+#define MMX_MMREG_SIZE 8
+
+#define MMX1_MIN_LEN 0x800  /* 2K blocks */
+#define MIN_LEN 0x40  /* 64-byte blocks */
+
+/* SSE note: i tried to move 128 bytes a time instead of 64 but it
+didn't make any measureable difference. i'm using 64 for the sake of
+simplicity. [MF] */
+static void * sse_memcpy(void * to, const void * from, size_t len)
+{
+  void *retval;
+  uint8_t *ufrom=(uint8_t *)from;
+  uint8_t *uto=(uint8_t *)to;
+  size_t i;
+  retval = to;
+
+  /* PREFETCH has effect even for MOVSB instruction ;) */
+  __asm__ __volatile__ (
+    "   prefetchnta (%0)\n"
+    "   prefetchnta 32(%0)\n"
+    "   prefetchnta 64(%0)\n"
+    "   prefetchnta 96(%0)\n"
+    "   prefetchnta 128(%0)\n"
+    "   prefetchnta 160(%0)\n"
+    "   prefetchnta 192(%0)\n"
+    "   prefetchnta 224(%0)\n"
+    "   prefetchnta 256(%0)\n"
+    "   prefetchnta 288(%0)\n"
+    : : "r" (ufrom) );
+
+  if(len >= MIN_LEN)
+  {
+    register unsigned long int delta;
+    /* Align destinition to MMREG_SIZE -boundary */
+    delta = ((unsigned long int)uto)&(SSE_MMREG_SIZE-1);
+    if(delta)
+    {
+      delta=SSE_MMREG_SIZE-delta;
+      len -= delta;
+      small_memcpy(uto, ufrom, delta);
+    }
+    i = len >> 6; /* len/64 */
+    len&=63;
+    if(((unsigned long)ufrom) & 15)
+      /* if SRC is misaligned */
+      for(; i>0; i--)
+      {
+        __asm__ __volatile__ (
+        "prefetchnta 320(%0)\n"
+       "prefetchnta 352(%0)\n"
+        "movups (%0), %%xmm0\n"
+        "movups 16(%0), %%xmm1\n"
+        "movups 32(%0), %%xmm2\n"
+        "movups 48(%0), %%xmm3\n"
+        "movntps %%xmm0, (%1)\n"
+        "movntps %%xmm1, 16(%1)\n"
+        "movntps %%xmm2, 32(%1)\n"
+        "movntps %%xmm3, 48(%1)\n"
+        :: "r" (ufrom), "r" (uto) : "memory");
+         ufrom+=64;
+         uto+=64;
+      }
+    else
+      /*
+         Only if SRC is aligned on 16-byte boundary.
+         It allows to use movaps instead of movups, which required data
+         to be aligned or a general-protection exception (#GP) is generated.
+      */
+      for(; i>0; i--)
+      {
+        __asm__ __volatile__ (
+        "prefetchnta 320(%0)\n"
+       "prefetchnta 352(%0)\n"
+        "movaps (%0), %%xmm0\n"
+        "movaps 16(%0), %%xmm1\n"
+        "movaps 32(%0), %%xmm2\n"
+        "movaps 48(%0), %%xmm3\n"
+        "movntps %%xmm0, (%1)\n"
+        "movntps %%xmm1, 16(%1)\n"
+        "movntps %%xmm2, 32(%1)\n"
+        "movntps %%xmm3, 48(%1)\n"
+        :: "r" (ufrom), "r" (uto) : "memory");
+        ufrom+=64;
+        uto+=64;
+      }
+    /* since movntq is weakly-ordered, a "sfence"
+     * is needed to become ordered again. */
+    __asm__ __volatile__ ("sfence":::"memory");
+    /* enables to use FPU */
+    __asm__ __volatile__ ("emms":::"memory");
+  }
+  /*
+   *	Now do the tail of the block
+   */
+  if(len) linux_kernel_memcpy_impl(uto, ufrom, len);
+  return retval;
+}
+
+static void * mmx_memcpy(void * to, const void * from, size_t len)
+{
+  void *retval;
+  uint8_t *ufrom=(uint8_t *)from;
+  uint8_t *uto=(uint8_t *)to;
+  size_t i;
+  retval = uto;
+
+  if(len >= MMX1_MIN_LEN)
+  {
+    register unsigned long int delta;
+    /* Align destinition to MMREG_SIZE -boundary */
+    delta = ((unsigned long int)uto)&(MMX_MMREG_SIZE-1);
+    if(delta)
+    {
+      delta=MMX_MMREG_SIZE-delta;
+      len -= delta;
+      small_memcpy(uto, ufrom, delta);
+    }
+    i = len >> 6; /* len/64 */
+    len&=63;
+    for(; i>0; i--)
+    {
+      __asm__ __volatile__ (
+      "movq (%0), %%mm0\n"
+      "movq 8(%0), %%mm1\n"
+      "movq 16(%0), %%mm2\n"
+      "movq 24(%0), %%mm3\n"
+      "movq 32(%0), %%mm4\n"
+      "movq 40(%0), %%mm5\n"
+      "movq 48(%0), %%mm6\n"
+      "movq 56(%0), %%mm7\n"
+      "movq %%mm0, (%1)\n"
+      "movq %%mm1, 8(%1)\n"
+      "movq %%mm2, 16(%1)\n"
+      "movq %%mm3, 24(%1)\n"
+      "movq %%mm4, 32(%1)\n"
+      "movq %%mm5, 40(%1)\n"
+      "movq %%mm6, 48(%1)\n"
+      "movq %%mm7, 56(%1)\n"
+      :: "r" (ufrom), "r" (uto) : "memory");
+      ufrom+=64;
+      uto+=64;
+    }
+    __asm__ __volatile__ ("emms":::"memory");
+  }
+  /*
+   *	Now do the tail of the block
+   */
+  if(len) linux_kernel_memcpy_impl(uto, ufrom, len);
+  return retval;
+}
+
+static void * mmx2_memcpy(void * to, const void * from, size_t len)
+{
+  void *retval;
+  uint8_t *ufrom=(uint8_t *)from;
+  uint8_t *uto=(uint8_t *)to;
+  size_t i;
+  retval = to;
+
+  /* PREFETCH has effect even for MOVSB instruction ;) */
+  __asm__ __volatile__ (
+    "   prefetchnta (%0)\n"
+    "   prefetchnta 32(%0)\n"
+    "   prefetchnta 64(%0)\n"
+    "   prefetchnta 96(%0)\n"
+    "   prefetchnta 128(%0)\n"
+    "   prefetchnta 160(%0)\n"
+    "   prefetchnta 192(%0)\n"
+    "   prefetchnta 224(%0)\n"
+    "   prefetchnta 256(%0)\n"
+    "   prefetchnta 288(%0)\n"
+    : : "r" (ufrom) );
+
+  if(len >= MIN_LEN)
+  {
+    register unsigned long int delta;
+    /* Align destinition to MMREG_SIZE -boundary */
+    delta = ((unsigned long int)uto)&(MMX_MMREG_SIZE-1);
+    if(delta)
+    {
+      delta=MMX_MMREG_SIZE-delta;
+      len -= delta;
+      small_memcpy(uto, ufrom, delta);
+    }
+    i = len >> 6; /* len/64 */
+    len&=63;
+    for(; i>0; i--)
+    {
+      __asm__ __volatile__ (
+      "prefetchnta 320(%0)\n"
+      "prefetchnta 352(%0)\n"
+      "movq (%0), %%mm0\n"
+      "movq 8(%0), %%mm1\n"
+      "movq 16(%0), %%mm2\n"
+      "movq 24(%0), %%mm3\n"
+      "movq 32(%0), %%mm4\n"
+      "movq 40(%0), %%mm5\n"
+      "movq 48(%0), %%mm6\n"
+      "movq 56(%0), %%mm7\n"
+      "movntq %%mm0, (%1)\n"
+      "movntq %%mm1, 8(%1)\n"
+      "movntq %%mm2, 16(%1)\n"
+      "movntq %%mm3, 24(%1)\n"
+      "movntq %%mm4, 32(%1)\n"
+      "movntq %%mm5, 40(%1)\n"
+      "movntq %%mm6, 48(%1)\n"
+      "movntq %%mm7, 56(%1)\n"
+      :: "r" (ufrom), "r" (uto) : "memory");
+      ufrom+=64;
+      uto+=64;
+    }
+     /* since movntq is weakly-ordered, a "sfence"
+     * is needed to become ordered again. */
+    __asm__ __volatile__ ("sfence":::"memory");
+    __asm__ __volatile__ ("emms":::"memory");
+  }
+  /*
+   *	Now do the tail of the block
+   */
+  if(len) linux_kernel_memcpy_impl(uto, ufrom, len);
+  return retval;
+}
+
+static void *linux_kernel_memcpy(void *to, const void *from, size_t len) {
+  return linux_kernel_memcpy_impl(to,from,len);
+}
+#endif /* ARCH_X86 */
+
+static struct {
+  char *name;
+  void *(* function)(void *to, const void *from, size_t len);
+
+  uint64_t time; /* This type could be used for non-MSC build too! */
+
+  uint32_t cpu_require;
+} memcpy_method[] =
+{
+  { NULL, NULL, 0, 0 },
+  { "libc memcpy()", memcpy, 0, 0 },
+#if defined( ARCH_X86)  || defined(ARCH_X86_64)
+  { "linux kernel memcpy()", linux_kernel_memcpy, 0, 0 },
+#if defined( ARCH_X86)  || defined(ARCH_X86_64)
+  { "MMX optimized memcpy()", mmx_memcpy, 0, MM_MMX },
+  { "MMXEXT optimized memcpy()", mmx2_memcpy, 0, MM_MMXEXT },
+  { "SSE optimized memcpy()", sse_memcpy, 0, MM_MMXEXT|MM_SSE },
+#endif
+#endif /* ARCH_X86 */
+#if 0 && defined (ARCH_PPC) && !defined (HOST_OS_DARWIN)
+  { "ppcasm_memcpy()", ppcasm_memcpy, 0, 0 },
+  { "ppcasm_cacheable_memcpy()", ppcasm_cacheable_memcpy, 0, MM_ACCEL_PPC_CACHE32 },
+#endif /* ARCH_PPC && !HOST_OS_DARWIN */
+  { NULL, NULL, 0, 0 }
+};
+
+#if defined( ARCH_X86)  || defined(ARCH_X86_64)
+static unsigned long long int rdtsc(void)
+{
+  unsigned long long int x;
+
+  /* that should prevent us from trying cpuid with old cpus */
+ 
+    __asm__ volatile (".byte 0x0f, 0x31" : "=A" (x));
+    return x;
+ }
+#else
+static unsigned long long int rdtsc(void)
+{
+	return 0;
+ }
+
+#endif
+
+
+
+#define BUFSIZE 1024*1024
+/*******************************************
+*/
+uint8_t probe(adm_fast_memcpy func,char *name)
+{
+	void *src,*dst;
+	uint64_t start,stop;
+
+	src=ADM_alloc(BUFSIZE);
+	dst=ADM_alloc(BUFSIZE);
+	start=rdtsc();
+	func(dst,src,BUFSIZE);
+	stop=rdtsc();
+	ADM_dealloc(src);
+	ADM_dealloc(dst);
+	printf("Method :%s \tTime:%lu\n",name,stop-start);
+	return 1;
+
+}
+/*
+
+	It seems MMX gives the best result most of the times
+	Don't bother benchmarking
+*/
+uint8_t ADM_InitMemcpy(void)
+{
+  uint64_t          t;
+  char             *buf1, *buf2;
+  int               i, j, best;
+  int               config_flags = 0;
+#undef memcpy
+        myAdmMemcpy=memcpy;
+#if defined( ARCH_X86)  || defined(ARCH_X86_64)
+        if(CpuCaps::hasMMX())
+                myAdmMemcpy=mmx_memcpy;
+#endif
+#if 0
+	probe(memcpy,"libc");
+	probe(linux_kernel_memcpy,"kernel");
+#if defined( ARCH_X86)  || defined(ARCH_X86_64)
+	if(CpuCaps::hasMMX()) probe(mmx_memcpy,"mmx");
+	if(CpuCaps::hasMMXEXT()) probe(mmx_memcpy,"mmxext");
+	if(CpuCaps::hasSSE()) probe(sse_memcpy,"sse");
+#endif
+#endif
+	return 1; 
+}
+}

Copied: branches/avidemux_2.5_branch_mean/avidemux/ADM_core/src/ADM_memory.cpp (from rev 3800, branches/avidemux_2.5_branch_mean/avidemux/ADM_osSupport/ADM_memory.cpp)
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_osSupport/ADM_memory.cpp	2008-02-24 17:29:52 UTC (rev 3800)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_core/src/ADM_memory.cpp	2008-02-27 19:50:36 UTC (rev 3805)
@@ -0,0 +1 @@
+//

Copied: branches/avidemux_2.5_branch_mean/avidemux/ADM_core/src/ADM_memsupport.cpp (from rev 3800, branches/avidemux_2.5_branch_mean/avidemux/ADM_osSupport/ADM_memsupport.cpp)
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_osSupport/ADM_memsupport.cpp	2008-02-24 17:29:52 UTC (rev 3800)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_core/src/ADM_memsupport.cpp	2008-02-27 19:50:36 UTC (rev 3805)
@@ -0,0 +1,423 @@
+//
+// C++ Interface: ADM_memsupport
+//
+// Description: 
+//	Wrapper for all memory alloc/dealloc
+//
+//	Ensures 16 byte alignment for all memory allocations on Linux and Windows (to
+//  support PPC and SSE).
+//
+//  Mac OS X is exempt as it automatically ensures 16 byte alignment and overriding
+//  the new/delete operators with custom memory management clashes with Qt4.
+//
+// Author: mean <fixounet at free.fr>, (C) 2004
+//
+// Copyright: See COPYING file that comes with this distribution
+//
+//
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+#include "ADM_default.h"
+
+
+
+#undef memalign
+#undef malloc
+#undef free
+#undef realloc
+
+static uint32_t ADM_consumed = 0;
+static admMutex memAccess("MemAccess");
+static int doMemStat = 0;
+
+#if defined(ADM_DEBUG) && defined(FIND_LEAKS)
+#define _DEBUG_NEW_CALLER_ADDRESS __builtin_return_address(0)
+extern void* operator new(size_t size, const char* file, int line);
+extern void operator delete(void* pointer, const char* file, int line) throw();
+extern size_t getSizeFromPointer(void* ptr);
+#endif
+
+extern "C"
+{
+	void *av_malloc(unsigned int size);
+	void av_free(void *ptr);
+	void *av_realloc(void *ptr, unsigned int size);
+}
+
+void ADM_memStat(void);
+void ADM_memStatInit(void);
+void ADM_memStatEnd(void);
+
+void ADM_memStatInit(void)
+{
+	ADM_consumed = 0;
+	doMemStat = 1;
+}
+
+void ADM_memStatEnd(void)
+{
+	doMemStat = 0;
+}
+
+void ADM_memStat(void)
+{
+	printf("Global mem stat\n______________\n");
+	printf("\tMemory consumed: %lu (MB)\n", ADM_consumed >> 20);
+}
+
+#if !defined(ADM_DEBUG) || !defined(FIND_LEAKS)
+/**
+    \fn ADM_calloc(size_t nbElm,size_t elSize);
+    \brief Replacement for system Calloc using our memory management
+    \param nbElem : # of elements to allocate
+    \param elSize : Size of one element in bytes
+    \return pointer 
+*/
+void *ADM_calloc(size_t nbElm, size_t elSize)
+{
+	void *out = ADM_alloc(nbElm * elSize);
+	memset(out, 0, nbElm * elSize);
+	return out;
+}
+
+void *ADM_alloc(size_t size)
+{
+#ifdef __APPLE__
+	return malloc(size);
+#else
+	char *c;
+
+	uint64_t l, lorg;
+	uint32_t *backdoor;
+	int dome = doMemStat;
+
+	if(dome)
+		memAccess.lock();
+
+	l = (uint64_t)malloc(size + 32);
+
+	// Get next boundary
+	lorg = l;
+	l = (l + 15) & 0xfffffffffffffff0LL;
+	l += 16;
+	c = (char*)l;
+	backdoor = (uint32_t*)(c - 8);
+	*backdoor = (0xdead << 16) + l - lorg;
+	backdoor[1] = size;
+
+	if(dome)
+		memAccess.unlock();
+
+	ADM_consumed += size;
+
+	return c;
+#endif
+}
+
+void ADM_dezalloc(void *ptr)
+{
+#ifdef __APPLE__
+	if (!ptr)
+		return;
+
+	free(ptr);
+#else
+	int dome = doMemStat;
+	uint32_t *backdoor;
+	uint32_t size, offset;
+	char *c = (char*)ptr;
+
+	if (!ptr)
+		return;
+
+	backdoor = (uint32_t*)ptr;
+	backdoor -= 2;
+
+	if (*backdoor == 0xbeefbeef)
+	{
+		printf("Double free gotcha!\n");
+		ADM_assert(0);
+	}
+
+	ADM_assert(((*backdoor) >> 16) == 0xdead);
+
+	offset = backdoor[0] & 0xffff;
+	size = backdoor[1];
+	*backdoor = 0xbeefbeef; // Scratch sig
+
+	if (dome)
+		memAccess.lock();
+
+	free(c - offset);
+	ADM_consumed -= size;
+
+	if(dome)
+		memAccess.unlock();
+#endif
+}
+
+void *operator new( size_t t)
+{
+	return ADM_alloc(t);
+}
+
+void *operator new[] ( size_t t)
+{
+	return ADM_alloc(t);
+}
+
+void operator delete (void *c)
+{
+	ADM_dezalloc(c);
+}
+
+void operator delete[] (void *c)
+{
+	ADM_dezalloc(c);
+}
+//********************************
+// lavcodec wrapper
+//********************************
+extern "C"
+{
+	void *av_malloc(unsigned int size)
+	{
+ 		return ADM_alloc(size);
+	}
+
+	void av_freep(void *arg)
+	{
+		void **ptr= (void**)arg;
+		av_free(*ptr);
+		*ptr = NULL;
+	}
+
+	void *av_mallocz(unsigned int size)
+	{
+		void *ptr;
+
+		ptr = av_malloc(size);
+
+		if (ptr)
+			memset(ptr, 0, size);
+
+		return ptr;
+	}
+}
+
+char *av_strdup(const char *s)
+{
+    char *ptr;
+    int len;
+
+    len = strlen(s) + 1;
+    ptr = (char *)av_malloc(len);
+
+    if (ptr)
+        memcpy(ptr, s, len);
+
+    return ptr;
+}
+
+/**
+ * av_realloc semantics (same as glibc): if ptr is NULL and size > 0,
+ * identical to malloc(size). If size is zero, it is identical to
+ * free(ptr) and NULL is returned.  
+ */
+void *ADM_realloc(void *ptr, size_t newsize)
+{
+#ifdef __APPLE__
+	if(!ptr)
+		return ADM_alloc(newsize);
+
+	if (!newsize)
+	{
+		ADM_dealloc(ptr);
+		return NULL;
+	}
+
+	return realloc(ptr, newsize);
+#else
+	void *nalloc;
+
+	if(!ptr)
+		return ADM_alloc(newsize);
+
+	if(!newsize) 
+	{    	
+		ADM_dealloc(ptr);
+		return NULL;
+	}
+
+	// now we either shrink them or expand them
+	// in case of shrink, we do nothing
+	// in case of expand we have to copy
+	// Do copy everytime (slower)
+	uint32_t *backdoor;
+	uint32_t size, offset;
+	char *c = (char*)ptr;
+
+	backdoor = (uint32_t*)ptr;
+	backdoor -= 2;
+
+	ADM_assert(((*backdoor) >> 16) == 0xdead);
+
+	offset = backdoor[0] & 0xffff;
+	size = backdoor[1];
+
+	if(size >= newsize) // do nothing
+		return ptr;
+
+	// Allocate a new one
+	nalloc = ADM_alloc(newsize);
+	memcpy(nalloc, ptr, size);
+	ADM_dealloc(ptr);
+
+	return nalloc;
+#endif
+}
+
+void *av_realloc(void *ptr, unsigned int newsize)
+{
+	return ADM_realloc(ptr,newsize);
+}
+
+/* NOTE: ptr = NULL is explicetly allowed */
+void av_free(void *ptr)
+{
+	if(ptr)
+		ADM_dealloc(ptr);  
+}
+
+char *ADM_strdup(const char *in)
+{
+	if(!in)
+		return NULL;
+
+	uint32_t l = strlen(in);
+	char *out;
+
+	out = (char*)ADM_alloc(l + 1);
+	memcpy(out, in, l+1);
+
+	return out;
+}
+
+#else
+
+void *ADM_alloc(size_t size)
+{
+	return operator new(size, (char*)_DEBUG_NEW_CALLER_ADDRESS, 0);
+}
+
+void *ADM_calloc(size_t nbElm,size_t elSize)
+{
+	void *out = operator new(nbElm*elSize, (char*)_DEBUG_NEW_CALLER_ADDRESS, 0);
+
+	memset(out,0,nbElm*elSize);
+	return out;
+}
+
+char *ADM_strdup(const char *in)
+{
+    if(!in)
+		return NULL;
+
+	int size = strlen(in) + 1;
+	char *out = (char *)(operator new(size, (char*)_DEBUG_NEW_CALLER_ADDRESS, 0));
+
+	memcpy(out, in, size);
+
+	return out;
+}
+
+void ADM_dezalloc(void *ptr)
+{
+	operator delete(ptr, (char*)_DEBUG_NEW_CALLER_ADDRESS, 0);
+}
+
+void *ADM_realloc(void *ptr, size_t newsize)
+{
+	void *nalloc;
+    
+    if(!ptr)
+		return operator new(newsize, (char*)_DEBUG_NEW_CALLER_ADDRESS, 0);
+
+    if(!newsize) 
+    {    
+		operator delete(ptr, (char*)_DEBUG_NEW_CALLER_ADDRESS, 0);
+		return NULL;
+    }
+
+	uint32_t size = getSizeFromPointer(ptr);
+
+	if (size >= newsize)
+		return ptr;
+
+	nalloc = operator new(newsize, (char*)_DEBUG_NEW_CALLER_ADDRESS, 0);
+	memcpy(nalloc,ptr,getSizeFromPointer(ptr));
+	operator delete(ptr, (char*)_DEBUG_NEW_CALLER_ADDRESS, 0);
+
+	return nalloc;
+}
+
+extern "C"
+{
+	void *av_malloc(unsigned int size)
+	{
+		return operator new(size, (char*)_DEBUG_NEW_CALLER_ADDRESS, 0);
+	}
+	void av_freep(void *arg)
+	{
+		void **ptr = (void**)arg;
+		av_free(*ptr);
+		*ptr = NULL;
+	}
+
+	void *av_mallocz(unsigned int size)
+	{
+		void *ptr;
+
+		ptr = operator new(size, (char*)_DEBUG_NEW_CALLER_ADDRESS, 0);
+
+		if (ptr)
+			memset(ptr, 0, size);
+
+		return ptr;
+	}
+}
+
+char *av_strdup(const char *s)
+{
+    char *ptr;
+    int len;
+    len = strlen(s) + 1;
+	ptr = (char *)operator new(len, (char*)_DEBUG_NEW_CALLER_ADDRESS, 0);
+
+    if (ptr)
+        memcpy(ptr, s, len);
+
+    return ptr;
+}
+
+void *av_realloc(void *ptr, unsigned int newsize)
+{
+	if(!ptr)
+		return operator new(newsize, (char*)_DEBUG_NEW_CALLER_ADDRESS, 0);
+	else
+		return ADM_realloc(ptr,newsize);
+}
+
+void av_free(void *ptr)
+{
+	if(ptr)
+		operator delete(ptr, (char*)_DEBUG_NEW_CALLER_ADDRESS, 0);
+}
+#endif
+// EOF

Copied: branches/avidemux_2.5_branch_mean/avidemux/ADM_core/src/ADM_misc.cpp (from rev 3800, branches/avidemux_2.5_branch_mean/avidemux/ADM_osSupport/ADM_misc.cpp)
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_osSupport/ADM_misc.cpp	2008-02-24 17:29:52 UTC (rev 3800)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_core/src/ADM_misc.cpp	2008-02-27 19:50:36 UTC (rev 3805)
@@ -0,0 +1,307 @@
+/***************************************************************************
+                          toolkit.cpp  -  description
+                             -------------------
+
+
+
+    begin                : Fri Dec 14 2001
+    copyright            : (C) 2001 by mean
+    email                : fixounet at free.fr
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+#include "config.h"
+#include <stdio.h>
+#include <stdlib.h>
+#include <time.h>
+#include <math.h>
+#include <string.h>
+#ifndef ADM_WIN32
+#include <unistd.h>
+#endif
+//#include <gtk/gtk.h>
+#include <ctype.h>
+#include <sys/time.h>
+
+#include "ADM_default.h"
+#include "ADM_assert.h"
+
+#include "ADM_video/ADM_vidMisc.h"
+
+//
+//    Sleep for n ms
+//
+void GUI_Sleep(uint32_t ms)
+{
+    if (ms < 10)
+	return;
+    ADM_usleep(ms*1000);
+}
+
+
+// Get tick (in ms)
+// Call with a 0 to initialize
+// Call with a 1 to read
+//_____________________
+uint32_t getTime(int called)
+{
+
+    static struct timeval timev_s;
+
+    static struct timeval timev;
+    static TIMZ timez;
+
+    int32_t tt;
+
+    if (!called)
+      {
+	  called = 1;
+	  gettimeofday(&timev_s, &timez);
+	  return 0;
+      }
+    gettimeofday(&timev, &timez);
+    tt = timev.tv_usec - timev_s.tv_usec;
+    tt /= 1000;
+    tt += 1000 * (timev.tv_sec - timev_s.tv_sec);
+    return (tt);
+}
+uint32_t getTimeOfTheDay(void)
+{
+  
+
+     struct timeval timev;
+     TIMZ timez;
+
+    int32_t tt;
+
+   
+    gettimeofday(&timev, &timez);
+    tt = timev.tv_usec;
+    tt /= 1000;
+    tt += 1000 * (timev.tv_sec);
+    return (tt&0xffffff);
+
+}
+/// convert frame number and fps to hour/mn/sec/ms
+void  frame2time(	uint32_t frame, uint32_t fps, uint16_t * hh, uint16_t * mm,
+                                uint16_t * ss, uint16_t * ms)
+{
+    UNUSED_ARG(fps);
+double d;
+    uint32_t len2;
+    d=frame;
+    d=d/fps;
+    d*=1000000.;
+    
+    len2 = (uint32_t)(d); //video_body->getTime(frame);
+    ms2time(len2,hh,mm,ss,ms);
+}
+
+void ms2time(uint32_t len2,uint16_t * hh, uint16_t * mm,
+	 			uint16_t * ss, uint16_t * ms)
+{
+    *hh = (uint32_t) floor(len2 / (3600.F * 1000.F));
+    len2 -= (uint32_t) floor(*hh * 3600.F * 1000.F);
+    *mm = (uint32_t) floor(len2 / (60.F * 1000.F));
+    len2 -= (uint32_t) floor(*mm * 60.F * 1000.F);
+    *ss = (uint32_t) floor(len2 / (1000.F));
+    len2 -= (uint32_t) floor((*ss * 1000.F));
+    *ms = (uint32_t) floor(len2);
+
+}
+void            time2frame(uint32_t *frame, uint32_t fps, uint32_t hh, uint32_t mm,
+                                uint32_t ss, uint32_t ms)
+{
+// convert everything to ms : uint32_t = 1000 hours, should be plenty enough
+uint32_t count=0;
+                count+=ms;
+                count+=ss*1000;
+                count+=mm*60*1000;
+                count+=hh*3600*1000;
+double d;
+                d=count;                
+                // ms
+                d=d*fps;
+                d/=1000;
+                d/=1000;
+                *frame= (uint32_t)(floor(d+0.5));
+
+}
+
+uint64_t ADM_swap64(uint64_t in)
+{
+uint32_t low,high;
+uint64_t out;
+        high=in>>32;
+        low=in&0xffffffff;
+        high=ADM_swap32(high);
+        low=ADM_swap32(low);
+        out=low;
+        out=(out<<32)+high;
+        return out;
+  
+}
+// swap BE/LE : Ugly
+uint32_t ADM_swap32( uint32_t in)
+{
+        uint8_t r[4],u;
+        memcpy(&r[0],&in,4);
+        u=r[0];
+        r[0]=r[3];
+        r[3]=u;
+        u=r[1];
+        r[1]=r[2];
+        r[2]=u;
+        memcpy(&in,&r[0],4);
+        return in;
+}
+// swap BE/LE : Ugly
+uint16_t ADM_swap16( uint16_t in)
+{
+	return ( (in>>8) & 0xff) + ( (in&0xff)<<8);
+}
+uint8_t 	identMovieType(uint32_t fps1000)
+{
+#define INRANGE(value,type)  \
+      {\
+              if((fps1000 > value-300) &&( fps1000 < value+300))\
+              {\
+                r=type;\
+                printf("Looks like "#type" \n");\
+                }\
+      }
+      uint8_t r=0;
+      INRANGE(25000,FRAME_PAL);
+      INRANGE(23976,FRAME_FILM);
+      INRANGE(29970,FRAME_NTSC);
+
+      return r;
+}
+uint8_t ms2time(uint32_t ms, uint32_t *h,uint32_t *m, uint32_t *s)
+{
+      uint32_t sectogo;
+      int  mm,ss,hh;
+
+
+                              // d is in ms, divide by 1000 to get seconds
+                              sectogo = (uint32_t) floor(ms / 1000.);
+                              hh=sectogo/3600;
+                              sectogo=sectogo-hh*3600;
+                              mm=sectogo/60;
+                              ss=sectogo%60;
+
+                              *h=hh;
+                              *m=mm;
+                              *s=ss;
+      return 1;
+}
+
+char* ms2timedisplay(uint32_t ms)
+{
+	uint32_t mm, ss;
+	static char string[20];
+
+	mm = (uint32_t)floor(ms / 60000.);
+	
+	if (mm > 1)
+	{
+		sprintf(string, QT_TR_NOOP("%lu minutes"), mm);
+	}
+	else if (mm == 1)
+	{
+		sprintf(string, QT_TR_NOOP("%lu minute"), mm);
+	}
+	else
+	{
+		ss = (uint32_t)floor(ms / 1000.);
+
+		if (ss == 1)
+		{
+			sprintf(string, QT_TR_NOOP("%lu second"), ss);
+		}
+		else
+		{
+			sprintf(string, QT_TR_NOOP("%lu seconds"), ss);
+		}
+	}
+
+	return string;
+}
+
+// Convert everything to lowercase
+void  LowerCase(char *string)
+{
+  int l=strlen(string)-1;
+        for(int i=l;i>=0;i--)
+        {
+                string[i]=tolower(string[i]);
+        }
+
+}
+
+uint8_t         ADM_fileExist(char *name)
+{
+FILE *file;
+                file=fopen(name,"rb");
+                if(!file) return 0;
+                fclose(file);
+                return 1;
+
+}
+/*
+    In some case (e.g. javascript), the reader expects unixish path 
+    c:/foo/bar/c.c
+    and the "natural" path is c:\foo\bar
+    
+    This function convert the later to the former
+
+*/
+extern char *slashToBackSlash(char *in)
+{
+    char *out,*cout;
+    int n;
+    n=strlen(in);
+    cout=out=(char *)ADM_alloc(n+1);   
+    for(int i=0;i<n+1;i++)
+    {
+        if(   in[i]=='\\') out[i]='/';
+        else    out[i]=in[i];
+        
+    }
+    return cout;
+    
+}
+/*
+    
+*/
+void TLK_getDate(ADM_date *date)
+{
+  time_t timez;
+  tm *t;
+  time(&timez);
+  t=localtime(&timez);
+  if(t)
+  {
+    date->hours=t->tm_hour;
+    date->minutes=t->tm_min;
+    date->seconds=t->tm_sec;
+  }
+  
+}
+
+bool shutdown(void)
+{
+#ifdef ADM_WIN32
+	return (shutdown_win32() == 0);
+#else
+	return (system("shutdown -P 0") == 0);
+#endif
+}
+//EOF

Copied: branches/avidemux_2.5_branch_mean/avidemux/ADM_core/src/ADM_threads.cpp (from rev 3800, branches/avidemux_2.5_branch_mean/avidemux/ADM_osSupport/ADM_threads.cpp)
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_osSupport/ADM_threads.cpp	2008-02-24 17:29:52 UTC (rev 3800)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_core/src/ADM_threads.cpp	2008-02-27 19:50:36 UTC (rev 3805)
@@ -0,0 +1,98 @@
+/***************************************************************************
+                    
+    copyright            : (C) 2006 by mean
+    email                : fixounet at free.fr
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+#include "config.h"
+ 
+#include <stdio.h>
+#include <stdlib.h>
+#include <string.h>
+#include <ADM_assert.h>
+#include "ADM_default.h"
+
+
+
+#define THR_CHECK(x) {int r=(x);if(r) {printf("Threading error :%d %s\n", \
+                      r,strerror(r));exit(0);}}
+//**************** Mutex *******************
+admMutex::admMutex(const char *name)
+{
+  _name=name; // Should always be const, so it is okay to not copy
+  THR_CHECK(pthread_mutex_init(&_tex,NULL));
+  _locked=0;
+}
+admMutex::~admMutex()
+{
+  THR_CHECK(pthread_mutex_destroy(&_tex));
+       
+}
+
+uint8_t admMutex::lock(void)
+{
+  int e;
+  THR_CHECK(pthread_mutex_lock(&_tex));
+  _locked=1;
+  return 1;
+}
+uint8_t admMutex::unlock(void)
+{
+  _locked=0;      // Just informative, race possible here
+  THR_CHECK(pthread_mutex_unlock(&_tex));
+  return 1;
+}
+uint8_t admMutex::isLocked(void)
+{
+  return _locked;
+}
+
+//**************** Cond *******************
+
+admCond::admCond( admMutex *tex )
+{
+  THR_CHECK(pthread_cond_init(&_cond,NULL));
+  _condtex=tex;
+  waiting=0;
+  aborted=0;
+}
+admCond::~admCond()
+{
+  THR_CHECK(pthread_cond_destroy(&_cond));
+
+}
+uint8_t admCond::wait(void)
+{
+  if(aborted) return 0;
+        // take sem
+  ADM_assert(_condtex->isLocked());
+  waiting=1;
+  THR_CHECK(pthread_cond_wait(&_cond, &(_condtex->_tex)));
+  waiting=0;
+  _condtex->unlock();
+  return 1;
+}
+uint8_t admCond::wakeup(void)
+{
+  THR_CHECK(pthread_cond_signal(&_cond));
+  return 1;
+}
+uint8_t admCond::iswaiting( void)
+{
+  return waiting;
+}
+uint8_t admCond::abort( void )
+{
+  aborted=1;
+  if(waiting) wakeup();
+  return 1;
+
+}

Copied: branches/avidemux_2.5_branch_mean/avidemux/ADM_core/src/ADM_win32.cpp (from rev 3800, branches/avidemux_2.5_branch_mean/avidemux/ADM_osSupport/win32.cpp)
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_osSupport/win32.cpp	2008-02-24 17:29:52 UTC (rev 3800)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_core/src/ADM_win32.cpp	2008-02-27 19:50:36 UTC (rev 3805)
@@ -0,0 +1,485 @@
+#include "config.h"
+
+#ifdef ADM_WIN32
+#define WIN32_CLASH
+#include <stdio.h>
+#include <stdlib.h>
+
+#include "ADM_default.h"
+
+#include "windows.h"
+#include "io.h"
+#include "winsock2.h"
+#include "ADM_assert.h" 
+
+uint8_t win32_netInit(void);
+extern char *ADM_getBaseDir(void);
+
+void ADM_usleep(unsigned long us)
+{
+	Sleep(us/1000);
+}
+
+uint8_t win32_netInit(void)
+{
+WSADATA wsaData;
+	int iResult;
+		printf("Initializing WinSock\n");
+		iResult = WSAStartup(MAKEWORD(2,2), &wsaData);
+		if (iResult != NO_ERROR)
+		{
+			printf("Error at WSAStartup()\n");
+			return 0;
+		}	
+		printf("WinSock ok\n");
+		return 1;
+}
+
+#ifndef HAVE_GETTIMEOFDAY
+extern "C"
+{
+void gettimeofday(struct timeval *p, void *tz);
+}
+
+void gettimeofday(struct timeval *p, void *tz)
+{
+    unsigned long int sec;
+    SYSTEMTIME  tme;
+
+    GetSystemTime(&tme);
+
+    sec=tme.wSecond;
+    sec+=60*tme.wMinute;
+    sec+=60*60*tme.wHour;
+    
+	p->tv_sec=sec;
+	p->tv_usec=tme.wMilliseconds*1000;
+
+	return;
+}
+#endif
+
+int getpriority(int which, int who)
+{
+	unsigned int priorityClass;
+
+	ADM_assert(which == PRIO_PROCESS);
+	ADM_assert(who == 0);
+
+	priorityClass = GetPriorityClass(GetCurrentProcess());
+
+	switch (priorityClass)
+	{
+		case HIGH_PRIORITY_CLASS:
+			return -18;
+			break;
+		case ABOVE_NORMAL_PRIORITY_CLASS:
+			return -10;
+			break;
+		case NORMAL_PRIORITY_CLASS:
+			return 0;
+			break;
+		case BELOW_NORMAL_PRIORITY_CLASS:
+			return 10;
+			break;
+		case IDLE_PRIORITY_CLASS:
+			return 18;
+			break;
+		default:
+			ADM_assert(0);
+	}
+}
+
+int setpriority(int which, int who, int value)
+{
+	unsigned int priorityClass;
+
+	ADM_assert(which == PRIO_PROCESS);
+	ADM_assert(who == 0);
+	ADM_assert(value >= PRIO_MIN && value <= PRIO_MAX);
+
+	if (value >= -20 && value <= -16)
+	{
+		priorityClass = HIGH_PRIORITY_CLASS;
+	}
+	else if (value >= -15 && value <= -6)
+	{
+		priorityClass = ABOVE_NORMAL_PRIORITY_CLASS;
+	}
+	else if (value >= -5 && value <= 4)
+	{
+		priorityClass = NORMAL_PRIORITY_CLASS;
+	}
+	else if (value >= 6 && value <= 15)
+	{
+		priorityClass = BELOW_NORMAL_PRIORITY_CLASS;
+	}
+	else if (value >= 16 && value <= 20)
+	{
+		priorityClass = IDLE_PRIORITY_CLASS;
+	}
+
+	if (!SetPriorityClass(GetCurrentProcess(), priorityClass))
+	{
+		return -1;
+	}
+
+	return 0;
+}
+
+int shutdown_win32(void)
+{
+	HANDLE hToken;
+	TOKEN_PRIVILEGES tkp;
+
+	// Get a token for this process. 
+	if (!OpenProcessToken(GetCurrentProcess(), TOKEN_ADJUST_PRIVILEGES | TOKEN_QUERY, &hToken))
+	{
+		return -1;
+	}
+
+	// Get the LUID for the shutdown privilege.
+	LookupPrivilegeValue(NULL, SE_SHUTDOWN_NAME, &tkp.Privileges[0].Luid);
+
+	tkp.PrivilegeCount = 1;  // one privilege to set
+	tkp.Privileges[0].Attributes = SE_PRIVILEGE_ENABLED;
+
+	// Get the shutdown privilege for this process.
+	AdjustTokenPrivileges(hToken, FALSE, &tkp, 0, (PTOKEN_PRIVILEGES)NULL, 0);
+
+	if (GetLastError() != ERROR_SUCCESS)
+	{
+		return -1;
+	}
+
+	// Shut down the system and force all applications to close.
+	if (!ExitWindowsEx(EWX_POWEROFF | EWX_FORCE, SHTDN_REASON_FLAG_PLANNED))
+	{
+		return -1;
+	}
+
+	return 0;
+}
+
+#ifndef PRODUCT_BUSINESS
+#define PRODUCT_BUSINESS 0x00000006
+#endif
+
+#ifndef PRODUCT_BUSINESS_N
+#define PRODUCT_BUSINESS_N 0x00000010
+#endif
+
+#ifndef PRODUCT_HOME_BASIC
+#define PRODUCT_HOME_BASIC 0x00000002
+#endif
+
+#ifndef PRODUCT_HOME_BASIC_N
+#define PRODUCT_HOME_BASIC_N 0x00000005
+#endif
+
+#ifndef PRODUCT_HOME_PREMIUM
+#define PRODUCT_HOME_PREMIUM 0x00000003
+#endif 
+
+#ifndef PRODUCT_STARTER
+#define PRODUCT_STARTER 0x0000000B
+#endif
+
+#ifndef PRODUCT_ENTERPRISE
+#define PRODUCT_ENTERPRISE 0x00000004
+#endif 
+
+#ifndef PRODUCT_ULTIMATE
+#define PRODUCT_ULTIMATE 0x00000001
+#endif
+
+bool getWindowsVersion(char* version)
+{
+	int index = 0;
+	OSVERSIONINFOEX osvi = {};
+
+	osvi.dwOSVersionInfoSize = sizeof(OSVERSIONINFOEX);
+
+	if (!GetVersionEx((OSVERSIONINFO*)&osvi))
+		return false;
+
+	if (osvi.dwPlatformId != VER_PLATFORM_WIN32_NT)
+		return false;
+// Vista
+	if (osvi.dwMajorVersion == 6 && osvi.dwMinorVersion == 0)
+	{
+		if (osvi.wProductType == VER_NT_WORKSTATION)
+		{
+			index += sprintf(version + index, "Microsoft Windows Vista");
+
+			uint32_t productType = 0;
+
+			HMODULE hKernel = GetModuleHandle("KERNEL32.DLL");
+
+			if (hKernel)
+			{
+				typedef bool (*funcGetProductInfo)(uint32_t, uint32_t, uint32_t, uint32_t, uint32_t*);
+				funcGetProductInfo pGetProductInfo = (funcGetProductInfo)GetProcAddress(hKernel, "GetProductInfo"); 
+
+				if (pGetProductInfo)
+					pGetProductInfo(6, 0, 0, 0, &productType);
+	  
+				switch (productType)
+				{
+				case PRODUCT_STARTER:
+				{
+					index += sprintf(version + index, " Starter");
+					break;
+				}
+				case PRODUCT_HOME_BASIC_N:
+				{
+					index += sprintf(version + index, " Home Basic N");
+					break;
+				}
+				case PRODUCT_HOME_BASIC:
+				{
+					index += sprintf(version + index, " Home Basic");
+					break;
+				}
+				case PRODUCT_HOME_PREMIUM:
+				{
+					index += sprintf(version + index, " Home Premium");
+					break;
+				}
+				case PRODUCT_BUSINESS_N:
+				{
+					index += sprintf(version + index, " Business N");
+					break;
+				}
+				case PRODUCT_BUSINESS:
+				{
+					index += sprintf(version + index, " Business");
+					break;
+				}
+				case PRODUCT_ENTERPRISE:
+				{
+					index += sprintf(version + index, " Enterprise");
+					break;
+				}
+				case PRODUCT_ULTIMATE:
+				{
+					index += sprintf(version + index, " Ultimate");
+					break;
+				}
+				default:
+					break;
+				}
+			}
+		}
+		else if (osvi.wProductType == VER_NT_SERVER)
+		{
+			index += sprintf(version + index, "Microsoft Windows Server 2008");
+
+			if (osvi.wSuiteMask & VER_SUITE_DATACENTER)
+				index += sprintf(version + index, " Datacenter Edition");
+			else if (osvi.wSuiteMask & VER_SUITE_ENTERPRISE)
+				index += sprintf(version + index, " Enterprise Edition");
+			else if (osvi.wSuiteMask == VER_SUITE_BLADE)
+				index += sprintf(version + index, " Web Edition");
+			else
+				index += sprintf(version + index, " Standard Edition");
+		}
+	}
+// Windows Server 2003
+	else if (osvi.dwMajorVersion == 5 && osvi.dwMinorVersion == 2)
+	{
+		index += sprintf(version + index, "Microsoft Windows Server 2003");
+
+		if (GetSystemMetrics(SM_SERVERR2))
+			index += sprintf(version + index, " R2");
+
+		if (osvi.wSuiteMask & VER_SUITE_DATACENTER)
+			index += sprintf(version + index, " Datacenter Edition");
+		else if (osvi.wSuiteMask & VER_SUITE_ENTERPRISE)
+			index += sprintf(version + index, " Enterprise Edition");
+		else if (osvi.wSuiteMask == VER_SUITE_BLADE)
+			index += sprintf(version + index, " Web Edition");
+		else
+			index += sprintf(version + index, " Standard Edition");
+	}
+// Windows XP
+	else if (osvi.dwMajorVersion == 5 && osvi.dwMinorVersion == 1)
+	{
+		index += sprintf(version + index, "Microsoft Windows XP");
+
+		if (GetSystemMetrics(SM_MEDIACENTER))
+			index += sprintf(version + index, " Media Center Edition");
+		else if (GetSystemMetrics(SM_STARTER))
+			index += sprintf(version + index, " Starter Edition");
+		else if (GetSystemMetrics(SM_TABLETPC))
+			index += sprintf(version + index, " Tablet PC Edition");
+		else if (osvi.wSuiteMask & VER_SUITE_PERSONAL)
+			index += sprintf(version + index, " Home Edition");
+		else
+			index += sprintf(version + index, " Professional");
+	}
+// Windows 2000
+	else if (osvi.dwMajorVersion == 5 && osvi.dwMinorVersion == 0)
+	{
+		index += sprintf(version + index, "Microsoft Windows 2000");
+
+		if (osvi.wProductType == VER_NT_WORKSTATION)
+		{
+			index += sprintf(version + index, " Professional");
+		}
+		else if (osvi.wProductType == VER_NT_SERVER)
+		{
+			if (osvi.wSuiteMask & VER_SUITE_DATACENTER)
+				index += sprintf(version + index, " Datacenter Server");
+			else if (osvi.wSuiteMask & VER_SUITE_ENTERPRISE)
+				index += sprintf(version + index, " Advanced Server");
+			else
+				index += sprintf(version + index, " Server");
+		}
+	}
+// Windows NT 4
+	else if (osvi.dwMajorVersion == 4)
+	{
+		index += sprintf(version + index, "Microsoft Windows NT 4");
+
+		if (osvi.wProductType == VER_NT_WORKSTATION)
+		{
+			index += sprintf(version + index, " Workstation");
+		}
+		else if (osvi.wProductType == VER_NT_SERVER)
+		{
+			if (osvi.wSuiteMask & VER_SUITE_ENTERPRISE)
+				index += sprintf(version + index, " Server, Enterprise Edition");
+			else
+				index += sprintf(version + index, " Server");
+		}
+	}
+	else
+	{
+		index += sprintf(version + index, "Microsoft Windows");
+	}
+
+// Service pack and full version info
+	if (strlen(osvi.szCSDVersion) > 0)
+	{
+		index += sprintf(version + index, " %s", osvi.szCSDVersion);
+	}
+
+	index += sprintf(version + index, " (%d.%d.%d", osvi.dwMajorVersion, osvi.dwMinorVersion, osvi.dwBuildNumber & 0xFFFF);
+
+// 64-bit Windows
+	bool isWow64 = false;
+	HMODULE hKernel = GetModuleHandle("kernel32.dll");
+
+	if (hKernel)
+	{
+		typedef bool (*funcIsWow64Process)(void*, bool*);  
+
+	    funcIsWow64Process pIsWow64Process = (funcIsWow64Process)GetProcAddress(hKernel, "IsWow64Process"); 
+
+	    if (pIsWow64Process)
+	    {
+			pIsWow64Process(GetCurrentProcess(), &isWow64);
+		}
+	}
+
+	if (isWow64)
+		index += sprintf(version + index, "; 64-bit");
+	else
+		index += sprintf(version + index, "; 32-bit");
+
+	index += sprintf(version + index, ")");
+	
+	return true;
+}
+
+#define MONITOR_DEFAULTTONEAREST    0x00000002
+
+void getWorkingArea(uint32_t *width, uint32_t *height)
+{
+	typedef void* (WINAPI *MonitorFromWindow)(HWND hwnd, uint32_t dwFlags);
+	typedef bool (WINAPI *GetMonitorInfo)(void *hMonitor, LPMONITORINFO lpmi);
+
+	static HMODULE user32 = GetModuleHandle("user32.dll");
+	static MonitorFromWindow pMonitorFromWindow = (MonitorFromWindow)GetProcAddress(user32, "MonitorFromWindow");
+	static GetMonitorInfo pGetMonitorInfo = (GetMonitorInfo)GetProcAddress(user32, "GetMonitorInfoA");
+
+	if (pMonitorFromWindow == NULL)
+	{
+		RECT rect;
+
+		// Required for NT4 - no multi-monitor support
+		SystemParametersInfo(SPI_GETWORKAREA, 0, &rect, 0);
+
+		*width = rect.right - rect.left;
+		*height = rect.bottom - rect.top;
+	}
+	else
+	{
+		void *hMonitor = pMonitorFromWindow(GetForegroundWindow(), MONITOR_DEFAULTTONEAREST);
+
+		MONITORINFO monitorInfo;
+
+		monitorInfo.cbSize = sizeof(MONITORINFO);
+		pGetMonitorInfo(hMonitor, &monitorInfo);
+
+		*width = monitorInfo.rcWork.right - monitorInfo.rcWork.left;
+		*height = monitorInfo.rcWork.bottom - monitorInfo.rcWork.top;
+	}
+}
+
+void redirectStdoutToFile(void)
+{
+	// Don't redirect stdout and stderr if SDL hasn't already hijacked it.
+	// This allows us to optionally compile all EXEs as console applications
+	// so the output can be printed to the terminal for debugging purposes.
+
+#ifdef USE_SDL
+	// Close SDL generated logs
+	fclose(stdout);
+	fclose(stderr);
+
+	// Briefly redirect to console
+	freopen("CON", "w", stdout);
+	freopen("CON", "w", stderr);
+
+	// Remove SDL logs to avoid confusion
+	char path[MAX_PATH];
+	char stdoutPath[MAX_PATH];
+	char stderrPath[MAX_PATH];
+	DWORD pathlen = GetModuleFileName(NULL, path, MAX_PATH);
+
+	while (pathlen > 0 && path[pathlen] != '\\')
+		pathlen--;
+
+	path[pathlen] = '\0';
+
+	strcpy(stdoutPath, path);
+	strcat(stdoutPath, "\\stdout.txt");
+	strcpy(stderrPath, path);
+	strcat(stderrPath, "\\stderr.txt");
+
+	remove(stdoutPath);
+	remove(stderrPath);
+
+	// Redirect output to log file in the user's profile directory
+	const char* logFile = "admlog.txt";
+	char* baseDir = ADM_getBaseDir();
+	char *logPath = new char[strlen(baseDir) + 2 + strlen(logFile)];
+	FILE* stream;
+
+	strcpy(logPath, baseDir);
+	strcat(logPath, "/");
+	strcat(logPath, logFile);
+
+	stream = freopen(logPath, "w", stdout);
+	*stderr = *stream;
+
+	// Line buffering
+	setvbuf(stdout, NULL, _IOLBF, BUFSIZ); 
+	setvbuf(stderr, NULL, _IOLBF, BUFSIZ);
+
+	delete[] logPath;
+#endif
+}
+#endif

Copied: branches/avidemux_2.5_branch_mean/avidemux/ADM_core/src/TLK_clock.cpp (from rev 3800, branches/avidemux_2.5_branch_mean/avidemux/ADM_osSupport/TLK_clock.cpp)
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_osSupport/TLK_clock.cpp	2008-02-24 17:29:52 UTC (rev 3800)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_core/src/TLK_clock.cpp	2008-02-27 19:50:36 UTC (rev 3805)
@@ -0,0 +1,107 @@
+/***************************************************************************
+                          TLK_clock.cpp  -  description
+                             -------------------
+	Handle a simple clock/timer class
+
+	The API used returns the amound of days/hour/minute/seconds since
+		1st Jan 1970
+	As we only use part of the information (seconds and useconds) it
+	may wrap around anytime
+
+	The first time a clock is created, we store the "now date" and
+	do the computation with getTime-"now date"
+	It will wrap after 25 days, so it can be considerate safe
+
+
+    begin                : Fri Apr 20 2003
+    copyright            : (C) 2003 by mean
+    email                : fixounet at free.fr
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+#include <stdio.h>
+#include <stdlib.h>
+#include <time.h>
+#include <math.h>
+#include <unistd.h>
+#include <sys/time.h>
+
+#include "config.h"
+
+#include "ADM_osSupport/ADM_debugID.h"
+#define MODULE_NAME MODULE_CLOCKnTIMELEFT
+#include "ADM_osSupport/ADM_debug.h"
+
+#include "avi_vars.h"
+
+
+
+static uint8_t inited=0;
+static struct timeval _itimev;
+static uint32_t getAbsTime( void );
+
+#ifndef ADM_WIN32
+#include "unistd.h"
+void ADM_usleep(unsigned long us)
+{
+  usleep(us);
+}
+#endif
+
+Clock::Clock( void )
+{
+	reset();
+}
+Clock::~Clock(  )
+{
+
+}
+uint32_t Clock::getElapsedMS(void )
+{
+   uint32_t ret = getAbsTime()-_startTime;
+	aprintf("Clock::getElapsedMS() -> %lu\n", ret);
+	return ret;
+}
+
+/** Note:
+*** * gettimeofday() returns seconds since 1.1.1970 in param1.tv_sec
+*** * because we need a AbsTime with milliseconds for benchmarking we have:
+***   max 0x7Fffffff (int32_t casted to uint32_t)
+***    => 2147483647 msec => 2147483 sec => Sun Jan 25 21:31:23 1970
+***   the return value will wrap all 25 days
+*** * workaround:
+***   1) start with an AbsTime of zero if object Clock() is created
+***   2) finish your work within 25 days ;-)
+**/
+uint32_t getAbsTime( void )
+{
+     struct timeval timev;     
+     TIMZ timez;
+
+    int32_t tt;
+
+    if(!inited)
+    {
+	gettimeofday(&_itimev, &timez);
+	inited=1;
+    }
+
+    gettimeofday(&timev, &timez);
+    tt = timev.tv_usec;
+    tt /= 1000;
+    tt += 1000 * (timev.tv_sec-_itimev.tv_sec);
+    aprintf("getAbsTime() -> %lu\n", tt&0x7Fffffff);
+    return (tt&0x7Fffffff);
+
+}
+uint8_t Clock::reset(void)
+{
+	_startTime=getAbsTime();
+}

Deleted: branches/avidemux_2.5_branch_mean/avidemux/ADM_osSupport/ADM_cpuCap.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_osSupport/ADM_cpuCap.cpp	2008-02-26 21:54:51 UTC (rev 3804)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_osSupport/ADM_cpuCap.cpp	2008-02-27 19:50:36 UTC (rev 3805)
@@ -1,213 +0,0 @@
-//
-// C++ Implementation: ADM_cpuCap
-//
-// Description: 
-//
-//
-// Author: mean <fixounet at free.fr>, (C) 2004
-//
-// Copyright: See COPYING file that comes with this distribution
-//
-//
-#include "config.h"
-#include <stdio.h>
-
-#if defined(ADM_WIN32)
-#include <pthread.h>
-#elif !defined(__APPLE__) && !defined(ADM_BSD_FAMILY)
-#include <string.h>
-#include <sched.h>
-#endif
-
-#include "ADM_default.h"
-
-
-#include "prefs.h"
-
-/* Cpu caps interface to other libs */
-extern "C"{ 
-	int ADM_lavcodec_mm_support(void);
-	int ADM_mpeg2dec_mm_support(void);
-	
-}
-
-
-#if defined(ARCH_X86) || defined(ARCH_X86_64)
-extern "C" 
-{
-#include "ADM_lavcodec/dsputil_cpu.h"
-}
-#endif
-
-#define cpuid(index,eax,ebx,ecx,edx)\
-    __asm __volatile\
-        ("mov %%"REG_b", %%"REG_S"\n\t"\
-         "cpuid\n\t"\
-         "xchg %%"REG_b", %%"REG_S\
-         : "=a" (eax), "=S" (ebx),\
-           "=c" (ecx), "=d" (edx)\
-         : "0" (index));
-
-
-/**
- * 		\fn CpuCaps::init
- * 		\brief Detect the SIM capabilities of CPU, borrowed from lavcodec
- */
-  void 	CpuCaps::init( void)
-{
-	printf("[cpuCaps]Checking CPU capabilities\n");
-	myCpuCaps=0;
-	myCpuMask=0xffffffff;
-	prefs->get(FEATURE_CPU_CAPS,&myCpuMask);
-
-#if defined(ARCH_X86) || defined(ARCH_X86_64)
-int rval = 0;
- int eax, ebx, ecx, edx;
- int max_std_level, max_ext_level, std_caps=0, ext_caps=0;
- long a, c;
-
- __asm__ __volatile__ (
-                       /* See if CPUID instruction is supported ... */
-                       /* ... Get copies of EFLAGS into eax and ecx */
-                       "pushf\n\t"
-                       "pop %0\n\t"
-                       "mov %0, %1\n\t"
-
-                       /* ... Toggle the ID bit in one copy and store */
-                       /*     to the EFLAGS reg */
-                       "xor $0x200000, %0\n\t"
-                       "push %0\n\t"
-                       "popf\n\t"
-
-                       /* ... Get the (hopefully modified) EFLAGS */
-                       "pushf\n\t"
-                       "pop %0\n\t"
-                       : "=a" (a), "=c" (c)
-                       :
-                       : "cc"
-                       );
-
- if (a == c)
-     return ; /* CPUID not supported */
-
- cpuid(0, max_std_level, ebx, ecx, edx);
-
- if(max_std_level >= 1)
- {
-     cpuid(1, eax, ebx, ecx, std_caps);
-     if (std_caps & (1<<23))
-    	 myCpuCaps |= ADM_CPU_MMX;
-     if (std_caps & (1<<25))
-    	 myCpuCaps |= ADM_CPU_MMXEXT | ADM_CPU_SSE;
-     if (std_caps & (1<<26))
-    	 myCpuCaps |= ADM_CPU_SSE2;
-     if (ecx & 1)
-    	 myCpuCaps |= ADM_CPU_SSE3;
-     if (ecx & 0x00000200 )
-    	 myCpuCaps |= ADM_CPU_SSSE3;
-     
-     
-     
- }
-
- cpuid(0x80000000, max_ext_level, ebx, ecx, edx);
-
- if(max_ext_level >= 0x80000001)
- {
-     cpuid(0x80000001, eax, ebx, ecx, ext_caps);
-     if (ext_caps & (1<<31))
-    	 myCpuCaps |= ADM_CPU_3DNOW;
-     if (ext_caps & (1<<30))
-    	 myCpuCaps |= ADM_CPU_3DNOWEXT;
-     if (ext_caps & (1<<23))
-    	 myCpuCaps |= ADM_CPU_MMX;
-     if (ext_caps & (1<<22))
-    	 myCpuCaps |= ADM_CPU_MMXEXT;
-     
- }
-#define CHECK(x) if(myCpuCaps & ADM_CPU_##x) { printf("\t\t"#x" detected ");\
-											if(!(myCpuMask&ADM_CPU_##x)) printf("  but disabled");printf("\n");}
-	CHECK(MMX);
-	CHECK(3DNOW);
-	CHECK(MMXEXT);
-	CHECK(SSE);
-	CHECK(SSE2);
-	CHECK(SSE3);
-	CHECK(SSSE3);
-
-#endif // X86
-	printf("[cpuCaps]End of CPU capabilities check (cpuMask :%x)\n",myCpuMask);
-	return ;
-}
-
-/************************************************************************/
-#if defined(ARCH_X86) || defined(ARCH_X86_64)
-#include "ADM_libraries/ADM_libMpeg2Dec/mpeg2_cpu.h"
-#endif
-
-int ADM_mpeg2dec_mm_support(void)
-{
-int rval=0;
-
-#if defined(ARCH_X86) || defined(ARCH_X86_64)
-#undef MATCH
-#define MATCH(x,y) if(CpuCaps::myCpuCaps & CpuCaps::myCpuMask & ADM_CPU_##x) rval|=MPEG2_ACCEL_X86_##x;
-	
-	MATCH(MMX,MMX);
-	MATCH(MMXEXT,MMXEXT);
-	MATCH(3DNOW,3DNOW);
-#endif
-
-	return rval;
-}
-//******************************************************
-#if defined(ARCH_X86) || defined(ARCH_X86_64)
-#include "ADM_lavcodec.h"
-#endif
-/**
- * 		\fn lavcodec_mm_support
- * 		\brief Give lavcodec CPU supported ( FF_MM_MMX)
- */
-int ADM_lavcodec_mm_support(void)
-{
-int rval=0;
-
-#if defined(ARCH_X86) || defined(ARCH_X86_64)
-#undef MATCH
-#define MATCH(x,y) if(CpuCaps::myCpuCaps &  CpuCaps::myCpuMask & ADM_CPU_##x) rval|=MM_##x;
-
-	MATCH(MMX,MMX);
-	MATCH(MMXEXT,MMXEXT);
-	MATCH(SSE,SSE);
-	MATCH(SSE2,SSE2);
-	MATCH(SSE3,SSE3);
-	MATCH(SSSE3,SSSE3);
-	MATCH(3DNOW,3DNOW);
-	MATCH(3DNOWEXT,3DNOWEXT);
-#endif
-
-	return rval;
-}
-// EOF
-
-// Stolen from x264
-int ADM_cpu_num_processors(void)
-{
-#if defined(ADM_WIN32)
-    return pthread_num_processors_np();
-#elif !defined(__APPLE__) && !defined(ADM_BSD_FAMILY)
-    unsigned int bit;
-    int np;
-
-    cpu_set_t p_aff;
-    memset( &p_aff, 0, sizeof(p_aff) );
-    sched_getaffinity( 0, sizeof(p_aff), &p_aff );
-
-    for( np = 0, bit = 0; bit < sizeof(p_aff); bit++ )
-        np += (((uint8_t *)&p_aff)[bit / 8] >> (bit % 8)) & 1;
-
-    return np;
-#else
-    return 1;
-#endif
-}

Deleted: branches/avidemux_2.5_branch_mean/avidemux/ADM_osSupport/ADM_crashdump.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_osSupport/ADM_crashdump.cpp	2008-02-26 21:54:51 UTC (rev 3804)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_osSupport/ADM_crashdump.cpp	2008-02-27 19:50:36 UTC (rev 3805)
@@ -1,449 +0,0 @@
-/***************************************************************************
-  Try to display interesting crash dump
-
-    copyright            : (C) 2007 by mean, (C) 2007 Gruntster
-    email                : fixounet at free.fr
- ***************************************************************************/
-
-/***************************************************************************
- *                                                                         *
- *   This program is free software; you can redistribute it and/or modify  *
- *   it under the terms of the GNU General Public License as published by  *
- *   the Free Software Foundation; either version 2 of the License, or     *
- *   (at your option) any later version.                                   *
- *                                                                         *
- ***************************************************************************/
-
-#include "config.h"
-
-#include <stdio.h>
-#include <stdlib.h>
-#include <stdarg.h>
-#include <string.h>
-#include "ADM_default.h"
-#include <unistd.h>
-
-#include <math.h>
-#include <ADM_assert.h>
-
-#if defined(ADM_WIN32)
-#define WIN32_CLASH
-#include <windows.h>
-#include <excpt.h>
-#include <imagehlp.h>
-#endif
-
-
-#include "ADM_toolkit/toolkit.hxx"
-#include "ADM_userInterfaces/ADM_commonUI/DIA_factory.h"
-#include "ADM_editor/ADM_edit.hxx"
-extern ADM_Composer *video_body;
-
-#define CRASH_FILE "crash.js"
-
-static void saveCrashProject(void);
-extern char *ADM_getBaseDir(void);
-extern void A_parseECMAScript(const char *name);
-
-#ifdef __APPLE__
-void installSigHandler() {}
-
-void ADM_backTrack(int lineno,const char *file)
-{
-	char bfr[1024];
-	saveCrashProject();
-	snprintf(bfr,1024,"Assert Failed at file %s, line %d\n",file,lineno);
-	GUI_Error_HIG("Fatal Error",bfr);
-	assert(0);
-}
-#elif defined(WIN32)
-typedef struct STACK_FRAME
-{
-    STACK_FRAME* ebp;	// address of the calling function frame
-    uint8_t* retAddr;	// return address
-    uint32_t param[0];	// parameter list (could be empty)
-} STACK_FRAME;
-
-static void dumpFrame(void* processId, void* frameAddr)
-{
-	MEMORY_BASIC_INFORMATION mbi;
-	char moduleName[MAX_PATH];
-	HMODULE moduleAddr;
-	DWORD symDisplacement;
-	IMAGEHLP_SYMBOL* pSymbol;
-
-	if (VirtualQuery(frameAddr, &mbi, sizeof(mbi)))
-	{
-		moduleName[0] = 0;
-		moduleAddr = (HMODULE)mbi.AllocationBase;
-		
-		GetModuleFileName(moduleAddr, moduleName, MAX_PATH);
-
-		printf("%s(", moduleName);
-
-		if (SymGetSymFromAddr(processId, (uint32_t)frameAddr, &symDisplacement, pSymbol))
-			printf("%s", pSymbol->Name);
-		else
-			printf("<unknown>");
-
-		printf("+0x%X) [0x%08X]\n", (uint32_t)frameAddr - (uint32_t)moduleAddr, frameAddr);
-
-		fflush(stdout);
-	}
-}
-	
-static void dumpExceptionInfo(void* processId, struct _EXCEPTION_RECORD* pExceptionRec, struct _CONTEXT* pContextRecord)
-{
-	printf("\n*********** EXCEPTION **************\n");
-	printf("Registers:\n");
-	printf("EAX: %08X  EBX: %08X  ECX: %08X  EDX: %08X  ESI: %08X\n", pContextRecord->Eax, pContextRecord->Ebx, pContextRecord->Ecx, pContextRecord->Edx, pContextRecord->Esi);
-	printf("EDI: %08X  ESP: %08X  EBP: %08X  EIP: %08X  EFlags: %08X\n\n", pContextRecord->Edi, pContextRecord->Esp, pContextRecord->Ebp, pContextRecord->Eip, pContextRecord->EFlags);
-
-	printf("Exception Code: ");
-
-	switch (pExceptionRec->ExceptionCode)
-	{
-		case EXCEPTION_ACCESS_VIOLATION:
-			printf("EXCEPTION_ACCESS_VIOLATION");
-			break;
-		case EXCEPTION_ARRAY_BOUNDS_EXCEEDED:
-			printf("EXCEPTION_ARRAY_BOUNDS_EXCEEDED");
-			break;
-		case EXCEPTION_BREAKPOINT:
-			printf("EXCEPTION_BREAKPOINT");
-			break;
-		case EXCEPTION_DATATYPE_MISALIGNMENT:
-			printf("EXCEPTION_DATATYPE_MISALIGNMENT");
-			break;
-		case EXCEPTION_FLT_DENORMAL_OPERAND:
-			printf("EXCEPTION_FLT_DENORMAL_OPERAND");
-			break;
-		case EXCEPTION_FLT_DIVIDE_BY_ZERO:
-			printf("EXCEPTION_FLT_DIVIDE_BY_ZERO");
-			break;
-		case EXCEPTION_FLT_INEXACT_RESULT:
-			printf("EXCEPTION_FLT_INEXACT_RESULT");
-			break;
-		case EXCEPTION_FLT_INVALID_OPERATION:
-			printf("EXCEPTION_FLT_INVALID_OPERATION");
-			break;
-		case EXCEPTION_FLT_OVERFLOW:
-			printf("EXCEPTION_FLT_OVERFLOW");
-			break;
-		case EXCEPTION_FLT_STACK_CHECK:
-			printf("EXCEPTION_FLT_STACK_CHECK");
-			break;
-		case EXCEPTION_FLT_UNDERFLOW:
-			printf("EXCEPTION_FLT_UNDERFLOW");
-			break;
-		case EXCEPTION_ILLEGAL_INSTRUCTION:
-			printf("EXCEPTION_ILLEGAL_INSTRUCTION");
-			break;
-		case EXCEPTION_IN_PAGE_ERROR:
-			printf("EXCEPTION_IN_PAGE_ERROR");
-			break;
-		case EXCEPTION_INT_DIVIDE_BY_ZERO:
-			printf("EXCEPTION_INT_DIVIDE_BY_ZERO");
-			break;
-		case EXCEPTION_INT_OVERFLOW:
-			printf("EXCEPTION_INT_OVERFLOW");
-			break;
-		case EXCEPTION_INVALID_DISPOSITION:
-			printf("EXCEPTION_INVALID_DISPOSITION");
-			break;
-		case EXCEPTION_NONCONTINUABLE_EXCEPTION:
-			printf("EXCEPTION_NONCONTINUABLE_EXCEPTION");
-			break;
-		case EXCEPTION_PRIV_INSTRUCTION:
-			printf("EXCEPTION_PRIV_INSTRUCTION");
-			break;
-		case EXCEPTION_SINGLE_STEP:
-			printf("EXCEPTION_SINGLE_STEP");
-			break;
-		case EXCEPTION_STACK_OVERFLOW:
-			printf("EXCEPTION_STACK_OVERFLOW");
-			break;
-		default:
-			printf("UNKNOWN");
-	}
-	
-	printf(" (%08X)\n", pExceptionRec->ExceptionCode);
-	printf("Exception Flags: %08X\n", pExceptionRec->ExceptionFlags);
-
-	printf("\nOrigin:\n");
-	dumpFrame(processId, (void*)pContextRecord->Eip);
-	printf("*********** EXCEPTION **************\n");
-	fflush(stdout);
-}
-
-extern "C"
-{
-void dumpBackTrace(void* processId)
-{
-	if (!processId)
-		processId = GetCurrentProcess();
-
-	const int maxAddrCount = 32;
-
-	printf("\n*********** BACKTRACE **************\n");
-
-	// Get frame address using builtin GCC function.
-	STACK_FRAME* stackFrame = (STACK_FRAME*)__builtin_frame_address(0);
-
-    for (int retAddrCount = 0; (retAddrCount < maxAddrCount) && !IsBadReadPtr(stackFrame, sizeof(STACK_FRAME)) && !IsBadCodePtr(FARPROC(stackFrame->retAddr)); retAddrCount++, stackFrame = stackFrame->ebp)
-    {
-		printf("Frame %2d: ", retAddrCount);
-		dumpFrame(processId, stackFrame->retAddr);
-		fflush(stdout);
-    }
-
-	printf("*********** BACKTRACE **************\n\n");
-}
-}
-
-void ADM_backTrack(int lineno, const char *file)
-{	
-	fflush(stderr);
-	fflush(stdout);
-	saveCrashProject();
-
-	GUI_Error_HIG(QT_TR_NOOP("Fatal Error"),QT_TR_NOOP("A fatal error has occurred.\n\nClick OK to generate debug information. This may take a few minutes to complete."));
-
-	void* currentProcessId = GetCurrentProcess();
-
-	SymInitialize(currentProcessId, NULL, TRUE);
-	dumpBackTrace(currentProcessId);
-	SymCleanup(currentProcessId);
-
-	printf("Assert failed at file %s, line %d\n\n",file,lineno);
-
-	exit(1);
-}
-
-EXCEPTION_DISPOSITION exceptionHandler(struct _EXCEPTION_RECORD* pExceptionRec, void* pEstablisherFrame, struct _CONTEXT* pContextRecord, void* pDispatcherContext)
-{
-	fflush(stderr);
-	fflush(stdout);
-	static int running=0;
-
-	if(running)
-		exit(1);
-
-	running=1;
-
-	saveCrashProject();
-
-	GUI_Error_HIG(QT_TR_NOOP("Fatal Error"),QT_TR_NOOP("A fatal error has occurred.\n\nClick OK to generate debug information. This may take a few minutes to complete."));
-
-	void* currentProcessId = GetCurrentProcess();
-
-	SymInitialize(currentProcessId, NULL, TRUE);
-
-	dumpExceptionInfo(currentProcessId, pExceptionRec, pContextRecord);
-	fflush(stdout);
-	dumpBackTrace(currentProcessId);
-
-	SymCleanup(currentProcessId);
-
-	exit(1);
-}
-#else
-#include <signal.h>
-#include <execinfo.h>
-void sig_segfault_handler(int signo);
-void installSigHandler()
-{
-    signal(11, sig_segfault_handler); // show stacktrace on default
-}
-extern void ADMImage_stat( void );
-
-static int lenCount(uint8_t *start,uint8_t *end,int *d)
-{
-  int val=0;
-  int digit=0;
-  *d=0;
-  while(*start>='0' && *start<='9' && start<end) 
-  {
-    val=val*10+*start-'0'; 
-    start++;
-    digit++;
-  }
-  *d=digit;
-  return val;
-}
-
-static int decodeOne(uint8_t *start, uint8_t *end,int *cons)
-{
-  *cons=0;
-  int len,digit;
-  uint8_t *org=start;
-  if(start+2>=end) return 0;
-  switch(*start )
-  {
-    case 'Z':
-    case 'P':  
-      
-        len=lenCount(start+1,end,&digit);
-        start+=1+digit;
-        for(int z=0;z<len;z++) printf("%c",*start++);
-        break;
-  }
-  return (int)((uint64_t)start-(uint64_t)org);
-}
-static int demangle(int i,  uint8_t *string)
-{
- // Search 1st (
-  if(!string) return 0;
-  int len=strlen((char *)string);
-  if(!len) return 0;
-   
-  uint8_t *end=string+len;
-  uint8_t *start=string;
-  
-  while(*start!='(' && start+3<end) start++;
-  if(*start!='(') return 0;
-  start++;
-  
-  //  _qt(_Z9crashTestP9JSContextP8JSObjectjPlS3_+0) [0x4acf80]
-  
-  if(*start!='_' || start[1]!='Z')
-  {
-    return 0;
-  }
-  // Seems good !
-  start++;
-  start++;  
-  int digit;
-  // Function name..
-  int l=lenCount(start,end,&digit);
-  printf("\t<");
-  for(int i=0;i<l;i++)
-  {
-    printf("%c",start[digit+i]); 
-  }
-  printf(">(");
-  start+=digit+l;
-  
-  // Parama
-  int first=0;
-  while(start+2<end && *start=='P')
-  {
-    if(!first)  first=1;
-    else
-        printf(",");
-    
-      
-    start++;
-    l=lenCount(start,end,&digit);
-    for(int i=0;i<l;i++)
-    {
-      printf("%c",start[digit+i]); 
-    }
-    start+=digit+l;
-  }
-  printf(")\n");
-  return 1;
-}
-
-/**
-      \fn sig_segfault_handler
-      \brief our segfault handler
-
-*/
-void sig_segfault_handler(int signo)
-{
-     
-     static int running=0;
-      if(running) 
-      {
-        signo=0;
-        exit(1);
-      }
-      running=0; 
-      ADM_backTrack(0,"");
-}
-void ADM_backTrack(int lineno,const char *file)
-{
-     void *stack[20];
-     char **functions;
-     int count, i;
-      
-     saveCrashProject();
-      printf("\n*********** BACKTRACK **************\n");
-      count = backtrace(stack, 20);
-      functions = backtrace_symbols(stack, count);
-      
-         for (i=0; i < count; i++) 
-         {
-            printf("Frame %2d: %s \n", i, functions[i]);
-            demangle(i,(uint8_t *)functions[i]);
-            
-         }
-      printf("*********** BACKTRACK **************\n");
-     // Now use dialogFactory
-      char bfr[30];
-      snprintf(bfr,30,"Line:%u",lineno);
-      diaElemReadOnlyText *txt[count+1];
-      txt[0]=new diaElemReadOnlyText(bfr,file);
-      
-      for(i=0;i<count;i++)
-          txt[i+1]=new diaElemReadOnlyText(functions[i],"Function:");
-      const char *title="Crash BackTrace";
-      if(lineno) title="Assert failed";
-      diaFactoryRun(title,count+1,(diaElem **)txt);
-      
-      //
-     printf("Memory stat:\n");
-     ADMImage_stat();
-
-     exit(1); // _exit(1) ???
-}
-#endif
-/**
-    \fn saveCrashProject
-    \brief Try to save the current project, useful in case of crash
-*/
-void saveCrashProject(void)
-{
-  char *baseDir=ADM_getBaseDir();
-  char *name=CRASH_FILE;
-  static int crashCount=0;
-  if(crashCount) return ; // avoid endless looping
-  crashCount++;
-  char *where=new char[strlen(baseDir)+strlen(name)+2];
-  strcpy(where,baseDir);
-  strcat(where,"/");
-  strcat(where,name);
-  printf("Saving crash file to %s\n",where);
-  video_body->saveAsScript (where, NULL);
-  delete[] where;
-}
-/**
-    \fn checkCrashFile
-    \brief Check if there i a crash file
-*/
-
-void checkCrashFile(void)
-{
-  char *baseDir=ADM_getBaseDir();
-  char *name=CRASH_FILE;
-  static int crashCount=0;
-  char *where=new char[strlen(baseDir)+strlen(name)+2];
-  strcpy(where,baseDir);
-  strcat(where,"/");
-  strcat(where,name);
-  if(ADM_fileExist(where))
-  {
-    if(GUI_Confirmation_HIG(QT_TR_NOOP("Load it"),QT_TR_NOOP("Crash file"),
-       QT_TR_NOOP("I have detected a crash file. \nDo you want to load it  ?\n(It will be deleted in all cases, you should save it if you want to keep it)")))
-    {
-       A_parseECMAScript(where);
-    }
-    unlink(where);
-  }else
-  {
-    printf("No crash file (%s)\n",where); 
-  }
-  delete [] where;
-}
-//EOF

Deleted: branches/avidemux_2.5_branch_mean/avidemux/ADM_osSupport/ADM_fileio.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_osSupport/ADM_fileio.cpp	2008-02-26 21:54:51 UTC (rev 3804)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_osSupport/ADM_fileio.cpp	2008-02-27 19:50:36 UTC (rev 3805)
@@ -1,410 +0,0 @@
-/***************************************************************************
-                    
-    copyright            : (C) 2006 by mean
-    email                : fixounet at free.fr
- ***************************************************************************/
-
-/***************************************************************************
- *                                                                         *
- *   This program is free software; you can redistribute it and/or modify  *
- *   it under the terms of the GNU General Public License as published by  *
- *   the Free Software Foundation; either version 2 of the License, or     *
- *   (at your option) any later version.                                   *
- *                                                                         *
- ***************************************************************************/
-#include "config.h" 
-#include <stdio.h>
-#include <stdlib.h>
-#include <string.h>
-    
-#include <dirent.h>
-#include <errno.h>
-#include <sys/stat.h>
-
-#include <unistd.h>
-
-#ifdef WIN32
-#include <glib.h>
-#endif
-
-#include "ADM_default.h"
-
-
-
-#include "ADM_toolkit/filesel.h"
-#include "ADM_toolkit/toolkit.hxx"
-
-#include "ADM_assert.h"
-#undef fread
-#undef fwrite
-#undef fopen
-#undef fclose
-
-size_t ADM_fread (void *ptr, size_t size, size_t n, FILE *sstream)
-{
-  return fread(ptr,size,n,sstream); 
-  
-}
-
-size_t ADM_fwrite (void *ptr, size_t size, size_t n, FILE *sstream)
-{
-  return fwrite(ptr,size,n,sstream); 
-  
-}
-FILE  *ADM_fopen (const char *file, const char *mode)
-{
-  FILE *f;
-
-#ifndef ADM_WIN32
-  return fopen(file,mode); 
-#else
-  gchar *retval = g_locale_from_utf8 (file, -1, NULL, NULL, NULL);
-  f=fopen(retval,mode);
-  g_free (retval);
-  return f;  
-#endif
-}
-
-int    ADM_fclose (FILE *file)
-{
-  return fclose(file); 
-}
-//*****************************
-static char basedir[1024]={0};
-static char jobdir[1024]={0};
-static char customdir[1024]={0};
-int baseDirDone=0;
-int jobDirDone=0;
-int customDirDone=0;
-#ifdef ADM_WIN32
-const char *ADM_DIR_NAME="\\avidemux";
-#else
-const char *ADM_DIR_NAME="/.avidemux";
-#endif
-/*
-
-*/
-/*
-      Get the  directory where jobs are stored
-******************************************************/
-
-char *ADM_getCustomDir(void)
-{
-  if(customDirDone) return customdir;
-
-  char *rootDir;
-  rootDir=ADM_getBaseDir();
-  strncpy(customdir,rootDir,1023);
-#if defined(ADM_WIN32)
-  strcat(customdir,"\\custom"); 
-#else
-  strcat(customdir,"/custom");
-#endif
-  if(!ADM_mkdir(customdir))
-  {
-    GUI_Error_HIG(QT_TR_NOOP("Oops"),QT_TR_NOOP("can't create custom directory (%s)."),customdir);
-                return NULL;
-  }
-  customDirDone=1;
-  return customdir;
-}
-/*
-      Get the  directory where jobs are stored
-******************************************************/
-
-char *ADM_getJobDir(void)
-{
-  if(jobDirDone) return jobdir;
-
-  char *rootDir;
-  rootDir=ADM_getBaseDir();
-  strncpy(jobdir,rootDir,1023);
-#if defined(ADM_WIN32)
-  strcat(jobdir,"\\jobs"); 
-#else
-  strcat(jobdir,"/jobs");
-#endif
-  if(!ADM_mkdir(jobdir))
-  {
-    GUI_Error_HIG(QT_TR_NOOP("Oops"),QT_TR_NOOP("can't create job directory (%s)."),jobdir);
-                return NULL;
-  }
-  jobDirDone=1;
-  return jobdir;
-}
-/*
-      Get the root directory for .avidemux stuff
-******************************************************/
-char *ADM_getBaseDir(void)
-{
-char *dirname=NULL;
-DIR *dir=NULL;
-char *home;
-//
-        if(baseDirDone) return basedir;
-// Get the base directory
-#if defined(ADM_WIN32)
-        if( ! (home=getenv("USERPROFILE")) )
-        {
-          GUI_Error_HIG(QT_TR_NOOP("Oops"),QT_TR_NOOP("can't determine $USERPROFILE."));
-                    home="c:\\";
-        }
-
-#else
-        if( ! (home=getenv("HOME")) )
-        {
-          GUI_Error_HIG(QT_TR_NOOP("Oops"),QT_TR_NOOP("can't determine $HOME."));
-                return NULL;
-        }
-#endif
-
- // Try to open the .avidemux directory
-        dirname=new char[strlen(home)+strlen(ADM_DIR_NAME)+2];
-        strcpy(dirname,home);
-        strcat(dirname,ADM_DIR_NAME);
-        if(!ADM_mkdir(dirname))
-        {
-          GUI_Error_HIG(QT_TR_NOOP("Oops"),QT_TR_NOOP("Cannot create the .avidemux directory"), NULL);
-                        delete [] dirname;
-                        return NULL;
-        }
-        delete [] dirname;
-
-        // Now built the filename
-        strncpy(basedir,home,1023);
-        strncat(basedir,ADM_DIR_NAME,1023-strlen(basedir));
-        baseDirDone=1;
-        printf("Using %s as base directory for prefs/jobs/...\n",basedir);
-        return basedir;
-}
-/*----------------------------------------
-      Create a directory
-      If it already exists, do nothing
-------------------------------------------*/
-uint8_t ADM_mkdir(const char *dirname)
-{
-DIR *dir=NULL;
-              // Check it already exists ?
-              dir=opendir(dirname);
-              if(dir)
-              { 
-                  printf("Directory %s exists.Good.\n",dirname);
-                  closedir(dir);
-                  return 1;
-              }
-#if defined(ADM_WIN32)
-                if(mkdir(dirname))
-                {
-                    printf("Oops: mkdir failed on %s\n",dirname);   
-                    return 0;
-                }
-                
-#else    
-                char *sys=new char[strlen(dirname)+strlen("mkdir ")+2];
-                strcpy(sys,"mkdir ");
-                strcat(sys,dirname);
-                printf("Creating dir :%s\n",sys);
-                system(sys);
-                delete [] sys;
-#endif		
-              if((dir=opendir(dirname))==NULL)
-                {
-                        return 0;
-                }
-              closedir(dir); 
-              return 1;
-}
-uint8_t buildDirectoryContent(uint32_t *outnb,const char *base, char *jobName[],int maxElems,const char *ext)
-{
-
-DIR *dir;
-struct dirent *direntry;
-int dirmax=0,len;
-int extlen=strlen(ext);
-    ADM_assert(extlen);
-    
-         dir=opendir(base);
-        if(!dir)
-        {
-                return 0;
-        }
-        while((direntry=readdir(dir)))
-        {
-                len=strlen(direntry->d_name);
-                if(len<(extlen+1)) continue;
-                int xbase=len-extlen;
-                if(memcmp(direntry->d_name+xbase,ext,extlen))
-                //if(direntry->d_name[len-1]!='s' || direntry->d_name[len-2]!='j' || direntry->d_name[len-3]!='.')
-                {
-                        printf("ignored:%s\n",direntry->d_name);
-                        continue;
-                }
-                jobName[dirmax]=(char *)ADM_alloc(strlen(base)+strlen(direntry->d_name)+2);
-                strcpy(jobName[dirmax],base);
-                strcat(jobName[dirmax],"/");
-                strcat(jobName[dirmax],direntry->d_name);
-                dirmax++;
-                if(dirmax>=maxElems)
-                {
-                        printf("[jobs]: Max # of jobs exceeded\n");
-                         break;
-                }
-        }
-        closedir(dir);
-        *outnb=dirmax;
-        return 1;
-}
-//------------------------------------------------------------------
-
-/*
-
-** note: it modifies it's first argument
-*/
-void simplify_path(char **buf){
-   unsigned int last1slash = 0;
-   unsigned int last2slash = 0;
-	while( !strncmp(*buf,"/../",4) )
-		memmove(*buf,*buf+3,strlen(*buf+3)+1);
-	for(unsigned int i=0;i<strlen(*buf)-2;i++)
-		while( !strncmp(*buf+i,"/./",3) )
-			memmove(*buf+i,*buf+i+2,strlen(*buf+i+2)+1);
-	for(unsigned int i=0;i<strlen(*buf)-3;i++){
-		if( *(*buf+i) == '/' ){
-			last2slash = last1slash;
-			last1slash = i;
-		}
-		if( !strncmp(*buf+i,"/../",4) ){
-			memmove(*buf+last2slash,*buf+i+3,strlen(*buf+i+3)+1);
-			return simplify_path(buf);
-		}
-	}
-}
-
-//
-//	Make it absolute
-//
-char *PathCanonize(const char *tmpname)
-{
-	char path[300];
-	char *out ;
-
-	if( ! getcwd(path,300) ){
-		fprintf(stderr,"\ngetcwd() failed with: %s (%u)\n",
-		               strerror(errno), errno );
-		path[0] = '\0';
-	}
-	if(!tmpname || tmpname[0]==0)
-	{
-		out=new char [strlen(path)+2];
-		strcpy(out,path);
-#ifndef ADM_WIN32		
-		strcat(out,"/");
-#else
-		strcat(out,"\\");
-#endif	
-		printf("\n Canonizing null string ??? (%s)\n",out);
-	}else if(tmpname[0]=='/'
-#if defined(ADM_WIN32)
-		|| tmpname[1]==':'
-#endif	
-	
-	)
-	{
-		out=new char[strlen(tmpname)+1];
-		strcpy(out,tmpname);
-		return out;
-	}else{
-		out=new char[strlen(path)+strlen(tmpname)+6];
-		strcpy(out,path);
-#ifndef ADM_WIN32		
-		strcat(out,"/");
-#else
-		strcat(out,"\\");
-#endif		
-		strcat(out,tmpname);
-	}
-	simplify_path(&out);
-	return out;
-}
-/*
-	Strip the path and only keep the name
-
-*/
-void		PathStripName(char *str)
-{
-		int len=strlen(str);
-		if(len<=1) return;
-		len--;
-#ifndef ADM_WIN32		
-		while( *(str+len)!='/' && len)
-#else
-	while( *(str+len)!='\\' && len)
-#endif		
-		{
-			 *(str+len)=0;
-			 len--;
-		}
-}
-
-/*
-	Get the filename without path
-
-*/
-const char *GetFileName(const char *str)
-{
-	char *filename;
-        char *filename2;
-#ifndef ADM_WIN32		
-	filename = strrchr(str, '/');
-        
-#else
-	filename = strrchr(str, '\\');
-        filename2 = strrchr(str, '/');
-        if(filename2 && filename)
-        {
-          if(filename2>filename) filename=filename2; 
-        }
-#endif
-	if (filename)
-		return filename+1;
-	else
-		return str;
-}
-
-/*
-	Split patch into absolute path+name and extention
-
-*/
-void PathSplit(char *str, char **root, char **ext)
-{
-	char *full;
-	uint32_t l;
-
-		full=PathCanonize(str);
-		// Search the last .
-		l=strlen(full);
-		l--;
-		ADM_assert(l>0);
-		while( *(full+l)!='.' && l) l--;
-		if(!l || l==(strlen(full)-1))
-		{
-			if(l==(strlen(full)-1))
-			{
-				*(full+l)=0;  // remove trailing .
-			}
-			*ext=new char[2];
-			*root=full;
-			strcpy(*ext,"");
-			return ;
-		}
-		// else we do get an extension
-		// starting at l+1
-		uint32_t suff;
-
-		suff=strlen(full)-l-1;
-		*ext=new char[suff+1];
-		strcpy(*ext,full+l+1);
-		*(full+l)=0;
-		*root=full;
-		return ;
-}

Deleted: branches/avidemux_2.5_branch_mean/avidemux/ADM_osSupport/ADM_memcpy.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_osSupport/ADM_memcpy.cpp	2008-02-26 21:54:51 UTC (rev 3804)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_osSupport/ADM_memcpy.cpp	2008-02-27 19:50:36 UTC (rev 3805)
@@ -1,483 +0,0 @@
-
-
-
-
-/* Adapted from Xine /Mplayer to avidemx2 */
-/*
- * Copyright (C) 2001-2004 the xine project
- *
- * This file is part of xine, a free video player.
- *
- * xine is free software; you can redistribute it and/or modify
- * it under the terms of the GNU General Public License as published by
- * the Free Software Foundation; either version 2 of the License, or
- * (at your option) any later version.
- *
- * xine is distributed in the hope that it will be useful,
- * but WITHOUT ANY WARRANTY; without even the implied warranty of
- * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
- * GNU General Public License for more details.
- *
- * You should have received a copy of the GNU General Public License
- * along with this program; if not, write to the Free Software
- * Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA
- *
- * These are the MMX/MMX2/SSE optimized versions of memcpy
- *
- * This code was adapted from Linux Kernel sources by Nick Kurshev to
- * the mplayer program. (http://mplayer.sourceforge.net)
- *
- * Miguel Freitas split the #ifdefs into several specialized functions that
- * are benchmarked at runtime by xine. Some original comments from Nick
- * have been preserved documenting some MMX/SSE oddities.
- * Also added kernel memcpy function that seems faster than libc one.
- *
- */
-
-
-#include "config.h"
-
-#include <stdio.h>
-#include <stdlib.h>
-#include <string.h>
-
-#include "ADM_default.h"
-
-extern "C"
-{
-        #include "ADM_lavcodec/dsputil_cpu.h"
-
-
-
-#include "ADM_assert.h"
-
-adm_fast_memcpy myAdmMemcpy=NULL;
-/* Original comments from mplayer (file: aclib.c)
- This part of code was taken by me from Linux-2.4.3 and slightly modified
-for MMX, MMX2, SSE instruction set. I have done it since linux uses page aligned
-blocks but mplayer uses weakly ordered data and original sources can not
-speedup them. Only using PREFETCHNTA and MOVNTQ together have effect!
-
->From IA-32 Intel Architecture Software Developer's Manual Volume 1,
-
-Order Number 245470:
-"10.4.6. Cacheability Control, Prefetch, and Memory Ordering Instructions"
-
-Data referenced by a program can be temporal (data will be used again) or
-non-temporal (data will be referenced once and not reused in the immediate
-future). To make efficient use of the processor's caches, it is generally
-desirable to cache temporal data and not cache non-temporal data. Overloading
-the processor's caches with non-temporal data is sometimes referred to as
-"polluting the caches".
-The non-temporal data is written to memory with Write-Combining semantics.
-
-The PREFETCHh instructions permits a program to load data into the processor
-at a suggested cache level, so that it is closer to the processors load and
-store unit when it is needed. If the data is already present in a level of
-the cache hierarchy that is closer to the processor, the PREFETCHh instruction
-will not result in any data movement.
-But we should you PREFETCHNTA: Non-temporal data fetch data into location
-close to the processor, minimizing cache pollution.
-
-The MOVNTQ (store quadword using non-temporal hint) instruction stores
-packed integer data from an MMX register to memory, using a non-temporal hint.
-The MOVNTPS (store packed single-precision floating-point values using
-non-temporal hint) instruction stores packed floating-point data from an
-XMM register to memory, using a non-temporal hint.
-
-The SFENCE (Store Fence) instruction controls write ordering by creating a
-fence for memory store operations. This instruction guarantees that the results
-of every store instruction that precedes the store fence in program order is
-globally visible before any store instruction that follows the fence. The
-SFENCE instruction provides an efficient way of ensuring ordering between
-procedures that produce weakly-ordered data and procedures that consume that
-data.
-
-If you have questions please contact with me: Nick Kurshev: nickols_k at mail.ru.
-*/
-
-/*  mmx v.1 Note: Since we added alignment of destinition it speedups
-    of memory copying on PentMMX, Celeron-1 and P2 upto 12% versus
-    standard (non MMX-optimized) version.
-    Note: on K6-2+ it speedups memory copying upto 25% and
-          on K7 and P3 about 500% (5 times).
-*/
-
-/* Additional notes on gcc assembly and processors: [MF]
-prefetch is specific for AMD processors, the intel ones should be
-prefetch0, prefetch1, prefetch2 which are not recognized by my gcc.
-prefetchnta is supported both on athlon and pentium 3.
-
-therefore i will take off prefetchnta instructions from the mmx1 version
-to avoid problems on pentium mmx and k6-2.
-
-quote of the day:
-"Using prefetches efficiently is more of an art than a science"
-*/
-
-
-#if defined(ARCH_X86) || defined(ARCH_X86_64)
-
-
-/* for small memory blocks (<256 bytes) this version is faster */
-#define small_memcpy(to,from,n)\
-{\
-register unsigned long int dummy;\
-__asm__ __volatile__(\
-  "rep; movsb"\
-  :"=&D"(to), "=&S"(from), "=&c"(dummy)\
-  :"0" (to), "1" (from),"2" (n)\
-  : "memory");\
-}
-
-/* linux kernel __memcpy (from: /include/asm/string.h) */
-static __inline__ void * linux_kernel_memcpy_impl (
-			       void * to,
-			       const void * from,
-			       size_t n)
-{
-int d0, d1, d2;
-
-  if( n < 4 ) {
-    small_memcpy(to,from,n);
-  }
-  else
-    __asm__ __volatile__(
-    "rep ; movsl\n\t"
-    "testb $2,%b4\n\t"
-    "je 1f\n\t"
-    "movsw\n"
-    "1:\ttestb $1,%b4\n\t"
-    "je 2f\n\t"
-    "movsb\n"
-    "2:"
-    : "=&c" (d0), "=&D" (d1), "=&S" (d2)
-    :"0" (n/4), "q" (n),"1" ((long) to),"2" ((long) from)
-    : "memory");
-
-  return (to);
-}
-
-#define SSE_MMREG_SIZE 16
-#define MMX_MMREG_SIZE 8
-
-#define MMX1_MIN_LEN 0x800  /* 2K blocks */
-#define MIN_LEN 0x40  /* 64-byte blocks */
-
-/* SSE note: i tried to move 128 bytes a time instead of 64 but it
-didn't make any measureable difference. i'm using 64 for the sake of
-simplicity. [MF] */
-static void * sse_memcpy(void * to, const void * from, size_t len)
-{
-  void *retval;
-  uint8_t *ufrom=(uint8_t *)from;
-  uint8_t *uto=(uint8_t *)to;
-  size_t i;
-  retval = to;
-
-  /* PREFETCH has effect even for MOVSB instruction ;) */
-  __asm__ __volatile__ (
-    "   prefetchnta (%0)\n"
-    "   prefetchnta 32(%0)\n"
-    "   prefetchnta 64(%0)\n"
-    "   prefetchnta 96(%0)\n"
-    "   prefetchnta 128(%0)\n"
-    "   prefetchnta 160(%0)\n"
-    "   prefetchnta 192(%0)\n"
-    "   prefetchnta 224(%0)\n"
-    "   prefetchnta 256(%0)\n"
-    "   prefetchnta 288(%0)\n"
-    : : "r" (ufrom) );
-
-  if(len >= MIN_LEN)
-  {
-    register unsigned long int delta;
-    /* Align destinition to MMREG_SIZE -boundary */
-    delta = ((unsigned long int)uto)&(SSE_MMREG_SIZE-1);
-    if(delta)
-    {
-      delta=SSE_MMREG_SIZE-delta;
-      len -= delta;
-      small_memcpy(uto, ufrom, delta);
-    }
-    i = len >> 6; /* len/64 */
-    len&=63;
-    if(((unsigned long)ufrom) & 15)
-      /* if SRC is misaligned */
-      for(; i>0; i--)
-      {
-        __asm__ __volatile__ (
-        "prefetchnta 320(%0)\n"
-       "prefetchnta 352(%0)\n"
-        "movups (%0), %%xmm0\n"
-        "movups 16(%0), %%xmm1\n"
-        "movups 32(%0), %%xmm2\n"
-        "movups 48(%0), %%xmm3\n"
-        "movntps %%xmm0, (%1)\n"
-        "movntps %%xmm1, 16(%1)\n"
-        "movntps %%xmm2, 32(%1)\n"
-        "movntps %%xmm3, 48(%1)\n"
-        :: "r" (ufrom), "r" (uto) : "memory");
-         ufrom+=64;
-         uto+=64;
-      }
-    else
-      /*
-         Only if SRC is aligned on 16-byte boundary.
-         It allows to use movaps instead of movups, which required data
-         to be aligned or a general-protection exception (#GP) is generated.
-      */
-      for(; i>0; i--)
-      {
-        __asm__ __volatile__ (
-        "prefetchnta 320(%0)\n"
-       "prefetchnta 352(%0)\n"
-        "movaps (%0), %%xmm0\n"
-        "movaps 16(%0), %%xmm1\n"
-        "movaps 32(%0), %%xmm2\n"
-        "movaps 48(%0), %%xmm3\n"
-        "movntps %%xmm0, (%1)\n"
-        "movntps %%xmm1, 16(%1)\n"
-        "movntps %%xmm2, 32(%1)\n"
-        "movntps %%xmm3, 48(%1)\n"
-        :: "r" (ufrom), "r" (uto) : "memory");
-        ufrom+=64;
-        uto+=64;
-      }
-    /* since movntq is weakly-ordered, a "sfence"
-     * is needed to become ordered again. */
-    __asm__ __volatile__ ("sfence":::"memory");
-    /* enables to use FPU */
-    __asm__ __volatile__ ("emms":::"memory");
-  }
-  /*
-   *	Now do the tail of the block
-   */
-  if(len) linux_kernel_memcpy_impl(uto, ufrom, len);
-  return retval;
-}
-
-static void * mmx_memcpy(void * to, const void * from, size_t len)
-{
-  void *retval;
-  uint8_t *ufrom=(uint8_t *)from;
-  uint8_t *uto=(uint8_t *)to;
-  size_t i;
-  retval = uto;
-
-  if(len >= MMX1_MIN_LEN)
-  {
-    register unsigned long int delta;
-    /* Align destinition to MMREG_SIZE -boundary */
-    delta = ((unsigned long int)uto)&(MMX_MMREG_SIZE-1);
-    if(delta)
-    {
-      delta=MMX_MMREG_SIZE-delta;
-      len -= delta;
-      small_memcpy(uto, ufrom, delta);
-    }
-    i = len >> 6; /* len/64 */
-    len&=63;
-    for(; i>0; i--)
-    {
-      __asm__ __volatile__ (
-      "movq (%0), %%mm0\n"
-      "movq 8(%0), %%mm1\n"
-      "movq 16(%0), %%mm2\n"
-      "movq 24(%0), %%mm3\n"
-      "movq 32(%0), %%mm4\n"
-      "movq 40(%0), %%mm5\n"
-      "movq 48(%0), %%mm6\n"
-      "movq 56(%0), %%mm7\n"
-      "movq %%mm0, (%1)\n"
-      "movq %%mm1, 8(%1)\n"
-      "movq %%mm2, 16(%1)\n"
-      "movq %%mm3, 24(%1)\n"
-      "movq %%mm4, 32(%1)\n"
-      "movq %%mm5, 40(%1)\n"
-      "movq %%mm6, 48(%1)\n"
-      "movq %%mm7, 56(%1)\n"
-      :: "r" (ufrom), "r" (uto) : "memory");
-      ufrom+=64;
-      uto+=64;
-    }
-    __asm__ __volatile__ ("emms":::"memory");
-  }
-  /*
-   *	Now do the tail of the block
-   */
-  if(len) linux_kernel_memcpy_impl(uto, ufrom, len);
-  return retval;
-}
-
-static void * mmx2_memcpy(void * to, const void * from, size_t len)
-{
-  void *retval;
-  uint8_t *ufrom=(uint8_t *)from;
-  uint8_t *uto=(uint8_t *)to;
-  size_t i;
-  retval = to;
-
-  /* PREFETCH has effect even for MOVSB instruction ;) */
-  __asm__ __volatile__ (
-    "   prefetchnta (%0)\n"
-    "   prefetchnta 32(%0)\n"
-    "   prefetchnta 64(%0)\n"
-    "   prefetchnta 96(%0)\n"
-    "   prefetchnta 128(%0)\n"
-    "   prefetchnta 160(%0)\n"
-    "   prefetchnta 192(%0)\n"
-    "   prefetchnta 224(%0)\n"
-    "   prefetchnta 256(%0)\n"
-    "   prefetchnta 288(%0)\n"
-    : : "r" (ufrom) );
-
-  if(len >= MIN_LEN)
-  {
-    register unsigned long int delta;
-    /* Align destinition to MMREG_SIZE -boundary */
-    delta = ((unsigned long int)uto)&(MMX_MMREG_SIZE-1);
-    if(delta)
-    {
-      delta=MMX_MMREG_SIZE-delta;
-      len -= delta;
-      small_memcpy(uto, ufrom, delta);
-    }
-    i = len >> 6; /* len/64 */
-    len&=63;
-    for(; i>0; i--)
-    {
-      __asm__ __volatile__ (
-      "prefetchnta 320(%0)\n"
-      "prefetchnta 352(%0)\n"
-      "movq (%0), %%mm0\n"
-      "movq 8(%0), %%mm1\n"
-      "movq 16(%0), %%mm2\n"
-      "movq 24(%0), %%mm3\n"
-      "movq 32(%0), %%mm4\n"
-      "movq 40(%0), %%mm5\n"
-      "movq 48(%0), %%mm6\n"
-      "movq 56(%0), %%mm7\n"
-      "movntq %%mm0, (%1)\n"
-      "movntq %%mm1, 8(%1)\n"
-      "movntq %%mm2, 16(%1)\n"
-      "movntq %%mm3, 24(%1)\n"
-      "movntq %%mm4, 32(%1)\n"
-      "movntq %%mm5, 40(%1)\n"
-      "movntq %%mm6, 48(%1)\n"
-      "movntq %%mm7, 56(%1)\n"
-      :: "r" (ufrom), "r" (uto) : "memory");
-      ufrom+=64;
-      uto+=64;
-    }
-     /* since movntq is weakly-ordered, a "sfence"
-     * is needed to become ordered again. */
-    __asm__ __volatile__ ("sfence":::"memory");
-    __asm__ __volatile__ ("emms":::"memory");
-  }
-  /*
-   *	Now do the tail of the block
-   */
-  if(len) linux_kernel_memcpy_impl(uto, ufrom, len);
-  return retval;
-}
-
-static void *linux_kernel_memcpy(void *to, const void *from, size_t len) {
-  return linux_kernel_memcpy_impl(to,from,len);
-}
-#endif /* ARCH_X86 */
-
-static struct {
-  char *name;
-  void *(* function)(void *to, const void *from, size_t len);
-
-  uint64_t time; /* This type could be used for non-MSC build too! */
-
-  uint32_t cpu_require;
-} memcpy_method[] =
-{
-  { NULL, NULL, 0, 0 },
-  { "libc memcpy()", memcpy, 0, 0 },
-#if defined( ARCH_X86)  || defined(ARCH_X86_64)
-  { "linux kernel memcpy()", linux_kernel_memcpy, 0, 0 },
-#if defined( ARCH_X86)  || defined(ARCH_X86_64)
-  { "MMX optimized memcpy()", mmx_memcpy, 0, MM_MMX },
-  { "MMXEXT optimized memcpy()", mmx2_memcpy, 0, MM_MMXEXT },
-  { "SSE optimized memcpy()", sse_memcpy, 0, MM_MMXEXT|MM_SSE },
-#endif
-#endif /* ARCH_X86 */
-#if 0 && defined (ARCH_PPC) && !defined (HOST_OS_DARWIN)
-  { "ppcasm_memcpy()", ppcasm_memcpy, 0, 0 },
-  { "ppcasm_cacheable_memcpy()", ppcasm_cacheable_memcpy, 0, MM_ACCEL_PPC_CACHE32 },
-#endif /* ARCH_PPC && !HOST_OS_DARWIN */
-  { NULL, NULL, 0, 0 }
-};
-
-#if defined( ARCH_X86)  || defined(ARCH_X86_64)
-static unsigned long long int rdtsc(void)
-{
-  unsigned long long int x;
-
-  /* that should prevent us from trying cpuid with old cpus */
- 
-    __asm__ volatile (".byte 0x0f, 0x31" : "=A" (x));
-    return x;
- }
-#else
-static unsigned long long int rdtsc(void)
-{
-	return 0;
- }
-
-#endif
-
-
-
-#define BUFSIZE 1024*1024
-/*******************************************
-*/
-uint8_t probe(adm_fast_memcpy func,char *name)
-{
-	void *src,*dst;
-	uint64_t start,stop;
-
-	src=ADM_alloc(BUFSIZE);
-	dst=ADM_alloc(BUFSIZE);
-	start=rdtsc();
-	func(dst,src,BUFSIZE);
-	stop=rdtsc();
-	ADM_dealloc(src);
-	ADM_dealloc(dst);
-	printf("Method :%s \tTime:%lu\n",name,stop-start);
-	return 1;
-
-}
-/*
-
-	It seems MMX gives the best result most of the times
-	Don't bother benchmarking
-*/
-uint8_t ADM_InitMemcpy(void)
-{
-  uint64_t          t;
-  char             *buf1, *buf2;
-  int               i, j, best;
-  int               config_flags = 0;
-#undef memcpy
-        myAdmMemcpy=memcpy;
-#if defined( ARCH_X86)  || defined(ARCH_X86_64)
-        if(CpuCaps::hasMMX())
-                myAdmMemcpy=mmx_memcpy;
-#endif
-#if 0
-	probe(memcpy,"libc");
-	probe(linux_kernel_memcpy,"kernel");
-#if defined( ARCH_X86)  || defined(ARCH_X86_64)
-	if(CpuCaps::hasMMX()) probe(mmx_memcpy,"mmx");
-	if(CpuCaps::hasMMXEXT()) probe(mmx_memcpy,"mmxext");
-	if(CpuCaps::hasSSE()) probe(sse_memcpy,"sse");
-#endif
-#endif
-	return 1; 
-}
-}

Deleted: branches/avidemux_2.5_branch_mean/avidemux/ADM_osSupport/ADM_memory.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_osSupport/ADM_memory.cpp	2008-02-26 21:54:51 UTC (rev 3804)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_osSupport/ADM_memory.cpp	2008-02-27 19:50:36 UTC (rev 3805)
@@ -1 +0,0 @@
-//

Deleted: branches/avidemux_2.5_branch_mean/avidemux/ADM_osSupport/ADM_memsupport.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_osSupport/ADM_memsupport.cpp	2008-02-26 21:54:51 UTC (rev 3804)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_osSupport/ADM_memsupport.cpp	2008-02-27 19:50:36 UTC (rev 3805)
@@ -1,423 +0,0 @@
-//
-// C++ Interface: ADM_memsupport
-//
-// Description: 
-//	Wrapper for all memory alloc/dealloc
-//
-//	Ensures 16 byte alignment for all memory allocations on Linux and Windows (to
-//  support PPC and SSE).
-//
-//  Mac OS X is exempt as it automatically ensures 16 byte alignment and overriding
-//  the new/delete operators with custom memory management clashes with Qt4.
-//
-// Author: mean <fixounet at free.fr>, (C) 2004
-//
-// Copyright: See COPYING file that comes with this distribution
-//
-//
-/***************************************************************************
- *                                                                         *
- *   This program is free software; you can redistribute it and/or modify  *
- *   it under the terms of the GNU General Public License as published by  *
- *   the Free Software Foundation; either version 2 of the License, or     *
- *   (at your option) any later version.                                   *
- *                                                                         *
- ***************************************************************************/
-#include "ADM_default.h"
-
-
-
-#undef memalign
-#undef malloc
-#undef free
-#undef realloc
-
-static uint32_t ADM_consumed = 0;
-static admMutex memAccess("MemAccess");
-static int doMemStat = 0;
-
-#if defined(ADM_DEBUG) && defined(FIND_LEAKS)
-#define _DEBUG_NEW_CALLER_ADDRESS __builtin_return_address(0)
-extern void* operator new(size_t size, const char* file, int line);
-extern void operator delete(void* pointer, const char* file, int line) throw();
-extern size_t getSizeFromPointer(void* ptr);
-#endif
-
-extern "C"
-{
-	void *av_malloc(unsigned int size);
-	void av_free(void *ptr);
-	void *av_realloc(void *ptr, unsigned int size);
-}
-
-void ADM_memStat(void);
-void ADM_memStatInit(void);
-void ADM_memStatEnd(void);
-
-void ADM_memStatInit(void)
-{
-	ADM_consumed = 0;
-	doMemStat = 1;
-}
-
-void ADM_memStatEnd(void)
-{
-	doMemStat = 0;
-}
-
-void ADM_memStat(void)
-{
-	printf("Global mem stat\n______________\n");
-	printf("\tMemory consumed: %lu (MB)\n", ADM_consumed >> 20);
-}
-
-#if !defined(ADM_DEBUG) || !defined(FIND_LEAKS)
-/**
-    \fn ADM_calloc(size_t nbElm,size_t elSize);
-    \brief Replacement for system Calloc using our memory management
-    \param nbElem : # of elements to allocate
-    \param elSize : Size of one element in bytes
-    \return pointer 
-*/
-void *ADM_calloc(size_t nbElm, size_t elSize)
-{
-	void *out = ADM_alloc(nbElm * elSize);
-	memset(out, 0, nbElm * elSize);
-	return out;
-}
-
-void *ADM_alloc(size_t size)
-{
-#ifdef __APPLE__
-	return malloc(size);
-#else
-	char *c;
-
-	uint64_t l, lorg;
-	uint32_t *backdoor;
-	int dome = doMemStat;
-
-	if(dome)
-		memAccess.lock();
-
-	l = (uint64_t)malloc(size + 32);
-
-	// Get next boundary
-	lorg = l;
-	l = (l + 15) & 0xfffffffffffffff0LL;
-	l += 16;
-	c = (char*)l;
-	backdoor = (uint32_t*)(c - 8);
-	*backdoor = (0xdead << 16) + l - lorg;
-	backdoor[1] = size;
-
-	if(dome)
-		memAccess.unlock();
-
-	ADM_consumed += size;
-
-	return c;
-#endif
-}
-
-void ADM_dezalloc(void *ptr)
-{
-#ifdef __APPLE__
-	if (!ptr)
-		return;
-
-	free(ptr);
-#else
-	int dome = doMemStat;
-	uint32_t *backdoor;
-	uint32_t size, offset;
-	char *c = (char*)ptr;
-
-	if (!ptr)
-		return;
-
-	backdoor = (uint32_t*)ptr;
-	backdoor -= 2;
-
-	if (*backdoor == 0xbeefbeef)
-	{
-		printf("Double free gotcha!\n");
-		ADM_assert(0);
-	}
-
-	ADM_assert(((*backdoor) >> 16) == 0xdead);
-
-	offset = backdoor[0] & 0xffff;
-	size = backdoor[1];
-	*backdoor = 0xbeefbeef; // Scratch sig
-
-	if (dome)
-		memAccess.lock();
-
-	free(c - offset);
-	ADM_consumed -= size;
-
-	if(dome)
-		memAccess.unlock();
-#endif
-}
-
-void *operator new( size_t t)
-{
-	return ADM_alloc(t);
-}
-
-void *operator new[] ( size_t t)
-{
-	return ADM_alloc(t);
-}
-
-void operator delete (void *c)
-{
-	ADM_dezalloc(c);
-}
-
-void operator delete[] (void *c)
-{
-	ADM_dezalloc(c);
-}
-//********************************
-// lavcodec wrapper
-//********************************
-extern "C"
-{
-	void *av_malloc(unsigned int size)
-	{
- 		return ADM_alloc(size);
-	}
-
-	void av_freep(void *arg)
-	{
-		void **ptr= (void**)arg;
-		av_free(*ptr);
-		*ptr = NULL;
-	}
-
-	void *av_mallocz(unsigned int size)
-	{
-		void *ptr;
-
-		ptr = av_malloc(size);
-
-		if (ptr)
-			memset(ptr, 0, size);
-
-		return ptr;
-	}
-}
-
-char *av_strdup(const char *s)
-{
-    char *ptr;
-    int len;
-
-    len = strlen(s) + 1;
-    ptr = (char *)av_malloc(len);
-
-    if (ptr)
-        memcpy(ptr, s, len);
-
-    return ptr;
-}
-
-/**
- * av_realloc semantics (same as glibc): if ptr is NULL and size > 0,
- * identical to malloc(size). If size is zero, it is identical to
- * free(ptr) and NULL is returned.  
- */
-void *ADM_realloc(void *ptr, size_t newsize)
-{
-#ifdef __APPLE__
-	if(!ptr)
-		return ADM_alloc(newsize);
-
-	if (!newsize)
-	{
-		ADM_dealloc(ptr);
-		return NULL;
-	}
-
-	return realloc(ptr, newsize);
-#else
-	void *nalloc;
-
-	if(!ptr)
-		return ADM_alloc(newsize);
-
-	if(!newsize) 
-	{    	
-		ADM_dealloc(ptr);
-		return NULL;
-	}
-
-	// now we either shrink them or expand them
-	// in case of shrink, we do nothing
-	// in case of expand we have to copy
-	// Do copy everytime (slower)
-	uint32_t *backdoor;
-	uint32_t size, offset;
-	char *c = (char*)ptr;
-
-	backdoor = (uint32_t*)ptr;
-	backdoor -= 2;
-
-	ADM_assert(((*backdoor) >> 16) == 0xdead);
-
-	offset = backdoor[0] & 0xffff;
-	size = backdoor[1];
-
-	if(size >= newsize) // do nothing
-		return ptr;
-
-	// Allocate a new one
-	nalloc = ADM_alloc(newsize);
-	memcpy(nalloc, ptr, size);
-	ADM_dealloc(ptr);
-
-	return nalloc;
-#endif
-}
-
-void *av_realloc(void *ptr, unsigned int newsize)
-{
-	return ADM_realloc(ptr,newsize);
-}
-
-/* NOTE: ptr = NULL is explicetly allowed */
-void av_free(void *ptr)
-{
-	if(ptr)
-		ADM_dealloc(ptr);  
-}
-
-char *ADM_strdup(const char *in)
-{
-	if(!in)
-		return NULL;
-
-	uint32_t l = strlen(in);
-	char *out;
-
-	out = (char*)ADM_alloc(l + 1);
-	memcpy(out, in, l+1);
-
-	return out;
-}
-
-#else
-
-void *ADM_alloc(size_t size)
-{
-	return operator new(size, (char*)_DEBUG_NEW_CALLER_ADDRESS, 0);
-}
-
-void *ADM_calloc(size_t nbElm,size_t elSize)
-{
-	void *out = operator new(nbElm*elSize, (char*)_DEBUG_NEW_CALLER_ADDRESS, 0);
-
-	memset(out,0,nbElm*elSize);
-	return out;
-}
-
-char *ADM_strdup(const char *in)
-{
-    if(!in)
-		return NULL;
-
-	int size = strlen(in) + 1;
-	char *out = (char *)(operator new(size, (char*)_DEBUG_NEW_CALLER_ADDRESS, 0));
-
-	memcpy(out, in, size);
-
-	return out;
-}
-
-void ADM_dezalloc(void *ptr)
-{
-	operator delete(ptr, (char*)_DEBUG_NEW_CALLER_ADDRESS, 0);
-}
-
-void *ADM_realloc(void *ptr, size_t newsize)
-{
-	void *nalloc;
-    
-    if(!ptr)
-		return operator new(newsize, (char*)_DEBUG_NEW_CALLER_ADDRESS, 0);
-
-    if(!newsize) 
-    {    
-		operator delete(ptr, (char*)_DEBUG_NEW_CALLER_ADDRESS, 0);
-		return NULL;
-    }
-
-	uint32_t size = getSizeFromPointer(ptr);
-
-	if (size >= newsize)
-		return ptr;
-
-	nalloc = operator new(newsize, (char*)_DEBUG_NEW_CALLER_ADDRESS, 0);
-	memcpy(nalloc,ptr,getSizeFromPointer(ptr));
-	operator delete(ptr, (char*)_DEBUG_NEW_CALLER_ADDRESS, 0);
-
-	return nalloc;
-}
-
-extern "C"
-{
-	void *av_malloc(unsigned int size)
-	{
-		return operator new(size, (char*)_DEBUG_NEW_CALLER_ADDRESS, 0);
-	}
-	void av_freep(void *arg)
-	{
-		void **ptr = (void**)arg;
-		av_free(*ptr);
-		*ptr = NULL;
-	}
-
-	void *av_mallocz(unsigned int size)
-	{
-		void *ptr;
-
-		ptr = operator new(size, (char*)_DEBUG_NEW_CALLER_ADDRESS, 0);
-
-		if (ptr)
-			memset(ptr, 0, size);
-
-		return ptr;
-	}
-}
-
-char *av_strdup(const char *s)
-{
-    char *ptr;
-    int len;
-    len = strlen(s) + 1;
-	ptr = (char *)operator new(len, (char*)_DEBUG_NEW_CALLER_ADDRESS, 0);
-
-    if (ptr)
-        memcpy(ptr, s, len);
-
-    return ptr;
-}
-
-void *av_realloc(void *ptr, unsigned int newsize)
-{
-	if(!ptr)
-		return operator new(newsize, (char*)_DEBUG_NEW_CALLER_ADDRESS, 0);
-	else
-		return ADM_realloc(ptr,newsize);
-}
-
-void av_free(void *ptr)
-{
-	if(ptr)
-		operator delete(ptr, (char*)_DEBUG_NEW_CALLER_ADDRESS, 0);
-}
-#endif
-// EOF

Deleted: branches/avidemux_2.5_branch_mean/avidemux/ADM_osSupport/ADM_misc.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_osSupport/ADM_misc.cpp	2008-02-26 21:54:51 UTC (rev 3804)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_osSupport/ADM_misc.cpp	2008-02-27 19:50:36 UTC (rev 3805)
@@ -1,307 +0,0 @@
-/***************************************************************************
-                          toolkit.cpp  -  description
-                             -------------------
-
-
-
-    begin                : Fri Dec 14 2001
-    copyright            : (C) 2001 by mean
-    email                : fixounet at free.fr
- ***************************************************************************/
-
-/***************************************************************************
- *                                                                         *
- *   This program is free software; you can redistribute it and/or modify  *
- *   it under the terms of the GNU General Public License as published by  *
- *   the Free Software Foundation; either version 2 of the License, or     *
- *   (at your option) any later version.                                   *
- *                                                                         *
- ***************************************************************************/
-#include "config.h"
-#include <stdio.h>
-#include <stdlib.h>
-#include <time.h>
-#include <math.h>
-#include <string.h>
-#ifndef ADM_WIN32
-#include <unistd.h>
-#endif
-//#include <gtk/gtk.h>
-#include <ctype.h>
-#include <sys/time.h>
-
-#include "ADM_default.h"
-#include "ADM_assert.h"
-
-#include "ADM_video/ADM_vidMisc.h"
-
-//
-//    Sleep for n ms
-//
-void GUI_Sleep(uint32_t ms)
-{
-    if (ms < 10)
-	return;
-    ADM_usleep(ms*1000);
-}
-
-
-// Get tick (in ms)
-// Call with a 0 to initialize
-// Call with a 1 to read
-//_____________________
-uint32_t getTime(int called)
-{
-
-    static struct timeval timev_s;
-
-    static struct timeval timev;
-    static TIMZ timez;
-
-    int32_t tt;
-
-    if (!called)
-      {
-	  called = 1;
-	  gettimeofday(&timev_s, &timez);
-	  return 0;
-      }
-    gettimeofday(&timev, &timez);
-    tt = timev.tv_usec - timev_s.tv_usec;
-    tt /= 1000;
-    tt += 1000 * (timev.tv_sec - timev_s.tv_sec);
-    return (tt);
-}
-uint32_t getTimeOfTheDay(void)
-{
-  
-
-     struct timeval timev;
-     TIMZ timez;
-
-    int32_t tt;
-
-   
-    gettimeofday(&timev, &timez);
-    tt = timev.tv_usec;
-    tt /= 1000;
-    tt += 1000 * (timev.tv_sec);
-    return (tt&0xffffff);
-
-}
-/// convert frame number and fps to hour/mn/sec/ms
-void  frame2time(	uint32_t frame, uint32_t fps, uint16_t * hh, uint16_t * mm,
-                                uint16_t * ss, uint16_t * ms)
-{
-    UNUSED_ARG(fps);
-double d;
-    uint32_t len2;
-    d=frame;
-    d=d/fps;
-    d*=1000000.;
-    
-    len2 = (uint32_t)(d); //video_body->getTime(frame);
-    ms2time(len2,hh,mm,ss,ms);
-}
-
-void ms2time(uint32_t len2,uint16_t * hh, uint16_t * mm,
-	 			uint16_t * ss, uint16_t * ms)
-{
-    *hh = (uint32_t) floor(len2 / (3600.F * 1000.F));
-    len2 -= (uint32_t) floor(*hh * 3600.F * 1000.F);
-    *mm = (uint32_t) floor(len2 / (60.F * 1000.F));
-    len2 -= (uint32_t) floor(*mm * 60.F * 1000.F);
-    *ss = (uint32_t) floor(len2 / (1000.F));
-    len2 -= (uint32_t) floor((*ss * 1000.F));
-    *ms = (uint32_t) floor(len2);
-
-}
-void            time2frame(uint32_t *frame, uint32_t fps, uint32_t hh, uint32_t mm,
-                                uint32_t ss, uint32_t ms)
-{
-// convert everything to ms : uint32_t = 1000 hours, should be plenty enough
-uint32_t count=0;
-                count+=ms;
-                count+=ss*1000;
-                count+=mm*60*1000;
-                count+=hh*3600*1000;
-double d;
-                d=count;                
-                // ms
-                d=d*fps;
-                d/=1000;
-                d/=1000;
-                *frame= (uint32_t)(floor(d+0.5));
-
-}
-
-uint64_t ADM_swap64(uint64_t in)
-{
-uint32_t low,high;
-uint64_t out;
-        high=in>>32;
-        low=in&0xffffffff;
-        high=ADM_swap32(high);
-        low=ADM_swap32(low);
-        out=low;
-        out=(out<<32)+high;
-        return out;
-  
-}
-// swap BE/LE : Ugly
-uint32_t ADM_swap32( uint32_t in)
-{
-        uint8_t r[4],u;
-        memcpy(&r[0],&in,4);
-        u=r[0];
-        r[0]=r[3];
-        r[3]=u;
-        u=r[1];
-        r[1]=r[2];
-        r[2]=u;
-        memcpy(&in,&r[0],4);
-        return in;
-}
-// swap BE/LE : Ugly
-uint16_t ADM_swap16( uint16_t in)
-{
-	return ( (in>>8) & 0xff) + ( (in&0xff)<<8);
-}
-uint8_t 	identMovieType(uint32_t fps1000)
-{
-#define INRANGE(value,type)  \
-      {\
-              if((fps1000 > value-300) &&( fps1000 < value+300))\
-              {\
-                r=type;\
-                printf("Looks like "#type" \n");\
-                }\
-      }
-      uint8_t r=0;
-      INRANGE(25000,FRAME_PAL);
-      INRANGE(23976,FRAME_FILM);
-      INRANGE(29970,FRAME_NTSC);
-
-      return r;
-}
-uint8_t ms2time(uint32_t ms, uint32_t *h,uint32_t *m, uint32_t *s)
-{
-      uint32_t sectogo;
-      int  mm,ss,hh;
-
-
-                              // d is in ms, divide by 1000 to get seconds
-                              sectogo = (uint32_t) floor(ms / 1000.);
-                              hh=sectogo/3600;
-                              sectogo=sectogo-hh*3600;
-                              mm=sectogo/60;
-                              ss=sectogo%60;
-
-                              *h=hh;
-                              *m=mm;
-                              *s=ss;
-      return 1;
-}
-
-char* ms2timedisplay(uint32_t ms)
-{
-	uint32_t mm, ss;
-	static char string[20];
-
-	mm = (uint32_t)floor(ms / 60000.);
-	
-	if (mm > 1)
-	{
-		sprintf(string, QT_TR_NOOP("%lu minutes"), mm);
-	}
-	else if (mm == 1)
-	{
-		sprintf(string, QT_TR_NOOP("%lu minute"), mm);
-	}
-	else
-	{
-		ss = (uint32_t)floor(ms / 1000.);
-
-		if (ss == 1)
-		{
-			sprintf(string, QT_TR_NOOP("%lu second"), ss);
-		}
-		else
-		{
-			sprintf(string, QT_TR_NOOP("%lu seconds"), ss);
-		}
-	}
-
-	return string;
-}
-
-// Convert everything to lowercase
-void  LowerCase(char *string)
-{
-  int l=strlen(string)-1;
-        for(int i=l;i>=0;i--)
-        {
-                string[i]=tolower(string[i]);
-        }
-
-}
-
-uint8_t         ADM_fileExist(char *name)
-{
-FILE *file;
-                file=fopen(name,"rb");
-                if(!file) return 0;
-                fclose(file);
-                return 1;
-
-}
-/*
-    In some case (e.g. javascript), the reader expects unixish path 
-    c:/foo/bar/c.c
-    and the "natural" path is c:\foo\bar
-    
-    This function convert the later to the former
-
-*/
-extern char *slashToBackSlash(char *in)
-{
-    char *out,*cout;
-    int n;
-    n=strlen(in);
-    cout=out=(char *)ADM_alloc(n+1);   
-    for(int i=0;i<n+1;i++)
-    {
-        if(   in[i]=='\\') out[i]='/';
-        else    out[i]=in[i];
-        
-    }
-    return cout;
-    
-}
-/*
-    
-*/
-void TLK_getDate(ADM_date *date)
-{
-  time_t timez;
-  tm *t;
-  time(&timez);
-  t=localtime(&timez);
-  if(t)
-  {
-    date->hours=t->tm_hour;
-    date->minutes=t->tm_min;
-    date->seconds=t->tm_sec;
-  }
-  
-}
-
-bool shutdown(void)
-{
-#ifdef ADM_WIN32
-	return (shutdown_win32() == 0);
-#else
-	return (system("shutdown -P 0") == 0);
-#endif
-}
-//EOF

Deleted: branches/avidemux_2.5_branch_mean/avidemux/ADM_osSupport/ADM_threads.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_osSupport/ADM_threads.cpp	2008-02-26 21:54:51 UTC (rev 3804)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_osSupport/ADM_threads.cpp	2008-02-27 19:50:36 UTC (rev 3805)
@@ -1,98 +0,0 @@
-/***************************************************************************
-                    
-    copyright            : (C) 2006 by mean
-    email                : fixounet at free.fr
- ***************************************************************************/
-
-/***************************************************************************
- *                                                                         *
- *   This program is free software; you can redistribute it and/or modify  *
- *   it under the terms of the GNU General Public License as published by  *
- *   the Free Software Foundation; either version 2 of the License, or     *
- *   (at your option) any later version.                                   *
- *                                                                         *
- ***************************************************************************/
-#include "config.h"
- 
-#include <stdio.h>
-#include <stdlib.h>
-#include <string.h>
-#include <ADM_assert.h>
-#include "ADM_default.h"
-
-
-
-#define THR_CHECK(x) {int r=(x);if(r) {printf("Threading error :%d %s\n", \
-                      r,strerror(r));exit(0);}}
-//**************** Mutex *******************
-admMutex::admMutex(const char *name)
-{
-  _name=name; // Should always be const, so it is okay to not copy
-  THR_CHECK(pthread_mutex_init(&_tex,NULL));
-  _locked=0;
-}
-admMutex::~admMutex()
-{
-  THR_CHECK(pthread_mutex_destroy(&_tex));
-       
-}
-
-uint8_t admMutex::lock(void)
-{
-  int e;
-  THR_CHECK(pthread_mutex_lock(&_tex));
-  _locked=1;
-  return 1;
-}
-uint8_t admMutex::unlock(void)
-{
-  _locked=0;      // Just informative, race possible here
-  THR_CHECK(pthread_mutex_unlock(&_tex));
-  return 1;
-}
-uint8_t admMutex::isLocked(void)
-{
-  return _locked;
-}
-
-//**************** Cond *******************
-
-admCond::admCond( admMutex *tex )
-{
-  THR_CHECK(pthread_cond_init(&_cond,NULL));
-  _condtex=tex;
-  waiting=0;
-  aborted=0;
-}
-admCond::~admCond()
-{
-  THR_CHECK(pthread_cond_destroy(&_cond));
-
-}
-uint8_t admCond::wait(void)
-{
-  if(aborted) return 0;
-        // take sem
-  ADM_assert(_condtex->isLocked());
-  waiting=1;
-  THR_CHECK(pthread_cond_wait(&_cond, &(_condtex->_tex)));
-  waiting=0;
-  _condtex->unlock();
-  return 1;
-}
-uint8_t admCond::wakeup(void)
-{
-  THR_CHECK(pthread_cond_signal(&_cond));
-  return 1;
-}
-uint8_t admCond::iswaiting( void)
-{
-  return waiting;
-}
-uint8_t admCond::abort( void )
-{
-  aborted=1;
-  if(waiting) wakeup();
-  return 1;
-
-}

Deleted: branches/avidemux_2.5_branch_mean/avidemux/ADM_osSupport/TLK_clock.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_osSupport/TLK_clock.cpp	2008-02-26 21:54:51 UTC (rev 3804)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_osSupport/TLK_clock.cpp	2008-02-27 19:50:36 UTC (rev 3805)
@@ -1,107 +0,0 @@
-/***************************************************************************
-                          TLK_clock.cpp  -  description
-                             -------------------
-	Handle a simple clock/timer class
-
-	The API used returns the amound of days/hour/minute/seconds since
-		1st Jan 1970
-	As we only use part of the information (seconds and useconds) it
-	may wrap around anytime
-
-	The first time a clock is created, we store the "now date" and
-	do the computation with getTime-"now date"
-	It will wrap after 25 days, so it can be considerate safe
-
-
-    begin                : Fri Apr 20 2003
-    copyright            : (C) 2003 by mean
-    email                : fixounet at free.fr
- ***************************************************************************/
-
-/***************************************************************************
- *                                                                         *
- *   This program is free software; you can redistribute it and/or modify  *
- *   it under the terms of the GNU General Public License as published by  *
- *   the Free Software Foundation; either version 2 of the License, or     *
- *   (at your option) any later version.                                   *
- *                                                                         *
- ***************************************************************************/
-#include <stdio.h>
-#include <stdlib.h>
-#include <time.h>
-#include <math.h>
-#include <unistd.h>
-#include <sys/time.h>
-
-#include "config.h"
-
-#include "ADM_osSupport/ADM_debugID.h"
-#define MODULE_NAME MODULE_CLOCKnTIMELEFT
-#include "ADM_osSupport/ADM_debug.h"
-
-#include "avi_vars.h"
-
-
-
-static uint8_t inited=0;
-static struct timeval _itimev;
-static uint32_t getAbsTime( void );
-
-#ifndef ADM_WIN32
-#include "unistd.h"
-void ADM_usleep(unsigned long us)
-{
-  usleep(us);
-}
-#endif
-
-Clock::Clock( void )
-{
-	reset();
-}
-Clock::~Clock(  )
-{
-
-}
-uint32_t Clock::getElapsedMS(void )
-{
-   uint32_t ret = getAbsTime()-_startTime;
-	aprintf("Clock::getElapsedMS() -> %lu\n", ret);
-	return ret;
-}
-
-/** Note:
-*** * gettimeofday() returns seconds since 1.1.1970 in param1.tv_sec
-*** * because we need a AbsTime with milliseconds for benchmarking we have:
-***   max 0x7Fffffff (int32_t casted to uint32_t)
-***    => 2147483647 msec => 2147483 sec => Sun Jan 25 21:31:23 1970
-***   the return value will wrap all 25 days
-*** * workaround:
-***   1) start with an AbsTime of zero if object Clock() is created
-***   2) finish your work within 25 days ;-)
-**/
-uint32_t getAbsTime( void )
-{
-     struct timeval timev;     
-     TIMZ timez;
-
-    int32_t tt;
-
-    if(!inited)
-    {
-	gettimeofday(&_itimev, &timez);
-	inited=1;
-    }
-
-    gettimeofday(&timev, &timez);
-    tt = timev.tv_usec;
-    tt /= 1000;
-    tt += 1000 * (timev.tv_sec-_itimev.tv_sec);
-    aprintf("getAbsTime() -> %lu\n", tt&0x7Fffffff);
-    return (tt&0x7Fffffff);
-
-}
-uint8_t Clock::reset(void)
-{
-	_startTime=getAbsTime();
-}

Deleted: branches/avidemux_2.5_branch_mean/avidemux/ADM_osSupport/win32.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_osSupport/win32.cpp	2008-02-26 21:54:51 UTC (rev 3804)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_osSupport/win32.cpp	2008-02-27 19:50:36 UTC (rev 3805)
@@ -1,485 +0,0 @@
-#include "config.h"
-
-#ifdef ADM_WIN32
-#define WIN32_CLASH
-#include <stdio.h>
-#include <stdlib.h>
-
-#include "ADM_default.h"
-
-#include "windows.h"
-#include "io.h"
-#include "winsock2.h"
-#include "ADM_assert.h" 
-
-uint8_t win32_netInit(void);
-extern char *ADM_getBaseDir(void);
-
-void ADM_usleep(unsigned long us)
-{
-	Sleep(us/1000);
-}
-
-uint8_t win32_netInit(void)
-{
-WSADATA wsaData;
-	int iResult;
-		printf("Initializing WinSock\n");
-		iResult = WSAStartup(MAKEWORD(2,2), &wsaData);
-		if (iResult != NO_ERROR)
-		{
-			printf("Error at WSAStartup()\n");
-			return 0;
-		}	
-		printf("WinSock ok\n");
-		return 1;
-}
-
-#ifndef HAVE_GETTIMEOFDAY
-extern "C"
-{
-void gettimeofday(struct timeval *p, void *tz);
-}
-
-void gettimeofday(struct timeval *p, void *tz)
-{
-    unsigned long int sec;
-    SYSTEMTIME  tme;
-
-    GetSystemTime(&tme);
-
-    sec=tme.wSecond;
-    sec+=60*tme.wMinute;
-    sec+=60*60*tme.wHour;
-    
-	p->tv_sec=sec;
-	p->tv_usec=tme.wMilliseconds*1000;
-
-	return;
-}
-#endif
-
-int getpriority(int which, int who)
-{
-	unsigned int priorityClass;
-
-	ADM_assert(which == PRIO_PROCESS);
-	ADM_assert(who == 0);
-
-	priorityClass = GetPriorityClass(GetCurrentProcess());
-
-	switch (priorityClass)
-	{
-		case HIGH_PRIORITY_CLASS:
-			return -18;
-			break;
-		case ABOVE_NORMAL_PRIORITY_CLASS:
-			return -10;
-			break;
-		case NORMAL_PRIORITY_CLASS:
-			return 0;
-			break;
-		case BELOW_NORMAL_PRIORITY_CLASS:
-			return 10;
-			break;
-		case IDLE_PRIORITY_CLASS:
-			return 18;
-			break;
-		default:
-			ADM_assert(0);
-	}
-}
-
-int setpriority(int which, int who, int value)
-{
-	unsigned int priorityClass;
-
-	ADM_assert(which == PRIO_PROCESS);
-	ADM_assert(who == 0);
-	ADM_assert(value >= PRIO_MIN && value <= PRIO_MAX);
-
-	if (value >= -20 && value <= -16)
-	{
-		priorityClass = HIGH_PRIORITY_CLASS;
-	}
-	else if (value >= -15 && value <= -6)
-	{
-		priorityClass = ABOVE_NORMAL_PRIORITY_CLASS;
-	}
-	else if (value >= -5 && value <= 4)
-	{
-		priorityClass = NORMAL_PRIORITY_CLASS;
-	}
-	else if (value >= 6 && value <= 15)
-	{
-		priorityClass = BELOW_NORMAL_PRIORITY_CLASS;
-	}
-	else if (value >= 16 && value <= 20)
-	{
-		priorityClass = IDLE_PRIORITY_CLASS;
-	}
-
-	if (!SetPriorityClass(GetCurrentProcess(), priorityClass))
-	{
-		return -1;
-	}
-
-	return 0;
-}
-
-int shutdown_win32(void)
-{
-	HANDLE hToken;
-	TOKEN_PRIVILEGES tkp;
-
-	// Get a token for this process. 
-	if (!OpenProcessToken(GetCurrentProcess(), TOKEN_ADJUST_PRIVILEGES | TOKEN_QUERY, &hToken))
-	{
-		return -1;
-	}
-
-	// Get the LUID for the shutdown privilege.
-	LookupPrivilegeValue(NULL, SE_SHUTDOWN_NAME, &tkp.Privileges[0].Luid);
-
-	tkp.PrivilegeCount = 1;  // one privilege to set
-	tkp.Privileges[0].Attributes = SE_PRIVILEGE_ENABLED;
-
-	// Get the shutdown privilege for this process.
-	AdjustTokenPrivileges(hToken, FALSE, &tkp, 0, (PTOKEN_PRIVILEGES)NULL, 0);
-
-	if (GetLastError() != ERROR_SUCCESS)
-	{
-		return -1;
-	}
-
-	// Shut down the system and force all applications to close.
-	if (!ExitWindowsEx(EWX_POWEROFF | EWX_FORCE, SHTDN_REASON_FLAG_PLANNED))
-	{
-		return -1;
-	}
-
-	return 0;
-}
-
-#ifndef PRODUCT_BUSINESS
-#define PRODUCT_BUSINESS 0x00000006
-#endif
-
-#ifndef PRODUCT_BUSINESS_N
-#define PRODUCT_BUSINESS_N 0x00000010
-#endif
-
-#ifndef PRODUCT_HOME_BASIC
-#define PRODUCT_HOME_BASIC 0x00000002
-#endif
-
-#ifndef PRODUCT_HOME_BASIC_N
-#define PRODUCT_HOME_BASIC_N 0x00000005
-#endif
-
-#ifndef PRODUCT_HOME_PREMIUM
-#define PRODUCT_HOME_PREMIUM 0x00000003
-#endif 
-
-#ifndef PRODUCT_STARTER
-#define PRODUCT_STARTER 0x0000000B
-#endif
-
-#ifndef PRODUCT_ENTERPRISE
-#define PRODUCT_ENTERPRISE 0x00000004
-#endif 
-
-#ifndef PRODUCT_ULTIMATE
-#define PRODUCT_ULTIMATE 0x00000001
-#endif
-
-bool getWindowsVersion(char* version)
-{
-	int index = 0;
-	OSVERSIONINFOEX osvi = {};
-
-	osvi.dwOSVersionInfoSize = sizeof(OSVERSIONINFOEX);
-
-	if (!GetVersionEx((OSVERSIONINFO*)&osvi))
-		return false;
-
-	if (osvi.dwPlatformId != VER_PLATFORM_WIN32_NT)
-		return false;
-// Vista
-	if (osvi.dwMajorVersion == 6 && osvi.dwMinorVersion == 0)
-	{
-		if (osvi.wProductType == VER_NT_WORKSTATION)
-		{
-			index += sprintf(version + index, "Microsoft Windows Vista");
-
-			uint32_t productType = 0;
-
-			HMODULE hKernel = GetModuleHandle("KERNEL32.DLL");
-
-			if (hKernel)
-			{
-				typedef bool (*funcGetProductInfo)(uint32_t, uint32_t, uint32_t, uint32_t, uint32_t*);
-				funcGetProductInfo pGetProductInfo = (funcGetProductInfo)GetProcAddress(hKernel, "GetProductInfo"); 
-
-				if (pGetProductInfo)
-					pGetProductInfo(6, 0, 0, 0, &productType);
-	  
-				switch (productType)
-				{
-				case PRODUCT_STARTER:
-				{
-					index += sprintf(version + index, " Starter");
-					break;
-				}
-				case PRODUCT_HOME_BASIC_N:
-				{
-					index += sprintf(version + index, " Home Basic N");
-					break;
-				}
-				case PRODUCT_HOME_BASIC:
-				{
-					index += sprintf(version + index, " Home Basic");
-					break;
-				}
-				case PRODUCT_HOME_PREMIUM:
-				{
-					index += sprintf(version + index, " Home Premium");
-					break;
-				}
-				case PRODUCT_BUSINESS_N:
-				{
-					index += sprintf(version + index, " Business N");
-					break;
-				}
-				case PRODUCT_BUSINESS:
-				{
-					index += sprintf(version + index, " Business");
-					break;
-				}
-				case PRODUCT_ENTERPRISE:
-				{
-					index += sprintf(version + index, " Enterprise");
-					break;
-				}
-				case PRODUCT_ULTIMATE:
-				{
-					index += sprintf(version + index, " Ultimate");
-					break;
-				}
-				default:
-					break;
-				}
-			}
-		}
-		else if (osvi.wProductType == VER_NT_SERVER)
-		{
-			index += sprintf(version + index, "Microsoft Windows Server 2008");
-
-			if (osvi.wSuiteMask & VER_SUITE_DATACENTER)
-				index += sprintf(version + index, " Datacenter Edition");
-			else if (osvi.wSuiteMask & VER_SUITE_ENTERPRISE)
-				index += sprintf(version + index, " Enterprise Edition");
-			else if (osvi.wSuiteMask == VER_SUITE_BLADE)
-				index += sprintf(version + index, " Web Edition");
-			else
-				index += sprintf(version + index, " Standard Edition");
-		}
-	}
-// Windows Server 2003
-	else if (osvi.dwMajorVersion == 5 && osvi.dwMinorVersion == 2)
-	{
-		index += sprintf(version + index, "Microsoft Windows Server 2003");
-
-		if (GetSystemMetrics(SM_SERVERR2))
-			index += sprintf(version + index, " R2");
-
-		if (osvi.wSuiteMask & VER_SUITE_DATACENTER)
-			index += sprintf(version + index, " Datacenter Edition");
-		else if (osvi.wSuiteMask & VER_SUITE_ENTERPRISE)
-			index += sprintf(version + index, " Enterprise Edition");
-		else if (osvi.wSuiteMask == VER_SUITE_BLADE)
-			index += sprintf(version + index, " Web Edition");
-		else
-			index += sprintf(version + index, " Standard Edition");
-	}
-// Windows XP
-	else if (osvi.dwMajorVersion == 5 && osvi.dwMinorVersion == 1)
-	{
-		index += sprintf(version + index, "Microsoft Windows XP");
-
-		if (GetSystemMetrics(SM_MEDIACENTER))
-			index += sprintf(version + index, " Media Center Edition");
-		else if (GetSystemMetrics(SM_STARTER))
-			index += sprintf(version + index, " Starter Edition");
-		else if (GetSystemMetrics(SM_TABLETPC))
-			index += sprintf(version + index, " Tablet PC Edition");
-		else if (osvi.wSuiteMask & VER_SUITE_PERSONAL)
-			index += sprintf(version + index, " Home Edition");
-		else
-			index += sprintf(version + index, " Professional");
-	}
-// Windows 2000
-	else if (osvi.dwMajorVersion == 5 && osvi.dwMinorVersion == 0)
-	{
-		index += sprintf(version + index, "Microsoft Windows 2000");
-
-		if (osvi.wProductType == VER_NT_WORKSTATION)
-		{
-			index += sprintf(version + index, " Professional");
-		}
-		else if (osvi.wProductType == VER_NT_SERVER)
-		{
-			if (osvi.wSuiteMask & VER_SUITE_DATACENTER)
-				index += sprintf(version + index, " Datacenter Server");
-			else if (osvi.wSuiteMask & VER_SUITE_ENTERPRISE)
-				index += sprintf(version + index, " Advanced Server");
-			else
-				index += sprintf(version + index, " Server");
-		}
-	}
-// Windows NT 4
-	else if (osvi.dwMajorVersion == 4)
-	{
-		index += sprintf(version + index, "Microsoft Windows NT 4");
-
-		if (osvi.wProductType == VER_NT_WORKSTATION)
-		{
-			index += sprintf(version + index, " Workstation");
-		}
-		else if (osvi.wProductType == VER_NT_SERVER)
-		{
-			if (osvi.wSuiteMask & VER_SUITE_ENTERPRISE)
-				index += sprintf(version + index, " Server, Enterprise Edition");
-			else
-				index += sprintf(version + index, " Server");
-		}
-	}
-	else
-	{
-		index += sprintf(version + index, "Microsoft Windows");
-	}
-
-// Service pack and full version info
-	if (strlen(osvi.szCSDVersion) > 0)
-	{
-		index += sprintf(version + index, " %s", osvi.szCSDVersion);
-	}
-
-	index += sprintf(version + index, " (%d.%d.%d", osvi.dwMajorVersion, osvi.dwMinorVersion, osvi.dwBuildNumber & 0xFFFF);
-
-// 64-bit Windows
-	bool isWow64 = false;
-	HMODULE hKernel = GetModuleHandle("kernel32.dll");
-
-	if (hKernel)
-	{
-		typedef bool (*funcIsWow64Process)(void*, bool*);  
-
-	    funcIsWow64Process pIsWow64Process = (funcIsWow64Process)GetProcAddress(hKernel, "IsWow64Process"); 
-
-	    if (pIsWow64Process)
-	    {
-			pIsWow64Process(GetCurrentProcess(), &isWow64);
-		}
-	}
-
-	if (isWow64)
-		index += sprintf(version + index, "; 64-bit");
-	else
-		index += sprintf(version + index, "; 32-bit");
-
-	index += sprintf(version + index, ")");
-	
-	return true;
-}
-
-#define MONITOR_DEFAULTTONEAREST    0x00000002
-
-void getWorkingArea(uint32_t *width, uint32_t *height)
-{
-	typedef void* (WINAPI *MonitorFromWindow)(HWND hwnd, uint32_t dwFlags);
-	typedef bool (WINAPI *GetMonitorInfo)(void *hMonitor, LPMONITORINFO lpmi);
-
-	static HMODULE user32 = GetModuleHandle("user32.dll");
-	static MonitorFromWindow pMonitorFromWindow = (MonitorFromWindow)GetProcAddress(user32, "MonitorFromWindow");
-	static GetMonitorInfo pGetMonitorInfo = (GetMonitorInfo)GetProcAddress(user32, "GetMonitorInfoA");
-
-	if (pMonitorFromWindow == NULL)
-	{
-		RECT rect;
-
-		// Required for NT4 - no multi-monitor support
-		SystemParametersInfo(SPI_GETWORKAREA, 0, &rect, 0);
-
-		*width = rect.right - rect.left;
-		*height = rect.bottom - rect.top;
-	}
-	else
-	{
-		void *hMonitor = pMonitorFromWindow(GetForegroundWindow(), MONITOR_DEFAULTTONEAREST);
-
-		MONITORINFO monitorInfo;
-
-		monitorInfo.cbSize = sizeof(MONITORINFO);
-		pGetMonitorInfo(hMonitor, &monitorInfo);
-
-		*width = monitorInfo.rcWork.right - monitorInfo.rcWork.left;
-		*height = monitorInfo.rcWork.bottom - monitorInfo.rcWork.top;
-	}
-}
-
-void redirectStdoutToFile(void)
-{
-	// Don't redirect stdout and stderr if SDL hasn't already hijacked it.
-	// This allows us to optionally compile all EXEs as console applications
-	// so the output can be printed to the terminal for debugging purposes.
-
-#ifdef USE_SDL
-	// Close SDL generated logs
-	fclose(stdout);
-	fclose(stderr);
-
-	// Briefly redirect to console
-	freopen("CON", "w", stdout);
-	freopen("CON", "w", stderr);
-
-	// Remove SDL logs to avoid confusion
-	char path[MAX_PATH];
-	char stdoutPath[MAX_PATH];
-	char stderrPath[MAX_PATH];
-	DWORD pathlen = GetModuleFileName(NULL, path, MAX_PATH);
-
-	while (pathlen > 0 && path[pathlen] != '\\')
-		pathlen--;
-
-	path[pathlen] = '\0';
-
-	strcpy(stdoutPath, path);
-	strcat(stdoutPath, "\\stdout.txt");
-	strcpy(stderrPath, path);
-	strcat(stderrPath, "\\stderr.txt");
-
-	remove(stdoutPath);
-	remove(stderrPath);
-
-	// Redirect output to log file in the user's profile directory
-	const char* logFile = "admlog.txt";
-	char* baseDir = ADM_getBaseDir();
-	char *logPath = new char[strlen(baseDir) + 2 + strlen(logFile)];
-	FILE* stream;
-
-	strcpy(logPath, baseDir);
-	strcat(logPath, "/");
-	strcat(logPath, logFile);
-
-	stream = freopen(logPath, "w", stdout);
-	*stderr = *stream;
-
-	// Line buffering
-	setvbuf(stdout, NULL, _IOLBF, BUFSIZ); 
-	setvbuf(stderr, NULL, _IOLBF, BUFSIZ);
-
-	delete[] logPath;
-#endif
-}
-#endif



From mean at mail.berlios.de  Wed Feb 27 20:50:44 2008
From: mean at mail.berlios.de (mean at BerliOS)
Date: Wed, 27 Feb 2008 20:50:44 +0100
Subject: [Avidemux-svn-commit] r3806 - in
	branches/avidemux_2.5_branch_mean/avidemux: . ADM_core
	ADM_core/include ADM_core/src ADM_osSupport
Message-ID: <200802271950.m1RJoijs008763@sheep.berlios.de>

Author: mean
Date: 2008-02-27 20:50:43 +0100 (Wed, 27 Feb 2008)
New Revision: 3806

Added:
   branches/avidemux_2.5_branch_mean/avidemux/ADM_osSupport/ADM_crashHook.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_osSupport/ADM_fileio.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_osSupport/ADM_misc.cpp
Removed:
   branches/avidemux_2.5_branch_mean/avidemux/ADM_core/src/ADM_fileio.cpp
Modified:
   branches/avidemux_2.5_branch_mean/avidemux/ADM_core/CMakeLists.txt
   branches/avidemux_2.5_branch_mean/avidemux/ADM_core/include/ADM_assert.h
   branches/avidemux_2.5_branch_mean/avidemux/ADM_core/src/ADM_cpuCap.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_core/src/ADM_crashdump.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_core/src/ADM_misc.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_core/src/TLK_clock.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_osSupport/ADM_quota.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_osSupport/CMakeLists.txt
   branches/avidemux_2.5_branch_mean/avidemux/CMakeLists.txt
   branches/avidemux_2.5_branch_mean/avidemux/main.cpp
Log:
[Core] Split ADM_core to be autonomous


Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_core/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_core/CMakeLists.txt	2008-02-27 19:50:36 UTC (rev 3805)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_core/CMakeLists.txt	2008-02-27 19:50:43 UTC (rev 3806)
@@ -1,12 +1 @@
-subdirs(PREORDER ADM_NONE)
-subdirs(PREORDER ADM_commonUI)
-
-if(GTK_FOUND)
-subdirs(PREORDER ADM_GTK)
-endif(GTK_FOUND)
-
-if(QT4_FOUND)
-subdirs(PREORDER ADM_QT4)
-endif(QT4_FOUND)
-
-include_directories(ADM_commonUI)
+subdirs(PREORDER src)

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_core/include/ADM_assert.h
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_core/include/ADM_assert.h	2008-02-27 19:50:36 UTC (rev 3805)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_core/include/ADM_assert.h	2008-02-27 19:50:43 UTC (rev 3806)
@@ -13,6 +13,12 @@
 #ifdef __cplusplus
 extern "C" {
 #endif
+
+typedef void *ADM_saveFunction(void);
+typedef void *ADM_fatalFunction(const char *title, const char *info);
+
+void ADM_setCrashHook(ADM_saveFunction *save, ADM_fatalFunction *fatal);
+
 void   ADM_backTrack(int lineno,const char *file);
 size_t ADM_fread (void *ptr, size_t size, size_t n, FILE *sstream);
 size_t ADM_fwrite (void *ptr, size_t size, size_t n, FILE *sstream);

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_core/src/ADM_cpuCap.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_core/src/ADM_cpuCap.cpp	2008-02-27 19:50:36 UTC (rev 3805)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_core/src/ADM_cpuCap.cpp	2008-02-27 19:50:43 UTC (rev 3806)
@@ -22,8 +22,10 @@
 #include "ADM_default.h"
 
 
-#include "prefs.h"
+//#include "prefs.h"
 
+uint32_t CpuCaps::myCpuCaps=0;
+uint32_t CpuCaps::myCpuMask=0xffffffff;
 /* Cpu caps interface to other libs */
 extern "C"{ 
 	int ADM_lavcodec_mm_support(void);
@@ -58,7 +60,7 @@
 	printf("[cpuCaps]Checking CPU capabilities\n");
 	myCpuCaps=0;
 	myCpuMask=0xffffffff;
-	prefs->get(FEATURE_CPU_CAPS,&myCpuMask);
+	// FIXME prefs->get(FEATURE_CPU_CAPS,&myCpuMask);
 
 #if defined(ARCH_X86) || defined(ARCH_X86_64)
 int rval = 0;

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_core/src/ADM_crashdump.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_core/src/ADM_crashdump.cpp	2008-02-27 19:50:36 UTC (rev 3805)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_core/src/ADM_crashdump.cpp	2008-02-27 19:50:43 UTC (rev 3806)
@@ -35,15 +35,21 @@
 
 
 #include "ADM_toolkit/toolkit.hxx"
-#include "ADM_userInterfaces/ADM_commonUI/DIA_factory.h"
-#include "ADM_editor/ADM_edit.hxx"
-extern ADM_Composer *video_body;
 
 #define CRASH_FILE "crash.js"
+// Our callback to give UI formatted informations....
 
-static void saveCrashProject(void);
-extern char *ADM_getBaseDir(void);
-extern void A_parseECMAScript(const char *name);
+static ADM_saveFunction *mysaveFunction=NULL;
+static ADM_fatalFunction *myFatalFunction=NULL;
+/**
+        \fn ADM_setCrashHook
+        \brief install crash handlers (save + display)
+*/
+void ADM_setCrashHook(ADM_saveFunction *save, ADM_fatalFunction *fatal)
+{
+        mysaveFunction=save;
+        myFatalFunction=fatal;
+}
 
 #ifdef __APPLE__
 void installSigHandler() {}
@@ -51,10 +57,10 @@
 void ADM_backTrack(int lineno,const char *file)
 {
 	char bfr[1024];
-	saveCrashProject();
+	if(mysaveFunction) mysaveFunction();
 	snprintf(bfr,1024,"Assert Failed at file %s, line %d\n",file,lineno);
-	GUI_Error_HIG("Fatal Error",bfr);
-	assert(0);
+        if(myFatalFunction) myFatalFunction("Crash",bfr);
+        exit(-1);
 }
 #elif defined(WIN32)
 typedef struct STACK_FRAME
@@ -205,19 +211,17 @@
 {	
 	fflush(stderr);
 	fflush(stdout);
-	saveCrashProject();
+	if(mysaveFunction) mysaveFunction();
 
-	GUI_Error_HIG(QT_TR_NOOP("Fatal Error"),QT_TR_NOOP("A fatal error has occurred.\n\nClick OK to generate debug information. This may take a few minutes to complete."));
+        if(myFatalFunction) myFatalFunction ("Crash","Press ok to build crash info");
+	
 
 	void* currentProcessId = GetCurrentProcess();
 
 	SymInitialize(currentProcessId, NULL, TRUE);
 	dumpBackTrace(currentProcessId);
 	SymCleanup(currentProcessId);
-
-	printf("Assert failed at file %s, line %d\n\n",file,lineno);
-
-	exit(1);
+	exit(-11);
 }
 
 EXCEPTION_DISPOSITION exceptionHandler(struct _EXCEPTION_RECORD* pExceptionRec, void* pEstablisherFrame, struct _CONTEXT* pContextRecord, void* pDispatcherContext)
@@ -231,9 +235,9 @@
 
 	running=1;
 
-	saveCrashProject();
+	if(mysaveFunction) mysaveFunction();
 
-	GUI_Error_HIG(QT_TR_NOOP("Fatal Error"),QT_TR_NOOP("A fatal error has occurred.\n\nClick OK to generate debug information. This may take a few minutes to complete."));
+        if(myFatalFunction) myFatalFunction ("Crash","Press ok to build crash info");
 
 	void* currentProcessId = GetCurrentProcess();
 
@@ -248,6 +252,7 @@
 	exit(1);
 }
 #else
+// Linux
 #include <signal.h>
 #include <execinfo.h>
 void sig_segfault_handler(int signo);
@@ -255,7 +260,6 @@
 {
     signal(11, sig_segfault_handler); // show stacktrace on default
 }
-extern void ADMImage_stat( void );
 
 static int lenCount(uint8_t *start,uint8_t *end,int *d)
 {
@@ -368,7 +372,7 @@
      char **functions;
      int count, i;
       
-     saveCrashProject();
+	if(mysaveFunction) mysaveFunction();
       printf("\n*********** BACKTRACK **************\n");
       count = backtrace(stack, 20);
       functions = backtrace_symbols(stack, count);
@@ -380,70 +384,8 @@
             
          }
       printf("*********** BACKTRACK **************\n");
-     // Now use dialogFactory
-      char bfr[30];
-      snprintf(bfr,30,"Line:%u",lineno);
-      diaElemReadOnlyText *txt[count+1];
-      txt[0]=new diaElemReadOnlyText(bfr,file);
-      
-      for(i=0;i<count;i++)
-          txt[i+1]=new diaElemReadOnlyText(functions[i],"Function:");
-      const char *title="Crash BackTrace";
-      if(lineno) title="Assert failed";
-      diaFactoryRun(title,count+1,(diaElem **)txt);
-      
-      //
-     printf("Memory stat:\n");
-     ADMImage_stat();
-
-     exit(1); // _exit(1) ???
+      if(myFatalFunction) myFatalFunction("Crash",""); // FIXME
+      exit(-1); // _exit(1) ???
 }
 #endif
-/**
-    \fn saveCrashProject
-    \brief Try to save the current project, useful in case of crash
-*/
-void saveCrashProject(void)
-{
-  char *baseDir=ADM_getBaseDir();
-  char *name=CRASH_FILE;
-  static int crashCount=0;
-  if(crashCount) return ; // avoid endless looping
-  crashCount++;
-  char *where=new char[strlen(baseDir)+strlen(name)+2];
-  strcpy(where,baseDir);
-  strcat(where,"/");
-  strcat(where,name);
-  printf("Saving crash file to %s\n",where);
-  video_body->saveAsScript (where, NULL);
-  delete[] where;
-}
-/**
-    \fn checkCrashFile
-    \brief Check if there i a crash file
-*/
-
-void checkCrashFile(void)
-{
-  char *baseDir=ADM_getBaseDir();
-  char *name=CRASH_FILE;
-  static int crashCount=0;
-  char *where=new char[strlen(baseDir)+strlen(name)+2];
-  strcpy(where,baseDir);
-  strcat(where,"/");
-  strcat(where,name);
-  if(ADM_fileExist(where))
-  {
-    if(GUI_Confirmation_HIG(QT_TR_NOOP("Load it"),QT_TR_NOOP("Crash file"),
-       QT_TR_NOOP("I have detected a crash file. \nDo you want to load it  ?\n(It will be deleted in all cases, you should save it if you want to keep it)")))
-    {
-       A_parseECMAScript(where);
-    }
-    unlink(where);
-  }else
-  {
-    printf("No crash file (%s)\n",where); 
-  }
-  delete [] where;
-}
 //EOF

Deleted: branches/avidemux_2.5_branch_mean/avidemux/ADM_core/src/ADM_fileio.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_core/src/ADM_fileio.cpp	2008-02-27 19:50:36 UTC (rev 3805)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_core/src/ADM_fileio.cpp	2008-02-27 19:50:43 UTC (rev 3806)
@@ -1,410 +0,0 @@
-/***************************************************************************
-                    
-    copyright            : (C) 2006 by mean
-    email                : fixounet at free.fr
- ***************************************************************************/
-
-/***************************************************************************
- *                                                                         *
- *   This program is free software; you can redistribute it and/or modify  *
- *   it under the terms of the GNU General Public License as published by  *
- *   the Free Software Foundation; either version 2 of the License, or     *
- *   (at your option) any later version.                                   *
- *                                                                         *
- ***************************************************************************/
-#include "config.h" 
-#include <stdio.h>
-#include <stdlib.h>
-#include <string.h>
-    
-#include <dirent.h>
-#include <errno.h>
-#include <sys/stat.h>
-
-#include <unistd.h>
-
-#ifdef WIN32
-#include <glib.h>
-#endif
-
-#include "ADM_default.h"
-
-
-
-#include "ADM_toolkit/filesel.h"
-#include "ADM_toolkit/toolkit.hxx"
-
-#include "ADM_assert.h"
-#undef fread
-#undef fwrite
-#undef fopen
-#undef fclose
-
-size_t ADM_fread (void *ptr, size_t size, size_t n, FILE *sstream)
-{
-  return fread(ptr,size,n,sstream); 
-  
-}
-
-size_t ADM_fwrite (void *ptr, size_t size, size_t n, FILE *sstream)
-{
-  return fwrite(ptr,size,n,sstream); 
-  
-}
-FILE  *ADM_fopen (const char *file, const char *mode)
-{
-  FILE *f;
-
-#ifndef ADM_WIN32
-  return fopen(file,mode); 
-#else
-  gchar *retval = g_locale_from_utf8 (file, -1, NULL, NULL, NULL);
-  f=fopen(retval,mode);
-  g_free (retval);
-  return f;  
-#endif
-}
-
-int    ADM_fclose (FILE *file)
-{
-  return fclose(file); 
-}
-//*****************************
-static char basedir[1024]={0};
-static char jobdir[1024]={0};
-static char customdir[1024]={0};
-int baseDirDone=0;
-int jobDirDone=0;
-int customDirDone=0;
-#ifdef ADM_WIN32
-const char *ADM_DIR_NAME="\\avidemux";
-#else
-const char *ADM_DIR_NAME="/.avidemux";
-#endif
-/*
-
-*/
-/*
-      Get the  directory where jobs are stored
-******************************************************/
-
-char *ADM_getCustomDir(void)
-{
-  if(customDirDone) return customdir;
-
-  char *rootDir;
-  rootDir=ADM_getBaseDir();
-  strncpy(customdir,rootDir,1023);
-#if defined(ADM_WIN32)
-  strcat(customdir,"\\custom"); 
-#else
-  strcat(customdir,"/custom");
-#endif
-  if(!ADM_mkdir(customdir))
-  {
-    GUI_Error_HIG(QT_TR_NOOP("Oops"),QT_TR_NOOP("can't create custom directory (%s)."),customdir);
-                return NULL;
-  }
-  customDirDone=1;
-  return customdir;
-}
-/*
-      Get the  directory where jobs are stored
-******************************************************/
-
-char *ADM_getJobDir(void)
-{
-  if(jobDirDone) return jobdir;
-
-  char *rootDir;
-  rootDir=ADM_getBaseDir();
-  strncpy(jobdir,rootDir,1023);
-#if defined(ADM_WIN32)
-  strcat(jobdir,"\\jobs"); 
-#else
-  strcat(jobdir,"/jobs");
-#endif
-  if(!ADM_mkdir(jobdir))
-  {
-    GUI_Error_HIG(QT_TR_NOOP("Oops"),QT_TR_NOOP("can't create job directory (%s)."),jobdir);
-                return NULL;
-  }
-  jobDirDone=1;
-  return jobdir;
-}
-/*
-      Get the root directory for .avidemux stuff
-******************************************************/
-char *ADM_getBaseDir(void)
-{
-char *dirname=NULL;
-DIR *dir=NULL;
-char *home;
-//
-        if(baseDirDone) return basedir;
-// Get the base directory
-#if defined(ADM_WIN32)
-        if( ! (home=getenv("USERPROFILE")) )
-        {
-          GUI_Error_HIG(QT_TR_NOOP("Oops"),QT_TR_NOOP("can't determine $USERPROFILE."));
-                    home="c:\\";
-        }
-
-#else
-        if( ! (home=getenv("HOME")) )
-        {
-          GUI_Error_HIG(QT_TR_NOOP("Oops"),QT_TR_NOOP("can't determine $HOME."));
-                return NULL;
-        }
-#endif
-
- // Try to open the .avidemux directory
-        dirname=new char[strlen(home)+strlen(ADM_DIR_NAME)+2];
-        strcpy(dirname,home);
-        strcat(dirname,ADM_DIR_NAME);
-        if(!ADM_mkdir(dirname))
-        {
-          GUI_Error_HIG(QT_TR_NOOP("Oops"),QT_TR_NOOP("Cannot create the .avidemux directory"), NULL);
-                        delete [] dirname;
-                        return NULL;
-        }
-        delete [] dirname;
-
-        // Now built the filename
-        strncpy(basedir,home,1023);
-        strncat(basedir,ADM_DIR_NAME,1023-strlen(basedir));
-        baseDirDone=1;
-        printf("Using %s as base directory for prefs/jobs/...\n",basedir);
-        return basedir;
-}
-/*----------------------------------------
-      Create a directory
-      If it already exists, do nothing
-------------------------------------------*/
-uint8_t ADM_mkdir(const char *dirname)
-{
-DIR *dir=NULL;
-              // Check it already exists ?
-              dir=opendir(dirname);
-              if(dir)
-              { 
-                  printf("Directory %s exists.Good.\n",dirname);
-                  closedir(dir);
-                  return 1;
-              }
-#if defined(ADM_WIN32)
-                if(mkdir(dirname))
-                {
-                    printf("Oops: mkdir failed on %s\n",dirname);   
-                    return 0;
-                }
-                
-#else    
-                char *sys=new char[strlen(dirname)+strlen("mkdir ")+2];
-                strcpy(sys,"mkdir ");
-                strcat(sys,dirname);
-                printf("Creating dir :%s\n",sys);
-                system(sys);
-                delete [] sys;
-#endif		
-              if((dir=opendir(dirname))==NULL)
-                {
-                        return 0;
-                }
-              closedir(dir); 
-              return 1;
-}
-uint8_t buildDirectoryContent(uint32_t *outnb,const char *base, char *jobName[],int maxElems,const char *ext)
-{
-
-DIR *dir;
-struct dirent *direntry;
-int dirmax=0,len;
-int extlen=strlen(ext);
-    ADM_assert(extlen);
-    
-         dir=opendir(base);
-        if(!dir)
-        {
-                return 0;
-        }
-        while((direntry=readdir(dir)))
-        {
-                len=strlen(direntry->d_name);
-                if(len<(extlen+1)) continue;
-                int xbase=len-extlen;
-                if(memcmp(direntry->d_name+xbase,ext,extlen))
-                //if(direntry->d_name[len-1]!='s' || direntry->d_name[len-2]!='j' || direntry->d_name[len-3]!='.')
-                {
-                        printf("ignored:%s\n",direntry->d_name);
-                        continue;
-                }
-                jobName[dirmax]=(char *)ADM_alloc(strlen(base)+strlen(direntry->d_name)+2);
-                strcpy(jobName[dirmax],base);
-                strcat(jobName[dirmax],"/");
-                strcat(jobName[dirmax],direntry->d_name);
-                dirmax++;
-                if(dirmax>=maxElems)
-                {
-                        printf("[jobs]: Max # of jobs exceeded\n");
-                         break;
-                }
-        }
-        closedir(dir);
-        *outnb=dirmax;
-        return 1;
-}
-//------------------------------------------------------------------
-
-/*
-
-** note: it modifies it's first argument
-*/
-void simplify_path(char **buf){
-   unsigned int last1slash = 0;
-   unsigned int last2slash = 0;
-	while( !strncmp(*buf,"/../",4) )
-		memmove(*buf,*buf+3,strlen(*buf+3)+1);
-	for(unsigned int i=0;i<strlen(*buf)-2;i++)
-		while( !strncmp(*buf+i,"/./",3) )
-			memmove(*buf+i,*buf+i+2,strlen(*buf+i+2)+1);
-	for(unsigned int i=0;i<strlen(*buf)-3;i++){
-		if( *(*buf+i) == '/' ){
-			last2slash = last1slash;
-			last1slash = i;
-		}
-		if( !strncmp(*buf+i,"/../",4) ){
-			memmove(*buf+last2slash,*buf+i+3,strlen(*buf+i+3)+1);
-			return simplify_path(buf);
-		}
-	}
-}
-
-//
-//	Make it absolute
-//
-char *PathCanonize(const char *tmpname)
-{
-	char path[300];
-	char *out ;
-
-	if( ! getcwd(path,300) ){
-		fprintf(stderr,"\ngetcwd() failed with: %s (%u)\n",
-		               strerror(errno), errno );
-		path[0] = '\0';
-	}
-	if(!tmpname || tmpname[0]==0)
-	{
-		out=new char [strlen(path)+2];
-		strcpy(out,path);
-#ifndef ADM_WIN32		
-		strcat(out,"/");
-#else
-		strcat(out,"\\");
-#endif	
-		printf("\n Canonizing null string ??? (%s)\n",out);
-	}else if(tmpname[0]=='/'
-#if defined(ADM_WIN32)
-		|| tmpname[1]==':'
-#endif	
-	
-	)
-	{
-		out=new char[strlen(tmpname)+1];
-		strcpy(out,tmpname);
-		return out;
-	}else{
-		out=new char[strlen(path)+strlen(tmpname)+6];
-		strcpy(out,path);
-#ifndef ADM_WIN32		
-		strcat(out,"/");
-#else
-		strcat(out,"\\");
-#endif		
-		strcat(out,tmpname);
-	}
-	simplify_path(&out);
-	return out;
-}
-/*
-	Strip the path and only keep the name
-
-*/
-void		PathStripName(char *str)
-{
-		int len=strlen(str);
-		if(len<=1) return;
-		len--;
-#ifndef ADM_WIN32		
-		while( *(str+len)!='/' && len)
-#else
-	while( *(str+len)!='\\' && len)
-#endif		
-		{
-			 *(str+len)=0;
-			 len--;
-		}
-}
-
-/*
-	Get the filename without path
-
-*/
-const char *GetFileName(const char *str)
-{
-	char *filename;
-        char *filename2;
-#ifndef ADM_WIN32		
-	filename = strrchr(str, '/');
-        
-#else
-	filename = strrchr(str, '\\');
-        filename2 = strrchr(str, '/');
-        if(filename2 && filename)
-        {
-          if(filename2>filename) filename=filename2; 
-        }
-#endif
-	if (filename)
-		return filename+1;
-	else
-		return str;
-}
-
-/*
-	Split patch into absolute path+name and extention
-
-*/
-void PathSplit(char *str, char **root, char **ext)
-{
-	char *full;
-	uint32_t l;
-
-		full=PathCanonize(str);
-		// Search the last .
-		l=strlen(full);
-		l--;
-		ADM_assert(l>0);
-		while( *(full+l)!='.' && l) l--;
-		if(!l || l==(strlen(full)-1))
-		{
-			if(l==(strlen(full)-1))
-			{
-				*(full+l)=0;  // remove trailing .
-			}
-			*ext=new char[2];
-			*root=full;
-			strcpy(*ext,"");
-			return ;
-		}
-		// else we do get an extension
-		// starting at l+1
-		uint32_t suff;
-
-		suff=strlen(full)-l-1;
-		*ext=new char[suff+1];
-		strcpy(*ext,full+l+1);
-		*(full+l)=0;
-		*root=full;
-		return ;
-}

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_core/src/ADM_misc.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_core/src/ADM_misc.cpp	2008-02-27 19:50:36 UTC (rev 3805)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_core/src/ADM_misc.cpp	2008-02-27 19:50:43 UTC (rev 3806)
@@ -34,7 +34,8 @@
 #include "ADM_assert.h"
 
 #include "ADM_video/ADM_vidMisc.h"
-
+#undef fopen
+#undef fclose
 //
 //    Sleep for n ms
 //
@@ -203,38 +204,7 @@
       return 1;
 }
 
-char* ms2timedisplay(uint32_t ms)
-{
-	uint32_t mm, ss;
-	static char string[20];
 
-	mm = (uint32_t)floor(ms / 60000.);
-	
-	if (mm > 1)
-	{
-		sprintf(string, QT_TR_NOOP("%lu minutes"), mm);
-	}
-	else if (mm == 1)
-	{
-		sprintf(string, QT_TR_NOOP("%lu minute"), mm);
-	}
-	else
-	{
-		ss = (uint32_t)floor(ms / 1000.);
-
-		if (ss == 1)
-		{
-			sprintf(string, QT_TR_NOOP("%lu second"), ss);
-		}
-		else
-		{
-			sprintf(string, QT_TR_NOOP("%lu seconds"), ss);
-		}
-	}
-
-	return string;
-}
-
 // Convert everything to lowercase
 void  LowerCase(char *string)
 {

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_core/src/TLK_clock.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_core/src/TLK_clock.cpp	2008-02-27 19:50:36 UTC (rev 3805)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_core/src/TLK_clock.cpp	2008-02-27 19:50:43 UTC (rev 3806)
@@ -66,7 +66,7 @@
 uint32_t Clock::getElapsedMS(void )
 {
    uint32_t ret = getAbsTime()-_startTime;
-	aprintf("Clock::getElapsedMS() -> %lu\n", ret);
+	//aprintf("Clock::getElapsedMS() -> %lu\n", ret);
 	return ret;
 }
 
@@ -97,7 +97,7 @@
     tt = timev.tv_usec;
     tt /= 1000;
     tt += 1000 * (timev.tv_sec-_itimev.tv_sec);
-    aprintf("getAbsTime() -> %lu\n", tt&0x7Fffffff);
+    //aprintf("getAbsTime() -> %lu\n", tt&0x7Fffffff);
     return (tt&0x7Fffffff);
 
 }

Added: branches/avidemux_2.5_branch_mean/avidemux/ADM_osSupport/ADM_crashHook.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_osSupport/ADM_crashHook.cpp	2008-02-27 19:50:36 UTC (rev 3805)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_osSupport/ADM_crashHook.cpp	2008-02-27 19:50:43 UTC (rev 3806)
@@ -0,0 +1,95 @@
+/***************************************************************************
+  Try to display interesting crash dump
+
+    copyright            : (C) 2007 by mean, (C) 2007 Gruntster
+    email                : fixounet at free.fr
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+
+#include "config.h"
+
+#include <stdio.h>
+#include <stdlib.h>
+#include <stdarg.h>
+#include <string.h>
+#include "ADM_default.h"
+#include <unistd.h>
+
+#include <math.h>
+#include <ADM_assert.h>
+
+#if defined(ADM_WIN32)
+#define WIN32_CLASH
+#include <windows.h>
+#include <excpt.h>
+#include <imagehlp.h>
+#endif
+
+
+#include "ADM_toolkit/toolkit.hxx"
+#include "ADM_userInterfaces/ADM_commonUI/DIA_factory.h"
+#include "ADM_editor/ADM_edit.hxx"
+extern ADM_Composer *video_body;
+
+#define CRASH_FILE "crash.js"
+
+static void saveCrashProject(void);
+extern char *ADM_getBaseDir(void);
+extern void A_parseECMAScript(const char *name);
+
+/**
+    \fn saveCrashProject
+    \brief Try to save the current project, useful in case of crash
+*/
+void saveCrashProject(void)
+{
+  char *baseDir=ADM_getBaseDir();
+  char *name=CRASH_FILE;
+  static int crashCount=0;
+  if(crashCount) return ; // avoid endless looping
+  crashCount++;
+  char *where=new char[strlen(baseDir)+strlen(name)+2];
+  strcpy(where,baseDir);
+  strcat(where,"/");
+  strcat(where,name);
+  printf("Saving crash file to %s\n",where);
+  video_body->saveAsScript (where, NULL);
+  delete[] where;
+}
+/**
+    \fn checkCrashFile
+    \brief Check if there i a crash file
+*/
+
+void checkCrashFile(void)
+{
+  char *baseDir=ADM_getBaseDir();
+  char *name=CRASH_FILE;
+  static int crashCount=0;
+  char *where=new char[strlen(baseDir)+strlen(name)+2];
+  strcpy(where,baseDir);
+  strcat(where,"/");
+  strcat(where,name);
+  if(ADM_fileExist(where))
+  {
+    if(GUI_Confirmation_HIG(QT_TR_NOOP("Load it"),QT_TR_NOOP("Crash file"),
+       QT_TR_NOOP("I have detected a crash file. \nDo you want to load it  ?\n(It will be deleted in all cases, you should save it if you want to keep it)")))
+    {
+       A_parseECMAScript(where);
+    }
+    unlink(where);
+  }else
+  {
+    printf("No crash file (%s)\n",where); 
+  }
+  delete [] where;
+}
+//EOF

Copied: branches/avidemux_2.5_branch_mean/avidemux/ADM_osSupport/ADM_fileio.cpp (from rev 3805, branches/avidemux_2.5_branch_mean/avidemux/ADM_core/src/ADM_fileio.cpp)
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_core/src/ADM_fileio.cpp	2008-02-27 19:50:36 UTC (rev 3805)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_osSupport/ADM_fileio.cpp	2008-02-27 19:50:43 UTC (rev 3806)
@@ -0,0 +1,410 @@
+/***************************************************************************
+                    
+    copyright            : (C) 2006 by mean
+    email                : fixounet at free.fr
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+#include "config.h" 
+#include <stdio.h>
+#include <stdlib.h>
+#include <string.h>
+    
+#include <dirent.h>
+#include <errno.h>
+#include <sys/stat.h>
+
+#include <unistd.h>
+
+#ifdef WIN32
+#include <glib.h>
+#endif
+
+#include "ADM_default.h"
+
+
+
+#include "ADM_toolkit/filesel.h"
+#include "ADM_toolkit/toolkit.hxx"
+
+#include "ADM_assert.h"
+#undef fread
+#undef fwrite
+#undef fopen
+#undef fclose
+
+size_t ADM_fread (void *ptr, size_t size, size_t n, FILE *sstream)
+{
+  return fread(ptr,size,n,sstream); 
+  
+}
+
+size_t ADM_fwrite (void *ptr, size_t size, size_t n, FILE *sstream)
+{
+  return fwrite(ptr,size,n,sstream); 
+  
+}
+FILE  *ADM_fopen (const char *file, const char *mode)
+{
+  FILE *f;
+
+#ifndef ADM_WIN32
+  return fopen(file,mode); 
+#else
+  gchar *retval = g_locale_from_utf8 (file, -1, NULL, NULL, NULL);
+  f=fopen(retval,mode);
+  g_free (retval);
+  return f;  
+#endif
+}
+
+int    ADM_fclose (FILE *file)
+{
+  return fclose(file); 
+}
+//*****************************
+static char basedir[1024]={0};
+static char jobdir[1024]={0};
+static char customdir[1024]={0};
+int baseDirDone=0;
+int jobDirDone=0;
+int customDirDone=0;
+#ifdef ADM_WIN32
+const char *ADM_DIR_NAME="\\avidemux";
+#else
+const char *ADM_DIR_NAME="/.avidemux";
+#endif
+/*
+
+*/
+/*
+      Get the  directory where jobs are stored
+******************************************************/
+
+char *ADM_getCustomDir(void)
+{
+  if(customDirDone) return customdir;
+
+  char *rootDir;
+  rootDir=ADM_getBaseDir();
+  strncpy(customdir,rootDir,1023);
+#if defined(ADM_WIN32)
+  strcat(customdir,"\\custom"); 
+#else
+  strcat(customdir,"/custom");
+#endif
+  if(!ADM_mkdir(customdir))
+  {
+    GUI_Error_HIG(QT_TR_NOOP("Oops"),QT_TR_NOOP("can't create custom directory (%s)."),customdir);
+                return NULL;
+  }
+  customDirDone=1;
+  return customdir;
+}
+/*
+      Get the  directory where jobs are stored
+******************************************************/
+
+char *ADM_getJobDir(void)
+{
+  if(jobDirDone) return jobdir;
+
+  char *rootDir;
+  rootDir=ADM_getBaseDir();
+  strncpy(jobdir,rootDir,1023);
+#if defined(ADM_WIN32)
+  strcat(jobdir,"\\jobs"); 
+#else
+  strcat(jobdir,"/jobs");
+#endif
+  if(!ADM_mkdir(jobdir))
+  {
+    GUI_Error_HIG(QT_TR_NOOP("Oops"),QT_TR_NOOP("can't create job directory (%s)."),jobdir);
+                return NULL;
+  }
+  jobDirDone=1;
+  return jobdir;
+}
+/*
+      Get the root directory for .avidemux stuff
+******************************************************/
+char *ADM_getBaseDir(void)
+{
+char *dirname=NULL;
+DIR *dir=NULL;
+char *home;
+//
+        if(baseDirDone) return basedir;
+// Get the base directory
+#if defined(ADM_WIN32)
+        if( ! (home=getenv("USERPROFILE")) )
+        {
+          GUI_Error_HIG(QT_TR_NOOP("Oops"),QT_TR_NOOP("can't determine $USERPROFILE."));
+                    home="c:\\";
+        }
+
+#else
+        if( ! (home=getenv("HOME")) )
+        {
+          GUI_Error_HIG(QT_TR_NOOP("Oops"),QT_TR_NOOP("can't determine $HOME."));
+                return NULL;
+        }
+#endif
+
+ // Try to open the .avidemux directory
+        dirname=new char[strlen(home)+strlen(ADM_DIR_NAME)+2];
+        strcpy(dirname,home);
+        strcat(dirname,ADM_DIR_NAME);
+        if(!ADM_mkdir(dirname))
+        {
+          GUI_Error_HIG(QT_TR_NOOP("Oops"),QT_TR_NOOP("Cannot create the .avidemux directory"), NULL);
+                        delete [] dirname;
+                        return NULL;
+        }
+        delete [] dirname;
+
+        // Now built the filename
+        strncpy(basedir,home,1023);
+        strncat(basedir,ADM_DIR_NAME,1023-strlen(basedir));
+        baseDirDone=1;
+        printf("Using %s as base directory for prefs/jobs/...\n",basedir);
+        return basedir;
+}
+/*----------------------------------------
+      Create a directory
+      If it already exists, do nothing
+------------------------------------------*/
+uint8_t ADM_mkdir(const char *dirname)
+{
+DIR *dir=NULL;
+              // Check it already exists ?
+              dir=opendir(dirname);
+              if(dir)
+              { 
+                  printf("Directory %s exists.Good.\n",dirname);
+                  closedir(dir);
+                  return 1;
+              }
+#if defined(ADM_WIN32)
+                if(mkdir(dirname))
+                {
+                    printf("Oops: mkdir failed on %s\n",dirname);   
+                    return 0;
+                }
+                
+#else    
+                char *sys=new char[strlen(dirname)+strlen("mkdir ")+2];
+                strcpy(sys,"mkdir ");
+                strcat(sys,dirname);
+                printf("Creating dir :%s\n",sys);
+                system(sys);
+                delete [] sys;
+#endif		
+              if((dir=opendir(dirname))==NULL)
+                {
+                        return 0;
+                }
+              closedir(dir); 
+              return 1;
+}
+uint8_t buildDirectoryContent(uint32_t *outnb,const char *base, char *jobName[],int maxElems,const char *ext)
+{
+
+DIR *dir;
+struct dirent *direntry;
+int dirmax=0,len;
+int extlen=strlen(ext);
+    ADM_assert(extlen);
+    
+         dir=opendir(base);
+        if(!dir)
+        {
+                return 0;
+        }
+        while((direntry=readdir(dir)))
+        {
+                len=strlen(direntry->d_name);
+                if(len<(extlen+1)) continue;
+                int xbase=len-extlen;
+                if(memcmp(direntry->d_name+xbase,ext,extlen))
+                //if(direntry->d_name[len-1]!='s' || direntry->d_name[len-2]!='j' || direntry->d_name[len-3]!='.')
+                {
+                        printf("ignored:%s\n",direntry->d_name);
+                        continue;
+                }
+                jobName[dirmax]=(char *)ADM_alloc(strlen(base)+strlen(direntry->d_name)+2);
+                strcpy(jobName[dirmax],base);
+                strcat(jobName[dirmax],"/");
+                strcat(jobName[dirmax],direntry->d_name);
+                dirmax++;
+                if(dirmax>=maxElems)
+                {
+                        printf("[jobs]: Max # of jobs exceeded\n");
+                         break;
+                }
+        }
+        closedir(dir);
+        *outnb=dirmax;
+        return 1;
+}
+//------------------------------------------------------------------
+
+/*
+
+** note: it modifies it's first argument
+*/
+void simplify_path(char **buf){
+   unsigned int last1slash = 0;
+   unsigned int last2slash = 0;
+	while( !strncmp(*buf,"/../",4) )
+		memmove(*buf,*buf+3,strlen(*buf+3)+1);
+	for(unsigned int i=0;i<strlen(*buf)-2;i++)
+		while( !strncmp(*buf+i,"/./",3) )
+			memmove(*buf+i,*buf+i+2,strlen(*buf+i+2)+1);
+	for(unsigned int i=0;i<strlen(*buf)-3;i++){
+		if( *(*buf+i) == '/' ){
+			last2slash = last1slash;
+			last1slash = i;
+		}
+		if( !strncmp(*buf+i,"/../",4) ){
+			memmove(*buf+last2slash,*buf+i+3,strlen(*buf+i+3)+1);
+			return simplify_path(buf);
+		}
+	}
+}
+
+//
+//	Make it absolute
+//
+char *PathCanonize(const char *tmpname)
+{
+	char path[300];
+	char *out ;
+
+	if( ! getcwd(path,300) ){
+		fprintf(stderr,"\ngetcwd() failed with: %s (%u)\n",
+		               strerror(errno), errno );
+		path[0] = '\0';
+	}
+	if(!tmpname || tmpname[0]==0)
+	{
+		out=new char [strlen(path)+2];
+		strcpy(out,path);
+#ifndef ADM_WIN32		
+		strcat(out,"/");
+#else
+		strcat(out,"\\");
+#endif	
+		printf("\n Canonizing null string ??? (%s)\n",out);
+	}else if(tmpname[0]=='/'
+#if defined(ADM_WIN32)
+		|| tmpname[1]==':'
+#endif	
+	
+	)
+	{
+		out=new char[strlen(tmpname)+1];
+		strcpy(out,tmpname);
+		return out;
+	}else{
+		out=new char[strlen(path)+strlen(tmpname)+6];
+		strcpy(out,path);
+#ifndef ADM_WIN32		
+		strcat(out,"/");
+#else
+		strcat(out,"\\");
+#endif		
+		strcat(out,tmpname);
+	}
+	simplify_path(&out);
+	return out;
+}
+/*
+	Strip the path and only keep the name
+
+*/
+void		PathStripName(char *str)
+{
+		int len=strlen(str);
+		if(len<=1) return;
+		len--;
+#ifndef ADM_WIN32		
+		while( *(str+len)!='/' && len)
+#else
+	while( *(str+len)!='\\' && len)
+#endif		
+		{
+			 *(str+len)=0;
+			 len--;
+		}
+}
+
+/*
+	Get the filename without path
+
+*/
+const char *GetFileName(const char *str)
+{
+	char *filename;
+        char *filename2;
+#ifndef ADM_WIN32		
+	filename = strrchr(str, '/');
+        
+#else
+	filename = strrchr(str, '\\');
+        filename2 = strrchr(str, '/');
+        if(filename2 && filename)
+        {
+          if(filename2>filename) filename=filename2; 
+        }
+#endif
+	if (filename)
+		return filename+1;
+	else
+		return str;
+}
+
+/*
+	Split patch into absolute path+name and extention
+
+*/
+void PathSplit(char *str, char **root, char **ext)
+{
+	char *full;
+	uint32_t l;
+
+		full=PathCanonize(str);
+		// Search the last .
+		l=strlen(full);
+		l--;
+		ADM_assert(l>0);
+		while( *(full+l)!='.' && l) l--;
+		if(!l || l==(strlen(full)-1))
+		{
+			if(l==(strlen(full)-1))
+			{
+				*(full+l)=0;  // remove trailing .
+			}
+			*ext=new char[2];
+			*root=full;
+			strcpy(*ext,"");
+			return ;
+		}
+		// else we do get an extension
+		// starting at l+1
+		uint32_t suff;
+
+		suff=strlen(full)-l-1;
+		*ext=new char[suff+1];
+		strcpy(*ext,full+l+1);
+		*(full+l)=0;
+		*root=full;
+		return ;
+}

Added: branches/avidemux_2.5_branch_mean/avidemux/ADM_osSupport/ADM_misc.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_osSupport/ADM_misc.cpp	2008-02-27 19:50:36 UTC (rev 3805)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_osSupport/ADM_misc.cpp	2008-02-27 19:50:43 UTC (rev 3806)
@@ -0,0 +1,35 @@
+
+#include "ADM_default.h"
+#include "math.h"
+char* ms2timedisplay(uint32_t ms)
+{
+	uint32_t mm, ss;
+	static char string[20];
+
+	mm = (uint32_t)floor(ms / 60000.);
+	
+	if (mm > 1)
+	{
+		sprintf(string, QT_TR_NOOP("%lu minutes"), mm);
+	}
+	else if (mm == 1)
+	{
+		sprintf(string, QT_TR_NOOP("%lu minute"), mm);
+	}
+	else
+	{
+		ss = (uint32_t)floor(ms / 1000.);
+
+		if (ss == 1)
+		{
+			sprintf(string, QT_TR_NOOP("%lu second"), ss);
+		}
+		else
+		{
+			sprintf(string, QT_TR_NOOP("%lu seconds"), ss);
+		}
+	}
+
+	return string;
+}
+

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_osSupport/ADM_quota.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_osSupport/ADM_quota.cpp	2008-02-27 19:50:36 UTC (rev 3805)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_osSupport/ADM_quota.cpp	2008-02-27 19:50:43 UTC (rev 3806)
@@ -1,3 +1,7 @@
+/**
+                \fn ADM_quota.cpp
+                \brief handle out of space error when writing to files
+*/
 #define ADM_LEGACY_PROGGY
 #include "ADM_default.h"
 #include <errno.h>
@@ -3,4 +7,5 @@
 #include "ADM_quota.h"
 
+#undef free
 
 extern uint8_t DIA_quota(char *);

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_osSupport/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_osSupport/CMakeLists.txt	2008-02-27 19:50:36 UTC (rev 3805)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_osSupport/CMakeLists.txt	2008-02-27 19:50:43 UTC (rev 3806)
@@ -1,8 +1,12 @@
 
 SET(ADM_osSupport_SRCS 
-ADM_cpuCap.cpp     ADM_debug.cpp   ADM_memcpy.cpp  ADM_memsupport.cpp  ADM_queue.cpp  ADM_threads.cpp  win32.cpp
-ADM_crashdump.cpp  ADM_fileio.cpp  ADM_memory.cpp  ADM_misc.cpp        ADM_quota.cpp  TLK_clock.cpp)
+ADM_debug.cpp   
+ADM_queue.cpp  
+ADM_crashHook.cpp  
+ADM_fileio.cpp 
+ADM_misc.cpp 
+ADM_quota.cpp)
 
 ADD_LIBRARY(ADM_osSupport STATIC ${ADM_osSupport_SRCS})
 add_definitions(${LIBXML2_DEFINITIONS})
-include_directories(${LIBXML2_INCLUDE_DIR})
\ No newline at end of file
+include_directories(${LIBXML2_INCLUDE_DIR})

Modified: branches/avidemux_2.5_branch_mean/avidemux/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/CMakeLists.txt	2008-02-27 19:50:36 UTC (rev 3805)
+++ branches/avidemux_2.5_branch_mean/avidemux/CMakeLists.txt	2008-02-27 19:50:43 UTC (rev 3806)
@@ -99,6 +99,7 @@
 ###########################################
 # Build Regular Subdirs
 ###########################################
+ADD_SUBDIRECTORY(ADM_core)
 ADD_SUBDIRECTORY(ADM_osSupport)
 ADD_SUBDIRECTORY(ADM_encoder)
 ADD_SUBDIRECTORY(ADM_toolkit)
@@ -152,6 +153,7 @@
 #########################################
 # Tails
 #########################################
+add_libs_all_targets(ADM_core)
 add_libs_all_targets(ADM_toolkit)
 add_libs_all_targets(ADM_osSupport)
 add_libs_all_targets(ADM_encoder)
@@ -199,7 +201,6 @@
 FOREACH(_current ${ADM_LIBRARIES})
 	add_libs_all_targets(${_current})
 ENDFOREACH(_current ${ADM_SUBDIR})
-
 ###########################################
 # Construct ADM_userInterface
 ###########################################
@@ -395,6 +396,7 @@
 ########################
 IF (ADM_OS_WINDOWS)
 	add_libs_all_targets(z)
+	add_libs_all_targets(ADM_core)
 	add_libs_all_targets(ADM_osSupport)
 	add_libs_all_targets(pthreadGC2)
 	add_libs_all_targets(winmm)
@@ -434,6 +436,7 @@
 ########################
 SDLify(main.cpp)
 add_compile_flags(main.cpp "-DADM_SUBVERSION=${ADM_SUBVERSION}")
+add_libs_all_targets(ADM_core)
 
 ###############
 # INSTALL

Modified: branches/avidemux_2.5_branch_mean/avidemux/main.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/main.cpp	2008-02-27 19:50:36 UTC (rev 3805)
+++ branches/avidemux_2.5_branch_mean/avidemux/main.cpp	2008-02-27 19:50:43 UTC (rev 3806)
@@ -96,8 +96,6 @@
 void SpidermonkeyDestroy(void);
 
 extern pthread_mutex_t g_pSpiderMonkeyMutex;
-uint32_t CpuCaps::myCpuCaps=0;
-uint32_t CpuCaps::myCpuMask=0xffffffff;
 
 #if defined(ADM_DEBUG) && defined(FIND_LEAKS)
 extern const char* new_progname;



From mean at mail.berlios.de  Wed Feb 27 20:50:45 2008
From: mean at mail.berlios.de (mean at BerliOS)
Date: Wed, 27 Feb 2008 20:50:45 +0100
Subject: [Avidemux-svn-commit] r3807 -
	branches/avidemux_2.5_branch_mean/avidemux
Message-ID: <200802271950.m1RJoj0p008787@sheep.berlios.de>

Author: mean
Date: 2008-02-27 20:50:45 +0100 (Wed, 27 Feb 2008)
New Revision: 3807

Modified:
   branches/avidemux_2.5_branch_mean/avidemux/main.cpp
Log:
[Core] Add dummy xref to help linking


Modified: branches/avidemux_2.5_branch_mean/avidemux/main.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/main.cpp	2008-02-27 19:50:43 UTC (rev 3806)
+++ branches/avidemux_2.5_branch_mean/avidemux/main.cpp	2008-02-27 19:50:45 UTC (rev 3807)
@@ -294,3 +294,9 @@
 	check_leaks();
 #endif
 }
+extern void checkCrashFile(void);
+void dummyXref(void)
+{
+    checkCrashFile();
+}
+//EOF
\ No newline at end of file



From mean at mail.berlios.de  Wed Feb 27 20:50:46 2008
From: mean at mail.berlios.de (mean at BerliOS)
Date: Wed, 27 Feb 2008 20:50:46 +0100
Subject: [Avidemux-svn-commit] r3808 - in
	branches/avidemux_2.5_branch_mean/avidemux/ADM_core: include src
Message-ID: <200802271950.m1RJokfu008798@sheep.berlios.de>

Author: mean
Date: 2008-02-27 20:50:46 +0100 (Wed, 27 Feb 2008)
New Revision: 3808

Added:
   branches/avidemux_2.5_branch_mean/avidemux/ADM_core/include/ADM_default.h
   branches/avidemux_2.5_branch_mean/avidemux/ADM_core/src/CMakeLists.txt
Log:
[Core] new files


Added: branches/avidemux_2.5_branch_mean/avidemux/ADM_core/include/ADM_default.h
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_core/include/ADM_default.h	2008-02-27 19:50:45 UTC (rev 3807)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_core/include/ADM_default.h	2008-02-27 19:50:46 UTC (rev 3808)
@@ -0,0 +1,37 @@
+/***************************************************************************
+                          ADM_default.h  -  description
+                             -------------------
+                Includes all core headers (var types, string, mutex, file,...)
+    copyright            : (C) 2008 by mean
+    email                : fixounet at free.fr
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+#ifndef ADM_DEFAULT_H
+#define ADM_DEFAULT_H
+
+#include "config.h"
+
+#include <stdio.h>
+#include <stdlib.h>
+#include <string.h>
+
+#include "ADM_inttype.h"              
+#include "ADM_assert.h"
+
+#ifdef __cplusplus
+#include "ADM_cpuCap.h"
+#include "ADM_clock.h"
+#include "ADM_threads.h"
+#include "ADM_misc.h"
+#endif
+
+#include "ADM_mangle.h"                                                        
+#endif

Added: branches/avidemux_2.5_branch_mean/avidemux/ADM_core/src/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_core/src/CMakeLists.txt	2008-02-27 19:50:45 UTC (rev 3807)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_core/src/CMakeLists.txt	2008-02-27 19:50:46 UTC (rev 3808)
@@ -0,0 +1,7 @@
+
+SET(ADM_core_SRCS 
+ADM_cpuCap.cpp     ADM_memcpy.cpp  ADM_memsupport.cpp  ADM_threads.cpp  ADM_win32.cpp
+ADM_memory.cpp  ADM_misc.cpp        TLK_clock.cpp
+ADM_crashdump.cpp
+)
+ADD_LIBRARY(ADM_core STATIC ${ADM_core_SRCS})



From mean at mail.berlios.de  Wed Feb 27 20:50:49 2008
From: mean at mail.berlios.de (mean at BerliOS)
Date: Wed, 27 Feb 2008 20:50:49 +0100
Subject: [Avidemux-svn-commit] r3809 - in
	branches/avidemux_2.5_branch_mean/avidemux: ADM_core/include
	ADM_core/src ADM_osSupport ADM_toolkit
	ADM_userInterfaces/ADM_GTK/ADM_gui2
Message-ID: <200802271950.m1RJonV0008827@sheep.berlios.de>

Author: mean
Date: 2008-02-27 20:50:47 +0100 (Wed, 27 Feb 2008)
New Revision: 3809

Added:
   branches/avidemux_2.5_branch_mean/avidemux/ADM_core/src/ADM_fileio.cpp
Modified:
   branches/avidemux_2.5_branch_mean/avidemux/ADM_core/include/ADM_assert.h
   branches/avidemux_2.5_branch_mean/avidemux/ADM_core/include/ADM_misc.h
   branches/avidemux_2.5_branch_mean/avidemux/ADM_core/src/ADM_crashdump.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_core/src/CMakeLists.txt
   branches/avidemux_2.5_branch_mean/avidemux/ADM_osSupport/ADM_crashHook.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_osSupport/ADM_fileio.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_toolkit/filesel.h
   branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_bindings.cpp
Log:
[core] cleanup


Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_core/include/ADM_assert.h
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_core/include/ADM_assert.h	2008-02-27 19:50:46 UTC (rev 3808)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_core/include/ADM_assert.h	2008-02-27 19:50:47 UTC (rev 3809)
@@ -1,36 +1,64 @@
-/*
-	Replacement for assert etc...
-*/
+/** *************************************************************************
+    \fn ADM_assert.h
+    \brief Replacement for assert etc ... (low level funcs)  
+                      
+    copyright            : (C) 2008 by mean
+    
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ ***************************************************************************/
 #ifndef ADM_ASSERT_H
 #define ADM_ASSERT_H
-
+#include "ADM_inttype.h"
 #include <assert.h>
 
-#define ADM_assert(x) { if(!(x)) {ADM_backTrack(__LINE__,__FILE__);  }}
+#define ADM_assert(x) { if(!(x)) {ADM_backTrack("Assert failed :"#x,__LINE__,__FILE__);  }}
 
 /* Functions we want to override to have better os support / debug / error control */
     
 #ifdef __cplusplus
 extern "C" {
 #endif
+/* Our crash  / assert functions */
+typedef void ADM_saveFunction(void);
+typedef void ADM_fatalFunction(const char *title, const char *info);
 
-typedef void *ADM_saveFunction(void);
-typedef void *ADM_fatalFunction(const char *title, const char *info);
+void            ADM_setCrashHook(ADM_saveFunction *save, ADM_fatalFunction *fatal);
+void            ADM_backTrack(const char *info,int lineno,const char *file);
+/* Our crash  / assert functions */
 
-void ADM_setCrashHook(ADM_saveFunction *save, ADM_fatalFunction *fatal);
+/* Replacement for fread & friends */
+size_t          ADM_fread (void *ptr, size_t size, size_t n, FILE *sstream);
+size_t          ADM_fwrite (void *ptr, size_t size, size_t n, FILE *sstream);
+FILE            *ADM_fopen (const char *file, const char *mode);
+int             ADM_fclose (FILE *file);
+uint8_t         ADM_fileExist(char *name);
+uint8_t         ADM_mkdir(const char *name);
+char            *ADM_rindex(const char *s, int c);
+char            *ADM_index(const char *s, int c);
 
-void   ADM_backTrack(int lineno,const char *file);
-size_t ADM_fread (void *ptr, size_t size, size_t n, FILE *sstream);
-size_t ADM_fwrite (void *ptr, size_t size, size_t n, FILE *sstream);
-FILE  *ADM_fopen (const char *file, const char *mode);
-int    ADM_fclose (FILE *file);
+/* Replacements for memory allocation functions */
+extern void     *ADM_alloc(size_t size);
+extern void     *ADM_calloc(size_t nbElm,size_t elSize);
+extern void     *ADM_realloc(void *in,size_t size);
+extern void     ADM_dezalloc(void *ptr);
+extern char     *ADM_strdup( const char *in);
+/* Endianness stuff */
+uint64_t 	ADM_swap64(uint64_t in);
+uint32_t 	ADM_swap32(uint32_t in);
+uint16_t 	ADM_swap16(uint16_t in);
+//static inline uint32_t dontswap(uint32_t in) {return in;};
 
-extern void *ADM_alloc(size_t size);
-extern void *ADM_calloc(size_t nbElm,size_t elSize);
-extern void *ADM_realloc(void *in,size_t size);
-extern void ADM_dezalloc(void *ptr);
-extern char *ADM_strdup( const char *in);
-extern char *slashToBackSlash(char *in);
+/* */
+void            ADM_usleep(unsigned long us);
+
+
 typedef void *(* adm_fast_memcpy)(void *to, const void *from, size_t len);
 extern adm_fast_memcpy myAdmMemcpy;
 
@@ -81,3 +109,4 @@
 
 
 #endif
+// EOF 

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_core/include/ADM_misc.h
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_core/include/ADM_misc.h	2008-02-27 19:50:46 UTC (rev 3808)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_core/include/ADM_misc.h	2008-02-27 19:50:47 UTC (rev 3809)
@@ -39,15 +39,7 @@
 void            LowerCase(char *string);
 uint32_t        getTime( int called );;
 uint32_t 	getTimeOfTheDay(void);
-uint64_t 	ADM_swap64(uint64_t in);
-uint32_t 	ADM_swap32(uint32_t in);
-uint16_t 	ADM_swap16(uint16_t in);
-inline uint32_t dontswap(uint32_t in) {return in;};
-char 		*ADM_rindex(const char *s, int c);
-char 		*ADM_index(const char *s, int c);
-void 		ADM_usleep(unsigned long us);
-uint8_t         ADM_fileExist(char *name);
-
+extern char *slashToBackSlash(char *in);
 #ifdef HAVE_GETTIMEOFDAY
 	#define TIMZ struct timezone
 #else

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_core/src/ADM_crashdump.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_core/src/ADM_crashdump.cpp	2008-02-27 19:50:46 UTC (rev 3808)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_core/src/ADM_crashdump.cpp	2008-02-27 19:50:47 UTC (rev 3809)
@@ -54,11 +54,11 @@
 #ifdef __APPLE__
 void installSigHandler() {}
 
-void ADM_backTrack(int lineno,const char *file)
+void ADM_backTrack(const char *info,int lineno,const char *file)
 {
 	char bfr[1024];
 	if(mysaveFunction) mysaveFunction();
-	snprintf(bfr,1024,"Assert Failed at file %s, line %d\n",file,lineno);
+	snprintf(bfr,1024,"%s\n file %s, line %d\n",infofile,lineno);
         if(myFatalFunction) myFatalFunction("Crash",bfr);
         exit(-1);
 }
@@ -207,7 +207,7 @@
 }
 }
 
-void ADM_backTrack(int lineno, const char *file)
+void ADM_backTrack(const char *info,int lineno,const char *file)
 {	
 	fflush(stderr);
 	fflush(stdout);
@@ -364,27 +364,30 @@
         exit(1);
       }
       running=0; 
-      ADM_backTrack(0,"");
+      ADM_backTrack("Segfault",0,"??");
 }
-void ADM_backTrack(int lineno,const char *file)
+void ADM_backTrack(const char *info,int lineno,const char *file)
 {
+    char wholeStuff[2048];
      void *stack[20];
      char **functions;
      int count, i;
-      
+    wholeStuff[0]=0;
+
 	if(mysaveFunction) mysaveFunction();
       printf("\n*********** BACKTRACK **************\n");
       count = backtrace(stack, 20);
       functions = backtrace_symbols(stack, count);
-      
+         sprintf(wholeStuff,"%s\n at line %d, file %s",info,lineno,file);
          for (i=0; i < count; i++) 
          {
             printf("Frame %2d: %s \n", i, functions[i]);
             demangle(i,(uint8_t *)functions[i]);
-            
+            strcat(wholeStuff,functions[i]);
+            strcat(wholeStuff,"\n");
          }
       printf("*********** BACKTRACK **************\n");
-      if(myFatalFunction) myFatalFunction("Crash",""); // FIXME
+      if(myFatalFunction) myFatalFunction("Crash",wholeStuff); // FIXME
       exit(-1); // _exit(1) ???
 }
 #endif

Copied: branches/avidemux_2.5_branch_mean/avidemux/ADM_core/src/ADM_fileio.cpp (from rev 3808, branches/avidemux_2.5_branch_mean/avidemux/ADM_osSupport/ADM_fileio.cpp)
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_osSupport/ADM_fileio.cpp	2008-02-27 19:50:46 UTC (rev 3808)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_core/src/ADM_fileio.cpp	2008-02-27 19:50:47 UTC (rev 3809)
@@ -0,0 +1,302 @@
+/***************************************************************************
+                    
+    copyright            : (C) 2006 by mean
+    email                : fixounet at free.fr
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+#include "config.h" 
+#include <stdio.h>
+#include <stdlib.h>
+#include <string.h>
+    
+#include <dirent.h>
+#include <errno.h>
+#include <sys/stat.h>
+
+#include <unistd.h>
+
+#ifdef WIN32
+#include <glib.h>
+#endif
+
+#include "ADM_default.h"
+
+
+
+#include "ADM_toolkit/filesel.h"
+#include "ADM_toolkit/toolkit.hxx"
+
+#include "ADM_assert.h"
+#undef fread
+#undef fwrite
+#undef fopen
+#undef fclose
+
+size_t ADM_fread (void *ptr, size_t size, size_t n, FILE *sstream)
+{
+  return fread(ptr,size,n,sstream); 
+  
+}
+
+size_t ADM_fwrite (void *ptr, size_t size, size_t n, FILE *sstream)
+{
+  return fwrite(ptr,size,n,sstream); 
+  
+}
+FILE  *ADM_fopen (const char *file, const char *mode)
+{
+  FILE *f;
+
+#ifndef ADM_WIN32
+  return fopen(file,mode); 
+#else
+  gchar *retval = g_locale_from_utf8 (file, -1, NULL, NULL, NULL);
+  f=fopen(retval,mode);
+  g_free (retval);
+  return f;  
+#endif
+}
+
+int    ADM_fclose (FILE *file)
+{
+  return fclose(file); 
+}
+/*----------------------------------------
+      Create a directory
+      If it already exists, do nothing
+------------------------------------------*/
+uint8_t ADM_mkdir(const char *dirname)
+{
+DIR *dir=NULL;
+              // Check it already exists ?
+              dir=opendir(dirname);
+              if(dir)
+              { 
+                  printf("Directory %s exists.Good.\n",dirname);
+                  closedir(dir);
+                  return 1;
+              }
+#if defined(ADM_WIN32)
+                if(mkdir(dirname))
+                {
+                    printf("Oops: mkdir failed on %s\n",dirname);   
+                    return 0;
+                }
+                
+#else    
+                char *sys=new char[strlen(dirname)+strlen("mkdir ")+2];
+                strcpy(sys,"mkdir ");
+                strcat(sys,dirname);
+                printf("Creating dir :%s\n",sys);
+                system(sys);
+                delete [] sys;
+#endif		
+              if((dir=opendir(dirname))==NULL)
+                {
+                        return 0;
+                }
+              closedir(dir); 
+              return 1;
+}
+uint8_t buildDirectoryContent(uint32_t *outnb,const char *base, char *jobName[],int maxElems,const char *ext)
+{
+
+DIR *dir;
+struct dirent *direntry;
+int dirmax=0,len;
+int extlen=strlen(ext);
+    ADM_assert(extlen);
+    
+         dir=opendir(base);
+        if(!dir)
+        {
+                return 0;
+        }
+        while((direntry=readdir(dir)))
+        {
+                len=strlen(direntry->d_name);
+                if(len<(extlen+1)) continue;
+                int xbase=len-extlen;
+                if(memcmp(direntry->d_name+xbase,ext,extlen))
+                //if(direntry->d_name[len-1]!='s' || direntry->d_name[len-2]!='j' || direntry->d_name[len-3]!='.')
+                {
+                        printf("ignored:%s\n",direntry->d_name);
+                        continue;
+                }
+                jobName[dirmax]=(char *)ADM_alloc(strlen(base)+strlen(direntry->d_name)+2);
+                strcpy(jobName[dirmax],base);
+                strcat(jobName[dirmax],"/");
+                strcat(jobName[dirmax],direntry->d_name);
+                dirmax++;
+                if(dirmax>=maxElems)
+                {
+                        printf("[jobs]: Max # of jobs exceeded\n");
+                         break;
+                }
+        }
+        closedir(dir);
+        *outnb=dirmax;
+        return 1;
+}
+//------------------------------------------------------------------
+
+/*
+
+** note: it modifies it's first argument
+*/
+void simplify_path(char **buf){
+   unsigned int last1slash = 0;
+   unsigned int last2slash = 0;
+	while( !strncmp(*buf,"/../",4) )
+		memmove(*buf,*buf+3,strlen(*buf+3)+1);
+	for(unsigned int i=0;i<strlen(*buf)-2;i++)
+		while( !strncmp(*buf+i,"/./",3) )
+			memmove(*buf+i,*buf+i+2,strlen(*buf+i+2)+1);
+	for(unsigned int i=0;i<strlen(*buf)-3;i++){
+		if( *(*buf+i) == '/' ){
+			last2slash = last1slash;
+			last1slash = i;
+		}
+		if( !strncmp(*buf+i,"/../",4) ){
+			memmove(*buf+last2slash,*buf+i+3,strlen(*buf+i+3)+1);
+			return simplify_path(buf);
+		}
+	}
+}
+
+//
+//	Make it absolute
+//
+char *PathCanonize(const char *tmpname)
+{
+	char path[300];
+	char *out ;
+
+	if( ! getcwd(path,300) ){
+		fprintf(stderr,"\ngetcwd() failed with: %s (%u)\n",
+		               strerror(errno), errno );
+		path[0] = '\0';
+	}
+	if(!tmpname || tmpname[0]==0)
+	{
+		out=new char [strlen(path)+2];
+		strcpy(out,path);
+#ifndef ADM_WIN32		
+		strcat(out,"/");
+#else
+		strcat(out,"\\");
+#endif	
+		printf("\n Canonizing null string ??? (%s)\n",out);
+	}else if(tmpname[0]=='/'
+#if defined(ADM_WIN32)
+		|| tmpname[1]==':'
+#endif	
+	
+	)
+	{
+		out=new char[strlen(tmpname)+1];
+		strcpy(out,tmpname);
+		return out;
+	}else{
+		out=new char[strlen(path)+strlen(tmpname)+6];
+		strcpy(out,path);
+#ifndef ADM_WIN32		
+		strcat(out,"/");
+#else
+		strcat(out,"\\");
+#endif		
+		strcat(out,tmpname);
+	}
+	simplify_path(&out);
+	return out;
+}
+/*
+	Strip the path and only keep the name
+
+*/
+void		PathStripName(char *str)
+{
+		int len=strlen(str);
+		if(len<=1) return;
+		len--;
+#ifndef ADM_WIN32		
+		while( *(str+len)!='/' && len)
+#else
+	while( *(str+len)!='\\' && len)
+#endif		
+		{
+			 *(str+len)=0;
+			 len--;
+		}
+}
+
+/*
+	Get the filename without path
+
+*/
+const char *GetFileName(const char *str)
+{
+	char *filename;
+        char *filename2;
+#ifndef ADM_WIN32		
+	filename = strrchr(str, '/');
+        
+#else
+	filename = strrchr(str, '\\');
+        filename2 = strrchr(str, '/');
+        if(filename2 && filename)
+        {
+          if(filename2>filename) filename=filename2; 
+        }
+#endif
+	if (filename)
+		return filename+1;
+	else
+		return str;
+}
+
+/*
+	Split patch into absolute path+name and extention
+
+*/
+void PathSplit(char *str, char **root, char **ext)
+{
+	char *full;
+	uint32_t l;
+
+		full=PathCanonize(str);
+		// Search the last .
+		l=strlen(full);
+		l--;
+		ADM_assert(l>0);
+		while( *(full+l)!='.' && l) l--;
+		if(!l || l==(strlen(full)-1))
+		{
+			if(l==(strlen(full)-1))
+			{
+				*(full+l)=0;  // remove trailing .
+			}
+			*ext=new char[2];
+			*root=full;
+			strcpy(*ext,"");
+			return ;
+		}
+		// else we do get an extension
+		// starting at l+1
+		uint32_t suff;
+
+		suff=strlen(full)-l-1;
+		*ext=new char[suff+1];
+		strcpy(*ext,full+l+1);
+		*(full+l)=0;
+		*root=full;
+		return ;
+}

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_core/src/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_core/src/CMakeLists.txt	2008-02-27 19:50:46 UTC (rev 3808)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_core/src/CMakeLists.txt	2008-02-27 19:50:47 UTC (rev 3809)
@@ -3,5 +3,7 @@
 ADM_cpuCap.cpp     ADM_memcpy.cpp  ADM_memsupport.cpp  ADM_threads.cpp  ADM_win32.cpp
 ADM_memory.cpp  ADM_misc.cpp        TLK_clock.cpp
 ADM_crashdump.cpp
+ADM_fileio.cpp
 )
+
 ADD_LIBRARY(ADM_core STATIC ${ADM_core_SRCS})

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_osSupport/ADM_crashHook.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_osSupport/ADM_crashHook.cpp	2008-02-27 19:50:46 UTC (rev 3808)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_osSupport/ADM_crashHook.cpp	2008-02-27 19:50:47 UTC (rev 3809)
@@ -41,7 +41,7 @@
 
 #define CRASH_FILE "crash.js"
 
-static void saveCrashProject(void);
+void saveCrashProject(void);
 extern char *ADM_getBaseDir(void);
 extern void A_parseECMAScript(const char *name);
 

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_osSupport/ADM_fileio.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_osSupport/ADM_fileio.cpp	2008-02-27 19:50:46 UTC (rev 3808)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_osSupport/ADM_fileio.cpp	2008-02-27 19:50:47 UTC (rev 3809)
@@ -34,41 +34,6 @@
 #include "ADM_toolkit/filesel.h"
 #include "ADM_toolkit/toolkit.hxx"
 
-#include "ADM_assert.h"
-#undef fread
-#undef fwrite
-#undef fopen
-#undef fclose
-
-size_t ADM_fread (void *ptr, size_t size, size_t n, FILE *sstream)
-{
-  return fread(ptr,size,n,sstream); 
-  
-}
-
-size_t ADM_fwrite (void *ptr, size_t size, size_t n, FILE *sstream)
-{
-  return fwrite(ptr,size,n,sstream); 
-  
-}
-FILE  *ADM_fopen (const char *file, const char *mode)
-{
-  FILE *f;
-
-#ifndef ADM_WIN32
-  return fopen(file,mode); 
-#else
-  gchar *retval = g_locale_from_utf8 (file, -1, NULL, NULL, NULL);
-  f=fopen(retval,mode);
-  g_free (retval);
-  return f;  
-#endif
-}
-
-int    ADM_fclose (FILE *file)
-{
-  return fclose(file); 
-}
 //*****************************
 static char basedir[1024]={0};
 static char jobdir[1024]={0};
@@ -177,234 +142,3 @@
         printf("Using %s as base directory for prefs/jobs/...\n",basedir);
         return basedir;
 }
-/*----------------------------------------
-      Create a directory
-      If it already exists, do nothing
-------------------------------------------*/
-uint8_t ADM_mkdir(const char *dirname)
-{
-DIR *dir=NULL;
-              // Check it already exists ?
-              dir=opendir(dirname);
-              if(dir)
-              { 
-                  printf("Directory %s exists.Good.\n",dirname);
-                  closedir(dir);
-                  return 1;
-              }
-#if defined(ADM_WIN32)
-                if(mkdir(dirname))
-                {
-                    printf("Oops: mkdir failed on %s\n",dirname);   
-                    return 0;
-                }
-                
-#else    
-                char *sys=new char[strlen(dirname)+strlen("mkdir ")+2];
-                strcpy(sys,"mkdir ");
-                strcat(sys,dirname);
-                printf("Creating dir :%s\n",sys);
-                system(sys);
-                delete [] sys;
-#endif		
-              if((dir=opendir(dirname))==NULL)
-                {
-                        return 0;
-                }
-              closedir(dir); 
-              return 1;
-}
-uint8_t buildDirectoryContent(uint32_t *outnb,const char *base, char *jobName[],int maxElems,const char *ext)
-{
-
-DIR *dir;
-struct dirent *direntry;
-int dirmax=0,len;
-int extlen=strlen(ext);
-    ADM_assert(extlen);
-    
-         dir=opendir(base);
-        if(!dir)
-        {
-                return 0;
-        }
-        while((direntry=readdir(dir)))
-        {
-                len=strlen(direntry->d_name);
-                if(len<(extlen+1)) continue;
-                int xbase=len-extlen;
-                if(memcmp(direntry->d_name+xbase,ext,extlen))
-                //if(direntry->d_name[len-1]!='s' || direntry->d_name[len-2]!='j' || direntry->d_name[len-3]!='.')
-                {
-                        printf("ignored:%s\n",direntry->d_name);
-                        continue;
-                }
-                jobName[dirmax]=(char *)ADM_alloc(strlen(base)+strlen(direntry->d_name)+2);
-                strcpy(jobName[dirmax],base);
-                strcat(jobName[dirmax],"/");
-                strcat(jobName[dirmax],direntry->d_name);
-                dirmax++;
-                if(dirmax>=maxElems)
-                {
-                        printf("[jobs]: Max # of jobs exceeded\n");
-                         break;
-                }
-        }
-        closedir(dir);
-        *outnb=dirmax;
-        return 1;
-}
-//------------------------------------------------------------------
-
-/*
-
-** note: it modifies it's first argument
-*/
-void simplify_path(char **buf){
-   unsigned int last1slash = 0;
-   unsigned int last2slash = 0;
-	while( !strncmp(*buf,"/../",4) )
-		memmove(*buf,*buf+3,strlen(*buf+3)+1);
-	for(unsigned int i=0;i<strlen(*buf)-2;i++)
-		while( !strncmp(*buf+i,"/./",3) )
-			memmove(*buf+i,*buf+i+2,strlen(*buf+i+2)+1);
-	for(unsigned int i=0;i<strlen(*buf)-3;i++){
-		if( *(*buf+i) == '/' ){
-			last2slash = last1slash;
-			last1slash = i;
-		}
-		if( !strncmp(*buf+i,"/../",4) ){
-			memmove(*buf+last2slash,*buf+i+3,strlen(*buf+i+3)+1);
-			return simplify_path(buf);
-		}
-	}
-}
-
-//
-//	Make it absolute
-//
-char *PathCanonize(const char *tmpname)
-{
-	char path[300];
-	char *out ;
-
-	if( ! getcwd(path,300) ){
-		fprintf(stderr,"\ngetcwd() failed with: %s (%u)\n",
-		               strerror(errno), errno );
-		path[0] = '\0';
-	}
-	if(!tmpname || tmpname[0]==0)
-	{
-		out=new char [strlen(path)+2];
-		strcpy(out,path);
-#ifndef ADM_WIN32		
-		strcat(out,"/");
-#else
-		strcat(out,"\\");
-#endif	
-		printf("\n Canonizing null string ??? (%s)\n",out);
-	}else if(tmpname[0]=='/'
-#if defined(ADM_WIN32)
-		|| tmpname[1]==':'
-#endif	
-	
-	)
-	{
-		out=new char[strlen(tmpname)+1];
-		strcpy(out,tmpname);
-		return out;
-	}else{
-		out=new char[strlen(path)+strlen(tmpname)+6];
-		strcpy(out,path);
-#ifndef ADM_WIN32		
-		strcat(out,"/");
-#else
-		strcat(out,"\\");
-#endif		
-		strcat(out,tmpname);
-	}
-	simplify_path(&out);
-	return out;
-}
-/*
-	Strip the path and only keep the name
-
-*/
-void		PathStripName(char *str)
-{
-		int len=strlen(str);
-		if(len<=1) return;
-		len--;
-#ifndef ADM_WIN32		
-		while( *(str+len)!='/' && len)
-#else
-	while( *(str+len)!='\\' && len)
-#endif		
-		{
-			 *(str+len)=0;
-			 len--;
-		}
-}
-
-/*
-	Get the filename without path
-
-*/
-const char *GetFileName(const char *str)
-{
-	char *filename;
-        char *filename2;
-#ifndef ADM_WIN32		
-	filename = strrchr(str, '/');
-        
-#else
-	filename = strrchr(str, '\\');
-        filename2 = strrchr(str, '/');
-        if(filename2 && filename)
-        {
-          if(filename2>filename) filename=filename2; 
-        }
-#endif
-	if (filename)
-		return filename+1;
-	else
-		return str;
-}
-
-/*
-	Split patch into absolute path+name and extention
-
-*/
-void PathSplit(char *str, char **root, char **ext)
-{
-	char *full;
-	uint32_t l;
-
-		full=PathCanonize(str);
-		// Search the last .
-		l=strlen(full);
-		l--;
-		ADM_assert(l>0);
-		while( *(full+l)!='.' && l) l--;
-		if(!l || l==(strlen(full)-1))
-		{
-			if(l==(strlen(full)-1))
-			{
-				*(full+l)=0;  // remove trailing .
-			}
-			*ext=new char[2];
-			*root=full;
-			strcpy(*ext,"");
-			return ;
-		}
-		// else we do get an extension
-		// starting at l+1
-		uint32_t suff;
-
-		suff=strlen(full)-l-1;
-		*ext=new char[suff+1];
-		strcpy(*ext,full+l+1);
-		*(full+l)=0;
-		*root=full;
-		return ;
-}

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_toolkit/filesel.h
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_toolkit/filesel.h	2008-02-27 19:50:46 UTC (rev 3808)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_toolkit/filesel.h	2008-02-27 19:50:47 UTC (rev 3809)
@@ -31,6 +31,6 @@
 
 uint8_t buildDirectoryContent(uint32_t *outnb,const char *base, char *jobName[],int maxElems,const char *ext);
 const char *GetFileName(const char *str);
-uint8_t ADM_mkdir(const char *name);
+
 #endif
 //EOF

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_bindings.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_bindings.cpp	2008-02-27 19:50:46 UTC (rev 3808)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_bindings.cpp	2008-02-27 19:50:47 UTC (rev 3809)
@@ -34,6 +34,7 @@
 #include "../ADM_toolkit_gtk/jogshuttle.h"
 #include "../ADM_toolkit_gtk/ADM_jogshuttle.h"
 #include "gtkgui.h"
+#include "ADM_toolkit/toolkit.hxx"
 
 uint8_t UI_getPhysicalScreenSize(uint32_t *w,uint32_t *h);
 
@@ -1298,17 +1299,26 @@
     
 }
 static void trampoline(void);
+static void gtk_fatalFunction(const char *title, const char *info)
+{
+    GUI_Info_HIG(ADM_LOG_IMPORTANT,title,info);
+}
+extern void saveCrashProject(void);
 int UI_RunApp(void)
 {
     if (global_argc >= 2)
     {
       g_timeout_add(200,(GCALL *)trampoline,NULL);
     }
+    // Install our crash handler
+    ADM_setCrashHook(&saveCrashProject, &gtk_fatalFunction);
     checkCrashFile();
     gtk_main();
     gdk_threads_leave();
 
 }
+
+
 void trampoline(void)
 {
     ADM_usleep(100000); // let gtk start



From gruntster at mail.berlios.de  Fri Feb 29 00:33:24 2008
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Fri, 29 Feb 2008 00:33:24 +0100
Subject: [Avidemux-svn-commit] r3810 - in
	branches/avidemux_2.5_branch_gruntster: . avidemux
	avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2
	avidemux/ADM_userInterfaces/ADM_commonUI cmake
Message-ID: <200802282333.m1SNXOTw008310@sheep.berlios.de>

Author: gruntster
Date: 2008-02-29 00:33:15 +0100 (Fri, 29 Feb 2008)
New Revision: 3810

Modified:
   branches/avidemux_2.5_branch_gruntster/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/avidemux/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/cmake/admCheckMiscLibs.cmake
   branches/avidemux_2.5_branch_gruntster/cmake/admCheckUserInterfaceLibs.cmake
   branches/avidemux_2.5_branch_gruntster/cmake/admConfigSummary.cmake
   branches/avidemux_2.5_branch_gruntster/cmake/admDetermineSystem.cmake
   branches/avidemux_2.5_branch_gruntster/cmake/admSetLavcodecFlags.cmake
   branches/avidemux_2.5_branch_gruntster/cmake/config.h.cmake
Log:
[CMake] tweaks mainly for Darwin

Modified: branches/avidemux_2.5_branch_gruntster/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/CMakeLists.txt	2008-02-27 19:50:47 UTC (rev 3809)
+++ branches/avidemux_2.5_branch_gruntster/CMakeLists.txt	2008-02-28 23:33:15 UTC (rev 3810)
@@ -118,10 +118,10 @@
 	SET(CMAKE_C_FLAGS "${CMAKE_C_FLAGS} -mabi=altivec -maltivec")
 	SET(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} -mabi=altivec -maltivec")
 
-	IF (ADM_OS_APPLE)
-		SET(CMAKE_C_FLAGS "${CMAKE_C_FLAGS} -faltivec -force_cpusubtype_ALL")
-		SET(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} -faltivec -force_cpusubtype_ALL")
-	ENDIF (ADM_OS_APPLE)
+	IF (ADM_OS_DARWIN)
+		SET(CMAKE_C_FLAGS "${CMAKE_C_FLAGS} -faltivec")
+		SET(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} -faltivec")
+	ENDIF (ADM_OS_DARWIN)
 ENDIF (ADM_CPUCAP_ALTIVEC)
 
 ########################################
@@ -187,9 +187,9 @@
 CHECK_INCLUDE_FILES(unistd.h     HAVE_UNISTD_H)		# internal use, ass, mad
 CHECK_INCLUDE_FILES(malloc.h     HAVE_MALLOC_H)		# libavcodec, libavutil, libpostproc, libswscale, mplex
 
-IF (ADM_CPUCAP_ALTIVEC)
+IF (ADM_CPUCAP_ALTIVEC AND NOT ADM_OS_DARWIN)
 	CHECK_INCLUDE_FILES(altivec.h    HAVE_ALTIVEC_H)	# libavcodec, libpostproc, libswscale, mpeg2dec, mpeg2enc
-ENDIF (ADM_CPUCAP_ALTIVEC)
+ENDIF (ADM_CPUCAP_ALTIVEC AND NOT ADM_OS_DARWIN)
 
 MESSAGE("")
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/CMakeLists.txt	2008-02-27 19:50:47 UTC (rev 3809)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/CMakeLists.txt	2008-02-28 23:33:15 UTC (rev 3810)
@@ -3,10 +3,9 @@
 SET(${ADM_LIB}_SRCS
 	GUI_bindings.cpp  GUI_gtkRender.cpp  GUI_keymap.cpp  GUI_main2.cpp)
 
-IF (ADM_OS_APPLE)
+IF (ADM_OS_DARWIN)
 	SET(${ADM_LIB}_SRCS ${${ADM_LIB}_SRCS} GUI_gtkRenderHelper.m)
-ENDIF (ADM_OS_APPLE)
+ENDIF (ADM_OS_DARWIN)
 
-
 ADD_ADM_LIB_GTK_TARGET(${ADM_LIB} ${${ADM_LIB}_SRCS})
 ADD_CFLAGS_GTK_TARGET(${ADM_LIB} ${GTK_CFLAGS})

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/CMakeLists.txt	2008-02-27 19:50:47 UTC (rev 3809)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/CMakeLists.txt	2008-02-28 23:33:15 UTC (rev 3810)
@@ -9,11 +9,10 @@
 DIA_flyEq2.cpp        DIA_flv1.cpp            DIA_flyThreshold.cpp DIA_flyParticle.cpp DIA_flyEraser.cpp DIA_flySwissArmyKnife.cpp
 )
 
-IF (ADM_OS_APPLE)
+IF (ADM_OS_DARWIN)
 	SET(${ADM_LIB}_SRCS ${${ADM_LIB}_SRCS} GUI_sdlRenderHelper.m)
-ENDIF (ADM_OS_APPLE)
+ENDIF (ADM_OS_DARWIN)
 
-
 ADD_ADM_LIB_ALL_TARGETS(${ADM_LIB} ${${ADM_LIB}_SRCS})
 
 SDLify(GUI_sdlRender.cpp)

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/CMakeLists.txt	2008-02-27 19:50:47 UTC (rev 3809)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/CMakeLists.txt	2008-02-28 23:33:15 UTC (rev 3810)
@@ -335,15 +335,21 @@
 		TARGET_LINK_LIBRARIES(avidemux2_gtk ${XVIDEO_LIBRARY_DIR})
 	ENDIF (ADM_UI_GTK)
 
-	IF (ADM_UI_QT4 AND NOT ADM_OS_DARWIN)
+	IF (ADM_UI_QT4)
 		TARGET_LINK_LIBRARIES(avidemux2_qt4 ${X11_LIBRARIES})
 		TARGET_LINK_LIBRARIES(avidemux2_qt4 ${XVIDEO_LIBRARY_DIR})
-	ENDIF (ADM_UI_QT4 AND NOT ADM_OS_DARWIN)
+	ENDIF (ADM_UI_QT4)
 ENDIF (USE_XV)
 
 # SDL
 IF (USE_SDL)
-	ADD_LIB_ALL_TARGETS("${SDL_LIBRARY}")
+	IF (ADM_UI_GTK)
+		TARGET_LINK_LIBRARIES(avidemux2_gtk ${SDL_LIBRARY})
+	ENDIF (ADM_UI_GTK)
+
+	IF (ADM_UI_QT4)
+		TARGET_LINK_LIBRARIES(avidemux2_qt4 ${SDL_LIBRARY})
+	ENDIF (ADM_UI_QT4)
 ENDIF (USE_SDL)
 
 # aRts
@@ -476,7 +482,7 @@
 	ADD_LIB_ALL_TARGETS("-framework CoreServices -framework CoreAudio -framework AudioUnit -framework Carbon -framework Cocoa")
 
 	# for Leopard but it doesn't hurt Tiger
-	add_libs_all_targets("-Wl,-dylib_file,/System/Library/Frameworks/OpenGL.framework/Versions/A/Libraries/libGL.dylib:/System/Library/Frameworks/OpenGL.framework/Versions/A/Libraries/libGL.dylib")
+	ADD_LIB_ALL_TARGETS("-Wl,-dylib_file,/System/Library/Frameworks/OpenGL.framework/Versions/A/Libraries/libGL.dylib:/System/Library/Frameworks/OpenGL.framework/Versions/A/Libraries/libGL.dylib")
 ENDIF (ADM_OS_DARWIN)
 
 ###########################################

Modified: branches/avidemux_2.5_branch_gruntster/cmake/admCheckMiscLibs.cmake
===================================================================
--- branches/avidemux_2.5_branch_gruntster/cmake/admCheckMiscLibs.cmake	2008-02-27 19:50:47 UTC (rev 3809)
+++ branches/avidemux_2.5_branch_gruntster/cmake/admCheckMiscLibs.cmake	2008-02-28 23:33:15 UTC (rev 3810)
@@ -120,14 +120,14 @@
 ########################################
 # XVideo
 ########################################
-IF (ADM_OS_LINUX OR ADM_OS_DARWIN)	
+IF (ADM_OS_LINUX)
 	OPTION(XVIDEO "" ON)
 
-	IF (X11_FOUND AND XVIDEO)
+	IF (XVIDEO)
 		MESSAGE(STATUS "Checking for XVideo")
 		MESSAGE(STATUS "*******************")
 
-		FIND_HEADER_AND_LIB(XVIDEO X11/extensions/Xvlib.h Xv XvShmPutImage "${X11_LIBRARIES}")
+		FIND_HEADER_AND_LIB(XVIDEO X11/extensions/Xvlib.h Xv XvShmPutImage)
 		PRINT_LIBRARY_INFO("XVideo" XVIDEO_FOUND "${XVIDEO_INCLUDE_DIR}" "${XVIDEO_LIBRARY_DIR}")
 
 		IF (XVIDEO_FOUND)
@@ -135,7 +135,7 @@
 		ENDIF (XVIDEO_FOUND)
 
 		MESSAGE("")
-	ENDIF (X11_FOUND AND XVIDEO)
-ELSE (ADM_OS_LINUX OR ADM_OS_DARWIN)
+	ENDIF (XVIDEO)
+ELSE (ADM_OS_LINUX)
 	SET(XVIDEO_CAPABLE FALSE)
-ENDIF (ADM_OS_LINUX OR ADM_OS_DARWIN)
+ENDIF (ADM_OS_LINUX)

Modified: branches/avidemux_2.5_branch_gruntster/cmake/admCheckUserInterfaceLibs.cmake
===================================================================
--- branches/avidemux_2.5_branch_gruntster/cmake/admCheckUserInterfaceLibs.cmake	2008-02-27 19:50:47 UTC (rev 3809)
+++ branches/avidemux_2.5_branch_gruntster/cmake/admCheckUserInterfaceLibs.cmake	2008-02-28 23:33:15 UTC (rev 3810)
@@ -1,25 +1,4 @@
 ########################################
-# X11
-########################################
-IF (ADM_OS_LINUX OR ADM_OS_DARWIN)
-	MESSAGE(STATUS "Checking for X11")
-	MESSAGE(STATUS "****************")
-
-	FIND_PACKAGE(X11)
-	PRINT_LIBRARY_INFO("X11" X11_FOUND "${X11_INCLUDE_DIR}" "${X11_LIBRARIES}")
-
-	IF (NOT X11_FOUND)
-		SET(ADM_UI_GTK 0)
-
-		IF (ADM_OS_LINUX)
-			SET(ADM_UI_QT4 0)
-		ENDIF (ADM_OS_LINUX)
-	ENDIF (NOT X11_FOUND)
-
-	MESSAGE("")
-ENDIF (ADM_OS_LINUX OR ADM_OS_DARWIN)
-
-########################################
 # GLib
 ########################################
 MESSAGE(STATUS "Checking for GLib")
@@ -78,13 +57,13 @@
 ########################################
 OPTION(QT4 "" ON)
 
-MESSAGE(STATUS "Checking for QT4")
-MESSAGE(STATUS "****************")
+MESSAGE(STATUS "Checking for Qt 4")
+MESSAGE(STATUS "*****************")
 
 IF (QT4)
 	FIND_PACKAGE(Qt4)	
 	STRING(REGEX REPLACE "[\\]" "/" QT_INCLUDES "${QT_INCLUDES}")	# backslashes aren't taken care of properly on Windows
-	PRINT_LIBRARY_INFO("Qt4" QT4_FOUND "${QT_INCLUDES} ${QT_DEFINITIONS}" "${QT_QTCORE_LIBRARY} ${QT_QTGUI_LIBRARY}")
+	PRINT_LIBRARY_INFO("Qt 4" QT4_FOUND "${QT_INCLUDES} ${QT_DEFINITIONS}" "${QT_QTCORE_LIBRARY} ${QT_QTGUI_LIBRARY}")
 
 	MARK_AS_ADVANCED(LRELEASE_EXECUTABLE)
 	MARK_AS_ADVANCED(QT_MKSPECS_DIR)

Modified: branches/avidemux_2.5_branch_gruntster/cmake/admConfigSummary.cmake
===================================================================
--- branches/avidemux_2.5_branch_gruntster/cmake/admConfigSummary.cmake	2008-02-27 19:50:47 UTC (rev 3809)
+++ branches/avidemux_2.5_branch_gruntster/cmake/admConfigSummary.cmake	2008-02-28 23:33:15 UTC (rev 3810)
@@ -23,7 +23,7 @@
 MESSAGE("***    SUMMARY    ***")
 MESSAGE("*********************")
 ADM_DISPLAY("GTK+      " ADM_UI_GTK)
-ADM_DISPLAY("Qt4       " ADM_UI_QT4)
+ADM_DISPLAY("Qt 4      " ADM_UI_QT4)
 
 MESSAGE("***  Video Codec  ***")
 ADM_DISPLAY("x264      " USE_X264)

Modified: branches/avidemux_2.5_branch_gruntster/cmake/admDetermineSystem.cmake
===================================================================
--- branches/avidemux_2.5_branch_gruntster/cmake/admDetermineSystem.cmake	2008-02-27 19:50:47 UTC (rev 3809)
+++ branches/avidemux_2.5_branch_gruntster/cmake/admDetermineSystem.cmake	2008-02-28 23:33:15 UTC (rev 3810)
@@ -8,9 +8,10 @@
 INCLUDE(CMakeDetermineSystem)
 INCLUDE(TestBigEndian)
 
-# override detected processor for cross-compilation purposes
-IF (CROSS_SYSTEM_PROCESSOR)
-	SET(CMAKE_SYSTEM_PROCESSOR ${CROSS_SYSTEM_PROCESSOR})
+# override detected processor for cross-compilation purposes
+IF (CROSS_SYSTEM_PROCESSOR)
+	SET(CROSS_SYSTEM_PROCESSOR ${CROSS_SYSTEM_PROCESSOR} CACHE INTERNAL "")
+	SET(CMAKE_SYSTEM_PROCESSOR ${CROSS_SYSTEM_PROCESSOR})
 ENDIF (CROSS_SYSTEM_PROCESSOR)
 
 IF (WIN32)
@@ -41,6 +42,6 @@
 	MESSAGE(FATAL_ERROR "Operating System not supported (${CMAKE_SYSTEM_NAME})")
 ENDIF (NOT ADM_OS_DARWIN AND NOT ADM_OS_WINDOWS AND NOT ADM_OS_LINUX)
 
-IF (NOT ADM_CPU_X86 AND NOT ADM_CPU_X86_64)
+IF (NOT ADM_CPU_X86 AND NOT ADM_CPU_X86_64 AND NOT ADM_CPU_PPC)
 	MESSAGE(FATAL_ERROR "CPU not supported (${CMAKE_SYSTEM_PROCESSOR})")
-ENDIF (NOT ADM_CPU_X86 AND NOT ADM_CPU_X86_64)	
\ No newline at end of file
+ENDIF (NOT ADM_CPU_X86 AND NOT ADM_CPU_X86_64 AND NOT ADM_CPU_PPC)
\ No newline at end of file

Modified: branches/avidemux_2.5_branch_gruntster/cmake/admSetLavcodecFlags.cmake
===================================================================
--- branches/avidemux_2.5_branch_gruntster/cmake/admSetLavcodecFlags.cmake	2008-02-27 19:50:47 UTC (rev 3809)
+++ branches/avidemux_2.5_branch_gruntster/cmake/admSetLavcodecFlags.cmake	2008-02-28 23:33:15 UTC (rev 3810)
@@ -19,17 +19,22 @@
 SET(CONFIG_TG2_MUXER 1)
 SET(CONFIG_TGP_MUXER 1)
 
-SET(ENABLE_MMX 1)
 SET(ENABLE_THREADS 1)
-SET(HAVE_FAST_UNALIGNED 1)
 SET(HAVE_LRINTF 1)
-SET(HAVE_MMX 1)
 SET(HAVE_THREADS 1)
 SET(RUNTIME_CPUDETECT 1)
 
-IF (ADM_CPU_X86_64)
-	SET(HAVE_FAST_64BIT 1)
-ENDIF (ADM_CPU_X86_64)
+IF (ADM_CPU_X86 OR ADM_CPU_X86_64)
+	SET(ENABLE_MMX 1)
+	SET(HAVE_MMX 1)
+	SET(HAVE_FAST_UNALIGNED 1)
+
+	IF (ADM_CPU_X86_64)
+		SET(HAVE_FAST_64BIT 1)
+	ENDIF (ADM_CPU_X86_64)
+ELSE (ADM_CPU_X86 OR ADM_CPU_X86_64)
+	SET(ENABLE_MMX 0)
+ENDIF (ADM_CPU_X86 OR ADM_CPU_X86_64)
 
 IF (ADM_OS_DARWIN)
 	SET(CONFIG_DARWIN 1)
@@ -38,15 +43,15 @@
 ########################################
 # Check GCC support for SSSE3
 ########################################
-MESSAGE(STATUS "Checking GCC support for SSSE3")
-MESSAGE(STATUS "******************************")
+IF (ADM_CPU_X86 OR ADM_CPU_X86_64)
+	MESSAGE(STATUS "Checking GCC support for SSSE3")
+	MESSAGE(STATUS "******************************")
 
-IF (ADM_CPU_X86 OR ADM_CPU_X86_64)
 	ADM_COMPILE(ssse3_check.cpp "" "" "" SSSE3_SUPPORTED outputSsse3Test)
 
 	IF (SSSE3_SUPPORTED)
 		SET(HAVE_SSSE3 1)
-		
+
 		MESSAGE(STATUS "GCC supports SSSE3")
 	ELSE (SSSE3_SUPPORTED)
 		MESSAGE(STATUS "GCC doesn't support SSSE3")
@@ -55,6 +60,6 @@
 			MESSAGE("Error Message: ${outputSsse3Test}")
 		ENDIF (VERBOSE)	
 	ENDIF (SSSE3_SUPPORTED)
-ENDIF (ADM_CPU_X86 OR ADM_CPU_X86_64)
 
-MESSAGE("")
\ No newline at end of file
+	MESSAGE("")
+ENDIF (ADM_CPU_X86 OR ADM_CPU_X86_64)
\ No newline at end of file

Modified: branches/avidemux_2.5_branch_gruntster/cmake/config.h.cmake
===================================================================
--- branches/avidemux_2.5_branch_gruntster/cmake/config.h.cmake	2008-02-27 19:50:47 UTC (rev 3809)
+++ branches/avidemux_2.5_branch_gruntster/cmake/config.h.cmake	2008-02-28 23:33:15 UTC (rev 3810)
@@ -226,7 +226,7 @@
 /* use x264 encoder */
 #cmakedefine USE_X264
 
-#if (!defined(__APPLE__) && (${CONFIG_HEADER_TYPE} == ADM_BUILD_GTK || ${CONFIG_HEADER_TYPE} == ADM_BUILD_QT4)) || (defined(__APPLE__) && ${CONFIG_HEADER_TYPE} == ADM_BUILD_GTK)
+#if ${CONFIG_HEADER_TYPE} == ADM_BUILD_GTK || ${CONFIG_HEADER_TYPE} == ADM_BUILD_QT4
 /* XVideo detected */
 #cmakedefine USE_XV
 #endif



From mean at mail.berlios.de  Fri Feb 29 19:35:40 2008
From: mean at mail.berlios.de (mean at BerliOS)
Date: Fri, 29 Feb 2008 19:35:40 +0100
Subject: [Avidemux-svn-commit] r3811 - in
	branches/avidemux_2.5_branch_mean/avidemux: ADM_audio
	ADM_core/include ADM_libraries/ADM_utilities ADM_osSupport
	ADM_outputs/oplug_avi
Message-ID: <200802291835.m1TIZePE009466@sheep.berlios.de>

Author: mean
Date: 2008-02-29 19:35:39 +0100 (Fri, 29 Feb 2008)
New Revision: 3811

Added:
   branches/avidemux_2.5_branch_mean/avidemux/ADM_osSupport/ADM_fileio.h
Removed:
   branches/avidemux_2.5_branch_mean/avidemux/ADM_core/include/ADM_fileio.h
Modified:
   branches/avidemux_2.5_branch_mean/avidemux/ADM_audio/aviaudio.hxx
   branches/avidemux_2.5_branch_mean/avidemux/ADM_core/include/ADM_assert.h
   branches/avidemux_2.5_branch_mean/avidemux/ADM_core/include/ADM_clock.h
   branches/avidemux_2.5_branch_mean/avidemux/ADM_core/include/ADM_cpuCap.h
   branches/avidemux_2.5_branch_mean/avidemux/ADM_core/include/ADM_default.h
   branches/avidemux_2.5_branch_mean/avidemux/ADM_core/include/ADM_inttype.h
   branches/avidemux_2.5_branch_mean/avidemux/ADM_core/include/ADM_mangle.h
   branches/avidemux_2.5_branch_mean/avidemux/ADM_core/include/ADM_misc.h
   branches/avidemux_2.5_branch_mean/avidemux/ADM_core/include/ADM_threads.h
   branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_utilities/ADM_fileio.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_osSupport/ADM_quota.h
   branches/avidemux_2.5_branch_mean/avidemux/ADM_outputs/oplug_avi/avilist.h
   branches/avidemux_2.5_branch_mean/avidemux/ADM_outputs/oplug_avi/op_avisave.h
   branches/avidemux_2.5_branch_mean/avidemux/ADM_outputs/oplug_avi/op_aviwrite.cpp
Log:
[core] Move fileio away from core


Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_audio/aviaudio.hxx
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_audio/aviaudio.hxx	2008-02-28 23:33:15 UTC (rev 3810)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_audio/aviaudio.hxx	2008-02-29 18:35:39 UTC (rev 3811)
@@ -70,7 +70,7 @@
 #define WAV_NELLYMOSER   9901
 #define WAV_UNKNOWN     9999
 #include "../ADM_audiocodec/ADM_audiocodec.h"
-#include "ADM_fileio.h"
+#include "ADM_osSupport/ADM_fileio.h"
 
 
 

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_core/include/ADM_assert.h
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_core/include/ADM_assert.h	2008-02-28 23:33:15 UTC (rev 3810)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_core/include/ADM_assert.h	2008-02-29 18:35:39 UTC (rev 3811)
@@ -40,8 +40,8 @@
 int             ADM_fclose (FILE *file);
 uint8_t         ADM_fileExist(char *name);
 uint8_t         ADM_mkdir(const char *name);
-char            *ADM_rindex(const char *s, int c);
-char            *ADM_index(const char *s, int c);
+//char            *ADM_rindex(const char *s, int c);
+//char            *ADM_index(const char *s, int c);
 
 /* Replacements for memory allocation functions */
 extern void     *ADM_alloc(size_t size);

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_core/include/ADM_clock.h
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_core/include/ADM_clock.h	2008-02-28 23:33:15 UTC (rev 3810)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_core/include/ADM_clock.h	2008-02-29 18:35:39 UTC (rev 3811)
@@ -1,4 +1,19 @@
-//
+/** *************************************************************************
+    \fn ADM_clock.h
+    \brief Handle time class
+                      
+    copyright            : (C) 2008 by mean
+    
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ ***************************************************************************/
+
 #ifndef __CLK__
 #define __CLK__
 class Clock

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_core/include/ADM_cpuCap.h
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_core/include/ADM_cpuCap.h	2008-02-28 23:33:15 UTC (rev 3810)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_core/include/ADM_cpuCap.h	2008-02-29 18:35:39 UTC (rev 3811)
@@ -1,14 +1,19 @@
-//
-// C++ Interface: ADM_cpuCap
-//
-// Description: 
-//
-//
-// Author: mean <fixounet at free.fr>, (C) 2004
-//
-// Copyright: See COPYING file that comes with this distribution
-//
-//
+/** *************************************************************************
+    \fn ADM_cpuCap.h
+    \brief Handle cpu capabilities (MMX/SSE/...)
+                      
+    copyright            : (C) 2008 by mean
+    
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ ***************************************************************************/
+
 #if defined(ARCH_X86_64) ||defined(ARCH_X86)
 
 #define CHECK_Z(x) {if(CpuCaps::myCpuCaps & ADM_CPU_##x & CpuCaps::myCpuMask) return 1; else return 0;} 

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_core/include/ADM_default.h
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_core/include/ADM_default.h	2008-02-28 23:33:15 UTC (rev 3810)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_core/include/ADM_default.h	2008-02-29 18:35:39 UTC (rev 3811)
@@ -1,11 +1,13 @@
-/***************************************************************************
-                          ADM_default.h  -  description
-                             -------------------
-                Includes all core headers (var types, string, mutex, file,...)
+/** *************************************************************************
+             
+    \fn ADM_default.h
+    \brief include that file to get most of the basic types & functions
+                      
     copyright            : (C) 2008 by mean
-    email                : fixounet at free.fr
+    
  ***************************************************************************/
 
+
 /***************************************************************************
  *                                                                         *
  *   This program is free software; you can redistribute it and/or modify  *

Deleted: branches/avidemux_2.5_branch_mean/avidemux/ADM_core/include/ADM_fileio.h
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_core/include/ADM_fileio.h	2008-02-28 23:33:15 UTC (rev 3810)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_core/include/ADM_fileio.h	2008-02-29 18:35:39 UTC (rev 3811)
@@ -1,38 +0,0 @@
-//
-// C++ Interface: %{MODULE}
-//
-// Description: 
-//
-//
-// Author: Mean fixounet at free.Fr, (C) 2005 GPL 2
-//
-// Copyright: See COPYING file that comes with this distribution
-//      This tries to implement bufferd output io
-//      to speed up things a bit
-//
-#ifndef ADM_FILE_IO
-#define ADM_FILE_IO
-
-
-
-class ADMFile
-{
-protected:
-        FILE            *_out;
-        uint32_t        _fill;
-        uint8_t         *_buffer;	  
-        uint64_t        _curPos;
-public:
-                        ADMFile();
-                        ~ADMFile();
-        uint8_t         open(FILE *in);
-        uint8_t         write(uint8_t *in, uint32_t size);
-        uint8_t         flush(void);
-        uint8_t         seek(uint64_t where);
-        uint64_t        tell(void);
-	  
-
-
-};
-
-#endif

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_core/include/ADM_inttype.h
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_core/include/ADM_inttype.h	2008-02-28 23:33:15 UTC (rev 3810)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_core/include/ADM_inttype.h	2008-02-29 18:35:39 UTC (rev 3811)
@@ -1,19 +1,11 @@
-/***************************************************************************
-                          default.h  -  description
-                             -------------------
-    begin                : Thu Nov 1 2001
-    copyright            : (C) 2001 by mean
-    email                : fixounet at free.fr
+/** *************************************************************************
+    \fn ADM_inttype.h
+    \brief Defint plaform agnostic var type
+                      
+    copyright            : (C) 2008 by mean
+    
  ***************************************************************************/
 
-/***************************************************************************
- *                                                                         *
- *   This program is free software; you can redistribute it and/or modify  *
- *   it under the terms of the GNU General Public License as published by  *
- *   the Free Software Foundation; either version 2 of the License, or     *
- *   (at your option) any later version.                                   *
- *                                                                         *
- ***************************************************************************/
 #ifndef __ZDEFAULT
 #define __ZDEFAULT
 

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_core/include/ADM_mangle.h
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_core/include/ADM_mangle.h	2008-02-28 23:33:15 UTC (rev 3810)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_core/include/ADM_mangle.h	2008-02-29 18:35:39 UTC (rev 3811)
@@ -1,6 +1,10 @@
-// Symbol mangling for asm
-// is different on win32
-// Shamelessly borrowed from lavcodec
+/** *************************************************************************
+    \fn ADM_mangle.h
+    \brief Handle symbol mangling & register name for inline asm
+                      
+    copyright            : (C) 2008 by mean
+    
+ ***************************************************************************/
 
 #ifdef CYG_MANGLING // CYGWIN
 	#define Mangle(x) "_" #x

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_core/include/ADM_misc.h
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_core/include/ADM_misc.h	2008-02-28 23:33:15 UTC (rev 3810)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_core/include/ADM_misc.h	2008-02-29 18:35:39 UTC (rev 3811)
@@ -1,17 +1,11 @@
-/***************************************************************************
-                          ADM_misc.h  -  description
-    copyright            : (C) 2001 by mean
-    email                : fixounet at free.fr
+/** *************************************************************************
+    \fn ADM_misc.h
+    \brief Handle string/log/... related functions
+                      
+    copyright            : (C) 2008 by mean
+    
  ***************************************************************************/
 
-/***************************************************************************
- *                                                                         *
- *   This program is free software; you can redistribute it and/or modify  *
- *   it under the terms of the GNU General Public License as published by  *
- *   the Free Software Foundation; either version 2 of the License, or     *
- *   (at your option) any later version.                                   *
- *                                                                         *
- ***************************************************************************/
 
 #ifndef __ADM_MISC__
 #define __ADM_MISC__

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_core/include/ADM_threads.h
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_core/include/ADM_threads.h	2008-02-28 23:33:15 UTC (rev 3810)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_core/include/ADM_threads.h	2008-02-29 18:35:39 UTC (rev 3811)
@@ -1,19 +1,11 @@
-/***************************************************************************
-                    
-    copyright            : (C) 2006 by mean
-    email                : fixounet at free.fr
+/** *************************************************************************
+    \fn ADM_threads.h
+    \brief Handle thread synchronization functions (mutex...)
+                      
+    copyright            : (C) 2008 by mean
+    
  ***************************************************************************/
 
-/***************************************************************************
- *                                                                         *
- *   This program is free software; you can redistribute it and/or modify  *
- *   it under the terms of the GNU General Public License as published by  *
- *   the Free Software Foundation; either version 2 of the License, or     *
- *   (at your option) any later version.                                   *
- *                                                                         *
- ***************************************************************************/
-
-
 #ifndef ADM_THREADS_H
 #define ADM_THREADS_H
 

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_utilities/ADM_fileio.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_utilities/ADM_fileio.cpp	2008-02-28 23:33:15 UTC (rev 3810)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_utilities/ADM_fileio.cpp	2008-02-29 18:35:39 UTC (rev 3811)
@@ -22,7 +22,7 @@
 #include <ADM_assert.h>
 #include <math.h>
 #include "ADM_default.h"
-#include "ADM_fileio.h"
+#include "ADM_osSupport/ADM_fileio.h"
 #include "ADM_osSupport/ADM_quota.h"
 
 #define ADM_FILE_BUFFER 4*256*1024 // 256 kB

Added: branches/avidemux_2.5_branch_mean/avidemux/ADM_osSupport/ADM_fileio.h
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_osSupport/ADM_fileio.h	2008-02-28 23:33:15 UTC (rev 3810)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_osSupport/ADM_fileio.h	2008-02-29 18:35:39 UTC (rev 3811)
@@ -0,0 +1,42 @@
+/** *************************************************************************
+    \fn ADM_fileio.h
+    \brief Handle file access through a class
+                      
+    copyright            : (C) 2008 by mean
+    
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ ***************************************************************************/
+
+#ifndef ADM_FILE_IO
+#define ADM_FILE_IO
+
+
+
+class ADMFile
+{
+protected:
+        FILE            *_out;
+        uint32_t        _fill;
+        uint8_t         *_buffer;	  
+        uint64_t        _curPos;
+public:
+                        ADMFile();
+                        ~ADMFile();
+        uint8_t         open(FILE *in);
+        uint8_t         write(uint8_t *in, uint32_t size);
+        uint8_t         flush(void);
+        uint8_t         seek(uint64_t where);
+        uint64_t        tell(void);
+	  
+
+
+};
+
+#endif

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_osSupport/ADM_quota.h
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_osSupport/ADM_quota.h	2008-02-28 23:33:15 UTC (rev 3810)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_osSupport/ADM_quota.h	2008-02-29 18:35:39 UTC (rev 3811)
@@ -1,3 +1,18 @@
+/** *************************************************************************
+    \fn ADM_quota.h
+    \brief Handle disk full etc
+                      
+    copyright            : (C) 2008 by mean
+    
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ ***************************************************************************/
 #ifndef ADM_quota_h
 #define ADM_quota_h
 
@@ -16,9 +31,5 @@
 /* qfclose stands for quota-fclose() */
 int qfclose(FILE *);
 
-#if 0 //def USE_LIBXML2
-#include <libxml/tree.h>
-int qxmlSaveFormatFile(const char *filename, xmlDocPtr cur, int format);
-#endif
 
 #endif

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_outputs/oplug_avi/avilist.h
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_outputs/oplug_avi/avilist.h	2008-02-28 23:33:15 UTC (rev 3810)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_outputs/oplug_avi/avilist.h	2008-02-29 18:35:39 UTC (rev 3811)
@@ -41,7 +41,7 @@
 
 #ifndef __AVILIST__
 #define __AVILIST__
-#include "ADM_fileio.h"
+#include "ADM_osSupport/ADM_fileio.h"
 class AviList
 {
 protected:

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_outputs/oplug_avi/op_avisave.h
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_outputs/oplug_avi/op_avisave.h	2008-02-28 23:33:15 UTC (rev 3810)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_outputs/oplug_avi/op_avisave.h	2008-02-29 18:35:39 UTC (rev 3811)
@@ -21,7 +21,7 @@
  #include "DIA_working.h"
  #include "DIA_encoding.h"
  #include "ADM_image.h"
- #include "ADM_fileio.h"
+ #include "ADM_osSupport/ADM_fileio.h"
 #include "ADM_toolkit/ADM_audioQueue.h"
 
  class GenericAviSave

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_outputs/oplug_avi/op_aviwrite.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_outputs/oplug_avi/op_aviwrite.cpp	2008-02-28 23:33:15 UTC (rev 3810)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_outputs/oplug_avi/op_aviwrite.cpp	2008-02-29 18:35:39 UTC (rev 3811)
@@ -44,7 +44,7 @@
 #include "op_aviwrite.hxx"
 #include "ADM_toolkit/toolkit.hxx"
 #include "ADM_osSupport/ADM_quota.h"
-#include "ADM_fileio.h"
+#include "ADM_osSupport/ADM_fileio.h"
 
 // MOD Feb 2005 by GMV
 #include "ADM_osSupport/ADM_debugID.h"



