<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Avidemux-svn-commit] r3419 - in	branches/avidemux_2.4_branch/avidemux: .	ADM_userInterfaces/ADM_GTK/ADM_dialog	ADM_userInterfaces/ADM_GTK/ADM_filters	ADM_userInterfaces/ADM_NONE/ADM_gui2	ADM_userInterfaces/ADM_QT4/ADM_dialog	ADM_userInterfaces/ADM_QT4/ADM_gui	ADM_userInterfaces/ADM_commonUI ADM_video
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/avidemux-svn-commit/2007-July/index.html" >
   <LINK REL="made" HREF="mailto:avidemux-svn-commit%40lists.berlios.de?Subject=Re%3A%20%5BAvidemux-svn-commit%5D%20r3419%20-%20in%0A%09branches/avidemux_2.4_branch/avidemux%3A%20.%0A%09ADM_userInterfaces/ADM_GTK/ADM_dialog%0A%09ADM_userInterfaces/ADM_GTK/ADM_filters%0A%09ADM_userInterfaces/ADM_NONE/ADM_gui2%0A%09ADM_userInterfaces/ADM_QT4/ADM_dialog%0A%09ADM_userInterfaces/ADM_QT4/ADM_gui%0A%09ADM_userInterfaces/ADM_commonUI%20ADM_video&In-Reply-To=%3C200707202306.l6KN60mV007857%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000693.html">
   <LINK REL="Next"  HREF="000695.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Avidemux-svn-commit] r3419 - in	branches/avidemux_2.4_branch/avidemux: .	ADM_userInterfaces/ADM_GTK/ADM_dialog	ADM_userInterfaces/ADM_GTK/ADM_filters	ADM_userInterfaces/ADM_NONE/ADM_gui2	ADM_userInterfaces/ADM_QT4/ADM_dialog	ADM_userInterfaces/ADM_QT4/ADM_gui	ADM_userInterfaces/ADM_commonUI ADM_video</H1>
    <B>gruntster at mail.berlios.de</B> 
    <A HREF="mailto:avidemux-svn-commit%40lists.berlios.de?Subject=Re%3A%20%5BAvidemux-svn-commit%5D%20r3419%20-%20in%0A%09branches/avidemux_2.4_branch/avidemux%3A%20.%0A%09ADM_userInterfaces/ADM_GTK/ADM_dialog%0A%09ADM_userInterfaces/ADM_GTK/ADM_filters%0A%09ADM_userInterfaces/ADM_NONE/ADM_gui2%0A%09ADM_userInterfaces/ADM_QT4/ADM_dialog%0A%09ADM_userInterfaces/ADM_QT4/ADM_gui%0A%09ADM_userInterfaces/ADM_commonUI%20ADM_video&In-Reply-To=%3C200707202306.l6KN60mV007857%40sheep.berlios.de%3E"
       TITLE="[Avidemux-svn-commit] r3419 - in	branches/avidemux_2.4_branch/avidemux: .	ADM_userInterfaces/ADM_GTK/ADM_dialog	ADM_userInterfaces/ADM_GTK/ADM_filters	ADM_userInterfaces/ADM_NONE/ADM_gui2	ADM_userInterfaces/ADM_QT4/ADM_dialog	ADM_userInterfaces/ADM_QT4/ADM_gui	ADM_userInterfaces/ADM_commonUI ADM_video">gruntster at mail.berlios.de
       </A><BR>
    <I>Sat Jul 21 01:06:00 CEST 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="000693.html">[Avidemux-svn-commit] r3418 - in	branches/avidemux_2.4_branch/avidemux: ADM_codecs ADM_encoder	ADM_filter ADM_userInterfaces/ADM_commonUI
</A></li>
        <LI>Next message: <A HREF="000695.html">[Avidemux-svn-commit] r3420 -	branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_commonUI
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#694">[ date ]</a>
              <a href="thread.html#694">[ thread ]</a>
              <a href="subject.html#694">[ subject ]</a>
              <a href="author.html#694">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: gruntster
Date: 2007-07-21 01:05:42 +0200 (Sat, 21 Jul 2007)
New Revision: 3419

Added:
   branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flyPreview.h
Removed:
   branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filter.cpp
Modified:
   branches/avidemux_2.4_branch/avidemux/ADM_preview.cpp
   branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_flyDialog.cpp
   branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_preview.cpp
   branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/CMakeLists.txt
   branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/Makefile.am
   branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager.cpp
   branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_NONE/ADM_gui2/preview_none.cpp
   branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/T_flyDialog.cpp
   branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/T_preview.cpp
   branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flyDialog.cpp
   branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flyDialog.h
   branches/avidemux_2.4_branch/avidemux/ADM_video/ADM_genvideo.hxx
   branches/avidemux_2.4_branch/avidemux/gtk_gui.cpp
Log:
[Preview] flyDialog preview windows for GTK

Modified: branches/avidemux_2.4_branch/avidemux/ADM_preview.cpp
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_preview.cpp	2007-07-19 19:39:25 UTC (rev 3418)
+++ branches/avidemux_2.4_branch/avidemux/ADM_preview.cpp	2007-07-20 23:05:42 UTC (rev 3419)
@@ -187,7 +187,7 @@
             switch(previewMode)
             {
               case  ADM_PREVIEW_SEPARATE:
-                  GUI_PreviewInit(preview-&gt;getInfo()-&gt;width,preview-&gt;getInfo()-&gt;height,0);
+                  DIA_previewInit(preview-&gt;getInfo()-&gt;width,preview-&gt;getInfo()-&gt;height);
                   
                   /* no break here, not a mistake */
               case  ADM_PREVIEW_NONE:
@@ -255,7 +255,7 @@
 {
   renderLock();
       if(previewMode==ADM_PREVIEW_SEPARATE)
-                GUI_PreviewEnd();
+                DIA_previewEnd();
       if(  previewMode==ADM_PREVIEW_SIDE || previewMode==ADM_PREVIEW_TOP)
       {
         ADM_assert(original);
@@ -386,13 +386,13 @@
                 if(!defered_display) 
                   renderUpdateImage(resized-&gt;data,zoom);
             }
-          if( GUI_PreviewStillAlive())
+          if( DIA_previewStillAlive())
           {
                   aprintf(&quot;Preview: Ask for frame %lu\n&quot;,framenum);
                   if(framenum&lt;=preview-&gt;getInfo()-&gt;nb_frames-1)
                   {
                           preview-&gt;getFrameNumberNoAlloc(framenum,&amp;len,previewImage,&amp;fl);
-                          if(!defered_display) GUI_PreviewUpdate(previewImage-&gt;data);
+                          if(!defered_display) DIA_previewUpdate(previewImage-&gt;data);
                   }
           }
           break;
@@ -507,9 +507,9 @@
                 ADM_assert(resized);
                 renderUpdateImage(resized-&gt;data,zoom);
             }
-            if( GUI_PreviewStillAlive())
+            if( DIA_previewStillAlive())
             {
-                GUI_PreviewUpdate(previewImage-&gt;data);
+                DIA_previewUpdate(previewImage-&gt;data);
             }
           break;
       case ADM_PREVIEW_SIDE:
@@ -529,6 +529,8 @@
 
 void admPreview::cleanUp(void)
 {
+	admPreview::stop();
+
 	if(rdrImage)
 	{
 		delete rdrImage;
@@ -546,17 +548,5 @@
 		delete previewImage; 
 		previewImage=NULL;
 	}
-
-	if(resized)
-	{
-		delete resized;
-		resized=NULL;
-	}
-
-	if(resizer)
-	{
-		delete resizer;
-		resizer=NULL;
-	}
 }
 // EOF

Modified: branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_flyDialog.cpp
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_flyDialog.cpp	2007-07-19 19:39:25 UTC (rev 3418)
+++ branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_flyDialog.cpp	2007-07-20 23:05:42 UTC (rev 3419)
@@ -12,30 +12,31 @@
 *                                                                         *
 ***************************************************************************///
 
-#include &lt;config.h&gt;
+#include &quot;config.h&quot;
 
-#include &lt;string.h&gt;
-#include &lt;stdio.h&gt;
-# include &lt;math.h&gt;
-
-#include &lt;gdk/gdkkeysyms.h&gt;
 #include &lt;gtk/gtk.h&gt;
 
 #include &quot;default.h&quot;
-
-#include &quot;ADM_toolkit_gtk/ADM_gladeSupport.h&quot;
 #include &quot;ADM_toolkit_gtk/toolkit_gtk.h&quot;
 #include &quot;ADM_toolkit_gtk/toolkit_gtk_include.h&quot;
-#include &quot;ADM_toolkit/toolkit.hxx&quot;
-
-#include &quot;ADM_colorspace/ADM_rgb.h&quot;
-#include &quot;ADM_image.h&quot;
 #include &quot;ADM_video/ADM_genvideo.hxx&quot;
 #include &quot;DIA_flyDialog.h&quot;
 #include &quot;ADM_assert.h&quot;
 
 extern void GUI_RGBDisplay(uint8_t * dis, uint32_t w, uint32_t h, void *widg);
 
+void ADM_flyDialog::postInit(uint32_t width, uint32_t height, AVDMGenericVideoStream *in,
+							 void *canvas, void *slider, int yuv)
+{
+	if (slider != NULL)
+	{
+		GtkAdjustment *adj = (GtkAdjustment*)gtk_adjustment_new(0, 0, in-&gt;getInfo()-&gt;nb_frames - 1, 0, 0, 0);
+
+		gtk_range_set_adjustment(GTK_RANGE(_slider), adj);
+		gtk_scale_set_digits(GTK_SCALE(_slider), 0);
+	}
+}
+
 uint8_t  ADM_flyDialog::display(void)
 {
 	ADM_assert(_canvas);
@@ -51,20 +52,30 @@
 
 	return 1; 
 }
+
 uint32_t ADM_flyDialog::sliderGet(void)
 {
-  ADM_assert(_slider);
-  GtkAdjustment *adj=gtk_range_get_adjustment (GTK_RANGE(_slider));
-  return (uint32_t)GTK_ADJUSTMENT(adj)-&gt;value;
+	ADM_assert(_slider);
+	GtkAdjustment *adj=gtk_range_get_adjustment (GTK_RANGE(_slider));
+	return (uint32_t)GTK_ADJUSTMENT(adj)-&gt;value;
 }
-uint8_t     ADM_flyDialog::sliderSet(uint32_t value)
+
+uint8_t ADM_flyDialog::sliderSet(uint32_t value)
 {
-  ADM_assert(_slider);
-  return 1; 
+	ADM_assert(_slider);
+
+	GtkAdjustment *adj = gtk_range_get_adjustment(GTK_RANGE(_slider));
+
+	adj-&gt;value = value;
+
+	gtk_range_set_adjustment(GTK_RANGE(_slider), adj);
+
+	return 1; 
 }
-uint8_t  ADM_flyDialog::isRgbInverted(void)
+
+uint8_t ADM_flyDialog::isRgbInverted(void)
 {
-  return 0; 
+	return 0; 
 }
 
 //EOF

Modified: branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_preview.cpp
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_preview.cpp	2007-07-19 19:39:25 UTC (rev 3418)
+++ branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_preview.cpp	2007-07-20 23:05:42 UTC (rev 3419)
@@ -1,6 +1,6 @@
 /***************************************************************************
-                          ADM_vidpreview.cpp  -  description
-                             -------------------
+                             DIA_preview.cpp
+                             ---------------
 
        Previewer, we switch to RGB (only one Xv at a time)   and display the incoming
        YV12 buffer in a nice windowd
@@ -20,366 +20,193 @@
  ***************************************************************************/
 
 #include &quot;config.h&quot;
- 
-#include &lt;stdio.h&gt;
-#include &lt;stdlib.h&gt;
-#include &lt;string.h&gt;
-
 #include &lt;gtk/gtk.h&gt;
-#include &lt;time.h&gt;
-#include &lt;sys/time.h&gt;
 
-#include &quot;config.h&quot;
-#include &quot;fourcc.h&quot;
-#include &quot;avio.hxx&quot;
-
-#include &quot;avi_vars.h&quot;
-#include &quot;ADM_toolkit_gtk/ADM_gladeSupport.h&quot;
+#include &quot;default.h&quot;
 #include &quot;ADM_toolkit_gtk/toolkit_gtk.h&quot;
 #include &quot;ADM_toolkit_gtk/toolkit_gtk_include.h&quot;
-#include &quot;ADM_colorspace/ADM_rgb.h&quot;
-#include &quot;prototype.h&quot;
-#include &lt;ADM_assert.h&gt;
-#include &quot;gui_action.hxx&quot;
+#include &quot;ADM_video/ADM_genvideo.hxx&quot;
+#include &quot;ADM_assert.h&quot;
 
-extern &quot;C&quot; {
-#include &quot;ADM_libraries/ADM_lavcodec/avcodec.h&quot;
-}
+#include &quot;DIA_flyDialog.h&quot;
+#include &quot;DIA_flyPreview.h&quot;
 
-extern void HandleAction (Action action);
-void GUI_detransient(void );
-void GUI_retransient(void );
+static GtkWidget *create_dialog1(void);
+extern float UI_calcZoomToFitScreen(GtkWindow* window, GtkWidget* drawingArea, uint32_t imageWidth, uint32_t imageHeight);
 
-static GtkWidget	*create_dialog1 (void);
-static uint8_t      stacked=0;
-static void 			previewRender(void);
-static gboolean		preview_exit(GtkButton * button, gpointer user_data);
-static gboolean         cb_prev(GtkButton * button, gpointer user_data);
-static gboolean         cb_stack(GtkButton * button, gpointer user_data);
-static gboolean         cb_next(GtkButton * button, gpointer user_data);
-static gboolean 		preview_exit_short (GtkWidget * widget,GdkEvent * event, gpointer user_data);
+static GtkWidget *dialog = NULL;
 
-static uint8_t *rgb_render=NULL,*rgb_alternate=NULL,*rgbDisplay=NULL;
-static GtkWidget *dialog=NULL;
-static uint32_t 	uw, uh,zoomW,zoomH;
-int 			lock;
-uint8_t		needDestroy=0;
-static int      needResponse=0;
-static ColYuvRgb    rgbConv(100,100);
-static ADMImageResizer *resizer=NULL;
+static flySeekablePreview *seekablePreview;
+static void seekablePreview_draw(void);
+static void seekablePreview_frame_changed(void);
 
-extern float UI_calcZoomToFitScreen(GtkWindow* window, GtkWidget* drawingArea, uint32_t imageWidth, uint32_t imageHeight);
-
-//*************************************************************
-// Short cut for filter preview
-// It is a modal blocking display of the datas given as arg
-//*************************************************************
-void GUI_PreviewShow(uint32_t w, uint32_t h, uint8_t *data)
+/* =================================
+            Filter Preview
+   ================================= */
+uint8_t DIA_filterPreview(char *captionText, AVDMGenericVideoStream *videoStream, uint32_t frame)
 {
-	if(rgb_render)
-	{
-		printf(&quot;\nWarning rgb render not null...\n&quot;);
-		delete[] rgb_render;
-		delete[] rgb_alternate;
-		rgb_alternate=NULL;
-		rgb_render=NULL;
-	}
+	ADM_assert(frame &lt;= videoStream-&gt;getInfo()-&gt;nb_frames);
 
-	rgb_render=new uint8_t [w*h*4];
-	rgb_alternate=new uint8_t [w*h*4];
+	GtkWidget *hbuttonbox1, *buttonOk, *scale;
 
-	uw=w;
-	uh=h;
-	rgbConv.reset(w,h);
-	rgbConv.scale(data,rgb_render);
+	dialog = create_dialog1();
+	
+	scale = gtk_hscale_new (GTK_ADJUSTMENT (gtk_adjustment_new (0, 0, 110, 1, 10, 10)));
+	gtk_widget_show (scale);
+	gtk_box_pack_start (GTK_BOX(WID(vbox1)), scale, FALSE, TRUE, 0);
 
-	dialog=create_dialog1();
+	hbuttonbox1 = gtk_hbutton_box_new ();
+	gtk_widget_show (hbuttonbox1);
+	gtk_box_pack_start (GTK_BOX(WID(vbox1)), hbuttonbox1, FALSE, TRUE, 0);
+	gtk_button_box_set_layout (GTK_BUTTON_BOX(hbuttonbox1), GTK_BUTTONBOX_END);
+
+	buttonOk = gtk_button_new_from_stock (&quot;gtk-ok&quot;);
+	gtk_widget_show(buttonOk);
+	gtk_container_add (GTK_CONTAINER(hbuttonbox1), buttonOk);
+	GTK_WIDGET_SET_FLAGS (buttonOk, GTK_CAN_DEFAULT);
+
+	GLADE_HOOKUP_OBJECT (dialog, scale, &quot;scale&quot;);
+	GLADE_HOOKUP_OBJECT(dialog, hbuttonbox1, &quot;hbuttonbox1&quot;);
+	GLADE_HOOKUP_OBJECT(dialog, buttonOk, &quot;buttonOk&quot;);	
+	
 	gtk_register_dialog(dialog);
 
-	float zoom = UI_calcZoomToFitScreen(GTK_WINDOW(dialog), WID(drawingarea1), w, h);
+	if (captionText)
+		gtk_window_set_title(GTK_WINDOW(dialog), captionText);
 
-	zoomW = w * zoom;
-	zoomH = h * zoom;
+	uint32_t width, height;
 
+	width = videoStream-&gt;getInfo()-&gt;width;
+	height = videoStream-&gt;getInfo()-&gt;height;
+
+	float zoom = UI_calcZoomToFitScreen(GTK_WINDOW(dialog), WID(drawingarea1), width, height);
+
+	uint32_t zoomW = width * zoom;
+	uint32_t zoomH = height * zoom;
+
 	gtk_widget_set_usize(WID(drawingarea1), zoomW, zoomH);
 
 	if (zoom &lt; 1)
-	{
 		gtk_window_set_position(GTK_WINDOW(dialog), GTK_WIN_POS_CENTER);
-		resizer = new ADMImageResizer(w, h, zoomW, zoomH, PIX_FMT_RGB32, PIX_FMT_RGB32);
-		rgbDisplay = new uint8_t[zoomW*zoomH*4];
-	}
-	
-	gtk_signal_connect(GTK_OBJECT(WID(drawingarea1)), &quot;expose_event&quot;,
-		   GTK_SIGNAL_FUNC(previewRender), NULL);
 
-	gtk_dialog_run(GTK_DIALOG(dialog));
-	gtk_unregister_dialog(dialog);
-	gtk_widget_destroy(dialog);
+	gtk_signal_connect(GTK_OBJECT(WID(scale)), &quot;value_changed&quot;, GTK_SIGNAL_FUNC(seekablePreview_frame_changed), NULL);
+	gtk_signal_connect(GTK_OBJECT(WID(drawingarea1)), &quot;expose_event&quot;, GTK_SIGNAL_FUNC(seekablePreview_draw), NULL);
+	gtk_dialog_add_action_widget(GTK_DIALOG(dialog), WID(buttonOk), GTK_RESPONSE_OK);
 
-	delete[] rgb_render;
-	delete[] rgb_alternate;
+	gtk_widget_show(dialog);
 
-	if (resizer)
+	seekablePreview = new flySeekablePreview(width, height, videoStream, WID(drawingarea1), WID(scale));
+	seekablePreview-&gt;resizeImage(zoomW, zoomH);
+	seekablePreview-&gt;sliderSet(frame);
+	seekablePreview-&gt;sliderChanged();
+
+	int response;
+
+	while((response = gtk_dialog_run(GTK_DIALOG(dialog))) == GTK_RESPONSE_APPLY)
 	{
-		delete resizer;
-		delete rgbDisplay;
-		resizer=NULL;
-		rgbDisplay=NULL;
+		seekablePreview_draw();
 	}
 
-	rgb_alternate=NULL;
-	rgb_render=NULL;
+	gtk_unregister_dialog(dialog);
+	gtk_widget_destroy(dialog);
+	delete seekablePreview;
+
+	return (response == GTK_RESPONSE_OK);
 }
-//*************************************************************
-// Init previewer
-// It is a independant window, so we cannot use gtk_dialog_run
-//
-//*************************************************************
-uint8_t GUI_PreviewStillAlive( void )
-{
- 	if(dialog==NULL) return 0;
-  	return 1;
 
+void seekablePreview_draw(void)
+{
+	seekablePreview-&gt;display();
 }
-void GUI_PreviewInit(uint32_t w , uint32_t h,uint32_t modal)
+
+void seekablePreview_frame_changed(void)
 {
-        if(rgb_render)
-        {
-                printf(&quot;\n Warning rgb render not null...\n&quot;);
-                delete [] rgb_render;
-                delete [] rgb_alternate;
-                rgb_alternate=NULL;
-                rgb_render=NULL;
-        }
-        stacked=0;
-       ADM_assert(rgb_render=new uint8_t [w*h*4]);
-       ADM_assert(rgb_alternate=new uint8_t [w*h*4]);
-       uw=w;
-       uh=h;
-       rgbConv.reset(w,h); 
+	seekablePreview-&gt;sliderChanged();
+}
 
-       // add callback for destroy
-        lock=0;
-        needDestroy=1;
+/* =================================
+                Preview
+   ================================= */
+static flyPreview *preview;
+static void preview_draw(void);
 
-#define CNX(x,y,z)  gtk_signal_connect(GTK_OBJECT(x), #y, \
-                       GTK_SIGNAL_FUNC(z),                   (void *) NULL);
+void DIA_previewInit(uint32_t width, uint32_t height)
+{
+	dialog = create_dialog1();
+	gtk_widget_set_usize(WID(drawingarea1), width, height);
 
-        dialog=create_dialog1();
-/*
-        CNX(WID(buttonNext),clicked     ,cb_next);
-        CNX(WID(buttonPrev),clicked     ,cb_prev);
-*/
-        CNX(WID(drawingarea1),expose_event,previewRender);
+	gtk_signal_connect(GTK_OBJECT(WID(drawingarea1)), &quot;expose_event&quot;, GTK_SIGNAL_FUNC(preview_draw), NULL);
+	gtk_widget_show(dialog);
 
- //       CNX(dialog    ,delete_event,preview_exit_short);
-
-        gtk_widget_set_usize (lookup_widget(dialog,&quot;drawingarea1&quot;),w,h);
-        gtk_widget_show(  dialog);
+	preview = new flyPreview(width, height, WID(drawingarea1));
 }
 
-static uint8_t stack(uint8_t *out, uint8_t *in, int width,int height)
+uint8_t DIA_previewStillAlive(void)
 {
- uint8_t *o1,*o2,*i;
- int x,y;
-        o1=out;
-        o2=out+((width*height)&gt;&gt;1);
-        i=in;
-        for(y=0;y&lt;height&gt;&gt;1;y++)
-        {
-            memcpy(o1,i,width); 
-            memcpy(o2,i+width,width);  
-            o1+=width;
-            o2+=width;
-            i+=2*width;        
-        }   
-    return 1;
+	return (dialog != NULL);
 }
-// return 1 if preview is still running
-uint8_t  GUI_PreviewUpdate(uint8_t *data)
-{
-        if(  dialog)
-        {
 
-                // First convert YV12 to RGB
-                // COL_yv12rgb( uw, uh,data, rgb_render);
-                if(!stacked)
-                {
-                        rgbConv.scale(data,rgb_render);
-                }else
-                {
-                        stack(rgb_alternate,data, uw,uh);
-                        stack(rgb_alternate+uw*uh,data+uw*uh, uw&gt;&gt;1,uh&gt;&gt;1);
-                        stack(rgb_alternate+((5*uw*uh)&gt;&gt;2),data+((5*uw*uh)&gt;&gt;2), uw&gt;&gt;1,uh&gt;&gt;1);
-                        rgbConv.scale(rgb_alternate,rgb_render);
-                }
-                previewRender();
-                if(lock==1)
-                {
-                        dialog=NULL;
-                        return 0;
-                }
-                else
-                        return 1;
-        }
-        return 0;
-}
-uint8_t  GUI_PreviewRun(uint8_t *data)
+uint8_t DIA_previewUpdate(uint8_t *buffer)
 {
-    ADM_assert(0);
-}
+	if (dialog)
+	{
+		preview-&gt;setData(buffer);
+		preview-&gt;display();
 
-void GUI_PreviewEnd(void)
-{
-        if(dialog &amp;&amp; needDestroy)
-        {
-                gtk_widget_destroy(dialog);
-        }
-        if(rgb_render)
-        {
-                delete [] rgb_render;
-                rgb_render=NULL;
-                delete [] rgb_alternate;
-                rgb_alternate=NULL;
-        }
-        dialog=NULL;
-        needDestroy=0;
+		return 1;
+	}
+
+	return 0;
 }
 
-void previewRender(void)
+void DIA_previewEnd(void)
 {
-	if(!dialog) return;
-
-	if (resizer)
+	if(dialog)
 	{
-		resizer-&gt;resize(rgb_render, rgbDisplay);
-		GUI_RGBDisplay(rgbDisplay, zoomW, zoomH, WID(drawingarea1));
+		delete preview;
+
+		gtk_widget_destroy(dialog);
+		dialog = NULL;
 	}
-	else
-		GUI_RGBDisplay(rgb_render, uw, uh, WID(drawingarea1));
 }
 
-gboolean         cb_stack(GtkButton * button, gpointer user_data)
+void preview_draw(void)
 {
-	stacked^=1;
-	return FALSE;
+	preview-&gt;display();
 }
 
-// Called when window is destroyed
-gboolean preview_exit_short (GtkWidget * widget, GdkEvent * event, gpointer user_data)
-{
-    UNUSED_ARG(widget);
-    UNUSED_ARG(event);
-    UNUSED_ARG(user_data);
-//	printf(&quot;destroyed\n&quot;);
-        printf(&quot;Destroy call\n&quot;);
-    if(lock==0 )
-    {
-    		lock=-1;
-		//printf(&quot;&gt;\n&quot;);
-		needDestroy=0;
-    		GUI_PreviewEnd();
-                printf(&quot;Destroyed\n&quot;);
-                
-    }
-	return FALSE;
-}
-static gboolean         cb_prev(GtkButton * button, gpointer user_data)
-{
-        HandleAction(ACT_PreviousFrame);
-        return TRUE;
-}
-static gboolean         cb_next(GtkButton * button, gpointer user_data)
-{
-        HandleAction(ACT_NextFrame);
-        return FALSE;
-}
-/**********************************************************
-***********************************************************
-***********************************************************/
+
+/* =================================
+             Common Dialog
+   ================================= */
 GtkWidget*
 create_dialog1 (void)
 {
-  GtkWidget *dialog1;
-  GtkWidget *dialog_vbox1;
-  GtkWidget *vbox1;
-  GtkWidget *toolbar1;
-  GtkIconSize tmp_toolbar_icon_size;
-  GtkWidget *toolitem1;
-  GtkWidget *buttonPrev;
-  GtkWidget *toolitem2;
-  GtkWidget *buttonNext;
-  GtkWidget *toolitem3;
-  GtkWidget *buttonStack;
-  GtkWidget *drawingarea1;
-  GtkWidget *dialog_action_area1;
+	GtkWidget *dialog1;
+	GtkWidget *dialog_vbox1;
+	GtkWidget *vbox1;
+	GtkWidget *drawingarea1;
 
-  dialog1 = gtk_dialog_new ();
-  gtk_window_set_title (GTK_WINDOW (dialog1), _(&quot;Preview&quot;));
-  gtk_window_set_type_hint (GTK_WINDOW (dialog1), GDK_WINDOW_TYPE_HINT_DIALOG);
+	dialog1 = gtk_dialog_new ();
+	gtk_window_set_title (GTK_WINDOW (dialog1), _(&quot;Preview&quot;));
 
-  dialog_vbox1 = GTK_DIALOG (dialog1)-&gt;vbox;
-  gtk_widget_show (dialog_vbox1);
+	dialog_vbox1 = GTK_DIALOG (dialog1)-&gt;vbox;
+	gtk_widget_show (dialog_vbox1);
 
-  vbox1 = gtk_vbox_new (FALSE, 0);
-  gtk_widget_show (vbox1);
-  gtk_box_pack_start (GTK_BOX (dialog_vbox1), vbox1, TRUE, TRUE, 0);
+	vbox1 = gtk_vbox_new (FALSE, 0);
+	gtk_widget_show (vbox1);
+	gtk_box_pack_start (GTK_BOX (dialog_vbox1), vbox1, TRUE, TRUE, 0);
 
-  toolbar1 = gtk_toolbar_new ();
-  gtk_widget_show (toolbar1);
-  gtk_box_pack_start (GTK_BOX (vbox1), toolbar1, FALSE, FALSE, 0);
-  gtk_toolbar_set_style (GTK_TOOLBAR (toolbar1), GTK_TOOLBAR_BOTH);
-  tmp_toolbar_icon_size = gtk_toolbar_get_icon_size (GTK_TOOLBAR (toolbar1));
+	drawingarea1 = gtk_drawing_area_new ();
+	gtk_widget_show (drawingarea1);
+	gtk_box_pack_start (GTK_BOX (vbox1), drawingarea1, FALSE, TRUE, 0);
+	gtk_widget_set_size_request (drawingarea1, 100, 100);
 
-  toolitem1 = (GtkWidget*) gtk_tool_item_new ();
-  gtk_widget_show (toolitem1);
-  gtk_container_add (GTK_CONTAINER (toolbar1), toolitem1);
+	// Store pointers to all widgets, for use by lookup_widget().
+	GLADE_HOOKUP_OBJECT_NO_REF (dialog1, dialog1, &quot;dialog1&quot;);
+	GLADE_HOOKUP_OBJECT_NO_REF (dialog1, dialog_vbox1, &quot;dialog_vbox1&quot;);
+	GLADE_HOOKUP_OBJECT (dialog1, vbox1, &quot;vbox1&quot;);
+	GLADE_HOOKUP_OBJECT (dialog1, drawingarea1, &quot;drawingarea1&quot;);
 
-  buttonPrev = gtk_button_new_from_stock (&quot;gtk-media-previous&quot;);
-  gtk_widget_show (buttonPrev);
-  gtk_container_add (GTK_CONTAINER (toolitem1), buttonPrev);
-
-  toolitem2 = (GtkWidget*) gtk_tool_item_new ();
-  gtk_widget_show (toolitem2);
-  gtk_container_add (GTK_CONTAINER (toolbar1), toolitem2);
-
-  buttonNext = gtk_button_new_from_stock (&quot;gtk-media-next&quot;);
-  gtk_widget_show (buttonNext);
-  gtk_container_add (GTK_CONTAINER (toolitem2), buttonNext);
-
-  toolitem3 = (GtkWidget*) gtk_tool_item_new ();
-  gtk_widget_show (toolitem3);
-  gtk_container_add (GTK_CONTAINER (toolbar1), toolitem3);
-
-  buttonStack = gtk_button_new_with_mnemonic (_(&quot;Stack Field&quot;));
-  gtk_widget_show (buttonStack);
-  gtk_container_add (GTK_CONTAINER (toolitem3), buttonStack);
-
-  drawingarea1 = gtk_drawing_area_new ();
-  gtk_widget_show (drawingarea1);
-  gtk_box_pack_start (GTK_BOX (vbox1), drawingarea1, TRUE, TRUE, 0);
-
-  dialog_action_area1 = GTK_DIALOG (dialog1)-&gt;action_area;
-  gtk_widget_show (dialog_action_area1);
-  gtk_button_box_set_layout (GTK_BUTTON_BOX (dialog_action_area1), GTK_BUTTONBOX_END);
-
-  /* Store pointers to all widgets, for use by lookup_widget(). */
-  GLADE_HOOKUP_OBJECT_NO_REF (dialog1, dialog1, &quot;dialog1&quot;);
-  GLADE_HOOKUP_OBJECT_NO_REF (dialog1, dialog_vbox1, &quot;dialog_vbox1&quot;);
-  GLADE_HOOKUP_OBJECT (dialog1, vbox1, &quot;vbox1&quot;);
-  GLADE_HOOKUP_OBJECT (dialog1, toolbar1, &quot;toolbar1&quot;);
-  GLADE_HOOKUP_OBJECT (dialog1, toolitem1, &quot;toolitem1&quot;);
-  GLADE_HOOKUP_OBJECT (dialog1, buttonPrev, &quot;buttonPrev&quot;);
-  GLADE_HOOKUP_OBJECT (dialog1, toolitem2, &quot;toolitem2&quot;);
-  GLADE_HOOKUP_OBJECT (dialog1, buttonNext, &quot;buttonNext&quot;);
-  GLADE_HOOKUP_OBJECT (dialog1, toolitem3, &quot;toolitem3&quot;);
-  GLADE_HOOKUP_OBJECT (dialog1, buttonStack, &quot;buttonStack&quot;);
-  GLADE_HOOKUP_OBJECT (dialog1, drawingarea1, &quot;drawingarea1&quot;);
-  GLADE_HOOKUP_OBJECT_NO_REF (dialog1, dialog_action_area1, &quot;dialog_action_area1&quot;);
-
-  return dialog1;
+	return dialog1;
 }
-
-
-

Modified: branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/CMakeLists.txt
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/CMakeLists.txt	2007-07-19 19:39:25 UTC (rev 3418)
+++ branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/CMakeLists.txt	2007-07-20 23:05:42 UTC (rev 3419)
@@ -5,7 +5,7 @@
 SET(ADM_LIB ADM_filtersGtk)
 #
 SET(${ADM_LIB}_SRCS
-gui_filter.cpp  gui_filterlist.cpp  gui_filtermanager.cpp  gui_filtermanager_dialog.cpp  gui_filtersub.cpp
+gui_filterlist.cpp  gui_filtermanager.cpp  gui_filtermanager_dialog.cpp  gui_filtersub.cpp
 
 )
 ADD_LIBRARY(${ADM_LIB} STATIC ${${ADM_LIB}_SRCS})

Modified: branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/Makefile.am
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/Makefile.am	2007-07-19 19:39:25 UTC (rev 3418)
+++ branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/Makefile.am	2007-07-20 23:05:42 UTC (rev 3419)
@@ -7,7 +7,7 @@
 
 libADM_filters_a_METASOURCES = AUTO
 
-libADM_filters_a_SOURCES = gui_filter.cpp  gui_filterlist.cpp  gui_filtermanager.cpp  gui_filtermanager_dialog.cpp  gui_filtersub.cpp
+libADM_filters_a_SOURCES = gui_filterlist.cpp  gui_filtermanager.cpp  gui_filtermanager_dialog.cpp  gui_filtersub.cpp
 
 
 

Deleted: branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filter.cpp
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filter.cpp	2007-07-19 19:39:25 UTC (rev 3418)
+++ branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filter.cpp	2007-07-20 23:05:42 UTC (rev 3419)
@@ -1,630 +0,0 @@
-/***************************************************************************
-                          gui_filter.cpp  -  description
-                             -------------------
-    begin                : Wed Mar 27 2002
-    copyright            : (C) 2002 by mean
-    email                : <A HREF="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">fixounet at free.fr</A>
- ***************************************************************************/
-
-/***************************************************************************
- *                                                                         *
- *   This program is free software; you can redistribute it and/or modify  *
- *   it under the terms of the GNU General Public License as published by  *
- *   the Free Software Foundation; either version 2 of the License, or     *
- *   (at your option) any later version.                                   *
- *                                                                         *
- ***************************************************************************/
-#include &quot;config.h&quot;
-#include &lt;stdio.h&gt;
-#include &lt;stdlib.h&gt;
-#include &lt;string.h&gt;
-
-
-#include &lt;gtk/gtk.h&gt;
-#include &lt;gdk/gdkkeysyms.h&gt;
-
-#include &lt;time.h&gt;
-#include &lt;sys/time.h&gt;
-
-#include &quot;fourcc.h&quot;
-#include &quot;avio.hxx&quot;
-
-#include &quot;avi_vars.h&quot;
-#include &quot;ADM_editor/ADM_edit.hxx&quot;
-#include &quot;ADM_video/ADM_genvideo.hxx&quot;
-#include &quot;ADM_video/ADM_videoNull.h&quot;
-#include &quot;../ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/toolkit_gtk.h&quot;
-
-
-
-#include &quot;avi_vars.h&quot;
-#include &quot;ADM_toolkit/toolkit.hxx&quot;
-#include &lt;ADM_assert.h&gt;
-
-#include &quot;ADM_toolkit/filesel.h&quot;
-
-#include &quot;prototype.h&quot;
-#include &quot;ADM_editor/ADM_edit.hxx&quot;
-#include &quot;ADM_video/ADM_genvideo.hxx&quot;
-#include &quot;ADM_filter/video_filters.h&quot;
-#include &quot;ADM_video/ADM_vidPartial.h&quot;
-#include &quot;../ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/ADM_gladeSupport.h&quot;
-#include &quot;../ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/toolkit_gtk.h&quot;
-#include &quot;ADM_filter/vidVCD.h&quot;
-//__________________________________________
-
-extern AVDMGenericVideoStream *filterCreateFromTag (VF_FILTERS tag,
-						    CONFcouple * conf,
-						    AVDMGenericVideoStream *
-						    in);
-
-extern const char  *filterGetNameFromTag(VF_FILTERS tag);
-typedef enum 
-{
-  A_BEGIN = 10,
-  A_ADD,
-  A_CONFIGURE,
-  A_UP,
-  A_DOWN,
-  A_REMOVE,
-  A_DONE,
-  A_VCD,
-  A_SVCD,
-  A_DVD,
-  A_HALFD1,
-  A_LOAD,
-  A_SAVE,
-  A_PREVIEW,
-  A_PARTIAL,
-  A_SCRIPT,
-  A_DOUBLECLICK,
-  A_END
-}gui_act;
-//_______________________________________
-
-
-static VF_FILTERS new_filter (void);
-
-static void on_action (gui_act action);
-static void on_action_double_click (GtkButton * button, gpointer user_data);
-static void on_action_double_click_1 (GtkButton * button, gpointer user_data);
-static void updateFilterList (void);
-static void wrapToolButton(GtkWidget * wid, gpointer user_data);
-//___________________________________________
-extern FILTER_ENTRY allfilters[MAX_FILTER];
-extern uint32_t nb_video_filter;
-extern FILTER videofilters[MAX_FILTER];
-extern uint32_t nb_active_filter;
-extern ADM_Composer *video_body;
-// display all currently activated filters
-//_______________________________________
-
-extern GtkWidget *create_filterMain (void);
-
-static GtkWidget *dialog;
-static GtkWidget *dialog2;
-static GtkListStore *store;
-static GtkTreeViewColumn *column;
-static GtkCellRenderer *renderer;
-
-/*
-        Open the main filter dialog and call the handlers
-        if needed.
-
-*/
-int
-GUI_handleFilter (void)
-{
-
-#ifndef HAVE_ENCODER
-  return 0;
-}
-#else
-//VF_FILTERS tag;
-
-  getLastVideoFilter ();	// expand video to full size
-
-  // sanity check
-  if (nb_active_filter == 0)
-    {
-      nb_active_filter = 1;
-      videofilters[0].filter =
-	new AVDMVideoStreamNull (video_body, frameStart,
-				 frameEnd - frameStart);
-
-    }
-  dialog = create_filterMain ();
-  store=gtk_list_store_new (1, G_TYPE_STRING);
-  gtk_tree_view_set_model(GTK_TREE_VIEW(WID(treeview2)),GTK_TREE_MODEL (store));
-  gtk_tree_view_columns_autosize(GTK_TREE_VIEW(WID(treeview2)));
-  //gtk_widget_set_size_request (WID(treeview2), 400, 400);
-
-  renderer = gtk_cell_renderer_text_new ();
-  column = gtk_tree_view_column_new_with_attributes (&quot;&quot;, renderer,
-                                                      &quot;markup&quot;, (GdkModifierType) 0, NULL);
-  gtk_tree_view_append_column (GTK_TREE_VIEW (WID(treeview2)), column);
-  gtk_tree_view_column_set_spacing(column,26);
-//#define CALLME(x,y)   gtk_dialog_add_action_widget (GTK_DIALOG (dialog), WID(x),y)
-
-#define CALLME(x,y) gtk_signal_connect(GTK_OBJECT(WID(x)),&quot;clicked&quot;,  GTK_SIGNAL_FUNC(wrapToolButton), (void *) y);
-
-  CALLME (toolbuttonAdd, A_ADD);
-  CALLME (toolbuttonRemove, A_REMOVE);
-  CALLME (toolbuttonProperties, A_CONFIGURE);
-  CALLME (toolbuttonUp, A_UP);
-  CALLME (toolbuttonDown, A_DOWN);
-  CALLME (toolbuttonVCD, A_VCD);
-  CALLME (toolbuttonSVCD, A_SVCD);
-  CALLME (toolbuttonDVD, A_DVD);
-  CALLME (toolbuttonSave, A_SAVE);
-  CALLME (toolbuttonOpen, A_LOAD);
-  CALLME (toolbuttonPreview, A_PREVIEW);
-  CALLME (toolbuttonPartial, A_PARTIAL);
-  CALLME (toolbuttonHD1, A_HALFD1);
-  CALLME (toolbutton13, A_SCRIPT);
-
-  // Add double click
-  gtk_signal_connect (GTK_OBJECT (WID(treeview2)), &quot;row-activated&quot;, 
-        GTK_SIGNAL_FUNC (on_action_double_click_1),(void *)NULL);
-
-  //      gtk_dialog_add_action_widget (GTK_DIALOG (dialog), WID(treeview1),A_DOUBLECLICK);
-
-  gtk_widget_set_size_request (WID(treeview2), 400, 400);
-
-  updateFilterList ();
-  gtk_register_dialog (dialog);
-  //gtk_widget_show (dialog);
-  
-  gui_act ac;
-  int run = 1, reply;
-  while (run)
-    {
-      reply = gtk_dialog_run (GTK_DIALOG (dialog));
-      //printf(&quot;Action : %d\n&quot;,reply);
-      if (reply &gt; A_BEGIN &amp;&amp; reply &lt; A_END)
-	{
-	  ac = (gui_act) reply;
-	  on_action (ac);
-	}
-      else
-	switch (reply)
-	  {
-          case GTK_RESPONSE_DELETE_EVENT:
-	  case GTK_RESPONSE_CLOSE:
-	  case GTK_RESPONSE_APPLY:
-	  case GTK_RESPONSE_OK:
-	  case GTK_RESPONSE_CANCEL:
-	    run = 0;
-	    break;
-	  default:
-	    ADM_assert (0);
-	  }
-    }
-  gtk_unregister_dialog (dialog);
-  gtk_widget_destroy (dialog);
-
-  return 1;
-}
-
-// gtk_dialog_add_action_widget seems buggy for toolbar button
-// workaround it...
-void wrapToolButton(GtkWidget * wid, gpointer user_data)
-{
-        gui_act action;
-#ifdef ARCH_64_BITS
-#define TPE long long int
-	long long int dummy;
-#else	
-        int dummy;
-#define TPE int
-#endif
-
-        dummy=(TPE)user_data;
-
-        action=(gui_act) dummy;
-        gtk_dialog_response(GTK_DIALOG(dialog),action);
-}
-//
-// One of the button of the main dialog was pressed
-// Retrieve also the associated filter and handle
-// the action
-//______________________________________________________
-void
-on_action (gui_act action)
-{
-  uint32_t action_parameter;
-  VF_FILTERS tag = VF_INVALID;
-
-  action_parameter = 0;
-  if (nb_active_filter &gt; 1)
-    if (getSelectionNumber
-	(nb_active_filter - 1, WID(treeview2),
-	 store, &amp;action_parameter))
-      action_parameter++;
-
-  switch (action)
-    {
-      // Add
-    case A_ADD:
-      tag = new_filter ();
-      // Raise back the old window
-      gtk_widget_grab_focus (dialog);
-      //
-      if (tag != VF_INVALID)
-	{
-	  CONFcouple *couple;
-	  videofilters[nb_active_filter].filter =
-	    filterCreateFromTag (tag, NULL,
-				 videofilters[nb_active_filter - 1].filter);
-	  if(!videofilters[nb_active_filter].filter-&gt;
-	    configure (videofilters[nb_active_filter - 1].filter))
-	  {
-	  	  delete videofilters[nb_active_filter].filter;
-	  	  break;
-	  }
-	  videofilters[nb_active_filter].filter-&gt;getCoupledConf (&amp;couple);
-
-
-	  videofilters[nb_active_filter].tag = tag;
-	  videofilters[nb_active_filter].conf = couple;
-	  ;
-	  nb_active_filter++;
-	  updateFilterList ();
-	  //gdk_window_raise(dialog-&gt;window);
-	}
-      break;
-    case A_VCD:
-      setVCD ();
-      updateFilterList ();
-      break;
-    case A_SVCD:
-      setSVCD ();
-      updateFilterList ();
-      break;
-    case A_DVD:
-      setDVD ();
-      updateFilterList ();
-      break;
-    case A_HALFD1:
-      setHalfD1 ();
-      updateFilterList ();
-      break;
-    default:
-    case A_DOUBLECLICK:
-      printf (&quot;Double clicked..&quot;);
-    //  break;
-    
-    case A_CONFIGURE:
-//            void *p;
-      if (action_parameter)
-	{
-	  if (videofilters[action_parameter].filter-&gt;
-	      configure (videofilters[action_parameter - 1].filter))
-	    {
-
-	      CONFcouple *couple;
-	      videofilters[action_parameter].filter-&gt;getCoupledConf (&amp;couple);
-	      videofilters[action_parameter].conf = couple;
-//                      updateVideoFilters ();
-	      getFirstVideoFilter ();
-	      updateFilterList ();
-	    }
-	  // Raise back dialog
-	  //gtk_window_set_focus(GTK_WINDOW(dialog));
-	  //gdk_window_raise(dialog-&gt;window);
-	}
-      break;
-    case A_PARTIAL:
-
-      if (action_parameter)
-	{
-	  AVDMGenericVideoStream *replace;
-	  CONFcouple *conf;
-
-	  conf = videofilters[action_parameter].conf;
-	  if (videofilters[action_parameter].tag == VF_PARTIAL)	// cannot recurse
-	    {
-              GUI_Error_HIG (_(&quot;The filter is already partial&quot;), NULL);
-	    }
-	  else
-	    {
-	      replace =
-		new ADMVideoPartial (videofilters[action_parameter - 1].
-				     filter,
-				     videofilters[action_parameter].tag,
-				     conf);
-	      if(replace-&gt;configure (videofilters[action_parameter - 1].filter))
-	      {
-			delete videofilters[action_parameter].filter;
-			if (conf) delete conf;
-			videofilters[action_parameter].filter = replace;
-			replace-&gt;getCoupledConf (&amp;conf);
-			videofilters[action_parameter].conf = conf;
-			videofilters[action_parameter].tag = VF_PARTIAL;
-//                updateVideoFilters ();
-			getFirstVideoFilter ();
-			updateFilterList ();
-	      }
-	      else delete replace;
-	    }
-	}
-      break;
-    case A_UP:
-      if (action_parameter &gt; 1)	// Select file
-	{
-	  // swap action parameter &amp; action parameter -1
-	  FILTER tmp;
-	  memcpy (&amp;tmp, &amp;videofilters[action_parameter - 1], sizeof (FILTER));
-	  memcpy (&amp;videofilters[action_parameter - 1],
-		  &amp;videofilters[action_parameter], sizeof (FILTER));
-	  memcpy (&amp;videofilters[action_parameter], &amp;tmp, sizeof (FILTER));
-	  //updateVideoFilters ();
-	  getFirstVideoFilter ();
-	  // select action_parameter -1
-	  updateFilterList ();
-
-	  setSelectionNumber (nb_active_filter - 1,
-			      WID(treeview2),
-			      store, action_parameter - 2);
-
-	}
-      break;
-    case A_DOWN:
-      if (((int) action_parameter &lt; (int) (nb_active_filter - 1)) &amp;&amp; (action_parameter))	// Select file
-	{
-	  // swap action parameter &amp; action parameter -1
-	  FILTER tmp;
-	  memcpy (&amp;tmp, &amp;videofilters[action_parameter + 1], sizeof (FILTER));
-	  memcpy (&amp;videofilters[action_parameter + 1],
-		  &amp;videofilters[action_parameter], sizeof (FILTER));
-	  memcpy (&amp;videofilters[action_parameter], &amp;tmp, sizeof (FILTER));
-	  // updateVideoFilters ();
-	  getFirstVideoFilter ();
-	  updateFilterList ();
-	  setSelectionNumber (nb_active_filter - 1,
-			      WID(treeview2),
-			      store, action_parameter);
-
-	}
-      break;
-
-    case A_REMOVE:
-//              CONFcouple *couple;
-      VF_FILTERS tag;
-      AVDMGenericVideoStream *old;
-      if (action_parameter &gt; 0)
-	{
-	  // we store the one we will delete
-	  if (videofilters[action_parameter].conf)
-	    {
-	      delete videofilters[action_parameter].conf;
-	      videofilters[action_parameter].conf = NULL;
-	    }
-	  // recreate derivated filters
-	  for (uint32_t i = action_parameter + 1; i &lt; nb_active_filter; i++)
-	    {
-	      old = videofilters[i - 1].filter;
-	      tag = videofilters[i].tag;
-
-	      videofilters[i - 1].filter = filterCreateFromTag (tag,
-								videofilters
-								[i].conf,
-								videofilters[i
-									     -
-									     2].
-								filter);
-
-	      videofilters[i - 1].conf = videofilters[i].conf;
-	      videofilters[i - 1].tag = tag;
-	      delete old;
-
-	    }
-	  delete videofilters[nb_active_filter - 1].filter;
-	  videofilters[nb_active_filter - 1].filter = NULL;
-	  nb_active_filter--;
-
-	}
-      updateFilterList ();
-      break;
-    case A_DONE:
-
-      break;
-    case A_PREVIEW:
-
-      if (action_parameter &gt; 0)
-	{
-	  AVDMGenericVideoStream *in;
-	  uint32_t w, h, l, f;
-	  ADMImage *data;
-	  extern uint32_t curframe;
-	  in = videofilters[action_parameter].filter;
-	  w = in-&gt;getInfo ()-&gt;width;
-	  h = in-&gt;getInfo ()-&gt;height;
-	  data = new ADMImage (w, h);	//(uint8_t *) malloc (w * h * 3);
-	  ADM_assert (data);
-	  in-&gt;getFrameNumberNoAlloc (curframe, &amp;l, data, &amp;f);
-
-          GUI_PreviewShow(w,h,data-&gt;data);
-
-	  ADM_dealloc (data);
-	}
-
-      break;
-    case A_LOAD:
-#ifdef USE_LIBXML2
-      GUI_FileSelRead (_(&quot;Load set of filters&quot;), filterLoadXml);
-#else
-      GUI_FileSelRead (_(&quot;Load set of filters&quot;), filterLoad);
-#endif
-      updateFilterList ();
-      break;
-    case A_SAVE:
-      if (nb_active_filter &lt; 2)
-	{
-          GUI_Error_HIG (_(&quot;Nothing to save&quot;), NULL);
-	}
-      else
-#ifdef USE_LIBXML2
-            GUI_FileSelWrite (_(&quot;Save set of filters&quot;), filterSaveXml);
-#else
-	GUI_FileSelWrite (_(&quot;Save set of filters&quot;), filterSave);
-
-#endif
-      break;
-#if 0
-    default:
-      printf (&quot;Unknown action :%d, action param %d\n&quot;, action,
-	      action_parameter);
-      ADM_assert (0);
-#endif
-    }
-  //updateFilterList();
-
-}
-//
-extern GtkWidget *create_dialogList (void);
-extern GtkListStore *storeFilterList;
-
-/**
- 	Pop-up a list of all available filters
-	Return the tag identifying the filter selected
-
-*/
-#define NB_TREE 7
-VF_FILTERS new_filter (void)
-{
-
-//  GtkObject *selected;
-  int position = 0;
-  uint32_t sel, max = 0;
-  VF_FILTERS tag = VF_INVALID;
-  GtkWidget             *trees[NB_TREE];
-  GtkListStore          *stores[NB_TREE];
-  GtkTreeViewColumn     *columns[NB_TREE];
-  GtkCellRenderer       *renderers[NB_TREE];
-  int                   startFilter[NB_TREE];
-
-  char *str=NULL;
-
-  GtkTreeIter iter;
-  uint8_t ret = 0;
-
-
-  dialog2 = create_dialogList ();
-  gtk_register_dialog (dialog2);
-  #define LOOK(x){ trees[x-1]=lookup_widget(dialog2,&quot;treeview1&quot;#x);\
-              stores[x-1]=gtk_list_store_new (1, G_TYPE_STRING);}
-  
-  LOOK(1);
-  LOOK(2);
-  LOOK(3);
-  LOOK(4);
-  LOOK(5);
-  LOOK(6);
-  LOOK(7);
-
-  gtk_widget_set_size_request (dialog2, -1, 520);
-  int current_tree=-1;
-  for (uint32_t i = 0; i &lt; nb_video_filter; i++)
-    {
-      if (allfilters[i].viewable==1)
-	{
-                  str = g_strconcat(&quot;&lt;span size=\&quot;larger\&quot; weight=\&quot;bold\&quot;&gt;&quot;, 
-                allfilters[i].name, &quot;&lt;/span&gt;\n&quot;,  
-                
-                allfilters[i].description, NULL);
-
-                
-
-	  gtk_list_store_append (stores[current_tree], &amp;iter);
-	  gtk_list_store_set (stores[current_tree], &amp;iter, 0,str ,-1);
-          g_free(str);
-	  max++;
-	}else 
-        {
-                current_tree++;
-                if(current_tree&gt;=NB_TREE) break;
-                startFilter[current_tree]=i+1;
-        }
-    }
-  // Add double click
-  
-
-// Attach
-  for(int i=0;i&lt;NB_TREE;i++)
-   {
-        gtk_tree_view_set_model(GTK_TREE_VIEW(trees[i]),GTK_TREE_MODEL (stores[i]));
-        gtk_tree_view_columns_autosize(GTK_TREE_VIEW(trees[i]));
-
-        renderers[i] = gtk_cell_renderer_text_new ();
-        GValue ypad = {0,};
-        g_value_init (&amp;ypad, G_TYPE_INT);
-        g_value_set_int (&amp;ypad, 12);
-        g_object_set_property(G_OBJECT(renderers[i]), &quot;ypad&quot;, &amp;ypad);
-        columns[i] = gtk_tree_view_column_new_with_attributes (&quot;&quot;, renderers[i],
-                                                      &quot;markup&quot;, (GdkModifierType) 0,
-                                                      NULL);
-        gtk_tree_view_append_column (GTK_TREE_VIEW (trees[i]), columns[i]);
-
-        gtk_signal_connect (GTK_OBJECT (trees[i]),
-                      &quot;row-activated&quot;,
-                      GTK_SIGNAL_FUNC (on_action_double_click),
-                      (void *) dialog);
-   }
-  if (gtk_dialog_run (GTK_DIALOG (dialog2)) == GTK_RESPONSE_OK)
-    {
-        // 1- identify the current tab/treeview we are in
-        int page;
-
-                page=gtk_notebook_get_current_page(GTK_NOTEBOOK(lookup_widget(dialog2,&quot;notebook1&quot;)));
-        // then get the selection
-
-      if ((ret = getSelectionNumber (max, trees[page], stores[page], &amp;sel)))
-	{
-                tag = allfilters[sel+startFilter[page]].tag;
-	}
-    }
-  gtk_unregister_dialog (dialog2);
-  gtk_widget_destroy (dialog2);
-
-  return tag;
-}
-void
-updateFilterList (void)
-{
-GtkTreeIter iter;
-char *str;
-VF_FILTERS fil;
-  gtk_list_store_clear (store);
-  for (uint32_t i = 1; i &lt; nb_active_filter; i++)
-    {
-                gtk_list_store_append (store, &amp;iter);
-                //str=videofilters[i].filter-&gt;printConf ();
-                fil=videofilters[i].tag;
-                
-
-                str = g_strconcat(&quot;&lt;span size=\&quot;larger\&quot; weight=\&quot;bold\&quot;&gt;&quot;, 
-                filterGetNameFromTag(fil), &quot;&lt;/span&gt;\n&quot;,  
-               
-                videofilters[i].filter-&gt;printConf (), NULL);
-
-                gtk_list_store_set (store, &amp;iter, 0,str,-1);
-                g_free(str);
-    }
-
-}
-void
-on_action_double_click (GtkButton * button, gpointer user_data)
-{
-
-  gtk_dialog_response (GTK_DIALOG (dialog2), GTK_RESPONSE_OK);
-
-}
-void on_action_double_click_1 (GtkButton * button, gpointer user_data)
-{
-
-  gtk_dialog_response (GTK_DIALOG (dialog), A_DOUBLECLICK);
-
-}
-
-#endif

Modified: branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager.cpp
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager.cpp	2007-07-19 19:39:25 UTC (rev 3418)
+++ branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager.cpp	2007-07-20 23:05:42 UTC (rev 3419)
@@ -329,18 +329,10 @@
 
     case A_PREVIEW:
         if (!action_parameter) break;
-        AVDMGenericVideoStream *in;
-        uint32_t w, h, l, f;
-        ADMImage *data;
+
         extern uint32_t curframe;
-        in = videofilters[action_parameter].filter;
-        w = in-&gt;getInfo ()-&gt;width;
-        h = in-&gt;getInfo ()-&gt;height;
-        data = new ADMImage (w, h);	//(uint8_t *) malloc (w * h * 3);
-        ADM_assert (data);
-        in-&gt;getFrameNumberNoAlloc (curframe, &amp;l, data, &amp;f);
-        GUI_PreviewShow(w,h,data-&gt;data);
-        ADM_dealloc (data);
+        DIA_filterPreview(_(&quot;Preview&quot;), videofilters[action_parameter].filter, curframe);
+
         break;
 
     case A_LOAD:

Modified: branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_NONE/ADM_gui2/preview_none.cpp
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_NONE/ADM_gui2/preview_none.cpp	2007-07-19 19:39:25 UTC (rev 3418)
+++ branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_NONE/ADM_gui2/preview_none.cpp	2007-07-20 23:05:42 UTC (rev 3419)
@@ -20,23 +20,8 @@
 void UI_getWindowInfo(void *draw, GUI_WindowInfo *xinfo) {}
 void *UI_getDrawWidget(void ) {return NULL;}
 
-void GUI_PreviewInit(uint32_t w , uint32_t h, uint32_t modal)
-{}
-uint8_t 	GUI_PreviewUpdate(uint8_t *data)
-{
-  return 1;
-}
-void 	GUI_PreviewEnd( void)
-{}
-uint8_t  	GUI_PreviewRun(uint8_t *data)
-{
-  return 1;
-}
-uint8_t GUI_PreviewStillAlive( void )
-{
-  return 1;
-}
-void GUI_PreviewShow(uint32_t w, uint32_t h, uint8_t *data)
-{
-}
-
+void DIA_previewInit(uint32_t width, uint32_t height) {}
+uint8_t DIA_previewUpdate(uint8_t *buffer) {return 1;}
+void DIA_previewEnd(void) {}
+uint8_t DIA_previewStillAlive(void) {return 1;}
+uint8_t DIA_filterPreview(char *captionText, AVDMGenericVideoStream *videoStream, uint32_t frame) {}

Modified: branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/T_flyDialog.cpp
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/T_flyDialog.cpp	2007-07-19 19:39:25 UTC (rev 3418)
+++ branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/T_flyDialog.cpp	2007-07-20 23:05:42 UTC (rev 3419)
@@ -33,8 +33,9 @@
 #include &quot;DIA_flyDialogQt4.h&quot;
 #include &quot;ADM_assert.h&quot;
 
+void ADM_flyDialog::postInit(uint32_t width, uint32_t height, AVDMGenericVideoStream *in,
+							 void *canvas, void *slider, int yuv) {}
 
-//***************************************
 uint8_t  ADM_flyDialog::display(void)
 {
    ADM_QCanvas *view=(ADM_QCanvas *)_canvas;

Modified: branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/T_preview.cpp
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/T_preview.cpp	2007-07-19 19:39:25 UTC (rev 3418)
+++ branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/T_preview.cpp	2007-07-20 23:05:42 UTC (rev 3419)
@@ -54,32 +54,14 @@
  ColYuvRgb rgbConverter(640,480,1);
 extern void UI_purge( void );
 extern uint8_t UI_sliderResize(uint32_t w);;
+
+void DIA_previewInit(uint32_t width, uint32_t height) {}
+uint8_t DIA_previewUpdate(uint8_t *data) {return 1;}
+void DIA_previewEnd(void) {}
+uint8_t DIA_previewStillAlive(void) {return 1;}
+uint8_t	DIA_filterPreview(char *captionText, AVDMGenericVideoStream *videoStream, uint32_t frame) {}
+
 //****************************************************************************************************
-void GUI_PreviewInit(uint32_t w , uint32_t h, uint32_t modal)
-{}
-//****************************************************************************************************
-uint8_t 	GUI_PreviewUpdate(uint8_t *data)
-{
-  return 1;
-}
-//****************************************************************************************************
-void 	GUI_PreviewEnd( void)
-{}
-//****************************************************************************************************
-uint8_t  	GUI_PreviewRun(uint8_t *data)
-{
-  return 1;
-}
-//****************************************************************************************************
-uint8_t GUI_PreviewStillAlive( void )
-{
-  return 1;
-}
-//****************************************************************************************************
-void GUI_PreviewShow(uint32_t w, uint32_t h, uint8_t *data)
-{
-}
-//****************************************************************************************************
 /*
   Function to display
   Warning the incoming data are YUV!

Modified: branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flyDialog.cpp
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flyDialog.cpp	2007-07-19 19:39:25 UTC (rev 3418)
+++ branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flyDialog.cpp	2007-07-20 23:05:42 UTC (rev 3419)
@@ -41,19 +41,25 @@
  ADM_flyDialog::ADM_flyDialog(uint32_t width,uint32_t height,AVDMGenericVideoStream *in,
                                 void *canvas, void *slider,int yuv)
 {
+	ADM_assert(_canvas);
+
+	if (slider)
+		ADM_assert(in);
+
   _w=_zoomW=width;
   _h=_zoomH=height;
   _isYuvProcessing=yuv;
   _in=in;
+
     if(isRgbInverted())
-    {
         _rgb=new ColYuvRgb(_w,_h,1);
-    }
     else
     _rgb=new ColYuvRgb(_w,_h);
+
   _rgb-&gt;reset(_w,_h);
-  ADM_assert(in);
+
   _yuvBuffer=new ADMImage(_w,_h);
+
   if(_isYuvProcessing)
   {
      _yuvBufferOut=new ADMImage(_w,_h);
@@ -65,14 +71,14 @@
     _yuvBufferOut=NULL;
   }
     _rgbBufferOut =new uint8_t [_w*_h*4];
+
   _slider=slider;
   _canvas=canvas;
-
-  ADM_assert(_slider);
-  ADM_assert(_canvas);
   _cookie=NULL;
   _rgbBufferDisplay=NULL;
   _resizer=NULL;
+
+  postInit(width, height, in, canvas, slider, yuv);
 }
 /**
     \fn cleanup
@@ -106,18 +112,13 @@
 */
 uint8_t    ADM_flyDialog::sliderChanged(void)
 {
-  uint32_t fn= sliderGet(),nb;
+  uint32_t fn= sliderGet();
   uint32_t len,flags;
   
     ADM_assert(_yuvBuffer);
     ADM_assert(_rgbBufferOut);
     ADM_assert(_in);
     
-    nb=_in-&gt;getInfo()-&gt;nb_frames;
-    fn=fn*nb;
-    fn/=100;
-    if(fn&gt;=nb) fn=nb-1;
-    
     if(!_in-&gt;getFrameNumberNoAlloc(fn,&amp;len,_yuvBuffer,&amp;flags))
     {
       printf(&quot;[FlyDialog] Cannot get frame %u\n&quot;,fn); 

Modified: branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flyDialog.h
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flyDialog.h	2007-07-19 19:39:25 UTC (rev 3418)
+++ branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flyDialog.h	2007-07-20 23:05:42 UTC (rev 3419)
@@ -38,6 +38,9 @@
           uint8_t  _isYuvProcessing;
 
 		  ADMImageResizer *_resizer;
+
+  virtual void postInit(uint32_t width,uint32_t height,AVDMGenericVideoStream *in,
+                                    void *canvas, void *slider,int yuv);
   public:
           void    *_cookie; // whatever
           void    *_slider; // widget

Added: branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flyPreview.h
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flyPreview.h	2007-07-19 19:39:25 UTC (rev 3418)
+++ branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flyPreview.h	2007-07-20 23:05:42 UTC (rev 3419)
@@ -0,0 +1,29 @@
+#ifndef FLY_PREVIEW_H
+#define FLY_PREVIEW_H
+class flyPreview : public ADM_flyDialog
+{
+public:
+	uint8_t process(void) {return 1;}
+	uint8_t download(void) {return 1;}
+	uint8_t upload(void) {return 1;}
+	uint8_t cleanup(void) {return 1;}
+	uint8_t setData(uint8_t *buffer) {_rgb-&gt;scale(buffer, _rgbBufferOut);}
+
+	flyPreview(uint32_t width, uint32_t height, void *canvas) : 
+		ADM_flyDialog(width, height, NULL, canvas, NULL, 0) {delete _rgbBuffer; _rgbBuffer = NULL;};
+	virtual ~flyPreview(void) {_rgbBuffer = NULL;};
+};
+
+class flySeekablePreview : public ADM_flyDialog
+{
+public:
+	uint8_t process(void) {_rgbBufferOut = _rgbBuffer; return 1;}
+	uint8_t download(void) {return 1;}
+	uint8_t upload(void) {return 1;}
+	uint8_t cleanup(void) {return 1;}
+
+	flySeekablePreview(uint32_t width, uint32_t height, AVDMGenericVideoStream *videoStream, void *canvas, void *slider) : 
+		ADM_flyDialog(width, height, videoStream, canvas, slider, 0) {delete _rgbBufferOut;};
+	virtual ~flySeekablePreview(void) {_rgbBufferOut = NULL;};
+};
+#endif

Modified: branches/avidemux_2.4_branch/avidemux/ADM_video/ADM_genvideo.hxx
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_video/ADM_genvideo.hxx	2007-07-19 19:39:25 UTC (rev 3418)
+++ branches/avidemux_2.4_branch/avidemux/ADM_video/ADM_genvideo.hxx	2007-07-20 23:05:42 UTC (rev 3419)
@@ -40,13 +40,6 @@
 #include &quot;ADM_video/ADM_confCouple.h&quot;
 #include &quot;ADM_image.h&quot;
 
-
-void     GUI_PreviewInit(uint32_t w , uint32_t h, uint32_t modal);
-uint8_t  GUI_PreviewUpdate(uint8_t *data);
-void 	 GUI_PreviewEnd( void);
-uint8_t  GUI_PreviewRun(uint8_t *data);
-uint8_t  GUI_PreviewStillAlive( void );
-void     GUI_PreviewShow(uint32_t w, uint32_t h, uint8_t *data);
 #define Pixel uint8_t
 typedef struct
  {
@@ -127,6 +120,12 @@
 	  				{*couples=NULL;return 0;};
  };
 
+void     DIA_previewInit(uint32_t width, uint32_t height);
+uint8_t  DIA_previewUpdate(uint8_t *data);
+void 	 DIA_previewEnd(void);
+uint8_t  DIA_previewStillAlive(void);
+uint8_t	 DIA_filterPreview(char *captionText, AVDMGenericVideoStream *videoStream, uint32_t frame);
+
  // Pseudo class used to register filters automagically
  // Does not work atm
 class AVDMVideo_FilterDec

Modified: branches/avidemux_2.4_branch/avidemux/gtk_gui.cpp
===================================================================
--- branches/avidemux_2.4_branch/avidemux/gtk_gui.cpp	2007-07-19 19:39:25 UTC (rev 3418)
+++ branches/avidemux_2.4_branch/avidemux/gtk_gui.cpp	2007-07-20 23:05:42 UTC (rev 3419)
@@ -92,7 +92,6 @@
 
 void HandleAction (Action action);
 uint8_t A_rebuildKeyFrame (void);
-extern int GUI_handleFilter (void);
 extern int GUI_handleVFilter (void);
 extern void filterCleanUp (void);
 int A_audioSave(char *name);


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000693.html">[Avidemux-svn-commit] r3418 - in	branches/avidemux_2.4_branch/avidemux: ADM_codecs ADM_encoder	ADM_filter ADM_userInterfaces/ADM_commonUI
</A></li>
	<LI>Next message: <A HREF="000695.html">[Avidemux-svn-commit] r3420 -	branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_commonUI
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#694">[ date ]</a>
              <a href="thread.html#694">[ thread ]</a>
              <a href="subject.html#694">[ subject ]</a>
              <a href="author.html#694">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">More information about the Avidemux-svn-commit
mailing list</a><br>
</body></html>
