<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Avidemux-svn-commit] r3453 - in	branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces:	ADM_GTK/ADM_dialog ADM_commonUI
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/avidemux-svn-commit/2007-July/index.html" >
   <LINK REL="made" HREF="mailto:avidemux-svn-commit%40lists.berlios.de?Subject=Re%3A%20%5BAvidemux-svn-commit%5D%20r3453%20-%20in%0A%09branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces%3A%0A%09ADM_GTK/ADM_dialog%20ADM_commonUI&In-Reply-To=%3C200707281647.l6SGlk8S014510%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000727.html">
   <LINK REL="Next"  HREF="000729.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Avidemux-svn-commit] r3453 - in	branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces:	ADM_GTK/ADM_dialog ADM_commonUI</H1>
    <B>mean at BerliOS</B> 
    <A HREF="mailto:avidemux-svn-commit%40lists.berlios.de?Subject=Re%3A%20%5BAvidemux-svn-commit%5D%20r3453%20-%20in%0A%09branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces%3A%0A%09ADM_GTK/ADM_dialog%20ADM_commonUI&In-Reply-To=%3C200707281647.l6SGlk8S014510%40sheep.berlios.de%3E"
       TITLE="[Avidemux-svn-commit] r3453 - in	branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces:	ADM_GTK/ADM_dialog ADM_commonUI">mean at mail.berlios.de
       </A><BR>
    <I>Sat Jul 28 18:47:46 CEST 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="000727.html">[Avidemux-svn-commit] r3452 - in	branches/avidemux_2.4_branch/avidemux: ADM_ocr	ADM_userInterfaces/ADM_GTK/ADM_dialog	ADM_userInterfaces/ADM_GTK/ADM_ocr	ADM_userInterfaces/ADM_commonUI ADM_videoFilter
</A></li>
        <LI>Next message: <A HREF="000729.html">[Avidemux-svn-commit] r3454 - in branches/avidemux_2.4_branch: .	cmake
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#728">[ date ]</a>
              <a href="thread.html#728">[ thread ]</a>
              <a href="subject.html#728">[ subject ]</a>
              <a href="author.html#728">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: mean
Date: 2007-07-28 18:47:43 +0200 (Sat, 28 Jul 2007)
New Revision: 3453

Modified:
   branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_ocr.cpp
   branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp
Log:
[OCR] Cosmetic

Modified: branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_ocr.cpp
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_ocr.cpp	2007-07-28 14:52:03 UTC (rev 3452)
+++ branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_ocr.cpp	2007-07-28 16:47:43 UTC (rev 3453)
@@ -19,7 +19,6 @@
 #include &quot;ADM_toolkit_gtk/toolkit_gtk.h&quot;
 #include &quot;ADM_toolkit_gtk/toolkit_gtk_include.h&quot;
 
-
 GtkWidget*
 DIA_ocr (void)
 {
@@ -28,12 +27,12 @@
   GtkWidget *vbox1;
   GtkWidget *frame5;
   GtkWidget *table1;
-  GtkWidget *label8;
-  GtkWidget *label9;
   GtkWidget *labelNbGlyphs;
+  GtkWidget *labelTime;
   GtkWidget *labelNbLines;
+  GtkWidget *label9;
   GtkWidget *label15;
-  GtkWidget *labelTime;
+  GtkWidget *label8;
   GtkWidget *label7;
   GtkWidget *frameBitmap;
   GtkWidget *vbox7;
@@ -54,7 +53,10 @@
   GtkWidget *label12;
   GtkWidget *dialog_action_area1;
   GtkWidget *closebutton1;
+  GtkTooltips *tooltips;
 
+  tooltips = gtk_tooltips_new ();
+
   dialog1 = gtk_dialog_new ();
   gtk_window_set_title (GTK_WINDOW (dialog1), _(&quot;Mini OCR&quot;));
   gtk_window_set_type_hint (GTK_WINDOW (dialog1), GDK_WINDOW_TYPE_HINT_DIALOG);
@@ -74,47 +76,50 @@
   gtk_widget_show (table1);
   gtk_container_add (GTK_CONTAINER (frame5), table1);
 
-  label8 = gtk_label_new (_(&quot;# of Glyphs :&quot;));
-  gtk_widget_show (label8);
-  gtk_table_attach (GTK_TABLE (table1), label8, 0, 1, 0, 1,
-                    (GtkAttachOptions) (0),
-                    (GtkAttachOptions) (0), 0, 0);
-  gtk_misc_set_alignment (GTK_MISC (label8), 0, 0.5);
-
-  label9 = gtk_label_new (_(&quot;# of lines&quot;));
-  gtk_widget_show (label9);
-  gtk_table_attach (GTK_TABLE (table1), label9, 0, 1, 1, 2,
-                    (GtkAttachOptions) (0),
-                    (GtkAttachOptions) (0), 0, 0);
-  gtk_misc_set_alignment (GTK_MISC (label9), 0, 0.5);
-
   labelNbGlyphs = gtk_label_new (_(&quot;0&quot;));
   gtk_widget_show (labelNbGlyphs);
   gtk_table_attach (GTK_TABLE (table1), labelNbGlyphs, 1, 2, 0, 1,
-                    (GtkAttachOptions) (0),
+                    (GtkAttachOptions) (GTK_EXPAND | GTK_FILL),
                     (GtkAttachOptions) (0), 0, 0);
   gtk_misc_set_alignment (GTK_MISC (labelNbGlyphs), 0, 0.5);
 
+  labelTime = gtk_label_new (_(&quot;0:0:0&quot;));
+  gtk_widget_show (labelTime);
+  gtk_table_attach (GTK_TABLE (table1), labelTime, 1, 2, 2, 3,
+                    (GtkAttachOptions) (GTK_EXPAND | GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+  gtk_misc_set_alignment (GTK_MISC (labelTime), 0, 0.5);
+
   labelNbLines = gtk_label_new (_(&quot;0&quot;));
   gtk_widget_show (labelNbLines);
   gtk_table_attach (GTK_TABLE (table1), labelNbLines, 1, 2, 1, 2,
-                    (GtkAttachOptions) (0),
+                    (GtkAttachOptions) (GTK_EXPAND | GTK_FILL),
                     (GtkAttachOptions) (0), 0, 0);
   gtk_misc_set_alignment (GTK_MISC (labelNbLines), 0, 0.5);
 
+  label9 = gtk_label_new (_(&quot;# of lines&quot;));
+  gtk_widget_show (label9);
+  gtk_table_attach (GTK_TABLE (table1), label9, 0, 1, 1, 2,
+                    (GtkAttachOptions) (0),
+                    (GtkAttachOptions) (0), 0, 0);
+  gtk_label_set_justify (GTK_LABEL (label9), GTK_JUSTIFY_FILL);
+  gtk_misc_set_alignment (GTK_MISC (label9), 0, 0.5);
+
   label15 = gtk_label_new (_(&quot;TimeCode:&quot;));
   gtk_widget_show (label15);
   gtk_table_attach (GTK_TABLE (table1), label15, 0, 1, 2, 3,
-                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0),
                     (GtkAttachOptions) (0), 0, 0);
+  gtk_label_set_justify (GTK_LABEL (label15), GTK_JUSTIFY_FILL);
   gtk_misc_set_alignment (GTK_MISC (label15), 0, 0.5);
 
-  labelTime = gtk_label_new (_(&quot;0:0:0&quot;));
-  gtk_widget_show (labelTime);
-  gtk_table_attach (GTK_TABLE (table1), labelTime, 1, 2, 2, 3,
+  label8 = gtk_label_new (_(&quot;# of Glyphs :&quot;));
+  gtk_widget_show (label8);
+  gtk_table_attach (GTK_TABLE (table1), label8, 0, 1, 0, 1,
                     (GtkAttachOptions) (GTK_FILL),
                     (GtkAttachOptions) (0), 0, 0);
-  gtk_misc_set_alignment (GTK_MISC (labelTime), 0, 0.5);
+  gtk_label_set_justify (GTK_LABEL (label8), GTK_JUSTIFY_FILL);
+  gtk_misc_set_alignment (GTK_MISC (label8), 0, 0.5);
 
   label7 = gtk_label_new (_(&quot;&lt;b&gt;Stats&lt;/b&gt;&quot;));
   gtk_widget_show (label7);
@@ -168,25 +173,29 @@
   gtk_widget_show (hbuttonbox1);
   gtk_box_pack_start (GTK_BOX (vbox7), hbuttonbox1, FALSE, FALSE, 0);
 
-  buttonCalibrate = gtk_button_new_with_mnemonic (_(&quot;Calibrate&quot;));
+  buttonCalibrate = gtk_button_new_with_mnemonic (_(&quot;_Calibrate&quot;));
   gtk_widget_show (buttonCalibrate);
   gtk_container_add (GTK_CONTAINER (hbuttonbox1), buttonCalibrate);
   GTK_WIDGET_SET_FLAGS (buttonCalibrate, GTK_CAN_DEFAULT);
+  gtk_tooltips_set_tip (tooltips, buttonCalibrate, _(&quot;If the glyphs are too thin, enter a lower value here&quot;), NULL);
 
-  buttonSkipAll = gtk_button_new_with_mnemonic (_(&quot;Skip all&quot;));
+  buttonSkipAll = gtk_button_new_with_mnemonic (_(&quot;S_kip all&quot;));
   gtk_widget_show (buttonSkipAll);
   gtk_container_add (GTK_CONTAINER (hbuttonbox1), buttonSkipAll);
   GTK_WIDGET_SET_FLAGS (buttonSkipAll, GTK_CAN_DEFAULT);
+  gtk_tooltips_set_tip (tooltips, buttonSkipAll, _(&quot;Skip the whole image&quot;), NULL);
 
   buttonSkip = gtk_button_new_with_mnemonic (_(&quot;Skip Glyph&quot;));
   gtk_widget_show (buttonSkip);
   gtk_container_add (GTK_CONTAINER (hbuttonbox1), buttonSkip);
   GTK_WIDGET_SET_FLAGS (buttonSkip, GTK_CAN_DEFAULT);
+  gtk_tooltips_set_tip (tooltips, buttonSkip, _(&quot;Skip the current letter/glyph&quot;), NULL);
 
-  buttonIgnore = gtk_button_new_with_mnemonic (_(&quot;Ignore glyph&quot;));
+  buttonIgnore = gtk_button_new_with_mnemonic (_(&quot;_Ignore glyph&quot;));
   gtk_widget_show (buttonIgnore);
   gtk_container_add (GTK_CONTAINER (hbuttonbox1), buttonIgnore);
   GTK_WIDGET_SET_FLAGS (buttonIgnore, GTK_CAN_DEFAULT);
+  gtk_tooltips_set_tip (tooltips, buttonIgnore, _(&quot;This glyph will be ignored from now on&quot;), NULL);
 
   buttonOk = gtk_button_new_with_mnemonic (_(&quot;Ok&quot;));
   gtk_widget_show (buttonOk);
@@ -222,12 +231,12 @@
   GLADE_HOOKUP_OBJECT (dialog1, vbox1, &quot;vbox1&quot;);
   GLADE_HOOKUP_OBJECT (dialog1, frame5, &quot;frame5&quot;);
   GLADE_HOOKUP_OBJECT (dialog1, table1, &quot;table1&quot;);
-  GLADE_HOOKUP_OBJECT (dialog1, label8, &quot;label8&quot;);
-  GLADE_HOOKUP_OBJECT (dialog1, label9, &quot;label9&quot;);
   GLADE_HOOKUP_OBJECT (dialog1, labelNbGlyphs, &quot;labelNbGlyphs&quot;);
+  GLADE_HOOKUP_OBJECT (dialog1, labelTime, &quot;labelTime&quot;);
   GLADE_HOOKUP_OBJECT (dialog1, labelNbLines, &quot;labelNbLines&quot;);
+  GLADE_HOOKUP_OBJECT (dialog1, label9, &quot;label9&quot;);
   GLADE_HOOKUP_OBJECT (dialog1, label15, &quot;label15&quot;);
-  GLADE_HOOKUP_OBJECT (dialog1, labelTime, &quot;labelTime&quot;);
+  GLADE_HOOKUP_OBJECT (dialog1, label8, &quot;label8&quot;);
   GLADE_HOOKUP_OBJECT (dialog1, label7, &quot;label7&quot;);
   GLADE_HOOKUP_OBJECT (dialog1, frameBitmap, &quot;frameBitmap&quot;);
   GLADE_HOOKUP_OBJECT (dialog1, vbox7, &quot;vbox7&quot;);
@@ -248,6 +257,7 @@
   GLADE_HOOKUP_OBJECT (dialog1, label12, &quot;label12&quot;);
   GLADE_HOOKUP_OBJECT_NO_REF (dialog1, dialog_action_area1, &quot;dialog_action_area1&quot;);
   GLADE_HOOKUP_OBJECT (dialog1, closebutton1, &quot;closebutton1&quot;);
+  GLADE_HOOKUP_OBJECT_NO_REF (dialog1, tooltips, &quot;tooltips&quot;);
 
   return dialog1;
 }

Modified: branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp	2007-07-28 14:52:03 UTC (rev 3452)
+++ branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp	2007-07-28 16:47:43 UTC (rev 3453)
@@ -227,7 +227,13 @@
           destroyGlyphTree(&amp;head);
           return 0;
         }
-       // TODO Check input TS file
+        // TS file exists ?
+        if(!ADM_fileExist(tsFileName))
+        {
+        	  GUI_Error_HIG(_(&quot;File error&quot;),_(&quot;Please Select a valid TS file.&quot;));
+        	  goto _againX;
+        }
+       
         if(!srtFileName || !*srtFileName)
         {
           GUI_Error_HIG(_(&quot;File error&quot;),_(&quot;Please Select a valid output SRT file.&quot;));
@@ -252,8 +258,7 @@
             printf(&quot;[GLYPH] Found %u glyph\n&quot;);
          }
         // We have our SRT and our TS file
-         
-  
+        // Call the OCR engine...
          source.TsFile=ADM_strdup(tsFileName);
          source.TsPid=pid;
          ADM_ocr_engine(source,srtFileName,&amp;head);


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000727.html">[Avidemux-svn-commit] r3452 - in	branches/avidemux_2.4_branch/avidemux: ADM_ocr	ADM_userInterfaces/ADM_GTK/ADM_dialog	ADM_userInterfaces/ADM_GTK/ADM_ocr	ADM_userInterfaces/ADM_commonUI ADM_videoFilter
</A></li>
	<LI>Next message: <A HREF="000729.html">[Avidemux-svn-commit] r3454 - in branches/avidemux_2.4_branch: .	cmake
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#728">[ date ]</a>
              <a href="thread.html#728">[ thread ]</a>
              <a href="subject.html#728">[ subject ]</a>
              <a href="author.html#728">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">More information about the Avidemux-svn-commit
mailing list</a><br>
</body></html>
