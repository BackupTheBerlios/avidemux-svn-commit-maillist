<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Avidemux-svn-commit] r4968 - in	branches/avidemux_2.5_branch_gruntster/cmake: . patches
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/avidemux-svn-commit/2009-June/index.html" >
   <LINK REL="made" HREF="mailto:avidemux-svn-commit%40lists.berlios.de?Subject=Re%3A%20%5BAvidemux-svn-commit%5D%20r4968%20-%20in%0A%09branches/avidemux_2.5_branch_gruntster/cmake%3A%20.%20patches&In-Reply-To=%3C200906271752.n5RHqZnS009515%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002182.html">
   <LINK REL="Next"  HREF="002184.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Avidemux-svn-commit] r4968 - in	branches/avidemux_2.5_branch_gruntster/cmake: . patches</H1>
    <B>gruntster at mail.berlios.de</B> 
    <A HREF="mailto:avidemux-svn-commit%40lists.berlios.de?Subject=Re%3A%20%5BAvidemux-svn-commit%5D%20r4968%20-%20in%0A%09branches/avidemux_2.5_branch_gruntster/cmake%3A%20.%20patches&In-Reply-To=%3C200906271752.n5RHqZnS009515%40sheep.berlios.de%3E"
       TITLE="[Avidemux-svn-commit] r4968 - in	branches/avidemux_2.5_branch_gruntster/cmake: . patches">gruntster at mail.berlios.de
       </A><BR>
    <I>Sat Jun 27 19:52:35 CEST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="002182.html">[Avidemux-svn-commit] r4967 - in	branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder:	. ffMpeg4
</A></li>
        <LI>Next message: <A HREF="002184.html">[Avidemux-svn-commit] r4969 -	branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2183">[ date ]</a>
              <a href="thread.html#2183">[ thread ]</a>
              <a href="subject.html#2183">[ subject ]</a>
              <a href="author.html#2183">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: gruntster
Date: 2009-06-27 19:52:21 +0200 (Sat, 27 Jun 2009)
New Revision: 4968

Modified:
   branches/avidemux_2.5_branch_gruntster/cmake/admFFmpegBuild.cmake
   branches/avidemux_2.5_branch_gruntster/cmake/patches/libavcodec_avcodec.h.patch
   branches/avidemux_2.5_branch_gruntster/cmake/patches/libavcodec_h264.c.patch
   branches/avidemux_2.5_branch_gruntster/cmake/patches/libavcodec_mpeg12.c.patch
   branches/avidemux_2.5_branch_gruntster/cmake/patches/libavcodec_mpegvideo.c.patch
   branches/avidemux_2.5_branch_gruntster/cmake/patches/libavcodec_utils.c.patch
   branches/avidemux_2.5_branch_gruntster/cmake/patches/libavformat_isom.c.patch
   branches/avidemux_2.5_branch_gruntster/cmake/patches/libavformat_matroskaenc.c.patch
Log:
[ffmpeg] update FFmpeg to r19285 &amp; libswscale r29406

Modified: branches/avidemux_2.5_branch_gruntster/cmake/admFFmpegBuild.cmake
===================================================================
--- branches/avidemux_2.5_branch_gruntster/cmake/admFFmpegBuild.cmake	2009-06-27 15:35:33 UTC (rev 4967)
+++ branches/avidemux_2.5_branch_gruntster/cmake/admFFmpegBuild.cmake	2009-06-27 17:52:21 UTC (rev 4968)
@@ -1,7 +1,7 @@
 include(admFFmpegUtil)
 
-set(FFMPEG_VERSION 18940)	# <A HREF="http://git.ffmpeg.org/?p=ffmpeg;a=snapshot;h=1e3b68a502b568cc3b486914f0d69be9af919ba6;sf=tgz">http://git.ffmpeg.org/?p=ffmpeg;a=snapshot;h=1e3b68a502b568cc3b486914f0d69be9af919ba6;sf=tgz</A>
-set(SWSCALE_VERSION 29319)	# <A HREF="http://git.ffmpeg.org/?p=libswscale;a=snapshot;h=99683bba2e7148bb028776c2b5fefcb3064d48e9;sf=tgz">http://git.ffmpeg.org/?p=libswscale;a=snapshot;h=99683bba2e7148bb028776c2b5fefcb3064d48e9;sf=tgz</A>
+set(FFMPEG_VERSION 19285)	# <A HREF="http://git.ffmpeg.org/?p=ffmpeg;a=snapshot;h=a6262ab9bba80693bedf73a7252415af4e0ef463;sf=tgz">http://git.ffmpeg.org/?p=ffmpeg;a=snapshot;h=a6262ab9bba80693bedf73a7252415af4e0ef463;sf=tgz</A>
+set(SWSCALE_VERSION 29406)	# <A HREF="http://git.ffmpeg.org/?p=libswscale;a=snapshot;h=e52bf9389e0e77a63c3ee8d3f2ea67b8309207e3;sf=tgz">http://git.ffmpeg.org/?p=libswscale;a=snapshot;h=e52bf9389e0e77a63c3ee8d3f2ea67b8309207e3;sf=tgz</A>
 
 set(LIBRARY_SOURCE_DIR &quot;${CMAKE_SOURCE_DIR}/avidemux/ADM_libraries&quot;)
 set(FFMPEG_SOURCE_DIR &quot;${LIBRARY_SOURCE_DIR}/ffmpeg&quot;)

Modified: branches/avidemux_2.5_branch_gruntster/cmake/patches/libavcodec_avcodec.h.patch
===================================================================
--- branches/avidemux_2.5_branch_gruntster/cmake/patches/libavcodec_avcodec.h.patch	2009-06-27 15:35:33 UTC (rev 4967)
+++ branches/avidemux_2.5_branch_gruntster/cmake/patches/libavcodec_avcodec.h.patch	2009-06-27 17:52:21 UTC (rev 4968)
@@ -1,8 +1,8 @@
-*** libavcodec/avcodec.h.old	Mon May 25 14:32:16 2009
---- libavcodec/avcodec.h	Mon May 25 14:32:16 2009
+*** libavcodec/avcodec.h.old	Sat Jun 27 18:45:05 2009
+--- libavcodec/avcodec.h	Sat Jun 27 18:45:04 2009
 ***************
-*** 566,571 ****
---- 566,573 ----
+*** 568,573 ****
+--- 568,575 ----
   #define CODEC_FLAG2_CHUNKS        0x00008000 ///&lt; Input bitstream might be truncated at a packet boundaries instead of only at frame boundaries.
   #define CODEC_FLAG2_NON_LINEAR_QUANT 0x00010000 ///&lt; Use MPEG-2 nonlinear quantizer.
   #define CODEC_FLAG2_BIT_RESERVOIR 0x00020000 ///&lt; Use a bit reservoir when encoding if possible
@@ -12,8 +12,8 @@
   /* Unsupported options :
    *              Syntax Arithmetic coding (SAC)
 ***************
-*** 1412,1417 ****
---- 1414,1420 ----
+*** 1422,1427 ****
+--- 1424,1430 ----
        * - decoding: unused
        */
       int rc_max_rate;
@@ -22,8 +22,8 @@
       /**
        * minimum bitrate
 ***************
-*** 1426,1431 ****
---- 1429,1436 ----
+*** 1436,1441 ****
+--- 1439,1446 ----
        * - decoding: unused
        */
       int rc_buffer_size;

Modified: branches/avidemux_2.5_branch_gruntster/cmake/patches/libavcodec_h264.c.patch
===================================================================
--- branches/avidemux_2.5_branch_gruntster/cmake/patches/libavcodec_h264.c.patch	2009-06-27 15:35:33 UTC (rev 4967)
+++ branches/avidemux_2.5_branch_gruntster/cmake/patches/libavcodec_h264.c.patch	2009-06-27 17:52:21 UTC (rev 4968)
@@ -1,8 +1,8 @@
-*** libavcodec/h264.c.old	Mon May 25 14:32:18 2009
---- libavcodec/h264.c	Mon May 25 14:32:18 2009
+*** libavcodec/h264.c.old	Sat Jun 27 18:45:10 2009
+--- libavcodec/h264.c	Sat Jun 27 18:45:09 2009
 ***************
-*** 8135,8140 ****
---- 8135,8151 ----
+*** 8151,8156 ****
+--- 8151,8167 ----
       return 0;
   }
   

Modified: branches/avidemux_2.5_branch_gruntster/cmake/patches/libavcodec_mpeg12.c.patch
===================================================================
--- branches/avidemux_2.5_branch_gruntster/cmake/patches/libavcodec_mpeg12.c.patch	2009-06-27 15:35:33 UTC (rev 4967)
+++ branches/avidemux_2.5_branch_gruntster/cmake/patches/libavcodec_mpeg12.c.patch	2009-06-27 17:52:21 UTC (rev 4968)
@@ -1,8 +1,8 @@
-*** libavcodec/mpeg12.c.old	Mon May 25 14:32:18 2009
---- libavcodec/mpeg12.c	Mon May 25 14:32:18 2009
+*** libavcodec/mpeg12.c.old	Sat Jun 27 18:45:12 2009
+--- libavcodec/mpeg12.c	Sat Jun 27 18:45:11 2009
 ***************
-*** 1963,1968 ****
---- 1963,1973 ----
+*** 1962,1967 ****
+--- 1962,1972 ----
           ff_er_frame_end(s);
   
           MPV_frame_end(s);

Modified: branches/avidemux_2.5_branch_gruntster/cmake/patches/libavcodec_mpegvideo.c.patch
===================================================================
--- branches/avidemux_2.5_branch_gruntster/cmake/patches/libavcodec_mpegvideo.c.patch	2009-06-27 15:35:33 UTC (rev 4967)
+++ branches/avidemux_2.5_branch_gruntster/cmake/patches/libavcodec_mpegvideo.c.patch	2009-06-27 17:52:21 UTC (rev 4968)
@@ -1,7 +1,7 @@
-*** libavcodec/mpegvideo.c.old	Mon May 25 14:32:19 2009
---- libavcodec/mpegvideo.c	Mon May 25 14:32:19 2009
+*** libavcodec/mpegvideo.c.old	Sat Jun 27 18:45:15 2009
+--- libavcodec/mpegvideo.c	Sat Jun 27 18:45:14 2009
 ***************
-*** 610,616 ****
+*** 613,619 ****
       CHECKED_ALLOCZ(s-&gt;prev_pict_types, PREV_PICT_TYPES_BUFFER_SIZE);
   
       s-&gt;parse_context.state= -1;
@@ -9,7 +9,7 @@
          s-&gt;visualization_buffer[0] = av_malloc((s-&gt;mb_width*16 + 2*EDGE_WIDTH) * s-&gt;mb_height*16 + 2*EDGE_WIDTH);
          s-&gt;visualization_buffer[1] = av_malloc((s-&gt;mb_width*16 + 2*EDGE_WIDTH) * s-&gt;mb_height*16 + 2*EDGE_WIDTH);
          s-&gt;visualization_buffer[2] = av_malloc((s-&gt;mb_width*16 + 2*EDGE_WIDTH) * s-&gt;mb_height*16 + 2*EDGE_WIDTH);
---- 610,620 ----
+--- 613,623 ----
       CHECKED_ALLOCZ(s-&gt;prev_pict_types, PREV_PICT_TYPES_BUFFER_SIZE);
   
       s-&gt;parse_context.state= -1;

Modified: branches/avidemux_2.5_branch_gruntster/cmake/patches/libavcodec_utils.c.patch
===================================================================
--- branches/avidemux_2.5_branch_gruntster/cmake/patches/libavcodec_utils.c.patch	2009-06-27 15:35:33 UTC (rev 4967)
+++ branches/avidemux_2.5_branch_gruntster/cmake/patches/libavcodec_utils.c.patch	2009-06-27 17:52:21 UTC (rev 4968)
@@ -1,8 +1,8 @@
-*** libavcodec/utils.c.old	Mon May 25 14:32:20 2009
---- libavcodec/utils.c	Mon May 25 14:32:20 2009
+*** libavcodec/utils.c.old	Sat Jun 27 18:45:21 2009
+--- libavcodec/utils.c	Sat Jun 27 18:45:20 2009
 ***************
-*** 594,603 ****
---- 594,605 ----
+*** 609,618 ****
+--- 609,620 ----
   
       if((avctx-&gt;codec-&gt;capabilities &amp; CODEC_CAP_DELAY) || avpkt-&gt;size){
           //FIXME remove the check below _after_ ensuring that all audio check that the available space is enough
@@ -16,7 +16,7 @@
           *frame_size_ptr &lt; avctx-&gt;channels * avctx-&gt;frame_size * sizeof(int16_t)){
               av_log(avctx, AV_LOG_ERROR, &quot;buffer %d too small\n&quot;, *frame_size_ptr);
 ***************
-*** 1021,1027 ****
+*** 1047,1053 ****
           return -1;
       }
   #if !HAVE_MKSTEMP
@@ -24,7 +24,7 @@
   #else
       snprintf(*filename, len, &quot;/tmp/%sXXXXXX&quot;, prefix);
       fd = mkstemp(*filename);
---- 1023,1029 ----
+--- 1049,1055 ----
           return -1;
       }
   #if !HAVE_MKSTEMP

Modified: branches/avidemux_2.5_branch_gruntster/cmake/patches/libavformat_isom.c.patch
===================================================================
--- branches/avidemux_2.5_branch_gruntster/cmake/patches/libavformat_isom.c.patch	2009-06-27 15:35:33 UTC (rev 4967)
+++ branches/avidemux_2.5_branch_gruntster/cmake/patches/libavformat_isom.c.patch	2009-06-27 17:52:21 UTC (rev 4968)
@@ -1,17 +1,17 @@
-*** libavformat/isom.c.old	Mon May 25 14:32:21 2009
---- libavformat/isom.c	Mon May 25 14:32:21 2009
+*** libavformat/isom.c.old	Sat Jun 27 18:45:27 2009
+--- libavformat/isom.c	Sat Jun 27 18:45:27 2009
 ***************
-*** 192,198 ****
-      { CODEC_ID_MACE3, MKTAG('M', 'A', 'C', '3') }, /* Macintosh Audio Compression and Expansion 3:1 */
-      { CODEC_ID_MACE6, MKTAG('M', 'A', 'C', '6') }, /* Macintosh Audio Compression and Expansion 6:1 */
+*** 198,204 ****
+      { CODEC_ID_MP1, MKTAG('.', 'm', 'p', '1') }, /* MPEG layer 1 */
+      { CODEC_ID_MP2, MKTAG('.', 'm', 'p', '2') }, /* MPEG layer 2 */
   
 !     { CODEC_ID_MP3, MKTAG('.', 'm', 'p', '3') }, /* MPEG layer 3 */ /* sample files at <A HREF="http://www.3ivx.com/showcase.html">http://www.3ivx.com/showcase.html</A> use this tag */
       { CODEC_ID_MP3, 0x6D730055 }, /* MPEG layer 3 */
   
   /*  { CODEC_ID_OGG_VORBIS, MKTAG('O', 'g', 'g', 'S') }, *//* sample files at <A HREF="http://heroinewarrior.com/xmovie.php3">http://heroinewarrior.com/xmovie.php3</A> use this tag */
---- 192,201 ----
-      { CODEC_ID_MACE3, MKTAG('M', 'A', 'C', '3') }, /* Macintosh Audio Compression and Expansion 3:1 */
-      { CODEC_ID_MACE6, MKTAG('M', 'A', 'C', '6') }, /* Macintosh Audio Compression and Expansion 6:1 */
+--- 198,207 ----
+      { CODEC_ID_MP1, MKTAG('.', 'm', 'p', '1') }, /* MPEG layer 1 */
+      { CODEC_ID_MP2, MKTAG('.', 'm', 'p', '2') }, /* MPEG layer 2 */
   
 !     //MEANX { CODEC_ID_MP3, MKTAG('.', 'm', 'p', '3') }, /* MPEG layer 3 */ /* sample files at <A HREF="http://www.3ivx.com/showcase.html">http://www.3ivx.com/showcase.html</A> use this tag */
 !      { CODEC_ID_MP3, MKTAG( 'm', 'p', '4','a') },

Modified: branches/avidemux_2.5_branch_gruntster/cmake/patches/libavformat_matroskaenc.c.patch
===================================================================
--- branches/avidemux_2.5_branch_gruntster/cmake/patches/libavformat_matroskaenc.c.patch	2009-06-27 15:35:33 UTC (rev 4967)
+++ branches/avidemux_2.5_branch_gruntster/cmake/patches/libavformat_matroskaenc.c.patch	2009-06-27 17:52:21 UTC (rev 4968)
@@ -1,5 +1,5 @@
-*** libavformat/matroskaenc.c.old	Wed Apr  1 18:35:42 2009
---- libavformat/matroskaenc.c	Wed Apr  1 18:35:42 2009
+*** libavformat/matroskaenc.c.old	Sat Jun 27 18:45:28 2009
+--- libavformat/matroskaenc.c	Sat Jun 27 18:45:28 2009
 ***************
 *** 395,400 ****
 --- 395,401 ----
@@ -71,7 +71,7 @@
 *** 907,909 ****
 --- 947,959 ----
       .flags = AVFMT_GLOBALHEADER,
-      .codec_tag = (const AVCodecTag* const []){codec_wav_tags, 0},
+      .codec_tag = (const AVCodecTag* const []){ff_codec_wav_tags, 0},
   };
 + // MEANX
 + //


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002182.html">[Avidemux-svn-commit] r4967 - in	branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder:	. ffMpeg4
</A></li>
	<LI>Next message: <A HREF="002184.html">[Avidemux-svn-commit] r4969 -	branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2183">[ date ]</a>
              <a href="thread.html#2183">[ thread ]</a>
              <a href="subject.html#2183">[ subject ]</a>
              <a href="author.html#2183">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">More information about the Avidemux-svn-commit
mailing list</a><br>
</body></html>
