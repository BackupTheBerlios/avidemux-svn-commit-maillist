<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Avidemux-svn-commit] r5881 - in branches/avidemux_2.6_branch_mean:	avidemux_core/ADM_coreUtils/include avidemux_core/ADM_coreUtils/src	avidemux_core/ADM_coreVideoEncoder/include	avidemux_core/ADM_coreVideoEncoder/src	avidemux_plugins/ADM_videoEncoder/ffFlv1	avidemux_plugins/ADM_videoEncoder/ffMpeg4	avidemux_plugins/ADM_videoEncoder/ffMsMpeg4 cmake
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/avidemux-svn-commit/2010-January/index.html" >
   <LINK REL="made" HREF="mailto:avidemux-svn-commit%40lists.berlios.de?Subject=Re%3A%20%5BAvidemux-svn-commit%5D%20r5881%20-%20in%20branches/avidemux_2.6_branch_mean%3A%0A%09avidemux_core/ADM_coreUtils/include%20avidemux_core/ADM_coreUtils/src%0A%09avidemux_core/ADM_coreVideoEncoder/include%0A%09avidemux_core/ADM_coreVideoEncoder/src%0A%09avidemux_plugins/ADM_videoEncoder/ffFlv1%0A%09avidemux_plugins/ADM_videoEncoder/ffMpeg4%0A%09avidemux_plugins/ADM_videoEncoder/ffMsMpeg4%20cmake&In-Reply-To=%3C201001301311.o0UDBnpV000575%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003085.html">
   <LINK REL="Next"  HREF="003086.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Avidemux-svn-commit] r5881 - in branches/avidemux_2.6_branch_mean:	avidemux_core/ADM_coreUtils/include avidemux_core/ADM_coreUtils/src	avidemux_core/ADM_coreVideoEncoder/include	avidemux_core/ADM_coreVideoEncoder/src	avidemux_plugins/ADM_videoEncoder/ffFlv1	avidemux_plugins/ADM_videoEncoder/ffMpeg4	avidemux_plugins/ADM_videoEncoder/ffMsMpeg4 cmake</H1>
    <B>mean at BerliOS</B> 
    <A HREF="mailto:avidemux-svn-commit%40lists.berlios.de?Subject=Re%3A%20%5BAvidemux-svn-commit%5D%20r5881%20-%20in%20branches/avidemux_2.6_branch_mean%3A%0A%09avidemux_core/ADM_coreUtils/include%20avidemux_core/ADM_coreUtils/src%0A%09avidemux_core/ADM_coreVideoEncoder/include%0A%09avidemux_core/ADM_coreVideoEncoder/src%0A%09avidemux_plugins/ADM_videoEncoder/ffFlv1%0A%09avidemux_plugins/ADM_videoEncoder/ffMpeg4%0A%09avidemux_plugins/ADM_videoEncoder/ffMsMpeg4%20cmake&In-Reply-To=%3C201001301311.o0UDBnpV000575%40sheep.berlios.de%3E"
       TITLE="[Avidemux-svn-commit] r5881 - in branches/avidemux_2.6_branch_mean:	avidemux_core/ADM_coreUtils/include avidemux_core/ADM_coreUtils/src	avidemux_core/ADM_coreVideoEncoder/include	avidemux_core/ADM_coreVideoEncoder/src	avidemux_plugins/ADM_videoEncoder/ffFlv1	avidemux_plugins/ADM_videoEncoder/ffMpeg4	avidemux_plugins/ADM_videoEncoder/ffMsMpeg4 cmake">mean at mail.berlios.de
       </A><BR>
    <I>Sat Jan 30 14:11:49 CET 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="003085.html">[Avidemux-svn-commit] r5880 -	branches/avidemux_2.6_branch_mean/avidemux/common
</A></li>
        <LI>Next message: <A HREF="003086.html">[Avidemux-svn-commit] r5882 - in	branches/avidemux_2.6_branch_mean/avidemux_core:	ADM_coreUtils/src ADM_coreVideoEncoder/include	ADM_coreVideoEncoder/src
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3087">[ date ]</a>
              <a href="thread.html#3087">[ thread ]</a>
              <a href="subject.html#3087">[ subject ]</a>
              <a href="author.html#3087">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: mean
Date: 2010-01-30 14:11:48 +0100 (Sat, 30 Jan 2010)
New Revision: 5881

Added:
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoEncoder/include/ADM_coreVideoEncoderFFmpeg_param.h
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoEncoder/include/FFcodecContext.h
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoEncoder/include/FFcodecContext_desc.cpp
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoEncoder/include/FFcodecSettings.h
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoEncoder/src/FFcodecContext.conf
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoEncoder/src/FFcodecSettings.conf
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoEncoder/src/FFcodecSettings_desc.cpp
Modified:
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/include/ADM_paramList.h
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/src/ADM_paramList.cpp
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoEncoder/include/ADM_coreVideoEncoderFFmpeg.h
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoEncoder/src/ADM_coreVideoEncoderFFmpeg.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/ffFlv1/ADM_ffFlv1.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/ffMpeg4/ADM_ffMpeg4.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/ffMpeg4/ffMpeg4Plugin.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/ffMsMpeg4/ADM_ffMsMp4.cpp
   branches/avidemux_2.6_branch_mean/cmake/admSerialization.pl
Log:
[videoEncoder] Prepare to store metaconf : lavcCodec and compressParam

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/include/ADM_paramList.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/include/ADM_paramList.h	2010-01-29 18:29:23 UTC (rev 5880)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/include/ADM_paramList.h	2010-01-30 13:11:48 UTC (rev 5881)
@@ -28,7 +28,9 @@
         ADM_param_int32_t=2,
         ADM_param_float=3,
         ADM_param_bool=4,
-        ADM_param_string=5
+        ADM_param_string=5,
+        ADM_param_video_encode=6,
+        ADM_param_lavcodec_context=7
 }ADM_paramType;
 
 

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/src/ADM_paramList.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/src/ADM_paramList.cpp	2010-01-29 18:29:23 UTC (rev 5880)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/src/ADM_paramList.cpp	2010-01-30 13:11:48 UTC (rev 5881)
@@ -15,6 +15,19 @@
  ***************************************************************************/
 #include &quot;ADM_default.h&quot;
 #include &quot;ADM_paramList.h&quot;
+#include &quot;ADM_coreVideoEncoderFFmpeg_param.h&quot;
+
+static bool lavReadFromString(FFcodecContext *ctx,const char *str)
+{
+    printf(&quot;String:%s\n&quot;,str);
+    return true;
+}
+static bool lavWriteToString(FFcodecContext *ctx,char **str)
+{
+    *str=ADM_strdup(&quot;foobar&quot;);
+    return true;
+}
+
 /**
     \fn ADM_paramValidate
     \brief Check the confcouples match the param list
@@ -70,6 +83,24 @@
            SWAL(ADM_param_int32_t, int32_t, i32,Int32)
            SWAL(ADM_param_float,   float ,  f,Float)
            SWAL(ADM_param_bool,    bool ,   b,Bool)
+           case ADM_param_lavcodec_context:
+                        {
+                        char *lavString;
+                        if(false==couples-&gt;readAsString(name,&amp;lavString))
+                        {
+                                ADM_error(&quot;Error reading lavcodec conf&quot;);
+                                return false;
+                        }
+                        bool r=lavReadFromString((FFcodecContext *)(address+params[i].offset),lavString);
+                        ADM_dezalloc(lavString);
+                        if(false==r)
+                            {
+                                    ADM_error(&quot;Error reading lavcodec string&quot;);
+                                    return false;
+                            }
+                       }
+                        break;
+                        
            case ADM_param_string: ADM_error(&quot;not implemented string for paramList\n&quot;);ADM_assert(0);
         }
     }
@@ -107,6 +138,23 @@
            SWAL(ADM_param_int32_t, int32_t, i32,Int32)
            SWAL(ADM_param_float,   float ,  f,Float)
            SWAL(ADM_param_bool,    bool ,   b,Bool)
+           case ADM_param_lavcodec_context:
+              {
+                        char *lavString;
+                        if(false==lavWriteToString((FFcodecContext *)(address+params[i].offset),&amp;lavString))
+                        {
+                                ADM_error(&quot;Error writing lavcodec string&quot;);
+                                return false;
+                        }
+                        bool r=c-&gt;setInternalName(name,lavString);
+                        ADM_dezalloc(lavString);
+                        if(false==r)
+                        {
+                                ADM_error(&quot;Error writing lavcodec conf&quot;);
+                                return false;
+                        }
+              }
+                break;
            case ADM_param_string: ADM_error(&quot;not implemented string for paramList\n&quot;);ADM_assert(0);
         }
     }

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoEncoder/include/ADM_coreVideoEncoderFFmpeg.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoEncoder/include/ADM_coreVideoEncoderFFmpeg.h	2010-01-29 18:29:23 UTC (rev 5880)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoEncoder/include/ADM_coreVideoEncoderFFmpeg.h	2010-01-30 13:11:48 UTC (rev 5881)
@@ -20,79 +20,17 @@
 
 #include &quot;ADM_coreVideoEncoder.h&quot;
 #include &quot;ADM_colorspace.h&quot;
-extern &quot;C&quot; 
-{
-#include &quot;ADM_lavcodec.h&quot;
-}
 #include &quot;ADM_encoderConf.h&quot;
+#include &quot;ADM_coreVideoEncoderFFmpeg_param.h&quot;
+#include &quot;FFcodecSettings.h&quot;
 /**
-    FFcodecSetting
-*/
-typedef struct 
-{
-  const bool MultiThreaded;
-  COMPRES_PARAMS params;
-//
-
-  Motion_Est_ID me_method;
-  uint32_t _GMC;
-  uint32_t _4MV;
-  uint32_t _QPEL;
-  uint32_t _TRELLIS_QUANT;
-  uint32_t qmin;			// 2-31
-  uint32_t qmax;			// 2-31
-  uint32_t max_qdiff;		// 1-31
-  uint32_t max_b_frames;		// 0-1
-  uint32_t mpeg_quant;		// 0-1
-  uint32_t is_luma_elim_threshold;
-  uint32_t luma_elim_threshold;	// -99--99
-  uint32_t is_chroma_elim_threshold;	// -99--99           
-  uint32_t chroma_elim_threshold;	// -99--99      
-
-  float lumi_masking;		// -1--1        
-  int32_t is_lumi_masking;		// -1--1
-  float dark_masking;		// -1--1        
-  int32_t is_dark_masking;		// -1--1
-  float qcompress;		// 0.0--1.0
-  float qblur;			// 0.0--1.0
-  uint32_t minBitrate;          // In kBits/s
-  uint32_t maxBitrate;          // In kBits/s
-  uint32_t user_matrix;		// 0 normal / 1 tmpgenc / 2 anime / 3 kvcd / 4 hr-tmpgenc
-  uint32_t gop_size;			// For mpeg1/2 , 12 is good
-  uint16_t *intra_matrix;
-  uint16_t *inter_matrix;
-  uint32_t interlaced;
-  uint32_t bff;			// WLA: bottom field first flag
-  uint32_t widescreen;          //0 4/3  1 16/9
-
-  // new stuff from jakub ui
-  uint32_t mb_eval;			// Replace hq 0..2
-  uint32_t vratetol;			// filesize tolerance in kb
-
-  uint32_t is_temporal_cplx_masking;	// temporal masking 0--1        
-  float temporal_cplx_masking;	// temporal masking 0--1
-
-  uint32_t is_spatial_cplx_masking;	// spatial masking 0--1
-  float spatial_cplx_masking;	// spatial masking 0--1
-  uint32_t _NORMALIZE_AQP;		// normalize adap quantiz
-
-  //
-  uint32_t use_xvid_ratecontrol;
-  uint32_t bufferSize;		// in KBYTES !!!!
-  uint32_t override_ratecontrol;
-  uint32_t dummy;
-
-} FFcodecSetting;
-
-
-/**
     \class ADM_coreVideoEncoderFFmpeg
     \brief base class for VideoEncoder based on libavcodec
 */
 class ADM_coreVideoEncoderFFmpeg :public ADM_coreVideoEncoder
 {
 protected:
-               FFcodecSetting   Settings;
+               FFcodecSettings  Settings;
                AVCodecContext   *_context;      // Context 
                AVFrame          _frame;     
                ADMColorspace    *colorSpace;    // Colorspace converter if needed
@@ -109,14 +47,14 @@
     virtual               bool             preEncode(void); 
     virtual               bool             setup(CodecID codecId);
     virtual               bool             getExtraData(uint32_t *l,uint8_t **d) ;
-                          bool             presetContext(FFcodecSetting *set);
+                          bool             presetContext(FFcodecSettings *set);
                           bool             postEncode(ADMBitstream *out, uint32_t size);
     virtual               bool             setPassAndLogFile(int pass,const char *name); // Call this before setup if needed !
                           bool             setupPass(void);  
                           bool             encoderMT (void);
 public:
-                                            ADM_coreVideoEncoderFFmpeg(ADM_coreVideoFilter *src,FFcodecSetting *settings=NULL);
+                                            ADM_coreVideoEncoderFFmpeg(ADM_coreVideoFilter *src,FFcodecSettings *settings=NULL);
 virtual                                     ~ADM_coreVideoEncoderFFmpeg();
 
 };
-#endif
\ No newline at end of file
+#endif

Copied: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoEncoder/include/ADM_coreVideoEncoderFFmpeg_param.h (from rev 5880, branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/ffMpeg4/ffMpeg4Plugin.cpp)
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/ffMpeg4/ffMpeg4Plugin.cpp	2010-01-29 18:29:23 UTC (rev 5880)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoEncoder/include/ADM_coreVideoEncoderFFmpeg_param.h	2010-01-30 13:11:48 UTC (rev 5881)
@@ -0,0 +1,28 @@
+/***************************************************************************
+                          \fn ADM_coreVideoEncoder
+                          \brief Base class for video encoder plugin
+                             -------------------
+    
+    copyright            : (C) 2002/2009 by mean
+    email                : <A HREF="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">fixounet at free.fr</A>
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+#ifndef ADM_CORE_VIDEO_ENCODER_FF_PARAM_H
+#define ADM_CORE_VIDEO_ENCODER_FF_PARAM_H
+
+
+#define ADM_AVCODEC_SETTING_VERSION 2
+extern &quot;C&quot; 
+{
+#include &quot;ADM_lavcodec.h&quot;
+}
+#include &quot;FFcodecContext.h&quot;
+#endif

Added: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoEncoder/include/FFcodecContext.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoEncoder/include/FFcodecContext.h	2010-01-29 18:29:23 UTC (rev 5880)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoEncoder/include/FFcodecContext.h	2010-01-30 13:11:48 UTC (rev 5881)
@@ -0,0 +1,47 @@
+// Automatically generated, do not edit!
+#ifndef ADM_FFcodecContext_CONF_H
+#define ADM_FFcodecContext_CONF_H
+typedef struct {
+   uint32_t version;
+   bool MultiThreaded;
+   uint32_t me_method;
+   uint32_t _GMC;
+   uint32_t _4MV;
+   uint32_t _QPEL;
+   uint32_t _TRELLIS_QUANT;
+   uint32_t qmin;
+   uint32_t qmax;
+   uint32_t max_qdiff;
+   uint32_t max_b_frames;
+   uint32_t mpeg_quant;
+   uint32_t is_luma_elim_threshold;
+   uint32_t luma_elim_threshold;
+   uint32_t is_chroma_elim_threshold;
+   uint32_t chroma_elim_threshold;
+   float lumi_masking;
+   int32_t is_lumi_masking;
+   float dark_masking;
+   int32_t is_dark_masking;
+   float qcompress;
+   float qblur;
+   uint32_t minBitrate;
+   uint32_t maxBitrate;
+   uint32_t user_matrix;
+   uint32_t gop_size;
+   uint32_t interlaced;
+   uint32_t bff;
+   uint32_t widescreen;
+   uint32_t mb_eval;
+   uint32_t vratetol;
+   uint32_t is_temporal_cplx_masking;
+   float temporal_cplx_masking;
+   uint32_t is_spatial_cplx_masking;
+   float spatial_cplx_masking;
+   uint32_t _NORMALIZE_AQP;
+   uint32_t use_xvid_ratecontrol;
+   uint32_t bufferSize;
+   uint32_t override_ratecontrol;
+   uint32_t dummy;
+}FFcodecContext;
+#endif //FFcodecContext
+//EOF

Added: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoEncoder/include/FFcodecContext_desc.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoEncoder/include/FFcodecContext_desc.cpp	2010-01-29 18:29:23 UTC (rev 5880)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoEncoder/include/FFcodecContext_desc.cpp	2010-01-30 13:11:48 UTC (rev 5881)
@@ -0,0 +1,44 @@
+// Automatically generated, do not edit!
+const ADM_paramList FFcodecContext_param[]={
+ {&quot;version&quot;,offsetof( FFcodecContext,version),&quot;uint32_t&quot;,ADM_param_uint32_t},
+ {&quot;MultiThreaded&quot;,offsetof( FFcodecContext,MultiThreaded),&quot;bool&quot;,ADM_param_bool},
+ {&quot;me_method&quot;,offsetof( FFcodecContext,me_method),&quot;uint32_t&quot;,ADM_param_uint32_t},
+ {&quot;_GMC&quot;,offsetof( FFcodecContext,_GMC),&quot;uint32_t&quot;,ADM_param_uint32_t},
+ {&quot;_4MV&quot;,offsetof( FFcodecContext,_4MV),&quot;uint32_t&quot;,ADM_param_uint32_t},
+ {&quot;_QPEL&quot;,offsetof( FFcodecContext,_QPEL),&quot;uint32_t&quot;,ADM_param_uint32_t},
+ {&quot;_TRELLIS_QUANT&quot;,offsetof( FFcodecContext,_TRELLIS_QUANT),&quot;uint32_t&quot;,ADM_param_uint32_t},
+ {&quot;qmin&quot;,offsetof( FFcodecContext,qmin),&quot;uint32_t&quot;,ADM_param_uint32_t},
+ {&quot;qmax&quot;,offsetof( FFcodecContext,qmax),&quot;uint32_t&quot;,ADM_param_uint32_t},
+ {&quot;max_qdiff&quot;,offsetof( FFcodecContext,max_qdiff),&quot;uint32_t&quot;,ADM_param_uint32_t},
+ {&quot;max_b_frames&quot;,offsetof( FFcodecContext,max_b_frames),&quot;uint32_t&quot;,ADM_param_uint32_t},
+ {&quot;mpeg_quant&quot;,offsetof( FFcodecContext,mpeg_quant),&quot;uint32_t&quot;,ADM_param_uint32_t},
+ {&quot;is_luma_elim_threshold&quot;,offsetof( FFcodecContext,is_luma_elim_threshold),&quot;uint32_t&quot;,ADM_param_uint32_t},
+ {&quot;luma_elim_threshold&quot;,offsetof( FFcodecContext,luma_elim_threshold),&quot;uint32_t&quot;,ADM_param_uint32_t},
+ {&quot;is_chroma_elim_threshold&quot;,offsetof( FFcodecContext,is_chroma_elim_threshold),&quot;uint32_t&quot;,ADM_param_uint32_t},
+ {&quot;chroma_elim_threshold&quot;,offsetof( FFcodecContext,chroma_elim_threshold),&quot;uint32_t&quot;,ADM_param_uint32_t},
+ {&quot;lumi_masking&quot;,offsetof( FFcodecContext,lumi_masking),&quot;float&quot;,ADM_param_float},
+ {&quot;is_lumi_masking&quot;,offsetof( FFcodecContext,is_lumi_masking),&quot;int32_t&quot;,ADM_param_int32_t},
+ {&quot;dark_masking&quot;,offsetof( FFcodecContext,dark_masking),&quot;float&quot;,ADM_param_float},
+ {&quot;is_dark_masking&quot;,offsetof( FFcodecContext,is_dark_masking),&quot;int32_t&quot;,ADM_param_int32_t},
+ {&quot;qcompress&quot;,offsetof( FFcodecContext,qcompress),&quot;float&quot;,ADM_param_float},
+ {&quot;qblur&quot;,offsetof( FFcodecContext,qblur),&quot;float&quot;,ADM_param_float},
+ {&quot;minBitrate&quot;,offsetof( FFcodecContext,minBitrate),&quot;uint32_t&quot;,ADM_param_uint32_t},
+ {&quot;maxBitrate&quot;,offsetof( FFcodecContext,maxBitrate),&quot;uint32_t&quot;,ADM_param_uint32_t},
+ {&quot;user_matrix&quot;,offsetof( FFcodecContext,user_matrix),&quot;uint32_t&quot;,ADM_param_uint32_t},
+ {&quot;gop_size&quot;,offsetof( FFcodecContext,gop_size),&quot;uint32_t&quot;,ADM_param_uint32_t},
+ {&quot;interlaced&quot;,offsetof( FFcodecContext,interlaced),&quot;uint32_t&quot;,ADM_param_uint32_t},
+ {&quot;bff&quot;,offsetof( FFcodecContext,bff),&quot;uint32_t&quot;,ADM_param_uint32_t},
+ {&quot;widescreen&quot;,offsetof( FFcodecContext,widescreen),&quot;uint32_t&quot;,ADM_param_uint32_t},
+ {&quot;mb_eval&quot;,offsetof( FFcodecContext,mb_eval),&quot;uint32_t&quot;,ADM_param_uint32_t},
+ {&quot;vratetol&quot;,offsetof( FFcodecContext,vratetol),&quot;uint32_t&quot;,ADM_param_uint32_t},
+ {&quot;is_temporal_cplx_masking&quot;,offsetof( FFcodecContext,is_temporal_cplx_masking),&quot;uint32_t&quot;,ADM_param_uint32_t},
+ {&quot;temporal_cplx_masking&quot;,offsetof( FFcodecContext,temporal_cplx_masking),&quot;float&quot;,ADM_param_float},
+ {&quot;is_spatial_cplx_masking&quot;,offsetof( FFcodecContext,is_spatial_cplx_masking),&quot;uint32_t&quot;,ADM_param_uint32_t},
+ {&quot;spatial_cplx_masking&quot;,offsetof( FFcodecContext,spatial_cplx_masking),&quot;float&quot;,ADM_param_float},
+ {&quot;_NORMALIZE_AQP&quot;,offsetof( FFcodecContext,_NORMALIZE_AQP),&quot;uint32_t&quot;,ADM_param_uint32_t},
+ {&quot;use_xvid_ratecontrol&quot;,offsetof( FFcodecContext,use_xvid_ratecontrol),&quot;uint32_t&quot;,ADM_param_uint32_t},
+ {&quot;bufferSize&quot;,offsetof( FFcodecContext,bufferSize),&quot;uint32_t&quot;,ADM_param_uint32_t},
+ {&quot;override_ratecontrol&quot;,offsetof( FFcodecContext,override_ratecontrol),&quot;uint32_t&quot;,ADM_param_uint32_t},
+ {&quot;dummy&quot;,offsetof( FFcodecContext,dummy),&quot;uint32_t&quot;,ADM_param_uint32_t},
+{NULL,0,NULL}
+};

Added: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoEncoder/include/FFcodecSettings.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoEncoder/include/FFcodecSettings.h	2010-01-29 18:29:23 UTC (rev 5880)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoEncoder/include/FFcodecSettings.h	2010-01-30 13:11:48 UTC (rev 5881)
@@ -0,0 +1,9 @@
+// Automatically generated, do not edit!
+#ifndef ADM_FFcodecSettings_CONF_H
+#define ADM_FFcodecSettings_CONF_H
+typedef struct {
+   COMPRES_PARAMS params;
+   FFcodecContext lavcSettings;
+}FFcodecSettings;
+#endif //FFcodecSettings
+//EOF

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoEncoder/src/ADM_coreVideoEncoderFFmpeg.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoEncoder/src/ADM_coreVideoEncoderFFmpeg.cpp	2010-01-29 18:29:23 UTC (rev 5880)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoEncoder/src/ADM_coreVideoEncoderFFmpeg.cpp	2010-01-30 13:11:48 UTC (rev 5881)
@@ -27,6 +27,7 @@
     #define aprintf printf
 #endif
 
+#define LAVS(x) Settings.lavcSettings.x
 typedef struct
 {
     uint64_t mn,mx;
@@ -88,7 +89,7 @@
 
 */
 
-ADM_coreVideoEncoderFFmpeg::ADM_coreVideoEncoderFFmpeg(ADM_coreVideoFilter *src,FFcodecSetting *set) 
+ADM_coreVideoEncoderFFmpeg::ADM_coreVideoEncoderFFmpeg(ADM_coreVideoFilter *src,FFcodecSettings *set) 
                     : ADM_coreVideoEncoder(src)
 {
 uint32_t w,h;
@@ -111,7 +112,7 @@
     statFileName=NULL;
     statFile=NULL;
     _isMT=false;
-    encoderDelay=source-&gt;getInfo()-&gt;frameIncrement*Settings.max_b_frames;
+    encoderDelay=source-&gt;getInfo()-&gt;frameIncrement*LAVS(max_b_frames);
     ADM_info(&quot;[Lavcodec] Using a video encoder delay of %d ms\n&quot;,(int)(encoderDelay/1000));
 }
 /**
@@ -269,7 +270,7 @@
     }
    prolog();
    printf(&quot;[ff] Time base %d/%d\n&quot;, _context-&gt;time_base.num,_context-&gt;time_base.den);
-   if(Settings.MultiThreaded==true)
+   if(LAVS(MultiThreaded)==true)
         encoderMT();
    res=avcodec_open(_context, codec); 
    if(res&lt;0) 
@@ -387,12 +388,12 @@
     \fn presetContext
     \brief put sensible values into context
 */
-bool ADM_coreVideoEncoderFFmpeg::presetContext(FFcodecSetting *set)
+bool ADM_coreVideoEncoderFFmpeg::presetContext(FFcodecSettings *set)
 {
 	  _context-&gt;gop_size = 250;
 	
-#define SETX(x) _context-&gt;x=set-&gt;x; printf(&quot;[LAVCODEC]&quot;#x&quot; : %d\n&quot;,set-&gt;x);
-#define SETX_COND(x) if(set-&gt;is_##x) {_context-&gt;x=set-&gt;x; printf(&quot;[LAVCODEC]&quot;#x&quot; : %d\n&quot;,set-&gt;x);} else\
+#define SETX(x) _context-&gt;x=set-&gt;lavcSettings.x; printf(&quot;[LAVCODEC]&quot;#x&quot; : %d\n&quot;,set-&gt;lavcSettings.x);
+#define SETX_COND(x) if(set-&gt;lavcSettings.is_##x) {_context-&gt;x=set-&gt;lavcSettings.x; printf(&quot;[LAVCODEC]&quot;#x&quot; : %d\n&quot;,set-&gt;lavcSettings.x);} else\
 		{ printf(#x&quot; is not activated\n&quot;);}
       SETX (me_method);
       SETX (qmin);
@@ -406,8 +407,8 @@
 #undef SETX
 #undef SETX_COND
 
-#define SETX(x)  _context-&gt;x=set-&gt;x; printf(&quot;[LAVCODEC]&quot;#x&quot; : %f\n&quot;,set-&gt;x);
-#define SETX_COND(x)  if(set-&gt;is_##x) {_context-&gt;x=set-&gt;x; printf(&quot;[LAVCODEC]&quot;#x&quot; : %f\n&quot;,set-&gt;x);} else  \
+#define SETX(x)  _context-&gt;x=set-&gt;lavcSettings.x; printf(&quot;[LAVCODEC]&quot;#x&quot; : %f\n&quot;,set-&gt;lavcSettings.x);
+#define SETX_COND(x)  if(set-&gt;lavcSettings.is_##x) {_context-&gt;x=set-&gt;lavcSettings.x; printf(&quot;[LAVCODEC]&quot;#x&quot; : %f\n&quot;,set-&gt;lavcSettings.x);} else  \
 									{printf(&quot;[LAVCODEC]&quot;#x&quot; No activated\n&quot;);}
       SETX_COND (lumi_masking);
       SETX_COND (dark_masking);
@@ -419,11 +420,11 @@
 #undef SETX
 #undef SETX_COND
 
-#define SETX(x) if(set-&gt;x){ _context-&gt;flags|=CODEC_FLAG##x;printf(&quot;[LAVCODEC]&quot;#x&quot; is set\n&quot;);}
+#define SETX(x) if(set-&gt;lavcSettings.x){ _context-&gt;flags|=CODEC_FLAG##x;printf(&quot;[LAVCODEC]&quot;#x&quot; is set\n&quot;);}
       SETX (_GMC);
 
 
-    switch (set-&gt;mb_eval)
+    switch (set-&gt;lavcSettings.mb_eval)
 	{
         case 0:
           _context-&gt;mb_decision = FF_MB_DECISION_SIMPLE;
@@ -440,11 +441,11 @@
       
       SETX (_4MV);
       SETX (_QPEL);
-      if(set-&gt;_TRELLIS_QUANT) _context-&gt;trellis=1;
+      if(set-&gt;lavcSettings._TRELLIS_QUANT) _context-&gt;trellis=1;
       //SETX(_HQ);
       //SETX (_NORMALIZE_AQP);
 
-      if (set-&gt;widescreen)
+      if (set-&gt;lavcSettings.widescreen)
         {
           _context-&gt;sample_aspect_ratio.num = 16;
           _context-&gt;sample_aspect_ratio.den = 9;

Added: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoEncoder/src/FFcodecContext.conf
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoEncoder/src/FFcodecContext.conf	2010-01-29 18:29:23 UTC (rev 5880)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoEncoder/src/FFcodecContext.conf	2010-01-30 13:11:48 UTC (rev 5881)
@@ -0,0 +1,40 @@
+uint32_t:version;
+bool:MultiThreaded;
+uint32_t:me_method;
+uint32_t:_GMC;
+uint32_t:_4MV;
+uint32_t:_QPEL;
+uint32_t:_TRELLIS_QUANT;
+uint32_t:qmin;			// 2-31
+uint32_t:qmax;			// 2-31
+uint32_t:max_qdiff;		// 1-31
+uint32_t:max_b_frames;		// 0-1
+uint32_t:mpeg_quant;		// 0-1
+uint32_t:is_luma_elim_threshold;
+uint32_t:luma_elim_threshold;	// -99--99
+uint32_t:is_chroma_elim_threshold;	// -99--99           
+uint32_t:chroma_elim_threshold;	// -99--99      
+float:lumi_masking;		// -1--1        
+int32_t:is_lumi_masking;		// -1--1
+float:dark_masking;		// -1--1        
+int32_t:is_dark_masking;		// -1--1
+float:qcompress;		// 0.0--1.0
+float:qblur;			// 0.0--1.0
+uint32_t:minBitrate;          // In kBits/s
+uint32_t:maxBitrate;          // In kBits/s
+uint32_t:user_matrix;		// 0 normal / 1 tmpgenc / 2 anime / 3 kvcd / 4 hr-tmpgenc
+uint32_t:gop_size;			// For mpeg1/2 , 12 is good
+uint32_t:interlaced;
+uint32_t:bff;			// WLA: bottom field first flag
+uint32_t:widescreen;          //0 4/3  1 16/9
+uint32_t:mb_eval;			// Replace hq 0..2
+uint32_t:vratetol;			// filesize tolerance in kb
+uint32_t:is_temporal_cplx_masking;	// temporal masking 0--1        
+float:temporal_cplx_masking;	// temporal masking 0--1
+uint32_t:is_spatial_cplx_masking;	// spatial masking 0--1
+float:spatial_cplx_masking;	// spatial masking 0--1
+uint32_t:_NORMALIZE_AQP;		// normalize adap quantiz
+uint32_t:use_xvid_ratecontrol;
+uint32_t:bufferSize;		// in KBYTES !!!!
+uint32_t:override_ratecontrol;
+uint32_t:dummy;

Added: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoEncoder/src/FFcodecSettings.conf
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoEncoder/src/FFcodecSettings.conf	2010-01-29 18:29:23 UTC (rev 5880)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoEncoder/src/FFcodecSettings.conf	2010-01-30 13:11:48 UTC (rev 5881)
@@ -0,0 +1,2 @@
+video_encode:params
+lavcodec_context:lavcSettings

Added: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoEncoder/src/FFcodecSettings_desc.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoEncoder/src/FFcodecSettings_desc.cpp	2010-01-29 18:29:23 UTC (rev 5880)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoEncoder/src/FFcodecSettings_desc.cpp	2010-01-30 13:11:48 UTC (rev 5881)
@@ -0,0 +1,6 @@
+// Automatically generated, do not edit!
+const ADM_paramList FFcodecSettings_param[]={
+ {&quot;params&quot;,offsetof( FFcodecSettings,params),&quot;COMPRES_PARAMS&quot;,ADM_param_video_encode},
+ {&quot;lavcSettings&quot;,offsetof( FFcodecSettings,lavcSettings),&quot;FFcodecContext&quot;,ADM_param_lavcodec_context},
+{NULL,0,NULL}
+};

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/ffFlv1/ADM_ffFlv1.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/ffFlv1/ADM_ffFlv1.cpp	2010-01-29 18:29:23 UTC (rev 5880)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/ffFlv1/ADM_ffFlv1.cpp	2010-01-30 13:11:48 UTC (rev 5881)
@@ -27,9 +27,9 @@
 #define aprintf printf
 #endif
 
-static FFcodecSetting Flv1Settings=
+static FFcodecSettings Flv1Settings=
 {
-    false,
+    
     {
     COMPRESS_CQ, //COMPRESSION_MODE  mode;
     2,              // uint32_t          qz;           /// Quantizer
@@ -38,6 +38,9 @@
     1500,           //uint32_t          avg_bitrate;  /// avg_bitrate is in kb/s!!
     ADM_ENC_CAP_CBR+ADM_ENC_CAP_CQ+ADM_ENC_CAP_2PASS+ADM_ENC_CAP_2PASS_BR
     },
+    {
+          ADM_AVCODEC_SETTING_VERSION,
+          false,
           ME_EPZS,			// ME
           0,				// GMC     
           0,				// 4MV
@@ -75,6 +78,7 @@
           0.0,				// spatial masking
           0,				// NAQ
           0				    // DUMMY 
+    }
 };
 /**
         \fn ADM_ffFlv1Encoder
@@ -217,10 +221,10 @@
   {2,QT_TR_NOOP(&quot;Rate distortion&quot;)}
 };     
 
-        FFcodecSetting *conf=&amp;Flv1Settings;
+        FFcodecSettings *conf=&amp;Flv1Settings;
 
-uint32_t me=(uint32_t)conf-&gt;me_method;  
-#define PX(x) &amp;(conf-&gt;x)
+uint32_t me=(uint32_t)conf-&gt;lavcSettings.me_method;  
+#define PX(x) &amp;(conf-&gt;lavcSettings.x)
 
          diaElemBitrate   bitrate(&amp;(Flv1Settings.params),NULL);
          diaElemUInteger  qminM(PX(qmin),QT_TR_NOOP(&quot;Mi_n. quantizer:&quot;),1,31);
@@ -250,7 +254,7 @@
          diaElemTabs *tabs[]={&amp;tabMode,&amp;tabQz,&amp;tabRC};
         if( diaFactoryRunTabs(QT_TR_NOOP(&quot;libavcodec FLV1 configuration&quot;),3,tabs))
         {
-          conf-&gt;me_method=(Motion_Est_ID)me;
+          conf-&gt;lavcSettings.me_method=(Motion_Est_ID)me;
           return true;
         }
          return false;

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/ffMpeg4/ADM_ffMpeg4.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/ffMpeg4/ADM_ffMpeg4.cpp	2010-01-29 18:29:23 UTC (rev 5880)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/ffMpeg4/ADM_ffMpeg4.cpp	2010-01-30 13:11:48 UTC (rev 5881)
@@ -27,9 +27,8 @@
 #define aprintf printf
 #endif
 
-static FFcodecSetting Mp4Settings=
+FFcodecSettings Mp4Settings=
 {
-    true, // Multithreaded
     {
     COMPRESS_CQ, //COMPRESSION_MODE  mode;
     2,              // uint32_t          qz;           /// Quantizer
@@ -38,6 +37,9 @@
     1500,           //uint32_t          avg_bitrate;  /// avg_bitrate is in kb/s!!
     ADM_ENC_CAP_CBR+ADM_ENC_CAP_CQ+ADM_ENC_CAP_2PASS+ADM_ENC_CAP_2PASS_BR+ADM_ENC_CAP_GLOBAL+ADM_ENC_CAP_SAME
     },
+    {
+        ADM_AVCODEC_SETTING_VERSION,
+        true, // Multithreaded
           ME_EPZS,			// ME
           0,				// GMC     
           1,				// 4MV
@@ -75,6 +77,7 @@
           0.0,				// spatial masking
           0,				// NAQ
           0				    // DUMMY 
+    }
 };
 /**
         \fn ADM_ffMpeg4Encoder
@@ -239,10 +242,10 @@
   {2,QT_TR_NOOP(&quot;Rate distortion&quot;)}
 };     
 
-        FFcodecSetting *conf=&amp;Mp4Settings;
+        FFcodecSettings *conf=&amp;Mp4Settings;
 
-uint32_t me=(uint32_t)conf-&gt;me_method;  
-#define PX(x) &amp;(conf-&gt;x)
+uint32_t me=(uint32_t)conf-&gt;lavcSettings.me_method;  
+#define PX(x) &amp;(conf-&gt;lavcSettings.x)
 
          diaElemBitrate   bitrate(&amp;(Mp4Settings.params),NULL);
          diaElemMenu      meM(&amp;me,QT_TR_NOOP(&quot;Matrices&quot;),4,meE);
@@ -294,7 +297,7 @@
          diaElemTabs *tabs[]={&amp;tabMode,&amp;tabME,&amp;tabQz,&amp;tabRC};
         if( diaFactoryRunTabs(QT_TR_NOOP(&quot;libavcodec MPEG-4 configuration&quot;),4,tabs))
         {
-          conf-&gt;me_method=(Motion_Est_ID)me;
+          conf-&gt;lavcSettings.me_method=(Motion_Est_ID)me;
           return true;
         }
          return false;

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/ffMpeg4/ffMpeg4Plugin.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/ffMpeg4/ffMpeg4Plugin.cpp	2010-01-29 18:29:23 UTC (rev 5880)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/ffMpeg4/ffMpeg4Plugin.cpp	2010-01-30 13:11:48 UTC (rev 5881)
@@ -18,9 +18,9 @@
 #include &quot;ADM_default.h&quot;
 #include &quot;ADM_ffMpeg4.h&quot;
 #include &quot;ADM_coreVideoEncoderInternal.h&quot;
-
+#include &quot;../src/FFcodecSettings_desc.cpp&quot;
 extern bool         ffMpeg4Configure(void);
-
+extern FFcodecSettings Mp4Settings;
 ADM_DECLARE_VIDEO_ENCODER_PREAMBLE(ADM_ffMpeg4Encoder);
 ADM_DECLARE_VIDEO_ENCODER_MAIN(&quot;ffMpeg4&quot;,
                                &quot;Mpeg4 ASP (ff)&quot;,
@@ -28,6 +28,6 @@
                                 ffMpeg4Configure, // No configuration
                                 ADM_UI_ALL,
                                 1,0,0,
-                                NULL, // conf template
-                                NULL // conf var
+                                FFcodecSettings_param, // conf template
+                                &amp;Mp4Settings // conf var
 );

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/ffMsMpeg4/ADM_ffMsMp4.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/ffMsMpeg4/ADM_ffMsMp4.cpp	2010-01-29 18:29:23 UTC (rev 5880)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/ffMsMpeg4/ADM_ffMsMp4.cpp	2010-01-30 13:11:48 UTC (rev 5881)
@@ -27,9 +27,9 @@
 #define aprintf printf
 #endif
 
-static FFcodecSetting MsMp4Settings=
+static FFcodecSettings MsMp4Settings=
 {
-    false,
+
     {
     COMPRESS_CQ, //COMPRESSION_MODE  mode;
     2,              // uint32_t          qz;           /// Quantizer
@@ -38,6 +38,9 @@
     1500,           //uint32_t          avg_bitrate;  /// avg_bitrate is in kb/s!!
     ADM_ENC_CAP_CBR+ADM_ENC_CAP_CQ+ADM_ENC_CAP_2PASS+ADM_ENC_CAP_2PASS_BR+ADM_ENC_CAP_GLOBAL+ADM_ENC_CAP_SAME
     },
+    {
+          ADM_AVCODEC_SETTING_VERSION,
+          false, // MT
           ME_EPZS,			// ME
           0,				// GMC     
           0,				// 4MV
@@ -75,6 +78,7 @@
           0.0,				// spatial masking
           0,				// NAQ
           0				    // DUMMY 
+    }
 };
 /**
         \fn ADM_ffMsMp4Encoder
@@ -225,10 +229,10 @@
   {2,QT_TR_NOOP(&quot;Rate distortion&quot;)}
 };     
 
-        FFcodecSetting *conf=&amp;MsMp4Settings;
+        FFcodecSettings *conf=&amp;MsMp4Settings;
 
-uint32_t me=(uint32_t)conf-&gt;me_method;  
-#define PX(x) &amp;(conf-&gt;x)
+uint32_t me=(uint32_t)conf-&gt;lavcSettings.me_method;  
+#define PX(x) &amp;(conf-&gt;lavcSettings.x)
 
          diaElemBitrate   bitrate(&amp;(MsMp4Settings.params),NULL);
          diaElemUInteger  qminM(PX(qmin),QT_TR_NOOP(&quot;Mi_n. quantizer:&quot;),1,31);
@@ -258,7 +262,7 @@
          diaElemTabs *tabs[]={&amp;tabMode,&amp;tabQz,&amp;tabRC};
         if( diaFactoryRunTabs(QT_TR_NOOP(&quot;libavcodec MPEG-4 configuration&quot;),3,tabs))
         {
-          conf-&gt;me_method=(Motion_Est_ID)me;
+          conf-&gt;lavcSettings.me_method=(Motion_Est_ID)me;
           return true;
         }
          return false;

Modified: branches/avidemux_2.6_branch_mean/cmake/admSerialization.pl
===================================================================
--- branches/avidemux_2.6_branch_mean/cmake/admSerialization.pl	2010-01-29 18:29:23 UTC (rev 5880)
+++ branches/avidemux_2.6_branch_mean/cmake/admSerialization.pl	2010-01-30 13:11:48 UTC (rev 5881)
@@ -13,6 +13,8 @@
 $ctypes{&quot;string&quot;}=&quot;char *&quot;;
 $ctypes{&quot;bool&quot;}=&quot;bool&quot;;
 $ctypes{&quot;float&quot;}=&quot;float&quot;;
+$ctypes{&quot;video_encode&quot;}=&quot;COMPRES_PARAMS&quot;;
+$ctypes{&quot;lavcodec_context&quot;}=&quot;FFcodecContext&quot;;
 
 $atypes{&quot;uint32_t&quot;}=&quot;ADM_param_uint32_t&quot;;
 $atypes{&quot;int32_t&quot;}=&quot;ADM_param_int32_t&quot;;
@@ -20,6 +22,8 @@
 $atypes{&quot;bool&quot;}=&quot;ADM_param_bool&quot;;
 $atypes{&quot;string&quot;}=&quot;ADM_param_string&quot;;
 $atypes{&quot;float&quot;}=&quot;ADM_param_float&quot;;
+$atypes{&quot;video_encode&quot;}=&quot;ADM_param_video_encode&quot;;
+$atypes{&quot;lavcodec_context&quot;}=&quot;ADM_param_lavcodec_context&quot;;
 
 #
 sub processLine
@@ -101,6 +105,7 @@
         my $name;
         ($type,$name)=split &quot;:&quot;,$a;
         #print &quot;1: &quot;.$a.&quot;,2:&quot;.$type.&quot;,3:&quot;.$name.&quot;\n&quot; ;
+        $name=~s/;.*$//g;
         processLine($type,$name);
 }
 writeHeaderFoot();


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003085.html">[Avidemux-svn-commit] r5880 -	branches/avidemux_2.6_branch_mean/avidemux/common
</A></li>
	<LI>Next message: <A HREF="003086.html">[Avidemux-svn-commit] r5882 - in	branches/avidemux_2.6_branch_mean/avidemux_core:	ADM_coreUtils/src ADM_coreVideoEncoder/include	ADM_coreVideoEncoder/src
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3087">[ date ]</a>
              <a href="thread.html#3087">[ thread ]</a>
              <a href="subject.html#3087">[ subject ]</a>
              <a href="author.html#3087">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">More information about the Avidemux-svn-commit
mailing list</a><br>
</body></html>
