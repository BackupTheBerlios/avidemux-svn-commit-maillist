<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Avidemux-svn-commit] r3700 - in	branches/avidemux_2.5_branch_gruntster: avidemux	avidemux/ADM_audiocodec avidemux/ADM_audiofilter	avidemux/ADM_codecs avidemux/ADM_encoder	avidemux/ADM_libraries/ADM_lavcodec	avidemux/ADM_libraries/ADM_libwrapper	avidemux/ADM_userInterfaces/ADM_commonUI cmake
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/avidemux-svn-commit/2007-November/index.html" >
   <LINK REL="made" HREF="mailto:avidemux-svn-commit%40lists.berlios.de?Subject=Re%3A%20%5BAvidemux-svn-commit%5D%20r3700%20-%20in%0A%09branches/avidemux_2.5_branch_gruntster%3A%20avidemux%0A%09avidemux/ADM_audiocodec%20avidemux/ADM_audiofilter%0A%09avidemux/ADM_codecs%20avidemux/ADM_encoder%0A%09avidemux/ADM_libraries/ADM_lavcodec%0A%09avidemux/ADM_libraries/ADM_libwrapper%0A%09avidemux/ADM_userInterfaces/ADM_commonUI%20cmake&In-Reply-To=%3C200711211849.lALIn4PP015284%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000967.html">
   <LINK REL="Next"  HREF="000969.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Avidemux-svn-commit] r3700 - in	branches/avidemux_2.5_branch_gruntster: avidemux	avidemux/ADM_audiocodec avidemux/ADM_audiofilter	avidemux/ADM_codecs avidemux/ADM_encoder	avidemux/ADM_libraries/ADM_lavcodec	avidemux/ADM_libraries/ADM_libwrapper	avidemux/ADM_userInterfaces/ADM_commonUI cmake</H1>
    <B>gruntster at mail.berlios.de</B> 
    <A HREF="mailto:avidemux-svn-commit%40lists.berlios.de?Subject=Re%3A%20%5BAvidemux-svn-commit%5D%20r3700%20-%20in%0A%09branches/avidemux_2.5_branch_gruntster%3A%20avidemux%0A%09avidemux/ADM_audiocodec%20avidemux/ADM_audiofilter%0A%09avidemux/ADM_codecs%20avidemux/ADM_encoder%0A%09avidemux/ADM_libraries/ADM_lavcodec%0A%09avidemux/ADM_libraries/ADM_libwrapper%0A%09avidemux/ADM_userInterfaces/ADM_commonUI%20cmake&In-Reply-To=%3C200711211849.lALIn4PP015284%40sheep.berlios.de%3E"
       TITLE="[Avidemux-svn-commit] r3700 - in	branches/avidemux_2.5_branch_gruntster: avidemux	avidemux/ADM_audiocodec avidemux/ADM_audiofilter	avidemux/ADM_codecs avidemux/ADM_encoder	avidemux/ADM_libraries/ADM_lavcodec	avidemux/ADM_libraries/ADM_libwrapper	avidemux/ADM_userInterfaces/ADM_commonUI cmake">gruntster at mail.berlios.de
       </A><BR>
    <I>Wed Nov 21 19:49:04 CET 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="000967.html">[Avidemux-svn-commit] r3699 -	branches/avidemux_2.4_branch/avidemux/ADM_libraries/ADM_libass
</A></li>
        <LI>Next message: <A HREF="000969.html">[Avidemux-svn-commit] r3701 - in	branches/avidemux_2.5_branch_gruntster: avidemux cmake
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#968">[ date ]</a>
              <a href="thread.html#968">[ thread ]</a>
              <a href="subject.html#968">[ subject ]</a>
              <a href="author.html#968">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: gruntster
Date: 2007-11-21 19:48:31 +0100 (Wed, 21 Nov 2007)
New Revision: 3700

Modified:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiocodec/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiofilter/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_lavcodec/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libwrapper/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/avidemux/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/cmake/admCheckAudioCodecLibs.cmake
   branches/avidemux_2.5_branch_gruntster/cmake/admCheckRequiredLibs.cmake
Log:
[CMake] improve support for headers in non-standard locations

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiocodec/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiocodec/CMakeLists.txt	2007-11-21 18:09:42 UTC (rev 3699)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiocodec/CMakeLists.txt	2007-11-21 18:48:31 UTC (rev 3700)
@@ -5,3 +5,20 @@
 	ADM_audiocodec.cpp  ADM_codecfaad.cpp  ADM_codecmp3.cpp  ADM_codecwav.cpp   ADM_dca.cpp   audiocodec_ogg.cpp)
 
 ADD_ADM_LIB_ALL_TARGETS(ADM_audiocodec ${ADM_audiocodec_SRCS})
+
+IF (USE_AMR_NB)
+	ADD_SOURCE_CFLAGS(ADM_audiocodec.cpp -I${AMRNB_INCLUDE_DIR})
+ENDIF (USE_AMR_NB)
+
+IF (USE_FAAD)
+	ADD_SOURCE_CFLAGS(ADM_codecfaad.cpp -I${FAAD_INCLUDE_DIR})
+ENDIF (USE_FAAD)
+
+IF (USE_LIBDCA)
+	ADD_SOURCE_CFLAGS(ADM_audiocodec.cpp -I${LIBDCA_INCLUDE_DIR})
+	ADD_SOURCE_CFLAGS(ADM_dca.cpp -I${LIBDCA_INCLUDE_DIR})
+ENDIF (USE_LIBDCA)
+
+IF (USE_VORBIS)
+	ADD_SOURCE_CFLAGS(audiocodec_ogg.cpp -I${VORBIS_INCLUDE_DIR})
+ENDIF (USE_VORBIS)
\ No newline at end of file

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiofilter/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiofilter/CMakeLists.txt	2007-11-21 18:09:42 UTC (rev 3699)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiofilter/CMakeLists.txt	2007-11-21 18:48:31 UTC (rev 3700)
@@ -6,3 +6,19 @@
 	audioencoder_lame.cpp       audioeng_buff.cpp          audiofilter_dolby.cpp          audiofilter_sox.cpp)
 	
 ADD_ADM_LIB_ALL_TARGETS(ADM_audiofilter ${ADMaudiofilter_SRCS})
+
+IF (USE_AFTEN)
+	ADD_SOURCE_CFLAGS(audioencoder_aften.cpp -I${AFTEN_INCLUDE_DIR})
+ENDIF (USE_AFTEN)
+
+IF (USE_FAAC)
+	ADD_SOURCE_CFLAGS(audioencoder_faac.cpp -I${FAAC_INCLUDE_DIR})
+ENDIF (USE_FAAC)
+
+IF (HAVE_LIBMP3LAME)
+	ADD_SOURCE_CFLAGS(audioencoder_lame.cpp -I${LAME_INCLUDE_DIR})
+ENDIF (HAVE_LIBMP3LAME)
+
+IF (USE_VORBIS)
+	ADD_SOURCE_CFLAGS(audioencoder_vorbis.cpp -I${VORBIS_INCLUDE_DIR})
+ENDIF (USE_VORBIS)
\ No newline at end of file

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/CMakeLists.txt	2007-11-21 18:09:42 UTC (rev 3699)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/CMakeLists.txt	2007-11-21 18:48:31 UTC (rev 3700)
@@ -3,3 +3,15 @@
 	ADM_ffmp43.cpp  ADM_mjpeg.cpp   ADM_mpeg.cpp         ADM_rgb16.cpp  ADM_uyvy.cpp        ADM_xvid4.cpp  ADM_xvidcvs.cpp)
 
 ADD_ADM_LIB_ALL_TARGETS(ADM_codecs ${ADM_codecs_SRCS})
+
+IF (USE_PNG)
+	 ADD_SOURCE_CFLAGS(ADM_png.cpp ${PNG_CFLAGS})
+ENDIF (USE_PNG)
+
+IF (USE_X264)
+	ADD_SOURCE_CFLAGS(ADM_x264.cpp -I${X264_INCLUDE_DIR})
+ENDIF (USE_X264)
+
+IF (USE_XVID_4)
+	ADD_SOURCE_CFLAGS(ADM_xvid4.cpp -I${XVID_INCLUDE_DIR})
+ENDIF (USE_XVID_4)
\ No newline at end of file

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/CMakeLists.txt	2007-11-21 18:09:42 UTC (rev 3699)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/CMakeLists.txt	2007-11-21 18:48:31 UTC (rev 3700)
@@ -3,3 +3,8 @@
 	adm_encCopy.cpp    adm_encdivx.cpp    adm_encffmpeg.cpp   adm_encmpeg2enc.cpp  adm_encRequant.cpp  adm_encXvid4.cpp  adm_encyv12.cpp)
 
 ADD_ADM_LIB_ALL_TARGETS(ADM_encoder ${ADM_encoder_SRCS})
+
+IF (USE_XVID_4)
+	ADD_SOURCE_CFLAGS(adm_encxvid.cpp -I${XVID_INCLUDE_DIR})
+	ADD_SOURCE_CFLAGS(adm_encXvid4.cpp -I${XVID_INCLUDE_DIR})
+ENDIF (USE_XVID_4)
\ No newline at end of file

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_lavcodec/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_lavcodec/CMakeLists.txt	2007-11-21 18:09:42 UTC (rev 3699)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_lavcodec/CMakeLists.txt	2007-11-21 18:48:31 UTC (rev 3700)
@@ -45,4 +45,8 @@
 
 IF (ADM_DEBUG)
 	ADD_CFLAGS_ALL_TARGETS(${ADM_LIB} &quot;-O2&quot;)
-ENDIF (ADM_DEBUG)
\ No newline at end of file
+ENDIF (ADM_DEBUG)
+
+IF (USE_AMR_NB)
+	ADD_SOURCE_CFLAGS(amr.c -I${AMRNB_INCLUDE_DIR})
+ENDIF (USE_AMR_NB)
\ No newline at end of file

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libwrapper/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libwrapper/CMakeLists.txt	2007-11-21 18:09:42 UTC (rev 3699)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libwrapper/CMakeLists.txt	2007-11-21 18:48:31 UTC (rev 3700)
@@ -3,4 +3,14 @@
 SET(${ADM_LIB}_SRCS 
 	libwrapper_amrnb.cpp  libwrapper.cpp  libwrapper_dca.cpp  libwrapper_global.cpp)
 	
-ADD_ADM_LIB_ALL_TARGETS(${ADM_LIB} ${${ADM_LIB}_SRCS})
\ No newline at end of file
+ADD_ADM_LIB_ALL_TARGETS(${ADM_LIB} ${${ADM_LIB}_SRCS})
+
+IF (USE_AMR_NB)
+	ADD_SOURCE_CFLAGS(libwrapper_amrnb.cpp -I${AMRNB_INCLUDE_DIR})
+	ADD_SOURCE_CFLAGS(libwrapper_global.cpp -I${AMRNB_INCLUDE_DIR})
+ENDIF (USE_AMR_NB)
+
+IF (USE_LIBDCA)
+	ADD_SOURCE_CFLAGS(libwrapper_dca.cpp -I${LIBDCA_INCLUDE_DIR})
+	ADD_SOURCE_CFLAGS(libwrapper_global.cpp -I${LIBDCA_INCLUDE_DIR})
+ENDIF (USE_LIBDCA)
\ No newline at end of file

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/CMakeLists.txt	2007-11-21 18:09:42 UTC (rev 3699)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/CMakeLists.txt	2007-11-21 18:48:31 UTC (rev 3700)
@@ -10,4 +10,12 @@
 
 ADD_ADM_LIB_ALL_TARGETS(${ADM_LIB} ${${ADM_LIB}_SRCS})
 
-SDLify(GUI_sdlRender.cpp)
\ No newline at end of file
+SDLify(GUI_sdlRender.cpp)
+
+IF (USE_AMR_NB)
+	ADD_SOURCE_CFLAGS(DIA_builtin.cpp -I${AMRNB_INCLUDE_DIR})
+ENDIF (USE_AMR_NB)
+
+IF (USE_LIBDCA)
+	ADD_SOURCE_CFLAGS(DIA_builtin.cpp -I${LIBDCA_INCLUDE_DIR})
+ENDIF (USE_LIBDCA)
\ No newline at end of file

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/CMakeLists.txt	2007-11-21 18:09:42 UTC (rev 3699)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/CMakeLists.txt	2007-11-21 18:48:31 UTC (rev 3700)
@@ -60,8 +60,16 @@
 
 SDLify(main.cpp)
 ADD_SOURCE_CFLAGS(main.cpp &quot;-DADM_SUBVERSION=${ADM_SUBVERSION}&quot;)
-ADD_SOURCE_CFLAGS(gtk_gui.cpp &quot;${GLIB_CFLAGS}&quot;)
+ADD_SOURCE_CFLAGS(gtk_gui.cpp ${GLIB_CFLAGS})
 
+IF (USE_AMR_NB)
+	ADD_SOURCE_CFLAGS(main.cpp -I${AMRNB_INCLUDE_DIR})
+ENDIF (USE_AMR_NB)
+
+IF (USE_LIBDCA)
+	ADD_SOURCE_CFLAGS(main.cpp -I${LIBDCA_INCLUDE_DIR})
+ENDIF (USE_LIBDCA)
+
 ########################################
 # Compile and link general subdirs
 ########################################

Modified: branches/avidemux_2.5_branch_gruntster/cmake/admCheckAudioCodecLibs.cmake
===================================================================
--- branches/avidemux_2.5_branch_gruntster/cmake/admCheckAudioCodecLibs.cmake	2007-11-21 18:09:42 UTC (rev 3699)
+++ branches/avidemux_2.5_branch_gruntster/cmake/admCheckAudioCodecLibs.cmake	2007-11-21 18:48:31 UTC (rev 3700)
@@ -18,7 +18,8 @@
 				AFTEN_TEST_COMPILE_RESULT
 				${CMAKE_BINARY_DIR}
 				&quot;${CMAKE_SOURCE_DIR}/cmake_compile_check/aften_check.cpp&quot;
-				CMAKE_FLAGS -DLINK_LIBRARIES=${AFTEN_LIBRARY_DIR})
+				CMAKE_FLAGS &quot;-DLINK_LIBRARIES=${AFTEN_LIBRARY_DIR}&quot;
+				COMPILE_DEFINITIONS &quot;-I${AFTEN_INCLUDE_DIR}&quot;)
 		ENDIF (NOT DEFINED AFTEN_TEST_RUN_RESULT)
 
 		IF (AFTEN_TEST_RUN_RESULT EQUAL 8)

Modified: branches/avidemux_2.5_branch_gruntster/cmake/admCheckRequiredLibs.cmake
===================================================================
--- branches/avidemux_2.5_branch_gruntster/cmake/admCheckRequiredLibs.cmake	2007-11-21 18:09:42 UTC (rev 3699)
+++ branches/avidemux_2.5_branch_gruntster/cmake/admCheckRequiredLibs.cmake	2007-11-21 18:48:31 UTC (rev 3700)
@@ -73,5 +73,10 @@
 FIND_PACKAGE(PNG)
 PRINT_LIBRARY_INFO(&quot;libpng&quot; PNG_FOUND &quot;${PNG_INCLUDE_DIR} ${PNG_DEFINITIONS}&quot; &quot;${PNG_LIBRARIES}&quot; FATAL_ERROR)
 
+FOREACH(_flag ${PNG_INCLUDE_DIR})
+	SET(PNG_CFLAGS ${PNG_CFLAGS} -I${_flag})
+ENDFOREACH(_flag)
+
+SET(PNG_CFLAGS ${PNG_CFLAGS} ${PNG_DEFINITIONS})
 SET(USE_PNG 1)
 MESSAGE(&quot;&quot;)
\ No newline at end of file


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000967.html">[Avidemux-svn-commit] r3699 -	branches/avidemux_2.4_branch/avidemux/ADM_libraries/ADM_libass
</A></li>
	<LI>Next message: <A HREF="000969.html">[Avidemux-svn-commit] r3701 - in	branches/avidemux_2.5_branch_gruntster: avidemux cmake
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#968">[ date ]</a>
              <a href="thread.html#968">[ thread ]</a>
              <a href="subject.html#968">[ subject ]</a>
              <a href="author.html#968">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">More information about the Avidemux-svn-commit
mailing list</a><br>
</body></html>
