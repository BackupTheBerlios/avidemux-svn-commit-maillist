<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Avidemux-svn-commit] r3633 - in	branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4:	. ADM_dialog ADM_dialogFactory
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/avidemux-svn-commit/2007-October/index.html" >
   <LINK REL="made" HREF="mailto:avidemux-svn-commit%40lists.berlios.de?Subject=Re%3A%20%5BAvidemux-svn-commit%5D%20r3633%20-%20in%0A%09branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4%3A%0A%09.%20ADM_dialog%20ADM_dialogFactory&In-Reply-To=%3C200710081348.l98Dml4m017030%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000904.html">
   <LINK REL="Next"  HREF="000907.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Avidemux-svn-commit] r3633 - in	branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4:	. ADM_dialog ADM_dialogFactory</H1>
    <B>gruntster at mail.berlios.de</B> 
    <A HREF="mailto:avidemux-svn-commit%40lists.berlios.de?Subject=Re%3A%20%5BAvidemux-svn-commit%5D%20r3633%20-%20in%0A%09branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4%3A%0A%09.%20ADM_dialog%20ADM_dialogFactory&In-Reply-To=%3C200710081348.l98Dml4m017030%40sheep.berlios.de%3E"
       TITLE="[Avidemux-svn-commit] r3633 - in	branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4:	. ADM_dialog ADM_dialogFactory">gruntster at mail.berlios.de
       </A><BR>
    <I>Mon Oct  8 15:48:47 CEST 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="000904.html">[Avidemux-svn-commit] r3632 - branches/avidemux_2.4_branch
</A></li>
        <LI>Next message: <A HREF="000907.html">[Avidemux-svn-commit] r3634 - in branches/avidemux_2.4_branch: .	avidemux cmake po
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#906">[ date ]</a>
              <a href="thread.html#906">[ thread ]</a>
              <a href="subject.html#906">[ subject ]</a>
              <a href="author.html#906">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: gruntster
Date: 2007-10-08 15:48:24 +0200 (Mon, 08 Oct 2007)
New Revision: 3633

Modified:
   branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_srt.cpp
   branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_x264.cpp
   branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_xvid4.cpp
   branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_encoding.cpp
   branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/T_index_pg.cpp
   branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/alert_qt4.cpp
   branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/FAC_bar.cpp
   branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/FAC_float.cpp
   branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/FAC_frame.cpp
   branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/FAC_integer.cpp
   branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/FAC_matrix.cpp
   branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/FAC_notch.cpp
   branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/FAC_readOnlyText.cpp
   branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_bitrate.cpp
   branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_button.cpp
   branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_dialogFactory.cpp
   branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_filesel.cpp
   branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_menu.cpp
   branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_slider.cpp
   branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_threadCount.cpp
   branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ui_support.cpp
Log:
[I18N] make various strings translatable for Qt4 + utf8 fixes

Modified: branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_srt.cpp
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_srt.cpp	2007-10-07 18:15:40 UTC (rev 3632)
+++ branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_srt.cpp	2007-10-08 13:48:24 UTC (rev 3633)
@@ -51,7 +51,7 @@
            diaElemBitrate bitrate(config,NULL);
            bitrate.setMaxQz(51);
            diaElem *main[]={&amp;bitrate};
-           diaElemTabs tabMain(&quot;Main&quot;,1,main);
+           diaElemTabs tabMain(QT_TR_NOOP(&quot;Main&quot;),1,main);
 
            
         /* Tab 2 Motion */
@@ -98,7 +98,7 @@
          frameMe.swallow(&amp;interlaced);
          
            diaElem *motions[]={&amp;frameMe};
-          diaElemTabs tabMotion(&quot;Motion&quot;,1,motions);
+          diaElemTabs tabMotion(QT_TR_NOOP(&quot;Motion&quot;),1,motions);
          
          
         /* Tab3-Misc  */

Modified: branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_x264.cpp
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_x264.cpp	2007-10-07 18:15:40 UTC (rev 3632)
+++ branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_x264.cpp	2007-10-08 13:48:24 UTC (rev 3633)
@@ -48,7 +48,7 @@
            diaElemBitrate bitrate(config,NULL);
            bitrate.setMaxQz(51);
            diaElem *main[]={&amp;bitrate};
-           diaElemTabs tabMain(&quot;Main&quot;,1,main);
+           diaElemTabs tabMain(QT_TR_NOOP(&quot;Main&quot;),1,main);
 
            
         /* Tab 2 Motion */
@@ -95,7 +95,7 @@
          frameMe.swallow(&amp;interlaced);
          
            diaElem *motions[]={&amp;frameMe};
-          diaElemTabs tabMotion(&quot;Motion&quot;,1,motions);
+          diaElemTabs tabMotion(QT_TR_NOOP(&quot;Motion&quot;),1,motions);
          
          
         /* Tab3-Misc  */
@@ -123,7 +123,7 @@
           frameMisc.swallow(&amp;deblockThreshold);
             
            diaElem *misc[]={&amp;frameMisc};
-          diaElemTabs tabMisc(&quot;Misc&quot;,1,misc);
+          diaElemTabs tabMisc(QT_TR_NOOP(&quot;Misc&quot;),1,misc);
         /* Tab 4 Partition &amp; frame*/
          
              diaElemToggle    _8x8(PX(_8x8),QT_TR_NOOP(&quot;8x8 Transform&quot;));

Modified: branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_xvid4.cpp
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_xvid4.cpp	2007-10-07 18:15:40 UTC (rev 3632)
+++ branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_xvid4.cpp	2007-10-08 13:48:24 UTC (rev 3633)
@@ -45,13 +45,13 @@
          /* Tab 1 main */
            diaElemBitrate bitrate(incoming,NULL);
 #define MKTOGGLE(y,x)           diaElemToggle  t_##x(PX(x),#y)
-        MKTOGGLE(Interlaced,	    interlaced);
-        MKTOGGLE(Cartoon Mode,      cartoon);
-        MKTOGGLE(Greyscale,         greyscale);
-        MKTOGGLE(Cartoon Mode,      turbo);
-        MKTOGGLE(Greyscale,         chroma_opt);
+        MKTOGGLE(QT_TR_NOOP(&quot;Interlaced&quot;),	    interlaced);
+        MKTOGGLE(QT_TR_NOOP(&quot;Cartoon Mode&quot;),      cartoon);
+        MKTOGGLE(QT_TR_NOOP(&quot;Greyscale&quot;),         greyscale);
+        MKTOGGLE(QT_TR_NOOP(&quot;Cartoon Mode&quot;),      turbo);
+        MKTOGGLE(QT_TR_NOOP(&quot;Greyscale&quot;),         chroma_opt);
         diaElem *main[]={&amp;bitrate,&amp;t_interlaced,&amp;t_cartoon,&amp;t_greyscale,&amp;t_turbo,&amp;t_chroma_opt};
-        diaElemTabs tabMain(&quot;Main&quot;,6,main);
+        diaElemTabs tabMain(QT_TR_NOOP(&quot;Main&quot;),6,main);
          /* Tab 2 motion */
          diaMenuEntry motionMenu[] = {
                              {0,       QT_TR_NOOP(&quot;None&quot;),NULL}
@@ -100,7 +100,7 @@
               frameGop.swallow(&amp;max_key_interval);
             
            diaElem *motions[]={&amp;motion,&amp;vhq,&amp;frameMore,&amp;frameGop,&amp;frameASP};
-          diaElemTabs tabMotion(&quot;Motion&quot;,5,motions);
+          diaElemTabs tabMotion(QT_TR_NOOP(&quot;Motion&quot;),5,motions);
         /* Tab 3 Qz*/
           diaMenuEntry qzMenu[] = {
                              {0,       QT_TR_NOOP(&quot;H263&quot;),NULL}
@@ -132,7 +132,7 @@
         MKENTRY(Overflow Control Strength,overflow_control_strength	);
                 
          diaElem *twopass[]={&amp;frameOne,&amp;frameTwo};
-          diaElemTabs tabPass(&quot;Two Pass&quot;,2,twopass);
+          diaElemTabs tabPass(QT_TR_NOOP(&quot;Two Pass&quot;),2,twopass);
         /**/
         
         

Modified: branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_encoding.cpp
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_encoding.cpp	2007-10-07 18:15:40 UTC (rev 3632)
+++ branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_encoding.cpp	2007-10-08 13:48:24 UTC (rev 3633)
@@ -463,8 +463,8 @@
 
         if(stopReq)
         {
-          if(GUI_Alternate(&quot;The encoding is paused. Do you want to resume or abort ?&quot;,
-                              &quot;Resume&quot;,&quot;Abort&quot;))
+          if(GUI_Alternate((char*)QT_TR_NOOP(&quot;The encoding is paused. Do you want to resume or abort?&quot;),
+                              (char*)QT_TR_NOOP(&quot;Resume&quot;),(char*)QT_TR_NOOP(&quot;Abort&quot;)))
                  {
                          stopReq=0;
                  }

Modified: branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/T_index_pg.cpp
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/T_index_pg.cpp	2007-10-07 18:15:40 UTC (rev 3632)
+++ branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/T_index_pg.cpp	2007-10-08 13:48:24 UTC (rev 3633)
@@ -235,13 +235,13 @@
 }
 void Ui_indexingDialog::setImage(const char *f)
 {
-    dialog-&gt;ui.labelImages-&gt;setText(f);
+	dialog-&gt;ui.labelImages-&gt;setText(QString::fromUtf8(f));
 }
 
 void Ui_indexingDialog::setETA(const char *f)
 {
    // printf(&quot;Eta:%s\n&quot;,f);
-  dialog-&gt;ui.labelTimeLeft-&gt;setText(f);
+  dialog-&gt;ui.labelTimeLeft-&gt;setText(QString::fromUtf8(f));
 }
 void Ui_indexingDialog::setPercent(float f)
 {

Modified: branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/alert_qt4.cpp
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/alert_qt4.cpp	2007-10-07 18:15:40 UTC (rev 3632)
+++ branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/alert_qt4.cpp	2007-10-08 13:48:24 UTC (rev 3633)
@@ -26,16 +26,16 @@
 void            GUI_Alert(const char *alertstring)
 {
     QMessageBox::StandardButton reply;
-              reply = QMessageBox::critical(QuiMainWindows, &quot;Alert&quot;,
-                                        alertstring,
+              reply = QMessageBox::critical(QuiMainWindows, QString::fromUtf8(QT_TR_NOOP(&quot;Alert&quot;)),
+                                        QString::fromUtf8(alertstring),
                                         QMessageBox::Ok );
 }
 //****************************************************************************************************
 void            GUI_Info(const char *alertstring)
 {
     QMessageBox::StandardButton reply;
-              reply = QMessageBox::information(QuiMainWindows, &quot;Info&quot;,
-                                        alertstring,
+              reply = QMessageBox::information(QuiMainWindows, QString::fromUtf8(QT_TR_NOOP(&quot;Info&quot;)),
+                                        QString::fromUtf8(alertstring),
                                         QMessageBox::Ok );
 }
 
@@ -67,8 +67,8 @@
             va_end(ap);
          }
         QMessageBox::StandardButton reply;
-          reply = QMessageBox::information(QuiMainWindows, &quot;Info&quot;,
-                                    alertstring,
+          reply = QMessageBox::information(QuiMainWindows, QString::fromUtf8(QT_TR_NOOP(&quot;Info&quot;)),
+                                    QString::fromUtf8(alertstring),
                                     QMessageBox::Ok );
 
 }
@@ -100,8 +100,8 @@
             va_end(ap);
          }
           QMessageBox::StandardButton reply;
-          reply = QMessageBox::critical(QuiMainWindows, &quot;Info&quot;,
-                                    alertstring,
+          reply = QMessageBox::critical(QuiMainWindows, QString::fromUtf8(QT_TR_NOOP(&quot;Info&quot;)),
+                                    QString::fromUtf8(alertstring),
                                     QMessageBox::Ok );
 }
 //****************************************************************************************************
@@ -129,8 +129,8 @@
               va_end(ap);
         }
           QMessageBox::StandardButton reply;
-          reply = QMessageBox::question(QuiMainWindows, &quot;Confirmation&quot;,
-                                    alertstring,
+          reply = QMessageBox::question(QuiMainWindows, QString::fromUtf8(QT_TR_NOOP(&quot;Confirmation&quot;)),
+                                    QString::fromUtf8(alertstring),
                                     QMessageBox::Yes | QMessageBox::No );
           if(reply==QMessageBox::Yes) return 1;
         return 0; 
@@ -160,8 +160,8 @@
               va_end(ap);
         }
           QMessageBox::StandardButton reply;
-          reply = QMessageBox::question(QuiMainWindows, &quot;Confirmation&quot;,
-                                    alertstring,
+          reply = QMessageBox::question(QuiMainWindows, QString::fromUtf8(QT_TR_NOOP(&quot;Confirmation&quot;)),
+                                    QString::fromUtf8(alertstring),
                                     QMessageBox::Yes | QMessageBox::No );
           if(reply==QMessageBox::Yes) return 1;
         return 0; 
@@ -175,8 +175,8 @@
                       printf(&quot;Question: %s\n&quot;, alertstring);
                       return 0;
               }
-          reply = QMessageBox::question(QuiMainWindows, &quot;Question&quot;,
-                                    alertstring,
+          reply = QMessageBox::question(QuiMainWindows, QString::fromUtf8(QT_TR_NOOP(&quot;Question&quot;)),
+                                    QString::fromUtf8(alertstring),
                                     QMessageBox::Yes | QMessageBox::No );
           if(reply==QMessageBox::Yes) return 1;
           return 0;
@@ -199,7 +199,7 @@
 char alertstring[1024];
 
         box=new QMessageBox(QuiMainWindows);
-        box-&gt;setWindowTitle(&quot;Question ?&quot;);
+        box-&gt;setWindowTitle(QString::fromUtf8(QT_TR_NOOP(&quot;Question ?&quot;)));
         box-&gt;addButton(choice1,QMessageBox::YesRole);
         box-&gt;addButton(choice2,QMessageBox::NoRole);
          if (title)
@@ -207,9 +207,9 @@
               snprintf(alertstring,1024,&quot;%s&quot;,title);
         }else
         {
-            snprintf(alertstring,1024,&quot;Question&quot;);
+            snprintf(alertstring,1024,QT_TR_NOOP(&quot;Question&quot;));
         }
-        box-&gt;setText(alertstring);
+        box-&gt;setText(QString::fromUtf8(alertstring));
         box-&gt;setIcon(QMessageBox::Question);
         reply = box-&gt;exec();
         delete box;

Modified: branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/FAC_bar.cpp
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/FAC_bar.cpp	2007-10-07 18:15:40 UTC (rev 3632)
+++ branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/FAC_bar.cpp	2007-10-08 13:48:24 UTC (rev 3633)
@@ -59,7 +59,7 @@
   box-&gt;setValue(per);
   box-&gt;show();
  
- QLabel *text=new QLabel( this-&gt;paramTitle,(QWidget *)dialog);
+ QLabel *text=new QLabel(QString::fromUtf8(this-&gt;paramTitle),(QWidget *)dialog);
  text-&gt;setBuddy(box);
  layout-&gt;addWidget(text,line,0);
  layout-&gt;addWidget(box,line,1);

Modified: branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/FAC_float.cpp
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/FAC_float.cpp	2007-10-07 18:15:40 UTC (rev 3632)
+++ branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/FAC_float.cpp	2007-10-08 13:48:24 UTC (rev 3633)
@@ -61,7 +61,7 @@
  
  box-&gt;show();
  
- QLabel *text=new QLabel( this-&gt;paramTitle,(QWidget *)dialog);
+ QLabel *text=new QLabel( QString::fromUtf8(this-&gt;paramTitle),(QWidget *)dialog);
  text-&gt;setBuddy(box);
  layout-&gt;addWidget(text,line,0);
  layout-&gt;addWidget(box,line,1);

Modified: branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/FAC_frame.cpp
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/FAC_frame.cpp	2007-10-07 18:15:40 UTC (rev 3632)
+++ branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/FAC_frame.cpp	2007-10-08 13:48:24 UTC (rev 3633)
@@ -66,7 +66,7 @@
    myWidget=(void *)layout2; 
 
     QLabel *text=new QLabel( (QWidget *)dialog);
-    QString string(paramTitle);
+    QString string = QString::fromUtf8(paramTitle);
     
     string=&quot;&lt;b&gt;&quot;+string+&quot;&lt;/b&gt;&quot;;
     text-&gt;setText(string);

Modified: branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/FAC_integer.cpp
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/FAC_integer.cpp	2007-10-07 18:15:40 UTC (rev 3632)
+++ branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/FAC_integer.cpp	2007-10-08 13:48:24 UTC (rev 3633)
@@ -64,7 +64,7 @@
  
  box-&gt;show();
  
- QLabel *text=new QLabel( this-&gt;paramTitle,(QWidget *)dialog);
+ QLabel *text=new QLabel( QString::fromUtf8(this-&gt;paramTitle),(QWidget *)dialog);
  text-&gt;setBuddy(box);
  layout-&gt;addWidget(text,line,0);
  layout-&gt;addWidget(box,line,1);
@@ -118,7 +118,7 @@
  
  box-&gt;show();
  
- QLabel *text=new QLabel( this-&gt;paramTitle,(QWidget *)dialog);
+ QLabel *text=new QLabel( QString::fromUtf8(this-&gt;paramTitle),(QWidget *)dialog);
  text-&gt;setBuddy(box);
  layout-&gt;addWidget(text,line,0);
  layout-&gt;addWidget(box,line,1);

Modified: branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/FAC_matrix.cpp
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/FAC_matrix.cpp	2007-10-07 18:15:40 UTC (rev 3632)
+++ branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/FAC_matrix.cpp	2007-10-08 13:48:24 UTC (rev 3633)
@@ -72,7 +72,7 @@
 	  
 	  
 	 
-	 QLabel *text=new QLabel( this-&gt;paramTitle,(QWidget *)dialog);
+	 QLabel *text=new QLabel( QString::fromUtf8(this-&gt;paramTitle),(QWidget *)dialog);
 	 layout-&gt;addWidget(text,line,0);
 	 
 	 QGridLayout *layout2=new QGridLayout((QWidget *)dialog);

Modified: branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/FAC_notch.cpp
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/FAC_notch.cpp	2007-10-07 18:15:40 UTC (rev 3632)
+++ branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/FAC_notch.cpp	2007-10-08 13:48:24 UTC (rev 3633)
@@ -46,7 +46,7 @@
 }
 void diaElemNotch::setMe(void *dialog, void *opaque,uint32_t line)
 {
-  QCheckBox *box=new QCheckBox(paramTitle,(QWidget *)dialog);
+  QCheckBox *box=new QCheckBox(QString::fromUtf8(paramTitle),(QWidget *)dialog);
  QGridLayout *layout=(QGridLayout*) opaque;
  myWidget=(void *)box; 
  if( yesno)

Modified: branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/FAC_readOnlyText.cpp
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/FAC_readOnlyText.cpp	2007-10-07 18:15:40 UTC (rev 3632)
+++ branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/FAC_readOnlyText.cpp	2007-10-08 13:48:24 UTC (rev 3633)
@@ -58,8 +58,8 @@
 
    
  
- QLabel *text=new QLabel( this-&gt;paramTitle,(QWidget *)dialog);
-  QLabel *text2=new QLabel( (char *)param,(QWidget *)dialog);
+ QLabel *text=new QLabel( QString::fromUtf8(this-&gt;paramTitle),(QWidget *)dialog);
+  QLabel *text2=new QLabel( QString::fromUtf8((char *)param),(QWidget *)dialog);
  text-&gt;setBuddy(text2);
  layout-&gt;addWidget(text,line,0);
  layout-&gt;addWidget(text2,line,1);
@@ -92,8 +92,8 @@
 
  QGridLayout *layout=(QGridLayout*) opaque;
  
- QLabel *text=new QLabel( this-&gt;paramTitle,(QWidget *)dialog);
- QLineEdit *lineEdit = new QLineEdit( *(char **)param);
+ QLabel *text=new QLabel( QString::fromUtf8(this-&gt;paramTitle),(QWidget *)dialog);
+ QLineEdit *lineEdit = new QLineEdit( QString::fromUtf8(*(char **)param));
  
  text-&gt;setBuddy(lineEdit);
  layout-&gt;addWidget(text,line,0);

Modified: branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_bitrate.cpp
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_bitrate.cpp	2007-10-07 18:15:40 UTC (rev 3632)
+++ branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_bitrate.cpp	2007-10-08 13:48:24 UTC (rev 3633)
@@ -58,27 +58,27 @@
            
            maxQ=mq;
            int index=0,set=-1;
-#define add(x,z,y) if(compress-&gt;capabilities &amp; ADM_ENC_CAP_##x) {combo-&gt;addItem(QT_TR_NOOP(#y));\
+#define add(x,z,y) if(compress-&gt;capabilities &amp; ADM_ENC_CAP_##x) {combo-&gt;addItem(QString::fromUtf8(#y));\
 						if(p-&gt;mode==COMPRESS_##z) set=index;\
 						index++;}
   
-  add(CBR,CBR,Constant Bitrate);
-  add(CQ,CQ,Constant Quality);
-  add(SAME,SAME,Same Quantizer as input);
-  add(AQ,AQ,Average Quantizer);
-  add(2PASS,2PASS,Two pass-filesize);
-  add(2PASS_BR,2PASS_BITRATE,Two pass-Avg bitrate);
+  add(CBR,CBR,QT_TR_NOOP(&quot;Constant Bitrate&quot;));
+  add(CQ,CQ,QT_TR_NOOP(&quot;Constant Quality&quot;));
+  add(SAME,SAME,QT_TR_NOOP(&quot;Same Quantizer as input&quot;));
+  add(AQ,AQ,QT_TR_NOOP(&quot;Average Quantizer&quot;));
+  add(2PASS,2PASS,QT_TR_NOOP(&quot;Two pass-filesize&quot;));
+  add(2PASS_BR,2PASS_BITRATE,QT_TR_NOOP(&quot;Two pass-Avg bitrate&quot;));
   
            combo-&gt;show();
            
-           text1=new QLabel( &quot;Encoding mode&quot;,z);
+           text1=new QLabel( QString::fromUtf8(QT_TR_NOOP(&quot;Encoding mode&quot;)),z);
           text1-&gt;setBuddy(combo);
           text1-&gt;show();
           
            box=new QSpinBox(z);
            box-&gt;show();
            
-           text2=new QLabel( &quot;Bitrate&quot;,z);
+           text2=new QLabel( QString::fromUtf8(QT_TR_NOOP(&quot;Bitrate&quot;)),z);
            text2-&gt;setBuddy(combo);
           
           
@@ -150,38 +150,38 @@
 void ADM_Qbitrate::comboChanged(int i)
 {
   printf(&quot;Changed\n&quot;); 
- #define P(x) text2-&gt;setText(QT_TR_NOOP(#x))
+#define P(x) text2-&gt;setText(QString::fromUtf8(#x))
 #define M(x,y) box-&gt;setMinimum  (x);box-&gt;setMaximum  (y);
 #define S(x)   box-&gt;setValue(x);
   COMPRESSION_MODE mode=readPulldown(compress,i);
     switch(mode)
   {
     case COMPRESS_CBR: //CBR
-          P(Bitrate (kb/s));
+          P(QT_TR_NOOP(&quot;Bitrate (kb/s)&quot;));
           M(0,20000);
           S(compress-&gt;bitrate);
           break; 
     case COMPRESS_<A HREF="CQ://">CQ://</A> CQ
-          P(Quantizer);
+          P(QT_TR_NOOP(&quot;Quantizer&quot;));
           M(2,maxQ);
           S(compress-&gt;qz);
           break;
     case COMPRESS_2PASS : // 2pass Filesize
-          P(FileSize (MB));
+          P(QT_TR_NOOP(&quot;FileSize (MB)&quot;));
           M(1,8000);
           S(compress-&gt;finalsize);
           break;
     case COMPRESS_2PASS_BITRATE : // 2pass Avg
-          P(Average Br (kb/s));
+          P(QT_TR_NOOP(&quot;Average Br (kb/s)&quot;));
           M(0,20000);
           S(compress-&gt;avg_bitrate);
           break;
     case COMPRESS_SAME : // Same Qz as input
-          P(-);
+          P(QT_TR_NOOP(&quot;-&quot;));
           M(0,0);
           break;
     case COMPRESS_AQ : // AQ
-          P(Quantizer);
+          P(QT_TR_NOOP(&quot;Quantizer&quot;));
           M(2,maxQ);
           S(compress-&gt;qz);
           break;

Modified: branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_button.cpp
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_button.cpp	2007-10-07 18:15:40 UTC (rev 3632)
+++ branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_button.cpp	2007-10-08 13:48:24 UTC (rev 3633)
@@ -54,7 +54,7 @@
           
            _cb=cb;
            _cookie=cookie;
-           button=new QPushButton(blah,z);
+           button=new QPushButton(QString::fromUtf8(blah),z);
            button-&gt;show();
            layout-&gt;addWidget(button,line,0);
            QObject::connect(button, SIGNAL(clicked(bool)), this, SLOT(clicked(bool )));

Modified: branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_dialogFactory.cpp
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_dialogFactory.cpp	2007-10-07 18:15:40 UTC (rev 3632)
+++ branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_dialogFactory.cpp	2007-10-08 13:48:24 UTC (rev 3633)
@@ -65,7 +65,7 @@
   ADM_assert(nb);
   ADM_assert(elems);
   
-  dialog.setWindowTitle(title);
+  dialog.setWindowTitle(QString::fromUtf8(title));
   
   QGridLayout layout(&amp;dialog);
   
@@ -133,7 +133,7 @@
   ADM_assert(nb);
   ADM_assert(tabs);
   
-  dialog.setWindowTitle(title);
+  dialog.setWindowTitle(QString::fromUtf8(title));
   
   QGridLayout layout(&amp;dialog);
 
@@ -199,7 +199,7 @@
     
   }
   
-  wtab-&gt;addTab(wid,tab-&gt;title);
+  wtab-&gt;addTab(wid,QString::fromUtf8(tab-&gt;title));
   for(int i=0;i&lt;tab-&gt;nbElems;i++)
   {
     tab-&gt;dias[i]-&gt;finalize(); 

Modified: branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_filesel.cpp
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_filesel.cpp	2007-10-07 18:15:40 UTC (rev 3632)
+++ branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_filesel.cpp	2007-10-08 13:48:24 UTC (rev 3633)
@@ -119,7 +119,7 @@
           button=new QDialogButtonBox(QDialogButtonBox::Open,Qt::Horizontal,z);
           button-&gt;show();
 
-          text=new QLabel( title,z);
+		  text=new QLabel(QString::fromUtf8(title),z);
           text-&gt;setBuddy(edit);
           layout-&gt;addWidget(text,line,0);
           layout-&gt;addWidget(edit,line,1);

Modified: branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_menu.cpp
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_menu.cpp	2007-10-07 18:15:40 UTC (rev 3632)
+++ branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_menu.cpp	2007-10-08 13:48:24 UTC (rev 3633)
@@ -149,14 +149,14 @@
   QGridLayout *layout=(QGridLayout*) opaque;
      myWidget=(void *)combo; 
 
-  QLabel *text=new QLabel( this-&gt;paramTitle,(QWidget *)dialog);
+	 QLabel *text=new QLabel( QString::fromUtf8(this-&gt;paramTitle),(QWidget *)dialog);
   
   // Fill in combobox
   int mem=0;
   diaMenuEntryDynamic **entries=menu;
   for(int i=0;i&lt;nbMenu;i++)
   {
-    combo-&gt;addItem(entries[i]-&gt;text);
+    combo-&gt;addItem(QString::fromUtf8(entries[i]-&gt;text));
     if( *(uint32_t *)param==entries[i]-&gt;val) mem=i;
   }
    combo-&gt;setCurrentIndex(mem);

Modified: branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_slider.cpp
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_slider.cpp	2007-10-07 18:15:40 UTC (rev 3632)
+++ branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_slider.cpp	2007-10-08 13:48:24 UTC (rev 3633)
@@ -126,7 +126,7 @@
  
   myWidget = (void *)slider;
 
-  QLabel *text = new QLabel (paramTitle, (QWidget *)dialog);
+  QLabel *text = new QLabel (QString::fromUtf8(paramTitle), (QWidget *)dialog);
   text-&gt;setBuddy (slider);
 
   QGridLayout *layout = (QGridLayout*) opaque;

Modified: branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_threadCount.cpp
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_threadCount.cpp	2007-10-07 18:15:40 UTC (rev 3632)
+++ branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_threadCount.cpp	2007-10-08 13:48:24 UTC (rev 3633)
@@ -50,9 +50,9 @@
 
 	ADM_QthreadCount(QWidget *widget, const char *title, uint32_t value, QGridLayout *layout, int line) : QWidget(widget) 
 	{
-		radiobutton1 = new QRadioButton(&quot;Disabled&quot;, widget);
-		radiobutton2 = new QRadioButton(&quot;Auto-detect&quot;, widget);
-		radiobutton3 = new QRadioButton(&quot;Custom&quot;, widget);
+		radiobutton1 = new QRadioButton(QString::fromUtf8(QT_TR_NOOP(&quot;Disabled&quot;)), widget);
+		radiobutton2 = new QRadioButton(QString::fromUtf8(QT_TR_NOOP(&quot;Auto-detect&quot;)), widget);
+		radiobutton3 = new QRadioButton(QString::fromUtf8(QT_TR_NOOP(&quot;Custom&quot;)), widget);
 
 		buttonGroup = new QButtonGroup;
 		buttonGroup-&gt;addButton(radiobutton1);
@@ -62,7 +62,7 @@
 		spinBox = new QSpinBox();
 		spinBox-&gt;setRange(2, 32);
 
-		text = new QLabel(title, widget);
+		text = new QLabel(QString::fromUtf8(title), widget);
 		text-&gt;setBuddy(radiobutton1);
 
 		layout-&gt;addWidget(text, line, 0);
@@ -122,10 +122,10 @@
 
 void diaElemThreadCount::setMe(void *dialog, void *opaque, uint32_t line)
 {
-	QGridLayout *layout = (QGridLayout*)opaque;
-
-	ADM_QthreadCount *threadCount = new ADM_QthreadCount((QWidget*)dialog, paramTitle, *(uint32_t *)param, layout, line);
-
+	QGridLayout *layout = (QGridLayout*)opaque;
+
+	ADM_QthreadCount *threadCount = new ADM_QthreadCount((QWidget*)dialog, paramTitle, *(uint32_t *)param, layout, line);
+
 	myWidget = (void*)threadCount;
 }
 

Modified: branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ui_support.cpp
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ui_support.cpp	2007-10-07 18:15:40 UTC (rev 3632)
+++ branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ui_support.cpp	2007-10-08 13:48:24 UTC (rev 3633)
@@ -12,7 +12,7 @@
 
 static void loadTranslation(QTranslator *qTranslator, QString translation)
 {
-	printf(&quot;[Locale] Loading language file %s &quot;, translation.toAscii().data());	
+	printf(&quot;[Locale] Loading language file %s &quot;, translation.toUtf8().constData());	
 
 	if (qTranslator-&gt;load(translation))
 	{
@@ -31,7 +31,7 @@
 const char* translate(const char *__domainname, const char *__msgid)
 {
 	static int counter = 0;
-	QString messageString = QApplication::translate(__domainname,  __msgid);
+	QString messageString = QApplication::translate(&quot;&quot;,  __msgid);
 
 	counter++;
 
@@ -42,19 +42,21 @@
 		delete[] translatedMessage[counter];
 
 	translatedMessage[counter] = new char[messageString.toUtf8().length() + 1];
-	strcpy(translatedMessage[counter], messageString.toUtf8().data());
+	strcpy(translatedMessage[counter], messageString.toUtf8().constData());
 
 	return translatedMessage[counter];
 }
 
 void loadTranslator(void)
 {
-	printf(&quot;\n[Locale] Locale: %s\n&quot;, QLocale::system().name().toAscii().data());
+	printf(&quot;\n[Locale] Locale: %s\n&quot;, QLocale::system().name().toUtf8().constData());
 
-	loadTranslation(&amp;qtTranslator, &quot;qt_&quot; + QLocale::system().name());
-	loadTranslation(&amp;avidemuxTranslator, &quot;avidemux_&quot; + QLocale::system().name());
+	QString appdir = QCoreApplication::applicationDirPath() + &quot;/i18n/&quot;;
+
+	loadTranslation(&amp;qtTranslator, appdir + &quot;qt_&quot; + QLocale::system().name());
+	loadTranslation(&amp;avidemuxTranslator, appdir + &quot;avidemux_&quot; + QLocale::system().name());
 	
-	printf(&quot;[Locale] Test: &amp;File -&gt; %s\n\n&quot;, translate(&quot;MainWindow&quot;, &quot;&amp;File&quot;));
+	printf(&quot;[Locale] Test: &amp;File -&gt; %s\n\n&quot;, QApplication::translate(&quot;MainWindow&quot;, &quot;&amp;Edit&quot;).toUtf8().data());
 }
 
 void destroyTranslator(void)


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000904.html">[Avidemux-svn-commit] r3632 - branches/avidemux_2.4_branch
</A></li>
	<LI>Next message: <A HREF="000907.html">[Avidemux-svn-commit] r3634 - in branches/avidemux_2.4_branch: .	avidemux cmake po
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#906">[ date ]</a>
              <a href="thread.html#906">[ thread ]</a>
              <a href="subject.html#906">[ subject ]</a>
              <a href="author.html#906">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">More information about the Avidemux-svn-commit
mailing list</a><br>
</body></html>
