<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Avidemux-svn-commit] r7707 - in	branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6:	. asharp asharp/gtk asharp/qt4
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/avidemux-svn-commit/2011-December/index.html" >
   <LINK REL="made" HREF="mailto:avidemux-svn-commit%40lists.berlios.de?Subject=Re%3A%20%5BAvidemux-svn-commit%5D%20r7707%20-%20in%0A%09branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6%3A%0A%09.%20asharp%20asharp/gtk%20asharp/qt4&In-Reply-To=%3C20111221093013.AD393481510%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="004848.html">
   <LINK REL="Next"  HREF="004850.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Avidemux-svn-commit] r7707 - in	branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6:	. asharp asharp/gtk asharp/qt4</H1>
    <B>mean at mail.berlios.de</B> 
    <A HREF="mailto:avidemux-svn-commit%40lists.berlios.de?Subject=Re%3A%20%5BAvidemux-svn-commit%5D%20r7707%20-%20in%0A%09branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6%3A%0A%09.%20asharp%20asharp/gtk%20asharp/qt4&In-Reply-To=%3C20111221093013.AD393481510%40sheep.berlios.de%3E"
       TITLE="[Avidemux-svn-commit] r7707 - in	branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6:	. asharp asharp/gtk asharp/qt4">mean at mail.berlios.de
       </A><BR>
    <I>Wed Dec 21 10:30:13 CET 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="004848.html">[Avidemux-svn-commit] r7706 -	branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor
</A></li>
        <LI>Next message: <A HREF="004850.html">[Avidemux-svn-commit] r7708 -	branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/asharp
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4849">[ date ]</a>
              <a href="thread.html#4849">[ thread ]</a>
              <a href="subject.html#4849">[ subject ]</a>
              <a href="author.html#4849">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: mean
Date: 2011-12-21 10:30:13 +0100 (Wed, 21 Dec 2011)
New Revision: 7707

Added:
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/asharp/
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/asharp/ADM_vidAsharp.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/asharp/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/asharp/DIA_flyAsharp.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/asharp/DIA_flyAsharp.h
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/asharp/asharp.conf
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/asharp/asharp.h
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/asharp/asharp_desc.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/asharp/asharp_json.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/asharp/gtk/
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/asharp/gtk/DIA_asharp.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/asharp/qt4/
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/asharp/qt4/Q_asharp.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/asharp/qt4/Q_asharp.h
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/asharp/qt4/asharp.ui
Modified:
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/CMakeLists.txt
Log:
[asharp] Skeleton for asharp working with avidemux 2.6

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/CMakeLists.txt	2011-12-21 09:30:11 UTC (rev 7706)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/CMakeLists.txt	2011-12-21 09:30:13 UTC (rev 7707)
@@ -1,4 +1,5 @@
 ADD_SUBDIRECTORY(addBorder)
+ADD_SUBDIRECTORY(asharp)
 ADD_SUBDIRECTORY(ass)
 ADD_SUBDIRECTORY(blackenBorder)
 ADD_SUBDIRECTORY(changeFps)

Added: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/asharp/ADM_vidAsharp.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/asharp/ADM_vidAsharp.cpp	                        (rev 0)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/asharp/ADM_vidAsharp.cpp	2011-12-21 09:30:13 UTC (rev 7707)
@@ -0,0 +1,283 @@
+/**/
+/***************************************************************************
+                          ADM_vidASharp  -  description
+                             -------------------   
+    Port of avisynth one
+
+ ***************************************************************************/
+/*
+        
+        Copyright (C) 2003 Donald A. Graft
+        Copyright (C) 2002 Marc Fauconneau
+        This program is free software; you can redistribute it and/or modify
+        it under the terms of the GNU General Public License as published by
+        the Free Software Foundation.
+
+        This program is distributed in the hope that it will be useful,
+        but WITHOUT ANY WARRANTY; without even the implied warranty of
+        MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+        GNU General Public License for more details.
+
+        You should have received a copy of the GNU General Public License
+        along with this program; if not, write to the Free Software
+        Foundation, Inc., 675 Mass Ave, Cambridge, MA 02139, USA.
+*/
+
+#include &quot;DIA_flyDialog.h&quot;
+#include &quot;ADM_default.h&quot;
+#include &quot;ADM_coreVideoFilterInternal.h&quot;
+#include &quot;DIA_factory.h&quot;
+#include &quot;asharp.h&quot;
+#include &quot;asharp_desc.cpp&quot;
+#define uc uint8_t
+/**
+    \class ASharp
+*/
+class ASharp : public ADM_coreVideoFilter
+{
+private:
+        
+        ADMImage        *original;
+        asharp          _param;
+        int32_t         T,D,B,B2;
+        
+public:    
+                        ASharp(ADM_coreVideoFilter *in,CONFcouple *couples)   ;
+                        ~ASharp();
+
+               void         update(void); 
+       virtual const char   *getConfiguration(void);          /// Return  current configuration as a human readable string
+       virtual bool         getNextFrame(uint32_t *fn,ADMImage *image);    /// Return the next image
+	   virtual bool         getCoupledConf(CONFcouple **couples) ;   /// Return the current filter configuration
+       virtual bool         configure(void) ;                 /// Start graphical user interface        
+};
+
+
+
+// Add the hook to make it valid plugin
+DECLARE_VIDEO_FILTER(   ASharp,   // Class
+                        1,0,0,              // Version
+                        ADM_UI_TYPE_BUILD,         // UI
+                        VF_SHARPNESS,            // Category
+                        &quot;asharp&quot;,            // internal name (must be uniq!)
+                        &quot;asharp&quot;,            // Display name
+                        QT_TR_NOOP(&quot;Adaptative sharpener by MarcFD.&quot;) // Description
+                    );
+
+void asharp_run_c(      uc* planeptr, int pitch,
+                                        int height, int width, 
+                                        int     T,int D, int B, int B2, bool bf );
+/**
+    \fn ASharp 
+    \brief ctor
+*/
+ASharp::ASharp(ADM_coreVideoFilter *in,CONFcouple *couples) : ADM_coreVideoFilter(in,couples)
+{
+        if(!couples || !ADM_paramLoad(couples,asharp_param,&amp;_param))
+		{
+            // Default value
+            _param.t=2;
+            _param.d=4;
+            _param.b=-1;
+            _param.bf=false;
+        }
+        update();
+        original=new ADMImageDefault(info.width,info.height);
+}
+/**
+    \fn dtor 
+    \brief recompute parameters
+*/
+
+ASharp::~ASharp(void)
+{
+        if(original) delete original;     
+        original=NULL;
+}
+/**
+    \fn update 
+    \brief recompute parameters
+*/
+
+void ASharp::update( void)
+{
+                // parameters floating point to fixed point convertion
+                T = (int)(_param.t*(4&lt;&lt;7));
+                D = (int)(_param.d*(4&lt;&lt;7));
+                B = (int)(256-_param.b*64);
+                B2= (int)(256-_param.b*48);
+
+                // clipping (recommended for SIMD code)
+
+                if (T&lt;-(4&lt;&lt;7)) T = -(4&lt;&lt;7); // yes, negatives values are accepted
+                if (D&lt;0) D = 0;
+                if (B&lt;0) B = 0;
+                if (B2&lt;0) B2 = 0;
+
+                if (T&gt;(32*(4&lt;&lt;7))) T = (32*(4&lt;&lt;7));
+                if (D&gt;(16*(4&lt;&lt;7))) D = (16*(4&lt;&lt;7));
+                if (B&gt;256) B = 256;
+                if (B2&gt;256) B2 = 256;
+
+}
+/**
+    \fn getCoupledConf
+    \brief Return our current configuration as couple name=value
+*/
+bool         ASharp::getCoupledConf(CONFcouple **couples)
+{
+    return ADM_paramSave(couples, asharp_param,&amp;_param);
+}
+
+extern uint8_t DIA_getASharp(asharp *param, ADM_coreVideoFilter *in);
+
+/**
+    \fn configure
+*/
+bool ASharp::configure(void)
+{
+uint8_t r=0;
+#if 0
+        if( DIA_getASharp(&amp;_param, previousFilter))
+        {
+                r=1;
+        }
+        update();
+        return r;
+#else
+    return true;
+#endif
+}
+/**
+    \fn getConfiguration
+*/
+const char   *ASharp::getConfiguration(void)   
+{
+    static char s[256];
+    snprintf(s,255,&quot;Asharp by MarcFd&quot;);
+    return s;
+        
+}
+/**
+    \fn getNextFrame
+*/
+ bool         ASharp::getNextFrame(uint32_t *fn,ADMImage *image)
+{
+ADMImage *src;
+ADMImage *dst;
+        dst=image;
+        src=original;
+
+        if(!previousFilter-&gt;getNextFrame(fn,src)) return false;
+
+        dst-&gt;duplicate(src);
+        asharp_run_c(     dst-&gt;GetWritePtr(PLANAR_Y),
+                        dst-&gt;GetPitch(PLANAR_Y), 
+                        info.height,
+                        info.width,
+                        T,
+                        D,
+                        B,
+                        B2,
+                        _param.bf);
+        return 1;
+}
+
+/**
+    \fn asharp_run_c
+*/
+void asharp_run_c(      uc* planeptr, int pitch,
+                                        int height, int width, 
+                                        int     T,int D, int B, int B2, bool bf )
+        {
+                uc* lineptr = new uc[width];
+                int p = pitch;
+                int y,x;
+                uc* cfp = planeptr+pitch;
+                uc* lp = lineptr;
+                memcpy(lp,planeptr,width);
+                for (y=1;y&lt;height-1;y++) {
+                        int last = cfp[0];
+                        for (x=0;x&lt;width-1;x++) {
+
+                                int avg = 0;
+                                int dev = 0;
+                                int T2;
+                                int diff;
+                                int tmp;
+
+                                avg += lp[x-1];
+                                avg += lp[x  ];
+                                avg += lp[x+1];
+                                avg += last;
+                                avg += cfp[x    ];
+                                avg += cfp[x  +1];
+                                avg += cfp[x+p-1];
+                                avg += cfp[x+p  ];
+                                avg += cfp[x+p+1];
+
+                                avg *= (65535/9);
+                                avg &gt;&gt;= 16;
+
+                                #define CHECK(A) \
+                                if (abs(A-cfp[x])&gt;dev) dev = abs(A-cfp[x]);
+                                
+                                if (bf) {
+
+                                if (y%8&gt;0) {
+                                        if (x%8&gt;0) CHECK(lp[x-1])
+                                        CHECK(lp[x  ])
+                                        if (x%8&lt;7) CHECK(lp[x+1])
+                                }
+                                if (x%8&gt;0) CHECK(last)
+                                if (x%8&lt;7) CHECK(cfp[x  +1])
+                                if (y%8&lt;7) {
+                                        if (x%8&gt;0) CHECK(cfp[x+p-1])
+                                        CHECK(cfp[x+p  ])
+                                        if (x%8&lt;7) CHECK(cfp[x+p+1])
+                                }
+
+                                } else {
+                                        CHECK(lp[x-p-1])
+                                        CHECK(lp[x-p  ])
+                                        CHECK(lp[x-p+1])
+                                        CHECK(last)
+                                        CHECK(cfp[x  +1])
+                                        CHECK(cfp[x+p-1])
+                                        CHECK(cfp[x+p  ])
+                                        CHECK(cfp[x+p+1])
+                                }
+
+                                T2 = T;
+                                diff = cfp[x]-avg;
+                                int D2 = D;
+
+                                if (x%8==6) D2=(D2*B2)&gt;&gt;8;
+                                if (x%8==7) D2=(D2*B)&gt;&gt;8;
+                                if (x%8==0) D2=(D2*B)&gt;&gt;8;
+                                if (x%8==1) D2=(D2*B2)&gt;&gt;8;
+                                if (y%8==6) D2=(D2*B2)&gt;&gt;8;
+                                if (y%8==7) D2=(D2*B)&gt;&gt;8;
+                                if (y%8==0) D2=(D2*B)&gt;&gt;8;
+                                if (y%8==1) D2=(D2*B2)&gt;&gt;8;
+
+                                int Da = -32+(D&gt;&gt;7);
+                                if (D&gt;0) T2 = ((((dev&lt;&lt;7)*D2)&gt;&gt;16)+Da)&lt;&lt;4;
+
+                                if (T2&gt;T) T2=T;
+                                if (T2&lt;-32) T2=-32;
+
+                                tmp = (((diff&lt;&lt;7)*T2)&gt;&gt;16)+cfp[x];
+
+                                if (tmp &lt; 0) tmp = 0;
+                                if (tmp &gt; 255) tmp = 255;
+                                lp[x-1] = last;
+                                last = cfp[x];
+                                cfp[x] = tmp;
+                        }
+                        lp[x] = cfp[x];
+                        cfp += pitch;
+                }
+        delete[] lineptr;
+} 
+//**********************************

Added: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/asharp/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/asharp/CMakeLists.txt	                        (rev 0)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/asharp/CMakeLists.txt	2011-12-21 09:30:13 UTC (rev 7707)
@@ -0,0 +1,26 @@
+INCLUDE(vf_plugin)
+
+
+SET(asharpCommon_SRCS 
+ADM_vidAsharp.cpp  DIA_flyAsharp.cpp
+)
+# ---------- QT4 Version ----------------
+INCLUDE(vf_plugin_qt4)
+SET(asharpQT_SRCS  qt4/Q_asharp.cpp)
+SET(asharpQT_HEADERS  qt4/Q_asharp.h)
+SET(asharpQT_UI    qt4/asharp)
+INIT_VIDEO_FILTER_QT4(ADM_vf_asharpQt4 ${asharpQT_SRCS} ${asharpQT_HEADERS} ${asharpQT_UI} ${asharpCommon_SRCS})
+# /QT4
+
+
+#------------- Gtk Version ---------------
+INCLUDE(vf_plugin_gtk)
+SET(asharpGtk_SRCS gtk/DIA_asharp.cpp)
+INIT_VIDEO_FILTER_GTK(ADM_vf_asharpGtk ${asharpGtk_SRCS} ${asharpCommon_SRCS})
+
+#------------ Cli Version ----------------
+#INCLUDE(vf_plugin_cli)
+#SET(CropCli_SRCS cli/DIA_crop.cpp)
+#INIT_VIDEO_FILTER_CLI(  ADM_vf_CropCli ${CropCli_SRCS} ${CropCommon_SRCS})
+#%%%%%%%%%%%%%%%%%%
+

Added: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/asharp/DIA_flyAsharp.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/asharp/DIA_flyAsharp.cpp	                        (rev 0)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/asharp/DIA_flyAsharp.cpp	2011-12-21 09:30:13 UTC (rev 7707)
@@ -0,0 +1,101 @@
+/**/
+/***************************************************************************
+                          DIA_Asharp
+                             -------------------
+
+                           Ui for Asharp
+
+    begin                : 08 Apr 2005
+    copyright            : (C) 2004/5 by mean
+    email                : <A HREF="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">fixounet at free.fr</A>
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+#include &quot;DIA_flyDialog.h&quot;
+#include &quot;ADM_default.h&quot;
+#include &quot;ADM_image.h&quot;
+
+
+#include &quot;asharp.h&quot;
+#include &quot;DIA_flyAsharp.h&quot;
+
+
+/************* COMMON PART *********************/
+/**
+    \fn update
+*/
+uint8_t  flyASharp::update(void)
+{
+    download();
+    process();
+//	copyYuvFinalToRgb();
+//    display();
+    return 1;
+}
+/**
+    \fn process
+*/
+uint8_t flyASharp::process(void)
+{
+#if 0
+uint8_t *src,*dst;
+uint32_t stride;
+int32_t T,D,B,B2;
+uint32_t ww,hh;
+
+
+                ww=_w;
+                hh=_h;
+                // parameters floating point to fixed point convertion
+                T = (int)(param.t*(4&lt;&lt;7));
+                D = (int)(param.d*(4&lt;&lt;7));
+                B = (int)(256-param.b*64);
+                B2= (int)(256-param.b*48);
+
+                // clipping (recommended for SIMD code)
+
+                if (T&lt;-(4&lt;&lt;7)) T = -(4&lt;&lt;7); // yes, negatives values are accepted
+                if (D&lt;0) D = 0;
+                if (B&lt;0) B = 0;
+                if (B2&lt;0) B2 = 0;
+
+                if (T&gt;(32*(4&lt;&lt;7))) T = (32*(4&lt;&lt;7));
+                if (D&gt;(16*(4&lt;&lt;7))) D = (16*(4&lt;&lt;7));
+                if (B&gt;256) B = 256;
+                if (B2&gt;256) B2 = 256;
+
+
+                memcpy(YPLANE(_yuvBufferOut),YPLANE(_yuvBuffer),ww*hh);
+                memcpy(UPLANE(_yuvBufferOut),UPLANE(_yuvBuffer),ww*hh/4);
+                memcpy(VPLANE(_yuvBufferOut),VPLANE(_yuvBuffer),ww*hh/4);
+                asharp_run_c(     _yuvBufferOut-&gt;GetWritePtr(PLANAR_Y),
+                        _yuvBufferOut-&gt;GetPitch(PLANAR_Y), 
+                        hh,
+                        ww,
+                        T,
+                        D,
+                        B,
+                        B2,
+                        param.bf);
+    
+    // Copy back half source to display
+    dst=_yuvBufferOut-&gt;data;
+    src=_yuvBuffer-&gt;data;
+    stride=ww;
+    for(uint32_t y=0;y&lt;hh;y++)   // We do both u &amp; v!
+    {
+        memcpy(dst,src,stride&gt;&gt;1);
+        dst+=stride;
+        src+=stride;
+    }
+#endif
+    return 1;
+}
+//EOF

Added: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/asharp/DIA_flyAsharp.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/asharp/DIA_flyAsharp.h	                        (rev 0)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/asharp/DIA_flyAsharp.h	2011-12-21 09:30:13 UTC (rev 7707)
@@ -0,0 +1,29 @@
+
+
+#ifndef FLY_ASHARP_H
+#define FLY_ASHARP_H
+/**
+    \class flyASharp
+*/
+#include &quot;asharp.h&quot;
+#define uc uint8_t
+class flyASharp : public FLY_DIALOG_TYPE
+{
+  
+  public:
+   asharp     param;
+  public:
+   uint8_t    process(void);
+   uint8_t    download(void);
+   uint8_t    upload(void);
+   uint8_t    update(void);
+   flyASharp (uint32_t width,uint32_t height,ADM_coreVideoFilter *in,
+                                    void *canvas, void *slider) : FLY_DIALOG_TYPE(width, height,in,canvas, slider,1,RESIZE_AUTO) {};
+};
+
+void asharp_run_c(      uc* planeptr, int pitch,
+                                        int height, int width, 
+                                        int     T,int D, int B, int B2, bool bf );
+
+
+#endif

Added: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/asharp/asharp.conf
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/asharp/asharp.conf	                        (rev 0)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/asharp/asharp.conf	2011-12-21 09:30:13 UTC (rev 7707)
@@ -0,0 +1,6 @@
+asharp{
+float:t // Threshold 0:nothing max : 5 ?
+float:d // Strength : 0 means nothing, &gt;0  adaptative t is maximum
+float:b // Block adaptative sharpening -1 disabled
+bool:bf;
+}

Added: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/asharp/asharp.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/asharp/asharp.h	                        (rev 0)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/asharp/asharp.h	2011-12-21 09:30:13 UTC (rev 7707)
@@ -0,0 +1,10 @@
+// automatically generated by admSerialization.py do not edit
+#ifndef ADM_asharp_CONF_H
+#define ADM_asharp_CONF_H
+typedef struct {
+float t;
+float d;
+float b;
+bool bf;
+}asharp;
+#endif

Added: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/asharp/asharp_desc.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/asharp/asharp_desc.cpp	                        (rev 0)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/asharp/asharp_desc.cpp	2011-12-21 09:30:13 UTC (rev 7707)
@@ -0,0 +1,8 @@
+// automatically generated by admSerialization.py, do not edit!
+extern const ADM_paramList asharp_param[]={
+ {&quot;t&quot;,offsetof(asharp,t),&quot;float&quot;,ADM_param_float},
+ {&quot;d&quot;,offsetof(asharp,d),&quot;float&quot;,ADM_param_float},
+ {&quot;b&quot;,offsetof(asharp,b),&quot;float&quot;,ADM_param_float},
+ {&quot;bf&quot;,offsetof(asharp,bf),&quot;bool&quot;,ADM_param_bool},
+{NULL,0,NULL}
+};

Added: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/asharp/asharp_json.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/asharp/asharp_json.cpp	                        (rev 0)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/asharp/asharp_json.cpp	2011-12-21 09:30:13 UTC (rev 7707)
@@ -0,0 +1,21 @@
+// automatically generated by admSerialization.py, do not edit!
+#include &quot;ADM_default.h&quot;
+#include &quot;ADM_paramList.h&quot;
+#include &quot;ADM_coreJson.h&quot;
+#include &quot;asharp.h&quot;
+bool  asharp_jserialize(const char *file, const asharp *key){
+admJson json;
+json.addFloat(&quot;t&quot;,key-&gt;t);
+json.addFloat(&quot;d&quot;,key-&gt;d);
+json.addFloat(&quot;b&quot;,key-&gt;b);
+json.addBool(&quot;bf&quot;,key-&gt;bf);
+return json.dumpToFile(file);
+};
+bool  asharp_jdeserialize(const char *file, const ADM_paramList *tmpl,asharp *key){
+admJsonToCouple json;
+CONFcouple *c=json.readFromFile(file);
+if(!c) {ADM_error(&quot;Cannot read json file&quot;);return false;}
+bool r= ADM_paramLoadPartial(c,tmpl,key);
+delete c;
+return r;
+};

Added: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/asharp/gtk/DIA_asharp.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/asharp/gtk/DIA_asharp.cpp	                        (rev 0)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/asharp/gtk/DIA_asharp.cpp	2011-12-21 09:30:13 UTC (rev 7707)
@@ -0,0 +1,295 @@
+/**/
+/***************************************************************************
+                          DIA_hue
+                             -------------------
+
+                           Ui for hue &amp; sat
+
+    begin                : 08 Apr 2005
+    copyright            : (C) 2004/5 by mean
+    email                : <A HREF="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">fixounet at free.fr</A>
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+
+
+
+#include &quot;ADM_toolkitGtk.h&quot;
+
+
+#include &quot;ADM_image.h&quot;
+#include &quot;ADM_videoFilter.h&quot;
+#include &quot;ADM_vidASharp_param.h&quot;
+#include &quot;DIA_flyDialog.h&quot;
+#include &quot;DIA_flyAsharp.h&quot;
+
+
+uint8_t DIA_getASharp(ASHARP_PARAM *param, AVDMGenericVideoStream *in);
+
+static GtkWidget        *create_dialog1 (void);
+static gboolean         draw (void );
+static void             upload(void);
+static void             download(void);
+static void             frame_changed( void );
+static void             hue_changed( void);
+
+static int lock=0;
+static GtkWidget *dialog=NULL;
+static flyASharp *myCrop=NULL;
+
+//
+//      Video is in YV12 Colorspace
+//
+//
+uint8_t DIA_getASharp(ASHARP_PARAM *param, AVDMGenericVideoStream *in)
+{
+      uint32_t width,height;
+      uint8_t ret=0;
+        // Allocate space for green-ised video
+        width=in-&gt;getInfo()-&gt;width;
+        height=in-&gt;getInfo()-&gt;height;
+
+        dialog=create_dialog1();
+		gtk_dialog_set_alternative_button_order(GTK_DIALOG(dialog),
+									GTK_RESPONSE_OK,
+									GTK_RESPONSE_CANCEL,
+									-1);
+        gtk_register_dialog(dialog);
+        gtk_window_set_title (GTK_WINDOW (dialog), QT_TR_NOOP(&quot;ASHARP&quot;));
+        gtk_widget_show(dialog);
+
+        gtk_signal_connect(GTK_OBJECT(WID(drawingarea1)), &quot;expose_event&quot;,
+            GTK_SIGNAL_FUNC(draw),
+            NULL);
+//
+        gtk_signal_connect(GTK_OBJECT(WID(hscale1)), &quot;value_changed&quot;,GTK_SIGNAL_FUNC(frame_changed),   NULL);
+        gtk_signal_connect(GTK_OBJECT(WID(spinbuttonT)), &quot;value_changed&quot;,GTK_SIGNAL_FUNC(hue_changed),   NULL);
+        gtk_signal_connect(GTK_OBJECT(WID(spinbuttonD)), &quot;value_changed&quot;,GTK_SIGNAL_FUNC(hue_changed),   NULL);
+        gtk_signal_connect(GTK_OBJECT(WID(spinbuttonB)), &quot;value_changed&quot;,GTK_SIGNAL_FUNC(hue_changed),   NULL);
+        gtk_widget_show(dialog);
+
+          
+        myCrop=new flyASharp( width, height,in,WID(drawingarea1),WID(hscale1));
+        memcpy(&amp;(myCrop-&gt;param),param,sizeof(ASHARP_PARAM));
+        myCrop-&gt;upload();
+        myCrop-&gt;sliderChanged();
+        ret=0;
+        int response;
+        response=gtk_dialog_run(GTK_DIALOG(dialog));
+
+        if(response==GTK_RESPONSE_OK)
+        {
+            myCrop-&gt;download();
+            memcpy(param,&amp;(myCrop-&gt;param),sizeof(ASHARP_PARAM));
+            ret=1;
+        }
+        gtk_unregister_dialog(dialog);
+        gtk_widget_destroy(dialog);
+        delete myCrop;
+        return ret;
+}
+void hue_changed( void)
+{
+  if(lock) return;
+  
+   myCrop-&gt;update();
+  
+}
+void frame_changed( void )
+{
+  myCrop-&gt;sliderChanged();
+}
+gboolean draw (void)
+{
+    myCrop-&gt;display();
+}
+//
+#define SPIN_GET(x,y) {param.x= gtk_spin_button_get_value(GTK_SPIN_BUTTON(WID(y))) ;}
+#define SPIN_SET(x,y)  {gtk_spin_button_set_value(GTK_SPIN_BUTTON(WID(y)),(gfloat)param.x) ;}
+
+#define CHECK_GET(x,y) {param.x=gtk_toggle_button_get_active( GTK_TOGGLE_BUTTON(WID(y)));}
+#define CHECK_SET(x,y) {gtk_toggle_button_set_active( GTK_TOGGLE_BUTTON(WID(y)),param.x);}
+
+void upload( void)
+{
+    myCrop-&gt;upload();
+}
+void download (void)
+{
+     myCrop-&gt;download();
+}
+/**************************************/
+uint8_t flyASharp::upload(void)
+{
+    lock++;
+        SPIN_SET(t,spinbuttonT);
+        SPIN_SET(d,spinbuttonD);
+        SPIN_SET(b,spinbuttonB);
+
+        CHECK_SET(bf,checkbuttonBF);
+    lock--;
+        return 1;
+}
+uint8_t flyASharp::download (void)
+{
+    
+        SPIN_GET(t,spinbuttonT);
+        SPIN_GET(d,spinbuttonD);
+        SPIN_GET(b,spinbuttonB);
+
+        CHECK_GET(bf,checkbuttonBF);
+        return 1;
+}
+
+/**************************************************/
+GtkWidget*
+create_dialog1 (void)
+{
+  GtkWidget *dialog1;
+  GtkWidget *dialog_vbox1;
+  GtkWidget *vbox1;
+  GtkWidget *table1;
+  GtkWidget *label1;
+  GtkWidget *label2;
+  GtkWidget *label3;
+  GtkWidget *label4;
+  GtkObject *spinbuttonT_adj;
+  GtkWidget *spinbuttonT;
+  GtkObject *spinbuttonD_adj;
+  GtkWidget *spinbuttonD;
+  GtkObject *spinbuttonB_adj;
+  GtkWidget *spinbuttonB;
+  GtkWidget *checkbuttonBF;
+  GtkWidget *hscale1;
+  GtkWidget *drawingarea1;
+  GtkWidget *dialog_action_area1;
+  GtkWidget *cancelbutton1;
+  GtkWidget *okbutton1;
+
+  dialog1 = gtk_dialog_new ();
+  gtk_window_set_title (GTK_WINDOW (dialog1), QT_TR_NOOP(&quot;ASharp by MarcFD&quot;));
+
+  dialog_vbox1 = GTK_DIALOG (dialog1)-&gt;vbox;
+  gtk_widget_show (dialog_vbox1);
+
+  vbox1 = gtk_vbox_new (FALSE, 0);
+  gtk_widget_show (vbox1);
+  gtk_box_pack_start (GTK_BOX (dialog_vbox1), vbox1, TRUE, TRUE, 0);
+
+  table1 = gtk_table_new (4, 2, FALSE);
+  gtk_widget_show (table1);
+  gtk_box_pack_start (GTK_BOX (vbox1), table1, TRUE, TRUE, 0);
+
+  label1 = gtk_label_new (QT_TR_NOOP(&quot;Threshold :&quot;));
+  gtk_widget_show (label1);
+  gtk_table_attach (GTK_TABLE (table1), label1, 0, 1, 0, 1,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+  gtk_label_set_justify (GTK_LABEL (label1), GTK_JUSTIFY_LEFT);
+  gtk_misc_set_alignment (GTK_MISC (label1), 0, 0.5);
+
+  label2 = gtk_label_new (QT_TR_NOOP(&quot;Strength :&quot;));
+  gtk_widget_show (label2);
+  gtk_table_attach (GTK_TABLE (table1), label2, 0, 1, 1, 2,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+  gtk_label_set_justify (GTK_LABEL (label2), GTK_JUSTIFY_LEFT);
+  gtk_misc_set_alignment (GTK_MISC (label2), 0, 0.5);
+
+  label3 = gtk_label_new (QT_TR_NOOP(&quot;Block Adaptative :&quot;));
+  gtk_widget_show (label3);
+  gtk_table_attach (GTK_TABLE (table1), label3, 0, 1, 2, 3,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+  gtk_label_set_justify (GTK_LABEL (label3), GTK_JUSTIFY_LEFT);
+  gtk_misc_set_alignment (GTK_MISC (label3), 0, 0.5);
+
+  label4 = gtk_label_new (QT_TR_NOOP(&quot;Unknown flag :&quot;));
+  gtk_widget_show (label4);
+  gtk_table_attach (GTK_TABLE (table1), label4, 0, 1, 3, 4,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+  gtk_label_set_justify (GTK_LABEL (label4), GTK_JUSTIFY_LEFT);
+  gtk_misc_set_alignment (GTK_MISC (label4), 0, 0.5);
+
+  spinbuttonT_adj = gtk_adjustment_new (1, -1, 100, 0.5, 0.1, 0.1);
+  spinbuttonT = gtk_spin_button_new (GTK_ADJUSTMENT (spinbuttonT_adj), 1, 1);
+  gtk_widget_show (spinbuttonT);
+  gtk_table_attach (GTK_TABLE (table1), spinbuttonT, 1, 2, 0, 1,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+  gtk_spin_button_set_numeric (GTK_SPIN_BUTTON (spinbuttonT), TRUE);
+
+  spinbuttonD_adj = gtk_adjustment_new (1, -1, 100, 0.5, 0.1, 0.1);
+  spinbuttonD = gtk_spin_button_new (GTK_ADJUSTMENT (spinbuttonD_adj), 1, 1);
+  gtk_widget_show (spinbuttonD);
+  gtk_table_attach (GTK_TABLE (table1), spinbuttonD, 1, 2, 1, 2,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+  gtk_spin_button_set_numeric (GTK_SPIN_BUTTON (spinbuttonD), TRUE);
+
+  spinbuttonB_adj = gtk_adjustment_new (1, -1, 100, 0.5, 0.1, 0.1);
+  spinbuttonB = gtk_spin_button_new (GTK_ADJUSTMENT (spinbuttonB_adj), 1, 1);
+  gtk_widget_show (spinbuttonB);
+  gtk_table_attach (GTK_TABLE (table1), spinbuttonB, 1, 2, 2, 3,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+  gtk_spin_button_set_numeric (GTK_SPIN_BUTTON (spinbuttonB), TRUE);
+
+  checkbuttonBF = gtk_check_button_new_with_mnemonic (QT_TR_NOOP(&quot; &quot;));
+  gtk_widget_show (checkbuttonBF);
+  gtk_table_attach (GTK_TABLE (table1), checkbuttonBF, 1, 2, 3, 4,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+
+  hscale1 = gtk_hscale_new (GTK_ADJUSTMENT (gtk_adjustment_new (0, 0, 100, 1, 1, 1)));
+  gtk_widget_show (hscale1);
+  gtk_box_pack_start (GTK_BOX (vbox1), hscale1, TRUE, TRUE, 0);
+
+  drawingarea1 = gtk_drawing_area_new ();
+  gtk_widget_show (drawingarea1);
+  gtk_box_pack_start (GTK_BOX (vbox1), drawingarea1, TRUE, TRUE, 0);
+
+  dialog_action_area1 = GTK_DIALOG (dialog1)-&gt;action_area;
+  gtk_widget_show (dialog_action_area1);
+  gtk_button_box_set_layout (GTK_BUTTON_BOX (dialog_action_area1), GTK_BUTTONBOX_END);
+
+  cancelbutton1 = gtk_button_new_from_stock (&quot;gtk-cancel&quot;);
+  gtk_widget_show (cancelbutton1);
+  gtk_dialog_add_action_widget (GTK_DIALOG (dialog1), cancelbutton1, GTK_RESPONSE_CANCEL);
+  GTK_WIDGET_SET_FLAGS (cancelbutton1, GTK_CAN_DEFAULT);
+
+  okbutton1 = gtk_button_new_from_stock (&quot;gtk-ok&quot;);
+  gtk_widget_show (okbutton1);
+  gtk_dialog_add_action_widget (GTK_DIALOG (dialog1), okbutton1, GTK_RESPONSE_OK);
+  GTK_WIDGET_SET_FLAGS (okbutton1, GTK_CAN_DEFAULT);
+
+  /* Store pointers to all widgets, for use by lookup_widget(). */
+  GLADE_HOOKUP_OBJECT_NO_REF (dialog1, dialog1, &quot;dialog1&quot;);
+  GLADE_HOOKUP_OBJECT_NO_REF (dialog1, dialog_vbox1, &quot;dialog_vbox1&quot;);
+  GLADE_HOOKUP_OBJECT (dialog1, vbox1, &quot;vbox1&quot;);
+  GLADE_HOOKUP_OBJECT (dialog1, table1, &quot;table1&quot;);
+  GLADE_HOOKUP_OBJECT (dialog1, label1, &quot;label1&quot;);
+  GLADE_HOOKUP_OBJECT (dialog1, label2, &quot;label2&quot;);
+  GLADE_HOOKUP_OBJECT (dialog1, label3, &quot;label3&quot;);
+  GLADE_HOOKUP_OBJECT (dialog1, label4, &quot;label4&quot;);
+  GLADE_HOOKUP_OBJECT (dialog1, spinbuttonT, &quot;spinbuttonT&quot;);
+  GLADE_HOOKUP_OBJECT (dialog1, spinbuttonD, &quot;spinbuttonD&quot;);
+  GLADE_HOOKUP_OBJECT (dialog1, spinbuttonB, &quot;spinbuttonB&quot;);
+  GLADE_HOOKUP_OBJECT (dialog1, checkbuttonBF, &quot;checkbuttonBF&quot;);
+  GLADE_HOOKUP_OBJECT (dialog1, hscale1, &quot;hscale1&quot;);
+  GLADE_HOOKUP_OBJECT (dialog1, drawingarea1, &quot;drawingarea1&quot;);
+  GLADE_HOOKUP_OBJECT_NO_REF (dialog1, dialog_action_area1, &quot;dialog_action_area1&quot;);
+  GLADE_HOOKUP_OBJECT (dialog1, cancelbutton1, &quot;cancelbutton1&quot;);
+  GLADE_HOOKUP_OBJECT (dialog1, okbutton1, &quot;okbutton1&quot;);
+
+  return dialog1;
+}
+

Added: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/asharp/qt4/Q_asharp.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/asharp/qt4/Q_asharp.cpp	                        (rev 0)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/asharp/qt4/Q_asharp.cpp	2011-12-21 09:30:13 UTC (rev 7707)
@@ -0,0 +1,130 @@
+/***************************************************************************
+                          DIA_crop.cpp  -  description
+                             -------------------
+
+			    GUI for cropping including autocrop
+			    +Revisted the Gtk2 way
+			     +Autocrop now in RGB space (more accurate)
+
+    begin                : Fri May 3 2002
+    copyright            : (C) 2002/2007 by mean
+    email                : <A HREF="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">fixounet at free.fr</A>
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+
+#include &quot;Q_asharp.h&quot;
+#include &quot;ADM_toolkitQt.h&quot;
+
+//
+//	Video is in YV12 Colorspace
+//
+//
+  Ui_asharpWindow::Ui_asharpWindow(QWidget *parent,  asharp *param, ADM_coreVideoFilter *in) : QDialog(parent)
+  {
+    uint32_t width,height;
+        ui.setupUi(this);
+        lock=0;
+        // Allocate space for green-ised video
+        width=in-&gt;getInfo()-&gt;width;
+        height=in-&gt;getInfo()-&gt;height;
+
+        canvas=new ADM_QCanvas(ui.graphicsView,width,height);
+        
+        myCrop=new flyASharp( width, height,in,canvas,ui.horizontalSlider);
+        memcpy(&amp;(myCrop-&gt;param),param,sizeof(asharp));
+        myCrop-&gt;_cookie=&ui;
+        myCrop-&gt;upload();
+        myCrop-&gt;sliderChanged();
+
+
+        connect( ui.horizontalSlider,SIGNAL(valueChanged(int)),this,SLOT(sliderUpdate(int)));
+#define SPINNER(x) connect( ui.doubleSpinBox##x,SIGNAL(valueChanged(int)),this,SLOT(valueChanged(int))); 
+          SPINNER(Treshold);
+          SPINNER(Strength);
+          SPINNER(Block);
+          connect( ui.checkBox,SIGNAL(stateChanged(int)),this,SLOT(valueChanged(int))); 
+
+  }
+  void Ui_asharpWindow::sliderUpdate(int foo)
+  {
+    myCrop-&gt;sliderChanged();
+  }
+  void Ui_asharpWindow::gather(asharp *param)
+  {
+    
+        myCrop-&gt;download();
+        memcpy(param,&amp;(myCrop-&gt;param),sizeof(asharp));
+  }
+Ui_asharpWindow::~Ui_asharpWindow()
+{
+  if(myCrop) delete myCrop;
+  myCrop=NULL; 
+  if(canvas) delete canvas;
+  canvas=NULL;
+}
+void Ui_asharpWindow::valueChanged( int f )
+{
+  if(lock) return;
+  lock++;
+  myCrop-&gt;update();
+  lock--;
+}
+
+#define MYSPIN(x) w-&gt;doubleSpinBox##x
+//************************
+uint8_t flyASharp::upload(void)
+{
+      Ui_asharpDialog *w=(Ui_asharpDialog *)_cookie;
+
+        MYSPIN(Treshold)-&gt;setValue(param.t);
+        MYSPIN(Strength)-&gt;setValue(param.d);
+        MYSPIN(Block)-&gt;setValue(param.b);
+        
+        //w-&gt;bf-&gt;w-&gt;checkBox-&gt;isChecked();
+        w-&gt;checkBox-&gt;setChecked(param.bf);
+
+        return 1;
+}
+uint8_t flyASharp::download(void)
+{
+       Ui_asharpDialog *w=(Ui_asharpDialog *)_cookie;
+       param.t= MYSPIN(Treshold)-&gt;value();
+       param.d= MYSPIN(Strength)-&gt;value();
+       param.b= MYSPIN(Block)-&gt;value();
+       
+       //w-&gt;spinBoxBottom-&gt;setValue(bottom);
+       param.bf=w-&gt;checkBox-&gt;isChecked();
+}
+
+/**
+      \fn     DIA_getCropParams
+      \brief  Handle crop dialog
+*/
+uint8_t DIA_getASharp(asharp *param, ADM_coreVideoFilter *in)
+{
+        uint8_t ret=0;
+        
+        Ui_asharpWindow dialog(qtLastRegisteredDialog(), param,in);
+		qtRegisterDialog(&amp;dialog);
+
+        if(dialog.exec()==QDialog::Accepted)
+        {
+            dialog.gather(param); 
+            ret=1;
+        }
+
+		qtUnregisterDialog(&amp;dialog);
+        return ret;
+}
+//____________________________________
+// EOF
+
+

Added: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/asharp/qt4/Q_asharp.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/asharp/qt4/Q_asharp.h	                        (rev 0)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/asharp/qt4/Q_asharp.h	2011-12-21 09:30:13 UTC (rev 7707)
@@ -0,0 +1,31 @@
+#ifndef Q_asharp_h
+#define Q_asharp_h
+
+#include &quot;ui_asharp.h&quot;
+#include &quot;DIA_flyDialog.h&quot;
+#include &quot;ADM_image.h&quot;
+#include &quot;DIA_flyDialogQt4.h&quot;
+#include &quot;DIA_flyAsharp.h&quot;
+
+class Ui_asharpWindow : public QDialog
+{
+	Q_OBJECT
+
+protected: 
+	int lock;
+
+public:
+	flyASharp *myCrop;
+	ADM_QCanvas *canvas;
+	Ui_asharpWindow(QWidget *parent, asharp *param, ADM_coreVideoFilter *in);
+	~Ui_asharpWindow();
+	Ui_asharpDialog ui;
+
+public slots:
+	void gather(asharp *param);
+
+private slots:
+	void sliderUpdate(int foo);
+	void valueChanged(int foo);
+};
+#endif	// Q_asharp_h

Added: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/asharp/qt4/asharp.ui
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/asharp/qt4/asharp.ui	                        (rev 0)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/asharp/qt4/asharp.ui	2011-12-21 09:30:13 UTC (rev 7707)
@@ -0,0 +1,180 @@
+&lt;ui version=&quot;4.0&quot; &gt;
+ &lt;class&gt;asharpDialog&lt;/class&gt;
+ &lt;widget class=&quot;QDialog&quot; name=&quot;asharpDialog&quot; &gt;
+  &lt;property name=&quot;geometry&quot; &gt;
+   &lt;rect&gt;
+    &lt;x&gt;0&lt;/x&gt;
+    &lt;y&gt;0&lt;/y&gt;
+    &lt;width&gt;481&lt;/width&gt;
+    &lt;height&gt;454&lt;/height&gt;
+   &lt;/rect&gt;
+  &lt;/property&gt;
+  &lt;property name=&quot;windowTitle&quot; &gt;
+   &lt;string&gt;ASharp&lt;/string&gt;
+  &lt;/property&gt;
+  &lt;layout class=&quot;QGridLayout&quot; &gt;
+   &lt;property name=&quot;leftMargin&quot; &gt;
+    &lt;number&gt;9&lt;/number&gt;
+   &lt;/property&gt;
+   &lt;property name=&quot;topMargin&quot; &gt;
+    &lt;number&gt;9&lt;/number&gt;
+   &lt;/property&gt;
+   &lt;property name=&quot;rightMargin&quot; &gt;
+    &lt;number&gt;9&lt;/number&gt;
+   &lt;/property&gt;
+   &lt;property name=&quot;bottomMargin&quot; &gt;
+    &lt;number&gt;9&lt;/number&gt;
+   &lt;/property&gt;
+   &lt;property name=&quot;horizontalSpacing&quot; &gt;
+    &lt;number&gt;6&lt;/number&gt;
+   &lt;/property&gt;
+   &lt;property name=&quot;verticalSpacing&quot; &gt;
+    &lt;number&gt;6&lt;/number&gt;
+   &lt;/property&gt;
+   &lt;item row=&quot;3&quot; column=&quot;3&quot; &gt;
+    &lt;spacer&gt;
+     &lt;property name=&quot;orientation&quot; &gt;
+      &lt;enum&gt;Qt::Horizontal&lt;/enum&gt;
+     &lt;/property&gt;
+     &lt;property name=&quot;sizeHint&quot; &gt;
+      &lt;size&gt;
+       &lt;width&gt;40&lt;/width&gt;
+       &lt;height&gt;20&lt;/height&gt;
+      &lt;/size&gt;
+     &lt;/property&gt;
+    &lt;/spacer&gt;
+   &lt;/item&gt;
+   &lt;item row=&quot;2&quot; column=&quot;3&quot; &gt;
+    &lt;spacer&gt;
+     &lt;property name=&quot;orientation&quot; &gt;
+      &lt;enum&gt;Qt::Horizontal&lt;/enum&gt;
+     &lt;/property&gt;
+     &lt;property name=&quot;sizeHint&quot; &gt;
+      &lt;size&gt;
+       &lt;width&gt;40&lt;/width&gt;
+       &lt;height&gt;20&lt;/height&gt;
+      &lt;/size&gt;
+     &lt;/property&gt;
+    &lt;/spacer&gt;
+   &lt;/item&gt;
+   &lt;item row=&quot;1&quot; column=&quot;3&quot; &gt;
+    &lt;spacer&gt;
+     &lt;property name=&quot;orientation&quot; &gt;
+      &lt;enum&gt;Qt::Horizontal&lt;/enum&gt;
+     &lt;/property&gt;
+     &lt;property name=&quot;sizeHint&quot; &gt;
+      &lt;size&gt;
+       &lt;width&gt;40&lt;/width&gt;
+       &lt;height&gt;20&lt;/height&gt;
+      &lt;/size&gt;
+     &lt;/property&gt;
+    &lt;/spacer&gt;
+   &lt;/item&gt;
+   &lt;item row=&quot;0&quot; column=&quot;3&quot; &gt;
+    &lt;spacer&gt;
+     &lt;property name=&quot;orientation&quot; &gt;
+      &lt;enum&gt;Qt::Horizontal&lt;/enum&gt;
+     &lt;/property&gt;
+     &lt;property name=&quot;sizeHint&quot; &gt;
+      &lt;size&gt;
+       &lt;width&gt;40&lt;/width&gt;
+       &lt;height&gt;20&lt;/height&gt;
+      &lt;/size&gt;
+     &lt;/property&gt;
+    &lt;/spacer&gt;
+   &lt;/item&gt;
+   &lt;item row=&quot;4&quot; column=&quot;0&quot; colspan=&quot;4&quot; &gt;
+    &lt;widget class=&quot;QSlider&quot; name=&quot;horizontalSlider&quot; &gt;
+     &lt;property name=&quot;orientation&quot; &gt;
+      &lt;enum&gt;Qt::Horizontal&lt;/enum&gt;
+     &lt;/property&gt;
+    &lt;/widget&gt;
+   &lt;/item&gt;
+   &lt;item row=&quot;6&quot; column=&quot;1&quot; colspan=&quot;3&quot; &gt;
+    &lt;widget class=&quot;QDialogButtonBox&quot; name=&quot;buttonBox&quot; &gt;
+     &lt;property name=&quot;orientation&quot; &gt;
+      &lt;enum&gt;Qt::Horizontal&lt;/enum&gt;
+     &lt;/property&gt;
+     &lt;property name=&quot;standardButtons&quot; &gt;
+      &lt;set&gt;QDialogButtonBox::Cancel|QDialogButtonBox::NoButton|QDialogButtonBox::Ok&lt;/set&gt;
+     &lt;/property&gt;
+    &lt;/widget&gt;
+   &lt;/item&gt;
+   &lt;item row=&quot;5&quot; column=&quot;0&quot; colspan=&quot;4&quot; &gt;
+    &lt;widget class=&quot;QGraphicsView&quot; name=&quot;graphicsView&quot; /&gt;
+   &lt;/item&gt;
+   &lt;item row=&quot;1&quot; column=&quot;0&quot; &gt;
+    &lt;widget class=&quot;QLabel&quot; name=&quot;label_2&quot; &gt;
+     &lt;property name=&quot;text&quot; &gt;
+      &lt;string&gt;Strength&lt;/string&gt;
+     &lt;/property&gt;
+    &lt;/widget&gt;
+   &lt;/item&gt;
+   &lt;item row=&quot;0&quot; column=&quot;0&quot; &gt;
+    &lt;widget class=&quot;QLabel&quot; name=&quot;label&quot; &gt;
+     &lt;property name=&quot;text&quot; &gt;
+      &lt;string&gt;Threshold&lt;/string&gt;
+     &lt;/property&gt;
+    &lt;/widget&gt;
+   &lt;/item&gt;
+   &lt;item row=&quot;2&quot; column=&quot;0&quot; colspan=&quot;2&quot; &gt;
+    &lt;widget class=&quot;QLabel&quot; name=&quot;label_3&quot; &gt;
+     &lt;property name=&quot;text&quot; &gt;
+      &lt;string&gt;Block Adaptative&lt;/string&gt;
+     &lt;/property&gt;
+    &lt;/widget&gt;
+   &lt;/item&gt;
+   &lt;item row=&quot;3&quot; column=&quot;0&quot; colspan=&quot;3&quot; &gt;
+    &lt;widget class=&quot;QCheckBox&quot; name=&quot;checkBox&quot; &gt;
+     &lt;property name=&quot;text&quot; &gt;
+      &lt;string&gt;Unknown flag&lt;/string&gt;
+     &lt;/property&gt;
+    &lt;/widget&gt;
+   &lt;/item&gt;
+   &lt;item row=&quot;0&quot; column=&quot;2&quot; &gt;
+    &lt;widget class=&quot;QDoubleSpinBox&quot; name=&quot;doubleSpinBoxTreshold&quot; /&gt;
+   &lt;/item&gt;
+   &lt;item row=&quot;1&quot; column=&quot;2&quot; &gt;
+    &lt;widget class=&quot;QDoubleSpinBox&quot; name=&quot;doubleSpinBoxStrength&quot; /&gt;
+   &lt;/item&gt;
+   &lt;item row=&quot;2&quot; column=&quot;2&quot; &gt;
+    &lt;widget class=&quot;QDoubleSpinBox&quot; name=&quot;doubleSpinBoxBlock&quot; /&gt;
+   &lt;/item&gt;
+  &lt;/layout&gt;
+ &lt;/widget&gt;
+ &lt;resources/&gt;
+ &lt;connections&gt;
+  &lt;connection&gt;
+   &lt;sender&gt;buttonBox&lt;/sender&gt;
+   &lt;signal&gt;accepted()&lt;/signal&gt;
+   &lt;receiver&gt;asharpDialog&lt;/receiver&gt;
+   &lt;slot&gt;accept()&lt;/slot&gt;
+   &lt;hints&gt;
+    &lt;hint type=&quot;sourcelabel&quot; &gt;
+     &lt;x&gt;248&lt;/x&gt;
+     &lt;y&gt;254&lt;/y&gt;
+    &lt;/hint&gt;
+    &lt;hint type=&quot;destinationlabel&quot; &gt;
+     &lt;x&gt;157&lt;/x&gt;
+     &lt;y&gt;274&lt;/y&gt;
+    &lt;/hint&gt;
+   &lt;/hints&gt;
+  &lt;/connection&gt;
+  &lt;connection&gt;
+   &lt;sender&gt;buttonBox&lt;/sender&gt;
+   &lt;signal&gt;rejected()&lt;/signal&gt;
+   &lt;receiver&gt;asharpDialog&lt;/receiver&gt;
+   &lt;slot&gt;reject()&lt;/slot&gt;
+   &lt;hints&gt;
+    &lt;hint type=&quot;sourcelabel&quot; &gt;
+     &lt;x&gt;316&lt;/x&gt;
+     &lt;y&gt;260&lt;/y&gt;
+    &lt;/hint&gt;
+    &lt;hint type=&quot;destinationlabel&quot; &gt;
+     &lt;x&gt;286&lt;/x&gt;
+     &lt;y&gt;274&lt;/y&gt;
+    &lt;/hint&gt;
+   &lt;/hints&gt;
+  &lt;/connection&gt;
+ &lt;/connections&gt;
+&lt;/ui&gt;


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="004848.html">[Avidemux-svn-commit] r7706 -	branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor
</A></li>
	<LI>Next message: <A HREF="004850.html">[Avidemux-svn-commit] r7708 -	branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/asharp
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4849">[ date ]</a>
              <a href="thread.html#4849">[ thread ]</a>
              <a href="subject.html#4849">[ subject ]</a>
              <a href="author.html#4849">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">More information about the Avidemux-svn-commit
mailing list</a><br>
</body></html>
