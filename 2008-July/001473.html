<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Avidemux-svn-commit] r4225 - in	branches/avidemux_2.5_branch_gruntster/avidemux: .	ADM_audioEncoder/include ADM_audioEncoder/src ADM_audiocodec	ADM_audiodevice ADM_audiofilter ADM_coreAudio/include	ADM_toolkit ADM_userInterfaces/ADM_GTK/ADM_dialog	ADM_userInterfaces/ADM_GTK/ADM_gui2	ADM_userInterfaces/ADM_QT4/ADM_dialog	ADM_userInterfaces/ADM_commonUI
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/avidemux-svn-commit/2008-July/index.html" >
   <LINK REL="made" HREF="mailto:avidemux-svn-commit%40lists.berlios.de?Subject=Re%3A%20%5BAvidemux-svn-commit%5D%20r4225%20-%20in%0A%09branches/avidemux_2.5_branch_gruntster/avidemux%3A%20.%0A%09ADM_audioEncoder/include%20ADM_audioEncoder/src%20ADM_audiocodec%0A%09ADM_audiodevice%20ADM_audiofilter%20ADM_coreAudio/include%0A%09ADM_toolkit%20ADM_userInterfaces/ADM_GTK/ADM_dialog%0A%09ADM_userInterfaces/ADM_GTK/ADM_gui2%0A%09ADM_userInterfaces/ADM_QT4/ADM_dialog%0A%09ADM_userInterfaces/ADM_commonUI&In-Reply-To=%3C200807161740.m6GHe2oJ021146%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001472.html">
   <LINK REL="Next"  HREF="001474.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Avidemux-svn-commit] r4225 - in	branches/avidemux_2.5_branch_gruntster/avidemux: .	ADM_audioEncoder/include ADM_audioEncoder/src ADM_audiocodec	ADM_audiodevice ADM_audiofilter ADM_coreAudio/include	ADM_toolkit ADM_userInterfaces/ADM_GTK/ADM_dialog	ADM_userInterfaces/ADM_GTK/ADM_gui2	ADM_userInterfaces/ADM_QT4/ADM_dialog	ADM_userInterfaces/ADM_commonUI</H1>
    <B>mean at BerliOS</B> 
    <A HREF="mailto:avidemux-svn-commit%40lists.berlios.de?Subject=Re%3A%20%5BAvidemux-svn-commit%5D%20r4225%20-%20in%0A%09branches/avidemux_2.5_branch_gruntster/avidemux%3A%20.%0A%09ADM_audioEncoder/include%20ADM_audioEncoder/src%20ADM_audiocodec%0A%09ADM_audiodevice%20ADM_audiofilter%20ADM_coreAudio/include%0A%09ADM_toolkit%20ADM_userInterfaces/ADM_GTK/ADM_dialog%0A%09ADM_userInterfaces/ADM_GTK/ADM_gui2%0A%09ADM_userInterfaces/ADM_QT4/ADM_dialog%0A%09ADM_userInterfaces/ADM_commonUI&In-Reply-To=%3C200807161740.m6GHe2oJ021146%40sheep.berlios.de%3E"
       TITLE="[Avidemux-svn-commit] r4225 - in	branches/avidemux_2.5_branch_gruntster/avidemux: .	ADM_audioEncoder/include ADM_audioEncoder/src ADM_audiocodec	ADM_audiodevice ADM_audiofilter ADM_coreAudio/include	ADM_toolkit ADM_userInterfaces/ADM_GTK/ADM_dialog	ADM_userInterfaces/ADM_GTK/ADM_gui2	ADM_userInterfaces/ADM_QT4/ADM_dialog	ADM_userInterfaces/ADM_commonUI">mean at mail.berlios.de
       </A><BR>
    <I>Wed Jul 16 19:40:02 CEST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="001472.html">[Avidemux-svn-commit] r4224 - in	branches/avidemux_2.5_branch_gruntster/avidemux:	ADM_audioEncoder/src ADM_audiofilter ADM_coreAudio/include	ADM_coreAudio/src ADM_userInterfaces/ADM_commonUI
</A></li>
        <LI>Next message: <A HREF="001474.html">[Avidemux-svn-commit] r4227 - in	branches/avidemux_2.5_branch_gruntster:	avidemux/ADM_audiofilter plugins/ADM_audioEncoders	plugins/ADM_audioEncoders/lame
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1473">[ date ]</a>
              <a href="thread.html#1473">[ thread ]</a>
              <a href="subject.html#1473">[ subject ]</a>
              <a href="author.html#1473">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: mean
Date: 2008-07-16 19:39:59 +0200 (Wed, 16 Jul 2008)
New Revision: 4225

Modified:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audioEncoder/include/audioencoder_config.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audioEncoder/include/audioencoder_enum.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audioEncoder/include/audioencoder_faac.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audioEncoder/include/audioencoder_lame.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audioEncoder/include/audioencoder_lavcodec.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audioEncoder/include/audioencoder_pcm.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audioEncoder/include/audioencoder_twolame.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audioEncoder/include/audioencoder_vorbis.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audioEncoder/src/audioencoder_faac.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audioEncoder/src/audioencoder_lame.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiocodec/ADM_audiocodeclist.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiodevice/ADM_audiodevice.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiofilter/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiofilter/audiodeng_buildfilters.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiofilter/audioeng_buildfilters.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiofilter/audiofilter_buildchain.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreAudio/include/audioencoder.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_toolkit/automation.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_acodec.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_bindings.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_none.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioconfig.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/avidemux/gui_autodrive.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/main.cpp
Log:
[AudioEncoder] Disabled old audio encoder scheme, it builds


Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audioEncoder/include/audioencoder_config.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audioEncoder/include/audioencoder_config.h	2008-07-16 17:39:56 UTC (rev 4224)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audioEncoder/include/audioencoder_config.h	2008-07-16 17:39:59 UTC (rev 4225)
@@ -1,6 +1,7 @@
 #ifndef AUDIOENCODER_CONFIG_H
 #define AUDIOENCODER_CONFIG_H
 
+#if 0
 #include &quot;audioencoder_faac_param.h&quot;
 #include &quot;audioencoder_lame_param.h&quot;
 #include &quot;audioencoder_twolame_param.h&quot;
@@ -178,3 +179,4 @@
 #endif
 //EOF
 
+#endif
\ No newline at end of file

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audioEncoder/include/audioencoder_enum.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audioEncoder/include/audioencoder_enum.h	2008-07-16 17:39:56 UTC (rev 4224)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audioEncoder/include/audioencoder_enum.h	2008-07-16 17:39:59 UTC (rev 4225)
@@ -5,7 +5,7 @@
 
 #ifndef audioencoder_enum_h
 #define audioencoder_enum_h
-
+#if 0
 typedef enum 
 {
 	AUDIOENC_NONE,
@@ -20,5 +20,5 @@
     AUDIOENC_AFTEN,
     AUDIOENC_DUMMY
 }AUDIOENCODER;
-
+#endif
 #endif
\ No newline at end of file

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audioEncoder/include/audioencoder_faac.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audioEncoder/include/audioencoder_faac.h	2008-07-16 17:39:56 UTC (rev 4224)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audioEncoder/include/audioencoder_faac.h	2008-07-16 17:39:59 UTC (rev 4225)
@@ -22,7 +22,7 @@
          void           *_handle;
          uint8_t        refillBuffer(int minimum);
 public:
-                        uint8_t init(ADM_audioEncoderDescriptor *config);
+//                        uint8_t init(ADM_audioEncoderDescriptor *config);
                 virtual ~AUDMEncoder_Faac();
                         AUDMEncoder_Faac(AUDMAudioFilter *instream);	
                 virtual uint8_t	getPacket(uint8_t *dest, uint32_t *len, uint32_t *samples);

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audioEncoder/include/audioencoder_lame.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audioEncoder/include/audioencoder_lame.h	2008-07-16 17:39:56 UTC (rev 4224)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audioEncoder/include/audioencoder_lame.h	2008-07-16 17:39:59 UTC (rev 4225)
@@ -24,7 +24,7 @@
     ADM_LAME_PRESET   _preset;
          
   public:
-            uint8_t     init(ADM_audioEncoderDescriptor *config);
+//            uint8_t     init(ADM_audioEncoderDescriptor *config);
     virtual             ~AUDMEncoder_Lame();
                         AUDMEncoder_Lame(AUDMAudioFilter *instream);	
             uint8_t	isVBR(void );

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audioEncoder/include/audioencoder_lavcodec.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audioEncoder/include/audioencoder_lavcodec.h	2008-07-16 17:39:56 UTC (rev 4224)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audioEncoder/include/audioencoder_lavcodec.h	2008-07-16 17:39:59 UTC (rev 4225)
@@ -23,7 +23,7 @@
     uint32_t          _fourcc;
          
   public:
-            uint8_t     init(ADM_audioEncoderDescriptor *config);
+//            uint8_t     init(ADM_audioEncoderDescriptor *config);
    virtual             ~AUDMEncoder_Lavcodec();
                         AUDMEncoder_Lavcodec(uint32_t fourcc,AUDMAudioFilter *instream);	
    virtual uint8_t	getPacket(uint8_t *dest, uint32_t *len, uint32_t *samples);

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audioEncoder/include/audioencoder_pcm.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audioEncoder/include/audioencoder_pcm.h	2008-07-16 17:39:56 UTC (rev 4224)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audioEncoder/include/audioencoder_pcm.h	2008-07-16 17:39:59 UTC (rev 4225)
@@ -24,7 +24,7 @@
     uint32_t            revert;
          
   public:
-            uint8_t     init(ADM_audioEncoderDescriptor *config);
+//            uint8_t     init(ADM_audioEncoderDescriptor *config);
             virtual     ~AUDMEncoder_PCM();
                         /*! \param reverted : Should the endianness be reverted compared to system  
                             \param fourCC   : FourCC to use (WAV_PCM/WAV_LPCM)

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audioEncoder/include/audioencoder_twolame.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audioEncoder/include/audioencoder_twolame.h	2008-07-16 17:39:56 UTC (rev 4224)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audioEncoder/include/audioencoder_twolame.h	2008-07-16 17:39:59 UTC (rev 4225)
@@ -21,7 +21,7 @@
     void           *_twolameOptions;
          
   public:
-            uint8_t     init(ADM_audioEncoderDescriptor *config);
+//            uint8_t     init(ADM_audioEncoderDescriptor *config);
     virtual             ~AUDMEncoder_Twolame();
                         AUDMEncoder_Twolame(AUDMAudioFilter *instream);	
     virtual uint8_t	getPacket(uint8_t *dest, uint32_t *len, uint32_t *samples);

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audioEncoder/include/audioencoder_vorbis.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audioEncoder/include/audioencoder_vorbis.h	2008-07-16 17:39:56 UTC (rev 4224)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audioEncoder/include/audioencoder_vorbis.h	2008-07-16 17:39:59 UTC (rev 4225)
@@ -25,7 +25,7 @@
 
          
   public:
-            uint8_t     init(ADM_audioEncoderDescriptor *config);
+//            uint8_t     init(ADM_audioEncoderDescriptor *config);
             virtual     ~AUDMEncoder_Vorbis();
                         AUDMEncoder_Vorbis(AUDMAudioFilter *instream);	
             

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audioEncoder/src/audioencoder_faac.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audioEncoder/src/audioencoder_faac.cpp	2008-07-16 17:39:56 UTC (rev 4224)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audioEncoder/src/audioencoder_faac.cpp	2008-07-16 17:39:59 UTC (rev 4225)
@@ -73,6 +73,7 @@
 // return 0 : init failed
 //                              1 : init succeeded
 //_______________________________________________
+#if 0
 uint8_t AUDMEncoder_Faac::init(ADM_audioEncoderDescriptor *config)
 {
 unsigned long int samples_input, max_bytes_output;
@@ -142,7 +143,7 @@
     
     return 1;
 }
-
+#endif
 //_____________________________________________
 //  Need to multiply the float by 32767, can't use
 //  generic fill buffer

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audioEncoder/src/audioencoder_lame.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audioEncoder/src/audioencoder_lame.cpp	2008-07-16 17:39:56 UTC (rev 4224)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audioEncoder/src/audioencoder_lame.cpp	2008-07-16 17:39:59 UTC (rev 4225)
@@ -52,6 +52,7 @@
 // return 0 : init failed
 //                              1 : init succeeded
 //_______________________________________________
+
 uint8_t AUDMEncoder_Lame::init(ADM_audioEncoderDescriptor *config)
 {
   int ret;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiocodec/ADM_audiocodeclist.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiocodec/ADM_audiocodeclist.h	2008-07-16 17:39:56 UTC (rev 4224)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiocodec/ADM_audiocodeclist.h	2008-07-16 17:39:59 UTC (rev 4225)
@@ -1,6 +1,7 @@
 
 #ifndef CODECA_LIST
 #define CODECA_LIST
+#if 0
 typedef struct {
         const char *name;
         const char *menuName;
@@ -30,3 +31,4 @@
                 {&quot;lpcm&quot;, &quot;WAV LPCM&quot;,AUDIOENC_LPCM,WAV_LPCM}
 };
 #endif
+#endif

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiodevice/ADM_audiodevice.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiodevice/ADM_audiodevice.cpp	2008-07-16 17:39:56 UTC (rev 4224)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiodevice/ADM_audiodevice.cpp	2008-07-16 17:39:59 UTC (rev 4225)
@@ -20,7 +20,7 @@
 #include &quot;audio_out.h&quot;
 #include &quot;ADM_audioDeviceInternal.h&quot;
 #include &quot;prefs.h&quot;
-
+#include &quot;ADM_dynamicLoading.h&quot;
 std::vector &lt;ADM_AudioDevices *&gt; ListOfAudioDevices;
 
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiofilter/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiofilter/CMakeLists.txt	2008-07-16 17:39:56 UTC (rev 4224)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiofilter/CMakeLists.txt	2008-07-16 17:39:59 UTC (rev 4225)
@@ -12,6 +12,7 @@
         audiolib_sox.cpp
 	audioeng_buff.cpp          
         audio_encoderWrapper.cpp
+        audio_encoderPlugin.cpp
 )
 	
 ADD_ADM_LIB_ALL_TARGETS(ADM_audiofilter ${ADMaudiofilter_SRCS})

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiofilter/audiodeng_buildfilters.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiofilter/audiodeng_buildfilters.cpp	2008-07-16 17:39:56 UTC (rev 4224)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiofilter/audiodeng_buildfilters.cpp	2008-07-16 17:39:59 UTC (rev 4225)
@@ -89,7 +89,7 @@
 
 extern void UI_PrintCurrentACodec( const char *s);
 
-AUDIOENCODER  activeAudioEncoder=  AUDIOENC_COPY;
+
 /*----------------------------------*/
 GAINparam audioGain;
 int  audioFreq=48000;
@@ -190,23 +190,8 @@
 //
 
 
-void audioCodecChanged(int newcodec)
-{
-      ADM_assert(newcodec&lt;sizeof(myCodecList) /sizeof(CODECLIST));
-      activeAudioEncoder=myCodecList[newcodec].codec;
 
-}
 
-uint32_t audioFilterGetNbEncoder(void)
-{
-	return sizeof(myCodecList) /sizeof(CODECLIST);
-}
-const char* audioFilterGetIndexedName(uint32_t i)
-{
- 	ADM_assert(i&lt;sizeof(myCodecList) /sizeof(CODECLIST));
-	return myCodecList[i].menuName;
-}
-
 void audioFilterNormalizeMode(uint8_t onoff)
 {
   audioGain.mode=(ADM_GAINMode)onoff;
@@ -288,36 +273,7 @@
 
 */
 
-uint8_t audioCodecSetByName( const char *name)
-{
-		for(uint32_t i=0;i&lt;sizeof(myCodecList)/sizeof(CODECLIST);i++)
-		{
-			if(!strcasecmp(name,myCodecList[i].name))
-			{
-
-				audioCodecSetcodec(myCodecList[i].codec);
-				return 1;
-			}
-
-		}
-		printf(&quot;\n Mmmm Select audio codec by name failed...(%s).\n&quot;,name);
-		return 0;
-}
-AudioSource audioCodecGetFromName( const char *name)
-{
-                for(uint32_t i=0;i&lt;sizeof(myCodecList)/sizeof(CODECLIST);i++)
-                {
-                        if(!strcasecmp(name,Sources[i].name))
-                        {
-
-                                return Sources[i].type;
-                        }
-
-                }
-                printf(&quot;\n Mmmm Select audio codec by name failed...(%s).\n&quot;,name);
-                return AudioNone;
-}
-	#define Read(x) { \
+#define Read(x) { \
 		tmp=name; \
 		if((tmp=strstr(name,#x))) \
 			{ \
@@ -329,21 +285,7 @@
 			{ printf(&quot;*** %s not found !***\n&quot;,#x);} \
 		}
 #define Add(x) {sprintf(tmp,&quot;%s=%d &quot;,#x,x);strcat(conf,tmp);}
-
-
-const char *audioCodecGetName( void )
-{
-	for(uint32_t i=0;i&lt;sizeof(myCodecList)/sizeof(CODECLIST);i++)
-	{
-		if(activeAudioEncoder==myCodecList[i].codec)
-		{
-			return myCodecList[i].name;
-		}
-
-	}
-	printf(&quot;\n Mmmm get audio  codec  name failed..\n&quot;);
-	return NULL;
-}
+	
 uint8_t audioFilterSetByName( const char *name)
 {
 	const char *tmp;
@@ -378,39 +320,8 @@
 	return conf;
 
 }
-void audioPrintCurrentCodec(void)
-{
+ 
 
-	for(uint32_t i=0;i&lt;sizeof(myCodecList)/sizeof(CODECLIST);i++)
-	{
-		if(activeAudioEncoder==myCodecList[i].codec)
-		{
-			UI_setAudioCodec(i);
-			return;
-		}
-	
-	}
-	ADM_assert(0);
-}
- void audioCodecSetcodec(AUDIOENCODER codec)
-{
-
-	activeAudioEncoder=codec;
-	audioPrintCurrentCodec();
-
-}
-void audioCodecSelect( void )
-{
-	DIA_audioCodec( &amp;activeAudioEncoder );
-	audioPrintCurrentCodec();
-
-
-}
-uint32_t audioProcessMode(void)
-{
-        if(activeAudioEncoder==AUDIOENC_COPY) return 0;
-        return 1;
-}
 /*
 	Refresh   activeAudioEncoder value
 	depending on what's selected
@@ -426,33 +337,35 @@
 	audioFreq=fq;
 }
 /**
- * 	\fn getAudioOuputTag
- *  \brief Return the encoding of the currently selected codec
- *  Must be called only in process mode, else it is meaningless.
- */
-uint32_t audioFilter_getOuputCodec(void)
-{
-	
-	for(uint32_t i=0;i&lt;sizeof(myCodecList)/sizeof(CODECLIST);i++)
-		{
-			if(activeAudioEncoder==myCodecList[i].codec)
-			{
-				return myCodecList[i].wavTag;
-			}
-		
-		}
-	ADM_assert(0);
-	return WAV_PCM;
-}
-/**
  * 	\fn getAudioOuputFrequency
  *  \brief Return the encoding of the currently selected codec
  */
+uint32_t audioProcessMode(void);
 uint32_t audioFilter_getOuputFrequency(uint32_t inputFrequency)
 {
-	if(activeAudioEncoder==AUDIOENC_COPY) return inputFrequency;
+	if(!audioProcessMode()) return inputFrequency;
 	if(audioResampleMode == RESAMPLING_NONE) return inputFrequency;
 	return audioFreq;
 }
+/**
+    \fn audioCodecGetName
+    \brief Returns the current codec tagname
+*/
+
+AudioSource audioCodecGetFromName( const char *name)
+{
+                for(uint32_t i=0;i&lt;sizeof(Sources)/sizeof(externalSource);i++)
+                {
+                        if(!strcasecmp(name,Sources[i].name))
+                        {
+
+                                return Sources[i].type;
+                        }
+
+                }
+                printf(&quot;\n Mmmm Select audio codec by name failed...(%s).\n&quot;,name);
+                return AudioNone;
+}
+
 //EOF
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiofilter/audioeng_buildfilters.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiofilter/audioeng_buildfilters.h	2008-07-16 17:39:56 UTC (rev 4224)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiofilter/audioeng_buildfilters.h	2008-07-16 17:39:59 UTC (rev 4225)
@@ -35,6 +35,7 @@
 void audioFilter_MP3DisableReservoir(int onoff);
 uint32_t audioFilter_getOuputCodec(void);
 uint32_t audioFilter_getOuputFrequency(uint32_t inputFrequency);
+uint32_t audioFilter_getMaxChannels(void);
 
 #include &quot;ADM_audioEncoder/include/audioencoder_enum.h&quot;
 
@@ -109,5 +110,6 @@
 uint8_t getAudioExtraConf(uint32_t *bitrate,uint32_t *extraDataSize, uint8_t **extradata);
 uint8_t setAudioExtraConf(uint32_t bitrate,uint32_t extraDataSize, uint8_t *extradata);
 //
+AUDMEncoder *audioEncoderCreate(AUDMAudioFilter *filter);
 #endif
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiofilter/audiofilter_buildchain.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiofilter/audiofilter_buildchain.cpp	2008-07-16 17:39:56 UTC (rev 4224)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiofilter/audiofilter_buildchain.cpp	2008-07-16 17:39:59 UTC (rev 4225)
@@ -111,8 +111,8 @@
   -12.0 ,//double   mThresholdDB;
 };
 
-static ADM_audioEncoderDescriptor *getAudioDescriptor( AUDIOENCODER encoder);
 
+
 //
 // Build audio filters
 // Starttime : starttime in ms
@@ -300,111 +300,26 @@
 
 //_______________________________________________________
   uint8_t init;
-  ADM_audioEncoderDescriptor *descriptor=getAudioDescriptor( activeAudioEncoder);
   
   if(!lastFilter)
   {
     printf(&quot; buildInternalAudioFilter failed\n&quot;);
     return 0;
   }
-  if(lastFilter-&gt;getInfo()-&gt;channels &gt; descriptor-&gt;maxChannels)
+  if(lastFilter-&gt;getInfo()-&gt;channels &gt; audioFilter_getMaxChannels())
   {
     GUI_Error_HIG(QT_TR_NOOP(&quot;Codec Error&quot;),QT_TR_NOOP(&quot;The number of channels is greater than what the selected audio codec can do.\n&quot;
         &quot;Either change codec or use the mixer filter to have less channels.&quot;));
     deleteAudioFilter(NULL);
     return 0; 
   }
-  switch(activeAudioEncoder)
-  {
 
-                  case AUDIOENC_LPCM:
-                  case AUDIOENC_NONE:
-                  {
-                    AUDMEncoder_PCM *pcm;
-                    uint32_t fourcc,revert=0;
-                    
-                    if(activeAudioEncoder==AUDIOENC_LPCM) fourcc=WAV_LPCM;
-                    else          fourcc=WAV_PCM;
-                    
-#ifdef ADM_BIG_ENDIAN                    
-                    if(fourcc==WAV_PCM)
-#else
-                    if(fourcc==WAV_LPCM)
-#endif
-                        revert=1;
-                    pcm = new AUDMEncoder_PCM(revert,fourcc,lastFilter);
-                    tmpfilter=pcm;
-                  }
-                  break;
-#ifdef USE_VORBIS
-             case AUDIOENC_VORBIS:
-                {
-                  AUDMEncoder_Vorbis *vorbis;
-                  vorbis = new AUDMEncoder_Vorbis(lastFilter);
-                  tmpfilter=vorbis;
-                  break;
-                }
-#endif		
-#ifdef USE_AFTEN
-              case AUDIOENC_AFTEN:
-                {
-                  AUDMEncoder_Aften *aften;
-                  aften = new AUDMEncoder_Aften(lastFilter);
-                  tmpfilter=aften;
-                }
-                break;
-#endif
-#ifdef USE_FAAC
-    case AUDIOENC_FAAC:
-                  {
-                      AUDMEncoder_Faac *faac;
-                          faac = new AUDMEncoder_Faac(lastFilter);
-                          tmpfilter=faac;
-                  }
-                  break;
-#endif		
-
-#ifdef HAVE_LIBMP3LAME
-    case AUDIOENC_MP3:
-              {
-                AUDMEncoder_Lame *plame = NULL;
-
-                            plame = new AUDMEncoder_Lame(lastFilter);
-                            tmpfilter=plame;
-                }
-              break;
-#endif
-    case AUDIOENC_AC3:
-    case AUDIOENC_MP2:
-                    {
-                      AUDMEncoder_Lavcodec *lavcodec = NULL;
-                      uint32_t fourc;
-                      
-                      if(activeAudioEncoder==AUDIOENC_AC3) fourc=WAV_AC3;
-                      else fourc=WAV_MP2;
-                    
-                      lavcodec = new AUDMEncoder_Lavcodec(fourc,lastFilter);
-                      tmpfilter=lavcodec;
-                    }
-              break;
-    case  AUDIOENC_2LAME:
-              {
-                  AUDMEncoder_Twolame *toolame_enc = NULL;
-                          toolame_enc = new AUDMEncoder_Twolame(lastFilter);
-                          tmpfilter=toolame_enc;
-              }
-    	  break;
-
-    default:
-      ADM_assert(0);
-  }
-//_______________________________________________________
-
-  if(!tmpfilter-&gt;init(descriptor))
+  tmpfilter=audioEncoderCreate(lastFilter);
+  if(!tmpfilter || !tmpfilter-&gt;initialize())
   {
-    delete tmpfilter;
+    if(tmpfilter) delete tmpfilter;
     tmpfilter=NULL;
-    GUI_Error_HIG(QT_TR_NOOP(&quot;Encoder initialization failed&quot;), QT_TR_NOOP(&quot;Not activated.&quot;));
+    GUI_Error_HIG(QT_TR_NOOP(&quot;[BuildChain] Encoder initialization failed&quot;), QT_TR_NOOP(&quot;Not activated.&quot;));
   }
   ADM_audioEncoderWrapper *wrapper=new ADM_audioEncoderWrapper(tmpfilter);
   output=wrapper;
@@ -440,41 +355,33 @@
 */
 void audioFilter_MP3DisableReservoir(int onoff)
 {
+#if 0
       if(activeAudioEncoder!=AUDIOENC_MP3) return;
       ADM_audioEncoderDescriptor *desc=getAudioDescriptor( activeAudioEncoder);
       ADM_assert(desc);
       LAME_encoderParam *param=(LAME_encoderParam *)desc-&gt;param;
       ADM_assert(param);
       param-&gt;disableReservoir=onoff;
-  
+#endif
 }
 
 /**********************************************/
-ADM_audioEncoderDescriptor *getAudioDescriptor( AUDIOENCODER encoder)
-{
-  for(int i=0;i&lt;NB_AUDIO_DESCRIPTOR;i++)
-  {
-    if(allDescriptors[i]-&gt;encoder==encoder)
-    {
-      return    allDescriptors[i];
-    }
-  }
-  ADM_assert(0);
-  return NULL;
-}
 
 uint8_t getAudioExtraConf(uint32_t *bitrate,uint32_t *extraDataSize, uint8_t **extradata)
 {
-  ADM_audioEncoderDescriptor *descriptor=getAudioDescriptor(activeAudioEncoder);
-  
+#define FIXME_ZAZA
+#if 0  
   *bitrate=descriptor-&gt;bitrate;
   *extraDataSize=descriptor-&gt;paramSize;
   *extradata=(uint8_t *)descriptor-&gt;param;
+#endif
   return 1;
   
 }
 uint8_t setAudioExtraConf(uint32_t bitrate,uint32_t extraDataSize, uint8_t *extradata)
 {
+#define FIXME_ZAZA
+#if 0
   ADM_audioEncoderDescriptor *descriptor=getAudioDescriptor(activeAudioEncoder);
   if(extraDataSize!=descriptor-&gt;paramSize)
   {
@@ -484,27 +391,11 @@
   printf(&quot;Valid descriptor found for audio codec\n&quot;);
   descriptor-&gt;bitrate=bitrate;
   memcpy(descriptor-&gt;param,extradata,extraDataSize);
+#endif
   return 1;
   
 }
 
-void audioCodecConfigure( void )
-{
-  ADM_audioEncoderDescriptor *descriptor=getAudioDescriptor(activeAudioEncoder);
-  if(descriptor-&gt;configure)
-  {
-    descriptor-&gt;configure(descriptor); 
-  }
-}
-uint32_t audioGetBitrate(void)
-{
-  ADM_audioEncoderDescriptor *descriptor=getAudioDescriptor(activeAudioEncoder);
-  return descriptor-&gt;bitrate;
-} 
-void audioFilter_SetBitrate( int i)
-{
-  ADM_audioEncoderDescriptor *descriptor=getAudioDescriptor(activeAudioEncoder);
-  descriptor-&gt;bitrate=i;
-}
 
 
+

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreAudio/include/audioencoder.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreAudio/include/audioencoder.h	2008-07-16 17:39:56 UTC (rev 4224)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreAudio/include/audioencoder.h	2008-07-16 17:39:59 UTC (rev 4225)
@@ -16,7 +16,31 @@
   \param param : An opaque structure that contains the codec specific configuration datas
 */
 #include &quot;ADM_coreAudio.h&quot;
-#include &quot;ADM_audioEncoder/include/audioencoder_enum.h&quot;
+
+#define ADM_AUDIO_ENCODER_API_VERSION 1
+
+#define AUDIOENC_COPY 0
+
+class AUDMEncoder;
+typedef struct
+{
+    AUDMEncoder *(*create)(WAVHeader *head);  
+    void         (*destroy)(AUDMEncoder *codec);
+    int          (*configure)(void);    
+    uint32_t     bitrate;           // Can be changed
+    const char   *codecName;        // Internal name (tag)
+    const char   *menuName;         // Displayed name (in menu)
+    const char   *description;
+    uint32_t     maxChannels;       // Const
+    uint32_t     major,minor,patch;     // Const
+    uint32_t     apiVersion;            // const
+    uint32_t     wavTag;                // const Avi fourcc
+    uint32_t     priority;              // const Higher means the codec is prefered and should appear first in the list
+    void         *opaque;
+}ADM_audioEncoder;
+
+typedef int AUDIOENCODER;
+/*
 typedef struct ADM_audioEncoderDescriptor
 {
   AUDIOENCODER encoder;
@@ -27,7 +51,7 @@
   uint32_t  paramSize;
   void     *param;
 } ADM_audioEncoderDescriptor;
-
+*/
 /*!
   Base class for all audio encoder.It does the reverse of the bridge class and offers a proper GenericAudioStreamAPI
 
@@ -68,7 +92,8 @@
     //
     virtual ~AUDMEncoder();
     AUDMEncoder(AUDMAudioFilter *in);	
-    virtual uint8_t init(ADM_audioEncoderDescriptor *config)=0;
+
+    virtual uint8_t initialize(void)=0;
     virtual uint8_t getPacket(uint8_t *dest, uint32_t *len, uint32_t *samples)=0;
     virtual uint8_t packetPerFrame( void) {return 1;}
     virtual uint8_t extraData(uint32_t *l,uint8_t **d) {*l=_extraSize;*d=_extraData;return 1;}

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_toolkit/automation.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_toolkit/automation.cpp	2008-07-16 17:39:56 UTC (rev 4224)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_toolkit/automation.cpp	2008-07-16 17:39:59 UTC (rev 4225)
@@ -385,6 +385,8 @@
 }
 void call_audiocodec(char *p)
 {
+#define FIXME_ZAZA
+#if 0
 	if(!strcasecmp(p,&quot;MP2&quot;))
 		audioCodecSetcodec( AUDIOENC_MP2 );
 	else if(!strcasecmp(p,&quot;AC3&quot;))
@@ -407,6 +409,7 @@
 		audioCodecSetcodec( AUDIOENC_NONE );
 		fprintf(stderr,&quot;audio codec \&quot;%s\&quot; unknown.\n&quot;,p);
 	}
+#endif
 }
 void call_probePat(char *p)
 {

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_acodec.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_acodec.cpp	2008-07-16 17:39:56 UTC (rev 4224)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_acodec.cpp	2008-07-16 17:39:59 UTC (rev 4225)
@@ -51,7 +51,7 @@
 										-1);
 	gtk_register_dialog(dialog);
 
-	
+#if FIXME_ZAZA	
 	// now set the input one
 	for(uint32_t i=0;i&lt;sizeof(myCodecList)/sizeof(CODECLIST);i++)
 		if(*codec==myCodecList[i].codec)
@@ -70,6 +70,7 @@
 	{
 		*codec=old;
 	}
+#endif
         gtk_unregister_dialog(dialog);
 	gtk_widget_destroy(dialog);
 	
@@ -78,11 +79,13 @@
 
 AUDIOENCODER findCodec( void )
 {
+#ifdef FIXME_ZAZA
 uint8_t j;
 			j=getRangeInMenu(lookup_widget(dialog,&quot;optionmenu_CodecList&quot;));
 		
 			if(j&gt;=sizeof(myCodecList)/sizeof(CODECLIST)) ADM_assert(0);
 			return myCodecList[j].codec;
+ #endif
 			
 
 }
@@ -133,12 +136,14 @@
   menu1 = gtk_menu_new ();
 
  /***************/
+#if FIXME_ZAZA
         for(int i=0;i&lt;sizeof(myCodecList)/sizeof(CODECLIST);i++)
         {
                 acodec[i]=gtk_menu_item_new_with_mnemonic(myCodecList[i].menuName);
                 gtk_widget_show(acodec[i]);
                 gtk_container_add(GTK_CONTAINER(menu1),acodec[i]);
         }  
+#endif
  /***************/ 
   gtk_option_menu_set_menu (GTK_OPTION_MENU (optionmenu_CodecList), menu1);
 
@@ -167,11 +172,12 @@
   GLADE_HOOKUP_OBJECT (dialogAudioCodec, optionmenu_CodecList, &quot;optionmenu_CodecList&quot;);
   GLADE_HOOKUP_OBJECT (dialogAudioCodec, menu1, &quot;menu1&quot;);
 /****/
+#if FIXME_ZAZA
    for(int i=0;i&lt;sizeof(myCodecList)/sizeof(CODECLIST);i++)
         {
                 GLADE_HOOKUP_OBJECT (dialogAudioCodec, acodec[i],myCodecList[i].name );
         }
-
+#endif
 /****/
   GLADE_HOOKUP_OBJECT (dialogAudioCodec, buttonConfigure, &quot;buttonConfigure&quot;);
   GLADE_HOOKUP_OBJECT_NO_REF (dialogAudioCodec, dialog_action_area1, &quot;dialog_action_area1&quot;);

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_bindings.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_bindings.cpp	2008-07-16 17:39:56 UTC (rev 4224)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_bindings.cpp	2008-07-16 17:39:59 UTC (rev 4225)
@@ -515,7 +515,7 @@
                         gtk_combo_box_append_text      (combo_box,QT_TR_NOOP(name));	
                 }
         gtk_combo_box_set_active(combo_box,0);
-	on_audio_change();
+// FIXME_ZAZA	on_audio_change();
         /*   Fill in output format window */
         uint32_t nbFormat;
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_none.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_none.cpp	2008-07-16 17:39:56 UTC (rev 4224)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_none.cpp	2008-07-16 17:39:59 UTC (rev 4225)
@@ -34,7 +34,7 @@
 
 
 uint8_t DIA_videoCodec(int *codecIndex) {return 0;}
-uint8_t DIA_audioCodec( AUDIOENCODER *codec ) {return 0;}
+//uint8_t DIA_audioCodec( AUDIOENCODER *codec ) {return 0;}
 uint8_t DIA_quota(char *) {return 0;}
 uint8_t DIA_RecentFiles( char **name ){return 0;}
 uint8_t initGUI( void ) {return 1;}

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioconfig.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioconfig.cpp	2008-07-16 17:39:56 UTC (rev 4224)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioconfig.cpp	2008-07-16 17:39:59 UTC (rev 4225)
@@ -26,8 +26,10 @@
       @return 1 on success, 0 on failure
 
 */
+#if FIXME_ZAZA
 int DIA_defaultSettings(ADM_audioEncoderDescriptor *descriptor)
   {
+
     int ret=0;
     char string[400];
     uint32_t mmode,ppreset;
@@ -51,6 +53,8 @@
     
   return ( diaFactoryRun(QT_TR_NOOP(&quot;Audio Configuration&quot;),1,elems));
 
+    return 0;
 } 
+#endif
 //EOF 
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/CMakeLists.txt	2008-07-16 17:39:56 UTC (rev 4224)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/CMakeLists.txt	2008-07-16 17:39:59 UTC (rev 4225)
@@ -152,7 +152,7 @@
 ########################################
 SET(ADM_SUBDIR 
 	ADM_audiofilter
-	ADM_audioEncoder
+	#ADM_audioEncoder
 	ADM_editor
 	ADM_audiocodec
 	ADM_audio
@@ -321,7 +321,7 @@
 ADD_LIB_ALL_TARGETS(ADM_coreAudio)
 
 # To be removed
-ADD_SUBDIRECTORY(ADM_audioEncoder)
+#ADD_SUBDIRECTORY(ADM_audioEncoder)
 
 ###########################################
 # External libs

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/gui_autodrive.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/gui_autodrive.cpp	2008-07-16 17:39:56 UTC (rev 4224)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/gui_autodrive.cpp	2008-07-16 17:39:59 UTC (rev 4225)
@@ -99,7 +99,7 @@
         						}
         				else
         				{
-#ifdef HAVE_LIBMP3LAME
+#ifdef FIXME_ZAZA //HAVE_LIBMP3LAME
         					audioCodecSetcodec(AUDIOENC_MP3);
         					audioFilter_SetBitrate(128);
                                                 audioFilter_MP3DisableReservoir(1);
@@ -180,7 +180,7 @@
                     }
                     else
                     {
-#ifdef USE_FAAC
+#if FIXME_ZAZA //def USE_FAAC
                           audioCodecSetcodec(AUDIOENC_FAAC);
 #else
                           GUI_Error_HIG(QT_TR_NOOP(&quot;Codec Error&quot;),
@@ -210,7 +210,7 @@
                                 }
                                 else
                                 {
-                                        audioCodecSetcodec(AUDIOENC_2LAME);
+                                 // FIXME_ZAZA       audioCodecSetcodec(AUDIOENC_2LAME);
                                         if(currentaudiostream-&gt;getInfo()-&gt;frequency!=44100)
                                         {
                                                 audioFilterResample(44100);
@@ -240,7 +240,7 @@
                                 }
                                 else
                                 {
-                                        audioCodecSetcodec(AUDIOENC_2LAME);
+                                       // FIXME_ZAZA audioCodecSetcodec(AUDIOENC_2LAME);
                                         if(currentaudiostream-&gt;getInfo()-&gt;frequency!=44100)
                                         {
                                                 audioFilterResample(44100);
@@ -269,7 +269,7 @@
                                         || (currentaudiostream-&gt;getInfo()-&gt;encoding!=WAV_MP2 &amp;&amp;
                                          currentaudiostream-&gt;getInfo()-&gt;encoding!=WAV_AC3))
                                 {
-                                        audioCodecSetcodec(AUDIOENC_2LAME);
+                                       // FIXME_ZAZA audioCodecSetcodec(AUDIOENC_2LAME);
                                         audioFilterResample(48000);
                                         audioFilter_SetBitrate(160);
                                         if(currentaudiostream-&gt;getInfo()-&gt;channels!=2)

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/main.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/main.cpp	2008-07-16 17:39:56 UTC (rev 4224)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/main.cpp	2008-07-16 17:39:59 UTC (rev 4225)
@@ -72,6 +72,7 @@
 extern uint8_t ADM_ad_loadPlugins(const char *path);
 extern uint8_t ADM_vf_loadPlugins(const char *path);
 extern uint8_t ADM_av_loadPlugins(const char *path);
+extern uint8_t ADM_ae_loadPlugins(const char *path);
 extern void loadPlugins(void);
 extern void InitFactory(void);
 extern void InitCoreToolkit(void);
@@ -232,6 +233,7 @@
 	char *adPlugins = ADM_getInstallRelativePath(startDir,&quot;ADM_plugins&quot;,&quot;audioDecoder&quot;);
 	char *vfPlugins = ADM_getInstallRelativePath(startDir,&quot;ADM_plugins&quot;,&quot;videoFilter&quot;);
     char *avPlugins = ADM_getInstallRelativePath(startDir,&quot;ADM_plugins&quot;,&quot;audioDevices&quot;);    
+    char *aePlugins = ADM_getInstallRelativePath(startDir,&quot;ADM_plugins&quot;,&quot;audioEncoders&quot;);    
 
 
 	ADM_ad_loadPlugins(adPlugins);
@@ -243,6 +245,9 @@
     ADM_av_loadPlugins(avPlugins);
     delete [] avPlugins;
 
+    ADM_ae_loadPlugins(aePlugins);
+    delete [] aePlugins;
+
 	// load local audio decoder plugins
 	adPlugins=ADM_getHomeRelativePath(&quot;plugins&quot;,&quot;audioDecoder&quot;);
 	ADM_ad_loadPlugins(adPlugins);


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001472.html">[Avidemux-svn-commit] r4224 - in	branches/avidemux_2.5_branch_gruntster/avidemux:	ADM_audioEncoder/src ADM_audiofilter ADM_coreAudio/include	ADM_coreAudio/src ADM_userInterfaces/ADM_commonUI
</A></li>
	<LI>Next message: <A HREF="001474.html">[Avidemux-svn-commit] r4227 - in	branches/avidemux_2.5_branch_gruntster:	avidemux/ADM_audiofilter plugins/ADM_audioEncoders	plugins/ADM_audioEncoders/lame
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1473">[ date ]</a>
              <a href="thread.html#1473">[ thread ]</a>
              <a href="subject.html#1473">[ subject ]</a>
              <a href="author.html#1473">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">More information about the Avidemux-svn-commit
mailing list</a><br>
</body></html>
