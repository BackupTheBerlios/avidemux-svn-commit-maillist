<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Avidemux-svn-commit] r6082 - in	branches/avidemux_2.5_branch_gruntster:	avidemux/ADM_coreUI/include avidemux/ADM_coreUI/src	plugins/ADM_videoEncoder/ADM_vidEnc_avcodec	plugins/ADM_videoEncoder/ADM_vidEnc_mpeg2enc	plugins/ADM_videoEncoder/ADM_vidEnc_mpeg2enc/mpeg2enc	plugins/ADM_videoEncoder/ADM_vidEnc_x264	plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk	plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4	plugins/ADM_videoEncoder/ADM_vidEnc_xvid	plugins/ADM_videoEncoder/ADM_vidEnc_xvid/gtk	plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4	plugins/ADM_videoEncoder/common/pluginOptions	plugins/ADM_videoEncoder/common/xvidRateCtl
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/avidemux-svn-commit/2010-April/index.html" >
   <LINK REL="made" HREF="mailto:avidemux-svn-commit%40lists.berlios.de?Subject=Re%3A%20%5BAvidemux-svn-commit%5D%20r6082%20-%20in%0A%09branches/avidemux_2.5_branch_gruntster%3A%0A%09avidemux/ADM_coreUI/include%20avidemux/ADM_coreUI/src%0A%09plugins/ADM_videoEncoder/ADM_vidEnc_avcodec%0A%09plugins/ADM_videoEncoder/ADM_vidEnc_mpeg2enc%0A%09plugins/ADM_videoEncoder/ADM_vidEnc_mpeg2enc/mpeg2enc%0A%09plugins/ADM_videoEncoder/ADM_vidEnc_x264%0A%09plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk%0A%09plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4%0A%09plugins/ADM_videoEncoder/ADM_vidEnc_xvid%0A%09plugins/ADM_videoEncoder/ADM_vidEnc_xvid/gtk%0A%09plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4%0A%09plugins/ADM_videoEncoder/common/pluginOptions%0A%09plugins/ADM_videoEncoder/common/xvidRateCtl&In-Reply-To=%3C201004061923.o36JN1at012559%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003285.html">
   <LINK REL="Next"  HREF="003287.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Avidemux-svn-commit] r6082 - in	branches/avidemux_2.5_branch_gruntster:	avidemux/ADM_coreUI/include avidemux/ADM_coreUI/src	plugins/ADM_videoEncoder/ADM_vidEnc_avcodec	plugins/ADM_videoEncoder/ADM_vidEnc_mpeg2enc	plugins/ADM_videoEncoder/ADM_vidEnc_mpeg2enc/mpeg2enc	plugins/ADM_videoEncoder/ADM_vidEnc_x264	plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk	plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4	plugins/ADM_videoEncoder/ADM_vidEnc_xvid	plugins/ADM_videoEncoder/ADM_vidEnc_xvid/gtk	plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4	plugins/ADM_videoEncoder/common/pluginOptions	plugins/ADM_videoEncoder/common/xvidRateCtl</H1>
    <B>gruntster at mail.berlios.de</B> 
    <A HREF="mailto:avidemux-svn-commit%40lists.berlios.de?Subject=Re%3A%20%5BAvidemux-svn-commit%5D%20r6082%20-%20in%0A%09branches/avidemux_2.5_branch_gruntster%3A%0A%09avidemux/ADM_coreUI/include%20avidemux/ADM_coreUI/src%0A%09plugins/ADM_videoEncoder/ADM_vidEnc_avcodec%0A%09plugins/ADM_videoEncoder/ADM_vidEnc_mpeg2enc%0A%09plugins/ADM_videoEncoder/ADM_vidEnc_mpeg2enc/mpeg2enc%0A%09plugins/ADM_videoEncoder/ADM_vidEnc_x264%0A%09plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk%0A%09plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4%0A%09plugins/ADM_videoEncoder/ADM_vidEnc_xvid%0A%09plugins/ADM_videoEncoder/ADM_vidEnc_xvid/gtk%0A%09plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4%0A%09plugins/ADM_videoEncoder/common/pluginOptions%0A%09plugins/ADM_videoEncoder/common/xvidRateCtl&In-Reply-To=%3C201004061923.o36JN1at012559%40sheep.berlios.de%3E"
       TITLE="[Avidemux-svn-commit] r6082 - in	branches/avidemux_2.5_branch_gruntster:	avidemux/ADM_coreUI/include avidemux/ADM_coreUI/src	plugins/ADM_videoEncoder/ADM_vidEnc_avcodec	plugins/ADM_videoEncoder/ADM_vidEnc_mpeg2enc	plugins/ADM_videoEncoder/ADM_vidEnc_mpeg2enc/mpeg2enc	plugins/ADM_videoEncoder/ADM_vidEnc_x264	plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk	plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4	plugins/ADM_videoEncoder/ADM_vidEnc_xvid	plugins/ADM_videoEncoder/ADM_vidEnc_xvid/gtk	plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4	plugins/ADM_videoEncoder/common/pluginOptions	plugins/ADM_videoEncoder/common/xvidRateCtl">gruntster at mail.berlios.de
       </A><BR>
    <I>Tue Apr  6 21:23:01 CEST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="003285.html">[Avidemux-svn-commit] r6081 - in	branches/avidemux_2.5_branch_gruntster/avidemux: .	ADM_libraries/ADM_utilities ADM_userInterfaces/ADM_commonUI
</A></li>
        <LI>Next message: <A HREF="003287.html">[Avidemux-svn-commit] r6083 - in	branches/avidemux_2.5_branch_gruntster/platforms/windows:	build_scripts/avidemux installer
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3286">[ date ]</a>
              <a href="thread.html#3286">[ thread ]</a>
              <a href="subject.html#3286">[ subject ]</a>
              <a href="author.html#3286">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: gruntster
Date: 2010-04-06 21:22:30 +0200 (Tue, 06 Apr 2010)
New Revision: 6082

Modified:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/include/DIA_factory.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/src/DIA_factory.cpp
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/encoder.cpp
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/flv1Encoder.cpp
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/flv1EncoderOptions.cpp
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/h263Encoder.cpp
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/h263EncoderOptions.cpp
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/mjpegEncoder.cpp
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/mpeg1Encoder.cpp
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/mpeg1EncoderOptions.cpp
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/mpeg2Encoder.cpp
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/mpeg2EncoderOptions.cpp
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/mpeg4aspEncoder.cpp
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/mpeg4aspEncoderOptions.cpp
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_mpeg2enc/encoder.cpp
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_mpeg2enc/encoder.h
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_mpeg2enc/mpeg1Encoder.cpp
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_mpeg2enc/mpeg1Encoder.h
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_mpeg2enc/mpeg1Options.cpp
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_mpeg2enc/mpeg2Encoder.cpp
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_mpeg2enc/mpeg2Encoder.h
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_mpeg2enc/mpeg2Options.cpp
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_mpeg2enc/mpeg2enc/cpu_accel.cc
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_mpeg2enc/mpeg2enc/feedframe.cc
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_mpeg2enc/mpeg2enc/global.h
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_mpeg2enc/mpeg2enc/mpeg2enc.cc
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_mpeg2enc/mpeg2enc/mpeg2enc_if.cc
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_mpeg2enc/mpeg2enc/mpeg2setup.cc
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_mpeg2enc/mpeg2enc/putseq.cc
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_mpeg2enc/mpeg2enc/ratectl.cc
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_mpeg2enc/mpeg2enc/readpic.cc
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/encoder.cpp
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/encoder.h
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk/x264ConfigDialog.cpp
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk/x264ConfigDialog.h
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264CustomMatrixDialog.cpp
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ZoneTableDelegate.cpp
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ZoneTableModel.cpp
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_xvid/encoder.cpp
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_xvid/encoder.h
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_xvid/gtk/xvidConfigDialog.cpp
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_xvid/gtk/xvidConfigDialog.h
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidCustomMatrixDialog.cpp
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_xvid/xvidOptions.cpp
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/common/pluginOptions/PluginOptions.cpp
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/common/xvidRateCtl/xvidRateCtl.cpp
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/common/xvidRateCtl/xvidRateCtlVbv.cpp
Log:
[vidEnc] clean up source code of various video encoder plugins

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/include/DIA_factory.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/include/DIA_factory.h	2010-04-06 18:40:22 UTC (rev 6081)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/include/DIA_factory.h	2010-04-06 19:22:30 UTC (rev 6082)
@@ -140,7 +140,7 @@
 public:
 	                diaElemSliderBase() : diaElem(ELEM_SLIDER) {}
   virtual           ~diaElemSliderBase() {};
-  virtual uint8_t   setDigits(uint32_t digits) { this-&gt;digits = digits; }
+  virtual void   setDigits(uint32_t digits) { this-&gt;digits = digits; }
 };
 
 typedef diaElem *CREATE_USLIDER_T(uint32_t *value,const char *toggleTitle, uint32_t min,uint32_t max,uint32_t incr , const char *tip);
@@ -155,7 +155,7 @@
   void      setMe(void *dialog, void *opaque,uint32_t line);
   void      getMe(void);
   void      enable(uint32_t onoff) ;
-  uint8_t   setDigits(uint32_t digits) ;
+  void   setDigits(uint32_t digits) ;
   int getRequiredLayout(void);
   void updateMe(void);
 };
@@ -171,7 +171,7 @@
   void      setMe(void *dialog, void *opaque,uint32_t line);
   void      getMe(void);
   void      enable(uint32_t onoff) ;
-  uint8_t   setDigits(uint32_t digits) ;
+  void   setDigits(uint32_t digits) ;
   int getRequiredLayout(void);
   void updateMe(void);
 };

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/src/DIA_factory.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/src/DIA_factory.cpp	2010-04-06 18:40:22 UTC (rev 6081)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/src/DIA_factory.cpp	2010-04-06 19:22:30 UTC (rev 6082)
@@ -528,7 +528,7 @@
 		ADM_assert(internalPointer); 
 		internalPointer-&gt;enable(onoff); 
 	}
-uint8_t   diaElemUSlider::setDigits(uint32_t digits)
+void   diaElemUSlider::setDigits(uint32_t digits)
 {
 	diaElemSliderBase *cast=(diaElemSliderBase *)internalPointer;
 			cast-&gt;setDigits(digits);	
@@ -553,7 +553,7 @@
 		ADM_assert(internalPointer); 
 		internalPointer-&gt;enable(onoff); 
 	}
-uint8_t   diaElemSlider::setDigits(uint32_t digits)
+void   diaElemSlider::setDigits(uint32_t digits)
 {
 	diaElemSliderBase *cast=(diaElemSliderBase *)internalPointer;
 			cast-&gt;setDigits(digits);	

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/encoder.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/encoder.cpp	2010-04-06 18:40:22 UTC (rev 6081)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/encoder.cpp	2010-04-06 19:22:30 UTC (rev 6082)
@@ -494,7 +494,7 @@
 	printf(&quot;dark_masking: %f\n&quot;, _context-&gt;dark_masking);
 	printf(&quot;idct_algo: %d\n&quot;, _context-&gt;idct_algo);
 	printf(&quot;slice_count: %d\n&quot;, _context-&gt;slice_count);
-	printf(&quot;*slice_offset: %d\n&quot;, _context-&gt;slice_offset);
+	printf(&quot;slice_offset: %p\n&quot;, _context-&gt;slice_offset);
 	printf(&quot;error_concealment: %d\n&quot;, _context-&gt;error_concealment);
 	printf(&quot;dsp_mask: %d\n&quot;, _context-&gt;dsp_mask);
 	printf(&quot;bits_per_coded_sample: %d\n&quot;, _context-&gt;bits_per_coded_sample);

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/flv1Encoder.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/flv1Encoder.cpp	2010-04-06 18:40:22 UTC (rev 6081)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/flv1Encoder.cpp	2010-04-06 19:22:30 UTC (rev 6082)
@@ -176,7 +176,7 @@
 		}
 	}
 
-	return configType == CONFIG_MENU_CUSTOM | !failure;
+	return (configType == CONFIG_MENU_CUSTOM) | !failure;
 }
 
 char *serializeConfig(void)

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/flv1EncoderOptions.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/flv1EncoderOptions.cpp	2010-04-06 18:40:22 UTC (rev 6081)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/flv1EncoderOptions.cpp	2010-04-06 19:22:30 UTC (rev 6082)
@@ -56,7 +56,6 @@
 {
 	const int bufferSize = 100;
 	xmlChar xmlBuffer[bufferSize + 1];
-	xmlNodePtr xmlNodeChild, xmlNodeChild2;
 
 	xmlNodeRoot = xmlNewChild(xmlNodeRoot, NULL, (xmlChar*)getOptionsTagRoot(), NULL);
 	xmlNewChild(xmlNodeRoot, NULL, (xmlChar*)&quot;gopSize&quot;, number2String(xmlBuffer, bufferSize, getGopSize()));

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/h263Encoder.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/h263Encoder.cpp	2010-04-06 18:40:22 UTC (rev 6081)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/h263Encoder.cpp	2010-04-06 19:22:30 UTC (rev 6082)
@@ -387,7 +387,7 @@
 		}
 	}
 
-	return configType == CONFIG_MENU_CUSTOM | !failure;
+	return (configType == CONFIG_MENU_CUSTOM) | !failure;
 }
 
 char *serializeConfig(void)

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/h263EncoderOptions.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/h263EncoderOptions.cpp	2010-04-06 18:40:22 UTC (rev 6081)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/h263EncoderOptions.cpp	2010-04-06 19:22:30 UTC (rev 6082)
@@ -195,7 +195,6 @@
 {
 	const int bufferSize = 100;
 	xmlChar xmlBuffer[bufferSize + 1];
-	xmlNodePtr xmlNodeChild, xmlNodeChild2;
 
 	xmlNodeRoot = xmlNewChild(xmlNodeRoot, NULL, (xmlChar*)getOptionsTagRoot(), NULL);
 

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/mjpegEncoder.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/mjpegEncoder.cpp	2010-04-06 18:40:22 UTC (rev 6081)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/mjpegEncoder.cpp	2010-04-06 19:22:30 UTC (rev 6082)
@@ -166,7 +166,7 @@
 		}
 	}
 
-	return configType == CONFIG_MENU_CUSTOM | !failure;
+	return (configType == CONFIG_MENU_CUSTOM) | !failure;
 }
 
 char *serializeConfig(void)

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/mpeg1Encoder.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/mpeg1Encoder.cpp	2010-04-06 18:40:22 UTC (rev 6081)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/mpeg1Encoder.cpp	2010-04-06 19:22:30 UTC (rev 6082)
@@ -366,7 +366,7 @@
 		}
 	}
 
-	return configType == CONFIG_MENU_CUSTOM | !failure;
+	return (configType == CONFIG_MENU_CUSTOM) | !failure;
 }
 
 char *serializeConfig(void)

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/mpeg1EncoderOptions.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/mpeg1EncoderOptions.cpp	2010-04-06 18:40:22 UTC (rev 6081)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/mpeg1EncoderOptions.cpp	2010-04-06 19:22:30 UTC (rev 6082)
@@ -140,7 +140,6 @@
 {
 	const int bufferSize = 100;
 	xmlChar xmlBuffer[bufferSize + 1];
-	xmlNodePtr xmlNodeChild, xmlNodeChild2;
 
 	xmlNodeRoot = xmlNewChild(xmlNodeRoot, NULL, (xmlChar*)getOptionsTagRoot(), NULL);
 	xmlNewChild(xmlNodeRoot, NULL, (xmlChar*)&quot;minBitrate&quot;, number2String(xmlBuffer, bufferSize, getMinBitrate()));

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/mpeg2Encoder.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/mpeg2Encoder.cpp	2010-04-06 18:40:22 UTC (rev 6081)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/mpeg2Encoder.cpp	2010-04-06 19:22:30 UTC (rev 6082)
@@ -392,7 +392,7 @@
 		}
 	}
 
-	return configType == CONFIG_MENU_CUSTOM | !failure;
+	return (configType == CONFIG_MENU_CUSTOM) | !failure;
 }
 
 char *serializeConfig(void)

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/mpeg2EncoderOptions.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/mpeg2EncoderOptions.cpp	2010-04-06 18:40:22 UTC (rev 6081)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/mpeg2EncoderOptions.cpp	2010-04-06 19:22:30 UTC (rev 6082)
@@ -140,7 +140,6 @@
 {
 	const int bufferSize = 100;
 	xmlChar xmlBuffer[bufferSize + 1];
-	xmlNodePtr xmlNodeChild, xmlNodeChild2;
 
 	xmlNodeRoot = xmlNewChild(xmlNodeRoot, NULL, (xmlChar*)getOptionsTagRoot(), NULL);
 	xmlNewChild(xmlNodeRoot, NULL, (xmlChar*)&quot;minBitrate&quot;, number2String(xmlBuffer, bufferSize, getMinBitrate()));

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/mpeg4aspEncoder.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/mpeg4aspEncoder.cpp	2010-04-06 18:40:22 UTC (rev 6081)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/mpeg4aspEncoder.cpp	2010-04-06 19:22:30 UTC (rev 6082)
@@ -387,7 +387,7 @@
 		}
 	}
 
-	return configType == CONFIG_MENU_CUSTOM | !failure;
+	return (configType == CONFIG_MENU_CUSTOM) | !failure;
 }
 
 char *serializeConfig(void)

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/mpeg4aspEncoderOptions.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/mpeg4aspEncoderOptions.cpp	2010-04-06 18:40:22 UTC (rev 6081)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/mpeg4aspEncoderOptions.cpp	2010-04-06 19:22:30 UTC (rev 6082)
@@ -195,7 +195,6 @@
 {
 	const int bufferSize = 100;
 	xmlChar xmlBuffer[bufferSize + 1];
-	xmlNodePtr xmlNodeChild, xmlNodeChild2;
 
 	xmlNodeRoot = xmlNewChild(xmlNodeRoot, NULL, (xmlChar*)getOptionsTagRoot(), NULL);
 

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_mpeg2enc/encoder.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_mpeg2enc/encoder.cpp	2010-04-06 18:40:22 UTC (rev 6081)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_mpeg2enc/encoder.cpp	2010-04-06 19:22:30 UTC (rev 6082)
@@ -203,7 +203,7 @@
 	_fpsDen = properties-&gt;fpsDen;
 
 	_frameCount = properties-&gt;frameCount;
-	_bufferSize = (properties-&gt;width * properties-&gt;height) + 2 * ((properties-&gt;width + 1 &gt;&gt; 1) * (properties-&gt;height + 1 &gt;&gt; 1));
+	_bufferSize = (properties-&gt;width * properties-&gt;height) + 2 * (((properties-&gt;width + 1) &gt;&gt; 1) * ((properties-&gt;height + 1) &gt;&gt; 1));
 	_buffer = new uint8_t[_bufferSize];
 	_xvidRc = NULL;
 
@@ -277,7 +277,7 @@
 
 				d *= 1000.;
 				d /= (_fpsNum * 1000) / _fpsDen;   // D is a duration in second
-				d *= bitrate;   // * bitrate = total bits
+				d *= encodeModeParameter;   // * bitrate = total bits
 				d /= 8;   // Byte
 				d /= 1024 * 1024;   // MB
 

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_mpeg2enc/encoder.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_mpeg2enc/encoder.h	2010-04-06 18:40:22 UTC (rev 6081)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_mpeg2enc/encoder.h	2010-04-06 19:22:30 UTC (rev 6082)
@@ -47,7 +47,7 @@
 
 		int getFrameType(int flags);
 		unsigned int calculateBitrate(unsigned int fpsNum, unsigned int fpsDen, unsigned int frameCount, unsigned int sizeInMb);
-		virtual int initParameters(int *encodeModeParameter, int *maxBitrate, int *vbv) = 0;
+		virtual void initParameters(int *encodeModeParameter, int *maxBitrate, int *vbv) = 0;
 
 	public:
 		virtual ~Mpeg2encEncoder(void);

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_mpeg2enc/mpeg1Encoder.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_mpeg2enc/mpeg1Encoder.cpp	2010-04-06 18:40:22 UTC (rev 6081)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_mpeg2enc/mpeg1Encoder.cpp	2010-04-06 19:22:30 UTC (rev 6082)
@@ -179,7 +179,7 @@
 		return ADM_VIDENC_ERR_FAILED;
 }
 
-int Mpeg1Encoder::initParameters(int *encodeModeParameter, int *maxBitrate, int *vbv)
+void Mpeg1Encoder::initParameters(int *encodeModeParameter, int *maxBitrate, int *vbv)
 {
 	_param.fieldenc = 0;
 	_param.format = MPEG_FORMAT_VCD;

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_mpeg2enc/mpeg1Encoder.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_mpeg2enc/mpeg1Encoder.h	2010-04-06 18:40:22 UTC (rev 6081)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_mpeg2enc/mpeg1Encoder.h	2010-04-06 19:22:30 UTC (rev 6082)
@@ -42,7 +42,7 @@
 		int _bufferSize;
 		uint8_t *_buffer;
 
-		int initParameters(int *encodeModeParameter, int *maxBitrate, int *vbv);
+		void initParameters(int *encodeModeParameter, int *maxBitrate, int *vbv);
 
 	public:
 		Mpeg1Encoder(void);

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_mpeg2enc/mpeg1Options.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_mpeg2enc/mpeg1Options.cpp	2010-04-06 18:40:22 UTC (rev 6081)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_mpeg2enc/mpeg1Options.cpp	2010-04-06 19:22:30 UTC (rev 6082)
@@ -58,7 +58,6 @@
 {
 	const int bufferSize = 100;
 	xmlChar xmlBuffer[bufferSize + 1];
-	xmlNodePtr xmlNodeChild, xmlNodeChild2;
 
 	xmlNodeRoot = xmlNewChild(xmlNodeRoot, NULL, (xmlChar*)getOptionsTagRoot(), NULL);
 	xmlNewChild(xmlNodeRoot, NULL, (xmlChar*)&quot;fileSplit&quot;, number2String(xmlBuffer, bufferSize, getFileSplit()));

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_mpeg2enc/mpeg2Encoder.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_mpeg2enc/mpeg2Encoder.cpp	2010-04-06 18:40:22 UTC (rev 6081)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_mpeg2enc/mpeg2Encoder.cpp	2010-04-06 19:22:30 UTC (rev 6082)
@@ -222,7 +222,7 @@
 		}
 	}
 
-	return configType == CONFIG_MENU_CUSTOM | !failure;
+	return (configType == CONFIG_MENU_CUSTOM) | !failure;
 }
 
 char *serializeConfig(void)
@@ -280,7 +280,7 @@
 		return ADM_VIDENC_ERR_FAILED;
 }
 
-int Mpeg2Encoder::initParameters(int *encodeModeParameter, int *maxBitrate, int *vbv)
+void Mpeg2Encoder::initParameters(int *encodeModeParameter, int *maxBitrate, int *vbv)
 {
 	switch (_options.getMatrix())
 	{

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_mpeg2enc/mpeg2Encoder.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_mpeg2enc/mpeg2Encoder.h	2010-04-06 18:40:22 UTC (rev 6081)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_mpeg2enc/mpeg2Encoder.h	2010-04-06 19:22:30 UTC (rev 6082)
@@ -44,7 +44,7 @@
 		uint8_t *_buffer;
 
 		void updateEncodeProperties(vidEncOptions *encodeOptions);
-		int initParameters(int *encodeModeParameter, int *maxBitrate, int *vbv);
+		void initParameters(int *encodeModeParameter, int *maxBitrate, int *vbv);
 
 	public:
 		Mpeg2Encoder(void);

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_mpeg2enc/mpeg2Options.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_mpeg2enc/mpeg2Options.cpp	2010-04-06 18:40:22 UTC (rev 6081)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_mpeg2enc/mpeg2Options.cpp	2010-04-06 19:22:30 UTC (rev 6082)
@@ -117,7 +117,6 @@
 {
 	const int bufferSize = 100;
 	xmlChar xmlBuffer[bufferSize + 1];
-	xmlNodePtr xmlNodeChild, xmlNodeChild2;
 
 	xmlNodeRoot = xmlNewChild(xmlNodeRoot, NULL, (xmlChar*)getOptionsTagRoot(), NULL);
 	xmlNewChild(xmlNodeRoot, NULL, (xmlChar*)&quot;maxBitrate&quot;, number2String(xmlBuffer, bufferSize, getMaxBitrate()));

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_mpeg2enc/mpeg2enc/cpu_accel.cc
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_mpeg2enc/mpeg2enc/cpu_accel.cc	2010-04-06 18:40:22 UTC (rev 6081)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_mpeg2enc/mpeg2enc/cpu_accel.cc	2010-04-06 19:22:30 UTC (rev 6082)
@@ -43,8 +43,6 @@
 
 static int x86_accel (void)
 {
-   int32_t eax, ebx, ecx, edx;
-   int32_t AMD;
    int32_t caps=0;
 
    if(CpuCaps::hasMMX()) caps |=ACCEL_X86_MMX;

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_mpeg2enc/mpeg2enc/feedframe.cc
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_mpeg2enc/mpeg2enc/feedframe.cc	2010-04-06 18:40:22 UTC (rev 6081)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_mpeg2enc/mpeg2enc/feedframe.cc	2010-04-06 19:22:30 UTC (rev 6082)
@@ -121,7 +121,7 @@
 }
 void feedOneFrame(char *y, char *u,char *vv)
 {
-	int n,v,h,i;
+	int n,v,h;
       	n = frames_read % frame_buffer_size;
 
       	v = opt-&gt;vertical_size;

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_mpeg2enc/mpeg2enc/global.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_mpeg2enc/mpeg2enc/global.h	2010-04-06 18:40:22 UTC (rev 6081)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_mpeg2enc/mpeg2enc/global.h	2010-04-06 19:22:30 UTC (rev 6082)
@@ -149,9 +149,9 @@
 #define PUSH
 
 EXTERN void feedframe_buffer(int num_frame);
-#warning duplicate define -&gt; bad!
-#define PREFILL 6
 
+#define MPEG2ENC_PREFILL 6
+
 // to be easily free-ed
 EXTERN int *lum_mean
 #ifdef GLOBAL

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_mpeg2enc/mpeg2enc/mpeg2enc.cc
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_mpeg2enc/mpeg2enc/mpeg2enc.cc	2010-04-06 18:40:22 UTC (rev 6081)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_mpeg2enc/mpeg2enc/mpeg2enc.cc	2010-04-06 19:22:30 UTC (rev 6082)
@@ -559,7 +559,7 @@
 	
 		fedPictures++;
 	
-		if(fedPictures&lt;PREFILL) continue;
+		if(fedPictures&lt;MPEG2ENC_PREFILL) continue;
 
 		printf(&quot;&gt;&gt; %d / 100 \n&quot;,i);
 		putseq_next();

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_mpeg2enc/mpeg2enc/mpeg2enc_if.cc
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_mpeg2enc/mpeg2enc/mpeg2enc_if.cc	2010-04-06 18:40:22 UTC (rev 6081)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_mpeg2enc/mpeg2enc/mpeg2enc_if.cc	2010-04-06 19:22:30 UTC (rev 6082)
@@ -300,7 +300,7 @@
 
 		fedPictures++;
 
-		if(fedPictures&lt;PREFILL)
+		if(fedPictures&lt;MPEG2ENC_PREFILL)
 		{
 			*size=mpeg2enc_buffer-(unsigned char *)out;
 			*quant=2;
@@ -330,7 +330,6 @@
 */
 int  mpeg_cleanup( void )
 {
-int n,i;
 	if(!frame_buffers)
 	{
 		printf(&quot;Trying to clean already cleaned frame_buffers!!!\n&quot;);

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_mpeg2enc/mpeg2enc/mpeg2setup.cc
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_mpeg2enc/mpeg2enc/mpeg2setup.cc	2010-04-06 18:40:22 UTC (rev 6081)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_mpeg2enc/mpeg2enc/mpeg2setup.cc	2010-04-06 19:22:30 UTC (rev 6082)
@@ -251,7 +251,7 @@
 		if( param-&gt;quant == 0 )
 			param-&gt;quant = 8;
 		param-&gt;seq_hdr_every_gop = 1;
-		printf(&quot;Br: %ld\n&quot;,param-&gt;bitrate);
+		printf(&quot;Br: %d\n&quot;,param-&gt;bitrate);
 		break;
 	}
 

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_mpeg2enc/mpeg2enc/putseq.cc
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_mpeg2enc/mpeg2enc/putseq.cc	2010-04-06 18:40:22 UTC (rev 6081)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_mpeg2enc/mpeg2enc/putseq.cc	2010-04-06 19:22:30 UTC (rev 6082)
@@ -811,7 +811,7 @@
 
 volatile static pict_data_ptr picture_to_encode;
 
-
+#if 0
 static void *parencodeworker(void *start_arg)
 {
 	pict_data_ptr picture;
@@ -909,8 +909,8 @@
 
 	return NULL;
 }
+#endif
 
-
 static void parencodepict( Picture *picture )
 {
 
@@ -1062,7 +1062,7 @@
         bits_after_mux = (uint64_t)((frame_periods / opt-&gt;frame_rate) *
                                     (ctl-&gt;nonvid_bit_rate + opt-&gt;bit_rate));
 
-    mjpeg_info( &quot;Guesstimated final muxed size = %lld\n&quot;, bits_after_mux/8 );
+    //mjpeg_info( &quot;Guesstimated final muxed size = %lld\n&quot;, bits_after_mux/8 );
     /* END DEBUG */
 
 }
@@ -1138,7 +1138,7 @@
 	memset(&amp;ss,0,sizeof(ss));	
 	ss.seq_split_length = ((int64_t)ctl-&gt;seq_length_limit)*(8*1024*1024);
 	ss.next_split_point = BITCOUNT_OFFSET + ss.seq_split_length;
-	mjpeg_debug( &quot;Split len = %%llu&quot;, ss.seq_split_length );
+	//mjpeg_debug( &quot;Split len = %%llu&quot;, ss.seq_split_length );
 
 	frame_num = 0;              /* Encoding number */
 
@@ -1241,7 +1241,7 @@
         bits_after_mux = (uint64_t)((frame_periods / opt-&gt;frame_rate) *
                                     (ctl-&gt;nonvid_bit_rate + opt-&gt;bit_rate));
 
-    mjpeg_info( &quot;Guesstimated final muxed size = %lld\n&quot;, bits_after_mux/8 );
+    //mjpeg_info( &quot;Guesstimated final muxed size = %lld\n&quot;, bits_after_mux/8 );
     /* END DEBUG */
 
     for(int i=0;i&lt;B_PICS;i++)

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_mpeg2enc/mpeg2enc/ratectl.cc
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_mpeg2enc/mpeg2enc/ratectl.cc	2010-04-06 18:40:22 UTC (rev 6081)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_mpeg2enc/mpeg2enc/ratectl.cc	2010-04-06 19:22:30 UTC (rev 6082)
@@ -355,7 +355,7 @@
 		if( undershoot_carry &lt; 0 )
                 {
                         printf(&quot;Buffer %d buffer_size %d\n&quot;,buffer_safe,ctl-&gt;video_buffer_size);
-                        printf(&quot;Avg bitrate : %d  framerate %d\n&quot;,opt-&gt;bit_rate,ctl-&gt;decode_frame_rate);
+                        printf(&quot;Avg bitrate : %f  framerate %f\n&quot;,opt-&gt;bit_rate,ctl-&gt;decode_frame_rate);
 			mjpeg_error_exit1(&quot;Rate control can't cope with a video buffer smaller 4 frame intervals&quot;);
                 }
 		overshoot_gain =  opt-&gt;bit_rate / (ctl-&gt;video_buffer_size-buffer_safe);
@@ -841,7 +841,7 @@
 	bits_used += (bitcount()-prev_bitcount);
 	prev_bitcount = bitcount();
 	bits_transported += per_pict_bits;
-	mjpeg_debug( &quot;TR=%llu USD=%llu &quot;, bits_transported/8, bits_used/8);
+	//mjpeg_debug( &quot;TR=%llu USD=%llu &quot;, bits_transported/8, bits_used/8);
 	buffer_variation  = (int32_t)(bits_transported - bits_used);
 
 	if( buffer_variation &gt; 0 )

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_mpeg2enc/mpeg2enc/readpic.cc
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_mpeg2enc/mpeg2enc/readpic.cc	2010-04-06 18:40:22 UTC (rev 6081)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_mpeg2enc/mpeg2enc/readpic.cc	2010-04-06 19:22:30 UTC (rev 6082)
@@ -88,7 +88,6 @@
 
 
 static volatile int frames_read = 0;
-static int last_frame = -1;
 
 
 /* Buffers for frame luminance means */

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/encoder.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/encoder.cpp	2010-04-06 18:40:22 UTC (rev 6081)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/encoder.cpp	2010-04-06 19:22:30 UTC (rev 6082)
@@ -118,15 +118,14 @@
 		delete [] configGuiPath;
 	}
 
-	if (_loader-&gt;isAvailable())
-		if (_loader-&gt;showX264ConfigDialog(configParameters, properties, &amp;_encodeOptions, &amp;_options))
-		{
-			updateEncodeParameters(NULL);
+	if (_loader-&gt;isAvailable() &amp;&amp; _loader-&gt;showX264ConfigDialog(configParameters, properties, &amp;_encodeOptions, &amp;_options))
+	{
+		updateEncodeParameters(NULL);
 
-			return 1;
-		}
-	else
-		return 0;
+		return 1;
+	}
+
+	return 0;
 }
 
 int x264Encoder::getOptions(vidEncOptions *encodeOptions, char *pluginOptions, int bufferSize)
@@ -190,7 +189,7 @@
 
 	_opened = true;
 	_currentPass = 0;
-	_bufferSize = (properties-&gt;width * properties-&gt;height) + 2 * ((properties-&gt;width + 1 &gt;&gt; 1) * (properties-&gt;height + 1 &gt;&gt; 1));
+	_bufferSize = (properties-&gt;width * properties-&gt;height) + 2 * (((properties-&gt;width + 1) &gt;&gt; 1) * ((properties-&gt;height + 1) &gt;&gt; 1));
 	_buffer = new uint8_t[_bufferSize];
 
 	memcpy(&amp;_properties, properties, sizeof(vidEncVideoProperties));

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/encoder.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/encoder.h	2010-04-06 18:40:22 UTC (rev 6081)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/encoder.h	2010-04-06 19:22:30 UTC (rev 6082)
@@ -90,7 +90,9 @@
 	int x264Encoder_getPassCount(void);
 	int x264Encoder_getCurrentPass(void);
 	int x264Encoder_open(vidEncVideoProperties *properties);
+	int x264Encoder_beginPass(vidEncPassParameters *passParameters);
+	int x264Encoder_encodeFrame(vidEncEncodeParameters *encodeParams);
+	int x264Encoder_finishPass(void);
 	void x264Encoder_close(void);
-	int x264Encoder_encodeFrame(vidEncEncodeParameters *encodeParams);
 #endif	// __cplusplus
 #endif	// encoder_h

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk/x264ConfigDialog.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk/x264ConfigDialog.cpp	2010-04-06 18:40:22 UTC (rev 6081)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk/x264ConfigDialog.cpp	2010-04-06 19:22:30 UTC (rev 6082)
@@ -215,14 +215,14 @@
 	gtk_widget_set_sensitive(WID(table8), toggled);
 }
 
-int signalReceiver(GtkObject* object, gpointer user_data)
+void signalReceiver(GtkObject* object, gpointer user_data)
 {
 	GtkWidget *dialog = (GtkWidget*)user_data;
 
 	if (object == GTK_OBJECT(WID(comboboxMode)))
 	{
 		int modeIndex = gtk_combo_box_get_active(GTK_COMBO_BOX(WID(comboboxMode)));
-		int encodeModeParameter;
+		int encodeModeParameter = 0;
 
 		switch (modeIndex)
 		{
@@ -249,7 +249,7 @@
 		updateDeblockingFilter(dialog);
 }
 
-int entryTarget_changed(GtkObject* object, gpointer user_data)
+void entryTarget_changed(GtkObject* object, gpointer user_data)
 {
 	GtkWidget *dialog = (GtkWidget*)user_data;
 

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk/x264ConfigDialog.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk/x264ConfigDialog.h	2010-04-06 18:40:22 UTC (rev 6081)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk/x264ConfigDialog.h	2010-04-06 19:22:30 UTC (rev 6082)
@@ -14,8 +14,8 @@
 static int getCurrentEncodeMode(GtkWidget *dialog);
 static void updateMode(GtkWidget *dialog, int encodeMode, int encodeModeParameter);
 static void updateDeblockingFilter(GtkWidget *dialog);
-static int signalReceiver(GtkObject* object, gpointer user_data);
-static int entryTarget_changed(GtkObject* object, gpointer user_data);
+static void signalReceiver(GtkObject* object, gpointer user_data);
+static void entryTarget_changed(GtkObject* object, gpointer user_data);
 static void loadOptions(GtkWidget *dialog, x264Options *options);
 static void saveOptions(GtkWidget *dialog, x264Options *options);
 

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp	2010-04-06 18:40:22 UTC (rev 6081)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp	2010-04-06 19:22:30 UTC (rev 6082)
@@ -434,10 +434,12 @@
 void x264ConfigDialog::mbTreeCheckBox_toggled(bool checked)
 {
 	if (!disableGenericSlots &amp;&amp; checked &amp;&amp; !ui.aqVarianceCheckBox-&gt;isChecked())
+	{
 		if (GUI_Question(QT_TR_NOOP(&quot;Macroblock-Tree optimisation requires Variance Adaptive Quantisation to be enabled.  Variance Adaptive Quantisation will automatically be enabled.\n\nDo you wish to continue?&quot;)))
 			ui.aqVarianceCheckBox-&gt;setChecked(true);
 		else
 			ui.mbTreeCheckBox-&gt;setChecked(false);
+	}
 }
 #endif
 
@@ -480,20 +482,24 @@
 void x264ConfigDialog::cabacCheckBox_toggled(bool checked)
 {
 	if (!disableGenericSlots &amp;&amp; !checked &amp;&amp; ui.trellisCheckBox-&gt;isChecked())
+	{
 		if (GUI_Question(QT_TR_NOOP(&quot;Trellis optimisation isn't possible without CABAC coding enabled.  Trellis optimisation will automatically be disabled.\n\n Do you wish to continue?&quot;)))
 			ui.trellisCheckBox-&gt;setChecked(false);
 		else
 			ui.cabacCheckBox-&gt;setChecked(true);
+	}
 }
 
 // Analysis tab
 void x264ConfigDialog::trellisCheckBox_toggled(bool checked)
 {
 	if (!disableGenericSlots &amp;&amp; checked &amp;&amp; !ui.cabacCheckBox-&gt;isChecked())
+	{
 		if (GUI_Question(QT_TR_NOOP(&quot;Trellis optimisation requires CABAC coding to be enabled.  CABAC coding will automatically be enabled.\n\nDo you wish to continue?&quot;)))
 			ui.cabacCheckBox-&gt;setChecked(true);
 		else
 			ui.trellisCheckBox-&gt;setChecked(false);
+	}
 }
 
 void x264ConfigDialog::matrixCustomEditButton_pressed()
@@ -512,10 +518,12 @@
 void x264ConfigDialog::aqVarianceCheckBox_toggled(bool checked)
 {
 	if (!disableGenericSlots &amp;&amp; !checked &amp;&amp; ui.mbTreeCheckBox-&gt;isChecked())
+	{
 		if (GUI_Question(QT_TR_NOOP(&quot;Macroblock-Tree optimisation requires Variance Adaptive Quantisation to be enabled.  Macroblock-Tree optimisation will automatically be disabled.\n\nDo you wish to continue?&quot;)))
 			ui.mbTreeCheckBox-&gt;setChecked(false);
 		else
 			ui.aqVarianceCheckBox-&gt;setChecked(true);
+	}
 }
 #endif
 

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264CustomMatrixDialog.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264CustomMatrixDialog.cpp	2010-04-06 18:40:22 UTC (rev 6081)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264CustomMatrixDialog.cpp	2010-04-06 19:22:30 UTC (rev 6082)
@@ -47,6 +47,7 @@
 	uint8_t intra8x8Luma[64], inter8x8Luma[64];
 
 	if (FileSel_SelectRead(QT_TR_NOOP(&quot;Select Matrix File&quot;), cqmFileName, 1023, NULL) &amp;&amp; ADM_fileExist(cqmFileName))
+	{
 		if (x264_cqm_parse_file(cqmFileName, intra4x4Luma, intra4x4Chroma, inter4x4Luma, inter4x4Chroma, intra8x8Luma, inter8x8Luma) == 0)
 		{
 			setIntra4x4Luma(intra4x4Luma);
@@ -58,6 +59,7 @@
 		}
 		else
 			GUI_Error_HIG(QT_TR_NOOP(&quot;Read Error&quot;), QT_TR_NOOP(&quot;Error reading custom matrix file.&quot;));
+	}
 }
 
 void x264CustomMatrixDialog::getMatrix(uint8_t* intra4x4Luma, uint8_t* intraChroma, uint8_t* inter4x4Luma, 

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ZoneTableDelegate.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ZoneTableDelegate.cpp	2010-04-06 18:40:22 UTC (rev 6081)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ZoneTableDelegate.cpp	2010-04-06 19:22:30 UTC (rev 6082)
@@ -60,6 +60,8 @@
 
 			return spinBox;
 	}
+
+	return NULL;
 }
 
 void x264ZoneTableDelegate::setEditorData(QWidget *editor, const QModelIndex &amp;index) const

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ZoneTableModel.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ZoneTableModel.cpp	2010-04-06 18:40:22 UTC (rev 6081)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ZoneTableModel.cpp	2010-04-06 19:22:30 UTC (rev 6082)
@@ -168,6 +168,8 @@
 {
 	if (_zoneData.size())
 		return removeRows(0, _zoneData.size(), QModelIndex());
+
+	return false;
 }
 
 bool x264ZoneTableModel::setData(const QModelIndex &amp;index, const QVariant &amp;value, int role)

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_xvid/encoder.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_xvid/encoder.cpp	2010-04-06 18:40:22 UTC (rev 6081)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_xvid/encoder.cpp	2010-04-06 19:22:30 UTC (rev 6082)
@@ -150,14 +150,16 @@
 	}
 
 	if (_loader-&gt;isAvailable())
+	{
 		if (_loader-&gt;showXvidConfigDialog(configParameters, properties, &amp;_encodeOptions, &amp;_options))
 		{
 			updateEncodeParameters(NULL);
 
 			return 1;
 		}
-	else
-		return 0;
+	}
+
+	return 0;
 }
 
 int XvidEncoder::getOptions(vidEncOptions *encodeOptions, char *pluginOptions, int bufferSize)
@@ -221,7 +223,7 @@
 
 	_opened = true;
 	_currentPass = 0;
-	_bufferSize = (properties-&gt;width * properties-&gt;height) + 2 * ((properties-&gt;width + 1 &gt;&gt; 1) * (properties-&gt;height + 1 &gt;&gt; 1));
+	_bufferSize = (properties-&gt;width * properties-&gt;height) + 2 * (((properties-&gt;width + 1) &gt;&gt; 1) * ((properties-&gt;height + 1) &gt;&gt; 1));
 	_buffer = new uint8_t[_bufferSize];
 
 	memcpy(&amp;_properties, properties, sizeof(vidEncVideoProperties));
@@ -393,6 +395,8 @@
 		xvid_encore(_xvid_enc_create.handle, XVID_ENC_DESTROY, NULL, NULL);
 		_xvid_enc_create.handle = NULL;
 	}
+
+	return ADM_VIDENC_ERR_SUCCESS;
 }
 
 void XvidEncoder::close(void)

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_xvid/encoder.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_xvid/encoder.h	2010-04-06 18:40:22 UTC (rev 6081)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_xvid/encoder.h	2010-04-06 19:22:30 UTC (rev 6082)
@@ -89,7 +89,9 @@
 	int XvidEncoder_getPassCount(void);
 	int XvidEncoder_getCurrentPass(void);
 	int XvidEncoder_open(vidEncVideoProperties *properties);
+	int XvidEncoder_beginPass(vidEncPassParameters *passParameters);
+	int XvidEncoder_encodeFrame(vidEncEncodeParameters *encodeParams);
+	int XvidEncoder_finishPass(void);
 	void XvidEncoder_close(void);
-	int XvidEncoder_encodeFrame(vidEncEncodeParameters *encodeParams);
 #endif	// __cplusplus
 #endif	// encoder_h

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_xvid/gtk/xvidConfigDialog.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_xvid/gtk/xvidConfigDialog.cpp	2010-04-06 18:40:22 UTC (rev 6081)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_xvid/gtk/xvidConfigDialog.cpp	2010-04-06 19:22:30 UTC (rev 6082)
@@ -78,7 +78,6 @@
 
 _again:
 	int code = gtk_dialog_run(GTK_DIALOG(dialog));
-	int b;
 
 	if (code == XVID4_RESPONSE_EDIT_MATRIX)
 	{
@@ -437,7 +436,7 @@
 {
 	GtkWidget *dialog = (GtkWidget*)user_data;
 	int r = getRangeInMenu(WID(optionmenuType));
-	int encodeModeParameter;
+	int encodeModeParameter = 0;
 
 	switch (r)
 	{
@@ -458,7 +457,7 @@
 	return 0;
 }
 
-int entryEntry_changed(GtkObject* object, gpointer user_data)
+void entryEntry_changed(GtkObject* object, gpointer user_data)
 {
 	GtkWidget *dialog = (GtkWidget*)user_data;
 

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_xvid/gtk/xvidConfigDialog.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_xvid/gtk/xvidConfigDialog.h	2010-04-06 18:40:22 UTC (rev 6081)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_xvid/gtk/xvidConfigDialog.h	2010-04-06 19:22:30 UTC (rev 6082)
@@ -18,6 +18,6 @@
 
 static int cb_mod(GtkObject *object, gpointer user_data);
 static int ch_par_asinput(GtkObject *object, gpointer user_data);
-static int entryEntry_changed(GtkObject* object, gpointer user_data);
+static void entryEntry_changed(GtkObject* object, gpointer user_data);
 
 #endif	// xvidConfigDialog_h

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidCustomMatrixDialog.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidCustomMatrixDialog.cpp	2010-04-06 18:40:22 UTC (rev 6081)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidCustomMatrixDialog.cpp	2010-04-06 19:22:30 UTC (rev 6082)
@@ -39,6 +39,7 @@
 	unsigned char intra8x8Luma[64], inter8x8Luma[64];
 
 	if (FileSel_SelectRead(QT_TR_NOOP(&quot;Select Matrix File&quot;), cqmFileName, 1023, NULL) &amp;&amp; ADM_fileExist(cqmFileName))
+	{
 		if (parseCqmFile(cqmFileName, intra8x8Luma, inter8x8Luma) == 0)
 		{
 			setIntra8x8Luma(intra8x8Luma);
@@ -46,6 +47,7 @@
 		}
 		else
 			GUI_Error_HIG(QT_TR_NOOP(&quot;Read Error&quot;), QT_TR_NOOP(&quot;Error reading custom matrix file.&quot;));
+	}
 }
 
 bool XvidCustomMatrixDialog::parseCqmFile(const char cqmFileName[1024], unsigned char intra8x8Luma[64], unsigned char inter8x8Luma[64])

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_xvid/xvidOptions.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_xvid/xvidOptions.cpp	2010-04-06 18:40:22 UTC (rev 6081)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_xvid/xvidOptions.cpp	2010-04-06 19:22:30 UTC (rev 6082)
@@ -730,7 +730,7 @@
 {
 	const int bufferSize = 100;
 	xmlChar xmlBuffer[bufferSize + 1];
-	xmlNodePtr xmlNodeChild, xmlNodeChild2;
+	xmlNodePtr xmlNodeChild;
 
 	xmlNodeRoot = xmlNewChild(xmlNodeRoot, NULL, (xmlChar*)getOptionsTagRoot(), NULL);
 	xmlNewChild(xmlNodeRoot, NULL, (xmlChar*)&quot;threads&quot;, number2String(xmlBuffer, bufferSize, getThreads()));

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/common/pluginOptions/PluginOptions.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/common/pluginOptions/PluginOptions.cpp	2010-04-06 18:40:22 UTC (rev 6081)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/common/pluginOptions/PluginOptions.cpp	2010-04-06 19:22:30 UTC (rev 6082)
@@ -297,7 +297,7 @@
 
 	xmlDocPtr doc = xmlReadMemory(xml, strlen(xml), &quot;options.xml&quot;, NULL, 0);
 
-	if (success = validateXml(doc, getSchemaFile()))
+	if ((success = validateXml(doc, getSchemaFile())))
 	{
 		xmlNode *xmlNodeRoot = xmlDocGetRootElement(doc);
 

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/common/xvidRateCtl/xvidRateCtl.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/common/xvidRateCtl/xvidRateCtl.cpp	2010-04-06 18:40:22 UTC (rev 6081)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/common/xvidRateCtl/xvidRateCtl.cpp	2010-04-06 19:22:30 UTC (rev 6082)
@@ -410,7 +410,7 @@
 			*type=RF_B;
 			break;
 		default:
-			printf(&quot;f:%lu Type : %d\n&quot;,framenum,rc-&gt;stats[framenum].type);
+			printf(&quot;f:%u Type : %d\n&quot;,framenum,rc-&gt;stats[framenum].type);
 			assert(0);
 	}
 
@@ -441,7 +441,7 @@
 
 	//avg/=1000; //bps / kbps
 
-	printf(&quot;Xvidr: pass2 : %lu MB, avg:%d, nbframe:%lu\n&quot;,final_size,0,_nbFrames);
+	printf(&quot;Xvidr: pass2 : %u MB, avg:%d, nbframe:%u\n&quot;,final_size,0,_nbFrames);
 
 	create.version=FAKE_VERSION;
 	create.param=&data;	
@@ -1098,7 +1098,6 @@
 int
 rc_2pass2_after(rc_2pass2_t * rc, xvid_plg_data_t * data)
 {
-	const char frame_type[4] = { 'i', 'p', 'b', 's'};
 	twopass_stat_t * s = &amp;rc-&gt;stats[data-&gt;frame_num];
 
 	/* Insufficent stats data */

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/common/xvidRateCtl/xvidRateCtlVbv.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/common/xvidRateCtl/xvidRateCtlVbv.cpp	2010-04-06 18:40:22 UTC (rev 6081)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/common/xvidRateCtl/xvidRateCtlVbv.cpp	2010-04-06 19:22:30 UTC (rev 6082)
@@ -54,9 +54,9 @@
 	_minbr=minbr*1000;
 	_vbvsize=vbvsize*1024;
 	printf(&quot;RC: Initializing vbv buffer \n&quot;);
-	printf(&quot;RC: with min br= %lu kbps\n&quot;,(minbr)/1000);
-	printf(&quot;RC:      max br= %lu kbps\n&quot;,(maxbr)/1000);
-	printf(&quot;Rc:      VBV   = %lu kB\n&quot;,_vbvsize/1024);
+	printf(&quot;RC: with min br= %u kbps\n&quot;,(minbr)/1000);
+	printf(&quot;RC:      max br= %u kbps\n&quot;,(maxbr)/1000);
+	printf(&quot;Rc:      VBV   = %u kB\n&quot;,_vbvsize/1024);
 
 	return 1;
 }
@@ -67,7 +67,7 @@
 }
 uint8_t ADM_newXvidRcVBV::startPass2( uint32_t size,uint32_t nbFrame )
 {
-	printf(&quot;Starting Xvid VBV with %lu frames, target size :%lu MB\n&quot;,nbFrame,size);
+	printf(&quot;Starting Xvid VBV with %u frames, target size :%u MB\n&quot;,nbFrame,size);
 	_nbFrames=nbFrame;
 	if(! rc-&gt;startPass2(size,nbFrame)) return 0;
 	// Built pass 1 stat file in memory
@@ -95,7 +95,7 @@
 		_compr[1][i]=1.0;
 		_compr[2][i]=1.0;
 	}
-	printf(&quot;Rc: Byte per image : %lu \n&quot;,_byte_per_image);
+	printf(&quot;Rc: Byte per image : %u \n&quot;,_byte_per_image);
 	return 1;
 }
 uint8_t ADM_newXvidRcVBV::logPass1(uint32_t qz, ADM_rframe ftype,uint32_t size)
@@ -110,7 +110,7 @@
 	_vbv_fullness+=_byte_per_image;
 	if(_vbv_fullness&lt;size)
 	{
-		printf(&quot;VBV buffer underflow :frame %lu, underflow : %lu\n&quot;,_frame,size-_vbv_fullness);
+		printf(&quot;VBV buffer underflow :frame %u, underflow : %u\n&quot;,_frame,size-_vbv_fullness);
 	}
 	else
 	{
@@ -212,7 +212,7 @@
 
 		// Q increase ratio
 
-		float compI=0,compP=0,compB=0,comp=0,size,qr;
+		float compI=0,compP=0,compB=0,comp=0,size;
 		float ratioI,ratioP,ratioB,ratio;
 
 		for(uint32_t i=0;i&lt;AVG_LOOKUP;i++)


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003285.html">[Avidemux-svn-commit] r6081 - in	branches/avidemux_2.5_branch_gruntster/avidemux: .	ADM_libraries/ADM_utilities ADM_userInterfaces/ADM_commonUI
</A></li>
	<LI>Next message: <A HREF="003287.html">[Avidemux-svn-commit] r6083 - in	branches/avidemux_2.5_branch_gruntster/platforms/windows:	build_scripts/avidemux installer
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3286">[ date ]</a>
              <a href="thread.html#3286">[ thread ]</a>
              <a href="subject.html#3286">[ subject ]</a>
              <a href="author.html#3286">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">More information about the Avidemux-svn-commit
mailing list</a><br>
</body></html>
