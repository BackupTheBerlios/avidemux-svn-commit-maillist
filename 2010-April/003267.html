<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Avidemux-svn-commit] r6063 - in	branches/avidemux_2.5_branch_gruntster: avidemux/ADM_encoder	avidemux/ADM_libraries	avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog	plugins/ADM_videoEncoder/ADM_vidEnc_avcodec	plugins/ADM_videoFilters/Decimate
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/avidemux-svn-commit/2010-April/index.html" >
   <LINK REL="made" HREF="mailto:avidemux-svn-commit%40lists.berlios.de?Subject=Re%3A%20%5BAvidemux-svn-commit%5D%20r6063%20-%20in%0A%09branches/avidemux_2.5_branch_gruntster%3A%20avidemux/ADM_encoder%0A%09avidemux/ADM_libraries%0A%09avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog%0A%09plugins/ADM_videoEncoder/ADM_vidEnc_avcodec%0A%09plugins/ADM_videoFilters/Decimate&In-Reply-To=%3C201004052114.o35LEYZ9016897%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003266.html">
   <LINK REL="Next"  HREF="003268.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Avidemux-svn-commit] r6063 - in	branches/avidemux_2.5_branch_gruntster: avidemux/ADM_encoder	avidemux/ADM_libraries	avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog	plugins/ADM_videoEncoder/ADM_vidEnc_avcodec	plugins/ADM_videoFilters/Decimate</H1>
    <B>gruntster at mail.berlios.de</B> 
    <A HREF="mailto:avidemux-svn-commit%40lists.berlios.de?Subject=Re%3A%20%5BAvidemux-svn-commit%5D%20r6063%20-%20in%0A%09branches/avidemux_2.5_branch_gruntster%3A%20avidemux/ADM_encoder%0A%09avidemux/ADM_libraries%0A%09avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog%0A%09plugins/ADM_videoEncoder/ADM_vidEnc_avcodec%0A%09plugins/ADM_videoFilters/Decimate&In-Reply-To=%3C201004052114.o35LEYZ9016897%40sheep.berlios.de%3E"
       TITLE="[Avidemux-svn-commit] r6063 - in	branches/avidemux_2.5_branch_gruntster: avidemux/ADM_encoder	avidemux/ADM_libraries	avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog	plugins/ADM_videoEncoder/ADM_vidEnc_avcodec	plugins/ADM_videoFilters/Decimate">gruntster at mail.berlios.de
       </A><BR>
    <I>Mon Apr  5 23:14:34 CEST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="003266.html">[Avidemux-svn-commit] r6062 -	branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder
</A></li>
        <LI>Next message: <A HREF="003268.html">[Avidemux-svn-commit] r6064 - in	branches/avidemux_2.5_branch_gruntster/platforms/windows:	build_scripts/avidemux installer
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3267">[ date ]</a>
              <a href="thread.html#3267">[ thread ]</a>
              <a href="subject.html#3267">[ subject ]</a>
              <a href="author.html#3267">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: gruntster
Date: 2010-04-05 23:14:29 +0200 (Mon, 05 Apr 2010)
New Revision: 6063

Removed:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libsamplerate/
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libtwolame/
Modified:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/ADM_externalEncoder.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs.cpp
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/dvEncoder.cpp
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/Decimate/ADM_vidDecDec_param.h
Log:
[misc] cosmetic tidy-ups

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/ADM_externalEncoder.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/ADM_externalEncoder.cpp	2010-04-05 21:11:21 UTC (rev 6062)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/ADM_externalEncoder.cpp	2010-04-05 21:14:29 UTC (rev 6063)
@@ -150,8 +150,6 @@
 uint8_t externalEncoder::encode(uint32_t frame, ADMBitstream *out)
 {
 	uint32_t l, f;
-	int outLength, videoFrameType;
-	int64_t ptsFrame;
 	vidEncEncodeParameters params;
 
 	if (frame != UINT32_MAX &amp;&amp; !_in-&gt;getFrameNumberNoAlloc(frame, &amp;l, _vbuffer, &amp;f))

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs.cpp	2010-04-05 21:11:21 UTC (rev 6062)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs.cpp	2010-04-05 21:14:29 UTC (rev 6063)
@@ -1,328 +1,328 @@
-#include &quot;ADM_toolkitGtk.h&quot;
-#include &quot;DIA_coreToolkit.h&quot;
-
-static GtkWidget       *create_dialog1 (void);
-static void             updateStatus(void);
-static int              getSelection(GtkWidget *dialog);
-extern bool parseECMAScript(const char *name);
-static const char *StringStatus[]={QT_TR_NOOP(&quot;Ready&quot;),QT_TR_NOOP(&quot;Succeeded&quot;),QT_TR_NOOP(&quot;Failed&quot;),QT_TR_NOOP(&quot;Deleted&quot;),QT_TR_NOOP(&quot;Running&quot;)};
-
-
-typedef enum 
-{
-        STATUS_READY=0,
-        STATUS_SUCCEED,
-        STATUS_FAILED,
-        STATUS_DELETED,
-        STATUS_RUNNING
-}JOB_STATUS;
-
-
-typedef struct ADM_Job_Descriptor
-{
-  JOB_STATUS  status;
-  ADM_date    startDate;
-  ADM_date    endDate;
-};
-
-typedef enum 
-{
-        COMMAND_DELETE_ALL=1,
-        COMMAND_DELETE=2,
-        COMMAND_RUN_ALL=3,
-        COMMAND_RUN=4
-};
-
-
-typedef struct JobsDescriptor
-{
-        GtkWidget *dialog;
-        GtkListStore *store;
-        uint32_t  nb;
-        char      **name;
-        ADM_Job_Descriptor *status;
-}JobsDescriptor;
-
-static JobsDescriptor jobs;
-
-uint8_t  DIA_job(uint32_t nb, char **name)
-{
-GtkListStore *store;
-
-GtkTreeViewColumn *column,*column2,*column3;
-GtkCellRenderer *renderer;
-
-        int ret=0;
-        
-
-
-        GtkWidget *dialog;
-
-        dialog=create_dialog1();
-
+#include &quot;ADM_toolkitGtk.h&quot;
+#include &quot;DIA_coreToolkit.h&quot;
+
+static GtkWidget       *create_dialog1 (void);
+static void             updateStatus(void);
+static int              getSelection(GtkWidget *dialog);
+extern bool parseECMAScript(const char *name);
+static const char *StringStatus[]={QT_TR_NOOP(&quot;Ready&quot;),QT_TR_NOOP(&quot;Succeeded&quot;),QT_TR_NOOP(&quot;Failed&quot;),QT_TR_NOOP(&quot;Deleted&quot;),QT_TR_NOOP(&quot;Running&quot;)};
+
+
+typedef enum 
+{
+        STATUS_READY=0,
+        STATUS_SUCCEED,
+        STATUS_FAILED,
+        STATUS_DELETED,
+        STATUS_RUNNING
+}JOB_STATUS;
+
+
+struct ADM_Job_Descriptor
+{
+  JOB_STATUS  status;
+  ADM_date    startDate;
+  ADM_date    endDate;
+};
+
+enum 
+{
+        COMMAND_DELETE_ALL=1,
+        COMMAND_DELETE=2,
+        COMMAND_RUN_ALL=3,
+        COMMAND_RUN=4
+};
+
+
+typedef struct JobsDescriptor
+{
+        GtkWidget *dialog;
+        GtkListStore *store;
+        uint32_t  nb;
+        char      **name;
+        ADM_Job_Descriptor *status;
+}JobsDescriptor;
+
+static JobsDescriptor jobs;
+
+uint8_t  DIA_job(uint32_t nb, char **name)
+{
+GtkListStore *store;
+
+GtkTreeViewColumn *column,*column2,*column3;
+GtkCellRenderer *renderer;
+
+        int ret=0;
+        
+
+
+        GtkWidget *dialog;
+
+        dialog=create_dialog1();
+
 		gtk_dialog_set_alternative_button_order(GTK_DIALOG(dialog),
 									GTK_RESPONSE_OK,
 									GTK_RESPONSE_CANCEL,
-									-1);
-
-        gtk_register_dialog(dialog);
-        
-        
-        store=gtk_list_store_new (3, G_TYPE_STRING, G_TYPE_STRING,G_TYPE_STRING);
-        
-        // initialize our job structure
-        jobs.dialog=dialog;
-        jobs.nb=nb;
-        jobs.name=name;
-        jobs.status=new ADM_Job_Descriptor[nb];
-        jobs.store=store;
-        memset(jobs.status,0,jobs.nb*sizeof(ADM_Job_Descriptor));
-
-        gtk_tree_view_set_model(GTK_TREE_VIEW(WID(treeview1)),GTK_TREE_MODEL (store));
-        gtk_tree_view_columns_autosize(GTK_TREE_VIEW(WID(treeview1)));
-
-        // Add columns
-
-        renderer = gtk_cell_renderer_text_new ();
-        column = gtk_tree_view_column_new_with_attributes (QT_TR_NOOP(&quot;  Job Name  &quot;), renderer,
-                                                      &quot;markup&quot;, (GdkModifierType) 0,
-                                                      NULL);
-        gtk_tree_view_append_column (GTK_TREE_VIEW (WID(treeview1)), column);
-
-        column2 = gtk_tree_view_column_new_with_attributes (QT_TR_NOOP(&quot;Started at&quot;), renderer,
-                                                      &quot;markup&quot;, (GdkModifierType) 1,
-                                                      NULL);
-        gtk_tree_view_append_column (GTK_TREE_VIEW (WID(treeview1)), column2);
-        column3 = gtk_tree_view_column_new_with_attributes (QT_TR_NOOP(&quot;Finished at&quot;), renderer,
-            &quot;markup&quot;, (GdkModifierType) 2,
-            NULL);
-        gtk_tree_view_append_column (GTK_TREE_VIEW (WID(treeview1)), column3);
-
-        //
-        #define ASSOCIATE(x,y)   gtk_dialog_add_action_widget (GTK_DIALOG (dialog), WID(x),y)
-            ASSOCIATE(buttonDelete,COMMAND_DELETE);
-            ASSOCIATE(buttonDeleteAll,COMMAND_DELETE_ALL);
-            ASSOCIATE(buttonRunAll,COMMAND_RUN_ALL);
-            ASSOCIATE(buttonRun,COMMAND_RUN);
-        //
-         
-        int running=1;
-        gtk_widget_set_usize(WID(treeview1), 180, 300);
-        while(running)
-        {
-                int sel=0,event;
-                updateStatus();
-                switch(event=gtk_dialog_run(GTK_DIALOG(dialog)))
-                {
-                        case GTK_RESPONSE_OK : running=0;break;
-                        case GTK_RESPONSE_APPLY : running=0;break;
-                        case GTK_RESPONSE_CANCEL :
-                        case GTK_RESPONSE_DELETE_EVENT:
-                                         running=0;break;
-                        case COMMAND_DELETE_ALL:
-                                        if(GUI_Confirmation_HIG(QT_TR_NOOP(&quot;Sure!&quot;),QT_TR_NOOP(&quot;Delete ALL jobs&quot;),QT_TR_NOOP(&quot;Are you sure you want to delete all jobs ?&quot;)))
-                                        {
-                                                for(int i=0;i&lt;jobs.nb;i++) jobs.status[i].status=STATUS_DELETED;
-                                        }
-                                        break;
-                        case COMMAND_RUN: 
-                                        sel=getSelection(jobs.dialog);
-                                        if(sel&gt;=jobs.nb) break;
-                                        jobs.status[sel].status=STATUS_RUNNING;
-                                        updateStatus();
-                                        GUI_Quiet();
-                                        TLK_getDate(&amp;(jobs.status[sel].startDate));
-                                        if(parseECMAScript(jobs.name[sel])) jobs.status[sel].status=STATUS_SUCCEED;
-                                        else jobs.status[sel].status=STATUS_FAILED;
-                                        TLK_getDate(&amp;(jobs.status[sel].endDate));
-                                        updateStatus();
-                                        GUI_Verbose();
-                                        break;
-                        case COMMAND_RUN_ALL: 
-                                        GUI_Quiet();
-                                        for(int i=0;i&lt;jobs.nb;i++)
-                                        {
-                                          if(jobs.status[i].status==STATUS_DELETED) continue;
-                                          if(jobs.status[i].status==STATUS_SUCCEED) continue;
-                                          jobs.status[i].status=STATUS_RUNNING;
-                                          TLK_getDate(&amp;(jobs.status[i].startDate));
-                                          updateStatus();
-                                          if(parseECMAScript(jobs.name[i])) jobs.status[i].status=STATUS_SUCCEED;
-                                                        else jobs.status[i].status=STATUS_FAILED;
-                                        TLK_getDate(&amp;(jobs.status[i].endDate));
-
-                                        }
-                                        updateStatus();
-                                        GUI_Verbose();
-                                        break;
-                        case COMMAND_DELETE: 
-                                        sel=getSelection(jobs.dialog);
-                                        if(sel&gt;=jobs.nb) break;
-                                        if(GUI_Confirmation_HIG(QT_TR_NOOP(&quot;Sure!&quot;),QT_TR_NOOP(&quot;Delete job&quot;),QT_TR_NOOP(&quot;Are you sure you want to delete %s job ?&quot;),ADM_GetFileName(jobs.name[sel])))
-                                        {
-                                                jobs.status[sel].status=STATUS_DELETED;
-                                        }
-                                        break;
-
-                        
-                        default:
-                                printf(&quot;Event:%d\n&quot;,event); 
-                                GUI_Error_HIG(&quot;Jobs&quot;,QT_TR_NOOP(&quot;Unknown event&quot;));break;
-                }
-                
-        }
-        gtk_unregister_dialog(dialog);
-        gtk_widget_destroy(dialog);
-
-        // Now delete the &quot;deleted&quot; jobs
-        for(int i=0;i&lt;jobs.nb;i++)
-        {
-                if(jobs.status[i].status==STATUS_DELETED)
-                {
-                        unlink(jobs.name[i]);
-                }
-
-        }
-
-        delete [] jobs.status;
-
-        return ret;
-}
-//**************************************************
-int              getSelection(GtkWidget *dialog)
-{
-uint32_t n=0xffff;
-        if(! getSelectionNumber(jobs.nb,WID(treeview1) , jobs.store,&amp;n)) return 0xffff;
-        return n;
-}
-//*************************************
-void updateStatus(void)
-{
-GtkTreeIter iter;
-char *str;
-ADM_date  *date;
-char *str1,str2[200],str3[200];
-
-        gtk_list_store_clear (jobs.store);
-        for (uint32_t i = 0; i &lt; jobs.nb; i++)
-        {
-               str1 = g_markup_printf_escaped(&quot;&lt;span weight=\&quot;heavy\&quot;&gt;%s&lt;/span&gt;\n&quot; 
-               &quot;&lt;span size=\&quot;smaller\&quot; style=\&quot;oblique\&quot;&gt;%s&lt;/span&gt;&quot;
-                , ADM_GetFileName(jobs.name[i]), StringStatus[jobs.status[i].status]);
-
-                date=&amp;(jobs.status[i].startDate);
-                sprintf(str2,&quot;%02d:%02d:%02d&quot;,date-&gt;hours,
-                                          date-&gt;minutes,
-                                          date-&gt;seconds);
-
-                date=&amp;(jobs.status[i].endDate);
-                sprintf(str3,&quot;%02d:%02d:%02d&quot;,date-&gt;hours,
-                        date-&gt;minutes,
-                        date-&gt;seconds);
-
-                gtk_list_store_append (jobs.store, &amp;iter);
-                gtk_list_store_set (jobs.store, &amp;iter, 0,str1,1,str2,2,str3,-1);
-                printf(&quot;Start : %s\n&quot;,str2);
-                printf(&quot;End : %s\n&quot;,str3);
-
-				g_free(str1);
-        }
-}
-//*************************************
-
-GtkWidget*
-create_dialog1 (void)
-{
-  GtkWidget *dialog1;
-  GtkWidget *dialog_vbox1;
-  GtkWidget *hbox1;
-  GtkWidget *scrolledwindow1;
-  GtkWidget *treeview1;
-  GtkWidget *vbuttonbox1;
-  GtkWidget *buttonDeleteAll;
-  GtkWidget *buttonDelete;
-  GtkWidget *buttonRunAll;
-  GtkWidget *buttonRun;
-  GtkWidget *dialog_action_area1;
-  GtkWidget *cancelbutton1;
-  GtkWidget *okbutton1;
-
-  dialog1 = gtk_dialog_new ();
-  gtk_window_set_title (GTK_WINDOW (dialog1), QT_TR_NOOP(&quot;Jobs&quot;));
-  gtk_window_set_type_hint (GTK_WINDOW (dialog1), GDK_WINDOW_TYPE_HINT_DIALOG);
-
-  dialog_vbox1 = GTK_DIALOG (dialog1)-&gt;vbox;
-  gtk_widget_show (dialog_vbox1);
-
-  hbox1 = gtk_hbox_new (FALSE, 0);
-  gtk_widget_show (hbox1);
-  gtk_box_pack_start (GTK_BOX (dialog_vbox1), hbox1, TRUE, TRUE, 0);
-
-  scrolledwindow1 = gtk_scrolled_window_new (NULL, NULL);
-  gtk_widget_show (scrolledwindow1);
-  gtk_box_pack_start (GTK_BOX (hbox1), scrolledwindow1, TRUE, TRUE, 0);
-  gtk_scrolled_window_set_policy (GTK_SCROLLED_WINDOW (scrolledwindow1), GTK_POLICY_AUTOMATIC, GTK_POLICY_AUTOMATIC);
-  gtk_scrolled_window_set_shadow_type (GTK_SCROLLED_WINDOW (scrolledwindow1), GTK_SHADOW_IN);
-
-  treeview1 = gtk_tree_view_new ();
-  gtk_widget_show (treeview1);
-  gtk_container_add (GTK_CONTAINER (scrolledwindow1), treeview1);
-  //gtk_widget_set_size_request (treeview1, 300, -1);
-
-  vbuttonbox1 = gtk_vbutton_box_new ();
-  gtk_widget_show (vbuttonbox1);
-  gtk_box_pack_start (GTK_BOX (hbox1), vbuttonbox1, FALSE, FALSE, 0);
-  gtk_button_box_set_layout (GTK_BUTTON_BOX (vbuttonbox1), GTK_BUTTONBOX_START);
-
-  buttonDeleteAll = gtk_button_new_with_mnemonic (QT_TR_NOOP(&quot;Delete All Jobs&quot;));
-  gtk_widget_show (buttonDeleteAll);
-  gtk_container_add (GTK_CONTAINER (vbuttonbox1), buttonDeleteAll);
-  GTK_WIDGET_SET_FLAGS (buttonDeleteAll, GTK_CAN_DEFAULT);
-
-  buttonDelete = gtk_button_new_with_mnemonic (QT_TR_NOOP(&quot;Delete Job&quot;));
-  gtk_widget_show (buttonDelete);
-  gtk_container_add (GTK_CONTAINER (vbuttonbox1), buttonDelete);
-  GTK_WIDGET_SET_FLAGS (buttonDelete, GTK_CAN_DEFAULT);
-
-  buttonRunAll = gtk_button_new_with_mnemonic (QT_TR_NOOP(&quot;Run all jobs&quot;));
-  gtk_widget_show (buttonRunAll);
-  gtk_container_add (GTK_CONTAINER (vbuttonbox1), buttonRunAll);
-  GTK_WIDGET_SET_FLAGS (buttonRunAll, GTK_CAN_DEFAULT);
-
-  buttonRun = gtk_button_new_with_mnemonic (QT_TR_NOOP(&quot;Run Job&quot;));
-  gtk_widget_show (buttonRun);
-  gtk_container_add (GTK_CONTAINER (vbuttonbox1), buttonRun);
-  GTK_WIDGET_SET_FLAGS (buttonRun, GTK_CAN_DEFAULT);
-
-  dialog_action_area1 = GTK_DIALOG (dialog1)-&gt;action_area;
-  gtk_widget_show (dialog_action_area1);
-  gtk_button_box_set_layout (GTK_BUTTON_BOX (dialog_action_area1), GTK_BUTTONBOX_END);
-
-  cancelbutton1 = gtk_button_new_from_stock (&quot;gtk-cancel&quot;);
-  gtk_widget_show (cancelbutton1);
-  gtk_dialog_add_action_widget (GTK_DIALOG (dialog1), cancelbutton1, GTK_RESPONSE_CANCEL);
-  GTK_WIDGET_SET_FLAGS (cancelbutton1, GTK_CAN_DEFAULT);
-
-  okbutton1 = gtk_button_new_from_stock (&quot;gtk-ok&quot;);
-  gtk_widget_show (okbutton1);
-  gtk_dialog_add_action_widget (GTK_DIALOG (dialog1), okbutton1, GTK_RESPONSE_OK);
-  GTK_WIDGET_SET_FLAGS (okbutton1, GTK_CAN_DEFAULT);
-
-  /* Store pointers to all widgets, for use by lookup_widget(). */
-  GLADE_HOOKUP_OBJECT_NO_REF (dialog1, dialog1, &quot;dialog1&quot;);
-  GLADE_HOOKUP_OBJECT_NO_REF (dialog1, dialog_vbox1, &quot;dialog_vbox1&quot;);
-  GLADE_HOOKUP_OBJECT (dialog1, hbox1, &quot;hbox1&quot;);
-  GLADE_HOOKUP_OBJECT (dialog1, scrolledwindow1, &quot;scrolledwindow1&quot;);
-  GLADE_HOOKUP_OBJECT (dialog1, treeview1, &quot;treeview1&quot;);
-  GLADE_HOOKUP_OBJECT (dialog1, vbuttonbox1, &quot;vbuttonbox1&quot;);
-  GLADE_HOOKUP_OBJECT (dialog1, buttonDeleteAll, &quot;buttonDeleteAll&quot;);
-  GLADE_HOOKUP_OBJECT (dialog1, buttonDelete, &quot;buttonDelete&quot;);
-  GLADE_HOOKUP_OBJECT (dialog1, buttonRunAll, &quot;buttonRunAll&quot;);
-  GLADE_HOOKUP_OBJECT (dialog1, buttonRun, &quot;buttonRun&quot;);
-  GLADE_HOOKUP_OBJECT_NO_REF (dialog1, dialog_action_area1, &quot;dialog_action_area1&quot;);
-  GLADE_HOOKUP_OBJECT (dialog1, cancelbutton1, &quot;cancelbutton1&quot;);
-  GLADE_HOOKUP_OBJECT (dialog1, okbutton1, &quot;okbutton1&quot;);
-
-  return dialog1;
-}
-
+									-1);
+
+        gtk_register_dialog(dialog);
+        
+        
+        store=gtk_list_store_new (3, G_TYPE_STRING, G_TYPE_STRING,G_TYPE_STRING);
+        
+        // initialize our job structure
+        jobs.dialog=dialog;
+        jobs.nb=nb;
+        jobs.name=name;
+        jobs.status=new ADM_Job_Descriptor[nb];
+        jobs.store=store;
+        memset(jobs.status,0,jobs.nb*sizeof(ADM_Job_Descriptor));
+
+        gtk_tree_view_set_model(GTK_TREE_VIEW(WID(treeview1)),GTK_TREE_MODEL (store));
+        gtk_tree_view_columns_autosize(GTK_TREE_VIEW(WID(treeview1)));
+
+        // Add columns
+
+        renderer = gtk_cell_renderer_text_new ();
+        column = gtk_tree_view_column_new_with_attributes (QT_TR_NOOP(&quot;  Job Name  &quot;), renderer,
+                                                      &quot;markup&quot;, (GdkModifierType) 0,
+                                                      NULL);
+        gtk_tree_view_append_column (GTK_TREE_VIEW (WID(treeview1)), column);
+
+        column2 = gtk_tree_view_column_new_with_attributes (QT_TR_NOOP(&quot;Started at&quot;), renderer,
+                                                      &quot;markup&quot;, (GdkModifierType) 1,
+                                                      NULL);
+        gtk_tree_view_append_column (GTK_TREE_VIEW (WID(treeview1)), column2);
+        column3 = gtk_tree_view_column_new_with_attributes (QT_TR_NOOP(&quot;Finished at&quot;), renderer,
+            &quot;markup&quot;, (GdkModifierType) 2,
+            NULL);
+        gtk_tree_view_append_column (GTK_TREE_VIEW (WID(treeview1)), column3);
+
+        //
+        #define ASSOCIATE(x,y)   gtk_dialog_add_action_widget (GTK_DIALOG (dialog), WID(x),y)
+            ASSOCIATE(buttonDelete,COMMAND_DELETE);
+            ASSOCIATE(buttonDeleteAll,COMMAND_DELETE_ALL);
+            ASSOCIATE(buttonRunAll,COMMAND_RUN_ALL);
+            ASSOCIATE(buttonRun,COMMAND_RUN);
+        //
+         
+        int running=1;
+        gtk_widget_set_usize(WID(treeview1), 180, 300);
+        while(running)
+        {
+                int sel=0,event;
+                updateStatus();
+                switch(event=gtk_dialog_run(GTK_DIALOG(dialog)))
+                {
+                        case GTK_RESPONSE_OK : running=0;break;
+                        case GTK_RESPONSE_APPLY : running=0;break;
+                        case GTK_RESPONSE_CANCEL :
+                        case GTK_RESPONSE_DELETE_EVENT:
+                                         running=0;break;
+                        case COMMAND_DELETE_ALL:
+                                        if(GUI_Confirmation_HIG(QT_TR_NOOP(&quot;Sure!&quot;),QT_TR_NOOP(&quot;Delete ALL jobs&quot;),QT_TR_NOOP(&quot;Are you sure you want to delete all jobs ?&quot;)))
+                                        {
+                                                for(int i=0;i&lt;jobs.nb;i++) jobs.status[i].status=STATUS_DELETED;
+                                        }
+                                        break;
+                        case COMMAND_RUN: 
+                                        sel=getSelection(jobs.dialog);
+                                        if(sel&gt;=jobs.nb) break;
+                                        jobs.status[sel].status=STATUS_RUNNING;
+                                        updateStatus();
+                                        GUI_Quiet();
+                                        TLK_getDate(&amp;(jobs.status[sel].startDate));
+                                        if(parseECMAScript(jobs.name[sel])) jobs.status[sel].status=STATUS_SUCCEED;
+                                        else jobs.status[sel].status=STATUS_FAILED;
+                                        TLK_getDate(&amp;(jobs.status[sel].endDate));
+                                        updateStatus();
+                                        GUI_Verbose();
+                                        break;
+                        case COMMAND_RUN_ALL: 
+                                        GUI_Quiet();
+                                        for(int i=0;i&lt;jobs.nb;i++)
+                                        {
+                                          if(jobs.status[i].status==STATUS_DELETED) continue;
+                                          if(jobs.status[i].status==STATUS_SUCCEED) continue;
+                                          jobs.status[i].status=STATUS_RUNNING;
+                                          TLK_getDate(&amp;(jobs.status[i].startDate));
+                                          updateStatus();
+                                          if(parseECMAScript(jobs.name[i])) jobs.status[i].status=STATUS_SUCCEED;
+                                                        else jobs.status[i].status=STATUS_FAILED;
+                                        TLK_getDate(&amp;(jobs.status[i].endDate));
+
+                                        }
+                                        updateStatus();
+                                        GUI_Verbose();
+                                        break;
+                        case COMMAND_DELETE: 
+                                        sel=getSelection(jobs.dialog);
+                                        if(sel&gt;=jobs.nb) break;
+                                        if(GUI_Confirmation_HIG(QT_TR_NOOP(&quot;Sure!&quot;),QT_TR_NOOP(&quot;Delete job&quot;),QT_TR_NOOP(&quot;Are you sure you want to delete %s job ?&quot;),ADM_GetFileName(jobs.name[sel])))
+                                        {
+                                                jobs.status[sel].status=STATUS_DELETED;
+                                        }
+                                        break;
+
+                        
+                        default:
+                                printf(&quot;Event:%d\n&quot;,event); 
+                                GUI_Error_HIG(&quot;Jobs&quot;,QT_TR_NOOP(&quot;Unknown event&quot;));break;
+                }
+                
+        }
+        gtk_unregister_dialog(dialog);
+        gtk_widget_destroy(dialog);
+
+        // Now delete the &quot;deleted&quot; jobs
+        for(int i=0;i&lt;jobs.nb;i++)
+        {
+                if(jobs.status[i].status==STATUS_DELETED)
+                {
+                        unlink(jobs.name[i]);
+                }
+
+        }
+
+        delete [] jobs.status;
+
+        return ret;
+}
+//**************************************************
+int              getSelection(GtkWidget *dialog)
+{
+uint32_t n=0xffff;
+        if(! getSelectionNumber(jobs.nb,WID(treeview1) , jobs.store,&amp;n)) return 0xffff;
+        return n;
+}
+//*************************************
+void updateStatus(void)
+{
+GtkTreeIter iter;
+char *str;
+ADM_date  *date;
+char *str1,str2[200],str3[200];
+
+        gtk_list_store_clear (jobs.store);
+        for (uint32_t i = 0; i &lt; jobs.nb; i++)
+        {
+               str1 = g_markup_printf_escaped(&quot;&lt;span weight=\&quot;heavy\&quot;&gt;%s&lt;/span&gt;\n&quot; 
+               &quot;&lt;span size=\&quot;smaller\&quot; style=\&quot;oblique\&quot;&gt;%s&lt;/span&gt;&quot;
+                , ADM_GetFileName(jobs.name[i]), StringStatus[jobs.status[i].status]);
+
+                date=&amp;(jobs.status[i].startDate);
+                sprintf(str2,&quot;%02d:%02d:%02d&quot;,date-&gt;hours,
+                                          date-&gt;minutes,
+                                          date-&gt;seconds);
+
+                date=&amp;(jobs.status[i].endDate);
+                sprintf(str3,&quot;%02d:%02d:%02d&quot;,date-&gt;hours,
+                        date-&gt;minutes,
+                        date-&gt;seconds);
+
+                gtk_list_store_append (jobs.store, &amp;iter);
+                gtk_list_store_set (jobs.store, &amp;iter, 0,str1,1,str2,2,str3,-1);
+                printf(&quot;Start : %s\n&quot;,str2);
+                printf(&quot;End : %s\n&quot;,str3);
+
+				g_free(str1);
+        }
+}
+//*************************************
+
+GtkWidget*
+create_dialog1 (void)
+{
+  GtkWidget *dialog1;
+  GtkWidget *dialog_vbox1;
+  GtkWidget *hbox1;
+  GtkWidget *scrolledwindow1;
+  GtkWidget *treeview1;
+  GtkWidget *vbuttonbox1;
+  GtkWidget *buttonDeleteAll;
+  GtkWidget *buttonDelete;
+  GtkWidget *buttonRunAll;
+  GtkWidget *buttonRun;
+  GtkWidget *dialog_action_area1;
+  GtkWidget *cancelbutton1;
+  GtkWidget *okbutton1;
+
+  dialog1 = gtk_dialog_new ();
+  gtk_window_set_title (GTK_WINDOW (dialog1), QT_TR_NOOP(&quot;Jobs&quot;));
+  gtk_window_set_type_hint (GTK_WINDOW (dialog1), GDK_WINDOW_TYPE_HINT_DIALOG);
+
+  dialog_vbox1 = GTK_DIALOG (dialog1)-&gt;vbox;
+  gtk_widget_show (dialog_vbox1);
+
+  hbox1 = gtk_hbox_new (FALSE, 0);
+  gtk_widget_show (hbox1);
+  gtk_box_pack_start (GTK_BOX (dialog_vbox1), hbox1, TRUE, TRUE, 0);
+
+  scrolledwindow1 = gtk_scrolled_window_new (NULL, NULL);
+  gtk_widget_show (scrolledwindow1);
+  gtk_box_pack_start (GTK_BOX (hbox1), scrolledwindow1, TRUE, TRUE, 0);
+  gtk_scrolled_window_set_policy (GTK_SCROLLED_WINDOW (scrolledwindow1), GTK_POLICY_AUTOMATIC, GTK_POLICY_AUTOMATIC);
+  gtk_scrolled_window_set_shadow_type (GTK_SCROLLED_WINDOW (scrolledwindow1), GTK_SHADOW_IN);
+
+  treeview1 = gtk_tree_view_new ();
+  gtk_widget_show (treeview1);
+  gtk_container_add (GTK_CONTAINER (scrolledwindow1), treeview1);
+  //gtk_widget_set_size_request (treeview1, 300, -1);
+
+  vbuttonbox1 = gtk_vbutton_box_new ();
+  gtk_widget_show (vbuttonbox1);
+  gtk_box_pack_start (GTK_BOX (hbox1), vbuttonbox1, FALSE, FALSE, 0);
+  gtk_button_box_set_layout (GTK_BUTTON_BOX (vbuttonbox1), GTK_BUTTONBOX_START);
+
+  buttonDeleteAll = gtk_button_new_with_mnemonic (QT_TR_NOOP(&quot;Delete All Jobs&quot;));
+  gtk_widget_show (buttonDeleteAll);
+  gtk_container_add (GTK_CONTAINER (vbuttonbox1), buttonDeleteAll);
+  GTK_WIDGET_SET_FLAGS (buttonDeleteAll, GTK_CAN_DEFAULT);
+
+  buttonDelete = gtk_button_new_with_mnemonic (QT_TR_NOOP(&quot;Delete Job&quot;));
+  gtk_widget_show (buttonDelete);
+  gtk_container_add (GTK_CONTAINER (vbuttonbox1), buttonDelete);
+  GTK_WIDGET_SET_FLAGS (buttonDelete, GTK_CAN_DEFAULT);
+
+  buttonRunAll = gtk_button_new_with_mnemonic (QT_TR_NOOP(&quot;Run all jobs&quot;));
+  gtk_widget_show (buttonRunAll);
+  gtk_container_add (GTK_CONTAINER (vbuttonbox1), buttonRunAll);
+  GTK_WIDGET_SET_FLAGS (buttonRunAll, GTK_CAN_DEFAULT);
+
+  buttonRun = gtk_button_new_with_mnemonic (QT_TR_NOOP(&quot;Run Job&quot;));
+  gtk_widget_show (buttonRun);
+  gtk_container_add (GTK_CONTAINER (vbuttonbox1), buttonRun);
+  GTK_WIDGET_SET_FLAGS (buttonRun, GTK_CAN_DEFAULT);
+
+  dialog_action_area1 = GTK_DIALOG (dialog1)-&gt;action_area;
+  gtk_widget_show (dialog_action_area1);
+  gtk_button_box_set_layout (GTK_BUTTON_BOX (dialog_action_area1), GTK_BUTTONBOX_END);
+
+  cancelbutton1 = gtk_button_new_from_stock (&quot;gtk-cancel&quot;);
+  gtk_widget_show (cancelbutton1);
+  gtk_dialog_add_action_widget (GTK_DIALOG (dialog1), cancelbutton1, GTK_RESPONSE_CANCEL);
+  GTK_WIDGET_SET_FLAGS (cancelbutton1, GTK_CAN_DEFAULT);
+
+  okbutton1 = gtk_button_new_from_stock (&quot;gtk-ok&quot;);
+  gtk_widget_show (okbutton1);
+  gtk_dialog_add_action_widget (GTK_DIALOG (dialog1), okbutton1, GTK_RESPONSE_OK);
+  GTK_WIDGET_SET_FLAGS (okbutton1, GTK_CAN_DEFAULT);
+
+  /* Store pointers to all widgets, for use by lookup_widget(). */
+  GLADE_HOOKUP_OBJECT_NO_REF (dialog1, dialog1, &quot;dialog1&quot;);
+  GLADE_HOOKUP_OBJECT_NO_REF (dialog1, dialog_vbox1, &quot;dialog_vbox1&quot;);
+  GLADE_HOOKUP_OBJECT (dialog1, hbox1, &quot;hbox1&quot;);
+  GLADE_HOOKUP_OBJECT (dialog1, scrolledwindow1, &quot;scrolledwindow1&quot;);
+  GLADE_HOOKUP_OBJECT (dialog1, treeview1, &quot;treeview1&quot;);
+  GLADE_HOOKUP_OBJECT (dialog1, vbuttonbox1, &quot;vbuttonbox1&quot;);
+  GLADE_HOOKUP_OBJECT (dialog1, buttonDeleteAll, &quot;buttonDeleteAll&quot;);
+  GLADE_HOOKUP_OBJECT (dialog1, buttonDelete, &quot;buttonDelete&quot;);
+  GLADE_HOOKUP_OBJECT (dialog1, buttonRunAll, &quot;buttonRunAll&quot;);
+  GLADE_HOOKUP_OBJECT (dialog1, buttonRun, &quot;buttonRun&quot;);
+  GLADE_HOOKUP_OBJECT_NO_REF (dialog1, dialog_action_area1, &quot;dialog_action_area1&quot;);
+  GLADE_HOOKUP_OBJECT (dialog1, cancelbutton1, &quot;cancelbutton1&quot;);
+  GLADE_HOOKUP_OBJECT (dialog1, okbutton1, &quot;okbutton1&quot;);
+
+  return dialog1;
+}
+

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/dvEncoder.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/dvEncoder.cpp	2010-04-05 21:11:21 UTC (rev 6062)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/dvEncoder.cpp	2010-04-05 21:14:29 UTC (rev 6063)
@@ -58,9 +58,7 @@
 		{
 			if (properties-&gt;height == dvProfiles[i].height &amp;&amp; properties-&gt;width == dvProfiles[i].width &amp;&amp; 
 				((int)(properties-&gt;fpsNum * 1000.0 / properties-&gt;fpsDen) == (int)(dvProfiles[i].timeBase.num * 1000.0 / dvProfiles[i].timeBase.den)))
-			{
-#warning not sure it fixes all
-				//_context-&gt;pix_fmt = getAvCodecColourSpace(dvProfiles[i].pixFmt);
+			{
 				_supportedCsps[0] = dvProfiles[i].pixFmt;
 				validProfile = true;
 				break;

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/Decimate/ADM_vidDecDec_param.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/Decimate/ADM_vidDecDec_param.h	2010-04-05 21:11:21 UTC (rev 6062)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/Decimate/ADM_vidDecDec_param.h	2010-04-05 21:14:29 UTC (rev 6063)
@@ -9,7 +9,7 @@
 // Copyright: See COPYING file that comes with this distribution
 //
 //
-typedef struct DECIMATE_PARAM
+struct DECIMATE_PARAM
 {
 	uint32_t    cycle; // Integer 2..40
         uint32_t    mode;  // 0..3


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003266.html">[Avidemux-svn-commit] r6062 -	branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder
</A></li>
	<LI>Next message: <A HREF="003268.html">[Avidemux-svn-commit] r6064 - in	branches/avidemux_2.5_branch_gruntster/platforms/windows:	build_scripts/avidemux installer
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3267">[ date ]</a>
              <a href="thread.html#3267">[ thread ]</a>
              <a href="subject.html#3267">[ subject ]</a>
              <a href="author.html#3267">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">More information about the Avidemux-svn-commit
mailing list</a><br>
</body></html>
