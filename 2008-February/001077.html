<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Avidemux-svn-commit] r3811 - in	branches/avidemux_2.5_branch_mean/avidemux: ADM_audio	ADM_core/include ADM_libraries/ADM_utilities ADM_osSupport	ADM_outputs/oplug_avi
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/avidemux-svn-commit/2008-February/index.html" >
   <LINK REL="made" HREF="mailto:avidemux-svn-commit%40lists.berlios.de?Subject=Re%3A%20%5BAvidemux-svn-commit%5D%20r3811%20-%20in%0A%09branches/avidemux_2.5_branch_mean/avidemux%3A%20ADM_audio%0A%09ADM_core/include%20ADM_libraries/ADM_utilities%20ADM_osSupport%0A%09ADM_outputs/oplug_avi&In-Reply-To=%3C200802291835.m1TIZePE009466%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001076.html">
   
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Avidemux-svn-commit] r3811 - in	branches/avidemux_2.5_branch_mean/avidemux: ADM_audio	ADM_core/include ADM_libraries/ADM_utilities ADM_osSupport	ADM_outputs/oplug_avi</H1>
    <B>mean at BerliOS</B> 
    <A HREF="mailto:avidemux-svn-commit%40lists.berlios.de?Subject=Re%3A%20%5BAvidemux-svn-commit%5D%20r3811%20-%20in%0A%09branches/avidemux_2.5_branch_mean/avidemux%3A%20ADM_audio%0A%09ADM_core/include%20ADM_libraries/ADM_utilities%20ADM_osSupport%0A%09ADM_outputs/oplug_avi&In-Reply-To=%3C200802291835.m1TIZePE009466%40sheep.berlios.de%3E"
       TITLE="[Avidemux-svn-commit] r3811 - in	branches/avidemux_2.5_branch_mean/avidemux: ADM_audio	ADM_core/include ADM_libraries/ADM_utilities ADM_osSupport	ADM_outputs/oplug_avi">mean at mail.berlios.de
       </A><BR>
    <I>Fri Feb 29 19:35:40 CET 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="001076.html">[Avidemux-svn-commit] r3810 - in	branches/avidemux_2.5_branch_gruntster: . avidemux	avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2	avidemux/ADM_userInterfaces/ADM_commonUI cmake
</A></li>
        
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1077">[ date ]</a>
              <a href="thread.html#1077">[ thread ]</a>
              <a href="subject.html#1077">[ subject ]</a>
              <a href="author.html#1077">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: mean
Date: 2008-02-29 19:35:39 +0100 (Fri, 29 Feb 2008)
New Revision: 3811

Added:
   branches/avidemux_2.5_branch_mean/avidemux/ADM_osSupport/ADM_fileio.h
Removed:
   branches/avidemux_2.5_branch_mean/avidemux/ADM_core/include/ADM_fileio.h
Modified:
   branches/avidemux_2.5_branch_mean/avidemux/ADM_audio/aviaudio.hxx
   branches/avidemux_2.5_branch_mean/avidemux/ADM_core/include/ADM_assert.h
   branches/avidemux_2.5_branch_mean/avidemux/ADM_core/include/ADM_clock.h
   branches/avidemux_2.5_branch_mean/avidemux/ADM_core/include/ADM_cpuCap.h
   branches/avidemux_2.5_branch_mean/avidemux/ADM_core/include/ADM_default.h
   branches/avidemux_2.5_branch_mean/avidemux/ADM_core/include/ADM_inttype.h
   branches/avidemux_2.5_branch_mean/avidemux/ADM_core/include/ADM_mangle.h
   branches/avidemux_2.5_branch_mean/avidemux/ADM_core/include/ADM_misc.h
   branches/avidemux_2.5_branch_mean/avidemux/ADM_core/include/ADM_threads.h
   branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_utilities/ADM_fileio.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_osSupport/ADM_quota.h
   branches/avidemux_2.5_branch_mean/avidemux/ADM_outputs/oplug_avi/avilist.h
   branches/avidemux_2.5_branch_mean/avidemux/ADM_outputs/oplug_avi/op_avisave.h
   branches/avidemux_2.5_branch_mean/avidemux/ADM_outputs/oplug_avi/op_aviwrite.cpp
Log:
[core] Move fileio away from core


Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_audio/aviaudio.hxx
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_audio/aviaudio.hxx	2008-02-28 23:33:15 UTC (rev 3810)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_audio/aviaudio.hxx	2008-02-29 18:35:39 UTC (rev 3811)
@@ -70,7 +70,7 @@
 #define WAV_NELLYMOSER   9901
 #define WAV_UNKNOWN     9999
 #include &quot;../ADM_audiocodec/ADM_audiocodec.h&quot;
-#include &quot;ADM_fileio.h&quot;
+#include &quot;ADM_osSupport/ADM_fileio.h&quot;
 
 
 

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_core/include/ADM_assert.h
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_core/include/ADM_assert.h	2008-02-28 23:33:15 UTC (rev 3810)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_core/include/ADM_assert.h	2008-02-29 18:35:39 UTC (rev 3811)
@@ -40,8 +40,8 @@
 int             ADM_fclose (FILE *file);
 uint8_t         ADM_fileExist(char *name);
 uint8_t         ADM_mkdir(const char *name);
-char            *ADM_rindex(const char *s, int c);
-char            *ADM_index(const char *s, int c);
+//char            *ADM_rindex(const char *s, int c);
+//char            *ADM_index(const char *s, int c);
 
 /* Replacements for memory allocation functions */
 extern void     *ADM_alloc(size_t size);

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_core/include/ADM_clock.h
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_core/include/ADM_clock.h	2008-02-28 23:33:15 UTC (rev 3810)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_core/include/ADM_clock.h	2008-02-29 18:35:39 UTC (rev 3811)
@@ -1,4 +1,19 @@
-//
+/** *************************************************************************
+    \fn ADM_clock.h
+    \brief Handle time class
+                      
+    copyright            : (C) 2008 by mean
+    
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ ***************************************************************************/
+
 #ifndef __CLK__
 #define __CLK__
 class Clock

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_core/include/ADM_cpuCap.h
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_core/include/ADM_cpuCap.h	2008-02-28 23:33:15 UTC (rev 3810)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_core/include/ADM_cpuCap.h	2008-02-29 18:35:39 UTC (rev 3811)
@@ -1,14 +1,19 @@
-//
-// C++ Interface: ADM_cpuCap
-//
-// Description: 
-//
-//
-// Author: mean &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">fixounet at free.fr</A>&gt;, (C) 2004
-//
-// Copyright: See COPYING file that comes with this distribution
-//
-//
+/** *************************************************************************
+    \fn ADM_cpuCap.h
+    \brief Handle cpu capabilities (MMX/SSE/...)
+                      
+    copyright            : (C) 2008 by mean
+    
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ ***************************************************************************/
+
 #if defined(ARCH_X86_64) ||defined(ARCH_X86)
 
 #define CHECK_Z(x) {if(CpuCaps::myCpuCaps &amp; ADM_CPU_##x &amp; CpuCaps::myCpuMask) return 1; else return 0;} 

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_core/include/ADM_default.h
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_core/include/ADM_default.h	2008-02-28 23:33:15 UTC (rev 3810)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_core/include/ADM_default.h	2008-02-29 18:35:39 UTC (rev 3811)
@@ -1,11 +1,13 @@
-/***************************************************************************
-                          ADM_default.h  -  description
-                             -------------------
-                Includes all core headers (var types, string, mutex, file,...)
+/** *************************************************************************
+             
+    \fn ADM_default.h
+    \brief include that file to get most of the basic types &amp; functions
+                      
     copyright            : (C) 2008 by mean
-    email                : <A HREF="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">fixounet at free.fr</A>
+    
  ***************************************************************************/
 
+
 /***************************************************************************
  *                                                                         *
  *   This program is free software; you can redistribute it and/or modify  *

Deleted: branches/avidemux_2.5_branch_mean/avidemux/ADM_core/include/ADM_fileio.h
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_core/include/ADM_fileio.h	2008-02-28 23:33:15 UTC (rev 3810)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_core/include/ADM_fileio.h	2008-02-29 18:35:39 UTC (rev 3811)
@@ -1,38 +0,0 @@
-//
-// C++ Interface: %{MODULE}
-//
-// Description: 
-//
-//
-// Author: Mean <A HREF="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">fixounet at free.Fr</A>, (C) 2005 GPL 2
-//
-// Copyright: See COPYING file that comes with this distribution
-//      This tries to implement bufferd output io
-//      to speed up things a bit
-//
-#ifndef ADM_FILE_IO
-#define ADM_FILE_IO
-
-
-
-class ADMFile
-{
-protected:
-        FILE            *_out;
-        uint32_t        _fill;
-        uint8_t         *_buffer;	  
-        uint64_t        _curPos;
-public:
-                        ADMFile();
-                        ~ADMFile();
-        uint8_t         open(FILE *in);
-        uint8_t         write(uint8_t *in, uint32_t size);
-        uint8_t         flush(void);
-        uint8_t         seek(uint64_t where);
-        uint64_t        tell(void);
-	  
-
-
-};
-
-#endif

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_core/include/ADM_inttype.h
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_core/include/ADM_inttype.h	2008-02-28 23:33:15 UTC (rev 3810)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_core/include/ADM_inttype.h	2008-02-29 18:35:39 UTC (rev 3811)
@@ -1,19 +1,11 @@
-/***************************************************************************
-                          default.h  -  description
-                             -------------------
-    begin                : Thu Nov 1 2001
-    copyright            : (C) 2001 by mean
-    email                : <A HREF="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">fixounet at free.fr</A>
+/** *************************************************************************
+    \fn ADM_inttype.h
+    \brief Defint plaform agnostic var type
+                      
+    copyright            : (C) 2008 by mean
+    
  ***************************************************************************/
 
-/***************************************************************************
- *                                                                         *
- *   This program is free software; you can redistribute it and/or modify  *
- *   it under the terms of the GNU General Public License as published by  *
- *   the Free Software Foundation; either version 2 of the License, or     *
- *   (at your option) any later version.                                   *
- *                                                                         *
- ***************************************************************************/
 #ifndef __ZDEFAULT
 #define __ZDEFAULT
 

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_core/include/ADM_mangle.h
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_core/include/ADM_mangle.h	2008-02-28 23:33:15 UTC (rev 3810)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_core/include/ADM_mangle.h	2008-02-29 18:35:39 UTC (rev 3811)
@@ -1,6 +1,10 @@
-// Symbol mangling for asm
-// is different on win32
-// Shamelessly borrowed from lavcodec
+/** *************************************************************************
+    \fn ADM_mangle.h
+    \brief Handle symbol mangling &amp; register name for inline asm
+                      
+    copyright            : (C) 2008 by mean
+    
+ ***************************************************************************/
 
 #ifdef CYG_MANGLING // CYGWIN
 	#define Mangle(x) &quot;_&quot; #x

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_core/include/ADM_misc.h
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_core/include/ADM_misc.h	2008-02-28 23:33:15 UTC (rev 3810)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_core/include/ADM_misc.h	2008-02-29 18:35:39 UTC (rev 3811)
@@ -1,17 +1,11 @@
-/***************************************************************************
-                          ADM_misc.h  -  description
-    copyright            : (C) 2001 by mean
-    email                : <A HREF="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">fixounet at free.fr</A>
+/** *************************************************************************
+    \fn ADM_misc.h
+    \brief Handle string/log/... related functions
+                      
+    copyright            : (C) 2008 by mean
+    
  ***************************************************************************/
 
-/***************************************************************************
- *                                                                         *
- *   This program is free software; you can redistribute it and/or modify  *
- *   it under the terms of the GNU General Public License as published by  *
- *   the Free Software Foundation; either version 2 of the License, or     *
- *   (at your option) any later version.                                   *
- *                                                                         *
- ***************************************************************************/
 
 #ifndef __ADM_MISC__
 #define __ADM_MISC__

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_core/include/ADM_threads.h
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_core/include/ADM_threads.h	2008-02-28 23:33:15 UTC (rev 3810)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_core/include/ADM_threads.h	2008-02-29 18:35:39 UTC (rev 3811)
@@ -1,19 +1,11 @@
-/***************************************************************************
-                    
-    copyright            : (C) 2006 by mean
-    email                : <A HREF="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">fixounet at free.fr</A>
+/** *************************************************************************
+    \fn ADM_threads.h
+    \brief Handle thread synchronization functions (mutex...)
+                      
+    copyright            : (C) 2008 by mean
+    
  ***************************************************************************/
 
-/***************************************************************************
- *                                                                         *
- *   This program is free software; you can redistribute it and/or modify  *
- *   it under the terms of the GNU General Public License as published by  *
- *   the Free Software Foundation; either version 2 of the License, or     *
- *   (at your option) any later version.                                   *
- *                                                                         *
- ***************************************************************************/
-
-
 #ifndef ADM_THREADS_H
 #define ADM_THREADS_H
 

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_utilities/ADM_fileio.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_utilities/ADM_fileio.cpp	2008-02-28 23:33:15 UTC (rev 3810)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_utilities/ADM_fileio.cpp	2008-02-29 18:35:39 UTC (rev 3811)
@@ -22,7 +22,7 @@
 #include &lt;ADM_assert.h&gt;
 #include &lt;math.h&gt;
 #include &quot;ADM_default.h&quot;
-#include &quot;ADM_fileio.h&quot;
+#include &quot;ADM_osSupport/ADM_fileio.h&quot;
 #include &quot;ADM_osSupport/ADM_quota.h&quot;
 
 #define ADM_FILE_BUFFER 4*256*1024 // 256 kB

Added: branches/avidemux_2.5_branch_mean/avidemux/ADM_osSupport/ADM_fileio.h
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_osSupport/ADM_fileio.h	2008-02-28 23:33:15 UTC (rev 3810)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_osSupport/ADM_fileio.h	2008-02-29 18:35:39 UTC (rev 3811)
@@ -0,0 +1,42 @@
+/** *************************************************************************
+    \fn ADM_fileio.h
+    \brief Handle file access through a class
+                      
+    copyright            : (C) 2008 by mean
+    
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ ***************************************************************************/
+
+#ifndef ADM_FILE_IO
+#define ADM_FILE_IO
+
+
+
+class ADMFile
+{
+protected:
+        FILE            *_out;
+        uint32_t        _fill;
+        uint8_t         *_buffer;	  
+        uint64_t        _curPos;
+public:
+                        ADMFile();
+                        ~ADMFile();
+        uint8_t         open(FILE *in);
+        uint8_t         write(uint8_t *in, uint32_t size);
+        uint8_t         flush(void);
+        uint8_t         seek(uint64_t where);
+        uint64_t        tell(void);
+	  
+
+
+};
+
+#endif

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_osSupport/ADM_quota.h
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_osSupport/ADM_quota.h	2008-02-28 23:33:15 UTC (rev 3810)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_osSupport/ADM_quota.h	2008-02-29 18:35:39 UTC (rev 3811)
@@ -1,3 +1,18 @@
+/** *************************************************************************
+    \fn ADM_quota.h
+    \brief Handle disk full etc
+                      
+    copyright            : (C) 2008 by mean
+    
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ ***************************************************************************/
 #ifndef ADM_quota_h
 #define ADM_quota_h
 
@@ -16,9 +31,5 @@
 /* qfclose stands for quota-fclose() */
 int qfclose(FILE *);
 
-#if 0 //def USE_LIBXML2
-#include &lt;libxml/tree.h&gt;
-int qxmlSaveFormatFile(const char *filename, xmlDocPtr cur, int format);
-#endif
 
 #endif

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_outputs/oplug_avi/avilist.h
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_outputs/oplug_avi/avilist.h	2008-02-28 23:33:15 UTC (rev 3810)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_outputs/oplug_avi/avilist.h	2008-02-29 18:35:39 UTC (rev 3811)
@@ -41,7 +41,7 @@
 
 #ifndef __AVILIST__
 #define __AVILIST__
-#include &quot;ADM_fileio.h&quot;
+#include &quot;ADM_osSupport/ADM_fileio.h&quot;
 class AviList
 {
 protected:

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_outputs/oplug_avi/op_avisave.h
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_outputs/oplug_avi/op_avisave.h	2008-02-28 23:33:15 UTC (rev 3810)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_outputs/oplug_avi/op_avisave.h	2008-02-29 18:35:39 UTC (rev 3811)
@@ -21,7 +21,7 @@
  #include &quot;DIA_working.h&quot;
  #include &quot;DIA_encoding.h&quot;
  #include &quot;ADM_image.h&quot;
- #include &quot;ADM_fileio.h&quot;
+ #include &quot;ADM_osSupport/ADM_fileio.h&quot;
 #include &quot;ADM_toolkit/ADM_audioQueue.h&quot;
 
  class GenericAviSave

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_outputs/oplug_avi/op_aviwrite.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_outputs/oplug_avi/op_aviwrite.cpp	2008-02-28 23:33:15 UTC (rev 3810)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_outputs/oplug_avi/op_aviwrite.cpp	2008-02-29 18:35:39 UTC (rev 3811)
@@ -44,7 +44,7 @@
 #include &quot;op_aviwrite.hxx&quot;
 #include &quot;ADM_toolkit/toolkit.hxx&quot;
 #include &quot;ADM_osSupport/ADM_quota.h&quot;
-#include &quot;ADM_fileio.h&quot;
+#include &quot;ADM_osSupport/ADM_fileio.h&quot;
 
 // MOD Feb 2005 by GMV
 #include &quot;ADM_osSupport/ADM_debugID.h&quot;


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001076.html">[Avidemux-svn-commit] r3810 - in	branches/avidemux_2.5_branch_gruntster: . avidemux	avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2	avidemux/ADM_userInterfaces/ADM_commonUI cmake
</A></li>
	
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1077">[ date ]</a>
              <a href="thread.html#1077">[ thread ]</a>
              <a href="subject.html#1077">[ subject ]</a>
              <a href="author.html#1077">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">More information about the Avidemux-svn-commit
mailing list</a><br>
</body></html>
