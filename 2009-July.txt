From gruntster at mail.berlios.de  Wed Jul  1 17:43:00 2009
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Wed, 1 Jul 2009 17:43:00 +0200
Subject: [Avidemux-svn-commit] r4976 - in
	branches/avidemux_2.5_branch_gruntster/avidemux: ADM_encoder
	ADM_plugin
Message-ID: <200907011543.n61Fh070013562@sheep.berlios.de>

Author: gruntster
Date: 2009-07-01 17:42:53 +0200 (Wed, 01 Jul 2009)
New Revision: 4976

Modified:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/ADM_externalEncoder.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_plugin/ADM_vidEnc_plugin.h
Log:
[vidEnc] always use extra data from plugin (let plugin decide when to generate)

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/ADM_externalEncoder.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/ADM_externalEncoder.cpp	2009-06-28 18:33:08 UTC (rev 4975)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/ADM_externalEncoder.cpp	2009-07-01 15:42:53 UTC (rev 4976)
@@ -186,7 +186,7 @@
 
 	_openPass = (ret == ADM_VIDENC_ERR_SUCCESS);
 
-	if (_openPass && _globalHeader)
+	if (_openPass)
 	{
 		_extraData = passParameters.extraData;
 		_extraDataSize = passParameters.extraDataSize;
@@ -217,7 +217,7 @@
 {
 	printf ("[externalEncoder] %d extra header bytes\n", _extraDataSize);
 
-	if (_globalHeader && _extraDataSize > 0)
+	if (_extraDataSize > 0)
 	{
 		*data = _extraData;
 		*l = _extraDataSize;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_plugin/ADM_vidEnc_plugin.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_plugin/ADM_vidEnc_plugin.h	2009-06-28 18:33:08 UTC (rev 4975)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_plugin/ADM_vidEnc_plugin.h	2009-07-01 15:42:53 UTC (rev 4976)
@@ -40,6 +40,7 @@
 #define ADM_VIDENC_FRAMETYPE_B 3
 #define ADM_VIDENC_FRAMETYPE_P 4
 
+#define ADM_VIDENC_REQ_NONE 0
 #define ADM_VIDENC_REQ_NULL_FLUSH 1
 
 #include "DIA_uiTypes.h"



From mean at mail.berlios.de  Wed Jul  1 21:28:17 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Wed, 1 Jul 2009 21:28:17 +0200
Subject: [Avidemux-svn-commit] r4977 - in
	branches/avidemux_2.6_branch_mean/avidemux/common: .
	ADM_muxerGate/src ADM_videoFilter2
Message-ID: <200907011928.n61JSHW7014377@sheep.berlios.de>

Author: mean
Date: 2009-07-01 21:28:16 +0200 (Wed, 01 Jul 2009)
New Revision: 4977

Modified:
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_muxerGate/src/ADM_videoProcess.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoFilter2/ADM_videoFilterBridge.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/gui_savenew.cpp
Log:
[Audio] Be more verbose + rewind audio before saving

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_muxerGate/src/ADM_videoProcess.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_muxerGate/src/ADM_videoProcess.cpp	2009-07-01 15:42:53 UTC (rev 4976)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_muxerGate/src/ADM_videoProcess.cpp	2009-07-01 19:28:16 UTC (rev 4977)
@@ -34,6 +34,7 @@
     if(f) f=1000000000./f;
         else f=25000;
     averageFps1000=(uint32_t)f;
+    printf("[StreamProcess] Average FPS1000=%"LU"\n",averageFps1000);
     isCFR=false;
     bitstream=new ADMBitstream(width*height*4);
     data=new uint8_t [width*height*4];

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoFilter2/ADM_videoFilterBridge.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoFilter2/ADM_videoFilterBridge.cpp	2009-07-01 15:42:53 UTC (rev 4976)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoFilter2/ADM_videoFilterBridge.cpp	2009-07-01 19:28:16 UTC (rev 4977)
@@ -45,6 +45,7 @@
 */
 bool ADM_videoFilterBridge::rewind(void)
 {
+    printf("[VideoBridge] Goint to %"LU" ms\n",(uint32_t)(startTime/1000));
     video_body->GoToTime(startTime);
     return true;
 }

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/gui_savenew.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/gui_savenew.cpp	2009-07-01 15:42:53 UTC (rev 4976)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/gui_savenew.cpp	2009-07-01 19:28:16 UTC (rev 4977)
@@ -72,6 +72,9 @@
         //return 0;
         audio=NULL;
         nbAStream=0; // FIXME
+    }else
+    {
+        audio->goToTime(markerA); // Rewind audio
     }
     ADM_videoStream *video=NULL;
     // Video Stream 



From mean at mail.berlios.de  Wed Jul  1 21:28:20 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Wed, 1 Jul 2009 21:28:20 +0200
Subject: [Avidemux-svn-commit] r4978 -
	branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoEncoder/src
Message-ID: <200907011928.n61JSK0a014387@sheep.berlios.de>

Author: mean
Date: 2009-07-01 21:28:20 +0200 (Wed, 01 Jul 2009)
New Revision: 4978

Modified:
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoEncoder/src/ADM_coreVideoEncoderFFmpeg.cpp
Log:
[encoderFFmpeg] use framerate as 1000th of sec

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoEncoder/src/ADM_coreVideoEncoderFFmpeg.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoEncoder/src/ADM_coreVideoEncoderFFmpeg.cpp	2009-07-01 19:28:16 UTC (rev 4977)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoEncoder/src/ADM_coreVideoEncoderFFmpeg.cpp	2009-07-01 19:28:20 UTC (rev 4978)
@@ -32,7 +32,7 @@
     h=getHeight();
 
     image=new ADMImage(w,h);
-    _context = avcodec_alloc_context ();
+    _context = avcodec_alloc_context2 (CODEC_TYPE_VIDEO);
     ADM_assert (_context);
     memset (&_frame, 0, sizeof (_frame));
     _frame.pts = AV_NOPTS_VALUE;
@@ -96,9 +96,9 @@
     // Eval fps
     uint64_t f=source->getInfo()->frameIncrement;
     if(!f) f=40000;
-    _context->time_base.den=f;
-    _context->time_base.num=1000000;
-   
+    _context->time_base.den=1000LL;
+    _context->time_base.num=f/1000;
+    printf("[Time base] %d/%d\n", _context->time_base.num,_context->time_base.den);
     return true;
 }
 /**
@@ -156,6 +156,7 @@
 }
 /**
     \fn setup
+    \brief put flags before calling setup!
 */
 bool ADM_coreVideoEncoderFFmpeg::setup(CodecID codecId)
 {



From mean at mail.berlios.de  Wed Jul  1 21:28:22 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Wed, 1 Jul 2009 21:28:22 +0200
Subject: [Avidemux-svn-commit] r4979 -
	branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/ffMpeg4
Message-ID: <200907011928.n61JSMNa014397@sheep.berlios.de>

Author: mean
Date: 2009-07-01 21:28:22 +0200 (Wed, 01 Jul 2009)
New Revision: 4979

Modified:
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/ffMpeg4/ADM_ffMpeg4.cpp
Log:
[ffMpeg4] Fix QScale (must be set prior to open) + fix time_base (same)

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/ffMpeg4/ADM_ffMpeg4.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/ffMpeg4/ADM_ffMpeg4.cpp	2009-07-01 19:28:20 UTC (rev 4978)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/ffMpeg4/ADM_ffMpeg4.cpp	2009-07-01 19:28:22 UTC (rev 4979)
@@ -82,8 +82,19 @@
 */
 bool ADM_ffMpeg4Encoder::setup(void)
 {
+    switch(Settings.params.mode)
+    {
+      case COMPRESS_CQ:
+            _context->flags |= CODEC_FLAG_QSCALE;
+            break;
+     default:
+            return false;
+    }
     if(false== ADM_coreVideoEncoderFFmpeg::setup(CODEC_ID_MPEG4))
         return false;
+
+
+
     presetContext(&Settings);
     printf("[ffMpeg] Setup ok\n");
     return true;
@@ -118,6 +129,8 @@
      default:
             return false;
     }
+    printf("[CODEC] Flags = 0x%x, QSCALE=%x, bit_rate=%d, quality=%d qz=%d\n",_context->flags,CODEC_FLAG_QSCALE,
+                                     _context->bit_rate,  _frame.quality, _frame.quality/ FF_QP2LAMBDA);     
     int sz=0;
     _frame.reordered_opaque=image->Pts;
     if ((sz = avcodec_encode_video (_context, out->data, out->bufferSize, &_frame)) < 0)
@@ -247,12 +260,8 @@
   _context->p_masking = 0.0;
   _context->bit_rate = 0;
 
-  // Compute den/num from source (type ADM_coreVideoFilter)
-  FilterInfo *info=source->getInfo();
-  uint64_t frameIncrement=info->frameIncrement;
-  _context->time_base.num=frameIncrement;
-  _context->time_base.den=1000000LL;
-  printf("[LAVCODEC] Frame increment ~ %d ms\n",(int)(frameIncrement/1000));
+  // Set frame rate den/num
+  prolog();
   return true;
 }
 /**



From mean at mail.berlios.de  Wed Jul  1 21:28:24 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Wed, 1 Jul 2009 21:28:24 +0200
Subject: [Avidemux-svn-commit] r4980 -
	branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/ffMpeg4
Message-ID: <200907011928.n61JSOFu014407@sheep.berlios.de>

Author: mean
Date: 2009-07-01 21:28:24 +0200 (Wed, 01 Jul 2009)
New Revision: 4980

Modified:
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/ffMpeg4/ADM_ffMpeg4.cpp
Log:
[ffMpeg4] CBR encoding

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/ffMpeg4/ADM_ffMpeg4.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/ffMpeg4/ADM_ffMpeg4.cpp	2009-07-01 19:28:22 UTC (rev 4979)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/ffMpeg4/ADM_ffMpeg4.cpp	2009-07-01 19:28:24 UTC (rev 4980)
@@ -87,6 +87,9 @@
       case COMPRESS_CQ:
             _context->flags |= CODEC_FLAG_QSCALE;
             break;
+      case COMPRESS_CBR:
+              _context->bit_rate=Settings.params.bitrate*1000; // kb->b;
+            break;
      default:
             return false;
     }
@@ -119,14 +122,13 @@
     switch(Settings.params.mode)
     {
       case COMPRESS_CQ:
-            _context->flags |= CODEC_FLAG_QSCALE;
             _frame.quality = (int) floor (FF_QP2LAMBDA * Settings.params.qz+ 0.5);
             break;
+            break;
       case COMPRESS_CBR:
-            _context->flags &= ~CODEC_FLAG_QSCALE;
-            _context->bit_rate=Settings.params.bitrate*1000; // kb->b
             break;
      default:
+            printf("[ffMpeg4] Unsupported encoding mode\n");
             return false;
     }
     printf("[CODEC] Flags = 0x%x, QSCALE=%x, bit_rate=%d, quality=%d qz=%d\n",_context->flags,CODEC_FLAG_QSCALE,



From mean at mail.berlios.de  Wed Jul  1 21:28:29 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Wed, 1 Jul 2009 21:28:29 +0200
Subject: [Avidemux-svn-commit] r4981 -
	branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/ffMpeg4
Message-ID: <200907011928.n61JSTQH014420@sheep.berlios.de>

Author: mean
Date: 2009-07-01 21:28:25 +0200 (Wed, 01 Jul 2009)
New Revision: 4981

Modified:
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/ffMpeg4/ADM_ffMpeg4.cpp
Log:
[ffMpeg4] Fix b frame handling

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/ffMpeg4/ADM_ffMpeg4.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/ffMpeg4/ADM_ffMpeg4.cpp	2009-07-01 19:28:24 UTC (rev 4980)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/ffMpeg4/ADM_ffMpeg4.cpp	2009-07-01 19:28:25 UTC (rev 4981)
@@ -35,11 +35,11 @@
           0,				//          GMC     
           1,				// 4MV
           0,				//           _QPEL;   
-          0,				//           _TREILLIS_QUANT
+          1,				//           _TREILLIS_QUANT
           2,				//           qmin;
           31,				//          qmax;
           3,				//           max_qdiff;
-          0,				//           max_b_frames;
+          2,				//           max_b_frames;
           0,				//          mpeg_quant;
           1,				//
           -2,				//                 luma_elim_threshold;
@@ -93,12 +93,10 @@
      default:
             return false;
     }
+    presetContext(&Settings);
     if(false== ADM_coreVideoEncoderFFmpeg::setup(CODEC_ID_MPEG4))
         return false;
 
-
-
-    presetContext(&Settings);
     printf("[ffMpeg] Setup ok\n");
     return true;
 }
@@ -118,6 +116,7 @@
 */
 bool         ADM_ffMpeg4Encoder::encode (ADMBitstream * out)
 {
+again:
     if(false==preEncode()) return false;
     switch(Settings.params.mode)
     {
@@ -140,8 +139,10 @@
         printf("[ffmpeg4] Error %d encoding video\n",sz);
         return false;
     }
+    if(sz==0) // no pic, probably pre filling, try again
+        goto again;
     postEncode(out,sz);
-    printf("[ffMpeg4] Out Quant :%d\n",out->out_quantizer);
+   
     return true;
 }
 /**
@@ -150,12 +151,19 @@
 */
 bool ADM_ffMpeg4Encoder::postEncode(ADMBitstream *out, uint32_t size)
 {
-
+    int pict_type=FF_P_TYPE;
+    int keyframe=false;
+    if(_context->coded_frame)
+    {
+        pict_type=_context->coded_frame->pict_type;
+        keyframe=_context->coded_frame->key_frame;
+    }
+    printf("[ffMpeg4] Out Quant :%d, pic type %d keyf %d\n",out->out_quantizer,pict_type,keyframe);
     out->len=size;
     out->flags=0;
-    if(_frame.key_frame) 
+    if(keyframe) 
         out->flags=AVI_KEY_FRAME;
-    else if(_frame.pict_type==FF_B_TYPE)
+    else if(pict_type==FF_B_TYPE)
             out->flags=AVI_B_FRAME;
     out->pts=out->dts=image->Pts;
     // Update PTS/Dts



From gruntster at mail.berlios.de  Thu Jul  2 10:44:50 2009
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Thu, 2 Jul 2009 10:44:50 +0200
Subject: [Avidemux-svn-commit] r4982 - in
	branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder:
	. ADM_vidEnc_avcodec
Message-ID: <200907020844.n628ioQW031026@sheep.berlios.de>

Author: gruntster
Date: 2009-07-02 10:44:43 +0200 (Thu, 02 Jul 2009)
New Revision: 4982

Added:
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/encoder.cpp
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/encoder.h
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/huffyuvEncoder.cpp
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/huffyuvEncoder.h
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/interface.c
Modified:
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/CMakeLists.txt
Log:
[huffyuv] huffyuv plugin

Added: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/CMakeLists.txt	2009-07-01 19:28:25 UTC (rev 4981)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/CMakeLists.txt	2009-07-02 08:44:43 UTC (rev 4982)
@@ -0,0 +1,25 @@
+INCLUDE(admPluginVideoEncoder)
+INCLUDE(admFFmpegUtil)
+
+if (WIN32)
+	set(FFMPEG_INSTALL_DIR ${AVIDEMUX_INSTALL_PREFIX})
+else (WIN32)
+	set(FFMPEG_INSTALL_DIR ${AVIDEMUX_INSTALL_PREFIX}/lib)
+endif (WIN32)
+
+getFfmpegLibNames(${AVIDEMUX_SOURCE_DIR}/avidemux/ADM_libraries/ffmpeg)
+
+add_library(ADM_libavcodec UNKNOWN IMPORTED)
+set_property(TARGET ADM_libavcodec PROPERTY IMPORTED_LOCATION "${FFMPEG_INSTALL_DIR}/${LIBAVCODEC_LIB}")
+
+add_library(ADM_libswscale UNKNOWN IMPORTED)
+set_property(TARGET ADM_libswscale PROPERTY IMPORTED_LOCATION "${FFMPEG_INSTALL_DIR}/${LIBSWSCALE_LIB}")
+
+SET(PLUGIN_SUBDIR "avcodec")
+SET(ADM_vidEnc_avcodec_SRCS interface.c encoder.cpp huffyuvEncoder.cpp)
+
+ADD_LIBRARY(ADM_vidEnc_avcodec SHARED ${ADM_vidEnc_avcodec_SRCS})
+TARGET_LINK_LIBRARIES(ADM_vidEnc_avcodec ADM_core ADM_libavcodec ADM_libswscale)
+
+INIT_VIDEO_ENCODER_PLUGIN(ADM_vidEnc_avcodec)
+INSTALL_VIDEO_ENCODER(ADM_vidEnc_avcodec)
\ No newline at end of file

Added: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/encoder.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/encoder.cpp	2009-07-01 19:28:25 UTC (rev 4981)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/encoder.cpp	2009-07-02 08:44:43 UTC (rev 4982)
@@ -0,0 +1,394 @@
+/***************************************************************************
+                                encoder.cpp
+
+    begin                : Thu Apr 10 2009
+    copyright            : (C) 2008 by gruntster
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+
+#include "encoder.h"
+#include "HuffyuvEncoder.h"
+#include "ADM_inttype.h"
+
+int uiType;
+static HuffyuvEncoder huffyuv;
+static void* encoders = { &huffyuv };
+
+extern "C"
+{
+	void *avcodecEncoder_getPointers(int _uiType, int *count)
+	{
+		uiType = _uiType;
+		*count = sizeof(encoders) / sizeof(void*);
+
+		return &encoders;
+	}
+
+	const char* avcodecEncoder_getEncoderName(int encoderId)
+	{
+		AvcodecEncoder *encoder = (AvcodecEncoder*)encoderId;
+		return encoder->getEncoderName();
+	}
+
+	const char* avcodecEncoder_getEncoderType(int encoderId)
+	{
+		AvcodecEncoder *encoder = (AvcodecEncoder*)encoderId;
+		return encoder->getEncoderType();
+	}
+
+	const char* avcodecEncoder_getEncoderDescription(int encoderId)
+	{
+		AvcodecEncoder *encoder = (AvcodecEncoder*)encoderId;
+		return encoder->getEncoderDescription();
+	}
+
+	const char* avcodecEncoder_getFourCC(int encoderId)
+	{
+		AvcodecEncoder *encoder = (AvcodecEncoder*)encoderId;
+		return encoder->getFourCC();
+	}
+
+	int avcodecEncoder_getEncoderRequirements(int encoderId)
+	{
+		AvcodecEncoder *encoder = (AvcodecEncoder*)encoderId;
+		return encoder->getEncoderRequirements();
+	}
+
+	const char* avcodecEncoder_getEncoderGuid(int encoderId)
+	{
+		AvcodecEncoder *encoder = (AvcodecEncoder*)encoderId;
+		return encoder->getEncoderGuid();
+	}
+
+	int avcodecEncoder_isConfigurable(int encoderId)
+	{
+		AvcodecEncoder *encoder = (AvcodecEncoder*)encoderId;
+		return encoder->isConfigurable();
+	}
+
+	int avcodecEncoder_configure(int encoderId, vidEncConfigParameters *configParameters, vidEncVideoProperties *properties)
+	{
+		AvcodecEncoder *encoder = (AvcodecEncoder*)encoderId;
+		return encoder->configure(configParameters, properties);
+	}
+
+	int avcodecEncoder_getOptions(int encoderId, vidEncOptions *encodeOptions, char *pluginOptions, int bufferSize)
+	{
+		AvcodecEncoder *encoder = (AvcodecEncoder*)encoderId;
+		return encoder->getOptions(encodeOptions, pluginOptions, bufferSize);
+	}
+
+	int avcodecEncoder_setOptions(int encoderId, vidEncOptions *encodeOptions, char *pluginOptions)
+	{
+		AvcodecEncoder *encoder = (AvcodecEncoder*)encoderId;
+		return encoder->setOptions(encodeOptions, pluginOptions);
+	}
+
+	int avcodecEncoder_getPassCount(int encoderId)
+	{
+		AvcodecEncoder *encoder = (AvcodecEncoder*)encoderId;
+		return encoder->getPassCount();
+	}
+
+	int avcodecEncoder_getCurrentPass(int encoderId)
+	{
+		AvcodecEncoder *encoder = (AvcodecEncoder*)encoderId;
+		return encoder->getCurrentPass();
+	}
+
+	int avcodecEncoder_open(int encoderId, vidEncVideoProperties *properties)
+	{
+		AvcodecEncoder *encoder = (AvcodecEncoder*)encoderId;
+		return encoder->open(properties);
+	}
+
+	int avcodecEncoder_beginPass(int encoderId, vidEncPassParameters *passParameters)
+	{
+		AvcodecEncoder *encoder = (AvcodecEncoder*)encoderId;
+		return encoder->beginPass(passParameters);
+	}
+
+	int avcodecEncoder_encodeFrame(int encoderId, vidEncEncodeParameters *encodeParams)
+	{
+		AvcodecEncoder *encoder = (AvcodecEncoder*)encoderId;
+		return encoder->encodeFrame(encodeParams);
+	}
+
+	int avcodecEncoder_finishPass(int encoderId)
+	{
+		AvcodecEncoder *encoder = (AvcodecEncoder*)encoderId;
+		return encoder->finishPass();
+	}
+
+	int avcodecEncoder_close(int encoderId)
+	{
+		AvcodecEncoder *encoder = (AvcodecEncoder*)encoderId;
+		return encoder->close();
+	}
+}
+
+void AvcodecEncoder::init(enum CodecID id, enum PixelFormat targetPixelFormat)
+{
+	_codecId = id;
+	_opened = false;
+
+	_passCount = 1;
+	_currentPass = 0;
+	_openPass = false;
+
+	_targetPixelFormat = targetPixelFormat;
+
+	_swsContext = NULL;
+	_resampleBuffer = NULL;
+}
+
+void AvcodecEncoder::initContext(vidEncVideoProperties *properties)
+{
+	_context->width = properties->width;
+	_context->height = properties->height;
+	_context->time_base = (AVRational){properties->fpsDen, properties->fpsNum};
+	_context->pix_fmt = _targetPixelFormat;
+}
+
+AVCodec *AvcodecEncoder::getAvCodec(void)
+{
+	return avcodec_find_encoder(_codecId);
+}
+
+int AvcodecEncoder::getFrameType(void)
+{
+	if (_context->coded_frame->key_frame == 1)
+		return ADM_VIDENC_FRAMETYPE_IDR;
+	else if (_context->coded_frame->pict_type == FF_B_TYPE)
+		return ADM_VIDENC_FRAMETYPE_B;
+
+	return ADM_VIDENC_FRAMETYPE_P;
+}
+
+void AvcodecEncoder::updateEncodeParameters(vidEncEncodeParameters *encodeParams, uint8_t *buffer, int bufferSize)
+{
+	encodeParams->frameType = getFrameType();
+	encodeParams->ptsFrame = _context->coded_frame->display_picture_number;
+	encodeParams->encodedDataSize = bufferSize;
+	encodeParams->encodedData = buffer;
+
+	if (_context->coded_frame->quality)
+		encodeParams->quantiser =(int)floor(_context->coded_frame->quality / (float)FF_QP2LAMBDA);
+	else
+		encodeParams->quantiser = (int)floor(_frame.quality / (float)FF_QP2LAMBDA);
+}
+
+AvcodecEncoder::~AvcodecEncoder(void)
+{
+	close();
+}
+
+const char* AvcodecEncoder::getEncoderName(void)
+{
+	return "avcodec";
+}
+
+int AvcodecEncoder::getEncoderRequirements(void)
+{
+	AVCodec *codec = getAvCodec();
+
+	return (codec && (codec->capabilities & CODEC_CAP_DELAY) ? ADM_VIDENC_REQ_NULL_FLUSH : ADM_VIDENC_REQ_NONE);
+}
+
+int AvcodecEncoder::isConfigurable(void)
+{
+	return 0;
+}
+
+int AvcodecEncoder::configure(vidEncConfigParameters *configParameters, vidEncVideoProperties *properties)
+{
+	return 0;
+}
+
+int AvcodecEncoder::getCurrentPass(void)
+{
+	return _currentPass;
+}
+
+int AvcodecEncoder::getPassCount(void)
+{
+	return _passCount;
+}
+
+int AvcodecEncoder::open(vidEncVideoProperties *properties)
+{
+	if (_opened)
+		return ADM_VIDENC_ERR_ALREADY_OPEN;
+
+	_opened = true;
+	_currentPass = 0;
+	_context = avcodec_alloc_context();
+
+	if (!_context)
+		return ADM_VIDENC_ERR_FAILED;
+
+	initContext(properties);
+
+	AVCodec *codec = getAvCodec();
+
+	if (!codec)
+		return ADM_VIDENC_ERR_FAILED;
+
+	if (avcodec_open(_context, codec) < 0)
+	{
+		close();
+
+		return ADM_VIDENC_ERR_FAILED;
+	}
+
+	memset(&_frame, 0, sizeof(_frame));
+	_frame.pts = AV_NOPTS_VALUE;
+
+	_bufferSize = properties->width * properties->height * 3;
+	_buffer = new uint8_t[_bufferSize];
+
+	return ADM_VIDENC_ERR_SUCCESS;
+}
+
+int AvcodecEncoder::beginPass(vidEncPassParameters *passParameters)
+{
+	if (!_opened)
+		return ADM_VIDENC_ERR_CLOSED;
+
+	if (_openPass)
+		return ADM_VIDENC_ERR_PASS_ALREADY_OPEN;
+
+	if (_currentPass == _passCount)
+		return ADM_VIDENC_ERR_PASS_COUNT_REACHED;
+
+	if (_passCount > 1 && _currentPass == 0 && passParameters->useExistingLogFile)
+	{
+		_currentPass++;
+		return ADM_VIDENC_ERR_PASS_SKIP;
+	}
+
+	_openPass = true;
+	_currentPass++;
+
+	if (_targetPixelFormat != PIX_FMT_YUV420P)
+	{
+		_swsContext = sws_getContext(
+			_context->width, _context->height, PIX_FMT_YUV420P,
+			_context->width, _context->height, _targetPixelFormat,
+			SWS_BICUBLIN, NULL, NULL, NULL);
+
+		_resampleSize = _bufferSize;
+		_resampleBuffer = new uint8_t[_resampleSize];
+	}
+
+	passParameters->structSize = sizeof(vidEncPassParameters);
+	passParameters->extraData = _context->extradata;
+	passParameters->extraDataSize = _context->extradata_size;
+
+	return ADM_VIDENC_ERR_SUCCESS;
+}
+
+int AvcodecEncoder::encodeFrame(vidEncEncodeParameters *encodeParams)
+{
+	if (!_opened)
+		return ADM_VIDENC_ERR_CLOSED;
+
+	_frame.key_frame = 0;
+	_frame.pict_type = 0;
+
+	if (encodeParams->frameData)
+	{
+		AVPicture sourcePicture, *inputPicture;
+
+		avpicture_fill(
+			&sourcePicture, encodeParams->frameData, PIX_FMT_YUV420P, _context->width, _context->height);
+
+		// Swap planes to make YV12 look like YUV420P
+		uint8_t *tmpPlane = sourcePicture.data[1];
+
+		sourcePicture.data[1] = sourcePicture.data[2];
+		sourcePicture.data[2] = tmpPlane;
+
+		if (_swsContext)
+		{
+			AVPicture resamplePicture;
+
+			avpicture_fill(
+				&resamplePicture, _resampleBuffer, _targetPixelFormat, _context->width, _context->height);
+
+			inputPicture = &resamplePicture;
+
+			sws_scale(
+				_swsContext, sourcePicture.data, sourcePicture.linesize, 0,
+				_context->height, inputPicture->data, inputPicture->linesize);
+		}
+		else
+			inputPicture = &sourcePicture;
+
+		memcpy(&_frame.linesize, inputPicture->linesize, sizeof(_frame.linesize));
+		memcpy(&_frame.data, inputPicture->data, sizeof(_frame.data));
+
+		int size = avcodec_encode_video(_context, _buffer, _bufferSize, &_frame);
+
+		if (size < 0)
+			return ADM_VIDENC_ERR_FAILED;
+
+		updateEncodeParameters(encodeParams, _buffer, size);
+	}
+
+	return ADM_VIDENC_ERR_SUCCESS;
+}
+
+int AvcodecEncoder::finishPass(void)
+{
+	if (!_opened)
+		return ADM_VIDENC_ERR_CLOSED;
+
+	if (_openPass)
+		_openPass = false;
+
+	if (_swsContext)
+	{
+		sws_freeContext(_swsContext);
+		_swsContext = NULL;
+	}
+
+	if (_resampleBuffer)
+	{
+		delete _resampleBuffer;
+		_resampleBuffer = NULL;
+	}
+
+	return ADM_VIDENC_ERR_SUCCESS;
+}
+
+int AvcodecEncoder::close(void)
+{
+	if (_openPass)
+		finishPass();
+
+	_opened = false;
+	_currentPass = 0;
+
+	if (_context)
+	{
+		avcodec_close(_context);
+		_context = NULL;
+	}
+
+	if (_buffer)
+	{
+		delete [] _buffer;
+		_buffer = NULL;
+	}
+
+	return ADM_VIDENC_ERR_SUCCESS;
+}

Added: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/encoder.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/encoder.h	2009-07-01 19:28:25 UTC (rev 4981)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/encoder.h	2009-07-02 08:44:43 UTC (rev 4982)
@@ -0,0 +1,94 @@
+/***************************************************************************
+                                  encoder.h
+
+    begin                : Thu Apr 10 2009
+    copyright            : (C) 2009 by gruntster
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+
+#ifndef encoder_h
+#define encoder_h
+
+#ifdef __cplusplus
+
+#define __STDC_CONSTANT_MACROS
+#include <stdint.h>
+
+extern "C"
+{
+	#include "ADM_vidEnc_plugin.h"
+	#include "libavcodec/avcodec.h"
+	#include "libswscale/swscale.h"
+}
+
+class AvcodecEncoder
+{
+	protected:
+		enum CodecID _codecId;
+		enum PixelFormat _targetPixelFormat;
+
+		int _currentPass, _passCount;
+		bool _opened, _openPass;
+
+		AVCodecContext *_context;
+		AVFrame _frame;
+		struct SwsContext *_swsContext;
+
+		int _resampleSize, _bufferSize;
+		uint8_t *_resampleBuffer, *_buffer;
+
+		virtual void init(enum CodecID id, enum PixelFormat targetPixelFormat);
+		virtual void initContext(vidEncVideoProperties *properties);
+		AVCodec *getAvCodec(void);
+		virtual int getFrameType(void);
+		virtual void updateEncodeParameters(vidEncEncodeParameters *encodeParams, uint8_t *buffer, int bufferSize);
+
+	public:
+		virtual ~AvcodecEncoder(void);
+		virtual const char* getEncoderName(void);
+		virtual const char* getEncoderType(void) = 0;
+		virtual const char* getEncoderDescription(void) = 0;
+		virtual const char* getFourCC(void) = 0;
+		virtual int getEncoderRequirements(void);
+		virtual const char* getEncoderGuid(void) = 0;
+		virtual int isConfigurable(void);
+		virtual int configure(vidEncConfigParameters *configParameters, vidEncVideoProperties *properties);
+		virtual int getOptions(vidEncOptions *encodeOptions, char *pluginOptions, int bufferSize) = 0;
+		virtual int setOptions(vidEncOptions *encodeOptions, char *pluginOptions) = 0;
+		virtual int getCurrentPass(void);
+		virtual int getPassCount(void);
+		virtual int open(vidEncVideoProperties *properties);
+		virtual int beginPass(vidEncPassParameters *passParameters);
+		virtual int encodeFrame(vidEncEncodeParameters *encodeParams);
+		virtual int finishPass(void);
+		virtual int close(void);
+};
+#else
+	void *avcodecEncoder_getPointers(int uiType, int *count);
+	const char* avcodecEncoder_getEncoderName(int encoderId);
+	const char* avcodecEncoder_getEncoderType(int encoderId);
+	const char* avcodecEncoder_getEncoderDescription(int encoderId);
+	const char* avcodecEncoder_getFourCC(int encoderId);
+	int avcodecEncoder_getEncoderRequirements(int encoderId);
+	const char* avcodecEncoder_getEncoderGuid(int encoderId);
+	int avcodecEncoder_isConfigurable(int encoderId);
+	int avcodecEncoder_configure(int encoderId, vidEncConfigParameters *configParameters, vidEncVideoProperties *properties);
+	int avcodecEncoder_getOptions(int encoderId, vidEncOptions *encodeOptions, char *pluginOptions, int bufferSize);
+	int avcodecEncoder_setOptions(int encoderId, vidEncOptions *encodeOptions, char *pluginOptions);
+	int avcodecEncoder_getPassCount(int encoderId);
+	int avcodecEncoder_getCurrentPass(int encoderId);
+	int avcodecEncoder_open(int encoderId, vidEncVideoProperties *properties);
+	int avcodecEncoder_beginPass(int encoderId, vidEncPassParameters *passParameters);
+	int avcodecEncoder_encodeFrame(int encoderId, vidEncEncodeParameters *encodeParams);
+	int avcodecEncoder_finishPass(int encoderId);
+	int avcodecEncoder_close(int encoderId);
+#endif	// __cplusplus
+#endif	// encoder_h

Added: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/huffyuvEncoder.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/huffyuvEncoder.cpp	2009-07-01 19:28:25 UTC (rev 4981)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/huffyuvEncoder.cpp	2009-07-02 08:44:43 UTC (rev 4982)
@@ -0,0 +1,59 @@
+/***************************************************************************
+                             huffyuvEncoder.cpp
+
+    begin                : Mon Jun 29 2009
+    copyright            : (C) 2009 by gruntster
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+
+#include "ADM_inttype.h"
+#include "huffyuvEncoder.h"
+
+HuffyuvEncoder::HuffyuvEncoder(void)
+{
+	init(CODEC_ID_HUFFYUV, PIX_FMT_YUV422P);
+}
+
+const char* HuffyuvEncoder::getEncoderType(void)
+{
+	return "Huffyuv";
+}
+
+const char* HuffyuvEncoder::getEncoderDescription(void)
+{
+	return "Huffyuv video encoder plugin for Avidemux (c) Mean/Gruntster";
+}
+
+const char* HuffyuvEncoder::getFourCC(void)
+{
+	return "HFYU";
+}
+
+const char* HuffyuvEncoder::getEncoderGuid(void)
+{
+	return "970CB80B-5713-445c-A187-5C6F4A76FA76";
+}
+
+int HuffyuvEncoder::getOptions(vidEncOptions *encodeOptions, char *pluginOptions, int bufferSize)
+{
+	if (encodeOptions)
+	{
+		encodeOptions->encodeMode = ADM_VIDENC_MODE_CQP;
+		encodeOptions->encodeModeParameter = 1000;
+	}
+
+	return 0;
+}
+
+int HuffyuvEncoder::setOptions(vidEncOptions *encodeOptions, char *pluginOptions)
+{
+	return 0;
+}

Added: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/huffyuvEncoder.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/huffyuvEncoder.h	2009-07-01 19:28:25 UTC (rev 4981)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/huffyuvEncoder.h	2009-07-02 08:44:43 UTC (rev 4982)
@@ -0,0 +1,40 @@
+/***************************************************************************
+                              huffyuvEncoder.h
+
+    begin                : Mon Jun 29 2009
+    copyright            : (C) 2009 by gruntster
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+
+#ifndef HuffyuvEncoder_h
+#define HuffyuvEncoder_h
+
+#ifdef __cplusplus
+extern "C"
+{
+	#include "ADM_vidEnc_plugin.h"
+}
+
+#include "encoder.h"
+
+class HuffyuvEncoder : public AvcodecEncoder
+{
+	public:
+		HuffyuvEncoder(void);
+		const char* getEncoderType(void);
+		const char* getEncoderDescription(void);
+		const char* getFourCC(void);
+		const char* getEncoderGuid(void);
+		int getOptions(vidEncOptions *encodeOptions, char *pluginOptions, int bufferSize);
+		int setOptions(vidEncOptions *encodeOptions, char *pluginOptions);
+};
+#endif	// __cplusplus
+#endif	// HuffyuvEncoder_h

Added: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/interface.c
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/interface.c	2009-07-01 19:28:25 UTC (rev 4981)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/interface.c	2009-07-02 08:44:43 UTC (rev 4982)
@@ -0,0 +1,133 @@
+/***************************************************************************
+                                 interface.c
+
+    begin                : Thu Apr 23 2009
+    copyright            : (C) 2009 by gruntster
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+
+#include "ADM_inttype.h"
+#include "ADM_vidEnc_plugin.h"
+#include "encoder.h"
+
+int vidEncGetEncoders(int uiType, int** encoderIds)
+{
+	if (uiType == ADM_UI_CLI || uiType == ADM_UI_GTK || uiType == ADM_UI_QT4)
+	{
+		int count = 0;
+
+		*encoderIds = avcodecEncoder_getPointers(uiType, &count);
+
+		return count;
+	}
+	else
+	{
+		*encoderIds = NULL;
+		return 0;
+	}
+}
+
+const char* vidEncGetEncoderName(int encoderId)
+{
+	return avcodecEncoder_getEncoderName(encoderId);
+}
+
+const char* vidEncGetEncoderType(int encoderId)
+{
+	return avcodecEncoder_getEncoderType(encoderId);
+}
+
+const char* vidEncGetEncoderDescription(int encoderId)
+{
+	return avcodecEncoder_getEncoderDescription(encoderId);
+}
+
+const char* vidEncGetFourCC(int encoderId)
+{
+	return avcodecEncoder_getFourCC(encoderId);
+}
+
+int vidEncGetEncoderRequirements(int encoderId)
+{
+	return avcodecEncoder_getEncoderRequirements(encoderId);
+}
+
+int vidEncGetEncoderApiVersion(int encoderId)
+{
+	return ADM_VIDENC_API_VERSION;
+}
+
+void vidEncGetEncoderVersion(int encoderId, int* major, int* minor, int* patch)
+{
+	*major = 1;
+	*minor = 0;
+	*patch = 0;
+}
+
+const char* vidEncGetEncoderGuid(int encoderId)
+{
+	return avcodecEncoder_getEncoderGuid(encoderId);
+}
+
+int vidEncIsConfigurable(int encoderId)
+{
+	return avcodecEncoder_isConfigurable(encoderId);
+}
+
+int vidEncConfigure(int encoderId, vidEncConfigParameters *configParameters, vidEncVideoProperties *properties)
+{
+	return avcodecEncoder_configure(encoderId, configParameters, properties);
+}
+
+int vidEncGetOptions(int encoderId, vidEncOptions *encodeOptions, char *pluginOptions, int bufferSize)
+{
+	return avcodecEncoder_getOptions(encoderId, encodeOptions, pluginOptions, bufferSize);
+}
+
+int vidEncSetOptions(int encoderId, vidEncOptions *encodeOptions, char *pluginOptions)
+{
+	return avcodecEncoder_setOptions(encoderId, encodeOptions, pluginOptions);
+}
+
+int vidEncGetPassCount(int encoderId)
+{
+	return avcodecEncoder_getPassCount(encoderId);
+}
+
+int vidEncGetCurrentPass(int encoderId)
+{
+	return avcodecEncoder_getCurrentPass(encoderId);
+}
+
+int vidEncOpen(int encoderId, vidEncVideoProperties *properties)
+{
+	return avcodecEncoder_open(encoderId, properties);
+}
+
+int vidEncBeginPass(int encoderId, vidEncPassParameters *passParameters)
+{
+	return avcodecEncoder_beginPass(encoderId, passParameters);
+}
+
+int vidEncEncodeFrame(int encoderId, vidEncEncodeParameters *encodeParams)
+{
+	return avcodecEncoder_encodeFrame(encoderId, encodeParams);
+}
+
+int vidEncFinishPass(int encoderId)
+{
+	return avcodecEncoder_finishPass(encoderId);
+}
+
+int vidEncClose(int encoderId)
+{
+	return avcodecEncoder_close(encoderId);
+}

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/CMakeLists.txt	2009-07-01 19:28:25 UTC (rev 4981)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/CMakeLists.txt	2009-07-02 08:44:43 UTC (rev 4982)
@@ -1,2 +1,3 @@
+ADD_SUBDIRECTORY(ADM_vidEnc_avcodec)
 ADD_SUBDIRECTORY(ADM_vidEnc_x264)
 ADD_SUBDIRECTORY(ADM_vidEnc_xvid)
\ No newline at end of file



From gruntster at mail.berlios.de  Thu Jul  2 12:33:56 2009
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Thu, 2 Jul 2009 12:33:56 +0200
Subject: [Avidemux-svn-commit] r4983 -
	branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder
Message-ID: <200907021033.n62AXue0013418@sheep.berlios.de>

Author: gruntster
Date: 2009-07-02 12:33:50 +0200 (Thu, 02 Jul 2009)
New Revision: 4983

Modified:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/ADM_pluginLoad.cpp
Log:
[vidEnc] fix loading of multiple encoders in the one plugin

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/ADM_pluginLoad.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/ADM_pluginLoad.cpp	2009-07-02 08:44:43 UTC (rev 4982)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/ADM_pluginLoad.cpp	2009-07-02 10:33:50 UTC (rev 4983)
@@ -107,6 +107,9 @@
 
 		for (int encoderIndex = 0; encoderIndex < encoderCount; encoderIndex++)
 		{
+			if (!plugin)
+				plugin = new ADM_vidEnc_plugin(file);
+
 			int encoderId = encoderIds[encoderIndex];
 			int apiVersion = plugin->getEncoderApiVersion(encoderId);
 
@@ -123,14 +126,21 @@
 
 				ADM_videoEncoderPlugins.push_back(plugin);
 
+				plugin = NULL;
 				success = true;
 			}
 			else
+			{
 				printf("[ADM_vidEnc_plugin] File %s has an outdated API version (%d vs %d)\n", ADM_GetFileName(file), apiVersion, ADM_VIDENC_API_VERSION);
+				delete plugin;
+			}
 		}		
 	}
 	else
+	{
 		printf("[ADM_vidEnc_plugin] Unable to load %s\n", ADM_GetFileName(file));
+		delete plugin;
+	}
 
 	return success;
 }



From gruntster at mail.berlios.de  Thu Jul  2 15:40:48 2009
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Thu, 2 Jul 2009 15:40:48 +0200
Subject: [Avidemux-svn-commit] r4984 -
	branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec
Message-ID: <200907021340.n62DemYo005286@sheep.berlios.de>

Author: gruntster
Date: 2009-07-02 15:40:41 +0200 (Thu, 02 Jul 2009)
New Revision: 4984

Added:
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/ffv1Encoder.cpp
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/ffv1Encoder.h
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/ffvhuffEncoder.cpp
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/ffvhuffEncoder.h
Modified:
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/encoder.cpp
Log:
[vidEnc] ffvhuff and ffv1 plugins

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/CMakeLists.txt	2009-07-02 10:33:50 UTC (rev 4983)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/CMakeLists.txt	2009-07-02 13:40:41 UTC (rev 4984)
@@ -16,7 +16,7 @@
 set_property(TARGET ADM_libswscale PROPERTY IMPORTED_LOCATION "${FFMPEG_INSTALL_DIR}/${LIBSWSCALE_LIB}")
 
 SET(PLUGIN_SUBDIR "avcodec")
-SET(ADM_vidEnc_avcodec_SRCS interface.c encoder.cpp huffyuvEncoder.cpp)
+SET(ADM_vidEnc_avcodec_SRCS interface.c encoder.cpp huffyuvEncoder.cpp ffvhuffEncoder.cpp ffv1Encoder.cpp)
 
 ADD_LIBRARY(ADM_vidEnc_avcodec SHARED ${ADM_vidEnc_avcodec_SRCS})
 TARGET_LINK_LIBRARIES(ADM_vidEnc_avcodec ADM_core ADM_libavcodec ADM_libswscale)

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/encoder.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/encoder.cpp	2009-07-02 10:33:50 UTC (rev 4983)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/encoder.cpp	2009-07-02 13:40:41 UTC (rev 4984)
@@ -15,19 +15,25 @@
  ***************************************************************************/
 
 #include "encoder.h"
+#include "ffv1Encoder.h"
+#include "ffvhuffEncoder.h"
 #include "HuffyuvEncoder.h"
 #include "ADM_inttype.h"
 
 int uiType;
+
+static FFV1Encoder ffv1;
+static FFVHuffEncoder ffvhuff;
 static HuffyuvEncoder huffyuv;
-static void* encoders = { &huffyuv };
 
+static AvcodecEncoder* encoders[] = { &ffv1, &ffvhuff, &huffyuv};
+
 extern "C"
 {
 	void *avcodecEncoder_getPointers(int _uiType, int *count)
 	{
 		uiType = _uiType;
-		*count = sizeof(encoders) / sizeof(void*);
+		*count = sizeof(encoders) / sizeof(AvcodecEncoder*);
 
 		return &encoders;
 	}

Added: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/ffv1Encoder.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/ffv1Encoder.cpp	2009-07-02 10:33:50 UTC (rev 4983)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/ffv1Encoder.cpp	2009-07-02 13:40:41 UTC (rev 4984)
@@ -0,0 +1,59 @@
+/***************************************************************************
+                               ffv1Encoder.cpp
+
+    begin                : Thu Jul 2 2009
+    copyright            : (C) 2009 by gruntster
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+
+#include "ADM_inttype.h"
+#include "ffv1Encoder.h"
+
+FFV1Encoder::FFV1Encoder(void)
+{
+	init(CODEC_ID_FFV1, PIX_FMT_YUV420P);
+}
+
+const char* FFV1Encoder::getEncoderType(void)
+{
+	return "FFV1";
+}
+
+const char* FFV1Encoder::getEncoderDescription(void)
+{
+	return "FFV1 video encoder plugin for Avidemux (c) Mean/Gruntster";
+}
+
+const char* FFV1Encoder::getFourCC(void)
+{
+	return "FFV1";
+}
+
+const char* FFV1Encoder::getEncoderGuid(void)
+{
+	return "4828D06D-B555-4d72-94EC-34F04F97E501";
+}
+
+int FFV1Encoder::getOptions(vidEncOptions *encodeOptions, char *pluginOptions, int bufferSize)
+{
+	if (encodeOptions)
+	{
+		encodeOptions->encodeMode = ADM_VIDENC_MODE_CQP;
+		encodeOptions->encodeModeParameter = 1000;
+	}
+
+	return 0;
+}
+
+int FFV1Encoder::setOptions(vidEncOptions *encodeOptions, char *pluginOptions)
+{
+	return 0;
+}

Added: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/ffv1Encoder.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/ffv1Encoder.h	2009-07-02 10:33:50 UTC (rev 4983)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/ffv1Encoder.h	2009-07-02 13:40:41 UTC (rev 4984)
@@ -0,0 +1,40 @@
+/***************************************************************************
+                                ffv1Encoder.h
+
+    begin                : Thu Jul 2 2009
+    copyright            : (C) 2009 by gruntster
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+
+#ifndef ffv1Encoder_h
+#define ffv1Encoder_h
+
+#ifdef __cplusplus
+extern "C"
+{
+	#include "ADM_vidEnc_plugin.h"
+}
+
+#include "encoder.h"
+
+class FFV1Encoder : public AvcodecEncoder
+{
+	public:
+		FFV1Encoder(void);
+		const char* getEncoderType(void);
+		const char* getEncoderDescription(void);
+		const char* getFourCC(void);
+		const char* getEncoderGuid(void);
+		int getOptions(vidEncOptions *encodeOptions, char *pluginOptions, int bufferSize);
+		int setOptions(vidEncOptions *encodeOptions, char *pluginOptions);
+};
+#endif	// __cplusplus
+#endif	// ffv1Encoder_h

Added: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/ffvhuffEncoder.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/ffvhuffEncoder.cpp	2009-07-02 10:33:50 UTC (rev 4983)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/ffvhuffEncoder.cpp	2009-07-02 13:40:41 UTC (rev 4984)
@@ -0,0 +1,59 @@
+/***************************************************************************
+                             ffvhuffEncoder.cpp
+
+    begin                : Thu Jul 2 2009
+    copyright            : (C) 2009 by gruntster
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+
+#include "ADM_inttype.h"
+#include "ffvhuffEncoder.h"
+
+FFVHuffEncoder::FFVHuffEncoder(void)
+{
+	init(CODEC_ID_FFVHUFF, PIX_FMT_YUV420P);
+}
+
+const char* FFVHuffEncoder::getEncoderType(void)
+{
+	return "FFVHuff";
+}
+
+const char* FFVHuffEncoder::getEncoderDescription(void)
+{
+	return "FFVHuff video encoder plugin for Avidemux (c) Mean/Gruntster";
+}
+
+const char* FFVHuffEncoder::getFourCC(void)
+{
+	return "FFVH";
+}
+
+const char* FFVHuffEncoder::getEncoderGuid(void)
+{
+	return "E5D8EAC6-71C1-4f3e-A975-B655232271FB";
+}
+
+int FFVHuffEncoder::getOptions(vidEncOptions *encodeOptions, char *pluginOptions, int bufferSize)
+{
+	if (encodeOptions)
+	{
+		encodeOptions->encodeMode = ADM_VIDENC_MODE_CQP;
+		encodeOptions->encodeModeParameter = 1000;
+	}
+
+	return 0;
+}
+
+int FFVHuffEncoder::setOptions(vidEncOptions *encodeOptions, char *pluginOptions)
+{
+	return 0;
+}

Added: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/ffvhuffEncoder.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/ffvhuffEncoder.h	2009-07-02 10:33:50 UTC (rev 4983)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/ffvhuffEncoder.h	2009-07-02 13:40:41 UTC (rev 4984)
@@ -0,0 +1,40 @@
+/***************************************************************************
+                              ffvhuffEncoder.h
+
+    begin                : Thu Jul 2 2009
+    copyright            : (C) 2009 by gruntster
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+
+#ifndef ffvhuffEncoder_h
+#define ffvhuffEncoder_h
+
+#ifdef __cplusplus
+extern "C"
+{
+	#include "ADM_vidEnc_plugin.h"
+}
+
+#include "encoder.h"
+
+class FFVHuffEncoder : public AvcodecEncoder
+{
+	public:
+		FFVHuffEncoder(void);
+		const char* getEncoderType(void);
+		const char* getEncoderDescription(void);
+		const char* getFourCC(void);
+		const char* getEncoderGuid(void);
+		int getOptions(vidEncOptions *encodeOptions, char *pluginOptions, int bufferSize);
+		int setOptions(vidEncOptions *encodeOptions, char *pluginOptions);
+};
+#endif	// __cplusplus
+#endif	// ffvhuffEncoder_h



From mean at mail.berlios.de  Thu Jul  2 20:17:52 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Thu, 2 Jul 2009 20:17:52 +0200
Subject: [Avidemux-svn-commit] r4985 - in
	branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoEncoder:
	include src
Message-ID: <200907021817.n62IHqQr015046@sheep.berlios.de>

Author: mean
Date: 2009-07-02 20:17:52 +0200 (Thu, 02 Jul 2009)
New Revision: 4985

Modified:
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoEncoder/include/ADM_coreVideoEncoderFFmpeg.h
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoEncoder/src/ADM_coreVideoEncoderFFmpeg.cpp
Log:
[ffcoreVideoEncore] Set frame base to 100 us, set pts when encoding

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoEncoder/include/ADM_coreVideoEncoderFFmpeg.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoEncoder/include/ADM_coreVideoEncoderFFmpeg.h	2009-07-02 13:40:41 UTC (rev 4984)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoEncoder/include/ADM_coreVideoEncoderFFmpeg.h	2009-07-02 18:17:52 UTC (rev 4985)
@@ -41,7 +41,7 @@
     virtual               bool             prolog(void); 
     virtual               bool             preEncode(void); 
     virtual               bool             setup(CodecID codecId);
-
+    virtual               bool             getExtraData(uint32_t *l,uint8_t **d) ;
 public:
                             ADM_coreVideoEncoderFFmpeg(ADM_coreVideoFilter *src);
                             ~ADM_coreVideoEncoderFFmpeg();

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoEncoder/src/ADM_coreVideoEncoderFFmpeg.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoEncoder/src/ADM_coreVideoEncoderFFmpeg.cpp	2009-07-02 13:40:41 UTC (rev 4984)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoEncoder/src/ADM_coreVideoEncoderFFmpeg.cpp	2009-07-02 18:17:52 UTC (rev 4985)
@@ -18,6 +18,7 @@
 #define __STDC_CONSTANT_MACROS
 #include "ADM_default.h"
 #include "ADM_coreVideoEncoderFFmpeg.h"
+#define ADM_NO_PTS 0xFFFFFFFFFFFFFFFFLL // FIXME
 /**
     \fn ADM_coreVideoEncoderFFmpeg
     \brief Constructor
@@ -94,10 +95,10 @@
     }
     
     // Eval fps
-    uint64_t f=source->getInfo()->frameIncrement;
-    if(!f) f=40000;
-    _context->time_base.den=1000LL;
-    _context->time_base.num=f/1000;
+    //uint64_t f=source->getInfo()->frameIncrement;
+    // Let's put 100 us as time  base
+    _context->time_base.den=10000LL;
+    _context->time_base.num=1;
     printf("[Time base] %d/%d\n", _context->time_base.num,_context->time_base.den);
     return true;
 }
@@ -115,7 +116,10 @@
         return false;
     }
     prolog();
-  
+    // put a time stamp...
+    if(image->Pts==ADM_NO_PTS) _frame.pts=AV_NOPTS_VALUE;
+    _frame.pts=(image->Pts)/100;
+    //
     switch(targetColorSpace)
     {
         case ADM_COLOR_YV12:      
@@ -189,6 +193,17 @@
         }
     }
     return true;
+}
+/**
+    \fn getExtraData
+    \brief
 
+*/
+bool             ADM_coreVideoEncoderFFmpeg::getExtraData(uint32_t *l,uint8_t **d)
+{
+    *l=_context->extradata_size;
+    *d=_context->extradata;
+    return true;
+
 }
 // EOF
\ No newline at end of file



From mean at mail.berlios.de  Thu Jul  2 20:17:54 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Thu, 2 Jul 2009 20:17:54 +0200
Subject: [Avidemux-svn-commit] r4986 -
	branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/ffMpeg4
Message-ID: <200907021817.n62IHsgK015056@sheep.berlios.de>

Author: mean
Date: 2009-07-02 20:17:54 +0200 (Thu, 02 Jul 2009)
New Revision: 4986

Modified:
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/ffMpeg4/ADM_ffMpeg4.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/ffMpeg4/ADM_ffMpeg4.h
Log:
[ffMpeg4] pop out delayed frame + same Qz as input

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/ffMpeg4/ADM_ffMpeg4.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/ffMpeg4/ADM_ffMpeg4.cpp	2009-07-02 18:17:52 UTC (rev 4985)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/ffMpeg4/ADM_ffMpeg4.cpp	2009-07-02 18:17:54 UTC (rev 4986)
@@ -84,6 +84,7 @@
 {
     switch(Settings.params.mode)
     {
+      case COMPRESS_SAME:
       case COMPRESS_CQ:
             _context->flags |= CODEC_FLAG_QSCALE;
             break;
@@ -116,23 +117,45 @@
 */
 bool         ADM_ffMpeg4Encoder::encode (ADMBitstream * out)
 {
+int sz,q;
 again:
-    if(false==preEncode()) return false;
+    sz=0;
+    if(false==preEncode()) // Pop - out the frames stored in the queue due to B-frames
+    {
+        if ((sz = avcodec_encode_video (_context, out->data, out->bufferSize, NULL)) <= 0)
+        {
+            printf("[ffmpeg4] Error %d encoding video\n",sz);
+            return false;
+        }
+        printf("[ffmpeg4] Popping delayed bframes (%d)\n",sz);
+        goto link;
+    }
+    q=image->_Qp;
+    
+    if(!q) q=2;
     switch(Settings.params.mode)
     {
+      case COMPRESS_SAME:
+                // Keep same frame type & same Qz as the incoming frame...
+            _frame.quality = (int) floor (FF_QP2LAMBDA * q+ 0.5);
+
+            if(image->flags & AVI_KEY_FRAME)    _frame.pict_type=FF_I_TYPE;
+            else if(image->flags & AVI_B_FRAME) _frame.pict_type=FF_B_TYPE;
+            else                               _frame.pict_type=FF_P_TYPE;
+
+            break;
       case COMPRESS_CQ:
             _frame.quality = (int) floor (FF_QP2LAMBDA * Settings.params.qz+ 0.5);
             break;
-            break;
       case COMPRESS_CBR:
             break;
      default:
             printf("[ffMpeg4] Unsupported encoding mode\n");
             return false;
     }
-    printf("[CODEC] Flags = 0x%x, QSCALE=%x, bit_rate=%d, quality=%d qz=%d\n",_context->flags,CODEC_FLAG_QSCALE,
-                                     _context->bit_rate,  _frame.quality, _frame.quality/ FF_QP2LAMBDA);     
-    int sz=0;
+    printf("[CODEC] Flags = 0x%x, QSCALE=%x, bit_rate=%d, quality=%d qz=%d incoming qz=%d\n",_context->flags,CODEC_FLAG_QSCALE,
+                                     _context->bit_rate,  _frame.quality, _frame.quality/ FF_QP2LAMBDA,q);     
+    
     _frame.reordered_opaque=image->Pts;
     if ((sz = avcodec_encode_video (_context, out->data, out->bufferSize, &_frame)) < 0)
     {
@@ -141,6 +164,7 @@
     }
     if(sz==0) // no pic, probably pre filling, try again
         goto again;
+link:
     postEncode(out,sz);
    
     return true;
@@ -169,6 +193,7 @@
     // Update PTS/Dts
     out->pts=_frame.reordered_opaque;
     out->dts=-1; // FIXME
+    
 
     // Update quant
     if(!_context->coded_frame->quality)
@@ -274,7 +299,31 @@
   prolog();
   return true;
 }
+
 /**
+    \fn isDualPass
+
+*/
+bool         ADM_ffMpeg4Encoder::isDualPass(void) 
+{
+    if(Settings.params.mode==COMPRESS_2PASS) return true;
+    return false;
+
+}
+
+/**
+    \fn isDualPass
+
+*/
+bool         ADM_ffMpeg4Encoder::startPass2(void) 
+{
+    // Redo a partial init
+    #warning TOTO
+    return true;
+
+}
+
+/**
     \fn jpegConfigure
     \brief UI configuration for jpeg encoder
 */

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/ffMpeg4/ADM_ffMpeg4.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/ffMpeg4/ADM_ffMpeg4.h	2009-07-02 18:17:52 UTC (rev 4985)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/ffMpeg4/ADM_ffMpeg4.h	2009-07-02 18:17:54 UTC (rev 4986)
@@ -97,6 +97,9 @@
 virtual        bool        setup(void); 
 virtual        bool        encode (ADMBitstream * out);
 virtual const  char        *getFourcc(void) {return "DIVX";}
+
+virtual        bool         isDualPass(void) ;
+virtual        bool         startPass2(void) ;
 };
 
 #endif



From gruntster at mail.berlios.de  Thu Jul  2 22:35:28 2009
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Thu, 2 Jul 2009 22:35:28 +0200
Subject: [Avidemux-svn-commit] r4987 -
	branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec
Message-ID: <200907022035.n62KZSbx000932@sheep.berlios.de>

Author: gruntster
Date: 2009-07-02 22:35:22 +0200 (Thu, 02 Jul 2009)
New Revision: 4987

Added:
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/dvEncoder.cpp
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/dvEncoder.h
Modified:
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/encoder.cpp
Log:
[vidEnc] DV plugin (also supports more profiles)

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/CMakeLists.txt	2009-07-02 18:17:54 UTC (rev 4986)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/CMakeLists.txt	2009-07-02 20:35:22 UTC (rev 4987)
@@ -16,10 +16,10 @@
 set_property(TARGET ADM_libswscale PROPERTY IMPORTED_LOCATION "${FFMPEG_INSTALL_DIR}/${LIBSWSCALE_LIB}")
 
 SET(PLUGIN_SUBDIR "avcodec")
-SET(ADM_vidEnc_avcodec_SRCS interface.c encoder.cpp huffyuvEncoder.cpp ffvhuffEncoder.cpp ffv1Encoder.cpp)
+SET(ADM_vidEnc_avcodec_SRCS interface.c encoder.cpp huffyuvEncoder.cpp ffvhuffEncoder.cpp ffv1Encoder.cpp dvEncoder.cpp)
 
 ADD_LIBRARY(ADM_vidEnc_avcodec SHARED ${ADM_vidEnc_avcodec_SRCS})
-TARGET_LINK_LIBRARIES(ADM_vidEnc_avcodec ADM_core ADM_libavcodec ADM_libswscale)
+TARGET_LINK_LIBRARIES(ADM_vidEnc_avcodec ADM_core ADM_coreUI ADM_libavcodec ADM_libswscale)
 
 INIT_VIDEO_ENCODER_PLUGIN(ADM_vidEnc_avcodec)
 INSTALL_VIDEO_ENCODER(ADM_vidEnc_avcodec)
\ No newline at end of file

Added: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/dvEncoder.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/dvEncoder.cpp	2009-07-02 18:17:54 UTC (rev 4986)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/dvEncoder.cpp	2009-07-02 20:35:22 UTC (rev 4987)
@@ -0,0 +1,105 @@
+/***************************************************************************
+                                dvEncoder.cpp
+
+    begin                : Thu Jul 2 2009
+    copyright            : (C) 2009 by gruntster
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+
+#include <sstream>
+#include <iomanip>
+
+#include "ADM_inttype.h"
+#include "dvEncoder.h"
+#include "DIA_coreToolkit.h"
+
+DVEncoder::DVEncoder(void)
+{
+	init(CODEC_ID_DVVIDEO, PIX_FMT_YUV420P);
+}
+
+const char* DVEncoder::getEncoderType(void)
+{
+	return "DV";
+}
+
+const char* DVEncoder::getEncoderDescription(void)
+{
+	return "DV video encoder plugin for Avidemux (c) Mean/Gruntster";
+}
+
+const char* DVEncoder::getFourCC(void)
+{
+	return "dvsd";
+}
+
+const char* DVEncoder::getEncoderGuid(void)
+{
+	return "D5118154-0B9A-4e9a-BEC6-95DA343E7215";
+}
+
+int DVEncoder::open(vidEncVideoProperties *properties)
+{
+	int ret = AvcodecEncoder::open(properties);
+    int profileCount = sizeof(dvProfiles) / sizeof(dvProfiles[0]);
+	bool validProfile = false;
+
+	if (ret == ADM_VIDENC_ERR_SUCCESS)
+	{
+		for (int i = 0; i < profileCount; i++)
+		{
+			if (properties->height == dvProfiles[i].height && properties->width == dvProfiles[i].width && 
+				((int)(properties->fpsNum * 1000.0 / properties->fpsDen) == (int)(dvProfiles[i].time_base.num * 1000.0 / dvProfiles[i].time_base.den)))
+			{
+				_context->pix_fmt = dvProfiles[i].pix_fmt;
+				validProfile = true;
+				break;
+			}
+		}
+
+		if (!validProfile)
+		{
+			std::string msg;
+			std::stringstream out;
+			
+			out << "The DV encoder only accepts the following profiles:";
+
+			for (int i = 0; i < profileCount; i++)
+			{
+				out << "\n" << dvProfiles[i].width << " x " << dvProfiles[i].height << " @ " << std::fixed
+					<< std::setprecision(2) << (float)dvProfiles[i].time_base.num / dvProfiles[i].time_base.den << "fps";
+			}
+
+			ret = ADM_VIDENC_ERR_FAILED;
+			msg = out.str();
+
+			GUI_Error_HIG("Incompatible settings", msg.c_str());
+		}
+	}
+
+	return ret;
+}
+
+int DVEncoder::getOptions(vidEncOptions *encodeOptions, char *pluginOptions, int bufferSize)
+{
+	if (encodeOptions)
+	{
+		encodeOptions->encodeMode = ADM_VIDENC_MODE_CQP;
+		encodeOptions->encodeModeParameter = 1000;
+	}
+
+	return 0;
+}
+
+int DVEncoder::setOptions(vidEncOptions *encodeOptions, char *pluginOptions)
+{
+	return 0;
+}

Added: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/dvEncoder.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/dvEncoder.h	2009-07-02 18:17:54 UTC (rev 4986)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/dvEncoder.h	2009-07-02 20:35:22 UTC (rev 4987)
@@ -0,0 +1,57 @@
+/***************************************************************************
+                                 dvEncoder.h
+
+    begin                : Thu Jul 2 2009
+    copyright            : (C) 2009 by gruntster
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+
+#ifndef dvEncoder_h
+#define dvEncoder_h
+
+#ifdef __cplusplus
+extern "C"
+{
+	#include "ADM_vidEnc_plugin.h"
+}
+
+#include "encoder.h"
+
+typedef struct DVprofile {
+	AVRational time_base;
+	int height;
+	int width;
+	enum PixelFormat pix_fmt;
+} DVprofile;
+
+static const DVprofile dvProfiles[] = {
+	{ { 30000, 1001 }, 480, 720, PIX_FMT_YUV422P },
+    { { 25, 1 }, 576, 720, PIX_FMT_YUV420P },
+	{ { 50, 1 }, 720, 960, PIX_FMT_YUV422P },
+    { { 60000, 1001 }, 720, 960, PIX_FMT_YUV422P },
+    { { 30000, 1001 }, 1080, 1280, PIX_FMT_YUV422P },
+    { { 25, 1 }, 1080, 1440, PIX_FMT_YUV422P }
+};
+
+class DVEncoder : public AvcodecEncoder
+{
+	public:
+		DVEncoder(void);
+		const char* getEncoderType(void);
+		const char* getEncoderDescription(void);
+		const char* getFourCC(void);
+		const char* getEncoderGuid(void);
+		int getOptions(vidEncOptions *encodeOptions, char *pluginOptions, int bufferSize);
+		int setOptions(vidEncOptions *encodeOptions, char *pluginOptions);
+		int open(vidEncVideoProperties *properties);
+};
+#endif	// __cplusplus
+#endif	// dvEncoder_h

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/encoder.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/encoder.cpp	2009-07-02 18:17:54 UTC (rev 4986)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/encoder.cpp	2009-07-02 20:35:22 UTC (rev 4987)
@@ -15,6 +15,7 @@
  ***************************************************************************/
 
 #include "encoder.h"
+#include "dvEncoder.h"
 #include "ffv1Encoder.h"
 #include "ffvhuffEncoder.h"
 #include "HuffyuvEncoder.h"
@@ -22,11 +23,12 @@
 
 int uiType;
 
+static DVEncoder dv;
 static FFV1Encoder ffv1;
 static FFVHuffEncoder ffvhuff;
 static HuffyuvEncoder huffyuv;
 
-static AvcodecEncoder* encoders[] = { &ffv1, &ffvhuff, &huffyuv};
+static AvcodecEncoder* encoders[] = { &dv, &ffv1, &ffvhuff, &huffyuv};
 
 extern "C"
 {
@@ -284,11 +286,11 @@
 	_openPass = true;
 	_currentPass++;
 
-	if (_targetPixelFormat != PIX_FMT_YUV420P)
+	if (_context->pix_fmt != PIX_FMT_YUV420P)
 	{
 		_swsContext = sws_getContext(
 			_context->width, _context->height, PIX_FMT_YUV420P,
-			_context->width, _context->height, _targetPixelFormat,
+			_context->width, _context->height, _context->pix_fmt,
 			SWS_BICUBLIN, NULL, NULL, NULL);
 
 		_resampleSize = _bufferSize;
@@ -328,7 +330,7 @@
 			AVPicture resamplePicture;
 
 			avpicture_fill(
-				&resamplePicture, _resampleBuffer, _targetPixelFormat, _context->width, _context->height);
+				&resamplePicture, _resampleBuffer, _context->pix_fmt, _context->width, _context->height);
 
 			inputPicture = &resamplePicture;
 



From gruntster at mail.berlios.de  Thu Jul  2 22:37:42 2009
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Thu, 2 Jul 2009 22:37:42 +0200
Subject: [Avidemux-svn-commit] r4988 -
	branches/avidemux_2.5_branch_gruntster/avidemux/ADM_editor
Message-ID: <200907022037.n62KbgJR001125@sheep.berlios.de>

Author: gruntster
Date: 2009-07-02 22:37:37 +0200 (Thu, 02 Jul 2009)
New Revision: 4988

Modified:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_editor/ADM_edLoadSave.cpp
Log:
[script] fix rendering of scanVbr function to file

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_editor/ADM_edLoadSave.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_editor/ADM_edLoadSave.cpp	2009-07-02 20:35:22 UTC (rev 4987)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_editor/ADM_edLoadSave.cpp	2009-07-02 20:37:37 UTC (rev 4988)
@@ -241,7 +241,7 @@
         uint32_t encoding=currentaudiostream->getInfo()->encoding;
         if(currentaudiostream->isVBR() && (encoding==WAV_MP3 || encoding==WAV_MP2))
         {
-            qfprintf(fd,"app.audio.scanVBR();\n");
+            qfprintf(fd,"app.audio.scanVbr();\n");
         }
     }
 



From mean at mail.berlios.de  Fri Jul  3 07:32:00 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Fri, 3 Jul 2009 07:32:00 +0200
Subject: [Avidemux-svn-commit] r4989 - in branches/avidemux_2.6_branch_mean:
	avidemux/common/ADM_videoFilter2
	avidemux_core/ADM_coreVideoFilter/include
Message-ID: <200907030532.n635W08Z025981@sheep.berlios.de>

Author: mean
Date: 2009-07-03 07:31:58 +0200 (Fri, 03 Jul 2009)
New Revision: 4989

Modified:
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoFilter2/ADM_videoFilterBridge.cpp
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoFilter/include/ADM_videoFilterBridge.h
Log:
[FilterChain] Fix off by one due to seeking

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoFilter2/ADM_videoFilterBridge.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoFilter2/ADM_videoFilterBridge.cpp	2009-07-02 20:37:37 UTC (rev 4988)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoFilter2/ADM_videoFilterBridge.cpp	2009-07-03 05:31:58 UTC (rev 4989)
@@ -47,6 +47,7 @@
 {
     printf("[VideoBridge] Goint to %"LU" ms\n",(uint32_t)(startTime/1000));
     video_body->GoToTime(startTime);
+    firstImage=true;
     return true;
 }
 
@@ -65,7 +66,15 @@
 bool         ADM_videoFilterBridge::getNextFrame(ADMImage *image)
 {
 again:
-    bool r=   video_body->NextPicture(image);
+    bool r=false;
+    if(firstImage==true)
+    {
+        firstImage=false;
+        r=video_body->samePicture(image);
+    }else
+    {
+        r=   video_body->NextPicture(image);
+    }
     if(r==false) return false;
     // Translate pts if any
     int64_t pts=image->Pts;

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoFilter/include/ADM_videoFilterBridge.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoFilter/include/ADM_videoFilterBridge.h	2009-07-02 20:37:37 UTC (rev 4988)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoFilter/include/ADM_videoFilterBridge.h	2009-07-03 05:31:58 UTC (rev 4989)
@@ -29,6 +29,7 @@
 protected:
         uint64_t            startTime,endTime;
         FilterInfo          bridgeInfo;
+        bool                firstImage;
 public:
                             ADM_videoFilterBridge(uint64_t startTime, uint64_t endTime);
                             ~ADM_videoFilterBridge();



From gruntster at mail.berlios.de  Fri Jul  3 10:56:02 2009
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Fri, 3 Jul 2009 10:56:02 +0200
Subject: [Avidemux-svn-commit] r4990 - in
	branches/avidemux_2.5_branch_gruntster/avidemux: ADM_codecs
	ADM_encoder
Message-ID: <200907030856.n638u28H007983@sheep.berlios.de>

Author: gruntster
Date: 2009-07-03 10:55:54 +0200 (Fri, 03 Jul 2009)
New Revision: 4990

Modified:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/ADM_ffmpeg.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/ADM_ffmpeg.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/ADM_encCodecDesc.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encConfig.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encffmpeg.cpp
Log:
[vidEnc] remove old encoders that have plugin equivalents

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/ADM_ffmpeg.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/ADM_ffmpeg.cpp	2009-07-03 05:31:58 UTC (rev 4989)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/ADM_ffmpeg.cpp	2009-07-03 08:55:54 UTC (rev 4990)
@@ -318,8 +318,6 @@
     gopMpeg1 ();
   // if (_id == FF_HUFF || _id == FF_FFV1)
   _context->strict_std_compliance = -1;
-  if (_id == FF_HUFF || _id == FF_FFV1 ||_id == FF_FFHUFF )
-    _context->strict_std_compliance = -2;
   
   switch (_id)
     {
@@ -347,27 +345,9 @@
     case FF_FLV1:
       WRAP_Open (CODEC_ID_FLV1);
       break;
-    case FF_HUFF:
-      WRAP_Open (CODEC_ID_HUFFYUV);
-      break;
-    case FF_FFV1:
-      WRAP_Open (CODEC_ID_FFV1);
-      break;
     case FF_MJPEG:
       WRAP_Open (CODEC_ID_MJPEG);
       break;
-    case FF_FFHUFF:
-      WRAP_Open (CODEC_ID_FFVHUFF);
-      break;
-    case FF_SNOW:
-      WRAP_Open (CODEC_ID_SNOW);
-      break;
-      
-    case FF_DV:
-      if(_context->width!=720 || _context->height!=576) 
-            return 0; // should be caught by upper layers before going here...
-      WRAP_Open (CODEC_ID_DVVIDEO);
-      break;
 
     default:
       ADM_assert (0);
@@ -799,98 +779,7 @@
   return init (val, fps1000);
 }
 
-//------------------------------
 uint8_t
-ffmpegEncoderHuff::init (uint32_t val, uint32_t fps1000, uint8_t vbr)
-{
-  UNUSED_ARG (val);
-  UNUSED_ARG (vbr);
-  mplayer_init ();
-
-  _context->time_base = (AVRational)
-  {
-  1000, fps1000};
-//   _context->frame_rate_base = 1000;
-//   _context->frame_rate = fps1000;
-
-
-  _context->bit_rate = 0;
-  _context->bit_rate_tolerance = 1024 * 8 * 1000;
-  _context->gop_size = 250;
-
-  return initContext ();
-}
-//__________________________________
-/**
-
-*/
-
-ffmpegEncoderHuff::ffmpegEncoderHuff (uint32_t width, uint32_t height,FF_CODEC_ID id) 
-  :   ffmpegEncoder (width,height, id,PIX_FMT_YUV422P) 
-{
-  // Allocate our resampler & intermediate
-  yuy2=new uint8_t[width*height*2];
-  // And Color converted
-    convert=new ADMColorspace(width,height, ADM_COLOR_YV12,ADM_COLOR_YUV422P);
-}
-/**
-
-*/
-
-ffmpegEncoderHuff::~ffmpegEncoderHuff()
-{
-  if(yuy2)
-  {
-    delete [] yuy2;
-    yuy2=NULL;  
-  }
-  if(convert)
-  {
-   delete convert;
-    convert=NULL; 
-  }
-  stopEncoder ();
-}
-/**
-
-*/
-  uint8_t   ffmpegEncoderHuff::encode(ADMImage *in,ADMBitstream *out)
-{
-    int32_t sz = 0;
-    ADM_assert(out->bufferSize);
-    encodePreamble(yuy2);
-    /* Convert */
-   convert->convert(in->data,yuy2);
-    
-    /***/
-    if ((sz = avcodec_encode_video (_context, out->data, out->bufferSize, &_frame)) < 0)
-        return 0;
-    postAmble(out,sz);
-    return 1;
-}
-//------------------------------
-uint8_t
-  ffmpegEncoderFFHuff::init (uint32_t val, uint32_t fps1000, uint8_t vbr)
-{
-  UNUSED_ARG (val);
-  UNUSED_ARG (vbr);
-  mplayer_init ();
-
-/*  _context->frame_rate_base = 1000;
-  _context->frame_rate = fps1000;*/
-  _context->time_base = (AVRational)
-  {
-  1000, fps1000};
-
-  _context->bit_rate = 0;
-  _context->bit_rate_tolerance = 1024 * 8 * 1000;
-  _context->gop_size = 250;
-
-  return initContext ();
-}
-
-//_______________________________________
-uint8_t
 ffmpegEncoder::getExtraData (uint32_t * l, uint8_t ** d)
 {
   *d = (uint8_t *) _context->extradata;
@@ -903,31 +792,7 @@
     return 0;
 }
 
-//----
-//------------------------------
 uint8_t
-ffmpegEncoderFFV1::init (uint32_t val, uint32_t fps1000, uint8_t vbr)
-{
-  UNUSED_ARG (val);
-  UNUSED_ARG (vbr);
-  mplayer_init ();
-  _context->time_base = (AVRational)
-  {
-  1000, fps1000};
-//   _context->frame_rate_base = 1000;
-//   _context->frame_rate = fps1000;
-
-
-  _context->bit_rate = 0;
-  _context->bit_rate_tolerance = 1024 * 8 * 1000;
-  _context->gop_size = 250;
-  printf ("[LAVCODEC]FFV1 codec initializing...\n");
-  return initContext ();
-}
-
-/*---
-*/
-uint8_t
   ffmpegEncoderFFMjpeg::init (uint32_t val, uint32_t fps1000, uint8_t vbr)
 {
   UNUSED_ARG (val);

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/ADM_ffmpeg.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/ADM_ffmpeg.h	2009-07-03 05:31:58 UTC (rev 4989)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/ADM_ffmpeg.h	2009-07-03 08:55:54 UTC (rev 4990)
@@ -29,13 +29,8 @@
   FF_MPEG1 = 3,
   FF_H263 = 4,
   FF_H263P = 5,
-  FF_HUFF = 6,
-  FF_FFV1 = 7,
   FF_MJPEG = 8,
   FF_MPEG2 = 9,
-  FF_SNOW = 10,
-  FF_FFHUFF = 11,
-  FF_DV=12,
   FF_FLV1=13,
 } FF_CODEC_ID;
 
@@ -158,51 +153,7 @@
   virtual uint8_t encode (ADMImage * in, ADMBitstream * out);
   virtual ~ ffmpegEncoderVBRExternal ();
 };
-//*********************************************************
-class ffmpegEncoderHuff:public ffmpegEncoder
-{
-protected: 
-            uint8_t *yuy2;
-            ADMColorspace *convert;
 
-public:
-                ffmpegEncoderHuff (uint32_t width, uint32_t height,FF_CODEC_ID id);
-                        
-
-  virtual uint8_t init (uint32_t val, uint32_t fps1000, uint8_t vbr = 0);
-          uint8_t encode(ADMImage *in,ADMBitstream *out);
-  virtual ~ ffmpegEncoderHuff ();
-};
-//*********************************************************
-class ffmpegEncoderFFHuff:public ffmpegEncoder
-{
-protected: 
-public:
-        ffmpegEncoderFFHuff (uint32_t width, uint32_t height,FF_CODEC_ID id):
-                                ffmpegEncoder (width,height, id)
-  {
-
-  };
-
-  virtual uint8_t init (uint32_t val, uint32_t fps1000, uint8_t vbr = 0);
-  virtual ~ ffmpegEncoderFFHuff ()
-  {
-    stopEncoder ();
-  }
-};
-
-
-class ffmpegEncoderFFV1:public ffmpegEncoder
-{
-protected: public:ffmpegEncoderFFV1 (uint32_t width, uint32_t height,FF_CODEC_ID id)
-    :ffmpegEncoder (width,height, id) {}
-  virtual uint8_t init (uint32_t val, uint32_t fps1000, uint8_t vbr = 0);
-  virtual ~ ffmpegEncoderFFV1 ()
-  {
-    stopEncoder ();
-
-  }
-};
 class ffmpegEncoderFFMjpeg:public ffmpegEncoder
 {
 protected:uint32_t _qual;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/ADM_encCodecDesc.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/ADM_encCodecDesc.h	2009-07-03 05:31:58 UTC (rev 4989)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/ADM_encCodecDesc.h	2009-07-03 08:55:54 UTC (rev 4990)
@@ -187,70 +187,7 @@
   sizeof (ffmpeg4Extra),
   &DIA_flv1Param
 };
-COMPRES_PARAMS ffmpegSnow = {
-  CodecSnow,
-  QT_TR_NOOP("Snow (lavc)"),
-  "FFMpeg4",
-  "Lavcodec Snow",
-  COMPRESS_CQ,
-  4,
-  1500,
-  700,
-  1000, // AVG
-  ADM_ENC_CAP_CBR + ADM_ENC_CAP_CQ + ADM_ENC_CAP_2PASS,
-  ADM_EXTRA_PARAM,
-  &ffmpeg4Extra,
-  sizeof (ffmpeg4Extra),
-  NULL
-};
-COMPRES_PARAMS ffmpegFFHUFF = {
-  CodecFFhuff,
-  QT_TR_NOOP("FF Huffyuv (lavc)"),
-  "FFHUFF",
-  "Lavcodec FF HUFFYUV",
-  COMPRESS_CQ,
-  4,
-  1500,
-  700,
-  1000, // AVG
-  ADM_ENC_CAP_CBR + ADM_ENC_CAP_CQ + ADM_ENC_CAP_2PASS,
-  ADM_EXTRA_PARAM,
-  &ffmpeg4Extra,
-  sizeof (ffmpeg4Extra),
-  NULL
-};
-COMPRES_PARAMS ffmpegHUFF = {
-  CodecHuff,
-  QT_TR_NOOP("Huffyuv (lavc)"),
-  "HUFF",
-  "Lavcodec HUFFYUV",
-  COMPRESS_CQ,
-  4,
-  1500,
-  700,
-  1000, // AVG
-  ADM_ENC_CAP_CQ,
-  ADM_EXTRA_PARAM,
-  &ffmpeg4Extra,
-  sizeof (ffmpeg4Extra),
-  NULL
-};
-COMPRES_PARAMS ffmpegFFV1 = {
-  CodecFFV1,
-  QT_TR_NOOP("FFV1 (lavc)"),
-  "FFV1",
-  "Lavcodec FFV1",
-  COMPRESS_CQ,
-  4,
-  1500,
-  700,
-  1000, // AVG
-  ADM_ENC_CAP_CQ,
-  ADM_EXTRA_PARAM,
-  &ffmpeg4Extra,
-  sizeof (ffmpeg4Extra),
-  NULL
-};
+
 static MJPEGConfig MjpegExtra = { 90, 0 };
 extern uint8_t DIA_mjpegCodecSetting (COMPRES_PARAMS * param);
 COMPRES_PARAMS MjpegCodec = {
@@ -705,10 +642,6 @@
   &SVCDCodec,
   &DVDCodec,
   &RequantCodec,
-  &ffmpegDV,
-  &ffmpegHUFF,
-  &ffmpegFFHUFF,
-  &ffmpegFFV1,
   &yv12codec,
   &ffmpegH263Codec,
   &MjpegCodec,

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encConfig.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encConfig.cpp	2009-07-03 05:31:58 UTC (rev 4989)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encConfig.cpp	2009-07-03 08:55:54 UTC (rev 4990)
@@ -595,24 +595,9 @@
 	case CodecMjpeg:
 		e = new EncoderMjpeg (&MjpegCodec);
 		break;
-	case CodecFFhuff:
-		e = new EncoderFFMPEGFFHuff (desc);
-		break;
-	case CodecHuff:
-		e = new EncoderFFMPEGHuff (desc);
-		break;
 	case CodecFLV1:
 		e = new EncoderFFMPEGFLV1 (desc);
 		break;
-	case CodecFFV1:
-		e = new EncoderFFMPEGFFV1 (desc);
-		break;
-	case CodecDV:
-		e = new EncoderFFMPEGDV (desc);
-		break;
-	case CodecSnow:
-		e = new EncodeFFMPEGSNow (desc);
-		break;
 	case CodecH263:
 		if (!((w == 128) && (h == 96)) && !((w == 176) && (h == 144)))
 		{

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encffmpeg.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encffmpeg.cpp	2009-07-03 05:31:58 UTC (rev 4989)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encffmpeg.cpp	2009-07-03 08:55:54 UTC (rev 4990)
@@ -46,234 +46,6 @@
   _id = id;
 };
 
-//---------------huff----------
-EncoderFFMPEGHuff::EncoderFFMPEGHuff (COMPRES_PARAMS * config):
-EncoderFFMPEG (FF_HUFF, config)
-{
-  _id = FF_HUFF;
-  _frametogo = 0;
-  _state=enc_CQ;
-
-}
-
-int EncoderFFMPEGHuff::getRequirements (void) { return _codec->capabilities; }
-
-uint8_t
-EncoderFFMPEGHuff::hasExtraHeaderData (uint32_t * l, uint8_t ** data)
-{
-  uint8_t r = 0;
-  r = _codec->getExtraData (l, data);
-  printf ("Huff has %d extra bytes\n", *l);
-  return r;
-
-}
-uint8_t
-EncoderFFMPEGHuff::configure (AVDMGenericVideoStream * instream, int useExistingLogFile)
-{
-  ADM_assert (instream);
-  ADV_Info *info;
-
-
-
-  info = instream->getInfo ();
-  _fps = info->fps1000;
-  _w = info->width;
-  _h = info->height;
-
-  _vbuffer = new ADMImage (_w, _h);
-  ADM_assert (_vbuffer);
-  _in = instream;
-
-  _codec = new ffmpegEncoderHuff(_w, _h, _id);
-  _codec->init (_param.qz, _fps, 0);
-  return 1;
-
-
-
-}
-
-//_________________ffhuff_______________________________
-EncoderFFMPEGFFHuff::EncoderFFMPEGFFHuff (COMPRES_PARAMS * config):
-EncoderFFMPEG (FF_FFHUFF, config)
-{
-  _id = FF_FFHUFF;
-  _frametogo = 0;
-}
-
-int EncoderFFMPEGFFHuff::getRequirements (void) { return _codec->capabilities; }
-
-uint8_t
-EncoderFFMPEGFFHuff::hasExtraHeaderData (uint32_t * l, uint8_t ** data)
-{
-  uint8_t r = 0;
-  r = _codec->getExtraData (l, data);
-  printf ("Huff has %d extra bytes\n", *l);
-  return r;
-
-}
-uint8_t
-EncoderFFMPEGFFHuff::configure (AVDMGenericVideoStream * instream, int useExistingLogFile)
-{
-  ADM_assert (instream);
-  ADV_Info *info;
-
-
-
-  info = instream->getInfo ();
-  _fps = info->fps1000;
-  _w = info->width;
-  _h = info->height;
-  _vbuffer = new ADMImage (_w, _h);
-  ADM_assert (_vbuffer);
-  _in = instream;
-
-  _codec = new ffmpegEncoderCQ (_w, _h, _id);
-  _codec->init (_param.qz, _fps, 0);
-  _state=enc_CQ;
-  return 1;
-
-
-
-}
-
-
-//-------------------ffv1------------------
-EncoderFFMPEGFFV1::EncoderFFMPEGFFV1 (COMPRES_PARAMS * config):
-EncoderFFMPEG (FF_HUFF, config)
-{
-  _id = FF_FFV1;
-  _frametogo = 0;
-
-
-}
-
-int EncoderFFMPEGFFV1::getRequirements (void) { return _codec->capabilities; }
-
-uint8_t
-EncoderFFMPEGFFV1::hasExtraHeaderData (uint32_t * l, uint8_t ** data)
-{
-  *l = 0;
-  *data = NULL;
-  return 0;
-
-}
-uint8_t
-EncoderFFMPEGFFV1::configure (AVDMGenericVideoStream * instream, int useExistingLogFile)
-{
-  ADM_assert (instream);
-  ADV_Info *info;
-  info = instream->getInfo ();
-  _fps = info->fps1000;
-  _w = info->width;
-  _h = info->height;
-//  _vbuffer = new uint8_t[_w * _h * 3];
-  _vbuffer = new ADMImage (_w, _h);
-  ADM_assert (_vbuffer);
-  _in = instream;
-
-  _codec = new ffmpegEncoderCQ (_w, _h, _id);
-  _codec->init (_param.qz, _fps, 0);
-  _state=enc_CQ;
-  return 1;
-}
-
-
-//--------------end------------
-//************************* SNOW **************************
-EncodeFFMPEGSNow::EncodeFFMPEGSNow (COMPRES_PARAMS * config):
-EncoderFFMPEG (FF_HUFF, config)
-{
-  _id = FF_SNOW;
-  _frametogo = 0;
-
-
-}
-
-int EncodeFFMPEGSNow::getRequirements (void) { return _codec->capabilities; }
-
-uint8_t
-EncodeFFMPEGSNow::hasExtraHeaderData (uint32_t * l, uint8_t ** data)
-{
-  *l = 0;
-  *data = NULL;
-  return 0;
-
-}
-uint8_t
-EncodeFFMPEGSNow::configure (AVDMGenericVideoStream * instream, int useExistingLogFile)
-{
-  ADM_assert (instream);
-  ADV_Info *info;
-
-
-
-  info = instream->getInfo ();
-  _fps = info->fps1000;
-  _w = info->width;
-  _h = info->height;
-  _vbuffer = new ADMImage (_w, _h);
-  ADM_assert (_vbuffer);
-  _in = instream;
-
-  _codec = new ffmpegEncoderCQ (_w, _h, _id);
-  _codec->init (_param.qz, _fps, 0);
-  _state=enc_CQ;
-  return 1;
-
-
-
-}
-
-//*********************DV **********************************************
-EncoderFFMPEGDV::EncoderFFMPEGDV (COMPRES_PARAMS * config):
-EncoderFFMPEG (FF_DV, config)
-{
-  _id = FF_DV;
-  _frametogo = 0;
-
-
-}
-
-int EncoderFFMPEGDV::getRequirements (void) { return _codec->capabilities; }
-
-uint8_t
-EncoderFFMPEGDV::hasExtraHeaderData (uint32_t * l, uint8_t ** data)
-{
-  *l = 0;
-  *data = NULL;
-  return 0;
-
-}
-uint8_t
-EncoderFFMPEGDV::configure (AVDMGenericVideoStream * instream, int useExistingLogFile)
-{
-  ADM_assert (instream);
-  ADV_Info *info;
-
-
-
-  info = instream->getInfo ();
-  _fps = info->fps1000;
-  _w = info->width;
-  _h = info->height;
-  
-  _vbuffer = new ADMImage (_w, _h);
-  ADM_assert (_vbuffer);
-  _in = instream;
-
-  if(_w!=720 || _h!=576 || _fps!=25000)
-  {
-    GUI_Error_HIG(QT_TR_NOOP("Incompatible settings"),QT_TR_NOOP("At the moment, the DV codec only accepts 720*576 at 25"));
-    return 0;
-  }
-  _codec = new ffmpegEncoderCQ (_w, _h, _id);
-  _codec->init (_param.qz, _fps, 0);
-  _state=enc_CQ;
-  return 1;
-
-
-
-}
 //********************* FLV1 **********************************************
 EncoderFFMPEGFLV1::EncoderFFMPEGFLV1 (COMPRES_PARAMS * config):
 EncoderFFMPEG (FF_FLV1, config)
@@ -322,7 +94,6 @@
 
 }
 
-//************************* SNOW **************************
 // return codec name as seen in avi header
 //
 const char *
@@ -330,15 +101,6 @@
 {
   switch (_id)
     {
-    case FF_DV:
-        return "dvsd";
-        break;
-    case FF_FFHUFF:
-      return "FFVH";
-      break;
-    case FF_HUFF:
-      return "HFYU";
-      break;
     case FF_MPEG4:
       return "DX50";
       break;
@@ -346,12 +108,6 @@
     case FF_H263:
       return "H263";
       break;
-    case FF_FFV1:
-      return "FFV1";
-      break;
-    case FF_SNOW:
-      return "SNOW";
-      break;
     case FF_FLV1:
       return "FLV1";
       break;



From gruntster at mail.berlios.de  Fri Jul  3 12:11:50 2009
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Fri, 3 Jul 2009 12:11:50 +0200
Subject: [Avidemux-svn-commit] r4991 - in
	branches/avidemux_2.5_branch_gruntster/avidemux: . ADM_codecs
	ADM_encoder ADM_libraries/ADM_utilities
	ADM_userInterfaces/ADM_GTK/ADM_dialog
	ADM_userInterfaces/ADM_NONE/ADM_dialog
Message-ID: <200907031011.n63ABoME016846@sheep.berlios.de>

Author: gruntster
Date: 2009-07-03 12:11:38 +0200 (Fri, 03 Jul 2009)
New Revision: 4991

Removed:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encXvid4.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encXvid4.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encxvid.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encxvid.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/xvid_vbr.c
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/xvid_vbr.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_exLame.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_pipe.cpp
Modified:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/ADM_codecs.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/ADM_encCodecDesc.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/ADM_vidEncode.hxx
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encConfig.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encConfig.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encoder.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/prefs.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_NONE/ADM_dialog/DIA_none.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/prefs.h
   branches/avidemux_2.5_branch_gruntster/avidemux/prefs.in
Log:
[vidEnc] remove more remnants of old encoders

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/ADM_codecs.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/ADM_codecs.cpp	2009-07-03 08:55:54 UTC (rev 4990)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/ADM_codecs.cpp	2009-07-03 10:11:38 UTC (rev 4991)
@@ -33,10 +33,6 @@
 
 //#include "ADM_colorspace/colorspace.h"
 
-#ifdef USE_XX_XVID
-#include "xvid.h"
-#endif
-
 #include "ADM_codecs/ADM_codec.h"
 #include "ADM_codecs/ADM_mjpeg.h"
 #include "ADM_codecs/ADM_codecNull.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/ADM_encCodecDesc.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/ADM_encCodecDesc.h	2009-07-03 08:55:54 UTC (rev 4990)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/ADM_encCodecDesc.h	2009-07-03 10:11:38 UTC (rev 4991)
@@ -155,22 +155,7 @@
   sizeof (ffmpeg4Extra),
   getFFCompressParams
 };
-COMPRES_PARAMS ffmpegDV = {
-  CodecDV,
-  QT_TR_NOOP("DV (lavc)"),
-  "DV",
-  "DV",
-  COMPRESS_CQ,
-  4,
-  1500,
-  700,
-  1000, // AVG
-  ADM_ENC_CAP_CBR + ADM_ENC_CAP_CQ,
-  ADM_EXTRA_PARAM,
-  &ffmpeg4Extra,
-  sizeof (ffmpeg4Extra),
-  NULL
-};
+
 COMPRES_PARAMS ffmpegFLV1 = {
   CodecFLV1,
   QT_TR_NOOP("FLV1 (lavc)"),
@@ -489,139 +474,6 @@
   DIA_SVCDParam
 };
 
-/*
-//*************************** Xvid 0.9*****************
-*/
-#ifdef USE_XX_XVID
-#error !!! XVID 0.9 support not codec
-#error !!! XVID 0.9 support not codec
-#error !!! XVID 0.9 support not codec
-#error !!! XVID 0.9 support not codec
-
-
-#endif
-
-//*************************** Xvid 4*****************
-
-#ifdef USE_XVID_4
-xvid4EncParam xvid4Extra = {
-  6,				//int guiLevel;              
-
-  1,				//int min_key_interval;
-  250,				// Max key interval
-  2,				//int bframes;
-
-  0,				//int mpegQuantizer; 
-  0,				//int interlaced;
-  1,				//int inter4mv;
-  0,				//int trellis;       
-  0,				//int cartoon;
-  0,				//int greyscale;             
-  0,				// qpel
-  0,				// GMC
-  1,				// BVHQ
-  1,				// hqac
-  0,				// Chroma optim
-  {2, 2, 2}
-  ,				//qmin
-  {31, 31, 31}
-  ,				//qmax
-
-  0,				//par as input
-  1,				//par width
-  1,				//par height
-
-  // This if for 2 pass   
-  0,				//int keyframe_boost;
-  0,				//int curve_compression_high;
-  0,				//int curve_compression_low;
-  5,				//int overflow_control_strength;
-  5,				//int max_overflow_improvement;
-  5,				//int max_overflow_degradation;
-  0,				//int kfreduction;
-  0,				//int kfthreshold;
-
-  0,				//24,//int container_frame_overhead;
-  150,				//int bquant_ratio;
-  100,				//int bquant_offset;    
-  1,				//vhqmode                
-  1,				// chroma me
-  0,				// turbo
-  0,				// Packed bitstream - Not Xvid Default
-  1,				// closed_gop
-  0,				// bframe_threshold
-  0,                            // Use inter
-  0                             // Use intra
-};
-xvid4EncParam xvid4ExtraIPOD = {
-  6,				//int guiLevel;              
-
-  1,				//int min_key_interval;
-  250,				// Max key interval
-  0,				//int bframes;
-
-  0,				//int mpegQuantizer; 
-  0,				//int interlaced;
-  1,				//int inter4mv;
-  0,				//int trellis;       
-  0,				//int cartoon;
-  0,				//int greyscale;             
-  0,				// qpel
-  0,				// GMC
-  1,				// BVHQ
-  1,				// hqac
-  0,				// Chroma optim
-  {2, 2, 2}
-  ,				//qmin
-  {31, 31, 31}
-  ,				//qmax
-
-  0,				//par as input
-  1,				//par width
-  1,				//par height
-
-  // This if for 2 pass   
-  0,				//int keyframe_boost;
-  0,				//int curve_compression_high;
-  0,				//int curve_compression_low;
-  5,				//int overflow_control_strength;
-  5,				//int max_overflow_improvement;
-  5,				//int max_overflow_degradation;
-  0,				//int kfreduction;
-  0,				//int kfthreshold;
-
-  0,				//24,//int container_frame_overhead;
-  150,				//int bquant_ratio;
-  100,				//int bquant_offset;    
-  1,				//vhqmode                
-  1,				// chroma me
-  0,				// turbo
-  0,				// Packed bitstream - Not Xvid Default
-  1,				// closed_gop
-  0,				// bframe_threshold
-  0,                            // Use inter
-  0                             // Use intra
-};
-
-extern uint8_t DIA_xvid4 (COMPRES_PARAMS * incoming);
-COMPRES_PARAMS Xvid4Codec = {
-  CodecXvid4,
-  QT_TR_NOOP("MPEG-4 ASP (Xvid4)"),
-  "XVID4",
-  "XVID 4 mpeg4",
-  COMPRESS_CQ,
-  4,
-  1500,
-  700,
-  1000, // AVG
-  ADM_ENC_CAP_CBR + ADM_ENC_CAP_CQ + ADM_ENC_CAP_2PASS +ADM_ENC_CAP_2PASS_BR+ADM_ENC_CAP_SAME,
-  ADM_EXTRA_PARAM,
-  &xvid4Extra,
-  sizeof (xvid4Extra),
-  DIA_xvid4
-};
-#endif
-
 COMPRES_PARAMS DUMMYONE =
   { CodecDummy, QT_TR_NOOP("dummy"), "dummy", "dummy", COMPRESS_CQ, 4, 1500, 700,1000, 0, 0,
 NULL, 0 };
@@ -631,9 +483,6 @@
 
 COMPRES_PARAMS *internalVideoCodec[] = {
   &CopyCodec,
-#ifdef USE_XVID_4
-  &Xvid4Codec,
-#endif
   &ffmpegMpeg4,
   &ffmpeg1Codec,
   &ffmpeg2DVDCodec,

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/ADM_vidEncode.hxx
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/ADM_vidEncode.hxx	2009-07-03 08:55:54 UTC (rev 4990)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/ADM_vidEncode.hxx	2009-07-03 10:11:38 UTC (rev 4991)
@@ -21,25 +21,18 @@
 {
   CodecCopy,
   CodecDivx,
-  CodecXvid,
   CodecFF,
   CodecMjpeg,
   CodecH263,
   CodecH263P,
-  CodecFFV1,
-  CodecSnow,
-  CodecHuff,
   CodecVCD,
   CodecSVCD,
   CodecDVD,
   CodecXVCD,
   CodecXSVCD,
   CodecXDVD,
-  CodecXvid4,
-  CodecFFhuff,
   CodecYV12,
   CodecRequant,
-  CodecDV,
   CodecFLV1,
   CodecExternal,
   CodecDummy

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/CMakeLists.txt	2009-07-03 08:55:54 UTC (rev 4990)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/CMakeLists.txt	2009-07-03 10:11:38 UTC (rev 4991)
@@ -1,11 +1,6 @@
 SET(ADM_encoder_SRCS 
-	adm_encConfig.cpp  adm_encffmpeg1.cpp  adm_encmjpeg.cpp     adm_encoder.cpp   adm_encxvid.cpp
-	adm_encCopy.cpp    adm_encdivx.cpp    adm_encffmpeg.cpp   adm_encmpeg2enc.cpp  adm_encRequant.cpp  adm_encXvid4.cpp  adm_encyv12.cpp
+	adm_encConfig.cpp  adm_encffmpeg1.cpp  adm_encmjpeg.cpp     adm_encoder.cpp
+	adm_encCopy.cpp    adm_encdivx.cpp    adm_encffmpeg.cpp   adm_encmpeg2enc.cpp  adm_encRequant.cpp  adm_encyv12.cpp
 	ADM_pluginLoad.cpp ADM_externalEncoder.cpp)
 
 ADD_ADM_LIB_ALL_TARGETS(ADM_encoder ${ADM_encoder_SRCS})
-
-IF (USE_XVID_4)
-	ADD_SOURCE_CFLAGS(adm_encxvid.cpp -I${XVID_INCLUDE_DIR})
-	ADD_SOURCE_CFLAGS(adm_encXvid4.cpp -I${XVID_INCLUDE_DIR})
-ENDIF (USE_XVID_4)
\ No newline at end of file

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encConfig.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encConfig.cpp	2009-07-03 08:55:54 UTC (rev 4990)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encConfig.cpp	2009-07-03 10:11:38 UTC (rev 4991)
@@ -47,18 +47,6 @@
 #include "adm_encConfig.h"
 #include "adm_encoder.h"
 
-#ifdef USE_XVID_4
-#include "ADM_codecs/ADM_xvid4.h"
-#include "ADM_codecs/ADM_xvid4param.h"
-#include "adm_encXvid4.h"
-#endif
-
-#ifdef USE_XX_XVID
-#include "ADM_codecs/ADM_xvid.h"
-#include "adm_encxvid.h"
-#include "xvid.h"
-#endif
-
 #include "ADM_codecs/ADM_ffmpeg.h"
 #include "adm_encffmpeg.h"
 
@@ -607,11 +595,6 @@
 
 		e = new EncoderFFMPEG (FF_H263, desc);
 		break;
-#ifdef USE_XVID_4
-	case CodecXvid4:
-		e = new EncoderXvid4 (desc);
-		break;
-#endif
 	case CodecExternal:
 		e = new externalEncoder(&AllVideoCodec[currentCodecIndex], globalHeaderFlag);
 		break;
@@ -785,15 +768,4 @@
 	}
 }
 
-#ifdef USE_XVID_4
-/**
-    \fn     setIpod_Xvid4Preset(void)
-    \brief  set XVID4 codec conf to the Ipod preset
-*/
-void setIpod_Xvid4Preset(void)
-{
-	memcpy(&xvid4Extra,&xvid4ExtraIPOD,sizeof(xvid4ExtraIPOD)); 
-}
-#endif
-
 // EOF

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encConfig.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encConfig.h	2009-07-03 08:55:54 UTC (rev 4990)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encConfig.h	2009-07-03 10:11:38 UTC (rev 4991)
@@ -20,5 +20,4 @@
 const char *videoCodecGetMode(void);
 uint8_t videoCodecSetFinalSize(uint32_t size);
 
-void setIpod_Xvid4Preset(void);
 #endif	// adm_encConfig_h

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encXvid4.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encXvid4.cpp	2009-07-03 08:55:54 UTC (rev 4990)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encXvid4.cpp	2009-07-03 10:11:38 UTC (rev 4991)
@@ -1,294 +0,0 @@
-/***************************************************************************
-                          adm_encxvid.cpp  -  description
-                             -------------------
-			     Encoder for Xvid 1.0x (dev-api4)
-    begin                : Sun Jul 14 2002
-    copyright            : (C) 2002/2003 by mean
-    email                : fixounet at free.fr
- ***************************************************************************/
-
-/***************************************************************************
- *                                                                         *
- *   This program is free software; you can redistribute it and/or modify  *
- *   it under the terms of the GNU General Public License as published by  *
- *   the Free Software Foundation; either version 2 of the License, or     *
- *   (at your option) any later version.                                   *
- *                                                                         *
- ***************************************************************************/
-#include "config.h"
-
-#define __STDC_LIMIT_MACROS
-
-#ifdef USE_XVID_4
-#include "xvid.h"
-
-#include "fourcc.h"
-#include "avi_vars.h"
-
-#include "ADM_default.h"
-
-#include "ADM_encoder/ADM_vidEncode.hxx"
-
-#include "ADM_videoFilter.h"
-#include "ADM_codecs/ADM_xvid4.h"
-#include "ADM_encoder/adm_encoder.h"
-#include "ADM_encoder/adm_encXvid4.h"
-
-
-#define aprintf printf
-
-
-
-/*_________________________________________________*/
-EncoderXvid4::EncoderXvid4 (COMPRES_PARAMS * codecconfig)
-{
-
-  _codec = NULL;
-  strcpy (_logname, "");
-  _frametogo = 0;
-  _pass1Done = 0;
-
-  memcpy (&_param, codecconfig, sizeof (_param));
-  ADM_assert (codecconfig->extraSettingsLen == sizeof (encparam));
-  memcpy (&encparam, codecconfig->extraSettings, sizeof (encparam));
-
-
-};
-EncoderXvid4::~EncoderXvid4 ()
-{
-
-  stop ();
-
-};
-//--------------------------------
-uint8_t
-EncoderXvid4::configure (AVDMGenericVideoStream * instream, int useExistingLogFile)
-{
-  ADM_assert (instream);
-  ADV_Info *info;
-
-  //uint32_t flag1,flag2,flag3;
-  if(encparam.par_as_input)
-  {
-    encparam.par_width=instream->getPARWidth();
-    encparam.par_height=instream->getPARHeight();
-  }else
-  {
-      printf("[xvid] Using %u x %u aspect ratio\n",encparam.par_width,encparam.par_height);
-  }
-  
-  //
-  info = instream->getInfo ();
-  _w = info->width;
-  _h = info->height;
-//  _vbuffer = new uint8_t[_w * _h * 2];
-  _vbuffer = new ADMImage (_w, _h);
-  ADM_assert (_vbuffer);
-  _in = instream;
-  _fps1000 = info->fps1000;
-  switch (_param.mode)
-    {
-    case COMPRESS_SAME:
-      printf ("[xvid] Follow quant mode\n");
-      _state = enc_Same;
-      _codec = new xvid4EncoderVBRExternal (_w, _h);
-      if (!_codec->init (2, info->fps1000, &encparam))
-	{
-	  printf ("[xvid] Error init Follow mode\n");
-	  return 0;
-	}
-      break;
-    case COMPRESS_CQ:
-      printf ("[xvid] CQ mode: %ld\n", _param.qz);
-      _state = enc_CQ;
-      _codec = new xvid4EncoderCQ (_w, _h);
-
-      if (!_codec->init (_param.qz, info->fps1000, &encparam))
-	{
-	  printf ("[xvid] Error init CQ mode\n");
-	  return 0;
-	}
-      break;
-    case COMPRESS_CBR:
-      printf ("[xvid] CBR mode: %lu\n", _param.bitrate);
-      _state = enc_CBR;
-
-      _codec = new xvid4EncoderCBR (_w, _h);
-      if (!_codec->init (_param.bitrate, info->fps1000, &encparam))
-	{
-	  printf ("[xvid] Error init CBR mode\n");
-	  return 0;
-	}
-      break;
-    case COMPRESS_2PASS:
-    case COMPRESS_2PASS_BITRATE:
-      if(_param.mode==COMPRESS_2PASS)
-          printf ("[xvid] Dual size: %lu (%s)\n", _param.finalsize, _logname);
-      else
-          printf ("[xvid] Dual avg br: %u kb/s (%s)\n", _param.avg_bitrate, _logname);
-      _state = enc_Pass1;
-      _codec = new xvid4EncoderPass1 (_w, _h);
-      strcpy (encparam.logName, _logname);
-      printf ("[xvid] Using %s as stat file\n", encparam.logName);
-
-      break;
-    default:
-      ADM_assert (0);
-    }
-  printf ("[xvid] Encoder ready, w: %lu h: %lu mode: %d\n", _w, _h, _state);
-  return 1;
-
-}
-
-
-
-uint8_t EncoderXvid4::startPass1 (void)
-{
-  ADV_Info *
-    info;
-  ADM_assert (_state == enc_Pass1);
-  info = _in->getInfo ();
-  if (!_codec->init (_param.bitrate, info->fps1000, &encparam))
-    {
-      printf ("[xvid] Error init pass 1 mode\n");
-      return 0;
-    }
-  return 1;
-}
-
-int EncoderXvid4::getRequirements (void) { return ADM_ENC_REQ_NULL_FLUSH; }
-
-uint8_t EncoderXvid4::isDualPass (void)
-{
-  if ((_state == enc_Pass1) || (_state == enc_Pass2))
-    {
-      return 1;
-    }
-  return 0;
-
-}
-
-uint8_t EncoderXvid4::setLogFile (const char *lofile, uint32_t nbframe)
-{
-  strcpy (_logname, lofile);
-  _frametogo = nbframe;
-  _totalframe = nbframe;
-  return 1;
-
-}
-
-//______________________________
-uint8_t
-  EncoderXvid4::encode (uint32_t frame, ADMBitstream *out)
-{
-  uint32_t l, f;
-
-  ADM_assert (_codec);
-  ADM_assert (_in);
-
-  if (frame != UINT32_MAX)
-  {
-	  if (!_in->getFrameNumberNoAlloc (frame, &l, _vbuffer, &f))
-	  {
-		  printf ("[xvid] Error: Cannot read incoming frame!\n");
-		  return 0;
-	  }
-  }
-
-  switch (_state)
-    {
-    case enc_Same:
-	{
-		if (frame != UINT32_MAX)
-		{
-			out->flags = 0;
-
-			if (frame < (encparam.bframes + 1))
-			{
-				out->flags = AVI_KEY_FRAME;
-				printf ("[xvid] Forcing keyframe for B frame\n");
-			}
-
-			int q = _vbuffer->_Qp;
-
-			if (q < 2 || q > 31)
-			{
-				printf ("[xvid] Out of bound incoming q: %d\n", q);
-
-				if (q < 2)
-					q = 2;
-				if (q > 31)
-					q = 31;
-			}
-
-			out->in_quantizer = q;
-		}
-	}
-    case enc_CBR:
-    case enc_CQ:
-    case enc_Pass1:
-    case enc_Pass2:
-		return _codec->encode (frame == UINT32_MAX ? NULL : _vbuffer, out);
-      break;
-
-    default:
-      ADM_assert (0);
-    }
-
-  return 0;
-}
-
-//_______________________________
-uint8_t EncoderXvid4::stop (void)
-{
-  if (_codec)
-    delete
-      _codec;
-  _codec = NULL;
-
-
-  return 1;
-
-}
-extern uint32_t ADM_computeBitrate(uint32_t fps1000, uint32_t nbFrame, uint32_t sizeInMB);
-uint8_t EncoderXvid4::startPass2 (void)
-{
-  uint32_t     finalSize;
-  uint32_t         br;
-
-  ADM_assert (_state == enc_Pass1);
-  printf ("[xvid] Starting pass 2 (%d x %d)\n", _w, _h);
-
-  if(_param.mode==COMPRESS_2PASS)
-  {
-    
-    br=ADM_computeBitrate( _fps1000,_totalframe,_param.finalsize);
-    printf("[xvid] Final Size: %u MB, avg bitrate %u kb/s\n",_param.finalsize,br/1000);
-  }else if(_param.mode==COMPRESS_2PASS_BITRATE)
-  {
-    br=_param.avg_bitrate*1000;
-    printf("[xvid] 2 pass avg bitrate %u kb/s\n",br/1000);
-  }else ADM_assert(0);
-
-  _state = enc_Pass2;
-  // Delete codec and start new one
-  if (_codec)
-    {
-      delete
-	_codec;
-      _codec = NULL;
-    }
-
-  _codec = new xvid4EncoderPass2 (_w, _h);
-  strcpy (encparam.logName, _logname);
-  printf ("[xvid] Using %s as stat file, average bitrate %d kbps\n", _logname,	  br / 1000);
-  if (!_codec->init (br, _fps1000, &encparam))
-    {
-      printf ("[xvid] Error initializing pass1 mode\n");
-      return 0;
-    }
-  _frametogo = 0;
-  return 1;
-}
-
-#endif

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encXvid4.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encXvid4.h	2009-07-03 08:55:54 UTC (rev 4990)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encXvid4.h	2009-07-03 10:11:38 UTC (rev 4991)
@@ -1,69 +0,0 @@
-/***************************************************************************
-                          adm_encxvi4d.h  -  description
-                             -------------------
-			     structure for xvid api-4 encoder
-    begin                : Sun Jul 14 2002
-    copyright            : (C) 2002/2003 by mean
-    email                : fixounet at free.fr
- ***************************************************************************/
-
-/***************************************************************************
- *                                                                         *
- *   This program is free software; you can redistribute it and/or modify  *
- *   it under the terms of the GNU General Public License as published by  *
- *   the Free Software Foundation; either version 2 of the License, or     *
- *   (at your option) any later version.                                   *
- *                                                                         *
- ***************************************************************************/
-#ifndef __ADM_encoder_xvid4__
-#define __ADM_encoder_xvid4__
-#include "ADM_codecs/ADM_xvid4param.h"
-typedef struct XVID4config
-{
-  COMPRES_PARAMS generic;
-  xvid4EncParam specific;
-} XVID4config;
-
-
-class EncoderXvid4:public Encoder
-{
-
-protected:
-
-  xvid4Encoder * _codec;
-  xvid4EncParam encparam;
-
-
-  uint32_t _totalframe;
-  uint8_t _pass1Done;
-  uint32_t _fps1000;
-
-public:
-    EncoderXvid4 (COMPRES_PARAMS * codecconfig);
-   ~EncoderXvid4 ();		// can be called twice if needed ..
-  virtual int getRequirements (void);
-  virtual uint8_t isDualPass (void);
-  virtual uint8_t configure (AVDMGenericVideoStream * instream, int useExistingLogFile);
- 
-  virtual uint8_t encode (uint32_t frame, ADMBitstream *out);
-  virtual uint8_t setLogFile (const char *p, uint32_t fr);
-  virtual uint8_t stop (void);
-  virtual uint8_t startPass2 (void);
-  virtual uint8_t startPass1 (void);
-  virtual const char *getCodecName (void)
-  {
-    return "XVID";
-  }
-  virtual const char *getFCCHandler (void)
-  {
-    return "xvid";
-  }
-  virtual const char *getDisplayName (void)
-  {
-    return QT_TR_NOOP("Xvid4");
-  }
-
-};
-
-
-#endif

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encoder.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encoder.cpp	2009-07-03 08:55:54 UTC (rev 4990)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encoder.cpp	2009-07-03 10:11:38 UTC (rev 4991)
@@ -41,19 +41,6 @@
 
 #endif
 
-#ifdef USE_XX_XVID
-#include "ADM_codecs/ADM_xvid.h"
-#include "ADM_encoder/adm_encxvid.h"
-
-#endif
-#ifdef USE_XVID_4
-#include "ADM_codecs/ADM_xvid4.h"
-#include "ADM_codecs/ADM_xvid4param.h"
-#include "ADM_encoder/adm_encXvid4.h"
-
-#endif
-
-
 #ifdef USE_FFMPEG
 #include "ADM_codecs/ADM_ffmpeg.h"
 #include "ADM_encoder/adm_encffmpeg.h"
@@ -100,16 +87,6 @@
   printf ("MJPEG encoder registered\n");
 #endif
 
-#ifdef USE_XX_XVID
-    nb_encoder++;
-    printf ("Xvid encoder registered\n");
-#endif
-
-#ifdef USE_XVID_4
-    nb_encoder++;
-    printf ("Xvid-4 encoder registered\n");
-#endif
-
 #ifdef USE_FFMPEG
   nb_encoder++;
   printf ("FFmpeg encoder registered\n");

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encxvid.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encxvid.cpp	2009-07-03 08:55:54 UTC (rev 4990)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encxvid.cpp	2009-07-03 10:11:38 UTC (rev 4991)
@@ -1,429 +0,0 @@
-/***************************************************************************
-                          adm_encxvid.cpp  -  description
-                             -------------------
-    begin                : Sun Jul 14 2002
-    copyright            : (C) 2002 by mean
-    email                : fixounet at free.fr
- ***************************************************************************/
-
-/***************************************************************************
- *                                                                         *
- *   This program is free software; you can redistribute it and/or modify  *
- *   it under the terms of the GNU General Public License as published by  *
- *   the Free Software Foundation; either version 2 of the License, or     *
- *   (at your option) any later version.                                   *
- *                                                                         *
- ***************************************************************************/
-
-#include <stdio.h>
-#include <stdlib.h>
-#include <math.h>
-#include <unistd.h>
-
-#include <time.h>
-#include <sys/time.h>
-#include "config.h"
-#ifdef USE_XX_XVID
-#include "xvid.h"
-
-#include "fourcc.h"
-#include "avi_vars.h"
-#include "ADM_toolkit/toolkit.hxx"
-
-#include "ADM_encoder/ADM_vidEncode.hxx"
-
-#include "ADM_video/ADM_genvideo.hxx"
-#include "ADM_codecs/ADM_xvid.h"
-#include "ADM_encoder/adm_encoder.h"
-#include "ADM_encoder/adm_encxvid.h"
-#include "ADM_assert.h"
-extern "C"
-{
-#include "ADM_encoder/xvid_vbr.h"
-};
-#include "ADM_gui/GUI_xvidparam.h"
-
-static vbr_control_t vbrstate;
-#define aprintf printf
-//static char *XvidInternal2pass_statfile=(const char *)"/tmp/xvid_int2pass.txt";
-
-#define USE_XVID_2PASS 1
-
-/*_________________________________________________*/
-EncoderXvid::EncoderXvid (XVIDconfig * codecconfig)
-{
-
-  _codec = NULL;
-  fd = NULL;
-  //entries = NULL;       
-  strcpy (_logname, "");
-  _frametogo = 0;
-  _pass1Done = 0;
-  memset (&encparam, 0, sizeof (encparam));
-  memset (&vbrstate, 0, sizeof (vbrstate));
-  // codecconfig is of type XvidCodecConfig
-  memcpy (&_param, &(codecconfig->generic), sizeof (_param));
-  memcpy (&encparam, &(codecconfig->specific), sizeof (encparam));
-//  _logFile=codecconfig->specific.logName;//XvidInternal2pass_statfile;
-
-};
-//--------------------------------
-uint8_t EncoderXvid::configure (AVDMGenericVideoStream * instream, int useExistingLogFile)
-{
-  ADM_assert (instream);
-  ADV_Info *
-    info;
-
-  //uint32_t flag1,flag2,flag3;
-
-  info = instream->getInfo ();
-  _w = info->width;
-  _h = info->height;
-  printf ("Configuting xvif encoder (%dx%d)\n", _w, _h);
-  _vbuffer = new ADMImage (_w, _h);
-  ADM_assert (_vbuffer);
-  _in = instream;
-
-
-
-  switch (_param.mode)
-    {
-    case COMPRESS_CQ:
-      printf ("\n Xvid cq mode: %ld", _param.qz);
-      _state = enc_CQ;
-      _codec = new xvidEncoderCQ (_w, _h);
-      encparam.lumi = 0;
-      _codec->initExtented (_param.qz, &encparam);
-      break;
-    case COMPRESS_CBR:
-      printf ("\n Xvid cbr mode: %lu", _param.bitrate);
-      _state = enc_CBR;
-      encparam.lumi = 0;
-      _codec = new xvidEncoderCBR (_w, _h);
-      _codec->initExtented (_param.bitrate, &encparam);	//qz,bitrate,finalsize;
-      break;
-    case COMPRESS_2PASS:
-
-      // initialize Xvid internal 2 pass mode
-
-      if (0 > vbrSetDefaults (&vbrstate))
-	return 0;
-      vbrstate.fps = info->fps1000 / 1000.;
-      // our stuff
-
-
-      printf ("\n Xvid dual size: %lu", _param.finalsize);
-      _state = enc_Pass1;
-      _codec = new xvidEncoderCQ (_w, _h);
-      _codec->initExtented (2, &encparam);
-
-      break;
-    default:
-      ADM_assert (0);
-
-    }
-  _in = instream;
-  printf ("\n Xvid Encoder , w: %lu h:%lu mode:%d", _w, _h, _state);
-  return 1;
-
-}
-
-
-
-uint8_t EncoderXvid::startPass1 (void)
-{
-  ADM_assert (_state == enc_Pass1);
-  _frametogo = 0;
-  printf ("\n Starting pass 1\n");
-  printf (" Creating logfile :%s\n", _logname);
-  _pass1Done = 1;
-
-  vbrstate.mode = VBR_MODE_2PASS_1;
-  vbrstate.desired_size = _param.finalsize * 1024 * 1024;
-  vbrstate.debug = 0;
-  vbrstate.filename = _logname;	//XvidInternal2pass_statfile;
-
-
-  setAdvancedOptions ();
-
-  if (0 > vbrInit (&vbrstate))
-    return 0;
-  fd = fopen (_logname, "wt");
-  if (!fd)
-    {
-      printf ("\n cannot create logfile !\n");
-      return 0;
-    }
-  return 1;
-}
-
-
-
-uint8_t EncoderXvid::isDualPass (void)
-{
-  if ((_state == enc_Pass1) || (_state == enc_Pass2))
-    {
-      return 1;
-    }
-  return 0;
-
-}
-
-uint8_t EncoderXvid::setLogFile (const char *lofile, uint32_t nbframe)
-{
-  strcpy (_logname, lofile);
-  _frametogo = nbframe;
-  _totalframe = nbframe;
-  return 1;
-
-}
-
-//______________________________
-uint8_t
-  EncoderXvid::encode (uint32_t frame, uint32_t * len, uint8_t * out,
-		       uint32_t * flags)
-{
-  uint32_t l, f;
-  //ENC_RESULT enc;
-
-  ADM_assert (_codec);
-  ADM_assert (_in);
-
-  if (!_in->getFrameNumberNoAlloc (frame, &l, _vbuffer, &f))
-    {
-      printf ("\n Error : Cannot read incoming frame !");
-      return 0;
-    }
-
-  switch (_state)
-    {
-    case enc_CBR:
-    case enc_CQ:
-      return _codec->encode (_vbuffer, out, len, flags);
-      break;
-    case enc_Pass1:
-
-
-      ADM_assert (fd);
-      if (!_codec->encode (_vbuffer, out, len, flags))
-	{
-	  printf ("\n codec error on 1st pass !");
-	  return 0;
-	}
-      myENC_RESULT enc;
-      // Grab result
-      _codec->getResult ((void *) &enc);
-
-      fprintf (fd,
-	       "Frame %ld: intra %d, quant %d, texture %d, motion %d, total %d\n",
-	       frame, enc.is_key_frame, enc.quantizer, enc.texture_bits,
-	       enc.motion_bits, enc.total_bits);
-
-      updateStats (*len);
-      _frametogo++;
-      return 1;
-      break;
-    case enc_Pass2:
-
-      uint16_t nq;
-      uint8_t nf;
-
-      nq = vbrGetQuant (&vbrstate);
-      nf = vbrGetIntra (&vbrstate);
-      //aprintf("Key : %d\n",nf);
-
-      // Encode it !
-      *flags = (nq << 8) + nf;	// ugly but help to keep interface
-      if (!_codec->encode (_vbuffer, out, len, flags))
-	return 0;
-      updateStats (*len);
-      old_bits = enc.total_bits;
-      return 1;
-      break;
-      break;
-    default:
-      ADM_assert (0);
-    }
-  return 0;
-}
-
-//_______________________________
-uint8_t EncoderXvid::stop (void)
-{
-  if (_codec)
-    delete
-      _codec;
-  _codec = NULL;
-  if (_state == enc_Pass1 || _state == enc_Pass2)
-    {
-      if (_state == enc_Pass1 && _pass1Done)
-	vbrFinish (&vbrstate);
-      _state = enc_Invalid;
-    }
-
-  return 1;
-
-}
-
-uint8_t EncoderXvid::startPass2 (void)
-{
-
-  ADM_assert (_state == enc_Pass1);
-  printf ("\n Starting pass 2\n");
-
-  // update xvid internal 2 pass engine
-  if (_pass1Done)
-    {
-      vbrFinish (&vbrstate);	// ???
-      if (fd)
-	{
-	  fclose (fd);
-	  fd = NULL;
-	}
-    }
-  encparam.lumi = 0;		// we reset it after first pass                    
-  // switch to pass 2
-  vbrstate.mode = VBR_MODE_2PASS_2;
-  vbrstate.desired_size = _param.finalsize * 1024 * 1024;
-
-  float
-    br;
-
-  br = vbrstate.desired_size * 8;
-  br = br / _totalframe;	// bit / frame
-  br = br * vbrstate.fps;
-
-  vbrstate.desired_bitrate = (int) floor (br);
-  vbrstate.debug = 0;
-  vbrstate.filename = _logname;	//XvidInternal2pass_statfile;
-  setAdvancedOptions ();
-
-  vbrInit (&vbrstate);
-
-  printf ("\n start 2 extra paramaters\n");
-
-  // now read and compute
-  _frametogo = _totalframe;
-/*  if (!computeParameters ())
-    return 0;
-*/
-  printf ("\n VBR paramaters computed\n");
-  _state = enc_Pass2;
-  old_bits = 0;
-  // Delete codec and start new one
-  if (_codec)
-    {
-      delete _codec;
-      _codec = NULL;
-    }
-  _codec = new xvidEncoderVBR (_w, _h);
-  printf ("\n ready to encode in 2pass\n");
-  _codec->initExtented (2, &encparam);
-  _frametogo = 0;
-  return 1;
-
-}
-
-EncoderXvid::~EncoderXvid ()
-{
-  stop ();
-
-};
-	 // can be called twice if needed ..
-uint8_t
-EncoderXvid::updateStats (uint32_t len)
-{
-
-  myENC_RESULT enc;
-  XVID_ENC_STATS *stat;
-  // Update bits
-  _codec->getResult (&enc);
-
-  // update Xvid                                                                                                                  
-  stat = (XVID_ENC_STATS *) _codec->getXvidStat ();
-  vbrUpdate (&vbrstate,
-	     stat->quant,
-	     enc.is_key_frame,
-	     stat->hlength, len, stat->kblks, stat->mblks, stat->ublks);
-
-  return 1;
-}
-/*
-  	Set Xvid 2 pass advanced options
-    __________________________________
-*/
-void
-EncoderXvid::setAdvancedOptions (void)
-{
-
-  // disable cred
-  //***************************
-  //***************************
-  //***************************          
-  //encparam.cred_rate=0;
-  //***************************
-  //***************************
-  //***************************
-
-  vbrstate.min_iquant = encparam.imin;
-  vbrstate.max_iquant = encparam.imax;
-  vbrstate.min_pquant = encparam.pmin;
-  vbrstate.max_pquant = encparam.pmax;
-  vbrstate.keyframe_boost = encparam.kfboost;
-
-  printf (" I : %d/%d P : %d/%d\n",
-	  vbrstate.min_iquant,
-	  vbrstate.max_iquant, vbrstate.min_pquant, vbrstate.max_pquant);
-
-  // allow specific credit handling 
-  if (encparam.cred_rate)
-    {
-      if (encparam.startcred_end)
-	{
-	  vbrstate.credits_start_begin = encparam.startcred_start;
-	  vbrstate.credits_start_end = encparam.startcred_end;
-
-	  vbrstate.credits_quant_ratio = encparam.cred_rate;
-
-	  vbrstate.credits_mode = VBR_CREDITS_MODE_RATE;
-	  printf ("\n Start credit activated : From %d to %d rate %d\n",
-		  encparam.startcred_start,
-		  encparam.startcred_end, encparam.cred_rate);
-	  vbrstate.credits_start = 1;
-	}
-
-      if (encparam.endcred_end)
-	{
-	  vbrstate.credits_end_begin = encparam.endcred_start;
-	  vbrstate.credits_end_end = encparam.endcred_end;
-
-	  vbrstate.credits_quant_ratio = encparam.cred_rate;
-
-	  vbrstate.credits_mode = VBR_CREDITS_MODE_RATE;
-	  printf ("\n End credit activated : From %d to %d rate %d\n",
-		  encparam.endcred_start,
-		  encparam.endcred_end, encparam.cred_rate);
-	  vbrstate.credits_end = 1;
-
-	}
-    }
-
-#define SETIDEM(x) {vbrstate.x=encparam.x; printf( #x": %d\n",vbrstate.x);}
-  SETIDEM (min_key_interval);
-  SETIDEM (bitrate_payback_delay);
-  SETIDEM (curve_compression_high);
-  SETIDEM (curve_compression_low);
-  SETIDEM (use_alt_curve);
-  SETIDEM (alt_curve_low_dist);
-  SETIDEM (alt_curve_high_dist);
-  SETIDEM (alt_curve_auto_str);
-  SETIDEM (alt_curve_type);
-  SETIDEM (bitrate_payback_method);
-#undef SETIDEM
-  vbrstate.alt_curve_use_auto = 1;
-  vbrstate.alt_curve_use_auto_bonus_bias = 1;
-  vbrstate.alt_curve_bonus_bias = 50;
-
-
-}
-#endif

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encxvid.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encxvid.h	2009-07-03 08:55:54 UTC (rev 4990)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encxvid.h	2009-07-03 10:11:38 UTC (rev 4991)
@@ -1,66 +0,0 @@
-/***************************************************************************
-                          adm_encxvid.h  -  description
-                             -------------------
-    begin                : Sun Jul 14 2002
-    copyright            : (C) 2002 by mean
-    email                : fixounet at free.fr
- ***************************************************************************/
-
-/***************************************************************************
- *                                                                         *
- *   This program is free software; you can redistribute it and/or modify  *
- *   it under the terms of the GNU General Public License as published by  *
- *   the Free Software Foundation; either version 2 of the License, or     *
- *   (at your option) any later version.                                   *
- *                                                                         *
- ***************************************************************************/
-#ifndef __ADM_encoder_xvid__
-#define __ADM_encoder_xvid__
-
-typedef struct XVIDconfig
-{
-  COMPRES_PARAMS generic;
-  xvidEncParam specific;
-} XVIDconfig;
-
-
-class EncoderXvid:public Encoder
-{
-
-protected:
-
-  xvidEncoder * _codec;
-  xvidEncParam encparam;
-  uint8_t updateStats (uint32_t len);
-  void setAdvancedOptions (void);
-  uint32_t _totalframe;
-  uint8_t _pass1Done;
-//  char                                        *_logFile;
-
-public:
-    EncoderXvid (XVIDconfig * codecconfig);
-   ~EncoderXvid ();		// can be called twice if needed ..
-  virtual uint8_t isDualPass (void);
-  virtual uint8_t configure (AVDMGenericVideoStream * instream, int useExistingLogFile);
-  virtual uint8_t encode (uint32_t frame, uint32_t * len, uint8_t * out,
-			  uint32_t * flags);
-  virtual uint8_t setLogFile (const char *p, uint32_t fr);
-  virtual uint8_t stop (void);
-  virtual uint8_t startPass2 (void);
-  virtual uint8_t startPass1 (void);
-  virtual const char *getCodecName (void)
-  {
-    return "XVID";
-  }
-  virtual const char *getFCCHandler (void)
-  {
-    return "xvid";
-  }
-  virtual const char *getDisplayName (void)
-  {
-    return QT_TR_NOOP("Xvid");
-  }
-};
-
-
-#endif

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/xvid_vbr.c
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/xvid_vbr.c	2009-07-03 08:55:54 UTC (rev 4990)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/xvid_vbr.c	2009-07-03 10:11:38 UTC (rev 4991)
@@ -1,2173 +0,0 @@
-/******************************************************************************
- *
- *   XviD VBR Library
- *   
- *   Copyright (C) 2002 Edouard Gomez <ed.gomez at wanadoo.fr>
- *
- *   The curve treatment algorithm is based on work done by Foxer <email?> and
- *   Dirk Knop <dknop at gwdg.de> for the XviD vfw dynamic library.
- *
- *  This program is free software; you can redistribute it and/or modify
- *  it under the terms of the GNU General Public License as published by
- *  the Free Software Foundation; either version 2 of the License, or
- *  (at your option) any later version.
- *
- *  This program is distributed in the hope that it will be useful,
- *  but WITHOUT ANY WARRANTY; without even the implied warranty of
- *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
- *  GNU General Public License for more details.
- *
- *  You should have received a copy of the GNU General Public License
- *  along with this program; if not, write to the Free Software
- *  Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA
- *
- *****************************************************************************/
-
-/* Standard Headers */
-#include <stdio.h>
-#include <string.h>
-#include <fcntl.h>
-#include <stdlib.h>
-#include <math.h>
-#include "ADM_assert.h"
-
-#include "config.h"
-/* Local headers */
-#include "xvid_vbr.h"
-
-/******************************************************************************
- * Build time constants
- *****************************************************************************/
-
-/*
- * Portability note
- * Perhaps the msvc headers define Pi with another constant name
- */
-#define DEG2RAD (M_PI / 180.0)
-
-/* Defaults settings will be computed with the help of these constants */
-#define DEFAULT_DESIRED_SIZE    700
-#define DEFAULT_AUDIO_BITRATE   128
-#define DEFAULT_MOVIE_LENGTH      2
-#define DEFAULT_TWOPASS_BOOST  1000
-#define DEFAULT_FPS           25.0f
-#define DEFAULT_CREDITS_SIZE      0
-
-#define DEFAULT_XVID_DBG_FILE   "xvid.dbg"
-#define DEFAULT_XVID_STATS_FILE "xvid.stats"
-
-#define aprintf printf
-/*#include "ADM_osSupport/ADM_debugID.h"
-#define MODULE_NAME 0
-#include "ADM_osSupport/ADM_debug.h"*/
-/******************************************************************************
- * Local prototypes
- *****************************************************************************/
-
-/* Sub vbrInit cases functions */
-static vbr_init_function vbr_init_dummy;
-static vbr_init_function vbr_init_2pass1;
-static vbr_init_function vbr_init_2pass2;
-static vbr_init_function vbr_init_fixedquant;
-
-/* Sub vbrGetQuant cases functions */
-static vbr_get_quant_function vbr_getquant_1pass;
-static vbr_get_quant_function vbr_getquant_2pass1;
-static vbr_get_quant_function vbr_getquant_2pass2;
-static vbr_get_quant_function vbr_getquant_fixedquant;
-
-/* Sub vbrGetIntra cases functions */
-static vbr_get_intra_function vbr_getintra_1pass;
-static vbr_get_intra_function vbr_getintra_2pass1;
-static vbr_get_intra_function vbr_getintra_2pass2;
-static vbr_get_intra_function vbr_getintra_fixedquant;
-
-/* Sub vbrUpdate prototypes */
-static vbr_update_function vbr_update_dummy;
-static vbr_update_function vbr_update_2pass1;
-static vbr_update_function vbr_update_2pass2;
-
-/* Sub vbrFinish cases functions */
-static vbr_finish_function vbr_finish_dummy;
-static vbr_finish_function vbr_finish_2pass1;
-static vbr_finish_function vbr_finish_2pass2;
-
-/*------------MEANX------------------*/
-/*
-	This table gives more strength to I frame
-	The average I frame should be around 10
-
-
-*/
-static int vbr_predict(vbr_control_t *state,int original_size,int qp);
-static float vbr_get_comp(int oldbits, int qporg, int newbits, int qpused);
-static int  vbr_make_variance(vbr_control_t *state, float compression,  int *variance,int *bitrate);
-static int vbr_getstuff(vbr_control_t *state, int dbytes,double diff);
-static int  vbr_make_clipping(vbr_control_t *state, float compression);
-static const int quant_I_modifier[32]=
-{
-	2,	2,	2,	3,	//00--33
-	4,	5,	6,	6,	//4--7
-	7, 	7, 	8,	8,   	//8--11
-	9,	9, 	10,	10, 	//12--15
-	11,	12, 	12,	13,	//16--19
-	13,	14, 	14,	14,	//20--23
-	15,	15,	15, 	16,	//24--27
-	16,	16,	17,	17  //28--31
-};
-/*
-	That one gives less to B frame
-*/
-static const int quant_B_modifier[32]=
-{
-	3,	3,	3,	3,	//00--33
-	5,	6,	8,	9,	//4--7
-	10, 	11, 	12,	13,   	//8--11
-	14,	16, 	17,	18, 	//12--15
-	20,	21, 	23,	24,	//16--19
-	25,	26, 	28,	29,	//20--23
-	30,	30,	31, 	31,	//24--27
-	31,	31,	31,	31  //28--31
-};
-
-/*------------MEANX------------------*/
-
-/* Is the encoder in the credits */
-#define FRAME_TYPE_NORMAL_MOVIE     0x00
-#define FRAME_TYPE_STARTING_CREDITS 0x01
-#define FRAME_TYPE_ENDING_CREDITS   0x02
-
-/******************************************************************************
- * Inline utility functions
- *****************************************************************************/
-
-static __inline int util_frametype(vbr_control_t *state)
-{
-
-	if(state->credits_start) {
-
-		if(state->cur_frame >= state->credits_start_begin &&
-		   state->cur_frame < state->credits_start_end)
-			return(FRAME_TYPE_STARTING_CREDITS);
-
-	}
-
-	if(state->credits_end) {
-
-		if(state->cur_frame >= state->credits_end_begin &&
-		   state->cur_frame < state->credits_end_end)
-			return(FRAME_TYPE_STARTING_CREDITS);
-
-	}
-
-	return(FRAME_TYPE_NORMAL_MOVIE);
-
-
-}
-
-static __inline int util_creditsframes(vbr_control_t *state)
-{
-
-	int frames = 0;
-
-	if(state->credits_start)
-		frames += state->credits_start_end - state->credits_start_begin;
-	if(state->credits_end)
-		frames += state->credits_end_end - state->credits_end_begin;
-
-	return(frames);
-
-}
-
-/******************************************************************************
- * Functions
- *****************************************************************************/
-
-/*****************************************************************************
- * Function description :
- *
- * This function initialiazes the vbr_control_t with safe defaults for all
- * modes.
- *
- * Return Values :
- *   = 0
- ****************************************************************************/
-
-int vbrSetDefaults(vbr_control_t *state)
-{
-
-	/* Set all the structure to zero */
-	memset(state, 0, sizeof(state));
-
-	/* Default mode is CBR */
-	state->mode = VBR_MODE_1PASS;
-
-	/* Default statistic filename */
-	state->filename = DEFAULT_XVID_STATS_FILE;
-
-	/*
-	 * Default is a 2hour movie on 700Mo CD-ROM + 128kbit sound track
-	 * This represents a target bitrate of 687kbit/s
-	 */
-	state->desired_size = DEFAULT_DESIRED_SIZE*1024*1024 -
-		DEFAULT_MOVIE_LENGTH*3600*DEFAULT_AUDIO_BITRATE*1000/8;
-	state->desired_bitrate = state->desired_size*8/(DEFAULT_MOVIE_LENGTH*3600);
-
-	/* Credits */
-	state->credits_mode = VBR_CREDITS_MODE_RATE;
-	state->credits_start = 0;
-	state->credits_start_begin = 0;
-	state->credits_start_end = 0;
-	state->credits_end = 0;
-	state->credits_end_begin = 0;
-	state->credits_end_end = 0;
-	state->credits_quant_ratio = 20;
-	state->credits_fixed_quant = 20;
-	state->credits_quant_i = 20;
-	state->credits_quant_p = 20;
-	state->credits_start_size = DEFAULT_CREDITS_SIZE*1024*1024;
-	state->credits_end_size = DEFAULT_CREDITS_SIZE*1024*1024;
-
-	/* Keyframe boost */
-	state->keyframe_boost = 0;
-	state->kftreshold = 10;
-	state->kfreduction = 30;
-	state->min_key_interval = 1;
-	state->max_key_interval = (int)DEFAULT_FPS*10;
-
-	/* Normal curve treatment */
-	state->curve_compression_high = 25;
-	state->curve_compression_low = 10;
-
-	/* Alt curve */
-	state->use_alt_curve = 1;
-	state->alt_curve_type = VBR_ALT_CURVE_LINEAR;
-	state->alt_curve_low_dist = 90;
-	state->alt_curve_high_dist = 500;
-	state->alt_curve_min_rel_qual = 50;
-	state->alt_curve_use_auto = 1;
-	state->alt_curve_auto_str = 30;
-	state->alt_curve_use_auto_bonus_bias = 1;
-	state->alt_curve_bonus_bias = 50;
-	state->bitrate_payback_method = VBR_PAYBACK_BIAS;
-	state->bitrate_payback_delay = 250;
-	state->twopass_max_bitrate = DEFAULT_TWOPASS_BOOST*state->desired_bitrate;
-	state->twopass_max_overflow_improvement = 60;
-	state->twopass_max_overflow_degradation = 60;
-	state->max_iquant = 31;
-	state->min_iquant = 2;
-	state->max_pquant = 31;
-	state->min_pquant = 2;
-	state->fixed_quant = 3;
-
-	state->max_framesize = (1.0/(float)DEFAULT_FPS) * state->twopass_max_bitrate / 8;
-
-	state->fps = (float)DEFAULT_FPS;
-
-	state->maxAllowedBitrate=0;
-
-	return(0);
-
-}
-
-/*****************************************************************************
- * Function description :
- *
- * This function initialiaze the vbr_control_t state passed in parameter.
- *
- * The initialization depends on state->mode, there are 4 modes allowed.
- * Each mode description is done in the README file shipped with the lib.
- *
- * Return values :
- *
- *    =  0 on success
- *    = -1 on error
- *****************************************************************************/
-
-int vbrInit(vbr_control_t *state)
-{
-
-	if(state == NULL) return(-1);
-
-	/* Function pointers safe initialization */
-	state->init     = NULL;
-	state->getquant = NULL;
-	state->getintra = NULL;
-	state->update   = NULL;
-	state->finish   = NULL;
-
-// MeanX
-	state->roundup=(int)floor(state->fps+0.99);
-
-	state->size   = NULL;
-	state->kf   = NULL;
-	state->type   = NULL;
-	printf("\n Roundup : %d\n",state->roundup);
-// MeanX
-	if(state->debug) {
-
-		state->debug_file = fopen(DEFAULT_XVID_DBG_FILE, "w+");
-
-		if(state->debug_file == NULL)
-			return(-1);
-
-		fprintf(state->debug_file, "# XviD Debug output\n");
-		fprintf(state->debug_file, "# quant | intra | header bytes"
-			"| total bytes | kblocks | mblocks | ublocks"
-			"| vbr overflow | vbr kf overflow"
-			"| vbr kf partial overflow\n\n");
-	}
-
-	/* Function pointers sub case initialization */
-	switch(state->mode) {
-	case VBR_MODE_1PASS:
-		state->init     = vbr_init_dummy;
-		state->getquant = vbr_getquant_1pass;
-		state->getintra = vbr_getintra_1pass;
-		state->update   = vbr_update_dummy;
-		state->finish   = vbr_finish_dummy;
-		break;
-	case VBR_MODE_2PASS_1:
-		state->init     = vbr_init_2pass1;
-		state->getquant = vbr_getquant_2pass1;
-		state->getintra = vbr_getintra_2pass1;
-		state->update   = vbr_update_2pass1;
-		state->finish   = vbr_finish_2pass1;
-		break;
-	case VBR_MODE_FIXED_QUANT:
-		state->init     = vbr_init_fixedquant;
-		state->getquant = vbr_getquant_fixedquant;
-		state->getintra = vbr_getintra_fixedquant;
-		state->update   = vbr_update_dummy;
-		state->finish   = vbr_finish_dummy;
-		break;
-	case VBR_MODE_2PASS_2:
-		state->init     = vbr_init_2pass2;
-		state->getintra = vbr_getintra_2pass2;
-		state->getquant = vbr_getquant_2pass2;
-		state->update   = vbr_update_2pass2;
-		state->finish   = vbr_finish_2pass2;
-		break;
-	default:
-		return(-1);
-	}
-	
-	return(state->init(state));
-
-}
-
-/******************************************************************************
- * Function description :
- *
- * This function returns an adapted quantizer according to the current vbr
- * controler state
- *
- * Return values :
- *  the quantizer value (0 <= value <= 31)
- *  (0 is a special case, means : let XviD decide)
- *
- *****************************************************************************/
-
-int vbrGetQuant(vbr_control_t *state)
-{
-
-	/* Returns Zero, so XviD decides alone */
-	if(state == NULL || state->getquant == NULL) return(0);
-
-	return(state->getquant(state));
-
-}
-
-/******************************************************************************
- * Function description :
- *
- * This function returns the type of the frame to be encoded next (I or P/B)
- *
- * Return values :
- *  = -1 let the XviD encoder decide wether or not the next frame is I
- *  =  0 no I frame
- *  =  1 force keyframe
- *
- *****************************************************************************/
-
-int vbrGetIntra(vbr_control_t *state)
-{
-
-	/* Returns -1, means let XviD decide */
-	if(state == NULL || state->getintra == NULL) return(-1);
-
-	return(state->getintra(state));
-
-}
-
-/******************************************************************************
- * Function description :
- *
- * This function updates the vbr control state according to collected statistics
- * from XviD core
- *
- * Return values :
- *
- *    =  0 on success
- *    = -1 on error
- *****************************************************************************/
-
-int vbrUpdate(vbr_control_t *state,
-	      int quant,
-	      int intra,
-	      int header_bytes,
-	      int total_bytes,
-	      int kblocks,
-	      int mblocks,
-	      int ublocks)
-{
-
-	if(state == NULL || state->update == NULL) return(-1);
-
-	if(state->debug && state->debug_file != NULL) {
-		int idx;
-
-		fprintf(state->debug_file, "%d %d %d %d %d %d %d %d %d %d\n",
-			quant, intra, header_bytes, total_bytes, kblocks,
-			mblocks, ublocks, state->overflow, state->KFoverflow,
-			state->KFoverflow_partial);
-
-		idx = quant;
-
-		if(quant < 1)
-			idx = 1;
-		if(quant > 31)
-			idx = 31;
-
-		idx--;
-
-		state->debug_quant_count[idx]++;
-
-	}
-
-	return(state->update(state, quant, intra, header_bytes, total_bytes,
-			     kblocks, mblocks, ublocks));
-
-}
-
-/******************************************************************************
- * Function description :
- *
- * This function stops the vbr controller
- *
- * Return values :
- *
- *    =  0 on success
- *    = -1 on error
- *****************************************************************************/
-
-int vbrFinish(vbr_control_t *state)
-{
-
-	if(state == NULL || state->finish == NULL) return(-1);
-
-	if(state->debug && state->debug_file != NULL) {
-
-		int i;
-
-		fprintf(state->debug_file, "\n\n");
-
-		for(i=0; i<79; i++)
-			fprintf(state->debug_file, "#");
-
-		fprintf(state->debug_file, "\n# Quantizer distribution :\n\n");
-
-		for(i=0;i<32; i++) {
-
-			fprintf(state->debug_file, "# quant %d : %d\n",
-				i+1,
-				state->debug_quant_count[i]);
-
-		}
-
-		fclose(state->debug_file);
-
-	}
-
-	return(state->finish(state));
-
-}
-
-/******************************************************************************
- * Dummy functions - Used when a mode does not need such a function
- *****************************************************************************/
-
-static int vbr_init_dummy(void *sstate)
-{
-
-	vbr_control_t *state = sstate;
-
-	state->cur_frame = 0;
-
-	return(0);
-
-}
-
-static int vbr_update_dummy(void *state,
-			    int quant,
-			    int intra,
-			    int header_bytes,
-			    int total_bytes,
-			    int kblocks,
-			    int mblocks,
-			    int ublocks)
-{
-	quant=intra+header_bytes+total_bytes+kblocks+mblocks+ublocks; // MEANX : No warning
-	((vbr_control_t*)state)->cur_frame++;
-
-	return(0);
-
-}
-
-static int vbr_finish_dummy(void *state)
-{
-	if(state)
-	{
-
-	}
-	return(0);
-
-}
-
-/******************************************************************************
- * 1 pass mode - XviD will do its job alone.
- *****************************************************************************/
-
-static int vbr_getquant_1pass(void *state)
-{
-if(state)
-	{
-
-	}
-
-	return(0);
-
-}
-
-static int vbr_getintra_1pass(void *state)
-{
-if(state)
-	{
-
-	}
-	return(-1);
-
-}
-
-/******************************************************************************
- * 2 pass mode - first pass functions
- *****************************************************************************/
-
-static int vbr_init_2pass1(void *sstate)
-{
-
-	FILE *f;
-	vbr_control_t *state = sstate;
-
-	/* Check the filename */
-	if(state->filename == NULL || state->filename[0] == '\0')
-		return(-1);
-
-	printf("XvidVBR: initialized with file :%s, pass 1\n",state->filename);
-	/* Initialize safe defaults for 2pass 1 */ 
-	state->pass1_file = NULL;
-	state->nb_frames = 0;
-	state->nb_keyframes = 0;
-	state->cur_frame = 0;
-
-	/* Open the 1st pass file */
-	if((f = fopen(state->filename, "w+")) == NULL)
-		return(-1);
-
-	/*
-	 * The File Header
-	 *
-	 * The extra white spaces will be used during the vbrFinish to write
-	 * the resulting number of frames and keyframes (10 spaces == maximum
-	 * string length of an int on 32bit machines, i don't think anyone is
-	 * encoding more than 4 billion frames :-)
-	 */
-	fprintf(f, "# ASCII XviD vbr stat file version %d\n#\n", VBR_VERSION);
-	fprintf(f, "# frames    :           \n");
-	fprintf(f, "# keyframes :           \n");
-	fprintf(f, "#\n# quant | intra | header bytes | total bytes | kblocks |"
-		" mblocks | ublocks\n\n");
-
-	/* Save file pointer */
-	state->pass1_file   = f;
-
-	return(0);
-
-}
-
-static int vbr_getquant_2pass1(void *state)
-{
-
-if(state)
-{
-}
-	return(2);
-
-}
-
-static int vbr_getintra_2pass1(void *state)
-{
-if(state)
-{
-}
-
-	return(-1);
-
-}
-
-static int vbr_update_2pass1(void *sstate,
-			     int quant,
-			     int intra,
-			     int header_bytes,
-			     int total_bytes,
-			     int kblocks,
-			     int mblocks,
-			     int ublocks)
-			     
-
-{
-
-	vbr_control_t *state = sstate;
-
-	if(state->pass1_file == NULL)
-		return(-1);
-
-	/* Writes the resulting statistics */
-	fprintf(state->pass1_file, "%d %d %d %d %d %d %d\n",
-		quant,
-		intra,
-		header_bytes,
-		total_bytes,
-		kblocks,
-		mblocks,
-		ublocks);
-
-	/* Update vbr control state */
-	if(intra) state->nb_keyframes++;
-	state->nb_frames++;
-	state->cur_frame++;
-
-	return(0);
-	
-}
-
-static int vbr_finish_2pass1(void *sstate)
-{
-
-	int c, i;
-	vbr_control_t *state = sstate;
-
-	if(state->pass1_file == NULL)
-		return(-1);
-
-	/* Goto to the file beginning */
-	fseek(state->pass1_file, 0, SEEK_SET);
-
-	/* Skip the version line  and the empty line */
-	c = i = 0;
-	do {
-		c = fgetc(state->pass1_file);
-
-		if(c == EOF) return(-1);
-		if(c == '\n') i++;
-
-	}while(i < 2);
-
-	fseek(state->pass1_file,0,SEEK_CUR);	// Needed for win32/Mingw
-	
-	/* Overwrite the frame field - safe as we have written extra spaces */
-	fprintf(state->pass1_file, "# frames    : %.10d\n", state->nb_frames);
-
-	/* Overwrite the keyframe field */
-	fprintf(state->pass1_file, "# keyframes : %.10d\n",
-		state->nb_keyframes);
-
-	/* Close the file */
-	if(fclose(state->pass1_file) != 0)
-		return(-1);
-
-	return(0);
-
-}
-
-/******************************************************************************
- * 2 pass mode - 2nd pass functions (Need to be finished)
- *****************************************************************************/
-
-static int vbr_init_2pass2(void *sstate)
-{
-
-	FILE *f;
-	int c, n, pos_firstframe, credits_frames;
-	long long credits1_bytes;
-	long long credits2_bytes;
-	long long desired;
-	long long total_bytes;
-	long long itotal_bytes;
-	long long start_curved;
-	long long end_curved;
-	double total1;
-	double total2;
-	int precalced=0;
-
-
-	vbr_control_t *state = sstate;
-
-	/* Check the filename */
-	if(state->filename == NULL || state->filename[0] == '\0')
-		return(-1);
-
-	/* Initialize safe defaults for 2pass 2 */ 
-	state->pass1_file = NULL;
-	state->nb_frames = 0;
-	state->nb_keyframes = 0;
-
-	/* Open the 1st pass file */
-	if((f = fopen(state->filename, "r")) == NULL)
-		return(-1);
-
-	printf("XvidVBR: initialized with file :%s, pass 2\n",state->filename);
-	state->pass1_file = f;
-
-	/* Get the file version and check against current version */
-	fscanf(state->pass1_file, "# ASCII XviD vbr stat file version %d\n", &n);
-
-	if(n != VBR_VERSION) {
-		fclose(state->pass1_file);
-		state->pass1_file = NULL;
-		return(-1);
-	}
-
-	/* Skip the blank commented line */
-	c = n = 0;
-	do {
-
-		c = fgetc(state->pass1_file);
-
-		if(c == EOF) {
-			fclose(state->pass1_file);
-			state->pass1_file = NULL;
-			return(-1);
-		}
-
-		if(c == '\n') n++;
-
-	}while(n < 1);
-
-
-	/* Get the number of frames */
-	fscanf(state->pass1_file, "# frames : %d\n", &state->nb_frames);
-
-	/* Compute the desired size */
-	state->desired_size = (long long)
-		(((long long)state->nb_frames * (long long)state->desired_bitrate) /
-		 (state->fps * 8.0));
-
-	/* Get the number of keyframes */
-	fscanf(state->pass1_file, "# keyframes : %d\n", &state->nb_keyframes);
-
-	/* Allocate memory space for the keyframe_location array */
-	if((state->keyframe_locations
-	    = (int*)ADM_alloc((state->nb_keyframes+1)*sizeof(int))) == NULL) {
-		fclose(state->pass1_file);
-		state->pass1_file = NULL;
-		return(-1);
-	}
-
-	/* Skip the blank commented line and the colum description */
-	c = n = 0;
-	do {
-
-		c = fgetc(state->pass1_file);
-
-		if(c == EOF) {
-			fclose(state->pass1_file);
-			state->pass1_file = NULL;
-			return(-1);
-		}
-
-		if(c == '\n') n++;
-
-	}while(n < 2);
-
-	/* Save position for future use */
-	pos_firstframe = ftell(state->pass1_file);
-_AGAIN_:
-	/* Read and initialize some variables */
-	credits1_bytes = credits2_bytes = 0;
-	total_bytes = itotal_bytes = 0;
-	start_curved = end_curved = 0;
-	credits_frames = 0;
-	// MeanX
-	//---------------------------------MeanX----------------------------------
-	if(!precalced)
-	{
-		printf("nb_frames : %d\n",state->nb_frames);
-		state->size=(int *)ADM_alloc(sizeof(int)*state->nb_frames);
-		state->kf=(int *)ADM_alloc(sizeof(int)*state->nb_frames);
-		state->type=(int *)ADM_alloc(sizeof(int)*state->nb_frames);
-
-	// 1 read the whole file in memory
-	//-----------------------------------------------------
-
-		for(state->cur_frame=0; state->cur_frame<state->nb_frames; state->cur_frame++)
-		{
-
-			int quant, keyframe, frame_hbytes, frame_bytes;
-			int kblocks, mblocks, ublocks;
-
-			fscanf(state->pass1_file, "%d %d %d %d %d %d %d\n",
-		       	&quant, &keyframe, &frame_hbytes, &frame_bytes,
-			       &kblocks, &mblocks, &ublocks);
-
-			//
-			// rescale
-			frame_bytes=(frame_bytes*quant)>>1;
-			// In case of max allowed byterate we caps the size to avoid
-			// having a ridiculously high ratio between in quant and out quant
-
-			// ublocks is the frame type : 1 -> I / 2-> P/ 3-> B
-			state->size[state->cur_frame]=frame_bytes;
-			state->type[state->cur_frame]=ublocks;
-			state->kf[state->cur_frame]=keyframe;
-		}
-	} // /precalced
-
-	// 2- compute size
-
-
-/*---------------------------------------------------------------------------------------------------------------------------*/
-	for(state->cur_frame = c = 0; state->cur_frame<state->nb_frames; state->cur_frame++)
-	{
-
-		int  keyframe,  frame_bytes;
-
-		keyframe=state->kf[state->cur_frame];
-		frame_bytes=state->size[state->cur_frame];
-
-		/* Is the frame in the beginning credits */
-		if(util_frametype(state) == FRAME_TYPE_STARTING_CREDITS) {
-			credits1_bytes += frame_bytes;
-			credits_frames++;
-			continue;
-		}
-
-		/* Is the frame in the eding credits */
-		if(util_frametype(state) == FRAME_TYPE_ENDING_CREDITS) {
-			credits2_bytes += frame_bytes;
-			credits_frames++;
-			continue;
-		}
-
-		//
-		//
-		/* We only care about Keyframes when not in credits */
-		if(keyframe) {
-			itotal_bytes +=	frame_bytes + frame_bytes *
-				state->keyframe_boost / 100;
-			total_bytes  += frame_bytes *
-				state->keyframe_boost / 100;
-			state->keyframe_locations[c++] = state->cur_frame;
-		}
-
-		total_bytes += frame_bytes;
-
-	}
-
-	/*-----------------------------------------------------------------------------------------*/
-		printf("__________________\n");
-		printf("desired size : %09lld\n",state->desired_size);
-		printf("pass1   size : %09lld\n",total_bytes);
-		printf("__________________\n");
-	// 3- lookup cap
-/*-----------------------------------------------------------------------------------
----------------------------------------------------------------------------------------*/
-/* Meanx*/
-	/* Here we check if there is a cap influence */
-#if 0
-	if(state->maxAllowedBitrate && !precalced) // maxAllowedBitrte is in BYTE/second not bit/s
-	{
-		float var;
-		int bitrate;
-		int out_bitrate[32];
-		int i;
-		int error,index;
-		
-		printf("Desired bitrate : %d\n",state->desired_bitrate);
-		
-		for(i=2;i<32;i++)
-		{		
-		vbr_make_variance(state,i,&var,&bitrate);
-		out_bitrate[i]=bitrate;
-		printf("Qz : %d Size: %d Ratio:%f\n",i,out_bitrate[i],(float)out_bitrate[i]/(float)state->desired_bitrate);
-		}
-		// search best match
-		// 20% margin
-		index=0;
-		error=30*1000*1000;
-		
-		for(i=2;i<32;i++)
-		{
-			if(abs(out_bitrate[i]-state->desired_bitrate)<error)
-			{
-				error=abs(out_bitrate[i]-state->desired_bitrate);
-				//printf("For quant : %d, error is %d\n",i,error);
-				index=i;
-			}	
-		}
-		printf("Best match found : Quantizer scale = %d\n",index);
-		if(index)
-		{
-			vbr_make_clipping(state,index);
-		}
-		precalced=1;
-		goto _AGAIN_;		
-	}
-		
-#endif
-	/*
-	 * Last frame is treated like an I Frame so we can dispatch overflow
-	 * all other the last film segment
-	 */
-	state->keyframe_locations[c] = state->cur_frame;
-
-	/* Compensate AVI overhead */
-	desired = state->desired_size -  state->nb_frames*24;
-
-	switch(state->credits_mode) {
-	case VBR_CREDITS_MODE_QUANT :
-
-		state->movie_curve = (double)
-			(total_bytes - credits1_bytes - credits2_bytes) /
-			(desired  - credits1_bytes - credits2_bytes);
-
-		start_curved = credits1_bytes;
-		end_curved   = credits2_bytes;
-
-		break;
-	case VBR_CREDITS_MODE_SIZE:
-
-		/* start curve = (start / start desired size) */
-		state->credits_start_curve = (double)
-			(credits1_bytes / state->credits_start_size);
-
-		/* end curve = (end / end desired size) */
-		state->credits_end_curve = (double)
-			(credits2_bytes / state->credits_end_size);
-
-		start_curved = (long long)
-			(credits1_bytes / state->credits_start_curve);
-
-		end_curved   = (long long)
-			(credits2_bytes / state->credits_end_curve);
-
-		/* movie curve=(total-credits)/(desired_size-curved credits) */
-		state->movie_curve = (double)
-			(total_bytes - credits1_bytes - credits2_bytes) /
-			(desired - start_curved - end_curved);
-
-		break;
-	case VBR_CREDITS_MODE_RATE:
-	default:
-
-		/* credits curve = (total/desired_size)*(100/credits_rate) */
-		state->credits_start_curve = state->credits_end_curve =
-			((double)total_bytes / desired) *
-			((double)100 / state->credits_quant_ratio);
-
-		start_curved =
-			(long long)(credits1_bytes/state->credits_start_curve);
-
-		end_curved   =
-			(long long)(credits2_bytes/state->credits_end_curve);
-
-		state->movie_curve = (double)
-			(total_bytes - credits1_bytes - credits2_bytes) /
-			(desired - start_curved - end_curved);
-
-		break;
-	}
-
-	/*
-	 * average frame size = (desired - curved credits - curved keyframes) /
-	 *                      (frames - credits frames - keyframes)
-	 */
-	state->average_frame = (double)
-		(desired - start_curved - end_curved -
-		 (itotal_bytes / state->movie_curve)) /
-		(state->nb_frames - util_creditsframes(state) -
-		 state->nb_keyframes);
-
-	/* Initialize alt curve parameters */
-	if (state->use_alt_curve) {
-
-		state->alt_curve_low =
-			state->average_frame - state->average_frame *
-			(double)(state->alt_curve_low_dist / 100.0);
-
-		state->alt_curve_low_diff =
-			state->average_frame - state->alt_curve_low;
-
-		state->alt_curve_high =
-			state->average_frame + state->average_frame *
-			(double)(state->alt_curve_high_dist / 100.0);
-
-		state->alt_curve_high_diff =
-			state->alt_curve_high - state->average_frame;
-
-		if (state->alt_curve_use_auto) {
-
-			if (state->movie_curve > 1.0)	{
-
-				state->alt_curve_min_rel_qual =
-					(int)(100.0 - (100.0 - 100.0 / state->movie_curve) *
-					      (double)state->alt_curve_auto_str / 100.0);
-
-				if (state->alt_curve_min_rel_qual < 20)
-					state->alt_curve_min_rel_qual = 20;
-			}
-			else {
-				state->alt_curve_min_rel_qual = 100;
-			}
-
-		}
-
-		state->alt_curve_mid_qual =
-		(1.0 + (double)state->alt_curve_min_rel_qual / 100.0) / 2.0;
-
-		state->alt_curve_qual_dev = 1.0 - state->alt_curve_mid_qual;
-
-		if (state->alt_curve_low_dist > 100) {
-
-			switch(state->alt_curve_type) {
-			case VBR_ALT_CURVE_AGGRESIVE:
-				/* Sine Curve (high aggressiveness) */
-				state->alt_curve_qual_dev *=
-					2.0 /
-					(1.0 +  sin(DEG2RAD * (state->average_frame * 90.0 / state->alt_curve_low_diff)));
-
-				state->alt_curve_mid_qual =
-					1.0 - state->alt_curve_qual_dev *
-					sin(DEG2RAD * (state->average_frame * 90.0 / state->alt_curve_low_diff));
-				break;
-
-			default:
-			case VBR_ALT_CURVE_LINEAR:
-				/* Linear (medium aggressiveness) */
-				state->alt_curve_qual_dev *=
-					2.0 /
-					(1.0 + state->average_frame / state->alt_curve_low_diff);
-
-				state->alt_curve_mid_qual =
-					1.0 - state->alt_curve_qual_dev *
-					state->average_frame / state->alt_curve_low_diff;
-
-				break;
-
-			case VBR_ALT_CURVE_SOFT:
-				/* Cosine Curve (low aggressiveness) */
-				state->alt_curve_qual_dev *=
-					2.0 /
-					(1.0 + (1.0 - cos(DEG2RAD * (state->average_frame * 90.0 / state->alt_curve_low_diff))));
-
-				state->alt_curve_mid_qual =
-					1.0 - state->alt_curve_qual_dev *
-					(1.0 - cos(DEG2RAD * (state->average_frame * 90.0 / state->alt_curve_low_diff)));
-
-				break;
-			}
-		}
-	}
-
-	/* Go to the first non credits frame stats line into file */
-	fseek(state->pass1_file, pos_firstframe, SEEK_SET);
-
-/*-------------------------------------------------------------------------
----------------------------------------------------------------------------*/
-	/* Perform prepass to compensate for over/undersizing */
-	total1 = total2 = 0.0;
-
-	for(state->cur_frame=0; state->cur_frame<state->nb_frames; state->cur_frame++)
-	{
-
-		int quant, keyframe, frame_hbytes, frame_bytes;
-		int kblocks, mblocks, ublocks;
-
-		fscanf(state->pass1_file, "%d %d %d %d %d %d %d\n",
-		       &quant, &keyframe, &frame_hbytes, &frame_bytes,
-		       &kblocks, &mblocks, &ublocks);
-		//
-		// rescale
-		frame_bytes=state->size[state->cur_frame];
-		keyframe=state->kf[state->cur_frame];
-
-		if(util_frametype(state) != FRAME_TYPE_NORMAL_MOVIE)
-			continue;
-
-		if(!keyframe) {
-
-			double dbytes = frame_bytes / state->movie_curve;
-			total1 += dbytes;
-
-			if (state->use_alt_curve) {
-
-				if (dbytes > state->average_frame) {
-
-					if (dbytes >= state->alt_curve_high) {
-						total2 += dbytes * (state->alt_curve_mid_qual - state->alt_curve_qual_dev);
-					}
-					else {
-						total2+=vbr_getstuff(state,dbytes, state->alt_curve_high_diff);
-					}
-				}
-				else {
-
-					if (dbytes <= state->alt_curve_low) {
-						total2 += dbytes;
-					}
-					else {
-						total2+=vbr_getstuff(state,dbytes, state->alt_curve_high_diff);
-					}
-				}
-			}
-			else {
-				if (dbytes > state->average_frame) {
-					total2 +=
-						((double)dbytes +
-						 (state->average_frame - dbytes) *
-						 state->curve_compression_high / 100.0);
-				}
-				else {
-					total2 +=
-						((double)dbytes +
-						 (state->average_frame - dbytes) *
-						 state->curve_compression_low / 100.0);
-				}
-			}
-		}
-	}
-
-	state->curve_comp_scale= total1 / total2;
-
-
-
-	printf("Average comp ratio : %f\n",state->curve_comp_scale);
-	if (state->use_alt_curve) {
-
-		double curve_temp, dbytes;
-		int newquant, percent;
-		int oldquant = 1;
-
-		if (state->alt_curve_use_auto_bonus_bias)
-			state->alt_curve_bonus_bias = state->alt_curve_min_rel_qual;
-
-		state->curve_bias_bonus =
-			(total1 - total2) * (double)state->alt_curve_bonus_bias /
-			(100.0 * (double)(state->nb_frames - util_creditsframes(state) - state->nb_keyframes));
-		state->curve_comp_scale =
-			((total1 - total2) * (1.0 - (double)state->alt_curve_bonus_bias / 100.0) + total2) /
-			total2;
-
-
-		for (n=1; n <= (int)(state->alt_curve_high*2) + 1; n++) {
-			dbytes = n;
-			if (dbytes > state->average_frame)
-			{
-				if (dbytes >= state->alt_curve_high) {
-					curve_temp = dbytes * (state->alt_curve_mid_qual - state->alt_curve_qual_dev);
-				}
-				else {
-					curve_temp=vbr_getstuff(state,dbytes, state->alt_curve_high_diff);
-					}
-			}
-			else {
-				if (dbytes <= state->alt_curve_low) {
-					curve_temp = dbytes;
-				}
-				else {
-				curve_temp=vbr_getstuff(state,dbytes,state->alt_curve_low_diff);
-
-				}
-			}
-
-			if (state->movie_curve > 1.0)
-				dbytes *= state->movie_curve;
-
-			newquant = (int)(dbytes * 2.0 / (curve_temp * state->curve_comp_scale + state->curve_bias_bonus));
-			if (newquant > 1)
-			{
-				if (newquant != oldquant)
-				{
-					oldquant = newquant;
-					percent = (int)((n - state->average_frame) * 100.0 / state->average_frame);
-				}
-
-			}
-
-		}
-
-	}
-
-	state->overflow = 0;
-	state->KFoverflow = 0;
-	state->KFoverflow_partial = 0;
-	state->KF_idx = 1;
-
-	for (n=0 ; n < 32 ; n++) {
-		state->quant_error[n] = 0.0;
-		state->quant_count[n] = 0;
-	}
-
-	state->curve_comp_error = 0.0;
-	state->last_quant = 0;
-
-	/*
-	 * Above this frame size limit, normal vbr rules will not apply
-	 * This means :
-	 *      1 - Quant can de/increase more than -/+2 between 2 frames
-	 *      2 - Leads to artifacts because of 1
-	 */
-	state->max_framesize = state->twopass_max_bitrate/state->fps;
-
-	/* Get back to the beginning of frame statistics */
-	fseek(state->pass1_file, pos_firstframe, SEEK_SET);
-
-	/*
-	 * Small hack : We have to get next frame stats before the
-	 * getintra/quant calls
-	 * User clients update the data when they call vbrUpdate
-	 * we are just bypassing this because we don't have to update
-	 * the overflow and so on...
-	 */
-	{
-
-		/* Fake vars */
-		int next_hbytes, next_kblocks, next_mblocks, next_ublocks;
-
-		fscanf(state->pass1_file, "%d %d %d %d %d %d %d\n",
-		       &state->pass1_quant, &state->pass1_intra, &next_hbytes,
-		       &state->pass1_bytes, &next_kblocks, &next_mblocks,
-		       &next_ublocks);
-
-	}
-	/* MeanX same as before, scale it to 2 */
-		state->pass1_bytes=state->size[0];;
-		state->pass1_quant=2;
-
-	/* /MeanX*/
-
-	/* Initialize the frame counter */
-	state->cur_frame = 0;
-	state->last_keyframe = 0;
-	/* Reset compressibility to 0 = linear scale */
-	{
-		int j;
-		for(j=0;j<AVG_LOOKUP;j++)
-			state->compr[j]=0;
-	}
-
-	// VBV buffer init
-	state->vbv_fullness=state->vbv_buffer_size;
-	state->bits_per_image=(state->maxAllowedBitrate*8)/state->roundup; // Fixme, small error here
-	printf("Xvid 2 pass Bitrate enforcement\n");
-	printf("===============================\n");
-	printf("Xvid:Using a buffer of %d kByte\n",state->vbv_buffer_size/(8*1024));
-	printf("Xvid:Using a bitrate   %d kbps\n",state->maxAllowedBitrate*8/1000);
-	printf("Xvid:Bits per image    %d bits\n",state->bits_per_image);
-	return(0);
-
-}
-
-static int vbr_getquant_2pass2(void *sstate)
-{
-	int quant;
-	int intra;
-	int bytes1, bytes2;
-	int overflow;
-	int capped_to_max_framesize = 0;
-	int KFdistance, KF_min_size;
-	vbr_control_t *state;
-	int i;
-	int sum=0;
-	int ratio;
-	int target;
-	int projected ;
-	double r;
-	int projected_vbv;
-	
-	int tryme,ok,orgquant;
-
-	 state= (vbr_control_t	* )sstate;
-	 target=state->cur_frame%state->roundup;
-
-	bytes1 = state->pass1_bytes;
-	overflow = state->overflow / 8;
-	/* To shut up gcc warning */
-	bytes2 = bytes1;
-
-
-	if (state->pass1_intra)
-	{
-		overflow = 0;
-	}
-
-	if (util_frametype(state) != FRAME_TYPE_NORMAL_MOVIE)
-	{
-
-
-		switch (state->credits_mode) {
-		case VBR_CREDITS_MODE_QUANT :
-			if (state->credits_quant_i != state->credits_quant_p) {
-				quant = state->pass1_intra ?
-					state->credits_quant_i:
-					state->credits_quant_p;
-			}
-			else {
-				quant = state->credits_quant_p;
-			}
-
-			state->bytes1 = bytes1;
-			state->bytes2 = bytes1;
-			state->desired_bytes2 = bytes1;
-			return(quant);
-		default:
-		case VBR_CREDITS_MODE_RATE :
-		case VBR_CREDITS_MODE_SIZE :
-			if(util_frametype(state) == FRAME_TYPE_STARTING_CREDITS)
-				bytes2 = (int)(bytes1 / state->credits_start_curve);
-			else
-				bytes2 = (int)(bytes1 / state->credits_end_curve);
-			break;
-		}
-	}
-	else {
-		/* Foxer: apply curve compression outside credits */
-		double dbytes, curve_temp;
-
-		bytes2 = bytes1;
-
-		if (state->pass1_intra)
-			dbytes = ((int)(bytes2 + bytes2 * state->keyframe_boost / 100)) /
-				state->movie_curve;
-		else
-			dbytes = bytes2 / state->movie_curve;
-
-		/* spread the compression error accross payback_delay frames */
-		if (state->bitrate_payback_method == VBR_PAYBACK_BIAS)	{
-			bytes2 = (int)(state->curve_comp_error / state->bitrate_payback_delay);
-		}
-		else {
-			bytes2 = (int)(state->curve_comp_error * dbytes /
-				state->average_frame / state->bitrate_payback_delay);
-
-			if (labs(bytes2) > fabs(state->curve_comp_error))
-				bytes2 = (int)state->curve_comp_error;
-		}
-
-		state->curve_comp_error -= bytes2;
-
-		if (state->use_alt_curve) {
-
-			if (!state->pass1_intra) {
-
-				if (dbytes > state->average_frame) {
-					if (dbytes >= state->alt_curve_high)
-						curve_temp = dbytes * (state->alt_curve_mid_qual - state->alt_curve_qual_dev);
-					else
-					{
-						curve_temp = vbr_getstuff(state,dbytes,state->alt_curve_high_diff);
-					}
-				}
-				else {
-					if (dbytes <= state->alt_curve_low)
-						curve_temp = dbytes;
-					else
-					{
-						curve_temp = vbr_getstuff(state,dbytes,state->alt_curve_low_diff);
-					}
-				}
-
-				curve_temp = curve_temp * state->curve_comp_scale + state->curve_bias_bonus;
-
-				bytes2 += ((int)curve_temp);
-				state->curve_comp_error += curve_temp - ((int)curve_temp);
-
-			}
-			else {
-				state->curve_comp_error += dbytes - ((int)dbytes);
-				bytes2 += ((int)dbytes);
-			}
-		}
-		else if ((state->curve_compression_high + state->curve_compression_low) &&
-			!state->pass1_intra) {
-
-			if (dbytes > state->average_frame) {
-				curve_temp = state->curve_comp_scale *
-					((double)dbytes + (state->average_frame - dbytes) *
-					state->curve_compression_high / 100.0);
-			}
-			else {
-				curve_temp = state->curve_comp_scale *
-					((double)dbytes + (state->average_frame - dbytes) *
-					state->curve_compression_low / 100.0);
-			}
-
-			bytes2 += ((int)curve_temp);
-			state->curve_comp_error += curve_temp - ((int)curve_temp);
-		}
-		else {
-			state->curve_comp_error += dbytes - ((int)dbytes);
-			bytes2 += ((int)dbytes);
-		}
-
-		/* cap bytes2 to first pass size, lowers number of quant=1 frames */
-		if (bytes2 > bytes1) {
-			state->curve_comp_error += bytes2 - bytes1;
-			bytes2 = bytes1;
-		}
-		else if (bytes2 < 1) {
-			state->curve_comp_error += --bytes2;
-			bytes2 = 1;
-		}
-	}
-
-	state->desired_bytes2 = bytes2;
-
-	/* Ugly dependance between getquant and getintra */
-	intra = state->getintra(state);
-
-	if(intra) {
-
-		KFdistance = state->keyframe_locations[state->KF_idx] -
-			state->keyframe_locations[state->KF_idx - 1];
-
-		if (KFdistance < state->kftreshold) {
-			KFdistance = KFdistance - state->min_key_interval;
-
-			if (KFdistance >= 0) {
-
-				KF_min_size = bytes2 * (100 - state->kfreduction) / 100;
-				if (KF_min_size < 1)
-					KF_min_size = 1;
-
-				bytes2 = KF_min_size + (bytes2 - KF_min_size) * KFdistance /
-					(state->kftreshold - state->min_key_interval);
-
-				if (bytes2 < 1)
-					bytes2 = 1;
-			}
-		}
-	}
-
-	/*
-	 * Foxer: scale overflow in relation to average size, so smaller frames don't get
-	 * too much/little bitrate
-	 */
-	overflow = (int)((double)overflow * bytes2 / state->average_frame);
-
-	/* Foxer: reign in overflow with huge frames */
-	if (labs(overflow) > labs(state->overflow)) {
-		overflow = state->overflow;
-	}
-
-	/* Foxer: make sure overflow doesn't run away */
-	if(overflow > bytes2 * state->twopass_max_overflow_improvement / 100) {
-		bytes2 += (overflow <= bytes2) ? bytes2 * state->twopass_max_overflow_improvement / 100 :
-			overflow * state->twopass_max_overflow_improvement / 100;
-	}
-	else if(overflow < bytes2 * state->twopass_max_overflow_degradation / -100) {
-		bytes2 += bytes2 * state->twopass_max_overflow_degradation / -100;
-	}
-	else {
-		bytes2 += overflow;
-	}
-
-	if(bytes2 > state->max_framesize) {
-		capped_to_max_framesize = 1;
-		bytes2 = state->max_framesize;
-	}
-
-	if(bytes2 < 1) {
-		bytes2 = 1;
-	}
-
-	state->bytes1 = bytes1;
-	state->bytes2 = bytes2;
-
-	/*printf("Pass 1 : %d \n",bytes1);
-	printf("Pass 2 : %d \n",bytes2);
-	printf("Quant1 : %d \n",state->pass1_quant);
-*/
-	/* very 'simple' quant<->filesize relationship */
-	quant = state->pass1_quant * bytes1 / bytes2;
-//	printf("Quant2 : %d \n",quant);
-	if(quant < 1)
-		quant = 1;
-	else if(quant > 31)
-		quant = 31;
-	else if(!state->pass1_intra) {
-
-		/* Foxer: aid desired quantizer precision by accumulating decision error */
-		state->quant_error[quant] += ((double)(state->pass1_quant * bytes1) / bytes2) - quant;
-
-		if (state->quant_error[quant] >= 1.0) {
-			state->quant_error[quant] -= 1.0;
-			quant++;
-		}
-	}
-
-	/* we're done with credits */
-	if(util_frametype(state) != FRAME_TYPE_NORMAL_MOVIE) {
-		return(quant);
-	}
-
-	if(intra) {
-
-		if (quant < state->min_iquant)
-			quant = state->min_iquant;
-		if (quant > state->max_iquant)
-			quant = state->max_iquant;
-	}
-	else {
-
-		if(quant > state->max_pquant)
-			quant = state->max_pquant;
-		if(quant < state->min_pquant)
-			quant = state->min_pquant;
-
-		/* subsequent frame quants can only be +- 2 */
-		if(state->last_quant && capped_to_max_framesize == 0) {
-			if (quant > state->last_quant + 2)
-				quant = state->last_quant + 2;
-			if (quant < state->last_quant - 2)
-				quant = state->last_quant - 2;
-		}
-	}
-
-	
-
-	// we make a rough estimation of the size this frame will be...
-	
-
-	if(state->maxAllowedBitrate && state->cur_frame+state->roundup<state->nb_frames)
-	{
-	//*******************************************************************************	
-	// meanX
-	//*******************************************************************************
-	tryme=20;
-	ok=0;
-	
-	//quant+=state->qinc;	
-	orgquant=quant;
-_requant:
-	while(tryme && !ok)
-	{
-		int frame;
-		
-		projected_vbv=state->vbv_fullness;
- 		for( i=0;i<state->roundup>>1;i++)
-		{
-			frame=vbr_predict(state,state->size[state->cur_frame+i]*2,quant);
-			frame*=8;
-			projected_vbv-=frame;
-			if(projected_vbv<0)
-			{
-				aprintf("underflow at %d + %d\n",state->cur_frame,i);
-				quant++;
-				if(quant>31)
-				{
-					 quant=31;
-					 tryme=1;
-				}
-				tryme--;
-				goto _requant;
-			}
-			projected_vbv+=state->bits_per_image;
-			if(projected_vbv>state->vbv_buffer_size)
-			{
-				projected_vbv=state->vbv_buffer_size;
-			}
-		}
-		ok=1;
-	}
-	if(!ok)
-	{
-		printf("Could not compensate underflow!\n");
-	}
-	aprintf("Predicted size : %d\n",vbr_predict(state,state->size[state->cur_frame]*2,quant));
-	aprintf("Orgquant:%d finalQuant:%d\n",orgquant,quant);
-	if(quant-orgquant>2) state->qinc+=1+(quant-orgquant)>>1;
-	if(state->qinc) state->qinc--;	
-	if(quant>31) quant=31;
-	}
-	
-	// MEANX
-	return(quant);
-
-}
-
-static int vbr_getintra_2pass2(void *sstate)
-{
-
-	int intra=0;
-	vbr_control_t *state = sstate;
-
-
-	/* Get next intra state (fetched by update) */
-	intra = state->pass1_intra;
-	//printf("1st pass: %d \n",intra);
-	/* During credits, XviD will decide itself */
-	if(util_frametype(state) != FRAME_TYPE_NORMAL_MOVIE) {
-
-
-		switch(state->credits_mode) {
-		default:
-		case VBR_CREDITS_MODE_RATE :
-		case VBR_CREDITS_MODE_SIZE :
-			intra = -1;
-			break;
-		case VBR_CREDITS_MODE_QUANT :
-			/* Except in this case */
-			if (state->credits_quant_i == state->credits_quant_p)
-				intra = -1;
-			break;
-		}
-
-	}
-
-	/* Force I Frame when max_key_interval is reached */
-	if((state->cur_frame - state->last_keyframe) > state->max_key_interval)
-	{
-	//	printf("Too far away -> intra cur : %d last : %d\n", 
-	//		state->cur_frame,state->last_keyframe);		
-		intra = 1;
-	}
-
-	/*
-	 * Force P or B Frames for frames whose distance is less than the
-	 * requested minimum
-	 */
-	if((state->cur_frame - state->last_keyframe) < state->min_key_interval)
-	{
-		intra = 0;
-	}
-	//printf("cur : %d / last %d intra  : %d min: %d max: %d\n",state->cur_frame,state->last_keyframe,intra,
-	//		 state->min_key_interval, state->max_key_interval			);
-
-	/* Return the given intra mode except for first frame */
-	return((state->cur_frame==0)?1:intra);
-
-}
-
-static int vbr_update_2pass2(void *sstate,
-			     int quant,
-			     int intra,
-			     int header_bytes,
-			     int total_bytes,
-			     int kblocks,
-			     int mblocks,
-			     int ublocks)
-
-
-{
-
-
-//	int next_hbytes, next_kblocks, next_mblocks, next_ublocks;
-	int tempdiv;
-	int target;
-	vbr_control_t *state = sstate;
-
-	header_bytes=total_bytes+kblocks+mblocks+ublocks; // MEAN: Remove warning
-	/*
-	 * We do not depend on getintra/quant because we have the real results
-	 * from the xvid core
-	 */
-
-	if (util_frametype(state) == FRAME_TYPE_NORMAL_MOVIE) {
-
-		state->quant_count[quant]++;
-
-		if (state->pass1_intra) {
-
-			state->overflow += state->KFoverflow;
-			state->KFoverflow = state->desired_bytes2 - total_bytes;
-
-			tempdiv = (state->keyframe_locations[state->KF_idx] -
-				   state->keyframe_locations[state->KF_idx - 1]);
-
-			/* redistribute correctly (by koepi) */
-			if (tempdiv > 1) {
-				/* non-consecutive keyframes */
-				state->KFoverflow_partial = state->KFoverflow /
-					(tempdiv - 1);
-			}
-			else {
-				state->overflow  += state->KFoverflow;
-				state->KFoverflow = 0;
-				state->KFoverflow_partial = 0;
-			}
-			state->KF_idx++;
-
-		}
-		else {
-			state->overflow += state->desired_bytes2 - total_bytes +
-				state->KFoverflow_partial;
-			state->KFoverflow -= state->KFoverflow_partial;
-		}
-	}
-	else {
-
-		state->overflow += state->desired_bytes2 - total_bytes;
-		state->overflow += state->KFoverflow;
-		state->KFoverflow = 0;
-		state->KFoverflow_partial = 0;
-	}
-
-	/* Save old quant */
-	state->last_quant = quant;
-	/* Save the last Keyframe pos */
-	if(intra)
-		state->last_keyframe = state->cur_frame;
-
-		target=state->cur_frame%state->roundup;
-		
-
-		if(ublocks!=state->type[state->cur_frame])
-		{
-				//aprintf("\n************************* GOP CHANGE******************\n");
-		}
-
-/* Ok next frame */
-
-		state->cur_frame++;
-		state->pass1_bytes=state->size[state->cur_frame];;
-		state->pass1_intra=state->kf[state->cur_frame];
-		state->pass1_quant=2;
-/* Update vbv */
-	if(state->maxAllowedBitrate && state->cur_frame<state->nb_frames-state->roundup)
-	{
-		int rank,old;
-		float comp;
-			state->vbv_fullness-=total_bytes*8;
-			state->vbv_fullness+=state->bits_per_image;
-			if(state->vbv_fullness>state->vbv_buffer_size)
-			{
-				state->vbv_fullness=state->vbv_buffer_size;
-			}
-			if(state->vbv_fullness<0)
-			{
-				printf("** Buffer undeflow: %d at frame :%d **\n",state->vbv_fullness,state->cur_frame);
-				state->vbv_fullness=0;
-			}
-			// Update compressility
-			old=state->cur_frame-1;
-			rank=old%AVG_LOOKUP;
-			state->compr[rank]=vbr_get_comp(state->size[old],2,total_bytes,quant);
-			aprintf(">>Size : %d\n",total_bytes);
-			aprintf("Buffer fullness:%d\n",100*state->vbv_fullness/state->vbv_buffer_size);
-	}		
-
-	return(0);
-
-}
-
-static int vbr_finish_2pass2(void *sstate)
-{
-
-	vbr_control_t *state = sstate;
-
-	if(state->pass1_file == NULL)
-		return(-1);
-
-	/* Close the file */
-	if(fclose(state->pass1_file) != 0)
-		return(-1);
-
-	/* Free the memory */
-	if(state->keyframe_locations)
-		ADM_dealloc(state->keyframe_locations);
-
-	{ // meanX
-		if(state->size)
-			{
-				ADM_dealloc(state->size);
-				state->size=NULL;
-			}
-		if(state->kf)
-			{
-				ADM_dealloc(state->kf);
-				state->kf=NULL;
-			}
-		if(state->type)
-			{
-				ADM_dealloc(state->type);
-				state->type=NULL;
-			}
-
-
-	}
-
-	return(0);
-
-}
-
-
-/******************************************************************************
- * Fixed quant mode - Most of the functions will be dummy functions
- *****************************************************************************/
-
-static int vbr_init_fixedquant(void *sstate)
-{
-
-	vbr_control_t *state = sstate;
-
-	if(state->fixed_quant < 1)
-		state->fixed_quant = 1;
-
-	if(state->fixed_quant > 31)
-		state->fixed_quant = 31;
-
-	state->cur_frame = 0;
-
-	return(0);
-
-}
-
-static int vbr_getquant_fixedquant(void *sstate)
-{
-
-	vbr_control_t *state = sstate;
-
-	/* Credits' frame ? */
-	if(util_frametype(state) != FRAME_TYPE_NORMAL_MOVIE) {
-
-		int quant;
-
-		switch(state->credits_mode) {
-		case VBR_CREDITS_MODE_RATE:
-			quant = state->fixed_quant * state->credits_quant_ratio;
-			break;
-		case VBR_CREDITS_MODE_QUANT:
-			quant = state->credits_fixed_quant;
-			break;
-		default:
-			quant = state->fixed_quant;
-
-		}
-
-		return(quant);
-
-	}
-		
-	/* No credit frame - return fixed quant */
-	return(state->fixed_quant);
-
-}
-/*__________________________________________________________________
-
-	Reverse the below formula
-	newbits/oldbuts=newquang^ -comp
-	log(newq^ -comp)=log(newbit/oldbits)
-	comp=-log(newbits/oldbits)/log(newq/oldq)
-*/
-float vbr_get_comp(int oldbits, int qporg, int newbits, int qpused)
-{
-	float comp;
-	
-	comp=newbits;
-	comp/=oldbits;
-	comp=log(comp);
-	comp/=log(qpused/qporg);
-	aprintf("Old q:%d new q : %d oldBits:%d newbits:%d comp:%f\n",
-			qporg,qpused,oldbits,newbits,-comp);
-	return -comp;
-}
-/*_______________________________________________________________
-	Predict the size of the image
-	Using a exp(-comp) formula instead of linear formula
-	
-	Idea by Peter Cheat
-__________________________________________________________________
-*/
-int vbr_predict(vbr_control_t *state,int original_size,int qp)
-{
- // Peter Cheat formula :Pridicted Bits Frame 10 Will Use = (Bits Used At Quantiser 1) * (New Quantiser ^ -Compressibility)
- // avg lookup compressibility
- 	int start;
-	int pred,i;
-	float comp=0;
-		
-	start=state->cur_frame;
-	start+=state->roundup;
-	start-=AVG_LOOKUP;
-	start%=state->roundup;
-	
-	for(i=0;i<AVG_LOOKUP;i++)
-	{
-		comp+=state->compr[start];
-		start++;
-		start%=AVG_LOOKUP;
-	}
-	comp=comp/AVG_LOOKUP;
-	
-	pred=original_size;
-	pred=pred*pow(qp/2,-comp);
-	aprintf("Avg comp: %f initial size : %d predicted size:%d\n",comp,original_size,pred);
-	return pred;
-
-}
-/*
-	Return if next frame is intra
-*/
-int vbr_next_intra( void *sstate)
-{
-
-	vbr_control_t *state = sstate;
-
-	if(state->cur_frame>state->nb_frames -2) return 0;
-	return state->kf[state->cur_frame+1];
-
-}
-static int vbr_getintra_fixedquant(void *state)
-{
-	if(state)
-	{
-	}
-	return(-1);
-
-}
-int vbr_getstuff(vbr_control_t *state, int dbytes,double diff)
-{
-	int total2=0;
-	switch(state->alt_curve_type)
-						{
-						case VBR_ALT_CURVE_AGGRESIVE:
-							total2 +=
-								dbytes *
-								(state->alt_curve_mid_qual - state->alt_curve_qual_dev *
-								 sin(DEG2RAD * ((dbytes - state->average_frame) * 90.0 / diff)));
-							break;
-						default:
-						case VBR_ALT_CURVE_LINEAR:
-							total2 +=
-								dbytes *
-								(state->alt_curve_mid_qual - state->alt_curve_qual_dev *
-								 (dbytes - state->average_frame) / diff);
-							break;
-						case VBR_ALT_CURVE_SOFT:
-							total2 +=
-								dbytes *
-								(state->alt_curve_mid_qual + state->alt_curve_qual_dev *
-								 (1.0 - cos(DEG2RAD * ((dbytes - state->average_frame) * 90.0 / diff))));
-						}
-	return total2;
-}
-/*---------------------------------------------------------------------------------------------------------------------
-	
-	For each quantizer given we clip size until it does not reach maxiumu
-	bitrate, that way we got an good average size value to decide
-	which quantizer is good depending on the max bitrate
-	
------------------------------------------------------------------------------------------------------------------------
-*/
-int  vbr_make_variance(vbr_control_t *state, float compression, int *variance, int *bitrate)
-{
-		
-		float *cur_mod=NULL;
-		float *final_mod=NULL;
-		int roundup;
-		int nb_maxxed;
-		
-		int i,tmp;
-		double ibitrate, instant;
-		int try;
-		double d_average,d_variance,v;
-		long long int in_sum, out_sum;
-		
-		float compr_out;
-					
-		roundup=state->roundup;	
-		cur_mod=ADM_alloc(sizeof(float)*state->nb_frames);
-		final_mod=ADM_alloc(sizeof(float)*state->nb_frames);
-		
-		
-		for(i=0;i<state->nb_frames;i++)
-		{						
-			final_mod[i]=2/compression;			
-		}
-		
-		// Calculate bitrate
-		for(try=0;try<5;try++)
-		{		
-		ibitrate=0;
-		nb_maxxed=0;
-		
-		// Reset
-		for(tmp=0;tmp<state->nb_frames;tmp++)
-		{
-			cur_mod[tmp]=1.;			
-		}
-		
-		for(i=roundup;i<(state->nb_frames-roundup);i++)
-		{
-			instant=state->size[i-(roundup>>1)];
-			instant*=final_mod[i-(roundup>>1)];
-			ibitrate-=instant;
-			
-			instant=state->size[i+(roundup>>1)];
-			instant*=final_mod[i+(roundup>>1)];
-			ibitrate+=instant;
-			
-			if(ibitrate<10.) ibitrate=10.;			
-			//printf("Iteration %0d Bitrate at %d : %03.0f",try,i,(ibitrate*8)/1000);			
-			if(ibitrate> state->maxAllowedBitrate)
-			{
-				nb_maxxed++;				
-			//	printf(" Maxx!");
-				for(tmp=-(roundup>>1);tmp<(roundup>>1);tmp++)
-				{
-					cur_mod[i+tmp]=0.8;
-				}
-			}
-			//printf("\n");
-		}
-		for(i=roundup;i<(state->nb_frames-roundup);i++)
-		{
-			final_mod[i]*=cur_mod[i];
-		}
-		} // end try
-		/*for(i=roundup;i<(state->nb_frames-roundup);i++)
-		{
-			tmp=(int)floor(final_mod[i]*compression*100.);	
-			printf("Final mod  %d %d %%\n",
-					i,tmp);
-			
-		}*/
-		d_average=0;
-		d_variance=0;
-		in_sum=0;
-		out_sum=0;
-		//___________________________
-		// compute average  && variance
-		//___________________________
-		for(i=0;i<state->nb_frames;i++)
-		{
-			in_sum+=state->size[i];
-			out_sum+=(state->size[i]*final_mod[i]);			
-		}		
-		d_average=out_sum;
-		d_average/=state->nb_frames;
-		//printf("Average bitrate out : %f\n",(d_average*state->fps*8)/1000);
-		*bitrate=floor(d_average*state->fps*8);
-//		printf("Average bitrate out : %d\n",*bitrate);
-		
-		for(i=0;i<(state->nb_frames);i++)
-		{
-			v=state->size[i]*final_mod[i]-d_average;
-			d_variance+=abs(v);	
-		}		
-		d_variance/=state->nb_frames;			
-		*variance=floor(d_variance);
-				
-		//printf("in : %lld		\n",in_sum);
-		//printf("out : %lld		\n",out_sum);
-		compr_out=in_sum;
-		compr_out/=out_sum;
-		
-		//printf("Compression in /out : %f /  %f\n",compression, compr_out);
-		//printf("Variance : %f\n",d_variance);
-		ADM_dealloc(cur_mod);		
-		ADM_dealloc(final_mod);		
-		return 0;
-}	
-/*
-	Same as above except this time we alter the size to reflect the
-	max bitrate (on the original size)
-
-*/	
-int  vbr_make_clipping(vbr_control_t *state, float compression)
-{
-		
-		float *cur_mod=NULL;
-		float *final_mod=NULL;
-		int roundup;
-		int nb_maxxed;
-		
-		int i,tmp;
-		double ibitrate, instant;
-		int try;
-		int before,after;
-					
-		roundup=state->roundup;	
-		cur_mod=ADM_alloc(sizeof(float)*state->nb_frames);
-		final_mod=ADM_alloc(sizeof(float)*state->nb_frames);
-		
-		
-		for(i=0;i<state->nb_frames;i++)
-		{			
-			
-			final_mod[i]=2./compression;			
-		}
-		
-		// Calculate bitrate
-		for(try=0;try<5;try++)
-		{		
-		ibitrate=0;
-		nb_maxxed=0;
-		
-		// Reset
-		for(tmp=0;tmp<state->nb_frames;tmp++)
-		{
-			cur_mod[tmp]=1.;			
-		}
-		
-		for(i=roundup;i<(state->nb_frames-roundup);i++)
-		{
-			instant=state->size[i-(roundup>>1)];
-			instant*=final_mod[i-(roundup>>1)];
-			ibitrate-=instant;
-			
-			instant=state->size[i+(roundup>>1)];
-			instant*=final_mod[i+(roundup>>1)];
-			ibitrate+=instant;
-			
-			if(ibitrate<10.) ibitrate=10.;			
-			//printf("Iteration %0d Bitrate at %d : %03.0f",try,i,(ibitrate*8)/1000);			
-			if(ibitrate> state->maxAllowedBitrate)
-			{
-				nb_maxxed++;				
-			//	printf(" Maxx!");
-				for(tmp=-(roundup>>1);tmp<(roundup>>1);tmp++)
-				{
-					cur_mod[i+tmp]=0.8;
-				}
-			}
-			//printf("\n");
-		}
-		for(i=roundup;i<(state->nb_frames-roundup);i++)
-		{
-			final_mod[i]*=cur_mod[i];
-		}
-		} // end try
-		for(i=roundup;i<(state->nb_frames-roundup);i++)
-		{
-			before=state->size[i];
-			state->size[i]=state->size[i]*final_mod[i]*compression/2;
-			after=state->size[i];
-			//printf("%d --> %d (%f)\n",before,after,final_mod[i]*50);
-		}
-		ADM_dealloc(cur_mod);		
-		ADM_dealloc(final_mod);	
-		//exit(0);	
-		return 0;		
-}		

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/xvid_vbr.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/xvid_vbr.h	2009-07-03 08:55:54 UTC (rev 4990)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/xvid_vbr.h	2009-07-03 10:11:38 UTC (rev 4991)
@@ -1,250 +0,0 @@
-/******************************************************************************
- *
- *   XviD VBR Library
- *   
- *   Copyright (C) 2002 Edouard Gomez <ed.gomez at wanadoo.fr>
- *
- *   The curve treatment algorithm is based on work done by Foxer <email?> and
- *   Dirk Knop <dknop at gwdg.de> for the XviD vfw dynamic library.
- *
- *  This program is free software; you can redistribute it and/or modify
- *  it under the terms of the GNU General Public License as published by
- *  the Free Software Foundation; either version 2 of the License, or
- *  (at your option) any later version.
- *
- *  This program is distributed in the hope that it will be useful,
- *  but WITHOUT ANY WARRANTY; without even the implied warranty of
- *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
- *  GNU General Public License for more details.
- *
- *  You should have received a copy of the GNU General Public License
- *  along with this program; if not, write to the Free Software
- *  Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA
- *
- *****************************************************************************/
-
-#ifndef __XVID_VBR_H__
-#define __XVID_VBR_H__
-
-#define VBR_VERSION 0
-#define AVG_LOOKUP 5
-/******************************************************************************
- * Function types used in the vbr controler
- *****************************************************************************/
-
-typedef int (vbr_init_function) (void *state);
-typedef vbr_init_function *vbr_init_function_ptr;
-
-typedef int (vbr_get_quant_function) (void *state);
-typedef vbr_get_quant_function *vbr_get_quant_function_ptr;
-
-typedef int (vbr_get_intra_function) (void *state);
-typedef vbr_get_intra_function *vbr_get_intra_function_ptr;
-
-typedef int (vbr_update_function) (void *state,
-				   int quant,
-				   int intra,
-				   int header_bytes,
-				   int total_bytes,
-				   int kblocks, int mblocks, int ublocks);
-typedef vbr_update_function *vbr_update_function_ptr;
-
-typedef int (vbr_finish_function) (void *state);
-typedef vbr_finish_function *vbr_finish_function_ptr;
-
-/******************************************************************************
- * The VBR CONTROLER structure - the spin of the library
- *****************************************************************************/
-
-typedef struct _vbr_control_t
-{
-
-  /* All modes - specifies what VBR algorithm has to be used */
-  int mode;
-
-  /* All modes - specifies what fps the movie uses */
-  float fps;
-
-  /* All modes */
-  int debug;
-
-  /*
-   * For VBR_MODE_2PASS_1/2 - specifies from/to what file the vbr
-   * controller has to write/read stats
-   */
-  char *filename;
-
-  /* For VBR_MODE_2PASS_2 - Target size */
-  int desired_bitrate;
-
-  /* For VBR_MODE_2PASS_2 - Credits parameters */
-  int credits_mode;
-  int credits_start;
-  int credits_start_begin;
-  int credits_start_end;
-  int credits_end;
-  int credits_end_begin;
-  int credits_end_end;
-  int credits_quant_ratio;
-  int credits_fixed_quant;
-  int credits_quant_i;
-  int credits_quant_p;
-  int credits_start_size;
-  int credits_end_size;
-
-  /* For VBR_MODE_2PASS_2 - keyframe parameters */
-  int keyframe_boost;
-  int kftreshold;
-  int kfreduction;
-  int min_key_interval;
-  int max_key_interval;
-
-  /* For VBR_MODE_2PASS_2 - Normal curve */
-  int curve_compression_high;
-  int curve_compression_low;
-
-  /* For VBR_MODE_2PASS_2 - Alternate curve parameters */
-  int use_alt_curve;
-  int alt_curve_type;
-  int alt_curve_low_dist;
-  int alt_curve_high_dist;
-  int alt_curve_min_rel_qual;
-  int alt_curve_use_auto;
-  int alt_curve_auto_str;
-  int alt_curve_use_auto_bonus_bias;
-  int alt_curve_bonus_bias;
-  int bitrate_payback_method;
-  int bitrate_payback_delay;
-  int max_iquant;
-  int min_iquant;
-  int max_pquant;
-  int min_pquant;
-  int twopass_max_bitrate;
-  int twopass_max_overflow_improvement;
-  int twopass_max_overflow_degradation;
-
-  /*
-   * For VBR_MODE_FIXED_QUANT - the quantizer that has to be used for all
-   * frames
-   */
-  int fixed_quant;
-
-  /* ----------- Internal data - Do not modify ----------- */
-  void *debug_file;
-  void *pass1_file;
-
-  long long desired_size;
-
-  int cur_frame;
-  int nb_frames;
-  int nb_keyframes;
-
-  int *keyframe_locations;
-  int last_keyframe;
-
-  double credits_start_curve;
-  double credits_end_curve;
-  double movie_curve;
-  double average_frame;
-  double alt_curve_low;
-  double alt_curve_low_diff;
-  double alt_curve_high;
-  double alt_curve_high_diff;
-  double alt_curve_mid_qual;
-  double alt_curve_qual_dev;
-  double curve_bias_bonus;
-  double curve_comp_scale;
-  double curve_comp_error;
-
-  int pass1_quant;
-  int pass1_intra;
-  int pass1_bytes;
-
-  int bytes1;
-  int bytes2;
-  int desired_bytes2;
-  int max_framesize;
-  int last_quant;
-  int quant_count[32];
-  double quant_error[32];
-
-  int overflow;
-  int KFoverflow;
-  int KFoverflow_partial;
-  int KF_idx;
-
-  int debug_quant_count[32];
-
-  /* ----------- Internal data - do not modify ----------- */
-  vbr_init_function_ptr init;
-  vbr_get_quant_function_ptr getquant;
-  vbr_get_intra_function_ptr getintra;
-  vbr_update_function_ptr update;
-  vbr_finish_function_ptr finish;
-
-	/*------------ Meanx Bitrate clipping ---------------------*/
-  int roundup;			// round-up of fps : 24/25/30
-  int maxAllowedBitrate;	// max allowed bitrate in byte / sec
-  //int b_per_sec[60];                            //
-  int *size;			// we will store size of frames here
-  int *kf;
-  int *type;			// I=1 P =2 B=3
-  int qinc;
-  //int underflow_warning;                        // Means we get under thresh underflow
-  //int  thresh_underflow;                        // Level in byte to underflow (~ 700 kbytes/s for SVCD)
-  //int allow_quant_skew;                 // allow diff between I / P / B quant mods
-  //int avg_br;                                   // average bitrate
-  int vbv_buffer_size;		// <- MUST BE FILLED BY USER
-  int vbv_fullness;		//
-  int bits_per_image;		//
-  float compr[AVG_LOOKUP];
-} vbr_control_t;
-#define THRESH_UNDERFLOW ((700*1000)>>3)	// in BYTES ! around 600 kbits
-//#define BOOST_KF  1 // allow KF boots for mpeg1/2
-/******************************************************************************
- * Constants
- *****************************************************************************/
-/* Bitrate limiter */
-#define LIMITER_ANTICIPATING 	2
-#define LIMITER_LOW_WARNING	2
-#define LIMITER_WARNING		3
-#define LIMITER_MAX_INC		3
-
-/* Constants for the mode member */
-#define VBR_MODE_1PASS       0x01
-#define VBR_MODE_2PASS_1     0x02
-#define VBR_MODE_2PASS_2     0x04
-#define VBR_MODE_FIXED_QUANT 0x08
-
-/* Constants for the credits mode */
-#define VBR_CREDITS_MODE_RATE  0x01
-#define VBR_CREDITS_MODE_QUANT 0x02
-#define VBR_CREDITS_MODE_SIZE  0x04
-
-/* Alternate curve treatment types */
-#define VBR_ALT_CURVE_SOFT      0x01
-#define VBR_ALT_CURVE_LINEAR    0x02
-#define VBR_ALT_CURVE_AGGRESIVE 0x04
-
-/* Payback modes */
-#define VBR_PAYBACK_BIAS            0x01
-#define VBR_PAYBACK_PROPORTIONAL    0x02
-
-/******************************************************************************
- * VBR API
- *****************************************************************************/
-
-extern int vbrSetDefaults (vbr_control_t * state);
-extern int vbrInit (vbr_control_t * state);
-extern int vbrGetQuant (vbr_control_t * state);
-extern int vbrGetIntra (vbr_control_t * state);
-extern int vbrUpdate (vbr_control_t * state,
-		      int quant,
-		      int intra,
-		      int header_bytes,
-		      int total_bytes, int kblocks, int mblocks, int ublocks);
-extern int vbrFinish (vbr_control_t * state);
-/*	Meanx
-*/
-int vbr_next_intra (void *sstate);
-#endif

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/prefs.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/prefs.cpp	2009-07-03 08:55:54 UTC (rev 4990)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/prefs.cpp	2009-07-03 10:11:38 UTC (rev 4991)
@@ -76,10 +76,6 @@
 	{"codecs.dvd.matrix",		UINT,	"0",	NULL,	"0",	"99999"},
 	{"codecs.dvd.gopsize",		UINT,	"12",	NULL,	"0",	"99999"},
 	{"codecs.dvd.maxbitrate",		UINT,	"9000",	NULL,	"0",	"9900"	},
-	{"codecs.xvid.enctype",		UINT,	"0",	NULL,	"0",	"99999"},
-	{"codecs.xvid.quantizer",		UINT,	"4",	NULL,	"2",	"32"	},
-	{"codecs.xvid.bitrate",		UINT,	"1500000",NULL,	"17",	"5900000"},
-	{"codecs.xvid.finalsize",	UINT,	"700",	NULL,	"0",	"3999"	},
 	{"codecs.preferredcodec",		STRING,"FFmpeg4",NULL, NULL, NULL },
 #ifdef __WIN32
 	{"filters.subtitle.fontname",		FILENAME,"C:\\Windows\\Fonts\\arial.ttf",NULL, NULL, NULL },
@@ -109,13 +105,6 @@
 	{"lastfiles.file4",		FILENAME,"",	NULL, NULL, NULL },
 	{"lastdir_read",		FILENAME,"",	NULL, NULL, NULL },
 	{"lastdir_write",		FILENAME,"",	NULL, NULL, NULL },
-	{"lame_cli",		STRING,"",	NULL, NULL, NULL },
-	{"pipe_cmd",		STRING,"",	NULL, NULL, NULL },
-	{"pipe_param",		STRING,"",	NULL, NULL, NULL },
-	{"lame_path",		STRING,"",	NULL, NULL, NULL },
-	{"toolame_path",		STRING,"",	NULL, NULL, NULL },
-	{"lvemux_path",		STRING,"",	NULL, NULL, NULL },
-	{"requant_path",		STRING,"",	NULL, NULL, NULL },
 	{"message_level",		UINT,	"2",	NULL,	"0",	"2"	},
 	{"feature.swap_if_A_greater_than_B",		UINT,	"1",	NULL,	"0",	"1"	},
 	{"feature.svcdres.preferedsourceratio",		STRING,"1:1",	NULL, NULL, NULL },
@@ -144,7 +133,7 @@
 	{"priority.playback",		UINT,	"0",	NULL,	"0",	"4"	}
 };
 
-int num_opts = 78;
+int num_opts = 67;
 // </prefs_gen>
 
 #ifdef USE_LIBXML2

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/CMakeLists.txt	2009-07-03 08:55:54 UTC (rev 4990)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/CMakeLists.txt	2009-07-03 10:11:38 UTC (rev 4991)
@@ -23,8 +23,6 @@
  TLK_filesel.cpp
 )
 SET(OBSOLETE_SRCS
- DIA_exLame.cpp
- DIA_pipe.cpp
  DIA_threshold.cpp
  DIA_SwissArmyKnife.cpp
  DIA_particle.cpp

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_exLame.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_exLame.cpp	2009-07-03 08:55:54 UTC (rev 4990)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_exLame.cpp	2009-07-03 10:11:38 UTC (rev 4991)
@@ -1,107 +0,0 @@
-
-#include "ADM_toolkitGtk.h"
-#include "prefs.h"
-static GtkWidget	*create_dialog1 (void);
-
-uint8_t DIA_lame(char **lame)
-{
-	GtkWidget *dialog;
-
-	char *str;
-	uint8_t ret=0;
-
-	gint r;
-
-#define FILL_ENTRY(widget_name,value) {		 \
-gtk_editable_delete_text(GTK_EDITABLE(lookup_widget(dialog,#widget_name)), 0,-1);\
-gtk_editable_insert_text(GTK_EDITABLE(lookup_widget(dialog,#widget_name)), str, strlen(str), &r);}
-
-	dialog=create_dialog1();
-	gtk_transient(dialog);
-	*lame=NULL;
-
-	if(!prefs->get(LAME_CLI,&str)) str=NULL;
-	if(str)
-	{
-		FILL_ENTRY(entry1,left);
-	}
-	ret=0;
-	if(gtk_dialog_run(GTK_DIALOG(dialog))==GTK_RESPONSE_OK)
-	{
-
-#define READ_ENTRY(widget_name)   gtk_editable_get_chars(GTK_EDITABLE (lookup_widget(dialog,#widget_name)), 0, -1);
-
-			str=READ_ENTRY(entry1);
-			if(strlen(str))
-			{
-				*lame=ADM_strdup(str);;
-				prefs->set(LAME_CLI,str);
-			}
-			ret=1;
-	}
-
-	gtk_widget_destroy(dialog);
-
-	return ret;
-
-}
-
-
-GtkWidget*
-create_dialog1 (void)
-{
-  GtkWidget *dialog1;
-  GtkWidget *dialog_vbox1;
-  GtkWidget *vbox1;
-  GtkWidget *label1;
-  GtkWidget *entry1;
-  GtkWidget *dialog_action_area1;
-  GtkWidget *cancelbutton1;
-  GtkWidget *okbutton1;
-
-  dialog1 = gtk_dialog_new ();
-  gtk_window_set_title (GTK_WINDOW (dialog1), QT_TR_NOOP("Lame command"));
-
-  dialog_vbox1 = GTK_DIALOG (dialog1)->vbox;
-  gtk_widget_show (dialog_vbox1);
-
-  vbox1 = gtk_vbox_new (FALSE, 0);
-  gtk_widget_show (vbox1);
-  gtk_box_pack_start (GTK_BOX (dialog_vbox1), vbox1, TRUE, TRUE, 0);
-
-  label1 = gtk_label_new (QT_TR_NOOP("Enter parameters (i.e. -b 192 -m s ...)"));
-  gtk_widget_show (label1);
-  gtk_box_pack_start (GTK_BOX (vbox1), label1, FALSE, FALSE, 0);
-  gtk_label_set_justify (GTK_LABEL (label1), GTK_JUSTIFY_LEFT);
-
-  entry1 = gtk_entry_new ();
-  gtk_widget_show (entry1);
-  gtk_box_pack_start (GTK_BOX (vbox1), entry1, FALSE, FALSE, 0);
-
-  dialog_action_area1 = GTK_DIALOG (dialog1)->action_area;
-  gtk_widget_show (dialog_action_area1);
-  gtk_button_box_set_layout (GTK_BUTTON_BOX (dialog_action_area1), GTK_BUTTONBOX_END);
-
-  cancelbutton1 = gtk_button_new_from_stock ("gtk-cancel");
-  gtk_widget_show (cancelbutton1);
-  gtk_dialog_add_action_widget (GTK_DIALOG (dialog1), cancelbutton1, GTK_RESPONSE_CANCEL);
-  GTK_WIDGET_SET_FLAGS (cancelbutton1, GTK_CAN_DEFAULT);
-
-  okbutton1 = gtk_button_new_from_stock ("gtk-ok");
-  gtk_widget_show (okbutton1);
-  gtk_dialog_add_action_widget (GTK_DIALOG (dialog1), okbutton1, GTK_RESPONSE_OK);
-  GTK_WIDGET_SET_FLAGS (okbutton1, GTK_CAN_DEFAULT);
-
-  /* Store pointers to all widgets, for use by lookup_widget(). */
-  GLADE_HOOKUP_OBJECT_NO_REF (dialog1, dialog1, "dialog1");
-  GLADE_HOOKUP_OBJECT_NO_REF (dialog1, dialog_vbox1, "dialog_vbox1");
-  GLADE_HOOKUP_OBJECT (dialog1, vbox1, "vbox1");
-  GLADE_HOOKUP_OBJECT (dialog1, label1, "label1");
-  GLADE_HOOKUP_OBJECT (dialog1, entry1, "entry1");
-  GLADE_HOOKUP_OBJECT_NO_REF (dialog1, dialog_action_area1, "dialog_action_area1");
-  GLADE_HOOKUP_OBJECT (dialog1, cancelbutton1, "cancelbutton1");
-  GLADE_HOOKUP_OBJECT (dialog1, okbutton1, "okbutton1");
-
-  return dialog1;
-}
-

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_pipe.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_pipe.cpp	2009-07-03 08:55:54 UTC (rev 4990)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_pipe.cpp	2009-07-03 10:11:38 UTC (rev 4991)
@@ -1,133 +0,0 @@
-#include "ADM_toolkitGtk.h"
-#include "prefs.h"
-
-static GtkWidget	*create_dialog1 (void);
-
-uint8_t DIA_pipe(char **cmd,char **param)
-{
-	GtkWidget *dialog;
-
-	char *str;
-	uint8_t ret=0;
-
-	gint r;
-
-#define FILL_ENTRY(widget_name,value) {		 \
-gtk_editable_delete_text(GTK_EDITABLE(lookup_widget(dialog,#widget_name)), 0,-1);\
-gtk_editable_insert_text(GTK_EDITABLE(lookup_widget(dialog,#widget_name)), str, strlen(str), &r);}
-
-	dialog=create_dialog1();
-	gtk_transient(dialog);
-	*cmd=NULL;
-	*param=NULL;
-
-	if(!prefs->get(PIPE_CMD,&str)) str=NULL;
-	if(str)
-	{
-		FILL_ENTRY(entryName,left);
-	}
-	if(!prefs->get(PIPE_PARAM,&str)) str=NULL;
-	if(str)
-	{
-		FILL_ENTRY(entryParam,left);
-	}
-
-	ret=0;
-	if(gtk_dialog_run(GTK_DIALOG(dialog))==GTK_RESPONSE_OK)
-	{
-
-		// gchar *s;
-		// uint32_t val1;
-#define READ_ENTRY(widget_name)   gtk_editable_get_chars(GTK_EDITABLE (lookup_widget(dialog,#widget_name)), 0, -1);
-
-			str=READ_ENTRY(entryName);
-			if(strlen(str))
-			{
-				*cmd=ADM_strdup(str);;
-				prefs->set(PIPE_CMD,str);
-			}
-			str=READ_ENTRY(entryName);
-			if(strlen(str))
-			{
-				*param=ADM_strdup(str);;
-				prefs->set(PIPE_PARAM,str);
-			}
-			ret=1;
-	}
-
-	gtk_widget_destroy(dialog);
-
-	return ret;
-
-}
-GtkWidget*
-create_dialog1 (void)
-{
-  GtkWidget *dialog1;
-  GtkWidget *dialog_vbox1;
-  GtkWidget *vbox1;
-  GtkWidget *label1;
-  GtkWidget *entryName;
-  GtkWidget *label2;
-  GtkWidget *entryParam;
-  GtkWidget *dialog_action_area1;
-  GtkWidget *cancelbutton1;
-  GtkWidget *okbutton1;
-
-  dialog1 = gtk_dialog_new ();
-  gtk_window_set_title (GTK_WINDOW (dialog1), QT_TR_NOOP("Pipe to"));
-
-  dialog_vbox1 = GTK_DIALOG (dialog1)->vbox;
-  gtk_widget_show (dialog_vbox1);
-
-  vbox1 = gtk_vbox_new (FALSE, 0);
-  gtk_widget_show (vbox1);
-  gtk_box_pack_start (GTK_BOX (dialog_vbox1), vbox1, TRUE, TRUE, 0);
-
-  label1 = gtk_label_new (QT_TR_NOOP("Application path/name (/usr/bin/sox...)"));
-  gtk_widget_show (label1);
-  gtk_box_pack_start (GTK_BOX (vbox1), label1, FALSE, FALSE, 0);
-  gtk_label_set_justify (GTK_LABEL (label1), GTK_JUSTIFY_LEFT);
-
-  entryName = gtk_entry_new ();
-  gtk_widget_show (entryName);
-  gtk_box_pack_start (GTK_BOX (vbox1), entryName, FALSE, FALSE, 0);
-
-  label2 = gtk_label_new (QT_TR_NOOP("Full parameter line"));
-  gtk_widget_show (label2);
-  gtk_box_pack_start (GTK_BOX (vbox1), label2, FALSE, FALSE, 0);
-  gtk_label_set_justify (GTK_LABEL (label2), GTK_JUSTIFY_LEFT);
-
-  entryParam = gtk_entry_new ();
-  gtk_widget_show (entryParam);
-  gtk_box_pack_start (GTK_BOX (vbox1), entryParam, FALSE, FALSE, 0);
-
-  dialog_action_area1 = GTK_DIALOG (dialog1)->action_area;
-  gtk_widget_show (dialog_action_area1);
-  gtk_button_box_set_layout (GTK_BUTTON_BOX (dialog_action_area1), GTK_BUTTONBOX_END);
-
-  cancelbutton1 = gtk_button_new_from_stock ("gtk-cancel");
-  gtk_widget_show (cancelbutton1);
-  gtk_dialog_add_action_widget (GTK_DIALOG (dialog1), cancelbutton1, GTK_RESPONSE_CANCEL);
-  GTK_WIDGET_SET_FLAGS (cancelbutton1, GTK_CAN_DEFAULT);
-
-  okbutton1 = gtk_button_new_from_stock ("gtk-ok");
-  gtk_widget_show (okbutton1);
-  gtk_dialog_add_action_widget (GTK_DIALOG (dialog1), okbutton1, GTK_RESPONSE_OK);
-  GTK_WIDGET_SET_FLAGS (okbutton1, GTK_CAN_DEFAULT);
-
-  /* Store pointers to all widgets, for use by lookup_widget(). */
-  GLADE_HOOKUP_OBJECT_NO_REF (dialog1, dialog1, "dialog1");
-  GLADE_HOOKUP_OBJECT_NO_REF (dialog1, dialog_vbox1, "dialog_vbox1");
-  GLADE_HOOKUP_OBJECT (dialog1, vbox1, "vbox1");
-  GLADE_HOOKUP_OBJECT (dialog1, label1, "label1");
-  GLADE_HOOKUP_OBJECT (dialog1, entryName, "entryName");
-  GLADE_HOOKUP_OBJECT (dialog1, label2, "label2");
-  GLADE_HOOKUP_OBJECT (dialog1, entryParam, "entryParam");
-  GLADE_HOOKUP_OBJECT_NO_REF (dialog1, dialog_action_area1, "dialog_action_area1");
-  GLADE_HOOKUP_OBJECT (dialog1, cancelbutton1, "cancelbutton1");
-  GLADE_HOOKUP_OBJECT (dialog1, okbutton1, "okbutton1");
-
-  return dialog1;
-}
-

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_NONE/ADM_dialog/DIA_none.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_NONE/ADM_dialog/DIA_none.cpp	2009-07-03 08:55:54 UTC (rev 4990)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_NONE/ADM_dialog/DIA_none.cpp	2009-07-03 10:11:38 UTC (rev 4991)
@@ -66,7 +66,6 @@
 uint8_t DIA_vobsub(vobSubParam *param) {return 0;}
 uint8_t DIA_XVCDParam(char *title,COMPRESSION_MODE * mode, uint32_t * qz,
 		   				   uint32_t * br,uint32_t *fsize,FFcodecSetting *conf) {return 0;}
-uint8_t DIA_xvid4(COMPRES_PARAMS *incoming) {return 0;}
 uint8_t DIA_quota(char *) {return 0;}
 const char * GUI_getCustomScript(uint32_t nb) {return 0;}
 uint8_t DIA_RecentFiles( char **name ) {return 0;}

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/prefs.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/prefs.h	2009-07-03 08:55:54 UTC (rev 4990)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/prefs.h	2009-07-03 10:11:38 UTC (rev 4991)
@@ -28,10 +28,6 @@
 	CODECS_DVD_MATRIX,
 	CODECS_DVD_GOPSIZE,
 	CODECS_DVD_MAXBITRATE,
-	CODECS_XVID_ENCTYPE,
-	CODECS_XVID_QUANTIZER,
-	CODECS_XVID_BITRATE,
-	CODECS_XVID_FINALSIZE,
 	CODECS_PREFERREDCODEC,
 	FILTERS_SUBTITLE_FONTNAME,
 	FILTERS_SUBTITLE_CHARSET,
@@ -53,13 +49,6 @@
 	LASTFILES_FILE4,
 	LASTDIR_READ,
 	LASTDIR_WRITE,
-	LAME_CLI,
-	PIPE_CMD,
-	PIPE_PARAM,
-	LAME_PATH,
-	TOOLAME_PATH,
-	LVEMUX_PATH,
-	REQUANT_PATH,
 	MESSAGE_LEVEL,
 	FEATURE_SWAP_IF_A_GREATER_THAN_B,
 	FEATURE_SVCDRES_PREFEREDSOURCERATIO,

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/prefs.in
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/prefs.in	2009-07-03 08:55:54 UTC (rev 4990)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/prefs.in	2009-07-03 10:11:38 UTC (rev 4991)
@@ -31,10 +31,6 @@
 codecs.dvd.matrix,			UINT,	0,	0,	99999
 codecs.dvd.gopsize,			UINT,	12,	0,	99999
 codecs.dvd.maxbitrate,			UINT,	9000,	0,	9900
-codecs.xvid.enctype,			UINT,	0,	0,	99999
-codecs.xvid.quantizer,			UINT,	4,	2,	32
-codecs.xvid.bitrate,			UINT,	1500000,17,	5900000
-codecs.xvid.finalsize,			UINT,	700,	0,	3999
 codecs.preferredcodec,			STRING,	FFmpeg4
 #ifdef __WIN32
 filters.subtitle.fontname,		FILENAME, "C:\\Windows\\Fonts\\arial.ttf"
@@ -67,14 +63,6 @@
 lastfiles.file4,			FILENAME,	""
 lastdir_read,				FILENAME,	""
 lastdir_write,				FILENAME,	""
-# lame
-lame_cli,				STRING, ""
-pipe_cmd,				STRING, ""
-pipe_param,				STRING, ""
-lame_path,				STRING, ""
-toolame_path,				STRING, ""
-lvemux_path,				STRING, ""
-requant_path,				STRING, ""
 # 0 - no messages, 1 - only error messages, 2 - all messages
 message_level,				UINT,	2,	0,	2
 # feature



From gruntster at mail.berlios.de  Fri Jul  3 15:38:47 2009
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Fri, 3 Jul 2009 15:38:47 +0200
Subject: [Avidemux-svn-commit] r4992 - in
	branches/avidemux_2.5_branch_gruntster/platforms/windows:
	build_scripts/avidemux installer
Message-ID: <200907031338.n63DcliQ020064@sheep.berlios.de>

Author: gruntster
Date: 2009-07-03 15:38:42 +0200 (Fri, 03 Jul 2009)
New Revision: 4992

Modified:
   branches/avidemux_2.5_branch_gruntster/platforms/windows/build_scripts/avidemux/Package Notes.xml
   branches/avidemux_2.5_branch_gruntster/platforms/windows/installer/avidemux.nsi
Log:
[win32] update installer to include avcodec video encoder plugin

Modified: branches/avidemux_2.5_branch_gruntster/platforms/windows/build_scripts/avidemux/Package Notes.xml
===================================================================
--- branches/avidemux_2.5_branch_gruntster/platforms/windows/build_scripts/avidemux/Package Notes.xml	2009-07-03 10:11:38 UTC (rev 4991)
+++ branches/avidemux_2.5_branch_gruntster/platforms/windows/build_scripts/avidemux/Package Notes.xml	2009-07-03 13:38:42 UTC (rev 4992)
@@ -1,5 +1,28 @@
 <?xml version="1.0"?>
 <log>
+  <buildentry revision="4968" date="2009-06-27">
+    <comment>Updated ATK to version 1.26.0-1.</comment>
+    <comment>Updated GLib to version 2.20.3-1.</comment>
+    <comment>Updated GTK+ to version 2.16.2-1.</comment>
+    <comment>Updated libpng to version 1.2.37-1.</comment>
+    <comment>Updated Ogg to version 1.1.4.</comment>
+    <comment>Updated Pango to version 1.24.2-1.</comment>
+    <comment>Updated Qt to version 4.5.2.</comment>
+    <comment>Updated Vorbis to version 1.2.2.</comment>
+    <comment>Updated x264 to r1173.</comment>
+  </buildentry>
+  <buildentry revision="4944 [2.5.0 Final]" date="2009-06-23">
+    <comment>Updated x264 to r1170.</comment>
+  </buildentry>
+  <buildentry revision="4871" date="2009-05-25">
+    <comment>Updated x264 to r1159.</comment>
+  </buildentry>
+  <buildentry revision="4763" date="2009-04-26">
+    <comment>Added Netscape Portable Runtime version 4.7.4.</comment>
+    <comment>Updated Pango to version 1.24.1-1.</comment>
+    <comment>Updated Qt to version 4.5.1.</comment>
+    <comment>Updated SpiderMonkey to version 1.7.0.</comment>
+  </buildentry>
   <buildentry revision="4758" date="2009-04-22">
     <comment>Updated Avisynth Proxy GUI to version 2.08.</comment>
     <comment>Updated x264 to r1145.</comment>

Modified: branches/avidemux_2.5_branch_gruntster/platforms/windows/installer/avidemux.nsi
===================================================================
--- branches/avidemux_2.5_branch_gruntster/platforms/windows/installer/avidemux.nsi	2009-07-03 10:11:38 UTC (rev 4991)
+++ branches/avidemux_2.5_branch_gruntster/platforms/windows/installer/avidemux.nsi	2009-07-03 13:38:42 UTC (rev 4992)
@@ -463,6 +463,12 @@
 		${MementoSectionEnd}
 	SectionGroupEnd
 	SectionGroup "Video Encoders" SecGrpVideoEncoder
+		${MementoSection} "avcodec (multiple encoders)" SecVidEncAvcodec
+			SectionIn 1 2
+			SetOverwrite on
+			SetOutPath $INSTDIR\plugins\videoEncoder
+			${File} plugins\videoEncoder\libADM_vidEnc_avcodec.dll
+		${MementoSectionEnd}
 		${MementoSection} "x264 (MPEG-4 AVC)" SecVidEncX264
 			SectionIn 1 2
 			SetOverwrite on



From gruntster at mail.berlios.de  Sat Jul  4 18:19:22 2009
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Sat, 4 Jul 2009 18:19:22 +0200
Subject: [Avidemux-svn-commit] r4993 - in
	branches/avidemux_2.5_branch_gruntster: avidemux
	avidemux/ADM_codecs avidemux/ADM_editor avidemux/ADM_encoder
	avidemux/ADM_libraries/ADM_libmpeg2enc
	avidemux/ADM_outputs/oplug_avi avidemux/ADM_outputs/oplug_mp4
	plugins/ADM_videoEncoder/ADM_vidEnc_avcodec
	plugins/ADM_videoEncoder/ADM_vidEnc_x264
Message-ID: <200907041619.n64GJM1f004928@sheep.berlios.de>

Author: gruntster
Date: 2009-07-04 18:19:10 +0200 (Sat, 04 Jul 2009)
New Revision: 4993

Removed:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/ADM_theora_dec.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/ADM_theora_dec.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/ADM_theora_enc.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encdivx.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encdivx.h
Modified:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/ADM_mjpegEncode.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_editor/ADM_edit.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/ADM_vidEncode.hxx
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encffmpeg1.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encoder.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libmpeg2enc/ADM_mpe2enc.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_savesmart.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/gui_savenew.cpp
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/encoder.cpp
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/encoder.cpp
Log:
[vidEnc] more cleanup

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/ADM_mjpegEncode.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/ADM_mjpegEncode.cpp	2009-07-03 13:38:42 UTC (rev 4992)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/ADM_mjpegEncode.cpp	2009-07-04 16:19:10 UTC (rev 4993)
@@ -36,7 +36,6 @@
 #include "mjpegtools/jpegutils.h"
 }
 
-//#include "ADM_codecs/ADM_divxEncode.h"
 #include "ADM_codecs/ADM_mjpegEncode.h"
 
 //

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/ADM_theora_dec.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/ADM_theora_dec.cpp	2009-07-03 13:38:42 UTC (rev 4992)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/ADM_theora_dec.cpp	2009-07-04 16:19:10 UTC (rev 4993)
@@ -1,116 +0,0 @@
-/***************************************************************************
-                          ADM_theora_dec.cpp  -  description
-                             -------------------
-    begin                : Thu Sep 26 2002
-    copyright            : (C) 2002 by mean
-    email                : fixounet at free.fr
- ***************************************************************************/
-
-/***************************************************************************
- *                                                                         *
- *   This program is free software; you can redistribute it and/or modify  *
- *   it under the terms of the GNU General Public License as published by  *
- *   the Free Software Foundation; either version 2 of the License, or     *
- *   (at your option) any later version.                                   *
- *                                                                         *
- ***************************************************************************/
-
-#include "config.h"
-#include "ADM_default.h"
-
-#ifdef USE_THEORA
-#include "ADM_colorspace/colorspace.h"
-
-#include "ADM_codecs/ADM_codec.h"
-
-#include "ADM_codecs/ADM_theora_dec.h"
-//________________________________________________
-void
-decoderTheora::setParam (void)
-{
-  return;			// no param for ffmpeg
-}
-//-------------------------------
-decoderTheora::decoderTheora (uint32_t w, uint32_t h):decoders (w, h)
-{
-  memset (&_tinfo, 0, sizeof (_tinfo));
-  memset (&_tstate, 0, sizeof (_tstate));
-
-  _tinfo.width = _w;
-  _tinfo.height = _h;
-  _tinfo.fps_numerator = 25;
-  _tinfo.fps_denominator = 1;
-  _tinfo.aspect_numerator = 4;
-  _tinfo.aspect_denominator = 3;
-  _tinfo.quality = 9;
-
-  _tinfo.version_major = 3;
-  _tinfo.version_minor = 1;
-
-
-  theora_decode_init (&_tstate, &_tinfo);
-  printf ("\n Theora initialized\n");
-}
-
-
-//-------------------------------
-
-uint8_t
-  decoderTheora::uncompress (uint8_t * in, uint8_t * out, uint32_t len,
-			     uint32_t * flagz)
-{
-  int got_picture = 0;
-
-  if (len == 0)			// Null frame, silently skip
-    {
-      if (flagz)
-	*flagz = 0;
-      return 1;
-    }
-  ogg_packet ogg;
-
-  memset (&ogg, 0, sizeof (ogg));
-  ogg.packet = in;
-  ogg.bytes = len;
-  /*
-     typedef struct {
-     unsigned char *packet;
-     long  bytes;
-     long  b_o_s;
-     long  e_o_s;
-
-     ogg_int64_t  granulepos;
-
-     ogg_int64_t  packetno;      sequence number for decode; the framing
-     knows where there's a hole in the data,
-     but we need coupling so that the codec
-     (which is in a seperate abstraction
-     layer) also knows about the gap 
-     } ogg_packet; */
-  if (theora_decode_packetin (&_tstate, &ogg))
-    {
-      printf ("\n error decoding theora ..\n");
-      return 0;
-    }
-  yuv_buffer yuv;
-  theora_decode_YUVout (&_tstate, &yuv);
-  memcpy (out, yuv.y, _w * _h);
-  memset (out + _w * _h, 128, (_w * _h) >> 1);
-
-
-
-
-
-  return 1;
-}
-
-//_____________________________________________________
-
-decoderTheora::~decoderTheora ()
-{
-
-  printf ("Theora destroyed\n");
-  theora_clear (&_tstate);
-}
-
-#endif

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/ADM_theora_dec.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/ADM_theora_dec.h	2009-07-03 13:38:42 UTC (rev 4992)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/ADM_theora_dec.h	2009-07-04 16:19:10 UTC (rev 4993)
@@ -1,46 +0,0 @@
-/***************************************************************************
-                          ADM_theora_dec.h  -  description
-                             -------------------
-    begin                : Thu Sep 26 2002
-    copyright            : (C) 2002 by mean
-    email                : fixounet at free.fr
- ***************************************************************************/
-
-/***************************************************************************
- *                                                                         *
- *   This program is free software; you can redistribute it and/or modify  *
- *   it under the terms of the GNU General Public License as published by  *
- *   the Free Software Foundation; either version 2 of the License, or     *
- *   (at your option) any later version.                                   *
- *                                                                         *
- ***************************************************************************/
-#ifdef USE_THEORA
-#ifndef __theora__
-#define __theora__
-
-extern "C"
-{
-#include "theora/theora.h"
-}
-class decoderTheora:public decoders
-{
-protected:
-
-
-  theora_info _tinfo;
-  theora_state _tstate;
-
-
-
-public:
-    decoderTheora (uint32_t w, uint32_t h);
-    virtual ~ decoderTheora ();
-  virtual uint8_t uncompress (uint8_t * in, uint8_t * out, uint32_t len,
-			      uint32_t * flag = NULL);
-  virtual void setParam (void);
-
-
-};
-
-#endif
-#endif

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/ADM_theora_enc.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/ADM_theora_enc.h	2009-07-03 13:38:42 UTC (rev 4992)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/ADM_theora_enc.h	2009-07-04 16:19:10 UTC (rev 4993)
@@ -1,16 +0,0 @@
-/***************************************************************************
-                          ADM_theora_enc.h  -  description
-                             -------------------
-    begin                : Thu Sep 26 2002
-    copyright            : (C) 2002 by mean
-    email                : fixounet at free.fr
- ***************************************************************************/
-
-/***************************************************************************
- *                                                                         *
- *   This program is free software; you can redistribute it and/or modify  *
- *   it under the terms of the GNU General Public License as published by  *
- *   the Free Software Foundation; either version 2 of the License, or     *
- *   (at your option) any later version.                                   *
- *                                                                         *
- ***************************************************************************/

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/CMakeLists.txt	2009-07-03 13:38:42 UTC (rev 4992)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/CMakeLists.txt	2009-07-04 16:19:10 UTC (rev 4993)
@@ -1,5 +1,5 @@
 SET(ADM_codecs_SRCS 
-	ADM_codecs.cpp  ADM_ffmpeg.cpp  ADM_mjpegEncode.cpp  ADM_theora_dec.cpp
+	ADM_codecs.cpp  ADM_ffmpeg.cpp  ADM_mjpegEncode.cpp
 	ADM_ffmp43.cpp  ADM_mjpeg.cpp   ADM_uyvy.cpp)
 
 ADD_ADM_LIB_ALL_TARGETS(ADM_codecs ${ADM_codecs_SRCS})

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_editor/ADM_edit.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_editor/ADM_edit.cpp	2009-07-03 13:38:42 UTC (rev 4992)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_editor/ADM_edit.cpp	2009-07-04 16:19:10 UTC (rev 4993)
@@ -55,9 +55,6 @@
 #define MODULE_NAME MODULE_EDITOR
 #include "ADM_osSupport/ADM_debug.h"
 
-#ifdef USE_DIVX
-	#include "ADM_codecs/ADM_divx4.h"
-#endif
 #include "ADM_inputs/ADM_mpegdemuxer/dmx_indexer.h"
 #include "ADM_outputfmt.h"
 //#include "ADM_gui2/GUI_ui.h"
@@ -718,17 +715,12 @@
                                                                         GUI_Error_HIG(QT_TR_NOOP("Could not unpack the video"),QT_TR_NOOP( "Using backup decoder - not frame accurate."));
 									}
 								}
-#if  1 //def USE_DIVX
                                                                 if(count)
                                                                         GUI_Info_HIG(ADM_LOG_IMPORTANT,QT_TR_NOOP("Weird"),QT_TR_NOOP( "The unpacking succeedeed but the index is still not up to date."));
 								printf("\n Switching codec...\n");
 								delete vid->decoder;
 								vid->decoder=getDecoderVopPacked(info.fcc, info.width,info.height,0,NULL);
 								ispacked=1;
-#else
-								GUI_Info_HIG(ADM_LOG_IMPORTANT,QT_TR_NOOP("Troubles ahead"), QT_TR_NOOP("This a VOP packed AVI."));
-#endif
-
 							}
 
 						}

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/ADM_vidEncode.hxx
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/ADM_vidEncode.hxx	2009-07-03 13:38:42 UTC (rev 4992)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/ADM_vidEncode.hxx	2009-07-04 16:19:10 UTC (rev 4993)
@@ -20,7 +20,6 @@
 typedef enum 
 {
   CodecCopy,
-  CodecDivx,
   CodecFF,
   CodecMjpeg,
   CodecH263,

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/CMakeLists.txt	2009-07-03 13:38:42 UTC (rev 4992)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/CMakeLists.txt	2009-07-04 16:19:10 UTC (rev 4993)
@@ -1,6 +1,6 @@
 SET(ADM_encoder_SRCS 
 	adm_encConfig.cpp  adm_encffmpeg1.cpp  adm_encmjpeg.cpp     adm_encoder.cpp
-	adm_encCopy.cpp    adm_encdivx.cpp    adm_encffmpeg.cpp   adm_encmpeg2enc.cpp  adm_encRequant.cpp  adm_encyv12.cpp
+	adm_encCopy.cpp    adm_encffmpeg.cpp   adm_encmpeg2enc.cpp  adm_encRequant.cpp  adm_encyv12.cpp
 	ADM_pluginLoad.cpp ADM_externalEncoder.cpp)
 
 ADD_ADM_LIB_ALL_TARGETS(ADM_encoder ${ADM_encoder_SRCS})

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encdivx.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encdivx.cpp	2009-07-03 13:38:42 UTC (rev 4992)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encdivx.cpp	2009-07-04 16:19:10 UTC (rev 4993)
@@ -1,187 +0,0 @@
-/***************************************************************************
-                          adm_encdivx.cpp  -  description
-                             -------------------
-    begin                : Sun Jul 14 2002
-    copyright            : (C) 2002 by mean
-    email                : fixounet at free.fr
- ***************************************************************************/
-
-/***************************************************************************
- *                                                                         *
- *   This program is free software; you can redistribute it and/or modify  *
- *   it under the terms of the GNU General Public License as published by  *
- *   the Free Software Foundation; either version 2 of the License, or     *
- *   (at your option) any later version.                                   *
- *                                                                         *
- ***************************************************************************/
-
-#include <stdio.h>
-#include <stdlib.h>
-#include <math.h>
-#include <unistd.h>
-
-#include <time.h>
-#include <sys/time.h>
-#include "config.h"
-#ifdef USE_DIVX
-
-#include "fourcc.h"
-#include "avi_vars.h"
-#include "ADM_toolkit/toolkit.hxx"
-
-#include "ADM_encoder/ADM_vidEncode.hxx"
-
-//#include "ADM_video/ADM_vidEncode.hxx"
-
-#include "ADM_codecs/ADM_divxInc.h"
-#include "ADM_video/ADM_genvideo.hxx"
-#include "ADM_encoder/adm_encoder.h"
-#include "ADM_codecs/ADM_divxEncode.h"
-#include "ADM_encoder/adm_encdivx.h"
-
-extern int getCompressParams (COMPRESSION_MODE * mode, uint32_t * qz,
-			      uint32_t * br, uint32_t * fs);
-
-/*_________________________________________________*/
-EncoderDivx::EncoderDivx (DIVXConfig * config)
-{
-  _codec = NULL;
-  fd = NULL;
-  entries = NULL;
-  strcpy (_logname, "");
-  _frametogo = 0;
-  memcpy (&_param, &(config->generic), sizeof (_param));
-};
-//--------------------------------
-uint8_t
-EncoderDivx::configure (AVDMGenericVideoStream * instream, int useExistingLogFile)
-{
-  //  COMPRES_PARAMS par;
-
-  ADM_assert (instream);
-  ADV_Info *info;
-
-  info = instream->getInfo ();
-  _w = info->width;
-  _h = info->height;
-  _vbuffer = new uint8_t[_w * _h * 3];
-  ADM_assert (_vbuffer);
-
-
-  switch (_param.mode)
-    {
-    case COMPRESS_CQ:
-      _state = enc_CQ;
-      _codec = new divxEncoderCQ (_w, _h);
-      _codec->init (_param.qz, info->fps1000);
-      break;
-    case COMPRESS_CBR:
-      _state = enc_CBR;
-      _codec = new divxEncoderCBR (_w, _h);
-      _codec->init (_param.bitrate, info->fps1000);	//qz,bitrate,finalsize;
-      break;
-    case COMPRESS_2PASS:
-      _state = enc_Pass1;
-      _codec = new divxEncoderCQ (_w, _h);
-      _codec->init (2, info->fps1000);
-      break;
-    default:
-      ADM_assert (0);
-
-    }
-  _in = instream;
-  printf ("\n Divx Encoder , w: %lu h:%lu mode:%d", _w, _h, _state);
-  return 1;
-
-}
-
-
-
-uint8_t
-EncoderDivx::startPass1 (void)
-{
-  ADM_assert (_state == enc_Pass1);
-  _frametogo = 0;
-  printf ("\n Starting pass 1\n");
-  printf (" Creating logfile :%s\n", _logname);
-  fd = fopen (_logname, "wt");
-  if (!fd)
-    {
-      printf ("\n cannot create logfile !\n");
-      return 0;
-    }
-  return 1;
-}
-
-int EncoderDivx::getRequirements (void) { return 0; }
-
-uint8_t
-EncoderDivx::isDualPass (void)
-{
-  if ((_state == enc_Pass1) || (_state == enc_Pass2))
-    {
-      return 1;
-    }
-  return 0;
-
-}
-uint8_t
-EncoderDivx::setLogFile (const char *lofile, uint32_t nbframe)
-{
-  strcpy (_logname, lofile);
-  _frametogo = nbframe;
-  return 1;
-
-}
-
-//______________________________
-uint8_t
-EncoderDivx::encode (uint32_t frame, uint32_t * len, uint8_t * out,
-		     uint32_t * flags)
-{
-  uint32_t l, f;
-  myENC_RESULT enc;
-
-  ADM_assert (_codec);
-  ADM_assert (_in);
-
-  if (!_in->getFrameNumberNoAlloc (frame, &l, _vbuffer, &f))
-    {
-      printf ("\n Error : Cannot read incoming frame !");
-      return 0;
-    }
-
-  switch (_state)
-    {
-    case enc_CBR:
-    case enc_CQ:
-      return _codec->encode (_vbuffer, out, len, flags);
-      break;
-    case enc_Pass1:
-
-      break;
-
-    default:
-      ADM_assert (0);
-    }
-  return 0;
-}
-
-//_______________________________
-uint8_t
-EncoderDivx::stop (void)
-{
-  delete _codec;
-  _codec = 0;
-  return 1;
-
-}
-
-uint8_t
-EncoderDivx::startPass2 (void)
-{
-
-  return 0;
-}
-
-#endif

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encdivx.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encdivx.h	2009-07-03 13:38:42 UTC (rev 4992)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encdivx.h	2009-07-04 16:19:10 UTC (rev 4993)
@@ -1,59 +0,0 @@
-/***************************************************************************
-                          adm_encdivx.h  -  description
-                             -------------------
-    begin                : Sun Jul 14 2002
-    copyright            : (C) 2002 by mean
-    email                : fixounet at free.fr
- ***************************************************************************/
-
-/***************************************************************************
- *                                                                         *
- *   This program is free software; you can redistribute it and/or modify  *
- *   it under the terms of the GNU General Public License as published by  *
- *   the Free Software Foundation; either version 2 of the License, or     *
- *   (at your option) any later version.                                   *
- *                                                                         *
- ***************************************************************************/
-#ifndef __ADM_encoder_divx__
-#define __ADM_encoder_divx__
-typedef struct DIVXConfig
-{
-  COMPRES_PARAMS generic;
-} DIVXConfig;
-
-
-
-class EncoderDivx:public Encoder
-{
-
-protected:
-
-  divxEncoder * _codec;
-public:
-  EncoderDivx (DIVXConfig * conf);
-  virtual int getRequirements (void);
-  virtual uint8_t isDualPass (void);
-  virtual uint8_t configure (AVDMGenericVideoStream * instream, int useExistingLogFile);
-  virtual uint8_t encode (uint32_t frame, uint32_t * len, uint8_t * out,
-			  uint32_t * flags);
-  virtual uint8_t setLogFile (const char *p, uint32_t fr);
-  virtual uint8_t stop (void);
-  virtual uint8_t startPass2 (void);
-  virtual uint8_t startPass1 (void);
-  virtual const char *getCodecName (void)
-  {
-    return "DX50";
-  }
-  virtual const char *getFCCHandler (void)
-  {
-    return "divx";
-  }
-  virtual const char *getDisplayName (void)
-  {
-    return QT_TR_NOOP("DivX");
-  }
-
-};
-
-
-#endif

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encffmpeg1.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encffmpeg1.cpp	2009-07-03 13:38:42 UTC (rev 4992)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encffmpeg1.cpp	2009-07-04 16:19:10 UTC (rev 4993)
@@ -34,8 +34,6 @@
 
 #include "ADM_videoFilter.h"
 
-
-//#include "ADM_codecs/ADM_divxEncode.h"
 #include "ADM_codecs/ADM_ffmpeg.h"
 #include "ADM_encoder/adm_encoder.h"
 #include "ADM_encoder/adm_encffmpeg.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encoder.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encoder.cpp	2009-07-03 13:38:42 UTC (rev 4992)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encoder.cpp	2009-07-04 16:19:10 UTC (rev 4993)
@@ -35,12 +35,6 @@
 #include "ADM_videoFilter.h"
 #include "ADM_encoder/adm_encoder.h"
 
-#ifdef USE_DIVX
-#include "ADM_codecs/ADM_divxEncode.h"
-#include "ADM_encoder/adm_encdivx.h"
-
-#endif
-
 #ifdef USE_FFMPEG
 #include "ADM_codecs/ADM_ffmpeg.h"
 #include "ADM_encoder/adm_encffmpeg.h"
@@ -77,11 +71,6 @@
   printf ("\n Registering Encoders\n");
   printf ("*********************\n");
 
-#ifdef USE_DIVX
-  nb_encoder++;
-  printf ("DivX encoder registered\n");
-#endif
-
 #ifdef USE_FFMPEG
   nb_encoder++;
   printf ("MJPEG encoder registered\n");

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libmpeg2enc/ADM_mpe2enc.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libmpeg2enc/ADM_mpe2enc.cpp	2009-07-03 13:38:42 UTC (rev 4992)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libmpeg2enc/ADM_mpe2enc.cpp	2009-07-04 16:19:10 UTC (rev 4993)
@@ -36,7 +36,6 @@
 
 //#include "ADM_colorspace/colorspace.h"
 #include "ADM_encoder/ADM_vidEncode.hxx"
-//#include "ADM_codecs/ADM_divxEncode.h"
 #include "ADM_mpeg2enc.h"
 #include "ADM_encoder/adm_encffmatrix.h"
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_savesmart.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_savesmart.cpp	2009-07-03 13:38:42 UTC (rev 4992)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_savesmart.cpp	2009-07-04 16:19:10 UTC (rev 4993)
@@ -399,12 +399,6 @@
 
   if(  isMpeg4Compatible(info.fcc) )
   	{
-/*	
-#ifdef USE_DIVX		 
-		 	 _encoder = new divxEncoderCQ (info.width, info.height);
-	   
-#else			
-*/
 // 	uint8_t				setConfig(FFcodecSetting *set);	
 			ffmpegEncoderCQ *tmp;		
 			tmp = new ffmpegEncoderCQ (info.width, info.height,FF_MPEG4);					
@@ -413,9 +407,6 @@
 			printf("\n init qz %ld\n",qz);
 	    		ret= tmp->init (qz,25000);
 			_encoder=tmp;
-/*			
-#endif		  		  
-*/
 		
 #warning 25 fps hardcoded
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp	2009-07-03 13:38:42 UTC (rev 4992)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp	2009-07-04 16:19:10 UTC (rev 4993)
@@ -39,8 +39,6 @@
 
 #include "ADM_encoder/ADM_vidEncode.hxx"
 #include "ADM_encoder/adm_encoder.h"
-//#include "ADM_codecs/ADM_divxEncode.h"
-//#include "ADM_encoder/adm_encdivx.h"
 
 #include "ADM_codecs/ADM_ffmpeg.h"
 #include "ADM_encoder/adm_encffmpeg.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/gui_savenew.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/gui_savenew.cpp	2009-07-03 13:38:42 UTC (rev 4992)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/gui_savenew.cpp	2009-07-04 16:19:10 UTC (rev 4993)
@@ -27,7 +27,6 @@
 
 #include "ADM_videoFilter.h"
 #include "ADM_videoFilter_internal.h"
-//#include "ADM_codecs/ADM_divxEncode.h"
 #include "ADM_encoder/ADM_vidEncode.hxx"
 
 #include "ADM_outputs/oplug_avi/op_aviwrite.hxx"

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/encoder.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/encoder.cpp	2009-07-03 13:38:42 UTC (rev 4992)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/encoder.cpp	2009-07-04 16:19:10 UTC (rev 4993)
@@ -18,7 +18,7 @@
 #include "dvEncoder.h"
 #include "ffv1Encoder.h"
 #include "ffvhuffEncoder.h"
-#include "HuffyuvEncoder.h"
+#include "huffyuvEncoder.h"
 #include "ADM_inttype.h"
 
 int uiType;

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/encoder.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/encoder.cpp	2009-07-03 13:38:42 UTC (rev 4992)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/encoder.cpp	2009-07-04 16:19:10 UTC (rev 4993)
@@ -534,6 +534,8 @@
 		_seiUserData = NULL;
 		_seiUserDataLen = 0;
 	}
+
+	return ADM_VIDENC_ERR_SUCCESS;
 }
 
 void x264Encoder::close(void)



From gruntster at mail.berlios.de  Sat Jul  4 22:58:46 2009
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Sat, 4 Jul 2009 22:58:46 +0200
Subject: [Avidemux-svn-commit] r4994 -
	branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4
Message-ID: <200907042058.n64KwkQ0032005@sheep.berlios.de>

Author: gruntster
Date: 2009-07-04 22:58:39 +0200 (Sat, 04 Jul 2009)
New Revision: 4994

Modified:
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.h
Log:
[x264] fix loading of Auto idc level setting

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp	2009-07-04 16:19:10 UTC (rev 4993)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp	2009-07-04 20:58:39 UTC (rev 4994)
@@ -43,7 +43,7 @@
 	static const int _predefinedARs[aspectRatioCount][2] = {{16, 15}, {64, 45}, {8, 9}, {32, 27}};
 
 	// Mappings for x264 array index -> UI combobox index
-	static const uint8_t _idcLevel[idcLevelCount] = {-1, 1, 11, 12, 13, 2, 21, 22, 3, 31, 32, 4, 41, 42, 5, 51};
+	static const int8_t _idcLevel[idcLevelCount] = {-1, 1, 11, 12, 13, 2, 21, 22, 3, 31, 32, 4, 41, 42, 5, 51};
 	static const uint8_t _videoFormat[videoFormatCount] = {5, 0, 1, 2, 3, 4};
 	static const uint8_t _colourPrimaries[colourPrimariesCount] = {2, 1, 4, 5, 6, 7, 8};
 	static const uint8_t _transferCharacteristics[transferCharacteristicsCount] = {2, 1, 4, 5, 8, 9, 10, 6, 7};
@@ -533,6 +533,22 @@
 	return valueIndex;
 }
 
+int x264ConfigDialog::getValueIndexInArray(int8_t value, const int8_t valueArray[], int elementCount)
+{
+	int valueIndex = -1;
+
+	for (int index = 0; index < elementCount; index++)
+	{
+		if (valueArray[index] == value)
+		{
+			valueIndex = index;
+			break;
+		}
+	}
+
+	return valueIndex;
+}
+
 bool x264ConfigDialog::loadPresetSettings(vidEncOptions *encodeOptions, x264Options *options)
 {
 	bool origDisableGenericSlots = disableGenericSlots;

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.h	2009-07-04 16:19:10 UTC (rev 4993)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.h	2009-07-04 20:58:39 UTC (rev 4994)
@@ -25,7 +25,7 @@
 	int predefinedARs[aspectRatioCount][2];
 
 	static const int idcLevelCount = 16;
-	uint8_t idcLevel[idcLevelCount];
+	int8_t idcLevel[idcLevelCount];
 
 	static const int videoFormatCount = 6;
 	uint8_t videoFormat[videoFormatCount];
@@ -49,6 +49,7 @@
 	bool loadPresetSettings(vidEncOptions *encodeOptions, x264Options *options);
 	void loadSettings(vidEncOptions *encodeOptions, x264Options *options);
 	int getValueIndexInArray(uint8_t value, const uint8_t valueArray[], int elementCount);
+	int getValueIndexInArray(int8_t value, const int8_t valueArray[], int elementCount);
 	QString getUserConfigDirectory(void);
 	QString getSystemConfigDirectory(void);
 



From gruntster at mail.berlios.de  Sun Jul  5 00:57:58 2009
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Sun, 5 Jul 2009 00:57:58 +0200
Subject: [Avidemux-svn-commit] r4995 - in
	branches/avidemux_2.5_branch_gruntster/avidemux:
	ADM_UIs/ADM_CLI/src ADM_coreUI/include ADM_coreUI/src
Message-ID: <200907042257.n64MvwU1028063@sheep.berlios.de>

Author: gruntster
Date: 2009-07-05 00:57:50 +0200 (Sun, 05 Jul 2009)
New Revision: 4995

Modified:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_CLI/src/FAC_toggle.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/include/DIA_factory.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/src/DIA_factory.cpp
Log:
[dlgFactory] fix sizing of bitrate control

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_CLI/src/FAC_toggle.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_CLI/src/FAC_toggle.cpp	2009-07-04 20:58:39 UTC (rev 4994)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_CLI/src/FAC_toggle.cpp	2009-07-04 22:57:50 UTC (rev 4995)
@@ -225,6 +225,14 @@
  
 }
 
+int diaElemBitrate::getSize(void)
+{ 
+}
+
+void diaElemBitrate::setSize(int size)
+{ 
+}
+
 int diaElemBitrate::getRequiredLayout(void) { return 0; }
 
 void diaElemFile::changeFile(void)

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/include/DIA_factory.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/include/DIA_factory.h	2009-07-04 20:58:39 UTC (rev 4994)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/include/DIA_factory.h	2009-07-04 22:57:50 UTC (rev 4995)
@@ -59,7 +59,6 @@
 class diaElem
 {
   protected:
-    void    setSize(int z) {size=z;};
     int     readOnly;
     diaElem    *internalPointer;
 public:
@@ -71,7 +70,8 @@
   int       size; // Size of the widget in line
 
   diaElem(elemEnum num) {paramTitle=NULL;param=NULL;mySelf=num;myWidget=NULL;size=1;readOnly=0;internalPointer=NULL;};
-          int getSize(void) {return size;};
+  virtual int getSize(void) {return size;};
+  virtual void setSize(int z) {size=z;};
   virtual ~diaElem() {};
   virtual void setMe(void *dialog, void *opaque,uint32_t line)=0;
   virtual void getMe(void)=0;
@@ -406,7 +406,7 @@
 
 /*************************************************/
 #ifndef ADM_MINIMAL_UI_INTERFACE
-#include "ADM_encoder/ADM_vidEncode.hxx"
+#include "../../ADM_encoder/ADM_vidEncode.hxx"
 typedef diaElem  *(CREATE_BITRATE_T)(COMPRES_PARAMS *p,const char *toggleTitle,const char *tip);
 class diaElemBitrateBase : public diaElem
 {
@@ -430,6 +430,8 @@
   void getMe(void);
   void setMaxQz(uint32_t qz);
   void setMinQz(uint32_t qz);
+  int getSize(void);
+  void setSize(int size);
   
   void updateMe(void);
   int getRequiredLayout(void);

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/src/DIA_factory.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/src/DIA_factory.cpp	2009-07-04 20:58:39 UTC (rev 4994)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/src/DIA_factory.cpp	2009-07-04 22:57:50 UTC (rev 4995)
@@ -333,6 +333,16 @@
 	Factory->DestroyBitrate(internalPointer);
 	internalPointer=NULL;
 }
+int diaElemBitrate::getSize(void)
+{ 
+	ADM_assert(internalPointer); 
+	return internalPointer->getSize(); 
+}
+void diaElemBitrate::setSize(int size)
+{ 
+	ADM_assert(internalPointer); 
+	internalPointer->setSize(size); 
+}
 void diaElemBitrate::updateMe()
 {
 	



From gruntster at mail.berlios.de  Sun Jul  5 19:24:27 2009
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Sun, 5 Jul 2009 19:24:27 +0200
Subject: [Avidemux-svn-commit] r4996 -
	branches/avidemux_2.5_branch_gruntster/cmake
Message-ID: <200907051724.n65HOROU008051@sheep.berlios.de>

Author: gruntster
Date: 2009-07-05 19:24:10 +0200 (Sun, 05 Jul 2009)
New Revision: 4996

Modified:
   branches/avidemux_2.5_branch_gruntster/cmake/admFFmpegBuild.cmake
Log:
[ffmpeg] oops, actually enable valid encoders

Modified: branches/avidemux_2.5_branch_gruntster/cmake/admFFmpegBuild.cmake
===================================================================
--- branches/avidemux_2.5_branch_gruntster/cmake/admFFmpegBuild.cmake	2009-07-04 22:57:50 UTC (rev 4995)
+++ branches/avidemux_2.5_branch_gruntster/cmake/admFFmpegBuild.cmake	2009-07-05 17:24:10 UTC (rev 4996)
@@ -51,7 +51,7 @@
 	set(FFMPEG_FLAGS ${FFMPEG_FLAGS} --enable-decoder=${decoder})
 endforeach (decoder)
 
-foreach (encoder ${FFMPEG_DECODERS})
+foreach (encoder ${FFMPEG_ENCODERS})
 	set(FFMPEG_FLAGS ${FFMPEG_FLAGS} --enable-encoder=${encoder})
 endforeach (encoder)
 



From gruntster at mail.berlios.de  Sun Jul  5 19:28:43 2009
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Sun, 5 Jul 2009 19:28:43 +0200
Subject: [Avidemux-svn-commit] r4997 -
	branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_mpegFF
Message-ID: <200907051728.n65HSh3m013411@sheep.berlios.de>

Author: gruntster
Date: 2009-07-05 19:28:38 +0200 (Sun, 05 Jul 2009)
New Revision: 4997

Modified:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp
Log:
[muxer] prevent crash when audio isn't appropriate for MPEG muxer

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp	2009-07-05 17:24:10 UTC (rev 4996)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp	2009-07-05 17:28:38 UTC (rev 4997)
@@ -93,7 +93,7 @@
 uint32_t  total_sample=0;
 ADMBitstream bitstream(0);
 uint32_t audioSum=0;
-DIA_encoding  *encoding;
+DIA_encoding  *encoding = NULL;
 int reuse = 0;
 
         twoPass=new char[strlen(name)+6];
@@ -491,7 +491,10 @@
         ret=1;
 finishvcdff:
         printf("[MPEGFF] Finishing..\n");
-        delete encoding;
+
+		if (encoding)
+			delete encoding;
+
         end();
 
         if(file)



From gruntster at mail.berlios.de  Sun Jul  5 23:57:06 2009
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Sun, 5 Jul 2009 23:57:06 +0200
Subject: [Avidemux-svn-commit] r4998 -
	branches/avidemux_2.5_branch_gruntster/cmake
Message-ID: <200907052157.n65Lv63Y024266@sheep.berlios.de>

Author: gruntster
Date: 2009-07-05 23:57:01 +0200 (Sun, 05 Jul 2009)
New Revision: 4998

Modified:
   branches/avidemux_2.5_branch_gruntster/cmake/admFFmpegBuild.cmake
Log:
[ffmpeg] enable rawvideo decoder

Modified: branches/avidemux_2.5_branch_gruntster/cmake/admFFmpegBuild.cmake
===================================================================
--- branches/avidemux_2.5_branch_gruntster/cmake/admFFmpegBuild.cmake	2009-07-05 17:28:38 UTC (rev 4997)
+++ branches/avidemux_2.5_branch_gruntster/cmake/admFFmpegBuild.cmake	2009-07-05 21:57:01 UTC (rev 4998)
@@ -9,7 +9,7 @@
 
 set(FFMPEG_DECODERS  adpcm_ima_amv  amv  bmp  cinepak  dnxhd  dvbsub  dvvideo  ffv1  ffvhuff  flv  fourxm  fraps  h263  h264  huffyuv  indeo2  indeo3
 					 interplay_video  mjpeg  mjpegb  mpeg1video  mpeg2video  mpeg4  mpegaudio_hp  mpegvideo  msmpeg4v1  msmpeg4v2  msmpeg4v3  msvideo1
-					 nellymoser  png  qdm2  rv10  rv20  snow  svq1  svq3  tscc  vc1  vcr1  vp3  vp5  vp6  vp6a  vp6f  wmav2  wmv1  wmv2  wmv3)
+					 nellymoser  png  qdm2  rawvideo rv10  rv20  snow  svq1  svq3  tscc  vc1  vcr1  vp3  vp5  vp6  vp6a  vp6f  wmav2  wmv1  wmv2  wmv3)
 set(FFMPEG_ENCODERS  ac3  dvbsub  dvvideo  ffv1  ffvhuff  flv  flv1  h263  h263p  huffyuv  mjpeg  mpeg1video  mpeg2video  mp2  mpeg4  msmpeg4v3  snow)
 set(FFMPEG_MUXERS  flv  ipod  matroska  mov  mp4  psp  tg2  tgp)
 set(FFMPEG_PARSERS  h263  h264  mpeg4video)



From gruntster at mail.berlios.de  Mon Jul  6 00:05:02 2009
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Mon, 6 Jul 2009 00:05:02 +0200
Subject: [Avidemux-svn-commit] r4999 -
	branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreImage/src
Message-ID: <200907052205.n65M528l025282@sheep.berlios.de>

Author: gruntster
Date: 2009-07-06 00:04:55 +0200 (Mon, 06 Jul 2009)
New Revision: 4999

Modified:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreImage/src/ADM_colorspace.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreImage/src/ADM_rgb.cpp
Log:
[scale] only use one scaling method with swscale

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreImage/src/ADM_colorspace.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreImage/src/ADM_colorspace.cpp	2009-07-05 21:57:01 UTC (rev 4998)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreImage/src/ADM_colorspace.cpp	2009-07-05 22:04:55 UTC (rev 4999)
@@ -33,9 +33,9 @@
 #define FLAGS()		ADD(MMX,MMX);				ADD(3DNOW,3DNOW);		ADD(MMXEXT,MMX2)	flags|=SWS_SPLINE;
 #else
 #ifdef ADM_CPU_ALTIVEC
-#define FLAGS() flags|=SWS_CPU_CAPS_ALTIVEC;
+#define FLAGS() flags|=SWS_CPU_CAPS_ALTIVEC | SWS_BICUBLIN;
 #else
-#define FLAGS()
+#define FLAGS() flags|=SWS_BICUBLIN;
 #endif
 #endif
 
@@ -118,7 +118,7 @@
 
 ADMColorspace::ADMColorspace(uint32_t w, uint32_t h, ADM_colorspace from,ADM_colorspace to)
 {
-  int flags=SWS_BICUBLIN;
+  int flags;
   FLAGS();
   
     width=w;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreImage/src/ADM_rgb.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreImage/src/ADM_rgb.cpp	2009-07-05 21:57:01 UTC (rev 4998)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreImage/src/ADM_rgb.cpp	2009-07-05 22:04:55 UTC (rev 4999)
@@ -45,9 +45,9 @@
 #define FLAGS()		ADD(MMX,MMX);				ADD(3DNOW,3DNOW);		ADD(MMXEXT,MMX2)	flags|=SWS_SPLINE;
 #else
 #ifdef ADM_CPU_ALTIVEC
-#define FLAGS() flags|=SWS_CPU_CAPS_ALTIVEC;
+#define FLAGS() flags|=SWS_CPU_CAPS_ALTIVEC | SWS_BICUBLIN;
 #else
-#define FLAGS()
+#define FLAGS() flags|=SWS_BICUBLIN;
 #endif
 #endif
 
@@ -336,7 +336,7 @@
  PixelFormat c;	
     clean();
     FLAGS();
-    flags|=SWS_BILINEAR;
+
     switch(_colorspace)
     {
                 case ADM_COLOR_RGB24:c=PIX_FMT_RGB24;break;
@@ -482,7 +482,7 @@
 PixelFormat c; 
 
         FLAGS();
-        flags|=SWS_BILINEAR;
+
         _context=NULL;
         w=ww;
         h=hh;



From gruntster at mail.berlios.de  Mon Jul  6 00:10:31 2009
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Mon, 6 Jul 2009 00:10:31 +0200
Subject: [Avidemux-svn-commit] r5000 -
	branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs
Message-ID: <200907052210.n65MAVvs025720@sheep.berlios.de>

Author: gruntster
Date: 2009-07-06 00:10:22 +0200 (Mon, 06 Jul 2009)
New Revision: 5000

Modified:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/ADM_ffmp43.cpp
Log:
[ffmpeg] fix ffmpeg logging

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/ADM_ffmp43.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/ADM_ffmp43.cpp	2009-07-05 22:04:55 UTC (rev 4999)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/ADM_ffmp43.cpp	2009-07-05 22:10:22 UTC (rev 5000)
@@ -778,6 +778,7 @@
     avcodec_register_all();
     lavformat_init();
     av_log_set_callback(adm_lavLogCallback);
+	av_log_set_level(AV_LOG_INFO);
 #ifdef ADM_DEBUG
   //  av_log_set_level(AV_LOG_DEBUG);
 #endif
@@ -785,7 +786,6 @@
 }
 void adm_lavLogCallback(void  *instance, int level, const char* fmt, va_list list)
 {
-    if(level>1) return;
     char buf[256];
   
     vsnprintf(buf, sizeof(buf), fmt, list);



From mean at mail.berlios.de  Mon Jul  6 07:48:00 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Mon, 6 Jul 2009 07:48:00 +0200
Subject: [Avidemux-svn-commit] r5001 - in branches/avidemux_2.6_branch_mean:
	avidemux/common avidemux/common/ADM_muxerGate/include
	avidemux/common/ADM_muxerGate/src avidemux/common/ADM_videoEncoder
	avidemux_core/ADM_coreVideoEncoder/include
	avidemux_plugins/ADM_videoEncoder/ffMpeg4
Message-ID: <200907060548.n665m0Em014862@sheep.berlios.de>

Author: mean
Date: 2009-07-06 07:47:57 +0200 (Mon, 06 Jul 2009)
New Revision: 5001

Modified:
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_muxerGate/include/ADM_videoProcess.h
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_muxerGate/src/ADM_createStreams.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoEncoder/ADM_dynVideoEncoder.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/gui_savenew.cpp
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoEncoder/include/ADM_coreVideoEncoder.h
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoEncoder/include/ADM_encoderConf.h
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/ffMpeg4/ADM_ffMpeg4.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/ffMpeg4/ADM_ffMpeg4.h
Log:
[Save] Cleanup + change api : setPassAndLogFile used for 2 pass

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_muxerGate/include/ADM_videoProcess.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_muxerGate/include/ADM_videoProcess.h	2009-07-05 22:10:22 UTC (rev 5000)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_muxerGate/include/ADM_videoProcess.h	2009-07-06 05:47:57 UTC (rev 5001)
@@ -42,6 +42,8 @@
 virtual     bool     getExtraData(uint32_t *extraLen, uint8_t **extraData) ;
 virtual     bool     providePts(void) {return false;}
 virtual     uint64_t getVideoDuration(void);
+virtual     bool     isDualPass(void) { ADM_assert(encoder);return encoder->isDualPass();}
+ADM_coreVideoEncoder *getEncoder(void) {return encoder;}
 };
 
 #endif

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_muxerGate/src/ADM_createStreams.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_muxerGate/src/ADM_createStreams.cpp	2009-07-05 22:10:22 UTC (rev 5000)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_muxerGate/src/ADM_createStreams.cpp	2009-07-06 05:47:57 UTC (rev 5001)
@@ -21,25 +21,27 @@
 #include "ADM_coreVideoEncoder.h"
 #include "ADM_muxer.h"
 #include "ADM_videoProcess.h"
-
+#if 0
 extern ADM_coreVideoEncoder *createVideoEncoderFromIndex(ADM_coreVideoFilter *chain,int index);
 /**
     \fn createVideoStream
     \brief Create encoder then VideoStream from filterChain
     @return created VideoStream
 */
-ADM_videoStream  *createVideoStream(ADM_videoFilterChain *chain,int index)
+ADM_videoStream  *createVideoStream(ADM_coreVideoEncoder *encoder)
 {
+   
+    ADM_videoStreamProcess *stream=new ADM_videoStreamProcess(encoder);
+    return stream;
+}
+
+ADM_coreVideoFilter *getLastFilter(void)
+{
     int sz=chain->size();
     ADM_assert(sz);
     ADM_coreVideoFilter *filter=(*chain)[sz-1];
     ADM_assert(filter);
-    ADM_coreVideoEncoder *encoder=createVideoEncoderFromIndex(filter,index);
-    if(!encoder)
-    {
-        printf("[createVideoEncoder] Cannot create encoder\n");
-        return NULL;
-    }
-    ADM_videoStreamProcess *stream=new ADM_videoStreamProcess(encoder);
-    return stream;
-}
\ No newline at end of file
+    return filter;
+}
+#endif
+//EOF

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoEncoder/ADM_dynVideoEncoder.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoEncoder/ADM_dynVideoEncoder.cpp	2009-07-05 22:10:22 UTC (rev 5000)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoEncoder/ADM_dynVideoEncoder.cpp	2009-07-06 05:47:57 UTC (rev 5001)
@@ -199,15 +199,6 @@
     ADM_videoEncoder6 *plugin=ListOfEncoders[index];
 
     ADM_coreVideoEncoder *enc=plugin->desc->create(chain);
-    if(enc)
-    {
-        if(false==enc->setup())
-        {
-            printf("[createVideoEncoderFromIndex] Cannot setup encoder\n");
-            delete enc;
-            return NULL;
-        }
-    }
     return enc;
 }
 /**

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/gui_savenew.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/gui_savenew.cpp	2009-07-05 22:10:22 UTC (rev 5000)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/gui_savenew.cpp	2009-07-06 05:47:57 UTC (rev 5001)
@@ -1,8 +1,8 @@
 /***************************************************************************
-                          gui_savenew.cpp  -  description
-                             -------------------
-    begin                : Fri May 3 2002
-    copyright            : (C) 2002 by mean
+           \file               gui_savenew.cpp
+           \brief Save movie files
+    
+    copyright            : (C) 2002/2009 by mean
     email                : fixounet at free.fr
  ***************************************************************************/
 
@@ -37,26 +37,105 @@
 #include "ADM_muxer.h"
 #include "ADM_muxerGate/include/ADM_videoCopy.h"
 #include "ADM_filterChain.h"
+#include "ADM_muxerGate/include/ADM_videoProcess.h"
+#include "ADM_bitstream.h"
+#include "ADM_filterChain.h"
 
 ADM_muxer               *ADM_MuxerSpawnFromIndex(int index);
 extern ADM_audioStream  *createEncodingStream(uint64_t startTime,int32_t shift);
-extern ADM_videoStream  *createVideoStream(ADM_videoFilterChain *chain,int index);
+extern ADM_videoStream  *createVideoStream(ADM_coreVideoEncoder *encoder);
+
 /**
+    \class admSaver
+    \brief Wrapper for saving
+
+*/
+class admSaver
+{
+protected:
+        const char           *fileName;
+        char                 *logFileName;
+        ADM_muxer            *muxer;
+        ADM_videoFilterChain *chain;
+        ADM_audioStream      *audio;
+        ADM_videoStream      *video;
+        ADM_audioStream      *astreams[1];
+        
+public:
+                admSaver(const char *out);
+                ~admSaver();
+        bool    save(void);
+        
+};
+/**
+    \fn admSaver
+*/
+ admSaver::admSaver(const char *out)
+{
+        fileName=out;
+        logFileName=new char[strlen(out)+10];
+        strcpy(logFileName,out);
+        strcat(logFileName,".stats");
+        muxer=NULL;
+        chain=NULL;
+        audio=NULL;
+        video=NULL;
+        astreams[0]=NULL;
+}
+/**
+    \fn ~admSaver
+*/
+admSaver::~admSaver()
+{
+ if(muxer) 
+        delete muxer;
+ muxer=NULL;
+ if(logFileName) 
+        delete [] logFileName;
+ logFileName=NULL;
+ if (audioProcessMode() && astreams[0])
+        delete astreams[0];
+ astreams[0]=NULL;
+ if(video)   
+        delete video;
+ video=NULL;
+  if(chain)
+  {
+        destroyVideoFilterChain(chain);
+   }
+   chain=NULL;
+
+    // encoder must not be destroyed, it will be destroyed with video
+}
+
+
+
+/**
     \fn A_Save
     \brief Instantiate & initiate streams to feed muxer
 */
 int A_Save(const char *name)
 {
+    admSaver *save=new admSaver(name);
+    bool r=save->save();
+    delete save;
+    return (int)r;
+}
+/**
+    \fn save
+*/
+bool admSaver::save(void)
+{
+    
     int ret=1;
-    ADM_muxer *muxer=NULL;
     int index=UI_GetCurrentFormat();
     int process=UI_getCurrentVCodec();
-    ADM_videoFilterChain *chain=NULL;
      uint64_t markerA,markerB;
         markerA=video_body->getMarkerAPts();
         markerB=video_body->getMarkerBPts();
     printf("[A_Save] Saving..\n");
 
+    
     if(!(muxer=ADM_MuxerSpawnFromIndex(index)))
     {
         GUI_Error_HIG("Muxer","Cannot instantiante muxer");
@@ -68,8 +147,6 @@
     int nbAStream=1;
     if(!video_body->getAudioStream(&audio))
     {
-        //GUI_Error_HIG("Audio","Cannot get audiostream");
-        //return 0;
         audio=NULL;
         nbAStream=0; // FIXME
     }else
@@ -84,21 +161,42 @@
     }else
     {
         // 1- create filter chain
+        //******************************
        
         chain=createVideoFilterChain(markerA,markerB);
         if(!chain)
         {
                 GUI_Error_HIG("Video","Cannot instantiante video Chain");
-                delete muxer;
-                return 0;
+                return false;
         }
         // 2- Create Encoder
-        video=createVideoStream(chain,process);
+        //********************
+        int sz=chain->size();
+        ADM_assert(sz);
+        ADM_coreVideoFilter  *last;
+        last=(*chain)[sz-1]; // Grab last filter
+        ADM_coreVideoEncoder *encoder=createVideoEncoderFromIndex(last,index);
+        if(!encoder)
+        {
+           GUI_Error_HIG("Video","Cannot create encoder");
+           return false;
+        }
+        // 3 dual Pass ?
+        //*****************
+        if(encoder->isDualPass())
+        {
+
+
+    
+
+
+        }
+        encoder->setup();
+        video= new ADM_videoStreamProcess(encoder);
         if(!video)
         {
                 GUI_Error_HIG("Video","Cannot create encoder");
-                destroyVideoFilterChain(chain);
-                delete muxer;
+                delete encoder;
                 return 0;
         }
         
@@ -107,34 +205,65 @@
     ADM_audioStream *astreams[1];
     if (!audioProcessMode())
     {
-        astreams[0]=audio;
-    }else   
+        astreams[0]=audio; //copy
+    }else    
     {
-        if(audio)
+        if(audio)   // Process
         {
             // Access..
             ADM_audioStream *access=createEncodingStream(markerA,0); // FIXME LEAK
             astreams[0]=access;
         }
     }
-    if(!muxer->open(name,video,nbAStream,astreams))
+    if(!muxer->open(fileName,video,nbAStream,astreams))
     {
         GUI_Error_HIG("Muxer","Cannot open ");
         
     }else   
     {
+#if 0
+        if(process)
+        {
+            // Do we need to do 2 pass ?
+            ADM_videoStreamProcess *p=(ADM_videoStreamProcess *)video;
+            if(p->isDualPass())
+            {
+#define BUFFER_SIZE 1920*1800*3
+#warning hardcoded buffer size
+                printf("[Save] Performing Pass one,using %s as log file\n",logFile);
+                ADM_coreVideoEncoder *e=p->getEncoder();
+                ADM_assert(e);
+                e->setPassAndLogFile(1,logFile);
+            
+                ADMBitstream bitstream;
+    
+                uint8_t *buffer=new uint8_t[BUFFER_SIZE];
+                bitstream.data=buffer;
+                bitstream.bufferSize=BUFFER_SIZE;
+                
+                while(e->encode(&bitstream))
+                {
+
+                }
+                delete [] buffer;
+                printf("[Save] Pass 1 done, restarting for pass 2\n");
+                delete video;video=NULL;
+                chain=createVideoFilterChain(markerA,markerB);
+                ADM_assert(chain); // the first one was successfull, less check...
+                video=createVideoStream(encoder);
+                ADM_assert(video);
+                p=(ADM_videoStreamProcess *)video;
+                ADM_assert(p);
+                e=p->getEncoder();
+                ADM_assert(e);
+                e->setPassAndLogFile(2,logFile);
+            }
+
+        } // End of 2 pass...
+#endif
         muxer->save();
         muxer->close();
     }
-    //
-
-    if(muxer) delete muxer;
-    if (audioProcessMode() && astreams[0])
-        delete astreams[0];
-    delete video;
-    return ret;
+    return true;
 }
-// Leftovers....
-uint8_t  A_SaveAudioDualAudio(const char *inname)
-{
-}
+//EOF

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoEncoder/include/ADM_coreVideoEncoder.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoEncoder/include/ADM_coreVideoEncoder.h	2009-07-05 22:10:22 UTC (rev 5000)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoEncoder/include/ADM_coreVideoEncoder.h	2009-07-06 05:47:57 UTC (rev 5001)
@@ -50,10 +50,12 @@
                uint32_t    getHeight(void) {return source->getInfo()->height;}
                uint32_t    getFrameIncrement(void) {return source->getInfo()->frameIncrement;}
                uint64_t    getTotalDuration(void) {return source->getInfo()->totalDuration;}
+virtual        bool        setPassAndLogFile(int pass,const char *name) {return false;}
 };
 // Spawn a new encoder using the index from the menu = the index in the vector
 ADM_coreVideoEncoder *createVideoEncoderFromIndex(ADM_coreVideoFilter *chain,int index);
 bool                  videoEncoder6SelectByName(const char *name);
 bool                  videoEncoder6Configure(void);
 bool                  videoEncoder6_SetCurrentEncoder(uint32_t index);
+
 #endif
\ No newline at end of file

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoEncoder/include/ADM_encoderConf.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoEncoder/include/ADM_encoderConf.h	2009-07-05 22:10:22 UTC (rev 5000)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoEncoder/include/ADM_encoderConf.h	2009-07-06 05:47:57 UTC (rev 5001)
@@ -48,7 +48,7 @@
   COMPRESSION_MODE  mode;
   uint32_t          qz;           /// Quantizer
   uint32_t          bitrate;      /// In kb/s ?
-  uint32_t          finalsize;    /// In ?
+  uint32_t          finalsize;    /// In MB ?
   uint32_t          avg_bitrate;  /// avg_bitrate is in kb/s!!
   uint32_t          capabilities;
 }COMPRES_PARAMS;

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/ffMpeg4/ADM_ffMpeg4.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/ffMpeg4/ADM_ffMpeg4.cpp	2009-07-05 22:10:22 UTC (rev 5000)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/ffMpeg4/ADM_ffMpeg4.cpp	2009-07-06 05:47:57 UTC (rev 5001)
@@ -1,6 +1,6 @@
 /***************************************************************************
-                          \fn ADM_VideoEncoders
-                          \brief Internal handling of video encoders
+                          \fn ADM_ffMpeg4
+                          \brief Front end for libavcodec Mpeg4 asp encoder
                              -------------------
     
     copyright            : (C) 2002/2009 by mean
@@ -75,15 +75,87 @@
 ADM_ffMpeg4Encoder::ADM_ffMpeg4Encoder(ADM_coreVideoFilter *src) : ADM_coreVideoEncoderFFmpeg(src)
 {
     printf("[ffMpeg4Encoder] Creating.\n");
+    pass=0;
+    statFileName=NULL;
+    statFile=NULL;
 
 }
 /**
+    \fn setupPass
+    \brief Setup in case of multipass
+
+*/
+bool ADM_ffMpeg4Encoder::setupPass(void)
+{
+    int averageBitrate; // Fixme
+   
+    // Compute average bitrate
+
+        if(Settings.params.mode==COMPRESS_2PASS_BITRATE) averageBitrate=Settings.params.avg_bitrate*1000;
+            else
+            {
+                uint64_t duration=source->getInfo()->totalDuration; // in us
+                float f;
+                if(!duration) 
+                {
+                    printf("[ffMpeg4] No source duration!\n");
+                    return false;
+                }
+                f=Settings.params.finalsize; 
+                f=f*1024*1024*8; // in bits
+                f*=1000*1000;
+                f/=duration;
+                averageBitrate=(uint32_t)f;
+            }
+
+        printf("[ffmpeg4] Average bitrate =%"LU" kb/s\n",averageBitrate/1000);
+        switch(pass)
+        {
+                case 1:
+                    printf("[ffMpeg4] Setup-ing Pass 1\n");
+                    _context->flags |= CODEC_FLAG_PASS1;
+                    _context->bit_rate=averageBitrate;
+                    // Open stat file
+                    statFile=fopen(statFileName,"wt");
+                    if(!statFile)
+                    {
+                        printf("[ffmpeg] Cannot open statfile %s for writing\n",statFileName);
+                        return false;
+                    }
+                    break;
+                case 2:
+                    printf("[ffMpeg4] Setup-ing Pass 2\n");
+                    _context->flags |= CODEC_FLAG_PASS2;
+                    if(false==loadStatFile(statFileName))
+                    {
+                        printf("[ffmpeg4] Cannot load stat file\n");
+                        return false;
+                    }
+                    break;
+                default:
+                        printf("[ffmpeg] Pass=0, fail\n");
+                        return false;
+                    break;
+
+        }
+        return true;
+}
+/**
     \fn setup
 */
 bool ADM_ffMpeg4Encoder::setup(void)
 {
+    
     switch(Settings.params.mode)
     {
+      case COMPRESS_2PASS:
+      case COMPRESS_2PASS_BITRATE:
+           if(false==setupPass())
+            {
+                printf("[ffmpeg] Multipass setup failed\n");
+                return false;
+            }
+            break;
       case COMPRESS_SAME:
       case COMPRESS_CQ:
             _context->flags |= CODEC_FLAG_QSCALE;
@@ -109,6 +181,10 @@
 ADM_ffMpeg4Encoder::~ADM_ffMpeg4Encoder()
 {
     printf("[ffMpeg4Encoder] Destroying.\n");
+    if(statFile) fclose(statFile);
+    statFile=NULL;
+    if(statFileName) ADM_dealloc(statFileName);
+    statFileName=NULL;
     
 }
 
@@ -141,9 +217,18 @@
 
             if(image->flags & AVI_KEY_FRAME)    _frame.pict_type=FF_I_TYPE;
             else if(image->flags & AVI_B_FRAME) _frame.pict_type=FF_B_TYPE;
-            else                               _frame.pict_type=FF_P_TYPE;
+            else                                _frame.pict_type=FF_P_TYPE;
 
             break;
+      case COMPRESS_2PASS:
+      case COMPRESS_2PASS_BITRATE:
+            switch(pass)
+            {
+                case 1: 
+                        break;
+                case 2: 
+                        break; // Get Qz for this frame...
+            }
       case COMPRESS_CQ:
             _frame.quality = (int) floor (FF_QP2LAMBDA * Settings.params.qz+ 0.5);
             break;
@@ -162,6 +247,7 @@
         printf("[ffmpeg4] Error %d encoding video\n",sz);
         return false;
     }
+    
     if(sz==0) // no pic, probably pre filling, try again
         goto again;
 link:
@@ -200,6 +286,14 @@
       out->out_quantizer=(int) floor (_frame.quality / (float) FF_QP2LAMBDA);
     else
       out->out_quantizer =(int) floor (_context->coded_frame->quality / (float) FF_QP2LAMBDA);
+
+    // Update stats
+    if(Settings.params.mode==COMPRESS_2PASS   || Settings.params.mode==COMPRESS_2PASS_BITRATE)
+    {
+        if(pass==1)
+            if (_context->stats_out)
+                fprintf (statFile, "%s", _context->stats_out);
+    }
     return true;
 }
 /**
@@ -299,30 +393,54 @@
   prolog();
   return true;
 }
-
 /**
+    \fn setLogFile
+*/
+ bool         ADM_ffMpeg4Encoder::setPassAndLogFile(int pass,const char *name)
+{
+    if(!pass || pass >2) return false;
+    if(!name) return false;
+    this->pass=pass;
+    statFileName=ADM_strdup(name);
+    return true;
+}
+/**
     \fn isDualPass
 
 */
 bool         ADM_ffMpeg4Encoder::isDualPass(void) 
 {
-    if(Settings.params.mode==COMPRESS_2PASS) return true;
+    if(Settings.params.mode==COMPRESS_2PASS || Settings.params.mode==COMPRESS_2PASS_BITRATE ) return true;
     return false;
 
 }
 
 /**
-    \fn isDualPass
-
+    \fn loadStatFile
+    \brief load the stat file from pass 1
 */
-bool         ADM_ffMpeg4Encoder::startPass2(void) 
+bool ADM_ffMpeg4Encoder::loadStatFile(const char *file)
 {
-    // Redo a partial init
-    #warning TOTO
-    return true;
+  printf("[FFmpeg] Loading stat file :%s\n",file);
+  FILE *_statfile = fopen (file, "rb");
+  int statSize;
 
+  if (!_statfile)
+    {
+      printf ("[ffmpeg] internal file does not exists ?\n");
+      return false;
+    }
+
+  fseek (_statfile, 0, SEEK_END);
+  statSize = ftello (_statfile);
+  fseek (_statfile, 0, SEEK_SET);
+  _context->stats_in = (char *) ADM_alloc (statSize + 1);
+  _context->stats_in[statSize] = 0;
+  fread (_context->stats_in, statSize, 1, _statfile);
+  fclose(_statfile);
+  printf("[FFmpeg] stat file loaded ok\n");
+  return true;
 }
-
 /**
     \fn jpegConfigure
     \brief UI configuration for jpeg encoder

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/ffMpeg4/ADM_ffMpeg4.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/ffMpeg4/ADM_ffMpeg4.h	2009-07-05 22:10:22 UTC (rev 5000)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/ffMpeg4/ADM_ffMpeg4.h	2009-07-06 05:47:57 UTC (rev 5001)
@@ -87,9 +87,15 @@
 class ADM_ffMpeg4Encoder : public ADM_coreVideoEncoderFFmpeg
 {
 protected:
-               int              plane;
+               
                bool            presetContext(FFcodecSetting *set);
                bool            postEncode(ADMBitstream *out, uint32_t size);
+               bool            loadStatFile(const char *file);
+               bool            setupPass(void);
+               int             pass;
+               int             plane;
+               char            *statFileName;
+               FILE            *statFile;
 public:
 
                            ADM_ffMpeg4Encoder(ADM_coreVideoFilter *src);
@@ -99,7 +105,7 @@
 virtual const  char        *getFourcc(void) {return "DIVX";}
 
 virtual        bool         isDualPass(void) ;
-virtual        bool         startPass2(void) ;
+virtual        bool         setPassAndLogFile(int pass,const char *name); // Call this before setup if needed !
 };
 
 #endif



From mean at mail.berlios.de  Mon Jul  6 07:48:05 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Mon, 6 Jul 2009 07:48:05 +0200
Subject: [Avidemux-svn-commit] r5002 - in branches/avidemux_2.6_branch_mean:
	avidemux/common avidemux_core/ADM_coreVideoEncoder/src
Message-ID: <200907060548.n665m5Rw015062@sheep.berlios.de>

Author: mean
Date: 2009-07-06 07:48:05 +0200 (Mon, 06 Jul 2009)
New Revision: 5002

Modified:
   branches/avidemux_2.6_branch_mean/avidemux/common/gui_savenew.cpp
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoEncoder/src/ADM_coreVideoEncoderFFmpeg.cpp
Log:
[Save] Re layout code to handle cleanly 2 pass encoding

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/gui_savenew.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/gui_savenew.cpp	2009-07-06 05:47:57 UTC (rev 5001)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/gui_savenew.cpp	2009-07-06 05:48:05 UTC (rev 5002)
@@ -60,6 +60,10 @@
         ADM_audioStream      *audio;
         ADM_videoStream      *video;
         ADM_audioStream      *astreams[1];
+        uint64_t             markerA,markerB;
+        int                  muxerIndex;
+        int                  videoEncoderIndex;
+        ADM_coreVideoEncoder *handleFirstPass(ADM_coreVideoEncoder *pass1);
         
 public:
                 admSaver(const char *out);
@@ -81,6 +85,11 @@
         audio=NULL;
         video=NULL;
         astreams[0]=NULL;
+        markerA=video_body->getMarkerAPts();
+        markerB=video_body->getMarkerBPts();
+        muxerIndex=UI_GetCurrentFormat();
+        videoEncoderIndex=UI_getCurrentVCodec();
+        printf("[Save] Encoder index=%d\n",index);
 }
 /**
     \fn ~admSaver
@@ -121,22 +130,72 @@
     delete save;
     return (int)r;
 }
+
 /**
+    \fn handleFirstPass
+*/
+ADM_coreVideoEncoder *admSaver::handleFirstPass(ADM_coreVideoEncoder *pass1)
+{
+#define BUFFER_SIZE 1920*1800*3
+
+                printf("[Save] Performing Pass one,using %s as log file\n",logFileName);
+                pass1->setPassAndLogFile(1,logFileName);
+                if(false==pass1->setup())
+                {
+                    printf("[Save] setup failed for pass1 encoder\n");
+                    delete pass1;
+                    return NULL;
+                }
+                ADMBitstream bitstream;
+    
+                uint8_t *buffer=new uint8_t[BUFFER_SIZE];
+                bitstream.data=buffer;
+                bitstream.bufferSize=BUFFER_SIZE;
+                
+                while(pass1->encode(&bitstream))
+                {
+
+                }
+                delete [] buffer;
+                printf("[Save] Pass 1 done, restarting for pass 2\n");
+                // Destroy filter chain & create the new encoder
+                destroyVideoFilterChain(chain);
+                chain=NULL;
+                chain=createVideoFilterChain(markerA,markerB);
+                delete pass1;
+                if(!chain)
+                {
+                    printf("[Save] Cannot recreate video filter chain\n");
+                    return NULL;
+                }
+                int sz=chain->size();
+                ADM_assert(sz);
+                ADM_coreVideoFilter  *last;
+                last=(*chain)[sz-1]; // Grab last filter
+                ADM_coreVideoEncoder *pass2=createVideoEncoderFromIndex(last,videoEncoderIndex);
+                if(!pass2) 
+                {
+                    printf("[Save] Cannot create encoder for pass 2\n");
+                    return NULL;
+                }
+                pass2->setPassAndLogFile(2,logFileName);
+    return pass2;
+}
+/**
     \fn save
 */
 bool admSaver::save(void)
 {
     
     int ret=1;
-    int index=UI_GetCurrentFormat();
-    int process=UI_getCurrentVCodec();
-     uint64_t markerA,markerB;
-        markerA=video_body->getMarkerAPts();
-        markerB=video_body->getMarkerBPts();
+    
+    
+     
+     
     printf("[A_Save] Saving..\n");
 
     
-    if(!(muxer=ADM_MuxerSpawnFromIndex(index)))
+    if(!(muxer=ADM_MuxerSpawnFromIndex(muxerIndex)))
     {
         GUI_Error_HIG("Muxer","Cannot instantiante muxer");
         return 0;
@@ -155,7 +214,7 @@
     }
     ADM_videoStream *video=NULL;
     // Video Stream 
-    if(!process) // Copy
+    if(!videoEncoderIndex) // Copy
     {
         video=new ADM_videoStreamCopy(markerA,markerB);
     }else
@@ -175,7 +234,7 @@
         ADM_assert(sz);
         ADM_coreVideoFilter  *last;
         last=(*chain)[sz-1]; // Grab last filter
-        ADM_coreVideoEncoder *encoder=createVideoEncoderFromIndex(last,index);
+        ADM_coreVideoEncoder *encoder=createVideoEncoderFromIndex(last,videoEncoderIndex);
         if(!encoder)
         {
            GUI_Error_HIG("Video","Cannot create encoder");
@@ -185,13 +244,21 @@
         //*****************
         if(encoder->isDualPass())
         {
+            encoder=handleFirstPass(encoder); // Do pass 1 and switch to pass 2
+            if(!encoder)
+            {
+                printf("[Save] cannot create encoder for pass 2\n");
+                return false;
+            }
+        }
+        if(encoder->setup()==false)
+        {
+            GUI_Error_HIG("Video","Cannot setup codec. Bitrate too low ?");
+            delete encoder;
+            encoder=NULL;
+            return false;
 
-
-    
-
-
         }
-        encoder->setup();
         video= new ADM_videoStreamProcess(encoder);
         if(!video)
         {
@@ -221,46 +288,7 @@
         
     }else   
     {
-#if 0
-        if(process)
-        {
-            // Do we need to do 2 pass ?
-            ADM_videoStreamProcess *p=(ADM_videoStreamProcess *)video;
-            if(p->isDualPass())
-            {
-#define BUFFER_SIZE 1920*1800*3
-#warning hardcoded buffer size
-                printf("[Save] Performing Pass one,using %s as log file\n",logFile);
-                ADM_coreVideoEncoder *e=p->getEncoder();
-                ADM_assert(e);
-                e->setPassAndLogFile(1,logFile);
-            
-                ADMBitstream bitstream;
-    
-                uint8_t *buffer=new uint8_t[BUFFER_SIZE];
-                bitstream.data=buffer;
-                bitstream.bufferSize=BUFFER_SIZE;
-                
-                while(e->encode(&bitstream))
-                {
 
-                }
-                delete [] buffer;
-                printf("[Save] Pass 1 done, restarting for pass 2\n");
-                delete video;video=NULL;
-                chain=createVideoFilterChain(markerA,markerB);
-                ADM_assert(chain); // the first one was successfull, less check...
-                video=createVideoStream(encoder);
-                ADM_assert(video);
-                p=(ADM_videoStreamProcess *)video;
-                ADM_assert(p);
-                e=p->getEncoder();
-                ADM_assert(e);
-                e->setPassAndLogFile(2,logFile);
-            }
-
-        } // End of 2 pass...
-#endif
         muxer->save();
         muxer->close();
     }

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoEncoder/src/ADM_coreVideoEncoderFFmpeg.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoEncoder/src/ADM_coreVideoEncoderFFmpeg.cpp	2009-07-06 05:47:57 UTC (rev 5001)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoEncoder/src/ADM_coreVideoEncoderFFmpeg.cpp	2009-07-06 05:48:05 UTC (rev 5002)
@@ -99,7 +99,7 @@
     // Let's put 100 us as time  base
     _context->time_base.den=10000LL;
     _context->time_base.num=1;
-    printf("[Time base] %d/%d\n", _context->time_base.num,_context->time_base.den);
+    //printf("[Time base] %d/%d\n", _context->time_base.num,_context->time_base.den);
     return true;
 }
 /**
@@ -206,4 +206,4 @@
     return true;
 
 }
-// EOF
\ No newline at end of file
+// EOF



From gruntster at mail.berlios.de  Mon Jul  6 08:42:45 2009
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Mon, 6 Jul 2009 08:42:45 +0200
Subject: [Avidemux-svn-commit] r5003 -
	branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs
Message-ID: <200907060642.n666gjPk007440@sheep.berlios.de>

Author: gruntster
Date: 2009-07-06 08:42:40 +0200 (Mon, 06 Jul 2009)
New Revision: 5003

Modified:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/ADM_ffmp43.cpp
Log:
[ffmpeg] filter log messages

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/ADM_ffmp43.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/ADM_ffmp43.cpp	2009-07-06 05:48:05 UTC (rev 5002)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/ADM_ffmp43.cpp	2009-07-06 06:42:40 UTC (rev 5003)
@@ -778,7 +778,6 @@
     avcodec_register_all();
     lavformat_init();
     av_log_set_callback(adm_lavLogCallback);
-	av_log_set_level(AV_LOG_INFO);
 #ifdef ADM_DEBUG
   //  av_log_set_level(AV_LOG_DEBUG);
 #endif
@@ -786,10 +785,13 @@
 }
 void adm_lavLogCallback(void  *instance, int level, const char* fmt, va_list list)
 {
-    char buf[256];
-  
-    vsnprintf(buf, sizeof(buf), fmt, list);
-    printf("[lavc] %s\n",buf);
+	if (level > AV_LOG_INFO)
+		return;
+
+	char buf[256];
+
+	vsnprintf(buf, sizeof(buf), fmt, list);
+	printf("[lavc] %s\n",buf);
 }
 
 // EOF



From gruntster at mail.berlios.de  Mon Jul  6 08:43:37 2009
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Mon, 6 Jul 2009 08:43:37 +0200
Subject: [Avidemux-svn-commit] r5004 -
	branches/avidemux_2.5_branch_gruntster/cmake
Message-ID: <200907060643.n666hbF7007488@sheep.berlios.de>

Author: gruntster
Date: 2009-07-06 08:43:32 +0200 (Mon, 06 Jul 2009)
New Revision: 5004

Modified:
   branches/avidemux_2.5_branch_gruntster/cmake/admFFmpegBuild.cmake
Log:
[ffmpeg] enable runtime cpu detection

Modified: branches/avidemux_2.5_branch_gruntster/cmake/admFFmpegBuild.cmake
===================================================================
--- branches/avidemux_2.5_branch_gruntster/cmake/admFFmpegBuild.cmake	2009-07-06 06:42:40 UTC (rev 5003)
+++ branches/avidemux_2.5_branch_gruntster/cmake/admFFmpegBuild.cmake	2009-07-06 06:43:32 UTC (rev 5004)
@@ -16,7 +16,7 @@
 set(FFMPEG_PROTOCOLS  file)
 set(FFMPEG_FLAGS  --enable-shared --disable-static --disable-filters --disable-protocols --disable-indevs --disable-outdevs --disable-bsfs
 				  --disable-parsers --disable-decoders --disable-encoders --disable-demuxers --disable-muxers --enable-postproc --enable-gpl 
-				  --prefix=${CMAKE_INSTALL_PREFIX})
+				  --enable-runtime-cpudetect --prefix=${CMAKE_INSTALL_PREFIX})
 
 include(admFFmpegPatch)
 include(admFFmpegPrepareTar)



From gruntster at mail.berlios.de  Mon Jul  6 08:45:16 2009
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Mon, 6 Jul 2009 08:45:16 +0200
Subject: [Avidemux-svn-commit] r5005 -
	branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder
Message-ID: <200907060645.n666jG3e007624@sheep.berlios.de>

Author: gruntster
Date: 2009-07-06 08:45:09 +0200 (Mon, 06 Jul 2009)
New Revision: 5005

Modified:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/ADM_pluginLoad.cpp
Log:
[vidEnc] pass valid encoderId when querying for plugin description

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/ADM_pluginLoad.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/ADM_pluginLoad.cpp	2009-07-06 06:43:32 UTC (rev 5004)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/ADM_pluginLoad.cpp	2009-07-06 06:45:09 UTC (rev 5005)
@@ -81,16 +81,19 @@
 */
 bool     ADM_ve_getEncoderInfo(int filter, const char **name, uint32_t *major,uint32_t *minor,uint32_t *patch)
 {
-    ADM_assert(filter>=0 && filter<ADM_videoEncoderPlugins.size());
-    ADM_vidEnc_plugin *plugin =ADM_videoEncoderPlugins[filter];
-        *name=plugin->getEncoderDescription(0);
-    int ma,mi,pa;
-        plugin->getEncoderVersion(0,&ma,&mi,&pa);
-        *major=(uint32_t)ma;
-        *minor=(uint32_t)mi;
-        *patch=(uint32_t)pa;
-        return true;
+	ADM_assert(filter >= 0 && filter < ADM_videoEncoderPlugins.size());
 
+	ADM_vidEnc_plugin *plugin = ADM_videoEncoderPlugins[filter];
+	int ma, mi, pa;
+
+	plugin->getEncoderVersion(0, &ma, &mi, &pa);
+
+	*name = plugin->getEncoderDescription(plugin->encoderId);
+	*major = (uint32_t)ma;
+	*minor = (uint32_t)mi;
+	*patch = (uint32_t)pa;
+
+	return true;
 }
 
 static int loadVideoEncoderPlugin(int uiType, const char *file)



From mean at mail.berlios.de  Mon Jul  6 20:11:44 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Mon, 6 Jul 2009 20:11:44 +0200
Subject: [Avidemux-svn-commit] r5006 -
	branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoEncoder/src
Message-ID: <200907061811.n66IBivj006168@sheep.berlios.de>

Author: mean
Date: 2009-07-06 20:11:44 +0200 (Mon, 06 Jul 2009)
New Revision: 5006

Modified:
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoEncoder/src/ADM_coreVideoEncoderFFmpeg.cpp
Log:
[ffCorevideo] Fix bit_rate being reset where it should not

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoEncoder/src/ADM_coreVideoEncoderFFmpeg.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoEncoder/src/ADM_coreVideoEncoderFFmpeg.cpp	2009-07-06 06:45:09 UTC (rev 5005)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoEncoder/src/ADM_coreVideoEncoderFFmpeg.cpp	2009-07-06 18:11:44 UTC (rev 5006)
@@ -95,10 +95,10 @@
     }
     
     // Eval fps
-    //uint64_t f=source->getInfo()->frameIncrement;
+    uint64_t f=source->getInfo()->frameIncrement;
     // Let's put 100 us as time  base
     _context->time_base.den=10000LL;
-    _context->time_base.num=1;
+    _context->time_base.num=f/100;
     //printf("[Time base] %d/%d\n", _context->time_base.num,_context->time_base.den);
     return true;
 }



From mean at mail.berlios.de  Mon Jul  6 20:11:47 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Mon, 6 Jul 2009 20:11:47 +0200
Subject: [Avidemux-svn-commit] r5008 -
	branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/ffMpeg4
Message-ID: <200907061811.n66IBl3Z006197@sheep.berlios.de>

Author: mean
Date: 2009-07-06 20:11:47 +0200 (Mon, 06 Jul 2009)
New Revision: 5008

Modified:
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/ffMpeg4/ADM_ffMpeg4.cpp
Log:
[ffMpeg4] silence + set average bitrate for both passes

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/ffMpeg4/ADM_ffMpeg4.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/ffMpeg4/ADM_ffMpeg4.cpp	2009-07-06 18:11:45 UTC (rev 5007)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/ffMpeg4/ADM_ffMpeg4.cpp	2009-07-06 18:11:47 UTC (rev 5008)
@@ -21,6 +21,12 @@
 #undef ADM_MINIMAL_UI_INTERFACE // we need the full UI
 #include "DIA_factory.h"
 
+#if 1
+#define aprintf(...) {}
+#else
+#define aprintf printf
+#endif
+
 static FFcodecSetting Settings=
 {
     {
@@ -109,12 +115,12 @@
             }
 
         printf("[ffmpeg4] Average bitrate =%"LU" kb/s\n",averageBitrate/1000);
+        _context->bit_rate=averageBitrate;
         switch(pass)
         {
                 case 1:
                     printf("[ffMpeg4] Setup-ing Pass 1\n");
                     _context->flags |= CODEC_FLAG_PASS1;
-                    _context->bit_rate=averageBitrate;
                     // Open stat file
                     statFile=fopen(statFileName,"wt");
                     if(!statFile)
@@ -159,6 +165,7 @@
       case COMPRESS_SAME:
       case COMPRESS_CQ:
             _context->flags |= CODEC_FLAG_QSCALE;
+  	    _context->bit_rate = 0;
             break;
       case COMPRESS_CBR:
               _context->bit_rate=Settings.params.bitrate*1000; // kb->b;
@@ -181,8 +188,11 @@
 ADM_ffMpeg4Encoder::~ADM_ffMpeg4Encoder()
 {
     printf("[ffMpeg4Encoder] Destroying.\n");
-    if(statFile) fclose(statFile);
-    statFile=NULL;
+    if(statFile)
+    {
+        fclose(statFile);
+        statFile=NULL;
+    }
     if(statFileName) ADM_dealloc(statFileName);
     statFileName=NULL;
     
@@ -238,7 +248,7 @@
             printf("[ffMpeg4] Unsupported encoding mode\n");
             return false;
     }
-    printf("[CODEC] Flags = 0x%x, QSCALE=%x, bit_rate=%d, quality=%d qz=%d incoming qz=%d\n",_context->flags,CODEC_FLAG_QSCALE,
+    aprintf("[CODEC] Flags = 0x%x, QSCALE=%x, bit_rate=%d, quality=%d qz=%d incoming qz=%d\n",_context->flags,CODEC_FLAG_QSCALE,
                                      _context->bit_rate,  _frame.quality, _frame.quality/ FF_QP2LAMBDA,q);     
     
     _frame.reordered_opaque=image->Pts;
@@ -268,7 +278,7 @@
         pict_type=_context->coded_frame->pict_type;
         keyframe=_context->coded_frame->key_frame;
     }
-    printf("[ffMpeg4] Out Quant :%d, pic type %d keyf %d\n",out->out_quantizer,pict_type,keyframe);
+    aprintf("[ffMpeg4] Out Quant :%d, pic type %d keyf %d\n",out->out_quantizer,pict_type,keyframe);
     out->len=size;
     out->flags=0;
     if(keyframe) 
@@ -387,7 +397,6 @@
   _context->dct_algo = 0;
   _context->idct_algo = 0;
   _context->p_masking = 0.0;
-  _context->bit_rate = 0;
 
   // Set frame rate den/num
   prolog();



From mean at mail.berlios.de  Mon Jul  6 20:11:45 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Mon, 6 Jul 2009 20:11:45 +0200
Subject: [Avidemux-svn-commit] r5007 -
	branches/avidemux_2.6_branch_mean/avidemux/common
Message-ID: <200907061811.n66IBjU2006181@sheep.berlios.de>

Author: mean
Date: 2009-07-06 20:11:45 +0200 (Mon, 06 Jul 2009)
New Revision: 5007

Modified:
   branches/avidemux_2.6_branch_mean/avidemux/common/gui_savenew.cpp
Log:
[UI] Add a progress bar for pass1 too

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/gui_savenew.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/gui_savenew.cpp	2009-07-06 18:11:44 UTC (rev 5006)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/gui_savenew.cpp	2009-07-06 18:11:45 UTC (rev 5007)
@@ -137,7 +137,17 @@
 ADM_coreVideoEncoder *admSaver::handleFirstPass(ADM_coreVideoEncoder *pass1)
 {
 #define BUFFER_SIZE 1920*1800*3
+ADM_coreVideoFilter  *last;
+                int sze=chain->size();
+                ADM_assert(sze);
+                last=(*chain)[sze-1]; // Grab last filter
 
+
+uint64_t videoDuration=last->getInfo()->totalDuration;
+
+
+
+                if(videoDuration<5000) videoDuration=5000;
                 printf("[Save] Performing Pass one,using %s as log file\n",logFileName);
                 pass1->setPassAndLogFile(1,logFileName);
                 if(false==pass1->setup())
@@ -151,11 +161,20 @@
                 uint8_t *buffer=new uint8_t[BUFFER_SIZE];
                 bitstream.data=buffer;
                 bitstream.bufferSize=BUFFER_SIZE;
-                
+                DIA_workingBase  *encoding=createWorking("Pass1");
+             
                 while(pass1->encode(&bitstream))
                 {
-
+                    if(bitstream.pts!=ADM_NO_PTS)
+                    {
+                        float f=100;
+                        f/=videoDuration;
+                        f*=bitstream.pts;
+                        uint32_t percent=(uint32_t)f;
+                        encoding->update(percent);
+                    }
                 }
+                delete encoding;
                 delete [] buffer;
                 printf("[Save] Pass 1 done, restarting for pass 2\n");
                 // Destroy filter chain & create the new encoder
@@ -170,7 +189,6 @@
                 }
                 int sz=chain->size();
                 ADM_assert(sz);
-                ADM_coreVideoFilter  *last;
                 last=(*chain)[sz-1]; // Grab last filter
                 ADM_coreVideoEncoder *pass2=createVideoEncoderFromIndex(last,videoEncoderIndex);
                 if(!pass2) 



From gruntster at mail.berlios.de  Mon Jul  6 20:19:13 2009
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Mon, 6 Jul 2009 20:19:13 +0200
Subject: [Avidemux-svn-commit] r5009 -
	branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec
Message-ID: <200907061819.n66IJDoN007607@sheep.berlios.de>

Author: gruntster
Date: 2009-07-06 20:19:08 +0200 (Mon, 06 Jul 2009)
New Revision: 5009

Modified:
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/encoder.cpp
Log:
[vidEnc] use a safer way of discriminating encoders in avcodec encoder plugin

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/encoder.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/encoder.cpp	2009-07-06 18:11:47 UTC (rev 5008)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/encoder.cpp	2009-07-06 18:19:08 UTC (rev 5009)
@@ -28,117 +28,118 @@
 static FFVHuffEncoder ffvhuff;
 static HuffyuvEncoder huffyuv;
 
-static AvcodecEncoder* encoders[] = { &dv, &ffv1, &ffvhuff, &huffyuv};
+static int encoderIds[] = { 0, 1, 2, 3 };
+static AvcodecEncoder* encoders[] = { &dv, &ffv1, &ffvhuff, &huffyuv };
 
 extern "C"
 {
 	void *avcodecEncoder_getPointers(int _uiType, int *count)
 	{
 		uiType = _uiType;
-		*count = sizeof(encoders) / sizeof(AvcodecEncoder*);
+		*count = sizeof(encoderIds) / sizeof(int);
 
-		return &encoders;
+		return &encoderIds;
 	}
 
 	const char* avcodecEncoder_getEncoderName(int encoderId)
 	{
-		AvcodecEncoder *encoder = (AvcodecEncoder*)encoderId;
+		AvcodecEncoder *encoder = encoders[encoderId];
 		return encoder->getEncoderName();
 	}
 
 	const char* avcodecEncoder_getEncoderType(int encoderId)
 	{
-		AvcodecEncoder *encoder = (AvcodecEncoder*)encoderId;
+		AvcodecEncoder *encoder = encoders[encoderId];
 		return encoder->getEncoderType();
 	}
 
 	const char* avcodecEncoder_getEncoderDescription(int encoderId)
 	{
-		AvcodecEncoder *encoder = (AvcodecEncoder*)encoderId;
+		AvcodecEncoder *encoder = encoders[encoderId];
 		return encoder->getEncoderDescription();
 	}
 
 	const char* avcodecEncoder_getFourCC(int encoderId)
 	{
-		AvcodecEncoder *encoder = (AvcodecEncoder*)encoderId;
+		AvcodecEncoder *encoder = encoders[encoderId];
 		return encoder->getFourCC();
 	}
 
 	int avcodecEncoder_getEncoderRequirements(int encoderId)
 	{
-		AvcodecEncoder *encoder = (AvcodecEncoder*)encoderId;
+		AvcodecEncoder *encoder = encoders[encoderId];
 		return encoder->getEncoderRequirements();
 	}
 
 	const char* avcodecEncoder_getEncoderGuid(int encoderId)
 	{
-		AvcodecEncoder *encoder = (AvcodecEncoder*)encoderId;
+		AvcodecEncoder *encoder = encoders[encoderId];
 		return encoder->getEncoderGuid();
 	}
 
 	int avcodecEncoder_isConfigurable(int encoderId)
 	{
-		AvcodecEncoder *encoder = (AvcodecEncoder*)encoderId;
+		AvcodecEncoder *encoder = encoders[encoderId];
 		return encoder->isConfigurable();
 	}
 
 	int avcodecEncoder_configure(int encoderId, vidEncConfigParameters *configParameters, vidEncVideoProperties *properties)
 	{
-		AvcodecEncoder *encoder = (AvcodecEncoder*)encoderId;
+		AvcodecEncoder *encoder = encoders[encoderId];
 		return encoder->configure(configParameters, properties);
 	}
 
 	int avcodecEncoder_getOptions(int encoderId, vidEncOptions *encodeOptions, char *pluginOptions, int bufferSize)
 	{
-		AvcodecEncoder *encoder = (AvcodecEncoder*)encoderId;
+		AvcodecEncoder *encoder = encoders[encoderId];
 		return encoder->getOptions(encodeOptions, pluginOptions, bufferSize);
 	}
 
 	int avcodecEncoder_setOptions(int encoderId, vidEncOptions *encodeOptions, char *pluginOptions)
 	{
-		AvcodecEncoder *encoder = (AvcodecEncoder*)encoderId;
+		AvcodecEncoder *encoder = encoders[encoderId];
 		return encoder->setOptions(encodeOptions, pluginOptions);
 	}
 
 	int avcodecEncoder_getPassCount(int encoderId)
 	{
-		AvcodecEncoder *encoder = (AvcodecEncoder*)encoderId;
+		AvcodecEncoder *encoder = encoders[encoderId];
 		return encoder->getPassCount();
 	}
 
 	int avcodecEncoder_getCurrentPass(int encoderId)
 	{
-		AvcodecEncoder *encoder = (AvcodecEncoder*)encoderId;
+		AvcodecEncoder *encoder = encoders[encoderId];
 		return encoder->getCurrentPass();
 	}
 
 	int avcodecEncoder_open(int encoderId, vidEncVideoProperties *properties)
 	{
-		AvcodecEncoder *encoder = (AvcodecEncoder*)encoderId;
+		AvcodecEncoder *encoder = encoders[encoderId];
 		return encoder->open(properties);
 	}
 
 	int avcodecEncoder_beginPass(int encoderId, vidEncPassParameters *passParameters)
 	{
-		AvcodecEncoder *encoder = (AvcodecEncoder*)encoderId;
+		AvcodecEncoder *encoder = encoders[encoderId];
 		return encoder->beginPass(passParameters);
 	}
 
 	int avcodecEncoder_encodeFrame(int encoderId, vidEncEncodeParameters *encodeParams)
 	{
-		AvcodecEncoder *encoder = (AvcodecEncoder*)encoderId;
+		AvcodecEncoder *encoder = encoders[encoderId];
 		return encoder->encodeFrame(encodeParams);
 	}
 
 	int avcodecEncoder_finishPass(int encoderId)
 	{
-		AvcodecEncoder *encoder = (AvcodecEncoder*)encoderId;
+		AvcodecEncoder *encoder = encoders[encoderId];
 		return encoder->finishPass();
 	}
 
 	int avcodecEncoder_close(int encoderId)
 	{
-		AvcodecEncoder *encoder = (AvcodecEncoder*)encoderId;
+		AvcodecEncoder *encoder = encoders[encoderId];
 		return encoder->close();
 	}
 }



From gruntster at mail.berlios.de  Mon Jul  6 20:37:46 2009
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Mon, 6 Jul 2009 20:37:46 +0200
Subject: [Avidemux-svn-commit] r5010 - in
	branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters:
	AddBorders AvisynthResize BlackenBorders Crop ForcedPP
	MplayerResize Pulldown Soften
Message-ID: <200907061837.n66Ibk5W009485@sheep.berlios.de>

Author: gruntster
Date: 2009-07-06 20:37:40 +0200 (Mon, 06 Jul 2009)
New Revision: 5010

Modified:
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/AddBorders/ADM_vidAddBorder.cpp
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/AvisynthResize/ADM_vidResize.cpp
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/BlackenBorders/ADM_vidBlackenBorders.cpp
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/Crop/ADM_vidCrop.cpp
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/ForcedPP/ADM_vidForcedPP.cpp
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/MplayerResize/ADM_vidMPLResize.cpp
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/Pulldown/ADM_vidPulldown.cpp
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/Soften/ADM_vidSoften.cpp
Log:
[filter] format filter parameters correctly on 64bit

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/AddBorders/ADM_vidAddBorder.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/AddBorders/ADM_vidAddBorder.cpp	2009-07-06 18:19:08 UTC (rev 5009)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/AddBorders/ADM_vidAddBorder.cpp	2009-07-06 18:37:40 UTC (rev 5010)
@@ -36,7 +36,7 @@
 
 char *AVDMVideoAddBorder::printConf( void )
 {
- 	ADM_FILTER_DECLARE_CONF(" Add Borders %lu x %lu --> %lu x %lu",
+ 	ADM_FILTER_DECLARE_CONF(" Add Borders %d x %d --> %d x %d",
  				_in->getInfo()->width,
  				_in->getInfo()->height,
  				_info.width,

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/AvisynthResize/ADM_vidResize.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/AvisynthResize/ADM_vidResize.cpp	2009-07-06 18:19:08 UTC (rev 5009)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/AvisynthResize/ADM_vidResize.cpp	2009-07-06 18:37:40 UTC (rev 5010)
@@ -44,7 +44,7 @@
 
 char *AVDMVideoStreamResize::printConf( void )
 {
- 	ADM_FILTER_DECLARE_CONF(" Resize %lu x %lu --> %lu x %lu",
+ 	ADM_FILTER_DECLARE_CONF(" Resize %d x %d --> %d x %d",
  				_in->getInfo()->width,
  				_in->getInfo()->height,
  				_info.width,

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/BlackenBorders/ADM_vidBlackenBorders.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/BlackenBorders/ADM_vidBlackenBorders.cpp	2009-07-06 18:19:08 UTC (rev 5009)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/BlackenBorders/ADM_vidBlackenBorders.cpp	2009-07-06 18:37:40 UTC (rev 5010)
@@ -62,7 +62,7 @@
 //********************************************
 char *AVDMVideoStreamBSMear::printConf( void )
 {
- 	ADM_FILTER_DECLARE_CONF(" Black l:%lu  r:%lu  u:%lu x d:%lu",
+ 	ADM_FILTER_DECLARE_CONF(" Black l:%d  r:%d  u:%d x d:%d",
  				_param->left,
  					_param->right,
  					_param->top,

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/Crop/ADM_vidCrop.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/Crop/ADM_vidCrop.cpp	2009-07-06 18:19:08 UTC (rev 5009)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/Crop/ADM_vidCrop.cpp	2009-07-06 18:37:40 UTC (rev 5010)
@@ -57,7 +57,7 @@
 
 char *AVDMVideoStreamCrop::printConf( void )
 {
- 	ADM_FILTER_DECLARE_CONF(" Crop %lu x %lu --> %lu x %lu",
+ 	ADM_FILTER_DECLARE_CONF(" Crop %d x %d --> %d x %d",
  				_in->getInfo()->width,
  				_in->getInfo()->height,
  				_info.width,

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/ForcedPP/ADM_vidForcedPP.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/ForcedPP/ADM_vidForcedPP.cpp	2009-07-06 18:19:08 UTC (rev 5009)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/ForcedPP/ADM_vidForcedPP.cpp	2009-07-06 18:37:40 UTC (rev 5010)
@@ -89,7 +89,7 @@
 }
 char *ADMVideoForcedPP::printConf( void )
 {
- 	ADM_FILTER_DECLARE_CONF(" Forced pp : %lu %lu",_param->postProcType,_param->postProcStrength);
+ 	ADM_FILTER_DECLARE_CONF(" Forced pp : %d %d",_param->postProcType,_param->postProcStrength);
         
 }
 

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/MplayerResize/ADM_vidMPLResize.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/MplayerResize/ADM_vidMPLResize.cpp	2009-07-06 18:19:08 UTC (rev 5009)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/MplayerResize/ADM_vidMPLResize.cpp	2009-07-06 18:37:40 UTC (rev 5010)
@@ -197,7 +197,7 @@
 }
 char *AVDMVideoStreamMPResize::printConf( void )
 {
- 	ADM_FILTER_DECLARE_CONF(" MPL Resize %lu x %lu --> %lu x %lu (%s)",
+ 	ADM_FILTER_DECLARE_CONF(" MPL Resize %d x %d --> %d x %d (%s)",
  				_in->getInfo()->width,
  				_in->getInfo()->height,
  				_info.width,

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/Pulldown/ADM_vidPulldown.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/Pulldown/ADM_vidPulldown.cpp	2009-07-06 18:19:08 UTC (rev 5009)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/Pulldown/ADM_vidPulldown.cpp	2009-07-06 18:37:40 UTC (rev 5010)
@@ -79,7 +79,7 @@
 //static Image in,out;
 			if(frame>=_info.nb_frames)
 			{
-				printf("out of bound frame (%lu / %lu)\n",frame,_info.nb_frames);
+				printf("out of bound frame (%d / %d)\n",frame,_info.nb_frames);
 				return 0;
 			}
 

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/Soften/ADM_vidSoften.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/Soften/ADM_vidSoften.cpp	2009-07-06 18:19:08 UTC (rev 5009)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/Soften/ADM_vidSoften.cpp	2009-07-06 18:37:40 UTC (rev 5010)
@@ -87,7 +87,7 @@
 }
 char *ADMVideoMaskedSoften::printConf( void )
 {
- 	ADM_FILTER_DECLARE_CONF(" Soften : radius: %lu l:%lu c:%lu", 
+ 	ADM_FILTER_DECLARE_CONF(" Soften : radius: %d l:%d c:%d", 
 		_param->radius,_param->luma, _param->chroma);
         
 }



From mean at mail.berlios.de  Tue Jul  7 20:34:01 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Tue, 7 Jul 2009 20:34:01 +0200
Subject: [Avidemux-svn-commit] r5011 -
	branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoEncoder/include
Message-ID: <200907071834.n67IY10V012733@sheep.berlios.de>

Author: mean
Date: 2009-07-07 20:34:00 +0200 (Tue, 07 Jul 2009)
New Revision: 5011

Modified:
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoEncoder/include/ADM_coreVideoEncoder.h
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoEncoder/include/ADM_coreVideoEncoderFFmpeg.h
Log:
[coreVideoEncoder] All destructors must be virtual

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoEncoder/include/ADM_coreVideoEncoder.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoEncoder/include/ADM_coreVideoEncoder.h	2009-07-06 18:37:40 UTC (rev 5010)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoEncoder/include/ADM_coreVideoEncoder.h	2009-07-07 18:34:00 UTC (rev 5011)
@@ -38,7 +38,7 @@
                             ADMImage            *image;
 public:
                             ADM_coreVideoEncoder(ADM_coreVideoFilter *src);
-                            ~ADM_coreVideoEncoder();
+virtual                     ~ADM_coreVideoEncoder();
 virtual        bool         setup(void) {return true;}    /// Call once before using            
 virtual        bool         encode (ADMBitstream * out)=0;
 

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoEncoder/include/ADM_coreVideoEncoderFFmpeg.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoEncoder/include/ADM_coreVideoEncoderFFmpeg.h	2009-07-06 18:37:40 UTC (rev 5010)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoEncoder/include/ADM_coreVideoEncoderFFmpeg.h	2009-07-07 18:34:00 UTC (rev 5011)
@@ -44,7 +44,7 @@
     virtual               bool             getExtraData(uint32_t *l,uint8_t **d) ;
 public:
                             ADM_coreVideoEncoderFFmpeg(ADM_coreVideoFilter *src);
-                            ~ADM_coreVideoEncoderFFmpeg();
+virtual                     ~ADM_coreVideoEncoderFFmpeg();
 
 };
 #endif
\ No newline at end of file



From mean at mail.berlios.de  Tue Jul  7 20:36:01 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Tue, 7 Jul 2009 20:36:01 +0200
Subject: [Avidemux-svn-commit] r5012 -
	branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/ffMpeg4
Message-ID: <200907071836.n67Ia1tZ013120@sheep.berlios.de>

Author: mean
Date: 2009-07-07 20:36:01 +0200 (Tue, 07 Jul 2009)
New Revision: 5012

Modified:
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/ffMpeg4/ADM_ffMpeg4.cpp
Log:
[ffMpeg4] slightly more verbose

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/ffMpeg4/ADM_ffMpeg4.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/ffMpeg4/ADM_ffMpeg4.cpp	2009-07-07 18:34:00 UTC (rev 5011)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/ffMpeg4/ADM_ffMpeg4.cpp	2009-07-07 18:36:01 UTC (rev 5012)
@@ -190,6 +190,7 @@
     printf("[ffMpeg4Encoder] Destroying.\n");
     if(statFile)
     {
+        printf("[ffMpeg4Encoder] Closing stat file\n");
         fclose(statFile);
         statFile=NULL;
     }
@@ -215,6 +216,7 @@
         }
         printf("[ffmpeg4] Popping delayed bframes (%d)\n",sz);
         goto link;
+        return false;
     }
     q=image->_Qp;
     
@@ -447,7 +449,14 @@
   _context->stats_in[statSize] = 0;
   fread (_context->stats_in, statSize, 1, _statfile);
   fclose(_statfile);
-  printf("[FFmpeg] stat file loaded ok\n");
+
+
+    int i;
+    char *p=_context->stats_in;
+   for(i=-1; p; i++){
+            p= strchr(p+1, ';');
+        }
+  printf("[FFmpeg] stat file loaded ok, %d frames found\n",i);
   return true;
 }
 /**



From mean at mail.berlios.de  Tue Jul  7 20:36:02 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Tue, 7 Jul 2009 20:36:02 +0200
Subject: [Avidemux-svn-commit] r5013 -
	branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/ffMpeg4
Message-ID: <200907071836.n67Ia2D1013134@sheep.berlios.de>

Author: mean
Date: 2009-07-07 20:36:02 +0200 (Tue, 07 Jul 2009)
New Revision: 5013

Modified:
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/ffMpeg4/ADM_ffMpeg4.h
Log:
[ffmpeg4] destrutor must be virtual

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/ffMpeg4/ADM_ffMpeg4.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/ffMpeg4/ADM_ffMpeg4.h	2009-07-07 18:36:01 UTC (rev 5012)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/ffMpeg4/ADM_ffMpeg4.h	2009-07-07 18:36:02 UTC (rev 5013)
@@ -99,7 +99,7 @@
 public:
 
                            ADM_ffMpeg4Encoder(ADM_coreVideoFilter *src);
-                           ~ADM_ffMpeg4Encoder();
+virtual                    ~ADM_ffMpeg4Encoder();
 virtual        bool        setup(void); 
 virtual        bool        encode (ADMBitstream * out);
 virtual const  char        *getFourcc(void) {return "DIVX";}



From mean at mail.berlios.de  Tue Jul  7 20:36:04 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Tue, 7 Jul 2009 20:36:04 +0200
Subject: [Avidemux-svn-commit] r5014 - in branches/avidemux_2.6_branch_mean:
	avidemux/common avidemux_core/ADM_coreVideoEncoder/src
Message-ID: <200907071836.n67Ia4wh013144@sheep.berlios.de>

Author: mean
Date: 2009-07-07 20:36:03 +0200 (Tue, 07 Jul 2009)
New Revision: 5014

Modified:
   branches/avidemux_2.6_branch_mean/avidemux/common/gui_savenew.cpp
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoEncoder/src/ADM_coreVideoEncoderFFmpeg.cpp
Log:
[Encoder] Fix 2 pass encoding with ffmpeg/mpeg4

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/gui_savenew.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/gui_savenew.cpp	2009-07-07 18:36:02 UTC (rev 5013)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/gui_savenew.cpp	2009-07-07 18:36:03 UTC (rev 5014)
@@ -162,7 +162,7 @@
                 bitstream.data=buffer;
                 bitstream.bufferSize=BUFFER_SIZE;
                 DIA_workingBase  *encoding=createWorking("Pass1");
-             
+                int nbFrames=0;
                 while(pass1->encode(&bitstream))
                 {
                     if(bitstream.pts!=ADM_NO_PTS)
@@ -173,15 +173,21 @@
                         uint32_t percent=(uint32_t)f;
                         encoding->update(percent);
                     }
+                    nbFrames++;
                 }
                 delete encoding;
                 delete [] buffer;
-                printf("[Save] Pass 1 done, restarting for pass 2\n");
+                delete pass1;
+                encoding=NULL;
+                buffer=NULL;
+                pass1=NULL;
+
+                printf("[Save] Pass 1 done, encoded %d frames, restarting for pass 2\n",nbFrames);
                 // Destroy filter chain & create the new encoder
                 destroyVideoFilterChain(chain);
                 chain=NULL;
                 chain=createVideoFilterChain(markerA,markerB);
-                delete pass1;
+                
                 if(!chain)
                 {
                     printf("[Save] Cannot recreate video filter chain\n");
@@ -197,6 +203,29 @@
                     return NULL;
                 }
                 pass2->setPassAndLogFile(2,logFileName);
+#if 0
+                buffer=new uint8_t[BUFFER_SIZE];
+                pass2->setup();
+                nbFrames=0;
+                bitstream.data=buffer;
+                encoding=createWorking("Pass2");
+                while(pass2->encode(&bitstream))
+                {
+                    if(bitstream.pts!=ADM_NO_PTS)
+                    {
+                        float f=100;
+                        f/=videoDuration;
+                        f*=bitstream.pts;
+                        uint32_t percent=(uint32_t)f;
+                        encoding->update(percent);
+                    }
+                    nbFrames++;
+                }
+                printf(": Pass2 done : %d frames this time\n",nbFrames);
+                delete [] buffer;
+                delete encoding;
+                
+#endif
     return pass2;
 }
 /**

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoEncoder/src/ADM_coreVideoEncoderFFmpeg.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoEncoder/src/ADM_coreVideoEncoderFFmpeg.cpp	2009-07-07 18:36:02 UTC (rev 5013)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoEncoder/src/ADM_coreVideoEncoderFFmpeg.cpp	2009-07-07 18:36:03 UTC (rev 5014)
@@ -41,6 +41,7 @@
     _context->height = h;
     _context->strict_std_compliance = -1;
     rgbBuffer=new uint8_t [(w+7)*(h+7)*4];
+    colorSpace=NULL;
 
 }
 /**



From mean at mail.berlios.de  Wed Jul  8 07:35:27 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Wed, 8 Jul 2009 07:35:27 +0200
Subject: [Avidemux-svn-commit] r5015 -
	branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoEncoder/src
Message-ID: <200907080535.n685ZRAv000785@sheep.berlios.de>

Author: mean
Date: 2009-07-08 07:35:25 +0200 (Wed, 08 Jul 2009)
New Revision: 5015

Modified:
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoEncoder/src/ADM_coreVideoEncoderFFmpeg.cpp
Log:
[ffMpeg4] Set correctly time base and frame pts, that fixes b frame handling

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoEncoder/src/ADM_coreVideoEncoderFFmpeg.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoEncoder/src/ADM_coreVideoEncoderFFmpeg.cpp	2009-07-07 18:36:03 UTC (rev 5014)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoEncoder/src/ADM_coreVideoEncoderFFmpeg.cpp	2009-07-08 05:35:25 UTC (rev 5015)
@@ -99,7 +99,10 @@
     uint64_t f=source->getInfo()->frameIncrement;
     // Let's put 100 us as time  base
     _context->time_base.den=10000LL;
-    _context->time_base.num=f/100;
+    if(f>=100)
+        _context->time_base.num=f/100;
+    else
+        _context->time_base.num=1;
     //printf("[Time base] %d/%d\n", _context->time_base.num,_context->time_base.den);
     return true;
 }
@@ -118,9 +121,18 @@
     }
     prolog();
     // put a time stamp...
-    if(image->Pts==ADM_NO_PTS) _frame.pts=AV_NOPTS_VALUE;
-    _frame.pts=(image->Pts)/100;
+    if(image->Pts==ADM_NO_PTS) 
+        _frame.pts=AV_NOPTS_VALUE;
+    else
+    {
+        float f=image->Pts,n=_context->time_base.num,d=_context->time_base.den;
+        f=f/100;
+        f=f/n;
+        _frame.pts=f;
+    }
     //
+    //printf("[PTS] :%"LU" num:%"LU" den:%"LU"\n",_frame.pts,_context->time_base.num,_context->time_base.den);
+    //
     switch(targetColorSpace)
     {
         case ADM_COLOR_YV12:      



From gruntster at mail.berlios.de  Wed Jul  8 15:35:28 2009
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Wed, 8 Jul 2009 15:35:28 +0200
Subject: [Avidemux-svn-commit] r5016 - in
	branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder:
	. common
Message-ID: <200907081335.n68DZSZN008292@sheep.berlios.de>

Author: gruntster
Date: 2009-07-08 15:35:21 +0200 (Wed, 08 Jul 2009)
New Revision: 5016

Added:
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/common/
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/common/PluginOptions.cpp
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/common/PluginOptions.h
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/common/PluginXmlOptions.cpp
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/common/PluginXmlOptions.h
Log:
[vidEnc] create a generic options class to handle most of the grunt work

Added: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/common/PluginOptions.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/common/PluginOptions.cpp	2009-07-08 05:35:25 UTC (rev 5015)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/common/PluginOptions.cpp	2009-07-08 13:35:21 UTC (rev 5016)
@@ -0,0 +1,313 @@
+ /***************************************************************************
+                              PluginOptions.cpp
+
+    begin                : Mon Apr 21 2008
+    copyright            : (C) 2008 by gruntster
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+
+#include <math.h>
+#include <libxml/parser.h>
+#include <libxml/xmlschemas.h>
+#include <sstream>
+#include <string>
+
+#include "config.h"
+#include "ADM_inttype.h"
+#include "ADM_files.h"
+#include "PluginOptions.h"
+#include "PluginXmlOptions.cpp"
+
+PluginOptions::PluginOptions(const char* tagPrefix, const char* schemaFile, unsigned int defaultEncodeMode, int defaultEncodeModeParameter)
+{
+	_tagPrefix = new char[strlen(tagPrefix) + 1];
+	strcpy(_tagPrefix, tagPrefix);
+
+	_schemaFile = new char[strlen(schemaFile) + 1];
+	strcpy(_schemaFile, schemaFile);
+
+	_configTagRoot = new char[strlen(tagPrefix) + 7];
+	strcpy(_configTagRoot, tagPrefix);
+	strcat(_configTagRoot, "Config");
+
+	_optionsTagRoot = new char[strlen(tagPrefix) + 8];
+	strcpy(_optionsTagRoot, tagPrefix);
+	strcat(_optionsTagRoot, "Options");
+
+	_configurationName = NULL;
+	_defaultEncodeMode = defaultEncodeMode;
+	_defaultEncodeModeParameter = defaultEncodeModeParameter;
+
+	reset();
+}
+
+PluginOptions::~PluginOptions(void)
+{
+	cleanUp();
+
+	if (_tagPrefix)
+	{
+		free(_tagPrefix);
+		_tagPrefix = NULL;
+	}
+
+	if (_schemaFile)
+	{
+		free(_schemaFile);
+		_schemaFile = NULL;
+	}
+}
+
+void PluginOptions::cleanUp(void)
+{
+	if (_configurationName)
+	{
+		free(_configurationName);
+		_configurationName = NULL;
+	}
+}
+
+void PluginOptions::reset(void)
+{
+	cleanUp();
+
+	setPresetConfiguration("<default>", PLUGIN_CONFIG_DEFAULT);
+}
+
+const char* PluginOptions::getSchemaFile()
+{
+	return _schemaFile;
+}
+
+const char* PluginOptions::getConfigTagRoot()
+{
+	return _configTagRoot;
+}
+
+const char* PluginOptions::getOptionsTagRoot()
+{
+	return _optionsTagRoot;
+}
+
+void PluginOptions::getPresetConfiguration(char** configurationName, PluginConfigType *configurationType)
+{
+	if (_configurationName)
+		*configurationName = strdup(_configurationName);
+	else
+		*configurationName = NULL;
+
+	*configurationType = _configurationType;
+}
+
+void PluginOptions::setPresetConfiguration(const char* configurationName, PluginConfigType configurationType)
+{
+	clearPresetConfiguration();
+
+	_configurationName = strdup(configurationName);
+	_configurationType = configurationType;
+}
+
+void PluginOptions::clearPresetConfiguration(void)
+{
+	if (_configurationName)
+		free(_configurationName);
+
+	_configurationName = strdup("<custom>");
+	_configurationType = PLUGIN_CONFIG_CUSTOM;
+}
+
+void PluginOptions::setEncodeOptionsToDefaults(void)
+{
+	_encodeOptions.encodeMode = _defaultEncodeMode;
+	_encodeOptions.encodeModeParameter = _defaultEncodeModeParameter;
+}
+
+vidEncOptions* PluginOptions::getEncodeOptions(void)
+{
+	vidEncOptions *encodeOptions = new vidEncOptions;
+
+	memcpy(encodeOptions, &_encodeOptions, sizeof(vidEncOptions));
+
+	return encodeOptions;
+}
+
+void PluginOptions::setEncodeOptions(vidEncOptions* encodeOptions)
+{
+	memcpy(&_encodeOptions, encodeOptions, sizeof(vidEncOptions));
+}
+
+char* PluginOptions::toXml(PluginXmlType xmlType)
+{
+	xmlDocPtr xmlDoc = xmlNewDoc((const xmlChar*)"1.0");
+	xmlNodePtr xmlNodeRoot, xmlNodeChild;
+	const int bufferSize = 100;
+	xmlChar xmlBuffer[bufferSize + 1];
+	char *xml = NULL;
+
+	while (true)
+	{
+		if (!xmlDoc)
+			break;
+
+		if (!(xmlNodeRoot = xmlNewDocNode(xmlDoc, NULL, (xmlChar*)getConfigTagRoot(), NULL)))
+			break;
+
+		xmlDocSetRootElement(xmlDoc, xmlNodeRoot);
+
+		if (xmlType == PLUGIN_XML_INTERNAL)
+		{
+			if (_configurationType != PLUGIN_CONFIG_CUSTOM)
+			{
+				xmlNodeChild = xmlNewChild(xmlNodeRoot, NULL, (xmlChar*)"presetConfiguration", NULL);
+
+				xmlNewChild(xmlNodeChild, NULL, (xmlChar*)"name", (xmlChar*)_configurationName);
+
+				if (_configurationType == PLUGIN_CONFIG_USER)
+					strcpy((char*)xmlBuffer, "user");
+				else if (_configurationType == PLUGIN_CONFIG_SYSTEM)
+					strcpy((char*)xmlBuffer, "system");
+				else
+					strcpy((char*)xmlBuffer, "default");
+
+				xmlNewChild(xmlNodeChild, NULL, (xmlChar*)"type", xmlBuffer);
+			}
+		}
+		else
+		{
+			xmlNodeChild = xmlNewChild(xmlNodeRoot, NULL, (xmlChar*)"encodeOptions", NULL);
+
+			switch (_encodeOptions.encodeMode)
+			{
+			case ADM_VIDENC_MODE_CBR:
+				strcpy((char*)xmlBuffer, "CBR");
+				break;
+			case ADM_VIDENC_MODE_CQP:
+				strcpy((char*)xmlBuffer, "CQP");
+				break;
+			case ADM_VIDENC_MODE_AQP:
+				strcpy((char*)xmlBuffer, "AQP");
+				break;
+			case ADM_VIDENC_MODE_2PASS_SIZE:
+				strcpy((char*)xmlBuffer, "2PASS SIZE");
+				break;
+			case ADM_VIDENC_MODE_2PASS_ABR:
+				strcpy((char*)xmlBuffer, "2PASS ABR");
+				break;
+			}
+
+			xmlNewChild(xmlNodeChild, NULL, (xmlChar*)"mode", xmlBuffer);
+			xmlNewChild(xmlNodeChild, NULL, (xmlChar*)"parameter", number2String(xmlBuffer, bufferSize, _encodeOptions.encodeModeParameter));
+		}
+
+		addOptionsToXml(xmlNodeRoot);
+		xml = dumpXmlDocToMemory(xmlDoc);
+		xmlFreeDoc(xmlDoc);
+
+		break;
+	}
+
+	return xml;
+}
+
+int PluginOptions::fromXml(const char *xml, PluginXmlType xmlType)
+{
+	clearPresetConfiguration();
+
+	bool success = false;
+
+	xmlDocPtr doc = xmlReadMemory(xml, strlen(xml), "options.xml", NULL, 0);
+
+	if (success = validateXml(doc, getSchemaFile()))
+	{
+		xmlNode *xmlNodeRoot = xmlDocGetRootElement(doc);
+
+		for (xmlNode *xmlChild = xmlNodeRoot->children; xmlChild; xmlChild = xmlChild->next)
+		{
+			if (xmlChild->type == XML_ELEMENT_NODE)
+			{
+				char *content = (char*)xmlNodeGetContent(xmlChild);
+
+				if (xmlType == PLUGIN_XML_EXTERNAL && strcmp((char*)xmlChild->name, "encodeOptions") == 0)
+					parseEncodeOptions(xmlChild, &_encodeOptions);
+				else if (xmlType == PLUGIN_XML_INTERNAL && strcmp((char*)xmlChild->name, "presetConfiguration") == 0)
+					parsePresetConfiguration(xmlChild);
+				else if (strcmp((char*)xmlChild->name, getOptionsTagRoot()) == 0)
+					parseOptions(xmlChild);
+
+				xmlFree(content);
+			}
+		}
+	}
+
+	xmlFreeDoc(doc);
+
+	return success;
+}
+
+void PluginOptions::parseEncodeOptions(xmlNode *node, vidEncOptions *encodeOptions)
+{
+	for (xmlNode *xmlChild = node->children; xmlChild; xmlChild = xmlChild->next)
+	{
+		if (xmlChild->type == XML_ELEMENT_NODE)
+		{
+			char *content = (char*)xmlNodeGetContent(xmlChild);
+
+			if (strcmp((char*)xmlChild->name, "mode") == 0)
+			{
+				if (strcmp(content, "CBR") == 0)
+					encodeOptions->encodeMode = ADM_VIDENC_MODE_CBR;
+				else if (strcmp(content, "CQP") == 0)
+					encodeOptions->encodeMode = ADM_VIDENC_MODE_CQP;
+				else if (strcmp(content, "AQP") == 0)
+					encodeOptions->encodeMode = ADM_VIDENC_MODE_AQP;
+				else if (strcmp(content, "2PASS SIZE") == 0)
+					encodeOptions->encodeMode = ADM_VIDENC_MODE_2PASS_SIZE;
+				else if (strcmp(content, "2PASS ABR") == 0)
+					encodeOptions->encodeMode = ADM_VIDENC_MODE_2PASS_ABR;
+			}
+			else if (strcmp((char*)xmlChild->name, "parameter") == 0)
+				encodeOptions->encodeModeParameter = atoi(content);
+
+			xmlFree(content);
+		}
+	}
+}
+
+void PluginOptions::parsePresetConfiguration(xmlNode *node)
+{
+	char* name = NULL;
+	PluginConfigType type = PLUGIN_CONFIG_CUSTOM;
+
+	for (xmlNode *xmlChild = node->children; xmlChild; xmlChild = xmlChild->next)
+	{
+		if (xmlChild->type == XML_ELEMENT_NODE)
+		{
+			char *content = (char*)xmlNodeGetContent(xmlChild);
+
+			if (strcmp((char*)xmlChild->name, "name") == 0)
+				name = strdup((char*)content);
+			else if (strcmp((char*)xmlChild->name, "type") == 0)
+			{
+				if (strcmp(content, "user") == 0)
+					type = PLUGIN_CONFIG_USER;
+				else if (strcmp(content, "system") == 0)
+					type = PLUGIN_CONFIG_SYSTEM;
+				else
+					type = PLUGIN_CONFIG_DEFAULT;
+			}
+
+			xmlFree(content);
+		}
+	}
+
+	setPresetConfiguration(name, type);
+	free(name);
+}

Added: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/common/PluginOptions.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/common/PluginOptions.h	2009-07-08 05:35:25 UTC (rev 5015)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/common/PluginOptions.h	2009-07-08 13:35:21 UTC (rev 5016)
@@ -0,0 +1,77 @@
+/***************************************************************************
+                              PluginOptions.h
+
+    begin                : Mon Apr 21 2008
+    copyright            : (C) 2008 by gruntster
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+
+#ifndef PluginOptions_h
+#define PluginOptions_h
+
+#include <libxml/tree.h>
+
+extern "C"
+{
+#include "ADM_vidEnc_plugin.h"
+}
+
+#include "PluginXmlOptions.h"
+
+typedef enum
+{
+	PLUGIN_CONFIG_CUSTOM,
+	PLUGIN_CONFIG_DEFAULT,
+	PLUGIN_CONFIG_USER,
+	PLUGIN_CONFIG_SYSTEM
+} PluginConfigType;
+
+class PluginOptions : public PluginXmlOptions
+{
+protected:
+	vidEncOptions _encodeOptions;
+	unsigned int _defaultEncodeMode;
+	int _defaultEncodeModeParameter;
+
+	char *_tagPrefix, *_configTagRoot, *_optionsTagRoot;
+	char *_schemaFile;
+	char *_configurationName;
+	PluginConfigType _configurationType;
+
+	virtual void cleanUp(void);
+	virtual void setEncodeOptionsToDefaults(void);
+	virtual void parseEncodeOptions(xmlNode *node, vidEncOptions *encodeOptions);
+	virtual void parsePresetConfiguration(xmlNode *node);
+
+public:
+	PluginOptions(const char* tagPrefix, const char* schemaFile, unsigned int defaultEncodeMode, int defaultEncodeModeParameter);
+	~PluginOptions(void);
+
+	virtual vidEncOptions* getEncodeOptions(void);
+	virtual void setEncodeOptions(vidEncOptions* encodeOptions);
+
+	virtual void reset(void);
+	virtual const char* getSchemaFile();
+	virtual const char* getConfigTagRoot();
+	virtual const char* getOptionsTagRoot();
+
+	virtual void getPresetConfiguration(char** configurationName, PluginConfigType *configurationType);
+	virtual void setPresetConfiguration(const char* configurationName, PluginConfigType configurationType);
+	virtual void clearPresetConfiguration(void);
+
+	virtual void addOptionsToXml(xmlNodePtr xmlNodeRoot) = 0;
+	virtual void parseOptions(xmlNode *node) = 0;
+
+	virtual char* toXml(PluginXmlType xmlType);
+	virtual int fromXml(const char *xml, PluginXmlType xmlType);
+};
+
+#endif	// options_h

Added: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/common/PluginXmlOptions.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/common/PluginXmlOptions.cpp	2009-07-08 05:35:25 UTC (rev 5015)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/common/PluginXmlOptions.cpp	2009-07-08 13:35:21 UTC (rev 5016)
@@ -0,0 +1,140 @@
+/***************************************************************************
+                            PluginXmlOptions.cpp
+
+    begin                : Mon Apr 21 2008
+    copyright            : (C) 2008 by gruntster
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+
+#include <sstream>
+#include <libxml/parser.h>
+#include <libxml/xmlschemas.h>
+
+#include "PluginXmlOptions.h"
+#include "ADM_files.h"
+
+xmlChar* PluginXmlOptions::number2String(xmlChar *buffer, size_t size, int number)
+{
+	std::ostringstream stream;
+
+	stream.imbue(std::locale::classic());
+	stream << number;
+	std::string string = stream.str();
+
+	strncpy((char*)buffer, string.c_str(), size);
+
+	return buffer;
+}
+
+xmlChar* PluginXmlOptions::number2String(xmlChar *buffer, size_t size, unsigned int number)
+{
+	std::ostringstream stream;
+
+	stream.imbue(std::locale::classic());
+	stream << number;
+	std::string string = stream.str();
+
+	strncpy((char*)buffer, string.c_str(), size);
+
+	return buffer;
+}
+
+xmlChar* PluginXmlOptions::number2String(xmlChar *buffer, size_t size, float number)
+{
+	std::ostringstream stream;
+
+	stream.imbue(std::locale::classic());
+	stream << number;
+	std::string string = stream.str();
+
+	strncpy((char*)buffer, string.c_str(), size);
+
+	return buffer;
+}
+
+xmlChar* PluginXmlOptions::boolean2String(xmlChar *buffer, size_t size, bool boolean)
+{
+	if (boolean)
+		strncpy((char*)buffer, "true", size);
+	else
+		strncpy((char*)buffer, "false", size);
+
+	return buffer;
+}
+
+bool PluginXmlOptions::string2Boolean(char *buffer)
+{
+	return (strcmp(buffer, "true") == 0);
+}
+
+char* PluginXmlOptions::dumpXmlDocToMemory(xmlDocPtr xmlDoc)
+{
+	xmlChar *tempBuffer;
+	int tempBufferSize;
+	char *xml = NULL;
+
+	xmlDocDumpMemory(xmlDoc, &tempBuffer, &tempBufferSize);
+
+	// remove carriage returns (even though libxml was instructed not to format the XML)
+	xmlChar* bufferChar = tempBuffer;
+	int bufferCharIndex = 0;
+
+	while (*bufferChar != '\0')
+	{
+		if (*bufferChar == '\n')
+		{
+			memmove(bufferChar, bufferChar + 1, tempBufferSize - bufferCharIndex);
+			tempBufferSize--;
+		}
+		else if (*bufferChar == '\"')
+			*bufferChar = '\'';
+
+		bufferChar++;
+		bufferCharIndex++;
+	}
+
+	xml = new char[tempBufferSize + 1];
+	memcpy(xml, tempBuffer, tempBufferSize);
+	xml[tempBufferSize] = 0;
+
+	return xml;
+}
+
+bool PluginXmlOptions::validateXml(xmlDocPtr doc, const char *schemaFile)
+{
+	char *pluginDir = ADM_getPluginPath();
+	char schemaPath[strlen(pluginDir) + strlen(PLUGIN_SUBDIR) + 1 + strlen(schemaFile) + 1];
+	bool success = false;
+
+	strcpy(schemaPath, pluginDir);
+	strcat(schemaPath, PLUGIN_SUBDIR);
+	strcat(schemaPath, "/");
+	strcat(schemaPath, schemaFile);
+	delete [] pluginDir;
+
+	xmlSchemaParserCtxtPtr xmlSchemaParserCtxt = xmlSchemaNewParserCtxt(schemaPath);
+	xmlSchemaPtr xmlSchema = xmlSchemaParse(xmlSchemaParserCtxt);
+
+ 	xmlSchemaFreeParserCtxt(xmlSchemaParserCtxt);
+
+ 	xmlSchemaValidCtxtPtr xmlSchemaValidCtxt = xmlSchemaNewValidCtxt(xmlSchema);
+
+ 	if (xmlSchemaValidCtxt)
+	{
+ 		success = !xmlSchemaValidateDoc(xmlSchemaValidCtxt, doc);
+	 	xmlSchemaFree(xmlSchema);
+		xmlSchemaFreeValidCtxt(xmlSchemaValidCtxt);
+ 	}
+	else
+ 		xmlSchemaFree(xmlSchema);
+
+	return success;
+}

Added: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/common/PluginXmlOptions.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/common/PluginXmlOptions.h	2009-07-08 05:35:25 UTC (rev 5015)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/common/PluginXmlOptions.h	2009-07-08 13:35:21 UTC (rev 5016)
@@ -0,0 +1,45 @@
+/***************************************************************************
+                             PluginXmlOptions.h
+
+    begin                : Mon Apr 21 2008
+    copyright            : (C) 2008 by gruntster
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+
+#ifndef PluginXmlOptions_h
+#define PluginXmlOptions_h
+
+#include <libxml/tree.h>
+
+typedef enum
+{
+	PLUGIN_XML_INTERNAL,
+	PLUGIN_XML_EXTERNAL,
+} PluginXmlType;
+
+class PluginXmlOptions
+{
+protected:
+	xmlChar* number2String(xmlChar *buffer, size_t size, int number);
+	xmlChar* number2String(xmlChar *buffer, size_t size, unsigned int number);
+	xmlChar* number2String(xmlChar *buffer, size_t size, float number);
+	xmlChar* boolean2String(xmlChar *buffer, size_t size, bool boolean);
+	bool string2Boolean(char *buffer);
+
+	virtual char* dumpXmlDocToMemory(xmlDocPtr xmlDoc);
+	virtual bool validateXml(xmlDocPtr doc, const char* schemaFile);
+
+public:
+	virtual char* toXml(PluginXmlType xmlType) = 0;
+	virtual int fromXml(const char *xml, PluginXmlType xmlType) = 0;
+};
+
+#endif	// PluginXmlOptions_h



From gruntster at mail.berlios.de  Wed Jul  8 15:36:10 2009
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Wed, 8 Jul 2009 15:36:10 +0200
Subject: [Avidemux-svn-commit] r5017 - in
	branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264:
	. gtk qt4
Message-ID: <200907081336.n68DaAQ9008400@sheep.berlios.de>

Author: gruntster
Date: 2009-07-08 15:35:56 +0200 (Wed, 08 Jul 2009)
New Revision: 5017

Added:
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/x264Options.cpp
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/x264Options.h
Removed:
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/options.cpp
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/options.h
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/presetOptions.cpp
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/presetOptions.h
Modified:
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/config.h.cmake
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/configGuiLoader.h
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/encoder.cpp
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk/x264ConfigDialog.h
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/interface.c
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.h
Log:
[x264] use generic options class

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/CMakeLists.txt	2009-07-08 13:35:21 UTC (rev 5016)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/CMakeLists.txt	2009-07-08 13:35:56 UTC (rev 5017)
@@ -8,13 +8,16 @@
 	checkLibxml2()
 
 	IF (LIBXML2_FOUND)
-		INCLUDE_DIRECTORIES(${CMAKE_CURRENT_BINARY_DIR} ${X264_INCLUDE_DIR} ${LIBXML2_INCLUDE_DIR})
+		SET(PLUGIN_SUBDIR "x264")
+		SET(QT_PLUGIN_NAME "ADM_vidEnc_x264_Qt")
+		SET(GTK_PLUGIN_NAME "ADM_vidEnc_x264_Gtk")
+		
+		INCLUDE_DIRECTORIES(${CMAKE_CURRENT_BINARY_DIR} ${X264_INCLUDE_DIR} ${LIBXML2_INCLUDE_DIR} ../common)
 		ADD_DEFINITIONS(${LIBXML2_DEFINITIONS})
+		ADD_DEFINITIONS(-DPLUGIN_SUBDIR="${PLUGIN_SUBDIR}")
 		
-		SET(QT_PLUGIN_NAME "ADM_vidEnc_x264_Qt")
-		SET(GTK_PLUGIN_NAME "ADM_vidEnc_x264_Gtk")
-		SET(PLUGIN_SUBDIR "x264")
-		SET(ADM_vidEnc_x264_SRCS interface.c configGuiLoader.cpp encoder.cpp guiHelper.cpp options.cpp presetOptions.cpp zoneOptions.cpp)
+		SET(ADM_vidEnc_x264_SRCS interface.c configGuiLoader.cpp encoder.cpp guiHelper.cpp zoneOptions.cpp x264Options.cpp
+								 ../common/PluginOptions.cpp)
 
 		CONFIGURE_FILE("${CMAKE_CURRENT_SOURCE_DIR}/config.h.cmake" "${CMAKE_CURRENT_BINARY_DIR}/config.h")
 

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/config.h.cmake
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/config.h.cmake	2009-07-08 13:35:21 UTC (rev 5016)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/config.h.cmake	2009-07-08 13:35:56 UTC (rev 5017)
@@ -3,7 +3,6 @@
 
 #define QT_PLUGIN_NAME "${QT_PLUGIN_NAME}"
 #define GTK_PLUGIN_NAME "${GTK_PLUGIN_NAME}"
-#define PLUGIN_SUBDIR "${PLUGIN_SUBDIR}"
 		
 #define PLUGIN_PREFIX "${CMAKE_SHARED_LIBRARY_PREFIX}"
 #define PLUGIN_SUFFIX "${CMAKE_SHARED_LIBRARY_SUFFIX}"

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/configGuiLoader.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/configGuiLoader.h	2009-07-08 13:35:21 UTC (rev 5016)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/configGuiLoader.h	2009-07-08 13:35:56 UTC (rev 5017)
@@ -2,7 +2,7 @@
 #define configGuiLoader_h
 
 #include "ADM_dynamicLoading.h"
-#include "options.h"
+#include "x264Options.h"
 
 extern "C"
 {

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/encoder.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/encoder.cpp	2009-07-08 13:35:21 UTC (rev 5016)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/encoder.cpp	2009-07-08 13:35:56 UTC (rev 5017)
@@ -20,7 +20,7 @@
 #include "ADM_inttype.h"
 #include "ADM_files.h"
 #include "encoder.h"
-#include "options.h"
+#include "x264Options.h"
 
 static x264Encoder encoder;
 static void* encoders = { &encoder };
@@ -133,7 +133,7 @@
 
 int x264Encoder::getOptions(vidEncOptions *encodeOptions, char *pluginOptions, int bufferSize)
 {
-	char* xml = _options.toXml();
+	char* xml = _options.toXml(PLUGIN_XML_INTERNAL);
 	int xmlLength = strlen(xml);
 
 	if (bufferSize >= xmlLength)
@@ -157,7 +157,7 @@
 	bool success = true;
 
 	if (pluginOptions)
-		success = _options.fromXml(pluginOptions);
+		success = _options.fromXml(pluginOptions, PLUGIN_XML_INTERNAL);
 
 	if (encodeOptions && success)
 	{

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk/x264ConfigDialog.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk/x264ConfigDialog.h	2009-07-08 13:35:21 UTC (rev 5016)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk/x264ConfigDialog.h	2009-07-08 13:35:56 UTC (rev 5017)
@@ -3,7 +3,7 @@
 
 #include <gtk/gtk.h>
 
-#include "../options.h"
+#include "../x264Options.h"
 
 extern "C"
 {

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/interface.c
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/interface.c	2009-07-08 13:35:21 UTC (rev 5016)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/interface.c	2009-07-08 13:35:56 UTC (rev 5017)
@@ -66,7 +66,7 @@
 {
 	*major = 1;
 	*minor = 0;
-	*patch = 0;
+	*patch = 1;
 }
 
 const char* vidEncGetEncoderGuid(int encoderId)

Deleted: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/options.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/options.cpp	2009-07-08 13:35:21 UTC (rev 5016)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/options.cpp	2009-07-08 13:35:56 UTC (rev 5017)
@@ -1,2063 +0,0 @@
- /***************************************************************************
-                               x264Options.cpp
-
-	These settings are intended for scripting and can contain a Preset 
-	Configuration block.  If this block exists then "internal" settings are
-	ignored and an external configuration file should be read instead, 
-	e.g. PlayStation Portable profile.  However, if the external file is 
-	missing, internal settings have to be used and will reflect a snapshot
-	of the external configuration file at the time the script was generated.
-
-    begin                : Mon Apr 21 2008
-    copyright            : (C) 2008 by gruntster
- ***************************************************************************/
-
-/***************************************************************************
- *                                                                         *
- *   This program is free software; you can redistribute it and/or modify  *
- *   it under the terms of the GNU General Public License as published by  *
- *   the Free Software Foundation; either version 2 of the License, or     *
- *   (at your option) any later version.                                   *
- *                                                                         *
- ***************************************************************************/
-
-#include <math.h>
-#include <libxml/parser.h>
-#include <libxml/xmlschemas.h>
-#include <sstream>
-#include <string>
-
-#include "config.h"
-#include "ADM_inttype.h"
-#include "ADM_files.h"
-#include "options.h"
-
-x264Options::x264Options(void)
-{
-	_configurationName = NULL;
-	memset(&_param, 0, sizeof(x264_param_t));
-
-	reset();
-}
-
-x264Options::~x264Options(void)
-{
-	cleanUp();
-}
-
-void x264Options::cleanUp(void)
-{
-	if (_configurationName)
-	{
-		free(_configurationName);
-		_configurationName = NULL;
-	}
-
-	clearZones();
-}
-
-void x264Options::reset(void)
-{
-	cleanUp();
-
-	x264_param_default(&_param);
-	_param.vui.i_sar_height = 1;
-	_param.vui.i_sar_width = 1;
-	_param.i_threads = 0;	// set to auto-detect; default is disabled
-
-	_sarAsInput = false;
-
-	setPresetConfiguration("<default>", CONFIG_DEFAULT);
-}
-
-x264_param_t* x264Options::getParameters(void)
-{
-	x264_param_t *param = new x264_param_t;
-
-	memcpy(param, &_param, sizeof(x264_param_t));
-	param->rc.i_zones = getZoneCount();
-
-	if (param->rc.i_zones)
-	{
-		param->rc.zones = new x264_zone_t[param->rc.i_zones];
-
-		for (int zone = 0; zone < param->rc.i_zones; zone++)
-			_zoneOptions[zone]->setX264Zone(&param->rc.zones[zone]);
-	}
-
-	return param;
-}
-
-void x264Options::getPresetConfiguration(char** configurationName, configType *configurationType)
-{
-	if (_configurationName)
-		*configurationName = strdup(_configurationName);
-	else
-		*configurationName = NULL;
-
-	*configurationType = _configurationType;
-}
-
-void x264Options::setPresetConfiguration(const char* configurationName, configType configurationType)
-{
-	clearPresetConfiguration();
-
-	_configurationName = strdup(configurationName);
-	_configurationType = configurationType;
-}
-
-void x264Options::clearPresetConfiguration(void)
-{
-	if (_configurationName)
-		free(_configurationName);
-
-	_configurationName = strdup("<custom>");
-	_configurationType = CONFIG_CUSTOM;
-}
-
-int x264Options::getThreads(void)
-{
-	return _param.i_threads;
-}
-
-void x264Options::setThreads(int threads)
-{
-	if (threads >= 0)
-		_param.i_threads = threads;
-}
-
-bool x264Options::getDeterministic(void)
-{
-	return _param.b_deterministic;
-}
-
-void x264Options::setDeterministic(bool deterministic)
-{
-	_param.b_deterministic = deterministic;
-}
-
-int x264Options::getIdcLevel(void)
-{
-	return _param.i_level_idc;
-}
-
-void x264Options::setIdcLevel(int idcLevel)
-{
-	switch (idcLevel)
-	{
-		case -1:
-		case 1:
-		case 11:
-		case 12:
-		case 13:
-		case 2:
-		case 21:
-		case 22:
-		case 3:
-		case 31:
-		case 32:
-		case 4:
-		case 41:
-		case 42:
-		case 5:
-		case 51:
-			_param.i_level_idc = idcLevel;
-	}
-}
-
-bool x264Options::getSarAsInput(void)
-{
-	return _sarAsInput;
-}
-
-void x264Options::setSarAsInput(bool sarAsInput)
-{
-	_sarAsInput = sarAsInput;
-}
-
-unsigned int x264Options::getSarHeight(void)
-{
-	return _param.vui.i_sar_height;
-}
-
-void x264Options::setSarHeight(unsigned int height)
-{
-	_param.vui.i_sar_height = height;
-}
-
-unsigned int x264Options::getSarWidth(void)
-{
-	return _param.vui.i_sar_width;
-}
-
-void x264Options::setSarWidth(unsigned int width)
-{
-	_param.vui.i_sar_width = width;
-}
-
-unsigned int x264Options::getOverscan(void)
-{
-	return _param.vui.i_overscan;
-}
-
-void x264Options::setOverscan(unsigned int overscan)
-{
-	if (overscan <= 2)
-		_param.vui.i_overscan = overscan;
-}
-
-unsigned int x264Options::getVideoFormat(void)
-{
-	return _param.vui.i_vidformat;
-}
-
-void x264Options::setVideoFormat(unsigned int videoFormat)
-{
-	if (videoFormat <= 5)
-		_param.vui.i_vidformat = videoFormat;
-}
-
-bool x264Options::getFullRangeSamples(void)
-{
-	return _param.vui.b_fullrange;
-}
-
-void x264Options::setFullRangeSamples(bool fullRangeSamples)
-{
-	_param.vui.b_fullrange = fullRangeSamples;
-}
-
-unsigned int x264Options::getColorPrimaries(void)
-{
-	return _param.vui.i_colorprim;
-}
-
-void x264Options::setColorPrimaries(unsigned int colorPrimaries)
-{
-	if (colorPrimaries <= 8 && colorPrimaries != 0 && colorPrimaries != 3)
-		_param.vui.i_colorprim = colorPrimaries;
-}
-
-unsigned int x264Options::getTransfer(void)
-{
-	return _param.vui.i_transfer;
-}
-
-void x264Options::setTransfer(unsigned int transfer)
-{
-	if (transfer <= 10 && transfer != 0 && transfer != 3)
-		_param.vui.i_transfer = transfer;
-}
-
-unsigned int x264Options::getColorMatrix(void)
-{
-	return _param.vui.i_colmatrix;
-}
-
-void x264Options::setColorMatrix(unsigned int colorMatrix)
-{
-	if (colorMatrix <= 8 && colorMatrix != 3)
-		_param.vui.i_colmatrix = colorMatrix;
-}
-
-unsigned int x264Options::getChromaSampleLocation(void)
-{
-	return _param.vui.i_chroma_loc;
-}
-
-void x264Options::setChromaSampleLocation(unsigned int chromaSampleLocation)
-{
-	if (chromaSampleLocation <= 5)
-		_param.vui.i_chroma_loc = chromaSampleLocation;
-}
-
-unsigned int x264Options::getReferenceFrames(void)
-{
-	return _param.i_frame_reference;
-}
-
-void x264Options::setReferenceFrames(unsigned int referenceFrames)
-{
-	if (referenceFrames <= 16)
-		_param.i_frame_reference = referenceFrames;
-}
-
-unsigned int x264Options::getGopMinimumSize(void)
-{
-	return _param.i_keyint_min;
-}
-
-void x264Options::setGopMinimumSize(unsigned int gopSize)
-{
-	if (gopSize <= 100)
-		_param.i_keyint_min = gopSize;
-}
-
-unsigned int x264Options::getGopMaximumSize(void)
-{
-	return _param.i_keyint_max;
-}
-
-void x264Options::setGopMaximumSize(unsigned int gopSize)
-{
-	if (gopSize <= 1000)
-		_param.i_keyint_max = gopSize;
-}
-
-unsigned int x264Options::getScenecutThreshold(void)
-{
-	return _param.i_scenecut_threshold;
-}
-
-void x264Options::setScenecutThreshold(unsigned int scenecutThreshold)
-{
-	if (scenecutThreshold <= 100)
-		_param.i_scenecut_threshold = scenecutThreshold;
-}
-
-#if X264_BUILD < 67
-bool x264Options::getPreScenecutDetection(void)
-{
-	return _param.b_pre_scenecut;
-}
-
-void x264Options::setPreScenecutDetection(bool preScenecutDetection)
-{
-	_param.b_pre_scenecut = preScenecutDetection;
-}
-#endif
-
-unsigned int x264Options::getBFrames(void)
-{
-	return _param.i_bframe;
-}
-
-void x264Options::setBFrames(unsigned int bFrames)
-{
-	if (bFrames <= 100)
-		_param.i_bframe = bFrames;
-}
-
-unsigned int x264Options::getAdaptiveBFrameDecision(void)
-{
-#if X264_BUILD >= 63
-	return _param.i_bframe_adaptive;
-#else
-	return _param.b_bframe_adaptive;
-#endif
-}
-
-void x264Options::setAdaptiveBFrameDecision(unsigned int adaptiveBframeDecision)
-{
-	if (adaptiveBframeDecision <= 2)
-#if X264_BUILD >= 63
-		_param.i_bframe_adaptive = adaptiveBframeDecision;
-#else
-		_param.b_bframe_adaptive = adaptiveBframeDecision;
-#endif
-}
-
-int x264Options::getBFrameBias(void)
-{
-	return _param.i_bframe_bias;
-}
-
-void x264Options::setBFrameBias(int bFrameBias)
-{
-	if (bFrameBias >= -100 && bFrameBias <= 100)
-		_param.i_bframe_bias = bFrameBias;
-}
-
-bool x264Options::getBFrameReferences(void)
-{
-	return _param.b_bframe_pyramid;
-}
-
-void x264Options::setBFrameReferences(bool bFrameReferences)
-{
-	_param.b_bframe_pyramid = bFrameReferences;
-}
-
-bool x264Options::getLoopFilter(void)
-{
-	return _param.b_deblocking_filter;
-}
-
-void x264Options::setLoopFilter(bool loopFilter)
-{
-	_param.b_deblocking_filter = loopFilter;
-}
-
-int x264Options::getLoopFilterAlphaC0(void)
-{
-	return _param.i_deblocking_filter_alphac0;
-}
-
-void x264Options::setLoopFilterAlphaC0(int loopFilterAlphaC0)
-{
-	if (loopFilterAlphaC0 >= -6 && loopFilterAlphaC0 <= 6)
-		_param.i_deblocking_filter_alphac0 = loopFilterAlphaC0;
-}
-
-int x264Options::getLoopFilterBeta(void)
-{
-	return _param.i_deblocking_filter_beta;
-}
-
-void x264Options::setLoopFilterBeta(int loopFilterBeta)
-{
-	if (loopFilterBeta >= -6 && loopFilterBeta <= 6)
-		_param.i_deblocking_filter_beta = loopFilterBeta;
-}
-
-bool x264Options::getCabac(void)
-{
-	return _param.b_cabac;
-}
-
-void x264Options::setCabac(bool cabac)
-{
-	_param.b_cabac = cabac;
-}
-
-bool x264Options::getInterlaced(void)
-{
-	return _param.b_interlaced;
-}
-
-void x264Options::setInterlaced(bool interlaced)
-{
-	_param.b_interlaced = interlaced;
-}
-
-unsigned int x264Options::getCqmPreset(void)
-{
-	return _param.i_cqm_preset;
-}
-
-void x264Options::setCqmPreset(unsigned int cqmPreset)
-{
-	if (cqmPreset <= 2)
-		_param.i_cqm_preset = cqmPreset;
-}
-
-uint8_t* x264Options::getIntra4x4Luma(void)
-{
-	return _param.cqm_4iy;
-}
-
-void x264Options::setIntra4x4Luma(uint8_t intra4x4Luma[])
-{
-	memcpy(_param.cqm_4iy, intra4x4Luma, 16 * sizeof(uint8_t));
-}
-
-uint8_t* x264Options::getIntraChroma(void)
-{
-	return _param.cqm_4ic;
-}
-
-void x264Options::setIntraChroma(uint8_t intraChroma[])
-{
-	memcpy(_param.cqm_4ic, intraChroma, 16 * sizeof(uint8_t));
-}
-
-uint8_t* x264Options::getInter4x4Luma(void)
-{
-	return _param.cqm_4py;
-}
-
-void x264Options::setInter4x4Luma(uint8_t inter4x4Luma[])
-{
-	memcpy(_param.cqm_4py, inter4x4Luma, 16 * sizeof(uint8_t));
-}
-
-uint8_t* x264Options::getInterChroma(void)
-{
-	return _param.cqm_4pc;
-}
-
-void x264Options::setInterChroma(uint8_t interChroma[])
-{
-	memcpy(_param.cqm_4pc, interChroma, 16 * sizeof(uint8_t));
-}
-
-uint8_t* x264Options::getIntra8x8Luma(void)
-{
-	return _param.cqm_8iy;
-}
-
-void x264Options::setIntra8x8Luma(uint8_t intra8x8Luma[])
-{
-	memcpy(_param.cqm_8iy, intra8x8Luma, 64 * sizeof(uint8_t));
-}
-
-uint8_t* x264Options::getInter8x8Luma(void)
-{
-	return _param.cqm_8py;
-}
-
-void x264Options::setInter8x8Luma(uint8_t inter8x8Luma[])
-{
-	memcpy(_param.cqm_8py, inter8x8Luma, 64 * sizeof(uint8_t));
-}
-
-bool x264Options::getPartitionI4x4(void)
-{
-	return (_param.analyse.inter & X264_ANALYSE_I4x4) == X264_ANALYSE_I4x4;
-}
-
-void x264Options::setPartitionI4x4(bool partitionI4x4)
-{
-	if (partitionI4x4)
-		_param.analyse.inter |= X264_ANALYSE_I4x4;
-	else
-		_param.analyse.inter &= ~X264_ANALYSE_I4x4;
-}
-
-bool x264Options::getPartitionI8x8(void)
-{
-	return (_param.analyse.inter & X264_ANALYSE_I8x8) == X264_ANALYSE_I8x8;
-}
-
-void x264Options::setPartitionI8x8(bool partitionI8x8)
-{
-	if (partitionI8x8)
-		_param.analyse.inter |= X264_ANALYSE_I8x8;
-	else
-		_param.analyse.inter &= ~X264_ANALYSE_I8x8;
-}
-
-bool x264Options::getPartitionP8x8(void)
-{
-	return (_param.analyse.inter & X264_ANALYSE_PSUB16x16) == X264_ANALYSE_PSUB16x16;
-}
-
-void x264Options::setPartitionP8x8(bool partitionP8x8)
-{
-	if (partitionP8x8)
-		_param.analyse.inter |= X264_ANALYSE_PSUB16x16;
-	else
-		_param.analyse.inter &= ~X264_ANALYSE_PSUB16x16;
-}
-
-bool x264Options::getPartitionP4x4(void)
-{
-	return (_param.analyse.inter & X264_ANALYSE_PSUB8x8) == X264_ANALYSE_PSUB8x8;
-}
-
-void x264Options::setPartitionP4x4(bool partitionP4x4)
-{
-	if (partitionP4x4)
-		_param.analyse.inter |= X264_ANALYSE_PSUB8x8;
-	else
-		_param.analyse.inter &= ~X264_ANALYSE_PSUB8x8;
-}
-
-bool x264Options::getPartitionB8x8(void)
-{
-	return (_param.analyse.inter & X264_ANALYSE_BSUB16x16) == X264_ANALYSE_BSUB16x16;
-}
-
-void x264Options::setPartitionB8x8(bool partitionB8x8)
-{
-	if (partitionB8x8)
-		_param.analyse.inter |= X264_ANALYSE_BSUB16x16;
-	else
-		_param.analyse.inter &= ~X264_ANALYSE_BSUB16x16;
-}
-
-bool x264Options::getDct8x8(void)
-{
-	return _param.analyse.b_transform_8x8;
-}
-
-void x264Options::setDct8x8(bool dct8x8)
-{
-	_param.analyse.b_transform_8x8 = dct8x8;
-}
-
-bool x264Options::getWeightedPrediction(void)
-{
-	return _param.analyse.b_weighted_bipred;
-}
-
-void x264Options::setWeightedPrediction(bool weightedPrediction)
-{
-	_param.analyse.b_weighted_bipred = weightedPrediction;
-}
-
-unsigned int x264Options::getDirectPredictionMode(void)
-{
-	return _param.analyse.i_direct_mv_pred;
-}
-
-void x264Options::setDirectPredictionMode(unsigned int directPredictionMode)
-{
-	if (directPredictionMode <= 3)
-		_param.analyse.i_direct_mv_pred = directPredictionMode;
-}
-
-#if X264_BUILD < 66
-int x264Options::getDirectPredictionSize(void)
-{
-	return _param.analyse.i_direct_8x8_inference;
-}
-
-void x264Options::setDirectPredictionSize(int directPredictionSize)
-{
-	if (directPredictionSize >= -1 && directPredictionSize <= 1)
-		_param.analyse.i_direct_8x8_inference = directPredictionSize;
-}
-#endif
-
-int x264Options::getChromaLumaQuantiserDifference(void)
-{
-	return _param.analyse.i_chroma_qp_offset;
-}
-
-void x264Options::setChromaLumaQuantiserDifference(int chromaLumaQuantiserDifference)
-{
-	if (chromaLumaQuantiserDifference >= -12 && chromaLumaQuantiserDifference <= 12)
-		_param.analyse.i_chroma_qp_offset = chromaLumaQuantiserDifference;
-}
-
-unsigned int x264Options::getMotionEstimationMethod(void)
-{
-	return _param.analyse.i_me_method;
-}
-
-void x264Options::setMotionEstimationMethod(unsigned int motionEstimationMethod)
-{
-	if (motionEstimationMethod <= 4)
-		_param.analyse.i_me_method = motionEstimationMethod;
-}
-
-unsigned int x264Options::getMotionVectorSearchRange(void)
-{
-	return _param.analyse.i_me_range;
-}
-
-void x264Options::setMotionVectorSearchRange(unsigned int motionVectorSearchRange)
-{
-	if (motionVectorSearchRange <= 64)
-		_param.analyse.i_me_range = motionVectorSearchRange;
-}
-
-int x264Options::getMotionVectorLength(void)
-{
-	return _param.analyse.i_mv_range;
-}
-
-void x264Options::setMotionVectorLength(int motionVectorLength)
-{
-	if (motionVectorLength == -1 || (motionVectorLength >= 32 && motionVectorLength <= 512))
-		_param.analyse.i_mv_range = motionVectorLength;
-}
-
-int x264Options::getMotionVectorThreadBuffer(void)
-{
-	return _param.analyse.i_mv_range_thread;
-}
-
-void x264Options::setMotionVectorThreadBuffer(int motionVectorThreadBuffer)
-{
-	_param.analyse.i_mv_range_thread = motionVectorThreadBuffer;
-}
-
-unsigned int x264Options::getSubpixelRefinement(void)
-{
-	return _param.analyse.i_subpel_refine;
-}
-
-void x264Options::setSubpixelRefinement(unsigned int subpixelRefinement)
-{
-	if (subpixelRefinement >= 1 && subpixelRefinement <= 9)
-		_param.analyse.i_subpel_refine = subpixelRefinement;
-}
-
-#if X264_BUILD < 65
-bool x264Options::getBidirectionalMotionEstimation(void)
-{
-	return _param.analyse.b_bidir_me;
-}
-
-void x264Options::setBidirectionalMotionEstimation(bool bidirectionalMotionEstimation)
-{
-	_param.analyse.b_bidir_me = bidirectionalMotionEstimation;
-}
-#endif
-
-bool x264Options::getChromaMotionEstimation(void)
-{
-	return _param.analyse.b_chroma_me;
-}
-
-void x264Options::setChromaMotionEstimation(bool chromaMotionEstimation)
-{
-	_param.analyse.b_chroma_me = chromaMotionEstimation;
-}
-
-#if X264_BUILD < 65
-bool x264Options::getBFrameRdo(void)
-{
-	return _param.analyse.b_bframe_rdo;
-}
-
-void x264Options::setBFrameRdo(bool bFrameRdo)
-{
-	_param.analyse.b_bframe_rdo = bFrameRdo;
-}
-#endif
-
-bool x264Options::getMixedReferences(void)
-{
-	return _param.analyse.b_mixed_references;
-}
-
-void x264Options::setMixedReferences(bool mixedReferences)
-{
-	_param.analyse.b_mixed_references = mixedReferences;
-}
-
-unsigned int x264Options::getTrellis(void)
-{
-	return _param.analyse.i_trellis;
-}
-
-void x264Options::setTrellis(unsigned int trellis)
-{
-	if (trellis <= 2)
-		_param.analyse.i_trellis = trellis;
-}
-
-bool x264Options::getFastPSkip(void)
-{
-	return _param.analyse.b_fast_pskip;
-}
-
-void x264Options::setFastPSkip(bool fastPSkip)
-{
-	_param.analyse.b_fast_pskip = fastPSkip;
-}
-
-bool x264Options::getDctDecimate(void)
-{
-	return _param.analyse.b_dct_decimate;
-}
-
-void x264Options::setDctDecimate(bool dctDecimate)
-{
-	_param.analyse.b_dct_decimate = dctDecimate;
-}
-
-unsigned int x264Options::getNoiseReduction(void)
-{
-	return _param.analyse.i_noise_reduction;
-}
-
-void x264Options::setNoiseReduction(unsigned int noiseReduction)
-{
-	if (noiseReduction <= 65536)
-		_param.analyse.i_noise_reduction = noiseReduction;
-}
-
-unsigned int x264Options::getInterLumaDeadzone(void)
-{
-	return _param.analyse.i_luma_deadzone[0];
-}
-
-void x264Options::setInterLumaDeadzone(unsigned int interLumaDeadzone)
-{
-	if (interLumaDeadzone <= 32)
-		_param.analyse.i_luma_deadzone[0] = interLumaDeadzone;
-}
-
-unsigned int x264Options::getIntraLumaDeadzone(void)
-{
-	return _param.analyse.i_luma_deadzone[1];
-}
-
-void x264Options::setIntraLumaDeadzone(unsigned int intraLumaDeadzone)
-{
-	if (intraLumaDeadzone <= 32)
-		_param.analyse.i_luma_deadzone[1] = intraLumaDeadzone;
-}
-
-unsigned int x264Options::getQuantiserMinimum(void)
-{
-	return _param.rc.i_qp_min;
-}
-
-void x264Options::setQuantiserMinimum(unsigned int quantiserMinimum)
-{
-	if (quantiserMinimum >= 10 && quantiserMinimum <= 51)
-		_param.rc.i_qp_min = quantiserMinimum;
-}
-
-unsigned int x264Options::getQuantiserMaximum(void)
-{
-	return _param.rc.i_qp_max;
-}
-
-void x264Options::setQuantiserMaximum(unsigned int quantiserMaximum)
-{
-	if (quantiserMaximum >= 10 && quantiserMaximum <= 51)
-		_param.rc.i_qp_max = quantiserMaximum;
-}
-
-unsigned int x264Options::getQuantiserStep(void)
-{
-	return _param.rc.i_qp_step;
-}
-
-void x264Options::setQuantiserStep(unsigned int quantiserStep)
-{
-	if (quantiserStep <= 10)
-		_param.rc.i_qp_step = quantiserStep;
-}
-
-float x264Options::getAverageBitrateTolerance(void)
-{
-	return _param.rc.f_rate_tolerance;
-}
-
-void x264Options::setAverageBitrateTolerance(float averageBitrateTolerance)
-{
-	if (averageBitrateTolerance >= 0 && averageBitrateTolerance <= 1)
-		_param.rc.f_rate_tolerance = averageBitrateTolerance;
-}
-
-unsigned int x264Options::getVbvMaximumBitrate(void)
-{
-	return _param.rc.i_vbv_max_bitrate;
-}
-
-void x264Options::setVbvMaximumBitrate(unsigned int vbvMaximumBitrate)
-{
-	if (vbvMaximumBitrate <= 99999)
-		_param.rc.i_vbv_max_bitrate = vbvMaximumBitrate;
-}
-
-unsigned int x264Options::getVbvBufferSize(void)
-{
-	return _param.rc.i_vbv_buffer_size;
-}
-
-void x264Options::setVbvBufferSize(unsigned int vbvBufferSize)
-{
-	if (vbvBufferSize <= 99999)
-		_param.rc.i_vbv_buffer_size = vbvBufferSize;
-}
-
-float x264Options::getVbvInitialOccupancy(void)
-{
-	return _param.rc.f_vbv_buffer_init;
-}
-
-void x264Options::setVbvInitialOccupancy(float vbvInitialOccupancy)
-{
-	if (vbvInitialOccupancy >= 0 && vbvInitialOccupancy <= 1)
-		_param.rc.f_vbv_buffer_init = vbvInitialOccupancy;
-}
-
-float x264Options::getIpFrameQuantiser(void)
-{
-	return _param.rc.f_ip_factor;
-}
-
-void x264Options::setIpFrameQuantiser(float ipFrameQuantiser)
-{
-	if (ipFrameQuantiser >= 1 && ipFrameQuantiser <= 10)
-		_param.rc.f_ip_factor = ipFrameQuantiser;
-}
-
-float x264Options::getPbFrameQuantiser(void)
-{
-	return _param.rc.f_pb_factor;
-}
-
-void x264Options::setPbFrameQuantiser(float pbFrameQuantiser)
-{
-	if (pbFrameQuantiser >= 1 && pbFrameQuantiser <= 10)
-		_param.rc.f_pb_factor = pbFrameQuantiser;
-}
-
-#if X264_BUILD >= 62
-unsigned int x264Options::getAdaptiveQuantiserMode(void)
-{
-	return _param.rc.i_aq_mode;
-}
-
-void x264Options::setAdaptiveQuantiserMode(unsigned int adaptiveQuantiserMode)
-{
-	if (adaptiveQuantiserMode <= 1)
-		_param.rc.i_aq_mode = adaptiveQuantiserMode;
-}
-
-float x264Options::getAdaptiveQuantiserStrength(void)
-{
-	return _param.rc.f_aq_strength;
-}
-
-void x264Options::setAdaptiveQuantiserStrength(float adaptiveQuantiserStrength)
-{
-	_param.rc.f_aq_strength = adaptiveQuantiserStrength;
-}
-#endif
-
-float x264Options::getQuantiserCurveCompression(void)
-{
-	return _param.rc.f_qcompress;
-}
-
-void x264Options::setQuantiserCurveCompression(float quantiserCurveCompression)
-{
-	if (quantiserCurveCompression >= 0 && quantiserCurveCompression <= 1)
-		_param.rc.f_qcompress = quantiserCurveCompression;
-}
-
-float x264Options::getReduceFluxBeforeCurveCompression(void)
-{
-	return _param.rc.f_complexity_blur;
-}
-
-void x264Options::setReduceFluxBeforeCurveCompression(float reduceFluxBeforeCurveCompression)
-{
-	if (reduceFluxBeforeCurveCompression >= 0 && reduceFluxBeforeCurveCompression <= 999)
-		_param.rc.f_complexity_blur = reduceFluxBeforeCurveCompression;
-}
-
-float x264Options::getReduceFluxAfterCurveCompression(void)
-{
-	return _param.rc.f_qblur;
-}
-
-void x264Options::setReduceFluxAfterCurveCompression(float reduceFluxAfterCurveCompression)
-{
-	if (reduceFluxAfterCurveCompression >= 0 && reduceFluxAfterCurveCompression <= 1)
-		_param.rc.f_qblur = reduceFluxAfterCurveCompression;
-}
-
-unsigned int x264Options::getZoneCount(void)
-{
-	return _zoneOptions.size();
-}
-
-x264ZoneOptions** x264Options::getZones(void)
-{
-	unsigned int zoneCount = getZoneCount();
-	x264ZoneOptions **zoneOptions = new x264ZoneOptions*[zoneCount];
-
-	for (int zone = 0; zone < zoneCount; zone++)
-		zoneOptions[zone] = _zoneOptions[zone]->clone();
-
-	return zoneOptions;
-}
-
-void x264Options::clearZones(void)
-{
-	for (int zone = 0; zone < getZoneCount(); zone++)
-		delete _zoneOptions[zone];
-
-	_zoneOptions.clear();
-}
-
-void x264Options::addZone(x264ZoneOptions *zoneOptions)
-{
-	x264ZoneOptions *clonedOptions = zoneOptions->clone();
-
-	_zoneOptions.push_back(clonedOptions);
-}
-
-bool x264Options::getAccessUnitDelimiters(void)
-{
-	return _param.b_aud;
-}
-
-void x264Options::setAccessUnitDelimiters(bool accessUnitDelimiters)
-{
-	_param.b_aud = accessUnitDelimiters;
-}
-
-unsigned int x264Options::getSpsIdentifier(void)
-{
-	return _param.i_sps_id;
-}
-
-void x264Options::setSpsIdentifier(unsigned int spsIdentifier)
-{
-	switch (spsIdentifier)
-	{
-		case 0:
-		case 1:
-		case 3:
-		case 7:
-		case 15:
-		case 31:
-			_param.i_sps_id = spsIdentifier;
-	}
-}
-
-char* x264Options::toXml(void)
-{
-	xmlDocPtr xmlDoc = xmlNewDoc((const xmlChar*)"1.0");
-	xmlNodePtr xmlNodeRoot, xmlNodeChild;
-	const int bufferSize = 100;
-	xmlChar xmlBuffer[bufferSize + 1];
-	char *xml = NULL;
-
-	while (true)
-	{
-		if (!xmlDoc)
-			break;
-
-		if (!(xmlNodeRoot = xmlNewDocNode(xmlDoc, NULL, (xmlChar*)"x264Config", NULL)))
-			break;
-
-		xmlDocSetRootElement(xmlDoc, xmlNodeRoot);
-
-		if (_configurationType != CONFIG_CUSTOM)
-		{
-			xmlNodeChild = xmlNewChild(xmlNodeRoot, NULL, (xmlChar*)"presetConfiguration", NULL);
-
-			xmlNewChild(xmlNodeChild, NULL, (xmlChar*)"name", (xmlChar*)_configurationName);
-
-			if (_configurationType == CONFIG_USER)
-				strcpy((char*)xmlBuffer, "user");
-			else if (_configurationType == CONFIG_SYSTEM)
-				strcpy((char*)xmlBuffer, "system");
-			else
-				strcpy((char*)xmlBuffer, "default");
-
-			xmlNewChild(xmlNodeChild, NULL, (xmlChar*)"type", xmlBuffer);
-		}
-
-		addX264OptionsToXml(xmlNodeRoot);
-		xml = dumpXmlDocToMemory(xmlDoc);
-		xmlFreeDoc(xmlDoc);
-
-		break;
-	}
-
-	return xml;
-}
-
-char* x264Options::dumpXmlDocToMemory(xmlDocPtr xmlDoc)
-{
-	xmlChar *tempBuffer;
-	int tempBufferSize;
-	char *xml = NULL;
-
-	xmlDocDumpMemory(xmlDoc, &tempBuffer, &tempBufferSize);
-
-	// remove carriage returns (even though libxml was instructed not to format the XML)
-	xmlChar* bufferChar = tempBuffer;
-	int bufferCharIndex = 0;
-
-	while (*bufferChar != '\0')
-	{
-		if (*bufferChar == '\n')
-		{
-			memmove(bufferChar, bufferChar + 1, tempBufferSize - bufferCharIndex);
-			tempBufferSize--;
-		}
-		else if (*bufferChar == '\"')
-			*bufferChar = '\'';
-
-		bufferChar++;
-		bufferCharIndex++;
-	}
-
-	xml = new char[tempBufferSize + 1];
-	memcpy(xml, tempBuffer, tempBufferSize);
-	xml[tempBufferSize] = 0;
-
-	return xml;
-}
-
-void x264Options::addX264OptionsToXml(xmlNodePtr xmlNodeRoot)
-{
-	const int bufferSize = 100;
-	xmlChar xmlBuffer[bufferSize + 1];
-	xmlNodePtr xmlNodeChild, xmlNodeChild2;
-
-	xmlNodeRoot = xmlNewChild(xmlNodeRoot, NULL, (xmlChar*)"x264Options", NULL);
-	xmlNewChild(xmlNodeRoot, NULL, (xmlChar*)"threads", number2String(xmlBuffer, bufferSize, getThreads()));
-	xmlNewChild(xmlNodeRoot, NULL, (xmlChar*)"deterministic", boolean2String(xmlBuffer, bufferSize, getDeterministic()));
-	xmlNewChild(xmlNodeRoot, NULL, (xmlChar*)"idcLevel", number2String(xmlBuffer, bufferSize, getIdcLevel()));
-
-	xmlNodeChild = xmlNewChild(xmlNodeRoot, NULL, (xmlChar*)"vui", NULL);
-	xmlNewChild(xmlNodeChild, NULL, (xmlChar*)"sarAsInput", boolean2String(xmlBuffer, bufferSize, getSarAsInput()));
-	xmlNewChild(xmlNodeChild, NULL, (xmlChar*)"sarHeight", number2String(xmlBuffer, bufferSize, getSarHeight()));
-	xmlNewChild(xmlNodeChild, NULL, (xmlChar*)"sarWidth", number2String(xmlBuffer, bufferSize, getSarWidth()));
-
-	switch (getOverscan())
-	{
-		case 0:
-			strcpy((char*)xmlBuffer, "undefined");
-			break;
-		case 1:
-			strcpy((char*)xmlBuffer, "show");
-			break;
-		case 2:
-			strcpy((char*)xmlBuffer, "crop");
-			break;
-	}
-
-	xmlNewChild(xmlNodeChild, NULL, (xmlChar*)"overscan", xmlBuffer);
-
-	switch (getVideoFormat())
-	{
-		case 0:
-			strcpy((char*)xmlBuffer, "component");
-			break;
-		case 1:
-			strcpy((char*)xmlBuffer, "pal");
-			break;
-		case 2:
-			strcpy((char*)xmlBuffer, "ntsc");
-			break;
-		case 3:
-			strcpy((char*)xmlBuffer, "secam");
-			break;
-		case 4:
-			strcpy((char*)xmlBuffer, "mac");
-			break;
-		case 5:
-			strcpy((char*)xmlBuffer, "undefined");
-			break;
-	}
-
-	xmlNewChild(xmlNodeChild, NULL, (xmlChar*)"videoFormat", xmlBuffer);
-	xmlNewChild(xmlNodeChild, NULL, (xmlChar*)"fullRangeSamples", boolean2String(xmlBuffer, bufferSize, getFullRangeSamples()));
-
-	switch (getColorPrimaries())
-	{
-		case 1:
-			strcpy((char*)xmlBuffer, "bt709");
-			break;
-		case 2:
-			strcpy((char*)xmlBuffer, "undefined");
-			break;
-		case 4:
-			strcpy((char*)xmlBuffer, "bt470m");
-			break;
-		case 5:
-			strcpy((char*)xmlBuffer, "bt470bg");
-			break;
-		case 6:
-			strcpy((char*)xmlBuffer, "smpte170m");
-			break;
-		case 7:
-			strcpy((char*)xmlBuffer, "smpte240m");
-			break;
-		case 8:
-			strcpy((char*)xmlBuffer, "film");
-			break;
-	}
-
-	xmlNewChild(xmlNodeChild, NULL, (xmlChar*)"colorPrimaries", xmlBuffer);
-
-	switch (getTransfer())
-	{
-		case 1:
-			strcpy((char*)xmlBuffer, "bt709");
-			break;
-		case 2:
-			strcpy((char*)xmlBuffer, "undefined");
-			break;
-		case 4:
-			strcpy((char*)xmlBuffer, "bt470m");
-			break;
-		case 5:
-			strcpy((char*)xmlBuffer, "bt470bg");
-			break;
-		case 6:
-			strcpy((char*)xmlBuffer, "smpte170m");
-			break;
-		case 7:
-			strcpy((char*)xmlBuffer, "smpte240m");
-			break;
-		case 8:
-			strcpy((char*)xmlBuffer, "linear");
-			break;
-		case 9:
-			strcpy((char*)xmlBuffer, "log100");
-			break;
-		case 10:
-			strcpy((char*)xmlBuffer, "log316");
-			break;
-	}
-
-	xmlNewChild(xmlNodeChild, NULL, (xmlChar*)"transfer", xmlBuffer);
-
-	switch (getColorMatrix())
-	{
-		case 0:
-			strcpy((char*)xmlBuffer, "gbr");
-			break;
-		case 1:
-			strcpy((char*)xmlBuffer, "bt709");
-			break;
-		case 2:
-			strcpy((char*)xmlBuffer, "undefined");
-			break;
-		case 4:
-			strcpy((char*)xmlBuffer, "fcc");
-			break;
-		case 5:
-			strcpy((char*)xmlBuffer, "bt470bg");
-			break;
-		case 6:
-			strcpy((char*)xmlBuffer, "smpte170m");
-			break;
-		case 7:
-			strcpy((char*)xmlBuffer, "smpte240m");
-			break;
-		case 8:
-			strcpy((char*)xmlBuffer, "ycgco");
-			break;
-	}
-
-	xmlNewChild(xmlNodeChild, NULL, (xmlChar*)"colorMatrix", xmlBuffer);
-	xmlNewChild(xmlNodeChild, NULL, (xmlChar*)"chromaSampleLocation", number2String(xmlBuffer, bufferSize, getChromaSampleLocation()));
-	xmlNewChild(xmlNodeRoot, NULL, (xmlChar*)"referenceFrames", number2String(xmlBuffer, bufferSize, getReferenceFrames()));
-	xmlNewChild(xmlNodeRoot, NULL, (xmlChar*)"gopMaximumSize", number2String(xmlBuffer, bufferSize, getGopMaximumSize()));
-	xmlNewChild(xmlNodeRoot, NULL, (xmlChar*)"gopMinimumSize", number2String(xmlBuffer, bufferSize, getGopMinimumSize()));
-	xmlNewChild(xmlNodeRoot, NULL, (xmlChar*)"scenecutThreshold", number2String(xmlBuffer, bufferSize, getScenecutThreshold()));
-#if X264_BUILD < 67
-	xmlNewChild(xmlNodeRoot, NULL, (xmlChar*)"preScenecutDetection", boolean2String(xmlBuffer, bufferSize, getPreScenecutDetection()));
-#endif
-	xmlNewChild(xmlNodeRoot, NULL, (xmlChar*)"bFrames", number2String(xmlBuffer, bufferSize, getBFrames()));
-	xmlNewChild(xmlNodeRoot, NULL, (xmlChar*)"adaptiveBframeDecision", number2String(xmlBuffer, bufferSize, getAdaptiveBFrameDecision()));
-	xmlNewChild(xmlNodeRoot, NULL, (xmlChar*)"bFrameBias", number2String(xmlBuffer, bufferSize, getBFrameBias()));
-	xmlNewChild(xmlNodeRoot, NULL, (xmlChar*)"bFrameReferences", number2String(xmlBuffer, bufferSize, getBFrameReferences()));
-	xmlNewChild(xmlNodeRoot, NULL, (xmlChar*)"loopFilter", boolean2String(xmlBuffer, bufferSize, getLoopFilter()));
-	xmlNewChild(xmlNodeRoot, NULL, (xmlChar*)"loopFilterAlphaC0", number2String(xmlBuffer, bufferSize, getLoopFilterAlphaC0()));
-	xmlNewChild(xmlNodeRoot, NULL, (xmlChar*)"loopFilterBeta", number2String(xmlBuffer, bufferSize, getLoopFilterBeta()));
-	xmlNewChild(xmlNodeRoot, NULL, (xmlChar*)"cabac", boolean2String(xmlBuffer, bufferSize, getCabac()));
-	xmlNewChild(xmlNodeRoot, NULL, (xmlChar*)"interlaced", boolean2String(xmlBuffer, bufferSize, getInterlaced()));
-
-	switch (getCqmPreset())
-	{
-		case X264_CQM_FLAT:
-			strcpy((char*)xmlBuffer, "flat");
-			break;
-		case X264_CQM_JVT:
-			strcpy((char*)xmlBuffer, "jvt");
-			break;
-		case X264_CQM_CUSTOM:
-			strcpy((char*)xmlBuffer, "custom");
-			break;
-	}
-
-	xmlNewChild(xmlNodeRoot, NULL, (xmlChar*)"cqmPreset", xmlBuffer);
-
-	uint8_t* intra4x4Luma = getIntra4x4Luma();
-	uint8_t* intraChroma = getIntraChroma();
-	uint8_t* inter4x4Luma = getInter4x4Luma();
-	uint8_t* interChroma = getInterChroma();
-	uint8_t* intra8x8Luma = getIntra8x8Luma();
-	uint8_t* inter8x8Luma = getInter8x8Luma();
-
-	xmlNodeChild = xmlNewChild(xmlNodeRoot, NULL, (xmlChar*)"intra4x4Luma", NULL);
-
-	for (int i = 0; i < 16; i++)
-		xmlNewChild(xmlNodeChild, NULL, (xmlChar*)"value", number2String(xmlBuffer, bufferSize, intra4x4Luma[i]));
-
-	xmlNodeChild = xmlNewChild(xmlNodeRoot, NULL, (xmlChar*)"intraChroma", NULL);
-
-	for (int i = 0; i < 16; i++)
-		xmlNewChild(xmlNodeChild, NULL, (xmlChar*)"value", number2String(xmlBuffer, bufferSize, intraChroma[i]));
-
-	xmlNodeChild = xmlNewChild(xmlNodeRoot, NULL, (xmlChar*)"inter4x4Luma", NULL);
-
-	for (int i = 0; i < 16; i++)
-		xmlNewChild(xmlNodeChild, NULL, (xmlChar*)"value", number2String(xmlBuffer, bufferSize, inter4x4Luma[i]));
-
-	xmlNodeChild = xmlNewChild(xmlNodeRoot, NULL, (xmlChar*)"interChroma", NULL);
-
-	for (int i = 0; i < 16; i++)
-		xmlNewChild(xmlNodeChild, NULL, (xmlChar*)"value", number2String(xmlBuffer, bufferSize, interChroma[i]));
-
-	xmlNodeChild = xmlNewChild(xmlNodeRoot, NULL, (xmlChar*)"intra8x8Luma", NULL);
-
-	for (int i = 0; i < 64; i++)
-		xmlNewChild(xmlNodeChild, NULL, (xmlChar*)"value", number2String(xmlBuffer, bufferSize, intra8x8Luma[i]));
-
-	xmlNodeChild = xmlNewChild(xmlNodeRoot, NULL, (xmlChar*)"inter8x8Luma", NULL);
-
-	for (int i = 0; i < 64; i++)
-		xmlNewChild(xmlNodeChild, NULL, (xmlChar*)"value", number2String(xmlBuffer, bufferSize, inter8x8Luma[i]));
-
-	xmlNodeChild = xmlNewChild(xmlNodeRoot, NULL, (xmlChar*)"analyse", NULL);
-	xmlNewChild(xmlNodeChild, NULL, (xmlChar*)"partitionI4x4", boolean2String(xmlBuffer, bufferSize, getPartitionI4x4()));
-	xmlNewChild(xmlNodeChild, NULL, (xmlChar*)"partitionI8x8", boolean2String(xmlBuffer, bufferSize, getPartitionI8x8()));
-	xmlNewChild(xmlNodeChild, NULL, (xmlChar*)"partitionP8x8", boolean2String(xmlBuffer, bufferSize, getPartitionP8x8()));
-	xmlNewChild(xmlNodeChild, NULL, (xmlChar*)"partitionP4x4", boolean2String(xmlBuffer, bufferSize, getPartitionP4x4()));
-	xmlNewChild(xmlNodeChild, NULL, (xmlChar*)"partitionB8x8", boolean2String(xmlBuffer, bufferSize, getPartitionB8x8()));
-	xmlNewChild(xmlNodeChild, NULL, (xmlChar*)"dct8x8", boolean2String(xmlBuffer, bufferSize, getDct8x8()));
-	xmlNewChild(xmlNodeChild, NULL, (xmlChar*)"weightedPrediction", boolean2String(xmlBuffer, bufferSize, getWeightedPrediction()));
-
-	switch (getDirectPredictionMode())
-	{
-		case X264_DIRECT_PRED_NONE:
-			strcpy((char*)xmlBuffer, "none");
-			break;
-		case X264_DIRECT_PRED_SPATIAL:
-			strcpy((char*)xmlBuffer, "spatial");
-			break;
-		case X264_DIRECT_PRED_TEMPORAL:
-			strcpy((char*)xmlBuffer, "temporal");
-			break;
-		case X264_DIRECT_PRED_AUTO:
-			strcpy((char*)xmlBuffer, "auto");
-			break;
-	}
-
-	xmlNewChild(xmlNodeChild, NULL, (xmlChar*)"directPredictionMode", xmlBuffer);
-
-#if X264_BUILD < 66
-	switch (getDirectPredictionSize())
-	{
-		case 0:
-			strcpy((char*)xmlBuffer, "4x4");
-			break;
-		case 1:
-			strcpy((char*)xmlBuffer, "8x8");
-			break;
-		case -1:
-			strcpy((char*)xmlBuffer, "smallest");
-			break;
-	}
-
-	xmlNewChild(xmlNodeChild, NULL, (xmlChar*)"directPredictionSize", xmlBuffer);
-#endif
-
-	xmlNewChild(xmlNodeChild, NULL, (xmlChar*)"chromaLumaQuantiserDifference", number2String(xmlBuffer, bufferSize, getChromaLumaQuantiserDifference()));
-
-	switch (getMotionEstimationMethod())
-	{
-		case X264_ME_DIA:
-			strcpy((char*)xmlBuffer, "diamond");
-			break;
-		case X264_ME_UMH:
-			strcpy((char*)xmlBuffer, "multi-hexagonal");
-			break;
-		case X264_ME_ESA:
-			strcpy((char*)xmlBuffer, "exhaustive");
-			break;
-#if X264_BUILD >= 57
-		case X264_ME_TESA:
-			strcpy((char*)xmlBuffer, "hadamard");
-			break;
-#endif
-		case X264_ME_HEX:
-		default:
-			strcpy((char*)xmlBuffer, "hexagonal");
-			break;
-	}
-
-	xmlNewChild(xmlNodeChild, NULL, (xmlChar*)"motionEstimationMethod", xmlBuffer);
-	xmlNewChild(xmlNodeChild, NULL, (xmlChar*)"motionVectorSearchRange", number2String(xmlBuffer, bufferSize, getMotionVectorSearchRange()));
-	xmlNewChild(xmlNodeChild, NULL, (xmlChar*)"motionVectorLength", number2String(xmlBuffer, bufferSize, getMotionVectorLength()));
-	xmlNewChild(xmlNodeChild, NULL, (xmlChar*)"motionVectorThreadBuffer", number2String(xmlBuffer, bufferSize, getMotionVectorThreadBuffer()));
-	xmlNewChild(xmlNodeChild, NULL, (xmlChar*)"subpixelRefinement", number2String(xmlBuffer, bufferSize, getSubpixelRefinement()));
-#if X264_BUILD < 65
-	xmlNewChild(xmlNodeChild, NULL, (xmlChar*)"bidirectionalMotionEstimation", boolean2String(xmlBuffer, bufferSize, getBidirectionalMotionEstimation()));
-#endif
-	xmlNewChild(xmlNodeChild, NULL, (xmlChar*)"chromaMotionEstimation", boolean2String(xmlBuffer, bufferSize, getChromaMotionEstimation()));
-#if X264_BUILD < 65
-	xmlNewChild(xmlNodeChild, NULL, (xmlChar*)"bFrameRdo", boolean2String(xmlBuffer, bufferSize, getBFrameRdo()));
-#endif
-	xmlNewChild(xmlNodeChild, NULL, (xmlChar*)"mixedReferences", boolean2String(xmlBuffer, bufferSize, getMixedReferences()));
-
-	switch (getTrellis())
-	{
-		case 0:
-			strcpy((char*)xmlBuffer, "disabled");
-			break;
-		case 1:
-			strcpy((char*)xmlBuffer, "finalMacroblock");
-			break;
-		case 2:
-			strcpy((char*)xmlBuffer, "allModeDecisions");
-			break;
-	}
-
-	xmlNewChild(xmlNodeChild, NULL, (xmlChar*)"trellis", xmlBuffer);
-	xmlNewChild(xmlNodeChild, NULL, (xmlChar*)"fastPSkip", boolean2String(xmlBuffer, bufferSize, getFastPSkip()));
-	xmlNewChild(xmlNodeChild, NULL, (xmlChar*)"dctDecimate", boolean2String(xmlBuffer, bufferSize, getDctDecimate()));
-	xmlNewChild(xmlNodeChild, NULL, (xmlChar*)"noiseReduction", number2String(xmlBuffer, bufferSize, getNoiseReduction()));
-	xmlNewChild(xmlNodeChild, NULL, (xmlChar*)"interLumaDeadzone", number2String(xmlBuffer, bufferSize, getInterLumaDeadzone()));
-	xmlNewChild(xmlNodeChild, NULL, (xmlChar*)"intraLumaDeadzone", number2String(xmlBuffer, bufferSize, getIntraLumaDeadzone()));
-
-	xmlNodeChild = xmlNewChild(xmlNodeRoot, NULL, (xmlChar*)"rateControl", NULL);
-	xmlNewChild(xmlNodeChild, NULL, (xmlChar*)"quantiserMinimum", number2String(xmlBuffer, bufferSize, getQuantiserMinimum()));
-	xmlNewChild(xmlNodeChild, NULL, (xmlChar*)"quantiserMaximum", number2String(xmlBuffer, bufferSize, getQuantiserMaximum()));
-	xmlNewChild(xmlNodeChild, NULL, (xmlChar*)"quantiserStep", number2String(xmlBuffer, bufferSize, getQuantiserStep()));
-	xmlNewChild(xmlNodeChild, NULL, (xmlChar*)"averageBitrateTolerance", number2String(xmlBuffer, bufferSize, getAverageBitrateTolerance()));
-	xmlNewChild(xmlNodeChild, NULL, (xmlChar*)"vbvMaximumBitrate", number2String(xmlBuffer, bufferSize, getVbvMaximumBitrate()));
-	xmlNewChild(xmlNodeChild, NULL, (xmlChar*)"vbvBufferSize", number2String(xmlBuffer, bufferSize, getVbvBufferSize()));
-	xmlNewChild(xmlNodeChild, NULL, (xmlChar*)"vbvInitialOccupancy", number2String(xmlBuffer, bufferSize, getVbvInitialOccupancy()));
-	xmlNewChild(xmlNodeChild, NULL, (xmlChar*)"ipFrameQuantiser", number2String(xmlBuffer, bufferSize, getIpFrameQuantiser()));
-	xmlNewChild(xmlNodeChild, NULL, (xmlChar*)"pbFrameQuantiser", number2String(xmlBuffer, bufferSize, getPbFrameQuantiser()));
-
-#if X264_BUILD >= 62
-	switch (getAdaptiveQuantiserMode())
-	{
-		case X264_AQ_NONE:
-			strcpy((char*)xmlBuffer, "none");
-			break;
-		case X264_AQ_VARIANCE:
-			strcpy((char*)xmlBuffer, "variance");
-			break;
-	}
-
-	xmlNewChild(xmlNodeChild, NULL, (xmlChar*)"adaptiveQuantiserMode", xmlBuffer);
-	xmlNewChild(xmlNodeChild, NULL, (xmlChar*)"adaptiveQuantiserStrength", number2String(xmlBuffer, bufferSize, getAdaptiveQuantiserStrength()));
-#endif
-	xmlNewChild(xmlNodeChild, NULL, (xmlChar*)"quantiserCurveCompression", number2String(xmlBuffer, bufferSize, getQuantiserCurveCompression()));
-	xmlNewChild(xmlNodeChild, NULL, (xmlChar*)"reduceFluxBeforeCurveCompression", number2String(xmlBuffer, bufferSize, getReduceFluxBeforeCurveCompression()));
-	xmlNewChild(xmlNodeChild, NULL, (xmlChar*)"reduceFluxAfterCurveCompression", number2String(xmlBuffer, bufferSize, getReduceFluxAfterCurveCompression()));
-
-	int zoneCount = getZoneCount();
-
-	if (zoneCount)
-	{
-		x264ZoneOptions** zoneOptions = getZones();
-
-		for (int zoneIndex = 0; zoneIndex < zoneCount; zoneIndex++)
-		{
-			xmlNodeChild2 = xmlNewChild(xmlNodeChild, NULL, (xmlChar*)"zone", NULL);
-			x264ZoneOptions* option = zoneOptions[zoneIndex];
-
-			xmlNewChild(xmlNodeChild2, NULL, (xmlChar*)"frameStart", number2String(xmlBuffer, bufferSize, option->getFrameStart()));
-			xmlNewChild(xmlNodeChild2, NULL, (xmlChar*)"frameEnd", number2String(xmlBuffer, bufferSize, option->getFrameEnd()));
-
-			if (zoneOptions[zoneIndex]->getZoneMode() == ZONE_MODE_QUANTISER)
-				xmlNewChild(xmlNodeChild2, NULL, (xmlChar*)"quantiser", number2String(xmlBuffer, bufferSize, option->getZoneParameter()));
-			else
-				xmlNewChild(xmlNodeChild2, NULL, (xmlChar*)"bitrateFactor", number2String(xmlBuffer, bufferSize, option->getZoneParameter() / 100.f));
-
-			delete option;
-		}
-
-		delete [] zoneOptions;
-	}
-
-	xmlNewChild(xmlNodeRoot, NULL, (xmlChar*)"accessUnitDelimiters", boolean2String(xmlBuffer, bufferSize, getAccessUnitDelimiters()));
-	xmlNewChild(xmlNodeRoot, NULL, (xmlChar*)"spsIdentifier", number2String(xmlBuffer, bufferSize, getSpsIdentifier()));
-}
-
-bool x264Options::validateXml(xmlDocPtr doc)
-{
-	const char *schemaFile = "x264Param.xsd";
-	char *pluginDir = ADM_getPluginPath();
-	char schemaPath[strlen(pluginDir) + strlen(PLUGIN_SUBDIR) + 1 + strlen(schemaFile) + 1];
-	bool success = false;
-
-	strcpy(schemaPath, pluginDir);
-	strcat(schemaPath, PLUGIN_SUBDIR);
-	strcat(schemaPath, "/");
-	strcat(schemaPath, schemaFile);
-	delete [] pluginDir;
-
-	xmlSchemaParserCtxtPtr xmlSchemaParserCtxt = xmlSchemaNewParserCtxt(schemaPath);
-	xmlSchemaPtr xmlSchema = xmlSchemaParse(xmlSchemaParserCtxt);
-
- 	xmlSchemaFreeParserCtxt(xmlSchemaParserCtxt);
-
- 	xmlSchemaValidCtxtPtr xmlSchemaValidCtxt = xmlSchemaNewValidCtxt(xmlSchema);
-
- 	if (xmlSchemaValidCtxt)
-	{
- 		success = !xmlSchemaValidateDoc(xmlSchemaValidCtxt, doc);
-	 	xmlSchemaFree(xmlSchema);
-		xmlSchemaFreeValidCtxt(xmlSchemaValidCtxt);
- 	}
-	else
- 		xmlSchemaFree(xmlSchema);
-
-	return success;
-}
-
-int x264Options::fromXml(const char *xml)
-{
-	bool success = false;
-
-	clearPresetConfiguration();
-	clearZones();
-
-	xmlDocPtr doc = xmlReadMemory(xml, strlen(xml), "x264.xml", NULL, 0);
-
-	if (success = validateXml(doc))
-	{
-		xmlNode *xmlNodeRoot = xmlDocGetRootElement(doc);
-
-		for (xmlNode *xmlChild = xmlNodeRoot->children; xmlChild; xmlChild = xmlChild->next)
-		{
-			if (xmlChild->type == XML_ELEMENT_NODE)
-			{
-				char *content = (char*)xmlNodeGetContent(xmlChild);
-
-				if (strcmp((char*)xmlChild->name, "presetConfiguration") == 0)
-					parsePresetConfiguration(xmlChild);
-				else if (strcmp((char*)xmlChild->name, "x264Options") == 0)
-					parseX264Options(xmlChild);
-
-				xmlFree(content);
-			}
-		}
-	}
-
-	xmlFreeDoc(doc);
-
-	return success;
-}
-
-void x264Options::parsePresetConfiguration(xmlNode *node)
-{
-	char* name = NULL;
-	configType type = CONFIG_CUSTOM;
-
-	for (xmlNode *xmlChild = node->children; xmlChild; xmlChild = xmlChild->next)
-	{
-		if (xmlChild->type == XML_ELEMENT_NODE)
-		{
-			char *content = (char*)xmlNodeGetContent(xmlChild);
-
-			if (strcmp((char*)xmlChild->name, "name") == 0)
-				name = strdup((char*)content);
-			else if (strcmp((char*)xmlChild->name, "type") == 0)
-			{
-				if (strcmp(content, "user") == 0)
-					type = CONFIG_USER;
-				else if (strcmp(content, "system") == 0)
-					type = CONFIG_SYSTEM;
-				else
-					type = CONFIG_DEFAULT;
-			}
-
-			xmlFree(content);
-		}
-	}
-
-	setPresetConfiguration(name, type);
-	free(name);
-}
-
-void x264Options::parseX264Options(xmlNode *node)
-{
-	for (xmlNode *xmlChild = node->children; xmlChild; xmlChild = xmlChild->next)
-	{
-		if (xmlChild->type == XML_ELEMENT_NODE)
-		{
-			char *content = (char*)xmlNodeGetContent(xmlChild);
-
-			if (strcmp((char*)xmlChild->name, "threads") == 0)
-				setThreads(atoi(content));
-			else if (strcmp((char*)xmlChild->name, "deterministic") == 0)
-				setDeterministic(string2Boolean(content));
-			else if (strcmp((char*)xmlChild->name, "idcLevel") == 0)
-				setIdcLevel(atoi(content));
-			else if (strcmp((char*)xmlChild->name, "vui") == 0)
-				parseVuiOptions(xmlChild);
-			else if (strcmp((char*)xmlChild->name, "referenceFrames") == 0)
-				setReferenceFrames(atoi(content));
-			else if (strcmp((char*)xmlChild->name, "gopMaximumSize") == 0)
-				setGopMaximumSize(atoi(content));
-			else if (strcmp((char*)xmlChild->name, "gopMinimumSize") == 0)
-				setGopMinimumSize(atoi(content));
-			else if (strcmp((char*)xmlChild->name, "scenecutThreshold") == 0)
-				setScenecutThreshold(atoi(content));
-#if X264_BUILD < 67
-			else if (strcmp((char*)xmlChild->name, "preScenecutDetection") == 0)
-				setPreScenecutDetection(string2Boolean(content));
-#endif
-			else if (strcmp((char*)xmlChild->name, "bFrames") == 0)
-				setBFrames(atoi(content));
-			else if (strcmp((char*)xmlChild->name, "adaptiveBframeDecision") == 0)
-				setAdaptiveBFrameDecision(atoi(content));
-			else if (strcmp((char*)xmlChild->name, "bFrameBias") == 0)
-				setBFrameBias(atoi(content));
-			else if (strcmp((char*)xmlChild->name, "bFrameReferences") == 0)
-				setBFrameReferences(atoi(content));
-			else if (strcmp((char*)xmlChild->name, "loopFilter") == 0)
-				setLoopFilter(string2Boolean(content));
-			else if (strcmp((char*)xmlChild->name, "loopFilterAlphaC0") == 0)
-				setLoopFilterAlphaC0(atoi(content));
-			else if (strcmp((char*)xmlChild->name, "loopFilterBeta") == 0)
-				setLoopFilterBeta(atoi(content));
-			else if (strcmp((char*)xmlChild->name, "cabac") == 0)
-				setCabac(string2Boolean(content));
-			else if (strcmp((char*)xmlChild->name, "interlaced") == 0)
-				setInterlaced(string2Boolean(content));
-			else if (strcmp((char*)xmlChild->name, "cqmPreset") == 0)
-			{
-				int cqmPreset = 0;
-
-				if (strcmp(content, "flat") == 0)
-					cqmPreset = X264_CQM_FLAT;
-				else if (strcmp(content, "jvt") == 0)
-					cqmPreset = X264_CQM_JVT;
-				else if (strcmp(content, "custom") == 0)
-					cqmPreset = X264_CQM_CUSTOM;
-
-				setCqmPreset(cqmPreset);
-			}
-			else if (strcmp((char*)xmlChild->name, "intra4x4Luma") == 0)
-			{
-				uint8_t intra4x4Luma[16];
-
-				parseCqmOption(xmlChild, intra4x4Luma);
-				setIntra4x4Luma(intra4x4Luma);
-			}
-			else if (strcmp((char*)xmlChild->name, "intraChroma") == 0)
-			{
-				uint8_t intraChroma[16];
-
-				parseCqmOption(xmlChild, intraChroma);
-				setIntraChroma(intraChroma);
-			}
-			else if (strcmp((char*)xmlChild->name, "inter4x4Luma") == 0)
-			{
-				uint8_t inter4x4Luma[16];
-
-				parseCqmOption(xmlChild, inter4x4Luma);
-				setInter4x4Luma(inter4x4Luma);
-			}
-			else if (strcmp((char*)xmlChild->name, "interChroma") == 0)
-			{
-				uint8_t interChroma[16];
-
-				parseCqmOption(xmlChild, interChroma);
-				setInterChroma(interChroma);
-			}
-			else if (strcmp((char*)xmlChild->name, "intra8x8Luma") == 0)
-			{
-				uint8_t intra8x8Luma[64];
-
-				parseCqmOption(xmlChild, intra8x8Luma);
-				setIntra8x8Luma(intra8x8Luma);
-			}
-			else if (strcmp((char*)xmlChild->name, "inter8x8Luma") == 0)
-			{
-				uint8_t inter8x8Luma[64];
-
-				parseCqmOption(xmlChild, inter8x8Luma);
-				setInter8x8Luma(inter8x8Luma);
-			}
-			else if (strcmp((char*)xmlChild->name, "analyse") == 0)
-				parseAnalyseOptions(xmlChild);
-			else if (strcmp((char*)xmlChild->name, "rateControl") == 0)
-				parseRateControlOptions(xmlChild);
-			else if (strcmp((char*)xmlChild->name, "accessUnitDelimiters") == 0)
-				setAccessUnitDelimiters(string2Boolean(content));
-			else if (strcmp((char*)xmlChild->name, "spsIdentifier") == 0)
-				setSpsIdentifier(atoi(content));
-
-			xmlFree(content);
-		}
-	}
-}
-
-void x264Options::parseVuiOptions(xmlNode *node)
-{
-	for (xmlNode *xmlChild = node->children; xmlChild; xmlChild = xmlChild->next)
-	{
-		if (xmlChild->type == XML_ELEMENT_NODE)
-		{
-			char *content = (char*)xmlNodeGetContent(xmlChild);
-
-			if (strcmp((char*)xmlChild->name, "sarAsInput") == 0)
-				setSarAsInput(string2Boolean(content));
-			else if (strcmp((char*)xmlChild->name, "sarHeight") == 0)
-				setSarHeight(atoi(content));
-			else if (strcmp((char*)xmlChild->name, "sarWidth") == 0)
-				setSarWidth(atoi(content));
-			else if (strcmp((char*)xmlChild->name, "overscan") == 0)
-			{
-				int overscan = 0;
-
-				if (strcmp(content, "undefined") == 0)
-					overscan = 0;
-				else if (strcmp(content, "show") == 0)
-					overscan = 1;
-				else if (strcmp(content, "crop") == 0)
-					overscan = 2;
-
-				setOverscan(overscan);
-			}
-			else if (strcmp((char*)xmlChild->name, "videoFormat") == 0)
-			{
-				int videoFormat = 5;
-
-				if (strcmp(content, "component") == 0)
-					videoFormat = 0;
-				else if (strcmp(content, "pal") == 0)
-					videoFormat = 1;
-				else if (strcmp(content, "ntsc") == 0)
-					videoFormat = 2;
-				else if (strcmp(content, "secam") == 0)
-					videoFormat = 3;
-				else if (strcmp(content, "mac") == 0)
-					videoFormat = 4;
-				else if (strcmp(content, "undefined") == 0)
-					videoFormat = 5;
-
-				setVideoFormat(videoFormat);
-			}
-			else if (strcmp((char*)xmlChild->name, "fullRangeSamples") == 0)
-				setFullRangeSamples(string2Boolean(content));
-			else if (strcmp((char*)xmlChild->name, "colorPrimaries") == 0)
-			{
-				int colorPrimaries = 2;
-
-				if (strcmp(content, "bt709") == 0)
-					colorPrimaries = 1;
-				else if (strcmp(content, "undefined") == 0)
-					colorPrimaries = 2;
-				else if (strcmp(content, "bt470m") == 0)
-					colorPrimaries = 4;
-				else if (strcmp(content, "bt470bg") == 0)
-					colorPrimaries = 5;
-				else if (strcmp(content, "smpte170m") == 0)
-					colorPrimaries = 6;
-				else if (strcmp(content, "smpte240m") == 0)
-					colorPrimaries = 7;
-				else if (strcmp(content, "film") == 0)
-					colorPrimaries = 8;
-
-				setColorPrimaries(colorPrimaries);
-			}
-			else if (strcmp((char*)xmlChild->name, "transfer") == 0)
-			{
-				int transfer = 2;
-
-				if (strcmp(content, "bt709") == 0)
-					transfer = 1;
-				else if (strcmp(content, "undefined") == 0)
-					transfer = 2;
-				else if (strcmp(content, "bt470m") == 0)
-					transfer = 4;
-				else if (strcmp(content, "bt470bg") == 0)
-					transfer = 5;
-				else if (strcmp(content, "smpte170m") == 0)
-					transfer = 6;
-				else if (strcmp(content, "smpte240m") == 0)
-					transfer = 7;
-				else if (strcmp(content, "linear") == 0)
-					transfer = 8;
-				else if (strcmp(content, "log100") == 0)
-					transfer = 9;
-				else if (strcmp(content, "log316") == 0)
-					transfer = 8;
-
-				setTransfer(transfer);
-			}
-			else if (strcmp((char*)xmlChild->name, "colorMatrix") == 0)
-			{
-				int colorMatrix = 2;
-
-				if (strcmp(content, "gbr") == 0)
-					colorMatrix = 0;
-				else if (strcmp(content, "bt709") == 0)
-					colorMatrix = 1;
-				else if (strcmp(content, "undefined") == 0)
-					colorMatrix = 2;
-				else if (strcmp(content, "fcc") == 0)
-					colorMatrix = 4;
-				else if (strcmp(content, "bt470bg") == 0)
-					colorMatrix = 5;
-				else if (strcmp(content, "smpte170m") == 0)
-					colorMatrix = 6;
-				else if (strcmp(content, "smpte240m") == 0)
-					colorMatrix = 7;
-				else if (strcmp(content, "ycgco") == 0)
-					colorMatrix = 8;
-
-				setColorMatrix(colorMatrix);
-			}
-			else if (strcmp((char*)xmlChild->name, "chromaSampleLocation") == 0)
-				setChromaSampleLocation(atoi(content));
-
-			xmlFree(content);
-		}
-	}
-}
-
-void x264Options::parseCqmOption(xmlNode *node, uint8_t cqm[])
-{
-	int index = 0;
-
-	for (xmlNode *xmlChild = node->children; xmlChild; xmlChild = xmlChild->next)
-	{
-		if (xmlChild->type == XML_ELEMENT_NODE)
-		{
-			char *content = (char*)xmlNodeGetContent(xmlChild);
-
-			cqm[index] = atoi(content);
-			index++;
-
-			xmlFree(content);
-		}
-	}
-}
-
-void x264Options::parseAnalyseOptions(xmlNode *node)
-{
-	for (xmlNode *xmlChild = node->children; xmlChild; xmlChild = xmlChild->next)
-	{
-		if (xmlChild->type == XML_ELEMENT_NODE)
-		{
-			char *content = (char*)xmlNodeGetContent(xmlChild);
-
-			if (strcmp((char*)xmlChild->name, "partitionI4x4") == 0)
-				setPartitionI4x4(string2Boolean(content));
-			else if (strcmp((char*)xmlChild->name, "partitionI8x8") == 0)
-				setPartitionI8x8(string2Boolean(content));
-			else if (strcmp((char*)xmlChild->name, "partitionP8x8") == 0)
-				setPartitionP8x8(string2Boolean(content));
-			else if (strcmp((char*)xmlChild->name, "partitionP4x4") == 0)
-				setPartitionP4x4(string2Boolean(content));
-			else if (strcmp((char*)xmlChild->name, "partitionB8x8") == 0)
-				setPartitionB8x8(string2Boolean(content));
-			else if (strcmp((char*)xmlChild->name, "dct8x8") == 0)
-				setDct8x8(string2Boolean(content));
-			else if (strcmp((char*)xmlChild->name, "weightedPrediction") == 0)
-				setWeightedPrediction(string2Boolean(content));
-			else if (strcmp((char*)xmlChild->name, "directPredictionMode") == 0)
-			{
-				int directPredictionMode = X264_DIRECT_PRED_SPATIAL;
-
-				if (strcmp(content, "none") == 0)
-					directPredictionMode = X264_DIRECT_PRED_NONE;
-				else if (strcmp(content, "spatial") == 0)
-					directPredictionMode = X264_DIRECT_PRED_SPATIAL;
-				else if (strcmp(content, "temporal") == 0)
-					directPredictionMode = X264_DIRECT_PRED_TEMPORAL;
-				else if (strcmp(content, "auto") == 0)
-					directPredictionMode = X264_DIRECT_PRED_AUTO;
-
-				setDirectPredictionMode(directPredictionMode);
-			}
-#if X264_BUILD < 66
-			else if (strcmp((char*)xmlChild->name, "directPredictionSize") == 0)
-			{
-				int directPredictionSize = -1;
-
-				if (strcmp(content, "4x4") == 0)
-					directPredictionSize = 0;
-				else if (strcmp(content, "8x8") == 0)
-					directPredictionSize = 1;
-				else if (strcmp(content, "smallest") == 0)
-					directPredictionSize = -1;
-
-				setDirectPredictionSize(directPredictionSize);
-			}
-#endif
-			else if (strcmp((char*)xmlChild->name, "chromaLumaQuantiserDifference") == 0)
-				setChromaLumaQuantiserDifference(atoi(content));
-			else if (strcmp((char*)xmlChild->name, "motionEstimationMethod") == 0)
-			{
-				int motionEstimationMethod = X264_ME_HEX;
-
-				if (strcmp(content, "diamond") == 0)
-					motionEstimationMethod = X264_ME_DIA;
-				else if (strcmp(content, "hexagonal") == 0)
-					motionEstimationMethod = X264_ME_HEX;
-				else if (strcmp(content, "multi-hexagonal") == 0)
-					motionEstimationMethod = X264_ME_UMH;
-				else if (strcmp(content, "exhaustive") == 0)
-					motionEstimationMethod = X264_ME_ESA;
-#if X264_BUILD >= 57
-				else if (strcmp(content, "hadamard") == 0)
-					motionEstimationMethod = X264_ME_TESA;
-#endif
-
-				setMotionEstimationMethod(motionEstimationMethod);
-			}
-			else if (strcmp((char*)xmlChild->name, "motionVectorSearchRange") == 0)
-				setMotionVectorSearchRange(atoi(content));
-			else if (strcmp((char*)xmlChild->name, "motionVectorLength") == 0)
-				setMotionVectorLength(atoi(content));
-			else if (strcmp((char*)xmlChild->name, "motionVectorThreadBuffer") == 0)
-				setMotionVectorThreadBuffer(atoi(content));
-			else if (strcmp((char*)xmlChild->name, "subpixelRefinement") == 0)
-				setSubpixelRefinement(atoi(content));
-#if X264_BUILD < 65
-			else if (strcmp((char*)xmlChild->name, "bidirectionalMotionEstimation") == 0)
-				setBidirectionalMotionEstimation(string2Boolean(content));
-#endif
-			else if (strcmp((char*)xmlChild->name, "chromaMotionEstimation") == 0)
-				setChromaMotionEstimation(string2Boolean(content));
-#if X264_BUILD < 65
-			else if (strcmp((char*)xmlChild->name, "bFrameRdo") == 0)
-				setBFrameRdo(string2Boolean(content));
-#endif
-			else if (strcmp((char*)xmlChild->name, "mixedReferences") == 0)
-				setMixedReferences(string2Boolean(content));
-			else if (strcmp((char*)xmlChild->name, "trellis") == 0)
-			{
-				int trellis = 0;
-
-				if (strcmp(content, "disabled") == 0)
-					trellis = 0;
-				else if (strcmp(content, "finalMacroblock") == 0)
-					trellis = 1;
-				else if (strcmp(content, "allModeDecisions") == 0)
-					trellis = 2;
-
-				setTrellis(trellis);
-			}
-			else if (strcmp((char*)xmlChild->name, "fastPSkip") == 0)
-				setFastPSkip(string2Boolean(content));
-			else if (strcmp((char*)xmlChild->name, "dctDecimate") == 0)
-				setDctDecimate(string2Boolean(content));
-			else if (strcmp((char*)xmlChild->name, "noiseReduction") == 0)
-				setNoiseReduction(atoi(content));
-			else if (strcmp((char*)xmlChild->name, "interLumaDeadzone") == 0)
-				setInterLumaDeadzone(atoi(content));
-			else if (strcmp((char*)xmlChild->name, "intraLumaDeadzone") == 0)
-				setIntraLumaDeadzone(atoi(content));
-
-			xmlFree(content);
-		}
-	}
-}
-
-void x264Options::parseRateControlOptions(xmlNode *node)
-{
-	for (xmlNode *xmlChild = node->children; xmlChild; xmlChild = xmlChild->next)
-	{
-		if (xmlChild->type == XML_ELEMENT_NODE)
-		{
-			char *content = (char*)xmlNodeGetContent(xmlChild);
-
-			if (strcmp((char*)xmlChild->name, "quantiserMinimum") == 0)
-				setQuantiserMinimum(atoi(content));
-			else if (strcmp((char*)xmlChild->name, "quantiserMaximum") == 0)
-				setQuantiserMaximum(atoi(content));
-			else if (strcmp((char*)xmlChild->name, "quantiserStep") == 0)
-				setQuantiserStep(atoi(content));
-			else if (strcmp((char*)xmlChild->name, "averageBitrateTolerance") == 0)
-				setAverageBitrateTolerance(atof(content));
-			else if (strcmp((char*)xmlChild->name, "vbvMaximumBitrate") == 0)
-				setVbvMaximumBitrate(atoi(content));
-			else if (strcmp((char*)xmlChild->name, "vbvBufferSize") == 0)
-				setVbvBufferSize(atoi(content));
-			else if (strcmp((char*)xmlChild->name, "vbvInitialOccupancy") == 0)
-				setVbvInitialOccupancy(atof(content));
-			else if (strcmp((char*)xmlChild->name, "ipFrameQuantiser") == 0)
-				setIpFrameQuantiser(atof(content));
-			else if (strcmp((char*)xmlChild->name, "pbFrameQuantiser") == 0)
-				setPbFrameQuantiser(atof(content));
-#if X264_BUILD >= 62
-			else if (strcmp((char*)xmlChild->name, "adaptiveQuantiserMode") == 0)
-			{
-				int adaptiveQuantiserMode = X264_AQ_VARIANCE;
-
-				if (strcmp(content, "none") == 0)
-					adaptiveQuantiserMode = X264_AQ_NONE;
-				else if (strcmp(content, "variance") == 0)
-					adaptiveQuantiserMode = X264_AQ_VARIANCE;
-
-				setAdaptiveQuantiserMode(adaptiveQuantiserMode);
-			}
-			else if (strcmp((char*)xmlChild->name, "adaptiveQuantiserStrength") == 0)
-				setAdaptiveQuantiserStrength(atof(content));
-#endif
-			else if (strcmp((char*)xmlChild->name, "quantiserCurveCompression") == 0)
-				setQuantiserCurveCompression(atof(content));
-			else if (strcmp((char*)xmlChild->name, "reduceFluxBeforeCurveCompression") == 0)
-				setReduceFluxBeforeCurveCompression(atof(content));
-			else if (strcmp((char*)xmlChild->name, "reduceFluxAfterCurveCompression") == 0)
-				setReduceFluxAfterCurveCompression(atof(content));
-			else if (strcmp((char*)xmlChild->name, "zone") == 0)
-				parseZoneOptions(xmlChild);
-			else
-				printf("%s\n", xmlChild->name);
-
-			xmlFree(content);
-		}
-	}
-}
-
-void x264Options::parseZoneOptions(xmlNode *zoneNode)
-{
-	x264ZoneOptions option;
-
-	for (xmlNode *xmlChild = zoneNode->children; xmlChild; xmlChild = xmlChild->next)
-	{
-		char *content = (char*)xmlNodeGetContent(xmlChild);
-
-		if (strcmp((char*)xmlChild->name, "frameStart") == 0)
-			option.setFrameRange(atoi(content), option.getFrameEnd());
-		else if (strcmp((char*)xmlChild->name, "frameEnd") == 0)
-			option.setFrameRange(option.getFrameStart(), atoi(content));
-		else if (strcmp((char*)xmlChild->name, "quantiser") == 0)
-			option.setQuantiser(atoi(content));
-		else if (strcmp((char*)xmlChild->name, "bitrateFactor") == 0)
-			option.setBitrateFactor((int)floor(atoi(content) * 100 + .5));
-
-		xmlFree(content);
-	}
-
-	addZone(&option);
-}
-
-
-xmlChar* x264Options::number2String(xmlChar *buffer, size_t size, int number)
-{
-	std::ostringstream stream;
-
-	stream.imbue(std::locale::classic());
-	stream << number;
-	std::string string = stream.str();
-
-	strncpy((char*)buffer, string.c_str(), size);
-
-	return buffer;
-}
-
-xmlChar* x264Options::number2String(xmlChar *buffer, size_t size, unsigned int number)
-{
-	std::ostringstream stream;
-
-	stream.imbue(std::locale::classic());
-	stream << number;
-	std::string string = stream.str();
-
-	strncpy((char*)buffer, string.c_str(), size);
-
-	return buffer;
-}
-
-xmlChar* x264Options::number2String(xmlChar *buffer, size_t size, float number)
-{
-	std::ostringstream stream;
-
-	stream.imbue(std::locale::classic());
-	stream << number;
-	std::string string = stream.str();
-
-	strncpy((char*)buffer, string.c_str(), size);
-
-	return buffer;
-}
-
-xmlChar* x264Options::boolean2String(xmlChar *buffer, size_t size, bool boolean)
-{
-	if (boolean)
-		strncpy((char*)buffer, "true", size);
-	else
-		strncpy((char*)buffer, "false", size);
-
-	return buffer;
-}
-
-bool x264Options::string2Boolean(char *buffer)
-{
-	return (strcmp(buffer, "true") == 0);
-}

Deleted: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/options.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/options.h	2009-07-08 13:35:21 UTC (rev 5016)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/options.h	2009-07-08 13:35:56 UTC (rev 5017)
@@ -1,334 +0,0 @@
-/***************************************************************************
-                                x264Options.h
-
-    begin                : Mon Apr 21 2008
-    copyright            : (C) 2008 by gruntster
- ***************************************************************************/
-
-/***************************************************************************
- *                                                                         *
- *   This program is free software; you can redistribute it and/or modify  *
- *   it under the terms of the GNU General Public License as published by  *
- *   the Free Software Foundation; either version 2 of the License, or     *
- *   (at your option) any later version.                                   *
- *                                                                         *
- ***************************************************************************/
-
-#ifndef options_h
-#define options_h
-
-#include <vector>
-#include <libxml/tree.h>
-
-#include "zoneOptions.h"
-
-extern "C"
-{
-#include "x264.h"
-#include "ADM_vidEnc_plugin.h"
-}
-
-#define DEFAULT_ENCODE_MODE ADM_VIDENC_MODE_AQP
-#define DEFAULT_ENCODE_MODE_PARAMETER 26
-
-typedef enum
-{
-	CONFIG_CUSTOM,
-	CONFIG_DEFAULT,
-	CONFIG_USER,
-	CONFIG_SYSTEM
-} configType;
-
-class x264Options
-{
-protected:
-	x264_param_t _param;
-	std::vector<x264ZoneOptions*> _zoneOptions;
-
-	char* _configurationName;
-	configType _configurationType;
-
-	bool _sarAsInput;
-
-	void cleanUp(void);
-	xmlChar* number2String(xmlChar *buffer, size_t size, int number);
-	xmlChar* number2String(xmlChar *buffer, size_t size, unsigned int number);
-	xmlChar* number2String(xmlChar *buffer, size_t size, float number);
-	xmlChar* boolean2String(xmlChar *buffer, size_t size, bool boolean);
-	bool string2Boolean(char *buffer);
-
-	void addX264OptionsToXml(xmlNodePtr xmlNodeRoot);
-	char* dumpXmlDocToMemory(xmlDocPtr xmlDoc);
-	bool validateXml(xmlDocPtr doc);
-	void parsePresetConfiguration(xmlNode *node);
-	void parseX264Options(xmlNode *node);
-
-private:
-	void parseVuiOptions(xmlNode *node);
-	void parseCqmOption(xmlNode *node, uint8_t cqm[]);
-	void parseAnalyseOptions(xmlNode *node);
-	void parseRateControlOptions(xmlNode *node);
-	void parseZoneOptions(xmlNode *zoneNode);
-
-public:
-	x264Options(void);
-	~x264Options(void);
-
-	void reset(void);
-	x264_param_t* getParameters(void);
-
-	void getPresetConfiguration(char** configurationName, configType *configurationType);
-	void setPresetConfiguration(const char* configurationName, configType configurationType);
-	void clearPresetConfiguration(void);
-
-	int getThreads(void);
-	void setThreads(int threads);
-
-	bool getDeterministic(void);
-	void setDeterministic(bool deterministic);
-
-	int getIdcLevel(void);
-	void setIdcLevel(int idcLevel);
-
-	bool getSarAsInput(void);
-	void setSarAsInput(bool sarAsInput);
-
-	unsigned int getSarHeight(void);
-	void setSarHeight(unsigned int height);
-
-	unsigned int getSarWidth(void);
-	void setSarWidth(unsigned int width);
-
-	unsigned int getOverscan(void);
-	void setOverscan(unsigned int overscan);
-
-	unsigned int getVideoFormat(void);
-	void setVideoFormat(unsigned int videoFormat);
-
-	bool getFullRangeSamples(void);
-	void setFullRangeSamples(bool fullRangeSamples);
-
-	unsigned int getColorPrimaries(void);
-	void setColorPrimaries(unsigned int colorPrimaries);
-
-	unsigned int getTransfer(void);
-	void setTransfer(unsigned int transfer);
-
-	unsigned int getColorMatrix(void);
-	void setColorMatrix(unsigned int transfer);
-
-	unsigned int getChromaSampleLocation(void);
-	void setChromaSampleLocation(unsigned int chromaSampleLocation);
-
-	unsigned int getReferenceFrames(void);
-	void setReferenceFrames(unsigned int referenceFrames);
-
-	unsigned int getGopMinimumSize(void);
-	void setGopMinimumSize(unsigned int gopSize);
-
-	unsigned int getGopMaximumSize(void);
-	void setGopMaximumSize(unsigned int gopSize);
-
-	unsigned int getScenecutThreshold(void);
-	void setScenecutThreshold(unsigned int scenecutThreshold);
-
-#if X264_BUILD < 67
-	bool getPreScenecutDetection(void);
-	void setPreScenecutDetection(bool preScenecutDetection);
-#endif
-
-	unsigned int getBFrames(void);
-	void setBFrames(unsigned int bFrames);
-
-	unsigned int getAdaptiveBFrameDecision(void);
-	void setAdaptiveBFrameDecision(unsigned int adaptiveBframeDecision);
-
-	int getBFrameBias(void);
-	void setBFrameBias(int bFrameBias);
-
-	bool getBFrameReferences(void);
-	void setBFrameReferences(bool bFrameReferences);
-
-	bool getLoopFilter(void);
-	void setLoopFilter(bool loopFilter);
-
-	int getLoopFilterAlphaC0(void);
-	void setLoopFilterAlphaC0(int loopFilterAlphaC0);
-
-	int getLoopFilterBeta(void);
-	void setLoopFilterBeta(int loopFilterBeta);
-
-	bool getCabac(void);
-	void setCabac(bool cabac);
-
-	bool getInterlaced(void);
-	void setInterlaced(bool interlaced);
-
-	unsigned int getCqmPreset(void);
-	void setCqmPreset(unsigned int cqmPreset);
-
-	uint8_t* getIntra4x4Luma(void);
-	void setIntra4x4Luma(uint8_t intra4x4Luma[]);
-
-	uint8_t* getIntraChroma(void);
-	void setIntraChroma(uint8_t intraChroma[]);
-
-	uint8_t* getInter4x4Luma(void);
-	void setInter4x4Luma(uint8_t inter4x4Luma[]);
-
-	uint8_t* getInterChroma(void);
-	void setInterChroma(uint8_t interChroma[]);
-
-	uint8_t* getIntra8x8Luma(void);
-	void setIntra8x8Luma(uint8_t intra8x8Luma[]);
-
-	uint8_t* getInter8x8Luma(void);
-	void setInter8x8Luma(uint8_t inter8x8Luma[]);
-
-	bool getPartitionI4x4(void);
-	void setPartitionI4x4(bool partitionI4x4);
-
-	bool getPartitionI8x8(void);
-	void setPartitionI8x8(bool partitionI8x8);
-
-	bool getPartitionP8x8(void);
-	void setPartitionP8x8(bool partitionP8x8);
-
-	bool getPartitionP4x4(void);
-	void setPartitionP4x4(bool partitionP4x4);
-
-	bool getPartitionB8x8(void);
-	void setPartitionB8x8(bool partitionB8x8);
-
-	bool getDct8x8(void);
-	void setDct8x8(bool dct8x8);
-
-	bool getWeightedPrediction(void);
-	void setWeightedPrediction(bool weightedPrediction);
-
-	unsigned int getDirectPredictionMode(void);
-	void setDirectPredictionMode(unsigned int directPredictionMode);
-
-#if X264_BUILD < 66
-	int getDirectPredictionSize(void);
-	void setDirectPredictionSize(int directPredictionSize);
-#endif
-
-	int getChromaLumaQuantiserDifference(void);
-	void setChromaLumaQuantiserDifference(int chromaLumaQuantiserDifference);
-
-	unsigned int getMotionEstimationMethod(void);
-	void setMotionEstimationMethod(unsigned int motionEstimationMethod);
-
-	unsigned int getMotionVectorSearchRange(void);
-	void setMotionVectorSearchRange(unsigned int motionVectorSearchRange);
-
-	int getMotionVectorLength(void);
-	void setMotionVectorLength(int motionVectorLength);
-
-	int getMotionVectorThreadBuffer(void);
-	void setMotionVectorThreadBuffer(int motionVectorThreadBuffer);
-
-	unsigned int getSubpixelRefinement(void);
-	void setSubpixelRefinement(unsigned int subpixelRefinement);
-
-#if X264_BUILD < 65
-	bool getBidirectionalMotionEstimation(void);
-	void setBidirectionalMotionEstimation(bool bidirectionalMotionEstimation);
-#endif
-
-	bool getChromaMotionEstimation(void);
-	void setChromaMotionEstimation(bool chromaMotionEstimation);
-
-#if X264_BUILD < 65
-	bool getBFrameRdo(void);
-	void setBFrameRdo(bool bFrameRdo);
-#endif
-
-	bool getMixedReferences(void);
-	void setMixedReferences(bool mixedReferences);
-
-	unsigned int getTrellis(void);
-	void setTrellis(unsigned int trellis);
-
-	bool getFastPSkip(void);
-	void setFastPSkip(bool fastPSkip);
-
-	bool getDctDecimate(void);
-	void setDctDecimate(bool dctDecimate);
-
-	unsigned int getNoiseReduction(void);
-	void setNoiseReduction(unsigned int noiseReduction);
-
-	unsigned int getInterLumaDeadzone(void);
-	void setInterLumaDeadzone(unsigned int interLumaDeadzone);
-
-	unsigned int getIntraLumaDeadzone(void);
-	void setIntraLumaDeadzone(unsigned int intraLumaDeadzone);
-
-	bool getComputePsnr(void);
-	void setComputePsnr(bool computePsnr);
-
-	bool getComputeSsim(void);
-	void setComputeSsim(bool computeSsim);
-
-	unsigned int getQuantiserMinimum(void);
-	void setQuantiserMinimum(unsigned int quantiserMinimum);
-
-	unsigned int getQuantiserMaximum(void);
-	void setQuantiserMaximum(unsigned int quantiserMaximum);
-
-	unsigned int getQuantiserStep(void);
-	void setQuantiserStep(unsigned int quantiserStep);
-
-	float getAverageBitrateTolerance(void);
-	void setAverageBitrateTolerance(float averageBitrateTolerance);
-
-	unsigned int getVbvMaximumBitrate(void);
-	void setVbvMaximumBitrate(unsigned int vbvMaximumBitrate);
-
-	unsigned int getVbvBufferSize(void);
-	void setVbvBufferSize(unsigned int vbvBufferSize);
-
-	float getVbvInitialOccupancy(void);
-	void setVbvInitialOccupancy(float vbvInitialOccupancy);
-
-	float getIpFrameQuantiser(void);
-	void setIpFrameQuantiser(float ipFrameQuantiser);
-
-	float getPbFrameQuantiser(void);
-	void setPbFrameQuantiser(float pbFrameQuantiser);
-
-#if X264_BUILD >= 62
-	unsigned int getAdaptiveQuantiserMode(void);
-	void setAdaptiveQuantiserMode(unsigned int adaptiveQuantiserMode);
-
-	float getAdaptiveQuantiserStrength(void);
-	void setAdaptiveQuantiserStrength(float adaptiveQuantiserStrength);
-#endif
-
-	float getQuantiserCurveCompression(void);
-	void setQuantiserCurveCompression(float quantiserCurveCompression);
-
-	float getReduceFluxBeforeCurveCompression(void);
-	void setReduceFluxBeforeCurveCompression(float reduceFluxBeforeCurveCompression);
-
-	float getReduceFluxAfterCurveCompression(void);
-	void setReduceFluxAfterCurveCompression(float reduceFluxAfterCurveCompression);
-
-	unsigned int getZoneCount(void);
-	x264ZoneOptions** getZones(void);
-	void clearZones(void);
-	void addZone(x264ZoneOptions *zoneOptions);
-
-	bool getAccessUnitDelimiters(void);
-	void setAccessUnitDelimiters(bool accessUnitDelimiters);
-
-	unsigned int getSpsIdentifier(void);
-	void setSpsIdentifier(unsigned int spsIdentifier);
-
-	virtual char* toXml(void);
-	virtual int fromXml(const char *xml);
-};
-
-#endif	// options_h

Deleted: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/presetOptions.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/presetOptions.cpp	2009-07-08 13:35:21 UTC (rev 5016)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/presetOptions.cpp	2009-07-08 13:35:56 UTC (rev 5017)
@@ -1,163 +0,0 @@
- /***************************************************************************
-                             presetOptions.cpp
-
-	These settings are intended for external configuration files and don't
-	contain a Preset Configuration block but may contain an Encode Options
-	block.
-
-    begin                : Fri May 23 2008
-    copyright            : (C) 2008 by gruntster
- ***************************************************************************/
-
-/***************************************************************************
- *                                                                         *
- *   This program is free software; you can redistribute it and/or modify  *
- *   it under the terms of the GNU General Public License as published by  *
- *   the Free Software Foundation; either version 2 of the License, or     *
- *   (at your option) any later version.                                   *
- *                                                                         *
- ***************************************************************************/
-#include <libxml/parser.h>
-#include "ADM_default.h"
-#include "presetOptions.h"
-
-x264PresetOptions::x264PresetOptions(void) : x264Options()
-{
-	setEncodeOptionsToDefaults();
-}
-
-vidEncOptions* x264PresetOptions::getEncodeOptions(void)
-{
-	vidEncOptions *encodeOptions = new vidEncOptions;
-
-	memcpy(encodeOptions, &_encodeOptions, sizeof(vidEncOptions));
-
-	return encodeOptions;
-}
-
-void x264PresetOptions::setEncodeOptions(vidEncOptions* encodeOptions)
-{
-	memcpy(&_encodeOptions, encodeOptions, sizeof(vidEncOptions));
-}
-
-char* x264PresetOptions::toXml(void)
-{
-	xmlDocPtr xmlDoc = xmlNewDoc((const xmlChar*)"1.0");
-	xmlNodePtr xmlNodeRoot, xmlNodeChild;
-	const int bufferSize = 100;
-	xmlChar xmlBuffer[bufferSize + 1];
-	char *xml = NULL;
-
-	while (true)
-	{
-		if (!xmlDoc)
-			break;
-
-		if (!(xmlNodeRoot = xmlNewDocNode(xmlDoc, NULL, (xmlChar*)"x264Config", NULL)))
-			break;
-
-		xmlDocSetRootElement(xmlDoc, xmlNodeRoot);
-
-		xmlNodeChild = xmlNewChild(xmlNodeRoot, NULL, (xmlChar*)"encodeOptions", NULL);
-
-		switch (_encodeOptions.encodeMode)
-		{
-			case ADM_VIDENC_MODE_CBR:
-				strcpy((char*)xmlBuffer, "CBR");
-				break;
-			case ADM_VIDENC_MODE_CQP:
-				strcpy((char*)xmlBuffer, "CQP");
-				break;
-			case ADM_VIDENC_MODE_AQP:
-				strcpy((char*)xmlBuffer, "AQP");
-				break;
-			case ADM_VIDENC_MODE_2PASS_SIZE:
-				strcpy((char*)xmlBuffer, "2PASS SIZE");
-				break;
-			case ADM_VIDENC_MODE_2PASS_ABR:
-				strcpy((char*)xmlBuffer, "2PASS ABR");
-				break;
-		}
-
-		xmlNewChild(xmlNodeChild, NULL, (xmlChar*)"mode", xmlBuffer);
-		xmlNewChild(xmlNodeChild, NULL, (xmlChar*)"parameter", number2String(xmlBuffer, bufferSize, _encodeOptions.encodeModeParameter));
-
-		addX264OptionsToXml(xmlNodeRoot);
-		xml = dumpXmlDocToMemory(xmlDoc);
-		xmlFreeDoc(xmlDoc);
-
-		break;
-	}
-
-	return xml;
-}
-
-int x264PresetOptions::fromXml(const char *xml)
-{
-	bool success = false;
-
-	clearPresetConfiguration();
-	clearZones();
-	setEncodeOptionsToDefaults();
-
-	xmlDocPtr doc = xmlReadMemory(xml, strlen(xml), "x264.xml", NULL, 0);
-
-	if (success = validateXml(doc))
-	{
-		xmlNode *xmlNodeRoot = xmlDocGetRootElement(doc);
-
-		for (xmlNode *xmlChild = xmlNodeRoot->children; xmlChild; xmlChild = xmlChild->next)
-		{
-			if (xmlChild->type == XML_ELEMENT_NODE)
-			{
-				char *content = (char*)xmlNodeGetContent(xmlChild);
-
-				if (strcmp((char*)xmlChild->name, "encodeOptions") == 0)
-					parseEncodeOptions(xmlChild, &_encodeOptions);
-				else if (strcmp((char*)xmlChild->name, "x264Options") == 0)
-					parseX264Options(xmlChild);
-
-				xmlFree(content);
-			}
-		}
-	}
-
-	xmlFreeDoc(doc);
-
-	return success;
-}
-
-void x264PresetOptions::parseEncodeOptions(xmlNode *node, vidEncOptions *encodeOptions)
-{
-	for (xmlNode *xmlChild = node->children; xmlChild; xmlChild = xmlChild->next)
-	{
-		if (xmlChild->type == XML_ELEMENT_NODE)
-		{
-			char *content = (char*)xmlNodeGetContent(xmlChild);
-
-			if (strcmp((char*)xmlChild->name, "mode") == 0)
-			{
-				if (strcmp(content, "CBR") == 0)
-					encodeOptions->encodeMode = ADM_VIDENC_MODE_CBR;
-				else if (strcmp(content, "CQP") == 0)
-					encodeOptions->encodeMode = ADM_VIDENC_MODE_CQP;
-				else if (strcmp(content, "AQP") == 0)
-					encodeOptions->encodeMode = ADM_VIDENC_MODE_AQP;
-				else if (strcmp(content, "2PASS SIZE") == 0)
-					encodeOptions->encodeMode = ADM_VIDENC_MODE_2PASS_SIZE;
-				else if (strcmp(content, "2PASS ABR") == 0)
-					encodeOptions->encodeMode = ADM_VIDENC_MODE_2PASS_ABR;
-			}
-			else if (strcmp((char*)xmlChild->name, "parameter") == 0)
-				encodeOptions->encodeModeParameter = atoi(content);
-
-			xmlFree(content);
-		}
-	}
-}
-
-void x264PresetOptions::setEncodeOptionsToDefaults(void)
-{
-	_encodeOptions.encodeMode = DEFAULT_ENCODE_MODE;
-	_encodeOptions.encodeModeParameter = DEFAULT_ENCODE_MODE_PARAMETER;
-}

Deleted: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/presetOptions.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/presetOptions.h	2009-07-08 13:35:21 UTC (rev 5016)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/presetOptions.h	2009-07-08 13:35:56 UTC (rev 5017)
@@ -1,39 +0,0 @@
-/***************************************************************************
-                              presetOptions.h
-
-    begin                : Fri May 23 2008
-    copyright            : (C) 2008 by gruntster
- ***************************************************************************/
-
-/***************************************************************************
- *                                                                         *
- *   This program is free software; you can redistribute it and/or modify  *
- *   it under the terms of the GNU General Public License as published by  *
- *   the Free Software Foundation; either version 2 of the License, or     *
- *   (at your option) any later version.                                   *
- *                                                                         *
- ***************************************************************************/
-
-#ifndef presetOptions_h
-#define presetOptions_h
-
-#include "options.h"
-
-class x264PresetOptions : public x264Options
-{
-private:
-	vidEncOptions _encodeOptions;
-
-	void parseEncodeOptions(xmlNode *node, vidEncOptions *encodeOptions);
-	void setEncodeOptionsToDefaults(void);
-
-public:
-	x264PresetOptions(void);
-
-	vidEncOptions* getEncodeOptions(void);
-	void setEncodeOptions(vidEncOptions* encodeOptions);
-	char* toXml(void);
-	int fromXml(const char *xml);
-};
-
-#endif	// presetOptions_h

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp	2009-07-08 13:35:21 UTC (rev 5016)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp	2009-07-08 13:35:56 UTC (rev 5017)
@@ -21,7 +21,6 @@
 #include <QtGui/QFileDialog>
 
 #include "../config.h"
-#include "../presetOptions.h"
 #include "x264ConfigDialog.h"
 #include "x264CustomMatrixDialog.h"
 
@@ -177,16 +176,16 @@
 	disableGenericSlots = true;
 
 	for (int item = 0; item < list.size(); item++)
-		configs.insert(QFileInfo(list[item]).completeBaseName(), CONFIG_USER);
+		configs.insert(QFileInfo(list[item]).completeBaseName(), PLUGIN_CONFIG_USER);
 
 	list = QDir(getSystemConfigDirectory()).entryList(filter, QDir::Files | QDir::Readable);
 
 	for (int item = 0; item < list.size(); item++)
-		configs.insert(QFileInfo(list[item]).completeBaseName(), CONFIG_SYSTEM);
+		configs.insert(QFileInfo(list[item]).completeBaseName(), PLUGIN_CONFIG_SYSTEM);
 
 	ui.configurationComboBox->clear();
-	ui.configurationComboBox->addItem(QT_TR_NOOP("<default>"), CONFIG_DEFAULT);
-	ui.configurationComboBox->addItem(QT_TR_NOOP("<custom>"), CONFIG_CUSTOM);
+	ui.configurationComboBox->addItem(QT_TR_NOOP("<default>"), PLUGIN_CONFIG_DEFAULT);
+	ui.configurationComboBox->addItem(QT_TR_NOOP("<custom>"), PLUGIN_CONFIG_CUSTOM);
 
 	QMap<QString, int>::const_iterator mapIterator = configs.constBegin();
 
@@ -199,14 +198,14 @@
 	disableGenericSlots = origDisableGenericSlots;
 }
 
-bool x264ConfigDialog::selectConfiguration(QString *selectFile, configType configurationType)
+bool x264ConfigDialog::selectConfiguration(QString *selectFile, PluginConfigType configurationType)
 {
 	bool success = false;
 	bool origDisableGenericSlots = disableGenericSlots;
 
 	disableGenericSlots = true;
 
-	if (configurationType == CONFIG_DEFAULT)
+	if (configurationType == PLUGIN_CONFIG_DEFAULT)
 	{
 		ui.configurationComboBox->setCurrentIndex(0);
 		success = true;
@@ -272,7 +271,7 @@
 	{
 		ui.deleteButton->setEnabled(false);
 
-		x264PresetOptions defaultOptions;
+		x264Options defaultOptions;
 		vidEncOptions *defaultEncodeOptions = defaultOptions.getEncodeOptions();
 
 		loadSettings(defaultEncodeOptions, &defaultOptions);
@@ -286,11 +285,11 @@
 		int configType = ui.configurationComboBox->itemData(index).toInt();
 		QString configFileName;
 
-		ui.deleteButton->setEnabled(configType == CONFIG_USER);
+		ui.deleteButton->setEnabled(configType == PLUGIN_CONFIG_USER);
 
-		if (configType == CONFIG_SYSTEM)
+		if (configType == PLUGIN_CONFIG_SYSTEM)
 			configFileName = QFileInfo(getSystemConfigDirectory(), ui.configurationComboBox->itemText(index) + ".xml").filePath();
-		else	// CONFIG_USER
+		else	// PLUGIN_CONFIG_USER
 			configFileName = QFileInfo(getUserConfigDirectory(), ui.configurationComboBox->itemText(index) + ".xml").filePath();
 
 		QFile configFile(configFileName);
@@ -300,11 +299,11 @@
 			configFile.open(QIODevice::ReadOnly | QIODevice::Text);
 
 			QByteArray fileContents = configFile.readAll();
-			x264PresetOptions options;
+			x264Options options;
 			vidEncOptions *encodeOptions;
 
 			configFile.close();
-			options.fromXml(fileContents.constData());
+			options.fromXml(fileContents.constData(), PLUGIN_XML_EXTERNAL);
 			encodeOptions = options.getEncodeOptions();
 
 			loadSettings(encodeOptions, &options);
@@ -330,13 +329,13 @@
 	{
 		QFile configFile(configFileName);
 		vidEncOptions encodeOptions;
-		x264PresetOptions presetOptions;
+		x264Options options;
 
 		configFile.open(QIODevice::WriteOnly | QIODevice::Truncate | QIODevice::Text);
-		saveSettings(&encodeOptions, &presetOptions);
-		presetOptions.setEncodeOptions(&encodeOptions);
+		saveSettings(&encodeOptions, &options);
+		options.setEncodeOptions(&encodeOptions);
 
-		char* xml = presetOptions.toXml();
+		char* xml = options.toXml(PLUGIN_XML_EXTERNAL);
 
 		configFile.write(xml, strlen(xml));
 		configFile.close();
@@ -344,7 +343,7 @@
 		delete [] xml;
 
 		fillConfigurationComboBox();
-		selectConfiguration(&QFileInfo(configFileName).completeBaseName(), CONFIG_USER);
+		selectConfiguration(&QFileInfo(configFileName).completeBaseName(), PLUGIN_CONFIG_USER);
 	}
 
 	delete [] configDirectory;
@@ -553,7 +552,7 @@
 {
 	bool origDisableGenericSlots = disableGenericSlots;
 	char *configurationName;
-	configType configurationType;
+	PluginConfigType configurationType;
 
 	disableGenericSlots = true;
 	options->getPresetConfiguration(&configurationName, &configurationType);		
@@ -568,7 +567,7 @@
 
 	disableGenericSlots = origDisableGenericSlots;
 
-	return (foundConfig && configurationType != CONFIG_CUSTOM);
+	return (foundConfig && configurationType != PLUGIN_CONFIG_CUSTOM);
 }
 
 void x264ConfigDialog::loadSettings(vidEncOptions *encodeOptions, x264Options *options)
@@ -829,7 +828,7 @@
 			break;
 	}
 
-	configType configurationType = (configType)ui.configurationComboBox->itemData(ui.configurationComboBox->currentIndex()).toInt();
+	PluginConfigType configurationType = (PluginConfigType)ui.configurationComboBox->itemData(ui.configurationComboBox->currentIndex()).toInt();
 
 	options->setPresetConfiguration(ui.configurationComboBox->currentText().toUtf8().constData(), configurationType);
 	options->setSarAsInput(ui.sarAsInputRadioButton->isChecked());
@@ -1024,4 +1023,4 @@
 	}
 
 	return 0;
-}
\ No newline at end of file
+}

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.h	2009-07-08 13:35:21 UTC (rev 5016)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.h	2009-07-08 13:35:56 UTC (rev 5017)
@@ -2,7 +2,7 @@
 #define x264ConfigDialog_h
 
 #include "ui_x264ConfigDialog.h"
-#include "../options.h"
+#include "../x264Options.h"
 #include "x264ZoneTableModel.h"
 #include "x264ZoneTableDelegate.h"
 
@@ -45,7 +45,7 @@
 	uint8_t intra8x8Luma[64], inter8x8Luma[64];
 
 	void fillConfigurationComboBox(void);
-	bool selectConfiguration(QString *selectFile, configType configurationType);
+	bool selectConfiguration(QString *selectFile, PluginConfigType configurationType);
 	bool loadPresetSettings(vidEncOptions *encodeOptions, x264Options *options);
 	void loadSettings(vidEncOptions *encodeOptions, x264Options *options);
 	int getValueIndexInArray(uint8_t value, const uint8_t valueArray[], int elementCount);

Copied: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/x264Options.cpp (from rev 5002, branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/options.cpp)
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/options.cpp	2009-07-06 05:48:05 UTC (rev 5002)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/x264Options.cpp	2009-07-08 13:35:56 UTC (rev 5017)
@@ -0,0 +1,1807 @@
+ /***************************************************************************
+                               x264Options.cpp
+
+	These settings are intended for scripting and can contain a Preset 
+	Configuration block.  If this block exists then "internal" settings are
+	ignored and an external configuration file should be read instead, 
+	e.g. PlayStation Portable profile.  However, if the external file is 
+	missing, internal settings have to be used and will reflect a snapshot
+	of the external configuration file at the time the script was generated.
+
+    begin                : Mon Apr 21 2008
+    copyright            : (C) 2008 by gruntster
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+
+#include <math.h>
+#include <libxml/parser.h>
+#include <libxml/xmlschemas.h>
+#include <sstream>
+#include <string>
+
+#include "config.h"
+#include "ADM_inttype.h"
+#include "ADM_files.h"
+#include "x264Options.h"
+
+x264Options::x264Options(void) : PluginOptions("x264", "x264Param.xsd", DEFAULT_ENCODE_MODE, DEFAULT_ENCODE_MODE_PARAMETER)
+{
+	_configurationName = NULL;
+	memset(&_param, 0, sizeof(x264_param_t));
+
+	reset();
+}
+
+x264Options::~x264Options(void)
+{
+	cleanUp();
+}
+
+void x264Options::cleanUp(void)
+{
+	PluginOptions::cleanUp();
+	clearZones();
+}
+
+void x264Options::reset(void)
+{
+	PluginOptions::reset();
+
+	x264_param_default(&_param);
+	_param.vui.i_sar_height = 1;
+	_param.vui.i_sar_width = 1;
+	_param.i_threads = 0;	// set to auto-detect; default is disabled
+
+	_sarAsInput = false;
+}
+
+x264_param_t* x264Options::getParameters(void)
+{
+	x264_param_t *param = new x264_param_t;
+
+	memcpy(param, &_param, sizeof(x264_param_t));
+	param->rc.i_zones = getZoneCount();
+
+	if (param->rc.i_zones)
+	{
+		param->rc.zones = new x264_zone_t[param->rc.i_zones];
+
+		for (int zone = 0; zone < param->rc.i_zones; zone++)
+			_zoneOptions[zone]->setX264Zone(&param->rc.zones[zone]);
+	}
+
+	return param;
+}
+
+int x264Options::getThreads(void)
+{
+	return _param.i_threads;
+}
+
+void x264Options::setThreads(int threads)
+{
+	if (threads >= 0)
+		_param.i_threads = threads;
+}
+
+bool x264Options::getDeterministic(void)
+{
+	return _param.b_deterministic;
+}
+
+void x264Options::setDeterministic(bool deterministic)
+{
+	_param.b_deterministic = deterministic;
+}
+
+int x264Options::getIdcLevel(void)
+{
+	return _param.i_level_idc;
+}
+
+void x264Options::setIdcLevel(int idcLevel)
+{
+	switch (idcLevel)
+	{
+		case -1:
+		case 1:
+		case 11:
+		case 12:
+		case 13:
+		case 2:
+		case 21:
+		case 22:
+		case 3:
+		case 31:
+		case 32:
+		case 4:
+		case 41:
+		case 42:
+		case 5:
+		case 51:
+			_param.i_level_idc = idcLevel;
+	}
+}
+
+bool x264Options::getSarAsInput(void)
+{
+	return _sarAsInput;
+}
+
+void x264Options::setSarAsInput(bool sarAsInput)
+{
+	_sarAsInput = sarAsInput;
+}
+
+unsigned int x264Options::getSarHeight(void)
+{
+	return _param.vui.i_sar_height;
+}
+
+void x264Options::setSarHeight(unsigned int height)
+{
+	_param.vui.i_sar_height = height;
+}
+
+unsigned int x264Options::getSarWidth(void)
+{
+	return _param.vui.i_sar_width;
+}
+
+void x264Options::setSarWidth(unsigned int width)
+{
+	_param.vui.i_sar_width = width;
+}
+
+unsigned int x264Options::getOverscan(void)
+{
+	return _param.vui.i_overscan;
+}
+
+void x264Options::setOverscan(unsigned int overscan)
+{
+	if (overscan <= 2)
+		_param.vui.i_overscan = overscan;
+}
+
+unsigned int x264Options::getVideoFormat(void)
+{
+	return _param.vui.i_vidformat;
+}
+
+void x264Options::setVideoFormat(unsigned int videoFormat)
+{
+	if (videoFormat <= 5)
+		_param.vui.i_vidformat = videoFormat;
+}
+
+bool x264Options::getFullRangeSamples(void)
+{
+	return _param.vui.b_fullrange;
+}
+
+void x264Options::setFullRangeSamples(bool fullRangeSamples)
+{
+	_param.vui.b_fullrange = fullRangeSamples;
+}
+
+unsigned int x264Options::getColorPrimaries(void)
+{
+	return _param.vui.i_colorprim;
+}
+
+void x264Options::setColorPrimaries(unsigned int colorPrimaries)
+{
+	if (colorPrimaries <= 8 && colorPrimaries != 0 && colorPrimaries != 3)
+		_param.vui.i_colorprim = colorPrimaries;
+}
+
+unsigned int x264Options::getTransfer(void)
+{
+	return _param.vui.i_transfer;
+}
+
+void x264Options::setTransfer(unsigned int transfer)
+{
+	if (transfer <= 10 && transfer != 0 && transfer != 3)
+		_param.vui.i_transfer = transfer;
+}
+
+unsigned int x264Options::getColorMatrix(void)
+{
+	return _param.vui.i_colmatrix;
+}
+
+void x264Options::setColorMatrix(unsigned int colorMatrix)
+{
+	if (colorMatrix <= 8 && colorMatrix != 3)
+		_param.vui.i_colmatrix = colorMatrix;
+}
+
+unsigned int x264Options::getChromaSampleLocation(void)
+{
+	return _param.vui.i_chroma_loc;
+}
+
+void x264Options::setChromaSampleLocation(unsigned int chromaSampleLocation)
+{
+	if (chromaSampleLocation <= 5)
+		_param.vui.i_chroma_loc = chromaSampleLocation;
+}
+
+unsigned int x264Options::getReferenceFrames(void)
+{
+	return _param.i_frame_reference;
+}
+
+void x264Options::setReferenceFrames(unsigned int referenceFrames)
+{
+	if (referenceFrames <= 16)
+		_param.i_frame_reference = referenceFrames;
+}
+
+unsigned int x264Options::getGopMinimumSize(void)
+{
+	return _param.i_keyint_min;
+}
+
+void x264Options::setGopMinimumSize(unsigned int gopSize)
+{
+	if (gopSize <= 100)
+		_param.i_keyint_min = gopSize;
+}
+
+unsigned int x264Options::getGopMaximumSize(void)
+{
+	return _param.i_keyint_max;
+}
+
+void x264Options::setGopMaximumSize(unsigned int gopSize)
+{
+	if (gopSize <= 1000)
+		_param.i_keyint_max = gopSize;
+}
+
+unsigned int x264Options::getScenecutThreshold(void)
+{
+	return _param.i_scenecut_threshold;
+}
+
+void x264Options::setScenecutThreshold(unsigned int scenecutThreshold)
+{
+	if (scenecutThreshold <= 100)
+		_param.i_scenecut_threshold = scenecutThreshold;
+}
+
+#if X264_BUILD < 67
+bool x264Options::getPreScenecutDetection(void)
+{
+	return _param.b_pre_scenecut;
+}
+
+void x264Options::setPreScenecutDetection(bool preScenecutDetection)
+{
+	_param.b_pre_scenecut = preScenecutDetection;
+}
+#endif
+
+unsigned int x264Options::getBFrames(void)
+{
+	return _param.i_bframe;
+}
+
+void x264Options::setBFrames(unsigned int bFrames)
+{
+	if (bFrames <= 100)
+		_param.i_bframe = bFrames;
+}
+
+unsigned int x264Options::getAdaptiveBFrameDecision(void)
+{
+#if X264_BUILD >= 63
+	return _param.i_bframe_adaptive;
+#else
+	return _param.b_bframe_adaptive;
+#endif
+}
+
+void x264Options::setAdaptiveBFrameDecision(unsigned int adaptiveBframeDecision)
+{
+	if (adaptiveBframeDecision <= 2)
+#if X264_BUILD >= 63
+		_param.i_bframe_adaptive = adaptiveBframeDecision;
+#else
+		_param.b_bframe_adaptive = adaptiveBframeDecision;
+#endif
+}
+
+int x264Options::getBFrameBias(void)
+{
+	return _param.i_bframe_bias;
+}
+
+void x264Options::setBFrameBias(int bFrameBias)
+{
+	if (bFrameBias >= -100 && bFrameBias <= 100)
+		_param.i_bframe_bias = bFrameBias;
+}
+
+bool x264Options::getBFrameReferences(void)
+{
+	return _param.b_bframe_pyramid;
+}
+
+void x264Options::setBFrameReferences(bool bFrameReferences)
+{
+	_param.b_bframe_pyramid = bFrameReferences;
+}
+
+bool x264Options::getLoopFilter(void)
+{
+	return _param.b_deblocking_filter;
+}
+
+void x264Options::setLoopFilter(bool loopFilter)
+{
+	_param.b_deblocking_filter = loopFilter;
+}
+
+int x264Options::getLoopFilterAlphaC0(void)
+{
+	return _param.i_deblocking_filter_alphac0;
+}
+
+void x264Options::setLoopFilterAlphaC0(int loopFilterAlphaC0)
+{
+	if (loopFilterAlphaC0 >= -6 && loopFilterAlphaC0 <= 6)
+		_param.i_deblocking_filter_alphac0 = loopFilterAlphaC0;
+}
+
+int x264Options::getLoopFilterBeta(void)
+{
+	return _param.i_deblocking_filter_beta;
+}
+
+void x264Options::setLoopFilterBeta(int loopFilterBeta)
+{
+	if (loopFilterBeta >= -6 && loopFilterBeta <= 6)
+		_param.i_deblocking_filter_beta = loopFilterBeta;
+}
+
+bool x264Options::getCabac(void)
+{
+	return _param.b_cabac;
+}
+
+void x264Options::setCabac(bool cabac)
+{
+	_param.b_cabac = cabac;
+}
+
+bool x264Options::getInterlaced(void)
+{
+	return _param.b_interlaced;
+}
+
+void x264Options::setInterlaced(bool interlaced)
+{
+	_param.b_interlaced = interlaced;
+}
+
+unsigned int x264Options::getCqmPreset(void)
+{
+	return _param.i_cqm_preset;
+}
+
+void x264Options::setCqmPreset(unsigned int cqmPreset)
+{
+	if (cqmPreset <= 2)
+		_param.i_cqm_preset = cqmPreset;
+}
+
+uint8_t* x264Options::getIntra4x4Luma(void)
+{
+	return _param.cqm_4iy;
+}
+
+void x264Options::setIntra4x4Luma(uint8_t intra4x4Luma[])
+{
+	memcpy(_param.cqm_4iy, intra4x4Luma, 16 * sizeof(uint8_t));
+}
+
+uint8_t* x264Options::getIntraChroma(void)
+{
+	return _param.cqm_4ic;
+}
+
+void x264Options::setIntraChroma(uint8_t intraChroma[])
+{
+	memcpy(_param.cqm_4ic, intraChroma, 16 * sizeof(uint8_t));
+}
+
+uint8_t* x264Options::getInter4x4Luma(void)
+{
+	return _param.cqm_4py;
+}
+
+void x264Options::setInter4x4Luma(uint8_t inter4x4Luma[])
+{
+	memcpy(_param.cqm_4py, inter4x4Luma, 16 * sizeof(uint8_t));
+}
+
+uint8_t* x264Options::getInterChroma(void)
+{
+	return _param.cqm_4pc;
+}
+
+void x264Options::setInterChroma(uint8_t interChroma[])
+{
+	memcpy(_param.cqm_4pc, interChroma, 16 * sizeof(uint8_t));
+}
+
+uint8_t* x264Options::getIntra8x8Luma(void)
+{
+	return _param.cqm_8iy;
+}
+
+void x264Options::setIntra8x8Luma(uint8_t intra8x8Luma[])
+{
+	memcpy(_param.cqm_8iy, intra8x8Luma, 64 * sizeof(uint8_t));
+}
+
+uint8_t* x264Options::getInter8x8Luma(void)
+{
+	return _param.cqm_8py;
+}
+
+void x264Options::setInter8x8Luma(uint8_t inter8x8Luma[])
+{
+	memcpy(_param.cqm_8py, inter8x8Luma, 64 * sizeof(uint8_t));
+}
+
+bool x264Options::getPartitionI4x4(void)
+{
+	return (_param.analyse.inter & X264_ANALYSE_I4x4) == X264_ANALYSE_I4x4;
+}
+
+void x264Options::setPartitionI4x4(bool partitionI4x4)
+{
+	if (partitionI4x4)
+		_param.analyse.inter |= X264_ANALYSE_I4x4;
+	else
+		_param.analyse.inter &= ~X264_ANALYSE_I4x4;
+}
+
+bool x264Options::getPartitionI8x8(void)
+{
+	return (_param.analyse.inter & X264_ANALYSE_I8x8) == X264_ANALYSE_I8x8;
+}
+
+void x264Options::setPartitionI8x8(bool partitionI8x8)
+{
+	if (partitionI8x8)
+		_param.analyse.inter |= X264_ANALYSE_I8x8;
+	else
+		_param.analyse.inter &= ~X264_ANALYSE_I8x8;
+}
+
+bool x264Options::getPartitionP8x8(void)
+{
+	return (_param.analyse.inter & X264_ANALYSE_PSUB16x16) == X264_ANALYSE_PSUB16x16;
+}
+
+void x264Options::setPartitionP8x8(bool partitionP8x8)
+{
+	if (partitionP8x8)
+		_param.analyse.inter |= X264_ANALYSE_PSUB16x16;
+	else
+		_param.analyse.inter &= ~X264_ANALYSE_PSUB16x16;
+}
+
+bool x264Options::getPartitionP4x4(void)
+{
+	return (_param.analyse.inter & X264_ANALYSE_PSUB8x8) == X264_ANALYSE_PSUB8x8;
+}
+
+void x264Options::setPartitionP4x4(bool partitionP4x4)
+{
+	if (partitionP4x4)
+		_param.analyse.inter |= X264_ANALYSE_PSUB8x8;
+	else
+		_param.analyse.inter &= ~X264_ANALYSE_PSUB8x8;
+}
+
+bool x264Options::getPartitionB8x8(void)
+{
+	return (_param.analyse.inter & X264_ANALYSE_BSUB16x16) == X264_ANALYSE_BSUB16x16;
+}
+
+void x264Options::setPartitionB8x8(bool partitionB8x8)
+{
+	if (partitionB8x8)
+		_param.analyse.inter |= X264_ANALYSE_BSUB16x16;
+	else
+		_param.analyse.inter &= ~X264_ANALYSE_BSUB16x16;
+}
+
+bool x264Options::getDct8x8(void)
+{
+	return _param.analyse.b_transform_8x8;
+}
+
+void x264Options::setDct8x8(bool dct8x8)
+{
+	_param.analyse.b_transform_8x8 = dct8x8;
+}
+
+bool x264Options::getWeightedPrediction(void)
+{
+	return _param.analyse.b_weighted_bipred;
+}
+
+void x264Options::setWeightedPrediction(bool weightedPrediction)
+{
+	_param.analyse.b_weighted_bipred = weightedPrediction;
+}
+
+unsigned int x264Options::getDirectPredictionMode(void)
+{
+	return _param.analyse.i_direct_mv_pred;
+}
+
+void x264Options::setDirectPredictionMode(unsigned int directPredictionMode)
+{
+	if (directPredictionMode <= 3)
+		_param.analyse.i_direct_mv_pred = directPredictionMode;
+}
+
+#if X264_BUILD < 66
+int x264Options::getDirectPredictionSize(void)
+{
+	return _param.analyse.i_direct_8x8_inference;
+}
+
+void x264Options::setDirectPredictionSize(int directPredictionSize)
+{
+	if (directPredictionSize >= -1 && directPredictionSize <= 1)
+		_param.analyse.i_direct_8x8_inference = directPredictionSize;
+}
+#endif
+
+int x264Options::getChromaLumaQuantiserDifference(void)
+{
+	return _param.analyse.i_chroma_qp_offset;
+}
+
+void x264Options::setChromaLumaQuantiserDifference(int chromaLumaQuantiserDifference)
+{
+	if (chromaLumaQuantiserDifference >= -12 && chromaLumaQuantiserDifference <= 12)
+		_param.analyse.i_chroma_qp_offset = chromaLumaQuantiserDifference;
+}
+
+unsigned int x264Options::getMotionEstimationMethod(void)
+{
+	return _param.analyse.i_me_method;
+}
+
+void x264Options::setMotionEstimationMethod(unsigned int motionEstimationMethod)
+{
+	if (motionEstimationMethod <= 4)
+		_param.analyse.i_me_method = motionEstimationMethod;
+}
+
+unsigned int x264Options::getMotionVectorSearchRange(void)
+{
+	return _param.analyse.i_me_range;
+}
+
+void x264Options::setMotionVectorSearchRange(unsigned int motionVectorSearchRange)
+{
+	if (motionVectorSearchRange <= 64)
+		_param.analyse.i_me_range = motionVectorSearchRange;
+}
+
+int x264Options::getMotionVectorLength(void)
+{
+	return _param.analyse.i_mv_range;
+}
+
+void x264Options::setMotionVectorLength(int motionVectorLength)
+{
+	if (motionVectorLength == -1 || (motionVectorLength >= 32 && motionVectorLength <= 512))
+		_param.analyse.i_mv_range = motionVectorLength;
+}
+
+int x264Options::getMotionVectorThreadBuffer(void)
+{
+	return _param.analyse.i_mv_range_thread;
+}
+
+void x264Options::setMotionVectorThreadBuffer(int motionVectorThreadBuffer)
+{
+	_param.analyse.i_mv_range_thread = motionVectorThreadBuffer;
+}
+
+unsigned int x264Options::getSubpixelRefinement(void)
+{
+	return _param.analyse.i_subpel_refine;
+}
+
+void x264Options::setSubpixelRefinement(unsigned int subpixelRefinement)
+{
+	if (subpixelRefinement >= 1 && subpixelRefinement <= 9)
+		_param.analyse.i_subpel_refine = subpixelRefinement;
+}
+
+#if X264_BUILD < 65
+bool x264Options::getBidirectionalMotionEstimation(void)
+{
+	return _param.analyse.b_bidir_me;
+}
+
+void x264Options::setBidirectionalMotionEstimation(bool bidirectionalMotionEstimation)
+{
+	_param.analyse.b_bidir_me = bidirectionalMotionEstimation;
+}
+#endif
+
+bool x264Options::getChromaMotionEstimation(void)
+{
+	return _param.analyse.b_chroma_me;
+}
+
+void x264Options::setChromaMotionEstimation(bool chromaMotionEstimation)
+{
+	_param.analyse.b_chroma_me = chromaMotionEstimation;
+}
+
+#if X264_BUILD < 65
+bool x264Options::getBFrameRdo(void)
+{
+	return _param.analyse.b_bframe_rdo;
+}
+
+void x264Options::setBFrameRdo(bool bFrameRdo)
+{
+	_param.analyse.b_bframe_rdo = bFrameRdo;
+}
+#endif
+
+bool x264Options::getMixedReferences(void)
+{
+	return _param.analyse.b_mixed_references;
+}
+
+void x264Options::setMixedReferences(bool mixedReferences)
+{
+	_param.analyse.b_mixed_references = mixedReferences;
+}
+
+unsigned int x264Options::getTrellis(void)
+{
+	return _param.analyse.i_trellis;
+}
+
+void x264Options::setTrellis(unsigned int trellis)
+{
+	if (trellis <= 2)
+		_param.analyse.i_trellis = trellis;
+}
+
+bool x264Options::getFastPSkip(void)
+{
+	return _param.analyse.b_fast_pskip;
+}
+
+void x264Options::setFastPSkip(bool fastPSkip)
+{
+	_param.analyse.b_fast_pskip = fastPSkip;
+}
+
+bool x264Options::getDctDecimate(void)
+{
+	return _param.analyse.b_dct_decimate;
+}
+
+void x264Options::setDctDecimate(bool dctDecimate)
+{
+	_param.analyse.b_dct_decimate = dctDecimate;
+}
+
+unsigned int x264Options::getNoiseReduction(void)
+{
+	return _param.analyse.i_noise_reduction;
+}
+
+void x264Options::setNoiseReduction(unsigned int noiseReduction)
+{
+	if (noiseReduction <= 65536)
+		_param.analyse.i_noise_reduction = noiseReduction;
+}
+
+unsigned int x264Options::getInterLumaDeadzone(void)
+{
+	return _param.analyse.i_luma_deadzone[0];
+}
+
+void x264Options::setInterLumaDeadzone(unsigned int interLumaDeadzone)
+{
+	if (interLumaDeadzone <= 32)
+		_param.analyse.i_luma_deadzone[0] = interLumaDeadzone;
+}
+
+unsigned int x264Options::getIntraLumaDeadzone(void)
+{
+	return _param.analyse.i_luma_deadzone[1];
+}
+
+void x264Options::setIntraLumaDeadzone(unsigned int intraLumaDeadzone)
+{
+	if (intraLumaDeadzone <= 32)
+		_param.analyse.i_luma_deadzone[1] = intraLumaDeadzone;
+}
+
+unsigned int x264Options::getQuantiserMinimum(void)
+{
+	return _param.rc.i_qp_min;
+}
+
+void x264Options::setQuantiserMinimum(unsigned int quantiserMinimum)
+{
+	if (quantiserMinimum >= 10 && quantiserMinimum <= 51)
+		_param.rc.i_qp_min = quantiserMinimum;
+}
+
+unsigned int x264Options::getQuantiserMaximum(void)
+{
+	return _param.rc.i_qp_max;
+}
+
+void x264Options::setQuantiserMaximum(unsigned int quantiserMaximum)
+{
+	if (quantiserMaximum >= 10 && quantiserMaximum <= 51)
+		_param.rc.i_qp_max = quantiserMaximum;
+}
+
+unsigned int x264Options::getQuantiserStep(void)
+{
+	return _param.rc.i_qp_step;
+}
+
+void x264Options::setQuantiserStep(unsigned int quantiserStep)
+{
+	if (quantiserStep <= 10)
+		_param.rc.i_qp_step = quantiserStep;
+}
+
+float x264Options::getAverageBitrateTolerance(void)
+{
+	return _param.rc.f_rate_tolerance;
+}
+
+void x264Options::setAverageBitrateTolerance(float averageBitrateTolerance)
+{
+	if (averageBitrateTolerance >= 0 && averageBitrateTolerance <= 1)
+		_param.rc.f_rate_tolerance = averageBitrateTolerance;
+}
+
+unsigned int x264Options::getVbvMaximumBitrate(void)
+{
+	return _param.rc.i_vbv_max_bitrate;
+}
+
+void x264Options::setVbvMaximumBitrate(unsigned int vbvMaximumBitrate)
+{
+	if (vbvMaximumBitrate <= 99999)
+		_param.rc.i_vbv_max_bitrate = vbvMaximumBitrate;
+}
+
+unsigned int x264Options::getVbvBufferSize(void)
+{
+	return _param.rc.i_vbv_buffer_size;
+}
+
+void x264Options::setVbvBufferSize(unsigned int vbvBufferSize)
+{
+	if (vbvBufferSize <= 99999)
+		_param.rc.i_vbv_buffer_size = vbvBufferSize;
+}
+
+float x264Options::getVbvInitialOccupancy(void)
+{
+	return _param.rc.f_vbv_buffer_init;
+}
+
+void x264Options::setVbvInitialOccupancy(float vbvInitialOccupancy)
+{
+	if (vbvInitialOccupancy >= 0 && vbvInitialOccupancy <= 1)
+		_param.rc.f_vbv_buffer_init = vbvInitialOccupancy;
+}
+
+float x264Options::getIpFrameQuantiser(void)
+{
+	return _param.rc.f_ip_factor;
+}
+
+void x264Options::setIpFrameQuantiser(float ipFrameQuantiser)
+{
+	if (ipFrameQuantiser >= 1 && ipFrameQuantiser <= 10)
+		_param.rc.f_ip_factor = ipFrameQuantiser;
+}
+
+float x264Options::getPbFrameQuantiser(void)
+{
+	return _param.rc.f_pb_factor;
+}
+
+void x264Options::setPbFrameQuantiser(float pbFrameQuantiser)
+{
+	if (pbFrameQuantiser >= 1 && pbFrameQuantiser <= 10)
+		_param.rc.f_pb_factor = pbFrameQuantiser;
+}
+
+#if X264_BUILD >= 62
+unsigned int x264Options::getAdaptiveQuantiserMode(void)
+{
+	return _param.rc.i_aq_mode;
+}
+
+void x264Options::setAdaptiveQuantiserMode(unsigned int adaptiveQuantiserMode)
+{
+	if (adaptiveQuantiserMode <= 1)
+		_param.rc.i_aq_mode = adaptiveQuantiserMode;
+}
+
+float x264Options::getAdaptiveQuantiserStrength(void)
+{
+	return _param.rc.f_aq_strength;
+}
+
+void x264Options::setAdaptiveQuantiserStrength(float adaptiveQuantiserStrength)
+{
+	_param.rc.f_aq_strength = adaptiveQuantiserStrength;
+}
+#endif
+
+float x264Options::getQuantiserCurveCompression(void)
+{
+	return _param.rc.f_qcompress;
+}
+
+void x264Options::setQuantiserCurveCompression(float quantiserCurveCompression)
+{
+	if (quantiserCurveCompression >= 0 && quantiserCurveCompression <= 1)
+		_param.rc.f_qcompress = quantiserCurveCompression;
+}
+
+float x264Options::getReduceFluxBeforeCurveCompression(void)
+{
+	return _param.rc.f_complexity_blur;
+}
+
+void x264Options::setReduceFluxBeforeCurveCompression(float reduceFluxBeforeCurveCompression)
+{
+	if (reduceFluxBeforeCurveCompression >= 0 && reduceFluxBeforeCurveCompression <= 999)
+		_param.rc.f_complexity_blur = reduceFluxBeforeCurveCompression;
+}
+
+float x264Options::getReduceFluxAfterCurveCompression(void)
+{
+	return _param.rc.f_qblur;
+}
+
+void x264Options::setReduceFluxAfterCurveCompression(float reduceFluxAfterCurveCompression)
+{
+	if (reduceFluxAfterCurveCompression >= 0 && reduceFluxAfterCurveCompression <= 1)
+		_param.rc.f_qblur = reduceFluxAfterCurveCompression;
+}
+
+unsigned int x264Options::getZoneCount(void)
+{
+	return _zoneOptions.size();
+}
+
+x264ZoneOptions** x264Options::getZones(void)
+{
+	unsigned int zoneCount = getZoneCount();
+	x264ZoneOptions **zoneOptions = new x264ZoneOptions*[zoneCount];
+
+	for (int zone = 0; zone < zoneCount; zone++)
+		zoneOptions[zone] = _zoneOptions[zone]->clone();
+
+	return zoneOptions;
+}
+
+void x264Options::clearZones(void)
+{
+	for (int zone = 0; zone < getZoneCount(); zone++)
+		delete _zoneOptions[zone];
+
+	_zoneOptions.clear();
+}
+
+void x264Options::addZone(x264ZoneOptions *zoneOptions)
+{
+	x264ZoneOptions *clonedOptions = zoneOptions->clone();
+
+	_zoneOptions.push_back(clonedOptions);
+}
+
+bool x264Options::getAccessUnitDelimiters(void)
+{
+	return _param.b_aud;
+}
+
+void x264Options::setAccessUnitDelimiters(bool accessUnitDelimiters)
+{
+	_param.b_aud = accessUnitDelimiters;
+}
+
+unsigned int x264Options::getSpsIdentifier(void)
+{
+	return _param.i_sps_id;
+}
+
+void x264Options::setSpsIdentifier(unsigned int spsIdentifier)
+{
+	switch (spsIdentifier)
+	{
+		case 0:
+		case 1:
+		case 3:
+		case 7:
+		case 15:
+		case 31:
+			_param.i_sps_id = spsIdentifier;
+	}
+}
+
+void x264Options::addOptionsToXml(xmlNodePtr xmlNodeRoot)
+{
+	const int bufferSize = 100;
+	xmlChar xmlBuffer[bufferSize + 1];
+	xmlNodePtr xmlNodeChild, xmlNodeChild2;
+
+	xmlNodeRoot = xmlNewChild(xmlNodeRoot, NULL, (xmlChar*)getOptionsTagRoot(), NULL);
+	xmlNewChild(xmlNodeRoot, NULL, (xmlChar*)"threads", number2String(xmlBuffer, bufferSize, getThreads()));
+	xmlNewChild(xmlNodeRoot, NULL, (xmlChar*)"deterministic", boolean2String(xmlBuffer, bufferSize, getDeterministic()));
+	xmlNewChild(xmlNodeRoot, NULL, (xmlChar*)"idcLevel", number2String(xmlBuffer, bufferSize, getIdcLevel()));
+
+	xmlNodeChild = xmlNewChild(xmlNodeRoot, NULL, (xmlChar*)"vui", NULL);
+	xmlNewChild(xmlNodeChild, NULL, (xmlChar*)"sarAsInput", boolean2String(xmlBuffer, bufferSize, getSarAsInput()));
+	xmlNewChild(xmlNodeChild, NULL, (xmlChar*)"sarHeight", number2String(xmlBuffer, bufferSize, getSarHeight()));
+	xmlNewChild(xmlNodeChild, NULL, (xmlChar*)"sarWidth", number2String(xmlBuffer, bufferSize, getSarWidth()));
+
+	switch (getOverscan())
+	{
+		case 0:
+			strcpy((char*)xmlBuffer, "undefined");
+			break;
+		case 1:
+			strcpy((char*)xmlBuffer, "show");
+			break;
+		case 2:
+			strcpy((char*)xmlBuffer, "crop");
+			break;
+	}
+
+	xmlNewChild(xmlNodeChild, NULL, (xmlChar*)"overscan", xmlBuffer);
+
+	switch (getVideoFormat())
+	{
+		case 0:
+			strcpy((char*)xmlBuffer, "component");
+			break;
+		case 1:
+			strcpy((char*)xmlBuffer, "pal");
+			break;
+		case 2:
+			strcpy((char*)xmlBuffer, "ntsc");
+			break;
+		case 3:
+			strcpy((char*)xmlBuffer, "secam");
+			break;
+		case 4:
+			strcpy((char*)xmlBuffer, "mac");
+			break;
+		case 5:
+			strcpy((char*)xmlBuffer, "undefined");
+			break;
+	}
+
+	xmlNewChild(xmlNodeChild, NULL, (xmlChar*)"videoFormat", xmlBuffer);
+	xmlNewChild(xmlNodeChild, NULL, (xmlChar*)"fullRangeSamples", boolean2String(xmlBuffer, bufferSize, getFullRangeSamples()));
+
+	switch (getColorPrimaries())
+	{
+		case 1:
+			strcpy((char*)xmlBuffer, "bt709");
+			break;
+		case 2:
+			strcpy((char*)xmlBuffer, "undefined");
+			break;
+		case 4:
+			strcpy((char*)xmlBuffer, "bt470m");
+			break;
+		case 5:
+			strcpy((char*)xmlBuffer, "bt470bg");
+			break;
+		case 6:
+			strcpy((char*)xmlBuffer, "smpte170m");
+			break;
+		case 7:
+			strcpy((char*)xmlBuffer, "smpte240m");
+			break;
+		case 8:
+			strcpy((char*)xmlBuffer, "film");
+			break;
+	}
+
+	xmlNewChild(xmlNodeChild, NULL, (xmlChar*)"colorPrimaries", xmlBuffer);
+
+	switch (getTransfer())
+	{
+		case 1:
+			strcpy((char*)xmlBuffer, "bt709");
+			break;
+		case 2:
+			strcpy((char*)xmlBuffer, "undefined");
+			break;
+		case 4:
+			strcpy((char*)xmlBuffer, "bt470m");
+			break;
+		case 5:
+			strcpy((char*)xmlBuffer, "bt470bg");
+			break;
+		case 6:
+			strcpy((char*)xmlBuffer, "smpte170m");
+			break;
+		case 7:
+			strcpy((char*)xmlBuffer, "smpte240m");
+			break;
+		case 8:
+			strcpy((char*)xmlBuffer, "linear");
+			break;
+		case 9:
+			strcpy((char*)xmlBuffer, "log100");
+			break;
+		case 10:
+			strcpy((char*)xmlBuffer, "log316");
+			break;
+	}
+
+	xmlNewChild(xmlNodeChild, NULL, (xmlChar*)"transfer", xmlBuffer);
+
+	switch (getColorMatrix())
+	{
+		case 0:
+			strcpy((char*)xmlBuffer, "gbr");
+			break;
+		case 1:
+			strcpy((char*)xmlBuffer, "bt709");
+			break;
+		case 2:
+			strcpy((char*)xmlBuffer, "undefined");
+			break;
+		case 4:
+			strcpy((char*)xmlBuffer, "fcc");
+			break;
+		case 5:
+			strcpy((char*)xmlBuffer, "bt470bg");
+			break;
+		case 6:
+			strcpy((char*)xmlBuffer, "smpte170m");
+			break;
+		case 7:
+			strcpy((char*)xmlBuffer, "smpte240m");
+			break;
+		case 8:
+			strcpy((char*)xmlBuffer, "ycgco");
+			break;
+	}
+
+	xmlNewChild(xmlNodeChild, NULL, (xmlChar*)"colorMatrix", xmlBuffer);
+	xmlNewChild(xmlNodeChild, NULL, (xmlChar*)"chromaSampleLocation", number2String(xmlBuffer, bufferSize, getChromaSampleLocation()));
+	xmlNewChild(xmlNodeRoot, NULL, (xmlChar*)"referenceFrames", number2String(xmlBuffer, bufferSize, getReferenceFrames()));
+	xmlNewChild(xmlNodeRoot, NULL, (xmlChar*)"gopMaximumSize", number2String(xmlBuffer, bufferSize, getGopMaximumSize()));
+	xmlNewChild(xmlNodeRoot, NULL, (xmlChar*)"gopMinimumSize", number2String(xmlBuffer, bufferSize, getGopMinimumSize()));
+	xmlNewChild(xmlNodeRoot, NULL, (xmlChar*)"scenecutThreshold", number2String(xmlBuffer, bufferSize, getScenecutThreshold()));
+#if X264_BUILD < 67
+	xmlNewChild(xmlNodeRoot, NULL, (xmlChar*)"preScenecutDetection", boolean2String(xmlBuffer, bufferSize, getPreScenecutDetection()));
+#endif
+	xmlNewChild(xmlNodeRoot, NULL, (xmlChar*)"bFrames", number2String(xmlBuffer, bufferSize, getBFrames()));
+	xmlNewChild(xmlNodeRoot, NULL, (xmlChar*)"adaptiveBframeDecision", number2String(xmlBuffer, bufferSize, getAdaptiveBFrameDecision()));
+	xmlNewChild(xmlNodeRoot, NULL, (xmlChar*)"bFrameBias", number2String(xmlBuffer, bufferSize, getBFrameBias()));
+	xmlNewChild(xmlNodeRoot, NULL, (xmlChar*)"bFrameReferences", number2String(xmlBuffer, bufferSize, getBFrameReferences()));
+	xmlNewChild(xmlNodeRoot, NULL, (xmlChar*)"loopFilter", boolean2String(xmlBuffer, bufferSize, getLoopFilter()));
+	xmlNewChild(xmlNodeRoot, NULL, (xmlChar*)"loopFilterAlphaC0", number2String(xmlBuffer, bufferSize, getLoopFilterAlphaC0()));
+	xmlNewChild(xmlNodeRoot, NULL, (xmlChar*)"loopFilterBeta", number2String(xmlBuffer, bufferSize, getLoopFilterBeta()));
+	xmlNewChild(xmlNodeRoot, NULL, (xmlChar*)"cabac", boolean2String(xmlBuffer, bufferSize, getCabac()));
+	xmlNewChild(xmlNodeRoot, NULL, (xmlChar*)"interlaced", boolean2String(xmlBuffer, bufferSize, getInterlaced()));
+
+	switch (getCqmPreset())
+	{
+		case X264_CQM_FLAT:
+			strcpy((char*)xmlBuffer, "flat");
+			break;
+		case X264_CQM_JVT:
+			strcpy((char*)xmlBuffer, "jvt");
+			break;
+		case X264_CQM_CUSTOM:
+			strcpy((char*)xmlBuffer, "custom");
+			break;
+	}
+
+	xmlNewChild(xmlNodeRoot, NULL, (xmlChar*)"cqmPreset", xmlBuffer);
+
+	uint8_t* intra4x4Luma = getIntra4x4Luma();
+	uint8_t* intraChroma = getIntraChroma();
+	uint8_t* inter4x4Luma = getInter4x4Luma();
+	uint8_t* interChroma = getInterChroma();
+	uint8_t* intra8x8Luma = getIntra8x8Luma();
+	uint8_t* inter8x8Luma = getInter8x8Luma();
+
+	xmlNodeChild = xmlNewChild(xmlNodeRoot, NULL, (xmlChar*)"intra4x4Luma", NULL);
+
+	for (int i = 0; i < 16; i++)
+		xmlNewChild(xmlNodeChild, NULL, (xmlChar*)"value", number2String(xmlBuffer, bufferSize, intra4x4Luma[i]));
+
+	xmlNodeChild = xmlNewChild(xmlNodeRoot, NULL, (xmlChar*)"intraChroma", NULL);
+
+	for (int i = 0; i < 16; i++)
+		xmlNewChild(xmlNodeChild, NULL, (xmlChar*)"value", number2String(xmlBuffer, bufferSize, intraChroma[i]));
+
+	xmlNodeChild = xmlNewChild(xmlNodeRoot, NULL, (xmlChar*)"inter4x4Luma", NULL);
+
+	for (int i = 0; i < 16; i++)
+		xmlNewChild(xmlNodeChild, NULL, (xmlChar*)"value", number2String(xmlBuffer, bufferSize, inter4x4Luma[i]));
+
+	xmlNodeChild = xmlNewChild(xmlNodeRoot, NULL, (xmlChar*)"interChroma", NULL);
+
+	for (int i = 0; i < 16; i++)
+		xmlNewChild(xmlNodeChild, NULL, (xmlChar*)"value", number2String(xmlBuffer, bufferSize, interChroma[i]));
+
+	xmlNodeChild = xmlNewChild(xmlNodeRoot, NULL, (xmlChar*)"intra8x8Luma", NULL);
+
+	for (int i = 0; i < 64; i++)
+		xmlNewChild(xmlNodeChild, NULL, (xmlChar*)"value", number2String(xmlBuffer, bufferSize, intra8x8Luma[i]));
+
+	xmlNodeChild = xmlNewChild(xmlNodeRoot, NULL, (xmlChar*)"inter8x8Luma", NULL);
+
+	for (int i = 0; i < 64; i++)
+		xmlNewChild(xmlNodeChild, NULL, (xmlChar*)"value", number2String(xmlBuffer, bufferSize, inter8x8Luma[i]));
+
+	xmlNodeChild = xmlNewChild(xmlNodeRoot, NULL, (xmlChar*)"analyse", NULL);
+	xmlNewChild(xmlNodeChild, NULL, (xmlChar*)"partitionI4x4", boolean2String(xmlBuffer, bufferSize, getPartitionI4x4()));
+	xmlNewChild(xmlNodeChild, NULL, (xmlChar*)"partitionI8x8", boolean2String(xmlBuffer, bufferSize, getPartitionI8x8()));
+	xmlNewChild(xmlNodeChild, NULL, (xmlChar*)"partitionP8x8", boolean2String(xmlBuffer, bufferSize, getPartitionP8x8()));
+	xmlNewChild(xmlNodeChild, NULL, (xmlChar*)"partitionP4x4", boolean2String(xmlBuffer, bufferSize, getPartitionP4x4()));
+	xmlNewChild(xmlNodeChild, NULL, (xmlChar*)"partitionB8x8", boolean2String(xmlBuffer, bufferSize, getPartitionB8x8()));
+	xmlNewChild(xmlNodeChild, NULL, (xmlChar*)"dct8x8", boolean2String(xmlBuffer, bufferSize, getDct8x8()));
+	xmlNewChild(xmlNodeChild, NULL, (xmlChar*)"weightedPrediction", boolean2String(xmlBuffer, bufferSize, getWeightedPrediction()));
+
+	switch (getDirectPredictionMode())
+	{
+		case X264_DIRECT_PRED_NONE:
+			strcpy((char*)xmlBuffer, "none");
+			break;
+		case X264_DIRECT_PRED_SPATIAL:
+			strcpy((char*)xmlBuffer, "spatial");
+			break;
+		case X264_DIRECT_PRED_TEMPORAL:
+			strcpy((char*)xmlBuffer, "temporal");
+			break;
+		case X264_DIRECT_PRED_AUTO:
+			strcpy((char*)xmlBuffer, "auto");
+			break;
+	}
+
+	xmlNewChild(xmlNodeChild, NULL, (xmlChar*)"directPredictionMode", xmlBuffer);
+
+#if X264_BUILD < 66
+	switch (getDirectPredictionSize())
+	{
+		case 0:
+			strcpy((char*)xmlBuffer, "4x4");
+			break;
+		case 1:
+			strcpy((char*)xmlBuffer, "8x8");
+			break;
+		case -1:
+			strcpy((char*)xmlBuffer, "smallest");
+			break;
+	}
+
+	xmlNewChild(xmlNodeChild, NULL, (xmlChar*)"directPredictionSize", xmlBuffer);
+#endif
+
+	xmlNewChild(xmlNodeChild, NULL, (xmlChar*)"chromaLumaQuantiserDifference", number2String(xmlBuffer, bufferSize, getChromaLumaQuantiserDifference()));
+
+	switch (getMotionEstimationMethod())
+	{
+		case X264_ME_DIA:
+			strcpy((char*)xmlBuffer, "diamond");
+			break;
+		case X264_ME_UMH:
+			strcpy((char*)xmlBuffer, "multi-hexagonal");
+			break;
+		case X264_ME_ESA:
+			strcpy((char*)xmlBuffer, "exhaustive");
+			break;
+#if X264_BUILD >= 57
+		case X264_ME_TESA:
+			strcpy((char*)xmlBuffer, "hadamard");
+			break;
+#endif
+		case X264_ME_HEX:
+		default:
+			strcpy((char*)xmlBuffer, "hexagonal");
+			break;
+	}
+
+	xmlNewChild(xmlNodeChild, NULL, (xmlChar*)"motionEstimationMethod", xmlBuffer);
+	xmlNewChild(xmlNodeChild, NULL, (xmlChar*)"motionVectorSearchRange", number2String(xmlBuffer, bufferSize, getMotionVectorSearchRange()));
+	xmlNewChild(xmlNodeChild, NULL, (xmlChar*)"motionVectorLength", number2String(xmlBuffer, bufferSize, getMotionVectorLength()));
+	xmlNewChild(xmlNodeChild, NULL, (xmlChar*)"motionVectorThreadBuffer", number2String(xmlBuffer, bufferSize, getMotionVectorThreadBuffer()));
+	xmlNewChild(xmlNodeChild, NULL, (xmlChar*)"subpixelRefinement", number2String(xmlBuffer, bufferSize, getSubpixelRefinement()));
+#if X264_BUILD < 65
+	xmlNewChild(xmlNodeChild, NULL, (xmlChar*)"bidirectionalMotionEstimation", boolean2String(xmlBuffer, bufferSize, getBidirectionalMotionEstimation()));
+#endif
+	xmlNewChild(xmlNodeChild, NULL, (xmlChar*)"chromaMotionEstimation", boolean2String(xmlBuffer, bufferSize, getChromaMotionEstimation()));
+#if X264_BUILD < 65
+	xmlNewChild(xmlNodeChild, NULL, (xmlChar*)"bFrameRdo", boolean2String(xmlBuffer, bufferSize, getBFrameRdo()));
+#endif
+	xmlNewChild(xmlNodeChild, NULL, (xmlChar*)"mixedReferences", boolean2String(xmlBuffer, bufferSize, getMixedReferences()));
+
+	switch (getTrellis())
+	{
+		case 0:
+			strcpy((char*)xmlBuffer, "disabled");
+			break;
+		case 1:
+			strcpy((char*)xmlBuffer, "finalMacroblock");
+			break;
+		case 2:
+			strcpy((char*)xmlBuffer, "allModeDecisions");
+			break;
+	}
+
+	xmlNewChild(xmlNodeChild, NULL, (xmlChar*)"trellis", xmlBuffer);
+	xmlNewChild(xmlNodeChild, NULL, (xmlChar*)"fastPSkip", boolean2String(xmlBuffer, bufferSize, getFastPSkip()));
+	xmlNewChild(xmlNodeChild, NULL, (xmlChar*)"dctDecimate", boolean2String(xmlBuffer, bufferSize, getDctDecimate()));
+	xmlNewChild(xmlNodeChild, NULL, (xmlChar*)"noiseReduction", number2String(xmlBuffer, bufferSize, getNoiseReduction()));
+	xmlNewChild(xmlNodeChild, NULL, (xmlChar*)"interLumaDeadzone", number2String(xmlBuffer, bufferSize, getInterLumaDeadzone()));
+	xmlNewChild(xmlNodeChild, NULL, (xmlChar*)"intraLumaDeadzone", number2String(xmlBuffer, bufferSize, getIntraLumaDeadzone()));
+
+	xmlNodeChild = xmlNewChild(xmlNodeRoot, NULL, (xmlChar*)"rateControl", NULL);
+	xmlNewChild(xmlNodeChild, NULL, (xmlChar*)"quantiserMinimum", number2String(xmlBuffer, bufferSize, getQuantiserMinimum()));
+	xmlNewChild(xmlNodeChild, NULL, (xmlChar*)"quantiserMaximum", number2String(xmlBuffer, bufferSize, getQuantiserMaximum()));
+	xmlNewChild(xmlNodeChild, NULL, (xmlChar*)"quantiserStep", number2String(xmlBuffer, bufferSize, getQuantiserStep()));
+	xmlNewChild(xmlNodeChild, NULL, (xmlChar*)"averageBitrateTolerance", number2String(xmlBuffer, bufferSize, getAverageBitrateTolerance()));
+	xmlNewChild(xmlNodeChild, NULL, (xmlChar*)"vbvMaximumBitrate", number2String(xmlBuffer, bufferSize, getVbvMaximumBitrate()));
+	xmlNewChild(xmlNodeChild, NULL, (xmlChar*)"vbvBufferSize", number2String(xmlBuffer, bufferSize, getVbvBufferSize()));
+	xmlNewChild(xmlNodeChild, NULL, (xmlChar*)"vbvInitialOccupancy", number2String(xmlBuffer, bufferSize, getVbvInitialOccupancy()));
+	xmlNewChild(xmlNodeChild, NULL, (xmlChar*)"ipFrameQuantiser", number2String(xmlBuffer, bufferSize, getIpFrameQuantiser()));
+	xmlNewChild(xmlNodeChild, NULL, (xmlChar*)"pbFrameQuantiser", number2String(xmlBuffer, bufferSize, getPbFrameQuantiser()));
+
+#if X264_BUILD >= 62
+	switch (getAdaptiveQuantiserMode())
+	{
+		case X264_AQ_NONE:
+			strcpy((char*)xmlBuffer, "none");
+			break;
+		case X264_AQ_VARIANCE:
+			strcpy((char*)xmlBuffer, "variance");
+			break;
+	}
+
+	xmlNewChild(xmlNodeChild, NULL, (xmlChar*)"adaptiveQuantiserMode", xmlBuffer);
+	xmlNewChild(xmlNodeChild, NULL, (xmlChar*)"adaptiveQuantiserStrength", number2String(xmlBuffer, bufferSize, getAdaptiveQuantiserStrength()));
+#endif
+	xmlNewChild(xmlNodeChild, NULL, (xmlChar*)"quantiserCurveCompression", number2String(xmlBuffer, bufferSize, getQuantiserCurveCompression()));
+	xmlNewChild(xmlNodeChild, NULL, (xmlChar*)"reduceFluxBeforeCurveCompression", number2String(xmlBuffer, bufferSize, getReduceFluxBeforeCurveCompression()));
+	xmlNewChild(xmlNodeChild, NULL, (xmlChar*)"reduceFluxAfterCurveCompression", number2String(xmlBuffer, bufferSize, getReduceFluxAfterCurveCompression()));
+
+	int zoneCount = getZoneCount();
+
+	if (zoneCount)
+	{
+		x264ZoneOptions** zoneOptions = getZones();
+
+		for (int zoneIndex = 0; zoneIndex < zoneCount; zoneIndex++)
+		{
+			xmlNodeChild2 = xmlNewChild(xmlNodeChild, NULL, (xmlChar*)"zone", NULL);
+			x264ZoneOptions* option = zoneOptions[zoneIndex];
+
+			xmlNewChild(xmlNodeChild2, NULL, (xmlChar*)"frameStart", number2String(xmlBuffer, bufferSize, option->getFrameStart()));
+			xmlNewChild(xmlNodeChild2, NULL, (xmlChar*)"frameEnd", number2String(xmlBuffer, bufferSize, option->getFrameEnd()));
+
+			if (zoneOptions[zoneIndex]->getZoneMode() == ZONE_MODE_QUANTISER)
+				xmlNewChild(xmlNodeChild2, NULL, (xmlChar*)"quantiser", number2String(xmlBuffer, bufferSize, option->getZoneParameter()));
+			else
+				xmlNewChild(xmlNodeChild2, NULL, (xmlChar*)"bitrateFactor", number2String(xmlBuffer, bufferSize, option->getZoneParameter() / 100.f));
+
+			delete option;
+		}
+
+		delete [] zoneOptions;
+	}
+
+	xmlNewChild(xmlNodeRoot, NULL, (xmlChar*)"accessUnitDelimiters", boolean2String(xmlBuffer, bufferSize, getAccessUnitDelimiters()));
+	xmlNewChild(xmlNodeRoot, NULL, (xmlChar*)"spsIdentifier", number2String(xmlBuffer, bufferSize, getSpsIdentifier()));
+}
+
+int x264Options::fromXml(const char *xml, PluginXmlType xmlType)
+{
+	clearZones();
+
+	return PluginOptions::fromXml(xml, xmlType);
+}
+
+void x264Options::parseOptions(xmlNode *node)
+{
+	for (xmlNode *xmlChild = node->children; xmlChild; xmlChild = xmlChild->next)
+	{
+		if (xmlChild->type == XML_ELEMENT_NODE)
+		{
+			char *content = (char*)xmlNodeGetContent(xmlChild);
+
+			if (strcmp((char*)xmlChild->name, "threads") == 0)
+				setThreads(atoi(content));
+			else if (strcmp((char*)xmlChild->name, "deterministic") == 0)
+				setDeterministic(string2Boolean(content));
+			else if (strcmp((char*)xmlChild->name, "idcLevel") == 0)
+				setIdcLevel(atoi(content));
+			else if (strcmp((char*)xmlChild->name, "vui") == 0)
+				parseVuiOptions(xmlChild);
+			else if (strcmp((char*)xmlChild->name, "referenceFrames") == 0)
+				setReferenceFrames(atoi(content));
+			else if (strcmp((char*)xmlChild->name, "gopMaximumSize") == 0)
+				setGopMaximumSize(atoi(content));
+			else if (strcmp((char*)xmlChild->name, "gopMinimumSize") == 0)
+				setGopMinimumSize(atoi(content));
+			else if (strcmp((char*)xmlChild->name, "scenecutThreshold") == 0)
+				setScenecutThreshold(atoi(content));
+#if X264_BUILD < 67
+			else if (strcmp((char*)xmlChild->name, "preScenecutDetection") == 0)
+				setPreScenecutDetection(string2Boolean(content));
+#endif
+			else if (strcmp((char*)xmlChild->name, "bFrames") == 0)
+				setBFrames(atoi(content));
+			else if (strcmp((char*)xmlChild->name, "adaptiveBframeDecision") == 0)
+				setAdaptiveBFrameDecision(atoi(content));
+			else if (strcmp((char*)xmlChild->name, "bFrameBias") == 0)
+				setBFrameBias(atoi(content));
+			else if (strcmp((char*)xmlChild->name, "bFrameReferences") == 0)
+				setBFrameReferences(atoi(content));
+			else if (strcmp((char*)xmlChild->name, "loopFilter") == 0)
+				setLoopFilter(string2Boolean(content));
+			else if (strcmp((char*)xmlChild->name, "loopFilterAlphaC0") == 0)
+				setLoopFilterAlphaC0(atoi(content));
+			else if (strcmp((char*)xmlChild->name, "loopFilterBeta") == 0)
+				setLoopFilterBeta(atoi(content));
+			else if (strcmp((char*)xmlChild->name, "cabac") == 0)
+				setCabac(string2Boolean(content));
+			else if (strcmp((char*)xmlChild->name, "interlaced") == 0)
+				setInterlaced(string2Boolean(content));
+			else if (strcmp((char*)xmlChild->name, "cqmPreset") == 0)
+			{
+				int cqmPreset = 0;
+
+				if (strcmp(content, "flat") == 0)
+					cqmPreset = X264_CQM_FLAT;
+				else if (strcmp(content, "jvt") == 0)
+					cqmPreset = X264_CQM_JVT;
+				else if (strcmp(content, "custom") == 0)
+					cqmPreset = X264_CQM_CUSTOM;
+
+				setCqmPreset(cqmPreset);
+			}
+			else if (strcmp((char*)xmlChild->name, "intra4x4Luma") == 0)
+			{
+				uint8_t intra4x4Luma[16];
+
+				parseCqmOption(xmlChild, intra4x4Luma);
+				setIntra4x4Luma(intra4x4Luma);
+			}
+			else if (strcmp((char*)xmlChild->name, "intraChroma") == 0)
+			{
+				uint8_t intraChroma[16];
+
+				parseCqmOption(xmlChild, intraChroma);
+				setIntraChroma(intraChroma);
+			}
+			else if (strcmp((char*)xmlChild->name, "inter4x4Luma") == 0)
+			{
+				uint8_t inter4x4Luma[16];
+
+				parseCqmOption(xmlChild, inter4x4Luma);
+				setInter4x4Luma(inter4x4Luma);
+			}
+			else if (strcmp((char*)xmlChild->name, "interChroma") == 0)
+			{
+				uint8_t interChroma[16];
+
+				parseCqmOption(xmlChild, interChroma);
+				setInterChroma(interChroma);
+			}
+			else if (strcmp((char*)xmlChild->name, "intra8x8Luma") == 0)
+			{
+				uint8_t intra8x8Luma[64];
+
+				parseCqmOption(xmlChild, intra8x8Luma);
+				setIntra8x8Luma(intra8x8Luma);
+			}
+			else if (strcmp((char*)xmlChild->name, "inter8x8Luma") == 0)
+			{
+				uint8_t inter8x8Luma[64];
+
+				parseCqmOption(xmlChild, inter8x8Luma);
+				setInter8x8Luma(inter8x8Luma);
+			}
+			else if (strcmp((char*)xmlChild->name, "analyse") == 0)
+				parseAnalyseOptions(xmlChild);
+			else if (strcmp((char*)xmlChild->name, "rateControl") == 0)
+				parseRateControlOptions(xmlChild);
+			else if (strcmp((char*)xmlChild->name, "accessUnitDelimiters") == 0)
+				setAccessUnitDelimiters(string2Boolean(content));
+			else if (strcmp((char*)xmlChild->name, "spsIdentifier") == 0)
+				setSpsIdentifier(atoi(content));
+
+			xmlFree(content);
+		}
+	}
+}
+
+void x264Options::parseVuiOptions(xmlNode *node)
+{
+	for (xmlNode *xmlChild = node->children; xmlChild; xmlChild = xmlChild->next)
+	{
+		if (xmlChild->type == XML_ELEMENT_NODE)
+		{
+			char *content = (char*)xmlNodeGetContent(xmlChild);
+
+			if (strcmp((char*)xmlChild->name, "sarAsInput") == 0)
+				setSarAsInput(string2Boolean(content));
+			else if (strcmp((char*)xmlChild->name, "sarHeight") == 0)
+				setSarHeight(atoi(content));
+			else if (strcmp((char*)xmlChild->name, "sarWidth") == 0)
+				setSarWidth(atoi(content));
+			else if (strcmp((char*)xmlChild->name, "overscan") == 0)
+			{
+				int overscan = 0;
+
+				if (strcmp(content, "undefined") == 0)
+					overscan = 0;
+				else if (strcmp(content, "show") == 0)
+					overscan = 1;
+				else if (strcmp(content, "crop") == 0)
+					overscan = 2;
+
+				setOverscan(overscan);
+			}
+			else if (strcmp((char*)xmlChild->name, "videoFormat") == 0)
+			{
+				int videoFormat = 5;
+
+				if (strcmp(content, "component") == 0)
+					videoFormat = 0;
+				else if (strcmp(content, "pal") == 0)
+					videoFormat = 1;
+				else if (strcmp(content, "ntsc") == 0)
+					videoFormat = 2;
+				else if (strcmp(content, "secam") == 0)
+					videoFormat = 3;
+				else if (strcmp(content, "mac") == 0)
+					videoFormat = 4;
+				else if (strcmp(content, "undefined") == 0)
+					videoFormat = 5;
+
+				setVideoFormat(videoFormat);
+			}
+			else if (strcmp((char*)xmlChild->name, "fullRangeSamples") == 0)
+				setFullRangeSamples(string2Boolean(content));
+			else if (strcmp((char*)xmlChild->name, "colorPrimaries") == 0)
+			{
+				int colorPrimaries = 2;
+
+				if (strcmp(content, "bt709") == 0)
+					colorPrimaries = 1;
+				else if (strcmp(content, "undefined") == 0)
+					colorPrimaries = 2;
+				else if (strcmp(content, "bt470m") == 0)
+					colorPrimaries = 4;
+				else if (strcmp(content, "bt470bg") == 0)
+					colorPrimaries = 5;
+				else if (strcmp(content, "smpte170m") == 0)
+					colorPrimaries = 6;
+				else if (strcmp(content, "smpte240m") == 0)
+					colorPrimaries = 7;
+				else if (strcmp(content, "film") == 0)
+					colorPrimaries = 8;
+
+				setColorPrimaries(colorPrimaries);
+			}
+			else if (strcmp((char*)xmlChild->name, "transfer") == 0)
+			{
+				int transfer = 2;
+
+				if (strcmp(content, "bt709") == 0)
+					transfer = 1;
+				else if (strcmp(content, "undefined") == 0)
+					transfer = 2;
+				else if (strcmp(content, "bt470m") == 0)
+					transfer = 4;
+				else if (strcmp(content, "bt470bg") == 0)
+					transfer = 5;
+				else if (strcmp(content, "smpte170m") == 0)
+					transfer = 6;
+				else if (strcmp(content, "smpte240m") == 0)
+					transfer = 7;
+				else if (strcmp(content, "linear") == 0)
+					transfer = 8;
+				else if (strcmp(content, "log100") == 0)
+					transfer = 9;
+				else if (strcmp(content, "log316") == 0)
+					transfer = 8;
+
+				setTransfer(transfer);
+			}
+			else if (strcmp((char*)xmlChild->name, "colorMatrix") == 0)
+			{
+				int colorMatrix = 2;
+
+				if (strcmp(content, "gbr") == 0)
+					colorMatrix = 0;
+				else if (strcmp(content, "bt709") == 0)
+					colorMatrix = 1;
+				else if (strcmp(content, "undefined") == 0)
+					colorMatrix = 2;
+				else if (strcmp(content, "fcc") == 0)
+					colorMatrix = 4;
+				else if (strcmp(content, "bt470bg") == 0)
+					colorMatrix = 5;
+				else if (strcmp(content, "smpte170m") == 0)
+					colorMatrix = 6;
+				else if (strcmp(content, "smpte240m") == 0)
+					colorMatrix = 7;
+				else if (strcmp(content, "ycgco") == 0)
+					colorMatrix = 8;
+
+				setColorMatrix(colorMatrix);
+			}
+			else if (strcmp((char*)xmlChild->name, "chromaSampleLocation") == 0)
+				setChromaSampleLocation(atoi(content));
+
+			xmlFree(content);
+		}
+	}
+}
+
+void x264Options::parseCqmOption(xmlNode *node, uint8_t cqm[])
+{
+	int index = 0;
+
+	for (xmlNode *xmlChild = node->children; xmlChild; xmlChild = xmlChild->next)
+	{
+		if (xmlChild->type == XML_ELEMENT_NODE)
+		{
+			char *content = (char*)xmlNodeGetContent(xmlChild);
+
+			cqm[index] = atoi(content);
+			index++;
+
+			xmlFree(content);
+		}
+	}
+}
+
+void x264Options::parseAnalyseOptions(xmlNode *node)
+{
+	for (xmlNode *xmlChild = node->children; xmlChild; xmlChild = xmlChild->next)
+	{
+		if (xmlChild->type == XML_ELEMENT_NODE)
+		{
+			char *content = (char*)xmlNodeGetContent(xmlChild);
+
+			if (strcmp((char*)xmlChild->name, "partitionI4x4") == 0)
+				setPartitionI4x4(string2Boolean(content));
+			else if (strcmp((char*)xmlChild->name, "partitionI8x8") == 0)
+				setPartitionI8x8(string2Boolean(content));
+			else if (strcmp((char*)xmlChild->name, "partitionP8x8") == 0)
+				setPartitionP8x8(string2Boolean(content));
+			else if (strcmp((char*)xmlChild->name, "partitionP4x4") == 0)
+				setPartitionP4x4(string2Boolean(content));
+			else if (strcmp((char*)xmlChild->name, "partitionB8x8") == 0)
+				setPartitionB8x8(string2Boolean(content));
+			else if (strcmp((char*)xmlChild->name, "dct8x8") == 0)
+				setDct8x8(string2Boolean(content));
+			else if (strcmp((char*)xmlChild->name, "weightedPrediction") == 0)
+				setWeightedPrediction(string2Boolean(content));
+			else if (strcmp((char*)xmlChild->name, "directPredictionMode") == 0)
+			{
+				int directPredictionMode = X264_DIRECT_PRED_SPATIAL;
+
+				if (strcmp(content, "none") == 0)
+					directPredictionMode = X264_DIRECT_PRED_NONE;
+				else if (strcmp(content, "spatial") == 0)
+					directPredictionMode = X264_DIRECT_PRED_SPATIAL;
+				else if (strcmp(content, "temporal") == 0)
+					directPredictionMode = X264_DIRECT_PRED_TEMPORAL;
+				else if (strcmp(content, "auto") == 0)
+					directPredictionMode = X264_DIRECT_PRED_AUTO;
+
+				setDirectPredictionMode(directPredictionMode);
+			}
+#if X264_BUILD < 66
+			else if (strcmp((char*)xmlChild->name, "directPredictionSize") == 0)
+			{
+				int directPredictionSize = -1;
+
+				if (strcmp(content, "4x4") == 0)
+					directPredictionSize = 0;
+				else if (strcmp(content, "8x8") == 0)
+					directPredictionSize = 1;
+				else if (strcmp(content, "smallest") == 0)
+					directPredictionSize = -1;
+
+				setDirectPredictionSize(directPredictionSize);
+			}
+#endif
+			else if (strcmp((char*)xmlChild->name, "chromaLumaQuantiserDifference") == 0)
+				setChromaLumaQuantiserDifference(atoi(content));
+			else if (strcmp((char*)xmlChild->name, "motionEstimationMethod") == 0)
+			{
+				int motionEstimationMethod = X264_ME_HEX;
+
+				if (strcmp(content, "diamond") == 0)
+					motionEstimationMethod = X264_ME_DIA;
+				else if (strcmp(content, "hexagonal") == 0)
+					motionEstimationMethod = X264_ME_HEX;
+				else if (strcmp(content, "multi-hexagonal") == 0)
+					motionEstimationMethod = X264_ME_UMH;
+				else if (strcmp(content, "exhaustive") == 0)
+					motionEstimationMethod = X264_ME_ESA;
+#if X264_BUILD >= 57
+				else if (strcmp(content, "hadamard") == 0)
+					motionEstimationMethod = X264_ME_TESA;
+#endif
+
+				setMotionEstimationMethod(motionEstimationMethod);
+			}
+			else if (strcmp((char*)xmlChild->name, "motionVectorSearchRange") == 0)
+				setMotionVectorSearchRange(atoi(content));
+			else if (strcmp((char*)xmlChild->name, "motionVectorLength") == 0)
+				setMotionVectorLength(atoi(content));
+			else if (strcmp((char*)xmlChild->name, "motionVectorThreadBuffer") == 0)
+				setMotionVectorThreadBuffer(atoi(content));
+			else if (strcmp((char*)xmlChild->name, "subpixelRefinement") == 0)
+				setSubpixelRefinement(atoi(content));
+#if X264_BUILD < 65
+			else if (strcmp((char*)xmlChild->name, "bidirectionalMotionEstimation") == 0)
+				setBidirectionalMotionEstimation(string2Boolean(content));
+#endif
+			else if (strcmp((char*)xmlChild->name, "chromaMotionEstimation") == 0)
+				setChromaMotionEstimation(string2Boolean(content));
+#if X264_BUILD < 65
+			else if (strcmp((char*)xmlChild->name, "bFrameRdo") == 0)
+				setBFrameRdo(string2Boolean(content));
+#endif
+			else if (strcmp((char*)xmlChild->name, "mixedReferences") == 0)
+				setMixedReferences(string2Boolean(content));
+			else if (strcmp((char*)xmlChild->name, "trellis") == 0)
+			{
+				int trellis = 0;
+
+				if (strcmp(content, "disabled") == 0)
+					trellis = 0;
+				else if (strcmp(content, "finalMacroblock") == 0)
+					trellis = 1;
+				else if (strcmp(content, "allModeDecisions") == 0)
+					trellis = 2;
+
+				setTrellis(trellis);
+			}
+			else if (strcmp((char*)xmlChild->name, "fastPSkip") == 0)
+				setFastPSkip(string2Boolean(content));
+			else if (strcmp((char*)xmlChild->name, "dctDecimate") == 0)
+				setDctDecimate(string2Boolean(content));
+			else if (strcmp((char*)xmlChild->name, "noiseReduction") == 0)
+				setNoiseReduction(atoi(content));
+			else if (strcmp((char*)xmlChild->name, "interLumaDeadzone") == 0)
+				setInterLumaDeadzone(atoi(content));
+			else if (strcmp((char*)xmlChild->name, "intraLumaDeadzone") == 0)
+				setIntraLumaDeadzone(atoi(content));
+
+			xmlFree(content);
+		}
+	}
+}
+
+void x264Options::parseRateControlOptions(xmlNode *node)
+{
+	for (xmlNode *xmlChild = node->children; xmlChild; xmlChild = xmlChild->next)
+	{
+		if (xmlChild->type == XML_ELEMENT_NODE)
+		{
+			char *content = (char*)xmlNodeGetContent(xmlChild);
+
+			if (strcmp((char*)xmlChild->name, "quantiserMinimum") == 0)
+				setQuantiserMinimum(atoi(content));
+			else if (strcmp((char*)xmlChild->name, "quantiserMaximum") == 0)
+				setQuantiserMaximum(atoi(content));
+			else if (strcmp((char*)xmlChild->name, "quantiserStep") == 0)
+				setQuantiserStep(atoi(content));
+			else if (strcmp((char*)xmlChild->name, "averageBitrateTolerance") == 0)
+				setAverageBitrateTolerance(atof(content));
+			else if (strcmp((char*)xmlChild->name, "vbvMaximumBitrate") == 0)
+				setVbvMaximumBitrate(atoi(content));
+			else if (strcmp((char*)xmlChild->name, "vbvBufferSize") == 0)
+				setVbvBufferSize(atoi(content));
+			else if (strcmp((char*)xmlChild->name, "vbvInitialOccupancy") == 0)
+				setVbvInitialOccupancy(atof(content));
+			else if (strcmp((char*)xmlChild->name, "ipFrameQuantiser") == 0)
+				setIpFrameQuantiser(atof(content));
+			else if (strcmp((char*)xmlChild->name, "pbFrameQuantiser") == 0)
+				setPbFrameQuantiser(atof(content));
+#if X264_BUILD >= 62
+			else if (strcmp((char*)xmlChild->name, "adaptiveQuantiserMode") == 0)
+			{
+				int adaptiveQuantiserMode = X264_AQ_VARIANCE;
+
+				if (strcmp(content, "none") == 0)
+					adaptiveQuantiserMode = X264_AQ_NONE;
+				else if (strcmp(content, "variance") == 0)
+					adaptiveQuantiserMode = X264_AQ_VARIANCE;
+
+				setAdaptiveQuantiserMode(adaptiveQuantiserMode);
+			}
+			else if (strcmp((char*)xmlChild->name, "adaptiveQuantiserStrength") == 0)
+				setAdaptiveQuantiserStrength(atof(content));
+#endif
+			else if (strcmp((char*)xmlChild->name, "quantiserCurveCompression") == 0)
+				setQuantiserCurveCompression(atof(content));
+			else if (strcmp((char*)xmlChild->name, "reduceFluxBeforeCurveCompression") == 0)
+				setReduceFluxBeforeCurveCompression(atof(content));
+			else if (strcmp((char*)xmlChild->name, "reduceFluxAfterCurveCompression") == 0)
+				setReduceFluxAfterCurveCompression(atof(content));
+			else if (strcmp((char*)xmlChild->name, "zone") == 0)
+				parseZoneOptions(xmlChild);
+			else
+				printf("%s\n", xmlChild->name);
+
+			xmlFree(content);
+		}
+	}
+}
+
+void x264Options::parseZoneOptions(xmlNode *zoneNode)
+{
+	x264ZoneOptions option;
+
+	for (xmlNode *xmlChild = zoneNode->children; xmlChild; xmlChild = xmlChild->next)
+	{
+		char *content = (char*)xmlNodeGetContent(xmlChild);
+
+		if (strcmp((char*)xmlChild->name, "frameStart") == 0)
+			option.setFrameRange(atoi(content), option.getFrameEnd());
+		else if (strcmp((char*)xmlChild->name, "frameEnd") == 0)
+			option.setFrameRange(option.getFrameStart(), atoi(content));
+		else if (strcmp((char*)xmlChild->name, "quantiser") == 0)
+			option.setQuantiser(atoi(content));
+		else if (strcmp((char*)xmlChild->name, "bitrateFactor") == 0)
+			option.setBitrateFactor((int)floor(atoi(content) * 100 + .5));
+
+		xmlFree(content);
+	}
+
+	addZone(&option);
+}

Copied: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/x264Options.h (from rev 5002, branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/options.h)
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/options.h	2009-07-06 05:48:05 UTC (rev 5002)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/x264Options.h	2009-07-08 13:35:56 UTC (rev 5017)
@@ -0,0 +1,311 @@
+/***************************************************************************
+                                x264Options.h
+
+    begin                : Mon Apr 21 2008
+    copyright            : (C) 2008 by gruntster
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+
+#ifndef x264Options_h
+#define x264Options_h
+
+#include <vector>
+#include <libxml/tree.h>
+
+#include "PluginOptions.h"
+#include "zoneOptions.h"
+
+extern "C"
+{
+#include "x264.h"
+#include "ADM_vidEnc_plugin.h"
+}
+
+#define DEFAULT_ENCODE_MODE ADM_VIDENC_MODE_AQP
+#define DEFAULT_ENCODE_MODE_PARAMETER 26
+
+class x264Options : public PluginOptions
+{
+protected:
+	x264_param_t _param;
+	std::vector<x264ZoneOptions*> _zoneOptions;
+
+	bool _sarAsInput;
+
+	void cleanUp(void);
+
+	void addOptionsToXml(xmlNodePtr xmlNodeRoot);
+	void parseOptions(xmlNode *node);
+
+private:
+	void parseVuiOptions(xmlNode *node);
+	void parseCqmOption(xmlNode *node, uint8_t cqm[]);
+	void parseAnalyseOptions(xmlNode *node);
+	void parseRateControlOptions(xmlNode *node);
+	void parseZoneOptions(xmlNode *zoneNode);
+
+public:
+	x264Options(void);
+	~x264Options(void);
+
+	void reset(void);
+	x264_param_t* getParameters(void);
+
+	int getThreads(void);
+	void setThreads(int threads);
+
+	bool getDeterministic(void);
+	void setDeterministic(bool deterministic);
+
+	int getIdcLevel(void);
+	void setIdcLevel(int idcLevel);
+
+	bool getSarAsInput(void);
+	void setSarAsInput(bool sarAsInput);
+
+	unsigned int getSarHeight(void);
+	void setSarHeight(unsigned int height);
+
+	unsigned int getSarWidth(void);
+	void setSarWidth(unsigned int width);
+
+	unsigned int getOverscan(void);
+	void setOverscan(unsigned int overscan);
+
+	unsigned int getVideoFormat(void);
+	void setVideoFormat(unsigned int videoFormat);
+
+	bool getFullRangeSamples(void);
+	void setFullRangeSamples(bool fullRangeSamples);
+
+	unsigned int getColorPrimaries(void);
+	void setColorPrimaries(unsigned int colorPrimaries);
+
+	unsigned int getTransfer(void);
+	void setTransfer(unsigned int transfer);
+
+	unsigned int getColorMatrix(void);
+	void setColorMatrix(unsigned int transfer);
+
+	unsigned int getChromaSampleLocation(void);
+	void setChromaSampleLocation(unsigned int chromaSampleLocation);
+
+	unsigned int getReferenceFrames(void);
+	void setReferenceFrames(unsigned int referenceFrames);
+
+	unsigned int getGopMinimumSize(void);
+	void setGopMinimumSize(unsigned int gopSize);
+
+	unsigned int getGopMaximumSize(void);
+	void setGopMaximumSize(unsigned int gopSize);
+
+	unsigned int getScenecutThreshold(void);
+	void setScenecutThreshold(unsigned int scenecutThreshold);
+
+#if X264_BUILD < 67
+	bool getPreScenecutDetection(void);
+	void setPreScenecutDetection(bool preScenecutDetection);
+#endif
+
+	unsigned int getBFrames(void);
+	void setBFrames(unsigned int bFrames);
+
+	unsigned int getAdaptiveBFrameDecision(void);
+	void setAdaptiveBFrameDecision(unsigned int adaptiveBframeDecision);
+
+	int getBFrameBias(void);
+	void setBFrameBias(int bFrameBias);
+
+	bool getBFrameReferences(void);
+	void setBFrameReferences(bool bFrameReferences);
+
+	bool getLoopFilter(void);
+	void setLoopFilter(bool loopFilter);
+
+	int getLoopFilterAlphaC0(void);
+	void setLoopFilterAlphaC0(int loopFilterAlphaC0);
+
+	int getLoopFilterBeta(void);
+	void setLoopFilterBeta(int loopFilterBeta);
+
+	bool getCabac(void);
+	void setCabac(bool cabac);
+
+	bool getInterlaced(void);
+	void setInterlaced(bool interlaced);
+
+	unsigned int getCqmPreset(void);
+	void setCqmPreset(unsigned int cqmPreset);
+
+	uint8_t* getIntra4x4Luma(void);
+	void setIntra4x4Luma(uint8_t intra4x4Luma[]);
+
+	uint8_t* getIntraChroma(void);
+	void setIntraChroma(uint8_t intraChroma[]);
+
+	uint8_t* getInter4x4Luma(void);
+	void setInter4x4Luma(uint8_t inter4x4Luma[]);
+
+	uint8_t* getInterChroma(void);
+	void setInterChroma(uint8_t interChroma[]);
+
+	uint8_t* getIntra8x8Luma(void);
+	void setIntra8x8Luma(uint8_t intra8x8Luma[]);
+
+	uint8_t* getInter8x8Luma(void);
+	void setInter8x8Luma(uint8_t inter8x8Luma[]);
+
+	bool getPartitionI4x4(void);
+	void setPartitionI4x4(bool partitionI4x4);
+
+	bool getPartitionI8x8(void);
+	void setPartitionI8x8(bool partitionI8x8);
+
+	bool getPartitionP8x8(void);
+	void setPartitionP8x8(bool partitionP8x8);
+
+	bool getPartitionP4x4(void);
+	void setPartitionP4x4(bool partitionP4x4);
+
+	bool getPartitionB8x8(void);
+	void setPartitionB8x8(bool partitionB8x8);
+
+	bool getDct8x8(void);
+	void setDct8x8(bool dct8x8);
+
+	bool getWeightedPrediction(void);
+	void setWeightedPrediction(bool weightedPrediction);
+
+	unsigned int getDirectPredictionMode(void);
+	void setDirectPredictionMode(unsigned int directPredictionMode);
+
+#if X264_BUILD < 66
+	int getDirectPredictionSize(void);
+	void setDirectPredictionSize(int directPredictionSize);
+#endif
+
+	int getChromaLumaQuantiserDifference(void);
+	void setChromaLumaQuantiserDifference(int chromaLumaQuantiserDifference);
+
+	unsigned int getMotionEstimationMethod(void);
+	void setMotionEstimationMethod(unsigned int motionEstimationMethod);
+
+	unsigned int getMotionVectorSearchRange(void);
+	void setMotionVectorSearchRange(unsigned int motionVectorSearchRange);
+
+	int getMotionVectorLength(void);
+	void setMotionVectorLength(int motionVectorLength);
+
+	int getMotionVectorThreadBuffer(void);
+	void setMotionVectorThreadBuffer(int motionVectorThreadBuffer);
+
+	unsigned int getSubpixelRefinement(void);
+	void setSubpixelRefinement(unsigned int subpixelRefinement);
+
+#if X264_BUILD < 65
+	bool getBidirectionalMotionEstimation(void);
+	void setBidirectionalMotionEstimation(bool bidirectionalMotionEstimation);
+#endif
+
+	bool getChromaMotionEstimation(void);
+	void setChromaMotionEstimation(bool chromaMotionEstimation);
+
+#if X264_BUILD < 65
+	bool getBFrameRdo(void);
+	void setBFrameRdo(bool bFrameRdo);
+#endif
+
+	bool getMixedReferences(void);
+	void setMixedReferences(bool mixedReferences);
+
+	unsigned int getTrellis(void);
+	void setTrellis(unsigned int trellis);
+
+	bool getFastPSkip(void);
+	void setFastPSkip(bool fastPSkip);
+
+	bool getDctDecimate(void);
+	void setDctDecimate(bool dctDecimate);
+
+	unsigned int getNoiseReduction(void);
+	void setNoiseReduction(unsigned int noiseReduction);
+
+	unsigned int getInterLumaDeadzone(void);
+	void setInterLumaDeadzone(unsigned int interLumaDeadzone);
+
+	unsigned int getIntraLumaDeadzone(void);
+	void setIntraLumaDeadzone(unsigned int intraLumaDeadzone);
+
+	bool getComputePsnr(void);
+	void setComputePsnr(bool computePsnr);
+
+	bool getComputeSsim(void);
+	void setComputeSsim(bool computeSsim);
+
+	unsigned int getQuantiserMinimum(void);
+	void setQuantiserMinimum(unsigned int quantiserMinimum);
+
+	unsigned int getQuantiserMaximum(void);
+	void setQuantiserMaximum(unsigned int quantiserMaximum);
+
+	unsigned int getQuantiserStep(void);
+	void setQuantiserStep(unsigned int quantiserStep);
+
+	float getAverageBitrateTolerance(void);
+	void setAverageBitrateTolerance(float averageBitrateTolerance);
+
+	unsigned int getVbvMaximumBitrate(void);
+	void setVbvMaximumBitrate(unsigned int vbvMaximumBitrate);
+
+	unsigned int getVbvBufferSize(void);
+	void setVbvBufferSize(unsigned int vbvBufferSize);
+
+	float getVbvInitialOccupancy(void);
+	void setVbvInitialOccupancy(float vbvInitialOccupancy);
+
+	float getIpFrameQuantiser(void);
+	void setIpFrameQuantiser(float ipFrameQuantiser);
+
+	float getPbFrameQuantiser(void);
+	void setPbFrameQuantiser(float pbFrameQuantiser);
+
+#if X264_BUILD >= 62
+	unsigned int getAdaptiveQuantiserMode(void);
+	void setAdaptiveQuantiserMode(unsigned int adaptiveQuantiserMode);
+
+	float getAdaptiveQuantiserStrength(void);
+	void setAdaptiveQuantiserStrength(float adaptiveQuantiserStrength);
+#endif
+
+	float getQuantiserCurveCompression(void);
+	void setQuantiserCurveCompression(float quantiserCurveCompression);
+
+	float getReduceFluxBeforeCurveCompression(void);
+	void setReduceFluxBeforeCurveCompression(float reduceFluxBeforeCurveCompression);
+
+	float getReduceFluxAfterCurveCompression(void);
+	void setReduceFluxAfterCurveCompression(float reduceFluxAfterCurveCompression);
+
+	unsigned int getZoneCount(void);
+	x264ZoneOptions** getZones(void);
+	void clearZones(void);
+	void addZone(x264ZoneOptions *zoneOptions);
+
+	bool getAccessUnitDelimiters(void);
+	void setAccessUnitDelimiters(bool accessUnitDelimiters);
+
+	unsigned int getSpsIdentifier(void);
+	void setSpsIdentifier(unsigned int spsIdentifier);
+
+	int fromXml(const char *xml, PluginXmlType xmlType);
+};
+
+#endif	// x264Options_h



From mean at mail.berlios.de  Wed Jul  8 20:00:58 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Wed, 8 Jul 2009 20:00:58 +0200
Subject: [Avidemux-svn-commit] r5018 - in branches/avidemux_2.6_branch_mean:
	avidemux_core/ADM_coreVideoEncoder/include
	avidemux_core/ADM_coreVideoEncoder/src
	avidemux_plugins/ADM_videoEncoder/ffMpeg4
Message-ID: <200907081800.n68I0wW9001653@sheep.berlios.de>

Author: mean
Date: 2009-07-08 20:00:57 +0200 (Wed, 08 Jul 2009)
New Revision: 5018

Modified:
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoEncoder/include/ADM_coreVideoEncoderFFmpeg.h
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoEncoder/src/ADM_coreVideoEncoderFFmpeg.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/ffMpeg4/ADM_ffMpeg4.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/ffMpeg4/ADM_ffMpeg4.h
Log:
[ffCoreVideoEncoder] Move most of the stuff to base class

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoEncoder/include/ADM_coreVideoEncoderFFmpeg.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoEncoder/include/ADM_coreVideoEncoderFFmpeg.h	2009-07-08 13:35:56 UTC (rev 5017)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoEncoder/include/ADM_coreVideoEncoderFFmpeg.h	2009-07-08 18:00:57 UTC (rev 5018)
@@ -24,7 +24,66 @@
 {
 #include "ADM_lavcodec.h"
 }
+#include "ADM_encoderConf.h"
+/**
+    FFcodecSetting
+*/
+typedef struct 
+{
+  COMPRES_PARAMS params;
+//
 
+  Motion_Est_ID me_method;
+  uint32_t _GMC;
+  uint32_t _4MV;
+  uint32_t _QPEL;
+  uint32_t _TRELLIS_QUANT;
+  uint32_t qmin;			// 2-31
+  uint32_t qmax;			// 2-31
+  uint32_t max_qdiff;		// 1-31
+  uint32_t max_b_frames;		// 0-1
+  uint32_t mpeg_quant;		// 0-1
+  uint32_t is_luma_elim_threshold;
+  uint32_t luma_elim_threshold;	// -99--99
+  uint32_t is_chroma_elim_threshold;	// -99--99           
+  uint32_t chroma_elim_threshold;	// -99--99      
+
+  float lumi_masking;		// -1--1        
+  int32_t is_lumi_masking;		// -1--1
+  float dark_masking;		// -1--1        
+  int32_t is_dark_masking;		// -1--1
+  float qcompress;		// 0.0--1.0
+  float qblur;			// 0.0--1.0
+  uint32_t minBitrate;          // In kBits/s
+  uint32_t maxBitrate;          // In kBits/s
+  uint32_t user_matrix;		// 0 normal / 1 tmpgenc / 2 anime / 3 kvcd / 4 hr-tmpgenc
+  uint32_t gop_size;			// For mpeg1/2 , 12 is good
+  uint16_t *intra_matrix;
+  uint16_t *inter_matrix;
+  uint32_t interlaced;
+  uint32_t bff;			// WLA: bottom field first flag
+  uint32_t widescreen;          //0 4/3  1 16/9
+
+  // new stuff from jakub ui
+  uint32_t mb_eval;			// Replace hq 0..2
+  uint32_t vratetol;			// filesize tolerance in kb
+
+  uint32_t is_temporal_cplx_masking;	// temporal masking 0--1        
+  float temporal_cplx_masking;	// temporal masking 0--1
+
+  uint32_t is_spatial_cplx_masking;	// spatial masking 0--1
+  float spatial_cplx_masking;	// spatial masking 0--1
+  uint32_t _NORMALIZE_AQP;		// normalize adap quantiz
+
+  //
+  uint32_t use_xvid_ratecontrol;
+  uint32_t bufferSize;		// in KBYTES !!!!
+  uint32_t override_ratecontrol;
+  uint32_t dummy;
+
+} FFcodecSetting;
+
+
 /**
     \class ADM_coreVideoEncoderFFmpeg
     \brief base class for VideoEncoder based on libavcodec
@@ -32,18 +91,27 @@
 class ADM_coreVideoEncoderFFmpeg :public ADM_coreVideoEncoder
 {
 protected:
-               AVCodecContext   *_context;      // Contect 
+               FFcodecSetting   Settings;
+               AVCodecContext   *_context;      // Context 
                AVFrame          _frame;     
                ADMColorspace    *colorSpace;    // Colorspace converter if needed
                uint8_t          *rgbBuffer;     // Buffer for colorspace converter if needed
                ADM_colorspace   targetColorSpace; // Wanted colorspace
+               bool             loadStatFile(const char *file);
+               char             *statFileName;
+               FILE             *statFile;
+               int              pass;
 protected:
     virtual               bool             prolog(void); 
     virtual               bool             preEncode(void); 
     virtual               bool             setup(CodecID codecId);
     virtual               bool             getExtraData(uint32_t *l,uint8_t **d) ;
+                          bool             presetContext(FFcodecSetting *set);
+                          bool             postEncode(ADMBitstream *out, uint32_t size);
+    virtual               bool             setPassAndLogFile(int pass,const char *name); // Call this before setup if needed !
+                          bool             setupPass(void);               
 public:
-                            ADM_coreVideoEncoderFFmpeg(ADM_coreVideoFilter *src);
+                            ADM_coreVideoEncoderFFmpeg(ADM_coreVideoFilter *src,FFcodecSetting *settings=NULL);
 virtual                     ~ADM_coreVideoEncoderFFmpeg();
 
 };

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoEncoder/src/ADM_coreVideoEncoderFFmpeg.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoEncoder/src/ADM_coreVideoEncoderFFmpeg.cpp	2009-07-08 13:35:56 UTC (rev 5017)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoEncoder/src/ADM_coreVideoEncoderFFmpeg.cpp	2009-07-08 18:00:57 UTC (rev 5018)
@@ -19,15 +19,19 @@
 #include "ADM_default.h"
 #include "ADM_coreVideoEncoderFFmpeg.h"
 #define ADM_NO_PTS 0xFFFFFFFFFFFFFFFFLL // FIXME
+
+#define aprintf(...) {}
 /**
     \fn ADM_coreVideoEncoderFFmpeg
     \brief Constructor
 
 */
 
-ADM_coreVideoEncoderFFmpeg::ADM_coreVideoEncoderFFmpeg(ADM_coreVideoFilter *src) : ADM_coreVideoEncoder(src)
+ADM_coreVideoEncoderFFmpeg::ADM_coreVideoEncoderFFmpeg(ADM_coreVideoFilter *src,FFcodecSetting *set) 
+                    : ADM_coreVideoEncoder(src)
 {
 uint32_t w,h;
+    if(set) memcpy(&Settings,set,sizeof(*set));
     targetColorSpace=ADM_COLOR_YV12;
     w=getWidth();
     h=getHeight();
@@ -42,6 +46,9 @@
     _context->strict_std_compliance = -1;
     rgbBuffer=new uint8_t [(w+7)*(h+7)*4];
     colorSpace=NULL;
+    pass=0;
+    statFileName=NULL;
+    statFile=NULL;
 
 }
 /**
@@ -66,7 +73,14 @@
         delete [] rgbBuffer;
         rgbBuffer=NULL;
     }
-
+    if(statFile)
+    {
+        printf("[ffMpeg4Encoder] Closing stat file\n");
+        fclose(statFile);
+        statFile=NULL;
+    }
+    if(statFileName) ADM_dealloc(statFileName);
+    statFileName=NULL;
 }
 /**
     \fn prolog
@@ -219,4 +233,248 @@
     return true;
 
 }
+
+/**
+    \fn loadStatFile
+    \brief load the stat file from pass 1
+*/
+bool ADM_coreVideoEncoderFFmpeg::loadStatFile(const char *file)
+{
+  printf("[FFmpeg] Loading stat file :%s\n",file);
+  FILE *_statfile = fopen (file, "rb");
+  int statSize;
+
+  if (!_statfile)
+    {
+      printf ("[ffmpeg] internal file does not exists ?\n");
+      return false;
+    }
+
+  fseek (_statfile, 0, SEEK_END);
+  statSize = ftello (_statfile);
+  fseek (_statfile, 0, SEEK_SET);
+  _context->stats_in = (char *) ADM_alloc (statSize + 1);
+  _context->stats_in[statSize] = 0;
+  fread (_context->stats_in, statSize, 1, _statfile);
+  fclose(_statfile);
+
+
+    int i;
+    char *p=_context->stats_in;
+   for(i=-1; p; i++){
+            p= strchr(p+1, ';');
+        }
+  printf("[FFmpeg] stat file loaded ok, %d frames found\n",i);
+  return true;
+}
+/**
+        \fn postEncode
+        \brief update bitstream info from output of lavcodec
+*/
+bool ADM_coreVideoEncoderFFmpeg::postEncode(ADMBitstream *out, uint32_t size)
+{
+    int pict_type=FF_P_TYPE;
+    int keyframe=false;
+    if(_context->coded_frame)
+    {
+        pict_type=_context->coded_frame->pict_type;
+        keyframe=_context->coded_frame->key_frame;
+    }
+    aprintf("[ffMpeg4] Out Quant :%d, pic type %d keyf %d\n",out->out_quantizer,pict_type,keyframe);
+    out->len=size;
+    out->flags=0;
+    if(keyframe) 
+        out->flags=AVI_KEY_FRAME;
+    else if(pict_type==FF_B_TYPE)
+            out->flags=AVI_B_FRAME;
+    out->pts=out->dts=image->Pts;
+    // Update PTS/Dts
+    out->pts=_frame.reordered_opaque;
+    out->dts=-1; // FIXME
+    
+
+    // Update quant
+    if(!_context->coded_frame->quality)
+      out->out_quantizer=(int) floor (_frame.quality / (float) FF_QP2LAMBDA);
+    else
+      out->out_quantizer =(int) floor (_context->coded_frame->quality / (float) FF_QP2LAMBDA);
+
+    // Update stats
+    if(Settings.params.mode==COMPRESS_2PASS   || Settings.params.mode==COMPRESS_2PASS_BITRATE)
+    {
+        if(pass==1)
+            if (_context->stats_out)
+                fprintf (statFile, "%s", _context->stats_out);
+    }
+    return true;
+}
+
+/**
+    \fn presetContext
+    \brief put sensible values into context
+*/
+bool ADM_coreVideoEncoderFFmpeg::presetContext(FFcodecSetting *set)
+{
+	  _context->gop_size = 250;
+	
+#define SETX(x) _context->x=set->x; printf("[LAVCODEC]"#x" : %d\n",set->x);
+#define SETX_COND(x) if(set->is_##x) {_context->x=set->x; printf("[LAVCODEC]"#x" : %d\n",set->x);} else\
+		{ printf(#x" is not activated\n");}
+      SETX (me_method);
+      SETX (qmin);
+      SETX (qmax);
+      SETX (max_b_frames);
+      SETX (mpeg_quant);
+      SETX (max_qdiff);
+      SETX_COND (luma_elim_threshold);
+      SETX_COND (chroma_elim_threshold);
+
+#undef SETX
+#undef SETX_COND
+
+#define SETX(x)  _context->x=set->x; printf("[LAVCODEC]"#x" : %f\n",set->x);
+#define SETX_COND(x)  if(set->is_##x) {_context->x=set->x; printf("[LAVCODEC]"#x" : %f\n",set->x);} else  \
+									{printf("[LAVCODEC]"#x" No activated\n");}
+      SETX_COND (lumi_masking);
+      SETX_COND (dark_masking);
+      SETX (qcompress);
+      SETX (qblur);
+      SETX_COND (temporal_cplx_masking);
+      SETX_COND (spatial_cplx_masking);
+
+#undef SETX
+#undef SETX_COND
+
+#define SETX(x) if(set->x){ _context->flags|=CODEC_FLAG##x;printf("[LAVCODEC]"#x" is set\n");}
+      SETX (_GMC);
+
+
+    switch (set->mb_eval)
+	{
+        case 0:
+          _context->mb_decision = FF_MB_DECISION_SIMPLE;
+          break;
+        case 1:
+          _context->mb_decision = FF_MB_DECISION_BITS;
+          break;
+        case 2:
+          _context->mb_decision = FF_MB_DECISION_RD;
+          break;
+        default:
+          ADM_assert (0);
+	}
+      
+      SETX (_4MV);
+      SETX (_QPEL);
+      if(set->_TRELLIS_QUANT) _context->trellis=1;
+      //SETX(_HQ);
+      //SETX (_NORMALIZE_AQP);
+
+      if (set->widescreen)
+        {
+          _context->sample_aspect_ratio.num = 16;
+          _context->sample_aspect_ratio.den = 9;
+          printf ("[LAVCODEC]16/9 aspect ratio is set.\n");
+
+        }
+#undef SETX
+    
+  _context->bit_rate_tolerance = 8000000;
+  _context->b_quant_factor = 1.25;
+  _context->rc_strategy = 2;
+  _context->b_frame_strategy = 0;
+  _context->b_quant_offset = 1.25;
+  _context->rtp_payload_size = 0;
+  _context->strict_std_compliance = 0;
+  _context->i_quant_factor = 0.8;
+  _context->i_quant_offset = 0.0;
+  _context->rc_qsquish = 1.0;
+  _context->rc_qmod_amp = 0;
+  _context->rc_qmod_freq = 0;
+  _context->rc_eq = const_cast < char *>("tex^qComp");
+  _context->rc_max_rate = 000;
+  _context->rc_min_rate = 000;
+  _context->rc_buffer_size = 000;
+  _context->rc_buffer_aggressivity = 1.0;
+  _context->rc_initial_cplx = 0;
+  _context->dct_algo = 0;
+  _context->idct_algo = 0;
+  _context->p_masking = 0.0;
+
+  // Set frame rate den/num
+  prolog();
+  return true;
+}
+
+/**
+    \fn setLogFile
+*/
+ bool         ADM_coreVideoEncoderFFmpeg::setPassAndLogFile(int pass,const char *name)
+{
+    if(!pass || pass >2) return false;
+    if(!name) return false;
+    this->pass=pass;
+    statFileName=ADM_strdup(name);
+    return true;
+}
+/**
+    \fn setupPass
+    \brief Setup in case of multipass
+
+*/
+bool ADM_coreVideoEncoderFFmpeg::setupPass(void)
+{
+    int averageBitrate; // Fixme
+   
+    // Compute average bitrate
+
+        if(Settings.params.mode==COMPRESS_2PASS_BITRATE) averageBitrate=Settings.params.avg_bitrate*1000;
+            else
+            {
+                uint64_t duration=source->getInfo()->totalDuration; // in us
+                float f;
+                if(!duration) 
+                {
+                    printf("[ffMpeg4] No source duration!\n");
+                    return false;
+                }
+                f=Settings.params.finalsize; 
+                f=f*1024*1024*8; // in bits
+                f*=1000*1000;
+                f/=duration;
+                averageBitrate=(uint32_t)f;
+            }
+
+        printf("[ffmpeg4] Average bitrate =%"LU" kb/s\n",averageBitrate/1000);
+        _context->bit_rate=averageBitrate;
+        switch(pass)
+        {
+                case 1:
+                    printf("[ffMpeg4] Setup-ing Pass 1\n");
+                    _context->flags |= CODEC_FLAG_PASS1;
+                    // Open stat file
+                    statFile=fopen(statFileName,"wt");
+                    if(!statFile)
+                    {
+                        printf("[ffmpeg] Cannot open statfile %s for writing\n",statFileName);
+                        return false;
+                    }
+                    break;
+                case 2:
+                    printf("[ffMpeg4] Setup-ing Pass 2\n");
+                    _context->flags |= CODEC_FLAG_PASS2;
+                    if(false==loadStatFile(statFileName))
+                    {
+                        printf("[ffmpeg4] Cannot load stat file\n");
+                        return false;
+                    }
+                    break;
+                default:
+                        printf("[ffmpeg] Pass=0, fail\n");
+                        return false;
+                    break;
+
+        }
+        return true;
+}
 // EOF

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/ffMpeg4/ADM_ffMpeg4.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/ffMpeg4/ADM_ffMpeg4.cpp	2009-07-08 13:35:56 UTC (rev 5017)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/ffMpeg4/ADM_ffMpeg4.cpp	2009-07-08 18:00:57 UTC (rev 5018)
@@ -27,7 +27,7 @@
 #define aprintf printf
 #endif
 
-static FFcodecSetting Settings=
+static FFcodecSetting Mp4Settings=
 {
     {
     COMPRESS_CQ, //COMPRESSION_MODE  mode;
@@ -35,7 +35,7 @@
     1500,           //uint32_t          bitrate;      /// In kb/s 
     700,            //uint32_t          finalsize;    /// In ?
     1500,           //uint32_t          avg_bitrate;  /// avg_bitrate is in kb/s!!
-    ADM_ENC_CAP_CBR+ADM_ENC_CAP_CQ+ADM_ENC_CAP_2PASS+ADM_ENC_CAP_GLOBAL+ADM_ENC_CAP_SAME
+    ADM_ENC_CAP_CBR+ADM_ENC_CAP_CQ+ADM_ENC_CAP_2PASS+ADM_ENC_CAP_2PASS_BR+ADM_ENC_CAP_GLOBAL+ADM_ENC_CAP_SAME
     },
           ME_EPZS,			//     ME
           0,				//          GMC     
@@ -78,74 +78,13 @@
 /**
         \fn ADM_ffMpeg4Encoder
 */
-ADM_ffMpeg4Encoder::ADM_ffMpeg4Encoder(ADM_coreVideoFilter *src) : ADM_coreVideoEncoderFFmpeg(src)
+ADM_ffMpeg4Encoder::ADM_ffMpeg4Encoder(ADM_coreVideoFilter *src) : ADM_coreVideoEncoderFFmpeg(src,&Mp4Settings)
 {
     printf("[ffMpeg4Encoder] Creating.\n");
-    pass=0;
-    statFileName=NULL;
-    statFile=NULL;
-
-}
-/**
-    \fn setupPass
-    \brief Setup in case of multipass
-
-*/
-bool ADM_ffMpeg4Encoder::setupPass(void)
-{
-    int averageBitrate; // Fixme
    
-    // Compute average bitrate
 
-        if(Settings.params.mode==COMPRESS_2PASS_BITRATE) averageBitrate=Settings.params.avg_bitrate*1000;
-            else
-            {
-                uint64_t duration=source->getInfo()->totalDuration; // in us
-                float f;
-                if(!duration) 
-                {
-                    printf("[ffMpeg4] No source duration!\n");
-                    return false;
-                }
-                f=Settings.params.finalsize; 
-                f=f*1024*1024*8; // in bits
-                f*=1000*1000;
-                f/=duration;
-                averageBitrate=(uint32_t)f;
-            }
-
-        printf("[ffmpeg4] Average bitrate =%"LU" kb/s\n",averageBitrate/1000);
-        _context->bit_rate=averageBitrate;
-        switch(pass)
-        {
-                case 1:
-                    printf("[ffMpeg4] Setup-ing Pass 1\n");
-                    _context->flags |= CODEC_FLAG_PASS1;
-                    // Open stat file
-                    statFile=fopen(statFileName,"wt");
-                    if(!statFile)
-                    {
-                        printf("[ffmpeg] Cannot open statfile %s for writing\n",statFileName);
-                        return false;
-                    }
-                    break;
-                case 2:
-                    printf("[ffMpeg4] Setup-ing Pass 2\n");
-                    _context->flags |= CODEC_FLAG_PASS2;
-                    if(false==loadStatFile(statFileName))
-                    {
-                        printf("[ffmpeg4] Cannot load stat file\n");
-                        return false;
-                    }
-                    break;
-                default:
-                        printf("[ffmpeg] Pass=0, fail\n");
-                        return false;
-                    break;
-
-        }
-        return true;
 }
+
 /**
     \fn setup
 */
@@ -165,7 +104,7 @@
       case COMPRESS_SAME:
       case COMPRESS_CQ:
             _context->flags |= CODEC_FLAG_QSCALE;
-  	    _context->bit_rate = 0;
+            _context->bit_rate = 0;
             break;
       case COMPRESS_CBR:
               _context->bit_rate=Settings.params.bitrate*1000; // kb->b;
@@ -188,14 +127,7 @@
 ADM_ffMpeg4Encoder::~ADM_ffMpeg4Encoder()
 {
     printf("[ffMpeg4Encoder] Destroying.\n");
-    if(statFile)
-    {
-        printf("[ffMpeg4Encoder] Closing stat file\n");
-        fclose(statFile);
-        statFile=NULL;
-    }
-    if(statFileName) ADM_dealloc(statFileName);
-    statFileName=NULL;
+   
     
 }
 
@@ -267,155 +199,8 @@
    
     return true;
 }
-/**
-        \fn postEncode
-        \brief update bitstream info from output of lavcodec
-*/
-bool ADM_ffMpeg4Encoder::postEncode(ADMBitstream *out, uint32_t size)
-{
-    int pict_type=FF_P_TYPE;
-    int keyframe=false;
-    if(_context->coded_frame)
-    {
-        pict_type=_context->coded_frame->pict_type;
-        keyframe=_context->coded_frame->key_frame;
-    }
-    aprintf("[ffMpeg4] Out Quant :%d, pic type %d keyf %d\n",out->out_quantizer,pict_type,keyframe);
-    out->len=size;
-    out->flags=0;
-    if(keyframe) 
-        out->flags=AVI_KEY_FRAME;
-    else if(pict_type==FF_B_TYPE)
-            out->flags=AVI_B_FRAME;
-    out->pts=out->dts=image->Pts;
-    // Update PTS/Dts
-    out->pts=_frame.reordered_opaque;
-    out->dts=-1; // FIXME
-    
 
-    // Update quant
-    if(!_context->coded_frame->quality)
-      out->out_quantizer=(int) floor (_frame.quality / (float) FF_QP2LAMBDA);
-    else
-      out->out_quantizer =(int) floor (_context->coded_frame->quality / (float) FF_QP2LAMBDA);
-
-    // Update stats
-    if(Settings.params.mode==COMPRESS_2PASS   || Settings.params.mode==COMPRESS_2PASS_BITRATE)
-    {
-        if(pass==1)
-            if (_context->stats_out)
-                fprintf (statFile, "%s", _context->stats_out);
-    }
-    return true;
-}
 /**
-    \fn presetContext
-    \brief put sensible values into context
-*/
-bool ADM_ffMpeg4Encoder::presetContext(FFcodecSetting *set)
-{
-	  _context->gop_size = 250;
-	
-#define SETX(x) _context->x=set->x; printf("[LAVCODEC]"#x" : %d\n",set->x);
-#define SETX_COND(x) if(set->is_##x) {_context->x=set->x; printf("[LAVCODEC]"#x" : %d\n",set->x);} else\
-		{ printf(#x" is not activated\n");}
-      SETX (me_method);
-      SETX (qmin);
-      SETX (qmax);
-      SETX (max_b_frames);
-      SETX (mpeg_quant);
-      SETX (max_qdiff);
-      SETX_COND (luma_elim_threshold);
-      SETX_COND (chroma_elim_threshold);
-
-#undef SETX
-#undef SETX_COND
-
-#define SETX(x)  _context->x=set->x; printf("[LAVCODEC]"#x" : %f\n",set->x);
-#define SETX_COND(x)  if(set->is_##x) {_context->x=set->x; printf("[LAVCODEC]"#x" : %f\n",set->x);} else  \
-									{printf("[LAVCODEC]"#x" No activated\n");}
-      SETX_COND (lumi_masking);
-      SETX_COND (dark_masking);
-      SETX (qcompress);
-      SETX (qblur);
-      SETX_COND (temporal_cplx_masking);
-      SETX_COND (spatial_cplx_masking);
-
-#undef SETX
-#undef SETX_COND
-
-#define SETX(x) if(set->x){ _context->flags|=CODEC_FLAG##x;printf("[LAVCODEC]"#x" is set\n");}
-      SETX (_GMC);
-
-
-    switch (set->mb_eval)
-	{
-        case 0:
-          _context->mb_decision = FF_MB_DECISION_SIMPLE;
-          break;
-        case 1:
-          _context->mb_decision = FF_MB_DECISION_BITS;
-          break;
-        case 2:
-          _context->mb_decision = FF_MB_DECISION_RD;
-          break;
-        default:
-          ADM_assert (0);
-	}
-      
-      SETX (_4MV);
-      SETX (_QPEL);
-      if(set->_TRELLIS_QUANT) _context->trellis=1;
-      //SETX(_HQ);
-      //SETX (_NORMALIZE_AQP);
-
-      if (set->widescreen)
-        {
-          _context->sample_aspect_ratio.num = 16;
-          _context->sample_aspect_ratio.den = 9;
-          printf ("[LAVCODEC]16/9 aspect ratio is set.\n");
-
-        }
-#undef SETX
-    
-  _context->bit_rate_tolerance = 8000000;
-  _context->b_quant_factor = 1.25;
-  _context->rc_strategy = 2;
-  _context->b_frame_strategy = 0;
-  _context->b_quant_offset = 1.25;
-  _context->rtp_payload_size = 0;
-  _context->strict_std_compliance = 0;
-  _context->i_quant_factor = 0.8;
-  _context->i_quant_offset = 0.0;
-  _context->rc_qsquish = 1.0;
-  _context->rc_qmod_amp = 0;
-  _context->rc_qmod_freq = 0;
-  _context->rc_eq = const_cast < char *>("tex^qComp");
-  _context->rc_max_rate = 000;
-  _context->rc_min_rate = 000;
-  _context->rc_buffer_size = 000;
-  _context->rc_buffer_aggressivity = 1.0;
-  _context->rc_initial_cplx = 0;
-  _context->dct_algo = 0;
-  _context->idct_algo = 0;
-  _context->p_masking = 0.0;
-
-  // Set frame rate den/num
-  prolog();
-  return true;
-}
-/**
-    \fn setLogFile
-*/
- bool         ADM_ffMpeg4Encoder::setPassAndLogFile(int pass,const char *name)
-{
-    if(!pass || pass >2) return false;
-    if(!name) return false;
-    this->pass=pass;
-    statFileName=ADM_strdup(name);
-    return true;
-}
-/**
     \fn isDualPass
 
 */
@@ -427,39 +212,6 @@
 }
 
 /**
-    \fn loadStatFile
-    \brief load the stat file from pass 1
-*/
-bool ADM_ffMpeg4Encoder::loadStatFile(const char *file)
-{
-  printf("[FFmpeg] Loading stat file :%s\n",file);
-  FILE *_statfile = fopen (file, "rb");
-  int statSize;
-
-  if (!_statfile)
-    {
-      printf ("[ffmpeg] internal file does not exists ?\n");
-      return false;
-    }
-
-  fseek (_statfile, 0, SEEK_END);
-  statSize = ftello (_statfile);
-  fseek (_statfile, 0, SEEK_SET);
-  _context->stats_in = (char *) ADM_alloc (statSize + 1);
-  _context->stats_in[statSize] = 0;
-  fread (_context->stats_in, statSize, 1, _statfile);
-  fclose(_statfile);
-
-
-    int i;
-    char *p=_context->stats_in;
-   for(i=-1; p; i++){
-            p= strchr(p+1, ';');
-        }
-  printf("[FFmpeg] stat file loaded ok, %d frames found\n",i);
-  return true;
-}
-/**
     \fn jpegConfigure
     \brief UI configuration for jpeg encoder
 */
@@ -486,12 +238,12 @@
   {2,QT_TR_NOOP("Rate distortion")}
 };     
 
-        FFcodecSetting *conf=&Settings;
+        FFcodecSetting *conf=&Mp4Settings;
 
 uint32_t me=(uint32_t)conf->me_method;  
 #define PX(x) &(conf->x)
 
-         diaElemBitrate   bitrate(&(Settings.params),NULL);
+         diaElemBitrate   bitrate(&(Mp4Settings.params),NULL);
          diaElemMenu      meM(&me,QT_TR_NOOP("Matrices"),4,meE);
          diaElemUInteger  qminM(PX(qmin),QT_TR_NOOP("Mi_n. quantizer:"),1,31);
          diaElemUInteger  qmaxM(PX(qmax),QT_TR_NOOP("Ma_x. quantizer:"),1,31);

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/ffMpeg4/ADM_ffMpeg4.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/ffMpeg4/ADM_ffMpeg4.h	2009-07-08 13:35:56 UTC (rev 5017)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/ffMpeg4/ADM_ffMpeg4.h	2009-07-08 18:00:57 UTC (rev 5018)
@@ -18,67 +18,8 @@
 #ifndef ADM_ffMpeg4_ENCODER_H
 #define ADM_ffMpeg4_ENCODER_H
 #include "ADM_coreVideoEncoderFFmpeg.h"
-#include "ADM_encoderConf.h"
 
-/**
-    FFcodecSetting
-*/
-typedef struct 
-{
-  COMPRES_PARAMS params;
-//
 
-  Motion_Est_ID me_method;
-  uint32_t _GMC;
-  uint32_t _4MV;
-  uint32_t _QPEL;
-  uint32_t _TRELLIS_QUANT;
-  uint32_t qmin;			// 2-31
-  uint32_t qmax;			// 2-31
-  uint32_t max_qdiff;		// 1-31
-  uint32_t max_b_frames;		// 0-1
-  uint32_t mpeg_quant;		// 0-1
-  uint32_t is_luma_elim_threshold;
-  uint32_t luma_elim_threshold;	// -99--99
-  uint32_t is_chroma_elim_threshold;	// -99--99           
-  uint32_t chroma_elim_threshold;	// -99--99      
-
-  float lumi_masking;		// -1--1        
-  int32_t is_lumi_masking;		// -1--1
-  float dark_masking;		// -1--1        
-  int32_t is_dark_masking;		// -1--1
-  float qcompress;		// 0.0--1.0
-  float qblur;			// 0.0--1.0
-  uint32_t minBitrate;          // In kBits/s
-  uint32_t maxBitrate;          // In kBits/s
-  uint32_t user_matrix;		// 0 normal / 1 tmpgenc / 2 anime / 3 kvcd / 4 hr-tmpgenc
-  uint32_t gop_size;			// For mpeg1/2 , 12 is good
-  uint16_t *intra_matrix;
-  uint16_t *inter_matrix;
-  uint32_t interlaced;
-  uint32_t bff;			// WLA: bottom field first flag
-  uint32_t widescreen;          //0 4/3  1 16/9
-
-  // new stuff from jakub ui
-  uint32_t mb_eval;			// Replace hq 0..2
-  uint32_t vratetol;			// filesize tolerance in kb
-
-  uint32_t is_temporal_cplx_masking;	// temporal masking 0--1        
-  float temporal_cplx_masking;	// temporal masking 0--1
-
-  uint32_t is_spatial_cplx_masking;	// spatial masking 0--1
-  float spatial_cplx_masking;	// spatial masking 0--1
-  uint32_t _NORMALIZE_AQP;		// normalize adap quantiz
-
-  //
-  uint32_t use_xvid_ratecontrol;
-  uint32_t bufferSize;		// in KBYTES !!!!
-  uint32_t override_ratecontrol;
-  uint32_t dummy;
-
-} FFcodecSetting;
-
-
 /**
         \class ADM_ffMpeg4Encoder
         \brief Dummy encoder that does nothing
@@ -88,14 +29,9 @@
 {
 protected:
                
-               bool            presetContext(FFcodecSetting *set);
-               bool            postEncode(ADMBitstream *out, uint32_t size);
-               bool            loadStatFile(const char *file);
-               bool            setupPass(void);
-               int             pass;
+           
                int             plane;
-               char            *statFileName;
-               FILE            *statFile;
+               
 public:
 
                            ADM_ffMpeg4Encoder(ADM_coreVideoFilter *src);
@@ -105,7 +41,7 @@
 virtual const  char        *getFourcc(void) {return "DIVX";}
 
 virtual        bool         isDualPass(void) ;
-virtual        bool         setPassAndLogFile(int pass,const char *name); // Call this before setup if needed !
+
 };
 
 #endif



From gruntster at mail.berlios.de  Wed Jul  8 22:42:38 2009
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Wed, 8 Jul 2009 22:42:38 +0200
Subject: [Avidemux-svn-commit] r5019 - in
	branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder:
	ADM_vidEnc_x264 ADM_vidEnc_x264/qt4 common
Message-ID: <200907082042.n68KgcKD025510@sheep.berlios.de>

Author: gruntster
Date: 2009-07-08 22:42:32 +0200 (Wed, 08 Jul 2009)
New Revision: 5019

Modified:
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/encoder.cpp
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.h
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/common/PluginOptions.cpp
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/common/PluginOptions.h
Log:
[x264] interpret preset xml block and load appropriate config

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/encoder.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/encoder.cpp	2009-07-08 18:00:57 UTC (rev 5018)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/encoder.cpp	2009-07-08 20:42:32 UTC (rev 5019)
@@ -157,8 +157,12 @@
 	bool success = true;
 
 	if (pluginOptions)
+	{
 		success = _options.fromXml(pluginOptions, PLUGIN_XML_INTERNAL);
 
+		_options.loadPresetConfiguration();
+	}
+
 	if (encodeOptions && success)
 	{
 		memcpy(&_encodeOptions, encodeOptions, sizeof(vidEncOptions));

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp	2009-07-08 18:00:57 UTC (rev 5018)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp	2009-07-08 20:42:32 UTC (rev 5019)
@@ -171,15 +171,20 @@
 	bool origDisableGenericSlots = disableGenericSlots;
 	QMap<QString, int> configs;
 	QStringList filter("*.xml");
-	QStringList list = QDir(getUserConfigDirectory()).entryList(filter, QDir::Files | QDir::Readable);
+	char* configDir = x264Options::getUserConfigDirectory();
+	QStringList list = QDir(configDir).entryList(filter, QDir::Files | QDir::Readable);
 
+	delete [] configDir;
 	disableGenericSlots = true;
 
 	for (int item = 0; item < list.size(); item++)
 		configs.insert(QFileInfo(list[item]).completeBaseName(), PLUGIN_CONFIG_USER);
 
-	list = QDir(getSystemConfigDirectory()).entryList(filter, QDir::Files | QDir::Readable);
+	configDir = x264Options::getSystemConfigDirectory();
+	list = QDir(configDir).entryList(filter, QDir::Files | QDir::Readable);
 
+	delete [] configDir;
+
 	for (int item = 0; item < list.size(); item++)
 		configs.insert(QFileInfo(list[item]).completeBaseName(), PLUGIN_CONFIG_SYSTEM);
 
@@ -282,28 +287,18 @@
 		ui.deleteButton->setEnabled(false);
 	else
 	{
-		int configType = ui.configurationComboBox->itemData(index).toInt();
+		PluginConfigType configType = (PluginConfigType)ui.configurationComboBox->itemData(index).toInt();
 		QString configFileName;
 
 		ui.deleteButton->setEnabled(configType == PLUGIN_CONFIG_USER);
 
-		if (configType == PLUGIN_CONFIG_SYSTEM)
-			configFileName = QFileInfo(getSystemConfigDirectory(), ui.configurationComboBox->itemText(index) + ".xml").filePath();
-		else	// PLUGIN_CONFIG_USER
-			configFileName = QFileInfo(getUserConfigDirectory(), ui.configurationComboBox->itemText(index) + ".xml").filePath();
+		x264Options options;
+		vidEncOptions *encodeOptions;
 
-		QFile configFile(configFileName);
+		options.setPresetConfiguration(ui.configurationComboBox->itemText(index).toUtf8().constData(), configType);
 
-		if (configFile.exists())
+		if (options.loadPresetConfiguration())
 		{
-			configFile.open(QIODevice::ReadOnly | QIODevice::Text);
-
-			QByteArray fileContents = configFile.readAll();
-			x264Options options;
-			vidEncOptions *encodeOptions;
-
-			configFile.close();
-			options.fromXml(fileContents.constData(), PLUGIN_XML_EXTERNAL);
 			encodeOptions = options.getEncodeOptions();
 
 			loadSettings(encodeOptions, &options);
@@ -351,9 +346,12 @@
 
 void x264ConfigDialog::deleteButton_pressed(void)
 {
-	QString configFileName = QFileInfo(getUserConfigDirectory(), ui.configurationComboBox->currentText() + ".xml").filePath();
+	char *configDir = x264Options::getUserConfigDirectory();
+	QString configFileName = QFileInfo(QString(configDir), ui.configurationComboBox->currentText() + ".xml").filePath();
 	QFile configFile(configFileName);
 
+	delete [] configDir;
+
 	if (GUI_Question(QT_TR_NOOP("Are you sure you wish to delete the selected configuration?")) && configFile.exists())
 	{
 		disableGenericSlots = true;
@@ -991,26 +989,6 @@
 	options->setFullRangeSamples(ui.fullRangeSamplesCheckBox->isChecked());
 }
 
-QString x264ConfigDialog::getUserConfigDirectory(void)
-{
-	char *userConfigDirectory = ADM_getHomeRelativePath("x264");
-	QString qstring = QString(userConfigDirectory);
-
-	delete [] userConfigDirectory;
-
-	return qstring;
-}
-
-QString x264ConfigDialog::getSystemConfigDirectory(void)
-{
-	char* pluginPath = ADM_getPluginPath();
-	QString qstring = QString(pluginPath).append("/").append(PLUGIN_SUBDIR);
-
-	delete [] pluginPath;
-
-	return qstring;
-}
-
 extern "C" int showX264ConfigDialog(vidEncConfigParameters *configParameters, vidEncVideoProperties *properties, vidEncOptions *encodeOptions, x264Options *options)
 {
 	x264ConfigDialog dialog(configParameters, properties, encodeOptions, options);

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.h	2009-07-08 18:00:57 UTC (rev 5018)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.h	2009-07-08 20:42:32 UTC (rev 5019)
@@ -50,8 +50,6 @@
 	void loadSettings(vidEncOptions *encodeOptions, x264Options *options);
 	int getValueIndexInArray(uint8_t value, const uint8_t valueArray[], int elementCount);
 	int getValueIndexInArray(int8_t value, const int8_t valueArray[], int elementCount);
-	QString getUserConfigDirectory(void);
-	QString getSystemConfigDirectory(void);
 
 public:
 	x264ConfigDialog(vidEncConfigParameters *configParameters, vidEncVideoProperties *properties, vidEncOptions *encodeOptions, x264Options *options);

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/common/PluginOptions.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/common/PluginOptions.cpp	2009-07-08 18:00:57 UTC (rev 5018)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/common/PluginOptions.cpp	2009-07-08 20:42:32 UTC (rev 5019)
@@ -124,6 +124,54 @@
 	_configurationType = PLUGIN_CONFIG_CUSTOM;
 }
 
+bool PluginOptions::loadPresetConfiguration(void)
+{
+	char *dir = NULL;
+	bool success = false;
+	PluginConfigType configurationType = _configurationType;
+	char configurationName[strlen(_configurationName) + 1];
+
+	strcpy(configurationName, _configurationName);
+
+	if (configurationType == PLUGIN_CONFIG_USER)
+		dir = getUserConfigDirectory();
+	else if (configurationType == PLUGIN_CONFIG_SYSTEM)
+		dir = getSystemConfigDirectory();
+
+	if (dir)
+	{
+		char presetConfigFile[strlen(dir) + strlen(configurationName) + 6];
+
+		strcpy(presetConfigFile, dir);
+		strcat(presetConfigFile, "/");
+		strcat(presetConfigFile, configurationName);
+		strcat(presetConfigFile, ".xml");
+
+		delete [] dir;
+		FILE *file = fopen(presetConfigFile, "r");
+
+		if (file)
+		{
+			fseek(file, 0, SEEK_END);
+
+			long size = ftell(file);
+			char presetXml[size];
+
+			fseek(file, 0, SEEK_SET);
+			size = fread(presetXml, 1, size, file);
+			presetXml[size] = 0;
+			fclose(file);
+
+			success = fromXml(presetXml, PLUGIN_XML_EXTERNAL);
+			setPresetConfiguration(configurationName, configurationType);
+		}
+		else
+			printf("Error - Unable to open or read %s\n", presetConfigFile);
+	}
+
+	return success;
+}
+
 void PluginOptions::setEncodeOptionsToDefaults(void)
 {
 	_encodeOptions.encodeMode = _defaultEncodeMode;
@@ -311,3 +359,22 @@
 	setPresetConfiguration(name, type);
 	free(name);
 }
+
+char* PluginOptions::getUserConfigDirectory(void)
+{
+	return ADM_getHomeRelativePath(PLUGIN_SUBDIR);
+}
+
+char* PluginOptions::getSystemConfigDirectory(void)
+{
+	char* pluginPath = ADM_getPluginPath();
+	char* systemConfigPath = new char[strlen(pluginPath) + strlen(PLUGIN_SUBDIR) + 2];
+
+	strcpy(systemConfigPath, pluginPath);
+	strcat(systemConfigPath, "/");
+	strcat(systemConfigPath, PLUGIN_SUBDIR);
+
+	delete [] pluginPath;
+
+	return systemConfigPath;
+}

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/common/PluginOptions.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/common/PluginOptions.h	2009-07-08 18:00:57 UTC (rev 5018)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/common/PluginOptions.h	2009-07-08 20:42:32 UTC (rev 5019)
@@ -66,12 +66,16 @@
 	virtual void getPresetConfiguration(char** configurationName, PluginConfigType *configurationType);
 	virtual void setPresetConfiguration(const char* configurationName, PluginConfigType configurationType);
 	virtual void clearPresetConfiguration(void);
+	virtual bool loadPresetConfiguration(void);
 
 	virtual void addOptionsToXml(xmlNodePtr xmlNodeRoot) = 0;
 	virtual void parseOptions(xmlNode *node) = 0;
 
 	virtual char* toXml(PluginXmlType xmlType);
 	virtual int fromXml(const char *xml, PluginXmlType xmlType);
+
+	static char* getUserConfigDirectory(void);
+	static char* getSystemConfigDirectory(void);
 };
 
 #endif	// options_h



From gruntster at mail.berlios.de  Wed Jul  8 23:53:03 2009
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Wed, 8 Jul 2009 23:53:03 +0200
Subject: [Avidemux-svn-commit] r5020 -
	branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264
Message-ID: <200907082153.n68Lr3NN031750@sheep.berlios.de>

Author: gruntster
Date: 2009-07-08 23:52:59 +0200 (Wed, 08 Jul 2009)
New Revision: 5020

Modified:
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/encoder.cpp
Log:
[x264] use a more precise buffer size for decoded picture

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/encoder.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/encoder.cpp	2009-07-08 20:42:32 UTC (rev 5019)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/encoder.cpp	2009-07-08 21:52:59 UTC (rev 5020)
@@ -192,7 +192,7 @@
 
 	_opened = true;
 	_currentPass = 0;
-	_bufferSize = properties->width * properties->height * 3;
+	_bufferSize = (properties->width * properties->height) + 2 * ((properties->width + 1 >> 1) * (properties->height + 1 >> 1));
 	_buffer = new uint8_t[_bufferSize];
 
 	memcpy(&_properties, properties, sizeof(vidEncVideoProperties));



From gruntster at mail.berlios.de  Wed Jul  8 23:53:50 2009
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Wed, 8 Jul 2009 23:53:50 +0200
Subject: [Avidemux-svn-commit] r5021 - in
	branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264:
	. qt4 xml
Message-ID: <200907082153.n68LronF031782@sheep.berlios.de>

Author: gruntster
Date: 2009-07-08 23:53:44 +0200 (Wed, 08 Jul 2009)
New Revision: 5021

Modified:
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/x264Options.cpp
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/xml/Apple iPhone.xml
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/xml/Apple iPod 5.5G.xml
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/xml/Microsoft Zune.xml
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/xml/Sony PlayStation Portable.xml
Log:
[x264] handle integer idc levels properly

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp	2009-07-08 21:52:59 UTC (rev 5020)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp	2009-07-08 21:53:44 UTC (rev 5021)
@@ -42,7 +42,7 @@
 	static const int _predefinedARs[aspectRatioCount][2] = {{16, 15}, {64, 45}, {8, 9}, {32, 27}};
 
 	// Mappings for x264 array index -> UI combobox index
-	static const int8_t _idcLevel[idcLevelCount] = {-1, 1, 11, 12, 13, 2, 21, 22, 3, 31, 32, 4, 41, 42, 5, 51};
+	static const int8_t _idcLevel[idcLevelCount] = {-1, 10, 11, 12, 13, 20, 21, 22, 30, 31, 32, 40, 41, 42, 50, 51};
 	static const uint8_t _videoFormat[videoFormatCount] = {5, 0, 1, 2, 3, 4};
 	static const uint8_t _colourPrimaries[colourPrimariesCount] = {2, 1, 4, 5, 6, 7, 8};
 	static const uint8_t _transferCharacteristics[transferCharacteristicsCount] = {2, 1, 4, 5, 8, 9, 10, 6, 7};

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/x264Options.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/x264Options.cpp	2009-07-08 21:52:59 UTC (rev 5020)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/x264Options.cpp	2009-07-08 21:53:44 UTC (rev 5021)
@@ -112,20 +112,20 @@
 	switch (idcLevel)
 	{
 		case -1:
-		case 1:
+		case 10:
 		case 11:
 		case 12:
 		case 13:
-		case 2:
+		case 20:
 		case 21:
 		case 22:
-		case 3:
+		case 30:
 		case 31:
 		case 32:
-		case 4:
+		case 40:
 		case 41:
 		case 42:
-		case 5:
+		case 50:
 		case 51:
 			_param.i_level_idc = idcLevel;
 	}

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/xml/Apple iPhone.xml
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/xml/Apple iPhone.xml	2009-07-08 21:52:59 UTC (rev 5020)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/xml/Apple iPhone.xml	2009-07-08 21:53:44 UTC (rev 5021)
@@ -5,7 +5,7 @@
     <parameter>1000</parameter>
   </encodeOptions>
   <x264Options>
-    <idcLevel>3</idcLevel>
+    <idcLevel>30</idcLevel>
     <cabac>false</cabac>
     <analyse>
       <partitionI4x4>true</partitionI4x4>

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/xml/Apple iPod 5.5G.xml
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/xml/Apple iPod 5.5G.xml	2009-07-08 21:52:59 UTC (rev 5020)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/xml/Apple iPod 5.5G.xml	2009-07-08 21:53:44 UTC (rev 5021)
@@ -5,7 +5,7 @@
     <parameter>1000</parameter>
   </encodeOptions>
   <x264Options>
-    <idcLevel>3</idcLevel>
+    <idcLevel>30</idcLevel>
     <cabac>false</cabac>
     <analyse>
       <partitionI4x4>true</partitionI4x4>

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/xml/Microsoft Zune.xml
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/xml/Microsoft Zune.xml	2009-07-08 21:52:59 UTC (rev 5020)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/xml/Microsoft Zune.xml	2009-07-08 21:53:44 UTC (rev 5021)
@@ -5,7 +5,7 @@
     <parameter>1000</parameter>
   </encodeOptions>
   <x264Options>
-    <idcLevel>3</idcLevel>
+    <idcLevel>30</idcLevel>
     <loopFilter>false</loopFilter>
     <cabac>false</cabac>
     <analyse>

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/xml/Sony PlayStation Portable.xml
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/xml/Sony PlayStation Portable.xml	2009-07-08 21:52:59 UTC (rev 5020)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/xml/Sony PlayStation Portable.xml	2009-07-08 21:53:44 UTC (rev 5021)
@@ -5,7 +5,7 @@
     <parameter>1000</parameter>
   </encodeOptions>
   <x264Options>
-    <idcLevel>3</idcLevel>
+    <idcLevel>30</idcLevel>
     <referenceFrames>3</referenceFrames>
     <bFrames>3</bFrames>
     <adaptiveBframeDecision>2</adaptiveBframeDecision>



From gruntster at mail.berlios.de  Thu Jul  9 00:04:26 2009
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Thu, 9 Jul 2009 00:04:26 +0200
Subject: [Avidemux-svn-commit] r5022 -
	branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk
Message-ID: <200907082204.n68M4QVg000625@sheep.berlios.de>

Author: gruntster
Date: 2009-07-09 00:04:21 +0200 (Thu, 09 Jul 2009)
New Revision: 5022

Modified:
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk/x264ConfigDialog.cpp
Log:
[x264] remember encode mode for GTK+ interface

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk/x264ConfigDialog.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk/x264ConfigDialog.cpp	2009-07-08 21:53:44 UTC (rev 5021)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk/x264ConfigDialog.cpp	2009-07-08 22:04:21 UTC (rev 5022)
@@ -146,7 +146,9 @@
 
 	if (reply == GTK_RESPONSE_OK)
 	{
-		if (getCurrentEncodeMode(dialog) == ADM_VIDENC_MODE_CQP)
+		encodeOptions->encodeMode = getCurrentEncodeMode(dialog);
+
+		if (encodeOptions->encodeMode == ADM_VIDENC_MODE_CQP)
 			encodeOptions->encodeModeParameter = (int)gtk_spin_button_get_value(GTK_SPIN_BUTTON(WID(spinbuttonQuantizer)));
 		else
 		{



From mean at mail.berlios.de  Thu Jul  9 07:29:28 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Thu, 9 Jul 2009 07:29:28 +0200
Subject: [Avidemux-svn-commit] r5023 - in
	branches/avidemux_2.6_branch_mean/avidemux_core:
	ADM_core/include ADM_coreVideoEncoder/include
	ADM_coreVideoEncoder/src
Message-ID: <200907090529.n695TSc3009811@sheep.berlios.de>

Author: mean
Date: 2009-07-09 07:29:27 +0200 (Thu, 09 Jul 2009)
New Revision: 5023

Modified:
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_core/include/ADM_cpuCap.h
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoEncoder/include/ADM_coreVideoEncoderFFmpeg.h
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoEncoder/src/ADM_coreVideoEncoderFFmpeg.cpp
Log:
[ffCoreVideoEncoder] Enable multithreaded encoder

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_core/include/ADM_cpuCap.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_core/include/ADM_cpuCap.h	2009-07-08 22:04:21 UTC (rev 5022)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_core/include/ADM_cpuCap.h	2009-07-09 05:29:27 UTC (rev 5023)
@@ -41,7 +41,10 @@
         
         ADM_CPUCAP_ALL=0xffffffff
 } ADM_CPUCAP;
-
+/**
+    \class CpuCaps
+    \brief Helper class to get CPU capabilities (MMX/SSE/...)
+*/
 class CpuCaps
 {
 public:
@@ -60,4 +63,5 @@
 
 
 };
+int ADM_cpu_num_processors(void); // Returns the # of cores/CPUs
 #endif

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoEncoder/include/ADM_coreVideoEncoderFFmpeg.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoEncoder/include/ADM_coreVideoEncoderFFmpeg.h	2009-07-08 22:04:21 UTC (rev 5022)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoEncoder/include/ADM_coreVideoEncoderFFmpeg.h	2009-07-09 05:29:27 UTC (rev 5023)
@@ -100,7 +100,8 @@
                bool             loadStatFile(const char *file);
                char             *statFileName;
                FILE             *statFile;
-               int              pass;
+               int              pass;   // Pass number = 1 or 2, valid only if we use 2 pass mode
+               bool             _isMT; // True if multithreaded
 protected:
     virtual               bool             prolog(void); 
     virtual               bool             preEncode(void); 
@@ -109,7 +110,8 @@
                           bool             presetContext(FFcodecSetting *set);
                           bool             postEncode(ADMBitstream *out, uint32_t size);
     virtual               bool             setPassAndLogFile(int pass,const char *name); // Call this before setup if needed !
-                          bool             setupPass(void);               
+                          bool             setupPass(void);  
+                          bool             encoderMT (void);
 public:
                             ADM_coreVideoEncoderFFmpeg(ADM_coreVideoFilter *src,FFcodecSetting *settings=NULL);
 virtual                     ~ADM_coreVideoEncoderFFmpeg();

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoEncoder/src/ADM_coreVideoEncoderFFmpeg.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoEncoder/src/ADM_coreVideoEncoderFFmpeg.cpp	2009-07-08 22:04:21 UTC (rev 5022)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoEncoder/src/ADM_coreVideoEncoderFFmpeg.cpp	2009-07-09 05:29:27 UTC (rev 5023)
@@ -18,6 +18,7 @@
 #define __STDC_CONSTANT_MACROS
 #include "ADM_default.h"
 #include "ADM_coreVideoEncoderFFmpeg.h"
+#include "prefs.h"
 #define ADM_NO_PTS 0xFFFFFFFFFFFFFFFFLL // FIXME
 
 #define aprintf(...) {}
@@ -49,6 +50,7 @@
     pass=0;
     statFileName=NULL;
     statFile=NULL;
+    _isMT=false;
 
 }
 /**
@@ -59,6 +61,12 @@
 {
     if (_context)
     {
+        if (_isMT )
+        {
+          printf ("[lavc] killing threads\n");
+          avcodec_thread_free (_context);
+          _isMT = false;
+        }
         avcodec_close (_context);
         ADM_dealloc (_context);
         _context = NULL;
@@ -199,6 +207,7 @@
         return false;
     }
    prolog();
+   encoderMT();
    res=avcodec_open(_context, codec); 
    if(res<0) 
     {   printf("[ff] Cannot open codec\n");
@@ -477,4 +486,33 @@
         }
         return true;
 }
+/**
+    \fn encoderMT
+    \brief handle multithreaded encoding
+*/  
+bool ADM_coreVideoEncoderFFmpeg::encoderMT (void)
+{
+  uint32_t threads = 0;
+
+  prefs->get(FEATURE_THREADING_LAVC, &threads);
+
+  if (threads == 0)
+	  threads = ADM_cpu_num_processors();
+
+  if (threads == 1)
+	  threads = 0;
+
+  if (threads)
+  {
+      printf ("[lavc] Enabling MT encoder with %u threads\n", threads);
+
+      if (avcodec_thread_init (_context, threads) == -1)
+	      printf ("[lavc] Failed!!\n");
+	  else
+          _isMT = 1;
+  }
+  return true;
+}
+
+
 // EOF



From gruntster at mail.berlios.de  Thu Jul  9 09:10:16 2009
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Thu, 9 Jul 2009 09:10:16 +0200
Subject: [Avidemux-svn-commit] r5024 -
	branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264
Message-ID: <200907090710.n697AGFj023102@sheep.berlios.de>

Author: gruntster
Date: 2009-07-09 09:10:09 +0200 (Thu, 09 Jul 2009)
New Revision: 5024

Modified:
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/x264Param.xsd
Log:
[x264] update idc levels in config schema

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/x264Param.xsd
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/x264Param.xsd	2009-07-09 05:29:27 UTC (rev 5023)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/x264Param.xsd	2009-07-09 07:10:09 UTC (rev 5024)
@@ -46,20 +46,20 @@
                 <xs:simpleType>
                   <xs:restriction base="xs:integer">
                     <xs:enumeration value="-1"/>
-                    <xs:enumeration value="1"/>
+                    <xs:enumeration value="10"/>
                     <xs:enumeration value="11"/>
                     <xs:enumeration value="12"/>
                     <xs:enumeration value="13"/>
-                    <xs:enumeration value="2"/>
+                    <xs:enumeration value="20"/>
                     <xs:enumeration value="21"/>
                     <xs:enumeration value="22"/>
-                    <xs:enumeration value="3"/>
+                    <xs:enumeration value="30"/>
                     <xs:enumeration value="31"/>
                     <xs:enumeration value="32"/>
-                    <xs:enumeration value="4"/>
+                    <xs:enumeration value="40"/>
                     <xs:enumeration value="41"/>
                     <xs:enumeration value="42"/>
-                    <xs:enumeration value="5"/>
+                    <xs:enumeration value="50"/>
                     <xs:enumeration value="51"/>
                   </xs:restriction>
                 </xs:simpleType>



From gruntster at mail.berlios.de  Thu Jul  9 12:42:07 2009
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Thu, 9 Jul 2009 12:42:07 +0200
Subject: [Avidemux-svn-commit] r5025 -
	branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264
Message-ID: <200907091042.n69Ag7WA028125@sheep.berlios.de>

Author: gruntster
Date: 2009-07-09 12:41:55 +0200 (Thu, 09 Jul 2009)
New Revision: 5025

Modified:
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/x264Options.cpp
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/x264Options.h
Log:
[x264] tidy up

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/x264Options.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/x264Options.cpp	2009-07-09 07:10:09 UTC (rev 5024)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/x264Options.cpp	2009-07-09 10:41:55 UTC (rev 5025)
@@ -34,17 +34,9 @@
 
 x264Options::x264Options(void) : PluginOptions("x264", "x264Param.xsd", DEFAULT_ENCODE_MODE, DEFAULT_ENCODE_MODE_PARAMETER)
 {
-	_configurationName = NULL;
 	memset(&_param, 0, sizeof(x264_param_t));
-
-	reset();
 }
 
-x264Options::~x264Options(void)
-{
-	cleanUp();
-}
-
 void x264Options::cleanUp(void)
 {
 	PluginOptions::cleanUp();

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/x264Options.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/x264Options.h	2009-07-09 07:10:09 UTC (rev 5024)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/x264Options.h	2009-07-09 10:41:55 UTC (rev 5025)
@@ -54,7 +54,6 @@
 
 public:
 	x264Options(void);
-	~x264Options(void);
 
 	void reset(void);
 	x264_param_t* getParameters(void);



From gruntster at mail.berlios.de  Thu Jul  9 13:05:24 2009
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Thu, 9 Jul 2009 13:05:24 +0200
Subject: [Avidemux-svn-commit] r5026 - in
	branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_xvid:
	. gtk qt4
Message-ID: <200907091105.n69B5Osl020869@sheep.berlios.de>

Author: gruntster
Date: 2009-07-09 12:48:18 +0200 (Thu, 09 Jul 2009)
New Revision: 5026

Added:
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_xvid/xvidOptions.cpp
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_xvid/xvidOptions.h
Removed:
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_xvid/options.cpp
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_xvid/options.h
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_xvid/presetOptions.cpp
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_xvid/presetOptions.h
Modified:
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_xvid/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_xvid/configGuiLoader.h
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_xvid/encoder.cpp
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_xvid/gtk/xvidConfigDialog.cpp
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_xvid/interface.c
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidConfigDialog.cpp
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidConfigDialog.h
Log:
[xvid] use generic options class

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_xvid/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_xvid/CMakeLists.txt	2009-07-09 10:41:55 UTC (rev 5025)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_xvid/CMakeLists.txt	2009-07-09 10:48:18 UTC (rev 5026)
@@ -7,14 +7,17 @@
 	checkLibxml2()
 
 	IF (LIBXML2_FOUND)
-		INCLUDE_DIRECTORIES(${CMAKE_CURRENT_BINARY_DIR} ${XVID_INCLUDE_DIR} ${LIBXML2_INCLUDE_DIR})
-		ADD_DEFINITIONS(${LIBXML2_DEFINITIONS})
-
 		SET(QT_PLUGIN_NAME "ADM_vidEnc_Xvid_Qt")
 		SET(GTK_PLUGIN_NAME "ADM_vidEnc_Xvid_Gtk")
 		SET(PLUGIN_SUBDIR "xvid")
-		SET(ADM_vidEnc_xvid_SRCS interface.c  encoder.cpp  options.cpp  configGuiLoader.cpp  presetOptions.cpp)
 
+		INCLUDE_DIRECTORIES(${CMAKE_CURRENT_BINARY_DIR} ${XVID_INCLUDE_DIR} ${LIBXML2_INCLUDE_DIR} ../common)
+		ADD_DEFINITIONS(${LIBXML2_DEFINITIONS})
+		ADD_DEFINITIONS(-DPLUGIN_SUBDIR="${PLUGIN_SUBDIR}")
+
+		SET(ADM_vidEnc_xvid_SRCS interface.c  encoder.cpp  xvidOptions.cpp  configGuiLoader.cpp
+								 ../common/PluginOptions.cpp)
+
 		CONFIGURE_FILE("${CMAKE_CURRENT_SOURCE_DIR}/config.h.cmake" "${CMAKE_CURRENT_BINARY_DIR}/config.h")
 
 		ADD_SUBDIRECTORY(gtk)

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_xvid/configGuiLoader.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_xvid/configGuiLoader.h	2009-07-09 10:41:55 UTC (rev 5025)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_xvid/configGuiLoader.h	2009-07-09 10:48:18 UTC (rev 5026)
@@ -2,7 +2,7 @@
 #define configGuiLoader_h
 
 #include "ADM_dynamicLoading.h"
-#include "options.h"
+#include "xvidOptions.h"
 
 extern "C"
 {

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_xvid/encoder.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_xvid/encoder.cpp	2009-07-09 10:41:55 UTC (rev 5025)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_xvid/encoder.cpp	2009-07-09 10:48:18 UTC (rev 5026)
@@ -20,7 +20,7 @@
 #include "ADM_inttype.h"
 #include "ADM_files.h"
 #include "encoder.h"
-#include "options.h"
+#include "xvidOptions.h"
 
 int avidemuxHook(void *handle, int opt, void *param1, void *param2);
 static XvidEncoder encoder;
@@ -161,7 +161,7 @@
 
 int XvidEncoder::getOptions(vidEncOptions *encodeOptions, char *pluginOptions, int bufferSize)
 {
-	char* xml = _options.toXml();
+	char* xml = _options.toXml(PLUGIN_XML_INTERNAL);
 	int xmlLength = strlen(xml);
 
 	if (bufferSize >= xmlLength)
@@ -185,8 +185,12 @@
 	bool success = true;
 
 	if (pluginOptions)
-		success = _options.fromXml(pluginOptions);
+	{
+		success = _options.fromXml(pluginOptions, PLUGIN_XML_INTERNAL);
 
+		_options.loadPresetConfiguration();
+	}
+
 	if (encodeOptions && success)
 	{
 		memcpy(&_encodeOptions, encodeOptions, sizeof(vidEncOptions));

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_xvid/gtk/xvidConfigDialog.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_xvid/gtk/xvidConfigDialog.cpp	2009-07-09 10:41:55 UTC (rev 5025)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_xvid/gtk/xvidConfigDialog.cpp	2009-07-09 10:48:18 UTC (rev 5026)
@@ -30,7 +30,7 @@
 #include "DIA_fileSel.h"
 #include "DIA_coreToolkit.h"
 
-#include "../presetOptions.h"
+#include "../xvidOptions.h"
 #include "xvidConfigDialog.h"
 
 #define WID(x) lookup_widget(dialog, #x)

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_xvid/interface.c
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_xvid/interface.c	2009-07-09 10:41:55 UTC (rev 5025)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_xvid/interface.c	2009-07-09 10:48:18 UTC (rev 5026)
@@ -66,7 +66,7 @@
 {
 	*major = 1;
 	*minor = 0;
-	*patch = 0;
+	*patch = 1;
 }
 
 const char* vidEncGetEncoderGuid(int encoderId)

Deleted: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_xvid/options.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_xvid/options.cpp	2009-07-09 10:41:55 UTC (rev 5025)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_xvid/options.cpp	2009-07-09 10:48:18 UTC (rev 5026)
@@ -1,1367 +0,0 @@
- /***************************************************************************
-                               XvidOptions.cpp
-
-	These settings are intended for scripting and can contain a Preset 
-	Configuration block.  If this block exists then "internal" settings are
-	ignored and an external configuration file should be read instead, 
-	e.g. PlayStation Portable profile.  However, if the external file is 
-	missing, internal settings have to be used and will reflect a snapshot
-	of the external configuration file at the time the script was generated.
-
-    begin                : Fri Jun 13 2008
-    copyright            : (C) 2008 by gruntster
- ***************************************************************************/
-
-/***************************************************************************
- *                                                                         *
- *   This program is free software; you can redistribute it and/or modify  *
- *   it under the terms of the GNU General Public License as published by  *
- *   the Free Software Foundation; either version 2 of the License, or     *
- *   (at your option) any later version.                                   *
- *                                                                         *
- ***************************************************************************/
-
-#include <libxml/parser.h>
-#include <libxml/xmlschemas.h>
-#include <sstream>
-#include <string>
-
-#include "config.h"
-#include "ADM_inttype.h"
-#include "ADM_files.h"
-#include "options.h"
-
-XvidOptions::XvidOptions(void)
-{
-	_configurationName = NULL;
-
-	reset();
-}
-
-XvidOptions::~XvidOptions(void)
-{
-	cleanUp();
-}
-
-void XvidOptions::cleanUp(void)
-{
-	if (_configurationName)
-	{
-		free(_configurationName);
-		_configurationName = NULL;
-	}
-}
-
-void XvidOptions::reset(void)
-{
-	cleanUp();
-
-	memset(&xvid_enc_create, 0, sizeof(xvid_enc_create_t));
-	memset(&xvid_enc_frame, 0, sizeof(xvid_enc_frame_t));
-	memset(&xvid_plugin_single, 0, sizeof(xvid_plugin_single_t));
-	memset(&xvid_plugin_2pass2, 0, sizeof(xvid_plugin_2pass2_t));
-	memset(&_intraMatrix, 8, sizeof(unsigned char) * 64);
-	memset(&_interMatrix, 1, sizeof(unsigned char) * 64);
-
-	xvid_enc_create.version = XVID_VERSION;
-	xvid_enc_frame.version = XVID_VERSION;
-	xvid_plugin_single.version = XVID_VERSION;
-	xvid_plugin_2pass2.version = XVID_VERSION;
-
-	xvid_enc_frame.vop_flags = XVID_VOP_HALFPEL | XVID_VOP_HQACPRED;
-
-	setPar(1, 1);
-	setParAsInput(false);
-	setCqmPreset(CQM_H263);
-	setMotionEstimation(ME_LOW);
-	setRateDistortion(RD_DCT_ME);
-	setMinQuantiser(2, 2, 2);
-	setMaxQuantiser(31, 31, 31);
-	setBframeQuantiserRatio(150);
-	setBframeQuantiserOffset(100);
-	setOverflowControlStrength(5);
-	setMaxOverflowImprovement(5);
-	setMaxOverflowDegradation(5);
-
-	setPresetConfiguration("<default>", CONFIG_DEFAULT);
-}
-
-void XvidOptions::getParameters(xvid_enc_create_t **xvid_enc_create, xvid_enc_frame_t **xvid_enc_frame,
-	xvid_plugin_single_t **xvid_plugin_single, xvid_plugin_2pass2_t **xvid_plugin_2pass2)
-{
-	*xvid_enc_create = new xvid_enc_create_t;
-	*xvid_enc_frame = new xvid_enc_frame_t;
-	*xvid_plugin_single = new xvid_plugin_single_t;
-	*xvid_plugin_2pass2 = new xvid_plugin_2pass2_t;
-
-	memcpy(*xvid_enc_create, &this->xvid_enc_create, sizeof(xvid_enc_create_t));
-	memcpy(*xvid_enc_frame, &this->xvid_enc_frame, sizeof(xvid_enc_frame_t));
-	memcpy(*xvid_plugin_single, &this->xvid_plugin_single, sizeof(xvid_plugin_single_t));
-	memcpy(*xvid_plugin_2pass2, &this->xvid_plugin_2pass2, sizeof(xvid_plugin_2pass2_t));
-
-	if (getCqmPreset() == CQM_CUSTOM)
-	{
-		(*xvid_enc_frame)->quant_intra_matrix = new unsigned char[64];
-		(*xvid_enc_frame)->quant_inter_matrix = new unsigned char[64];
-
-		getIntraMatrix((*xvid_enc_frame)->quant_intra_matrix);
-		getInterMatrix((*xvid_enc_frame)->quant_inter_matrix);
-	}
-}
-
-void XvidOptions::getPresetConfiguration(char** configurationName, ConfigType *configurationType)
-{
-	if (_configurationName)
-		*configurationName = strdup(_configurationName);
-	else
-		*configurationName = NULL;
-
-	*configurationType = _configurationType;
-}
-
-void XvidOptions::setPresetConfiguration(const char* configurationName, ConfigType configurationType)
-{
-	clearPresetConfiguration();
-
-	_configurationName = strdup(configurationName);
-	_configurationType = configurationType;
-}
-
-void XvidOptions::clearPresetConfiguration(void)
-{
-	if (_configurationName)
-		free(_configurationName);
-
-	_configurationName = strdup("<custom>");
-	_configurationType = CONFIG_CUSTOM;
-}
-
-unsigned int XvidOptions::getThreads(void)
-{
-	return xvid_enc_create.num_threads;
-}
-
-void XvidOptions::setThreads(unsigned int threads)
-{
-	xvid_enc_create.num_threads = threads;
-}
-
-bool XvidOptions::getParAsInput(void)
-{
-	return _parAsInput;
-}
-
-void XvidOptions::setParAsInput(bool parAsInput)
-{
-	_parAsInput = parAsInput;
-}
-
-void XvidOptions::getPar(unsigned int *width, unsigned int *height)
-{
-	*width = xvid_enc_frame.par_width;
-	*height = xvid_enc_frame.par_height;
-}
-
-void XvidOptions::setPar(unsigned int width, unsigned int height)
-{
-	if (width > 0)
-		xvid_enc_frame.par_width = width;
-
-	if (height > 0)
-		xvid_enc_frame.par_height = height;
-
-	if (xvid_enc_frame.par_width == xvid_enc_frame.par_height)
-		xvid_enc_frame.par = XVID_PAR_11_VGA;
-	else
-		xvid_enc_frame.par = XVID_PAR_EXT;
-}
-
-MotionEstimationMode XvidOptions::getMotionEstimation(void)
-{
-	MotionEstimationMode motionEstimation = ME_NONE;
-
-	if ((xvid_enc_frame.motion & ME_HIGH) == ME_HIGH)
-		motionEstimation = ME_HIGH;
-	else if ((xvid_enc_frame.motion & ME_MEDIUM) == ME_MEDIUM)
-		motionEstimation = ME_MEDIUM;
-	else if ((xvid_enc_frame.motion & ME_LOW) == ME_LOW)
-		motionEstimation = ME_LOW;
-
-	return motionEstimation;
-}
-
-void XvidOptions::setMotionEstimation(MotionEstimationMode motionEstimation)
-{
-	if (motionEstimation == ME_NONE || motionEstimation == ME_LOW || motionEstimation == ME_MEDIUM || motionEstimation == ME_HIGH)
-	{
-		xvid_enc_frame.motion &= ~ME_NONE;
-		xvid_enc_frame.motion &= ~ME_LOW;
-		xvid_enc_frame.motion &= ~ME_MEDIUM;
-		xvid_enc_frame.motion &= ~ME_HIGH;
-		xvid_enc_frame.motion |= motionEstimation;
-
-		if (motionEstimation == ME_NONE)
-			xvid_enc_frame.type = XVID_TYPE_IVOP;
-		else
-			xvid_enc_frame.type = XVID_TYPE_AUTO;
-	}
-}
-
-RateDistortionMode XvidOptions::getRateDistortion(void)
-{
-	RateDistortionMode rateDistortion = RD_NONE;
-
-	if ((xvid_enc_frame.motion & RD_SQUARE) == RD_SQUARE)
-		rateDistortion = RD_SQUARE;
-	else if ((xvid_enc_frame.motion & RD_HPEL_QPEL_8) == RD_HPEL_QPEL_8)
-		rateDistortion = RD_HPEL_QPEL_8;
-	else if ((xvid_enc_frame.motion & RD_HPEL_QPEL_16) == RD_HPEL_QPEL_16)
-		rateDistortion = RD_HPEL_QPEL_16;
-	else if ((xvid_enc_frame.vop_flags & XVID_VOP_MODEDECISION_RD) == XVID_VOP_MODEDECISION_RD)
-		rateDistortion = RD_DCT_ME;
-
-	return rateDistortion;
-}
-
-void XvidOptions::setRateDistortion(RateDistortionMode rateDistortion)
-{
-	if (rateDistortion == RD_NONE || rateDistortion == RD_DCT_ME || rateDistortion == RD_HPEL_QPEL_16 || 
-		rateDistortion == RD_HPEL_QPEL_8 || rateDistortion == RD_SQUARE)
-	{
-		xvid_enc_frame.motion &= ~RD_HPEL_QPEL_16;
-		xvid_enc_frame.motion &= ~RD_HPEL_QPEL_8;
-		xvid_enc_frame.motion &= ~RD_SQUARE;
-
-		if (rateDistortion == RD_NONE)
-			xvid_enc_frame.vop_flags &= ~XVID_VOP_MODEDECISION_RD;
-		else
-		{
-			if (rateDistortion != RD_DCT_ME)
-				xvid_enc_frame.motion |= rateDistortion;
-
-			xvid_enc_frame.vop_flags |= XVID_VOP_MODEDECISION_RD;
-		}
-	}
-}
-
-bool XvidOptions::getBframeRdo(void)
-{
-	return xvid_enc_frame.vop_flags & XVID_VOP_RD_BVOP;
-}
-
-void XvidOptions::setBframeRdo(bool bFrameRdo)
-{
-	if (bFrameRdo)
-		xvid_enc_frame.vop_flags |= XVID_VOP_RD_BVOP;
-	else
-		xvid_enc_frame.vop_flags &= ~XVID_VOP_RD_BVOP;
-}
-
-bool XvidOptions::getChromaMotionEstimation(void)
-{
-	return xvid_enc_frame.motion & CHROMA_ME;
-}
-
-void XvidOptions::setChromaMotionEstimation(bool chromaMotionEstimation)
-{
-	if (chromaMotionEstimation)
-		xvid_enc_frame.motion |= CHROMA_ME;
-	else
-		xvid_enc_frame.motion &= ~CHROMA_ME;
-}
-
-bool XvidOptions::getQpel(void)
-{
-	return xvid_enc_frame.vol_flags & XVID_VOL_QUARTERPEL;
-}
-
-void XvidOptions::setQpel(bool qpel)
-{
-	if (qpel)
-	{
-		xvid_enc_frame.vol_flags |= XVID_VOL_QUARTERPEL;
-		xvid_enc_frame.motion |= XVID_ME_QUARTERPELREFINE16;
-
-		if (getInterMotionVector())
-			xvid_enc_frame.motion |= XVID_ME_QUARTERPELREFINE8;
-	}
-	else
-	{
-		xvid_enc_frame.vol_flags &= ~XVID_VOL_QUARTERPEL;
-		xvid_enc_frame.motion &= ~XVID_ME_QUARTERPELREFINE16;
-		xvid_enc_frame.motion &= ~XVID_ME_QUARTERPELREFINE8;
-	}
-}
-
-bool XvidOptions::getGmc(void)
-{
-	return xvid_enc_frame.vol_flags & XVID_VOL_GMC;
-}
-
-void XvidOptions::setGmc(bool gmc)
-{
-	if (gmc)
-	{
-		xvid_enc_frame.vol_flags |= XVID_VOL_GMC;
-		xvid_enc_frame.motion |= XVID_ME_GME_REFINE;
-	}
-	else
-	{
-		xvid_enc_frame.vol_flags &= ~XVID_VOL_GMC;
-		xvid_enc_frame.motion &= ~XVID_ME_GME_REFINE;
-	}
-}
-
-bool XvidOptions::getTurboMode(void)
-{
-	return xvid_enc_frame.motion & TURBO_MODE;
-}
-
-void XvidOptions::setTurboMode(bool turboMode)
-{
-	if (turboMode)
-		xvid_enc_frame.motion |= TURBO_MODE;
-	else
-		xvid_enc_frame.motion &= ~TURBO_MODE;
-}
-
-bool XvidOptions::getChromaOptimisation(void)
-{
-	return xvid_enc_frame.vop_flags & XVID_VOP_CHROMAOPT;
-}
-
-void XvidOptions::setChromaOptimisation(bool chromaOptimisation)
-{
-	if (chromaOptimisation)
-		xvid_enc_frame.vop_flags |= XVID_VOP_CHROMAOPT;
-	else
-		xvid_enc_frame.vop_flags &= ~XVID_VOP_CHROMAOPT;
-}
-
-bool XvidOptions::getInterMotionVector(void)
-{
-	return xvid_enc_frame.vop_flags & XVID_VOP_INTER4V;
-}
-
-void XvidOptions::setInterMotionVector(bool interMotionVector)
-{
-	if (interMotionVector)
-	{
-		xvid_enc_frame.vop_flags |= XVID_VOP_INTER4V;
-
-		if (getQpel())
-			setQpel(true);
-	}
-	else
-		xvid_enc_frame.vop_flags &= ~XVID_VOP_INTER4V;
-}
-
-bool XvidOptions::getCartoon(void)
-{
-	return xvid_enc_frame.vop_flags & XVID_VOP_CARTOON;
-}
-
-void XvidOptions::setCartoon(bool cartoon)
-{
-	if (cartoon)
-		xvid_enc_frame.vop_flags |= XVID_VOP_CARTOON;
-	else
-		xvid_enc_frame.vop_flags &= ~XVID_VOP_CARTOON;
-}
-
-bool XvidOptions::getGreyscale(void)
-{
-	return xvid_enc_frame.vop_flags & XVID_VOP_GREYSCALE;
-}
-
-void XvidOptions::setGreyscale(bool greyscale)
-{
-	if (greyscale)
-		xvid_enc_frame.vop_flags |= XVID_VOP_GREYSCALE;
-	else
-		xvid_enc_frame.vop_flags &= ~XVID_VOP_GREYSCALE;
-}
-
-InterlacedMode XvidOptions::getInterlaced(void)
-{
-	InterlacedMode interlaced = INTERLACED_NONE;
-
-	if (xvid_enc_frame.vop_flags & XVID_VOP_TOPFIELDFIRST)
-		interlaced = INTERLACED_TFF;
-	else if (xvid_enc_frame.vol_flags & XVID_VOL_INTERLACING)
-		interlaced = INTERLACED_BFF;
-
-	return interlaced;
-}
-
-void XvidOptions::setInterlaced(InterlacedMode interlaced)
-{
-	if (interlaced == INTERLACED_NONE)
-	{
-		xvid_enc_frame.vol_flags &= ~XVID_VOL_INTERLACING;
-		xvid_enc_frame.vop_flags &= ~XVID_VOP_TOPFIELDFIRST;
-	}
-	else if (interlaced == INTERLACED_BFF || interlaced == INTERLACED_TFF)
-	{
-		xvid_enc_frame.vol_flags |= XVID_VOL_INTERLACING;
-
-		if (interlaced == INTERLACED_TFF)
-			xvid_enc_frame.vop_flags |= XVID_VOP_TOPFIELDFIRST;
-		else
-			xvid_enc_frame.vop_flags &= ~XVID_VOP_TOPFIELDFIRST;
-	}
-}
-
-unsigned int XvidOptions::getFrameDropRatio(void)
-{
-	return xvid_enc_create.frame_drop_ratio;
-}
-
-void XvidOptions::setFrameDropRatio(unsigned int frameDropRatio)
-{
-	if (frameDropRatio <= 100)
-		xvid_enc_create.frame_drop_ratio = frameDropRatio;
-}
-
-unsigned int XvidOptions::getMaxKeyInterval(void)
-{
-	return xvid_enc_create.max_key_interval;
-}
-
-void XvidOptions::setMaxKeyInterval(unsigned int maxKeyInterval)
-{
-	xvid_enc_create.max_key_interval = maxKeyInterval;
-}
-
-unsigned int XvidOptions::getMaxBframes(void)
-{
-	return xvid_enc_create.max_bframes;
-}
-
-void XvidOptions::setMaxBframes(unsigned int maxBframes)
-{
-	if (maxBframes <= 20)
-		xvid_enc_create.max_bframes = maxBframes;
-}
-
-int XvidOptions::getBframeSensitivity(void)
-{
-	return xvid_enc_frame.bframe_threshold;
-}
-
-void XvidOptions::setBframeSensitivity(int bFrameSensitivity)
-{
-	if (bFrameSensitivity >= -255 && bFrameSensitivity <= 255)
-		xvid_enc_frame.bframe_threshold = bFrameSensitivity;
-}
-
-bool XvidOptions::getClosedGop(void)
-{
-	return xvid_enc_create.global & XVID_GLOBAL_CLOSED_GOP;
-}
-
-void XvidOptions::setClosedGop(bool closedGop)
-{
-	if (closedGop)
-		xvid_enc_create.global |= XVID_GLOBAL_CLOSED_GOP;
-	else
-		xvid_enc_create.global &= ~XVID_GLOBAL_CLOSED_GOP;
-}
-
-bool XvidOptions::getPacked(void)
-{
-	return xvid_enc_create.global & XVID_GLOBAL_PACKED;
-}
-
-void XvidOptions::setPacked(bool packed)
-{
-	if (packed)
-		xvid_enc_create.global |= XVID_GLOBAL_PACKED;
-	else
-		xvid_enc_create.global &= ~XVID_GLOBAL_PACKED;
-}
-
-void XvidOptions::getMinQuantiser(unsigned int *i, unsigned int *p, unsigned int *b)
-{
-	*i = xvid_enc_create.min_quant[0];
-	*p = xvid_enc_create.min_quant[1];
-	*b = xvid_enc_create.min_quant[2];
-}
-
-void XvidOptions::setMinQuantiser(unsigned int i, unsigned int p, unsigned int b)
-{
-	if (i > 0 && i <= 31)
-		xvid_enc_create.min_quant[0] = i;
-
-	if (p > 0 && p <= 31)
-		xvid_enc_create.min_quant[1] = p;
-
-	if (b > 0 && b <= 31)
-		xvid_enc_create.min_quant[2] = b;
-}
-
-void XvidOptions::getMaxQuantiser(unsigned int *i, unsigned int *p, unsigned int *b)
-{
-	*i = xvid_enc_create.max_quant[0];
-	*p = xvid_enc_create.max_quant[1];
-	*b = xvid_enc_create.max_quant[2];
-}
-
-void XvidOptions::setMaxQuantiser(unsigned int i, unsigned int p, unsigned int b)
-{
-	if (i > 0 && i <= 31)
-		xvid_enc_create.max_quant[0] = i;
-
-	if (p > 0 && p <= 31)
-		xvid_enc_create.max_quant[1] = p;
-
-	if (b > 0 && b <= 31)
-		xvid_enc_create.max_quant[2] = b;
-}
-
-unsigned int XvidOptions::getBframeQuantiserRatio(void)
-{
-	return xvid_enc_create.bquant_ratio;
-}
-
-void XvidOptions::setBframeQuantiserRatio(unsigned int ratio)
-{
-	if (ratio <= 200)
-		xvid_enc_create.bquant_ratio = ratio;
-}
-
-unsigned int XvidOptions::getBframeQuantiserOffset(void)
-{
-	return xvid_enc_create.bquant_offset;
-}
-
-void XvidOptions::setBframeQuantiserOffset(unsigned int offset)
-{
-	if (offset <= 200)
-		xvid_enc_create.bquant_offset = offset;
-}
-
-CqmPresetMode XvidOptions::getCqmPreset(void)
-{
-	return _cqmPreset;
-}
-
-void XvidOptions::setCqmPreset(CqmPresetMode cqmPreset)
-{
-	if (cqmPreset == CQM_H263 || cqmPreset == CQM_MPEG || cqmPreset == CQM_CUSTOM)
-	{
-		_cqmPreset = cqmPreset;
-
-		switch (cqmPreset)
-		{
-			case CQM_MPEG:
-			case CQM_CUSTOM:
-				xvid_enc_frame.vol_flags |= XVID_VOL_MPEGQUANT;
-				break;
-			default:
-				xvid_enc_frame.vol_flags &= ~XVID_VOL_MPEGQUANT;
-		}
-	}
-}
-
-void XvidOptions::getIntraMatrix(unsigned char intra[64])
-{
-	memcpy(intra, _intraMatrix, 64 * sizeof(unsigned char));
-}
-
-void XvidOptions::setIntraMatrix(unsigned char intra[64])
-{
-	memcpy(_intraMatrix, intra, 64 * sizeof(unsigned char));
-}
-
-void XvidOptions::getInterMatrix(unsigned char inter[64])
-{
-	memcpy(inter, _interMatrix, 64 * sizeof(unsigned char));
-}
-
-void XvidOptions::setInterMatrix(unsigned char inter[64])
-{
-	memcpy(_interMatrix, inter, 64 * sizeof(unsigned char));
-}
-
-bool XvidOptions::getTrellis(void)
-{
-	return xvid_enc_frame.vop_flags & XVID_VOP_TRELLISQUANT;
-}
-
-void XvidOptions::setTrellis(bool trellis)
-{
-	if (trellis)
-		xvid_enc_frame.vop_flags |= XVID_VOP_TRELLISQUANT;
-	else
-		xvid_enc_frame.vop_flags &= ~XVID_VOP_TRELLISQUANT;
-}
-
-unsigned int XvidOptions::getReactionDelayFactor(void)
-{
-	return xvid_plugin_single.reaction_delay_factor;
-}
-
-void XvidOptions::setReactionDelayFactor(unsigned int delayFactor)
-{
-	if (delayFactor <= 100)
-		xvid_plugin_single.reaction_delay_factor = delayFactor;
-}
-
-unsigned int XvidOptions::getAveragingQuantiserPeriod(void)
-{
-	return xvid_plugin_single.averaging_period;
-}
-
-void XvidOptions::setAveragingQuantiserPeriod(unsigned int averagingPeriod)
-{
-	xvid_plugin_single.averaging_period = averagingPeriod;
-}
-
-unsigned int XvidOptions::getSmoother(void)
-{
-	return xvid_plugin_single.buffer;
-}
-
-void XvidOptions::setSmoother(unsigned int smoother)
-{
-	xvid_plugin_single.buffer = smoother;
-}
-
-unsigned int XvidOptions::getKeyFrameBoost(void)
-{
-	return xvid_plugin_2pass2.keyframe_boost;
-}
-
-void XvidOptions::setKeyFrameBoost(unsigned int keyFrameBoost)
-{
-	if (keyFrameBoost <= 100)
-		xvid_plugin_2pass2.keyframe_boost = keyFrameBoost;
-}
-
-unsigned int XvidOptions::getMaxKeyFrameReduceBitrate(void)
-{
-	return xvid_plugin_2pass2.kfreduction;
-}
-
-void XvidOptions::setMaxKeyFrameReduceBitrate(unsigned int bitrateReduction)
-{
-	if (bitrateReduction <= 100)
-		xvid_plugin_2pass2.kfreduction = bitrateReduction;
-}
-
-unsigned int XvidOptions::getKeyFrameBitrateThreshold(void)
-{
-	return xvid_plugin_2pass2.kfthreshold;
-}
-
-void XvidOptions::setKeyFrameBitrateThreshold(unsigned int bitrateThreshold)
-{
-	xvid_plugin_2pass2.kfthreshold = bitrateThreshold;
-}
-
-unsigned int XvidOptions::getOverflowControlStrength(void)
-{
-	return xvid_plugin_2pass2.overflow_control_strength;
-}
-
-void XvidOptions::setOverflowControlStrength(unsigned int overflowControlStrength)
-{
-	if (overflowControlStrength <= 100)
-		xvid_plugin_2pass2.overflow_control_strength = overflowControlStrength;
-}
-
-unsigned int XvidOptions::getMaxOverflowImprovement(void)
-{
-	return xvid_plugin_2pass2.max_overflow_improvement;
-}
-
-void XvidOptions::setMaxOverflowImprovement(unsigned int overflowImprovement)
-{
-	if (overflowImprovement <= 100)
-		xvid_plugin_2pass2.max_overflow_improvement = overflowImprovement;
-}
-
-unsigned int XvidOptions::getMaxOverflowDegradation(void)
-{
-	return xvid_plugin_2pass2.max_overflow_degradation;
-}
-
-void XvidOptions::setMaxOverflowDegradation(unsigned int overflowDegradation)
-{
-	if (overflowDegradation <= 100)
-		xvid_plugin_2pass2.max_overflow_degradation = overflowDegradation;
-}
-
-unsigned int XvidOptions::getAboveAverageCurveCompression(void)
-{
-	return xvid_plugin_2pass2.curve_compression_high;
-}
-
-void XvidOptions::setAboveAverageCurveCompression(unsigned int curveCompression)
-{
-	if (curveCompression <= 100)
-		xvid_plugin_2pass2.curve_compression_high = curveCompression;
-}
-
-unsigned int XvidOptions::getBelowAverageCurveCompression(void)
-{
-	return xvid_plugin_2pass2.curve_compression_low;
-}
-
-void XvidOptions::setBelowAverageCurveCompression(unsigned int curveCompression)
-{
-	if (curveCompression <= 100)
-		xvid_plugin_2pass2.curve_compression_low = curveCompression;
-}
-
-unsigned int XvidOptions::getVbvBufferSize(void)
-{
-	return xvid_plugin_2pass2.vbv_size;
-}
-
-void XvidOptions::setVbvBufferSize(unsigned int bufferSize)
-{
-	if (bufferSize <= 6291456)
-	{
-		xvid_plugin_2pass2.vbv_size = bufferSize;
-		xvid_plugin_2pass2.vbv_initial = (bufferSize * 3) >> 2;
-	}
-}
-
-unsigned int XvidOptions::getMaxVbvBitrate(void)
-{
-	return xvid_plugin_2pass2.vbv_maxrate;
-}
-
-void XvidOptions::setMaxVbvBitrate(unsigned int bitrate)
-{
-	if (bitrate <= 9708400)
-		xvid_plugin_2pass2.vbv_maxrate = bitrate;
-}
-
-unsigned int XvidOptions::getVbvPeakBitrate(void)
-{
-	return xvid_plugin_2pass2.vbv_peakrate;
-}
-
-void XvidOptions::setVbvPeakBitrate(unsigned int peakBitrate)
-{
-	if (peakBitrate <= 16000000)
-		xvid_plugin_2pass2.vbv_peakrate = peakBitrate;
-}
-
-char* XvidOptions::toXml(void)
-{
-	xmlDocPtr xmlDoc = xmlNewDoc((const xmlChar*)"1.0");
-	xmlNodePtr xmlNodeRoot, xmlNodeChild;
-	const int bufferSize = 100;
-	xmlChar xmlBuffer[bufferSize + 1];
-	char *xml = NULL;
-
-	while (true)
-	{
-		if (!xmlDoc)
-			break;
-
-		if (!(xmlNodeRoot = xmlNewDocNode(xmlDoc, NULL, (xmlChar*)"XvidConfig", NULL)))
-			break;
-
-		xmlDocSetRootElement(xmlDoc, xmlNodeRoot);
-
-		if (_configurationType != CONFIG_CUSTOM)
-		{
-			xmlNodeChild = xmlNewChild(xmlNodeRoot, NULL, (xmlChar*)"presetConfiguration", NULL);
-
-			xmlNewChild(xmlNodeChild, NULL, (xmlChar*)"name", (xmlChar*)_configurationName);
-
-			if (_configurationType == CONFIG_USER)
-				strcpy((char*)xmlBuffer, "user");
-			else if (_configurationType == CONFIG_SYSTEM)
-				strcpy((char*)xmlBuffer, "system");
-			else
-				strcpy((char*)xmlBuffer, "default");
-
-			xmlNewChild(xmlNodeChild, NULL, (xmlChar*)"type", xmlBuffer);
-		}
-
-		addXvidOptionsToXml(xmlNodeRoot);
-		xml = dumpXmlDocToMemory(xmlDoc);
-		xmlFreeDoc(xmlDoc);
-
-		break;
-	}
-
-	return xml;
-}
-
-char* XvidOptions::dumpXmlDocToMemory(xmlDocPtr xmlDoc)
-{
-	xmlChar *tempBuffer;
-	int tempBufferSize;
-	char *xml = NULL;
-
-	xmlDocDumpMemory(xmlDoc, &tempBuffer, &tempBufferSize);
-
-	// remove carriage returns (even though libxml was instructed not to format the XML)
-	xmlChar* bufferChar = tempBuffer;
-	int bufferCharIndex = 0;
-
-	while (*bufferChar != '\0')
-	{
-		if (*bufferChar == '\n')
-		{
-			memmove(bufferChar, bufferChar + 1, tempBufferSize - bufferCharIndex);
-			tempBufferSize--;
-		}
-		else if (*bufferChar == '\"')
-			*bufferChar = '\'';
-
-		bufferChar++;
-		bufferCharIndex++;
-	}
-
-	xml = new char[tempBufferSize + 1];
-	memcpy(xml, tempBuffer, tempBufferSize);
-	xml[tempBufferSize] = 0;
-
-	return xml;
-}
-
-void XvidOptions::addXvidOptionsToXml(xmlNodePtr xmlNodeRoot)
-{
-	const int bufferSize = 100;
-	xmlChar xmlBuffer[bufferSize + 1];
-	xmlNodePtr xmlNodeChild, xmlNodeChild2;
-
-	xmlNodeRoot = xmlNewChild(xmlNodeRoot, NULL, (xmlChar*)"XvidOptions", NULL);
-	xmlNewChild(xmlNodeRoot, NULL, (xmlChar*)"threads", number2String(xmlBuffer, bufferSize, getThreads()));
-
-	xmlNodeChild = xmlNewChild(xmlNodeRoot, NULL, (xmlChar*)"vui", NULL);
-	xmlNewChild(xmlNodeChild, NULL, (xmlChar*)"sarAsInput", boolean2String(xmlBuffer, bufferSize, getParAsInput()));
-
-	unsigned int width, height;
-
-	getPar(&width, &height);
-
-	xmlNewChild(xmlNodeChild, NULL, (xmlChar*)"sarHeight", number2String(xmlBuffer, bufferSize, height));
-	xmlNewChild(xmlNodeChild, NULL, (xmlChar*)"sarWidth", number2String(xmlBuffer, bufferSize, width));
-
-	switch (getMotionEstimation())
-	{
-		case ME_LOW:
-			strcpy((char*)xmlBuffer, "low");
-			break;
-		case ME_MEDIUM:
-			strcpy((char*)xmlBuffer, "medium");
-			break;
-		case ME_HIGH:
-			strcpy((char*)xmlBuffer, "high");
-			break;
-		default:
-			strcpy((char*)xmlBuffer, "none");
-			break;
-	}
-
-	xmlNewChild(xmlNodeRoot, NULL, (xmlChar*)"motionEstimation", xmlBuffer);
-
-	switch (getRateDistortion())
-	{
-		case RD_DCT_ME:
-			strcpy((char*)xmlBuffer, "dct");
-			break;
-		case RD_HPEL_QPEL_16:
-			strcpy((char*)xmlBuffer, "hpelQpel16");
-			break;
-		case RD_HPEL_QPEL_8:
-			strcpy((char*)xmlBuffer, "hpelQpel8");
-			break;
-		case RD_SQUARE:
-			strcpy((char*)xmlBuffer, "square");
-			break;
-		default:
-			strcpy((char*)xmlBuffer, "none");
-			break;
-	}
-
-	xmlNewChild(xmlNodeRoot, NULL, (xmlChar*)"rdo", xmlBuffer);
-	xmlNewChild(xmlNodeRoot, NULL, (xmlChar*)"bFrameRdo", boolean2String(xmlBuffer, bufferSize, getBframeRdo()));
-	xmlNewChild(xmlNodeRoot, NULL, (xmlChar*)"chromaMotionEstimation", boolean2String(xmlBuffer, bufferSize, getChromaMotionEstimation()));
-	xmlNewChild(xmlNodeRoot, NULL, (xmlChar*)"qPel", boolean2String(xmlBuffer, bufferSize, getQpel()));
-	xmlNewChild(xmlNodeRoot, NULL, (xmlChar*)"gmc", boolean2String(xmlBuffer, bufferSize, getGmc()));
-	xmlNewChild(xmlNodeRoot, NULL, (xmlChar*)"turboMode", boolean2String(xmlBuffer, bufferSize, getTurboMode()));
-	xmlNewChild(xmlNodeRoot, NULL, (xmlChar*)"chromaOptimiser", boolean2String(xmlBuffer, bufferSize, getChromaOptimisation()));
-	xmlNewChild(xmlNodeRoot, NULL, (xmlChar*)"fourMv", boolean2String(xmlBuffer, bufferSize, getInterMotionVector()));
-	xmlNewChild(xmlNodeRoot, NULL, (xmlChar*)"cartoon", boolean2String(xmlBuffer, bufferSize, getCartoon()));
-	xmlNewChild(xmlNodeRoot, NULL, (xmlChar*)"greyscale", boolean2String(xmlBuffer, bufferSize, getGreyscale()));
-
-	switch (getInterlaced())
-	{
-		case INTERLACED_BFF:
-			strcpy((char*)xmlBuffer, "bff");
-			break;
-		case INTERLACED_TFF:
-			strcpy((char*)xmlBuffer, "tff");
-			break;
-		default:
-			strcpy((char*)xmlBuffer, "none");
-			break;
-	}
-
-	xmlNewChild(xmlNodeRoot, NULL, (xmlChar*)"interlaced", xmlBuffer);
-	xmlNewChild(xmlNodeRoot, NULL, (xmlChar*)"frameDropRatio", number2String(xmlBuffer, bufferSize, getFrameDropRatio()));
-	xmlNewChild(xmlNodeRoot, NULL, (xmlChar*)"maxIframeInterval", number2String(xmlBuffer, bufferSize, getMaxKeyInterval()));
-	xmlNewChild(xmlNodeRoot, NULL, (xmlChar*)"maxBframes", number2String(xmlBuffer, bufferSize, getMaxBframes()));
-	xmlNewChild(xmlNodeRoot, NULL, (xmlChar*)"bFrameSensitivity", number2String(xmlBuffer, bufferSize, getBframeSensitivity()));
-	xmlNewChild(xmlNodeRoot, NULL, (xmlChar*)"closedGop", boolean2String(xmlBuffer, bufferSize, getClosedGop()));
-	xmlNewChild(xmlNodeRoot, NULL, (xmlChar*)"packed", boolean2String(xmlBuffer, bufferSize, getPacked()));
-
-	unsigned int minI, minP, minB;
-	unsigned int maxI, maxP, maxB;
-
-	getMinQuantiser(&minI, &minP, &minB);
-	getMaxQuantiser(&maxI, &maxP, &maxB);
-
-	xmlNewChild(xmlNodeRoot, NULL, (xmlChar*)"quantImin", number2String(xmlBuffer, bufferSize, minI));
-	xmlNewChild(xmlNodeRoot, NULL, (xmlChar*)"quantPmin", number2String(xmlBuffer, bufferSize, minP));
-	xmlNewChild(xmlNodeRoot, NULL, (xmlChar*)"quantBmin", number2String(xmlBuffer, bufferSize, minB));
-	xmlNewChild(xmlNodeRoot, NULL, (xmlChar*)"quantImax", number2String(xmlBuffer, bufferSize, maxI));
-	xmlNewChild(xmlNodeRoot, NULL, (xmlChar*)"quantPmax", number2String(xmlBuffer, bufferSize, maxP));
-	xmlNewChild(xmlNodeRoot, NULL, (xmlChar*)"quantBmax", number2String(xmlBuffer, bufferSize, maxB));
-	xmlNewChild(xmlNodeRoot, NULL, (xmlChar*)"quantBratio", number2String(xmlBuffer, bufferSize, getBframeQuantiserRatio()));
-	xmlNewChild(xmlNodeRoot, NULL, (xmlChar*)"quantBoffset", number2String(xmlBuffer, bufferSize, getBframeQuantiserOffset()));
-
-	switch (getCqmPreset())
-	{
-		case CQM_H263:
-			strcpy((char*)xmlBuffer, "h.263");
-			break;
-		case CQM_MPEG:
-			strcpy((char*)xmlBuffer, "mpeg");
-			break;
-		case CQM_CUSTOM:
-			strcpy((char*)xmlBuffer, "custom");
-			break;
-	}
-
-	xmlNewChild(xmlNodeRoot, NULL, (xmlChar*)"quantType", xmlBuffer);
-
-	xmlNodeChild = xmlNewChild(xmlNodeRoot, NULL, (xmlChar*)"intraMatrix", NULL);
-
-	for (int i = 0; i < 64; i++)
-		xmlNewChild(xmlNodeChild, NULL, (xmlChar*)"value", number2String(xmlBuffer, bufferSize, _intraMatrix[i]));
-
-	xmlNodeChild = xmlNewChild(xmlNodeRoot, NULL, (xmlChar*)"interMatrix", NULL);
-
-	for (int i = 0; i < 64; i++)
-		xmlNewChild(xmlNodeChild, NULL, (xmlChar*)"value", number2String(xmlBuffer, bufferSize, _interMatrix[i]));
-
-	xmlNewChild(xmlNodeRoot, NULL, (xmlChar*)"trellis", boolean2String(xmlBuffer, bufferSize, getTrellis()));
-
-	xmlNodeChild = xmlNewChild(xmlNodeRoot, NULL, (xmlChar*)"singlePass", NULL);
-	xmlNewChild(xmlNodeChild, NULL, (xmlChar*)"reactionDelayFactor", number2String(xmlBuffer, bufferSize, getReactionDelayFactor()));
-	xmlNewChild(xmlNodeChild, NULL, (xmlChar*)"averagingQuantiserPeriod", number2String(xmlBuffer, bufferSize, getAveragingQuantiserPeriod()));
-	xmlNewChild(xmlNodeChild, NULL, (xmlChar*)"smoother", number2String(xmlBuffer, bufferSize, getSmoother()));
-
-	xmlNodeChild = xmlNewChild(xmlNodeRoot, NULL, (xmlChar*)"twoPass", NULL);
-	xmlNewChild(xmlNodeChild, NULL, (xmlChar*)"keyFrameBoost", number2String(xmlBuffer, bufferSize, getKeyFrameBoost()));
-	xmlNewChild(xmlNodeChild, NULL, (xmlChar*)"maxKeyFrameReduceBitrate", number2String(xmlBuffer, bufferSize, getMaxKeyFrameReduceBitrate()));
-	xmlNewChild(xmlNodeChild, NULL, (xmlChar*)"keyFrameBitrateThreshold", number2String(xmlBuffer, bufferSize, getKeyFrameBitrateThreshold()));
-	xmlNewChild(xmlNodeChild, NULL, (xmlChar*)"overflowControlStrength", number2String(xmlBuffer, bufferSize, getOverflowControlStrength()));
-	xmlNewChild(xmlNodeChild, NULL, (xmlChar*)"maxOverflowImprovement", number2String(xmlBuffer, bufferSize, getMaxOverflowImprovement()));
-	xmlNewChild(xmlNodeChild, NULL, (xmlChar*)"maxOverflowDegradation", number2String(xmlBuffer, bufferSize, getMaxOverflowDegradation()));
-	xmlNewChild(xmlNodeChild, NULL, (xmlChar*)"aboveAverageCurveCompression", number2String(xmlBuffer, bufferSize, getAboveAverageCurveCompression()));
-	xmlNewChild(xmlNodeChild, NULL, (xmlChar*)"belowAverageCurveCompression", number2String(xmlBuffer, bufferSize, getBelowAverageCurveCompression()));
-	xmlNewChild(xmlNodeChild, NULL, (xmlChar*)"vbvBufferSize", number2String(xmlBuffer, bufferSize, getVbvBufferSize()));
-	xmlNewChild(xmlNodeChild, NULL, (xmlChar*)"maxVbvBitrate", number2String(xmlBuffer, bufferSize, getMaxVbvBitrate()));
-	xmlNewChild(xmlNodeChild, NULL, (xmlChar*)"vbvPeakBitrate", number2String(xmlBuffer, bufferSize, getVbvPeakBitrate()));
-}
-
-bool XvidOptions::validateXml(xmlDocPtr doc)
-{
-	const char *schemaFile = "XvidParam.xsd";
-	char *pluginDir = ADM_getPluginPath();
-	char schemaPath[strlen(pluginDir) + strlen(PLUGIN_SUBDIR) + 1 + strlen(schemaFile) + 1];
-	bool success = false;
-
-	strcpy(schemaPath, pluginDir);
-	strcat(schemaPath, PLUGIN_SUBDIR);
-	strcat(schemaPath, "/");
-	strcat(schemaPath, schemaFile);
-	delete [] pluginDir;
-
-	xmlSchemaParserCtxtPtr xmlSchemaParserCtxt = xmlSchemaNewParserCtxt(schemaPath);
-	xmlSchemaPtr xmlSchema = xmlSchemaParse(xmlSchemaParserCtxt);
-
- 	xmlSchemaFreeParserCtxt(xmlSchemaParserCtxt);
-
- 	xmlSchemaValidCtxtPtr xmlSchemaValidCtxt = xmlSchemaNewValidCtxt(xmlSchema);
-
- 	if (xmlSchemaValidCtxt)
-	{
- 		success = !xmlSchemaValidateDoc(xmlSchemaValidCtxt, doc);
-	 	xmlSchemaFree(xmlSchema);
-		xmlSchemaFreeValidCtxt(xmlSchemaValidCtxt);
- 	}
-	else
- 		xmlSchemaFree(xmlSchema);
-
-	return success;
-}
-
-int XvidOptions::fromXml(const char *xml)
-{
-	bool success = false;
-
-	clearPresetConfiguration();
-
-	xmlDocPtr doc = xmlReadMemory(xml, strlen(xml), "Xvid.xml", NULL, 0);
-
-	if (success = validateXml(doc))
-	{
-		xmlNode *xmlNodeRoot = xmlDocGetRootElement(doc);
-
-		for (xmlNode *xmlChild = xmlNodeRoot->children; xmlChild; xmlChild = xmlChild->next)
-		{
-			if (xmlChild->type == XML_ELEMENT_NODE)
-			{
-				char *content = (char*)xmlNodeGetContent(xmlChild);
-
-				if (strcmp((char*)xmlChild->name, "presetConfiguration") == 0)
-					parsePresetConfiguration(xmlChild);
-				else if (strcmp((char*)xmlChild->name, "XvidOptions") == 0)
-					parseXvidOptions(xmlChild);
-
-				xmlFree(content);
-			}
-		}
-	}
-
-	xmlFreeDoc(doc);
-
-	return success;
-}
-
-void XvidOptions::parsePresetConfiguration(xmlNode *node)
-{
-	char* name = NULL;
-	ConfigType type = CONFIG_CUSTOM;
-
-	for (xmlNode *xmlChild = node->children; xmlChild; xmlChild = xmlChild->next)
-	{
-		if (xmlChild->type == XML_ELEMENT_NODE)
-		{
-			char *content = (char*)xmlNodeGetContent(xmlChild);
-
-			if (strcmp((char*)xmlChild->name, "name") == 0)
-				name = strdup((char*)content);
-			else if (strcmp((char*)xmlChild->name, "type") == 0)
-			{
-				if (strcmp(content, "user") == 0)
-					type = CONFIG_USER;
-				else if (strcmp(content, "system") == 0)
-					type = CONFIG_SYSTEM;
-				else
-					type = CONFIG_DEFAULT;
-			}
-
-			xmlFree(content);
-		}
-	}
-
-	setPresetConfiguration(name, type);
-	free(name);
-}
-
-void XvidOptions::parseXvidOptions(xmlNode *node)
-{
-	int minI = -1, minP = -1, minB = -1;
-	int maxI = -1, maxP = -1, maxB = -1;
-
-	for (xmlNode *xmlChild = node->children; xmlChild; xmlChild = xmlChild->next)
-	{
-		if (xmlChild->type == XML_ELEMENT_NODE)
-		{
-			char *content = (char*)xmlNodeGetContent(xmlChild);
-
-			if (strcmp((char*)xmlChild->name, "threads") == 0)
-				setThreads(atoi(content));
-			else if (strcmp((char*)xmlChild->name, "vui") == 0)
-				parseVuiOptions(xmlChild);
-			else if (strcmp((char*)xmlChild->name, "motionEstimation") == 0)
-			{
-				MotionEstimationMode motionEstimation = ME_NONE;
-
-				if (strcmp(content, "low") == 0)
-					motionEstimation = ME_LOW;
-				else if (strcmp(content, "medium") == 0)
-					motionEstimation = ME_MEDIUM;
-				else if (strcmp(content, "high") == 0)
-					motionEstimation = ME_HIGH;
-
-				setMotionEstimation(motionEstimation);
-			}
-			else if (strcmp((char*)xmlChild->name, "rdo") == 0)
-			{
-				RateDistortionMode rateDistortion = RD_NONE;
-
-				if (strcmp(content, "dct") == 0)
-					rateDistortion = RD_DCT_ME;
-				else if (strcmp(content, "hpelQpel16") == 0)
-					rateDistortion = RD_HPEL_QPEL_16;
-				else if (strcmp(content, "hpelQpel8") == 0)
-					rateDistortion = RD_HPEL_QPEL_8;
-				else if (strcmp(content, "square") == 0)
-					rateDistortion = RD_SQUARE;
-
-				setRateDistortion(rateDistortion);
-			}
-			else if (strcmp((char*)xmlChild->name, "bFrameRdo") == 0)
-				setBframeRdo(string2Boolean(content));
-			else if (strcmp((char*)xmlChild->name, "chromaMotionEstimation") == 0)
-				setChromaMotionEstimation(string2Boolean(content));
-			else if (strcmp((char*)xmlChild->name, "qPel") == 0)
-				setQpel(string2Boolean(content));
-			else if (strcmp((char*)xmlChild->name, "gmc") == 0)
-				setGmc(string2Boolean(content));
-			else if (strcmp((char*)xmlChild->name, "turboMode") == 0)
-				setTurboMode(string2Boolean(content));
-			else if (strcmp((char*)xmlChild->name, "chromaOptimiser") == 0)
-				setChromaOptimisation(string2Boolean(content));
-			else if (strcmp((char*)xmlChild->name, "fourMv") == 0)
-				setInterMotionVector(string2Boolean(content));
-			else if (strcmp((char*)xmlChild->name, "cartoon") == 0)
-				setCartoon(string2Boolean(content));
-			else if (strcmp((char*)xmlChild->name, "greyscale") == 0)
-				setGreyscale(string2Boolean(content));
-			else if (strcmp((char*)xmlChild->name, "interlaced") == 0)
-			{
-				InterlacedMode interlaced = INTERLACED_NONE;
-
-				if (strcmp(content, "bff") == 0)
-					interlaced = INTERLACED_BFF;
-				else if (strcmp(content, "tff") == 0)
-					interlaced = INTERLACED_TFF;
-
-				setInterlaced(interlaced);
-			}
-			else if (strcmp((char*)xmlChild->name, "frameDropRatio") == 0)
-				setFrameDropRatio(atoi(content));
-			else if (strcmp((char*)xmlChild->name, "maxIframeInterval") == 0)
-				setMaxKeyInterval(atoi(content));
-			else if (strcmp((char*)xmlChild->name, "maxBframes") == 0)
-				setMaxBframes(atoi(content));
-			else if (strcmp((char*)xmlChild->name, "bFrameSensitivity") == 0)
-				setBframeSensitivity(atoi(content));
-			else if (strcmp((char*)xmlChild->name, "closedGop") == 0)
-				setClosedGop(string2Boolean(content));
-			else if (strcmp((char*)xmlChild->name, "packed") == 0)
-				setPacked(string2Boolean(content));
-			else if (strcmp((char*)xmlChild->name, "quantImin") == 0)
-				minI = atoi(content);
-			else if (strcmp((char*)xmlChild->name, "quantPmin") == 0)
-				minP = atoi(content);
-			else if (strcmp((char*)xmlChild->name, "quantBmin") == 0)
-				minB = atoi(content);
-			else if (strcmp((char*)xmlChild->name, "quantImax") == 0)
-				maxI = atoi(content);
-			else if (strcmp((char*)xmlChild->name, "quantPmax") == 0)
-				maxP = atoi(content);
-			else if (strcmp((char*)xmlChild->name, "quantBmax") == 0)
-				maxB = atoi(content);
-			else if (strcmp((char*)xmlChild->name, "quantBratio") == 0)
-				setBframeQuantiserRatio(atoi(content));
-			else if (strcmp((char*)xmlChild->name, "quantBoffset") == 0)
-				setBframeQuantiserOffset(atoi(content));
-			else if (strcmp((char*)xmlChild->name, "quantType") == 0)
-			{
-				if (strcmp(content, "mpeg") == 0)
-					setCqmPreset(CQM_MPEG);
-				else if (strcmp(content, "custom") == 0)
-					setCqmPreset(CQM_CUSTOM);
-				else
-					setCqmPreset(CQM_H263);
-			}
-			else if (strcmp((char*)xmlChild->name, "intraMatrix") == 0)
-			{
-				unsigned char intraMatrix[64];
-
-				parseCqmOption(xmlChild, intraMatrix);
-				setIntraMatrix(intraMatrix);
-			}
-			else if (strcmp((char*)xmlChild->name, "interMatrix") == 0)
-			{
-				unsigned char interMatrix[64];
-
-				parseCqmOption(xmlChild, interMatrix);
-				setInterMatrix(interMatrix);
-			}
-			else if (strcmp((char*)xmlChild->name, "trellis") == 0)
-				setTrellis(string2Boolean(content));
-			else if (strcmp((char*)xmlChild->name, "singlePass") == 0)
-				parseSinglePassOptions(xmlChild);
-			else if (strcmp((char*)xmlChild->name, "twoPass") == 0)
-				parseTwoPassOptions(xmlChild);
-
-			xmlFree(content);
-		}
-	}
-
-	if (minI != -1 && minP != -1 && minB != -1)
-		setMinQuantiser(minI, minP, minB);
-
-	if (maxI != -1 && maxP != -1 && maxB != -1)
-		setMaxQuantiser(maxI, maxP, maxB);
-}
-
-void XvidOptions::parseVuiOptions(xmlNode *node)
-{
-	unsigned int width = 0, height = 0;
-
-	for (xmlNode *xmlChild = node->children; xmlChild; xmlChild = xmlChild->next)
-	{
-		if (xmlChild->type == XML_ELEMENT_NODE)
-		{
-			char *content = (char*)xmlNodeGetContent(xmlChild);
-
-			if (strcmp((char*)xmlChild->name, "sarAsInput") == 0)
-				setParAsInput(string2Boolean(content));
-			else if (strcmp((char*)xmlChild->name, "sarHeight") == 0)
-				height = atoi(content);
-			else if (strcmp((char*)xmlChild->name, "sarWidth") == 0)
-				width = atoi(content);
-
-			xmlFree(content);
-		}
-	}
-
-	setPar(width, height);
-}
-
-void XvidOptions::parseCqmOption(xmlNode *node, unsigned char matrix[])
-{
-	int index = 0;
-
-	for (xmlNode *xmlChild = node->children; xmlChild; xmlChild = xmlChild->next)
-	{
-		if (xmlChild->type == XML_ELEMENT_NODE)
-		{
-			char *content = (char*)xmlNodeGetContent(xmlChild);
-
-			matrix[index] = atoi(content);
-			index++;
-
-			xmlFree(content);
-		}
-	}
-}
-
-void XvidOptions::parseSinglePassOptions(xmlNode *node)
-{
-	for (xmlNode *xmlChild = node->children; xmlChild; xmlChild = xmlChild->next)
-	{
-		if (xmlChild->type == XML_ELEMENT_NODE)
-		{
-			char *content = (char*)xmlNodeGetContent(xmlChild);
-
-			if (strcmp((char*)xmlChild->name, "reactionDelayFactor") == 0)
-				setReactionDelayFactor(atoi(content));
-			else if (strcmp((char*)xmlChild->name, "averagingQuantiserPeriod") == 0)
-				setAveragingQuantiserPeriod(atoi(content));
-			else if (strcmp((char*)xmlChild->name, "smoother") == 0)
-				setSmoother(atoi(content));
-
-			xmlFree(content);
-		}
-	}
-}
-
-void XvidOptions::parseTwoPassOptions(xmlNode *node)
-{
-	for (xmlNode *xmlChild = node->children; xmlChild; xmlChild = xmlChild->next)
-	{
-		if (xmlChild->type == XML_ELEMENT_NODE)
-		{
-			char *content = (char*)xmlNodeGetContent(xmlChild);
-
-			if (strcmp((char*)xmlChild->name, "keyFrameBoost") == 0)
-				setKeyFrameBoost(atoi(content));
-			else if (strcmp((char*)xmlChild->name, "maxKeyFrameReduceBitrate") == 0)
-				setMaxKeyFrameReduceBitrate(atoi(content));
-			else if (strcmp((char*)xmlChild->name, "keyFrameBitrateThreshold") == 0)
-				setKeyFrameBitrateThreshold(atoi(content));
-			else if (strcmp((char*)xmlChild->name, "overflowControlStrength") == 0)
-				setOverflowControlStrength(atoi(content));
-			else if (strcmp((char*)xmlChild->name, "maxOverflowImprovement") == 0)
-				setMaxOverflowImprovement(atoi(content));
-			else if (strcmp((char*)xmlChild->name, "maxOverflowDegradation") == 0)
-				setMaxOverflowDegradation(atoi(content));
-			else if (strcmp((char*)xmlChild->name, "aboveAverageCurveCompression") == 0)
-				setAboveAverageCurveCompression(atoi(content));
-			else if (strcmp((char*)xmlChild->name, "belowAverageCurveCompression") == 0)
-				setBelowAverageCurveCompression(atoi(content));
-			else if (strcmp((char*)xmlChild->name, "vbvBufferSize") == 0)
-				setVbvBufferSize(atoi(content));
-			else if (strcmp((char*)xmlChild->name, "maxVbvBitrate") == 0)
-				setMaxVbvBitrate(atoi(content));
-			else if (strcmp((char*)xmlChild->name, "vbvPeakBitrate") == 0)
-				setVbvPeakBitrate(atoi(content));
-
-			xmlFree(content);
-		}
-	}
-}
-
-xmlChar* XvidOptions::number2String(xmlChar *buffer, size_t size, int number)
-{
-	std::ostringstream stream;
-
-	stream.imbue(std::locale::classic());
-	stream << number;
-	std::string string = stream.str();
-
-	strncpy((char*)buffer, string.c_str(), size);
-
-	return buffer;
-}
-
-xmlChar* XvidOptions::number2String(xmlChar *buffer, size_t size, unsigned int number)
-{
-	std::ostringstream stream;
-
-	stream.imbue(std::locale::classic());
-	stream << number;
-	std::string string = stream.str();
-
-	strncpy((char*)buffer, string.c_str(), size);
-
-	return buffer;
-}
-
-xmlChar* XvidOptions::number2String(xmlChar *buffer, size_t size, float number)
-{
-	std::ostringstream stream;
-
-	stream.imbue(std::locale::classic());
-	stream << number;
-	std::string string = stream.str();
-
-	strncpy((char*)buffer, string.c_str(), size);
-
-	return buffer;
-}
-
-xmlChar* XvidOptions::boolean2String(xmlChar *buffer, size_t size, bool boolean)
-{
-	if (boolean)
-		strcpy((char*)buffer, "true");
-	else
-		strcpy((char*)buffer, "false");
-
-	return buffer;
-}
-
-bool XvidOptions::string2Boolean(char *buffer)
-{
-	return (strcmp(buffer, "true") == 0);
-}

Deleted: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_xvid/options.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_xvid/options.h	2009-07-09 10:41:55 UTC (rev 5025)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_xvid/options.h	2009-07-09 10:48:18 UTC (rev 5026)
@@ -1,250 +0,0 @@
-/***************************************************************************
-                                XvidOptions.h
-
-    begin                : Fri Jun 13 2008
-    copyright            : (C) 2008 by gruntster
- ***************************************************************************/
-
-/***************************************************************************
- *                                                                         *
- *   This program is free software; you can redistribute it and/or modify  *
- *   it under the terms of the GNU General Public License as published by  *
- *   the Free Software Foundation; either version 2 of the License, or     *
- *   (at your option) any later version.                                   *
- *                                                                         *
- ***************************************************************************/
-
-#ifndef options_h
-#define options_h
-
-#include <libxml/tree.h>
-#include "xvid.h"
-
-extern "C"
-{
-#include "ADM_vidEnc_plugin.h"
-}
-
-#define DEFAULT_ENCODE_MODE	(ADM_VIDENC_MODE_CQP)
-#define DEFAULT_ENCODE_MODE_PARAMETER (4)
-#define TURBO_MODE (XVID_ME_FASTREFINE16 | XVID_ME_FASTREFINE8 | XVID_ME_SKIP_DELTASEARCH | XVID_ME_FAST_MODEINTERPOLATE | XVID_ME_BFRAME_EARLYSTOP)
-#define CHROMA_ME (XVID_ME_CHROMA_PVOP | XVID_ME_CHROMA_BVOP)
-
-typedef enum
-{
-	CONFIG_CUSTOM,
-	CONFIG_DEFAULT,
-	CONFIG_USER,
-	CONFIG_SYSTEM
-} ConfigType;
-
-typedef enum
-{
-	ME_NONE = 0,
-	ME_LOW = XVID_ME_HALFPELREFINE16,	
-	ME_MEDIUM = XVID_ME_HALFPELREFINE16 | XVID_ME_ADVANCEDDIAMOND16,	
-	ME_HIGH = XVID_ME_HALFPELREFINE16 | XVID_ME_EXTSEARCH16 | XVID_ME_HALFPELREFINE8 | XVID_ME_USESQUARES16
-} MotionEstimationMode;
-
-typedef enum
-{
-	INTERLACED_NONE,
-	INTERLACED_BFF,
-	INTERLACED_TFF
-} InterlacedMode;
-
-typedef enum
-{
-	RD_NONE = -1,
-	RD_DCT_ME = 0,
-	RD_HPEL_QPEL_16 = RD_DCT_ME | XVID_ME_HALFPELREFINE16_RD | XVID_ME_QUARTERPELREFINE16_RD,
-	RD_HPEL_QPEL_8 = RD_HPEL_QPEL_16 | XVID_ME_HALFPELREFINE8_RD | XVID_ME_QUARTERPELREFINE8_RD | XVID_ME_CHECKPREDICTION_RD,
-	RD_SQUARE = RD_HPEL_QPEL_8 | XVID_ME_EXTSEARCH_RD
-} RateDistortionMode;
-
-typedef enum
-{
-	CQM_H263,
-	CQM_MPEG,
-	CQM_CUSTOM
-} CqmPresetMode;
-
-class XvidOptions
-{
-protected:
-	xvid_enc_create_t xvid_enc_create;
-	xvid_enc_frame_t xvid_enc_frame;
-	xvid_plugin_single_t xvid_plugin_single;
-	xvid_plugin_2pass2_t xvid_plugin_2pass2;
-
-	char* _configurationName;
-	ConfigType _configurationType;
-
-	bool _parAsInput;
-	CqmPresetMode _cqmPreset;
-	unsigned char _intraMatrix[64], _interMatrix[64];
-
-	void cleanUp(void);
-	xmlChar* number2String(xmlChar *buffer, size_t size, int number);
-	xmlChar* number2String(xmlChar *buffer, size_t size, unsigned int number);
-	xmlChar* number2String(xmlChar *buffer, size_t size, float number);
-	xmlChar* boolean2String(xmlChar *buffer, size_t size, bool boolean);
-	bool string2Boolean(char *buffer);
-
-	void addXvidOptionsToXml(xmlNodePtr xmlNodeRoot);
-	char* dumpXmlDocToMemory(xmlDocPtr xmlDoc);
-	bool validateXml(xmlDocPtr doc);
-	void parsePresetConfiguration(xmlNode *node);
-	void parseXvidOptions(xmlNode *node);
-	void parseVuiOptions(xmlNode *node);
-	void parseCqmOption(xmlNode *node, unsigned char matrix[]);
-	void parseSinglePassOptions(xmlNode *node);
-	void parseTwoPassOptions(xmlNode *node);
-
-public:
-	XvidOptions(void);
-	~XvidOptions(void);
-
-	void reset(void);
-
-	void getParameters(xvid_enc_create_t **xvid_enc_create, xvid_enc_frame_t **xvid_enc_frame,
-		xvid_plugin_single_t **xvid_plugin_single, xvid_plugin_2pass2_t **xvid_plugin_2pass2);
-
-	void getPresetConfiguration(char** configurationName, ConfigType *configurationType);
-	void setPresetConfiguration(const char* configurationName, ConfigType configurationType);
-	void clearPresetConfiguration(void);
-
-	unsigned int getThreads(void);
-	void setThreads(unsigned int threads);
-
-	bool getParAsInput(void);
-	void setParAsInput(bool parAsInput);
-
-	void getPar(unsigned int *width, unsigned int *height);
-	void setPar(unsigned int width, unsigned int height);
-
-	MotionEstimationMode getMotionEstimation(void);
-	void setMotionEstimation(MotionEstimationMode motionEstimation);
-
-	RateDistortionMode getRateDistortion(void);
-	void setRateDistortion(RateDistortionMode rateDistortion);
-
-	bool getBframeRdo(void);
-	void setBframeRdo(bool bFrameRdo);
-
-	bool getChromaMotionEstimation(void);
-	void setChromaMotionEstimation(bool chromaMotionEstimation);
-
-	bool getQpel(void);
-	void setQpel(bool qpel);
-
-	bool getGmc(void);
-	void setGmc(bool gmc);
-
-	bool getTurboMode(void);
-	void setTurboMode(bool turboMode);
-
-	bool getChromaOptimisation(void);
-	void setChromaOptimisation(bool chromaOptimisation);
-
-	bool getInterMotionVector(void);
-	void setInterMotionVector(bool interMotionVector);
-
-	bool getCartoon(void);
-	void setCartoon(bool cartoon);
-
-	bool getGreyscale(void);
-	void setGreyscale(bool greyscale);
-
-	InterlacedMode getInterlaced(void);
-	void setInterlaced(InterlacedMode interlaced);
-
-	unsigned int getFrameDropRatio(void);
-	void setFrameDropRatio(unsigned int frameDropRatio);
-
-	unsigned int getMaxKeyInterval(void);
-	void setMaxKeyInterval(unsigned int maxKeyInterval);
-
-	unsigned int getMaxBframes(void);
-	void setMaxBframes(unsigned int maxBFrames);
-
-	int getBframeSensitivity(void);
-	void setBframeSensitivity(int bFrameSensitivity);
-
-	bool getClosedGop(void);
-	void setClosedGop(bool closedGop);
-
-	bool getPacked(void);
-	void setPacked(bool packed);
-
-	void getMinQuantiser(unsigned int *i, unsigned int *p, unsigned int *b);
-	void setMinQuantiser(unsigned int i, unsigned int p, unsigned int b);
-
-	void getMaxQuantiser(unsigned int *i, unsigned int *p, unsigned int *b);
-	void setMaxQuantiser(unsigned int i, unsigned int p, unsigned int b);
-
-	unsigned int getBframeQuantiserRatio(void);
-	void setBframeQuantiserRatio(unsigned int ratio);
-
-	unsigned int getBframeQuantiserOffset(void);
-	void setBframeQuantiserOffset(unsigned int offset);
-
-	CqmPresetMode getCqmPreset(void);
-	void setCqmPreset(CqmPresetMode cqmPreset);
-
-	void getIntraMatrix(unsigned char intra[64]);
-	void setIntraMatrix(unsigned char intra[64]);
-
-	void getInterMatrix(unsigned char inter[64]);
-	void setInterMatrix(unsigned char inter[64]);
-
-	bool getTrellis(void);
-	void setTrellis(bool trellis);
-
-	unsigned int getReactionDelayFactor(void);
-	void setReactionDelayFactor(unsigned int delayFactor);
-
-	unsigned int getAveragingQuantiserPeriod(void);
-	void setAveragingQuantiserPeriod(unsigned int averagingPeriod);
-
-	unsigned int getSmoother(void);
-	void setSmoother(unsigned int smoother);
-
-	unsigned int getKeyFrameBoost(void);
-	void setKeyFrameBoost(unsigned int keyFrameBoost);
-
-	unsigned int getMaxKeyFrameReduceBitrate(void);
-	void setMaxKeyFrameReduceBitrate(unsigned int bitrateReduction);
-
-	unsigned int getKeyFrameBitrateThreshold(void);
-	void setKeyFrameBitrateThreshold(unsigned int bitrateThreshold);
-
-	unsigned int getOverflowControlStrength(void);
-	void setOverflowControlStrength(unsigned int overflowControlStrength);
-
-	unsigned int getMaxOverflowImprovement(void);
-	void setMaxOverflowImprovement(unsigned int overflowImprovement);
-
-	unsigned int getMaxOverflowDegradation(void);
-	void setMaxOverflowDegradation(unsigned int overflowDegradation);
-
-	unsigned int getAboveAverageCurveCompression(void);
-	void setAboveAverageCurveCompression(unsigned int curveCompression);
-
-	unsigned int getBelowAverageCurveCompression(void);
-	void setBelowAverageCurveCompression(unsigned int curveCompression);
-
-	unsigned int getVbvBufferSize(void);
-	void setVbvBufferSize(unsigned int bufferSize);
-
-	unsigned int getMaxVbvBitrate(void);
-	void setMaxVbvBitrate(unsigned int bitrate);
-
-	unsigned int getVbvPeakBitrate(void);
-	void setVbvPeakBitrate(unsigned int peakBitrate);
-
-	virtual char* toXml(void);
-	virtual int fromXml(const char *xml);
-};
-
-#endif	// options_h

Deleted: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_xvid/presetOptions.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_xvid/presetOptions.cpp	2009-07-09 10:41:55 UTC (rev 5025)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_xvid/presetOptions.cpp	2009-07-09 10:48:18 UTC (rev 5026)
@@ -1,158 +0,0 @@
- /***************************************************************************
-                             presetOptions.cpp
-
-	These settings are intended for external configuration files and don't
-	contain a Preset Configuration block but may contain an Encode Options
-	block.
-
-    begin                : Fri May 23 2008
-    copyright            : (C) 2008 by gruntster
- ***************************************************************************/
-
-/***************************************************************************
- *                                                                         *
- *   This program is free software; you can redistribute it and/or modify  *
- *   it under the terms of the GNU General Public License as published by  *
- *   the Free Software Foundation; either version 2 of the License, or     *
- *   (at your option) any later version.                                   *
- *                                                                         *
- ***************************************************************************/
-#include <libxml/parser.h>
-#include <string.h>
-#include "ADM_inttype.h"
-#include "presetOptions.h"
-
-XvidPresetOptions::XvidPresetOptions(void) : XvidOptions()
-{
-	setEncodeOptionsToDefaults();
-}
-
-vidEncOptions* XvidPresetOptions::getEncodeOptions(void)
-{
-	vidEncOptions *encodeOptions = new vidEncOptions;
-
-	memcpy(encodeOptions, &_encodeOptions, sizeof(vidEncOptions));
-
-	return encodeOptions;
-}
-
-void XvidPresetOptions::setEncodeOptions(vidEncOptions* encodeOptions)
-{
-	memcpy(&_encodeOptions, encodeOptions, sizeof(vidEncOptions));
-}
-
-char* XvidPresetOptions::toXml(void)
-{
-	xmlDocPtr xmlDoc = xmlNewDoc((const xmlChar*)"1.0");
-	xmlNodePtr xmlNodeRoot, xmlNodeChild;
-	const int bufferSize = 100;
-	xmlChar xmlBuffer[bufferSize + 1];
-	char *xml = NULL;
-
-	while (true)
-	{
-		if (!xmlDoc)
-			break;
-
-		if (!(xmlNodeRoot = xmlNewDocNode(xmlDoc, NULL, (xmlChar*)"XvidConfig", NULL)))
-			break;
-
-		xmlDocSetRootElement(xmlDoc, xmlNodeRoot);
-
-		xmlNodeChild = xmlNewChild(xmlNodeRoot, NULL, (xmlChar*)"encodeOptions", NULL);
-
-		switch (_encodeOptions.encodeMode)
-		{
-			case ADM_VIDENC_MODE_CBR:
-				strcpy((char*)xmlBuffer, "CBR");
-				break;
-			case ADM_VIDENC_MODE_CQP:
-				strcpy((char*)xmlBuffer, "CQP");
-				break;
-			case ADM_VIDENC_MODE_2PASS_SIZE:
-				strcpy((char*)xmlBuffer, "2PASS SIZE");
-				break;
-			case ADM_VIDENC_MODE_2PASS_ABR:
-				strcpy((char*)xmlBuffer, "2PASS ABR");
-				break;
-		}
-
-		xmlNewChild(xmlNodeChild, NULL, (xmlChar*)"mode", xmlBuffer);
-		xmlNewChild(xmlNodeChild, NULL, (xmlChar*)"parameter", number2String(xmlBuffer, bufferSize, _encodeOptions.encodeModeParameter));
-
-		addXvidOptionsToXml(xmlNodeRoot);
-		xml = dumpXmlDocToMemory(xmlDoc);
-		xmlFreeDoc(xmlDoc);
-
-		break;
-	}
-
-	return xml;
-}
-
-int XvidPresetOptions::fromXml(const char *xml)
-{
-	bool success = false;
-
-	clearPresetConfiguration();
-	setEncodeOptionsToDefaults();
-
-	xmlDocPtr doc = xmlReadMemory(xml, strlen(xml), "Xvid.xml", NULL, 0);
-
-	if (success = validateXml(doc))
-	{
-		xmlNode *xmlNodeRoot = xmlDocGetRootElement(doc);
-
-		for (xmlNode *xmlChild = xmlNodeRoot->children; xmlChild; xmlChild = xmlChild->next)
-		{
-			if (xmlChild->type == XML_ELEMENT_NODE)
-			{
-				char *content = (char*)xmlNodeGetContent(xmlChild);
-
-				if (strcmp((char*)xmlChild->name, "encodeOptions") == 0)
-					parseEncodeOptions(xmlChild, &_encodeOptions);
-				else if (strcmp((char*)xmlChild->name, "XvidOptions") == 0)
-					parseXvidOptions(xmlChild);
-
-				xmlFree(content);
-			}
-		}
-	}
-
-	xmlFreeDoc(doc);
-
-	return success;
-}
-
-void XvidPresetOptions::parseEncodeOptions(xmlNode *node, vidEncOptions *encodeOptions)
-{
-	for (xmlNode *xmlChild = node->children; xmlChild; xmlChild = xmlChild->next)
-	{
-		if (xmlChild->type == XML_ELEMENT_NODE)
-		{
-			char *content = (char*)xmlNodeGetContent(xmlChild);
-
-			if (strcmp((char*)xmlChild->name, "mode") == 0)
-			{
-				if (strcmp(content, "CBR") == 0)
-					encodeOptions->encodeMode = ADM_VIDENC_MODE_CBR;
-				else if (strcmp(content, "CQP") == 0)
-					encodeOptions->encodeMode = ADM_VIDENC_MODE_CQP;
-				else if (strcmp(content, "2PASS SIZE") == 0)
-					encodeOptions->encodeMode = ADM_VIDENC_MODE_2PASS_SIZE;
-				else if (strcmp(content, "2PASS ABR") == 0)
-					encodeOptions->encodeMode = ADM_VIDENC_MODE_2PASS_ABR;
-			}
-			else if (strcmp((char*)xmlChild->name, "parameter") == 0)
-				encodeOptions->encodeModeParameter = atoi(content);
-
-			xmlFree(content);
-		}
-	}
-}
-
-void XvidPresetOptions::setEncodeOptionsToDefaults(void)
-{
-	_encodeOptions.encodeMode = DEFAULT_ENCODE_MODE;
-	_encodeOptions.encodeModeParameter = DEFAULT_ENCODE_MODE_PARAMETER;
-}

Deleted: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_xvid/presetOptions.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_xvid/presetOptions.h	2009-07-09 10:41:55 UTC (rev 5025)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_xvid/presetOptions.h	2009-07-09 10:48:18 UTC (rev 5026)
@@ -1,39 +0,0 @@
-/***************************************************************************
-                              presetOptions.h
-
-    begin                : Fri May 23 2008
-    copyright            : (C) 2008 by gruntster
- ***************************************************************************/
-
-/***************************************************************************
- *                                                                         *
- *   This program is free software; you can redistribute it and/or modify  *
- *   it under the terms of the GNU General Public License as published by  *
- *   the Free Software Foundation; either version 2 of the License, or     *
- *   (at your option) any later version.                                   *
- *                                                                         *
- ***************************************************************************/
-
-#ifndef presetOptions_h
-#define presetOptions_h
-
-#include "options.h"
-
-class XvidPresetOptions : public XvidOptions
-{
-private:
-	vidEncOptions _encodeOptions;
-
-	void parseEncodeOptions(xmlNode *node, vidEncOptions *encodeOptions);
-	void setEncodeOptionsToDefaults(void);
-
-public:
-	XvidPresetOptions(void);
-
-	vidEncOptions* getEncodeOptions(void);
-	void setEncodeOptions(vidEncOptions* encodeOptions);
-	char* toXml(void);
-	int fromXml(const char *xml);
-};
-
-#endif	// presetOptions_h

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidConfigDialog.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidConfigDialog.cpp	2009-07-09 10:41:55 UTC (rev 5025)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidConfigDialog.cpp	2009-07-09 10:48:18 UTC (rev 5026)
@@ -20,7 +20,6 @@
 #include <QtGui/QFileDialog>
 
 #include "../config.h"
-#include "../presetOptions.h"
 #include "xvidConfigDialog.h"
 #include "xvidCustomMatrixDialog.h"
 
@@ -102,16 +101,16 @@
 	disableGenericSlots = true;
 
 	for (int item = 0; item < list.size(); item++)
-		configs.insert(QFileInfo(list[item]).completeBaseName(), CONFIG_USER);
+		configs.insert(QFileInfo(list[item]).completeBaseName(), PLUGIN_CONFIG_USER);
 
 	list = QDir(getSystemConfigDirectory()).entryList(filter, QDir::Files | QDir::Readable);
 
 	for (int item = 0; item < list.size(); item++)
-		configs.insert(QFileInfo(list[item]).completeBaseName(), CONFIG_SYSTEM);
+		configs.insert(QFileInfo(list[item]).completeBaseName(), PLUGIN_CONFIG_SYSTEM);
 
 	ui.configurationComboBox->clear();
-	ui.configurationComboBox->addItem(QT_TR_NOOP("<default>"), CONFIG_DEFAULT);
-	ui.configurationComboBox->addItem(QT_TR_NOOP("<custom>"), CONFIG_CUSTOM);
+	ui.configurationComboBox->addItem(QT_TR_NOOP("<default>"), PLUGIN_CONFIG_DEFAULT);
+	ui.configurationComboBox->addItem(QT_TR_NOOP("<custom>"), PLUGIN_CONFIG_CUSTOM);
 
 	QMap<QString, int>::const_iterator mapIterator = configs.constBegin();
 
@@ -124,14 +123,14 @@
 	disableGenericSlots = origDisableGenericSlots;
 }
 
-bool XvidConfigDialog::selectConfiguration(QString *selectFile, ConfigType configurationType)
+bool XvidConfigDialog::selectConfiguration(QString *selectFile, PluginConfigType configurationType)
 {
 	bool success = false;
 	bool origDisableGenericSlots = disableGenericSlots;
 
 	disableGenericSlots = true;
 
-	if (configurationType == CONFIG_DEFAULT)
+	if (configurationType == PLUGIN_CONFIG_DEFAULT)
 	{
 		ui.configurationComboBox->setCurrentIndex(0);
 		success = true;
@@ -167,7 +166,7 @@
 	{
 		ui.deleteButton->setEnabled(false);
 
-		XvidPresetOptions defaultOptions;
+		XvidOptions defaultOptions;
 		vidEncOptions *defaultEncodeOptions = defaultOptions.getEncodeOptions();
 
 		loadSettings(defaultEncodeOptions, &defaultOptions);
@@ -178,28 +177,18 @@
 		ui.deleteButton->setEnabled(false);
 	else
 	{
-		int configType = ui.configurationComboBox->itemData(index).toInt();
+		PluginConfigType configType = (PluginConfigType)ui.configurationComboBox->itemData(index).toInt();
 		QString configFileName;
 
-		ui.deleteButton->setEnabled(configType == CONFIG_USER);
+		ui.deleteButton->setEnabled(configType == PLUGIN_CONFIG_USER);
 
-		if (configType == CONFIG_SYSTEM)
-			configFileName = QFileInfo(getSystemConfigDirectory(), ui.configurationComboBox->itemText(index) + ".xml").filePath();
-		else	// CONFIG_USER
-			configFileName = QFileInfo(getUserConfigDirectory(), ui.configurationComboBox->itemText(index) + ".xml").filePath();
+		XvidOptions options;
+		vidEncOptions *encodeOptions;
 
-		QFile configFile(configFileName);
+		options.setPresetConfiguration(ui.configurationComboBox->itemText(index).toUtf8().constData(), configType);
 
-		if (configFile.exists())
+		if (options.loadPresetConfiguration())
 		{
-			configFile.open(QIODevice::ReadOnly | QIODevice::Text);
-
-			QByteArray fileContents = configFile.readAll();
-			XvidPresetOptions options;
-			vidEncOptions *encodeOptions;
-
-			configFile.close();
-			options.fromXml(fileContents.constData());
 			encodeOptions = options.getEncodeOptions();
 
 			loadSettings(encodeOptions, &options);
@@ -225,13 +214,13 @@
 	{
 		QFile configFile(configFileName);
 		vidEncOptions encodeOptions;
-		XvidPresetOptions presetOptions;
+		XvidOptions presetOptions;
 
 		configFile.open(QIODevice::WriteOnly | QIODevice::Truncate | QIODevice::Text);
 		saveSettings(&encodeOptions, &presetOptions);
 		presetOptions.setEncodeOptions(&encodeOptions);
 
-		char* xml = presetOptions.toXml();
+		char* xml = presetOptions.toXml(PLUGIN_XML_EXTERNAL);
 
 		configFile.write(xml, strlen(xml));
 		configFile.close();
@@ -239,7 +228,7 @@
 		delete [] xml;
 
 		fillConfigurationComboBox();
-		selectConfiguration(&QFileInfo(configFileName).completeBaseName(), CONFIG_USER);
+		selectConfiguration(&QFileInfo(configFileName).completeBaseName(), PLUGIN_CONFIG_USER);
 	}
 
 	delete [] configDirectory;
@@ -370,7 +359,7 @@
 {
 	bool origDisableGenericSlots = disableGenericSlots;
 	char *configurationName;
-	ConfigType configurationType;
+	PluginConfigType configurationType;
 
 	disableGenericSlots = true;
 	options->getPresetConfiguration(&configurationName, &configurationType);		
@@ -385,7 +374,7 @@
 
 	disableGenericSlots = origDisableGenericSlots;
 
-	return (foundConfig && configurationType != CONFIG_CUSTOM);
+	return (foundConfig && configurationType != PLUGIN_CONFIG_CUSTOM);
 }
 
 void XvidConfigDialog::loadSettings(vidEncOptions *encodeOptions, XvidOptions *options)
@@ -603,7 +592,7 @@
 			break;
 	}
 
-	ConfigType configurationType = (ConfigType)ui.configurationComboBox->itemData(ui.configurationComboBox->currentIndex()).toInt();
+	PluginConfigType configurationType = (PluginConfigType)ui.configurationComboBox->itemData(ui.configurationComboBox->currentIndex()).toInt();
 
 	options->setPresetConfiguration(ui.configurationComboBox->currentText().toUtf8().constData(), configurationType);
 	options->setParAsInput(ui.sarAsInputRadioButton->isChecked());

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidConfigDialog.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidConfigDialog.h	2009-07-09 10:41:55 UTC (rev 5025)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidConfigDialog.h	2009-07-09 10:48:18 UTC (rev 5026)
@@ -2,7 +2,7 @@
 #define XvidConfigDialog_h
 
 #include "ui_xvidConfigDialog.h"
-#include "../options.h"
+#include "../xvidOptions.h"
 
 extern "C"
 {
@@ -24,7 +24,7 @@
 	unsigned char intraMatrix[64], interMatrix[64];
 
 	void fillConfigurationComboBox(void);
-	bool selectConfiguration(QString *selectFile, ConfigType configurationType);
+	bool selectConfiguration(QString *selectFile, PluginConfigType configurationType);
 	bool loadPresetSettings(vidEncOptions *encodeOptions, XvidOptions *options);
 	void loadSettings(vidEncOptions *encodeOptions, XvidOptions *options);
 	QString getUserConfigDirectory(void);

Copied: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_xvid/xvidOptions.cpp (from rev 5002, branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_xvid/options.cpp)
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_xvid/options.cpp	2009-07-06 05:48:05 UTC (rev 5002)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_xvid/xvidOptions.cpp	2009-07-09 10:48:18 UTC (rev 5026)
@@ -0,0 +1,1094 @@
+ /***************************************************************************
+                               XvidOptions.cpp
+
+	These settings are intended for scripting and can contain a Preset 
+	Configuration block.  If this block exists then "internal" settings are
+	ignored and an external configuration file should be read instead, 
+	e.g. PlayStation Portable profile.  However, if the external file is 
+	missing, internal settings have to be used and will reflect a snapshot
+	of the external configuration file at the time the script was generated.
+
+    begin                : Fri Jun 13 2008
+    copyright            : (C) 2008 by gruntster
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+
+#include <libxml/parser.h>
+#include <libxml/xmlschemas.h>
+#include <sstream>
+#include <string>
+
+#include "config.h"
+#include "ADM_inttype.h"
+#include "ADM_files.h"
+#include "xvidOptions.h"
+
+XvidOptions::XvidOptions(void) : PluginOptions("Xvid", "XvidParam.xsd", DEFAULT_ENCODE_MODE, DEFAULT_ENCODE_MODE_PARAMETER)
+{
+}
+
+void XvidOptions::reset(void)
+{
+	PluginOptions::reset();
+
+	memset(&xvid_enc_create, 0, sizeof(xvid_enc_create_t));
+	memset(&xvid_enc_frame, 0, sizeof(xvid_enc_frame_t));
+	memset(&xvid_plugin_single, 0, sizeof(xvid_plugin_single_t));
+	memset(&xvid_plugin_2pass2, 0, sizeof(xvid_plugin_2pass2_t));
+	memset(&_intraMatrix, 8, sizeof(unsigned char) * 64);
+	memset(&_interMatrix, 1, sizeof(unsigned char) * 64);
+
+	xvid_enc_create.version = XVID_VERSION;
+	xvid_enc_frame.version = XVID_VERSION;
+	xvid_plugin_single.version = XVID_VERSION;
+	xvid_plugin_2pass2.version = XVID_VERSION;
+
+	xvid_enc_frame.vop_flags = XVID_VOP_HALFPEL | XVID_VOP_HQACPRED;
+
+	setPar(1, 1);
+	setParAsInput(false);
+	setCqmPreset(CQM_H263);
+	setMotionEstimation(ME_LOW);
+	setRateDistortion(RD_DCT_ME);
+	setMinQuantiser(2, 2, 2);
+	setMaxQuantiser(31, 31, 31);
+	setBframeQuantiserRatio(150);
+	setBframeQuantiserOffset(100);
+	setOverflowControlStrength(5);
+	setMaxOverflowImprovement(5);
+	setMaxOverflowDegradation(5);
+}
+
+void XvidOptions::getParameters(xvid_enc_create_t **xvid_enc_create, xvid_enc_frame_t **xvid_enc_frame,
+	xvid_plugin_single_t **xvid_plugin_single, xvid_plugin_2pass2_t **xvid_plugin_2pass2)
+{
+	*xvid_enc_create = new xvid_enc_create_t;
+	*xvid_enc_frame = new xvid_enc_frame_t;
+	*xvid_plugin_single = new xvid_plugin_single_t;
+	*xvid_plugin_2pass2 = new xvid_plugin_2pass2_t;
+
+	memcpy(*xvid_enc_create, &this->xvid_enc_create, sizeof(xvid_enc_create_t));
+	memcpy(*xvid_enc_frame, &this->xvid_enc_frame, sizeof(xvid_enc_frame_t));
+	memcpy(*xvid_plugin_single, &this->xvid_plugin_single, sizeof(xvid_plugin_single_t));
+	memcpy(*xvid_plugin_2pass2, &this->xvid_plugin_2pass2, sizeof(xvid_plugin_2pass2_t));
+
+	if (getCqmPreset() == CQM_CUSTOM)
+	{
+		(*xvid_enc_frame)->quant_intra_matrix = new unsigned char[64];
+		(*xvid_enc_frame)->quant_inter_matrix = new unsigned char[64];
+
+		getIntraMatrix((*xvid_enc_frame)->quant_intra_matrix);
+		getInterMatrix((*xvid_enc_frame)->quant_inter_matrix);
+	}
+}
+
+unsigned int XvidOptions::getThreads(void)
+{
+	return xvid_enc_create.num_threads;
+}
+
+void XvidOptions::setThreads(unsigned int threads)
+{
+	xvid_enc_create.num_threads = threads;
+}
+
+bool XvidOptions::getParAsInput(void)
+{
+	return _parAsInput;
+}
+
+void XvidOptions::setParAsInput(bool parAsInput)
+{
+	_parAsInput = parAsInput;
+}
+
+void XvidOptions::getPar(unsigned int *width, unsigned int *height)
+{
+	*width = xvid_enc_frame.par_width;
+	*height = xvid_enc_frame.par_height;
+}
+
+void XvidOptions::setPar(unsigned int width, unsigned int height)
+{
+	if (width > 0)
+		xvid_enc_frame.par_width = width;
+
+	if (height > 0)
+		xvid_enc_frame.par_height = height;
+
+	if (xvid_enc_frame.par_width == xvid_enc_frame.par_height)
+		xvid_enc_frame.par = XVID_PAR_11_VGA;
+	else
+		xvid_enc_frame.par = XVID_PAR_EXT;
+}
+
+MotionEstimationMode XvidOptions::getMotionEstimation(void)
+{
+	MotionEstimationMode motionEstimation = ME_NONE;
+
+	if ((xvid_enc_frame.motion & ME_HIGH) == ME_HIGH)
+		motionEstimation = ME_HIGH;
+	else if ((xvid_enc_frame.motion & ME_MEDIUM) == ME_MEDIUM)
+		motionEstimation = ME_MEDIUM;
+	else if ((xvid_enc_frame.motion & ME_LOW) == ME_LOW)
+		motionEstimation = ME_LOW;
+
+	return motionEstimation;
+}
+
+void XvidOptions::setMotionEstimation(MotionEstimationMode motionEstimation)
+{
+	if (motionEstimation == ME_NONE || motionEstimation == ME_LOW || motionEstimation == ME_MEDIUM || motionEstimation == ME_HIGH)
+	{
+		xvid_enc_frame.motion &= ~ME_NONE;
+		xvid_enc_frame.motion &= ~ME_LOW;
+		xvid_enc_frame.motion &= ~ME_MEDIUM;
+		xvid_enc_frame.motion &= ~ME_HIGH;
+		xvid_enc_frame.motion |= motionEstimation;
+
+		if (motionEstimation == ME_NONE)
+			xvid_enc_frame.type = XVID_TYPE_IVOP;
+		else
+			xvid_enc_frame.type = XVID_TYPE_AUTO;
+	}
+}
+
+RateDistortionMode XvidOptions::getRateDistortion(void)
+{
+	RateDistortionMode rateDistortion = RD_NONE;
+
+	if ((xvid_enc_frame.motion & RD_SQUARE) == RD_SQUARE)
+		rateDistortion = RD_SQUARE;
+	else if ((xvid_enc_frame.motion & RD_HPEL_QPEL_8) == RD_HPEL_QPEL_8)
+		rateDistortion = RD_HPEL_QPEL_8;
+	else if ((xvid_enc_frame.motion & RD_HPEL_QPEL_16) == RD_HPEL_QPEL_16)
+		rateDistortion = RD_HPEL_QPEL_16;
+	else if ((xvid_enc_frame.vop_flags & XVID_VOP_MODEDECISION_RD) == XVID_VOP_MODEDECISION_RD)
+		rateDistortion = RD_DCT_ME;
+
+	return rateDistortion;
+}
+
+void XvidOptions::setRateDistortion(RateDistortionMode rateDistortion)
+{
+	if (rateDistortion == RD_NONE || rateDistortion == RD_DCT_ME || rateDistortion == RD_HPEL_QPEL_16 || 
+		rateDistortion == RD_HPEL_QPEL_8 || rateDistortion == RD_SQUARE)
+	{
+		xvid_enc_frame.motion &= ~RD_HPEL_QPEL_16;
+		xvid_enc_frame.motion &= ~RD_HPEL_QPEL_8;
+		xvid_enc_frame.motion &= ~RD_SQUARE;
+
+		if (rateDistortion == RD_NONE)
+			xvid_enc_frame.vop_flags &= ~XVID_VOP_MODEDECISION_RD;
+		else
+		{
+			if (rateDistortion != RD_DCT_ME)
+				xvid_enc_frame.motion |= rateDistortion;
+
+			xvid_enc_frame.vop_flags |= XVID_VOP_MODEDECISION_RD;
+		}
+	}
+}
+
+bool XvidOptions::getBframeRdo(void)
+{
+	return xvid_enc_frame.vop_flags & XVID_VOP_RD_BVOP;
+}
+
+void XvidOptions::setBframeRdo(bool bFrameRdo)
+{
+	if (bFrameRdo)
+		xvid_enc_frame.vop_flags |= XVID_VOP_RD_BVOP;
+	else
+		xvid_enc_frame.vop_flags &= ~XVID_VOP_RD_BVOP;
+}
+
+bool XvidOptions::getChromaMotionEstimation(void)
+{
+	return xvid_enc_frame.motion & CHROMA_ME;
+}
+
+void XvidOptions::setChromaMotionEstimation(bool chromaMotionEstimation)
+{
+	if (chromaMotionEstimation)
+		xvid_enc_frame.motion |= CHROMA_ME;
+	else
+		xvid_enc_frame.motion &= ~CHROMA_ME;
+}
+
+bool XvidOptions::getQpel(void)
+{
+	return xvid_enc_frame.vol_flags & XVID_VOL_QUARTERPEL;
+}
+
+void XvidOptions::setQpel(bool qpel)
+{
+	if (qpel)
+	{
+		xvid_enc_frame.vol_flags |= XVID_VOL_QUARTERPEL;
+		xvid_enc_frame.motion |= XVID_ME_QUARTERPELREFINE16;
+
+		if (getInterMotionVector())
+			xvid_enc_frame.motion |= XVID_ME_QUARTERPELREFINE8;
+	}
+	else
+	{
+		xvid_enc_frame.vol_flags &= ~XVID_VOL_QUARTERPEL;
+		xvid_enc_frame.motion &= ~XVID_ME_QUARTERPELREFINE16;
+		xvid_enc_frame.motion &= ~XVID_ME_QUARTERPELREFINE8;
+	}
+}
+
+bool XvidOptions::getGmc(void)
+{
+	return xvid_enc_frame.vol_flags & XVID_VOL_GMC;
+}
+
+void XvidOptions::setGmc(bool gmc)
+{
+	if (gmc)
+	{
+		xvid_enc_frame.vol_flags |= XVID_VOL_GMC;
+		xvid_enc_frame.motion |= XVID_ME_GME_REFINE;
+	}
+	else
+	{
+		xvid_enc_frame.vol_flags &= ~XVID_VOL_GMC;
+		xvid_enc_frame.motion &= ~XVID_ME_GME_REFINE;
+	}
+}
+
+bool XvidOptions::getTurboMode(void)
+{
+	return xvid_enc_frame.motion & TURBO_MODE;
+}
+
+void XvidOptions::setTurboMode(bool turboMode)
+{
+	if (turboMode)
+		xvid_enc_frame.motion |= TURBO_MODE;
+	else
+		xvid_enc_frame.motion &= ~TURBO_MODE;
+}
+
+bool XvidOptions::getChromaOptimisation(void)
+{
+	return xvid_enc_frame.vop_flags & XVID_VOP_CHROMAOPT;
+}
+
+void XvidOptions::setChromaOptimisation(bool chromaOptimisation)
+{
+	if (chromaOptimisation)
+		xvid_enc_frame.vop_flags |= XVID_VOP_CHROMAOPT;
+	else
+		xvid_enc_frame.vop_flags &= ~XVID_VOP_CHROMAOPT;
+}
+
+bool XvidOptions::getInterMotionVector(void)
+{
+	return xvid_enc_frame.vop_flags & XVID_VOP_INTER4V;
+}
+
+void XvidOptions::setInterMotionVector(bool interMotionVector)
+{
+	if (interMotionVector)
+	{
+		xvid_enc_frame.vop_flags |= XVID_VOP_INTER4V;
+
+		if (getQpel())
+			setQpel(true);
+	}
+	else
+		xvid_enc_frame.vop_flags &= ~XVID_VOP_INTER4V;
+}
+
+bool XvidOptions::getCartoon(void)
+{
+	return xvid_enc_frame.vop_flags & XVID_VOP_CARTOON;
+}
+
+void XvidOptions::setCartoon(bool cartoon)
+{
+	if (cartoon)
+		xvid_enc_frame.vop_flags |= XVID_VOP_CARTOON;
+	else
+		xvid_enc_frame.vop_flags &= ~XVID_VOP_CARTOON;
+}
+
+bool XvidOptions::getGreyscale(void)
+{
+	return xvid_enc_frame.vop_flags & XVID_VOP_GREYSCALE;
+}
+
+void XvidOptions::setGreyscale(bool greyscale)
+{
+	if (greyscale)
+		xvid_enc_frame.vop_flags |= XVID_VOP_GREYSCALE;
+	else
+		xvid_enc_frame.vop_flags &= ~XVID_VOP_GREYSCALE;
+}
+
+InterlacedMode XvidOptions::getInterlaced(void)
+{
+	InterlacedMode interlaced = INTERLACED_NONE;
+
+	if (xvid_enc_frame.vop_flags & XVID_VOP_TOPFIELDFIRST)
+		interlaced = INTERLACED_TFF;
+	else if (xvid_enc_frame.vol_flags & XVID_VOL_INTERLACING)
+		interlaced = INTERLACED_BFF;
+
+	return interlaced;
+}
+
+void XvidOptions::setInterlaced(InterlacedMode interlaced)
+{
+	if (interlaced == INTERLACED_NONE)
+	{
+		xvid_enc_frame.vol_flags &= ~XVID_VOL_INTERLACING;
+		xvid_enc_frame.vop_flags &= ~XVID_VOP_TOPFIELDFIRST;
+	}
+	else if (interlaced == INTERLACED_BFF || interlaced == INTERLACED_TFF)
+	{
+		xvid_enc_frame.vol_flags |= XVID_VOL_INTERLACING;
+
+		if (interlaced == INTERLACED_TFF)
+			xvid_enc_frame.vop_flags |= XVID_VOP_TOPFIELDFIRST;
+		else
+			xvid_enc_frame.vop_flags &= ~XVID_VOP_TOPFIELDFIRST;
+	}
+}
+
+unsigned int XvidOptions::getFrameDropRatio(void)
+{
+	return xvid_enc_create.frame_drop_ratio;
+}
+
+void XvidOptions::setFrameDropRatio(unsigned int frameDropRatio)
+{
+	if (frameDropRatio <= 100)
+		xvid_enc_create.frame_drop_ratio = frameDropRatio;
+}
+
+unsigned int XvidOptions::getMaxKeyInterval(void)
+{
+	return xvid_enc_create.max_key_interval;
+}
+
+void XvidOptions::setMaxKeyInterval(unsigned int maxKeyInterval)
+{
+	xvid_enc_create.max_key_interval = maxKeyInterval;
+}
+
+unsigned int XvidOptions::getMaxBframes(void)
+{
+	return xvid_enc_create.max_bframes;
+}
+
+void XvidOptions::setMaxBframes(unsigned int maxBframes)
+{
+	if (maxBframes <= 20)
+		xvid_enc_create.max_bframes = maxBframes;
+}
+
+int XvidOptions::getBframeSensitivity(void)
+{
+	return xvid_enc_frame.bframe_threshold;
+}
+
+void XvidOptions::setBframeSensitivity(int bFrameSensitivity)
+{
+	if (bFrameSensitivity >= -255 && bFrameSensitivity <= 255)
+		xvid_enc_frame.bframe_threshold = bFrameSensitivity;
+}
+
+bool XvidOptions::getClosedGop(void)
+{
+	return xvid_enc_create.global & XVID_GLOBAL_CLOSED_GOP;
+}
+
+void XvidOptions::setClosedGop(bool closedGop)
+{
+	if (closedGop)
+		xvid_enc_create.global |= XVID_GLOBAL_CLOSED_GOP;
+	else
+		xvid_enc_create.global &= ~XVID_GLOBAL_CLOSED_GOP;
+}
+
+bool XvidOptions::getPacked(void)
+{
+	return xvid_enc_create.global & XVID_GLOBAL_PACKED;
+}
+
+void XvidOptions::setPacked(bool packed)
+{
+	if (packed)
+		xvid_enc_create.global |= XVID_GLOBAL_PACKED;
+	else
+		xvid_enc_create.global &= ~XVID_GLOBAL_PACKED;
+}
+
+void XvidOptions::getMinQuantiser(unsigned int *i, unsigned int *p, unsigned int *b)
+{
+	*i = xvid_enc_create.min_quant[0];
+	*p = xvid_enc_create.min_quant[1];
+	*b = xvid_enc_create.min_quant[2];
+}
+
+void XvidOptions::setMinQuantiser(unsigned int i, unsigned int p, unsigned int b)
+{
+	if (i > 0 && i <= 31)
+		xvid_enc_create.min_quant[0] = i;
+
+	if (p > 0 && p <= 31)
+		xvid_enc_create.min_quant[1] = p;
+
+	if (b > 0 && b <= 31)
+		xvid_enc_create.min_quant[2] = b;
+}
+
+void XvidOptions::getMaxQuantiser(unsigned int *i, unsigned int *p, unsigned int *b)
+{
+	*i = xvid_enc_create.max_quant[0];
+	*p = xvid_enc_create.max_quant[1];
+	*b = xvid_enc_create.max_quant[2];
+}
+
+void XvidOptions::setMaxQuantiser(unsigned int i, unsigned int p, unsigned int b)
+{
+	if (i > 0 && i <= 31)
+		xvid_enc_create.max_quant[0] = i;
+
+	if (p > 0 && p <= 31)
+		xvid_enc_create.max_quant[1] = p;
+
+	if (b > 0 && b <= 31)
+		xvid_enc_create.max_quant[2] = b;
+}
+
+unsigned int XvidOptions::getBframeQuantiserRatio(void)
+{
+	return xvid_enc_create.bquant_ratio;
+}
+
+void XvidOptions::setBframeQuantiserRatio(unsigned int ratio)
+{
+	if (ratio <= 200)
+		xvid_enc_create.bquant_ratio = ratio;
+}
+
+unsigned int XvidOptions::getBframeQuantiserOffset(void)
+{
+	return xvid_enc_create.bquant_offset;
+}
+
+void XvidOptions::setBframeQuantiserOffset(unsigned int offset)
+{
+	if (offset <= 200)
+		xvid_enc_create.bquant_offset = offset;
+}
+
+CqmPresetMode XvidOptions::getCqmPreset(void)
+{
+	return _cqmPreset;
+}
+
+void XvidOptions::setCqmPreset(CqmPresetMode cqmPreset)
+{
+	if (cqmPreset == CQM_H263 || cqmPreset == CQM_MPEG || cqmPreset == CQM_CUSTOM)
+	{
+		_cqmPreset = cqmPreset;
+
+		switch (cqmPreset)
+		{
+			case CQM_MPEG:
+			case CQM_CUSTOM:
+				xvid_enc_frame.vol_flags |= XVID_VOL_MPEGQUANT;
+				break;
+			default:
+				xvid_enc_frame.vol_flags &= ~XVID_VOL_MPEGQUANT;
+		}
+	}
+}
+
+void XvidOptions::getIntraMatrix(unsigned char intra[64])
+{
+	memcpy(intra, _intraMatrix, 64 * sizeof(unsigned char));
+}
+
+void XvidOptions::setIntraMatrix(unsigned char intra[64])
+{
+	memcpy(_intraMatrix, intra, 64 * sizeof(unsigned char));
+}
+
+void XvidOptions::getInterMatrix(unsigned char inter[64])
+{
+	memcpy(inter, _interMatrix, 64 * sizeof(unsigned char));
+}
+
+void XvidOptions::setInterMatrix(unsigned char inter[64])
+{
+	memcpy(_interMatrix, inter, 64 * sizeof(unsigned char));
+}
+
+bool XvidOptions::getTrellis(void)
+{
+	return xvid_enc_frame.vop_flags & XVID_VOP_TRELLISQUANT;
+}
+
+void XvidOptions::setTrellis(bool trellis)
+{
+	if (trellis)
+		xvid_enc_frame.vop_flags |= XVID_VOP_TRELLISQUANT;
+	else
+		xvid_enc_frame.vop_flags &= ~XVID_VOP_TRELLISQUANT;
+}
+
+unsigned int XvidOptions::getReactionDelayFactor(void)
+{
+	return xvid_plugin_single.reaction_delay_factor;
+}
+
+void XvidOptions::setReactionDelayFactor(unsigned int delayFactor)
+{
+	if (delayFactor <= 100)
+		xvid_plugin_single.reaction_delay_factor = delayFactor;
+}
+
+unsigned int XvidOptions::getAveragingQuantiserPeriod(void)
+{
+	return xvid_plugin_single.averaging_period;
+}
+
+void XvidOptions::setAveragingQuantiserPeriod(unsigned int averagingPeriod)
+{
+	xvid_plugin_single.averaging_period = averagingPeriod;
+}
+
+unsigned int XvidOptions::getSmoother(void)
+{
+	return xvid_plugin_single.buffer;
+}
+
+void XvidOptions::setSmoother(unsigned int smoother)
+{
+	xvid_plugin_single.buffer = smoother;
+}
+
+unsigned int XvidOptions::getKeyFrameBoost(void)
+{
+	return xvid_plugin_2pass2.keyframe_boost;
+}
+
+void XvidOptions::setKeyFrameBoost(unsigned int keyFrameBoost)
+{
+	if (keyFrameBoost <= 100)
+		xvid_plugin_2pass2.keyframe_boost = keyFrameBoost;
+}
+
+unsigned int XvidOptions::getMaxKeyFrameReduceBitrate(void)
+{
+	return xvid_plugin_2pass2.kfreduction;
+}
+
+void XvidOptions::setMaxKeyFrameReduceBitrate(unsigned int bitrateReduction)
+{
+	if (bitrateReduction <= 100)
+		xvid_plugin_2pass2.kfreduction = bitrateReduction;
+}
+
+unsigned int XvidOptions::getKeyFrameBitrateThreshold(void)
+{
+	return xvid_plugin_2pass2.kfthreshold;
+}
+
+void XvidOptions::setKeyFrameBitrateThreshold(unsigned int bitrateThreshold)
+{
+	xvid_plugin_2pass2.kfthreshold = bitrateThreshold;
+}
+
+unsigned int XvidOptions::getOverflowControlStrength(void)
+{
+	return xvid_plugin_2pass2.overflow_control_strength;
+}
+
+void XvidOptions::setOverflowControlStrength(unsigned int overflowControlStrength)
+{
+	if (overflowControlStrength <= 100)
+		xvid_plugin_2pass2.overflow_control_strength = overflowControlStrength;
+}
+
+unsigned int XvidOptions::getMaxOverflowImprovement(void)
+{
+	return xvid_plugin_2pass2.max_overflow_improvement;
+}
+
+void XvidOptions::setMaxOverflowImprovement(unsigned int overflowImprovement)
+{
+	if (overflowImprovement <= 100)
+		xvid_plugin_2pass2.max_overflow_improvement = overflowImprovement;
+}
+
+unsigned int XvidOptions::getMaxOverflowDegradation(void)
+{
+	return xvid_plugin_2pass2.max_overflow_degradation;
+}
+
+void XvidOptions::setMaxOverflowDegradation(unsigned int overflowDegradation)
+{
+	if (overflowDegradation <= 100)
+		xvid_plugin_2pass2.max_overflow_degradation = overflowDegradation;
+}
+
+unsigned int XvidOptions::getAboveAverageCurveCompression(void)
+{
+	return xvid_plugin_2pass2.curve_compression_high;
+}
+
+void XvidOptions::setAboveAverageCurveCompression(unsigned int curveCompression)
+{
+	if (curveCompression <= 100)
+		xvid_plugin_2pass2.curve_compression_high = curveCompression;
+}
+
+unsigned int XvidOptions::getBelowAverageCurveCompression(void)
+{
+	return xvid_plugin_2pass2.curve_compression_low;
+}
+
+void XvidOptions::setBelowAverageCurveCompression(unsigned int curveCompression)
+{
+	if (curveCompression <= 100)
+		xvid_plugin_2pass2.curve_compression_low = curveCompression;
+}
+
+unsigned int XvidOptions::getVbvBufferSize(void)
+{
+	return xvid_plugin_2pass2.vbv_size;
+}
+
+void XvidOptions::setVbvBufferSize(unsigned int bufferSize)
+{
+	if (bufferSize <= 6291456)
+	{
+		xvid_plugin_2pass2.vbv_size = bufferSize;
+		xvid_plugin_2pass2.vbv_initial = (bufferSize * 3) >> 2;
+	}
+}
+
+unsigned int XvidOptions::getMaxVbvBitrate(void)
+{
+	return xvid_plugin_2pass2.vbv_maxrate;
+}
+
+void XvidOptions::setMaxVbvBitrate(unsigned int bitrate)
+{
+	if (bitrate <= 9708400)
+		xvid_plugin_2pass2.vbv_maxrate = bitrate;
+}
+
+unsigned int XvidOptions::getVbvPeakBitrate(void)
+{
+	return xvid_plugin_2pass2.vbv_peakrate;
+}
+
+void XvidOptions::setVbvPeakBitrate(unsigned int peakBitrate)
+{
+	if (peakBitrate <= 16000000)
+		xvid_plugin_2pass2.vbv_peakrate = peakBitrate;
+}
+
+void XvidOptions::addOptionsToXml(xmlNodePtr xmlNodeRoot)
+{
+	const int bufferSize = 100;
+	xmlChar xmlBuffer[bufferSize + 1];
+	xmlNodePtr xmlNodeChild, xmlNodeChild2;
+
+	xmlNodeRoot = xmlNewChild(xmlNodeRoot, NULL, (xmlChar*)"XvidOptions", NULL);
+	xmlNewChild(xmlNodeRoot, NULL, (xmlChar*)"threads", number2String(xmlBuffer, bufferSize, getThreads()));
+
+	xmlNodeChild = xmlNewChild(xmlNodeRoot, NULL, (xmlChar*)"vui", NULL);
+	xmlNewChild(xmlNodeChild, NULL, (xmlChar*)"sarAsInput", boolean2String(xmlBuffer, bufferSize, getParAsInput()));
+
+	unsigned int width, height;
+
+	getPar(&width, &height);
+
+	xmlNewChild(xmlNodeChild, NULL, (xmlChar*)"sarHeight", number2String(xmlBuffer, bufferSize, height));
+	xmlNewChild(xmlNodeChild, NULL, (xmlChar*)"sarWidth", number2String(xmlBuffer, bufferSize, width));
+
+	switch (getMotionEstimation())
+	{
+		case ME_LOW:
+			strcpy((char*)xmlBuffer, "low");
+			break;
+		case ME_MEDIUM:
+			strcpy((char*)xmlBuffer, "medium");
+			break;
+		case ME_HIGH:
+			strcpy((char*)xmlBuffer, "high");
+			break;
+		default:
+			strcpy((char*)xmlBuffer, "none");
+			break;
+	}
+
+	xmlNewChild(xmlNodeRoot, NULL, (xmlChar*)"motionEstimation", xmlBuffer);
+
+	switch (getRateDistortion())
+	{
+		case RD_DCT_ME:
+			strcpy((char*)xmlBuffer, "dct");
+			break;
+		case RD_HPEL_QPEL_16:
+			strcpy((char*)xmlBuffer, "hpelQpel16");
+			break;
+		case RD_HPEL_QPEL_8:
+			strcpy((char*)xmlBuffer, "hpelQpel8");
+			break;
+		case RD_SQUARE:
+			strcpy((char*)xmlBuffer, "square");
+			break;
+		default:
+			strcpy((char*)xmlBuffer, "none");
+			break;
+	}
+
+	xmlNewChild(xmlNodeRoot, NULL, (xmlChar*)"rdo", xmlBuffer);
+	xmlNewChild(xmlNodeRoot, NULL, (xmlChar*)"bFrameRdo", boolean2String(xmlBuffer, bufferSize, getBframeRdo()));
+	xmlNewChild(xmlNodeRoot, NULL, (xmlChar*)"chromaMotionEstimation", boolean2String(xmlBuffer, bufferSize, getChromaMotionEstimation()));
+	xmlNewChild(xmlNodeRoot, NULL, (xmlChar*)"qPel", boolean2String(xmlBuffer, bufferSize, getQpel()));
+	xmlNewChild(xmlNodeRoot, NULL, (xmlChar*)"gmc", boolean2String(xmlBuffer, bufferSize, getGmc()));
+	xmlNewChild(xmlNodeRoot, NULL, (xmlChar*)"turboMode", boolean2String(xmlBuffer, bufferSize, getTurboMode()));
+	xmlNewChild(xmlNodeRoot, NULL, (xmlChar*)"chromaOptimiser", boolean2String(xmlBuffer, bufferSize, getChromaOptimisation()));
+	xmlNewChild(xmlNodeRoot, NULL, (xmlChar*)"fourMv", boolean2String(xmlBuffer, bufferSize, getInterMotionVector()));
+	xmlNewChild(xmlNodeRoot, NULL, (xmlChar*)"cartoon", boolean2String(xmlBuffer, bufferSize, getCartoon()));
+	xmlNewChild(xmlNodeRoot, NULL, (xmlChar*)"greyscale", boolean2String(xmlBuffer, bufferSize, getGreyscale()));
+
+	switch (getInterlaced())
+	{
+		case INTERLACED_BFF:
+			strcpy((char*)xmlBuffer, "bff");
+			break;
+		case INTERLACED_TFF:
+			strcpy((char*)xmlBuffer, "tff");
+			break;
+		default:
+			strcpy((char*)xmlBuffer, "none");
+			break;
+	}
+
+	xmlNewChild(xmlNodeRoot, NULL, (xmlChar*)"interlaced", xmlBuffer);
+	xmlNewChild(xmlNodeRoot, NULL, (xmlChar*)"frameDropRatio", number2String(xmlBuffer, bufferSize, getFrameDropRatio()));
+	xmlNewChild(xmlNodeRoot, NULL, (xmlChar*)"maxIframeInterval", number2String(xmlBuffer, bufferSize, getMaxKeyInterval()));
+	xmlNewChild(xmlNodeRoot, NULL, (xmlChar*)"maxBframes", number2String(xmlBuffer, bufferSize, getMaxBframes()));
+	xmlNewChild(xmlNodeRoot, NULL, (xmlChar*)"bFrameSensitivity", number2String(xmlBuffer, bufferSize, getBframeSensitivity()));
+	xmlNewChild(xmlNodeRoot, NULL, (xmlChar*)"closedGop", boolean2String(xmlBuffer, bufferSize, getClosedGop()));
+	xmlNewChild(xmlNodeRoot, NULL, (xmlChar*)"packed", boolean2String(xmlBuffer, bufferSize, getPacked()));
+
+	unsigned int minI, minP, minB;
+	unsigned int maxI, maxP, maxB;
+
+	getMinQuantiser(&minI, &minP, &minB);
+	getMaxQuantiser(&maxI, &maxP, &maxB);
+
+	xmlNewChild(xmlNodeRoot, NULL, (xmlChar*)"quantImin", number2String(xmlBuffer, bufferSize, minI));
+	xmlNewChild(xmlNodeRoot, NULL, (xmlChar*)"quantPmin", number2String(xmlBuffer, bufferSize, minP));
+	xmlNewChild(xmlNodeRoot, NULL, (xmlChar*)"quantBmin", number2String(xmlBuffer, bufferSize, minB));
+	xmlNewChild(xmlNodeRoot, NULL, (xmlChar*)"quantImax", number2String(xmlBuffer, bufferSize, maxI));
+	xmlNewChild(xmlNodeRoot, NULL, (xmlChar*)"quantPmax", number2String(xmlBuffer, bufferSize, maxP));
+	xmlNewChild(xmlNodeRoot, NULL, (xmlChar*)"quantBmax", number2String(xmlBuffer, bufferSize, maxB));
+	xmlNewChild(xmlNodeRoot, NULL, (xmlChar*)"quantBratio", number2String(xmlBuffer, bufferSize, getBframeQuantiserRatio()));
+	xmlNewChild(xmlNodeRoot, NULL, (xmlChar*)"quantBoffset", number2String(xmlBuffer, bufferSize, getBframeQuantiserOffset()));
+
+	switch (getCqmPreset())
+	{
+		case CQM_H263:
+			strcpy((char*)xmlBuffer, "h.263");
+			break;
+		case CQM_MPEG:
+			strcpy((char*)xmlBuffer, "mpeg");
+			break;
+		case CQM_CUSTOM:
+			strcpy((char*)xmlBuffer, "custom");
+			break;
+	}
+
+	xmlNewChild(xmlNodeRoot, NULL, (xmlChar*)"quantType", xmlBuffer);
+
+	xmlNodeChild = xmlNewChild(xmlNodeRoot, NULL, (xmlChar*)"intraMatrix", NULL);
+
+	for (int i = 0; i < 64; i++)
+		xmlNewChild(xmlNodeChild, NULL, (xmlChar*)"value", number2String(xmlBuffer, bufferSize, _intraMatrix[i]));
+
+	xmlNodeChild = xmlNewChild(xmlNodeRoot, NULL, (xmlChar*)"interMatrix", NULL);
+
+	for (int i = 0; i < 64; i++)
+		xmlNewChild(xmlNodeChild, NULL, (xmlChar*)"value", number2String(xmlBuffer, bufferSize, _interMatrix[i]));
+
+	xmlNewChild(xmlNodeRoot, NULL, (xmlChar*)"trellis", boolean2String(xmlBuffer, bufferSize, getTrellis()));
+
+	xmlNodeChild = xmlNewChild(xmlNodeRoot, NULL, (xmlChar*)"singlePass", NULL);
+	xmlNewChild(xmlNodeChild, NULL, (xmlChar*)"reactionDelayFactor", number2String(xmlBuffer, bufferSize, getReactionDelayFactor()));
+	xmlNewChild(xmlNodeChild, NULL, (xmlChar*)"averagingQuantiserPeriod", number2String(xmlBuffer, bufferSize, getAveragingQuantiserPeriod()));
+	xmlNewChild(xmlNodeChild, NULL, (xmlChar*)"smoother", number2String(xmlBuffer, bufferSize, getSmoother()));
+
+	xmlNodeChild = xmlNewChild(xmlNodeRoot, NULL, (xmlChar*)"twoPass", NULL);
+	xmlNewChild(xmlNodeChild, NULL, (xmlChar*)"keyFrameBoost", number2String(xmlBuffer, bufferSize, getKeyFrameBoost()));
+	xmlNewChild(xmlNodeChild, NULL, (xmlChar*)"maxKeyFrameReduceBitrate", number2String(xmlBuffer, bufferSize, getMaxKeyFrameReduceBitrate()));
+	xmlNewChild(xmlNodeChild, NULL, (xmlChar*)"keyFrameBitrateThreshold", number2String(xmlBuffer, bufferSize, getKeyFrameBitrateThreshold()));
+	xmlNewChild(xmlNodeChild, NULL, (xmlChar*)"overflowControlStrength", number2String(xmlBuffer, bufferSize, getOverflowControlStrength()));
+	xmlNewChild(xmlNodeChild, NULL, (xmlChar*)"maxOverflowImprovement", number2String(xmlBuffer, bufferSize, getMaxOverflowImprovement()));
+	xmlNewChild(xmlNodeChild, NULL, (xmlChar*)"maxOverflowDegradation", number2String(xmlBuffer, bufferSize, getMaxOverflowDegradation()));
+	xmlNewChild(xmlNodeChild, NULL, (xmlChar*)"aboveAverageCurveCompression", number2String(xmlBuffer, bufferSize, getAboveAverageCurveCompression()));
+	xmlNewChild(xmlNodeChild, NULL, (xmlChar*)"belowAverageCurveCompression", number2String(xmlBuffer, bufferSize, getBelowAverageCurveCompression()));
+	xmlNewChild(xmlNodeChild, NULL, (xmlChar*)"vbvBufferSize", number2String(xmlBuffer, bufferSize, getVbvBufferSize()));
+	xmlNewChild(xmlNodeChild, NULL, (xmlChar*)"maxVbvBitrate", number2String(xmlBuffer, bufferSize, getMaxVbvBitrate()));
+	xmlNewChild(xmlNodeChild, NULL, (xmlChar*)"vbvPeakBitrate", number2String(xmlBuffer, bufferSize, getVbvPeakBitrate()));
+}
+
+void XvidOptions::parseOptions(xmlNode *node)
+{
+	int minI = -1, minP = -1, minB = -1;
+	int maxI = -1, maxP = -1, maxB = -1;
+
+	for (xmlNode *xmlChild = node->children; xmlChild; xmlChild = xmlChild->next)
+	{
+		if (xmlChild->type == XML_ELEMENT_NODE)
+		{
+			char *content = (char*)xmlNodeGetContent(xmlChild);
+
+			if (strcmp((char*)xmlChild->name, "threads") == 0)
+				setThreads(atoi(content));
+			else if (strcmp((char*)xmlChild->name, "vui") == 0)
+				parseVuiOptions(xmlChild);
+			else if (strcmp((char*)xmlChild->name, "motionEstimation") == 0)
+			{
+				MotionEstimationMode motionEstimation = ME_NONE;
+
+				if (strcmp(content, "low") == 0)
+					motionEstimation = ME_LOW;
+				else if (strcmp(content, "medium") == 0)
+					motionEstimation = ME_MEDIUM;
+				else if (strcmp(content, "high") == 0)
+					motionEstimation = ME_HIGH;
+
+				setMotionEstimation(motionEstimation);
+			}
+			else if (strcmp((char*)xmlChild->name, "rdo") == 0)
+			{
+				RateDistortionMode rateDistortion = RD_NONE;
+
+				if (strcmp(content, "dct") == 0)
+					rateDistortion = RD_DCT_ME;
+				else if (strcmp(content, "hpelQpel16") == 0)
+					rateDistortion = RD_HPEL_QPEL_16;
+				else if (strcmp(content, "hpelQpel8") == 0)
+					rateDistortion = RD_HPEL_QPEL_8;
+				else if (strcmp(content, "square") == 0)
+					rateDistortion = RD_SQUARE;
+
+				setRateDistortion(rateDistortion);
+			}
+			else if (strcmp((char*)xmlChild->name, "bFrameRdo") == 0)
+				setBframeRdo(string2Boolean(content));
+			else if (strcmp((char*)xmlChild->name, "chromaMotionEstimation") == 0)
+				setChromaMotionEstimation(string2Boolean(content));
+			else if (strcmp((char*)xmlChild->name, "qPel") == 0)
+				setQpel(string2Boolean(content));
+			else if (strcmp((char*)xmlChild->name, "gmc") == 0)
+				setGmc(string2Boolean(content));
+			else if (strcmp((char*)xmlChild->name, "turboMode") == 0)
+				setTurboMode(string2Boolean(content));
+			else if (strcmp((char*)xmlChild->name, "chromaOptimiser") == 0)
+				setChromaOptimisation(string2Boolean(content));
+			else if (strcmp((char*)xmlChild->name, "fourMv") == 0)
+				setInterMotionVector(string2Boolean(content));
+			else if (strcmp((char*)xmlChild->name, "cartoon") == 0)
+				setCartoon(string2Boolean(content));
+			else if (strcmp((char*)xmlChild->name, "greyscale") == 0)
+				setGreyscale(string2Boolean(content));
+			else if (strcmp((char*)xmlChild->name, "interlaced") == 0)
+			{
+				InterlacedMode interlaced = INTERLACED_NONE;
+
+				if (strcmp(content, "bff") == 0)
+					interlaced = INTERLACED_BFF;
+				else if (strcmp(content, "tff") == 0)
+					interlaced = INTERLACED_TFF;
+
+				setInterlaced(interlaced);
+			}
+			else if (strcmp((char*)xmlChild->name, "frameDropRatio") == 0)
+				setFrameDropRatio(atoi(content));
+			else if (strcmp((char*)xmlChild->name, "maxIframeInterval") == 0)
+				setMaxKeyInterval(atoi(content));
+			else if (strcmp((char*)xmlChild->name, "maxBframes") == 0)
+				setMaxBframes(atoi(content));
+			else if (strcmp((char*)xmlChild->name, "bFrameSensitivity") == 0)
+				setBframeSensitivity(atoi(content));
+			else if (strcmp((char*)xmlChild->name, "closedGop") == 0)
+				setClosedGop(string2Boolean(content));
+			else if (strcmp((char*)xmlChild->name, "packed") == 0)
+				setPacked(string2Boolean(content));
+			else if (strcmp((char*)xmlChild->name, "quantImin") == 0)
+				minI = atoi(content);
+			else if (strcmp((char*)xmlChild->name, "quantPmin") == 0)
+				minP = atoi(content);
+			else if (strcmp((char*)xmlChild->name, "quantBmin") == 0)
+				minB = atoi(content);
+			else if (strcmp((char*)xmlChild->name, "quantImax") == 0)
+				maxI = atoi(content);
+			else if (strcmp((char*)xmlChild->name, "quantPmax") == 0)
+				maxP = atoi(content);
+			else if (strcmp((char*)xmlChild->name, "quantBmax") == 0)
+				maxB = atoi(content);
+			else if (strcmp((char*)xmlChild->name, "quantBratio") == 0)
+				setBframeQuantiserRatio(atoi(content));
+			else if (strcmp((char*)xmlChild->name, "quantBoffset") == 0)
+				setBframeQuantiserOffset(atoi(content));
+			else if (strcmp((char*)xmlChild->name, "quantType") == 0)
+			{
+				if (strcmp(content, "mpeg") == 0)
+					setCqmPreset(CQM_MPEG);
+				else if (strcmp(content, "custom") == 0)
+					setCqmPreset(CQM_CUSTOM);
+				else
+					setCqmPreset(CQM_H263);
+			}
+			else if (strcmp((char*)xmlChild->name, "intraMatrix") == 0)
+			{
+				unsigned char intraMatrix[64];
+
+				parseCqmOption(xmlChild, intraMatrix);
+				setIntraMatrix(intraMatrix);
+			}
+			else if (strcmp((char*)xmlChild->name, "interMatrix") == 0)
+			{
+				unsigned char interMatrix[64];
+
+				parseCqmOption(xmlChild, interMatrix);
+				setInterMatrix(interMatrix);
+			}
+			else if (strcmp((char*)xmlChild->name, "trellis") == 0)
+				setTrellis(string2Boolean(content));
+			else if (strcmp((char*)xmlChild->name, "singlePass") == 0)
+				parseSinglePassOptions(xmlChild);
+			else if (strcmp((char*)xmlChild->name, "twoPass") == 0)
+				parseTwoPassOptions(xmlChild);
+
+			xmlFree(content);
+		}
+	}
+
+	if (minI != -1 && minP != -1 && minB != -1)
+		setMinQuantiser(minI, minP, minB);
+
+	if (maxI != -1 && maxP != -1 && maxB != -1)
+		setMaxQuantiser(maxI, maxP, maxB);
+}
+
+void XvidOptions::parseVuiOptions(xmlNode *node)
+{
+	unsigned int width = 0, height = 0;
+
+	for (xmlNode *xmlChild = node->children; xmlChild; xmlChild = xmlChild->next)
+	{
+		if (xmlChild->type == XML_ELEMENT_NODE)
+		{
+			char *content = (char*)xmlNodeGetContent(xmlChild);
+
+			if (strcmp((char*)xmlChild->name, "sarAsInput") == 0)
+				setParAsInput(string2Boolean(content));
+			else if (strcmp((char*)xmlChild->name, "sarHeight") == 0)
+				height = atoi(content);
+			else if (strcmp((char*)xmlChild->name, "sarWidth") == 0)
+				width = atoi(content);
+
+			xmlFree(content);
+		}
+	}
+
+	setPar(width, height);
+}
+
+void XvidOptions::parseCqmOption(xmlNode *node, unsigned char matrix[])
+{
+	int index = 0;
+
+	for (xmlNode *xmlChild = node->children; xmlChild; xmlChild = xmlChild->next)
+	{
+		if (xmlChild->type == XML_ELEMENT_NODE)
+		{
+			char *content = (char*)xmlNodeGetContent(xmlChild);
+
+			matrix[index] = atoi(content);
+			index++;
+
+			xmlFree(content);
+		}
+	}
+}
+
+void XvidOptions::parseSinglePassOptions(xmlNode *node)
+{
+	for (xmlNode *xmlChild = node->children; xmlChild; xmlChild = xmlChild->next)
+	{
+		if (xmlChild->type == XML_ELEMENT_NODE)
+		{
+			char *content = (char*)xmlNodeGetContent(xmlChild);
+
+			if (strcmp((char*)xmlChild->name, "reactionDelayFactor") == 0)
+				setReactionDelayFactor(atoi(content));
+			else if (strcmp((char*)xmlChild->name, "averagingQuantiserPeriod") == 0)
+				setAveragingQuantiserPeriod(atoi(content));
+			else if (strcmp((char*)xmlChild->name, "smoother") == 0)
+				setSmoother(atoi(content));
+
+			xmlFree(content);
+		}
+	}
+}
+
+void XvidOptions::parseTwoPassOptions(xmlNode *node)
+{
+	for (xmlNode *xmlChild = node->children; xmlChild; xmlChild = xmlChild->next)
+	{
+		if (xmlChild->type == XML_ELEMENT_NODE)
+		{
+			char *content = (char*)xmlNodeGetContent(xmlChild);
+
+			if (strcmp((char*)xmlChild->name, "keyFrameBoost") == 0)
+				setKeyFrameBoost(atoi(content));
+			else if (strcmp((char*)xmlChild->name, "maxKeyFrameReduceBitrate") == 0)
+				setMaxKeyFrameReduceBitrate(atoi(content));
+			else if (strcmp((char*)xmlChild->name, "keyFrameBitrateThreshold") == 0)
+				setKeyFrameBitrateThreshold(atoi(content));
+			else if (strcmp((char*)xmlChild->name, "overflowControlStrength") == 0)
+				setOverflowControlStrength(atoi(content));
+			else if (strcmp((char*)xmlChild->name, "maxOverflowImprovement") == 0)
+				setMaxOverflowImprovement(atoi(content));
+			else if (strcmp((char*)xmlChild->name, "maxOverflowDegradation") == 0)
+				setMaxOverflowDegradation(atoi(content));
+			else if (strcmp((char*)xmlChild->name, "aboveAverageCurveCompression") == 0)
+				setAboveAverageCurveCompression(atoi(content));
+			else if (strcmp((char*)xmlChild->name, "belowAverageCurveCompression") == 0)
+				setBelowAverageCurveCompression(atoi(content));
+			else if (strcmp((char*)xmlChild->name, "vbvBufferSize") == 0)
+				setVbvBufferSize(atoi(content));
+			else if (strcmp((char*)xmlChild->name, "maxVbvBitrate") == 0)
+				setMaxVbvBitrate(atoi(content));
+			else if (strcmp((char*)xmlChild->name, "vbvPeakBitrate") == 0)
+				setVbvPeakBitrate(atoi(content));
+
+			xmlFree(content);
+		}
+	}
+}

Copied: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_xvid/xvidOptions.h (from rev 5002, branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_xvid/options.h)
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_xvid/options.h	2009-07-06 05:48:05 UTC (rev 5002)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_xvid/xvidOptions.h	2009-07-09 10:48:18 UTC (rev 5026)
@@ -0,0 +1,221 @@
+/***************************************************************************
+                                XvidOptions.h
+
+    begin                : Fri Jun 13 2008
+    copyright            : (C) 2008 by gruntster
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+
+#ifndef xvidOptions_h
+#define xvidOptions_h
+
+#include <libxml/tree.h>
+#include "xvid.h"
+#include "PluginOptions.h"
+
+extern "C"
+{
+#include "ADM_vidEnc_plugin.h"
+}
+
+#define DEFAULT_ENCODE_MODE	(ADM_VIDENC_MODE_CQP)
+#define DEFAULT_ENCODE_MODE_PARAMETER (4)
+#define TURBO_MODE (XVID_ME_FASTREFINE16 | XVID_ME_FASTREFINE8 | XVID_ME_SKIP_DELTASEARCH | XVID_ME_FAST_MODEINTERPOLATE | XVID_ME_BFRAME_EARLYSTOP)
+#define CHROMA_ME (XVID_ME_CHROMA_PVOP | XVID_ME_CHROMA_BVOP)
+
+typedef enum
+{
+	ME_NONE = 0,
+	ME_LOW = XVID_ME_HALFPELREFINE16,	
+	ME_MEDIUM = XVID_ME_HALFPELREFINE16 | XVID_ME_ADVANCEDDIAMOND16,	
+	ME_HIGH = XVID_ME_HALFPELREFINE16 | XVID_ME_EXTSEARCH16 | XVID_ME_HALFPELREFINE8 | XVID_ME_USESQUARES16
+} MotionEstimationMode;
+
+typedef enum
+{
+	INTERLACED_NONE,
+	INTERLACED_BFF,
+	INTERLACED_TFF
+} InterlacedMode;
+
+typedef enum
+{
+	RD_NONE = -1,
+	RD_DCT_ME = 0,
+	RD_HPEL_QPEL_16 = RD_DCT_ME | XVID_ME_HALFPELREFINE16_RD | XVID_ME_QUARTERPELREFINE16_RD,
+	RD_HPEL_QPEL_8 = RD_HPEL_QPEL_16 | XVID_ME_HALFPELREFINE8_RD | XVID_ME_QUARTERPELREFINE8_RD | XVID_ME_CHECKPREDICTION_RD,
+	RD_SQUARE = RD_HPEL_QPEL_8 | XVID_ME_EXTSEARCH_RD
+} RateDistortionMode;
+
+typedef enum
+{
+	CQM_H263,
+	CQM_MPEG,
+	CQM_CUSTOM
+} CqmPresetMode;
+
+class XvidOptions : public PluginOptions
+{
+protected:
+	xvid_enc_create_t xvid_enc_create;
+	xvid_enc_frame_t xvid_enc_frame;
+	xvid_plugin_single_t xvid_plugin_single;
+	xvid_plugin_2pass2_t xvid_plugin_2pass2;
+
+	bool _parAsInput;
+	CqmPresetMode _cqmPreset;
+	unsigned char _intraMatrix[64], _interMatrix[64];
+
+	void addOptionsToXml(xmlNodePtr xmlNodeRoot);
+	void parseOptions(xmlNode *node);
+	void parseVuiOptions(xmlNode *node);
+	void parseCqmOption(xmlNode *node, unsigned char matrix[]);
+	void parseSinglePassOptions(xmlNode *node);
+	void parseTwoPassOptions(xmlNode *node);
+
+public:
+	XvidOptions(void);
+	void reset(void);
+
+	void getParameters(xvid_enc_create_t **xvid_enc_create, xvid_enc_frame_t **xvid_enc_frame,
+		xvid_plugin_single_t **xvid_plugin_single, xvid_plugin_2pass2_t **xvid_plugin_2pass2);
+
+	unsigned int getThreads(void);
+	void setThreads(unsigned int threads);
+
+	bool getParAsInput(void);
+	void setParAsInput(bool parAsInput);
+
+	void getPar(unsigned int *width, unsigned int *height);
+	void setPar(unsigned int width, unsigned int height);
+
+	MotionEstimationMode getMotionEstimation(void);
+	void setMotionEstimation(MotionEstimationMode motionEstimation);
+
+	RateDistortionMode getRateDistortion(void);
+	void setRateDistortion(RateDistortionMode rateDistortion);
+
+	bool getBframeRdo(void);
+	void setBframeRdo(bool bFrameRdo);
+
+	bool getChromaMotionEstimation(void);
+	void setChromaMotionEstimation(bool chromaMotionEstimation);
+
+	bool getQpel(void);
+	void setQpel(bool qpel);
+
+	bool getGmc(void);
+	void setGmc(bool gmc);
+
+	bool getTurboMode(void);
+	void setTurboMode(bool turboMode);
+
+	bool getChromaOptimisation(void);
+	void setChromaOptimisation(bool chromaOptimisation);
+
+	bool getInterMotionVector(void);
+	void setInterMotionVector(bool interMotionVector);
+
+	bool getCartoon(void);
+	void setCartoon(bool cartoon);
+
+	bool getGreyscale(void);
+	void setGreyscale(bool greyscale);
+
+	InterlacedMode getInterlaced(void);
+	void setInterlaced(InterlacedMode interlaced);
+
+	unsigned int getFrameDropRatio(void);
+	void setFrameDropRatio(unsigned int frameDropRatio);
+
+	unsigned int getMaxKeyInterval(void);
+	void setMaxKeyInterval(unsigned int maxKeyInterval);
+
+	unsigned int getMaxBframes(void);
+	void setMaxBframes(unsigned int maxBFrames);
+
+	int getBframeSensitivity(void);
+	void setBframeSensitivity(int bFrameSensitivity);
+
+	bool getClosedGop(void);
+	void setClosedGop(bool closedGop);
+
+	bool getPacked(void);
+	void setPacked(bool packed);
+
+	void getMinQuantiser(unsigned int *i, unsigned int *p, unsigned int *b);
+	void setMinQuantiser(unsigned int i, unsigned int p, unsigned int b);
+
+	void getMaxQuantiser(unsigned int *i, unsigned int *p, unsigned int *b);
+	void setMaxQuantiser(unsigned int i, unsigned int p, unsigned int b);
+
+	unsigned int getBframeQuantiserRatio(void);
+	void setBframeQuantiserRatio(unsigned int ratio);
+
+	unsigned int getBframeQuantiserOffset(void);
+	void setBframeQuantiserOffset(unsigned int offset);
+
+	CqmPresetMode getCqmPreset(void);
+	void setCqmPreset(CqmPresetMode cqmPreset);
+
+	void getIntraMatrix(unsigned char intra[64]);
+	void setIntraMatrix(unsigned char intra[64]);
+
+	void getInterMatrix(unsigned char inter[64]);
+	void setInterMatrix(unsigned char inter[64]);
+
+	bool getTrellis(void);
+	void setTrellis(bool trellis);
+
+	unsigned int getReactionDelayFactor(void);
+	void setReactionDelayFactor(unsigned int delayFactor);
+
+	unsigned int getAveragingQuantiserPeriod(void);
+	void setAveragingQuantiserPeriod(unsigned int averagingPeriod);
+
+	unsigned int getSmoother(void);
+	void setSmoother(unsigned int smoother);
+
+	unsigned int getKeyFrameBoost(void);
+	void setKeyFrameBoost(unsigned int keyFrameBoost);
+
+	unsigned int getMaxKeyFrameReduceBitrate(void);
+	void setMaxKeyFrameReduceBitrate(unsigned int bitrateReduction);
+
+	unsigned int getKeyFrameBitrateThreshold(void);
+	void setKeyFrameBitrateThreshold(unsigned int bitrateThreshold);
+
+	unsigned int getOverflowControlStrength(void);
+	void setOverflowControlStrength(unsigned int overflowControlStrength);
+
+	unsigned int getMaxOverflowImprovement(void);
+	void setMaxOverflowImprovement(unsigned int overflowImprovement);
+
+	unsigned int getMaxOverflowDegradation(void);
+	void setMaxOverflowDegradation(unsigned int overflowDegradation);
+
+	unsigned int getAboveAverageCurveCompression(void);
+	void setAboveAverageCurveCompression(unsigned int curveCompression);
+
+	unsigned int getBelowAverageCurveCompression(void);
+	void setBelowAverageCurveCompression(unsigned int curveCompression);
+
+	unsigned int getVbvBufferSize(void);
+	void setVbvBufferSize(unsigned int bufferSize);
+
+	unsigned int getMaxVbvBitrate(void);
+	void setMaxVbvBitrate(unsigned int bitrate);
+
+	unsigned int getVbvPeakBitrate(void);
+	void setVbvPeakBitrate(unsigned int peakBitrate);
+};
+
+#endif	// xvidOptions_h



From gruntster at mail.berlios.de  Thu Jul  9 16:08:19 2009
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Thu, 9 Jul 2009 16:08:19 +0200
Subject: [Avidemux-svn-commit] r5027 - in
	branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder:
	ADM_vidEnc_avcodec ADM_vidEnc_xvid
Message-ID: <200907091408.n69E8JOx030371@sheep.berlios.de>

Author: gruntster
Date: 2009-07-09 16:08:12 +0200 (Thu, 09 Jul 2009)
New Revision: 5027

Added:
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/Mpeg1Param.xsd
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/mpeg1Encoder.cpp
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/mpeg1Encoder.h
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/mpeg1EncoderOptions.cpp
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/mpeg1EncoderOptions.h
Modified:
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/encoder.cpp
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/interface.c
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_xvid/xvidOptions.cpp
Log:
[vidEnc] MPEG-1 encoder plugin (incomplete)

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/CMakeLists.txt	2009-07-09 10:48:18 UTC (rev 5026)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/CMakeLists.txt	2009-07-09 14:08:12 UTC (rev 5027)
@@ -1,3 +1,4 @@
+INCLUDE(admCheckLibxml2)
 INCLUDE(admPluginVideoEncoder)
 INCLUDE(admFFmpegUtil)
 
@@ -7,6 +8,15 @@
 	set(FFMPEG_INSTALL_DIR ${AVIDEMUX_INSTALL_PREFIX}/lib)
 endif (WIN32)
 
+SET(PLUGIN_SUBDIR "avcodec")
+SET(ADM_vidEnc_avcodec_SRCS  interface.c  encoder.cpp  ../common/PluginOptions.cpp  huffyuvEncoder.cpp
+							 ffvhuffEncoder.cpp  ffv1Encoder.cpp  dvEncoder.cpp  mpeg1Encoder.cpp
+							 mpeg1EncoderOptions.cpp)
+
+CONFIGURE_FILE("${CMAKE_CURRENT_SOURCE_DIR}/config.h.cmake" "${CMAKE_CURRENT_BINARY_DIR}/config.h")
+INCLUDE_DIRECTORIES(${CMAKE_CURRENT_BINARY_DIR} ${LIBXML2_INCLUDE_DIR})
+ADD_DEFINITIONS(${LIBXML2_DEFINITIONS})
+
 getFfmpegLibNames(${AVIDEMUX_SOURCE_DIR}/avidemux/ADM_libraries/ffmpeg)
 
 add_library(ADM_libavcodec UNKNOWN IMPORTED)
@@ -15,11 +25,9 @@
 add_library(ADM_libswscale UNKNOWN IMPORTED)
 set_property(TARGET ADM_libswscale PROPERTY IMPORTED_LOCATION "${FFMPEG_INSTALL_DIR}/${LIBSWSCALE_LIB}")
 
-SET(PLUGIN_SUBDIR "avcodec")
-SET(ADM_vidEnc_avcodec_SRCS interface.c encoder.cpp huffyuvEncoder.cpp ffvhuffEncoder.cpp ffv1Encoder.cpp dvEncoder.cpp)
-
 ADD_LIBRARY(ADM_vidEnc_avcodec SHARED ${ADM_vidEnc_avcodec_SRCS})
-TARGET_LINK_LIBRARIES(ADM_vidEnc_avcodec ADM_core ADM_coreUI ADM_libavcodec ADM_libswscale)
+TARGET_LINK_LIBRARIES(ADM_vidEnc_avcodec ${LIBXML2_LIBRARIES} ADM_core ADM_coreUI ADM_libavcodec ADM_libswscale)
 
 INIT_VIDEO_ENCODER_PLUGIN(ADM_vidEnc_avcodec)
-INSTALL_VIDEO_ENCODER(ADM_vidEnc_avcodec)
\ No newline at end of file
+INSTALL_VIDEO_ENCODER(ADM_vidEnc_avcodec)
+INSTALL(FILES Mpeg1Param.xsd DESTINATION "${VIDENC_INSTALL_DIR}${PLUGIN_SUBDIR}")
\ No newline at end of file

Added: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/Mpeg1Param.xsd
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/Mpeg1Param.xsd	2009-07-09 10:48:18 UTC (rev 5026)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/Mpeg1Param.xsd	2009-07-09 14:08:12 UTC (rev 5027)
@@ -0,0 +1,105 @@
+<?xml version="1.0" encoding="utf-8"?>
+<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema" elementFormDefault="qualified">
+  <xs:element name="Mpeg1Config">
+    <xs:complexType>
+      <xs:sequence>
+        <xs:element name="presetConfiguration" minOccurs="0">
+          <xs:complexType>
+            <xs:sequence>
+              <xs:element name="name" type="xs:string"/>
+              <xs:element name="type">
+                <xs:simpleType>
+                  <xs:restriction base="xs:string">
+                    <xs:enumeration value="default"/>
+                    <xs:enumeration value="user"/>
+                    <xs:enumeration value="system"/>
+                  </xs:restriction>
+                </xs:simpleType>
+              </xs:element>
+            </xs:sequence>
+          </xs:complexType>
+        </xs:element>
+        <xs:element name="encodeOptions" minOccurs="0">
+          <xs:complexType>
+            <xs:sequence>
+              <xs:element name="mode">
+                <xs:simpleType>
+                  <xs:restriction base="xs:string">
+                    <xs:enumeration value="CQP"/>
+                    <xs:enumeration value="2PASS SIZE"/>
+                    <xs:enumeration value="2PASS ABR"/>
+                  </xs:restriction>
+                </xs:simpleType>
+              </xs:element>
+              <xs:element name="parameter" type="uint"/>
+            </xs:sequence>
+          </xs:complexType>
+        </xs:element>
+        <xs:element name="Mpeg1Options">
+          <xs:complexType>
+            <xs:sequence>
+              <xs:element name="minBitrate" minOccurs="0">
+                <xs:simpleType>
+                  <xs:restriction base="xs:integer">
+                    <xs:minInclusive value="0"/>
+                    <xs:maxInclusive value="9000"/>
+                  </xs:restriction>
+                </xs:simpleType>
+              </xs:element>
+              <xs:element name="maxBitrate" minOccurs="0">
+                <xs:simpleType>
+                  <xs:restriction base="xs:integer">
+                    <xs:minInclusive value="100"/>
+                    <xs:maxInclusive value="9000"/>
+                  </xs:restriction>
+                </xs:simpleType>
+              </xs:element>
+              <xs:element name="xvidRateControl" type="xs:boolean" minOccurs="0"/>
+              <xs:element name="bufferSize" minOccurs="0">
+                <xs:simpleType>
+                  <xs:restriction base="xs:integer">
+                    <xs:minInclusive value="1"/>
+                    <xs:maxInclusive value="1024"/>
+                  </xs:restriction>
+                </xs:simpleType>
+              </xs:element>
+              <xs:element name="widescreen" type="xs:boolean" minOccurs="0"/>
+              <xs:element name="interlaced" minOccurs="0">
+                <xs:simpleType>
+                  <xs:restriction base="xs:string">
+                    <xs:enumeration value="none"/>
+                    <xs:enumeration value="bff"/>
+                    <xs:enumeration value="tff"/>
+                  </xs:restriction>
+                </xs:simpleType>
+              </xs:element>
+              <xs:element name="matrix" minOccurs="0">
+                <xs:simpleType>
+                  <xs:restriction base="xs:string">
+                    <xs:enumeration value="default"/>
+                    <xs:enumeration value="tmpgenc"/>
+                    <xs:enumeration value="anime"/>
+                    <xs:enumeration value="kvcd"/>
+                  </xs:restriction>
+                </xs:simpleType>
+              </xs:element>
+              <xs:element name="gopSize" minOccurs="0">
+                <xs:simpleType>
+                  <xs:restriction base="xs:integer">
+                    <xs:minInclusive value="1"/>
+                    <xs:maxInclusive value="30"/>
+                  </xs:restriction>
+                </xs:simpleType>
+              </xs:element>
+            </xs:sequence>
+          </xs:complexType>
+        </xs:element>
+      </xs:sequence>
+    </xs:complexType>
+  </xs:element>
+  <xs:simpleType name="uint">
+    <xs:restriction base="xs:integer">
+      <xs:minInclusive value="0"/>
+    </xs:restriction>
+  </xs:simpleType>
+</xs:schema>

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/encoder.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/encoder.cpp	2009-07-09 10:48:18 UTC (rev 5026)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/encoder.cpp	2009-07-09 14:08:12 UTC (rev 5027)
@@ -19,6 +19,7 @@
 #include "ffv1Encoder.h"
 #include "ffvhuffEncoder.h"
 #include "huffyuvEncoder.h"
+#include "mpeg1Encoder.h"
 #include "ADM_inttype.h"
 
 int uiType;
@@ -27,9 +28,10 @@
 static FFV1Encoder ffv1;
 static FFVHuffEncoder ffvhuff;
 static HuffyuvEncoder huffyuv;
+static Mpeg1Encoder mpeg1Encoder;
 
-static int encoderIds[] = { 0, 1, 2, 3 };
-static AvcodecEncoder* encoders[] = { &dv, &ffv1, &ffvhuff, &huffyuv };
+static int encoderIds[] = { 0, 1, 2, 3, 4 };
+static AvcodecEncoder* encoders[] = { &dv, &ffv1, &ffvhuff, &huffyuv, &mpeg1Encoder};
 
 extern "C"
 {
@@ -292,7 +294,7 @@
 		_swsContext = sws_getContext(
 			_context->width, _context->height, PIX_FMT_YUV420P,
 			_context->width, _context->height, _context->pix_fmt,
-			SWS_BICUBLIN, NULL, NULL, NULL);
+			SWS_SPLINE, NULL, NULL, NULL);
 
 		_resampleSize = _bufferSize;
 		_resampleBuffer = new uint8_t[_resampleSize];

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/interface.c
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/interface.c	2009-07-09 10:48:18 UTC (rev 5026)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/interface.c	2009-07-09 14:08:12 UTC (rev 5027)
@@ -18,12 +18,15 @@
 #include "ADM_vidEnc_plugin.h"
 #include "encoder.h"
 
+int _uiType = 0;
+
 int vidEncGetEncoders(int uiType, int** encoderIds)
 {
 	if (uiType == ADM_UI_CLI || uiType == ADM_UI_GTK || uiType == ADM_UI_QT4)
 	{
 		int count = 0;
 
+		_uiType = uiType;
 		*encoderIds = avcodecEncoder_getPointers(uiType, &count);
 
 		return count;

Added: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/mpeg1Encoder.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/mpeg1Encoder.cpp	2009-07-09 10:48:18 UTC (rev 5026)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/mpeg1Encoder.cpp	2009-07-09 14:08:12 UTC (rev 5027)
@@ -0,0 +1,265 @@
+/***************************************************************************
+                               mpeg1Encoder.cpp
+
+    begin                : Sat Jul 4 2009
+    copyright            : (C) 2009 by gruntster
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+
+#include "ADM_inttype.h"
+#include "mpeg1Encoder.h"
+#include "DIA_factory.h"
+
+extern int _uiType;
+
+Mpeg1Encoder::Mpeg1Encoder(void)
+{
+	init(CODEC_ID_MPEG1VIDEO, PIX_FMT_YUV420P);
+
+	_encodeOptions.structSize = sizeof(vidEncOptions);
+	_encodeOptions.encodeMode = DEFAULT_ENCODE_MODE;
+	_encodeOptions.encodeModeParameter = DEFAULT_ENCODE_MODE_PARAMETER;
+
+	_bitrateParam.capabilities = ADM_ENC_CAP_CQ | ADM_ENC_CAP_2PASS | ADM_ENC_CAP_2PASS_BR;
+}
+
+void Mpeg1Encoder::initContext(vidEncVideoProperties *properties)
+{
+	AvcodecEncoder::initContext(properties);
+
+	_context->gop_size = _options.getGopSize();
+
+	if (_options.getWidescreen())
+	{
+		_context->sample_aspect_ratio.num = 16;
+		_context->sample_aspect_ratio.den = 9;
+	}
+	else
+	{
+		_context->sample_aspect_ratio.num = 4;
+		_context->sample_aspect_ratio.den = 3;
+	}
+}
+
+const char* Mpeg1Encoder::getEncoderType(void)
+{
+	return "MPEG-1";
+}
+
+const char* Mpeg1Encoder::getEncoderDescription(void)
+{
+	return "MPEG-1 video encoder plugin for Avidemux (c) Mean/Gruntster";
+}
+
+const char* Mpeg1Encoder::getFourCC(void)
+{
+	return "mpg1";
+}
+
+const char* Mpeg1Encoder::getEncoderGuid(void)
+{
+	return "85FC9CAC-CE6C-4aa6-9D5F-352D6349BA3E";
+}
+
+int Mpeg1Encoder::isConfigurable(void)
+{
+	return (_uiType == ADM_UI_GTK || _uiType == ADM_UI_QT4);
+}
+
+int Mpeg1Encoder::configure(vidEncConfigParameters *configParameters, vidEncVideoProperties *properties)
+{
+	unsigned int minBitrate = _options.getMinBitrate();
+	unsigned int maxBitrate = _options.getMaxBitrate();
+	unsigned int useXvidRateControl = _options.getXvidRateControl();
+	unsigned int bufferSize = _options.getBufferSize();
+	unsigned int widescreen = _options.getWidescreen();
+	unsigned int interlaced = _options.getInterlaced();
+	unsigned int userMatrix = _options.getMatrix();
+	unsigned int gopSize = _options.getGopSize();
+
+	_bitrateParam.avg_bitrate = 1000;
+	_bitrateParam.finalsize = 700;
+
+	updateEncodeProperties(properties);
+
+	diaMenuEntry wideM[] = {
+		{0, "4:3"},
+		{1, "16:9"}};
+
+	diaMenuEntry matrixM[]={
+		{0, "Default"},
+		{1, "TMPGEnc"},
+		{2, "Anime"},
+		{3, "KVCD"}
+	};
+
+	diaMenuEntry interM[]={
+		{0, "Progressive"},
+		{1, "Interlaced BFF"},
+		{2, "Interlaced TFF"}
+	};
+
+	diaElemBitrate ctlBitrate(&_bitrateParam, NULL);
+	diaElemUInteger ctlMaxb(&maxBitrate, "Ma_x. bitrate:", 100, 9000);
+	diaElemUInteger ctlMinb(&minBitrate, "Mi_n. bitrate:", 0, 9000);
+	diaElemToggle ctlXvid(&useXvidRateControl, "_Use Xvid rate control");
+	diaElemUInteger ctlVbv(&bufferSize, "_Buffer size:", 1, 1024);
+	diaElemMenu ctlWidescreen(&widescreen, "Aspect _ratio:", 2, wideM);
+	diaElemMenu ctlMatrix(&userMatrix, "_Matrices:", 4, matrixM);
+	diaElemUInteger ctlGop(&gopSize, "_GOP size:", 1, 30);
+	diaElemMenu ctlInterW(&interlaced, "_Interlacing:", 3, interM);
+
+	diaElem *elems[9]= {&ctlBitrate, &ctlMinb, &ctlMaxb, &ctlXvid, &ctlVbv, &ctlWidescreen, &ctlInterW, &ctlMatrix, &ctlGop};
+
+	if (diaFactoryRun("avcodec MPEG-1 Configuration", 9, elems))
+	{
+		switch (_bitrateParam.mode)
+		{
+			case COMPRESS_CQ:
+				_encodeOptions.encodeMode = ADM_VIDENC_MODE_CQP;
+				_encodeOptions.encodeModeParameter = _bitrateParam.qz;
+
+				break;
+			case COMPRESS_2PASS:
+				_encodeOptions.encodeMode = ADM_VIDENC_MODE_2PASS_SIZE;
+				_encodeOptions.encodeModeParameter = _bitrateParam.finalsize;
+
+				break;
+			case COMPRESS_2PASS_BITRATE:
+				_encodeOptions.encodeMode = COMPRESS_2PASS_BITRATE;
+				_encodeOptions.encodeModeParameter = _bitrateParam.avg_bitrate;
+
+				break;
+		}
+
+		_options.setMinBitrate(minBitrate);
+		_options.setMaxBitrate(maxBitrate);
+		_options.setXvidRateControl(useXvidRateControl);
+		_options.setBufferSize(bufferSize);
+		_options.setWidescreen(widescreen);
+		_options.setInterlaced((InterlacedMode)interlaced);
+		_options.setMatrix((MatrixMode)userMatrix);
+		_options.setGopSize(gopSize);
+
+		return 1;
+	}
+
+	return 0;
+}
+
+int Mpeg1Encoder::getOptions(vidEncOptions *encodeOptions, char *pluginOptions, int bufferSize)
+{
+	char* xml = _options.toXml(PLUGIN_XML_INTERNAL);
+	int xmlLength = strlen(xml);
+
+	if (bufferSize >= xmlLength)
+	{
+		memcpy(pluginOptions, xml, xmlLength);
+		memcpy(encodeOptions, &_encodeOptions, sizeof(vidEncOptions));
+	}
+	else if (bufferSize != 0)
+		xmlLength = 0;
+
+	delete [] xml;
+
+	return xmlLength;
+}
+
+int Mpeg1Encoder::setOptions(vidEncOptions *encodeOptions, char *pluginOptions)
+{
+	if (_opened)
+		return ADM_VIDENC_ERR_ALREADY_OPEN;
+
+	bool success = true;
+
+	if (pluginOptions)
+	{
+		success = _options.fromXml(pluginOptions, PLUGIN_XML_INTERNAL);
+
+		_options.loadPresetConfiguration();
+	}
+
+	if (encodeOptions && success)
+	{
+		memcpy(&_encodeOptions, encodeOptions, sizeof(vidEncOptions));
+		updateEncodeProperties(NULL);
+	}
+
+	if (success)
+		return ADM_VIDENC_ERR_SUCCESS;
+	else
+		return ADM_VIDENC_ERR_FAILED;
+}
+
+int Mpeg1Encoder::beginPass(vidEncPassParameters *passParameters)
+{
+	return AvcodecEncoder::beginPass(passParameters);
+}
+
+int Mpeg1Encoder::encodeFrame(vidEncEncodeParameters *encodeParams)
+{
+	int ret = AvcodecEncoder::encodeFrame(encodeParams);
+
+	if (_encodeOptions.encodeMode == ADM_VIDENC_MODE_CQP)
+		encodeParams->quantiser = _encodeOptions.encodeModeParameter;
+
+	return ret;
+}
+
+void Mpeg1Encoder::updateEncodeProperties(vidEncVideoProperties *properties)
+{
+	switch (_encodeOptions.encodeMode)
+	{
+		case ADM_VIDENC_MODE_CQP:
+			_passCount = 1;
+
+			_bitrateParam.mode = COMPRESS_CQ;
+			_bitrateParam.qz = _encodeOptions.encodeModeParameter;
+
+			break;
+		case ADM_VIDENC_MODE_2PASS_SIZE:
+			_passCount = 2;
+
+			_bitrateParam.mode = COMPRESS_2PASS;
+			_bitrateParam.finalsize = _encodeOptions.encodeModeParameter;
+
+			//if (properties)
+				//bitrateParam->bitrate = calculateBitrate(properties->fpsNum, properties->fpsDen, properties->frameCount, _encodeOptions.encodeModeParameter) / 1000;					
+			//else
+				//bitrateParam->bitrate = 1500;
+
+			break;
+		case ADM_VIDENC_MODE_2PASS_ABR:
+			_passCount = 2;
+
+			_bitrateParam.mode = COMPRESS_2PASS_BITRATE;
+			_bitrateParam.avg_bitrate = _encodeOptions.encodeModeParameter;
+
+			break;
+	}
+}
+
+unsigned int Mpeg1Encoder::calculateBitrate(unsigned int fpsNum, unsigned int fpsDen, unsigned int frameCount, unsigned int sizeInMb)
+{
+	double db, ti;
+
+	db = sizeInMb;
+	db = db * 1024. * 1024. * 8.;
+	// now db is in bits
+
+	// compute duration
+	ti = frameCount;
+	ti *= fpsDen;
+	ti /= fpsNum;	// nb sec
+	db = db / ti;
+
+	return (unsigned int)floor(db);
+}

Added: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/mpeg1Encoder.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/mpeg1Encoder.h	2009-07-09 10:48:18 UTC (rev 5026)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/mpeg1Encoder.h	2009-07-09 14:08:12 UTC (rev 5027)
@@ -0,0 +1,55 @@
+/***************************************************************************
+                               mpeg1Encoder.h
+
+    begin                : Sat Jul 4 2009
+    copyright            : (C) 2009 by gruntster
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+
+#ifndef Mpeg1Encoder_h
+#define Mpeg1Encoder_h
+
+#ifdef __cplusplus
+extern "C"
+{
+	#include "ADM_vidEnc_plugin.h"
+}
+
+#include "encoder.h"
+#include "Mpeg1EncoderOptions.h"
+#include "../../ADM_encoder/ADM_vidEncode.hxx"
+
+class Mpeg1Encoder : public AvcodecEncoder
+{
+	private:
+		COMPRES_PARAMS _bitrateParam;
+		Mpeg1EncoderOptions _options;
+		vidEncOptions _encodeOptions;
+
+		void updateEncodeProperties(vidEncVideoProperties *properties);
+		unsigned int calculateBitrate(unsigned int fpsNum, unsigned int fpsDen, unsigned int frameCount, unsigned int sizeInMb);
+
+	public:
+		Mpeg1Encoder(void);
+		void initContext(vidEncVideoProperties *properties);
+		const char* getEncoderType(void);
+		const char* getEncoderDescription(void);
+		const char* getFourCC(void);
+		const char* getEncoderGuid(void);
+		int isConfigurable(void);
+		int configure(vidEncConfigParameters *configParameters, vidEncVideoProperties *properties);
+		int getOptions(vidEncOptions *encodeOptions, char *pluginOptions, int bufferSize);
+		int setOptions(vidEncOptions *encodeOptions, char *pluginOptions);
+		int beginPass(vidEncPassParameters *passParameters);
+		int encodeFrame(vidEncEncodeParameters *encodeParams);
+};
+#endif	// __cplusplus
+#endif	// Mpeg1Encoder_h

Added: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/mpeg1EncoderOptions.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/mpeg1EncoderOptions.cpp	2009-07-09 10:48:18 UTC (rev 5026)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/mpeg1EncoderOptions.cpp	2009-07-09 14:08:12 UTC (rev 5027)
@@ -0,0 +1,235 @@
+ /***************************************************************************
+                               Mpeg1EncoderOptions.cpp
+
+	These settings are intended for scripting and can contain a Preset 
+	Configuration block.  If this block exists then "internal" settings are
+	ignored and an external configuration file should be read instead, 
+	e.g. PlayStation Portable profile.  However, if the external file is 
+	missing, internal settings have to be used and will reflect a snapshot
+	of the external configuration file at the time the script was generated.
+
+    begin                : Mon Apr 21 2008
+    copyright            : (C) 2008 by gruntster
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+
+#include <math.h>
+#include <libxml/parser.h>
+#include <libxml/xmlschemas.h>
+#include <sstream>
+#include <string>
+
+#include "ADM_inttype.h"
+#include "ADM_files.h"
+
+#include "config.h"
+#include "mpeg1EncoderOptions.h"
+
+Mpeg1EncoderOptions::Mpeg1EncoderOptions(void) : PluginOptions("Mpeg1", "Mpeg1Param.xsd", DEFAULT_ENCODE_MODE, DEFAULT_ENCODE_MODE_PARAMETER)
+{
+}
+
+void Mpeg1EncoderOptions::reset(void)
+{
+	PluginOptions::reset();
+
+	setMinBitrate(600);
+	setMaxBitrate(2200);
+	setXvidRateControl(false);
+	setBufferSize(40);
+	setWidescreen(false);
+	setInterlaced(INTERLACED_NONE);
+	setMatrix(MATRIX_DEFAULT);
+	setGopSize(12);
+}
+
+unsigned int Mpeg1EncoderOptions::getMinBitrate(void)
+{
+	return _minBitrate;
+}
+
+void Mpeg1EncoderOptions::setMinBitrate(unsigned int minBitrate)
+{
+	if (minBitrate <= 9000)
+		_minBitrate = minBitrate;
+}
+
+unsigned int Mpeg1EncoderOptions::getMaxBitrate(void)
+{
+	return _maxBitrate;
+}
+
+void Mpeg1EncoderOptions::setMaxBitrate(unsigned int maxBitrate)
+{
+	if (maxBitrate >= 100 && maxBitrate <= 9000)
+		_maxBitrate = maxBitrate;
+}
+
+bool Mpeg1EncoderOptions::getXvidRateControl(void)
+{
+	return _xvidRateControl;
+}
+
+void Mpeg1EncoderOptions::setXvidRateControl(bool xvidRateControl)
+{
+	_xvidRateControl = xvidRateControl;
+}
+
+unsigned int Mpeg1EncoderOptions::getBufferSize(void)
+{
+	return _bufferSize;
+}
+
+void Mpeg1EncoderOptions::setBufferSize(unsigned int bufferSize)
+{
+	if (bufferSize >= 1 && bufferSize <= 1024)
+		_bufferSize = bufferSize;
+}
+
+bool Mpeg1EncoderOptions::getWidescreen(void)
+{
+	return _widescreen;
+}
+
+void Mpeg1EncoderOptions::setWidescreen(bool widescreen)
+{
+	_widescreen = widescreen;
+}
+
+InterlacedMode Mpeg1EncoderOptions::getInterlaced(void)
+{
+	return _interlaced;
+}
+
+void Mpeg1EncoderOptions::setInterlaced(InterlacedMode interlaced)
+{
+	if (interlaced == INTERLACED_NONE || interlaced == INTERLACED_BFF || interlaced == INTERLACED_TFF)
+		_interlaced = interlaced;
+}
+
+MatrixMode Mpeg1EncoderOptions::getMatrix(void)
+{
+	return _matrix;
+}
+
+void Mpeg1EncoderOptions::setMatrix(MatrixMode matrix)
+{
+	if (matrix == MATRIX_DEFAULT || matrix == MATRIX_TMPGENC || matrix == MATRIX_ANIME || matrix == MATRIX_KVCD)
+		_matrix = matrix;
+}
+
+unsigned int Mpeg1EncoderOptions::getGopSize(void)
+{
+	return _gopSize;
+}
+
+void Mpeg1EncoderOptions::setGopSize(unsigned int gopSize)
+{
+	if (gopSize >= 1 && gopSize <= 30)
+		_gopSize = gopSize;
+}
+
+void Mpeg1EncoderOptions::addOptionsToXml(xmlNodePtr xmlNodeRoot)
+{
+	const int bufferSize = 100;
+	xmlChar xmlBuffer[bufferSize + 1];
+	xmlNodePtr xmlNodeChild, xmlNodeChild2;
+
+	xmlNodeRoot = xmlNewChild(xmlNodeRoot, NULL, (xmlChar*)getOptionsTagRoot(), NULL);
+	xmlNewChild(xmlNodeRoot, NULL, (xmlChar*)"minBitrate", number2String(xmlBuffer, bufferSize, getMinBitrate()));
+	xmlNewChild(xmlNodeRoot, NULL, (xmlChar*)"maxBitrate", number2String(xmlBuffer, bufferSize, getMaxBitrate()));
+	xmlNewChild(xmlNodeRoot, NULL, (xmlChar*)"xvidRateControl", boolean2String(xmlBuffer, bufferSize, getXvidRateControl()));
+	xmlNewChild(xmlNodeRoot, NULL, (xmlChar*)"bufferSize", number2String(xmlBuffer, bufferSize, getBufferSize()));
+	xmlNewChild(xmlNodeRoot, NULL, (xmlChar*)"widescreen", boolean2String(xmlBuffer, bufferSize, getWidescreen()));
+
+	switch (getInterlaced())
+	{
+		case INTERLACED_BFF:
+			strcpy((char*)xmlBuffer, "bff");
+			break;
+		case INTERLACED_TFF:
+			strcpy((char*)xmlBuffer, "tff");
+			break;
+		default:
+			strcpy((char*)xmlBuffer, "none");
+			break;
+	}
+
+	xmlNewChild(xmlNodeRoot, NULL, (xmlChar*)"interlaced", xmlBuffer);
+
+	switch (getMatrix())
+	{
+		case MATRIX_TMPGENC:
+			strcpy((char*)xmlBuffer, "tmpgenc");
+			break;
+		case MATRIX_ANIME:
+			strcpy((char*)xmlBuffer, "anime");
+			break;
+		case MATRIX_KVCD:
+			strcpy((char*)xmlBuffer, "kvcd");
+			break;
+		default:
+			strcpy((char*)xmlBuffer, "default");
+			break;
+	}
+
+	xmlNewChild(xmlNodeRoot, NULL, (xmlChar*)"gopSize", number2String(xmlBuffer, bufferSize, getGopSize()));
+}
+
+void Mpeg1EncoderOptions::parseOptions(xmlNode *node)
+{
+	for (xmlNode *xmlChild = node->children; xmlChild; xmlChild = xmlChild->next)
+	{
+		if (xmlChild->type == XML_ELEMENT_NODE)
+		{
+			char *content = (char*)xmlNodeGetContent(xmlChild);
+
+			if (strcmp((char*)xmlChild->name, "minBitrate") == 0)
+				setMinBitrate(atoi(content));
+			else if (strcmp((char*)xmlChild->name, "maxBitrate") == 0)
+				setMaxBitrate(atoi(content));
+			else if (strcmp((char*)xmlChild->name, "xvidRateControl") == 0)
+				setXvidRateControl(string2Boolean(content));
+			else if (strcmp((char*)xmlChild->name, "bufferSize") == 0)
+				setBufferSize(atoi(content));
+			else if (strcmp((char*)xmlChild->name, "widescreen") == 0)
+				setWidescreen(string2Boolean(content));
+			else if (strcmp((char*)xmlChild->name, "interlaced") == 0)
+			{
+				InterlacedMode mode = INTERLACED_NONE;
+
+				if (strcmp(content, "bff") == 0)
+					mode = INTERLACED_BFF;
+				else if (strcmp(content, "tff") == 0)
+					mode = INTERLACED_TFF;
+
+				setInterlaced(mode);
+			}
+			else if (strcmp((char*)xmlChild->name, "matrix") == 0)
+			{
+				MatrixMode mode = MATRIX_DEFAULT;
+
+				if (strcmp(content, "tmpgenc") == 0)
+					mode = MATRIX_TMPGENC;
+				else if (strcmp(content, "anime") == 0)
+					mode = MATRIX_ANIME;
+				else if (strcmp(content, "kvcd") == 0)
+					mode = MATRIX_KVCD;
+
+				setMatrix(mode);
+			}
+			else if (strcmp((char*)xmlChild->name, "gopSize") == 0)
+				setGopSize(atoi(content));
+
+			xmlFree(content);
+		}
+	}
+}

Added: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/mpeg1EncoderOptions.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/mpeg1EncoderOptions.h	2009-07-09 10:48:18 UTC (rev 5026)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/mpeg1EncoderOptions.h	2009-07-09 14:08:12 UTC (rev 5027)
@@ -0,0 +1,87 @@
+/***************************************************************************
+                            mpeg1EncoderOptions.h
+
+    begin                : Sat Jul 4 2009
+    copyright            : (C) 2009 by gruntster
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+
+#ifndef mpeg1EncoderOptions_h
+#define mpeg1EncoderOptions_h
+
+#include <vector>
+#include <libxml/tree.h>
+#include "../common/PluginOptions.h"
+
+extern "C"
+{
+#include "ADM_vidEnc_plugin.h"
+}
+
+#define DEFAULT_ENCODE_MODE ADM_VIDENC_MODE_CQP
+#define DEFAULT_ENCODE_MODE_PARAMETER 4
+
+typedef enum
+{
+	INTERLACED_NONE,
+	INTERLACED_BFF,
+	INTERLACED_TFF
+} InterlacedMode;
+
+typedef enum
+{
+	MATRIX_DEFAULT,
+	MATRIX_TMPGENC,
+	MATRIX_ANIME,
+	MATRIX_KVCD
+} MatrixMode;
+
+class Mpeg1EncoderOptions : public PluginOptions
+{
+protected:
+	unsigned int _minBitrate, _maxBitrate, _bufferSize, _gopSize;
+	bool _xvidRateControl, _widescreen;
+	InterlacedMode _interlaced;
+	MatrixMode _matrix;
+
+	void addOptionsToXml(xmlNodePtr xmlNodeRoot);
+	void parseOptions(xmlNode *node);
+
+public:
+	Mpeg1EncoderOptions(void);
+	void reset(void);
+
+	unsigned int getMinBitrate(void);
+	void setMinBitrate(unsigned int minBitrate);
+
+	unsigned int getMaxBitrate(void);
+	void setMaxBitrate(unsigned int maxBitrate);
+
+	bool getXvidRateControl(void);
+	void setXvidRateControl(bool xvidRateControl);
+
+	unsigned int getBufferSize(void);
+	void setBufferSize(unsigned int bufferSize);
+
+	bool getWidescreen(void);
+	void setWidescreen(bool widescreen);
+
+	InterlacedMode getInterlaced(void);
+	void setInterlaced(InterlacedMode interlaced);
+
+	MatrixMode getMatrix(void);
+	void setMatrix(MatrixMode matrix);
+
+	unsigned int getGopSize(void);
+	void setGopSize(unsigned int gopSize);
+};
+
+#endif	// mpeg1EncoderOptions_h

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_xvid/xvidOptions.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_xvid/xvidOptions.cpp	2009-07-09 10:48:18 UTC (rev 5026)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_xvid/xvidOptions.cpp	2009-07-09 14:08:12 UTC (rev 5027)
@@ -711,7 +711,7 @@
 	xmlChar xmlBuffer[bufferSize + 1];
 	xmlNodePtr xmlNodeChild, xmlNodeChild2;
 
-	xmlNodeRoot = xmlNewChild(xmlNodeRoot, NULL, (xmlChar*)"XvidOptions", NULL);
+	xmlNodeRoot = xmlNewChild(xmlNodeRoot, NULL, (xmlChar*)getOptionsTagRoot(), NULL);
 	xmlNewChild(xmlNodeRoot, NULL, (xmlChar*)"threads", number2String(xmlBuffer, bufferSize, getThreads()));
 
 	xmlNodeChild = xmlNewChild(xmlNodeRoot, NULL, (xmlChar*)"vui", NULL);



From gruntster at mail.berlios.de  Fri Jul 10 12:38:51 2009
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Fri, 10 Jul 2009 12:38:51 +0200
Subject: [Avidemux-svn-commit] r5028 - in
	branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder:
	ADM_vidEnc_avcodec ADM_vidEnc_x264 ADM_vidEnc_xvid
Message-ID: <200907101038.n6AAcp8h021053@sheep.berlios.de>

Author: gruntster
Date: 2009-07-10 12:38:39 +0200 (Fri, 10 Jul 2009)
New Revision: 5028

Modified:
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/mpeg1EncoderOptions.cpp
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/x264Options.cpp
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_xvid/xvidOptions.cpp
Log:
[vidEnc] derived virtual functions don't get called in constructor

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/mpeg1EncoderOptions.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/mpeg1EncoderOptions.cpp	2009-07-09 14:08:12 UTC (rev 5027)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/mpeg1EncoderOptions.cpp	2009-07-10 10:38:39 UTC (rev 5028)
@@ -35,6 +35,7 @@
 
 Mpeg1EncoderOptions::Mpeg1EncoderOptions(void) : PluginOptions("Mpeg1", "Mpeg1Param.xsd", DEFAULT_ENCODE_MODE, DEFAULT_ENCODE_MODE_PARAMETER)
 {
+	reset();
 }
 
 void Mpeg1EncoderOptions::reset(void)

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/x264Options.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/x264Options.cpp	2009-07-09 14:08:12 UTC (rev 5027)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/x264Options.cpp	2009-07-10 10:38:39 UTC (rev 5028)
@@ -35,6 +35,8 @@
 x264Options::x264Options(void) : PluginOptions("x264", "x264Param.xsd", DEFAULT_ENCODE_MODE, DEFAULT_ENCODE_MODE_PARAMETER)
 {
 	memset(&_param, 0, sizeof(x264_param_t));
+
+	reset();
 }
 
 void x264Options::cleanUp(void)

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_xvid/xvidOptions.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_xvid/xvidOptions.cpp	2009-07-09 14:08:12 UTC (rev 5027)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_xvid/xvidOptions.cpp	2009-07-10 10:38:39 UTC (rev 5028)
@@ -33,6 +33,7 @@
 
 XvidOptions::XvidOptions(void) : PluginOptions("Xvid", "XvidParam.xsd", DEFAULT_ENCODE_MODE, DEFAULT_ENCODE_MODE_PARAMETER)
 {
+	reset();
 }
 
 void XvidOptions::reset(void)



From gruntster at mail.berlios.de  Fri Jul 10 12:41:19 2009
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Fri, 10 Jul 2009 12:41:19 +0200
Subject: [Avidemux-svn-commit] r5029 -
	branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec
Message-ID: <200907101041.n6AAfJaH022933@sheep.berlios.de>

Author: gruntster
Date: 2009-07-10 12:41:05 +0200 (Fri, 10 Jul 2009)
New Revision: 5029

Modified:
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/CMakeLists.txt
Log:
[vidEnc] remove generation of config header file for avcodec plugin

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/CMakeLists.txt	2009-07-10 10:38:39 UTC (rev 5028)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/CMakeLists.txt	2009-07-10 10:41:05 UTC (rev 5029)
@@ -13,7 +13,6 @@
 							 ffvhuffEncoder.cpp  ffv1Encoder.cpp  dvEncoder.cpp  mpeg1Encoder.cpp
 							 mpeg1EncoderOptions.cpp)
 
-CONFIGURE_FILE("${CMAKE_CURRENT_SOURCE_DIR}/config.h.cmake" "${CMAKE_CURRENT_BINARY_DIR}/config.h")
 INCLUDE_DIRECTORIES(${CMAKE_CURRENT_BINARY_DIR} ${LIBXML2_INCLUDE_DIR})
 ADD_DEFINITIONS(${LIBXML2_DEFINITIONS})
 



From gruntster at mail.berlios.de  Fri Jul 10 15:52:23 2009
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Fri, 10 Jul 2009 15:52:23 +0200
Subject: [Avidemux-svn-commit] r5030 -
	branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec
Message-ID: <200907101352.n6ADqNEr020168@sheep.berlios.de>

Author: gruntster
Date: 2009-07-10 15:52:18 +0200 (Fri, 10 Jul 2009)
New Revision: 5030

Modified:
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/mpeg1Encoder.h
Log:
[vidEnc] fix case of filename in MPEG-1 encoder plugin

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/mpeg1Encoder.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/mpeg1Encoder.h	2009-07-10 10:41:05 UTC (rev 5029)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/mpeg1Encoder.h	2009-07-10 13:52:18 UTC (rev 5030)
@@ -24,7 +24,7 @@
 }
 
 #include "encoder.h"
-#include "Mpeg1EncoderOptions.h"
+#include "mpeg1EncoderOptions.h"
 #include "../../ADM_encoder/ADM_vidEncode.hxx"
 
 class Mpeg1Encoder : public AvcodecEncoder



From gruntster at mail.berlios.de  Fri Jul 10 18:17:11 2009
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Fri, 10 Jul 2009 18:17:11 +0200
Subject: [Avidemux-svn-commit] r5031 - in
	branches/avidemux_2.5_branch_gruntster: avidemux/ADM_encoder
	avidemux/ADM_plugin plugins/ADM_videoEncoder/ADM_vidEnc_avcodec
	plugins/ADM_videoEncoder/ADM_vidEnc_x264
	plugins/ADM_videoEncoder/ADM_vidEnc_xvid
Message-ID: <200907101617.n6AGHB0i000811@sheep.berlios.de>

Author: gruntster
Date: 2009-07-10 18:17:04 +0200 (Fri, 10 Jul 2009)
New Revision: 5031

Modified:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/ADM_externalEncoder.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_plugin/ADM_vidEnc_plugin.h
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/encoder.cpp
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/encoder.cpp
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_xvid/encoder.cpp
Log:
[vidEnc] change video encoder API to include planes and strides of source frame (so each plugin doesn't need to calculate them)

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/ADM_externalEncoder.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/ADM_externalEncoder.cpp	2009-07-10 13:52:18 UTC (rev 5030)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/ADM_externalEncoder.cpp	2009-07-10 16:17:04 UTC (rev 5031)
@@ -20,6 +20,11 @@
 #include "ADM_externalEncoder.h"
 #include "ADM_plugin/ADM_vidEnc_plugin.h"
 
+extern "C"
+{
+#include "libavcodec/avcodec.h"
+}
+
 externalEncoder::externalEncoder(COMPRES_PARAMS *params, bool globalHeader)
 {
 	_plugin = getVideoEncoderPlugin(params->extra_param);
@@ -90,13 +95,19 @@
 
 	if (frame == UINT32_MAX)
 	{
-		params.frameData = NULL;
+		memset(&params.frameData, 0, sizeof(params.frameData));
+		memset(&params.frameLineSize, 0, sizeof(params.frameLineSize));
+
 		params.frameDataSize = 0;
 	}
 	else
 	{
-		params.frameData = _vbuffer->data;
-		params.frameDataSize = ((_w + 15) & 0xffffff0) * ((_h + 15) & 0xfffffff0) * 2;
+		AVPicture sourcePicture;
+
+		params.frameDataSize = avpicture_fill(&sourcePicture, _vbuffer->data, PIX_FMT_YUV420P, _w, _h);
+
+		memcpy(&params.frameLineSize, sourcePicture.linesize, sizeof(params.frameLineSize));
+		memcpy(&params.frameData, sourcePicture.data, sizeof(params.frameData));
 	}
 
 	params.encodedData = NULL;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_plugin/ADM_vidEnc_plugin.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_plugin/ADM_vidEnc_plugin.h	2009-07-10 13:52:18 UTC (rev 5030)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_plugin/ADM_vidEnc_plugin.h	2009-07-10 16:17:04 UTC (rev 5031)
@@ -17,7 +17,7 @@
 #ifndef ADM_vidEnc_plugin_h
 #define ADM_vidEnc_plugin_h
 
-#define ADM_VIDENC_API_VERSION 1
+#define ADM_VIDENC_API_VERSION 2
 
 #define ADM_VIDENC_ERR_SUCCESS 1
 #define ADM_VIDENC_ERR_FAILED 0
@@ -50,7 +50,8 @@
 typedef struct
 {
 	int structSize;
-	uint8_t *frameData;
+	uint8_t *frameData[4];
+	int frameLineSize[4];
 	int frameDataSize;
 	uint8_t *encodedData;
 	int encodedDataSize;

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/encoder.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/encoder.cpp	2009-07-10 13:52:18 UTC (rev 5030)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/encoder.cpp	2009-07-10 16:17:04 UTC (rev 5031)
@@ -315,19 +315,14 @@
 	_frame.key_frame = 0;
 	_frame.pict_type = 0;
 
-	if (encodeParams->frameData)
+	if (encodeParams->frameData[0])
 	{
-		AVPicture sourcePicture, *inputPicture;
+		// Swap planes since input is YV12 (not YUV420P)
+		uint8_t *tmpPlane = encodeParams->frameData[1];
 
-		avpicture_fill(
-			&sourcePicture, encodeParams->frameData, PIX_FMT_YUV420P, _context->width, _context->height);
+		encodeParams->frameData[1] = encodeParams->frameData[2];
+		encodeParams->frameData[2] = tmpPlane;
 
-		// Swap planes to make YV12 look like YUV420P
-		uint8_t *tmpPlane = sourcePicture.data[1];
-
-		sourcePicture.data[1] = sourcePicture.data[2];
-		sourcePicture.data[2] = tmpPlane;
-
 		if (_swsContext)
 		{
 			AVPicture resamplePicture;
@@ -335,18 +330,23 @@
 			avpicture_fill(
 				&resamplePicture, _resampleBuffer, _context->pix_fmt, _context->width, _context->height);
 
-			inputPicture = &resamplePicture;
+			sws_scale(
+				_swsContext, encodeParams->frameData, encodeParams->frameLineSize, 0,
+				_context->height, resamplePicture.data, resamplePicture.linesize);
 
-			sws_scale(
-				_swsContext, sourcePicture.data, sourcePicture.linesize, 0,
-				_context->height, inputPicture->data, inputPicture->linesize);
+			memcpy(&_frame.linesize, resamplePicture.linesize, sizeof(resamplePicture.linesize));
+			memcpy(&_frame.data, resamplePicture.data, sizeof(resamplePicture.data));
 		}
 		else
-			inputPicture = &sourcePicture;
+		{
+			_frame.data[0] = encodeParams->frameData[0];
+			_frame.data[1] = encodeParams->frameData[1];
+			_frame.data[2] = encodeParams->frameData[2];
+			_frame.linesize[0] = encodeParams->frameLineSize[0];
+			_frame.linesize[1] = encodeParams->frameLineSize[1];
+			_frame.linesize[2] = encodeParams->frameLineSize[2];
+		}
 
-		memcpy(&_frame.linesize, inputPicture->linesize, sizeof(_frame.linesize));
-		memcpy(&_frame.data, inputPicture->data, sizeof(_frame.data));
-
 		int size = avcodec_encode_video(_context, _buffer, _bufferSize, &_frame);
 
 		if (size < 0)

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/encoder.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/encoder.cpp	2009-07-10 13:52:18 UTC (rev 5030)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/encoder.cpp	2009-07-10 16:17:04 UTC (rev 5031)
@@ -312,21 +312,21 @@
 
 	memset(&_picture, 0, sizeof(x264_picture_t));
 
-	if (encodeParams->frameData)
+	if (encodeParams->frameData[0])
 	{
-		_picture.img.plane[0] = encodeParams->frameData;	// Y
-		_picture.img.plane[2] = encodeParams->frameData + _param.i_width * _param.i_height;	// U
-		_picture.img.plane[1] = encodeParams->frameData + ((_param.i_width * _param.i_height * 5) >> 2);	// V
-		_picture.img.i_stride[0] = _param.i_width;
-		_picture.img.i_stride[1] = _param.i_width >> 1;
-		_picture.img.i_stride[2] = _param.i_width >> 1;
+		_picture.img.plane[0] = encodeParams->frameData[0];
+		_picture.img.plane[1] = encodeParams->frameData[1];
+		_picture.img.plane[2] = encodeParams->frameData[2];
+		_picture.img.i_stride[0] = encodeParams->frameLineSize[0];
+		_picture.img.i_stride[1] = encodeParams->frameLineSize[1];
+		_picture.img.i_stride[2] = encodeParams->frameLineSize[2];
 		_picture.i_type = X264_TYPE_AUTO;
 		_picture.i_pts = _currentFrame;
-		_picture.img.i_csp = X264_CSP_I420;
+		_picture.img.i_csp = X264_CSP_YV12;
 		_picture.img.i_plane = 3;
 	}
 
-	if (x264_encoder_encode(_handle, &nal, &nalCount, encodeParams->frameData ? &_picture : NULL, &picture_out) < 0)
+	if (x264_encoder_encode(_handle, &nal, &nalCount, encodeParams->frameData[0] ? &_picture : NULL, &picture_out) < 0)
 	{
 		printf("[x264] Error encoding\n");
 		return ADM_VIDENC_ERR_FAILED;

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_xvid/encoder.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_xvid/encoder.cpp	2009-07-10 13:52:18 UTC (rev 5030)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_xvid/encoder.cpp	2009-07-10 16:17:04 UTC (rev 5031)
@@ -220,7 +220,7 @@
 
 	_opened = true;
 	_currentPass = 0;
-	_bufferSize = properties->width * properties->height * 3;
+	_bufferSize = (properties->width * properties->height) + 2 * ((properties->width + 1 >> 1) * (properties->height + 1 >> 1));
 	_buffer = new uint8_t[_bufferSize];
 
 	memcpy(&_properties, properties, sizeof(vidEncVideoProperties));
@@ -335,16 +335,16 @@
 	xvid_enc_stats.version = XVID_VERSION;
 	_xvid_enc_frame.bitstream = _buffer;
 
-	if (encodeParams->frameData)
+	if (encodeParams->frameData[0])
 	{
 		_xvid_enc_frame.length = 0;
 		_xvid_enc_frame.input.csp = XVID_CSP_YV12;
-		_xvid_enc_frame.input.stride[0] = _xvid_enc_create.width;
-		_xvid_enc_frame.input.stride[1] = _xvid_enc_create.width >> 1;
-		_xvid_enc_frame.input.stride[2] = _xvid_enc_create.width >> 1;
-		_xvid_enc_frame.input.plane[0] = encodeParams->frameData;
-		_xvid_enc_frame.input.plane[1] = encodeParams->frameData + (_xvid_enc_create.width * _xvid_enc_create.height);
-		_xvid_enc_frame.input.plane[2] = encodeParams->frameData + ((_xvid_enc_create.width * _xvid_enc_create.height * 5) >> 2);
+		_xvid_enc_frame.input.stride[0] = encodeParams->frameLineSize[0];
+		_xvid_enc_frame.input.stride[1] = encodeParams->frameLineSize[1];
+		_xvid_enc_frame.input.stride[2] = encodeParams->frameLineSize[2];
+		_xvid_enc_frame.input.plane[0] = encodeParams->frameData[0];
+		_xvid_enc_frame.input.plane[1] = encodeParams->frameData[1];
+		_xvid_enc_frame.input.plane[2] = encodeParams->frameData[2];
 	}
 	else
 	{



From mean at mail.berlios.de  Fri Jul 10 19:54:37 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Fri, 10 Jul 2009 19:54:37 +0200
Subject: [Avidemux-svn-commit] r5032 - in
	branches/avidemux_2.5_branch_gruntster: .
	avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog
	avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui
	avidemux/ADM_userInterfaces/ADM_commonUI
Message-ID: <200907101754.n6AHsbGn028742@sheep.berlios.de>

Author: mean
Date: 2009-07-10 19:54:36 +0200 (Fri, 10 Jul 2009)
New Revision: 5032

Added:
   branches/avidemux_2.5_branch_gruntster/bootStrap.sh
Modified:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_color.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_jobs.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_license.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/alert_qt4.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/ADM_qslider.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/Q_gui2.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/Q_gui2.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/gui_none.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/ADM_tray.h
Log:
[Build Fix] Build fix for karmic koala + simple build script for main (not for plugins yet)

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_color.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_color.cpp	2009-07-10 16:17:04 UTC (rev 5031)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_color.cpp	2009-07-10 17:54:36 UTC (rev 5032)
@@ -1,7 +1,7 @@
 #include <QtGui/QColorDialog>
 
 #include "ADM_toolkitQt.h"
-
+#include "ADM_default.h"
 int DIA_colorSel(uint8_t *r, uint8_t *g, uint8_t *b)
 {
 	QColor initialColor = QColor(*r, *g, *b);
@@ -17,4 +17,4 @@
 	}
 
 	return 0;
-}
\ No newline at end of file
+}

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_jobs.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_jobs.h	2009-07-10 16:17:04 UTC (rev 5031)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_jobs.h	2009-07-10 17:54:36 UTC (rev 5032)
@@ -1,7 +1,7 @@
 #ifndef Q_jobs_h
 #define Q_jobs_h
-
 #include "ui_jobs.h"
+#include "ADM_default.h"
 #include "ADM_misc.h"
 
 typedef enum

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_license.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_license.cpp	2009-07-10 16:17:04 UTC (rev 5031)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_license.cpp	2009-07-10 17:54:36 UTC (rev 5032)
@@ -16,6 +16,7 @@
  ***************************************************************************/
 
 #include "Q_license.h"
+#include "ADM_default.h"
 #include "ADM_toolkitQt.h"
 
 Ui_licenseWindow::Ui_licenseWindow(QWidget *parent) : QDialog(parent)

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/alert_qt4.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/alert_qt4.cpp	2009-07-10 16:17:04 UTC (rev 5031)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/alert_qt4.cpp	2009-07-10 17:54:36 UTC (rev 5032)
@@ -15,9 +15,9 @@
 
 #include <QtGui/QDialog>
 #include <QtGui/QMessageBox>
+#include "ADM_default.h"
 #include "DIA_coreToolkit.h"
 #include "DIA_coreUI_internal.h"
-#include "ADM_default.h"
 #include "prefs.h"
 #include "ADM_toolkitQt.h"
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/ADM_qslider.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/ADM_qslider.cpp	2009-07-10 16:17:04 UTC (rev 5031)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/ADM_qslider.cpp	2009-07-10 17:54:36 UTC (rev 5032)
@@ -14,7 +14,7 @@
 
 #include <QtGui/QPainter>
 #include <QtGui/QSlider>
-
+#include "ADM_default.h"
 #include "ADM_qslider.h"
 
 ADM_QSlider::ADM_QSlider(QWidget *parent) : QSlider(parent)

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/Q_gui2.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/Q_gui2.cpp	2009-07-10 16:17:04 UTC (rev 5031)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/Q_gui2.cpp	2009-07-10 17:54:36 UTC (rev 5032)
@@ -18,8 +18,8 @@
 #include <QtGui/QKeyEvent>
 #include <QtGui/QGraphicsView>
 
+#include "ADM_default.h"
 #include "Q_gui2.h"
-#include "ADM_default.h"
 #include "ADM_toolkitQt.h"
 #include "ADM_qslider.h"
 #include "ADM_codecs/ADM_codec.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/Q_gui2.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/Q_gui2.h	2009-07-10 16:17:04 UTC (rev 5031)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/Q_gui2.h	2009-07-10 17:54:36 UTC (rev 5032)
@@ -5,7 +5,7 @@
 #include <QtGui/QSlider>
 #include <QtGui/QWidget>
 #include <QtGui/QMenu>
-
+#include "ADM_default.h"
 #include "ADM_qslider.h"
 #include "T_thumbSlider.h"
 #include "ui_gui2.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/gui_none.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/gui_none.cpp	2009-07-10 16:17:04 UTC (rev 5031)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/gui_none.cpp	2009-07-10 17:54:36 UTC (rev 5032)
@@ -12,7 +12,7 @@
 
 #include <QtGui/QApplication>
 #include <QtGui/QDesktopWidget>
-
+#include "ADM_default.h"
 void UI_setAProcessToggleStatus( uint8_t status ) {}
 void UI_setVProcessToggleStatus( uint8_t status ) {}
 void UI_JumpDone(void) {}

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/ADM_tray.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/ADM_tray.h	2009-07-10 16:17:04 UTC (rev 5031)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/ADM_tray.h	2009-07-10 17:54:36 UTC (rev 5032)
@@ -17,7 +17,7 @@
 
 #ifndef ADM_TRAY_H
 #define ADM_TRAY_H
-
+#include "ADM_default.h"
 class ADM_tray
 {
 protected:

Added: branches/avidemux_2.5_branch_gruntster/bootStrap.sh
===================================================================
--- branches/avidemux_2.5_branch_gruntster/bootStrap.sh	2009-07-10 16:17:04 UTC (rev 5031)
+++ branches/avidemux_2.5_branch_gruntster/bootStrap.sh	2009-07-10 17:54:36 UTC (rev 5032)
@@ -0,0 +1,19 @@
+#!/bin/bash
+fail()
+{
+        echo "*** fail $1 ***"
+        exit 1
+        cd $TOP
+}
+
+export TOP=$PWD
+echo "* Avidemux simple build script *"
+echo "* Building Main *"
+rm -Rf buildMain
+mkdir -p buildMain
+cd buildMain
+cmake .. || fail
+make || fail
+echp "*  Main Ok*"
+echp "*  All Done  *"
+



From mean at mail.berlios.de  Sat Jul 11 09:34:43 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sat, 11 Jul 2009 09:34:43 +0200
Subject: [Avidemux-svn-commit] r5033 - branches/avidemux_2.5_branch_gruntster
Message-ID: <200907110734.n6B7Yh8S010483@sheep.berlios.de>

Author: mean
Date: 2009-07-11 09:34:42 +0200 (Sat, 11 Jul 2009)
New Revision: 5033

Modified:
   branches/avidemux_2.5_branch_gruntster/bootStrap.sh
Log:
[Build] Bootstrap script

Modified: branches/avidemux_2.5_branch_gruntster/bootStrap.sh
===================================================================
--- branches/avidemux_2.5_branch_gruntster/bootStrap.sh	2009-07-10 17:54:36 UTC (rev 5032)
+++ branches/avidemux_2.5_branch_gruntster/bootStrap.sh	2009-07-11 07:34:42 UTC (rev 5033)
@@ -12,8 +12,17 @@
 rm -Rf buildMain
 mkdir -p buildMain
 cd buildMain
-cmake .. || fail
-make || fail
-echp "*  Main Ok*"
-echp "*  All Done  *"
+cmake .. || fail cmake
+make || fail make_main
+sudo make install | fail install_main
+echo "*  Main Ok*"
+cd $TOP
+echo "* Making plugins *"
+rm -Rf buildPlugins
+mkdir -p buildPlugins
+cd buildPlugins
+cmake -DAVIDEMUX_INSTALL_PREFIX=/usr/  -DAVIDEMUX_SOURCE_DIR=$TOP/  -DAVIDEMUX_CORECONFIG_DIR=$TOP/buildMain/config ../plugins || fail cmake_plugins
+make || fail make_plugins
+echo "*  All Done  *"
 
+



From mean at mail.berlios.de  Sat Jul 11 10:03:11 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sat, 11 Jul 2009 10:03:11 +0200
Subject: [Avidemux-svn-commit] r5034 - in
	branches/avidemux_2.5_branch_gruntster/avidemux: .
	ADM_userInterfaces/ADM_GTK/ADM_dialog
	ADM_userInterfaces/ADM_QT4/ADM_dialog
Message-ID: <200907110803.n6B83BPu014250@sheep.berlios.de>

Author: mean
Date: 2009-07-11 10:03:10 +0200 (Sat, 11 Jul 2009)
New Revision: 5034

Modified:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_props.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/gtk_gui.cpp
Log:
[Patch] Plf format string patch

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp	2009-07-11 07:34:42 UTC (rev 5033)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp	2009-07-11 08:03:10 UTC (rev 5034)
@@ -84,10 +84,10 @@
               switch (wavinfo->channels)
                 {
                 case 1:
-                    sprintf(text, QT_TR_NOOP("Mono"));
+		  sprintf(text, "%s", QT_TR_NOOP("Mono"));
                     break;
                 case 2:
-                    sprintf(text, QT_TR_NOOP("Stereo"));
+		  sprintf(text, "%s", QT_TR_NOOP("Stereo"));
                     break;
                 default:
                     sprintf(text, "%d",wavinfo->channels);

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_props.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_props.cpp	2009-07-11 07:34:42 UTC (rev 5033)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_props.cpp	2009-07-11 08:03:10 UTC (rev 5034)
@@ -76,10 +76,10 @@
               switch (wavinfo->channels)
                 {
                 case 1:
-                    sprintf(text, QT_TR_NOOP("Mono"));
+		  sprintf(text, "%s", QT_TR_NOOP("Mono"));
                     break;
                 case 2:
-                    sprintf(text, QT_TR_NOOP("Stereo"));
+                    sprintf(text, "%s", QT_TR_NOOP("Stereo"));
                     break;
                 default:
                     sprintf(text, "%d",wavinfo->channels);

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/gtk_gui.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/gtk_gui.cpp	2009-07-11 07:34:42 UTC (rev 5033)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/gtk_gui.cpp	2009-07-11 08:03:10 UTC (rev 5034)
@@ -1352,7 +1352,7 @@
   if (ac3->open (path) == 0)
     {
       GUI_Error_HIG (QT_TR_NOOP("Failed to open the file"), QT_TR_NOOP("Not a WAV file?"));
-      printf (QT_TR_NOOP("WAV open file failed..."));
+      printf ("%s", QT_TR_NOOP("WAV open file failed..."));
       delete ac3;
 	  delete [] path;
       return 0;



From mean at mail.berlios.de  Sat Jul 11 10:05:40 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sat, 11 Jul 2009 10:05:40 +0200
Subject: [Avidemux-svn-commit] r5035 - in
	branches/avidemux_2.5_branch_gruntster: avidemux/ADM_core/src
	avidemux/ADM_libraries/ADM_smjs
	avidemux/ADM_userInterfaces/ADM_render
	plugins/ADM_audioDecoders/ADM_ad_ac3/ADM_liba52
	plugins/ADM_audioDevices/Alsa plugins/ADM_audioDevices/Arts
	plugins/ADM_audioDevices/Oss
Message-ID: <200907110805.n6B85eNQ014802@sheep.berlios.de>

Author: mean
Date: 2009-07-11 10:05:39 +0200 (Sat, 11 Jul 2009)
New Revision: 5035

Modified:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/src/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_smjs/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_render/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_audioDecoders/ADM_ad_ac3/ADM_liba52/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_audioDevices/Alsa/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_audioDevices/Arts/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_audioDevices/Oss/CMakeLists.txt
Log:
[Patch] plf underlinking

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/src/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/src/CMakeLists.txt	2009-07-11 08:03:10 UTC (rev 5034)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/src/CMakeLists.txt	2009-07-11 08:05:39 UTC (rev 5035)
@@ -5,6 +5,7 @@
 
 ADD_LIBRARY(ADM_core SHARED ${ADM_core_SRCS})
 ADD_TARGET_DEFINITIONS(ADM_core ADM_DEBUG FIND_LEAKS)
+TARGET_LINK_LIBRARIES(ADM_core dl)
 
 IF (MINGW)
 	TARGET_LINK_LIBRARIES(ADM_core "${PTHREAD_LIBRARIES}" imagehlp ws2_32)

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_smjs/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_smjs/CMakeLists.txt	2009-07-11 08:03:10 UTC (rev 5034)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_smjs/CMakeLists.txt	2009-07-11 08:05:39 UTC (rev 5035)
@@ -14,5 +14,6 @@
 ENDIF (MINGW)
 
 ADD_TARGET_CFLAGS(${ADM_LIB} "-DNDEBUG -DTRIMMED -DEXPORT_JS_API -DJS_USE_SAFE_ARENA -D_IEEE_LIBM")
+TARGET_LINK_LIBRARIES(${ADM_LIB} m)
 
 INSTALL(TARGETS ${ADM_LIB} RUNTIME DESTINATION ${BIN_DIR}  LIBRARY DESTINATION lib  ARCHIVE DESTINATION lib)
\ No newline at end of file

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_render/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_render/CMakeLists.txt	2009-07-11 08:03:10 UTC (rev 5034)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_render/CMakeLists.txt	2009-07-11 08:05:39 UTC (rev 5035)
@@ -27,6 +27,10 @@
 		TARGET_LINK_LIBRARIES(${ADM_LIB}_gtk ${SDL_LIBRARY})
 	ENDIF (USE_SDL)
 
+	IF (USE_XV)
+		TARGET_LINK_LIBRARIES(${ADM_LIB}_gtk ${XVIDEO_LIBRARY_DIR} X11 Xext)
+	ENDIF (USE_XV)
+
 	INSTALL(TARGETS ${ADM_LIB}_gtk RUNTIME DESTINATION ${BIN_DIR}  LIBRARY DESTINATION lib  ARCHIVE DESTINATION lib)
 ENDIF (ADM_UI_GTK)
 
@@ -35,6 +39,10 @@
 		TARGET_LINK_LIBRARIES(${ADM_LIB}_qt4 ${SDL_LIBRARY})
 	ENDIF (USE_SDL)
 
+	IF (USE_XV)
+		TARGET_LINK_LIBRARIES(${ADM_LIB}_qt4 ${XVIDEO_LIBRARY_DIR} X11 Xext)
+	ENDIF (USE_XV)
+
 	INSTALL(TARGETS ${ADM_LIB}_qt4 RUNTIME DESTINATION ${BIN_DIR}  LIBRARY DESTINATION lib  ARCHIVE DESTINATION lib)
 ENDIF (ADM_UI_QT4)
 

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_audioDecoders/ADM_ad_ac3/ADM_liba52/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_audioDecoders/ADM_ad_ac3/ADM_liba52/CMakeLists.txt	2009-07-11 08:03:10 UTC (rev 5034)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_audioDecoders/ADM_ad_ac3/ADM_liba52/CMakeLists.txt	2009-07-11 08:05:39 UTC (rev 5035)
@@ -5,9 +5,7 @@
 
 ADD_LIBRARY(${ADM_LIB} STATIC ${${ADM_LIB}_SRCS})
 
-IF (WIN32 OR APPLE)
-	TARGET_LINK_LIBRARIES(${ADM_LIB} ADM_core)
-ENDIF (WIN32 OR APPLE)
+TARGET_LINK_LIBRARIES(${ADM_LIB} ADM_core)
 
 IF (UNIX)
 	ADD_TARGET_CFLAGS(${ADM_LIB} -fPIC)

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_audioDevices/Alsa/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_audioDevices/Alsa/CMakeLists.txt	2009-07-11 08:03:10 UTC (rev 5034)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_audioDevices/Alsa/CMakeLists.txt	2009-07-11 08:05:39 UTC (rev 5035)
@@ -4,7 +4,7 @@
 SET(ADM_av_alsa_SRCS ADM_deviceALSA.cpp)
 
 ADD_LIBRARY(ADM_av_alsa SHARED ${ADM_av_alsa_SRCS})
-TARGET_LINK_LIBRARIES(ADM_av_alsa ${ASOUND_LIBRARY})
+TARGET_LINK_LIBRARIES(ADM_av_alsa ADM_core ADM_coreAudio ${ASOUND_LIBRARY})
 
 INIT_AUDIO_DEVICE(ADM_av_alsa)
 INSTALL_AUDIODEVICE(ADM_av_alsa)

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_audioDevices/Arts/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_audioDevices/Arts/CMakeLists.txt	2009-07-11 08:03:10 UTC (rev 5034)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_audioDevices/Arts/CMakeLists.txt	2009-07-11 08:05:39 UTC (rev 5035)
@@ -4,7 +4,7 @@
 SET(ADM_av_arts_SRCS ADM_deviceArts.cpp)
 
 ADD_LIBRARY(ADM_av_arts SHARED ${ADM_av_arts_SRCS})
-TARGET_LINK_LIBRARIES(ADM_av_arts ${ARTS_LDFLAGS})
+TARGET_LINK_LIBRARIES(ADM_av_arts ADM_coreAudio ${ARTS_LDFLAGS})
 ADD_DEFINITIONS(${ARTS_CFLAGS})
 INIT_AUDIO_DEVICE(ADM_av_arts)
 INSTALL_AUDIODEVICE(ADM_av_arts)

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_audioDevices/Oss/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_audioDevices/Oss/CMakeLists.txt	2009-07-11 08:03:10 UTC (rev 5034)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_audioDevices/Oss/CMakeLists.txt	2009-07-11 08:05:39 UTC (rev 5035)
@@ -4,6 +4,7 @@
 SET(ADM_av_oss_SRCS ADM_deviceoss.cpp)
 
 ADD_LIBRARY(ADM_av_oss SHARED ${ADM_av_oss_SRCS})
+TARGET_LINK_LIBRARIES(ADM_av_oss ADM_coreAudio)
 include_directories(${OSS_INCLUDE_DIR})
 INIT_AUDIO_DEVICE(ADM_av_oss)
 INSTALL_AUDIODEVICE(ADM_av_oss)



From mean at mail.berlios.de  Sat Jul 11 10:06:22 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sat, 11 Jul 2009 10:06:22 +0200
Subject: [Avidemux-svn-commit] r5036 -
	branches/avidemux_2.5_branch_gruntster/plugins/ADM_audioEncoders/lavcodec
Message-ID: <200907110806.n6B86MVR014888@sheep.berlios.de>

Author: mean
Date: 2009-07-11 10:06:21 +0200 (Sat, 11 Jul 2009)
New Revision: 5036

Modified:
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_audioEncoders/lavcodec/audioencoder_lavcodec.cpp
Log:
[Patch] wrong include

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_audioEncoders/lavcodec/audioencoder_lavcodec.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_audioEncoders/lavcodec/audioencoder_lavcodec.cpp	2009-07-11 08:05:39 UTC (rev 5035)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_audioEncoders/lavcodec/audioencoder_lavcodec.cpp	2009-07-11 08:06:21 UTC (rev 5036)
@@ -19,7 +19,6 @@
 #include "ADM_default.h"
 #include "DIA_factory.h"
 #include "DIA_coreToolkit.h"
-#include <lame/lame.h>
 #include "audioencoder.h"
 #include "audioencoderInternal.h"
 //



From mean at mail.berlios.de  Sat Jul 11 10:32:16 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sat, 11 Jul 2009 10:32:16 +0200
Subject: [Avidemux-svn-commit] r5037 - in branches/avidemux_2.6_branch_mean:
	avidemux/qt4/ADM_userInterfaces/ADM_dialog
	avidemux_core/ADM_coreVideoEncoder/src
	avidemux_core/ADM_ffmpeg/libavcodec
Message-ID: <200907110832.n6B8WGNR019603@sheep.berlios.de>

Author: mean
Date: 2009-07-11 10:32:15 +0200 (Sat, 11 Jul 2009)
New Revision: 5037

Modified:
   branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_dialog/Q_props.cpp
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoEncoder/src/ADM_coreVideoEncoderFFmpeg.cpp
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavcodec/h263.c
Log:
[plf] Merge some patch from 2.5/plf

Modified: branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_dialog/Q_props.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_dialog/Q_props.cpp	2009-07-11 08:06:21 UTC (rev 5036)
+++ branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_dialog/Q_props.cpp	2009-07-11 08:32:15 UTC (rev 5037)
@@ -75,10 +75,10 @@
               switch (wavinfo->channels)
                 {
                 case 1:
-                    sprintf(text, QT_TR_NOOP("Mono"));
+                    sprintf(text,"%s", QT_TR_NOOP("Mono"));
                     break;
                 case 2:
-                    sprintf(text, QT_TR_NOOP("Stereo"));
+                    sprintf(text,"%s", QT_TR_NOOP("Stereo"));
                     break;
                 default:
                     sprintf(text, "%d",wavinfo->channels);

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoEncoder/src/ADM_coreVideoEncoderFFmpeg.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoEncoder/src/ADM_coreVideoEncoderFFmpeg.cpp	2009-07-11 08:06:21 UTC (rev 5036)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoEncoder/src/ADM_coreVideoEncoderFFmpeg.cpp	2009-07-11 08:32:15 UTC (rev 5037)
@@ -20,7 +20,7 @@
 #include "ADM_coreVideoEncoderFFmpeg.h"
 #include "prefs.h"
 #define ADM_NO_PTS 0xFFFFFFFFFFFFFFFFLL // FIXME
-
+#define TIME_TENTH_MILLISEC
 #define aprintf(...) {}
 /**
     \fn ADM_coreVideoEncoderFFmpeg
@@ -121,10 +121,14 @@
     uint64_t f=source->getInfo()->frameIncrement;
     // Let's put 100 us as time  base
     _context->time_base.den=10000LL;
+#ifdef TIME_TENTH_MILLISEC
+    _context->time_base.num=1;
+#else
     if(f>=100)
         _context->time_base.num=f/100;
     else
         _context->time_base.num=1;
+#endif
     //printf("[Time base] %d/%d\n", _context->time_base.num,_context->time_base.den);
     return true;
 }
@@ -144,13 +148,22 @@
     prolog();
     // put a time stamp...
     if(image->Pts==ADM_NO_PTS) 
+    {
+        ADM_assert(0);
         _frame.pts=AV_NOPTS_VALUE;
+    }
     else
     {
         float f=image->Pts,n=_context->time_base.num,d=_context->time_base.den;
+#ifdef TIME_TENTH_MILLISEC
         f=f/100;
+#else
+        f=f/100;
         f=f/n;
+#endif
         _frame.pts=f;
+
+        printf("*** PTS:%d time_base :%d/%d\n",_frame.pts,_context->time_base.num,_context->time_base.den);
     }
     //
     //printf("[PTS] :%"LU" num:%"LU" den:%"LU"\n",_frame.pts,_context->time_base.num,_context->time_base.den);

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavcodec/h263.c
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavcodec/h263.c	2009-07-11 08:06:21 UTC (rev 5036)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavcodec/h263.c	2009-07-11 08:32:15 UTC (rev 5037)
@@ -2282,11 +2282,14 @@
         time= FFMIN(time, s->reordered_input_picture[1]->pts);
     time= time*s->avctx->time_base.num;
 
+    #undef printf
+    
+
     seconds= time/s->avctx->time_base.den;
     minutes= seconds/60; seconds %= 60;
     hours= minutes/60; minutes %= 60;
     hours%=24;
-
+printf("%02d:%02d:%02d\n",hours,minutes,seconds);
     put_bits(&s->pb, 5, hours);
     put_bits(&s->pb, 6, minutes);
     put_bits(&s->pb, 1, 1);



From mean at mail.berlios.de  Sat Jul 11 10:32:18 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sat, 11 Jul 2009 10:32:18 +0200
Subject: [Avidemux-svn-commit] r5038 -
	branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/src
Message-ID: <200907110832.n6B8WIuk019619@sheep.berlios.de>

Author: mean
Date: 2009-07-11 10:32:18 +0200 (Sat, 11 Jul 2009)
New Revision: 5038

Removed:
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/src/ADM_fileio.cpp
Modified:
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/src/CMakeLists.txt
Log:
[core] Removed duplicate fileio

Deleted: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/src/ADM_fileio.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/src/ADM_fileio.cpp	2009-07-11 08:32:15 UTC (rev 5037)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/src/ADM_fileio.cpp	2009-07-11 08:32:18 UTC (rev 5038)
@@ -1,124 +0,0 @@
-//
-// C++ Implementation: %{MODULE}
-//
-// Description:
-//
-//
-// Author: %{AUTHOR} <%{EMAIL}>, (C) %{YEAR}
-//
-// Copyright: See COPYING file that comes with this distribution
-//
-//
-
-/*
-* MODIFIED BY GMV 30.1.05: prepared for ODML
-*/
-
-#include "ADM_default.h"
-#include "ADM_fileio.h"
-#include "ADM_quota.h"
-
-#define ADM_FILE_BUFFER 4*256*1024 // 256 kB
-//#define ADMF_DEBUG
-ADMFile::ADMFile( void)
-{
-        _out=NULL;
-        _fill=0;
-        _curPos=0;
-        _buffer=new uint8_t[ADM_FILE_BUFFER];
-        ADM_assert(_buffer);
-        
-}
-ADMFile::~ADMFile()
-{
-        flush();
-        if(_buffer) 
-                delete [] _buffer;
-        _buffer=NULL;
-}
-uint8_t ADMFile::open(FILE *in)
-{
-        ADM_assert(!_out);
-        ADM_assert(in);
-        _out=in;
-        _curPos=ftello(_out);
-        _fill=0;
-        return 1;
-}
-uint8_t ADMFile::flush(void)
-{
- ADM_assert(_fill<=ADM_FILE_BUFFER);
-        if(_fill)
-        {
-                
-                qfwrite(_buffer,_fill,1,_out);
-                
-                _curPos+=_fill;
-#ifdef ADMF_DEBUG                
-                printf("Flushing %lu bytes, now at :%lu\n",_fill,_curPos);
-#endif                
-                _fill=0;
-        }
-        return 1;
-}
-uint64_t ADMFile::tell(void)
-{
- ADM_assert(_fill<ADM_FILE_BUFFER);
-	// MOD Feb 2005 by GMV
-	// uint32_t c;
-	uint64_t c;
-	// END MOD Feb 2005 by GMV
-        
-     
-        flush();
-#ifdef ADMF_DEBUG           
-        c=ftello(_out);
-        ADM_assert(c==_curPos);
-        printf("[%lu] Ftell :%lu \n",this,c);
-#endif        
-        return _curPos+_fill;  
-}
-uint8_t ADMFile::seek(uint64_t where)
-{
- ADM_assert(_fill<ADM_FILE_BUFFER);
-        flush();
-        fseeko(_out,where,SEEK_SET);
-        _curPos=where;
-#ifdef ADMF_DEBUG        
-        printf("[%lu] Fseek :%lu \n",this,where);
-#endif        
-        return 1;
-}
-//
-// Buffered write
-//
-uint8_t ADMFile::write(uint8_t *data,uint32_t how)
-{
-        uint32_t oneshot;
-#ifdef ADMF_DEBUG        
-        printf("[%lu]Fwrite : %lu\n",this,how);
-        printf("Curpos:%lu ",_curPos);
-        printf("Tell  :%lu ",ftello(_out));
-        printf("Fill :%lu\n",_fill);
-#endif        
-        while(1)
-        {
-                ADM_assert(_fill<ADM_FILE_BUFFER);
-                oneshot=_fill+how;
-                if(oneshot<ADM_FILE_BUFFER)
-                {
-                        memcpy(_buffer+_fill,data,how);
-                        _fill+=how;
-                        return 1;
-                }
-                // copy what's possible
-                oneshot=ADM_FILE_BUFFER-_fill;
-                memcpy(_buffer+_fill,data,oneshot);
-                _fill+=oneshot;
-                flush();
-                data+=oneshot;
-                how-=oneshot;
-        }
-
-        return 1;
-}

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/src/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/src/CMakeLists.txt	2009-07-11 08:32:15 UTC (rev 5037)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/src/CMakeLists.txt	2009-07-11 08:32:18 UTC (rev 5038)
@@ -1,6 +1,5 @@
 SET(ADM_coreUtils_SRCS 
 ADM_bitstream.cpp 
-ADM_fileio.cpp 
 avidemutils.cpp  
 ADM_quota.cpp
 fourcc.cpp



From mean at mail.berlios.de  Sat Jul 11 10:33:48 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sat, 11 Jul 2009 10:33:48 +0200
Subject: [Avidemux-svn-commit] r5039 -
	branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavcodec
Message-ID: <200907110833.n6B8XmXt019773@sheep.berlios.de>

Author: mean
Date: 2009-07-11 10:33:48 +0200 (Sat, 11 Jul 2009)
New Revision: 5039

Modified:
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavcodec/h263.c
Log:
[oops] Reverted debug statement

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavcodec/h263.c
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavcodec/h263.c	2009-07-11 08:32:18 UTC (rev 5038)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavcodec/h263.c	2009-07-11 08:33:48 UTC (rev 5039)
@@ -2282,14 +2282,12 @@
         time= FFMIN(time, s->reordered_input_picture[1]->pts);
     time= time*s->avctx->time_base.num;
 
-    #undef printf
     
 
     seconds= time/s->avctx->time_base.den;
     minutes= seconds/60; seconds %= 60;
     hours= minutes/60; minutes %= 60;
     hours%=24;
-printf("%02d:%02d:%02d\n",hours,minutes,seconds);
     put_bits(&s->pb, 5, hours);
     put_bits(&s->pb, 6, minutes);
     put_bits(&s->pb, 1, 1);



From mean at mail.berlios.de  Sat Jul 11 12:17:02 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sat, 11 Jul 2009 12:17:02 +0200
Subject: [Avidemux-svn-commit] r5040 -
	branches/avidemux_2.6_branch_mean/avidemux_core/ADM_core/src
Message-ID: <200907111017.n6BAH2td002037@sheep.berlios.de>

Author: mean
Date: 2009-07-11 12:17:01 +0200 (Sat, 11 Jul 2009)
New Revision: 5040

Removed:
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_core/src/ADM_fileio.cpp.orig
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_core/src/ADM_win32.cpp.orig
Modified:
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_core/src/CMakeLists.txt
Log:
[core] Cleanup + fileio->file

Deleted: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_core/src/ADM_fileio.cpp.orig
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_core/src/ADM_fileio.cpp.orig	2009-07-11 08:33:48 UTC (rev 5039)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_core/src/ADM_fileio.cpp.orig	2009-07-11 10:17:01 UTC (rev 5040)
@@ -1,687 +0,0 @@
-/***************************************************************************
-                    
-    copyright            : (C) 2006 by mean
-    email                : fixounet at free.fr
- ***************************************************************************/
-
-/***************************************************************************
- *                                                                         *
- *   This program is free software; you can redistribute it and/or modify  *
- *   it under the terms of the GNU General Public License as published by  *
- *   the Free Software Foundation; either version 2 of the License, or     *
- *   (at your option) any later version.                                   *
- *                                                                         *
- ***************************************************************************/
-
-#include <stdio.h>
-#include <stdlib.h>
-#include <string.h>
-#include <dirent.h>
-#include <errno.h>
-#include <sys/stat.h>
-#include <unistd.h>
-
-#ifdef __WIN32
-#include <direct.h>
-#include <shlobj.h>
-#include <fcntl.h>
-#elif defined(__APPLE__)
-#include <Carbon/Carbon.h>
-#endif
-
-#include "ADM_default.h"
-#include "DIA_fileSel.h"
-
-
-#ifdef __WIN32
-static const char *separator="\\";
-const char *ADM_DIR_NAME="\\avidemux";
-#else
-static const char *separator="/";
-const char *ADM_DIR_NAME="/.avidemux";
-#endif
-
-static char ADM_basedir[1024] = {0};
-static char *ADM_jobdir = NULL;
-static char *ADM_customdir = NULL;
-static int baseDirDone = 0;
-
-#undef fread
-#undef fwrite
-#undef fopen
-#undef fclose
-
-#ifdef __WIN32
-extern int utf8StringToWideChar(const char *utf8String, int utf8StringLength, wchar_t *wideCharString);
-extern int wideCharStringToUtf8(const wchar_t *wideCharString, int wideCharStringLength, char *utf8String);
-#endif
-
-size_t ADM_fread (void *ptr, size_t size, size_t n, FILE *sstream)
-{
-	return fread(ptr,size,n,sstream);
-}
-
-size_t ADM_fwrite(void *ptr, size_t size, size_t n, FILE *sstream)
-{
-	return fwrite(ptr,size,n,sstream);
-}
-
-FILE *ADM_fopen(const char *file, const char *mode)
-{
-#ifdef __MINGW32__
-	// Override fopen to handle Unicode filenames and to ensure exclusive access when initially writing to a file.
-	int fileNameLength = utf8StringToWideChar(file, -1, NULL);
-	wchar_t wcFile[fileNameLength];
-	int creation = 0, access = 0;
-	HANDLE hFile;
-
-	utf8StringToWideChar(file, -1, wcFile);
-
-	if (strchr(mode, 'w'))
-	{
-		creation = CREATE_ALWAYS;
-		access = GENERIC_WRITE;
-
-		if (strchr(mode, '+'))
-			access |= GENERIC_READ;
-	}
-	else if (strchr(mode, 'r'))
-	{
-		creation = OPEN_EXISTING;
-		access = GENERIC_READ;
-
-		if (strchr(mode, '+'))
-			access = GENERIC_WRITE;
-	}
-	else if (strchr(mode, 'a'))
-	{
-		creation = OPEN_ALWAYS;
-		access = GENERIC_WRITE;
-
-		if (strchr(mode, '+'))
-			access |= GENERIC_READ;
-	}
-
-	if (creation & GENERIC_WRITE)
-	{
-		hFile = CreateFileW(wcFile, access, 0, NULL, creation, 0, NULL);
-
-		if (hFile == INVALID_HANDLE_VALUE)
-			return NULL;
-		else
-			CloseHandle(hFile);
-	}
-
-	hFile = CreateFileW(wcFile, access, FILE_SHARE_READ, NULL, creation, 0, NULL);
-
-	if (hFile == INVALID_HANDLE_VALUE)
-		return NULL;
-	else
-		return _fdopen(_open_osfhandle((intptr_t)hFile, 0), mode);
-#else
-	return fopen(file, mode);
-#endif
-}
-
-#if __WIN32
-extern "C"
-{
-	// libavformat uses open (in the file_open function) so we need to override that too.
-	// Following the same rules as ADM_fopen.
-	int ADM_open(const char *path, int oflag, ...)
-	{
-		int fileNameLength = utf8StringToWideChar(path, -1, NULL);
-		wchar_t wcFile[fileNameLength];
-		int creation = 0, access = 0;
-		HANDLE hFile;
-
-		utf8StringToWideChar(path, -1, wcFile);
-
-		if (oflag & O_WRONLY || oflag & O_RDWR)
-		{
-			access = GENERIC_WRITE;
-
-			if (oflag & O_RDWR)
-				access |= GENERIC_READ;
-
-			if (oflag & O_CREAT)
-			{
-				if (oflag & O_EXCL)
-					creation = CREATE_NEW;
-				else if (oflag & O_TRUNC)
-					creation = CREATE_ALWAYS;
-				else
-					creation = OPEN_ALWAYS;
-			}
-			else if (oflag & O_TRUNC)
-				creation = TRUNCATE_EXISTING;
-		}
-		else if (oflag & O_RDONLY)
-			creation = OPEN_EXISTING;
-
-		if (creation & GENERIC_WRITE)
-		{
-			hFile = CreateFileW(wcFile, access, 0, NULL, creation, 0, NULL);
-
-			if (hFile == INVALID_HANDLE_VALUE)
-				return -1;
-			else
-				CloseHandle(hFile);
-		}
-
-		hFile = CreateFileW(wcFile, access, FILE_SHARE_READ, NULL, creation, 0, NULL);
-
-		if (hFile == INVALID_HANDLE_VALUE)
-			return -1;
-		else
-			return _open_osfhandle((intptr_t)hFile, oflag);
-	}
-}
-#endif
-
-int ADM_fclose(FILE *file)
-{
-	return fclose(file); 
-}
-
-/*
-      Get the  directory where jobs are stored
-******************************************************/
-char *ADM_getCustomDir(void)
-{
-	if (ADM_customdir)
-		return ADM_customdir;
-
-	ADM_customdir = ADM_getHomeRelativePath("custom");
-
-	if (!ADM_mkdir(ADM_customdir))
-	{
-		printf("can't create custom directory (%s).\n", ADM_customdir);
-		return NULL;
-	}
-
-	return ADM_customdir;
-}
-
-/*
-      Get the  directory where jobs are stored
-******************************************************/
-char *ADM_getJobDir(void)
-{
-	if (ADM_jobdir)
-		return ADM_jobdir;
-
-	ADM_jobdir = ADM_getHomeRelativePath("jobs");
-
-	if (!ADM_mkdir(ADM_jobdir))
-	{
-		printf("can't create custom directory (%s).\n", ADM_jobdir);
-		return NULL;
-	}
-
-	return ADM_jobdir;
-}
-
-/**
- * 	\fn ADM_getRelativePath
- */
-static char *ADM_getRelativePath(const char *base0,const char *base1, const char *base2,const char *base3)
-{
-	char *result;
-	int length = strlen(base1);
-
-	if (base2)
-		length += strlen(base2);
-
-	if (base3)
-		length += strlen(base3);
-
-	length += strlen(base0);
-	length += 5; // Slashes + end 0
-	result = (char *)new char [length];
-	strcpy(result, base0);
-	strcat(result, separator);
-
-	strcat(result, base1);
-	strcat(result, separator);
-
-	if (base2)
-	{
-		strcat(result, base2);
-		strcat(result, separator);
-
-		if (base3)
-		{
-			strcat(result, base3);
-			strcat(result, separator);
-		}
-	}
-
-	return result;
-}
-
-/**
- * 	\fn char *ADM_getHomeRelativePath(const char *base1, const char *base2=NULL,const char *base3=NULL);
- *  \brief Returns home directory +base 1 + base 2... The return value is a copy, and must be deleted []
- */
-char *ADM_getHomeRelativePath(const char *base1, const char *base2,const char *base3)
-{
-	return ADM_getRelativePath(ADM_getBaseDir(), base1, base2, base3);
-}
-
-char *ADM_getInstallRelativePath(const char *base1, const char *base2,const char *base3)
-{
-#ifdef __WIN32
-	char moduleName[MAX_PATH];
-
-	GetModuleFileName(0, moduleName, sizeof(moduleName) / sizeof(char));
-
-	char *slash = strrchr(moduleName, '\\');
-		
-	if (slash)
-		*slash = '\0';
-
-	return ADM_getRelativePath(moduleName, base1, base2, base3);
-#elif defined(__APPLE__)
-#define MAX_PATH_SIZE 1024
-
-	char buffer[MAX_PATH_SIZE];
-
-	CFURLRef url(CFBundleCopyExecutableURL(CFBundleGetMainBundle()));
-	buffer[0] = '\0';
-
-	if (url)
-	{
-		CFURLGetFileSystemRepresentation(url, true, (UInt8*)buffer, MAX_PATH_SIZE);
-		CFRelease(url);
-
-		char *slash = strrchr(buffer, '/');
-		
-		if (slash)
-			*slash = '\0';
-	}
-
-	return ADM_getRelativePath(buffer, base1, base2, base3);
-#else
-	return ADM_getRelativePath(ADM_INSTALL_DIR, base1, base2, base3);
-#endif
-}
-
-char *ADM_getPluginPath(void)
-{
-	return ADM_getInstallRelativePath("lib", "ADM_plugins", "videoEncoder");
-}
-/*
-      Get the root directory for .avidemux stuff
-******************************************************/
-char *ADM_getBaseDir(void)
-{
-	char *home;
-
-	if (baseDirDone)
-		return ADM_basedir;
-
-	// Get the base directory
-#ifdef __WIN32
-	wchar_t wcHome[MAX_PATH];
-
-	if (SHGetFolderPathW(NULL, CSIDL_APPDATA, NULL, 0, wcHome) == S_OK)
-	{
-		int len = wideCharStringToUtf8(wcHome, -1, NULL);
-		home = new char[len];
-
-		wideCharStringToUtf8(wcHome, -1, home);
-	}
-	else
-	{
-		printf("Oops: can't determine the Application Data folder.");
-		home = ADM_strdup("c:\\");
-	}
-#else
-	const char* homeEnv = getenv("HOME");
-
-	if (homeEnv)
-	{
-		home = new char[strlen(homeEnv) + 1];
-		strcpy(home, homeEnv);
-	}
-	else
-	{
-		printf("Oops: can't determine $HOME.");
-
-		return NULL;
-	}
-#endif
-
-	// Try to open the .avidemux directory
-	char *dirname = new char[strlen(home) + strlen(ADM_DIR_NAME) + 2];
-	strcpy(dirname, home);
-	strcat(dirname, ADM_DIR_NAME);
-
-	if (!ADM_mkdir(dirname))
-	{
-		printf("Oops: cannot create the .avidemux directory", NULL);
-		delete [] dirname;
-		return NULL;
-	}
-
-	delete [] dirname;
-
-	// Now built the filename
-	strncpy(ADM_basedir,home, 1023);
-	strncat(ADM_basedir, ADM_DIR_NAME, 1023 - strlen(ADM_basedir));
-	baseDirDone = 1;
-	printf("Using %s as base directory for prefs/jobs/...\n", ADM_basedir);
-
-	return ADM_basedir;
-}
-
-#ifdef __WIN32
-#define DIR _WDIR
-#define dirent _wdirent
-#define opendir _wopendir
-#define readdir _wreaddir
-#define closedir _wclosedir
-#endif
-
-/*----------------------------------------
-      Create a directory
-      If it already exists, do nothing
-------------------------------------------*/
-uint8_t ADM_mkdir(const char *dirname)
-{
-	DIR *dir = NULL;
-
-#ifdef __WIN32
-	int dirNameLength = utf8StringToWideChar(dirname, -1, NULL);
-	wchar_t dirname2[dirNameLength];
-
-	utf8StringToWideChar(dirname, -1, dirname2);
-#else
-	const char* dirname2 = dirname;
-#endif
-
-	// Check it already exists ?
-	dir = opendir(dirname2);
-
-	if (dir)
-	{ 
-		printf("Directory %s exists.Good.\n", dirname);
-		closedir(dir);
-		return 1;
-	}
-#ifdef __WIN32
-	if (_wmkdir(dirname2))
-	{
-		printf("Oops: mkdir failed on %s\n", dirname);
-		return 0;
-	}
-#else
-	char *sys = new char[strlen(dirname2) + strlen("mkdir ") + 2];
-
-	strcpy(sys, "mkdir ");
-	strcat(sys, dirname2);
-	printf("Creating dir :%s\n", sys);
-	system(sys);
-
-	delete [] sys;
-#endif
-
-	if ((dir = opendir(dirname2)) == NULL)
-		return 0;
-
-	closedir(dir);
-
-	return 1;
-}
-/**
- *  \fn buildDirectoryContent
- * 	\brief Returns the content of a dir with the extension ext. The receiving array must be allocated by caller
- * (just the array, not the names themselves)
- */
-uint8_t buildDirectoryContent(uint32_t *outnb, const char *base, char *jobName[], int maxElems, const char *ext)
-{
-	DIR *dir;
-	struct dirent *direntry;
-	int dirmax = 0, len;
-	int extlen = strlen(ext);
-
-	ADM_assert(extlen);
-
-#ifdef __WIN32
-	int dirNameLength = utf8StringToWideChar(base, -1, NULL);
-	wchar_t base2[dirNameLength];
-
-	utf8StringToWideChar(base, -1, base2);
-#else
-	const char *base2 = base;
-#endif
-
-	dir = opendir(base2);
-	if (!dir)
-		return 0;
-
-	while (direntry = readdir(dir))
-	{
-#ifdef __WIN32
-		int dirLength = wideCharStringToUtf8(direntry->d_name, -1, NULL);
-		char d_name[dirLength];
-
-		wideCharStringToUtf8(direntry->d_name, -1, d_name);
-#else
-		const char *d_name = direntry->d_name;
-#endif
-
-		len = strlen(d_name);
-
-		if (len < (extlen + 1))
-			continue;
-
-		int xbase = len - extlen;
-
-		if (memcmp(d_name + xbase, ext, extlen))
-			//if (direntry->d_name[len-1]!='s' || direntry->d_name[len-2]!='j' || direntry->d_name[len-3]!='.')
-		{
-			printf("ignored: %s\n", d_name);
-			continue;
-		}
-
-		jobName[dirmax] = (char *)ADM_alloc(strlen(base) + strlen(d_name) + 2);
-		strcpy(jobName[dirmax], base);
-		strcat(jobName[dirmax], "/");
-		strcat(jobName[dirmax], d_name);
-		dirmax++;
-
-		if (dirmax >= maxElems)
-		{
-			printf("[jobs]: Max # of jobs exceeded\n");
-			break;
-		}
-	}
-
-	closedir(dir);
-	*outnb = dirmax;
-
-	return 1;
-}
-//------------------------------------------------------------------
-
-/*
-
-** note: it modifies it's first argument
-*/
-void simplify_path(char **buf)
-{
-	unsigned int last1slash = 0;
-	unsigned int last2slash = 0;
-
-	while (!strncmp(*buf, "/../", 4))
-		memmove(*buf, *buf + 3, strlen(*buf + 3) + 1);
-
-	for (unsigned int i = 0; i < strlen(*buf) - 2; i++)
-		while (!strncmp(*buf + i, "/./", 3))
-			memmove(*buf + i, *buf + i + 2, strlen(*buf + i + 2) + 1);
-
-	for (unsigned int i = 0; i < strlen(*buf) - 3; i++)
-	{
-		if (*(*buf + i) == '/')
-		{
-			last2slash = last1slash;
-			last1slash = i;
-		}
-
-		if (!strncmp(*buf + i, "/../", 4))
-		{
-			memmove(*buf + last2slash, *buf + i + 3, strlen(*buf + i + 3) + 1);
-
-			return simplify_path(buf);
-		}
-	}
-}
-
-/**
-        \fn ADM_PathCanonize
-        \brief Canonize the path, returns a copy of the absolute path given as parameter
-*/
-char *ADM_PathCanonize(const char *tmpname)
-{
-	char path[300];
-	char *out;
-
-	if (!getcwd(path, 300))
-	{
-		fprintf(stderr, "\ngetcwd() failed with: %s (%u)\n", strerror(errno), errno);
-		path[0] = '\0';
-	}
-
-	if (!tmpname || tmpname[0] == 0)
-	{
-		out = new char[strlen(path) + 2];
-		strcpy(out, path);
-#ifndef __WIN32
-		strcat(out, "/");
-#else
-		strcat(out, "\\");
-#endif
-		printf("\n Canonizing null string ??? (%s)\n", out);
-	}
-	else if (tmpname[0] == '/'
-#if defined(__WIN32)
-		|| tmpname[1] == ':'
-#endif
-		)
-	{
-		out = new char[strlen(tmpname) + 1];
-		strcpy(out, tmpname);
-
-		return out;
-	}
-	else
-	{
-		out = new char[strlen(path) + strlen(tmpname) + 6];
-		strcpy(out, path);
-#ifndef __WIN32
-		strcat(out, "/");
-#else
-		strcat(out, "\\");
-#endif
-		strcat(out, tmpname);
-	}
-
-	simplify_path(&out);
-
-	return out;
-}
-
-/**
-        \fn ADM_PathStripName
-	\brief Returns path only /foo/bar.avi -> /foo INPLACE, no copy done
-
-*/
-void ADM_PathStripName(char *str)
-{
-	int len = strlen(str);
-
-	if (len <= 1)
-		return;
-
-	len--;
-
-#ifndef __WIN32
-	while (*(str + len) != '/' && len)
-#else
-	while (*(str + len) != '\\' && len)
-#endif
-	{
-		*(str + len) = 0;
-		len--;
-	}
-}
-
-/**
-    \fn ADM_GetFileName
-    \brief Get the filename without path. /foo/bar.avi -> bar.avi INPLACE, NO COPY
-
-*/
-const char *ADM_GetFileName(const char *str)
-{
-	char *filename;
-	char *filename2;
-
-#ifndef __WIN32
-	filename = strrchr(str, '/');
-#else
-	filename = strrchr(str, '\\');
-	filename2 = strrchr(str, '/');
-
-	if (filename2 && filename)
-		if (filename2 > filename)
-			filename = filename2;
-#endif
-
-	if (filename)
-		return filename + 1;
-	else
-		return str;
-}
-
-/**
-    \fn ADM_PathSplit
-    \brief Split path into absolute path+name and extention i.e. /foo/bar/zee.avi -> /foo/bar/zee,avi.             Copy are returned
-
-*/
-void ADM_PathSplit(const char *str, char **root, char **ext)
-{
-	char *full;
-	uint32_t l;
-
-	full = ADM_PathCanonize(str);
-	// Search the last
-	l = strlen(full);
-	l--;
-	ADM_assert(l > 0);
-
-	while (*(full + l) != '.' && l)
-		l--;
-
-	if (!l || l == (strlen(full) - 1))
-	{
-		if (l == (strlen(full) - 1))
-			*(full + l) = 0;  // remove trailing
-
-		*ext = new char[2];
-		*root = full;
-		strcpy(*ext, "");
-
-		return;
-	}
-	// else we do get an extension
-	// starting at l+1
-	uint32_t suff;
-
-	suff = strlen(full) - l - 1;
-	*ext = new char[suff + 1];
-	strcpy(*ext, full + l + 1);
-	*(full + l) = 0;
-	*root = full;
-}

Deleted: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_core/src/ADM_win32.cpp.orig
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_core/src/ADM_win32.cpp.orig	2009-07-11 08:33:48 UTC (rev 5039)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_core/src/ADM_win32.cpp.orig	2009-07-11 10:17:01 UTC (rev 5040)
@@ -1,506 +0,0 @@
-#ifdef __WIN32
-#include <stdio.h>
-#include <stdlib.h>
-#include <windows.h>
-
-#ifdef __MINGW32__
-#include <winsock2.h>
-#endif
-
-#include "ADM_default.h" 
-
-extern char *ADM_getBaseDir(void);
-
-void ADM_usleep(unsigned long us)
-{
-	Sleep(us/1000);
-}
-
-#ifdef __MINGW32__
-uint8_t win32_netInit(void)
-{
-	WSADATA wsaData;
-	int iResult;
-
-	printf("Initializing WinSock\n");
-	iResult = WSAStartup(MAKEWORD(2,2), &wsaData);
-
-	if (iResult != NO_ERROR)
-	{
-		printf("Error at WSAStartup()\n");
-		return 0;
-	}	
-
-	printf("WinSock ok\n");
-	return 1;
-}
-#endif
-
-#ifndef HAVE_GETTIMEOFDAY
-extern "C"
-{
-void gettimeofday(struct timeval *p, void *tz);
-}
-
-void gettimeofday(struct timeval *p, void *tz)
-{
-    unsigned long int sec;
-    SYSTEMTIME  tme;
-
-    GetSystemTime(&tme);
-
-    sec=tme.wSecond;
-    sec+=60*tme.wMinute;
-    sec+=60*60*tme.wHour;
-    
-	p->tv_sec=sec;
-	p->tv_usec=tme.wMilliseconds*1000;
-
-	return;
-}
-#endif	// HAVE_GETTIMEOFDAY
-
-int getpriority(int which, int who)
-{
-	unsigned int priorityClass;
-
-	ADM_assert(which == PRIO_PROCESS);
-	ADM_assert(who == 0);
-
-	priorityClass = GetPriorityClass(GetCurrentProcess());
-
-	switch (priorityClass)
-	{
-		case HIGH_PRIORITY_CLASS:
-			return -18;
-			break;
-		case ABOVE_NORMAL_PRIORITY_CLASS:
-			return -10;
-			break;
-		case NORMAL_PRIORITY_CLASS:
-			return 0;
-			break;
-		case BELOW_NORMAL_PRIORITY_CLASS:
-			return 10;
-			break;
-		case IDLE_PRIORITY_CLASS:
-			return 18;
-			break;
-		default:
-			ADM_assert(0);
-	}
-}
-
-int setpriority(int which, int who, int value)
-{
-	unsigned int priorityClass;
-
-	ADM_assert(which == PRIO_PROCESS);
-	ADM_assert(who == 0);
-	ADM_assert(value >= PRIO_MIN && value <= PRIO_MAX);
-
-	if (value >= -20 && value <= -16)
-	{
-		priorityClass = HIGH_PRIORITY_CLASS;
-	}
-	else if (value >= -15 && value <= -6)
-	{
-		priorityClass = ABOVE_NORMAL_PRIORITY_CLASS;
-	}
-	else if (value >= -5 && value <= 4)
-	{
-		priorityClass = NORMAL_PRIORITY_CLASS;
-	}
-	else if (value >= 6 && value <= 15)
-	{
-		priorityClass = BELOW_NORMAL_PRIORITY_CLASS;
-	}
-	else if (value >= 16 && value <= 20)
-	{
-		priorityClass = IDLE_PRIORITY_CLASS;
-	}
-
-	if (!SetPriorityClass(GetCurrentProcess(), priorityClass))
-	{
-		return -1;
-	}
-
-	return 0;
-}
-
-int shutdown_win32(void)
-{
-	HANDLE hToken;
-	TOKEN_PRIVILEGES tkp;
-
-	// Get a token for this process. 
-	if (!OpenProcessToken(GetCurrentProcess(), TOKEN_ADJUST_PRIVILEGES | TOKEN_QUERY, &hToken))
-	{
-		return -1;
-	}
-
-	// Get the LUID for the shutdown privilege.
-	LookupPrivilegeValue(NULL, SE_SHUTDOWN_NAME, &tkp.Privileges[0].Luid);
-
-	tkp.PrivilegeCount = 1;  // one privilege to set
-	tkp.Privileges[0].Attributes = SE_PRIVILEGE_ENABLED;
-
-	// Get the shutdown privilege for this process.
-	AdjustTokenPrivileges(hToken, FALSE, &tkp, 0, (PTOKEN_PRIVILEGES)NULL, 0);
-
-	if (GetLastError() != ERROR_SUCCESS)
-	{
-		return -1;
-	}
-
-	// Shut down the system and force all applications to close.
-	if (!ExitWindowsEx(EWX_POWEROFF | EWX_FORCE, SHTDN_REASON_FLAG_PLANNED))
-	{
-		return -1;
-	}
-
-	return 0;
-}
-
-#ifndef PRODUCT_BUSINESS
-#define PRODUCT_BUSINESS 0x00000006
-#endif
-
-#ifndef PRODUCT_BUSINESS_N
-#define PRODUCT_BUSINESS_N 0x00000010
-#endif
-
-#ifndef PRODUCT_HOME_BASIC
-#define PRODUCT_HOME_BASIC 0x00000002
-#endif
-
-#ifndef PRODUCT_HOME_BASIC_N
-#define PRODUCT_HOME_BASIC_N 0x00000005
-#endif
-
-#ifndef PRODUCT_HOME_PREMIUM
-#define PRODUCT_HOME_PREMIUM 0x00000003
-#endif 
-
-#ifndef PRODUCT_STARTER
-#define PRODUCT_STARTER 0x0000000B
-#endif
-
-#ifndef PRODUCT_ENTERPRISE
-#define PRODUCT_ENTERPRISE 0x00000004
-#endif 
-
-#ifndef PRODUCT_ULTIMATE
-#define PRODUCT_ULTIMATE 0x00000001
-#endif
-
-bool getWindowsVersion(char* version)
-{
-	int index = 0;
-	OSVERSIONINFOEX osvi = {};
-
-	osvi.dwOSVersionInfoSize = sizeof(OSVERSIONINFOEX);
-
-	if (!GetVersionEx((OSVERSIONINFO*)&osvi))
-		return false;
-
-	if (osvi.dwPlatformId != VER_PLATFORM_WIN32_NT)
-		return false;
-// Vista
-	if (osvi.dwMajorVersion == 6 && osvi.dwMinorVersion == 0)
-	{
-		if (osvi.wProductType == VER_NT_WORKSTATION)
-		{
-			index += sprintf(version + index, "Microsoft Windows Vista");
-
-			uint32_t productType = 0;
-
-			HMODULE hKernel = GetModuleHandle("KERNEL32.DLL");
-
-			if (hKernel)
-			{
-				typedef bool (__stdcall *funcGetProductInfo)(uint32_t, uint32_t, uint32_t, uint32_t, uint32_t*);
-				funcGetProductInfo pGetProductInfo = (funcGetProductInfo)GetProcAddress(hKernel, "GetProductInfo"); 
-
-				if (pGetProductInfo)
-					pGetProductInfo(6, 0, 0, 0, &productType);
-	  
-				switch (productType)
-				{
-				case PRODUCT_STARTER:
-				{
-					index += sprintf(version + index, " Starter");
-					break;
-				}
-				case PRODUCT_HOME_BASIC_N:
-				{
-					index += sprintf(version + index, " Home Basic N");
-					break;
-				}
-				case PRODUCT_HOME_BASIC:
-				{
-					index += sprintf(version + index, " Home Basic");
-					break;
-				}
-				case PRODUCT_HOME_PREMIUM:
-				{
-					index += sprintf(version + index, " Home Premium");
-					break;
-				}
-				case PRODUCT_BUSINESS_N:
-				{
-					index += sprintf(version + index, " Business N");
-					break;
-				}
-				case PRODUCT_BUSINESS:
-				{
-					index += sprintf(version + index, " Business");
-					break;
-				}
-				case PRODUCT_ENTERPRISE:
-				{
-					index += sprintf(version + index, " Enterprise");
-					break;
-				}
-				case PRODUCT_ULTIMATE:
-				{
-					index += sprintf(version + index, " Ultimate");
-					break;
-				}
-				default:
-					break;
-				}
-			}
-		}
-		else if (osvi.wProductType == VER_NT_SERVER)
-		{
-			index += sprintf(version + index, "Microsoft Windows Server 2008");
-
-			if (osvi.wSuiteMask & VER_SUITE_DATACENTER)
-				index += sprintf(version + index, " Datacenter Edition");
-			else if (osvi.wSuiteMask & VER_SUITE_ENTERPRISE)
-				index += sprintf(version + index, " Enterprise Edition");
-			else if (osvi.wSuiteMask == VER_SUITE_BLADE)
-				index += sprintf(version + index, " Web Edition");
-			else
-				index += sprintf(version + index, " Standard Edition");
-		}
-	}
-// Windows Server 2003
-	else if (osvi.dwMajorVersion == 5 && osvi.dwMinorVersion == 2)
-	{
-		index += sprintf(version + index, "Microsoft Windows Server 2003");
-
-		if (GetSystemMetrics(SM_SERVERR2))
-			index += sprintf(version + index, " R2");
-
-		if (osvi.wSuiteMask & VER_SUITE_DATACENTER)
-			index += sprintf(version + index, " Datacenter Edition");
-		else if (osvi.wSuiteMask & VER_SUITE_ENTERPRISE)
-			index += sprintf(version + index, " Enterprise Edition");
-		else if (osvi.wSuiteMask == VER_SUITE_BLADE)
-			index += sprintf(version + index, " Web Edition");
-		else
-			index += sprintf(version + index, " Standard Edition");
-	}
-// Windows XP
-	else if (osvi.dwMajorVersion == 5 && osvi.dwMinorVersion == 1)
-	{
-		index += sprintf(version + index, "Microsoft Windows XP");
-
-		if (GetSystemMetrics(SM_MEDIACENTER))
-			index += sprintf(version + index, " Media Center Edition");
-		else if (GetSystemMetrics(SM_STARTER))
-			index += sprintf(version + index, " Starter Edition");
-		else if (GetSystemMetrics(SM_TABLETPC))
-			index += sprintf(version + index, " Tablet PC Edition");
-		else if (osvi.wSuiteMask & VER_SUITE_PERSONAL)
-			index += sprintf(version + index, " Home Edition");
-		else
-			index += sprintf(version + index, " Professional");
-	}
-// Windows 2000
-	else if (osvi.dwMajorVersion == 5 && osvi.dwMinorVersion == 0)
-	{
-		index += sprintf(version + index, "Microsoft Windows 2000");
-
-		if (osvi.wProductType == VER_NT_WORKSTATION)
-		{
-			index += sprintf(version + index, " Professional");
-		}
-		else if (osvi.wProductType == VER_NT_SERVER)
-		{
-			if (osvi.wSuiteMask & VER_SUITE_DATACENTER)
-				index += sprintf(version + index, " Datacenter Server");
-			else if (osvi.wSuiteMask & VER_SUITE_ENTERPRISE)
-				index += sprintf(version + index, " Advanced Server");
-			else
-				index += sprintf(version + index, " Server");
-		}
-	}
-// Windows NT 4
-	else if (osvi.dwMajorVersion == 4)
-	{
-		index += sprintf(version + index, "Microsoft Windows NT 4");
-
-		if (osvi.wProductType == VER_NT_WORKSTATION)
-		{
-			index += sprintf(version + index, " Workstation");
-		}
-		else if (osvi.wProductType == VER_NT_SERVER)
-		{
-			if (osvi.wSuiteMask & VER_SUITE_ENTERPRISE)
-				index += sprintf(version + index, " Server, Enterprise Edition");
-			else
-				index += sprintf(version + index, " Server");
-		}
-	}
-	else
-	{
-		index += sprintf(version + index, "Microsoft Windows");
-	}
-
-// Service pack and full version info
-	if (strlen(osvi.szCSDVersion) > 0)
-	{
-		index += sprintf(version + index, " %s", osvi.szCSDVersion);
-	}
-
-	index += sprintf(version + index, " (%d.%d.%d", osvi.dwMajorVersion, osvi.dwMinorVersion, osvi.dwBuildNumber & 0xFFFF);
-
-// 64-bit Windows
-	bool isWow64 = false;
-	HMODULE hKernel = GetModuleHandle("kernel32.dll");
-
-	if (hKernel)
-	{
-		typedef bool (*funcIsWow64Process)(void*, bool*);  
-
-	    funcIsWow64Process pIsWow64Process = (funcIsWow64Process)GetProcAddress(hKernel, "IsWow64Process"); 
-
-	    if (pIsWow64Process)
-	    {
-			pIsWow64Process(GetCurrentProcess(), &isWow64);
-		}
-	}
-
-	if (isWow64)
-		index += sprintf(version + index, "; 64-bit");
-	else
-		index += sprintf(version + index, "; 32-bit");
-
-	index += sprintf(version + index, ")");
-	
-	return true;
-}
-
-void redirectStdoutToFile(void)
-{
-	// Don't redirect stdout and stderr if SDL hasn't already hijacked it.
-	// This allows us to optionally compile all EXEs as console applications
-	// so the output can be printed to the terminal for debugging purposes.
-
-	// Close SDL generated logs
-	fclose(stdout);
-	fclose(stderr);
-
-	// Briefly redirect to console
-	freopen("CON", "w", stdout);
-	freopen("CON", "w", stderr);
-
-	// Remove SDL logs to avoid confusion
-	char path[MAX_PATH];
-	char stdoutPath[MAX_PATH];
-	char stderrPath[MAX_PATH];
-	DWORD pathlen = GetModuleFileName(NULL, path, MAX_PATH);
-
-	while (pathlen > 0 && path[pathlen] != '\\')
-		pathlen--;
-
-	path[pathlen] = '\0';
-
-	strcpy(stdoutPath, path);
-	strcat(stdoutPath, "\\stdout.txt");
-	strcpy(stderrPath, path);
-	strcat(stderrPath, "\\stderr.txt");
-
-	remove(stdoutPath);
-	remove(stderrPath);
-
-	// Redirect output to log file in the user's profile directory
-	const char* logFile = "admlog.txt";
-	char* baseDir = ADM_getBaseDir();
-	char *logPath = new char[strlen(baseDir) + 2 + strlen(logFile)];
-	FILE* stream;
-
-	strcpy(logPath, baseDir);
-	strcat(logPath, "/");
-	strcat(logPath, logFile);
-
-	fclose(stdout);
-	fclose(stderr);
-
-	stream = fopen(logPath, "w");
-
-	if (stream)
-	{
-		*stdout = *stream;
-		*stderr = *stream;
-	}
-
-	// Line buffering
-	setvbuf(stdout, NULL, _IONBF, BUFSIZ); 
-	setvbuf(stderr, NULL, _IONBF, BUFSIZ);
-
-	delete[] logPath;
-}
-
-// Convert string from ANSI code page to wide char
-int ansiStringToWideChar(const char *ansiString, int ansiStringLength, wchar_t *wideCharString)
-{
-	int wideCharStringLen = MultiByteToWideChar(CP_ACP, 0, ansiString, ansiStringLength, NULL, 0);
-
-	if (wideCharString)
-		MultiByteToWideChar(CP_ACP, 0, ansiString, ansiStringLength, wideCharString, wideCharStringLen);
-
-	return wideCharStringLen;
-}
-
-// Convert UTF-8 string to wide char
-int utf8StringToWideChar(const char *utf8String, int utf8StringLength, wchar_t *wideCharString)
-{
-	int wideCharStringLength = MultiByteToWideChar(CP_UTF8, 0, utf8String, utf8StringLength, NULL, 0);
-
-	if (wideCharString)
-		MultiByteToWideChar(CP_UTF8, 0, utf8String, utf8StringLength, wideCharString, wideCharStringLength);
-
-	return wideCharStringLength;
-}
-
-// Convert Wide Char string to UTF-8
-int wideCharStringToUtf8(const wchar_t *wideCharString, int wideCharStringLength, char *utf8String)
-{
-	int utf8StringLen = WideCharToMultiByte(CP_UTF8, 0, wideCharString, wideCharStringLength, NULL, 0, NULL, NULL);
-
-	if (utf8String)
-		WideCharToMultiByte(CP_UTF8, 0, wideCharString, wideCharStringLength, utf8String, utf8StringLen, NULL, NULL);
-
-	return utf8StringLen;
-}
-
-// Convert string from ANSI code page to UTF-8
-int ansiStringToUtf8(const char *ansiString, int ansiStringLength, char *utf8String)
-{
-	int wideCharStringLen = ansiStringToWideChar(ansiString, ansiStringLength, NULL);
-	wchar_t wideCharString[wideCharStringLen];
-
-	ansiStringToWideChar(ansiString, ansiStringLength, wideCharString);
-
-	int multiByteStringLen = wideCharStringToUtf8(wideCharString, wideCharStringLen, NULL);
-
-	if (utf8String)
-		wideCharStringToUtf8(wideCharString, wideCharStringLen, utf8String);
-
-	return multiByteStringLen;
-}
-#endif	// __WIN32

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_core/src/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_core/src/CMakeLists.txt	2009-07-11 08:33:48 UTC (rev 5039)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_core/src/CMakeLists.txt	2009-07-11 10:17:01 UTC (rev 5040)
@@ -2,6 +2,7 @@
 	ADM_cpuCap.cpp  ADM_memcpy.cpp  ADM_memsupport.cpp  ADM_threads.cpp  ADM_win32.cpp
 	ADM_memory.cpp  ADM_misc.cpp  TLK_clock.cpp  ADM_crashdump.cpp  ADM_fileio.cpp ADM_dynamicLoading.cpp
         ADM_debug.cpp 
+        ADM_file.cpp
 )
 
 ADD_LIBRARY(ADM_core SHARED ${ADM_core_SRCS})



From mean at mail.berlios.de  Sat Jul 11 12:17:04 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sat, 11 Jul 2009 12:17:04 +0200
Subject: [Avidemux-svn-commit] r5041 -
	branches/avidemux_2.6_branch_mean/avidemux_core/ADM_core/src
Message-ID: <200907111017.n6BAH4e8002047@sheep.berlios.de>

Author: mean
Date: 2009-07-11 12:17:04 +0200 (Sat, 11 Jul 2009)
New Revision: 5041

Added:
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_core/src/ADM_file.cpp
Log:
[core] Fileio->file

Added: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_core/src/ADM_file.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_core/src/ADM_file.cpp	2009-07-11 10:17:01 UTC (rev 5040)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_core/src/ADM_file.cpp	2009-07-11 10:17:04 UTC (rev 5041)
@@ -0,0 +1,124 @@
+//
+// C++ Implementation: %{MODULE}
+//
+// Description:
+//
+//
+// Author: %{AUTHOR} <%{EMAIL}>, (C) %{YEAR}
+//
+// Copyright: See COPYING file that comes with this distribution
+//
+//
+
+/*
+* MODIFIED BY GMV 30.1.05: prepared for ODML
+*/
+
+#include "ADM_default.h"
+#include "ADM_fileio.h"
+#include "ADM_quota.h"
+
+#define ADM_FILE_BUFFER 4*256*1024 // 256 kB
+//#define ADMF_DEBUG
+ADMFile::ADMFile( void)
+{
+        _out=NULL;
+        _fill=0;
+        _curPos=0;
+        _buffer=new uint8_t[ADM_FILE_BUFFER];
+        ADM_assert(_buffer);
+        
+}
+ADMFile::~ADMFile()
+{
+        flush();
+        if(_buffer) 
+                delete [] _buffer;
+        _buffer=NULL;
+}
+uint8_t ADMFile::open(FILE *in)
+{
+        ADM_assert(!_out);
+        ADM_assert(in);
+        _out=in;
+        _curPos=ftello(_out);
+        _fill=0;
+        return 1;
+}
+uint8_t ADMFile::flush(void)
+{
+ ADM_assert(_fill<=ADM_FILE_BUFFER);
+        if(_fill)
+        {
+                
+                qfwrite(_buffer,_fill,1,_out);
+                
+                _curPos+=_fill;
+#ifdef ADMF_DEBUG                
+                printf("Flushing %lu bytes, now at :%lu\n",_fill,_curPos);
+#endif                
+                _fill=0;
+        }
+        return 1;
+}
+uint64_t ADMFile::tell(void)
+{
+ ADM_assert(_fill<ADM_FILE_BUFFER);
+	// MOD Feb 2005 by GMV
+	// uint32_t c;
+	uint64_t c;
+	// END MOD Feb 2005 by GMV
+        
+     
+        flush();
+#ifdef ADMF_DEBUG           
+        c=ftello(_out);
+        ADM_assert(c==_curPos);
+        printf("[%lu] Ftell :%lu \n",this,c);
+#endif        
+        return _curPos+_fill;  
+}
+uint8_t ADMFile::seek(uint64_t where)
+{
+ ADM_assert(_fill<ADM_FILE_BUFFER);
+        flush();
+        fseeko(_out,where,SEEK_SET);
+        _curPos=where;
+#ifdef ADMF_DEBUG        
+        printf("[%lu] Fseek :%lu \n",this,where);
+#endif        
+        return 1;
+}
+//
+// Buffered write
+//
+uint8_t ADMFile::write(uint8_t *data,uint32_t how)
+{
+        uint32_t oneshot;
+#ifdef ADMF_DEBUG        
+        printf("[%lu]Fwrite : %lu\n",this,how);
+        printf("Curpos:%lu ",_curPos);
+        printf("Tell  :%lu ",ftello(_out));
+        printf("Fill :%lu\n",_fill);
+#endif        
+        while(1)
+        {
+                ADM_assert(_fill<ADM_FILE_BUFFER);
+                oneshot=_fill+how;
+                if(oneshot<ADM_FILE_BUFFER)
+                {
+                        memcpy(_buffer+_fill,data,how);
+                        _fill+=how;
+                        return 1;
+                }
+                // copy what's possible
+                oneshot=ADM_FILE_BUFFER-_fill;
+                memcpy(_buffer+_fill,data,oneshot);
+                _fill+=oneshot;
+                flush();
+                data+=oneshot;
+                how-=oneshot;
+        }
+
+        return 1;
+}



From mean at mail.berlios.de  Sat Jul 11 17:37:54 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sat, 11 Jul 2009 17:37:54 +0200
Subject: [Avidemux-svn-commit] r5042 - in
	branches/avidemux_2.5_branch_gruntster/avidemux: ADM_core/src
	ADM_inputs/ADM_mpegdemuxer ADM_libraries/ADM_libmpeg2enc
	ADM_libraries/ADM_mplex
Message-ID: <200907111537.n6BFbs9N001041@sheep.berlios.de>

Author: mean
Date: 2009-07-11 17:37:54 +0200 (Sat, 11 Jul 2009)
New Revision: 5042

Modified:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/src/ADM_fileio.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_mpegdemuxer/dmx_io.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libmpeg2enc/yuv4mpeg_ratio.cc
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_mplex/lpcmstrm_in.cpp
Log:
[Build] Gcc 4.4 fixes by whaevr

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/src/ADM_fileio.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/src/ADM_fileio.cpp	2009-07-11 10:17:04 UTC (rev 5041)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/src/ADM_fileio.cpp	2009-07-11 15:37:54 UTC (rev 5042)
@@ -681,7 +681,7 @@
 */
 const char *ADM_GetFileName(const char *str)
 {
-	char *filename;
+	const char *filename;
 	char *filename2;
 
 #ifndef __WIN32

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_mpegdemuxer/dmx_io.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_mpegdemuxer/dmx_io.cpp	2009-07-11 10:17:04 UTC (rev 5041)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_mpegdemuxer/dmx_io.cpp	2009-07-11 15:37:54 UTC (rev 5042)
@@ -71,7 +71,7 @@
 */
 uint8_t fileParser::open( const char *filename,FP_TYPE *multi )
 {
-        char *dot = NULL;                   // pointer to the last dot in filename
+        const char *dot = NULL;                   // pointer to the last dot in filename
         uint8_t decimals = 0;               // number of decimals
         char *left = NULL, *number = NULL, *right = NULL; // parts of filename (after splitting)
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libmpeg2enc/yuv4mpeg_ratio.cc
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libmpeg2enc/yuv4mpeg_ratio.cc	2009-07-11 10:17:04 UTC (rev 5041)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libmpeg2enc/yuv4mpeg_ratio.cc	2009-07-11 15:37:54 UTC (rev 5042)
@@ -104,7 +104,7 @@
 
 int y4m_parse_ratio(y4m_ratio_t *r, const char *s)
 {
-  char *t = strchr(s, ':');
+  const char *t = strchr(s, ':');
   if (t == NULL) return Y4M_ERR_RANGE;
   r->n = atoi(s);
   r->d = atoi(t+1);

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_mplex/lpcmstrm_in.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_mplex/lpcmstrm_in.cpp	2009-07-11 10:17:04 UTC (rev 5041)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_mplex/lpcmstrm_in.cpp	2009-07-11 15:37:54 UTC (rev 5042)
@@ -53,7 +53,7 @@
 
 bool LPCMStream::Probe(IBitStream &bs )
 {
-    char *last_dot = strrchr( bs.StreamName(), '.' );
+    const char *last_dot = strrchr( bs.StreamName(), '.' );
     return 
         last_dot != NULL 
         && strcmp( last_dot+1, "lpcm") == 0;



From mean at mail.berlios.de  Sat Jul 11 18:09:37 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sat, 11 Jul 2009 18:09:37 +0200
Subject: [Avidemux-svn-commit] r5043 -
	branches/avidemux_2.6_branch_mean/avidemux_core/ADM_core/src
Message-ID: <200907111609.n6BG9b9C005622@sheep.berlios.de>

Author: mean
Date: 2009-07-11 18:09:36 +0200 (Sat, 11 Jul 2009)
New Revision: 5043

Modified:
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_core/src/ADM_fileio.cpp
Log:
[build] gcc 4.4 patch by whaver

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_core/src/ADM_fileio.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_core/src/ADM_fileio.cpp	2009-07-11 15:37:54 UTC (rev 5042)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_core/src/ADM_fileio.cpp	2009-07-11 16:09:36 UTC (rev 5043)
@@ -626,7 +626,7 @@
 const char *ADM_GetFileName(const char *str)
 {
 	char *filename;
-	char *filename2;
+	const char *filename2;
 
 #ifndef __WIN32
 	filename = strrchr(str, '/');



From mean at mail.berlios.de  Sat Jul 11 18:09:39 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sat, 11 Jul 2009 18:09:39 +0200
Subject: [Avidemux-svn-commit] r5044 -
	branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerAvi
Message-ID: <200907111609.n6BG9dks005643@sheep.berlios.de>

Author: mean
Date: 2009-07-11 18:09:39 +0200 (Sat, 11 Jul 2009)
New Revision: 5044

Modified:
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerAvi/op_aviwrite.cpp
Log:
[AviMuxer] Cosmetic

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerAvi/op_aviwrite.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerAvi/op_aviwrite.cpp	2009-07-11 16:09:36 UTC (rev 5043)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerAvi/op_aviwrite.cpp	2009-07-11 16:09:39 UTC (rev 5044)
@@ -287,7 +287,7 @@
       header->dwQuality = 0xffffffff;
       header->dwSuggestedBufferSize = 8000;
 
-
+      printf("[ODML/Audio] Encoding 0x%x\n",wav.encoding);
 	switch(wav.encoding)
 	{
         case WAV_IMAADPCM:
@@ -488,7 +488,7 @@
 
         // test for free data structures
         if(odml_indexes!=NULL){
-            aprintf("\n ODML writer error: data structures not empty for init!");
+            aprintf("[ODML] ODML writer error: data structures not empty for init!");
             return 0;
         }
 
@@ -496,21 +496,21 @@
 	if(doODML!=NO){
 		// get number of streams
 		odml_nbrof_streams=_mainheader.dwStreams;
-		aprintf("\nnumber of streams: %d\n",odml_nbrof_streams);
+		aprintf("[ODML]number of streams: %d\n",odml_nbrof_streams);
 		// get number of frames per index
 
 		odml_index_size=(long)ceil(1000000.0/(double)_mainheader.dwMicroSecPerFrame*600.0);	// one index per 10 Minutes; decrease if 4GB are not enough for this amount of time
-                aprintf("\n old number of frames per index: %d\n",odml_index_size);
+                aprintf("[ODML] old number of frames per index: %d\n",odml_index_size);
                 double fps=video->getAvgFps1000();
                         fps/=1000;
                         aprintf("Fps1000:%f\n",fps);
                         fps=600*fps; // 10 mn worth;
                         odml_index_size=(int)floor(fps);
 
-		aprintf("\nnumber of frames per index: %d\n",odml_index_size);
+		aprintf("[ODML]number of frames per index: %d\n",odml_index_size);
 		// get number or indexes per stream
 		odml_default_nbrof_index=2048;
-		aprintf("\nnumber of indexes per stream: %d\n",odml_default_nbrof_index);
+		aprintf("[ODML]number of indexes per stream: %d\n",odml_default_nbrof_index);
 		// init some other values
 		odml_header_fpos=0;
 		odml_riff_fpos[0]=0;odml_riff_fpos[1]=0;odml_riff_fpos[2]=0;odml_riff_fpos[3]=0;
@@ -889,7 +889,7 @@
 	if(doODML!=NO){
 		// save file position
 		*fpos=alist->Tell();
-		aprintf("\nwrite dummy chunk at file position %lu with data size %u\n",*fpos, size);
+		aprintf("[ODML]write dummy chunk at file position %lu with data size %u\n",*fpos, size);
 		// generate dummy data
 		uint8_t* dummy=(uint8_t*)ADM_alloc (size);
 		memset(dummy,0,size);



From mean at mail.berlios.de  Sat Jul 11 18:09:41 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sat, 11 Jul 2009 18:09:41 +0200
Subject: [Avidemux-svn-commit] r5045 -
	branches/avidemux_2.6_branch_mean/avidemux/common/ADM_audioFilter/src
Message-ID: <200907111609.n6BG9fkP005681@sheep.berlios.de>

Author: mean
Date: 2009-07-11 18:09:41 +0200 (Sat, 11 Jul 2009)
New Revision: 5045

Modified:
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_audioFilter/src/audio_encoderPlugin.cpp
Log:
[AudioEncoder] No need for static

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_audioFilter/src/audio_encoderPlugin.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_audioFilter/src/audio_encoderPlugin.cpp	2009-07-11 16:09:39 UTC (rev 5044)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_audioFilter/src/audio_encoderPlugin.cpp	2009-07-11 16:09:41 UTC (rev 5045)
@@ -338,7 +338,7 @@
 ADM_AudioEncoder *audioEncoderCreate(AUDMAudioFilter *filter)
 {
       ADM_assert(currentEncoder<ListOfAudioEncoder.size());
-      static ADM_audioEncoder *enc=ListOfAudioEncoder[currentEncoder];
+      ADM_audioEncoder *enc=ListOfAudioEncoder[currentEncoder];
      return enc->create(filter);
 }
 /**



From gruntster at mail.berlios.de  Sat Jul 11 19:06:51 2009
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Sat, 11 Jul 2009 19:06:51 +0200
Subject: [Avidemux-svn-commit] r5046 - in
	branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder:
	ADM_vidEnc_avcodec ADM_vidEnc_x264 ADM_vidEnc_xvid common
Message-ID: <200907111706.n6BH6pLp015532@sheep.berlios.de>

Author: gruntster
Date: 2009-07-11 19:06:41 +0200 (Sat, 11 Jul 2009)
New Revision: 5046

Modified:
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/mpeg1EncoderOptions.cpp
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/x264Options.cpp
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_xvid/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_xvid/xvidOptions.cpp
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/common/PluginOptions.cpp
Log:
[vidEnc] Linux compilation fixes

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/CMakeLists.txt	2009-07-11 16:09:41 UTC (rev 5045)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/CMakeLists.txt	2009-07-11 17:06:41 UTC (rev 5046)
@@ -9,12 +9,13 @@
 endif (WIN32)
 
 SET(PLUGIN_SUBDIR "avcodec")
-SET(ADM_vidEnc_avcodec_SRCS  interface.c  encoder.cpp  ../common/PluginOptions.cpp  huffyuvEncoder.cpp
+SET(ADM_vidEnc_avcodec_SRCS  interface.c  encoder.cpp  huffyuvEncoder.cpp
 							 ffvhuffEncoder.cpp  ffv1Encoder.cpp  dvEncoder.cpp  mpeg1Encoder.cpp
 							 mpeg1EncoderOptions.cpp)
 
 INCLUDE_DIRECTORIES(${CMAKE_CURRENT_BINARY_DIR} ${LIBXML2_INCLUDE_DIR})
 ADD_DEFINITIONS(${LIBXML2_DEFINITIONS})
+ADD_DEFINITIONS(-DPLUGIN_SUBDIR="${PLUGIN_SUBDIR}")
 
 getFfmpegLibNames(${AVIDEMUX_SOURCE_DIR}/avidemux/ADM_libraries/ffmpeg)
 

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/mpeg1EncoderOptions.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/mpeg1EncoderOptions.cpp	2009-07-11 16:09:41 UTC (rev 5045)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/mpeg1EncoderOptions.cpp	2009-07-11 17:06:41 UTC (rev 5046)
@@ -30,7 +30,7 @@
 #include "ADM_inttype.h"
 #include "ADM_files.h"
 
-#include "config.h"
+#include "../common/PluginOptions.cpp"
 #include "mpeg1EncoderOptions.h"
 
 Mpeg1EncoderOptions::Mpeg1EncoderOptions(void) : PluginOptions("Mpeg1", "Mpeg1Param.xsd", DEFAULT_ENCODE_MODE, DEFAULT_ENCODE_MODE_PARAMETER)

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/CMakeLists.txt	2009-07-11 16:09:41 UTC (rev 5045)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/CMakeLists.txt	2009-07-11 17:06:41 UTC (rev 5046)
@@ -16,8 +16,7 @@
 		ADD_DEFINITIONS(${LIBXML2_DEFINITIONS})
 		ADD_DEFINITIONS(-DPLUGIN_SUBDIR="${PLUGIN_SUBDIR}")
 		
-		SET(ADM_vidEnc_x264_SRCS interface.c configGuiLoader.cpp encoder.cpp guiHelper.cpp zoneOptions.cpp x264Options.cpp
-								 ../common/PluginOptions.cpp)
+		SET(ADM_vidEnc_x264_SRCS interface.c configGuiLoader.cpp encoder.cpp guiHelper.cpp zoneOptions.cpp x264Options.cpp)
 
 		CONFIGURE_FILE("${CMAKE_CURRENT_SOURCE_DIR}/config.h.cmake" "${CMAKE_CURRENT_BINARY_DIR}/config.h")
 

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/x264Options.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/x264Options.cpp	2009-07-11 16:09:41 UTC (rev 5045)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/x264Options.cpp	2009-07-11 17:06:41 UTC (rev 5046)
@@ -30,6 +30,8 @@
 #include "config.h"
 #include "ADM_inttype.h"
 #include "ADM_files.h"
+
+#include "../common/PluginOptions.cpp"
 #include "x264Options.h"
 
 x264Options::x264Options(void) : PluginOptions("x264", "x264Param.xsd", DEFAULT_ENCODE_MODE, DEFAULT_ENCODE_MODE_PARAMETER)

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_xvid/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_xvid/CMakeLists.txt	2009-07-11 16:09:41 UTC (rev 5045)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_xvid/CMakeLists.txt	2009-07-11 17:06:41 UTC (rev 5046)
@@ -15,8 +15,7 @@
 		ADD_DEFINITIONS(${LIBXML2_DEFINITIONS})
 		ADD_DEFINITIONS(-DPLUGIN_SUBDIR="${PLUGIN_SUBDIR}")
 
-		SET(ADM_vidEnc_xvid_SRCS interface.c  encoder.cpp  xvidOptions.cpp  configGuiLoader.cpp
-								 ../common/PluginOptions.cpp)
+		SET(ADM_vidEnc_xvid_SRCS interface.c  encoder.cpp  xvidOptions.cpp  configGuiLoader.cpp)
 
 		CONFIGURE_FILE("${CMAKE_CURRENT_SOURCE_DIR}/config.h.cmake" "${CMAKE_CURRENT_BINARY_DIR}/config.h")
 

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_xvid/xvidOptions.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_xvid/xvidOptions.cpp	2009-07-11 16:09:41 UTC (rev 5045)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_xvid/xvidOptions.cpp	2009-07-11 17:06:41 UTC (rev 5046)
@@ -29,6 +29,8 @@
 #include "config.h"
 #include "ADM_inttype.h"
 #include "ADM_files.h"
+
+#include "../common/PluginOptions.cpp"
 #include "xvidOptions.h"
 
 XvidOptions::XvidOptions(void) : PluginOptions("Xvid", "XvidParam.xsd", DEFAULT_ENCODE_MODE, DEFAULT_ENCODE_MODE_PARAMETER)

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/common/PluginOptions.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/common/PluginOptions.cpp	2009-07-11 16:09:41 UTC (rev 5045)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/common/PluginOptions.cpp	2009-07-11 17:06:41 UTC (rev 5046)
@@ -20,7 +20,6 @@
 #include <sstream>
 #include <string>
 
-#include "config.h"
 #include "ADM_inttype.h"
 #include "ADM_files.h"
 #include "PluginOptions.h"



From mean at mail.berlios.de  Sat Jul 11 19:09:05 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sat, 11 Jul 2009 19:09:05 +0200
Subject: [Avidemux-svn-commit] r5047 - in
	branches/avidemux_2.6_branch_mean/avidemux_core: ADM_core/src
	ADM_coreUtils/src
Message-ID: <200907111709.n6BH95b1019524@sheep.berlios.de>

Author: mean
Date: 2009-07-11 19:08:55 +0200 (Sat, 11 Jul 2009)
New Revision: 5047

Added:
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/src/ADM_file.cpp
Removed:
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_core/src/ADM_file.cpp
Modified:
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_core/src/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/src/CMakeLists.txt
Log:
[ADM_file] Move it back to coreUtil (win32)

Deleted: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_core/src/ADM_file.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_core/src/ADM_file.cpp	2009-07-11 17:06:41 UTC (rev 5046)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_core/src/ADM_file.cpp	2009-07-11 17:08:55 UTC (rev 5047)
@@ -1,124 +0,0 @@
-//
-// C++ Implementation: %{MODULE}
-//
-// Description:
-//
-//
-// Author: %{AUTHOR} <%{EMAIL}>, (C) %{YEAR}
-//
-// Copyright: See COPYING file that comes with this distribution
-//
-//
-
-/*
-* MODIFIED BY GMV 30.1.05: prepared for ODML
-*/
-
-#include "ADM_default.h"
-#include "ADM_fileio.h"
-#include "ADM_quota.h"
-
-#define ADM_FILE_BUFFER 4*256*1024 // 256 kB
-//#define ADMF_DEBUG
-ADMFile::ADMFile( void)
-{
-        _out=NULL;
-        _fill=0;
-        _curPos=0;
-        _buffer=new uint8_t[ADM_FILE_BUFFER];
-        ADM_assert(_buffer);
-        
-}
-ADMFile::~ADMFile()
-{
-        flush();
-        if(_buffer) 
-                delete [] _buffer;
-        _buffer=NULL;
-}
-uint8_t ADMFile::open(FILE *in)
-{
-        ADM_assert(!_out);
-        ADM_assert(in);
-        _out=in;
-        _curPos=ftello(_out);
-        _fill=0;
-        return 1;
-}
-uint8_t ADMFile::flush(void)
-{
- ADM_assert(_fill<=ADM_FILE_BUFFER);
-        if(_fill)
-        {
-                
-                qfwrite(_buffer,_fill,1,_out);
-                
-                _curPos+=_fill;
-#ifdef ADMF_DEBUG                
-                printf("Flushing %lu bytes, now at :%lu\n",_fill,_curPos);
-#endif                
-                _fill=0;
-        }
-        return 1;
-}
-uint64_t ADMFile::tell(void)
-{
- ADM_assert(_fill<ADM_FILE_BUFFER);
-	// MOD Feb 2005 by GMV
-	// uint32_t c;
-	uint64_t c;
-	// END MOD Feb 2005 by GMV
-        
-     
-        flush();
-#ifdef ADMF_DEBUG           
-        c=ftello(_out);
-        ADM_assert(c==_curPos);
-        printf("[%lu] Ftell :%lu \n",this,c);
-#endif        
-        return _curPos+_fill;  
-}
-uint8_t ADMFile::seek(uint64_t where)
-{
- ADM_assert(_fill<ADM_FILE_BUFFER);
-        flush();
-        fseeko(_out,where,SEEK_SET);
-        _curPos=where;
-#ifdef ADMF_DEBUG        
-        printf("[%lu] Fseek :%lu \n",this,where);
-#endif        
-        return 1;
-}
-//
-// Buffered write
-//
-uint8_t ADMFile::write(uint8_t *data,uint32_t how)
-{
-        uint32_t oneshot;
-#ifdef ADMF_DEBUG        
-        printf("[%lu]Fwrite : %lu\n",this,how);
-        printf("Curpos:%lu ",_curPos);
-        printf("Tell  :%lu ",ftello(_out));
-        printf("Fill :%lu\n",_fill);
-#endif        
-        while(1)
-        {
-                ADM_assert(_fill<ADM_FILE_BUFFER);
-                oneshot=_fill+how;
-                if(oneshot<ADM_FILE_BUFFER)
-                {
-                        memcpy(_buffer+_fill,data,how);
-                        _fill+=how;
-                        return 1;
-                }
-                // copy what's possible
-                oneshot=ADM_FILE_BUFFER-_fill;
-                memcpy(_buffer+_fill,data,oneshot);
-                _fill+=oneshot;
-                flush();
-                data+=oneshot;
-                how-=oneshot;
-        }
-
-        return 1;
-}

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_core/src/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_core/src/CMakeLists.txt	2009-07-11 17:06:41 UTC (rev 5046)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_core/src/CMakeLists.txt	2009-07-11 17:08:55 UTC (rev 5047)
@@ -2,7 +2,6 @@
 	ADM_cpuCap.cpp  ADM_memcpy.cpp  ADM_memsupport.cpp  ADM_threads.cpp  ADM_win32.cpp
 	ADM_memory.cpp  ADM_misc.cpp  TLK_clock.cpp  ADM_crashdump.cpp  ADM_fileio.cpp ADM_dynamicLoading.cpp
         ADM_debug.cpp 
-        ADM_file.cpp
 )
 
 ADD_LIBRARY(ADM_core SHARED ${ADM_core_SRCS})

Copied: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/src/ADM_file.cpp (from rev 5045, branches/avidemux_2.6_branch_mean/avidemux_core/ADM_core/src/ADM_file.cpp)
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_core/src/ADM_file.cpp	2009-07-11 16:09:41 UTC (rev 5045)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/src/ADM_file.cpp	2009-07-11 17:08:55 UTC (rev 5047)
@@ -0,0 +1,124 @@
+//
+// C++ Implementation: %{MODULE}
+//
+// Description:
+//
+//
+// Author: %{AUTHOR} <%{EMAIL}>, (C) %{YEAR}
+//
+// Copyright: See COPYING file that comes with this distribution
+//
+//
+
+/*
+* MODIFIED BY GMV 30.1.05: prepared for ODML
+*/
+
+#include "ADM_default.h"
+#include "ADM_fileio.h"
+#include "ADM_quota.h"
+
+#define ADM_FILE_BUFFER 4*256*1024 // 256 kB
+//#define ADMF_DEBUG
+ADMFile::ADMFile( void)
+{
+        _out=NULL;
+        _fill=0;
+        _curPos=0;
+        _buffer=new uint8_t[ADM_FILE_BUFFER];
+        ADM_assert(_buffer);
+        
+}
+ADMFile::~ADMFile()
+{
+        flush();
+        if(_buffer) 
+                delete [] _buffer;
+        _buffer=NULL;
+}
+uint8_t ADMFile::open(FILE *in)
+{
+        ADM_assert(!_out);
+        ADM_assert(in);
+        _out=in;
+        _curPos=ftello(_out);
+        _fill=0;
+        return 1;
+}
+uint8_t ADMFile::flush(void)
+{
+ ADM_assert(_fill<=ADM_FILE_BUFFER);
+        if(_fill)
+        {
+                
+                qfwrite(_buffer,_fill,1,_out);
+                
+                _curPos+=_fill;
+#ifdef ADMF_DEBUG                
+                printf("Flushing %lu bytes, now at :%lu\n",_fill,_curPos);
+#endif                
+                _fill=0;
+        }
+        return 1;
+}
+uint64_t ADMFile::tell(void)
+{
+ ADM_assert(_fill<ADM_FILE_BUFFER);
+	// MOD Feb 2005 by GMV
+	// uint32_t c;
+	uint64_t c;
+	// END MOD Feb 2005 by GMV
+        
+     
+        flush();
+#ifdef ADMF_DEBUG           
+        c=ftello(_out);
+        ADM_assert(c==_curPos);
+        printf("[%lu] Ftell :%lu \n",this,c);
+#endif        
+        return _curPos+_fill;  
+}
+uint8_t ADMFile::seek(uint64_t where)
+{
+ ADM_assert(_fill<ADM_FILE_BUFFER);
+        flush();
+        fseeko(_out,where,SEEK_SET);
+        _curPos=where;
+#ifdef ADMF_DEBUG        
+        printf("[%lu] Fseek :%lu \n",this,where);
+#endif        
+        return 1;
+}
+//
+// Buffered write
+//
+uint8_t ADMFile::write(uint8_t *data,uint32_t how)
+{
+        uint32_t oneshot;
+#ifdef ADMF_DEBUG        
+        printf("[%lu]Fwrite : %lu\n",this,how);
+        printf("Curpos:%lu ",_curPos);
+        printf("Tell  :%lu ",ftello(_out));
+        printf("Fill :%lu\n",_fill);
+#endif        
+        while(1)
+        {
+                ADM_assert(_fill<ADM_FILE_BUFFER);
+                oneshot=_fill+how;
+                if(oneshot<ADM_FILE_BUFFER)
+                {
+                        memcpy(_buffer+_fill,data,how);
+                        _fill+=how;
+                        return 1;
+                }
+                // copy what's possible
+                oneshot=ADM_FILE_BUFFER-_fill;
+                memcpy(_buffer+_fill,data,oneshot);
+                _fill+=oneshot;
+                flush();
+                data+=oneshot;
+                how-=oneshot;
+        }
+
+        return 1;
+}

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/src/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/src/CMakeLists.txt	2009-07-11 17:06:41 UTC (rev 5046)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/src/CMakeLists.txt	2009-07-11 17:08:55 UTC (rev 5047)
@@ -6,6 +6,7 @@
 ADM_infoExtractor.cpp
 ADM_frameType.cpp
 ADM_codecType.cpp
+ADM_file.cpp
 prefs.cpp)
 
 ADD_LIBRARY(ADM_coreUtils SHARED ${ADM_coreUtils_SRCS})



From mean at mail.berlios.de  Sat Jul 11 19:10:10 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sat, 11 Jul 2009 19:10:10 +0200
Subject: [Avidemux-svn-commit] r5048 -
	branches/avidemux_2.6_branch_mean/avidemux_core/ADM_core/src
Message-ID: <200907111710.n6BHAAAa020971@sheep.berlios.de>

Author: mean
Date: 2009-07-11 19:10:09 +0200 (Sat, 11 Jul 2009)
New Revision: 5048

Modified:
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_core/src/ADM_fileio.cpp
Log:
[win32] const char vs char

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_core/src/ADM_fileio.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_core/src/ADM_fileio.cpp	2009-07-11 17:08:55 UTC (rev 5047)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_core/src/ADM_fileio.cpp	2009-07-11 17:10:09 UTC (rev 5048)
@@ -625,7 +625,7 @@
 */
 const char *ADM_GetFileName(const char *str)
 {
-	char *filename;
+	const char *filename;
 	const char *filename2;
 
 #ifndef __WIN32



From mean at mail.berlios.de  Sat Jul 11 20:48:55 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sat, 11 Jul 2009 20:48:55 +0200
Subject: [Avidemux-svn-commit] r5049 - branches/avidemux_2.5_branch_gruntster
Message-ID: <200907111848.n6BImt1u015484@sheep.berlios.de>

Author: mean
Date: 2009-07-11 20:48:55 +0200 (Sat, 11 Jul 2009)
New Revision: 5049

Modified:
   branches/avidemux_2.5_branch_gruntster/bootStrap.sh
Log:
[BooStrap] Fix mixup

Modified: branches/avidemux_2.5_branch_gruntster/bootStrap.sh
===================================================================
--- branches/avidemux_2.5_branch_gruntster/bootStrap.sh	2009-07-11 17:10:09 UTC (rev 5048)
+++ branches/avidemux_2.5_branch_gruntster/bootStrap.sh	2009-07-11 18:48:55 UTC (rev 5049)
@@ -12,7 +12,7 @@
 rm -Rf buildMain
 mkdir -p buildMain
 cd buildMain
-cmake .. || fail cmake
+cmake -DCMAKE_INSTALL_PREFIX=/usr -DAVIDEMUX_INSTALL_PREFIX=/usr/ .. || fail cmake
 make || fail make_main
 sudo make install | fail install_main
 echo "*  Main Ok*"



From mean at mail.berlios.de  Sat Jul 11 20:52:00 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sat, 11 Jul 2009 20:52:00 +0200
Subject: [Avidemux-svn-commit] r5050 - branches/avidemux_2.5_branch_gruntster
Message-ID: <200907111852.n6BIq0VE015919@sheep.berlios.de>

Author: mean
Date: 2009-07-11 20:51:59 +0200 (Sat, 11 Jul 2009)
New Revision: 5050

Modified:
   branches/avidemux_2.5_branch_gruntster/bootStrap.sh
Log:
[bootStrap] Fix install path, have to specify twice

Modified: branches/avidemux_2.5_branch_gruntster/bootStrap.sh
===================================================================
--- branches/avidemux_2.5_branch_gruntster/bootStrap.sh	2009-07-11 18:48:55 UTC (rev 5049)
+++ branches/avidemux_2.5_branch_gruntster/bootStrap.sh	2009-07-11 18:51:59 UTC (rev 5050)
@@ -5,14 +5,14 @@
         exit 1
         cd $TOP
 }
-
+export PREFIX=/usr
 export TOP=$PWD
 echo "* Avidemux simple build script *"
 echo "* Building Main *"
 rm -Rf buildMain
 mkdir -p buildMain
 cd buildMain
-cmake -DCMAKE_INSTALL_PREFIX=/usr -DAVIDEMUX_INSTALL_PREFIX=/usr/ .. || fail cmake
+cmake -DCMAKE_INSTALL_PREFIX=$PREFIX -DAVIDEMUX_INSTALL_PREFIX=$PREFIX .. || fail cmake
 make || fail make_main
 sudo make install | fail install_main
 echo "*  Main Ok*"
@@ -21,7 +21,7 @@
 rm -Rf buildPlugins
 mkdir -p buildPlugins
 cd buildPlugins
-cmake -DAVIDEMUX_INSTALL_PREFIX=/usr/  -DAVIDEMUX_SOURCE_DIR=$TOP/  -DAVIDEMUX_CORECONFIG_DIR=$TOP/buildMain/config ../plugins || fail cmake_plugins
+cmake -DCMAKE_INSTALL_PREFIX=$PREFIX -DAVIDEMUX_INSTALL_PREFIX=$PREFIX  -DAVIDEMUX_SOURCE_DIR=$TOP/  -DAVIDEMUX_CORECONFIG_DIR=$TOP/buildMain/config ../plugins || fail cmake_plugins
 make || fail make_plugins
 echo "*  All Done  *"
 



From mean at mail.berlios.de  Sun Jul 12 10:18:29 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sun, 12 Jul 2009 10:18:29 +0200
Subject: [Avidemux-svn-commit] r5051 -
	branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoEncoder/src
Message-ID: <200907120818.n6C8ITda000451@sheep.berlios.de>

Author: mean
Date: 2009-07-12 10:18:29 +0200 (Sun, 12 Jul 2009)
New Revision: 5051

Modified:
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoEncoder/src/CMakeLists.txt
Log:
[ffCoreVideoEncoder] pref are used, so need coreUtils

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoEncoder/src/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoEncoder/src/CMakeLists.txt	2009-07-11 18:51:59 UTC (rev 5050)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoEncoder/src/CMakeLists.txt	2009-07-12 08:18:29 UTC (rev 5051)
@@ -4,7 +4,7 @@
 )
 
 ADD_LIBRARY(ADM_coreVideoEncoder SHARED ${ADM_CoreVideoEncoder_SRCS})
-TARGET_LINK_LIBRARIES(ADM_coreVideoEncoder ADM_core ADM_coreImage ADM_libavcodec ADM_libavutil )
+TARGET_LINK_LIBRARIES(ADM_coreVideoEncoder ADM_core ADM_coreUtils ADM_coreImage ADM_libavcodec ADM_libavutil )
 
 ADM_INSTALL_LIB(ADM_coreVideoEncoder)
 



From mean at mail.berlios.de  Sun Jul 12 10:18:31 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sun, 12 Jul 2009 10:18:31 +0200
Subject: [Avidemux-svn-commit] r5052 -
	branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioEncoders/faac
Message-ID: <200907120818.n6C8IVqp000461@sheep.berlios.de>

Author: mean
Date: 2009-07-12 10:18:31 +0200 (Sun, 12 Jul 2009)
New Revision: 5052

Modified:
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioEncoders/faac/audioencoder_faac.cpp
Log:
[AAC Encoder] Set encoding type

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioEncoders/faac/audioencoder_faac.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioEncoders/faac/audioencoder_faac.cpp	2009-07-12 08:18:29 UTC (rev 5051)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioEncoders/faac/audioencoder_faac.cpp	2009-07-12 08:18:31 UTC (rev 5052)
@@ -81,6 +81,7 @@
     	outputChannelMapping[4] = ADM_CH_REAR_RIGHT;
     	outputChannelMapping[5] = ADM_CH_LFE;
   }
+  wavheader.encoding=WAV_AAC;
 };
 
 /**



From mean at mail.berlios.de  Sun Jul 12 10:18:32 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sun, 12 Jul 2009 10:18:32 +0200
Subject: [Avidemux-svn-commit] r5053 -
	branches/avidemux_2.6_branch_mean/avidemux/common/ADM_infoExtractor
Message-ID: <200907120818.n6C8IWjC000471@sheep.berlios.de>

Author: mean
Date: 2009-07-12 10:18:32 +0200 (Sun, 12 Jul 2009)
New Revision: 5053

Removed:
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_infoExtractor/ADM_infoextractor.cpp.orig
Log:
[cleanip] delete crufts

Deleted: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_infoExtractor/ADM_infoextractor.cpp.orig
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_infoExtractor/ADM_infoextractor.cpp.orig	2009-07-12 08:18:31 UTC (rev 5052)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_infoExtractor/ADM_infoextractor.cpp.orig	2009-07-12 08:18:32 UTC (rev 5053)
@@ -1,595 +0,0 @@
-/***************************************************************************
-                          ADM_infoextractor
-                             -------------------
-           - extract additionnal info from header (mp4/h263)                  
-**************************************************************************/
-/***************************************************************************
- *                                                                         *
- *   This program is free software; you can redistribute it and/or modify  *
- *   it under the terms of the GNU General Public License as published by  *
- *   the Free Software Foundation; either version 2 of the License, or     *
- *   (at your option) any later version.                                   *
- *                                                                         *
- ***************************************************************************/
-#include "config.h"
-
-#include "ADM_default.h"
-#include "ADM_editor/ADM_Video.h"
-
-#include "fourcc.h"
-#include "ADM_inputs/ADM_mp4/ADM_mp4.h"
-
-
-#include "ADM_osSupport/ADM_debugID.h"
-#define MODULE_NAME MODULE_3GP
-#include "ADM_osSupport/ADM_debug.h"
-
-extern "C"
-{
-#include "common.h"
-#include "bswap.h"
-#define INT_MAX (0x7FFFFFFF)
-#include "ADM_libraries/ADM_ffmpeg/ADM_lavcodec/bitstream.h"
-#include "ADM_libraries/ADM_ffmpeg/ADM_lavcodec/golomb.h"
-}
-
-#include "ADM_infoExtractor/ADM_h264_tag.h"
-
-static void refineH264FrameType(uint8_t *head,uint8_t *tail,uint32_t *flags);
-/*
-    Extract width & height from vol header passed as arg
-
-
-*/
-uint8_t extractMpeg4Info(uint8_t *data,uint32_t dataSize,uint32_t *w,uint32_t *h,uint32_t *time_inc)
-{
-    // Search startcode
-    uint8_t b;
-    uint32_t idx=0;
-    uint32_t mw,mh;
-    uint32_t timeVal;
-    
-    //mixDump(data,dataSize);
-    //printf("\n");
-    while(1)
-    {
-        uint32_t startcode=0xffffffff;
-        while(dataSize>2)
-        {
-            startcode=(startcode<<8)+data[idx];
-            idx++;
-            dataSize--;
-            if((startcode&0xffffff)==1) break;
-        }
-        if(dataSize>2)
-        {
-            //printf("Startcodec:%x\n",data[idx]);
-            if((data[idx]&0xF0)==0x20) //VOL start
-            {
-                dataSize--;
-                idx++;
-#if 0
-                printf("VOL Header:\n");
-
-                if(dataSize<16)
-                {
-                  mixDump(data+idx,dataSize);printf("\n");
-                }
-                else
-                {
-                  mixDump(data+idx,16);printf("\n");
-                }
-#endif
-                // Here we go !
-                GetBitContext s;
-                init_get_bits( &s,data+idx, dataSize*8);
-                //
-                skip_bits1(&s); // Random access
-                skip_bits(&s,8); // Obj type indication
-                if(get_bits(&s,1)) // VO od 
-                {
-                      skip_bits(&s,4); // Ver
-                      skip_bits(&s,3);  // Priority
-                }
-                if(get_bits(&s,4)==15) // custom A/R
-                {
-                      skip_bits(&s,8);
-                      skip_bits(&s,8);
-                }
-                if(get_bits(&s,1)) // Vol control param
-                {
-                      skip_bits(&s,2);   //Chroma
-                      skip_bits(&s,1);   // Low delay
-                      if(get_bits(&s,1)) // VBV Info
-                      {
-                        skip_bits(&s,16);
-                        skip_bits(&s,16);
-                        skip_bits(&s,16);
-                        skip_bits(&s,15);
-                        skip_bits(&s,16);
-                      }
-                  }
-                 skip_bits(&s,2); //  Shape
-                 skip_bits(&s,1); //  Marker
-                 timeVal=get_bits(&s,16); // Time increment
-                 *time_inc = av_log2(timeVal - 1) + 1;
-                 if (*time_inc < 1)
-                    *time_inc = 1;
-                 skip_bits(&s,1); //  Marker
-                 if(get_bits(&s,1)) // Fixed vop rate, compute how much bits needed
-                 {
-                     get_bits(&s, *time_inc);
-                 }
-                  skip_bits(&s,1); //  Marker
-                  mw=get_bits(&s,13);
-                  skip_bits(&s,1); //  Marker
-                  mh=get_bits(&s,13);
-                // /Here we go
-                //printf("%d x %d \n",mw,mh);
-                *h=mh;
-                *w=mw;
-                return 1;;
-                // Free get bits ?
-                // WTF ?
-            }
-            continue;
-        }
-        else
-        {
-            printf("No more startcode\n");
-            // Free get bits ?
-            return 0;
-            
-        }
-    }
-    
-    return 0;
-}
-/**
-    \fn extractVopInfo
-    \brief extract info from vop : Vop type, module time base, time inc
-    
-    Warning this function expects data to start AFTER startcode, contrarily to other functions here!
-*/
-
-uint8_t extractVopInfo(uint8_t *data, uint32_t len,uint32_t timeincbits,uint32_t *vopType,uint32_t *modulo, uint32_t *time_inc,uint32_t *vopcoded)
-{
-   GetBitContext s;
-   int vop;
-   uint32_t vp,tinc;
-           init_get_bits( &s,data, len*8);
-           vop=get_bits(&s,2);
-           switch(vop)
-           {
-             case 0: vp=AVI_KEY_FRAME;break;
-             case 1: vp=0;break;
-             case 2: vp=AVI_B_FRAME;break;
-             case 3: vp=0;break;  // D FRAME ????
-             default:
-                printf("Unknown vop type :%d\n",vop);
-                return 0;
-           }
-           /* Read modulo */
-           int imodulo=0;
-           while (get_bits1(&s) != 0)
-                  imodulo++;
-           if(!get_bits1(&s))
-           {
-              printf("Wrong marker1\n");
-              return 0; 
-           }
-           
-           /* Read time */
-           tinc=get_bits(&s,timeincbits);
-           /* Marker */
-            if(!get_bits1(&s))
-           {
-              printf("Wrong marker2\n");
-              return 0; 
-           }
-           /* Vop coded */
-           *modulo=imodulo;
-           *vopcoded=get_bits1(&s);
-           *vopType=vp;
-           *time_inc=tinc;
-           return 1;
-}
-/**
-      \brief extractH263FLVInfo
-      \fn Extract width/height from FLV header
-*/
-uint8_t extractH263FLVInfo(uint8_t *buffer,uint32_t len,uint32_t *w,uint32_t *h)
-{
-        GetBitContext gb;
-        int format;
-        init_get_bits( &gb,buffer, len*8);
-        if (get_bits_long(&gb, 17) != 1) {
-            printf("[FLV]Wrong FLV1 header\n");
-            return 0;
-        }
-        format = get_bits(&gb, 5);
-        if (format != 0 && format != 1) {
-            printf("[FLV]Wrong FLV1 header format\n");
-            return 0;        }
-        
-        get_bits(&gb, 8); /* picture timestamp */
-        format = get_bits(&gb, 3);
-        switch (format) {
-        case 0:
-            *w = get_bits(&gb, 8);
-            *h = get_bits(&gb, 8);
-            break;
-        case 1:
-            *w = get_bits(&gb, 16);
-            *h = get_bits(&gb, 16);
-            break;
-        case 2:
-            *w = 352;
-            *h = 288;
-            break;
-        case 3:
-            *w = 176;
-            *h = 144;
-            break;
-        case 4:
-            *w = 128;
-            *h = 96;
-            break;
-        case 5:
-            *w = 320;
-            *h = 240;
-            break;
-        case 6:
-            *w = 160;
-            *h = 120;
-            break;
-        default:
-             printf("[FLV]Wrong width format\n");
-             return 0;
-            break;
-        }
-        return 1;
-}
-/*
-        Extract H263 width & height from header
-
-*/
-uint8_t extractH263Info(uint8_t *data,uint32_t dataSize,uint32_t *w,uint32_t *h)
-{
-uint32_t val;
-                GetBitContext s;
-                init_get_bits( &s,data, dataSize*8);
-                
-                 mixDump(data,10);
-                 val=get_bits(&s,16);
-                 if(val)
-                 {
-                    printf("incorrect H263 header sync\n");
-                    return 0;
-                 }
-                 val=get_bits(&s,6);
-                 if(val!=0x20)
-                 {
-                    printf("incorrect H263 header sync (2)\n");
-                    return 0;
-                 }
-                 //
-                 skip_bits(&s,8); // timestamps in 30 fps tick
-                 skip_bits(&s,1); // Marker
-                 skip_bits(&s,1); // Id
-                 skip_bits(&s,1); // Split
-                 skip_bits(&s,1); // Document Camera indicator
-                 skip_bits(&s,1); // Full Picture Freeze Release
-                 val=get_bits(&s,3);
-                 switch(val)
-                 {
-                   
-                    case 1: *w=128;*h=96;return 1;break;
-                    case 2: *w=176;*h=144;return 1;break;
-                    case 6:
-                    case 7:
-                            printf("H263+:Todo\n");
-                    default:
-                        printf("Invalid format\n");return 0;break;
-                 }
-                 return 0;
-}
-/**
-    \fn unescapeH264
-    \brief Remove escape stuff
-
-*/
-static uint32_t unescapeH264(uint32_t len,uint8_t *in, uint8_t *out)
-{
-  uint32_t outlen=0;
-  uint8_t *tail=in+len;
-    if(len<3) return 0;
-    while(in<tail-3)
-    {
-      if(!in[0]  && !in[1] && in[2]==3)
-      {
-        out[0]=0;
-        out[1]=0;
-        out+=2;
-        outlen+=2;
-        in+=3; 
-      }
-      *out++=*in++;
-      outlen++;
-    }
-    // copy last bytes
-    uint32_t left=tail-in;
-    memcpy(out,in,left);
-    outlen+=left;
-    return outlen;
-    
-}
-
-static uint8_t extractVUIInfo(GetBitContext *s, uint32_t *fps1000)
-{
-	*fps1000 = 0;
-
-	if (get_bits1(s))
-	{
-		unsigned int aspect_ratio_information = get_bits(s, 8);
-
-		if (aspect_ratio_information == 255)
-		{
-			get_bits(s, 16);
-			get_bits(s, 16);
-		}
-	}
-
-	if (get_bits1(s))	// overscan
-		get_bits1(s);
-
-	if (get_bits1(s))	// vsp_color
-	{
-		get_bits(s, 4);
-
-		if (get_bits1(s))
-		{
-			get_bits(s, 8);
-			get_bits(s, 8);
-			get_bits(s, 8);
-		}
-	}
-
-	if (get_bits1(s))	// chroma
-	{
-		get_ue_golomb(s);
-		get_ue_golomb(s);
-	}
-
-	if (get_bits1(s))	// timing
-	{
-		uint32_t timeinc_unit = get_bits_long(s, 32);
-		uint32_t timeinc_resolution = get_bits_long(s, 32);
-		uint32_t fixed_fps = get_bits1(s);
-
-		if (timeinc_unit > 0 && timeinc_resolution > 0)
-			*fps1000 = (uint32_t)(((float)timeinc_resolution / (float)timeinc_unit) * 1000);
-
-		if (fixed_fps)
-			*fps1000 /= 2;
-	}
-
-	return 1;
-}
-
-/**
-    \fn extractSPSInfo
-    \brief Extract info from H264 SPS
-    See 7.3.2.1 of 14496-10
-*/
-uint8_t extractSPSInfo(uint8_t *data, uint32_t len,uint32_t *wwidth,uint32_t *hheight, uint32_t *fps1000)
-{
-   GetBitContext s;
-   
-   uint32_t profile,constraint,level,pic_order_cnt_type,w,h, mbh, frame_mbs_only;
-   uint8_t buf[len];
-   uint32_t outlen;
-   uint32_t id,dum;
-   
-           outlen=unescapeH264(len,data,buf);
-           init_get_bits( &s,buf, outlen*8);
-            
-           profile=get_bits(&s,8);
-           constraint=get_bits(&s,8)>>5;
-           level=get_bits(&s,8);
-           id=get_ue_golomb(&s); // Seq parameter set id           
-           printf("[H264]Profile : %u, Level :%u, SPSid:%u\n",profile,level,id);
-           if(profile>=100) // ?? Borrowed from H264.C/FFMPEG
-           {
-              printf("[H264]Warning : High profile\n");
-              if(get_ue_golomb(&s) == 3) //chroma_format_idc
-                get_bits1(&s);  //residual_color_transform_flag
-            get_ue_golomb(&s);  //bit_depth_luma_minus8
-            get_ue_golomb(&s);  //bit_depth_chroma_minus8
-            get_bits1(&s);
-			if (get_bits1(&s))
-				get_bits(&s, 8);
-           }
-           
-
-           dum=get_ue_golomb(&s); // log2_max_frame_num_minus4
-           printf("[H264]Log2maxFrame-4:%u\n",dum);
-           pic_order_cnt_type=get_ue_golomb(&s);
-           printf("[H264]Pic Order Cnt Type:%u\n",pic_order_cnt_type);
-           if(!pic_order_cnt_type) // pic_order_cnt_type
-           {
-              dum=get_ue_golomb(&s); //log2_max_pic_order_cnt_lsb_minus4
-              printf("[H264]Log2maxPix-4:%u\n",dum);
-           }else
-           {
-             if(pic_order_cnt_type==1)
-             {
-                 get_bits1(&s);   //delta_pic_order_always_zero_flag
-                 get_se_golomb(&s);   //offset_for_non_ref_pic
-                 get_se_golomb(&s);  // offset_for_top_to_bottom_field
-                 int i=get_ue_golomb(&s);  //num_ref_frames_in_pic_order_cnt_cycle
-
-                 for(int j=0;j<i;j++)
-                 {
-                      get_se_golomb(&s);
-                 }
-             }else 
-             {
-               printf("Error in SPS\n");
-               return 0;
-             }
-           }
-           dum=get_ue_golomb(&s);     //num_ref_frames
-           printf("[H264] # of ref frames : %u\n",dum);
-           get_bits1(&s);         // gaps_in_frame_num_value_allowed_flag
-		   w = get_ue_golomb(&s) + 1;   //pic_width_in_mbs_minus1
-
-		   mbh = get_ue_golomb(&s) + 1;
-		   frame_mbs_only = get_bits1(&s);
-		   h = (2 - frame_mbs_only) * mbh;   //pic_height_in_mbs_minus1
-
-           printf("[H264] Width in mb -1  :%d\n",w); 
-           printf("[H264] Height in mb -1 :%d\n", h);
-
-		   *wwidth = w * 16;
-		   *hheight= h * 16;
-           
-		   if (!frame_mbs_only)
-			   get_bits1(&s);
-
-		   get_bits1(&s);
-
-		   if(get_bits1(&s))
-		   {
-			   get_ue_golomb(&s);
-			   get_ue_golomb(&s);
-			   get_ue_golomb(&s);
-			   get_ue_golomb(&s);
-		   }
-
-		   if(get_bits1(&s))
-			   extractVUIInfo(&s, fps1000);
-
-           return 1;
-}
-/**
-      \fn extractH264FrameType
-      \brief return frametype in flags (KEY_FRAME or 0). To be used only with  mkv/mp4 nal type (i.e. no startcode)
-      
-*/
-uint8_t extractH264FrameType(uint32_t nalSize,uint8_t *buffer,uint32_t len,uint32_t *flags)
-{
-  uint8_t *head=buffer, *tail=buffer+len;
-  uint8_t stream;
-  
-  uint32_t val,hnt;  
-  
-// FIXME :  no startcode only !
-  
-  while(head+4<tail)
-  {
-    
-              uint32_t length=(head[0]<<24) + (head[1]<<16) +(head[2]<<8)+(head[3]);
-              if(length>len||length<6)
-              {
-                printf("Warning , incomplete nal (%u/%u),(%0x/%0x)\n",length,len,length,len);
-                *flags=0;
-                return 0;
-              }
-              head+=4; // Skip nal lenth
-              length-=4;
-              stream=*(head++)&0x1F;
-                switch(stream)
-                {
-                  case NAL_IDR: 
-                                  *flags=AVI_KEY_FRAME;
-                                  
-                                  return 1;
-                                  break; 
-                  case NAL_NON_IDR: 
-                                  refineH264FrameType(head,tail,flags);
-                                  return 1;
-                                  break;
-                  default:
-                          printf("??0x%x\n",stream);
-                          head+=length-5;
-                          continue;
-                }
-  }
-  printf("No stream\n");
-  return 0;
-}
-
-/**
-      \fn extractH264FrameType_startCode
-      \brief return frametype in flags (KEY_FRAME or 0). To be used only with  avi / mpeg TS nal type (i.e. with startcode)
-      
-*/
-uint8_t extractH264FrameType_startCode(uint32_t nalSize,uint8_t *buffer,uint32_t len,uint32_t *flags)
-{
-  uint8_t *head=buffer, *tail=buffer+len;
-  uint8_t stream;
-#define NAL_NON_IDR       1
-#define NAL_IDR           5
-#define NAL_SEI           6
-
-  uint32_t val,hnt;  
-  
-// FIXME :  no startcode only !
-  
-  while(head+4<tail)
-  {
-          // Search startcode
-      
-                hnt=(head[0]<<24) + (head[1]<<16) +(head[2]<<8)+(head[3]);
-                head+=4;
-                while((hnt!=1) && head<tail)
-                {
-
-                        hnt<<=8;
-                        val=*head++;
-                        hnt+=val;
-                }
-                if(head>=tail) break;
-                stream=*(head++) &0x1f;
-                switch(stream)
-                {
-                  case NAL_IDR: 
-                                  *flags=AVI_KEY_FRAME;
-                                 // printf("IDR\n");
-                                  return 1;
-                                  break; 
-                  case NAL_NON_IDR: 
-                                  refineH264FrameType(head,tail,flags);
-                                  return 1;
-                                  break;
-                  default:
-                          printf("??0x%x\n",stream);
-                          continue;
-                }
-  }
-  printf("No stream\n");
-  return 0;
-}
-/**
-    \fn refineH264FrameType
-    \brief Try to detect B slice, warning the stream is not escaped!
-*/
-void refineH264FrameType(uint8_t *head,uint8_t *tail,uint32_t *flags)
-{
-GetBitContext s;
-uint32_t sliceType;
-            *flags=0;
-            init_get_bits(&s,head, (tail-head)*8);
-            get_ue_golomb(&s);
-            sliceType= get_ue_golomb(&s);
-            if(sliceType > 9) 
-            {
-              printf("Weird Slice %d\n",sliceType);
-              return ;
-            }
-            if(sliceType > 4)
-                sliceType -= 5;
-            if(sliceType==3) *flags=AVI_B_FRAME;  
-}
-//EOF



From mean at mail.berlios.de  Sun Jul 12 10:18:33 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sun, 12 Jul 2009 10:18:33 +0200
Subject: [Avidemux-svn-commit] r5054 -
	branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS
Message-ID: <200907120818.n6C8IXtY000481@sheep.berlios.de>

Author: mean
Date: 2009-07-12 10:18:33 +0200 (Sun, 12 Jul 2009)
New Revision: 5054

Modified:
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/dmxTSPacket.cpp
Log:
[TS demuxer] Autoprobe TS1/TS2 (hackish)

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/dmxTSPacket.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/dmxTSPacket.cpp	2009-07-12 08:18:32 UTC (rev 5053)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/dmxTSPacket.cpp	2009-07-12 08:18:33 UTC (rev 5054)
@@ -46,6 +46,23 @@
     close();
 }
 /**
+    \fn score
+    \return the number of TS packet of size TS_PACKET_SIZE+extraData in a raw, nbTry tries
+
+*/
+static int score(fileParser *parser, int nbTry, int extraData)
+{
+int count=0;
+int round=nbTry;
+    while(round--)
+    {
+        if(parser->read8i()!=TS_MARKER) break;
+        count++;
+        parser->forward(TS_PACKET_LEN-1+extraData);
+    }
+    return count;
+}
+/**
     \fn open
     \brief dtor
 */
@@ -60,7 +77,44 @@
         return false;
     }
     _size=_file->getSize();
-    return true;
+
+    // Detect TS1/TS2...
+        printf("[TsPacket] Detecting TS/TS2...\n");
+
+        uint8_t r;
+        int tryMe=250;
+        while(tryMe--)
+        {
+            r=_file->read8i();
+            if(r==TS_MARKER) break;
+            if(_file->end()) 
+            {
+                tryMe=0;
+            }
+        }
+        if(!tryMe) 
+        {
+            printf("[TsPacket] Cannot sync ???\n");
+            return true;
+        }
+        uint64_t startPos=getPos()-1;
+        int score1,score2;
+
+        setPos(startPos);
+        score1=score(_file,20,0);
+        setPos(startPos);
+        score2=score(_file,20,4);
+        printf("[TsPacket] Score : 188:%d, 192:%d out of 20\n",score1,score2);
+        if(score2 && score2>score1)
+        {
+            printf("[TsPacket] Probably TS2 (192)...\n");
+            extraCrap=4;
+        }else
+        {
+            printf("[TsPacket] Probably TS1 (188)...\n");
+        }
+        setPos(0);
+        return true;
 }
 /**
     \fn close



From mean at mail.berlios.de  Sun Jul 12 10:18:36 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sun, 12 Jul 2009 10:18:36 +0200
Subject: [Avidemux-svn-commit] r5055 - in branches/avidemux_2.6_branch_mean:
	avidemux/common/ADM_audioFilter/src avidemux/gtk/ADM_UIs/src
	avidemux_core/ADM_coreImage/src
Message-ID: <200907120818.n6C8IaEb000491@sheep.berlios.de>

Author: mean
Date: 2009-07-12 10:18:35 +0200 (Sun, 12 Jul 2009)
New Revision: 5055

Modified:
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_audioFilter/src/audio_encoderPlugin.cpp
   branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_UIs/src/toolkit.cpp
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreImage/src/ADM_image.cpp
Log:
[All] silence valgrind un-initialized warnings

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_audioFilter/src/audio_encoderPlugin.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_audioFilter/src/audio_encoderPlugin.cpp	2009-07-12 08:18:33 UTC (rev 5054)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_audioFilter/src/audio_encoderPlugin.cpp	2009-07-12 08:18:35 UTC (rev 5055)
@@ -69,6 +69,7 @@
         ADM_AudioEncoderLoader(const char *name, const char *menuName) : ADM_LibWrapper()
 		{
                     encoderBlock=new ADM_audioEncoder;
+                    memset(encoderBlock,0,sizeof(*encoderBlock));
                     encoderBlock->codecName=name;
                     encoderBlock->menuName=menuName;                    
                     encoderBlock->opaque=(void *)this;

Modified: branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_UIs/src/toolkit.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_UIs/src/toolkit.cpp	2009-07-12 08:18:33 UTC (rev 5054)
+++ branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_UIs/src/toolkit.cpp	2009-07-12 08:18:35 UTC (rev 5055)
@@ -148,7 +148,7 @@
 int gtk_read_entry(GtkWidget *entry)
 {
 char *str;
-int value;
+int value=0;
                 str =		  gtk_editable_get_chars(GTK_EDITABLE ((entry)), 0, -1);
                 value = (int) atoi(str);
                 return value;
@@ -156,7 +156,7 @@
 float gtk_read_entry_float(GtkWidget *entry)
 {
 char *str;
-float value;
+float value=0;
                 str =		  gtk_editable_get_chars(GTK_EDITABLE ((entry)), 0, -1);
                 value = (int) atof(str);
                 return value;
@@ -165,7 +165,7 @@
 void gtk_write_entry(GtkWidget *entry, int value)
 {
 char string[400];
-gint r;
+gint r=0;
                 sprintf(string,"%d",value);
                 gtk_editable_delete_text(GTK_EDITABLE(entry), 0,-1);
                 gtk_editable_insert_text(GTK_EDITABLE(entry), string, strlen(string), &r);
@@ -173,7 +173,7 @@
 void gtk_write_entry_float(GtkWidget *entry, float value)
 {
 
-gint r;
+gint r=0;
 char string[400];
                 sprintf(string,"%f",value);		
                 gtk_editable_delete_text(GTK_EDITABLE(entry), 0,-1);
@@ -183,7 +183,7 @@
 void gtk_write_entry_string(GtkWidget *entry, char *value)
 {
 
-gint r;
+gint r=0;
                 if(!value) return;
                 
                 gtk_editable_delete_text(GTK_EDITABLE(entry), 0,-1);

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreImage/src/ADM_image.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreImage/src/ADM_image.cpp	2009-07-12 08:18:33 UTC (rev 5054)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreImage/src/ADM_image.cpp	2009-07-12 08:18:35 UTC (rev 5055)
@@ -52,6 +52,7 @@
         _planes[0]=_planes[1]=_planes[2]=NULL;
         _noPicture=0;
         _colorspace=ADM_COLOR_YV12;
+        Pts=0;
 
 }
 ADMImage::ADMImage(uint32_t width, uint32_t height)



From mean at mail.berlios.de  Sun Jul 12 10:18:38 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sun, 12 Jul 2009 10:18:38 +0200
Subject: [Avidemux-svn-commit] r5057 - branches/avidemux_2.6_branch_mean
Message-ID: <200907120818.n6C8IcDJ000511@sheep.berlios.de>

Author: mean
Date: 2009-07-12 10:18:38 +0200 (Sun, 12 Jul 2009)
New Revision: 5057

Modified:
   branches/avidemux_2.6_branch_mean/.gitignore
Log:
[gitignore] update, ignore build files

Modified: branches/avidemux_2.6_branch_mean/.gitignore
===================================================================
--- branches/avidemux_2.6_branch_mean/.gitignore	2009-07-12 08:18:37 UTC (rev 5056)
+++ branches/avidemux_2.6_branch_mean/.gitignore	2009-07-12 08:18:38 UTC (rev 5057)
@@ -6,3 +6,5 @@
 *.kdev*
 ffconf
 *.sw*
+build*
+debs



From mean at mail.berlios.de  Sun Jul 12 10:18:37 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sun, 12 Jul 2009 10:18:37 +0200
Subject: [Avidemux-svn-commit] r5056 -
	branches/avidemux_2.6_branch_mean/avidemux/common
Message-ID: <200907120818.n6C8IbDX000501@sheep.berlios.de>

Author: mean
Date: 2009-07-12 10:18:37 +0200 (Sun, 12 Jul 2009)
New Revision: 5056

Modified:
   branches/avidemux_2.6_branch_mean/avidemux/common/main.cpp
Log:
[main] memleak with prefs

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/main.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/main.cpp	2009-07-12 08:18:35 UTC (rev 5055)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/main.cpp	2009-07-12 08:18:37 UTC (rev 5056)
@@ -335,7 +335,11 @@
 #endif
 
 	destroyGUI();
-
+    if(prefs)
+    {
+        delete prefs;
+        prefs=NULL;
+    }
     printf("End of cleanup\n");
     ADMImage_stat();
     ADM_memStat();



From mean at mail.berlios.de  Sun Jul 12 10:18:39 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sun, 12 Jul 2009 10:18:39 +0200
Subject: [Avidemux-svn-commit] r5058 -
	branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor
Message-ID: <200907120818.n6C8IdIQ000521@sheep.berlios.de>

Author: mean
Date: 2009-07-12 10:18:39 +0200 (Sun, 12 Jul 2009)
New Revision: 5058

Modified:
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edit.hxx
Log:
[Editor] Memleak

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edit.hxx
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edit.hxx	2009-07-12 08:18:38 UTC (rev 5057)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edit.hxx	2009-07-12 08:18:39 UTC (rev 5058)
@@ -68,8 +68,19 @@
     uint64_t         duration;
     uint64_t         size;
 
-protected:
+public:
+    ADM_audioStreamTrack() {memset(this,0,sizeof(*this));}
+    ~ADM_audioStreamTrack()
+    {
+        stream=NULL;
+        info=NULL;   // These 2 are destroyed by the demuxer itself
+        if(codec) 
+        {
+            delete codec;
+            codec=NULL;
+        }
 
+    }
 };
 //
 //  The start frame correspond to the frame 0 of the segment (quite obvisous)



From mean at mail.berlios.de  Sun Jul 12 10:18:41 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sun, 12 Jul 2009 10:18:41 +0200
Subject: [Avidemux-svn-commit] r5059 -
	branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor
Message-ID: <200907120818.n6C8IfwI000531@sheep.berlios.de>

Author: mean
Date: 2009-07-12 10:18:40 +0200 (Sun, 12 Jul 2009)
New Revision: 5059

Modified:
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edit.cpp
Log:
[Editor] Shut up valgrind about uninitialized values

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edit.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edit.cpp	2009-07-12 08:18:39 UTC (rev 5058)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edit.cpp	2009-07-12 08:18:40 UTC (rev 5059)
@@ -342,6 +342,7 @@
 	_imageBuffer=new ADMImage(info.width,info.height);
  	_imageBuffer->_qSize= ((info.width+15)>>4)*((info.height+15)>>4);
 	_imageBuffer->quant=new uint8_t[_imageBuffer->_qSize];
+    memset(_imageBuffer->quant,0,_imageBuffer->_qSize);
 	_imageBuffer->_qStride=(info.width+15)>>4;
  }
 



From mean at mail.berlios.de  Sun Jul 12 10:18:42 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sun, 12 Jul 2009 10:18:42 +0200
Subject: [Avidemux-svn-commit] r5060 -
	branches/avidemux_2.6_branch_mean/avidemux/common
Message-ID: <200907120818.n6C8Igcr000543@sheep.berlios.de>

Author: mean
Date: 2009-07-12 10:18:42 +0200 (Sun, 12 Jul 2009)
New Revision: 5060

Modified:
   branches/avidemux_2.6_branch_mean/avidemux/common/gtk_gui.cpp
Log:
[gtk_gui] Dont free audiostream as they are equal to editor

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/gtk_gui.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/gtk_gui.cpp	2009-07-12 08:18:40 UTC (rev 5059)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/gtk_gui.cpp	2009-07-12 08:18:42 UTC (rev 5060)
@@ -1614,7 +1614,7 @@
       admPreview::setMainDimension(0, 0);
       if(getPreviewMode()!=ADM_PREVIEW_NONE)
       {
-	admPreview::stop();
+        admPreview::stop();
         setPreviewMode(ADM_PREVIEW_NONE);
       }
       delete avifileinfo;
@@ -1625,12 +1625,8 @@
       curframe = 0;
       A_changeAudioStream (NULL, AudioNone,NULL);
 
-	  if (aviaudiostream)
-		delete aviaudiostream;
+      // Audio streams are cleared by editor
 
-	  if (secondaudiostream)
-		delete secondaudiostream;
-
 	  aviaudiostream=NULL;
 	  secondaudiostream=NULL;
 



From mean at mail.berlios.de  Sun Jul 12 10:18:43 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sun, 12 Jul 2009 10:18:43 +0200
Subject: [Avidemux-svn-commit] r5061 -
	branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS
Message-ID: <200907120818.n6C8Ihlm000553@sheep.berlios.de>

Author: mean
Date: 2009-07-12 10:18:43 +0200 (Sun, 12 Jul 2009)
New Revision: 5061

Modified:
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/ADM_ts.cpp
Log:
[TS/dmx] memleak in audio tracks

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/ADM_ts.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/ADM_ts.cpp	2009-07-12 08:18:42 UTC (rev 5060)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/ADM_ts.cpp	2009-07-12 08:18:43 UTC (rev 5061)
@@ -223,6 +223,13 @@
         delete ListOfFrames[0];
         ListOfFrames.erase(ListOfFrames.begin());
     }
+    // Destroy audio tracks
+    for(int i=0;i<listOfAudioTracks.size();i++)
+    {
+        ADM_tsTrackDescriptor *desc=listOfAudioTracks[i];
+        delete desc;
+        listOfAudioTracks[i]=NULL;
+    } // Container will be destroyed by vector destructor
     if(tsPacket)
     {
         tsPacket->close();



From mean at mail.berlios.de  Sun Jul 12 10:18:45 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sun, 12 Jul 2009 10:18:45 +0200
Subject: [Avidemux-svn-commit] r5062 - in
	branches/avidemux_2.6_branch_mean/avidemux: common
	common/ADM_render gtk/ADM_UIs/src qt4/ADM_UIs/src
Message-ID: <200907120818.n6C8IjVd000563@sheep.berlios.de>

Author: mean
Date: 2009-07-12 10:18:45 +0200 (Sun, 12 Jul 2009)
New Revision: 5062

Modified:
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_render/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux/common/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_UIs/src/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_UIs/src/CMakeLists.txt
Log:
[All] Rename render to render6 to avoid clash with avidemux 2.5

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_render/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_render/CMakeLists.txt	2009-07-12 08:18:43 UTC (rev 5061)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_render/CMakeLists.txt	2009-07-12 08:18:45 UTC (rev 5062)
@@ -1,4 +1,4 @@
-SET(ADM_LIB ADM_render_${UI_SUFFIX})
+SET(ADM_LIB ADM_render6_${UI_SUFFIX})
 
 SET(${ADM_LIB}_SRCS
 GUI_render.cpp

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/CMakeLists.txt	2009-07-12 08:18:43 UTC (rev 5061)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/CMakeLists.txt	2009-07-12 08:18:45 UTC (rev 5062)
@@ -5,7 +5,7 @@
 ADD_SUBDIRECTORY(ADM_commonUI)
 ADD_SUBDIRECTORY(ADM_editor)
 ADD_SUBDIRECTORY(ADM_filter)
-ADD_SUBDIRECTORY(ADM_infoExtractor)
+#ADD_SUBDIRECTORY(ADM_infoExtractor)
 ADD_SUBDIRECTORY(ADM_libraries)
 #ADD_SUBDIRECTORY(ADM_mpegIndexer)
 ADD_SUBDIRECTORY(ADM_muxerGate)

Modified: branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_UIs/src/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_UIs/src/CMakeLists.txt	2009-07-12 08:18:43 UTC (rev 5061)
+++ branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_UIs/src/CMakeLists.txt	2009-07-12 08:18:45 UTC (rev 5062)
@@ -26,6 +26,6 @@
 )
 INCLUDE_DIRECTORIES(${CMAKE_CURRENT_SOURCE_DIR}/../include)
 ADD_LIBRARY(${ADM_LIB} SHARED ${${ADM_LIB}_SRCS})
-TARGET_LINK_LIBRARIES(${ADM_LIB} ${GTK_LDFLAGS} ADM_core ADM_coreUI ADM_render_gtk)
+TARGET_LINK_LIBRARIES(${ADM_LIB} ${GTK_LDFLAGS} ADM_core ADM_coreUI ADM_render6_gtk)
 ADD_TARGET_CFLAGS(${ADM_LIB} ${GTK_CFLAGS})
 ADM_INSTALL_LIB( ${ADM_LIB} )

Modified: branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_UIs/src/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_UIs/src/CMakeLists.txt	2009-07-12 08:18:43 UTC (rev 5061)
+++ branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_UIs/src/CMakeLists.txt	2009-07-12 08:18:45 UTC (rev 5062)
@@ -18,6 +18,6 @@
 INCLUDE_DIRECTORIES(${CMAKE_CURRENT_BINARY_DIR} ${QT_INCLUDE_DIR})
 INCLUDE_DIRECTORIES(${CMAKE_CURRENT_SOURCE_DIR}/../include)
 ADD_LIBRARY(${ADM_LIB} SHARED ${${ADM_LIB}_SRCS})
-TARGET_LINK_LIBRARIES(${ADM_LIB} ADM_core ADM_coreUI ${QT_QTGUI_LIBRARY} ${QT_QTCORE_LIBRARY} ADM_render_qt4)
+TARGET_LINK_LIBRARIES(${ADM_LIB} ADM_core ADM_coreUI ${QT_QTGUI_LIBRARY} ${QT_QTCORE_LIBRARY} ADM_render6_qt4)
 #INSTALL(TARGETS ${ADM_LIB} RUNTIME DESTINATION ${BIN_DIR}  LIBRARY DESTINATION lib  ARCHIVE DESTINATION lib)
 ADM_INSTALL_LIB( ${ADM_LIB} )



From gruntster at mail.berlios.de  Sun Jul 12 11:57:29 2009
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Sun, 12 Jul 2009 11:57:29 +0200
Subject: [Avidemux-svn-commit] r5063 - in
	branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder:
	ADM_vidEnc_x264/qt4 ADM_vidEnc_xvid/qt4 common
Message-ID: <200907120957.n6C9vTjr008605@sheep.berlios.de>

Author: gruntster
Date: 2009-07-12 11:57:21 +0200 (Sun, 12 Jul 2009)
New Revision: 5063

Modified:
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidConfigDialog.cpp
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/common/PluginOptions.cpp
Log:
[vidEnc] tidy up memory allocation for video encoder options

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp	2009-07-12 08:18:45 UTC (rev 5062)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp	2009-07-12 09:57:21 UTC (rev 5063)
@@ -561,7 +561,7 @@
 		printf("Configuration %s (type %d) could not be found.  Using snapshot.\n", configurationName, configurationType);
 
 	if (configurationName)
-		free(configurationName);
+		delete [] configurationName;
 
 	disableGenericSlots = origDisableGenericSlots;
 

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidConfigDialog.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidConfigDialog.cpp	2009-07-12 08:18:45 UTC (rev 5062)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidConfigDialog.cpp	2009-07-12 09:57:21 UTC (rev 5063)
@@ -370,7 +370,7 @@
 		printf("Configuration %s (type %d) could not be found.  Using snapshot.\n", configurationName, configurationType);
 
 	if (configurationName)
-		free(configurationName);
+		delete [] configurationName;
 
 	disableGenericSlots = origDisableGenericSlots;
 

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/common/PluginOptions.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/common/PluginOptions.cpp	2009-07-12 08:18:45 UTC (rev 5062)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/common/PluginOptions.cpp	2009-07-12 09:57:21 UTC (rev 5063)
@@ -14,7 +14,6 @@
  *                                                                         *
  ***************************************************************************/
 
-#include <math.h>
 #include <libxml/parser.h>
 #include <libxml/xmlschemas.h>
 #include <sstream>
@@ -54,15 +53,27 @@
 
 	if (_tagPrefix)
 	{
-		free(_tagPrefix);
+		delete [] _tagPrefix;
 		_tagPrefix = NULL;
 	}
 
 	if (_schemaFile)
 	{
-		free(_schemaFile);
+		delete [] _schemaFile;
 		_schemaFile = NULL;
 	}
+
+	if (_configTagRoot)
+	{
+		delete [] _configTagRoot;
+		_configTagRoot = NULL;
+	}
+
+	if (_optionsTagRoot)
+	{
+		delete [] _optionsTagRoot;
+		_optionsTagRoot = NULL;
+	}
 }
 
 void PluginOptions::cleanUp(void)
@@ -99,7 +110,10 @@
 void PluginOptions::getPresetConfiguration(char** configurationName, PluginConfigType *configurationType)
 {
 	if (_configurationName)
-		*configurationName = strdup(_configurationName);
+	{
+		*configurationName = new char[strlen(_configurationName) + 1];
+		strcpy(*configurationName, _configurationName);
+	}
 	else
 		*configurationName = NULL;
 



From gruntster at mail.berlios.de  Sun Jul 12 12:05:53 2009
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Sun, 12 Jul 2009 12:05:53 +0200
Subject: [Avidemux-svn-commit] r5064 - in
	branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder:
	ADM_vidEnc_x264/qt4 ADM_vidEnc_xvid/qt4
Message-ID: <200907121005.n6CA5rLX010527@sheep.berlios.de>

Author: gruntster
Date: 2009-07-12 12:05:48 +0200 (Sun, 12 Jul 2009)
New Revision: 5064

Modified:
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidConfigDialog.ui
Log:
[x264/Xvid] use button boxes on Qt config windows

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui	2009-07-12 09:57:21 UTC (rev 5063)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui	2009-07-12 10:05:48 UTC (rev 5064)
@@ -4130,35 +4130,15 @@
       <number>6</number>
      </property>
      <item>
-      <spacer>
+      <widget class="QDialogButtonBox" name="buttonBox" >
        <property name="orientation" >
         <enum>Qt::Horizontal</enum>
        </property>
-       <property name="sizeHint" >
-        <size>
-         <width>131</width>
-         <height>31</height>
-        </size>
+       <property name="standardButtons" >
+        <set>QDialogButtonBox::Cancel|QDialogButtonBox::NoButton|QDialogButtonBox::Ok</set>
        </property>
-      </spacer>
-     </item>
-     <item>
-      <widget class="QPushButton" name="okButton" >
-       <property name="text" >
-        <string>OK</string>
-       </property>
-       <property name="default" >
-        <bool>true</bool>
-       </property>
       </widget>
      </item>
-     <item>
-      <widget class="QPushButton" name="cancelButton" >
-       <property name="text" >
-        <string>Cancel</string>
-       </property>
-      </widget>
-     </item>
     </layout>
    </item>
   </layout>
@@ -4255,8 +4235,6 @@
   <tabstop>colourMatrixComboBox</tabstop>
   <tabstop>chromaSampleSpinBox</tabstop>
   <tabstop>fullRangeSamplesCheckBox</tabstop>
-  <tabstop>okButton</tabstop>
-  <tabstop>cancelButton</tabstop>
   <tabstop>configurationComboBox</tabstop>
   <tabstop>saveAsButton</tabstop>
   <tabstop>deleteButton</tabstop>
@@ -4264,38 +4242,6 @@
  <resources/>
  <connections>
   <connection>
-   <sender>okButton</sender>
-   <signal>clicked()</signal>
-   <receiver>x264ConfigDialog</receiver>
-   <slot>accept()</slot>
-   <hints>
-    <hint type="sourcelabel" >
-     <x>354</x>
-     <y>635</y>
-    </hint>
-    <hint type="destinationlabel" >
-     <x>246</x>
-     <y>344</y>
-    </hint>
-   </hints>
-  </connection>
-  <connection>
-   <sender>cancelButton</sender>
-   <signal>clicked()</signal>
-   <receiver>x264ConfigDialog</receiver>
-   <slot>reject()</slot>
-   <hints>
-    <hint type="sourcelabel" >
-     <x>437</x>
-     <y>635</y>
-    </hint>
-    <hint type="destinationlabel" >
-     <x>246</x>
-     <y>344</y>
-    </hint>
-   </hints>
-  </connection>
-  <connection>
    <sender>sarPredefinedRadioButton</sender>
    <signal>toggled(bool)</signal>
    <receiver>sarPredefinedComboBox</receiver>
@@ -4583,5 +4529,37 @@
     </hint>
    </hints>
   </connection>
+  <connection>
+   <sender>buttonBox</sender>
+   <signal>accepted()</signal>
+   <receiver>x264ConfigDialog</receiver>
+   <slot>accept()</slot>
+   <hints>
+    <hint type="sourcelabel" >
+     <x>262</x>
+     <y>535</y>
+    </hint>
+    <hint type="destinationlabel" >
+     <x>262</x>
+     <y>292</y>
+    </hint>
+   </hints>
+  </connection>
+  <connection>
+   <sender>buttonBox</sender>
+   <signal>rejected()</signal>
+   <receiver>x264ConfigDialog</receiver>
+   <slot>reject()</slot>
+   <hints>
+    <hint type="sourcelabel" >
+     <x>262</x>
+     <y>535</y>
+    </hint>
+    <hint type="destinationlabel" >
+     <x>262</x>
+     <y>292</y>
+    </hint>
+   </hints>
+  </connection>
  </connections>
 </ui>

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidConfigDialog.ui
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidConfigDialog.ui	2009-07-12 09:57:21 UTC (rev 5063)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidConfigDialog.ui	2009-07-12 10:05:48 UTC (rev 5064)
@@ -2555,35 +2555,15 @@
       <number>6</number>
      </property>
      <item>
-      <spacer>
+      <widget class="QDialogButtonBox" name="buttonBox" >
        <property name="orientation" >
         <enum>Qt::Horizontal</enum>
        </property>
-       <property name="sizeHint" >
-        <size>
-         <width>131</width>
-         <height>31</height>
-        </size>
+       <property name="standardButtons" >
+        <set>QDialogButtonBox::Cancel|QDialogButtonBox::NoButton|QDialogButtonBox::Ok</set>
        </property>
-      </spacer>
-     </item>
-     <item>
-      <widget class="QPushButton" name="okButton" >
-       <property name="text" >
-        <string>OK</string>
-       </property>
-       <property name="default" >
-        <bool>true</bool>
-       </property>
       </widget>
      </item>
-     <item>
-      <widget class="QPushButton" name="cancelButton" >
-       <property name="text" >
-        <string>Cancel</string>
-       </property>
-      </widget>
-     </item>
     </layout>
    </item>
   </layout>
@@ -2652,8 +2632,6 @@
   <tabstop>vbvBufferSizeSpinBox</tabstop>
   <tabstop>maxVbvBitrateSpinBox</tabstop>
   <tabstop>vbvPeakBitrateSpinBox</tabstop>
-  <tabstop>okButton</tabstop>
-  <tabstop>cancelButton</tabstop>
   <tabstop>configurationComboBox</tabstop>
   <tabstop>saveAsButton</tabstop>
   <tabstop>deleteButton</tabstop>
@@ -2661,38 +2639,6 @@
  <resources/>
  <connections>
   <connection>
-   <sender>okButton</sender>
-   <signal>clicked()</signal>
-   <receiver>XvidConfigDialog</receiver>
-   <slot>accept()</slot>
-   <hints>
-    <hint type="sourcelabel" >
-     <x>354</x>
-     <y>635</y>
-    </hint>
-    <hint type="destinationlabel" >
-     <x>246</x>
-     <y>344</y>
-    </hint>
-   </hints>
-  </connection>
-  <connection>
-   <sender>cancelButton</sender>
-   <signal>clicked()</signal>
-   <receiver>XvidConfigDialog</receiver>
-   <slot>reject()</slot>
-   <hints>
-    <hint type="sourcelabel" >
-     <x>437</x>
-     <y>635</y>
-    </hint>
-    <hint type="destinationlabel" >
-     <x>246</x>
-     <y>344</y>
-    </hint>
-   </hints>
-  </connection>
-  <connection>
    <sender>sarPredefinedRadioButton</sender>
    <signal>toggled(bool)</signal>
    <receiver>sarPredefinedComboBox</receiver>
@@ -2852,5 +2798,37 @@
     </hint>
    </hints>
   </connection>
+  <connection>
+   <sender>buttonBox</sender>
+   <signal>accepted()</signal>
+   <receiver>XvidConfigDialog</receiver>
+   <slot>accept()</slot>
+   <hints>
+    <hint type="sourcelabel" >
+     <x>257</x>
+     <y>555</y>
+    </hint>
+    <hint type="destinationlabel" >
+     <x>257</x>
+     <y>302</y>
+    </hint>
+   </hints>
+  </connection>
+  <connection>
+   <sender>buttonBox</sender>
+   <signal>rejected()</signal>
+   <receiver>XvidConfigDialog</receiver>
+   <slot>reject()</slot>
+   <hints>
+    <hint type="sourcelabel" >
+     <x>257</x>
+     <y>555</y>
+    </hint>
+    <hint type="destinationlabel" >
+     <x>257</x>
+     <y>302</y>
+    </hint>
+   </hints>
+  </connection>
  </connections>
 </ui>



From gruntster at mail.berlios.de  Sun Jul 12 12:08:04 2009
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Sun, 12 Jul 2009 12:08:04 +0200
Subject: [Avidemux-svn-commit] r5065 -
	branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/src
Message-ID: <200907121008.n6CA84M6010780@sheep.berlios.de>

Author: gruntster
Date: 2009-07-12 12:08:00 +0200 (Sun, 12 Jul 2009)
New Revision: 5065

Modified:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/src/CMakeLists.txt
Log:
[win32] fix linking

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/src/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/src/CMakeLists.txt	2009-07-12 10:05:48 UTC (rev 5064)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/src/CMakeLists.txt	2009-07-12 10:08:00 UTC (rev 5065)
@@ -5,13 +5,16 @@
 
 ADD_LIBRARY(ADM_core SHARED ${ADM_core_SRCS})
 ADD_TARGET_DEFINITIONS(ADM_core ADM_DEBUG FIND_LEAKS)
-TARGET_LINK_LIBRARIES(ADM_core dl)
 
 IF (MINGW)
 	TARGET_LINK_LIBRARIES(ADM_core "${PTHREAD_LIBRARIES}" imagehlp ws2_32)
 	ADD_TARGET_CFLAGS(ADM_core "-I${PTHREAD_INCLUDE_DIR}")
-ELSEIF (APPLE)
-	ADD_TARGET_LDFLAGS(ADM_core "-framework Carbon")
+ELSE (MINGW)
+	TARGET_LINK_LIBRARIES(ADM_core dl)
+	
+	IF (APPLE)
+		ADD_TARGET_LDFLAGS(ADM_core "-framework Carbon")
+	ENDIF (APPLE)
 ENDIF (MINGW)
 
 REMOVE_DEFINITIONS(-DHAVE_CONFIG_H)



From mean at mail.berlios.de  Sun Jul 12 20:09:16 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sun, 12 Jul 2009 20:09:16 +0200
Subject: [Avidemux-svn-commit] r5066 - in branches/avidemux_2.6_branch_mean:
	avidemux/common avidemux/common/ADM_editor
	avidemux/gtk/ADM_userInterfaces/ADM_gui2
	avidemux_core/ADM_coreUtils/src avidemux_plugins/ADM_demuxers/MpegPS
	avidemux_plugins/ADM_demuxers/MpegTS
Message-ID: <200907121809.n6CI9GuN003773@sheep.berlios.de>

Author: mean
Date: 2009-07-12 20:09:15 +0200 (Sun, 12 Jul 2009)
New Revision: 5066

Modified:
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edFrameType.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/GUI_jobs.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/gtk_gui.cpp
   branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/ADM_gui2/GUI_bindings.cpp
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/src/prefs.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegPS/ADM_psPlugin.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/ADM_tsPlugin.cpp
Log:
[all] memleak fix, thanks valgrind

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edFrameType.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edFrameType.cpp	2009-07-12 10:08:00 UTC (rev 5065)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edFrameType.cpp	2009-07-12 18:09:15 UTC (rev 5066)
@@ -62,7 +62,12 @@
             else nbKo++;
     }
     printf("[Editor] Muxer has %d frames right, %d frames wrong\n",nbOk,nbKo);
-    if(!nbKo)     return true;
+    if(!nbKo)  
+    {
+        delete [] buffer;
+        buffer=NULL;
+        return true;
+    }
     // Demuxer is wrong, rederive all frames...
     DIA_workingBase *work=createWorking("Updating frametype");
     for(int i=0;i<info.nb_frames;i++)

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/GUI_jobs.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/GUI_jobs.cpp	2009-07-12 10:08:00 UTC (rev 5065)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/GUI_jobs.cpp	2009-07-12 18:09:15 UTC (rev 5066)
@@ -31,12 +31,14 @@
 uint32_t nb;
 char     *name;
         memset(jobName,0,sizeof(jobName));
-
+char *jobDir=ADM_getJobDir();
         if(!buildDirectoryContent(&nb,ADM_getJobDir(),jobName,MAX_JOBS,".js"))
         {
+          delete [] jobDir;
           GUI_Error_HIG(QT_TR_NOOP("Oops"),QT_TR_NOOP("Something very wrong happened when building joblist."));
                 return 0;
         }
+        delete [] jobDir;
         if(!nb)
         {
           GUI_Info_HIG(ADM_LOG_IMPORTANT,QT_TR_NOOP("There are no jobs stored"), NULL);

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/gtk_gui.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/gtk_gui.cpp	2009-07-12 10:08:00 UTC (rev 5065)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/gtk_gui.cpp	2009-07-12 18:09:15 UTC (rev 5066)
@@ -1547,7 +1547,8 @@
           GUI_Error_HIG(QT_TR_NOOP("Saving failed"),QT_TR_NOOP("Saving the job failed. Maybe you have permission issue with ~/.avidemux"));
         }
 
-        delete fullname;
+        delete [] fullname;
+        delete [] base;
         ADM_dealloc(name);
         ADM_dealloc(final);
 }

Modified: branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/ADM_gui2/GUI_bindings.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/ADM_gui2/GUI_bindings.cpp	2009-07-12 10:08:00 UTC (rev 5065)
+++ branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/ADM_gui2/GUI_bindings.cpp	2009-07-12 18:09:15 UTC (rev 5066)
@@ -612,6 +612,7 @@
   if(!menuEntry)
   {
       printf("No custom menu...\n");
+      delete [] customdir;
       return;
   }
   if(!customdir)
@@ -620,11 +621,13 @@
       return;
   }
   /* Collect the name */
-   if(! buildDirectoryContent(&ADM_nbCustom,customdir, customNames,ADM_MAC_CUSTOM_SCRIPT,".js"))
+   if(! buildDirectoryContent(&ADM_nbCustom,customdir,   customNames,ADM_MAC_CUSTOM_SCRIPT,".js"))
     {
       printf("Failed to build custom dir content");
+      delete [] customdir;
       return;
     }
+  delete [] customdir;
   if(!ADM_nbCustom)
   {
       printf("No custom script\n");

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/src/prefs.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/src/prefs.cpp	2009-07-12 10:08:00 UTC (rev 5065)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/src/prefs.cpp	2009-07-12 18:09:15 UTC (rev 5066)
@@ -261,7 +261,7 @@
         strcpy(rcfile,dir_adm);
         strcat(rcfile,"/");
         strcat(rcfile,CONFIG);
-
+        delete [] dir_adm;
         
         // Now build the filename
 	if( access(rcfile,R_OK) == -1 ){

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegPS/ADM_psPlugin.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegPS/ADM_psPlugin.cpp	2009-07-12 10:08:00 UTC (rev 5065)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegPS/ADM_psPlugin.cpp	2009-07-12 18:09:15 UTC (rev 5066)
@@ -94,7 +94,7 @@
 */
 bool detectPs(const char *file)
 {
-    uint8_t *buffer=new uint8_t [PROBE_SIZE];
+    uint8_t buffer[PROBE_SIZE];
     uint32_t bufferSize;
     uint32_t nbPacket,nbMatch=0;
 

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/ADM_tsPlugin.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/ADM_tsPlugin.cpp	2009-07-12 10:08:00 UTC (rev 5065)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/ADM_tsPlugin.cpp	2009-07-12 18:09:15 UTC (rev 5066)
@@ -99,7 +99,7 @@
 */
 bool detectTs(const char *file)
 {
-    uint8_t *buffer=new uint8_t [PROBE_SIZE];
+    uint8_t buffer[PROBE_SIZE];
     uint32_t bufferSize;
     uint32_t nbPacket,nbMatch=0;
 



From mean at mail.berlios.de  Sun Jul 12 20:45:49 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sun, 12 Jul 2009 20:45:49 +0200
Subject: [Avidemux-svn-commit] r5067 -
	branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/src
Message-ID: <200907121845.n6CIjnmI010004@sheep.berlios.de>

Author: mean
Date: 2009-07-12 20:45:49 +0200 (Sun, 12 Jul 2009)
New Revision: 5067

Modified:
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/src/prefs.cpp
Log:
[oops] dont free static data

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/src/prefs.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/src/prefs.cpp	2009-07-12 18:09:15 UTC (rev 5066)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/src/prefs.cpp	2009-07-12 18:45:49 UTC (rev 5067)
@@ -261,7 +261,7 @@
         strcpy(rcfile,dir_adm);
         strcat(rcfile,"/");
         strcat(rcfile,CONFIG);
-        delete [] dir_adm;
+
         
         // Now build the filename
 	if( access(rcfile,R_OK) == -1 ){



From mean at mail.berlios.de  Sun Jul 12 20:45:52 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sun, 12 Jul 2009 20:45:52 +0200
Subject: [Avidemux-svn-commit] r5068 - in
	branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoEncoder:
	include src
Message-ID: <200907121845.n6CIjqKY010033@sheep.berlios.de>

Author: mean
Date: 2009-07-12 20:45:51 +0200 (Sun, 12 Jul 2009)
New Revision: 5068

Modified:
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoEncoder/include/ADM_coreVideoEncoderFFmpeg.h
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoEncoder/src/ADM_coreVideoEncoderFFmpeg.cpp
Log:
[FFmpeg/encoder] Dont always multi thread

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoEncoder/include/ADM_coreVideoEncoderFFmpeg.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoEncoder/include/ADM_coreVideoEncoderFFmpeg.h	2009-07-12 18:45:49 UTC (rev 5067)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoEncoder/include/ADM_coreVideoEncoderFFmpeg.h	2009-07-12 18:45:51 UTC (rev 5068)
@@ -30,6 +30,7 @@
 */
 typedef struct 
 {
+  const bool MultiThreaded;
   COMPRES_PARAMS params;
 //
 

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoEncoder/src/ADM_coreVideoEncoderFFmpeg.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoEncoder/src/ADM_coreVideoEncoderFFmpeg.cpp	2009-07-12 18:45:49 UTC (rev 5067)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoEncoder/src/ADM_coreVideoEncoderFFmpeg.cpp	2009-07-12 18:45:51 UTC (rev 5068)
@@ -220,7 +220,8 @@
         return false;
     }
    prolog();
-   encoderMT();
+   if(Settings.MultiThreaded==true)
+        encoderMT();
    res=avcodec_open(_context, codec); 
    if(res<0) 
     {   printf("[ff] Cannot open codec\n");



From mean at mail.berlios.de  Sun Jul 12 20:45:55 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sun, 12 Jul 2009 20:45:55 +0200
Subject: [Avidemux-svn-commit] r5069 - in
	branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder:
	. ffMpeg4 ffMsMpeg4
Message-ID: <200907121845.n6CIjtSe010077@sheep.berlios.de>

Author: mean
Date: 2009-07-12 20:45:55 +0200 (Sun, 12 Jul 2009)
New Revision: 5069

Added:
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/ffMsMpeg4/
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/ffMsMpeg4/ADM_ffMsMp4.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/ffMsMpeg4/ADM_ffMsMp4.h
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/ffMsMpeg4/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/ffMsMpeg4/ffMsMp4Plugin.cpp
Modified:
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/ffMpeg4/ADM_ffMpeg4.cpp
Log:
[VideoEncoder] Add msmpeg4 encoder (buggy)

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/CMakeLists.txt	2009-07-12 18:45:51 UTC (rev 5068)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/CMakeLists.txt	2009-07-12 18:45:55 UTC (rev 5069)
@@ -6,3 +6,4 @@
 ADD_SUBDIRECTORY(jpeg)
 ADD_SUBDIRECTORY(huff)
 ADD_SUBDIRECTORY(ffMpeg4)
+ADD_SUBDIRECTORY(ffMsMpeg4)

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/ffMpeg4/ADM_ffMpeg4.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/ffMpeg4/ADM_ffMpeg4.cpp	2009-07-12 18:45:51 UTC (rev 5068)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/ffMpeg4/ADM_ffMpeg4.cpp	2009-07-12 18:45:55 UTC (rev 5069)
@@ -29,6 +29,7 @@
 
 static FFcodecSetting Mp4Settings=
 {
+    true, // Multithreaded
     {
     COMPRESS_CQ, //COMPRESSION_MODE  mode;
     2,              // uint32_t          qz;           /// Quantizer
@@ -37,19 +38,19 @@
     1500,           //uint32_t          avg_bitrate;  /// avg_bitrate is in kb/s!!
     ADM_ENC_CAP_CBR+ADM_ENC_CAP_CQ+ADM_ENC_CAP_2PASS+ADM_ENC_CAP_2PASS_BR+ADM_ENC_CAP_GLOBAL+ADM_ENC_CAP_SAME
     },
-          ME_EPZS,			//     ME
-          0,				//          GMC     
+          ME_EPZS,			// ME
+          0,				// GMC     
           1,				// 4MV
-          0,				//           _QPEL;   
-          1,				//           _TREILLIS_QUANT
-          2,				//           qmin;
-          31,				//          qmax;
-          3,				//           max_qdiff;
-          2,				//           max_b_frames;
-          0,				//          mpeg_quant;
-          1,				//
-          -2,				//                 luma_elim_threshold;
-          1,				//
+          0,				// _QPEL;   
+          1,				// _TREILLIS_QUANT
+          2,				// qmin;
+          31,				// qmax;
+          3,				// max_qdiff;
+          2,				// max_b_frames;
+          0,				// mpeg_quant;
+          1,				// is_luma_elim_threshold
+          -2,				// luma_elim_threshold;
+          1,				// is_chroma_elim_threshold
           -5,				// chroma_elim_threshold;
           0.05,				//lumi_masking;
           1,				// is lumi
@@ -60,9 +61,9 @@
           0,				// min bitrate in kB/S
           0,				// max bitrate
           0,				// default matrix
-          0,				// no gop size
-          NULL,
-          NULL,
+          250,				// no gop size
+          NULL,             // intra_matrix
+          NULL,             // intra_matrix
           0,				// interlaced
           0,				// WLA: bottom-field-first
           0,				// wide screen
@@ -73,7 +74,7 @@
           0,				// is spatial
           0.0,				// spatial masking
           0,				// NAQ
-          0				// DUMMY 
+          0				    // DUMMY 
 };
 /**
         \fn ADM_ffMpeg4Encoder
@@ -266,10 +267,10 @@
          diaElemFloat    qzComp(PX(qcompress),QT_TR_NOOP("_Quantizer compression:"),0,1);
          diaElemFloat    qzBlur(PX(qblur),QT_TR_NOOP("Quantizer _blur:"),0,1);
          
-         
+        diaElemUInteger GopSize(PX(gop_size),QT_TR_NOOP("_Gop Size:"),1,500); 
           /* First Tab : encoding mode */
-        diaElem *diamode[]={&bitrate};
-        diaElemTabs tabMode(QT_TR_NOOP("User Interface"),1,diamode);
+        diaElem *diamode[]={&GopSize,&bitrate};
+        diaElemTabs tabMode(QT_TR_NOOP("User Interface"),2,diamode);
         
         /* 2nd Tab : ME */
         diaElemFrame frameMe(QT_TR_NOOP("Advanced Simple Profile"));

Copied: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/ffMsMpeg4/ADM_ffMsMp4.cpp (from rev 5068, branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/ffMpeg4/ADM_ffMpeg4.cpp)
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/ffMpeg4/ADM_ffMpeg4.cpp	2009-07-12 18:45:51 UTC (rev 5068)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/ffMsMpeg4/ADM_ffMsMp4.cpp	2009-07-12 18:45:55 UTC (rev 5069)
@@ -0,0 +1,272 @@
+/***************************************************************************
+                          \fn ADM_ffMsMpeg4
+                          \brief Front end for libavcodec MsMpeg4 aka divx3 encoder
+                             -------------------
+    
+    copyright            : (C) 2002/2009 by mean
+    email                : fixounet at free.fr
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+#include "ADM_lavcodec.h"
+#include "ADM_default.h"
+#include "ADM_ffMsMp4.h"
+#undef ADM_MINIMAL_UI_INTERFACE // we need the full UI
+#include "DIA_factory.h"
+
+#if 1
+#define aprintf(...) {}
+#else
+#define aprintf printf
+#endif
+
+static FFcodecSetting MsMp4Settings=
+{
+    false,
+    {
+    COMPRESS_CQ, //COMPRESSION_MODE  mode;
+    2,              // uint32_t          qz;           /// Quantizer
+    1500,           //uint32_t          bitrate;      /// In kb/s 
+    700,            //uint32_t          finalsize;    /// In ?
+    1500,           //uint32_t          avg_bitrate;  /// avg_bitrate is in kb/s!!
+    ADM_ENC_CAP_CBR+ADM_ENC_CAP_CQ+ADM_ENC_CAP_2PASS+ADM_ENC_CAP_2PASS_BR+ADM_ENC_CAP_GLOBAL+ADM_ENC_CAP_SAME
+    },
+          ME_EPZS,			// ME
+          0,				// GMC     
+          0,				// 4MV
+          0,				// _QPEL;   
+          1,				// _TREILLIS_QUANT
+          2,				// qmin;
+          31,				// qmax;
+          3,				// max_qdiff;
+          0,				// max_b_frames;
+          0,				// mpeg_quant;
+          1,				// is_luma_elim_threshold
+          -2,				// luma_elim_threshold;
+          1,				// is_chroma_elim_threshold
+          -5,				// chroma_elim_threshold;
+          0.05,				//lumi_masking;
+          1,				// is lumi
+          0.01,				//dark_masking; 
+          1,				// is dark
+          0.5,				// qcompress amount of qscale change between easy & hard scenes (0.0-1.0
+          0.5,				// qblur;    amount of qscale smoothing over time (0.0-1.0) 
+          0,				// min bitrate in kB/S
+          0,				// max bitrate
+          0,				// default matrix
+          250,				// no gop size
+          NULL,             // intra_matrix
+          NULL,             // intra_matrix
+          0,				// interlaced
+          0,				// WLA: bottom-field-first
+          0,				// wide screen
+          2,				// mb eval = distortion
+          8000,				// vratetol 8Meg
+          0,				// is temporal
+          0.0,				// temporal masking
+          0,				// is spatial
+          0.0,				// spatial masking
+          0,				// NAQ
+          0				    // DUMMY 
+};
+/**
+        \fn ADM_ffMsMp4Encoder
+*/
+ADM_ffMsMp4Encoder::ADM_ffMsMp4Encoder(ADM_coreVideoFilter *src) : ADM_coreVideoEncoderFFmpeg(src,&MsMp4Settings)
+{
+    printf("[ffMsMP4] Creating.\n");
+   
+
+}
+
+/**
+    \fn setup
+*/
+bool ADM_ffMsMp4Encoder::setup(void)
+{
+    
+    switch(Settings.params.mode)
+    {
+      case COMPRESS_2PASS:
+      case COMPRESS_2PASS_BITRATE:
+           if(false==setupPass())
+            {
+                printf("[ffMsMP4] Multipass setup failed\n");
+                return false;
+            }
+            break;
+      case COMPRESS_SAME:
+      case COMPRESS_CQ:
+            _context->flags |= CODEC_FLAG_QSCALE;
+            _context->bit_rate = 0;
+            break;
+      case COMPRESS_CBR:
+              _context->bit_rate=Settings.params.bitrate*1000; // kb->b;
+            break;
+     default:
+            return false;
+    }
+    presetContext(&Settings);
+    if(false== ADM_coreVideoEncoderFFmpeg::setup(CODEC_ID_MSMPEG4V3))
+        return false;
+
+    printf("[ffMsMP4] Setup ok\n");
+    return true;
+}
+
+
+/** 
+    \fn ~ADM_ffMsMp4Encoder
+*/
+ADM_ffMsMp4Encoder::~ADM_ffMsMp4Encoder()
+{
+    printf("[ffMsMP4] Destroying.\n");
+   
+    
+}
+
+/**
+    \fn encode
+*/
+bool         ADM_ffMsMp4Encoder::encode (ADMBitstream * out)
+{
+int sz,q;
+again:
+    sz=0;
+    if(false==preEncode()) // Pop - out the frames stored in the queue due to B-frames
+    {
+        return false;
+    }
+    q=image->_Qp;
+    
+    if(!q) q=2;
+    switch(Settings.params.mode)
+    {
+      case COMPRESS_SAME:
+                // Keep same frame type & same Qz as the incoming frame...
+            _frame.quality = (int) floor (FF_QP2LAMBDA * q+ 0.5);
+
+            if(image->flags & AVI_KEY_FRAME)    _frame.pict_type=FF_I_TYPE;
+            else                                _frame.pict_type=FF_P_TYPE;
+
+            break;
+      case COMPRESS_2PASS:
+      case COMPRESS_2PASS_BITRATE:
+            switch(pass)
+            {
+                case 1: 
+                        break;
+                case 2: 
+                        break; // Get Qz for this frame...
+            }
+      case COMPRESS_CQ:
+            _frame.quality = (int) floor (FF_QP2LAMBDA * Settings.params.qz+ 0.5);
+            break;
+      case COMPRESS_CBR:
+            break;
+     default:
+            printf("[ffMsMP4] Unsupported encoding mode\n");
+            return false;
+    }
+    aprintf("[CODEC] Flags = 0x%x, QSCALE=%x, bit_rate=%d, quality=%d qz=%d incoming qz=%d\n",_context->flags,CODEC_FLAG_QSCALE,
+                                     _context->bit_rate,  _frame.quality, _frame.quality/ FF_QP2LAMBDA,q);     
+    
+    _frame.reordered_opaque=image->Pts;
+    if ((sz = avcodec_encode_video (_context, out->data, out->bufferSize, &_frame)) < 0)
+    {
+        printf("[ffMsMP4] Error %d encoding video\n",sz);
+        return false;
+    }
+    
+    if(sz==0) // no pic, probably pre filling, try again
+        goto again;
+link:
+    postEncode(out,sz);
+   
+    return true;
+}
+
+/**
+    \fn isDualPass
+
+*/
+bool         ADM_ffMsMp4Encoder::isDualPass(void) 
+{
+    if(Settings.params.mode==COMPRESS_2PASS || Settings.params.mode==COMPRESS_2PASS_BITRATE ) return true;
+    return false;
+
+}
+
+/**
+    \fn jpegConfigure
+    \brief UI configuration for jpeg encoder
+*/
+
+bool         ffMsMp4Configure(void)
+{         
+diaMenuEntry meE[]={
+  {1,QT_TR_NOOP("None")},
+  {2,QT_TR_NOOP("Full")},
+  {3,QT_TR_NOOP("Log")},
+  {4,QT_TR_NOOP("Phods")},
+  {5,QT_TR_NOOP("EPZS")},
+  {6,QT_TR_NOOP("X1")}
+};       
+
+diaMenuEntry qzE[]={
+  {0,QT_TR_NOOP("H.263")},
+  {1,QT_TR_NOOP("MPEG")}
+};       
+
+diaMenuEntry rdE[]={
+  {0,QT_TR_NOOP("MB comparison")},
+  {1,QT_TR_NOOP("Fewest bits (vhq)")},
+  {2,QT_TR_NOOP("Rate distortion")}
+};     
+
+        FFcodecSetting *conf=&MsMp4Settings;
+
+uint32_t me=(uint32_t)conf->me_method;  
+#define PX(x) &(conf->x)
+
+         diaElemBitrate   bitrate(&(MsMp4Settings.params),NULL);
+         diaElemUInteger  qminM(PX(qmin),QT_TR_NOOP("Mi_n. quantizer:"),1,31);
+         diaElemUInteger  qmaxM(PX(qmax),QT_TR_NOOP("Ma_x. quantizer:"),1,31);
+         diaElemUInteger  qdiffM(PX(max_qdiff),QT_TR_NOOP("Max. quantizer _difference:"),1,31);
+         diaElemToggle    trellis(PX(_TRELLIS_QUANT),QT_TR_NOOP("_Trellis quantization"));
+         diaElemUInteger filetol(PX(vratetol),QT_TR_NOOP("_Filesize tolerance (kb):"),0,100000);
+         
+         diaElemFloat    qzComp(PX(qcompress),QT_TR_NOOP("_Quantizer compression:"),0,1);
+         diaElemFloat    qzBlur(PX(qblur),QT_TR_NOOP("Quantizer _blur:"),0,1);
+         
+        diaElemUInteger GopSize(PX(gop_size),QT_TR_NOOP("_Gop Size:"),1,500); 
+          /* First Tab : encoding mode */
+        diaElem *diamode[]={&GopSize,&bitrate};
+        diaElemTabs tabMode(QT_TR_NOOP("User Interface"),2,diamode);
+        
+        /* 3nd Tab : Qz */
+        
+         diaElem *diaQze[]={&qminM,&qmaxM,&qdiffM,&trellis};
+        diaElemTabs tabQz(QT_TR_NOOP("Quantization"),4,diaQze);
+        
+        /* 4th Tab : RControl */
+        
+         diaElem *diaRC[]={&filetol,&qzComp,&qzBlur};
+        diaElemTabs tabRC(QT_TR_NOOP("Rate Control"),3,diaRC);
+        
+         diaElemTabs *tabs[]={&tabMode,&tabQz,&tabRC};
+        if( diaFactoryRunTabs(QT_TR_NOOP("libavcodec MPEG-4 configuration"),3,tabs))
+        {
+          conf->me_method=(Motion_Est_ID)me;
+          return true;
+        }
+         return false;
+}
+// EOF

Added: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/ffMsMpeg4/ADM_ffMsMp4.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/ffMsMpeg4/ADM_ffMsMp4.h	2009-07-12 18:45:51 UTC (rev 5068)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/ffMsMpeg4/ADM_ffMsMp4.h	2009-07-12 18:45:55 UTC (rev 5069)
@@ -0,0 +1,47 @@
+/***************************************************************************
+                          \fn ADM_VideoEncoders
+                          \brief Internal handling of video encoders
+                             -------------------
+    
+    copyright            : (C) 2002/2009 by mean
+    email                : fixounet at free.fr
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+#ifndef ADM_ffMpeg4_ENCODER_H
+#define ADM_ffMpeg4_ENCODER_H
+#include "ADM_coreVideoEncoderFFmpeg.h"
+
+
+/**
+        \class ADM_ffMsMp4Encoder
+        \brief Dummy encoder that does nothing
+
+*/
+class ADM_ffMsMp4Encoder : public ADM_coreVideoEncoderFFmpeg
+{
+protected:
+               
+           
+               int             plane;
+               
+public:
+
+                           ADM_ffMsMp4Encoder(ADM_coreVideoFilter *src);
+virtual                    ~ADM_ffMsMp4Encoder();
+virtual        bool        setup(void); 
+virtual        bool        encode (ADMBitstream * out);
+virtual const  char        *getFourcc(void) {return "DIV3";}
+
+virtual        bool         isDualPass(void) ;
+
+};
+
+#endif

Added: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/ffMsMpeg4/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/ffMsMpeg4/CMakeLists.txt	2009-07-12 18:45:51 UTC (rev 5068)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/ffMsMpeg4/CMakeLists.txt	2009-07-12 18:45:55 UTC (rev 5069)
@@ -0,0 +1,15 @@
+INCLUDE(ve_plugin)
+
+SET(ffMsMp4_SRCS 
+        ffMsMp4Plugin.cpp
+        ADM_ffMsMp4.cpp
+)
+INCLUDE_DIRECTORIES(${CMAKE_CURRENT_BINARY_DIR})
+
+ADD_LIBRARY(ADM_ve_ffMsMp4 SHARED ${ffMsMp4_SRCS})
+
+INIT_VIDEO_ENCODER(ADM_ve_ffMsMp4)
+INSTALL_VIDEO_ENCODER(ADM_ve_ffMsMp4)
+TARGET_LINK_LIBRARIES(ADM_ve_ffMsMp4 ADM_libavcodec ADM_libavutil)
+INCLUDE_DIRECTORIES("${AVIDEMUX_SOURCE_DIR}/avidemux/")
+INCLUDE_DIRECTORIES("${AVIDEMUX_SOURCE_DIR}/avidemux/ADM_libraries/ADM_ffmpeg")

Added: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/ffMsMpeg4/ffMsMp4Plugin.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/ffMsMpeg4/ffMsMp4Plugin.cpp	2009-07-12 18:45:51 UTC (rev 5068)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/ffMsMpeg4/ffMsMp4Plugin.cpp	2009-07-12 18:45:55 UTC (rev 5069)
@@ -0,0 +1,31 @@
+/***************************************************************************
+                          \fn     jpegPlugin
+                          \brief  Plugin for jpeg dummy encoder
+                             -------------------
+    
+    copyright            : (C) 2002/2009 by mean
+    email                : fixounet at free.fr
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+#include "ADM_default.h"
+#include "ADM_ffMsMp4.h"
+#include "ADM_coreVideoEncoderInternal.h"
+
+extern bool         ffMsMp4Configure(void);
+
+ADM_DECLARE_VIDEO_ENCODER_PREAMBLE(ADM_ffMsMp4Encoder);
+ADM_DECLARE_VIDEO_ENCODER_NO_CONFIG();
+ADM_DECLARE_VIDEO_ENCODER_MAIN("ffMsMp4",
+                               "MsMpeg4(Divx3)",
+                               "Simple ffmpeg based ms mpeg4 Encoder (c) 2009 Mean",
+                                ffMsMp4Configure, // No configuration
+                                ADM_UI_ALL,
+                                1,0,0);



From gruntster at mail.berlios.de  Sun Jul 12 20:52:08 2009
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Sun, 12 Jul 2009 20:52:08 +0200
Subject: [Avidemux-svn-commit] r5070 - in
	branches/avidemux_2.5_branch_gruntster: avidemux/ADM_encoder
	avidemux/ADM_plugin plugins/ADM_videoEncoder/ADM_vidEnc_avcodec
	plugins/ADM_videoEncoder/ADM_vidEnc_x264
	plugins/ADM_videoEncoder/ADM_vidEnc_xvid
Message-ID: <200907121852.n6CIq86p010917@sheep.berlios.de>

Author: gruntster
Date: 2009-07-12 20:52:00 +0200 (Sun, 12 Jul 2009)
New Revision: 5070

Modified:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/ADM_externalEncoder.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/ADM_externalEncoder.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_plugin/ADM_vidEnc_plugin.h
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/dvEncoder.cpp
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/dvEncoder.h
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/encoder.cpp
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/encoder.h
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/ffv1Encoder.cpp
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/ffvhuffEncoder.cpp
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/huffyuvEncoder.cpp
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/mpeg1Encoder.cpp
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/encoder.cpp
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_xvid/encoder.cpp
Log:
[vidEnc] plugins now return supported colour spaces and Avidemux converts the decoded picture to the most lossless option (rather than plugins having to use YV12 only)

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/ADM_externalEncoder.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/ADM_externalEncoder.cpp	2009-07-12 18:45:55 UTC (rev 5069)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/ADM_externalEncoder.cpp	2009-07-12 18:52:00 UTC (rev 5070)
@@ -23,8 +23,11 @@
 extern "C"
 {
 #include "libavcodec/avcodec.h"
+#include "libswscale/swscale.h"
 }
 
+static const int colourSpaceMapping[][2] = {{ADM_CSP_YV12, PIX_FMT_YUV420P}, {ADM_CSP_I422, PIX_FMT_YUV422P}};
+
 externalEncoder::externalEncoder(COMPRES_PARAMS *params, bool globalHeader)
 {
 	_plugin = getVideoEncoderPlugin(params->extra_param);
@@ -32,6 +35,10 @@
 	_useExistingLogFile = false;
 	_logFileName = NULL;
 	_globalHeader = globalHeader;
+
+	_swsContext = NULL;
+	_resampleSize = 0;
+	_resampleBuffer = NULL;
 }
 
 externalEncoder::~externalEncoder()
@@ -40,8 +47,46 @@
 
 	if (_logFileName)
 		delete [] _logFileName;
+
+	if (_resampleBuffer)
+		delete [] _resampleBuffer;
+
+	if (_swsContext)
+		sws_freeContext(_swsContext);
 }
 
+int externalEncoder::getColourSpace(enum PixelFormat pixFmt)
+{
+	int colourSpace = 0;
+
+	for (int i = 0; i < (sizeof(colourSpaceMapping) / sizeof(int) / 2); i++)
+	{
+		if (colourSpaceMapping[i][1] == pixFmt)
+		{
+			colourSpace = colourSpaceMapping[i][0];
+			break;
+		}
+	}
+
+	return colourSpace;
+}
+
+enum PixelFormat externalEncoder::getAvCodecColourspace(int colourSpace)
+{
+	enum PixelFormat pixFmt = PIX_FMT_NONE;
+
+	for (int i = 0; i < (sizeof(colourSpaceMapping) / sizeof(int) / 2); i++)
+	{
+		if (colourSpaceMapping[i][0] == colourSpace)
+		{
+			pixFmt = (enum PixelFormat)colourSpaceMapping[i][1];
+			break;
+		}
+	}
+
+	return pixFmt;
+}
+
 uint8_t externalEncoder::configure(AVDMGenericVideoStream *instream, int useExistingLogFile)
 {
 	ADV_Info *info;
@@ -73,7 +118,31 @@
 		properties.flags |= ADM_VIDENC_FLAG_GLOBAL_HEADER;
 
 	if (_plugin->open(_plugin->encoderId, &properties))
+	{
+		int64_t pixFmtMask = 0;
+
+		for (int i = 0; i < properties.supportedCspsCount; i++)
+			pixFmtMask |= (1 << getAvCodecColourspace(properties.supportedCsps[i]));
+
+		_pixFmt = avcodec_find_best_pix_fmt(pixFmtMask, PIX_FMT_YUV420P, 0, NULL);
+
+		if (_pixFmt != PIX_FMT_YUV420P)
+		{
+			AVPicture resamplePicture;
+
+			_swsContext = sws_getContext(
+				properties.width, properties.height, PIX_FMT_YUV420P,
+				properties.width, properties.height, _pixFmt,
+				SWS_SPLINE, NULL, NULL, NULL);
+
+			_resampleSize = avpicture_fill(&resamplePicture, NULL, _pixFmt, properties.width, properties.height);
+			_resampleBuffer = new uint8_t[_resampleSize];
+		}
+
+		printf("[externalEncoder] Target colourspace: %s\n", _pixFmt == PIX_FMT_YUV420P ? "yv12" : avcodec_get_pix_fmt_name(_pixFmt));
+
 		return (startPass() == ADM_VIDENC_ERR_SUCCESS);
+	}
 	else
 		return 0;
 }
@@ -102,12 +171,31 @@
 	}
 	else
 	{
-		AVPicture sourcePicture;
+		AVPicture sourcePicture, resamplePicture, *inputPicture;
 
 		params.frameDataSize = avpicture_fill(&sourcePicture, _vbuffer->data, PIX_FMT_YUV420P, _w, _h);
 
-		memcpy(&params.frameLineSize, sourcePicture.linesize, sizeof(params.frameLineSize));
-		memcpy(&params.frameData, sourcePicture.data, sizeof(params.frameData));
+		if (_swsContext)
+		{
+			params.frameDataSize = avpicture_fill(&resamplePicture, _resampleBuffer, _pixFmt, _w, _h);
+
+			// Swap planes since input is YV12 (not YUV420P)
+			uint8_t *tmpPlane = sourcePicture.data[1];
+
+			sourcePicture.data[1] = sourcePicture.data[2];
+			sourcePicture.data[2] = tmpPlane;
+
+			sws_scale(
+				_swsContext, sourcePicture.data, sourcePicture.linesize, 0,
+				_h, resamplePicture.data, resamplePicture.linesize);
+
+			inputPicture = &resamplePicture;
+		}
+		else
+			inputPicture = &sourcePicture;
+
+		memcpy(&params.frameLineSize, inputPicture->linesize, sizeof(params.frameLineSize));
+		memcpy(&params.frameData, inputPicture->data, sizeof(params.frameData));
 	}
 
 	params.encodedData = NULL;
@@ -182,6 +270,7 @@
 	passParameters.structSize = sizeof(vidEncPassParameters);
 	passParameters.logFileName = _logFileName;
 	passParameters.useExistingLogFile = _useExistingLogFile;
+	passParameters.csp = getColourSpace(_pixFmt);
 
 	ret = _plugin->beginPass(_plugin->encoderId, &passParameters);
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/ADM_externalEncoder.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/ADM_externalEncoder.h	2009-07-12 18:45:55 UTC (rev 5069)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/ADM_externalEncoder.h	2009-07-12 18:52:00 UTC (rev 5070)
@@ -27,14 +27,20 @@
 {
 private:
 	ADM_vidEnc_plugin *_plugin;
+	PixelFormat _pixFmt;
 	bool _openPass;
 	bool _useExistingLogFile;
 	char* _logFileName;
 	bool _globalHeader;
 	uint8_t *_extraData;
 	int _extraDataSize;
+	struct SwsContext *_swsContext;
+	int _resampleSize;
+	uint8_t *_resampleBuffer;
 
 	uint8_t startPass(void);
+	int getColourSpace(enum PixelFormat pixFmt);
+	enum PixelFormat getAvCodecColourspace(int colourSpace);
 
 public:
 	externalEncoder(COMPRES_PARAMS *params, bool globalHeader);

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_plugin/ADM_vidEnc_plugin.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_plugin/ADM_vidEnc_plugin.h	2009-07-12 18:45:55 UTC (rev 5069)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_plugin/ADM_vidEnc_plugin.h	2009-07-12 18:52:00 UTC (rev 5070)
@@ -43,16 +43,21 @@
 #define ADM_VIDENC_REQ_NONE 0
 #define ADM_VIDENC_REQ_NULL_FLUSH 1
 
+#define ADM_CSP_YV12 1
+#define ADM_CSP_I422 2
+
 #include "DIA_uiTypes.h"
 
 #define ADM_VIDENC_FLAG_GLOBAL_HEADER 1
 
 typedef struct
 {
+	// In
 	int structSize;
 	uint8_t *frameData[4];
 	int frameLineSize[4];
 	int frameDataSize;
+	// Out
 	uint8_t *encodedData;
 	int encodedDataSize;
 	int64_t ptsFrame;
@@ -62,6 +67,7 @@
 
 typedef struct
 {
+	// In
 	int structSize;
 	unsigned int width;
 	unsigned int height;
@@ -71,26 +77,36 @@
 	unsigned int fpsNum;
 	unsigned int fpsDen;
 	unsigned int flags;
+	// Out
+	unsigned int supportedCspsCount;
+	int *supportedCsps;
+
 } vidEncVideoProperties;
 
 typedef struct
 {
+	// In
 	int structSize;
+	// In/Out
 	unsigned int encodeMode;
 	int encodeModeParameter;
 } vidEncOptions;
 
 typedef struct
 {
+	// In
 	int structSize;
+	int useExistingLogFile;
+	const char* logFileName;
+	int csp;
+	// Out
 	uint8_t *extraData;
 	int extraDataSize;
-	const char* logFileName;
-	int useExistingLogFile;
 } vidEncPassParameters;
 
 typedef struct
 {
+	// In
 	int structSize;
 	intptr_t parent;
 	intptr_t parentNative;

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/CMakeLists.txt	2009-07-12 18:45:55 UTC (rev 5069)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/CMakeLists.txt	2009-07-12 18:52:00 UTC (rev 5070)
@@ -22,11 +22,8 @@
 add_library(ADM_libavcodec UNKNOWN IMPORTED)
 set_property(TARGET ADM_libavcodec PROPERTY IMPORTED_LOCATION "${FFMPEG_INSTALL_DIR}/${LIBAVCODEC_LIB}")
 
-add_library(ADM_libswscale UNKNOWN IMPORTED)
-set_property(TARGET ADM_libswscale PROPERTY IMPORTED_LOCATION "${FFMPEG_INSTALL_DIR}/${LIBSWSCALE_LIB}")
-
 ADD_LIBRARY(ADM_vidEnc_avcodec SHARED ${ADM_vidEnc_avcodec_SRCS})
-TARGET_LINK_LIBRARIES(ADM_vidEnc_avcodec ${LIBXML2_LIBRARIES} ADM_core ADM_coreUI ADM_libavcodec ADM_libswscale)
+TARGET_LINK_LIBRARIES(ADM_vidEnc_avcodec ${LIBXML2_LIBRARIES} ADM_core ADM_coreUI ADM_libavcodec)
 
 INIT_VIDEO_ENCODER_PLUGIN(ADM_vidEnc_avcodec)
 INSTALL_VIDEO_ENCODER(ADM_vidEnc_avcodec)

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/dvEncoder.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/dvEncoder.cpp	2009-07-12 18:45:55 UTC (rev 5069)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/dvEncoder.cpp	2009-07-12 18:52:00 UTC (rev 5070)
@@ -23,7 +23,7 @@
 
 DVEncoder::DVEncoder(void)
 {
-	init(CODEC_ID_DVVIDEO, PIX_FMT_YUV420P);
+	init(CODEC_ID_DVVIDEO, ADM_CSP_YV12);
 }
 
 const char* DVEncoder::getEncoderType(void)
@@ -57,9 +57,10 @@
 		for (int i = 0; i < profileCount; i++)
 		{
 			if (properties->height == dvProfiles[i].height && properties->width == dvProfiles[i].width && 
-				((int)(properties->fpsNum * 1000.0 / properties->fpsDen) == (int)(dvProfiles[i].time_base.num * 1000.0 / dvProfiles[i].time_base.den)))
+				((int)(properties->fpsNum * 1000.0 / properties->fpsDen) == (int)(dvProfiles[i].timeBase.num * 1000.0 / dvProfiles[i].timeBase.den)))
 			{
-				_context->pix_fmt = dvProfiles[i].pix_fmt;
+				_context->pix_fmt = getAvCodecColourSpace(dvProfiles[i].pixFmt);
+				_supportedCsps[0] = dvProfiles[i].pixFmt;
 				validProfile = true;
 				break;
 			}
@@ -75,7 +76,7 @@
 			for (int i = 0; i < profileCount; i++)
 			{
 				out << "\n" << dvProfiles[i].width << " x " << dvProfiles[i].height << " @ " << std::fixed
-					<< std::setprecision(2) << (float)dvProfiles[i].time_base.num / dvProfiles[i].time_base.den << "fps";
+					<< std::setprecision(2) << (float)dvProfiles[i].timeBase.num / dvProfiles[i].timeBase.den << "fps";
 			}
 
 			ret = ADM_VIDENC_ERR_FAILED;

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/dvEncoder.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/dvEncoder.h	2009-07-12 18:45:55 UTC (rev 5069)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/dvEncoder.h	2009-07-12 18:52:00 UTC (rev 5070)
@@ -20,25 +20,25 @@
 #ifdef __cplusplus
 extern "C"
 {
-	#include "ADM_vidEnc_plugin.h"
+#include "ADM_vidEnc_plugin.h"
 }
 
 #include "encoder.h"
 
 typedef struct DVprofile {
-	AVRational time_base;
+	AVRational timeBase;
 	int height;
 	int width;
-	enum PixelFormat pix_fmt;
+	int pixFmt;
 } DVprofile;
 
 static const DVprofile dvProfiles[] = {
-	{ { 30000, 1001 }, 480, 720, PIX_FMT_YUV422P },
-    { { 25, 1 }, 576, 720, PIX_FMT_YUV420P },
-	{ { 50, 1 }, 720, 960, PIX_FMT_YUV422P },
-    { { 60000, 1001 }, 720, 960, PIX_FMT_YUV422P },
-    { { 30000, 1001 }, 1080, 1280, PIX_FMT_YUV422P },
-    { { 25, 1 }, 1080, 1440, PIX_FMT_YUV422P }
+	{ { 30000, 1001 }, 480, 720, ADM_CSP_I422 },
+    { { 25, 1 }, 576, 720, ADM_CSP_YV12 },
+	{ { 50, 1 }, 720, 960, ADM_CSP_I422 },
+    { { 60000, 1001 }, 720, 960, ADM_CSP_I422 },
+    { { 30000, 1001 }, 1080, 1280, ADM_CSP_I422 },
+    { { 25, 1 }, 1080, 1440, ADM_CSP_I422 }
 };
 
 class DVEncoder : public AvcodecEncoder

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/encoder.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/encoder.cpp	2009-07-12 18:45:55 UTC (rev 5069)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/encoder.cpp	2009-07-12 18:52:00 UTC (rev 5070)
@@ -146,7 +146,7 @@
 	}
 }
 
-void AvcodecEncoder::init(enum CodecID id, enum PixelFormat targetPixelFormat)
+void AvcodecEncoder::init(enum CodecID id, int targetColourSpace)
 {
 	_codecId = id;
 	_opened = false;
@@ -155,10 +155,7 @@
 	_currentPass = 0;
 	_openPass = false;
 
-	_targetPixelFormat = targetPixelFormat;
-
-	_swsContext = NULL;
-	_resampleBuffer = NULL;
+	_supportedCsps[0] = targetColourSpace;
 }
 
 void AvcodecEncoder::initContext(vidEncVideoProperties *properties)
@@ -166,7 +163,7 @@
 	_context->width = properties->width;
 	_context->height = properties->height;
 	_context->time_base = (AVRational){properties->fpsDen, properties->fpsNum};
-	_context->pix_fmt = _targetPixelFormat;
+	_context->pix_fmt = getAvCodecColourSpace(_supportedCsps[0]);
 }
 
 AVCodec *AvcodecEncoder::getAvCodec(void)
@@ -174,6 +171,23 @@
 	return avcodec_find_encoder(_codecId);
 }
 
+enum PixelFormat AvcodecEncoder::getAvCodecColourSpace(int colourSpace)
+{
+	enum PixelFormat pixFmt = PIX_FMT_NONE;
+
+	switch (colourSpace)
+	{
+		case ADM_CSP_YV12:
+			pixFmt = PIX_FMT_YUV420P;
+			break;
+		case ADM_CSP_I422:
+			pixFmt = PIX_FMT_YUV422P;
+			break;
+	}
+
+	return pixFmt;
+}
+
 int AvcodecEncoder::getFrameType(void)
 {
 	if (_context->coded_frame->key_frame == 1)
@@ -263,8 +277,8 @@
 	memset(&_frame, 0, sizeof(_frame));
 	_frame.pts = AV_NOPTS_VALUE;
 
-	_bufferSize = properties->width * properties->height * 3;
-	_buffer = new uint8_t[_bufferSize];
+	properties->supportedCspsCount = 1;
+	properties->supportedCsps = &_supportedCsps[0];
 
 	return ADM_VIDENC_ERR_SUCCESS;
 }
@@ -286,21 +300,17 @@
 		return ADM_VIDENC_ERR_PASS_SKIP;
 	}
 
-	_openPass = true;
-	_currentPass++;
-
-	if (_context->pix_fmt != PIX_FMT_YUV420P)
+	if (!_buffer)
 	{
-		_swsContext = sws_getContext(
-			_context->width, _context->height, PIX_FMT_YUV420P,
-			_context->width, _context->height, _context->pix_fmt,
-			SWS_SPLINE, NULL, NULL, NULL);
+		AVPicture encodedPicture;
 
-		_resampleSize = _bufferSize;
-		_resampleBuffer = new uint8_t[_resampleSize];
+		_bufferSize = avpicture_fill(&encodedPicture, NULL, _context->pix_fmt, _context->width, _context->height);
+		_buffer = new uint8_t[_bufferSize];
 	}
 
-	passParameters->structSize = sizeof(vidEncPassParameters);
+	_openPass = true;
+	_currentPass++;
+
 	passParameters->extraData = _context->extradata;
 	passParameters->extraDataSize = _context->extradata_size;
 
@@ -317,36 +327,22 @@
 
 	if (encodeParams->frameData[0])
 	{
-		// Swap planes since input is YV12 (not YUV420P)
-		uint8_t *tmpPlane = encodeParams->frameData[1];
-
-		encodeParams->frameData[1] = encodeParams->frameData[2];
-		encodeParams->frameData[2] = tmpPlane;
-
-		if (_swsContext)
+		if (_supportedCsps[0] == ADM_CSP_YV12)
 		{
-			AVPicture resamplePicture;
+			// Swap planes so YV12 looks like YUV420P
+			uint8_t *tmpPlane = encodeParams->frameData[1];
 
-			avpicture_fill(
-				&resamplePicture, _resampleBuffer, _context->pix_fmt, _context->width, _context->height);
-
-			sws_scale(
-				_swsContext, encodeParams->frameData, encodeParams->frameLineSize, 0,
-				_context->height, resamplePicture.data, resamplePicture.linesize);
-
-			memcpy(&_frame.linesize, resamplePicture.linesize, sizeof(resamplePicture.linesize));
-			memcpy(&_frame.data, resamplePicture.data, sizeof(resamplePicture.data));
+			encodeParams->frameData[1] = encodeParams->frameData[2];
+			encodeParams->frameData[2] = tmpPlane;
 		}
-		else
-		{
-			_frame.data[0] = encodeParams->frameData[0];
-			_frame.data[1] = encodeParams->frameData[1];
-			_frame.data[2] = encodeParams->frameData[2];
-			_frame.linesize[0] = encodeParams->frameLineSize[0];
-			_frame.linesize[1] = encodeParams->frameLineSize[1];
-			_frame.linesize[2] = encodeParams->frameLineSize[2];
-		}
 
+		_frame.data[0] = encodeParams->frameData[0];
+		_frame.data[1] = encodeParams->frameData[1];
+		_frame.data[2] = encodeParams->frameData[2];
+		_frame.linesize[0] = encodeParams->frameLineSize[0];
+		_frame.linesize[1] = encodeParams->frameLineSize[1];
+		_frame.linesize[2] = encodeParams->frameLineSize[2];
+
 		int size = avcodec_encode_video(_context, _buffer, _bufferSize, &_frame);
 
 		if (size < 0)
@@ -366,18 +362,6 @@
 	if (_openPass)
 		_openPass = false;
 
-	if (_swsContext)
-	{
-		sws_freeContext(_swsContext);
-		_swsContext = NULL;
-	}
-
-	if (_resampleBuffer)
-	{
-		delete _resampleBuffer;
-		_resampleBuffer = NULL;
-	}
-
 	return ADM_VIDENC_ERR_SUCCESS;
 }
 

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/encoder.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/encoder.h	2009-07-12 18:45:55 UTC (rev 5069)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/encoder.h	2009-07-12 18:52:00 UTC (rev 5070)
@@ -26,28 +26,27 @@
 {
 	#include "ADM_vidEnc_plugin.h"
 	#include "libavcodec/avcodec.h"
-	#include "libswscale/swscale.h"
 }
 
 class AvcodecEncoder
 {
 	protected:
 		enum CodecID _codecId;
-		enum PixelFormat _targetPixelFormat;
+		int _supportedCsps[1];
 
 		int _currentPass, _passCount;
 		bool _opened, _openPass;
 
 		AVCodecContext *_context;
 		AVFrame _frame;
-		struct SwsContext *_swsContext;
 
-		int _resampleSize, _bufferSize;
-		uint8_t *_resampleBuffer, *_buffer;
+		int _bufferSize;
+		uint8_t *_buffer;
 
-		virtual void init(enum CodecID id, enum PixelFormat targetPixelFormat);
+		virtual void init(enum CodecID id, int targetColourSpace);
 		virtual void initContext(vidEncVideoProperties *properties);
 		AVCodec *getAvCodec(void);
+		enum PixelFormat getAvCodecColourSpace(int colourSpace);
 		virtual int getFrameType(void);
 		virtual void updateEncodeParameters(vidEncEncodeParameters *encodeParams, uint8_t *buffer, int bufferSize);
 

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/ffv1Encoder.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/ffv1Encoder.cpp	2009-07-12 18:45:55 UTC (rev 5069)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/ffv1Encoder.cpp	2009-07-12 18:52:00 UTC (rev 5070)
@@ -19,7 +19,7 @@
 
 FFV1Encoder::FFV1Encoder(void)
 {
-	init(CODEC_ID_FFV1, PIX_FMT_YUV420P);
+	init(CODEC_ID_FFV1, ADM_CSP_YV12);
 }
 
 const char* FFV1Encoder::getEncoderType(void)

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/ffvhuffEncoder.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/ffvhuffEncoder.cpp	2009-07-12 18:45:55 UTC (rev 5069)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/ffvhuffEncoder.cpp	2009-07-12 18:52:00 UTC (rev 5070)
@@ -19,7 +19,7 @@
 
 FFVHuffEncoder::FFVHuffEncoder(void)
 {
-	init(CODEC_ID_FFVHUFF, PIX_FMT_YUV420P);
+	init(CODEC_ID_FFVHUFF, ADM_CSP_YV12);
 }
 
 const char* FFVHuffEncoder::getEncoderType(void)

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/huffyuvEncoder.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/huffyuvEncoder.cpp	2009-07-12 18:45:55 UTC (rev 5069)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/huffyuvEncoder.cpp	2009-07-12 18:52:00 UTC (rev 5070)
@@ -19,7 +19,7 @@
 
 HuffyuvEncoder::HuffyuvEncoder(void)
 {
-	init(CODEC_ID_HUFFYUV, PIX_FMT_YUV422P);
+	init(CODEC_ID_HUFFYUV, ADM_CSP_I422);
 }
 
 const char* HuffyuvEncoder::getEncoderType(void)

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/mpeg1Encoder.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/mpeg1Encoder.cpp	2009-07-12 18:45:55 UTC (rev 5069)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/mpeg1Encoder.cpp	2009-07-12 18:52:00 UTC (rev 5070)
@@ -22,7 +22,7 @@
 
 Mpeg1Encoder::Mpeg1Encoder(void)
 {
-	init(CODEC_ID_MPEG1VIDEO, PIX_FMT_YUV420P);
+	init(CODEC_ID_MPEG1VIDEO, ADM_CSP_YV12);
 
 	_encodeOptions.structSize = sizeof(vidEncOptions);
 	_encodeOptions.encodeMode = DEFAULT_ENCODE_MODE;

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/encoder.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/encoder.cpp	2009-07-12 18:45:55 UTC (rev 5069)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/encoder.cpp	2009-07-12 18:52:00 UTC (rev 5070)
@@ -24,6 +24,7 @@
 
 static x264Encoder encoder;
 static void* encoders = { &encoder };
+static int supportedCsps[] = { ADM_CSP_YV12 };
 
 extern "C"
 {
@@ -214,6 +215,9 @@
 	else
 		_param.b_repeat_headers = 1;
 
+	properties->supportedCspsCount = 1;
+	properties->supportedCsps = supportedCsps;
+
 	printParam(&_param);
 
 	return ADM_VIDENC_ERR_SUCCESS;
@@ -279,7 +283,7 @@
 	_handle = x264_encoder_open(&_param);
 
 	if (logFileName)
-		delete logFileName;
+		delete [] logFileName;
 
 	if (_handle)
 	{
@@ -287,7 +291,6 @@
 		{
 			if (createHeader())
 			{
-				passParameters->structSize = sizeof(vidEncPassParameters);
 				passParameters->extraData = _extraData;
 				passParameters->extraDataSize = _extraDataSize;
 			}

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_xvid/encoder.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_xvid/encoder.cpp	2009-07-12 18:45:55 UTC (rev 5069)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_xvid/encoder.cpp	2009-07-12 18:52:00 UTC (rev 5070)
@@ -25,6 +25,7 @@
 int avidemuxHook(void *handle, int opt, void *param1, void *param2);
 static XvidEncoder encoder;
 static void* encoders = { &encoder };
+static int supportedCsps[] = { ADM_CSP_YV12 };
 
 extern "C"
 {
@@ -238,6 +239,9 @@
 	if (_options.getThreads() == 0)
 		_xvid_enc_create.num_threads = _processors;
 
+	properties->supportedCspsCount = 1;
+	properties->supportedCsps = supportedCsps;
+
 	return ADM_VIDENC_ERR_SUCCESS;
 }
 



From mean at mail.berlios.de  Sun Jul 12 21:00:12 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sun, 12 Jul 2009 21:00:12 +0200
Subject: [Avidemux-svn-commit] r5071 -
	branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoEncoder/src
Message-ID: <200907121900.n6CJ0CIk011894@sheep.berlios.de>

Author: mean
Date: 2009-07-12 21:00:11 +0200 (Sun, 12 Jul 2009)
New Revision: 5071

Modified:
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoEncoder/src/ADM_coreVideoEncoderFFmpeg.cpp
Log:
[ffMpegCoreEncoder] silence

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoEncoder/src/ADM_coreVideoEncoderFFmpeg.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoEncoder/src/ADM_coreVideoEncoderFFmpeg.cpp	2009-07-12 18:52:00 UTC (rev 5070)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoEncoder/src/ADM_coreVideoEncoderFFmpeg.cpp	2009-07-12 19:00:11 UTC (rev 5071)
@@ -163,7 +163,7 @@
 #endif
         _frame.pts=f;
 
-        printf("*** PTS:%d time_base :%d/%d\n",_frame.pts,_context->time_base.num,_context->time_base.den);
+        //printf("*** PTS:%d time_base :%d/%d\n",_frame.pts,_context->time_base.num,_context->time_base.den);
     }
     //
     //printf("[PTS] :%"LU" num:%"LU" den:%"LU"\n",_frame.pts,_context->time_base.num,_context->time_base.den);



From mean at mail.berlios.de  Sun Jul 12 21:00:13 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sun, 12 Jul 2009 21:00:13 +0200
Subject: [Avidemux-svn-commit] r5072 -
	branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/ffMsMpeg4
Message-ID: <200907121900.n6CJ0Da7011907@sheep.berlios.de>

Author: mean
Date: 2009-07-12 21:00:13 +0200 (Sun, 12 Jul 2009)
New Revision: 5072

Modified:
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/ffMsMpeg4/ADM_ffMsMp4.cpp
Log:
[ffMsMpeg4] No delayed frames cause no bframe with that codec

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/ffMsMpeg4/ADM_ffMsMp4.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/ffMsMpeg4/ADM_ffMsMp4.cpp	2009-07-12 19:00:11 UTC (rev 5071)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/ffMsMpeg4/ADM_ffMsMp4.cpp	2009-07-12 19:00:13 UTC (rev 5072)
@@ -152,7 +152,6 @@
       case COMPRESS_SAME:
                 // Keep same frame type & same Qz as the incoming frame...
             _frame.quality = (int) floor (FF_QP2LAMBDA * q+ 0.5);
-
             if(image->flags & AVI_KEY_FRAME)    _frame.pict_type=FF_I_TYPE;
             else                                _frame.pict_type=FF_P_TYPE;
 
@@ -179,17 +178,12 @@
                                      _context->bit_rate,  _frame.quality, _frame.quality/ FF_QP2LAMBDA,q);     
     
     _frame.reordered_opaque=image->Pts;
-    if ((sz = avcodec_encode_video (_context, out->data, out->bufferSize, &_frame)) < 0)
+    if ((sz = avcodec_encode_video (_context, out->data, out->bufferSize, &_frame)) <= 0)
     {
         printf("[ffMsMP4] Error %d encoding video\n",sz);
         return false;
     }
-    
-    if(sz==0) // no pic, probably pre filling, try again
-        goto again;
-link:
     postEncode(out,sz);
-   
     return true;
 }
 



From gruntster at mail.berlios.de  Sun Jul 12 22:18:22 2009
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Sun, 12 Jul 2009 22:18:22 +0200
Subject: [Avidemux-svn-commit] r5073 -
	branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/common
Message-ID: <200907122018.n6CKIMPv020510@sheep.berlios.de>

Author: gruntster
Date: 2009-07-12 22:18:17 +0200 (Sun, 12 Jul 2009)
New Revision: 5073

Modified:
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/common/PluginOptions.cpp
Log:
[x264/xvid] set default encode mode for Qt config windows

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/common/PluginOptions.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/common/PluginOptions.cpp	2009-07-12 19:00:13 UTC (rev 5072)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/common/PluginOptions.cpp	2009-07-12 20:18:17 UTC (rev 5073)
@@ -43,6 +43,7 @@
 	_configurationName = NULL;
 	_defaultEncodeMode = defaultEncodeMode;
 	_defaultEncodeModeParameter = defaultEncodeModeParameter;
+	setEncodeOptionsToDefaults();
 
 	reset();
 }



From mean at mail.berlios.de  Sun Jul 12 22:20:50 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sun, 12 Jul 2009 22:20:50 +0200
Subject: [Avidemux-svn-commit] r5074 -
	branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS
Message-ID: <200907122020.n6CKKoQJ020817@sheep.berlios.de>

Author: mean
Date: 2009-07-12 22:20:50 +0200 (Sun, 12 Jul 2009)
New Revision: 5074

Modified:
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/dmxTSPacket.cpp
Log:
[TsDemux] Silence

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/dmxTSPacket.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/dmxTSPacket.cpp	2009-07-12 20:18:17 UTC (rev 5073)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/dmxTSPacket.cpp	2009-07-12 20:20:50 UTC (rev 5074)
@@ -177,7 +177,7 @@
     }
     if(_file->end()==true) 
     {
-        printf("[Mpeg Ts] End of file reached\n");
+        //printf("[Mpeg Ts] End of file reached\n");
         return false;
     }
     _file->read32(TS_PACKET_LEN-1,buffer); // 184-1



From mean at mail.berlios.de  Sun Jul 12 22:20:52 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sun, 12 Jul 2009 22:20:52 +0200
Subject: [Avidemux-svn-commit] r5075 -
	branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoEncoder/src
Message-ID: <200907122020.n6CKKqO0020827@sheep.berlios.de>

Author: mean
Date: 2009-07-12 22:20:51 +0200 (Sun, 12 Jul 2009)
New Revision: 5075

Modified:
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoEncoder/src/ADM_coreVideoEncoderFFmpeg.cpp
Log:
[coreFFvideoEncoder] Concert time increment in us to rationnal, probably buggy. Else it overflows mpeg4 header

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoEncoder/src/ADM_coreVideoEncoderFFmpeg.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoEncoder/src/ADM_coreVideoEncoderFFmpeg.cpp	2009-07-12 20:20:50 UTC (rev 5074)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoEncoder/src/ADM_coreVideoEncoderFFmpeg.cpp	2009-07-12 20:20:51 UTC (rev 5075)
@@ -20,9 +20,66 @@
 #include "ADM_coreVideoEncoderFFmpeg.h"
 #include "prefs.h"
 #define ADM_NO_PTS 0xFFFFFFFFFFFFFFFFLL // FIXME
-#define TIME_TENTH_MILLISEC
+//#define TIME_TENTH_MILLISEC
 #define aprintf(...) {}
+
+typedef struct
+{
+    uint64_t mn,mx;
+    int n,d;
+
+}TimeIncrementType;
+
+TimeIncrementType fpsTable[]=
+{
+    {  40000,40000,1 ,25},
+    {  20000,20000,1 ,50},
+    {  33360,33369,30,1001},
+    {  41700,41710,24,1001},
+}; 
+
 /**
+    \fn usSecondsToFrac
+    \brief Convert a duration in useconds into Rationnal
+*/
+bool usSecondsToFrac(uint64_t useconds, int *n,int *d)
+{
+    // First search for known value...
+    int nb=sizeof(fpsTable)/sizeof(TimeIncrementType);
+    for(int i=0;i<nb;i++)
+    {
+        TimeIncrementType *t=fpsTable+i;
+        if( useconds>=t->mn && useconds<=t->mx)
+        {
+            *n=t->n;
+            *d=t->d;
+            return true;
+        }
+    }
+    // Else try to squish it to low value..
+    int base=1000000; // value is in us
+    while(!( useconds % 9)&& useconds)
+    {
+        base/=10;
+        useconds/=10;
+    }
+    // Then try 2 and 5
+    while(!( useconds &1)&& useconds)
+    {
+        base/=2;
+        useconds/=2;
+    }
+    while(!( useconds %5)&& useconds)
+    {
+        base/=5;
+        useconds/=5;
+    }
+    *n=useconds;
+    *d=base;
+    return true;
+}
+
+/**
     \fn ADM_coreVideoEncoderFFmpeg
     \brief Constructor
 
@@ -120,16 +177,19 @@
     // Eval fps
     uint64_t f=source->getInfo()->frameIncrement;
     // Let's put 100 us as time  base
-    _context->time_base.den=10000LL;
+    
 #ifdef TIME_TENTH_MILLISEC
     _context->time_base.num=1;
+    _context->time_base.den=10000LL;
 #else
-    if(f>=100)
-        _context->time_base.num=f/100;
-    else
-        _context->time_base.num=1;
+
+    int n,d;
+    usSecondsToFrac(f,&n,&d);
+ //   printf("[ff] Converted a time increment of %d ms to %d /%d seconds\n",f/1000,n,d);
+    _context->time_base.num=n;
+    _context->time_base.den=d;
 #endif
-    //printf("[Time base] %d/%d\n", _context->time_base.num,_context->time_base.den);
+    
     return true;
 }
 /**
@@ -158,7 +218,7 @@
 #ifdef TIME_TENTH_MILLISEC
         f=f/100;
 #else
-        f=f/100;
+        f=f/1000;
         f=f/n;
 #endif
         _frame.pts=f;
@@ -220,6 +280,7 @@
         return false;
     }
    prolog();
+   printf("[ff] Time base %d/%d\n", _context->time_base.num,_context->time_base.den);
    if(Settings.MultiThreaded==true)
         encoderMT();
    res=avcodec_open(_context, codec); 



From gruntster at mail.berlios.de  Sun Jul 12 22:22:24 2009
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Sun, 12 Jul 2009 22:22:24 +0200
Subject: [Avidemux-svn-commit] r5076 -
	branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_xvid/gtk
Message-ID: <200907122022.n6CKMO0O021034@sheep.berlios.de>

Author: gruntster
Date: 2009-07-12 22:22:19 +0200 (Sun, 12 Jul 2009)
New Revision: 5076

Modified:
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_xvid/gtk/xvidConfigDialog.cpp
Log:
[xvid] remember encode mode for GTK+ interface

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_xvid/gtk/xvidConfigDialog.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_xvid/gtk/xvidConfigDialog.cpp	2009-07-12 20:20:51 UTC (rev 5075)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_xvid/gtk/xvidConfigDialog.cpp	2009-07-12 20:22:19 UTC (rev 5076)
@@ -157,15 +157,17 @@
 
 	if (code == GTK_RESPONSE_OK)
 	{
-		saveOptions(dialog, options);
+		encodeOptions->encodeMode = getCurrentEncodeMode(dialog);
 
-		if (getCurrentEncodeMode(dialog) == ADM_VIDENC_MODE_CQP)
+		if (encodeOptions->encodeMode == ADM_VIDENC_MODE_CQP)
 			encodeOptions->encodeModeParameter = (int)gtk_spin_button_get_value(GTK_SPIN_BUTTON(WID(spinbuttonQuant)));
 		else
 		{
 			char *str = gtk_editable_get_chars(GTK_EDITABLE(WID(entryEntry)), 0, -1);
 			encodeOptions->encodeModeParameter = atoi(str);
 		}
+
+		saveOptions(dialog, options);
 	}
 
 	gtk_widget_destroy(dialog);



From gruntster at mail.berlios.de  Sun Jul 12 22:56:27 2009
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Sun, 12 Jul 2009 22:56:27 +0200
Subject: [Avidemux-svn-commit] r5077 -
	branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4
Message-ID: <200907122056.n6CKuRUl025395@sheep.berlios.de>

Author: gruntster
Date: 2009-07-12 22:56:22 +0200 (Sun, 12 Jul 2009)
New Revision: 5077

Modified:
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp
Log:
[x264] suppress warning when using Qt config window and presets with Trellis or Cabac are switched off

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp	2009-07-12 20:22:19 UTC (rev 5076)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp	2009-07-12 20:56:22 UTC (rev 5077)
@@ -468,7 +468,7 @@
 
 void x264ConfigDialog::cabacCheckBox_toggled(bool checked)
 {
-	if (!checked && ui.trellisCheckBox->isChecked())
+	if (!disableGenericSlots && !checked && ui.trellisCheckBox->isChecked())
 		if (GUI_Question(QT_TR_NOOP("Trellis optimisation isn't possible without CABAC coding enabled.  Trellis optimisation will automatically be disabled.\n\n Do you wish to continue?")))
 			ui.trellisCheckBox->setChecked(false);
 		else
@@ -478,7 +478,7 @@
 // Analysis tab
 void x264ConfigDialog::trellisCheckBox_toggled(bool checked)
 {
-	if (checked && !ui.cabacCheckBox->isChecked())
+	if (disableGenericSlots && checked && !ui.cabacCheckBox->isChecked())
 		if (GUI_Question(QT_TR_NOOP("Trellis optimisation requires CABAC coding to be enabled.  CABAC coding will automatically be enabled.\n\nDo you wish to continue?")))
 			ui.cabacCheckBox->setChecked(true);
 		else
@@ -705,7 +705,7 @@
 	ui.bFrameMotionEstCheckBox->setChecked(options->getBidirectionalMotionEstimation());
 #endif
 
-	if (options->getTrellis())
+	if (options->getTrellis() && options->getCabac())
 	{
 		ui.trellisCheckBox->setChecked(true);
 		ui.trellisComboBox->setCurrentIndex(options->getTrellis() - 1);



From mean at mail.berlios.de  Mon Jul 13 10:56:49 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Mon, 13 Jul 2009 10:56:49 +0200
Subject: [Avidemux-svn-commit] r5078 - in branches/avidemux_2.6_branch_mean:
	avidemux/common/ADM_audiocodec avidemux_plugins/ADM_audioDecoders
	avidemux_plugins/ADM_audioDecoders/ADM_ad_lav
Message-ID: <200907130856.n6D8ungC004931@sheep.berlios.de>

Author: mean
Date: 2009-07-13 10:56:48 +0200 (Mon, 13 Jul 2009)
New Revision: 5078

Added:
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioDecoders/ADM_ad_lav/
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioDecoders/ADM_ad_lav/ADM_ad_lav.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioDecoders/ADM_ad_lav/CMakeLists.txt
Modified:
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_audiocodec/ADM_audiocodec.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_audiocodec/ADM_audiocodec.h
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_audiocodec/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioDecoders/CMakeLists.txt
Log:
[audioDecoder] lavcodec based audio decoder are now a plugin

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_audiocodec/ADM_audiocodec.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_audiocodec/ADM_audiocodec.cpp	2009-07-12 20:56:22 UTC (rev 5077)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_audiocodec/ADM_audiocodec.cpp	2009-07-13 08:56:48 UTC (rev 5078)
@@ -19,8 +19,7 @@
 #include "fourcc.h"
 #include "ADM_coreAudio.h"
 #include "ADM_audiocodec/ADM_audiocodec.h"
-
-
+uint8_t scratchPad[SCRATCH_PAD_SIZE];
 extern ADM_Audiocodec *ADM_ad_searchCodec(uint32_t fourcc,	WAVHeader *info,uint32_t extraLength,uint8_t *extraData);
 
 ADM_Audiocodec	*getAudioCodec(uint32_t fourcc,WAVHeader *info,uint32_t extra,uint8_t *extraData)
@@ -37,12 +36,15 @@
                                         }
 
 			}
+
  		switch(fourcc)
    			{
+#if 0
                                 case WAV_NELLYMOSER:
                                         printf("\n Audio codec:  NELLYMOSER\n");
                                         out= (ADM_Audiocodec *)new ADM_AudiocodecWMA(fourcc,info,extra,extraData);
                                         break;
+#endif
                                 case WAV_IMAADPCM:
                                         printf("\n Audio codec:  IMA MS ADPCM\n");
                                         out= (ADM_Audiocodec *)new ADM_AudiocodecImaAdpcm(fourcc,info);
@@ -89,6 +91,7 @@
 						printf("\n ULAW codec\n");
 						out=(ADM_Audiocodec *) new ADM_AudiocodecUlaw(fourcc,info);
 						break;
+#if 0
             case WAV_AMV_ADPCM:
                 printf("\n Audio codec:  ffAMV\n");
                 out= (ADM_Audiocodec *) new ADM_AudiocodecWMA(fourcc,info,extra,extraData);
@@ -102,6 +105,7 @@
                 printf("\n Audio codec:  ffQDM2\n");
                 out= (ADM_Audiocodec *) new ADM_AudiocodecWMA(fourcc,info,extra,extraData);
                 break;
+#endif
             default:
             	out= ADM_ad_searchCodec(fourcc,info,extra,extraData);
         	}

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_audiocodec/ADM_audiocodec.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_audiocodec/ADM_audiocodec.h	2009-07-12 20:56:22 UTC (rev 5077)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_audiocodec/ADM_audiocodec.h	2009-07-13 08:56:48 UTC (rev 5078)
@@ -95,29 +95,6 @@
 		virtual	uint8_t run(uint8_t *inptr, uint32_t nbIn, float *outptr, uint32_t *nbOut);
 		virtual	uint8_t isCompressed(void) {return 1;}
 };
-
-
-
-#define ADMWA_BUF (4*1024*16) // 64 kB internal
-class ADM_AudiocodecWMA : public     ADM_Audiocodec
-{
-	protected:
-		void *_contextVoid;
-		uint8_t _buffer[ ADMWA_BUF];
-		uint32_t _tail,_head;
-		uint32_t _blockalign;
-
-	public:
-		ADM_AudiocodecWMA(uint32_t fourcc, WAVHeader *info, uint32_t l, uint8_t *d);
-		virtual	~ADM_AudiocodecWMA() ;
-		virtual	uint8_t beginDecompress(void);
-		virtual	uint8_t endDecompress(void);
-		virtual	uint8_t run(uint8_t *inptr, uint32_t nbIn, float *outptr, uint32_t *nbOut);
-		virtual	uint8_t isCompressed(void) {return 1;}
-};
-
-
-
  class ADM_AudiocodecUlaw : public     ADM_Audiocodec
  {
  	public:

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_audiocodec/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_audiocodec/CMakeLists.txt	2009-07-12 20:56:22 UTC (rev 5077)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_audiocodec/CMakeLists.txt	2009-07-13 08:56:48 UTC (rev 5078)
@@ -1,5 +1,11 @@
 SET(ADM_audiocodec_SRCS
-	ADM_8bits.cpp  ADM_codecimaadpcm.cpp  ADM_codecmsadpcm.cpp  ADM_codeculaw.cpp  ADM_codecwma.cpp  ADM_lpcm.cpp
-	ADM_audiocodec.cpp  ADM_codecwav.cpp  ADM_pluginLoad.cpp)
+ADM_8bits.cpp  
+ADM_codecimaadpcm.cpp  
+ADM_codecmsadpcm.cpp  
+ADM_codeculaw.cpp  
+ADM_lpcm.cpp
+ADM_audiocodec.cpp  
+ADM_codecwav.cpp  
+ADM_pluginLoad.cpp)
 
 ADD_LIBRARY(ADM_audiocodec STATIC ${ADM_audiocodec_SRCS})

Added: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioDecoders/ADM_ad_lav/ADM_ad_lav.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioDecoders/ADM_ad_lav/ADM_ad_lav.cpp	2009-07-12 20:56:22 UTC (rev 5077)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioDecoders/ADM_ad_lav/ADM_ad_lav.cpp	2009-07-13 08:56:48 UTC (rev 5078)
@@ -0,0 +1,193 @@
+/**
+    \file ADM_ad_lav.cpp
+    \brief Audio decoders built around libavcodec
+    \author mean (c) 2009
+
+*/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+#include "ADM_lavcodec.h"
+#include "ADM_default.h"
+#include "ADM_ad_plugin.h"
+#include "fourcc.h"
+
+#define ADMWA_BUF (4*1024*16) // 64 kB internal
+class ADM_AudiocodecWMA : public     ADM_Audiocodec
+{
+	protected:
+		void *_contextVoid;
+		uint8_t _buffer[ ADMWA_BUF];
+		uint32_t _tail,_head;
+		uint32_t _blockalign;
+
+	public:
+		ADM_AudiocodecWMA(uint32_t fourcc, WAVHeader *info, uint32_t l, uint8_t *d);
+		virtual	~ADM_AudiocodecWMA() ;
+		virtual	uint8_t beginDecompress(void);
+		virtual	uint8_t endDecompress(void);
+		virtual	uint8_t run(uint8_t *inptr, uint32_t nbIn, float *outptr, uint32_t *nbOut);
+		virtual	uint8_t isCompressed(void) {return 1;}
+};
+
+
+
+
+// Supported formats + declare our plugin
+//*******************************************************
+static uint32_t Formats[]={ WAV_WMA,WAV_QDM2,WAV_AMV_ADPCM,WAV_NELLYMOSER};
+DECLARE_AUDIO_DECODER(ADM_AudiocodecWMA,						// Class
+			0,0,1, 												// Major, minor,patch
+			Formats, 											// Supported formats
+			"Lavcodec decoder plugin for avidemux (c) Mean\n"); 	// Desc
+//********************************************************
+
+#define _context ((AVCodecContext *)_contextVoid)
+
+uint8_t scratchPad[SCRATCH_PAD_SIZE];
+/**
+        \fn beginDecompress
+*/
+   uint8_t ADM_AudiocodecWMA::beginDecompress( void )
+   {
+            _tail=_head=0;
+            return 1;
+   };
+/**
+        \fn endDecompress
+*/
+
+   uint8_t ADM_AudiocodecWMA::endDecompress( void )
+   {
+          _tail=_head=0;
+          return 1;
+   };
+/**
+        \fn ADM_AudiocodecWMA
+*/
+
+ ADM_AudiocodecWMA::ADM_AudiocodecWMA(uint32_t fourcc,WAVHeader *info,uint32_t l,uint8_t *d)
+       :  ADM_Audiocodec(fourcc)
+ {
+    _tail=_head=0;
+
+    _contextVoid=(void *)avcodec_alloc_context();
+    ADM_assert(_contextVoid);
+    // Fills in some values...
+    _context->sample_rate = info->frequency;
+    _context->channels = info->channels;
+    _blockalign=_context->block_align = info->blockalign;
+    _context->bit_rate = info->byterate*8;
+    switch(fourcc)
+    {
+      case WAV_WMA:
+        _context->codec_id = CODEC_ID_WMAV2;
+        break;
+      case WAV_QDM2:
+        _context->codec_id = CODEC_ID_QDM2;
+        break;
+      case WAV_AMV_ADPCM:
+        _context->codec_id = CODEC_ID_ADPCM_IMA_AMV;
+        _blockalign=1;
+        break;
+      case WAV_NELLYMOSER:
+        _context->codec_id = CODEC_ID_NELLYMOSER;
+        _blockalign=1;
+        break;
+
+      default:
+             ADM_assert(0);
+    }
+    _context->extradata=(uint8_t *)d;
+    _context->extradata_size=(int)l;
+    printf(" Using %"LU" bytes of extra header data\n",l);
+    mixDump((uint8_t *)_context->extradata,_context->extradata_size);
+
+   AVCodec *codec=avcodec_find_decoder(_context->codec_id);
+   if(!codec) {ADM_assert(0);}
+    if (avcodec_open(_context, codec) < 0)
+    {
+        printf("\n Lavc audio decoder init failed !\n");
+        ADM_assert(0);
+    }
+    if(!_blockalign)
+    {
+      if(_context->block_align) _blockalign=_context->block_align;
+      else
+      {
+        printf("FFWMA : no blockalign taking 378\n");
+        _blockalign=378;
+      }
+    }
+    printf("FFwma init successful (blockalign %d)\n",info->blockalign);
+}
+ ADM_AudiocodecWMA::~ADM_AudiocodecWMA()
+ {
+        avcodec_close(_context);
+        ADM_dealloc(_context);
+        _contextVoid=NULL;
+}
+/**
+    \fn run
+
+*/
+uint8_t ADM_AudiocodecWMA::run(uint8_t *inptr, uint32_t nbIn, float *outptr, uint32_t *nbOut)
+{
+int out=0;
+int max=0,pout=0;
+int16_t *run16;
+int nbChunk;
+
+        *nbOut=0;
+        // Shrink
+        if(_head && (_tail+nbIn)*3>ADMWA_BUF*2)
+        {
+            memmove(_buffer,_buffer+_head,_tail-_head);
+            _tail-=_head;
+            _head=0;
+        }
+        //
+        ADM_assert(nbIn+_tail<ADMWA_BUF);
+        memcpy(_buffer+_tail,inptr,nbIn);
+        _tail+=nbIn;
+        while(_tail-_head>=_blockalign)
+        {
+          nbChunk=(_tail-_head)/_blockalign;
+          pout=SCRATCH_PAD_SIZE;
+          out=avcodec_decode_audio2(_context,(int16_t *)scratchPad,
+                                   &pout,_buffer+_head,nbChunk*_blockalign);
+
+          if(out<0)
+          {
+            printf( " *** WMA decoding error (%u)***\n",_blockalign);
+            _head+=1; // Try skipping some bytes
+            continue;
+          }
+          if(pout>=SCRATCH_PAD_SIZE)
+          {
+            printf("Produced : %u, buffer %u,in%u\n",pout,SCRATCH_PAD_SIZE,_tail-_head);
+            ADM_assert(0);
+          }
+          if(_context->codec_id == CODEC_ID_NELLYMOSER)
+          { // Hack, it returns inconsistent size
+            out=nbChunk*_blockalign;
+          }
+          _head+=out; // consumed bytes
+          pout>>=1;
+          *nbOut+=pout;
+          run16=(int16_t *)scratchPad;
+          for(int i=0;i<pout;i++)
+          {
+            *outptr++=((float)run16[i])/32767.;
+          }
+        }
+        return 1;
+}
+//---
+

Added: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioDecoders/ADM_ad_lav/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioDecoders/ADM_ad_lav/CMakeLists.txt	2009-07-12 20:56:22 UTC (rev 5077)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioDecoders/ADM_ad_lav/CMakeLists.txt	2009-07-13 08:56:48 UTC (rev 5078)
@@ -0,0 +1,10 @@
+
+	INCLUDE(ad_plugin)
+	
+	SET(ADM_ad_lav_SRCS ADM_ad_lav.cpp)
+
+	ADD_LIBRARY(ADM_ad_lav SHARED ${ADM_ad_lav_SRCS})
+	TARGET_LINK_LIBRARIES(ADM_ad_lav ADM_core ADM_libavcodec ADM_libavutil)
+
+	INIT_AUDIO_PLUGIN(ADM_ad_lav)
+	INSTALL_AUDIODECODER(ADM_ad_lav)

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioDecoders/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioDecoders/CMakeLists.txt	2009-07-12 20:56:22 UTC (rev 5077)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioDecoders/CMakeLists.txt	2009-07-13 08:56:48 UTC (rev 5078)
@@ -4,3 +4,4 @@
 ADD_SUBDIRECTORY(ADM_ad_vorbis)
 ADD_SUBDIRECTORY(ADM_ad_dca)
 ADD_SUBDIRECTORY(ADM_ad_amrnb)
+ADD_SUBDIRECTORY(ADM_ad_lav)



From mean at mail.berlios.de  Mon Jul 13 10:56:50 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Mon, 13 Jul 2009 10:56:50 +0200
Subject: [Avidemux-svn-commit] r5079 -
	branches/avidemux_2.6_branch_mean/avidemux/common/ADM_audiocodec
Message-ID: <200907130856.n6D8uoj6004941@sheep.berlios.de>

Author: mean
Date: 2009-07-13 10:56:50 +0200 (Mon, 13 Jul 2009)
New Revision: 5079

Modified:
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_audiocodec/ADM_codecimaadpcm.cpp
Log:
[audioDecoder] lavcodec based audio decoder are now a plugin

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_audiocodec/ADM_codecimaadpcm.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_audiocodec/ADM_codecimaadpcm.cpp	2009-07-13 08:56:48 UTC (rev 5078)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_audiocodec/ADM_codecimaadpcm.cpp	2009-07-13 08:56:50 UTC (rev 5079)
@@ -47,8 +47,8 @@
   unsigned char *input, int channels);
 #endif
 
-extern uint8_t scratchPad[];
 
+
 // pertinent tables for IMA ADPCM
 static int adpcm_step[89] =
 {



From mean at mail.berlios.de  Mon Jul 13 10:56:53 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Mon, 13 Jul 2009 10:56:53 +0200
Subject: [Avidemux-svn-commit] r5080 - in branches/avidemux_2.6_branch_mean:
	avidemux/common/ADM_audiocodec avidemux_core/ADM_coreAudio/include
	avidemux_plugins/ADM_audioDecoders
	avidemux_plugins/ADM_audioDecoders/ADM_ad_ima_adpcm
	avidemux_plugins/ADM_audioDecoders/ADM_ad_ms_adpcm
	avidemux_plugins/ADM_audioDecoders/ADM_ad_ulaw
Message-ID: <200907130856.n6D8urSf004951@sheep.berlios.de>

Author: mean
Date: 2009-07-13 10:56:52 +0200 (Mon, 13 Jul 2009)
New Revision: 5080

Added:
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioDecoders/ADM_ad_ima_adpcm/
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioDecoders/ADM_ad_ima_adpcm/ADM_ad_ima_adpcm.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioDecoders/ADM_ad_ima_adpcm/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioDecoders/ADM_ad_ms_adpcm/
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioDecoders/ADM_ad_ms_adpcm/ADM_ad_ms_adpcm.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioDecoders/ADM_ad_ms_adpcm/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioDecoders/ADM_ad_ulaw/
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioDecoders/ADM_ad_ulaw/ADM_ad_ulaw.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioDecoders/ADM_ad_ulaw/CMakeLists.txt
Removed:
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_audiocodec/ADM_codecimaadpcm.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_audiocodec/ADM_codecmsadpcm.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_audiocodec/ADM_codeculaw.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_audiocodec/ADM_codecwma.cpp
Modified:
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_audiocodec/ADM_audiocodec.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_audiocodec/ADM_audiocodec.h
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_audiocodec/ADM_pluginLoad.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_audiocodec/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreAudio/include/ADM_audioCodecEnum.h
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreAudio/include/ADM_baseAudioStream.h
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioDecoders/CMakeLists.txt
Log:
[AudioDecoder] Pluginify adpcm (ms+ima), ulaw (not working)

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_audiocodec/ADM_audiocodec.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_audiocodec/ADM_audiocodec.cpp	2009-07-13 08:56:50 UTC (rev 5079)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_audiocodec/ADM_audiocodec.cpp	2009-07-13 08:56:52 UTC (rev 5080)
@@ -44,7 +44,7 @@
                                         printf("\n Audio codec:  NELLYMOSER\n");
                                         out= (ADM_Audiocodec *)new ADM_AudiocodecWMA(fourcc,info,extra,extraData);
                                         break;
-#endif
+
                                 case WAV_IMAADPCM:
                                         printf("\n Audio codec:  IMA MS ADPCM\n");
                                         out= (ADM_Audiocodec *)new ADM_AudiocodecImaAdpcm(fourcc,info);
@@ -53,6 +53,7 @@
                                         printf("\n Audio codec:   MS ADPCM\n");
                                         out= (ADM_Audiocodec *)new ADM_AudiocodecMsAdpcm(fourcc,info);
                                         break;
+#endif
 				case WAV_PCM:
     					printf("\n Audio codec:  WAV\n");
 #ifdef ADM_BIG_ENDIAN
@@ -87,11 +88,12 @@
 
 					break;
 #endif
+#if 0
 				case WAV_ULAW:
 						printf("\n ULAW codec\n");
 						out=(ADM_Audiocodec *) new ADM_AudiocodecUlaw(fourcc,info);
 						break;
-#if 0
+
             case WAV_AMV_ADPCM:
                 printf("\n Audio codec:  ffAMV\n");
                 out= (ADM_Audiocodec *) new ADM_AudiocodecWMA(fourcc,info,extra,extraData);

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_audiocodec/ADM_audiocodec.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_audiocodec/ADM_audiocodec.h	2009-07-13 08:56:50 UTC (rev 5079)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_audiocodec/ADM_audiocodec.h	2009-07-13 08:56:52 UTC (rev 5080)
@@ -95,51 +95,7 @@
 		virtual	uint8_t run(uint8_t *inptr, uint32_t nbIn, float *outptr, uint32_t *nbOut);
 		virtual	uint8_t isCompressed(void) {return 1;}
 };
- class ADM_AudiocodecUlaw : public     ADM_Audiocodec
- {
- 	public:
-		ADM_AudiocodecUlaw(uint32_t fourcc, WAVHeader *info);
-		virtual	~ADM_AudiocodecUlaw() ;
-		virtual	uint8_t beginDecompress(void) {return 1;}
-		virtual	uint8_t endDecompress(void) {return 1;}
-		virtual	uint8_t run(uint8_t *inptr, uint32_t nbIn, float *outptr, uint32_t *nbOut);
-		virtual	uint8_t isCompressed(void) {return 1;}
-};
 
-#define IMA_BUFFER 4096*8
-class ADM_AudiocodecImaAdpcm : public     ADM_Audiocodec
-{
-	protected:
-		uint32_t _inStock,_me,_channels;
-		int ss_div,ss_mul; // ???
-		void *_contextVoid;
-		uint8_t _buffer[ IMA_BUFFER];
-		uint32_t _head,_tail;
 
-	public:
-		ADM_AudiocodecImaAdpcm(uint32_t fourcc, WAVHeader *info);
-		virtual	~ADM_AudiocodecImaAdpcm();
-		virtual	uint8_t beginDecompress(void) {_head=_tail=0;return 1;}
-		virtual	uint8_t endDecompress(void) {_head=_tail=0;return 1;}
-		virtual	uint8_t run(uint8_t *inptr, uint32_t nbIn, float *outptr, uint32_t *nbOut);
-		virtual	uint8_t isCompressed(void) {return 1;}
-};
-class ADM_AudiocodecMsAdpcm : public     ADM_Audiocodec
-{
-	protected:
-		uint32_t _inStock,_me,_channels;
-		int ss_div,ss_mul; // ???
-		void *_contextVoid;
-		uint8_t _buffer[ IMA_BUFFER];
-		uint32_t _head,_tail;
 
-	public:
-		ADM_AudiocodecMsAdpcm(uint32_t fourcc, WAVHeader *info);
-		virtual	~ADM_AudiocodecMsAdpcm();
-		virtual	uint8_t beginDecompress(void) {_head=_tail=0;return 1;}
-		virtual	uint8_t endDecompress(void) {_head=_tail=0;return 1;}
-		virtual	uint8_t run(uint8_t *inptr, uint32_t nbIn, float *outptr, uint32_t *nbOut);
-		virtual	uint8_t isCompressed(void) {return 1;}
-};
-
 #endif

Deleted: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_audiocodec/ADM_codecimaadpcm.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_audiocodec/ADM_codecimaadpcm.cpp	2009-07-13 08:56:50 UTC (rev 5079)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_audiocodec/ADM_codecimaadpcm.cpp	2009-07-13 08:56:52 UTC (rev 5080)
@@ -1,451 +0,0 @@
-/*
-    IMA ADPCM Decoder for MPlayer
-      by Mike Melanson
-
-    This file is in charge of decoding all of the various IMA ADPCM data
-    formats that various entities have created. Details about the data
-    formats can be found here:
-      http://www.pcisys.net/~melanson/codecs/
-
-    So far, this file handles these formats:
-      'ima4': IMA ADPCM found in QT files
-        0x11: IMA ADPCM found in MS AVI/ASF/WAV files
-        0x61: DK4 ADPCM found in certain AVI files on Sega Saturn CD-ROMs;
-              note that this is a 'rogue' format number in that it was
-              never officially registered with Microsoft
-    0x1100736d: IMA ADPCM coded like in MS AVI/ASF/WAV found in QT files
-*/
-
-
-#define ADM_NO_CONFIG_H
-#include "ADM_default.h"
-#include "ADM_ffmpeg/libavutil/bswap.h"
-
-#include "ADM_assert.h"
-#include "ADM_coreAudio.h"
-#include "ADM_audiocodec.h"
-
-
-
-#define MS_IMA_ADPCM_PREAMBLE_SIZE 4
-
-#define QT_IMA_ADPCM_PREAMBLE_SIZE 2
-#define QT_IMA_ADPCM_BLOCK_SIZE 0x22
-#define QT_IMA_ADPCM_SAMPLES_PER_BLOCK 64
-
-#define BE_16(x) (be2me_16(*(unsigned short *)(x)))
-#define BE_32(x) (be2me_32(*(unsigned int *)(x)))
-#define LE_16(x) (le2me_16(*(unsigned short *)(x)))
-#define LE_32(x) (le2me_32(*(unsigned int *)(x)))
-
-int ms_ima_adpcm_decode_block(unsigned short *output,
-  unsigned char *input, int channels, int block_size);
-#if 0
-int dk4_ima_adpcm_decode_block(unsigned short *output,
-  unsigned char *input, int channels, int block_size);
-int qt_ima_adpcm_decode_block(unsigned short *output,
-  unsigned char *input, int channels);
-#endif
-
-
-
-// pertinent tables for IMA ADPCM
-static int adpcm_step[89] =
-{
-  7, 8, 9, 10, 11, 12, 13, 14, 16, 17,
-  19, 21, 23, 25, 28, 31, 34, 37, 41, 45,
-  50, 55, 60, 66, 73, 80, 88, 97, 107, 118,
-  130, 143, 157, 173, 190, 209, 230, 253, 279, 307,
-  337, 371, 408, 449, 494, 544, 598, 658, 724, 796,
-  876, 963, 1060, 1166, 1282, 1411, 1552, 1707, 1878, 2066,
-  2272, 2499, 2749, 3024, 3327, 3660, 4026, 4428, 4871, 5358,
-  5894, 6484, 7132, 7845, 8630, 9493, 10442, 11487, 12635, 13899,
-  15289, 16818, 18500, 20350, 22385, 24623, 27086, 29794, 32767
-};
-
-static int adpcm_index[16] =
-{
-  -1, -1, -1, -1, 2, 4, 6, 8,
-  -1, -1, -1, -1, 2, 4, 6, 8
-};
-
-// useful macros
-// clamp a number between 0 and 88
-#define CLAMP_0_TO_88(x)  if (x < 0) x = 0; else if (x > 88) x = 88;
-// clamp a number within a signed 16-bit range
-#define CLAMP_S16(x)  if (x < -32768) x = -32768; \
-  else if (x > 32767) x = 32767;
-// clamp a number above 16
-#define CLAMP_ABOVE_16(x)  if (x < 16) x = 16;
-// sign extend a 16-bit value
-#define SE_16BIT(x)  if (x & 0x8000) x -= 0x10000;
-// sign extend a 4-bit value
-#define SE_4BIT(x)  if (x & 0x8) x -= 0x10;
-
-// static ad_info_t info = 
-// {
-// 	"IMA ADPCM audio decoder",
-// 	"imaadpcm",
-// 	"Nick Kurshev",
-// 	"Mike Melanson",
-// 	""
-// };
-
-ADM_AudiocodecImaAdpcm::ADM_AudiocodecImaAdpcm( uint32_t fourcc ,WAVHeader *info)
-        : ADM_Audiocodec(fourcc)
-{
-        _me=info->encoding;
-        _channels=info->channels;
-
-         if ((info->encoding == WAV_IMAADPCM) || (info->encoding == 0x61) 
-        //||      (info->encoding == (uint16_t)0x1100736d)
-        )
-  {
-     ss_div = info->blockalign -
-      (MS_IMA_ADPCM_PREAMBLE_SIZE * info->channels) * 2;
-     ss_mul = info->blockalign;
-  }
-  else
-  {
-    ss_div = QT_IMA_ADPCM_SAMPLES_PER_BLOCK;
-    ss_mul = QT_IMA_ADPCM_BLOCK_SIZE * info->channels;
-  }
-  //sh_audio->audio_in_minsize=sss_mul;
-  _tail=_head=0;
-  printf("Block size: %d\n",ss_mul);
-}
-ADM_AudiocodecImaAdpcm::~ADM_AudiocodecImaAdpcm()
-{
-
-}
-
-uint8_t ADM_AudiocodecImaAdpcm::run(uint8_t *inptr, uint32_t nbIn, float *outptr, uint32_t *nbOut)
-{
-int produced=0,one;
-uint8_t  *start;
-int16_t *run16;
-// Add to buffer
-  
-  ADM_assert((_tail+nbIn)<IMA_BUFFER);
-  memcpy(&(_buffer[_tail]),inptr,nbIn);
-  _tail+=nbIn;
-  *nbOut=0;
-
-  if((_tail-_head)<ss_mul) 
-        return 0;
-
-
-  if ((_me== WAV_IMAADPCM))// || (sh_audio->format == 0x1100736d))
-  {
-        while((_tail-_head)>=ss_mul)
-        {
-                start=(uint8_t *)&(_buffer[_head]);
-                one=  ms_ima_adpcm_decode_block(
-                        (unsigned short *)scratchPad,start,_channels , ss_mul);
-                _head+=ss_mul;
-                produced+=one;
-                run16=(int16_t *)scratchPad;
-                for(int i=0;i<one;i++)
-                {
-                  *outptr++=((float)run16[i])/32767.;
-                }
-        }
-        if(_tail>IMA_BUFFER/2 && _head)
-        {
-                memmove(_buffer,&_buffer[_head],_tail-_head);
-                _tail-=_head;
-                _head=0;
-        }
-        *nbOut=produced;
-        return 1;
-  }
-#if 0
-  else if (_me == 0x61)
-  {
-    return 2 * dk4_ima_adpcm_decode_block(
-      (unsigned short*)outptr, ptr, _channels,  ss_mul);
-  }
-  else
-  {
-    return 2 * qt_ima_adpcm_decode_block(
-      (unsigned short*)outptr, ptr, _channels);
-  }
-#endif
-        return 0;
-}
-#if 0
-static int preinit(sh_audio_t *sh_audio)
-{
-  // not exactly sure what this field is for
-  sh_audio->audio_out_minsize = 8192;
-
-  // if format is "ima4", assume the audio is coming from a QT file which
-  // indicates constant block size, whereas an AVI/ASF/WAV file will fill
-  // in this field with 0x11
-  if ((sh_audio->format == 0x11) || (sh_audio->format == 0x61) ||
-      (sh_audio->format == 0x1100736d))
-  {
-    sh_audio->ds->ss_div = (sh_audio->wf->nBlockAlign - 
-      (MS_IMA_ADPCM_PREAMBLE_SIZE * sh_audio->wf->nChannels)) * 2;
-    sh_audio->ds->ss_mul = sh_audio->wf->nBlockAlign;
-  }
-  else
-  {
-    sh_audio->ds->ss_div = QT_IMA_ADPCM_SAMPLES_PER_BLOCK;
-    sh_audio->ds->ss_mul = QT_IMA_ADPCM_BLOCK_SIZE * sh_audio->wf->nChannels;
-  }
-  sh_audio->audio_in_minsize=sh_audio->ds->ss_mul;
-  return 1;
-}
-#endif
-
-static void decode_nibbles(unsigned short *output,
-  int output_size, int channels,
-  int predictor_l, int index_l,
-  int predictor_r, int index_r)
-{
-  int step[2];
-  int predictor[2];
-  int index[2];
-  int diff;
-  int i;
-  int sign;
-  int delta;
-  int channel_number = 0;
-
-  step[0] = adpcm_step[index_l];
-  step[1] = adpcm_step[index_r];
-  predictor[0] = predictor_l;
-  predictor[1] = predictor_r;
-  index[0] = index_l;
-  index[1] = index_r;
-
-  for (i = 0; i < output_size; i++)
-  {
-    delta = output[i];
-
-    index[channel_number] += adpcm_index[delta];
-    CLAMP_0_TO_88(index[channel_number]);
-
-    sign = delta & 8;
-    delta = delta & 7;
-
-    diff = step[channel_number] >> 3;
-    if (delta & 4) diff += step[channel_number];
-    if (delta & 2) diff += step[channel_number] >> 1;
-    if (delta & 1) diff += step[channel_number] >> 2;
-
-    if (sign)
-      predictor[channel_number] -= diff;
-    else
-      predictor[channel_number] += diff;
-
-    CLAMP_S16(predictor[channel_number]);
-    output[i] = predictor[channel_number];
-    step[channel_number] = adpcm_step[index[channel_number]];
-
-    // toggle channel
-    channel_number ^= channels - 1;
-
-  }
-}
-
-#if 0
-int qt_ima_adpcm_decode_block(unsigned short *output,
-  unsigned char *input, int channels)
-{
-  int initial_predictor_l = 0;
-  int initial_predictor_r = 0;
-  int initial_index_l = 0;
-  int initial_index_r = 0;
-  int i;
-
-  initial_predictor_l = BE_16(&input[0]);
-  initial_index_l = initial_predictor_l;
-
-  // mask, sign-extend, and clamp the predictor portion
-  initial_predictor_l &= 0xFF80;
-  SE_16BIT(initial_predictor_l);
-  CLAMP_S16(initial_predictor_l);
-
-  // mask and clamp the index portion
-  initial_index_l &= 0x7F;
-  CLAMP_0_TO_88(initial_index_l);
-
-  // handle stereo
-  if (channels > 1)
-  {
-    initial_predictor_r = BE_16(&input[QT_IMA_ADPCM_BLOCK_SIZE]);
-    initial_index_r = initial_predictor_r;
-
-    // mask, sign-extend, and clamp the predictor portion
-    initial_predictor_r &= 0xFF80;
-    SE_16BIT(initial_predictor_r);
-    CLAMP_S16(initial_predictor_r);
-
-    // mask and clamp the index portion
-    initial_index_r &= 0x7F;
-    CLAMP_0_TO_88(initial_index_r);
-  }
-
-  // break apart all of the nibbles in the block
-  if (channels == 1)
-    for (i = 0; i < QT_IMA_ADPCM_SAMPLES_PER_BLOCK / 2; i++)
-    {
-      output[i * 2 + 0] = input[2 + i] & 0x0F;
-      output[i * 2 + 1] = input[2 + i] >> 4;
-    }
-  else
-    for (i = 0; i < QT_IMA_ADPCM_SAMPLES_PER_BLOCK / 2 * 2; i++)
-    {
-      output[i * 4 + 0] = input[2 + i] & 0x0F;
-      output[i * 4 + 1] = input[2 + QT_IMA_ADPCM_BLOCK_SIZE + i] & 0x0F;
-      output[i * 4 + 2] = input[2 + i] >> 4;
-      output[i * 4 + 3] = input[2 + QT_IMA_ADPCM_BLOCK_SIZE + i] >> 4;
-    }
-
-  decode_nibbles(output,
-    QT_IMA_ADPCM_SAMPLES_PER_BLOCK * channels, channels,
-    initial_predictor_l, initial_index_l,
-    initial_predictor_r, initial_index_r);
-
-  return QT_IMA_ADPCM_SAMPLES_PER_BLOCK * channels;
-}
-#endif
-
-int ms_ima_adpcm_decode_block(unsigned short *output,
-  unsigned char *input, int channels, int block_size)
-{
-  int predictor_l = 0;
-  int predictor_r = 0;
-  int index_l = 0;
-  int index_r = 0;
-  int i;
-  int channel_counter;
-  int channel_index;
-  int channel_index_l;
-  int channel_index_r;
-
-  predictor_l = LE_16(&input[0]);
-  SE_16BIT(predictor_l);
-  index_l = input[2];
-  if (channels == 2)
-  {
-    predictor_r = LE_16(&input[4]);
-    SE_16BIT(predictor_r);
-    index_r = input[6];
-  }
-
-  if (channels == 1)
-    for (i = 0;
-      i < (block_size - MS_IMA_ADPCM_PREAMBLE_SIZE * channels); i++)
-    {
-      output[i * 2 + 0] = input[MS_IMA_ADPCM_PREAMBLE_SIZE + i] & 0x0F;
-      output[i * 2 + 1] = input[MS_IMA_ADPCM_PREAMBLE_SIZE + i] >> 4;
-    }
-  else
-  {
-    // encoded as 8 nibbles (4 bytes) per channel; switch channel every
-    // 4th byte
-    channel_counter = 0;
-    channel_index_l = 0;
-    channel_index_r = 1;
-    channel_index = channel_index_l;
-    for (i = 0;
-      i < (block_size - MS_IMA_ADPCM_PREAMBLE_SIZE * channels); i++)
-    {
-      output[channel_index + 0] =
-        input[MS_IMA_ADPCM_PREAMBLE_SIZE * 2 + i] & 0x0F;
-      output[channel_index + 2] =
-        input[MS_IMA_ADPCM_PREAMBLE_SIZE * 2 + i] >> 4;
-      channel_index += 4;
-      channel_counter++;
-      if (channel_counter == 4)
-      {
-        channel_index_l = channel_index;
-        channel_index = channel_index_r;
-      }
-      else if (channel_counter == 8)
-      {
-        channel_index_r = channel_index;
-        channel_index = channel_index_l;
-        channel_counter = 0;
-      }
-    }
-  }
-  
-  decode_nibbles(output,
-    (block_size - MS_IMA_ADPCM_PREAMBLE_SIZE * channels) * 2,
-    channels,
-    predictor_l, index_l,
-    predictor_r, index_r);
-
-  return (block_size - MS_IMA_ADPCM_PREAMBLE_SIZE * channels) * 2;
-}
-#if 0
-int dk4_ima_adpcm_decode_block(unsigned short *output,
-  unsigned char *input, int channels, int block_size)
-{
-  int i;
-  int output_ptr;
-  int predictor_l = 0;
-  int predictor_r = 0;
-  int index_l = 0;
-  int index_r = 0;
-
-  // the first predictor value goes straight to the output
-  predictor_l = output[0] = LE_16(&input[0]);
-  SE_16BIT(predictor_l);
-  index_l = input[2];
-  if (channels == 2)
-  {
-    predictor_r = output[1] = LE_16(&input[4]);
-    SE_16BIT(predictor_r);
-    index_r = input[6];
-  }
-
-  output_ptr = channels;
-  for (i = MS_IMA_ADPCM_PREAMBLE_SIZE * channels; i < block_size; i++)
-  {
-    output[output_ptr++] = input[i] >> 4;
-    output[output_ptr++] = input[i] & 0x0F;
-  }
-
-  decode_nibbles(&output[channels],
-    (block_size - MS_IMA_ADPCM_PREAMBLE_SIZE * channels) * 2 - channels,
-    channels,
-    predictor_l, index_l,
-    predictor_r, index_r);
-
-  return (block_size - MS_IMA_ADPCM_PREAMBLE_SIZE * channels) * 2 - channels;
-}
-#endif
-/********************************************************************************/
-/********************************************************************************/
-#if 0
-static int decode_audio(sh_audio_t *sh_audio,unsigned char *buf,int minlen,int maxlen)
-{
-  if (demux_read_data(sh_audio->ds, sh_audio->a_in_buffer,
-    sh_audio->ds->ss_mul) != 
-    sh_audio->ds->ss_mul) 
-    return -1;
-
-  if ((sh_audio->format == 0x11) || (sh_audio->format == 0x1100736d))
-  {
-    return 2 * ms_ima_adpcm_decode_block(
-      (unsigned short*)buf, sh_audio->a_in_buffer, sh_audio->wf->nChannels,
-      sh_audio->ds->ss_mul);
-  }
-  else if (sh_audio->format == 0x61)
-  {
-    return 2 * dk4_ima_adpcm_decode_block(
-      (unsigned short*)buf, sh_audio->a_in_buffer, sh_audio->wf->nChannels,
-      sh_audio->ds->ss_mul);
-  }
-  else
-  {
-    return 2 * qt_ima_adpcm_decode_block(
-      (unsigned short*)buf, sh_audio->a_in_buffer, sh_audio->wf->nChannels);
-  }
-}
-#endif

Deleted: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_audiocodec/ADM_codecmsadpcm.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_audiocodec/ADM_codecmsadpcm.cpp	2009-07-13 08:56:50 UTC (rev 5079)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_audiocodec/ADM_codecmsadpcm.cpp	2009-07-13 08:56:52 UTC (rev 5080)
@@ -1,223 +0,0 @@
-/*
-    MS ADPCM Decoder for MPlayer
-      by Mike Melanson
-
-    This file is responsible for decoding Microsoft ADPCM data.
-    Details about the data format can be found here:
-      http://www.pcisys.net/~melanson/codecs/
-      
-      "Nick Kurshev",
-	"Mike Melanson",
-
-      
-*/
-
-#include "ADM_default.h"
-#define ADM_NO_CONFIG_H
-#include "ADM_coreAudio.h"
-#include "ADM_audiocodec.h"
-
-static int ms_adapt_table[] =
-{
-  230, 230, 230, 230, 307, 409, 512, 614,
-  768, 614, 512, 409, 307, 230, 230, 230
-};
-
-static int ms_adapt_coeff1[] =
-{
-  256, 512, 0, 192, 240, 460, 392
-};
-
-static int ms_adapt_coeff2[] =
-{
-  0, -256, 0, 64, 0, -208, -232
-};
-
-#define MS_ADPCM_PREAMBLE_SIZE 6
-
-#define LE_16(x) ((x)[0]+(256*((x)[1])))
-//#define LE_16(x) (le2me_16((x)[1]+(256*((x)[0]))))
-//#define LE_16(x) (le2me_16(*(unsigned short *)(x)))
-//#define LE_32(x) (le2me_32(*(unsigned int *)(x)))
-
-// useful macros
-// clamp a number between 0 and 88
-#define CLAMP_0_TO_88(x)  if (x < 0) x = 0; else if (x > 88) x = 88;
-// clamp a number within a signed 16-bit range
-#define CLAMP_S16(x)  if (x < -32768) x = -32768; \
-  else if (x > 32767) x = 32767;
-// clamp a number above 16
-#define CLAMP_ABOVE_16(x)  if (x < 16) x = 16;
-// sign extend a 16-bit value
-#define SE_16BIT(x)  if (x & 0x8000) x -= 0x10000;
-// sign extend a 4-bit value
-#define SE_4BIT(x)  if (x & 0x8) x -= 0x10;
-
-static int ms_adpcm_decode_block(unsigned short *output, unsigned char *input,
-  int channels, int block_size)
-{
-  int current_channel = 0;
-  int idelta[2];
-  int sample1[2];
-  int sample2[2];
-  int coeff1[2];
-  int coeff2[2];
-  int stream_ptr = 0;
-  int out_ptr = 0;
-  int upper_nibble = 1;
-  int nibble;
-  int snibble;  // signed nibble
-  int predictor;
-
-  // fetch the header information, in stereo if both channels are present
-  if (input[stream_ptr] > 6)
-    printf( "MS ADPCM: coefficient (%d) out of range (should be [0..6])\n",
-      input[stream_ptr]);
-  coeff1[0] = ms_adapt_coeff1[input[stream_ptr]];
-  coeff2[0] = ms_adapt_coeff2[input[stream_ptr]];
-  stream_ptr++;
-  if (channels == 2)
-  {
-    if (input[stream_ptr] > 6)
-     printf( "MS ADPCM: coefficient (%d) out of range (should be [0..6])\n",
-       input[stream_ptr]);
-    coeff1[1] = ms_adapt_coeff1[input[stream_ptr]];
-    coeff2[1] = ms_adapt_coeff2[input[stream_ptr]];
-    stream_ptr++;
-  }
-
-  idelta[0] = LE_16(&input[stream_ptr]);
-  stream_ptr += 2;
-  SE_16BIT(idelta[0]);
-  if (channels == 2)
-  {
-    idelta[1] = LE_16(&input[stream_ptr]);
-    stream_ptr += 2;
-    SE_16BIT(idelta[1]);
-  }
-
-  sample1[0] = LE_16(&input[stream_ptr]);
-  stream_ptr += 2;
-  SE_16BIT(sample1[0]);
-  if (channels == 2)
-  {
-    sample1[1] = LE_16(&input[stream_ptr]);
-    stream_ptr += 2;
-    SE_16BIT(sample1[1]);
-  }
-
-  sample2[0] = LE_16(&input[stream_ptr]);
-  stream_ptr += 2;
-  SE_16BIT(sample2[0]);
-  if (channels == 2)
-  {
-    sample2[1] = LE_16(&input[stream_ptr]);
-    stream_ptr += 2;
-    SE_16BIT(sample2[1]);
-  }
-
-  if (channels == 1)
-  {
-    output[out_ptr++] = sample2[0];
-    output[out_ptr++] = sample1[0];
-  } else {
-    output[out_ptr++] = sample2[0];
-    output[out_ptr++] = sample2[1];
-    output[out_ptr++] = sample1[0];
-    output[out_ptr++] = sample1[1];
-  }
-
-  while (stream_ptr < block_size)
-  {
-    // get the next nibble
-    if (upper_nibble)
-      nibble = snibble = input[stream_ptr] >> 4;
-    else
-      nibble = snibble = input[stream_ptr++] & 0x0F;
-    upper_nibble ^= 1;
-    SE_4BIT(snibble);
-
-    predictor = (
-      ((sample1[current_channel] * coeff1[current_channel]) +
-       (sample2[current_channel] * coeff2[current_channel])) / 256) +
-      (snibble * idelta[current_channel]);
-    CLAMP_S16(predictor);
-    sample2[current_channel] = sample1[current_channel];
-    sample1[current_channel] = predictor;
-    output[out_ptr++] = predictor;
-
-    // compute the next adaptive scale factor (a.k.a. the variable idelta)
-    idelta[current_channel] =
-      (ms_adapt_table[nibble] * idelta[current_channel]) / 256;
-    CLAMP_ABOVE_16(idelta[current_channel]);
-
-    // toggle the channel
-    current_channel ^= channels - 1;
-  }
-
-  return (block_size - (MS_ADPCM_PREAMBLE_SIZE * channels)) * 2;
-}
-
-ADM_AudiocodecMsAdpcm::ADM_AudiocodecMsAdpcm( uint32_t fourcc ,WAVHeader *info)
-        : ADM_Audiocodec(fourcc)
-{
-        _me=info->encoding;
-        _channels=info->channels;
-
-         if ((info->encoding == WAV_MSADPCM)      )
-        {
-              ss_div = info->blockalign -   (MS_ADPCM_PREAMBLE_SIZE * info->channels) * 2;
-              ss_mul = info->blockalign;
-        }
-  _tail=_head=0;
-  printf("Block size: %d\n",ss_mul);
-}
-ADM_AudiocodecMsAdpcm::~ADM_AudiocodecMsAdpcm()
-{
-
-}
-
-uint8_t ADM_AudiocodecMsAdpcm::run(uint8_t *inptr, uint32_t nbIn, float *outptr, uint32_t *nbOut)
-{
-int produced=0,one;
-uint8_t  *start;
-int16_t *run16;
-// Add to buffer
-  
-  ADM_assert((_tail+nbIn)<IMA_BUFFER);
-  memcpy(&(_buffer[_tail]),inptr,nbIn);
-  _tail+=nbIn;
-  *nbOut=0;
-
-  if((_tail-_head)<ss_mul) 
-        return 0;
-// static int ms_adpcm_decode_block(unsigned short *output, unsigned char *input,
-//   int channels, int block_size)
-
-
-        while((_tail-_head)>=ss_mul)
-        {
-                start=(uint8_t *)&(_buffer[_head]);
-                one=  ms_adpcm_decode_block(
-                        (unsigned short *)scratchPad,start,_channels , ss_mul);
-                _head+=ss_mul;
-                produced+=one;
-                run16=(int16_t *)scratchPad;
-                for(int i=0;i<one;i++)
-                {
-                  *outptr++=((float)run16[i])/32767.;
-                }
-                //printf("Out :%u one\n");
-        }
-        if(_tail>IMA_BUFFER/2 && _head)
-        {
-                memmove(_buffer,&_buffer[_head],_tail-_head);
-                _tail-=_head;
-                _head=0;
-        }
-        *nbOut=produced;
-        return 1;
-  
-}
-
-// EOF

Deleted: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_audiocodec/ADM_codeculaw.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_audiocodec/ADM_codeculaw.cpp	2009-07-13 08:56:50 UTC (rev 5079)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_audiocodec/ADM_codeculaw.cpp	2009-07-13 08:56:52 UTC (rev 5080)
@@ -1,67 +0,0 @@
-//
-// C++ Implementation: ADM_codeculaw
-//
-// Description: 
-//
-//
-// Author: mean <fixounet at free.fr>, (C) 2004
-//
-// Copyright: See COPYING file that comes with this distribution
-//
-//
-
-
-/***************************************************************************
- *                                                                         *
- *   This program is free software; you can redistribute it and/or modify  *
- *   it under the terms of the GNU General Public License as published by  *
- *   the Free Software Foundation; either version 2 of the License, or     *
- *   (at your option) any later version.                                   *
- *                                                                         *
- ***************************************************************************/
-
-#include "ADM_default.h"
-#include <math.h>
-
-//#include "avifmt.h"
-//#include "avifmt2.h"
-//#include "fourcc.h"
-
-#include "ADM_audiocodec/ADM_audiocodec.h"
-
-
-static int expon [8]= {0,132,396,924,1980,4092,8316,16764};
-ADM_AudiocodecUlaw::ADM_AudiocodecUlaw( uint32_t fourcc,WAVHeader *info) : ADM_Audiocodec(fourcc)
-{
-		
-}
-ADM_AudiocodecUlaw::~ADM_AudiocodecUlaw()
-{
-
-}
-
-
-uint8_t ADM_AudiocodecUlaw::run(uint8_t *inptr, uint32_t nbIn, float *outptr, uint32_t *nbOut)
-{
-uint8_t byt1;
-int16_t out;
-
-int mant,mexp,sign;
-
-	*nbOut=nbIn;
-
-	for(uint32_t i=0;i<nbIn;i++)
-	{
-		byt1=*inptr++;
-		byt1=~byt1;
-		sign=(byt1&0x80);
-		mexp=(byt1>>4)&0x7;
-		mant=byt1&0xf;
-		out=expon[mexp]+(mant<<(mexp+3));
-		if(sign) out=-out;
-		*outptr++=(float)out / 32768;
-	}
-
-	return 1;
-}
-

Deleted: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_audiocodec/ADM_codecwma.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_audiocodec/ADM_codecwma.cpp	2009-07-13 08:56:50 UTC (rev 5079)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_audiocodec/ADM_codecwma.cpp	2009-07-13 08:56:52 UTC (rev 5080)
@@ -1,163 +0,0 @@
-/***************************************************************************
-                          ADM_codecwma.cpp  -  description
-                             -------------------
-        We do also AMR here
-
-    begin                : Tue Nov 12 2002
-    copyright            : (C) 2002 by mean
-    email                : fixounet at free.fr
- ***************************************************************************/
-
-/***************************************************************************
- *                                                                         *
- *   This program is free software; you can redistribute it and/or modify  *
- *   it under the terms of the GNU General Public License as published by  *
- *   the Free Software Foundation; either version 2 of the License, or     *
- *   (at your option) any later version.                                   *
- *                                                                         *
- ***************************************************************************/
-#include "ADM_default.h"
-#include <math.h>
-#include "ADM_lavcodec.h"
-#include "fourcc.h"
-#include "DIA_coreToolkit.h"
-
-#include "ADM_coreAudio.h"
-#include "ADM_audiocodec/ADM_audiocodec.h"
-
-#define _context ((AVCodecContext *)_contextVoid)
-
-uint8_t scratchPad[SCRATCH_PAD_SIZE];
-
-   uint8_t ADM_AudiocodecWMA::beginDecompress( void )
-   {
-            _tail=_head=0;
-            return 1;
-   };
-   uint8_t ADM_AudiocodecWMA::endDecompress( void )
-   {
-          _tail=_head=0;
-          return 1;
-   };
-
- ADM_AudiocodecWMA::ADM_AudiocodecWMA(uint32_t fourcc,WAVHeader *info,uint32_t l,uint8_t *d)
-       :  ADM_Audiocodec(fourcc)
- {
-    _tail=_head=0;
-
-    _contextVoid=(void *)avcodec_alloc_context();
-    ADM_assert(_contextVoid);
-    // Fills in some values...
-    _context->sample_rate = info->frequency;
-    _context->channels = info->channels;
-    _blockalign=_context->block_align = info->blockalign;
-    _context->bit_rate = info->byterate*8;
-    switch(fourcc)
-    {
-      case WAV_WMA:
-        _context->codec_id = CODEC_ID_WMAV2;
-        break;
-      case WAV_QDM2:
-        _context->codec_id = CODEC_ID_QDM2;
-        break;
-      case WAV_AMV_ADPCM:
-        _context->codec_id = CODEC_ID_ADPCM_IMA_AMV;
-        _blockalign=1;
-        break;
-      case WAV_NELLYMOSER:
-        _context->codec_id = CODEC_ID_NELLYMOSER;
-        _blockalign=1;
-        break;
-
-      default:
-             ADM_assert(0);
-    }
-    _context->extradata=(uint8_t *)d;
-    _context->extradata_size=(int)l;
-    printf(" Using %"LU" bytes of extra header data\n",l);
-    mixDump((uint8_t *)_context->extradata,_context->extradata_size);
-
-   AVCodec *codec=avcodec_find_decoder(_context->codec_id);
-   if(!codec) {GUI_Error_HIG(QT_TR_NOOP("Internal error"), QT_TR_NOOP("Cannot open WMA2 codec."));ADM_assert(0);}
-    if (avcodec_open(_context, codec) < 0)
-    {
-        printf("\n Lavc audio decoder init failed !\n");
-        ADM_assert(0);
-    }
-    if(!_blockalign)
-    {
-      if(_context->block_align) _blockalign=_context->block_align;
-      else
-      {
-        printf("FFWMA : no blockalign taking 378\n");
-        _blockalign=378;
-      }
-    }
-    printf("FFwma init successful (blockalign %d)\n",info->blockalign);
-}
- ADM_AudiocodecWMA::~ADM_AudiocodecWMA()
- {
-        avcodec_close(_context);
-        ADM_dealloc(_context);
-        _contextVoid=NULL;
-}
-/*-------------------------------------------------------------------------------------------------------------------------
--------------------------------------------------------------------------------------------------------------------------*/
-
-uint8_t ADM_AudiocodecWMA::run(uint8_t *inptr, uint32_t nbIn, float *outptr, uint32_t *nbOut)
-{
-int out=0;
-int max=0,pout=0;
-int16_t *run16;
-int nbChunk;
-
-        *nbOut=0;
-        // Shrink
-        if(_head && (_tail+nbIn)*3>ADMWA_BUF*2)
-        {
-            memmove(_buffer,_buffer+_head,_tail-_head);
-            _tail-=_head;
-            _head=0;
-        }
-        //
-        ADM_assert(nbIn+_tail<ADMWA_BUF);
-        memcpy(_buffer+_tail,inptr,nbIn);
-        _tail+=nbIn;
-        while(_tail-_head>=_blockalign)
-        {
-          nbChunk=(_tail-_head)/_blockalign;
-          pout=SCRATCH_PAD_SIZE;
-          out=avcodec_decode_audio2(_context,(int16_t *)scratchPad,
-                                   &pout,_buffer+_head,nbChunk*_blockalign);
-
-          if(out<0)
-          {
-            printf( " *** WMA decoding error (%u)***\n",_blockalign);
-            _head+=1; // Try skipping some bytes
-            continue;
-          }
-          if(pout>=SCRATCH_PAD_SIZE)
-          {
-            printf("Produced : %u, buffer %u,in%u\n",pout,SCRATCH_PAD_SIZE,_tail-_head);
-            ADM_assert(0);
-          }
-          if(_context->codec_id == CODEC_ID_NELLYMOSER)
-          { // Hack, it returns inconsistent size
-            out=nbChunk*_blockalign;
-          }
-          _head+=out; // consumed bytes
-          pout>>=1;
-          *nbOut+=pout;
-          run16=(int16_t *)scratchPad;
-          for(int i=0;i<pout;i++)
-          {
-            *outptr++=((float)run16[i])/32767.;
-          }
-        }
-
-
-
-        return 1;
-}
-
-//---

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_audiocodec/ADM_pluginLoad.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_audiocodec/ADM_pluginLoad.cpp	2009-07-13 08:56:50 UTC (rev 5079)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_audiocodec/ADM_pluginLoad.cpp	2009-07-13 08:56:52 UTC (rev 5080)
@@ -164,7 +164,7 @@
 		ADM_ad_plugin *a=ADM_audioPlugins[i];
 		ADM_assert(a);
 		ADM_assert(a->supportedFormat);
-		aprintf("Format 0x%x : probing %s\n",fourcc,a->name);
+		aprintf("[ADM_ad_plugin]Format 0x%x : probing %s\n",fourcc,a->name);
 		if(a->supportedFormat(fourcc)==true)
 		{
 			ADM_assert(a->create);

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_audiocodec/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_audiocodec/CMakeLists.txt	2009-07-13 08:56:50 UTC (rev 5079)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_audiocodec/CMakeLists.txt	2009-07-13 08:56:52 UTC (rev 5080)
@@ -1,8 +1,5 @@
 SET(ADM_audiocodec_SRCS
 ADM_8bits.cpp  
-ADM_codecimaadpcm.cpp  
-ADM_codecmsadpcm.cpp  
-ADM_codeculaw.cpp  
 ADM_lpcm.cpp
 ADM_audiocodec.cpp  
 ADM_codecwav.cpp  

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreAudio/include/ADM_audioCodecEnum.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreAudio/include/ADM_audioCodecEnum.h	2009-07-13 08:56:50 UTC (rev 5079)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreAudio/include/ADM_audioCodecEnum.h	2009-07-13 08:56:52 UTC (rev 5080)
@@ -4,26 +4,6 @@
 #ifndef ADM_audioCodecEnum_H
 #define ADM_audioCodecEnum_H
 
-#if 0
-typedef struct
-{
-	uint16_t	encoding;	
-	uint16_t	channels;					/* 1 = mono, 2 = stereo */
-	uint32_t	frequency;				/* One of 11025, 22050, or 44100 48000 Hz */
-	uint32_t	byterate;					/* Average bytes per second */
-	uint16_t	blockalign;				/* Bytes per sample block */
-	uint16_t	bitspersample;		/* One of 8, 12, 16, or 4 for ADPCM */
- // 16 bytes up to here, 14 left
- // Used for VBR mp3
-  uint16_t   		cbsize ;
-  uint16_t          wId ;
-  uint32_t         	fdwflags ;
-  uint16_t          nblocksize ;
-  uint16_t          nframesperblock  ;
-  uint16_t          ncodecdelay ;
-} WAVHeaderVBR;
-#endif
-
 #define WAV_MP3 	85
 #define WAV_MP2 	80
 #define WAV_WMA 	353

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreAudio/include/ADM_baseAudioStream.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreAudio/include/ADM_baseAudioStream.h	2009-07-13 08:56:50 UTC (rev 5079)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreAudio/include/ADM_baseAudioStream.h	2009-07-13 08:56:52 UTC (rev 5080)
@@ -44,27 +44,7 @@
 
 }ST_point;
 
-#define WAV_MP3 	85
-#define WAV_MP2 	80
-#define WAV_WMA 	353
-#define WAV_PCM 	1
-#define WAV_MSADPCM 	2
-#define WAV_LPCM 	3
-#define WAV_AC3 	0x2000
-#define WAV_DTS 	0x2001
-#define WAV_OGG 0x676f
-#define WAV_8BITS 	53 // dummy id
-#define WAV_MP4 	54 // dummy id
-#define WAV_AAC 	0xff // dummy id
-#define WAV_AAC_HE 	0xfe // dummy id
-#define WAV_8BITS_UNSIGNED 	55 // dummy id
-#define WAV_AMRNB 	56 // dummy id
-#define WAV_ULAW	57 // dummy id
-#define WAV_QDM2 	58
-#define WAV_IMAADPCM    17
-#define WAV_AMV_ADPCM    9900
-#define WAV_NELLYMOSER   9901
-#define WAV_UNKNOWN     9999
+#include "ADM_audioCodecEnum.h"
 
 
 #endif

Copied: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioDecoders/ADM_ad_ima_adpcm/ADM_ad_ima_adpcm.cpp (from rev 5079, branches/avidemux_2.6_branch_mean/avidemux/common/ADM_audiocodec/ADM_codecimaadpcm.cpp)
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_audiocodec/ADM_codecimaadpcm.cpp	2009-07-13 08:56:50 UTC (rev 5079)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioDecoders/ADM_ad_ima_adpcm/ADM_ad_ima_adpcm.cpp	2009-07-13 08:56:52 UTC (rev 5080)
@@ -0,0 +1,335 @@
+/**
+    \file ADM_ad_ima_adpcm.cpp
+    \brief Audio decoders built ulaw from mplayer or ffmpeg (??, can't remember)
+    \author mean (c) 2009
+
+*/
+/*
+    IMA ADPCM Decoder for MPlayer
+      by Mike Melanson
+
+    This file is in charge of decoding all of the various IMA ADPCM data
+    formats that various entities have created. Details about the data
+    formats can be found here:
+      http://www.pcisys.net/~melanson/codecs/
+
+    So far, this file handles these formats:
+      'ima4': IMA ADPCM found in QT files
+        0x11: IMA ADPCM found in MS AVI/ASF/WAV files
+        0x61: DK4 ADPCM found in certain AVI files on Sega Saturn CD-ROMs;
+              note that this is a 'rogue' format number in that it was
+              never officially registered with Microsoft
+    0x1100736d: IMA ADPCM coded like in MS AVI/ASF/WAV found in QT files
+*/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+#include "ADM_default.h"
+#include <math.h>
+#define ADM_NO_CONFIG_H
+#include "ADM_ffmpeg/libavutil/bswap.h"
+#include "ADM_ad_plugin.h"
+
+/**
+    \class ADM_AudiocodecImaAdpcm
+    \brief
+*/
+
+ 
+#define IMA_BUFFER 4096*8
+class ADM_AudiocodecImaAdpcm : public     ADM_Audiocodec
+{
+	protected:
+		uint32_t _inStock,_me,_channels;
+		int ss_div,ss_mul; // ???
+		void *_contextVoid;
+		uint8_t _buffer[ IMA_BUFFER];
+		uint32_t _head,_tail;
+
+	public:
+		ADM_AudiocodecImaAdpcm(uint32_t fourcc, WAVHeader *info, uint32_t l, uint8_t *d);
+		virtual	~ADM_AudiocodecImaAdpcm();
+		virtual	uint8_t beginDecompress(void) {_head=_tail=0;return 1;}
+		virtual	uint8_t endDecompress(void) {_head=_tail=0;return 1;}
+		virtual	uint8_t run(uint8_t *inptr, uint32_t nbIn, float *outptr, uint32_t *nbOut);
+		virtual	uint8_t isCompressed(void) {return 1;}
+};
+// Supported formats + declare our plugin
+//*******************************************************
+static uint32_t Formats[]={WAV_IMAADPCM};
+DECLARE_AUDIO_DECODER(ADM_AudiocodecImaAdpcm,						// Class
+			0,0,1, 												// Major, minor,patch
+			Formats, 											// Supported formats
+			"IMA ADPCM decoder plugin for avidemux (c) Mean\n"); 	// Desc
+//********************************************************
+
+
+#define MS_IMA_ADPCM_PREAMBLE_SIZE 4
+
+#define QT_IMA_ADPCM_PREAMBLE_SIZE 2
+#define QT_IMA_ADPCM_BLOCK_SIZE 0x22
+#define QT_IMA_ADPCM_SAMPLES_PER_BLOCK 64
+
+#define BE_16(x) (be2me_16(*(unsigned short *)(x)))
+#define BE_32(x) (be2me_32(*(unsigned int *)(x)))
+#define LE_16(x) (le2me_16(*(unsigned short *)(x)))
+#define LE_32(x) (le2me_32(*(unsigned int *)(x)))
+
+int ms_ima_adpcm_decode_block(unsigned short *output,
+  unsigned char *input, int channels, int block_size);
+
+// pertinent tables for IMA ADPCM
+static int adpcm_step[89] =
+{
+  7, 8, 9, 10, 11, 12, 13, 14, 16, 17,
+  19, 21, 23, 25, 28, 31, 34, 37, 41, 45,
+  50, 55, 60, 66, 73, 80, 88, 97, 107, 118,
+  130, 143, 157, 173, 190, 209, 230, 253, 279, 307,
+  337, 371, 408, 449, 494, 544, 598, 658, 724, 796,
+  876, 963, 1060, 1166, 1282, 1411, 1552, 1707, 1878, 2066,
+  2272, 2499, 2749, 3024, 3327, 3660, 4026, 4428, 4871, 5358,
+  5894, 6484, 7132, 7845, 8630, 9493, 10442, 11487, 12635, 13899,
+  15289, 16818, 18500, 20350, 22385, 24623, 27086, 29794, 32767
+};
+
+static int adpcm_index[16] =
+{
+  -1, -1, -1, -1, 2, 4, 6, 8,
+  -1, -1, -1, -1, 2, 4, 6, 8
+};
+
+// useful macros
+// clamp a number between 0 and 88
+#define CLAMP_0_TO_88(x)  if (x < 0) x = 0; else if (x > 88) x = 88;
+// clamp a number within a signed 16-bit range
+#define CLAMP_S16(x)  if (x < -32768) x = -32768; \
+  else if (x > 32767) x = 32767;
+// clamp a number above 16
+#define CLAMP_ABOVE_16(x)  if (x < 16) x = 16;
+// sign extend a 16-bit value
+#define SE_16BIT(x)  if (x & 0x8000) x -= 0x10000;
+// sign extend a 4-bit value
+#define SE_4BIT(x)  if (x & 0x8) x -= 0x10;
+
+// static ad_info_t info = 
+// {
+// 	"IMA ADPCM audio decoder",
+// 	"imaadpcm",
+// 	"Nick Kurshev",
+// 	"Mike Melanson",
+// 	""
+// };
+
+ADM_AudiocodecImaAdpcm::ADM_AudiocodecImaAdpcm( uint32_t fourcc, WAVHeader *info, uint32_t l, uint8_t *d)
+        : ADM_Audiocodec(fourcc)
+{
+        _me=info->encoding;
+        _channels=info->channels;
+
+         if ((info->encoding == WAV_IMAADPCM) || (info->encoding == 0x61) 
+        //||      (info->encoding == (uint16_t)0x1100736d)
+        )
+  {
+     ss_div = info->blockalign -
+      (MS_IMA_ADPCM_PREAMBLE_SIZE * info->channels) * 2;
+     ss_mul = info->blockalign;
+  }
+  else
+  {
+    ss_div = QT_IMA_ADPCM_SAMPLES_PER_BLOCK;
+    ss_mul = QT_IMA_ADPCM_BLOCK_SIZE * info->channels;
+  }
+  //sh_audio->audio_in_minsize=sss_mul;
+  _tail=_head=0;
+  printf("Block size: %d\n",ss_mul);
+}
+ADM_AudiocodecImaAdpcm::~ADM_AudiocodecImaAdpcm()
+{
+
+}
+
+uint8_t ADM_AudiocodecImaAdpcm::run(uint8_t *inptr, uint32_t nbIn, float *outptr, uint32_t *nbOut)
+{
+int produced=0,one;
+uint8_t  *start;
+int16_t *run16;
+// Add to buffer
+  
+  ADM_assert((_tail+nbIn)<IMA_BUFFER);
+  memcpy(&(_buffer[_tail]),inptr,nbIn);
+  _tail+=nbIn;
+  *nbOut=0;
+
+  if((_tail-_head)<ss_mul) 
+        return 0;
+
+
+  if ((_me== WAV_IMAADPCM))// || (sh_audio->format == 0x1100736d))
+  {
+        while((_tail-_head)>=ss_mul)
+        {
+                start=(uint8_t *)&(_buffer[_head]);
+                one=  ms_ima_adpcm_decode_block(
+                        (unsigned short *)scratchPad,start,_channels , ss_mul);
+                _head+=ss_mul;
+                produced+=one;
+                run16=(int16_t *)scratchPad;
+                for(int i=0;i<one;i++)
+                {
+                  *outptr++=((float)run16[i])/32767.;
+                }
+        }
+        if(_tail>IMA_BUFFER/2 && _head)
+        {
+                memmove(_buffer,&_buffer[_head],_tail-_head);
+                _tail-=_head;
+                _head=0;
+        }
+        *nbOut=produced;
+        return 1;
+  }
+#if 0
+  else if (_me == 0x61)
+  {
+    return 2 * dk4_ima_adpcm_decode_block(
+      (unsigned short*)outptr, ptr, _channels,  ss_mul);
+  }
+  else
+  {
+    return 2 * qt_ima_adpcm_decode_block(
+      (unsigned short*)outptr, ptr, _channels);
+  }
+#endif
+        return 0;
+}
+
+
+static void decode_nibbles(unsigned short *output,
+  int output_size, int channels,
+  int predictor_l, int index_l,
+  int predictor_r, int index_r)
+{
+  int step[2];
+  int predictor[2];
+  int index[2];
+  int diff;
+  int i;
+  int sign;
+  int delta;
+  int channel_number = 0;
+
+  step[0] = adpcm_step[index_l];
+  step[1] = adpcm_step[index_r];
+  predictor[0] = predictor_l;
+  predictor[1] = predictor_r;
+  index[0] = index_l;
+  index[1] = index_r;
+
+  for (i = 0; i < output_size; i++)
+  {
+    delta = output[i];
+
+    index[channel_number] += adpcm_index[delta];
+    CLAMP_0_TO_88(index[channel_number]);
+
+    sign = delta & 8;
+    delta = delta & 7;
+
+    diff = step[channel_number] >> 3;
+    if (delta & 4) diff += step[channel_number];
+    if (delta & 2) diff += step[channel_number] >> 1;
+    if (delta & 1) diff += step[channel_number] >> 2;
+
+    if (sign)
+      predictor[channel_number] -= diff;
+    else
+      predictor[channel_number] += diff;
+
+    CLAMP_S16(predictor[channel_number]);
+    output[i] = predictor[channel_number];
+    step[channel_number] = adpcm_step[index[channel_number]];
+
+    // toggle channel
+    channel_number ^= channels - 1;
+
+  }
+}
+
+int ms_ima_adpcm_decode_block(unsigned short *output,
+  unsigned char *input, int channels, int block_size)
+{
+  int predictor_l = 0;
+  int predictor_r = 0;
+  int index_l = 0;
+  int index_r = 0;
+  int i;
+  int channel_counter;
+  int channel_index;
+  int channel_index_l;
+  int channel_index_r;
+
+  predictor_l = LE_16(&input[0]);
+  SE_16BIT(predictor_l);
+  index_l = input[2];
+  if (channels == 2)
+  {
+    predictor_r = LE_16(&input[4]);
+    SE_16BIT(predictor_r);
+    index_r = input[6];
+  }
+
+  if (channels == 1)
+    for (i = 0;
+      i < (block_size - MS_IMA_ADPCM_PREAMBLE_SIZE * channels); i++)
+    {
+      output[i * 2 + 0] = input[MS_IMA_ADPCM_PREAMBLE_SIZE + i] & 0x0F;
+      output[i * 2 + 1] = input[MS_IMA_ADPCM_PREAMBLE_SIZE + i] >> 4;
+    }
+  else
+  {
+    // encoded as 8 nibbles (4 bytes) per channel; switch channel every
+    // 4th byte
+    channel_counter = 0;
+    channel_index_l = 0;
+    channel_index_r = 1;
+    channel_index = channel_index_l;
+    for (i = 0;
+      i < (block_size - MS_IMA_ADPCM_PREAMBLE_SIZE * channels); i++)
+    {
+      output[channel_index + 0] =
+        input[MS_IMA_ADPCM_PREAMBLE_SIZE * 2 + i] & 0x0F;
+      output[channel_index + 2] =
+        input[MS_IMA_ADPCM_PREAMBLE_SIZE * 2 + i] >> 4;
+      channel_index += 4;
+      channel_counter++;
+      if (channel_counter == 4)
+      {
+        channel_index_l = channel_index;
+        channel_index = channel_index_r;
+      }
+      else if (channel_counter == 8)
+      {
+        channel_index_r = channel_index;
+        channel_index = channel_index_l;
+        channel_counter = 0;
+      }
+    }
+  }
+  
+  decode_nibbles(output,
+    (block_size - MS_IMA_ADPCM_PREAMBLE_SIZE * channels) * 2,
+    channels,
+    predictor_l, index_l,
+    predictor_r, index_r);
+
+  return (block_size - MS_IMA_ADPCM_PREAMBLE_SIZE * channels) * 2;
+}
+
+
+// EOF

Added: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioDecoders/ADM_ad_ima_adpcm/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioDecoders/ADM_ad_ima_adpcm/CMakeLists.txt	2009-07-13 08:56:50 UTC (rev 5079)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioDecoders/ADM_ad_ima_adpcm/CMakeLists.txt	2009-07-13 08:56:52 UTC (rev 5080)
@@ -0,0 +1,9 @@
+	INCLUDE(ad_plugin)
+	
+	SET(ADM_ad_ima_adpcm_SRCS ADM_ad_ima_adpcm.cpp)
+
+	ADD_LIBRARY(ADM_ad_ima_adpcm SHARED ${ADM_ad_ima_adpcm_SRCS})
+	TARGET_LINK_LIBRARIES(ADM_ad_ima_adpcm ADM_core )
+
+	INIT_AUDIO_PLUGIN(ADM_ad_ima_adpcm)
+	INSTALL_AUDIODECODER(ADM_ad_ima_adpcm)

Copied: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioDecoders/ADM_ad_ms_adpcm/ADM_ad_ms_adpcm.cpp (from rev 5079, branches/avidemux_2.6_branch_mean/avidemux/common/ADM_audiocodec/ADM_codecmsadpcm.cpp)
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_audiocodec/ADM_codecmsadpcm.cpp	2009-07-13 08:56:50 UTC (rev 5079)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioDecoders/ADM_ad_ms_adpcm/ADM_ad_ms_adpcm.cpp	2009-07-13 08:56:52 UTC (rev 5080)
@@ -0,0 +1,286 @@
+/**
+    \file ADM_ad_msadpcm.cpp
+    \brief Audio decoders built ulaw from mplayer or ffmpeg (??, can't remember)
+    \author mean (c) 2009
+
+*/
+//********************************************************
+/*
+    MS ADPCM Decoder for MPlayer
+      by Mike Melanson
+
+    This file is responsible for decoding Microsoft ADPCM data.
+    Details about the data format can be found here:
+      http://www.pcisys.net/~melanson/codecs/
+      
+      "Nick Kurshev",
+	"Mike Melanson",
+
+      
+*/
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+#include "ADM_default.h"
+#include <math.h>
+
+#include "ADM_default.h"
+#include "ADM_ad_plugin.h"
+#define IMA_BUFFER 4096*8
+/**
+    \class ADM_AudiocodecUlaw
+    \brief
+*/
+
+class ADM_AudiocodecMsAdpcm : public     ADM_Audiocodec
+{
+	protected:
+		uint32_t _inStock,_me,_channels;
+		int ss_div,ss_mul; // ???
+		void *_contextVoid;
+		uint8_t _buffer[ IMA_BUFFER];
+		uint32_t _head,_tail;
+
+	public:
+		ADM_AudiocodecMsAdpcm(uint32_t fourcc, WAVHeader *info, uint32_t l, uint8_t *d);
+		virtual	~ADM_AudiocodecMsAdpcm();
+		virtual	uint8_t beginDecompress(void) {_head=_tail=0;return 1;}
+		virtual	uint8_t endDecompress(void) {_head=_tail=0;return 1;}
+		virtual	uint8_t run(uint8_t *inptr, uint32_t nbIn, float *outptr, uint32_t *nbOut);
+		virtual	uint8_t isCompressed(void) {return 1;}
+};
+// Supported formats + declare our plugin
+//*******************************************************
+static uint32_t Formats[]={WAV_MSADPCM};
+DECLARE_AUDIO_DECODER(ADM_AudiocodecMsAdpcm,						// Class
+			0,0,1, 												// Major, minor,patch
+			Formats, 											// Supported formats
+			"Ulaw decoder plugin for avidemux (c) Mean\n"); 	// Desc
+
+
+#include "ADM_default.h"
+#define ADM_NO_CONFIG_H
+#include "ADM_coreAudio.h"
+#include "ADM_audiocodec.h"
+
+static int ms_adapt_table[] =
+{
+  230, 230, 230, 230, 307, 409, 512, 614,
+  768, 614, 512, 409, 307, 230, 230, 230
+};
+
+static int ms_adapt_coeff1[] =
+{
+  256, 512, 0, 192, 240, 460, 392
+};
+
+static int ms_adapt_coeff2[] =
+{
+  0, -256, 0, 64, 0, -208, -232
+};
+
+#define MS_ADPCM_PREAMBLE_SIZE 6
+
+#define LE_16(x) ((x)[0]+(256*((x)[1])))
+//#define LE_16(x) (le2me_16((x)[1]+(256*((x)[0]))))
+//#define LE_16(x) (le2me_16(*(unsigned short *)(x)))
+//#define LE_32(x) (le2me_32(*(unsigned int *)(x)))
+
+// useful macros
+// clamp a number between 0 and 88
+#define CLAMP_0_TO_88(x)  if (x < 0) x = 0; else if (x > 88) x = 88;
+// clamp a number within a signed 16-bit range
+#define CLAMP_S16(x)  if (x < -32768) x = -32768; \
+  else if (x > 32767) x = 32767;
+// clamp a number above 16
+#define CLAMP_ABOVE_16(x)  if (x < 16) x = 16;
+// sign extend a 16-bit value
+#define SE_16BIT(x)  if (x & 0x8000) x -= 0x10000;
+// sign extend a 4-bit value
+#define SE_4BIT(x)  if (x & 0x8) x -= 0x10;
+
+static int ms_adpcm_decode_block(unsigned short *output, unsigned char *input,
+  int channels, int block_size)
+{
+  int current_channel = 0;
+  int idelta[2];
+  int sample1[2];
+  int sample2[2];
+  int coeff1[2];
+  int coeff2[2];
+  int stream_ptr = 0;
+  int out_ptr = 0;
+  int upper_nibble = 1;
+  int nibble;
+  int snibble;  // signed nibble
+  int predictor;
+
+  // fetch the header information, in stereo if both channels are present
+  if (input[stream_ptr] > 6)
+    printf( "MS ADPCM: coefficient (%d) out of range (should be [0..6])\n",
+      input[stream_ptr]);
+  coeff1[0] = ms_adapt_coeff1[input[stream_ptr]];
+  coeff2[0] = ms_adapt_coeff2[input[stream_ptr]];
+  stream_ptr++;
+  if (channels == 2)
+  {
+    if (input[stream_ptr] > 6)
+     printf( "MS ADPCM: coefficient (%d) out of range (should be [0..6])\n",
+       input[stream_ptr]);
+    coeff1[1] = ms_adapt_coeff1[input[stream_ptr]];
+    coeff2[1] = ms_adapt_coeff2[input[stream_ptr]];
+    stream_ptr++;
+  }
+
+  idelta[0] = LE_16(&input[stream_ptr]);
+  stream_ptr += 2;
+  SE_16BIT(idelta[0]);
+  if (channels == 2)
+  {
+    idelta[1] = LE_16(&input[stream_ptr]);
+    stream_ptr += 2;
+    SE_16BIT(idelta[1]);
+  }
+
+  sample1[0] = LE_16(&input[stream_ptr]);
+  stream_ptr += 2;
+  SE_16BIT(sample1[0]);
+  if (channels == 2)
+  {
+    sample1[1] = LE_16(&input[stream_ptr]);
+    stream_ptr += 2;
+    SE_16BIT(sample1[1]);
+  }
+
+  sample2[0] = LE_16(&input[stream_ptr]);
+  stream_ptr += 2;
+  SE_16BIT(sample2[0]);
+  if (channels == 2)
+  {
+    sample2[1] = LE_16(&input[stream_ptr]);
+    stream_ptr += 2;
+    SE_16BIT(sample2[1]);
+  }
+
+  if (channels == 1)
+  {
+    output[out_ptr++] = sample2[0];
+    output[out_ptr++] = sample1[0];
+  } else {
+    output[out_ptr++] = sample2[0];
+    output[out_ptr++] = sample2[1];
+    output[out_ptr++] = sample1[0];
+    output[out_ptr++] = sample1[1];
+  }
+
+  while (stream_ptr < block_size)
+  {
+    // get the next nibble
+    if (upper_nibble)
+      nibble = snibble = input[stream_ptr] >> 4;
+    else
+      nibble = snibble = input[stream_ptr++] & 0x0F;
+    upper_nibble ^= 1;
+    SE_4BIT(snibble);
+
+    predictor = (
+      ((sample1[current_channel] * coeff1[current_channel]) +
+       (sample2[current_channel] * coeff2[current_channel])) / 256) +
+      (snibble * idelta[current_channel]);
+    CLAMP_S16(predictor);
+    sample2[current_channel] = sample1[current_channel];
+    sample1[current_channel] = predictor;
+    output[out_ptr++] = predictor;
+
+    // compute the next adaptive scale factor (a.k.a. the variable idelta)
+    idelta[current_channel] =
+      (ms_adapt_table[nibble] * idelta[current_channel]) / 256;
+    CLAMP_ABOVE_16(idelta[current_channel]);
+
+    // toggle the channel
+    current_channel ^= channels - 1;
+  }
+
+  return (block_size - (MS_ADPCM_PREAMBLE_SIZE * channels)) * 2;
+}
+/**
+    \fn     ADM_AudiocodecMsAdpcm
+    \brief
+*/
+ADM_AudiocodecMsAdpcm::ADM_AudiocodecMsAdpcm( uint32_t fourcc, WAVHeader *info, uint32_t l, uint8_t *d)
+        : ADM_Audiocodec(fourcc)
+{
+        _me=info->encoding;
+        _channels=info->channels;
+
+         if ((info->encoding == WAV_MSADPCM)      )
+        {
+              ss_div = info->blockalign -   (MS_ADPCM_PREAMBLE_SIZE * info->channels) * 2;
+              ss_mul = info->blockalign;
+        }
+  _tail=_head=0;
+  printf("Block size: %d\n",ss_mul);
+}
+/**
+    \fn 
+    \brief
+*/
+
+ADM_AudiocodecMsAdpcm::~ADM_AudiocodecMsAdpcm()
+{
+
+}
+/**
+    \fn     run
+    \brief
+*/
+
+uint8_t ADM_AudiocodecMsAdpcm::run(uint8_t *inptr, uint32_t nbIn, float *outptr, uint32_t *nbOut)
+{
+int produced=0,one;
+uint8_t  *start;
+int16_t *run16;
+// Add to buffer
+  
+  ADM_assert((_tail+nbIn)<IMA_BUFFER);
+  memcpy(&(_buffer[_tail]),inptr,nbIn);
+  _tail+=nbIn;
+  *nbOut=0;
+
+  if((_tail-_head)<ss_mul) 
+        return 0;
+// static int ms_adpcm_decode_block(unsigned short *output, unsigned char *input,
+//   int channels, int block_size)
+
+
+        while((_tail-_head)>=ss_mul)
+        {
+                start=(uint8_t *)&(_buffer[_head]);
+                one=  ms_adpcm_decode_block(
+                        (unsigned short *)scratchPad,start,_channels , ss_mul);
+                _head+=ss_mul;
+                produced+=one;
+                run16=(int16_t *)scratchPad;
+                for(int i=0;i<one;i++)
+                {
+                  *outptr++=((float)run16[i])/32767.;
+                }
+                //printf("Out :%u one\n");
+        }
+        if(_tail>IMA_BUFFER/2 && _head)
+        {
+                memmove(_buffer,&_buffer[_head],_tail-_head);
+                _tail-=_head;
+                _head=0;
+        }
+        *nbOut=produced;
+        return 1;
+  
+}
+
+// EOF

Added: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioDecoders/ADM_ad_ms_adpcm/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioDecoders/ADM_ad_ms_adpcm/CMakeLists.txt	2009-07-13 08:56:50 UTC (rev 5079)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioDecoders/ADM_ad_ms_adpcm/CMakeLists.txt	2009-07-13 08:56:52 UTC (rev 5080)
@@ -0,0 +1,9 @@
+	INCLUDE(ad_plugin)
+	
+	SET(ADM_ad_ms_adpcm_SRCS ADM_ad_ms_adpcm.cpp)
+
+	ADD_LIBRARY(ADM_ad_ms_adpcm SHARED ${ADM_ad_ms_adpcm_SRCS})
+	TARGET_LINK_LIBRARIES(ADM_ad_ms_adpcm ADM_core )
+
+	INIT_AUDIO_PLUGIN(ADM_ad_ms_adpcm)
+	INSTALL_AUDIODECODER(ADM_ad_ms_adpcm)

Added: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioDecoders/ADM_ad_ulaw/ADM_ad_ulaw.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioDecoders/ADM_ad_ulaw/ADM_ad_ulaw.cpp	2009-07-13 08:56:50 UTC (rev 5079)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioDecoders/ADM_ad_ulaw/ADM_ad_ulaw.cpp	2009-07-13 08:56:52 UTC (rev 5080)
@@ -0,0 +1,93 @@
+/**
+    \file ADM_ad_ulaw.cpp
+    \brief Audio decoders built ulaw from mplayer or ffmpeg (??, can't remember)
+    \author mean (c) 2009
+
+*/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+#include "ADM_default.h"
+#include <math.h>
+
+#include "ADM_default.h"
+#include "ADM_ad_plugin.h"
+
+/**
+    \class ADM_AudiocodecUlaw
+    \brief
+*/
+
+ class ADM_AudiocodecUlaw : public     ADM_Audiocodec
+ {
+ 	public:
+		ADM_AudiocodecUlaw(uint32_t fourcc, WAVHeader *info, uint32_t l, uint8_t *d);
+		virtual	~ADM_AudiocodecUlaw() ;
+		virtual	uint8_t beginDecompress(void) {return 1;}
+		virtual	uint8_t endDecompress(void) {return 1;}
+		virtual	uint8_t run(uint8_t *inptr, uint32_t nbIn, float *outptr, uint32_t *nbOut);
+		virtual	uint8_t isCompressed(void) {return 1;}
+};
+// Supported formats + declare our plugin
+//*******************************************************
+static uint32_t Formats[]={WAV_ULAW};
+DECLARE_AUDIO_DECODER(ADM_AudiocodecUlaw,						// Class
+			0,0,1, 												// Major, minor,patch
+			Formats, 											// Supported formats
+			"Ulaw decoder plugin for avidemux (c) Mean\n"); 	// Desc
+//********************************************************
+
+static int expon [8]= {0,132,396,924,1980,4092,8316,16764};
+/**
+    \fn ADM_AudiocodecUlaw
+    \brief
+*/
+ADM_AudiocodecUlaw::ADM_AudiocodecUlaw(uint32_t fourcc, WAVHeader *info, uint32_t l, uint8_t *d) : ADM_Audiocodec(fourcc)
+{
+		
+}
+/**
+    \fn ~ADM_AudiocodecUlaw
+    \brief
+*/
+
+ADM_AudiocodecUlaw::~ADM_AudiocodecUlaw()
+{
+
+}
+/**
+    \fn run
+    \brief
+*/
+
+
+uint8_t ADM_AudiocodecUlaw::run(uint8_t *inptr, uint32_t nbIn, float *outptr, uint32_t *nbOut)
+{
+uint8_t byt1;
+int16_t out;
+
+int mant,mexp,sign;
+
+	*nbOut=nbIn;
+
+	for(uint32_t i=0;i<nbIn;i++)
+	{
+		byt1=*inptr++;
+		byt1=~byt1;
+		sign=(byt1&0x80);
+		mexp=(byt1>>4)&0x7;
+		mant=byt1&0xf;
+		out=expon[mexp]+(mant<<(mexp+3));
+		if(sign) out=-out;
+		*outptr++=(float)out / 32768;
+	}
+
+	return 1;
+}
+// EOF

Added: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioDecoders/ADM_ad_ulaw/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioDecoders/ADM_ad_ulaw/CMakeLists.txt	2009-07-13 08:56:50 UTC (rev 5079)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioDecoders/ADM_ad_ulaw/CMakeLists.txt	2009-07-13 08:56:52 UTC (rev 5080)
@@ -0,0 +1,9 @@
+	INCLUDE(ad_plugin)
+	
+	SET(ADM_ad_ulaw_SRCS ADM_ad_ulaw.cpp)
+
+	ADD_LIBRARY(ADM_ad_ulaw SHARED ${ADM_ad_ulaw_SRCS})
+	TARGET_LINK_LIBRARIES(ADM_ad_ulaw ADM_core )
+
+	INIT_AUDIO_PLUGIN(ADM_ad_ulaw)
+	INSTALL_AUDIODECODER(ADM_ad_ulaw)

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioDecoders/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioDecoders/CMakeLists.txt	2009-07-13 08:56:50 UTC (rev 5079)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioDecoders/CMakeLists.txt	2009-07-13 08:56:52 UTC (rev 5080)
@@ -5,3 +5,6 @@
 ADD_SUBDIRECTORY(ADM_ad_dca)
 ADD_SUBDIRECTORY(ADM_ad_amrnb)
 ADD_SUBDIRECTORY(ADM_ad_lav)
+ADD_SUBDIRECTORY(ADM_ad_ulaw)
+ADD_SUBDIRECTORY(ADM_ad_ms_adpcm)
+ADD_SUBDIRECTORY(ADM_ad_ima_adpcm)



From mean at mail.berlios.de  Mon Jul 13 10:56:56 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Mon, 13 Jul 2009 10:56:56 +0200
Subject: [Avidemux-svn-commit] r5081 -
	branches/avidemux_2.6_branch_mean/avidemux/common/ADM_audiocodec
Message-ID: <200907130856.n6D8uuXY004962@sheep.berlios.de>

Author: mean
Date: 2009-07-13 10:56:56 +0200 (Mon, 13 Jul 2009)
New Revision: 5081

Modified:
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_audiocodec/ADM_audiocodec.cpp
Log:
[audioDecoder] Cleanup

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_audiocodec/ADM_audiocodec.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_audiocodec/ADM_audiocodec.cpp	2009-07-13 08:56:52 UTC (rev 5080)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_audiocodec/ADM_audiocodec.cpp	2009-07-13 08:56:56 UTC (rev 5081)
@@ -1,11 +1,8 @@
 /***************************************************************************
-                          ADM_audiocodec.cpp  -  description
-                             -------------------
-    begin                : Sat Jun 1 2002
-    copyright            : (C) 2002 by mean
-    email                : fixounet at free.fr
- ***************************************************************************/
-
+     \file                     ADM_audiocodec.cpp  
+     \brief   Front end for audio decoder
+    copyright            : (C) 2002/2009 by mean fixounet at free.fr
+ **************************************************************************/
 /***************************************************************************
  *                                                                         *
  *   This program is free software; you can redistribute it and/or modify  *
@@ -31,90 +28,46 @@
 			{
 				if(info)
 					if(info->bitspersample==8)
-                                        {
-                                                info->encoding=fourcc=WAV_8BITS_UNSIGNED;
-                                        }
+                        {
+                            info->encoding=fourcc=WAV_8BITS_UNSIGNED;
+                        }
 
 			}
 
  		switch(fourcc)
    			{
-#if 0
-                                case WAV_NELLYMOSER:
-                                        printf("\n Audio codec:  NELLYMOSER\n");
-                                        out= (ADM_Audiocodec *)new ADM_AudiocodecWMA(fourcc,info,extra,extraData);
-                                        break;
 
-                                case WAV_IMAADPCM:
-                                        printf("\n Audio codec:  IMA MS ADPCM\n");
-                                        out= (ADM_Audiocodec *)new ADM_AudiocodecImaAdpcm(fourcc,info);
-                                        break;
-                                case WAV_MSADPCM:
-                                        printf("\n Audio codec:   MS ADPCM\n");
-                                        out= (ADM_Audiocodec *)new ADM_AudiocodecMsAdpcm(fourcc,info);
-                                        break;
-#endif
 				case WAV_PCM:
-    					printf("\n Audio codec:  WAV\n");
+                    printf("[audioCodec] Audio codec:  WAV\n");
 #ifdef ADM_BIG_ENDIAN
-    					out= (ADM_Audiocodec *)new ADM_AudiocodecWavSwapped(fourcc);
+                    out= (ADM_Audiocodec *)new ADM_AudiocodecWavSwapped(fourcc);
 #else
 					out= (ADM_Audiocodec *)new ADM_AudiocodecWav(fourcc);
 #endif
                   			break;
 				case WAV_8BITS:
-					printf("\n 8 BIts pseudo codec\n");
-    					out= (ADM_Audiocodec *)new ADM_Audiocodec8Bits(fourcc);
+					printf("[audioCodec] 8 BIts pseudo codec\n");
+                    out= (ADM_Audiocodec *)new ADM_Audiocodec8Bits(fourcc);
 					break;
 				case WAV_8BITS_UNSIGNED:
-					printf("\n 8 BIts pseudo codec unsigned\n");
+					printf("[audioCodec] 8 BIts pseudo codec unsigned\n");
     					out= (ADM_Audiocodec *)new ADM_Audiocodec8Bits(fourcc);
 					break;
 		  		case WAV_LPCM:
-					printf("\n Audio codec:  LPCM swapped\n");
+					printf("[audioCodec] Audio codec:  LPCM swapped\n");
 #ifndef ADM_BIG_ENDIAN
-    					out= (ADM_Audiocodec *)new ADM_AudiocodecWavSwapped(fourcc);
+                    out= (ADM_Audiocodec *)new ADM_AudiocodecWavSwapped(fourcc);
 #else
 					out= (ADM_Audiocodec *)new ADM_AudiocodecWav(fourcc);
 #endif
                   		break;
-#ifdef USE_LIBDCA
-                case WAV_DTS:
-					if (dca->isAvailable())
-					{
-						printf("\n Audio codec:  DTS\n");
-						out= (ADM_Audiocodec *) new ADM_AudiocodecDCA(fourcc, info);
-					}
-
-					break;
-#endif
-#if 0
-				case WAV_ULAW:
-						printf("\n ULAW codec\n");
-						out=(ADM_Audiocodec *) new ADM_AudiocodecUlaw(fourcc,info);
-						break;
-
-            case WAV_AMV_ADPCM:
-                printf("\n Audio codec:  ffAMV\n");
-                out= (ADM_Audiocodec *) new ADM_AudiocodecWMA(fourcc,info,extra,extraData);
-                break;
-
-            case WAV_WMA:
-                printf("\n Audio codec:  ffWMA\n");
-                out= (ADM_Audiocodec *) new ADM_AudiocodecWMA(fourcc,info,extra,extraData);
-                break;
-            case WAV_QDM2:
-                printf("\n Audio codec:  ffQDM2\n");
-                out= (ADM_Audiocodec *) new ADM_AudiocodecWMA(fourcc,info,extra,extraData);
-                break;
-#endif
             default:
             	out= ADM_ad_searchCodec(fourcc,info,extra,extraData);
         	}
 
 	if (out == NULL)
 	{
-		printf("\n Unknown codec : %"LU,fourcc);
+		printf("[audioCodec] Unknown codec : %"LU"\n",fourcc);
 		out = (ADM_Audiocodec *) new ADM_AudiocodecUnknown(fourcc);
 	}
 	// For channel mapping, simple case we do it here so that the decoder does not have



From mean at mail.berlios.de  Mon Jul 13 10:56:57 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Mon, 13 Jul 2009 10:56:57 +0200
Subject: [Avidemux-svn-commit] r5082 -
	branches/avidemux_2.6_branch_mean/avidemux/common/ADM_audiocodec
Message-ID: <200907130856.n6D8uvTv004972@sheep.berlios.de>

Author: mean
Date: 2009-07-13 10:56:57 +0200 (Mon, 13 Jul 2009)
New Revision: 5082

Modified:
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_audiocodec/ADM_audiocodec.h
Log:
[audioCodec] more cleanup

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_audiocodec/ADM_audiocodec.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_audiocodec/ADM_audiocodec.h	2009-07-13 08:56:56 UTC (rev 5081)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_audiocodec/ADM_audiocodec.h	2009-07-13 08:56:57 UTC (rev 5082)
@@ -19,7 +19,7 @@
 #include "ADM_audiodef.h"
 #define SCRATCH_PAD_SIZE (100*1000*2)
 extern uint8_t scratchPad[];
-#define  ADMAC_BUFFER (48000*4)
+//#define  ADMAC_BUFFER (48000*4)
 class ADM_Audiocodec
 {
     protected:



From mean at mail.berlios.de  Mon Jul 13 10:57:01 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Mon, 13 Jul 2009 10:57:01 +0200
Subject: [Avidemux-svn-commit] r5084 -
	branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreAudio/include
Message-ID: <200907130857.n6D8v1Aa004992@sheep.berlios.de>

Author: mean
Date: 2009-07-13 10:57:01 +0200 (Mon, 13 Jul 2009)
New Revision: 5084

Modified:
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreAudio/include/ADM_audioCodecEnum.h
Log:
[audioCodec] Use 7 as ulaw encoding fourcc instead of 57

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreAudio/include/ADM_audioCodecEnum.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreAudio/include/ADM_audioCodecEnum.h	2009-07-13 08:56:59 UTC (rev 5083)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreAudio/include/ADM_audioCodecEnum.h	2009-07-13 08:57:01 UTC (rev 5084)
@@ -19,7 +19,7 @@
 #define WAV_AAC_HE 	0xfe // dummy id
 #define WAV_8BITS_UNSIGNED 	55 // dummy id
 #define WAV_AMRNB 	56 // dummy id
-#define WAV_ULAW	57 // dummy id
+#define WAV_ULAW	7 
 #define WAV_QDM2 	58
 #define WAV_IMAADPCM    17
 #define WAV_AMV_ADPCM    9900



From mean at mail.berlios.de  Mon Jul 13 10:57:00 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Mon, 13 Jul 2009 10:57:00 +0200
Subject: [Avidemux-svn-commit] r5083 - in
	branches/avidemux_2.6_branch_mean/avidemux: common/ADM_editor
	common/ADM_toolkit common/ADM_videoFilter2
	gtk/ADM_userInterfaces/ADM_dialog
Message-ID: <200907130857.n6D8v0ES004982@sheep.berlios.de>

Author: mean
Date: 2009-07-13 10:56:59 +0200 (Mon, 13 Jul 2009)
New Revision: 5083

Modified:
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edRender.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADMedAVIAUD.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_toolkit/automation.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoFilter2/ADM_videoFilterBridge.cpp
   branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/ADM_dialog/DIA_properties.cpp
Log:
[all] Remove warnings

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edRender.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edRender.cpp	2009-07-13 08:56:57 UTC (rev 5082)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edRender.cpp	2009-07-13 08:56:59 UTC (rev 5083)
@@ -980,7 +980,7 @@
         //
         if(tmpImage->_noPicture && refOnly && frame)
         {
-                cache->updateFrameNum(image,0xfffffffffLL);
+                cache->updateFrameNum(image,0xfffffffffU);
                 return 0;
         }
 	// If not quant and it is already YV12, we can stop here

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADMedAVIAUD.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADMedAVIAUD.cpp	2009-07-13 08:56:57 UTC (rev 5082)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADMedAVIAUD.cpp	2009-07-13 08:56:59 UTC (rev 5083)
@@ -109,7 +109,7 @@
             printf("[Composer::getPCMPacket] drift %d, computed :%lu got %lu\n",(int)(lastDts-packetBufferDts),lastDts,packetBufferDts);
             if(packetBufferDts<lastDts)
             {
-                printf("[Composer::getPCMPacket] Dropping packet %"LU" last =%"LU"\n",lastDts/1000,packetBufferDts/1000);
+                printf("[Composer::getPCMPacket] Dropping packet %"LU" last =%"LU"\n",(uint32_t)(lastDts/1000),(uint32_t)(packetBufferDts/1000));
                 drop=true;
             }else 
             {

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_toolkit/automation.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_toolkit/automation.cpp	2009-07-13 08:56:57 UTC (rev 5082)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_toolkit/automation.cpp	2009-07-13 08:56:59 UTC (rev 5083)
@@ -228,7 +228,7 @@
 static int index;
           argv=global_argv;
           argc=global_argc;
-          printf("\n *** Automated : %"LU" entries*************\n",NB_AUTO);
+          printf("\n *** Automated : %"LU" entries*************\n",(uint32_t)NB_AUTO);
           // we need to process
           argc-=1;
           cur=1;

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoFilter2/ADM_videoFilterBridge.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoFilter2/ADM_videoFilterBridge.cpp	2009-07-13 08:56:57 UTC (rev 5082)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoFilter2/ADM_videoFilterBridge.cpp	2009-07-13 08:56:59 UTC (rev 5083)
@@ -80,12 +80,12 @@
     int64_t pts=image->Pts;
     if(pts>endTime)
     {
-        printf("[VideoBridge] This frame is too late (%"LU" vs %"LU")\n",pts,startTime);
+        printf("[VideoBridge] This frame is too late (%"LLD" vs %"LLU")\n",pts,startTime);
         return false;
     }
     if(pts<startTime) 
     {
-            printf("[VideoBridge] This frame is too early (%"LU" vs %"LU")\n",pts,endTime);
+            printf("[VideoBridge] This frame is too early (%"LLD" vs %"LLU")\n",pts,endTime);
             goto again;
     }
     // Rescale time

Modified: branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/ADM_dialog/DIA_properties.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/ADM_dialog/DIA_properties.cpp	2009-07-13 08:56:57 UTC (rev 5082)
+++ branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/ADM_dialog/DIA_properties.cpp	2009-07-13 08:56:59 UTC (rev 5083)
@@ -44,13 +44,13 @@
 
         gtk_register_dialog(dialog);
 
-        sprintf(text, QT_TR_NOOP("%lu x %lu"), avifileinfo->width,avifileinfo->height);
+        sprintf(text, QT_TR_NOOP("%"LU" x %"LU), avifileinfo->width,avifileinfo->height);
         FILL_ENTRY(label_size);
 
         sprintf(text, QT_TR_NOOP("%2.3f fps"), (float) avifileinfo->fps1000 / 1000.F);
         FILL_ENTRY(label_fps);
 
-        sprintf(text, QT_TR_NOOP("%ld frames"), avifileinfo->nb_frames);
+        sprintf(text, QT_TR_NOOP("%"LD" frames"), avifileinfo->nb_frames);
         FILL_ENTRY(label_number);
 
         sprintf(text, "%s", fourCC::tostring(avifileinfo->fcc));
@@ -92,9 +92,9 @@
                 }
                 FILL_ENTRY(label1_audiomode);
 
-                sprintf(text, QT_TR_NOOP("%lu Hz"), wavinfo->frequency);
+                sprintf(text, QT_TR_NOOP("%"LU" Hz"), wavinfo->frequency);
                 FILL_ENTRY(label_fq);
-                sprintf(text, QT_TR_NOOP("%lu Bps / %lu kbps"), wavinfo->byterate,      wavinfo->byterate * 8 / 1000);
+                sprintf(text, QT_TR_NOOP("%"LU" Bps / %"LU" kbps"), wavinfo->byterate,      wavinfo->byterate * 8 / 1000);
                 FILL_ENTRY(label_bitrate);
                 sprintf(text, "%s", getStrFromAudioCodec(wavinfo->encoding));
                 FILL_ENTRY(label1_audiofourcc);



From mean at mail.berlios.de  Mon Jul 13 11:57:01 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Mon, 13 Jul 2009 11:57:01 +0200
Subject: [Avidemux-svn-commit] r5085 -
	branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor
Message-ID: <200907130957.n6D9v1lx012556@sheep.berlios.de>

Author: mean
Date: 2009-07-13 11:57:01 +0200 (Mon, 13 Jul 2009)
New Revision: 5085

Modified:
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edRender.cpp
Log:
[editor] fix overflow on 32 bits (thanks hudson)

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edRender.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edRender.cpp	2009-07-13 08:57:01 UTC (rev 5084)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edRender.cpp	2009-07-13 09:57:01 UTC (rev 5085)
@@ -980,7 +980,7 @@
         //
         if(tmpImage->_noPicture && refOnly && frame)
         {
-                cache->updateFrameNum(image,0xfffffffffU);
+                cache->updateFrameNum(image,0xffffffffU);
                 return 0;
         }
 	// If not quant and it is already YV12, we can stop here



From gruntster at mail.berlios.de  Mon Jul 13 20:19:51 2009
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Mon, 13 Jul 2009 20:19:51 +0200
Subject: [Avidemux-svn-commit] r5086 -
	branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4
Message-ID: <200907131819.n6DIJpnq005134@sheep.berlios.de>

Author: gruntster
Date: 2009-07-13 20:19:44 +0200 (Mon, 13 Jul 2009)
New Revision: 5086

Modified:
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp
Log:
[x264] save zones on Qt config window (FS#606)

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp	2009-07-13 09:57:01 UTC (rev 5085)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp	2009-07-13 18:19:44 UTC (rev 5086)
@@ -501,17 +501,22 @@
 	zoneTableModel.insertRows(0, 1, QModelIndex());
 	ui.zoneTableView->selectRow(0);
 	ui.zoneTableView->edit(ui.zoneTableView->currentIndex());
+	ui.configurationComboBox->setCurrentIndex(1);
 }
 
 void x264ConfigDialog::zoneEditButton_pressed()
 {
 	ui.zoneTableView->edit(ui.zoneTableView->currentIndex());
+	ui.configurationComboBox->setCurrentIndex(1);
 }
 
 void x264ConfigDialog::zoneDeleteButton_pressed()
 {
 	if (ui.zoneTableView->currentIndex().row() >= 0 && GUI_Question(QT_TR_NOOP("Are you sure you wish to delete the selected zone?")))
+	{
 		zoneTableModel.removeRows(ui.zoneTableView->currentIndex().row(), 1, QModelIndex());
+		ui.configurationComboBox->setCurrentIndex(1);
+	}
 }
 
 int x264ConfigDialog::getValueIndexInArray(uint8_t value, const uint8_t valueArray[], int elementCount)



From gruntster at mail.berlios.de  Mon Jul 13 20:58:55 2009
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Mon, 13 Jul 2009 20:58:55 +0200
Subject: [Avidemux-svn-commit] r5087 -
	branches/avidemux_2.5_branch_gruntster/plugins/ADM_audioEncoders/lame
Message-ID: <200907131858.n6DIwt0T009292@sheep.berlios.de>

Author: gruntster
Date: 2009-07-13 20:58:49 +0200 (Mon, 13 Jul 2009)
New Revision: 5087

Modified:
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_audioEncoders/lame/audioencoder_lame.cpp
Log:
[lame] save channel mode and bitrate mode on config window

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_audioEncoders/lame/audioencoder_lame.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_audioEncoders/lame/audioencoder_lame.cpp	2009-07-13 18:19:44 UTC (rev 5086)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_audioEncoders/lame/audioencoder_lame.cpp	2009-07-13 18:58:49 UTC (rev 5087)
@@ -321,9 +321,12 @@
   diaElem *elems[] = { &menuMode, &Mode, &quality, &bitrate, &reservoir };
 
   if (diaFactoryRun (QT_TR_NOOP ("LAME Configuration"), 5, elems))
-    {
-      return 1;
-    }
+  {
+	  lameParam->mode=(ADM_mode)mmode; 
+	  lameParam->preset=(ADM_LAME_PRESET)ppreset;
+
+	  return 1;
+  }
   return 0;
 }
 /**



From mean at mail.berlios.de  Tue Jul 14 17:37:22 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Tue, 14 Jul 2009 17:37:22 +0200
Subject: [Avidemux-svn-commit] r5088 - in branches/avidemux_2.6_branch_mean:
	avidemux avidemux/common avidemux/common/ADM_audioFilter
	avidemux/common/ADM_audioFilter/include
	avidemux/common/ADM_audioFilter/src
	avidemux/common/ADM_audioFilter_old
	avidemux/common/ADM_commonUI avidemux/common/ADM_editor
	avidemux/common/ADM_script avidemux/common/ADM_toolkit
	avidemux/gtk/ADM_userInterfaces/ADM_dialog
	avidemux_core/ADM_coreAudio/include
	avidemux_core/ADM_coreAudioFilter/include
Message-ID: <200907141537.n6EFbMb1028323@sheep.berlios.de>

Author: mean
Date: 2009-07-14 17:37:21 +0200 (Tue, 14 Jul 2009)
New Revision: 5088

Added:
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_audioFilter/include/
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_audioFilter/include/ADM_audioFilterInterface.h
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_audioFilter/src/audiofilter_interface.cpp
Removed:
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_audioFilter_old/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_audioFilter_old/audiodeng_buildfilters.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_audioFilter_old/audioeng_buildfilters.h
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_audioFilter_old/audioprocess.hxx
Modified:
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_audioFilter/src/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_audioFilter/src/audiofilter.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_audioFilter/src/audiofilter_encoder.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_commonUI/DIA_audioFilter.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edLoadSave.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script/ADM_JSAvidemuxAudio.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script/ADM_JSAvidemuxVideo.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script/ADM_JSFunctions.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script/ADM_JSFunctionsNonRegFactory.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_toolkit/ADM_audioQueue.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_toolkit/automation.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux/common/gtk_gui.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/gui_autodrive.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/gui_blackframes.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/gui_savenew.cpp
   branches/avidemux_2.6_branch_mean/avidemux/commonCmakeApplication.cmake
   branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/ADM_dialog/DIA_acodec.cpp
   branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/ADM_dialog/DIA_calculator.cpp
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreAudio/include/ADM_audiodef.h
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreAudioFilter/include/audiofilter_conf.h
Log:
[audioFiler/audioEncoder] Huge removal of old stuff, half broken

Copied: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_audioFilter/include/ADM_audioFilterInterface.h (from rev 5085, branches/avidemux_2.6_branch_mean/avidemux/common/ADM_audioFilter_old/audioprocess.hxx)
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_audioFilter_old/audioprocess.hxx	2009-07-13 09:57:01 UTC (rev 5085)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_audioFilter/include/ADM_audioFilterInterface.h	2009-07-14 15:37:21 UTC (rev 5088)
@@ -0,0 +1,38 @@
+
+/**************************************************************************
+                          audioeng_buildfilters.h  -  description
+                             -------------------
+    begin                : Mon Dec 2 2002
+    copyright            : (C) 2002 by mean
+    email                : fixounet at free.fr
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+#ifndef ADM_audioFilterInterface_H
+#define ADM_audioFilterInterface_H
+
+#include "ADM_audiodef.h"
+
+/* Filter part */
+bool            audioFilterReset(void);
+
+bool            audioFilterSetResample(uint32_t newfq);  // Set 0 to disable frequency
+bool            audioFilterSetFrameRate(FILMCONV conf);
+bool            audioFilterSetMixer(CHANNEL_CONF conf); // Invalid to disable
+
+uint32_t        audioFilterGetResample(void);  // Set 0 to disable frequency
+FILMCONV        audioFilterGetFrameRate(void);
+CHANNEL_CONF    audioFilterGetMixer(void); // Invalid to disable
+
+/* Encoder part */
+uint8_t         audioCodecSetByIndex(int i);
+void            audioCodecConfigure( void );
+
+#endif

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_audioFilter/src/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_audioFilter/src/CMakeLists.txt	2009-07-13 18:58:49 UTC (rev 5087)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_audioFilter/src/CMakeLists.txt	2009-07-14 15:37:21 UTC (rev 5088)
@@ -12,6 +12,7 @@
 audiofilter_normalize.cpp
 audiofilter_SRC.cpp
 audiofilter_encoder.cpp
+audiofilter_interface.cpp
 ADM_audioResample.cpp
 audiofilter.cpp
 ADM_libsamplerate/samplerate.c  

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_audioFilter/src/audiofilter.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_audioFilter/src/audiofilter.cpp	2009-07-13 18:58:49 UTC (rev 5087)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_audioFilter/src/audiofilter.cpp	2009-07-14 15:37:21 UTC (rev 5088)
@@ -21,6 +21,7 @@
 #include "audiofilter_access.h"
 #include "audiofilter_internal.h"
 #include "audiofilter_conf.h"
+#include "audiofilter_film2pal.h"
 
 VectorOfAudioFilter PlaybackVector;
 extern ADM_Composer *video_body;
@@ -88,6 +89,28 @@
         AUDMAudioFilterMixer *mixer=new AUDMAudioFilterMixer(last,config->mixerConf);
         ADD_FILTER(mixer);
     }
+    // Pal 2 film & friends
+    switch(config->film2pal)
+    {
+        case FILMCONV_NONE:
+            break;
+        case FILMCONV_FILM2PAL:
+            {
+            AUDMAudioFilterFilm2Pal *f2p=new AUDMAudioFilterFilm2Pal(last);
+            ADD_FILTER(f2p);
+            }
+            break;
+        case FILMCONV_PAL2FILM:
+            {
+            AUDMAudioFilterPal2Film *f2p=new AUDMAudioFilterPal2Film(last);
+            ADD_FILTER(f2p);
+            }
+            break;
+        default:
+            ADM_assert(0);
+            break;
+
+    }
     // Resample
     if(config->resamplerEnabled && config->resamplerFrequency!=last->getInfo()->frequency)
     {

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_audioFilter/src/audiofilter_encoder.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_audioFilter/src/audiofilter_encoder.cpp	2009-07-13 18:58:49 UTC (rev 5087)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_audioFilter/src/audiofilter_encoder.cpp	2009-07-14 15:37:21 UTC (rev 5088)
@@ -26,6 +26,7 @@
 
 VectorOfAudioFilter EncodingVector;
 extern ADM_Composer *video_body;
+extern ADM_AUDIOFILTER_CONFIG audioEncodingConfig;
 
 //
  extern bool ADM_buildFilterChain(VectorOfAudioFilter *vec,ADM_AUDIOFILTER_CONFIG *config);
@@ -39,13 +40,10 @@
 AUDMAudioFilter *createEncodingFilter(uint64_t startTime,int32_t shift)
 {
     //
-    ADM_AUDIOFILTER_CONFIG playback;
-    playback.startTimeInUs=startTime;
-    playback.shiftInMs=shift;
-    playback.mixerEnabled=true;
-    playback.mixerConf=CHANNEL_STEREO;
+    audioEncodingConfig.startTimeInUs=startTime;
+    audioEncodingConfig.shiftInMs=shift;
     //
-    ADM_buildFilterChain(&EncodingVector,&playback);
+    ADM_buildFilterChain(&EncodingVector,&audioEncodingConfig);
     //
     int last=EncodingVector.size();
     ADM_assert(last);
@@ -111,4 +109,4 @@
     }
     return stream;
 }
-// EOF
\ No newline at end of file
+// EOF

Added: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_audioFilter/src/audiofilter_interface.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_audioFilter/src/audiofilter_interface.cpp	2009-07-13 18:58:49 UTC (rev 5087)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_audioFilter/src/audiofilter_interface.cpp	2009-07-14 15:37:21 UTC (rev 5088)
@@ -0,0 +1,112 @@
+/***************************************************************************
+            \file audiofilter_interface.cpp
+            \brief Offer simple C api to enable/disable filter
+              (c) 2006 Mean , fixounet at free.fr
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+
+
+#include "ADM_default.h"
+#include <math.h>
+#include "audiofilter_conf.h"
+
+// This structure defines the current filter chain used for **ENCODING**
+// Warning, we have another one for playback
+
+ADM_AUDIOFILTER_CONFIG audioEncodingConfig;
+/**
+    \fn audioFilterReset
+    \brief Put back default value on audio filter chain
+
+*/
+bool audioFilterReset(void)
+{
+       return audioEncodingConfig.reset();
+}
+
+/**
+    \fn audioFilterSetResample
+    \brief
+*/
+bool    audioFilterSetResample(uint32_t newfq)  // Set 0 to disable frequency
+{
+    if(!newfq) audioEncodingConfig.resamplerEnabled=false;
+        else        
+            {
+                    audioEncodingConfig.resamplerEnabled=true;
+                    audioEncodingConfig.resamplerFrequency=newfq;
+            }
+    return true;
+}
+/**
+    \fn audioFilterGetResample
+    \brief
+*/
+
+uint32_t        audioFilterGetResample(void)  // Set 0 to disable frequency
+{
+    if(audioEncodingConfig.resamplerEnabled==false) return 0;
+    return audioEncodingConfig.resamplerFrequency;
+}
+
+/**
+    \fn audioFilterSetFrameRate
+    \brief
+*/
+
+bool    audioFilterSetFrameRate(FILMCONV conf)
+{
+    audioEncodingConfig.film2pal=conf;
+    return true;
+}
+
+/**
+    \fn audioFilterGetFrameRate
+    \brief
+*/
+
+FILMCONV        audioFilterGetFrameRate(void)
+{
+    return audioEncodingConfig.film2pal;
+}
+
+/**
+    \fn audioFilterSetMixer
+    \brief
+*/
+
+bool    audioFilterSetMixer(CHANNEL_CONF conf) // Invalid to disable
+{
+    if(conf==CHANNEL_INVALID)
+    {
+        audioEncodingConfig.mixerEnabled=false;
+    }else   
+    {
+        audioEncodingConfig.mixerEnabled=true;
+        audioEncodingConfig.mixerConf=conf;
+    }
+    return true;
+}
+
+/**
+    \fn audioFilterGetMixer
+    \brief
+*/
+
+CHANNEL_CONF    audioFilterGetMixer(void) // Invalid to disable
+{
+    if( audioEncodingConfig.mixerEnabled==false) return CHANNEL_INVALID;
+    return audioEncodingConfig.mixerConf;
+}
+
+// EOF
+
+

Deleted: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_audioFilter_old/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_audioFilter_old/CMakeLists.txt	2009-07-13 18:58:49 UTC (rev 5087)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_audioFilter_old/CMakeLists.txt	2009-07-14 15:37:21 UTC (rev 5088)
@@ -1,7 +0,0 @@
-SET(ADMaudiofilter_SRCS 
-	audiodeng_buildfilters.cpp    
-)
-	
-ADD_LIBRARY(ADM_audioFilter_old STATIC ${ADMaudiofilter_SRCS})
-INCLUDE_DIRECTORIES(${CMAKE_SOURCE_DIR}/avidemux/ADM_audioEncoder/include)
-

Deleted: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_audioFilter_old/audiodeng_buildfilters.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_audioFilter_old/audiodeng_buildfilters.cpp	2009-07-13 18:58:49 UTC (rev 5087)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_audioFilter_old/audiodeng_buildfilters.cpp	2009-07-14 15:37:21 UTC (rev 5088)
@@ -1,371 +0,0 @@
-/***************************************************************************
-                          audiodeng_buildfilters.cpp  -  description
-                             -------------------
-    begin                : Mon Dec 2 2002
-    copyright            : (C) 2002 by mean
-    email                : fixounet at free.fr
- ***************************************************************************/
-
-/***************************************************************************
- *                                                                         *
- *   This program is free software; you can redistribute it and/or modify  *
- *   it under the terms of the GNU General Public License as published by  *
- *   the Free Software Foundation; either version 2 of the License, or     *
- *   (at your option) any later version.                                   *
- *                                                                         *
- ***************************************************************************/
-
-#include <math.h>
-
-#include "ADM_default.h"
-
-#include "audiofilter_limiter_param.h"
-#include "audiofilter_normalize_param.h"
-
-#include "audioeng_buildfilters.h"
-
-
-#include "audioencoder.h"
-
-#include "ADM_audiocodec/ADM_audiocodeclist.h"
-
-
-#include "audiofilter_bridge.h"
-#include "audiofilter_mixer.h"
-#include "audiofilter_normalize.h"
-#include "audiofilter_limiter.h"
-
-#include "prefs.h"
-
-#include "ADM_debugID.h"
-#define MODULE_NAME MODULE_AUDIO_FILTER
-#include "ADM_debug.h"
-
-extern void UI_setAProcessToggleStatus( uint8_t status );
-extern uint8_t DIA_audioCodec( int *codec );
-extern void UI_setAudioCodec( int i);
-uint32_t audioFilterGetNbEncoder(void);
-const char* audioFilterGetIndexedName(uint32_t i);
-
-
-typedef struct externalSource
-{
- AudioSource type;
- const char *name;
-}externalSource;
-
-static const externalSource Sources[]=
-{
-        {AudioAvi,"VIDEO"},
-        {AudioMP3,"MP3"},
-        {AudioWav,"WAV"},
-        {AudioAC3,"AC3"},
-        {AudioNone,"NONE"}
-};
-typedef struct
-{
-  const char         *name;
-  CHANNEL_CONF conf;
-}Mixer_String;
-
-#define DOME(x) {#x,CHANNEL_##x}
-static Mixer_String Mixer_strings[]=
-{
-  {"NONE",CHANNEL_INVALID},
-  DOME(MONO),
-  DOME(STEREO),
-  DOME(2F_1R),
-  DOME(3F),
-  DOME(3F_1R),
-  DOME(2F_2R),
-  DOME(3F_2R),
-  DOME(3F_2R_LFE),
-  DOME(DOLBY_PROLOGIC),
-  DOME(DOLBY_PROLOGIC2)
-
-};
-
-
-
-extern void UI_PrintCurrentACodec( const char *s);
-
-
-/*----------------------------------*/
-GAINparam audioGain;
-int  audioFreq=48000;
-int  audioDRC = 0;
-FILMCONV audioFilmConv=FILMCONV_NONE;
-RESAMPLING  audioResampleMode = RESAMPLING_NONE;
-CHANNEL_CONF audioMixing=CHANNEL_INVALID;
-// These are globals for the moment
-//************************************
-int 	   audioShift = 0;
-int	   audioDelay=0;
-//**********
-
-const char              *getCurrentMixerString(void)
-{
-        uint32_t nb=sizeof(Mixer_strings)/sizeof(Mixer_String);
-        for(uint32_t i=0;i<nb;i++)
-                if(audioMixing==Mixer_strings[i].conf) return Mixer_strings[i].name;
-        ADM_assert(0);
-
-}
-uint8_t                    setCurrentMixerFromString(const char *name)
-{
-        uint32_t nb=sizeof(Mixer_strings)/sizeof(Mixer_String);
-        for(uint32_t i=0;i<nb;i++)
-                if(!strcasecmp(name,Mixer_strings[i].name))
-                {
-                  audioMixing= Mixer_strings[i].conf;
-                  return 1;
-                }
-        return 0;
-
-}
-//**********
-
-const char              *audioSourceFromEnum(AudioSource src)
-{
-        uint32_t nb=sizeof(Sources)/sizeof(externalSource);
-        for(uint32_t i=0;i<nb;i++)
-                if(src==Sources[i].type) return Sources[i].name;
-        ADM_assert(0);
-
-}
-AudioSource             audioSourceFromString(const char *name)
-{
-        uint32_t nb=sizeof(Sources)/sizeof(externalSource);
-        for(uint32_t i=0;i<nb;i++)
-                if(!strcasecmp(name,Sources[i].name)) return Sources[i].type;
-        return (AudioSource)0;
-
-}
-
-//**********
-uint8_t audioReset(void )
-{
-  audioGain.mode=ADM_NO_GAIN;
-  audioResampleMode = RESAMPLING_NONE;
-  audioFilmConv=FILMCONV_NONE;
-  audioMixing=CHANNEL_INVALID;
-  return 1;
-}
-//************
-uint8_t audioGetNormalizeMode(void)
-{
-  return audioGain.mode;
-
-}
-int32_t  audioGetNormalizeValue(void)
-{
-  return audioGain.gain10;
-
-}
-
-uint32_t audioGetResample(void)
-{
-      return audioFreq;
-
-}
-uint32_t audioGetDrc(void)
-{
-  return audioDRC;
-}
-uint32_t audioGetDelay(void)
-{
-        if(audioShift && audioDelay)
-        {
-                return audioDelay;
-
-        }
-        return 0;
-}
-FILMCONV audioGetFpsConv(void)
-{
-        return audioFilmConv;
-}
-
-/*----------------------------------*/
-//
-
-
-
-
-void audioFilterNormalizeMode(uint8_t onoff)
-{
-  audioGain.mode=(ADM_GAINMode)onoff;
-}
-void audioFilterNormalizeValue(int v)
-{
-  audioGain.gain10=v;
-}
-
-uint8_t audioFilterDelay(int32_t delay)
-{
-	if(delay)
-	{
-		audioShift=1;
-		audioDelay=delay;
-	}
-	else
-	{
-		audioShift=audioDelay=0;
-	}
-	return 1;
-
-}
-RESAMPLING  audioGetResampling(void)
-{
-        return audioResampleMode;
-}
-uint8_t audioFilterFilm2Pal(uint8_t onoff)
-{
-	if(onoff) audioFilmConv=FILMCONV_FILM2PAL;
-	else audioFilmConv=FILMCONV_NONE;
-	return 1;
-}
-uint8_t audioFilterDrc(uint8_t onoff)
-{
-  audioDRC=onoff;
-  return 1;
-}
-uint8_t audioFilterPal2Film(uint8_t onoff)
-{
-        if(onoff) audioFilmConv=FILMCONV_PAL2FILM;
-        else audioFilmConv=FILMCONV_NONE;
-        return 1;
-}
-
-void audioFilterResample(uint32_t onoff)
-{
-	if(onoff)
-	{
-		audioResampleMode=RESAMPLING_CUSTOM;
-		audioFreq=onoff;
-	}
-	else
-		audioResampleMode=RESAMPLING_NONE;
-
-}
-//______________________________
-//#include "ADM_gui2/GUI_ui.h"
-uint8_t UI_setTimeShift(int onoff,int value);
-extern  int DIA_getAudioFilter(GAINparam *normalized, RESAMPLING *downsamplingmethod, int *tshifted,
-  			 int *shiftvalue, int *drc,int *freqvalue,FILMCONV *filmconv,CHANNEL_CONF *channel);
-
-void audioFilter_configureFilters( void )
-{
-    int olddelay=audioDelay;
-    int oldshift=audioShift;
-	 DIA_getAudioFilter(&audioGain,&audioResampleMode,&audioShift,&audioDelay,&audioDRC,&audioFreq,
-	 		&audioFilmConv,&audioMixing );
-         if(audioDelay!=olddelay ||oldshift!= audioShift)
-         {  // Refresh
-
-
-
-         }
-
-}
-
-/*
-
-*/
-
-#define Read(x) { \
-		tmp=name; \
-		if((tmp=strstr(name,#x))) \
-			{ \
-				tmp+=strlen(#x); \
-				aprintf("-- %s\n",tmp); \
-				sscanf(tmp,"=%d ",(int *)&x); \
-			} \
-			 else \
-			{ printf("*** %s not found !***\n",#x);} \
-		}
-#define Add(x) {sprintf(tmp,"%s=%d ",#x,x);strcat(conf,tmp);}
-
-uint8_t audioFilterSetByName( const char *name)
-{
-	const char *tmp;
-	aprintf("-Audio filter by name : %s\n",name);
-
-	Read(audioGain.mode);
-        Read(audioGain.gain10);
-	Read(audioResampleMode);
-	Read(audioDRC);
-	Read(audioShift);
-	Read(audioDelay);
-	Read(audioFreq);
-	Read(audioMixing);
-	return 1;
-}
-
-const char *audioFilterGetName( void )
-{
-	static char conf[400];
-	static char tmp[200];
-	conf[0]=0;
-	#undef Add
-	#define Add(x) {sprintf(tmp,"%s=%d ",#x,x);strcat(conf,tmp);}
-	Add(audioGain.mode);
-        Add(audioGain.gain10);
-	Add(audioResampleMode);
-	Add(audioDRC);
-	Add(audioShift);
-	Add(audioDelay);
-	Add(audioFreq);
-	Add(audioMixing);
-	return conf;
-
-}
-
-
-/*
-	Refresh   activeAudioEncoder value
-	depending on what's selected
-
-*/
-
-
-
-void audioSetResample(uint32_t fq)
-{
-
-	audioResampleMode=RESAMPLING_CUSTOM;
-	audioFreq=fq;
-}
-/**
- * 	\fn getAudioOuputFrequency
- *  \brief Return the encoding of the currently selected codec
- */
-uint32_t audioProcessMode(void);
-uint32_t audioFilter_getOuputFrequency(uint32_t inputFrequency)
-{
-	if(!audioProcessMode()) return inputFrequency;
-	if(audioResampleMode == RESAMPLING_NONE) return inputFrequency;
-	return audioFreq;
-}
-/**
-    \fn audioCodecGetName
-    \brief Returns the current codec tagname
-*/
-
-AudioSource audioCodecGetFromName( const char *name)
-{
-                for(uint32_t i=0;i<sizeof(Sources)/sizeof(externalSource);i++)
-                {
-                        if(!strcasecmp(name,Sources[i].name))
-                        {
-
-                                return Sources[i].type;
-                        }
-
-                }
-                printf("\n Mmmm Select audio codec by name failed...(%s).\n",name);
-                return AudioNone;
-}
-
-//EOF
-

Deleted: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_audioFilter_old/audioeng_buildfilters.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_audioFilter_old/audioeng_buildfilters.h	2009-07-13 18:58:49 UTC (rev 5087)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_audioFilter_old/audioeng_buildfilters.h	2009-07-14 15:37:21 UTC (rev 5088)
@@ -1,107 +0,0 @@
-/**************************************************************************
-                          audioeng_buildfilters.h  -  description
-                             -------------------
-    begin                : Mon Dec 2 2002
-    copyright            : (C) 2002 by mean
-    email                : fixounet at free.fr
- ***************************************************************************/
-
-/***************************************************************************
- *                                                                         *
- *   This program is free software; you can redistribute it and/or modify  *
- *   it under the terms of the GNU General Public License as published by  *
- *   the Free Software Foundation; either version 2 of the License, or     *
- *   (at your option) any later version.                                   *
- *                                                                         *
- ***************************************************************************/
-#ifndef ADM_AUDIO_BUILDFILTER_H
-#define  ADM_AUDIO_BUILDFILTER_H
-
-#include "audioencoder.h"
-#include "ADM_audioCodecEnum.h"
-
-#include "audioEncoderApi.h"
-#include "ADM_audioStream.h"
-
- ADM_audioStream *buildAudioFilter(ADM_audioStream *stream, uint32_t startTime);
- AUDMAudioFilter *buildPlaybackFilter(ADM_audioStream *currentaudiostream,
-				uint32_t starttime, uint32_t duration);
-
- void deleteAudioFilter(ADM_audioStream *in);
-void audioFilter_configureFilters( void );
-
-
-
-void audioCodecConfigure( void );
-void audioCodecSelect( void );
-void audioFilter_MP3DisableReservoir(int onoff);
-uint32_t audioFilter_getOuputCodec(void);
-uint32_t audioFilter_getOuputFrequency(uint32_t inputFrequency);
-uint32_t audioFilter_getMaxChannels(void);
-
-//#include "ADM_audioEncoder/include/audioencoder_enum.h"
-
-typedef enum 
-{
-	RESAMPLING_NONE=0,
-	RESAMPLING_CUSTOM=1,
-	RESAMPLING_LAST
-}RESAMPLING;
-
-typedef enum 
-{
-	FILMCONV_NONE=0,
-	FILMCONV_FILM2PAL=1,
-	FILMCONV_PAL2FILM=2,
-	FILMCONV_LAST
-}FILMCONV;
-
-typedef enum
-{
-        AudioInvalid,
-        AudioAvi=1,
-        AudioMP3,
-        AudioWav,
-        AudioAC3,
-        AudioNone
-
-}AudioSource;
-
-//void audioCodecSetcodec(AUDIOENCODER codec);
-uint8_t audioReset(void);
-/*  for job/workspace stuff  */
-const char *audioFilterGetName( void );
-uint8_t audioFilterSetByName( const char *name);
-
-//AVDMGenericAudioStream *mpt_getAudioStream(void);
-
-/* -- Set filter --*/
-void audioFilterNormalizeMode(uint8_t onoff);
-void audioFilterNormalizeValue(int value);
-void audioFilterResample(uint32_t onoff);
-uint8_t audioFilterDelay(int32_t delay);
-uint8_t audioFilterFilm2Pal(uint8_t onoff);
-uint8_t audioFilterPal2Film(uint8_t onoff);
-uint8_t audioFilterDrc(uint8_t onoff);
-void audioFilter_SetBitrate( int i);
-/* -- Get filter -- */
-uint32_t audioGetBitrate(void);
-uint8_t audioGetNormalizeMode(void);
-int32_t audioGetNormalizeValue(void);
-uint32_t audioGetResample(void);
-uint32_t audioGetDelay(void);
-FILMCONV audioGetFpsConv(void);
-uint32_t audioGetDrc(void);
-RESAMPLING  audioGetResampling(void);
-/*-----*/
-uint8_t                 A_changeAudioStream(ADM_audioStream *newaudio,AudioSource so,char *name);
-AudioSource             getCurrentAudioSource(char **name);
-const char              *audioSourceFromEnum(AudioSource src);
-AudioSource             audioSourceFromString(const char *name);
-const char              *getCurrentMixerString(void);
-uint8_t                 setCurrentMixerFromString(const char *string);
-
-//*****
-//
-#endif
-

Deleted: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_audioFilter_old/audioprocess.hxx
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_audioFilter_old/audioprocess.hxx	2009-07-13 18:58:49 UTC (rev 5087)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_audioFilter_old/audioprocess.hxx	2009-07-14 15:37:21 UTC (rev 5088)
@@ -1,27 +0,0 @@
-/***************************************************************************
-                          audioprocess.hxx  -  description
-                             -------------------
-    begin                : Sun Jan 13 2002
-    copyright            : (C) 2002 by mean
-    email                : fixounet at free.fr
- ***************************************************************************/
-
-/***************************************************************************
- *                                                                         *
- *   This program is free software; you can redistribute it and/or modify  *
- *   it under the terms of the GNU General Public License as published by  *
- *   the Free Software Foundation; either version 2 of the License, or     *
- *   (at your option) any later version.                                   *
- *                                                                         *
- ***************************************************************************/
-
-#ifndef __AudioProcess__
-#define __AudioProcess__
-
-#include "ADM_coreAudio.h"
-#include "ADM_audioStream.h"
-#define PROCESS_BUFFER_SIZE 48000*4*4 // should be enougth
-#define MINIMUM_BUFFER   8192*4
-
-#endif
-// EOF

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_commonUI/DIA_audioFilter.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_commonUI/DIA_audioFilter.cpp	2009-07-13 18:58:49 UTC (rev 5087)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_commonUI/DIA_audioFilter.cpp	2009-07-14 15:37:21 UTC (rev 5088)
@@ -12,54 +12,23 @@
 //
 //
 
-#include "config.h"
-#include "ADM_default.h"
 
-
+#include "ADM_default.h"
+#include "audiofilter_conf.h"
 #include "DIA_factory.h"
-#include "audiofilter_normalize_param.h"
-#include "audioeng_buildfilters.h"
 /**
     \fn DIA_getAudioFilter
     \brief Dialog to manage audio filters
 */
-int DIA_getAudioFilter(GAINparam *gain,
-                        RESAMPLING *downsamplingmethod, 
-                        int *tshifted,
-                        int *shiftvalue, 
-                        int *drc,
-                        int *freqvalue,
-                        FILMCONV *filmconv,
-                        CHANNEL_CONF *channel)
+int DIA_getAudioFilter(ADM_AUDIOFILTER_CONFIG *config)
 {
   
-  uint32_t vDRC=*drc;
-  uint32_t vTshift=*tshifted;
-  int32_t vTshiftValue=*shiftvalue;
-  uint32_t vFreq=*freqvalue;
-  uint32_t vChan=(uint32_t)*channel;
-  uint32_t vDownsample=(uint32_t )*downsamplingmethod;
-  uint32_t vFilm=(uint32_t )*filmconv;
-  uint32_t vGainMode=(uint32_t)gain->mode;
-  ELEM_TYPE_FLOAT vGainValue=gain->gain10;
-  vGainValue/=10.;
-  //**********************************
-       
-   diaElemToggle    eDRC(&vDRC,QT_TR_NOOP("_Dynamic range compression"));
-   
-   diaElemToggleInt eTimeShift(&vTshift,QT_TR_NOOP("_Time shift (ms):"),&vTshiftValue,QT_TR_NOOP("Time shift value (ms)"),-1000*100,1000*100);
-   
-//    diaElemToggle    eTimeShift(&vTshift,QT_TR_NOOP("Enable _time shift"));
-//    diaElemInteger  eShift(&vTshiftValue,QT_TR_NOOP("Time shift _value (ms):"),-10000,10000);
-//    
-//    eTimeShift.link(1,&eShift);
-//   
-    //**********************************
+  uint32_t vFreq=config->resamplerFrequency;
+  uint32_t vChan=config->mixerConf;
+  uint32_t vDownsample=config->mixerEnabled;
+  uint32_t vFilm=config->film2pal;
+
    diaElemToggleUint eResample(&vDownsample,QT_TR_NOOP("R_esampling (Hz):"),&vFreq,QT_TR_NOOP("Resampling frequency (Hz)"),6000,64000);
-    //diaElemToggle      eResample(&vDownsample,QT_TR_NOOP("R_esampling (Hz)"));
-    //diaElemUInteger  eResampleValue(&vFreq,QT_TR_NOOP("_Resampling frequency (Hz):"),6000,64000);
-  
-//    eResample.link(1,&eResampleValue);
     
     //**********************************
     diaMenuEntry menuFPS[]={
@@ -71,19 +40,6 @@
    diaElemMenu      eFPS(&vFilm,QT_TR_NOOP("_Frame rate change:"),3,menuFPS);
 
    //**********************************
-    diaMenuEntry menuGain[]={
-  {ADM_NO_GAIN,       QT_TR_NOOP("None")},
-  {ADM_GAIN_AUTOMATIC,QT_TR_NOOP("Automatic (max -3 dB)")},
-  {ADM_GAIN_MANUAL,   QT_TR_NOOP("Manual")}};
-  
-   diaElemMenu      eGain(&vGainMode,QT_TR_NOOP("_Gain mode:"),3,menuGain);
-   
-    diaElemFloat  eGainValue(&vGainValue,QT_TR_NOOP("G_ain value:"),-10,10);
-     eGain.link(&(menuGain[2]),1,&eGainValue);
-   diaElemFrame frameGain(QT_TR_NOOP("Gain"));   
-    frameGain.swallow(&eGain);
-    frameGain.swallow(&eGainValue);
-  //********************************
     diaMenuEntry menuMixer[]={
   {CHANNEL_INVALID,     QT_TR_NOOP("No change")},
   {CHANNEL_MONO,        QT_TR_NOOP("Mono")},
@@ -101,23 +57,17 @@
  diaElemMenu      eMixer(&vChan,QT_TR_NOOP("_Mixer:"),11,menuMixer);
  
  /************************************/
- diaElem *elems[]={&eFPS, &eMixer, &eTimeShift,  &eResample, &eDRC, &frameGain};
-  if( diaFactoryRun(QT_TR_NOOP("Audio Filters"),6,elems))
+ diaElem *elems[]={&eFPS, &eMixer, &eResample};
+  if( diaFactoryRun(QT_TR_NOOP("Audio Filters"),3,elems))
     {
-        *drc=vDRC;
-        *tshifted=vTshift;
-        *shiftvalue=vTshiftValue;
-        *freqvalue=vFreq;
-        *channel=(CHANNEL_CONF)vChan;
-        *downsamplingmethod=(RESAMPLING)vDownsample;
-        *filmconv=(FILMCONV)vFilm;
-        gain->mode=(ADM_GAINMode)vGainMode;
-        gain->gain10=(uint32_t)(10.*vGainValue);
-      return 1;
+        config->resamplerFrequency=vFreq;
+        config->mixerConf=(CHANNEL_CONF)vChan;
+        config->mixerEnabled=vDownsample;
+        config->film2pal=(FILMCONV)vFilm;
+      return true;
     }
     
-    return 0;
- 
+    return false;
 }
 
 

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edLoadSave.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edLoadSave.cpp	2009-07-13 18:58:49 UTC (rev 5087)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edLoadSave.cpp	2009-07-14 15:37:21 UTC (rev 5088)
@@ -27,9 +27,6 @@
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_videoFilter.h"
 #include "ADM_videoFilter_internal.h"
-
-#include "audioeng_buildfilters.h"
-//#include "ADM_encoder/adm_encConfig.h"
 #include "prefs.h"
 #include "avi_vars.h"
 
@@ -190,7 +187,7 @@
    
    qfprintf(fd,"\n//** Audio **\n");
    qfprintf(fd,"app.audio.reset();\n");
-
+#if 0
    // External audio ?
         char *audioName;
         AudioSource  source;
@@ -212,7 +209,7 @@
                         qfprintf(fd,"app.audio.setTrack(%d);\n", source); 
                         
         }
-#if 0
+
    getAudioExtraConf(&bitrate,&extraDataSize,&extraData);
    qfprintf(fd,"app.audio.codec(\"%s\",%d,%d,\"", audioCodecGetName(),bitrate,extraDataSize); 
    for(int i=0;i<extraDataSize;i++)

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script/ADM_JSAvidemuxAudio.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script/ADM_JSAvidemuxAudio.cpp	2009-07-13 18:58:49 UTC (rev 5087)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script/ADM_JSAvidemuxAudio.cpp	2009-07-14 15:37:21 UTC (rev 5088)
@@ -16,25 +16,18 @@
 #include "ADM_JSAvidemuxAudio.h"
 
 #include "ADM_commonUI/GUI_ui.h"
-#include "audioeng_buildfilters.h"
 #include "avi_vars.h"
 #include "gui_action.hxx"
-//#include "ADM_encoder/ADM_vidEncode.hxx"
 #include "ADM_videoFilter.h"
-//#include "ADM_encoder/adm_encoder.h"
-//#include "ADM_encoder/adm_encConfig.h"
 #include "ADM_editor/ADM_outputfmt.h"
-
-
-
 #include "ADM_script/ADM_container.h"
+#include "ADM_audioFilter/include/ADM_audioFilterInterface.h"
 
 extern int A_audioSave(char *name);
 extern int A_loadAC3 (char *name);
 extern int A_loadMP3 (char *name);
 extern int A_loadWave (char *name);
 extern void HandleAction(Action act);
-extern uint8_t A_setSecondAudioTrack(const AudioSource nw,char *name);
 
 JSPropertySpec ADM_JSAvidemuxAudio::avidemuxaudio_properties[] = 
 { 
@@ -166,6 +159,7 @@
 
 JSBool ADM_JSAvidemuxAudio::JSSetProperty(JSContext *cx, JSObject *obj, jsval id, jsval *vp)
 {
+#if 0
         if (JSVAL_IS_INT(id)) 
         {
                 
@@ -253,6 +247,7 @@
                         return JS_FALSE;
                 }
         }
+#endif
         return JS_TRUE;
 }
 
@@ -293,6 +288,7 @@
 JSBool ADM_JSAvidemuxAudio::Load(JSContext *cx, JSObject *obj, uintN argc, 
                                       jsval *argv, jsval *rval)
 {// begin Load
+#if 0
         ADM_JSAvidemuxAudio *p = (ADM_JSAvidemuxAudio *)JS_GetPrivate(cx, obj);
         // default return value
         *rval = BOOLEAN_TO_JSVAL(false);
@@ -342,6 +338,7 @@
         printf(" external source %d (%s) \n", src,pTempStr);
 
         *rval = INT_TO_JSVAL(result);
+#endif
         return JS_TRUE;
 }// end Load
 
@@ -354,7 +351,7 @@
         if(argc != 0)
                 return JS_FALSE;
         enterLock();
-        audioReset();
+        audioFilterReset();
         leaveLock()
         *rval = BOOLEAN_TO_JSVAL(true);
         return JS_TRUE;
@@ -364,6 +361,7 @@
 JSBool ADM_JSAvidemuxAudio::Codec(JSContext *cx, JSObject *obj, uintN argc, 
                                       jsval *argv, jsval *rval)
 {// begin Codec
+#if 0
         ADM_JSAvidemuxAudio *p = (ADM_JSAvidemuxAudio *)JS_GetPrivate(cx, obj);
         // default return value
         *rval = BOOLEAN_TO_JSVAL(false);
@@ -401,6 +399,7 @@
                 *rval = BOOLEAN_TO_JSVAL(true);
         }// end set bitrate
         leaveLock();
+#endif
         return JS_TRUE;
 }// end Codec
 JSBool ADM_JSAvidemuxAudio::getNbTracks(JSContext *cx, JSObject *obj, uintN argc, 
@@ -446,6 +445,7 @@
 }// end Codec
 JSBool ADM_JSAvidemuxAudio::secondAudioTrack(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval)
 {
+#if 0
         ADM_JSAvidemuxAudio *p = (ADM_JSAvidemuxAudio *)JS_GetPrivate(cx, obj);
         if(argc != 2)
                 return JS_FALSE;
@@ -467,11 +467,13 @@
                 return JS_TRUE;
         }
         leaveLock();
+#endif
       return JS_FALSE;
 }
 JSBool ADM_JSAvidemuxAudio::mixer(JSContext *cx, JSObject *obj, uintN argc, 
                                       jsval *argv, jsval *rval)
 {
+#if 0
 uint32_t nb=0,nw=0;
 uint32_t *infos=NULL;
         // default return value
@@ -488,6 +490,7 @@
         else
                 *rval=BOOLEAN_TO_JSVAL(false);
         leaveLock();
+#endif
         return JS_TRUE;
 
 }// end Codec

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script/ADM_JSAvidemuxVideo.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script/ADM_JSAvidemuxVideo.cpp	2009-07-13 18:58:49 UTC (rev 5087)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script/ADM_JSAvidemuxVideo.cpp	2009-07-14 15:37:21 UTC (rev 5088)
@@ -17,14 +17,10 @@
 
 
 #include "ADM_commonUI/GUI_ui.h"
-#include "audioeng_buildfilters.h"
 #include "avi_vars.h"
 #include "gui_action.hxx"
-//#include "ADM_encoder/ADM_vidEncode.hxx"
 #include "ADM_videoFilter.h"
 #include "ADM_videoFilter_internal.h"
-//#include "ADM_encoder/adm_encoder.h"
-//#include "ADM_encoder/adm_encConfig.h"
 #include "ADM_editor/ADM_outputfmt.h"
 #include "ADM_commonUI/GUI_ui.h"
 #include "ADM_script/ADM_container.h"

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script/ADM_JSFunctions.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script/ADM_JSFunctions.cpp	2009-07-13 18:58:49 UTC (rev 5087)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script/ADM_JSFunctions.cpp	2009-07-14 15:37:21 UTC (rev 5088)
@@ -31,14 +31,10 @@
 #include "ADM_default.h"
 #include "DIA_coreToolkit.h"
 #include "ADM_editor/ADM_outputfmt.h"
-#include "audioeng_buildfilters.h"
 #include "adm_scanner.h" 
 #include "avi_vars.h"
 #include "gui_action.hxx"
-//#include "ADM_encoder/ADM_vidEncode.hxx"
 #include "ADM_videoFilter.h"
-//#include "ADM_encoder/adm_encoder.h"
-//#include "ADM_encoder/adm_encConfig.h"
 #include "ADM_editor/ADM_outputfmt.h"
 
 #include "ADM_script/ADM_container.h"

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script/ADM_JSFunctionsNonRegFactory.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script/ADM_JSFunctionsNonRegFactory.cpp	2009-07-13 18:58:49 UTC (rev 5087)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script/ADM_JSFunctionsNonRegFactory.cpp	2009-07-14 15:37:21 UTC (rev 5088)
@@ -31,7 +31,6 @@
 #include "ADM_default.h"
 #include "DIA_coreToolkit.h"
 #include "ADM_editor/ADM_outputfmt.h"
-#include "audioeng_buildfilters.h"
 #include "adm_scanner.h" 
 #include "avi_vars.h"
 #include "gui_action.hxx"

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_toolkit/ADM_audioQueue.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_toolkit/ADM_audioQueue.cpp	2009-07-13 18:58:49 UTC (rev 5087)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_toolkit/ADM_audioQueue.cpp	2009-07-14 15:37:21 UTC (rev 5088)
@@ -14,9 +14,6 @@
 #include "ADM_default.h"
 #include "ADM_threads.h"
 
-#include "audioprocess.hxx"
-#include "audioeng_buildfilters.h"
-
 #include "ADM_audioQueue.h"
 
 /*

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_toolkit/automation.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_toolkit/automation.cpp	2009-07-13 18:58:49 UTC (rev 5087)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_toolkit/automation.cpp	2009-07-14 15:37:21 UTC (rev 5088)
@@ -31,8 +31,6 @@
 
 
 #include "gui_action.hxx"
-//#include "ADM_encoder/ADM_vidEncode.hxx"
-#include "audioeng_buildfilters.h"
 #include "prefs.h"
 #include "gtkgui.h"
 
@@ -45,7 +43,7 @@
 #include "ADM_filter/vidVCD.h"
 #include "ADM_vidMisc.h"
 #include "ADM_coreVideoEncoder.h"
-
+#include "ADM_audioFilter/include/ADM_audioFilterInterface.h"
 extern void filterListAll(void );
 
 //extern uint8_t loadVideoCodecConf( const char *name);
@@ -323,7 +321,7 @@
 {
   int32_t i;
   sscanf(p,"%d",&i);
-        audioFilterNormalizeMode(i);
+  //audioFilterNormalizeMode(i);
 }
 void call_resample    (char *p)
 {
@@ -331,7 +329,7 @@
         fq=atoi(p);
         if(fq>1000)
         {
-                audioSetResample(fq);
+                audioFilterSetResample(fq);
                 printf("resample to %d\n",fq);
         }
         else
@@ -379,10 +377,11 @@
 
 		int32_t i;
 		sscanf(p,"%"LD,&i);
-		audioFilterDelay(i);
+//		audioFilterDelay(i);
 }
 void call_audiocodec(char *p)
 {
+#if 0
 	if(!strcasecmp(p,"MP2"))
 		audio_selectCodecByTag(WAV_MP2);
 	else if(!strcasecmp(p,"AC3"))
@@ -399,6 +398,7 @@
 		audio_selectCodecByTag( WAV_PCM );
 		fprintf(stderr,"audio codec \"%s\" unknown.\n",p);
 	}
+#endif
 }
 void call_probePat(char *p)
 {

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/CMakeLists.txt	2009-07-13 18:58:49 UTC (rev 5087)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/CMakeLists.txt	2009-07-14 15:37:21 UTC (rev 5088)
@@ -1,6 +1,6 @@
 ADD_SUBDIRECTORY(ADM_audiocodec)
 ADD_SUBDIRECTORY(ADM_audioFilter)
-ADD_SUBDIRECTORY(ADM_audioFilter_old)
+#ADD_SUBDIRECTORY(ADM_audioFilter_old)
 ADD_SUBDIRECTORY(ADM_codecs)
 ADD_SUBDIRECTORY(ADM_commonUI)
 ADD_SUBDIRECTORY(ADM_editor)

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/gtk_gui.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/gtk_gui.cpp	2009-07-13 18:58:49 UTC (rev 5087)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/gtk_gui.cpp	2009-07-14 15:37:21 UTC (rev 5088)
@@ -29,11 +29,9 @@
 
 #include "ADM_coreAudio.h"
 
-#include "audioprocess.hxx"
 #include "gui_action.hxx"
 #include "gtkgui.h"
 
-#include "audioeng_buildfilters.h"
 #include "prefs.h"
 #include "ADM_render/GUI_render.h"
 #include "ADM_commonUI/GUI_ui.h"
@@ -51,14 +49,9 @@
 #include "ADM_vidMisc.h"
 #include "ADM_preview.h"
 #include "ADM_coreVideoEncoder.h"
+#include "ADM_audioFilter/include/ADM_audioFilterInterface.h"
 
 
-static AudioSource currentAudioSource = AudioAvi;
-static AudioSource secondAudioSource = AudioNone;
-
-static char *currentAudioName = NULL;
-static char *secondAudioName = NULL;
-
 char * actual_workbench_file;
 renderZoom currentZoom=ZOOM_1_1;
 //***********************************
@@ -88,7 +81,6 @@
 extern int A_SavePackedVop(const char *name);
 uint8_t A_TimeShift(void);
 void A_ResetMarkers(void);
-uint8_t A_setSecondAudioTrack(const AudioSource nw,char *name);
 extern void A_jog(void);
 //***********************************
 //******** GUI Function**************
@@ -216,7 +208,7 @@
                 return;
 #endif
       case ACT_AudioConfigure:
-    		audioCodecSelect();
+//    		audioCodecSelect();
 		return;
 	case ACT_VideoConfigure:
     		videoEncoder6Configure();
@@ -259,7 +251,7 @@
       return;
 
     case ACT_AudioFilters:
-      audioFilter_configureFilters ();
+    //  audioFilter_configureFilters ();
       return;
     case ACT_Pref:
         if(playing) return;
@@ -489,7 +481,7 @@
  
     case ACT_AudioSourceAvi:
       //currentaudiostream=aviaudiostream;
-      A_changeAudioStream (aviaudiostream, AudioAvi,NULL);
+//      A_changeAudioStream (aviaudiostream, AudioAvi,NULL);
       //wavinfo= currentaudiostream->getInfo();
       break;
 
@@ -821,7 +813,8 @@
             }
             if(infos) delete [] infos;
             // Revert mixer to copy
-            setCurrentMixerFromString("NONE");
+            //setCurrentMixerFromString("NONE");
+            audioFilterSetMixer(CHANNEL_INVALID);
         }
 	for(i=strlen(longname);i>=0;i--)
     {
@@ -873,7 +866,7 @@
   else
     {
 	  video_body->getAudioStream (&aviaudiostream);
-      A_changeAudioStream (aviaudiostream, AudioAvi,NULL);
+//      A_changeAudioStream (aviaudiostream, AudioAvi,NULL);
 #if 0
       if (aviaudiostream)
 	if (!aviaudiostream->isDecompressable ())
@@ -981,7 +974,7 @@
   video_body->getAudioStream (&aviaudiostream);
   if (isaviaud)
     {
-      A_changeAudioStream (aviaudiostream, AudioAvi,NULL);
+//      A_changeAudioStream (aviaudiostream, AudioAvi,NULL);
     }
   	//updateVideoFilters ();
 	getFirstVideoFilter();
@@ -1038,16 +1031,20 @@
 {
 
 }
+#if 0
 AudioSource getCurrentAudioSource(char **name)
 {
         *name=currentAudioName;
         return currentAudioSource;
 }
+#endif
 //________________________________________________________
 // Change audio stream and delete the old one if needed
 //________________________________________________________
+#if 0
 uint8_t A_changeAudioStream (ADM_audioStream * newaudio, AudioSource nwsource,char *myname)
 {
+
 	if (currentaudiostream)
 	{
 		if (currentaudiostream != aviaudiostream)
@@ -1069,13 +1066,14 @@
     if(myname)
         currentAudioName=ADM_strdup(myname);
   }
+
   return 1;
 }
+#endif
 
 
 
 
-
 //      Clean up
 //      free all pending stuff, make leakchecker happy
 //
@@ -1098,7 +1096,7 @@
 		delete secondaudiostream;
 		secondaudiostream=NULL;
 	}
-
+#if 0
 	if (currentAudioName)
 	{
 		ADM_dealloc(currentAudioName);
@@ -1110,7 +1108,7 @@
 		ADM_dealloc(secondAudioName);
 		secondAudioName = NULL;
 	}
-
+#endif
 	if (actual_workbench_file)
 	{
 		ADM_dealloc(actual_workbench_file);
@@ -1164,10 +1162,6 @@
    }
    ADM_dealloc(longname);
 }
-/**---------------------------------------------------
-		Pipe to toolame
--------------------------------------------------------**/
-extern  void audioCodecSetcodec(AUDIOENCODER codec);
 
 /*
 	Unpack all frames without displaying them to check for error
@@ -1266,7 +1260,6 @@
  	}
 
 }
-extern uint8_t DIA_audioTrack(AudioSource *source, uint32_t *track,uint32_t nbTrack, audioInfo *infos);
 extern const char *getStrFromAudioCodec( uint32_t codec);
 /**
       \fn A_audioTrack
@@ -1274,6 +1267,7 @@
 */
 void A_audioTrack( void )
 {
+#if 0
         uint32_t nb;
         audioInfo *infos=NULL;
 
@@ -1379,7 +1373,7 @@
          for(int i=0;i<nb;i++)
             delete sourceavitracks[i];
         return;
-
+#endif
 }
 /**
         \fn A_externalAudioTrack
@@ -1387,6 +1381,7 @@
 */
 void A_externalAudioTrack( void )
 {
+#if 0
         uint32_t old,nw;
         uint32_t oldtrack,newtrack;
         char  *newtrackname=ADM_strdup(secondAudioName);
@@ -1427,11 +1422,12 @@
        secondAudioSource=(AudioSource)nw;
         A_setSecondAudioTrack(secondAudioSource,newtrackname);
         if(newtrackname) ADM_dealloc(newtrackname);
+#endif
 }
-
+#if 0
 uint8_t A_setSecondAudioTrack(const AudioSource nw,char *name)
 {
-#if 0
+
         switch(nw)
         {
                 case AudioNone:break;
@@ -1509,10 +1505,10 @@
                 ADM_assert(0);
         }
         return 0;
-#endif
+
 }
+#endif
 
-
 void A_Resync(void)
 {
 // Just in case update file info
@@ -1624,7 +1620,7 @@
       avifileinfo = NULL;
       video_body->cleanup ();
       curframe = 0;
-      A_changeAudioStream (NULL, AudioNone,NULL);
+//      A_changeAudioStream (NULL, AudioNone,NULL);
 
       // Audio streams are cleared by editor
 

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/gui_autodrive.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/gui_autodrive.cpp	2009-07-13 18:58:49 UTC (rev 5087)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/gui_autodrive.cpp	2009-07-14 15:37:21 UTC (rev 5088)
@@ -29,8 +29,6 @@
 
 #include "audio_out.h"
 #include "ADM_coreAudio.h"
-#include "audioprocess.hxx"
-#include "audioeng_buildfilters.h"
 #include "gui_action.hxx"
 
 //#include "ADM_encoder/adm_encConfig.h"

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/gui_blackframes.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/gui_blackframes.cpp	2009-07-13 18:58:49 UTC (rev 5087)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/gui_blackframes.cpp	2009-07-14 15:37:21 UTC (rev 5088)
@@ -28,7 +28,6 @@
 #include "prototype.h"
 #include "audio_out.h"
 #include "ADM_coreAudio.h"
-#include "audioprocess.hxx"
 #include "gui_action.hxx"
 #include "gtkgui.h"
 #include "DIA_coreToolkit.h"

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/gui_savenew.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/gui_savenew.cpp	2009-07-13 18:58:49 UTC (rev 5087)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/gui_savenew.cpp	2009-07-14 15:37:21 UTC (rev 5088)
@@ -23,7 +23,6 @@
 #include "DIA_coreToolkit.h"
 #include "DIA_enter.h"
 #include "ADM_coreAudio.h"
-#include "audioprocess.hxx"
 
 #include "ADM_videoFilter.h"
 #include "ADM_videoFilter_internal.h"

Modified: branches/avidemux_2.6_branch_mean/avidemux/commonCmakeApplication.cmake
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/commonCmakeApplication.cmake	2009-07-13 18:58:49 UTC (rev 5087)
+++ branches/avidemux_2.6_branch_mean/avidemux/commonCmakeApplication.cmake	2009-07-14 15:37:21 UTC (rev 5088)
@@ -107,7 +107,7 @@
 	INCLUDE_DIRECTORIES(${GETTEXT_INCLUDE_DIR})
 ENDIF (GETTEXT_FOUND)
 INCLUDE_DIRECTORIES("${CMAKE_CURRENT_SOURCE_DIR}/../common/")
-INCLUDE_DIRECTORIES("${CMAKE_CURRENT_SOURCE_DIR}/../common/ADM_audioFilter_old")
+INCLUDE_DIRECTORIES("${CMAKE_CURRENT_SOURCE_DIR}/../common/ADM_audioFilter/include")
 INCLUDE_DIRECTORIES("${CMAKE_CURRENT_SOURCE_DIR}/../common/ADM_commonUI")
 #
 # Add main source
@@ -160,7 +160,6 @@
 SET(commonLibs1
 ADM_muxerGate 
 ADM_audioFilter
-ADM_audioFilter_old 
 ADM_editor 
 ADM_audiocodec 
 ADM_codecs 

Modified: branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/ADM_dialog/DIA_acodec.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/ADM_dialog/DIA_acodec.cpp	2009-07-13 18:58:49 UTC (rev 5087)
+++ branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/ADM_dialog/DIA_acodec.cpp	2009-07-14 15:37:21 UTC (rev 5088)
@@ -4,10 +4,6 @@
 
 #include "ADM_toolkitGtk.h"
 
-#include "audioprocess.hxx"
-#include "audioeng_buildfilters.h"
-//#include "ADM_audiocodec/ADM_audiocodeclist.h"
-
 extern uint32_t audioEncoderGetNumberOfEncoders(void);
 extern const char  *audioEncoderGetDisplayName(uint32_t i);
 extern uint8_t audioCodecSetByIndex(int i);
@@ -36,7 +32,7 @@
 
 		cur=findCodec();
 		audioCodecSetByIndex(cur);
-		audioCodecConfigure();
+//		audioCodecConfigure();
 
 }
 

Modified: branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/ADM_dialog/DIA_calculator.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/ADM_dialog/DIA_calculator.cpp	2009-07-13 18:58:49 UTC (rev 5087)
+++ branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/ADM_dialog/DIA_calculator.cpp	2009-07-14 15:37:21 UTC (rev 5088)
@@ -25,10 +25,6 @@
 #include "ADM_videoFilter.h"
 #include "ADM_videoFilter_internal.h"
 
-#include "audioprocess.hxx"
-#include "audioeng_buildfilters.h"
-
-
 #include "ADM_vidMisc.h"
 #include "avi_vars.h"
 

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreAudio/include/ADM_audiodef.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreAudio/include/ADM_audiodef.h	2009-07-13 18:58:49 UTC (rev 5087)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreAudio/include/ADM_audiodef.h	2009-07-14 15:37:21 UTC (rev 5088)
@@ -5,7 +5,19 @@
 #ifndef AUDIO_DEF
 #define AUDIO_DEF
 #include <string.h>
+
+
 /**
+    \enum FILMCONV
+*/
+typedef enum 
+{
+	FILMCONV_NONE=0,
+	FILMCONV_FILM2PAL=1,
+	FILMCONV_PAL2FILM=2,
+	FILMCONV_LAST
+}FILMCONV;
+/**
     \struct WAVHeader
 */
 typedef struct

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreAudioFilter/include/audiofilter_conf.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreAudioFilter/include/audiofilter_conf.h	2009-07-13 18:58:49 UTC (rev 5087)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreAudioFilter/include/audiofilter_conf.h	2009-07-14 15:37:21 UTC (rev 5088)
@@ -29,14 +29,19 @@
 public    :
 
     ADM_AUDIOFILTER_CONFIG(void)
-        {
-                startTimeInUs=0;
-                shiftInMs=0;
-                mixerEnabled=false;
-                mixerConf=CHANNEL_STEREO;
-                resamplerEnabled=false;
-                resamplerFrequency=44100;
-        }
+                {
+                    reset();
+                }
+    bool        reset()
+                {
+                        startTimeInUs=0;
+                        shiftInMs=0;
+                        mixerEnabled=false;
+                        mixerConf=CHANNEL_STEREO;
+                        resamplerEnabled=false;
+                        resamplerFrequency=44100;
+                        film2pal    =FILMCONV_NONE;
+                }
 
     uint64_t     startTimeInUs;
     int32_t      shiftInMs;
@@ -46,8 +51,12 @@
     // Resampler
     bool         resamplerEnabled;
     uint32_t     resamplerFrequency;
+    // film2pal & pal2film
+    FILMCONV     film2pal;
+    // Gain filter
+    //GAINparam    gainParam;
+     
 
-
 };
 
 #endif
\ No newline at end of file



From mean at mail.berlios.de  Tue Jul 14 17:37:26 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Tue, 14 Jul 2009 17:37:26 +0200
Subject: [Avidemux-svn-commit] r5089 - in branches/avidemux_2.6_branch_mean:
	avidemux/common avidemux/common/ADM_audioFilter/include
	avidemux/common/ADM_audioFilter/src
	avidemux/common/ADM_commonUI avidemux/common/ADM_script
	avidemux/common/ADM_toolkit
	avidemux_core/ADM_coreAudioFilter/include
	avidemux_plugins/ADM_audioEncoders/lame
Message-ID: <200907141537.n6EFbQDB028333@sheep.berlios.de>

Author: mean
Date: 2009-07-14 17:37:25 +0200 (Tue, 14 Jul 2009)
New Revision: 5089

Modified:
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_audioFilter/include/ADM_audioFilterInterface.h
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_audioFilter/src/audiofilter_interface.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_commonUI/DIA_audioFilter.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script/ADM_JSAvidemux.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_toolkit/automation.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/gtk_gui.cpp
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreAudioFilter/include/audiofilter_conf.h
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioEncoders/lame/audioencoder_lame.cpp
Log:
[audio] Big cleanup on audio filter, re-enable filter configuration dialog

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_audioFilter/include/ADM_audioFilterInterface.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_audioFilter/include/ADM_audioFilterInterface.h	2009-07-14 15:37:21 UTC (rev 5088)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_audioFilter/include/ADM_audioFilterInterface.h	2009-07-14 15:37:25 UTC (rev 5089)
@@ -31,6 +31,8 @@
 FILMCONV        audioFilterGetFrameRate(void);
 CHANNEL_CONF    audioFilterGetMixer(void); // Invalid to disable
 
+bool            audioFilterConfigure(void);
+
 /* Encoder part */
 uint8_t         audioCodecSetByIndex(int i);
 void            audioCodecConfigure( void );

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_audioFilter/src/audiofilter_interface.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_audioFilter/src/audiofilter_interface.cpp	2009-07-14 15:37:21 UTC (rev 5088)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_audioFilter/src/audiofilter_interface.cpp	2009-07-14 15:37:25 UTC (rev 5089)
@@ -22,7 +22,17 @@
 // Warning, we have another one for playback
 
 ADM_AUDIOFILTER_CONFIG audioEncodingConfig;
+extern int DIA_getAudioFilter(ADM_AUDIOFILTER_CONFIG *config);
+
 /**
+    \fn audioFilterconfigure
+    \brief
+*/
+bool audioFilterConfigure(void)
+{
+    return DIA_getAudioFilter(&audioEncodingConfig);
+}
+/**
     \fn audioFilterReset
     \brief Put back default value on audio filter chain
 

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_commonUI/DIA_audioFilter.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_commonUI/DIA_audioFilter.cpp	2009-07-14 15:37:21 UTC (rev 5088)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_commonUI/DIA_audioFilter.cpp	2009-07-14 15:37:25 UTC (rev 5089)
@@ -22,13 +22,10 @@
 */
 int DIA_getAudioFilter(ADM_AUDIOFILTER_CONFIG *config)
 {
-  
-  uint32_t vFreq=config->resamplerFrequency;
   uint32_t vChan=config->mixerConf;
-  uint32_t vDownsample=config->mixerEnabled;
   uint32_t vFilm=config->film2pal;
-
-   diaElemToggleUint eResample(&vDownsample,QT_TR_NOOP("R_esampling (Hz):"),&vFreq,QT_TR_NOOP("Resampling frequency (Hz)"),6000,64000);
+#define PX(x) (&(config->x))
+   diaElemToggleUint eResample(PX(resamplerEnabled),QT_TR_NOOP("R_esampling (Hz):"),PX(resamplerFrequency),QT_TR_NOOP("Resampling frequency (Hz)"),6000,64000);
     
     //**********************************
     diaMenuEntry menuFPS[]={
@@ -60,9 +57,7 @@
  diaElem *elems[]={&eFPS, &eMixer, &eResample};
   if( diaFactoryRun(QT_TR_NOOP("Audio Filters"),3,elems))
     {
-        config->resamplerFrequency=vFreq;
         config->mixerConf=(CHANNEL_CONF)vChan;
-        config->mixerEnabled=vDownsample;
         config->film2pal=(FILMCONV)vFilm;
       return true;
     }

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script/ADM_JSAvidemux.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script/ADM_JSAvidemux.cpp	2009-07-14 15:37:21 UTC (rev 5088)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script/ADM_JSAvidemux.cpp	2009-07-14 15:37:25 UTC (rev 5089)
@@ -322,6 +322,7 @@
 JSBool ADM_JSAvidemux::LoadFilters(JSContext *cx, JSObject *obj, uintN argc, 
                                        jsval *argv, jsval *rval)
 {// begin LoadFilters
+#if 0
         ADM_JSAvidemux *p = (ADM_JSAvidemux *)JS_GetPrivate(cx, obj);
         // default return value
         *rval = BOOLEAN_TO_JSVAL(false);
@@ -334,6 +335,7 @@
         enterLock();
         *rval = BOOLEAN_TO_JSVAL(filterLoadXml(pTempStr,0));
         leaveLock();
+#endif
 	return JS_TRUE;
 }// end LoadFilters
 

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_toolkit/automation.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_toolkit/automation.cpp	2009-07-14 15:37:21 UTC (rev 5088)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_toolkit/automation.cpp	2009-07-14 15:37:25 UTC (rev 5089)
@@ -48,7 +48,7 @@
 
 //extern uint8_t loadVideoCodecConf( const char *name);
 extern int A_saveJpg (char *name);
-extern void filterLoadXml(const char *n);
+//extern void filterLoadXml(const char *n);
 extern int A_appendAvi (const char *name);
 extern void A_saveAudioCopy(char *name);
 extern int A_loadNone( void );
@@ -144,7 +144,7 @@
         {"run",			1,"load and run a script",		(one_arg_type)A_parseECMAScript},
         {"audio-normalize",	1,"activate normalization",		call_normalize},
         {"audio-resample",	1,"resample to x hz",			call_resample},
-        {"filters",		1,"load a filter preset",		(one_arg_type)filterLoadXml}   ,
+//        {"filters",		1,"load a filter preset",		(one_arg_type)filterLoadXml}   ,
 //        {"codec-conf",		1,"load a codec configuration",		(one_arg_type )loadVideoCodecConf}   ,
 //        {"vcd-res",		0,"set VCD resolution",			(one_arg_type)setVCD}              ,
 //        {"svcd-res",		0,"set SVCD resolution",		(one_arg_type)setSVCD}              ,

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/gtk_gui.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/gtk_gui.cpp	2009-07-14 15:37:21 UTC (rev 5088)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/gtk_gui.cpp	2009-07-14 15:37:25 UTC (rev 5089)
@@ -13,22 +13,15 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
-
-
 #include "ADM_default.h"
 #include <math.h>
 #include <errno.h>
 
-#include "ADM_lavcodec.h"
 #include "fourcc.h"
-#include "avi_vars.h"
+
 #include "DIA_fileSel.h"
-#include "prototype.h"
 #include "DIA_coreToolkit.h"
-#include "ADM_bitmap.h"
 
-#include "ADM_coreAudio.h"
-
 #include "gui_action.hxx"
 #include "gtkgui.h"
 
@@ -36,21 +29,15 @@
 #include "ADM_render/GUI_render.h"
 #include "ADM_commonUI/GUI_ui.h"
 
-#include "audio_out.h"
-
-#include "ADM_commonUI/DIA_busy.h"
 #include "DIA_working.h"
 #include "DIA_factory.h"
-#include "DIA_enter.h"
 
-#include "ADM_videoFilter.h"
-#include "ADM_videoFilter_internal.h"
-
 #include "ADM_vidMisc.h"
 #include "ADM_preview.h"
 #include "ADM_coreVideoEncoder.h"
 #include "ADM_audioFilter/include/ADM_audioFilterInterface.h"
 
+#include "avi_vars.h"
 
 char * actual_workbench_file;
 renderZoom currentZoom=ZOOM_1_1;
@@ -129,7 +116,7 @@
 uint8_t A_jumpToTime(uint32_t hh,uint32_t mm,uint32_t ss,uint32_t ms);
 //__________
 
-
+extern int  GUI_GoToFrame(uint32_t frame);;
 extern void videoCodecConfigureUI(int codecIndex = -1);
 extern void audioCodecChanged(int newcodec);
 extern void videoCodecChanged(int newcodec);
@@ -171,15 +158,6 @@
         case ACT_BUILT_IN:
                                 DIA_builtin();
                                 return;
-#if BAZOOKA
-        case ACT_GLYPHEDIT:
-                                DIA_glyphEdit();
-                                return;
-
-        case ACT_V2V:
-                                A_vob2vobsub();
-                                return;
-#endif
         case ACT_HANDLE_JOB:
                                 GUI_jobs();
                                 return;
@@ -187,48 +165,36 @@
         case ACT_RECENT1:
         case ACT_RECENT2:
         case ACT_RECENT3:
-                        const char **name;
-						char* fileName;
-                        int rank;
-                                name=prefs->get_lastfiles();
-                                rank=(int)action-ACT_RECENT0;
-                                ADM_assert(name[rank]);
-                                A_openAvi2 (name[rank], 0);
+                const char **name;
+                char* fileName;
+                int rank;
 
+                name=prefs->get_lastfiles();
+                rank=(int)action-ACT_RECENT0;
+                ADM_assert(name[rank]);
+                A_openAvi2 (name[rank], 0);
                 return;
         case ACT_ViewMain: UI_toogleMain();return;
         case ACT_ViewSide: UI_toogleSide();return;
-#ifdef BAZOOKA
-        case ACT_DVB_Ocr:
-        		DIA_ocrDvb();
-        		return;
-
-      case ACT_Ocr:
-                DIA_ocrGen(); //
-                return;
-#endif
       case ACT_AudioConfigure:
 //    		audioCodecSelect();
 		return;
 	case ACT_VideoConfigure:
     		videoEncoder6Configure();
-		return;
+            return;
     case ACT_VideoCodecChanged:
     		nw=UI_getCurrentVCodec();
     		videoEncoder6_SetCurrentEncoder(nw);
-		return;
+            return;
    case ACT_AudioCodecChanged:
-                nw=UI_getCurrentACodec();
-                audioCodecSetByIndex(nw);
-
-		return;
+            nw=UI_getCurrentACodec();
+            audioCodecSetByIndex(nw);
+            return;
     case ACT_PLUGIN_INFO:
             DIA_pluginsInfo();
             return;
     case ACT_RunScript:
-                GUI_FileSelRead (QT_TR_NOOP("Select ECMAScript to Run"),(SELFILE_CB *) A_parseECMAScript);
-
-                        //
+            GUI_FileSelRead (QT_TR_NOOP("Select ECMAScript to Run"),(SELFILE_CB *) A_parseECMAScript);
     		return;
 
     case ACT_RecentFiles:
@@ -242,50 +208,33 @@
     		 DIA_about( );
 		 return;
     case ACT_VideoCodec:
-      //videoCodecSelect ();
       videoEncoder6Configure();
       return;
     case ACT_AudioCodec:
-      //audioCodecSelect ();
       audioCodecConfigure();
       return;
 
     case ACT_AudioFilters:
     //  audioFilter_configureFilters ();
+      audioFilterConfigure();
       return;
     case ACT_Pref:
         if(playing) return;
     	if(DIA_Preferences())
-	{
-//	saveEncoderConfig ();
- 	#ifdef HAVE_AUDIO
-      		AVDM_audioSave();
- 	#endif
-      	prefs->save ();
-	}
-	return;
+        {
+            prefs->save ();
+        }
+        return;
     case ACT_SavePref:
-//      saveEncoderConfig ();
- #ifdef HAVE_AUDIO
-      AVDM_audioSave();
- #endif
-      prefs->save ();
-      return;
-    case ACT_SetLogFile:
-//      GUI_FileSelWrite ("Select log File to use", encoderSetLogFile);
-      GUI_Error_HIG(QT_TR_NOOP("Obsolete"), NULL);
-      return;
-      break;
+        prefs->save ();
+        return;
     case ACT_SetMuxParam:
         {
         int index=UI_GetCurrentFormat();
         ADM_mux_configure(index);
+        return;
         }
-      return;
       break;
-    case ACT_Fast:
-      ADM_assert(0);
-      break;
     case ACT_Exit:
       { uint32_t saveprefsonexit;
          prefs->get(FEATURE_SAVEPREFSONEXIT,&saveprefsonexit);
@@ -295,79 +244,58 @@
       cleanUp ();
       exit (0);
       break;
-/*			case ACT_SelectEncoder:
-
-						A_selectEncoder();
-  	  			return;
-						break;*/
-    case ACT_SelectEncoder:
-      GUI_Error_HIG (QT_TR_NOOP("Obsolete"), NULL);
-      break;
-
     default:
       break;
 
     }
-//------------------------------------------------
 
   if (playing)			// only allow some action
     {
       switch (action)
-	{
-	case ACT_PlayAvi:
+        {
+        case ACT_PlayAvi:
 
-	case ACT_StopAvi:
-	  A_playAvi ();
-	  break;
-	default:
-	  return;
-	}
+        case ACT_StopAvi:
+          A_playAvi ();
+          break;
+        default:
+          return;
+        }
     }
-  // not playing
-  // allow all actions
-
+  // not playing,
   // restict disabled uncoded actions
   if ((int) action >= ACT_DUMMY)
     {
       GUI_Error_HIG (QT_TR_NOOP("Not coded in this version"), NULL);
       return;
-
     }
   // allow only if avi loaded
   if (!avifileinfo)
     {
       switch (action)
-	{
+        {
           case ACT_JOG:
                 break;
-	case ACT_OpenAvi:
-          GUI_FileSelRead (QT_TR_NOOP("Select AVI File..."), (SELFILE_CB *)A_openAvi);
-	  break;
-
-	case ACT_BrokenAvi:
-	  printf ("\n Opening in broken mode...\n");
-          GUI_FileSelRead (QT_TR_NOOP("Select AVI File..."), A_openBrokenAvi);
-	  break;
-
-
-	default:
-	  ;
-	}
-      return;
+          case ACT_OpenAvi:
+                GUI_FileSelRead (QT_TR_NOOP("Select AVI File..."), (SELFILE_CB *)A_openAvi);
+                break;
+          default:
+            break;
+        }
+        return;
     }
 
-//#define TEST_UNPACK
-  // we have an AVI loaded
+  // Dispatch actions, we have a file loaded
   if(action>ACT_NAVIGATE_BEGIN && action < ACT_NAVIGATE_END)
   {
-    HandleAction_Navigate(action);
+    return HandleAction_Navigate(action);
   }
-  else if(action>ACT_SAVE_BEGIN && action < ACT_SAVE_END)
+  if(action>ACT_SAVE_BEGIN && action < ACT_SAVE_END)
   {
-    HandleAction_Save(action);
+    return HandleAction_Save(action);
   }
 
-  else switch (action)
+  switch (action)
     {
        case ACT_JOG:
                 A_jog();
@@ -410,42 +338,24 @@
     			break;
 
     case ACT_ADD_JOB:
-        A_addJob();
-        break;
- 
-    case ACT_CutWizard:
-      ADM_cutWizard ();
-      break;
-    case ACT_SecondAudioTrack:
-                A_externalAudioTrack();
-                break;
+            A_addJob();
+            break;
 
     case ACT_OpenAvi:
-      GUI_FileSelRead (QT_TR_NOOP("Select AVI File..."),(SELFILE_CB *) A_openAvi);
-      break;
-    case ACT_BrokenAvi:
-      GUI_FileSelRead (QT_TR_NOOP("Select AVI File..."), A_openBrokenAvi);
-      break;
+        GUI_FileSelRead (QT_TR_NOOP("Select AVI File..."),(SELFILE_CB *) A_openAvi);
+        break;
     case ACT_AppendAvi:
-      GUI_FileSelRead (QT_TR_NOOP("Select AVI File to Append..."),(SELFILE_CB *) A_appendAvi);
-      break;
-
+        GUI_FileSelRead (QT_TR_NOOP("Select AVI File to Append..."),(SELFILE_CB *) A_appendAvi);
+        break;
     case ACT_AviInfo:
-      DIA_properties ();
-      break;
-  
+        DIA_properties ();
+        break;
 	case ACT_BitRate:
 		 GUI_displayBitrate(  );
-	break;
-
- 
-
+        break;
     case ACT_PlayAvi:
       GUI_PlayAvi ();
       break;
-
-
-
   
 #define TOGGLE_PREVIEW ADM_PREVIEW_OUTPUT
     case ACT_PreviewChanged:
@@ -651,6 +561,7 @@
 
       break;
     case ACT_VideoParameter:
+#if 0
       // first remove current viewer
       if (getPreviewMode()!=ADM_PREVIEW_NONE)
         {
@@ -666,6 +577,7 @@
          admPreview::start();
 //         admPreview::update (curframe);
       }
+#endif
       break;
 
     case ACT_RebuildKF:
@@ -688,13 +600,8 @@
       return;
 
     }
-
-
-  // gtk_widget_grab_focus(sb_frame);
 }
 
-
-
 //_____________________________________________________________
 //
 // Open AVI File
@@ -742,7 +649,7 @@
 
   GUI_close(); // Cleanup
 
-  DIA_StartBusy ();
+//  DIA_StartBusy ();
   /*
   ** we may get a relative path by cmdline
   */
@@ -753,7 +660,7 @@
   {
     res = video_body->addFile (longname);
   }
-  DIA_StopBusy ();
+//  DIA_StopBusy ();
 
   // forget last project file
   if( actual_workbench_file ){
@@ -854,7 +761,7 @@
     }
 
 
-  getFirstVideoFilter(); // reinit first filter
+//  getFirstVideoFilter(); // reinit first filter
 
   // now get audio information if exists
   wavinfo = video_body->getInfo ();	//wavinfo); // will be null if no audio
@@ -884,7 +791,7 @@
   // Draw first frame
   GUI_setAllFrameAndTime();
   A_ResetMarkers();
-  getFirstVideoFilter(); // Rebuild filter if needed
+//  getFirstVideoFilter(); // Rebuild filter if needed
 
   /* Zoom out if needed */
   uint32_t phyW,phyH;
@@ -925,14 +832,14 @@
 
   if (playing)
     return 0;
-  DIA_StartBusy ();
+//  DIA_StartBusy ();
   if (!video_body->addFile (name))
     {
-      DIA_StopBusy ();
+//      DIA_StopBusy ();
       GUI_Error_HIG (QT_TR_NOOP("Something failed when appending"), NULL);
       return 0;
     }
-  DIA_StopBusy ();
+//  DIA_StopBusy ();
 
 
   video_body->dumpSeg ();
@@ -977,7 +884,7 @@
 //      A_changeAudioStream (aviaudiostream, AudioAvi,NULL);
     }
   	//updateVideoFilters ();
-	getFirstVideoFilter();
+//	getFirstVideoFilter();
 
 }
 

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreAudioFilter/include/audiofilter_conf.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreAudioFilter/include/audiofilter_conf.h	2009-07-14 15:37:21 UTC (rev 5088)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreAudioFilter/include/audiofilter_conf.h	2009-07-14 15:37:25 UTC (rev 5089)
@@ -46,10 +46,10 @@
     uint64_t     startTimeInUs;
     int32_t      shiftInMs;
     // Mixer
-    bool         mixerEnabled;
+    uint32_t     mixerEnabled;
     CHANNEL_CONF mixerConf;
     // Resampler
-    bool         resamplerEnabled;
+    uint32_t     resamplerEnabled;
     uint32_t     resamplerFrequency;
     // film2pal & pal2film
     FILMCONV     film2pal;

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioEncoders/lame/audioencoder_lame.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioEncoders/lame/audioencoder_lame.cpp	2009-07-14 15:37:21 UTC (rev 5088)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioEncoders/lame/audioencoder_lame.cpp	2009-07-14 15:37:25 UTC (rev 5089)
@@ -293,6 +293,7 @@
 
   if (diaFactoryRun (QT_TR_NOOP ("LAME Configuration"), 4, elems))
     {
+      lameParam->preset=(ADM_LAME_PRESET)ppreset;
       return 1;
     }
   return 0;



From mean at mail.berlios.de  Tue Jul 14 17:37:27 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Tue, 14 Jul 2009 17:37:27 +0200
Subject: [Avidemux-svn-commit] r5090 -
	branches/avidemux_2.6_branch_mean/avidemux/common/ADM_commonUI
Message-ID: <200907141537.n6EFbRMS028343@sheep.berlios.de>

Author: mean
Date: 2009-07-14 17:37:27 +0200 (Tue, 14 Jul 2009)
New Revision: 5090

Modified:
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_commonUI/DIA_audioFilter.cpp
Log:
[AudioFilter] Fix mono

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_commonUI/DIA_audioFilter.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_commonUI/DIA_audioFilter.cpp	2009-07-14 15:37:25 UTC (rev 5089)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_commonUI/DIA_audioFilter.cpp	2009-07-14 15:37:27 UTC (rev 5090)
@@ -52,10 +52,11 @@
     };
 
  diaElemMenu      eMixer(&vChan,QT_TR_NOOP("_Mixer:"),11,menuMixer);
- 
+ diaElemToggle    tMixer(PX(mixerEnabled),QT_TR_NOOP("Remix:"));
+ tMixer.link(1,&eMixer);
  /************************************/
- diaElem *elems[]={&eFPS, &eMixer, &eResample};
-  if( diaFactoryRun(QT_TR_NOOP("Audio Filters"),3,elems))
+ diaElem *elems[]={&eFPS, &tMixer,&eMixer, &eResample};
+  if( diaFactoryRun(QT_TR_NOOP("Audio Filters"),4,elems))
     {
         config->mixerConf=(CHANNEL_CONF)vChan;
         config->film2pal=(FILMCONV)vFilm;



From mean at mail.berlios.de  Tue Jul 14 18:25:29 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Tue, 14 Jul 2009 18:25:29 +0200
Subject: [Avidemux-svn-commit] r5091 - in
	branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioDecoders:
	ADM_ad_ima_adpcm ADM_ad_lav ADM_ad_ms_adpcm
Message-ID: <200907141625.n6EGPT4R001820@sheep.berlios.de>

Author: mean
Date: 2009-07-14 18:25:28 +0200 (Tue, 14 Jul 2009)
New Revision: 5091

Modified:
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioDecoders/ADM_ad_ima_adpcm/ADM_ad_ima_adpcm.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioDecoders/ADM_ad_lav/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioDecoders/ADM_ad_ms_adpcm/ADM_ad_ms_adpcm.cpp
Log:
[audioEncoder] win32 fixes

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioDecoders/ADM_ad_ima_adpcm/ADM_ad_ima_adpcm.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioDecoders/ADM_ad_ima_adpcm/ADM_ad_ima_adpcm.cpp	2009-07-14 15:37:27 UTC (rev 5090)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioDecoders/ADM_ad_ima_adpcm/ADM_ad_ima_adpcm.cpp	2009-07-14 16:25:28 UTC (rev 5091)
@@ -41,7 +41,7 @@
     \brief
 */
 
- 
+ uint8_t scratchPad[SCRATCH_PAD_SIZE];
 #define IMA_BUFFER 4096*8
 class ADM_AudiocodecImaAdpcm : public     ADM_Audiocodec
 {

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioDecoders/ADM_ad_lav/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioDecoders/ADM_ad_lav/CMakeLists.txt	2009-07-14 15:37:27 UTC (rev 5090)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioDecoders/ADM_ad_lav/CMakeLists.txt	2009-07-14 16:25:28 UTC (rev 5091)
@@ -4,7 +4,7 @@
 	SET(ADM_ad_lav_SRCS ADM_ad_lav.cpp)
 
 	ADD_LIBRARY(ADM_ad_lav SHARED ${ADM_ad_lav_SRCS})
-	TARGET_LINK_LIBRARIES(ADM_ad_lav ADM_core ADM_libavcodec ADM_libavutil)
+	TARGET_LINK_LIBRARIES(ADM_ad_lav ADM_core ADM_coreUtils ADM_libavcodec ADM_libavutil)
 
 	INIT_AUDIO_PLUGIN(ADM_ad_lav)
 	INSTALL_AUDIODECODER(ADM_ad_lav)

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioDecoders/ADM_ad_ms_adpcm/ADM_ad_ms_adpcm.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioDecoders/ADM_ad_ms_adpcm/ADM_ad_ms_adpcm.cpp	2009-07-14 15:37:27 UTC (rev 5090)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioDecoders/ADM_ad_ms_adpcm/ADM_ad_ms_adpcm.cpp	2009-07-14 16:25:28 UTC (rev 5091)
@@ -36,7 +36,7 @@
     \class ADM_AudiocodecUlaw
     \brief
 */
-
+uint8_t scratchPad[SCRATCH_PAD_SIZE];
 class ADM_AudiocodecMsAdpcm : public     ADM_Audiocodec
 {
 	protected:



From mean at mail.berlios.de  Tue Jul 14 21:14:22 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Tue, 14 Jul 2009 21:14:22 +0200
Subject: [Avidemux-svn-commit] r5092 - in
	branches/avidemux_2.5_branch_gruntster/avidemux: .
	ADM_libraries/ADM_utilities
Message-ID: <200907141914.n6EJEMgj006912@sheep.berlios.de>

Author: mean
Date: 2009-07-14 21:14:22 +0200 (Tue, 14 Jul 2009)
New Revision: 5092

Modified:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/prefs.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/prefs.h
   branches/avidemux_2.5_branch_gruntster/avidemux/prefs.in
Log:
[Prefs] Merge patch so that avs4avidemux works without modification

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/prefs.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/prefs.cpp	2009-07-14 16:25:28 UTC (rev 5091)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/prefs.cpp	2009-07-14 19:14:22 UTC (rev 5092)
@@ -89,6 +89,10 @@
 	{"filters.subtitle.vpercent",		INT,	"0",	NULL,	"0",	"255"	},
 	{"filters.subtitle.selfadjustable",		UINT,	"0",	NULL,	"0",	"1"	},
 	{"filters.subtitle.usebackgroundcolor",		UINT,	"0",	NULL,	"0",	"1"	},
+	{"filters.avsfilter.avs_script",		FILENAME,"",	NULL, NULL, NULL },
+	{"filters.avsfilter.avs_loader",		FILENAME,"",	NULL, NULL, NULL },
+	{"filters.avsfilter.pipe_timeout",		UINT,	"10",	NULL,	"1",	"30"	},
+	{"filters.avsfilter.debug_msg",		UINT,	"1",	NULL,	"0",	"1"	},
 	{"settings.mpegsplit",	UINT,	"790",	NULL,	"400",	"5000"	},
 #ifdef __WIN32
 	{"device.audiodevice",		STRING,"WIN32",NULL, NULL, NULL },
@@ -133,7 +137,7 @@
 	{"priority.playback",		UINT,	"0",	NULL,	"0",	"4"	}
 };
 
-int num_opts = 67;
+int num_opts = 71;
 // </prefs_gen>
 
 #ifdef USE_LIBXML2

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/prefs.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/prefs.h	2009-07-14 16:25:28 UTC (rev 5091)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/prefs.h	2009-07-14 19:14:22 UTC (rev 5092)
@@ -37,6 +37,10 @@
 	FILTERS_SUBTITLE_VPERCENT,
 	FILTERS_SUBTITLE_SELFADJUSTABLE,
 	FILTERS_SUBTITLE_USEBACKGROUNDCOLOR,
+	FILTERS_AVSFILTER_AVS_SCRIPT,
+	FILTERS_AVSFILTER_AVS_LOADER,
+	FILTERS_AVSFILTER_PIPE_TIMEOUT,
+	FILTERS_AVSFILTER_DEBUG_MSG,
 	SETTINGS_MPEGSPLIT,
 	DEVICE_AUDIODEVICE,
 	DEVICE_AUDIO_ALSA_DEVICE,

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/prefs.in
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/prefs.in	2009-07-14 16:25:28 UTC (rev 5091)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/prefs.in	2009-07-14 19:14:22 UTC (rev 5092)
@@ -44,6 +44,10 @@
 filters.subtitle.vpercent,		INT,	0,	0,	255
 filters.subtitle.selfadjustable,	UINT,	0,	0,	1
 filters.subtitle.usebackgroundcolor,	UINT,	0,	0,	1
+filters.avsfilter.avs_script,		FILENAME,	""
+filters.avsfilter.avs_loader,		FILENAME,	""
+filters.avsfilter.pipe_timeout,		UINT,	10,     1,       30
+filters.avsfilter.debug_msg,		UINT,	1,      0,       1
 # codec metasettings for mpeg2enc based
 settings.mpegsplit, 			UINT,	790,	400,	5000
 #ifdef __WIN32



From mean at mail.berlios.de  Tue Jul 14 21:22:59 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Tue, 14 Jul 2009 21:22:59 +0200
Subject: [Avidemux-svn-commit] r5093 - in
	branches/avidemux_2.6_branch_mean/avidemux_core: ADM_core/src
	ADM_coreUtils/include ADM_coreUtils/src
Message-ID: <200907141922.n6EJMxuK007474@sheep.berlios.de>

Author: mean
Date: 2009-07-14 21:22:57 +0200 (Tue, 14 Jul 2009)
New Revision: 5093

Added:
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/src/prefs.in
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/src/prefs_gen.pl
Removed:
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_core/src/prefs.in
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_core/src/prefs_gen.pl
Modified:
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/include/prefs.h
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/src/prefs.cpp
Log:
[prefs] Merged avs4avidemux patch

Deleted: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_core/src/prefs.in
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_core/src/prefs.in	2009-07-14 19:14:22 UTC (rev 5092)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_core/src/prefs.in	2009-07-14 19:22:57 UTC (rev 5093)
@@ -1,102 +0,0 @@
-#
-# this file will be used as input for pref.h and pref.cpp
-#
-
-# option_name :: name without '-'; the dot is the separator used for the xml tree
-#		 '.' will be changed to '_'
-#		 all letters will be changed to there upper case equivalents
-# type        :: ( UINT | INT | ULONG | LONG | FLOAT | STRING )
-# value       :: default value; used if no xml value available
-# minimum     :: the smallest value this option can have (ignored for STRING)
-# maximum     :: the largest  value this option can have (ignored for STRING)
-
-# option name				type	value	minimum	maximum (incl.)
-codecs.svcd.enctype,			UINT,	0,	0,	99999
-codecs.svcd.bitrate,			UINT,	1500000,16000,	2748000
-codecs.svcd.quantizer,			UINT,	4,	2,	31
-codecs.svcd.finalsize,			UINT,	700,	0,	99999
-codecs.svcd.interlaced,			UINT,	0,	0,	1
-codecs.svcd.bff,			UINT,	0,	0,	1
-codecs.svcd.widescreen,			UINT,	0,	0,	1
-codecs.svcd.matrix,			UINT,	0,	0,	99999
-codecs.svcd.gopsize,			UINT,	12,	0,	99999
-codecs.svcd.maxbitrate,			UINT,	2500,	0,	2748
-codecs.dvd.enctype,			UINT,	0,	0,	99999
-codecs.dvd.bitrate,			UINT,	1500000,16000,	9900000
-codecs.dvd.quantizer,			UINT,	4,	2,	31
-codecs.dvd.finalsize,			UINT,	700,	0,	99999
-codecs.dvd.interlaced,			UINT,	0,	0,	1
-codecs.dvd.bff,				UINT,	0,	0,	1
-codecs.dvd.widescreen,			UINT,	0,	0,	1
-codecs.dvd.matrix,			UINT,	0,	0,	99999
-codecs.dvd.gopsize,			UINT,	12,	0,	99999
-codecs.dvd.maxbitrate,			UINT,	9000,	0,	9900
-codecs.xvid.enctype,			UINT,	0,	0,	99999
-codecs.xvid.quantizer,			UINT,	4,	2,	32
-codecs.xvid.bitrate,			UINT,	1500000,17,	5900000
-codecs.xvid.finalsize,			UINT,	700,	0,	3999
-codecs.preferredcodec,			STRING,	FFmpeg4
-filters.subtitle.fontname,		FILENAME, "/usr/share/fonts/truetype/DejaVuSans.ttf"
-filters.subtitle.charset,		STRING, "ISO-8859-1"
-filters.subtitle.fontsize,		UINT,	24,	1,	576
-filters.subtitle.ypercent,		INT,	255,	0,	255
-filters.subtitle.upercent,		INT,	0,	0,	255
-filters.subtitle.vpercent,		INT,	0,	0,	255
-filters.subtitle.selfadjustable,	UINT,	0,	0,	1
-filters.subtitle.usebackgroundcolor,	UINT,	0,	0,	1
-# codec metasettings for mpeg2enc based
-settings.mpegsplit, 			UINT,	790,	400,	5000
-device.audiodevice,			STRING,	ALSA
-device.audio.alsa_device,               STRING, "dmix"
-device.videodevice,			UINT,	0,	0,	10
-# Posproc
-default.postproc_type,			UINT,	3,	0,	7
-default.postproc_value,			UINT,	3,	0,	5
-# lastfiles
-lastfiles.file1,			FILENAME,	""
-lastfiles.file2,			FILENAME,	""
-lastfiles.file3,			FILENAME,	""
-lastfiles.file4,			FILENAME,	""
-lastdir_read,				FILENAME,	""
-lastdir_write,				FILENAME,	""
-# lame
-lame_cli,				STRING, ""
-pipe_cmd,				STRING, ""
-pipe_param,				STRING, ""
-lame_path,				STRING, ""
-toolame_path,				STRING, ""
-lvemux_path,				STRING, ""
-requant_path,				STRING, ""
-# 0 - no messages, 1 - only error messages, 2 - all messages
-message_level,				UINT,	2,	0,	2
-# feature
-feature.swap_if_A_greater_than_B,	UINT,   1,      0,      1
-feature.svcdres.preferedsourceratio,	STRING, "1:1"
-feature.saveprefsonexit,		UINT,	1,	0,	1
-feature.ignoresavedmarkers,		UINT,	0,	0,	1
-feature.disable_nuv_resync,		UINT,	0,	0,	1
-feature.tryautoidx,			UINT,	0,	0,	1
-feature.use_odml,                       UINT,   0,      0,      1
-feature.use_systray,                    UINT,   0,      0,      1
-feature.reuse_2pass_log,                UINT,   0,      0,      1
-feature.audiobar_uses_master,           UINT,   0,      0,      1
-feature.threading.lavc,                 UINT,   0,      0,      32
-feature.cpu_caps,  		                UINT,   4294967295,      0,      4294967295
-feature.mpeg_no_limit,                  UINT,   0,      0,      1
-feature.auto_buildmap,                  UINT,   0,      0,      1
-feature.auto_rebuildindex,              UINT,   0,      0,      1
-feature.auto_unpack,                    UINT,   0,      0,      1
-# prologic 1/2
-downmixing.prologic,			UINT,	2,	0,	2
-filters.autoload.path,                  STRING, "/tmp/"
-filters.autoload.active,                UINT,   0,      0,      1
-feature.alternate_mp3_tag,              UINT,   1,      0,      1
-#
-feature.vdpau,                          UINT,   0,      0,      1
-# Global glyphset file
-feature.global_glyph.active,            UINT,   1,      0,      1
-feature.global_glyph.name,              STRING, ""
-# priority
-priority.encoding,          UINT,   3,      0,      4
-priority.indexing,          UINT,   3,      0,      4
-priority.playback,          UINT,   0,      0,      4

Deleted: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_core/src/prefs_gen.pl
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_core/src/prefs_gen.pl	2009-07-14 19:14:22 UTC (rev 5092)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_core/src/prefs_gen.pl	2009-07-14 19:22:57 UTC (rev 5093)
@@ -1,130 +0,0 @@
-#!/usr/bin/perl
-
-use strict;
-use IO::Handle;
-
-my $srcdir=".";
-my $in  = "$srcdir/prefs.in";
-my $h   = "$srcdir/prefs.h";
-my $cpp = "$srcdir/ADM_coreUtils/src/prefs.cpp";
-#print "In:$in\n";
-my $h_str = "typedef enum {\n";
-my $cpp_str = "typedef enum {\n".
-              "\tUINT,\n".
-              "\tINT,\n".
-              "\tULONG,\n".
-              "\tLONG,\n".
-              "\tFLOAT,\n".
-              "\tSTRING,\n".
-              "\tFILENAME\n".
-              "} types;\n".
-              "\n".
-              "typedef struct {\n".
-              "\tconst char *name;\n".
-              "\ttypes type;\n".
-              "\tconst char *default_val;\n".
-              "\tchar *current_val;\n".
-              "\tconst char *minimum;\n".
-              "\tconst char *maximum;\n".
-              "} opt_def;\n".
-              "\n".
-              "static opt_def opt_defs [] = {\n";
-
-my $fd = new IO::Handle;
-my @data;
-my $flag;
-my $num_opts = 0;
-
-open($fd,"< $in") or die;
-while(<$fd>){
-	chomp;
-	s/#.*$//;
-	next if( /^[ 	]*$/ );
-	#     optname       type           value  rest
-        if( /^([^,]+)\s*,\s*([A-Z]+)\s*,\s*([^,]+)(.*)$/ ){
-	   my ($N,$a,$b,$c,$d,$e) = ($1,uc($1),$2,$3,$4,$4);
-		$a       =~ s/\./_/g;
-		$h_str   .= "\t$a,\n";
-		$cpp_str .= "\t{\"$N\",";
-		$cpp_str .= "\t" if( length($c)%8 != 3 );
-		$cpp_str .= "\t$b,";
-		if(( $b eq "STRING" )||($b eq "FILENAME")){
-			$c =~ s/^"//;
-			$c =~ s/"$//;
-                        $c =~ s/@/,/; # Replace % by , needed by alsa stuff
-
-		}else{
-			$cpp_str .= "\t";
-		}
-		$cpp_str .= "\"$c\",";
-		$cpp_str .= "\t" if( length($c) < 5 );
-		$cpp_str .= "NULL,";
-		# max min processing
-		if(( $b eq "STRING" )||($b eq "FILENAME")){
-			$cpp_str .= " NULL, NULL },\n";
-		}else{
-			$d =~ s/^\s*,\s*//;
-			($d,$e) = split(",",$d);                        
-			$d =~ s/\s*$//;
-			$e =~ s/^\s*//;
-			$e =~ s/\s*$//;
-			$cpp_str .= "\t\"$d\",";
-			$cpp_str .= "\t" if( length($d) < 5 );
-			$cpp_str .= "\"$e\"";
-			$cpp_str .= "\t" if( length($e) < 5 );
-			$cpp_str .= "},\n";
-			die "value($a) < min : $c < $d\n" if( $c < $d );
-		}
-		$num_opts++;
-	}else{
-		die "parse error in \"$in\" line \"$_\".";
-	}
-}
-close($fd);
-
-$h_str    = substr($h_str,0,-2); # strip out ",\n"
-$h_str   .= "\n} options;\n";
-$cpp_str  = substr($cpp_str,0,-2); # strip out ",\n"
-$cpp_str .= "\n};\n\nint num_opts = $num_opts;\n";
-
- at data = ();
-$flag = 0;
-open($fd,"< $h") or die;
-while(<$fd>){
-	if( /^\/\/ <\/prefs_gen>/ ){
-		$flag = 2;
-	}
-	if( $flag == 0 || $flag == 2 ){
-		push @data,$_;
-	}
-	if( /^\/\/ <prefs_gen>/ ){
-		$flag = 1;
-		push @data,$h_str;
-	}
-}
-close($fd);
-open($fd,"> $h") or die;
-print $fd join("", at data);
-close($fd);
-
- at data = ();
-$flag = 0;
-open($fd,"< $cpp") or die($cpp);
-while(<$fd>){
-        if( /^\/\/ <\/prefs_gen>/ ){
-                $flag = 2;
-        }
-        if( $flag == 0 || $flag == 2 ){
-                push @data,$_;
-        }
-        if( /^\/\/ <prefs_gen>/ ){
-                $flag = 1;
-                push @data,$cpp_str;
-        }
-}
-close($fd);
-open($fd,"> $cpp") or die;
-print $fd join("", at data);
-close($fd);
-
-exit(0);

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/include/prefs.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/include/prefs.h	2009-07-14 19:14:22 UTC (rev 5092)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/include/prefs.h	2009-07-14 19:22:57 UTC (rev 5093)
@@ -41,6 +41,10 @@
 	FILTERS_SUBTITLE_VPERCENT,
 	FILTERS_SUBTITLE_SELFADJUSTABLE,
 	FILTERS_SUBTITLE_USEBACKGROUNDCOLOR,
+	FILTERS_AVSFILTER_AVS_SCRIPT,
+	FILTERS_AVSFILTER_AVS_LOADER,
+	FILTERS_AVSFILTER_PIPE_TIMEOUT,
+	FILTERS_AVSFILTER_DEBUG_MSG,
 	SETTINGS_MPEGSPLIT,
 	DEVICE_AUDIODEVICE,
 	DEVICE_AUDIO_ALSA_DEVICE,

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/src/prefs.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/src/prefs.cpp	2009-07-14 19:14:22 UTC (rev 5092)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/src/prefs.cpp	2009-07-14 19:22:57 UTC (rev 5093)
@@ -84,6 +84,10 @@
 	{"filters.subtitle.vpercent",		INT,	"0",	NULL,	"0",	"255"	},
 	{"filters.subtitle.selfadjustable",		UINT,	"0",	NULL,	"0",	"1"	},
 	{"filters.subtitle.usebackgroundcolor",		UINT,	"0",	NULL,	"0",	"1"	},
+	{"filters.avsfilter.avs_script",		FILENAME,"",	NULL, NULL, NULL },
+	{"filters.avsfilter.avs_loader",		FILENAME,"",	NULL, NULL, NULL },
+	{"filters.avsfilter.pipe_timeout",		UINT,	"10",	NULL,	"1",	"30"	},
+	{"filters.avsfilter.debug_msg",		UINT,	"1",	NULL,	"0",	"1"	},
 	{"settings.mpegsplit",	UINT,	"790",	NULL,	"400",	"5000"	},
 	{"device.audiodevice",		STRING,"ALSA",	NULL, NULL, NULL },
 	{"device.audio.alsa_device",		STRING,"dmix",	NULL, NULL, NULL },
@@ -132,7 +136,7 @@
 	{"priority.playback",		UINT,	"0",	NULL,	"0",	"4"	}
 };
 
-int num_opts = 79;
+int num_opts = 83;
 // </prefs_gen>
 
 

Copied: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/src/prefs.in (from rev 5091, branches/avidemux_2.6_branch_mean/avidemux_core/ADM_core/src/prefs.in)
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_core/src/prefs.in	2009-07-14 16:25:28 UTC (rev 5091)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/src/prefs.in	2009-07-14 19:22:57 UTC (rev 5093)
@@ -0,0 +1,106 @@
+#
+# this file will be used as input for pref.h and pref.cpp
+#
+
+# option_name :: name without '-'; the dot is the separator used for the xml tree
+#		 '.' will be changed to '_'
+#		 all letters will be changed to there upper case equivalents
+# type        :: ( UINT | INT | ULONG | LONG | FLOAT | STRING )
+# value       :: default value; used if no xml value available
+# minimum     :: the smallest value this option can have (ignored for STRING)
+# maximum     :: the largest  value this option can have (ignored for STRING)
+
+# option name				type	value	minimum	maximum (incl.)
+codecs.svcd.enctype,			UINT,	0,	0,	99999
+codecs.svcd.bitrate,			UINT,	1500000,16000,	2748000
+codecs.svcd.quantizer,			UINT,	4,	2,	31
+codecs.svcd.finalsize,			UINT,	700,	0,	99999
+codecs.svcd.interlaced,			UINT,	0,	0,	1
+codecs.svcd.bff,			UINT,	0,	0,	1
+codecs.svcd.widescreen,			UINT,	0,	0,	1
+codecs.svcd.matrix,			UINT,	0,	0,	99999
+codecs.svcd.gopsize,			UINT,	12,	0,	99999
+codecs.svcd.maxbitrate,			UINT,	2500,	0,	2748
+codecs.dvd.enctype,			UINT,	0,	0,	99999
+codecs.dvd.bitrate,			UINT,	1500000,16000,	9900000
+codecs.dvd.quantizer,			UINT,	4,	2,	31
+codecs.dvd.finalsize,			UINT,	700,	0,	99999
+codecs.dvd.interlaced,			UINT,	0,	0,	1
+codecs.dvd.bff,				UINT,	0,	0,	1
+codecs.dvd.widescreen,			UINT,	0,	0,	1
+codecs.dvd.matrix,			UINT,	0,	0,	99999
+codecs.dvd.gopsize,			UINT,	12,	0,	99999
+codecs.dvd.maxbitrate,			UINT,	9000,	0,	9900
+codecs.xvid.enctype,			UINT,	0,	0,	99999
+codecs.xvid.quantizer,			UINT,	4,	2,	32
+codecs.xvid.bitrate,			UINT,	1500000,17,	5900000
+codecs.xvid.finalsize,			UINT,	700,	0,	3999
+codecs.preferredcodec,			STRING,	FFmpeg4
+filters.subtitle.fontname,		FILENAME, "/usr/share/fonts/truetype/DejaVuSans.ttf"
+filters.subtitle.charset,		STRING, "ISO-8859-1"
+filters.subtitle.fontsize,		UINT,	24,	1,	576
+filters.subtitle.ypercent,		INT,	255,	0,	255
+filters.subtitle.upercent,		INT,	0,	0,	255
+filters.subtitle.vpercent,		INT,	0,	0,	255
+filters.subtitle.selfadjustable,	UINT,	0,	0,	1
+filters.subtitle.usebackgroundcolor,	UINT,	0,	0,	1
+filters.avsfilter.avs_script,		FILENAME,	""
+filters.avsfilter.avs_loader,		FILENAME,	""
+filters.avsfilter.pipe_timeout,		UINT,	10,     1,       30
+filters.avsfilter.debug_msg,		UINT,	1,      0,       1
+# codec metasettings for mpeg2enc based
+settings.mpegsplit, 			UINT,	790,	400,	5000
+device.audiodevice,			STRING,	ALSA
+device.audio.alsa_device,               STRING, "dmix"
+device.videodevice,			UINT,	0,	0,	10
+# Posproc
+default.postproc_type,			UINT,	3,	0,	7
+default.postproc_value,			UINT,	3,	0,	5
+# lastfiles
+lastfiles.file1,			FILENAME,	""
+lastfiles.file2,			FILENAME,	""
+lastfiles.file3,			FILENAME,	""
+lastfiles.file4,			FILENAME,	""
+lastdir_read,				FILENAME,	""
+lastdir_write,				FILENAME,	""
+# lame
+lame_cli,				STRING, ""
+pipe_cmd,				STRING, ""
+pipe_param,				STRING, ""
+lame_path,				STRING, ""
+toolame_path,				STRING, ""
+lvemux_path,				STRING, ""
+requant_path,				STRING, ""
+# 0 - no messages, 1 - only error messages, 2 - all messages
+message_level,				UINT,	2,	0,	2
+# feature
+feature.swap_if_A_greater_than_B,	UINT,   1,      0,      1
+feature.svcdres.preferedsourceratio,	STRING, "1:1"
+feature.saveprefsonexit,		UINT,	1,	0,	1
+feature.ignoresavedmarkers,		UINT,	0,	0,	1
+feature.disable_nuv_resync,		UINT,	0,	0,	1
+feature.tryautoidx,			UINT,	0,	0,	1
+feature.use_odml,                       UINT,   0,      0,      1
+feature.use_systray,                    UINT,   0,      0,      1
+feature.reuse_2pass_log,                UINT,   0,      0,      1
+feature.audiobar_uses_master,           UINT,   0,      0,      1
+feature.threading.lavc,                 UINT,   0,      0,      32
+feature.cpu_caps,  		                UINT,   4294967295,      0,      4294967295
+feature.mpeg_no_limit,                  UINT,   0,      0,      1
+feature.auto_buildmap,                  UINT,   0,      0,      1
+feature.auto_rebuildindex,              UINT,   0,      0,      1
+feature.auto_unpack,                    UINT,   0,      0,      1
+# prologic 1/2
+downmixing.prologic,			UINT,	2,	0,	2
+filters.autoload.path,                  STRING, "/tmp/"
+filters.autoload.active,                UINT,   0,      0,      1
+feature.alternate_mp3_tag,              UINT,   1,      0,      1
+#
+feature.vdpau,                          UINT,   0,      0,      1
+# Global glyphset file
+feature.global_glyph.active,            UINT,   1,      0,      1
+feature.global_glyph.name,              STRING, ""
+# priority
+priority.encoding,          UINT,   3,      0,      4
+priority.indexing,          UINT,   3,      0,      4
+priority.playback,          UINT,   0,      0,      4

Copied: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/src/prefs_gen.pl (from rev 5091, branches/avidemux_2.6_branch_mean/avidemux_core/ADM_core/src/prefs_gen.pl)
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_core/src/prefs_gen.pl	2009-07-14 16:25:28 UTC (rev 5091)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/src/prefs_gen.pl	2009-07-14 19:22:57 UTC (rev 5093)
@@ -0,0 +1,130 @@
+#!/usr/bin/perl
+
+use strict;
+use IO::Handle;
+
+my $srcdir=".";
+my $in  = "$srcdir/prefs.in";
+my $h   = "$srcdir/../include/prefs.h";
+my $cpp = "$srcdir/prefs.cpp";
+#print "In:$in\n";
+my $h_str = "typedef enum {\n";
+my $cpp_str = "typedef enum {\n".
+              "\tUINT,\n".
+              "\tINT,\n".
+              "\tULONG,\n".
+              "\tLONG,\n".
+              "\tFLOAT,\n".
+              "\tSTRING,\n".
+              "\tFILENAME\n".
+              "} types;\n".
+              "\n".
+              "typedef struct {\n".
+              "\tconst char *name;\n".
+              "\ttypes type;\n".
+              "\tconst char *default_val;\n".
+              "\tchar *current_val;\n".
+              "\tconst char *minimum;\n".
+              "\tconst char *maximum;\n".
+              "} opt_def;\n".
+              "\n".
+              "static opt_def opt_defs [] = {\n";
+
+my $fd = new IO::Handle;
+my @data;
+my $flag;
+my $num_opts = 0;
+
+open($fd,"< $in") or die;
+while(<$fd>){
+	chomp;
+	s/#.*$//;
+	next if( /^[ 	]*$/ );
+	#     optname       type           value  rest
+        if( /^([^,]+)\s*,\s*([A-Z]+)\s*,\s*([^,]+)(.*)$/ ){
+	   my ($N,$a,$b,$c,$d,$e) = ($1,uc($1),$2,$3,$4,$4);
+		$a       =~ s/\./_/g;
+		$h_str   .= "\t$a,\n";
+		$cpp_str .= "\t{\"$N\",";
+		$cpp_str .= "\t" if( length($c)%8 != 3 );
+		$cpp_str .= "\t$b,";
+		if(( $b eq "STRING" )||($b eq "FILENAME")){
+			$c =~ s/^"//;
+			$c =~ s/"$//;
+                        $c =~ s/@/,/; # Replace % by , needed by alsa stuff
+
+		}else{
+			$cpp_str .= "\t";
+		}
+		$cpp_str .= "\"$c\",";
+		$cpp_str .= "\t" if( length($c) < 5 );
+		$cpp_str .= "NULL,";
+		# max min processing
+		if(( $b eq "STRING" )||($b eq "FILENAME")){
+			$cpp_str .= " NULL, NULL },\n";
+		}else{
+			$d =~ s/^\s*,\s*//;
+			($d,$e) = split(",",$d);                        
+			$d =~ s/\s*$//;
+			$e =~ s/^\s*//;
+			$e =~ s/\s*$//;
+			$cpp_str .= "\t\"$d\",";
+			$cpp_str .= "\t" if( length($d) < 5 );
+			$cpp_str .= "\"$e\"";
+			$cpp_str .= "\t" if( length($e) < 5 );
+			$cpp_str .= "},\n";
+			die "value($a) < min : $c < $d\n" if( $c < $d );
+		}
+		$num_opts++;
+	}else{
+		die "parse error in \"$in\" line \"$_\".";
+	}
+}
+close($fd);
+
+$h_str    = substr($h_str,0,-2); # strip out ",\n"
+$h_str   .= "\n} options;\n";
+$cpp_str  = substr($cpp_str,0,-2); # strip out ",\n"
+$cpp_str .= "\n};\n\nint num_opts = $num_opts;\n";
+
+ at data = ();
+$flag = 0;
+open($fd,"< $h") or die;
+while(<$fd>){
+	if( /^\/\/ <\/prefs_gen>/ ){
+		$flag = 2;
+	}
+	if( $flag == 0 || $flag == 2 ){
+		push @data,$_;
+	}
+	if( /^\/\/ <prefs_gen>/ ){
+		$flag = 1;
+		push @data,$h_str;
+	}
+}
+close($fd);
+open($fd,"> $h") or die;
+print $fd join("", at data);
+close($fd);
+
+ at data = ();
+$flag = 0;
+open($fd,"< $cpp") or die($cpp);
+while(<$fd>){
+        if( /^\/\/ <\/prefs_gen>/ ){
+                $flag = 2;
+        }
+        if( $flag == 0 || $flag == 2 ){
+                push @data,$_;
+        }
+        if( /^\/\/ <prefs_gen>/ ){
+                $flag = 1;
+                push @data,$cpp_str;
+        }
+}
+close($fd);
+open($fd,"> $cpp") or die;
+print $fd join("", at data);
+close($fd);
+
+exit(0);



From gruntster at mail.berlios.de  Tue Jul 14 22:32:33 2009
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Tue, 14 Jul 2009 22:32:33 +0200
Subject: [Avidemux-svn-commit] r5094 - in
	branches/avidemux_2.5_branch_gruntster: cmake
	plugins/ADM_audioDecoders plugins/ADM_audioDecoders/ADM_ad_opencore
Message-ID: <200907142032.n6EKWXm1015353@sheep.berlios.de>

Author: gruntster
Date: 2009-07-14 22:32:26 +0200 (Tue, 14 Jul 2009)
New Revision: 5094

Added:
   branches/avidemux_2.5_branch_gruntster/cmake/admCheckOpencore.cmake
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_audioDecoders/ADM_ad_opencore/
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_audioDecoders/ADM_ad_opencore/ADM_ad_opencore.cpp
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_audioDecoders/ADM_ad_opencore/CMakeLists.txt
Modified:
   branches/avidemux_2.5_branch_gruntster/cmake/admPluginConfigSummary.cmake
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_audioDecoders/CMakeLists.txt
Log:
[amrnb] opencore-amrnb audio decoder plugin

Added: branches/avidemux_2.5_branch_gruntster/cmake/admCheckOpencore.cmake
===================================================================
--- branches/avidemux_2.5_branch_gruntster/cmake/admCheckOpencore.cmake	2009-07-14 19:22:57 UTC (rev 5093)
+++ branches/avidemux_2.5_branch_gruntster/cmake/admCheckOpencore.cmake	2009-07-14 20:32:26 UTC (rev 5094)
@@ -0,0 +1,20 @@
+MACRO(checkOpencore)
+	IF (NOT OPENCORE_CHECKED)
+		OPTION(OPENCORE "" ON)
+
+		MESSAGE(STATUS "Checking for opencore-amr")
+		MESSAGE(STATUS "*************************")
+
+		IF (OPENCORE)
+			FIND_HEADER_AND_LIB(OPENCORE_AMRNB opencore-amrnb/interf_dec.h opencore-amrnb Decoder_Interface_init)
+			PRINT_LIBRARY_INFO("opencore-amrnb" OPENCORE_AMRNB_FOUND "${OPENCORE_AMRNB_INCLUDE_DIR}" "${OPENCORE_AMRNB_LIBRARY_DIR}")
+		ELSE (OPENCORE)
+			MESSAGE("${MSG_DISABLE_OPTION}")
+		ENDIF (OPENCORE)
+
+		SET(ENV{ADM_HAVE_OPENCORE_AMRNB} ${OPENCORE_AMRNB_FOUND})
+		SET(OPENCORE_CHECKED 1)
+
+		MESSAGE("")
+	ENDIF (NOT OPENCORE_CHECKED)
+ENDMACRO(checkOpencore)
\ No newline at end of file

Modified: branches/avidemux_2.5_branch_gruntster/cmake/admPluginConfigSummary.cmake
===================================================================
--- branches/avidemux_2.5_branch_gruntster/cmake/admPluginConfigSummary.cmake	2009-07-14 19:22:57 UTC (rev 5093)
+++ branches/avidemux_2.5_branch_gruntster/cmake/admPluginConfigSummary.cmake	2009-07-14 20:32:26 UTC (rev 5094)
@@ -17,29 +17,30 @@
 	ENDIF (${PROCEED})
 ENDMACRO(ADM_DISPLAY)
 
-MESSAGE("*********************")
-MESSAGE("***    SUMMARY    ***")
-MESSAGE("*********************")
-MESSAGE("***  Video Codec  ***")
-ADM_DISPLAY("x264      " "$ENV{ADM_HAVE_X264}")
-ADM_DISPLAY("Xvid      " "$ENV{ADM_HAVE_XVID}")
+MESSAGE("*************************")
+MESSAGE("***      SUMMARY      ***")
+MESSAGE("*************************")
+MESSAGE("***    Video Codec    ***")
+ADM_DISPLAY("x264          " "$ENV{ADM_HAVE_X264}")
+ADM_DISPLAY("Xvid          " "$ENV{ADM_HAVE_XVID}")
 
-MESSAGE("***  Audio Codec  ***")
-ADM_DISPLAY("amrnb     " "$ENV{ADM_HAVE_AMRNB}")
-ADM_DISPLAY("FAAD      " "$ENV{ADM_HAVE_FAAD}")
-ADM_DISPLAY("libdca    " "$ENV{ADM_HAVE_LIBDCA}")
+MESSAGE("***    Audio Codec    ***")
+ADM_DISPLAY("amrnb         " "$ENV{ADM_HAVE_AMRNB}")
+ADM_DISPLAY("FAAD          " "$ENV{ADM_HAVE_FAAD}")
+ADM_DISPLAY("libdca        " "$ENV{ADM_HAVE_LIBDCA}")
+ADM_DISPLAY("opencore-amrnb" "$ENV{ADM_HAVE_OPENCORE_AMRNB}")
 
-MESSAGE("*** Miscellaneous ***")
-ADM_DISPLAY("FontConfig" "$ENV{ADM_HAVE_FONTCONFIG}")
-ADM_DISPLAY("FreeType2 " "${FREETYPE2_FOUND}")
-ADM_DISPLAY("gettext   " "${HAVE_GETTEXT}")
+MESSAGE("***   Miscellaneous   ***")
+ADM_DISPLAY("FontConfig    " "$ENV{ADM_HAVE_FONTCONFIG}")
+ADM_DISPLAY("FreeType2     " "${FREETYPE2_FOUND}")
+ADM_DISPLAY("gettext       " "${HAVE_GETTEXT}")
 
-MESSAGE("*********************")
+MESSAGE("*************************")
 
 IF (CMAKE_BUILD_TYPE STREQUAL "Debug")
-	MESSAGE("***  Debug Build  ***")
+	MESSAGE("***    Debug Build    ***")
 ELSE (CMAKE_BUILD_TYPE STREQUAL "Debug")
-	MESSAGE("*** Release Build ***")
+	MESSAGE("***   Release Build   ***")
 ENDIF(CMAKE_BUILD_TYPE STREQUAL "Debug")
 
-MESSAGE("*********************")
+MESSAGE("*************************")

Added: branches/avidemux_2.5_branch_gruntster/plugins/ADM_audioDecoders/ADM_ad_opencore/ADM_ad_opencore.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_audioDecoders/ADM_ad_opencore/ADM_ad_opencore.cpp	2009-07-14 19:22:57 UTC (rev 5093)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_audioDecoders/ADM_ad_opencore/ADM_ad_opencore.cpp	2009-07-14 20:32:26 UTC (rev 5094)
@@ -0,0 +1,119 @@
+/***************************************************************************
+                     ADM_ad_opencore.cpp  -  description
+                     -----------------------------------
+
+    begin                : Tue Jul 14 2009
+    copyright            : (C) 2009 by mean/Gruntster
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+#include "ADM_default.h"
+#include "ADM_ad_plugin.h"
+
+extern "C" {
+#include <opencore-amrnb/interf_dec.h>
+};
+
+#define ADM_AMR_BUFFER (16 * 1024) // 16 kB internal
+
+class ADM_AudiocodecOpencoreAmrNb : public ADM_Audiocodec
+{
+protected:
+	void *state;
+	uint8_t _buffer[ADM_AMR_BUFFER];
+	uint32_t _head, _tail;
+
+public:
+	ADM_AudiocodecOpencoreAmrNb(uint32_t fourcc, WAVHeader *info,uint32_t extraLength,uint8_t *extraDatab);
+	~ADM_AudiocodecOpencoreAmrNb();
+	uint8_t beginDecompress(void);
+	uint8_t endDecompress(void);
+	uint8_t run(uint8_t *inptr, uint32_t nbIn, float *outptr, uint32_t *nbOut);
+	uint8_t isCompressed(void) { return 1; }
+	uint8_t isDecompressable(void) { return 1; }
+};
+
+static uint32_t Formats[] = { WAV_AMRNB };
+
+DECLARE_AUDIO_DECODER(ADM_AudiocodecOpencoreAmrNb,	// Class
+1,0,0, 												// Major, minor,patch 
+Formats, 											// Supported formats
+"opencore-amrnb decoder plugin for Avidemux (c) Mean/Gruntster\n"); 	// Desc
+
+uint8_t ADM_AudiocodecOpencoreAmrNb::beginDecompress( void ) 
+{
+	_tail = _head = 0;
+
+	return 1;
+};
+
+uint8_t ADM_AudiocodecOpencoreAmrNb::endDecompress( void ) 
+{
+	_tail = _head = 0;
+	return 1;
+};
+
+ADM_AudiocodecOpencoreAmrNb::ADM_AudiocodecOpencoreAmrNb(
+	uint32_t fourcc, WAVHeader *info, uint32_t extraLength, uint8_t *extraData) : ADM_Audiocodec(fourcc)
+{
+	state = Decoder_Interface_init();
+	_wavHeader = info;
+	ADM_assert(_wavHeader);
+}
+
+ADM_AudiocodecOpencoreAmrNb::~ADM_AudiocodecOpencoreAmrNb( )
+{
+	if (state)
+	{
+		Decoder_Interface_exit(state);
+		state = NULL;
+	}
+}
+
+uint8_t ADM_AudiocodecOpencoreAmrNb::run(uint8_t *inptr, uint32_t nbIn, float *outptr,   uint32_t *nbOut)
+{
+#define SAMPLE_PER_FRAME 160
+
+	static const short block_size[16]={ 12, 13, 15, 17, 19, 20, 26, 31, 5, 0, 0, 0, 0, 0, 0, 0 };
+	int16_t decodeBuffer[SAMPLE_PER_FRAME];
+	uint8_t *buf = inptr;
+	*nbOut = 0;
+
+again:	
+	while (nbIn)
+	{
+		int dec_mode,packet_size;
+		dec_mode = (buf[0] >> 3) & 0x000F;
+
+		packet_size = block_size[dec_mode] + 1;
+		if (packet_size > nbIn)
+		{
+			printf("Packet size %u, available data %u\n", packet_size, nbIn);
+			return 1;
+		}
+
+		Decoder_Interface_Decode(state, buf, decodeBuffer, 0);
+
+		// int to float
+		int16_t *in = decodeBuffer;
+		for (int i = 0; i < SAMPLE_PER_FRAME; i++) 
+		{
+			*(outptr++) = (float)*in / 32768;
+			in++;
+		}
+
+		*nbOut += SAMPLE_PER_FRAME;
+
+		buf += packet_size;
+		nbIn -= packet_size;
+	}
+
+	return 1; 
+}

Added: branches/avidemux_2.5_branch_gruntster/plugins/ADM_audioDecoders/ADM_ad_opencore/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_audioDecoders/ADM_ad_opencore/CMakeLists.txt	2009-07-14 19:22:57 UTC (rev 5093)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_audioDecoders/ADM_ad_opencore/CMakeLists.txt	2009-07-14 20:32:26 UTC (rev 5094)
@@ -0,0 +1,17 @@
+# OpenCORE AMR-NB decoder
+INCLUDE(admCheckOpencore)
+checkOpencore()
+
+IF (OPENCORE_AMRNB_FOUND)
+	INCLUDE(ad_plugin)
+	
+	SET(ADM_ad_opencore_SRCS ADM_ad_opencore.cpp)
+
+	ADD_LIBRARY(ADM_ad_opencore SHARED ${ADM_ad_opencore_SRCS})
+	TARGET_LINK_LIBRARIES(ADM_ad_opencore ADM_core ${OPENCORE_AMRNB_LIBRARY_DIR})
+
+	ADD_TARGET_CFLAGS(ADM_ad_opencore "-I${OPENCORE_AMRNB_INCLUDE_DIR}")
+
+	INIT_AUDIO_PLUGIN(ADM_ad_opencore)
+	INSTALL_AUDIODECODER(ADM_ad_opencore)
+ENDIF (OPENCORE_AMRNB_FOUND)

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_audioDecoders/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_audioDecoders/CMakeLists.txt	2009-07-14 19:22:57 UTC (rev 5093)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_audioDecoders/CMakeLists.txt	2009-07-14 20:32:26 UTC (rev 5094)
@@ -4,3 +4,4 @@
 ADD_SUBDIRECTORY(ADM_ad_vorbis)
 ADD_SUBDIRECTORY(ADM_ad_dca)
 ADD_SUBDIRECTORY(ADM_ad_amrnb)
+ADD_SUBDIRECTORY(ADM_ad_opencore)
\ No newline at end of file



From gruntster at mail.berlios.de  Wed Jul 15 21:37:58 2009
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Wed, 15 Jul 2009 21:37:58 +0200
Subject: [Avidemux-svn-commit] r5095 - in
	branches/avidemux_2.5_branch_gruntster: avidemux/ADM_audio
	avidemux/ADM_coreAudio/include avidemux/ADM_outputs/oplug_avi
	cmake plugins/ADM_audioDecoders
	plugins/ADM_audioDecoders/ADM_ad_opencore_amrnb
	plugins/ADM_audioDecoders/ADM_ad_opencore_amrwb
Message-ID: <200907151937.n6FJbwHw014297@sheep.berlios.de>

Author: gruntster
Date: 2009-07-15 21:37:44 +0200 (Wed, 15 Jul 2009)
New Revision: 5095

Added:
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_audioDecoders/ADM_ad_opencore_amrnb/
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_audioDecoders/ADM_ad_opencore_amrnb/ADM_ad_opencore_amrnb.cpp
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_audioDecoders/ADM_ad_opencore_amrwb/
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_audioDecoders/ADM_ad_opencore_amrwb/ADM_ad_opencore_amrwb.cpp
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_audioDecoders/ADM_ad_opencore_amrwb/CMakeLists.txt
Removed:
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_audioDecoders/ADM_ad_opencore/
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_audioDecoders/ADM_ad_opencore_amrnb/ADM_ad_opencore.cpp
Modified:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audio/aviaudio.hxx
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreAudio/include/ADM_audioCodecEnum.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreAudio/include/ADM_baseAudioStream.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_avisave.cpp
   branches/avidemux_2.5_branch_gruntster/cmake/admCheckOpencore.cmake
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_audioDecoders/ADM_ad_opencore_amrnb/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_audioDecoders/CMakeLists.txt
Log:
[amrnb] opencore-amrwb audio decoder plugin

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audio/aviaudio.hxx
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audio/aviaudio.hxx	2009-07-14 20:32:26 UTC (rev 5094)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audio/aviaudio.hxx	2009-07-15 19:37:44 UTC (rev 5095)
@@ -62,6 +62,7 @@
 #define WAV_AAC_HE 	0xfe // dummy id
 #define WAV_8BITS_UNSIGNED 	55 // dummy id
 #define WAV_AMRNB 	56 // dummy id
+#define WAV_AMRWB 	1234 // dummy id
 #define WAV_ULAW	57 // dummy id
 #define WAV_QDM2 	58
 #define WAV_IMAADPCM    17

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreAudio/include/ADM_audioCodecEnum.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreAudio/include/ADM_audioCodecEnum.h	2009-07-14 20:32:26 UTC (rev 5094)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreAudio/include/ADM_audioCodecEnum.h	2009-07-15 19:37:44 UTC (rev 5095)
@@ -19,6 +19,7 @@
 #define WAV_AAC_HE 	0xfe // dummy id
 #define WAV_8BITS_UNSIGNED 	55 // dummy id
 #define WAV_AMRNB 	56 // dummy id
+#define WAV_AMRWB 	1234 // dummy id
 #define WAV_ULAW	57 // dummy id
 #define WAV_QDM2 	58
 #define WAV_IMAADPCM    17

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreAudio/include/ADM_baseAudioStream.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreAudio/include/ADM_baseAudioStream.h	2009-07-14 20:32:26 UTC (rev 5094)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreAudio/include/ADM_baseAudioStream.h	2009-07-15 19:37:44 UTC (rev 5095)
@@ -48,32 +48,9 @@
 
 }ST_point;
 
-#define WAV_MP3 	85
-#define WAV_MP2 	80
-#define WAV_WMA 	353
-#define WAV_PCM 	1
-#define WAV_MSADPCM 	2
-#define WAV_LPCM 	3
-#define WAV_AC3 	0x2000
-#define WAV_DTS 	0x2001
-#define WAV_OGG 0x676f
-#define WAV_8BITS 	53 // dummy id
-#define WAV_MP4 	54 // dummy id
-#define WAV_AAC 	0xff // dummy id
-#define WAV_AAC_HE 	0xfe // dummy id
-#define WAV_8BITS_UNSIGNED 	55 // dummy id
-#define WAV_AMRNB 	56 // dummy id
-#define WAV_ULAW	57 // dummy id
-#define WAV_QDM2 	58
-#define WAV_IMAADPCM    17
-#define WAV_AMV_ADPCM    9900
-#define WAV_NELLYMOSER   9901
-#define WAV_UNKNOWN     9999
 #include "../ADM_audiocodec/ADM_audiocodec.h"
 #include "../ADM_osSupport/ADM_fileio.h"
 
-
-
 class AVDMGenericAudioStream
 {
    	protected:

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_avisave.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_avisave.cpp	2009-07-14 20:32:26 UTC (rev 5094)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_avisave.cpp	2009-07-15 19:37:44 UTC (rev 5095)
@@ -495,6 +495,7 @@
               case WAV_AAC: return QT_TR_NOOP("AAC");
               case WAV_QDM2: return QT_TR_NOOP("QDM2");
               case WAV_AMRNB: return QT_TR_NOOP("AMR-NB");
+		      case WAV_AMRWB: return QT_TR_NOOP("AMR-WB");
               case WAV_MSADPCM: return QT_TR_NOOP("MSADPCM");
               case WAV_ULAW: return QT_TR_NOOP("ULAW");
               case WAV_IMAADPCM: return QT_TR_NOOP("IMA ADPCM");

Modified: branches/avidemux_2.5_branch_gruntster/cmake/admCheckOpencore.cmake
===================================================================
--- branches/avidemux_2.5_branch_gruntster/cmake/admCheckOpencore.cmake	2009-07-14 20:32:26 UTC (rev 5094)
+++ branches/avidemux_2.5_branch_gruntster/cmake/admCheckOpencore.cmake	2009-07-15 19:37:44 UTC (rev 5095)
@@ -1,20 +1,41 @@
-MACRO(checkOpencore)
-	IF (NOT OPENCORE_CHECKED)
-		OPTION(OPENCORE "" ON)
+MACRO(checkOpencoreAmrnb)
+	IF (NOT OPENCORE_AMRNB_CHECKED)
+		OPTION(OPENCORE_AMRNB "" ON)
 
-		MESSAGE(STATUS "Checking for opencore-amr")
-		MESSAGE(STATUS "*************************")
+		MESSAGE(STATUS "Checking for opencore-amrnb")
+		MESSAGE(STATUS "***************************")
 
-		IF (OPENCORE)
+		IF (OPENCORE_AMRNB)
 			FIND_HEADER_AND_LIB(OPENCORE_AMRNB opencore-amrnb/interf_dec.h opencore-amrnb Decoder_Interface_init)
 			PRINT_LIBRARY_INFO("opencore-amrnb" OPENCORE_AMRNB_FOUND "${OPENCORE_AMRNB_INCLUDE_DIR}" "${OPENCORE_AMRNB_LIBRARY_DIR}")
-		ELSE (OPENCORE)
+		ELSE (OPENCORE_AMRNB)
 			MESSAGE("${MSG_DISABLE_OPTION}")
-		ENDIF (OPENCORE)
+		ENDIF (OPENCORE_AMRNB)
 
 		SET(ENV{ADM_HAVE_OPENCORE_AMRNB} ${OPENCORE_AMRNB_FOUND})
-		SET(OPENCORE_CHECKED 1)
+		MESSAGE("")
 
+		SET(OPENCORE_AMRNB_CHECKED 1)
+	ENDIF (NOT OPENCORE_AMRNB_CHECKED)
+ENDMACRO(checkOpencoreAmrnb)
+
+MACRO(checkOpencoreAmrwb)
+	IF (NOT OPENCORE_AMRWB_CHECKED)
+		OPTION(OPENCORE_AMRWB "" ON)
+
+		MESSAGE(STATUS "Checking for opencore-amrwb")
+		MESSAGE(STATUS "***************************")
+
+		IF (OPENCORE_AMRWB)
+			FIND_HEADER_AND_LIB(OPENCORE_AMRWB opencore-amrwb/dec_if.h opencore-amrwb D_IF_init)
+			PRINT_LIBRARY_INFO("opencore-amrwb" OPENCORE_AMRWB_FOUND "${OPENCORE_AMRWB_INCLUDE_DIR}" "${OPENCORE_AMRWB_LIBRARY_DIR}")
+		ELSE (OPENCORE_AMRWB)
+			MESSAGE("${MSG_DISABLE_OPTION}")
+		ENDIF (OPENCORE_AMRWB)
+
+		SET(ENV{ADM_HAVE_OPENCORE_AMRWB} ${OPENCORE_AMRWB_FOUND})		
 		MESSAGE("")
-	ENDIF (NOT OPENCORE_CHECKED)
-ENDMACRO(checkOpencore)
\ No newline at end of file
+		
+		SET(OPENCORE_AMRWB_CHECKED 1)
+	ENDIF (NOT OPENCORE_AMRWB_CHECKED)
+ENDMACRO(checkOpencoreAmrwb)
\ No newline at end of file

Copied: branches/avidemux_2.5_branch_gruntster/plugins/ADM_audioDecoders/ADM_ad_opencore_amrnb (from rev 5094, branches/avidemux_2.5_branch_gruntster/plugins/ADM_audioDecoders/ADM_ad_opencore)

Deleted: branches/avidemux_2.5_branch_gruntster/plugins/ADM_audioDecoders/ADM_ad_opencore_amrnb/ADM_ad_opencore.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_audioDecoders/ADM_ad_opencore/ADM_ad_opencore.cpp	2009-07-14 20:32:26 UTC (rev 5094)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_audioDecoders/ADM_ad_opencore_amrnb/ADM_ad_opencore.cpp	2009-07-15 19:37:44 UTC (rev 5095)
@@ -1,119 +0,0 @@
-/***************************************************************************
-                     ADM_ad_opencore.cpp  -  description
-                     -----------------------------------
-
-    begin                : Tue Jul 14 2009
-    copyright            : (C) 2009 by mean/Gruntster
- ***************************************************************************/
-
-/***************************************************************************
- *                                                                         *
- *   This program is free software; you can redistribute it and/or modify  *
- *   it under the terms of the GNU General Public License as published by  *
- *   the Free Software Foundation; either version 2 of the License, or     *
- *   (at your option) any later version.                                   *
- *                                                                         *
- ***************************************************************************/
-#include "ADM_default.h"
-#include "ADM_ad_plugin.h"
-
-extern "C" {
-#include <opencore-amrnb/interf_dec.h>
-};
-
-#define ADM_AMR_BUFFER (16 * 1024) // 16 kB internal
-
-class ADM_AudiocodecOpencoreAmrNb : public ADM_Audiocodec
-{
-protected:
-	void *state;
-	uint8_t _buffer[ADM_AMR_BUFFER];
-	uint32_t _head, _tail;
-
-public:
-	ADM_AudiocodecOpencoreAmrNb(uint32_t fourcc, WAVHeader *info,uint32_t extraLength,uint8_t *extraDatab);
-	~ADM_AudiocodecOpencoreAmrNb();
-	uint8_t beginDecompress(void);
-	uint8_t endDecompress(void);
-	uint8_t run(uint8_t *inptr, uint32_t nbIn, float *outptr, uint32_t *nbOut);
-	uint8_t isCompressed(void) { return 1; }
-	uint8_t isDecompressable(void) { return 1; }
-};
-
-static uint32_t Formats[] = { WAV_AMRNB };
-
-DECLARE_AUDIO_DECODER(ADM_AudiocodecOpencoreAmrNb,	// Class
-1,0,0, 												// Major, minor,patch 
-Formats, 											// Supported formats
-"opencore-amrnb decoder plugin for Avidemux (c) Mean/Gruntster\n"); 	// Desc
-
-uint8_t ADM_AudiocodecOpencoreAmrNb::beginDecompress( void ) 
-{
-	_tail = _head = 0;
-
-	return 1;
-};
-
-uint8_t ADM_AudiocodecOpencoreAmrNb::endDecompress( void ) 
-{
-	_tail = _head = 0;
-	return 1;
-};
-
-ADM_AudiocodecOpencoreAmrNb::ADM_AudiocodecOpencoreAmrNb(
-	uint32_t fourcc, WAVHeader *info, uint32_t extraLength, uint8_t *extraData) : ADM_Audiocodec(fourcc)
-{
-	state = Decoder_Interface_init();
-	_wavHeader = info;
-	ADM_assert(_wavHeader);
-}
-
-ADM_AudiocodecOpencoreAmrNb::~ADM_AudiocodecOpencoreAmrNb( )
-{
-	if (state)
-	{
-		Decoder_Interface_exit(state);
-		state = NULL;
-	}
-}
-
-uint8_t ADM_AudiocodecOpencoreAmrNb::run(uint8_t *inptr, uint32_t nbIn, float *outptr,   uint32_t *nbOut)
-{
-#define SAMPLE_PER_FRAME 160
-
-	static const short block_size[16]={ 12, 13, 15, 17, 19, 20, 26, 31, 5, 0, 0, 0, 0, 0, 0, 0 };
-	int16_t decodeBuffer[SAMPLE_PER_FRAME];
-	uint8_t *buf = inptr;
-	*nbOut = 0;
-
-again:	
-	while (nbIn)
-	{
-		int dec_mode,packet_size;
-		dec_mode = (buf[0] >> 3) & 0x000F;
-
-		packet_size = block_size[dec_mode] + 1;
-		if (packet_size > nbIn)
-		{
-			printf("Packet size %u, available data %u\n", packet_size, nbIn);
-			return 1;
-		}
-
-		Decoder_Interface_Decode(state, buf, decodeBuffer, 0);
-
-		// int to float
-		int16_t *in = decodeBuffer;
-		for (int i = 0; i < SAMPLE_PER_FRAME; i++) 
-		{
-			*(outptr++) = (float)*in / 32768;
-			in++;
-		}
-
-		*nbOut += SAMPLE_PER_FRAME;
-
-		buf += packet_size;
-		nbIn -= packet_size;
-	}
-
-	return 1; 
-}

Copied: branches/avidemux_2.5_branch_gruntster/plugins/ADM_audioDecoders/ADM_ad_opencore_amrnb/ADM_ad_opencore_amrnb.cpp (from rev 5094, branches/avidemux_2.5_branch_gruntster/plugins/ADM_audioDecoders/ADM_ad_opencore/ADM_ad_opencore.cpp)

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_audioDecoders/ADM_ad_opencore_amrnb/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_audioDecoders/ADM_ad_opencore/CMakeLists.txt	2009-07-14 20:32:26 UTC (rev 5094)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_audioDecoders/ADM_ad_opencore_amrnb/CMakeLists.txt	2009-07-15 19:37:44 UTC (rev 5095)
@@ -1,17 +1,17 @@
 # OpenCORE AMR-NB decoder
 INCLUDE(admCheckOpencore)
-checkOpencore()
+checkOpencoreAmrnb()
 
 IF (OPENCORE_AMRNB_FOUND)
 	INCLUDE(ad_plugin)
 	
-	SET(ADM_ad_opencore_SRCS ADM_ad_opencore.cpp)
+	SET(ADM_ad_opencore_amrnb_SRCS ADM_ad_opencore_amrnb.cpp)
 
-	ADD_LIBRARY(ADM_ad_opencore SHARED ${ADM_ad_opencore_SRCS})
-	TARGET_LINK_LIBRARIES(ADM_ad_opencore ADM_core ${OPENCORE_AMRNB_LIBRARY_DIR})
+	ADD_LIBRARY(ADM_ad_opencore_amrnb SHARED ${ADM_ad_opencore_amrnb_SRCS})
+	TARGET_LINK_LIBRARIES(ADM_ad_opencore_amrnb ADM_core ${OPENCORE_AMRNB_LIBRARY_DIR})
 
-	ADD_TARGET_CFLAGS(ADM_ad_opencore "-I${OPENCORE_AMRNB_INCLUDE_DIR}")
+	ADD_TARGET_CFLAGS(ADM_ad_opencore_amrnb "-I${OPENCORE_AMRNB_INCLUDE_DIR}")
 
-	INIT_AUDIO_PLUGIN(ADM_ad_opencore)
-	INSTALL_AUDIODECODER(ADM_ad_opencore)
+	INIT_AUDIO_PLUGIN(ADM_ad_opencore_amrnb)
+	INSTALL_AUDIODECODER(ADM_ad_opencore_amrnb)
 ENDIF (OPENCORE_AMRNB_FOUND)

Added: branches/avidemux_2.5_branch_gruntster/plugins/ADM_audioDecoders/ADM_ad_opencore_amrwb/ADM_ad_opencore_amrwb.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_audioDecoders/ADM_ad_opencore_amrwb/ADM_ad_opencore_amrwb.cpp	2009-07-14 20:32:26 UTC (rev 5094)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_audioDecoders/ADM_ad_opencore_amrwb/ADM_ad_opencore_amrwb.cpp	2009-07-15 19:37:44 UTC (rev 5095)
@@ -0,0 +1,123 @@
+/***************************************************************************
+                     ADM_ad_opencore.cpp  -  description
+                     -----------------------------------
+
+    begin                : Tue Jul 14 2009
+    copyright            : (C) 2009 by mean/Gruntster
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+#include "ADM_default.h"
+#include "ADM_ad_plugin.h"
+
+extern "C" {
+#include <opencore-amrwb/dec_if.h>
+#include <opencore-amrwb/if_rom.h>
+};
+
+#define ADM_AMR_BUFFER (16 * 1024) // 16 kB internal
+
+class ADM_AudiocodecOpencoreAmrWb : public ADM_Audiocodec
+{
+protected:
+	void *state;
+	uint8_t _buffer[ADM_AMR_BUFFER];
+	uint32_t _head, _tail;
+
+public:
+	ADM_AudiocodecOpencoreAmrWb(uint32_t fourcc, WAVHeader *info,uint32_t extraLength,uint8_t *extraDatab);
+	~ADM_AudiocodecOpencoreAmrWb();
+	uint8_t beginDecompress(void);
+	uint8_t endDecompress(void);
+	uint8_t run(uint8_t *inptr, uint32_t nbIn, float *outptr, uint32_t *nbOut);
+	uint8_t isCompressed(void) { return 1; }
+	uint8_t isDecompressable(void) { return 1; }
+};
+
+static uint32_t Formats[] = { WAV_AMRWB };
+
+DECLARE_AUDIO_DECODER(ADM_AudiocodecOpencoreAmrWb,	// Class
+1,0,0, 												// Major, minor,patch 
+Formats, 											// Supported formats
+"opencore-amrwb decoder plugin for Avidemux (c) Mean/Gruntster\n"); 	// Desc
+
+uint8_t ADM_AudiocodecOpencoreAmrWb::beginDecompress( void ) 
+{
+	_tail = _head = 0;
+
+	return 1;
+};
+
+uint8_t ADM_AudiocodecOpencoreAmrWb::endDecompress( void ) 
+{
+	_tail = _head = 0;
+	return 1;
+};
+
+ADM_AudiocodecOpencoreAmrWb::ADM_AudiocodecOpencoreAmrWb(
+	uint32_t fourcc, WAVHeader *info, uint32_t extraLength, uint8_t *extraData) : ADM_Audiocodec(fourcc)
+{
+	state = D_IF_init();
+	_wavHeader = info;
+	ADM_assert(_wavHeader);
+
+	info->channels = 1;
+}
+
+ADM_AudiocodecOpencoreAmrWb::~ADM_AudiocodecOpencoreAmrWb( )
+{
+	if (state)
+	{
+		D_IF_exit(state);
+		state = NULL;
+	}
+}
+
+uint8_t ADM_AudiocodecOpencoreAmrWb::run(uint8_t *inptr, uint32_t nbIn, float *outptr, uint32_t *nbOut)
+{
+#define SAMPLE_PER_FRAME 320
+
+	static const short block_size[16] = { 18, 24, 33, 37, 41, 47, 51, 59, 61, 6, 6, 0, 0, 0, 1, 1 };
+	int16_t decodeBuffer[SAMPLE_PER_FRAME];
+	uint8_t *buf = inptr;
+	*nbOut = 0;
+
+again:	
+	while (nbIn)
+	{
+		int dec_mode,packet_size;
+		dec_mode = (buf[0] >> 3) & 0x000F;
+
+		packet_size = block_size[dec_mode];
+
+		if (packet_size > nbIn)
+		{
+			printf("Packet size %u, available data %u\n", packet_size, nbIn);
+			return 1;
+		}
+
+		D_IF_decode(state, buf, decodeBuffer, _good_frame);
+
+		// int to float
+		int16_t *in = decodeBuffer;
+		for (int i = 0; i < SAMPLE_PER_FRAME; i++) 
+		{
+			*(outptr++) = (float)*in / 32768;
+			in++;
+		}
+
+		*nbOut += SAMPLE_PER_FRAME;
+
+		buf += packet_size;
+		nbIn -= packet_size;
+	}
+
+	return 1; 
+}

Added: branches/avidemux_2.5_branch_gruntster/plugins/ADM_audioDecoders/ADM_ad_opencore_amrwb/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_audioDecoders/ADM_ad_opencore_amrwb/CMakeLists.txt	2009-07-14 20:32:26 UTC (rev 5094)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_audioDecoders/ADM_ad_opencore_amrwb/CMakeLists.txt	2009-07-15 19:37:44 UTC (rev 5095)
@@ -0,0 +1,17 @@
+# OpenCORE AMR-WB decoder
+INCLUDE(admCheckOpencore)
+checkOpencoreAmrwb()
+
+IF (OPENCORE_AMRWB_FOUND)
+	INCLUDE(ad_plugin)
+	
+	SET(ADM_ad_opencore_amrwb_SRCS ADM_ad_opencore_amrwb.cpp)
+
+	ADD_LIBRARY(ADM_ad_opencore_amrwb SHARED ${ADM_ad_opencore_amrwb_SRCS})
+	TARGET_LINK_LIBRARIES(ADM_ad_opencore_amrwb ADM_core ${OPENCORE_AMRWB_LIBRARY_DIR})
+
+	ADD_TARGET_CFLAGS(ADM_ad_opencore_amrwb "-I${OPENCORE_AMRWB_INCLUDE_DIR}")
+
+	INIT_AUDIO_PLUGIN(ADM_ad_opencore_amrwb)
+	INSTALL_AUDIODECODER(ADM_ad_opencore_amrwb)
+ENDIF (OPENCORE_AMRWB_FOUND)

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_audioDecoders/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_audioDecoders/CMakeLists.txt	2009-07-14 20:32:26 UTC (rev 5094)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_audioDecoders/CMakeLists.txt	2009-07-15 19:37:44 UTC (rev 5095)
@@ -4,4 +4,5 @@
 ADD_SUBDIRECTORY(ADM_ad_vorbis)
 ADD_SUBDIRECTORY(ADM_ad_dca)
 ADD_SUBDIRECTORY(ADM_ad_amrnb)
-ADD_SUBDIRECTORY(ADM_ad_opencore)
\ No newline at end of file
+ADD_SUBDIRECTORY(ADM_ad_opencore_amrnb)
+ADD_SUBDIRECTORY(ADM_ad_opencore_amrwb)
\ No newline at end of file



From mean at mail.berlios.de  Fri Jul 17 19:54:44 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Fri, 17 Jul 2009 19:54:44 +0200
Subject: [Avidemux-svn-commit] r5096 - in
	branches/avidemux_2.6_branch_mean/avidemux: . common
	common/ADM_toolkit gtk/ADM_userInterfaces/ADM_dialog
Message-ID: <200907171754.n6HHsiJq004631@sheep.berlios.de>

Author: mean
Date: 2009-07-17 19:54:44 +0200 (Fri, 17 Jul 2009)
New Revision: 5096

Added:
   branches/avidemux_2.6_branch_mean/avidemux/common/gui_audio.cpp
Modified:
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_toolkit/automation.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/gtk_gui.cpp
   branches/avidemux_2.6_branch_mean/avidemux/commonCmakeApplication.cmake
   branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/ADM_dialog/DIA_properties.cpp
Log:
[gui_*] Partial cleanup, remove a lot of unused stuff

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_toolkit/automation.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_toolkit/automation.cpp	2009-07-15 19:37:44 UTC (rev 5095)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_toolkit/automation.cpp	2009-07-17 17:54:44 UTC (rev 5096)
@@ -54,9 +54,6 @@
 extern int A_loadNone( void );
 extern void A_saveAudioProcessed(char *name);
 extern uint8_t A_SaveAudioNVideo(char *name);
-extern int A_loadMP3(char *name);
-extern int A_loadAC3(char *name);
-extern int A_loadWave(char *name);
 extern void GUI_Quiet( void);
 extern bool A_parseECMAScript(const char *name);
 extern void GUI_Verbose( void);
@@ -171,10 +168,6 @@
 //                                                          ,(one_arg_type)call_packedvop},
         {"force-smart",   	0,"Engage smart copy mode with CQ=3 at next save"
                                                           ,(one_arg_type)call_forcesmart},
-        {"external-mp3",	1,"load external mpeg audio as audio track",(one_arg_type)A_loadMP3},
-        {"external-ac3",	1,"load external ac3 audio as audio track",(one_arg_type)A_loadAC3},
-        {"external-wav",	1,"load external wav audio as audio track",(one_arg_type)A_loadWave},
-        {"no-audio",		0,"load external wav audio as audio track",(one_arg_type)A_loadNone},
         {"audio-delay",		1,"set audio time shift in ms (+ or -)",	call_setAudio},
         {"audio-map",		0,"build audio map (MP3 VBR)",	call_buildtimemap},
         {"audio-bitrate",	1,"set audio encoding bitrate",	call_audiobitrate},

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/gtk_gui.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/gtk_gui.cpp	2009-07-15 19:37:44 UTC (rev 5095)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/gtk_gui.cpp	2009-07-17 17:54:44 UTC (rev 5096)
@@ -44,90 +44,78 @@
 //***********************************
 //******** A Function ***************
 //***********************************
-int A_delete(uint32_t start, uint32_t end);
-int A_loadWave (char *name);
-int A_loadAC3 (char *name);
-int A_loadMP3 (char *name);
-int A_loadNone( void );
-void A_externalAudioTrack( void );
+int     A_delete(uint32_t start, uint32_t end);
+void    A_externalAudioTrack( void );
 uint8_t A_rebuildKeyFrame (void);
-void A_openBrokenAvi (const char *name);
-int A_openAvi2 (const char *name, uint8_t mode);
-int A_appendAvi (const char *name);
-void A_saveWorkbench (const char *name);
+void    A_openBrokenAvi (const char *name);
+int     A_openAvi2 (const char *name, uint8_t mode);
+int     A_appendAvi (const char *name);
+void    A_saveWorkbench (const char *name);
 static void A_videoCheck( void);
 static void	A_setPostproc( void );
-void A_Resync(void);
-void A_addJob(void);
-void A_audioTrack(void);
+void    A_Resync(void);
+void    A_addJob(void);
+void    A_audioTrack(void);
 extern int A_Save(const char *name);
-int A_SaveWrapper( char *name);
-void A_parseECMAScript(const char *name);
+int     A_SaveWrapper( char *name);
+void    A_parseECMAScript(const char *name);
 extern uint8_t A_autoDrive(Action action);
-extern int A_SaveUnpackedVop(const char *name);
-extern int A_SavePackedVop(const char *name);
 uint8_t A_TimeShift(void);
-void A_ResetMarkers(void);
+void    A_ResetMarkers(void);
 extern void A_jog(void);
+uint8_t A_jumpToTime(uint32_t hh,uint32_t mm,uint32_t ss,uint32_t ms);
 //***********************************
 //******** GUI Function**************
 //***********************************
 
 extern uint8_t UI_getPhysicalScreenSize(void* window, uint32_t *w,uint32_t *h);
 extern uint8_t GUI_jobs(void);
-extern uint8_t GUI_getFrame(uint32_t frameno,  uint32_t *flags);
 extern const char * GUI_getCustomScript(uint32_t nb);
 
-extern void GUI_setName (char *n);
-uint8_t GUI_getFrameContent(ADMImage *image, uint32_t frame);
-extern int GUI_handleVFilter (void);
-extern void GUI_setMarks (uint32_t a, uint32_t b);
-extern void  GUI_displayBitrate( void );
-void GUI_showCurrentFrameHex(void);
-void GUI_showSize(void);
-void GUI_avsProxy(void);
-uint8_t GUI_close(void);
+extern uint8_t GUI_getFrameContent(ADMImage *image, uint32_t frame);
+extern int     GUI_handleVFilter (void);
+extern void    GUI_setMarks (uint32_t a, uint32_t b);
+extern void    GUI_displayBitrate( void );
+// Debug functions
+       void    GUI_showCurrentFrameHex(void);
+       void    GUI_showSize(void);
 
+       void    GUI_avsProxy(void);
+       uint8_t GUI_close(void);
+extern int     GUI_GoToFrame(uint32_t frame);;
 //***********************************
 //******** DIA Function**************
 //***********************************
 extern uint8_t DIA_about( void );
 extern uint8_t DIA_RecentFiles( char **name );
-extern void DIA_properties( void);
+extern void    DIA_properties( void);
 extern uint8_t DIA_Preferences(void);
 extern uint8_t DIA_gotoTime(uint16_t *hh, uint16_t *mm, uint16_t *ss);
-extern uint8_t DIA_ocrGen(void);
-extern uint8_t DIA_ocrDvb(void);
-uint8_t DIA_builtin(void);
-extern void DIA_Calculator(uint32_t *sizeInMeg, uint32_t *avgBitrate );
-extern void DIA_glyphEdit(void);
+extern uint8_t DIA_builtin(void);
+extern void    DIA_Calculator(uint32_t *sizeInMeg, uint32_t *avgBitrate );
 extern uint8_t DIA_pluginsInfo(void);
+
 extern void filterCleanUp (void);
 static void ReSync (void);
 static void cleanUp (void);
-void test_mpeg (char *name);
-void ADM_cutWizard (void);
-void updateLoaded (void);
+void        updateLoaded (void);
 extern void encoderSetLogFile (char *name);
 extern void videoCodecSelect (void);
-
-//
-
-uint8_t A_jumpToTime(uint32_t hh,uint32_t mm,uint32_t ss,uint32_t ms);
 //__________
+extern bool parseECMAScript(const char *name);
 
-extern int  GUI_GoToFrame(uint32_t frame);;
 extern void videoCodecConfigureUI(int codecIndex = -1);
 extern void audioCodecChanged(int newcodec);
 extern void videoCodecChanged(int newcodec);
-
-extern bool parseECMAScript(const char *name);
-
 extern bool ADM_mux_configure(int index);
 //
+//  Sub gui files...
+//
 void HandleAction (Action action);
 void HandleAction_Navigate(Action action);
 void HandleAction_Save(Action action);
+//
+//
 /**
     \fn HandleAction
     \brief  serialization of user event through gui
@@ -213,9 +201,7 @@
     case ACT_AudioCodec:
       audioCodecConfigure();
       return;
-
     case ACT_AudioFilters:
-    //  audioFilter_configureFilters ();
       audioFilterConfigure();
       return;
     case ACT_Pref:
@@ -254,9 +240,7 @@
       switch (action)
         {
         case ACT_PlayAvi:
-
         case ACT_StopAvi:
-          A_playAvi ();
           break;
         default:
           return;
@@ -314,30 +298,18 @@
                 changePreviewZoom(currentZoom);
                 admPreview::samePicture();
                 break;
-
-
-        case ACT_AUTO_VCD:
-        case ACT_AUTO_SVCD:
-        case ACT_AUTO_DVD:
-        case ACT_AUTO_PSP:
-        case ACT_AUTO_IPOD:
-        case ACT_AUTO_FLV:
-        case ACT_AUTO_PSP_H264:
-                A_autoDrive( action);
-                break;
-
-   case ACT_SelectTrack1:
+        case ACT_SelectTrack1:
                 A_audioTrack();
                 break;
 
-    case ACT_Bitrate:
+        case ACT_Bitrate:
     			{
 				uint32_t a,b;
 //				DIA_Calculator(&a,&b );
 			}
     			break;
 
-    case ACT_ADD_JOB:
+        case ACT_ADD_JOB:
             A_addJob();
             break;
 
@@ -380,36 +352,9 @@
     case ACT_SetPostProcessing:
       A_setPostproc();
       break;
-
-   
     case ACT_AllBlackFrames:
       GUI_FileSelWrite (QT_TR_NOOP("Select File to Save"), (SELFILE_CB *)A_ListAllBlackFrames);
         break;
-
- 
-
- 
-    case ACT_AudioSourceAvi:
-      //currentaudiostream=aviaudiostream;
-//      A_changeAudioStream (aviaudiostream, AudioAvi,NULL);
-      //wavinfo= currentaudiostream->getInfo();
-      break;
-
-    case ACT_AudioSourceMP3:
-      GUI_FileSelRead (QT_TR_NOOP("Select MP3 to Load"), (SELFILE_CB *)A_loadMP3);
-      break;
-    case ACT_AudioSourceAC3:
-      GUI_FileSelRead (QT_TR_NOOP("Select AC3 to Load"), (SELFILE_CB *)A_loadAC3);
-      break;
-    case ACT_AudioSourceWAV:
-      GUI_FileSelRead (QT_TR_NOOP("Select WAV to Load"),(SELFILE_CB *) A_loadWave);
-      break;
-    case ACT_AudioSourceNone:
-      //currentaudiostream=(AVDMGenericAudioStream *)NULL;
-//       A_changeAudioStream((AVDMGenericAudioStream *) NULL, AudioNone,NULL);
-      break;
-
-
     case ACT_MarkA:
     case ACT_MarkB:
     {
@@ -500,16 +445,6 @@
 #endif
       break;
 
-    case ACT_AudioMap:
-      printf ("\n making audio timeline\n");
-      if (currentaudiostream)
-	{
-
-//	  currentaudiostream->buildAudioTimeLine ();
-
-	}
-      break;
-
     case ACT_ChangeFPS:
     	{
          float  fps;
@@ -621,6 +556,7 @@
   return A_openAvi2 (name, 0);
 }
 extern void GUI_PreviewEnd (void);
+
 int A_openAvi2 (const char *name, uint8_t mode)
 {
   uint8_t res;
@@ -891,96 +827,6 @@
 
 
 
-
-//____________________________________________________________
-//
-//      Play AVI  + Audio if possible
-//_____________________________________________________________
-void
-A_playAvi (void)
-{
-
-}
-
-//_____________________________________________________________
-//
-//              Load AC3
-//
-//
-//_____________________________________________________________
-int
-A_loadAC3 (char *name)
-{
-
-}
-int A_loadNone( void )
-{
-// 	A_changeAudioStream ((AVDMGenericAudioStream *) NULL, AudioNone,NULL);
-}
-
-//_____________________________________________________________
-//
-//              Load MP3 and identify wavfmt infos to fill avi header
-//              -> use mad ?
-//
-//_____________________________________________________________
-int A_loadMP3(char *name)
-{
-  }
-//_____________________________________________________________
-//
-//              Load wave
-//
-//
-//_____________________________________________________________
-
-int A_loadWave (char *name)
-{
-
-}
-#if 0
-AudioSource getCurrentAudioSource(char **name)
-{
-        *name=currentAudioName;
-        return currentAudioSource;
-}
-#endif
-//________________________________________________________
-// Change audio stream and delete the old one if needed
-//________________________________________________________
-#if 0
-uint8_t A_changeAudioStream (ADM_audioStream * newaudio, AudioSource nwsource,char *myname)
-{
-
-	if (currentaudiostream)
-	{
-		if (currentaudiostream != aviaudiostream)
-			delete currentaudiostream;
-
-		if(currentAudioName)
-			ADM_dealloc(currentAudioName);
-
-		currentAudioName = NULL;
-		currentAudioSource = AudioNone;
-	}
-
-  currentaudiostream = newaudio;
-
-  if (currentaudiostream)
-  {
-    wavinfo = currentaudiostream->getInfo ();
-    currentAudioSource=nwsource;
-    if(myname)
-        currentAudioName=ADM_strdup(myname);
-  }
-
-  return 1;
-}
-#endif
-
-
-
-
 //      Clean up
 //      free all pending stuff, make leakchecker happy
 //
@@ -1036,30 +882,12 @@
 #warning fixme
 
 
-extern void getCutPoints (int br);
-void
-ADM_cutWizard (void)
-{
-#if 0
-  int br;
-  if (currentaudiostream)
-    {
-      br = currentaudiostream->getInfo ()->byterate * 8 / 1000;
-    }
-  else
-    br = 128;
 
-  getCutPoints (br);
-#endif
-}
-
-
 void A_parseECMAScript(const char *name){
   bool ret;
   char *longname = ADM_PathCanonize(name);
    if (playing){
       GUI_PlayAvi();
-      curframe = 0;
    }
    ret = parseECMAScript(longname);
    if( ret == 0 ){
@@ -1107,7 +935,7 @@
 		GUI_Info_HIG(ADM_LOG_IMPORTANT,str, NULL);
 
 	}
-	GUI_GoToFrame(curframe);
+	GUI_GoToFrame(0);
 
 }
 int A_delete(uint32_t start, uint32_t end)
@@ -1415,18 +1243,16 @@
 
 }
 #endif
-
+/**
+    \fn A_Resync
+    \brief 
+*/
 void A_Resync(void)
 {
-// Just in case update file info
         if(!avifileinfo) return;
         GUI_setAllFrameAndTime();
-
-        if(curframe>avifileinfo->nb_frames) curframe=frameEnd;
-        
         UI_setMarkers (video_body->getMarkerAPts(),video_body->getMarkerBPts());
-
-        GUI_GoToFrame(curframe);
+        GUI_GoToFrame(0);
 }
 uint8_t  DIA_job_select(char **jobname, char **filename);
 void A_addJob(void)
@@ -1455,26 +1281,6 @@
         ADM_dealloc(name);
         ADM_dealloc(final);
 }
-uint8_t  DIA_v2v(char **vobname, char **ifoname,char **vobsubname);
-uint8_t ADM_vob2vobsub(char *nameVob, char *nameVobSub, char *nameIfo);
-#if BAZOOKA
-int A_vob2vobsub(void)
-{
-        char *vob=NULL;
-        char *ifo=NULL;
-        char *vsub=NULL;
-        int r=0;
-        if(DIA_v2v(&vob,&ifo,&vsub))
-        {
-                r=ADM_vob2vobsub(vob,vsub,ifo);
-                ADM_dealloc(vob);
-                ADM_dealloc(ifo);
-                ADM_dealloc(vsub);
-        }
-        return r;
-
-}
-#endif
 ///
 ///	Return the frame # corresponding to the position of the scale/slider
 ///	Rougth estimation in fact
@@ -1489,8 +1295,6 @@
     tg= (avifileinfo->nb_frames-1) * percent / 100.;
 
     return (uint32_t)floor(tg);;
-
-
 }
 
 
@@ -1526,9 +1330,6 @@
       wavinfo = NULL;
       avifileinfo = NULL;
       video_body->cleanup ();
-      curframe = 0;
-//      A_changeAudioStream (NULL, AudioNone,NULL);
-
       // Audio streams are cleared by editor
 
 	  aviaudiostream=NULL;
@@ -1647,8 +1448,6 @@
  
 }
 
-// Temporary place...
-
 /**
  *      \fn UI_getPreferredRender
  *      \brief Returns to render lib the user preferred rendering method
@@ -1688,34 +1487,8 @@
 
         return render;
 }
+
 /**
-        \fn getStrFromAudioCodec
-        \brief Return a plain string from the codec_id
-*/
-const char *getStrFromAudioCodec( uint32_t codec)
-{
-      switch(codec)
-      {
-              case WAV_DTS: return QT_TR_NOOP("DTS");
-              case WAV_PCM: return QT_TR_NOOP("PCM");
-              case WAV_MP2: return QT_TR_NOOP("MP2");
-              case WAV_MP3: return QT_TR_NOOP("MP3");
-              case WAV_WMA:  return QT_TR_NOOP("WMA");
-              case WAV_LPCM: return QT_TR_NOOP("LPCM");
-              case WAV_AC3:  return QT_TR_NOOP("AC3");
-              case WAV_OGG: return QT_TR_NOOP("Ogg Vorbis");
-              case WAV_MP4: return QT_TR_NOOP("MP4");
-              case WAV_AAC: return QT_TR_NOOP("AAC");
-              case WAV_QDM2: return QT_TR_NOOP("QDM2");
-              case WAV_AMRNB: return QT_TR_NOOP("AMR-NB");
-              case WAV_MSADPCM: return QT_TR_NOOP("MSADPCM");
-              case WAV_ULAW: return QT_TR_NOOP("ULAW");
-              case WAV_IMAADPCM: return QT_TR_NOOP("IMA ADPCM");
-              case WAV_8BITS_UNSIGNED:return QT_TR_NOOP("8-bit PCM");
-      }
-      return QT_TR_NOOP("Unknown codec");
-}
-/**
     \fn A_ResetMarkers
 */
 void A_ResetMarkers(void)

Added: branches/avidemux_2.6_branch_mean/avidemux/common/gui_audio.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/gui_audio.cpp	2009-07-15 19:37:44 UTC (rev 5095)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/gui_audio.cpp	2009-07-17 17:54:44 UTC (rev 5096)
@@ -0,0 +1,33 @@
+/**
+    PlaceHolder
+*/
+#include "ADM_default.h"
+#include "ADM_audioCodecEnum.h"
+
+/**
+        \fn getStrFromAudioCodec
+        \brief Return a plain string from the codec_id
+*/
+const char *getStrFromAudioCodec( uint32_t codec)
+{
+      switch(codec)
+      {
+              case WAV_DTS: return QT_TR_NOOP("DTS");
+              case WAV_PCM: return QT_TR_NOOP("PCM");
+              case WAV_MP2: return QT_TR_NOOP("MP2");
+              case WAV_MP3: return QT_TR_NOOP("MP3");
+              case WAV_WMA:  return QT_TR_NOOP("WMA");
+              case WAV_LPCM: return QT_TR_NOOP("LPCM");
+              case WAV_AC3:  return QT_TR_NOOP("AC3");
+              case WAV_OGG: return QT_TR_NOOP("Ogg Vorbis");
+              case WAV_MP4: return QT_TR_NOOP("MP4");
+              case WAV_AAC: return QT_TR_NOOP("AAC");
+              case WAV_QDM2: return QT_TR_NOOP("QDM2");
+              case WAV_AMRNB: return QT_TR_NOOP("AMR-NB");
+              case WAV_MSADPCM: return QT_TR_NOOP("MSADPCM");
+              case WAV_ULAW: return QT_TR_NOOP("ULAW");
+              case WAV_IMAADPCM: return QT_TR_NOOP("IMA ADPCM");
+              case WAV_8BITS_UNSIGNED:return QT_TR_NOOP("8-bit PCM");
+      }
+      return QT_TR_NOOP("Unknown codec");
+}
\ No newline at end of file

Modified: branches/avidemux_2.6_branch_mean/avidemux/commonCmakeApplication.cmake
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/commonCmakeApplication.cmake	2009-07-15 19:37:44 UTC (rev 5095)
+++ branches/avidemux_2.6_branch_mean/avidemux/commonCmakeApplication.cmake	2009-07-17 17:54:44 UTC (rev 5096)
@@ -123,6 +123,7 @@
 ../common/gui_savenew.cpp  
 ../common/main.cpp  
 ../common/gui_action.cpp
+../common/gui_audio.cpp
 ../common/gui_blackframes.cpp
 ../common/ADM_imageLoader.cpp  
 ../common/ADM_gettext.cpp

Modified: branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/ADM_dialog/DIA_properties.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/ADM_dialog/DIA_properties.cpp	2009-07-15 19:37:44 UTC (rev 5095)
+++ branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/ADM_dialog/DIA_properties.cpp	2009-07-17 17:54:44 UTC (rev 5096)
@@ -15,7 +15,6 @@
 
 extern const char *getStrFromAudioCodec( uint32_t codec);
 static GtkWidget	*create_dialog1 (void);
-
 void DIA_properties( void )
 {
 



From mean at mail.berlios.de  Fri Jul 17 19:54:49 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Fri, 17 Jul 2009 19:54:49 +0200
Subject: [Avidemux-svn-commit] r5097 - in
	branches/avidemux_2.6_branch_mean/avidemux: .
	common/ADM_audioFilter/src common/ADM_audiocodec
	common/ADM_codecs common/ADM_commonUI common/ADM_editor
	common/ADM_filter common/ADM_muxerGate/src
	common/ADM_osSupport common/ADM_requant common/ADM_script
	common/ADM_toolkit common/ADM_video common/ADM_videoEncoder
	common/ADM_videoFilter common/ADM_videoFilter2 qt4
Message-ID: <200907171754.n6HHsnrY004645@sheep.berlios.de>

Author: mean
Date: 2009-07-17 19:54:47 +0200 (Fri, 17 Jul 2009)
New Revision: 5097

Modified:
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_audioFilter/src/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_audiocodec/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_codecs/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_commonUI/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_filter/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_muxerGate/src/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_osSupport/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_requant/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_toolkit/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_video/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoEncoder/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoFilter/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoFilter2/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux/commonCmakeApplication.cmake
   branches/avidemux_2.6_branch_mean/avidemux/qt4/CMakeLists.txt
Log:
[all] Rename all libs to *6 to avoid crash with avidemux 2.5

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_audioFilter/src/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_audioFilter/src/CMakeLists.txt	2009-07-17 17:54:44 UTC (rev 5096)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_audioFilter/src/CMakeLists.txt	2009-07-17 17:54:47 UTC (rev 5097)
@@ -27,5 +27,5 @@
 ADD_DEFINITIONS(-I${CMAKE_CURRENT_SOURCE_DIR})
 
 #
-ADD_LIBRARY(ADM_audioFilter STATIC ${ADM_audioFilter_SRCS})
+ADD_LIBRARY(ADM_audioFilter6 STATIC ${ADM_audioFilter_SRCS})
 # END

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_audiocodec/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_audiocodec/CMakeLists.txt	2009-07-17 17:54:44 UTC (rev 5096)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_audiocodec/CMakeLists.txt	2009-07-17 17:54:47 UTC (rev 5097)
@@ -5,4 +5,4 @@
 ADM_codecwav.cpp  
 ADM_pluginLoad.cpp)
 
-ADD_LIBRARY(ADM_audiocodec STATIC ${ADM_audiocodec_SRCS})
+ADD_LIBRARY(ADM_audiocodec6 STATIC ${ADM_audiocodec_SRCS})

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_codecs/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_codecs/CMakeLists.txt	2009-07-17 17:54:44 UTC (rev 5096)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_codecs/CMakeLists.txt	2009-07-17 17:54:47 UTC (rev 5097)
@@ -9,7 +9,7 @@
 ADM_ffmpeg_vdpau.cpp
 )
 
-ADD_LIBRARY(ADM_codecs STATIC ${ADM_codecs_SRCS})
+ADD_LIBRARY(ADM_codecs6 STATIC ${ADM_codecs_SRCS})
 
 IF (USE_PNG)
 	 ADD_SOURCE_CFLAGS(ADM_png.cpp ${PNG_CFLAGS})

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_commonUI/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_commonUI/CMakeLists.txt	2009-07-17 17:54:44 UTC (rev 5096)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_commonUI/CMakeLists.txt	2009-07-17 17:54:47 UTC (rev 5097)
@@ -1,4 +1,4 @@
-SET(ADM_LIB ADM_commonUI)
+SET(ADM_LIB ADM_commonUI6)
 
 SET(${ADM_LIB}_SRCS
 DIA_resizeWiz.cpp  

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/CMakeLists.txt	2009-07-17 17:54:44 UTC (rev 5096)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/CMakeLists.txt	2009-07-17 17:54:47 UTC (rev 5097)
@@ -13,4 +13,4 @@
 ADM_edPtsDts.cpp
 )
 
-ADD_LIBRARY(ADM_editor STATIC ${ADM_editor_SRCS})
+ADD_LIBRARY(ADM_editor6 STATIC ${ADM_editor_SRCS})

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_filter/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_filter/CMakeLists.txt	2009-07-17 17:54:44 UTC (rev 5096)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_filter/CMakeLists.txt	2009-07-17 17:54:47 UTC (rev 5097)
@@ -6,5 +6,5 @@
 filter_autoFilter.cpp
 vidVCD.cpp)
 
-ADD_LIBRARY(ADM_filter STATIC ${ADM_filter_SRCS})
-ADD_TARGET_CFLAGS(ADM_filter -I${LIBXML2_INCLUDE_DIR} ${LIBXML2_DEFINITIONS})
+ADD_LIBRARY(ADM_filter6 STATIC ${ADM_filter_SRCS})
+ADD_TARGET_CFLAGS(ADM_filter6 -I${LIBXML2_INCLUDE_DIR} ${LIBXML2_DEFINITIONS})

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_muxerGate/src/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_muxerGate/src/CMakeLists.txt	2009-07-17 17:54:44 UTC (rev 5096)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_muxerGate/src/CMakeLists.txt	2009-07-17 17:54:47 UTC (rev 5097)
@@ -4,4 +4,4 @@
 ADM_createStreams.cpp
 )
 include_directories(../include)
-ADD_LIBRARY(ADM_muxerGate STATIC ${ADM_muxerGate_SRCS})
+ADD_LIBRARY(ADM_muxerGate6 STATIC ${ADM_muxerGate_SRCS})

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_osSupport/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_osSupport/CMakeLists.txt	2009-07-17 17:54:44 UTC (rev 5096)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_osSupport/CMakeLists.txt	2009-07-17 17:54:47 UTC (rev 5097)
@@ -4,5 +4,5 @@
 ADM_queue.cpp 
 )
 
-ADD_LIBRARY(ADM_osSupport STATIC ${ADM_osSupport_SRCS})
+ADD_LIBRARY(ADM_osSupport6 STATIC ${ADM_osSupport_SRCS})
 

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_requant/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_requant/CMakeLists.txt	2009-07-17 17:54:44 UTC (rev 5096)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_requant/CMakeLists.txt	2009-07-17 17:54:47 UTC (rev 5097)
@@ -1,3 +1,3 @@
 SET(ADM_requant_SRCS tcrequant.c)
 
-ADD_LIBRARY(ADM_requant STATIC ${ADM_requant_SRCS})
+ADD_LIBRARY(ADM_requant6 STATIC ${ADM_requant_SRCS})

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script/CMakeLists.txt	2009-07-17 17:54:44 UTC (rev 5096)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script/CMakeLists.txt	2009-07-17 17:54:47 UTC (rev 5097)
@@ -3,5 +3,5 @@
 	ADM_Avidemux.cpp       ADM_JSAvidemuxAudio.cpp  ADM_JSAvidemuxVideo.cpp  ADM_JSFunctions.cpp        DirectorySearch.cpp
         ADM_JSFunctionsNonRegFactory.cpp)
 
-ADD_LIBRARY(ADM_script STATIC ${ADM_script_SRCS})
-ADD_TARGET_CFLAGS(ADM_script "-DJS_THREADSAFE -DXP_UNIX")
+ADD_LIBRARY(ADM_script6 STATIC ${ADM_script_SRCS})
+ADD_TARGET_CFLAGS(ADM_script6 "-DJS_THREADSAFE -DXP_UNIX")

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_toolkit/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_toolkit/CMakeLists.txt	2009-07-17 17:54:44 UTC (rev 5096)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_toolkit/CMakeLists.txt	2009-07-17 17:54:47 UTC (rev 5097)
@@ -1,4 +1,4 @@
 SET(ADM_toolkit_SRCS 
 	ADM_audioQueue.cpp  ADM_packetQueue.cpp  automation.cpp  filesel.cpp)
 	
-ADD_LIBRARY(ADM_toolkit STATIC ${ADM_toolkit_SRCS})
+ADD_LIBRARY(ADM_toolkit6 STATIC ${ADM_toolkit_SRCS})

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_video/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_video/CMakeLists.txt	2009-07-17 17:54:44 UTC (rev 5096)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_video/CMakeLists.txt	2009-07-17 17:54:47 UTC (rev 5097)
@@ -3,11 +3,11 @@
 ADM_vidRaw.cpp        
 ADM_vidNull.cpp)
 
-ADD_LIBRARY(ADM_video ${ADM_video_SRCS})
+ADD_LIBRARY(ADM_video6 ${ADM_video_SRCS})
 
 IF (USE_FREETYPE)
-	ADD_TARGET_CFLAGS(ADM_video ${FREETYPE2_CFLAGS})
+	ADD_TARGET_CFLAGS(ADM_video6 ${FREETYPE2_CFLAGS})
 ENDIF (USE_FREETYPE)
 
-ADD_TARGET_CFLAGS(ADM_video "-I../ADM_inputs")
+ADD_TARGET_CFLAGS(ADM_video6 "-I../ADM_inputs")
 #ADM_vidFieldUnblend.cpp  

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoEncoder/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoEncoder/CMakeLists.txt	2009-07-17 17:54:44 UTC (rev 5096)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoEncoder/CMakeLists.txt	2009-07-17 17:54:47 UTC (rev 5097)
@@ -2,4 +2,4 @@
 	ADM_VideoEncoders.cpp
         ADM_dynVideoEncoder.cpp
 )
-ADD_LIBRARY(ADM_videoEncoder STATIC ${ADM_internalVideoEncoder_SRCS})
+ADD_LIBRARY(ADM_videoEncoder6 STATIC ${ADM_internalVideoEncoder_SRCS})

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoFilter/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoFilter/CMakeLists.txt	2009-07-17 17:54:44 UTC (rev 5096)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoFilter/CMakeLists.txt	2009-07-17 17:54:47 UTC (rev 5097)
@@ -8,5 +8,5 @@
 	ADM_vidThreshold.cpp
 	ADM_vidNumber.cpp)
 
-ADD_LIBRARY(ADM_videoFilter STATIC ${ADM_videoFilter_SRCS})
+ADD_LIBRARY(ADM_videoFilter6 STATIC ${ADM_videoFilter_SRCS})
 

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoFilter2/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoFilter2/CMakeLists.txt	2009-07-17 17:54:44 UTC (rev 5096)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoFilter2/CMakeLists.txt	2009-07-17 17:54:47 UTC (rev 5097)
@@ -2,4 +2,4 @@
 	ADM_videoFilterBridge.cpp
         ADM_filterChain.cpp
 )
-ADD_LIBRARY(ADM_internalVideoFilter STATIC ${ADM_internalVideoFilter_SRCS})
+ADD_LIBRARY(ADM_internalVideoFilter6 STATIC ${ADM_internalVideoFilter_SRCS})

Modified: branches/avidemux_2.6_branch_mean/avidemux/commonCmakeApplication.cmake
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/commonCmakeApplication.cmake	2009-07-17 17:54:44 UTC (rev 5096)
+++ branches/avidemux_2.6_branch_mean/avidemux/commonCmakeApplication.cmake	2009-07-17 17:54:47 UTC (rev 5097)
@@ -159,23 +159,23 @@
 # Add common libs
 #############################################
 SET(commonLibs1
-ADM_muxerGate 
-ADM_audioFilter
-ADM_editor 
-ADM_audiocodec 
-ADM_codecs 
-ADM_commonUI
+ADM_muxerGate6
+ADM_audioFilter6
+ADM_editor6
+ADM_audiocodec6 
+ADM_codecs6 
+ADM_commonUI6
 )
 SET(commonLibs2
-ADM_filter 
-ADM_osSupport 
-ADM_requant 
-ADM_script 
-ADM_toolkit 
-ADM_videoEncoder 
-ADM_video 
-ADM_videoFilter 
-ADM_internalVideoFilter
+ADM_filter6 
+ADM_osSupport6 
+ADM_requant6 
+ADM_script6 
+ADM_toolkit6
+ADM_videoEncoder6 
+ADM_video6 
+ADM_videoFilter6 
+ADM_internalVideoFilter6
 )
 
 # END

Modified: branches/avidemux_2.6_branch_mean/avidemux/qt4/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/qt4/CMakeLists.txt	2009-07-17 17:54:44 UTC (rev 5096)
+++ branches/avidemux_2.6_branch_mean/avidemux/qt4/CMakeLists.txt	2009-07-17 17:54:47 UTC (rev 5097)
@@ -58,7 +58,7 @@
 FOREACH (_libName ${commonLibs2})
         TARGET_LINK_LIBRARIES(avidemux2_qt4 ${_libName})
 ENDFOREACH (_libName ${commonLibs})
-TARGET_LINK_LIBRARIES(avidemux2_qt4 ADM_filter)
+TARGET_LINK_LIBRARIES(avidemux2_qt4 ADM_filter6)
 #############################################
 # Add qt specific libs
 #############################################



From mean at mail.berlios.de  Fri Jul 17 19:55:00 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Fri, 17 Jul 2009 19:55:00 +0200
Subject: [Avidemux-svn-commit] r5098 - in branches/avidemux_2.6_branch_mean:
 avidemux avidemux/common/ADM_render avidemux/gtk/ADM_UIs/src
 avidemux/qt4/ADM_UIs/src avidemux_core/ADM_core/src
 avidemux_core/ADM_coreAudio/src avidemux_core/ADM_coreAudioDevice/src
 avidemux_core/ADM_coreAudioEncoder/src
 avidemux_core/ADM_coreAudioFilter/src avidemux_core/ADM_coreAudioParser/src
 avidemux_core/ADM_coreDemuxer/src avidemux_core/ADM_coreDemuxerMpeg/src
 avidemux_core/ADM_coreImage/src avidemux_core/ADM_coreMuxer/src
 avidemux_core/ADM_coreUI/src avidemux_core/ADM_coreUtils/src
 avidemux_core/ADM_coreVideoEncoder/src
 avidemux_core/ADM_coreVideoFilter/src avidemux_core/ADM_ffmpeg/libavcodec
 avidemux_core/ADM_ffmpeg/libavformat avidemux_core/ADM_ffmpeg/libavutil
 avidemux_core/ADM_ffmpeg/libpostproc avidemux_core/ADM_ffmpeg/libswscale
 avidemux_core/ADM_smjs
 avidemux_plugins/ADM_audioDecoders/ADM_ad_ac3/ADM_liba52
 avidemux_plugins/ADM_audioDecoders/ADM_ad_amrnb
 avidemux_plugins/ADM_audioDecoders/ADM_ad_dca avidemu!
 x_plugins/ADM_audioDecoders/ADM_ad_faad
 avidemux_plugins/ADM_audioDecoders/ADM_ad_ima_adpcm
 avidemux_plugins/ADM_audioDecoders/ADM_ad_lav
 avidemux_plugins/ADM_audioDecoders/ADM_ad_mad/ADM_libMad
 avidemux_plugins/ADM_audioDecoders/ADM_ad_ms_adpcm
 avidemux_plugins/ADM_audioDecoders/ADM_ad_ulaw
 avidemux_plugins/ADM_audioDevices/Sdl
 avidemux_plugins/ADM_audioDevices/Win32
 avidemux_plugins/ADM_audioEncoders/aften
 avidemux_plugins/ADM_audioEncoders/faac
 avidemux_plugins/ADM_audioEncoders/lame
 avidemux_plugins/ADM_audioEncoders/lavcodec
 avidemux_plugins/ADM_audioEncoders/pcm
 avidemux_plugins/ADM_audioEncoders/twolame
 avidemux_plugins/ADM_audioEncoders/vorbis avidemux_plugins/ADM_demuxers/Flv
 avidemux_plugins/ADM_demuxers/Matroska avidemux_plugins/ADM_demuxers/MpegPS
 avidemux_plugins/ADM_demuxers/MpegTS avidemux_plugins/ADM_muxers/muxerFlv
 avidemux_plugins/ADM_muxers/muxerMp4 avidemux_plugins/ADM_muxers/oplug_flv
 avidemux_plugins/ADM_videoEncoder/ffMpeg4 avidemux_plugins/ADM_videoE!
 ncoder/ffMsMpeg4 avidemux_plugins/ADM_videoEncoder/huff avidem! ux_plugi
Message-ID: <200907171755.n6HHt0BQ004665@sheep.berlios.de>

Author: mean
Date: 2009-07-17 19:54:56 +0200 (Fri, 17 Jul 2009)
New Revision: 5098

Modified:
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_render/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux/commonCmakeApplication.cmake
   branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_UIs/src/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_UIs/src/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_core/src/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreAudio/src/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreAudioDevice/src/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreAudioEncoder/src/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreAudioFilter/src/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreAudioParser/src/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreDemuxer/src/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreDemuxerMpeg/src/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreImage/src/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreMuxer/src/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUI/src/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/src/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoEncoder/src/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoFilter/src/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavcodec/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavformat/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavutil/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libpostproc/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libswscale/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_smjs/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioDecoders/ADM_ad_ac3/ADM_liba52/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioDecoders/ADM_ad_amrnb/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioDecoders/ADM_ad_dca/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioDecoders/ADM_ad_faad/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioDecoders/ADM_ad_ima_adpcm/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioDecoders/ADM_ad_lav/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioDecoders/ADM_ad_mad/ADM_libMad/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioDecoders/ADM_ad_ms_adpcm/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioDecoders/ADM_ad_ulaw/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioDevices/Sdl/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioDevices/Win32/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioEncoders/aften/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioEncoders/faac/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioEncoders/lame/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioEncoders/lavcodec/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioEncoders/pcm/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioEncoders/twolame/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioEncoders/vorbis/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/Flv/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/Matroska/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegPS/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerFlv/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerMp4/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/oplug_flv/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/ffMpeg4/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/ffMsMpeg4/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/huff/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/jpeg/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/cmake/ad_plugin.cmake
   branches/avidemux_2.6_branch_mean/cmake/ae_plugin.cmake
   branches/avidemux_2.6_branch_mean/cmake/dm_plugin.cmake
   branches/avidemux_2.6_branch_mean/cmake/mx_plugin.cmake
   branches/avidemux_2.6_branch_mean/cmake/ve_plugin.cmake
   branches/avidemux_2.6_branch_mean/cmake/vf_plugin.cmake
   branches/avidemux_2.6_branch_mean/cmake/vf_plugin_gtk.cmake
   branches/avidemux_2.6_branch_mean/cmake/vf_plugin_qt4.cmake
Log:
[all] Rename libfoo to libfoo6 to avoid clash with avidemux 2.5

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_render/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_render/CMakeLists.txt	2009-07-17 17:54:47 UTC (rev 5097)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_render/CMakeLists.txt	2009-07-17 17:54:56 UTC (rev 5098)
@@ -11,7 +11,7 @@
 ENDIF (APPLE)
 
 ADD_LIBRARY(${ADM_LIB} SHARED ${${ADM_LIB}_SRCS})
-TARGET_LINK_LIBRARIES( ${ADM_LIB} ADM_core ADM_coreUI ADM_coreImage)
+TARGET_LINK_LIBRARIES( ${ADM_LIB} ADM_core6 ADM_coreUI6 ADM_coreImage6)
 SDLify(GUI_sdlRender.cpp)
 IF (GETTEXT_FOUND)
         TARGET_LINK_LIBRARIES(${ADM_LIB}  ${GETTEXT_LIBRARY_DIR})

Modified: branches/avidemux_2.6_branch_mean/avidemux/commonCmakeApplication.cmake
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/commonCmakeApplication.cmake	2009-07-17 17:54:47 UTC (rev 5097)
+++ branches/avidemux_2.6_branch_mean/avidemux/commonCmakeApplication.cmake	2009-07-17 17:54:56 UTC (rev 5098)
@@ -133,26 +133,26 @@
 # Add core libs
 #############################################
 SET(coreLibs
-ADM_core
-ADM_audioParser
-ADM_coreAudio
-ADM_coreAudioFilterAPI
-ADM_coreAudioDevice
-ADM_coreAudioEncoder
-ADM_coreDemuxer
-ADM_coreDemuxerMpeg
-ADM_coreImage
-ADM_coreMuxer
-ADM_coreUI
-ADM_coreUtils
-ADM_coreVideoEncoder
-ADM_coreVideoFilter
-ADM_libavcodec
-ADM_libavformat
-ADM_libavutil
-ADM_libswscale
-ADM_libpostproc
-ADM_smjs
+ADM_core6
+ADM_audioParser6
+ADM_coreAudio6
+ADM_coreAudioFilterAPI6
+ADM_coreAudioDevice6
+ADM_coreAudioEncoder6
+ADM_coreDemuxer6
+ADM_coreDemuxerMpeg6
+ADM_coreImage6
+ADM_coreMuxer6
+ADM_coreUI6
+ADM_coreUtils6
+ADM_coreVideoEncoder6
+ADM_coreVideoFilter6
+ADM_libavcodec6
+ADM_libavformat6
+ADM_libavutil6
+ADM_libswscale6
+ADM_libpostproc6
+ADM_smjs6
 )
 
 #############################################

Modified: branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_UIs/src/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_UIs/src/CMakeLists.txt	2009-07-17 17:54:47 UTC (rev 5097)
+++ branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_UIs/src/CMakeLists.txt	2009-07-17 17:54:56 UTC (rev 5098)
@@ -26,6 +26,6 @@
 )
 INCLUDE_DIRECTORIES(${CMAKE_CURRENT_SOURCE_DIR}/../include)
 ADD_LIBRARY(${ADM_LIB} SHARED ${${ADM_LIB}_SRCS})
-TARGET_LINK_LIBRARIES(${ADM_LIB} ${GTK_LDFLAGS} ADM_core ADM_coreUI ADM_render6_gtk)
+TARGET_LINK_LIBRARIES(${ADM_LIB} ${GTK_LDFLAGS} ADM_core6 ADM_coreUI6 ADM_render6_gtk)
 ADD_TARGET_CFLAGS(${ADM_LIB} ${GTK_CFLAGS})
 ADM_INSTALL_LIB( ${ADM_LIB} )

Modified: branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_UIs/src/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_UIs/src/CMakeLists.txt	2009-07-17 17:54:47 UTC (rev 5097)
+++ branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_UIs/src/CMakeLists.txt	2009-07-17 17:54:56 UTC (rev 5098)
@@ -18,6 +18,6 @@
 INCLUDE_DIRECTORIES(${CMAKE_CURRENT_BINARY_DIR} ${QT_INCLUDE_DIR})
 INCLUDE_DIRECTORIES(${CMAKE_CURRENT_SOURCE_DIR}/../include)
 ADD_LIBRARY(${ADM_LIB} SHARED ${${ADM_LIB}_SRCS})
-TARGET_LINK_LIBRARIES(${ADM_LIB} ADM_core ADM_coreUI ${QT_QTGUI_LIBRARY} ${QT_QTCORE_LIBRARY} ADM_render6_qt4)
+TARGET_LINK_LIBRARIES(${ADM_LIB} ADM_core6 ADM_coreUI6 ${QT_QTGUI_LIBRARY} ${QT_QTCORE_LIBRARY} ADM_render6_qt4)
 #INSTALL(TARGETS ${ADM_LIB} RUNTIME DESTINATION ${BIN_DIR}  LIBRARY DESTINATION lib  ARCHIVE DESTINATION lib)
 ADM_INSTALL_LIB( ${ADM_LIB} )

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_core/src/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_core/src/CMakeLists.txt	2009-07-17 17:54:47 UTC (rev 5097)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_core/src/CMakeLists.txt	2009-07-17 17:54:56 UTC (rev 5098)
@@ -4,19 +4,19 @@
         ADM_debug.cpp 
 )
 
-ADD_LIBRARY(ADM_core SHARED ${ADM_core_SRCS})
-ADD_TARGET_DEFINITIONS(ADM_core ADM_DEBUG FIND_LEAKS)
+ADD_LIBRARY(ADM_core6 SHARED ${ADM_core_SRCS})
+ADD_TARGET_DEFINITIONS(ADM_core6 ADM_DEBUG FIND_LEAKS)
 
 IF (MINGW)
-	TARGET_LINK_LIBRARIES(ADM_core "${PTHREAD_LIBRARIES}" imagehlp ws2_32)
-	ADD_TARGET_CFLAGS(ADM_core "-I${PTHREAD_INCLUDE_DIR}")
+	TARGET_LINK_LIBRARIES(ADM_core6 "${PTHREAD_LIBRARIES}" imagehlp ws2_32)
+	ADD_TARGET_CFLAGS(ADM_core6 "-I${PTHREAD_INCLUDE_DIR}")
 ELSEIF (APPLE)
-	ADD_TARGET_LDFLAGS(ADM_core "-framework Carbon")
+	ADD_TARGET_LDFLAGS(ADM_core6 "-framework Carbon")
 ENDIF (MINGW)
 
 REMOVE_DEFINITIONS(-DHAVE_CONFIG_H)
 
 # pthreads
 
-ADM_LINK_THREAD(ADM_core)
-ADM_INSTALL_LIB(ADM_core)
+ADM_LINK_THREAD(ADM_core6)
+ADM_INSTALL_LIB(ADM_core6)

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreAudio/src/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreAudio/src/CMakeLists.txt	2009-07-17 17:54:47 UTC (rev 5097)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreAudio/src/CMakeLists.txt	2009-07-17 17:54:56 UTC (rev 5098)
@@ -8,8 +8,8 @@
 )	
 #*************************************************
 #*************************************************
-ADD_LIBRARY(ADM_coreAudio SHARED ${ADMaudioCore_SRCS})
+ADD_LIBRARY(ADM_coreAudio6 SHARED ${ADMaudioCore_SRCS})
 INCLUDE_DIRECTORIES(${CMAKE_SOURCE_DIR}/avidemux/ADM_coreAudio/include)
-TARGET_LINK_LIBRARIES(ADM_coreAudio ADM_core ADM_coreUI ADM_audioParser)
+TARGET_LINK_LIBRARIES(ADM_coreAudio6 ADM_core6 ADM_coreUI6 ADM_audioParser6)
 
-ADM_INSTALL_LIB(ADM_coreAudio)
+ADM_INSTALL_LIB(ADM_coreAudio6)

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreAudioDevice/src/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreAudioDevice/src/CMakeLists.txt	2009-07-17 17:54:47 UTC (rev 5097)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreAudioDevice/src/CMakeLists.txt	2009-07-17 17:54:56 UTC (rev 5098)
@@ -2,7 +2,7 @@
 	ADM_audiodevice.cpp  
 	)
 
-ADD_LIBRARY(ADM_coreAudioDevice SHARED ${ADM_audiodevice_SRCS})
-TARGET_LINK_LIBRARIES(ADM_coreAudioDevice ADM_core ADM_coreUI ADM_coreAudio ADM_coreUtils)
+ADD_LIBRARY(ADM_coreAudioDevice6 SHARED ${ADM_audiodevice_SRCS})
+TARGET_LINK_LIBRARIES(ADM_coreAudioDevice6 ADM_core6 ADM_coreUI6 ADM_coreAudio6 ADM_coreUtils6)
 INCLUDE_DIRECTORIES(${CMAKE_SOURCE_DIR}/avidemux/ADM_coreAudio/include)
-ADM_INSTALL_LIB(ADM_coreAudioDevice)
+ADM_INSTALL_LIB(ADM_coreAudioDevice6)

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreAudioEncoder/src/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreAudioEncoder/src/CMakeLists.txt	2009-07-17 17:54:47 UTC (rev 5097)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreAudioEncoder/src/CMakeLists.txt	2009-07-17 17:54:56 UTC (rev 5098)
@@ -4,7 +4,7 @@
 )	
 #*************************************************
 #*************************************************
-ADD_LIBRARY(ADM_coreAudioEncoder SHARED ${ADMaudioCoreEncoder_SRCS})
-TARGET_LINK_LIBRARIES(ADM_coreAudioEncoder ADM_core ADM_coreAudio ADM_coreAudioFilterAPI ADM_coreUI)
+ADD_LIBRARY(ADM_coreAudioEncoder6 SHARED ${ADMaudioCoreEncoder_SRCS})
+TARGET_LINK_LIBRARIES(ADM_coreAudioEncoder6 ADM_core6 ADM_coreAudio6 ADM_coreAudioFilterAPI6 ADM_coreUI6)
 
-ADM_INSTALL_LIB(ADM_coreAudioEncoder)
+ADM_INSTALL_LIB(ADM_coreAudioEncoder6)

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreAudioFilter/src/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreAudioFilter/src/CMakeLists.txt	2009-07-17 17:54:47 UTC (rev 5097)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreAudioFilter/src/CMakeLists.txt	2009-07-17 17:54:56 UTC (rev 5098)
@@ -4,7 +4,7 @@
 audiofilterAPI.cpp
 )
 # For the API part, needed by coreAudioEncoder
-ADD_LIBRARY(ADM_coreAudioFilterAPI SHARED ${ADM_audioFilterAPI_SRCS})
-TARGET_LINK_LIBRARIES(ADM_coreAudioFilterAPI ADM_core ADM_coreUI  )
-ADM_INSTALL_LIB(ADM_coreAudioFilterAPI)
+ADD_LIBRARY(ADM_coreAudioFilterAPI6 SHARED ${ADM_audioFilterAPI_SRCS})
+TARGET_LINK_LIBRARIES(ADM_coreAudioFilterAPI6 ADM_core6 ADM_coreUI6  )
+ADM_INSTALL_LIB(ADM_coreAudioFilterAPI6)
 # END

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreAudioParser/src/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreAudioParser/src/CMakeLists.txt	2009-07-17 17:54:47 UTC (rev 5097)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreAudioParser/src/CMakeLists.txt	2009-07-17 17:54:56 UTC (rev 5098)
@@ -12,7 +12,7 @@
 ADD_DEFINITIONS( "-DPACKAGE=`"SRC`"")
 ADD_DEFINITIONS( "-DVERSION=`"0.1.4`"")
 #*************************************************
-ADD_LIBRARY(ADM_audioParser SHARED ${ADMaudioParser_SRCS})
-TARGET_LINK_LIBRARIES(ADM_audioParser ADM_core ADM_coreUI)
+ADD_LIBRARY(ADM_audioParser6 SHARED ${ADMaudioParser_SRCS})
+TARGET_LINK_LIBRARIES(ADM_audioParser6 ADM_core6 ADM_coreUI6)
 
-ADM_INSTALL_LIB(ADM_audioParser)
+ADM_INSTALL_LIB(ADM_audioParser6)

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreDemuxer/src/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreDemuxer/src/CMakeLists.txt	2009-07-17 17:54:47 UTC (rev 5097)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreDemuxer/src/CMakeLists.txt	2009-07-17 17:54:56 UTC (rev 5098)
@@ -4,8 +4,8 @@
 ADM_demuxer.cpp
 )	
 #*************************************************
-ADD_LIBRARY(ADM_coreDemuxer SHARED ${ADMcoreDemuxer_SRCS})
+ADD_LIBRARY(ADM_coreDemuxer6 SHARED ${ADMcoreDemuxer_SRCS})
 INCLUDE_DIRECTORIES(${CMAKE_SOURCE_DIR}/avidemux/ADM_coreAudio/include)
-TARGET_LINK_LIBRARIES(ADM_coreDemuxer ADM_coreImage ADM_coreAudio ADM_core)
+TARGET_LINK_LIBRARIES(ADM_coreDemuxer6 ADM_coreImage6 ADM_coreAudio6 ADM_core6)
 
-ADM_INSTALL_LIB(ADM_coreDemuxer)
+ADM_INSTALL_LIB(ADM_coreDemuxer6)

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreDemuxerMpeg/src/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreDemuxerMpeg/src/CMakeLists.txt	2009-07-17 17:54:47 UTC (rev 5097)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreDemuxerMpeg/src/CMakeLists.txt	2009-07-17 17:54:56 UTC (rev 5098)
@@ -10,7 +10,7 @@
 dmxPSPacket.cpp
 )	
 #*************************************************
-ADD_LIBRARY(ADM_coreDemuxerMpeg SHARED ${ADMcoreDemuxerMpeg_SRCS})
-TARGET_LINK_LIBRARIES(ADM_coreDemuxerMpeg ADM_core)
+ADD_LIBRARY(ADM_coreDemuxerMpeg6 SHARED ${ADMcoreDemuxerMpeg_SRCS})
+TARGET_LINK_LIBRARIES(ADM_coreDemuxerMpeg6 ADM_core6)
 INCLUDE_DIRECTORIES(${CMAKE_CURRENT_SOURCE_DIR}/../include)
-ADM_INSTALL_LIB(ADM_coreDemuxerMpeg)
+ADM_INSTALL_LIB(ADM_coreDemuxerMpeg6)

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreImage/src/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreImage/src/CMakeLists.txt	2009-07-17 17:54:47 UTC (rev 5097)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreImage/src/CMakeLists.txt	2009-07-17 17:54:56 UTC (rev 5098)
@@ -20,12 +20,12 @@
         ADM_imageSave.cpp
 )
 
-ADD_LIBRARY(ADM_coreImage SHARED ${ADM_coreImage_SRCS})
+ADD_LIBRARY(ADM_coreImage6 SHARED ${ADM_coreImage_SRCS})
 ADD_SOURCE_CFLAGS(DIA_flyDialog.cpp " -DADM_UI_TYPE_BUILD=99")
 IF (APPLE)
-	TARGET_LINK_LIBRARIES(ADM_coreImage -Wl,-read_only_relocs,suppress)
+	TARGET_LINK_LIBRARIES(ADM_coreImage6 -Wl,-read_only_relocs,suppress)
 ENDIF (APPLE)
 
-TARGET_LINK_LIBRARIES(ADM_coreImage ADM_core ADM_coreUI ADM_libswscale ADM_libpostproc)
-TARGET_LINK_LIBRARIES(ADM_coreImage ADM_libavcodec ADM_libavutil )
-ADM_INSTALL_LIB(ADM_coreImage)
+TARGET_LINK_LIBRARIES(ADM_coreImage6 ADM_core6 ADM_coreUI6 ADM_libswscale6 ADM_libpostproc6)
+TARGET_LINK_LIBRARIES(ADM_coreImage6 ADM_libavcodec6 ADM_libavutil6 )
+ADM_INSTALL_LIB(ADM_coreImage6)

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreMuxer/src/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreMuxer/src/CMakeLists.txt	2009-07-17 17:54:47 UTC (rev 5097)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreMuxer/src/CMakeLists.txt	2009-07-17 17:54:56 UTC (rev 5098)
@@ -5,9 +5,9 @@
 ADM_audioClock.cpp
 )	
 #*************************************************
-ADD_LIBRARY(ADM_coreMuxer SHARED ${ADMcoreMuxer_SRCS})
+ADD_LIBRARY(ADM_coreMuxer6 SHARED ${ADMcoreMuxer_SRCS})
 INCLUDE_DIRECTORIES(${CMAKE_SOURCE_DIR}/avidemux/ADM_coreAudio/include)
 INCLUDE_DIRECTORIES(${CMAKE_SOURCE_DIR}/avidemux/ADM_libraries/ADM_ffmpeg)
-TARGET_LINK_LIBRARIES(ADM_coreMuxer ADM_coreImage ADM_coreAudio ADM_core ADM_libavcodec ADM_libavformat ADM_libavutil)
+TARGET_LINK_LIBRARIES(ADM_coreMuxer6 ADM_coreImage6 ADM_coreAudio6 ADM_core6 ADM_libavcodec6 ADM_libavformat6 ADM_libavutil6)
 
-ADM_INSTALL_LIB(ADM_coreMuxer)
+ADM_INSTALL_LIB(ADM_coreMuxer6)

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUI/src/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUI/src/CMakeLists.txt	2009-07-17 17:54:47 UTC (rev 5097)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUI/src/CMakeLists.txt	2009-07-17 17:54:56 UTC (rev 5098)
@@ -6,7 +6,7 @@
         DIA_encoding.cpp
 )
 
-ADD_LIBRARY(ADM_coreUI SHARED ${ADM_coreUI_SRCS})
-TARGET_LINK_LIBRARIES(ADM_coreUI ADM_core)
+ADD_LIBRARY(ADM_coreUI6 SHARED ${ADM_coreUI_SRCS})
+TARGET_LINK_LIBRARIES(ADM_coreUI6 ADM_core6)
 
-ADM_INSTALL_LIB(ADM_coreUI)
+ADM_INSTALL_LIB(ADM_coreUI6)

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/src/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/src/CMakeLists.txt	2009-07-17 17:54:47 UTC (rev 5097)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/src/CMakeLists.txt	2009-07-17 17:54:56 UTC (rev 5098)
@@ -9,11 +9,11 @@
 ADM_file.cpp
 prefs.cpp)
 
-ADD_LIBRARY(ADM_coreUtils SHARED ${ADM_coreUtils_SRCS})
+ADD_LIBRARY(ADM_coreUtils6 SHARED ${ADM_coreUtils_SRCS})
 
-TARGET_LINK_LIBRARIES(ADM_coreUtils ADM_core ADM_coreUI ADM_libavutil ADM_libavcodec ${LIBXML2_LIBRARIES})
+TARGET_LINK_LIBRARIES(ADM_coreUtils6 ADM_core6 ADM_coreUI6 ADM_libavutil6 ADM_libavcodec6 ${LIBXML2_LIBRARIES})
 
 
 ADD_SOURCE_CFLAGS(prefs.cpp -I${LIBXML2_INCLUDE_DIR} ${LIBXML2_DEFINITIONS})
 ADD_SOURCE_CFLAGS(ADM_quota.cpp -I${LIBXML2_INCLUDE_DIR} ${LIBXML2_DEFINITIONS})
-ADM_INSTALL_LIB(ADM_coreUtils)
+ADM_INSTALL_LIB(ADM_coreUtils6)

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoEncoder/src/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoEncoder/src/CMakeLists.txt	2009-07-17 17:54:47 UTC (rev 5097)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoEncoder/src/CMakeLists.txt	2009-07-17 17:54:56 UTC (rev 5098)
@@ -3,8 +3,8 @@
         ADM_coreVideoEncoderFFmpeg.cpp
 )
 
-ADD_LIBRARY(ADM_coreVideoEncoder SHARED ${ADM_CoreVideoEncoder_SRCS})
-TARGET_LINK_LIBRARIES(ADM_coreVideoEncoder ADM_core ADM_coreUtils ADM_coreImage ADM_libavcodec ADM_libavutil )
+ADD_LIBRARY(ADM_coreVideoEncoder6 SHARED ${ADM_CoreVideoEncoder_SRCS})
+TARGET_LINK_LIBRARIES(ADM_coreVideoEncoder6 ADM_core6 ADM_coreUtils6 ADM_coreImage6 ADM_libavcodec6 ADM_libavutil6 )
 
-ADM_INSTALL_LIB(ADM_coreVideoEncoder)
+ADM_INSTALL_LIB(ADM_coreVideoEncoder6)
 

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoFilter/src/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoFilter/src/CMakeLists.txt	2009-07-17 17:54:47 UTC (rev 5097)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoFilter/src/CMakeLists.txt	2009-07-17 17:54:56 UTC (rev 5098)
@@ -2,8 +2,8 @@
 	ADM_coreVideoFilter.cpp
 )
 
-ADD_LIBRARY(ADM_coreVideoFilter SHARED ${ADM_CoreVideoFilter_SRCS})
-TARGET_LINK_LIBRARIES(ADM_coreVideoFilter ADM_core)
+ADD_LIBRARY(ADM_coreVideoFilter6 SHARED ${ADM_CoreVideoFilter_SRCS})
+TARGET_LINK_LIBRARIES(ADM_coreVideoFilter6 ADM_core6)
 
-ADM_INSTALL_LIB(ADM_coreVideoFilter)
+ADM_INSTALL_LIB(ADM_coreVideoFilter6)
 

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavcodec/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavcodec/CMakeLists.txt	2009-07-17 17:54:47 UTC (rev 5097)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavcodec/CMakeLists.txt	2009-07-17 17:54:56 UTC (rev 5098)
@@ -1,4 +1,4 @@
-SET(ADM_LIB ADM_libavcodec)
+SET(ADM_LIB ADM_libavcodec6)
 
 SET(${ADM_LIB}_SRCS 
 	adpcm.c  allcodecs.c  cyuv.c  dsputil.c  dv.c  error_resilience.c  fft.c  h263.c
@@ -66,6 +66,6 @@
 	ADD_SOURCE_CFLAGS(x86/snowdsp_mmx.c -O2)
 ENDIF (ADM_DEBUG AND ADM_CPU_X86_32)
 
-TARGET_LINK_LIBRARIES(${ADM_LIB} ADM_core ADM_libavutil ${ZLIB_LIBRARY})
+TARGET_LINK_LIBRARIES(${ADM_LIB} ADM_core6 ADM_libavutil6 ${ZLIB_LIBRARY})
 
 ADM_INSTALL_LIB(${ADM_LIB} )

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavformat/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavformat/CMakeLists.txt	2009-07-17 17:54:47 UTC (rev 5097)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavformat/CMakeLists.txt	2009-07-17 17:54:56 UTC (rev 5098)
@@ -1,4 +1,4 @@
-SET(ADM_LIB ADM_libavformat)
+SET(ADM_LIB ADM_libavformat6)
 
 SET(${ADM_LIB}_SRCS 
 	mpeg.c  utils.c  avio.c  aviobuf.c  cutils.c  img2.c  file.c  mpegtsenc.c
@@ -8,6 +8,6 @@
 	avc.c raw.c  riff.c)
 
 ADD_LIBRARY(${ADM_LIB} SHARED ${${ADM_LIB}_SRCS})
-TARGET_LINK_LIBRARIES(${ADM_LIB} ADM_core ADM_libavutil ADM_libavcodec)
+TARGET_LINK_LIBRARIES(${ADM_LIB} ADM_core6 ADM_libavutil6 ADM_libavcodec6)
 
 ADM_INSTALL_LIB(${ADM_LIB} )

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavutil/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavutil/CMakeLists.txt	2009-07-17 17:54:47 UTC (rev 5097)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavutil/CMakeLists.txt	2009-07-17 17:54:56 UTC (rev 5098)
@@ -1,4 +1,4 @@
-SET(ADM_LIB ADM_libavutil)
+SET(ADM_LIB ADM_libavutil6)
 
 SET(${ADM_LIB}_SRCS 
 adler32.c
@@ -26,6 +26,6 @@
 )
 
 ADD_LIBRARY(${ADM_LIB} SHARED ${${ADM_LIB}_SRCS})
-TARGET_LINK_LIBRARIES(${ADM_LIB} ADM_core)
+TARGET_LINK_LIBRARIES(${ADM_LIB} ADM_core6)
 
 ADM_INSTALL_LIB(${ADM_LIB} )

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libpostproc/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libpostproc/CMakeLists.txt	2009-07-17 17:54:47 UTC (rev 5097)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libpostproc/CMakeLists.txt	2009-07-17 17:54:56 UTC (rev 5098)
@@ -1,4 +1,4 @@
-SET(ADM_LIB ADM_libpostproc)
+SET(ADM_LIB ADM_libpostproc6)
 
 SET(${ADM_LIB}_SRCS postprocess.c)
 
@@ -8,6 +8,6 @@
 	ADD_TARGET_CFLAGS(${ADM_LIB} -O2)
 ENDIF (ADM_DEBUG AND ADM_CPU_X86_32)
 
-TARGET_LINK_LIBRARIES(${ADM_LIB} ADM_core ADM_libavutil)
+TARGET_LINK_LIBRARIES(${ADM_LIB} ADM_core6 ADM_libavutil6)
 
 ADM_INSTALL_LIB(${ADM_LIB} )

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libswscale/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libswscale/CMakeLists.txt	2009-07-17 17:54:47 UTC (rev 5097)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libswscale/CMakeLists.txt	2009-07-17 17:54:56 UTC (rev 5098)
@@ -1,4 +1,4 @@
-SET(ADM_LIB ADM_libswscale)
+SET(ADM_LIB ADM_libswscale6)
 SET(${ADM_LIB}_SRCS swscale.c yuv2rgb.c rgb2rgb.c ADM_mp.cpp swscale_avoption.c)
 
 IF (ADM_CPU_ALTIVEC)
@@ -11,6 +11,6 @@
 	ADD_TARGET_CFLAGS(${ADM_LIB} -O2)
 ENDIF (APPLE AND ADM_DEBUG)
 
-TARGET_LINK_LIBRARIES(${ADM_LIB} ADM_core ADM_libavutil)
+TARGET_LINK_LIBRARIES(${ADM_LIB} ADM_core6 ADM_libavutil6)
 
 ADM_INSTALL_LIB(${ADM_LIB} )

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_smjs/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_smjs/CMakeLists.txt	2009-07-17 17:54:47 UTC (rev 5097)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_smjs/CMakeLists.txt	2009-07-17 17:54:56 UTC (rev 5098)
@@ -1,4 +1,4 @@
-SET(ADM_LIB ADM_smjs)
+SET(ADM_LIB ADM_smjs6)
 
 SET(${ADM_LIB}_SRCS 
 	jsapi.c    jsatom.c  jscntxt.c   jsdbgapi.c  jsemit.c  jsfun.c   jsinterp.c  jslong.c  jsobj.c     jsprf.c     jsscope.c   jsutil.c    prmjtime.c
@@ -20,6 +20,6 @@
 ADD_TARGET_CFLAGS(${ADM_LIB} "-Dcalloc=ADM_calloc -I/usr/include/nspr")
 ADD_TARGET_CFLAGS(${ADM_LIB} "-Dfopen=ADM_fopen")
 
-TARGET_LINK_LIBRARIES(${ADM_LIB} ADM_core)
+TARGET_LINK_LIBRARIES(${ADM_LIB} ADM_core6)
 
 ADM_INSTALL_LIB(${ADM_LIB} )

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioDecoders/ADM_ad_ac3/ADM_liba52/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioDecoders/ADM_ad_ac3/ADM_liba52/CMakeLists.txt	2009-07-17 17:54:47 UTC (rev 5097)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioDecoders/ADM_ad_ac3/ADM_liba52/CMakeLists.txt	2009-07-17 17:54:56 UTC (rev 5098)
@@ -6,7 +6,7 @@
 ADD_LIBRARY(${ADM_LIB} STATIC ${${ADM_LIB}_SRCS})
 
 IF (WIN32 OR APPLE)
-	TARGET_LINK_LIBRARIES(${ADM_LIB} ADM_core)
+	TARGET_LINK_LIBRARIES(${ADM_LIB} ADM_core6)
 ENDIF (WIN32 OR APPLE)
 
 IF (UNIX)
@@ -17,4 +17,4 @@
 	ADD_TARGET_CFLAGS(${ADM_LIB} -DWORDS_BIGENDIAN)
 ENDIF (ADM_BIG_ENDIAN)
 
-INIT_AUDIO_PLUGIN(${ADM_LIB})
\ No newline at end of file
+INIT_AUDIO_PLUGIN(${ADM_LIB})

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioDecoders/ADM_ad_amrnb/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioDecoders/ADM_ad_amrnb/CMakeLists.txt	2009-07-17 17:54:47 UTC (rev 5097)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioDecoders/ADM_ad_amrnb/CMakeLists.txt	2009-07-17 17:54:56 UTC (rev 5098)
@@ -8,7 +8,7 @@
 	SET(ADM_ad_amrnb_SRCS ADM_ad_amrnb.cpp)
 
 	ADD_LIBRARY(ADM_ad_amrnb SHARED ${ADM_ad_amrnb_SRCS})
-	TARGET_LINK_LIBRARIES(ADM_ad_amrnb ADM_core ${AMRNB_LIBRARY_DIR})
+	TARGET_LINK_LIBRARIES(ADM_ad_amrnb ${AMRNB_LIBRARY_DIR})
 
 	ADD_TARGET_CFLAGS(ADM_ad_amrnb "-I${AMRNB_INCLUDE_DIR}")
 

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioDecoders/ADM_ad_dca/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioDecoders/ADM_ad_dca/CMakeLists.txt	2009-07-17 17:54:47 UTC (rev 5097)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioDecoders/ADM_ad_dca/CMakeLists.txt	2009-07-17 17:54:56 UTC (rev 5098)
@@ -8,7 +8,7 @@
 	SET(ADM_ad_dca_SRCS ADM_dca.cpp)
 
 	ADD_LIBRARY(ADM_ad_dca SHARED ${ADM_ad_dca_SRCS})
-	TARGET_LINK_LIBRARIES(ADM_ad_dca ADM_core ${LIBDCA_LIBRARY_DIR})
+	TARGET_LINK_LIBRARIES(ADM_ad_dca ${LIBDCA_LIBRARY_DIR})
 
 	ADD_TARGET_CFLAGS(ADM_ad_dca "-I${LIBDCA_INCLUDE_DIR}")
 	ADD_TARGET_CFLAGS(ADM_ad_dca "-DUSE_LIBDCA_${LIBDCA_VERSION}")

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioDecoders/ADM_ad_faad/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioDecoders/ADM_ad_faad/CMakeLists.txt	2009-07-17 17:54:47 UTC (rev 5097)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioDecoders/ADM_ad_faad/CMakeLists.txt	2009-07-17 17:54:56 UTC (rev 5098)
@@ -7,7 +7,7 @@
 	SET(ADM_ad_faad_SRCS ADM_ad_faad.cpp)
 
 	ADD_LIBRARY(ADM_ad_faad SHARED ${ADM_ad_faad_SRCS})
-	TARGET_LINK_LIBRARIES(ADM_ad_faad ADM_core ${FAAD_LIBRARY_DIR})
+	TARGET_LINK_LIBRARIES(ADM_ad_faad ${FAAD_LIBRARY_DIR})
 
 	ADD_TARGET_CFLAGS(ADM_ad_faad "-I${FAAD_INCLUDE_DIR}")
 	ADD_TARGET_DEFINITIONS(ADM_ad_faad FAAD_OLD_PROTOTYPE)

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioDecoders/ADM_ad_ima_adpcm/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioDecoders/ADM_ad_ima_adpcm/CMakeLists.txt	2009-07-17 17:54:47 UTC (rev 5097)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioDecoders/ADM_ad_ima_adpcm/CMakeLists.txt	2009-07-17 17:54:56 UTC (rev 5098)
@@ -3,7 +3,6 @@
 	SET(ADM_ad_ima_adpcm_SRCS ADM_ad_ima_adpcm.cpp)
 
 	ADD_LIBRARY(ADM_ad_ima_adpcm SHARED ${ADM_ad_ima_adpcm_SRCS})
-	TARGET_LINK_LIBRARIES(ADM_ad_ima_adpcm ADM_core )
 
 	INIT_AUDIO_PLUGIN(ADM_ad_ima_adpcm)
 	INSTALL_AUDIODECODER(ADM_ad_ima_adpcm)

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioDecoders/ADM_ad_lav/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioDecoders/ADM_ad_lav/CMakeLists.txt	2009-07-17 17:54:47 UTC (rev 5097)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioDecoders/ADM_ad_lav/CMakeLists.txt	2009-07-17 17:54:56 UTC (rev 5098)
@@ -4,7 +4,7 @@
 	SET(ADM_ad_lav_SRCS ADM_ad_lav.cpp)
 
 	ADD_LIBRARY(ADM_ad_lav SHARED ${ADM_ad_lav_SRCS})
-	TARGET_LINK_LIBRARIES(ADM_ad_lav ADM_core ADM_coreUtils ADM_libavcodec ADM_libavutil)
+	TARGET_LINK_LIBRARIES(ADM_ad_lav ADM_coreUtils6 ADM_libavcodec6 ADM_libavutil6)
 
 	INIT_AUDIO_PLUGIN(ADM_ad_lav)
 	INSTALL_AUDIODECODER(ADM_ad_lav)

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioDecoders/ADM_ad_mad/ADM_libMad/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioDecoders/ADM_ad_mad/ADM_libMad/CMakeLists.txt	2009-07-17 17:54:47 UTC (rev 5097)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioDecoders/ADM_ad_mad/ADM_libMad/CMakeLists.txt	2009-07-17 17:54:56 UTC (rev 5098)
@@ -15,4 +15,4 @@
 ENDIF (ADM_BIG_ENDIAN)
 
 INIT_AUDIO_PLUGIN(${ADM_LIB})
-TARGET_LINK_LIBRARIES(${ADM_LIB} ADM_core)
\ No newline at end of file
+TARGET_LINK_LIBRARIES(${ADM_LIB} ADM_core6)

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioDecoders/ADM_ad_ms_adpcm/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioDecoders/ADM_ad_ms_adpcm/CMakeLists.txt	2009-07-17 17:54:47 UTC (rev 5097)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioDecoders/ADM_ad_ms_adpcm/CMakeLists.txt	2009-07-17 17:54:56 UTC (rev 5098)
@@ -3,7 +3,6 @@
 	SET(ADM_ad_ms_adpcm_SRCS ADM_ad_ms_adpcm.cpp)
 
 	ADD_LIBRARY(ADM_ad_ms_adpcm SHARED ${ADM_ad_ms_adpcm_SRCS})
-	TARGET_LINK_LIBRARIES(ADM_ad_ms_adpcm ADM_core )
 
 	INIT_AUDIO_PLUGIN(ADM_ad_ms_adpcm)
 	INSTALL_AUDIODECODER(ADM_ad_ms_adpcm)

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioDecoders/ADM_ad_ulaw/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioDecoders/ADM_ad_ulaw/CMakeLists.txt	2009-07-17 17:54:47 UTC (rev 5097)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioDecoders/ADM_ad_ulaw/CMakeLists.txt	2009-07-17 17:54:56 UTC (rev 5098)
@@ -3,7 +3,6 @@
 	SET(ADM_ad_ulaw_SRCS ADM_ad_ulaw.cpp)
 
 	ADD_LIBRARY(ADM_ad_ulaw SHARED ${ADM_ad_ulaw_SRCS})
-	TARGET_LINK_LIBRARIES(ADM_ad_ulaw ADM_core )
 
 	INIT_AUDIO_PLUGIN(ADM_ad_ulaw)
 	INSTALL_AUDIODECODER(ADM_ad_ulaw)

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioDevices/Sdl/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioDevices/Sdl/CMakeLists.txt	2009-07-17 17:54:47 UTC (rev 5097)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioDevices/Sdl/CMakeLists.txt	2009-07-17 17:54:56 UTC (rev 5098)
@@ -4,7 +4,7 @@
 SET(ADM_av_sdl_SRCS ADM_deviceSDL.cpp)
 
 ADD_LIBRARY(ADM_av_sdl SHARED ${ADM_av_sdl_SRCS})
-TARGET_LINK_LIBRARIES(ADM_av_sdl ADM_core ADM_coreAudio ADM_coreAudioDevice ${SDL_LIBRARY})
+TARGET_LINK_LIBRARIES(ADM_av_sdl ADM_core6 ADM_coreAudio6 ADM_coreAudioDevice6 ${SDL_LIBRARY})
 SDLify(ADM_deviceSDL.cpp)
 
 INIT_AUDIO_DEVICE(ADM_av_sdl)

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioDevices/Win32/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioDevices/Win32/CMakeLists.txt	2009-07-17 17:54:47 UTC (rev 5097)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioDevices/Win32/CMakeLists.txt	2009-07-17 17:54:56 UTC (rev 5098)
@@ -4,6 +4,6 @@
 SET(ADM_av_win32_SRCS ADM_deviceWin32.cpp)
 
 ADD_LIBRARY(ADM_av_win32 SHARED ${ADM_av_win32_SRCS})
-TARGET_LINK_LIBRARIES(ADM_av_win32 winmm ADM_core ADM_coreAudio ADM_coreAudioDevice)
+TARGET_LINK_LIBRARIES(ADM_av_win32 ADM_core6 ADM_coreAudio6 ADM_coreAudioDevice6 ${SDL_LIBRARY})
 INIT_AUDIO_DEVICE(ADM_av_win32)
 INSTALL_AUDIODEVICE(ADM_av_win32)

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioEncoders/aften/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioEncoders/aften/CMakeLists.txt	2009-07-17 17:54:47 UTC (rev 5097)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioEncoders/aften/CMakeLists.txt	2009-07-17 17:54:56 UTC (rev 5098)
@@ -4,7 +4,7 @@
 
 	ADD_LIBRARY(ADM_ae_aften SHARED ${ADM_ae_aften_SRCS})
 
-	TARGET_LINK_LIBRARIES(ADM_ae_aften ${AFTEN_LIBRARY_DIR} ADM_core ADM_coreAudio ADM_coreUI)
+	TARGET_LINK_LIBRARIES(ADM_ae_aften ${AFTEN_LIBRARY_DIR})
 
 	ADD_TARGET_CFLAGS(ADM_ae_aften "-I${AFTEN_INCLUDE_DIR}")
 

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioEncoders/faac/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioEncoders/faac/CMakeLists.txt	2009-07-17 17:54:47 UTC (rev 5097)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioEncoders/faac/CMakeLists.txt	2009-07-17 17:54:56 UTC (rev 5098)
@@ -4,7 +4,7 @@
 
 	ADD_LIBRARY(ADM_ae_faac SHARED ${ADM_ae_faac_SRCS})
 
-	TARGET_LINK_LIBRARIES(ADM_ae_faac ${FAAC_LIBRARY_DIR} ADM_core ADM_coreAudio ADM_coreUI)
+        TARGET_LINK_LIBRARIES(ADM_ae_faac ${FAAC_LIBRARY_DIR})
 
 	ADD_TARGET_CFLAGS(ADM_ae_faac "-I${FAAC_INCLUDE_DIR}")
 

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioEncoders/lame/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioEncoders/lame/CMakeLists.txt	2009-07-17 17:54:47 UTC (rev 5097)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioEncoders/lame/CMakeLists.txt	2009-07-17 17:54:56 UTC (rev 5098)
@@ -4,7 +4,7 @@
 
 	ADD_LIBRARY(ADM_ae_lame SHARED ${ADM_ae_lame_SRCS})
 
-	TARGET_LINK_LIBRARIES(ADM_ae_lame ${LAME_LIBRARY_DIR} ADM_core ADM_coreAudio ADM_coreUI)
+	TARGET_LINK_LIBRARIES(ADM_ae_lame ${LAME_LIBRARY_DIR})
 
 	ADD_TARGET_CFLAGS(ADM_ae_lame "-I${LAME_INCLUDE_DIR}")
 

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioEncoders/lavcodec/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioEncoders/lavcodec/CMakeLists.txt	2009-07-17 17:54:47 UTC (rev 5097)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioEncoders/lavcodec/CMakeLists.txt	2009-07-17 17:54:56 UTC (rev 5098)
@@ -6,7 +6,7 @@
 
 	ADD_LIBRARY(ADM_ae_lav_mp2 SHARED ${ADM_ae_lav_mp2_SRCS})
 	ADD_TARGET_CFLAGS(ADM_ae_lav_mp2 "-DADM_LAV_MP2")
-	TARGET_LINK_LIBRARIES(ADM_ae_lav_mp2 ADM_core ADM_coreAudio ADM_coreUI ADM_libavcodec)
+	TARGET_LINK_LIBRARIES(ADM_ae_lav_mp2  ADM_libavcodec6)
 
 	INIT_AUDIO_ENCODER(ADM_ae_lav_mp2)
 	INSTALL_AUDIOENCODER(ADM_ae_lav_mp2)
@@ -15,7 +15,7 @@
 
 	ADD_LIBRARY(ADM_ae_lav_ac3 SHARED ${ADM_ae_lav_ac3_SRCS})
 	ADD_TARGET_CFLAGS(ADM_ae_lav_ac3 "-DADM_LAV_AC3")
-	TARGET_LINK_LIBRARIES(ADM_ae_lav_ac3 ADM_core ADM_coreAudio ADM_coreUI ADM_libavcodec)
+	TARGET_LINK_LIBRARIES(ADM_ae_lav_ac3  ADM_libavcodec6)
 
 	INIT_AUDIO_ENCODER(ADM_ae_lav_ac3)
 	INSTALL_AUDIOENCODER(ADM_ae_lav_ac3)

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioEncoders/pcm/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioEncoders/pcm/CMakeLists.txt	2009-07-17 17:54:47 UTC (rev 5097)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioEncoders/pcm/CMakeLists.txt	2009-07-17 17:54:56 UTC (rev 5098)
@@ -3,7 +3,6 @@
 	SET(ADM_ae_pcm_SRCS audioencoder_pcm.cpp)
 
 	ADD_LIBRARY(ADM_ae_pcm SHARED ${ADM_ae_pcm_SRCS})
-	TARGET_LINK_LIBRARIES(ADM_ae_pcm ADM_core ADM_coreAudio)
 
 	INIT_AUDIO_ENCODER(ADM_ae_pcm)
 	INSTALL_AUDIOENCODER(ADM_ae_pcm)

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioEncoders/twolame/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioEncoders/twolame/CMakeLists.txt	2009-07-17 17:54:47 UTC (rev 5097)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioEncoders/twolame/CMakeLists.txt	2009-07-17 17:54:56 UTC (rev 5098)
@@ -5,7 +5,7 @@
 
 	ADD_LIBRARY(ADM_ae_twolame SHARED ${ADM_ae_twolame_SRCS})
 
-	TARGET_LINK_LIBRARIES(ADM_ae_twolame ADM_libtwolame ADM_core ADM_coreAudio ADM_coreUI)
+	TARGET_LINK_LIBRARIES(ADM_ae_twolame ADM_libtwolame )
         include_directories(ADM_libtwolame)
 
 

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioEncoders/vorbis/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioEncoders/vorbis/CMakeLists.txt	2009-07-17 17:54:47 UTC (rev 5097)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioEncoders/vorbis/CMakeLists.txt	2009-07-17 17:54:56 UTC (rev 5098)
@@ -4,7 +4,7 @@
 
 	ADD_LIBRARY(ADM_ae_vorbis SHARED ${ADM_ae_vorbis_SRCS})
 
-	TARGET_LINK_LIBRARIES(ADM_ae_vorbis ${VORBIS_LIBRARY_DIR} ${VORBISENC_LIBRARY_DIR} ADM_core ADM_coreAudio ADM_coreUI)
+	TARGET_LINK_LIBRARIES(ADM_ae_vorbis ${VORBIS_LIBRARY_DIR} ${VORBISENC_LIBRARY_DIR} )
 
 	ADD_TARGET_CFLAGS(ADM_ae_vorbis "-I${VORBIS_INCLUDE_DIR}")
 

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/Flv/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/Flv/CMakeLists.txt	2009-07-17 17:54:47 UTC (rev 5097)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/Flv/CMakeLists.txt	2009-07-17 17:54:56 UTC (rev 5098)
@@ -7,7 +7,7 @@
 
 ADD_LIBRARY(ADM_dm_flv SHARED ${ADM_flv_SRCS})
 
-TARGET_LINK_LIBRARIES(ADM_dm_flv ADM_libavutil)
+TARGET_LINK_LIBRARIES(ADM_dm_flv ADM_libavutil6)
 
 INCLUDE_DIRECTORIES("${AVIDEMUX_SOURCE_DIR}/avidemux/ADM_libraries/ADM_ffmpeg")
 

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/Matroska/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/Matroska/CMakeLists.txt	2009-07-17 17:54:47 UTC (rev 5097)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/Matroska/CMakeLists.txt	2009-07-17 17:54:56 UTC (rev 5098)
@@ -11,7 +11,7 @@
 )
 ADD_LIBRARY(ADM_dm_matroska SHARED ${ADM_matroska_SRCS})
 
-TARGET_LINK_LIBRARIES(ADM_dm_matroska ADM_libavutil ADM_audioParser)
+TARGET_LINK_LIBRARIES(ADM_dm_matroska ADM_libavutil6 ADM_audioParser6)
 
 INIT_DEMUXER(ADM_dm_matroska)
 INSTALL_DEMUXER(ADM_dm_matroska)

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegPS/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegPS/CMakeLists.txt	2009-07-17 17:54:47 UTC (rev 5097)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegPS/CMakeLists.txt	2009-07-17 17:54:56 UTC (rev 5098)
@@ -11,7 +11,7 @@
 )
 
 ADD_LIBRARY(ADM_dm_ps SHARED ${ADM_ps_SRCS})
-TARGET_LINK_LIBRARIES(ADM_dm_ps ADM_coreDemuxerMpeg ADM_audioParser)
+TARGET_LINK_LIBRARIES(ADM_dm_ps ADM_coreDemuxerMpeg6 ADM_audioParser6)
 INCLUDE_DIRECTORIES("${AVIDEMUX_SOURCE_DIR}/avidemux/ADM_coreDemuxerMpeg/include")
 
 

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/CMakeLists.txt	2009-07-17 17:54:47 UTC (rev 5097)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/CMakeLists.txt	2009-07-17 17:54:56 UTC (rev 5098)
@@ -13,7 +13,7 @@
 )
 
 ADD_LIBRARY(ADM_dm_ts SHARED ${ADM_ts_SRCS})
-TARGET_LINK_LIBRARIES(ADM_dm_ts ADM_coreDemuxerMpeg ADM_audioParser  ADM_libavutil ADM_libavcodec ADM_libavformat)
+TARGET_LINK_LIBRARIES(ADM_dm_ts ADM_coreDemuxerMpeg6 ADM_audioParser6  ADM_libavutil6 ADM_libavcodec6 ADM_libavformat6)
 # For ffmpeg includes
 INCLUDE_DIRECTORIES("${AVIDEMUX_SOURCE_DIR}/avidemux/") 
 INCLUDE_DIRECTORIES("${AVIDEMUX_SOURCE_DIR}/avidemux/ADM_libraries") 

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerFlv/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerFlv/CMakeLists.txt	2009-07-17 17:54:47 UTC (rev 5097)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerFlv/CMakeLists.txt	2009-07-17 17:54:56 UTC (rev 5098)
@@ -6,7 +6,7 @@
 )
 
 ADD_LIBRARY(ADM_mx_flv SHARED ${ADM_flv_SRCS})
-TARGET_LINK_LIBRARIES(ADM_mx_flv  ADM_libavutil ADM_libavformat)
+TARGET_LINK_LIBRARIES(ADM_mx_flv  ADM_libavutil6 ADM_libavformat6)
 INCLUDE_DIRECTORIES("${AVIDEMUX_SOURCE_DIR}/avidemux/ADM_libraries/ADM_ffmpeg")
 
 INIT_MUXER(ADM_mx_flv)

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerMp4/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerMp4/CMakeLists.txt	2009-07-17 17:54:47 UTC (rev 5097)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerMp4/CMakeLists.txt	2009-07-17 17:54:56 UTC (rev 5098)
@@ -8,7 +8,7 @@
 ADD_LIBRARY(ADM_mx_mp4 SHARED ${ADM_mp4_SRCS})
 
 INCLUDE_DIRECTORIES("${AVIDEMUX_SOURCE_DIR}/avidemux/ADM_libraries/ADM_ffmpeg")
-TARGET_LINK_LIBRARIES(ADM_mx_mp4  ADM_libavutil ADM_libavcodec ADM_libavformat)
+TARGET_LINK_LIBRARIES(ADM_mx_mp4  ADM_libavutil6 ADM_libavcodec6 ADM_libavformat6)
 INIT_MUXER(ADM_mx_mp4)
 INSTALL_MUXER(ADM_mx_mp4)
 

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/oplug_flv/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/oplug_flv/CMakeLists.txt	2009-07-17 17:54:47 UTC (rev 5097)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/oplug_flv/CMakeLists.txt	2009-07-17 17:54:56 UTC (rev 5098)
@@ -4,6 +4,6 @@
 ADD_LIBRARY(ADM_mx_flv SHARED ${ADM_flv_SRCS})
 
 INCLUDE_DIRECTORIES("${AVIDEMUX_SOURCE_DIR}/avidemux/ADM_libraries/ADM_ffmpeg")
-TARGET_LINK_LIBRARIES(ADM_mx_flv  ADM_libavutil ADM_libavcodec ADM_libavformat)
+TARGET_LINK_LIBRARIES(ADM_mx_flv  ADM_libavutil6 ADM_libavcodec6 ADM_libavformat6)
 INIT_MUXER(ADM_mx_flv)
 INSTALL_MUXER(ADM_mx_flv)

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/ffMpeg4/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/ffMpeg4/CMakeLists.txt	2009-07-17 17:54:47 UTC (rev 5097)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/ffMpeg4/CMakeLists.txt	2009-07-17 17:54:56 UTC (rev 5098)
@@ -10,6 +10,6 @@
 
 INIT_VIDEO_ENCODER(ADM_ve_ffMpeg4)
 INSTALL_VIDEO_ENCODER(ADM_ve_ffMpeg4)
-TARGET_LINK_LIBRARIES(ADM_ve_ffMpeg4 ADM_libavcodec ADM_libavutil)
+TARGET_LINK_LIBRARIES(ADM_ve_ffMpeg4 ADM_libavcodec6 ADM_libavutil6)
 INCLUDE_DIRECTORIES("${AVIDEMUX_SOURCE_DIR}/avidemux/")
 INCLUDE_DIRECTORIES("${AVIDEMUX_SOURCE_DIR}/avidemux/ADM_libraries/ADM_ffmpeg")

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/ffMsMpeg4/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/ffMsMpeg4/CMakeLists.txt	2009-07-17 17:54:47 UTC (rev 5097)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/ffMsMpeg4/CMakeLists.txt	2009-07-17 17:54:56 UTC (rev 5098)
@@ -10,6 +10,6 @@
 
 INIT_VIDEO_ENCODER(ADM_ve_ffMsMp4)
 INSTALL_VIDEO_ENCODER(ADM_ve_ffMsMp4)
-TARGET_LINK_LIBRARIES(ADM_ve_ffMsMp4 ADM_libavcodec ADM_libavutil)
+TARGET_LINK_LIBRARIES(ADM_ve_ffMsMp4 ADM_libavcodec6 ADM_libavutil6)
 INCLUDE_DIRECTORIES("${AVIDEMUX_SOURCE_DIR}/avidemux/")
 INCLUDE_DIRECTORIES("${AVIDEMUX_SOURCE_DIR}/avidemux/ADM_libraries/ADM_ffmpeg")

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/huff/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/huff/CMakeLists.txt	2009-07-17 17:54:47 UTC (rev 5097)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/huff/CMakeLists.txt	2009-07-17 17:54:56 UTC (rev 5098)
@@ -10,6 +10,6 @@
 
 INIT_VIDEO_ENCODER(ADM_ve_huff)
 INSTALL_VIDEO_ENCODER(ADM_ve_huff)
-TARGET_LINK_LIBRARIES(ADM_ve_huff ADM_libavcodec ADM_libavutil)
+TARGET_LINK_LIBRARIES(ADM_ve_huff ADM_libavcodec6 ADM_libavutil6)
 INCLUDE_DIRECTORIES("${AVIDEMUX_SOURCE_DIR}/avidemux/")
 INCLUDE_DIRECTORIES("${AVIDEMUX_SOURCE_DIR}/avidemux/ADM_libraries/ADM_ffmpeg")

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/jpeg/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/jpeg/CMakeLists.txt	2009-07-17 17:54:47 UTC (rev 5097)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/jpeg/CMakeLists.txt	2009-07-17 17:54:56 UTC (rev 5098)
@@ -10,6 +10,6 @@
 
 INIT_VIDEO_ENCODER(ADM_ve_jpeg)
 INSTALL_VIDEO_ENCODER(ADM_ve_jpeg)
-TARGET_LINK_LIBRARIES(ADM_ve_jpeg ADM_libavcodec ADM_libavutil)
+TARGET_LINK_LIBRARIES(ADM_ve_jpeg ADM_libavcodec6 ADM_libavutil6)
 INCLUDE_DIRECTORIES("${AVIDEMUX_SOURCE_DIR}/avidemux/")
 INCLUDE_DIRECTORIES("${AVIDEMUX_SOURCE_DIR}/avidemux/ADM_libraries/ADM_ffmpeg")

Modified: branches/avidemux_2.6_branch_mean/cmake/ad_plugin.cmake
===================================================================
--- branches/avidemux_2.6_branch_mean/cmake/ad_plugin.cmake	2009-07-17 17:54:47 UTC (rev 5097)
+++ branches/avidemux_2.6_branch_mean/cmake/ad_plugin.cmake	2009-07-17 17:54:56 UTC (rev 5098)
@@ -3,5 +3,6 @@
 ENDMACRO(INIT_AUDIO_PLUGIN)
 
 MACRO(INSTALL_AUDIODECODER _lib)
+	TARGET_LINK_LIBRARIES(${_lib} ADM_core6 )
 	INSTALL(TARGETS ${_lib} DESTINATION "${CMAKE_INSTALL_PREFIX}/lib/ADM_plugins6/audioDecoder/")
 ENDMACRO(INSTALL_AUDIODECODER)

Modified: branches/avidemux_2.6_branch_mean/cmake/ae_plugin.cmake
===================================================================
--- branches/avidemux_2.6_branch_mean/cmake/ae_plugin.cmake	2009-07-17 17:54:47 UTC (rev 5097)
+++ branches/avidemux_2.6_branch_mean/cmake/ae_plugin.cmake	2009-07-17 17:54:56 UTC (rev 5098)
@@ -10,5 +10,5 @@
 
 MACRO(INSTALL_AUDIOENCODER _lib)
 	INSTALL(TARGETS ${_lib} DESTINATION "${CMAKE_INSTALL_PREFIX}/lib/ADM_plugins6/audioEncoders/")
-	TARGET_LINK_LIBRARIES(${_lib} ADM_core ADM_coreUI ADM_coreAudio ADM_coreAudioEncoder)
+	TARGET_LINK_LIBRARIES(${_lib} ADM_core6 ADM_coreUI6 ADM_coreAudio6 ADM_coreAudioEncoder6)
 ENDMACRO(INSTALL_AUDIOENCODER)

Modified: branches/avidemux_2.6_branch_mean/cmake/dm_plugin.cmake
===================================================================
--- branches/avidemux_2.6_branch_mean/cmake/dm_plugin.cmake	2009-07-17 17:54:47 UTC (rev 5097)
+++ branches/avidemux_2.6_branch_mean/cmake/dm_plugin.cmake	2009-07-17 17:54:56 UTC (rev 5098)
@@ -2,6 +2,6 @@
 ENDMACRO(INIT_DEMUXER)
 
 MACRO(INSTALL_DEMUXER _lib)
-        TARGET_LINK_LIBRARIES(${_lib} ADM_core ADM_coreUtils ADM_coreAudio ADM_coreImage ADM_coreUI ADM_core ADM_coreDemuxer)
+        TARGET_LINK_LIBRARIES(${_lib} ADM_core6 ADM_coreUtils6 ADM_coreAudio6 ADM_coreImage6 ADM_coreUI6 ADM_core6 ADM_coreDemuxer6)
 	INSTALL(TARGETS ${_lib} DESTINATION "${CMAKE_INSTALL_PREFIX}/lib/ADM_plugins6/demuxers/")
 ENDMACRO(INSTALL_DEMUXER)

Modified: branches/avidemux_2.6_branch_mean/cmake/mx_plugin.cmake
===================================================================
--- branches/avidemux_2.6_branch_mean/cmake/mx_plugin.cmake	2009-07-17 17:54:47 UTC (rev 5097)
+++ branches/avidemux_2.6_branch_mean/cmake/mx_plugin.cmake	2009-07-17 17:54:56 UTC (rev 5098)
@@ -2,6 +2,6 @@
 ENDMACRO(INIT_MUXER)
 
 MACRO(INSTALL_MUXER _lib)
-        TARGET_LINK_LIBRARIES(${_lib} ADM_core ADM_coreUtils ADM_coreAudio ADM_coreImage ADM_coreUI ADM_core ADM_coreMuxer)
+        TARGET_LINK_LIBRARIES(${_lib} ADM_core6 ADM_coreUtils6 ADM_coreAudio6 ADM_coreImage6 ADM_coreUI6 ADM_core6 ADM_coreMuxer6)
 	INSTALL(TARGETS ${_lib} DESTINATION "${CMAKE_INSTALL_PREFIX}/lib/ADM_plugins6/muxers/")
 ENDMACRO(INSTALL_MUXER)

Modified: branches/avidemux_2.6_branch_mean/cmake/ve_plugin.cmake
===================================================================
--- branches/avidemux_2.6_branch_mean/cmake/ve_plugin.cmake	2009-07-17 17:54:47 UTC (rev 5097)
+++ branches/avidemux_2.6_branch_mean/cmake/ve_plugin.cmake	2009-07-17 17:54:56 UTC (rev 5098)
@@ -15,6 +15,6 @@
 
 MACRO(INSTALL_VIDEO_ENCODER _lib)
 	INSTALL(TARGETS ${_lib} DESTINATION "${VE_PLUGIN_DIR}")
-	TARGET_LINK_LIBRARIES(${_lib} ADM_core ADM_coreUI ADM_coreVideoEncoder ADM_coreImage)
+	TARGET_LINK_LIBRARIES(${_lib} ADM_core6 ADM_coreUI6 ADM_coreVideoEncoder6 ADM_coreImage6)
 ENDMACRO(INSTALL_VIDEO_ENCODER)
 

Modified: branches/avidemux_2.6_branch_mean/cmake/vf_plugin.cmake
===================================================================
--- branches/avidemux_2.6_branch_mean/cmake/vf_plugin.cmake	2009-07-17 17:54:47 UTC (rev 5097)
+++ branches/avidemux_2.6_branch_mean/cmake/vf_plugin.cmake	2009-07-17 17:54:56 UTC (rev 5098)
@@ -7,6 +7,6 @@
 ENDMACRO(INIT_VIDEOFILTER_PLUGIN)
 
 MACRO(INSTALL_VIDEOFILTER _lib)
-	TARGET_LINK_LIBRARIES(${_lib} ADM_core ADM_coreUI ADM_coreImage )
+	TARGET_LINK_LIBRARIES(${_lib} ADM_core6 ADM_coreUI6 ADM_coreImage6 )
 	INSTALL(TARGETS ${_lib} DESTINATION "${CMAKE_INSTALL_PREFIX}/lib/ADM_plugins6/videoFilter/")
 ENDMACRO(INSTALL_VIDEOFILTER)

Modified: branches/avidemux_2.6_branch_mean/cmake/vf_plugin_gtk.cmake
===================================================================
--- branches/avidemux_2.6_branch_mean/cmake/vf_plugin_gtk.cmake	2009-07-17 17:54:47 UTC (rev 5097)
+++ branches/avidemux_2.6_branch_mean/cmake/vf_plugin_gtk.cmake	2009-07-17 17:54:56 UTC (rev 5098)
@@ -17,7 +17,7 @@
 
         ADD_LIBRARY(${lib} SHARED ${ARGN} ${_srcsGtk})
         INCLUDE_DIRECTORIES(${AVIDEMUX_TOP_SOURCE_DIR}/avidemux/ADM_UIs/ADM_GTK/include/)
-        TARGET_LINK_LIBRARIES( ${lib} ADM_UIGtk ADM_render_gtk)
+        TARGET_LINK_LIBRARIES( ${lib} ADM_UIGtk6 ADM_render6_gtk)
         TARGET_LINK_LIBRARIES(${lib} ${GTK_LDFLAGS} ${GTHREAD_LDFLAGS})
 
 	IF (GETTEXT_FOUND)

Modified: branches/avidemux_2.6_branch_mean/cmake/vf_plugin_qt4.cmake
===================================================================
--- branches/avidemux_2.6_branch_mean/cmake/vf_plugin_qt4.cmake	2009-07-17 17:54:47 UTC (rev 5097)
+++ branches/avidemux_2.6_branch_mean/cmake/vf_plugin_qt4.cmake	2009-07-17 17:54:56 UTC (rev 5098)
@@ -15,7 +15,7 @@
 		ADD_TARGET_CFLAGS(${lib} "-DADM_UI_TYPE_BUILD=4")
 	        ADD_TARGET_CFLAGS(${lib} "-I${CMAKE_BINARY_DIR}/config/qt4 ")
 
-		TARGET_LINK_LIBRARIES( ${lib} ADM_UIQT4  ADM_render_qt4)
+		TARGET_LINK_LIBRARIES( ${lib} ADM_UIQT4  ADM_render6_qt4)
 		TARGET_LINK_LIBRARIES(${lib} ${QT_QTGUI_LIBRARY} ${QT_QTCORE_LIBRARY})
 
 		INIT_VIDEOFILTER_PLUGIN(${lib})



From mean at mail.berlios.de  Fri Jul 17 20:27:43 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Fri, 17 Jul 2009 20:27:43 +0200
Subject: [Avidemux-svn-commit] r5099 -
	branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioDevices/Win32
Message-ID: <200907171827.n6HIRh59007936@sheep.berlios.de>

Author: mean
Date: 2009-07-17 20:27:43 +0200 (Fri, 17 Jul 2009)
New Revision: 5099

Modified:
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioDevices/Win32/CMakeLists.txt
Log:
[audioDevice] Add winmm to audioDevicewin32

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioDevices/Win32/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioDevices/Win32/CMakeLists.txt	2009-07-17 17:54:56 UTC (rev 5098)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioDevices/Win32/CMakeLists.txt	2009-07-17 18:27:43 UTC (rev 5099)
@@ -4,6 +4,6 @@
 SET(ADM_av_win32_SRCS ADM_deviceWin32.cpp)
 
 ADD_LIBRARY(ADM_av_win32 SHARED ${ADM_av_win32_SRCS})
-TARGET_LINK_LIBRARIES(ADM_av_win32 ADM_core6 ADM_coreAudio6 ADM_coreAudioDevice6 ${SDL_LIBRARY})
+TARGET_LINK_LIBRARIES(ADM_av_win32 winmm ADM_core6 ADM_coreAudio6 ADM_coreAudioDevice6 ${SDL_LIBRARY})
 INIT_AUDIO_DEVICE(ADM_av_win32)
 INSTALL_AUDIODEVICE(ADM_av_win32)



From gruntster at mail.berlios.de  Fri Jul 17 21:30:22 2009
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Fri, 17 Jul 2009 21:30:22 +0200
Subject: [Avidemux-svn-commit] r5100 - in
	branches/avidemux_2.5_branch_gruntster/avidemux: ADM_encoder
	ADM_outputs/oplug_mpegFF
Message-ID: <200907171930.n6HJUMOC020352@sheep.berlios.de>

Author: gruntster
Date: 2009-07-17 21:30:16 +0200 (Fri, 17 Jul 2009)
New Revision: 5100

Modified:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encConfig.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encRequant.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp
Log:
[mpeg1/2] adopt user settings instead of defaults

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encConfig.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encConfig.cpp	2009-07-17 18:27:43 UTC (rev 5099)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encConfig.cpp	2009-07-17 19:30:16 UTC (rev 5100)
@@ -39,6 +39,7 @@
 extern uint8_t DIA_videoCodec(int *codecIndex);
 extern void UI_setVideoCodec(int i);
 extern void getMainWindowHandles(intptr_t *handle, intptr_t *nativeHandle);
+extern uint8_t isMpeg12Compatible (uint32_t fourcc);
 
 // Some static stuff
 void setVideoEncoderSettings(COMPRESSION_MODE mode, uint32_t param, uint32_t extraConf, uint8_t *extraData);
@@ -54,6 +55,8 @@
 #include "adm_encmjpeg.h"
 #include "adm_encCopy.h"
 #include "adm_encyv12.h"
+#include "adm_encmpeg2enc.h"
+#include "adm_encRequant.h"
 #include "ADM_pluginLoad.h"
 #include "ADM_externalEncoder.h"
 
@@ -581,7 +584,7 @@
 		e = new EncoderFFMPEG (FF_MPEG4, desc);
 		break;
 	case CodecMjpeg:
-		e = new EncoderMjpeg (&MjpegCodec);
+		e = new EncoderMjpeg (desc);
 		break;
 	case CodecFLV1:
 		e = new EncoderFFMPEGFLV1 (desc);
@@ -595,10 +598,46 @@
 
 		e = new EncoderFFMPEG (FF_H263, desc);
 		break;
+	case CodecXVCD:
+		e=new EncoderFFMPEGMpeg1(FF_MPEG1, desc);
+		printf("\n Using ffmpeg mpeg1 encoder\n");
+		break;
+	case CodecXSVCD:
+		e=new EncoderFFMPEGMpeg1(FF_MPEG2, desc);
+		printf("\n Using ffmpeg mpeg2 encoder\n");
+		break;
+	case CodecXDVD:
+		e=new EncoderFFMPEGMpeg1(FF_MPEG2, desc);
+		printf("\n Using ffmpeg mpeg2 encoder (DVD)\n");
+		break;
+	case CodecDVD:
+		e=new EncoderMpeg2enc(MPEG2ENC_DVD, desc);
+		printf("\n Using mpeg2enc encoder (DVD)\n");
+		break;
+	case CodecRequant:
+		if(!isMpeg12Compatible(avifileinfo->fcc))
+		{
+			GUI_Error_HIG("Incompatible Input","The input file must be mpeg2 to be able to use requant!");
+			break;
+		}
+
+		e=new EncoderRequant(desc);
+
+		printf("\n Using mpeg2 requant\n");
+		break;
+	case CodecSVCD:
+		e=new EncoderMpeg2enc(MPEG2ENC_SVCD, desc);
+		printf("\n Using mpeg2enc encoder (SVCD)\n");
+		break;
+	case CodecVCD:
+		e=new EncoderMpeg2enc(MPEG2ENC_VCD, desc);
+		printf("\n Using mpeg2enc encoder (VCD)\n");
+		break;
 	case CodecExternal:
 		e = new externalEncoder(&AllVideoCodec[currentCodecIndex], globalHeaderFlag);
 		break;
 	}
+
 	return e;
 }
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encRequant.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encRequant.h	2009-07-17 18:27:43 UTC (rev 5099)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encRequant.h	2009-07-17 19:30:16 UTC (rev 5100)
@@ -13,8 +13,8 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
-#ifndef __ADM_encoder_copy__
-#define __ADM_encoder_copy__
+#ifndef __ADM_encoder_requant__
+#define __ADM_encoder_requant__
 
 
 class EncoderRequant:public Encoder

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp	2009-07-17 18:27:43 UTC (rev 5099)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp	2009-07-17 19:30:16 UTC (rev 5100)
@@ -22,8 +22,6 @@
 #include "config.h"
 
 #ifdef USE_FFMPEG
-#include <math.h>
-
 #include "ADM_default.h"
 #include "ADM_threads.h"
 
@@ -32,20 +30,11 @@
 }
 
 #include "avi_vars.h"
-#include "prototype.h"
-
-//#include "ADM_colorspace/colorspace.h"
 #include "DIA_coreToolkit.h"
-#include "ADM_videoFilter.h"
-#include "ADM_videoFilter_internal.h"
 
 #include "ADM_encoder/ADM_vidEncode.hxx"
 #include "ADM_encoder/adm_encoder.h"
 
-#include "ADM_codecs/ADM_ffmpeg.h"
-#include "ADM_encoder/adm_encffmpeg.h"
-#include "ADM_encoder/adm_encmpeg2enc.h"
-#include "ADM_encoder/adm_encRequant.h"
 #include "../oplug_mpegFF/oplug_vcdff.h"
 
 #include "ADM_userInterfaces/ADM_commonUI/DIA_encoding.h"
@@ -54,20 +43,12 @@
 #include "../ADM_lavformat.h"
 
 #include "ADM_encoder/adm_encConfig.h"
-#include "ADM_encoder/ADM_vidEncode.hxx"
-
 #include "ADM_libraries/ADM_mplex/ADM_mthread.h"
 
 static uint8_t *_buffer = NULL, *_outbuffer = NULL;
 static void end(void);
 extern const char *getStrFromAudioCodec(uint32_t codec);
 
-extern COMPRES_PARAMS ffmpeg1Codec,ffmpeg2DVDCodec,ffmpeg2SVCDCodec,RequantCodec;	
-extern FFcodecSetting ffmpeg1Extra,ffmpeg2DVDExtra,ffmpeg2SVCDExtra;
-extern COMPRES_PARAMS SVCDCodec, DVDCodec,VCDCodec;
-
-extern uint8_t    isMpeg12Compatible (uint32_t fourcc);
-
 extern SelectCodecType videoCodecGetType(void);
 
 static char *twoPass = NULL;
@@ -186,49 +167,11 @@
             }
          }        
         // Create muxer
-       
-       
-        switch (videoCodecGetType())
-        {
-                
-                case CodecXVCD:
-                        encoder=new EncoderFFMPEGMpeg1(FF_MPEG1,&ffmpeg1Codec);
-                        printf("\n Using ffmpeg mpeg1 encoder\n");
-                        break;
-                case CodecXSVCD:
-                        encoder=new EncoderFFMPEGMpeg1(FF_MPEG2,&ffmpeg2SVCDCodec);
-                        printf("\n Using ffmpeg mpeg2 encoder\n");
-                        break;
-                case CodecXDVD:
-                        encoder=new EncoderFFMPEGMpeg1(FF_MPEG2,&ffmpeg2DVDCodec);
-                        printf("\n Using ffmpeg mpeg2 encoder (DVD)\n");
-                        break;
-                case CodecDVD:
-                  encoder=new EncoderMpeg2enc(MPEG2ENC_DVD,&DVDCodec);
-                  printf("\n Using mpeg2enc encoder (DVD)\n");
-                  break;
-                case CodecRequant:
-                  if(!isMpeg12Compatible(avifileinfo->fcc))
-                  {
-                    GUI_Error_HIG("Incompatible Input","The input file must be mpeg2 to be able to use requant!");
-                    return 0; // Fixme, do some cleanup 
-                  }
-                  encoder=new EncoderRequant(&RequantCodec);
-                  printf("\n Using mpeg2 requant\n");
-                  break;
-                break;
-                case CodecSVCD:
-                  encoder=new EncoderMpeg2enc(MPEG2ENC_SVCD,&SVCDCodec);
-                  printf("\n Using mpeg2enc encoder (SVCD)\n");
-                  break;
-                case CodecVCD:
-                  encoder=new EncoderMpeg2enc(MPEG2ENC_VCD,&VCDCodec);
-                  printf("\n Using mpeg2enc encoder (VCD)\n");
-                  break;
-                default:
-                ADM_assert(0);
-      }
+       encoder = getVideoEncoder(_w, _h, 0);
 
+	   if (encoder == NULL)
+		   return 0;
+
       encoder->setLogFile(twoPass,total);
 
 	  if (encoder->isDualPass())



From gruntster at mail.berlios.de  Fri Jul 17 21:49:26 2009
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Fri, 17 Jul 2009 21:49:26 +0200
Subject: [Avidemux-svn-commit] r5101 -
	branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk
Message-ID: <200907171949.n6HJnQNm021871@sheep.berlios.de>

Author: gruntster
Date: 2009-07-17 21:49:22 +0200 (Fri, 17 Jul 2009)
New Revision: 5101

Modified:
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk/x264ConfigDialog.cpp
Log:
[x264] load average quantiser in GTK+ config window

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk/x264ConfigDialog.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk/x264ConfigDialog.cpp	2009-07-17 19:30:16 UTC (rev 5100)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk/x264ConfigDialog.cpp	2009-07-17 19:49:22 UTC (rev 5101)
@@ -148,7 +148,7 @@
 	{
 		encodeOptions->encodeMode = getCurrentEncodeMode(dialog);
 
-		if (encodeOptions->encodeMode == ADM_VIDENC_MODE_CQP)
+		if (encodeOptions->encodeMode == ADM_VIDENC_MODE_CQP || encodeOptions->encodeMode == ADM_VIDENC_MODE_AQP)
 			encodeOptions->encodeModeParameter = (int)gtk_spin_button_get_value(GTK_SPIN_BUTTON(WID(spinbuttonQuantizer)));
 		else
 		{



From gruntster at mail.berlios.de  Fri Jul 17 22:04:27 2009
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Fri, 17 Jul 2009 22:04:27 +0200
Subject: [Avidemux-svn-commit] r5102 - in
	branches/avidemux_2.5_branch_gruntster/platforms/windows:
	build_scripts/avidemux installer
Message-ID: <200907172004.n6HK4RDT023295@sheep.berlios.de>

Author: gruntster
Date: 2009-07-17 22:04:21 +0200 (Fri, 17 Jul 2009)
New Revision: 5102

Modified:
   branches/avidemux_2.5_branch_gruntster/platforms/windows/build_scripts/avidemux/Package Notes.xml
   branches/avidemux_2.5_branch_gruntster/platforms/windows/installer/avidemux.nsi
Log:
[win32] update installer to include opencore plugins

Modified: branches/avidemux_2.5_branch_gruntster/platforms/windows/build_scripts/avidemux/Package Notes.xml
===================================================================
--- branches/avidemux_2.5_branch_gruntster/platforms/windows/build_scripts/avidemux/Package Notes.xml	2009-07-17 19:49:22 UTC (rev 5101)
+++ branches/avidemux_2.5_branch_gruntster/platforms/windows/build_scripts/avidemux/Package Notes.xml	2009-07-17 20:04:21 UTC (rev 5102)
@@ -1,5 +1,23 @@
 <?xml version="1.0"?>
 <log>
+  <buildentry revision="5087" date="2009-07-13">
+  </buildentry>
+  <buildentry revision="5065" date="2009-07-12">
+    <comment>Updated Vorbis to version 1.2.3.</comment>
+    <comment>Updated x264 to r1181.</comment>
+  </buildentry>
+  <buildentry revision="5031" date="2009-07-10">
+    <comment>Recompiled FAAC with MinGW's GCC 4.2.1-sjlj-2.</comment>
+    <comment>Updated x264 to r1179.</comment>
+  </buildentry>
+  <buildentry revision="5010" date="2009-07-06">
+  </buildentry>
+  <buildentry revision="4997" date="2009-07-05">
+  </buildentry>
+  <buildentry revision="4992" date="2009-07-04">
+    <comment>Updated FAAC to version 1.28.</comment>
+    <comment>Updated FAAD2 to version 2.7.</comment>
+  </buildentry>
   <buildentry revision="4968" date="2009-06-27">
     <comment>Updated ATK to version 1.26.0-1.</comment>
     <comment>Updated GLib to version 2.20.3-1.</comment>

Modified: branches/avidemux_2.5_branch_gruntster/platforms/windows/installer/avidemux.nsi
===================================================================
--- branches/avidemux_2.5_branch_gruntster/platforms/windows/installer/avidemux.nsi	2009-07-17 19:49:22 UTC (rev 5101)
+++ branches/avidemux_2.5_branch_gruntster/platforms/windows/installer/avidemux.nsi	2009-07-17 20:04:21 UTC (rev 5102)
@@ -388,6 +388,22 @@
 			SetOutPath $INSTDIR\plugins\audioDecoder
 			${File} plugins\audioDecoder\libADM_ad_Mad.dll
 		${MementoSectionEnd}
+		${MementoSection} "opencore-amrnb (AMR-NB)" SecAudDecOpencoreAmrNb
+			SectionIn 1 2
+			SetOverwrite on
+			SetOutPath $INSTDIR\plugins\audioDecoder
+			${File} plugins\audioDecoder\libADM_ad_opencore_amrnb.dll
+			SetOutPath $INSTDIR
+			${File} libopencore-amrnb.dll
+		${MementoSectionEnd}
+		${MementoSection} "opencore-amrwb (AMR-WB)" SecAudDecOpencoreAmrWb
+			SectionIn 1 2
+			SetOverwrite on
+			SetOutPath $INSTDIR\plugins\audioDecoder
+			${File} plugins\audioDecoder\libADM_ad_opencore_amrwb.dll
+			SetOutPath $INSTDIR
+			${File} libopencore-amrwb.dll
+		${MementoSectionEnd}
 	SectionGroupEnd
 	SectionGroup "Audio Devices" SecGrpAudioDevice
 		${MementoUnselectedSection} SDL SecAudDevSdl



From gruntster at mail.berlios.de  Fri Jul 17 22:19:18 2009
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Fri, 17 Jul 2009 22:19:18 +0200
Subject: [Avidemux-svn-commit] r5103 - in
	branches/avidemux_2.5_branch_gruntster:
	avidemux/ADM_audiocodec cmake
Message-ID: <200907172019.n6HKJIMd024717@sheep.berlios.de>

Author: gruntster
Date: 2009-07-17 22:19:12 +0200 (Fri, 17 Jul 2009)
New Revision: 5103

Modified:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiocodec/ADM_audiocodec.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiocodec/ADM_codecwma.cpp
   branches/avidemux_2.5_branch_gruntster/cmake/admFFmpegBuild.cmake
Log:
[dca] use avcodec dts decoder if libdca isn't found

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiocodec/ADM_audiocodec.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiocodec/ADM_audiocodec.cpp	2009-07-17 20:04:21 UTC (rev 5102)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiocodec/ADM_audiocodec.cpp	2009-07-17 20:19:12 UTC (rev 5103)
@@ -81,16 +81,20 @@
 					out= (ADM_Audiocodec *)new ADM_AudiocodecWav(fourcc);
 #endif					
                   		break;
+                case WAV_DTS:
 #ifdef USE_LIBDCA
-                case WAV_DTS:
 					if (dca->isAvailable())
 					{
-						printf("\n Audio codec:  DTS\n");
+						printf("\n Audio codec:  DTS (libdca)\n");
 						out= (ADM_Audiocodec *) new ADM_AudiocodecDCA(fourcc, info);						
 					}
+#else
+					printf("\n Audio codec:  DTS (avcodec)\n");
+					out= (ADM_Audiocodec *)new ADM_AudiocodecWMA(fourcc,info,extra,extraData);
+#endif
 
 					break;
-#endif
+
 				case WAV_ULAW:
 						printf("\n ULAW codec\n");
 						out=(ADM_Audiocodec *) new ADM_AudiocodecUlaw(fourcc,info);

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiocodec/ADM_codecwma.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiocodec/ADM_codecwma.cpp	2009-07-17 20:04:21 UTC (rev 5102)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiocodec/ADM_codecwma.cpp	2009-07-17 20:19:12 UTC (rev 5103)
@@ -75,7 +75,10 @@
         _context->codec_id = CODEC_ID_NELLYMOSER;
         _blockalign=1;
         break;
-
+	  case WAV_DTS:
+		_context->codec_id = CODEC_ID_DTS;
+		_blockalign = 1;
+		break;
       default:
              ADM_assert(0);
     }

Modified: branches/avidemux_2.5_branch_gruntster/cmake/admFFmpegBuild.cmake
===================================================================
--- branches/avidemux_2.5_branch_gruntster/cmake/admFFmpegBuild.cmake	2009-07-17 20:04:21 UTC (rev 5102)
+++ branches/avidemux_2.5_branch_gruntster/cmake/admFFmpegBuild.cmake	2009-07-17 20:19:12 UTC (rev 5103)
@@ -7,7 +7,7 @@
 set(FFMPEG_SOURCE_DIR "${LIBRARY_SOURCE_DIR}/ffmpeg")
 set(FFMPEG_BINARY_DIR "${CMAKE_BINARY_DIR}/avidemux/ADM_libraries/ffmpeg")
 
-set(FFMPEG_DECODERS  adpcm_ima_amv  amv  bmp  cinepak  dnxhd  dvbsub  dvvideo  ffv1  ffvhuff  flv  fourxm  fraps  h263  h264  huffyuv  indeo2  indeo3
+set(FFMPEG_DECODERS  adpcm_ima_amv  amv  bmp  cinepak  dca  dnxhd  dvbsub  dvvideo  ffv1  ffvhuff  flv  fourxm  fraps  h263  h264  huffyuv  indeo2  indeo3
 					 interplay_video  mjpeg  mjpegb  mpeg1video  mpeg2video  mpeg4  mpegaudio_hp  mpegvideo  msmpeg4v1  msmpeg4v2  msmpeg4v3  msvideo1
 					 nellymoser  png  qdm2  rawvideo rv10  rv20  snow  svq1  svq3  tscc  vc1  vcr1  vp3  vp5  vp6  vp6a  vp6f  wmav2  wmv1  wmv2  wmv3)
 set(FFMPEG_ENCODERS  ac3  dvbsub  dvvideo  ffv1  ffvhuff  flv  flv1  h263  h263p  huffyuv  mjpeg  mpeg1video  mpeg2video  mp2  mpeg4  msmpeg4v3  snow)



From gruntster at mail.berlios.de  Fri Jul 17 22:27:41 2009
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Fri, 17 Jul 2009 22:27:41 +0200
Subject: [Avidemux-svn-commit] r5104 - in
	branches/avidemux_2.5_branch_gruntster/avidemux:
	ADM_audiocodec ADM_encoder
Message-ID: <200907172027.n6HKRfX7025981@sheep.berlios.de>

Author: gruntster
Date: 2009-07-17 22:27:36 +0200 (Fri, 17 Jul 2009)
New Revision: 5104

Removed:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiocodec/adm_ogg.h
Modified:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encffmpeg.h
Log:
[codec] remove more old remnants

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiocodec/adm_ogg.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiocodec/adm_ogg.h	2009-07-17 20:19:12 UTC (rev 5103)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiocodec/adm_ogg.h	2009-07-17 20:27:36 UTC (rev 5104)
@@ -1,20 +0,0 @@
-/***************************************************************************
-                          adm_ogg.h  -  description
-                             -------------------
-    begin                : Thu May 23 2002
-    copyright            : (C) 2002 by mean
-    email                : fixounet at free.fr
- ***************************************************************************/
-
-/***************************************************************************
- *                                                                         *
- *   This program is free software; you can redistribute it and/or modify  *
- *   it under the terms of the GNU General Public License as published by  *
- *   the Free Software Foundation; either version 2 of the License, or     *
- *   (at your option) any later version.                                   *
- *                                                                         *
- ***************************************************************************/
-
-uint8_t 	    ADM_OggInit(void );
-uint8_t 	    ADM_OggEnd(void );
-uint8_t 		ADM_OggRun(uint8_t * ptr, uint32_t nbIn, uint8_t * outptr,   uint32_t * nbOut);

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encffmpeg.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encffmpeg.h	2009-07-17 20:19:12 UTC (rev 5103)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encffmpeg.h	2009-07-17 20:27:36 UTC (rev 5104)
@@ -56,138 +56,6 @@
 
 };
 
-class EncoderFFMPEGHuff:public EncoderFFMPEG
-{
-
-protected:
-
-
-public:
-  EncoderFFMPEGHuff (COMPRES_PARAMS * codecParam);
-  ~EncoderFFMPEGHuff ()
-  {
-    stop ();
-  };				// can be called twice if needed ..
-  virtual int getRequirements (void);
-  virtual uint8_t isDualPass (void)
-  {
-    return 0;
-  };
-  virtual uint8_t configure (AVDMGenericVideoStream * instream, int useExistingLogFile);
-  virtual uint8_t setLogFile (const char *p, uint32_t fr)
-  {
-    UNUSED_ARG (p);
-    UNUSED_ARG (fr);
-    return 1;
-  };
-  virtual uint8_t startPass2 (void)
-  {
-    return 1;
-  };
-  virtual uint8_t startPass1 (void)
-  {
-    return 1;
-  };
-  virtual const char *getDisplayName (void)
-  {
-    return "LavCodec HUFFYUV";
-  }
-  virtual const char *getFCCHandler (void)
-  {
-    return "HFYU";
-  }
-  virtual uint8_t hasExtraHeaderData (uint32_t * l, uint8_t ** data);
-
-};
-class EncoderFFMPEGFFHuff:public EncoderFFMPEG
-{
-
-protected:
-
-
-public:
-  EncoderFFMPEGFFHuff (COMPRES_PARAMS * config);
-  ~EncoderFFMPEGFFHuff ()
-  {
-    stop ();
-  };				// can be called twice if needed ..
-  virtual int getRequirements (void);
-  virtual uint8_t isDualPass (void)
-  {
-    return 0;
-  };
-  virtual uint8_t configure (AVDMGenericVideoStream * instream, int useExistingLogFile);
-  virtual uint8_t setLogFile (const char *p, uint32_t fr)
-  {
-    UNUSED_ARG (p);
-    UNUSED_ARG (fr);
-    return 1;
-  };
-  virtual uint8_t startPass2 (void)
-  {
-    return 1;
-  };
-  virtual uint8_t startPass1 (void)
-  {
-    return 1;
-  };
-  virtual const char *getDisplayName (void)
-  {
-    return "LavCodec HUFFYUV";
-  }
-  virtual const char *getFCCHandler (void)
-  {
-    return "HFYU";
-  }
-  virtual uint8_t hasExtraHeaderData (uint32_t * l, uint8_t ** data);
-
-};
-
-class EncoderFFMPEGFFV1:public EncoderFFMPEG
-{
-
-protected:
-
-
-public:
-  EncoderFFMPEGFFV1 (COMPRES_PARAMS * config);
-  ~EncoderFFMPEGFFV1 ()
-  {
-    stop ();
-  };				// can be called twice if needed ..
-  virtual int getRequirements (void);
-  virtual uint8_t isDualPass (void)
-  {
-    return 0;
-  };
-  virtual uint8_t configure (AVDMGenericVideoStream * instream, int useExistingLogFile);
-  virtual uint8_t setLogFile (const char *p, uint32_t fr)
-  {
-    UNUSED_ARG (p);
-    UNUSED_ARG (fr);
-    return 1;
-  };
-  virtual uint8_t startPass2 (void)
-  {
-    return 1;
-  };
-  virtual uint8_t startPass1 (void)
-  {
-    return 1;
-  };
-  virtual const char *getDisplayName (void)
-  {
-    return "LavCodec FFV1";
-  }
-  virtual const char *getFCCHandler (void)
-  {
-    return "FFV1";
-  }
-  virtual uint8_t hasExtraHeaderData (uint32_t * l, uint8_t ** data);
-
-};
-
-
 class EncoderFFMPEGMpeg1:public EncoderFFMPEG
 {
 private:
@@ -216,95 +84,6 @@
           uint8_t verifyLog(const char *name,uint32_t nbFrame);
 };
 
-class EncodeFFMPEGSNow:public EncoderFFMPEG
-{
-
-protected:
-
-
-public:
-  EncodeFFMPEGSNow (COMPRES_PARAMS * config);
-  ~EncodeFFMPEGSNow ()
-  {
-    stop ();
-  };				// can be called twice if needed ..
-  virtual int getRequirements (void);
-  virtual uint8_t isDualPass (void)
-  {
-    return 0;
-  };
-  virtual uint8_t configure (AVDMGenericVideoStream * instream, int useExistingLogFile);
-  virtual uint8_t setLogFile (const char *p, uint32_t fr)
-  {
-    UNUSED_ARG (p);
-    UNUSED_ARG (fr);
-    return 1;
-  };
-  virtual uint8_t startPass2 (void)
-  {
-    return 1;
-  };
-  virtual uint8_t startPass1 (void)
-  {
-    return 1;
-  };
-  virtual const char *getDisplayName (void)
-  {
-    return "LavCodec Snow";
-  }
-  virtual const char *getFCCHandler (void)
-  {
-    return "SNOW";
-  }
-  virtual uint8_t hasExtraHeaderData (uint32_t * l, uint8_t ** data);
-
-};
-
-
-    
-class EncoderFFMPEGDV:public EncoderFFMPEG
-{
-
-protected:
-
-
-public:
-  EncoderFFMPEGDV (COMPRES_PARAMS * config);
-  ~EncoderFFMPEGDV ()
-  {
-    stop ();
-  };				// can be called twice if needed ..
-  virtual int getRequirements (void);
-  virtual uint8_t isDualPass (void)
-  {
-    return 0;
-  };
-  virtual uint8_t configure (AVDMGenericVideoStream * instream, int useExistingLogFile);
-  virtual uint8_t setLogFile (const char *p, uint32_t fr)
-  {
-    UNUSED_ARG (p);
-    UNUSED_ARG (fr);
-    return 1;
-  };
-  virtual uint8_t startPass2 (void)
-  {
-    return 1;
-  };
-  virtual uint8_t startPass1 (void)
-  {
-    return 1;
-  };
-  virtual const char *getDisplayName (void)
-  {
-    return "FFMPEG DV";
-  }
-  virtual const char *getFCCHandler (void)
-  {
-    return "dvsd";
-  }
-  virtual uint8_t hasExtraHeaderData (uint32_t * l, uint8_t ** data);
-
-};
 class EncoderFFMPEGFLV1:public EncoderFFMPEG
 {
 



From mean at mail.berlios.de  Sat Jul 18 19:45:09 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sat, 18 Jul 2009 19:45:09 +0200
Subject: [Avidemux-svn-commit] r5105 - in
	branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioDecoders:
	. ADM_ad_opencore_amrnb ADM_ad_opencore_amrwb
Message-ID: <200907181745.n6IHj9C6000198@sheep.berlios.de>

Author: mean
Date: 2009-07-18 19:45:08 +0200 (Sat, 18 Jul 2009)
New Revision: 5105

Added:
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioDecoders/ADM_ad_opencore_amrnb/
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioDecoders/ADM_ad_opencore_amrnb/ADM_ad_opencore_amrnb.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioDecoders/ADM_ad_opencore_amrnb/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioDecoders/ADM_ad_opencore_amrwb/
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioDecoders/ADM_ad_opencore_amrwb/ADM_ad_opencore_amrwb.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioDecoders/ADM_ad_opencore_amrwb/CMakeLists.txt
Log:
[audioDecoder] Merged opencore from 2.5

Added: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioDecoders/ADM_ad_opencore_amrnb/ADM_ad_opencore_amrnb.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioDecoders/ADM_ad_opencore_amrnb/ADM_ad_opencore_amrnb.cpp	2009-07-17 20:27:36 UTC (rev 5104)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioDecoders/ADM_ad_opencore_amrnb/ADM_ad_opencore_amrnb.cpp	2009-07-18 17:45:08 UTC (rev 5105)
@@ -0,0 +1,119 @@
+/***************************************************************************
+                     ADM_ad_opencore.cpp  -  description
+                     -----------------------------------
+
+    begin                : Tue Jul 14 2009
+    copyright            : (C) 2009 by mean/Gruntster
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+#include "ADM_default.h"
+#include "ADM_ad_plugin.h"
+
+extern "C" {
+#include <opencore-amrnb/interf_dec.h>
+};
+
+#define ADM_AMR_BUFFER (16 * 1024) // 16 kB internal
+
+class ADM_AudiocodecOpencoreAmrNb : public ADM_Audiocodec
+{
+protected:
+	void *state;
+	uint8_t _buffer[ADM_AMR_BUFFER];
+	uint32_t _head, _tail;
+
+public:
+	ADM_AudiocodecOpencoreAmrNb(uint32_t fourcc, WAVHeader *info,uint32_t extraLength,uint8_t *extraDatab);
+	~ADM_AudiocodecOpencoreAmrNb();
+	uint8_t beginDecompress(void);
+	uint8_t endDecompress(void);
+	uint8_t run(uint8_t *inptr, uint32_t nbIn, float *outptr, uint32_t *nbOut);
+	uint8_t isCompressed(void) { return 1; }
+	uint8_t isDecompressable(void) { return 1; }
+};
+
+static uint32_t Formats[] = { WAV_AMRNB };
+
+DECLARE_AUDIO_DECODER(ADM_AudiocodecOpencoreAmrNb,	// Class
+1,0,0, 												// Major, minor,patch 
+Formats, 											// Supported formats
+"opencore-amrnb decoder plugin for Avidemux (c) Mean/Gruntster\n"); 	// Desc
+
+uint8_t ADM_AudiocodecOpencoreAmrNb::beginDecompress( void ) 
+{
+	_tail = _head = 0;
+
+	return 1;
+};
+
+uint8_t ADM_AudiocodecOpencoreAmrNb::endDecompress( void ) 
+{
+	_tail = _head = 0;
+	return 1;
+};
+
+ADM_AudiocodecOpencoreAmrNb::ADM_AudiocodecOpencoreAmrNb(
+	uint32_t fourcc, WAVHeader *info, uint32_t extraLength, uint8_t *extraData) : ADM_Audiocodec(fourcc)
+{
+	state = Decoder_Interface_init();
+	_wavHeader = info;
+	ADM_assert(_wavHeader);
+}
+
+ADM_AudiocodecOpencoreAmrNb::~ADM_AudiocodecOpencoreAmrNb( )
+{
+	if (state)
+	{
+		Decoder_Interface_exit(state);
+		state = NULL;
+	}
+}
+
+uint8_t ADM_AudiocodecOpencoreAmrNb::run(uint8_t *inptr, uint32_t nbIn, float *outptr,   uint32_t *nbOut)
+{
+#define SAMPLE_PER_FRAME 160
+
+	static const short block_size[16]={ 12, 13, 15, 17, 19, 20, 26, 31, 5, 0, 0, 0, 0, 0, 0, 0 };
+	int16_t decodeBuffer[SAMPLE_PER_FRAME];
+	uint8_t *buf = inptr;
+	*nbOut = 0;
+
+again:	
+	while (nbIn)
+	{
+		int dec_mode,packet_size;
+		dec_mode = (buf[0] >> 3) & 0x000F;
+
+		packet_size = block_size[dec_mode] + 1;
+		if (packet_size > nbIn)
+		{
+			printf("Packet size %u, available data %u\n", packet_size, nbIn);
+			return 1;
+		}
+
+		Decoder_Interface_Decode(state, buf, decodeBuffer, 0);
+
+		// int to float
+		int16_t *in = decodeBuffer;
+		for (int i = 0; i < SAMPLE_PER_FRAME; i++) 
+		{
+			*(outptr++) = (float)*in / 32768;
+			in++;
+		}
+
+		*nbOut += SAMPLE_PER_FRAME;
+
+		buf += packet_size;
+		nbIn -= packet_size;
+	}
+
+	return 1; 
+}

Added: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioDecoders/ADM_ad_opencore_amrnb/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioDecoders/ADM_ad_opencore_amrnb/CMakeLists.txt	2009-07-17 20:27:36 UTC (rev 5104)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioDecoders/ADM_ad_opencore_amrnb/CMakeLists.txt	2009-07-18 17:45:08 UTC (rev 5105)
@@ -0,0 +1,17 @@
+# OpenCORE AMR-NB decoder
+INCLUDE(admCheckOpencore)
+checkOpencoreAmrnb()
+
+IF (OPENCORE_AMRNB_FOUND)
+	INCLUDE(ad_plugin)
+	
+	SET(ADM_ad_opencore_amrnb_SRCS ADM_ad_opencore_amrnb.cpp)
+
+	ADD_LIBRARY(ADM_ad_opencore_amrnb SHARED ${ADM_ad_opencore_amrnb_SRCS})
+	TARGET_LINK_LIBRARIES(ADM_ad_opencore_amrnb ADM_core ${OPENCORE_AMRNB_LIBRARY_DIR})
+
+	ADD_TARGET_CFLAGS(ADM_ad_opencore_amrnb "-I${OPENCORE_AMRNB_INCLUDE_DIR}")
+
+	INIT_AUDIO_PLUGIN(ADM_ad_opencore_amrnb)
+	INSTALL_AUDIODECODER(ADM_ad_opencore_amrnb)
+ENDIF (OPENCORE_AMRNB_FOUND)

Added: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioDecoders/ADM_ad_opencore_amrwb/ADM_ad_opencore_amrwb.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioDecoders/ADM_ad_opencore_amrwb/ADM_ad_opencore_amrwb.cpp	2009-07-17 20:27:36 UTC (rev 5104)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioDecoders/ADM_ad_opencore_amrwb/ADM_ad_opencore_amrwb.cpp	2009-07-18 17:45:08 UTC (rev 5105)
@@ -0,0 +1,123 @@
+/***************************************************************************
+                     ADM_ad_opencore.cpp  -  description
+                     -----------------------------------
+
+    begin                : Tue Jul 14 2009
+    copyright            : (C) 2009 by mean/Gruntster
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+#include "ADM_default.h"
+#include "ADM_ad_plugin.h"
+
+extern "C" {
+#include <opencore-amrwb/dec_if.h>
+#include <opencore-amrwb/if_rom.h>
+};
+
+#define ADM_AMR_BUFFER (16 * 1024) // 16 kB internal
+
+class ADM_AudiocodecOpencoreAmrWb : public ADM_Audiocodec
+{
+protected:
+	void *state;
+	uint8_t _buffer[ADM_AMR_BUFFER];
+	uint32_t _head, _tail;
+
+public:
+	ADM_AudiocodecOpencoreAmrWb(uint32_t fourcc, WAVHeader *info,uint32_t extraLength,uint8_t *extraDatab);
+	~ADM_AudiocodecOpencoreAmrWb();
+	uint8_t beginDecompress(void);
+	uint8_t endDecompress(void);
+	uint8_t run(uint8_t *inptr, uint32_t nbIn, float *outptr, uint32_t *nbOut);
+	uint8_t isCompressed(void) { return 1; }
+	uint8_t isDecompressable(void) { return 1; }
+};
+
+static uint32_t Formats[] = { WAV_AMRWB };
+
+DECLARE_AUDIO_DECODER(ADM_AudiocodecOpencoreAmrWb,	// Class
+1,0,0, 												// Major, minor,patch 
+Formats, 											// Supported formats
+"opencore-amrwb decoder plugin for Avidemux (c) Mean/Gruntster\n"); 	// Desc
+
+uint8_t ADM_AudiocodecOpencoreAmrWb::beginDecompress( void ) 
+{
+	_tail = _head = 0;
+
+	return 1;
+};
+
+uint8_t ADM_AudiocodecOpencoreAmrWb::endDecompress( void ) 
+{
+	_tail = _head = 0;
+	return 1;
+};
+
+ADM_AudiocodecOpencoreAmrWb::ADM_AudiocodecOpencoreAmrWb(
+	uint32_t fourcc, WAVHeader *info, uint32_t extraLength, uint8_t *extraData) : ADM_Audiocodec(fourcc)
+{
+	state = D_IF_init();
+	_wavHeader = info;
+	ADM_assert(_wavHeader);
+
+	info->channels = 1;
+}
+
+ADM_AudiocodecOpencoreAmrWb::~ADM_AudiocodecOpencoreAmrWb( )
+{
+	if (state)
+	{
+		D_IF_exit(state);
+		state = NULL;
+	}
+}
+
+uint8_t ADM_AudiocodecOpencoreAmrWb::run(uint8_t *inptr, uint32_t nbIn, float *outptr, uint32_t *nbOut)
+{
+#define SAMPLE_PER_FRAME 320
+
+	static const short block_size[16] = { 18, 24, 33, 37, 41, 47, 51, 59, 61, 6, 6, 0, 0, 0, 1, 1 };
+	int16_t decodeBuffer[SAMPLE_PER_FRAME];
+	uint8_t *buf = inptr;
+	*nbOut = 0;
+
+again:	
+	while (nbIn)
+	{
+		int dec_mode,packet_size;
+		dec_mode = (buf[0] >> 3) & 0x000F;
+
+		packet_size = block_size[dec_mode];
+
+		if (packet_size > nbIn)
+		{
+			printf("Packet size %u, available data %u\n", packet_size, nbIn);
+			return 1;
+		}
+
+		D_IF_decode(state, buf, decodeBuffer, _good_frame);
+
+		// int to float
+		int16_t *in = decodeBuffer;
+		for (int i = 0; i < SAMPLE_PER_FRAME; i++) 
+		{
+			*(outptr++) = (float)*in / 32768;
+			in++;
+		}
+
+		*nbOut += SAMPLE_PER_FRAME;
+
+		buf += packet_size;
+		nbIn -= packet_size;
+	}
+
+	return 1; 
+}

Added: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioDecoders/ADM_ad_opencore_amrwb/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioDecoders/ADM_ad_opencore_amrwb/CMakeLists.txt	2009-07-17 20:27:36 UTC (rev 5104)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioDecoders/ADM_ad_opencore_amrwb/CMakeLists.txt	2009-07-18 17:45:08 UTC (rev 5105)
@@ -0,0 +1,17 @@
+# OpenCORE AMR-WB decoder
+INCLUDE(admCheckOpencore)
+checkOpencoreAmrwb()
+
+IF (OPENCORE_AMRWB_FOUND)
+	INCLUDE(ad_plugin)
+	
+	SET(ADM_ad_opencore_amrwb_SRCS ADM_ad_opencore_amrwb.cpp)
+
+	ADD_LIBRARY(ADM_ad_opencore_amrwb SHARED ${ADM_ad_opencore_amrwb_SRCS})
+	TARGET_LINK_LIBRARIES(ADM_ad_opencore_amrwb ADM_core ${OPENCORE_AMRWB_LIBRARY_DIR})
+
+	ADD_TARGET_CFLAGS(ADM_ad_opencore_amrwb "-I${OPENCORE_AMRWB_INCLUDE_DIR}")
+
+	INIT_AUDIO_PLUGIN(ADM_ad_opencore_amrwb)
+	INSTALL_AUDIODECODER(ADM_ad_opencore_amrwb)
+ENDIF (OPENCORE_AMRWB_FOUND)



From mean at mail.berlios.de  Sat Jul 18 19:45:11 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sat, 18 Jul 2009 19:45:11 +0200
Subject: [Avidemux-svn-commit] r5106 - in branches/avidemux_2.6_branch_mean:
	avidemux_core/ADM_coreAudio/include
	avidemux_plugins/ADM_audioDecoders
	avidemux_plugins/ADM_audioDecoders/ADM_ad_opencore_amrnb
	avidemux_plugins/ADM_audioDecoders/ADM_ad_opencore_amrwb cmake
Message-ID: <200907181745.n6IHjBvA000211@sheep.berlios.de>

Author: mean
Date: 2009-07-18 19:45:11 +0200 (Sat, 18 Jul 2009)
New Revision: 5106

Added:
   branches/avidemux_2.6_branch_mean/cmake/admCheckOpencore.cmake
Modified:
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreAudio/include/ADM_audioCodecEnum.h
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioDecoders/ADM_ad_opencore_amrnb/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioDecoders/ADM_ad_opencore_amrwb/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioDecoders/CMakeLists.txt
Log:
[openCore] Merged opencore support from 2.5

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreAudio/include/ADM_audioCodecEnum.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreAudio/include/ADM_audioCodecEnum.h	2009-07-18 17:45:08 UTC (rev 5105)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreAudio/include/ADM_audioCodecEnum.h	2009-07-18 17:45:11 UTC (rev 5106)
@@ -19,6 +19,7 @@
 #define WAV_AAC_HE 	0xfe // dummy id
 #define WAV_8BITS_UNSIGNED 	55 // dummy id
 #define WAV_AMRNB 	56 // dummy id
+#define WAV_AMRWB 	57 // dummy id
 #define WAV_ULAW	7 
 #define WAV_QDM2 	58
 #define WAV_IMAADPCM    17

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioDecoders/ADM_ad_opencore_amrnb/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioDecoders/ADM_ad_opencore_amrnb/CMakeLists.txt	2009-07-18 17:45:08 UTC (rev 5105)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioDecoders/ADM_ad_opencore_amrnb/CMakeLists.txt	2009-07-18 17:45:11 UTC (rev 5106)
@@ -8,7 +8,7 @@
 	SET(ADM_ad_opencore_amrnb_SRCS ADM_ad_opencore_amrnb.cpp)
 
 	ADD_LIBRARY(ADM_ad_opencore_amrnb SHARED ${ADM_ad_opencore_amrnb_SRCS})
-	TARGET_LINK_LIBRARIES(ADM_ad_opencore_amrnb ADM_core ${OPENCORE_AMRNB_LIBRARY_DIR})
+	TARGET_LINK_LIBRARIES(ADM_ad_opencore_amrnb  ${OPENCORE_AMRNB_LIBRARY_DIR})
 
 	ADD_TARGET_CFLAGS(ADM_ad_opencore_amrnb "-I${OPENCORE_AMRNB_INCLUDE_DIR}")
 

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioDecoders/ADM_ad_opencore_amrwb/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioDecoders/ADM_ad_opencore_amrwb/CMakeLists.txt	2009-07-18 17:45:08 UTC (rev 5105)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioDecoders/ADM_ad_opencore_amrwb/CMakeLists.txt	2009-07-18 17:45:11 UTC (rev 5106)
@@ -8,7 +8,7 @@
 	SET(ADM_ad_opencore_amrwb_SRCS ADM_ad_opencore_amrwb.cpp)
 
 	ADD_LIBRARY(ADM_ad_opencore_amrwb SHARED ${ADM_ad_opencore_amrwb_SRCS})
-	TARGET_LINK_LIBRARIES(ADM_ad_opencore_amrwb ADM_core ${OPENCORE_AMRWB_LIBRARY_DIR})
+	TARGET_LINK_LIBRARIES(ADM_ad_opencore_amrwb  ${OPENCORE_AMRWB_LIBRARY_DIR})
 
 	ADD_TARGET_CFLAGS(ADM_ad_opencore_amrwb "-I${OPENCORE_AMRWB_INCLUDE_DIR}")
 

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioDecoders/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioDecoders/CMakeLists.txt	2009-07-18 17:45:08 UTC (rev 5105)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioDecoders/CMakeLists.txt	2009-07-18 17:45:11 UTC (rev 5106)
@@ -8,3 +8,5 @@
 ADD_SUBDIRECTORY(ADM_ad_ulaw)
 ADD_SUBDIRECTORY(ADM_ad_ms_adpcm)
 ADD_SUBDIRECTORY(ADM_ad_ima_adpcm)
+ADD_SUBDIRECTORY(ADM_ad_opencore_amrwb)
+ADD_SUBDIRECTORY(ADM_ad_opencore_amrnb)

Added: branches/avidemux_2.6_branch_mean/cmake/admCheckOpencore.cmake
===================================================================
--- branches/avidemux_2.6_branch_mean/cmake/admCheckOpencore.cmake	2009-07-18 17:45:08 UTC (rev 5105)
+++ branches/avidemux_2.6_branch_mean/cmake/admCheckOpencore.cmake	2009-07-18 17:45:11 UTC (rev 5106)
@@ -0,0 +1,41 @@
+MACRO(checkOpencoreAmrnb)
+	IF (NOT OPENCORE_AMRNB_CHECKED)
+		OPTION(OPENCORE_AMRNB "" ON)
+
+		MESSAGE(STATUS "Checking for opencore-amrnb")
+		MESSAGE(STATUS "***************************")
+
+		IF (OPENCORE_AMRNB)
+			FIND_HEADER_AND_LIB(OPENCORE_AMRNB opencore-amrnb/interf_dec.h opencore-amrnb Decoder_Interface_init)
+			PRINT_LIBRARY_INFO("opencore-amrnb" OPENCORE_AMRNB_FOUND "${OPENCORE_AMRNB_INCLUDE_DIR}" "${OPENCORE_AMRNB_LIBRARY_DIR}")
+		ELSE (OPENCORE_AMRNB)
+			MESSAGE("${MSG_DISABLE_OPTION}")
+		ENDIF (OPENCORE_AMRNB)
+
+		SET(ENV{ADM_HAVE_OPENCORE_AMRNB} ${OPENCORE_AMRNB_FOUND})
+		MESSAGE("")
+
+		SET(OPENCORE_AMRNB_CHECKED 1)
+	ENDIF (NOT OPENCORE_AMRNB_CHECKED)
+ENDMACRO(checkOpencoreAmrnb)
+
+MACRO(checkOpencoreAmrwb)
+	IF (NOT OPENCORE_AMRWB_CHECKED)
+		OPTION(OPENCORE_AMRWB "" ON)
+
+		MESSAGE(STATUS "Checking for opencore-amrwb")
+		MESSAGE(STATUS "***************************")
+
+		IF (OPENCORE_AMRWB)
+			FIND_HEADER_AND_LIB(OPENCORE_AMRWB opencore-amrwb/dec_if.h opencore-amrwb D_IF_init)
+			PRINT_LIBRARY_INFO("opencore-amrwb" OPENCORE_AMRWB_FOUND "${OPENCORE_AMRWB_INCLUDE_DIR}" "${OPENCORE_AMRWB_LIBRARY_DIR}")
+		ELSE (OPENCORE_AMRWB)
+			MESSAGE("${MSG_DISABLE_OPTION}")
+		ENDIF (OPENCORE_AMRWB)
+
+		SET(ENV{ADM_HAVE_OPENCORE_AMRWB} ${OPENCORE_AMRWB_FOUND})		
+		MESSAGE("")
+		
+		SET(OPENCORE_AMRWB_CHECKED 1)
+	ENDIF (NOT OPENCORE_AMRWB_CHECKED)
+ENDMACRO(checkOpencoreAmrwb)
\ No newline at end of file



From mean at mail.berlios.de  Sat Jul 18 19:45:13 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sat, 18 Jul 2009 19:45:13 +0200
Subject: [Avidemux-svn-commit] r5107 -
	branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUI/include
Message-ID: <200907181745.n6IHjDZS000240@sheep.berlios.de>

Author: mean
Date: 2009-07-18 19:45:12 +0200 (Sat, 18 Jul 2009)
New Revision: 5107

Modified:
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUI/include/DIA_factory.h
Log:
[Factory] Increase max frame size to 20 (too much plugins)

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUI/include/DIA_factory.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUI/include/DIA_factory.h	2009-07-18 17:45:11 UTC (rev 5106)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUI/include/DIA_factory.h	2009-07-18 17:45:12 UTC (rev 5107)
@@ -556,7 +556,7 @@
   }
 };
 /**********************************************/
-#define DIA_MAX_FRAME 10
+#define DIA_MAX_FRAME 20
 class diaElemFrameBase :public diaElem
 {
 protected:



From mean at mail.berlios.de  Sat Jul 18 19:45:14 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sat, 18 Jul 2009 19:45:14 +0200
Subject: [Avidemux-svn-commit] r5108 -
	branches/avidemux_2.6_branch_mean/avidemux/common/ADM_commonUI
Message-ID: <200907181745.n6IHjE6g000258@sheep.berlios.de>

Author: mean
Date: 2009-07-18 19:45:14 +0200 (Sat, 18 Jul 2009)
New Revision: 5108

Modified:
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_commonUI/DIA_builtin.cpp
Log:
[CommonUI] cleanup DIA_builint, esd & friens are now plugins

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_commonUI/DIA_builtin.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_commonUI/DIA_builtin.cpp	2009-07-18 17:45:12 UTC (rev 5107)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_commonUI/DIA_builtin.cpp	2009-07-18 17:45:14 UTC (rev 5108)
@@ -41,8 +41,8 @@
 
 uint8_t DIA_builtin(void)
 {
-  uint32_t altivec=0,mad=0,a52dec=0,xvid4=0,X264=0,freetype=0,esd=0,arts=0,vorbis=0,win32=0;
-  uint32_t faac=0,faad=0,libdca=0,aften=0,libamrnb=0,lame=0,sdl=0,oss=0,xvideo=0,x86=0,x86_64=0,alsa=0;
+  uint32_t altivec=0,freetype=0,win32=0;
+  uint32_t sdl=0,oss=0,xvideo=0,x86=0,x86_64=0;
   uint32_t adm_powerpc=0,adm_gettext=0,adm_fontconfig=0;
 #ifdef USE_FONTCONFIG
   adm_fontconfig=1;
@@ -50,62 +50,18 @@
 #ifdef ADM_CPU_ALTIVEC
         altivec=1;
 #endif
-#ifdef USE_MP3
-        mad=1;
-#endif
-#ifdef USE_AC3
-        a52dec=1;
-#endif
-#ifdef USE_XVID_4
-        xvid4=1;
-#endif
-#ifdef USE_X264
-        X264=1;
-#endif
+
 #ifdef USE_FREETYPE
         freetype=1;
 #endif
-#ifdef USE_ESD
-        esd=1;
-#endif
-#ifdef USE_ARTS
-        arts=1;
-#endif
-#ifdef USE_VORBIS
-        vorbis=1;
-#endif
+
 #ifdef __WIN32
         win32=1;
 #endif
-#ifdef USE_FAAC
-        faac=1;
-#endif
-#ifdef USE_FAAD
-        faad=1;
-#endif
-#ifdef USE_LIBDCA
-	if (dca->isAvailable())
-        libdca=1;
-#endif
-#ifdef USE_AFTEN
-        aften=1;
-#endif
-#if 0 //def USE_AMR_NB
-	if (amrnb->isAvailable())
-		libamrnb=1;
-#endif
-#ifdef HAVE_LIBMP3LAME
-	lame=1;
-#endif
+
 #ifdef USE_SDL
 	sdl=1;
 #endif
-#ifdef OSS_SUPPORT
-	oss=1;
-#endif
-#ifdef ALSA_SUPPORT
-	alsa=1;
-#endif
 
 #ifdef USE_XV
 	xvideo=1;
@@ -123,24 +79,11 @@
 	adm_gettext=1;
 #endif
     
-	diaElemFrame videoFrame(QT_TR_NOOP("Video Codecs"));
-	diaElemNotch tXvid4(xvid4, QT_TR_NOOP("Xvid"));
-	diaElemNotch tX264(X264, QT_TR_NOOP("x264"));
 
-	videoFrame.swallow(&tXvid4);
-	videoFrame.swallow(&tX264);
-
-
-
-
-	diaElemNotch tArts(arts, QT_TR_NOOP("aRts"));
-	diaElemNotch tEsd(esd, QT_TR_NOOP("ESD"));
-        diaElemNotch tFontConfig(adm_fontconfig, QT_TR_NOOP("Fontconfig"));
+    diaElemNotch tFontConfig(adm_fontconfig, QT_TR_NOOP("Fontconfig"));
 	diaElemNotch tFreetype(freetype, QT_TR_NOOP("FreeType 2"));
 	diaElemNotch tGettext(adm_gettext, QT_TR_NOOP("Gettext"));
-        diaElemNotch tAlsa(alsa, QT_TR_NOOP("ALSA"));
-	diaElemNotch tOss(oss, QT_TR_NOOP("OSS"));
-	diaElemNotch tSdl(sdl, QT_TR_NOOP("SDL"));
+    diaElemNotch tSdl(sdl, QT_TR_NOOP("SDL"));
 	diaElemNotch tXvideo(xvideo, QT_TR_NOOP("XVideo"));
 
 	diaElemNotch tAltivec(altivec, QT_TR_NOOP("AltiVec"));
@@ -149,17 +92,16 @@
 	diaElemNotch tX86_64(x86_64, QT_TR_NOOP("x86-64"));
 
 
-	diaElem *codecElems[] = {&videoFrame};
-	diaElem *libsElems[] = {&tArts, &tEsd, &tFontConfig, &tFreetype, &tGettext, &tAlsa, &tOss, &tSdl, &tXvideo};
+	diaElem *libsElems[] = { &tFontConfig, &tFreetype, &tGettext, &tSdl, &tXvideo};
 	diaElem *CPUElems[] = {&tAltivec, &tPowerPc, &tX86, &tX86_64};
 
-	diaElemTabs tabCodec(QT_TR_NOOP("Codecs"), 1, codecElems);
-	diaElemTabs tabLibs(QT_TR_NOOP("Libraries"), 9, libsElems);
+	
+	diaElemTabs tabLibs(QT_TR_NOOP("Libraries"), 5, libsElems);
 	diaElemTabs tabCPU(QT_TR_NOOP("CPU"), 4, CPUElems);
 
-	diaElemTabs *tabs[] = {&tabCodec, &tabLibs, &tabCPU};
+	diaElemTabs *tabs[] = {&tabLibs, &tabCPU};
 
-    diaFactoryRunTabs(QT_TR_NOOP("Built-in Support"), 3, tabs);
+    diaFactoryRunTabs(QT_TR_NOOP("Built-in Support"), 2, tabs);
 
     return 1;
 }



From mean at mail.berlios.de  Sat Jul 18 19:45:19 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sat, 18 Jul 2009 19:45:19 +0200
Subject: [Avidemux-svn-commit] r5110 - in branches/avidemux_2.6_branch_mean:
	avidemux_core cmake
Message-ID: <200907181745.n6IHjJVo000314@sheep.berlios.de>

Author: mean
Date: 2009-07-18 19:45:19 +0200 (Sat, 18 Jul 2009)
New Revision: 5110

Added:
   branches/avidemux_2.6_branch_mean/cmake/FindGitSvn.cmake
   branches/avidemux_2.6_branch_mean/cmake/admGetRevision.cmake
Modified:
   branches/avidemux_2.6_branch_mean/avidemux_core/CMakeLists.txt
Log:
[All] Get svn revision also when using git-svn

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/CMakeLists.txt	2009-07-18 17:45:16 UTC (rev 5109)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/CMakeLists.txt	2009-07-18 17:45:19 UTC (rev 5110)
@@ -101,30 +101,15 @@
 ########################################
 # Subversion
 ########################################
-OPTION(SVN "" ON)
 
-IF (SVN AND NOT CMAKE_BUILD_TYPE STREQUAL "Debug" AND EXISTS "${CMAKE_SOURCE_DIR}/.svn")
-	MESSAGE(STATUS "Checking for Subversion")
-	MESSAGE(STATUS "***********************")
+MESSAGE("")
+MESSAGE(STATUS "Checking for SCM")
+MESSAGE(STATUS "****************")
+include( admGetRevision)
+admGetRevision()
+MESSAGE("")
 
-	SET(Subversion_FIND_REQUIRED OFF)
-	FIND_PACKAGE(Subversion)
 
-	IF (Subversion_FOUND)
-		Subversion_WC_INFO(${PROJECT_SOURCE_DIR} Project)
-		MESSAGE(STATUS "  revision: ${Project_WC_REVISION}")
-		SET(ADM_SUBVERSION ${Project_WC_REVISION})
-	ELSE (Subversion_FOUND)
-		MESSAGE(STATUS "Could not find Subversion")
-	ENDIF (Subversion_FOUND)
-	
-	MESSAGE("")
-ENDIF (SVN AND NOT CMAKE_BUILD_TYPE STREQUAL "Debug" AND EXISTS "${CMAKE_SOURCE_DIR}/.svn")
-
-IF (NOT Subversion_FOUND)
-	SET(ADM_SUBVERSION 0)
-ENDIF (NOT Subversion_FOUND)
-
 ########################################
 # Check for libraries
 ########################################

Added: branches/avidemux_2.6_branch_mean/cmake/FindGitSvn.cmake
===================================================================
--- branches/avidemux_2.6_branch_mean/cmake/FindGitSvn.cmake	2009-07-18 17:45:16 UTC (rev 5109)
+++ branches/avidemux_2.6_branch_mean/cmake/FindGitSvn.cmake	2009-07-18 17:45:19 UTC (rev 5110)
@@ -0,0 +1,21 @@
+# - Extract information from a subversion working copy
+FIND_PROGRAM(GIT_EXECUTABLE git
+  DOC "git command line client")
+MARK_AS_ADVANCED(GIT_EXECUTABLE)
+
+IF(GIT_EXECUTABLE)
+        
+        #SET(EXE  "cd ${AVIDEMUX_TOP_SOURCE_DIR}&& ${GIT_EXECUTABLE} svn log | head -2  | grep '^r' | sed 's/ .*$//g'" )
+        MESSAGE(STATUS "Getting git-svn version from ${AVIDEMUX_TOP_SOURCE_DIR}")
+
+      EXECUTE_PROCESS(COMMAND /usr/bin/git svn log ${AVIDEMUX_TOP_SOURCE_DIR} --oneline --limit=1   
+        RESULT_VARIABLE result 
+        OUTPUT_VARIABLE output
+        )
+        STRING(REGEX REPLACE " .*$" "" ADM_GIT_SVN_REVISION "${output}")
+        MESSAGE(STATUS "Git Svn Revision : ${ADM_GIT_SVN_REVISION}")
+ELSE(GIT_EXECUTABLE)
+        SET(ADM_GIT_SVN_REVISION 0)
+ENDIF(GIT_EXECUTABLE)
+
+# FindSubversion.cmake ends here.

Added: branches/avidemux_2.6_branch_mean/cmake/admGetRevision.cmake
===================================================================
--- branches/avidemux_2.6_branch_mean/cmake/admGetRevision.cmake	2009-07-18 17:45:16 UTC (rev 5109)
+++ branches/avidemux_2.6_branch_mean/cmake/admGetRevision.cmake	2009-07-18 17:45:19 UTC (rev 5110)
@@ -0,0 +1,21 @@
+#
+# Set ADM_SUBVERSION either using subversion or git SVN to 
+#  get the revision
+#
+MACRO(admGetRevision)
+if (EXISTS "${AVIDEMUX_TOP_SOURCE_DIR}/.svn")
+        MESSAGE(STATUS "Seems to be SVN...")
+        FIND_PACKAGE( Subversion)
+         SET(ADM_SUBVERSION ${Project_WC_REVISION})
+else (EXISTS "${AVIDEMUX_TOP_SOURCE_DIR}/.svn")
+        if (EXISTS "${AVIDEMUX_TOP_SOURCE_DIR}/.git")
+                MESSAGE(STATUS "Seems to be git svn...")
+                include( FindGitSvn)
+                SET(ADM_SUBVERSION ${ADM_GIT_SVN_REVISION})
+        else (EXISTS "${AVIDEMUX_TOP_SOURCE_DIR}/.git")
+                MESSAGE(STATUS "Dont know what SCM is used")
+                SET(ADM_SUBVERSION "0")
+        endif (EXISTS "${AVIDEMUX_TOP_SOURCE_DIR}/.git")
+endif (EXISTS "${AVIDEMUX_TOP_SOURCE_DIR}/.svn")
+                MESSAGE( STATUS "revision : ${ADM_SUBVERSION}" )
+ENDMACRO(admGetRevision)



From mean at mail.berlios.de  Sat Jul 18 19:45:20 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sat, 18 Jul 2009 19:45:20 +0200
Subject: [Avidemux-svn-commit] r5111 - in branches/avidemux_2.6_branch_mean:
	avidemux_core cmake
Message-ID: <200907181745.n6IHjKDW000328@sheep.berlios.de>

Author: mean
Date: 2009-07-18 19:45:20 +0200 (Sat, 18 Jul 2009)
New Revision: 5111

Modified:
   branches/avidemux_2.6_branch_mean/avidemux_core/corePackageDebian.cmake
   branches/avidemux_2.6_branch_mean/cmake/FindGitSvn.cmake
Log:
[all] use revision to tag .debs

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/corePackageDebian.cmake
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/corePackageDebian.cmake	2009-07-18 17:45:19 UTC (rev 5110)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/corePackageDebian.cmake	2009-07-18 17:45:20 UTC (rev 5111)
@@ -25,10 +25,7 @@
 # Some more infos
 SET(CPACK_PACKAGE_VERSION_MAJOR "2")
 SET(CPACK_PACKAGE_VERSION_MINOR "6")
-SET(CPACK_PACKAGE_VERSION_PATCH "0")
-if(Subversion_FOUND)
-        SET(CPACK_PACKAGE_VERSION_PATCH "0-r${ADM_SUBVERSION}")
-endif(Subversion_FOUND)
+SET(CPACK_PACKAGE_VERSION_PATCH "0-${ADM_SUBVERSION}")
 #
 SET(CPACK_PACKAGE_NAME "avidemux2-core")
 #

Modified: branches/avidemux_2.6_branch_mean/cmake/FindGitSvn.cmake
===================================================================
--- branches/avidemux_2.6_branch_mean/cmake/FindGitSvn.cmake	2009-07-18 17:45:19 UTC (rev 5110)
+++ branches/avidemux_2.6_branch_mean/cmake/FindGitSvn.cmake	2009-07-18 17:45:20 UTC (rev 5111)
@@ -8,7 +8,8 @@
         #SET(EXE  "cd ${AVIDEMUX_TOP_SOURCE_DIR}&& ${GIT_EXECUTABLE} svn log | head -2  | grep '^r' | sed 's/ .*$//g'" )
         MESSAGE(STATUS "Getting git-svn version from ${AVIDEMUX_TOP_SOURCE_DIR}")
 
-      EXECUTE_PROCESS(COMMAND /usr/bin/git svn log ${AVIDEMUX_TOP_SOURCE_DIR} --oneline --limit=1   
+      EXECUTE_PROCESS(COMMAND /usr/bin/git svn log --oneline --limit=1   
+        WORKING_DIRECTORY ${AVIDEMUX_TOP_SOURCE_DIR} 
         RESULT_VARIABLE result 
         OUTPUT_VARIABLE output
         )



From mean at mail.berlios.de  Sat Jul 18 19:45:22 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sat, 18 Jul 2009 19:45:22 +0200
Subject: [Avidemux-svn-commit] r5112 - in branches/avidemux_2.6_branch_mean:
	avidemux avidemux/gtk avidemux/qt4 avidemux_plugins
Message-ID: <200907181745.n6IHjMqG000338@sheep.berlios.de>

Author: mean
Date: 2009-07-18 19:45:21 +0200 (Sat, 18 Jul 2009)
New Revision: 5112

Modified:
   branches/avidemux_2.6_branch_mean/avidemux/commonCmakeApplication.cmake
   branches/avidemux_2.6_branch_mean/avidemux/gtk/gtkPackageDebian.cmake
   branches/avidemux_2.6_branch_mean/avidemux/qt4/qt4PackageDebian.cmake
   branches/avidemux_2.6_branch_mean/avidemux_plugins/pluginsPackageDebian.cmake
Log:
[all] new revision scheme to all (gtk/qt4/plugins)

Modified: branches/avidemux_2.6_branch_mean/avidemux/commonCmakeApplication.cmake
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/commonCmakeApplication.cmake	2009-07-18 17:45:20 UTC (rev 5111)
+++ branches/avidemux_2.6_branch_mean/avidemux/commonCmakeApplication.cmake	2009-07-18 17:45:21 UTC (rev 5112)
@@ -70,28 +70,12 @@
 ########################################
 # Subversion
 ########################################
-OPTION(SVN "" ON)
-
-IF (SVN AND NOT CMAKE_BUILD_TYPE STREQUAL "Debug" AND EXISTS "${CMAKE_SOURCE_DIR}/.svn")
-	MESSAGE(STATUS "Checking for Subversion")
-	MESSAGE(STATUS "***********************")
-
-	SET(Subversion_FIND_REQUIRED OFF)
-	FIND_PACKAGE(Subversion)
-
-	IF (Subversion_FOUND)
-		Subversion_WC_INFO(${PROJECT_SOURCE_DIR} Project)
-		MESSAGE(STATUS "  revision: ${Project_WC_REVISION}")
-		SET(ADM_SUBVERSION ${Project_WC_REVISION})
-	ELSE (Subversion_FOUND)
-		MESSAGE(STATUS "Could not find Subversion")
-	ENDIF (Subversion_FOUND)
-	
-	MESSAGE("")
-ENDIF (SVN AND NOT CMAKE_BUILD_TYPE STREQUAL "Debug" AND EXISTS "${CMAKE_SOURCE_DIR}/.svn")
-IF (NOT Subversion_FOUND)
-	SET(ADM_SUBVERSION 0)
-ENDIF (NOT Subversion_FOUND)
+MESSAGE("")
+MESSAGE(STATUS "Checking for SCM")
+MESSAGE(STATUS "****************")
+include( admGetRevision)
+admGetRevision()
+MESSAGE("")
 ########################################
 # Add include dirs
 ########################################

Modified: branches/avidemux_2.6_branch_mean/avidemux/gtk/gtkPackageDebian.cmake
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/gtk/gtkPackageDebian.cmake	2009-07-18 17:45:20 UTC (rev 5111)
+++ branches/avidemux_2.6_branch_mean/avidemux/gtk/gtkPackageDebian.cmake	2009-07-18 17:45:21 UTC (rev 5112)
@@ -26,9 +26,7 @@
 SET(CPACK_PACKAGE_VERSION_MAJOR "2")
 SET(CPACK_PACKAGE_VERSION_MINOR "6")
 SET(CPACK_PACKAGE_VERSION_PATCH "0")
-if(Subversion_FOUND)
-        SET(CPACK_PACKAGE_VERSION_PATCH "0-r${ADM_SUBVERSION}")
-endif(Subversion_FOUND)
+SET(CPACK_PACKAGE_VERSION_PATCH "0-${ADM_SUBVERSION}")
 #
 SET(CPACK_PACKAGE_NAME "avidemux2-gtk")
 #

Modified: branches/avidemux_2.6_branch_mean/avidemux/qt4/qt4PackageDebian.cmake
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/qt4/qt4PackageDebian.cmake	2009-07-18 17:45:20 UTC (rev 5111)
+++ branches/avidemux_2.6_branch_mean/avidemux/qt4/qt4PackageDebian.cmake	2009-07-18 17:45:21 UTC (rev 5112)
@@ -26,9 +26,7 @@
 SET(CPACK_PACKAGE_VERSION_MAJOR "2")
 SET(CPACK_PACKAGE_VERSION_MINOR "6")
 SET(CPACK_PACKAGE_VERSION_PATCH "0")
-if(Subversion_FOUND)
-        SET(CPACK_PACKAGE_VERSION_PATCH "0-r${ADM_SUBVERSION}")
-endif(Subversion_FOUND)
+SET(CPACK_PACKAGE_VERSION_PATCH "0-${ADM_SUBVERSION}")
 #
 SET(CPACK_PACKAGE_NAME "avidemux2-qt4")
 #

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/pluginsPackageDebian.cmake
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/pluginsPackageDebian.cmake	2009-07-18 17:45:20 UTC (rev 5111)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/pluginsPackageDebian.cmake	2009-07-18 17:45:21 UTC (rev 5112)
@@ -26,9 +26,7 @@
 SET(CPACK_PACKAGE_VERSION_MAJOR "2")
 SET(CPACK_PACKAGE_VERSION_MINOR "6")
 SET(CPACK_PACKAGE_VERSION_PATCH "0")
-if(Subversion_FOUND)
-        SET(CPACK_PACKAGE_VERSION_PATCH "0-r${ADM_SUBVERSION}")
-endif(Subversion_FOUND)
+SET(CPACK_PACKAGE_VERSION_PATCH "0-${ADM_SUBVERSION}")
 #
 SET(CPACK_PACKAGE_NAME "avidemux2-plugins")
 #



From mean at mail.berlios.de  Sat Jul 18 19:45:17 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sat, 18 Jul 2009 19:45:17 +0200
Subject: [Avidemux-svn-commit] r5109 -
	branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/ADM_dialog
Message-ID: <200907181745.n6IHjHSl000286@sheep.berlios.de>

Author: mean
Date: 2009-07-18 19:45:16 +0200 (Sat, 18 Jul 2009)
New Revision: 5109

Modified:
   branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/ADM_dialog/DIA_properties.cpp
Log:
[gtk/Dia_properties] dont use currentuaudiostream anymore

Modified: branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/ADM_dialog/DIA_properties.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/ADM_dialog/DIA_properties.cpp	2009-07-18 17:45:14 UTC (rev 5108)
+++ branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/ADM_dialog/DIA_properties.cpp	2009-07-18 17:45:16 UTC (rev 5109)
@@ -73,7 +73,13 @@
         FILL_ENTRY(labelAspectRatio);
         // Now audio
         WAVHeader *wavinfo=NULL;
-        if (currentaudiostream) wavinfo=currentaudiostream->getInfo();
+        if(video_body->getInfo())
+        {
+         wavinfo=video_body->getInfo();
+        }else   
+        {
+            printf("[Props] No audio\n");
+        }
           if(wavinfo)
           {
 
@@ -98,9 +104,9 @@
                 sprintf(text, "%s", getStrFromAudioCodec(wavinfo->encoding));
                 FILL_ENTRY(label1_audiofourcc);
                 // Duration in seconds too
-                if(currentaudiostream && wavinfo->byterate>1)
+                if( wavinfo->byterate>1)
                 {
-                        uint64_t l=currentaudiostream->getDurationInUs();
+                        uint64_t l=video_body->getDurationInUs();
                         double du;
                         du=l;
                         du/=1000.; // us->ms



From mean at mail.berlios.de  Sat Jul 18 20:10:03 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sat, 18 Jul 2009 20:10:03 +0200
Subject: [Avidemux-svn-commit] r5113 -
	branches/avidemux_2.6_branch_mean/avidemux_core/ADM_core/include
Message-ID: <200907181810.n6IIA3vd002661@sheep.berlios.de>

Author: mean
Date: 2009-07-18 20:10:01 +0200 (Sat, 18 Jul 2009)
New Revision: 5113

Modified:
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_core/include/ADM_assert.h
Log:
[All] Get rid of warnings, use PRIu32 and friends

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_core/include/ADM_assert.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_core/include/ADM_assert.h	2009-07-18 17:45:21 UTC (rev 5112)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_core/include/ADM_assert.h	2009-07-18 18:10:01 UTC (rev 5113)
@@ -106,24 +106,16 @@
 		char *ADM_slashToBackSlash(const char *in);
         #define ADM_cleanupPath(x) ADM_slashToBackSlash(x)
 #else
-    #ifdef ADM_CPU_64BIT
-        #define LLX "lx"
-        #define LLU "lu"
-        #define LLD "ld"
-        #define LX "x"
-        #define LD "d"
-        #define LU "u"
+    
+        #define LLX PRIx64
+        #define LLU PRIu64
+        #define LLD PRId64
+        #define LX  PRIx32
+        #define LD  PRIi32
+        #define LU  PRIu32
 
-    #else
-        #define LLX "llx"
-        #define LLU "llu"
-        #define LLD "lld"
-        #define LX "lx"
-        #define LU "lu"
-        #define LD "ld"
-
-    #endif
-    #define ADM_cleanupPath(x) ADM_strdup(x)
+    
+        #define ADM_cleanupPath(x) ADM_strdup(x)
 #endif
 
 



From mean at mail.berlios.de  Sat Jul 18 20:20:05 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sat, 18 Jul 2009 20:20:05 +0200
Subject: [Avidemux-svn-commit] r5114 -
	branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioDecoders/ADM_ad_lav
Message-ID: <200907181820.n6IIK5Ti003760@sheep.berlios.de>

Author: mean
Date: 2009-07-18 20:20:05 +0200 (Sat, 18 Jul 2009)
New Revision: 5114

Modified:
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioDecoders/ADM_ad_lav/ADM_ad_lav.cpp
Log:
[ad_lav]temporary fix

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioDecoders/ADM_ad_lav/ADM_ad_lav.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioDecoders/ADM_ad_lav/ADM_ad_lav.cpp	2009-07-18 18:10:01 UTC (rev 5113)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioDecoders/ADM_ad_lav/ADM_ad_lav.cpp	2009-07-18 18:20:05 UTC (rev 5114)
@@ -106,7 +106,7 @@
     }
     _context->extradata=(uint8_t *)d;
     _context->extradata_size=(int)l;
-    printf(" Using %"LU" bytes of extra header data\n",l);
+    //printf(" Using %"LU" bytes of extra header data\n",l);
     mixDump((uint8_t *)_context->extradata,_context->extradata_size);
 
    AVCodec *codec=avcodec_find_decoder(_context->codec_id);



From mean at mail.berlios.de  Sat Jul 18 20:27:59 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sat, 18 Jul 2009 20:27:59 +0200
Subject: [Avidemux-svn-commit] r5115 -
	branches/avidemux_2.6_branch_mean/cmake
Message-ID: <200907181827.n6IIRxcU004981@sheep.berlios.de>

Author: mean
Date: 2009-07-18 20:27:59 +0200 (Sat, 18 Jul 2009)
New Revision: 5115

Modified:
   branches/avidemux_2.6_branch_mean/cmake/admGetRevision.cmake
Log:
[build] Actually get svn revision

Modified: branches/avidemux_2.6_branch_mean/cmake/admGetRevision.cmake
===================================================================
--- branches/avidemux_2.6_branch_mean/cmake/admGetRevision.cmake	2009-07-18 18:20:05 UTC (rev 5114)
+++ branches/avidemux_2.6_branch_mean/cmake/admGetRevision.cmake	2009-07-18 18:27:59 UTC (rev 5115)
@@ -6,7 +6,8 @@
 if (EXISTS "${AVIDEMUX_TOP_SOURCE_DIR}/.svn")
         MESSAGE(STATUS "Seems to be SVN...")
         FIND_PACKAGE( Subversion)
-         SET(ADM_SUBVERSION ${Project_WC_REVISION})
+        Subversion_WC_INFO( ${AVIDEMUX_TOP_SOURCE_DIR} ADM_SVN)
+        SET(ADM_SUBVERSION ${ADM_SVN_WC_REVISION})
 else (EXISTS "${AVIDEMUX_TOP_SOURCE_DIR}/.svn")
         if (EXISTS "${AVIDEMUX_TOP_SOURCE_DIR}/.git")
                 MESSAGE(STATUS "Seems to be git svn...")



From mean at mail.berlios.de  Sat Jul 18 22:02:17 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sat, 18 Jul 2009 22:02:17 +0200
Subject: [Avidemux-svn-commit] r5116 -
	branches/avidemux_2.6_branch_mean/cmake
Message-ID: <200907182002.n6IK2Hjh014144@sheep.berlios.de>

Author: mean
Date: 2009-07-18 22:02:17 +0200 (Sat, 18 Jul 2009)
New Revision: 5116

Modified:
   branches/avidemux_2.6_branch_mean/cmake/admGetRevision.cmake
Log:
[Build] Use same naming rule svn/git svn

Modified: branches/avidemux_2.6_branch_mean/cmake/admGetRevision.cmake
===================================================================
--- branches/avidemux_2.6_branch_mean/cmake/admGetRevision.cmake	2009-07-18 18:27:59 UTC (rev 5115)
+++ branches/avidemux_2.6_branch_mean/cmake/admGetRevision.cmake	2009-07-18 20:02:17 UTC (rev 5116)
@@ -7,7 +7,7 @@
         MESSAGE(STATUS "Seems to be SVN...")
         FIND_PACKAGE( Subversion)
         Subversion_WC_INFO( ${AVIDEMUX_TOP_SOURCE_DIR} ADM_SVN)
-        SET(ADM_SUBVERSION ${ADM_SVN_WC_REVISION})
+        SET(ADM_SUBVERSION "r${ADM_SVN_WC_REVISION}")
 else (EXISTS "${AVIDEMUX_TOP_SOURCE_DIR}/.svn")
         if (EXISTS "${AVIDEMUX_TOP_SOURCE_DIR}/.git")
                 MESSAGE(STATUS "Seems to be git svn...")



From mean at mail.berlios.de  Sat Jul 18 22:25:22 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sat, 18 Jul 2009 22:25:22 +0200
Subject: [Avidemux-svn-commit] r5117 -
	branches/avidemux_2.6_branch_mean/avidemux/common/ADM_render
Message-ID: <200907182025.n6IKPMRW015961@sheep.berlios.de>

Author: mean
Date: 2009-07-18 22:25:21 +0200 (Sat, 18 Jul 2009)
New Revision: 5117

Modified:
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_render/GUI_sdlRender.cpp
Log:
[sdlRender] Typo fix

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_render/GUI_sdlRender.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_render/GUI_sdlRender.cpp	2009-07-18 20:02:17 UTC (rev 5116)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_render/GUI_sdlRender.cpp	2009-07-18 20:25:21 UTC (rev 5117)
@@ -123,7 +123,7 @@
 	char SDL_windowhack[32];
     int winId=(int)window->window;
 
-    sprintf(SDL_windowhack,"SDL_WINDOWID=%"LD,winId);
+    sprintf(SDL_windowhack,"SDL_WINDOWID=%d",winId);
     putenv(SDL_windowhack);
 #endif
 



From mean at mail.berlios.de  Sat Jul 18 22:25:23 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sat, 18 Jul 2009 22:25:23 +0200
Subject: [Avidemux-svn-commit] r5118 -
	branches/avidemux_2.6_branch_mean/avidemux/common
Message-ID: <200907182025.n6IKPNlm015971@sheep.berlios.de>

Author: mean
Date: 2009-07-18 22:25:23 +0200 (Sat, 18 Jul 2009)
New Revision: 5118

Modified:
   branches/avidemux_2.6_branch_mean/avidemux/common/gui_savenew.cpp
Log:
[gui_savenew] warning fix

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/gui_savenew.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/gui_savenew.cpp	2009-07-18 20:25:21 UTC (rev 5117)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/gui_savenew.cpp	2009-07-18 20:25:23 UTC (rev 5118)
@@ -88,7 +88,7 @@
         markerB=video_body->getMarkerBPts();
         muxerIndex=UI_GetCurrentFormat();
         videoEncoderIndex=UI_getCurrentVCodec();
-        printf("[Save] Encoder index=%d\n",index);
+        printf("[Save] Encoder index=%d\n",videoEncoderIndex);
 }
 /**
     \fn ~admSaver



From mean at mail.berlios.de  Sat Jul 18 22:25:28 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sat, 18 Jul 2009 22:25:28 +0200
Subject: [Avidemux-svn-commit] r5119 - in branches/avidemux_2.6_branch_mean:
	avidemux avidemux/gtk/ADM_userInterfaces/ADM_dialog
	avidemux/qt4/ADM_userInterfaces/ADM_dialog avidemux_core cmake
Message-ID: <200907182025.n6IKPSao016000@sheep.berlios.de>

Author: mean
Date: 2009-07-18 22:25:25 +0200 (Sat, 18 Jul 2009)
New Revision: 5119

Modified:
   branches/avidemux_2.6_branch_mean/avidemux/commonCmakeApplication.cmake
   branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/ADM_dialog/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/ADM_dialog/DIA_about.cpp
   branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_dialog/Q_about.cpp
   branches/avidemux_2.6_branch_mean/avidemux_core/corePackageDebian.cmake
   branches/avidemux_2.6_branch_mean/cmake/FindGitSvn.cmake
   branches/avidemux_2.6_branch_mean/cmake/admGetRevision.cmake
Log:
[all] Revert naming convention, fix dialog box for all variants

Modified: branches/avidemux_2.6_branch_mean/avidemux/commonCmakeApplication.cmake
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/commonCmakeApplication.cmake	2009-07-18 20:25:23 UTC (rev 5118)
+++ branches/avidemux_2.6_branch_mean/avidemux/commonCmakeApplication.cmake	2009-07-18 20:25:25 UTC (rev 5119)
@@ -1,4 +1,7 @@
-
+#
+#
+#
+SET(VERSION 2.6.0)
 CMAKE_MINIMUM_REQUIRED(VERSION 2.4.7 FATAL_ERROR)
 
 if (COMMAND cmake_policy)

Modified: branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/ADM_dialog/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/ADM_dialog/CMakeLists.txt	2009-07-18 20:25:23 UTC (rev 5118)
+++ branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/ADM_dialog/CMakeLists.txt	2009-07-18 20:25:25 UTC (rev 5119)
@@ -42,4 +42,4 @@
 
 )
 ADD_LIBRARY(${ADM_LIB} STATIC ${${ADM_LIB}_SRCS})
-ADD_DEFINITIONS( -DADM_SUBVERSION=${ADM_SUBVERSION})
+ADD_DEFINITIONS( -DADM_SUBVERSION=\"${ADM_SUBVERSION}\")

Modified: branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/ADM_dialog/DIA_about.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/ADM_dialog/DIA_about.cpp	2009-07-18 20:25:23 UTC (rev 5118)
+++ branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/ADM_dialog/DIA_about.cpp	2009-07-18 20:25:25 UTC (rev 5119)
@@ -40,14 +40,16 @@
   };
 
   GdkPixbuf *aboutdialog1_logo_pixbuf;
-  // MEANX : PATCH SVN VERSION
+  
   char subversion[1024];
-#if 0
-  if(!ADM_SUBVERSION)
-	strcpy(subversion,VERSION);
-  else
-	sprintf(subversion,"%s (r%04u):",VERSION,ADM_SUBVERSION);
-#endif
+  if(ADM_SUBVERSION)
+    {
+        sprintf(subversion,"%s (r%d):",VERSION,ADM_SUBVERSION);
+    }else   
+    {
+        sprintf(subversion,"%s ",VERSION);
+    }
+
   aboutdialog1 = gtk_about_dialog_new ();
   gtk_about_dialog_set_version (GTK_ABOUT_DIALOG (aboutdialog1), subversion);
 // /MEANX

Modified: branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_dialog/Q_about.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_dialog/Q_about.cpp	2009-07-18 20:25:23 UTC (rev 5118)
+++ branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_dialog/Q_about.cpp	2009-07-18 20:25:25 UTC (rev 5119)
@@ -30,12 +30,10 @@
 	connect(ui.licenseButton, SIGNAL(clicked(bool)), this, SLOT(licenseButton_clicked(bool)));
 
 	char subversion[20];
-#if 0
 	if (!ADM_SUBVERSION)
 		strcpy(subversion, VERSION);
 	else
 		sprintf(subversion,"%s (r%04u)", VERSION, ADM_SUBVERSION);
-#endif
 	ui.versionLabel->setText(ui.versionLabel->text() + subversion);
 }
 

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/corePackageDebian.cmake
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/corePackageDebian.cmake	2009-07-18 20:25:23 UTC (rev 5118)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/corePackageDebian.cmake	2009-07-18 20:25:25 UTC (rev 5119)
@@ -25,7 +25,9 @@
 # Some more infos
 SET(CPACK_PACKAGE_VERSION_MAJOR "2")
 SET(CPACK_PACKAGE_VERSION_MINOR "6")
-SET(CPACK_PACKAGE_VERSION_PATCH "0-${ADM_SUBVERSION}")
+SET(CPACK_PACKAGE_VERSION_PATCH "0")
+
+SET(CPACK_PACKAGE_VERSION_PATCH "0-r${ADM_SUBVERSION}")
 #
 SET(CPACK_PACKAGE_NAME "avidemux2-core")
 #

Modified: branches/avidemux_2.6_branch_mean/cmake/FindGitSvn.cmake
===================================================================
--- branches/avidemux_2.6_branch_mean/cmake/FindGitSvn.cmake	2009-07-18 20:25:23 UTC (rev 5118)
+++ branches/avidemux_2.6_branch_mean/cmake/FindGitSvn.cmake	2009-07-18 20:25:25 UTC (rev 5119)
@@ -14,6 +14,7 @@
         OUTPUT_VARIABLE output
         )
         STRING(REGEX REPLACE " .*$" "" ADM_GIT_SVN_REVISION "${output}")
+        STRING(REGEX REPLACE "^r" "" ADM_GIT_SVN_REVISION "${ADM_GIT_SVN_REVISION}")
         MESSAGE(STATUS "Git Svn Revision : ${ADM_GIT_SVN_REVISION}")
 ELSE(GIT_EXECUTABLE)
         SET(ADM_GIT_SVN_REVISION 0)

Modified: branches/avidemux_2.6_branch_mean/cmake/admGetRevision.cmake
===================================================================
--- branches/avidemux_2.6_branch_mean/cmake/admGetRevision.cmake	2009-07-18 20:25:23 UTC (rev 5118)
+++ branches/avidemux_2.6_branch_mean/cmake/admGetRevision.cmake	2009-07-18 20:25:25 UTC (rev 5119)
@@ -7,7 +7,7 @@
         MESSAGE(STATUS "Seems to be SVN...")
         FIND_PACKAGE( Subversion)
         Subversion_WC_INFO( ${AVIDEMUX_TOP_SOURCE_DIR} ADM_SVN)
-        SET(ADM_SUBVERSION "r${ADM_SVN_WC_REVISION}")
+        SET(ADM_SUBVERSION ${ADM_SVN_WC_REVISION})
 else (EXISTS "${AVIDEMUX_TOP_SOURCE_DIR}/.svn")
         if (EXISTS "${AVIDEMUX_TOP_SOURCE_DIR}/.git")
                 MESSAGE(STATUS "Seems to be git svn...")



From mean at mail.berlios.de  Sun Jul 19 09:48:07 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sun, 19 Jul 2009 09:48:07 +0200
Subject: [Avidemux-svn-commit] r5120 - in branches/avidemux_2.6_branch_mean:
	avidemux/common avidemux/common/ADM_commonUI
	avidemux_core/ADM_coreAudioDevice/src
Message-ID: <200907190748.n6J7m75u016289@sheep.berlios.de>

Author: mean
Date: 2009-07-19 09:48:06 +0200 (Sun, 19 Jul 2009)
New Revision: 5120

Modified:
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_commonUI/DIA_prefs.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/main.cpp
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreAudioDevice/src/ADM_audiodevice.cpp
Log:
[audioDevice] Fix selecting audio device through prefs/DIA_prefs

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_commonUI/DIA_prefs.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_commonUI/DIA_prefs.cpp	2009-07-18 20:25:25 UTC (rev 5119)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_commonUI/DIA_prefs.cpp	2009-07-19 07:48:06 UTC (rev 5120)
@@ -432,9 +432,12 @@
                 }
 #endif
                 // Device
+                //printf("[AudioDevice] Old : %d, new :%d\n",olddevice,newdevice);
                 if(olddevice!=newdevice)
                 {
-                      AVDM_switch((AUDIO_DEVICE)newdevice);
+                      AVDM_switch((AUDIO_DEVICE)newdevice); // Change current device
+                      AVDM_audioSave();                     // Save it in prefs
+                      AVDM_audioInit();                     // Respawn
                 }
                 // Downmixing (default)
                 prefs->set(DOWNMIXING_PROLOGIC,downmix);
@@ -483,6 +486,7 @@
 				// Initialise SDL again as driver may have changed
 				initSdl(render);
 			#endif
+                
 	}
         for(int i=0;i<nbAudioDevice+1;i++)
         {

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/main.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/main.cpp	2009-07-18 20:25:25 UTC (rev 5119)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/main.cpp	2009-07-19 07:48:06 UTC (rev 5120)
@@ -283,9 +283,7 @@
 	}
 
     ADM_lavInit();
-#ifdef HAVE_AUDIO
     AVDM_audioInit();
-#endif
 
     if(SpidermonkeyInit() == true)
         printf("Spidermonkey initialized.\n");

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreAudioDevice/src/ADM_audiodevice.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreAudioDevice/src/ADM_audiodevice.cpp	2009-07-18 20:25:25 UTC (rev 5119)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreAudioDevice/src/ADM_audiodevice.cpp	2009-07-19 07:48:06 UTC (rev 5120)
@@ -204,8 +204,10 @@
 		device=NULL;
 	}
 }
-// Switch the audio device class we are using
-//
+/**
+    \fn AVDM_switch
+    \brief Change audio device
+*/
 void AVDM_switch(AUDIO_DEVICE action)
 {
 	if(device)



From mean at mail.berlios.de  Sun Jul 19 19:52:50 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sun, 19 Jul 2009 19:52:50 +0200
Subject: [Avidemux-svn-commit] r5121 - in branches/avidemux_2.6_branch_mean:
	avidemux/common/ADM_audiocodec avidemux/common/ADM_osSupport
	avidemux/common/ADM_render avidemux/gtk/ADM_UIs/include
	avidemux/gtk/ADM_UIs/src avidemux/gtk/ADM_userInterfaces/ADM_dialog
	avidemux/gtk/ADM_userInterfaces/ADM_toolkit_gtk
	avidemux/qt4/ADM_userInterfaces/ADM_dialog
	avidemux_core/ADM_coreUI/include avidemux_core/ADM_coreUI/src
Message-ID: <200907191752.n6JHqoD5013965@sheep.berlios.de>

Author: mean
Date: 2009-07-19 19:52:49 +0200 (Sun, 19 Jul 2009)
New Revision: 5121

Modified:
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_audiocodec/ADM_pluginLoad.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_osSupport/ADM_misc.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_render/GUI_xvRender.cpp
   branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_UIs/include/ADM_toolkitGtk.h
   branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_UIs/src/choice.cpp
   branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/ADM_dialog/DIA_encoding.cpp
   branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/ADM_dialog/toolkit_dialog.cpp
   branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/ADM_toolkit_gtk/gtkmarkscale.c
   branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_dialog/Q_props.cpp
   branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_dialog/T_index_pg.cpp
   branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_dialog/alert_qt4.cpp
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUI/include/DIA_coreToolkit.h
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUI/include/DIA_coreUI_internal.h
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUI/src/DIA_coreToolkit.cpp
Log:
[all] Killed a bunch of warnings

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_audiocodec/ADM_pluginLoad.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_audiocodec/ADM_pluginLoad.cpp	2009-07-19 07:48:06 UTC (rev 5120)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_audiocodec/ADM_pluginLoad.cpp	2009-07-19 17:52:49 UTC (rev 5121)
@@ -149,7 +149,7 @@
 	for(int i=0;i<nbFile;i++)
 		tryLoadingAudioPlugin(files[i]);
 
-	printf("[ADM_ad_plugin] Scanning done, found %u codec\n", ADM_audioPlugins.size());
+	printf("[ADM_ad_plugin] Scanning done, found %d codec\n", (int)ADM_audioPlugins.size());
 
 	return 1;
 }

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_osSupport/ADM_misc.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_osSupport/ADM_misc.cpp	2009-07-19 07:48:06 UTC (rev 5120)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_osSupport/ADM_misc.cpp	2009-07-19 17:52:49 UTC (rev 5121)
@@ -11,11 +11,11 @@
 	
 	if (mm > 1)
 	{
-		sprintf(string, QT_TR_NOOP("%lu minutes"), mm);
+		sprintf(string, QT_TR_NOOP("%"LU" minutes"), mm);
 	}
 	else if (mm == 1)
 	{
-		sprintf(string, QT_TR_NOOP("%lu minute"), mm);
+		sprintf(string, QT_TR_NOOP("%"LU" minute"), mm);
 	}
 	else
 	{
@@ -23,11 +23,11 @@
 
 		if (ss == 1)
 		{
-			sprintf(string, QT_TR_NOOP("%lu second"), ss);
+			sprintf(string, QT_TR_NOOP("%"LU" second"), ss);
 		}
 		else
 		{
-			sprintf(string, QT_TR_NOOP("%lu seconds"), ss);
+			sprintf(string, QT_TR_NOOP("%"LU" seconds"), ss);
 		}
 	}
 

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_render/GUI_xvRender.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_render/GUI_xvRender.cpp	2009-07-19 07:48:06 UTC (rev 5120)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_render/GUI_xvRender.cpp	2009-07-19 17:52:49 UTC (rev 5121)
@@ -347,7 +347,7 @@
 	for (k = 0; !f && (k < imgfmt); k++)
 	  {
 #ifdef VERBOSE_XV
-	      printf("[Xvideo]%d/%d: %lx %d --> %s\n", k,imgfmt,port, formatValues[k].id,  formatValues[k].guid);
+	      printf("[Xvideo]%d/%d: %"LX" %d --> %s\n", k,imgfmt,port, formatValues[k].id,  formatValues[k].guid);
 #endif
 
 	      if (!strcmp(formatValues[k].guid, "YV12"))

Modified: branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_UIs/include/ADM_toolkitGtk.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_UIs/include/ADM_toolkitGtk.h	2009-07-19 07:48:06 UTC (rev 5120)
+++ branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_UIs/include/ADM_toolkitGtk.h	2009-07-19 17:52:49 UTC (rev 5121)
@@ -53,7 +53,7 @@
 #endif
 
 #define QT_TR_NOOP(String) String // FIXME
-#warning FIXME TRANSLATE
+//#warning FIXME TRANSLATE
 
 
 #endif

Modified: branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_UIs/src/choice.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_UIs/src/choice.cpp	2009-07-19 07:48:06 UTC (rev 5120)
+++ branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_UIs/src/choice.cpp	2009-07-19 17:52:49 UTC (rev 5121)
@@ -65,7 +65,7 @@
 //_______________________________
 namespace ADM_GtkCoreUIToolkit
 {
-int GUI_Alternate(char *title,char *choice1,char *choice2)
+int GUI_Alternate(const char *title,const char *choice1,const char *choice2)
 {
     GtkWidget *window1;
     GtkWidget *vbox1;

Modified: branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/ADM_dialog/DIA_encoding.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/ADM_dialog/DIA_encoding.cpp	2009-07-19 07:48:06 UTC (rev 5120)
+++ branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/ADM_dialog/DIA_encoding.cpp	2009-07-19 17:52:49 UTC (rev 5121)
@@ -436,7 +436,7 @@
 void DIA_encodingGtk::setQuantIn(int size)
 {
       ADM_assert(dialog);
-          sprintf(string,"%lu",size);
+          sprintf(string,"%d",size);
           gtk_label_set_text(GTK_LABEL(WID(label_quant)),string);
 
 }

Modified: branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/ADM_dialog/toolkit_dialog.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/ADM_dialog/toolkit_dialog.cpp	2009-07-19 07:48:06 UTC (rev 5120)
+++ branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/ADM_dialog/toolkit_dialog.cpp	2009-07-19 17:52:49 UTC (rev 5121)
@@ -348,7 +348,7 @@
 	UI_purge();
 	return ret;
 }
-extern int GUI_Alternate(char *title,char *choice1,char *choice2);
+extern int GUI_Alternate(const char *title,const char *choice1,const char *choice2);
 extern DIA_workingBase *createWorking(const char *title);
 extern DIA_encodingBase *createEncodingGtk(uint32_t fps1000);
 } // End of namespace

Modified: branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/ADM_toolkit_gtk/gtkmarkscale.c
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/ADM_toolkit_gtk/gtkmarkscale.c	2009-07-19 07:48:06 UTC (rev 5120)
+++ branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/ADM_toolkit_gtk/gtkmarkscale.c	2009-07-19 17:52:49 UTC (rev 5121)
@@ -1,4 +1,17 @@
+/**
+    \file gtkmarkscale
+    \author J M 
+*/
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
 #include "gtkmarkscale.h"
+#include <math.h>
 
 static GtkWidgetClass *parent_class = NULL;
 

Modified: branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_dialog/Q_props.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_dialog/Q_props.cpp	2009-07-19 07:48:06 UTC (rev 5120)
+++ branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_dialog/Q_props.cpp	2009-07-19 17:52:49 UTC (rev 5121)
@@ -46,9 +46,9 @@
 #define FILLTEXT4(a,b,c,d) {snprintf(text,79,b,c,d);ui.a->setText(text);}
 #define FILLTEXT5(a,b,c,d,e) {snprintf(text,79,b,c,d,e);ui.a->setText(text);}
         
-        FILLTEXT4(labeImageSize,QT_TR_NOOP("%lu x %lu"), avifileinfo->width,avifileinfo->height);
+        FILLTEXT4(labeImageSize,QT_TR_NOOP("%"LU" x %"LU), avifileinfo->width,avifileinfo->height);
         FILLTEXT(labelFrameRate, QT_TR_NOOP("%2.3f fps"), (float) avifileinfo->fps1000 / 1000.F);
-        FILLTEXT(labelNbOfFrames,QT_TR_NOOP("%ld frames"), avifileinfo->nb_frames);
+        FILLTEXT(labelNbOfFrames,QT_TR_NOOP("%"LU" frames"), avifileinfo->nb_frames);
         FILLTEXT(label4CC, "%s",      fourCC::tostring(avifileinfo->fcc));
         if (avifileinfo->nb_frames)
           {
@@ -86,8 +86,8 @@
                 }
 
                 FILLQT_TR_NOOP(labelChannels);
-                FILLTEXT(labelFrequency, QT_TR_NOOP("%lu Hz"), wavinfo->frequency);
-                FILLTEXT4(labelBitrate, QT_TR_NOOP("%lu Bps / %lu kbps"), wavinfo->byterate,wavinfo->byterate * 8 / 1000);
+                FILLTEXT(labelFrequency, QT_TR_NOOP("%"LU" Hz"), wavinfo->frequency);
+                FILLTEXT4(labelBitrate, QT_TR_NOOP("%"LU" Bps / %"LU" kbps"), wavinfo->byterate,wavinfo->byterate * 8 / 1000);
                 
                 sprintf(text, "%s", getStrFromAudioCodec(wavinfo->encoding));
                 FILLQT_TR_NOOP(labelACodec);

Modified: branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_dialog/T_index_pg.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_dialog/T_index_pg.cpp	2009-07-19 07:48:06 UTC (rev 5120)
+++ branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_dialog/T_index_pg.cpp	2009-07-19 17:52:49 UTC (rev 5121)
@@ -137,7 +137,7 @@
         dialog->setTime(string);
         
 
-        sprintf(string,QT_TR_NOOP("# Images :%0lu"),nbImage);
+        sprintf(string,QT_TR_NOOP("# Images :%0"LU),nbImage);
         dialog->setImage(string);
 
         f=done;

Modified: branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_dialog/alert_qt4.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_dialog/alert_qt4.cpp	2009-07-19 07:48:06 UTC (rev 5120)
+++ branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_dialog/alert_qt4.cpp	2009-07-19 17:52:49 UTC (rev 5121)
@@ -171,7 +171,7 @@
     \brief Popup a dialog box name title with 2 buttons (choice1/choice2)
     \return 0 if first is selected, 1 if second
 */
-int      GUI_Alternate(char *title,char *choice1,char *choice2)
+int      GUI_Alternate(const char *title,const char *choice1,const char *choice2)
 {
 int reply;
 QMessageBox *box;

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUI/include/DIA_coreToolkit.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUI/include/DIA_coreToolkit.h	2009-07-19 07:48:06 UTC (rev 5120)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUI/include/DIA_coreToolkit.h	2009-07-19 17:52:49 UTC (rev 5121)
@@ -41,7 +41,7 @@
 // Give some time to the UI to handle its events
 void            GUI_Sleep(uint32_t ms);
 // Ask to choose between choice1 and choice2
-int             GUI_Alternate(char *title,char *choice1,char *choice2);
+int             GUI_Alternate(const char *title,const char *choice1,const char *choice2);
 
 
 // Set ui in verbose mode (default). Show all popup & questions

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUI/include/DIA_coreUI_internal.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUI/include/DIA_coreUI_internal.h	2009-07-19 07:48:06 UTC (rev 5120)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUI/include/DIA_coreUI_internal.h	2009-07-19 17:52:49 UTC (rev 5121)
@@ -121,7 +121,7 @@
 typedef int             CREATE_GUI_CONFIRMATION_HIG(const char *button_confirm, const char *primary, const char *secondary_format);
 typedef int             CREATE_GUI_YESNO(const char *primary, const char *secondary_format);
 typedef int             CREATE_GUI_QUESTION(const char *alertstring);
-typedef int             CREATE_GUI_ALTERNATE(char *title,char *choice1,char *choice2);
+typedef int             CREATE_GUI_ALTERNATE(const char *title,const char *choice1,const char *choice2);
 typedef void            CREATE_GUI_VERBOSE(void);
 typedef void            CREATE_GUI_QUIET(void);
 typedef uint8_t			CREATE_GUI_IS_GUIET(void);

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUI/src/DIA_coreToolkit.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUI/src/DIA_coreToolkit.cpp	2009-07-19 07:48:06 UTC (rev 5120)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUI/src/DIA_coreToolkit.cpp	2009-07-19 17:52:49 UTC (rev 5121)
@@ -135,7 +135,7 @@
  *  \brief Ask to choose between choice1 and choice2
  * 
  */
-int             GUI_Alternate(char *title,char *choice1,char *choice2)
+int             GUI_Alternate(const char *title,const char *choice1,const char *choice2)
 {
 	ADM_assert(Toolkit);
 	return Toolkit->alternate(title,choice1,choice2);	



From gruntster at mail.berlios.de  Sun Jul 19 21:45:59 2009
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Sun, 19 Jul 2009 21:45:59 +0200
Subject: [Avidemux-svn-commit] r5122 - in
	branches/avidemux_2.5_branch_gruntster/avidemux:
	ADM_UIs/ADM_GTK/src ADM_UIs/ADM_QT4/include
	ADM_UIs/ADM_QT4/src ADM_coreUI/include ADM_coreUI/src
Message-ID: <200907191945.n6JJjxTe025016@sheep.berlios.de>

Author: gruntster
Date: 2009-07-19 21:45:45 +0200 (Sun, 19 Jul 2009)
New Revision: 5122

Added:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/T_configMenu.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/T_configMenu.h
Modified:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_GTK/src/DIA_dialogFactory.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/include/ADM_dialogFactoryQt4.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/T_dialogFactory.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/include/DIA_coreUI_internal.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/include/DIA_factory.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/src/DIA_factory.cpp
Log:
[dlgFactory] add config menu dialog factory control (incomplete)

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_GTK/src/DIA_dialogFactory.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_GTK/src/DIA_dialogFactory.cpp	2009-07-19 17:52:49 UTC (rev 5121)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_GTK/src/DIA_dialogFactory.cpp	2009-07-19 19:45:45 UTC (rev 5122)
@@ -365,6 +365,7 @@
 	&gtkFactoryGetVersion,
 	&gtkDiaFactoryRun,
 	&gtkDiaFactoryRunTabs,
+	NULL,
 	// Buttons
 	&gtkCreateButton,
 	&gtkDeleteButton,
@@ -427,7 +428,10 @@
 	&gtkCreateUSlider,
 	&gtkDestroyUSlider,
 	&gtkCreateSlider,
-	&gtkDestroySlider
+	&gtkDestroySlider,
+	// Config Menu
+	NULL,
+	NULL
 };
 
 /**

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/include/ADM_dialogFactoryQt4.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/include/ADM_dialogFactoryQt4.h	2009-07-19 17:52:49 UTC (rev 5121)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/include/ADM_dialogFactoryQt4.h	2009-07-19 19:45:45 UTC (rev 5122)
@@ -1,2 +1,2 @@
 #define FAC_QT_GRIDLAYOUT 1
-#define FAC_QT_VBOXLAYOUT 2
\ No newline at end of file
+#define FAC_QT_VBOXLAYOUT 2

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/CMakeLists.txt	2009-07-19 17:52:49 UTC (rev 5121)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/CMakeLists.txt	2009-07-19 19:45:45 UTC (rev 5122)
@@ -2,12 +2,12 @@
 
 QT4_WRAP_CPP(${ADM_LIB}_source
 	T_bitrate.h  T_button.h  T_dialogFactory.h  T_filesel.h  T_menu.h  T_slider.h
-	T_threadCount.h  T_toggle.h  T_notch.h)
+	T_threadCount.h  T_toggle.h  T_notch.h  T_configMenu.h)
 
 SET(${ADM_LIB}_T
 	T_bitrate.cpp  T_button.cpp  T_dialogFactory.cpp  T_filesel.cpp  T_menu.cpp
 	T_slider.cpp  T_threadCount.cpp  T_toggle.cpp  T_notch.cpp
-    T_flyDialogQt4.cpp T_QCanvas.cpp
+    T_flyDialogQt4.cpp T_QCanvas.cpp  T_configMenu.cpp
 )
 
 SET(${ADM_LIB}_SRCS

Added: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/T_configMenu.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/T_configMenu.cpp	2009-07-19 17:52:49 UTC (rev 5121)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/T_configMenu.cpp	2009-07-19 19:45:45 UTC (rev 5122)
@@ -0,0 +1,259 @@
+/***************************************************************************
+T_configMenu.cpp
+Handle dialog factory element : Config Menu
+(C) 2009 Gruntster 
+***************************************************************************/
+
+/***************************************************************************
+*                                                                         *
+*   This program is free software; you can redistribute it and/or modify  *
+*   it under the terms of the GNU General Public License as published by  *
+*   the Free Software Foundation; either version 2 of the License, or     *
+*   (at your option) any later version.                                   *
+*                                                                         *
+***************************************************************************/
+
+#include <QtGui/QFileDialog>
+#include "T_configMenu.h"
+#include "ADM_dialogFactoryQt4.h"
+#include "ADM_files.h"
+#include "DIA_coreToolkit.h"
+
+extern "C"
+{
+#include "ADM_plugin/ADM_vidEnc_plugin.h"
+}
+
+extern const char* shortkey(const char*);
+
+namespace ADM_Qt4Factory
+{
+	ADM_QconfigMenu::ADM_QconfigMenu(QWidget *widget, QGridLayout *layout, int line, 
+		const char* userConfigDir, const char* systemConfigDir, CONFIG_MENU_CHANGED_T *changedFunc, 
+		CONFIG_MENU_SERIALIZE_T *serializeFunc, diaElem **controls, unsigned int controlCount) : QWidget(widget) 
+	{
+		this->userConfigDir = userConfigDir;
+		this->systemConfigDir = systemConfigDir;
+
+		this->changedFunc = changedFunc;
+		this->serializeFunc = serializeFunc;
+
+		this->controls = controls;
+		this->controlCount = controlCount;
+
+		label = new QLabel(QString::fromUtf8(QT_TR_NOOP("Configuration:")), widget);
+		combobox = new QComboBox(widget);
+		saveAsButton = new QPushButton(QString::fromUtf8(QT_TR_NOOP("Save As")), widget);
+		deleteButton = new QPushButton(QString::fromUtf8(QT_TR_NOOP("Delete")), widget);
+
+		QSpacerItem *spacer1 = new QSpacerItem(20, 20, QSizePolicy::Expanding, QSizePolicy::Minimum);
+		QSpacerItem *spacer2 = new QSpacerItem(20, 20, QSizePolicy::Expanding, QSizePolicy::Minimum);
+
+		layout->addItem(spacer1, line, 0);
+		layout->addWidget(label, line, 1);
+		layout->addWidget(combobox, line, 2);
+		layout->addWidget(saveAsButton, line, 3);
+		layout->addWidget(deleteButton, line, 4);
+		layout->addItem(spacer2, line, 5);
+
+		QObject::connect(deleteButton, SIGNAL(clicked(bool)), this, SLOT(deleteClicked(bool)));
+		QObject::connect(saveAsButton, SIGNAL(clicked(bool)), this, SLOT(saveAsClicked(bool)));
+		QObject::connect(combobox, SIGNAL(currentIndexChanged(int)), this, SLOT(comboboxIndexChanged(int)));
+
+		fillConfigurationComboBox();
+	}
+
+	ADM_QconfigMenu::~ADM_QconfigMenu() 
+	{
+	}
+
+	void ADM_QconfigMenu::fillConfigurationComboBox(void)
+	{
+		QMap<QString, int> configs;
+		QStringList filter("*.xml");
+		QStringList list = QDir(this->userConfigDir).entryList(filter, QDir::Files | QDir::Readable);
+
+		for (int item = 0; item < list.size(); item++)
+			configs.insert(QFileInfo(list[item]).completeBaseName(), CONFIG_MENU_USER);
+
+		list = QDir(this->systemConfigDir).entryList(filter, QDir::Files | QDir::Readable);
+
+		for (int item = 0; item < list.size(); item++)
+			configs.insert(QFileInfo(list[item]).completeBaseName(), CONFIG_MENU_SYSTEM);
+
+		combobox->clear();
+		combobox->addItem(QT_TR_NOOP("<default>"), CONFIG_MENU_DEFAULT);
+		combobox->addItem(QT_TR_NOOP("<custom>"), CONFIG_MENU_CUSTOM);
+
+		QMap<QString, int>::const_iterator mapIterator = configs.constBegin();
+
+		while (mapIterator != configs.constEnd())
+		{
+			combobox->addItem(mapIterator.key(), mapIterator.value());
+			mapIterator++;
+		}
+	}
+
+	bool ADM_QconfigMenu::selectConfiguration(QString *selectFile, ConfigMenuType configurationType)
+	{
+		bool success = false;
+
+		if (configurationType == CONFIG_MENU_DEFAULT)
+		{
+			combobox->setCurrentIndex(0);
+			success = true;
+		}
+		else
+		{
+			for (int index = 0; index < combobox->count(); index++)
+			{
+				if (combobox->itemText(index) == selectFile && combobox->itemData(index).toInt() == configurationType)
+				{
+					combobox->setCurrentIndex(index);
+					success = true;
+					break;
+				}
+			}
+
+			if (!success)
+				combobox->setCurrentIndex(1);
+		}
+
+		return success;
+	}
+
+	void ADM_QconfigMenu::deleteClicked(bool checked)
+	{
+		if (combobox->itemData(combobox->currentIndex()).toInt() == CONFIG_MENU_USER)
+		{
+			QString configFileName = QFileInfo(QString(this->userConfigDir), combobox->currentText() + ".xml").filePath();
+			QFile configFile(configFileName);
+
+			if (GUI_Question(QT_TR_NOOP("Are you sure you wish to delete the selected configuration?")) && configFile.exists())
+			{
+				configFile.remove();
+				combobox->removeItem(combobox->currentIndex());
+				combobox->setCurrentIndex(0);	// default
+			}
+		}
+	}
+
+	void ADM_QconfigMenu::saveAsClicked(bool checked)
+	{
+		if (this->serializeFunc)
+		{
+			ADM_mkdir(this->userConfigDir);
+
+			QString configFileName = QFileDialog::getSaveFileName(this, QT_TR_NOOP("Save As"), this->userConfigDir, QT_TR_NOOP("Configuration File (*.xml)"));
+
+			if (!configFileName.isNull())
+			{
+				for (int i = 0; i < this->controlCount; i++)
+					this->controls[i]->getMe();
+
+				char *configData = this->serializeFunc();
+				QFile configFile(configFileName);
+
+				configFile.open(QIODevice::WriteOnly | QIODevice::Truncate | QIODevice::Text);
+				configFile.write(configData, strlen(configData));
+				configFile.close();
+
+				delete [] configData;
+
+				fillConfigurationComboBox();
+				selectConfiguration(&QFileInfo(configFileName).completeBaseName(), CONFIG_MENU_USER);
+			}
+		}
+	}
+
+	void ADM_QconfigMenu::comboboxIndexChanged(int index)
+	{
+		ConfigMenuType configType = (ConfigMenuType)combobox->itemData(index).toInt();
+
+		deleteButton->setEnabled(configType == CONFIG_MENU_USER);
+
+		if (changedFunc)
+			changedFunc(combobox->itemText(index).toUtf8().constData(), configType);
+	}
+
+	class diaElemConfigMenu : public diaElem
+	{
+	protected:
+		const char *userConfigDir, *systemConfigDir;
+		diaElem **controls;
+		unsigned int controlCount;
+
+		CONFIG_MENU_CHANGED_T *changedFunc;
+		CONFIG_MENU_SERIALIZE_T *serializeFunc;
+
+	public:
+		diaElemConfigMenu(const char* userConfigDir, const char* systemConfigDir, CONFIG_MENU_CHANGED_T *changedFunc,
+				CONFIG_MENU_SERIALIZE_T *serializeFunc, diaElem **controls, unsigned int controlCount);
+		~diaElemConfigMenu();
+		void setMe(void *dialog, void *opaque, uint32_t line);
+		void getMe(void);
+		void enable(uint32_t onoff);
+		int getRequiredLayout(void);
+	};
+
+	diaElemConfigMenu::diaElemConfigMenu(const char* userConfigDir, const char* systemConfigDir, CONFIG_MENU_CHANGED_T *changedFunc,
+				CONFIG_MENU_SERIALIZE_T *serializeFunc, diaElem **controls, unsigned int controlCount) : diaElem(ELEM_CONFIG_MENU)
+	{
+		this->userConfigDir = userConfigDir;
+		this->systemConfigDir = systemConfigDir;
+
+		this->changedFunc = changedFunc;
+		this->serializeFunc = serializeFunc;
+
+		this->controls = controls;
+		this->controlCount = controlCount;
+	}
+
+	diaElemConfigMenu::~diaElemConfigMenu()
+	{
+	}
+
+	void diaElemConfigMenu::setMe(void *dialog, void *opaque, uint32_t line)
+	{
+		QGridLayout *layout = (QGridLayout*)opaque;
+		ADM_QconfigMenu *configMenu = new ADM_QconfigMenu((QWidget*)dialog, layout, line, this->userConfigDir, 
+			this->systemConfigDir, this->changedFunc, this->serializeFunc, this->controls, this->controlCount);
+
+		myWidget = (void*)configMenu;
+	}
+
+	void diaElemConfigMenu::getMe(void)
+	{
+		/*ADM_QconfigMenu *configMenu = (ADM_QconfigMenu*)myWidget;
+		uint32_t *val = (uint32_t*)param;
+
+		if ((configMenu->radiobutton1)->isChecked())
+			*val = 1;
+		else if ((configMenu->radiobutton2)->isChecked())
+			*val = 0;
+		else
+			*val = (configMenu->spinBox)->value(); */
+	}
+
+	void diaElemConfigMenu::enable(uint32_t onoff)
+	{
+	}
+
+	int diaElemConfigMenu::getRequiredLayout(void)
+	{
+		return FAC_QT_GRIDLAYOUT;
+	}
+}
+
+diaElem* qt4CreateConfigMenu(const char* userConfigDir, const char* systemConfigDir, CONFIG_MENU_CHANGED_T *changedFunc, 
+							 CONFIG_MENU_SERIALIZE_T *serializeFunc, diaElem **controls, unsigned int controlCount)
+{
+	return new ADM_Qt4Factory::diaElemConfigMenu(userConfigDir, systemConfigDir, changedFunc, serializeFunc, controls, controlCount);
+}
+
+void qt4DestroyConfigMenu(diaElem *e)
+{
+	ADM_Qt4Factory::diaElemConfigMenu *a = (ADM_Qt4Factory::diaElemConfigMenu*)e;
+
+	delete a;
+}

Added: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/T_configMenu.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/T_configMenu.h	2009-07-19 17:52:49 UTC (rev 5121)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/T_configMenu.h	2009-07-19 19:45:45 UTC (rev 5122)
@@ -0,0 +1,43 @@
+#ifndef T_configMenu_h
+#define T_configMenu_h
+#include <QtGui/QLabel>
+#include <QtGui/QComboBox>
+#include <QtGui/QGridLayout>
+#include <QtGui/QPushButton>
+#include "DIA_factory.h"
+
+namespace ADM_Qt4Factory
+{
+	class ADM_QconfigMenu : public QWidget
+	{
+		Q_OBJECT
+
+	private:
+		const char *userConfigDir, *systemConfigDir;
+		diaElem **controls;
+		unsigned int controlCount;
+
+		CONFIG_MENU_CHANGED_T *changedFunc;
+		CONFIG_MENU_SERIALIZE_T *serializeFunc;
+
+		void fillConfigurationComboBox(void);
+		bool selectConfiguration(QString *selectFile, ConfigMenuType configurationType);
+
+	public slots:
+		void deleteClicked(bool checked);
+		void saveAsClicked(bool checked);
+		void comboboxIndexChanged(int index);
+
+	public:
+		QLabel *label;
+		QComboBox *combobox;
+		QPushButton *saveAsButton;
+		QPushButton *deleteButton;
+
+		ADM_QconfigMenu(QWidget *widget, QGridLayout *layout, int line,
+			const char* userConfigDir, const char* systemConfigDir, CONFIG_MENU_CHANGED_T *changedFunc,
+			CONFIG_MENU_SERIALIZE_T *serializeFunc, diaElem **controls, unsigned int controlCount);
+		~ADM_QconfigMenu();
+	};
+}
+#endif	// T_configMenu_h

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/T_dialogFactory.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/T_dialogFactory.cpp	2009-07-19 17:52:49 UTC (rev 5121)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/T_dialogFactory.cpp	2009-07-19 19:45:45 UTC (rev 5122)
@@ -26,6 +26,7 @@
 #include "ADM_dialogFactoryQt4.h"
 
 static void insertTab(uint32_t index, diaElemTabs *tab, QTabWidget *wtab);
+static void addControls(QWidget *parent, QVBoxLayout *vboxLayout, diaElem **controls, unsigned int controlCount);
 
 /**
     \fn qt4DiaFactoryRun(const char *title,uint32_t nb,diaElem **elems)
@@ -47,53 +48,15 @@
   QSpacerItem *spacer = new QSpacerItem(20, 16, QSizePolicy::Minimum, QSizePolicy::Fixed);
   QDialogButtonBox *buttonBox = new QDialogButtonBox();
   QVBoxLayout *vboxLayout = new QVBoxLayout();
-  QLayout *layout = NULL;
-  int currentLayout = 0;
 
- int  v=0;
+  addControls(&dialog, vboxLayout, elems, nb);
 
- for(int i=0;i<nb;i++)
- {
-	 ADM_assert(elems[i]);
-
-	 if (elems[i]->getRequiredLayout() != currentLayout)
-	 {
-		 if (layout)
-			 vboxLayout->addLayout(layout);
-
-		 switch (elems[i]->getRequiredLayout())
-		 {
-			 case FAC_QT_GRIDLAYOUT:
-				 layout = new QGridLayout();
-				 break;
-			 case FAC_QT_VBOXLAYOUT:
-				 layout = new QVBoxLayout();
-				 break;
-		 }
-
-		 currentLayout = elems[i]->getRequiredLayout();
-		 v = 0;
-	 }
-
-	 elems[i]->setMe( (void *)&dialog,layout,v);
-	 v+=elems[i]->getSize();
- }
-
-   for(int i=0;i<nb;i++)
-  {
-    ADM_assert(elems[i]);
-     elems[i]->finalize(); 
-  }
-
   // Add buttons
    buttonBox->setStandardButtons(QDialogButtonBox::Ok | QDialogButtonBox::Cancel);
 
    QObject::connect(buttonBox, SIGNAL(accepted()), &dialog, SLOT(accept()));
    QObject::connect(buttonBox, SIGNAL(rejected()), &dialog, SLOT(reject()));
 
-   if (layout)
-	   vboxLayout->addLayout(layout);
-
    vboxLayout->addItem(spacer);
    vboxLayout->addWidget(buttonBox);
 
@@ -135,15 +98,15 @@
 /**
  * 	\fn qt4DiaFactoryRunTabs
  */
-uint8_t qt4DiaFactoryRunTabs(const char *title,uint32_t nb,diaElemTabs **tabs)
+uint8_t qt4DiaFactoryRunTabs2(const char *title, unsigned int headerControlCount, diaElem **headerControls, unsigned int tabControlCount, diaElemTabs **tabControls)
 {
     QDialog dialog(qtLastRegisteredDialog());
 
 	qtRegisterDialog(&dialog);
   
   ADM_assert(title);
-  ADM_assert(nb);
-  ADM_assert(tabs);
+  ADM_assert(tabControlCount);
+  ADM_assert(tabControls);
   
   dialog.setWindowTitle(QString::fromUtf8(title));
 
@@ -153,17 +116,20 @@
   QTabWidget *wtabs = new QTabWidget();
   QDialogButtonBox *buttonBox = new QDialogButtonBox();
 
-    buttonBox->setStandardButtons(QDialogButtonBox::Ok | QDialogButtonBox::Cancel);
+  if (headerControls)
+	  addControls(&dialog, vboxLayout, headerControls, headerControlCount);
 
-     QObject::connect(buttonBox, SIGNAL(accepted()), &dialog, SLOT(accept()));
-     QObject::connect(buttonBox, SIGNAL(rejected()), &dialog, SLOT(reject()));
-
-     for(int i=0;i<nb;i++)
+     for(int i=0;i<tabControlCount;i++)
      {
-        ADM_assert(tabs[i]);
-        insertTab(i,tabs[i],wtabs);
+        ADM_assert(tabControls[i]);
+        insertTab(i,tabControls[i],wtabs);
       }
 
+	 buttonBox->setStandardButtons(QDialogButtonBox::Ok | QDialogButtonBox::Cancel);
+
+     QObject::connect(buttonBox, SIGNAL(accepted()), &dialog, SLOT(accept()));
+     QObject::connect(buttonBox, SIGNAL(rejected()), &dialog, SLOT(reject()));
+
 	 vboxLayout->addLayout(layout);
      vboxLayout->addWidget(wtabs,0,0);
 	 vboxLayout->addItem(spacer);
@@ -179,10 +145,10 @@
   if(dialog.exec()==QDialog::Accepted)
   {
       // Read tabs
-       for(int tab=0;tab<nb;tab++)
+       for(int tab=0;tab<tabControlCount;tab++)
      {
-        ADM_assert(tabs[tab]);
-        diaElemTabs *myTab=tabs[tab];
+        ADM_assert(tabControls[tab]);
+        diaElemTabs *myTab=tabControls[tab];
         for(int i=0;i<myTab->nbElems;i++)
         {
           myTab->dias[i]->getMe();
@@ -200,35 +166,26 @@
   
 }
 
-void insertTab(uint32_t index, diaElemTabs *tab, QTabWidget *wtab)
+uint8_t qt4DiaFactoryRunTabs(const char *title, uint32_t tabControlCount, diaElemTabs **tabControls)
 {
+	return qt4DiaFactoryRunTabs2(title, 0, NULL, tabControlCount, tabControls);
+}
 
-  QWidget *wid=new QWidget;  
-  QSpacerItem *spacerItem = new QSpacerItem(20, 40, QSizePolicy::Minimum, QSizePolicy::Expanding);
-  int currentLayout = 0;
-  QVBoxLayout *vboxLayout = new QVBoxLayout(wid);
-  QLayout *layout = NULL;
-  
-  /* First compute the size of our window */
-  int vsize=0;
-  for(int i=0;i<tab->nbElems;i++)
-  {
-    ADM_assert(tab->dias[i]);
-     vsize+=tab->dias[i]->getSize(); 
-  }
+void addControls(QWidget *parent, QVBoxLayout *vboxLayout, diaElem **controls, unsigned int controlCount)
+{
+	int v = 0, currentLayout = 0;
+	QLayout *layout = NULL;
 
-	int  v=0;
-
-	for(int i=0;i<tab->nbElems;i++)
+	for(int i = 0; i < controlCount; i++)
 	{
-		ADM_assert(tab->dias[i]);
+		ADM_assert(controls[i]);
 
-		if (tab->dias[i]->getRequiredLayout() != currentLayout)
+		if (controls[i]->getRequiredLayout() != currentLayout)
 		{
 			if (layout)
 				vboxLayout->addLayout(layout);
 
-			switch (tab->dias[i]->getRequiredLayout())
+			switch (controls[i]->getRequiredLayout())
 			{
 				case FAC_QT_GRIDLAYOUT:
 					layout = new QGridLayout();
@@ -238,31 +195,38 @@
 					break;
 			}
 
-			currentLayout = tab->dias[i]->getRequiredLayout();
+			currentLayout = controls[i]->getRequiredLayout();
 			v = 0;
 		}
 
-		tab->dias[i]->setMe( wid,layout,v); 
-		v+=tab->dias[i]->getSize();
+		controls[i]->setMe(parent, layout, v); 
+		v += controls[i]->getSize();
 	}
-  
-  wtab->addTab(wid,QString::fromUtf8(tab->title));
-  for(int i=0;i<tab->nbElems;i++)
-  {
-    tab->dias[i]->finalize(); 
-  }
 
-  if (layout)
-	  vboxLayout->addLayout(layout);
+	if (layout)
+		vboxLayout->addLayout(layout);
 
-  vboxLayout->addItem(spacerItem);
+	for(int i = 0; i < controlCount; i++)
+		controls[i]->finalize(); 
 }
 
+void insertTab(uint32_t index, diaElemTabs *tab, QTabWidget *wtab)
+{
+	QWidget *wid = new QWidget;
+	QVBoxLayout *vboxLayout = new QVBoxLayout(wid);
+	QSpacerItem *spacerItem = new QSpacerItem(20, 40, QSizePolicy::Minimum, QSizePolicy::Expanding);
+
+	addControls(wid, vboxLayout, tab->dias, tab->nbElems);
+
+	wtab->addTab(wid,QString::fromUtf8(tab->title));
+	vboxLayout->addItem(spacerItem);
+}
+
 /**
  * 
  */
 /**
- *  \fn gtkFactoryGetVersion
+ *  \fn qt4FactoryGetVersion
  * 	\brief returns the version this has been compiled with
  */
 void      qt4FactoryGetVersion(uint32_t *maj,uint32_t *minor,uint32_t *patch)
@@ -316,6 +280,8 @@
 extern DELETE_DIA_ELEM_T    qt4DestroyToggleInt;
 extern CREATE_TOGGLE_T      qt4CreateToggle;
 extern DELETE_DIA_ELEM_T    qt4DestroyToggle;
+extern CREATE_CONFIG_MENU_T qt4CreateConfigMenu;
+extern DELETE_DIA_ELEM_T    qt4DestroyConfigMenu;
 
 //************
 static FactoryDescriptor Qt4FactoryDescriptor=
@@ -323,6 +289,7 @@
 	&qt4FactoryGetVersion,
 	&qt4DiaFactoryRun,
 	&qt4DiaFactoryRunTabs,
+	&qt4DiaFactoryRunTabs2,
 	// Buttons
 	&qt4CreateButton,
 	&qt4DestroyButton,
@@ -385,7 +352,10 @@
 	&qt4CreateUSlider,
 	&qt4DestroyUSlider,
 	&qt4CreateSlider,
-	&qt4DestroySlider
+	&qt4DestroySlider,
+	// Config Menu
+	&qt4CreateConfigMenu,
+	&qt4DestroyConfigMenu
 };
 
 /**

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/include/DIA_coreUI_internal.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/include/DIA_coreUI_internal.h	2009-07-19 17:52:49 UTC (rev 5121)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/include/DIA_coreUI_internal.h	2009-07-19 19:45:45 UTC (rev 5122)
@@ -38,12 +38,15 @@
 
 //
 typedef uint8_t DIA_FACTORY_RUN_TABS(const char *title,uint32_t nb,diaElemTabs **tabs);
+typedef uint8_t DIA_FACTORY_RUN_TABS2(const char *title, unsigned int headerControlCount, diaElem **headerControls, unsigned int tabControlCount, diaElemTabs **tabControls);
 typedef uint8_t DIA_FACTORY_RUN(const char *title,uint32_t nb,diaElem **elems);
+
 typedef struct
 {
 	COREUI_GET_VERSION   *FactoryGetVersion;
 	DIA_FACTORY_RUN      *FactoryRun;
 	DIA_FACTORY_RUN_TABS *FactoryRunTab;
+	DIA_FACTORY_RUN_TABS2 *FactoryRunTab2;
 //	
 	CREATE_BUTTON_T 	 *CreareButton;
 	DELETE_DIA_ELEM_T    *DestroyButton;
@@ -110,6 +113,9 @@
 // Slider
 	CREATE_SLIDER_T      *CreateSlider;
 	DELETE_DIA_ELEM_T    *DestroySlider;
+// Config Menu
+	CREATE_CONFIG_MENU_T *CreateConfigMenu;
+	DELETE_DIA_ELEM_T    *DestroyConfigMenu;
 }FactoryDescriptor;
 //
 uint8_t DIA_factoryInit(FactoryDescriptor *d);

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/include/DIA_factory.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/include/DIA_factory.h	2009-07-19 17:52:49 UTC (rev 5121)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/include/DIA_factory.h	2009-07-19 19:45:45 UTC (rev 5122)
@@ -23,7 +23,7 @@
 
 #define ADM_COREUI_MAJOR 1
 #define ADM_COREUI_MINOR 0
-#define ADM_COREUI_PATCH 0
+#define ADM_COREUI_PATCH 1
 
 typedef enum 
 {
@@ -47,8 +47,9 @@
   ELEM_SLIDER,
   ELEM_THREAD_COUNT,
   ELEM_MATRIX,
+  ELEM_ASPECT_RATIO,
+  ELEM_CONFIG_MENU,
   ELEM_COUNT,
-  ELEM_ASPECT_RATIO,
   ELEM_MAX=ELEM_COUNT-1
 }elemEnum;
 typedef void ADM_FAC_CALLBACK(void *cookie);
@@ -630,9 +631,42 @@
 	void enable(uint32_t onoff);
 	int getRequiredLayout(void);
 };
+/*********************************************/
+typedef enum
+{
+	CONFIG_MENU_CUSTOM,
+	CONFIG_MENU_DEFAULT,
+	CONFIG_MENU_USER,
+	CONFIG_MENU_SYSTEM
+} ConfigMenuType;
 
+typedef char *(CONFIG_MENU_SERIALIZE_T)(void);
+typedef bool (CONFIG_MENU_CHANGED_T)(const char* configName, ConfigMenuType configType);
+typedef diaElem *(CREATE_CONFIG_MENU_T)(const char* userConfigDir, const char* systemConfigDir,	CONFIG_MENU_CHANGED_T *changedFunc, 
+										CONFIG_MENU_SERIALIZE_T *serializeFunc, diaElem **controls, unsigned int controlCount);
+
+class diaElemConfigMenu : public diaElem
+{
+protected:
+	const char *userConfigDir, *systemConfigDir;
+	diaElem **controls;
+	unsigned int controlCount;
+
+	CONFIG_MENU_CHANGED_T *changedFunc;
+	CONFIG_MENU_SERIALIZE_T *serializeFunc;
+
+public:
+	diaElemConfigMenu(const char* userConfigDir, const char* systemConfigDir, CONFIG_MENU_CHANGED_T *changedFunc,
+			CONFIG_MENU_SERIALIZE_T *serializeFunc, diaElem **controls, unsigned int controlCount);
+	~diaElemConfigMenu();
+	void setMe(void *dialog, void *opaque, uint32_t line);
+	void getMe(void);
+	void enable(uint32_t onoff);
+	int getRequiredLayout(void);
+};
 /*********************************************/
 uint8_t diaFactoryRun(const char *title,uint32_t nb,diaElem **elems);
 uint8_t diaFactoryRunTabs(const char *title,uint32_t nb,diaElemTabs **tabs);
+uint8_t diaFactoryRunTabs(const char *title, unsigned int headerControlCount, diaElem **headerControls, unsigned int tabControlCount, diaElemTabs **tabControls);
 /*********************************************/
 #endif

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/src/DIA_factory.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/src/DIA_factory.cpp	2009-07-19 17:52:49 UTC (rev 5121)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/src/DIA_factory.cpp	2009-07-19 19:45:45 UTC (rev 5122)
@@ -58,6 +58,11 @@
 	ADM_assert(Factory); 
 	return Factory->FactoryRunTab(title,nb,tabs);
 }
+uint8_t diaFactoryRunTabs(const char *title, unsigned int headerControlCount, diaElem **headerControls, unsigned int tabControlCount, diaElemTabs **tabControls)
+{
+	ADM_assert(Factory);
+	return Factory->FactoryRunTab2(title, headerControlCount, headerControls, tabControlCount, tabControls);
+}
 
 // ****************** Buttons ********************
 diaElemButton ::diaElemButton(const char *toggleTitle, ADM_FAC_CALLBACK *cb,void *cookie,const char *tip) :diaElem(ELEM_BUTTON)
@@ -566,5 +571,25 @@
 			cast->setDigits(digits);	
 }
 DIA_MKSTUBS(diaElemSlider)
-//
-// EOF
+// ****************** diaElemConfigMenu ********************
+diaElemConfigMenu::diaElemConfigMenu(const char* userConfigDir, const char* systemConfigDir, CONFIG_MENU_CHANGED_T *changedFunc, 
+									 CONFIG_MENU_SERIALIZE_T *serializeFunc, diaElem **controls, unsigned int controlCount) : diaElem(ELEM_CONFIG_MENU)
+{
+	ADM_assert(Factory);
+	internalPointer = Factory->CreateConfigMenu(userConfigDir, systemConfigDir, changedFunc, serializeFunc, controls, controlCount);
+}
+
+diaElemConfigMenu::~diaElemConfigMenu()
+{
+	ADM_assert(Factory); 
+	Factory->DestroyConfigMenu(internalPointer);
+	internalPointer = NULL;
+}
+
+void diaElemConfigMenu::enable(uint32_t onoff)
+{ 
+	ADM_assert(internalPointer); 
+	internalPointer->enable(onoff);
+}
+
+DIA_MKSTUBS(diaElemConfigMenu)



From mean at mail.berlios.de  Mon Jul 20 07:25:51 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Mon, 20 Jul 2009 07:25:51 +0200
Subject: [Avidemux-svn-commit] r5123 - in
	branches/avidemux_2.5_branch_gruntster: .
	plugins/ADM_videoFilters/AvisynthResize/qt4
	plugins/ADM_videoFilters/CNR2/qt4 plugins/ADM_videoFilters/MPDelogo
	plugins/ADM_videoFilters/MplayerResize/qt4
	plugins/ADM_videoFilters/colorYUV
Message-ID: <200907200525.n6K5PpD8026654@sheep.berlios.de>

Author: mean
Date: 2009-07-20 07:25:48 +0200 (Mon, 20 Jul 2009)
New Revision: 5123

Modified:
   branches/avidemux_2.5_branch_gruntster/bootStrap.sh
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/AvisynthResize/qt4/Q_resize.h
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/CNR2/qt4/Q_cnr2.h
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/MPDelogo/ADM_vidMPdelogo.h
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/MplayerResize/qt4/Q_resize.h
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/colorYUV/ADM_vidColorYuv_param.h
Log:
[Build] More fixes with gcc 4.4 + fix bootStrap.sh

Modified: branches/avidemux_2.5_branch_gruntster/bootStrap.sh
===================================================================
--- branches/avidemux_2.5_branch_gruntster/bootStrap.sh	2009-07-19 19:45:45 UTC (rev 5122)
+++ branches/avidemux_2.5_branch_gruntster/bootStrap.sh	2009-07-20 05:25:48 UTC (rev 5123)
@@ -8,13 +8,16 @@
 export PREFIX=/usr
 export TOP=$PWD
 echo "* Avidemux simple build script *"
+echo "* Need sudo to install libs *"
+sudo -v
 echo "* Building Main *"
 rm -Rf buildMain
 mkdir -p buildMain
 cd buildMain
 cmake -DCMAKE_INSTALL_PREFIX=$PREFIX -DAVIDEMUX_INSTALL_PREFIX=$PREFIX .. || fail cmake
-make || fail make_main
-sudo make install | fail install_main
+make  || fail make_main
+sudo make install || fail install_main
+sudo ldconfig
 echo "*  Main Ok*"
 cd $TOP
 echo "* Making plugins *"
@@ -22,7 +25,8 @@
 mkdir -p buildPlugins
 cd buildPlugins
 cmake -DCMAKE_INSTALL_PREFIX=$PREFIX -DAVIDEMUX_INSTALL_PREFIX=$PREFIX  -DAVIDEMUX_SOURCE_DIR=$TOP/  -DAVIDEMUX_CORECONFIG_DIR=$TOP/buildMain/config ../plugins || fail cmake_plugins
-make || fail make_plugins
+make   || fail make_plugins
+sudo make install
 echo "*  All Done  *"
 
 

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/AvisynthResize/qt4/Q_resize.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/AvisynthResize/qt4/Q_resize.h	2009-07-19 19:45:45 UTC (rev 5122)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/AvisynthResize/qt4/Q_resize.h	2009-07-20 05:25:48 UTC (rev 5123)
@@ -1,7 +1,7 @@
 #ifndef Q_resizing_h
 #define Q_resizing_h
-
 #include "ui_resizing.h"
+#include "ADM_default.h"
 
 typedef struct resParam
 {

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/CNR2/qt4/Q_cnr2.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/CNR2/qt4/Q_cnr2.h	2009-07-19 19:45:45 UTC (rev 5122)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/CNR2/qt4/Q_cnr2.h	2009-07-20 05:25:48 UTC (rev 5123)
@@ -1,4 +1,5 @@
 #include "ui_cnr2.h"
+#include "ADM_default.h"
 #include "ADM_vidCNR2_param.h"
 
 class Cnr2Window : public QDialog

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/MPDelogo/ADM_vidMPdelogo.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/MPDelogo/ADM_vidMPdelogo.h	2009-07-19 19:45:45 UTC (rev 5122)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/MPDelogo/ADM_vidMPdelogo.h	2009-07-20 05:25:48 UTC (rev 5123)
@@ -12,6 +12,7 @@
  ***************************************************************************/
 #ifndef ADM_DELOGO_H
 #define ADM_DELOGO_H
+#include "ADM_default.h"
 typedef struct MPDELOGO_PARAM
 {
         uint32_t xoff;

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/MplayerResize/qt4/Q_resize.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/MplayerResize/qt4/Q_resize.h	2009-07-19 19:45:45 UTC (rev 5122)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/MplayerResize/qt4/Q_resize.h	2009-07-20 05:25:48 UTC (rev 5123)
@@ -2,6 +2,7 @@
 #define Q_resizing_h
 
 #include "ui_resizing.h"
+#include "ADM_default.h"
 
 typedef struct resParam
 {

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/colorYUV/ADM_vidColorYuv_param.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/colorYUV/ADM_vidColorYuv_param.h	2009-07-19 19:45:45 UTC (rev 5122)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/colorYUV/ADM_vidColorYuv_param.h	2009-07-20 05:25:48 UTC (rev 5123)
@@ -14,6 +14,7 @@
 
 #ifndef ADM_VID_COLOR_YUV_PARAM_H
 #define ADM_VID_COLOR_YUV_PARAM_H
+#include "ADM_default.h"
 typedef struct COLOR_YUV_PARAM
 {
     double y_contrast, y_bright, y_gamma, y_gain;



From mean at mail.berlios.de  Mon Jul 20 07:40:04 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Mon, 20 Jul 2009 07:40:04 +0200
Subject: [Avidemux-svn-commit] r5124 - in
	branches/avidemux_2.6_branch_mean/avidemux_plugins:
	ADM_demuxers/OpenDml ADM_muxers/muxerAvi
Message-ID: <200907200540.n6K5e4Mi011738@sheep.berlios.de>

Author: mean
Date: 2009-07-20 07:40:03 +0200 (Mon, 20 Jul 2009)
New Revision: 5124

Modified:
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/OpenDml/ADM_odml_odml.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/OpenDml/ADM_openDML.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerAvi/op_aviwrite.cpp
Log:
[all] warning fixes (32 bits)

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/OpenDml/ADM_odml_odml.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/OpenDml/ADM_odml_odml.cpp	2009-07-20 05:25:48 UTC (rev 5123)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/OpenDml/ADM_odml_odml.cpp	2009-07-20 05:40:03 UTC (rev 5124)
@@ -167,8 +167,8 @@
 uint32_t 	i,j;
 
 	// Jump to index of vidTrack
-	printf("Trying ODML super index..\n");
-#define szeof(x) printf("Sizeof "#x":%"LLU"\n",sizeof(x));
+	printf("[AVI]Trying ODML super index..\n");
+#define szeof(x) printf("Sizeof "#x":%d\n",(int)sizeof(x));
         szeof(OPENDML_INDEX);
         szeof(OPENDML_ENTRY);
         szeof(OPENML_SECONDARY_INDEX);
@@ -176,30 +176,30 @@
 
 	if(!_Tracks[track].indx.offset)
 	{
-		printf("No indx field.\n");
+		printf("[AVI]No indx field.\n");
 		return 0;
 	}
 	fseeko(_fd,_Tracks[track].indx.offset,SEEK_SET);
         if(!readMasterIndex(&masterIndex,_fd))   //if(1!=fread(&masterIndex,sizeof(masterIndex),1,_fd))
 		{
-			printf("Problem reading master index\n");
+			printf("[AVI]Problem reading master index\n");
 			return 0;
 		}
 	if(masterIndex.indexType) // not a super index ?
 		{
-			printf("Not a super index!\n");
+			printf("[AVI]Not a super index!\n");
 			return 0;
 		}
-	printf("Master index of "),fourCC::print(masterIndex.chunkId);printf(" found\n");
-	printf("SubType : %"LU"\n",masterIndex.indexSubType);
+	printf("[AVI]Master index of "),fourCC::print(masterIndex.chunkId);printf(" found\n");
+	printf("[AVI]SubType : %"LU"\n",masterIndex.indexSubType);
 
 
 
 	OPENDML_ENTRY superEntries[masterIndex.nbEntryInUse];
-	printf("We have %"LU" indeces\n",masterIndex.nbEntryInUse);
+	printf("[AVI]We have %"LU" indeces\n",masterIndex.nbEntryInUse);
         if(!readSuperEntries(superEntries,masterIndex.nbEntryInUse,_fd)) //if(1!=fread(superEntries,sizeof(OPENDML_ENTRY)*masterIndex.nbEntryInUse,1,_fd))
 	{
-		printf("Problem reading indices\n");
+		printf("[AVI]Problem reading indices\n");
 		return 0;
 	}
 	// now we have the master index complete
@@ -214,7 +214,7 @@
 		fread(&len,4,1,_fd);
                 if(!readSecondary(&second,_fd)) //if(1!=fread(&second,sizeof(second),1,_fd))
 		{
-			printf("Problem reading secondary index (%u/%u) trying to continue \n",i,masterIndex.nbEntryInUse);
+			printf("[AVI]Problem reading secondary index (%u/%u) trying to continue \n",i,masterIndex.nbEntryInUse);
 			goto _cntue;
 		}
 		total+=second.nbEntryInUse;

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/OpenDml/ADM_openDML.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/OpenDml/ADM_openDML.cpp	2009-07-20 05:25:48 UTC (rev 5123)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/OpenDml/ADM_openDML.cpp	2009-07-20 05:40:03 UTC (rev 5124)
@@ -328,14 +328,14 @@
 			fseeko(_fd,_Tracks[i].strh.offset,SEEK_SET);
 			if(_Tracks[i].strh.size!=sizeof(_videostream))
 			{
-				printf("Mmm(1) we have a bogey here, size mismatch : %lu\n",_Tracks[i].strh.size);
-				printf("expected %lu\n",sizeof(_videostream));
+				printf("[AVI]Mmm(1) we have a bogey here, size mismatch : %"LLU"\n",_Tracks[i].strh.size);
+				printf("[AVI]expected %d\n",(int)sizeof(_videostream));
 				if(_Tracks[i].strh.size<sizeof(_videostream)-8) // RECT is not mandatory
 				{
                                   GUI_Error_HIG(QT_TR_NOOP("Malformed header"), NULL);
 					return 0;
 				}		
-				printf("Trying to continue anyway\n");			
+				printf("[AVI]Trying to continue anyway\n");			
 			}
 			fread(&_videostream,sizeof(_videostream),1,_fd);
 #ifdef ADM_BIG_ENDIAN
@@ -362,7 +362,7 @@
 		extra=_Tracks[vidTrack].strf.size-sizeof(_video_bih);
 		if(extra<0)
 		{	
-			printf("bih is not big enough (%lu/%lu)!\n",_Tracks[vidTrack].strf.size,sizeof(_video_bih));
+			printf("[AVI]bih is not big enough (%"LLU"/%d)!\n",_Tracks[vidTrack].strf.size,(int)sizeof(_video_bih));
 			return 0;
 		}
 		fread(&_video_bih,sizeof(_video_bih),1,_fd);
@@ -403,14 +403,14 @@
                                         fseeko(_fd,_Tracks[run].strh.offset,SEEK_SET);
                                         if(_Tracks[run].strh.size != sizeof(_audiostream))
                                         {
-                                                printf("Mmm(2) we have a bogey here, size mismatch : %lu\n",_Tracks[run].strh.size);
-                                                printf("expected %lu\n",sizeof(_audiostream));
+                                                printf("[AVI]Mmm(2) we have a bogey here, size mismatch : %"LLU"\n",_Tracks[run].strh.size);
+                                                printf("[AVI]expected %d\n",(int)sizeof(_audiostream));
                                                 if(_Tracks[run].strh.size<sizeof(_audiostream)-8)
                                                 {
                                                   GUI_Error_HIG(QT_TR_NOOP("Malformed header"), NULL);
                                                         return 0;
                                                 }
-                                                printf("Trying to continue anyway\n");			
+                                                printf("[AVI]Trying to continue anyway\n");			
                                         }
                                         fread(track->avistream,sizeof(_audiostream),1,_fd);
 #ifdef ADM_BIG_ENDIAN
@@ -427,8 +427,8 @@
                                         extra=_Tracks[run].strf.size-sizeof(WAVHeader);
                                         if(extra<0)
                                         {	
-                                                printf("WavHeader is not big enough (%lu/%lu)!\n",
-                                                _Tracks[run].strf.size,sizeof(WAVHeader));
+                                                printf("[AVI]WavHeader is not big enough (%"LLU"/%d)!\n",
+                                                _Tracks[run].strf.size,(int)sizeof(WAVHeader));
                                                 return 0;
                                         }
                                         fread(track->wavHeader,sizeof(WAVHeader),1,_fd);				
@@ -589,14 +589,14 @@
 			if(_Tracks[i].strh.size!=sizeof(tmp))
 			{
 				
-				printf("Mmm(3) we have a bogey here, size mismatch : %lu\n",_Tracks[i].strh.size);
-				printf("expected %lu\n",sizeof(tmp));
+				printf("[AVI]Mmm(3) we have a bogey here, size mismatch : %"LLU"\n",_Tracks[i].strh.size);
+				printf("[AVI]expected %d\n",(int)sizeof(tmp));
 				if(_Tracks[i].strh.size<sizeof(tmp)-8)
 				{
                                   GUI_Error_HIG(QT_TR_NOOP("Malformed header"), NULL);
 					return 0;
 				}		
-				printf("Trying to continue anyway\n");			
+				printf("[AVI]Trying to continue anyway\n");			
 			}
 			
 			
@@ -754,7 +754,7 @@
 				aprintf("main header found \n");
 				if(len!=sizeof(_mainaviheader))
 				{
-					printf("oops : %u / %lu\n",len,sizeof(_mainaviheader));
+					printf("[AVI]oops : %"LU" / %d\n",len,(int)sizeof(_mainaviheader));
 				}
 				p->read(len,(uint8_t *)&_mainaviheader);
 
@@ -765,7 +765,7 @@
 				break;
 		case MKFCC('i','d','x','1'):
                                 _regularIndex.offset=p->getPos();
-                                printf("[Avi] Idx1 found at offset %lx\n",_regularIndex.offset);
+                                printf("[Avi] Idx1 found at offset %"LLX"\n",_regularIndex.offset);
                                 _regularIndex.size=len;
 				return;
 				break;				

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerAvi/op_aviwrite.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerAvi/op_aviwrite.cpp	2009-07-20 05:25:48 UTC (rev 5123)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerAvi/op_aviwrite.cpp	2009-07-20 05:40:03 UTC (rev 5124)
@@ -889,7 +889,7 @@
 	if(doODML!=NO){
 		// save file position
 		*fpos=alist->Tell();
-		aprintf("[ODML]write dummy chunk at file position %lu with data size %u\n",*fpos, size);
+		aprintf("[ODML]write dummy chunk at file position %"LLU" with data size %"LU"\n",*fpos, size);
 		// generate dummy data
 		uint8_t* dummy=(uint8_t*)ADM_alloc (size);
 		memset(dummy,0,size);
@@ -979,7 +979,8 @@
 #ifndef MOVINDEX
 		_file->seek(startAt);
 #endif
-		aprintf("\nwriting super index at file pos %lu, total available size %u\n",odml_indexes[stream_nbr].fpos,pad);
+		aprintf("[AVI]writing super index at file pos %"LLU", total available size %"LU"\n",
+                            odml_indexes[stream_nbr].fpos,pad);
 		AviList* LIndex =  new AviList("JUNK", _file);	// abused writing aid (don't call Begin or End; the fcc is unused until 'Begin')
                 uint32_t nbEntries=odml_indexes[stream_nbr].index_count+1;
 		LIndex->Write32("indx");			// 4cc
@@ -999,14 +1000,14 @@
                         LIndex->Write64(pos);	//absolute file position
                         LIndex->Write32(32 + 8 * odml_index_size);	// complete index chunk size
                         LIndex->Write32(odml_indexes[stream_nbr].odml_index[a].nEntriesInUse);	// duration
-                        aprintf("\nstream %u, index %u Position: %lu  EntriesInUse:%u\n",stream_nbr, a ,pos,
+                        aprintf("[AVI]stream %d, index %"LU" Position: %"LLU"  EntriesInUse:%"LU"\n",stream_nbr, a ,pos,
                         odml_indexes[stream_nbr].odml_index[a].nEntriesInUse);
 		}
                 uint32_t at=LIndex->Tell();
 
                 int32_t junkLen=endAt-at-8;
                 ADM_assert(junkLen>=9);
-                printf("Padding ODML index with junk of size %d, total padding %u\n",junkLen, odml_indexes[stream_nbr].pad);
+                printf("[AVI]Padding ODML index with junk of size %"LD", total padding %u\n",junkLen, odml_indexes[stream_nbr].pad);
 		delete LIndex;
 // Now create out junk chunk if needed, to padd the odml
                 AviList *Junk=new AviList("JUNK",_file);
@@ -1047,8 +1048,8 @@
 				odml_index_data_t* idxd=idx->index+b;	// access to index data
 				rel_pos=idxd->fpos-base_off;	// get relative file position
 				if(rel_pos>(uint64_t)4*1024*1024*1024){	// index chunks have a maximum offset of 4GB
-					printf("\nData rate too high for index size. Decrease index duration.\n"); // decrease the multiplicator in saveBegin that calculates odml_index_size
-					printf("base:%lu abs:%lu rel:%lu stream:%d index:%d entry:%d",base_off,idxd->fpos,rel_pos,stream_nbr,a,b);
+					printf("[AVI]Data rate too high for index size. Decrease index duration.\n"); // decrease the multiplicator in saveBegin that calculates odml_index_size
+					printf("[AVI]base:%"LLU" abs:%"LLU" rel:%"LLU" stream:%d index:%d entry:%d",base_off,idxd->fpos,rel_pos,stream_nbr,a,b);
 					delete LIndex;
 					return false;
 				}
@@ -1073,12 +1074,12 @@
 		// will we get over the next GB border?
 		if( len2>((uint64_t)1024*1024*1024*(odml_riff_count+1)) ){
 			if(doODML==HIDDEN){
-				aprintf("\nstarting new (hidden) RIFF at %lu\n",LMovie->Tell());
+				aprintf("[AVI]starting new (hidden) RIFF at %"LLU"\n",LMovie->Tell());
 				if(odml_riff_count<4)	// we have only 4 buffers but this has to be enough
 					odml_write_dummy_chunk(LMovie, odml_riff_fpos+odml_riff_count, 16);	// write dummy
 				if(odml_riff_count==0) odml_frames_inAVI=vframe-1;	// rescue number of frames in first AVI (-1 since there may be no audio for the last video frame)
 			}else{	// restart riff and movie
-				aprintf("\nstarting new RIFF at %lu\n",LMovie->Tell());
+				aprintf("[AVI]starting new RIFF at %"LLU"\n",LMovie->Tell());
 				// restart lists
 				LMovie->End();
 				LAll->End();
@@ -1090,7 +1091,7 @@
 		// ODML required for movie?
 		if(doODML==HIDDEN){
 			if( ((uint64_t)getPos()+len+17) >= ((uint64_t)4*1024*1024*1024) ){	//if (written data + new chunk + index (old type) for new chunk + possible padding) does not fit into 4GB
-				printf("\nswitching to ODML mode at %lu\n",LMovie->Tell());
+				printf("[AVI]switching to ODML mode at %"LLU"\n",LMovie->Tell());
 				uint64_t last_pos=LMovie->Tell();	// rescue current file position
 				// close First RIFF
 				for(int a=0;a<4;++a){	// for each hidden riff



From mean at mail.berlios.de  Mon Jul 20 20:18:14 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Mon, 20 Jul 2009 20:18:14 +0200
Subject: [Avidemux-svn-commit] r5126 -
	branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioDecoders/ADM_ad_faad
Message-ID: <200907201818.n6KIIEsr022477@sheep.berlios.de>

Author: mean
Date: 2009-07-20 20:18:14 +0200 (Mon, 20 Jul 2009)
New Revision: 5126

Modified:
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioDecoders/ADM_ad_faad/ADM_ad_faad.cpp
Log:
[ad_faad] Warning fix

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioDecoders/ADM_ad_faad/ADM_ad_faad.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioDecoders/ADM_ad_faad/ADM_ad_faad.cpp	2009-07-20 18:18:11 UTC (rev 5125)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioDecoders/ADM_ad_faad/ADM_ad_faad.cpp	2009-07-20 18:18:14 UTC (rev 5126)
@@ -150,7 +150,7 @@
 			res=faacDecInit(_instance,inptr,nbIn,&srate,&chan);
 			if(res>=0)
 			{
-				printf("Faad Inited : rate:%"LU" chan:%"LU" off:%"LD"\n",srate,chan,res);
+				printf("Faad Inited : rate:%"LU" chan:%"LU" off:%ld\n",srate,chan,res);
 				_inited=1;
 				first=1;
 				_inbuffer=0;



From mean at mail.berlios.de  Mon Jul 20 20:18:12 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Mon, 20 Jul 2009 20:18:12 +0200
Subject: [Avidemux-svn-commit] r5125 - in branches/avidemux_2.6_branch_mean:
	. avidemux/common/ADM_editor avidemux_core/ADM_core/src
	avidemux_core/ADM_coreMuxer/src
	avidemux_plugins/ADM_audioDevices/Oss
	avidemux_plugins/ADM_demuxers/Mp4
	avidemux_plugins/ADM_demuxers/MpegPS
	avidemux_plugins/ADM_demuxers/MpegTS
	avidemux_plugins/ADM_demuxers/OpenDml
Message-ID: <200907201818.n6KIIC6e022466@sheep.berlios.de>

Author: mean
Date: 2009-07-20 20:18:11 +0200 (Mon, 20 Jul 2009)
New Revision: 5125

Modified:
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADMedAVIAUD.cpp
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_core/src/ADM_memcpy.cpp
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreMuxer/src/ADM_audioClock.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioDevices/Oss/ADM_deviceoss.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/Mp4/ADM_atom.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/Mp4/ADM_mp4audio.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegPS/ADM_psAudioProbe.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/ADM_tsIndex.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/OpenDml/ADM_odml_audio.cpp
   branches/avidemux_2.6_branch_mean/bootStrap.bash
Log:
[all] More warning fix

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADMedAVIAUD.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADMedAVIAUD.cpp	2009-07-20 05:40:03 UTC (rev 5124)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADMedAVIAUD.cpp	2009-07-20 18:18:11 UTC (rev 5125)
@@ -106,7 +106,7 @@
     {
         if(abs(lastDts-packetBufferDts)>ADM_ALLOWED_DRIFT_US)
         {
-            printf("[Composer::getPCMPacket] drift %d, computed :%lu got %lu\n",(int)(lastDts-packetBufferDts),lastDts,packetBufferDts);
+            printf("[Composer::getPCMPacket] drift %d, computed :%"LLU" got %"LLU"\n",(int)(lastDts-packetBufferDts),lastDts,packetBufferDts);
             if(packetBufferDts<lastDts)
             {
                 printf("[Composer::getPCMPacket] Dropping packet %"LU" last =%"LU"\n",(uint32_t)(lastDts/1000),(uint32_t)(packetBufferDts/1000));

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_core/src/ADM_memcpy.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_core/src/ADM_memcpy.cpp	2009-07-20 05:40:03 UTC (rev 5124)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_core/src/ADM_memcpy.cpp	2009-07-20 18:18:11 UTC (rev 5125)
@@ -436,7 +436,7 @@
 	stop=rdtsc();
 	ADM_dealloc(src);
 	ADM_dealloc(dst);
-	printf("Method :%s \tTime:%lu\n",name,stop-start);
+	printf("Method :%s \tTime:%"LLU"\n",name,stop-start);
 	return 1;
 
 }

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreMuxer/src/ADM_audioClock.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreMuxer/src/ADM_audioClock.cpp	2009-07-20 05:40:03 UTC (rev 5124)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreMuxer/src/ADM_audioClock.cpp	2009-07-20 18:18:11 UTC (rev 5125)
@@ -51,7 +51,7 @@
                 uint64_t curTime=getTimeUs();
                 int64_t delta=(int64_t)clk-(int64_t)curTime;
                 if(abs(delta)<2000) return true;
-                printf("[audioClock] Drift detected :%lu vs %lu, delta=%ld\n",curTime,clk,delta);
+                printf("[audioClock] Drift detected :%"LLU" vs %"LLU", delta=%"LLD"\n",curTime,clk,delta);
                 _nbSamples=0;
                 _baseClock=clk;
                 return true; 

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioDevices/Oss/ADM_deviceoss.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioDevices/Oss/ADM_deviceoss.cpp	2009-07-20 05:40:03 UTC (rev 5124)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioDevices/Oss/ADM_deviceoss.cpp	2009-07-20 18:18:11 UTC (rev 5125)
@@ -104,7 +104,7 @@
 {
 	
     int fq=_frequency;
-    printf("[OSSS]: %lu Hz, %lu channels\n", _frequency, _channels);
+    printf("[OSSS]: %"LU" Hz, %"LU" channels\n", _frequency, _channels);
     // open OSS device
     oss_fd = open(dsp, O_WRONLY /*| O_NONBLOCK*/);
     if (oss_fd == -1) {

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/Mp4/ADM_atom.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/Mp4/ADM_atom.cpp	2009-07-20 05:40:03 UTC (rev 5124)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/Mp4/ADM_atom.cpp	2009-07-20 18:18:11 UTC (rev 5125)
@@ -149,7 +149,7 @@
 	pos=ftello(_fd);
 	if(pos+rd>_atomSize+_atomStart)
 	{
-		printf("\n Going out of atom's bound!! (%ld  / %ld )\n",pos+rd,_atomSize+_atomStart);
+		printf("\n Going out of atom's bound!! (%"LLD"  / %"LLD" )\n",pos+rd,_atomSize+_atomStart);
 		dumpAtom();
 		exit(0);
 	}

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/Mp4/ADM_mp4audio.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/Mp4/ADM_mp4audio.cpp	2009-07-20 05:40:03 UTC (rev 5124)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/Mp4/ADM_mp4audio.cpp	2009-07-20 18:18:11 UTC (rev 5125)
@@ -93,7 +93,7 @@
 uint64_t target=timeUs;
 		if(target>_index[_nb_chunks-1].dts)
 		{
-			printf("[MP4]: going out of time asked %lu : avail %lu\n",timeUs/1000,_index[_nb_chunks-1].dts/1000);
+			printf("[MP4]: going out of time asked %"LLU" : avail %"LLU"\n",timeUs/1000,_index[_nb_chunks-1].dts/1000);
 			_current_index=_nb_chunks-1;
 			return true;
 		}

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegPS/ADM_psAudioProbe.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegPS/ADM_psAudioProbe.cpp	2009-07-20 05:40:03 UTC (rev 5124)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegPS/ADM_psAudioProbe.cpp	2009-07-20 18:18:11 UTC (rev 5125)
@@ -83,7 +83,7 @@
     }
 
 end:
-    printf("[PsDemux] Audio probe done, found %lu tracks\n",tracks->size());
+    printf("[PsDemux] Audio probe done, found %d tracks\n",(int)tracks->size());
     delete packet;
     
     if(tracks->size()==0) 

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/ADM_tsIndex.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/ADM_tsIndex.cpp	2009-07-20 05:40:03 UTC (rev 5124)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/ADM_tsIndex.cpp	2009-07-20 18:18:11 UTC (rev 5125)
@@ -401,7 +401,7 @@
                             zprintf("[SEI] Nal size :%d\n",SEI_nal.payloadSize);
                             if(SEI_nal.payloadSize>=7)
                                 decodeSEI(SEI_nal.payloadSize-4,SEI_nal.payload,&recoveryCount);
-                            else printf("[SEI] Too short size+4=%d\n",SEI_nal.payload);
+                            else printf("[SEI] Too short size+4=%d\n",*(SEI_nal.payload));
                         
 
                             goto resume;

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/OpenDml/ADM_odml_audio.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/OpenDml/ADM_odml_audio.cpp	2009-07-20 05:40:03 UTC (rev 5124)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/OpenDml/ADM_odml_audio.cpp	2009-07-20 18:18:11 UTC (rev 5125)
@@ -109,7 +109,7 @@
         }
         total+=index[i].size;
     }
-    printf("[aviAudioAccess] Seek to pos %lu failed\n",pos);
+    printf("[aviAudioAccess] Seek to pos %"LLU" failed\n",pos);
     return 0;
 }
 /**

Modified: branches/avidemux_2.6_branch_mean/bootStrap.bash
===================================================================
--- branches/avidemux_2.6_branch_mean/bootStrap.bash	2009-07-20 05:40:03 UTC (rev 5124)
+++ branches/avidemux_2.6_branch_mean/bootStrap.bash	2009-07-20 18:18:11 UTC (rev 5125)
@@ -29,7 +29,7 @@
 cd $TOP/buildCore && sudo make install
 echo "** QT4 **"
 cd $TOP
-Process buildQt4 ../avidemux/qt4
+#Process buildQt4 ../avidemux/qt4
 echo "** GTK **"
 cd $TOP
 Process buildGtk ../avidemux/gtk



From mean at mail.berlios.de  Mon Jul 20 21:44:37 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Mon, 20 Jul 2009 21:44:37 +0200
Subject: [Avidemux-svn-commit] r5127 - in
	branches/avidemux_2.5_branch_gruntster: avidemux/ADM_plugin
	plugins/ADM_videoEncoder/ADM_vidEnc_avcodec
	plugins/ADM_videoEncoder/ADM_vidEnc_x264
	plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4
	plugins/ADM_videoEncoder/ADM_vidEnc_xvid
	plugins/ADM_videoEncoder/common
Message-ID: <200907201944.n6KJibLW032104@sheep.berlios.de>

Author: mean
Date: 2009-07-20 21:44:36 +0200 (Mon, 20 Jul 2009)
New Revision: 5127

Modified:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_plugin/ADM_vidEnc_plugin.h
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/encoder.cpp
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/mpeg1Encoder.cpp
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/mpeg1EncoderOptions.cpp
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/mpeg1EncoderOptions.h
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264CustomMatrixDialog.h
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ZoneTableModel.h
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/zoneOptions.h
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_xvid/xvidOptions.cpp
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/common/PluginOptions.cpp
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/common/PluginOptions.h
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/common/PluginXmlOptions.h
Log:
[plugins] gcc 4.4 / linux compilation fix

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_plugin/ADM_vidEnc_plugin.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_plugin/ADM_vidEnc_plugin.h	2009-07-20 18:18:14 UTC (rev 5126)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_plugin/ADM_vidEnc_plugin.h	2009-07-20 19:44:36 UTC (rev 5127)
@@ -45,7 +45,7 @@
 
 #define ADM_CSP_YV12 1
 #define ADM_CSP_I422 2
-
+#include "ADM_default.h"
 #include "DIA_uiTypes.h"
 
 #define ADM_VIDENC_FLAG_GLOBAL_HEADER 1

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/encoder.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/encoder.cpp	2009-07-20 18:18:14 UTC (rev 5126)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/encoder.cpp	2009-07-20 19:44:36 UTC (rev 5127)
@@ -13,6 +13,7 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
+#include <libxml/tree.h>
 
 #include "encoder.h"
 #include "dvEncoder.h"

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/mpeg1Encoder.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/mpeg1Encoder.cpp	2009-07-20 18:18:14 UTC (rev 5126)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/mpeg1Encoder.cpp	2009-07-20 19:44:36 UTC (rev 5127)
@@ -13,7 +13,7 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
-
+#include <libxml/tree.h>
 #include "ADM_inttype.h"
 #include "mpeg1Encoder.h"
 #include "DIA_factory.h"

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/mpeg1EncoderOptions.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/mpeg1EncoderOptions.cpp	2009-07-20 18:18:14 UTC (rev 5126)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/mpeg1EncoderOptions.cpp	2009-07-20 19:44:36 UTC (rev 5127)
@@ -26,8 +26,7 @@
 #include <libxml/xmlschemas.h>
 #include <sstream>
 #include <string>
-
-#include "ADM_inttype.h"
+#include "ADM_default.h"
 #include "ADM_files.h"
 
 #include "../common/PluginOptions.cpp"

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/mpeg1EncoderOptions.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/mpeg1EncoderOptions.h	2009-07-20 18:18:14 UTC (rev 5126)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/mpeg1EncoderOptions.h	2009-07-20 19:44:36 UTC (rev 5127)
@@ -18,7 +18,6 @@
 #define mpeg1EncoderOptions_h
 
 #include <vector>
-#include <libxml/tree.h>
 #include "../common/PluginOptions.h"
 
 extern "C"

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264CustomMatrixDialog.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264CustomMatrixDialog.h	2009-07-20 18:18:14 UTC (rev 5126)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264CustomMatrixDialog.h	2009-07-20 19:44:36 UTC (rev 5127)
@@ -2,7 +2,7 @@
 #define x264CustomMatrixDialog_h
 
 #include "ui_x264CustomMatrixDialog.h"
-
+#include "ADM_default.h"
 class x264CustomMatrixDialog : public QDialog
 {
 	Q_OBJECT

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ZoneTableModel.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ZoneTableModel.h	2009-07-20 18:18:14 UTC (rev 5126)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ZoneTableModel.h	2009-07-20 19:44:36 UTC (rev 5127)
@@ -4,7 +4,6 @@
 #include <QtCore/QAbstractTableModel>
 #include <QtCore/QPair>
 #include <QtCore/QList>
-
 #include "../zoneOptions.h"
 
 class x264ZoneTableModel : public QAbstractTableModel

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/zoneOptions.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/zoneOptions.h	2009-07-20 18:18:14 UTC (rev 5126)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/zoneOptions.h	2009-07-20 19:44:36 UTC (rev 5127)
@@ -16,12 +16,12 @@
 
 #ifndef zoneOptions_h
 #define zoneOptions_h
+#include "ADM_default.h"
 
 extern "C"
 {
 #include "x264.h"
 }
-
 typedef enum
 {
 	ZONE_MODE_QUANTISER,

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_xvid/xvidOptions.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_xvid/xvidOptions.cpp	2009-07-20 18:18:14 UTC (rev 5126)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_xvid/xvidOptions.cpp	2009-07-20 19:44:36 UTC (rev 5127)
@@ -27,7 +27,7 @@
 #include <string>
 
 #include "config.h"
-#include "ADM_inttype.h"
+#include "ADM_default.h"
 #include "ADM_files.h"
 
 #include "../common/PluginOptions.cpp"

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/common/PluginOptions.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/common/PluginOptions.cpp	2009-07-20 18:18:14 UTC (rev 5126)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/common/PluginOptions.cpp	2009-07-20 19:44:36 UTC (rev 5127)
@@ -14,8 +14,6 @@
  *                                                                         *
  ***************************************************************************/
 
-#include <libxml/parser.h>
-#include <libxml/xmlschemas.h>
 #include <sstream>
 #include <string>
 
@@ -23,7 +21,9 @@
 #include "ADM_files.h"
 #include "PluginOptions.h"
 #include "PluginXmlOptions.cpp"
-
+#undef malloc
+#undef free
+#undef strdup
 PluginOptions::PluginOptions(const char* tagPrefix, const char* schemaFile, unsigned int defaultEncodeMode, int defaultEncodeModeParameter)
 {
 	_tagPrefix = new char[strlen(tagPrefix) + 1];

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/common/PluginOptions.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/common/PluginOptions.h	2009-07-20 18:18:14 UTC (rev 5126)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/common/PluginOptions.h	2009-07-20 19:44:36 UTC (rev 5127)
@@ -17,7 +17,6 @@
 #ifndef PluginOptions_h
 #define PluginOptions_h
 
-#include <libxml/tree.h>
 
 extern "C"
 {

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/common/PluginXmlOptions.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/common/PluginXmlOptions.h	2009-07-20 18:18:14 UTC (rev 5126)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/common/PluginXmlOptions.h	2009-07-20 19:44:36 UTC (rev 5127)
@@ -17,7 +17,6 @@
 #ifndef PluginXmlOptions_h
 #define PluginXmlOptions_h
 
-#include <libxml/tree.h>
 
 typedef enum
 {



From mean at mail.berlios.de  Wed Jul 22 19:09:48 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Wed, 22 Jul 2009 19:09:48 +0200
Subject: [Avidemux-svn-commit] r5128 -
	branches/avidemux_2.5_branch_gruntster/po
Message-ID: <200907221709.n6MH9ml1008176@sheep.berlios.de>

Author: mean
Date: 2009-07-22 19:09:30 +0200 (Wed, 22 Jul 2009)
New Revision: 5128

Modified:
   branches/avidemux_2.5_branch_gruntster/po/de.po
Log:
[i18n] de update by Joo Martin

Modified: branches/avidemux_2.5_branch_gruntster/po/de.po
===================================================================
--- branches/avidemux_2.5_branch_gruntster/po/de.po	2009-07-20 19:44:36 UTC (rev 5127)
+++ branches/avidemux_2.5_branch_gruntster/po/de.po	2009-07-22 17:09:30 UTC (rev 5128)
@@ -7,8 +7,8 @@
 msgstr ""
 "Project-Id-Version: de\n"
 "Report-Msgid-Bugs-To: \n"
-"POT-Creation-Date: 2008-10-02 22:05+0100\n"
-"PO-Revision-Date: 2008-05-15 21:43+0100\n"
+"POT-Creation-Date: 2009-03-22 00:42+0100\n"
+"PO-Revision-Date: 2009-03-22 01:05+0100\n"
 "Last-Translator: Joo Martin <ad_debian at joonet.de>\n"
 "Language-Team: German\n"
 "MIME-Version: 1.0\n"
@@ -16,225 +16,201 @@
 "Content-Transfer-Encoding: 8bit\n"
 "X-Poedit-Country: GERMANY\n"
 
-#: avidemux/ADM_editor/ADM_outputfmt.h:42
-#: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:380
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:515
+#: avidemux/ADM_editor/ADM_outputfmt.h:43
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:501
+#: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:370
 msgid "AVI"
 msgstr "AVI"
 
-#: avidemux/ADM_editor/ADM_outputfmt.h:43
+#: avidemux/ADM_editor/ADM_outputfmt.h:44
 msgid "AVI, dual audio"
 msgstr "AVI, 2x Audio"
 
-#: avidemux/ADM_editor/ADM_outputfmt.h:44
+#: avidemux/ADM_editor/ADM_outputfmt.h:45
 msgid "AVI, pack VOP"
 msgstr "AVI, gepacktes VOP"
 
-#: avidemux/ADM_editor/ADM_outputfmt.h:45
+#: avidemux/ADM_editor/ADM_outputfmt.h:46
 msgid "AVI, unpack VOP"
 msgstr "AVI, ungepacktes VOP"
 
-#: avidemux/ADM_editor/ADM_outputfmt.h:46
+#: avidemux/ADM_editor/ADM_outputfmt.h:47
 msgid "MPEG-PS (A+V)"
 msgstr "MPEG-PS (A+V)"
 
-#: avidemux/ADM_editor/ADM_outputfmt.h:47
+#: avidemux/ADM_editor/ADM_outputfmt.h:48
 msgid "MPEG-TS (A+V)"
 msgstr "MPEG-TS (A+V)"
 
-#: avidemux/ADM_editor/ADM_outputfmt.h:48
+#: avidemux/ADM_editor/ADM_outputfmt.h:49
 msgid "MPEG video"
 msgstr "MPEG Video"
 
-#: avidemux/ADM_editor/ADM_outputfmt.h:49
-#: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:504
-#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:130
+#: avidemux/ADM_editor/ADM_outputfmt.h:50
+#: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:494
+#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:120
 msgid "MP4"
 msgstr "MP4"
 
-#: avidemux/ADM_editor/ADM_outputfmt.h:50
-#: avidemux/ADM_outputs/oplug_ogm/op_ogsave.cpp:120
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:519
-msgid "OGM"
-msgstr "OGM"
-
 #: avidemux/ADM_editor/ADM_outputfmt.h:51
-#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:129
-msgid "PSP"
-msgstr "PSP"
+msgid "MP4 (PSP)"
+msgstr "MP4 (PSP)"
 
 #: avidemux/ADM_editor/ADM_outputfmt.h:52
-#: avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp:187
-#: avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp:254
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:505
+#: avidemux/ADM_outputs/oplug_ogm/op_ogsave.cpp:108
+msgid "OGM"
+msgstr "OGM"
+
+#: avidemux/ADM_editor/ADM_outputfmt.h:53
+#: avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp:179
+#: avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp:246
 msgid "FLV"
 msgstr "FLV"
 
-#: avidemux/ADM_editor/ADM_outputfmt.h:53
-#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:131
+#: avidemux/ADM_editor/ADM_outputfmt.h:54
+#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:121
 msgid "MKV"
 msgstr "MKV"
 
-#: avidemux/ADM_editor/ADM_outputfmt.h:54
+#: avidemux/ADM_editor/ADM_outputfmt.h:55
 msgid "DUMMY"
 msgstr "DUMMY"
 
-#: avidemux/ADM_encoder/ADM_encCodecDesc.h:13
+#: avidemux/ADM_encoder/adm_encmpeg2enc.h:58
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:509
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:47
+msgid "MPEG"
+msgstr "MPEG"
+
+#: avidemux/ADM_encoder/adm_encyv12.h:70
+msgid "YV12"
+msgstr "YV12"
+
+#: avidemux/ADM_encoder/adm_encmjpeg.h:61
+msgid "MJPEG"
+msgstr "MJPEG"
+
+#: avidemux/ADM_encoder/adm_encxvid.h:61
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp:127
+msgid "Xvid"
+msgstr "Xvid"
+
+#: avidemux/ADM_encoder/adm_encXvid4.h:63
+msgid "Xvid4"
+msgstr "Xvid4"
+
+#: avidemux/ADM_encoder/adm_encffmpeg.h:48
+msgid "LavCodec"
+msgstr "LavCodec"
+
+#: avidemux/ADM_encoder/adm_encdivx.h:53
+msgid "DivX"
+msgstr "DivX"
+
+#: avidemux/ADM_encoder/ADM_encCodecDesc.h:14
 msgid "YV12 (raw)"
 msgstr "YV12 (raw)"
 
-#: avidemux/ADM_encoder/ADM_encCodecDesc.h:111
+#: avidemux/ADM_encoder/ADM_encCodecDesc.h:112
 msgid "H.263 (lavc)"
 msgstr "H.263 (lavc)"
 
-#: avidemux/ADM_encoder/ADM_encCodecDesc.h:127
+#: avidemux/ADM_encoder/ADM_encCodecDesc.h:128
 msgid "H.263+ (lavc)"
 msgstr "H.263+ (lavc)"
 
-#: avidemux/ADM_encoder/ADM_encCodecDesc.h:143
+#: avidemux/ADM_encoder/ADM_encCodecDesc.h:144
 msgid "MPEG-4 ASP (lavc)"
 msgstr "MPEG-4 ASP (lavc)"
 
-#: avidemux/ADM_encoder/ADM_encCodecDesc.h:159
+#: avidemux/ADM_encoder/ADM_encCodecDesc.h:160
 msgid "DV (lavc)"
 msgstr "DV (lavc)"
 
-#: avidemux/ADM_encoder/ADM_encCodecDesc.h:175
+#: avidemux/ADM_encoder/ADM_encCodecDesc.h:176
 msgid "FLV1 (lavc)"
 msgstr "FLV1 (lavc)"
 
-#: avidemux/ADM_encoder/ADM_encCodecDesc.h:191
+#: avidemux/ADM_encoder/ADM_encCodecDesc.h:192
 msgid "Snow (lavc)"
 msgstr "Snow (lavc)"
 
-#: avidemux/ADM_encoder/ADM_encCodecDesc.h:207
+#: avidemux/ADM_encoder/ADM_encCodecDesc.h:208
 msgid "FF Huffyuv (lavc)"
 msgstr "FF Huffyuv (lavc)"
 
-#: avidemux/ADM_encoder/ADM_encCodecDesc.h:223
+#: avidemux/ADM_encoder/ADM_encCodecDesc.h:224
 msgid "Huffyuv (lavc)"
 msgstr "Huffyuv (lavc)"
 
-#: avidemux/ADM_encoder/ADM_encCodecDesc.h:239
+#: avidemux/ADM_encoder/ADM_encCodecDesc.h:240
 msgid "FFV1 (lavc)"
 msgstr "FFV1 (lavc)"
 
-#: avidemux/ADM_encoder/ADM_encCodecDesc.h:257
+#: avidemux/ADM_encoder/ADM_encCodecDesc.h:258
 msgid "MJPEG (lavc)"
 msgstr "MJPEG (lavc)"
 
-#: avidemux/ADM_encoder/ADM_encCodecDesc.h:272
-msgid "Y800 (lavc)"
-msgstr ""
-
-#: avidemux/ADM_encoder/ADM_encCodecDesc.h:332
+#: avidemux/ADM_encoder/ADM_encCodecDesc.h:315
 msgid "VCD (lavc)"
 msgstr "VCD (lavc)"
 
-#: avidemux/ADM_encoder/ADM_encCodecDesc.h:392
+#: avidemux/ADM_encoder/ADM_encCodecDesc.h:375
 msgid "DVD (lavc)"
 msgstr "DVD (lavc)"
 
-#: avidemux/ADM_encoder/ADM_encCodecDesc.h:452
+#: avidemux/ADM_encoder/ADM_encCodecDesc.h:435
 msgid "SVCD (lavc)"
 msgstr "SVCD (lavc)"
 
-#: avidemux/ADM_encoder/ADM_encCodecDesc.h:479
+#: avidemux/ADM_encoder/ADM_encCodecDesc.h:462
 msgid "VCD (mpeg2enc)"
 msgstr "VCD (mpeg2enc)"
 
-#: avidemux/ADM_encoder/ADM_encCodecDesc.h:511
+#: avidemux/ADM_encoder/ADM_encCodecDesc.h:494
 msgid "SVCD (mpeg2enc)"
 msgstr "SVCD (mpeg2enc)"
 
-#: avidemux/ADM_encoder/ADM_encCodecDesc.h:530
+#: avidemux/ADM_encoder/ADM_encCodecDesc.h:513
 msgid "MPEG-2 requant"
 msgstr "MPEG-2 requant"
 
-#: avidemux/ADM_encoder/ADM_encCodecDesc.h:557
+#: avidemux/ADM_encoder/ADM_encCodecDesc.h:540
 msgid "DVD (mpeg2enc)"
 msgstr "DVD (mpeg2enc)"
 
-#: avidemux/ADM_encoder/ADM_encCodecDesc.h:689
+#: avidemux/ADM_encoder/ADM_encCodecDesc.h:672
 msgid "MPEG-4 ASP (Xvid4)"
 msgstr "MPEG-4 ASP (Xvid4)"
 
-#: avidemux/ADM_encoder/ADM_encCodecDesc.h:833
-msgid "MPEG-4 AVC (x264)"
-msgstr "MPEG-4 AVC (x264)"
-
-#: avidemux/ADM_encoder/ADM_encCodecDesc.h:850
+#: avidemux/ADM_encoder/ADM_encCodecDesc.h:689
 msgid "dummy"
 msgstr "dummy"
 
-#: avidemux/ADM_encoder/ADM_encCodecDesc.h:853
-#: avidemux/ADM_encoder/adm_encCopy.cpp:94
-#: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:282
-#: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:378
-#: avidemux/ADM_outputs/oplug_dummy/oplug_dummy.cpp:143
-#: avidemux/ADM_outputs/oplug_dummy/oplug_dummy.cpp:175
-#: avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp:190
-#: avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp:236
-#: avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp:257
-#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:165
-#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:257
-#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:278
-#: avidemux/ADM_outputs/oplug_mpeg/op_mpegpass.cpp:221
-#: avidemux/ADM_outputs/oplug_mpeg/op_mpegpass.cpp:225
-#: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:379
-#: avidemux/ADM_outputs/oplug_ogm/op_ogaudio.cpp:90
-#: avidemux/ADM_outputs/oplug_ogm/op_ogsavecopy.cpp:69
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1082
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1122
+#: avidemux/ADM_encoder/ADM_encCodecDesc.h:692
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1084
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1124
+#: avidemux/ADM_outputs/oplug_dummy/oplug_dummy.cpp:136
+#: avidemux/ADM_outputs/oplug_dummy/oplug_dummy.cpp:168
+#: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:272
+#: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:368
+#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:155
+#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:243
+#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:255
+#: avidemux/ADM_outputs/oplug_ogm/op_ogaudio.cpp:86
+#: avidemux/ADM_outputs/oplug_ogm/op_ogsavecopy.cpp:55
+#: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:365
+#: avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp:182
+#: avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp:228
+#: avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp:249
+#: avidemux/ADM_outputs/oplug_mpeg/op_mpegpass.cpp:173
+#: avidemux/ADM_outputs/oplug_mpeg/op_mpegpass.cpp:177
+#: avidemux/ADM_encoder/adm_encCopy.cpp:85
 msgid "Copy"
 msgstr "Kopie"
 
-#: avidemux/ADM_encoder/adm_encdivx.h:53
-msgid "DivX"
-msgstr "DivX"
-
-#: avidemux/ADM_encoder/adm_encffmpeg.h:48
-msgid "LavCodec"
-msgstr "LavCodec"
-
-#: avidemux/ADM_encoder/adm_encmjpeg.h:61
-msgid "MJPEG"
-msgstr "MJPEG"
-
-#: avidemux/ADM_encoder/adm_encmpeg2enc.h:58
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:61
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:523
-msgid "MPEG"
-msgstr "MPEG"
-
-#: avidemux/ADM_encoder/adm_encx264.h:67
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp:130
-msgid "x264"
-msgstr "x264"
-
-#: avidemux/ADM_encoder/adm_encxvid.h:61
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp:129
-msgid "Xvid"
-msgstr "Xvid"
-
-#: avidemux/ADM_encoder/adm_encXvid4.h:63
-msgid "Xvid4"
-msgstr "Xvid4"
-
-#: avidemux/ADM_encoder/adm_ency800.h:58
-msgid "Y800"
-msgstr ""
-
-#: avidemux/ADM_encoder/adm_encyv12.h:70
-msgid "YV12"
-msgstr "YV12"
-
-#: avidemux/ADM_audio/audiotimeline.cpp:85
-#: avidemux/ADM_audio/audiotimeline.cpp:96
-msgid "Building VBR map"
-msgstr "Erstelle VBR Zeitkarte"
-
 #: avidemux/ADM_audiocodec/ADM_codecwma.cpp:88
-#: avidemux/ADM_audiocodec/ADM_codecwma.cpp:200
 msgid "Internal error"
 msgstr "Interner Fehler"
 
@@ -242,3153 +218,1017 @@
 msgid "Cannot open WMA2 codec."
 msgstr "WMA2 Codec kann nicht ge?ffnet werden."
 
-#: avidemux/ADM_audiocodec/ADM_codecwma.cpp:200
-msgid "Cannot open AMR codec."
-msgstr "AMR Codec kann nicht ge?ffnet werden."
+#: avidemux/ADM_UIs/ADM_GTK/src/DIA_filesel.cpp:119
+#: avidemux/ADM_UIs/ADM_GTK/src/DIA_filesel.cpp:279
+msgid "_Browse..."
+msgstr "_Auflisten..."
 
-#: avidemux/ADM_audiodevice/ADM_deviceoss.cpp:118
-msgid "Could not open OSS audio device"
-msgstr "OSS Audio-Ger?t kann nicht ge?ffnet werden"
+#: avidemux/ADM_UIs/ADM_GTK/src/FAC_bitrate.cpp:111
+msgid "_Encoding mode:"
+msgstr "Kodi_er-Modus:"
 
-#: avidemux/ADM_audiodevice/ADM_deviceoss.cpp:118
-msgid "Check the permissions for /dev/dsp."
-msgstr "Pr?fe die Rechte f?r /dev/dsp."
+#: avidemux/ADM_UIs/ADM_GTK/src/FAC_bitrate.cpp:121
+#: avidemux/ADM_UIs/ADM_GTK/src/FAC_bitrate.cpp:283
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flv1.cpp:36
+msgid "_Bitrate (kb/s):"
+msgstr "_Bitrate (kb/s):"
 
-#: avidemux/ADM_audiofilter/audioencoder_lame.cpp:220
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:104
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:297
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:103
-msgid "Stereo"
-msgstr "Stereo"
+#: avidemux/ADM_UIs/ADM_GTK/src/FAC_bitrate.cpp:135
+msgid "Single pass - bitrate"
+msgstr "Einfach-Durchlauf - Bitrate"
 
-#: avidemux/ADM_audiofilter/audioencoder_lame.cpp:221
-msgid "Joint stereo"
-msgstr "Stereo verbunden"
+#: avidemux/ADM_UIs/ADM_GTK/src/FAC_bitrate.cpp:137
+msgid "Single pass - constant quality"
+msgstr "Einfach-Durchlauf - konstanter Quantizer"
 
-#: avidemux/ADM_audiofilter/audioencoder_lame.cpp:222
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:103
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:100
-msgid "Mono"
-msgstr "Mono"
+#: avidemux/ADM_UIs/ADM_GTK/src/FAC_bitrate.cpp:139
+msgid "Single pass - same qz as input"
+msgstr "Einfach-Durchlauf - gleicher Quantizer wie Eingang"
 
-#: avidemux/ADM_audiofilter/audioencoder_lame.cpp:224
-msgid "C_hannel mode:"
-msgstr "Ka_nal Modus:"
+#: avidemux/ADM_UIs/ADM_GTK/src/FAC_bitrate.cpp:141
+msgid "Single pass - Average quantizer"
+msgstr "Einfach-Durchlauf - durchschnittl. Quantizer"
 
-#: avidemux/ADM_audiofilter/audioencoder_lame.cpp:227
-msgid "CBR"
-msgstr "CBR"
+#: avidemux/ADM_UIs/ADM_GTK/src/FAC_bitrate.cpp:144
+msgid "Two pass - video size"
+msgstr "Zweifach-Durchlauf - Videogr??e"
 
-#: avidemux/ADM_audiofilter/audioencoder_lame.cpp:228
-msgid "ABR"
-msgstr "ABR"
+#: avidemux/ADM_UIs/ADM_GTK/src/FAC_bitrate.cpp:146
+msgid "Two pass - average bitrate"
+msgstr "Zweifach-Durchlauf - durchschnittl. Bitrate"
 
-#: avidemux/ADM_audiofilter/audioencoder_lame.cpp:230
-msgid "Extreme"
-msgstr "Extrem"
+#: avidemux/ADM_UIs/ADM_GTK/src/FAC_bitrate.cpp:288
+msgid "_Quantizer:"
+msgstr "_Quantizer:"
 
-#: avidemux/ADM_audiofilter/audioencoder_lame.cpp:233
-msgid "Bit_rate mode:"
-msgstr "Bit_rate Modus:"
+#: avidemux/ADM_UIs/ADM_GTK/src/FAC_bitrate.cpp:293
+msgid "A_vg Quantizer:"
+msgstr "Durchs_chnittl. Quantizer:"
 
-#: avidemux/ADM_audiofilter/audioencoder_lame.cpp:246
-#: avidemux/ADM_audiofilter/audioencoder_vorbis.cpp:288
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioconfig.cpp:52
-msgid "_Bitrate:"
-msgstr "_Bitrate (kb/s):"
+#: avidemux/ADM_UIs/ADM_GTK/src/FAC_bitrate.cpp:298
+msgid "_Video size (MB):"
+msgstr "_Video Gr??e (MB):"
 
-#: avidemux/ADM_audiofilter/audioencoder_lame.cpp:251
-#: avidemux/ADM_audiofilter/audioencoder_vorbis.cpp:290
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_mjpeg.cpp:36
-#: avidemux/ADM_videoFilter/ADM_vidDecDec.cpp:204
-msgid "_Quality:"
-msgstr "Qualit?t:"
+#: avidemux/ADM_UIs/ADM_GTK/src/FAC_bitrate.cpp:303
+msgid "_Average bitrate (kb/s):"
+msgstr "Durchschnittl. Bitr_ate (kb/s):"
 
-#: avidemux/ADM_audiofilter/audioencoder_lame.cpp:252
-msgid "_Disable reservoir"
-msgstr ""
+#: avidemux/ADM_UIs/ADM_GTK/src/FAC_bitrate.cpp:308
+msgid "-"
+msgstr "-"
 
-#: avidemux/ADM_audiofilter/audioencoder_lame.cpp:256
-msgid "LAME Configuration"
-msgstr "LAME Konfiguration"
+#: avidemux/ADM_UIs/ADM_GTK/src/FAC_threadCount.cpp:87
+msgid "Disable"
+msgstr "Deaktivieren"
 
-#: avidemux/ADM_audiofilter/audioencoder_vorbis.cpp:271
-msgid "VBR"
-msgstr "VBR"
+#: avidemux/ADM_UIs/ADM_GTK/src/FAC_threadCount.cpp:91
+msgid "Auto-detect"
+msgstr "Auto-Erkennung"
 
-#: avidemux/ADM_audiofilter/audioencoder_vorbis.cpp:272
-msgid "Quality based"
-msgstr "qualit?tsbasiert"
+#: avidemux/ADM_UIs/ADM_GTK/src/FAC_threadCount.cpp:99
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:549
+msgid "Custom"
+msgstr "Individuell"
 
-#: avidemux/ADM_audiofilter/audioencoder_vorbis.cpp:274
-#: avidemux/ADM_videoFilter/ADM_vidDecDec.cpp:203
-#: avidemux/ADM_videoFilter/ADM_vidDGbob.cpp:91
-#: avidemux/ADM_videoFilter/ADM_vidMcDeint.cpp:111
-#: avidemux/ADM_videoFilter/ADM_vidYadif.cpp:179
-msgid "_Mode:"
-msgstr "_Modus:"
+#: avidemux/ADM_UIs/ADM_GTK/src/DIA_color.cpp:51
+msgid "Select Color"
+msgstr "Farbe ausw?hlen"
 
-#: avidemux/ADM_audiofilter/audioencoder_vorbis.cpp:297
-msgid "Vorbis Configuration"
-msgstr "Vorbis Konfiguration"
+#: avidemux/ADM_UIs/ADM_GTK/src/FAC_hex.cpp:103
+#: avidemux/ADM_UIs/ADM_GTK/src/FAC_hex.cpp:137
+msgid "_Previous"
+msgstr "_Vorheriges"
 
-#: avidemux/ADM_audiofilter/audiofilter_buildchain.cpp:322
-#: avidemux/gui_autodrive.cpp:62 avidemux/gui_autodrive.cpp:72
-#: avidemux/gui_autodrive.cpp:113 avidemux/gui_autodrive.cpp:128
-#: avidemux/gui_autodrive.cpp:155 avidemux/gui_autodrive.cpp:189
+#: avidemux/ADM_UIs/ADM_GTK/src/FAC_hex.cpp:111
+#: avidemux/ADM_UIs/ADM_GTK/src/FAC_hex.cpp:167
+msgid "_Next"
+msgstr "_N?chstes"
+
+#: avidemux/ADM_audiofilter/audiofilter_buildchain.cpp:290
+#: avidemux/gui_autodrive.cpp:64
+#: avidemux/gui_autodrive.cpp:78
+#: avidemux/gui_autodrive.cpp:109
+#: avidemux/gui_autodrive.cpp:115
+#: avidemux/gui_autodrive.cpp:130
+#: avidemux/gui_autodrive.cpp:157
+#: avidemux/gui_autodrive.cpp:192
 msgid "Codec Error"
 msgstr "Codec Fehler"
 
-#: avidemux/ADM_audiofilter/audiofilter_buildchain.cpp:322
+#: avidemux/ADM_audiofilter/audiofilter_buildchain.cpp:290
 msgid ""
-"The number of channels is greater than what the selected audio codec can "
-"do.\n"
+"The number of channels is greater than what the selected audio codec can do.\n"
 "Either change codec or use the mixer filter to have less channels."
 msgstr ""
-"Die Anzahl Kan?le ist gr??er als vom gew?hlten Audio Codec verarbeiten "
-"kann.\n"
-"?ndere entweder den Codec oder benutze den Mixer-Filter, um weniger Kan?le "
-"zu haben."
+"Die Anzahl Kan?le ist gr??er als vom gew?hlten Audio Codec verarbeiten kann.\n"
+"?ndere entweder den Codec oder benutze den Mixer-Filter, um weniger Kan?le zu haben."
 
-#: avidemux/ADM_audiofilter/audiofilter_buildchain.cpp:417
-msgid "Encoder initialization failed"
-msgstr "Fehler beim Initialisieren des Encoders"
+#: avidemux/ADM_audiofilter/audiofilter_buildchain.cpp:301
+msgid "[BuildChain] Encoder initialization failed"
+msgstr "[BuildChain] Fehler beim Initialisieren des Encoders"
 
-#: avidemux/ADM_audiofilter/audiofilter_buildchain.cpp:417
+#: avidemux/ADM_audiofilter/audiofilter_buildchain.cpp:301
 msgid "Not activated."
 msgstr "Nicht aktiviert."
 
-#: avidemux/ADM_codecs/ADM_ffmp43.cpp:45
-msgid "Internal error finding codec '"
-msgstr ""
-
-#: avidemux/ADM_codecs/ADM_ffmpeg.cpp:49
-msgid "Internal error opening codec"
-msgstr "Interner Fehler beim ?ffnen eines Codec"
-
-#: avidemux/ADM_codecs/ADM_ffmpeg.cpp:52
-msgid "Internal error with context for  codec"
-msgstr "Interner Fehler mit Kontext f?r Codec"
-
-#: avidemux/ADM_editor/ADM_edFrameType.cpp:58
-msgid "No video loaded"
-msgstr "Kein Video geladen"
-
-#: avidemux/ADM_editor/ADM_edFrameType.cpp:63
-msgid "Not indexable"
-msgstr "Nicht indizierbar"
-
-#: avidemux/ADM_editor/ADM_edFrameType.cpp:63
-msgid "DivX 5 + packed?"
-msgstr "DivX 5 + packed?"
-
-#: avidemux/ADM_editor/ADM_edFrameType.cpp:93
-msgid "Rebuilding Frames"
-msgstr "Bilder neu aufbauen"
-
-#: avidemux/ADM_editor/ADM_edFrameType.cpp:129
-msgid "Aborted"
-msgstr "Abgebrochen"
-
-#: avidemux/ADM_editor/ADM_edit.cpp:82
-msgid ""
-"Avidemux detected VBR MP3 audio in this file. For keeping audio/video in "
-"sync, time map is needed. Build it now?\n"
-"\n"
-"You can do it later with \"Audio -> Build VBR Time Map\"."
-msgstr ""
-
-#: avidemux/ADM_editor/ADM_edit.cpp:407
-msgid "File type identified but no loader support detected..."
-msgstr "Dateityp wurde ermittelt, aber keine Ladeunterst?tzung festgestellt."
-
-#: avidemux/ADM_editor/ADM_edit.cpp:408
-msgid "May be related to an old index file."
-msgstr "Es bezieht sich vielleicht auf eine alte Index-Datei."
-
-#: avidemux/ADM_editor/ADM_edit.cpp:415
-#, c-format
-msgid "Attempt to open %s failed!"
-msgstr "Versuch %s zu ?ffnen ist misslungen!"
-
-#: avidemux/ADM_editor/ADM_edit.cpp:439
-msgid ""
-"You cannot mix different video dimensions yet. Using the partial video "
-"filter later, will not work around this problem. The workaround is:\n"
-"1.) \"resize\" / \"add border\" / \"crop\" each stream to the same "
-"resolution\n"
-"2.) concatinate them together"
-msgstr ""
-"Es k?nnen nicht verschiedene Video-Dimensionen vermischt werden. Die sp?tere "
-"Verwendung des partiellen Videofilters l?st nicht das Problem. Abhilfe:\n"
-"1.) Gr??e ?ndern / Rand hinzuf?gen / Zuschneiden mit jedem Videostream bei "
-"gleicher Aufl?sung\n"
-"2.) Zusammenh?ngen aller erstellen Videostreams"
-
-#: avidemux/ADM_editor/ADM_edit.cpp:551
-msgid "Build Time Map"
-msgstr "Erstelle VBR Zeitkarte"
-
-#: avidemux/ADM_editor/ADM_edit.cpp:551
-msgid "Build VBR time map?"
-msgstr "VBR Zeitkarte erstellen?"
-
-#: avidemux/ADM_editor/ADM_edit.cpp:585
-msgid "Use safe mode"
-msgstr "Sicheren Modus benutzen"
-
-#: avidemux/ADM_editor/ADM_edit.cpp:585
-msgid "H.264 detected"
-msgstr "H.264 gefunden"
-
-#: avidemux/ADM_editor/ADM_edit.cpp:585
-msgid ""
-"If the file is using B-frames as reference it can lead to a crash or "
-"stuttering.\n"
-"Avidemux can use another mode which is safe but YOU WILL LOSE FRAME "
-"ACCURACY.\n"
-"Do you want to use that mode?"
-msgstr ""
-
-#: avidemux/ADM_editor/ADM_edit.cpp:715
-msgid "Packed Bitstream detected"
-msgstr "Gepackten Bitstrom gefunden"
-
-#: avidemux/ADM_editor/ADM_edit.cpp:716
-msgid "Do you want me to unpack it ?"
-msgstr "Soll es entpackt werden ?"
-
-#: avidemux/ADM_editor/ADM_edit.cpp:736
-msgid "Could not unpack the video"
-msgstr "Video konnte nicht entpackt werden"
-
-#: avidemux/ADM_editor/ADM_edit.cpp:736
-msgid "Using backup decoder - not frame accurate."
-msgstr "Backup Dekodierer verwenden - nicht bildgenau."
-
-#: avidemux/ADM_editor/ADM_edit.cpp:741
-msgid "Weird"
-msgstr "Seltsam"
-
-#: avidemux/ADM_editor/ADM_edit.cpp:741
-msgid "The unpacking succeedeed but the index is still not up to date."
-msgstr "Das Entpacken war erfolgreich, aber der Index ist nicht aktuell."
-
-#: avidemux/ADM_editor/ADM_edit.cpp:747
-msgid "Troubles ahead"
-msgstr "Probleme weiter oben"
-
-#: avidemux/ADM_editor/ADM_edit.cpp:747
-msgid "This a VOP packed AVI."
-msgstr "Dies ist ein VOP-gepacktes AVI."
-
-#: avidemux/ADM_editor/ADM_edit.cpp:758
-msgid "Index is not up to date"
-msgstr "Index ist nicht aktuell"
-
-#: avidemux/ADM_editor/ADM_edit.cpp:758
-msgid "You should use Tool->Rebuild frame. Do it now ?"
-msgstr "Werkzeuge -> Bilder neu erstellen sollte verwendet werden. Starten ?"
-
-#: avidemux/ADM_editor/ADM_edit.cpp:1520
-msgid ""
-"This looks like mpeg\n"
-" Do you want to index it?"
-msgstr ""
-"Dies schaut wie Mpeg aus\n"
-"Soll ein Index erstellt werden ?"
-
-#: avidemux/ADM_editor/ADM_edit.cpp:1572
-msgid "Indexing failed"
-msgstr "Indizierung gescheitert"
-
-#: avidemux/ADM_editor/ADM_edLoadSave.cpp:74
-msgid "Unsupported"
-msgstr "Nicht unterst?tzt"
-
-#: avidemux/ADM_editor/ADM_edLoadSave.cpp:298
-msgid "Old format project file"
-msgstr "Projekt-Datei im alten Format"
-
-#: avidemux/ADM_editor/ADM_edLoadSave.cpp:298
-msgid "No more supported."
-msgstr "Nicht mehr unterst?tzt."
-
-#: avidemux/ADM_encoder/adm_encConfig.cpp:192
-msgid "Wrong output format"
-msgstr "Falsches Ausgabeformat"
-
-#: avidemux/ADM_encoder/adm_encConfig.cpp:192
-msgid "Select MPEG as the output."
-msgstr "Mpeg f?r die Ausgabe ausw?hlen."
-
-#: avidemux/ADM_encoder/adm_encConfig.cpp:197
-msgid "Wrong video codec"
-msgstr "Falscher Video Codec"
-
-#: avidemux/ADM_encoder/adm_encConfig.cpp:198
-msgid "Select DVD as the video codec for MPEG TS output."
-msgstr "DVD als Video-Codec f?r die Mpeg TS Ausgabe ausw?hlen."
-
-#: avidemux/ADM_encoder/adm_encConfig.cpp:719
-msgid "Only QCIF and subQCIF are allowed for H.263"
-msgstr "Nur QCIF und subQCIF sind erlaubt f?r H.263"
-
-#: avidemux/ADM_encoder/adm_encConfig.cpp:911
-msgid "Fatal error"
-msgstr "Fataler Fehler"
-
-#: avidemux/ADM_encoder/adm_encffmpeg.cpp:278
-msgid "Incompatible settings"
-msgstr "Inkompatible Einstellungen"
-
-#: avidemux/ADM_encoder/adm_encffmpeg.cpp:278
-msgid "At the moment, the DV codec only accepts 720*576 at 25"
-msgstr "Derzeit akzeptiert der DV Codec nur 720*576 at 25"
-
-#: avidemux/ADM_encoder/adm_encRequant.cpp:101
-msgid "Requant"
-msgstr "Requantisieren"
-
-#: avidemux/ADM_filter/filter_declaration.cpp:54
-msgid "Crop"
-msgstr "Zuschneiden"
-
-#: avidemux/ADM_filter/filter_declaration.cpp:54
-msgid "Remove lines from top/bottom/left/right."
-msgstr "Zeilen von oben/unten/links/rechts entfernen."
-
-#: avidemux/ADM_filter/filter_declaration.cpp:55
-msgid "MPlayer resize"
-msgstr "MPlayer Gr??e ?ndern"
-
-#: avidemux/ADM_filter/filter_declaration.cpp:55
-msgid "Change image size. Faster than Avisynth's Resize."
-msgstr "Bildgr??e ?ndern. Schneller als Avisynth's Gr??en?nderung."
-
-#: avidemux/ADM_filter/filter_declaration.cpp:56
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_resize.cpp:319
-msgid "Resize"
-msgstr "Gr??e ?ndern"
-
-#: avidemux/ADM_filter/filter_declaration.cpp:56
-msgid "Picture resizer ported from Avisynth."
-msgstr "Bildgr??en?nderer, von Avisynth portiert."
-
-#: avidemux/ADM_filter/filter_declaration.cpp:57
-msgid "Add black borders"
-msgstr "Schwarze R?nder addieren"
-
-#: avidemux/ADM_filter/filter_declaration.cpp:57
-msgid "Add pure black border(s). Enlarges the picture."
-msgstr "Reine schwarze R?nder hinzuf?gen. Vergr??ert das Bild."
-
-#: avidemux/ADM_filter/filter_declaration.cpp:58
-msgid "Blacken borders"
-msgstr "Geschw?rzte R?nder"
-
-#: avidemux/ADM_filter/filter_declaration.cpp:58
-msgid "Fill borders with pure black. Doesn't alter size."
-msgstr "R?nder mit reinem Schwarz f?llen. Ver?ndert nicht die Bildgr??e."
-
-#: avidemux/ADM_filter/filter_declaration.cpp:59
-msgid "Vertical flip"
-msgstr "Vertikal spiegeln"
-
-#: avidemux/ADM_filter/filter_declaration.cpp:59
-msgid "Vertically flip the picture."
-msgstr "Bild vertikal spiegeln."
-
-#: avidemux/ADM_filter/filter_declaration.cpp:60
-#: avidemux/ADM_videoFilter/ADM_vidRotate.cpp:269
-msgid "Rotate"
-msgstr "Drehen"
-
-#: avidemux/ADM_filter/filter_declaration.cpp:60
-msgid "Rotate the picture by 90, 180 or 270 degrees."
-msgstr "Bild um 90, 180 oder 270 Grad drehen."
-
-#: avidemux/ADM_filter/filter_declaration.cpp:62
-#: avidemux/ADM_videoFilter/ADM_vidResampleFPS.cpp:90
-msgid "Resample fps"
-msgstr "Resample Bilder/s (Hz)"
-
-#: avidemux/ADM_filter/filter_declaration.cpp:62
-msgid "Change framerate while keeping duration."
-msgstr "Bildrate ?ndern w?hrend die Zeitdauer erhalten bleibt."
-
-#: avidemux/ADM_filter/filter_declaration.cpp:63
-msgid "Reverse"
-msgstr "Umdrehen"
-
-#: avidemux/ADM_filter/filter_declaration.cpp:63
-msgid "Play video backward."
-msgstr "Video r?ckw?rts abspielen."
-
-#: avidemux/ADM_filter/filter_declaration.cpp:64
-#: avidemux/ADM_videoFilter/ADM_vidFade.cpp:78
-msgid "Fade"
-msgstr "Ein-/Ausblenden"
-
-#: avidemux/ADM_filter/filter_declaration.cpp:64
-msgid "Fade in/out."
-msgstr "Ein-/Ausblenden."
-
-#: avidemux/ADM_filter/filter_declaration.cpp:70
-#: avidemux/ADM_videoFilter/ADM_vidYadif.cpp:184
-msgid "yadif"
-msgstr "yadif (Yet Another DeInterlacing Filter)"
-
-#: avidemux/ADM_filter/filter_declaration.cpp:70
-msgid "Yet Another DeInterlacer. Ported from MPlayer."
-msgstr "Noch ein weiterer Halbbildmodus-Filter. Portiert vom MPlayer."
-
-#: avidemux/ADM_filter/filter_declaration.cpp:71
-#: avidemux/ADM_videoFilter/ADM_vidMcDeint.cpp:117
-msgid "mcDeinterlace"
-msgstr "mc-Halbbildmodus"
-
-#: avidemux/ADM_filter/filter_declaration.cpp:71
-msgid "Motion compensation deinterlacer. Ported from MPlayer."
-msgstr "Bewegungskompensierter Halbbildmodus-Filter. Portiert vom MPlayer."
-
-#: avidemux/ADM_filter/filter_declaration.cpp:72
-msgid "Deinterlace"
-msgstr "Halbbildmodus"
-
-#: avidemux/ADM_filter/filter_declaration.cpp:72
-msgid "Mask interlacing artifacts. Port of Smart deinterlace."
-msgstr ""
-"Maskieren von Halbbildmodus-Artifakten. Portierung von \"Smart deinterlace\"."
-
-#: avidemux/ADM_filter/filter_declaration.cpp:73
-#: avidemux/ADM_videoFilter/ADM_vidKernelDeint.cpp:100
-msgid "KernelDeint"
-msgstr "Filter-Halbbildmodus"
-
-#: avidemux/ADM_filter/filter_declaration.cpp:73
-msgid "Kernel deinterlacer by Donald Graft."
-msgstr "Halbbildmodus-Filter von Donald Graft."
-
-#: avidemux/ADM_filter/filter_declaration.cpp:74
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:121
-msgid "TDeint"
-msgstr "TDeint"
-
-#: avidemux/ADM_filter/filter_declaration.cpp:74
-msgid "Motion adaptative deinterlacer by Tritical."
-msgstr "Bewegungsangepasster Halbbildmodus-Filter von Tritical."
-
-#: avidemux/ADM_filter/filter_declaration.cpp:75
-#: avidemux/ADM_videoFilter/ADM_lavpp_deint.cpp:119
-msgid "libavcodec deinterlacer"
-msgstr "libavcodec Halbbildmodus-Filter"
-
-#: avidemux/ADM_filter/filter_declaration.cpp:75
-msgid "All FFmpeg deinterlace filters (bicubic, median, ...)."
-msgstr "Alle FFmeg Halbbildmodus-Filter (Bikubisch, Mittelwert, ...)."
-
-#: avidemux/ADM_filter/filter_declaration.cpp:76
-#: avidemux/ADM_videoFilter/ADM_vidDecTelecide.cpp:131
-msgid "Decomb Telecide"
-msgstr "Decomb Telecide"
-
-#: avidemux/ADM_filter/filter_declaration.cpp:76
-msgid "Great deinterlacing package including IVTC."
-msgstr "Gro?es Halbbildmodus-Paket, beinhaltet IVTC."
-
-#: avidemux/ADM_filter/filter_declaration.cpp:77
-#: avidemux/ADM_videoFilter/ADM_vidDecDec.cpp:211
-msgid "Decomb Decimate"
-msgstr "Decomb Decimate"
-
-#: avidemux/ADM_filter/filter_declaration.cpp:77
-msgid "Useful to remove dupes left by Telecide."
-msgstr "N?tzlich, um verbliebene Duplikate von Telecide zu entfernen."
-
-# Einzelbilder des Films werden abwechselnd zweifach und dreifach aufgezeichnet, so da? sich aus je zwei Einzelbildern des Films immer f?nf Fernseh-Halbbilder ergeben.
-# 59,94 Hz vertikal -> 60 Halbbilder
-#: avidemux/ADM_filter/filter_declaration.cpp:78
-msgid "Pulldown"
-msgstr "3:2 Pulldown"
-
-#: avidemux/ADM_filter/filter_declaration.cpp:78
-msgid "Convert 24 fps to 30 fps by repeating fields."
-msgstr ""
-"Konvertieren von 24 Bilder/s nach 30 Bilder/s durch Wiederholen von Feldern."
-
-#: avidemux/ADM_filter/filter_declaration.cpp:80
-msgid "Bobber - convert each field into a full sized frame."
-msgstr "Bobber - konvertiert jedes Feld in ein Ganzbild (\"full sized\")"
-
-#: avidemux/ADM_filter/filter_declaration.cpp:82
-msgid "PAL field shift"
-msgstr "PAL Feldverschiebung"
-
-#: avidemux/ADM_filter/filter_declaration.cpp:82
-msgid "Shift fields by one. Useful for some PAL movies."
-msgstr "Verschiebt Felder in einem Schritt. N?tzlich f?r einige PAL Filme."
-
-#: avidemux/ADM_filter/filter_declaration.cpp:83
-msgid "PAL smart"
-msgstr "PAL schnell"
-
-#: avidemux/ADM_filter/filter_declaration.cpp:83
-msgid "Smartly revert non constant PAL field shift."
-msgstr "Elegante R?cknahme von nicht-stabiler PAL-Felder-Verschiebung."
-
-#: avidemux/ADM_filter/filter_declaration.cpp:88
-msgid "Drop"
-msgstr "Entfernen"
-
-#: avidemux/ADM_filter/filter_declaration.cpp:88
-msgid "Drop damaged fields (e.g. from VHS capture)."
-msgstr "Entferne besch?digte Felder (z. B. von VHS Aufnahmen)."
-
-#: avidemux/ADM_filter/filter_declaration.cpp:89
-msgid "Swap fields"
-msgstr "Felder tauschen"
-
-#: avidemux/ADM_filter/filter_declaration.cpp:89
-msgid "Swap top and bottom fields."
-msgstr "Obere mit unteren Feldern tauschen."
-
-#: avidemux/ADM_filter/filter_declaration.cpp:90
-msgid "Smart swap fields"
-msgstr "Schnell Felder tauschen"
-
-#: avidemux/ADM_filter/filter_declaration.cpp:90
-msgid "Smartly swap fields. Needed when field order changes."
-msgstr ""
-"Elegante Zwischenspeicherung von Feldern. Wird ben?tigt, wenn sich die "
-"Felder-Reihenfolge ?ndert."
-
-#: avidemux/ADM_filter/filter_declaration.cpp:92
-msgid "Keep even fields"
-msgstr "Gerade Felder erhalten"
-
-#: avidemux/ADM_filter/filter_declaration.cpp:92
-msgid "Keep top fields. Gives a half height picture."
-msgstr "Obere Felder erhalten. Ergibt ein halbhohes Bild."
-
-#: avidemux/ADM_filter/filter_declaration.cpp:93
-msgid "Keep odd fields"
-msgstr "Ungerade Felder erhalten"
-
-#: avidemux/ADM_filter/filter_declaration.cpp:93
-msgid "Keep bottom fileds. Gives a half height picture."
-msgstr "Untere Felder erhalten. Ergibt ein halbhohes Bild."
-
-#: avidemux/ADM_filter/filter_declaration.cpp:94
-msgid "Separate fields"
-msgstr "Felder trennen"
-
-#: avidemux/ADM_filter/filter_declaration.cpp:94
-msgid "Each field becomes full picture, half sized."
-msgstr "Jedes Feld wird zu einem Vollbild mit halber Gr??e."
-
-#: avidemux/ADM_filter/filter_declaration.cpp:95
-msgid "Merge fields"
-msgstr "Felder verschmelzen"
-
-#: avidemux/ADM_filter/filter_declaration.cpp:95
-msgid "Merge two pictures as if they were two fields."
-msgstr "Zwei Bilder verschmelzen, so als ob es zwei Felder w?ren."
-
-#: avidemux/ADM_filter/filter_declaration.cpp:98
-msgid "Hz Stack fields"
-msgstr "Hz Stapel-Felder"
-
-#: avidemux/ADM_filter/filter_declaration.cpp:98
-msgid "Put botj fields side by side."
-msgstr "botj Felder nebeneinander setzen."
-
-#: avidemux/ADM_filter/filter_declaration.cpp:101
-msgid "Stack fields"
-msgstr "Felder sammeln"
-
-#: avidemux/ADM_filter/filter_declaration.cpp:101
-msgid "Put two fields on top of one another."
-msgstr "Zwei Felder ?ber ein ein anderes."
-
-#: avidemux/ADM_filter/filter_declaration.cpp:102
-msgid "Unstack fields"
-msgstr "Felder zur?ck geben"
-
-#: avidemux/ADM_filter/filter_declaration.cpp:102
-msgid "Interleave top and bottom part of the picture."
-msgstr "Oberen und unteren Teil des Bildes ?berlappen."
-
-#: avidemux/ADM_filter/filter_declaration.cpp:106
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_eq2.cpp:209
-msgid "MPlayer eq2"
-msgstr "MPlayer eq2"
-
-#: avidemux/ADM_filter/filter_declaration.cpp:106
-msgid "Adjust contrast, brightness, saturation and gamma."
-msgstr "Kontrast, Helligkeit, S?ttigung und Gammawert einstellen."
-
-#: avidemux/ADM_filter/filter_declaration.cpp:107
-msgid "MPlayer hue"
-msgstr "MPlayer Farbton"
-
-#: avidemux/ADM_filter/filter_declaration.cpp:107
-msgid "Adjust hue and saturation."
-msgstr "Farbton und S?ttigung einstellen."
-
-#: avidemux/ADM_filter/filter_declaration.cpp:108
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_coloryuv.cpp:183
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_contrast.cpp:76
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_contrast.cpp:198
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_contrast.cpp:216
-msgid "Contrast"
-msgstr "Kontrast"
-
-#: avidemux/ADM_filter/filter_declaration.cpp:108
-msgid "Adjust contrast, brightness and colors."
-msgstr "Kontrast, Helligkeit und Farben einstellen."
-
-#: avidemux/ADM_filter/filter_declaration.cpp:109
-msgid "Luma equalizer"
-msgstr "Brillianz Equalizer"
-
-#: avidemux/ADM_filter/filter_declaration.cpp:109
-msgid "Luma correction filter with histogram."
-msgstr "Brillianz-Korrekturfilter mit Histogramm."
-
-#: avidemux/ADM_filter/filter_declaration.cpp:111
-msgid "Swap U and V"
-msgstr "U mit V vertauschen"
-
-#: avidemux/ADM_filter/filter_declaration.cpp:111
-msgid "Invert chroma U and chroma V."
-msgstr "Farbintensit?ten U und V invertieren."
-
-#: avidemux/ADM_filter/filter_declaration.cpp:112
-msgid "Chroma shift"
-msgstr "Farbintensit?t verschieben"
-
-#: avidemux/ADM_filter/filter_declaration.cpp:112
-msgid "Shift chroma U/V to fix badly synced luma/chroma."
-msgstr ""
-"Farbintensit?t U/V verschieben bei schlecht synchronisierter Intensit?t/"
-"Brillianz."
-
-#: avidemux/ADM_filter/filter_declaration.cpp:114
-msgid "Luma only"
-msgstr "nur Brillianz"
-
-#: avidemux/ADM_filter/filter_declaration.cpp:114
-msgid "Convert picture to greyscale (black and white)."
-msgstr "Bild in Graustufenbild umwandeln (schwarz und wei?)."
-
-#: avidemux/ADM_filter/filter_declaration.cpp:115
-msgid "Chroma U only"
-msgstr "nur Farbintensit?t U"
-
-#: avidemux/ADM_filter/filter_declaration.cpp:115
-msgid "Convert picture to grey, keeping only chroma U."
-msgstr ""
-"Bild in Graustufenbild umwandeln, nur die Farbintensit?t U wird erhalten."
-
-#: avidemux/ADM_filter/filter_declaration.cpp:116
-msgid "Chroma V only"
-msgstr "nur Farbintensit?t V"
-
-#: avidemux/ADM_filter/filter_declaration.cpp:116
-msgid "Convert picture to grey, keeping only chroma V."
-msgstr ""
-"Bild in Graustufenbild umwandeln, nur die Farbintensit?t V wird erhalten."
-
-#: avidemux/ADM_filter/filter_declaration.cpp:118
-msgid "Luma delta"
-msgstr "Brillianz-Differenz"
-
-#: avidemux/ADM_filter/filter_declaration.cpp:118
-msgid "Difference between current and previous picture."
-msgstr "Differenz zwischen aktuellen und vorherigem Bild."
-
-#: avidemux/ADM_filter/filter_declaration.cpp:119
-msgid "Avisynth ColorYUV"
-msgstr "Avisynth ColorYUV"
-
-#: avidemux/ADM_filter/filter_declaration.cpp:119
-msgid "Alter colors (auto white balance etc...). Ported from Avisynth."
-msgstr "Farben ?ndern (autom. Wei?-Abgleich usw...). Von Avisynth ?bernommen."
-
-#: avidemux/ADM_filter/filter_declaration.cpp:129
-#: avidemux/ADM_videoFilter/ADM_vidMPLD3Dlow.cpp:78
-msgid "MPlayer denoise3d"
-msgstr "MPlayer denoise3d Rauschfilter"
-
-#: avidemux/ADM_filter/filter_declaration.cpp:129
-msgid "Reduce noise, smooth image, increase compressibility."
-msgstr ""
-"Rauschen reduzieren und Bild gl?tten, erh?ht die Kompressionsf?higkeit."
-
-#: avidemux/ADM_filter/filter_declaration.cpp:130
-#: avidemux/ADM_videoFilter/ADM_vidMPLD3D.cpp:78
-msgid "MPlayer hqdn3d"
-msgstr "MPlayer hqdn3d"
-
-#: avidemux/ADM_filter/filter_declaration.cpp:130
-msgid "High quality version of denoise3d. Slower but more precise."
-msgstr ""
-"Qualitativ hochwertige Version des \"denoise3d\" Rauschfilter. Langsamer, "
-"aber pr?ziser."
-
-#: avidemux/ADM_filter/filter_declaration.cpp:131
-#: avidemux/ADM_videoFilter/ADM_vidFlux.cpp:139
-msgid "FluxSmooth"
-msgstr "FluxSmooth"
-
-#: avidemux/ADM_filter/filter_declaration.cpp:131
-msgid "Spatio-temporal cleaner by Ross Thomas."
-msgstr "R?umlich-zeitliches S?ubern von Ross Thomas."
-
-#: avidemux/ADM_filter/filter_declaration.cpp:133
-#: avidemux/ADM_videoFilter/ADM_vidVlad.cpp:104
-msgid "Temporal Cleaner"
-msgstr "Zeitliches S?ubern"
-
-#: avidemux/ADM_filter/filter_declaration.cpp:133
-msgid "Vlad59's Avisynth port of Jim Casaburi's denoiser."
-msgstr "Vlad59's Avisynth Portierung des Jim-Casaburi's-Rauschfilters."
-
-#: avidemux/ADM_filter/filter_declaration.cpp:135
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filterlist.cpp:173
-#: avidemux/ADM_videoFilter/ADM_vidDenoise.cpp:395
-msgid "Denoise"
-msgstr "Entrauschen"
-
-#: avidemux/ADM_filter/filter_declaration.cpp:135
-msgid "Port of Transcode DNR."
-msgstr "Portierung von Transcode DNR."
-
-#: avidemux/ADM_filter/filter_declaration.cpp:136
-#: avidemux/ADM_videoFilter/ADM_vidStabilize.cpp:64
-msgid "Stabilize"
-msgstr "Stabilisieren"
-
-#: avidemux/ADM_filter/filter_declaration.cpp:136
-msgid "Light denoiser."
-msgstr "Einfacher Rauschfilter."
-
-#: avidemux/ADM_filter/filter_declaration.cpp:138
-msgid "Cnr2"
-msgstr "Cnr2"
-
-#: avidemux/ADM_filter/filter_declaration.cpp:138
-msgid "Chroma noise reduction filter by MarcFD/Tritical."
-msgstr "Farbintensit?ts-Rauschreduktionsfilter von MarcFD/Tritical."
-
-#: avidemux/ADM_filter/filter_declaration.cpp:140
-msgid "MSmooth by Donald Graft"
-msgstr "\"MSmooth\" von Donald Graft"
-
-#: avidemux/ADM_filter/filter_declaration.cpp:140
-msgid "Smooth the image, don't blur edges. Useful on anime."
-msgstr ""
-
-#: avidemux/ADM_filter/filter_declaration.cpp:141
-#: avidemux/ADM_videoFilter/ADM_vidSoften.cpp:74
-msgid "Soften"
-msgstr "Soften"
-
-#: avidemux/ADM_filter/filter_declaration.cpp:141
-msgid "A variant of stabilize."
-msgstr "Eine Stabilisierungsvariante."
-
-#: avidemux/ADM_filter/filter_declaration.cpp:146
-msgid "Sharpen"
-msgstr "Sch?rfen"
-
-#: avidemux/ADM_filter/filter_declaration.cpp:146
-msgid "Enhance difference between near pixels."
-msgstr "Differenz zwischen zwei naheliegenen Pixeln erh?hen."
-
-#: avidemux/ADM_filter/filter_declaration.cpp:147
-#: avidemux/ADM_videoFilter/ADM_vidMSharpen.cpp:172
-msgid "MSharpen"
-msgstr "Sch?rfe erh?hen (MSharpen)"
-
-#: avidemux/ADM_filter/filter_declaration.cpp:147
-msgid "Sharpen edges without amplifying noise. By Donald Graft."
-msgstr "Kanten sch?rfen ohne Verst?rkerraushcen. Von Donald Graft."
-
-#: avidemux/ADM_filter/filter_declaration.cpp:148
-msgid "asharp"
-msgstr "\"asharp\" Sch?rfefilter"
-
-#: avidemux/ADM_filter/filter_declaration.cpp:148
-msgid "Adaptative sharpener by MarcFD."
-msgstr "Angepasster Sch?rfefilter von MarcFD."
-
-#: avidemux/ADM_filter/filter_declaration.cpp:150
-msgid "Gauss smooth"
-msgstr "Gauss'sche Gl?ttung"
-
-#: avidemux/ADM_filter/filter_declaration.cpp:150
-msgid "Gaussian smooth. Blur the picture."
-msgstr "Gauss'sche Gl?ttung. Bild weichzeichnen."
-
-#: avidemux/ADM_filter/filter_declaration.cpp:151
-msgid "Mean"
-msgstr "Durchschnitt"
-
-#: avidemux/ADM_filter/filter_declaration.cpp:151
-msgid "Mean (blur) kernel."
-msgstr "Durchschnittlicher (Weichzeichner-) Filter."
-
-#: avidemux/ADM_filter/filter_declaration.cpp:152
-msgid "Median"
-msgstr "Mittelwert"
-
-#: avidemux/ADM_filter/filter_declaration.cpp:152
-msgid "Median kernel 3x3. Remove high frequency noise."
-msgstr "Mittelwertiger Filter 3x3. Entfernt hochfrequentes Rauschen."
-
-#: avidemux/ADM_filter/filter_declaration.cpp:153
-msgid "Median (5x5)"
-msgstr "Mittelewert (5x5)"
-
-#: avidemux/ADM_filter/filter_declaration.cpp:153
-msgid "Median kernel 5x5. Good for reducing chroma noise."
-msgstr "Mittlerer Filter 5x5. Reduziert das Rauschen der Farbintensit?t."
-
-#: avidemux/ADM_filter/filter_declaration.cpp:154
-msgid "Forced postprocessing"
-msgstr "Unbedingte Nachbearbeitung"
-
-#: avidemux/ADM_filter/filter_declaration.cpp:154
-msgid "Apply blind postprocessing."
-msgstr "Blinde Nachbearbeitung starten."
-
-#: avidemux/ADM_filter/filter_declaration.cpp:159
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_srt.cpp:122
-msgid "Subtitler"
-msgstr "Untertitel Generator"
-
-#: avidemux/ADM_filter/filter_declaration.cpp:159
-msgid "Add srt/sub subtitles to the picture."
-msgstr "srt/sub Untertitel zum Bild hinzuf?gen."
-
-#: avidemux/ADM_filter/filter_declaration.cpp:160
-#: avidemux/ADM_videoFilter/ADM_vidASS.cpp:95
-msgid "ASS"
-msgstr "ASS"
-
-#: avidemux/ADM_filter/filter_declaration.cpp:160
-msgid "Add ASS/SSA subtitles to the picture."
-msgstr "ASS/SSA Untertitel zum Bild hinzuf?gen."
-
-#: avidemux/ADM_filter/filter_declaration.cpp:163
-msgid "VobSub"
-msgstr "VobSub"
-
-#: avidemux/ADM_filter/filter_declaration.cpp:163
-msgid "Embed VobSub subtitles into picture."
-msgstr "VobSub Untertitel ins Bild einbetten."
-
-#: avidemux/ADM_filter/filter_declaration.cpp:165
-msgid "DVB sub"
-msgstr "DVB Sub"
-
-#: avidemux/ADM_filter/filter_declaration.cpp:165
-msgid "Embed DVB-T subtitle."
-msgstr "DVB-T Untertitel einbetten."
-
-#: avidemux/ADM_filter/filter_declaration.cpp:176
-msgid "Blend remover"
-msgstr "Mischung zur?ck nehmen"
-
-#: avidemux/ADM_filter/filter_declaration.cpp:176
-msgid "Remove blend between previous and next picture."
-msgstr "?berblendung zwischen vorherigem und n?chstem Bild entfernen."
-
-#: avidemux/ADM_filter/filter_declaration.cpp:177
-msgid "Hard pulldown removal"
-msgstr "\"Pulldown\" Bilder entfernen"
-
-#: avidemux/ADM_filter/filter_declaration.cpp:177
-msgid "Remove IVTC that has been analog captured or resized."
-msgstr ""
-
-#: avidemux/ADM_filter/filter_declaration.cpp:178
-msgid "Whirl"
-msgstr "Wirbel"
-
-#: avidemux/ADM_filter/filter_declaration.cpp:178
-msgid "Useless whirlwind effect."
-msgstr "Nutzloser Wirbelwind-Effekt."
-
-#: avidemux/ADM_filter/filter_declaration.cpp:179
-#: avidemux/ADM_videoFilter/ADM_vidMosaic.cpp:98
-msgid "Mosaic"
-msgstr "Mosaik"
-
-#: avidemux/ADM_filter/filter_declaration.cpp:179
-msgid "Split the picture into tiny thumbnails."
-msgstr "Bild aufteilen in kleine Vorschaubilder."
-
-#: avidemux/ADM_filter/filter_declaration.cpp:180
-msgid "MPlayer delogo"
-msgstr "Mplayer Delogo (Logo-Entfernung)"
-
-#: avidemux/ADM_filter/filter_declaration.cpp:180
-msgid "Blend a logo by interpolating its surrounding box."
-msgstr "Logo einblenden durch Interpolieren der Surrounding Box."
-
-#: avidemux/ADM_filter/filter_declaration.cpp:181
-#: avidemux/ADM_videoFilter/ADM_vidLogo.cpp:94
-msgid "Logo"
-msgstr "Logo"
-
-#: avidemux/ADM_filter/filter_declaration.cpp:181
-msgid "Add a png as logo."
-msgstr "Ein PNG-Bild als Logo hinzuf?gen."
-
-#: avidemux/ADM_filter/filter_declaration.cpp:182
-msgid "Animated Menu"
-msgstr "Animiertes Men?"
-
-#: avidemux/ADM_filter/filter_declaration.cpp:183
-msgid "Create a video made of 6 mini windows, very useful to do DVD menus."
-msgstr "Video mit 6 Minifenstern erstellen, sehr n?tzlich f?r DVD Men?s."
-
-#: avidemux/ADM_filter/filter_declaration.cpp:185
-msgid "Compute Average"
-msgstr "Durchschnitt berechnen"
-
-#: avidemux/ADM_filter/filter_declaration.cpp:185
-msgid ""
-"Compute average luma value for each pixel throughout all frames, and save to "
-"file"
-msgstr ""
-
-#: avidemux/ADM_filter/filter_declaration.cpp:186
-msgid "Eraser"
-msgstr "Radierer"
-
-#: avidemux/ADM_filter/filter_declaration.cpp:186
-msgid "\"Erase\" arbitrary areas of each frame"
-msgstr "Entfernen beliebiger Bereiche in jedem Bild"
-
-#: avidemux/ADM_filter/filter_declaration.cpp:187
-msgid "Swiss Army Knife"
-msgstr "Swiss Army Knife"
-
-#: avidemux/ADM_filter/filter_declaration.cpp:187
-msgid ""
-"Apply operation like P'=P*A, P-A, P+A, etc. using a convolution, rolling "
-"average, image from file, or constant"
-msgstr ""
-
-#: avidemux/ADM_filter/filter_declaration.cpp:188
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_threshold.cpp:407
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:997
-msgid "Threshold"
-msgstr "Schwelle"
-
-#: avidemux/ADM_filter/filter_declaration.cpp:188
-msgid "Force too-bright/too-dim pixels to 0 and the rest to 255 or vice-versa"
-msgstr ""
-"Werte von hellen/dunklen Pixeln zu 0 und den Rest zu 255 erzwingen, oder "
-"umgekehrt"
-
-# Teile = Gruppe von Pixeln
-#: avidemux/ADM_filter/filter_declaration.cpp:189
-msgid "Particle List"
-msgstr "Teileliste"
-
-#: avidemux/ADM_filter/filter_declaration.cpp:189
-msgid "Identify 'particles' (groups of pixels)"
-msgstr "Teile (Gruppe von Pixeln) identifizieren"
-
-#: avidemux/ADM_filter/filter_declaration.cpp:190
-msgid "Add Framenumber"
-msgstr ""
-
-#: avidemux/ADM_filter/filter_declaration.cpp:190
-msgid "Print frame number directly in image"
-msgstr ""
-
-#: avidemux/ADM_filter/filter_declaration.cpp:195
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_partial.cpp:128
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtersub.cpp:144
-msgid "Partial"
-msgstr "Teilst?ck"
-
-#: avidemux/ADM_filter/filter_saveload.cpp:155
-msgid "Problem reading XML filters"
-msgstr "Problem beim Lesen von XML Filter"
-
-#: avidemux/ADM_filter/filter_saveload.cpp:163
-msgid "No filter found"
-msgstr "Keinen Filter gefunden"
-
-#: avidemux/ADM_filter/filter_saveload.cpp:199
-msgid "Could not find a filter"
-msgstr "Konnte keinen Filter finden"
-
-#: avidemux/ADM_filter/filter_saveload.cpp:207
-msgid "No tag found"
-msgstr "Kein Marke gefunden"
-
-#: avidemux/ADM_filter/filter_saveload.cpp:287
-msgid "Node not found"
-msgstr "Knoten nicht gefunden"
-
-#: avidemux/ADM_inputs/ADM_h263/ADM_h263.cpp:258
-msgid "Size is not (s)QCIF"
-msgstr "Gr??e ist nicht (s)QCIF"
-
-#: avidemux/ADM_inputs/ADM_mp4/ADM_mp4Analyzer.cpp:631
-msgid "Problem reading SVQ3 headers"
-msgstr "Problem beim Lesen der SVQ3 Kopfzeilen"
-
-#: avidemux/ADM_inputs/ADM_mp4/ADM_mp4Indexer.cpp:345
-msgid "No stts table"
-msgstr "Keine stts Tabelle"
-
-#: avidemux/ADM_inputs/ADM_mpegdemuxer/dmx_indexer.cpp:149
-msgid "There is several mpeg file, append them ?"
-msgstr "Weitere Mpeg Datei gefunden, anh?ngen?"
-
-#: avidemux/ADM_inputs/ADM_mpegdemuxer/dmx_indexer.cpp:244
-msgid "Can't determine aspect ratio"
-msgstr "Kann Seitenverh?ltnis nicht bestimmen"
-
-#: avidemux/ADM_inputs/ADM_mpegdemuxer/dmx_video.cpp:355
-msgid "Out of memory"
-msgstr "Speicherfehler"
-
-#: avidemux/ADM_inputs/ADM_mpegdemuxer/dmx_video.cpp:370
-msgid "Opening MPEG"
-msgstr "?ffne MPEG"
-
-#: avidemux/ADM_inputs/ADM_mpegdemuxer/dmx_video.cpp:539
-msgid "MPEG renumbering error"
-msgstr "Mpeg Fehler beim Neunummerieren"
-
-#: avidemux/ADM_inputs/ADM_nuv/ADM_nuv.cpp:542
-#: avidemux/ADM_inputs/ADM_nuv/ADM_nuv.cpp:571
-msgid "Opening Nuppel video"
-msgstr "?ffne Nuppel Video"
-
-#: avidemux/ADM_inputs/ADM_nuv/ADM_nuv.cpp:547
-msgid "Sure you want to abort ?"
-msgstr "Soll wirklich abgebrochen werden?"
-
-#: avidemux/ADM_inputs/ADM_nuv/ADM_nuv.cpp:758
-msgid "Size mismatch"
-msgstr "unterschiedliche Gr??e"
-
-#: avidemux/ADM_inputs/ADM_nuv/ADM_nuv.cpp:758
-msgid "Expect a crash."
-msgstr "Erwarte einen Crash."
-
-#: avidemux/ADM_inputs/ADM_nuv/ADM_nuv.cpp:1050
-msgid "Do you want to save an index ?"
-msgstr "Soll ein Index gespeichert werden?"
-
-#: avidemux/ADM_inputs/ADM_ogm/ADM_ogm.cpp:346
-msgid "Take second track ?"
-msgstr "Zweite Spur verwenden?"
-
-#: avidemux/ADM_inputs/ADM_ogm/ADM_ogm.cpp:426
-msgid "Scanning OGM"
-msgstr "Einlesen von OGM"
-
-#: avidemux/ADM_inputs/ADM_openDML/ADM_openDML.cpp:281
-#: avidemux/ADM_inputs/ADM_openDML/ADM_openDML.cpp:363
-#: avidemux/ADM_inputs/ADM_openDML/ADM_openDML.cpp:498
-msgid "Malformed header"
-msgstr "Fehlerhafte Kopfzeilen"
-
-#: avidemux/ADM_inputs/ADM_openDML/ADM_openDMLDepack.cpp:93
-msgid "Unpacking bitstream"
-msgstr "Bitstrom entpacken"
-
-#: avidemux/ADM_inputs/ADM_openDML/ADM_opendml_reindex.cpp:68
-msgid "Indexing"
-msgstr "Indizierung"
-
-#: avidemux/ADM_libraries/ADM_lavformat/ADM_lavformat.cpp:381
-msgid "Incompatible frame rate"
-msgstr "Inkompatible Bildrate"
-
-#: avidemux/ADM_libraries/ADM_lvemux/ADM_muxer.cpp:85
-#: avidemux/ADM_outputs/oplug_mpeg/op_mpegpass.cpp:153
-#: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:193
+#: avidemux/ADM_libraries/ADM_lvemux/ADM_muxer.cpp:75
+#: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:179
 msgid "Incompatible audio"
 msgstr "Inkompatibles Audio"
 
-#: avidemux/ADM_libraries/ADM_lvemux/ADM_muxer.cpp:85
+#: avidemux/ADM_libraries/ADM_lvemux/ADM_muxer.cpp:75
 msgid "For DVD, audio must be MP2 or AC3."
 msgstr "F?r DVD muss Audio entweder MP2 oder AC3 sein."
 
-#: avidemux/ADM_libraries/ADM_lvemux/ADM_muxer.cpp:92
+#: avidemux/ADM_libraries/ADM_lvemux/ADM_muxer.cpp:82
 msgid "lvemux init failed"
 msgstr "lvemux Initialisierung gescheitert"
 
-#: avidemux/ADM_libraries/ADM_utilities/ADM_gettext.cpp:52
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:292
+#: avidemux/ADM_libraries/ADM_utilities/ADM_gettext.cpp:46
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:290
 msgid "_File"
 msgstr "_Datei"
 
-#: avidemux/ADM_libraries/ADM_utilities/ADM_imageLoader.cpp:194
-msgid "Wrong Colorspace"
-msgstr "Falscher Farbraum"
-
-#: avidemux/ADM_libraries/ADM_utilities/ADM_imageLoader.cpp:194
-msgid "Only YV12/I420 or YUY2/I422 JPegs are supported"
-msgstr "Nur YV12/I420 oder YUY2/I422 JPEGs werden unterst?tzt"
-
-#: avidemux/ADM_libraries/ADM_utilities/ADM_imageUtils.cpp:403
-msgid "Memory error"
-msgstr "Speicherfehler"
-
-#: avidemux/ADM_libraries/ADM_utilities/ADM_imageUtils.cpp:410
-msgid "Error converting to BMP"
-msgstr "Fehler beim Konvertieren nach BMP"
-
-#: avidemux/ADM_libraries/ADM_utilities/ADM_imageUtils.cpp:417
-#: avidemux/gtk_gui.cpp:1937
-msgid "Something bad happened"
-msgstr "Irgendwas Schlimmes ist passiert"
-
-#: avidemux/ADM_libraries/ADM_utilities/ADM_imageUtils.cpp:472
-msgid "Cannot encode the frame"
-msgstr "Kann Bild nicht kodieren"
-
-#: avidemux/ADM_libraries/ADM_utilities/ADM_imageUtils.cpp:481
-#: avidemux/ADM_ocr/adm_glyph.cpp:221
-#: avidemux/ADM_osSupport/ADM_fileio.cpp:618
-#: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:366
-#: avidemux/ADM_outputs/oplug_ogm/op_ogsave.cpp:113
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:107
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:112
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:119
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:128
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:225
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:231
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:238
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:247
-#: avidemux/gtk_gui.cpp:905 avidemux/gtk_gui.cpp:1515
-msgid "File error"
-msgstr "Dateifehler"
-
-#: avidemux/ADM_libraries/ADM_utilities/ADM_imageUtils.cpp:481
-#: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:366
-#: avidemux/ADM_outputs/oplug_ogm/op_ogsave.cpp:113 avidemux/gtk_gui.cpp:1515
-#, c-format
-msgid "Cannot open \"%s\" for writing."
-msgstr "Kann \"%s\" nicht zum Schreiben ?ffnen."
-
-#: avidemux/ADM_libraries/ADM_utilities/avidemutils.cpp:327
+#: avidemux/ADM_libraries/ADM_utilities/avidemutils.cpp:321
 msgid "NTSC 4:3"
 msgstr "NTSC 4:3"
 
-#: avidemux/ADM_libraries/ADM_utilities/avidemutils.cpp:328
-#: avidemux/ADM_libraries/ADM_utilities/avidemutils.cpp:329
+#: avidemux/ADM_libraries/ADM_utilities/avidemutils.cpp:322
+#: avidemux/ADM_libraries/ADM_utilities/avidemutils.cpp:323
 msgid "NTSC 16:9"
 msgstr "NTSC 16:9"
 
-#: avidemux/ADM_libraries/ADM_utilities/avidemutils.cpp:330
+#: avidemux/ADM_libraries/ADM_utilities/avidemutils.cpp:324
 msgid "PAL 4:3"
 msgstr "PAL 4:3"
 
-#: avidemux/ADM_libraries/ADM_utilities/avidemutils.cpp:331
+#: avidemux/ADM_libraries/ADM_utilities/avidemutils.cpp:325
 msgid "PAL 16:9"
 msgstr "PAL 16:9"
 
-#: avidemux/ADM_libraries/ADM_utilities/avidemutils.cpp:332
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_resizeWiz.cpp:43
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_resize.cpp:383
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_resize.cpp:405
+#: avidemux/ADM_libraries/ADM_utilities/avidemutils.cpp:326
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_resize.cpp:368
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_resize.cpp:390
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_resizeWiz.cpp:42
 msgid "1:1"
 msgstr "1:1"
 
-#: avidemux/ADM_libraries/ADM_utilities/avidemutils.cpp:334
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:600
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:797
+#: avidemux/ADM_libraries/ADM_utilities/avidemutils.cpp:328
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:585
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:782
 msgid "Unknown"
 msgstr "Unbekannt"
 
-#: avidemux/ADM_ocr/adm_glyph.cpp:173
-msgid "Could not write the file"
-msgstr "Konnte Datei nicht schreiben"
+#: avidemux/ADM_libraries/ADM_utilities/ADM_imageLoader.cpp:184
+msgid "Wrong Colorspace"
+msgstr "Falscher Farbraum"
 
-#: avidemux/ADM_ocr/adm_glyph.cpp:221
-#, c-format
-msgid "Could not read \"%s\"."
-msgstr "Konnte \"%s\" nicht lesen."
+#: avidemux/ADM_libraries/ADM_utilities/ADM_imageLoader.cpp:184
+msgid "Only YV12/I420 or YUY2/I422 JPegs are supported"
+msgstr "Nur YV12/I420 oder YUY2/I422 JPEGs werden unterst?tzt"
 
-#: avidemux/ADM_ocr/ADM_ocrEngine.cpp:78
-msgid "Output file error"
-msgstr "Ausgabe-Datei Fehler"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_preview.cpp:175
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_threshold.cpp:536
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtersub.cpp:151
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager.cpp:332
+msgid "Preview"
+msgstr "Vorschau"
 
-#: avidemux/ADM_ocr/ADM_ocrEngine.cpp:78
-#, c-format
-msgid "Could not open \"%s\" for writing."
-msgstr "Konnte \"%s\" nicht zum Schreiben ?ffnen."
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_busy.cpp:102
+msgid "Busy"
+msgstr "arbeitet"
 
-#: avidemux/ADM_ocr/ADM_ocrEngine.cpp:86 avidemux/ADM_ocr/ADM_ocrEngine.cpp:92
-msgid "Input file error"
-msgstr ""
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_ocr.cpp:45
+msgid "Mini OCR"
+msgstr "Mini OCR"
 
-#: avidemux/ADM_ocr/ADM_ocrEngine.cpp:86
-msgid "Unknown source type"
-msgstr ""
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_ocr.cpp:63
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_ocr.cpp:77
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:648
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:655
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:662
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:775
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:622
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:638
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:654
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:684
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_resize.cpp:411
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_resize.cpp:425
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_idx_pg.cpp:154
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_idx_pg.cpp:194
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1220
+msgid "0"
+msgstr "0"
 
-#: avidemux/ADM_ocr/ADM_ocrEngine.cpp:92
-msgid "Bitmap source failed"
-msgstr ""
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_ocr.cpp:70
+msgid "0:0:0"
+msgstr "0:0:0"
 
-#: avidemux/ADM_ocr/ADM_ocrEngine.cpp:100
-msgid "Problem loading sub"
-msgstr "Problem beim Laden von Sub"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_ocr.cpp:84
+msgid "# of lines"
+msgstr "# von Zeilen"
 
-#: avidemux/ADM_ocr/ADM_ocrEngine.cpp:100
-msgid "No subs"
-msgstr ""
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_ocr.cpp:92
+msgid "TimeCode:"
+msgstr "Zeitcode:"
 
-#: avidemux/ADM_ocr/ADM_vob2vobsub.cpp:254
-msgid "Ifo error"
-msgstr "IFO Fehler"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_ocr.cpp:100
+msgid "# of Glyphs :"
+msgstr "# von Schriftzeichen :"
 
-#: avidemux/ADM_ocr/ADM_vob2vobsub.cpp:254
-msgid "Error reading ifo file, aborting."
-msgstr "Fehler beim Lesen der IFO Datei. Abbruch."
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_ocr.cpp:108
+msgid "<b>Stats</b>"
+msgstr "<b>Status</b>"
 
-#: avidemux/ADM_ocr/ADM_vob2vobsub.cpp:262
-msgid "Cannot write .idx"
-msgstr "Kann .idx nicht schreiben"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_ocr.cpp:125
+msgid "Current Glyph"
+msgstr "Aktuelles Schriftzeichen"
 
-#: avidemux/ADM_ocr/ADM_vob2vobsub.cpp:275
-msgid "Cannot write .sub"
-msgstr "Kann .sub nicht schreiben"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_ocr.cpp:138
+msgid " Text:"
+msgstr " Text:"
 
-#: avidemux/ADM_ocr/ADM_vob2vobsub.cpp:287
-msgid "Problem opening the mpeg files"
-msgstr "Problem beim ?ffnen der Mpeg Dateien"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_ocr.cpp:145
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:242
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:263
+msgid " "
+msgstr " "
 
-#: avidemux/ADM_ocr/ADM_vob2vobsub.cpp:300
-msgid "Generating VobSub file"
-msgstr "Erstelle VobSub Datei"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_ocr.cpp:160
+msgid "_Calibrate"
+msgstr "_Kalibrieren"
 
-#: avidemux/ADM_osSupport/ADM_crashdump.cpp:210
-#: avidemux/ADM_osSupport/ADM_crashdump.cpp:236
-msgid "Fatal Error"
-msgstr "Fataler Fehler"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_ocr.cpp:164
+msgid "If the glyphs are too thin, enter a lower value here"
+msgstr "Falls die Zeichen zu schmal sind, dann bitte hier einen kleineren Wert eingeben"
 
-#: avidemux/ADM_osSupport/ADM_crashdump.cpp:210
-#: avidemux/ADM_osSupport/ADM_crashdump.cpp:236
-msgid ""
-"A fatal error has occurred.\n"
-"\n"
-"Click OK to generate debug information. This may take a few minutes to "
-"complete."
-msgstr ""
-"Ein fataler Fehler wurde entdeckt.\n"
-"\n"
-"Bitte auf OK klicken um Debug-Informationen zu erstellen. Das kann einige "
-"Minuten dauern."
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_ocr.cpp:166
+msgid "S_kip all"
+msgstr "Alles ?bers_pringen"
 
-#: avidemux/ADM_osSupport/ADM_crashdump.cpp:437
-msgid "Load it"
-msgstr "Lade es"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_ocr.cpp:170
+msgid "Skip the whole image"
+msgstr "Das gesamte Bild ?berspringen"
 
-#: avidemux/ADM_osSupport/ADM_crashdump.cpp:437
-msgid "Crash file"
-msgstr "Dateiabsturz"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_ocr.cpp:172
+msgid "Skip Glyph"
+msgstr "Schriftzeichen ?berspringen"
 
-#: avidemux/ADM_osSupport/ADM_crashdump.cpp:438
-msgid ""
-"I have detected a crash file. \n"
-"Do you want to load it  ?\n"
-"(It will be deleted in all cases, you should save it if you want to keep it)"
-msgstr ""
-"Es wurde ein Absturzprotokoll gefunden.\n"
-"Soll dieses jetzt geladen werden ?\n"
-"(Anschlie?end wird es gel?scht. Es sollte daher ggf. vorher gesichert "
-"werden.)"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_ocr.cpp:176
+msgid "Skip the current letter/glyph"
+msgstr "Aktuelles Schriftzeichen ?berspringen"
 
-#: avidemux/ADM_osSupport/ADM_fileio.cpp:239
-#: avidemux/ADM_osSupport/ADM_fileio.cpp:263
-#: avidemux/ADM_osSupport/ADM_fileio.cpp:292
-#: avidemux/ADM_osSupport/ADM_fileio.cpp:305
-#: avidemux/ADM_osSupport/ADM_fileio.cpp:318 avidemux/GUI_jobs.cpp:37
-msgid "Oops"
-msgstr "Oops"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_ocr.cpp:178
+msgid "_Ignore glyph"
+msgstr "Schriftzeichen _ignorieren"
 
-#: avidemux/ADM_osSupport/ADM_fileio.cpp:239
-#, c-format
-msgid "can't create custom directory (%s)."
-msgstr "Individuelles Verzeichnis (%s) konnte nicht erstellt werden."
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_ocr.cpp:182
+msgid "This glyph will be ignored from now on"
+msgstr "Dieses Schriftzeichen wird von jetzt an ignoriert"
 
-#: avidemux/ADM_osSupport/ADM_fileio.cpp:263
-#, c-format
-msgid "can't create job directory (%s)."
-msgstr "Kann Job Verzeichnis nicht erstellen (%s)."
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_ocr.cpp:184
+msgid "Ok"
+msgstr "Ok"
 
-#: avidemux/ADM_osSupport/ADM_fileio.cpp:292
-msgid "Can't determine the Application Data folder."
-msgstr ""
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_ocr.cpp:198
+msgid "<b>Bitmap</b>"
+msgstr "<b>Bitmap</b>"
 
-#: avidemux/ADM_osSupport/ADM_fileio.cpp:305
-msgid "can't determine $HOME."
-msgstr "Kann $HOME nicht bestimmen"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:148
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:170
+msgid "Privileges Required"
+msgstr "Rechte erforderlich"
 
-#: avidemux/ADM_osSupport/ADM_fileio.cpp:318
-msgid "Cannot create the .avidemux directory"
-msgstr "Kann .avidemux Verzeichnis nicht erstellen"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:148
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:170
+msgid "Root privileges are required to perform this operation."
+msgstr "F?r diese Operation sind Root-Rechte erforderlich."
 
-#: avidemux/ADM_osSupport/ADM_fileio.cpp:618 avidemux/gtk_gui.cpp:902
-#, c-format
-msgid "Cannot open \"%s\"."
-msgstr "\"%s\" kann nicht ge?ffnet werden."
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:191
+msgid "Shutting down"
+msgstr "Herunter fahren"
 
-#: avidemux/ADM_osSupport/ADM_fileio.cpp:631
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:368
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_working.cpp:138
 #, c-format
-msgid ""
-"%s already exists.\n"
-"\n"
-"Do you want to replace it?"
-msgstr ""
-"%s existiert bereits.\n"
-"\n"
-"Ersetzen?"
+msgid "%d%%"
+msgstr "%d%%"
 
-#: avidemux/ADM_osSupport/ADM_fileio.cpp:658
-#: avidemux/ADM_osSupport/ADM_fileio.cpp:672
-msgid "It is possible that you are trying to overwrite an input file!"
-msgstr "Es ist m?glich, dass eine Eingangsdatei ?berschrieben wird!"
-
-#: avidemux/ADM_osSupport/ADM_fileio.cpp:683
-msgid "Cannot write the file"
-msgstr "Kann Datei nicht schreiben"
-
-#: avidemux/ADM_osSupport/ADM_fileio.cpp:683
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:391
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:398
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:405
 #, c-format
-msgid "No write access to \"%s\"."
-msgstr "Keine Schreibrechte f?r  \"%s\"."
+msgid "%lu MB"
+msgstr "%lu MB"
 
-#: avidemux/ADM_osSupport/ADM_misc.cpp:215
-#, c-format
-msgid "%lu minutes"
-msgstr "%lu Minuten"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:501
+msgid "Encoding..."
+msgstr "Kodieren..."
 
-#: avidemux/ADM_osSupport/ADM_misc.cpp:219
-#, c-format
-msgid "%lu minute"
-msgstr "%lu Minuten"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:532
+msgid "<b>Phase:</b>"
+msgstr "<b>Phase:</b>"
 
-#: avidemux/ADM_osSupport/ADM_misc.cpp:227
-#, c-format
-msgid "%lu second"
-msgstr "%lu Sekunden"
-
-#: avidemux/ADM_osSupport/ADM_misc.cpp:231
-#, c-format
-msgid "%lu seconds"
-msgstr "%lu Sekunden"
-
-#: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:74
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:245
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:847
-msgid "Normal"
-msgstr "Normal"
-
-#: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:75
-msgid "Mux every N video frames"
-msgstr "Multiplexe jedes n-te Video-Bild"
-
-#: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:76
-msgid "Mux by packet size"
-msgstr "Mux. gem?? Paketgr??e"
-
-#: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:79
-msgid "Muxing _type:"
-msgstr "Multiplex-_Typ:"
-
-#: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:80
-msgid "_Split every MB:"
-msgstr "_Aufteilen alle MB:"
-
-#: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:82
-msgid "Mux _every x video frames:"
-msgstr "Multiplexe jedes x-te Video-Bild:"
-
-#: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:83
-msgid "Mux in _blocks of x bytes:"
-msgstr "Mux. in Bl?cken von x  Bytes:"
-
-#: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:90
-msgid "AVI Muxer Options"
-msgstr "AVI Multiplexer Optionen"
-
-#: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:189
-msgid "Error initalizing audio filters"
-msgstr "Fehler beim Initialisieren der Audiofilter"
-
-#: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:198
-msgid "Error initalizing video filters"
-msgstr "Fehler beim Initialisieren der Videofilter"
-
-#: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:267
-#: avidemux/ADM_outputs/oplug_dummy/oplug_dummy.cpp:141
-#: avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp:188
-#: avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp:240
-#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:163
-#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:261
-#: avidemux/ADM_outputs/oplug_ogm/op_ogaudio.cpp:70
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:80
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:89
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:51
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:333
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_coloryuv.cpp:377
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_coloryuv.cpp:385
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_coloryuv.cpp:393
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:540
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:555
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:570
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:585
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_vobsub.cpp:225
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1206
-#: avidemux/ADM_videoFilter/ADM_lavpp_deint.cpp:105
-#: avidemux/ADM_videoFilter/ADM_vidDecTelecide.cpp:101
-#: avidemux/ADM_videoFilter/ADM_vidRotate.cpp:262 avidemux/gtk_gui.cpp:2015
-#: avidemux/gtk_gui.cpp:2114
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_vobsub.cpp:211
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:66
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:75
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:37
+#: avidemux/ADM_outputs/oplug_dummy/oplug_dummy.cpp:134
+#: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:257
+#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:153
+#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:247
+#: avidemux/ADM_outputs/oplug_ogm/op_ogaudio.cpp:66
+#: avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp:180
+#: avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp:232
+#: avidemux/gtk_gui.cpp:1999
+#: avidemux/gtk_gui.cpp:2098
 msgid "None"
 msgstr "Keine"
 
-#: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:457
-#: avidemux/ADM_outputs/oplug_avi/op_avisavecopy.cpp:96
-#: avidemux/ADM_outputs/oplug_avi/op_avisavecopy_pack.cpp:121
-#: avidemux/ADM_outputs/oplug_avi/op_avisavecopy_unpack.cpp:98
-msgid "Cannot initiate save"
-msgstr "Kann das Speichern nicht beginnen"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:547
+msgid "<b>Video Codec:</b>"
+msgstr "<b>Video Codec:</b>"
 
-#: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:496
-msgid "DTS"
-msgstr "DTS"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:562
+msgid "<b>Audio Codec:</b>"
+msgstr "<b>Audio Codec:</b>"
 
-#: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:497
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:289
-msgid "PCM"
-msgstr "PCM"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:577
+msgid "<b>Container:</b>"
+msgstr "<b>Container:</b>"
 
-#: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:498
-msgid "MP2"
-msgstr "MP2"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:609
+msgid "<b>Processed Frames:</b>"
+msgstr "<b>Verarbeitete Bilder:</b>"
 
-#: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:499
-msgid "MP3"
-msgstr "MP3"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:617
+msgid "<b>Total Frames:</b>"
+msgstr "<b>Gesamte Bilder:</b>"
 
-#: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:500
-msgid "WMA"
-msgstr "WMA"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:625
+msgid "<b>Quantiser:</b>"
+msgstr "<b>Quantizer:</b>"
 
-#: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:501
-msgid "LPCM"
-msgstr "LPCM"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:633
+msgid "<b>Average Bitrate:</b>"
+msgstr "<b>Durchschnittl. Bitrate (kb/s):</b>"
 
-#: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:502
-msgid "AC3"
-msgstr "AC3"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:641
+msgid "0 kB/s"
+msgstr "0 kb/s"
 
-#: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:503
-msgid "Ogg Vorbis"
-msgstr "Ogg Vorbis"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:686
+msgid "<b>Video Size:</b>"
+msgstr "<b>Video Gr??e:</b>"
 
-#: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:505
-msgid "AAC"
-msgstr "AAC"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:694
+msgid "<b>Audio Size:</b>"
+msgstr "<b>Audio Gr??e:</b>"
 
-#: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:506
-msgid "QDM2"
-msgstr "QDM2"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:702
+msgid "<b>Total Size:</b>"
+msgstr "<b>Gesamtgr??e:</b>"
 
-#: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:507
-msgid "AMR-NB"
-msgstr "AMR-NB"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:710
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:718
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:726
+msgid "0 MB"
+msgstr "0 MB"
 
-#: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:508
-msgid "MSADPCM"
-msgstr "MSADPCM"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:751
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_working.cpp:232
+msgid "<b>Elapsed:</b>"
+msgstr "<b>Vergangene Zeit:</b>"
 
-#: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:509
-msgid "ULAW"
-msgstr "ULAW"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:759
+msgid "<b>Time Remaining:</b>"
+msgstr "<b>Verbleibende Zeit:</b>"
 
-#: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:510
-msgid "IMA ADPCM"
-msgstr "IMA ADPCM"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:767
+msgid "<b>Frames/sec:</b>"
+msgstr "<b>Bilder/Sek.:</b>"
 
-#: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:511
-msgid "8-bit PCM"
-msgstr "8-bit PCM"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:789
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:437
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_idx_pg.cpp:186
+msgid "00:00:00"
+msgstr "00:00:00"
 
-#: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:513
-msgid "Unknown codec"
-msgstr "Unbekannter Codec"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:813
+msgid "Shut down computer when finished"
+msgstr "Danach Rechner herunter fahren"
 
-#: avidemux/ADM_outputs/oplug_avi/op_avisavecopy.cpp:109
-#: avidemux/ADM_outputs/oplug_avi/op_avisavecopy_pack.cpp:134
-#: avidemux/ADM_outputs/oplug_avi/op_avisavecopy_unpack.cpp:111
-#: avidemux/ADM_outputs/oplug_mpeg/op_mpegpass.cpp:223
-msgid "Saving"
-msgstr "Speichern"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:821
+msgid "Priority:"
+msgstr "Priorit?t:"
 
-#: avidemux/ADM_outputs/oplug_avi/op_saveprocess.cpp:73
-msgid ""
-"Width is not a multiple of 8\n"
-" continue anyway ?"
-msgstr ""
-"Breite ist nicht ein Vielfaches von 8\n"
-" irgendwie fortfahren ?"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:830
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:223
+msgid "High"
+msgstr "Hoch"
 
-#: avidemux/ADM_outputs/oplug_avi/op_saveprocess.cpp:93
-#: avidemux/ADM_outputs/oplug_dummy/oplug_dummy.cpp:149
-#: avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp:196
-#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:175
-#: avidemux/ADM_outputs/oplug_ogm/op_ogsaveprocess.cpp:78
-msgid "Filter init failed"
-msgstr "Filterinitialisierung misslungen"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:831
+msgid "Above Normal"
+msgstr "?ber Normal"
 
-#: avidemux/ADM_outputs/oplug_avi/op_saveprocess.cpp:128
-#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:414
-#: avidemux/ADM_outputs/oplug_ogm/op_ogsaveprocess.cpp:103
-msgid ""
-"\n"
-" Reuse the existing log-file ?"
-msgstr ""
-"\n"
-" Vorhandene Log-Datei wieder verwenden ?"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:832
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:225
+#: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:64
+msgid "Normal"
+msgstr "Normal"
 
-#: avidemux/ADM_outputs/oplug_avi/op_saveprocess.cpp:137
-#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:422
-msgid "1st Pass"
-msgstr "1. Durchlauf"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:833
+msgid "Below Normal"
+msgstr "Unter Normal"
 
-#: avidemux/ADM_outputs/oplug_avi/op_saveprocess.cpp:152
-msgid "Aborting"
-msgstr "Abbruch"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:834
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:227
+msgid "Low"
+msgstr "Niedrig"
 
-#: avidemux/ADM_outputs/oplug_avi/op_saveprocess.cpp:267
-#: avidemux/ADM_outputs/oplug_dummy/oplug_dummy.cpp:153
-#: avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp:200
-#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:187
-#: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:373
-#: avidemux/ADM_outputs/oplug_ogm/op_ogsaveprocess.cpp:167
-msgid "Encoding"
-msgstr "Kodieren"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:871
+msgid "Pause / Abort"
+msgstr "Pause / Abbruch"
 
-#: avidemux/ADM_outputs/oplug_avi/op_saveprocess.cpp:269
-#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:493
-msgid "2nd Pass"
-msgstr "2. Durchlauf"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/toolkit_dialog.cpp:481
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/toolkit_dialog.cpp:559
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/toolkit_dialog.cpp:627
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/toolkit_dialog.cpp:687
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/toolkit_dialog.cpp:750
+msgid "label1"
+msgstr "label1"
 
-#: avidemux/ADM_outputs/oplug_avi/op_savesmart.cpp:107
-msgid "Smart Copy"
-msgstr "Sanftes Kopieren"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/toolkit_dialog.cpp:614
+msgid "Alert"
+msgstr "Meldung"
 
-#: avidemux/ADM_outputs/oplug_dummy/oplug_dummy.cpp:135
-#: avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp:182
-#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:155
-msgid "Cannot initialize the video stream"
-msgstr "Video-Bitstrom konnte nicht initialisiert werden"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:391
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1002
+msgid "Calculator"
+msgstr "Taschenrechner"
 
-#: avidemux/ADM_outputs/oplug_dummy/oplug_dummy.cpp:140
-msgid "Dummy"
-msgstr "Dummy"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:404
+msgid "<b>Target</b>"
+msgstr "<b>Ziel</b>"
 
-#: avidemux/ADM_outputs/oplug_dummy/oplug_dummy.cpp:206
-#: avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp:321
-#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:342
-#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:454
-#: avidemux/ADM_outputs/oplug_mpeg/op_mpegpass.cpp:352
-msgid "Error while encoding"
-msgstr "Fehler beim Kodieren"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:431
+msgid "Duration:"
+msgstr "Dauer:"
 
-#: avidemux/ADM_outputs/oplug_dummy/oplug_dummy.cpp:213
-#: avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp:328
-#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:349
-#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:461
-msgid "KeyFrame error"
-msgstr "I-Bild-Fehler (keyframe)"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:451
+msgid "_Medium:"
+msgstr "_Medium:"
 
-#: avidemux/ADM_outputs/oplug_dummy/oplug_dummy.cpp:213
-#: avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp:328
-#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:349
-#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:461
-msgid ""
-"The beginning frame is not a key frame.\n"
-"Please move the A marker."
-msgstr ""
-"Das beginnende Bild ist kein I-Bild (keyframe).\n"
-"Bitte die Marke A verschieben."
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:462
+msgid "_Format:"
+msgstr "_Format:"
 
-#: avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp:144
-msgid "Unsupported video"
-msgstr "Nicht unterst?tztes Video"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:473
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:531
+msgid "Total size (custom)"
+msgstr "Gesamtgr??e (individuell)"
 
-#: avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp:144
-msgid "Only FLV1 and VP6 video are supported"
-msgstr "Nur FLV1 und VP6 Videos werden unterst?tzt"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:483
+msgid "_Custom size (MB):"
+msgstr "_Individuelle Gr??e (MB):"
 
-#: avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp:166
-#: avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp:171
-msgid "Unsupported audio"
-msgstr "Nicht unterst?tztes Audio"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:497
+msgid "Output container format"
+msgstr "Ausgabe-Container-Format"
 
-#: avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp:166
-msgid "Audio must be mp3 for flv output."
-msgstr "F?r flv-Ausgabe muss Audio mp3 sein."
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:524
+msgid "Total size"
+msgstr "Gesamtgr??e"
 
-#: avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp:171
-msgid "Frequency must be 44100, 22050 or 11025 Hz."
-msgstr "Frequenz muss 44100, 22050 oder 11025 Hz sein."
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:528
+msgid "1x 80 min. CD"
+msgstr "1x 80 min. CD"
 
-#: avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp:225
-#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:230
-msgid "Cannot initialize the audio stream"
-msgstr "Konnte Audio-Stream nicht initialisieren"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:533
+msgid "2x 80 min. CD"
+msgstr "2x 80 min. CD"
 
-#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:248
-msgid "Invalid audio stream detected"
-msgstr ""
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:537
+msgid "1x 74 min. CD"
+msgstr "1x 74 min. CD"
 
-#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:248
-msgid ""
-"The audio stream may be invalid for this container.\n"
-"\n"
-"Continue anyway?"
-msgstr ""
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:541
+msgid "2x 74 min. CD"
+msgstr "2x 74 min. CD"
 
-#: avidemux/ADM_outputs/oplug_mpeg/op_mpegpass.cpp:89
-msgid "This is not MPEG compatible"
-msgstr "Dies ist nicht MPEG kompatibel"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:545
+msgid "DVD5"
+msgstr "DVD5"
 
-#: avidemux/ADM_outputs/oplug_mpeg/op_mpegpass.cpp:89
-msgid "You can't use the Copy codec."
-msgstr "Kopie-Codec nicht m?glich."
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:561
+msgid "Track _1:"
+msgstr "Spur _1:"
 
-#: avidemux/ADM_outputs/oplug_mpeg/op_mpegpass.cpp:94
-#: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:142
-#: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:153
-msgid "There is no audio track"
-msgstr "Dies ist keine Audio-Spur"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:569
+msgid "Audio bitrate in kb/s for track 1 (0 for no audio)"
+msgstr "Audio Bitrate in kb/s f?r Spur 1 (0 wenn ohne Audio)"
 
-#: avidemux/ADM_outputs/oplug_mpeg/op_mpegpass.cpp:101
-msgid "The first frame is not intra frame"
-msgstr "Das erste Bild ist kein Intra-Bild"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:576
+msgid "Track _2: "
+msgstr "Spur _2: "
 
-#: avidemux/ADM_outputs/oplug_mpeg/op_mpegpass.cpp:101
-msgid "Use the &lt;&lt; and the &gt;&gt; buttons to move using Intra frames."
-msgstr ""
-"Bitte &lt;&lt; und &gt;&gt; Tasten benutzen, um Intra-Bilder zu verschieben."
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:584
+msgid "Audio bitrate in kb/s for track 2 (optional)"
+msgstr "Audio Bitrate in kb/s f?r Spur 2 (optional)"
 
-#: avidemux/ADM_outputs/oplug_mpeg/op_mpegpass.cpp:113
-#: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:163
-msgid "Audio track is not suitable"
-msgstr "Audio-Spur ist nicht brauchbar"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:588
+msgid "<b>Audio Bitrate</b>"
+msgstr "<b>Audio Bitrate</b>"
 
-#: avidemux/ADM_outputs/oplug_mpeg/op_mpegpass.cpp:153
-#: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:173
-msgid "For VCD, audio must be 44.1 kHz MP2."
-msgstr "F?r VCD muss Audio 44.1 kHz MP2 sein"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:614
+msgid "Audio size (MB):"
+msgstr "Audio Gr??e (MB):"
 
-#: avidemux/ADM_outputs/oplug_mpeg/op_mpegpass.cpp:182
-msgid "For DVD, audio must be 48 kHz MP2(stereo), AC3, DTS or LPCM (stereo)."
-msgstr ""
-"F?r DVD muss Audio 48 kHz MP2 (stereo), AC3, DTS or LPCM (stereo) sein."
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:630
+msgid "Video size (MB):"
+msgstr "Video Gr??e (MB):"
 
-#: avidemux/ADM_outputs/oplug_mpeg/op_mpegpass.cpp:222
-msgid "---"
-msgstr "---"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:646
+msgid "Total size (MB):"
+msgstr "Gesamtgr??e (MB):"
 
-#: avidemux/ADM_outputs/oplug_mpeg/op_mpegpass.cpp:230
-#: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:287
-msgid "MPEG TS"
-msgstr "MPEG TS"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:668
+msgid "Video bitrate:"
+msgstr "Video Bitrate:"
 
-#: avidemux/ADM_outputs/oplug_mpeg/op_mpegpass.cpp:231
-#: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:288
-msgid "MPEG VCD"
-msgstr "MPEG VCD"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:676
+msgid "Bits per pixel:"
+msgstr "Bits pro Pixel:"
 
-#: avidemux/ADM_outputs/oplug_mpeg/op_mpegpass.cpp:232
-#: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:289
-msgid "MPEG SVCD"
-msgstr "MPEG SVCD"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:692
+msgid "0.0"
+msgstr "0.0"
 
-#: avidemux/ADM_outputs/oplug_mpeg/op_mpegpass.cpp:233
-#: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:290
-msgid "MPEG DVD"
-msgstr "MPEG DVD"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:700
+msgid "<b>Result</b>"
+msgstr "<b>Ergebnis</b>"
 
-#: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:193
-msgid "For DVD, audio must be 48 kHz MP2, AC3 or LPCM."
-msgstr "F?r DVD muss Audio 48 kHz MP2, AC3 oder LPCM sein."
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_quota.cpp:69
+msgid "Filesystem full / quota exceeded"
+msgstr "Dateisystem voll / Quota ?berschritten"
 
-#: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:260
-msgid "libmpeg2enc VCD"
-msgstr "libmpeg2enc VCD"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_quota.cpp:112
+msgid "Ignore"
+msgstr "Ignorieren"
 
-#: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:263
-msgid "libmpeg2enc SVCD"
-msgstr "libmpeg2enc SVCD"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_quota.cpp:134
+msgid "Retry"
+msgstr "Wiederholen"
 
-#: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:266
-msgid "libmpeg2enc DVD"
-msgstr "libmpeg2enc DVD"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_partial.cpp:110
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtersub.cpp:145
+#: avidemux/ADM_filter/filter_declaration.cpp:57
+msgid "Partial"
+msgstr "Teilst?ck"
 
-#: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:269
-msgid "FFmpeg MPEG-1 VBR"
-msgstr "FFmpeg MPEG-1 VBR"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_partial.cpp:124
+msgid "Start frame for partial :"
+msgstr "Startbild f?r Teilst?ck:"
 
-#: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:272
-msgid "FFmpeg MPEG-2 SVCD VBR"
-msgstr "FFmpeg MPEG-2 SVCD VBR"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_partial.cpp:131
+msgid "End frame for partial :"
+msgstr "Endbild f?r Teilst?ck:"
 
-#: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:275
-msgid "FFmpeg MPEG-2 DVD VBR"
-msgstr "FFmpeg MPEG-2 DVD VBR"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_partial.cpp:154
+msgid "Configure partialized filter"
+msgstr "Aufgeteilten Filter konfigurieren"
 
-#: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:278
-msgid "MPEG Requantizer"
-msgstr "MPEG Requantizer"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:27
+msgid "No"
+msgstr "Nein"
 
-#: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:286
-msgid "MPEG ES"
-msgstr "MPEG ES"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:27
+msgid "Yes"
+msgstr "Ja"
 
-#: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:305
-msgid "Reuse log file ?"
-msgstr "Log-Datei wieder verwenden?"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:47
+#, c-format
+msgid "%lu x %lu"
+msgstr "%lu x %lu"
 
-#: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:311
-msgid "Pass 1/2"
-msgstr "Durchlauf 1/2"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:50
+#, c-format
+msgid "%2.3f fps"
+msgstr "%2.3f Bilder/s"
 
-#: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:320
-msgid "Error in pass 1"
-msgstr "Fehler beim 1. Durchlauf"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:53
+#, c-format
+msgid "%ld frames"
+msgstr "%ld Bilder"
 
-#: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:371
-msgid "Pass 2/2"
-msgstr "Durchlauf 2/2"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:63
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:113
+#, c-format
+msgid "%02d:%02d:%02d.%03d"
+msgstr "%02d:%02d:%02d.%03d"
 
-#: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:463
-msgid "Error in pass 2"
-msgstr "Fehler beim 2. Durchlauf"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:76
+#, c-format
+msgid "%s (%u:%u)"
+msgstr "%s (%u:%u)"
 
-#: avidemux/ADM_outputs/oplug_ogm/op_ogsave.cpp:127
-msgid "Could not initialize video"
-msgstr "Kann Video nicht initialisieren"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:87
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:89
+msgid "Mono"
+msgstr "Mono"
 
-#: avidemux/ADM_outputs/oplug_ogm/op_ogsave.cpp:135
-msgid "Could not initialize audio"
-msgstr "Kann Audio nicht initialisieren"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:90
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:90
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:277
+msgid "Stereo"
+msgstr "Stereo"
 
-#: avidemux/ADM_outputs/oplug_ogm/op_ogsavecopy.cpp:70
-msgid "Saving..."
-msgstr "Speichern..."
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:98
+#, c-format
+msgid "%lu Hz"
+msgstr "%lu Hz"
 
-#: avidemux/ADM_outputs/oplug_ogm/op_ogsaveprocess.cpp:114
-msgid "Pass one"
-msgstr "Durchlauf 1"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:100
+#, c-format
+msgid "%lu Bps / %lu kbps"
+msgstr "%lu Byte/s,  %lu kb/s"
 
-#: avidemux/ADM_outputs/oplug_ogm/op_ogsaveprocess.cpp:163
-msgid "Pass 2"
-msgstr "Durchlauf 2"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:116
+#, c-format
+msgid "%.2f MB"
+msgstr "%.2f MB"
 
-#: avidemux/ADM_script/ADM_JSFunctions.cpp:238
-msgid "Select a directory"
-msgstr "Ein Verzeichnis ausw?hlen"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:185
+msgid "Properties"
+msgstr "Eigenschaften"
 
-#: avidemux/ADM_script/ADM_JSFunctions.cpp:504
-msgid "Uinteger"
-msgstr "Uinteger"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:214
+msgid "Frame Rate:"
+msgstr "Bildrate:"
 
-#: avidemux/ADM_script/ADM_JSFunctions.cpp:507
-msgid "Test uinteger"
-msgstr "Uinteger-Test"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:221
+msgid "Frame Count:"
+msgstr "Bildz?hler:"
 
-#: avidemux/ADM_script/ADM_JSFunctions.cpp:519
-msgid "Float"
-msgstr "Fluss"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:228
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:406
+msgid "Total Duration:"
+msgstr "Gesamtdauer:"
 
-#: avidemux/ADM_script/ADM_JSFunctions.cpp:537
-msgid "Toggle"
-msgstr "Wechseln"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:249
+msgid "Image Size:"
+msgstr "Bildgr??e:"
 
-#: avidemux/ADM_script/ADM_JSFunctions.cpp:558
-msgid "No Strategy"
-msgstr "Keine Strategie"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:270
+msgid "Codec 4CC:"
+msgstr "Codec 4CC:"
 
-# Einzelbilder des Films werden abwechselnd zweifach und dreifach aufgezeichnet, so da? sich aus je zwei Einzelbildern des Films immer f?nf Fernseh-Halbbilder ergeben.
-# 59,94 Hz vertikal -> 60 Halbbilder
-#: avidemux/ADM_script/ADM_JSFunctions.cpp:559
-msgid "3:2 Pulldown"
-msgstr "3:2 Pulldown"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:284
+msgid "Aspect Ratio:"
+msgstr "Seitenverh?ltnis:"
 
-#: avidemux/ADM_script/ADM_JSFunctions.cpp:560
-msgid "Pal/Secam"
-msgstr "Pal/Secam"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:298
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1066
+msgid "<b>Video</b>"
+msgstr "<b>Video</b>"
 
-#: avidemux/ADM_script/ADM_JSFunctions.cpp:561
-#: avidemux/ADM_videoFilter/ADM_vidDecTelecide.cpp:86
-msgid "NTSC converted from PAL"
-msgstr "NTSC konvertiert von PAL"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:317
+msgid "Global Motion Compensation:"
+msgstr "Global Motion Compensation (GMC):"
 
-#: avidemux/ADM_script/ADM_JSFunctions.cpp:563
-msgid "menu"
-msgstr "Men?"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:331
+msgid "Packed Bitstream:"
+msgstr "Gepackter Bitstrom:"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_animated.cpp:36
-msgid "_Background Image:"
-msgstr "Hintergrund_bild:"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:345
+msgid "Quarter Pixel:"
+msgstr "Viertel-Pixel (Qpel):"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_animated.cpp:36
-msgid "Select background image"
-msgstr "Hintergrundbild ausw?hlen"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:359
+msgid "<b>Extra Video Properties</b>"
+msgstr "<b>Weitere Video Eigenschaften</b>"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_animated.cpp:37
-msgid "_NTSC(default is Pal):"
-msgstr "_NTSC (voreingestellt ist PAL):"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:378
+msgid "Codec:"
+msgstr "Codec:"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_animated.cpp:38
-msgid "Vignette _Width:"
-msgstr "Vignette _Breite:"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:385
+msgid "Channels:"
+msgstr "Kan?le:"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_animated.cpp:39
-msgid "Vignette _Height:"
-msgstr "Vignette _H?he:"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:392
+msgid "Bitrate:"
+msgstr "Bitrate:"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_animated.cpp:42
-msgid "Vignette frame number"
-msgstr "Vignette Bildnummer"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:399
+msgid "Frequency:"
+msgstr "Frequenz:"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_animated.cpp:46
-msgid "Timecode:"
-msgstr "Zeitcode:"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:448
+msgid "File Size:"
+msgstr "Dateigr??e:"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_animated.cpp:53
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_SVCD.cpp:70
-msgid "MPEG-2 Configuration"
-msgstr "MPEG-2 Konfiguration"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:462
+msgid "Variable Bitrate:"
+msgstr "Variable Bitrate:"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioconfig.cpp:56
-msgid "Audio Configuration"
-msgstr "Audio Konfiguration"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:476
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1106
+msgid "<b>Audio</b>"
+msgstr "<b>Audio</b>"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:62
-msgid "_Dynamic range compression"
-msgstr "_Dynamischer Kompressionsbereich"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_threshold.cpp:194
+#: avidemux/ADM_videoFilter/ADM_vidThreshold.cpp:152
+msgid "Threshold Configuration"
+msgstr "Schwellen-Konfiguration"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:64
-msgid "_Time shift (ms):"
-msgstr "Ve_rschiebung (ms):"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_threshold.cpp:395
+#: avidemux/ADM_filter/filter_declaration.cpp:51
+msgid "Threshold"
+msgstr "Schwelle"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:64
-msgid "Time shift value (ms)"
-msgstr "Zeitverschiebungswert (ms)"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_threshold.cpp:417
+msgid "Minimum value to be in-range:"
+msgstr "Minimaler Wert f?r den Innenbereich:"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:72
-msgid "R_esampling (Hz):"
-msgstr "R_esampling (Hz):"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_threshold.cpp:450
+msgid "Maximum value to be in-range:"
+msgstr "Maximale Wert f?r den Innenbereich:"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:72
-msgid "Resampling frequency (Hz)"
-msgstr "Resampling Frequenz (Hz)"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_threshold.cpp:481
+msgid "Output values:   "
+msgstr "Ausgabewerte:"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:81
-msgid "Film to PAL"
-msgstr "Film -> PAL"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_threshold.cpp:488
+msgid "In-range values go black, out-of-range values go white"
+msgstr "Werte im Innenbereich werden schwarz, Werte au?erhalb werden wei?"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:82
-msgid "PAL to Film"
-msgstr "PAL -> Film"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_threshold.cpp:489
+msgid "In-range values go white, out-of-range values go black"
+msgstr "Werte im Innenbereich werden wei?, Werte au?erhalb werden schwarz"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:85
-msgid "_Frame rate change:"
-msgstr "_Bildrate ?ndern:"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_threshold.cpp:495
+msgid "Debugging settings (bits):   "
+msgstr "Fehlersuche Einstellungen (bits):"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:90
-msgid "Automatic (max -3 dB)"
-msgstr "Automatik (max -3dB)"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs.cpp:8
+msgid "Ready"
+msgstr "Fertig"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:91
-msgid "Manual"
-msgstr "Manuell"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs.cpp:8
+msgid "Succeeded"
+msgstr "Gelungen"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:93
-msgid "_Gain mode:"
-msgstr "_Verst?rkungsmodus:"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs.cpp:8
+#: avidemux/gtk_gui.cpp:2276
+msgid "Failed"
+msgstr "Fehlgeschlagen"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:95
-msgid "G_ain value:"
-msgstr "Verst?rk_ungswert"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs.cpp:8
+msgid "Deleted"
+msgstr "Gel?scht"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:97
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_coloryuv.cpp:204
-msgid "Gain"
-msgstr "Verst?rkung"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs.cpp:8
+msgid "Running"
+msgstr "L?uft gerade"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:102
-msgid "No change"
-msgstr "Keine ?nderung"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs.cpp:87
+msgid "  Job Name  "
+msgstr "  Job Name  "
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:105
-msgid "Stereo+surround"
-msgstr "Stereo+Surround"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs.cpp:92
+msgid "Started at"
+msgstr "Gestartet bei"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:106
-msgid "Stereo+center"
-msgstr "Stereo+Center"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs.cpp:96
+msgid "Finished at"
+msgstr "Beendet bei"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:107
-msgid "Stereo+center+surround"
-msgstr "Stereo+Center+Surround"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs.cpp:123
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs.cpp:161
+msgid "Sure!"
+msgstr "Sicher!"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:108
-msgid "Stereo front+stereo rear"
-msgstr "Stereo Front+Stero Rear"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs.cpp:123
+msgid "Delete ALL jobs"
+msgstr "ALLE Jobs l?schen"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:109
-msgid "5 channels"
-msgstr "5 K?n?le"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs.cpp:123
+msgid "Are you sure you want to delete all jobs ?"
+msgstr "Sollen wirklich alle Jobs gel?scht werden ?"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:110
-msgid "5.1"
-msgstr "5.1 Kan?le"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs.cpp:161
+msgid "Delete job"
+msgstr "Job l?schen"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:111
-msgid "Dolby Pro Logic"
-msgstr "Dolby Prologic"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs.cpp:161
+#, c-format
+msgid "Are you sure you want to delete %s job ?"
+msgstr "Soll wirklich der %s Job gel?scht werden ?"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:112
-msgid "Dolby Pro Logic II"
-msgstr "Dolby Prologic II"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs.cpp:170
+msgid "Unknown event"
+msgstr "Unbekanntes Ereignis"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:115
-msgid "_Mixer:"
-msgstr "_Mixer:"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs.cpp:251
+msgid "Jobs"
+msgstr "Jobs"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:119
-msgid "Audio Filters"
-msgstr "Audio Filter"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs.cpp:277
+msgid "Delete All Jobs"
+msgstr "Alle Jobs l?schen"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_bitrateHisto.cpp:59
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_bitrateHisto.cpp:128
-msgid "No data"
-msgstr "Keine Daten"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs.cpp:282
+msgid "Delete Job"
+msgstr "Job l?schen"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_bitrateHisto.cpp:214
-msgid "Max. bitrate:"
-msgstr "Max. Bitrate:"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs.cpp:287
+msgid "Run all jobs"
+msgstr "Alle Jobs starten"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_bitrateHisto.cpp:215
-msgid "Average bitrate:"
-msgstr "Durchschnittl. Bitrate (kb/s):"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs.cpp:292
+msgid "Run Job"
+msgstr "Job starten"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_bitrateHisto.cpp:216
-msgid "Number of I frames:"
-msgstr "Anzahl von I-Bildern:"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_pipe.cpp:78
+msgid "Pipe to"
+msgstr "Weiterleiten zu"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_bitrateHisto.cpp:217
-msgid "Number of P frames:"
-msgstr "Anzahl von P-Bildern:"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_pipe.cpp:87
+msgid "Application path/name (/usr/bin/sox...)"
+msgstr "Programm-Pfad/Name (z.B. /usr/bin/sox...)"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_bitrateHisto.cpp:218
-msgid "Number of B frames:"
-msgstr "Anzahl von B-Bildern:"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_pipe.cpp:96
+msgid "Full parameter line"
+msgstr "Komplette Parameter-Zeile"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_bitrateHisto.cpp:219
-msgid "Max. B frames:"
-msgstr "Max. B-Bilder:"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_vobsub.cpp:81
+msgid "none"
+msgstr "Keine"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_bitrateHisto.cpp:232
-msgid "Bitrate Histogram"
-msgstr "Bitrate Histogramm"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_vobsub.cpp:90
+msgid "Select .idx file"
+msgstr "IDX-Datei ausw?hlen"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp:128
-msgid "Video Codecs"
-msgstr "Video Kodierer"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_vobsub.cpp:101
+msgid "Wrong VobSub parametering"
+msgstr "Falsche VobSub Parametrierung"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp:135
-msgid "Audio Codecs"
-msgstr "Audio Kodierer"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_vobsub.cpp:101
+msgid "The idx/sub file does not set."
+msgstr "Die idx/sub Datei wurde nicht gesetzt."
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp:136
-msgid "Aften"
-msgstr "Aften"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_vobsub.cpp:188
+msgid "VobSub Settings"
+msgstr "VobSub Einstellungen"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp:137
-msgid "amrnb"
-msgstr "amrnb"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_vobsub.cpp:205
+msgid "Select .idx"
+msgstr "IDX ausw?hlen"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp:138
-msgid "FAAC"
-msgstr "FAAC"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_vobsub.cpp:219
+msgid "Select Language :"
+msgstr "Sprache ausw?hlen:"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp:139
-msgid "FAAD2"
-msgstr "FAAD2"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_vobsub.cpp:233
+msgid "Select Sub"
+msgstr "Sub ausw?hlen"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp:140
-msgid "LAME"
-msgstr "LAME"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_vobsub.cpp:246
+msgid "Extra Shrink Factor :"
+msgstr "Extra Schrumpffaktor:"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp:141
-msgid "liba52"
-msgstr "liba52"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_vobsub.cpp:261
+msgid "Shift (ms) :"
+msgstr "Verschiebung (ms) :"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp:142
-msgid "libdca"
-msgstr "libdca"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_vobsub.cpp:275
+msgid "Extra Settings"
+msgstr "Extra Einstellungen"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp:143
-msgid "MAD"
-msgstr "MAD"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_resize.cpp:304
+msgid "Resize"
+msgstr "Gr??e ?ndern"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp:144
-msgid "Vorbis"
-msgstr "Vorbis"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_resize.cpp:318
+msgid " Width "
+msgstr "Breite"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp:156
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:309
-msgid "aRts"
-msgstr "aRts"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_resize.cpp:325
+msgid " Height "
+msgstr "H?he"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp:157
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:315
-msgid "ESD"
-msgstr "ESD"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_resize.cpp:348
+msgid "Source :"
+msgstr "Quelle:"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp:158
-msgid "Fontconfig"
-msgstr "Schriftkonfiguration"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_resize.cpp:354
+msgid "Destination"
+msgstr "Ziel "
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp:159
-msgid "FreeType 2"
-msgstr "FreeType 2"
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp:160
-msgid "Gettext"
-msgstr "Gettext"
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp:161
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:306
-msgid "ALSA"
-msgstr "ALSA"
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp:162
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:321
-msgid "OSS"
-msgstr "OSS"
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp:163
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:328
-msgid "SDL"
-msgstr "SDL"
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp:164
-msgid "XVideo"
-msgstr "XVideo"
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp:166
-msgid "AltiVec"
-msgstr "AltiVec"
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp:167
-msgid "PowerPC"
-msgstr "PowerPC"
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp:168
-msgid "x86"
-msgstr "x86"
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp:169
-msgid "x86-64"
-msgstr "x86-64"
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp:176
-msgid "Codecs"
-msgstr "Kodierer"
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp:177
-msgid "Libraries"
-msgstr "Bibliotheken"
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp:178
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:410
-msgid "CPU"
-msgstr "CPU"
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp:182
-msgid "Built-in Support"
-msgstr "Eingebauter Support"
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp:48
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_resizeWiz.cpp:44
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_resize.cpp:372
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_resize.cpp:394
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp:42
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_resizeWiz.cpp:43
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_SVCD.cpp:42
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_resize.cpp:387
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_resize.cpp:409
 msgid "4:3"
 msgstr "4:3"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp:49
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_resizeWiz.cpp:45
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_resize.cpp:376
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_resize.cpp:398
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp:43
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_resizeWiz.cpp:44
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_SVCD.cpp:43
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_resize.cpp:391
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_resize.cpp:413
 msgid "16:9"
 msgstr "16:9"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp:51
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_SVCD.cpp:45
-msgid "Default"
-msgstr "Voreinstellung"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_resize.cpp:404
+msgid " Error X:"
+msgstr " Fehler X:"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp:52
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_SVCD.cpp:46
-msgid "TMPGEnc"
-msgstr "TMPGEnc"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_resize.cpp:418
+msgid " Error Y:"
+msgstr " Fehler Y:"
 
-# a style of animation originating in Japan that is characterized by stark colorful graphics depicting vibrant characters in action-filled plots often with fantastic or futuristic themes
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp:53
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_SVCD.cpp:47
-msgid "Anime"
-msgstr "Anime (jp.)"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_resize.cpp:432
+msgid "16 round up"
+msgstr "16 aufrunden"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp:54
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_SVCD.cpp:48
-msgid "KVCD"
-msgstr "KVCD"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_resize.cpp:446
+msgid "Bilinear"
+msgstr "Bi-linear"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp:57
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_SVCD.cpp:51
-msgid "Progressive"
-msgstr "Progressiv (Vollbilder)"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_resize.cpp:450
+msgid "Bicubic"
+msgstr "Bi-kubisch"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp:58
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_SVCD.cpp:52
-msgid "Interlaced TFF"
-msgstr "TTF- Halbbildmodus (interlaced)"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_resize.cpp:454
+msgid "Lanczos3"
+msgstr "Lanczos3"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp:59
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_SVCD.cpp:53
-msgid "Interlaced BFF"
-msgstr "BBF-Halbbildmodus (interlaced)"
+# Teile = Gruppe von Pixeln
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_particle.cpp:269
+msgid "Particle Analysis Configuration"
+msgstr "Konfiguration der Teileanalyse"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp:63
-msgid "VCD 40 kB"
-msgstr "VCD 40 kB"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_vcodec.cpp:78
+msgid "Video encoder"
+msgstr "Video Kodierer"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp:64
-msgid "SVCD 112 kB"
-msgstr "SVCD 112 kB"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_vcodec.cpp:92
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1086
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1126
+msgid "Configure"
+msgstr "Konfigurieren"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp:65
-msgid "DVD 224 kB"
-msgstr "DVD 224 kB"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_idx_pg.cpp:39
+msgid "Continue indexing"
+msgstr "Laufende Indizierung"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp:70
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_SVCD.cpp:60
-msgid "Ma_x. bitrate:"
-msgstr "Ma_x. Bitrate:"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_idx_pg.cpp:39
+msgid "Abort Requested"
+msgstr "Abbruch angefordert"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp:71
-msgid "Mi_n. bitrate:"
-msgstr "Mi_n. Bitrate:"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_idx_pg.cpp:39
+msgid "Do you want to abort indexing ?"
+msgstr "Soll die Indizierung abgebrochen werden ?"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp:72
-msgid "_Use Xvid rate control"
-msgstr "_Xvid Bitratenpr?fung verwenden"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_idx_pg.cpp:141
+msgid "Indexing..."
+msgstr "Indizierung..."
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp:74
-msgid "_Buffer size:"
-msgstr "_Puffergr??e:"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_idx_pg.cpp:162
+msgid "Time left :"
+msgstr "Verbleibende Zeit :"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp:76
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_SVCD.cpp:57
-msgid "Aspect _ratio:"
-msgstr "Seitenve_rh?ltnis:"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_idx_pg.cpp:170
+msgid "Timecode :"
+msgstr " Zeitcode :"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp:77
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_SVCD.cpp:58
-msgid "_Matrices:"
-msgstr "_Matrizen:"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_idx_pg.cpp:178
+msgid "Nb pictures seen :"
+msgstr "Verarbeitete Bilder:"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp:78
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flv1.cpp:45
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_SVCD.cpp:59
-msgid "_GOP size:"
-msgstr "_GOP Gr??e:"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_idx_pg.cpp:202
+msgid "Indexing :"
+msgstr "Indizierung :"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp:84
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_SVCD.cpp:66
-msgid "_Interlacing:"
-msgstr "_Interlacing:"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_idx_pg.cpp:210
+msgid "/dev/null"
+msgstr "/dev/null"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp:88
-msgid "libavcodec MPEG-2 Configuration"
-msgstr "libavcodec MPEG-2 Konfiguration"
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flv1.cpp:44
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_bitrate.cpp:116
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_bitrate.cpp:278
-msgid "_Bitrate (kb/s):"
-msgstr "_Bitrate (kb/s):"
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flv1.cpp:49
-msgid "FLV1 Configuration"
-msgstr "FLV1 Konfiguration"
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_gototime.cpp:27
-msgid "_Hours:"
-msgstr "Stun_den:"
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_gototime.cpp:28
-msgid "_Minutes:"
-msgstr "_Minuten:"
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_gototime.cpp:29
-msgid "_Seconds:"
-msgstr "_Sekunden:"
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_gototime.cpp:32
-msgid "Go to Time"
-msgstr "Gehe zur Zeit"
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_jobs_save.cpp:6
-msgid "_Job name:"
-msgstr "_Job Name:"
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_jobs_save.cpp:7
-msgid "Output _File:"
-msgstr "Ausgabe_datei:"
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_jobs_save.cpp:7
-msgid "Select Video To Write"
-msgstr "Zu schreibendes Video ausw?hlen"
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_jobs_save.cpp:10
-msgid "Save Job"
-msgstr "Job speichern"
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:52
-msgid "Full"
-msgstr "Voll"
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:53
-msgid "Log"
-msgstr "Log"
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:54
-msgid "Phods"
-msgstr "Phods"
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:55
-msgid "EPZS"
-msgstr "EPZS"
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:56
-msgid "X1"
-msgstr "X1"
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:60
-msgid "H.263"
-msgstr "H.263"
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:65
-msgid "MB comparison"
-msgstr "MB Vergleich"
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:66
-msgid "Fewest bits (vhq)"
-msgstr "Geringste Bitzahl (vhq)"
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:67
-msgid "Rate distortion"
-msgstr "Verzerrungsgrad"
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:73
-msgid "Matrices"
-msgstr "Matrizen"
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:74
-msgid "Mi_n. quantizer:"
-msgstr "Mi_n. Quantizer:"
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:75
-msgid "Ma_x. quantizer:"
-msgstr "Ma_x. Quantizer:"
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:76
-msgid "Max. quantizer _difference:"
-msgstr "Max. Quantizer-_Unterschied:"
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:78
-msgid "4_MV"
-msgstr "4_MV"
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:79
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1242
-msgid "_Trellis quantization"
-msgstr "_Trellis Quantization"
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:81
-msgid "_Quarter pixel"
-msgstr "_Viertel-Pixel (Qpel)"
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:82
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1025
-msgid "_GMC"
-msgstr "_GMC"
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:85
-msgid "_Number of B frames:"
-msgstr "A_nzahl von B-Bildern:"
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:86
-msgid "_Quantization type:"
-msgstr "_Quantization Typ:"
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:88
-msgid "_Macroblock decision:"
-msgstr "_Makroblock Entscheidung:"
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:90
-msgid "_Filesize tolerance (kb):"
-msgstr "_Dateigr??e Toleranz (kb):"
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:92
-msgid "_Quantizer compression:"
-msgstr "_Quantizer Kompression:"
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:93
-msgid "Quantizer _blur:"
-msgstr "Quantizer _Weichzeichner:"
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:98
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:378
-msgid "User Interface"
-msgstr "Benutzerschnittstelle"
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:101
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1035
-msgid "Advanced Simple Profile"
-msgstr "ASP Profil"
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:108
-msgid "Motion Estimation"
-msgstr "Absch?tzung der Bewegung"
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:112
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid.cpp:313
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1247
-msgid "Quantization"
-msgstr "Quantization"
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:117
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1501
-msgid "Rate Control"
-msgstr "Bitraten-Kontrolle"
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:120
-msgid "libavcodec MPEG-4 configuration"
-msgstr "libavcodec MPEG-4 Konfiguration"
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavDecoder.cpp:26
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_postproc.cpp:22
-msgid "_Swap U and V"
-msgstr "U mit V tau_schen"
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavDecoder.cpp:27
-msgid "Show motion _vectors"
-msgstr "Bewegungs_vektoren anzeigen"
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavDecoder.cpp:29
-msgid "Decoder Options"
-msgstr "Dekodierer Optionen"
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_mjpeg.cpp:37
-msgid "_Swap U&V"
-msgstr "U&V tau_schen"
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_mjpeg.cpp:39
-msgid "MJPEG Configuration"
-msgstr "MJPEG Konfiguration"
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:85
-msgid "Select idx file:"
-msgstr "IDX-Datei ausw?hlen:"
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:86
-msgid "Use GlyphSet (optional):"
-msgstr "Zeichensatz verwenden (optional):"
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:86
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:202
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:373
-msgid "Select GlyphSet file"
-msgstr "Zeichensatzdatei ausw?hlen"
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:87
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:203
-msgid "Output SRT file"
-msgstr "Ausgabe SRT-Datei"
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:87
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:203
-msgid "Save SRT file"
-msgstr "SRT Datei speichern"
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:97
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:214
-msgid "Select input and ouput files"
-msgstr "Eingabe-und Ausgabedateien ausw?hlen"
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:107
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:119
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:238
-msgid "The idx/sub file does not exist."
-msgstr "Die IDX-/SUB-Datei existiert nicht."
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:112
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:231
-msgid "Please Select a valid output SRT file."
-msgstr "Bitte eine g?ltige SRT-Ausgabedatei ausw?hlen"
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:128
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:247
-msgid "Cannot load the glyphset file."
-msgstr "Zeichensatzdatei kann nicht geladen werden."
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:147
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:268
-msgid "GlyphSet filename"
-msgstr "Zeichensatz Dateiname"
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:147
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:268
-msgid "Save GlyphSet file"
-msgstr "Zeichensatzdatei speichern"
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:149
-msgid "Save Glyph"
-msgstr "Schriftzeichen speichern"
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:200
-msgid "Input TS:"
-msgstr "Eingang TS:"
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:200
-msgid "Select TS file"
-msgstr "TS Datei ausw?hlen"
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:201
-msgid "Subtitle PID:"
-msgstr "Untertitel PID:"
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:202
-msgid "Use glyphset (optional):"
-msgstr "Zeichensatz verwenden (optional):"
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:225
-msgid "Please Select a valid TS file."
-msgstr "Bitte eine g?ltige TS Datei ausw?hlen."
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:270
-msgid "Save GlyphSet"
-msgstr "Zeichensatz speichern"
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_postproc.cpp:21
-#: avidemux/ADM_videoFilter/ADM_vidForcedPP.cpp:60
-msgid "_Filter strength:"
-msgstr "_Filtersch?rfe:"
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_postproc.cpp:32
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:350
-#: avidemux/ADM_videoFilter/ADM_vidForcedPP.cpp:72
-msgid "_Horizontal deblocking"
-msgstr "_Horizontal entblockieren"
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_postproc.cpp:33
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:351
-#: avidemux/ADM_videoFilter/ADM_vidForcedPP.cpp:73
-msgid "_Vertical deblocking"
-msgstr "_Vertikal entblockieren"
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_postproc.cpp:34
-#: avidemux/ADM_videoFilter/ADM_vidForcedPP.cpp:74
-msgid "_Deringing"
-msgstr "_De-Ringing"
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_postproc.cpp:38
-msgid "Postprocessing"
-msgstr ""
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:190
-msgid "_Use systray while encoding"
-msgstr "Systemablage w?hrend des Kodierens ben_utzen"
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:191
-msgid "_Accept non-standard audio frequency for DVD"
-msgstr "Erlaube _Nicht-Standard Audio-Frequenz f?r DVD"
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:192
-msgid "_Use libavcodec MPEG-2 decoder"
-msgstr ""
-"MPEG Dekodierer libavcodec ben_utzen \n"
-"(ggf. Probleme bei Videos im Halbbildmodus!)"
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:193
-msgid "Create _OpenDML files"
-msgstr "_OpenDML-Dateien erstellen"
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:194
-msgid "Automatically _index MPEG files"
-msgstr "MPEG-Dateien automatisch _indizieren"
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:195
-msgid "Automatically _swap A and B if A>B"
-msgstr "Automatisch A mit B tauschen, wenn A > B"
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:196
-msgid "_Disable NUV audio sync"
-msgstr "NUV Audio-Sync _deaktivieren"
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:198
-msgid "Automatically _build VBR map"
-msgstr "VBR-Zeitkarte automatisch _erstellen"
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:199
-msgid "Automatically _rebuild index"
-msgstr "Index automatisch wieder erstellen"
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:200
-msgid "Automatically remove _packed bitstream"
-msgstr "Ge_packten Bitstream automatisch entfernen"
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:202
-msgid "SIMD"
-msgstr "SIMD"
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:204
-msgid "Enable all SIMD"
-msgstr "Alle SIMD aktivieren"
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:205
-msgid "Enable MMX"
-msgstr "MMX aktivieren"
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:206
-msgid "Enable MMXEXT"
-msgstr "MMXEXT aktivieren"
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:207
-msgid "Enable 3DNOW"
-msgstr "3DNOW aktivieren"
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:208
-msgid "Enable 3DNOWEXT"
-msgstr "3DNOWEXT aktivieren"
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:209
-msgid "Enable SSE"
-msgstr "SSE aktivieren"
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:210
-msgid "Enable SSE2"
-msgstr "SSE2 aktivieren"
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:211
-msgid "Enable SSE3"
-msgstr "SSE3 aktivieren"
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:212
-msgid "Enable SSSE3"
-msgstr "SSSE3 aktivieren"
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:233
-msgid "_lavc threads:"
-msgstr "_lavc Threads:"
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:234
-msgid "_x264 threads:"
-msgstr "_x264 Threads:"
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:235
-msgid "X_vid threads:"
-msgstr "X_vid Threads:"
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:237
-msgid "Multi-threading"
-msgstr "Multi-Threading"
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:243
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:845
-msgid "High"
-msgstr "Hoch"
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:244
-msgid "Above normal"
-msgstr "?ber normal"
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:246
-msgid "Below normal"
-msgstr "Unter normal"
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:247
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:849
-msgid "Low"
-msgstr "Niedrig"
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:249
-msgid "_Encoding priority:"
-msgstr "Kodi_erungspriorit?t:"
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:250
-msgid "_Indexing/unpacking priority:"
-msgstr "_Indizieren/Entpacken Priorit?t:"
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:251
-msgid "_Playback priority:"
-msgstr "_Wiedergabe Priorit?t:"
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:253
-msgid "Prioritisation"
-msgstr "Priorisierung"
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:258
-msgid "_Split MPEG files every (MB):"
-msgstr "Mpeg_s aufteilen alle (MB):"
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:260
-msgid "_Use alternative tag for MP3 in .mp4"
-msgstr "Alternatives 'Tag' f?r MP3 in .mp4 ben_utzen"
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:264
-msgid "XVideo (best)"
-msgstr "XVideo (bestens)"
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:268
-msgid "SDL (MS Windows GDI)"
-msgstr ""
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:269
-msgid "SDL (MS Windows DirectX)"
-msgstr ""
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:271
-msgid "SDL (good)"
-msgstr "SDL (gut)"
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:275
-msgid "Video _display:"
-msgstr "Video-Anzeige:"
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:280
-msgid "No alerts"
-msgstr "Keine Meldungen anzeigen"
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:281
-msgid "Display only error alerts"
-msgstr "Nur Fehlermeldungen anzeigen"
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:282
-msgid "Display all alerts"
-msgstr "Alle Meldungen anzeigen"
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:284
-msgid "_Message level:"
-msgstr "Anzeigestufe f?r Meldungen:"
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:290
-msgid "Master"
-msgstr "Master"
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:291
-msgid "_Volume control:"
-msgstr "Lautst?rkeregler:"
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:296
-msgid "No downmixing"
-msgstr "Nicht herunter mischen"
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:298
-msgid "Pro Logic"
-msgstr "Dolby ProLogic"
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:299
-msgid "Pro Logic II"
-msgstr "Dolby ProLogic II"
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:301
-msgid "_Local playback downmixing:"
-msgstr "_Lokale Wiedergabe herunter mischen:"
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:312
-msgid "Core Audio"
-msgstr "Zentrales Audio"
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:318
-msgid "JACK"
-msgstr "JACK"
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:324
-msgid "Pulse Audio"
-msgstr ""
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:331
-msgid "Win32"
-msgstr "Win32"
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:336
-msgid "_Audio output:"
-msgstr "_Audio-Ausgabe:"
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:339
-msgid "ALSA _device:"
-msgstr "ALSA _Ger?t:"
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:352
-msgid "De_ringing"
-msgstr "De-_Ringing"
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:353
-#: avidemux/ADM_videoFilter/ADM_vidMSharpen.cpp:167
-#: avidemux/ADM_videoFilter/ADM_vidMsmooth.cpp:197
-msgid "_Strength:"
-msgstr "_St?rke:"
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:354
-msgid "Default Postprocessing"
-msgstr "Voreingestellte Nachbearbeitung"
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:368
-msgid "_Filter directory:"
-msgstr "_Filter-Verzeichnis:"
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:368
-msgid "Select filter directory"
-msgstr "Filter-Verzeichnis ausw?hlen"
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:369
-msgid "_Load external filters"
-msgstr "Externe Filter _laden"
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:372
-msgid "Use _Global GlyphSet"
-msgstr "_Globalen Zeichensatz verwenden"
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:373
-msgid "Gl_yphSet:"
-msgstr "Zeichen_satz:"
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:382
-msgid "Automation"
-msgstr "Automation"
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:386
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_bindings.cpp:539
-msgid "Input"
-msgstr "Eingang"
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:390
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_bindings.cpp:540
-msgid "Output"
-msgstr "Ausgabe"
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:395
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:398
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:401
-msgid "Audio"
-msgstr "Audio"
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:406
-#: avidemux/gtk_gui.cpp:2014
-msgid "Video"
-msgstr "Video"
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:414
-msgid "Threading"
-msgstr "Threading"
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:418
-msgid "Global GlyphSet"
-msgstr "Globaler Zeichensatz"
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:422
-msgid "External Filters"
-msgstr "Externe Filter"
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:426
-msgid "Preferences"
-msgstr "Einstellungen"
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_requant.cpp:48
-msgid "_Shrink Factor:"
-msgstr "_Schrumpffaktor:"
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_requant.cpp:51
-msgid "Requant Configuration"
-msgstr "Requant Konfiguration"
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_resizeWiz.cpp:33
-msgid "VCD"
-msgstr "VCD"
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_resizeWiz.cpp:34
-msgid "SVCD"
-msgstr "SVCD"
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_resizeWiz.cpp:35
-msgid "DVD"
-msgstr "DVD"
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_resizeWiz.cpp:36
-msgid "DVD half D1"
-msgstr "DVD halb-D1"
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_resizeWiz.cpp:37
-msgid "PSP 480*272"
-msgstr "PSP 480*272"
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_resizeWiz.cpp:38
-msgid "PSP full res (720*480"
-msgstr "PSP gro? (720*480)"
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_resizeWiz.cpp:54
-msgid "_Target type:"
-msgstr "_Zieltyp:"
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_resizeWiz.cpp:55
-msgid "_Source aspect ratio:"
-msgstr "_Quell-Seitenverh?ltnis:"
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_resizeWiz.cpp:56
-msgid "_Destination aspect ratio:"
-msgstr "_Ziel-Seitenverh?ltnis:"
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_resizeWiz.cpp:61
-msgid "Auto Wizard"
-msgstr "Auto Wizard"
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_srt.cpp:51
-msgid "Arabic"
-msgstr ""
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_srt.cpp:52
-msgid "Baltic"
-msgstr ""
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_srt.cpp:53
-msgid "Chinese Simplified (GB2312)"
-msgstr ""
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_srt.cpp:54
-msgid "Chinese Traditional (Big5)"
-msgstr ""
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_srt.cpp:55
-msgid "Cyrillic"
-msgstr ""
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_srt.cpp:56
-msgid "Latin-1 (Western European)"
-msgstr ""
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_srt.cpp:57
-msgid "Latin-2 (Central European)"
-msgstr ""
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_srt.cpp:58
-msgid "Greek"
-msgstr ""
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_srt.cpp:59
-msgid "Hebrew"
-msgstr ""
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_srt.cpp:60
-msgid "Slovene"
-msgstr ""
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_srt.cpp:61
-msgid "Turkish"
-msgstr ""
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_srt.cpp:62
-msgid "UTF-8"
-msgstr ""
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_srt.cpp:63
-msgid "UTF-16"
-msgstr ""
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_srt.cpp:98
-msgid "_Subtitle file:"
-msgstr "Unter_titel Datei:"
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_srt.cpp:98
-#: avidemux/ADM_videoFilter/ADM_vidASS.cpp:87
-msgid "Select Subtitle file"
-msgstr "Untertitel Datei ausw?hlen"
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_srt.cpp:99
-msgid "_Font (TTF):"
-msgstr "Schri_ft (TrueType):"
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_srt.cpp:99
-msgid "Select TTF file"
-msgstr "TTF Datei ausw?hlen"
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_srt.cpp:114
-msgid "_Encoding:"
-msgstr "Kodierung:"
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_srt.cpp:116
-msgid "S_elect C_olor"
-msgstr "Farb_e ausw?hlen"
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_srt.cpp:117
-msgid "Set Size and _Position"
-msgstr "Gr??e und _Position setzen"
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_srt.cpp:118
-msgid "_Auto split"
-msgstr "_Automatisch teilen"
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_srt.cpp:119
-msgid "_Delay (ms):"
-msgstr "Ver_z?gerung (ms):"
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:45
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:51
-msgid "Auto (might not work)"
-msgstr "Auto (arbeitet evtl. nicht)"
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:46
-#: avidemux/ADM_videoFilter/ADM_vidYadif.cpp:176
-msgid "Top field first"
-msgstr "Oberes Feld zuerst"
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:47
-#: avidemux/ADM_videoFilter/ADM_vidYadif.cpp:175
-msgid "Bottom field first"
-msgstr "Unteres Feld zuerst"
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:52
-msgid "Bottom field (keep top)"
-msgstr "Unteres Feld (oben halten)"
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:53
-msgid "Top field (keep bottom)"
-msgstr "Oberes Feld (unten halten)"
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:58
-msgid "Cubic interpolation"
-msgstr "Kubische Interpolation"
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:59
-msgid "Modified ELA"
-msgstr "Ge?nderte ELA"
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:60
-msgid "Kernel interpolation"
-msgstr "Filter-Interpolation"
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:61
-msgid "Modified ELA-2"
-msgstr "Ge?nderte ELA-2"
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:66
-msgid "4 fields check"
-msgstr "4-Felder Pr?fung"
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:67
-msgid "5 fields check"
-msgstr "5-Felder Pr?fung"
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:68
-msgid "4 fields check (no avg)"
-msgstr "4-Felder Pr?fung (kein Durchschnitt)"
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:69
-msgid "5 fields check (no avg)"
-msgstr "5-Felder Pr?fung (kein Durchschnitt)"
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:75
-msgid "No link"
-msgstr "Keine Verkn?pfung"
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:76
-msgid "Full link"
-msgstr "Vollst?ndige Verkn?pfung"
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:77
-msgid "Y to UV"
-msgstr "Y nach UV"
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:78
-msgid "UV to Y"
-msgstr "UV nach Y"
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:82
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:636
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:652
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:668
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:698
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:663
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:670
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:677
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:790
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_idx_pg.cpp:166
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_idx_pg.cpp:206
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_ocr.cpp:79
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_ocr.cpp:93
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_resize.cpp:426
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_resize.cpp:440
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1218
-msgid "0"
-msgstr "0"
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:83
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:862
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:873
-msgid "1"
-msgstr "1"
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:84
-msgid "2"
-msgstr "2"
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:91
-#: avidemux/ADM_videoFilter/ADM_vidDecTelecide.cpp:111
-#: avidemux/ADM_videoFilter/ADM_vidDGbob.cpp:90
-#: avidemux/ADM_videoFilter/ADM_vidKernelDeint.cpp:92
-msgid "_Field order:"
-msgstr "_Feldreihenfolge:"
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:92
-msgid "_Interpolate:"
-msgstr "_Interpoliere:"
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:94
-msgid "_Type:"
-msgstr "_Typ:"
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:95
-msgid "_MntMode:"
-msgstr "_Mnt Modus:"
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:96
-msgid "_Link:"
-msgstr "_Verkn?pfung:"
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:97
-msgid "_AP type:"
-msgstr "_AP Typ:"
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:100
-msgid "Use ch_roma to evalute"
-msgstr "Farbintensit?t zur ?berpr?fung benutzen"
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:101
-msgid "Try _weave"
-msgstr "Versuche 'Weave'"
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:102
-msgid "_Denoise"
-msgstr "En_trauschen"
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:103
-#: avidemux/ADM_videoFilter/ADM_vidKernelDeint.cpp:94
-msgid "_Sharp"
-msgstr "_Sch?rfen"
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:104
-msgid "_Evalute all frames"
-msgstr "Alle Bilder ?b_erpr?fen"
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:107
-msgid "Motion threshold, l_uma:"
-msgstr "Beweg_ungsschwelle, Brillianz:"
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:108
-msgid "Motion threshold, c_hroma:"
-msgstr "Bewegungssc_hwelle, Farbintensit?t:"
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:109
-msgid "Area com_bing threshold:"
-msgstr "Bereich f?r kammartige Schwelle:"
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:110
-msgid "Combe_d threshold:"
-msgstr "Kammartige Schwelle:"
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:111
-msgid "Artefact _protection threshold:"
-msgstr "Artefakte-_gesch?tzte Schwelle:"
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:112
-msgid "Debug:"
-msgstr "Fehlersuche:"
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_v2v.cpp:34
-msgid "_VOB file(s):"
-msgstr "_Vob Datei(en):"
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_v2v.cpp:34
-msgid "Select VOB file(s)"
-msgstr "VOB Datei(en) ausw?hlen"
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_v2v.cpp:35
-msgid "_IFO file:"
-msgstr "_IFO Datei:"
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_v2v.cpp:35
-msgid "Select IFO file"
-msgstr "IFO Datei ausw?hlen"
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_v2v.cpp:36
-msgid "VobSub file:"
-msgstr "VobSub Datei:"
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_v2v.cpp:36
-msgid "Select VobSub file"
-msgstr "VobSub Datei ausw?hlen"
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_v2v.cpp:41
-msgid "VOB to VobSub"
-msgstr "VOB -> VobSub"
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_v2v.cpp:45
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_v2v.cpp:50
-msgid "The selected vobfile does not exist"
-msgstr "Die ausgew?hlte VOB Datei existiert nicht"
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_v2v.cpp:55
-msgid "Please select a correct VobSub path/dir"
-msgstr "Bitte korrektes VobSub Verzeichnis ausw?hlen"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_about.cpp:46
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_about.cpp:33
 msgid "and all the others."
-msgstr ""
+msgstr "und alle anderen."
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_about.cpp:69
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_about.cpp:56
 msgid "Multi-platform Video Editor"
-msgstr ""
+msgstr "Multi-Plattform Video Editor"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_about.cpp:70
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_about.cpp:57
 msgid ""
 "Avidemux is free software; you can redistribute it and/or modify it\n"
 "under the terms of the GNU General Public License version 2\n"
@@ -3398,8 +1238,7 @@
 "\t\t       Version 2, June 1991\n"
 "\n"
 " Copyright (C) 1989, 1991 Free Software Foundation, Inc.\n"
-"                       51 Franklin St, Fifth Floor, Boston, MA  02110-1301  "
-"USA\n"
+"                       51 Franklin St, Fifth Floor, Boston, MA  02110-1301  USA\n"
 " Everyone is permitted to copy and distribute verbatim copies\n"
 " of this license document, but changing it is not allowed.\n"
 "\n"
@@ -3534,8 +1373,7 @@
 "\n"
 "    a) Accompany it with the complete corresponding machine-readable\n"
 "    source code, which must be distributed under the terms of Sections\n"
-"    1 and 2 above on a medium customarily used for software interchange; "
-"or,\n"
+"    1 and 2 above on a medium customarily used for software interchange; or,\n"
 "\n"
 "    b) Accompany it with a written offer, valid for at least three\n"
 "    years, to give any third party, for a charge no more than your\n"
@@ -3642,8 +1480,7 @@
 "later version\", you have the option of following the terms and conditions\n"
 "either of that version or of any later version published by the Free\n"
 "Software Foundation.  If the Program does not specify a version number of\n"
-"this License, you may choose any version ever published by the Free "
-"Software\n"
+"this License, you may choose any version ever published by the Free Software\n"
 "Foundation.\n"
 "\n"
 "  10. If you wish to incorporate parts of the Program into other free\n"
@@ -3659,8 +1496,7 @@
 "  11. BECAUSE THE PROGRAM IS LICENSED FREE OF CHARGE, THERE IS NO WARRANTY\n"
 "FOR THE PROGRAM, TO THE EXTENT PERMITTED BY APPLICABLE LAW.  EXCEPT WHEN\n"
 "OTHERWISE STATED IN WRITING THE COPYRIGHT HOLDERS AND/OR OTHER PARTIES\n"
-"PROVIDE THE PROGRAM \"AS IS\" WITHOUT WARRANTY OF ANY KIND, EITHER "
-"EXPRESSED\n"
+"PROVIDE THE PROGRAM \"AS IS\" WITHOUT WARRANTY OF ANY KIND, EITHER EXPRESSED\n"
 "OR IMPLIED, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF\n"
 "MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  THE ENTIRE RISK AS\n"
 "TO THE QUALITY AND PERFORMANCE OF THE PROGRAM IS WITH YOU.  SHOULD THE\n"
@@ -3705,8 +1541,7 @@
 "\n"
 "    You should have received a copy of the GNU General Public License\n"
 "    along with this program; if not, write to the Free Software\n"
-"    Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA  02110-1301  "
-"USA\n"
+"    Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA  02110-1301  USA\n"
 "\n"
 "\n"
 "Also add information on how to contact you by electronic and paper mail.\n"
@@ -3715,8 +1550,7 @@
 "when it starts in an interactive mode:\n"
 "\n"
 "    Gnomovision version 69, Copyright (C) year name of author\n"
-"    Gnomovision comes with ABSOLUTELY NO WARRANTY; for details type `show "
-"w'.\n"
+"    Gnomovision comes with ABSOLUTELY NO WARRANTY; for details type `show w'.\n"
 "    This is free software, and you are welcome to redistribute it\n"
 "    under certain conditions; type `show c' for details.\n"
 "\n"
@@ -3742,771 +1576,23 @@
 "Public License instead of this License."
 msgstr ""
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_about.cpp:75
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_about.cpp:62
 msgid "translator-credits"
 msgstr "Dank an ?bersetzer"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_acodec.cpp:141
-msgid "AudioCodec"
-msgstr "Audio Codec"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_acodec.cpp:166
-msgid "Configure codec"
-msgstr "Konfiguriere Codec"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_asharp.cpp:75
-msgid "ASHARP"
-msgstr "ASHARP"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_asharp.cpp:187
-msgid "ASharp by MarcFD"
-msgstr "ASharp von MarcFD"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_asharp.cpp:200
-msgid "Threshold :"
-msgstr "Schwelle :"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_asharp.cpp:208
-msgid "Strength :"
-msgstr "St?rke :"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_asharp.cpp:216
-msgid "Block Adaptative :"
-msgstr "Block anpassungsf?hig:"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_asharp.cpp:224
-msgid "Unknown flag :"
-msgstr "Unbekannter Schalter:"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_asharp.cpp:256
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_ocr.cpp:161
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:255
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:276
-msgid " "
-msgstr " "
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_busy.cpp:120
-msgid "Busy"
-msgstr "arbeitet"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:405
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1000
-msgid "Calculator"
-msgstr "Taschenrechner"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:418
-msgid "<b>Target</b>"
-msgstr "<b>Ziel</b>"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:445
-msgid "Duration:"
-msgstr "Dauer:"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:451
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:804
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_idx_pg.cpp:198
-msgid "00:00:00"
-msgstr "00:00:00"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:465
-msgid "_Medium:"
-msgstr "_Medium:"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:476
-msgid "_Format:"
-msgstr "_Format:"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:487
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:545
-msgid "Total size (custom)"
-msgstr "Gesamtgr??e (individuell)"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:497
-msgid "_Custom size (MB):"
-msgstr "_Individuelle Gr??e (MB):"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:511
-msgid "Output container format"
-msgstr "Ausgabe-Container-Format"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:538
-msgid "Total size"
-msgstr "Gesamtgr??e"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:542
-msgid "1x 80 min. CD"
-msgstr "1x 80 min. CD"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:547
-msgid "2x 80 min. CD"
-msgstr "2x 80 min. CD"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:551
-msgid "1x 74 min. CD"
-msgstr "1x 74 min. CD"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:555
-msgid "2x 74 min. CD"
-msgstr "2x 74 min. CD"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:559
-msgid "DVD5"
-msgstr "DVD5"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:563
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:876
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_threadCount.cpp:87
-msgid "Custom"
-msgstr "Individuell"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:575
-msgid "Track _1:"
-msgstr "Spur _1:"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:583
-msgid "Audio bitrate in kb/s for track 1 (0 for no audio)"
-msgstr "Audio Bitrate in kb/s f?r Spur 1 (0 wenn ohne Audio)"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:590
-msgid "Track _2: "
-msgstr "Spur _2: "
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:598
-msgid "Audio bitrate in kb/s for track 2 (optional)"
-msgstr "Audio Bitrate in kb/s f?r Spur 2 (optional)"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:602
-msgid "<b>Audio Bitrate</b>"
-msgstr "<b>Audio Bitrate</b>"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:628
-msgid "Audio size (MB):"
-msgstr "Audio Gr??e (MB):"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:644
-msgid "Video size (MB):"
-msgstr "Video Gr??e (MB):"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:660
-msgid "Total size (MB):"
-msgstr "Gesamtgr??e (MB):"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:682
-msgid "Video bitrate:"
-msgstr "Video Bitrate:"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:690
-msgid "Bits per pixel:"
-msgstr "Bits pro Pixel:"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:706
-msgid "0.0"
-msgstr "0.0"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:714
-msgid "<b>Result</b>"
-msgstr "<b>Ergebnis</b>"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_chromaShift.cpp:72
-msgid "Chroma Shift"
-msgstr "Farbintensit?ts-Verschiebung"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_chromaShift.cpp:189
-msgid "ChromaShift"
-msgstr "Farbintensit?ts-Verschiebung"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_chromaShift.cpp:203
-msgid "U Shift :"
-msgstr "U Verschiebung:"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_chromaShift.cpp:210
-msgid "V Shift :"
-msgstr "V Verschiebung:"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_chromaShift.cpp:252
-msgid "<b>Preview</b>"
-msgstr "<b>Vorschau</b>"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_cnr2.cpp:141
-msgid "Chroma Noise Reduction 2"
-msgstr "Farbintensit?t Rauschreduktion 2"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_cnr2.cpp:166
-msgid "<b>Scene change Treshold</b>"
-msgstr "<b>Schwelle f?r Szenenwechsel</b>"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_cnr2.cpp:185
-msgid "Sensibility"
-msgstr "Empfindlichkeit"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_cnr2.cpp:193
-msgid "Max"
-msgstr "Max"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_cnr2.cpp:208
-msgid "Luma :"
-msgstr "Brillianz:"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_cnr2.cpp:215
-msgid "Chroma U :"
-msgstr "Farbintensit?t U:"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_cnr2.cpp:222
-msgid "Chroma V :"
-msgstr "Farbintensit?t V:"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_cnr2.cpp:265
-msgid "Narrow"
-msgstr "N?he"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_cnr2.cpp:290
-msgid "<b>Settings</b>"
-msgstr "<b>Einstellungen</b>"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_cnr2.cpp:309
-msgid "Use also chroma to detect scene change"
-msgstr "Auch Farbintensit?t benutzen, um Szenenwechsel zu ermitteln"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_cnr2.cpp:313
-msgid "<b>Mode</b>"
-msgstr "<b>Modus</b>"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_coloryuv.cpp:159
-msgid "ColorYuv (From avisynth)"
-msgstr "Yuv-Farben (von AviSynth)"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_coloryuv.cpp:190
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_contrast.cpp:225
-msgid "Brightness"
-msgstr "Helligkeit"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_coloryuv.cpp:197
-msgid "Gamma"
-msgstr "Gamma"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_coloryuv.cpp:211
-msgid "Luma Y"
-msgstr "Brillianz Y"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_coloryuv.cpp:218
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_contrast.cpp:243
-msgid "Chroma U"
-msgstr "Farbintensit?t U"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_coloryuv.cpp:225
-msgid "Chroma V"
-msgstr "Farbintensit?t V"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_coloryuv.cpp:328
-msgid "<b>Color Correction Matrix</b>"
-msgstr "<b>Farbkorrektur Matrix</b>"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_coloryuv.cpp:351
-msgid "Matrix"
-msgstr "Matrix"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_coloryuv.cpp:358
-msgid "Opt"
-msgstr "Opt"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_coloryuv.cpp:365
-msgid "Level"
-msgstr "Stufe"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_coloryuv.cpp:378
-msgid "Rec.709"
-msgstr "Rec.709"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_coloryuv.cpp:386
-msgid "Coring"
-msgstr "Kern"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_coloryuv.cpp:394
-msgid "TV->PC"
-msgstr "TV->PC"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_coloryuv.cpp:395
-msgid "PC->TV"
-msgstr "PC->TV"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_coloryuv.cpp:396
-msgid "PC->TV.Y"
-msgstr "PC->TV.Y"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_coloryuv.cpp:402
-msgid ""
-"<b>Matrix Warning :</b>\n"
-"all above values are normalized to 256!"
-msgstr ""
-"<b>Matrix Warnung :</b>\n"
-"alle dar?ber liegenden Werte werden auf 256 normalisiert!"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_coloryuv.cpp:408
-msgid "AutoGain"
-msgstr "Auto-Verst?rkung"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_coloryuv.cpp:412
-msgid "Display Stats"
-msgstr "Anzeigestatus"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_coloryuv.cpp:416
-msgid "AutoWhite"
-msgstr "Auto-Wei?"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_coloryuv.cpp:420
-msgid "<b>frame2</b>"
-msgstr "<b>Bild2</b>"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_contrast.cpp:239
-msgid "Luma"
-msgstr "Brillianz"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_contrast.cpp:247
-msgid "Chroma v"
-msgstr "Farbintensit?t V"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_crop.cpp:252
-#: avidemux/ADM_videoFilter/ADM_vidCrop.cpp:193
-msgid "Crop Settings"
-msgstr "Zuschnitt Einstellungen"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_crop.cpp:277
-msgid "Crop Left:"
-msgstr ""
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_crop.cpp:284
-msgid "Crop Right:"
-msgstr "Zuschnitt Rechts:"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_crop.cpp:291
-msgid "Crop Top:"
-msgstr "Zuschnitt Oben:"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_crop.cpp:298
-msgid "Crop Bottom:"
-msgstr "Zuschnitt Unten:"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_crop.cpp:341
-msgid "Auto Crop"
-msgstr ""
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:163
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:185
-msgid "Privileges Required"
-msgstr "Rechte erforderlich"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:163
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:185
-msgid "Root privileges are required to perform this operation."
-msgstr "F?r diese Operation sind Root-Rechte erforderlich."
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:206
-msgid "Shutting down"
-msgstr "Herunter fahren"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:383
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_working.cpp:150
-#, c-format
-msgid "%d%%"
-msgstr "%d%%"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:406
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:413
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:420
-#, c-format
-msgid "%lu MB"
-msgstr "%lu MB"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:516
-msgid "Encoding..."
-msgstr "Kodieren..."
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:547
-msgid "<b>Phase:</b>"
-msgstr "<b>Phase:</b>"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:562
-msgid "<b>Video Codec:</b>"
-msgstr "<b>Video Codec:</b>"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:577
-msgid "<b>Audio Codec:</b>"
-msgstr "<b>Audio Codec:</b>"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:592
-msgid "<b>Container:</b>"
-msgstr "<b>Container:</b>"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:624
-msgid "<b>Processed Frames:</b>"
-msgstr "<b>Verarbeitete Bilder:</b>"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:632
-msgid "<b>Total Frames:</b>"
-msgstr "<b>Gesamte Bilder:</b>"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:640
-msgid "<b>Quantiser:</b>"
-msgstr "<b>Quantizer:</b>"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:648
-msgid "<b>Average Bitrate:</b>"
-msgstr "<b>Durchschnittl. Bitrate (kb/s):</b>"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:656
-msgid "0 kB/s"
-msgstr "0 kb/s"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:701
-msgid "<b>Video Size:</b>"
-msgstr "<b>Video Gr??e:</b>"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:709
-msgid "<b>Audio Size:</b>"
-msgstr "<b>Audio Gr??e:</b>"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:717
-msgid "<b>Total Size:</b>"
-msgstr "<b>Gesamtgr??e:</b>"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:725
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:733
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:741
-msgid "0 MB"
-msgstr "0 MB"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:766
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_working.cpp:244
-msgid "<b>Elapsed:</b>"
-msgstr "<b>Vergangene Zeit:</b>"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:774
-msgid "<b>Time Remaining:</b>"
-msgstr "<b>Verbleibende Zeit:</b>"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:782
-msgid "<b>Frames/sec:</b>"
-msgstr "<b>Bilder/Sek.:</b>"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:828
-msgid "Shut down computer when finished"
-msgstr "Danach Rechner herunter fahren"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:836
-msgid "Priority:"
-msgstr "Priorit?t:"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:846
-msgid "Above Normal"
-msgstr "?ber Normal"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:848
-msgid "Below Normal"
-msgstr "Unter Normal"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:886
-msgid "Pause / Abort"
-msgstr "Pause / Abbruch"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_eq2.cpp:235
-msgid "Brigh_tness:"
-msgstr "Helligkei_t:"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_eq2.cpp:243
-msgid "_Saturation:"
-msgstr "_S?ttigung:"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_eq2.cpp:278
-msgid "_Contrast:"
-msgstr "_Kontrast:"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_eq2.cpp:304
-msgid "_Initial:"
-msgstr "Anfangswert:"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_eq2.cpp:330
-msgid "_Red:"
-msgstr "_Rot:"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_eq2.cpp:347
-msgid "_Green:"
-msgstr "_Gr?n:"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_eq2.cpp:355
-msgid "_Blue:"
-msgstr "_Blau:"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_eq2.cpp:363
-msgid "_Weight:"
-msgstr "Ge_wichtung:"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_eq2.cpp:389
-msgid "<b>Gamma</b>"
-msgstr "<b>Gamma</b>"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_equalizer.cpp:450
-msgid "Equalizer"
-msgstr "Equalizer"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_exLame.cpp:80
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_exLame.cpp:63
 msgid "Lame command"
 msgstr "Lame Befehl"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_exLame.cpp:89
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_exLame.cpp:72
 msgid "Enter parameters (i.e. -b 192 -m s ...)"
 msgstr "Parameter eingeben (z.B. -b 192 -m -s ...)"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_hue.cpp:78
-msgid "Hue"
-msgstr "Farbton"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_hue.cpp:175
-msgid "Hue/Saturation"
-msgstr "Farbton/S?ttigung"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_hue.cpp:189
-msgid "<b>Hue:</b>"
-msgstr "<b>Farbton:</b>"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_hue.cpp:197
-msgid "<b>Saturation:</b>"
-msgstr "<b>S?ttigung:</b>"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_idx_pg.cpp:51
-msgid "Continue indexing"
-msgstr "Laufende Indizierung"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_idx_pg.cpp:51
-msgid "Abort Requested"
-msgstr "Abbruch angefordert"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_idx_pg.cpp:51
-msgid "Do you want to abort indexing ?"
-msgstr "Soll die Indizierung abgebrochen werden ?"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_idx_pg.cpp:153
-msgid "Indexing..."
-msgstr "Indizierung..."
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_idx_pg.cpp:174
-msgid "Time left :"
-msgstr "Verbleibende Zeit :"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_idx_pg.cpp:182
-msgid "Timecode :"
-msgstr " Zeitcode :"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_idx_pg.cpp:190
-msgid "Nb pictures seen :"
-msgstr "Verarbeitete Bilder:"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_idx_pg.cpp:214
-msgid "Indexing :"
-msgstr "Indizierung :"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_idx_pg.cpp:222
-msgid "/dev/null"
-msgstr "/dev/null"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs.cpp:25
-msgid "Ready"
-msgstr "Fertig"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs.cpp:25
-msgid "Succeeded"
-msgstr "Gelungen"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs.cpp:25
-#: avidemux/gtk_gui.cpp:2292
-msgid "Failed"
-msgstr "Fehlgeschlagen"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs.cpp:25
-msgid "Deleted"
-msgstr "Gel?scht"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs.cpp:25
-msgid "Running"
-msgstr "L?uft gerade"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs.cpp:104
-msgid "  Job Name  "
-msgstr "  Job Name  "
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs.cpp:109
-msgid "Started at"
-msgstr "Gestartet bei"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs.cpp:113
-msgid "Finished at"
-msgstr "Beendet bei"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs.cpp:140
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs.cpp:178
-msgid "Sure!"
-msgstr "Sicher!"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs.cpp:140
-msgid "Delete ALL jobs"
-msgstr "ALLE Jobs l?schen"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs.cpp:140
-msgid "Are you sure you want to delete all jobs ?"
-msgstr "Sollen wirklich alle Jobs gel?scht werden ?"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs.cpp:178
-msgid "Delete job"
-msgstr "Job l?schen"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs.cpp:178
-#, c-format
-msgid "Are you sure you want to delete %s job ?"
-msgstr "Soll wirklich der %s Job gel?scht werden ?"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs.cpp:187
-msgid "Unknown event"
-msgstr "Unbekanntes Ereignis"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs.cpp:268
-msgid "Jobs"
-msgstr "Jobs"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs.cpp:294
-msgid "Delete All Jobs"
-msgstr "Alle Jobs l?schen"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs.cpp:299
-msgid "Delete Job"
-msgstr "Job l?schen"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs.cpp:304
-msgid "Run all jobs"
-msgstr "Alle Jobs starten"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs.cpp:309
-msgid "Run Job"
-msgstr "Job starten"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_mpdelogo.cpp:209
-msgid "Mplayer Delogo"
-msgstr "Mplayer Delogo (Logo-Entfernung)"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_mpdelogo.cpp:227
-msgid "X"
-msgstr "X"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_mpdelogo.cpp:234
-msgid "Y"
-msgstr "Y"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_mpdelogo.cpp:241
-msgid "W"
-msgstr "W"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_mpdelogo.cpp:248
-msgid "H"
-msgstr "H"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_mpdelogo.cpp:255
-msgid "Band"
-msgstr "Band"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_ocr.cpp:61
-msgid "Mini OCR"
-msgstr "Mini OCR"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_ocr.cpp:86
-msgid "0:0:0"
-msgstr "0:0:0"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_ocr.cpp:100
-msgid "# of lines"
-msgstr "# von Zeilen"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_ocr.cpp:108
-msgid "TimeCode:"
-msgstr "Zeitcode:"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_ocr.cpp:116
-msgid "# of Glyphs :"
-msgstr "# von Schriftzeichen :"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_ocr.cpp:124
-msgid "<b>Stats</b>"
-msgstr "<b>Status</b>"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_ocr.cpp:141
-msgid "Current Glyph"
-msgstr "Aktuelles Schriftzeichen"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_ocr.cpp:154
-msgid " Text:"
-msgstr " Text:"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_ocr.cpp:176
-msgid "_Calibrate"
-msgstr "_Kalibrieren"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_ocr.cpp:180
-msgid "If the glyphs are too thin, enter a lower value here"
-msgstr ""
-"Falls die Zeichen zu schmal sind, dann bitte hier einen kleineren Wert "
-"eingeben"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_ocr.cpp:182
-msgid "S_kip all"
-msgstr "Alles ?bers_pringen"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_ocr.cpp:186
-msgid "Skip the whole image"
-msgstr "Das gesamte Bild ?berspringen"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_ocr.cpp:188
-msgid "Skip Glyph"
-msgstr "Schriftzeichen ?berspringen"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_ocr.cpp:192
-msgid "Skip the current letter/glyph"
-msgstr "Aktuelles Schriftzeichen ?berspringen"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_ocr.cpp:194
-msgid "_Ignore glyph"
-msgstr "Schriftzeichen _ignorieren"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_ocr.cpp:198
-msgid "This glyph will be ignored from now on"
-msgstr "Dieses Schriftzeichen wird von jetzt an ignoriert"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_ocr.cpp:200
-msgid "Ok"
-msgstr "Ok"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_ocr.cpp:214
-msgid "<b>Bitmap</b>"
-msgstr "<b>Bitmap</b>"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_partial.cpp:142
-msgid "Start frame for partial :"
-msgstr "Startbild f?r Teilst?ck:"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_partial.cpp:149
-msgid "End frame for partial :"
-msgstr "Endbild f?r Teilst?ck:"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_partial.cpp:172
-msgid "Configure partialized filter"
-msgstr "Aufgeteilten Filter konfigurieren"
-
-# Teile = Gruppe von Pixeln
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_particle.cpp:274
-msgid "Particle Analysis Configuration"
-msgstr "Konfiguration der Teileanalyse"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_pause.cpp:98
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_pause.cpp:76
 msgid "Paused"
 msgstr "Pausierend"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_pause.cpp:114
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_pause.cpp:92
 msgid ""
 "<b>Encoding is paused.</b>\n"
 "\n"
@@ -4516,3546 +1602,3069 @@
 "\n"
 "Fahre fort oder brich den Vorgang ab."
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_pause.cpp:141
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_pause.cpp:119
 msgid "Abort"
 msgstr "Abbruch"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_pause.cpp:163
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_pause.cpp:141
 msgid "Resume"
 msgstr "Fortfahren"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_pipe.cpp:95
-msgid "Pipe to"
-msgstr "Weiterleiten zu"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_acodec.cpp:119
+msgid "AudioCodec"
+msgstr "Audio Codec"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_pipe.cpp:104
-msgid "Application path/name (/usr/bin/sox...)"
-msgstr "Programm-Pfad/Name (z.B. /usr/bin/sox...)"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_acodec.cpp:147
+msgid "Configure codec"
+msgstr "Konfiguriere Codec"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_pipe.cpp:113
-msgid "Full parameter line"
-msgstr "Komplette Parameter-Zeile"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_SwissArmyKnife.cpp:505
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:385
+msgid "Swiss Army Knife Configuration"
+msgstr "\"Swiss Army Knife\" Konfiguration"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_preview.cpp:180
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_threshold.cpp:548
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager.cpp:337
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtersub.cpp:150
-msgid "Preview"
-msgstr "Vorschau"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_recent.cpp:90
+msgid "Recent files"
+msgstr "Letzte Dateien"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:40
-msgid "No"
-msgstr "Nein"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_working.cpp:211
+msgid "Processing"
+msgstr "Bearbeitung"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:40
-msgid "Yes"
-msgstr "Ja"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_working.cpp:247
+msgid "<b>Time remaining:</b>"
+msgstr "<b>Verbleibende Zeit:</b>"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:60
-#, c-format
-msgid "%lu x %lu"
-msgstr "%lu x %lu"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/TLK_filesel.cpp:95
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/TLK_filesel.cpp:199
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/TLK_filesel.cpp:383
+msgid "Cannot open directory as a file"
+msgstr "Kann das Verzeichnis nicht als Datei ?ffnen"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:63
-#, c-format
-msgid "%2.3f fps"
-msgstr "%2.3f Bilder/s"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/TLK_filesel.cpp:437
+msgid "Images"
+msgstr "Bilder"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:66
-#, c-format
-msgid "%ld frames"
-msgstr "%ld Bilder"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/TLK_filesel.cpp:448
+msgid "All"
+msgstr "Alles"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:76
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:126
-#, c-format
-msgid "%02d:%02d:%02d.%03d"
-msgstr "%02d:%02d:%02d.%03d"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_ocr/adm_ocr.cpp:156
+msgid "Sure ?"
+msgstr "Sicher ?"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:89
-#, c-format
-msgid "%s (%u:%u)"
-msgstr "%s (%u:%u)"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_ocr/adm_editglyph.cpp:43
+msgid "Select GlyphFile to edit"
+msgstr "Als Zeichensatzdatei speichern"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:111
-#, c-format
-msgid "%lu Hz"
-msgstr "%lu Hz"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_ocr/adm_editglyph.cpp:111
+msgid "String"
+msgstr "Zeichenkette"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:113
-#, c-format
-msgid "%lu Bps / %lu kbps"
-msgstr "%lu Byte/s,  %lu kb/s"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_ocr/adm_editglyph.cpp:113
+msgid "Search string"
+msgstr "Zeichenkette suchen"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:129
-#, c-format
-msgid "%.2f MB"
-msgstr "%.2f MB"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_ocr/adm_editglyph.cpp:139
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_ocr/adm_editglyph.cpp:182
+msgid "End reached"
+msgstr "Ende erreicht"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:198
-msgid "Properties"
-msgstr "Eigenschaften"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_ocr/adm_editglyph.cpp:139
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_ocr/adm_editglyph.cpp:182
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_ocr/adm_editglyph.cpp:206
+msgid "No more glyphs"
+msgstr "Keine weiteren Schriftzeichen"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:227
-msgid "Frame Rate:"
-msgstr "Bildrate:"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_ocr/adm_editglyph.cpp:206
+msgid "Head reached"
+msgstr "Kopf erreicht"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:234
-msgid "Frame Count:"
-msgstr "Bildz?hler:"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_ocr/adm_editglyph.cpp:334
+msgid "dialog1"
+msgstr "Dialog1"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:241
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:419
-msgid "Total Duration:"
-msgstr "Gesamtdauer:"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_ocr/adm_editglyph.cpp:386
+msgid "Prev. Empty"
+msgstr "Vorheriges Leeres"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:262
-msgid "Image Size:"
-msgstr "Bildgr??e:"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_ocr/adm_editglyph.cpp:408
+msgid "Next Empty"
+msgstr "N?chstes Leeres"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:283
-msgid "Codec 4CC:"
-msgstr "Codec 4CC:"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_bindings.cpp:534
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:334
+msgid "Input"
+msgstr "Eingang"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:297
-msgid "Aspect Ratio:"
-msgstr "Seitenverh?ltnis:"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_bindings.cpp:535
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:338
+msgid "Output"
+msgstr "Ausgabe"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:311
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1064
-msgid "<b>Video</b>"
-msgstr "<b>Video</b>"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_bindings.cpp:536
+msgid "Side"
+msgstr "Seitlich"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:330
-msgid "Global Motion Compensation:"
-msgstr "Global Motion Compensation (GMC):"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_bindings.cpp:537
+msgid "Top"
+msgstr "Oben"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:344
-msgid "Packed Bitstream:"
-msgstr "Gepackter Bitstrom:"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_bindings.cpp:538
+msgid "Separate"
+msgstr "Trennen"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:358
-msgid "Quarter Pixel:"
-msgstr "Viertel-Pixel (Qpel):"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_bindings.cpp:723
+#, c-format
+msgid "Frame:%c(%02d)"
+msgstr "Bild:%c(%02d)"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:372
-msgid "<b>Extra Video Properties</b>"
-msgstr "<b>Weitere Video Eigenschaften</b>"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:273
+msgid "Avidemux"
+msgstr "Avidemux"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:391
-msgid "Codec:"
-msgstr "Codec:"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:297
+msgid "_Open..."
+msgstr "_?ffnen..."
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:398
-msgid "Channels:"
-msgstr "Kan?le:"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:308
+msgid "_Append..."
+msgstr "_Anh?ngen..."
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:405
-msgid "Bitrate:"
-msgstr "Bitrate:"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:319
+msgid "_Save"
+msgstr "_Speichern"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:412
-msgid "Frequency:"
-msgstr "Frequenz:"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:330
+msgid "Save _Video..."
+msgstr " _Video speichern"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:461
-msgid "File Size:"
-msgstr "Dateigr??e:"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:342
+msgid "Save _BMP Image..."
+msgstr "_BMP Bild speichern"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:475
-msgid "Variable Bitrate:"
-msgstr "Variable Bitrate:"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:346
+msgid "Save _JPEG Image..."
+msgstr "_JPEG Bild speichern"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:489
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1104
-msgid "<b>Audio</b>"
-msgstr "<b>Audio</b>"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:350
+msgid "Save _Selection as JPEG Images..."
+msgstr "A_uswahl als JPEG Bilder speichern..."
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_quota.cpp:90
-msgid "Filesystem full / quota exceeded"
-msgstr "Dateisystem voll / Quota ?berschritten"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:363
+msgid "Save _Project"
+msgstr "_Projekt speichern"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_quota.cpp:133
-msgid "Ignore"
-msgstr "Ignorieren"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:371
+msgid "Save P_roject As..."
+msgstr "P_rojekt speichern als..."
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_quota.cpp:155
-msgid "Retry"
-msgstr "Wiederholen"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:379
+msgid "_Load/Run Project..."
+msgstr "Projekt _laden/starten..."
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_recent.cpp:102
-msgid "Recent files"
-msgstr "Letzte Dateien"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:387
+msgid "A_dd to Joblist..."
+msgstr "Zur Jobliste hinzuf?gen..."
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_resize.cpp:333
-msgid " Width "
-msgstr "Breite"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:391
+msgid "Show _Joblist"
+msgstr "_Jobliste anzeigen"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_resize.cpp:340
-msgid " Height "
-msgstr "H?he"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:403
+msgid "Co_nnect to avsproxy"
+msgstr "Verbi_nde mit avsproxy"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_resize.cpp:363
-msgid "Source :"
-msgstr "Quelle:"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:412
+msgid "Proper_ties"
+msgstr "Eigenschaf_ten"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_resize.cpp:369
-msgid "Destination"
-msgstr "Ziel "
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:423
+msgid "AVI _Muxer Options"
+msgstr "AVI _Multiplexer Optionen"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_resize.cpp:419
-msgid " Error X:"
-msgstr " Fehler X:"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:432
+msgid "_Quit"
+msgstr "_Beenden"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_resize.cpp:433
-msgid " Error Y:"
-msgstr " Fehler Y:"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:443
+msgid "_Edit"
+msgstr "_Bearbeiten"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_resize.cpp:447
-msgid "16 round up"
-msgstr "16 aufrunden"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:450
+msgid "_Reset Edits"
+msgstr "?nderungen _zur?cknehmen"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_resize.cpp:461
-msgid "Bilinear"
-msgstr "Bi-linear"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:463
+msgid "Cu_t"
+msgstr "_Ausschneiden"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_resize.cpp:465
-msgid "Bicubic"
-msgstr "Bi-kubisch"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:474
+msgid "_Copy"
+msgstr "_Kopieren"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_resize.cpp:469
-msgid "Lanczos3"
-msgstr "Lanczos3"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:485
+msgid "_Paste"
+msgstr "_Einf?gen"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_srt.cpp:97
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_srt.cpp:228
-msgid "Subtitle Size and Position"
-msgstr "Untertitel Gr??e und Position"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:496
+msgid "_Delete"
+msgstr "_L?schen"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_srt.cpp:242
-msgid "Font Size:"
-msgstr "Schriftgr??e:"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:512
+msgid "Set Marker _A"
+msgstr "Setze Marke _A"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_SwissArmyKnife.cpp:511
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:388
-msgid "Swiss Army Knife Configuration"
-msgstr "\"Swiss Army Knife\" Konfiguration"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:519
+msgid "Set Marker _B"
+msgstr "Setze Marke _B"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_threshold.cpp:206
-#: avidemux/ADM_videoFilter/ADM_vidThreshold.cpp:163
-msgid "Threshold Configuration"
-msgstr "Schwellen-Konfiguration"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:531
+msgid "Pre_ferences"
+msgstr "Ein_stellungen"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_threshold.cpp:429
-msgid "Minimum value to be in-range:"
-msgstr "Minimaler Wert f?r den Innenbereich:"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:539
+msgid "_View"
+msgstr "An_sicht"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_threshold.cpp:462
-msgid "Maximum value to be in-range:"
-msgstr "Maximale Wert f?r den Innenbereich:"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:546
+msgid "_Main Toolbar"
+msgstr "_Haupt-Werkzeugleiste"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_threshold.cpp:493
-msgid "Output values:   "
-msgstr "Ausgabewerte:"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:551
+msgid "_A/V Sidebar"
+msgstr "_A/V Seitenleiste"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_threshold.cpp:500
-msgid "In-range values go black, out-of-range values go white"
-msgstr "Werte im Innenbereich werden schwarz, Werte au?erhalb werden wei?"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:561
+msgid "_Zoom 1:4"
+msgstr "_Zoom 1:4"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_threshold.cpp:501
-msgid "In-range values go white, out-of-range values go black"
-msgstr "Werte im Innenbereich werden wei?, Werte au?erhalb werden schwarz"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:568
+msgid "Z_oom 1:2"
+msgstr "Z_oom 1:2"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_threshold.cpp:507
-msgid "Debugging settings (bits):   "
-msgstr "Fehlersuche Einstellungen (bits):"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:575
+msgid "Zoom _1:1"
+msgstr "Zoom _1:1"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_vcodec.cpp:109
-msgid "Video encoder"
-msgstr "Video Kodierer"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:582
+msgid "Zoom _2:1"
+msgstr "Zoom _2:1"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_vcodec.cpp:123
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1084
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1124
-msgid "Configure"
-msgstr "Konfigurieren"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:589
+msgid "Vi_deo"
+msgstr "Vi_deo"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_vobsub.cpp:95
-msgid "none"
-msgstr "Keine"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:596
+msgid "_Decoder Options"
+msgstr "_Dekodierer Optionen"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_vobsub.cpp:104
-msgid "Select .idx file"
-msgstr "IDX-Datei ausw?hlen"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:603
+msgid "_Postprocessing"
+msgstr "Nachbearbeitung"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_vobsub.cpp:115
-msgid "Wrong VobSub parametering"
-msgstr ""
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:606
+msgid "Select postprocessing level"
+msgstr "Nachbearbeitungsstufe ausw?hlen"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_vobsub.cpp:115
-msgid "The idx/sub file does not set."
-msgstr ""
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:616
+msgid "P_review"
+msgstr "Vo_rschau"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_vobsub.cpp:202
-msgid "VobSub Settings"
-msgstr "VobSub Einstellungen"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:623
+msgid "Display _Output"
+msgstr "A_usgabe anzeigen"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_vobsub.cpp:219
-msgid "Select .idx"
-msgstr "IDX ausw?hlen"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:635
+msgid "_Frame Rate"
+msgstr "Bildrate"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_vobsub.cpp:233
-msgid "Select Language :"
-msgstr "Sprache ausw?hlen:"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:639
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:688
+msgid "_Encoder"
+msgstr "Kodier_er"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_vobsub.cpp:247
-msgid "Select Sub"
-msgstr "Sub ausw?hlen"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:646
+msgid "Fil_ters"
+msgstr "Fil_ter"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_vobsub.cpp:260
-msgid "Extra Shrink Factor :"
-msgstr "Extra Schrumpffaktor:"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:653
+msgid "_Audio"
+msgstr "_Audio"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_vobsub.cpp:275
-msgid "Shift (ms) :"
-msgstr "Verschiebung (ms) :"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:660
+msgid "_Main Track"
+msgstr "_Haupt-Audiospur"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_vobsub.cpp:289
-msgid "Extra Settings"
-msgstr "Extra Einstellungen"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:664
+msgid "_Second Track"
+msgstr "_Zweite Audiospur"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_working.cpp:223
-msgid "Processing"
-msgstr "Bearbeitung"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:668
+msgid "_Build VBR Time Map"
+msgstr "Erstelle VBR Zeitkarte"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_working.cpp:259
-msgid "<b>Time remaining:</b>"
-msgstr "<b>Verbleibende Zeit:</b>"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:677
+msgid "S_ave..."
+msgstr "Speichern..."
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:113
-msgid "1 - QPel SAD (Fastest)"
-msgstr ""
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:695
+msgid "_Filters"
+msgstr "_Filter"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:114
-msgid "2 - QPel SATD"
-msgstr ""
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:699
+msgid "_Tools"
+msgstr "_Werkzeuge"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:115
-msgid "3 - HPel on MB then QPel"
-msgstr ""
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:706
+msgid "_Calculator"
+msgstr "_Taschenrechner"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:116
-msgid "4 - Always QPel"
-msgstr ""
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:722
+msgid "_Rebuild Frames (I & B)"
+msgstr "Bilder neu aufbauen (I & B)"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:117
-msgid "5 - QPel + Bidirectional ME"
-msgstr ""
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:726
+msgid "C_heck Frames (slow)"
+msgstr "Bilder ?berpr?fen (langsam)"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:118
-msgid "6 - RD on I/P frames (Default)"
-msgstr ""
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:730
+msgid "_Bitrate Histogram"
+msgstr "_Bitrate Histogramm"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:119
-msgid "7 - RD on all frames"
-msgstr ""
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:734
+msgid "_Scan for Black Frames..."
+msgstr "_Schwarze Bilder suchen..."
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:120
-msgid "8 - RD refinement on I/P frames"
-msgstr ""
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:743
+msgid "_VOB -> VobSub"
+msgstr "_VOB -> VobSub"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:121
-msgid "9 - RD refinement on all frames"
-msgstr ""
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:747
+msgid "_OCR (VobSub -> srt)"
+msgstr "_OCR (VobSub -> srt)"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:125
-msgid "1  - Extremely Low (Fastest)"
-msgstr "1  - Besonders niedrig (am Schnellsten)"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:751
+msgid "OCR (TS->srt)"
+msgstr "OCR (TS->srt)"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:126
-msgid "2  - Very Low"
-msgstr "2  - Sehr niedrig"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:755
+msgid "_Edit Glyph"
+msgstr "Schriftzeichen b_earbeiten"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:127
-msgid "3  - Low"
-msgstr "3  - Niedrig"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:764
+msgid "_Frame Hex Dump"
+msgstr "Bild Hexadez. Abbild"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:128
-msgid "4  - Medium"
-msgstr "4  - Mittel"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:768
+msgid "A_uto"
+msgstr "A_uto"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:129
-msgid "5  - High"
-msgstr ""
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:775
+msgid "_VCD"
+msgstr "_VCD"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:130
-msgid "6  - High (Default)"
-msgstr ""
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:779
+msgid "_SVCD"
+msgstr "_SVCD"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:131
-msgid "6B - Very High (RDO on B-frames)"
-msgstr "6B - Sehr hoch (RDO bei B-Bildern)"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:783
+msgid "_DVD"
+msgstr "_DVD"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:132
-msgid "7  - Ultra High"
-msgstr "7  - Besonders hoch"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:787
+msgid "_PSP"
+msgstr "_PSP"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:133
-msgid "7B - Ultra High (RDO on B-frames)"
-msgstr "7B  - Besonders hoch (RDO bei B-Bildern)"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:791
+msgid "PSP (_H.264)"
+msgstr "PSP (_H.264)"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:140
-msgid "Hadamard Exhaustive Search"
-msgstr "\"Hadamard\" vollst?ndige Suche"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:795
+msgid "F_LV"
+msgstr "F_LV"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:626
-msgid "x264 Configuration"
-msgstr "x264 Konfiguration"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:799
+msgid "IPOD (mpeg4)"
+msgstr "IPOD (mpeg4)"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:647
-msgid "Encoding Mode"
-msgstr "Kodier-Modus"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:803
+msgid "_Go"
+msgstr "Sprin_gen"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:654
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid.cpp:484
-msgid "Quantizer"
-msgstr "Quantizer"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:810
+msgid "_Play/Stop"
+msgstr "Abspielen/Anhalten"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:661
-msgid "Target Size"
-msgstr "Zielgr??e"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:821
+msgid "P_revious Frame"
+msgstr "Vo_rheriges Bild"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:674
-msgid ""
-"Constant Quantizer - Each frame will have the same compression. Low numbers "
-"equal higher quality while high numbers equal lower quality."
-msgstr ""
-"Konstanter Quantizer - Jedes Bild mit der gleichen Kompression. Niedrigere "
-"Zahlen entsprechen h?herer Qualit?t, hohe Zahlen entsprechen niedrigerer "
-"Qualit?t."
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:832
+msgid "_Next Frame"
+msgstr "_N?chstes Bild"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:682
-msgid "Target bitrate or file size"
-msgstr "Ziel-Bitrate oder Dateigr??e (kb/s):"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:843
+msgid "Pr_evious Intra Frame"
+msgstr "Vorheriges I-Bild (keyframe)"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:690
-msgid "Single Pass - Quality Quantizer (Average)"
-msgstr "Einfach-Durchlauf - Qualit?ts-Quantizer (Durchschnitt)"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:854
+msgid "Next _Intra Frame"
+msgstr "N?chstes I-Bild (keyframe)"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:691
-msgid "Single Pass - Quality Quantizer (Constant)"
-msgstr "Einfach-Durchlauf - Qualit?ts-Quantizer (Konstante)"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:865
+msgid "Previou_s Black Frame"
+msgstr "Vorherige_s schwarzes Bild"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:692
-msgid "Single Pass - Bitrate (Average)"
-msgstr "Einfach-Durchlauf - Bitrate (Durchschnitt)"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:869
+msgid "Ne_xt Black Frame"
+msgstr "N?_chstes schwarzes Bild"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:693
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:775
-msgid "Two Pass - Video Size"
-msgstr "Zweifach-Durchlauf - Videogr??e"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:873
+msgid "_First Frame"
+msgstr "_Erstes Bild"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:694
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:779
-msgid "Two Pass - Average Bitrate"
-msgstr "Zweifach-Durchlauf - Durchschnittsbitrate"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:884
+msgid "_Last Frame"
+msgstr "_Letztes Bild"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:696
-msgid "Bitrate"
-msgstr "Bitrate"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:900
+msgid "Go to Marker _A"
+msgstr "Gehe zu Marke _A"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:729
-msgid "Partition Decision"
-msgstr "Aufteilungsentscheidung"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:907
+msgid "Go to Marker _B"
+msgstr "Gehe zu Marke _B"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:736
-msgid "Method"
-msgstr "Methode"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:919
+msgid "Go to Fra_me..."
+msgstr "Springe zu _Bild..."
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:754
-msgid "Diamond Search"
-msgstr "Sternf?rmig suchen"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:930
+msgid "Go to _Time..."
+msgstr "Springe zur _Zeit..."
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:755
-msgid "Hexagonal Search"
-msgstr "Hexagonal suchen"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:941
+msgid "_Custom"
+msgstr "_Individuell"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:756
-msgid "Uneven Multi-hexagon"
-msgstr "Ungerades Multi-Hexagon"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:945
+msgid "_Help"
+msgstr "_Hilfe"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:757
-msgid "Exhaustive Search"
-msgstr "Vollst?ndige Suche"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:952
+msgid "_Plugins"
+msgstr "_Plugins"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:765
-msgid "Max. Ref. Frames"
-msgstr "Max. Referenzbilder"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:956
+msgid "_Built-in Support"
+msgstr "Eingebaute Unterst?tzung"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:772
-msgid "Range"
-msgstr "Bereich"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:960
+msgid "_About"
+msgstr "Infos _?ber Avidemux"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:785
-msgid ""
-"Define how many pixels are analysed for motion estimation. The higher the "
-"range the more accurate the analysis but the slower the encoding time."
-msgstr ""
-"Anzahl der zu analysierenden Pixel festlegen. Je h?her dieser Bereich, desto "
-"sorgf?ltiger die Analyse, aber umso langsamer die Kodierungszeit."
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:978
+msgid "Open a file"
+msgstr "?ffne eine Datei"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:794
-msgid ""
-"Set how many previous frames can be referenced by a P/B-frame. Numbers above "
-"5 do not seem to improve quality greatly. Numbers 3 to 5 are recommended."
-msgstr ""
-"Setzt die Anzahl von voraus gegangenen Bildern die von P/B-Bildern "
-"referenziert werden k?nnen. Zahlen ?ber 5 verbessern die Qualit?t kaum mehr. "
-"Zahlen zwischen 3 und 5 werden empfohlen."
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:988
+msgid "Save the file"
+msgstr "Datei speichern"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:797
-msgid "Chroma ME"
-msgstr "Farbintensit?t ME"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:994
+msgid "Audio/video file information"
+msgstr "Audio/Video Datei-Information"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:802
-msgid "Use color information for detecting motion to improve quality"
-msgstr ""
-"Informationen ?ber die Farbintensit?t zur Absch?tzung der Bewegung verwenden"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1005
+msgid "Bitrate/size calculator"
+msgstr "Bitrate/Gr??e berechnen"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:805
-msgid "Mixed Refs"
-msgstr "Gemischte Referenzbilder"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1089
+msgid "Configure video encoder"
+msgstr "Video Kodierer konfigurieren"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:810
-msgid "Calculate referencing individually based on each partition"
-msgstr ""
-"Berechnet die Referenzierung individuell, abh?ngig vom jeweiligen Teilbereich"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1094
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1150
+msgid "Filters"
+msgstr "Filter"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:816
-msgid "Fast P-Skip"
-msgstr "Schnelles P-Skip"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1097
+msgid "Video filters"
+msgstr "Video Filter"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:819
-msgid ""
-"Early skip detection on P-frames to speedup encoding. Quality will be "
-"slightly reduced."
-msgstr ""
-"Fr?hes ?berspringen der P-Bild-Erkennung zur Kodierbeschleunigung. Die "
-"Qualit?t wird geringf?gig reduziert."
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1129
+msgid "Configure audio encoder"
+msgstr "Audio Kodierer konfigurieren"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:822
-msgid "DCT Decimate"
-msgstr "DCT abschw?chen"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1137
+msgid "Audio filters"
+msgstr "Audio Filter"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:827
-msgid "Interlaced"
-msgstr "Halbbildmodus"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1158
+msgid "Shift:"
+msgstr "Verschiebung"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:830
-msgid "Input video is interlaced"
-msgstr "Eingangsvideo ist im Halbbildmodus"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1161
+msgid "Enable time shift"
+msgstr "Zeitverschiebung einschalten"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:832
-msgid "<b>Motion Estimation</b>"
-msgstr "<b>Bewegungsabsch?tzung</b>"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1167
+msgid "Audio/video time shift (ms)"
+msgstr "A/V Zeitverschiebung (ms)"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:861
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:872
-msgid ""
-"Enforce the size of a decoded pixel decoded to a certain value. Set this to "
-"1:1 for non-anamorphic video."
-msgstr ""
-"Erzwingt die Gr??e eines dekodierten Pixels, die zu einem bestimmten Wert "
-"dekodiert wurden. 1:1 wird f?r nicht-anamorphe Videos empfohlen."
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1170
+msgid "ms"
+msgstr "ms"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:865
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1058
-msgid ":"
-msgstr ":"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1178
+msgid "<b>Format</b>"
+msgstr "<b>Format</b>"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:881
-msgid ""
-"Set a custom aspect ratio. The default 1:1 is recommended for most video."
-msgstr ""
-"Individuelles Seitenverh?ltnis festlegen. Die Vorgabe 1:1 wird f?r die "
-"meisten Videos empfohlen."
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1211
+msgid "Frame: "
+msgstr "Bild:"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:886
-msgid "Predefined Aspect Ratio"
-msgstr "Vordefiniertes Seitenverh?ltnis"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1218
+msgid "Current frame"
+msgstr "Aktuelles Bild"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:891
-msgid "Set a common predefined aspect ratio"
-msgstr "Vordefiniertes Seitenverh?ltnis festlegen"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1223
+msgid "/ 0000000"
+msgstr "/ 0000000"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:895
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1047
-msgid "As Input"
-msgstr "Wie Eingang"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1230
+msgid "Time: "
+msgstr " Zeit:"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:916
-msgid "<b>Sample Aspect Ratio</b>"
-msgstr "<b>Abfrage Seitenverh?ltnis (A/R)</b>"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1237
+msgid "Current time"
+msgstr "Aktuelle Zeit"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:943
-msgid "CABAC"
-msgstr "CABAC"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1238
+msgid "00:00:00.000"
+msgstr "00:00:00.000"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:946
-msgid ""
-"Lossless compression technique that reduces bitrate by approximately 10%. "
-"Increases encoding and decoding time."
-msgstr ""
-"Verlustlose Kompressionstechnik, die die Bitrate etwa um 10% reduziert. "
-"Vergr??ert den Kodier- und Dekodierzeitbedarf."
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1241
+msgid "/ 00:00:00,000"
+msgstr "/ 00:00:00,000"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:953
-msgid "Trellis"
-msgstr "Trellis"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1248
+msgid "Frame: ?"
+msgstr "Bild: ? "
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:962
-msgid ""
-"Use Trellis Rate Distortion Optimisation to find optimal encoding for each "
-"block. Level 0 equals disabled, level 1 equals normal and level 2 equals "
-"high."
-msgstr ""
-"Verzerrungsabh?ngige Quantization verwenden, um die optimale Kodierung f?r "
-"jeden Block zu finden. Wert 0 = deaktiviert, Wert 1 = normal, Wert 2 = hoch."
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1272
+msgid "Play"
+msgstr "Abspielen"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:969
-msgid "Noise Reduction"
-msgstr "Rauschreduktion"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1286
+msgid "Stop"
+msgstr "Stopp"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:978
-msgid "Set the amount of noise reduction"
-msgstr "Betrag der Rauschreduktion setzen"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1298
+msgid "Previous frame"
+msgstr "Vorheriges Bild"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:985
-msgid "Deblocking Filter"
-msgstr "Deblocking Filter"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1313
+msgid "Next frame"
+msgstr "N?chstes Bild"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:988
-msgid "Enable in-loop deblocking to filter the video"
-msgstr "Aktiviert die 'in-loop' Deblockierung als Videofilter"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1328
+msgid "Previous keyframe"
+msgstr "Vorheriges I-Bild (keyframe)"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1005
-msgid "Strength"
-msgstr "St?rke"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1343
+msgid "Next keyframe"
+msgstr "N?chstes I-Bild (keyframe)"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1019
-msgid ""
-"Threshold for block detection. Positive values will detect more blocks, "
-"negative values will detect less."
-msgstr ""
-"Schwellwert f?r Block-Erkennung. Positive Werte erkennen mehr Bl?cke, "
-"negative Werte erkennen weniger."
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1357
+msgid "Selection: start"
+msgstr "Auswahl: Start"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1028
-msgid "Positive values will soften the video, negative values will sharpen"
-msgstr ""
-"Positive Werte zeichnen das Video weicher, negative Werte zeichnen es "
-"sch?rfer"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1368
+msgid "Selection: end"
+msgstr "Auswahl: Ende"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1031
-msgid "<b>Misc. Options</b>"
-msgstr "<b>Sonstige Optionen</b>"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1379
+msgid "Previous black frame"
+msgstr "Vorheriges schwarzes Bild"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1036
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1073
-msgid "Motion & Misc"
-msgstr "Bewegung & Sonstiges"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1390
+msgid "Next black frame"
+msgstr "N?chstes schwarzes Bild"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1062
-msgid "8x8 Transform"
-msgstr "8x8 Transformation"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1401
+msgid "First frame"
+msgstr "Erstes Bild"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1065
-msgid "General block breakdown transformation"
-msgstr "Transformation von allgemeinen Blockunterteilungen"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1412
+msgid "Last frame"
+msgstr "Letztes Bild"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1068
-msgid "8x8, 8x16 and 16x8 P-frame search"
-msgstr "8x8, 8x16 und 16x8 P-Bild Suche"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1426
+msgid "<b>Selection</b>"
+msgstr "<b>Auswahl</b>"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1071
-msgid "Improve the P-frame quality"
-msgstr "P-Bild Qualit?t verbessern"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1443
+msgid "B:"
+msgstr "B:"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1074
-msgid "8x8, 8x16 and 16x8 B-frame search"
-msgstr "8x8, 8x16 und 16x8 B-Bild Suche"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1450
+msgid "Go to marker B"
+msgstr "Gehe zu Marke B"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1077
-msgid "Improve the B-frame quality"
-msgstr "B-Bild Qualit?t verbessern"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1452
+msgid "A:"
+msgstr "A:"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1080
-msgid "4x4, 4x8 and 8x4 P-frame search"
-msgstr "4x4, 4x8 und 8x4 P-Bild Suche"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1459
+msgid "Go to marker A"
+msgstr "Gehe zu Marke A"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1083
-msgid "Further improve the P-frame quality"
-msgstr "P-Bild Qualit?t zus?tzlich verbessern"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1461
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1469
+msgid " 0000000"
+msgstr " 0000000"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1085
-msgid "8x8 Intra search"
-msgstr "8x8 Intrablock Suche"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager_dialog.cpp:124
+msgid "Video Filter Manager"
+msgstr "Video Filter Manager"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1088
-msgid "Enable DCT Intra block search to improve quality"
-msgstr "Aktiviert DCT Intrablock-Suche, um die Qualit?t zu verbessern"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager_dialog.cpp:146
+msgid "Open filter list [Ctrl-O]"
+msgstr "Filter-Liste ?ffnen [Strg-O]"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1091
-msgid "4x4 Intra search"
-msgstr "4x4 Intrablock Suche"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager_dialog.cpp:155
+msgid "Save filter list [Ctrl-S]"
+msgstr "Filterliste speichern [Strg-S]"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1094
-msgid "Further enable DCT Intra block search to improve quality"
-msgstr ""
-"Aktiviert zus?tzliche DCT Intrablock-Suche, um die Qualit?t zu verbessern"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager_dialog.cpp:163
+msgid "Save Script"
+msgstr "Skript speichern"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1097
-msgid "<b>Partition Macroblocks</b>"
-msgstr "<b>Aufteilung Makrobl?cke</b>"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager_dialog.cpp:166
+msgid "Save as script [Ctrl-J]"
+msgstr "Speichern als Skript [Strg-J]"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1121
-msgid "Bias"
-msgstr "Tendenz (Bias)"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager_dialog.cpp:174
+msgid "DVD Res"
+msgstr "DVD Aufl."
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1128
-msgid "Max Consecutive"
-msgstr "Max. Aufeinanderfolge"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager_dialog.cpp:177
+msgid "DVD resolution [Ctrl-1]"
+msgstr "DVD Aufl?sung [Strg-1]"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1141
-msgid ""
-"Increase / decrease probability for how often B-frames are used. It will not "
-"violate the maximum consecutive frame limit."
-msgstr ""
-"Vergr??ern oder verkleinert die M?glichkeit, wie oft B-Bilder verwendet "
-"werden sollen. Dies verletzt nicht das Limit f?r die maximale Anzahl "
-"aufeinander folgender B-Bilder."
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager_dialog.cpp:185
+msgid "Half D1 Res"
+msgstr "Halbe D1 Aufl."
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1150
-msgid ""
-"Set the maximum number of consecutive B-frames. This defines how many "
-"duplicate frames can be dropped. Numbers 2 to 5 are recommended. This "
-"greatly improves the use of bitrate and quality."
-msgstr ""
-"Die maximale Anzahl aufeinander folgender B-Bilder festlegen. Damit wird "
-"definiert, wieviele doppelte Bilder verworfen werden k?nnen. Zahlen 2 bis 5 "
-"werden empfohlen. Dies verbessert vor allem die Ausnutzung der Bitrate und "
-"die Qualit?t."
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager_dialog.cpp:188
+msgid "Half D1 resolution [Ctrl-2]"
+msgstr "Halbe D1 Aufl?sung [Strg-2]"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1164
-msgid "Bidirectional ME"
-msgstr "Bidirektionale ME"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager_dialog.cpp:196
+msgid "SVCD Res"
+msgstr "SVCD Aufl."
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1169
-msgid ""
-"Optimise both motion vectors in B-frames. This will improve quality but take "
-"more time for encoding."
-msgstr ""
-"Optimierung beider Bewegungsvektoren in B-Bildern. Dadurch wird die Qualit?t "
-"verbessert, das Kodieren kostet aber mehr Zeit."
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager_dialog.cpp:199
+msgid "SVCD resolution [Ctrl-3]"
+msgstr "SVCD Aufl?sung [Strg-3]"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1171
-msgid "Weighted Biprediction"
-msgstr "Gewichtete Doppelvorhersage (Biprediction)"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager_dialog.cpp:207
+msgid "VCD Res"
+msgstr "VCD Aufl."
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1176
-msgid "Enables weighting of B-frames to help fades"
-msgstr "Aktiviert die Gewichtung von B-Bildern als Hilfe f?r ?berblendungen"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager_dialog.cpp:210
+msgid "VCD resolution [Ctrl-4]"
+msgstr "VCD Aufl?sung [Strg-4]"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1179
-msgid "Adaptative DCT"
-msgstr "anpassungsf?higes DCT"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager_dialog.cpp:261
+msgid "Transform"
+msgstr "Transformieren"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1184
-msgid ""
-"Use fewer B-frames if needed. This is always recommended. If not enabled, "
-"the codec will always use the maximum number of consecutive B-frames."
-msgstr ""
-"Weniger B-Bilder verwenden, wenn m?glich. Dies ist immer empfehlenswert. "
-"Andernfalls benutzt der Kodierer immer die maximale Anzahl aufeinander "
-"folgender B-Bilder."
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager_dialog.cpp:286
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filterlist.cpp:125
+msgid "Interlacing"
+msgstr "Interlacing"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1187
-msgid "Use as Reference"
-msgstr "Als Referenz benutzen"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager_dialog.cpp:310
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filterlist.cpp:150
+msgid "Colors"
+msgstr "Farben"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1192
-msgid ""
-"Allow B-frames to make references non-linearly to another B-frame (instead "
-"of creating a duplicate copy)"
-msgstr ""
-"Nichtlineare Referenzen von B-Bildern  zu anderen B-Bildern erlauben "
-"(anstatt doppelte Kopie zu erstellen)"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager_dialog.cpp:334
+msgid "Noise"
+msgstr "Rauschen"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1198
-msgid "B-Frame Direct Mode"
-msgstr "B-Bild Direktmodus"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager_dialog.cpp:358
+msgid "Sharpness"
+msgstr "Sch?rfe"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1207
-msgid "Spatial"
-msgstr "r?umlich"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager_dialog.cpp:382
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filterlist.cpp:225
+msgid "Subtitles"
+msgstr "Untertitel"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1208
-msgid "Temporal"
-msgstr "zeitlich"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager_dialog.cpp:406
+msgid "Misc"
+msgstr "Diverses"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1209
-msgid "Auto"
-msgstr "Auto"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager_dialog.cpp:417
+msgid "External"
+msgstr "Extern"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1211
-msgid "<b>B-Frames</b>"
-msgstr "<b>B-Bilder</b>"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager_dialog.cpp:428
+msgid "Add selected filter to the Active Filters list"
+msgstr "Ausgew?hlten Filter zu der Aktiv-Filter-Liste hinzuf?gen"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1216
-msgid "Partitions & Frames"
-msgstr "Aufteilungen & Bilder"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager_dialog.cpp:434
+msgid "<b>Available Filters</b>"
+msgstr "<b>Verf?gbare Filter</b>"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1251
-msgid "Set how much \"bitrate bonus\" a keyframe can get"
-msgstr "Legt fest, wieviel \"Bitratenbonus\" ein Keyframe bekommen kann"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager_dialog.cpp:479
+msgid "Remove filter"
+msgstr "Filter entfernen"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1260
-msgid ""
-"Set how much bitrate is deducted from a B-frame as compared to the previous "
-"P-frame"
-msgstr ""
-"Legt fest, wieviel von der Bitrate eines B-Bildes abgezogen wird im "
-"Vergleich zum vorherigen P-Bild"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager_dialog.cpp:488
+msgid "Move filter down"
+msgstr "Filter runter"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1269
-msgid ""
-"Define how much the bitrate can fluctuate over the entire video. 0% results "
-"in a constant bitrate stream, while 100% results in a pure quality based "
-"bitrate stream."
-msgstr ""
-"Legt fest, wie stark die Bitrate ?ber das gesamte Video schwanken kann. 0% "
-"ergibt einen konstanten Bitratenstrom, w?hrend 100% einen richtigen "
-"qualit?tsbasierten Bitratenstrom ergibt."
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager_dialog.cpp:497
+msgid "Move filter up"
+msgstr "Filter hoch"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1272
-msgid "Keyframe Boost (%)"
-msgstr "I-Bild (keyframe) Erh?hung (%)"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager_dialog.cpp:503
+msgid "P_artial"
+msgstr "Teil_st?ck"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1279
-msgid "B-frame Reduction (%)"
-msgstr "B-Bild Reduktion (%)"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager_dialog.cpp:506
+msgid "Apply the current filter only to a part of the file"
+msgstr "Aktuellen Filter nur auf einen Teil der Datei anwenden"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1286
-msgid "Bitrate Variability (%)"
-msgstr "Bitrate Variablit?t (%)"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager_dialog.cpp:511
+msgid "Configure filter"
+msgstr "Filter konfigurieren"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1293
-msgid "<b>Bitrate</b>"
-msgstr "<b>Bitrate</b>"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager_dialog.cpp:521
+msgid "C_onfigure"
+msgstr "K_onfigurieren"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1313
-msgid "Min QP"
-msgstr "Min QP"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager_dialog.cpp:525
+msgid "<b >Active Filters</b>"
+msgstr "<b >Aktive Filter</b>"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1320
-msgid "Max QP"
-msgstr "Max QP"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager_dialog.cpp:552
+msgid "_Preview"
+msgstr "_Vorschau"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1327
-msgid "Max QP Step"
-msgstr "Max QP Schritt"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtersub.cpp:53
+msgid "Video Filters"
+msgstr "Video Filter"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1341
-msgid "Enforce a minimum quantizer level"
-msgstr "Minimale Quantizer-Ebene erzwingen"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtersub.cpp:113
+msgid "VCD res"
+msgstr "VCD Aufl."
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1350
-msgid "Enforce a maximum quantizer level"
-msgstr "Maximale Quantizer-Ebene erzwingen"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtersub.cpp:119
+msgid "SVCD res"
+msgstr "SVCD Aufl."
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1359
-msgid ""
-"Define how much the quantizer rate can change between two consecutive frames"
-msgstr ""
-"Legt fest, wie stark sich der Quantizer zwischen zwei aufeinander folgenden "
-"Bildern ?ndern darf."
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtersub.cpp:125
+msgid "DVD res"
+msgstr "DVD Aufl."
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1362
-msgid "<b>Quantization Limits</b>"
-msgstr "<b>Quantization Grenzen</b>"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtersub.cpp:131
+msgid "Half D1 res"
+msgstr "Halbe D1 Aufl."
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1389
-msgid ""
-"Increase / decrease sensitivity for detecting scene changes. Improves I-"
-"frame usage and quality."
-msgstr ""
-"Erh?ht / reduziert Empfindlichkeit, um Szenenwechsel festzustellen, die zu "
-"kompensieren sind. Verbessert die Verwendung von I-Bildern und hilft der "
-"Qualit?t."
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtersub.cpp:157
+msgid "Save as script"
+msgstr "Als Skript speichern"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1392
-msgid "Scene Cut Threshold"
-msgstr "Schwelle f?r Szenenschnitt"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager.cpp:240
+msgid "The filter is already partial"
+msgstr "Der Filter ist bereits aufgeteilt"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1399
-msgid "Min IDR Frame Interval"
-msgstr "Min. IDR-Bild Intervall"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager.cpp:338
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager.cpp:340
+msgid "Load set of filters"
+msgstr "Gesetzte Filter laden"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1412
-msgid ""
-"Set minimum frame interval between IDR frames. Defines the minimum amount a "
-"frame can be reused and referenced by other frames before a new IDR frame is "
-"established."
-msgstr ""
-"Setzt das kleinste Bildintervall zwischen IDR-Bildern. Definiert den "
-"kleinsten Betrag, den ein Bild durch andere Bilder wieder verwenden und "
-"referenzieren kann, bevor ein komplettes Bild kommt."
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager.cpp:353
+msgid "Nothing to save"
+msgstr "Nichts zum Speichern"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1421
-msgid ""
-"Set maximum frame interval between IDR frames. Defines the maximum amount a "
-"frame can be reused and referenced by other frames before a new IDR frame is "
-"established."
-msgstr ""
-"Setzt das gr??te Bildintervall zwischen IDR-Bildern. Definiert den gr??ten "
-"Betrag, den ein Bild durch andere Bilder wieder verwenden und referenzieren "
-"kann, bevor ein komplettes Bild kommt."
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager.cpp:357
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager.cpp:359
+msgid "Save set of filters"
+msgstr "Gesetzte Filter speichern"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1424
-msgid "Max IDR Frame Interval"
-msgstr "Max. IDR-Bild Intervall"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filterlist.cpp:66
+msgid "Add Video Filter"
+msgstr "Video Filter hinzuf?gen"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1431
-msgid "<b>More Rate Settings</b>"
-msgstr "<b>Mehr Bitraten-Einstellungen</b>"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filterlist.cpp:100
+msgid "Transformation"
+msgstr "Transformation"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1451
-msgid "VBV Buffer Size"
-msgstr "VBV Puffergr??e"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filterlist.cpp:175
+msgid "Denoise"
+msgstr "Entrauschen"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1458
-msgid "Initial VBV Buffer (%)"
-msgstr "Anf?nglicher VBV Puffer (%)"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filterlist.cpp:200
+msgid "Sharpen/Blur"
+msgstr "Sch?rfen/Weichzeichnen"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1465
-msgid "Maximum Local Bitrate"
-msgstr "Maximale lokale Bitrate (kbit/s)"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filterlist.cpp:250
+msgid "Miscellaneous"
+msgstr "Verschiedenes"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1496
-msgid "<b>Video Buffer Verifier</b>"
-msgstr "<b>Video Puffer Pr?fung</b>"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/ADM_tray_gtk.cpp:53
+msgid "Open Avidemux"
+msgstr "Avidemux ?ffnen"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1529
-msgid "Bitrate Variance"
-msgstr "Bitrate Varianz"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/ADM_icons.cpp:228
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/ADM_icons.cpp:252
+#, c-format
+msgid "Couldn't find pixmap file: %s"
+msgstr "Konnte Pixmap Datei %s nicht finden."
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1542
-msgid ""
-"Allowed variance of average bitrate. Lower values mean less variance. Higher "
-"values mean more variance."
-msgstr ""
-"Erlaubte Varianz der durchschnittl. Bitrate. Niedrigere Werte bedeuten "
-"weniger Varianz. H?here Werte bedeuten mehr Varianz."
+#: avidemux/ADM_userInterfaces/ADM_GTK/ui_support.cpp:54
+msgid "GTK+"
+msgstr "GTK+"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1551
-msgid ""
-"Allowed variance of average quantizer or quality. Lower values mean less "
-"variance. Higher values mean more variance. Note that 0 means constant "
-"quality while 1 means constant fluctuation. Recommended 0.6."
-msgstr ""
-"Erlaubte Varianz des durchschnittl. Quantizers. Niedrigere Werte bedeuten "
-"weniger Varianz. H?here Werte bedeuten mehr Varianz. Hierbei bedeutet 0 "
-"konstanter Quantizer, w?hrend 1 konstante Schwankungen bedeutet. Empfohlener "
-"Wert ist 0.6"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_plugins.cpp:45
+msgid "Audio Plugins"
+msgstr "Audio Plugins"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1560
-msgid "Reduced fluctuations in Quantizer (before curve compression)"
-msgstr "Schwankungen des Quantizer reduzieren (vor der Kurvenkompression)"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_plugins.cpp:68
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:344
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:347
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:352
+msgid "Audio"
+msgstr "Audio"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1571
-msgid "Quantizer Compression"
-msgstr "Quantizer Kompression"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_plugins.cpp:74
+msgid "Video Encoder Plugins"
+msgstr "Video Kodierer Plugins"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1578
-msgid "Temp. Blur of Est. Frame Complexity"
-msgstr "Temp. Weichzeichnen der gesch?tzten Bildkomplexit?t"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_plugins.cpp:98
+msgid "Video Encoder"
+msgstr "Video Kodierer"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1585
-msgid "Temp. Blur of Quant. after CC"
-msgstr "Temp. Weichzeichnen der Quant. nach CC"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_plugins.cpp:103
+msgid "Audio Device Plugins"
+msgstr "Audioger?te Plugins"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1592
-msgid "<b>Misc</b>"
-msgstr "<b>Verschiedenes</b>"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_plugins.cpp:125
+msgid "Audio Device"
+msgstr "Audioger?t"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1618
-msgid "Quantization factors used between I and P-frames"
-msgstr "Diese Quantization-Faktoren zwischen I- und P-Bildern verwenden"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_plugins.cpp:132
+msgid "Audio Encoder Plugins"
+msgstr "Audio Kodierer Plugins"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1627
-msgid "Quantization used between P and B-frames"
-msgstr "Diese Quantization-Faktoren zwischen P- und B-Bildern verwenden"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_plugins.cpp:154
+msgid "Audio Encoders"
+msgstr "Audio Kodierer"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1636
-msgid "Quantization difference between chroma (color) and luma (brightness)"
-msgstr ""
-"Quantization-Unterschied zwischen Farbintensit?t (Farbe) and Brillianz "
-"(Helligkeit)"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_plugins.cpp:161
+msgid "Plugins Info"
+msgstr "Plugins Info"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1639
-msgid "Factor between I and P-frame Quants"
-msgstr "Faktor zwischen I- und P-Bild Quantization"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:81
+msgid "Select idx file:"
+msgstr "IDX-Datei ausw?hlen:"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1646
-msgid "Factor between P and B-frame Quants"
-msgstr "Faktor zwischen P- und B-Bild Quantization"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:82
+msgid "Use GlyphSet (optional):"
+msgstr "Zeichensatz verwenden (optional):"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1653
-msgid "Chroma QP Offset"
-msgstr "Farbintensit?t QP Offset"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:82
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:198
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:321
+msgid "Select GlyphSet file"
+msgstr "Zeichensatzdatei ausw?hlen"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1660
-msgid "<b>Quantizers</b>"
-msgstr "<b>Quantizer</b>"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:83
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:199
+msgid "Output SRT file"
+msgstr "Ausgabe SRT-Datei"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1678
-msgid "Flat Matrix"
-msgstr "breite Matrix"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:83
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:199
+msgid "Save SRT file"
+msgstr "SRT Datei speichern"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1685
-msgid "JVT Matrix"
-msgstr "JVT Matrix"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:93
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:210
+msgid "Select input and ouput files"
+msgstr "Eingabe-und Ausgabedateien ausw?hlen"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1695
-msgid "Custom Matrix"
-msgstr "Individuelle Matrix"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:103
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:108
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:115
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:124
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:221
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:227
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:234
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:243
+#: avidemux/ADM_outputs/oplug_ogm/op_ogsave.cpp:101
+#: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:352
+#: avidemux/ADM_ocr/adm_glyph.cpp:217
+#: avidemux/ADM_coreUI/src/DIA_fileSel.cpp:129
+#: avidemux/gtk_gui.cpp:889
+#: avidemux/gtk_gui.cpp:1499
+#: avidemux/gtk_gui.cpp:2607
+msgid "File error"
+msgstr "Dateifehler"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1705
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1135
-msgid "Open CQM file"
-msgstr "?ffne CQM Datei"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:103
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:115
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:234
+msgid "The idx/sub file does not exist."
+msgstr "Die IDX-/SUB-Datei existiert nicht."
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1713
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1143
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1575
-msgid "Edit Custom Matrix"
-msgstr "Individuelle Matrix bearbeiten"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:108
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:227
+msgid "Please Select a valid output SRT file."
+msgstr "Bitte eine g?ltige SRT-Ausgabedatei ausw?hlen"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1716
-msgid "Edit loaded custom quantization matrix file"
-msgstr "Geladene individuelle Quantization-Matrixdatei bearbeiten"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:124
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:243
+msgid "Cannot load the glyphset file."
+msgstr "Zeichensatzdatei kann nicht geladen werden."
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1718
-msgid "<b>Quantization Matrices</b>"
-msgstr "<b>Quantization Matrizen</b>"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:143
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:264
+msgid "GlyphSet filename"
+msgstr "Zeichensatz Dateiname"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1723
-msgid "More"
-msgstr "Mehr"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:143
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:264
+msgid "Save GlyphSet file"
+msgstr "Zeichensatzdatei speichern"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1731
-msgid "_Defaults"
-msgstr "Vor_einstellungen"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:145
+msgid "Save Glyph"
+msgstr "Schriftzeichen speichern"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid.cpp:241
-msgid "Xvid Encoder"
-msgstr "Xvid Kodierer"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:196
+msgid "Input TS:"
+msgstr "Eingang TS:"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid.cpp:254
-msgid "Constant Quantizer"
-msgstr "Konstanter Quantizer"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:196
+msgid "Select TS file"
+msgstr "TS Datei ausw?hlen"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid.cpp:262
-msgid "Constant Bitrate (kbps)"
-msgstr "Konstante Bitrate (kb/s)"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:197
+msgid "Subtitle PID:"
+msgstr "Untertitel PID:"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid.cpp:270
-msgid "Dual pass (MBytes)"
-msgstr "Zweifach-Durchlauf (MBytes)"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:198
+msgid "Use glyphset (optional):"
+msgstr "Zeichensatz verwenden (optional):"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid.cpp:296
-msgid "Basic"
-msgstr "Basis"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:221
+msgid "Please Select a valid TS file."
+msgstr "Bitte eine g?ltige TS Datei ausw?hlen."
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid.cpp:305
-msgid "Motion Search"
-msgstr "Bewegungssuche"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:266
+msgid "Save GlyphSet"
+msgstr "Zeichensatz speichern"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid.cpp:321
-msgid "Max I frame interval "
-msgstr "Max. I-Bild Intervall"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp:45
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_SVCD.cpp:45
+msgid "Default"
+msgstr "Voreinstellung"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid.cpp:337
-msgid "Min I frame interval"
-msgstr "Min. I-Bild Intervall"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp:46
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_SVCD.cpp:46
+msgid "TMPGEnc"
+msgstr "TMPGEnc"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid.cpp:361
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:891
-msgid "0 - None"
-msgstr "0 - Keine"
+# a style of animation originating in Japan that is characterized by stark colorful graphics depicting vibrant characters in action-filled plots often with fantastic or futuristic themes
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp:47
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_SVCD.cpp:47
+msgid "Anime"
+msgstr "Anime (jp.)"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid.cpp:365
-msgid "1- Very low"
-msgstr "1 - Sehr niedrig"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp:48
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_SVCD.cpp:48
+msgid "KVCD"
+msgstr "KVCD"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid.cpp:369
-msgid "2- Low"
-msgstr "2 - niedrig"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp:51
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_SVCD.cpp:51
+msgid "Progressive"
+msgstr "Progressiv (Vollbilder)"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid.cpp:373
-msgid "3- Medium"
-msgstr "3 - Mittel"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp:52
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_SVCD.cpp:52
+msgid "Interlaced TFF"
+msgstr "TTF- Halbbildmodus (interlaced)"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid.cpp:377
-msgid "4- High"
-msgstr "4 - Hoch"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp:53
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_SVCD.cpp:53
+msgid "Interlaced BFF"
+msgstr "BBF-Halbbildmodus (interlaced)"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid.cpp:381
-msgid "5- Very High"
-msgstr "5 - Sehr hoch"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp:57
+msgid "VCD 40 kB"
+msgstr "VCD 40 kB"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid.cpp:385
-msgid "6- Ultra High"
-msgstr "6 - Besonders hoch"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp:58
+msgid "SVCD 112 kB"
+msgstr "SVCD 112 kB"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid.cpp:399
-msgid "H263 Quantizer"
-msgstr "H263 Quantizer"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp:59
+msgid "DVD 224 kB"
+msgstr "DVD 224 kB"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid.cpp:404
-msgid "MPEG Quantizer"
-msgstr "MPEG Quantizer"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp:64
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_SVCD.cpp:60
+msgid "Ma_x. bitrate:"
+msgstr "Ma_x. Bitrate:"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid.cpp:411
-msgid "Advanced"
-msgstr "Fortgeschritten"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp:65
+msgid "Mi_n. bitrate:"
+msgstr "Mi_n. Bitrate:"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid.cpp:420
-msgid "Min I Frame Qzer"
-msgstr "Min. I-Bild Qzer"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp:66
+msgid "_Use Xvid rate control"
+msgstr "_Xvid Bitratenpr?fung verwenden"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid.cpp:428
-msgid "Max I Frame Qzer"
-msgstr "Max. I-Bild Qzer"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp:68
+msgid "_Buffer size:"
+msgstr "_Puffergr??e:"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid.cpp:436
-msgid "Min P Frame Qzer"
-msgstr "Min. P-Bild Qzer"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp:70
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_SVCD.cpp:57
+msgid "Aspect _ratio:"
+msgstr "Seitenve_rh?ltnis:"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid.cpp:444
-msgid "Max P Frame Qzer"
-msgstr "Max. P-Bild Qzer"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp:71
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_SVCD.cpp:58
+msgid "_Matrices:"
+msgstr "_Matrizen:"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid.cpp:489
-msgid "Not Yet!"
-msgstr "Noch nicht !"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp:72
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_SVCD.cpp:59
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flv1.cpp:37
+msgid "_GOP size:"
+msgstr "_GOP Gr??e:"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid.cpp:494
-msgid "B Frames"
-msgstr "B-Bilder"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp:78
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_SVCD.cpp:66
+msgid "_Interlacing:"
+msgstr "_Interlacing:"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:114
-msgid "Select Xvid matrix file to load"
-msgstr "Zu ladende Xvid Matrix-Datei ausw?hlen"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp:82
+msgid "libavcodec MPEG-2 Configuration"
+msgstr "libavcodec MPEG-2 Konfiguration"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:126
-msgid "Error Loading"
-msgstr "Ladefehler"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_bitrateHisto.cpp:55
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_bitrateHisto.cpp:124
+msgid "No data"
+msgstr "Keine Daten"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:126
-msgid "Error loadind the custom matrix file."
-msgstr "Fehler beim Laden der individuellen Matrix-Datei"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_bitrateHisto.cpp:210
+msgid "Max. bitrate:"
+msgstr "Max. Bitrate:"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:144
-msgid "Matrix Loaded"
-msgstr "Matrix wurde geladen"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:144
-msgid "The custom matrix file has been successfully loaded."
-msgstr "Die individuelle Matrix-Datei wurde erfolgreich geladen."
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:181
-msgid "Size (MBytes):"
-msgstr "Gr??e (MByte):"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:187
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:371
-msgid "Average bitrate (kb/s):"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_bitrateHisto.cpp:211
+msgid "Average bitrate:"
 msgstr "Durchschnittl. Bitrate (kb/s):"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:356
-msgid "Target bitrate (kb/s):"
-msgstr "Ziel-Bitrate (kb/s):"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_bitrateHisto.cpp:212
+msgid "Number of I frames:"
+msgstr "Anzahl von I-Bildern:"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:364
-msgid "Target video size (MB):"
-msgstr "Ziel-Videogr??e (MBytes):"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_bitrateHisto.cpp:213
+msgid "Number of P frames:"
+msgstr "Anzahl von P-Bildern:"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:486
-msgid "Select Custom Matrix File to write"
-msgstr "Individuelle Matrix-Datei zum Schreiben ausw?hlen"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_bitrateHisto.cpp:214
+msgid "Number of B frames:"
+msgstr "Anzahl von B-Bildern:"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:491
-msgid "Error Writing"
-msgstr "Schreibfehler"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_bitrateHisto.cpp:215
+msgid "Max. B frames:"
+msgstr "Max. B-Bilder:"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:491
-msgid "Error writing the custom matrix file."
-msgstr "Fehler beim Schreiben der indivuellen Matrix-Datei."
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_bitrateHisto.cpp:228
+msgid "Bitrate Histogram"
+msgstr "Bitrate Histogramm"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:707
-msgid "XviD encoding options"
-msgstr "XviD Kodierer Optionen"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_mjpeg.cpp:30
+msgid "_Quality:"
+msgstr "Qualit?t:"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:741
-msgid "Encoding type:"
-msgstr "Kodier-Modus:"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_mjpeg.cpp:31
+msgid "_Swap U&V"
+msgstr "U&V tau_schen"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:746
-msgid "Bitrate (kb/s):"
-msgstr "Bitrate (kb/s):"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_mjpeg.cpp:33
+msgid "MJPEG Configuration"
+msgstr "MJPEG Konfiguration"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:751
-msgid "Quantizer:"
-msgstr "Quantizer:"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp:126
+msgid "Video Codecs"
+msgstr "Video Kodierer"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:763
-msgid "Select 1-pass or 2-pass encoding"
-msgstr "EInfach- oder Zweifach-Durchlauf beim Kodieren ausw?hlen"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp:128
+msgid "x264"
+msgstr "x264"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:767
-msgid "Single Pass - Bitrate"
-msgstr "Einfach-Durchlauf - Bitrate"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp:136
+msgid "aRts"
+msgstr "aRts"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:771
-msgid "Single Pass - Quantizer"
-msgstr "Einfach-Durchlauf - Quantizer"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp:137
+msgid "ESD"
+msgstr "ESD"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:783
-msgid "Same Quantizer as Input"
-msgstr "Gleicher Quantizer wie Eingang"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp:138
+msgid "Fontconfig"
+msgstr "Schriftkonfiguration"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:792
-msgid "Target video bitrate"
-msgstr "Ziel-Video-Bitrate (kb/s)"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp:139
+msgid "FreeType 2"
+msgstr "FreeType 2"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:799
-msgid "Constant quantizer - each frame will get the same compression"
-msgstr "Konstanter Quantizer - jedes Bild erh?lt die gleiche Kompression"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp:140
+msgid "Gettext"
+msgstr "Gettext"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:801
-msgid "Variable bitrate mode"
-msgstr "Variabler Bitraten-Modus (VBR)"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp:141
+msgid "ALSA"
+msgstr "ALSA"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:813
-msgid "_Interlaced"
-msgstr "Halbb_ildmodus"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp:142
+msgid "OSS"
+msgstr "OSS"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:816
-msgid ""
-"Enables interlaced frame support - use only if your source contains "
-"interlacing artifacts (i.e. fields instead of progressive frames)"
-msgstr ""
-"Aktiviert Halbbildmodus-Unterst?tzung (interlaced) - bitte nur benutzen, "
-"wenn die Quelle halbbildtypische Artefakte enth?lt (z.B. Felder/Halbbilder "
-"statt Vollbilder)"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp:143
+msgid "SDL"
+msgstr "SDL"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:818
-msgid "_Greyscale"
-msgstr "_Grauskala"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp:144
+msgid "XVideo"
+msgstr "XVideo"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:821
-msgid "Encode in black & white"
-msgstr "Schwarz & Wei? kodieren"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp:146
+msgid "AltiVec"
+msgstr "AltiVec"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:827
-msgid "Ca_rtoon mode"
-msgstr "Ca_rtoon Modus"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp:147
+msgid "PowerPC"
+msgstr "PowerPC"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:830
-msgid "Enables special motion estimation features for cartoons/anime"
-msgstr ""
-"Aktiviert spezielle M?glichkeiten zur Bewegungsabsch?tzung f?r Cartoons / "
-"Anime (jp.)"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp:148
+msgid "x86"
+msgstr "x86"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:832
-msgid "C_hroma optimizer"
-msgstr "Farbintensit?ts-Optimierer"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp:149
+msgid "x86-64"
+msgstr "x86-64"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:835
-msgid "Enables a chroma optimizer prefilter"
-msgstr "Optimier-Vorfilter f?r Farbintensit?t aktivieren"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp:156
+msgid "Codecs"
+msgstr "Kodierer"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:841
-msgid "Turbo Mode"
-msgstr "Turbo Modus"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp:157
+msgid "Libraries"
+msgstr "Bibliotheken"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:844
-msgid "Enables fast 1st pass encoding"
-msgstr "Schnelles Kodieren im 1. Durchlauf aktivieren"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp:158
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:362
+msgid "CPU"
+msgstr "CPU"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:846
-msgid "Packed bitstream"
-msgstr "Gepackter Bitstrom"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp:162
+msgid "Built-in Support"
+msgstr "Eingebauter Support"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:849
-msgid "Enables Divx like packed vop, DO NOT SET, it is ugly"
-msgstr ""
-"Aktiviert DivX-?hnliche gepackte VOP (NICHT verwenden! Schaut h?sslich aus)."
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavDecoder.cpp:27
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_postproc.cpp:22
+msgid "_Swap U and V"
+msgstr "U mit V tau_schen"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:851
-msgid "Main"
-msgstr "Hauptteil"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavDecoder.cpp:28
+msgid "Show motion _vectors"
+msgstr "Bewegungs_vektoren anzeigen"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:870
-msgid "Motion search precision:"
-msgstr "Bewegungssuche Genauigkeit:"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavDecoder.cpp:30
+msgid "Decoder Options"
+msgstr "Dekodierer Optionen"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:874
-msgid "VHQ mode:"
-msgstr "VHQ Modus:"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_requant.cpp:39
+msgid "_Shrink Factor:"
+msgstr "_Schrumpffaktor:"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:887
-msgid ""
-"Higher settings give higher quality results, at the cost of slower encoding"
-msgstr ""
-"H?here Einstellungen ergeben Ergebnisse mit h?herer Qualit?t auf Kosten "
-"einer langsameren Kodierung."
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_requant.cpp:42
+msgid "Requant Configuration"
+msgstr "Requant Konfiguration"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:895
-msgid "1 - Very low"
-msgstr "1 - Sehr niedrig"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_gototime.cpp:9
+msgid "_Hours:"
+msgstr "Stun_den:"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:899
-msgid "2 - Low"
-msgstr "2 - Niedrig"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_gototime.cpp:10
+msgid "_Minutes:"
+msgstr "_Minuten:"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:903
-msgid "3 - Medium"
-msgstr "3 - Mittel"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_gototime.cpp:11
+msgid "_Seconds:"
+msgstr "_Sekunden:"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:907
-msgid "4 - High"
-msgstr "4 - Hoch"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_gototime.cpp:14
+msgid "Go to Time"
+msgstr "Gehe zur Zeit"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:911
-msgid "5 - Very high"
-msgstr "5 - Sehr hoch"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_resizeWiz.cpp:32
+msgid "VCD"
+msgstr "VCD"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:915
-msgid "6 - Ultra high"
-msgstr "6 - Ultra hoch"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_resizeWiz.cpp:33
+msgid "SVCD"
+msgstr "SVCD"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:924
-msgid "VHQ enables an additional search process to increase quality"
-msgstr ""
-"VHQ aktiviert einen zus?tzlichen Suchprozess, um die Qualit?t zu erh?hen."
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_resizeWiz.cpp:34
+msgid "DVD"
+msgstr "DVD"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:928
-msgid "0 - Off"
-msgstr "0 - Aus"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_resizeWiz.cpp:35
+msgid "DVD half D1"
+msgstr "DVD halb-D1"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:932
-msgid "1 - Mode decision"
-msgstr "1 - Modus Entscheidung"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_resizeWiz.cpp:36
+msgid "PSP (480 * 272)"
+msgstr "PSP (480 * 272)"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:936
-msgid "2 - Limited search"
-msgstr "2 - Begrenzte Suche"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_resizeWiz.cpp:37
+msgid "PSP full res. (720 * 480)"
+msgstr "PSP gro? (720 * 480)"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:940
-msgid "3 - Medium search"
-msgstr "3 - Mittlere Suche"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_resizeWiz.cpp:53
+msgid "_Target type:"
+msgstr "_Zieltyp:"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:944
-msgid "4 - Wide search"
-msgstr "4 - Weite Suche"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_resizeWiz.cpp:54
+msgid "_Source aspect ratio:"
+msgstr "_Quell-Seitenverh?ltnis:"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:954
-msgid "C_hroma motion"
-msgstr "Farbintensit?ts-Bewegung"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_resizeWiz.cpp:55
+msgid "_Destination aspect ratio:"
+msgstr "_Ziel-Seitenverh?ltnis:"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:957
-msgid "Use chroma information to estimate motion"
-msgstr ""
-"Informationen der Farbintensit?t zur Absch?tzung der Bewegung verwenden"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_resizeWiz.cpp:60
+msgid "Auto Wizard"
+msgstr "Auto Wizard"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:959
-msgid "_4MV"
-msgstr "_4MV"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_SVCD.cpp:70
+msgid "MPEG-2 Configuration"
+msgstr "MPEG-2 Konfiguration"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:962
-msgid "Use 4 motion vectors per macroblock, might give better compression"
-msgstr ""
-"4 Bewegungsvektoren je Makroblock verwenden, k?nnte eine bessere Kompression "
-"ergeben"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:48
+msgid "_Dynamic range compression"
+msgstr "_Dynamischer Kompressionsbereich"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:964
-msgid "HQ _AC"
-msgstr "HQ _AC"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:50
+msgid "_Time shift (ms):"
+msgstr "Ve_rschiebung (ms):"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:967
-msgid ""
-"Enable a better prediction of AC component. Turns on Lumi masking - applies "
-"more compression to dark/light areas that the eye cannot notice easily"
-msgstr ""
-"Eine bessere Vorhersage von AC Komponenten aktivieren. Damit wird Brillianz-"
-"Maskierung eingeschaltet - wendet eine h?here Kompression f?r dunkle/helle "
-"Bereiche an, die das Auge kaum wahrnehmen kann"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:50
+msgid "Time shift value (ms)"
+msgstr "Zeitverschiebungswert (ms)"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:973
-msgid "I-frame interval - Min:"
-msgstr "I-Bild Intervall - Min:"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:58
+msgid "R_esampling (Hz):"
+msgstr "R_esampling (Hz):"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:981
-msgid "Minimum space between I-frames, 1 will disable forced I-frame spacing"
-msgstr ""
-"Minimaler Abstand zwischen I-Bildern, '1' deaktiviert erzwungenen I-Bild "
-"Abstand"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:58
+msgid "Resampling frequency (Hz)"
+msgstr "Resampling Frequenz (Hz)"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:983
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1201
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1206
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1211
-msgid "Max:"
-msgstr "Max:"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:67
+msgid "Film to PAL"
+msgstr "Film -> PAL"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:991
-msgid "Maximum number of frames allowed between I-frames"
-msgstr "Maximale Anzahl von erlaubten Bildern zwischen I-Bildern"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:68
+msgid "PAL to Film"
+msgstr "PAL -> Film"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1006
-msgid "Number of B-frames:"
-msgstr "Anzahl von B-Bildern:"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:71
+msgid "_Frame rate change:"
+msgstr "_Bildrate ?ndern:"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1014
-msgid ""
-"Maximum number of sequential B-frames (when set to 0, the original I/P "
-"encoder is used)"
-msgstr ""
-"Maximale Anzahl von sequenziellen B-Bildern (wenn '0' wird der originale I/P "
-"Kodierer genutzt)"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:76
+msgid "Automatic (max -3 dB)"
+msgstr "Automatik (max -3dB)"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1020
-msgid "_Qpel"
-msgstr "_Qpel"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:77
+msgid "Manual"
+msgstr "Manuell"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1023
-msgid "Use Quarter pixel resolution for a more precise motion estimation"
-msgstr ""
-"Verwende Viertel-Pixel-Aufl?sung (Qpel) f?r pr?zisere Bewegungsabsch?tzung"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:79
+msgid "_Gain mode:"
+msgstr "_Verst?rkungsmodus:"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1028
-msgid ""
-"Global Motion Compensation can save bits on camera pans, zooming and rotation"
-msgstr ""
-"Global Motion Compensation (GMC) kann Bits sparen (z.B. bei Kamera-Schwenk, "
-"Zoom, Rotation)"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:81
+msgid "G_ain value:"
+msgstr "Verst?rk_ungswert"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1030
-msgid "_BVHQ"
-msgstr "_BVHQ"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:83
+msgid "Gain"
+msgstr "Verst?rkung"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1033
-msgid "Produces nicer-looking B-frames"
-msgstr "Erzeugt sch?nere B-Bilder"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:88
+msgid "No change"
+msgstr "Keine ?nderung"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1050
-msgid "Get PAR from input video file"
-msgstr "PAR der Eingangs-Video-Datei holen"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:91
+msgid "Stereo+surround"
+msgstr "Stereo+Surround"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1056
-msgid "Pixel Width"
-msgstr "Pixel Breite"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:92
+msgid "Stereo+center"
+msgstr "Stereo+Center"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1067
-msgid "Pixel Height"
-msgstr "Pixel H?he"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:93
+msgid "Stereo+center+surround"
+msgstr "Stereo+Center+Surround"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1068
-msgid "Pixel Aspect Ratio"
-msgstr "Pixel Seitenverh?ltnis (PAR)"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:94
+msgid "Stereo front+stereo rear"
+msgstr "Stereo Front+Stero Rear"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1086
-msgid "Quantization type:"
-msgstr "Quantization Typ:"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:95
+msgid "5 channels"
+msgstr "5 K?n?le"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1090
-msgid "_H.263"
-msgstr "_H.263"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:96
+msgid "5.1"
+msgstr "5.1 Kan?le"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1093
-msgid "H.263 quantizers smooth the picture (useful at lower bitrates)"
-msgstr "H.263 Quantizer gl?ttet das Bild (n?tzlich bei niedriger Bitrate)"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:97
+msgid "Dolby Pro Logic"
+msgstr "Dolby Prologic"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1097
-msgid "_MPEG"
-msgstr "_MPEG"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:98
+msgid "Dolby Pro Logic II"
+msgstr "Dolby Prologic II"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1100
-msgid ""
-"MPEG quantizers (slightly slower) produce sharper picture (useful at higher "
-"bitrates)"
-msgstr ""
-"MPEG Quantizer (etwas langsamer) erzeugt sch?rfere Bilder (gut bei h?heren "
-"Bitraten)"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:101
+msgid "_Mixer:"
+msgstr "_Mixer:"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1104
-msgid "_Custom Matrix"
-msgstr "_Individuelle Matrix"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:105
+msgid "Audio Filters"
+msgstr "Audio Filter"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1114
-msgid "Load Custom Matrix:  "
-msgstr "Individuelle Matrix laden:"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flv1.cpp:41
+msgid "FLV1 Configuration"
+msgstr "FLV1 Konfiguration"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1160
-msgid "I-frame quantizer - Min:"
-msgstr "I-Bild Quantizer - Min:"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_postproc.cpp:21
+msgid "_Filter strength:"
+msgstr "_Filtersch?rfe:"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1165
-msgid "P-frame quantizer - Min:"
-msgstr "P-Bild Quantizer - Min:"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_postproc.cpp:32
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:298
+msgid "_Horizontal deblocking"
+msgstr "_Horizontal entblockieren"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1170
-msgid "B-frame quantizer - Min:"
-msgstr "B-Bild Quantizer - Min:"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_postproc.cpp:33
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:299
+msgid "_Vertical deblocking"
+msgstr "_Vertikal entblockieren"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1183
-msgid "Minimum quantizer allowed for I-frames"
-msgstr "Minimal erlaubter Quantizer f?r I-Bilder"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_postproc.cpp:34
+msgid "_Deringing"
+msgstr "_De-Ringing"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1189
-msgid "Minimum quantizer allowed for P-frames"
-msgstr "Minimal erlaubter Quantizer f?r P-Bilder"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_postproc.cpp:38
+msgid "Postprocessing"
+msgstr "Postprocessing"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1195
-msgid "Minimum quantizer allowed for B-frames"
-msgstr "Minimal erlaubter Quantizer f?r B-Bilder"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_jobs_save.cpp:7
+msgid "_Job name:"
+msgstr "_Job Name:"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1224
-msgid "Maximum quantizer allowed for I-frames"
-msgstr "Maximal erlaubter Quantizer f?r I-Bilder"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_jobs_save.cpp:8
+msgid "Output _File:"
+msgstr "Ausgabe_datei:"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1230
-msgid "Maximum quantizer allowed for P-frames"
-msgstr "Maximal erlaubter Quantizer f?r P-Bilder"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_jobs_save.cpp:8
+msgid "Select Video To Write"
+msgstr "Zu schreibendes Video ausw?hlen"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1236
-msgid "Maximum quantizer allowed for B-frames"
-msgstr "Maximal erlaubter Quantizer f?r B-Bilder"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_jobs_save.cpp:11
+msgid "Save Job"
+msgstr "Job speichern"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1238
-msgid "Quantizer restrictions"
-msgstr "Quantizer Beschr?nkungen"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_v2v.cpp:35
+msgid "_VOB file(s):"
+msgstr "_Vob Datei(en):"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1245
-msgid "Rate distortion quantization, will find optimal encoding for each block"
-msgstr ""
-"Verzerrungsabh?ngige Quantization, findet die optimale Kodierung f?r jeden "
-"Block"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_v2v.cpp:35
+msgid "Select VOB file(s)"
+msgstr "VOB Datei(en) ausw?hlen"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1275
-msgid "I-frame boost (%):"
-msgstr "I-Bild Erh?hung (%):"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_v2v.cpp:36
+msgid "_IFO file:"
+msgstr "_IFO Datei:"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1280
-msgid "I-frames closer than ... frames..."
-msgstr "I-Bilder sind n?her als ... Bilder..."
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_v2v.cpp:36
+msgid "Select IFO file"
+msgstr "IFO Datei ausw?hlen"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1285
-msgid "...are reduced by (%):"
-msgstr "...wurden reduziert mit (%):"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_v2v.cpp:37
+msgid "VobSub file:"
+msgstr "VobSub Datei:"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1290
-msgid "Max overflow improvement (%):"
-msgstr "Max. ?berlauf-Verbesserung (%):"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_v2v.cpp:37
+msgid "Select VobSub file"
+msgstr "VobSub Datei ausw?hlen"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1295
-msgid "Max overflow degradation (%):"
-msgstr "Max. ?berlauf-Verschlechterung (%):"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_v2v.cpp:42
+msgid "VOB to VobSub"
+msgstr "VOB -> VobSub"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1307
-#, c-format
-msgid "A value of 20 will give 20% more bits to every I-frame"
-msgstr "Ein Wert von 20 ergibt 20% mehr Bits je I-Bild"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_v2v.cpp:46
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_v2v.cpp:51
+msgid "The selected vobfile does not exist"
+msgstr "Die ausgew?hlte VOB Datei existiert nicht"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1313
-msgid ""
-"I-frames appearing in the range below this value will be treated as "
-"consecutive keyframes"
-msgstr ""
-"I-Bilder, die im Bereich unterhalb dieses Wertes erscheinen, werden als "
-"aufeinander folgende I-Bilder (keyframes) behandelt"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_v2v.cpp:56
+msgid "Please select a correct VobSub path/dir"
+msgstr "Bitte korrektes VobSub Verzeichnis ausw?hlen"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1318
-msgid ""
-"Reduction of bitrate for the first consecutive I-frames. The last I-frame "
-"will get treated normally"
-msgstr ""
-"Reduzierung der Bitrate f?r die ersten aufeinander folgenden I-Bilder. Das "
-"letzte I-Bild wird normal behandelt"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:175
+msgid "_Use systray while encoding"
+msgstr "Systemablage w?hrend des Kodierens ben_utzen"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1323
-msgid ""
-"How much of the overflow the codec can eat into during undersized sections - "
-"larger values will bridge the gap faster"
-msgstr ""
-"Wieviel ?berlauf kann vom Kodierer w?hrend der winzigen Abschnitte "
-"verschluckt werden - gr??ere Werte schlie?en die L?cke schneller"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:176
+msgid "_Accept non-standard audio frequency for DVD"
+msgstr "Erlaube _Nicht-Standard Audio-Frequenz f?r DVD"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1328
-msgid ""
-"How much of the overflow the codec can eat into during oversized sections - "
-"larger values will bridge the gap faster"
-msgstr ""
-"Wieviel ?berlauf kann vom Kodierer w?hrend der ?bergro?en Abschnitte "
-"verschluckt werden - gr??ere Werte schlie?en die L?cke schneller"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:177
+msgid "Create _OpenDML files"
+msgstr "_OpenDML-Dateien erstellen"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1330
-msgid "Two pass tuning"
-msgstr "Zweifach-Durchlauf Feinabstimmung"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:178
+msgid "Automatically _index MPEG files"
+msgstr "MPEG-Dateien automatisch _indizieren"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1347
-msgid "High bitrate scenes (%):"
-msgstr "Szenen mit hoher Bitrate (%):"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:179
+msgid "Automatically _swap A and B if A>B"
+msgstr "Automatisch A mit B tauschen, wenn A > B"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1352
-msgid "Low bitrate scenes (%):"
-msgstr "Szenen mit niedriger Bitrate (%):"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:180
+msgid "_Disable NUV audio sync"
+msgstr "NUV Audio-Sync _deaktivieren"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1357
-msgid "Overflow control strength (%):"
-msgstr "St?rke der ?berlauf-Kontrolle (%):"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:182
+msgid "Automatically _build VBR map"
+msgstr "VBR-Zeitkarte automatisch _erstellen"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1369
-msgid ""
-"The higher this value, the more bits get taken from frames larger than the "
-"average size, and redistributed to others"
-msgstr ""
-"Je gr??er dieser Wert ist, desto mehr Bits werden von Bildern, die gr??er "
-"als die durchschnittliche Gr??e sind, genommen und an andere Bilder weiter "
-"verteilt"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:183
+msgid "Automatically _rebuild index"
+msgstr "Index automatisch wieder erstellen"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1374
-msgid ""
-"The higher this value, the more bits get assigned to frames below the "
-"average frame size"
-msgstr ""
-"Je gr??er dieser Wert ist, desto mehr Bits werden Bildern zugewiesen, die "
-"kleiner als die durchschnittliche Gr??e sind"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:184
+msgid "Automatically remove _packed bitstream"
+msgstr "Ge_packten Bitstream automatisch entfernen"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1379
-msgid ""
-"0 = default from core (let XviD decide), else overflow payback percent per "
-"frame"
-msgstr ""
-"0 = Voreinstellung der zentralen Einheit (lass' XviD entscheiden), oder "
-"?berlaufr?ckgabe in Prozent pro Bild"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:186
+msgid "SIMD"
+msgstr "SIMD"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1381
-msgid "Curve compression"
-msgstr "Kurven-Kompression"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:188
+msgid "Enable all SIMD"
+msgstr "Alle SIMD aktivieren"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1385
-msgid "Second Pass"
-msgstr "Zweiter Durchlauf"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:189
+msgid "Enable MMX"
+msgstr "MMX aktivieren"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1598
-msgid "<b>Intra Matrix</b>"
-msgstr "<b>Intrablock Matrix</b>"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:190
+msgid "Enable MMXEXT"
+msgstr "MMXEXT aktivieren"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1616
-msgid "<b>Inter Matrix</b>"
-msgstr "<b>Interblock Matrix</b>"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:191
+msgid "Enable 3DNOW"
+msgstr "3DNOW aktivieren"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/DIA_color.cpp:70
-msgid "Select Color"
-msgstr "Farbe ausw?hlen"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:192
+msgid "Enable 3DNOWEXT"
+msgstr "3DNOWEXT aktivieren"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/DIA_filesel.cpp:90
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/DIA_filesel.cpp:247
-msgid "_Browse..."
-msgstr "_Auflisten..."
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:193
+msgid "Enable SSE"
+msgstr "SSE aktivieren"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_bitrate.cpp:106
-msgid "_Encoding mode:"
-msgstr "Kodi_er-Modus:"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:194
+msgid "Enable SSE2"
+msgstr "SSE2 aktivieren"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_bitrate.cpp:130
-msgid "Single pass - bitrate"
-msgstr "Einfach-Durchlauf - Bitrate"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:195
+msgid "Enable SSE3"
+msgstr "SSE3 aktivieren"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_bitrate.cpp:132
-msgid "Single pass - constant quality"
-msgstr "Einfach-Durchlauf - konstanter Quantizer"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:196
+msgid "Enable SSSE3"
+msgstr "SSSE3 aktivieren"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_bitrate.cpp:134
-msgid "Single pass - same qz as input"
-msgstr "Einfach-Durchlauf - gleicher Quantizer wie Eingang"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:217
+msgid "_lavc threads:"
+msgstr "_lavc Threads:"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_bitrate.cpp:136
-msgid "Single pass - Average quantizer"
-msgstr "Einfach-Durchlauf - durchschnittl. Quantizer"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:219
+msgid "Multi-threading"
+msgstr "Multi-Threading"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_bitrate.cpp:139
-msgid "Two pass - video size"
-msgstr "Zweifach-Durchlauf - Videogr??e"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:224
+msgid "Above normal"
+msgstr "?ber normal"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_bitrate.cpp:141
-msgid "Two pass - average bitrate"
-msgstr "Zweifach-Durchlauf - durchschnittl. Bitrate"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:226
+msgid "Below normal"
+msgstr "Unter normal"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_bitrate.cpp:283
-#: avidemux/ADM_videoFilter/ADM_vidForcedPP.cpp:61
-msgid "_Quantizer:"
-msgstr "_Quantizer:"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:229
+msgid "_Encoding priority:"
+msgstr "Kodi_erungspriorit?t:"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_bitrate.cpp:288
-msgid "A_vg Quantizer:"
-msgstr "Durchs_chnittl. Quantizer:"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:230
+msgid "_Indexing/unpacking priority:"
+msgstr "_Indizieren/Entpacken Priorit?t:"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_bitrate.cpp:293
-msgid "_Video size (MB):"
-msgstr "_Video Gr??e (MB):"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:231
+msgid "_Playback priority:"
+msgstr "_Wiedergabe Priorit?t:"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_bitrate.cpp:298
-msgid "_Average bitrate (kb/s):"
-msgstr "Durchschnittl. Bitr_ate (kb/s):"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:233
+msgid "Prioritisation"
+msgstr "Priorisierung"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_bitrate.cpp:303
-msgid "-"
-msgstr "-"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:238
+msgid "_Split MPEG files every (MB):"
+msgstr "Mpeg_s aufteilen alle (MB):"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_hex.cpp:100
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_hex.cpp:134
-msgid "_Previous"
-msgstr "_Vorheriges"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:240
+msgid "_Use alternative tag for MP3 in .mp4"
+msgstr "Alternatives 'Tag' f?r MP3 in .mp4 ben_utzen"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_hex.cpp:108
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_hex.cpp:164
-msgid "_Next"
-msgstr "_N?chstes"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:244
+msgid "XVideo (best)"
+msgstr "XVideo (bestens)"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_threadCount.cpp:75
-msgid "Disable"
-msgstr "Deaktivieren"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:248
+msgid "SDL (MS Windows GDI)"
+msgstr "SDL (MS Windows GDI)"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_threadCount.cpp:79
-msgid "Auto-detect"
-msgstr "Auto-Erkennung"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:249
+msgid "SDL (MS Windows DirectX)"
+msgstr "SDL (MS Windows DirectX)"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filterlist.cpp:64
-msgid "Add Video Filter"
-msgstr "Video Filter hinzuf?gen"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:251
+msgid "SDL (good)"
+msgstr "SDL (gut)"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filterlist.cpp:98
-msgid "Transformation"
-msgstr "Transformation"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:255
+msgid "Video _display:"
+msgstr "Video-Anzeige:"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filterlist.cpp:123
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager_dialog.cpp:285
-msgid "Interlacing"
-msgstr "Interlacing"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:260
+msgid "No alerts"
+msgstr "Keine Meldungen anzeigen"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filterlist.cpp:148
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager_dialog.cpp:309
-msgid "Colors"
-msgstr "Farben"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:261
+msgid "Display only error alerts"
+msgstr "Nur Fehlermeldungen anzeigen"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filterlist.cpp:198
-msgid "Sharpen/Blur"
-msgstr "Sch?rfen/Weichzeichnen"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:262
+msgid "Display all alerts"
+msgstr "Alle Meldungen anzeigen"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filterlist.cpp:223
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager_dialog.cpp:381
-msgid "Subtitles"
-msgstr "Untertitel"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:264
+msgid "_Message level:"
+msgstr "Anzeigestufe f?r Meldungen:"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filterlist.cpp:248
-msgid "Miscellaneous"
-msgstr "Verschiedenes"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:269
+#: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:487
+msgid "PCM"
+msgstr "PCM"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager.cpp:245
-msgid "The filter is already partial"
-msgstr "Der Filter ist bereits aufgeteilt"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:270
+msgid "Master"
+msgstr "Master"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager.cpp:343
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager.cpp:345
-msgid "Load set of filters"
-msgstr "Gesetzte Filter laden"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:271
+msgid "_Volume control:"
+msgstr "Lautst?rkeregler:"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager.cpp:358
-msgid "Nothing to save"
-msgstr "Nichts zum Speichern"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:276
+msgid "No downmixing"
+msgstr "Nicht herunter mischen"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager.cpp:362
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager.cpp:364
-msgid "Save set of filters"
-msgstr "Gesetzte Filter speichern"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:278
+msgid "Pro Logic"
+msgstr "Dolby ProLogic"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager_dialog.cpp:123
-msgid "Video Filter Manager"
-msgstr "Video Filter Manager"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:279
+msgid "Pro Logic II"
+msgstr "Dolby ProLogic II"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager_dialog.cpp:145
-msgid "Open filter list [Ctrl-O]"
-msgstr "Filter-Liste ?ffnen [Strg-O]"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:281
+msgid "_Local playback downmixing:"
+msgstr "_Lokale Wiedergabe herunter mischen:"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager_dialog.cpp:154
-msgid "Save filter list [Ctrl-S]"
-msgstr "Filterliste speichern [Strg-S]"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:295
+msgid "_AudioDevice"
+msgstr "_Audioger?t"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager_dialog.cpp:162
-msgid "Save Script"
-msgstr "Skript speichern"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:300
+msgid "De_ringing"
+msgstr "De-_Ringing"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager_dialog.cpp:165
-msgid "Save as script [Ctrl-J]"
-msgstr "Speichern als Skript [Strg-J]"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:301
+msgid "_Strength:"
+msgstr "_St?rke:"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager_dialog.cpp:173
-msgid "DVD Res"
-msgstr "DVD Aufl."
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:302
+msgid "Default Postprocessing"
+msgstr "Voreingestellte Nachbearbeitung"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager_dialog.cpp:176
-msgid "DVD resolution [Ctrl-1]"
-msgstr "DVD Aufl?sung [Strg-1]"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:316
+msgid "_Filter directory:"
+msgstr "_Filter-Verzeichnis:"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager_dialog.cpp:184
-msgid "Half D1 Res"
-msgstr "Halbe D1 Aufl."
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:316
+msgid "Select filter directory"
+msgstr "Filter-Verzeichnis ausw?hlen"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager_dialog.cpp:187
-msgid "Half D1 resolution [Ctrl-2]"
-msgstr "Halbe D1 Aufl?sung [Strg-2]"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:317
+msgid "_Load external filters"
+msgstr "Externe Filter _laden"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager_dialog.cpp:195
-msgid "SVCD Res"
-msgstr "SVCD Aufl."
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:320
+msgid "Use _Global GlyphSet"
+msgstr "_Globalen Zeichensatz verwenden"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager_dialog.cpp:198
-msgid "SVCD resolution [Ctrl-3]"
-msgstr "SVCD Aufl?sung [Strg-3]"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:321
+msgid "Gl_yphSet:"
+msgstr "Zeichen_satz:"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager_dialog.cpp:206
-msgid "VCD Res"
-msgstr "VCD Aufl."
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:326
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:84
+msgid "User Interface"
+msgstr "Benutzerschnittstelle"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager_dialog.cpp:209
-msgid "VCD resolution [Ctrl-4]"
-msgstr "VCD Aufl?sung [Strg-4]"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:330
+msgid "Automation"
+msgstr "Automation"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager_dialog.cpp:260
-msgid "Transform"
-msgstr "Transformieren"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:358
+#: avidemux/gtk_gui.cpp:1998
+msgid "Video"
+msgstr "Video"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager_dialog.cpp:333
-msgid "Noise"
-msgstr "Rauschen"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:366
+msgid "Threading"
+msgstr "Threading"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager_dialog.cpp:357
-msgid "Sharpness"
-msgstr "Sch?rfe"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:370
+msgid "Global GlyphSet"
+msgstr "Globaler Zeichensatz"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager_dialog.cpp:405
-msgid "Misc"
-msgstr "Diverses"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:374
+msgid "External Filters"
+msgstr "Externe Filter"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager_dialog.cpp:416
-msgid "External"
-msgstr "Extern"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:378
+msgid "Preferences"
+msgstr "Einstellungen"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager_dialog.cpp:427
-msgid "Add selected filter to the Active Filters list"
-msgstr "Ausgew?hlten Filter zu der Aktiv-Filter-Liste hinzuf?gen"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:38
+msgid "Full"
+msgstr "Voll"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager_dialog.cpp:433
-msgid "<b>Available Filters</b>"
-msgstr "<b>Verf?gbare Filter</b>"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:39
+msgid "Log"
+msgstr "Log"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager_dialog.cpp:478
-msgid "Remove filter"
-msgstr "Filter entfernen"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:40
+msgid "Phods"
+msgstr "Phods"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager_dialog.cpp:487
-msgid "Move filter down"
-msgstr "Filter runter"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:41
+msgid "EPZS"
+msgstr "EPZS"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager_dialog.cpp:496
-msgid "Move filter up"
-msgstr "Filter hoch"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:42
+msgid "X1"
+msgstr "X1"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager_dialog.cpp:502
-msgid "P_artial"
-msgstr "Teil_st?ck"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:46
+msgid "H.263"
+msgstr "H.263"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager_dialog.cpp:505
-msgid "Apply the current filter only to a part of the file"
-msgstr "Aktuellen Filter nur auf einen Teil der Datei anwenden"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:51
+msgid "MB comparison"
+msgstr "MB Vergleich"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager_dialog.cpp:510
-msgid "Configure filter"
-msgstr "Filter konfigurieren"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:52
+msgid "Fewest bits (vhq)"
+msgstr "Geringste Bitzahl (vhq)"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager_dialog.cpp:520
-msgid "C_onfigure"
-msgstr "K_onfigurieren"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:53
+msgid "Rate distortion"
+msgstr "Verzerrungsgrad"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager_dialog.cpp:524
-msgid "<b >Active Filters</b>"
-msgstr "<b >Aktive Filter</b>"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:59
+msgid "Matrices"
+msgstr "Matrizen"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager_dialog.cpp:551
-msgid "_Preview"
-msgstr "_Vorschau"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:60
+msgid "Mi_n. quantizer:"
+msgstr "Mi_n. Quantizer:"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtersub.cpp:52
-msgid "Video Filters"
-msgstr "Video Filter"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:61
+msgid "Ma_x. quantizer:"
+msgstr "Ma_x. Quantizer:"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtersub.cpp:112
-msgid "VCD res"
-msgstr "VCD Aufl."
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:62
+msgid "Max. quantizer _difference:"
+msgstr "Max. Quantizer-_Unterschied:"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtersub.cpp:118
-msgid "SVCD res"
-msgstr "SVCD Aufl."
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:64
+msgid "4_MV"
+msgstr "4_MV"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtersub.cpp:124
-msgid "DVD res"
-msgstr "DVD Aufl."
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:65
+msgid "_Trellis quantization"
+msgstr "_Trellis Quantization"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtersub.cpp:130
-msgid "Half D1 res"
-msgstr "Halbe D1 Aufl."
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:67
+msgid "_Quarter pixel"
+msgstr "_Viertel-Pixel (Qpel)"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtersub.cpp:156
-msgid "Save as script"
-msgstr "Als Skript speichern"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:68
+msgid "_GMC"
+msgstr "_GMC"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_bindings.cpp:541
-msgid "Side"
-msgstr "Seitlich"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:71
+msgid "_Number of B frames:"
+msgstr "A_nzahl von B-Bildern:"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_bindings.cpp:542
-#: avidemux/ADM_videoFilter/ADM_vidDecTelecide.cpp:90
-#: avidemux/ADM_videoFilter/ADM_vidDGbob.cpp:81
-#: avidemux/ADM_videoFilter/ADM_vidKernelDeint.cpp:87
-#: avidemux/ADM_videoFilter/ADM_vidMcDeint.cpp:107
-msgid "Top"
-msgstr "Oben"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:72
+msgid "_Quantization type:"
+msgstr "_Quantization Typ:"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_bindings.cpp:543
-msgid "Separate"
-msgstr "Trennen"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:74
+msgid "_Macroblock decision:"
+msgstr "_Makroblock Entscheidung:"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_bindings.cpp:728
-#, c-format
-msgid "Frame:%c(%02d)"
-msgstr "Bild:%c(%02d)"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:76
+msgid "_Filesize tolerance (kb):"
+msgstr "_Dateigr??e Toleranz (kb):"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:275
-msgid "Avidemux"
-msgstr "Avidemux"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:78
+msgid "_Quantizer compression:"
+msgstr "_Quantizer Kompression:"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:299
-msgid "_Open..."
-msgstr "_?ffnen..."
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:79
+msgid "Quantizer _blur:"
+msgstr "Quantizer _Weichzeichner:"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:310
-msgid "_Append..."
-msgstr "_Anh?ngen..."
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:87
+msgid "Advanced Simple Profile"
+msgstr "ASP Profil"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:321
-msgid "_Save"
-msgstr "_Speichern"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:94
+msgid "Motion Estimation"
+msgstr "Absch?tzung der Bewegung"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:332
-msgid "Save _Video..."
-msgstr " _Video speichern"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:98
+msgid "Quantization"
+msgstr "Quantization"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:344
-msgid "Save _BMP Image..."
-msgstr "_BMP Bild speichern"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:103
+msgid "Rate Control"
+msgstr "Bitraten-Kontrolle"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:348
-msgid "Save _JPEG Image..."
-msgstr "_JPEG Bild speichern"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:106
+msgid "libavcodec MPEG-4 configuration"
+msgstr "libavcodec MPEG-4 Konfiguration"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:352
-msgid "Save _Selection as JPEG Images..."
-msgstr "A_uswahl als JPEG Bilder speichern..."
+#: avidemux/ADM_outputs/oplug_dummy/oplug_dummy.cpp:128
+#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:145
+#: avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp:174
+msgid "Cannot initialize the video stream"
+msgstr "Video-Bitstrom konnte nicht initialisiert werden"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:365
-msgid "Save _Project"
-msgstr "_Projekt speichern"
+#: avidemux/ADM_outputs/oplug_dummy/oplug_dummy.cpp:133
+msgid "Dummy"
+msgstr "Dummy"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:373
-msgid "Save P_roject As..."
-msgstr "P_rojekt speichern als..."
+#: avidemux/ADM_outputs/oplug_dummy/oplug_dummy.cpp:142
+#: avidemux/ADM_outputs/oplug_avi/op_saveprocess.cpp:101
+#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:180
+#: avidemux/ADM_outputs/oplug_ogm/op_ogsaveprocess.cpp:87
+#: avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp:188
+msgid "Filter init failed"
+msgstr "Filterinitialisierung misslungen"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:381
-msgid "_Load/Run Project..."
-msgstr "Projekt _laden/starten..."
+#: avidemux/ADM_outputs/oplug_dummy/oplug_dummy.cpp:146
+#: avidemux/ADM_outputs/oplug_avi/op_saveprocess.cpp:262
+#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:191
+#: avidemux/ADM_outputs/oplug_ogm/op_ogsaveprocess.cpp:165
+#: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:359
+#: avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp:192
+msgid "Encoding"
+msgstr "Kodieren"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:389
-msgid "A_dd to Joblist..."
-msgstr "Zur Jobliste hinzuf?gen..."
+#: avidemux/ADM_outputs/oplug_dummy/oplug_dummy.cpp:199
+#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:302
+#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:454
+#: avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp:313
+#: avidemux/ADM_outputs/oplug_mpeg/op_mpegpass.cpp:304
+msgid "Error while encoding"
+msgstr "Fehler beim Kodieren"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:393
-msgid "Show _Joblist"
-msgstr "_Jobliste anzeigen"
+#: avidemux/ADM_outputs/oplug_dummy/oplug_dummy.cpp:206
+#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:309
+#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:461
+#: avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp:320
+msgid "KeyFrame error"
+msgstr "I-Bild-Fehler (keyframe)"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:405
-msgid "Co_nnect to avsproxy"
-msgstr "Verbi_nde mit avsproxy"
+#: avidemux/ADM_outputs/oplug_dummy/oplug_dummy.cpp:206
+#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:309
+#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:461
+#: avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp:320
+msgid ""
+"The beginning frame is not a key frame.\n"
+"Please move the A marker."
+msgstr ""
+"Das beginnende Bild ist kein I-Bild (keyframe).\n"
+"Bitte die Marke A verschieben."
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:414
-msgid "Proper_ties"
-msgstr "Eigenschaf_ten"
+#: avidemux/ADM_outputs/oplug_avi/op_savesmart.cpp:97
+#: avidemux/gui_savenew.cpp:342
+msgid "Smart Copy"
+msgstr "Sanftes Kopieren"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:425
-msgid "AVI _Muxer Options"
-msgstr "AVI _Multiplexer Optionen"
+#: avidemux/ADM_outputs/oplug_avi/op_avisavecopy_pack.cpp:118
+#: avidemux/ADM_outputs/oplug_avi/op_avisavecopy.cpp:90
+#: avidemux/ADM_outputs/oplug_avi/op_avisavecopy_unpack.cpp:92
+#: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:447
+msgid "Cannot initiate save"
+msgstr "Kann das Speichern nicht beginnen"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:434
-msgid "_Quit"
-msgstr "_Beenden"
+#: avidemux/ADM_outputs/oplug_avi/op_avisavecopy_pack.cpp:131
+#: avidemux/ADM_outputs/oplug_avi/op_avisavecopy.cpp:103
+#: avidemux/ADM_outputs/oplug_avi/op_avisavecopy_unpack.cpp:105
+#: avidemux/ADM_outputs/oplug_mpeg/op_mpegpass.cpp:175
+msgid "Saving"
+msgstr "Speichern"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:445
-msgid "_Edit"
-msgstr "_Bearbeiten"
+#: avidemux/ADM_outputs/oplug_avi/op_saveprocess.cpp:67
+msgid ""
+"Width is not a multiple of 8\n"
+" continue anyway ?"
+msgstr ""
+"Breite ist nicht ein Vielfaches von 8\n"
+" irgendwie fortfahren ?"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:452
-msgid "_Reset Edits"
-msgstr "?nderungen _zur?cknehmen"
+#: avidemux/ADM_outputs/oplug_avi/op_saveprocess.cpp:92
+#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:173
+#: avidemux/ADM_outputs/oplug_ogm/op_ogsaveprocess.cpp:78
+#: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:238
+msgid "Reuse the existing log file?"
+msgstr "Vorhandene Log-Datei wieder verwenden ?"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:465
-msgid "Cu_t"
-msgstr "_Ausschneiden"
+#: avidemux/ADM_outputs/oplug_avi/op_saveprocess.cpp:132
+#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:420
+msgid "1st Pass"
+msgstr "1. Durchlauf"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:476
-msgid "_Copy"
-msgstr "_Kopieren"
+#: avidemux/ADM_outputs/oplug_avi/op_saveprocess.cpp:147
+msgid "Aborting"
+msgstr "Abbruch"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:487
-msgid "_Paste"
-msgstr "_Einf?gen"
+#: avidemux/ADM_outputs/oplug_avi/op_saveprocess.cpp:264
+#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:493
+msgid "2nd Pass"
+msgstr "2. Durchlauf"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:498
-msgid "_Delete"
-msgstr "_L?schen"
+#: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:65
+msgid "Mux every N video frames"
+msgstr "Multiplexe jedes n-te Video-Bild"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:514
-msgid "Set Marker _A"
-msgstr "Setze Marke _A"
+#: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:66
+msgid "Mux by packet size"
+msgstr "Mux. gem?? Paketgr??e"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:521
-msgid "Set Marker _B"
-msgstr "Setze Marke _B"
+#: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:69
+msgid "Muxing _type:"
+msgstr "Multiplex-_Typ:"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:533
-msgid "Pre_ferences"
-msgstr "Ein_stellungen"
+#: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:70
+msgid "_Split every MB:"
+msgstr "_Aufteilen alle MB:"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:541
-msgid "_View"
-msgstr "An_sicht"
+#: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:72
+msgid "Mux _every x video frames:"
+msgstr "Multiplexe jedes x-te Video-Bild:"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:548
-msgid "_Main Toolbar"
-msgstr "_Haupt-Werkzeugleiste"
+#: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:73
+msgid "Mux in _blocks of x bytes:"
+msgstr "Mux. in Bl?cken von x  Bytes:"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:553
-msgid "_A/V Sidebar"
-msgstr "_A/V Seitenleiste"
+#: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:80
+msgid "AVI Muxer Options"
+msgstr "AVI Multiplexer Optionen"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:563
-msgid "_Zoom 1:4"
-msgstr "_Zoom 1:4"
+#: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:179
+msgid "Error initalizing audio filters"
+msgstr "Fehler beim Initialisieren der Audiofilter"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:570
-msgid "Z_oom 1:2"
-msgstr "Z_oom 1:2"
+#: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:188
+msgid "Error initalizing video filters"
+msgstr "Fehler beim Initialisieren der Videofilter"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:577
-msgid "Zoom _1:1"
-msgstr "Zoom _1:1"
+#: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:486
+msgid "DTS"
+msgstr "DTS"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:584
-msgid "Zoom _2:1"
-msgstr "Zoom _2:1"
+#: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:488
+msgid "MP2"
+msgstr "MP2"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:591
-msgid "Vi_deo"
-msgstr "Vi_deo"
+#: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:489
+msgid "MP3"
+msgstr "MP3"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:598
-msgid "_Decoder Options"
-msgstr "_Dekodierer Optionen"
+#: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:490
+msgid "WMA"
+msgstr "WMA"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:605
-msgid "_Postprocessing"
-msgstr "Nachbearbeitung"
+#: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:491
+msgid "LPCM"
+msgstr "LPCM"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:608
-msgid "Select postprocessing level"
-msgstr "Nachbearbeitungsstufe ausw?hlen"
+#: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:492
+msgid "AC3"
+msgstr "AC3"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:618
-msgid "P_review"
-msgstr "Vo_rschau"
+#: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:493
+msgid "Ogg Vorbis"
+msgstr "Ogg Vorbis"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:625
-msgid "Display _Output"
-msgstr "A_usgabe anzeigen"
+#: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:495
+msgid "AAC"
+msgstr "AAC"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:637
-msgid "_Frame Rate"
-msgstr "Bildrate"
+#: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:496
+msgid "QDM2"
+msgstr "QDM2"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:641
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:690
-msgid "_Encoder"
-msgstr "Kodier_er"
+#: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:497
+msgid "AMR-NB"
+msgstr "AMR-NB"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:648
-msgid "Fil_ters"
-msgstr "Fil_ter"
+#: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:498
+msgid "MSADPCM"
+msgstr "MSADPCM"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:655
-msgid "_Audio"
-msgstr "_Audio"
+#: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:499
+msgid "ULAW"
+msgstr "ULAW"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:662
-msgid "_Main Track"
-msgstr "_Haupt-Audiospur"
+#: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:500
+msgid "IMA ADPCM"
+msgstr "IMA ADPCM"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:666
-msgid "_Second Track"
-msgstr "_Zweite Audiospur"
+#: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:501
+msgid "8-bit PCM"
+msgstr "8-bit PCM"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:670
-msgid "_Build VBR Time Map"
-msgstr "Erstelle VBR Zeitkarte"
+#: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:503
+msgid "Unknown codec"
+msgstr "Unbekannter Codec"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:679
-msgid "S_ave..."
-msgstr "Speichern..."
+#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:119
+msgid "PSP"
+msgstr "PSP"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:697
-msgid "_Filters"
-msgstr "_Filter"
+#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:216
+#: avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp:217
+msgid "Cannot initialize the audio stream"
+msgstr "Konnte Audio-Stream nicht initialisieren"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:701
-msgid "_Tools"
-msgstr "_Werkzeuge"
+#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:234
+msgid "Invalid audio stream detected"
+msgstr "Ung?ltigen Audio-Strom festgestellt"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:708
-msgid "_Calculator"
-msgstr "_Taschenrechner"
+#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:234
+msgid ""
+"The audio stream may be invalid for this container.\n"
+"\n"
+"Continue anyway?"
+msgstr ""
+"Der Audio-Strom k?nnte f?r diesen Container nicht zul?ssig sein.\n"
+"\n"
+"Irgendwie weitermachen?"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:724
-msgid "_Rebuild Frames (I & B)"
-msgstr "Bilder neu aufbauen (I & B)"
+#: avidemux/ADM_outputs/oplug_ogm/op_ogsaveprocess.cpp:112
+msgid "Pass one"
+msgstr "Durchlauf 1"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:728
-msgid "C_heck Frames (slow)"
-msgstr "Bilder ?berpr?fen (langsam)"
+#: avidemux/ADM_outputs/oplug_ogm/op_ogsaveprocess.cpp:161
+msgid "Pass 2"
+msgstr "Durchlauf 2"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:732
-msgid "_Bitrate Histogram"
-msgstr "_Bitrate Histogramm"
+#: avidemux/ADM_outputs/oplug_ogm/op_ogsave.cpp:101
+#: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:352
+#: avidemux/gtk_gui.cpp:1499
+#: avidemux/gtk_gui.cpp:2607
+#, c-format
+msgid "Cannot open \"%s\" for writing."
+msgstr "Kann \"%s\" nicht zum Schreiben ?ffnen."
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:736
-msgid "_Scan for Black Frames..."
-msgstr "_Schwarze Bilder suchen..."
+#: avidemux/ADM_outputs/oplug_ogm/op_ogsave.cpp:115
+msgid "Could not initialize video"
+msgstr "Kann Video nicht initialisieren"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:745
-msgid "_VOB -> VobSub"
-msgstr "_VOB -> VobSub"
+#: avidemux/ADM_outputs/oplug_ogm/op_ogsave.cpp:123
+msgid "Could not initialize audio"
+msgstr "Kann Audio nicht initialisieren"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:749
-msgid "_OCR (VobSub -> srt)"
-msgstr "_OCR (VobSub -> srt)"
+#: avidemux/ADM_outputs/oplug_ogm/op_ogsavecopy.cpp:56
+msgid "Saving..."
+msgstr "Speichern..."
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:753
-msgid "OCR (TS->srt)"
-msgstr "OCR (TS->srt)"
+#: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:128
+#: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:139
+#: avidemux/ADM_outputs/oplug_mpeg/op_mpegpass.cpp:84
+msgid "There is no audio track"
+msgstr "Dies ist keine Audio-Spur"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:757
-msgid "_Edit Glyph"
-msgstr "Schriftzeichen b_earbeiten"
+#: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:149
+#: avidemux/ADM_outputs/oplug_mpeg/op_mpegpass.cpp:103
+msgid "Audio track is not suitable"
+msgstr "Audio-Spur ist nicht brauchbar"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:766
-msgid "_Frame Hex Dump"
-msgstr "Bild Hexadez. Abbild"
+#: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:159
+msgid "For VCD, audio must be 44.1 kHz MP2."
+msgstr "F?r VCD muss Audio 44.1 kHz MP2 sein"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:770
-msgid "A_uto"
-msgstr "A_uto"
+#: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:179
+msgid "For DVD, audio must be 48 kHz MP2, AC3 or LPCM."
+msgstr "F?r DVD muss Audio 48 kHz MP2, AC3 oder LPCM sein."
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:777
-msgid "_VCD"
-msgstr "_VCD"
+#: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:255
+msgid "libmpeg2enc VCD"
+msgstr "libmpeg2enc VCD"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:781
-msgid "_SVCD"
-msgstr "_SVCD"
+#: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:258
+msgid "libmpeg2enc SVCD"
+msgstr "libmpeg2enc SVCD"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:785
-msgid "_DVD"
-msgstr "_DVD"
+#: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:261
+msgid "libmpeg2enc DVD"
+msgstr "libmpeg2enc DVD"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:789
-msgid "_PSP"
-msgstr "_PSP"
+#: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:264
+msgid "FFmpeg MPEG-1 VBR"
+msgstr "FFmpeg MPEG-1 VBR"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:793
-msgid "PSP (_H.264)"
-msgstr "PSP (_H.264)"
+#: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:267
+msgid "FFmpeg MPEG-2 SVCD VBR"
+msgstr "FFmpeg MPEG-2 SVCD VBR"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:797
-msgid "F_LV"
-msgstr "F_LV"
+#: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:270
+msgid "FFmpeg MPEG-2 DVD VBR"
+msgstr "FFmpeg MPEG-2 DVD VBR"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:801
-msgid "IPOD (mpeg4)"
-msgstr "IPOD (mpeg4)"
+#: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:273
+msgid "MPEG Requantizer"
+msgstr "MPEG Requantizer"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:805
-msgid "_Go"
-msgstr "Sprin_gen"
+#: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:281
+msgid "MPEG ES"
+msgstr "MPEG ES"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:812
-msgid "_Play/Stop"
-msgstr "Abspielen/Anhalten"
+#: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:282
+#: avidemux/ADM_outputs/oplug_mpeg/op_mpegpass.cpp:182
+msgid "MPEG TS"
+msgstr "MPEG TS"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:823
-msgid "P_revious Frame"
-msgstr "Vo_rheriges Bild"
+#: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:283
+#: avidemux/ADM_outputs/oplug_mpeg/op_mpegpass.cpp:183
+msgid "MPEG VCD"
+msgstr "MPEG VCD"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:834
-msgid "_Next Frame"
-msgstr "_N?chstes Bild"
+#: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:284
+#: avidemux/ADM_outputs/oplug_mpeg/op_mpegpass.cpp:184
+msgid "MPEG SVCD"
+msgstr "MPEG SVCD"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:845
-msgid "Pr_evious Intra Frame"
-msgstr "Vorheriges I-Bild (keyframe)"
+#: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:285
+#: avidemux/ADM_outputs/oplug_mpeg/op_mpegpass.cpp:185
+msgid "MPEG DVD"
+msgstr "MPEG DVD"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:856
-msgid "Next _Intra Frame"
-msgstr "N?chstes I-Bild (keyframe)"
+#: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:297
+msgid "Pass 1/2"
+msgstr "Durchlauf 1/2"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:867
-msgid "Previou_s Black Frame"
-msgstr "Vorherige_s schwarzes Bild"
+#: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:306
+msgid "Error in pass 1"
+msgstr "Fehler beim 1. Durchlauf"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:871
-msgid "Ne_xt Black Frame"
-msgstr "N?_chstes schwarzes Bild"
+#: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:357
+msgid "Pass 2/2"
+msgstr "Durchlauf 2/2"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:875
-msgid "_First Frame"
-msgstr "_Erstes Bild"
+#: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:449
+msgid "Error in pass 2"
+msgstr "Fehler beim 2. Durchlauf"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:886
-msgid "_Last Frame"
-msgstr "_Letztes Bild"
+#: avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp:136
+msgid "Unsupported video"
+msgstr "Nicht unterst?tztes Video"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:902
-msgid "Go to Marker _A"
-msgstr "Gehe zu Marke _A"
+#: avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp:136
+msgid "Only FLV1 and VP6 video are supported"
+msgstr "Nur FLV1 und VP6 Videos werden unterst?tzt"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:909
-msgid "Go to Marker _B"
-msgstr "Gehe zu Marke _B"
+#: avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp:158
+#: avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp:163
+msgid "Unsupported audio"
+msgstr "Nicht unterst?tztes Audio"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:921
-msgid "Go to Fra_me..."
-msgstr "Springe zu _Bild..."
+#: avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp:158
+msgid "Audio must be mp3 for flv output."
+msgstr "F?r flv-Ausgabe muss Audio mp3 sein."
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:932
-msgid "Go to _Time..."
-msgstr "Springe zur _Zeit..."
+#: avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp:163
+msgid "Frequency must be 44100, 22050 or 11025 Hz."
+msgstr "Frequenz muss 44100, 22050 oder 11025 Hz sein."
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:943
-msgid "_Custom"
-msgstr "_Individuell"
+#: avidemux/ADM_outputs/oplug_mpeg/op_mpegpass.cpp:79
+msgid "This is not MPEG compatible"
+msgstr "Dies ist nicht MPEG kompatibel"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:947
-msgid "_Help"
-msgstr "_Hilfe"
+#: avidemux/ADM_outputs/oplug_mpeg/op_mpegpass.cpp:79
+msgid "You can't use the Copy codec."
+msgstr "Kopie-Codec nicht m?glich."
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:954
-msgid "_Built-in Support"
-msgstr "Eingebaute Unterst?tzung"
+#: avidemux/ADM_outputs/oplug_mpeg/op_mpegpass.cpp:91
+msgid "The first frame is not intra frame"
+msgstr "Das erste Bild ist kein Intra-Bild"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:958
-msgid "_About"
-msgstr "Infos _?ber Avidemux"
+#: avidemux/ADM_outputs/oplug_mpeg/op_mpegpass.cpp:91
+msgid "Use the &lt;&lt; and the &gt;&gt; buttons to move using Intra frames."
+msgstr "Bitte &lt;&lt; und &gt;&gt; Tasten benutzen, um Intra-Bilder zu verschieben."
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:976
-msgid "Open a file"
-msgstr "?ffne eine Datei"
+#: avidemux/ADM_outputs/oplug_mpeg/op_mpegpass.cpp:135
+msgid "For DVD, audio must be 48 kHz MP2(stereo), AC3, DTS or LPCM (stereo)."
+msgstr "F?r DVD muss Audio 48 kHz MP2 (stereo), AC3, DTS or LPCM (stereo) sein."
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:986
-msgid "Save the file"
-msgstr "Datei speichern"
+#: avidemux/ADM_outputs/oplug_mpeg/op_mpegpass.cpp:174
+msgid "---"
+msgstr "---"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:992
-msgid "Audio/video file information"
-msgstr "Audio/Video Datei-Information"
+#: avidemux/ADM_outputs/ADM_lavformat.cpp:377
+msgid "Incompatible frame rate"
+msgstr "Inkompatible Bildrate"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1003
-msgid "Bitrate/size calculator"
-msgstr "Bitrate/Gr??e berechnen"
+#: avidemux/ADM_filter/filter_saveload.cpp:149
+msgid "Problem reading XML filters"
+msgstr "Problem beim Lesen von XML Filter"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1087
-msgid "Configure video encoder"
-msgstr "Video Kodierer konfigurieren"
+#: avidemux/ADM_filter/filter_saveload.cpp:157
+msgid "No filter found"
+msgstr "Keinen Filter gefunden"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1092
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1148
-msgid "Filters"
-msgstr "Filter"
+#: avidemux/ADM_filter/filter_saveload.cpp:193
+msgid "Could not find a filter"
+msgstr "Konnte keinen Filter finden"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1095
-msgid "Video filters"
-msgstr "Video Filter"
+#: avidemux/ADM_filter/filter_saveload.cpp:201
+msgid "No tag found"
+msgstr "Kein Marke gefunden"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1127
-msgid "Configure audio encoder"
-msgstr "Audio Kodierer konfigurieren"
+#: avidemux/ADM_filter/filter_saveload.cpp:281
+msgid "Node not found"
+msgstr "Knoten nicht gefunden"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1135
-msgid "Audio filters"
-msgstr "Audio Filter"
+#: avidemux/ADM_filter/filter_declaration.cpp:46
+msgid "VobSub"
+msgstr "VobSub"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1156
-msgid "Shift:"
-msgstr "Verschiebung"
+#: avidemux/ADM_filter/filter_declaration.cpp:46
+msgid "Embed VobSub subtitles into picture."
+msgstr "VobSub Untertitel ins Bild einbetten."
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1159
-msgid "Enable time shift"
-msgstr "Zeitverschiebung einschalten"
+#: avidemux/ADM_filter/filter_declaration.cpp:47
+msgid "DVB sub"
+msgstr "DVB Sub"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1165
-msgid "Audio/video time shift (ms)"
-msgstr "A/V Zeitverschiebung (ms)"
+#: avidemux/ADM_filter/filter_declaration.cpp:47
+msgid "Embed DVB-T subtitle."
+msgstr "DVB-T Untertitel einbetten."
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1168
-msgid "ms"
-msgstr ""
+#: avidemux/ADM_filter/filter_declaration.cpp:50
+msgid "Compute Average"
+msgstr "Durchschnitt berechnen"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1176
-msgid "<b>Format</b>"
-msgstr "<b>Format</b>"
+#: avidemux/ADM_filter/filter_declaration.cpp:50
+msgid "Compute average luma value for each pixel throughout all frames, and save to file"
+msgstr "Durchschnittlichen Brillianz-Wert f?r jedes Pixel berechnen, durch alle Bilder, und als Datei speichern"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1209
-msgid "Frame: "
-msgstr "Bild:"
+#: avidemux/ADM_filter/filter_declaration.cpp:51
+msgid "Force too-bright/too-dim pixels to 0 and the rest to 255 or vice-versa"
+msgstr "Werte von hellen/dunklen Pixeln zu 0 und den Rest zu 255 erzwingen, oder umgekehrt"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1216
-msgid "Current frame"
-msgstr "Aktuelles Bild"
+# Teile = Gruppe von Pixeln
+#: avidemux/ADM_filter/filter_declaration.cpp:52
+msgid "Particle List"
+msgstr "Teileliste"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1221
-msgid "/ 0000000"
-msgstr "/ 0000000"
+#: avidemux/ADM_filter/filter_declaration.cpp:52
+msgid "Identify 'particles' (groups of pixels)"
+msgstr "Teile (Gruppe von Pixeln) identifizieren"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1228
-msgid "Time: "
-msgstr " Zeit:"
+#: avidemux/ADM_filter/filter_declaration.cpp:53
+msgid "Eraser"
+msgstr "Radierer"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1235
-msgid "Current time"
-msgstr "Aktuelle Zeit"
+#: avidemux/ADM_filter/filter_declaration.cpp:53
+msgid "\"Erase\" arbitrary areas of each frame"
+msgstr "Entfernen beliebiger Bereiche in jedem Bild"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1236
-msgid "00:00:00.000"
-msgstr "00:00:00.000"
+#: avidemux/ADM_filter/filter_declaration.cpp:54
+msgid "Swiss Army Knife"
+msgstr "Swiss Army Knife"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1239
-msgid "/ 00:00:00,000"
-msgstr "/ 00:00:00,000"
+#: avidemux/ADM_filter/filter_declaration.cpp:54
+msgid "Apply operation like P'=P*A, P-A, P+A, etc. using a convolution, rolling average, image from file, or constant"
+msgstr "Operation wie in P'=P*A, P-A, P+A, usw. anwenden mittels Faltung, gleitender Durchschnitt, Bild aus Datei, oder Konstante"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1246
-msgid "Frame: ?"
-msgstr "Bild: ? "
+#: avidemux/ADM_filter/filter_declaration.cpp:58
+msgid "Add Framenumber"
+msgstr "Bildnummer addieren"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1270
-msgid "Play"
-msgstr "Abspielen"
+#: avidemux/ADM_filter/filter_declaration.cpp:58
+msgid "Print frame number directly in image"
+msgstr "Bildnummer direkt ins Bild drucken"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1284
-msgid "Stop"
-msgstr "Stopp"
+#: avidemux/ADM_editor/ADM_edit.cpp:72
+msgid ""
+"Avidemux detected VBR MP3 audio in this file. For keeping audio/video in sync, time map is needed. Build it now?\n"
+"\n"
+"You can do it later with \"Audio -> Build VBR Time Map\"."
+msgstr ""
+"Avidemux stellte VBR MP3 Audio in dieser Datei fest. Um Audio/Vidoe Synchronisierung zu erhalten ist\n"
+"VBR Zeitkarte erforderlich.\n"
+".Dies kann auch sp?ter ?ber \"Audio -> Erstelle VBR Zeitkarte\" erfolgen."
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1296
-msgid "Previous frame"
-msgstr "Vorheriges Bild"
+#: avidemux/ADM_editor/ADM_edit.cpp:397
+msgid "File type identified but no loader support detected..."
+msgstr "Dateityp wurde ermittelt, aber keine Ladeunterst?tzung festgestellt."
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1311
-msgid "Next frame"
-msgstr "N?chstes Bild"
+#: avidemux/ADM_editor/ADM_edit.cpp:398
+msgid "May be related to an old index file."
+msgstr "Es bezieht sich vielleicht auf eine alte Index-Datei."
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1326
-msgid "Previous keyframe"
-msgstr "Vorheriges I-Bild (keyframe)"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1341
-msgid "Next keyframe"
-msgstr "N?chstes I-Bild (keyframe)"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1355
-msgid "Selection: start"
-msgstr "Auswahl: Start"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1366
-msgid "Selection: end"
-msgstr "Auswahl: Ende"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1377
-msgid "Previous black frame"
-msgstr "Vorheriges schwarzes Bild"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1388
-msgid "Next black frame"
-msgstr "N?chstes schwarzes Bild"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1399
-msgid "First frame"
-msgstr "Erstes Bild"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1410
-msgid "Last frame"
-msgstr "Letztes Bild"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1424
-msgid "<b>Selection</b>"
-msgstr "<b>Auswahl</b>"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1441
-msgid "B:"
-msgstr "B:"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1448
-msgid "Go to marker B"
-msgstr "Gehe zu Marke B"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1450
-msgid "A:"
-msgstr "A:"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1457
-msgid "Go to marker A"
-msgstr "Gehe zu Marke A"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1459
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1467
-msgid " 0000000"
-msgstr " 0000000"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_ocr/adm_editglyph.cpp:53
-msgid "Select GlyphFile to edit"
-msgstr "Als Zeichensatzdatei speichern"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_ocr/adm_editglyph.cpp:121
-msgid "String"
-msgstr "Zeichenkette"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_ocr/adm_editglyph.cpp:123
-msgid "Search string"
-msgstr "Zeichenkette suchen"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_ocr/adm_editglyph.cpp:149
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_ocr/adm_editglyph.cpp:192
-msgid "End reached"
-msgstr "Ende erreicht"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_ocr/adm_editglyph.cpp:149
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_ocr/adm_editglyph.cpp:192
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_ocr/adm_editglyph.cpp:216
-msgid "No more glyphs"
-msgstr "Keine weiteren Schriftzeichen"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_ocr/adm_editglyph.cpp:216
-msgid "Head reached"
-msgstr "Kopf erreicht"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_ocr/adm_editglyph.cpp:344
-msgid "dialog1"
-msgstr "Dialog1"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_ocr/adm_editglyph.cpp:396
-msgid "Prev. Empty"
-msgstr "Vorheriges Leeres"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_ocr/adm_editglyph.cpp:418
-msgid "Next Empty"
-msgstr "N?chstes Leeres"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_ocr/adm_ocr.cpp:181
-msgid "Sure ?"
-msgstr "Sicher ?"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/ADM_gladeSupport.cpp:252
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/ADM_gladeSupport.cpp:276
+#: avidemux/ADM_editor/ADM_edit.cpp:405
 #, c-format
-msgid "Couldn't find pixmap file: %s"
-msgstr "Konnte Pixmap Datei %s nicht finden."
+msgid "Attempt to open %s failed!"
+msgstr "Versuch %s zu ?ffnen ist misslungen!"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/ADM_tray_gtk.cpp:55
-msgid "Open Avidemux"
-msgstr ""
+#: avidemux/ADM_editor/ADM_edit.cpp:421
+msgid "Video dimensions don't match."
+msgstr "Video-Dimensionen passen nicht zusammen."
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/TLK_filesel.cpp:106
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/TLK_filesel.cpp:213
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/TLK_filesel.cpp:400
-msgid "Cannot open directory as a file"
-msgstr "Kann das Verzeichnis nicht als Datei ?ffnen"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/TLK_filesel.cpp:455
-msgid "Images"
-msgstr "Bilder"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/TLK_filesel.cpp:467
-msgid "All"
-msgstr "Alles"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/toolkit_dialog.cpp:574
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/toolkit_dialog.cpp:652
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/toolkit_dialog.cpp:720
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/toolkit_dialog.cpp:780
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/toolkit_dialog.cpp:843
-msgid "label1"
-msgstr "label1"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/toolkit_dialog.cpp:707
-msgid "Alert"
-msgstr "Meldung"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ui_support.cpp:37
-msgid "GTK+"
+#: avidemux/ADM_editor/ADM_edit.cpp:421
+msgid ""
+"You cannot mix different video dimensions yet. Using the partial video filter later will not work around this problem. The workaround is:\n"
+"\n"
+"1) \"Resize\" / \"Add Border\" / \"Crop\" each stream to the same resolution\n"
+"2) Concatenate them together"
 msgstr ""
+"Es k?nnen nicht verschiedene Video-Dimensionen vermischt werden. Die sp?tere Verwendung des partiellen Videofilters l?st nicht das Problem. Abhilfe:\n"
+"1.) Gr??e ?ndern / Rand hinzuf?gen / Zuschneiden mit jedem Videostream bei gleicher Aufl?sung\n"
+"2.) Zusammenh?ngen aller erstellten Videostreams"
 
-#: avidemux/ADM_video/ADM_vidFieldUnblend.cpp:81
-msgid "Metrics"
-msgstr "Ma?e"
+#: avidemux/ADM_editor/ADM_edit.cpp:533
+msgid "Build Time Map"
+msgstr "Erstelle VBR Zeitkarte"
 
-#: avidemux/ADM_video/ADM_vidFieldUnblend.cpp:81
-msgid "Do you want to print metrics on screen ?"
-msgstr "Sollen Ma?e angezeigt werden ?"
+#: avidemux/ADM_editor/ADM_edit.cpp:533
+msgid "Build VBR time map?"
+msgstr "VBR Zeitkarte erstellen?"
 
-#: avidemux/ADM_videoFilter/ADM_guiResize.cpp:96
-#: avidemux/ADM_videoFilter/ADM_vidMPLResize.cpp:143
-msgid "Width and height cannot be 0"
-msgstr "Breite und H?he k?nnen nicht 0 sein"
+#: avidemux/ADM_editor/ADM_edit.cpp:567
+msgid "Use safe mode"
+msgstr "Sicheren Modus benutzen"
 
-#: avidemux/ADM_videoFilter/ADM_guiResize.cpp:98
-#: avidemux/ADM_videoFilter/ADM_vidMPLResize.cpp:145
-msgid "Width and height cannot be odd"
-msgstr "Breite und H?he k?nnen nicht ungerade sein"
+#: avidemux/ADM_editor/ADM_edit.cpp:567
+msgid "H.264 detected"
+msgstr "H.264 gefunden"
 
-#: avidemux/ADM_videoFilter/ADM_lavpp_deint.cpp:106
-msgid "Linear blend"
-msgstr "Lineare Mischung"
-
-#: avidemux/ADM_videoFilter/ADM_lavpp_deint.cpp:107
-msgid "Linear interpolate"
-msgstr "Linear interpolieren"
-
-#: avidemux/ADM_videoFilter/ADM_lavpp_deint.cpp:108
-msgid "Cubic interpolate"
-msgstr "Kubisch interpolieren"
-
-#: avidemux/ADM_videoFilter/ADM_lavpp_deint.cpp:109
-msgid "Median interpolate"
-msgstr "Mittelwertig interpolieren"
-
-#: avidemux/ADM_videoFilter/ADM_lavpp_deint.cpp:110
-msgid "FFmpeg deint"
-msgstr "FFmpeg deint (Halbbilder)"
-
-#: avidemux/ADM_videoFilter/ADM_lavpp_deint.cpp:114
-msgid "_Deinterlacing:"
-msgstr "_Deinterlacing:"
-
-#: avidemux/ADM_videoFilter/ADM_lavpp_deint.cpp:115
-msgid "_Autolevel"
-msgstr "_Automatische Ebene"
-
-#: avidemux/ADM_videoFilter/ADM_vidAddBorder.cpp:222
-#: avidemux/ADM_videoFilter/ADM_vidBSmear.cpp:200
-msgid "_Left border:"
-msgstr "_Linker Rand:"
-
-#: avidemux/ADM_videoFilter/ADM_vidAddBorder.cpp:223
-#: avidemux/ADM_videoFilter/ADM_vidBSmear.cpp:201
-msgid "_Right border:"
-msgstr "_Rechter Rand:"
-
-#: avidemux/ADM_videoFilter/ADM_vidAddBorder.cpp:224
-#: avidemux/ADM_videoFilter/ADM_vidBSmear.cpp:202
-msgid "_Top border:"
-msgstr "_Oberer Rand:"
-
-#: avidemux/ADM_videoFilter/ADM_vidAddBorder.cpp:225
-#: avidemux/ADM_videoFilter/ADM_vidBSmear.cpp:203
-msgid "_Bottom border:"
-msgstr "_Unterer Rand:"
-
-#: avidemux/ADM_videoFilter/ADM_vidAddBorder.cpp:228
-msgid "Add Borders"
-msgstr "R?nder addieren"
-
-#: avidemux/ADM_videoFilter/ADM_vidAddBorder.cpp:232
-#: avidemux/ADM_videoFilter/ADM_vidBSmear.cpp:211
-msgid "Incorrect parameters"
-msgstr "Fehlerhafte Parameter"
-
-#: avidemux/ADM_videoFilter/ADM_vidAddBorder.cpp:232
-#: avidemux/ADM_videoFilter/ADM_vidBSmear.cpp:211
-msgid "All parameters must be even and within range."
-msgstr "Alle Parameter m?ssen gleich und innerhalb des Bereichs sein."
-
-#: avidemux/ADM_videoFilter/ADM_vidASS.cpp:87
-msgid "_Subtitle file (ASS/SSA):"
-msgstr "_Untertitel Datei (ASS/SSA):"
-
-#: avidemux/ADM_videoFilter/ADM_vidASS.cpp:88
-msgid "_Line spacing:"
-msgstr "Zei_lenabstand:"
-
-#: avidemux/ADM_videoFilter/ADM_vidASS.cpp:89
-msgid "_Font scale:"
-msgstr "Schri_ftskalierung:"
-
-#: avidemux/ADM_videoFilter/ADM_vidASS.cpp:90
-msgid "_Top margin:"
-msgstr "_Oberer Rand:"
-
-#: avidemux/ADM_videoFilter/ADM_vidASS.cpp:91
-msgid "Botto_m margin"
-msgstr "_Unterer Rand:"
-
-#: avidemux/ADM_videoFilter/ADM_vidBlendRemoval.cpp:82
-#: avidemux/ADM_videoFilter/ADM_vidDGbob.cpp:92
-#: avidemux/ADM_videoFilter/ADM_vidHardIvtcRemoval.cpp:87
-#: avidemux/ADM_videoFilter/ADM_vidKernelDeint.cpp:93
-#: avidemux/ADM_videoFilter/ADM_vidMSharpen.cpp:166
-#: avidemux/ADM_videoFilter/ADM_vidMsmooth.cpp:196
-msgid "_Threshold:"
-msgstr "_Schwelle:"
-
-#: avidemux/ADM_videoFilter/ADM_vidBlendRemoval.cpp:83
+#: avidemux/ADM_editor/ADM_edit.cpp:567
 msgid ""
-"If value is smaller than threshold it is considered valid.Smaller value "
-"might mean more false positive."
+"If the file is using B-frames as reference it can lead to a crash or stuttering.\n"
+"Avidemux can use another mode which is safe but YOU WILL LOSE FRAME ACCURACY.\n"
+"Do you want to use that mode?"
 msgstr ""
-"Wenn der Wert kleiner als die Schwelle ist, wird er als g?ltig angenommen. "
-"Kleinere Werte bedeuten mehr falsch-positiv"
+"Wenn die Datei B-Bilder als Referenz benutzt, dann das zum Absturz oder Stottern f?hren.\n"
+"Avidemux cann einen andern Modus benutzen, der sicher ist, aber damit wird die BILDGENAUIGKEIT REDUZIERT.\n"
+"Soll dieser Modus angewendet werden?"
 
-#: avidemux/ADM_videoFilter/ADM_vidBlendRemoval.cpp:85
-#: avidemux/ADM_videoFilter/ADM_vidHardIvtcRemoval.cpp:90
-msgid "_Noise:"
-msgstr "_Rauschen:"
+#: avidemux/ADM_editor/ADM_edit.cpp:697
+msgid "Packed Bitstream detected"
+msgstr "Gepackten Bitstrom gefunden"
 
-#: avidemux/ADM_videoFilter/ADM_vidBlendRemoval.cpp:85
-#: avidemux/ADM_videoFilter/ADM_vidHardIvtcRemoval.cpp:90
-msgid "If pixels are closer than noise, they are considered to be the same"
-msgstr ""
-"Wenn Pixel sich n?her sind als das Rauschen, dann nimm an, dass sie gleich "
-"sind"
+#: avidemux/ADM_editor/ADM_edit.cpp:698
+msgid "Do you want me to unpack it ?"
+msgstr "Soll es entpackt werden ?"
 
-#: avidemux/ADM_videoFilter/ADM_vidBlendRemoval.cpp:86
-msgid "I_dentical:"
-msgstr "I_dentisch:"
+#: avidemux/ADM_editor/ADM_edit.cpp:718
+msgid "Could not unpack the video"
+msgstr "Video konnte nicht entpackt werden"
 
-#: avidemux/ADM_videoFilter/ADM_vidBlendRemoval.cpp:86
-#: avidemux/ADM_videoFilter/ADM_vidHardIvtcRemoval.cpp:91
-msgid "If metric is less than identical, images are considered identical"
-msgstr ""
-"Wenn das Ma? kleiner oder identisch ist, wird davon ausgegangen, dass die "
-"Bilder identisch sind"
+#: avidemux/ADM_editor/ADM_edit.cpp:718
+msgid "Using backup decoder - not frame accurate."
+msgstr "Backup Dekodierer verwenden - nicht bildgenau."
 
-#: avidemux/ADM_videoFilter/ADM_vidBlendRemoval.cpp:87
-#: avidemux/ADM_videoFilter/ADM_vidHardIvtcRemoval.cpp:92
-msgid "_Show metrics"
-msgstr "_Zeige Ma?e an"
+#: avidemux/ADM_editor/ADM_edit.cpp:723
+msgid "Weird"
+msgstr "Seltsam"
 
-#: avidemux/ADM_videoFilter/ADM_vidBlendRemoval.cpp:87
-#: avidemux/ADM_videoFilter/ADM_vidHardIvtcRemoval.cpp:92
-msgid "Show metric in image (debug)"
-msgstr "Zeige Ma?e im Bild (Debug)"
+#: avidemux/ADM_editor/ADM_edit.cpp:723
+msgid "The unpacking succeedeed but the index is still not up to date."
+msgstr "Das Entpacken war erfolgreich, aber der Index ist nicht aktuell."
 
-#: avidemux/ADM_videoFilter/ADM_vidBlendRemoval.cpp:91
-msgid "Blend Removal"
-msgstr "Mischung zur?ck nehmen"
+#: avidemux/ADM_editor/ADM_edit.cpp:729
+msgid "Troubles ahead"
+msgstr "Probleme weiter oben"
 
-#: avidemux/ADM_videoFilter/ADM_vidBSmear.cpp:206
-msgid "Blacken Borders"
-msgstr "Geschw?rzte R?nder"
+#: avidemux/ADM_editor/ADM_edit.cpp:729
+msgid "This a VOP packed AVI."
+msgstr "Dies ist ein VOP-gepacktes AVI."
 
-#: avidemux/ADM_videoFilter/ADM_vidComputeAverage.cpp:181
-msgid "_Start Frame (first frame # to include in average):"
-msgstr "_Startbild (Erstes Bild # im Durchschnitt zu ber?cksichtigen):"
+#: avidemux/ADM_editor/ADM_edit.cpp:740
+msgid "Index is not up to date"
+msgstr "Index ist nicht aktuell"
 
-#: avidemux/ADM_videoFilter/ADM_vidComputeAverage.cpp:185
-msgid "_End Frame (last frame # to include), -1 = last:"
-msgstr ""
-"_Endbild (Letztes Bild # im Durchschnitt zu ber?cksichtigen), -1=letztes:"
+#: avidemux/ADM_editor/ADM_edit.cpp:740
+msgid "You should use Tool->Rebuild frame. Do it now ?"
+msgstr "Werkzeuge -> Bilder neu erstellen sollte verwendet werden. Starten ?"
 
-#: avidemux/ADM_videoFilter/ADM_vidComputeAverage.cpp:189
-#: avidemux/ADM_videoFilter/ADM_vidParticle.cpp:191
-msgid "_Output File:"
-msgstr "_Ausgabedatei:"
-
-#: avidemux/ADM_videoFilter/ADM_vidComputeAverage.cpp:189
-msgid "Select output file"
-msgstr "Ausgabe-Datei ausw?hlen"
-
-#: avidemux/ADM_videoFilter/ADM_vidComputeAverage.cpp:192
+#: avidemux/ADM_editor/ADM_edit.cpp:1502
 msgid ""
-"_Bias (only for display; use 0 for average, 128 for frame minus average):"
+"This looks like mpeg\n"
+" Do you want to index it?"
 msgstr ""
-"Tendenz (_Bias) (nur zur Anzeige; 0 f?r Durchschnitt, 128 f?r Bild minus "
-"Durchschnitt):"
+"Dies schaut wie Mpeg aus\n"
+"Soll ein Index erstellt werden ?"
 
-#: avidemux/ADM_videoFilter/ADM_vidComputeAverage.cpp:196
-msgid "Current frame minus average so far"
-msgstr "Aktuelles Bild abz?glich derzeitigem Durchschnitt"
+#: avidemux/ADM_editor/ADM_edit.cpp:1554
+msgid "Indexing failed"
+msgstr "Indizierung gescheitert"
 
-#: avidemux/ADM_videoFilter/ADM_vidComputeAverage.cpp:197
-msgid "Average so far"
-msgstr "bisheriger Durchschnitt"
+#: avidemux/ADM_editor/ADM_edFrameType.cpp:56
+msgid "No video loaded"
+msgstr "Kein Video geladen"
 
-#: avidemux/ADM_videoFilter/ADM_vidComputeAverage.cpp:199
-msgid "Display nothing (fast for batch processing)"
-msgstr "Nichts anzeigen (schnell f?r Stapelverarbeitung)"
+#: avidemux/ADM_editor/ADM_edFrameType.cpp:61
+msgid "Not indexable"
+msgstr "Nicht indizierbar"
 
-#: avidemux/ADM_videoFilter/ADM_vidComputeAverage.cpp:203
-msgid "Display _Mode:"
-msgstr "Ausgabe_modus:"
+#: avidemux/ADM_editor/ADM_edFrameType.cpp:61
+msgid "DivX 5 + packed?"
+msgstr "DivX 5 + packed?"
 
-#: avidemux/ADM_videoFilter/ADM_vidComputeAverage.cpp:208
-msgid "ComputeAverage"
-msgstr "Durchschnittsberechnung"
+#: avidemux/ADM_editor/ADM_edFrameType.cpp:91
+msgid "Rebuilding Frames"
+msgstr "Bilder neu aufbauen"
 
-#: avidemux/ADM_videoFilter/ADM_vidDecDec.cpp:190
-msgid "Discard closer"
-msgstr "Enger ablegen"
+#: avidemux/ADM_editor/ADM_edFrameType.cpp:127
+msgid "Aborted"
+msgstr "Abgebrochen"
 
-#: avidemux/ADM_videoFilter/ADM_vidDecDec.cpp:191
-msgid "Replace (interpolate)"
-msgstr "Ersetzen (interpolieren)"
+#: avidemux/ADM_editor/ADM_edLoadSave.cpp:70
+msgid "Unsupported"
+msgstr "Nicht unterst?tzt"
 
-#: avidemux/ADM_videoFilter/ADM_vidDecDec.cpp:192
-msgid "Discard longer dupe (anim?s)"
-msgstr "L?ngere Duplikate entfernen (anim?s)"
+#: avidemux/ADM_editor/ADM_edLoadSave.cpp:298
+msgid "Old format project file"
+msgstr "Projekt-Datei im alten Format"
 
-#: avidemux/ADM_videoFilter/ADM_vidDecDec.cpp:193
-msgid "Pulldown dupe removal"
-msgstr "\"Pulldown\" Duplikaten entfernen"
+#: avidemux/ADM_editor/ADM_edLoadSave.cpp:298
+msgid "No more supported."
+msgstr "Nicht mehr unterst?tzt."
 
-#: avidemux/ADM_videoFilter/ADM_vidDecDec.cpp:196
-msgid "Fastest (no chroma, partial luma)"
-msgstr "Am Schnellsten (partielle Brillianz, keine Farbintensit?t)"
+#: avidemux/ADM_codecs/ADM_ffmp43.cpp:44
+msgid "Internal error finding codec"
+msgstr "Interner Fehler beim Finden eines Codec"
 
-#: avidemux/ADM_videoFilter/ADM_vidDecDec.cpp:197
-msgid "Fast (partial luma and chroma)"
-msgstr "Schnell (partielle Brillianz und Farbintensit?t)"
+#: avidemux/ADM_codecs/ADM_ffmpeg.cpp:50
+msgid "Internal error opening codec"
+msgstr "Interner Fehler beim ?ffnen eines Codec"
 
-#: avidemux/ADM_videoFilter/ADM_vidDecDec.cpp:198
-msgid "Medium (full luma, no chroma)"
-msgstr "Mittel (volle Brillianz, keine Farbintensit?t)"
+#: avidemux/ADM_codecs/ADM_ffmpeg.cpp:53
+msgid "Internal error with context for  codec"
+msgstr "Interner Fehler mit Kontext f?r Codec"
 
-#: avidemux/ADM_videoFilter/ADM_vidDecDec.cpp:199
-msgid "Slow (full luma and chroma)"
-msgstr "Langsam (volle Brillianz und Farbintensit?t)"
+#: avidemux/ADM_audio/audiotimeline.cpp:78
+#: avidemux/ADM_audio/audiotimeline.cpp:89
+msgid "Building VBR map"
+msgstr "Erstelle VBR Zeitkarte"
 
-#: avidemux/ADM_videoFilter/ADM_vidDecDec.cpp:205
-msgid "_Threshold 1:"
-msgstr "_Schwelle 1:"
+#: avidemux/ADM_script/ADM_JSFunctions.cpp:242
+msgid "Select a directory"
+msgstr "Ein Verzeichnis ausw?hlen"
 
-#: avidemux/ADM_videoFilter/ADM_vidDecDec.cpp:206
-msgid "T_hreshold 2:"
-msgstr "S_chwelle 2:"
+#: avidemux/ADM_script/ADM_JSFunctions.cpp:523
+msgid "Uinteger"
+msgstr "Uinteger"
 
-#: avidemux/ADM_videoFilter/ADM_vidDecDec.cpp:207
-msgid "C_ycle:"
-msgstr "_Durchlauf:"
+#: avidemux/ADM_script/ADM_JSFunctions.cpp:526
+msgid "Test uinteger"
+msgstr "Uinteger-Test"
 
-#: avidemux/ADM_videoFilter/ADM_vidDecTelecide.cpp:83
-msgid "No strategy"
+#: avidemux/ADM_script/ADM_JSFunctions.cpp:538
+msgid "Float"
+msgstr "Fluss"
+
+#: avidemux/ADM_script/ADM_JSFunctions.cpp:556
+msgid "Toggle"
+msgstr "Wechseln"
+
+#: avidemux/ADM_script/ADM_JSFunctions.cpp:578
+msgid "No Strategy"
 msgstr "Keine Strategie"
 
 # Einzelbilder des Films werden abwechselnd zweifach und dreifach aufgezeichnet, so da? sich aus je zwei Einzelbildern des Films immer f?nf Fernseh-Halbbilder ergeben.
 # 59,94 Hz vertikal -> 60 Halbbilder
-#: avidemux/ADM_videoFilter/ADM_vidDecTelecide.cpp:84
-msgid "3:2 pulldown"
+#: avidemux/ADM_script/ADM_JSFunctions.cpp:579
+msgid "3:2 Pulldown"
 msgstr "3:2 Pulldown"
 
-#: avidemux/ADM_videoFilter/ADM_vidDecTelecide.cpp:85
-msgid "PAL/SECAM"
-msgstr "PAL/SECAM"
+#: avidemux/ADM_script/ADM_JSFunctions.cpp:580
+msgid "Pal/Secam"
+msgstr "Pal/Secam"
 
-#: avidemux/ADM_videoFilter/ADM_vidDecTelecide.cpp:91
-#: avidemux/ADM_videoFilter/ADM_vidDGbob.cpp:82
-#: avidemux/ADM_videoFilter/ADM_vidKernelDeint.cpp:88
-#: avidemux/ADM_videoFilter/ADM_vidMcDeint.cpp:108
-msgid "Bottom"
-msgstr "Unten"
+#: avidemux/ADM_script/ADM_JSFunctions.cpp:581
+msgid "NTSC converted from PAL"
+msgstr "NTSC konvertiert von PAL"
 
-#: avidemux/ADM_videoFilter/ADM_vidDecTelecide.cpp:95
-msgid "Never"
-msgstr "Nie"
+#: avidemux/ADM_script/ADM_JSFunctions.cpp:583
+msgid "menu"
+msgstr "Men?"
 
-#: avidemux/ADM_videoFilter/ADM_vidDecTelecide.cpp:96
-msgid "If still combed"
-msgstr "Wenn noch kombiniert"
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:258
+msgid "P' = A"
+msgstr "P' = A"
 
-#: avidemux/ADM_videoFilter/ADM_vidDecTelecide.cpp:97
-msgid "Always"
-msgstr "Immer"
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:259
+msgid "P' = P"
+msgstr "P' = P"
 
-#: avidemux/ADM_videoFilter/ADM_vidDecTelecide.cpp:102
-msgid "None but compute"
-msgstr "Nichts zu berechnen"
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:260
+msgid "P' = P - A"
+msgstr "P' = P - A"
 
-#: avidemux/ADM_videoFilter/ADM_vidDecTelecide.cpp:103
-msgid "Postproc on best match"
-msgstr "Postprozess nach bestem Treffer"
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:261
+msgid "P' = A - P"
+msgstr "P' = A - P"
 
-#: avidemux/ADM_videoFilter/ADM_vidDecTelecide.cpp:104
-msgid "Postproc and show zones (debug)"
-msgstr "Postprozess und 'Show Zones' (Debug)"
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:262
+msgid "P' = P + A"
+msgstr "P' = P + A"
 
-#: avidemux/ADM_videoFilter/ADM_vidDecTelecide.cpp:105
-msgid "Process image (not fields)"
-msgstr "Bild verarbeiten (keine Felder)"
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:263
+msgid "P' = P * A"
+msgstr "P' = P * A"
 
-#: avidemux/ADM_videoFilter/ADM_vidDecTelecide.cpp:106
-msgid "Process image (not fields), debug"
-msgstr "Bild verarbeiten (keine Felder) (Debug)"
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:264
+msgid "P' = P / A"
+msgstr "P' = P / A"
 
-#: avidemux/ADM_videoFilter/ADM_vidDecTelecide.cpp:110
-msgid "_Strategy:"
-msgstr "_Strategie:"
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:265
+msgid "P' = A / P"
+msgstr "P' = A / P"
 
-#: avidemux/ADM_videoFilter/ADM_vidDecTelecide.cpp:112
-msgid "_Postprocessing:"
-msgstr "_Nachbearbeitung:"
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:266
+msgid "P' = min (P, A)"
+msgstr "P' = min (P, A)"
 
-#: avidemux/ADM_videoFilter/ADM_vidDecTelecide.cpp:113
-msgid "_Try backward:"
-msgstr "R?ckw?rts _versuchen:"
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:267
+msgid "P' = max (P, A)"
+msgstr "P' = max (P, A)"
 
-#: avidemux/ADM_videoFilter/ADM_vidDecTelecide.cpp:115
-msgid "_Direct threshold:"
-msgstr "_Direkte Schwelle:"
+# Convolution, im folgenden nur noch Faltung genannt, ist eine zweistellige Operation auf Funktionen. Sie bildet zwei Funktionen f und g auf eine neue Funktion, bezeichnet f*g, ab.
+# Hier ist f die Bildinformation (= image) und g den Bildfilter (= kernel).
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:272
+msgid "A = convolve(P); Load convolution kernel from file"
+msgstr "A = falten(P); L?dt den Faltungsfilter aus einer Datei"
 
-#: avidemux/ADM_videoFilter/ADM_vidDecTelecide.cpp:116
-msgid "_Backward threshold:"
-msgstr "_R?ckw?rts-Schwelle:"
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:274
+msgid "A = pixel from image file as float; Load image from file"
+msgstr "A = Pixel der Bilderdatei im Fluss; L?dt Bild aus Datei"
 
-#: avidemux/ADM_videoFilter/ADM_vidDecTelecide.cpp:117
-msgid "_Noise threshold:"
-msgstr "R_auschschwelle:"
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:276
+msgid "A = pixel from image file as integer; Load image from file"
+msgstr "A = Pixel der Bilderdatei als Ganzes; L?dt das Bild aus der Datei"
 
-#: avidemux/ADM_videoFilter/ADM_vidDecTelecide.cpp:118
-msgid "Postp_rocessing threshold:"
-msgstr "Nachbea_rbeitungs-Schwelle:"
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:278
+msgid "A = floating point constant value"
+msgstr "A = Flie?kommazahl mit konstantem Wert"
 
-#: avidemux/ADM_videoFilter/ADM_vidDecTelecide.cpp:120
-msgid "_Use chroma to decide"
-msgstr "Farbintensit?t zur Entscheidung ben_utzen"
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:280
+msgid "A = rolling average of pixel: A = A*(1-alpha)+(P*alpha)"
+msgstr "A = gleitender Pixel-Durchschnitt: A = A*(1-alpha)+(P*alpha)"
 
-#: avidemux/ADM_videoFilter/ADM_vidDecTelecide.cpp:121
-msgid "Sho_w info"
-msgstr "Zei_ge Info"
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:285
+msgid "Select _Operation on each pixel P and input A:"
+msgstr "_Operation ausw?hlen f?r jedes Pixel P und Eingang A:"
 
-#: avidemux/ADM_videoFilter/ADM_vidDecTelecide.cpp:122
-msgid "Debu_g"
-msgstr "Fehlers_uche"
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:290
+msgid "Input _Type:"
+msgstr "Eingangs_typ:"
 
-#: avidemux/ADM_videoFilter/ADM_vidDecTelecide.cpp:123
-msgid "Bl_end"
-msgstr "V_ermischen"
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:321
+msgid "Input _File (image or convolution kernel):"
+msgstr "Eingangs_datei (Bild oder Faltungsfilter):"
 
-#: avidemux/ADM_videoFilter/ADM_vidDenoise.cpp:384
-msgid "_Luma lock:"
-msgstr "_Brillianz arretieren:"
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:321
+#: avidemux/ADM_videoFilter/ADM_vidParticle.cpp:187
+#: avidemux/gtk_gui.cpp:2010
+#: avidemux/gtk_gui.cpp:2107
+msgid "Select file"
+msgstr "Datei ausw?hlen"
 
-#: avidemux/ADM_videoFilter/ADM_vidDenoise.cpp:385
-msgid "C_hroma lock:"
-msgstr "Farbin_tensit?t arretieren:"
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:324
+msgid ""
+"_Load Bias (added to each pixel\n"
+"in file image when loaded):"
+msgstr ""
+"Tendenz (Bias) _laden (wird zu jedem Pixel eines Bildes\n"
+"in der Datei beim Laden addiert):"
 
-#: avidemux/ADM_videoFilter/ADM_vidDenoise.cpp:386
-msgid "L_uma threshold:"
-msgstr "Brillianz Schwelle:"
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:329
+msgid ""
+"Load _Multiplier (each pixel in\n"
+"file image mult. by this when loaded):"
+msgstr ""
+"_Multiplikator laden (jedes Pixel in der\n"
+"Bilddatei wird damit beim Laden multipliziert):"
 
-#: avidemux/ADM_videoFilter/ADM_vidDenoise.cpp:387
-msgid "Ch_roma threshold:"
-msgstr "Fa_rbintensit?t Schwelle:"
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:335
+msgid "Input _Constant:"
+msgstr "Eingangs_kontrast:"
 
-#: avidemux/ADM_videoFilter/ADM_vidDenoise.cpp:389
-msgid "_Scene change:"
-msgstr "_Szenenwechsel:"
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:339
+msgid ""
+"Memory constant _alpha\n"
+"(where A = (1-alpha)*A + alpha*(curr_frame + lookahead)):"
+msgstr ""
+"Speicherkonstante _alpha\n"
+"(mit A = (1-alpha)*A + alpha*(curr_frame + lookahead)):"
 
-#: avidemux/ADM_videoFilter/ADM_vidDGbob.cpp:85
-msgid "Keep nb of frames and fps"
-msgstr "nb von Bildern und Bilder/s erhalten"
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:344
+msgid "Look ahead _N frames:"
+msgstr "Vorausschauen _N Bilder:"
 
-#: avidemux/ADM_videoFilter/ADM_vidDGbob.cpp:86
-msgid "Double nb of frames and fps"
-msgstr "Doppelte nb von Bildern und fps"
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:348
+msgid "Init _Start Frame (first frame # to use for head start):"
+msgstr "Init _Start-Bild (erstes Bild # f?r Kopfstart verwenden):"
 
-#: avidemux/ADM_videoFilter/ADM_vidDGbob.cpp:87
-msgid "Double nb of frames (slow motion)"
-msgstr "Doppelte nb von Bildern (langsame Bewegung)"
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:352
+msgid "Init _End Frame (last frame # to use for head start):"
+msgstr "Init _Ende-Bild (letztes Bild # f?r Kopfstart verwenden):"
 
-#: avidemux/ADM_videoFilter/ADM_vidDGbob.cpp:93
-msgid "_Extra"
-msgstr "_Extras"
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:356
+msgid "Init By _Rolling (compute head start using a rolling average rather than a straight average)"
+msgstr "Init _Gleitend (Kopfstart wird besser durch gleitender Durchschnitt als durch linearen Durchschnitt berechnet)"
 
-#: avidemux/ADM_videoFilter/ADM_vidDGbob.cpp:93
-msgid "Extra check, avoid using it"
-msgstr "Zus?tzliche Pr?fung (Benutzung vermeiden)"
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:361
+msgid "_Bias (will be added to result):"
+msgstr "Tendenz (_Bias) (wird zum Ergebnis addiert):"
 
-#: avidemux/ADM_videoFilter/ADM_vidDGbob.cpp:96
-msgid "DGBob"
-msgstr "DGBob"
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:364
+msgid "_Result Bias (added to each result pixel):"
+msgstr "E_rgebnis Bias (wird zu jedem Ergebnispixel addiert):"
 
-#: avidemux/ADM_videoFilter/ADM_vidDropOut.cpp:61
-msgid "DropOut Threshold"
-msgstr "Schwelle ?berschritten"
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:368
+msgid ""
+"Result _Multiplier (each result pixel\n"
+"multiplied by this):"
+msgstr ""
+"Entg?ltiger Multiplikator (jedes Ergebnis-Pixel\n"
+"wird damit multipliziert):"
 
-#: avidemux/ADM_videoFilter/ADM_vidDropOut.cpp:64
-msgid "Drop Out"
-msgstr "?berschreitung"
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:373
+msgid "_Histogram every N frames (0 to disable):"
+msgstr "_Histogramm alle N Bilder (0 zum Deaktivieren):"
 
-#: avidemux/ADM_videoFilter/ADM_vidEraser.cpp:191
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:375
+#: avidemux/ADM_videoFilter/ADM_vidEraser.cpp:251
+#: avidemux/ADM_videoFilter/ADM_vidThreshold.cpp:148
+#: avidemux/ADM_videoFilter/ADM_vidParticle.cpp:192
+msgid "_Debugging settings (bits):"
+msgstr "_Fehlersuche Einstellungen (bits):"
+
+#: avidemux/ADM_videoFilter/ADM_vidEraser.cpp:187
 msgid "Erase"
 msgstr "Radieren"
 
-#: avidemux/ADM_videoFilter/ADM_vidEraser.cpp:192
+#: avidemux/ADM_videoFilter/ADM_vidEraser.cpp:188
 msgid "Un-Erase"
 msgstr "Nicht-Radieren"
 
-#: avidemux/ADM_videoFilter/ADM_vidEraser.cpp:196
+#: avidemux/ADM_videoFilter/ADM_vidEraser.cpp:192
 msgid "1x1"
 msgstr "1x1"
 
-#: avidemux/ADM_videoFilter/ADM_vidEraser.cpp:197
+#: avidemux/ADM_videoFilter/ADM_vidEraser.cpp:193
 msgid "3x3"
 msgstr "3x3"
 
-#: avidemux/ADM_videoFilter/ADM_vidEraser.cpp:198
+#: avidemux/ADM_videoFilter/ADM_vidEraser.cpp:194
 msgid "5x5"
 msgstr "5x5"
 
-#: avidemux/ADM_videoFilter/ADM_vidEraser.cpp:199
+#: avidemux/ADM_videoFilter/ADM_vidEraser.cpp:195
 msgid "7x7"
 msgstr "7x7"
 
-#: avidemux/ADM_videoFilter/ADM_vidEraser.cpp:200
+#: avidemux/ADM_videoFilter/ADM_vidEraser.cpp:196
 msgid "9x9"
 msgstr "9x9"
 
-#: avidemux/ADM_videoFilter/ADM_vidEraser.cpp:201
+#: avidemux/ADM_videoFilter/ADM_vidEraser.cpp:197
 msgid "11x11"
 msgstr "11x11"
 
-#: avidemux/ADM_videoFilter/ADM_vidEraser.cpp:202
+#: avidemux/ADM_videoFilter/ADM_vidEraser.cpp:198
 msgid "15x15"
 msgstr "15x15"
 
-#: avidemux/ADM_videoFilter/ADM_vidEraser.cpp:203
+#: avidemux/ADM_videoFilter/ADM_vidEraser.cpp:199
 msgid "21x21"
 msgstr "21x21"
 
-#: avidemux/ADM_videoFilter/ADM_vidEraser.cpp:207
+#: avidemux/ADM_videoFilter/ADM_vidEraser.cpp:203
 msgid "Brush _Mode:"
 msgstr "Pinsel _Modus:"
 
-#: avidemux/ADM_videoFilter/ADM_vidEraser.cpp:211
+#: avidemux/ADM_videoFilter/ADM_vidEraser.cpp:207
 msgid "Brush _Size:"
 msgstr "Pinsel _Gr??e:"
 
-#: avidemux/ADM_videoFilter/ADM_vidEraser.cpp:244
+#: avidemux/ADM_videoFilter/ADM_vidEraser.cpp:240
 msgid "Output \"_Color\" for all masked pixels:"
 msgstr "Augangs-\"_Farbe\" f?r alle maskierten Pixel:"
 
-#: avidemux/ADM_videoFilter/ADM_vidEraser.cpp:250
+#: avidemux/ADM_videoFilter/ADM_vidEraser.cpp:246
 msgid "Eraser _Data File:"
 msgstr "Radierer _Daten-Datei:"
 
-#: avidemux/ADM_videoFilter/ADM_vidEraser.cpp:250
+#: avidemux/ADM_videoFilter/ADM_vidEraser.cpp:246
 msgid "Select data file"
 msgstr "Daten-Datei ausw?hlen"
 
-#: avidemux/ADM_videoFilter/ADM_vidEraser.cpp:255
-#: avidemux/ADM_videoFilter/ADM_vidParticle.cpp:196
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:378
-#: avidemux/ADM_videoFilter/ADM_vidThreshold.cpp:159
-msgid "_Debugging settings (bits):"
-msgstr "_Fehlersuche Einstellungen (bits):"
-
-#: avidemux/ADM_videoFilter/ADM_vidEraser.cpp:261
+#: avidemux/ADM_videoFilter/ADM_vidEraser.cpp:257
 msgid "Eraser Configuration"
 msgstr "Radierer Konfiguration"
 
-#: avidemux/ADM_videoFilter/ADM_vidFade.cpp:65
-msgid "Out"
-msgstr "Ausblenden"
+#: avidemux/ADM_videoFilter/ADM_vidThreshold.cpp:135
+msgid "Mi_nimum value to be in-range:"
+msgstr "Mi_nimaler Wert f?r den Innenbereich:"
 
-#: avidemux/ADM_videoFilter/ADM_vidFade.cpp:65
-msgid "Fade out"
-msgstr "Ausblenden"
+#: avidemux/ADM_videoFilter/ADM_vidThreshold.cpp:136
+msgid "Ma_ximum value to be in-range:"
+msgstr "Ma_ximaler Wert f?r den Innenbereich:"
 
-#: avidemux/ADM_videoFilter/ADM_vidFade.cpp:65
-msgid "In"
-msgstr "Einblenden"
+#: avidemux/ADM_videoFilter/ADM_vidThreshold.cpp:139
+msgid "In-range values go white, out-of-range go black"
+msgstr "Werte im Innenbereich werden wei?, Werte au?erhalb werden schwarz"
 
-#: avidemux/ADM_videoFilter/ADM_vidFade.cpp:65
-msgid "Fade in"
-msgstr "Einblenden"
+#: avidemux/ADM_videoFilter/ADM_vidThreshold.cpp:140
+msgid "In-range values go black, out-of-range go white"
+msgstr "Werte im Innenbereich werden schwarz, Werte au?erhalb werden wei?"
 
-#: avidemux/ADM_videoFilter/ADM_vidFade.cpp:71
-msgid "_Fade type:"
-msgstr "Ein_blendtyp:"
+#: avidemux/ADM_videoFilter/ADM_vidThreshold.cpp:145
+msgid "Output values:"
+msgstr "Ausgabewerte:"
 
-#: avidemux/ADM_videoFilter/ADM_vidFade.cpp:72
-msgid "_Start frame:"
-msgstr "Start-Bild:"
-
-#: avidemux/ADM_videoFilter/ADM_vidFade.cpp:73
-msgid "_End frame:"
-msgstr "End-Bild:"
-
-#: avidemux/ADM_videoFilter/ADM_vidFade.cpp:74
-msgid "Fade to _black"
-msgstr "?berblenden mit _Schwarz"
-
-#: avidemux/ADM_videoFilter/ADM_vidFade.cpp:83
-msgid "Parameter Error"
-msgstr "Parameter Fehler"
-
-#: avidemux/ADM_videoFilter/ADM_vidFade.cpp:83
-msgid "Start must be before end, and both within video # of frames."
-msgstr "Start muss vor dem Ende sein, und beide innerhalb der # der Bilder."
-
-#: avidemux/ADM_videoFilter/ADM_vidFastConvolution.cpp:467
-#: avidemux/ADM_videoFilter/ADM_vidLargeMedian.cpp:304
-msgid "_Process luma"
-msgstr "Brillianz verarbeiten"
-
-#: avidemux/ADM_videoFilter/ADM_vidFastConvolution.cpp:467
-#: avidemux/ADM_videoFilter/ADM_vidLargeMedian.cpp:304
-msgid "Process luma plane"
-msgstr "Brillianz verarbeiten (luma-plane)"
-
-#: avidemux/ADM_videoFilter/ADM_vidFastConvolution.cpp:468
-#: avidemux/ADM_videoFilter/ADM_vidLargeMedian.cpp:305
-msgid "P_rocess chroma"
-msgstr "Farbintensit?t ve_rarbeiten"
-
-#: avidemux/ADM_videoFilter/ADM_vidFastConvolution.cpp:472
-msgid "Fast Convolution"
-msgstr "Schnelle Faltung"
-
-#: avidemux/ADM_videoFilter/ADM_vidFields.cpp:229
-msgid "Motion Threshold"
-msgstr "Bewegungsschwelle"
-
-#: avidemux/ADM_videoFilter/ADM_vidFields.cpp:231
-msgid "Blend Threshold"
-msgstr "Mischungsschwelle"
-
-#: avidemux/ADM_videoFilter/ADM_vidFlux.cpp:134
-msgid "_Temporal threshold:"
-msgstr "Zei_tliche Schwelle:"
-
-#: avidemux/ADM_videoFilter/ADM_vidFlux.cpp:135
-msgid "_Spatial threshold:"
-msgstr "R?umliche _Schwelle:"
-
-#: avidemux/ADM_videoFilter/ADM_vidForcedPP.cpp:81
-msgid "Forced Postprocessing"
-msgstr "Unbedingte Nachbearbeitung"
-
-#: avidemux/ADM_videoFilter/ADM_vidHardIvtcRemoval.cpp:88
-msgid ""
-"If value is smaller than threshold it is considered valid. Smaller value "
-"might mean more false positive"
-msgstr ""
-"Wenn der Wert kleiner als die Schwelle ist, wird er als g?ltig angenommen. "
-"Kleinere Werte bedeuten mehr falsch-positiv"
-
-#: avidemux/ADM_videoFilter/ADM_vidHardIvtcRemoval.cpp:91
-msgid "_Identical:"
-msgstr "_Identisch:"
-
-#: avidemux/ADM_videoFilter/ADM_vidHardIvtcRemoval.cpp:96
-msgid "Hard IVTC Removal"
-msgstr "IVTC hart entfernen"
-
-#: avidemux/ADM_videoFilter/ADM_vidKernelDeint.cpp:93
-msgid "Smaller means more deinterlacing"
-msgstr ""
-"Kleiner bedeutet st?rkes Zusammenf?hren \n"
-"der Halbbilder (deinterlaceing)"
-
-#: avidemux/ADM_videoFilter/ADM_vidKernelDeint.cpp:94
-msgid "_Sharper engine:"
-msgstr "Sch?rfe optimieren"
-
-#: avidemux/ADM_videoFilter/ADM_vidKernelDeint.cpp:95
-msgid "T_woway"
-msgstr "Zwei-_Weg"
-
-#: avidemux/ADM_videoFilter/ADM_vidKernelDeint.cpp:95
-msgid "Extrapolate better (better not to use it)"
-msgstr "Besser extrapolieren (besser nicht benutzen)"
-
-#: avidemux/ADM_videoFilter/ADM_vidKernelDeint.cpp:96
-msgid "_Map"
-msgstr "_?bersicht"
-
-#: avidemux/ADM_videoFilter/ADM_vidKernelDeint.cpp:96
-msgid "Show interlaced areas (for test!)"
-msgstr "Bereiche mit Halbbildmodus anzeigen (f?r Tests!)"
-
-#: avidemux/ADM_videoFilter/ADM_vidLargeMedian.cpp:309
-msgid "Large Median 5x5"
-msgstr "Gro?er Mittelwert 5x5"
-
-#: avidemux/ADM_videoFilter/ADM_vidLogo.cpp:87
-msgid "_Logo (jpg file):"
-msgstr "_Logo (jpg Datei):"
-
-#: avidemux/ADM_videoFilter/ADM_vidLogo.cpp:87
-msgid "Select JPEG file"
-msgstr "JPEG Datei ausw?hlen"
-
-#: avidemux/ADM_videoFilter/ADM_vidLogo.cpp:88
-msgid "_X Position:"
-msgstr "_X Position:"
-
-#: avidemux/ADM_videoFilter/ADM_vidLogo.cpp:89
-msgid "_Y Position:"
-msgstr "_Y Position:"
-
-#: avidemux/ADM_videoFilter/ADM_vidLogo.cpp:90
-msgid "_Alpha:"
-msgstr "_Alpha:"
-
-#: avidemux/ADM_videoFilter/ADM_vidMcDeint.cpp:102
-msgid "Fast"
-msgstr "Schnell"
-
-#: avidemux/ADM_videoFilter/ADM_vidMcDeint.cpp:103
-msgid "Medium"
-msgstr "Mittel"
-
-#: avidemux/ADM_videoFilter/ADM_vidMcDeint.cpp:104
-msgid "Slow iterative motion search"
-msgstr "Langsame iterative Bewegungssuche"
-
-#: avidemux/ADM_videoFilter/ADM_vidMcDeint.cpp:105
-msgid "Extra slow (same as 3+multiple reference frames)"
-msgstr "Besonders langsam (?hnlich wie 3+ Mehrfach-Referenz-Bilder)"
-
-#: avidemux/ADM_videoFilter/ADM_vidMcDeint.cpp:112
-msgid "_Field dominance:"
-msgstr "_Feld Dominanz:"
-
-#: avidemux/ADM_videoFilter/ADM_vidMcDeint.cpp:113
-msgid "_Qp:"
-msgstr "_Qp:"
-
-#: avidemux/ADM_videoFilter/ADM_vidMosaic.cpp:90
-msgid "_Horizontal stacking:"
-msgstr "_Horizontal stapeln:"
-
-#: avidemux/ADM_videoFilter/ADM_vidMosaic.cpp:91
-msgid "_Vertical stacking:"
-msgstr "_Vertikal stapeln:"
-
-#: avidemux/ADM_videoFilter/ADM_vidMosaic.cpp:92
-msgid "_Shrink factor:"
-msgstr "_Schrumpffaktor:"
-
-#: avidemux/ADM_videoFilter/ADM_vidMosaic.cpp:93
-msgid "Show _frame"
-msgstr "_Bild anzeigen"
-
-#: avidemux/ADM_videoFilter/ADM_vidMPLD3D.cpp:72
-#: avidemux/ADM_videoFilter/ADM_vidMPLD3Dlow.cpp:72
-msgid "_Spatial luma strength:"
-msgstr "R?umliche Brillianz-_St?rke:"
-
-#: avidemux/ADM_videoFilter/ADM_vidMPLD3D.cpp:73
-#: avidemux/ADM_videoFilter/ADM_vidMPLD3Dlow.cpp:73
-msgid "S_patial chroma strength:"
-msgstr "?rtliche Far_bintensit?ts-St?rke:"
-
-#: avidemux/ADM_videoFilter/ADM_vidMPLD3D.cpp:74
-#: avidemux/ADM_videoFilter/ADM_vidMPLD3Dlow.cpp:74
-msgid "_Temporal strength:"
-msgstr "_Tempor?re St?rke:"
-
-#: avidemux/ADM_videoFilter/ADM_vidMSharpen.cpp:163
-msgid "_Mask"
-msgstr "_Maske"
-
-#: avidemux/ADM_videoFilter/ADM_vidMSharpen.cpp:164
-msgid "_High Q"
-msgstr "_Hohe Q"
-
-#: avidemux/ADM_videoFilter/ADM_vidMsmooth.cpp:194
-msgid "_High quality"
-msgstr "_Hohe Qualit?t"
-
-#: avidemux/ADM_videoFilter/ADM_vidMsmooth.cpp:195
-msgid "Show _mask"
-msgstr "_Maske anzeigen"
-
-#: avidemux/ADM_videoFilter/ADM_vidMsmooth.cpp:201
-msgid "MSmooth"
-msgstr "MSmooth"
-
-#: avidemux/ADM_videoFilter/ADM_vidPalShift.cpp:74
-msgid "_Try reverse"
-msgstr "Umgekehrt _versuchen"
-
-#: avidemux/ADM_videoFilter/ADM_vidPalShift.cpp:78
-msgid "Pal Field Shift"
-msgstr "PAL Felder Verschiebung"
-
-#: avidemux/ADM_videoFilter/ADM_vidParticle.cpp:135
+#: avidemux/ADM_videoFilter/ADM_vidParticle.cpp:131
 msgid "New format, preferred, good for Tracker3D"
 msgstr "Neues Format, bevorzugt, gut f?r Tracker3D"
 
-#: avidemux/ADM_videoFilter/ADM_vidParticle.cpp:137
+#: avidemux/ADM_videoFilter/ADM_vidParticle.cpp:133
 msgid "DG at UWA format (includes shape info & bounding box)"
 msgstr "DG at UWA format (beinhaltet Form-Info & Bounding-Box)"
 
-#: avidemux/ADM_videoFilter/ADM_vidParticle.cpp:139
+#: avidemux/ADM_videoFilter/ADM_vidParticle.cpp:135
 msgid "AB at ODU format (includes shape info)"
 msgstr "AB at ODU Format (beinhaltet Form-Info)"
 
-#: avidemux/ADM_videoFilter/ADM_vidParticle.cpp:141
+#: avidemux/ADM_videoFilter/ADM_vidParticle.cpp:137
 msgid "Old format that Tracker3D can't read directly"
 msgstr "?lteres Format, das Tracker3D nicht direkt lesen kann"
 
-#: avidemux/ADM_videoFilter/ADM_vidParticle.cpp:145
+#: avidemux/ADM_videoFilter/ADM_vidParticle.cpp:141
 msgid "Output _Format:"
 msgstr "Ausgabe_format:"
 
-#: avidemux/ADM_videoFilter/ADM_vidParticle.cpp:170
+#: avidemux/ADM_videoFilter/ADM_vidParticle.cpp:166
 msgid "Mi_nimum area for a particle to be detected:"
 msgstr "Mi_nimaler Bereich f?r ein Teil, um es zu erkennen:"
 
-#: avidemux/ADM_videoFilter/ADM_vidParticle.cpp:173
+#: avidemux/ADM_videoFilter/ADM_vidParticle.cpp:169
 msgid "Ma_ximum area for a particle to be detected:"
 msgstr "Ma_ximaler Bereich f?r ein Teil, um es zu erkennen:"
 
-#: avidemux/ADM_videoFilter/ADM_vidParticle.cpp:177
+#: avidemux/ADM_videoFilter/ADM_vidParticle.cpp:173
 msgid "_Left side crop (ignore particles in):"
 msgstr "_Linksseitiges Abschneiden (ignoriert innenliegende Teile):"
 
-#: avidemux/ADM_videoFilter/ADM_vidParticle.cpp:180
+#: avidemux/ADM_videoFilter/ADM_vidParticle.cpp:176
 msgid "_Right side crop (ignore particles in):"
 msgstr "_Rechtsseitiges Abschneiden (ignoriert innenliegende Teile):"
 
-#: avidemux/ADM_videoFilter/ADM_vidParticle.cpp:183
+#: avidemux/ADM_videoFilter/ADM_vidParticle.cpp:179
 msgid "_Top crop (ignore particles in):"
 msgstr "_Oberes Abschneiden (ignoriert innenliegende Teile):"
 
-#: avidemux/ADM_videoFilter/ADM_vidParticle.cpp:186
+#: avidemux/ADM_videoFilter/ADM_vidParticle.cpp:182
 msgid "_Bottom crop (ignore particles in):"
 msgstr "_Unteres Abschneiden (ignoriert innenliegende Teile):"
 
-#: avidemux/ADM_videoFilter/ADM_vidParticle.cpp:191
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:324
-#: avidemux/gtk_gui.cpp:2026 avidemux/gtk_gui.cpp:2123
-msgid "Select file"
-msgstr "Datei ausw?hlen"
+#: avidemux/ADM_videoFilter/ADM_vidParticle.cpp:187
+#: avidemux/ADM_videoFilter/ADM_vidComputeAverage.cpp:179
+msgid "_Output File:"
+msgstr "_Ausgabedatei:"
 
-#: avidemux/ADM_videoFilter/ADM_vidParticle.cpp:194
+#: avidemux/ADM_videoFilter/ADM_vidParticle.cpp:190
 msgid "_Camera number:"
 msgstr "_Kamera Nummer:"
 
-#: avidemux/ADM_videoFilter/ADM_vidResampleFPS.cpp:85
-msgid "_New frame rate:"
-msgstr "_Neue Bildrate:"
+#: avidemux/ADM_videoFilter/ADM_vidComputeAverage.cpp:171
+msgid "_Start Frame (first frame # to include in average):"
+msgstr "_Startbild (Erstes Bild # im Durchschnitt zu ber?cksichtigen):"
 
-#: avidemux/ADM_videoFilter/ADM_vidResampleFPS.cpp:86
-msgid "_Blend"
-msgstr "_Mischen"
+#: avidemux/ADM_videoFilter/ADM_vidComputeAverage.cpp:175
+msgid "_End Frame (last frame # to include), -1 = last:"
+msgstr "_Endbild (Letztes Bild # im Durchschnitt zu ber?cksichtigen), -1=letztes:"
 
-#: avidemux/ADM_videoFilter/ADM_vidRotate.cpp:263
-msgid "90 degrees"
-msgstr "90 Grad"
+#: avidemux/ADM_videoFilter/ADM_vidComputeAverage.cpp:179
+msgid "Select output file"
+msgstr "Ausgabe-Datei ausw?hlen"
 
-#: avidemux/ADM_videoFilter/ADM_vidRotate.cpp:263
-msgid "90?"
-msgstr "90?"
+#: avidemux/ADM_videoFilter/ADM_vidComputeAverage.cpp:182
+msgid "_Bias (only for display; use 0 for average, 128 for frame minus average):"
+msgstr "Tendenz (_Bias) (nur zur Anzeige; 0 f?r Durchschnitt, 128 f?r Bild minus Durchschnitt):"
 
-#: avidemux/ADM_videoFilter/ADM_vidRotate.cpp:264
-msgid "180 degrees"
-msgstr "180 Grad"
+#: avidemux/ADM_videoFilter/ADM_vidComputeAverage.cpp:186
+msgid "Current frame minus average so far"
+msgstr "Aktuelles Bild abz?glich derzeitigem Durchschnitt"
 
-#: avidemux/ADM_videoFilter/ADM_vidRotate.cpp:264
-msgid "180?"
-msgstr "180?"
+#: avidemux/ADM_videoFilter/ADM_vidComputeAverage.cpp:187
+msgid "Average so far"
+msgstr "bisheriger Durchschnitt"
 
-#: avidemux/ADM_videoFilter/ADM_vidRotate.cpp:265
-msgid "270 degrees"
-msgstr "270 Grad"
+#: avidemux/ADM_videoFilter/ADM_vidComputeAverage.cpp:189
+msgid "Display nothing (fast for batch processing)"
+msgstr "Nichts anzeigen (schnell f?r Stapelverarbeitung)"
 
-#: avidemux/ADM_videoFilter/ADM_vidRotate.cpp:265
-msgid "270?"
-msgstr "270?"
+#: avidemux/ADM_videoFilter/ADM_vidComputeAverage.cpp:193
+msgid "Display _Mode:"
+msgstr "Ausgabe_modus:"
 
-#: avidemux/ADM_videoFilter/ADM_vidRotate.cpp:267
-msgid "_Angle:"
-msgstr "Winkel:"
+#: avidemux/ADM_videoFilter/ADM_vidComputeAverage.cpp:198
+msgid "ComputeAverage"
+msgstr "Durchschnittsberechnung"
 
-#: avidemux/ADM_videoFilter/ADM_vidSoften.cpp:68
-msgid "_Luma threshold:"
-msgstr "Brillianz Schwelle:"
+#: avidemux/ADM_osSupport/ADM_crashHook.cpp:64
+msgid "Load it"
+msgstr "Lade es"
 
-#: avidemux/ADM_videoFilter/ADM_vidSoften.cpp:69
-msgid "C_hroma threshold:"
-msgstr "Fa_rbintensit?t Schwelle:"
+#: avidemux/ADM_osSupport/ADM_crashHook.cpp:64
+msgid "Crash file"
+msgstr "Dateiabsturz"
 
-#: avidemux/ADM_videoFilter/ADM_vidSoften.cpp:70
-msgid "_Radius:"
-msgstr "_Radius:"
+#: avidemux/ADM_osSupport/ADM_crashHook.cpp:65
+msgid ""
+"I have detected a crash file. \n"
+"Do you want to load it  ?\n"
+"(It will be deleted in all cases, you should save it if you want to keep it)"
+msgstr ""
+"Es wurde ein Absturzprotokoll gefunden.\n"
+"Soll dieses jetzt geladen werden ?\n"
+"(Anschlie?end wird es gel?scht. Es sollte daher ggf. vorher gesichert werden.)"
 
-#: avidemux/ADM_videoFilter/ADM_vidSRT.cpp:208
-msgid "Could not open subtitle file"
-msgstr "Untertitel-Datei kann nicht ge?ffnet werden"
+#: avidemux/ADM_osSupport/ADM_misc.cpp:15
+#, c-format
+msgid "%lu minutes"
+msgstr "%lu Minuten"
 
-#: avidemux/ADM_videoFilter/ADM_vidSRT.cpp:228
-msgid "Cannot identify subtitle format"
-msgstr "Kann Untertitel-Datei nicht identifizieren"
+#: avidemux/ADM_osSupport/ADM_misc.cpp:19
+#, c-format
+msgid "%lu minute"
+msgstr "%lu Minuten"
 
-#: avidemux/ADM_videoFilter/ADM_vidStabilize.cpp:61
-msgid "Stabilize Threshold"
-msgstr "Schwelle stabilisieren"
+#: avidemux/ADM_osSupport/ADM_misc.cpp:27
+#, c-format
+msgid "%lu second"
+msgstr "%lu Sekunden"
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:261
-msgid "P' = A"
-msgstr "P' = A"
+#: avidemux/ADM_osSupport/ADM_misc.cpp:31
+#, c-format
+msgid "%lu seconds"
+msgstr "%lu Sekunden"
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:262
-msgid "P' = P"
-msgstr "P' = P"
+#: avidemux/ADM_encoder/adm_encffmpeg.cpp:266
+msgid "Incompatible settings"
+msgstr "Inkompatible Einstellungen"
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:263
-msgid "P' = P - A"
-msgstr "P' = P - A"
+#: avidemux/ADM_encoder/adm_encffmpeg.cpp:266
+msgid "At the moment, the DV codec only accepts 720*576 at 25"
+msgstr "Derzeit akzeptiert der DV Codec nur 720*576 at 25"
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:264
-msgid "P' = A - P"
-msgstr "P' = A - P"
+#: avidemux/ADM_encoder/adm_encRequant.cpp:93
+msgid "Requant"
+msgstr "Requantisieren"
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:265
-msgid "P' = P + A"
-msgstr "P' = P + A"
+#: avidemux/ADM_encoder/adm_encConfig.cpp:619
+msgid "Only QCIF and subQCIF are allowed for H.263"
+msgstr "Nur QCIF und subQCIF sind erlaubt f?r H.263"
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:266
-msgid "P' = P * A"
-msgstr "P' = P * A"
+#: avidemux/ADM_inputs/ADM_openDML/ADM_openDML.cpp:270
+#: avidemux/ADM_inputs/ADM_openDML/ADM_openDML.cpp:352
+#: avidemux/ADM_inputs/ADM_openDML/ADM_openDML.cpp:487
+msgid "Malformed header"
+msgstr "Fehlerhafte Kopfzeilen"
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:267
-msgid "P' = P / A"
-msgstr "P' = P / A"
+#: avidemux/ADM_inputs/ADM_openDML/ADM_openDMLDepack.cpp:86
+msgid "Unpacking bitstream"
+msgstr "Bitstrom entpacken"
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:268
-msgid "P' = A / P"
-msgstr "P' = A / P"
+#: avidemux/ADM_inputs/ADM_openDML/ADM_opendml_reindex.cpp:60
+msgid "Indexing"
+msgstr "Indizierung"
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:269
-msgid "P' = min (P, A)"
-msgstr "P' = min (P, A)"
+#: avidemux/ADM_inputs/ADM_mp4/ADM_mp4Indexer.cpp:341
+msgid "No stts table"
+msgstr "Keine stts Tabelle"
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:270
-msgid "P' = max (P, A)"
-msgstr "P' = max (P, A)"
+#: avidemux/ADM_inputs/ADM_mp4/ADM_mp4Analyzer.cpp:626
+msgid "Problem reading SVQ3 headers"
+msgstr "Problem beim Lesen der SVQ3 Kopfzeilen"
 
-# Convolution, im folgenden nur noch Faltung genannt, ist eine zweistellige Operation auf Funktionen. Sie bildet zwei Funktionen f und g auf eine neue Funktion, bezeichnet f*g, ab.
-# Hier ist f die Bildinformation (= image) und g den Bildfilter (= kernel).
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:275
-msgid "A = convolve(P); Load convolution kernel from file"
-msgstr "A = falten(P); L?dt den Faltungsfilter aus einer Datei"
+#: avidemux/ADM_inputs/ADM_h263/ADM_h263.cpp:256
+msgid "Size is not (s)QCIF"
+msgstr "Gr??e ist nicht (s)QCIF"
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:277
-msgid "A = pixel from image file as float; Load image from file"
-msgstr "A = Pixel der Bilderdatei im Fluss; L?dt Bild aus Datei"
+#: avidemux/ADM_inputs/ADM_mpegdemuxer/dmx_indexer.cpp:144
+msgid "There is several mpeg file, append them ?"
+msgstr "Weitere Mpeg Datei gefunden, anh?ngen?"
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:279
-msgid "A = pixel from image file as integer; Load image from file"
-msgstr "A = Pixel der Bilderdatei als Ganzes; L?dt das Bild aus der Datei"
+#: avidemux/ADM_inputs/ADM_mpegdemuxer/dmx_indexer.cpp:239
+msgid "Can't determine aspect ratio"
+msgstr "Kann Seitenverh?ltnis nicht bestimmen"
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:281
-msgid "A = floating point constant value"
-msgstr "A = Flie?kommazahl mit konstantem Wert"
+#: avidemux/ADM_inputs/ADM_mpegdemuxer/dmx_video.cpp:348
+msgid "Out of memory"
+msgstr "Speicherfehler"
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:283
-msgid "A = rolling average of pixel: A = A*(1-alpha)+(P*alpha)"
-msgstr "A = gleitender Pixel-Durchschnitt: A = A*(1-alpha)+(P*alpha)"
+#: avidemux/ADM_inputs/ADM_mpegdemuxer/dmx_video.cpp:363
+msgid "Opening MPEG"
+msgstr "?ffne MPEG"
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:288
-msgid "Select _Operation on each pixel P and input A:"
-msgstr "_Operation ausw?hlen f?r jedes Pixel P und Eingang A:"
+#: avidemux/ADM_inputs/ADM_mpegdemuxer/dmx_video.cpp:532
+msgid "MPEG renumbering error"
+msgstr "Mpeg Fehler beim Neunummerieren"
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:293
-msgid "Input _Type:"
-msgstr "Eingangs_typ:"
+#: avidemux/ADM_inputs/ADM_ogm/ADM_ogm.cpp:340
+msgid "Take second track ?"
+msgstr "Zweite Spur verwenden?"
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:324
-msgid "Input _File (image or convolution kernel):"
-msgstr "Eingangs_datei (Bild oder Faltungsfilter):"
+#: avidemux/ADM_inputs/ADM_ogm/ADM_ogm.cpp:420
+msgid "Scanning OGM"
+msgstr "Einlesen von OGM"
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:327
-msgid ""
-"_Load Bias (added to each pixel\n"
-"in file image when loaded):"
-msgstr ""
-"Tendenz (Bias) _laden (wird zu jedem Pixel eines Bildes\n"
-"in der Datei beim Laden addiert):"
+#: avidemux/ADM_inputs/ADM_nuv/ADM_nuv.cpp:538
+#: avidemux/ADM_inputs/ADM_nuv/ADM_nuv.cpp:567
+msgid "Opening Nuppel video"
+msgstr "?ffne Nuppel Video"
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:332
-msgid ""
-"Load _Multiplier (each pixel in\n"
-"file image mult. by this when loaded):"
-msgstr ""
-"_Multiplikator laden (jedes Pixel in der\n"
-"Bilddatei wird damit beim Laden multipliziert):"
+#: avidemux/ADM_inputs/ADM_nuv/ADM_nuv.cpp:543
+msgid "Sure you want to abort ?"
+msgstr "Soll wirklich abgebrochen werden?"
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:338
-msgid "Input _Constant:"
-msgstr "Eingangs_kontrast:"
+#: avidemux/ADM_inputs/ADM_nuv/ADM_nuv.cpp:754
+msgid "Size mismatch"
+msgstr "unterschiedliche Gr??e"
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:342
-msgid ""
-"Memory constant _alpha\n"
-"(where A = (1-alpha)*A + alpha*(curr_frame + lookahead)):"
-msgstr ""
-"Speicherkonstante _alpha\n"
-"(mit A = (1-alpha)*A + alpha*(curr_frame + lookahead)):"
+#: avidemux/ADM_inputs/ADM_nuv/ADM_nuv.cpp:754
+msgid "Expect a crash."
+msgstr "Erwarte einen Crash."
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:347
-msgid "Look ahead _N frames:"
-msgstr "Vorausschauen _N Bilder:"
+#: avidemux/ADM_inputs/ADM_nuv/ADM_nuv.cpp:1046
+msgid "Do you want to save an index ?"
+msgstr "Soll ein Index gespeichert werden?"
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:351
-msgid "Init _Start Frame (first frame # to use for head start):"
-msgstr "Init _Start-Bild (erstes Bild # f?r Kopfstart verwenden):"
+#: avidemux/ADM_ocr/adm_glyph.cpp:169
+msgid "Could not write the file"
+msgstr "Konnte Datei nicht schreiben"
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:355
-msgid "Init _End Frame (last frame # to use for head start):"
-msgstr "Init _Ende-Bild (letztes Bild # f?r Kopfstart verwenden):"
+#: avidemux/ADM_ocr/adm_glyph.cpp:217
+#, c-format
+msgid "Could not read \"%s\"."
+msgstr "Konnte \"%s\" nicht lesen."
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:359
-msgid ""
-"Init By _Rolling (compute head start using a rolling average rather than a "
-"straight average)"
-msgstr ""
-"Init _Gleitend (Kopfstart wird besser durch gleitender Durchschnitt als "
-"durch linearen Durchschnitt berechnet)"
+#: avidemux/ADM_ocr/ADM_ocrEngine.cpp:75
+msgid "Output file error"
+msgstr "Ausgabe-Datei Fehler"
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:364
-msgid "_Bias (will be added to result):"
-msgstr "Tendenz (_Bias) (wird zum Ergebnis addiert):"
+#: avidemux/ADM_ocr/ADM_ocrEngine.cpp:75
+#, c-format
+msgid "Could not open \"%s\" for writing."
+msgstr "Konnte \"%s\" nicht zum Schreiben ?ffnen."
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:367
-msgid "_Result Bias (added to each result pixel):"
-msgstr "E_rgebnis Bias (wird zu jedem Ergebnispixel addiert):"
+#: avidemux/ADM_ocr/ADM_ocrEngine.cpp:83
+#: avidemux/ADM_ocr/ADM_ocrEngine.cpp:89
+msgid "Input file error"
+msgstr "Fehler Eingangsdatei"
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:371
-msgid ""
-"Result _Multiplier (each result pixel\n"
-"multiplied by this):"
-msgstr ""
-"Entg?ltiger Multiplikator (jedes Ergebnis-Pixel\n"
-"wird damit multipliziert):"
+#: avidemux/ADM_ocr/ADM_ocrEngine.cpp:83
+msgid "Unknown source type"
+msgstr "Unbekannter Quellen-Typ"
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:376
-msgid "_Histogram every N frames (0 to disable):"
-msgstr "_Histogramm alle N Bilder (0 zum Deaktivieren):"
+#: avidemux/ADM_ocr/ADM_ocrEngine.cpp:89
+msgid "Bitmap source failed"
+msgstr "Bitmap Quelle fehlt"
 
-#: avidemux/ADM_videoFilter/ADM_vidThreshold.cpp:146
-msgid "Mi_nimum value to be in-range:"
-msgstr "Mi_nimaler Wert f?r den Innenbereich:"
+#: avidemux/ADM_ocr/ADM_ocrEngine.cpp:97
+msgid "Problem loading sub"
+msgstr "Problem beim Laden von Sub"
 
-#: avidemux/ADM_videoFilter/ADM_vidThreshold.cpp:147
-msgid "Ma_ximum value to be in-range:"
-msgstr "Ma_ximaler Wert f?r den Innenbereich:"
+#: avidemux/ADM_ocr/ADM_ocrEngine.cpp:97
+msgid "No subs"
+msgstr "Keine Untertitel"
 
-#: avidemux/ADM_videoFilter/ADM_vidThreshold.cpp:150
-msgid "In-range values go white, out-of-range go black"
-msgstr "Werte im Innenbereich werden wei?, Werte au?erhalb werden schwarz"
+#: avidemux/ADM_ocr/ADM_vob2vobsub.cpp:250
+msgid "Ifo error"
+msgstr "IFO Fehler"
 
-#: avidemux/ADM_videoFilter/ADM_vidThreshold.cpp:151
-msgid "In-range values go black, out-of-range go white"
-msgstr "Werte im Innenbereich werden schwarz, Werte au?erhalb werden wei?"
+#: avidemux/ADM_ocr/ADM_vob2vobsub.cpp:250
+msgid "Error reading ifo file, aborting."
+msgstr "Fehler beim Lesen der IFO Datei. Abbruch."
 
-#: avidemux/ADM_videoFilter/ADM_vidThreshold.cpp:156
-msgid "Output values:"
-msgstr "Ausgabewerte:"
+#: avidemux/ADM_ocr/ADM_vob2vobsub.cpp:258
+msgid "Cannot write .idx"
+msgstr "Kann .idx nicht schreiben"
 
-#: avidemux/ADM_videoFilter/ADM_vidVlad.cpp:99
-msgid "_Luma temporal threshold:"
-msgstr "Tempor?re _Brillianz-Schwelle:"
+#: avidemux/ADM_ocr/ADM_vob2vobsub.cpp:271
+msgid "Cannot write .sub"
+msgstr "Kann .sub nicht schreiben"
 
-#: avidemux/ADM_videoFilter/ADM_vidVlad.cpp:100
-msgid "Ch_roma temporal threshold:"
-msgstr "Tempor?re Farb_intensit?ts-Schwelle"
+#: avidemux/ADM_ocr/ADM_vob2vobsub.cpp:283
+msgid "Problem opening the mpeg files"
+msgstr "Problem beim ?ffnen der Mpeg Dateien"
 
-#: avidemux/ADM_videoFilter/ADM_vidYadif.cpp:169
-msgid "Temporal & spatial check"
-msgstr "Zeitliche & r?umliche Pr?fung"
+#: avidemux/ADM_ocr/ADM_vob2vobsub.cpp:296
+msgid "Generating VobSub file"
+msgstr "Erstelle VobSub Datei"
 
-#: avidemux/ADM_videoFilter/ADM_vidYadif.cpp:170
-msgid "Bob, temporal & spatial check"
-msgstr "Bob, zeitliche & r?umliche Pr?fung"
+#: avidemux/ADM_coreUI/src/DIA_fileSel.cpp:129
+#: avidemux/gtk_gui.cpp:886
+#, c-format
+msgid "Cannot open \"%s\"."
+msgstr "\"%s\" kann nicht ge?ffnet werden."
 
-#: avidemux/ADM_videoFilter/ADM_vidYadif.cpp:171
-msgid "Skip spatial temporal check"
-msgstr "Ohne r?umliche & zeitliche Pr?fung"
+#: avidemux/ADM_coreUI/src/DIA_fileSel.cpp:142
+#, c-format
+msgid ""
+"%s already exists.\n"
+"\n"
+"Do you want to replace it?"
+msgstr ""
+"%s existiert bereits.\n"
+"\n"
+"Ersetzen?"
 
-#: avidemux/ADM_videoFilter/ADM_vidYadif.cpp:172
-msgid "Bob, skip spatial temporal check"
-msgstr "Bob, ohne r?umliche & zeitliche Pr?fung"
+#: avidemux/ADM_coreUI/src/DIA_fileSel.cpp:169
+#: avidemux/ADM_coreUI/src/DIA_fileSel.cpp:183
+msgid "It is possible that you are trying to overwrite an input file!"
+msgstr "Es ist m?glich, dass eine Eingangsdatei ?berschrieben wird!"
 
-#: avidemux/ADM_videoFilter/ADM_vidYadif.cpp:180
-msgid "_Order:"
-msgstr "Reihenf_olge:"
+#: avidemux/ADM_coreUI/src/DIA_fileSel.cpp:194
+msgid "Cannot write the file"
+msgstr "Kann Datei nicht schreiben"
 
-#: avidemux/gtk_gui.cpp:248
+#: avidemux/ADM_coreUI/src/DIA_fileSel.cpp:194
+#, c-format
+msgid "No write access to \"%s\"."
+msgstr "Keine Schreibrechte f?r  \"%s\"."
+
+#: avidemux/gui_navigate.cpp:74
+#: avidemux/gui_navigate.cpp:112
+#: avidemux/gui_navigate.cpp:394
+#: avidemux/gui_navigate.cpp:430
+msgid "Decompressing error"
+msgstr "Dekompressions-Fehler"
+
+#: avidemux/gui_navigate.cpp:74
+msgid "Cannot decode next frame."
+msgstr "Kann n?chstes Bild nicht dekodieren."
+
+#: avidemux/gui_navigate.cpp:112
+#: avidemux/gui_navigate.cpp:430
+msgid "Cannot decode keyframe."
+msgstr "Kann I-Bild (keyframe) nicht dekodieren."
+
+#: avidemux/gui_navigate.cpp:238
+msgid "Seeking"
+msgstr "Suche..."
+
+#: avidemux/gui_navigate.cpp:319
+msgid "Finding black frames"
+msgstr "Finde schwarze Bilder "
+
+#: avidemux/gui_navigate.cpp:394
+msgid "Cannot decode the frame."
+msgstr "Kann Bild nicht dekodieren."
+
+#: avidemux/gtk_gui.cpp:246
 msgid "Select ECMAScript to Run"
 msgstr "Auszuf?hrendes ECMA-Skript ausw?hlen"
 
-#: avidemux/gtk_gui.cpp:329
+#: avidemux/gtk_gui.cpp:313
 msgid "Obsolete"
 msgstr "?berfl?ssig"
 
-#: avidemux/gtk_gui.cpp:357
+#: avidemux/gtk_gui.cpp:341
 msgid "Not coded in this version"
 msgstr "Nicht ?bersetzt in dieser Version"
 
-#: avidemux/gtk_gui.cpp:372 avidemux/gtk_gui.cpp:489
-msgid "Select AVI File..."
-msgstr "AVI-Datei ausw?hlen..."
+#: avidemux/gtk_gui.cpp:356
+msgid "Select Video/Image File..."
+msgstr "Video/Bild-Datei ausw?hlen..."
 
-#: avidemux/gtk_gui.cpp:425
+#: avidemux/gtk_gui.cpp:409
 msgid ""
 "This is to be used to undo packed VOP on MPEG-4.\n"
 "Continue ?"
@@ -8063,171 +4672,177 @@
 "Dies wird ben?tigt, um das Packen von VOP von Mpeg-4 zur?ckzunehmen.\n"
 "Fortfahren ?"
 
-#: avidemux/gtk_gui.cpp:427
+#: avidemux/gtk_gui.cpp:411
 msgid "Select AVI File to Write"
 msgstr "Als AVI-Datei schreiben"
 
-#: avidemux/gtk_gui.cpp:433
+#: avidemux/gtk_gui.cpp:417
 msgid "Select OGM File to Write"
 msgstr "Als OGM-Datei schreiben"
 
-#: avidemux/gtk_gui.cpp:437 avidemux/gtk_gui.cpp:449
+#: avidemux/gtk_gui.cpp:421
+#: avidemux/gtk_gui.cpp:433
 msgid "Select Workbench to Save"
 msgstr "Arbeitsbereich als Projekt speichern"
 
-#: avidemux/gtk_gui.cpp:479
+#: avidemux/gtk_gui.cpp:463
 msgid "Select Raw File to Save"
 msgstr "Als rohe Datei speichern"
 
-#: avidemux/gtk_gui.cpp:492
+#: avidemux/gtk_gui.cpp:473
+msgid "Select AVI File..."
+msgstr "AVI-Datei ausw?hlen..."
+
+#: avidemux/gtk_gui.cpp:476
 msgid "Select AVI File to Append..."
 msgstr "AVI-Datei ausw?hlen zum Anh?ngen"
 
-#: avidemux/gtk_gui.cpp:496
+#: avidemux/gtk_gui.cpp:480
 msgid "Select File to Save Audio"
 msgstr "Als Audio-Datei speichern"
 
-#: avidemux/gtk_gui.cpp:530
+#: avidemux/gtk_gui.cpp:514
 msgid "Select JPEG Sequence to Save"
 msgstr "Als JPEG-Folge speichern"
 
-#: avidemux/gtk_gui.cpp:533
+#: avidemux/gtk_gui.cpp:517
 msgid "Select BMP to Save"
 msgstr "Als BMP-Datei speichern"
 
-#: avidemux/gtk_gui.cpp:537
+#: avidemux/gtk_gui.cpp:521
 msgid "Select JPEG to Save"
 msgstr "Als JPEG-Datei speichern"
 
-#: avidemux/gtk_gui.cpp:590 avidemux/gtk_gui.cpp:699
+#: avidemux/gtk_gui.cpp:574
+#: avidemux/gtk_gui.cpp:683
 msgid "Select File to Save"
 msgstr "Als Datei speichern"
 
-#: avidemux/gtk_gui.cpp:642
+#: avidemux/gtk_gui.cpp:626
 msgid "Select MP3 to Load"
 msgstr "MP3-Datei ausw?hlen zum Laden"
 
-#: avidemux/gtk_gui.cpp:645
+#: avidemux/gtk_gui.cpp:629
 msgid "Select AC3 to Load"
 msgstr "AC3-Datei ausw?hlen zum Laden"
 
-#: avidemux/gtk_gui.cpp:648
+#: avidemux/gtk_gui.cpp:632
 msgid "Select WAV to Load"
 msgstr "WAV-Datei ausw?hlen zum Laden"
 
-#: avidemux/gtk_gui.cpp:686
+#: avidemux/gtk_gui.cpp:670
 msgid "Go to Frame"
 msgstr "Springe zu Bild"
 
-#: avidemux/gtk_gui.cpp:686
+#: avidemux/gtk_gui.cpp:670
 msgid "_Go to frame:"
 msgstr "Springe zu _Bild:"
 
-#: avidemux/gtk_gui.cpp:691
+#: avidemux/gtk_gui.cpp:675
 msgid "Out of bounds"
 msgstr "Au?erhalb der Grenzen"
 
-#: avidemux/gtk_gui.cpp:697 avidemux/gtk_gui.cpp:705 avidemux/gtk_gui.cpp:1925
+#: avidemux/gtk_gui.cpp:681
+#: avidemux/gtk_gui.cpp:689
+#: avidemux/gtk_gui.cpp:1909
 msgid "Marker A > B"
 msgstr "Marke A > B"
 
-#: avidemux/gtk_gui.cpp:697
-msgid ""
-"An invalid frame range has been selected.  Make sure marker A is placed "
-"before marker B."
-msgstr ""
+#: avidemux/gtk_gui.cpp:681
+msgid "An invalid frame range has been selected.  Make sure marker A is placed before marker B."
+msgstr "Ein ung?ltiger Bildbereich wurde selektiert. Beachte: Marke A muss vor Marke B platziert sein."
 
-#: avidemux/gtk_gui.cpp:705
+#: avidemux/gtk_gui.cpp:689
 msgid "Cannot copy."
 msgstr "Kann nicht kopieren."
 
-#: avidemux/gtk_gui.cpp:717
+#: avidemux/gtk_gui.cpp:701
 msgid "Something bad happened (II))"
 msgstr "Irgendwas Schlimmes ist passiert (II))"
 
-#: avidemux/gtk_gui.cpp:731
+#: avidemux/gtk_gui.cpp:715
 msgid "Are you sure?"
 msgstr "Sicher?"
 
-#: avidemux/gtk_gui.cpp:790
+#: avidemux/gtk_gui.cpp:774
 msgid "Use custom value"
-msgstr ""
+msgstr "Verwendet individuelle Werte"
 
-#: avidemux/gtk_gui.cpp:791
+#: avidemux/gtk_gui.cpp:775
 msgid "Frame Rate"
 msgstr "Bildrate"
 
-#: avidemux/gtk_gui.cpp:791
+#: avidemux/gtk_gui.cpp:775
 msgid "_Frames per second"
-msgstr ""
+msgstr "_Bilder pro Sekunde"
 
-#: avidemux/gtk_gui.cpp:794
+#: avidemux/gtk_gui.cpp:778
 msgid "PAL - 25 FPS"
-msgstr ""
+msgstr "PAL - 25 FPS"
 
-#: avidemux/gtk_gui.cpp:795
-msgid "FILM- 24 FPS"
-msgstr ""
+#: avidemux/gtk_gui.cpp:779
+msgid "FILM - 24 FPS"
+msgstr "FILM - 24 FPS"
 
-#: avidemux/gtk_gui.cpp:796
-msgid "NTSC- 30 FPS"
-msgstr ""
+#: avidemux/gtk_gui.cpp:780
+msgid "NTSC - 30 FPS"
+msgstr "NTSC - 30 FPS"
 
-#: avidemux/gtk_gui.cpp:798
-msgid "Standard FrameRate:"
-msgstr ""
+#: avidemux/gtk_gui.cpp:782
+msgid "Standard Frame Rate:"
+msgstr "Standard Bildrate:"
 
-#: avidemux/gtk_gui.cpp:804
-msgid "Change FrameRate"
-msgstr ""
+#: avidemux/gtk_gui.cpp:788
+msgid "Change Frame Rate"
+msgstr "Bildrate ?ndern"
 
-#: avidemux/gtk_gui.cpp:835
+#: avidemux/gtk_gui.cpp:819
 msgid "Width is not a multiple of 8"
 msgstr "Breite ist kein Vielfaches von 8"
 
-#: avidemux/gtk_gui.cpp:836
+#: avidemux/gtk_gui.cpp:820
 msgid "This will make trouble for AVI files."
 msgstr "Dies wird bei AVI-Dateien Schwierigkeiten bereiten."
 
-#: avidemux/gtk_gui.cpp:846
+#: avidemux/gtk_gui.cpp:830
 msgid "Rebuild all Keyframes?"
 msgstr "Alle I-Bilder (keyframes) neu aufbauen?"
 
-#: avidemux/gtk_gui.cpp:902
+#: avidemux/gtk_gui.cpp:886
 msgid "Permission error"
 msgstr "Rechtefehler"
 
-#: avidemux/gtk_gui.cpp:905
+#: avidemux/gtk_gui.cpp:889
 #, c-format
 msgid "\"%s\" does not exist."
 msgstr "\"%s\" existiert nicht."
 
-#: avidemux/gtk_gui.cpp:908
+#: avidemux/gtk_gui.cpp:892
 msgid "Error opening file"
-msgstr ""
+msgstr "Fehler beim ?ffnen der Datei"
 
-#: avidemux/gtk_gui.cpp:908
+#: avidemux/gtk_gui.cpp:892
 #, c-format
 msgid "Error opening \"%s\"."
-msgstr ""
+msgstr "Fehler beim ?ffnen von  \"%s\"."
 
-#: avidemux/gtk_gui.cpp:952
+#: avidemux/gtk_gui.cpp:936
 msgid "Cannot open project using the video loader."
 msgstr "Projekt kann nicht mit dem Video-Lader ge?ffnet werden."
 
-#: avidemux/gtk_gui.cpp:953
+#: avidemux/gtk_gui.cpp:937
 msgid "Try 'File' -> 'Load/Run Project...'"
 msgstr "Versuche 'Datei' -> 'Projekt laden/starten...'"
 
-#: avidemux/gtk_gui.cpp:955
+#: avidemux/gtk_gui.cpp:939
 msgid "Could not open the file"
 msgstr "Datei kann nicht ge?ffnet werden"
 
-#: avidemux/gtk_gui.cpp:989
+#: avidemux/gtk_gui.cpp:973
 msgid "Multiple Audio Tracks"
 msgstr "Mehrere Audio-Spuren"
 
-#: avidemux/gtk_gui.cpp:989
+#: avidemux/gtk_gui.cpp:973
 msgid ""
 "The file you just loaded contains several audio tracks.\n"
 "Go to Audio->MainTrack to select the active one."
@@ -8235,265 +4850,286 @@
 "Die soeben geladene Datei enth?lt mehrere Audio-Spuren.\n"
 "Gehe zu Audio->Hauptspur und w?hle die aktive Spur aus."
 
-#: avidemux/gtk_gui.cpp:1043
+#: avidemux/gtk_gui.cpp:1027
 msgid "No audio decoder found for this file"
 msgstr "Keinen Audio Dekodierer f?r diese Datei gefunden"
 
-#: avidemux/gtk_gui.cpp:1044
+#: avidemux/gtk_gui.cpp:1028
 msgid "Save (A+V) will generate bad AVI. Save audio will work."
-msgstr ""
-"Speichern von (A+V) wird schlechtes AVI erzeugen. Speichern von Audio "
-"arbeitet gut."
+msgstr "Speichern von (A+V) wird schlechtes AVI erzeugen. Speichern von Audio arbeitet gut."
 
-#: avidemux/gtk_gui.cpp:1103
+#: avidemux/gtk_gui.cpp:1087
 msgid "Something failed when appending"
 msgstr "Irgendwas ging schief beim Anh?ngen"
 
-#: avidemux/gtk_gui.cpp:1114 avidemux/gtk_gui.cpp:1944
+#: avidemux/gtk_gui.cpp:1098
+#: avidemux/gtk_gui.cpp:1928
 msgid "Something bad happened (II)"
 msgstr "Irgendwas Schlimmes ist passiert (II)"
 
-#: avidemux/gtk_gui.cpp:1178
+#: avidemux/gtk_gui.cpp:1162
 msgid "Cannot save the audio in copy mode"
 msgstr "Kann im Kopie-Modus kein Audio speichern"
 
-#: avidemux/gtk_gui.cpp:1178
-msgid ""
-"Select WAV PCM as the audio codec, otherwise the audio file would be raw PCM."
-msgstr ""
-"Bitte WAV PCM als Audio Codec ausw?hlen, sonst w?re die Audio-Datei Roh-PCM."
+#: avidemux/gtk_gui.cpp:1162
+msgid "Select WAV PCM as the audio codec, otherwise the audio file would be raw PCM."
+msgstr "Bitte WAV PCM als Audio Codec ausw?hlen, sonst w?re die Audio-Datei Roh-PCM."
 
-#: avidemux/gtk_gui.cpp:1186 avidemux/gtk_gui.cpp:1554
+#: avidemux/gtk_gui.cpp:1170
+#: avidemux/gtk_gui.cpp:1538
 msgid "Saving audio"
 msgstr "Audio speichern"
 
-#: avidemux/gtk_gui.cpp:1263
+#: avidemux/gtk_gui.cpp:1247
 msgid "Get Frame"
 msgstr "Hole Bild"
 
-#: avidemux/gtk_gui.cpp:1263
+#: avidemux/gtk_gui.cpp:1247
 msgid "Cannot get this frame to save"
 msgstr "Kann dieses Bild nicht zum zum Speichern bekommen"
 
-#: avidemux/gtk_gui.cpp:1301
+#: avidemux/gtk_gui.cpp:1285
 msgid "Mark A > B"
 msgstr "Marke A > B"
 
-#: avidemux/gtk_gui.cpp:1301
+#: avidemux/gtk_gui.cpp:1285
 msgid "Set your markers correctly."
 msgstr "Bitte Marken korrekt setzen."
 
-#: avidemux/gtk_gui.cpp:1310
+#: avidemux/gtk_gui.cpp:1294
 msgid "Saving as set of jpegs"
 msgstr "Speichern als Satz von Jpeg-Dateien"
 
-#: avidemux/gtk_gui.cpp:1316
+#: avidemux/gtk_gui.cpp:1300
 msgid "Cannot decode frame"
 msgstr "Kann Bild nicht dekodieren"
 
-#: avidemux/gtk_gui.cpp:1316
+#: avidemux/gtk_gui.cpp:1300
 msgid "Aborting."
 msgstr "Abbruch."
 
-#: avidemux/gtk_gui.cpp:1327 avidemux/gtk_gui.cpp:1346
-#: avidemux/gtk_gui.cpp:2288
+#: avidemux/gtk_gui.cpp:1311
+#: avidemux/gtk_gui.cpp:1330
+#: avidemux/gtk_gui.cpp:2272
 msgid "Done"
 msgstr "Fertig"
 
-#: avidemux/gtk_gui.cpp:1327
+#: avidemux/gtk_gui.cpp:1311
 #, c-format
 msgid "Saved %d images."
 msgstr "%d Bilder gespeichert."
 
-#: avidemux/gtk_gui.cpp:1329
+#: avidemux/gtk_gui.cpp:1313
 msgid "Error"
 msgstr "Fehler"
 
-#: avidemux/gtk_gui.cpp:1329
+#: avidemux/gtk_gui.cpp:1313
 msgid "Could not save all images."
 msgstr "Konnte nicht alle Bilder speichern."
 
-#: avidemux/gtk_gui.cpp:1346
+#: avidemux/gtk_gui.cpp:1330
 #, c-format
 msgid "Saved \"%s\"."
 msgstr "\"%s\" gespeichert."
 
-#: avidemux/gtk_gui.cpp:1348
+#: avidemux/gtk_gui.cpp:1332
 msgid "BMP op failed"
 msgstr "BMP Op. misslungen"
 
-#: avidemux/gtk_gui.cpp:1348
+#: avidemux/gtk_gui.cpp:1332
 #, c-format
 msgid "Saving %s as a BMP file failed."
 msgstr "Speichern von %s als BMP-Datei ist misslungen."
 
-#: avidemux/gtk_gui.cpp:1370 avidemux/gtk_gui.cpp:1436
+#: avidemux/gtk_gui.cpp:1354
+#: avidemux/gtk_gui.cpp:1420
 msgid "Failed to open the file"
 msgstr "?ffnen der Datei gescheitert"
 
-#: avidemux/gtk_gui.cpp:1370 avidemux/gtk_gui.cpp:1436
+#: avidemux/gtk_gui.cpp:1354
+#: avidemux/gtk_gui.cpp:1420
 msgid "Not a WAV file?"
 msgstr "Keine WAV-Datei?"
 
-#: avidemux/gtk_gui.cpp:1371
+#: avidemux/gtk_gui.cpp:1355
 msgid "WAV open file failed..."
 msgstr "?ffnen der WAV Datei gescheitert"
 
-#: avidemux/gtk_gui.cpp:1508
+#: avidemux/gtk_gui.cpp:1492
 msgid "Cannot decompress audio frame"
 msgstr "Kann Audio nicht dekomprimieren"
 
-#: avidemux/gtk_gui.cpp:1522
+#: avidemux/gtk_gui.cpp:1506
 msgid "Memory Error"
 msgstr "Speicherfehler"
 
-#: avidemux/gtk_gui.cpp:1575
+#: avidemux/gtk_gui.cpp:1559
 msgid "No frames to encode"
 msgstr "Keine Bilder zum Kodieren"
 
-#: avidemux/gtk_gui.cpp:1575
+#: avidemux/gtk_gui.cpp:1559
 msgid "Please check markers. Is \"A>\" == \">B\"?"
 msgstr "Bitte Marken ?berpr?fen. Ist \"A>\" == \">B\"?"
 
-#: avidemux/gtk_gui.cpp:1714
+#: avidemux/gtk_gui.cpp:1698
 msgid "Saving raw video stream"
 msgstr "Rohe Videodaten speichern"
 
-#: avidemux/gtk_gui.cpp:1860
+#: avidemux/gtk_gui.cpp:1844
 msgid "Checking video"
 msgstr "Video pr?fen"
 
-#: avidemux/gtk_gui.cpp:1876
+#: avidemux/gtk_gui.cpp:1860
 msgid "No error found"
 msgstr "Keinen Fehler gefunden"
 
-#: avidemux/gtk_gui.cpp:1880
+#: avidemux/gtk_gui.cpp:1864
 #, c-format
 msgid "Errors found in %u frames"
 msgstr "Fehler wurden in %u Bildern gefunden"
 
-#: avidemux/gtk_gui.cpp:1898
+#: avidemux/gtk_gui.cpp:1882
 msgid "Cannot decompress the audio stream"
 msgstr "Kann Audio-Strom nicht dekomprimieren"
 
-#: avidemux/gtk_gui.cpp:1898
+#: avidemux/gtk_gui.cpp:1882
 msgid "Switch audio codec to Copy."
 msgstr "Schalte Audio-Codec um nach Kopie."
 
-#: avidemux/gtk_gui.cpp:1925
+#: avidemux/gtk_gui.cpp:1909
 msgid "Cannot delete the selection."
 msgstr "Die Auswahl kann nicht gel?scht werden."
 
-#: avidemux/gtk_gui.cpp:1930
+#: avidemux/gtk_gui.cpp:1914
 msgid "You can't remove all frames"
 msgstr "Es k?nnen nicht alle Bilder entfernt werden"
 
-#: avidemux/gtk_gui.cpp:2006
+#: avidemux/gtk_gui.cpp:1921
+#: avidemux/gtk_gui.cpp:2543
+msgid "Something bad happened"
+msgstr "Irgendwas Schlimmes ist passiert"
+
+#: avidemux/gtk_gui.cpp:1990
 msgid "Could not get tracks info"
 msgstr "Konnte keine Spur-Infos bekommen"
 
-#: avidemux/gtk_gui.cpp:2014
+#: avidemux/gtk_gui.cpp:1998
 msgid "Take audio from video file"
 msgstr "Audio-Spur von der Video-Datei nehmen"
 
-#: avidemux/gtk_gui.cpp:2015 avidemux/gtk_gui.cpp:2114
+#: avidemux/gtk_gui.cpp:1999
+#: avidemux/gtk_gui.cpp:2098
 msgid "No audio"
 msgstr "Keine Audio-Spur"
 
-#: avidemux/gtk_gui.cpp:2016 avidemux/gtk_gui.cpp:2115
+#: avidemux/gtk_gui.cpp:2000
+#: avidemux/gtk_gui.cpp:2099
 msgid "External AC3"
 msgstr "Externes AC3"
 
-#: avidemux/gtk_gui.cpp:2016 avidemux/gtk_gui.cpp:2115
+#: avidemux/gtk_gui.cpp:2000
+#: avidemux/gtk_gui.cpp:2099
 msgid "Take audio from external AC3 file"
 msgstr "Audio-Spur von externer AC3-Datei ?bernehmen"
 
-#: avidemux/gtk_gui.cpp:2017 avidemux/gtk_gui.cpp:2116
+#: avidemux/gtk_gui.cpp:2001
+#: avidemux/gtk_gui.cpp:2100
 msgid "External MP3"
 msgstr "Externe MP3"
 
-#: avidemux/gtk_gui.cpp:2017 avidemux/gtk_gui.cpp:2116
+#: avidemux/gtk_gui.cpp:2001
+#: avidemux/gtk_gui.cpp:2100
 msgid "Take audio from external MP3 file"
 msgstr "Audio-Spur von externer MP3-Datei ?bernehmen"
 
-#: avidemux/gtk_gui.cpp:2018 avidemux/gtk_gui.cpp:2117
+#: avidemux/gtk_gui.cpp:2002
+#: avidemux/gtk_gui.cpp:2101
 msgid "External WAV"
 msgstr "Externe WAV"
 
-#: avidemux/gtk_gui.cpp:2018 avidemux/gtk_gui.cpp:2117
+#: avidemux/gtk_gui.cpp:2002
+#: avidemux/gtk_gui.cpp:2101
 msgid "Take audio from external WAV file"
 msgstr "Audio-Spur von externer WAV-Datei ?bernehmen"
 
-#: avidemux/gtk_gui.cpp:2022 avidemux/gtk_gui.cpp:2122
+#: avidemux/gtk_gui.cpp:2006
+#: avidemux/gtk_gui.cpp:2106
 msgid "_Audio source:"
 msgstr "_Audio Quelle:"
 
-#: avidemux/gtk_gui.cpp:2026 avidemux/gtk_gui.cpp:2123
+#: avidemux/gtk_gui.cpp:2010
+#: avidemux/gtk_gui.cpp:2107
 msgid "_External file:"
 msgstr "_Externe Datei:"
 
-#: avidemux/gtk_gui.cpp:2041
+#: avidemux/gtk_gui.cpp:2019
+#, c-format
+msgid "Audio track %d (%s/%d channels/%d kbit per s/%d ms shift)"
+msgstr "Audio Stur %d (%s/%d Kan?le/%d kbit pro s/%d ms Verschiebung)"
+
+#: avidemux/gtk_gui.cpp:2025
 msgid "_Track from video:"
 msgstr "_Spur vom Video:"
 
-#: avidemux/gtk_gui.cpp:2051
+#: avidemux/gtk_gui.cpp:2035
 msgid "Main Audio Track"
 msgstr "Haupt-Audio-Spur"
 
-#: avidemux/gtk_gui.cpp:2057 avidemux/gtk_gui.cpp:2135
+#: avidemux/gtk_gui.cpp:2041
+#: avidemux/gtk_gui.cpp:2119
 msgid "Cannot load"
 msgstr "Kann nicht laden"
 
-#: avidemux/gtk_gui.cpp:2057 avidemux/gtk_gui.cpp:2135
+#: avidemux/gtk_gui.cpp:2041
+#: avidemux/gtk_gui.cpp:2119
 msgid "The selected audio file does not exist."
 msgstr "Die ausgew?hlte Audiodatei existiert nicht."
 
-#: avidemux/gtk_gui.cpp:2132
+#: avidemux/gtk_gui.cpp:2116
 msgid "Second Audio Track"
 msgstr "Zweite Audio-Spur"
 
-#: avidemux/gtk_gui.cpp:2164
+#: avidemux/gtk_gui.cpp:2148
 msgid "Error loading the MP3 file"
 msgstr "Fehler beim Laden der MP3 Datei"
 
-#: avidemux/gtk_gui.cpp:2173 avidemux/gtk_gui.cpp:2195
-#: avidemux/gtk_gui.cpp:2217
+#: avidemux/gtk_gui.cpp:2157
+#: avidemux/gtk_gui.cpp:2179
+#: avidemux/gtk_gui.cpp:2201
 msgid "Second track loaded"
 msgstr "Zweite Spur geladen"
 
-#: avidemux/gtk_gui.cpp:2187
+#: avidemux/gtk_gui.cpp:2171
 msgid "Error loading the AC3 file"
 msgstr "Fehler beim Laden der AC3 Datei"
 
-#: avidemux/gtk_gui.cpp:2209
+#: avidemux/gtk_gui.cpp:2193
 msgid "Error loading the WAV file"
 msgstr "Fehler beim Laden der WAV Datei"
 
-#: avidemux/gtk_gui.cpp:2276
+#: avidemux/gtk_gui.cpp:2260
 msgid "Saving failed"
 msgstr "Speichern gescheitert"
 
-#: avidemux/gtk_gui.cpp:2276
+#: avidemux/gtk_gui.cpp:2260
 msgid "Saving the job failed. Maybe you have permission issue with ~/.avidemux"
-msgstr ""
-"Speichern des Jobs misslungen. Vielleicht bestehen Rechte-Probleme mit  ~/."
-"avidemux"
+msgstr "Speichern des Jobs misslungen. Vielleicht bestehen Rechte-Probleme mit  ~/.avidemux"
 
-#: avidemux/gtk_gui.cpp:2288
+#: avidemux/gtk_gui.cpp:2272
 #, c-format
 msgid "File %s has been successfully saved."
 msgstr "Datei %s wurde erfolgreich gespeichert."
 
-#: avidemux/gtk_gui.cpp:2292
+#: avidemux/gtk_gui.cpp:2276
 #, c-format
 msgid "File %s was NOT saved correctly."
 msgstr "Datei %s wurde NICHT korrekt gespeichert."
 
-#: avidemux/gtk_gui.cpp:2458
+#: avidemux/gtk_gui.cpp:2442
 msgid "AvsProxy"
 msgstr "Avs-Proxy"
 
-#: avidemux/gtk_gui.cpp:2458
+#: avidemux/gtk_gui.cpp:2442
 msgid ""
 "Failed to connect to avsproxy.\n"
 "Is it running ?"
@@ -8501,59 +5137,87 @@
 "Fehler beim Verbinden mit Avs-Proxy.\n"
 "L?uft es ?"
 
-#: avidemux/gtk_gui.cpp:2463
+#: avidemux/gtk_gui.cpp:2447
 msgid "avsproxy"
 msgstr "avsproxy"
 
-#: avidemux/gtk_gui.cpp:2491
+#: avidemux/gtk_gui.cpp:2475
 msgid "Frame type:"
 msgstr "Bildtyp:"
 
-#: avidemux/gtk_gui.cpp:2492
+#: avidemux/gtk_gui.cpp:2476
 msgid "Frame size:"
 msgstr "Bildgr??e:"
 
-#: avidemux/gtk_gui.cpp:2494
+#: avidemux/gtk_gui.cpp:2478
 msgid "Frame Hex Dump"
 msgstr "Bild hexadez. Abbild"
 
-#: avidemux/guiplay.cpp:359
-msgid "Trouble initializing audio device"
-msgstr "Probleme beim Initialisieren des Audio-Ger?tes"
+#: avidemux/gtk_gui.cpp:2529
+msgid "Memory error"
+msgstr "Speicherfehler"
 
-#: avidemux/gui_autodrive.cpp:52
+#: avidemux/gtk_gui.cpp:2536
+msgid "Error converting to BMP"
+msgstr "Fehler beim Konvertieren nach BMP"
+
+#: avidemux/gtk_gui.cpp:2598
+msgid "Cannot encode the frame"
+msgstr "Kann Bild nicht kodieren"
+
+#: avidemux/GUI_jobs.cpp:37
+msgid "Oops"
+msgstr "Oops"
+
+#: avidemux/GUI_jobs.cpp:37
+msgid "Something very wrong happened when building joblist."
+msgstr "Irgendwas ganz Falsches ist passiert beim Erstellen der Job-Liste"
+
+#: avidemux/GUI_jobs.cpp:42
+msgid "There are no jobs stored"
+msgstr "Es wurden keine Jobs gespeichert"
+
+#: avidemux/gui_autodrive.cpp:48
 msgid "No audio track"
 msgstr "Keine Audio-Spur"
 
-#: avidemux/gui_autodrive.cpp:52
+#: avidemux/gui_autodrive.cpp:48
 msgid "An audio track is necessary to create such file"
 msgstr "Eine Audio-Spur ist f?r das Erzeugen einer solchen Datei erforderlich"
 
-#: avidemux/gui_autodrive.cpp:63
-msgid "Xvid4 and FAAC support is required for the iPod profile."
-msgstr ""
-
-#: avidemux/gui_autodrive.cpp:72
+#: avidemux/gui_autodrive.cpp:64
 msgid "Cannot select the MPEG-4 SP codec."
 msgstr "Der MPEG-4 SP Codec kann nicht ausgew?hlt werden."
 
-#: avidemux/gui_autodrive.cpp:114
+#: avidemux/gui_autodrive.cpp:78
+msgid "No AAC audio encoder plugin found."
+msgstr "Kein AAC Audio Kodierer Plugin gefunden."
+
+#: avidemux/gui_autodrive.cpp:110
 msgid ""
+"The MP3 codec does not allow disabling reservoir.\n"
+"Install lame plugin"
+msgstr ""
+"Der MP3 Codec erlaubt kein Deaktivieren des Zwischenspeichers.\n"
+"Installiere das Lame Plugin"
+
+#: avidemux/gui_autodrive.cpp:116
+msgid ""
 "You don't have LAME!.\n"
 "It is needed to create FLV  video."
 msgstr ""
 "LAME nicht vorhanden!\n"
 "Es wird f?r die Erstellung von FLV Videos ben?tigt."
 
-#: avidemux/gui_autodrive.cpp:128
+#: avidemux/gui_autodrive.cpp:130
 msgid "Cannot select FLV1  codec."
 msgstr "Der FLV1 Codec kann nicht ausgew?hlt werden."
 
-#: avidemux/gui_autodrive.cpp:155
+#: avidemux/gui_autodrive.cpp:157
 msgid "Cannot select mpeg4 sp codec."
 msgstr "Der MPEG-4 SP Codec kann nicht ausgew?hlt werden."
 
-#: avidemux/gui_autodrive.cpp:190
+#: avidemux/gui_autodrive.cpp:193
 msgid ""
 "You don't have FAAC!.\n"
 "It is needed to create PSP compatible video."
@@ -8561,117 +5225,1851 @@
 "FAAC nicht vorhanden!\n"
 "Es wird f?r die Erstellung von PSP Videos ben?tigt."
 
-#: avidemux/GUI_jobs.cpp:37
-msgid "Something very wrong happened when building joblist."
-msgstr "Irgendwas ganz Falsches ist passiert beim Erstellen der Job-Liste"
+#: avidemux/guiplay.cpp:352
+msgid "Trouble initializing audio device"
+msgstr "Probleme beim Initialisieren des Audio-Ger?tes"
 
-#: avidemux/GUI_jobs.cpp:42
-msgid "There are no jobs stored"
-msgstr "Es wurden keine Jobs gespeichert"
-
-#: avidemux/gui_navigate.cpp:73 avidemux/gui_navigate.cpp:111
-#: avidemux/gui_navigate.cpp:393 avidemux/gui_navigate.cpp:429
-msgid "Decompressing error"
-msgstr "Dekompressions-Fehler"
-
-#: avidemux/gui_navigate.cpp:73
-msgid "Cannot decode next frame."
-msgstr "Kann n?chstes Bild nicht dekodieren."
-
-#: avidemux/gui_navigate.cpp:111 avidemux/gui_navigate.cpp:429
-msgid "Cannot decode keyframe."
-msgstr "Kann I-Bild (keyframe) nicht dekodieren."
-
-#: avidemux/gui_navigate.cpp:237
-msgid "Seeking"
-msgstr "Suche..."
-
-#: avidemux/gui_navigate.cpp:318
-msgid "Finding black frames"
-msgstr "Finde schwarze Bilder "
-
-#: avidemux/gui_navigate.cpp:393
-msgid "Cannot decode the frame."
-msgstr "Kann Bild nicht dekodieren."
-
-#: avidemux/gui_savenew.cpp:89
+#: avidemux/gui_savenew.cpp:79
 msgid "Dual audio can only be used in copy mode"
 msgstr "Doppel-Audio kann nur im Kopie-Modus benutzt werden"
 
-#: avidemux/gui_savenew.cpp:89
+#: avidemux/gui_savenew.cpp:79
 msgid "Select Copy as the video codec."
 msgstr "Kopie als Video Codec ausw?hlen."
 
-#: avidemux/gui_savenew.cpp:209 avidemux/gui_savenew.cpp:225
-#: avidemux/gui_savenew.cpp:238
+#: avidemux/gui_savenew.cpp:199
+#: avidemux/gui_savenew.cpp:215
+#: avidemux/gui_savenew.cpp:228
 msgid "Incompatible output format"
 msgstr "Inkompatibles Ausgabeformat"
 
-#: avidemux/gui_savenew.cpp:259
+#: avidemux/gui_savenew.cpp:249
 msgid "There is no second track"
 msgstr "Es gibt keine zweite Audio Spur."
 
-#: avidemux/gui_savenew.cpp:259
+#: avidemux/gui_savenew.cpp:249
 msgid "Select a second audio track in the Audio menu."
 msgstr "Zweite Audio-Spur im Men? Audio ausw?hlen."
 
-#: avidemux/gui_savenew.cpp:263
+#: avidemux/gui_savenew.cpp:253
 msgid "Select dual audio AVI to write"
 msgstr "Zu schreibende Zweifach-Audio AVI-Datei ausw?hlen"
 
 # what is the real meaning here?
-#: avidemux/gui_savenew.cpp:285 avidemux/gui_savenew.cpp:303
+#: avidemux/gui_savenew.cpp:275
+#: avidemux/gui_savenew.cpp:293
 msgid "This cannot have packed VOP"
 msgstr "Dies kann VOP nicht gepackt haben"
 
-#: avidemux/gui_savenew.cpp:285 avidemux/gui_savenew.cpp:303
+#: avidemux/gui_savenew.cpp:275
+#: avidemux/gui_savenew.cpp:293
 msgid "It is not MPEG-4 video. File will not be saved."
 msgstr "Das ist kein MPEG-4 Video. Datei wird nicht gespeichert."
 
-#: avidemux/gui_savenew.cpp:349
+#: avidemux/gui_savenew.cpp:339
 msgid ""
 "You may need smart copy.\n"
-" Enable it ?"
+"Enable it?"
 msgstr ""
 "Eventuell ist sanftes Kopieren erforderlich.\n"
 " Aktivieren?"
 
+#: avidemux/gui_savenew.cpp:342
+msgid "_Q factor (set 4):"
+msgstr "_Q Faktor (aktuell 4):"
+
+#~ msgid "Y800 (lavc)"
+#~ msgstr "Y800 (lavc)"
+#~ msgid "MPEG-4 AVC (x264)"
+#~ msgstr "MPEG-4 AVC (x264)"
+#~ msgid "Y800"
+#~ msgstr "Y800"
+#~ msgid "Cannot open AMR codec."
+#~ msgstr "AMR Codec kann nicht ge?ffnet werden."
+#~ msgid "Joint stereo"
+#~ msgstr "Stereo verbunden"
+#~ msgid "C_hannel mode:"
+#~ msgstr "Ka_nal Modus:"
+#~ msgid "CBR"
+#~ msgstr "CBR"
+#~ msgid "ABR"
+#~ msgstr "ABR"
+#~ msgid "Extreme"
+#~ msgstr "Extrem"
+#~ msgid "Bit_rate mode:"
+#~ msgstr "Bit_rate Modus:"
+#~ msgid "_Bitrate:"
+#~ msgstr "_Bitrate (kb/s):"
+#~ msgid "_Disable reservoir"
+#~ msgstr "Speicher _deaktivieren"
+#~ msgid "LAME Configuration"
+#~ msgstr "LAME Konfiguration"
+#~ msgid "VBR"
+#~ msgstr "VBR"
+#~ msgid "Quality based"
+#~ msgstr "qualit?tsbasiert"
+#~ msgid "_Mode:"
+#~ msgstr "_Modus:"
+#~ msgid "Vorbis Configuration"
+#~ msgstr "Vorbis Konfiguration"
+#~ msgid "Hue"
+#~ msgstr "Farbton"
+#~ msgid "Hue/Saturation"
+#~ msgstr "Farbton/S?ttigung"
+#~ msgid "<b>Hue:</b>"
+#~ msgstr "<b>Farbton:</b>"
+#~ msgid "<b>Saturation:</b>"
+#~ msgstr "<b>S?ttigung:</b>"
+#~ msgid "ColorYuv (From avisynth)"
+#~ msgstr "Yuv-Farben (von AviSynth)"
+#~ msgid "Contrast"
+#~ msgstr "Kontrast"
+#~ msgid "Brightness"
+#~ msgstr "Helligkeit"
+#~ msgid "Gamma"
+#~ msgstr "Gamma"
+#~ msgid "Luma Y"
+#~ msgstr "Brillianz Y"
+#~ msgid "Chroma U"
+#~ msgstr "Farbintensit?t U"
+#~ msgid "Chroma V"
+#~ msgstr "Farbintensit?t V"
+#~ msgid "<b>Color Correction Matrix</b>"
+#~ msgstr "<b>Farbkorrektur Matrix</b>"
+#~ msgid "Matrix"
+#~ msgstr "Matrix"
+#~ msgid "Opt"
+#~ msgstr "Opt"
+#~ msgid "Level"
+#~ msgstr "Stufe"
+#~ msgid "Rec.709"
+#~ msgstr "Rec.709"
+#~ msgid "Coring"
+#~ msgstr "Kern"
+#~ msgid "TV->PC"
+#~ msgstr "TV->PC"
+#~ msgid "PC->TV"
+#~ msgstr "PC->TV"
+#~ msgid "PC->TV.Y"
+#~ msgstr "PC->TV.Y"
+#~ msgid ""
+#~ "<b>Matrix Warning :</b>\n"
+#~ "all above values are normalized to 256!"
+#~ msgstr ""
+#~ "<b>Matrix Warnung :</b>\n"
+#~ "alle dar?ber liegenden Werte werden auf 256 normalisiert!"
+#~ msgid "AutoGain"
+#~ msgstr "Auto-Verst?rkung"
+#~ msgid "Display Stats"
+#~ msgstr "Anzeigestatus"
+#~ msgid "AutoWhite"
+#~ msgstr "Auto-Wei?"
+#~ msgid "<b>frame2</b>"
+#~ msgstr "<b>Bild2</b>"
+#~ msgid "MPlayer eq2"
+#~ msgstr "MPlayer eq2"
+#~ msgid "Brigh_tness:"
+#~ msgstr "Helligkei_t:"
+#~ msgid "_Saturation:"
+#~ msgstr "_S?ttigung:"
+#~ msgid "_Contrast:"
+#~ msgstr "_Kontrast:"
+#~ msgid "_Initial:"
+#~ msgstr "Anfangswert:"
+#~ msgid "_Red:"
+#~ msgstr "_Rot:"
+#~ msgid "_Green:"
+#~ msgstr "_Gr?n:"
+#~ msgid "_Blue:"
+#~ msgstr "_Blau:"
+#~ msgid "_Weight:"
+#~ msgstr "Ge_wichtung:"
+#~ msgid "<b>Gamma</b>"
+#~ msgstr "<b>Gamma</b>"
+#~ msgid "Select Xvid matrix file to load"
+#~ msgstr "Zu ladende Xvid Matrix-Datei ausw?hlen"
+#~ msgid "Error Loading"
+#~ msgstr "Ladefehler"
+#~ msgid "Error loadind the custom matrix file."
+#~ msgstr "Fehler beim Laden der individuellen Matrix-Datei"
+#~ msgid "Matrix Loaded"
+#~ msgstr "Matrix wurde geladen"
+#~ msgid "The custom matrix file has been successfully loaded."
+#~ msgstr "Die individuelle Matrix-Datei wurde erfolgreich geladen."
+#~ msgid "Size (MBytes):"
+#~ msgstr "Gr??e (MByte):"
+#~ msgid "Average bitrate (kb/s):"
+#~ msgstr "Durchschnittl. Bitrate (kb/s):"
+#~ msgid "Target bitrate (kb/s):"
+#~ msgstr "Ziel-Bitrate (kb/s):"
+#~ msgid "Target video size (MB):"
+#~ msgstr "Ziel-Videogr??e (MBytes):"
+#~ msgid "Select Custom Matrix File to write"
+#~ msgstr "Individuelle Matrix-Datei zum Schreiben ausw?hlen"
+#~ msgid "Error Writing"
+#~ msgstr "Schreibfehler"
+#~ msgid "Error writing the custom matrix file."
+#~ msgstr "Fehler beim Schreiben der indivuellen Matrix-Datei."
+#~ msgid "XviD encoding options"
+#~ msgstr "XviD Kodierer Optionen"
+#~ msgid "Encoding type:"
+#~ msgstr "Kodier-Modus:"
+#~ msgid "Bitrate (kb/s):"
+#~ msgstr "Bitrate (kb/s):"
+#~ msgid "Quantizer:"
+#~ msgstr "Quantizer:"
+#~ msgid "Select 1-pass or 2-pass encoding"
+#~ msgstr "EInfach- oder Zweifach-Durchlauf beim Kodieren ausw?hlen"
+#~ msgid "Single Pass - Bitrate"
+#~ msgstr "Einfach-Durchlauf - Bitrate"
+#~ msgid "Single Pass - Quantizer"
+#~ msgstr "Einfach-Durchlauf - Quantizer"
+#~ msgid "Two Pass - Video Size"
+#~ msgstr "Zweifach-Durchlauf - Videogr??e"
+#~ msgid "Two Pass - Average Bitrate"
+#~ msgstr "Zweifach-Durchlauf - Durchschnittsbitrate"
+#~ msgid "Same Quantizer as Input"
+#~ msgstr "Gleicher Quantizer wie Eingang"
+#~ msgid "Target video bitrate"
+#~ msgstr "Ziel-Video-Bitrate (kb/s)"
+#~ msgid "Constant quantizer - each frame will get the same compression"
+#~ msgstr "Konstanter Quantizer - jedes Bild erh?lt die gleiche Kompression"
+#~ msgid "Variable bitrate mode"
+#~ msgstr "Variabler Bitraten-Modus (VBR)"
+#~ msgid "_Interlaced"
+#~ msgstr "Halbb_ildmodus"
+#~ msgid ""
+#~ "Enables interlaced frame support - use only if your source contains "
+#~ "interlacing artifacts (i.e. fields instead of progressive frames)"
+#~ msgstr ""
+#~ "Aktiviert Halbbildmodus-Unterst?tzung (interlaced) - bitte nur benutzen, "
+#~ "wenn die Quelle halbbildtypische Artefakte enth?lt (z.B. Felder/"
+#~ "Halbbilder statt Vollbilder)"
+#~ msgid "_Greyscale"
+#~ msgstr "_Grauskala"
+#~ msgid "Encode in black & white"
+#~ msgstr "Schwarz & Wei? kodieren"
+#~ msgid "Ca_rtoon mode"
+#~ msgstr "Ca_rtoon Modus"
+#~ msgid "Enables special motion estimation features for cartoons/anime"
+#~ msgstr ""
+#~ "Aktiviert spezielle M?glichkeiten zur Bewegungsabsch?tzung f?r Cartoons / "
+#~ "Anime (jp.)"
+#~ msgid "C_hroma optimizer"
+#~ msgstr "Farbintensit?ts-Optimierer"
+#~ msgid "Enables a chroma optimizer prefilter"
+#~ msgstr "Optimier-Vorfilter f?r Farbintensit?t aktivieren"
+#~ msgid "Turbo Mode"
+#~ msgstr "Turbo Modus"
+#~ msgid "Enables fast 1st pass encoding"
+#~ msgstr "Schnelles Kodieren im 1. Durchlauf aktivieren"
+#~ msgid "Packed bitstream"
+#~ msgstr "Gepackter Bitstrom"
+#~ msgid "Enables Divx like packed vop, DO NOT SET, it is ugly"
+#~ msgstr ""
+#~ "Aktiviert DivX-?hnliche gepackte VOP (NICHT verwenden! Schaut h?sslich "
+#~ "aus)."
+#~ msgid "Main"
+#~ msgstr "Hauptteil"
+#~ msgid "Motion search precision:"
+#~ msgstr "Bewegungssuche Genauigkeit:"
+#~ msgid "VHQ mode:"
+#~ msgstr "VHQ Modus:"
+#~ msgid ""
+#~ "Higher settings give higher quality results, at the cost of slower "
+#~ "encoding"
+#~ msgstr ""
+#~ "H?here Einstellungen ergeben Ergebnisse mit h?herer Qualit?t auf Kosten "
+#~ "einer langsameren Kodierung."
+#~ msgid "0 - None"
+#~ msgstr "0 - Keine"
+#~ msgid "1 - Very low"
+#~ msgstr "1 - Sehr niedrig"
+#~ msgid "2 - Low"
+#~ msgstr "2 - Niedrig"
+#~ msgid "3 - Medium"
+#~ msgstr "3 - Mittel"
+#~ msgid "4 - High"
+#~ msgstr "4 - Hoch"
+#~ msgid "5 - Very high"
+#~ msgstr "5 - Sehr hoch"
+#~ msgid "6 - Ultra high"
+#~ msgstr "6 - Ultra hoch"
+#~ msgid "VHQ enables an additional search process to increase quality"
+#~ msgstr ""
+#~ "VHQ aktiviert einen zus?tzlichen Suchprozess, um die Qualit?t zu erh?hen."
+#~ msgid "0 - Off"
+#~ msgstr "0 - Aus"
+#~ msgid "1 - Mode decision"
+#~ msgstr "1 - Modus Entscheidung"
+#~ msgid "2 - Limited search"
+#~ msgstr "2 - Begrenzte Suche"
+#~ msgid "3 - Medium search"
+#~ msgstr "3 - Mittlere Suche"
+#~ msgid "4 - Wide search"
+#~ msgstr "4 - Weite Suche"
+#~ msgid "C_hroma motion"
+#~ msgstr "Farbintensit?ts-Bewegung"
+#~ msgid "Use chroma information to estimate motion"
+#~ msgstr ""
+#~ "Informationen der Farbintensit?t zur Absch?tzung der Bewegung verwenden"
+#~ msgid "_4MV"
+#~ msgstr "_4MV"
+#~ msgid "Use 4 motion vectors per macroblock, might give better compression"
+#~ msgstr ""
+#~ "4 Bewegungsvektoren je Makroblock verwenden, k?nnte eine bessere "
+#~ "Kompression ergeben"
+#~ msgid "HQ _AC"
+#~ msgstr "HQ _AC"
+#~ msgid ""
+#~ "Enable a better prediction of AC component. Turns on Lumi masking - "
+#~ "applies more compression to dark/light areas that the eye cannot notice "
+#~ "easily"
+#~ msgstr ""
+#~ "Eine bessere Vorhersage von AC Komponenten aktivieren. Damit wird "
+#~ "Brillianz-Maskierung eingeschaltet - wendet eine h?here Kompression f?r "
+#~ "dunkle/helle Bereiche an, die das Auge kaum wahrnehmen kann"
+#~ msgid "I-frame interval - Min:"
+#~ msgstr "I-Bild Intervall - Min:"
+#~ msgid ""
+#~ "Minimum space between I-frames, 1 will disable forced I-frame spacing"
+#~ msgstr ""
+#~ "Minimaler Abstand zwischen I-Bildern, '1' deaktiviert erzwungenen I-Bild "
+#~ "Abstand"
+#~ msgid "Max:"
+#~ msgstr "Max:"
+#~ msgid "Maximum number of frames allowed between I-frames"
+#~ msgstr "Maximale Anzahl von erlaubten Bildern zwischen I-Bildern"
+#~ msgid "Number of B-frames:"
+#~ msgstr "Anzahl von B-Bildern:"
+#~ msgid ""
+#~ "Maximum number of sequential B-frames (when set to 0, the original I/P "
+#~ "encoder is used)"
+#~ msgstr ""
+#~ "Maximale Anzahl von sequenziellen B-Bildern (wenn '0' wird der originale "
+#~ "I/P Kodierer genutzt)"
+#~ msgid "_Qpel"
+#~ msgstr "_Qpel"
+#~ msgid "Use Quarter pixel resolution for a more precise motion estimation"
+#~ msgstr ""
+#~ "Verwende Viertel-Pixel-Aufl?sung (Qpel) f?r pr?zisere Bewegungsabsch?tzung"
+#~ msgid ""
+#~ "Global Motion Compensation can save bits on camera pans, zooming and "
+#~ "rotation"
+#~ msgstr ""
+#~ "Global Motion Compensation (GMC) kann Bits sparen (z.B. bei Kamera-"
+#~ "Schwenk, Zoom, Rotation)"
+#~ msgid "_BVHQ"
+#~ msgstr "_BVHQ"
+#~ msgid "Produces nicer-looking B-frames"
+#~ msgstr "Erzeugt sch?nere B-Bilder"
+#~ msgid "As Input"
+#~ msgstr "Wie Eingang"
+#~ msgid "Get PAR from input video file"
+#~ msgstr "PAR der Eingangs-Video-Datei holen"
+#~ msgid "Pixel Width"
+#~ msgstr "Pixel Breite"
+#~ msgid ":"
+#~ msgstr ":"
+#~ msgid "Pixel Height"
+#~ msgstr "Pixel H?he"
+#~ msgid "Pixel Aspect Ratio"
+#~ msgstr "Pixel Seitenverh?ltnis (PAR)"
+#~ msgid "Motion & Misc"
+#~ msgstr "Bewegung & Sonstiges"
+#~ msgid "Quantization type:"
+#~ msgstr "Quantization Typ:"
+#~ msgid "_H.263"
+#~ msgstr "_H.263"
+#~ msgid "H.263 quantizers smooth the picture (useful at lower bitrates)"
+#~ msgstr "H.263 Quantizer gl?ttet das Bild (n?tzlich bei niedriger Bitrate)"
+#~ msgid "_MPEG"
+#~ msgstr "_MPEG"
+#~ msgid ""
+#~ "MPEG quantizers (slightly slower) produce sharper picture (useful at "
+#~ "higher bitrates)"
+#~ msgstr ""
+#~ "MPEG Quantizer (etwas langsamer) erzeugt sch?rfere Bilder (gut bei "
+#~ "h?heren Bitraten)"
+#~ msgid "_Custom Matrix"
+#~ msgstr "_Individuelle Matrix"
+#~ msgid "Load Custom Matrix:  "
+#~ msgstr "Individuelle Matrix laden:"
+#~ msgid "Open CQM file"
+#~ msgstr "?ffne CQM Datei"
+#~ msgid "Edit Custom Matrix"
+#~ msgstr "Individuelle Matrix bearbeiten"
+#~ msgid "I-frame quantizer - Min:"
+#~ msgstr "I-Bild Quantizer - Min:"
+#~ msgid "P-frame quantizer - Min:"
+#~ msgstr "P-Bild Quantizer - Min:"
+#~ msgid "B-frame quantizer - Min:"
+#~ msgstr "B-Bild Quantizer - Min:"
+#~ msgid "Minimum quantizer allowed for I-frames"
+#~ msgstr "Minimal erlaubter Quantizer f?r I-Bilder"
+#~ msgid "Minimum quantizer allowed for P-frames"
+#~ msgstr "Minimal erlaubter Quantizer f?r P-Bilder"
+#~ msgid "Minimum quantizer allowed for B-frames"
+#~ msgstr "Minimal erlaubter Quantizer f?r B-Bilder"
+#~ msgid "Maximum quantizer allowed for I-frames"
+#~ msgstr "Maximal erlaubter Quantizer f?r I-Bilder"
+#~ msgid "Maximum quantizer allowed for P-frames"
+#~ msgstr "Maximal erlaubter Quantizer f?r P-Bilder"
+#~ msgid "Maximum quantizer allowed for B-frames"
+#~ msgstr "Maximal erlaubter Quantizer f?r B-Bilder"
+#~ msgid "Quantizer restrictions"
+#~ msgstr "Quantizer Beschr?nkungen"
+#~ msgid ""
+#~ "Rate distortion quantization, will find optimal encoding for each block"
+#~ msgstr ""
+#~ "Verzerrungsabh?ngige Quantization, findet die optimale Kodierung f?r "
+#~ "jeden Block"
+#~ msgid "I-frame boost (%):"
+#~ msgstr "I-Bild Erh?hung (%):"
+#~ msgid "I-frames closer than ... frames..."
+#~ msgstr "I-Bilder sind n?her als ... Bilder..."
+#~ msgid "...are reduced by (%):"
+#~ msgstr "...wurden reduziert mit (%):"
+#~ msgid "Max overflow improvement (%):"
+#~ msgstr "Max. ?berlauf-Verbesserung (%):"
+#~ msgid "Max overflow degradation (%):"
+#~ msgstr "Max. ?berlauf-Verschlechterung (%):"
+#~ msgid "A value of 20 will give 20% more bits to every I-frame"
+#~ msgstr "Ein Wert von 20 ergibt 20% mehr Bits je I-Bild"
+#~ msgid ""
+#~ "I-frames appearing in the range below this value will be treated as "
+#~ "consecutive keyframes"
+#~ msgstr ""
+#~ "I-Bilder, die im Bereich unterhalb dieses Wertes erscheinen, werden als "
+#~ "aufeinander folgende I-Bilder (keyframes) behandelt"
+#~ msgid ""
+#~ "Reduction of bitrate for the first consecutive I-frames. The last I-frame "
+#~ "will get treated normally"
+#~ msgstr ""
+#~ "Reduzierung der Bitrate f?r die ersten aufeinander folgenden I-Bilder. "
+#~ "Das letzte I-Bild wird normal behandelt"
+#~ msgid ""
+#~ "How much of the overflow the codec can eat into during undersized "
+#~ "sections - larger values will bridge the gap faster"
+#~ msgstr ""
+#~ "Wieviel ?berlauf kann vom Kodierer w?hrend der winzigen Abschnitte "
+#~ "verschluckt werden - gr??ere Werte schlie?en die L?cke schneller"
+#~ msgid ""
+#~ "How much of the overflow the codec can eat into during oversized sections "
+#~ "- larger values will bridge the gap faster"
+#~ msgstr ""
+#~ "Wieviel ?berlauf kann vom Kodierer w?hrend der ?bergro?en Abschnitte "
+#~ "verschluckt werden - gr??ere Werte schlie?en die L?cke schneller"
+#~ msgid "Two pass tuning"
+#~ msgstr "Zweifach-Durchlauf Feinabstimmung"
+#~ msgid "High bitrate scenes (%):"
+#~ msgstr "Szenen mit hoher Bitrate (%):"
+#~ msgid "Low bitrate scenes (%):"
+#~ msgstr "Szenen mit niedriger Bitrate (%):"
+#~ msgid "Overflow control strength (%):"
+#~ msgstr "St?rke der ?berlauf-Kontrolle (%):"
+#~ msgid ""
+#~ "The higher this value, the more bits get taken from frames larger than "
+#~ "the average size, and redistributed to others"
+#~ msgstr ""
+#~ "Je gr??er dieser Wert ist, desto mehr Bits werden von Bildern, die gr??er "
+#~ "als die durchschnittliche Gr??e sind, genommen und an andere Bilder "
+#~ "weiter verteilt"
+#~ msgid ""
+#~ "The higher this value, the more bits get assigned to frames below the "
+#~ "average frame size"
+#~ msgstr ""
+#~ "Je gr??er dieser Wert ist, desto mehr Bits werden Bildern zugewiesen, die "
+#~ "kleiner als die durchschnittliche Gr??e sind"
+#~ msgid ""
+#~ "0 = default from core (let XviD decide), else overflow payback percent "
+#~ "per frame"
+#~ msgstr ""
+#~ "0 = Voreinstellung der zentralen Einheit (lass' XviD entscheiden), oder "
+#~ "?berlaufr?ckgabe in Prozent pro Bild"
+#~ msgid "Curve compression"
+#~ msgstr "Kurven-Kompression"
+#~ msgid "Second Pass"
+#~ msgstr "Zweiter Durchlauf"
+#~ msgid "<b>Intra Matrix</b>"
+#~ msgstr "<b>Intrablock Matrix</b>"
+#~ msgid "<b>Inter Matrix</b>"
+#~ msgstr "<b>Interblock Matrix</b>"
+#~ msgid "1 - QPel SAD (Fastest)"
+#~ msgstr "1 - QPel SAD (am schnellsten)"
+#~ msgid "2 - QPel SATD"
+#~ msgstr "2 - QPel SATD"
+#~ msgid "3 - HPel on MB then QPel"
+#~ msgstr "3 - HPel auf MB dann QPel"
+#~ msgid "4 - Always QPel"
+#~ msgstr "4 - Immer QPel"
+#~ msgid "5 - QPel + Bidirectional ME"
+#~ msgstr "5 - QPel + Bidirektional ME"
+#~ msgid "6 - RD on I/P frames (Default)"
+#~ msgstr "6 - RD bei I/P-Bildern (Voreinstellung)"
+#~ msgid "7 - RD on all frames"
+#~ msgstr "7 - RD bei allen Bildern"
+#~ msgid "8 - RD refinement on I/P frames"
+#~ msgstr "8 - RD Verfeinerung bei I/P-Bildern"
+#~ msgid "9 - RD refinement on all frames"
+#~ msgstr "9 - RD Verfeinerung bei allen Bildern"
+#~ msgid "1  - Extremely Low (Fastest)"
+#~ msgstr "1  - Besonders niedrig (am Schnellsten)"
+#~ msgid "2  - Very Low"
+#~ msgstr "2  - Sehr niedrig"
+#~ msgid "3  - Low"
+#~ msgstr "3  - Niedrig"
+#~ msgid "4  - Medium"
+#~ msgstr "4  - Mittel"
+#~ msgid "5  - High"
+#~ msgstr "5  - Hoch"
+#~ msgid "6  - High (Default)"
+#~ msgstr "6  - Hoch (Voreinstellung)"
+#~ msgid "6B - Very High (RDO on B-frames)"
+#~ msgstr "6B - Sehr hoch (RDO bei B-Bildern)"
+#~ msgid "7  - Ultra High"
+#~ msgstr "7  - Besonders hoch"
+#~ msgid "7B - Ultra High (RDO on B-frames)"
+#~ msgstr "7B  - Besonders hoch (RDO bei B-Bildern)"
+#~ msgid "Hadamard Exhaustive Search"
+#~ msgstr "\"Hadamard\" vollst?ndige Suche"
+#~ msgid "x264 Configuration"
+#~ msgstr "x264 Konfiguration"
+#~ msgid "Encoding Mode"
+#~ msgstr "Kodier-Modus"
+#~ msgid "Quantizer"
+#~ msgstr "Quantizer"
+#~ msgid "Target Size"
+#~ msgstr "Zielgr??e"
+#~ msgid ""
+#~ "Constant Quantizer - Each frame will have the same compression. Low "
+#~ "numbers equal higher quality while high numbers equal lower quality."
+#~ msgstr ""
+#~ "Konstanter Quantizer - Jedes Bild mit der gleichen Kompression. "
+#~ "Niedrigere Zahlen entsprechen h?herer Qualit?t, hohe Zahlen entsprechen "
+#~ "niedrigerer Qualit?t."
+#~ msgid "Target bitrate or file size"
+#~ msgstr "Ziel-Bitrate oder Dateigr??e (kb/s):"
+#~ msgid "Single Pass - Quality Quantizer (Average)"
+#~ msgstr "Einfach-Durchlauf - Qualit?ts-Quantizer (Durchschnitt)"
+#~ msgid "Single Pass - Quality Quantizer (Constant)"
+#~ msgstr "Einfach-Durchlauf - Qualit?ts-Quantizer (Konstante)"
+#~ msgid "Single Pass - Bitrate (Average)"
+#~ msgstr "Einfach-Durchlauf - Bitrate (Durchschnitt)"
+#~ msgid "Bitrate"
+#~ msgstr "Bitrate"
+#~ msgid "Partition Decision"
+#~ msgstr "Aufteilungsentscheidung"
+#~ msgid "Method"
+#~ msgstr "Methode"
+#~ msgid "Diamond Search"
+#~ msgstr "Sternf?rmig suchen"
+#~ msgid "Hexagonal Search"
+#~ msgstr "Hexagonal suchen"
+#~ msgid "Uneven Multi-hexagon"
+#~ msgstr "Ungerades Multi-Hexagon"
+#~ msgid "Exhaustive Search"
+#~ msgstr "Vollst?ndige Suche"
+#~ msgid "Max. Ref. Frames"
+#~ msgstr "Max. Referenzbilder"
+#~ msgid "Range"
+#~ msgstr "Bereich"
+#~ msgid ""
+#~ "Define how many pixels are analysed for motion estimation. The higher the "
+#~ "range the more accurate the analysis but the slower the encoding time."
+#~ msgstr ""
+#~ "Anzahl der zu analysierenden Pixel festlegen. Je h?her dieser Bereich, "
+#~ "desto sorgf?ltiger die Analyse, aber umso langsamer die Kodierungszeit."
+#~ msgid ""
+#~ "Set how many previous frames can be referenced by a P/B-frame. Numbers "
+#~ "above 5 do not seem to improve quality greatly. Numbers 3 to 5 are "
+#~ "recommended."
+#~ msgstr ""
+#~ "Setzt die Anzahl von voraus gegangenen Bildern die von P/B-Bildern "
+#~ "referenziert werden k?nnen. Zahlen ?ber 5 verbessern die Qualit?t kaum "
+#~ "mehr. Zahlen zwischen 3 und 5 werden empfohlen."
+#~ msgid "Chroma ME"
+#~ msgstr "Farbintensit?t ME"
+#~ msgid "Use color information for detecting motion to improve quality"
+#~ msgstr ""
+#~ "Informationen ?ber die Farbintensit?t zur Absch?tzung der Bewegung "
+#~ "verwenden"
+#~ msgid "Mixed Refs"
+#~ msgstr "Gemischte Referenzbilder"
+#~ msgid "Calculate referencing individually based on each partition"
+#~ msgstr ""
+#~ "Berechnet die Referenzierung individuell, abh?ngig vom jeweiligen "
+#~ "Teilbereich"
+#~ msgid "Fast P-Skip"
+#~ msgstr "Schnelles P-Skip"
+#~ msgid ""
+#~ "Early skip detection on P-frames to speedup encoding. Quality will be "
+#~ "slightly reduced."
+#~ msgstr ""
+#~ "Fr?hes ?berspringen der P-Bild-Erkennung zur Kodierbeschleunigung. Die "
+#~ "Qualit?t wird geringf?gig reduziert."
+#~ msgid "DCT Decimate"
+#~ msgstr "DCT abschw?chen"
+#~ msgid "Interlaced"
+#~ msgstr "Halbbildmodus"
+#~ msgid "Input video is interlaced"
+#~ msgstr "Eingangsvideo ist im Halbbildmodus"
+#~ msgid "<b>Motion Estimation</b>"
+#~ msgstr "<b>Bewegungsabsch?tzung</b>"
+#~ msgid ""
+#~ "Enforce the size of a decoded pixel decoded to a certain value. Set this "
+#~ "to 1:1 for non-anamorphic video."
+#~ msgstr ""
+#~ "Erzwingt die Gr??e eines dekodierten Pixels, die zu einem bestimmten Wert "
+#~ "dekodiert wurden. 1:1 wird f?r nicht-anamorphe Videos empfohlen."
+#~ msgid "1"
+#~ msgstr "1"
+#~ msgid ""
+#~ "Set a custom aspect ratio. The default 1:1 is recommended for most video."
+#~ msgstr ""
+#~ "Individuelles Seitenverh?ltnis festlegen. Die Vorgabe 1:1 wird f?r die "
+#~ "meisten Videos empfohlen."
+#~ msgid "Predefined Aspect Ratio"
+#~ msgstr "Vordefiniertes Seitenverh?ltnis"
+#~ msgid "Set a common predefined aspect ratio"
+#~ msgstr "Vordefiniertes Seitenverh?ltnis festlegen"
+#~ msgid "<b>Sample Aspect Ratio</b>"
+#~ msgstr "<b>Abfrage Seitenverh?ltnis (A/R)</b>"
+#~ msgid "CABAC"
+#~ msgstr "CABAC"
+#~ msgid ""
+#~ "Lossless compression technique that reduces bitrate by approximately 10%. "
+#~ "Increases encoding and decoding time."
+#~ msgstr ""
+#~ "Verlustlose Kompressionstechnik, die die Bitrate etwa um 10% reduziert. "
+#~ "Vergr??ert den Kodier- und Dekodierzeitbedarf."
+#~ msgid "Trellis"
+#~ msgstr "Trellis"
+#~ msgid ""
+#~ "Use Trellis Rate Distortion Optimisation to find optimal encoding for "
+#~ "each block. Level 0 equals disabled, level 1 equals normal and level 2 "
+#~ "equals high."
+#~ msgstr ""
+#~ "Verzerrungsabh?ngige Quantization verwenden, um die optimale Kodierung "
+#~ "f?r jeden Block zu finden. Wert 0 = deaktiviert, Wert 1 = normal, Wert 2 "
+#~ "= hoch."
+#~ msgid "Noise Reduction"
+#~ msgstr "Rauschreduktion"
+#~ msgid "Set the amount of noise reduction"
+#~ msgstr "Betrag der Rauschreduktion setzen"
+#~ msgid "Deblocking Filter"
+#~ msgstr "Deblocking Filter"
+#~ msgid "Enable in-loop deblocking to filter the video"
+#~ msgstr "Aktiviert die 'in-loop' Deblockierung als Videofilter"
+#~ msgid "Strength"
+#~ msgstr "St?rke"
+#~ msgid ""
+#~ "Threshold for block detection. Positive values will detect more blocks, "
+#~ "negative values will detect less."
+#~ msgstr ""
+#~ "Schwellwert f?r Block-Erkennung. Positive Werte erkennen mehr Bl?cke, "
+#~ "negative Werte erkennen weniger."
+#~ msgid "Positive values will soften the video, negative values will sharpen"
+#~ msgstr ""
+#~ "Positive Werte zeichnen das Video weicher, negative Werte zeichnen es "
+#~ "sch?rfer"
+#~ msgid "<b>Misc. Options</b>"
+#~ msgstr "<b>Sonstige Optionen</b>"
+#~ msgid "8x8 Transform"
+#~ msgstr "8x8 Transformation"
+#~ msgid "General block breakdown transformation"
+#~ msgstr "Transformation von allgemeinen Blockunterteilungen"
+#~ msgid "8x8, 8x16 and 16x8 P-frame search"
+#~ msgstr "8x8, 8x16 und 16x8 P-Bild Suche"
+#~ msgid "Improve the P-frame quality"
+#~ msgstr "P-Bild Qualit?t verbessern"
+#~ msgid "8x8, 8x16 and 16x8 B-frame search"
+#~ msgstr "8x8, 8x16 und 16x8 B-Bild Suche"
+#~ msgid "Improve the B-frame quality"
+#~ msgstr "B-Bild Qualit?t verbessern"
+#~ msgid "4x4, 4x8 and 8x4 P-frame search"
+#~ msgstr "4x4, 4x8 und 8x4 P-Bild Suche"
+#~ msgid "Further improve the P-frame quality"
+#~ msgstr "P-Bild Qualit?t zus?tzlich verbessern"
+#~ msgid "8x8 Intra search"
+#~ msgstr "8x8 Intrablock Suche"
+#~ msgid "Enable DCT Intra block search to improve quality"
+#~ msgstr "Aktiviert DCT Intrablock-Suche, um die Qualit?t zu verbessern"
+#~ msgid "4x4 Intra search"
+#~ msgstr "4x4 Intrablock Suche"
+#~ msgid "Further enable DCT Intra block search to improve quality"
+#~ msgstr ""
+#~ "Aktiviert zus?tzliche DCT Intrablock-Suche, um die Qualit?t zu verbessern"
+#~ msgid "<b>Partition Macroblocks</b>"
+#~ msgstr "<b>Aufteilung Makrobl?cke</b>"
+#~ msgid "Bias"
+#~ msgstr "Tendenz (Bias)"
+#~ msgid "Max Consecutive"
+#~ msgstr "Max. Aufeinanderfolge"
+#~ msgid ""
+#~ "Increase / decrease probability for how often B-frames are used. It will "
+#~ "not violate the maximum consecutive frame limit."
+#~ msgstr ""
+#~ "Vergr??ern oder verkleinert die M?glichkeit, wie oft B-Bilder verwendet "
+#~ "werden sollen. Dies verletzt nicht das Limit f?r die maximale Anzahl "
+#~ "aufeinander folgender B-Bilder."
+#~ msgid ""
+#~ "Set the maximum number of consecutive B-frames. This defines how many "
+#~ "duplicate frames can be dropped. Numbers 2 to 5 are recommended. This "
+#~ "greatly improves the use of bitrate and quality."
+#~ msgstr ""
+#~ "Die maximale Anzahl aufeinander folgender B-Bilder festlegen. Damit wird "
+#~ "definiert, wieviele doppelte Bilder verworfen werden k?nnen. Zahlen 2 bis "
+#~ "5 werden empfohlen. Dies verbessert vor allem die Ausnutzung der Bitrate "
+#~ "und die Qualit?t."
+#~ msgid "Bidirectional ME"
+#~ msgstr "Bidirektionale ME"
+#~ msgid ""
+#~ "Optimise both motion vectors in B-frames. This will improve quality but "
+#~ "take more time for encoding."
+#~ msgstr ""
+#~ "Optimierung beider Bewegungsvektoren in B-Bildern. Dadurch wird die "
+#~ "Qualit?t verbessert, das Kodieren kostet aber mehr Zeit."
+#~ msgid "Weighted Biprediction"
+#~ msgstr "Gewichtete Doppelvorhersage (Biprediction)"
+#~ msgid "Enables weighting of B-frames to help fades"
+#~ msgstr "Aktiviert die Gewichtung von B-Bildern als Hilfe f?r ?berblendungen"
+#~ msgid "Adaptative DCT"
+#~ msgstr "anpassungsf?higes DCT"
+#~ msgid ""
+#~ "Use fewer B-frames if needed. This is always recommended. If not enabled, "
+#~ "the codec will always use the maximum number of consecutive B-frames."
+#~ msgstr ""
+#~ "Weniger B-Bilder verwenden, wenn m?glich. Dies ist immer empfehlenswert. "
+#~ "Andernfalls benutzt der Kodierer immer die maximale Anzahl aufeinander "
+#~ "folgender B-Bilder."
+#~ msgid "Use as Reference"
+#~ msgstr "Als Referenz benutzen"
+#~ msgid ""
+#~ "Allow B-frames to make references non-linearly to another B-frame "
+#~ "(instead of creating a duplicate copy)"
+#~ msgstr ""
+#~ "Nichtlineare Referenzen von B-Bildern  zu anderen B-Bildern erlauben "
+#~ "(anstatt doppelte Kopie zu erstellen)"
+#~ msgid "B-Frame Direct Mode"
+#~ msgstr "B-Bild Direktmodus"
+#~ msgid "Spatial"
+#~ msgstr "r?umlich"
+#~ msgid "Temporal"
+#~ msgstr "zeitlich"
+#~ msgid "Auto"
+#~ msgstr "Auto"
+#~ msgid "<b>B-Frames</b>"
+#~ msgstr "<b>B-Bilder</b>"
+#~ msgid "Partitions & Frames"
+#~ msgstr "Aufteilungen & Bilder"
+#~ msgid "Set how much \"bitrate bonus\" a keyframe can get"
+#~ msgstr "Legt fest, wieviel \"Bitratenbonus\" ein Keyframe bekommen kann"
+#~ msgid ""
+#~ "Set how much bitrate is deducted from a B-frame as compared to the "
+#~ "previous P-frame"
+#~ msgstr ""
+#~ "Legt fest, wieviel von der Bitrate eines B-Bildes abgezogen wird im "
+#~ "Vergleich zum vorherigen P-Bild"
+#~ msgid ""
+#~ "Define how much the bitrate can fluctuate over the entire video. 0% "
+#~ "results in a constant bitrate stream, while 100% results in a pure "
+#~ "quality based bitrate stream."
+#~ msgstr ""
+#~ "Legt fest, wie stark die Bitrate ?ber das gesamte Video schwanken kann. "
+#~ "0% ergibt einen konstanten Bitratenstrom, w?hrend 100% einen richtigen "
+#~ "qualit?tsbasierten Bitratenstrom ergibt."
+#~ msgid "Keyframe Boost (%)"
+#~ msgstr "I-Bild (keyframe) Erh?hung (%)"
+#~ msgid "B-frame Reduction (%)"
+#~ msgstr "B-Bild Reduktion (%)"
+#~ msgid "Bitrate Variability (%)"
+#~ msgstr "Bitrate Variablit?t (%)"
+#~ msgid "<b>Bitrate</b>"
+#~ msgstr "<b>Bitrate</b>"
+#~ msgid "Min QP"
+#~ msgstr "Min QP"
+#~ msgid "Max QP"
+#~ msgstr "Max QP"
+#~ msgid "Max QP Step"
+#~ msgstr "Max QP Schritt"
+#~ msgid "Enforce a minimum quantizer level"
+#~ msgstr "Minimale Quantizer-Ebene erzwingen"
+#~ msgid "Enforce a maximum quantizer level"
+#~ msgstr "Maximale Quantizer-Ebene erzwingen"
+#~ msgid ""
+#~ "Define how much the quantizer rate can change between two consecutive "
+#~ "frames"
+#~ msgstr ""
+#~ "Legt fest, wie stark sich der Quantizer zwischen zwei aufeinander "
+#~ "folgenden Bildern ?ndern darf."
+#~ msgid "<b>Quantization Limits</b>"
+#~ msgstr "<b>Quantization Grenzen</b>"
+#~ msgid ""
+#~ "Increase / decrease sensitivity for detecting scene changes. Improves I-"
+#~ "frame usage and quality."
+#~ msgstr ""
+#~ "Erh?ht / reduziert Empfindlichkeit, um Szenenwechsel festzustellen, die "
+#~ "zu kompensieren sind. Verbessert die Verwendung von I-Bildern und hilft "
+#~ "der Qualit?t."
+#~ msgid "Scene Cut Threshold"
+#~ msgstr "Schwelle f?r Szenenschnitt"
+#~ msgid "Min IDR Frame Interval"
+#~ msgstr "Min. IDR-Bild Intervall"
+#~ msgid ""
+#~ "Set minimum frame interval between IDR frames. Defines the minimum amount "
+#~ "a frame can be reused and referenced by other frames before a new IDR "
+#~ "frame is established."
+#~ msgstr ""
+#~ "Setzt das kleinste Bildintervall zwischen IDR-Bildern. Definiert den "
+#~ "kleinsten Betrag, den ein Bild durch andere Bilder wieder verwenden und "
+#~ "referenzieren kann, bevor ein komplettes Bild kommt."
+#~ msgid ""
+#~ "Set maximum frame interval between IDR frames. Defines the maximum amount "
+#~ "a frame can be reused and referenced by other frames before a new IDR "
+#~ "frame is established."
+#~ msgstr ""
+#~ "Setzt das gr??te Bildintervall zwischen IDR-Bildern. Definiert den "
+#~ "gr??ten Betrag, den ein Bild durch andere Bilder wieder verwenden und "
+#~ "referenzieren kann, bevor ein komplettes Bild kommt."
+#~ msgid "Max IDR Frame Interval"
+#~ msgstr "Max. IDR-Bild Intervall"
+#~ msgid "<b>More Rate Settings</b>"
+#~ msgstr "<b>Mehr Bitraten-Einstellungen</b>"
+#~ msgid "VBV Buffer Size"
+#~ msgstr "VBV Puffergr??e"
+#~ msgid "Initial VBV Buffer (%)"
+#~ msgstr "Anf?nglicher VBV Puffer (%)"
+#~ msgid "Maximum Local Bitrate"
+#~ msgstr "Maximale lokale Bitrate (kbit/s)"
+#~ msgid "<b>Video Buffer Verifier</b>"
+#~ msgstr "<b>Video Puffer Pr?fung</b>"
+#~ msgid "Bitrate Variance"
+#~ msgstr "Bitrate Varianz"
+#~ msgid ""
+#~ "Allowed variance of average bitrate. Lower values mean less variance. "
+#~ "Higher values mean more variance."
+#~ msgstr ""
+#~ "Erlaubte Varianz der durchschnittl. Bitrate. Niedrigere Werte bedeuten "
+#~ "weniger Varianz. H?here Werte bedeuten mehr Varianz."
+#~ msgid ""
+#~ "Allowed variance of average quantizer or quality. Lower values mean less "
+#~ "variance. Higher values mean more variance. Note that 0 means constant "
+#~ "quality while 1 means constant fluctuation. Recommended 0.6."
+#~ msgstr ""
+#~ "Erlaubte Varianz des durchschnittl. Quantizers. Niedrigere Werte bedeuten "
+#~ "weniger Varianz. H?here Werte bedeuten mehr Varianz. Hierbei bedeutet 0 "
+#~ "konstanter Quantizer, w?hrend 1 konstante Schwankungen bedeutet. "
+#~ "Empfohlener Wert ist 0.6"
+#~ msgid "Reduced fluctuations in Quantizer (before curve compression)"
+#~ msgstr "Schwankungen des Quantizer reduzieren (vor der Kurvenkompression)"
+#~ msgid "Quantizer Compression"
+#~ msgstr "Quantizer Kompression"
+#~ msgid "Temp. Blur of Est. Frame Complexity"
+#~ msgstr "Temp. Weichzeichnen der gesch?tzten Bildkomplexit?t"
+#~ msgid "Temp. Blur of Quant. after CC"
+#~ msgstr "Temp. Weichzeichnen der Quant. nach CC"
+#~ msgid "<b>Misc</b>"
+#~ msgstr "<b>Verschiedenes</b>"
+#~ msgid "Quantization factors used between I and P-frames"
+#~ msgstr "Diese Quantization-Faktoren zwischen I- und P-Bildern verwenden"
+#~ msgid "Quantization used between P and B-frames"
+#~ msgstr "Diese Quantization-Faktoren zwischen P- und B-Bildern verwenden"
+#~ msgid "Quantization difference between chroma (color) and luma (brightness)"
+#~ msgstr ""
+#~ "Quantization-Unterschied zwischen Farbintensit?t (Farbe) and Brillianz "
+#~ "(Helligkeit)"
+#~ msgid "Factor between I and P-frame Quants"
+#~ msgstr "Faktor zwischen I- und P-Bild Quantization"
+#~ msgid "Factor between P and B-frame Quants"
+#~ msgstr "Faktor zwischen P- und B-Bild Quantization"
+#~ msgid "Chroma QP Offset"
+#~ msgstr "Farbintensit?t QP Offset"
+#~ msgid "<b>Quantizers</b>"
+#~ msgstr "<b>Quantizer</b>"
+#~ msgid "Flat Matrix"
+#~ msgstr "breite Matrix"
+#~ msgid "JVT Matrix"
+#~ msgstr "JVT Matrix"
+#~ msgid "Custom Matrix"
+#~ msgstr "Individuelle Matrix"
+#~ msgid "Edit loaded custom quantization matrix file"
+#~ msgstr "Geladene individuelle Quantization-Matrixdatei bearbeiten"
+#~ msgid "<b>Quantization Matrices</b>"
+#~ msgstr "<b>Quantization Matrizen</b>"
+#~ msgid "More"
+#~ msgstr "Mehr"
+#~ msgid "_Defaults"
+#~ msgstr "Vor_einstellungen"
+#~ msgid "Chroma Noise Reduction 2"
+#~ msgstr "Farbintensit?t Rauschreduktion 2"
+#~ msgid "<b>Scene change Treshold</b>"
+#~ msgstr "<b>Schwelle f?r Szenenwechsel</b>"
+#~ msgid "Sensibility"
+#~ msgstr "Empfindlichkeit"
+#~ msgid "Max"
+#~ msgstr "Max"
+#~ msgid "Luma :"
+#~ msgstr "Brillianz:"
+#~ msgid "Chroma U :"
+#~ msgstr "Farbintensit?t U:"
+#~ msgid "Chroma V :"
+#~ msgstr "Farbintensit?t V:"
+#~ msgid "Narrow"
+#~ msgstr "N?he"
+#~ msgid "<b>Settings</b>"
+#~ msgstr "<b>Einstellungen</b>"
+#~ msgid "Use also chroma to detect scene change"
+#~ msgstr "Auch Farbintensit?t benutzen, um Szenenwechsel zu ermitteln"
+#~ msgid "<b>Mode</b>"
+#~ msgstr "<b>Modus</b>"
+#~ msgid "Mplayer Delogo"
+#~ msgstr "Mplayer Delogo (Logo-Entfernung)"
+#~ msgid "X"
+#~ msgstr "X"
+#~ msgid "Y"
+#~ msgstr "Y"
+#~ msgid "W"
+#~ msgstr "W"
+#~ msgid "H"
+#~ msgstr "H"
+#~ msgid "Band"
+#~ msgstr "Band"
+#~ msgid "Chroma Shift"
+#~ msgstr "Farbintensit?ts-Verschiebung"
+#~ msgid "ChromaShift"
+#~ msgstr "Farbintensit?ts-Verschiebung"
+#~ msgid "U Shift :"
+#~ msgstr "U Verschiebung:"
+#~ msgid "V Shift :"
+#~ msgstr "V Verschiebung:"
+#~ msgid "<b>Preview</b>"
+#~ msgstr "<b>Vorschau</b>"
+#~ msgid "Xvid Encoder"
+#~ msgstr "Xvid Kodierer"
+#~ msgid "Constant Quantizer"
+#~ msgstr "Konstanter Quantizer"
+#~ msgid "Constant Bitrate (kbps)"
+#~ msgstr "Konstante Bitrate (kb/s)"
+#~ msgid "Dual pass (MBytes)"
+#~ msgstr "Zweifach-Durchlauf (MBytes)"
+#~ msgid "Basic"
+#~ msgstr "Basis"
+#~ msgid "Motion Search"
+#~ msgstr "Bewegungssuche"
+#~ msgid "Max I frame interval "
+#~ msgstr "Max. I-Bild Intervall"
+#~ msgid "Min I frame interval"
+#~ msgstr "Min. I-Bild Intervall"
+#~ msgid "1- Very low"
+#~ msgstr "1 - Sehr niedrig"
+#~ msgid "2- Low"
+#~ msgstr "2 - niedrig"
+#~ msgid "3- Medium"
+#~ msgstr "3 - Mittel"
+#~ msgid "4- High"
+#~ msgstr "4 - Hoch"
+#~ msgid "5- Very High"
+#~ msgstr "5 - Sehr hoch"
+#~ msgid "6- Ultra High"
+#~ msgstr "6 - Besonders hoch"
+#~ msgid "H263 Quantizer"
+#~ msgstr "H263 Quantizer"
+#~ msgid "MPEG Quantizer"
+#~ msgstr "MPEG Quantizer"
+#~ msgid "Advanced"
+#~ msgstr "Fortgeschritten"
+#~ msgid "Min I Frame Qzer"
+#~ msgstr "Min. I-Bild Qzer"
+#~ msgid "Max I Frame Qzer"
+#~ msgstr "Max. I-Bild Qzer"
+#~ msgid "Min P Frame Qzer"
+#~ msgstr "Min. P-Bild Qzer"
+#~ msgid "Max P Frame Qzer"
+#~ msgstr "Max. P-Bild Qzer"
+#~ msgid "Not Yet!"
+#~ msgstr "Noch nicht !"
+#~ msgid "B Frames"
+#~ msgstr "B-Bilder"
+#~ msgid "ASHARP"
+#~ msgstr "ASHARP"
+#~ msgid "ASharp by MarcFD"
+#~ msgstr "ASharp von MarcFD"
+#~ msgid "Threshold :"
+#~ msgstr "Schwelle :"
+#~ msgid "Strength :"
+#~ msgstr "St?rke :"
+#~ msgid "Block Adaptative :"
+#~ msgstr "Block anpassungsf?hig:"
+#~ msgid "Unknown flag :"
+#~ msgstr "Unbekannter Schalter:"
+#~ msgid "Luma"
+#~ msgstr "Brillianz"
+#~ msgid "Chroma v"
+#~ msgstr "Farbintensit?t V"
+#~ msgid "Equalizer"
+#~ msgstr "Equalizer"
+#~ msgid "Crop Settings"
+#~ msgstr "Zuschnitt Einstellungen"
+#~ msgid "Crop Left:"
+#~ msgstr "Links Zuschneiden:"
+#~ msgid "Crop Right:"
+#~ msgstr "Zuschnitt Rechts:"
+#~ msgid "Crop Top:"
+#~ msgstr "Zuschnitt Oben:"
+#~ msgid "Crop Bottom:"
+#~ msgstr "Zuschnitt Unten:"
+#~ msgid "Auto Crop"
+#~ msgstr "Auto-Zuschneiden"
+#~ msgid "Subtitle Size and Position"
+#~ msgstr "Untertitel Gr??e und Position"
+#~ msgid "Font Size:"
+#~ msgstr "Schriftgr??e:"
+#~ msgid "Audio Configuration"
+#~ msgstr "Audio Konfiguration"
+#~ msgid "Aften"
+#~ msgstr "Aften"
+#~ msgid "amrnb"
+#~ msgstr "amrnb"
+#~ msgid "FAAC"
+#~ msgstr "FAAC"
+#~ msgid "FAAD2"
+#~ msgstr "FAAD2"
+#~ msgid "LAME"
+#~ msgstr "LAME"
+#~ msgid "liba52"
+#~ msgstr "liba52"
+#~ msgid "libdca"
+#~ msgstr "libdca"
+#~ msgid "MAD"
+#~ msgstr "MAD"
+#~ msgid "Vorbis"
+#~ msgstr "Vorbis"
+#~ msgid "_Use libavcodec MPEG-2 decoder"
+#~ msgstr ""
+#~ "MPEG Dekodierer libavcodec ben_utzen \n"
+#~ "(ggf. Probleme bei Videos im Halbbildmodus!)"
+#~ msgid "_x264 threads:"
+#~ msgstr "_x264 Threads:"
+#~ msgid "X_vid threads:"
+#~ msgstr "X_vid Threads:"
+#~ msgid "Core Audio"
+#~ msgstr "Zentrales Audio"
+#~ msgid "JACK"
+#~ msgstr "JACK"
+#~ msgid "Pulse Audio"
+#~ msgstr "Pulse Audio"
+#~ msgid "Win32"
+#~ msgstr "Win32"
+#~ msgid "_Audio output:"
+#~ msgstr "_Audio-Ausgabe:"
+#~ msgid "ALSA _device:"
+#~ msgstr "ALSA _Ger?t:"
+#~ msgid "Auto (might not work)"
+#~ msgstr "Auto (arbeitet evtl. nicht)"
+#~ msgid "Top field first"
+#~ msgstr "Oberes Feld zuerst"
+#~ msgid "Bottom field first"
+#~ msgstr "Unteres Feld zuerst"
+#~ msgid "Bottom field (keep top)"
+#~ msgstr "Unteres Feld (oben halten)"
+#~ msgid "Top field (keep bottom)"
+#~ msgstr "Oberes Feld (unten halten)"
+#~ msgid "Cubic interpolation"
+#~ msgstr "Kubische Interpolation"
+#~ msgid "Modified ELA"
+#~ msgstr "Ge?nderte ELA"
+#~ msgid "Kernel interpolation"
+#~ msgstr "Filter-Interpolation"
+#~ msgid "Modified ELA-2"
+#~ msgstr "Ge?nderte ELA-2"
+#~ msgid "4 fields check"
+#~ msgstr "4-Felder Pr?fung"
+#~ msgid "5 fields check"
+#~ msgstr "5-Felder Pr?fung"
+#~ msgid "4 fields check (no avg)"
+#~ msgstr "4-Felder Pr?fung (kein Durchschnitt)"
+#~ msgid "5 fields check (no avg)"
+#~ msgstr "5-Felder Pr?fung (kein Durchschnitt)"
+#~ msgid "No link"
+#~ msgstr "Keine Verkn?pfung"
+#~ msgid "Full link"
+#~ msgstr "Vollst?ndige Verkn?pfung"
+#~ msgid "Y to UV"
+#~ msgstr "Y nach UV"
+#~ msgid "UV to Y"
+#~ msgstr "UV nach Y"
+#~ msgid "2"
+#~ msgstr "2"
+#~ msgid "_Field order:"
+#~ msgstr "_Feldreihenfolge:"
+#~ msgid "_Interpolate:"
+#~ msgstr "_Interpoliere:"
+#~ msgid "_Type:"
+#~ msgstr "_Typ:"
+#~ msgid "_MntMode:"
+#~ msgstr "_Mnt Modus:"
+#~ msgid "_Link:"
+#~ msgstr "_Verkn?pfung:"
+#~ msgid "_AP type:"
+#~ msgstr "_AP Typ:"
+#~ msgid "Use ch_roma to evalute"
+#~ msgstr "Farbintensit?t zur ?berpr?fung benutzen"
+#~ msgid "Try _weave"
+#~ msgstr "Versuche 'Weave'"
+#~ msgid "_Denoise"
+#~ msgstr "En_trauschen"
+#~ msgid "_Sharp"
+#~ msgstr "_Sch?rfen"
+#~ msgid "_Evalute all frames"
+#~ msgstr "Alle Bilder ?b_erpr?fen"
+#~ msgid "Motion threshold, l_uma:"
+#~ msgstr "Beweg_ungsschwelle, Brillianz:"
+#~ msgid "Motion threshold, c_hroma:"
+#~ msgstr "Bewegungssc_hwelle, Farbintensit?t:"
+#~ msgid "Area com_bing threshold:"
+#~ msgstr "Bereich f?r kammartige Schwelle:"
+#~ msgid "Combe_d threshold:"
+#~ msgstr "Kammartige Schwelle:"
+#~ msgid "Artefact _protection threshold:"
+#~ msgstr "Artefakte-_gesch?tzte Schwelle:"
+#~ msgid "Debug:"
+#~ msgstr "Fehlersuche:"
+#~ msgid "TDeint"
+#~ msgstr "TDeint"
+#~ msgid "Arabic"
+#~ msgstr "Arabisch"
+#~ msgid "Baltic"
+#~ msgstr "Baltisch"
+#~ msgid "Chinese Simplified (GB2312)"
+#~ msgstr "Chinesisch einfach (GB2312)"
+#~ msgid "Chinese Traditional (Big5)"
+#~ msgstr "Chinesisch traditionell (Big5)"
+#~ msgid "Cyrillic"
+#~ msgstr "Kyrillisch"
+#~ msgid "Latin-1 (Western European)"
+#~ msgstr "Latin-1 (West-Europa)"
+#~ msgid "Latin-2 (Central European)"
+#~ msgstr "Latin-2 (Zentral-Europa)"
+#~ msgid "Greek"
+#~ msgstr "Griechisch"
+#~ msgid "Hebrew"
+#~ msgstr "Hebr?isch"
+#~ msgid "Slovene"
+#~ msgstr "Slovenisch"
+#~ msgid "Turkish"
+#~ msgstr "T?rkisch"
+#~ msgid "UTF-8"
+#~ msgstr "UTF-8"
+#~ msgid "UTF-16"
+#~ msgstr "UTF-16"
+#~ msgid "_Subtitle file:"
+#~ msgstr "Unter_titel Datei:"
+#~ msgid "Select Subtitle file"
+#~ msgstr "Untertitel Datei ausw?hlen"
+#~ msgid "_Font (TTF):"
+#~ msgstr "Schri_ft (TrueType):"
+#~ msgid "Select TTF file"
+#~ msgstr "TTF Datei ausw?hlen"
+#~ msgid "_Encoding:"
+#~ msgstr "Kodierung:"
+#~ msgid "S_elect C_olor"
+#~ msgstr "Farb_e ausw?hlen"
+#~ msgid "Set Size and _Position"
+#~ msgstr "Gr??e und _Position setzen"
+#~ msgid "_Auto split"
+#~ msgstr "_Automatisch teilen"
+#~ msgid "_Delay (ms):"
+#~ msgstr "Ver_z?gerung (ms):"
+#~ msgid "Subtitler"
+#~ msgstr "Untertitel Generator"
+#~ msgid "_Background Image:"
+#~ msgstr "Hintergrund_bild:"
+#~ msgid "Select background image"
+#~ msgstr "Hintergrundbild ausw?hlen"
+#~ msgid "_NTSC (default is PAL):"
+#~ msgstr "_NTSC (voreingestellt ist PAL):"
+#~ msgid "Vignette _Width:"
+#~ msgstr "Vignette _Breite:"
+#~ msgid "Vignette _Height:"
+#~ msgstr "Vignette _H?he:"
+#~ msgid "Vignette frame number"
+#~ msgstr "Vignette Bildnummer"
+#~ msgid "Timecode:"
+#~ msgstr "Zeitcode:"
+#~ msgid "Animated Menu"
+#~ msgstr "Animiertes Men?"
+#~ msgid "Reuse log file ?"
+#~ msgstr "Log-Datei wieder verwenden?"
+#~ msgid "Crop"
+#~ msgstr "Zuschneiden"
+#~ msgid "Remove lines from top/bottom/left/right."
+#~ msgstr "Zeilen von oben/unten/links/rechts entfernen."
+#~ msgid "MPlayer resize"
+#~ msgstr "MPlayer Gr??e ?ndern"
+#~ msgid "Change image size. Faster than Avisynth's Resize."
+#~ msgstr "Bildgr??e ?ndern. Schneller als Avisynth's Gr??en?nderung."
+#~ msgid "Picture resizer ported from Avisynth."
+#~ msgstr "Bildgr??en?nderer, von Avisynth portiert."
+#~ msgid "Add black borders"
+#~ msgstr "Schwarze R?nder addieren"
+#~ msgid "Add pure black border(s). Enlarges the picture."
+#~ msgstr "Reine schwarze R?nder hinzuf?gen. Vergr??ert das Bild."
+#~ msgid "Blacken borders"
+#~ msgstr "Geschw?rzte R?nder"
+#~ msgid "Fill borders with pure black. Doesn't alter size."
+#~ msgstr "R?nder mit reinem Schwarz f?llen. Ver?ndert nicht die Bildgr??e."
+#~ msgid "Vertical flip"
+#~ msgstr "Vertikal spiegeln"
+#~ msgid "Vertically flip the picture."
+#~ msgstr "Bild vertikal spiegeln."
+#~ msgid "Rotate"
+#~ msgstr "Drehen"
+#~ msgid "Rotate the picture by 90, 180 or 270 degrees."
+#~ msgstr "Bild um 90, 180 oder 270 Grad drehen."
+#~ msgid "Resample fps"
+#~ msgstr "Resample Bilder/s (Hz)"
+#~ msgid "Change framerate while keeping duration."
+#~ msgstr "Bildrate ?ndern w?hrend die Zeitdauer erhalten bleibt."
+#~ msgid "Reverse"
+#~ msgstr "Umdrehen"
+#~ msgid "Play video backward."
+#~ msgstr "Video r?ckw?rts abspielen."
+#~ msgid "Fade"
+#~ msgstr "Ein-/Ausblenden"
+#~ msgid "Fade in/out."
+#~ msgstr "Ein-/Ausblenden."
+#~ msgid "yadif"
+#~ msgstr "yadif (Yet Another DeInterlacing Filter)"
+#~ msgid "Yet Another DeInterlacer. Ported from MPlayer."
+#~ msgstr "Noch ein weiterer Halbbildmodus-Filter. Portiert vom MPlayer."
+#~ msgid "mcDeinterlace"
+#~ msgstr "mc-Halbbildmodus"
+#~ msgid "Motion compensation deinterlacer. Ported from MPlayer."
+#~ msgstr "Bewegungskompensierter Halbbildmodus-Filter. Portiert vom MPlayer."
+#~ msgid "Deinterlace"
+#~ msgstr "Halbbildmodus"
+#~ msgid "Mask interlacing artifacts. Port of Smart deinterlace."
+#~ msgstr ""
+#~ "Maskieren von Halbbildmodus-Artifakten. Portierung von \"Smart deinterlace"
+#~ "\"."
+#~ msgid "KernelDeint"
+#~ msgstr "Filter-Halbbildmodus"
+#~ msgid "Kernel deinterlacer by Donald Graft."
+#~ msgstr "Halbbildmodus-Filter von Donald Graft."
+#~ msgid "Motion adaptative deinterlacer by Tritical."
+#~ msgstr "Bewegungsangepasster Halbbildmodus-Filter von Tritical."
+#~ msgid "libavcodec deinterlacer"
+#~ msgstr "libavcodec Halbbildmodus-Filter"
+#~ msgid "All FFmpeg deinterlace filters (bicubic, median, ...)."
+#~ msgstr "Alle FFmeg Halbbildmodus-Filter (Bikubisch, Mittelwert, ...)."
+#~ msgid "Decomb Telecide"
+#~ msgstr "Decomb Telecide"
+#~ msgid "Great deinterlacing package including IVTC."
+#~ msgstr "Gro?es Halbbildmodus-Paket, beinhaltet IVTC."
+#~ msgid "Decomb Decimate"
+#~ msgstr "Decomb Decimate"
+#~ msgid "Useful to remove dupes left by Telecide."
+#~ msgstr "N?tzlich, um verbliebene Duplikate von Telecide zu entfernen."
+
+# Einzelbilder des Films werden abwechselnd zweifach und dreifach aufgezeichnet, so da? sich aus je zwei Einzelbildern des Films immer f?nf Fernseh-Halbbilder ergeben.
+# 59,94 Hz vertikal -> 60 Halbbilder
+#~ msgid "Pulldown"
+#~ msgstr "3:2 Pulldown"
+#~ msgid "Convert 24 fps to 30 fps by repeating fields."
+#~ msgstr ""
+#~ "Konvertieren von 24 Bilder/s nach 30 Bilder/s durch Wiederholen von "
+#~ "Feldern."
+#~ msgid "Bobber - convert each field into a full sized frame."
+#~ msgstr "Bobber - konvertiert jedes Feld in ein Ganzbild (\"full sized\")"
+#~ msgid "PAL field shift"
+#~ msgstr "PAL Feldverschiebung"
+#~ msgid "Shift fields by one. Useful for some PAL movies."
+#~ msgstr "Verschiebt Felder in einem Schritt. N?tzlich f?r einige PAL Filme."
+#~ msgid "PAL smart"
+#~ msgstr "PAL schnell"
+#~ msgid "Smartly revert non constant PAL field shift."
+#~ msgstr "Elegante R?cknahme von nicht-stabiler PAL-Felder-Verschiebung."
+#~ msgid "Drop"
+#~ msgstr "Entfernen"
+#~ msgid "Drop damaged fields (e.g. from VHS capture)."
+#~ msgstr "Entferne besch?digte Felder (z. B. von VHS Aufnahmen)."
+#~ msgid "Swap fields"
+#~ msgstr "Felder tauschen"
+#~ msgid "Swap top and bottom fields."
+#~ msgstr "Obere mit unteren Feldern tauschen."
+#~ msgid "Smart swap fields"
+#~ msgstr "Schnell Felder tauschen"
+#~ msgid "Smartly swap fields. Needed when field order changes."
+#~ msgstr ""
+#~ "Elegante Zwischenspeicherung von Feldern. Wird ben?tigt, wenn sich die "
+#~ "Felder-Reihenfolge ?ndert."
+#~ msgid "Keep even fields"
+#~ msgstr "Gerade Felder erhalten"
+#~ msgid "Keep top fields. Gives a half height picture."
+#~ msgstr "Obere Felder erhalten. Ergibt ein halbhohes Bild."
+#~ msgid "Keep odd fields"
+#~ msgstr "Ungerade Felder erhalten"
+#~ msgid "Keep bottom fileds. Gives a half height picture."
+#~ msgstr "Untere Felder erhalten. Ergibt ein halbhohes Bild."
+#~ msgid "Separate fields"
+#~ msgstr "Felder trennen"
+#~ msgid "Each field becomes full picture, half sized."
+#~ msgstr "Jedes Feld wird zu einem Vollbild mit halber Gr??e."
+#~ msgid "Merge fields"
+#~ msgstr "Felder verschmelzen"
+#~ msgid "Merge two pictures as if they were two fields."
+#~ msgstr "Zwei Bilder verschmelzen, so als ob es zwei Felder w?ren."
+#~ msgid "Hz Stack fields"
+#~ msgstr "Hz Stapel-Felder"
+#~ msgid "Put botj fields side by side."
+#~ msgstr "botj Felder nebeneinander setzen."
+#~ msgid "Stack fields"
+#~ msgstr "Felder sammeln"
+#~ msgid "Put two fields on top of one another."
+#~ msgstr "Zwei Felder ?ber ein ein anderes."
+#~ msgid "Unstack fields"
+#~ msgstr "Felder zur?ck geben"
+#~ msgid "Interleave top and bottom part of the picture."
+#~ msgstr "Oberen und unteren Teil des Bildes ?berlappen."
+#~ msgid "Adjust contrast, brightness, saturation and gamma."
+#~ msgstr "Kontrast, Helligkeit, S?ttigung und Gammawert einstellen."
+#~ msgid "MPlayer hue"
+#~ msgstr "MPlayer Farbton"
+#~ msgid "Adjust hue and saturation."
+#~ msgstr "Farbton und S?ttigung einstellen."
+#~ msgid "Adjust contrast, brightness and colors."
+#~ msgstr "Kontrast, Helligkeit und Farben einstellen."
+#~ msgid "Luma equalizer"
+#~ msgstr "Brillianz Equalizer"
+#~ msgid "Luma correction filter with histogram."
+#~ msgstr "Brillianz-Korrekturfilter mit Histogramm."
+#~ msgid "Swap U and V"
+#~ msgstr "U mit V vertauschen"
+#~ msgid "Invert chroma U and chroma V."
+#~ msgstr "Farbintensit?ten U und V invertieren."
+#~ msgid "Chroma shift"
+#~ msgstr "Farbintensit?t verschieben"
+#~ msgid "Shift chroma U/V to fix badly synced luma/chroma."
+#~ msgstr ""
+#~ "Farbintensit?t U/V verschieben bei schlecht synchronisierter Intensit?t/"
+#~ "Brillianz."
+#~ msgid "Luma only"
+#~ msgstr "nur Brillianz"
+#~ msgid "Convert picture to greyscale (black and white)."
+#~ msgstr "Bild in Graustufenbild umwandeln (schwarz und wei?)."
+#~ msgid "Chroma U only"
+#~ msgstr "nur Farbintensit?t U"
+#~ msgid "Convert picture to grey, keeping only chroma U."
+#~ msgstr ""
+#~ "Bild in Graustufenbild umwandeln, nur die Farbintensit?t U wird erhalten."
+#~ msgid "Chroma V only"
+#~ msgstr "nur Farbintensit?t V"
+#~ msgid "Convert picture to grey, keeping only chroma V."
+#~ msgstr ""
+#~ "Bild in Graustufenbild umwandeln, nur die Farbintensit?t V wird erhalten."
+#~ msgid "Luma delta"
+#~ msgstr "Brillianz-Differenz"
+#~ msgid "Difference between current and previous picture."
+#~ msgstr "Differenz zwischen aktuellen und vorherigem Bild."
+#~ msgid "Avisynth ColorYUV"
+#~ msgstr "Avisynth ColorYUV"
+#~ msgid "Alter colors (auto white balance etc...). Ported from Avisynth."
+#~ msgstr ""
+#~ "Farben ?ndern (autom. Wei?-Abgleich usw...). Von Avisynth ?bernommen."
+#~ msgid "MPlayer denoise3d"
+#~ msgstr "MPlayer denoise3d Rauschfilter"
+#~ msgid "Reduce noise, smooth image, increase compressibility."
+#~ msgstr ""
+#~ "Rauschen reduzieren und Bild gl?tten, erh?ht die Kompressionsf?higkeit."
+#~ msgid "MPlayer hqdn3d"
+#~ msgstr "MPlayer hqdn3d"
+#~ msgid "High quality version of denoise3d. Slower but more precise."
+#~ msgstr ""
+#~ "Qualitativ hochwertige Version des \"denoise3d\" Rauschfilter. Langsamer, "
+#~ "aber pr?ziser."
+#~ msgid "FluxSmooth"
+#~ msgstr "FluxSmooth"
+#~ msgid "Spatio-temporal cleaner by Ross Thomas."
+#~ msgstr "R?umlich-zeitliches S?ubern von Ross Thomas."
+#~ msgid "Temporal Cleaner"
+#~ msgstr "Zeitliches S?ubern"
+#~ msgid "Vlad59's Avisynth port of Jim Casaburi's denoiser."
+#~ msgstr "Vlad59's Avisynth Portierung des Jim-Casaburi's-Rauschfilters."
+#~ msgid "Port of Transcode DNR."
+#~ msgstr "Portierung von Transcode DNR."
+#~ msgid "Stabilize"
+#~ msgstr "Stabilisieren"
+#~ msgid "Light denoiser."
+#~ msgstr "Einfacher Rauschfilter."
+#~ msgid "Cnr2"
+#~ msgstr "Cnr2"
+#~ msgid "Chroma noise reduction filter by MarcFD/Tritical."
+#~ msgstr "Farbintensit?ts-Rauschreduktionsfilter von MarcFD/Tritical."
+#~ msgid "MSmooth by Donald Graft"
+#~ msgstr "\"MSmooth\" von Donald Graft"
+#~ msgid "Smooth the image, don't blur edges. Useful on anime."
+#~ msgstr "Bild gl?tten, Kanten nicht weichzeichnen. N?tzlich f?r Anime."
+#~ msgid "Soften"
+#~ msgstr "Soften"
+#~ msgid "A variant of stabilize."
+#~ msgstr "Eine Stabilisierungsvariante."
+#~ msgid "Sharpen"
+#~ msgstr "Sch?rfen"
+#~ msgid "Enhance difference between near pixels."
+#~ msgstr "Differenz zwischen zwei naheliegenen Pixeln erh?hen."
+#~ msgid "MSharpen"
+#~ msgstr "Sch?rfe erh?hen (MSharpen)"
+#~ msgid "Sharpen edges without amplifying noise. By Donald Graft."
+#~ msgstr "Kanten sch?rfen ohne Verst?rkerraushcen. Von Donald Graft."
+#~ msgid "asharp"
+#~ msgstr "\"asharp\" Sch?rfefilter"
+#~ msgid "Adaptative sharpener by MarcFD."
+#~ msgstr "Anpassungsf?higer Sch?rfefilter von MarcFD."
+#~ msgid "Gauss smooth"
+#~ msgstr "Gauss'sche Gl?ttung"
+#~ msgid "Gaussian smooth. Blur the picture."
+#~ msgstr "Gauss'sche Gl?ttung. Bild weichzeichnen."
+#~ msgid "Mean"
+#~ msgstr "Durchschnitt"
+#~ msgid "Mean (blur) kernel."
+#~ msgstr "Durchschnittlicher (Weichzeichner-) Filter."
+#~ msgid "Median"
+#~ msgstr "Mittelwert"
+#~ msgid "Median kernel 3x3. Remove high frequency noise."
+#~ msgstr "Mittelwertiger Filter 3x3. Entfernt hochfrequentes Rauschen."
+#~ msgid "Median (5x5)"
+#~ msgstr "Mittelewert (5x5)"
+#~ msgid "Median kernel 5x5. Good for reducing chroma noise."
+#~ msgstr "Mittlerer Filter 5x5. Reduziert das Rauschen der Farbintensit?t."
+#~ msgid "Forced postprocessing"
+#~ msgstr "Unbedingte Nachbearbeitung"
+#~ msgid "Apply blind postprocessing."
+#~ msgstr "Blinde Nachbearbeitung starten."
+#~ msgid "Add srt/sub subtitles to the picture."
+#~ msgstr "srt/sub Untertitel zum Bild hinzuf?gen."
+#~ msgid "ASS"
+#~ msgstr "ASS"
+#~ msgid "Add ASS/SSA subtitles to the picture."
+#~ msgstr "ASS/SSA Untertitel zum Bild hinzuf?gen."
+#~ msgid "Blend remover"
+#~ msgstr "Mischung zur?ck nehmen"
+#~ msgid "Remove blend between previous and next picture."
+#~ msgstr "?berblendung zwischen vorherigem und n?chstem Bild entfernen."
+#~ msgid "Hard pulldown removal"
+#~ msgstr "\"Pulldown\" Bilder entfernen"
+#~ msgid "Remove IVTC that has been analog captured or resized."
+#~ msgstr "IVTC entfernen, wenn analog aufgenommen oder Gr??e ver?ndert wurde."
+#~ msgid "Whirl"
+#~ msgstr "Wirbel"
+#~ msgid "Useless whirlwind effect."
+#~ msgstr "Nutzloser Wirbelwind-Effekt."
+#~ msgid "Mosaic"
+#~ msgstr "Mosaik"
+#~ msgid "Split the picture into tiny thumbnails."
+#~ msgstr "Bild aufteilen in kleine Vorschaubilder."
+#~ msgid "MPlayer delogo"
+#~ msgstr "Mplayer Delogo (Logo-Entfernung)"
+#~ msgid "Blend a logo by interpolating its surrounding box."
+#~ msgstr "Logo einblenden durch Interpolieren der Surrounding Box."
+#~ msgid "Logo"
+#~ msgstr "Logo"
+#~ msgid "Add a png as logo."
+#~ msgstr "Ein PNG-Bild als Logo hinzuf?gen."
+#~ msgid "Create a video made of 6 mini windows, very useful to do DVD menus."
+#~ msgstr "Video mit 6 Minifenstern erstellen, sehr n?tzlich f?r DVD Men?s."
+#~ msgid "Internal error finding codec '"
+#~ msgstr "Interner Fehler beim Finden des Codec"
+#~ msgid "Metrics"
+#~ msgstr "Ma?e"
+#~ msgid "Do you want to print metrics on screen ?"
+#~ msgstr "Sollen Ma?e angezeigt werden ?"
+#~ msgid "_Mask"
+#~ msgstr "_Maske"
+#~ msgid "_High Q"
+#~ msgstr "_Hohe Q"
+#~ msgid "_Threshold:"
+#~ msgstr "_Schwelle:"
+#~ msgid "Fast"
+#~ msgstr "Schnell"
+#~ msgid "Medium"
+#~ msgstr "Mittel"
+#~ msgid "Slow iterative motion search"
+#~ msgstr "Langsame iterative Bewegungssuche"
+#~ msgid "Extra slow (same as 3+multiple reference frames)"
+#~ msgstr "Besonders langsam (?hnlich wie 3+ Mehrfach-Referenz-Bilder)"
+#~ msgid "Bottom"
+#~ msgstr "Unten"
+#~ msgid "_Field dominance:"
+#~ msgstr "_Feld Dominanz:"
+#~ msgid "_Qp:"
+#~ msgstr "_Qp:"
+#~ msgid "_Spatial luma strength:"
+#~ msgstr "R?umliche Brillianz-_St?rke:"
+#~ msgid "S_patial chroma strength:"
+#~ msgstr "?rtliche Far_bintensit?ts-St?rke:"
+#~ msgid "_Temporal strength:"
+#~ msgstr "_Tempor?re St?rke:"
+#~ msgid "_Luma lock:"
+#~ msgstr "_Brillianz arretieren:"
+#~ msgid "C_hroma lock:"
+#~ msgstr "Farbin_tensit?t arretieren:"
+#~ msgid "L_uma threshold:"
+#~ msgstr "Brillianz Schwelle:"
+#~ msgid "Ch_roma threshold:"
+#~ msgstr "Fa_rbintensit?t Schwelle:"
+#~ msgid "_Scene change:"
+#~ msgstr "_Szenenwechsel:"
+#~ msgid "Stabilize Threshold"
+#~ msgstr "Schwelle stabilisieren"
+#~ msgid "_Luma threshold:"
+#~ msgstr "Brillianz Schwelle:"
+#~ msgid "C_hroma threshold:"
+#~ msgstr "Fa_rbintensit?t Schwelle:"
+#~ msgid "_Radius:"
+#~ msgstr "_Radius:"
+#~ msgid "_Process luma"
+#~ msgstr "Brillianz verarbeiten"
+#~ msgid "Process luma plane"
+#~ msgstr "Brillianz verarbeiten (luma-plane)"
+#~ msgid "P_rocess chroma"
+#~ msgstr "Farbintensit?t ve_rarbeiten"
+#~ msgid "Large Median 5x5"
+#~ msgstr "Gro?er Mittelwert 5x5"
+#~ msgid "_Left border:"
+#~ msgstr "_Linker Rand:"
+#~ msgid "_Right border:"
+#~ msgstr "_Rechter Rand:"
+#~ msgid "_Top border:"
+#~ msgstr "_Oberer Rand:"
+#~ msgid "_Bottom border:"
+#~ msgstr "_Unterer Rand:"
+#~ msgid "Blacken Borders"
+#~ msgstr "Geschw?rzte R?nder"
+#~ msgid "Incorrect parameters"
+#~ msgstr "Fehlerhafte Parameter"
+#~ msgid "All parameters must be even and within range."
+#~ msgstr "Alle Parameter m?ssen gleich und innerhalb des Bereichs sein."
+#~ msgid "Keep nb of frames and fps"
+#~ msgstr "nb von Bildern und Bilder/s erhalten"
+#~ msgid "Double nb of frames and fps"
+#~ msgstr "Doppelte nb von Bildern und fps"
+#~ msgid "Double nb of frames (slow motion)"
+#~ msgstr "Doppelte nb von Bildern (langsame Bewegung)"
+#~ msgid "_Extra"
+#~ msgstr "_Extras"
+#~ msgid "Extra check, avoid using it"
+#~ msgstr "Zus?tzliche Pr?fung (Benutzung vermeiden)"
+#~ msgid "DGBob"
+#~ msgstr "DGBob"
+#~ msgid "_New frame rate:"
+#~ msgstr "_Neue Bildrate:"
+#~ msgid "_Blend"
+#~ msgstr "_Mischen"
+#~ msgid "Discard closer"
+#~ msgstr "Enger ablegen"
+#~ msgid "Replace (interpolate)"
+#~ msgstr "Ersetzen (interpolieren)"
+#~ msgid "Discard longer dupe (anim?s)"
+#~ msgstr "L?ngere Duplikate entfernen (anim?s)"
+#~ msgid "Pulldown dupe removal"
+#~ msgstr "\"Pulldown\" Duplikaten entfernen"
+#~ msgid "Fastest (no chroma, partial luma)"
+#~ msgstr "Am Schnellsten (partielle Brillianz, keine Farbintensit?t)"
+#~ msgid "Fast (partial luma and chroma)"
+#~ msgstr "Schnell (partielle Brillianz und Farbintensit?t)"
+#~ msgid "Medium (full luma, no chroma)"
+#~ msgstr "Mittel (volle Brillianz, keine Farbintensit?t)"
+#~ msgid "Slow (full luma and chroma)"
+#~ msgstr "Langsam (volle Brillianz und Farbintensit?t)"
+#~ msgid "_Threshold 1:"
+#~ msgstr "_Schwelle 1:"
+#~ msgid "T_hreshold 2:"
+#~ msgstr "S_chwelle 2:"
+#~ msgid "C_ycle:"
+#~ msgstr "_Durchlauf:"
+#~ msgid "_Try reverse"
+#~ msgstr "Umgekehrt _versuchen"
+#~ msgid "Pal Field Shift"
+#~ msgstr "PAL Felder Verschiebung"
+#~ msgid "_High quality"
+#~ msgstr "_Hohe Qualit?t"
+#~ msgid "Show _mask"
+#~ msgstr "_Maske anzeigen"
+#~ msgid "MSmooth"
+#~ msgstr "MSmooth"
+#~ msgid "_Luma temporal threshold:"
+#~ msgstr "Tempor?re _Brillianz-Schwelle:"
+#~ msgid "Ch_roma temporal threshold:"
+#~ msgstr "Tempor?re Farb_intensit?ts-Schwelle"
+#~ msgid "No strategy"
+#~ msgstr "Keine Strategie"
+# Einzelbilder des Films werden abwechselnd zweifach und dreifach aufgezeichnet, so da? sich aus je zwei Einzelbildern des Films immer f?nf Fernseh-Halbbilder ergeben.
+# 59,94 Hz vertikal -> 60 Halbbilder
+#~ msgid "3:2 pulldown"
+#~ msgstr "3:2 Pulldown"
+#~ msgid "PAL/SECAM"
+#~ msgstr "PAL/SECAM"
+#~ msgid "Never"
+#~ msgstr "Nie"
+#~ msgid "If still combed"
+#~ msgstr "Wenn noch kombiniert"
+#~ msgid "Always"
+#~ msgstr "Immer"
+#~ msgid "None but compute"
+#~ msgstr "Nichts zu berechnen"
+#~ msgid "Postproc on best match"
+#~ msgstr "Postprozess nach bestem Treffer"
+#~ msgid "Postproc and show zones (debug)"
+#~ msgstr "Postprozess und 'Show Zones' (Debug)"
+#~ msgid "Process image (not fields)"
+#~ msgstr "Bild verarbeiten (keine Felder)"
+#~ msgid "Process image (not fields), debug"
+#~ msgstr "Bild verarbeiten (keine Felder) (Debug)"
+#~ msgid "_Strategy:"
+#~ msgstr "_Strategie:"
+#~ msgid "_Postprocessing:"
+#~ msgstr "_Nachbearbeitung:"
+#~ msgid "_Try backward:"
+#~ msgstr "R?ckw?rts _versuchen:"
+#~ msgid "_Direct threshold:"
+#~ msgstr "_Direkte Schwelle:"
+#~ msgid "_Backward threshold:"
+#~ msgstr "_R?ckw?rts-Schwelle:"
+#~ msgid "_Noise threshold:"
+#~ msgstr "R_auschschwelle:"
+#~ msgid "Postp_rocessing threshold:"
+#~ msgstr "Nachbea_rbeitungs-Schwelle:"
+#~ msgid "_Use chroma to decide"
+#~ msgstr "Farbintensit?t zur Entscheidung ben_utzen"
+#~ msgid "Sho_w info"
+#~ msgstr "Zei_ge Info"
+#~ msgid "Debu_g"
+#~ msgstr "Fehlers_uche"
+#~ msgid "Bl_end"
+#~ msgstr "V_ermischen"
+#~ msgid "DropOut Threshold"
+#~ msgstr "Schwelle ?berschritten"
+#~ msgid "Drop Out"
+#~ msgstr "?berschreitung"
+#~ msgid "Out"
+#~ msgstr "Ausblenden"
+#~ msgid "Fade out"
+#~ msgstr "Ausblenden"
+#~ msgid "In"
+#~ msgstr "Einblenden"
+#~ msgid "Fade in"
+#~ msgstr "Einblenden"
+#~ msgid "_Fade type:"
+#~ msgstr "Ein_blendtyp:"
+#~ msgid "_Start frame:"
+#~ msgstr "Start-Bild:"
+#~ msgid "_End frame:"
+#~ msgstr "End-Bild:"
+#~ msgid "Fade to _black"
+#~ msgstr "?berblenden mit _Schwarz"
+#~ msgid "Parameter Error"
+#~ msgstr "Parameter Fehler"
+#~ msgid "Start must be before end, and both within video # of frames."
+#~ msgstr "Start muss vor dem Ende sein, und beide innerhalb der # der Bilder."
+#~ msgid "Motion Threshold"
+#~ msgstr "Bewegungsschwelle"
+#~ msgid "Blend Threshold"
+#~ msgstr "Mischungsschwelle"
+#~ msgid ""
+#~ "If value is smaller than threshold it is considered valid.Smaller value "
+#~ "might mean more false positive."
+#~ msgstr ""
+#~ "Wenn der Wert kleiner als die Schwelle ist, wird er als g?ltig "
+#~ "angenommen. Kleinere Werte bedeuten mehr falsch-positiv"
+#~ msgid "_Noise:"
+#~ msgstr "_Rauschen:"
+#~ msgid "If pixels are closer than noise, they are considered to be the same"
+#~ msgstr ""
+#~ "Wenn Pixel sich n?her sind als das Rauschen, dann nimm an, dass sie "
+#~ "gleich sind"
+#~ msgid "I_dentical:"
+#~ msgstr "I_dentisch:"
+#~ msgid "If metric is less than identical, images are considered identical"
+#~ msgstr ""
+#~ "Wenn das Ma? kleiner oder identisch ist, wird davon ausgegangen, dass die "
+#~ "Bilder identisch sind"
+#~ msgid "_Show metrics"
+#~ msgstr "_Zeige Ma?e an"
+#~ msgid "Show metric in image (debug)"
+#~ msgstr "Zeige Ma?e im Bild (Debug)"
+#~ msgid "Blend Removal"
+#~ msgstr "Mischung zur?ck nehmen"
+#~ msgid "_Horizontal stacking:"
+#~ msgstr "_Horizontal stapeln:"
+#~ msgid "_Vertical stacking:"
+#~ msgstr "_Vertikal stapeln:"
+#~ msgid "_Shrink factor:"
+#~ msgstr "_Schrumpffaktor:"
+#~ msgid "Show _frame"
+#~ msgstr "_Bild anzeigen"
+#~ msgid "_Temporal threshold:"
+#~ msgstr "Zei_tliche Schwelle:"
+#~ msgid "_Spatial threshold:"
+#~ msgstr "R?umliche _Schwelle:"
+#~ msgid "Add Borders"
+#~ msgstr "R?nder addieren"
+#~ msgid "_Subtitle file (ASS/SSA):"
+#~ msgstr "_Untertitel Datei (ASS/SSA):"
+#~ msgid "_Line spacing:"
+#~ msgstr "Zei_lenabstand:"
+#~ msgid "_Font scale:"
+#~ msgstr "Schri_ftskalierung:"
+#~ msgid "_Top margin:"
+#~ msgstr "_Oberer Rand:"
+#~ msgid "Botto_m margin"
+#~ msgstr "_Unterer Rand:"
+#~ msgid ""
+#~ "If value is smaller than threshold it is considered valid. Smaller value "
+#~ "might mean more false positive"
+#~ msgstr ""
+#~ "Wenn der Wert kleiner als die Schwelle ist, wird er als g?ltig "
+#~ "angenommen. Kleinere Werte bedeuten mehr falsch-positiv"
+#~ msgid "_Identical:"
+#~ msgstr "_Identisch:"
+#~ msgid "Hard IVTC Removal"
+#~ msgstr "IVTC hart entfernen"
+#~ msgid "Fast Convolution"
+#~ msgstr "Schnelle Faltung"
+#~ msgid "Forced Postprocessing"
+#~ msgstr "Unbedingte Nachbearbeitung"
+#~ msgid "Linear blend"
+#~ msgstr "Lineare Mischung"
+#~ msgid "Linear interpolate"
+#~ msgstr "Linear interpolieren"
+#~ msgid "Cubic interpolate"
+#~ msgstr "Kubisch interpolieren"
+#~ msgid "Median interpolate"
+#~ msgstr "Mittelwertig interpolieren"
+#~ msgid "FFmpeg deint"
+#~ msgstr "FFmpeg deint (Halbbilder)"
+#~ msgid "_Deinterlacing:"
+#~ msgstr "_Deinterlacing:"
+#~ msgid "_Autolevel"
+#~ msgstr "_Automatische Ebene"
+#~ msgid "Smaller means more deinterlacing"
+#~ msgstr ""
+#~ "Kleiner bedeutet st?rkes Zusammenf?hren \n"
+#~ "der Halbbilder (deinterlaceing)"
+#~ msgid "_Sharper engine:"
+#~ msgstr "Sch?rfe optimieren"
+#~ msgid "T_woway"
+#~ msgstr "Zwei-_Weg"
+#~ msgid "Extrapolate better (better not to use it)"
+#~ msgstr "Besser extrapolieren (besser nicht benutzen)"
+#~ msgid "_Map"
+#~ msgstr "_?bersicht"
+#~ msgid "Show interlaced areas (for test!)"
+#~ msgstr "Bereiche mit Halbbildmodus anzeigen (f?r Tests!)"
+#~ msgid "Temporal & spatial check"
+#~ msgstr "Zeitliche & r?umliche Pr?fung"
+#~ msgid "Bob, temporal & spatial check"
+#~ msgstr "Bob, zeitliche & r?umliche Pr?fung"
+#~ msgid "Skip spatial temporal check"
+#~ msgstr "Ohne r?umliche & zeitliche Pr?fung"
+#~ msgid "Bob, skip spatial temporal check"
+#~ msgstr "Bob, ohne r?umliche & zeitliche Pr?fung"
+#~ msgid "_Order:"
+#~ msgstr "Reihenf_olge:"
+#~ msgid "90 degrees"
+#~ msgstr "90 Grad"
+#~ msgid "90?"
+#~ msgstr "90?"
+#~ msgid "180 degrees"
+#~ msgstr "180 Grad"
+#~ msgid "180?"
+#~ msgstr "180?"
+#~ msgid "270 degrees"
+#~ msgstr "270 Grad"
+#~ msgid "270?"
+#~ msgstr "270?"
+#~ msgid "_Angle:"
+#~ msgstr "Winkel:"
+#~ msgid "Width and height cannot be 0"
+#~ msgstr "Breite und H?he k?nnen nicht 0 sein"
+#~ msgid "Width and height cannot be odd"
+#~ msgstr "Breite und H?he k?nnen nicht ungerade sein"
+#~ msgid "_Logo (jpg file):"
+#~ msgstr "_Logo (jpg Datei):"
+#~ msgid "Select JPEG file"
+#~ msgstr "JPEG Datei ausw?hlen"
+#~ msgid "_X Position:"
+#~ msgstr "_X Position:"
+#~ msgid "_Y Position:"
+#~ msgstr "_Y Position:"
+#~ msgid "_Alpha:"
+#~ msgstr "_Alpha:"
+#~ msgid "Could not open subtitle file"
+#~ msgstr "Untertitel-Datei kann nicht ge?ffnet werden"
+#~ msgid "Cannot identify subtitle format"
+#~ msgstr "Kann Untertitel-Datei nicht identifizieren"
+#~ msgid "Fatal Error"
+#~ msgstr "Fataler Fehler"
+#~ msgid ""
+#~ "A fatal error has occurred.\n"
+#~ "\n"
+#~ "Click OK to generate debug information. This may take a few minutes to "
+#~ "complete."
+#~ msgstr ""
+#~ "Ein fataler Fehler wurde entdeckt.\n"
+#~ "\n"
+#~ "Bitte auf OK klicken um Debug-Informationen zu erstellen. Das kann einige "
+#~ "Minuten dauern."
+#~ msgid "can't create custom directory (%s)."
+#~ msgstr "Individuelles Verzeichnis (%s) konnte nicht erstellt werden."
+#~ msgid "can't create job directory (%s)."
+#~ msgstr "Kann Job Verzeichnis nicht erstellen (%s)."
+#~ msgid "Can't determine the Application Data folder."
+#~ msgstr "Verzeichnis f?r Anwendungen konnte nicht festgelegt werden."
+#~ msgid "can't determine $HOME."
+#~ msgstr "Kann $HOME nicht bestimmen"
+#~ msgid "Cannot create the .avidemux directory"
+#~ msgstr "Kann .avidemux Verzeichnis nicht erstellen"
+#~ msgid "Wrong output format"
+#~ msgstr "Falsches Ausgabeformat"
+#~ msgid "Select MPEG as the output."
+#~ msgstr "Mpeg f?r die Ausgabe ausw?hlen."
+#~ msgid "Wrong video codec"
+#~ msgstr "Falscher Video Codec"
+#~ msgid "Select DVD as the video codec for MPEG TS output."
+#~ msgstr "DVD als Video-Codec f?r die Mpeg TS Ausgabe ausw?hlen."
+#~ msgid "Fatal error"
+#~ msgstr "Fataler Fehler"
+#~ msgid "Could not open OSS audio device"
+#~ msgstr "OSS Audio-Ger?t kann nicht ge?ffnet werden"
+#~ msgid "Check the permissions for /dev/dsp."
+#~ msgstr "Pr?fe die Rechte f?r /dev/dsp."
+#~ msgid "Xvid4 and FAAC support is required for the iPod profile."
+#~ msgstr "Xvid4 und FAAC Unterst?tzung ist f?r das iPod Profil erforderlich."
 #~ msgid "_Disable reservoir:"
 #~ msgstr "Reservoir deaktivieren"
-
 #~ msgid "5  - High (Default)"
 #~ msgstr "5  - Hoch (Voreinstellung)"
-
 #~ msgid "6  - Very High"
 #~ msgstr "6  - Sehr hoch"
-
 #~ msgid "? 2001-2007 Mean"
 #~ msgstr "? 2001-2007 Mean"
-
 #~ msgid "Multiplatform video editor"
 #~ msgstr "Multiplatform Video-Editor"
-
 #~ msgid "http://www.avidemux.org"
 #~ msgstr "http://www.avidemux.org"
-
 #~ msgid "AutoCrop"
 #~ msgstr "Auto-Zuschnitt"
-
 #~ msgid "Reset"
 #~ msgstr "Zur?ck setzen"
-
 #~ msgid "Crop Left :"
 #~ msgstr "Zuschnitt Links:"
-
 #~ msgid "GTK+ (slow)"
 #~ msgstr "Gtk+ (langsam)"
-
 #~ msgid "SDL (GDI)"
 #~ msgstr "SDL (GDI)"
-
 #~ msgid "SDL (DirectX)"
 #~ msgstr "SDL (DirectX)"
-
 #~ msgid ""
 #~ "If the file is using B-frames as reference it can lead to a crash or "
 #~ "stuttering.\n"
@@ -8685,218 +7083,148 @@
 #~ "aber \n"
 #~ "<b>DAMIT GEHT DIE BILD-GENAUIGKEIT VERLOREN</b>.\n"
 #~ "Soll dieser Modus verwendet werden ?"
-
-#~ msgid "Internal error finding codec"
-#~ msgstr "Interner Fehler beim Finden eines Codec"
-
 #~ msgid "can't determine $USERPROFILE."
 #~ msgstr "Kann $USERPROFILE nicht bestimmen."
-
 #~ msgid "_Frames per second:"
 #~ msgstr "_Bilder pro Sekunde:"
-
 #~ msgid "You need Xvid4 and either LAME or FAAC support for the iPod profile"
 #~ msgstr ""
 #~ "F?r das iPod-Profil wird Xvid4 und LAME- oder FAAC-Unterst?tzung ben?tigt"
-
 #~ msgid "Invalid filename"
 #~ msgstr "Ung?ltiger Dateiname"
-
 #~ msgid "Please select or enter a valid filename."
 #~ msgstr "Bitte g?ltigen Dateinamen ausw?hlen oder eingeben."
-
 #~ msgid "Invalid jobname"
 #~ msgstr "Ung?ltiger Job-Name"
-
 #~ msgid "Please select or enter a valid jobname."
 #~ msgstr "Bitte g?ltigen Jobnamen ausw?hlen oder eingeben."
-
 #~ msgid "Select the output file"
 #~ msgstr "Ausgabe-Datei ausw?hlen"
-
 #~ msgid "Job name displayed in the job list and used as the script filename"
 #~ msgstr ""
 #~ "Jobname, der in der Job-Liste angezeigt und als Script-Dateiname "
 #~ "verwendet wird "
-
 #~ msgid "Filename of the audio/video output"
 #~ msgstr "Dateiname f?r die Audio/Video Ausgabe"
-
 #~ msgid "As input"
 #~ msgstr "Wie Eingang"
-
 #~ msgid "Mjpeg Configuration"
 #~ msgstr "Mjpeg Konfiguration"
-
 #~ msgid "Threshold output"
 #~ msgstr "Schwelle f?r Augabe"
-
 #~ msgid "Final output"
 #~ msgstr "Endg?ltige Ausgabe"
-
 #~ msgid "Select _Operation on each pixel P and input A:   "
 #~ msgstr "_Operation f?r jedes Pixel P und Eingang A ausw?hlen:"
-
 #~ msgid "Input _Type:   "
 #~ msgstr "Eingangs_typ:"
-
 #~ msgid "Input _File (convolution kernel):   "
 #~ msgstr "Eingangs_datei (Faltungsfilter):"
-
 #~ msgid "Select Convolution Kernel File"
 #~ msgstr "Faltungsfilter-Datei ausw?hlen"
-
 #~ msgid "Input _File (image file):   "
 #~ msgstr "Eingangs_datei (Bilddatei):"
-
 #~ msgid "First, _add to each float pixel value:   "
 #~ msgstr "Zuerst, _addiere jeden flie?enden Pixelwert:  "
-
 #~ msgid "Then, _multiply each float pixel value by:   "
 #~ msgstr "Dann, _vervielf?ltige jeden flie?enden Pixelwert um:  "
-
 #~ msgid "Mi_nimum loaded pixel value (will be scaled to 0):"
 #~ msgstr "Mi_nimaler Wert f?r geladene Pixel (voreingestellt auf 0):"
-
 #~ msgid "Ma_ximum loaded pixel value (will be scaled to 255):"
 #~ msgstr "Ma_ximaler Wert f?r geladene Pixel (voreingestellt auf 255):"
-
 #~ msgid "Pixel Value Scaling as Image File is Loaded"
 #~ msgstr "Pixelwert-Einstellung so wie die Bilddatei geladen wurde"
-
 #~ msgid "Input _Constant:      "
 #~ msgstr "Eingangs_konstante:"
-
 #~ msgid "Memory constant _alpha:   "
 #~ msgstr "Speicherkonstante _Alpha:"
-
 #~ msgid " = 1 / "
 #~ msgstr " = 1 / "
-
 #~ msgid "_Initial average (\"head start\") is "
 #~ msgstr "Anfangsdurchschnitt (\"head start\") ist "
-
 #~ msgid "straight"
 #~ msgstr "gerade / original"
-
 #~ msgid "rolling"
 #~ msgstr "Rollen"
-
 #~ msgid " average"
 #~ msgstr " Durchschnitt"
-
 #~ msgid "      of frames "
 #~ msgstr "      Bilder"
-
 #~ msgid " through "
 #~ msgstr " durch "
-
 #~ msgid "Integer _Bias (will be added to result of selected operation):"
 #~ msgstr "Ganzzahlige Tendenz (_Bias) (wird zum Ergebnis addiert):"
-
 #~ msgid "First, _add to each pixel result value:   "
 #~ msgstr "Zuerst, _addiere jeden Pixel-Ergebniswert:   "
-
 #~ msgid "Then, _multiply each pixel result value by:   "
 #~ msgstr "Dann, _vervielf?ltige jeden Pixel-Ergebniswert um:"
-
 #~ msgid "Mi_nimum result value (will be scaled to 0):"
 #~ msgstr "Mi_nimaler Ergebniswert (voreingestellt auf 0):"
-
 #~ msgid "Ma_ximum result value (will be scaled to 255):"
 #~ msgstr "Ma_ximaler Ergebniswert (voreingestellt auf 255):"
-
 #~ msgid "Pixel Value Scaling on Result of Selected Operation"
 #~ msgstr "Pixelwert-Einstellung als Ergebnis der ausgew?hlten Operation"
-
 #~ msgid "(description of current config will go here)"
 #~ msgstr "(Beschreibung der aktuellen Konfiguration kommt hierher)"
-
 #~ msgid "_Histogram every N frames (0 to disable):   "
 #~ msgstr "_Histogramm alle N Bilder (0 zum Deaktivieren):"
-
 #~ msgid "_Debugging settings (bits):   "
 #~ msgstr "_Fehlersuche Einstellungen (bits):"
-
 #~ msgid "Swiss Army Knife output"
 #~ msgstr "\"Swiss Army Knife\" Ausgabe"
-
 #~ msgid "Enable Preview"
 #~ msgstr "Vorschau aktivieren"
-
 # Teile = Gruppe von Pixeln
 #~ msgid "Particle Detection"
 #~ msgstr "Teile-Erkennung"
-
 #~ msgid "Mi_nimum area for a particle to be detected:    "
 #~ msgstr "Mi_nimaler Bereich f?r ein Teil, um es zu erkennen:"
-
 #~ msgid "Ma_ximum area for a particle to be detected:   "
 #~ msgstr "Ma_ximaler Bereich f?r ein Teil, um es zu erkennen:"
-
 #~ msgid "_Left side crop (ignore this many pixels on the left):        "
 #~ msgstr "_Linksseitiges Zuschneiden (ignoriert weiter links liegende Pixel):"
-
 #~ msgid "_Right side crop (ignore this many pixels on the right):     "
 #~ msgstr ""
 #~ "_Rechtsseitiges Zuschneiden (ignoriert weiter rechts liegende Pixel):"
-
 #~ msgid "_Top crop (ignore this many pixels on the top):                  "
 #~ msgstr ""
 #~ "_Oberes Zuschneiden (ignoriert diese Anzahl Pixel am oberen Rand):     "
-
 #~ msgid "_Bottom crop (ignore this many pixels on the bottom):   "
 #~ msgstr "_Unteres Zuschneiden (ignoriert weiter unten liegende Pixel):"
-
 #~ msgid "Output _Format:   "
 #~ msgstr "Ausgabe_format:"
-
 #~ msgid "_Camera Number for output file:      "
 #~ msgstr "_Kamera Nummer f?r die Ausgabedatei:"
-
 #~ msgid "Interlace"
 #~ msgstr "Halbbildmodus (interlace)"
-
 #~ msgid "Get Pixel Aspect Ratio from input video file"
 #~ msgstr "PAR (\"Pixel Aspect Ratio\") der Eingangs-Videodatei ?bernehmen"
-
 #~ msgid "<i>Threshold</i>"
 #~ msgstr "<i>Schwelle</i>"
-
 #~ msgid "<i>Strength</i>"
 #~ msgstr "<i>St?rke</i>"
-
 #~ msgid "Reduce fluctuations in Quantizer (after curve compression)"
 #~ msgstr "Schwankungen des Quantizer reduzieren (nach der Kurvenkompression)"
-
 #~ msgid "Custom matrix"
 #~ msgstr "Individuelle Matrix"
-
 #~ msgid "Two pass, final size"
 #~ msgstr "Zwei Durchl?ufe, endg?ltige Gr??e"
-
 #~ msgid "Two pass, average bitrate"
 #~ msgstr "Zwei Durchl?ufe, Durchschnitts-Bitrate"
-
 #~ msgid "Same Qz as input"
 #~ msgstr "Gleiche Qz wie Eingang"
-
 #~ msgid "Entry input for target file size or bitrate"
 #~ msgstr "Ziel-Dateigr??e oder Bitrate eingeben"
-
 #~ msgid "Quantizer (0-51):"
 #~ msgstr "Quantizer (0-51):"
-
 #~ msgid ""
 #~ "Uses chroma (color) components for motion for compression and helps the "
 #~ "quality"
 #~ msgstr ""
 #~ "Farbintensit?t (Farben) Komponenten f?r Bewegung benutzen zur Kompression "
 #~ "und als Hilfe f?r die Qualit?t"
-
 #~ msgid "Uncheck to enable fast p-skip"
 #~ msgstr "Abw?hlen des schnellen ?berspringen von P-Bildern"
-
 #~ msgid ""
 #~ "Lossless compression method which usually improves the bitrate usage by "
 #~ "15% (especially on high bitrate). Helps the quality a lot but is slower. "
@@ -8904,513 +7232,341 @@
 #~ "Verlustlose Kompressionsmethode, welche die Bitratenausnutzung gew?hnlich "
 #~ "um 15% verbessert (besonders bei hohen Bitraten). Hilft der Qualit?t "
 #~ "sehr, ist aber langsamer."
-
 #~ msgid "Deblocking Filter :"
 #~ msgstr "Deblockierungsfilter:"
-
 #~ msgid ""
 #~ "Set the amount of blurring to use for block edges when they are found"
 #~ msgstr ""
 #~ "Betrag des Weichzeichnens festlegen, zur Anwendung an gefundenen "
 #~ "Blockkanten"
-
 #~ msgid "Define the level for when deblocking is applied"
 #~ msgstr "Die Schwelle festlegen, ab der das Deblockieren anzuwenden ist"
-
 #~ msgid "Reduce fluctuations in QP (after curve compression)"
 #~ msgstr "Schwankungen des Quantizer reduzieren (nach der Kurvenkompression)"
-
 #~ msgid "Overwrite file ?"
 #~ msgstr "Datei ?berschreiben ?"
-
 #~ msgid "Very Low"
 #~ msgstr "Sehr niedrig"
-
 #~ msgid "Very High"
 #~ msgstr "Sehr hoch"
-
 #~ msgid "Motion Search Precision"
 #~ msgstr "Bewegungssuche Genauigkeit"
-
 #~ msgid "Off"
 #~ msgstr "Aus"
-
 #~ msgid "Mode Decision"
 #~ msgstr "Modus Entscheidung"
-
 #~ msgid "Limited Search"
 #~ msgstr "Begrenzte Suche"
-
 #~ msgid "Medium Search"
 #~ msgstr "Mittlere Suche"
-
 #~ msgid "Wide Search"
 #~ msgstr "Weite Suche"
-
 #~ msgid "VHQ Mode"
 #~ msgstr "VHQ Modus"
-
 #~ msgid "Quarter Pixel"
 #~ msgstr "Viertel-Pixel (Qpel)"
-
 #~ msgid "GMC"
 #~ msgstr "GMC"
-
 #~ msgid "BVHQ"
 #~ msgstr "BVHQ"
-
 #~ msgid "4MV"
 #~ msgstr "4MV"
-
 #~ msgid "HQ AC"
 #~ msgstr "HQ AC"
-
 #~ msgid "More Search"
 #~ msgstr "Weitere Suche"
-
 #~ msgid "Min Gop Size"
 #~ msgstr "Min. Gop Gr??e"
-
 #~ msgid "Max Gop Size"
 #~ msgstr "Max. Gop Gr??e"
-
 #~ msgid "GOP Size"
 #~ msgstr "GOP Gr??e"
-
 #~ msgid "H263"
 #~ msgstr "H263"
-
 #~ msgid "Mpeg"
 #~ msgstr "Mpeg"
-
 #~ msgid "Quantization Matrix"
 #~ msgstr "Quantization Matrix"
-
 #~ msgid "Trellis Quantization"
 #~ msgstr "Trellis Quantization"
-
 #~ msgid "Two Pass Tuning"
 #~ msgstr "Zweifach-Durchlauf"
-
 #~ msgid "Curve Compression"
 #~ msgstr "Kurven-Kompression"
-
 #~ msgid "# Images :%0lu"
 #~ msgstr "# Bilder :%0lu"
-
 #~ msgid "Time Left :%02d:%02d:%02d"
 #~ msgstr "Restzeit :%02d:%02d:%02d"
-
 #~ msgid "Max Ref Frames"
 #~ msgstr "Max. Ref. Bilder"
-
 #~ msgid "Fast P Skip"
 #~ msgstr "Schneller P-Skip"
-
 #~ msgid "Disabled"
 #~ msgstr "Deaktiviert"
-
 #~ msgid "8x8P Transform"
 #~ msgstr "8x8P Transformation"
-
 #~ msgid "8x8B Transform"
 #~ msgstr "8x8B Transformation"
-
 #~ msgid "_4x4 Transform"
 #~ msgstr "_4x4 Transformation"
-
 #~ msgid "_8x8I Transform"
 #~ msgstr "_8x8I Transformation"
-
 #~ msgid "_4x4I Transform"
 #~ msgstr "_4x4I Transformation"
-
 #~ msgid "Job Name"
 #~ msgstr "Job Name"
-
 #~ msgid "Status"
 #~ msgstr "Status"
-
 #~ msgid "Start Time"
 #~ msgstr "Startzeit"
-
 #~ msgid "End Time"
 #~ msgstr "Endezeit"
-
 #~ msgid "Delete *all* job"
 #~ msgstr "*Alle* Jobs l?schen"
-
 #~ msgid "Are you sure you want to delete ALL jobs ?"
 #~ msgstr "Sollen wirklich alle Jobs gel?scht werden ?"
-
 #~ msgid "Already done"
 #~ msgstr "Schon erledigt"
-
 #~ msgid "This script has already been successfully executed."
 #~ msgstr "Dieses Skript wurde bereits erfolgreich ausgef?hrt."
-
 #~ msgid "%c (%02d)"
 #~ msgstr "%c (%02d)"
-
 #~ msgid "Select File to Read"
 #~ msgstr "Einzulesende Datei ausw?hlen"
-
 #~ msgid "Select File to Write"
 #~ msgstr "Zu schreibende Datei ausw?hlen"
-
 #~ msgid "Select Directory"
 #~ msgstr "Verzeichnis ausw?hlen"
-
 #~ msgid "Partial Start Frame:"
 #~ msgstr "Ausschnitt Start-Bild:"
-
 #~ msgid "Partial End Frame:"
 #~ msgstr "Ausschnitt Ende-Bild:"
-
 #~ msgid "Configure child"
 #~ msgstr "Konfiguriere Kind"
-
 #~ msgid "Zoom _4:1"
 #~ msgstr "Zoom _4:1"
-
 #~ msgid "Select Glyphfile to save to"
 #~ msgstr "Zeichensatzdatei zum Speichern ausw?hlen"
-
 #~ msgid "<b>Glyphs</b>"
 #~ msgstr "<b>Schriftzeichen</b>"
-
 #~ msgid "  "
 #~ msgstr "  "
-
 #~ msgid "<b>Files</b>"
 #~ msgstr "<b>Dateien</b>"
-
 #~ msgid "StartOcr"
 #~ msgstr "StartOcr"
-
 #~ msgid "Select SRT to save"
 #~ msgstr "Zu speichernde SRT ausw?hlen"
-
 #~ msgid "Select Glyoh to save"
 #~ msgstr "Zu speichernde Schriftzeichen ausw?hlen"
-
 #~ msgid "No glyphs to save"
 #~ msgstr "Keine Schriftzeichen zum Speichern vorhanden"
-
 #~ msgid "Erase current glyphs ?"
 #~ msgstr "Aktuelle Schriftzeichen l?schen ?"
-
 #~ msgid "Standard"
 #~ msgstr "Standard"
-
 #~ msgid "<b>General</b>"
 #~ msgstr "<b>generell</b>"
-
 #~ msgid "Chapter 1"
 #~ msgstr "Kapitel 1"
-
 #~ msgid "Chapter 2"
 #~ msgstr "Kapitel 2"
-
 #~ msgid "Chapter 3"
 #~ msgstr "Kapitel 3"
-
 #~ msgid "Chapter 4"
 #~ msgstr "Kapitel 4"
-
 #~ msgid "Chapter 5"
 #~ msgstr "Kapitel 5"
-
 #~ msgid "Chapter 6"
 #~ msgstr "Kapitel 6"
-
 #~ msgid "Start frame for this vignette."
 #~ msgstr "Starte Bild f?r diese Vignette."
-
 #~ msgid "<b>TimeCode</b>"
 #~ msgstr "<b>Zeit-Code</b>"
-
 #~ msgid "<b>Elasped:</b>"
 #~ msgstr "<b>Vergangen:</b>"
-
 #~ msgid "Bitrate Calculator"
 #~ msgstr "Bitrate Taschenrechner"
-
 #~ msgid "/0000000"
 #~ msgstr "/0000000"
-
 #~ msgid "Previous"
 #~ msgstr "Vorheriges"
-
 #~ msgid "Next"
 #~ msgstr "N?chstes"
-
-#~ msgid "Audio codecs:"
-#~ msgstr "Audio Kodierer:"
-
 #~ msgid "Miscellaneous libraries:"
 #~ msgstr "Verschiedene Bibliotheken:"
-
 #~ msgid "Alsa"
 #~ msgstr "Alsa"
-
 #~ msgid "Swap U & V:"
 #~ msgstr "U mit V tauschen:"
-
 #~ msgid "Lavcodec Decoder Configuration"
 #~ msgstr "Libavcodec Dekodierer Konfiguration"
-
 #~ msgid "Bottom Field First"
 #~ msgstr "Unteres Feld zuerst"
-
 #~ msgid "Vobsub file:"
 #~ msgstr "Vobsub Datei:"
-
 #~ msgid "Vob 2 Vobsub"
 #~ msgstr "Vob nach Vobsub"
-
 #~ msgid "VOB file"
 #~ msgstr "VOB Datei"
-
 #~ msgid "IFO file"
 #~ msgstr "IFO Datei"
-
 #~ msgid "The selected IFO file does not exist."
 #~ msgstr "Die ausgew?hlte IFO Datei existiert nicht."
-
 #~ msgid "Color"
 #~ msgstr "Farbe"
-
 #~ msgid "AVI, unp. VOP"
 #~ msgstr "AVI, ungepack. VOP"
-
 #~ msgid "Mode"
 #~ msgstr "Modus"
-
 #~ msgid "Quality"
 #~ msgstr "Qualit?t"
-
 #~ msgid "Threshold 1"
 #~ msgstr "Schwelle 1"
-
 #~ msgid "Threshold 2"
 #~ msgstr "Schwelle 2"
-
 #~ msgid "Field Order"
 #~ msgstr "Feldreihenfolge"
-
 #~ msgid "Post Processing"
 #~ msgstr "Nachbearbeitung"
-
 #~ msgid "threshold"
 #~ msgstr "Schwelle"
-
 #~ msgid "noise"
 #~ msgstr "Rauschen"
-
 #~ msgid "If pixel are closer than noise, they are considered to be the same"
 #~ msgstr ""
 #~ "Wenn Pixel sich n?her sind als das Rauschen, dann nimm an, dass sie "
 #~ "gleich sind"
-
 #~ msgid "identical"
 #~ msgstr "identisch"
-
 #~ msgid "show"
 #~ msgstr "zeigen"
-
 #~ msgid "Bob, T+S check"
 #~ msgstr "Bob, zeitliche & r?umliche Pr?fung"
-
 #~ msgid "New FPS?"
 #~ msgstr "Neues FPS?"
-
 #~ msgid "Nothing to do."
 #~ msgstr "Nichts zu tun."
-
 #~ msgid "average quantizer"
 #~ msgstr "durchschnittl. Quantizer"
-
 #~ msgid "XVCD encoding"
 #~ msgstr "XVCD Kodierung"
-
 #~ msgid "Constant Bitrate"
 #~ msgstr "Konstante Bitrate"
-
 #~ msgid "Dual pass"
 #~ msgstr "Zweifach-Durchlauf"
-
 #~ msgid "Min bitrate (kbps) :"
 #~ msgstr "Min. Bitrate (KB/s):"
-
 #~ msgid "Default mpeg"
 #~ msgstr "Voreingestellte Mpeg"
-
 #~ msgid "Tmpeng "
 #~ msgstr "Tmpeng "
-
 #~ msgid "Anim?"
 #~ msgstr "Anime (jp.)"
-
 #~ msgid "K-VCD"
 #~ msgstr "K-VCD"
-
 #~ msgid "Gop Size  (12):"
 #~ msgstr "Gop Gr??e  (12):"
-
 #~ msgid "Use Xvid ratecontrol"
 #~ msgstr "Xvid Bitratenpr?fung verwenden"
-
 #~ msgid "Field Order :"
 #~ msgstr "Feld-Reihenfolge:"
-
 #~ msgid "Sharp :"
 #~ msgstr "Scharf :"
-
 #~ msgid "0 (read manual)"
 #~ msgstr "0 (Handbuch lesen)"
-
 #~ msgid "1 (read manual)"
 #~ msgstr "1 (Handbuch lesen)"
-
 #~ msgid "2 (read manual)"
 #~ msgstr "2 (Handbuch lesen)"
-
 #~ msgid "Mpeg2 options"
 #~ msgstr "Mpeg2 Dekodierer Optionen"
-
 #~ msgid "Other arg"
 #~ msgstr "Andere Arg."
-
 #~ msgid "Quantisation (2-31)"
 #~ msgstr "Quantisierung (2-31)"
-
 #~ msgid "Maximum bitrate (kbps)"
 #~ msgstr "Maximale Bitrate (kbit/s)"
-
 #~ msgid "Swap UV"
 #~ msgstr "UV tauschen"
-
 #~ msgid "Subtitle to load"
 #~ msgstr "Zu ladende Untertitel"
-
 #~ msgid "TTF font to use"
 #~ msgstr "Zu benutzende Truetype Schrift"
-
 #~ msgid "Subtitle selector"
 #~ msgstr "Untertitel Auswahl"
-
 #~ msgid "font"
 #~ msgstr "Schrift"
-
 #~ msgid "Ascii"
 #~ msgstr "ASCII"
-
 #~ msgid "Select color"
 #~ msgstr "Farbe ausw?hlen"
-
 #~ msgid "Select"
 #~ msgstr "Ausw?hlen"
-
 #~ msgid "Force background"
 #~ msgstr "Erzwinge Hintergrund"
-
 #~ msgid "Select Vob file to scan"
 #~ msgstr "Einzulesende VOB-Datei ausw?hlen"
-
 #~ msgid "Select ifo file to use"
 #~ msgstr "Zu benutzende IFO-Datei ausw?hlen"
-
 #~ msgid "Invalid vobname"
 #~ msgstr "Ung?ltiger VOB-Name"
-
 #~ msgid "Please select or enter a valid vob name"
 #~ msgstr "Bitte einen g?ltigen VOB-Dateinamen ausw?hlen oder eingeben"
-
 #~ msgid "Invalid ifo"
 #~ msgstr "Ung?ltiger IFO-Name"
-
 #~ msgid "Invalid vobsubname"
 #~ msgstr "Ung?ltiger VobSub-Name"
-
 #~ msgid "Please select or enter a valid vobsub file"
 #~ msgstr "Bitte einen g?lten VobSub-Dateinamen ausw?hlen oder eingeben"
-
 #~ msgid "Vob :"
 #~ msgstr "Vob :"
-
 #~ msgid "Ifo :"
 #~ msgstr "Ifo :"
-
 #~ msgid "Output vobsub (.idx) :"
 #~ msgstr "Ausgabe VobSub (.idx) :"
-
 #~ msgid "Option "
 #~ msgstr "Option "
-
 #~ msgid "Enable _time shift"
 #~ msgstr "Zei_tverschiebung einschalten"
-
 #~ msgid "_Enable resampling"
 #~ msgstr "_Erlaube Resampling"
-
 #~ msgid "Done : %02d%%"
 #~ msgstr "Fertig : %02d%%"
-
 #~ msgid "Encoding in Progress"
 #~ msgstr "Kodieren l?uft"
-
 #~ msgid "<b><big>Encoding files</big></b>"
 #~ msgstr "<b><big>Zu kodierende Dateien</big></b>"
-
 #~ msgid "00000/00000"
 #~ msgstr "00000/00000"
-
 #~ msgid "<b>FPS:</b>"
 #~ msgstr "<b>FPS:</b>"
-
 #~ msgid "31"
 #~ msgstr "31"
-
 #~ msgid "<b>ETA:</b>"
 #~ msgstr "<b>ETA:</b>"
-
 #~ msgid "0 h 0 mn 0 s"
 #~ msgstr "0 h 0 mn 0 s"
-
 #~ msgid "Mjpeg Codec settings"
 #~ msgstr "Mjpeg Codec Einstellungen"
-
-#~ msgid "Audio Processing"
-#~ msgstr "Audio Bearbeitung"
-
 #~ msgid "DRC"
 #~ msgstr "DRC"
-
 #~ msgid "Timeshift"
 #~ msgstr "Zeitverschiebung"
-
 #~ msgid "<b>Fps convert</b>"
 #~ msgstr "<b>Fps konvertieren</b>"
-
 #~ msgid "Manual (db) : "
 #~ msgstr "Manuell (db) : "
-
 #~ msgid "<b>Gain</b>"
 #~ msgstr "<b>Verst?rkung</b>"
-
 #~ msgid "<b>Mixer</b>"
 #~ msgstr "<b>Mixer</b>"
-
 #~ msgid "Int. TFF"
 #~ msgstr "Int. TFF"
-
 #~ msgid "Int. BFF"
 #~ msgstr "Int. BFF"
-
 #~ msgid "Aspect Ratio"
 #~ msgstr "Seitenverh?ltnis"
-
 #, fuzzy
 #~ msgid "Horizontal deblocking"
 #~ msgstr "_Horizontal entblockieren"
@@ -9442,13 +7598,10 @@
 #, fuzzy
 #~ msgid "Avi Muxer Option"
 #~ msgstr "AVI _Multiplexer Optionen"
-
 #~ msgid "Expect troubles"
 #~ msgstr "Erwarte Schwierigkeiten"
-
 #~ msgid "Select Jpeg to save "
 #~ msgstr "Zu speichernde Jpeg-Datei ausw?hlen"
-
 #~ msgid "Select  file to save "
 #~ msgstr "Zu speichernde Datei ausw?hlen"
 
@@ -9459,224 +7612,155 @@
 #, fuzzy
 #~ msgid "Filename"
 #~ msgstr "_Datei"
-
 #~ msgid "AVI muxer options"
 #~ msgstr "AVI Multiplexer Optionen"
-
 #~ msgid "Mux audio every"
 #~ msgstr "Multiplexe Audio jede"
-
 #~ msgid "Split in packets of"
 #~ msgstr "Aufteilen in Pakete von"
-
 #~ msgid "bytes"
 #~ msgstr "Bytes"
-
 #~ msgid "Autosplit file every"
 #~ msgstr "Datei aufteilen jede"
-
 #~ msgid "megabytes"
 #~ msgstr "Megabytes"
-
 #~ msgid "h"
 #~ msgstr "h"
-
 #~ msgid "mn"
 #~ msgstr "mn"
-
 #~ msgid "s"
 #~ msgstr "s"
-
 #~ msgid "NONE"
 #~ msgstr "KEINE"
-
 #~ msgid "Informations"
 #~ msgstr "Informationen"
-
 #~ msgid "Video Duration  "
 #~ msgstr "Video Verz?gerung  "
-
 #~ msgid "GMC "
 #~ msgstr "GMC "
-
 #~ msgid "Bitrate "
 #~ msgstr "Bitrate "
-
 #~ msgid "Audio duration  "
 #~ msgstr "Audio Verz?gerung  "
-
 #~ msgid "FFmpeg encoding options"
 #~ msgstr "FFmpeg Dekodierer Optionen"
-
 #~ msgid "Set quantizer for a constant quantizer/quality encoding"
 #~ msgstr "Quantizer setzen f?r konstante Quantizer/Qualit?ts-Kodierung"
-
 #~ msgid "Enable interlaced encoding"
 #~ msgstr "Interlace-Kodierung aktivieren"
-
 #~ msgid "_Aspect ratio"
 #~ msgstr "S_eitenverh?ltnis"
-
 #~ msgid ""
 #~ "Set MPEG-4 aspect ratio (warning: MPlayer supports it, but most other "
 #~ "players don't)"
 #~ msgstr ""
 #~ "Seitenverh?ltnis f?r MPEG-4 setzen (Achtung: MPlayer unterst?tzt dies, "
 #~ "die meisten Programme aber nicht)"
-
 #~ msgid "ME method:"
 #~ msgstr "ME Methode:"
-
 #~ msgid "Max I-frame interval:"
 #~ msgstr "Max. I-Frame Intervall:"
-
 #~ msgid "Allow 4 motion vectors per macroblock (slightly better quality)"
 #~ msgstr ""
 #~ "4 Bewegungsvektoren pro Makroblock erlauben (etwas bessere Qualit?t)"
-
 #~ msgid "MV0"
 #~ msgstr "MV0"
-
 #~ msgid "0: None"
 #~ msgstr "0: Keine"
-
 #~ msgid "5: X1"
 #~ msgstr "5: X1"
-
 #~ msgid "Maximum interval between keyframes in frames"
 #~ msgstr "Maximales Intervall zwischen Keyframes in Bildern"
-
 #~ msgid "0: SAD"
 #~ msgstr "0: SAD"
-
 #~ msgid "1: SSE"
 #~ msgstr "1: SSE"
-
 #~ msgid "2: SATD"
 #~ msgstr "2: SATD"
-
 #~ msgid "3: DCT"
 #~ msgstr "3: DCT"
-
 #~ msgid "4: PSNR"
 #~ msgstr "4: PSNR"
-
 #~ msgid "5: BIT"
 #~ msgstr "5: BIT"
-
 #~ msgid "6: RD"
 #~ msgstr "6: RD"
-
 #~ msgid "7: ZERO"
 #~ msgstr "7: ZERO"
-
 #~ msgid "Subpixel:"
 #~ msgstr "Subpixel:"
-
 #~ msgid "Chroma"
 #~ msgstr "Farbintensit?t"
-
 #~ msgid "Use chroma, too, currently doesn't work (correctly) with B-frames"
 #~ msgstr ""
 #~ "Auch Farbintensit?t benutzen. Arbeitet aktuell nicht (korrekt) mit B-"
 #~ "Bildern"
-
 #~ msgid "ME comparison function"
 #~ msgstr "ME Vergleichsfunktion"
-
 #~ msgid "ME:"
 #~ msgstr "ME:"
-
 #~ msgid "adaptive, size 3"
 #~ msgstr "Adaptiv, Gr??e 3"
-
 #~ msgid "adaptive, size 2"
 #~ msgstr "Adaptiv, Gr??e 2"
-
 #~ msgid "experimental"
 #~ msgstr "experimentell"
-
 #~ msgid "normal, size 1"
 #~ msgstr "Normal, Gr??e 1"
-
 #~ msgid "normal, size 2"
 #~ msgstr "Normal, Gr??e 2"
-
 #~ msgid "Quantizer range - Min:"
 #~ msgstr "Quantizer-Bereich (Min.):"
-
 #~ msgid ""
 #~ "Trellis searched quantization will find the optimal encoding for each 8x8 "
 #~ "block"
 #~ msgstr ""
 #~ "Trellis-suchende Quantization findet die optimale Kodierung f?r jeden 8x8 "
 #~ "Block"
-
 #~ msgid "Rate distorted CBP"
 #~ msgstr "CBP Verzerrungsgrad"
-
 #~ msgid "Lumi masking:"
 #~ msgstr "Brillianz Maske:"
-
 #~ msgid "Luminance:"
 #~ msgstr "Brillianz:"
-
 #~ msgid "DC"
 #~ msgstr "DC"
-
 #~ msgid "Masking"
 #~ msgstr "Maskierung"
-
 #~ msgid "8000"
 #~ msgstr "8000"
-
 #~ msgid "Could not decode the frame"
 #~ msgstr "Kann das Bild nicht dekodieren"
-
 #~ msgid "Cannot encode frame"
 #~ msgstr "Kann Bild nicht kodieren"
-
 #~ msgid "Select 2nd track"
 #~ msgstr "Zweite Spur ausw?hlen"
-
 #~ msgid "Save Defaults"
 #~ msgstr "Voreinstellungen speichern"
-
 #~ msgid "Reset Defaults"
 #~ msgstr "Zu den Voreinstellungen zur?ck setzen"
-
 #~ msgid "_Swap marks A and B if A > B"
 #~ msgstr "_Passe die Marken A und B an, wenn A > B"
-
 #~ msgid "S_ave preferences on exit"
 #~ msgstr "Einstellungen beim _Beenden speichern"
-
 #~ msgid "_MPEG auto split (MB):"
 #~ msgstr "_MPEG automatische Aufteilung (MB):"
-
 #~ msgid "_Use OpenDML (don't split large AVI files)"
 #~ msgstr "Ben_utze OpenDML (kein Aufteilen von AVI Dateien)"
-
 #~ msgid "_Reuse 2-pass log"
 #~ msgstr "2. Durchlauf-Log wieder verwenden"
-
 #~ msgid "_Video output:"
 #~ msgstr "_Video Ausgabe:"
-
 #~ msgid "Path to external filters"
 #~ msgstr "Pfad zu externen Filtern"
-
 #~ msgid "Only Errors"
 #~ msgstr "nur Fehler"
-
 #~ msgid "All Messages"
 #~ msgstr "Alle Meldungen"
-
 #~ msgid "Save as dual audio avi"
 #~ msgstr "Speichern als 2 Kanal avi"
-
 #~ msgid "Export as mpeg video"
 #~ msgstr "Exportiere als mpeg Video"
-
 #~ msgid "External mpeg (mp2/mp3)"
 #~ msgstr "Externes mpeg (mp2/mp3)"
+



From mean at mail.berlios.de  Thu Jul 23 20:18:41 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Thu, 23 Jul 2009 20:18:41 +0200
Subject: [Avidemux-svn-commit] r5129 -
	branches/avidemux_2.6_branch_mean/avidemux/common/ADM_commonUI
Message-ID: <200907231818.n6NIIfuM009213@sheep.berlios.de>

Author: mean
Date: 2009-07-23 20:18:41 +0200 (Thu, 23 Jul 2009)
New Revision: 5129

Modified:
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_commonUI/DIA_bitrateHisto.cpp
Log:
[UI] Fix bitrate histogram

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_commonUI/DIA_bitrateHisto.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_commonUI/DIA_bitrateHisto.cpp	2009-07-22 17:09:30 UTC (rev 5128)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_commonUI/DIA_bitrateHisto.cpp	2009-07-23 18:18:41 UTC (rev 5129)
@@ -1,11 +1,8 @@
 /***************************************************************************
-                          ADM_guiBitrate  -  description
-                             -------------------
+                            \file   ADM_guiBitrate 
+                            \brief	Simple bitrate analyzer
 
-	Simple bitrate analyzer
-
-    begin                : Mon Aug 31 2003
-    copyright            : (C) 2003 by mean
+    copyright            : (C) 2003/2009 by mean
     email                : fixounet at free.fr
  ***************************************************************************/
 
@@ -19,18 +16,15 @@
  ***************************************************************************/
 
 #include <math.h>
-
-#include "config.h"
 #include "ADM_default.h"
 #include "DIA_coreToolkit.h"
 #include "DIA_factory.h"
-#include "avi_vars.h"
-
+#include "ADM_editor/ADM_edit.hxx"
 /**
       \fn GUI_displayBitrate
       \brief display a bargraph with bitrates
 */
-
+extern ADM_Composer *video_body;
 void GUI_displayBitrate( void )
 {
 
@@ -40,7 +34,7 @@
 
  float f;
 
- float display[20];
+float    display[20];
 uint32_t medium=0;
 uint32_t nbIFrame=0;
 uint32_t nbPFrame=0;
@@ -48,33 +42,44 @@
 uint32_t curBFrame=0;
 uint32_t maxBFrame=0;
 	// 1st compute the total
-	
+	uint32_t start,end;
+    uint64_t deltaTime=video_body->getMarkerBPts()-video_body->getMarkerAPts();
+    start=video_body->searchFrameBefore(video_body->getMarkerAPts());
+    end=video_body->searchFrameBefore(video_body->getMarkerBPts());
+    
+    // Se
 	max=0;
-	if(!(frameEnd>frameStart) || abs(frameStart-frameEnd)<5)
+	if((deltaTime<100000LL) || abs(start-end)<5)
 	{
           GUI_Error_HIG(QT_TR_NOOP("No data"), NULL);
 		return ;
 	}
+    uint64_t increment=video_body->getFrameIncrement();
+    f=increment;
+    if(f<1000) f=1000;
 
-	round=((avifileinfo->fps1000+990)/1000);
+    f=1000000./f; // ~ FPS
+    f=f*1000;     // 1000*fps
+    uint32_t fps1000=(uint32_t)f;
+	round= (fps1000+990)/1000; // round up of fps
 	if(!round) return;
 
-	video_body->getFrameSize (frameStart, &len);
+    printf("[Histogram] fps roundup %"LU" fps, time increment=%"LLU" us\n",round,increment);
+	video_body->getFrameSize (start, &len);
 	for(k=0;k<round;k++) average[k]=0;
 
 	sum=0;
 	changed=0;
-        total=0;
-        uint32_t flags;
-	// 1 st pass, compute max
-        /*
-            to do so : We compute the sum of frame size on [changed] frames i.e ~ 1 second
-        
+    total=0;
+    uint32_t flags;
+
+        /*  1 st pass, compute max
+            to do so : We compute the sum of frame size on [changed] frames i.e ~ 1 second        
         */
-	for( k=frameStart;k<frameEnd;k++)
+	for( k=start;k<end;k++)
 	{
  		video_body->getFrameSize (k, &len);
-                total+=len;
+        total+=len;
 		sum-=average[changed];
 		average[changed]=len;
 		sum+=average[changed];
@@ -82,30 +87,30 @@
 		if(sum>max) max=sum;
 		changed++;
 		changed%=round;
-                video_body->getFlags (k, &flags);
-                if(!flags) 
-                {
-                  nbPFrame++;
-                  curBFrame=0;
-                }
-                if(flags==AVI_KEY_FRAME) 
-                {
-                  nbIFrame++;
-                  curBFrame=0;
-                }
-                if(flags==AVI_B_FRAME)
-                {
-                  nbBFrame++;
-                  curBFrame++;
-                  if(curBFrame>maxBFrame) 
-                    maxBFrame=curBFrame;
-                  
-                }
+        video_body->getFlags (k, &flags);
+        if(!flags) 
+        {
+          nbPFrame++;
+          curBFrame=0;
+        }
+        if(flags==AVI_KEY_FRAME) 
+        {
+          nbIFrame++;
+          curBFrame=0;
+        }
+        if(flags==AVI_B_FRAME)
+        {
+          nbBFrame++;
+          curBFrame++;
+          if(curBFrame>maxBFrame) 
+            maxBFrame=curBFrame;
+          
+        }
 	}
         
         float g=total;
-        g/=(frameEnd-frameStart);
-        g*=avifileinfo->fps1000;
+        g/=(end-start);
+        g*=fps1000; //avifileinfo->fps1000;
         g/=(1000.*1000.);
         medium=(uint32_t)(g*8);
         
@@ -124,11 +129,11 @@
           GUI_Error_HIG(QT_TR_NOOP("No data"), NULL);
 		return ;
 	}
-	nb_frame=frameEnd-frameStart;
+	nb_frame=end-start;
 	// and now build an histogram
 	for(k=0;k<20;k++) display[k]=0;
 
-	video_body->getFrameSize (frameStart, &len);
+	video_body->getFrameSize (start, &len);
 	for(k=0;k<round;k++) average[k]=0;
 
 	sum=0;
@@ -136,7 +141,7 @@
         uint32_t step=max/20;
         uint32_t sumkb;
         
-	for(uint32_t k=frameStart;k<frameEnd;k++)
+	for(uint32_t k=start;k<end;k++)
 	{
 		video_body->getFrameSize (k, &len);
 		// which case ?
@@ -190,21 +195,6 @@
           bar[19-i]=new  diaElemBar((uint32_t)display[i],str);
             
         }
-/*
-        diaElemUInteger mx(&max,"Max bitrate",0,9999999);
-        diaElemUInteger med(&medium,"Average bitrate",0,9999999);
-        diaElemUInteger nI(&nbIFrame,"Number of I frames",0,9999999);
-        diaElemUInteger nP(&nbPFrame,"Number of P frames",0,9999999);
-        diaElemUInteger nB(&nbBFrame,"Number of B frames",0,9999999);
-        diaElemUInteger nMB(&maxBFrame,"Max B frames",0,9999999);
-
-        mx.setRo();
-        med.setRo();
-        nI.setRo();
-        nP.setRo();
-        nB.setRo();
-        nMB.setRo();
-*/
 #define DOME(a,b,c)       sprintf(bf,"%u",b); diaElemReadOnlyText a(bf,c);
         char bf[100];
         DOME(mx,max,QT_TR_NOOP("Max. bitrate:"));
@@ -233,5 +223,4 @@
           delete bar[i];
         }
 }
-
-
+//EOF



From mean at mail.berlios.de  Thu Jul 23 20:18:43 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Thu, 23 Jul 2009 20:18:43 +0200
Subject: [Avidemux-svn-commit] r5130 -
	branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerAvi
Message-ID: <200907231818.n6NIIhYS009264@sheep.berlios.de>

Author: mean
Date: 2009-07-23 20:18:42 +0200 (Thu, 23 Jul 2009)
New Revision: 5130

Removed:
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerAvi/op_avisave.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerAvi/op_avisave.h
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerAvi/op_avisavecopy.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerAvi/op_avisavecopy_pack.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerAvi/op_avisavecopy_unpack.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerAvi/op_avisavedual.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerAvi/op_savecopy.h
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerAvi/op_saveprocess.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerAvi/op_saveprocess.h
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerAvi/op_savesmart.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerAvi/op_savesmart.hxx
Modified:
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerAvi/CMakeLists.txt
Log:
[avi/muxer] cleanup

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerAvi/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerAvi/CMakeLists.txt	2009-07-23 18:18:41 UTC (rev 5129)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerAvi/CMakeLists.txt	2009-07-23 18:18:42 UTC (rev 5130)
@@ -6,8 +6,6 @@
         op_aviwrite.cpp
         avilist.cpp
 
-#	avilist.cpp  op_avisavecopy_pack.cpp   op_avisave.cpp   op_aviwrite.cpp   op_savesmart.cpp
-#	op_avisavecopy.cpp  op_avisavecopy_unpack.cpp  op_avisavedual.cpp  op_saveprocess.cpp
 )
 INCLUDE_DIRECTORIES("${AVIDEMUX_SOURCE_DIR}/avidemux/ADM_coreDemuxer/include")
 

Deleted: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerAvi/op_avisave.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerAvi/op_avisave.cpp	2009-07-23 18:18:41 UTC (rev 5129)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerAvi/op_avisave.cpp	2009-07-23 18:18:42 UTC (rev 5130)
@@ -1,457 +0,0 @@
-/***************************************************************************
-                          op_avisave.cpp  -  description
-                             -------------------
-    begin                : Fri May 3 2002
-    copyright            : (C) 2002 by mean
-    email                : fixounet at free.fr
- ***************************************************************************/
-
-/***************************************************************************
- *                                                                         *
- *   This program is free software; you can redistribute it and/or modify  *
- *   it under the terms of the GNU General Public License as published by  *
- *   the Free Software Foundation; either version 2 of the License, or     *
- *   (at your option) any later version.                                   *
- *                                                                         *
- ***************************************************************************/
- 
- /*
-* MODIFIED BY GMV 30.1.05: prepared for ODML
-*/
- 
-
-
-#include "ADM_default.h"
-#include "ADM_threads.h"
-
-#include "fourcc.h"
-
-#include "DIA_coreToolkit.h"
-
-//#include "avilist.h"
-
-#include "ADM_videoFilter.h"
-
-#include "ADM_videoFilter.h"
-
-
-
-
-#include "op_aviwrite.hxx"
-#include "op_avisave.h"
-#include "GUI_mux.h"
-#include <math.h>
-uint32_t muxSize=4090;
-extern PARAM_MUX muxMode;
-extern int muxParam;
-
-
-
-#include "audioeng_buildfilters.h"
-#include "ADM_coreUI/include/DIA_factory.h"
-const char *getStrFromAudioCodec( uint32_t codec);
-//_________________________
-uint8_t ADM_aviUISetMuxer(  void )
-{
-  
-//	return DIA_setUserMuxParam ((int *) &muxMode, (int *) &muxParam, (int *) &muxSize);
-  uint32_t mux_n_frame=muxParam;
-  uint32_t mux_size_block=muxParam;
-  uint32_t mux_mode=(uint32_t)muxMode;
-  
-  
-  diaMenuEntry muxingType[]={
-  {MUX_REGULAR,QT_TR_NOOP("Normal")},
-  {MUX_N_FRAMES,QT_TR_NOOP("Mux every N video frames")},
-  {MUX_N_BYTES,QT_TR_NOOP("Mux by packet size")}
-  };
-  
-    diaElemMenu      mux(&(mux_mode),QT_TR_NOOP("Muxing _type:"),3,muxingType);
-    diaElemUInteger blockSize(&(muxSize),QT_TR_NOOP("_Split every MB:"),1,9000);
-    
-    diaElemUInteger n_frames(&(mux_n_frame),QT_TR_NOOP("Mux _every x video frames:"),1,100);
-    diaElemUInteger n_block(&(mux_size_block),QT_TR_NOOP("Mux in _blocks of x bytes:"),1,50000);
-    
-    
-     mux.link(&(muxingType[1]),1,&n_frames);
-     mux.link(&(muxingType[2]),1,&n_block);
-    
-     diaElem *elems[4]={&mux,&n_frames,&n_block,&blockSize};
-     if( diaFactoryRun(QT_TR_NOOP("AVI Muxer Options"),4,elems))
-    {
-      muxMode=(PARAM_MUX)mux_mode;
-      switch(muxMode)
-      {
-        case MUX_REGULAR: muxParam=1;break;
-        case MUX_N_FRAMES: muxParam=mux_n_frame;break;
-        case MUX_N_BYTES: muxParam=mux_size_block;break;
-        default: ADM_assert(0);
-      }
-      return 1;
-    }
-    return 0;
-};
-
-
-//_______ set the autosplit size
-uint8_t ADM_aviSetSplitSize(uint32_t size)
-{
-	muxSize=size;
-	return 1;
-}
-
-GenericAviSave::GenericAviSave ()
-{
-
-  has_audio_track = has_audio_vbr = 0;
- vbuffer = new uint8_t[MAXIMUM_SIZE * MAXIMUM_SIZE * 3];
-//  vbuffer=new ADMImage(MAXIMUM_SIZE,MAXIMUM_SIZE);
-  abuffer = new uint8_t[96000];
-
-  ADM_assert (vbuffer);
-  ADM_assert (abuffer);
-
-  audio_filter=NULL;
-  audio_filter2=NULL;
-  _part=0;
-  dialog_work=NULL;
-  _lastIPFrameSent=0xffffff;
-  _incoming=NULL;
-  encoding_gui=NULL;
-  _videoProcess=0;
-  _audioCurrent=_audioTarget=0;
- _audioTotal=0;  
- _file=NULL;
- _pq=NULL;
- memset(&_context,0,sizeof(_context));
- _context.audioDone=1;
-}
-
-GenericAviSave::~GenericAviSave ()
-{
-  cleanupAudio();
-  delete[] vbuffer;
-  delete[] abuffer;
-  _incoming=NULL;
-  ADM_assert(!_file);
-}
-uint8_t GenericAviSave::cleanupAudio (void)
-{
-  printf("[AVI] Cleaning audio\n");
-  if(_pq)
-  {
-    _pq->Abort();
-    while(!_context.audioDone)
-    {
-      printf("Waiting Audio thread\n");
-      ADM_usleep(500000); 
-    }
-    if(_pq) delete _pq;
-    _pq=NULL;
-  }
-  if(audio_filter)
-  {
-//    deleteAudioFilter (audio_filter);
-    audio_filter=NULL;
-  }
-  return 1;
-}
-//___________________________________________________________
-//      Generic Save Avi loop
-//
-//___________________________________________________________
-//
-uint8_t  GenericAviSave::saveAvi (const char *name)
-{
-uint32_t size;
-uint8_t ret=0;
-  strcpy(_name,name);
-  //frametogo = frameEnd - frameStart + 1;
-  frametogo=0;
-  
-  writter = new aviWrite ();
-    // 1- setup audio
-  guiStart();
-  if (!setupAudio ())
-    {
-      guiStop();
-      GUI_Error_HIG (QT_TR_NOOP("Error initalizing audio filters"), NULL);
-      delete writter;
-      writter = NULL;
-      return 0;
-    }
-   
-   if (!setupVideo (_name))
-    {
-      guiStop();
-      GUI_Error_HIG (QT_TR_NOOP("Error initalizing video filters"), NULL);
-      delete   	writter;
-      writter = NULL;
-     // guiStop();
-      return 0;
-    }
-  
-  // 3- setup video
-  frametogo=_incoming->getInfo()->nb_frames;
-  fps1000=_incoming->getInfo()->fps1000;
-  printf ("\n writing %lu frames\n", frametogo);
-
-  //__________________________________
-  //   now go to main loop.....
-  //__________________________________
-  for (uint32_t cf = 0; cf < frametogo; cf++) 
-    {
-			
-			
-			
-      			if (guiUpdate (cf, frametogo))
-					goto abortme;
-      			//   printf("\n %lu / %lu",cf,frametogo);
-      			writeVideoChunk (cf);
-      			writeAudioChunk (cf);
-			//writter->sync();
-     
-     
-    };				// end for
-    ret=1;
-abortme:
-  guiStop ();
-  //__________________________________
-  // and end save
-  //__________________________________
-  writter->setEnd ();
-  delete       writter;
-  writter = NULL;
-  // resync GUI
-  printf ("\n Saving AVI (v_engine)... done\n");
-  return ret;
-}
-
-//_________________________________________________________________
-//
-//                                                              Set up audio system
-//_________________________________________________________________
-uint8_t
-GenericAviSave::setupAudio (void)
-{
-// 1- Prepare audio filter
-//__________________________
-
-  _audioInBuffer = 0;
-  _audioTarget=_audioCurrent=0;
-  _audioTotal=0;
-  audio_filter=NULL;
-   if(!currentaudiostream) 
-   {
-   	encoding_gui->setAudioCodec(QT_TR_NOOP("None"));
-	return 1;
-   }
-  printf (" mux mode : %d mux param %d\n", muxMode, muxParam);
-
-  if (audioProcessMode())	// else Raw copy mode
-    {
-//      audio_filter = buildAudioFilter (currentaudiostream,video_body->getTime (frameStart));
-      if(!audio_filter) return 0;
-      encoding_gui->setAudioCodec(getStrFromAudioCodec(audio_filter->getInfo()->encoding));
-    }
-  else // copymode
-    {
-      // else prepare the incoming raw stream
-      // audio copy mode here
-      encoding_gui->setAudioCodec(QT_TR_NOOP("Copy"));
-//      audio_filter=buildAudioFilter( currentaudiostream,video_body->getTime (frameStart));
-      if(!audio_filter) return 0;
-    }
-    /* Setup audioQ */
-    pthread_t     audioThread;
-    _pq=new PacketQueue("AVI audioQ",5000,2*1024*1024);
-    memset(&_context,0,sizeof(_context));
-   // _context.audioEncoder=audio_filter;
-    _context.audioTargetSample=0xFFFF0000; ; //FIXME
-    _context.packetQueue=_pq;
-    // start audio thread
-    ADM_assert(!pthread_create(&audioThread,NULL,(THRINP)defaultAudioQueueSlave,&_context)); 
-    ADM_usleep(4000);
-  return 1;
-}
-//---------------------------------------------------------------------------
-uint8_t
-GenericAviSave::writeAudioChunk (uint32_t frame)
-{
-  uint32_t    len;
-  // if there is no audio, we do nothing
-  if (!audio_filter)
-    return 1;
-    
-  double t;
-  
-  t=frame+1;
-  t=t/fps1000;
-  t=t*1000*audio_filter->getInfo()->frequency;
-  _audioTarget=(uint32_t )floor(t);
-
-        uint32_t sample,packetLen,packets=0;
-
-
-       
-        sample=0;
-        // _audioTarget is the # of sample we want
-        while(_audioCurrent<_audioTarget)
-        {
-                if(!_pq->Pop(abuffer+_audioInBuffer,&packetLen,&sample))
-                  {
-                    printf("AVIWR:Could not read packet\n");
-                    break;
-                  }
-                _audioInBuffer+=packetLen;
-                _audioTotal+=packetLen;
-                _audioCurrent+=sample;		
-                packets++;
-        }
-      switch (muxMode)
-        {
-        case MUX_N_FRAMES:
-          stored_audio_frame++;
-          if (stored_audio_frame < muxParam)
-            return 1;
-          stored_audio_frame = 0;
-        case MUX_REGULAR:
-          break;
-        case MUX_N_BYTES:
-                if(_audioInBuffer<muxParam) return 1;
-                break;
-          break;
-        default:
-          ADM_assert (0);
-        }
-      if (_audioInBuffer)
-        {
-          writter->saveAudioFrame (_audioInBuffer, abuffer);
-          encoding_gui->setAudioSize(_audioTotal);
-          _audioInBuffer=0;
-        }
-      return 1;
-  
-}
-
-void
-GenericAviSave::guiStart (void)
-{
-      encoding_gui=new DIA_encoding(25000);
-      encoding_gui->setCodec(QT_TR_NOOP("Copy"));
-      encoding_gui->setFrame (0,0,2 ,100); // FXMe
-      encoding_gui->setContainer(QT_TR_NOOP("AVI"));
-
-}
-
-void
-GenericAviSave::guiStop (void)
-{
-      ADM_assert(encoding_gui);
-      delete encoding_gui;
-      encoding_gui=NULL;
-
-}
-void GenericAviSave::guiSetPhasis(const char *str)
-{
-      ADM_assert(encoding_gui);
-      encoding_gui->setPhasis(str);
-	
-}
-uint8_t
-GenericAviSave::guiUpdate (uint32_t nb, uint32_t total)
-{
-  ADM_assert(encoding_gui);
-  //encoding_gui->setFrame (nb, 0,0, total); //FXMe
-  if ( encoding_gui->isAlive () == 1)
-    return 0;
-  return 1;
-
-
-}
-//	Return 1 if we exceed the chunk limit
-//
-uint8_t  GenericAviSave::handleMuxSize ( void )
-{
-  uint32_t pos;
-  
-        pos=writter->getPos();
-        if(pos>=muxSize*1024*1024)
-                {
-                          return 1  ;
-                        
-                }
-                return 0;
-  
-      
-}
-//
-//	Finish the current avi and start a new one
-//
-uint8_t   GenericAviSave::reigniteChunk( uint32_t dataLen, uint8_t *data )
-{
-	// MOD Feb 2005 by GMV: ODML exit
-	if(writter->doODML!=aviWrite::NO)return 1;	// exit if odml has to be used
-	// END MOD Feb 2005 by GMV
-	
-	    // first end up the current chunk
-	     	writter->setEnd ();
-  			delete       writter;
-  			writter = NULL;
-     	// then create a new one
-         writter = new aviWrite ();
-    
-				_part++;
-				char n[500];
-				
-				sprintf(n,"%s%02d",_name,_part);
-								         
-      	 printf("\n *** writing a new avi part :%s\n",n);
-          
-	        if (!writter->saveBegin (n,
-			   &_mainaviheader,
-			   frameEnd - frameStart + 1, 
-			   &_videostreamheader,
-			   &_bih,
-			   data,dataLen,
-			   audio_filter,
-			   audio_filter2))
-    {
-      GUI_Error_HIG (QT_TR_NOOP("Cannot initiate save"), NULL);
-
-      return 0;
-    }
-    return 1;
-}
-
-/**
-	Search Forward Reference frame from the current B frame
-*/
-uint32_t GenericAviSave::searchForward(uint32_t startframe)
-{
-uint32_t fw=startframe;
-uint32_t flags;
-uint8_t r;
-
-        while(1)
-        {
-                fw++;
-                r=video_body->getFlags (fw, &flags);
-                if(!(flags & AVI_B_FRAME))
-                {
-                        return fw;
-
-                }
-                ADM_assert(r);
-                if(!r)
-                {
-                        printf("\n Could not locate last non B frame \n");
-                        return 0;
-                }
-
-        }
-}
-
-//---------------------------------------
-
-// EOF

Deleted: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerAvi/op_avisave.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerAvi/op_avisave.h	2009-07-23 18:18:41 UTC (rev 5129)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerAvi/op_avisave.h	2009-07-23 18:18:42 UTC (rev 5130)
@@ -1,86 +0,0 @@
-/***************************************************************************
-                          op_avisave.h  -  description
-                             -------------------
-    begin                : Fri May 3 2002
-    copyright            : (C) 2002 by mean
-    email                : fixounet at free.fr
- ***************************************************************************/
-
-/***************************************************************************
- *                                                                         *
- *   This program is free software; you can redistribute it and/or modify  *
- *   it under the terms of the GNU General Public License as published by  *
- *   the Free Software Foundation; either version 2 of the License, or     *
- *   (at your option) any later version.                                   *
- *                                                                         *
- ***************************************************************************/
- #ifndef __AVI_SAVE__
- #define   __AVI_SAVE__
-
-#include "ADM_default.h"
-
-
-#include "ADM_image.h"
-#include "ADM_fileio.h"
-#include "ADM_toolkit/ADM_audioQueue.h"
-
- class GenericAviSave
- {
-     protected :
-                ADMFile                 *_file;
-                
-     		uint32_t		_audioTarget;
-		uint32_t		_audioCurrent;
-		uint64_t		_audioTotal;
-		
-     		DIA_encoding		    *encoding_gui;
-      	 	AVDMGenericVideoStream  *_incoming;
-     		DIA_working		*dialog_work;
-     		uint8_t 		has_audio_track;
-           	uint8_t			stored_audio_frame;
-           	uint8_t 		has_audio_vbr;
-                	uint32_t  	fps1000;
-                uint32_t 		frametogo;
-                char			_name[500];
-		uint32_t		_videoProcess;
-                uint8_t			_part;
-                ADM_audioStream	*audio_filter;
-                ADM_audioStream	*audio_filter2;
-
-                uint8_t 		computeAudioCBR (void)   ;
-                aviWrite		*writter;
-                uint8_t			*vbuffer;
-                uint8_t			*abuffer;
-		uint32_t		_audioInBuffer;
-                uint32_t		_videoFlag;
-		uint32_t  	 	_lastIPFrameSent;
-                PacketQueue             *_pq;
-                audioQueueMT            _context;
-                uint8_t                 cleanupAudio();
-
-                    virtual uint8_t setupAudio( void);
-                    virtual uint8_t setupVideo( char *name )=0;
-                    virtual uint8_t writeAudioChunk(uint32_t  f);
-                    virtual uint8_t writeVideoChunk(uint32_t frame )=0;
-                    virtual void guiStart(void);
-                    virtual void guiStop(void);
-                    	    void guiSetPhasis(const char *str);
-                    virtual uint8_t guiUpdate(uint32_t nb,uint32_t total);		    
-                    uint8_t	handleMuxSize(void ) ; // auto chop
-                    uint8_t reigniteChunk( uint32_t len, uint8_t *data );
-		    uint32_t searchForward(uint32_t startframe);
-
-						//
-						AVIStreamHeader 	_videostreamheader;
-						ADM_BITMAPINFOHEADER  _bih;
-						MainAVIHeader			_mainaviheader;
-     public:
-     						GenericAviSave( void );
-			           	virtual ~GenericAviSave( void );
-           				virtual uint8_t saveAvi(const char *name );
-   };
-extern uint32_t muxSize;
-uint8_t ADM_aviSetSplitSize(uint32_t size);
-uint8_t ADM_aviUISetMuxer(  void );
-  #endif
-

Deleted: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerAvi/op_avisavecopy.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerAvi/op_avisavecopy.cpp	2009-07-23 18:18:41 UTC (rev 5129)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerAvi/op_avisavecopy.cpp	2009-07-23 18:18:42 UTC (rev 5130)
@@ -1,196 +0,0 @@
-/***************************************************************************
-                          op_avisavecopy.cpp  -  description
-                             -------------------
-
-	We bypass the use of _incoming to have easy access to furure
-	frame.
-	In fact only the getflags is necessary, other stuff will be done throught
-	incoming.
-
-    begin                : Fri May 3 2002
-    copyright            : (C) 2002 by mean
-    email                : fixounet at free.fr
- ***************************************************************************/
-
-/***************************************************************************
- *                                                                         *
- *   This program is free software; you can redistribute it and/or modify  *
- *   it under the terms of the GNU General Public License as published by  *
- *   the Free Software Foundation; either version 2 of the License, or     *
- *   (at your option) any later version.                                   *
- *                                                                         *
- ***************************************************************************/
-#include "config.h"
-#include "ADM_default.h"
-#include "ADM_threads.h"
-
-#include "fourcc.h"
-#include "avi_vars.h"
-#include "DIA_coreToolkit.h"
-
-//#include "avilist.h"
-
-#include "ADM_videoFilter.h"
-#include "ADM_videoFilter_internal.h"
-
-#include "ADM_encoder/ADM_vidEncode.hxx"
-
-#include "ADM_audio/aviaudio.hxx"
-#include "ADM_audiofilter/audioprocess.hxx"
-#include "op_aviwrite.hxx"
-#include "op_avisave.h"
-#include "op_savecopy.h"
-
-#include "ADM_osSupport/ADM_debugID.h"
-#define MODULE_NAME MODULE_SAVE_AVI
-#include "ADM_osSupport/ADM_debug.h"
-
-
-/**
-      \fn  ~GenericAviSaveCopyUnpack
-      \brief destructor
-*/
-GenericAviSaveCopy::~GenericAviSaveCopy ()
-{
-      if(copy) delete copy;
-      copy=NULL; 
-}
-
-uint8_t GenericAviSaveCopy::setupVideo (char *name)
-{
-  //  Setup avi file output, all is coming from original avi
-  // since we are inc copy mode
-  memcpy(&_bih,video_body->getBIH (),sizeof(_bih));
-  _bih.biSize=sizeof(_bih);  //fix old version of avidemux
-  _bih.biXPelsPerMeter=_bih.biClrUsed=_bih.biYPelsPerMeter=0;
-  //
-  memcpy(&_videostreamheader,video_body->getVideoStreamHeader (),sizeof( _videostreamheader));
-  memcpy(&_mainaviheader,video_body->getMainHeader (),sizeof(_mainaviheader));
-  
-
-  /* update to fix earlier bug */
-   _mainaviheader.dwWidth=_bih.biWidth;
-   _mainaviheader.dwHeight=_bih.biHeight;
-
-   uint8_t *extraData;
-   uint32_t extraLen;
-  _lastIPFrameSent=0xfffffff;
-   video_body->getExtraHeaderData(&extraLen,&extraData);
-
-  	if (!writter->saveBegin (name,
-			   &_mainaviheader,
-			   frameEnd - frameStart + 1,
-			   &_videostreamheader,
-			   &_bih,
-			   extraData,extraLen,
-			   audio_filter,
-			   audio_filter2
-		))
-    	{
-          GUI_Error_HIG (QT_TR_NOOP("Cannot initiate save"), NULL);
-      		return 0;
-    	}
-	if(audio_filter2)
-	{
-		printf("Second audio track present\n");
-	}
-	else
-	{
-		printf("Second audio track absent\n");
-	}
- _incoming = getFirstVideoFilter (frameStart,frameEnd-frameStart);
- encoding_gui->setFps(_incoming->getInfo()->fps1000);
- encoding_gui->setPhasis(QT_TR_NOOP("Saving"));
- // Set up our copy codec ...
-  copy=new EncoderCopy(NULL);
-  if(!copy->configure(_incoming, 0))
-  {
-      printf("Copy cannot [configure] \n");
-      return 0;
-  }
-  return 1;
-}
-
-
-// copy mode
-// Basically ask a video frame and send it to writter
-// If it contains b frame and frames have been re-ordered
-// reorder them back ...
-uint8_t
-GenericAviSaveCopy::writeVideoChunk (uint32_t frame)
-{
-  
-  uint8_t    ret1;
- ADMCompressedImage img;
- ADMBitstream bitstream;
- uint8_t seq;
-      img.data=vbuffer;
-      bitstream.bufferSize=_incoming->getInfo ()->width *   _incoming->getInfo ()->height * 3;
-      bitstream.data=vbuffer;
-      
-      
-       if(!video_body->isReordered(frameStart+frame))
-      {
-          ret1 = video_body->getFrame (frameStart + frame,&img,&seq);// vbuffer, &len,      &_videoFlag);
-          _videoFlag=img.flags;
-      }
-      else
-      {
-           ret1=copy->encode(frame,&bitstream);
-           img.dataLength=bitstream.len;
-           _videoFlag=img.flags=bitstream.flags;
-      }
-
-  if (!ret1)
-    return 0;
-
-    // check for split
-     // check for auto split
-      // if so, we re-write the last I frame
-      if(muxSize)
-      	{
-                        // we overshot the limit and it is a key frame
-                // start a new chunk
-                if(handleMuxSize() && (_videoFlag & AVI_KEY_FRAME))
-                {		
-                    uint8_t *extraData;
-                    uint32_t extraLen;
-
-                  video_body->getExtraHeaderData(&extraLen,&extraData);
-      
-                  if(!reigniteChunk(extraLen,extraData)) return 0;
-                }
-          }
-  
-  if(_videoFlag==AVI_KEY_FRAME)
-          newFile();
-  encoding_gui->setFrame(frame,img.dataLength,0,frametogo);
-  return writter->saveVideoFrame (img.dataLength, img.flags, img.data);
-
-
-}
-/**
-      \fn newFile
-      \brief start a new file, for example if the muxer was setup to split every 700 Meg. Call only on intra!
-
-
-*/
-uint8_t          GenericAviSaveCopy::newFile(void)
-{
-        if(muxSize)
-      	{
-                        // we overshot the limit and it is a key frame
-                // start a new chunk
-                if(handleMuxSize() )
-                {		
-                    uint8_t *extraData;
-                    uint32_t extraLen;
-
-                  video_body->getExtraHeaderData(&extraLen,&extraData);
-      
-                  if(!reigniteChunk(extraLen,extraData)) return 0;
-                }
-          }
-    return 1;
-}
-// EOF

Deleted: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerAvi/op_avisavecopy_pack.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerAvi/op_avisavecopy_pack.cpp	2009-07-23 18:18:41 UTC (rev 5129)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerAvi/op_avisavecopy_pack.cpp	2009-07-23 18:18:42 UTC (rev 5130)
@@ -1 +0,0 @@
-// RMED

Deleted: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerAvi/op_avisavecopy_unpack.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerAvi/op_avisavecopy_unpack.cpp	2009-07-23 18:18:41 UTC (rev 5129)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerAvi/op_avisavecopy_unpack.cpp	2009-07-23 18:18:42 UTC (rev 5130)
@@ -1,217 +0,0 @@
-/***************************************************************************
-                          op_avisavecopy.cpp  -  description
-                             -------------------
-
-	We bypass the use of _incoming to have easy access to furure
-	frame.
-	In fact only the getflags is necessary, other stuff will be done throught
-	incoming.
-
-    begin                : Fri May 3 2002
-    copyright            : (C) 2002 by mean
-    email                : fixounet at free.fr
- ***************************************************************************/
-
-/***************************************************************************
- *                                                                         *
- *   This program is free software; you can redistribute it and/or modify  *
- *   it under the terms of the GNU General Public License as published by  *
- *   the Free Software Foundation; either version 2 of the License, or     *
- *   (at your option) any later version.                                   *
- *                                                                         *
- ***************************************************************************/
-#include "config.h"
-#include "ADM_default.h"
-#include "ADM_threads.h"
-
-#include "fourcc.h"
-#include "avi_vars.h"
-#include "DIA_coreToolkit.h"
-
-//#include "avilist.h"
-
-#include "ADM_videoFilter.h"
-#include "ADM_videoFilter_internal.h"
-
-#include "ADM_encoder/ADM_vidEncode.hxx"
-
-#include "ADM_audio/aviaudio.hxx"
-#include "ADM_audiofilter/audioprocess.hxx"
-#include "op_aviwrite.hxx"
-#include "op_avisave.h"
-#include "op_savecopy.h"
-
-#include "ADM_osSupport/ADM_debugID.h"
-#define MODULE_NAME MODULE_SAVE_AVI
-#include "ADM_osSupport/ADM_debug.h"
-
-
-static void updateUserData(uint8_t *start, uint32_t len);
-uint8_t ADM_findMpegStartCode(uint8_t *start, uint8_t *end,uint8_t *outstartcode,uint32_t *offset);
-
-
-
-/**
-      \fn GenericAviSaveCopyUnpack::setupVideo
-      \brief init for unpacker code
-
-*/
-uint8_t GenericAviSaveCopyUnpack::setupVideo (char *name)
-{
-  //  Setup avi file output, all is coming from original avi
-  // since we are inc copy mode
-  memcpy(&_bih,video_body->getBIH (),sizeof(_bih));
-  _bih.biSize=sizeof(_bih);  //fix old version of avidemux
-  _bih.biXPelsPerMeter=_bih.biClrUsed=_bih.biYPelsPerMeter=0;
-  //
-  memcpy(&_videostreamheader,video_body->getVideoStreamHeader (),sizeof( _videostreamheader));
-  memcpy(&_mainaviheader,video_body->getMainHeader (),sizeof(_mainaviheader));
-  
-  // Change both to divx/DX50
-  	_videostreamheader.fccHandler=fourCC::get((uint8_t *)"divx");
-	_bih.biCompression=fourCC::get((uint8_t *)"DX50");
-  /* update to fix earlier bug */
-   _mainaviheader.dwWidth=_bih.biWidth;
-   _mainaviheader.dwHeight=_bih.biHeight;
-
-   uint8_t *extraData;
-   uint32_t extraLen;
-  _lastIPFrameSent=0xfffffff;
-   video_body->getExtraHeaderData(&extraLen,&extraData);
-
-  	if (!writter->saveBegin (name,
-			   &_mainaviheader,
-			   frameEnd - frameStart + 1,
-			   &_videostreamheader,
-			   &_bih,
-			   extraData,extraLen,
-			   audio_filter,
-			   audio_filter2
-		))
-    	{
-          GUI_Error_HIG (QT_TR_NOOP("Cannot initiate save"), NULL);
-      		return 0;
-    	}
-	if(audio_filter2)
-	{
-		printf("Second audio track present\n");
-	}
-	else
-	{
-		printf("Second audio track absent\n");
-	}
- _incoming = getFirstVideoFilter (frameStart,frameEnd-frameStart);
- encoding_gui->setFps(_incoming->getInfo()->fps1000);
- encoding_gui->setPhasis(QT_TR_NOOP("Saving"));
- 
- // Set up our copy codec ...
-  copy=new EncoderCopy(NULL);
-  if(!copy->configure(_incoming, 0))
-  {
-      printf("Copy cannot [configure] \n");
-      return 0;
-  }
-  return 1;
-}
-
-
-// copy mode
-// Basically ask a video frame and send it to writter
-// If it contains b frame and frames have been re-ordered
-// reorder them back ...
-/**
-      \fn GenericAviSaveCopyUnpack::setupVideo
-      \brief init for unpacker code
-
-*/
-uint8_t GenericAviSaveCopyUnpack::writeVideoChunk (uint32_t frame)
-{
-  
-  uint8_t    ret1;
- ADMCompressedImage img;
- ADMBitstream bitstream;
- uint8_t seq;
-      img.data=vbuffer;
-      bitstream.bufferSize=_incoming->getInfo ()->width *   _incoming->getInfo ()->height * 3;
-      bitstream.data=vbuffer;
-      
-      
-       if(!video_body->isReordered(frameStart+frame))
-      {
-          ret1 = video_body->getFrame (frameStart + frame,&img,&seq);// vbuffer, &len,      &_videoFlag);
-          _videoFlag=img.flags;
-      }
-      else
-      {
-           ret1=copy->encode(frame,&bitstream);
-           img.dataLength=bitstream.len;
-           _videoFlag=img.flags=bitstream.flags;
-           if(bitstream.flags==AVI_KEY_FRAME)
-           {
-            updateUserData(bitstream.data,bitstream.len); 
-           }
-      }
-
-  if (!ret1)
-    return 0;
-
-      if(_videoFlag==AVI_KEY_FRAME)
-          newFile();
-
-  
-  encoding_gui->setFrame(frame,img.dataLength,0,frametogo);
-  return writter->saveVideoFrame (img.dataLength, img.flags, img.data);
-
-}
-
-//_____________________________________________________
-// Update the user data field that is used to 
-// detect in windows world if it is packed or not
-//_____________________________________________________
-void updateUserData(uint8_t *start, uint32_t len)
-{
-      // lookup startcode
-      uint32_t sync,off,rlen;
-      uint8_t code;
-      uint8_t *end=start+len;
-      while(ADM_findMpegStartCode(start, end,&code,&off))
-      {
-              // update
-              start+=off;
-              rlen=end-start;
-              if(code!=0xb2 || rlen<4)
-                  continue;
-      
-              printf("User data found\n");
-              // looks ok ?
-              if(!strncmp((char *)start,"DivX",4))
-              {
-
-                  //
-                  start+=4;
-                  rlen-=4; // skip "DivX"
-                              // looks for a p while not null
-                              // if there isnt we will reach a new startcode
-                              // and it will stop
-                              while((*start!='p') && rlen) 
-                              {
-                                      if(!*start)
-                                      {
-                                              rlen=0;
-                                              break;
-                                      }
-                                      rlen--;
-                                      start++;
-                              }
-                              if(!rlen) 
-                                      {
-                                              printf("Unpacketizer:packed marker not found!\n");
-                                      }
-                              else	
-                                      *start='n'; // remove 'p'
-                              return;			
-              }
-      }
-}
-
-//EOF

Deleted: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerAvi/op_avisavedual.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerAvi/op_avisavedual.cpp	2009-07-23 18:18:41 UTC (rev 5129)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerAvi/op_avisavedual.cpp	2009-07-23 18:18:42 UTC (rev 5130)
@@ -1,142 +0,0 @@
-/***************************************************************************
-                          op_avisavedual.cpp  -  description
-                             -------------------
-
-		Save avi in copy mode for audio & video but with 2 tracks
-
-    begin                : Wed Sep 11 2002
-    copyright            : (C) 2002 by mean
-    email                : fixounet at free.fr
- ***************************************************************************/
-
-/***************************************************************************
- *                                                                         *
- *   This program is free software; you can redistribute it and/or modify  *
- *   it under the terms of the GNU General Public License as published by  *
- *   the Free Software Foundation; either version 2 of the License, or     *
- *   (at your option) any later version.                                   *
- *                                                                         *
- ***************************************************************************/
-#include <math.h>
-#include "config.h"
-#include "ADM_default.h"
-#include "ADM_threads.h"
-
-#include "fourcc.h"
-#include "avi_vars.h"
-
-
-//#include "avilist.h"
-
-#include "ADM_videoFilter.h"
-#include "ADM_videoFilter_internal.h"
-#include "ADM_encoder/ADM_vidEncode.hxx"
-
-#include "ADM_audio/aviaudio.hxx"
-#include "audioprocess.hxx"
-#include "op_aviwrite.hxx"
-#include "op_avisave.h"
-#include "op_savecopy.h"
-
-#include "audioprocess.hxx"
-#include "ADM_audio/audioex.h"
-#include "audioeng_buildfilters.h"
-
-GenericAviSaveCopyDualAudio::GenericAviSaveCopyDualAudio (void	*track)
-			: GenericAviSaveCopy()
-{
-   printf("**********************************\n");
-   printf("second audio track set\n");
-//    audio_filter2= track;
-    _audioCurrent2=0;
-}
-
-//
-//      Just to keep gcc happy....
-//
-
-uint8_t GenericAviSaveCopyDualAudio::setupAudio (void)
-{
-  int32_t shift=0;
-  if(!audio_filter2) return 0;
-  if(!currentaudiostream) return 0;
-  
-  audio_filter=buildAudioFilter( currentaudiostream,video_body->getTime (frameStart));
-  audio_filter2->goToTime(0);
-  return 1;
-}
-//---------------------------------------------------------------------------
-uint8_t    GenericAviSaveCopyDualAudio::doOneTrack (uint32_t index,void *stream,uint32_t target,uint32_t *current)
-{
-  uint32_t    len;
-  uint32_t sample,packetLen,packets=0;
-  
-  _audioInBuffer=0;
-  // VBR mode, one packet per frame
-#if 0
-  if(stream->packetPerFrame()     || stream->isVBR() )
-  {
-    while(*current<target)
-    {
-      if(!stream->getPacket(abuffer,&packetLen,&sample))
-      {
-        printf("AVIWR:Could not read packet\n");
-        return 0;
-      }
-      *current+=sample;
-      if(!index)
-        writter->saveAudioFrame (packetLen,abuffer);
-      else
-        writter->saveAudioFrameDual (packetLen,abuffer);
-//      encoding_gui->feedAudioFrame(packetLen);
-    }
-	 	
-  }
-  else // CBR mode, pack them
-  {
-    sample=0;
-    // _audioTarget is the # of sample we want
-    while(*current<target)
-    {
-      if(!stream->getPacket(abuffer+_audioInBuffer,&packetLen,&sample))
-      {
-        printf("AVIWR:Could not read packet\n");
-        break;
-      }
-      _audioInBuffer+=packetLen;
-      *current+=sample;		
-      packets++;
-    }
-    if (_audioInBuffer)
-    {
-      if(!index)
-        writter->saveAudioFrame (_audioInBuffer, abuffer);
-      else
-        writter->saveAudioFrameDual (_audioInBuffer,abuffer);
-//      encoding_gui->feedAudioFrame(_audioInBuffer);	  
-    }
-  }
-#endif
-  return 1;
-}
-// **************************************************************
-uint8_t
-GenericAviSaveCopyDualAudio::writeAudioChunk (uint32_t frame)
-{
-  uint32_t    len;
-  // if there is no audio, we do nothing
-  if (!audio_filter)
-    return 0;
-    
-  double t;
-  
-  t=frame+1;
-  t=t/fps1000;
-  t=t*1000*audio_filter->getInfo()->frequency;
-  _audioTarget=(uint32_t )floor(t);
-  
-//  if(!doOneTrack(0,audio_filter,_audioTarget,&_audioCurrent)) return 0;
-//  if(!doOneTrack(1,audio_filter2,_audioTarget,&_audioCurrent2)) return 0;
-  return 1;
-}
-//____________

Deleted: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerAvi/op_savecopy.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerAvi/op_savecopy.h	2009-07-23 18:18:41 UTC (rev 5129)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerAvi/op_savecopy.h	2009-07-23 18:18:42 UTC (rev 5130)
@@ -1,82 +0,0 @@
-/***************************************************************************
-                          op_savecopy.h  -  description
-                             -------------------
-    begin                : Fri May 3 2002
-    copyright            : (C) 2002 by mean
-    email                : fixounet at free.fr
- ***************************************************************************/
-
-/***************************************************************************
- *                                                                         *
- *   This program is free software; you can redistribute it and/or modify  *
- *   it under the terms of the GNU General Public License as published by  *
- *   the Free Software Foundation; either version 2 of the License, or     *
- *   (at your option) any later version.                                   *
- *                                                                         *
- ***************************************************************************/
- #ifndef __AVI_SAVECPY__
- #define   __AVI_SAVECPY__
-#include "ADM_encoder/adm_encCopy.h"
- class GenericAviSaveCopy : public   GenericAviSave
- {
-     protected :
-		                                EncoderCopy          *copy;	
-		          virtual uint8_t 	setupVideo( char *name  );
-                          virtual uint8_t 	writeVideoChunk(uint32_t frame );
-                                  uint8_t       newFile(void);
-
-     public:
-                                              GenericAviSaveCopy()  :     GenericAviSave()
-                                                                      {
-                                                                        copy=NULL;
-                                                                      };
-                           virtual ~GenericAviSaveCopy();
-   };
-
- class GenericAviSaveCopyDualAudio : public   GenericAviSaveCopy
- {
-     protected :
-
-                        
-                        char				*_trackname;
-                        uint32_t			_audioCurrent2;
-
-                        uint8_t    doOneTrack (uint32_t index,void *stream,uint32_t target,uint32_t *current);
-                                    virtual uint8_t setupAudio( void);
-                                  virtual uint8_t writeAudioChunk(uint32_t frame );
-
-     public:
-                                     GenericAviSaveCopyDualAudio(void	*track);
-
-   };
-/*            Pack /unpack */
-class GenericAviSaveCopyUnpack : public   GenericAviSaveCopy
- {
-     protected :
-                          virtual uint8_t 	setupVideo( char *name  );
-                          virtual uint8_t 	writeVideoChunk(uint32_t frame );
-     public:
-  
- };
-class GenericAviSaveCopyPack : public   GenericAviSaveCopy
- {
-     protected :
-                          EncoderCopy          *copy;
-                          ADMBitstream         *lookAhead[2];
-                          uint32_t              curToggle;
-                          uint32_t              time_inc;
-                          virtual uint8_t 	setupVideo( char *name  );
-                          virtual uint8_t 	writeVideoChunk(uint32_t frame );
-                                  uint8_t       prefetch(uint32_t buffer,uint32_t frame);
-     public:
-                          virtual	~GenericAviSaveCopyPack();	
-                                        GenericAviSaveCopyPack()  :     GenericAviSaveCopy()
-                                        {
-                                                lookAhead[0]=NULL;
-                                                lookAhead[1]=NULL;
-                                                curToggle=0;
-                                                time_inc=0;
-                                        };
-  
- };
-  #endif

Deleted: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerAvi/op_saveprocess.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerAvi/op_saveprocess.cpp	2009-07-23 18:18:41 UTC (rev 5129)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerAvi/op_saveprocess.cpp	2009-07-23 18:18:42 UTC (rev 5130)
@@ -1,286 +0,0 @@
-/***************************************************************************
-                          op_saveprocess.cpp  -  description
-                             -------------------
-    begin                : Fri May 3 2002
-    copyright            : (C) 2002 by mean
-    email                : fixounet at free.fr
-
-
-
-
- ***************************************************************************/
-
-/***************************************************************************
- *                                                                         *
- *   This program is free software; you can redistribute it and/or modify  *
- *   it under the terms of the GNU General Public License as published by  *
- *   the Free Software Foundation; either version 2 of the License, or     *
- *   (at your option) any later version.                                   *
- *                                                                         *
- ***************************************************************************/
-#include "config.h"
-#include "ADM_default.h"
-#include "ADM_threads.h"
-
-
-#include "fourcc.h"
-#include "avi_vars.h"
-#include "DIA_coreToolkit.h"
-
-//#include "avilist.h"
-
-#include "ADM_audio/aviaudio.hxx"
-#include "ADM_audiofilter/audioprocess.hxx"
-
-#include "ADM_videoFilter.h"
-//#include "ADM_gui/GUI_encoder.h"
-#include "ADM_videoFilter_internal.h"
-#include "ADM_encoder/ADM_vidEncode.hxx"
-
-#include "op_aviwrite.hxx"
-#include "op_avisave.h"
-
-#include "ADM_encoder/adm_encoder.h"
-#include "op_saveprocess.h"
-
-#include "ADM_osSupport/ADM_debugID.h"
-#define MODULE_NAME MODULE_SAVE_AVI
-#include "ADM_osSupport/ADM_debug.h"
-
-GenericAviSaveProcess::GenericAviSaveProcess( void ) 
-{
-	TwoPassLogFile=NULL;
-	_incoming=NULL;
-	_encode=NULL;
-	_videoProcess=1;
-};
-
-uint8_t
-GenericAviSaveProcess::setupVideo (char *name)
-{
-	_notnull=0;
-	_incoming = getLastVideoFilter (frameStart,frameEnd-frameStart);
- 	frametogo=_incoming->getInfo()->nb_frames;
-	encoding_gui->setFps(_incoming->getInfo()->fps1000);
-	// anish
- 	if(_incoming->getInfo()->width%8)
-		{
-                  if(!GUI_Question(QT_TR_NOOP("Width is not a multiple of 8\n continue anyway ?")))
-			return 0;
-
-		}
-
-  _encode = getVideoEncoder (_incoming->getInfo()->width,_incoming->getInfo()->height);
-  if (!_encode)
-    return 0;
-
-  // init compressor
-  TwoPassLogFile=new char[strlen(name)+6];
-  strcpy(TwoPassLogFile,name);
-  strcat(TwoPassLogFile,".stat");
-  _encode->setLogFile(TwoPassLogFile,frametogo);
-
-  int reuse = 0;
-
-  if (_encode->isDualPass())
-  {
-	  FILE *tmp;
-
-	  if ((tmp = fopen(TwoPassLogFile,"rt")))
-	  {
-		  fclose(tmp);
-
-		  if (GUI_Question(QT_TR_NOOP("Reuse the existing log file?")))
-			  reuse = 1;
-	  }
-  }
- 
-  if (!_encode->configure (_incoming, reuse))
-    {
-      delete 	_encode;
-      _encode = NULL;
-      GUI_Error_HIG (QT_TR_NOOP("Filter init failed"), NULL);
-      return 0;
-    };
- 
-  memcpy (&_bih, video_body->getBIH (), sizeof (_bih));
-  _bih.biWidth = _incoming->getInfo ()->width;
-  _bih.biHeight = _incoming->getInfo ()->height;
-  _bih.biSize=sizeof(_bih);
-  _bih.biXPelsPerMeter=_bih.biClrUsed=_bih.biYPelsPerMeter=0;
-
-  _mainaviheader.dwTotalFrames= _incoming->getInfo ()->nb_frames;
-_mainaviheader.dwMicroSecPerFrame=0;
-
-  printf("\n Saved as %ld x %ld\n",_bih.biWidth,_bih.biHeight);
-  _bih.biCompression=fourCC::get((uint8_t *)_encode->getCodecName());
-   
-  encoding_gui->setCodec(_encode->getDisplayName());
-  
-  // init save avi
-//-----------------------2 Pass--------------------------------------
-  if (_encode->isDualPass ())
-    {
-      uint8_t *buffer;
-      uint32_t len, flag;
-
- 	aprintf("\n** Dual pass encoding**\n");
-
-	if(!reuse)
- 	{
-	
-      	guiSetPhasis (QT_TR_NOOP("1st Pass"));
-      	aprintf("**Pass 1:%lu\n",frametogo);
-     	buffer = new uint8_t[_incoming->getInfo ()->width *
-		    _incoming->getInfo ()->height * 3];
-
-      	_encode->startPass1 ();
-      //__________________________________
-      //   now go to main loop.....
-      //__________________________________
-        bitstream.bufferSize=_incoming->getInfo ()->width *   _incoming->getInfo ()->height * 3;
-        bitstream.data=buffer;
-        for (uint32_t cf = 0; cf < frametogo; cf++)
-        {
-          if (guiUpdate (cf, frametogo))
-            {
-            abt:
-                GUI_Error_HIG (QT_TR_NOOP("Aborting"), NULL);
-              delete[]buffer;
-              return 0;
-            }
-            
-            bitstream.cleanup(cf);
-            if (!_encode->encode (cf, &bitstream))
-                {
-                        printf("\n Encoding of frame %lu failed !\n",cf);
-                        goto abt;
-                }
-           encoding_gui->setFrame(cf,bitstream.len,bitstream.out_quantizer,frametogo);
-    
-        }
-
-	encoding_gui->reset();
-      	delete[]buffer;	
-     	aprintf("**Pass 1:done\n");
-    }// End of reuse
-
-      if(!_encode->startPass2 ())
-      {
-      	printf("Pass2 ignition failed\n");
-      	return 0;
-	}
-   }   //-------------------------/VBR-----------------------------------
-  // init save avi
-
-// now we build the new stream !
-    	aprintf("**main pass:\n");
-
-		memcpy(&_videostreamheader,video_body->getVideoStreamHeader (),sizeof(_videostreamheader));
-		memcpy(&_videostreamheader.fccHandler	,_encode->getFCCHandler(),4);
-		_videostreamheader.fccType	=fourCC::get((uint8_t *)"vids");
-		_videostreamheader.dwScale=1000;
-		_videostreamheader.dwRate= _incoming->getInfo ()->fps1000;
-
-    		memcpy(&_mainaviheader	,video_body->getMainHeader (),sizeof(_mainaviheader));
-
-
-  		  _mainaviheader.dwWidth=_bih.biWidth;
-    		_mainaviheader.dwHeight=_bih.biHeight;
-    		_videostreamheader.dwQuality=10000;
-
-    uint8_t *data;
-    uint32_t dataLen=0;
-
-    _encode->hasExtraHeaderData( &dataLen,&data);
-#if 0
-  	if (!writter->saveBegin (name,
-			   &_mainaviheader,
-			   frameEnd - frameStart + 1,
-			   &_videostreamheader,
-			   &_bih,
-			   data,dataLen,
-			   (AVDMGenericAudioStream *) audio_filter,
-			   NULL))
-    	{
-      		return 0;
-    	}
-#endif
-  aprintf("Setup video done\n");
-  bitstream.data=vbuffer;
-  bitstream.bufferSize=MAXIMUM_SIZE * MAXIMUM_SIZE * 3;
-  return 1;
-  //---------------------
-}
-
-//
-//      Just to keep gcc happy....
-//
-GenericAviSaveProcess::~GenericAviSaveProcess ()
-{
-  cleanupAudio();
-  if (_encode)
-    delete      _encode;
-  	_encode=NULL;
-  if(TwoPassLogFile)
-  {
-  	delete [] TwoPassLogFile;
-  	TwoPassLogFile=NULL;
-  }
-}
-
-// copy mode
-// Basically ask a video frame and send it to writter
-uint8_t
-GenericAviSaveProcess::writeVideoChunk (uint32_t frame)
-{
-  uint8_t    	ret1;
-  // CBR or CQ
-  if (frame == 0)
-  {
-    encoding_gui->setCodec(_encode->getDisplayName())  ;
-  if (!_encode->isDualPass ())
-  {
-                          guiSetPhasis (QT_TR_NOOP("Encoding"));
-        }
-  else
-          {
-                          guiSetPhasis (QT_TR_NOOP("2nd Pass"));
-        }
-  }
-  // first read
-  bitstream.cleanup(frame);
-  ret1 = _encode->encode ( frame,&bitstream);// &len1, vbuffer, &_videoFlag);
-  _videoFlag=bitstream.flags;
-  if (!ret1)
-    return 0;
-  // check for split
-     // check for auto split
-      // if so, we re-write the last I frame
-      if(muxSize)
-      {
-              // we overshot the limit and it is a key frame
-              // start a new chunk
-              if(handleMuxSize() && (_videoFlag & AVI_KEY_FRAME))
-              {		
-                      uint8_t *data;
-                      uint32_t dataLen=0;
-
-                      _encode->hasExtraHeaderData( &dataLen,&data);	   
-                      if(!reigniteChunk(dataLen,data)) return 0;
-              }
-        }
-        encoding_gui->setFrame(frame,bitstream.len,bitstream.out_quantizer,frametogo);	
-        // If we have several null B frames dont write them
-        if(bitstream.len) _notnull=1;
-	else	if( !_notnull)
-	{
-		printf("Frame : %lu dropped\n",frame);
-	 	return 1;			 
-	 }
-         return writter->saveVideoFrame (bitstream.len, _videoFlag, vbuffer);
-
-}
-
-
-// EOF

Deleted: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerAvi/op_saveprocess.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerAvi/op_saveprocess.h	2009-07-23 18:18:41 UTC (rev 5129)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerAvi/op_saveprocess.h	2009-07-23 18:18:42 UTC (rev 5130)
@@ -1,41 +0,0 @@
-/***************************************************************************
-                          op_saveprocess.h  -  description
-                             -------------------
-    begin                : Fri May 3 2002
-    copyright            : (C) 2002 by mean
-    email                : fixounet at free.fr
- ***************************************************************************/
-
-/***************************************************************************
- *                                                                         *
- *   This program is free software; you can redistribute it and/or modify  *
- *   it under the terms of the GNU General Public License as published by  *
- *   the Free Software Foundation; either version 2 of the License, or     *
- *   (at your option) any later version.                                   *
- *                                                                         *
- ***************************************************************************/
- #ifndef __AVI_SAVEPRC__
- #define   __AVI_SAVEPRC__
-
-
-
-
- class GenericAviSaveProcess : public   GenericAviSave
- {
-     protected :
-					    
-			Encoder 	*_encode;
-			uint8_t		_notnull;
-                       	char 		*TwoPassLogFile;
-                        ADMBitstream    bitstream;
-
-			virtual uint8_t	setupVideo( char *name  );
-			virtual uint8_t	writeVideoChunk(uint32_t frame );
-                         
-     public:
-     					GenericAviSaveProcess( void ) ;
-                          virtual 	~GenericAviSaveProcess();
-   };
-
-
-  #endif

Deleted: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerAvi/op_savesmart.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerAvi/op_savesmart.cpp	2009-07-23 18:18:41 UTC (rev 5129)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerAvi/op_savesmart.cpp	2009-07-23 18:18:42 UTC (rev 5130)
@@ -1,436 +0,0 @@
-/***************************************************************************
-                          op_savesmart.cpp  -  description
-                             -------------------
-    begin                : Mon May 6 2002
-    copyright            : (C) 2002 by mean
-    email                : fixounet at free.fr
- ***************************************************************************/
-
-/***************************************************************************
- *                                                                         *
- *   This program is free software; you can redistribute it and/or modify  *
- *   it under the terms of the GNU General Public License as published by  *
- *   the Free Software Foundation; either version 2 of the License, or     *
- *   (at your option) any later version.                                   *
- *                                                                         *
- ***************************************************************************/
-
-#include "config.h"
-#include "ADM_default.h"
-#include "ADM_threads.h"
-
-#ifdef USE_FFMPEG
-extern "C" {
-	#include "ADM_lavcodec.h"
-};
-#endif
-
-#include "fourcc.h"
-#include "avi_vars.h"
-#ifdef HAVE_ENCODER
-
-
-#include "ADM_audio/aviaudio.hxx"
-#include "ADM_audiofilter/audioprocess.hxx"
-
-#include "ADM_videoFilter.h"
-#include "ADM_videoFilter_internal.h"
-
-#include "ADM_encoder/ADM_vidEncode.hxx"
-
-#include "op_aviwrite.hxx"
-#include "op_avisave.h"
-#include "op_savesmart.hxx"
-
-#ifdef USE_FFMPEG		
-#include "ADM_codecs/ADM_ffmpeg.h"		
-#endif
-
-#include "ADM_osSupport/ADM_debugID.h"
-#define MODULE_NAME MODULE_SAVE_AVI
-#include "ADM_osSupport/ADM_debug.h"
-
-GenericAviSaveSmart::GenericAviSaveSmart(uint32_t qf) : GenericAviSave()
-{
-	_cqReenc=qf;
-	ADM_assert(qf>=2 && qf<32);
-	_nextip=0;
-	encoderReady=0;
-        _hasBframe=0;
-}
-uint8_t	GenericAviSaveSmart::setupVideo (char *name)
-{
-
-int value=4;;
-	 
-
-		printf("\n Q: %u",_cqReenc);
-  // init save avi
-  memcpy(&_bih,video_body->getBIH (),sizeof(_bih));
-  memcpy(&_videostreamheader,video_body->getVideoStreamHeader (),sizeof( _videostreamheader));
-  memcpy(&_mainaviheader,video_body->getMainHeader (),sizeof(_mainaviheader));
- 
-   uint8_t *extraData;
-   uint32_t extraLen;
-  _lastIPFrameSent=0xfffffff;
-   video_body->getExtraHeaderData(&extraLen,&extraData);
-
-  if (!writter->saveBegin (name,
-			   &_mainaviheader,
-			   frameEnd - frameStart + 1, 
-			   &_videostreamheader,
-			   &_bih,
-			   extraData,extraLen,
-			   audio_filter,
-			   NULL
-		))
-    {
-
-      return 0;
-    }
-  compEngaged = 0;
-  encoderReady = 0;
-  _encoder = NULL;
-  aImage=new ADMImage(_mainaviheader.dwWidth,_mainaviheader.dwHeight);
-  _incoming = getFirstVideoFilter (frameStart,frameEnd-frameStart);
-  encoding_gui->setFps(_incoming->getInfo()->fps1000);
-  encoding_gui->setPhasis(QT_TR_NOOP("Smart Copy"));
-  // B frame ?
-    for(int i=frameStart;i<frameEnd;i++)
-    {
-      if(!video_body->getFlags ( i, &_videoFlag)) break;
-      if(_videoFlag & AVI_B_FRAME) _hasBframe=1;
-    }
-    if(_hasBframe) printf("The original file has bframe, expect a shift of 1 frame\n");
-  //
-  return 1;
-  //---------------------
-}
-
-//
-//      Just to keep gcc happy....
-//
-GenericAviSaveSmart::~GenericAviSaveSmart ()
-{
-  cleanupAudio();
-  if (encoderReady && _encoder)
-    {
-      _encoder->stopEncoder ();
-    }
-  if (_encoder)
-    delete      _encoder;
- if(aImage)
- {
- 	delete aImage;
-	aImage=NULL;
- }
-}
-
-// copy mode
-// Basically ask a video frame and send it to writter
-uint8_t
-GenericAviSaveSmart::writeVideoChunk (uint32_t frame)
-{
-  uint32_t    len;
-  uint8_t     ret1, seq;
-
-  frame+=frameStart;
-  if (compEngaged)		// we were re-encoding
-    {
-    	return writeVideoChunk_recode(frame);
-    }
-    return writeVideoChunk_copy(frame);
-}
-//_________________________________________________________
-uint8_t GenericAviSaveSmart::writeVideoChunk_recode (uint32_t frame)
-{
-uint32_t len;
-ADMBitstream bitstream(MAXIMUM_SIZE * MAXIMUM_SIZE * 3);
-	aprintf("Frame %lu encoding\n",frame);
-	video_body->getFlags ( frame, &_videoFlag);
-	if (_videoFlag & AVI_KEY_FRAME)
-	{
-	  aprintf("Smart: Stopping encoder\n");
-	  // It is a kf, go back to copy mode
-	  compEngaged = 0;
-	  stopEncoder ();	// Tobias F
-	  delete	    _encoder;
-	  _encoder = NULL;
-	  return writeVideoChunk_copy(frame,1);
-	}
-	// Else encode it ....
-	//1-Read it
-	if (! video_body->getUncompressedFrame (frame, aImage))
-		return 0;
-	// 2-encode it
-        bitstream.data=vbuffer;
-        bitstream.cleanup(frame);
-        if (!_encoder->encode (aImage, &bitstream))//vbuffer, &len, &_videoFlag))
-		return 0;
-        _videoFlag=bitstream.flags;
-	// 3-write it
-        encoding_gui->setFrame(frame-frameStart,bitstream.len,bitstream.out_quantizer,frametogo);
-	return writter->saveVideoFrame (bitstream.len, _videoFlag, vbuffer);
-}
-//_________________________________________________________
-uint8_t GenericAviSaveSmart::writeVideoChunk_copy (uint32_t frame,uint32_t first)
-{
-  // Check flags and seq
-  uint32_t myseq=0;
-  uint32_t nextip;
-  uint8_t seq;
-  ADMCompressedImage img;
-  
-  img.data=vbuffer;
-  
-  	aprintf("Frame %lu copying\n",frame);
-        
-  	// all gop should be closed, so it should be safe to do it here
-	if(muxSize)
-      	{
-		// we overshot the limit and it is a key frame
-		// start a new chunk
-		if(handleMuxSize() && (_videoFlag & AVI_KEY_FRAME))
-		{		
-		 	uint8_t *extraData;
-			uint32_t extraLen;
-
-   			video_body->getExtraHeaderData(&extraLen,&extraData);
-					   
-			if(!reigniteChunk(extraLen,extraData)) return 0;
-		}
-	}
-  
-  	video_body->getFlags( frame,&_videoFlag);	
-        if(frame==frameStart)
-        {
-          if(!(_videoFlag & AVI_KEY_FRAME))
-          {
-            aprintf("1st frame is not a kef:There is a broken reference, encoding\n");
-            compEngaged = 1;
-            initEncoder (_cqReenc);
-            return writeVideoChunk_recode(frame);
-            
-          }
-        }
-	
-  	if(_videoFlag & AVI_B_FRAME) // lookup next I/P frame
-	{
-		if(_nextip<frame) // new forward frame
-		{
-			aprintf("Smart:New forward frame\n");
-			if(!seekNextRef(frame,&nextip))
-			{
-				aprintf("Smart:B Frame without reference frame\n");
-				return 1;
-			}
-			// check if that the frame -1,....,next forward ref are all sequential
-			if(!video_body->sequentialFramesB(frame-1,nextip)&&!(_videoFlag &AVI_KEY_FRAME )) 
-			{
-				aprintf("Smart:There is a broken reference, encoding\n");
-				compEngaged = 1;
-				initEncoder (_cqReenc);
-				return writeVideoChunk_recode(frame);
-			}
-			
-			aprintf("Smart : using %lu as next\n",nextip);
-			// Seems ok, write it and mark it
-			if (! video_body->getFrame (nextip,&img,&seq))// vbuffer, &len,		      &_videoFlag, &seq))
-    				return 0;
-                        _videoFlag=img.flags;
-			_nextip=nextip;
-                        encoding_gui->setFrame(frame-frameStart,img.dataLength,0,frametogo);
-			return writter->saveVideoFrame (img.dataLength, img.flags, img.data);
-		}
-		else
-		{	// Nth B frame
-			aprintf("Smart:Next B frame\n");
-			if (!video_body->getFrame (frame-1, &img, &seq))
-    				return 0;
-                         _videoFlag=img.flags;
-                        encoding_gui->setFrame(frame-frameStart,img.dataLength,0,frametogo);
-			return writter->saveVideoFrame (img.dataLength, img.flags, img.data);
-		}
-	}
-	// Not a bframe
-	// Is it the frame we sent previously ?
-	if(frame==_nextip && _nextip)
-	{
-		// Send the last B frame instead
-		aprintf("Smart finishing B frame %lu\n",frame-1);
-		if (! video_body->getFrame(frame-1, &img, &seq))// (frame-1, vbuffer, &len,    &_videoFlag, &seq))
-    			return 0;
-                 _videoFlag=img.flags;
-                encoding_gui->setFrame(frame-frameStart,img.dataLength,0,frametogo);
-		return writter->saveVideoFrame  (img.dataLength, img.flags, img.data);;
-	
-	}
-	// Regular frame
-	// just copy it
-	if(frame)
-		if(!video_body->sequentialFramesB(_nextip,frame)&&!(_videoFlag &AVI_KEY_FRAME ))  // Need to re-encode
-		{
-			aprintf("Seq broken..\n");
-			compEngaged = 1;
-			initEncoder (_cqReenc);
-                        encoding_gui->setFrame(frame-frameStart,img.dataLength,0,frametogo);
-			return writeVideoChunk_recode(frame);
-		}
-	_nextip=frame;
-	aprintf("Smart: regular\n");
-	if(! video_body->getFrame (frame, &img, &seq)) return 0;
-        _videoFlag=img.flags;
-	
-	encoding_gui->setFrame(frame-frameStart,img.dataLength,0,frametogo);
-	if(first)
-	{
-		ADM_assert(_videoFlag == AVI_KEY_FRAME);
-		// Grab extra data ..
-			uint8_t *extraData;
-			uint32_t extraLen;
-			uint8_t r;
-   			video_body->getExtraHeaderData(&extraLen,&extraData);
-			if(extraLen)
-			{
-			//********************************************************************
-			// If we have global headers we have to duplicate the old headers as they were replaced
-			// by the new headers from the section we re-encoded
-			//********************************************************************
-				printf("[Smart] Duplicating vop header (%d bytes)\n",extraLen);
-				uint8_t *buffer=new uint8_t[extraLen+img.dataLength];
-				memcpy(buffer,extraData,extraLen);
-				memcpy(buffer+extraLen,img.data,img.dataLength);
-				r=writter->saveVideoFrame (img.dataLength+extraLen, img.flags, buffer);;
-				delete [] buffer;
-				return r;
-				
-			}
-	}
-	return writter->saveVideoFrame (img.dataLength, img.flags, img.data);;
-}
-//_________________________________________________________
-uint8_t GenericAviSaveSmart::seekNextRef(uint32_t frame,uint32_t *nextip)
-{
-uint32_t flags;
-	for(uint32_t i=frame+1;i<frameEnd;i++)
-	{
-		video_body->getFlags( i,&flags);
-		if(!(flags & AVI_B_FRAME)) 
-		{
-			*nextip=i;
-			return 1;
-		}
-	
-	}
-	return 0;
-}
- //
- //
-uint8_t
-GenericAviSaveSmart::initEncoder (uint32_t qz)
-{
-  aviInfo
-    info;
-  video_body->getVideoInfo (&info);
-  ADM_assert (0 == encoderReady);
-  encoderReady = 1;
-  uint8_t ret=0;
-  FFcodecSetting myConfig=
-	 {
-	 ME_EPZS,//	ME
-	 0, // 		GMC	
-	 0,	// 4MV
-	 0,//		_QPEL;	 
-	 0,//		_TREILLIS_QUANT
-	 2,//		qmin;
-	 31,//		qmax;
-	 3,//		max_qdiff;
-	 1,//		max_b_frames;
-	 0, //		mpeg_quant;
-	 1, //
-	 -2, // 		luma_elim_threshold;
-	 1,//
-	 -5, 		// chroma_elim_threshold;
-	 0.05,		//lumi_masking;
-	 1,		// is lumi
-	 0.01,		//dark_masking; 
-	 1,		// is dark
- 	 0.5,		// qcompress amount of qscale change between easy & hard scenes (0.0-1.0
-    	 0.5,		// qblur;    amount of qscale smoothing over time (0.0-1.0) 
-	0,		// min bitrate in kB/S
-	0,		// max bitrate
-	0, 		// default matrix
-	0, 		// no gop size
-	NULL,
-	NULL,
-	0,		// interlaced
-	0,		// WLA: bottom-field-first
-	0,		// wide screen
-	2,		// mb eval = distortion
-	8000,		// vratetol 8Meg
-	0,		// is temporal
-	0.0,		// temporal masking
-	0,		// is spatial
-	0.0,		// spatial masking
-	0,		// NAQ
-	0		// DUMMY 
- 	} ;
-
-
-  if(  isMpeg4Compatible(info.fcc) )
-  	{
-/*	
-#ifdef USE_DIVX		 
-		 	 _encoder = new divxEncoderCQ (info.width, info.height);
-	   
-#else			
-*/
-// 	uint8_t				setConfig(FFcodecSetting *set);	
-			ffmpegEncoderCQ *tmp;		
-			tmp = new ffmpegEncoderCQ (info.width, info.height,FF_MPEG4);					
-			myConfig.max_b_frames=_hasBframe; // In fact does the original have b frame ?
-			tmp->setConfig(&myConfig);
-			printf("\n init qz %ld\n",qz);
-	    		ret= tmp->init (qz,25000);
-			_encoder=tmp;
-/*			
-#endif		  		  
-*/
-		
-#warning 25 fps hardcoded
-
-		 }
-		 else
-		 {
-#ifdef USE_FFMPEG			 
-			 if(isMSMpeg4Compatible(info.fcc) ) // DIV3
-			 {
-				 ffmpegEncoderCQ *tmp;
-				  tmp = new ffmpegEncoderCQ (info.width, info.height,FF_MSMP4V3);
-                                  myConfig.max_b_frames=0;
-				  tmp->setConfig(&myConfig);
-			    	  ret= tmp->init (qz,25000);
-			    	  _encoder=tmp;
-				}
-				else
-					{
-				       ADM_assert(0);
-					}			
-			}
-#else
-			ADM_assert(0);
-			}			
-#endif
-
-		return ret;
-}
-
-uint8_t
-GenericAviSaveSmart::stopEncoder (void)
-{
-  ADM_assert (1 == encoderReady);
-  encoderReady = 0;
-  return (_encoder->stopEncoder ());
-}
-
-#endif

Deleted: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerAvi/op_savesmart.hxx
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerAvi/op_savesmart.hxx	2009-07-23 18:18:41 UTC (rev 5129)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerAvi/op_savesmart.hxx	2009-07-23 18:18:42 UTC (rev 5130)
@@ -1,47 +0,0 @@
-/***************************************************************************
-                          op_savesmart.hxx  -  description
-                             -------------------
-    begin                : Mon May 6 2002
-    copyright            : (C) 2002 by mean
-    email                : fixounet at free.fr
- ***************************************************************************/
-
-/***************************************************************************
- *                                                                         *
- *   This program is free software; you can redistribute it and/or modify  *
- *   it under the terms of the GNU General Public License as published by  *
- *   the Free Software Foundation; either version 2 of the License, or     *
- *   (at your option) any later version.                                   *
- *                                                                         *
- ***************************************************************************/
- #ifndef __AVI_SAVESMT__
- #define   __AVI_SAVESMT__
-
- class GenericAviSaveSmart : public   GenericAviSave
- {
-     protected :
-                                uint32_t        _hasBframe;
-     #warning HARDCODED MAX IMAGE SIZE
-     				
-				ADMImage	*aImage;
-				uint32_t	_nextip;
-				uint8_t 	initEncoder(uint32_t qz );
-				uint8_t 	stopEncoder(void  );
-       				uint32_t 	encoderReady;
-              			uint32_t 	compEngaged;
-	virtual 		uint8_t 	setupVideo( char *name  );
- 	virtual 		uint8_t 	writeVideoChunk(uint32_t frame );
-				uint8_t		 writeVideoChunk_recode (uint32_t frame);
-				uint8_t		 writeVideoChunk_copy (uint32_t frame,uint32_t first=0);
-              			encoder 	*_encoder;
-              			uint8_t 	_cqReenc          ;
-				
-     public:
-     							
-     						GenericAviSaveSmart(uint32_t qfactor);		
-                          virtual 		~GenericAviSaveSmart();
-			  uint8_t 		seekNextRef(uint32_t frame,uint32_t *nextip);
-   };
-
-
-  #endif



From mean at mail.berlios.de  Thu Jul 23 20:18:44 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Thu, 23 Jul 2009 20:18:44 +0200
Subject: [Avidemux-svn-commit] r5131 -
	branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/oplug_ogm
Message-ID: <200907231818.n6NIIiak009274@sheep.berlios.de>

Author: mean
Date: 2009-07-23 20:18:44 +0200 (Thu, 23 Jul 2009)
New Revision: 5131

Removed:
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/oplug_ogm/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/oplug_ogm/op_ogaudio.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/oplug_ogm/op_ogpage.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/oplug_ogm/op_ogpage.h
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/oplug_ogm/op_ogsave.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/oplug_ogm/op_ogsave.h
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/oplug_ogm/op_ogsavecopy.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/oplug_ogm/op_ogsaveprocess.cpp
Log:
[ogm] Removed

Deleted: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/oplug_ogm/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/oplug_ogm/CMakeLists.txt	2009-07-23 18:18:42 UTC (rev 5130)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/oplug_ogm/CMakeLists.txt	2009-07-23 18:18:44 UTC (rev 5131)
@@ -1,5 +0,0 @@
-SET(ADM_oplug_ogm_SRCS
-op_ogaudio.cpp  op_ogpage.cpp  op_ogsavecopy.cpp  op_ogsave.cpp  op_ogsaveprocess.cpp)
-
-ADD_ADM_LIB_ALL_TARGETS(oplug_ogm ${ADM_oplug_ogm_SRCS})
-

Deleted: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/oplug_ogm/op_ogaudio.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/oplug_ogm/op_ogaudio.cpp	2009-07-23 18:18:42 UTC (rev 5130)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/oplug_ogm/op_ogaudio.cpp	2009-07-23 18:18:44 UTC (rev 5131)
@@ -1,282 +0,0 @@
-//
-// C++ Implementation: op_ogaudio
-//
-// Description: 
-//
-//
-// This file handles the audio track in OGM output plugin
-// The difficult part with audio is that the counter is in
-//  audio packet hence depends on the codec itself
-//
-// We will always try to put complete audio packet in the stream
-// as the muxer is a bit stupid anyway
-//
-// Author: mean <fixounet at free.fr>, (C) 2004
-//
-// Copyright: See COPYING file that comes with this distribution
-//
-//
-#include "config.h"
-
-#include <stdio.h>
-#include <stdlib.h>
-#include <string.h>
-#include <math.h>
-#include <time.h>
-#include <sys/time.h>
-
-#include "config.h"
-#include "fourcc.h"
-#include "avi_vars.h"
-#include "ADM_assert.h"
-
-
-//#include "avilist.h"
-
-#include "ADM_videoFilter.h"
-
-#include "ADM_encoder/ADM_vidEncode.hxx"
-
-#include "ADM_audio/aviaudio.hxx"
-#include "audioprocess.hxx"
-#include "audioeng_buildfilters.h"
-#include "ADM_audio/ADM_a52info.h"
-
-#include "op_ogsave.h"
-
-// should be enougth, at 500 kbps / 25 fps -> 3kbyte per slice
-#define OGM_AUDIO_BUFFER 64000
-
-#include "ADM_osSupport/ADM_debugID.h"
-#define MODULE_NAME MODULE_OGM_WRITE
-#include "ADM_osSupport/ADM_debug.h"
-
-extern const char *getStrFromAudioCodec( uint32_t codec);	
-
-//__________________________________________________
-uint8_t		ADM_ogmWrite::initAudio(void)
-{
-uint32_t 	tstart;
-WAVHeader	*info=NULL;
-                audioStream=NULL;
-		if(!currentaudiostream)
-		{
-			audioFilter=NULL;	
-			_audioBuffer=NULL;
-			encoding_gui->setAudioCodec(QT_TR_NOOP("None"));
-			return 1;
-		}
-		if(audioProcessMode() && currentaudiostream->isCompressed() 
-                        && !currentaudiostream->isDecompressable())
-		{
-                    return 0;
-		}
-                audioStream=new ogm_page(_fd,2);		//
-                audioFilter=buildAudioFilter(currentaudiostream, video_body->getTime (frameStart));
-                if(!audioFilter) return 0;
-		if(audioProcessMode())
-		{
-			uint16_t fcc;
-			
-			fcc=audioFilter->getInfo()->encoding;
-			encoding_gui->setAudioCodec(getStrFromAudioCodec(fcc));
-		}
-		else	// Copymode
-		{
-			encoding_gui->setAudioCodec(QT_TR_NOOP("Copy"));
-			
-		}
-		//______________ Write headers/ Audio..._____________________
-		
-		
-		_audioBuffer=new uint8_t[OGM_AUDIO_BUFFER*2]; 
-		
-		char string[40];
-		stream_header header;
-		
-		info=audioFilter->getInfo();
-		
-		if(audioFilter->getInfo()->encoding!=WAV_OGG)
-		{
-		
-			memset(&header,0,sizeof(header));
-		
-			uint64_t d64;
-			uint32_t d32;
-			uint16_t d16;
-			
-			memcpy(&(header.streamtype),"audio\0\0\0",8);
-			memset(&(header.subtype),0,4);
-			sprintf(string,"%04X",info->encoding);
-			//memcpy(&(header.subtype),&(info->encoding),2);
-			memcpy(&(header.subtype),string,4);
-			printf("audio encoding:%x\n",info->encoding);
-			
-			
-#define DO(x,y,z) {d##z=y;MEMCPY(&header.x,&d##z,z>>3);}
-			DO(size,sizeof(header),32);
-			//header.size=sizeof(header);
-			//header.audio.channels=info->channels;
-			DO(audio.channels,info->channels,16);
-			// not reliable header.audio.blockalign=info->blockalign;
-			uint16_t bps;
-			uint16_t blkalign;
-			switch(info->encoding)
-			{
-				case WAV_MP3:
-				case WAV_MP2:
-					bps=0;
-					blkalign=1152;break;
-				case WAV_AC3:	
-					bps=2;
-					blkalign=1536;break;
-				default:
-					blkalign=info->blockalign;
-					bps=0;
-					break;
-			}
-		
-			DO(audio.blockalign,blkalign,16);
-			DO(bits_per_sample,bps,16);
-			
-			//header.audio.avgbytespersec=info->byterate;
-			DO(audio.avgbytespersec,info->byterate,32);
-		
-			//header.time_unit=(int64_t)10000000;
-			DO(time_unit,10000000LL,64);
-			//header.samples_per_unit=info->frequency;
-			DO(samples_per_unit,info->frequency,64);
-		
-			//header.buffersize=info->frequency; // half a sec
-			DO(buffersize,info->frequency,32); // half a sec
-			
-			//header.default_len=1;
-			DO(default_len,1,32);
-			audioStream->writeHeaders(sizeof(header),(uint8_t *)&header); // +4 ?
-			_audioTarget=_audioCurrent=0;
-			return 1;	
-
-		}
-		else
-		{
-			uint32_t exlen;
-			uint8_t  *exdata;
-			if(!audioProcessMode())
-			{
-			currentaudiostream->extraData(&exlen,&exdata);
-			}
-			else
-			{
-			audioFilter->extraData(&exlen,&exdata);
-			}
-			uint32_t *p;
-			p=(uint32_t *)exdata;
-			
-			if(!exlen || !exdata)
-			{
-				delete audioFilter;
-				audioFilter=NULL;
-				delete audioStream;
-				audioStream=NULL;
-				printf("Vorbis audio setup failed (len:%lu)\n",exlen);
-				return 0;
-			}
-			
-			exdata+=3*sizeof(uint32_t);
-			
-			audioStream->writeDirect(p[0],exdata); // Header
-			
-			exdata+=p[0];
-			audioStream->writeDirect(p[1],exdata); // Comment
-			
-			exdata+=p[1];
-			audioStream->writeDirect(p[2],exdata); // Codebook
-			_audioTarget=_audioCurrent=0;
-			return 1;	
-		
-		}
-		
-	
-}
-//__________________________________________________
-uint8_t		ADM_ogmWrite::writeAudio(uint32_t vframe)
-{
-uint32_t chunk,red,sample;
-double tgt;
-uint32_t len,packetLen,packets=0;
-uint32_t totalsample=0;
-uint32_t lastPacket;
-uint32_t header_offset;
-
-
-	if(!audioStream) return 1; // nothing to do
-	if(!audioFilter) return 1;
-		
-	tgt=vframe+1;
-	tgt/=_fps1000;
-	tgt*=1000*audioFilter->getInfo()->frequency;
-	
-	_audioTarget=(uint32_t )floor(tgt);
-	//printf("Frame :%lu audio current : %lu target:%lu \n",vframe,_audioCurrent,_audioTarget);
-	len=0;
-	sample=0;
-	
-	if(_audioTarget<_audioCurrent)
-	{
-		aprintf("OgWr: Enough audio in the tank..\n");
-		return 1;
-	}	
-	// _audioTarget is the # of sample we want
-	// Here we are handling MP3 or AC3
-	if(audioFilter->getInfo()->encoding==WAV_OGG) header_offset=0;
-		else	header_offset=1;
-		
-	while(_audioCurrent<_audioTarget)
-	{
-		_audioBuffer[0]=0;
-		if(!audioFilter->getPacket(_audioBuffer+header_offset,&packetLen,&sample))
-		{
-			printf("OGMWR:Could not read packet\n");
-			break;
-		}
-		
-		_audioCurrent+=sample;
-		totalsample+=sample;		
-		audioStream->writeRawData(packetLen+header_offset,_audioBuffer,_audioCurrent);
-		
-		packets++;
-		len+=packetLen;
-	}
-//	encoding_gui->feedAudioFrame(len);
-	if(totalsample)
-	{
-		audioStream->flush();
-		aprintf("OGMW: Found %lu packet sample :%lu len=%lu, curoffset:%lu targetoffset=%lu\n",
-			packets,totalsample,len,_audioCurrent,_audioTarget);
-	}	
-	return 1;
-}
-
-//________________________________________
-uint8_t		ADM_ogmWrite::endAudio(void)
-{
-	if(!audioStream) return 1;
-#if 0		
-		double l;
-		
-		l=_audioCurrent+_audioTail-_audioHead;
-		l=l/audioFilter->getInfo()->byterate;
-		l=l*audioFilter->getInfo()->frequency;
-		
-	audioStream->write(_audioTail-_audioHead,_audioBuffer+_audioHead,AVI_KEY_FRAME,(uint64_t)(floor(l)));
-#endif	
-	if(audioStream) audioStream->flush();
-	if(audioFilter) 
-	{
-                deleteAudioFilter(audioFilter);
-		audioFilter=NULL;
-	}
-	return 1;
-
-}
-//________

Deleted: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/oplug_ogm/op_ogpage.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/oplug_ogm/op_ogpage.cpp	2009-07-23 18:18:42 UTC (rev 5130)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/oplug_ogm/op_ogpage.cpp	2009-07-23 18:18:44 UTC (rev 5131)
@@ -1,324 +0,0 @@
-//
-// C++ Implementation: op_ogpage
-//
-// Description: 
-//	Simple ogm muxer (prototype)
-//
-// Author: mean <fixounet at free.fr>, (C) 2004
-//
-// Copyright: See COPYING file that comes with this distribution
-//
-//
-
-/***************************************************************************
- *                                                                         *
- *   This program is free software; you can redistribute it and/or modify  *
- *   it under the terms of the GNU General Public License as published by  *
- *   the Free Software Foundation; either version 2 of the License, or     *
- *   (at your option) any later version.                                   *
- *                                                                         *
- ***************************************************************************/
-#include "config.h"
-
-#include <stdio.h>
-#include <stdlib.h>
-#include <string.h>
-#include <math.h>
-
-#include "ADM_assert.h"
-#include "ADM_default.h"
-#include "avifmt.h"
-#include "avifmt2.h"
-#include "op_ogpage.h"
-
-#define min(a,b) (a>b)?b:a
-extern void memcpyswap(uint8_t *dest, uint8_t *src, uint32_t size);
-//_________________________________________________________
-uint8_t ogm_page::reset(void)
-{
-	_current_lacing=0;
-	_current_off=0;
-	_fresh=0;
-	_first=0;
-	_keyFrame=0;
-	_sequence=0;
-	_pageNumber=0;
-	
-}
-//_________________________________________________________
-ogm_page::ogm_page(FILE *fd,uint32_t streamId)
-{
-	_fd=fd;
-	_stream=streamId;
-	ADM_assert(fd);
-	reset();
-	_first=1;
-}
-//_________________________________________________________
-ogm_page::~ogm_page()
-{
-		// should write a end of stream here...
-}
-//_________________________________________________________
-uint8_t ogm_page::flush(void)
-{
-uint8_t zero=0;
-uint32_t zero4=0;
-
-	if(!_current_lacing) return 1; // Empty
-	
-	
-	buildHeader();
-	fwrite(&_header,sizeof(_header),1,_fd);
-	
-	fwrite(_lacing,_current_lacing,1,_fd);
-	fwrite(_page,_current_off,1,_fd);	
-	_current_lacing=0;
-	_current_off=0;
-	_fresh=0;
-	_keyFrame=0;	
-	_first=0;
-	_pageNumber++;		
-	return 1;
-}
-//___________ Write comment___________
-uint8_t ogm_page::writeDirect(uint32_t size, uint8_t *data)
-{
-uint32_t chunk;
-        ADM_assert(size<MAX_OGM_PAGESIZE);	
-	#define COM_OFFSET 0	
-	memcpy(_page+COM_OFFSET,data,size);
-	size+=COM_OFFSET;
-	_current_lacing=0;
-	_current_off=size;
-	_fresh=1;
-	_timestamp=0;
-	while(size>0)
-	{
-		chunk=min(size,255);
-		size-=chunk;
-		push(chunk,size);
-	}
-	flush();
-	return 1;
-}
-//________________________________________________________
-//_________________________________________________________
-uint8_t ogm_page::write(uint32_t size, uint8_t *data,uint32_t flags,uint64_t timestamp)
-{
-uint32_t chunk;
-	
-	flush(); // Sub optimal but works....
-		
-	_sequence++;
-	if(flags & AVI_KEY_FRAME)
-	{
-		flush();
-		_keyFrame=1;
-	}
-	// if we start with a packet aligned frame...
-	if(!_current_lacing)
-	{			
-		 _fresh=1;
-	}
-	//
-	if(_fresh && !_current_lacing)
-	{
-		_timestamp=timestamp;		
-		// put header
-		_page[_current_off]=0; // data
-		if(flags & AVI_KEY_FRAME)
-			_page[_current_off]=OG_KEYFRAME;
-		_current_off++;		
-		// Fill it
-		chunk=min(254,size);
-		memcpy(_page+1,data,chunk);
-		_current_off+=chunk;
-		data+=chunk;		
-		size-=chunk;
-		push(chunk+1,size);
-		
-	
-	}
-	if(!size) return 1;
-	// now split it
-	while(size)
-	{
-		chunk=min(255,size);
-		memcpy(_page+_current_off,data,chunk);
-		_current_off+=chunk;
-		data+=chunk;
-		size-=chunk;
-		push(chunk,size);		
-	}
-	// Last one was a 0xff ?
-	
-	return 1;
-}
-// Write raw packet provided by vorbis encoder
-// Don"t try to double guess , just rebuild our own packet and write it
-uint8_t ogm_page::writeRawData(uint32_t size, uint8_t *data,uint64_t samples)
-{
-uint32_t chunk;
-	_sequence++;	
-	 _fresh=1;
-	 _timestamp=samples;	
-	while(size)
-	{
-		chunk=min(255,size);
-		memcpy(_page+_current_off,data,chunk);
-		_current_off+=chunk;
-		data+=chunk;
-		size-=chunk;
-		push(chunk,size);		
-	}
-	return 1;
-}
-// We assume that the headers fit in one page (64 k)
-//
-//_________________________________________________________
-uint8_t	ogm_page::writeHeaders(uint32_t size, uint8_t *data)
-{
-uint32_t chunk;
-	//
-	
-	_page[0]=0x01; 	// header
-	_timestamp=0;
-	memcpy(_page+1,data,size);
-	size++;
-	_current_lacing=0;
-	_current_off=size;
-	while(size>0)
-	{
-		chunk=min(size,255);
-		size-=chunk;
-		push(chunk,size);
-	}		
-	flush();
-	return 1;
-}
-// Update lacing
-// The second parameter is the remaining size to be written
-// it is used to avoid ending with 0xff, being the last lace
-//_________________________________________________________
-uint8_t ogm_page::push(uint32_t size,uint32_t remain)
-{
-	ADM_assert(size<0x100);
-	_lacing[_current_lacing++]=size;
-	if((size==0xff) && !remain)
-		_lacing[_current_lacing++]=0;
-	if(_current_lacing>252) flush();
-	
-	return 1;
-}
-
-static uint32_t crc_lookup[256]={
-  0x00000000,0x04c11db7,0x09823b6e,0x0d4326d9,
-  0x130476dc,0x17c56b6b,0x1a864db2,0x1e475005,
-  0x2608edb8,0x22c9f00f,0x2f8ad6d6,0x2b4bcb61,
-  0x350c9b64,0x31cd86d3,0x3c8ea00a,0x384fbdbd,
-  0x4c11db70,0x48d0c6c7,0x4593e01e,0x4152fda9,
-  0x5f15adac,0x5bd4b01b,0x569796c2,0x52568b75,
-  0x6a1936c8,0x6ed82b7f,0x639b0da6,0x675a1011,
-  0x791d4014,0x7ddc5da3,0x709f7b7a,0x745e66cd,
-  0x9823b6e0,0x9ce2ab57,0x91a18d8e,0x95609039,
-  0x8b27c03c,0x8fe6dd8b,0x82a5fb52,0x8664e6e5,
-  0xbe2b5b58,0xbaea46ef,0xb7a96036,0xb3687d81,
-  0xad2f2d84,0xa9ee3033,0xa4ad16ea,0xa06c0b5d,
-  0xd4326d90,0xd0f37027,0xddb056fe,0xd9714b49,
-  0xc7361b4c,0xc3f706fb,0xceb42022,0xca753d95,
-  0xf23a8028,0xf6fb9d9f,0xfbb8bb46,0xff79a6f1,
-  0xe13ef6f4,0xe5ffeb43,0xe8bccd9a,0xec7dd02d,
-  0x34867077,0x30476dc0,0x3d044b19,0x39c556ae,
-  0x278206ab,0x23431b1c,0x2e003dc5,0x2ac12072,
-  0x128e9dcf,0x164f8078,0x1b0ca6a1,0x1fcdbb16,
-  0x018aeb13,0x054bf6a4,0x0808d07d,0x0cc9cdca,
-  0x7897ab07,0x7c56b6b0,0x71159069,0x75d48dde,
-  0x6b93dddb,0x6f52c06c,0x6211e6b5,0x66d0fb02,
-  0x5e9f46bf,0x5a5e5b08,0x571d7dd1,0x53dc6066,
-  0x4d9b3063,0x495a2dd4,0x44190b0d,0x40d816ba,
-  0xaca5c697,0xa864db20,0xa527fdf9,0xa1e6e04e,
-  0xbfa1b04b,0xbb60adfc,0xb6238b25,0xb2e29692,
-  0x8aad2b2f,0x8e6c3698,0x832f1041,0x87ee0df6,
-  0x99a95df3,0x9d684044,0x902b669d,0x94ea7b2a,
-  0xe0b41de7,0xe4750050,0xe9362689,0xedf73b3e,
-  0xf3b06b3b,0xf771768c,0xfa325055,0xfef34de2,
-  0xc6bcf05f,0xc27dede8,0xcf3ecb31,0xcbffd686,
-  0xd5b88683,0xd1799b34,0xdc3abded,0xd8fba05a,
-  0x690ce0ee,0x6dcdfd59,0x608edb80,0x644fc637,
-  0x7a089632,0x7ec98b85,0x738aad5c,0x774bb0eb,
-  0x4f040d56,0x4bc510e1,0x46863638,0x42472b8f,
-  0x5c007b8a,0x58c1663d,0x558240e4,0x51435d53,
-  0x251d3b9e,0x21dc2629,0x2c9f00f0,0x285e1d47,
-  0x36194d42,0x32d850f5,0x3f9b762c,0x3b5a6b9b,
-  0x0315d626,0x07d4cb91,0x0a97ed48,0x0e56f0ff,
-  0x1011a0fa,0x14d0bd4d,0x19939b94,0x1d528623,
-  0xf12f560e,0xf5ee4bb9,0xf8ad6d60,0xfc6c70d7,
-  0xe22b20d2,0xe6ea3d65,0xeba91bbc,0xef68060b,
-  0xd727bbb6,0xd3e6a601,0xdea580d8,0xda649d6f,
-  0xc423cd6a,0xc0e2d0dd,0xcda1f604,0xc960ebb3,
-  0xbd3e8d7e,0xb9ff90c9,0xb4bcb610,0xb07daba7,
-  0xae3afba2,0xaafbe615,0xa7b8c0cc,0xa379dd7b,
-  0x9b3660c6,0x9ff77d71,0x92b45ba8,0x9675461f,
-  0x8832161a,0x8cf30bad,0x81b02d74,0x857130c3,
-  0x5d8a9099,0x594b8d2e,0x5408abf7,0x50c9b640,
-  0x4e8ee645,0x4a4ffbf2,0x470cdd2b,0x43cdc09c,
-  0x7b827d21,0x7f436096,0x7200464f,0x76c15bf8,
-  0x68860bfd,0x6c47164a,0x61043093,0x65c52d24,
-  0x119b4be9,0x155a565e,0x18197087,0x1cd86d30,
-  0x029f3d35,0x065e2082,0x0b1d065b,0x0fdc1bec,
-  0x3793a651,0x3352bbe6,0x3e119d3f,0x3ad08088,
-  0x2497d08d,0x2056cd3a,0x2d15ebe3,0x29d4f654,
-  0xc5a92679,0xc1683bce,0xcc2b1d17,0xc8ea00a0,
-  0xd6ad50a5,0xd26c4d12,0xdf2f6bcb,0xdbee767c,
-  0xe3a1cbc1,0xe760d676,0xea23f0af,0xeee2ed18,
-  0xf0a5bd1d,0xf464a0aa,0xf9278673,0xfde69bc4,
-  0x89b8fd09,0x8d79e0be,0x803ac667,0x84fbdbd0,
-  0x9abc8bd5,0x9e7d9662,0x933eb0bb,0x97ffad0c,
-  0xafb010b1,0xab710d06,0xa6322bdf,0xa2f33668,
-  0xbcb4666d,0xb8757bda,0xb5365d03,0xb1f740b4};
-
-// build the header and add crc
-//_________________________________
-uint8_t ogm_page::buildHeader( void )
-{
-uint32_t crc_reg=0,i;
-uint8_t *data;
-
-	memset(&_header,0,sizeof(_header));
-	memcpy(&_header,"OggS",4);
-	
-	if(!_fresh) _header.header_type=1;
-	if(_first)
-	{
-	  _header.header_type=OG_FIRST_PAGE;
-	  _first=0;
-	}
-	
-	
-	//	
-#ifdef ADM_BIG_ENDIAN
-	#define MEMcpy memcpyswap
-#else
-	#define MEMcpy memcpy
-#endif		
-	MEMcpy((uint8_t *)_header.abs_pos,(uint8_t *)&_timestamp,8);
-	MEMcpy((uint8_t *)_header.serial,(uint8_t *)&_stream,4);	
-	MEMcpy((uint8_t *)&_header.page_sequence,(uint8_t *)&_pageNumber,4);
-	
-	_header.nb_segment=_current_lacing;
-	
-	data=(uint8_t*)&_header;
-	// hdr
-  	for(i=0;i<sizeof(_header);i++)
-      		crc_reg=(crc_reg<<8)^crc_lookup[((crc_reg >> 24)&0xff)^data[i]];
-	// lacing
-    	for(i=0;i<_current_lacing;i++)
-      		crc_reg=(crc_reg<<8)^crc_lookup[((crc_reg >> 24)&0xff)^_lacing[i]];
-      	for(i=0;i<_current_off;i++)
-  		crc_reg=(crc_reg<<8)^crc_lookup[((crc_reg >> 24)&0xff)^_page[i]];
-	memcpy(&_header.checksum,&crc_reg,4);
-	return 1;
-
-}
-//EOF

Deleted: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/oplug_ogm/op_ogpage.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/oplug_ogm/op_ogpage.h	2009-07-23 18:18:42 UTC (rev 5130)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/oplug_ogm/op_ogpage.h	2009-07-23 18:18:44 UTC (rev 5131)
@@ -1,54 +0,0 @@
-//
-// C++ Interface: op_ogpage
-//
-// Description: 
-//
-//
-// Author: mean <fixounet at free.fr>, (C) 2004
-//
-// Copyright: See COPYING file that comes with this distribution
-//
-//
-
-#ifndef OP_OGM
-#define OP_OHM
-
-#include "ADM_inputs/ADM_ogm/ADM_oghead.h"
-
-#define MAX_OGM_PAGESIZE (64*1024)
-
-class ogm_page
-{
-protected:
-	FILE		*_fd;
-	OG_Header	_header;
-	uint32_t	_pageNumber;
-	uint8_t 	_lacing[512];
-	uint8_t 	_page[MAX_OGM_PAGESIZE];
-	uint32_t 	_current_lacing;
-	uint32_t	_current_off;
-	
-	
-	uint32_t	_first;		// first page ?
-	uint8_t		reset(void);
-	uint8_t		_fresh;		// If =1, this page starts with a fresh packet
-	uint64_t	_timestamp;
-	uint8_t		_keyFrame;	// if =1 this page starts with a keyframe
-	uint8_t		_needSequence;
-	uint32_t	_stream;
-	uint32_t 	_sequence;
-	uint8_t 	push(uint32_t size,uint32_t remain);
-	uint8_t 	buildHeader( void );
-public:
-			ogm_page(FILE *fd,uint32_t streamId);
-			~ogm_page(void);
-	uint8_t		flush(void);
-	uint8_t		write(uint32_t size, uint8_t *data,uint32_t flags,uint64_t timestamp);
-	uint8_t		writeHeaders(uint32_t page, uint8_t *data);
-	uint8_t 	writeDirect(uint32_t size, uint8_t *data);
-	// Direct writing, bypass our own muxer
-	uint8_t 	writeRawData( uint32_t size, uint8_t *data,uint64_t samples);
-	
-	
-};
-#endif

Deleted: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/oplug_ogm/op_ogsave.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/oplug_ogm/op_ogsave.cpp	2009-07-23 18:18:42 UTC (rev 5130)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/oplug_ogm/op_ogsave.cpp	2009-07-23 18:18:44 UTC (rev 5131)
@@ -1,168 +0,0 @@
-//
-// C++ Implementation: op_ogsave
-//
-// Description: 
-//
-//
-// Author: mean <fixounet at free.fr>, (C) 2004
-//
-// Copyright: See COPYING file that comes with this distribution
-//
-//
-/***************************************************************************
- *                                                                         *
- *   This program is free software; you can redistribute it and/or modify  *
- *   it under the terms of the GNU General Public License as published by  *
- *   the Free Software Foundation; either version 2 of the License, or     *
- *   (at your option) any later version.                                   *
- *                                                                         *
- ***************************************************************************/
-#include "config.h"
-
-#include "ADM_default.h"
-#include "fourcc.h"
-#include "avi_vars.h"
-#include "DIA_coreToolkit.h"
-
-//#include "avilist.h"
-
-#include "ADM_videoFilter.h"
-
-#include "ADM_encoder/ADM_vidEncode.hxx"
-
-#include "ADM_audio/aviaudio.hxx"
-#include "ADM_audiofilter/audioprocess.hxx"
-
-#include "ADM_default.h"
-#include "op_ogsave.h"
-
-//_______________________________________________
-uint8_t ogmSave(const char  *name)
-{
-uint8_t ret=0;
-	ADM_ogmWrite *writter;
-	if(videoProcessMode())
-		writter=new ADM_ogmWriteProcess;
-	else
-		writter=new ADM_ogmWriteCopy;
-	ret=writter->save(name);
-	
-	delete writter;
-	return ret;
-}
-
-//_______________________________________________
-ADM_ogmWrite::ADM_ogmWrite(void)
-{
-_audioBuffer=_videoBuffer=NULL;
-videoStream=videoStream=NULL;
-encoding_gui=NULL;
-audioFilter=NULL;
-_fd=NULL;
-_togo=0;
-_packet=0;
-TwoPassLogFile=NULL;
-}
-
-//_______________________________________________
-ADM_ogmWrite::~ADM_ogmWrite()
-{
-#define FREE_IF(x) if(x) {delete x;x=NULL;}
-#define FREE_IFX(x) if(x) {delete [] x;x=NULL;}
-
-	FREE_IFX(_audioBuffer);
-	FREE_IFX(_videoBuffer);
-	FREE_IF(videoStream);
-	FREE_IF(videoStream);
-	FREE_IF(encoding_gui);
-	FREE_IF(audioFilter);
-	
-	if(_fd) fclose(_fd);
-	_fd=NULL;
-	if(TwoPassLogFile)
-		delete [] TwoPassLogFile;
-	TwoPassLogFile=NULL;
-
-
-}
-//_______________________________________________
-uint8_t ADM_ogmWrite::save(const char *name)
-{
-
-uint8_t *bufr;
-uint32_t len,flags;
-uint8_t error=0;
-
-
-		_fd=fopen(name,"wb");
-		if(!_fd)
-		{
-                        GUI_Error_HIG(QT_TR_NOOP("File error"), QT_TR_NOOP("Cannot open \"%s\" for writing."), name);
-			return 0;
-		}
-
-		videoStream=new ogm_page(_fd,1);
-	
-		encoding_gui=new DIA_encoding(25000);
-                encoding_gui->setContainer(QT_TR_NOOP("OGM"));
-		//______________ Write headers..._____________________
-		
-		if(!initVideo(name))
-		{
-			fclose(_fd);
-			_fd=NULL;
-                        GUI_Error_HIG(QT_TR_NOOP("Could not initialize video"), NULL);
-			return 0;
-		
-		}
-		if(!initAudio())
-		{
-			fclose(_fd);
-			_fd=NULL;
-                        GUI_Error_HIG(QT_TR_NOOP("Could not initialize audio"), NULL);
-			return 0;
-		
-		}
-
-		encoding_gui->setFps(_fps1000);
-		encoding_gui->reset();
-		// ___________________Then body_______________________
-                uint32_t j=0;
-		for( j=0;j<_togo && !error;j++)
-		{
-			if(!encoding_gui->isAlive())
-			{
-				error=1;
-				continue;
-			}
-			if(!writeVideo(j)) error=1;
-			if(!writeAudio(j)) error=1;
-		}
-                if(abs(j-_togo)<3 && error) error=0; // might be caused by late B frame
-		delete encoding_gui;
-		encoding_gui=NULL;
-		//________________ Flush______________________
-		videoStream->flush();
-		endAudio();
-		//deleteAudioFilters();
-		// ____________Close____________________
-		fclose(_fd);
-		_fd=NULL;
-
-	return !error;
-}
-// Dummy ones
-uint8_t	ADM_ogmWrite::initVideo(const char *name)
-{
-		ADM_assert(0);
-		return 0;
-
-}
-//___________________________________________________
-uint8_t	ADM_ogmWrite::writeVideo(uint32_t frame)
-{
-		ADM_assert(0);
-		return 0;
-
-}
-// EOF

Deleted: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/oplug_ogm/op_ogsave.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/oplug_ogm/op_ogsave.h	2009-07-23 18:18:42 UTC (rev 5130)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/oplug_ogm/op_ogsave.h	2009-07-23 18:18:44 UTC (rev 5131)
@@ -1,92 +0,0 @@
-//
-// C++ Interface: op_ogsave
-//
-// Description: 
-//
-//
-// Author: mean <fixounet at free.fr>, (C) 2004
-//
-// Copyright: See COPYING file that comes with this distribution
-//
-//
-#ifndef OP_OGSAVE
-#define OP_OGSAVE
-
-#include "ADM_userInterfaces/ADM_commonUI/DIA_encoding.h"
-#include "op_ogpage.h"
-#include "ADM_encoder/adm_encoder.h"
-
-// Some little / big endian stuff
-extern void memcpyswap(uint8_t *dest, uint8_t *src, uint32_t size);
-#ifdef ADM_BIG_ENDIAN	
-	 #define MEMCPY(a,b,c) memcpyswap((uint8_t *)a, (uint8_t *)b,c)
-#else
-	#define MEMCPY memcpy
-#endif	
-//
-class ADM_ogmWrite
-{
-	protected:
-			char 			*TwoPassLogFile;	
-	
-			uint32_t		_audioTarget,_audioCurrent;
-			
-			
-			uint32_t		_togo;
-			uint64_t		_packet;			
-			FILE			*_fd;
-			uint32_t		_fps1000;
-			uint8_t 		*_audioBuffer;
-			uint8_t 		*_videoBuffer;
-			DIA_encoding		*encoding_gui;
-			ogm_page 		*videoStream;
-			ogm_page		*audioStream;
-			
-				uint8_t		initAudio(void);
-				uint8_t		writeAudio(uint32_t j);
-				uint8_t		endAudio( void);
-				uint32_t 	putAC3( uint32_t j );
-				uint32_t 	putMP3( uint32_t j );
-				
-				AVDMGenericAudioStream	*audioFilter;
-				
-			virtual uint8_t		initVideo(const char *name);
-			virtual uint8_t		writeVideo(uint32_t frame);
-					
-	public:
-					ADM_ogmWrite(void);				
-					~ADM_ogmWrite(void);
-			uint8_t 	save(const char *name);
-};
-
-class ADM_ogmWriteCopy : public ADM_ogmWrite
-{
-protected:
-			
-			virtual uint8_t		initVideo(const char *name);			
-			virtual uint8_t		writeVideo(uint32_t frame);
-			uint32_t 		searchForward(uint32_t startframe);
-			uint32_t		_lastIPFrameSent;	
-public:
-						ADM_ogmWriteCopy(void);
-						~ADM_ogmWriteCopy(void);
-};
-
-class ADM_ogmWriteProcess : public ADM_ogmWrite
-{
-protected:
-			AVDMGenericVideoStream  *_incoming;
-			Encoder 		*_encode;
-                        uint32_t                _prestore;
-                        uint32_t                _prestoring;
-			virtual uint8_t	initVideo(const char *name);			
-			virtual uint8_t	writeVideo(uint32_t frame);	
-public:
-			ADM_ogmWriteProcess(void);
-			~ADM_ogmWriteProcess(void);
-
-
-};
-
-
-#endif

Deleted: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/oplug_ogm/op_ogsavecopy.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/oplug_ogm/op_ogsavecopy.cpp	2009-07-23 18:18:42 UTC (rev 5130)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/oplug_ogm/op_ogsavecopy.cpp	2009-07-23 18:18:44 UTC (rev 5131)
@@ -1,207 +0,0 @@
-//
-// C++ Implementation: op_ogsavecopy
-//
-// Description: 
-//
-//
-// Author: mean <fixounet at free.fr>, (C) 2004
-//
-// Copyright: See COPYING file that comes with this distribution
-//
-//
-#include "config.h"
-
-
-#include "fourcc.h"
-#include "avi_vars.h"
-#include "ADM_default.h"
-#include "ADM_assert.h"
-
-//#include "avilist.h"
-
-#include "ADM_videoFilter.h"
-
-#include "ADM_encoder/ADM_vidEncode.hxx"
-#include "ADM_audio/aviaudio.hxx"
-#include "ADM_audiofilter/audioprocess.hxx"
-
-
-#include "op_ogsave.h"
-
-#include "ADM_osSupport/ADM_debugID.h"
-#define MODULE_NAME 0
-#include "ADM_osSupport/ADM_debug.h"
-
-
-uint8_t	ADM_ogmWriteCopy::initVideo(const char *name)
-{
-uint32_t w,h;	
-int64_t dur64;
-uint32_t dur32;
-uint16_t dur16;
-		_togo=frameEnd-frameStart;
-		stream_header header;
-		
-		_videoBuffer=new uint8_t[avifileinfo->width*avifileinfo->height*3];
-
-		
-
-		
-		memset(&header,0,sizeof(header));
-		
-		memcpy(&(header.streamtype),"video\0\0\0",8);
-		MEMCPY(&(header.subtype),&(avifileinfo->fcc),4);
-		
-		encoding_gui->setCodec(QT_TR_NOOP("Copy"));
-		encoding_gui->setPhasis(QT_TR_NOOP("Saving..."));
-		
-		//header.size=sizeof(header);
-		dur32=sizeof(header);
-		MEMCPY(&header.size,&dur32,4);
-		
-		w=avifileinfo->width;
-		h=avifileinfo->height;
-		MEMCPY(&(header.video.width),&w,4);
-		MEMCPY(&(header.video.height),&h,4);
-				
-		// Timing ..
-		double duration; // duration in 10us
-		_fps1000=avifileinfo->fps1000;
-		duration=avifileinfo->fps1000;
-		duration=1000./duration;
-		duration*=1000*1000;
-		duration*=10;
-		
-		
-		dur64=(int64_t)duration;
-		
-		MEMCPY(&header.time_unit,&dur64,8);
-		
-		dur64=1;
-		MEMCPY(&header.samples_per_unit,&dur64,8);
-		
-		dur32=0x10000;
-		MEMCPY(&header.buffersize,&dur32,4);
-		//header.buffersize=0x10000;
-		
-		//header.bits_per_sample=24;
-		dur16=24;
-		MEMCPY(&header.bits_per_sample,&dur16,2);
-		
-		dur16=1;
-		//header.default_len=1;
-		dur32=1;
-		MEMCPY(&header.default_len,&dur32,4);
-		
-		_lastIPFrameSent=0xfffffff;
-		
-		return videoStream->writeHeaders(sizeof(header),(uint8_t *)&header); // +4 ?
-
-}
-//___________________________________________________
-uint8_t	ADM_ogmWriteCopy::writeVideo(uint32_t frame)
-{
-uint32_t len,flags;
-uint32_t forward;
-uint8_t ret1=0;
-ADMCompressedImage img;
-
-              img.data=_videoBuffer;
-
-		// Check for B_frames
-		if(!video_body->isReordered(frameStart+frame))
-		{
-
-			if(!  video_body->getFrameNoAlloc (frameStart+frame,&img))// _videoBuffer, &len,     &flags)) 
-				return 0;		
-			encoding_gui->setFrame(frame,img.dataLength,0,_togo);
-			return videoStream->write(img.dataLength,img.data,img.flags,frame);
-		}
-		
-		// we DO have b frame
-		// 
-		video_body->getFlags (frameStart + frame, &flags);
-		if(flags & AVI_B_FRAME)
-			{ 	// search if we have to send a I/P frame in adance
-				
-				uint32_t forward;
-				forward=searchForward(frameStart+frame);
-				// if we did not sent it, do it now
-				if(forward!=_lastIPFrameSent)
-				{
-					aprintf("\tP Frame not sent, sending it :%lu\n",forward);
-					ret1 = video_body->getFrameNoAlloc (forward,&img);// _videoBuffer, &len,&flags);
-					_lastIPFrameSent=forward;
-
-				}
-				else
-				{
-					// we already sent it :)
-					// send n-1
-					aprintf("\tP Frame already, sending  :%lu\n",frameStart+frame-1);
-					ret1 = video_body->getFrameNoAlloc (frameStart+frame-1,&img);// _videoBuffer, &len,&flags);
-
-				}
-
-			}
-			else // it is not a B frame and we have nothing on hold, sent it..
-			{
-				// send n-1 if we reach the fwd reference frame
-				if((frame+frameStart)==_lastIPFrameSent)
-				{
-					aprintf("\tSending Last B-frame :(%lu)\n",frameStart + frame-1);
-					ret1 = video_body->getFrameNoAlloc (frameStart + frame-1, &img);//_videoBuffer, &len,		&flags);
-
-				}
-				else
-				{
-					aprintf("\tJust sending it :(%lu)-(%lu)\n",frameStart + frame,_lastIPFrameSent);
-					ret1 = video_body->getFrameNoAlloc (frameStart + frame,&img);// _videoBuffer, &len, 		&flags);
-
-				}
-			}
-                encoding_gui->setFrame(frame,img.dataLength,0,_togo);
-		return videoStream->write(img.dataLength,img.data,img.flags,frame);
-		return ret1;
-
-}
-// Return the next non B frame
-// 0 if not found
-//___________________________________________________
-uint32_t ADM_ogmWriteCopy::searchForward(uint32_t startframe)
-{
-		uint32_t fw=startframe;
-		uint32_t flags;
-		uint8_t r;
-
-			while(1)
-			{
-				fw++;
-				r=video_body->getFlags (fw, &flags);
-				if(!(flags & AVI_B_FRAME))
-				{
-					return fw;
-
-				}
-				ADM_assert(r);
-				if(!r)
-				{
-					printf("\n Could not locate last non B frame \n");
-					return 0;
-				}
-
-			}
-}
-//___________________________________________________
-ADM_ogmWriteCopy::ADM_ogmWriteCopy( void)
-{
-	_lastIPFrameSent=0;
-
-}
-//___________________________________________________
-ADM_ogmWriteCopy::~ADM_ogmWriteCopy()
-{
-
-
-}
-

Deleted: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/oplug_ogm/op_ogsaveprocess.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/oplug_ogm/op_ogsaveprocess.cpp	2009-07-23 18:18:42 UTC (rev 5130)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/oplug_ogm/op_ogsaveprocess.cpp	2009-07-23 18:18:44 UTC (rev 5131)
@@ -1,231 +0,0 @@
-//
-// C++ Implementation: op_ogsaveprocess
-//
-// Description: 
-//
-//
-// Author: mean <fixounet at free.fr>, (C) 2004
-//
-// Copyright: See COPYING file that comes with this distribution
-//
-//
-//
-// C++ Implementation: op_ogsavecopy
-//
-// Description: 
-//
-//
-// Author: mean <fixounet at free.fr>, (C) 2004
-//
-// Copyright: See COPYING file that comes with this distribution
-//
-//
-#include <stdio.h>
-#include <stdlib.h>
-#include <math.h>
-#include <unistd.h>
-#include <time.h>
-#include <sys/time.h>
-
-#include "config.h"
-#include "fourcc.h"
-#include "avi_vars.h"
-#include "DIA_coreToolkit.h"
-
-//#include "avilist.h"
-
-#include "ADM_videoFilter.h"
-#include "ADM_videoFilter_internal.h"
-#include "ADM_encoder/ADM_vidEncode.hxx"
-#include "ADM_audio/aviaudio.hxx"
-#include "ADM_audiofilter/audioprocess.hxx"
-
-#include "ADM_default.h"
-#include "op_ogsave.h"
-
-#define aprintf printf
-
-//________________________________________________
-uint8_t	ADM_ogmWriteProcess::initVideo(const char *name)
-{		
-uint32_t w,h,fps1000,fcc;
-        _prestore=0;
-        _prestoring=1;
-	_incoming = getLastVideoFilter (frameStart,frameEnd-frameStart);
- 	_togo=_incoming->getInfo()->nb_frames;
-  	_encode = getVideoEncoder (_incoming->getInfo()->width,_incoming->getInfo()->height);
-	if (!_encode)
-    		return 0;
- 	
-	TwoPassLogFile=new char[strlen(name)+6];
-  	strcpy(TwoPassLogFile,name);
-  	strcat(TwoPassLogFile,".stat"); 	  
-   
- 	_encode->setLogFile(TwoPassLogFile,_togo);
-	
-	int reuse = 0;
-
-	if (_encode->isDualPass())
-	{
-		FILE *tmp;
-
-		if ((tmp = fopen(TwoPassLogFile,"rt")))
-		{
-			fclose(tmp);
-
-			if (GUI_Question(QT_TR_NOOP("Reuse the existing log file?")))
-				reuse = 1;
-		}
-	}
-
-  	if (!_encode->configure (_incoming, reuse))
-    	{
-      		delete 	_encode;
-      		_encode = NULL;
-                GUI_Error_HIG (QT_TR_NOOP("Filter init failed"), NULL);
-      		return 0;
-    	};
- 	w= _incoming->getInfo ()->width;
-	h=_incoming->getInfo ()->height;
-	fps1000=_incoming->getInfo ()->fps1000;
-	_fps1000=fps1000;
-	fcc= fourCC::get((uint8_t *)_encode->getCodecName());
-   	_videoBuffer=new uint8_t[w*h*3];
-  	encoding_gui->setCodec(_encode->getDisplayName());
-   
-//-----------------------VBR--------------------------------------
-	if (_encode->isDualPass ())
-	{
-		uint8_t *buffer;
-		uint32_t len, flag;
-
-		aprintf("\n** Dual pass encoding**\n");
-	
-		if(!reuse)
- 		{
-      			aprintf("**Pass 1:%lu\n",_togo);
-      			_encode->startPass1 ();
-			encoding_gui->setCodec(_encode->getCodecName());
-			encoding_gui->setPhasis(QT_TR_NOOP("Pass one"));
-                        ADMBitstream bitstream(w*h*3);
-                        bitstream.data=_videoBuffer;
-      			//__________________________________
-      			//   now go to main loop.....
-      			//__________________________________
-      			for (uint32_t cf = 0; cf < _togo; cf++)
-			{	
-                                bitstream.cleanup(cf); 
-	  			if (!_encode->encode (cf, &bitstream))
-				{
-					printf("\n Encoding of frame %lu failed !\n",cf);
-	    				return 0;
-				}
-                                encoding_gui->setFrame(cf,bitstream.len,bitstream.out_quantizer,_togo);
-				if(!encoding_gui->isAlive())
-				{
-					return 0;
-				}
-			}
-		     	aprintf("**Pass 1:done\n");
-    		}// End of reuse
-
-      		if(!_encode->startPass2 ())
-		{
-      			printf("Pass2 ignition failed\n");
-      			return 0;
-		}
-		encoding_gui->setPhasis(QT_TR_NOOP("Pass 2"));
-	}   //-------------------------/VBR-----------------------------------
-	else
-	{
-		encoding_gui->setPhasis(QT_TR_NOOP("Encoding"));
-	}
-  // init save avi
-
-// now we build the new stream !
-    	aprintf("**main pass:\n");
-
-
-		stream_header header;
-		int64_t dur64;
-		uint32_t dur32;
-		uint16_t dur16;
-		
-		memset(&header,0,sizeof(header));
-		
-		memcpy(&(header.streamtype),"video\0\0\0",8);
-		MEMCPY(&(header.subtype),&fcc,4);
-		
-		//header.size=sizeof(header);
-		dur32=sizeof(header);
-		MEMCPY(&header.size,&dur32,4);
-		MEMCPY(&(header.video.width),&w,4);
-		MEMCPY(&(header.video.height),&h,4);
-		// Timing ..
-		double duration; // duration in 10us
-		duration=fps1000;
-		duration=1000./duration;
-		duration*=1000*1000;
-		duration*=10;
-		
-		dur64=(int64_t)duration;
-		
-		MEMCPY(&header.time_unit,&dur64,8);
-		dur64=1;
-		MEMCPY(&header.samples_per_unit,&dur64,8);
-		
-		dur32=0x10000;
-		MEMCPY(&header.buffersize,&dur32,4);
-		
-		dur16=24;
-		MEMCPY(&header.bits_per_sample,&dur16,2);
-		
-		
-		//header.default_len=1;
-		dur32=1;
-		MEMCPY(&header.default_len,&dur32,4);
-		
-		return videoStream->writeHeaders(sizeof(header),(uint8_t *)&header); // +4 ?
-
-}
-//___________________________________________________
-uint8_t	ADM_ogmWriteProcess::writeVideo(uint32_t frame)
-{
-uint32_t len,flags;
-uint8_t ret;
-uint32_t page=_incoming->getInfo ()->width*_incoming->getInfo ()->height;
-ADMBitstream bitstream(page*3);
-                 bitstream.data=_videoBuffer;
-                 
-                 ret= _encode->encode ( frame, &bitstream);
-                 if(!bitstream.len && _prestoring) 
-                 {
-                   printf("Frame skipped\n");
-                   _prestore++;
-                   return 1;
-                 }
-                 _prestoring=0;
-                 bitstream.dtsFrame=frame-_prestore;
-		 if(!ret)
-                 {
-                        printf("OgmWrite: Error encoding frame %d\n",frame);
-                        return 0;
-                 }
-                encoding_gui->setFrame(frame,bitstream.len,bitstream.out_quantizer,_togo);
-                return videoStream->write(bitstream.len,_videoBuffer,bitstream.flags,bitstream.dtsFrame);
-}
-//___________________________________________________
-ADM_ogmWriteProcess::ADM_ogmWriteProcess( void)
-{
-	_incoming=NULL;
-	_encode=NULL;
-}
-//___________________________________________________
-ADM_ogmWriteProcess::~ADM_ogmWriteProcess()
-{
-	if(_incoming) delete _incoming;
-	if(_encode) delete   _encode;
-
-}
-//EOF
-



From mean at mail.berlios.de  Thu Jul 23 20:18:46 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Thu, 23 Jul 2009 20:18:46 +0200
Subject: [Avidemux-svn-commit] r5132 - in
	branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers:
	. oplug_dummy oplug_flv oplug_mpeg oplug_mpegFF
Message-ID: <200907231818.n6NIIk7q009284@sheep.berlios.de>

Author: mean
Date: 2009-07-23 20:18:46 +0200 (Thu, 23 Jul 2009)
New Revision: 5132

Removed:
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/ADM_lavformat.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/ADM_lavformat.h
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/ADM_muxts.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/ADM_tscrc.h
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/oplug_dummy/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/oplug_dummy/oplug_dummy.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/oplug_flv/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/oplug_flv/oplug_flv.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/oplug_flv/oplug_flv.h
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/oplug_mpeg/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/oplug_mpeg/op_mpegpass.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/oplug_mpegFF/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/oplug_mpegFF/oplug_encodervcd.h
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/oplug_mpegFF/oplug_vcdff.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/oplug_mpegFF/oplug_vcdff.h
Log:
[muxer] Cleanup

Deleted: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/ADM_lavformat.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/ADM_lavformat.cpp	2009-07-23 18:18:44 UTC (rev 5131)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/ADM_lavformat.cpp	2009-07-23 18:18:46 UTC (rev 5132)
@@ -1,820 +0,0 @@
-//
-// C++ Implementation: ADM_lavformat
-//
-// Description:
-//
-//
-// Author: mean <fixounet at free.fr>, (C) 2004
-//
-// Copyright: See COPYING file that comes with this distribution
-//
-//
-/***************************************************************************
- *                                                                         *
- *   This program is free software; you can redistribute it and/or modify  *
- *   it under the terms of the GNU General Public License as published by  *
- *   the Free Software Foundation; either version 2 of the License, or     *
- *   (at your option) any later version.                                   *
- *                                                                         *
- ***************************************************************************/
-
-#include "config.h"
-
-#include <stdio.h>
-#include <stdlib.h>
-#include <math.h>
-#include <string.h>
-
-extern "C"
-{
-	#include "ADM_libraries/ADM_ffmpeg/ADM_lavformat/avformat.h"
-};
-
-#undef malloc
-#undef realloc
-#undef free
-
-#include "ADM_default.h"
-#include "DIA_coreToolkit.h"
-
-#include "ADM_audiofilter/audioprocess.hxx"
-#include "ADM_audio/ADM_a52info.h"
-
-#include "ADM_codecs/ADM_codec.h"
-#include "ADM_editor/ADM_Video.h"
-
-#include "ADM_lavformat.h"
-#include "fourcc.h"
-
-#include "prefs.h"
-#include "ADM_osSupport/ADM_debugID.h"
-#define MODULE_NAME MODULE_LAVFORMAT
-#include "ADM_osSupport/ADM_debug.h"
-
-#include "ADM_cpuCap.h"
-static    AVOutputFormat *fmt;
-static    AVFormatContext *oc;
-static    AVStream *audio_st, *video_st;
-static    double audio_pts, video_pts;
-
-static uint32_t one;
-uint64_t  _curDTS;
-
-static uint8_t ADM_4cc_to_lavcodec(const char *fcc, CodecID *outlavid);
-static uint8_t ADM_WaveTag_to_lavcodec(uint32_t tag, CodecID *outlavid);
-
-extern uint8_t isVP6Compatible (uint32_t fourcc);
-
-// convert in in us to out in 90Khz tick
-int64_t adm_90k( double in)
-{
-int64_t out;
-	// in=in/1000*1000 us->s
-	// in/=(1/90000) nb 90 khz tick
-	// in*=90*000/000*000
-	// in =  in*=90/000
-	//in=in*90./1000.;
-	out= (int64_t)in;
-	return out;
-}
-//___________________________________________________________________________
-lavMuxer::lavMuxer( void )
-{
-	fmt=NULL;
-	oc=NULL;
-	audio_st=NULL;
-	video_st=NULL;
-	_fps1000=0;
-	_audioByterate=0;
-	_lastAudioDts=0;
-	_frameNo=0;
-	_running=0;
-	_curDTS=0;
-        _audioFq=0;
-}
-//___________________________________________________________________________
-lavMuxer::~lavMuxer()
-{
-	close();
-}
-//___________________________________________________________________________
-uint8_t lavMuxer::open(const char *filename, uint32_t inbitrate,ADM_MUXER_TYPE type, aviInfo *info, WAVHeader *audioheader)
-{
-        return open(filename,inbitrate,type,info,0,NULL,audioheader,0,NULL);
-}
-
-
-uint8_t lavMuxer::open(const char *filename,uint32_t inbitrate, ADM_MUXER_TYPE type, aviInfo *info,
-              uint32_t videoExtraDataSize, uint8_t *videoExtraData, WAVHeader *audioheader,
-              uint32_t audioextraSize,uint8_t *audioextraData)
-{
- AVCodecContext *c;
- 	_type=type;
-	_fps1000=info->fps1000;
-	switch(_type)
-	{
-	case MUXER_TS:
-		fmt=guess_format("mpegts", NULL, NULL);
-		break;
-	case MUXER_DVD:
-		fmt = guess_format("dvd", NULL, NULL);
-		break;
-	case MUXER_VCD:
-		fmt = guess_format("vcd", NULL, NULL);
-		break;
-	case MUXER_SVCD:
-		fmt = guess_format("svcd", NULL, NULL);
-		break;
-	case MUXER_MP4:
-		fmt = guess_format("mp4", NULL, NULL);
-		break;
-	case MUXER_PSP:
-		fmt = guess_format("psp", NULL, NULL);
-		break;
-	case MUXER_FLV:
-		fmt = guess_format("flv", NULL, NULL);
-		break;
-	case MUXER_MATROSKA:
-		fmt = guess_format("matroska", NULL, NULL);
-		break;
-
-	default:
-		fmt=NULL;
-	}
-	if (!fmt)
-	{
-        	printf("Lav:Cannot guess format\n");
-                ADM_assert(0);
-		return 0;
-	}
-	oc = av_alloc_format_context();
-	if (!oc)
-	{
-       		printf("Lav:Cannot allocate context\n");
-		return 0;
-	}
-	oc->oformat = fmt;
-	snprintf(oc->filename,1000,"file://%s",filename);
-	// Video
-	//________
-
-	video_st = av_new_stream(oc, 0);
-	if (!video_st)
-	{
-		printf("Lav: new stream failed\n");
-		return 0;
-	}
-
-	c = video_st->codec;
-	switch(_type)
-	{
-				case MUXER_FLV:
-					 c->codec=new AVCodec;
-					 memset(c->codec,0,sizeof(AVCodec));
-					 if(fourCC::check(info->fcc,(uint8_t *)"FLV1"))
-					 {
-						 c->codec_id=CODEC_ID_FLV1;
-					 	 c->codec->name=ADM_strdup("FLV1");
-					 }else
-					 {
-						 if(isVP6Compatible(info->fcc))
-						 			{
-							 		 c->codec_id=CODEC_ID_VP6F;
-					 				 c->codec->name=ADM_strdup("VP6F");
-						 			}
-						 else
-							 ADM_assert(0);
-
-					 }
-
-					 break;
-                case MUXER_MATROSKA:
-                        strcpy(oc->title,"Avidemux");
-                        strcpy(oc->author,"Avidemux");
-                        c->sample_aspect_ratio.num=1;
-                        c->sample_aspect_ratio.den=1;
-                        if(isMpeg4Compatible(info->fcc))
-                        {
-                                c->codec_id = CODEC_ID_MPEG4;
-                                c->has_b_frames=1; // in doubt...
-                        }else
-                        {
-                                if(isH264Compatible(info->fcc))
-                                {
-                                        c->has_b_frames=1; // in doubt...
-                                        c->codec_id = CODEC_ID_H264;
-                                        c->codec=new AVCodec;
-                                        memset(c->codec,0,sizeof(AVCodec));
-                                        c->codec->name=ADM_strdup("H264");
-                                }
-                                else
-                                {
-                                   if(!ADM_4cc_to_lavcodec((const char *)&(info->fcc),&(c->codec_id)))
-                                   {
-                                      printf("[lavFormat] Cannot map  this\n");
-                                      return 0;
-                                   }
-
-                                }
-                        }
-                        if(videoExtraDataSize)
-                        {
-                                c->extradata=videoExtraData;
-                                c->extradata_size= videoExtraDataSize;
-                        }
-                        break;
-                case MUXER_MP4:
-                case MUXER_PSP:
-                {
-                        // probably a memeleak here
-                        char *foo=ADM_strdup(filename);
-                        
-                        strcpy(oc->title,ADM_GetFileName(foo));
-                        strcpy(oc->author,"Avidemux");
-                        c->sample_aspect_ratio.num=1;
-                        c->sample_aspect_ratio.den=1;
-                        if(isMpeg4Compatible(info->fcc))
-                        {
-                                c->codec_id = CODEC_ID_MPEG4;
-                                c->has_b_frames=1; // in doubt...
-                        }else
-                        {
-                                if(isH264Compatible(info->fcc))
-                                {
-                                        c->has_b_frames=1; // in doubt...
-                                        c->codec_id = CODEC_ID_H264;
-                                        c->codec=new AVCodec;
-                                        memset(c->codec,0,sizeof(AVCodec));
-                                        c->codec->name=ADM_strdup("H264");
-                                }
-                                else
-                                {
-                                        if(isDVCompatible(info->fcc))
-                                        {
-                                          c->codec_id = CODEC_ID_DVVIDEO;
-                                        }else
-                                        {
-                                          if(fourCC::check(info->fcc,(uint8_t *)"H263"))
-                                          {
-                                                    c->codec_id=CODEC_ID_H263;
-                                            }else{
-                                                    c->codec_id = CODEC_ID_MPEG4; // Default value
-                                                    printf("Ooops, cant mux that...\n");
-                                                    printf("Ooops, cant mux that...\n");
-                                                    printf("Ooops, cant mux that...\n");
-                                                }
-                                        }
-                                }
-                        }
-                        if(videoExtraDataSize)
-                        {
-                                c->extradata=videoExtraData;
-                                c->extradata_size= videoExtraDataSize;
-                        }
-                        if(MUXER_PSP==_type)
-                        {
-                            c->rc_buffer_size=0; //8*1024*224;
-                            c->rc_max_rate=0; //768*1000;
-                            c->rc_min_rate=0;
-                            c->bit_rate=768*1000;
-                        }
-                        else
-                        {
-                            c->rc_buffer_size=8*1024*224;
-                            c->rc_max_rate=9500*1000;
-                            c->rc_min_rate=0;
-                            if(!inbitrate)
-                                    c->bit_rate=9000*1000;
-                            else
-                                    c->bit_rate=inbitrate;
-                        }
-                }
-                        break;
-                case MUXER_TS:
-                        c->codec_id = CODEC_ID_MPEG2VIDEO;
-                        c->rc_buffer_size=8*1024*224;
-                        c->rc_max_rate=9500*1000;
-                        c->rc_min_rate=0;
-                        if(!inbitrate)
-                                c->bit_rate=9000*1000;
-                        else
-                                c->bit_rate=inbitrate;
-
-                        break;
-		case MUXER_DVD:
-			c->codec_id = CODEC_ID_MPEG2VIDEO;
-			c->rc_buffer_size=8*1024*224;
-			c->rc_max_rate=9500*1000;
-			c->rc_min_rate=0;
-			if(!inbitrate)
-				c->bit_rate=9000*1000;
-			else
-				c->bit_rate=inbitrate;
-
-			break;
-		case MUXER_VCD:
-			c->codec_id = CODEC_ID_MPEG1VIDEO;
-
-			c->rc_buffer_size=8*1024*40;
-			c->rc_max_rate=1152*1000;
-			c->rc_min_rate=1152*1000;
-
-			c->bit_rate=1152*1000;
-
-
-			break;
-		case MUXER_SVCD:
-			c->codec_id = CODEC_ID_MPEG2VIDEO;
-
-			c->rc_buffer_size=8*1024*112;
-			c->rc_max_rate=2500*1000;
-			c->rc_min_rate=0*1000;
-			if(!inbitrate)
-				c->bit_rate=2040*1000;
-			else
-				c->bit_rate=inbitrate;
-
-			break;
-		default:
-			ADM_assert(0);
-	}
-
-	c->codec_type = CODEC_TYPE_VIDEO;
-	c->flags=CODEC_FLAG_QSCALE;
-	c->width = info->width;
-	c->height = info->height;
-
-       AVRational fps25=(AVRational){1001,25025};
-       AVRational fps24=(AVRational){1001,24000};
-       AVRational fps30= (AVRational){1001,30000};
-       AVRational fpsfree= (AVRational){1000,_fps1000};
-
-
-    	switch(_fps1000)
-	{
-		case 25000:
-                {
-			 c->time_base= fps25;
-			 break;
-                }
-		case 23976:
-                        if(_type==MUXER_MP4 || _type==MUXER_PSP || _type==MUXER_FLV || _type==MUXER_MATROSKA)
-                        {
-                                 c->time_base= fps24; //(AVRational){1001,24000};
-                                break;
-                        }
-		case  29970:
-			 c->time_base=fps30;
-			break;
-		default:
-                      {
-                            if(_type==MUXER_MP4 || _type==MUXER_PSP || _type==MUXER_FLV || _type==MUXER_MATROSKA)
-                            {
-                                    c->time_base=fpsfree;// (AVRational){1000,_fps1000};
-                                    break;
-                            }
-                            else
-                            {
-                                GUI_Error_HIG(QT_TR_NOOP("Incompatible frame rate"), NULL);
-                                return 0;
-                            }
-                            }
-                        break;
-	}
-
-
-	c->gop_size=15;
-	c->max_b_frames=2;
-	c->has_b_frames=1;
-
-
-	// Audio
-	//________
-        if(audioheader)
-        {
-          audio_st = av_new_stream(oc, 1);
-          if (!audio_st)
-          {
-                  printf("Lav: new stream failed\n");
-                  return 0;
-          }
-
-
-          c = audio_st->codec;
-          c->frame_size=1024; //For AAC mainly, sample per frame
-          printf("[LavFormat] Bitrate %u\n",(audioheader->byterate*8)/1000);
-          _audioFq=c->sample_rate = audioheader->frequency;
-#if 0
-           if(_type== MUXER_PSP && audioheader->encoding==WAV_AAC)
-            {
-                    _audioFq=c->sample_rate = audioheader->frequency/2;                 //_audioFq*=2; // SBR
-             }
-#endif
-
-          switch(audioheader->encoding)
-          {
-                  case WAV_AC3: c->codec_id = CODEC_ID_AC3;c->frame_size=6*256;break;
-                  case WAV_MP2: c->codec_id = CODEC_ID_MP2;break;
-                  case WAV_MP3:
-  #warning FIXME : Probe deeper
-                              c->frame_size=1152;
-                              c->codec_id = CODEC_ID_MP3;
-                              break;
-                  case WAV_PCM:
-                                  // One chunk is 10 ms (1/100 of fq)
-                                  c->frame_size=4;
-                                  c->codec_id = CODEC_ID_PCM_S16LE;break;
-                  case WAV_AAC:
-                                  c->extradata=audioextraData;
-                                  c->extradata_size= audioextraSize;
-                                  c->codec_id = CODEC_ID_AAC;
-                                  break;
-                  default:
-                          if(_type==MUXER_MATROSKA)
-                          {
-                           if(ADM_WaveTag_to_lavcodec(audioheader->encoding, &(c->codec_id)))
-                           {
-                             if(audioextraData)
-                             {
-                                  c->extradata=audioextraData;
-                                  c->extradata_size= audioextraSize;
-                             }
-                             // Put a dummy time increment
-                              c->time_base= fps25;
-                             break;
-                           }
-                          }
-
-                          printf("Cant mux that ! audio\n");
-                          c->codec_id = CODEC_ID_MP2;
-                          return 0;
-                          break;
-          }
-          c->codec_type = CODEC_TYPE_AUDIO;
-
-          c->bit_rate = audioheader->byterate*8;
-          c->rc_buffer_size=(c->bit_rate/(2*8)); // 500 ms worth
-
-          c->channels = audioheader->channels;
-          _audioByterate=audioheader->byterate;
-
-        }
-        // /audio
-
-
-//----------------------
-	switch(_type)
-	{
-				case MUXER_FLV:
-                case MUXER_PSP:
-                case MUXER_MP4:
-                case MUXER_MATROSKA:
-                        oc->mux_rate=10080*1000; // Needed ?
-                        break;
-
-                case MUXER_TS:
-                        oc->mux_rate=10080*1000;
-                        break;
-		case MUXER_DVD:
-			oc->packet_size=2048;
-			oc->mux_rate=10080*1000;
-			break;
-		case MUXER_VCD:
-			oc->packet_size=2324;
-			oc->mux_rate=2352 * 75 * 8;
-
-			break;
-		case MUXER_SVCD:
-
-			oc->packet_size=2324;
-			oc->mux_rate=2*2352 * 75 * 8; // ?
-
-			break;
-		default:
-			ADM_assert(0);
-	}
-	oc->preload=AV_TIME_BASE/10; // 100 ms preloading
-	oc->max_delay=200*1000; // 500 ms
-
-	if (av_set_parameters(oc, NULL) < 0)
-	{
-		printf("Lav: set param failed \n");
-		return 0;
-	}
-	 if (url_fopen(&(oc->pb), filename, URL_WRONLY) < 0)
-	 {
-	 	printf("Lav: Failed to open file :%s\n",filename);
-		return 0;
-        }
-
-	ADM_assert(av_write_header(oc)>=0);
-	dump_format(oc, 0, filename, 1);
-
-
-	printf("lavformat mpeg muxer initialized\n");
-
-	_running=1;
-
-	one=(1000*1000*1000)/_fps1000;
-	_curDTS=one;
-
-	return 1;
-}
-//___________________________________________________________________________
-uint8_t lavMuxer::writeAudioPacket(uint32_t len, uint8_t *buf,uint32_t sample)
-{
-
-        int ret;
-        AVPacket pkt;
-        double f;
-        int64_t timeInUs;
-        static uint64_t sz = 0;
-            //printf("Audio paclet : size %u, sample %u\n",len,sample);
-
-           if(!audio_st) return 0;
-           if(!len) return 1;
-            av_init_packet(&pkt);
-            timeInUs=(int64_t)sample2time_us(sample);
-            aprintf("Sample: %u, time: %"LLU", size: %"LLU", this round: %u\n",sample, timeInUs, sz, len);
-            sz+=len;
-            /* Rescale to ?? */
-            if(_type==MUXER_FLV || _type==MUXER_MATROSKA) /* The FLV muxer expects packets dated in ms, there is something i did not get... WTF */
-            {
-            			f=timeInUs/1000; // ms
-            			f=floor(f+0.4);
-            }
-            else
-            {
-            	f=timeInUs;
-            	f/=1000000.; // In sec
-            	f*=_audioFq; // In samples
-            	f=floor(f+0.4);
-            }
-            pkt.dts=pkt.pts=f;
-            aprintf("Adm audio dts: %"LLU"\n",pkt.dts);
-            //printf("F:%f Q:%u D=%u\n",f,pkt.pts,timeInUs-_lastAudioDts);
-
-            pkt.flags |= PKT_FLAG_KEY;
-            pkt.data= buf;
-            pkt.size= len;
-            pkt.stream_index=1;
-            //pkt.duration=pkt.dts-_lastAudioDts; // Duration
-            aprintf("A: sample: %d, frame_pts: %"LLU", fq: %d\n", sample, pkt.dts, audio_st->codec->sample_rate);
-
-            ret = av_write_frame(oc, &pkt);
-            _lastAudioDts=timeInUs;
-            if(ret)
-            {
-                        printf("[LavFormat]Error writing audio packet\n");
-                        printf("[LavFormat]pts %llu dts %llu\n",pkt.pts,pkt.dts);
-                        return 0;
-            }
-            return 1;
-}
-//________________________________________________________________________
-uint64_t  lavMuxer::sample2time_us( uint32_t sample )
-{
-double f;
-
-                f=sample;
-                f*=1000.*1000.;
-                f/=_audioFq;              // Sample / Frequency = time in seconds *10E6 to get in in us
-
-                return (uint64_t)floor(f);
-
-}
-//___________________________________________________________________________
-uint8_t lavMuxer::needAudio( void )
-{
-
-        if(!audio_st) return 0;
-
-	double f;
-	uint64_t dts=_lastAudioDts;  // Last audio dts
-
-
-		aprintf("Need audio  ?: %llu / %llu : %llu\n ",dts,_curDTS,_curDTS+one);
-		if((dts+5000>=_curDTS) && (dts<=_curDTS+one)) return 1;
-		if(dts<=_curDTS)
-		{
-			printf("LavMuxer:Audio DTS is too low %llu / %llu!\n",dts,_curDTS);
-			return 1;
-		}
-		return 0;
-}
-//___________________________________________________________________________
-uint8_t lavMuxer::writeVideoPacket(ADMBitstream *bitstream)
-{
-int ret;
-
-double p,d;
-  	AVPacket pkt;
-            av_init_packet(&pkt);
-
-        p=bitstream->ptsFrame+1;      // Pts           // Time p/fps1000=out/den  out=p*den*1000/fps1000
-        p=(p*1000*1000*1000);
-        p=p/_fps1000;                  // in us
-
-        d=bitstream->dtsFrame;		// dts
-	d=(d*1000*1000*1000);
-	d=d/_fps1000;
-
-
-	_curDTS=(int64_t)floor(d);
-    aprintf("Adm video unscaled dts=:%u\n",(uint32_t)d);
-        // Rescale
-#define RESCALE(x) x=x*1000.;\
-                   x=x/_fps1000;
-
-        p=bitstream->ptsFrame+1;
-        RESCALE(p);
-// MP4/ TS
-        d=bitstream->dtsFrame;  // p & d are now in seconds
-        RESCALE(d);
-        switch(_type)  // video_st->codec->time_base.den
-        {
-        case MUXER_FLV :
-        case MUXER_MATROSKA:
-                    {
-                        p=p*1000;
-                        d=d*1000; // in milliseconds
-                        break;
-                    }
-        
-        default:
-                    p=p*video_st->codec->time_base.den;
-                    d=d*video_st->codec->time_base.den;
-                    break;
-        }
-    	pkt.dts=(int64_t)floor(d);
-    	pkt.pts=(int64_t)floor(p);
-
-       // printf("Lavformat : Pts :%u dts:%u",displayframe,frameno);
-	aprintf("Lavformat : Pts :%llu dts:%llu",pkt.pts,pkt.dts);
-	pkt.stream_index=0;
-
-        pkt.data= bitstream->data;
-        pkt.size= bitstream->len;
-	// Look if it is a gop start or seq start
-        if(_type==MUXER_MP4 || _type==MUXER_PSP || _type==MUXER_FLV || _type==MUXER_MATROSKA)
-        {
-            if(bitstream->flags & AVI_KEY_FRAME)
-                        pkt.flags |= PKT_FLAG_KEY;
-        }else
-            if(!bitstream->data[0] &&  !bitstream->data[1] && bitstream->data[2]==1)
-	{
-            if(bitstream->data[3]==0xb3 || bitstream->data[3]==0xb8 ) // Seq start or gop start
-		pkt.flags |= PKT_FLAG_KEY;
-		//printf("Intra\n");
-	}
-    //printf("Adm video dts=:%u\n",pkt.dts);
-	ret =av_write_frame(oc, &pkt);
-	if(ret)
-	{
-		printf("[LavFormat]Error writing video packet\n");
-		return 0;
-	}
-        aprintf("V: frame %lu pts%d\n",bitstream->dtsFrame,pkt.pts);
-
-	return 1;
-}
-//___________________________________________________________________________
-uint8_t lavMuxer::forceRestamp(void)
-{
-	return 1;
-}
-//___________________________________________________________________________
-uint8_t lavMuxer::close( void )
-{
-	if(_running)
-	{
-		_running=0;
-		// Flush
-		// Cause deadlock :
-		av_write_trailer(oc);
-		url_fclose((oc->pb));
-
-	}
-	if(audio_st)
-	{
-		 av_free(audio_st);
-	}
-	if(video_st)
-	{
-		 av_free(video_st);
-	}
-	video_st=NULL;
-	audio_st=NULL;
-	if(oc)
-		av_free(oc);
-	oc=NULL;
-	return 1;
-}
-//___________________________________________________________________________
-uint8_t lavMuxer::audioEmpty( void)
-{
-	return 0;
-}
-extern "C"
-{
-     extern  int        mpegps_init(void );
-     extern  int        movenc_init(void );
-     extern  int        flvenc_init(void );
-     extern  int        matroskaenc_init(void );
-};
-extern URLProtocol file_protocol ;
-uint8_t lavformat_init(void)
-{
-                movenc_init();
-                flvenc_init();
-                matroskaenc_init();
-                register_protocol(&file_protocol);
-}
-extern "C"
-{
-/**
-    \fn ADM_useAlternateTagging
-    \brief returns 1 if using haali compatible tagging, 0 if normal. For mp3 in mp4ff.
-*/
-int ADM_useAlternateTagging(void)
-{
-  uint32_t v=1;
-  prefs->get(FEATURE_ALTERNATE_MP3_TAG,&v);
-  return v;
-}
-}
-
-typedef struct
-{
-  const char *name;
-  int    id;
-}lavFCC_t;
-
-lavFCC_t lavFCC[]=
-{
-  {"DIV3",CODEC_ID_MSMPEG4V3},
-  {"FLV1",CODEC_ID_FLV1},
-  {"MPEG",CODEC_ID_MPEG2VIDEO},
-  {"DUMMY",0Xffff}
-};
-/**
-    \fn ADM_4cc_to_lavcodec
-    \brief Convert avi fourcc to lavcodec id (video)
-
-*/
-uint8_t ADM_4cc_to_lavcodec(const char *fcc, CodecID *outlavid)
-{
-    uint32_t nb=sizeof( lavFCC)/sizeof(lavFCC_t);
-    nb--;
-    for(int i=0;i<nb;i++)
-    {
-      if(!strncmp(lavFCC[i].name,fcc,4))
-      {
-        *outlavid=(CodecID)lavFCC[i].id;
-        return 1;
-      }
-
-    }
-    return 0;
-
-}
-//*****************
-typedef struct
-{
-  uint32_t tag;
-  int    id;
-}lavWaveTag_t;
-
-lavWaveTag_t lavWaveTag[]=
-{
-  {WAV_AC3,CODEC_ID_AC3},
-  {WAV_OGG,CODEC_ID_VORBIS},
-  {WAV_AAC,CODEC_ID_AAC},
-  {0xdead,0Xffff} // DUMMY
-};
-/**
-    \fn ADM_WaveTag_to_lavcodec
-    \brief Convert ADM audio codec id to lavcodec id (video)
-
-*/
-uint8_t ADM_WaveTag_to_lavcodec(uint32_t tag, CodecID *outlavid)
-{
-    uint32_t nb=sizeof( lavWaveTag)/sizeof(lavWaveTag_t);
-    nb--;
-    for(int i=0;i<nb;i++)
-    {
-      if(lavWaveTag[i].tag==tag)
-      {
-        *outlavid=(CodecID)lavWaveTag[i].id;
-        return 1;
-      }
-
-    }
-    return 0;
-
-}
-
-//___________________________________________________________________________
-//EOF
-
-

Deleted: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/ADM_lavformat.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/ADM_lavformat.h	2009-07-23 18:18:44 UTC (rev 5131)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/ADM_lavformat.h	2009-07-23 18:18:46 UTC (rev 5132)
@@ -1,168 +0,0 @@
-//
-// C++ Interface: ADM_lavformat
-//
-// Description: 
-//
-//	iface to libavformat	
-//
-//
-// Author: mean <fixounet at free.fr>, (C) 2004
-//
-// Copyright: See COPYING file that comes with this distribution
-//
-//
-#ifndef ADM_LAVFORMAT_H
-#define ADM_LAVFORMAT_H
-#include "ADM_bitstream.h"
-typedef enum
-{
-        MUXER_NONE=0,
-        MUXER_DVD,
-		MUXER_VCD,
-		MUXER_SVCD,
-        MUXER_TS,
-        MUXER_MP4,
-        MUXER_PSP,
-        MUXER_FLV,
-        MUXER_MATROSKA,
-        MUXER_DUMMY
-}ADM_MUXER_TYPE;
-
-/*
-class ADMMpegMuxer
-{
-protected:
-                uint32_t _frameNo;
-                uint32_t _fps1000;
-                uint32_t _audioByterate;
-                uint32_t _audioFq;
-                uint32_t _total; // deprecated, only for muxts
-                uint64_t _lastAudioDts;
-                uint32_t _running;
-                ADM_MUXER_TYPE _type;
-                uint8_t  _restamp;
-                ADM_MUXER_TYPE _muxerType;
-
-public:
-        virtual uint8_t open(const char *filename,uint32_t inbitrate, ADM_MUXER_TYPE type, 
-                                aviInfo *info, WAVHeader *audioheader)=0;
-        virtual uint8_t writeAudioPacket(uint32_t len, uint8_t *buf)=0;
-        virtual uint8_t writeVideoPacket(ADMBitstream *bitstream )=0;
-        virtual uint8_t forceRestamp(void)=0;
-        virtual uint8_t close( void )=0;
-        virtual uint8_t audioEmpty( void)=0;
-        virtual uint8_t needAudio(void)=0;
-        virtual uint8_t audioEof(void) {return 1;}
-
-                ADMMpegMuxer(void) {};
-                virtual ~ADMMpegMuxer(void) {};
-
-};
-class lavMuxer : public ADMMpegMuxer
-{
-private:
-                uint64_t  sample2time_us( uint32_t sample );
-		
-
-public:
-		lavMuxer(void );
-		~lavMuxer(  );
-	virtual uint8_t open(const char *filename,uint32_t inbitrate, ADM_MUXER_TYPE type, aviInfo *info, WAVHeader *audioheader);
-        virtual uint8_t open(const char *filename,uint32_t inbitrate, ADM_MUXER_TYPE type, aviInfo *info,uint32_t videoExtraDataSize,
-                        uint8_t *videoExtraData, WAVHeader *audioheader,uint32_t audioextraSize,uint8_t *audioextraData);
-        
-        virtual uint8_t writeAudioPacket(uint32_t len, uint8_t *buf,uint32_t sample);
-        virtual uint8_t writeAudioPacket(uint32_t len, uint8_t *buf) { ADM_assert(0);return 1;}
-        virtual uint8_t writeVideoPacket(ADMBitstream *bitstream );
-        virtual uint8_t forceRestamp(void);
-        virtual uint8_t close( void );
-        virtual uint8_t audioEmpty( void);
-        virtual uint8_t needAudio(void);
-
-	
-
-};
-
-class mplexMuxer : public ADMMpegMuxer
-{
-protected:
-               
-public:
-                mplexMuxer(void );
-                ~mplexMuxer(  );
-        virtual uint8_t open(const char *filename,uint32_t inbitrate, ADM_MUXER_TYPE type, aviInfo *info, WAVHeader *audioheader);
-        virtual uint8_t writeVideoPacket(ADMBitstream *bitstream );
-        virtual uint8_t writeAudioPacket(uint32_t len, uint8_t *buf);
-        virtual uint8_t forceRestamp(void);
-        virtual uint8_t close( void );
-        virtual uint8_t audioEmpty( void);
-        virtual uint8_t needAudio(void);
-        virtual uint8_t audioEof(void);
-        virtual uint8_t videoEof(void);
-
-};*/
-#define TS_PACKET_SIZE 188
-
-typedef struct
-{
-    uint64_t pts;
-    uint8_t  packet[TS_PACKET_SIZE];
-}entryPacket;
-
-typedef struct
-{
-    uint32_t pid;
-    uint32_t counter;
-    uint32_t tableId;
-    uint32_t sectionId;
-}channel;
-/*
-class tsMuxer : public ADMMpegMuxer
-{
-protected:
-        uint32_t    audioPacket;
-        entryPacket *packetPipe;
-        uint32_t    packetHead,packetTail;
-        FILE        *outFile;     
-        uint32_t    audioPid,videoPid;
-        uint32_t    _curPTS;
-        uint32_t    nbPacket;
-        uint32_t    packetSincePAT;
-        uint64_t    lastPCR;
-        uint8_t     *audioBuffer;
-        uint32_t    audioFill;
-        uint8_t     *pesBuffer;
-        
-        entryPacket *getPacket( void);   
-        uint8_t     writeSection( uint32_t pid,channel *chan, 
-                                uint8_t *data, uint32_t len) ;
-        uint8_t     writePmt( void); 
-        uint8_t     writePat( void);                       
-        uint8_t     writePacket(uint8_t *data, uint32_t len, uint64_t pcr,channel *chan,uint8_t start);
-        uint8_t     writePacketPad(uint8_t *data, uint32_t len, uint64_t pcr,channel *chan,uint8_t start);
-        uint64_t    audioTime( uint32_t time)   ;            // Time is us
-        uint64_t    videoTime( uint32_t frameno);   // Time in us                    
-        uint8_t     flushPackets(uint8_t r);
-        uint8_t     writeAudioPacket2(void);
-        uint8_t     pes2ts(channel *chan,uint64_t pcr,uint8_t tim );
-        uint8_t     writeVideoPacket2(uint32_t len, uint8_t *buf,uint32_t frameno,uint32_t displayframe );
-        channel     audioChannel,videoChannel,pmt,pat;
-        aviInfo     _info;
-        WAVHeader   _wavHeader;
-             
-public:
-                tsMuxer(void );
-                ~tsMuxer(  );
-        virtual uint8_t open(const char *filename,uint32_t inbitrate, ADM_MUXER_TYPE type, aviInfo *info, WAVHeader *audioheader);
-        virtual uint8_t writeVideoPacket(ADMBitstream *bitstream );
-        virtual uint8_t writeAudioPacket(uint32_t len, uint8_t *buf);
-        virtual uint8_t forceRestamp(void);
-        virtual uint8_t close( void );
-        virtual uint8_t audioEmpty( void);
-        virtual uint8_t needAudio(void);
-
-};
-*/
-#endif
-//EOF
-

Deleted: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/ADM_muxts.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/ADM_muxts.cpp	2009-07-23 18:18:44 UTC (rev 5131)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/ADM_muxts.cpp	2009-07-23 18:18:46 UTC (rev 5132)
@@ -1,708 +0,0 @@
-//
-// C++ Implementation: ADM_lavformat
-//
-// Description: 
-//
-//
-// Author: mean <fixounet at free.fr>, (C) 2004
-//
-// Copyright: See COPYING file that comes with this distribution
-//
-//
-/***************************************************************************
- *                                                                         *
- *   This program is free software; you can redistribute it and/or modify  *
- *   it under the terms of the GNU General Public License as published by  *
- *   the Free Software Foundation; either version 2 of the License, or     *
- *   (at your option) any later version.                                   *
- *                                                                         *
- ***************************************************************************/
-
-#include "config.h"
-
-#include <stdio.h>
-#include <stdlib.h>
-#include <math.h>
-#include <string.h>
-
-
-#include "ADM_assert.h"
-
-#include "ADM_default.h"
-
-
-#include "ADM_audiofilter/audioprocess.hxx"
-#include "ADM_audio/ADM_a52info.h"
-
-#include "ADM_codecs/ADM_codec.h"
-#include "ADM_editor/ADM_Video.h"
-
-#include "ADM_lavformat.h"
-
-
-#include "ADM_osSupport/ADM_debugID.h"
-#define MODULE_NAME MODULE_LAVFORMAT
-#include "ADM_osSupport/ADM_debug.h"
-#include "ADM_tscrc.h"
-
-
-#define TS_NB_PACKET   1000
-
-#define PAT_PID         0
-#define PMT_PID         0x42
-#define AUDIO_PID       0x45
-#define VIDEO_PID       0x44
-
-#define TS_HEADER_LEN 4
-
-#define TS_UNIT_START        0x40
-#define TS_UNIT_PAYLOAD_ONLY 0x10
-#define TS_UNIT_PAYLOAD_AF   0x30
-// 33 bits 
-#define TS_PCR_MASK             0x0000003FFFFFFFFFLL
-#define TS_NO_PCR               0xFF00000000000000LL
-#define TS_PAT_EVERY_PACKET     256
-#define TS_MUX_RATE             10000000        // 10 Mbs
-
-#define AUDIO_BUFFER            1024*10
-#define PES_BUFFER              1024            // Just to build packet into
-#define STUFFING_PATTERN        0
-#define MUX_EVERY_N_AUDIO_FRAMES 5
-static uint8_t writePts(uint8_t *data,uint64_t ipts,uint32_t flags);
-// /* ------------------------------------------------------------------------*/write
-tsMuxer::tsMuxer( void)
-{
-    packetPipe=new entryPacket[TS_NB_PACKET];
-    memset(packetPipe,0,sizeof(entryPacket)*TS_NB_PACKET);
-    packetHead=packetTail=0;
-    
-    audioChannel.pid=AUDIO_PID;
-    audioChannel.counter=0;
-    
-    videoChannel.pid=VIDEO_PID;
-    videoChannel.counter=0;
-    
-    pat.pid=PAT_PID;
-    pat.counter=0;
-    pat.tableId=0;
-    pat.sectionId=0;
-    
-    pmt.pid=PMT_PID;
-    pmt.counter=0;
-    pmt.tableId=2;
-    pmt.sectionId=1;
-    
-    _total=0;
-    _curPTS=0;
-    
-    packetSincePAT=0;
-    nbPacket=0;
-    lastPCR=0;
-    audioFill=0;
-    audioBuffer=new uint8_t[AUDIO_BUFFER];
-    pesBuffer=new uint8_t [PES_BUFFER];
-    audioPacket=0;
-}
-tsMuxer::~tsMuxer( )
-{
-   if(packetPipe)
-    delete [] packetPipe;
-   packetPipe=NULL;
-   if(audioBuffer)
-        delete [] audioBuffer;
-   audioBuffer=NULL;
-   if(pesBuffer)
-        delete [] pesBuffer;
-   pesBuffer=NULL;
-
-}
-//
-// Flush out of data packets
-// update pcr on the fly with non stupid value
-//
-uint8_t tsMuxer::flushPackets(uint8_t really)
-{
-double dpcr;    // delta PCR
-uint64_t pcr,packetpcr;
-entryPacket *entry;
-        
-        dpcr=TS_PACKET_SIZE*8;
-        dpcr/=TS_MUX_RATE;      
-        dpcr=dpcr*1000*1000;        // duration of a packet in us
-        pcr=(uint64_t )dpcr;
-        while(1)
-        {
-            if(packetHead==packetTail) break; // no more packet to handle
-            entry=&(packetPipe[packetHead]);
-#if 0            
-            if(entry->pts!=TS_NO_PCR)
-            {
-                if(entry->pts>=_curPTS) _curPTS=entry->pts;
-                    else
-                {
-                    // need to update
-                    uint32_t i=4;
-                    uint64_t fixed;
-                    uint8_t *pkt=entry->packet;
-                    
-                    fixed=_curPTS;
-                     //mask to avoid overflow
-                    fixed=(fixed*90)/1000;
-                    fixed=fixed&0x1FFFFFFFFLL; // 33 Bits
-                    pkt[i++]=7;
-                    pkt[i++]=0x10; // AF flags       
-                    pkt[i++]=(fixed>>25)&0xff; // FF
-                    pkt[i++]=(fixed>>17)&0xff; // FF
-                    pkt[i++]=(fixed>>9)&0xff; // FF
-                    pkt[i++]=(fixed>>1)&0xff; // FF
-                    pkt[i++]=(fixed<<7)&0x80; // &0x80
-                    pkt[i++]=0x00;
-                }
-            }
-#endif            
-           // _curPTS+=pcr;
-            fwrite(entry->packet,TS_PACKET_SIZE,1,outFile);
-            packetHead++;
-            packetHead%=TS_NB_PACKET;
-        }
-        return 1;
-}
-/*
-sync_byte 8 bslbf 
-transport_error_indicator 1 bslbf       1: Error present
-payload_unit_start_indicator 1 bslbf    If 1 a unit start in this packet, there is an offset later
-transport_priority 1 bslbf              x
-PID 13 uimsbf 
-transport_scrambling_control 2 bslbf  00 not scrambled
-adaptation_field_control 2 bslbf      00 01:Payload only 10:adap only 11: payload + adap
-continuity_counter 4 uimsbf 
-if(adaptation_field_control=='10' || adaptation_field_control=='11
-'){ adaptation_field() }
-if(adaptation_field_control=='01' || adaptation_field_control=='11') 
-{ for (i=0;i<N;i++){ data_byte 8 bslbf } } } bslbf Bit string, 
-
-pcr is pts in us
-*/
-uint8_t     tsMuxer::writePacket(uint8_t *data, uint32_t len, uint64_t pcr,channel *chan,uint8_t start)
-{
-
-uint32_t i=0,val=0,fill=0,fre;
-entryPacket *paket;
-uint8_t *pkt;
-
-    if(start)
-      if(((packetTail+TS_NB_PACKET-packetHead)%TS_NB_PACKET)>TS_NB_PACKET/4)
-      {  
-            flushPackets(0);    
-      }
-     
-    //ADM_assert(len<TS_PACKET_SIZE-3);
-    if(!packetSincePAT)
-    {
-        packetSincePAT++;
-        writePat();
-        writePmt();
-    }
-    else
-        packetSincePAT++;
-    packetSincePAT%=TS_PAT_EVERY_PACKET;
-    
-    //
-    paket=getPacket();
-    paket->pts=pcr;
-    pkt=paket->packet;
-
-    // Here we go
-
-        // Will we fill the packet
-        fre=TS_PACKET_SIZE-TS_HEADER_LEN;
-        if(start)       fre--;  // offset
-        if(pcr!=TS_NO_PCR) fre-=8;
-        if(len<fre) // We won't fill the packet
-        {
-                fill=fre-len;
-        }
-
-    pkt[i++]=0x47;
-    if(start) val=TS_UNIT_START; // Start ?
-            else val=0;
-    pkt[i++]=val+((chan->pid)>>8);
-    pkt[i++]=(chan->pid)&0xff;
-   
-    if(pcr!=TS_NO_PCR || fill)
-        val=TS_UNIT_PAYLOAD_AF;     // if me put a pcr, we need to say there is
-                                    // an adaption field
-    else
-        val=TS_UNIT_PAYLOAD_ONLY;
-    pkt[i++]=val+(chan->counter&0xf);  // Payload only
-    chan->counter++;
-    if(pcr!=TS_NO_PCR || fill)
-    {
-        if(pcr!=TS_NO_PCR)
-        {
-        
-                pcr=(pcr*90)/1000;
-                pcr=pcr&0x1FFFFFFFFLL; //mask to avoid overflow
-                pkt[i++]=7+fill;
-                pkt[i++]=0x10; // AF flags
-        
-                pkt[i++]=(pcr>>25)&0xff; // FF
-                pkt[i++]=(pcr>>17)&0xff; // FF
-                pkt[i++]=(pcr>>9)&0xff; // FF
-                pkt[i++]=(pcr>>1)&0xff; // FF
-                pkt[i++]=(pcr<<7)&0x80; // &0x80
-                pkt[i++]=0x00;
-                if(fill)
-                {
-                        memset(pkt+i,0xff,fill);        
-                        i+=fill;
-                }
-        }
-        else
-        {
-                pkt[i++]=fill-1;
-                switch(fill)
-                {
-                        case 1: break;
-                        case 2: pkt[i++]=0;
-                                break;
-                        default:
-                                pkt[i++]=0;
-                                memset(pkt+i,0xff,fill-2);   
-                                i+=fill-2;
-                                break;
-                }
-        }
-     }
-
-    
-    if(start) pkt[i++]=0; // pointer field
-    uint32_t left=TS_PACKET_SIZE-i;
-    ADM_assert(len>=left);
-    memcpy(pkt+i,data,left);
-    return left;
-}
-
-uint32_t mpegTsCRC(uint8_t *data, uint32_t len)
-{
-    int i;
-    uint32_t crc = 0xffffffff;
-    
-    for (i=0; i<len; i++)
-        crc = (crc << 8) ^ crc_table[((crc >> 24) ^ *data++) & 0xff];
-    
-    return crc;
-}
-/*****************************/
-entryPacket *tsMuxer::getPacket( void)
-{
- 
- entryPacket *r=&packetPipe[packetTail++];
- packetTail%=TS_NB_PACKET;
- ADM_assert(packetTail!=packetHead);
- return r;   
-}
-
-uint8_t tsMuxer::open(const char *filename,uint32_t inbitrate, ADM_MUXER_TYPE type, aviInfo *info, WAVHeader *audioheader)
-{
-    ADM_assert(type==MUXER_TS);
-    outFile=fopen(filename,"wb");
-    if(!outFile)
-    {
-        printf("TS:Cannot open for write\n");
-        return 0; 
-    }
-    memcpy(&_info,info,sizeof(_info));
-    memcpy(&_wavHeader,audioheader,sizeof(_wavHeader));
-    
-    return 1;
-}
-uint8_t tsMuxer::close( void)
-{
-    flushPackets(1);    
-    if(outFile) fclose(outFile);
-    outFile=NULL;
-    return 1;
-}
-uint8_t tsMuxer::forceRestamp(void)
-{
-    return 1;
-}
-uint8_t tsMuxer::audioEmpty( void)
-{
-    return 0;
-}
-uint8_t tsMuxer::needAudio(void)
-{
-	
-    double f;
-    uint64_t pts;
-    // all computation is in us
-    uint32_t one=(1000*1000*1000)/_info.fps1000;
-    
-            pts=audioTime(audioFill);
-            aprintf("Need audio  ?: %llu / %llu : %llu\n ",pts,_curPTS,_curPTS+one);
-            if((pts>=_curPTS) && (pts<=_curPTS+one)) return 1;
-            if(pts<=_curPTS)
-            {
-                    printf("tsMuxer:Audio DTS is too low %llu / %llu!\n",pts,_curPTS);
-                    return 1;
-            }
-            return 0;
-}
-/*
-    Write the program Access Table
-    In our case it is pretty simple as we have one video and one audio
-    in one PMT
-    We assume it fits in one TS packet
-
-    8 :Table id
-    1 :Section syntax indicator (1 for PAT)
-    1: 0
-    2: 11
-    12: length
-    16: Transport ID
-    2 : 11
-    5: Version number
-    1: current next indicator
-    8 : : section number
-    8:last section number
-        8: Program number
-        3: 111
-        13: Nit pid
-    32 : CRC    
-*/
-uint8_t tsMuxer::writeSection( uint32_t pid,channel *chan, 
-                                uint8_t *data, uint32_t len)
-{
-    uint8_t packet[1024];
-    uint32_t i=0,sectionLen=0,crc;
-    
-    sectionLen=len+4+5; // Includes header & crc
-    
-    packet[i++]=chan->tableId;
-    packet[i++]=0xb0+(sectionLen>>8);
-    packet[i++]=0x00+(sectionLen&0xff);
-    packet[i++]=chan->sectionId>>8;     // For PMT: Program number
-    packet[i++]=chan->sectionId&0xff;
-    packet[i++]=0xc1;   // Table is applicable
-    packet[i++]=0;      // section  number
-    packet[i++]=0;      // last section number
-    
-    memcpy(packet+i,data,len);
-    i+=len;
-    //ADM_assert(len<TS_PACKET_SIZE-3);
-    // and CRC
-    crc= mpegTsCRC(packet,i);
-    packet[i++]=(crc>>24)&0xff;
-    packet[i++]=(crc>>16)&0xff;
-    packet[i++]=(crc>>8)&0xff;
-    packet[i++]=(crc    )&0xff;
-   
-  //  writePacket(packet,i,NO_PCR);
-    writePacket(packet, i, TS_NO_PCR,chan,1);
-    return 1;
-}
-uint8_t tsMuxer::writePat( void)
-{
-uint8_t data[1024];
-uint32_t i=0,sid=1;
-
-        sid=pmt.sectionId;
-        data[i++]=sid>>8;                
-        data[i++]=sid&0xff;                        
-        data[i++]=0xe0+((pmt.pid)>>8);                
-        data[i++]=(pmt.pid)&0xff;    
-        return writeSection(pat.pid,&pat,data,4);                    
-                                
-}   
-uint8_t tsMuxer::writePmt( void)
-{
-uint8_t data[1024];
-uint32_t i=0,sid=1;
-
-        data[i++]=0xE0+(videoChannel.pid>>8);  // PCR pid locked on audio             
-        data[i++]=videoChannel.pid&0xff;       //                 
-        data[i++]=0xf0;  // info length              
-        data[i++]=0;  // info length   
-        //-- Video --
-        data[i++]=0x02; // Mpeg2 video
-        data[i++]=0xE0+(videoChannel.pid>>8); // pid
-        data[i++]=(videoChannel.pid&0xff); 
-        data[i++]=0xF0; // no descriptor
-        data[i++]=3;    // Stream descriptor
-        data[i++]=0x52;    
-        data[i++]=1;    
-        data[i++]=1;    
-        //-- Audio --
-        if(_wavHeader.encoding==WAV_AC3)
-            data[i++]=0x81; // ac3
-        else
-            data[i++]=0x03; // Mpeg2 audio
-        data[i++]=0xE0+(audioChannel.pid>>8); // pid
-        data[i++]=(audioChannel.pid&0xff); 
-        data[i++]=0xF0; // no descriptor
-        data[i++]=3+6;    // Stream descriptor
-        data[i++]=0x52;    
-        data[i++]=1;    
-        data[i++]=2;    
-        data[i++]=0x0a; // Language    
-        data[i++]=4;    
-        data[i++]='e';    
-        data[i++]='n';    
-        data[i++]='g';    
-        data[i++]=0x02;     // Hearing impaired ?
-        
-        
-/*        data[2]=0xF0+((i-4)>>8);
-        data[3]=((i-4)&0xff);
-*/        
-        return writeSection(pmt.pid,&pmt,data,i);                          
-                                
-} 
-uint8_t tsMuxer::pes2ts(channel *chan,uint64_t pcr,uint8_t tim )
-{
-        uint32_t part=0,l;
-        uint32_t out=PES_BUFFER;
-        uint8_t *data=pesBuffer;
-        while(out)
-        {
-                if(!part && tim)
-                {
-                        l=writePacket(data,out,pcr,chan,1);
-                }
-                else
-                        l=writePacket(data,out,TS_NO_PCR,chan,0);
-                out-=l;
-                data+=l;
-                part++;
-        }
-        return 1;
-}
-uint8_t tsMuxer::writeVideoPacket(ADMBitstream *bitstream )
-{
-#define MAX_PES 64000
-uint32_t l,len;
-uint8_t *buf;
-
-       //writeAudioPacket2();
-       _curPTS=videoTime(bitstream->dtsFrame); 
-       len=bitstream->len;
-       buf=bitstream->data;
-       while(len)
-       {
-                if(len>MAX_PES)
-                        l=MAX_PES;
-                else
-                    l=len;
-                if(!writeVideoPacket2(l,buf, bitstream->dtsFrame, bitstream->ptsFrame ))
-                {
-                    return 0;    
-                }
-                len-=l;
-                buf+=l;
-        }
-        return 1;
-
-}                                  
-uint8_t tsMuxer::writeVideoPacket2(uint32_t len, uint8_t *buf,uint32_t frameno,uint32_t displayframe )
-{
-    
-    uint8_t  *data;
-    uint32_t pes_len;
-    uint64_t its;
-    double d;
-    uint32_t left,part=1;
-    
-//#define IGNORE_PTS
-        
-#ifdef IGNORE_PTS
-        displayframe=frameno+1;
-#endif    
-
-    // First packet    
-    while(len)
-    {
-            
-            // we build header & pts separately
-            //
-            uint32_t i=0,left;
-            data=pesBuffer;
-            if(part)
-            {
-            
-                //data[i++]=0x00;
-                data[i++]=0x00;
-                data[i++]=0x01;
-                data[i++]=0xe0;   // video id
-                pes_len=len+3+10;  // PES header
-                data[i++]=pes_len>>8;
-                data[i++]=pes_len & 0xff;
-                data[i++]=0x80; // mpeg2
-           
-                data[i++]=0x80+0x40; // PTS + dts
-                data[i++]=10;    // PTS LEN
-            
-                // pts
-                
-                its=videoTime(displayframe);
-                writePts(data+i,its,3);
-                data[i]|=0x10;
-                i+=5;
-                // dts
-                its=videoTime(frameno);
-                writePts(data+i,its,1);
-                i+=5;                
-
-                left=TS_PACKET_SIZE-i;
-                if(left>len)
-                {
-                      left=len;
-
-                }
-                memcpy(data+i,buf,left);                      
-                left=writePacket(data, i+len, its,&videoChannel,1);
-                left=left-i;
-            }
-            else
-            {
-                left=writePacket(buf, len, TS_NO_PCR,&videoChannel,0);
-            }
-
-            buf+=left;
-            len-=left;                   
-            part=0;
-     }    
-    return 1;
-}
-/* Return time elapsed for video in us */
-uint64_t tsMuxer::videoTime( uint32_t frameno)
-{
-double d;
-uint64_t p;
-    d=frameno;		// dts
-    d=(d*1000*1000*1000);
-    d=d/_info.fps1000; // in usec
-    
-    p= (uint64_t)floor(d);
-   
-    return p;
-}    
-/* Return time elapsed for audio in us */
-uint64_t tsMuxer::audioTime( uint32_t fill)
-{
-double f;
-uint64_t d;
-    f=_total+fill;
-     f*=1000.*1000.;  // in us
-     f/=(_wavHeader.byterate);   
-     d= (uint64_t)floor(f);
-     
-     return d;
-}
-uint8_t tsMuxer::writeAudioPacket(uint32_t len, uint8_t *buf)
-{
-        memcpy(audioBuffer+audioFill,buf,len);
-        audioFill+=len;
-        audioPacket++;
-        ADM_assert(audioFill<AUDIO_BUFFER);
-        if(audioPacket>=MUX_EVERY_N_AUDIO_FRAMES)
-        {
-                writeAudioPacket2();
-                audioPacket%=MUX_EVERY_N_AUDIO_FRAMES;
-        }
-        return 1;        
-}
-uint8_t tsMuxer::writeAudioPacket2(void)
-{
-    uint32_t part=1;
-    uint8_t  *data; // should be enough for one frame...    
-    uint64_t ipts;   
-    uint32_t left,pes_len;
-    uint8_t  *buf=audioBuffer;
-    uint32_t len=audioFill,org=audioFill;    
-    uint64_t its;
-
-    if(!audioFill) return 1; // nothing to do
-
-
-     while(len)
-    {
-            
-            // we build header & pts separately
-            //
-            uint32_t i=0,left;
-            data=pesBuffer;
-            if(part)
-            {
-            
-                //data[i++]=0x00;
-                data[i++]=0x00;
-                data[i++]=0x01;
-               // data[i++]=0xc0;   // video id
-                if(_wavHeader.encoding==WAV_AC3)
-                {
-                        data[i++]=0xbd;   // audio id
-                }
-                else
-                        data[i++]=0xc0;   // audio id
-
-                pes_len=len+3+5;  // PES header
-                data[i++]=pes_len>>8;
-                data[i++]=pes_len & 0xff;
-                data[i++]=0x80; // mpeg2            
-                data[i++]=0x80; // PTS 
-                data[i++]=5;    // PTS LEN
-            
-                // pts
-                its=audioTime(0);
-                writePts(data+i,its,2);
-                i+=5;                             
-            
-                left=TS_PACKET_SIZE-i;
-                if(left>len)
-                {
-                      left=len;
-
-                }
-                memcpy(data+i,buf,left);                      
-                left=writePacket(data, i+len, its,&audioChannel,1);
-                left=left-i;
-            }
-            else
-            {
-                left=writePacket(buf, len, TS_NO_PCR,&audioChannel,0);
-            }
-
-            buf+=left;
-            len-=left;                   
-            part=0;
-     }    
-   
-     audioFill=0;
-     _total+=org;
-     return 1;
-}
-/*
-    ipts is is us
-*/
-/*
-        flags : PTS only = 2 PTS+DTS=3 DTS=1
-
-*/
-uint8_t writePts(uint8_t *data,uint64_t ipts,uint32_t flags)
-{
-uint32_t i=0;
-uint64_t p;
-            ipts=ipts&0xfffffffffLL; // clip to 36 bits 33 bits *8 before clipping
-            ipts=(ipts*90)/1000;
-            
-            data[i++]=(flags << 4) | (((ipts >> 30) & 0x07) << 1) | 1;
-            p=(((ipts >> 15) & 0x7fff) << 1) | 1;
-            data[i++]=p>>8;
-            data[i++]=p&0xff;
-            p=(((ipts) & 0x7fff) << 1) | 1;
-            data[i++]=p>>8;
-            data[i++]=p&0xff;
-}
-// EOF

Deleted: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/ADM_tscrc.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/ADM_tscrc.h	2009-07-23 18:18:44 UTC (rev 5131)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/ADM_tscrc.h	2009-07-23 18:18:46 UTC (rev 5132)
@@ -1,45 +0,0 @@
-static const uint32_t crc_table[256] = {
-	0x00000000, 0x04c11db7, 0x09823b6e, 0x0d4326d9, 0x130476dc, 0x17c56b6b,
-	0x1a864db2, 0x1e475005, 0x2608edb8, 0x22c9f00f, 0x2f8ad6d6, 0x2b4bcb61,
-	0x350c9b64, 0x31cd86d3, 0x3c8ea00a, 0x384fbdbd, 0x4c11db70, 0x48d0c6c7,
-	0x4593e01e, 0x4152fda9, 0x5f15adac, 0x5bd4b01b, 0x569796c2, 0x52568b75,
-	0x6a1936c8, 0x6ed82b7f, 0x639b0da6, 0x675a1011, 0x791d4014, 0x7ddc5da3,
-	0x709f7b7a, 0x745e66cd, 0x9823b6e0, 0x9ce2ab57, 0x91a18d8e, 0x95609039,
-	0x8b27c03c, 0x8fe6dd8b, 0x82a5fb52, 0x8664e6e5, 0xbe2b5b58, 0xbaea46ef,
-	0xb7a96036, 0xb3687d81, 0xad2f2d84, 0xa9ee3033, 0xa4ad16ea, 0xa06c0b5d,
-	0xd4326d90, 0xd0f37027, 0xddb056fe, 0xd9714b49, 0xc7361b4c, 0xc3f706fb,
-	0xceb42022, 0xca753d95, 0xf23a8028, 0xf6fb9d9f, 0xfbb8bb46, 0xff79a6f1,
-	0xe13ef6f4, 0xe5ffeb43, 0xe8bccd9a, 0xec7dd02d, 0x34867077, 0x30476dc0,
-	0x3d044b19, 0x39c556ae, 0x278206ab, 0x23431b1c, 0x2e003dc5, 0x2ac12072,
-	0x128e9dcf, 0x164f8078, 0x1b0ca6a1, 0x1fcdbb16, 0x018aeb13, 0x054bf6a4,
-	0x0808d07d, 0x0cc9cdca, 0x7897ab07, 0x7c56b6b0, 0x71159069, 0x75d48dde,
-	0x6b93dddb, 0x6f52c06c, 0x6211e6b5, 0x66d0fb02, 0x5e9f46bf, 0x5a5e5b08,
-	0x571d7dd1, 0x53dc6066, 0x4d9b3063, 0x495a2dd4, 0x44190b0d, 0x40d816ba,
-	0xaca5c697, 0xa864db20, 0xa527fdf9, 0xa1e6e04e, 0xbfa1b04b, 0xbb60adfc,
-	0xb6238b25, 0xb2e29692, 0x8aad2b2f, 0x8e6c3698, 0x832f1041, 0x87ee0df6,
-	0x99a95df3, 0x9d684044, 0x902b669d, 0x94ea7b2a, 0xe0b41de7, 0xe4750050,
-	0xe9362689, 0xedf73b3e, 0xf3b06b3b, 0xf771768c, 0xfa325055, 0xfef34de2,
-	0xc6bcf05f, 0xc27dede8, 0xcf3ecb31, 0xcbffd686, 0xd5b88683, 0xd1799b34,
-	0xdc3abded, 0xd8fba05a, 0x690ce0ee, 0x6dcdfd59, 0x608edb80, 0x644fc637,
-	0x7a089632, 0x7ec98b85, 0x738aad5c, 0x774bb0eb, 0x4f040d56, 0x4bc510e1,
-	0x46863638, 0x42472b8f, 0x5c007b8a, 0x58c1663d, 0x558240e4, 0x51435d53,
-	0x251d3b9e, 0x21dc2629, 0x2c9f00f0, 0x285e1d47, 0x36194d42, 0x32d850f5,
-	0x3f9b762c, 0x3b5a6b9b, 0x0315d626, 0x07d4cb91, 0x0a97ed48, 0x0e56f0ff,
-	0x1011a0fa, 0x14d0bd4d, 0x19939b94, 0x1d528623, 0xf12f560e, 0xf5ee4bb9,
-	0xf8ad6d60, 0xfc6c70d7, 0xe22b20d2, 0xe6ea3d65, 0xeba91bbc, 0xef68060b,
-	0xd727bbb6, 0xd3e6a601, 0xdea580d8, 0xda649d6f, 0xc423cd6a, 0xc0e2d0dd,
-	0xcda1f604, 0xc960ebb3, 0xbd3e8d7e, 0xb9ff90c9, 0xb4bcb610, 0xb07daba7,
-	0xae3afba2, 0xaafbe615, 0xa7b8c0cc, 0xa379dd7b, 0x9b3660c6, 0x9ff77d71,
-	0x92b45ba8, 0x9675461f, 0x8832161a, 0x8cf30bad, 0x81b02d74, 0x857130c3,
-	0x5d8a9099, 0x594b8d2e, 0x5408abf7, 0x50c9b640, 0x4e8ee645, 0x4a4ffbf2,
-	0x470cdd2b, 0x43cdc09c, 0x7b827d21, 0x7f436096, 0x7200464f, 0x76c15bf8,
-	0x68860bfd, 0x6c47164a, 0x61043093, 0x65c52d24, 0x119b4be9, 0x155a565e,
-	0x18197087, 0x1cd86d30, 0x029f3d35, 0x065e2082, 0x0b1d065b, 0x0fdc1bec,
-	0x3793a651, 0x3352bbe6, 0x3e119d3f, 0x3ad08088, 0x2497d08d, 0x2056cd3a,
-	0x2d15ebe3, 0x29d4f654, 0xc5a92679, 0xc1683bce, 0xcc2b1d17, 0xc8ea00a0,
-	0xd6ad50a5, 0xd26c4d12, 0xdf2f6bcb, 0xdbee767c, 0xe3a1cbc1, 0xe760d676,
-	0xea23f0af, 0xeee2ed18, 0xf0a5bd1d, 0xf464a0aa, 0xf9278673, 0xfde69bc4,
-	0x89b8fd09, 0x8d79e0be, 0x803ac667, 0x84fbdbd0, 0x9abc8bd5, 0x9e7d9662,
-	0x933eb0bb, 0x97ffad0c, 0xafb010b1, 0xab710d06, 0xa6322bdf, 0xa2f33668,
-	0xbcb4666d, 0xb8757bda, 0xb5365d03, 0xb1f740b4
-};

Deleted: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/oplug_dummy/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/oplug_dummy/CMakeLists.txt	2009-07-23 18:18:44 UTC (rev 5131)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/oplug_dummy/CMakeLists.txt	2009-07-23 18:18:46 UTC (rev 5132)
@@ -1,3 +0,0 @@
-SET(ADM_oplug_dummy_SRCS oplug_dummy.cpp)
-
-ADD_ADM_LIB_ALL_TARGETS(oplug_dummy ${ADM_oplug_dummy_SRCS})
\ No newline at end of file

Deleted: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/oplug_dummy/oplug_dummy.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/oplug_dummy/oplug_dummy.cpp	2009-07-23 18:18:44 UTC (rev 5131)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/oplug_dummy/oplug_dummy.cpp	2009-07-23 18:18:46 UTC (rev 5132)
@@ -1,240 +0,0 @@
-/***************************************************************************
-                          oplug_dummy.cpp  -  Container that discards all inputs
-                          						Video only!
-                             -------------------
-    
-    copyright            : (C) 2007 by mean
-    email                : fixounet at free.fr
-        
- ***************************************************************************/
-
-/***************************************************************************
- *                                                                         *
- *   This program is free software; you can redistribute it and/or modify  *
- *   it under the terms of the GNU General Public License as published by  *
- *   the Free Software Foundation; either version 2 of the License, or     *
- *   (at your option) any later version.                                   *
- *                                                                         *
- ***************************************************************************/
-
-#include <math.h>
-
-#include "config.h"
-#include "ADM_default.h"
-#include "ADM_threads.h"
-
-extern "C" {
-#include "ADM_lavcodec.h"
-};
-
-#include "ADM_editor/ADM_Video.h"
-//#include "ADM_colorspace/colorspace.h"
-#include "DIA_coreToolkit.h"
-#include "ADM_videoFilter.h"
-#include "ADM_videoFilter_internal.h"
-
-#include "ADM_encoder/ADM_vidEncode.hxx"
-#include "ADM_codecs/ADM_codec.h"
-#include "ADM_encoder/adm_encoder.h"
-
-#include "ADM_codecs/ADM_ffmpeg.h"
-#include "ADM_encoder/adm_encffmpeg.h"
-#include "../oplug_mpegFF/oplug_vcdff.h"
-
-#include "ADM_userInterfaces/ADM_commonUI/DIA_encoding.h"
-#include "audioprocess.hxx"
-#include "audioeng_buildfilters.h"
-#include "../ADM_lavformat.h"
-#include "fourcc.h"
-#include "ADM_encoder/adm_encConfig.h"
-#include "ADM_encoder/ADM_vidEncode.hxx"
-#include "ADM_libraries/ADM_mplex/ADM_mthread.h"
-#include "ADM_toolkit/ADM_audioQueue.h"
-
-#include "ADM_osSupport/ADM_debugID.h"
-#define MODULE_NAME MODULE_MP4
-#include "ADM_osSupport/ADM_debug.h"
-
-
-extern void   	 				UI_purge(void );
-
-extern uint32_t					videoProcessMode (void);
-extern uint32_t 				frameStart,frameEnd;
-
-
-
-static 				uint8_t *_buffer=NULL,*_outbuffer=NULL;
-
-/*
- * 		\fn    Oplug_dummy
-		\brief Main function to save in dummy format. 
-		This containers drops all datas. Useful for testing or some weird filters
-
-*/
-uint8_t oplug_dummy(const char *name)
-{
-AVDMGenericVideoStream *_incoming=NULL;
-AVDMGenericAudioStream  *audio=NULL;
-
-uint8_t		audioBuffer[48000];
-uint8_t         *videoBuffer=NULL;
-
-uint32_t alen;//,flags;
-uint32_t size;
-
-uint8_t   ret=0;
-
-uint32_t  sample_got=0,sample;
-uint32_t  extraDataSize=0;
-uint8_t   *extraData=NULL;
-aviInfo      info;
-uint32_t   width,height;
-DIA_encoding *encoding_gui=NULL;
-Encoder         *_encode=NULL;
-uint32_t total=0;
-uint32_t videoExtraDataSize=0;
-uint8_t  *videoExtraData=NULL;
-uint8_t *dummy,err;
-int prefill=0;
-uint32_t displayFrame=0;
-ADMBitstream    bitstream(0);
-uint32_t        frameWrite=0;
-uint8_t r=0;
-uint32_t skipping=1;
-
-uint32_t    totalAudioSize=0;
-uint32_t sent=0;
-
-        // Setup video
-        
-        if(videoProcessMode())
-        {
-             _incoming = getLastVideoFilter (frameStart,frameEnd-frameStart);
-        }else
-        {
-             _incoming = getFirstVideoFilter (frameStart,frameEnd-frameStart);
-        }
-
-           videoBuffer=new uint8_t[_incoming->getInfo()->width*_incoming->getInfo()->height*3];
-                // Set global header encoding, needed for H264
-           _encode = getVideoEncoder (_incoming->getInfo()->width,  _incoming->getInfo()->height,1);
-           total= _incoming->getInfo()->nb_frames;
-
-           info.fcc=*(uint32_t *)_encode->getCodecName(); //FIXME
-           
-           encoding_gui=new DIA_encoding(_incoming->getInfo()->fps1000);
-           bitstream.bufferSize=_incoming->getInfo()->width*_incoming->getInfo()->height*3;
-           if (!_encode)
-                {
-                  GUI_Error_HIG ("[FLV]",QT_TR_NOOP("Cannot initialize the video stream"));
-                        goto  stopit;
-                }
-
-                // init compressor
-                encoding_gui->setContainer(QT_TR_NOOP("Dummy"));
-                encoding_gui->setAudioCodec(QT_TR_NOOP("None"));
-                if(!videoProcessMode())
-                        encoding_gui->setCodec(QT_TR_NOOP("Copy"));
-                else
-                        encoding_gui->setCodec(_encode->getDisplayName());
-                
-                if (!_encode->configure (_incoming, 0))
-                {
-                      GUI_Error_HIG (QT_TR_NOOP("Filter init failed"), NULL);
-                     goto  stopit;
-                };
-
-                encoding_gui->setPhasis (QT_TR_NOOP("Encoding"));
-                
-                
-                info.width=_incoming->getInfo()->width;
-                info.height=_incoming->getInfo()->height;
-                info.nb_frames=_incoming->getInfo()->nb_frames;
-                info.fps1000=_incoming->getInfo()->fps1000;
-                
-                _encode->hasExtraHeaderData( &videoExtraDataSize,&dummy);
-                if(videoExtraDataSize)
-                {
-                        printf("[FLV]We have extradata for video in copy mode (%d)\n",videoExtraDataSize);
-                        videoExtraData=new uint8_t[videoExtraDataSize];
-                        memcpy(videoExtraData,dummy,videoExtraDataSize);
-                }
-        // _________________Setup video (cont) _______________
-        // ___________ Read 1st frame _________________
-             
-             ADM_assert(_encode);
-             bitstream.data=videoBuffer;
-             
-preFilling:
-             bitstream.cleanup(0);
-             if(!(err=_encode->encode ( prefill, &bitstream)))// FIXME: We should never execute it more than once
-             {
-                        printf("[FLV]:First frame error\n");
-                        GUI_Error_HIG (QT_TR_NOOP("Error while encoding"), NULL);
-                        goto  stopit;
-              }
-              sent++;
-              if(!bitstream.len)
-              {
-                prefill++;
-                goto preFilling;
-              }
-              if(!bitstream.flags & AVI_KEY_FRAME)
-              {
-                GUI_Error_HIG (QT_TR_NOOP("KeyFrame error"),QT_TR_NOOP( "The beginning frame is not a key frame.\nPlease move the A marker."));
-                  goto  stopit; 
-              }
-         
-          if(!videoProcessMode())
-                encoding_gui->setCodec(QT_TR_NOOP("Copy"));
-          else
-                encoding_gui->setCodec(_encode->getDisplayName());
-           //
-          UI_purge();
-          if(bitstream.len)
-          {
-            frameWrite++;
-          }
-           for(int frame=1;frame<total;frame++)
-           {
-               
-               ADM_assert(_encode);
-               bitstream.cleanup(frameWrite);
-              
-               r=_encode->encode ( prefill+frame, &bitstream);
-              
-               if(!r && frame<total-2)
-               {
-                        printf("[FLV]:Frame %u error\n",frame);
-                        GUI_Error_HIG ("FLV",QT_TR_NOOP("Error while encoding"));
-                        goto  stopit;
-                }
-                if(!bitstream.len && skipping)
-                {
-                    printf("[FLV]Frame skipped (xvid ?)\n");
-                    continue;
-                }
-                sent++;
-                skipping=0;
-                frameWrite++;
-                encoding_gui->setFrame(frame,bitstream.len,bitstream.out_quantizer,total);
-               if(!encoding_gui->isAlive())
-                {
-                    
-                    goto stopit;
-                }
-               
-           }
-           ret=1;
-           
-stopit:
-    
-           if(encoding_gui) delete encoding_gui;
-           if(videoBuffer) delete [] videoBuffer;
-           if(_encode) delete _encode;	
-           if(videoExtraData) delete [] videoExtraData;
-           return ret;
-}
-
-	
-// EOF

Deleted: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/oplug_flv/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/oplug_flv/CMakeLists.txt	2009-07-23 18:18:44 UTC (rev 5131)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/oplug_flv/CMakeLists.txt	2009-07-23 18:18:46 UTC (rev 5132)
@@ -1,9 +0,0 @@
-
-SET(ADM_flv_SRCS oplug_flv.cpp)
- 
-ADD_LIBRARY(ADM_mx_flv SHARED ${ADM_flv_SRCS})
-
-INCLUDE_DIRECTORIES("${AVIDEMUX_SOURCE_DIR}/avidemux/ADM_libraries/ADM_ffmpeg")
-TARGET_LINK_LIBRARIES(ADM_mx_flv  ADM_libavutil6 ADM_libavcodec6 ADM_libavformat6)
-INIT_MUXER(ADM_mx_flv)
-INSTALL_MUXER(ADM_mx_flv)

Deleted: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/oplug_flv/oplug_flv.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/oplug_flv/oplug_flv.cpp	2009-07-23 18:18:44 UTC (rev 5131)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/oplug_flv/oplug_flv.cpp	2009-07-23 18:18:46 UTC (rev 5132)
@@ -1,370 +0,0 @@
-/***************************************************************************
-                          oplug_flv.cpp  -  I/f to lavformat flash encoder
-                             -------------------
-
-    copyright            : (C) 2007 by mean
-    email                : fixounet at free.fr
-
- ***************************************************************************/
-
-/***************************************************************************
- *                                                                         *
- *   This program is free software; you can redistribute it and/or modify  *
- *   it under the terms of the GNU General Public License as published by  *
- *   the Free Software Foundation; either version 2 of the License, or     *
- *   (at your option) any later version.                                   *
- *                                                                         *
- ***************************************************************************/
-
-#include <math.h>
-
-#include "config.h"
-#include "ADM_default.h"
-#include "ADM_threads.h"
-
-extern "C" {
-#include "ADM_lavcodec.h"
-};
-
-#include "ADM_editor/ADM_Video.h"
-//#include "ADM_colorspace/colorspace.h"
-#include "DIA_coreToolkit.h"
-#include "ADM_videoFilter.h"
-#include "ADM_videoFilter_internal.h"
-
-#include "ADM_encoder/ADM_vidEncode.hxx"
-#include "ADM_codecs/ADM_codec.h"
-#include "ADM_encoder/adm_encoder.h"
-
-#include "ADM_codecs/ADM_ffmpeg.h"
-#include "ADM_encoder/adm_encffmpeg.h"
-#include "../oplug_mpegFF/oplug_vcdff.h"
-
-#include "ADM_userInterfaces/ADM_commonUI/DIA_encoding.h"
-#include "audioprocess.hxx"
-#include "audioeng_buildfilters.h"
-#include "../ADM_lavformat.h"
-#include "fourcc.h"
-#include "ADM_encoder/adm_encConfig.h"
-#include "ADM_encoder/ADM_vidEncode.hxx"
-#include "ADM_libraries/ADM_mplex/ADM_mthread.h"
-#include "ADM_toolkit/ADM_audioQueue.h"
-
-#include "ADM_osSupport/ADM_debugID.h"
-#define MODULE_NAME MODULE_MP4
-#include "ADM_osSupport/ADM_debug.h"
-
-
-extern const char 				*getStrFromAudioCodec( uint32_t codec);
-extern AVDMGenericAudioStream 	*mpt_getAudioStream(void);
-extern void   	 				UI_purge(void );
-
-extern uint32_t					videoProcessMode (void);
-extern uint32_t 				frameStart,frameEnd;
-extern uint32_t 				audioProcessMode(void);
-extern AVDMGenericAudioStream 	*currentaudiostream;;
-
-static 				uint8_t *_buffer=NULL,*_outbuffer=NULL;
-extern uint8_t isVP6Compatible (uint32_t fourcc);
-
-/*
- * 		\fn    Oplug_flv
-		\brief Main function to save in flv format.
-		It is very close to oplug_mp4 but somehow simplified as the following assumptions are made :
-				* No b frame
-				* No 2 pass encoding
-
-*/
-uint8_t oplug_flv(const char *name)
-{
-AVDMGenericVideoStream *_incoming=NULL;
-AVDMGenericAudioStream  *audio=NULL;
-
-uint8_t		audioBuffer[48000];
-uint8_t         *videoBuffer=NULL;
-
-uint32_t alen;//,flags;
-uint32_t size;
-
-uint8_t   ret=0;
-
-uint32_t  sample_got=0,sample;
-uint32_t  extraDataSize=0;
-uint8_t   *extraData=NULL;
-lavMuxer  *muxer=NULL;
-aviInfo      info;
-uint32_t   width,height;
-DIA_encoding *encoding_gui=NULL;
-Encoder         *_encode=NULL;
-uint32_t total=0;
-uint32_t videoExtraDataSize=0;
-uint8_t  *videoExtraData=NULL;
-uint8_t *dummy,err;
-WAVHeader *audioinfo=NULL;
-int prefill=0;
-uint32_t displayFrame=0;
-ADMBitstream    bitstream(0);
-uint32_t        frameWrite=0;
-uint8_t r=0;
-uint32_t skipping=1;
-pthread_t     audioThread;
-audioQueueMT context;
-PacketQueue   *pq=NULL;//("MP4 audioQ",50,2*1024*1024);
-uint32_t    totalAudioSize=0;
-uint32_t sent=0;
-
-        // Setup video
-
-        if(videoProcessMode())
-        {
-             _incoming = getLastVideoFilter (frameStart,frameEnd-frameStart);
-        }else
-        {
-             _incoming = getFirstVideoFilter (frameStart,frameEnd-frameStart);
-        }
-
-           videoBuffer=new uint8_t[_incoming->getInfo()->width*_incoming->getInfo()->height*3];
-                // Set global header encoding, needed for H264
-           _encode = getVideoEncoder (_incoming->getInfo()->width,  _incoming->getInfo()->height,1);
-           total= _incoming->getInfo()->nb_frames;
-
-           info.fcc=*(uint32_t *)_encode->getCodecName(); //FIXME
-           //
-           int supported=0;
-           if(isVP6Compatible(info.fcc)) supported=1;
-           if(fourCC::check(info.fcc,(const uint8_t *)"FLV1")) supported=1;
-           if(!supported)
-           {
-        	   GUI_Error_HIG(QT_TR_NOOP("Unsupported video"),QT_TR_NOOP("Only FLV1 and VP6 video are supported"));
-        	   goto stopit;
-           }
-           /* Check audio, we support only mp3 right now
-            * 44100, 22050, 11025 only!
-            *  */
-           if(currentaudiostream)
-           {
-        	   uint32_t audioCodec=0;
-        	   uint32_t fq=currentaudiostream->getInfo()->frequency;
-
-        	   	if(audioProcessMode())
-        	   	{
-        	   		audioCodec=audioFilter_getOuputCodec();
-        	   		fq=audioFilter_getOuputFrequency(fq);
-
-        	   	}else
-        	   	{	// copy
-        	   		audioCodec=currentaudiostream->getInfo()->encoding;
-        	   	}
-        	   	if(audioCodec!=WAV_MP3 )
-        	   		{
-        	   			GUI_Error_HIG(QT_TR_NOOP("Unsupported audio"),QT_TR_NOOP("Audio must be mp3 for flv output."));
-        	   			goto stopit;
-        	   		}
-        	   	if(fq!=44100 && fq!=22050 && fq!=11025)
-        	   	{
-    	   			GUI_Error_HIG(QT_TR_NOOP("Unsupported audio"),QT_TR_NOOP("Frequency must be 44100, 22050 or 11025 Hz."));
-    	   			goto stopit;
-
-        	   	}
-           }
-
-
-           encoding_gui=new DIA_encoding(_incoming->getInfo()->fps1000);
-           bitstream.bufferSize=_incoming->getInfo()->width*_incoming->getInfo()->height*3;
-           if (!_encode)
-                {
-                  GUI_Error_HIG ("[FLV]",QT_TR_NOOP("Cannot initialize the video stream"));
-                        goto  stopit;
-                }
-
-                // init compressor
-                encoding_gui->setContainer(QT_TR_NOOP("FLV"));
-                encoding_gui->setAudioCodec(QT_TR_NOOP("None"));
-                if(!videoProcessMode())
-                        encoding_gui->setCodec(QT_TR_NOOP("Copy"));
-                else
-                        encoding_gui->setCodec(_encode->getDisplayName());
-
-                if (!_encode->configure (_incoming, 0))
-                {
-                      GUI_Error_HIG (QT_TR_NOOP("Filter init failed"), NULL);
-                     goto  stopit;
-                };
-
-                encoding_gui->setPhasis (QT_TR_NOOP("Encoding"));
-
-
-                info.width=_incoming->getInfo()->width;
-                info.height=_incoming->getInfo()->height;
-                info.nb_frames=_incoming->getInfo()->nb_frames;
-                info.fps1000=_incoming->getInfo()->fps1000;
-
-                _encode->hasExtraHeaderData( &videoExtraDataSize,&dummy);
-                if(videoExtraDataSize)
-                {
-                        printf("[FLV]We have extradata for video in copy mode (%d)\n",videoExtraDataSize);
-                        videoExtraData=new uint8_t[videoExtraDataSize];
-                        memcpy(videoExtraData,dummy,videoExtraDataSize);
-                }
-        // _________________Setup video (cont) _______________
-        // ___________ Read 1st frame _________________
-
-             ADM_assert(_encode);
-             bitstream.data=videoBuffer;
-
-preFilling:
-             bitstream.cleanup(0);
-             if(!(err=_encode->encode ( prefill, &bitstream)))// FIXME: We should never execute it more than once
-             {
-                        printf("[FLV]:First frame error\n");
-                        GUI_Error_HIG (QT_TR_NOOP("Error while encoding"), NULL);
-                        goto  stopit;
-              }
-              sent++;
-              if(!bitstream.len)
-              {
-                prefill++;
-                goto preFilling;
-              }
-              if(!bitstream.flags & AVI_KEY_FRAME)
-              {
-                GUI_Error_HIG (QT_TR_NOOP("KeyFrame error"),QT_TR_NOOP( "The beginning frame is not a key frame.\nPlease move the A marker."));
-                  goto  stopit;
-              }
-
-// ____________Setup audio__________________
-          if(currentaudiostream)
-          {
-                audio=mpt_getAudioStream();
-                if(!audio)
-                {
-                        GUI_Error_HIG ("[FLV]",QT_TR_NOOP("Cannot initialize the audio stream"));
-                        goto  stopit;
-                }
-          }
-          if(audio)
-          {
-                audioinfo=audio->getInfo();
-                audio->extraData(&extraDataSize,&extraData);
-                if(audioProcessMode())
-                        encoding_gui->setAudioCodec(getStrFromAudioCodec(audio->getInfo()->encoding));
-                else
-                         encoding_gui->setAudioCodec(QT_TR_NOOP("Copy"));
-
-           }else
-           {
-                encoding_gui->setAudioCodec(QT_TR_NOOP("None"));
-           }
-// ____________Setup Muxer _____________________
-           muxer= new lavMuxer;
-
-           if(!muxer->open(
-                name,
-                2000000, // Muxrate
-                MUXER_FLV,
-                &info,videoExtraDataSize,videoExtraData,
-                audioinfo,extraDataSize,extraData))
-                         goto stopit;
-//_____________ Loop _____________________
-
-          encoding_gui->setContainer(QT_TR_NOOP("FLV"));
-
-          if(!videoProcessMode())
-                encoding_gui->setCodec(QT_TR_NOOP("Copy"));
-          else
-                encoding_gui->setCodec(_encode->getDisplayName());
-           //
-          UI_purge();
-          if(bitstream.len)
-          {
-            muxer->writeVideoPacket( &bitstream);
-            frameWrite++;
-          }
-//_____________ Start Audio thread _____________________
-          if(audio)
-          {
-            pq=new PacketQueue("[FLV] audioQ",5000,2*1024*1024);
-            memset(&context,0,sizeof(context));
-            context.audioEncoder=audio;
-            context.audioTargetSample=0xFFFF0000; ; //FIXME
-            context.packetQueue=pq;
-            // start audio thread
-            ADM_assert(!pthread_create(&audioThread,NULL,(THRINP)defaultAudioQueueSlave,&context));
-            ADM_usleep(4000);
-          }
-//_____________GO !___________________
-           for(int frame=1;frame<total;frame++)
-           {
-               while(muxer->needAudio())
-               {
-                    if(pq->Pop(audioBuffer,&alen,&sample))
-                    {
-                     if(alen)
-                     {
-                        muxer->writeAudioPacket(alen,audioBuffer,sample_got);
-                        totalAudioSize+=alen;
-                        encoding_gui->setAudioSize(totalAudioSize);
-                        sample_got+=sample;
-                     }
-                    }else break;
-               }
-               ADM_assert(_encode);
-               bitstream.cleanup(frameWrite);
-
-               r=_encode->encode ( prefill+frame, &bitstream);
-
-               if(!r && frame<total-2)
-               {
-                        printf("[FLV]:Frame %u error\n",frame);
-                        GUI_Error_HIG ("FLV",QT_TR_NOOP("Error while encoding"));
-                        goto  stopit;
-                }
-                if(!bitstream.len && skipping)
-                {
-                    printf("[FLV]Frame skipped (xvid ?)\n");
-                    continue;
-                }
-                sent++;
-                skipping=0;
-            //    printf("Prefill %u FrameWrite :%u Frame %u PtsFrame :%u\n",prefill,frameWrite,frame,bitstream.ptsFrame);
-                frameWrite++;
-                muxer->writeVideoPacket( &bitstream);
-                encoding_gui->setFrame(frame,bitstream.len,bitstream.out_quantizer,total);
-               if(!encoding_gui->isAlive())
-                {
-
-                    goto stopit;
-                }
-
-           }
-           ret=1;
-
-stopit:
-
-    // Flush slave Q
-    if(audio&& pq)
-    {
-        context.audioAbort=1;
-        pq->Abort();
-        // Wait for audio slave to be over
-        while(!context.audioDone)
-        {
-          printf("[FLV]Waiting Audio thread\n");
-          ADM_usleep(500000);
-        }
-        delete pq;
-    }
-    //
-           if(muxer) muxer->close();
-           if(encoding_gui) delete encoding_gui;
-           if(videoBuffer) delete [] videoBuffer;
-           if(muxer) delete muxer;
-           if(_encode) delete _encode;
-           if(videoExtraData) delete [] videoExtraData;
-           // Cleanup
-           deleteAudioFilter (audio);
-           return ret;
-}
-
-
-// EOF

Deleted: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/oplug_flv/oplug_flv.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/oplug_flv/oplug_flv.h	2009-07-23 18:18:44 UTC (rev 5131)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/oplug_flv/oplug_flv.h	2009-07-23 18:18:46 UTC (rev 5132)
@@ -1,21 +0,0 @@
-/***************************************************************************
-                          oplug_vcdff.h  -  description
-                             -------------------
-    begin                : Sun Nov 10 2002
-    copyright            : (C) 2002 by mean
-    email                : fixounet at free.fr
- ***************************************************************************/
-
-/***************************************************************************
- *                                                                         *
- *   This program is free software; you can redistribute it and/or modify  *
- *   it under the terms of the GNU General Public License as published by  *
- *   the Free Software Foundation; either version 2 of the License, or     *
- *   (at your option) any later version.                                   *
- *                                                                         *
- ***************************************************************************/
-#ifdef USE_FFMPEG
-#include "ADM_editor/ADM_outputfmt.h"
-uint8_t oplug_flv(const char *name);
-
-#endif

Deleted: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/oplug_mpeg/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/oplug_mpeg/CMakeLists.txt	2009-07-23 18:18:44 UTC (rev 5131)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/oplug_mpeg/CMakeLists.txt	2009-07-23 18:18:46 UTC (rev 5132)
@@ -1,4 +0,0 @@
-SET(ADM_oplug_mpeg_SRCS 
-	op_mpegpass.cpp)
-	
-ADD_ADM_LIB_ALL_TARGETS(oplug_mpeg ${ADM_oplug_mpeg_SRCS})
\ No newline at end of file

Deleted: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/oplug_mpeg/op_mpegpass.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/oplug_mpeg/op_mpegpass.cpp	2009-07-23 18:18:44 UTC (rev 5131)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/oplug_mpeg/op_mpegpass.cpp	2009-07-23 18:18:46 UTC (rev 5132)
@@ -1,425 +0,0 @@
-//
-// C++ Implementation: op_mpegpass
-//
-// Description: 
-//   This save mpeg video to mpegPS in video copy mode
-//	Audio can be in copy mode or not.
-//
-// Author: mean <fixounet at free.fr>, (C) 2004
-//
-// Copyright: See COPYING file that comes with this distribution
-//
-//
-
-
-#include "config.h"
-#include <math.h>
-#include "ADM_default.h"
-#include "ADM_threads.h"
-
-#include "avi_vars.h"
-#include "audioprocess.hxx"
-
-#include "ADM_userInterfaces/ADM_commonUI/DIA_encoding.h"
-
-#include "audioeng_buildfilters.h"
-#include "prefs.h"
-#include "DIA_coreToolkit.h"
-#include "ADM_editor/ADM_outputfmt.h"
-#include "../ADM_lavformat.h"
-
-#include "ADM_libraries/ADM_lvemux/ADM_muxer.h"
-
-// To have access to low level infos 
-#include "ADM_lavcodec.h"
-#include "ADM_codecs/ADM_ffmp43.h"
-#include "ADM_inputs/ADM_mpegdemuxer/dmx_mpegstartcode.h"
-
-#include "ADM_encoder/ADM_vidEncode.hxx"
-#include "ADM_videoFilter.h"
-#include "ADM_videoFilter_internal.h"
-#include "ADM_encoder/adm_encoder.h"
-#include "ADM_encoder/adm_encCopy.h"
-
-#include "ADM_libraries/ADM_mplex/ADM_mthread.h"
-#include "ADM_toolkit/ADM_audioQueue.h"
-
-static uint8_t lookupSeqEnd(ADMBitstream *bitstream,uint32_t *position);
-uint8_t ADM_findMpegStartCode(uint8_t *start, uint8_t *end,uint8_t *outstartcode,  uint32_t *offset);
-static int copyVideoSlave( muxerMT *context );
-/**
-	Save a cut and audio edited to mpeg-PS
-	Usefull for editing PVR captured files for example
-
-*/
-
-uint8_t isMpeg12Compatible(uint32_t fourcc);
-extern const char *getStrFromAudioCodec( uint32_t codec); 
-uint8_t mpeg_passthrough(const char *name,ADM_OUT_FORMAT format )
-{
-  uint32_t len, flags;
-  AVDMGenericAudioStream *audio=NULL;
-  uint32_t audiolen;
-  
-  DIA_encoding *work;
-  ADM_MUXER_TYPE mux;
-  
-  double total_wanted=0;
-  uint32_t total_got=0;
-  uint8_t ret=0;
- 
-  ADMMpegMuxer *muxer=NULL;
-  ADMBitstream bitstream(0);
-  
-  	printf("Saving as mpg PS to file %s\n",name);
-  
-  	// First we check it is mpeg
-	if(!isMpeg12Compatible(avifileinfo->fcc))
-  	{
-          GUI_Error_HIG(QT_TR_NOOP("This is not MPEG compatible"), QT_TR_NOOP("You can't use the Copy codec."));
-		return 0 ;
-  	}
-  	if(!currentaudiostream)
-  	{
-          GUI_Error_HIG(QT_TR_NOOP("There is no audio track"), NULL);
-		return 0;
-  	}
-  
-	ADM_assert (video_body->getFlags (frameStart, &flags));
-        if(!(flags&AVI_KEY_FRAME))
-        {
-          GUI_Error_HIG(QT_TR_NOOP("The first frame is not intra frame"), QT_TR_NOOP("Use the &lt;&lt; and the &gt;&gt; buttons to move using Intra frames."));
-                return 0;
-        }
-	
-  	audio=mpt_getAudioStream();
-	
-	// Have to check the type
-	// If it is mpeg2 we use DVD-PS
-	// If it is mpeg1 we use VCD-PS
-	// Later check if it is SVCD
-	if(!audio)
-	{
-          GUI_Error_HIG(QT_TR_NOOP("Audio track is not suitable"), NULL);
-		return 0;
-	}
-	// Check
-	WAVHeader *hdr=audio->getInfo();
-
-	switch(format)
-        {
-        case ADM_PS:	
-                    // Mpeg2 
-                        aviInfo info;
-                        video_body->getVideoInfo(&info);
-                        if(hdr->frequency==44100 && info.width==480&& hdr->encoding == WAV_MP2 ) // SVCD ?
-                        {
-                                mux=MUXER_SVCD;
-                                printf("PassThrough: Using SVCD PS\n");
-                        }
-                        else
-                        {
-                            uint32_t valid=0;
-                                if(!prefs->get(FEATURE_MPEG_NO_LIMIT,&valid)) valid=0;
-                                 // mpeg2, we do only DVD right now
-                                if(hdr->frequency==48000) valid=1;
-                                if((hdr->encoding != WAV_MP2 && hdr->encoding!=WAV_AC3 && hdr->encoding!=WAV_LPCM
-                                && hdr->encoding!=WAV_DTS))
-                                {
-                                  valid=0;  
-                                }
-                    
-                                if(!valid)
-                                {
-                                        deleteAudioFilter(audio);
-                                       GUI_Error_HIG(("Incompatible audio"),QT_TR_NOOP( "For DVD, audio must be 48 kHz MP2(stereo), AC3, DTS or LPCM (stereo)."));
-                                       return 0;
-                                }
-                         
-                               mux=MUXER_DVD;
-                               printf("PassThrough: Using DVD PS\n");
-                        }
-
-  	        muxer=new mplexMuxer();
-                break;
-        case ADM_TS:     
-             printf("Using TS output format\n");   
-             muxer=new tsMuxer(); //lavMuxer();
-             mux=MUXER_TS;
-             break;
-        default:
-                ADM_assert(0);
-                break;
-        }
-        
-        if(!muxer)
-         {
-                 printf("No muxer ?\n");
-                 return 0;
-        }
-	if(!muxer->open(name,0,mux,avifileinfo,audio->getInfo()))
-	{
-		delete muxer;
-		muxer=NULL;
-		printf("Muxer init failed\n");
-		return 0;
-		
-	}
-        
-	// In copy mode it is better to recompute the gop timestamp
-	muxer->forceRestamp();
-  ///____________________________
-  work=new DIA_encoding(avifileinfo->fps1000);
-  work->setCodec(QT_TR_NOOP("Copy"));
-  work->setAudioCodec(QT_TR_NOOP("---"));
-  work->setPhasis(QT_TR_NOOP("Saving"));
-  if(!audioProcessMode())
-     work->setAudioCodec(QT_TR_NOOP("Copy"));
-  else
-     work->setAudioCodec(getStrFromAudioCodec(audio->getInfo()->encoding));
-  switch(mux)
-  {
-    case MUXER_TS: work->setContainer(QT_TR_NOOP("MPEG TS"));break;
-    case MUXER_VCD: work->setContainer(QT_TR_NOOP("MPEG VCD"));break;
-    case MUXER_SVCD: work->setContainer(QT_TR_NOOP("MPEG SVCD"));break;
-    case MUXER_DVD: work->setContainer(QT_TR_NOOP("MPEG DVD"));break;
-    default:
-        ADM_assert(0);
-  }
-  
-  uint32_t cur=0;
-  uint32_t target_sample=0;
-  double target_time;
-  aviInfo info;
-        video_body->getVideoInfo(&info);
-        target_time=frameEnd-frameStart+1;
-        target_time*=1000;
-        target_time/=info.fps1000; // target_time in second
-        target_time*=audio->getInfo()->frequency;
-        target_sample=(uint32_t)floor(target_time);
-
-  uint8_t *buffer = new uint8_t[avifileinfo->width * avifileinfo->height * 3];
-  uint8_t *audiobuffer = new uint8_t[4*48000*2]; // 2 sec worth of lpcm
-  uint32_t position;
-  EncoderCopy *copy=NULL;
-        bitstream.data=buffer;
-        bitstream.bufferSize=avifileinfo->width * avifileinfo->height * 3;
-        
-     /***************************
-      Special case : Multithreaded
-     ***************************/
-        if(mux==MUXER_VCD || mux==MUXER_SVCD || mux==MUXER_DVD)
-        {
-          pthread_t audioThread,videoThread,muxerThread;
-          copy=new EncoderCopy(NULL);
-          muxerMT context;
-          
-          copy->configure(NULL, 0);
-          // 
-          memset(&context,0,sizeof(context));
-          context.videoEncoder=copy;
-          context.audioEncoder=audio;
-          context.muxer=( mplexMuxer *)muxer;
-          context.nbVideoFrame=copy->getNbFrame();
-          context.audioTargetSample=target_sample;
-          context.audioBuffer=audiobuffer;
-          context.bitstream=&bitstream;
-          context.opaque=(void *)work;
-
-           // start audio thread
-          ADM_assert(!pthread_create(&audioThread,NULL,(THRINP)defaultAudioSlave,&context)); 
-          ADM_assert(!pthread_create(&videoThread,NULL,(THRINP)copyVideoSlave,&context)); 
-          while(1)
-          {
-            accessMutex.lock();
-            if(context.audioDone==2 || context.videoDone==2 || !work->isAlive()) //ERROR
-            {
-              context.audioAbort=1;
-              context.videoAbort=1;
-              printf("[Copy] aborting\n");
-            }
-            if(context.audioDone && context.videoDone)
-            {
-              printf("[Copy]Both audio & video done\n");
-              if(context.audioDone==1 && context.videoDone==1) ret=1;
-              else ret=0;
-              accessMutex.unlock();
-              goto _abt;
-            }
-             // Update UI
-            work->setAudioSize(context.feedAudio);
-            context.feedVideo=0;
-            accessMutex.unlock();
-            ADM_usleep(1000*1000);
-             
-          }    
-    
-    
-        }
-        /**************************************************************************************/
-        /* If we get here, it means output is MPEG_TS */ 
-        /* We must use the audio packet Queue */
-        /**************************************************************************************/
-        ADM_assert(mux==MUXER_TS);
-        {
-            PacketQueue *pq;
-            uint32_t mx,sample;
-            pthread_t     audioThread;
-            copy=new EncoderCopy(NULL);
-            audioQueueMT context;
-            uint8_t r;
-            
-            copy->configure(NULL, 0);
-            pq=new PacketQueue("TS audioQ",5000,2*1024*1024);
-            memset(&context,0,sizeof(context));
-            context.audioEncoder=audio;
-            context.audioTargetSample=target_sample;
-            context.packetQueue=pq;
-              // start audio thread
-            ADM_assert(!pthread_create(&audioThread,NULL,(THRINP)defaultAudioQueueSlave,&context));
-            // Go!
-             
-            ADM_usleep(4000);
-            mx=copy->getNbFrame();
-            printf("Writing %u frames\n",mx);
-            for(int frame=0;frame<mx;frame++)
-            {
-              while(muxer->needAudio())
-              {
-                if(pq->Pop(audiobuffer,&audiolen,&sample))
-                {
-                  if(audiolen)
-                  {
-                    muxer->writeAudioPacket(audiolen,audiobuffer);
-                    //work->feedAudioFrame(audiolen);
-                  }
-                }else break;
-              }
-              ADM_assert(copy);
-              bitstream.cleanup(frame);
-              r=copy->encode ( frame, &bitstream);
-              if(!r)
-              {
-                printf("TS:Frame %u error\n",frame);
-                GUI_Error_HIG (QT_TR_NOOP("Error while encoding"), NULL);
-                goto  stopit;
-              }
-              muxer->writeVideoPacket( &bitstream);
-
-              work->setFrame(frame,bitstream.len,bitstream.out_quantizer,mx);
-//              work->feedFrame(bitstream.len);
-              if(!work->isAlive())
-              {
-                goto stopit;
-              }
-            }
-        
-    ret=1;
-stopit:
-    context.audioAbort=1;
-    pq->Abort();
-    // Wait for audio slave to be over
-    while(!context.audioDone)
-    {
-      printf("Waiting Audio thread\n");
-      ADM_usleep(500000); 
-    }
-    delete pq;
-  } // End ts case 
-  /************************************** TS End *********************************/
-_abt:
-  delete work;
-  muxer->close();
-  delete muxer;
-  delete [] buffer;
-  delete [] audiobuffer;
-  deleteAudioFilter(audio);
-  if(copy) delete copy;
-  return ret;
-
-}
-
-
-
-
-//************************************************
-uint8_t lookupSeqEnd(ADMBitstream *bitstream,uint32_t *position)
-{
-    uint8_t *ptr=bitstream->data,*end,code;
-    uint32_t len=bitstream->len,offset;
-    
-    end=ptr+len;
-    while(ADM_findMpegStartCode(ptr, end,&code,&offset))
-    {
-        if(code==SEQ_END_CODE)
-        {
-            *position=ptr-bitstream->data+offset-4;
-            return 1;
-        }
-        ptr+=offset;
-    }
-    return 0;
-}
-//*******************************
-int copyVideoSlave( muxerMT *context )
-{
-DIA_encoding *work=(DIA_encoding *)context->opaque;
-ADMBitstream *bitstream=context->bitstream;
-
-  printf("[CopyVideoThread] Starting\n");
-  uint32_t position;
-  for(uint32_t i=0;i<context->nbVideoFrame;i++)
-  {
-
-    bitstream->cleanup(i);
-    if(context->videoAbort)
-    {
-      context->videoDone=1;
-      context->muxer->audioEof();
-      return 1;
-    }
-    if(!context->videoEncoder->encode( i,bitstream))
-    {
-      accessMutex.lock();
-      context->videoDone=2;
-      context->muxer->audioEof();
-      accessMutex.unlock();
-      printf("[CopyVideoThread] Exiting on error\n");
-      return 1;
-    }
-    if(!bitstream->len)
-      continue;
-    
-    if(lookupSeqEnd(bitstream,&position))
-    {
-        ADMBitstream bs2(bitstream->bufferSize); // Mostly correct
-                if(position) 
-                {
-                  bs2.data=context->bitstream->data;
-                  bs2.len=position;
-                  context->muxer->writeVideoPacket(&bs2);
-                }
-                bs2.data=bitstream->data+position+4;
-                bs2.len=bitstream->len-position-4;
-                if(bs2.len) context->muxer->writeVideoPacket(&bs2);
-    } 
-    else 
-      context->muxer->writeVideoPacket(bitstream); 
-  
-
-    accessMutex.lock();
-    context->currentVideoFrame=i;
-    context->feedVideo+=bitstream->len;
-    work->setFrame(i,bitstream->len,bitstream->out_quantizer,frameEnd-frameStart);
-    accessMutex.unlock();
-  }        
-  accessMutex.lock();
-  context->videoDone=1;
-  context->muxer->audioEof();
-  accessMutex.unlock();
-
-  printf("[CopyVideoThread] Exiting\n");
-  return 1;
-}
-
-//EOF

Deleted: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/oplug_mpegFF/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/oplug_mpegFF/CMakeLists.txt	2009-07-23 18:18:44 UTC (rev 5131)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/oplug_mpegFF/CMakeLists.txt	2009-07-23 18:18:46 UTC (rev 5132)
@@ -1,4 +0,0 @@
-SET(ADM_oplug_mpegFF_SRCS 
-	oplug_vcdff.cpp)
-
-ADD_ADM_LIB_ALL_TARGETS(oplug_mpegFF ${ADM_oplug_mpegFF_SRCS})

Deleted: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/oplug_mpegFF/oplug_encodervcd.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/oplug_mpegFF/oplug_encodervcd.h	2009-07-23 18:18:44 UTC (rev 5131)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/oplug_mpegFF/oplug_encodervcd.h	2009-07-23 18:18:46 UTC (rev 5132)
@@ -1,29 +0,0 @@
-/***************************************************************************
-                          oplug_encodervcd.h  -  description
-                             -------------------
-    begin                : Sun Nov 10 2002
-    copyright            : (C) 2002 by mean
-    email                : fixounet at free.fr
- ***************************************************************************/
-
-/***************************************************************************
- *                                                                         *
- *   This program is free software; you can redistribute it and/or modify  *
- *   it under the terms of the GNU General Public License as published by  *
- *   the Free Software Foundation; either version 2 of the License, or     *
- *   (at your option) any later version.                                   *
- *                                                                         *
- ***************************************************************************/
-
- class encoderVCD
- {
-	private :
-						uint32_t _w,_h,_br;
-						FILE *file;
-						
-	public:
-					encoderVCD( void );
-											  
-	 
-	 
-};
\ No newline at end of file

Deleted: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/oplug_mpegFF/oplug_vcdff.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/oplug_mpegFF/oplug_vcdff.cpp	2009-07-23 18:18:44 UTC (rev 5131)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/oplug_mpegFF/oplug_vcdff.cpp	2009-07-23 18:18:46 UTC (rev 5132)
@@ -1,555 +0,0 @@
-/***************************************************************************
-                          oplug_vcdff.cpp  -  description
-                             -------------------
-    begin                : Sun Nov 10 2002
-    copyright            : (C) 2002 by mean
-    email                : fixounet at free.fr
-    
-    Ouput using FFmpeg mpeg1 encoder
-    Much faster than mjpegtools, albeit quality seems inferior
-    
- ***************************************************************************/
-
-/***************************************************************************
- *                                                                         *
- *   This program is free software; you can redistribute it and/or modify  *
- *   it under the terms of the GNU General Public License as published by  *
- *   the Free Software Foundation; either version 2 of the License, or     *
- *   (at your option) any later version.                                   *
- *                                                                         *
- ***************************************************************************/
-
-#include "config.h"
-
-#ifdef USE_FFMPEG
-#include <math.h>
-
-#include "ADM_default.h"
-#include "ADM_threads.h"
-
-extern "C" {
-#include "ADM_lavcodec.h"
-}
-
-#include "avi_vars.h"
-#include "prototype.h"
-
-//#include "ADM_colorspace/colorspace.h"
-#include "DIA_coreToolkit.h"
-#include "ADM_videoFilter.h"
-#include "ADM_videoFilter_internal.h"
-
-#include "ADM_encoder/ADM_vidEncode.hxx"
-#include "ADM_encoder/adm_encoder.h"
-
-#include "ADM_codecs/ADM_ffmpeg.h"
-#include "ADM_encoder/adm_encffmpeg.h"
-#include "ADM_encoder/adm_encmpeg2enc.h"
-#include "ADM_encoder/adm_encRequant.h"
-#include "../oplug_mpegFF/oplug_vcdff.h"
-
-#include "ADM_userInterfaces/ADM_commonUI/DIA_encoding.h"
-#include "audioprocess.hxx"
-#include "ADM_audiofilter/audioeng_buildfilters.h"
-#include "../ADM_lavformat.h"
-
-#include "ADM_encoder/adm_encConfig.h"
-#include "ADM_encoder/ADM_vidEncode.hxx"
-
-#include "ADM_libraries/ADM_mplex/ADM_mthread.h"
-
-static uint8_t *_buffer = NULL, *_outbuffer = NULL;
-static void end(void);
-extern const char *getStrFromAudioCodec(uint32_t codec);
-
-extern COMPRES_PARAMS ffmpeg1Codec,ffmpeg2DVDCodec,ffmpeg2SVCDCodec,RequantCodec;	
-extern FFcodecSetting ffmpeg1Extra,ffmpeg2DVDExtra,ffmpeg2SVCDExtra;
-extern COMPRES_PARAMS SVCDCodec, DVDCodec,VCDCodec;
-
-extern uint8_t    isMpeg12Compatible (uint32_t fourcc);
-
-extern SelectCodecType videoCodecGetType(void);
-
-static char *twoPass = NULL;
-static char *twoFake = NULL;
-
-uint8_t oplug_mpegff(const char *name, ADM_OUT_FORMAT type)
-{
-AVDMGenericVideoStream *_incoming;
-Encoder  *encoder=NULL;
-ADMMpegMuxer	*muxer=NULL;
-FILE 		*file=NULL;
-uint8_t		audioBuffer[48000];
-uint32_t	audioLen=0;
-uint32_t _w,_h,_fps1000,_page,total;	
-AVDMGenericAudioStream	*audio=NULL;
-uint32_t len,flags;
-uint32_t size;
-ADM_MUXER_TYPE mux;
-uint32_t  audio_encoding=0;
-uint32_t  real_framenum=0;
-uint8_t   ret=0;
-uint32_t  sample_target=0;
-uint32_t  total_sample=0;
-ADMBitstream bitstream(0);
-uint32_t audioSum=0;
-DIA_encoding  *encoding;
-int reuse = 0;
-
-        twoPass=new char[strlen(name)+6];
-        twoFake=new char[strlen(name)+6];
-  
-        strcpy(twoPass,name);
-        strcat(twoPass,".stat");
-        strcpy(twoFake,name);
-        strcat(twoFake,".fake");
- 
-        _incoming = getLastVideoFilter (frameStart,frameEnd-frameStart);
-        _w=_incoming->getInfo()->width;
-        _h=_incoming->getInfo()->height;
-        _fps1000=_incoming->getInfo()->fps1000;
-        _page=_w*_h;
-        _page+=_page>>1;
-
-        total=_incoming->getInfo()->nb_frames;
-        if(!total) return 0;	
-        
-        switch(type)
-        {
-            default:
-                    ADM_assert(0);
-            case ADM_ES:
-                        // Else open file (if possible)                       
-                        mux=MUXER_NONE;
-                        break;
-            case ADM_TS:
-                    if(!currentaudiostream)
-                    {
-                      GUI_Error_HIG(QT_TR_NOOP("There is no audio track"), NULL);
-					  goto finishvcdff;
-                    }
-                    audio=mpt_getAudioStream();
-                    mux=MUXER_TS;
-                    break;
-            case ADM_PS:
-            
-            {
-                if(!currentaudiostream)
-                {
-                  GUI_Error_HIG(QT_TR_NOOP("There is no audio track"), NULL);
-				  goto finishvcdff;
-                }
-                audio=mpt_getAudioStream();
-                // Have to check the type
-                // If it is mpeg2 we use DVD-PS
-                // If it is mpeg1 we use VCD-PS
-                // Later check if it is SVCD
-                if(!audio)
-                {
-                  GUI_Error_HIG(QT_TR_NOOP("Audio track is not suitable"), NULL);
-				  goto finishvcdff;
-                }
-                // Check
-                WAVHeader *hdr=audio->getInfo();	
-                audio_encoding=hdr->encoding;
-                if (videoCodecGetType() == CodecXVCD || videoCodecGetType() == CodecVCD)
-                {
-                        if(hdr->frequency!=44100 ||  hdr->encoding != WAV_MP2)
-                        {
-                            GUI_Error_HIG(("Incompatible audio"),QT_TR_NOOP( "For VCD, audio must be 44.1 kHz MP2."));
-							goto finishvcdff;
-                        }
-                        mux=MUXER_VCD;
-                        printf("X*CD: Using VCD PS\n");
-                }else
-                {    
-                        aviInfo info;
-                        video_body->getVideoInfo(&info);
-                        if(hdr->frequency==44100 && _w==480&&hdr->encoding == WAV_MP2 ) // SVCD ?
-                        {
-                            mux=MUXER_SVCD;
-                            printf("X*VCD: Using SVCD PS\n");
-                        }
-                        else
-                        {
-                            // mpeg2, we do only DVD right now
-                            if(hdr->frequency!=48000 || 
-                                (hdr->encoding != WAV_MP2 && hdr->encoding!=WAV_AC3 && hdr->encoding!=WAV_LPCM))
-                            {
-                                GUI_Error_HIG(QT_TR_NOOP("Incompatible audio"), QT_TR_NOOP("For DVD, audio must be 48 kHz MP2, AC3 or LPCM."));
-								goto finishvcdff;
-                            }
-                            mux=MUXER_DVD;
-                            printf("X*VCD: Using DVD PS\n");
-                        }
-                }
-            }
-         }        
-        // Create muxer
-       
-       
-        switch (videoCodecGetType())
-        {
-                
-                case CodecXVCD:
-                        encoder=new EncoderFFMPEGMpeg1(FF_MPEG1,&ffmpeg1Codec);
-                        printf("\n Using ffmpeg mpeg1 encoder\n");
-                        break;
-                case CodecXSVCD:
-                        encoder=new EncoderFFMPEGMpeg1(FF_MPEG2,&ffmpeg2SVCDCodec);
-                        printf("\n Using ffmpeg mpeg2 encoder\n");
-                        break;
-                case CodecXDVD:
-                        encoder=new EncoderFFMPEGMpeg1(FF_MPEG2,&ffmpeg2DVDCodec);
-                        printf("\n Using ffmpeg mpeg2 encoder (DVD)\n");
-                        break;
-                case CodecDVD:
-                  encoder=new EncoderMpeg2enc(MPEG2ENC_DVD,&DVDCodec);
-                  printf("\n Using mpeg2enc encoder (DVD)\n");
-                  break;
-                case CodecRequant:
-                  if(!isMpeg12Compatible(avifileinfo->fcc))
-                  {
-                    GUI_Error_HIG("Incompatible Input","The input file must be mpeg2 to be able to use requant!");
-                    return 0; // Fixme, do some cleanup 
-                  }
-                  encoder=new EncoderRequant(&RequantCodec);
-                  printf("\n Using mpeg2 requant\n");
-                  break;
-                break;
-                case CodecSVCD:
-                  encoder=new EncoderMpeg2enc(MPEG2ENC_SVCD,&SVCDCodec);
-                  printf("\n Using mpeg2enc encoder (SVCD)\n");
-                  break;
-                case CodecVCD:
-                  encoder=new EncoderMpeg2enc(MPEG2ENC_VCD,&VCDCodec);
-                  printf("\n Using mpeg2enc encoder (VCD)\n");
-                  break;
-                default:
-                ADM_assert(0);
-      }
-
-      encoder->setLogFile(twoPass,total);
-
-	  if (encoder->isDualPass())
-	  {
-		  printf("Verifying log file\n");
-
-		  if (encoder->verifyLog(twoPass, total) && GUI_Question(QT_TR_NOOP("Reuse the existing log file?")))
-			  reuse = 1;
-	  }
-
-      if(!encoder->configure(_incoming, reuse))
-              goto finishvcdff;
-
-      _buffer=new uint8_t[_page]; // Might overflow if _page only
-      _outbuffer=new uint8_t[_page];
-
-      ADM_assert(  _buffer);
-      ADM_assert(  _outbuffer);
-
-      encoding =new DIA_encoding(_fps1000);
-      switch (videoCodecGetType())
-      {
-          case CodecVCD:
-            encoding->setCodec(QT_TR_NOOP("libmpeg2enc VCD"));
-            break;
-          case CodecSVCD:
-            encoding->setCodec(QT_TR_NOOP("libmpeg2enc SVCD"));
-            break;
-          case CodecDVD:
-            encoding->setCodec(QT_TR_NOOP("libmpeg2enc DVD"));
-            break;
-          case CodecXVCD:
-            encoding->setCodec(QT_TR_NOOP("FFmpeg MPEG-1 VBR"));
-            break;
-          case CodecXSVCD:
-            encoding->setCodec(QT_TR_NOOP("FFmpeg MPEG-2 SVCD VBR"));
-            break;
-          case CodecXDVD:
-            encoding->setCodec(QT_TR_NOOP("FFmpeg MPEG-2 DVD VBR"));
-            break;
-          case CodecRequant:
-            encoding->setCodec(QT_TR_NOOP("MPEG Requantizer"));
-            break;
-          
-          default:
-            ADM_assert(0);
-	}
-        switch(mux)
-          {
-            case MUXER_NONE:encoding->setContainer(QT_TR_NOOP("MPEG ES"));break;
-            case MUXER_TS:  encoding->setContainer(QT_TR_NOOP("MPEG TS"));break;
-            case MUXER_VCD: encoding->setContainer(QT_TR_NOOP("MPEG VCD"));break;
-            case MUXER_SVCD:encoding->setContainer(QT_TR_NOOP("MPEG SVCD"));break;
-            case MUXER_DVD: encoding->setContainer(QT_TR_NOOP("MPEG DVD"));break;
-            default:
-                ADM_assert(0);
-          }
-
-
-
-        // pass 1
-        if(encoder->isDualPass()) //Cannot be requant
-        {
-                        if(!reuse)
-                        {
-                                encoding->setPhasis (QT_TR_NOOP("Pass 1/2"));
-                                encoder->startPass1();
-                                bitstream.data=_buffer;
-                                bitstream.bufferSize=_page;
-                                for(uint32_t i=0;i<total;i++)
-                                {
-                                        bitstream.cleanup(i);
-                                        if(!encoder->encode( i, &bitstream))//&len,(uint8_t *) _buffer,&flags))
-                                        {
-                                          GUI_Error_HIG(QT_TR_NOOP("Error in pass 1"), NULL);
-                                        }
-                                        encoding->setFrame(i,bitstream.len,bitstream.out_quantizer,total);
-                                        if(!encoding->isAlive())
-                                              goto finishvcdff;
-                                }
-                        }
-                        encoder->startPass2();
-                        encoding->reset();
-                }
-                
-              switch(type)
-              {
-                case ADM_PS:
-                  muxer=new mplexMuxer;
-                  break;
-                case ADM_TS:
-                  muxer=new tsMuxer;
-                  break;
-                case ADM_ES:
-                  break;
-                default:
-                  ADM_assert(0);
-      
-      
-              }
-              if(muxer)
-              {
-                if(!muxer->open(name,0,mux,avifileinfo,audio->getInfo()))
-                {
-                  printf("Muxer init failed\n");
-				  goto finishvcdff;
-                }
-                double sample_time;
-
-                sample_time=total;
-                sample_time*=1000;
-                sample_time/=_fps1000; // target_time in second
-                sample_time*=audio->getInfo()->frequency;
-                sample_target=(uint32_t)floor(sample_time);
-              }
-              else
-              {
-                file=fopen(name,"wb");
-                if(!file)
-                {
-                  GUI_Error_HIG(QT_TR_NOOP("File error"), QT_TR_NOOP("Cannot open \"%s\" for writing."), name);
-				  goto finishvcdff;
-                }
-              }
-          if(encoder->isDualPass())
-                  encoding->setPhasis (QT_TR_NOOP("Pass 2/2"));
-          else
-                  encoding->setPhasis (QT_TR_NOOP("Encoding"));
-
-         // Set info for audio if any
-         if(muxer)
-         {
-            if(!audioProcessMode())
-                  encoding->setAudioCodec(QT_TR_NOOP("Copy"));
-            else
-                  encoding->setAudioCodec(getStrFromAudioCodec(audio->getInfo()->encoding));
-         }
-         //**********************************************************
-         //  In that case we do multithreadedwriting (yes!)
-         //**********************************************************
-
-         if(mux==MUXER_DVD || mux==MUXER_SVCD || mux==MUXER_VCD)
-         {
-           pthread_t audioThread,videoThread,muxerThread;
-           muxerMT context;
-           //
-           bitstream.data=_outbuffer;
-           bitstream.bufferSize=_page;
-           // 
-           memset(&context,0,sizeof(context));
-           context.videoEncoder=encoder;
-           context.audioEncoder=audio;
-           context.muxer=(mplexMuxer *)muxer;
-           context.nbVideoFrame=total;
-           context.audioTargetSample=sample_target;
-           context.audioBuffer=audioBuffer;
-           context.bitstream=&bitstream;
-           context.opaque=(void *)encoding;
-
-           // start audio thread
-           ADM_assert(!pthread_create(&audioThread,NULL,(THRINP)defaultAudioSlave,&context)); 
-           ADM_assert(!pthread_create(&videoThread,NULL,(THRINP)defaultVideoSlave,&context)); 
-           while(1)
-           {
-             accessMutex.lock();
-             if(!encoding->isAlive())
-             {
-               context.audioAbort=1;
-               context.videoAbort=1;
-               printf("[mpegFF]Waiting for slaves\n");
-               accessMutex.unlock();
-               while(1)
-               {
-                 accessMutex.lock();
-                 if(context.audioDone && context.videoDone)
-                 {
-                   printf("[mpegFF]Both audio & video done\n");
-                   if(context.audioDone==1 && context.videoDone==1) ret=1;
-                   accessMutex.unlock();
-                   goto finishvcdff;
-                 }
-                 accessMutex.unlock();
-                 ADM_usleep(50000);
- 
-               }
-               
-             }
-             if(context.audioDone==2 || context.videoDone==2 ) //ERROR
-             {
-               context.audioAbort=1;
-               context.videoAbort=1;
-             }
-             if(context.audioDone && context.videoDone)
-             {
-               printf("[mpegFF]Both audio & video done\n");
-               if(context.audioDone==1 && context.videoDone==1) ret=1;
-               accessMutex.unlock();
-               goto finishvcdff;
-             }
-             accessMutex.unlock();
-             ADM_usleep(1000*1000);
-             
-           }
-           
-         }
-         //**********************************************************
-         //  NOT MULTITHREADED
-         //**********************************************************
-
-      bitstream.data=_outbuffer;
-      bitstream.bufferSize=_page;
-      for(uint32_t i=0;i<total;i++)
-      {
-       	// get frame
-                bitstream.cleanup(i);
-                if(!encoder->encode( i,&bitstream))// &len,(uint8_t *) _outbuffer,&flags))
-                {
-                  GUI_Error_HIG(QT_TR_NOOP("Error in pass 2"), NULL);
-                        goto finishvcdff;
-                }
-                if(!bitstream.len) continue;
-                
-                if(file)
-                {
-                    fwrite(_outbuffer,bitstream.len,1,file);
-                }
-                else
-                {
-                        uint32_t samples; 
-                        
-                        //printf("%lu %lu\n",i,dts);
-                        
-                        muxer->writeVideoPacket(&bitstream);
-                        real_framenum++;
-                        // _muxer->writeVideoPacket(len,_buffer_out,
-                        //i-MPEG_PREFILL,_codec->getCodedPictureNumber());
-                        if(total_sample<sample_target)
-                        {
-                            while(muxer->needAudio() && total_sample<sample_target) 
-                            {				
-                                if(!audio->getPacket(audioBuffer, &audioLen, &samples))	
-                                { 
-                                        break; 
-                                }
-                                if(audioLen) 
-                                {
-                                        muxer->writeAudioPacket(audioLen,audioBuffer); 
-                                        total_sample+=samples;
-                                        audioSum+=audioLen;
-                                }
-                            }
-                        }
-                
-                }
-                encoding->setFrame(i,bitstream.len,bitstream.out_quantizer,total);
-                encoding->setAudioSize(audioSum);
-                if(!encoding->isAlive ())
-                                  goto finishvcdff;
-        }
-        ret=1;
-finishvcdff:
-        printf("[MPEGFF] Finishing..\n");
-        delete encoding;
-        end();
-
-        if(file)
-        {
-                fclose(file);
-                file=NULL;
-        }
-        else if(muxer)
-        {
-                muxer->close();
-                delete muxer;
-                muxer=NULL;
-        }
-
-        delete encoder;
-
-		if (audio)
-			deleteAudioFilter(audio);
-
-        return ret;
-}
-	
-void end (void)
-{
-        
-        delete [] _buffer;
-        delete [] _outbuffer;
-
-        _buffer		=NULL;
-        _outbuffer=NULL;
-        
-        if(twoPass) delete [] twoPass;
-        if(twoFake) delete [] twoFake;
-        
-        twoPass=twoFake=NULL;
-        
-}
-AVDMGenericAudioStream *mpt_getAudioStream (void)
-{
-  AVDMGenericAudioStream *audio = NULL;
-  if (audioProcessMode ())	// else Raw copy mode
-  {
-    if (currentaudiostream->isCompressed ())
-    {
-      if (!currentaudiostream->isDecompressable ())
-      {
-        return NULL;
-      }
-    }
-    audio =  buildAudioFilter (currentaudiostream,  video_body->getTime (frameStart));
-  }
-  else				// copymode
-  {
-      // else prepare the incoming raw stream
-      // audio copy mode here
-    audio = buildAudioFilter (currentaudiostream,video_body->getTime (frameStart));
-  }
-  return audio;
-}
-#endif	
-// EOF

Deleted: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/oplug_mpegFF/oplug_vcdff.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/oplug_mpegFF/oplug_vcdff.h	2009-07-23 18:18:44 UTC (rev 5131)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/oplug_mpegFF/oplug_vcdff.h	2009-07-23 18:18:46 UTC (rev 5132)
@@ -1,21 +0,0 @@
-/***************************************************************************
-                          oplug_vcdff.h  -  description
-                             -------------------
-    begin                : Sun Nov 10 2002
-    copyright            : (C) 2002 by mean
-    email                : fixounet at free.fr
- ***************************************************************************/
-
-/***************************************************************************
- *                                                                         *
- *   This program is free software; you can redistribute it and/or modify  *
- *   it under the terms of the GNU General Public License as published by  *
- *   the Free Software Foundation; either version 2 of the License, or     *
- *   (at your option) any later version.                                   *
- *                                                                         *
- ***************************************************************************/
-#ifdef USE_FFMPEG
-#include "ADM_editor/ADM_outputfmt.h"
-uint8_t oplug_mpegff(const char *name,ADM_OUT_FORMAT type);
-
-#endif



From mean at mail.berlios.de  Thu Jul 23 20:18:48 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Thu, 23 Jul 2009 20:18:48 +0200
Subject: [Avidemux-svn-commit] r5133 - in
	branches/avidemux_2.6_branch_mean/avidemux_plugins:
	ADM_muxers ADM_videoEncoder ADM_videoEncoder/ffFlv1
Message-ID: <200907231818.n6NIImoZ009294@sheep.berlios.de>

Author: mean
Date: 2009-07-23 20:18:48 +0200 (Thu, 23 Jul 2009)
New Revision: 5133

Added:
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/ffFlv1/
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/ffFlv1/ADM_ffFlv1.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/ffFlv1/ADM_ffFlv1.h
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/ffFlv1/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/ffFlv1/ffFlv1Plugin.cpp
Modified:
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/CMakeLists.txt
Log:
[encoder] FFflv1

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/CMakeLists.txt	2009-07-23 18:18:46 UTC (rev 5132)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/CMakeLists.txt	2009-07-23 18:18:48 UTC (rev 5133)
@@ -2,7 +2,7 @@
 ADD_SUBDIRECTORY(muxerMp4)
 ADD_SUBDIRECTORY(muxerAvi)
 ADD_SUBDIRECTORY(muxerRaw)
-#ADD_SUBDIRECTORY(muxerFlv)
+ADD_SUBDIRECTORY(muxerFlv)
 #ADD_SUBDIRECTORY(oplug_avi)
 #ADD_SUBDIRECTORY(oplug_mp4)
 #ADD_SUBDIRECTORY(oplug_mpeg)

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/CMakeLists.txt	2009-07-23 18:18:46 UTC (rev 5132)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/CMakeLists.txt	2009-07-23 18:18:48 UTC (rev 5133)
@@ -7,3 +7,4 @@
 ADD_SUBDIRECTORY(huff)
 ADD_SUBDIRECTORY(ffMpeg4)
 ADD_SUBDIRECTORY(ffMsMpeg4)
+ADD_SUBDIRECTORY(ffFlv1)

Added: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/ffFlv1/ADM_ffFlv1.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/ffFlv1/ADM_ffFlv1.cpp	2009-07-23 18:18:46 UTC (rev 5132)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/ffFlv1/ADM_ffFlv1.cpp	2009-07-23 18:18:48 UTC (rev 5133)
@@ -0,0 +1,266 @@
+/***************************************************************************
+                          \fn ADM_ffMsMpeg4
+                          \brief Front end for libavcodec MsMpeg4 aka divx3 encoder
+                             -------------------
+    
+    copyright            : (C) 2002/2009 by mean
+    email                : fixounet at free.fr
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+#include "ADM_lavcodec.h"
+#include "ADM_default.h"
+#include "ADM_ffFlv1.h"
+#undef ADM_MINIMAL_UI_INTERFACE // we need the full UI
+#include "DIA_factory.h"
+
+#if 1
+#define aprintf(...) {}
+#else
+#define aprintf printf
+#endif
+
+static FFcodecSetting Flv1Settings=
+{
+    false,
+    {
+    COMPRESS_CQ, //COMPRESSION_MODE  mode;
+    2,              // uint32_t          qz;           /// Quantizer
+    1500,           //uint32_t          bitrate;      /// In kb/s 
+    700,            //uint32_t          finalsize;    /// In ?
+    1500,           //uint32_t          avg_bitrate;  /// avg_bitrate is in kb/s!!
+    ADM_ENC_CAP_CBR+ADM_ENC_CAP_CQ+ADM_ENC_CAP_2PASS+ADM_ENC_CAP_2PASS_BR+ADM_ENC_CAP_GLOBAL+ADM_ENC_CAP_SAME
+    },
+          ME_EPZS,			// ME
+          0,				// GMC     
+          0,				// 4MV
+          0,				// _QPEL;   
+          1,				// _TREILLIS_QUANT
+          2,				// qmin;
+          31,				// qmax;
+          3,				// max_qdiff;
+          0,				// max_b_frames;
+          0,				// mpeg_quant;
+          1,				// is_luma_elim_threshold
+          -2,				// luma_elim_threshold;
+          1,				// is_chroma_elim_threshold
+          -5,				// chroma_elim_threshold;
+          0.05,				//lumi_masking;
+          1,				// is lumi
+          0.01,				//dark_masking; 
+          1,				// is dark
+          0.5,				// qcompress amount of qscale change between easy & hard scenes (0.0-1.0
+          0.5,				// qblur;    amount of qscale smoothing over time (0.0-1.0) 
+          0,				// min bitrate in kB/S
+          0,				// max bitrate
+          0,				// default matrix
+          250,				// no gop size
+          NULL,             // intra_matrix
+          NULL,             // intra_matrix
+          0,				// interlaced
+          0,				// WLA: bottom-field-first
+          0,				// wide screen
+          2,				// mb eval = distortion
+          8000,				// vratetol 8Meg
+          0,				// is temporal
+          0.0,				// temporal masking
+          0,				// is spatial
+          0.0,				// spatial masking
+          0,				// NAQ
+          0				    // DUMMY 
+};
+/**
+        \fn ADM_ffFlv1Encoder
+*/
+ADM_ffFlv1Encoder::ADM_ffFlv1Encoder(ADM_coreVideoFilter *src) : ADM_coreVideoEncoderFFmpeg(src,&Flv1Settings)
+{
+    printf("[ffFlv1] Creating.\n");
+   
+
+}
+
+/**
+    \fn setup
+*/
+bool ADM_ffFlv1Encoder::setup(void)
+{
+    
+    switch(Settings.params.mode)
+    {
+      case COMPRESS_2PASS:
+      case COMPRESS_2PASS_BITRATE:
+           if(false==setupPass())
+            {
+                printf("[ffFlv1] Multipass setup failed\n");
+                return false;
+            }
+            break;
+      case COMPRESS_SAME:
+      case COMPRESS_CQ:
+            _context->flags |= CODEC_FLAG_QSCALE;
+            _context->bit_rate = 0;
+            break;
+      case COMPRESS_CBR:
+              _context->bit_rate=Settings.params.bitrate*1000; // kb->b;
+            break;
+     default:
+            return false;
+    }
+    presetContext(&Settings);
+    if(false== ADM_coreVideoEncoderFFmpeg::setup(CODEC_ID_MSMPEG4V3))
+        return false;
+
+    printf("[ffFlv1] Setup ok\n");
+    return true;
+}
+
+
+/** 
+    \fn ~ADM_ffFlv1Encoder
+*/
+ADM_ffFlv1Encoder::~ADM_ffFlv1Encoder()
+{
+    printf("[ffFlv1] Destroying.\n");
+   
+    
+}
+
+/**
+    \fn encode
+*/
+bool         ADM_ffFlv1Encoder::encode (ADMBitstream * out)
+{
+int sz,q;
+again:
+    sz=0;
+    if(false==preEncode()) // Pop - out the frames stored in the queue due to B-frames
+    {
+        return false;
+    }
+    q=image->_Qp;
+    
+    if(!q) q=2;
+    switch(Settings.params.mode)
+    {
+      case COMPRESS_SAME:
+                // Keep same frame type & same Qz as the incoming frame...
+            _frame.quality = (int) floor (FF_QP2LAMBDA * q+ 0.5);
+            if(image->flags & AVI_KEY_FRAME)    _frame.pict_type=FF_I_TYPE;
+            else                                _frame.pict_type=FF_P_TYPE;
+
+            break;
+      case COMPRESS_2PASS:
+      case COMPRESS_2PASS_BITRATE:
+            switch(pass)
+            {
+                case 1: 
+                        break;
+                case 2: 
+                        break; // Get Qz for this frame...
+            }
+      case COMPRESS_CQ:
+            _frame.quality = (int) floor (FF_QP2LAMBDA * Settings.params.qz+ 0.5);
+            break;
+      case COMPRESS_CBR:
+            break;
+     default:
+            printf("[ffFlv1] Unsupported encoding mode\n");
+            return false;
+    }
+    aprintf("[CODEC] Flags = 0x%x, QSCALE=%x, bit_rate=%d, quality=%d qz=%d incoming qz=%d\n",_context->flags,CODEC_FLAG_QSCALE,
+                                     _context->bit_rate,  _frame.quality, _frame.quality/ FF_QP2LAMBDA,q);     
+    
+    _frame.reordered_opaque=image->Pts;
+    if ((sz = avcodec_encode_video (_context, out->data, out->bufferSize, &_frame)) <= 0)
+    {
+        printf("[ffFlv1] Error %d encoding video\n",sz);
+        return false;
+    }
+    postEncode(out,sz);
+    return true;
+}
+
+/**
+    \fn isDualPass
+
+*/
+bool         ADM_ffFlv1Encoder::isDualPass(void) 
+{
+    if(Settings.params.mode==COMPRESS_2PASS || Settings.params.mode==COMPRESS_2PASS_BITRATE ) return true;
+    return false;
+
+}
+
+/**
+    \fn jpegConfigure
+    \brief UI configuration for jpeg encoder
+*/
+
+bool         ffFlv1Configure(void)
+{         
+diaMenuEntry meE[]={
+  {1,QT_TR_NOOP("None")},
+  {2,QT_TR_NOOP("Full")},
+  {3,QT_TR_NOOP("Log")},
+  {4,QT_TR_NOOP("Phods")},
+  {5,QT_TR_NOOP("EPZS")},
+  {6,QT_TR_NOOP("X1")}
+};       
+
+diaMenuEntry qzE[]={
+  {0,QT_TR_NOOP("H.263")},
+  {1,QT_TR_NOOP("MPEG")}
+};       
+
+diaMenuEntry rdE[]={
+  {0,QT_TR_NOOP("MB comparison")},
+  {1,QT_TR_NOOP("Fewest bits (vhq)")},
+  {2,QT_TR_NOOP("Rate distortion")}
+};     
+
+        FFcodecSetting *conf=&Flv1Settings;
+
+uint32_t me=(uint32_t)conf->me_method;  
+#define PX(x) &(conf->x)
+
+         diaElemBitrate   bitrate(&(Flv1Settings.params),NULL);
+         diaElemUInteger  qminM(PX(qmin),QT_TR_NOOP("Mi_n. quantizer:"),1,31);
+         diaElemUInteger  qmaxM(PX(qmax),QT_TR_NOOP("Ma_x. quantizer:"),1,31);
+         diaElemUInteger  qdiffM(PX(max_qdiff),QT_TR_NOOP("Max. quantizer _difference:"),1,31);
+         diaElemToggle    trellis(PX(_TRELLIS_QUANT),QT_TR_NOOP("_Trellis quantization"));
+         diaElemUInteger filetol(PX(vratetol),QT_TR_NOOP("_Filesize tolerance (kb):"),0,100000);
+         
+         diaElemFloat    qzComp(PX(qcompress),QT_TR_NOOP("_Quantizer compression:"),0,1);
+         diaElemFloat    qzBlur(PX(qblur),QT_TR_NOOP("Quantizer _blur:"),0,1);
+         
+        diaElemUInteger GopSize(PX(gop_size),QT_TR_NOOP("_Gop Size:"),1,500); 
+          /* First Tab : encoding mode */
+        diaElem *diamode[]={&GopSize,&bitrate};
+        diaElemTabs tabMode(QT_TR_NOOP("User Interface"),2,diamode);
+        
+        /* 3nd Tab : Qz */
+        
+         diaElem *diaQze[]={&qminM,&qmaxM,&qdiffM,&trellis};
+        diaElemTabs tabQz(QT_TR_NOOP("Quantization"),4,diaQze);
+        
+        /* 4th Tab : RControl */
+        
+         diaElem *diaRC[]={&filetol,&qzComp,&qzBlur};
+        diaElemTabs tabRC(QT_TR_NOOP("Rate Control"),3,diaRC);
+        
+         diaElemTabs *tabs[]={&tabMode,&tabQz,&tabRC};
+        if( diaFactoryRunTabs(QT_TR_NOOP("libavcodec MPEG-4 configuration"),3,tabs))
+        {
+          conf->me_method=(Motion_Est_ID)me;
+          return true;
+        }
+         return false;
+}
+// EOF

Added: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/ffFlv1/ADM_ffFlv1.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/ffFlv1/ADM_ffFlv1.h	2009-07-23 18:18:46 UTC (rev 5132)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/ffFlv1/ADM_ffFlv1.h	2009-07-23 18:18:48 UTC (rev 5133)
@@ -0,0 +1,47 @@
+/***************************************************************************
+                          \fn ADM_VideoEncoders
+                          \brief Internal handling of video encoders
+                             -------------------
+    
+    copyright            : (C) 2002/2009 by mean
+    email                : fixounet at free.fr
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+#ifndef ADM_ffMpeg4_ENCODER_H
+#define ADM_ffMpeg4_ENCODER_H
+#include "ADM_coreVideoEncoderFFmpeg.h"
+
+
+/**
+        \class ADM_ffFlv1Encoder
+        \brief Dummy encoder that does nothing
+
+*/
+class ADM_ffFlv1Encoder : public ADM_coreVideoEncoderFFmpeg
+{
+protected:
+               
+           
+               int             plane;
+               
+public:
+
+                           ADM_ffFlv1Encoder(ADM_coreVideoFilter *src);
+virtual                    ~ADM_ffFlv1Encoder();
+virtual        bool        setup(void); 
+virtual        bool        encode (ADMBitstream * out);
+virtual const  char        *getFourcc(void) {return "FLV1";}
+
+virtual        bool         isDualPass(void) ;
+
+};
+
+#endif

Added: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/ffFlv1/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/ffFlv1/CMakeLists.txt	2009-07-23 18:18:46 UTC (rev 5132)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/ffFlv1/CMakeLists.txt	2009-07-23 18:18:48 UTC (rev 5133)
@@ -0,0 +1,15 @@
+INCLUDE(ve_plugin)
+
+SET(ffFlv1_SRCS 
+        ffFlv1Plugin.cpp
+        ADM_ffFlv1.cpp
+)
+INCLUDE_DIRECTORIES(${CMAKE_CURRENT_BINARY_DIR})
+
+ADD_LIBRARY(ADM_ve_ffFlv1 SHARED ${ffFlv1_SRCS})
+
+INIT_VIDEO_ENCODER(ADM_ve_ffFlv1)
+INSTALL_VIDEO_ENCODER(ADM_ve_ffFlv1)
+TARGET_LINK_LIBRARIES(ADM_ve_ffFlv1 ADM_libavcodec6 ADM_libavutil6)
+INCLUDE_DIRECTORIES("${AVIDEMUX_SOURCE_DIR}/avidemux/")
+INCLUDE_DIRECTORIES("${AVIDEMUX_SOURCE_DIR}/avidemux/ADM_libraries/ADM_ffmpeg")

Added: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/ffFlv1/ffFlv1Plugin.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/ffFlv1/ffFlv1Plugin.cpp	2009-07-23 18:18:46 UTC (rev 5132)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/ffFlv1/ffFlv1Plugin.cpp	2009-07-23 18:18:48 UTC (rev 5133)
@@ -0,0 +1,31 @@
+/***************************************************************************
+                          \fn     ffFlv1Plugin
+                          \brief  Plugin for flv1 encoder
+                             -------------------
+    
+    copyright            : (C) 2002/2009 by mean
+    email                : fixounet at free.fr
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+#include "ADM_default.h"
+#include "ADM_ffFlv1.h"
+#include "ADM_coreVideoEncoderInternal.h"
+
+extern bool         ffFlv1Configure(void);
+
+ADM_DECLARE_VIDEO_ENCODER_PREAMBLE(ADM_ffFlv1Encoder);
+ADM_DECLARE_VIDEO_ENCODER_NO_CONFIG();
+ADM_DECLARE_VIDEO_ENCODER_MAIN("ffFlv1",
+                               "FLV1(flash)",
+                               "Simple ffmpeg based Flv1 Encoder (c) 2009 Mean",
+                                ffFlv1Configure, // No configuration
+                                ADM_UI_ALL,
+                                1,0,0);



From mean at mail.berlios.de  Thu Jul 23 20:18:50 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Thu, 23 Jul 2009 20:18:50 +0200
Subject: [Avidemux-svn-commit] r5134 - in
	branches/avidemux_2.6_branch_mean/avidemux_plugins:
	ADM_muxers/muxerFlv ADM_videoEncoder/ffFlv1
Message-ID: <200907231818.n6NIIoIV009304@sheep.berlios.de>

Author: mean
Date: 2009-07-23 20:18:50 +0200 (Thu, 23 Jul 2009)
New Revision: 5134

Modified:
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerFlv/muxerFlv.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/ffFlv1/ADM_ffFlv1.cpp
Log:
[flv muxer] dont assert , exit more cleanly

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerFlv/muxerFlv.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerFlv/muxerFlv.cpp	2009-07-23 18:18:48 UTC (rev 5133)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerFlv/muxerFlv.cpp	2009-07-23 18:18:50 UTC (rev 5134)
@@ -87,6 +87,11 @@
 bool muxerFlv::open(const char *file, ADM_videoStream *s,uint32_t nbAudioTrack,ADM_audioStream **a)
 {
     uint32_t fcc=s->getFCC();
+    bool r=true;
+    uint32_t videoExtraDataSize=0;
+    uint8_t  *videoExtraData;
+    char *fileTitle=NULL;
+        
      if(fourCC::check(fcc,(uint8_t *)"FLV1") || isVP6Compatible(fcc))
      {
 
@@ -136,15 +141,17 @@
 	if (!video_st)
 	{
 		printf("[FLV] new stream failed\n");
-		return false;
+		r=false;
+        goto finish;
 	}
     AVCodecContext *c;
 	c = video_st->codec;
-
+        video_st->sample_aspect_ratio.num=1;
+        video_st->sample_aspect_ratio.den=1;
   // probably a memeleak here
-        char *foo=ADM_strdup(file);
+        fileTitle=ADM_strdup(file);
 
-        strcpy(oc->title,ADM_GetFileName(foo));
+        strcpy(oc->title,ADM_GetFileName(fileTitle));
         strcpy(oc->author,"Avidemux");
         c->sample_aspect_ratio.num=1;
         c->sample_aspect_ratio.den=1;
@@ -171,8 +178,6 @@
                         ADM_assert(0);
                 }
 
-        uint32_t videoExtraDataSize=0;
-        uint8_t  *videoExtraData;
         s->getExtraData(&videoExtraDataSize,&videoExtraData);
         if(videoExtraDataSize)
         {
@@ -191,7 +196,7 @@
         c->flags=CODEC_FLAG_QSCALE;
         c->width = s->getWidth();
         c->height =s->getHeight();
-
+        
         rescaleFps(s->getAvgFps1000(),&(c->time_base));
         c->gop_size=15;
 
@@ -213,7 +218,9 @@
           if (!audio_st)
           {
                   printf("[FLV]: new stream failed (audio)\n");
-                  return false;
+                  r=false;
+                  goto finish;
+                                 
           }
           WAVHeader *audioheader=a[0]->getInfo();;
 
@@ -241,6 +248,8 @@
                                   break;
                   default:
                                  printf("[FLV]: Unsupported audio\n");
+                                 r=false;
+                                 goto finish;
                                  return false;
                           break;
           }
@@ -253,6 +262,7 @@
 
         }
         // /audio
+        
         oc->mux_rate=10080*1000;
         oc->preload=AV_TIME_BASE/10; // 100 ms preloading
         oc->max_delay=200*1000; // 500 ms
@@ -264,14 +274,21 @@
         if (url_fopen(&(oc->pb), file, URL_WRONLY) < 0)
         {
             printf("[FLV]: Failed to open file :%s\n",file);
-            return false;
+            r=false;
+            goto finish;
         }
 
-        ADM_assert(av_write_header(oc)>=0);
+        if(av_write_header(oc)<0)
+        {
+            printf("[Flv Muxer] Muxer rejected the parameters\n");
+            r=false;
+            
+        }
+finish:
         vStream=s;
         aStreams=a;
         nbAStreams=nbAudioTrack;
-        return true;
+        return r;
 }
 
 /**

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/ffFlv1/ADM_ffFlv1.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/ffFlv1/ADM_ffFlv1.cpp	2009-07-23 18:18:48 UTC (rev 5133)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/ffFlv1/ADM_ffFlv1.cpp	2009-07-23 18:18:50 UTC (rev 5134)
@@ -1,6 +1,6 @@
 /***************************************************************************
-                          \fn ADM_ffMsMpeg4
-                          \brief Front end for libavcodec MsMpeg4 aka divx3 encoder
+                          \fn ADM_ffFlv1
+                          \brief Front end for libavcodec Flv1 encoder
                              -------------------
     
     copyright            : (C) 2002/2009 by mean
@@ -36,7 +36,7 @@
     1500,           //uint32_t          bitrate;      /// In kb/s 
     700,            //uint32_t          finalsize;    /// In ?
     1500,           //uint32_t          avg_bitrate;  /// avg_bitrate is in kb/s!!
-    ADM_ENC_CAP_CBR+ADM_ENC_CAP_CQ+ADM_ENC_CAP_2PASS+ADM_ENC_CAP_2PASS_BR+ADM_ENC_CAP_GLOBAL+ADM_ENC_CAP_SAME
+    ADM_ENC_CAP_CBR+ADM_ENC_CAP_CQ+ADM_ENC_CAP_2PASS+ADM_ENC_CAP_2PASS_BR
     },
           ME_EPZS,			// ME
           0,				// GMC     
@@ -102,7 +102,6 @@
                 return false;
             }
             break;
-      case COMPRESS_SAME:
       case COMPRESS_CQ:
             _context->flags |= CODEC_FLAG_QSCALE;
             _context->bit_rate = 0;
@@ -114,7 +113,7 @@
             return false;
     }
     presetContext(&Settings);
-    if(false== ADM_coreVideoEncoderFFmpeg::setup(CODEC_ID_MSMPEG4V3))
+    if(false== ADM_coreVideoEncoderFFmpeg::setup(CODEC_ID_FLV1))
         return false;
 
     printf("[ffFlv1] Setup ok\n");
@@ -149,13 +148,6 @@
     if(!q) q=2;
     switch(Settings.params.mode)
     {
-      case COMPRESS_SAME:
-                // Keep same frame type & same Qz as the incoming frame...
-            _frame.quality = (int) floor (FF_QP2LAMBDA * q+ 0.5);
-            if(image->flags & AVI_KEY_FRAME)    _frame.pict_type=FF_I_TYPE;
-            else                                _frame.pict_type=FF_P_TYPE;
-
-            break;
       case COMPRESS_2PASS:
       case COMPRESS_2PASS_BITRATE:
             switch(pass)
@@ -256,7 +248,7 @@
         diaElemTabs tabRC(QT_TR_NOOP("Rate Control"),3,diaRC);
         
          diaElemTabs *tabs[]={&tabMode,&tabQz,&tabRC};
-        if( diaFactoryRunTabs(QT_TR_NOOP("libavcodec MPEG-4 configuration"),3,tabs))
+        if( diaFactoryRunTabs(QT_TR_NOOP("libavcodec FLV1 configuration"),3,tabs))
         {
           conf->me_method=(Motion_Est_ID)me;
           return true;



From mean at mail.berlios.de  Thu Jul 23 20:18:53 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Thu, 23 Jul 2009 20:18:53 +0200
Subject: [Avidemux-svn-commit] r5135 - in
	branches/avidemux_2.6_branch_mean/avidemux: common
	common/ADM_icons common/ADM_icons/scalable
	gtk/ADM_userInterfaces/glade/main
Message-ID: <200907231818.n6NIIrkA009322@sheep.berlios.de>

Author: mean
Date: 2009-07-23 20:18:52 +0200 (Thu, 23 Jul 2009)
New Revision: 5135

Added:
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_icons/
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_icons/first-frame.png
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_icons/last-frame.png
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_icons/markA.png
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_icons/markB.png
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_icons/next-black-frame.png
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_icons/next-frame.png
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_icons/next-key-frame.png
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_icons/play.png
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_icons/previous-black-frame.png
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_icons/previous-frame.png
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_icons/previous-key-frame.png
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_icons/scalable/
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_icons/scalable/first-frame.svg
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_icons/scalable/last-frame.svg
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_icons/scalable/markA.svg
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_icons/scalable/markB.svg
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_icons/scalable/next-black-frame.svg
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_icons/scalable/next-frame.svg
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_icons/scalable/next-key-frame.svg
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_icons/scalable/play.svg
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_icons/scalable/previous-black-frame.svg
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_icons/scalable/previous-frame.svg
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_icons/scalable/previous-key-frame.svg
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_icons/scalable/stop.svg
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_icons/stop.png
Removed:
   branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/glade/main/Kbackward.xpm
   branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/glade/main/Kforward.xpm
   branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/glade/main/about.xpm
   branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/glade/main/avidemux_icon.xpm
   branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/glade/main/backward.xpm
   branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/glade/main/begin.xpm
   branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/glade/main/end.xpm
   branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/glade/main/forward.xpm
   branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/glade/main/gnome-calculator.xpm
   branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/glade/main/gnome-calculator_small.xpm
   branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/glade/main/markA.xpm
   branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/glade/main/markB.xpm
   branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/glade/main/play.xpm
   branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/glade/main/stop.xpm
   branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/glade/main/systray.xpm
   branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/glade/main/systray2.xpm
   branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/glade/main/xpm_nextblack.xpm
   branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/glade/main/xpm_prevblack.xpm
Modified:
   branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/glade/main/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/glade/main/gtk2_build.glade
Log:
[UI/Gtk] Use new set of icons by JM

Added: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_icons/first-frame.png
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_icons/first-frame.png	2009-07-23 18:18:50 UTC (rev 5134)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_icons/first-frame.png	2009-07-23 18:18:52 UTC (rev 5135)
@@ -0,0 +1,9 @@
+?PNG
+
+
+??"-/7{|?`???c?????0/?w? ?R?u?P0?p`t?=O??hlnS?/?}}??y??$d??Zs?f?I+?;	
+J2?Q?S???Ed `)	"" ''G
+?1J2E???A?VD ?[1?	????pBx??????E7L???I??#H&4KB
+??CJ&Bf??@???	????aOy???t/??'?????H?7o
+?-`+	?	??{??mxi?????y?????A?9V?1	???
+A?'B2????4E??)z??233;ss?-U%?'??Sw?}??v~???Y3&}????H?k????1
\ No newline at end of file

Added: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_icons/last-frame.png
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_icons/last-frame.png	2009-07-23 18:18:50 UTC (rev 5134)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_icons/last-frame.png	2009-07-23 18:18:52 UTC (rev 5135)
@@ -0,0 +1,11 @@
+?PNG
+
+
+gZ?H?9c?s??}-qF???{t?g??_??T???j
+
+?c?R?
+?p?3?#?@??Rh??Xp??(????GLp?A?`?\)
+eM?!~?????v?&?=????????
+GL~??????????N?<;w{??u(??D?&?EE?D??+?;????????.???????j?????|??????S??cR" 1???X?/?"???????KfNQ?
+@?N????3?ts$???????W?M??t.?5??WN/?J?s???F???s[?????:6}W?W?p@???
+??????Iq?C
\ No newline at end of file

Added: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_icons/markA.png
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_icons/markA.png	2009-07-23 18:18:50 UTC (rev 5134)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_icons/markA.png	2009-07-23 18:18:52 UTC (rev 5135)
@@ -0,0 +1,7 @@
+?PNG
+
+
+?t:?3?gfflgg?N?:e"bL?????V??????k??????P?92?????{?}?Q???t?????
+?8z?8?S?p!el?e??XZ???'o?{??j??????!oXP???8??????McH;.`???????????[|?{???:??cU???>Q34????\??6N?Ku???YM??E????@Q?j??/??:?s	e{??????d??1Ze???f{?F?>-????su?z?0?@?y??I?K
+??N'??\Q?????????-?x???hc???y?/?????qI????d??ut??
+_U?!Ct?X???????$???}???iZ?!?r?????J{|?X??b?\???'RD????8?OMM????p?M7???O????? ?0?B}??o<?&>-?~???D??h?bS,bf?5bf&????*?????dc3?"?#?7?h?T???j??%jFmv?`8?X???{Sg1??????
\ No newline at end of file

Added: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_icons/markB.png
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_icons/markB.png	2009-07-23 18:18:50 UTC (rev 5134)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_icons/markB.png	2009-07-23 18:18:52 UTC (rev 5135)
@@ -0,0 +1,7 @@
+?PNG
+
+
+?/???>???4?9??^??+?????2.??Jc?5)????;?x???E	??`???p??	?@?~?7o?E'?q?8?pNQ?9g?????*???DU,?8o??
+??T=?y?b?cy???3UG?$$qB???f??????Q.???R??Y\\$N??M3???<a|||
+?:?,q??J???D??Ke?8?;_?v?`cccsAA?????<8!
+M8~?!????*n>U??????=???2Z33?V???,?:Za?????/~???<?^?^??>?=c?*y???s1?J?2B????l??RR???e??Z??ot???0??g?ff[???a?;????????>&^z?33{????0q????????????~??~???????????p?????J?????v??tvf&jw:??n????????v?C??5(??dMZ?????9???(?CSS?????ic?NNL?????#}???~???23?/???????
\ No newline at end of file

Added: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_icons/next-black-frame.png
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_icons/next-black-frame.png	2009-07-23 18:18:50 UTC (rev 5134)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_icons/next-black-frame.png	2009-07-23 18:18:52 UTC (rev 5135)
@@ -0,0 +1,7 @@
+?PNG
+
+
+d?v:1????Q??((????c?XE???wf?????????G
+??""?A?u(????W?????!??J?????x???U?Z1{??????W??????s???? ??????Dj(?V??1??h???%?&??????O???c??}????I???1!$t]?????p?a?J???+8{?,??Lu?.[>8?k???????C}>??????r??v????????????R+??L???????????O	??????0???s]??k??%?
+	)%4M??i?RA)?p8????n)????`Q?R???? ???qhZl&53??Bss3??????????1oK0??XQY1??????D?;?????9??a???s???#??0???7?????1v??><?ZOZOw[??+?@???;{???r??S?:d?>
+vH)+\??
\ No newline at end of file

Added: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_icons/next-frame.png
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_icons/next-frame.png	2009-07-23 18:18:50 UTC (rev 5134)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_icons/next-frame.png	2009-07-23 18:18:52 UTC (rev 5135)
@@ -0,0 +1,5 @@
+?PNG
+
+
+* ??B???p,	[I4]H???E,xx?Y?r??#??Uk?mx?\[rn"????`c?????PP1??24
+J???*?{sK??????????n???????X2???X????%?a?V`"???@?????_?_?~???;?Z?&?-fB?@?>?4?i????0$?8t??{e????GUn_??
\ No newline at end of file

Added: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_icons/next-key-frame.png
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_icons/next-key-frame.png	2009-07-23 18:18:50 UTC (rev 5134)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_icons/next-key-frame.png	2009-07-23 18:18:52 UTC (rev 5135)
@@ -0,0 +1,12 @@
+?PNG
+
+
+
+
+xv~?(??~???o??????q??k??dQv?h?vC?` ?AA???c?*
+EZrl????????S?k~??i}
+?3??}??? +*?H&??w6??R??SR??(????5]ph?CRPH?????G??H??E??]}9?????Q?z^z?@??<3??????l????.?P;?????Ar
+??<>t?<(?N`?|?8?????Y??&$Q{????%?2??????????brn"???g???B??=????!	(!?BV?n?
+)?????0`?L????e?????_9e????
+?
+=?\?^r?????????Y???a?~BH=?G?????'{N\?????w?????o=
\ No newline at end of file

Added: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_icons/play.png
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_icons/play.png	2009-07-23 18:18:50 UTC (rev 5134)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_icons/play.png	2009-07-23 18:18:52 UTC (rev 5135)
@@ -0,0 +1,11 @@
+?PNG
+
+
+&
+&Q??3
+?b?@@???)?? I2 ???d??i\?>	?????[X]]???????R?
+?|78??/????e*??A
+??? X?O?i??WQ?W+??[
+??v=z!?[??/????c>?/	
+S???cE^E???_o?A??,?rl|||?9L? ??IA??P??d$3!????0???
+??%? ?,0p0??I??
\ No newline at end of file

Added: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_icons/previous-black-frame.png
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_icons/previous-black-frame.png	2009-07-23 18:18:50 UTC (rev 5134)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_icons/previous-black-frame.png	2009-07-23 18:18:52 UTC (rev 5135)
@@ -0,0 +1,10 @@
+?PNG
+
+
+.???a?E??=?|?q?j????93???=????{?%
+
+BTU?????G9:;;rj?W??qVPZ???6p???????	
+???????+SN??C????v???O??u?????????3?9XX???--?Lolj\???????????u??????R?q?);$???s??%"??,?18t?k???????+M??PYUE???98c????"aQ???????????j???q???!8??iP!!@???m;?2??rB?<???snB?(?"?j???\p??8???-A)	&?0??EQ?*
+TU??(?vK???e???11"4q$??P??????]?K{-???^????????4????t??p??]5Mc\?????x??????6k??`Lb"??@?Th?]??t:?r??r:?p8!8%a?b?AB
+8c?l?? 8? QF?!??#"*4{ ????????2eJC????{????xI^??9???l??N?P 
+!???>&1???o??g???>??????8?y???y??o??|?r???[m??oD??????????N??~T?3?'?i???o??????????Wo???#???c??Ji!??????QJ??y???TB?
\ No newline at end of file

Added: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_icons/previous-frame.png
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_icons/previous-frame.png	2009-07-23 18:18:50 UTC (rev 5134)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_icons/previous-frame.png	2009-07-23 18:18:52 UTC (rev 5135)
@@ -0,0 +1,8 @@
+?PNG
+
+
+?\Z??U?[zM??f|??"?2??????s?UVV??vJ??v??RI??n?????????qgK
+????E$4:R?8??????x<n??????R???????-??x,V?h??R????Q??H? F??????????
+????p???;?
+???#4????4?????M??x???u?()`m?}???~?Ai)5??^??g???k?s?B&+m????n{??????np?lN?4??p???5??J?1i???,?#<7"
+?%?C?sa!???=>{??M;V??nX????c????3(?)?????C?+LF?-xM'???u??k?=x??m?????s?^???H??*	???*0
\ No newline at end of file

Added: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_icons/previous-key-frame.png
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_icons/previous-key-frame.png	2009-07-23 18:18:50 UTC (rev 5134)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_icons/previous-key-frame.png	2009-07-23 18:18:52 UTC (rev 5135)
@@ -0,0 +1,11 @@
+?PNG
+
+
+D?V???ASV?????????{???~???????	????t????G ax??`???'=???[?Lv????P??O????R|AA???????m??????	||?LH???&CD??9w?+.?????i?|???s+??m
+y,?hjj 
+?f?v4lG?q4G???$;???????????[_???"?2???2b2&"?wy???????;~;??
+c?g
+;
+&?iD????$???y;%!Xv???|?LN{???,??????K7?????c??c;;??????????a????4?x7?h???ip?!????????%,?,????=??n{?????R??????|?.%?h?q4????+D??O
+'?r[?????P?p????7?`)	G?bom??c?_1s??mV??^?v???????+??9??eJ??`???H???????W??I#N?=???o?Jj?????$?!??????t??TN??q??
+^?Yjs??M?;?O???]??n?dJ????X??v?;yE??????????^k?H?m?	??:.y??My???????????!M??????+y?=e???W	?
\ No newline at end of file

Added: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_icons/scalable/first-frame.svg
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_icons/scalable/first-frame.svg	2009-07-23 18:18:50 UTC (rev 5134)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_icons/scalable/first-frame.svg	2009-07-23 18:18:52 UTC (rev 5135)
@@ -0,0 +1,449 @@
+<?xml version="1.0" encoding="UTF-8" standalone="no"?>
+<!-- Created with Inkscape (http://www.inkscape.org/) -->
+<svg
+   xmlns:dc="http://purl.org/dc/elements/1.1/"
+   xmlns:cc="http://creativecommons.org/ns#"
+   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
+   xmlns:svg="http://www.w3.org/2000/svg"
+   xmlns="http://www.w3.org/2000/svg"
+   xmlns:xlink="http://www.w3.org/1999/xlink"
+   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"
+   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"
+   width="48"
+   height="48"
+   id="svg7854"
+   sodipodi:version="0.32"
+   inkscape:version="0.46"
+   version="1.0"
+   sodipodi:docbase="/home/dobey/Projects/gnome-icon-theme/scalable/actions"
+   sodipodi:docname="first-frame.svg"
+   inkscape:output_extension="org.inkscape.output.svg.inkscape"
+   inkscape:export-filename="/data/Avidemux/nove ikony/first-frame.png"
+   inkscape:export-xdpi="76.153847"
+   inkscape:export-ydpi="76.153847">
+  <defs
+     id="defs7856">
+    <inkscape:perspective
+       sodipodi:type="inkscape:persp3d"
+       inkscape:vp_x="0 : 24 : 1"
+       inkscape:vp_y="0 : 1000 : 0"
+       inkscape:vp_z="48 : 24 : 1"
+       inkscape:persp3d-origin="24 : 16 : 1"
+       id="perspective11934" />
+    <linearGradient
+       id="linearGradient7577">
+      <stop
+         style="stop-color:#000000;stop-opacity:0.3137255;"
+         offset="0"
+         id="stop7579" />
+      <stop
+         style="stop-color:#ffffff;stop-opacity:1"
+         offset="1"
+         id="stop7581" />
+    </linearGradient>
+    <linearGradient
+       id="linearGradient7305">
+      <stop
+         style="stop-color:#ffffff;stop-opacity:1"
+         offset="0"
+         id="stop7307" />
+      <stop
+         id="stop7313"
+         offset="0.20971029"
+         style="stop-color:#ffffff;stop-opacity:0;" />
+      <stop
+         style="stop-color:#ffffff;stop-opacity:0.81065089;"
+         offset="0.34936365"
+         id="stop7329" />
+      <stop
+         id="stop7321"
+         offset="0.42850056"
+         style="stop-color:#ffffff;stop-opacity:0;" />
+      <stop
+         style="stop-color:#ffffff;stop-opacity:1;"
+         offset="0.52134049"
+         id="stop7323" />
+      <stop
+         id="stop7317"
+         offset="0.55746967"
+         style="stop-color:#ffffff;stop-opacity:0;" />
+      <stop
+         style="stop-color:#ffffff;stop-opacity:0.56804734;"
+         offset="0.71001518"
+         id="stop7319" />
+      <stop
+         id="stop7416"
+         offset="0.74394959"
+         style="stop-color:#ffffff;stop-opacity:0;" />
+      <stop
+         style="stop-color:#ffffff;stop-opacity:0"
+         offset="1"
+         id="stop7309" />
+    </linearGradient>
+    <linearGradient
+       id="linearGradient7344">
+      <stop
+         id="stop7346"
+         offset="0"
+         style="stop-color:#ffffff;stop-opacity:1;" />
+      <stop
+         id="stop7348"
+         offset="1"
+         style="stop-color:#3465a4;stop-opacity:1;" />
+    </linearGradient>
+    <linearGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient7577"
+       id="linearGradient8208"
+       gradientUnits="userSpaceOnUse"
+       gradientTransform="matrix(-1,0,0,1,-152,0)"
+       x1="-77.711723"
+       y1="13.246527"
+       x2="-74.288277"
+       y2="26.023027" />
+    <radialGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient7344"
+       id="radialGradient8210"
+       gradientUnits="userSpaceOnUse"
+       gradientTransform="matrix(2.2246612,0,0,2.605516,-356.62956,-51.421571)"
+       cx="28.541149"
+       cy="31.678772"
+       fx="28.541149"
+       fy="31.678772"
+       r="12.000001" />
+    <radialGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient7344"
+       id="radialGradient8212"
+       gradientUnits="userSpaceOnUse"
+       gradientTransform="matrix(-1.9143326,0,0,1.5917714,100.35131,1.6193442e-2)"
+       cx="38.40033"
+       cy="17.833462"
+       fx="38.40033"
+       fy="17.833462"
+       r="13.55237" />
+    <radialGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient7344"
+       id="radialGradient8214"
+       gradientUnits="userSpaceOnUse"
+       gradientTransform="matrix(-1.9143326,0,0,1.5917714,100.35131,1.6193442e-2)"
+       cx="38.204437"
+       cy="17.597876"
+       fx="38.204437"
+       fy="17.597876"
+       r="13.55237" />
+    <linearGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient7305"
+       id="linearGradient8216"
+       gradientUnits="userSpaceOnUse"
+       x1="49.683426"
+       y1="10.023315"
+       x2="98.316566"
+       y2="38.101673" />
+    <radialGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient7344"
+       id="radialGradient11947"
+       gradientUnits="userSpaceOnUse"
+       gradientTransform="matrix(2.2246612,0,0,2.605516,-356.62956,-51.421571)"
+       cx="28.541149"
+       cy="31.678772"
+       fx="28.541149"
+       fy="31.678772"
+       r="12.000001" />
+    <radialGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient7344"
+       id="radialGradient11949"
+       gradientUnits="userSpaceOnUse"
+       gradientTransform="matrix(-1.9143326,0,0,1.5917714,100.35131,1.6193442e-2)"
+       cx="38.40033"
+       cy="17.833462"
+       fx="38.40033"
+       fy="17.833462"
+       r="13.55237" />
+    <radialGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient7344"
+       id="radialGradient11951"
+       gradientUnits="userSpaceOnUse"
+       gradientTransform="matrix(-1.9143326,0,0,1.5917714,100.35131,1.6193442e-2)"
+       cx="38.204437"
+       cy="17.597876"
+       fx="38.204437"
+       fy="17.597876"
+       r="13.55237" />
+    <linearGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient7305"
+       id="linearGradient11953"
+       gradientUnits="userSpaceOnUse"
+       x1="49.683426"
+       y1="10.023315"
+       x2="98.316566"
+       y2="38.101673" />
+    <radialGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient7344"
+       id="radialGradient11964"
+       gradientUnits="userSpaceOnUse"
+       gradientTransform="matrix(2.2246612,0,0,2.605516,-56.62956,-51.421571)"
+       cx="28.541149"
+       cy="31.678772"
+       fx="28.541149"
+       fy="31.678772"
+       r="12.000001" />
+    <radialGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient7344"
+       id="radialGradient11966"
+       gradientUnits="userSpaceOnUse"
+       gradientTransform="matrix(-1.9143326,0,0,1.5917714,100.35131,1.6193442e-2)"
+       cx="38.204437"
+       cy="17.597876"
+       fx="38.204437"
+       fy="17.597876"
+       r="13.55237" />
+    <radialGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient7344"
+       id="radialGradient11970"
+       gradientUnits="userSpaceOnUse"
+       gradientTransform="matrix(1.9143326,0,0,1.5917714,-52.35131,1.6193442e-2)"
+       cx="38.204437"
+       cy="17.597876"
+       fx="38.204437"
+       fy="17.597876"
+       r="13.55237" />
+    <radialGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient7344"
+       id="radialGradient12481"
+       gradientUnits="userSpaceOnUse"
+       gradientTransform="matrix(-1.9143326,0,0,1.5917714,100.35131,1.6193442e-2)"
+       cx="38.40033"
+       cy="17.833462"
+       fx="38.40033"
+       fy="17.833462"
+       r="13.55237" />
+    <radialGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient7344"
+       id="radialGradient12485"
+       gradientUnits="userSpaceOnUse"
+       gradientTransform="matrix(1.9143326,0,0,1.5917714,-34.35131,1.6193442e-2)"
+       cx="38.40033"
+       cy="17.833462"
+       fx="38.40033"
+       fy="17.833462"
+       r="13.55237" />
+  </defs>
+  <sodipodi:namedview
+     id="base"
+     pagecolor="#ffffff"
+     bordercolor="#afafaf"
+     borderopacity="1"
+     gridtolerance="10000"
+     guidetolerance="10"
+     objecttolerance="10"
+     inkscape:pageopacity="0"
+     inkscape:pageshadow="2"
+     inkscape:zoom="16"
+     inkscape:cx="29.689419"
+     inkscape:cy="24.96993"
+     inkscape:document-units="px"
+     inkscape:current-layer="layer1"
+     width="48px"
+     height="48px"
+     inkscape:showpageshadow="false"
+     inkscape:window-width="1364"
+     inkscape:window-height="846"
+     inkscape:window-x="0"
+     inkscape:window-y="0"
+     showgrid="false"
+     inkscape:grid-points="true"
+     showborder="true"
+     showguides="false"
+     inkscape:guide-bbox="true"
+     borderlayer="true">
+    <sodipodi:guide
+       orientation="horizontal"
+       position="13.125"
+       id="guide7377" />
+    <sodipodi:guide
+       orientation="horizontal"
+       position="5.4800776"
+       id="guide7379" />
+    <sodipodi:guide
+       orientation="horizontal"
+       position="35"
+       id="guide7492" />
+    <sodipodi:guide
+       orientation="horizontal"
+       position="48"
+       id="guide7046" />
+    <sodipodi:guide
+       orientation="horizontal"
+       position="-17.5"
+       id="guide7233" />
+    <sodipodi:guide
+       orientation="horizontal"
+       position="-29"
+       id="guide7235" />
+    <sodipodi:guide
+       orientation="horizontal"
+       position="22.097087"
+       id="guide7556" />
+    <sodipodi:guide
+       orientation="vertical"
+       position="-76.125"
+       id="guide7644" />
+    <sodipodi:guide
+       orientation="vertical"
+       position="-26.125"
+       id="guide7646" />
+    <sodipodi:guide
+       orientation="vertical"
+       position="24"
+       id="guide7648" />
+    <sodipodi:guide
+       orientation="vertical"
+       position="-125.28125"
+       id="guide7665" />
+    <sodipodi:guide
+       orientation="vertical"
+       position="-175.125"
+       id="guide7667" />
+    <sodipodi:guide
+       orientation="vertical"
+       position="-225.83223"
+       id="guide7685" />
+    <sodipodi:guide
+       orientation="vertical"
+       position="-326.06462"
+       id="guide7695" />
+    <inkscape:grid
+       id="GridFromPre046Settings"
+       type="xygrid"
+       originx="0px"
+       originy="0px"
+       spacingx="0.5px"
+       spacingy="0.5px"
+       color="#0000ff"
+       empcolor="#0000ff"
+       opacity="0.2"
+       empopacity="0.4"
+       empspacing="2" />
+  </sodipodi:namedview>
+  <metadata
+     id="metadata7859">
+    <rdf:RDF>
+      <cc:Work
+         rdf:about="">
+        <dc:format>image/svg+xml</dc:format>
+        <dc:type
+           rdf:resource="http://purl.org/dc/dcmitype/StillImage" />
+        <dc:creator>
+          <cc:Agent>
+            <dc:title>Lapo Calamandrei</dc:title>
+          </cc:Agent>
+        </dc:creator>
+        <dc:source />
+        <cc:license
+           rdf:resource="http://creativecommons.org/licenses/GPL/2.0/" />
+        <dc:title>Previous Song</dc:title>
+        <dc:subject>
+          <rdf:Bag>
+            <rdf:li>skip</rdf:li>
+            <rdf:li>backward</rdf:li>
+            <rdf:li>previous</rdf:li>
+            <rdf:li>media</rdf:li>
+          </rdf:Bag>
+        </dc:subject>
+      </cc:Work>
+      <cc:License
+         rdf:about="http://creativecommons.org/licenses/GPL/2.0/">
+        <cc:permits
+           rdf:resource="http://web.resource.org/cc/Reproduction" />
+        <cc:permits
+           rdf:resource="http://web.resource.org/cc/Distribution" />
+        <cc:requires
+           rdf:resource="http://web.resource.org/cc/Notice" />
+        <cc:permits
+           rdf:resource="http://web.resource.org/cc/DerivativeWorks" />
+        <cc:requires
+           rdf:resource="http://web.resource.org/cc/ShareAlike" />
+        <cc:requires
+           rdf:resource="http://web.resource.org/cc/SourceCode" />
+      </cc:License>
+    </rdf:RDF>
+  </metadata>
+  <g
+     inkscape:label="Layer 1"
+     inkscape:groupmode="layer"
+     id="layer1">
+    <path
+       sodipodi:type="inkscape:offset"
+       inkscape:radius="1.5032517"
+       inkscape:original="M -59.9375 12.5 C -60.243545 12.5 -60.5 12.756455 -60.5 13.0625 L -60.5 23.6875 L -78.5 13 L -78.5 23.6875 L -96.5 13 L -96.5 35 L -78.5 24.3125 L -78.5 35 L -60.5 24.3125 L -60.5 34.9375 C -60.5 35.243545 -60.243543 35.500002 -59.9375 35.5 L -56.0625 35.5 C -55.756455 35.5 -55.499999 35.243545 -55.5 34.9375 L -55.5 13.0625 C -55.5 12.756455 -55.756456 12.5 -56.0625 12.5 L -59.9375 12.5 z "
+       style="opacity:0.4;fill:url(#linearGradient8208);fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:1;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0.69999992;stroke-opacity:1"
+       id="path7687"
+       d="M -59.9375,11 C -61.083327,11 -62,11.916673 -62,13.0625 L -62,21.0625 L -77.71875,11.71875 C -78.182222,11.438527 -78.760596,11.429252 -79.232814,11.694471 C -79.705033,11.959689 -79.998098,12.458403 -80,13 L -80,21.0625 L -95.71875,11.71875 C -96.182222,11.438527 -96.760596,11.429252 -97.232814,11.694471 C -97.705033,11.959689 -97.998098,12.458403 -98,13 L -98,35 C -97.998098,35.541597 -97.705033,36.040311 -97.232814,36.305529 C -96.760596,36.570748 -96.182222,36.561473 -95.71875,36.28125 L -80,26.9375 L -80,35 C -79.998098,35.541597 -79.705033,36.040311 -79.232814,36.305529 C -78.760596,36.570748 -78.182222,36.561473 -77.71875,36.28125 L -62,26.9375 L -62,34.9375 C -62,36.083333 -61.083342,37.000007 -59.9375,37 L -56.0625,37 C -54.916673,37 -53.999996,36.083333 -54,34.9375 L -54,13.0625 C -54,11.91667 -54.916672,11 -56.0625,11 L -59.9375,11 z"
+       transform="matrix(-1,0,0,1,-52,0)" />
+    <rect
+       style="fill:url(#radialGradient11964);fill-opacity:1;fill-rule:evenodd;stroke:#204a87;stroke-width:1;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0.69999992000000000;stroke-opacity:1"
+       id="rect7736"
+       width="4.9886603"
+       height="23.000002"
+       x="3.5113525"
+       y="12.5"
+       rx="0.55242717"
+       ry="0.55242717" />
+    <path
+       style="fill:url(#radialGradient12485);fill-opacity:1;fill-rule:evenodd;stroke:#204a87;stroke-width:0.99999994000000003;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dashoffset:0.69999992000000000;stroke-opacity:1"
+       d="M 44.5,35 L 44.5,13.000461 L 26.004233,24.010194 L 44.5,35 z"
+       id="path7946"
+       sodipodi:nodetypes="cccc" />
+    <path
+       sodipodi:type="inkscape:offset"
+       inkscape:radius="-1.0054175"
+       inkscape:original="M 21.5 13 L 21.5 35 L 40 24 L 21.5 13 z "
+       style="fill:none;fill-opacity:1;fill-rule:evenodd;stroke:#ffffff;stroke-width:0.99999994;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dashoffset:0.69999992;stroke-opacity:1"
+       id="path7948"
+       d="M 22.5,14.78125 L 22.5,33.21875 L 38.03125,24 L 22.5,14.78125 z"
+       transform="matrix(-1,0,0,1,66,0)" />
+    <path
+       style="fill:url(#radialGradient11970);fill-opacity:1;fill-rule:evenodd;stroke:#204a87;stroke-width:0.99999994000000003;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dashoffset:0.69999992000000000;stroke-opacity:1"
+       d="M 26.5,35 L 26.5,13.000461 L 8.004233,24.010194 L 26.5,35 z"
+       id="path7746"
+       sodipodi:nodetypes="cccc" />
+    <path
+       sodipodi:type="inkscape:offset"
+       inkscape:radius="-1.0054175"
+       inkscape:original="M 21.5 13 L 21.5 35 L 40 24 L 21.5 13 z "
+       style="fill:none;fill-opacity:1;fill-rule:evenodd;stroke:#ffffff;stroke-width:0.99999994;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dashoffset:0.69999992;stroke-opacity:1"
+       id="path7748"
+       d="M 22.5,14.78125 L 22.5,33.21875 L 38.03125,24 L 22.5,14.78125 z"
+       transform="matrix(-1,0,0,1,48,0)" />
+    <rect
+       style="fill:none;fill-opacity:1;fill-rule:evenodd;stroke:#ffffff;stroke-width:1;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0.69999992;stroke-opacity:1"
+       id="rect7750"
+       width="3.0097761"
+       height="21.000002"
+       x="4.5160522"
+       y="13.5"
+       rx="0"
+       ry="0" />
+    <path
+       sodipodi:type="inkscape:offset"
+       inkscape:radius="-0.49442077"
+       inkscape:original="M 54.0625 12.5 C 53.756455 12.5 53.5 12.756455 53.5 13.0625 L 53.5 34.9375 C 53.5 35.243545 53.756457 35.500002 54.0625 35.5 L 57.9375 35.5 C 58.243545 35.5 58.500001 35.243545 58.5 34.9375 L 58.5 24.3125 L 76.5 35 L 76.5 24.3125 L 94.5 35 L 94.5 13 L 76.5 23.6875 L 76.5 13 L 58.5 23.6875 L 58.5 13.0625 C 58.5 12.756455 58.243544 12.5 57.9375 12.5 L 54.0625 12.5 z "
+       style="opacity:0.15;fill:url(#linearGradient11953);fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:1;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0.69999992;stroke-opacity:1"
+       id="path6332"
+       d="M 54.0625,13 C 54.03266,13 54,13.03266 54,13.0625 L 54,34.9375 C 54,34.967338 54.032668,35 54.0625,35 L 57.9375,35 C 57.96734,35 58,34.967338 58,34.9375 L 58,24.3125 C 58.003842,24.196921 58.048073,24.086345 58.125,24 C 58.048073,23.913655 58.003842,23.803079 58,23.6875 L 58,13.0625 C 58,13.032661 57.967338,13 57.9375,13 L 54.0625,13 z M 76,13.875 L 58.96875,24 L 76,34.125 L 76,24.3125 C 76.003842,24.196921 76.048073,24.086345 76.125,24 C 76.048073,23.913655 76.003842,23.803079 76,23.6875 L 76,13.875 z M 94,13.875 L 76.96875,24 L 94,34.125 L 94,13.875 z"
+       transform="matrix(1,0,0,-1,-50,48)" />
+  </g>
+</svg>

Added: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_icons/scalable/last-frame.svg
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_icons/scalable/last-frame.svg	2009-07-23 18:18:50 UTC (rev 5134)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_icons/scalable/last-frame.svg	2009-07-23 18:18:52 UTC (rev 5135)
@@ -0,0 +1,446 @@
+<?xml version="1.0" encoding="UTF-8" standalone="no"?>
+<!-- Created with Inkscape (http://www.inkscape.org/) -->
+<svg
+   xmlns:dc="http://purl.org/dc/elements/1.1/"
+   xmlns:cc="http://creativecommons.org/ns#"
+   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
+   xmlns:svg="http://www.w3.org/2000/svg"
+   xmlns="http://www.w3.org/2000/svg"
+   xmlns:xlink="http://www.w3.org/1999/xlink"
+   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"
+   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"
+   width="48"
+   height="48"
+   id="svg7854"
+   sodipodi:version="0.32"
+   inkscape:version="0.46"
+   version="1.0"
+   sodipodi:docbase="/home/dobey/Projects/gnome-icon-theme/scalable/actions"
+   sodipodi:docname="last-frame.svg"
+   inkscape:output_extension="org.inkscape.output.svg.inkscape"
+   inkscape:export-filename="/data/Avidemux/nove ikony/last-frame.png"
+   inkscape:export-xdpi="76.153847"
+   inkscape:export-ydpi="76.153847">
+  <defs
+     id="defs7856">
+    <inkscape:perspective
+       sodipodi:type="inkscape:persp3d"
+       inkscape:vp_x="0 : 24 : 1"
+       inkscape:vp_y="0 : 1000 : 0"
+       inkscape:vp_z="48 : 24 : 1"
+       inkscape:persp3d-origin="24 : 16 : 1"
+       id="perspective12633" />
+    <linearGradient
+       id="linearGradient7577">
+      <stop
+         style="stop-color:#000000;stop-opacity:0.3137255;"
+         offset="0"
+         id="stop7579" />
+      <stop
+         style="stop-color:#ffffff;stop-opacity:1"
+         offset="1"
+         id="stop7581" />
+    </linearGradient>
+    <linearGradient
+       id="linearGradient7305">
+      <stop
+         style="stop-color:#ffffff;stop-opacity:1"
+         offset="0"
+         id="stop7307" />
+      <stop
+         id="stop7313"
+         offset="0.20971029"
+         style="stop-color:#ffffff;stop-opacity:0;" />
+      <stop
+         style="stop-color:#ffffff;stop-opacity:0.81065089;"
+         offset="0.34936365"
+         id="stop7329" />
+      <stop
+         id="stop7321"
+         offset="0.42850056"
+         style="stop-color:#ffffff;stop-opacity:0;" />
+      <stop
+         style="stop-color:#ffffff;stop-opacity:1;"
+         offset="0.52134049"
+         id="stop7323" />
+      <stop
+         id="stop7317"
+         offset="0.55746967"
+         style="stop-color:#ffffff;stop-opacity:0;" />
+      <stop
+         style="stop-color:#ffffff;stop-opacity:0.56804734;"
+         offset="0.71001518"
+         id="stop7319" />
+      <stop
+         id="stop7416"
+         offset="0.74394959"
+         style="stop-color:#ffffff;stop-opacity:0;" />
+      <stop
+         style="stop-color:#ffffff;stop-opacity:0"
+         offset="1"
+         id="stop7309" />
+    </linearGradient>
+    <linearGradient
+       id="linearGradient7344">
+      <stop
+         id="stop7346"
+         offset="0"
+         style="stop-color:#ffffff;stop-opacity:1;" />
+      <stop
+         id="stop7348"
+         offset="1"
+         style="stop-color:#3465a4;stop-opacity:1;" />
+    </linearGradient>
+    <linearGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient7577"
+       id="linearGradient7762"
+       gradientUnits="userSpaceOnUse"
+       x1="-77.711723"
+       y1="13.246527"
+       x2="-74.288277"
+       y2="26.023027" />
+    <radialGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient7344"
+       id="radialGradient7764"
+       gradientUnits="userSpaceOnUse"
+       gradientTransform="matrix(2.2246612,0,0,2.3034327,-120.62956,-41.851943)"
+       cx="28.541149"
+       cy="31.678772"
+       fx="28.541149"
+       fy="31.678772"
+       r="12.000001" />
+    <radialGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient7344"
+       id="radialGradient7766"
+       gradientUnits="userSpaceOnUse"
+       gradientTransform="matrix(1.8811669,0,0,1.5641941,82.169231,0.3959845)"
+       cx="36.455379"
+       cy="17.414564"
+       fx="36.455379"
+       fy="17.414564"
+       r="13.55237" />
+    <radialGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient7344"
+       id="radialGradient7768"
+       gradientUnits="userSpaceOnUse"
+       gradientTransform="matrix(1.8811669,0,0,1.5641941,82.169231,0.3959845)"
+       cx="36.455379"
+       cy="17.414564"
+       fx="36.455379"
+       fy="17.414564"
+       r="13.55237" />
+    <linearGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient7305"
+       id="linearGradient7770"
+       gradientUnits="userSpaceOnUse"
+       x1="0.17084506"
+       y1="10.331141"
+       x2="47.954166"
+       y2="37.918854" />
+    <radialGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient7344"
+       id="radialGradient12646"
+       gradientUnits="userSpaceOnUse"
+       gradientTransform="matrix(2.2246612,0,0,2.3034327,-120.62956,-41.851943)"
+       cx="28.541149"
+       cy="31.678772"
+       fx="28.541149"
+       fy="31.678772"
+       r="12.000001" />
+    <radialGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient7344"
+       id="radialGradient12648"
+       gradientUnits="userSpaceOnUse"
+       gradientTransform="matrix(1.8811669,0,0,1.5641941,82.169231,0.3959845)"
+       cx="36.455379"
+       cy="17.414564"
+       fx="36.455379"
+       fy="17.414564"
+       r="13.55237" />
+    <radialGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient7344"
+       id="radialGradient12650"
+       gradientUnits="userSpaceOnUse"
+       gradientTransform="matrix(1.8811669,0,0,1.5641941,82.169231,0.3959845)"
+       cx="36.455379"
+       cy="17.414564"
+       fx="36.455379"
+       fy="17.414564"
+       r="13.55237" />
+    <linearGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient7305"
+       id="linearGradient12652"
+       gradientUnits="userSpaceOnUse"
+       x1="0.17084506"
+       y1="10.331141"
+       x2="47.954166"
+       y2="37.918854" />
+    <radialGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient7344"
+       id="radialGradient12663"
+       gradientUnits="userSpaceOnUse"
+       gradientTransform="matrix(2.2246612,0,0,2.3034327,-20.62956,-41.851943)"
+       cx="28.541149"
+       cy="31.678772"
+       fx="28.541149"
+       fy="31.678772"
+       r="12.000001" />
+    <radialGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient7344"
+       id="radialGradient12665"
+       gradientUnits="userSpaceOnUse"
+       gradientTransform="matrix(1.8811669,0,0,1.5641941,82.169231,0.3959845)"
+       cx="36.455379"
+       cy="17.414564"
+       fx="36.455379"
+       fy="17.414564"
+       r="13.55237" />
+    <radialGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient7344"
+       id="radialGradient12669"
+       gradientUnits="userSpaceOnUse"
+       gradientTransform="matrix(1.8811669,0,0,1.5641941,-37.830769,0.3959845)"
+       cx="36.455379"
+       cy="17.414564"
+       fx="36.455379"
+       fy="17.414564"
+       r="13.55237" />
+    <radialGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient7344"
+       id="radialGradient13180"
+       gradientUnits="userSpaceOnUse"
+       gradientTransform="matrix(1.8811669,0,0,1.5641941,82.169231,0.3959845)"
+       cx="36.455379"
+       cy="17.414564"
+       fx="36.455379"
+       fy="17.414564"
+       r="13.55237" />
+    <radialGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient7344"
+       id="radialGradient13184"
+       gradientUnits="userSpaceOnUse"
+       gradientTransform="matrix(1.8811669,0,0,1.5641941,-55.830769,0.3959845)"
+       cx="36.455379"
+       cy="17.414564"
+       fx="36.455379"
+       fy="17.414564"
+       r="13.55237" />
+  </defs>
+  <sodipodi:namedview
+     id="base"
+     pagecolor="#ffffff"
+     bordercolor="#afafaf"
+     borderopacity="1"
+     gridtolerance="10000"
+     guidetolerance="10"
+     objecttolerance="10"
+     inkscape:pageopacity="0"
+     inkscape:pageshadow="2"
+     inkscape:zoom="16"
+     inkscape:cx="30.927361"
+     inkscape:cy="19.666629"
+     inkscape:document-units="px"
+     inkscape:current-layer="layer1"
+     width="48px"
+     height="48px"
+     inkscape:showpageshadow="false"
+     inkscape:window-width="1419"
+     inkscape:window-height="846"
+     inkscape:window-x="8"
+     inkscape:window-y="0"
+     showgrid="false"
+     inkscape:grid-points="true"
+     showborder="true"
+     showguides="false"
+     inkscape:guide-bbox="true"
+     borderlayer="true">
+    <sodipodi:guide
+       orientation="horizontal"
+       position="13.125"
+       id="guide7377" />
+    <sodipodi:guide
+       orientation="horizontal"
+       position="5.4800776"
+       id="guide7379" />
+    <sodipodi:guide
+       orientation="horizontal"
+       position="35"
+       id="guide7492" />
+    <sodipodi:guide
+       orientation="horizontal"
+       position="48"
+       id="guide7046" />
+    <sodipodi:guide
+       orientation="horizontal"
+       position="-17.5"
+       id="guide7233" />
+    <sodipodi:guide
+       orientation="horizontal"
+       position="-29"
+       id="guide7235" />
+    <sodipodi:guide
+       orientation="horizontal"
+       position="22.097087"
+       id="guide7556" />
+    <sodipodi:guide
+       orientation="vertical"
+       position="-76.125"
+       id="guide7644" />
+    <sodipodi:guide
+       orientation="vertical"
+       position="-26.125"
+       id="guide7646" />
+    <sodipodi:guide
+       orientation="vertical"
+       position="24"
+       id="guide7648" />
+    <sodipodi:guide
+       orientation="vertical"
+       position="-125.28125"
+       id="guide7665" />
+    <sodipodi:guide
+       orientation="vertical"
+       position="-175.125"
+       id="guide7667" />
+    <sodipodi:guide
+       orientation="vertical"
+       position="-225.83223"
+       id="guide7685" />
+    <sodipodi:guide
+       orientation="vertical"
+       position="-326.06462"
+       id="guide7695" />
+    <inkscape:grid
+       id="GridFromPre046Settings"
+       type="xygrid"
+       originx="0px"
+       originy="0px"
+       spacingx="0.5px"
+       spacingy="0.5px"
+       color="#0000ff"
+       empcolor="#0000ff"
+       opacity="0.2"
+       empopacity="0.4"
+       empspacing="2" />
+  </sodipodi:namedview>
+  <metadata
+     id="metadata7859">
+    <rdf:RDF>
+      <cc:Work
+         rdf:about="">
+        <dc:format>image/svg+xml</dc:format>
+        <dc:type
+           rdf:resource="http://purl.org/dc/dcmitype/StillImage" />
+        <dc:creator>
+          <cc:Agent>
+            <dc:title>Lapo Calamandrei</dc:title>
+          </cc:Agent>
+        </dc:creator>
+        <dc:source />
+        <cc:license
+           rdf:resource="http://creativecommons.org/licenses/GPL/2.0/" />
+        <dc:title>Next Song</dc:title>
+        <dc:subject>
+          <rdf:Bag>
+            <rdf:li>skip</rdf:li>
+            <rdf:li>forward</rdf:li>
+            <rdf:li>next</rdf:li>
+          </rdf:Bag>
+        </dc:subject>
+      </cc:Work>
+      <cc:License
+         rdf:about="http://creativecommons.org/licenses/GPL/2.0/">
+        <cc:permits
+           rdf:resource="http://web.resource.org/cc/Reproduction" />
+        <cc:permits
+           rdf:resource="http://web.resource.org/cc/Distribution" />
+        <cc:requires
+           rdf:resource="http://web.resource.org/cc/Notice" />
+        <cc:permits
+           rdf:resource="http://web.resource.org/cc/DerivativeWorks" />
+        <cc:requires
+           rdf:resource="http://web.resource.org/cc/ShareAlike" />
+        <cc:requires
+           rdf:resource="http://web.resource.org/cc/SourceCode" />
+      </cc:License>
+    </rdf:RDF>
+  </metadata>
+  <g
+     inkscape:label="Layer 1"
+     inkscape:groupmode="layer"
+     id="layer1">
+    <path
+       sodipodi:type="inkscape:offset"
+       inkscape:radius="1.5032517"
+       inkscape:original="M -59.9375 12.5 C -60.243545 12.5 -60.5 12.756455 -60.5 13.0625 L -60.5 23.6875 L -78.5 13 L -78.5 23.6875 L -96.5 13 L -96.5 35 L -78.5 24.3125 L -78.5 35 L -60.5 24.3125 L -60.5 34.9375 C -60.5 35.243545 -60.243543 35.500002 -59.9375 35.5 L -56.0625 35.5 C -55.756455 35.5 -55.499999 35.243545 -55.5 34.9375 L -55.5 13.0625 C -55.5 12.756455 -55.756456 12.5 -56.0625 12.5 L -59.9375 12.5 z "
+       style="opacity:0.4;fill:url(#linearGradient7762);fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:1;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0.69999992;stroke-opacity:1"
+       id="path7638"
+       d="M -59.9375,11 C -61.083327,11 -62,11.916673 -62,13.0625 L -62,21.0625 L -77.71875,11.71875 C -78.182222,11.438527 -78.760596,11.429252 -79.232814,11.694471 C -79.705033,11.959689 -79.998098,12.458403 -80,13 L -80,21.0625 L -95.71875,11.71875 C -96.182222,11.438527 -96.760596,11.429252 -97.232814,11.694471 C -97.705033,11.959689 -97.998098,12.458403 -98,13 L -98,35 C -97.998098,35.541597 -97.705033,36.040311 -97.232814,36.305529 C -96.760596,36.570748 -96.182222,36.561473 -95.71875,36.28125 L -80,26.9375 L -80,35 C -79.998098,35.541597 -79.705033,36.040311 -79.232814,36.305529 C -78.760596,36.570748 -78.182222,36.561473 -77.71875,36.28125 L -62,26.9375 L -62,34.9375 C -62,36.083333 -61.083342,37.000007 -59.9375,37 L -56.0625,37 C -54.916673,37 -53.999996,36.083333 -54,34.9375 L -54,13.0625 C -54,11.91667 -54.916672,11 -56.0625,11 L -59.9375,11 z"
+       transform="translate(100,0)" />
+    <rect
+       style="fill:url(#radialGradient12663);fill-opacity:1;fill-rule:evenodd;stroke:#204a87;stroke-width:1;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0.69999992000000000;stroke-opacity:1"
+       id="rect7623"
+       width="4.9886603"
+       height="23.000002"
+       x="39.511337"
+       y="12.5"
+       rx="0.55242717"
+       ry="0.55242717" />
+    <path
+       style="fill:url(#radialGradient13184);fill-opacity:1;fill-rule:evenodd;stroke:#204a87;stroke-width:0.99999994000000003;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dashoffset:0.69999992000000000;stroke-opacity:1"
+       d="M 3.5,35 L 3.5,13.000461 L 21.99577,24.010194 L 3.5,35 z"
+       id="path8005"
+       sodipodi:nodetypes="cccc" />
+    <path
+       sodipodi:type="inkscape:offset"
+       inkscape:radius="-1.0054175"
+       inkscape:original="M 21.5 13 L 21.5 35 L 40 24 L 21.5 13 z "
+       style="fill:none;fill-opacity:1;fill-rule:evenodd;stroke:#ffffff;stroke-width:0.99999994;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dashoffset:0.69999992;stroke-opacity:1"
+       id="path8007"
+       d="M 22.5,14.78125 L 22.5,33.21875 L 38.03125,24 L 22.5,14.78125 z"
+       transform="translate(-18,0)" />
+    <path
+       style="fill:url(#radialGradient12669);fill-opacity:1;fill-rule:evenodd;stroke:#204a87;stroke-width:0.99999994000000003;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dashoffset:0.69999992000000000;stroke-opacity:1"
+       d="M 21.5,35 L 21.5,13.000461 L 39.99577,24.010194 L 21.5,35 z"
+       id="path7621"
+       sodipodi:nodetypes="cccc" />
+    <path
+       sodipodi:type="inkscape:offset"
+       inkscape:radius="-1.0054175"
+       inkscape:original="M 21.5 13 L 21.5 35 L 40 24 L 21.5 13 z "
+       style="fill:none;fill-opacity:1;fill-rule:evenodd;stroke:#ffffff;stroke-width:0.99999994;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dashoffset:0.69999992;stroke-opacity:1"
+       id="path7627"
+       d="M 22.5,14.78125 L 22.5,33.21875 L 38.03125,24 L 22.5,14.78125 z" />
+    <rect
+       style="fill:none;fill-opacity:1;fill-rule:evenodd;stroke:#ffffff;stroke-width:1;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0.69999992;stroke-opacity:1"
+       id="rect7625"
+       width="3.0097761"
+       height="21.000002"
+       x="40.516052"
+       y="13.5"
+       rx="0"
+       ry="0" />
+    <path
+       sodipodi:type="inkscape:offset"
+       inkscape:radius="-0.5"
+       inkscape:original="M 40.0625 12.5 C 39.756455 12.5 39.5 12.756455 39.5 13.0625 L 39.5 23.6875 L 21.5 13 L 21.5 23.6875 L 3.5 13 L 3.5 35 L 21.5 24.3125 L 21.5 35 L 39.5 24.3125 L 39.5 34.9375 C 39.5 35.243545 39.756457 35.500002 40.0625 35.5 L 43.9375 35.5 C 44.243545 35.5 44.500001 35.243545 44.5 34.9375 L 44.5 13.0625 C 44.5 12.756455 44.243544 12.5 43.9375 12.5 L 40.0625 12.5 z "
+       style="opacity:0.15;fill:url(#linearGradient12652);fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:1;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0.69999992;stroke-opacity:1"
+       id="path7386"
+       d="M 40.0625,13 C 40.035777,13 40,13.035777 40,13.0625 L 40,23.6875 C 39.995694,23.802981 39.951524,23.913406 39.875,24 C 39.951524,24.086594 39.995694,24.197019 40,24.3125 L 40,34.9375 C 40,34.964221 40.035784,35 40.0625,35 L 43.9375,35 C 43.964223,35 44,34.964221 44,34.9375 L 44,13.0625 C 44,13.035778 43.964221,13 43.9375,13 L 40.0625,13 z M 4,13.875 L 4,34.125 L 21.03125,24 L 4,13.875 z M 22,13.875 L 22,23.6875 C 21.995694,23.802981 21.951524,23.913406 21.875,24 C 21.951524,24.086594 21.995694,24.197019 22,24.3125 L 22,34.125 L 39.03125,24 L 22,13.875 z"
+       transform="matrix(1,0,0,-1,0,48)" />
+  </g>
+</svg>

Added: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_icons/scalable/markA.svg
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_icons/scalable/markA.svg	2009-07-23 18:18:50 UTC (rev 5134)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_icons/scalable/markA.svg	2009-07-23 18:18:52 UTC (rev 5135)
@@ -0,0 +1,347 @@
+<?xml version="1.0" encoding="UTF-8" standalone="no"?>
+<!-- Created with Inkscape (http://www.inkscape.org/) -->
+<svg
+   xmlns:dc="http://purl.org/dc/elements/1.1/"
+   xmlns:cc="http://creativecommons.org/ns#"
+   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
+   xmlns:svg="http://www.w3.org/2000/svg"
+   xmlns="http://www.w3.org/2000/svg"
+   xmlns:xlink="http://www.w3.org/1999/xlink"
+   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"
+   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"
+   width="744.09448819"
+   height="1052.3622047"
+   id="svg2"
+   inkscape:label="Pozad??"
+   sodipodi:version="0.32"
+   inkscape:version="0.46"
+   sodipodi:docname="markA.svg"
+   inkscape:output_extension="org.inkscape.output.svg.inkscape"
+   inkscape:export-filename="/data/Avidemux/nove ikony/markA.png"
+   inkscape:export-xdpi="4.4000001"
+   inkscape:export-ydpi="4.4000001">
+  <defs
+     id="defs10463">
+    <linearGradient
+       id="linearGradient11899">
+      <stop
+         id="stop11901"
+         offset="0"
+         style="stop-color:#ffffff;stop-opacity:1;" />
+      <stop
+         id="stop11903"
+         offset="1"
+         style="stop-color:#d1940c;stop-opacity:1;" />
+    </linearGradient>
+    <linearGradient
+       id="linearGradient7305">
+      <stop
+         style="stop-color:#ffffff;stop-opacity:1"
+         offset="0"
+         id="stop7307" />
+      <stop
+         id="stop7313"
+         offset="0.20971029"
+         style="stop-color:#ffffff;stop-opacity:0;" />
+      <stop
+         style="stop-color:#ffffff;stop-opacity:0.81065089;"
+         offset="0.34936365"
+         id="stop7329" />
+      <stop
+         id="stop7321"
+         offset="0.42850056"
+         style="stop-color:#ffffff;stop-opacity:0;" />
+      <stop
+         style="stop-color:#ffffff;stop-opacity:1;"
+         offset="0.52134049"
+         id="stop7323" />
+      <stop
+         id="stop7317"
+         offset="0.55746967"
+         style="stop-color:#ffffff;stop-opacity:0;" />
+      <stop
+         style="stop-color:#ffffff;stop-opacity:0.56804734;"
+         offset="0.71001518"
+         id="stop7319" />
+      <stop
+         id="stop7416"
+         offset="0.74394959"
+         style="stop-color:#ffffff;stop-opacity:0;" />
+      <stop
+         style="stop-color:#ffffff;stop-opacity:0"
+         offset="1"
+         id="stop7309" />
+    </linearGradient>
+    <linearGradient
+       id="linearGradient11341">
+      <stop
+         style="stop-color:#5c3900;stop-opacity:1;"
+         offset="0"
+         id="stop11343" />
+      <stop
+         style="stop-color:#000000;stop-opacity:0;"
+         offset="1"
+         id="stop11345" />
+    </linearGradient>
+    <linearGradient
+       id="linearGradient11319">
+      <stop
+         id="stop11321"
+         offset="0"
+         style="stop-color:#505050;stop-opacity:1;" />
+      <stop
+         id="stop11323"
+         offset="1"
+         style="stop-color:#000000;stop-opacity:0;" />
+    </linearGradient>
+    <linearGradient
+       id="linearGradient11037">
+      <stop
+         style="stop-color:#000000;stop-opacity:0.3137255;"
+         offset="0"
+         id="stop11039" />
+      <stop
+         style="stop-color:#ffffff;stop-opacity:0;"
+         offset="1"
+         id="stop11041" />
+    </linearGradient>
+    <linearGradient
+       id="linearGradient11027">
+      <stop
+         style="stop-color:#ffffff;stop-opacity:1;"
+         offset="0"
+         id="stop11029" />
+      <stop
+         style="stop-color:#c17d11;stop-opacity:1;"
+         offset="1"
+         id="stop11031" />
+    </linearGradient>
+    <inkscape:perspective
+       sodipodi:type="inkscape:persp3d"
+       inkscape:vp_x="0 : 526.18109 : 1"
+       inkscape:vp_y="0 : 1000 : 0"
+       inkscape:vp_z="744.09448 : 526.18109 : 1"
+       inkscape:persp3d-origin="372.04724 : 350.78739 : 1"
+       id="perspective10469" />
+    <radialGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient11027"
+       id="radialGradient11033"
+       cx="276.34622"
+       cy="419.68188"
+       fx="276.34622"
+       fy="419.68188"
+       r="175"
+       gradientTransform="matrix(2.3832504,-2.9534346e-3,2.4211039e-3,1.9534537,-352.00676,-363.43041)"
+       gradientUnits="userSpaceOnUse" />
+    <linearGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient11037"
+       id="linearGradient11043"
+       x1="141.73424"
+       y1="132.41295"
+       x2="314.62921"
+       y2="285.69214"
+       gradientUnits="userSpaceOnUse"
+       gradientTransform="matrix(1.3888889,0,0,1,-1.9444445,0)" />
+    <linearGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient7305"
+       id="linearGradient11887"
+       x1="-134.90868"
+       y1="517.01703"
+       x2="691.8833"
+       y2="66.489014"
+       gradientUnits="userSpaceOnUse" />
+    <radialGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient11027"
+       id="radialGradient11907"
+       gradientUnits="userSpaceOnUse"
+       gradientTransform="matrix(2.3900262,1.811402e-3,-1.3096015e-3,1.7282381,18.094688,-259.82002)"
+       cx="272.87891"
+       cy="402.86609"
+       fx="272.87891"
+       fy="402.86609"
+       r="175" />
+    <linearGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient7305"
+       id="linearGradient11917"
+       gradientUnits="userSpaceOnUse"
+       x1="-134.90868"
+       y1="517.01703"
+       x2="691.8833"
+       y2="66.489014"
+       gradientTransform="translate(370,0)" />
+    <linearGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient11341"
+       id="linearGradient11929"
+       x1="116.41742"
+       y1="346.30249"
+       x2="329.78152"
+       y2="346.30249"
+       gradientUnits="userSpaceOnUse" />
+    <filter
+       inkscape:collect="always"
+       id="filter11939"
+       x="-0.11188843"
+       width="1.2237769"
+       y="-0.11728426"
+       height="1.2345685">
+      <feGaussianBlur
+         inkscape:collect="always"
+         stdDeviation="9.9470732"
+         id="feGaussianBlur11941" />
+    </filter>
+    <linearGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient11341"
+       id="linearGradient11951"
+       gradientUnits="userSpaceOnUse"
+       x1="124.27416"
+       y1="299.16205"
+       x2="329.78152"
+       y2="454.3327" />
+    <linearGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient11341"
+       id="linearGradient14337"
+       gradientUnits="userSpaceOnUse"
+       x1="116.41742"
+       y1="346.30249"
+       x2="329.78152"
+       y2="346.30249" />
+    <linearGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient11341"
+       id="linearGradient14339"
+       gradientUnits="userSpaceOnUse"
+       x1="124.27416"
+       y1="299.16205"
+       x2="329.78152"
+       y2="454.3327" />
+  </defs>
+  <sodipodi:namedview
+     id="base"
+     pagecolor="#ffffff"
+     bordercolor="#666666"
+     borderopacity="1.0"
+     inkscape:pageopacity="0.0"
+     inkscape:pageshadow="2"
+     inkscape:zoom="0.72000003"
+     inkscape:cx="403.3219"
+     inkscape:cy="745.58538"
+     inkscape:document-units="px"
+     inkscape:current-layer="layer1"
+     showgrid="false"
+     inkscape:window-width="1440"
+     inkscape:window-height="850"
+     inkscape:window-x="0"
+     inkscape:window-y="0" />
+  <metadata
+     id="metadata10466">
+    <rdf:RDF>
+      <cc:Work
+         rdf:about="">
+        <dc:format>image/svg+xml</dc:format>
+        <dc:type
+           rdf:resource="http://purl.org/dc/dcmitype/StillImage" />
+      </cc:Work>
+    </rdf:RDF>
+  </metadata>
+  <g
+     inkscape:label="Vrstva 1"
+     inkscape:groupmode="layer"
+     id="layer1">
+    <rect
+       style="opacity:0.98900003;fill:none;fill-opacity:1;stroke:#ffffff;stroke-width:1;stroke-linecap:round;stroke-miterlimit:4;stroke-dasharray:1, 2;stroke-dashoffset:0;stroke-opacity:1"
+       id="rect10493"
+       width="108.57143"
+       height="108.57143"
+       x="57.142857"
+       y="208.07646" />
+    <rect
+       style="opacity:0.314;fill:url(#linearGradient11043);fill-opacity:1;stroke:none;stroke-width:1;stroke-linecap:round;stroke-miterlimit:4;stroke-dasharray:1.00000003999999998, 2.00000007999999996;stroke-dashoffset:0;stroke-opacity:1"
+       id="rect11035"
+       width="625"
+       height="450"
+       x="5"
+       y="127.36218"
+       rx="25"
+       ry="25" />
+    <g
+       id="g11184"
+       transform="matrix(0.9916667,0,0,1,0.249999,0)"
+       style="fill:#2e3436;fill-opacity:1;stroke:none">
+      <rect
+         ry="25"
+         rx="25.210083"
+         y="152.36218"
+         x="30"
+         height="400"
+         width="400"
+         id="rect10497"
+         style="opacity:0.98900003000000003;fill:#2e3436;fill-opacity:1;stroke:none;stroke-width:1;stroke-linecap:round;stroke-miterlimit:4;stroke-dasharray:1.00000003999999998, 2.00000007999999996;stroke-dashoffset:0;stroke-opacity:1" />
+      <rect
+         y="152.36218"
+         x="230"
+         height="400"
+         width="400"
+         id="rect11182"
+         style="opacity:0.98900003000000003;fill:#2e3436;fill-opacity:1;stroke:none;stroke-width:1;stroke-linecap:round;stroke-miterlimit:4;stroke-dasharray:1.00000003999999998, 2.00000007999999996;stroke-dashoffset:0;stroke-opacity:1" />
+    </g>
+    <rect
+       style="opacity:1;fill:url(#radialGradient11033);fill-opacity:1;stroke:none;stroke-width:1;stroke-linecap:round;stroke-miterlimit:4;stroke-dasharray:1.00000003999999998, 2.00000007999999996;stroke-dashoffset:0;stroke-opacity:1"
+       id="rect11025"
+       width="350"
+       height="300"
+       x="55"
+       y="202.36218" />
+    <rect
+       style="opacity:0.14999999999999999;fill:url(#linearGradient11887);fill-opacity:1;stroke:none;stroke-width:0.99999994000000003;stroke-linecap:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0.69999992000000000;stroke-opacity:1;color:#000000;fill-rule:evenodd;stroke-linejoin:round;marker:none;marker-start:none;marker-mid:none;marker-end:none;visibility:visible;display:inline;overflow:visible;enable-background:accumulate"
+       id="rect11875"
+       width="350"
+       height="300"
+       x="55"
+       y="202.36218" />
+    <path
+       style="fill:none;fill-rule:evenodd;stroke:#ffffff;stroke-width:25;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:25, 75;stroke-dashoffset:5;stroke-opacity:1"
+       d="M 67.5,178.07518 L 616.01283,178.07518"
+       id="path11311" />
+    <path
+       style="fill:none;fill-rule:evenodd;stroke:#ffffff;stroke-width:25;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:25, 75;stroke-dashoffset:5;stroke-opacity:1"
+       d="M 67.5,526.07518 L 616.01283,526.07518"
+       id="path11889" />
+    <rect
+       style="opacity:1;fill:url(#radialGradient11907);fill-opacity:1;stroke:none;stroke-width:1;stroke-linecap:round;stroke-miterlimit:4;stroke-dasharray:1.00000003999999998, 2.00000007999999996;stroke-dashoffset:0;stroke-opacity:1"
+       id="rect11905"
+       width="175"
+       height="300"
+       x="450"
+       y="202.36218" />
+    <rect
+       style="opacity:0.15;fill:url(#linearGradient11917);fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:0.99999994;stroke-linecap:round;stroke-linejoin:round;marker:none;marker-start:none;marker-mid:none;marker-end:none;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0.69999992;stroke-opacity:1;visibility:visible;display:inline;overflow:visible;enable-background:accumulate"
+       id="rect11915"
+       width="175"
+       height="300"
+       x="450"
+       y="202.36218" />
+    <path
+       style="font-size:77.55940247px;font-style:normal;font-weight:normal;fill:url(#linearGradient14337);fill-opacity:1;stroke:none;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1;filter:url(#filter11939);font-family:Bitstream Vera Sans"
+       d="M 266.53703,410.99339 L 184.46342,410.99339 L 171.5116,448.07648 L 118.75,448.07648 L 194.1432,244.52848 L 256.72091,244.52848 L 332.11411,448.07648 L 279.35251,448.07648 L 266.53703,410.99339 M 197.55157,373.22862 L 253.31254,373.22862 L 225.50022,292.24569 L 197.55157,373.22862"
+       id="text11919" />
+    <path
+       style="font-size:77.55940247px;font-style:normal;font-weight:normal;fill:url(#linearGradient14339);fill-opacity:1;stroke:none;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1;font-family:Bitstream Vera Sans"
+       d="M 266.53703,410.99284 L 184.46342,410.99284 L 171.5116,448.07593 L 118.75,448.07593 L 194.1432,244.52793 L 256.72091,244.52793 L 332.11411,448.07593 L 279.35251,448.07593 L 266.53703,410.99284 M 197.55157,373.22807 L 253.31254,373.22807 L 225.50022,292.24514 L 197.55157,373.22807"
+       id="text11943" />
+    <rect
+       style="opacity:1;fill:none;fill-opacity:1;fill-rule:evenodd;stroke:#ffffff;stroke-width:19.99999809;stroke-linecap:round;stroke-linejoin:miter;marker:none;marker-start:none;marker-mid:none;marker-end:none;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0.69999992;stroke-opacity:1;visibility:visible;display:inline;overflow:visible;enable-background:accumulate"
+       id="rect14335"
+       width="330"
+       height="280"
+       x="65"
+       y="212.36218" />
+  </g>
+</svg>

Added: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_icons/scalable/markB.svg
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_icons/scalable/markB.svg	2009-07-23 18:18:50 UTC (rev 5134)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_icons/scalable/markB.svg	2009-07-23 18:18:52 UTC (rev 5135)
@@ -0,0 +1,416 @@
+<?xml version="1.0" encoding="UTF-8" standalone="no"?>
+<!-- Created with Inkscape (http://www.inkscape.org/) -->
+<svg
+   xmlns:dc="http://purl.org/dc/elements/1.1/"
+   xmlns:cc="http://creativecommons.org/ns#"
+   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
+   xmlns:svg="http://www.w3.org/2000/svg"
+   xmlns="http://www.w3.org/2000/svg"
+   xmlns:xlink="http://www.w3.org/1999/xlink"
+   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"
+   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"
+   width="744.09448819"
+   height="1052.3622047"
+   id="svg2"
+   inkscape:label="Pozad??"
+   sodipodi:version="0.32"
+   inkscape:version="0.46"
+   sodipodi:docname="markB.svg"
+   inkscape:output_extension="org.inkscape.output.svg.inkscape"
+   inkscape:export-filename="/data/Avidemux/nove ikony/markB.png"
+   inkscape:export-xdpi="4.4000001"
+   inkscape:export-ydpi="4.4000001">
+  <defs
+     id="defs10463">
+    <linearGradient
+       id="linearGradient13641">
+      <stop
+         id="stop13643"
+         offset="0"
+         style="stop-color:#ffffff;stop-opacity:1" />
+      <stop
+         style="stop-color:#ffffff;stop-opacity:0;"
+         offset="0.20971029"
+         id="stop13645" />
+      <stop
+         id="stop13647"
+         offset="0.34936365"
+         style="stop-color:#ffffff;stop-opacity:0.81065089;" />
+      <stop
+         style="stop-color:#ffffff;stop-opacity:0;"
+         offset="0.42850056"
+         id="stop13649" />
+      <stop
+         id="stop13651"
+         offset="0.52134049"
+         style="stop-color:#ffffff;stop-opacity:1;" />
+      <stop
+         style="stop-color:#ffffff;stop-opacity:0;"
+         offset="0.55746967"
+         id="stop13653" />
+      <stop
+         id="stop13655"
+         offset="0.71001518"
+         style="stop-color:#ffffff;stop-opacity:0.56804734;" />
+      <stop
+         style="stop-color:#ffffff;stop-opacity:0;"
+         offset="0.74394959"
+         id="stop13657" />
+      <stop
+         id="stop13659"
+         offset="1"
+         style="stop-color:#ffffff;stop-opacity:0" />
+    </linearGradient>
+    <linearGradient
+       id="linearGradient12013">
+      <stop
+         id="stop12015"
+         offset="0"
+         style="stop-color:#ffffff;stop-opacity:1;" />
+      <stop
+         id="stop12017"
+         offset="1"
+         style="stop-color:#888a85;stop-opacity:1;" />
+    </linearGradient>
+    <linearGradient
+       id="linearGradient11899">
+      <stop
+         id="stop11901"
+         offset="0"
+         style="stop-color:#ffffff;stop-opacity:1;" />
+      <stop
+         id="stop11903"
+         offset="1"
+         style="stop-color:#d1940c;stop-opacity:1;" />
+    </linearGradient>
+    <linearGradient
+       id="linearGradient7305">
+      <stop
+         style="stop-color:#ffffff;stop-opacity:1"
+         offset="0"
+         id="stop7307" />
+      <stop
+         id="stop7313"
+         offset="0.20971029"
+         style="stop-color:#ffffff;stop-opacity:0;" />
+      <stop
+         style="stop-color:#ffffff;stop-opacity:0.81065089;"
+         offset="0.34936365"
+         id="stop7329" />
+      <stop
+         id="stop7321"
+         offset="0.42850056"
+         style="stop-color:#ffffff;stop-opacity:0;" />
+      <stop
+         style="stop-color:#ffffff;stop-opacity:1;"
+         offset="0.52134049"
+         id="stop7323" />
+      <stop
+         id="stop7317"
+         offset="0.55746967"
+         style="stop-color:#ffffff;stop-opacity:0;" />
+      <stop
+         style="stop-color:#ffffff;stop-opacity:0.56804734;"
+         offset="0.71001518"
+         id="stop7319" />
+      <stop
+         id="stop7416"
+         offset="0.74394959"
+         style="stop-color:#ffffff;stop-opacity:0;" />
+      <stop
+         style="stop-color:#ffffff;stop-opacity:0"
+         offset="1"
+         id="stop7309" />
+    </linearGradient>
+    <linearGradient
+       id="linearGradient11341">
+      <stop
+         style="stop-color:#2e3436;stop-opacity:1;"
+         offset="0"
+         id="stop11343" />
+      <stop
+         style="stop-color:#000000;stop-opacity:0;"
+         offset="1"
+         id="stop11345" />
+    </linearGradient>
+    <linearGradient
+       id="linearGradient11319">
+      <stop
+         id="stop11321"
+         offset="0"
+         style="stop-color:#505050;stop-opacity:1;" />
+      <stop
+         id="stop11323"
+         offset="1"
+         style="stop-color:#000000;stop-opacity:0;" />
+    </linearGradient>
+    <linearGradient
+       id="linearGradient11037">
+      <stop
+         style="stop-color:#000000;stop-opacity:0.3137255;"
+         offset="0"
+         id="stop11039" />
+      <stop
+         style="stop-color:#ffffff;stop-opacity:0;"
+         offset="1"
+         id="stop11041" />
+    </linearGradient>
+    <linearGradient
+       id="linearGradient11027">
+      <stop
+         style="stop-color:#ffffff;stop-opacity:1;"
+         offset="0"
+         id="stop11029" />
+      <stop
+         style="stop-color:#c17d11;stop-opacity:1;"
+         offset="1"
+         id="stop11031" />
+    </linearGradient>
+    <inkscape:perspective
+       sodipodi:type="inkscape:persp3d"
+       inkscape:vp_x="0 : 526.18109 : 1"
+       inkscape:vp_y="0 : 1000 : 0"
+       inkscape:vp_z="744.09448 : 526.18109 : 1"
+       inkscape:persp3d-origin="372.04724 : 350.78739 : 1"
+       id="perspective10469" />
+    <radialGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient12013"
+       id="radialGradient11033"
+       cx="193.20633"
+       cy="423.15579"
+       fx="193.20633"
+       fy="423.15579"
+       r="175"
+       gradientTransform="matrix(4.3194927e-3,-2.0866458,2.3912548,4.9496667e-3,-1513.9268,868.42641)"
+       gradientUnits="userSpaceOnUse" />
+    <linearGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient11037"
+       id="linearGradient11043"
+       x1="139.61292"
+       y1="148.12643"
+       x2="294.12311"
+       y2="302.3877"
+       gradientUnits="userSpaceOnUse"
+       gradientTransform="matrix(1.3888889,0,0,1,-636.94444,0)" />
+    <linearGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient7305"
+       id="linearGradient11887"
+       x1="-134.90868"
+       y1="517.01703"
+       x2="691.8833"
+       y2="66.489014"
+       gradientUnits="userSpaceOnUse"
+       gradientTransform="translate(-635,0)" />
+    <radialGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient11027"
+       id="radialGradient11907"
+       gradientUnits="userSpaceOnUse"
+       gradientTransform="matrix(7.5635394e-3,-2.2386822,2.95746,9.9914845e-3,-963.51266,1077.0256)"
+       cx="273.66922"
+       cy="300.31427"
+       fx="273.66922"
+       fy="300.31427"
+       r="175" />
+    <linearGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient7305"
+       id="linearGradient11917"
+       gradientUnits="userSpaceOnUse"
+       x1="-134.90868"
+       y1="517.01703"
+       x2="691.8833"
+       y2="66.489014"
+       gradientTransform="translate(-265,0)" />
+    <linearGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient11341"
+       id="linearGradient11929"
+       x1="116.41742"
+       y1="346.30249"
+       x2="329.78152"
+       y2="346.30249"
+       gradientUnits="userSpaceOnUse" />
+    <filter
+       inkscape:collect="always"
+       id="filter11939"
+       x="-0.11188843"
+       width="1.2237769"
+       y="-0.11728426"
+       height="1.2345685">
+      <feGaussianBlur
+         inkscape:collect="always"
+         stdDeviation="9.9470732"
+         id="feGaussianBlur11941" />
+    </filter>
+    <linearGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient11341"
+       id="linearGradient11951"
+       gradientUnits="userSpaceOnUse"
+       x1="124.27416"
+       y1="299.16205"
+       x2="329.78152"
+       y2="454.3327" />
+    <linearGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient11341"
+       id="linearGradient12009"
+       gradientUnits="userSpaceOnUse"
+       x1="124.27416"
+       y1="299.16205"
+       x2="329.78152"
+       y2="454.3327"
+       gradientTransform="translate(186.07434,0)" />
+    <linearGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient11341"
+       id="linearGradient12011"
+       gradientUnits="userSpaceOnUse"
+       x1="116.41742"
+       y1="346.30249"
+       x2="329.78152"
+       y2="346.30249"
+       gradientTransform="translate(186.07435,0)" />
+    <linearGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient13641"
+       id="linearGradient13639"
+       x1="-72.995941"
+       y1="152.36218"
+       x2="861.74084"
+       y2="536.01355"
+       gradientUnits="userSpaceOnUse" />
+  </defs>
+  <sodipodi:namedview
+     id="base"
+     pagecolor="#ffffff"
+     bordercolor="#666666"
+     borderopacity="1.0"
+     inkscape:pageopacity="0.0"
+     inkscape:pageshadow="2"
+     inkscape:zoom="1.0182338"
+     inkscape:cx="360.86795"
+     inkscape:cy="729.31354"
+     inkscape:document-units="px"
+     inkscape:current-layer="layer1"
+     showgrid="false"
+     inkscape:window-width="1440"
+     inkscape:window-height="850"
+     inkscape:window-x="0"
+     inkscape:window-y="0" />
+  <metadata
+     id="metadata10466">
+    <rdf:RDF>
+      <cc:Work
+         rdf:about="">
+        <dc:format>image/svg+xml</dc:format>
+        <dc:type
+           rdf:resource="http://purl.org/dc/dcmitype/StillImage" />
+      </cc:Work>
+    </rdf:RDF>
+  </metadata>
+  <g
+     inkscape:label="Vrstva 1"
+     inkscape:groupmode="layer"
+     id="layer1">
+    <rect
+       style="opacity:0.98900003;fill:none;fill-opacity:1;stroke:#ffffff;stroke-width:1;stroke-linecap:round;stroke-miterlimit:4;stroke-dasharray:1, 2;stroke-dashoffset:0;stroke-opacity:1"
+       id="rect10493"
+       width="108.57143"
+       height="108.57143"
+       x="-577.85712"
+       y="208.07646"
+       transform="scale(-1,1)" />
+    <rect
+       style="opacity:0.31400000000000000;fill:url(#linearGradient11043);fill-opacity:1;stroke:none;stroke-width:1;stroke-linecap:round;stroke-miterlimit:4;stroke-dasharray:1.00000003999999998, 2.00000007999999996;stroke-dashoffset:0;stroke-opacity:1"
+       id="rect11035"
+       width="625"
+       height="450"
+       x="-630"
+       y="127.36218"
+       rx="25"
+       ry="25"
+       transform="scale(-1,1)" />
+    <g
+       id="g11184"
+       transform="matrix(-0.9916667,0,0,1,634.75,0)"
+       style="fill:#2e3436;fill-opacity:1;stroke:none">
+      <rect
+         ry="25"
+         rx="25.210083"
+         y="152.36218"
+         x="30"
+         height="400"
+         width="400"
+         id="rect10497"
+         style="opacity:0.98900003000000003;fill:#2e3436;fill-opacity:1;stroke:none;stroke-width:1;stroke-linecap:round;stroke-miterlimit:4;stroke-dasharray:1.00000003999999998, 2.00000007999999996;stroke-dashoffset:0;stroke-opacity:1" />
+      <rect
+         y="152.36218"
+         x="230"
+         height="400"
+         width="400"
+         id="rect11182"
+         style="opacity:0.98900003000000003;fill:#2e3436;fill-opacity:1;stroke:none;stroke-width:1;stroke-linecap:round;stroke-miterlimit:4;stroke-dasharray:1.00000003999999998, 2.00000007999999996;stroke-dashoffset:0;stroke-opacity:1" />
+    </g>
+    <rect
+       style="opacity:1;fill:url(#radialGradient11033);fill-opacity:1;stroke:none;stroke-width:1;stroke-linecap:round;stroke-miterlimit:4;stroke-dasharray:1.00000003999999998, 2.00000007999999996;stroke-dashoffset:0;stroke-opacity:1"
+       id="rect11025"
+       width="350"
+       height="300"
+       x="-580"
+       y="202.36218"
+       transform="scale(-1,1)" />
+    <rect
+       style="opacity:0.15;fill:url(#linearGradient11887);fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:0.99999994;stroke-linecap:round;stroke-linejoin:round;marker:none;marker-start:none;marker-mid:none;marker-end:none;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0.69999992;stroke-opacity:1;visibility:visible;display:inline;overflow:visible;enable-background:accumulate"
+       id="rect11875"
+       width="350"
+       height="300"
+       x="-580"
+       y="202.36218"
+       transform="scale(-1,1)" />
+    <path
+       style="fill:none;fill-rule:evenodd;stroke:#ffffff;stroke-width:25;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:25, 75;stroke-dashoffset:5;stroke-opacity:1"
+       d="M 567.5,178.07518 L 18.98717,178.07518"
+       id="path11311" />
+    <path
+       style="fill:none;fill-rule:evenodd;stroke:#ffffff;stroke-width:25;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:25, 75;stroke-dashoffset:5;stroke-opacity:1"
+       d="M 567.5,526.07518 L 18.98717,526.07518"
+       id="path11889" />
+    <rect
+       style="opacity:1;fill:url(#radialGradient11907);fill-opacity:1;stroke:none;stroke-width:1;stroke-linecap:round;stroke-miterlimit:4;stroke-dasharray:1.00000003999999998, 2.00000007999999996;stroke-dashoffset:0;stroke-opacity:1"
+       id="rect11905"
+       width="175"
+       height="300"
+       x="-185"
+       y="202.36218"
+       transform="scale(-1,1)" />
+    <rect
+       style="opacity:0.15;fill:url(#linearGradient11917);fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:0.99999994;stroke-linecap:round;stroke-linejoin:round;marker:none;marker-start:none;marker-mid:none;marker-end:none;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0.69999992;stroke-opacity:1;visibility:visible;display:inline;overflow:visible;enable-background:accumulate"
+       id="rect11915"
+       width="175"
+       height="300"
+       x="-185"
+       y="202.36218"
+       transform="scale(-1,1)" />
+    <path
+       style="font-size:77.55940247px;font-style:normal;font-weight:normal;fill:url(#linearGradient12011);fill-opacity:1;stroke:none;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1;filter:url(#filter11939);font-family:Bitstream Vera Sans"
+       d="M 408.28765,323.33005 C 416.55851,323.33017 422.82991,321.51238 427.10186,317.87665 C 431.37356,314.24119 433.50947,308.87869 433.5096,301.78913 C 433.50947,294.79076 431.37356,289.47371 427.10186,285.83795 C 422.82991,282.11163 416.55851,280.24839 408.28765,280.24822 L 379.24831,280.24822 L 379.24831,323.33005 L 408.28765,323.33005 M 410.06,412.35673 C 420.60311,412.35677 428.51053,410.12997 433.78227,405.67632 C 439.14464,401.22276 441.82589,394.49692 441.82603,385.49876 C 441.82589,376.68251 439.19008,370.09299 433.91861,365.7302 C 428.64686,361.27668 420.694,359.04988 410.06,359.04979 L 379.24831,359.04979 L 379.24831,412.35673 L 410.06,412.35673 M 458.86789,339.1449 C 470.13808,342.41704 478.8635,348.46121 485.04419,357.27744 C 491.22452,366.09384 494.31477,376.90973 494.31497,389.72514 C 494.31477,409.35741 487.67981,423.99067 474.41007,433.62498 C 461.13998,443.25932 440.96244,448.07648 413.87738,448.07648 L 326.75938,448.07648 L 326.75938,244.52848 L 405.5!
 6095,244.52848 C 433.82758,244.52868 454.2778,248.8005 466.91165,257.34396 C 479.63606,265.88779 485.99835,279.56671 485.99854,298.38076 C 485.99835,308.2879 483.68066,316.74066 479.04546,323.73905 C 474.4099,330.6468 467.68405,335.78208 458.86789,339.1449"
+       id="text11919" />
+    <path
+       style="font-size:77.55940247px;font-style:normal;font-weight:normal;fill:url(#linearGradient12009);fill-opacity:1;stroke:none;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1;font-family:Bitstream Vera Sans"
+       d="M 408.28765,323.33005 C 416.55851,323.33017 422.82991,321.51238 427.10186,317.87665 C 431.37356,314.24119 433.50947,308.87869 433.5096,301.78913 C 433.50947,294.79076 431.37356,289.47371 427.10186,285.83795 C 422.82991,282.11163 416.55851,280.24839 408.28765,280.24822 L 379.24831,280.24822 L 379.24831,323.33005 L 408.28765,323.33005 M 410.06,412.35673 C 420.60311,412.35677 428.51053,410.12997 433.78227,405.67632 C 439.14464,401.22276 441.82589,394.49692 441.82603,385.49876 C 441.82589,376.68251 439.19008,370.09299 433.91861,365.7302 C 428.64686,361.27668 420.694,359.04988 410.06,359.04979 L 379.24831,359.04979 L 379.24831,412.35673 L 410.06,412.35673 M 458.86789,339.1449 C 470.13808,342.41704 478.8635,348.46121 485.04419,357.27744 C 491.22452,366.09384 494.31477,376.90973 494.31497,389.72514 C 494.31477,409.35741 487.67981,423.99067 474.41007,433.62498 C 461.13998,443.25932 440.96244,448.07648 413.87738,448.07648 L 326.75938,448.07648 L 326.75938,244.52848 L 405.5!
 6095,244.52848 C 433.82758,244.52868 454.2778,248.8005 466.91165,257.34396 C 479.63606,265.88779 485.99835,279.56671 485.99854,298.38076 C 485.99835,308.2879 483.68066,316.74066 479.04546,323.73905 C 474.4099,330.6468 467.68405,335.78208 458.86789,339.1449"
+       id="text11943" />
+    <rect
+       style="opacity:1;fill:none;fill-opacity:1;fill-rule:evenodd;stroke:#ffffff;stroke-width:19.99999809;stroke-linecap:round;stroke-linejoin:miter;marker:none;marker-start:none;marker-mid:none;marker-end:none;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0.69999992;stroke-opacity:1;visibility:visible;display:inline;overflow:visible;enable-background:accumulate"
+       id="rect14320"
+       width="330"
+       height="280"
+       x="-570"
+       y="212.36218"
+       transform="scale(-1,1)" />
+  </g>
+</svg>

Added: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_icons/scalable/next-black-frame.svg
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_icons/scalable/next-black-frame.svg	2009-07-23 18:18:50 UTC (rev 5134)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_icons/scalable/next-black-frame.svg	2009-07-23 18:18:52 UTC (rev 5135)
@@ -0,0 +1,417 @@
+<?xml version="1.0" encoding="UTF-8" standalone="no"?>
+<!-- Created with Inkscape (http://www.inkscape.org/) -->
+<svg
+   xmlns:dc="http://purl.org/dc/elements/1.1/"
+   xmlns:cc="http://creativecommons.org/ns#"
+   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
+   xmlns:svg="http://www.w3.org/2000/svg"
+   xmlns="http://www.w3.org/2000/svg"
+   xmlns:xlink="http://www.w3.org/1999/xlink"
+   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"
+   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"
+   width="48"
+   height="48"
+   id="svg7854"
+   sodipodi:version="0.32"
+   inkscape:version="0.46"
+   version="1.0"
+   sodipodi:docbase="/home/dobey/Projects/gnome-icon-theme/scalable/actions"
+   sodipodi:docname="next-black-frame.svg"
+   inkscape:output_extension="org.inkscape.output.svg.inkscape"
+   inkscape:export-filename="/data/Avidemux/nove ikony/next-black-frame.png"
+   inkscape:export-xdpi="76.153847"
+   inkscape:export-ydpi="76.153847">
+  <defs
+     id="defs7856">
+    <inkscape:perspective
+       sodipodi:type="inkscape:persp3d"
+       inkscape:vp_x="0 : 24 : 1"
+       inkscape:vp_y="0 : 1000 : 0"
+       inkscape:vp_z="48 : 24 : 1"
+       inkscape:persp3d-origin="24 : 16 : 1"
+       id="perspective10257" />
+    <linearGradient
+       id="linearGradient7577">
+      <stop
+         style="stop-color:#000000;stop-opacity:0.3137255;"
+         offset="0"
+         id="stop7579" />
+      <stop
+         style="stop-color:#ffffff;stop-opacity:1"
+         offset="1"
+         id="stop7581" />
+    </linearGradient>
+    <linearGradient
+       id="linearGradient7305">
+      <stop
+         style="stop-color:#ffffff;stop-opacity:1"
+         offset="0"
+         id="stop7307" />
+      <stop
+         id="stop7313"
+         offset="0.20971029"
+         style="stop-color:#ffffff;stop-opacity:0;" />
+      <stop
+         style="stop-color:#ffffff;stop-opacity:0.81065089;"
+         offset="0.34936365"
+         id="stop7329" />
+      <stop
+         id="stop7321"
+         offset="0.42850056"
+         style="stop-color:#ffffff;stop-opacity:0;" />
+      <stop
+         style="stop-color:#ffffff;stop-opacity:1;"
+         offset="0.52134049"
+         id="stop7323" />
+      <stop
+         id="stop7317"
+         offset="0.55746967"
+         style="stop-color:#ffffff;stop-opacity:0;" />
+      <stop
+         style="stop-color:#ffffff;stop-opacity:0.56804734;"
+         offset="0.71001518"
+         id="stop7319" />
+      <stop
+         id="stop7416"
+         offset="0.74394959"
+         style="stop-color:#ffffff;stop-opacity:0;" />
+      <stop
+         style="stop-color:#ffffff;stop-opacity:0"
+         offset="1"
+         id="stop7309" />
+    </linearGradient>
+    <linearGradient
+       id="linearGradient7344">
+      <stop
+         id="stop7346"
+         offset="0"
+         style="stop-color:#ffffff;stop-opacity:1;" />
+      <stop
+         id="stop7348"
+         offset="1"
+         style="stop-color:#2e3436;stop-opacity:1;" />
+    </linearGradient>
+    <linearGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient7577"
+       id="linearGradient7762"
+       gradientUnits="userSpaceOnUse"
+       x1="-77.711723"
+       y1="13.246527"
+       x2="-74.288277"
+       y2="26.023027" />
+    <radialGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient7344"
+       id="radialGradient7764"
+       gradientUnits="userSpaceOnUse"
+       gradientTransform="matrix(2.2246612,0,0,2.3034327,-120.62956,-41.851943)"
+       cx="28.541149"
+       cy="31.678772"
+       fx="28.541149"
+       fy="31.678772"
+       r="12.000001" />
+    <radialGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient7344"
+       id="radialGradient7766"
+       gradientUnits="userSpaceOnUse"
+       gradientTransform="matrix(1.8811669,0,0,1.5641941,82.169231,0.3959845)"
+       cx="36.455379"
+       cy="17.414564"
+       fx="36.455379"
+       fy="17.414564"
+       r="13.55237" />
+    <radialGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient7344"
+       id="radialGradient7768"
+       gradientUnits="userSpaceOnUse"
+       gradientTransform="matrix(1.8811669,0,0,1.5641941,82.169231,0.3959845)"
+       cx="36.455379"
+       cy="17.414564"
+       fx="36.455379"
+       fy="17.414564"
+       r="13.55237" />
+    <linearGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient7305"
+       id="linearGradient7770"
+       gradientUnits="userSpaceOnUse"
+       x1="0.17084506"
+       y1="10.331141"
+       x2="47.954166"
+       y2="37.918854" />
+    <radialGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient7344"
+       id="radialGradient10270"
+       gradientUnits="userSpaceOnUse"
+       gradientTransform="matrix(2.2246612,0,0,2.3034327,-120.62956,-41.851943)"
+       cx="28.541149"
+       cy="31.678772"
+       fx="28.541149"
+       fy="31.678772"
+       r="12.000001" />
+    <radialGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient7344"
+       id="radialGradient10272"
+       gradientUnits="userSpaceOnUse"
+       gradientTransform="matrix(1.8811669,0,0,1.5641941,82.169231,0.3959845)"
+       cx="36.455379"
+       cy="17.414564"
+       fx="36.455379"
+       fy="17.414564"
+       r="13.55237" />
+    <radialGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient7344"
+       id="radialGradient10274"
+       gradientUnits="userSpaceOnUse"
+       gradientTransform="matrix(1.8811669,0,0,1.5641941,82.169231,0.3959845)"
+       cx="36.455379"
+       cy="17.414564"
+       fx="36.455379"
+       fy="17.414564"
+       r="13.55237" />
+    <linearGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient7305"
+       id="linearGradient10276"
+       gradientUnits="userSpaceOnUse"
+       x1="0.17084506"
+       y1="10.331141"
+       x2="47.954166"
+       y2="37.918854" />
+    <radialGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient7344"
+       id="radialGradient10798"
+       gradientUnits="userSpaceOnUse"
+       gradientTransform="matrix(1.8811669,0,0,1.5641941,82.169231,0.3959845)"
+       cx="36.455379"
+       cy="17.414564"
+       fx="36.455379"
+       fy="17.414564"
+       r="13.55237" />
+    <radialGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient7344"
+       id="radialGradient10802"
+       gradientUnits="userSpaceOnUse"
+       gradientTransform="matrix(1.8811669,0,0,1.5641941,-37.830769,0.3959845)"
+       cx="36.455379"
+       cy="17.414564"
+       fx="36.455379"
+       fy="17.414564"
+       r="13.55237" />
+  </defs>
+  <sodipodi:namedview
+     id="base"
+     pagecolor="#ffffff"
+     bordercolor="#afafaf"
+     borderopacity="1"
+     gridtolerance="10000"
+     guidetolerance="10"
+     objecttolerance="10"
+     inkscape:pageopacity="0"
+     inkscape:pageshadow="2"
+     inkscape:zoom="13.12"
+     inkscape:cx="25.585157"
+     inkscape:cy="18.867995"
+     inkscape:document-units="px"
+     inkscape:current-layer="layer1"
+     width="48px"
+     height="48px"
+     inkscape:showpageshadow="false"
+     inkscape:window-width="1432"
+     inkscape:window-height="846"
+     inkscape:window-x="0"
+     inkscape:window-y="0"
+     showgrid="false"
+     inkscape:grid-points="true"
+     showborder="true"
+     showguides="false"
+     inkscape:guide-bbox="true"
+     borderlayer="true">
+    <sodipodi:guide
+       orientation="horizontal"
+       position="13.125"
+       id="guide7377" />
+    <sodipodi:guide
+       orientation="horizontal"
+       position="5.4800776"
+       id="guide7379" />
+    <sodipodi:guide
+       orientation="horizontal"
+       position="35"
+       id="guide7492" />
+    <sodipodi:guide
+       orientation="horizontal"
+       position="48"
+       id="guide7046" />
+    <sodipodi:guide
+       orientation="horizontal"
+       position="-17.5"
+       id="guide7233" />
+    <sodipodi:guide
+       orientation="horizontal"
+       position="-29"
+       id="guide7235" />
+    <sodipodi:guide
+       orientation="horizontal"
+       position="22.097087"
+       id="guide7556" />
+    <sodipodi:guide
+       orientation="vertical"
+       position="-76.125"
+       id="guide7644" />
+    <sodipodi:guide
+       orientation="vertical"
+       position="-26.125"
+       id="guide7646" />
+    <sodipodi:guide
+       orientation="vertical"
+       position="24"
+       id="guide7648" />
+    <sodipodi:guide
+       orientation="vertical"
+       position="-125.28125"
+       id="guide7665" />
+    <sodipodi:guide
+       orientation="vertical"
+       position="-175.125"
+       id="guide7667" />
+    <sodipodi:guide
+       orientation="vertical"
+       position="-225.83223"
+       id="guide7685" />
+    <sodipodi:guide
+       orientation="vertical"
+       position="-326.06462"
+       id="guide7695" />
+    <inkscape:grid
+       id="GridFromPre046Settings"
+       type="xygrid"
+       originx="0px"
+       originy="0px"
+       spacingx="0.5px"
+       spacingy="0.5px"
+       color="#0000ff"
+       empcolor="#0000ff"
+       opacity="0.2"
+       empopacity="0.4"
+       empspacing="2" />
+  </sodipodi:namedview>
+  <metadata
+     id="metadata7859">
+    <rdf:RDF>
+      <cc:Work
+         rdf:about="">
+        <dc:format>image/svg+xml</dc:format>
+        <dc:type
+           rdf:resource="http://purl.org/dc/dcmitype/StillImage" />
+        <dc:creator>
+          <cc:Agent>
+            <dc:title>Lapo Calamandrei</dc:title>
+          </cc:Agent>
+        </dc:creator>
+        <dc:source />
+        <cc:license
+           rdf:resource="http://creativecommons.org/licenses/GPL/2.0/" />
+        <dc:title>Next Song</dc:title>
+        <dc:subject>
+          <rdf:Bag>
+            <rdf:li>skip</rdf:li>
+            <rdf:li>forward</rdf:li>
+            <rdf:li>next</rdf:li>
+          </rdf:Bag>
+        </dc:subject>
+      </cc:Work>
+      <cc:License
+         rdf:about="http://creativecommons.org/licenses/GPL/2.0/">
+        <cc:permits
+           rdf:resource="http://web.resource.org/cc/Reproduction" />
+        <cc:permits
+           rdf:resource="http://web.resource.org/cc/Distribution" />
+        <cc:requires
+           rdf:resource="http://web.resource.org/cc/Notice" />
+        <cc:permits
+           rdf:resource="http://web.resource.org/cc/DerivativeWorks" />
+        <cc:requires
+           rdf:resource="http://web.resource.org/cc/ShareAlike" />
+        <cc:requires
+           rdf:resource="http://web.resource.org/cc/SourceCode" />
+      </cc:License>
+    </rdf:RDF>
+  </metadata>
+  <g
+     inkscape:label="Layer 1"
+     inkscape:groupmode="layer"
+     id="layer1">
+    <path
+       sodipodi:type="inkscape:offset"
+       inkscape:radius="1.5032517"
+       inkscape:original="M -59.9375 12.5 C -60.243545 12.5 -60.5 12.756455 -60.5 13.0625 L -60.5 23.6875 L -78.5 13 L -78.5 23.6875 L -96.5 13 L -96.5 35 L -78.5 24.3125 L -78.5 35 L -60.5 24.3125 L -60.5 34.9375 C -60.5 35.243545 -60.243543 35.500002 -59.9375 35.5 L -56.0625 35.5 C -55.756455 35.5 -55.499999 35.243545 -55.5 34.9375 L -55.5 13.0625 C -55.5 12.756455 -55.756456 12.5 -56.0625 12.5 L -59.9375 12.5 z "
+       style="opacity:0.4;fill:url(#linearGradient7762);fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:1;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0.69999992;stroke-opacity:1"
+       id="path7638"
+       d="M -59.9375,11 C -61.083327,11 -62,11.916673 -62,13.0625 L -62,21.0625 L -77.71875,11.71875 C -78.182222,11.438527 -78.760596,11.429252 -79.232814,11.694471 C -79.705033,11.959689 -79.998098,12.458403 -80,13 L -80,21.0625 L -95.71875,11.71875 C -96.182222,11.438527 -96.760596,11.429252 -97.232814,11.694471 C -97.705033,11.959689 -97.998098,12.458403 -98,13 L -98,35 C -97.998098,35.541597 -97.705033,36.040311 -97.232814,36.305529 C -96.760596,36.570748 -96.182222,36.561473 -95.71875,36.28125 L -80,26.9375 L -80,35 C -79.998098,35.541597 -79.705033,36.040311 -79.232814,36.305529 C -78.760596,36.570748 -78.182222,36.561473 -77.71875,36.28125 L -62,26.9375 L -62,34.9375 C -62,36.083333 -61.083342,37.000007 -59.9375,37 L -56.0625,37 C -54.916673,37 -53.999996,36.083333 -54,34.9375 L -54,13.0625 C -54,11.91667 -54.916672,11 -56.0625,11 L -59.9375,11 z"
+       transform="translate(100,0)" />
+    <rect
+       style="fill:#000000;fill-opacity:1;fill-rule:evenodd;stroke:#555753;stroke-width:1;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0.69999992000000000;stroke-opacity:1"
+       id="rect7623"
+       width="4.9886603"
+       height="23.000002"
+       x="39.511337"
+       y="12.5"
+       rx="0.55242717"
+       ry="0.55242717" />
+    <g
+       id="g8003"
+       transform="translate(-138,0)">
+      <path
+         sodipodi:nodetypes="cccc"
+         id="path8005"
+         d="M 141.5,35 L 141.5,13.000461 L 159.99577,24.010194 L 141.5,35 z"
+         style="fill:url(#radialGradient10272);fill-opacity:1;fill-rule:evenodd;stroke:#555753;stroke-width:0.99999994;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dashoffset:0.69999992;stroke-opacity:1" />
+      <path
+         transform="translate(120,0)"
+         d="M 22.5,14.78125 L 22.5,33.21875 L 38.03125,24 L 22.5,14.78125 z"
+         id="path8007"
+         style="fill:none;fill-opacity:1;fill-rule:evenodd;stroke:#ffffff;stroke-width:0.99999994;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dashoffset:0.69999992;stroke-opacity:1"
+         inkscape:original="M 21.5 13 L 21.5 35 L 40 24 L 21.5 13 z "
+         inkscape:radius="-1.0054175"
+         sodipodi:type="inkscape:offset" />
+    </g>
+    <path
+       style="fill:url(#radialGradient10802);fill-opacity:1;fill-rule:evenodd;stroke:#555753;stroke-width:0.99999994;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dashoffset:0.69999992;stroke-opacity:1"
+       d="M 21.5,35 L 21.5,13.000461 L 39.99577,24.010194 L 21.5,35 z"
+       id="path7621"
+       sodipodi:nodetypes="cccc" />
+    <path
+       sodipodi:type="inkscape:offset"
+       inkscape:radius="-1.0054175"
+       inkscape:original="M 21.5 13 L 21.5 35 L 40 24 L 21.5 13 z "
+       style="fill:none;fill-opacity:1;fill-rule:evenodd;stroke:#ffffff;stroke-width:0.99999994;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dashoffset:0.69999992;stroke-opacity:1"
+       id="path7627"
+       d="M 22.5,14.78125 L 22.5,33.21875 L 38.03125,24 L 22.5,14.78125 z" />
+    <rect
+       style="fill:none;fill-opacity:1;fill-rule:evenodd;stroke:#ffffff;stroke-width:1;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0.69999992;stroke-opacity:1"
+       id="rect7625"
+       width="3.0097761"
+       height="21.000002"
+       x="40.516052"
+       y="13.5"
+       rx="0"
+       ry="0" />
+    <path
+       sodipodi:type="inkscape:offset"
+       inkscape:radius="-0.5"
+       inkscape:original="M 40.0625 12.5 C 39.756455 12.5 39.5 12.756455 39.5 13.0625 L 39.5 23.6875 L 21.5 13 L 21.5 23.6875 L 3.5 13 L 3.5 35 L 21.5 24.3125 L 21.5 35 L 39.5 24.3125 L 39.5 34.9375 C 39.5 35.243545 39.756457 35.500002 40.0625 35.5 L 43.9375 35.5 C 44.243545 35.5 44.500001 35.243545 44.5 34.9375 L 44.5 13.0625 C 44.5 12.756455 44.243544 12.5 43.9375 12.5 L 40.0625 12.5 z "
+       style="opacity:0.15;fill:url(#linearGradient10276);fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:1;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0.69999992;stroke-opacity:1"
+       id="path7386"
+       d="M 40.0625,13 C 40.035777,13 40,13.035777 40,13.0625 L 40,23.6875 C 39.995694,23.802981 39.951524,23.913406 39.875,24 C 39.951524,24.086594 39.995694,24.197019 40,24.3125 L 40,34.9375 C 40,34.964221 40.035784,35 40.0625,35 L 43.9375,35 C 43.964223,35 44,34.964221 44,34.9375 L 44,13.0625 C 44,13.035778 43.964221,13 43.9375,13 L 40.0625,13 z M 4,13.875 L 4,34.125 L 21.03125,24 L 4,13.875 z M 22,13.875 L 22,23.6875 C 21.995694,23.802981 21.951524,23.913406 21.875,24 C 21.951524,24.086594 21.995694,24.197019 22,24.3125 L 22,34.125 L 39.03125,24 L 22,13.875 z"
+       transform="matrix(1,0,0,-1,0,48)" />
+  </g>
+</svg>

Added: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_icons/scalable/next-frame.svg
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_icons/scalable/next-frame.svg	2009-07-23 18:18:50 UTC (rev 5134)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_icons/scalable/next-frame.svg	2009-07-23 18:18:52 UTC (rev 5135)
@@ -0,0 +1,548 @@
+<?xml version="1.0" encoding="UTF-8" standalone="no"?>
+<!-- Created with Inkscape (http://www.inkscape.org/) -->
+<svg
+   xmlns:dc="http://purl.org/dc/elements/1.1/"
+   xmlns:cc="http://creativecommons.org/ns#"
+   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
+   xmlns:svg="http://www.w3.org/2000/svg"
+   xmlns="http://www.w3.org/2000/svg"
+   xmlns:xlink="http://www.w3.org/1999/xlink"
+   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"
+   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"
+   width="48"
+   height="48"
+   id="svg7854"
+   sodipodi:version="0.32"
+   inkscape:version="0.46"
+   version="1.0"
+   sodipodi:docbase="/home/dobey/Projects/gnome-icon-theme/scalable/actions"
+   sodipodi:docname="next-frame.svg"
+   inkscape:output_extension="org.inkscape.output.svg.inkscape"
+   inkscape:export-filename="/data/Avidemux/nove ikony/next-frame.png"
+   inkscape:export-xdpi="76.153847"
+   inkscape:export-ydpi="76.153847">
+  <defs
+     id="defs7856">
+    <inkscape:perspective
+       sodipodi:type="inkscape:persp3d"
+       inkscape:vp_x="0 : 24 : 1"
+       inkscape:vp_y="0 : 1000 : 0"
+       inkscape:vp_z="48 : 24 : 1"
+       inkscape:persp3d-origin="24 : 16 : 1"
+       id="perspective54" />
+    <linearGradient
+       id="linearGradient7577">
+      <stop
+         style="stop-color:#000000;stop-opacity:0.3137255;"
+         offset="0"
+         id="stop7579" />
+      <stop
+         style="stop-color:#ffffff;stop-opacity:1"
+         offset="1"
+         id="stop7581" />
+    </linearGradient>
+    <linearGradient
+       id="linearGradient7305">
+      <stop
+         style="stop-color:#ffffff;stop-opacity:1"
+         offset="0"
+         id="stop7307" />
+      <stop
+         id="stop7313"
+         offset="0.20971029"
+         style="stop-color:#ffffff;stop-opacity:0;" />
+      <stop
+         style="stop-color:#ffffff;stop-opacity:0.81065089;"
+         offset="0.34936365"
+         id="stop7329" />
+      <stop
+         id="stop7321"
+         offset="0.42850056"
+         style="stop-color:#ffffff;stop-opacity:0;" />
+      <stop
+         style="stop-color:#ffffff;stop-opacity:1;"
+         offset="0.52134049"
+         id="stop7323" />
+      <stop
+         id="stop7317"
+         offset="0.55746967"
+         style="stop-color:#ffffff;stop-opacity:0;" />
+      <stop
+         style="stop-color:#ffffff;stop-opacity:0.56804734;"
+         offset="0.71001518"
+         id="stop7319" />
+      <stop
+         id="stop7416"
+         offset="0.74394959"
+         style="stop-color:#ffffff;stop-opacity:0;" />
+      <stop
+         style="stop-color:#ffffff;stop-opacity:0"
+         offset="1"
+         id="stop7309" />
+    </linearGradient>
+    <linearGradient
+       id="linearGradient7344">
+      <stop
+         id="stop7346"
+         offset="0"
+         style="stop-color:#ffffff;stop-opacity:1;" />
+      <stop
+         id="stop7348"
+         offset="1"
+         style="stop-color:#3465a4;stop-opacity:1;" />
+    </linearGradient>
+    <linearGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient7577"
+       id="linearGradient7762"
+       gradientUnits="userSpaceOnUse"
+       x1="-77.711723"
+       y1="13.246527"
+       x2="-74.288277"
+       y2="26.023027" />
+    <radialGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient7344"
+       id="radialGradient7764"
+       gradientUnits="userSpaceOnUse"
+       gradientTransform="matrix(2.2246612,0,0,2.3034327,-120.62956,-41.851943)"
+       cx="28.541149"
+       cy="31.678772"
+       fx="28.541149"
+       fy="31.678772"
+       r="12.000001" />
+    <radialGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient7344"
+       id="radialGradient7766"
+       gradientUnits="userSpaceOnUse"
+       gradientTransform="matrix(1.8811669,0,0,1.5641941,82.169231,0.3959845)"
+       cx="36.455379"
+       cy="17.414564"
+       fx="36.455379"
+       fy="17.414564"
+       r="13.55237" />
+    <radialGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient7344"
+       id="radialGradient7768"
+       gradientUnits="userSpaceOnUse"
+       gradientTransform="matrix(1.8811669,0,0,1.5641941,82.169231,0.3959845)"
+       cx="36.455379"
+       cy="17.414564"
+       fx="36.455379"
+       fy="17.414564"
+       r="13.55237" />
+    <linearGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient7305"
+       id="linearGradient7770"
+       gradientUnits="userSpaceOnUse"
+       x1="0.17084506"
+       y1="10.331141"
+       x2="47.954166"
+       y2="37.918854" />
+    <linearGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient7577"
+       id="linearGradient2448"
+       gradientUnits="userSpaceOnUse"
+       x1="-77.711723"
+       y1="13.246527"
+       x2="-74.288277"
+       y2="26.023027" />
+    <radialGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient7344"
+       id="radialGradient2450"
+       gradientUnits="userSpaceOnUse"
+       gradientTransform="matrix(2.2246612,0,0,2.3034327,-120.62956,-41.851943)"
+       cx="28.541149"
+       cy="31.678772"
+       fx="28.541149"
+       fy="31.678772"
+       r="12.000001" />
+    <radialGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient7344"
+       id="radialGradient2452"
+       gradientUnits="userSpaceOnUse"
+       gradientTransform="matrix(1.8811669,0,0,1.5641941,82.169231,0.3959845)"
+       cx="36.455379"
+       cy="17.414564"
+       fx="36.455379"
+       fy="17.414564"
+       r="13.55237" />
+    <radialGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient7344"
+       id="radialGradient2454"
+       gradientUnits="userSpaceOnUse"
+       gradientTransform="matrix(1.8811669,0,0,1.5641941,82.169231,0.3959845)"
+       cx="36.455379"
+       cy="17.414564"
+       fx="36.455379"
+       fy="17.414564"
+       r="13.55237" />
+    <linearGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient7305"
+       id="linearGradient2456"
+       gradientUnits="userSpaceOnUse"
+       x1="0.17084506"
+       y1="10.331141"
+       x2="47.954166"
+       y2="37.918854" />
+    <radialGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient7344"
+       id="radialGradient2477"
+       gradientUnits="userSpaceOnUse"
+       gradientTransform="matrix(2.2246612,0,0,2.3034327,-120.62956,-41.851943)"
+       cx="28.541149"
+       cy="31.678772"
+       fx="28.541149"
+       fy="31.678772"
+       r="12.000001" />
+    <radialGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient7344"
+       id="radialGradient2479"
+       gradientUnits="userSpaceOnUse"
+       gradientTransform="matrix(1.8811669,0,0,1.5641941,82.169231,0.3959845)"
+       cx="36.455379"
+       cy="17.414564"
+       fx="36.455379"
+       fy="17.414564"
+       r="13.55237" />
+    <radialGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient7344"
+       id="radialGradient2481"
+       gradientUnits="userSpaceOnUse"
+       gradientTransform="matrix(1.8811669,0,0,1.5641941,82.169231,0.3959845)"
+       cx="36.455379"
+       cy="17.414564"
+       fx="36.455379"
+       fy="17.414564"
+       r="13.55237" />
+    <linearGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient7305"
+       id="linearGradient2483"
+       gradientUnits="userSpaceOnUse"
+       x1="0.17084506"
+       y1="10.331141"
+       x2="47.954166"
+       y2="37.918854" />
+    <radialGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient7344"
+       id="radialGradient2494"
+       gradientUnits="userSpaceOnUse"
+       gradientTransform="matrix(2.2246612,0,0,2.3034327,-20.62956,-41.851943)"
+       cx="28.541149"
+       cy="31.678772"
+       fx="28.541149"
+       fy="31.678772"
+       r="12.000001" />
+    <linearGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient7305"
+       id="linearGradient2496"
+       gradientUnits="userSpaceOnUse"
+       x1="0.17084506"
+       y1="10.331141"
+       x2="47.954166"
+       y2="37.918854"
+       gradientTransform="matrix(1,0,0,-1,0,48)" />
+    <linearGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient7577"
+       id="linearGradient2498"
+       gradientUnits="userSpaceOnUse"
+       x1="-77.711723"
+       y1="13.246527"
+       x2="-74.288277"
+       y2="26.023027"
+       gradientTransform="translate(100,0)" />
+    <linearGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient7577"
+       id="linearGradient2513"
+       gradientUnits="userSpaceOnUse"
+       gradientTransform="translate(100,0)"
+       x1="-77.711723"
+       y1="13.246527"
+       x2="-74.288277"
+       y2="26.023027" />
+    <radialGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient7344"
+       id="radialGradient2515"
+       gradientUnits="userSpaceOnUse"
+       gradientTransform="matrix(2.2246612,0,0,2.3034327,-20.62956,-41.851943)"
+       cx="28.541149"
+       cy="31.678772"
+       fx="28.541149"
+       fy="31.678772"
+       r="12.000001" />
+    <radialGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient7344"
+       id="radialGradient2517"
+       gradientUnits="userSpaceOnUse"
+       gradientTransform="matrix(1.8811669,0,0,1.5641941,82.169231,0.3959845)"
+       cx="36.455379"
+       cy="17.414564"
+       fx="36.455379"
+       fy="17.414564"
+       r="13.55237" />
+    <linearGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient7305"
+       id="linearGradient2519"
+       gradientUnits="userSpaceOnUse"
+       gradientTransform="matrix(1,0,0,-1,0,48)"
+       x1="0.17084506"
+       y1="10.331141"
+       x2="47.954166"
+       y2="37.918854" />
+    <linearGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient7305"
+       id="linearGradient5512"
+       gradientUnits="userSpaceOnUse"
+       gradientTransform="matrix(1,0,0,-1,-8,48)"
+       x1="0.17084506"
+       y1="10.331141"
+       x2="47.954166"
+       y2="37.918854" />
+    <radialGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient7344"
+       id="radialGradient5519"
+       gradientUnits="userSpaceOnUse"
+       gradientTransform="matrix(2.2246612,0,0,2.3034327,-28.62956,-41.851943)"
+       cx="28.541149"
+       cy="31.678772"
+       fx="28.541149"
+       fy="31.678772"
+       r="12.000001" />
+    <linearGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient7577"
+       id="linearGradient5522"
+       gradientUnits="userSpaceOnUse"
+       gradientTransform="translate(92,0)"
+       x1="-77.711723"
+       y1="13.246527"
+       x2="-74.288277"
+       y2="26.023027" />
+    <radialGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient7344"
+       id="radialGradient5524"
+       gradientUnits="userSpaceOnUse"
+       gradientTransform="matrix(1.8811669,0,0,1.5641941,82.169231,0.3959845)"
+       cx="36.455379"
+       cy="17.414564"
+       fx="36.455379"
+       fy="17.414564"
+       r="13.55237" />
+    <radialGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient7344"
+       id="radialGradient5528"
+       gradientUnits="userSpaceOnUse"
+       gradientTransform="matrix(1.8811669,0,0,1.5641941,-45.830769,0.3959845)"
+       cx="36.455379"
+       cy="17.414564"
+       fx="36.455379"
+       fy="17.414564"
+       r="13.55237" />
+  </defs>
+  <sodipodi:namedview
+     id="base"
+     pagecolor="#ffffff"
+     bordercolor="#afafaf"
+     borderopacity="1"
+     gridtolerance="10000"
+     guidetolerance="10"
+     objecttolerance="10"
+     inkscape:pageopacity="0"
+     inkscape:pageshadow="2"
+     inkscape:zoom="18.370197"
+     inkscape:cx="34.705099"
+     inkscape:cy="25.711063"
+     inkscape:document-units="px"
+     inkscape:current-layer="layer1"
+     width="48px"
+     height="48px"
+     inkscape:showpageshadow="false"
+     inkscape:window-width="1440"
+     inkscape:window-height="850"
+     inkscape:window-x="0"
+     inkscape:window-y="0"
+     showgrid="false"
+     inkscape:grid-points="true"
+     showborder="true"
+     showguides="false"
+     inkscape:guide-bbox="true"
+     borderlayer="true">
+    <sodipodi:guide
+       orientation="horizontal"
+       position="13.125"
+       id="guide7377" />
+    <sodipodi:guide
+       orientation="horizontal"
+       position="5.4800776"
+       id="guide7379" />
+    <sodipodi:guide
+       orientation="horizontal"
+       position="35"
+       id="guide7492" />
+    <sodipodi:guide
+       orientation="horizontal"
+       position="48"
+       id="guide7046" />
+    <sodipodi:guide
+       orientation="horizontal"
+       position="-17.5"
+       id="guide7233" />
+    <sodipodi:guide
+       orientation="horizontal"
+       position="-29"
+       id="guide7235" />
+    <sodipodi:guide
+       orientation="horizontal"
+       position="22.097087"
+       id="guide7556" />
+    <sodipodi:guide
+       orientation="vertical"
+       position="-76.125"
+       id="guide7644" />
+    <sodipodi:guide
+       orientation="vertical"
+       position="-26.125"
+       id="guide7646" />
+    <sodipodi:guide
+       orientation="vertical"
+       position="24"
+       id="guide7648" />
+    <sodipodi:guide
+       orientation="vertical"
+       position="-125.28125"
+       id="guide7665" />
+    <sodipodi:guide
+       orientation="vertical"
+       position="-175.125"
+       id="guide7667" />
+    <sodipodi:guide
+       orientation="vertical"
+       position="-225.83223"
+       id="guide7685" />
+    <sodipodi:guide
+       orientation="vertical"
+       position="-326.06462"
+       id="guide7695" />
+    <inkscape:grid
+       id="GridFromPre046Settings"
+       type="xygrid"
+       originx="0px"
+       originy="0px"
+       spacingx="0.5px"
+       spacingy="0.5px"
+       color="#0000ff"
+       empcolor="#0000ff"
+       opacity="0.2"
+       empopacity="0.4"
+       empspacing="2" />
+  </sodipodi:namedview>
+  <metadata
+     id="metadata7859">
+    <rdf:RDF>
+      <cc:Work
+         rdf:about="">
+        <dc:format>image/svg+xml</dc:format>
+        <dc:type
+           rdf:resource="http://purl.org/dc/dcmitype/StillImage" />
+        <dc:creator>
+          <cc:Agent>
+            <dc:title>Lapo Calamandrei</dc:title>
+          </cc:Agent>
+        </dc:creator>
+        <dc:source />
+        <cc:license
+           rdf:resource="http://creativecommons.org/licenses/GPL/2.0/" />
+        <dc:title>Next Song</dc:title>
+        <dc:subject>
+          <rdf:Bag>
+            <rdf:li>skip</rdf:li>
+            <rdf:li>forward</rdf:li>
+            <rdf:li>next</rdf:li>
+          </rdf:Bag>
+        </dc:subject>
+      </cc:Work>
+      <cc:License
+         rdf:about="http://creativecommons.org/licenses/GPL/2.0/">
+        <cc:permits
+           rdf:resource="http://web.resource.org/cc/Reproduction" />
+        <cc:permits
+           rdf:resource="http://web.resource.org/cc/Distribution" />
+        <cc:requires
+           rdf:resource="http://web.resource.org/cc/Notice" />
+        <cc:permits
+           rdf:resource="http://web.resource.org/cc/DerivativeWorks" />
+        <cc:requires
+           rdf:resource="http://web.resource.org/cc/ShareAlike" />
+        <cc:requires
+           rdf:resource="http://web.resource.org/cc/SourceCode" />
+      </cc:License>
+    </rdf:RDF>
+  </metadata>
+  <g
+     inkscape:label="Layer 1"
+     inkscape:groupmode="layer"
+     id="layer1">
+    <path
+       style="opacity:0.4;fill:url(#linearGradient5522);fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:1;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0.69999992;stroke-opacity:1"
+       d="M 32.0625,11 C 30.916673,11 30,11.916673 30,13.0625 L 30,21.0625 L 14.28125,11.71875 C 13.817778,11.438527 13.253469,11.422281 12.78125,11.6875 C 12.309032,11.952719 12.001902,12.458403 12,13 L 12,21.0625 L 12,26.9375 L 12,35 C 12.001902,35.541597 12.309031,36.047281 12.78125,36.3125 C 13.253469,36.577717 13.817778,36.561473 14.28125,36.28125 L 30,26.9375 L 30,34.9375 C 30,36.083333 30.916658,37.000007 32.0625,37 L 35.9375,37 C 37.083327,37 38.000004,36.083333 38,34.9375 L 38,13.0625 C 38,11.91667 37.083328,11 35.9375,11 L 32.0625,11 z"
+       id="path7638" />
+    <rect
+       style="fill:url(#radialGradient5519);fill-opacity:1;fill-rule:evenodd;stroke:#204a87;stroke-width:1;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0.69999992000000000;stroke-opacity:1"
+       id="rect7623"
+       width="4.9886603"
+       height="23.000002"
+       x="31.511337"
+       y="12.5"
+       rx="0.55242717"
+       ry="0.55242717" />
+    <path
+       style="fill:url(#radialGradient5528);fill-opacity:1;fill-rule:evenodd;stroke:#204a87;stroke-width:0.99999994000000003;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dashoffset:0.69999992000000000;stroke-opacity:1"
+       d="M 13.5,35 L 13.5,13.000461 L 31.99577,24.010194 L 13.5,35 z"
+       id="path7621"
+       sodipodi:nodetypes="cccc" />
+    <path
+       sodipodi:type="inkscape:offset"
+       inkscape:radius="-1.0054175"
+       inkscape:original="M 21.5 13 L 21.5 35 L 40 24 L 21.5 13 z "
+       style="fill:none;fill-opacity:1;fill-rule:evenodd;stroke:#ffffff;stroke-width:0.99999994;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dashoffset:0.69999992;stroke-opacity:1"
+       id="path7627"
+       d="M 22.5,14.78125 L 22.5,33.21875 L 38.03125,24 L 22.5,14.78125 z"
+       transform="translate(-8,0)" />
+    <rect
+       style="fill:none;fill-opacity:1;fill-rule:evenodd;stroke:#ffffff;stroke-width:1;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0.69999992;stroke-opacity:1"
+       id="rect7625"
+       width="3.0097761"
+       height="21.000002"
+       x="32.516052"
+       y="13.5"
+       rx="0"
+       ry="0" />
+    <path
+       style="opacity:0.15;fill:url(#linearGradient5512);fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:1;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0.69999992;stroke-opacity:1"
+       d="M 32.0625,13 C 32.035784,13 32,13.035779 32,13.0625 L 32,23.6875 C 31.995694,23.802981 31.951524,23.913406 31.875,24 C 31.951524,24.086594 31.995694,24.197019 32,24.3125 L 32,34.9375 C 32,34.964223 32.035777,35 32.0625,35 L 35.9375,35 C 35.964221,35 36,34.964222 36,34.9375 L 36,13.0625 C 36,13.035779 35.964223,13 35.9375,13 L 32.0625,13 z M 14,13.875 L 14,23.6875 C 13.995694,23.802981 13.951524,23.913406 13.875,24 C 13.951524,24.086594 13.995694,24.197019 14,24.3125 L 14,34.125 L 31.03125,24 L 14,13.875 z M 12,23.375 L 12,24.625 L 13.03125,24 L 12,23.375 z"
+       id="path7386" />
+  </g>
+</svg>

Added: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_icons/scalable/next-key-frame.svg
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_icons/scalable/next-key-frame.svg	2009-07-23 18:18:50 UTC (rev 5134)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_icons/scalable/next-key-frame.svg	2009-07-23 18:18:52 UTC (rev 5135)
@@ -0,0 +1,418 @@
+<?xml version="1.0" encoding="UTF-8" standalone="no"?>
+<!-- Created with Inkscape (http://www.inkscape.org/) -->
+<svg
+   xmlns:dc="http://purl.org/dc/elements/1.1/"
+   xmlns:cc="http://creativecommons.org/ns#"
+   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
+   xmlns:svg="http://www.w3.org/2000/svg"
+   xmlns="http://www.w3.org/2000/svg"
+   xmlns:xlink="http://www.w3.org/1999/xlink"
+   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"
+   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"
+   width="48"
+   height="48"
+   id="svg7854"
+   sodipodi:version="0.32"
+   inkscape:version="0.46"
+   version="1.0"
+   sodipodi:docbase="/home/dobey/Projects/gnome-icon-theme/scalable/actions"
+   sodipodi:docname="next-key-frame.svg"
+   inkscape:output_extension="org.inkscape.output.svg.inkscape"
+   inkscape:export-filename="/data/Avidemux/nove ikony/next-key-frame-2.png"
+   inkscape:export-xdpi="79.239029"
+   inkscape:export-ydpi="79.239029">
+  <defs
+     id="defs7856">
+    <inkscape:perspective
+       sodipodi:type="inkscape:persp3d"
+       inkscape:vp_x="0 : 24 : 1"
+       inkscape:vp_y="0 : 1000 : 0"
+       inkscape:vp_z="48 : 24 : 1"
+       inkscape:persp3d-origin="24 : 16 : 1"
+       id="perspective7588" />
+    <linearGradient
+       id="linearGradient7577">
+      <stop
+         style="stop-color:#000000;stop-opacity:0.3137255;"
+         offset="0"
+         id="stop7579" />
+      <stop
+         style="stop-color:#ffffff;stop-opacity:1"
+         offset="1"
+         id="stop7581" />
+    </linearGradient>
+    <linearGradient
+       id="linearGradient7305">
+      <stop
+         style="stop-color:#ffffff;stop-opacity:1"
+         offset="0"
+         id="stop7307" />
+      <stop
+         id="stop7313"
+         offset="0.20971029"
+         style="stop-color:#ffffff;stop-opacity:0;" />
+      <stop
+         style="stop-color:#ffffff;stop-opacity:0.81065089;"
+         offset="0.34936365"
+         id="stop7329" />
+      <stop
+         id="stop7321"
+         offset="0.42850056"
+         style="stop-color:#ffffff;stop-opacity:0;" />
+      <stop
+         style="stop-color:#ffffff;stop-opacity:1;"
+         offset="0.52134049"
+         id="stop7323" />
+      <stop
+         id="stop7317"
+         offset="0.55746967"
+         style="stop-color:#ffffff;stop-opacity:0;" />
+      <stop
+         style="stop-color:#ffffff;stop-opacity:0.56804734;"
+         offset="0.71001518"
+         id="stop7319" />
+      <stop
+         id="stop7416"
+         offset="0.74394959"
+         style="stop-color:#ffffff;stop-opacity:0;" />
+      <stop
+         style="stop-color:#ffffff;stop-opacity:0"
+         offset="1"
+         id="stop7309" />
+    </linearGradient>
+    <linearGradient
+       id="linearGradient7344">
+      <stop
+         id="stop7346"
+         offset="0"
+         style="stop-color:#ffffff;stop-opacity:1;" />
+      <stop
+         id="stop7348"
+         offset="1"
+         style="stop-color:#3465a4;stop-opacity:1;" />
+    </linearGradient>
+    <linearGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient7577"
+       id="linearGradient7871"
+       gradientUnits="userSpaceOnUse"
+       x1="-127.01692"
+       y1="12.838128"
+       x2="-123.49838"
+       y2="25.969481" />
+    <radialGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient7344"
+       id="radialGradient7873"
+       gradientUnits="userSpaceOnUse"
+       gradientTransform="matrix(1.8811669,0,0,1.5641941,82.169231,0.3959845)"
+       cx="36.455379"
+       cy="17.414564"
+       fx="36.455379"
+       fy="17.414564"
+       r="13.55237" />
+    <radialGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient7344"
+       id="radialGradient7875"
+       gradientUnits="userSpaceOnUse"
+       gradientTransform="matrix(1.8811669,0,0,1.5641941,82.169231,0.3959845)"
+       cx="36.455379"
+       cy="17.414564"
+       fx="36.455379"
+       fy="17.414564"
+       r="13.55237" />
+    <linearGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient7305"
+       id="linearGradient7877"
+       gradientUnits="userSpaceOnUse"
+       x1="-0.0034508049"
+       y1="10.04301"
+       x2="48.128452"
+       y2="37.831978" />
+    <radialGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient7344"
+       id="radialGradient7600"
+       gradientUnits="userSpaceOnUse"
+       gradientTransform="matrix(1.8811669,0,0,1.5641941,82.169231,0.3959845)"
+       cx="36.455379"
+       cy="17.414564"
+       fx="36.455379"
+       fy="17.414564"
+       r="13.55237" />
+    <radialGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient7344"
+       id="radialGradient7602"
+       gradientUnits="userSpaceOnUse"
+       gradientTransform="matrix(1.8811669,0,0,1.5641941,82.169231,0.3959845)"
+       cx="36.455379"
+       cy="17.414564"
+       fx="36.455379"
+       fy="17.414564"
+       r="13.55237" />
+    <linearGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient7305"
+       id="linearGradient7604"
+       gradientUnits="userSpaceOnUse"
+       x1="-0.0034508049"
+       y1="10.04301"
+       x2="48.128452"
+       y2="37.831978" />
+    <radialGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient7344"
+       id="radialGradient7614"
+       gradientUnits="userSpaceOnUse"
+       gradientTransform="matrix(1.8811669,0,0,1.5641941,82.169231,0.3959845)"
+       cx="36.455379"
+       cy="17.414564"
+       fx="36.455379"
+       fy="17.414564"
+       r="13.55237" />
+    <radialGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient7344"
+       id="radialGradient7616"
+       gradientUnits="userSpaceOnUse"
+       gradientTransform="matrix(1.8811669,0,0,1.5641941,82.169231,0.3959845)"
+       cx="36.455379"
+       cy="17.414564"
+       fx="36.455379"
+       fy="17.414564"
+       r="13.55237" />
+    <radialGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient7344"
+       id="radialGradient7624"
+       gradientUnits="userSpaceOnUse"
+       gradientTransform="matrix(1.8811669,0,0,1.5641941,82.169231,0.3959845)"
+       cx="36.455379"
+       cy="17.414564"
+       fx="36.455379"
+       fy="17.414564"
+       r="13.55237" />
+    <radialGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient7344"
+       id="radialGradient7628"
+       gradientUnits="userSpaceOnUse"
+       gradientTransform="matrix(1.8811669,0,0,1.5641941,-34.830769,0.3959845)"
+       cx="36.455379"
+       cy="17.414564"
+       fx="36.455379"
+       fy="17.414564"
+       r="13.55237" />
+    <radialGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient7344"
+       id="radialGradient7630"
+       gradientUnits="userSpaceOnUse"
+       gradientTransform="matrix(1.8811669,0,0,1.5641941,82.169231,0.3959845)"
+       cx="36.455379"
+       cy="17.414564"
+       fx="36.455379"
+       fy="17.414564"
+       r="13.55237" />
+    <radialGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient7344"
+       id="radialGradient7634"
+       gradientUnits="userSpaceOnUse"
+       gradientTransform="matrix(1.8811669,0,0,1.5641941,-52.830769,0.3959845)"
+       cx="36.455379"
+       cy="17.414564"
+       fx="36.455379"
+       fy="17.414564"
+       r="13.55237" />
+  </defs>
+  <sodipodi:namedview
+     id="base"
+     pagecolor="#ffffff"
+     bordercolor="#afafaf"
+     borderopacity="1"
+     gridtolerance="10000"
+     guidetolerance="10"
+     objecttolerance="10"
+     inkscape:pageopacity="0"
+     inkscape:pageshadow="2"
+     inkscape:zoom="13.12"
+     inkscape:cx="7.6217489"
+     inkscape:cy="19.974135"
+     inkscape:document-units="px"
+     inkscape:current-layer="layer1"
+     width="48px"
+     height="48px"
+     inkscape:showpageshadow="false"
+     inkscape:window-width="1176"
+     inkscape:window-height="846"
+     inkscape:window-x="-80"
+     inkscape:window-y="0"
+     showgrid="false"
+     inkscape:grid-points="true"
+     showborder="true"
+     showguides="false"
+     inkscape:guide-bbox="true"
+     borderlayer="true">
+    <sodipodi:guide
+       orientation="horizontal"
+       position="13.125"
+       id="guide7377" />
+    <sodipodi:guide
+       orientation="horizontal"
+       position="5.4800776"
+       id="guide7379" />
+    <sodipodi:guide
+       orientation="horizontal"
+       position="35"
+       id="guide7492" />
+    <sodipodi:guide
+       orientation="horizontal"
+       position="48"
+       id="guide7046" />
+    <sodipodi:guide
+       orientation="horizontal"
+       position="-17.5"
+       id="guide7233" />
+    <sodipodi:guide
+       orientation="horizontal"
+       position="-29"
+       id="guide7235" />
+    <sodipodi:guide
+       orientation="horizontal"
+       position="22.097087"
+       id="guide7556" />
+    <sodipodi:guide
+       orientation="vertical"
+       position="-76.125"
+       id="guide7644" />
+    <sodipodi:guide
+       orientation="vertical"
+       position="-26.125"
+       id="guide7646" />
+    <sodipodi:guide
+       orientation="vertical"
+       position="24"
+       id="guide7648" />
+    <sodipodi:guide
+       orientation="vertical"
+       position="-125.28125"
+       id="guide7665" />
+    <sodipodi:guide
+       orientation="vertical"
+       position="-175.125"
+       id="guide7667" />
+    <sodipodi:guide
+       orientation="vertical"
+       position="-225.83223"
+       id="guide7685" />
+    <sodipodi:guide
+       orientation="vertical"
+       position="-326.06462"
+       id="guide7695" />
+    <inkscape:grid
+       id="GridFromPre046Settings"
+       type="xygrid"
+       originx="0px"
+       originy="0px"
+       spacingx="0.5px"
+       spacingy="0.5px"
+       color="#0000ff"
+       empcolor="#0000ff"
+       opacity="0.2"
+       empopacity="0.4"
+       empspacing="2" />
+  </sodipodi:namedview>
+  <metadata
+     id="metadata7859">
+    <rdf:RDF>
+      <cc:Work
+         rdf:about="">
+        <dc:format>image/svg+xml</dc:format>
+        <dc:type
+           rdf:resource="http://purl.org/dc/dcmitype/StillImage" />
+        <dc:creator>
+          <cc:Agent>
+            <dc:title>Lapo Calamandrei</dc:title>
+          </cc:Agent>
+        </dc:creator>
+        <dc:source />
+        <cc:license
+           rdf:resource="http://creativecommons.org/licenses/GPL/2.0/" />
+        <dc:title>Fast Forward</dc:title>
+        <dc:subject>
+          <rdf:Bag>
+            <rdf:li>seek</rdf:li>
+            <rdf:li>forward</rdf:li>
+            <rdf:li>ff</rdf:li>
+          </rdf:Bag>
+        </dc:subject>
+      </cc:Work>
+      <cc:License
+         rdf:about="http://creativecommons.org/licenses/GPL/2.0/">
+        <cc:permits
+           rdf:resource="http://web.resource.org/cc/Reproduction" />
+        <cc:permits
+           rdf:resource="http://web.resource.org/cc/Distribution" />
+        <cc:requires
+           rdf:resource="http://web.resource.org/cc/Notice" />
+        <cc:permits
+           rdf:resource="http://web.resource.org/cc/DerivativeWorks" />
+        <cc:requires
+           rdf:resource="http://web.resource.org/cc/ShareAlike" />
+        <cc:requires
+           rdf:resource="http://web.resource.org/cc/SourceCode" />
+      </cc:License>
+    </rdf:RDF>
+  </metadata>
+  <g
+     inkscape:label="Layer 1"
+     inkscape:groupmode="layer"
+     id="layer1">
+    <path
+       sodipodi:type="inkscape:offset"
+       inkscape:radius="1.484375"
+       inkscape:original="M -143.5 13 L -143.5 35 L -125.5 24.3125 L -125.5 35 L -107 24 L -125.5 13 L -125.5 23.6875 L -143.5 13 z "
+       style="opacity:0.4;fill:url(#linearGradient7871);fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:0.99999994;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dashoffset:0.69999992;stroke-opacity:1"
+       id="path7659"
+       d="M -143.75,11.53125 C -144.47126,11.646642 -145.00141,12.269567 -145,13 L -145,35 C -145.00337,35.536848 -144.71663,36.033688 -144.25011,36.299347 C -143.78358,36.565005 -143.20998,36.558085 -142.75,36.28125 L -127,26.9375 L -127,35 C -127.00337,35.536848 -126.71663,36.033688 -126.25011,36.299347 C -125.78358,36.565005 -125.20998,36.558085 -124.75,36.28125 L -106.25,25.28125 C -105.79494,25.014944 -105.51528,24.527253 -105.51528,24 C -105.51528,23.472747 -105.79494,22.985056 -106.25,22.71875 L -124.75,11.71875 C -125.20998,11.441915 -125.78358,11.434995 -126.25011,11.700653 C -126.71663,11.966312 -127.00337,12.463152 -127,13 L -127,21.0625 L -142.75,11.71875 C -143.05084,11.540409 -143.40499,11.474007 -143.75,11.53125 L -143.75,11.53125 z"
+       transform="translate(150,0)" />
+    <path
+       style="fill:url(#radialGradient7634);fill-opacity:1;fill-rule:evenodd;stroke:#204a87;stroke-width:0.99999994000000003;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dashoffset:0.69999992000000000;stroke-opacity:1"
+       d="M 6.5,35 L 6.5,13.000461 L 24.99577,24.010194 L 6.5,35 z"
+       id="path8027"
+       sodipodi:nodetypes="cccc" />
+    <path
+       sodipodi:type="inkscape:offset"
+       inkscape:radius="-1.0054175"
+       inkscape:original="M 21.5 13 L 21.5 35 L 40 24 L 21.5 13 z "
+       style="fill:none;fill-opacity:1;fill-rule:evenodd;stroke:#ffffff;stroke-width:0.99999994;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dashoffset:0.69999992;stroke-opacity:1"
+       id="path8029"
+       d="M 22.5,14.78125 L 22.5,33.21875 L 38.03125,24 L 22.5,14.78125 z"
+       transform="translate(-15,0)" />
+    <path
+       style="fill:url(#radialGradient7628);fill-opacity:1;fill-rule:evenodd;stroke:#204a87;stroke-width:0.99999994000000003;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dashoffset:0.69999992000000000;stroke-opacity:1"
+       d="M 24.5,35 L 24.5,13.000461 L 42.99577,24.010194 L 24.5,35 z"
+       id="path8033"
+       sodipodi:nodetypes="cccc" />
+    <path
+       sodipodi:type="inkscape:offset"
+       inkscape:radius="-1.0054175"
+       inkscape:original="M 21.5 13 L 21.5 35 L 40 24 L 21.5 13 z "
+       style="fill:none;fill-opacity:1;fill-rule:evenodd;stroke:#ffffff;stroke-width:0.99999994;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dashoffset:0.69999992;stroke-opacity:1"
+       id="path8035"
+       d="M 22.5,14.78125 L 22.5,33.21875 L 38.03125,24 L 22.5,14.78125 z"
+       transform="translate(3,0)" />
+    <path
+       sodipodi:type="inkscape:offset"
+       inkscape:radius="-0.5"
+       inkscape:original="M 6.5 13 L 6.5 35 L 24.5 24.3125 L 24.5 35 L 43 24 L 24.5 13 L 24.5 23.6875 L 6.5 13 z "
+       style="opacity:0.15;fill:url(#linearGradient7604);fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:0.99999994;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dashoffset:0.69999992;stroke-opacity:1"
+       id="path7369"
+       d="M 7,13.875 L 7,34.125 L 24.03125,24 L 7,13.875 z M 25,13.875 L 25,23.6875 C 24.995694,23.802981 24.951524,23.913406 24.875,24 C 24.951524,24.086594 24.995694,24.197019 25,24.3125 L 25,34.125 L 42,24 L 25,13.875 z"
+       transform="matrix(1,0,0,-1,0,48)" />
+  </g>
+</svg>

Added: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_icons/scalable/play.svg
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_icons/scalable/play.svg	2009-07-23 18:18:50 UTC (rev 5134)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_icons/scalable/play.svg	2009-07-23 18:18:52 UTC (rev 5135)
@@ -0,0 +1,295 @@
+<?xml version="1.0" encoding="UTF-8" standalone="no"?>
+<!-- Created with Inkscape (http://www.inkscape.org/) -->
+<svg
+   xmlns:dc="http://purl.org/dc/elements/1.1/"
+   xmlns:cc="http://creativecommons.org/ns#"
+   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
+   xmlns:svg="http://www.w3.org/2000/svg"
+   xmlns="http://www.w3.org/2000/svg"
+   xmlns:xlink="http://www.w3.org/1999/xlink"
+   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"
+   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"
+   width="48"
+   height="48"
+   id="svg7854"
+   sodipodi:version="0.32"
+   inkscape:version="0.46"
+   version="1.0"
+   sodipodi:docbase="/home/dobey/Projects/gnome-icon-theme/scalable/actions"
+   sodipodi:docname="play.svg"
+   inkscape:output_extension="org.inkscape.output.svg.inkscape"
+   inkscape:export-filename="/data/Avidemux/nove ikony/play.png"
+   inkscape:export-xdpi="66.040642"
+   inkscape:export-ydpi="66.040642">
+  <defs
+     id="defs7856">
+    <inkscape:perspective
+       sodipodi:type="inkscape:persp3d"
+       inkscape:vp_x="0 : 24 : 1"
+       inkscape:vp_y="0 : 1000 : 0"
+       inkscape:vp_z="48 : 24 : 1"
+       inkscape:persp3d-origin="24 : 16 : 1"
+       id="perspective3785" />
+    <linearGradient
+       id="linearGradient7577">
+      <stop
+         style="stop-color:#000000;stop-opacity:0.3137255;"
+         offset="0"
+         id="stop7579" />
+      <stop
+         style="stop-color:#ffffff;stop-opacity:1"
+         offset="1"
+         id="stop7581" />
+    </linearGradient>
+    <linearGradient
+       id="linearGradient7305">
+      <stop
+         style="stop-color:#ffffff;stop-opacity:1"
+         offset="0"
+         id="stop7307" />
+      <stop
+         id="stop7313"
+         offset="0.20971029"
+         style="stop-color:#ffffff;stop-opacity:0;" />
+      <stop
+         style="stop-color:#ffffff;stop-opacity:0.81065089;"
+         offset="0.34936365"
+         id="stop7329" />
+      <stop
+         id="stop7321"
+         offset="0.42850056"
+         style="stop-color:#ffffff;stop-opacity:0;" />
+      <stop
+         style="stop-color:#ffffff;stop-opacity:1;"
+         offset="0.52134049"
+         id="stop7323" />
+      <stop
+         id="stop7317"
+         offset="0.55746967"
+         style="stop-color:#ffffff;stop-opacity:0;" />
+      <stop
+         style="stop-color:#ffffff;stop-opacity:0.56804734;"
+         offset="0.71001518"
+         id="stop7319" />
+      <stop
+         id="stop7416"
+         offset="0.74394959"
+         style="stop-color:#ffffff;stop-opacity:0;" />
+      <stop
+         style="stop-color:#ffffff;stop-opacity:0"
+         offset="1"
+         id="stop7309" />
+    </linearGradient>
+    <linearGradient
+       id="linearGradient7344">
+      <stop
+         id="stop7346"
+         offset="0"
+         style="stop-color:#ffffff;stop-opacity:1;" />
+      <stop
+         id="stop7348"
+         offset="1"
+         style="stop-color:#73d216;stop-opacity:1;" />
+    </linearGradient>
+    <linearGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient7577"
+       id="linearGradient7865"
+       gradientUnits="userSpaceOnUse"
+       x1="-177.27766"
+       y1="9.2039175"
+       x2="-172.82857"
+       y2="25.808161" />
+    <linearGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient7305"
+       id="linearGradient3810"
+       gradientUnits="userSpaceOnUse"
+       x1="-0.11694507"
+       y1="10.14653"
+       x2="48.025963"
+       y2="37.941853" />
+    <radialGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient7344"
+       id="radialGradient3815"
+       gradientUnits="userSpaceOnUse"
+       gradientTransform="matrix(2.7391664,0,0,2.2478596,-74.857354,-10.683483)"
+       cx="36.126339"
+       cy="18.020473"
+       fx="36.126339"
+       fy="18.020473"
+       r="13.55237" />
+  </defs>
+  <sodipodi:namedview
+     id="base"
+     pagecolor="#ffffff"
+     bordercolor="#afafaf"
+     borderopacity="1"
+     gridtolerance="10000"
+     guidetolerance="10"
+     objecttolerance="10"
+     inkscape:pageopacity="0"
+     inkscape:pageshadow="2"
+     inkscape:zoom="17.30989"
+     inkscape:cx="14.532593"
+     inkscape:cy="24.981269"
+     inkscape:document-units="px"
+     inkscape:current-layer="layer1"
+     width="48px"
+     height="48px"
+     inkscape:showpageshadow="false"
+     inkscape:window-width="1411"
+     inkscape:window-height="846"
+     inkscape:window-x="0"
+     inkscape:window-y="0"
+     showgrid="false"
+     inkscape:grid-points="true"
+     showborder="true"
+     showguides="false"
+     inkscape:guide-bbox="true"
+     borderlayer="true">
+    <sodipodi:guide
+       orientation="horizontal"
+       position="13.125"
+       id="guide7377" />
+    <sodipodi:guide
+       orientation="horizontal"
+       position="5.4800776"
+       id="guide7379" />
+    <sodipodi:guide
+       orientation="horizontal"
+       position="35"
+       id="guide7492" />
+    <sodipodi:guide
+       orientation="horizontal"
+       position="48"
+       id="guide7046" />
+    <sodipodi:guide
+       orientation="horizontal"
+       position="-17.5"
+       id="guide7233" />
+    <sodipodi:guide
+       orientation="horizontal"
+       position="-29"
+       id="guide7235" />
+    <sodipodi:guide
+       orientation="horizontal"
+       position="22.097087"
+       id="guide7556" />
+    <sodipodi:guide
+       orientation="vertical"
+       position="-76.125"
+       id="guide7644" />
+    <sodipodi:guide
+       orientation="vertical"
+       position="-26.125"
+       id="guide7646" />
+    <sodipodi:guide
+       orientation="vertical"
+       position="24"
+       id="guide7648" />
+    <sodipodi:guide
+       orientation="vertical"
+       position="-125.28125"
+       id="guide7665" />
+    <sodipodi:guide
+       orientation="vertical"
+       position="-175.125"
+       id="guide7667" />
+    <sodipodi:guide
+       orientation="vertical"
+       position="-225.83223"
+       id="guide7685" />
+    <sodipodi:guide
+       orientation="vertical"
+       position="-326.06462"
+       id="guide7695" />
+    <inkscape:grid
+       id="GridFromPre046Settings"
+       type="xygrid"
+       originx="0px"
+       originy="0px"
+       spacingx="0.5px"
+       spacingy="0.5px"
+       color="#0000ff"
+       empcolor="#0000ff"
+       opacity="0.2"
+       empopacity="0.4"
+       empspacing="2" />
+  </sodipodi:namedview>
+  <metadata
+     id="metadata7859">
+    <rdf:RDF>
+      <cc:Work
+         rdf:about="">
+        <dc:format>image/svg+xml</dc:format>
+        <dc:type
+           rdf:resource="http://purl.org/dc/dcmitype/StillImage" />
+        <dc:creator>
+          <cc:Agent>
+            <dc:title>Lapo Calamandrei</dc:title>
+          </cc:Agent>
+        </dc:creator>
+        <dc:source />
+        <cc:license
+           rdf:resource="http://creativecommons.org/licenses/GPL/2.0/" />
+        <dc:title>Play</dc:title>
+        <dc:subject>
+          <rdf:Bag>
+            <rdf:li>play</rdf:li>
+            <rdf:li>playback</rdf:li>
+            <rdf:li>start</rdf:li>
+            <rdf:li>begin</rdf:li>
+          </rdf:Bag>
+        </dc:subject>
+      </cc:Work>
+      <cc:License
+         rdf:about="http://creativecommons.org/licenses/GPL/2.0/">
+        <cc:permits
+           rdf:resource="http://web.resource.org/cc/Reproduction" />
+        <cc:permits
+           rdf:resource="http://web.resource.org/cc/Distribution" />
+        <cc:requires
+           rdf:resource="http://web.resource.org/cc/Notice" />
+        <cc:permits
+           rdf:resource="http://web.resource.org/cc/DerivativeWorks" />
+        <cc:requires
+           rdf:resource="http://web.resource.org/cc/ShareAlike" />
+        <cc:requires
+           rdf:resource="http://web.resource.org/cc/SourceCode" />
+      </cc:License>
+    </rdf:RDF>
+  </metadata>
+  <g
+     inkscape:label="Layer 1"
+     inkscape:groupmode="layer"
+     id="layer1">
+    <path
+       sodipodi:type="inkscape:offset"
+       inkscape:radius="1.5026019"
+       inkscape:original="M -186.5 10.5 L -186.5 37.5 L -163.5 24 L -186.5 10.5 z "
+       style="opacity:0.4;fill:url(#linearGradient7865);fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:0.99999982;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dashoffset:0.69999992;stroke-opacity:1"
+       id="path7671"
+       d="M -186.59375,9 C -187.38473,9.0508993 -188.00018,9.7073844 -188,10.5 L -188,37.5 C -187.99205,38.031998 -187.70339,38.520136 -187.24104,38.783419 C -186.77869,39.046702 -186.21158,39.045877 -185.75,38.78125 L -162.75,25.28125 C -162.30425,25.008049 -162.03253,24.522812 -162.03253,24 C -162.03253,23.477188 -162.30425,22.991951 -162.75,22.71875 L -185.75,9.21875 C -186.00346,9.0640763 -186.29707,8.9879569 -186.59375,9 z"
+       transform="translate(200,0)" />
+    <path
+       sodipodi:nodetypes="cccc"
+       id="path7812"
+       d="M 13.499996,37.500001 L 13.499996,10.500456 L 36.499996,24.012458 L 13.499996,37.500001 z"
+       style="fill:url(#radialGradient3815);fill-opacity:1;fill-rule:evenodd;stroke:#4e9a06;stroke-width:0.99999981999999998;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dashoffset:0.69999992000000000;stroke-opacity:1" />
+    <path
+       sodipodi:nodetypes="cccc"
+       id="path7828"
+       d="M 14.499996,35.750028 L 14.499996,12.250428 L 34.499996,24.010872 L 14.499996,35.750028 z"
+       style="fill:none;fill-opacity:1;fill-rule:evenodd;stroke:#ffffff;stroke-width:0.99999982;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dashoffset:0.69999992;stroke-opacity:1" />
+    <path
+       sodipodi:type="inkscape:offset"
+       inkscape:radius="-0.5"
+       inkscape:original="M 13.5 10.5 C 13.5 19.499848 13.5 28.500152 13.5 37.5 C 21.166667 33.004153 28.833333 28.495847 36.5 24 C 28.833333 19.495999 21.166667 15.004001 13.5 10.5 z "
+       style="opacity:0.15;fill:url(#linearGradient3810);fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:0.99999982;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dashoffset:0.69999992;stroke-opacity:1"
+       id="path7354"
+       d="M 14,11.375 C 14,19.791551 14,28.208449 14,36.625 C 21.167154,32.421341 28.332238,28.204015 35.5,24 C 28.332835,19.790152 21.16775,15.585191 14,11.375 z"
+       transform="matrix(1,0,0,-1,-3.5655781e-6,48)" />
+  </g>
+</svg>

Added: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_icons/scalable/previous-black-frame.svg
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_icons/scalable/previous-black-frame.svg	2009-07-23 18:18:50 UTC (rev 5134)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_icons/scalable/previous-black-frame.svg	2009-07-23 18:18:52 UTC (rev 5135)
@@ -0,0 +1,344 @@
+<?xml version="1.0" encoding="UTF-8" standalone="no"?>
+<!-- Created with Inkscape (http://www.inkscape.org/) -->
+<svg
+   xmlns:dc="http://purl.org/dc/elements/1.1/"
+   xmlns:cc="http://creativecommons.org/ns#"
+   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
+   xmlns:svg="http://www.w3.org/2000/svg"
+   xmlns="http://www.w3.org/2000/svg"
+   xmlns:xlink="http://www.w3.org/1999/xlink"
+   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"
+   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"
+   width="48"
+   height="48"
+   id="svg7854"
+   sodipodi:version="0.32"
+   inkscape:version="0.46"
+   version="1.0"
+   sodipodi:docbase="/home/dobey/Projects/gnome-icon-theme/scalable/actions"
+   sodipodi:docname="previous-black-frame.svg"
+   inkscape:output_extension="org.inkscape.output.svg.inkscape"
+   inkscape:export-filename="/data/Avidemux/nove ikony/previous-black-frame.png"
+   inkscape:export-xdpi="76.153847"
+   inkscape:export-ydpi="76.153847">
+  <defs
+     id="defs7856">
+    <inkscape:perspective
+       sodipodi:type="inkscape:persp3d"
+       inkscape:vp_x="0 : 24 : 1"
+       inkscape:vp_y="0 : 1000 : 0"
+       inkscape:vp_z="48 : 24 : 1"
+       inkscape:persp3d-origin="24 : 16 : 1"
+       id="perspective8487" />
+    <linearGradient
+       id="linearGradient7577">
+      <stop
+         style="stop-color:#000000;stop-opacity:0.3137255;"
+         offset="0"
+         id="stop7579" />
+      <stop
+         style="stop-color:#ffffff;stop-opacity:1"
+         offset="1"
+         id="stop7581" />
+    </linearGradient>
+    <linearGradient
+       id="linearGradient7305">
+      <stop
+         style="stop-color:#ffffff;stop-opacity:1"
+         offset="0"
+         id="stop7307" />
+      <stop
+         id="stop7313"
+         offset="0.20971029"
+         style="stop-color:#ffffff;stop-opacity:0;" />
+      <stop
+         style="stop-color:#ffffff;stop-opacity:0.81065089;"
+         offset="0.34936365"
+         id="stop7329" />
+      <stop
+         id="stop7321"
+         offset="0.42850056"
+         style="stop-color:#ffffff;stop-opacity:0;" />
+      <stop
+         style="stop-color:#ffffff;stop-opacity:1;"
+         offset="0.52134049"
+         id="stop7323" />
+      <stop
+         id="stop7317"
+         offset="0.55746967"
+         style="stop-color:#ffffff;stop-opacity:0;" />
+      <stop
+         style="stop-color:#ffffff;stop-opacity:0.56804734;"
+         offset="0.71001518"
+         id="stop7319" />
+      <stop
+         id="stop7416"
+         offset="0.74394959"
+         style="stop-color:#ffffff;stop-opacity:0;" />
+      <stop
+         style="stop-color:#ffffff;stop-opacity:0"
+         offset="1"
+         id="stop7309" />
+    </linearGradient>
+    <linearGradient
+       id="linearGradient7344">
+      <stop
+         id="stop7346"
+         offset="0"
+         style="stop-color:#ffffff;stop-opacity:1;" />
+      <stop
+         id="stop7348"
+         offset="1"
+         style="stop-color:#2e3436;stop-opacity:1;" />
+    </linearGradient>
+    <linearGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient7577"
+       id="linearGradient8208"
+       gradientUnits="userSpaceOnUse"
+       gradientTransform="matrix(-1,0,0,1,-152,0)"
+       x1="-77.711723"
+       y1="13.246527"
+       x2="-74.288277"
+       y2="26.023027" />
+    <radialGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient7344"
+       id="radialGradient8502"
+       gradientUnits="userSpaceOnUse"
+       gradientTransform="matrix(-1.9143326,0,0,1.5917714,100.35131,1.6193442e-2)"
+       cx="38.40033"
+       cy="17.833462"
+       fx="38.40033"
+       fy="17.833462"
+       r="13.55237" />
+    <linearGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient7305"
+       id="linearGradient8506"
+       gradientUnits="userSpaceOnUse"
+       x1="49.683426"
+       y1="10.023315"
+       x2="98.316566"
+       y2="38.101673" />
+    <radialGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient7344"
+       id="radialGradient9036"
+       gradientUnits="userSpaceOnUse"
+       gradientTransform="matrix(1.9143326,0,0,1.5917714,-52.35131,1.6193442e-2)"
+       cx="38.204437"
+       cy="17.597876"
+       fx="38.204437"
+       fy="17.597876"
+       r="13.55237" />
+  </defs>
+  <sodipodi:namedview
+     id="base"
+     pagecolor="#ffffff"
+     bordercolor="#afafaf"
+     borderopacity="1"
+     gridtolerance="10000"
+     guidetolerance="10"
+     objecttolerance="10"
+     inkscape:pageopacity="0"
+     inkscape:pageshadow="2"
+     inkscape:zoom="15.069135"
+     inkscape:cx="18.818001"
+     inkscape:cy="22.086098"
+     inkscape:document-units="px"
+     inkscape:current-layer="layer1"
+     width="48px"
+     height="48px"
+     inkscape:showpageshadow="false"
+     inkscape:window-width="1267"
+     inkscape:window-height="846"
+     inkscape:window-x="0"
+     inkscape:window-y="0"
+     showgrid="false"
+     inkscape:grid-points="true"
+     showborder="true"
+     showguides="false"
+     inkscape:guide-bbox="true"
+     borderlayer="true">
+    <sodipodi:guide
+       orientation="horizontal"
+       position="13.125"
+       id="guide7377" />
+    <sodipodi:guide
+       orientation="horizontal"
+       position="5.4800776"
+       id="guide7379" />
+    <sodipodi:guide
+       orientation="horizontal"
+       position="35"
+       id="guide7492" />
+    <sodipodi:guide
+       orientation="horizontal"
+       position="48"
+       id="guide7046" />
+    <sodipodi:guide
+       orientation="horizontal"
+       position="-17.5"
+       id="guide7233" />
+    <sodipodi:guide
+       orientation="horizontal"
+       position="-29"
+       id="guide7235" />
+    <sodipodi:guide
+       orientation="horizontal"
+       position="22.097087"
+       id="guide7556" />
+    <sodipodi:guide
+       orientation="vertical"
+       position="-76.125"
+       id="guide7644" />
+    <sodipodi:guide
+       orientation="vertical"
+       position="-26.125"
+       id="guide7646" />
+    <sodipodi:guide
+       orientation="vertical"
+       position="24"
+       id="guide7648" />
+    <sodipodi:guide
+       orientation="vertical"
+       position="-125.28125"
+       id="guide7665" />
+    <sodipodi:guide
+       orientation="vertical"
+       position="-175.125"
+       id="guide7667" />
+    <sodipodi:guide
+       orientation="vertical"
+       position="-225.83223"
+       id="guide7685" />
+    <sodipodi:guide
+       orientation="vertical"
+       position="-326.06462"
+       id="guide7695" />
+    <inkscape:grid
+       id="GridFromPre046Settings"
+       type="xygrid"
+       originx="0px"
+       originy="0px"
+       spacingx="0.5px"
+       spacingy="0.5px"
+       color="#0000ff"
+       empcolor="#0000ff"
+       opacity="0.2"
+       empopacity="0.4"
+       empspacing="2" />
+  </sodipodi:namedview>
+  <metadata
+     id="metadata7859">
+    <rdf:RDF>
+      <cc:Work
+         rdf:about="">
+        <dc:format>image/svg+xml</dc:format>
+        <dc:type
+           rdf:resource="http://purl.org/dc/dcmitype/StillImage" />
+        <dc:creator>
+          <cc:Agent>
+            <dc:title>Lapo Calamandrei</dc:title>
+          </cc:Agent>
+        </dc:creator>
+        <dc:source />
+        <cc:license
+           rdf:resource="http://creativecommons.org/licenses/GPL/2.0/" />
+        <dc:title>Previous Song</dc:title>
+        <dc:subject>
+          <rdf:Bag>
+            <rdf:li>skip</rdf:li>
+            <rdf:li>backward</rdf:li>
+            <rdf:li>previous</rdf:li>
+            <rdf:li>media</rdf:li>
+          </rdf:Bag>
+        </dc:subject>
+      </cc:Work>
+      <cc:License
+         rdf:about="http://creativecommons.org/licenses/GPL/2.0/">
+        <cc:permits
+           rdf:resource="http://web.resource.org/cc/Reproduction" />
+        <cc:permits
+           rdf:resource="http://web.resource.org/cc/Distribution" />
+        <cc:requires
+           rdf:resource="http://web.resource.org/cc/Notice" />
+        <cc:permits
+           rdf:resource="http://web.resource.org/cc/DerivativeWorks" />
+        <cc:requires
+           rdf:resource="http://web.resource.org/cc/ShareAlike" />
+        <cc:requires
+           rdf:resource="http://web.resource.org/cc/SourceCode" />
+      </cc:License>
+    </rdf:RDF>
+  </metadata>
+  <g
+     inkscape:label="Layer 1"
+     inkscape:groupmode="layer"
+     id="layer1">
+    <path
+       sodipodi:type="inkscape:offset"
+       inkscape:radius="1.5032517"
+       inkscape:original="M -59.9375 12.5 C -60.243545 12.5 -60.5 12.756455 -60.5 13.0625 L -60.5 23.6875 L -78.5 13 L -78.5 23.6875 L -96.5 13 L -96.5 35 L -78.5 24.3125 L -78.5 35 L -60.5 24.3125 L -60.5 34.9375 C -60.5 35.243545 -60.243543 35.500002 -59.9375 35.5 L -56.0625 35.5 C -55.756455 35.5 -55.499999 35.243545 -55.5 34.9375 L -55.5 13.0625 C -55.5 12.756455 -55.756456 12.5 -56.0625 12.5 L -59.9375 12.5 z "
+       style="opacity:0.4;fill:url(#linearGradient8208);fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:1;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0.69999992;stroke-opacity:1"
+       id="path7687"
+       d="M -59.9375,11 C -61.083327,11 -62,11.916673 -62,13.0625 L -62,21.0625 L -77.71875,11.71875 C -78.182222,11.438527 -78.760596,11.429252 -79.232814,11.694471 C -79.705033,11.959689 -79.998098,12.458403 -80,13 L -80,21.0625 L -95.71875,11.71875 C -96.182222,11.438527 -96.760596,11.429252 -97.232814,11.694471 C -97.705033,11.959689 -97.998098,12.458403 -98,13 L -98,35 C -97.998098,35.541597 -97.705033,36.040311 -97.232814,36.305529 C -96.760596,36.570748 -96.182222,36.561473 -95.71875,36.28125 L -80,26.9375 L -80,35 C -79.998098,35.541597 -79.705033,36.040311 -79.232814,36.305529 C -78.760596,36.570748 -78.182222,36.561473 -77.71875,36.28125 L -62,26.9375 L -62,34.9375 C -62,36.083333 -61.083342,37.000007 -59.9375,37 L -56.0625,37 C -54.916673,37 -53.999996,36.083333 -54,34.9375 L -54,13.0625 C -54,11.91667 -54.916672,11 -56.0625,11 L -59.9375,11 z"
+       transform="matrix(-1,0,0,1,-52,0)" />
+    <rect
+       style="fill:#000000;fill-opacity:1;fill-rule:evenodd;stroke:#555753;stroke-width:1;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0.69999992000000000;stroke-opacity:1"
+       id="rect7736"
+       width="4.9886603"
+       height="23.000002"
+       x="3.5113525"
+       y="12.5"
+       rx="0.55242717"
+       ry="0.55242717" />
+    <g
+       id="g7944"
+       transform="matrix(-1,0,0,1,66,0)">
+      <path
+         sodipodi:nodetypes="cccc"
+         id="path7946"
+         d="M 21.5,35 L 21.5,13.000461 L 39.995767,24.010194 L 21.5,35 z"
+         style="fill:url(#radialGradient8502);fill-opacity:1;fill-rule:evenodd;stroke:#555753;stroke-width:0.99999994;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dashoffset:0.69999992;stroke-opacity:1" />
+      <path
+         d="M 22.5,14.78125 L 22.5,33.21875 L 38.03125,24 L 22.5,14.78125 z"
+         id="path7948"
+         style="fill:none;fill-opacity:1;fill-rule:evenodd;stroke:#ffffff;stroke-width:0.99999994;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dashoffset:0.69999992;stroke-opacity:1"
+         inkscape:original="M 21.5 13 L 21.5 35 L 40 24 L 21.5 13 z "
+         inkscape:radius="-1.0054175"
+         sodipodi:type="inkscape:offset" />
+    </g>
+    <path
+       style="fill:url(#radialGradient9036);fill-opacity:1;fill-rule:evenodd;stroke:#555753;stroke-width:1;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dashoffset:0.69999992000000000;stroke-opacity:1;stroke-dasharray:none"
+       d="M 26.5,35 L 26.5,13.000461 L 8.004233,24.010194 L 26.5,35 z"
+       id="path7746"
+       sodipodi:nodetypes="cccc" />
+    <path
+       sodipodi:type="inkscape:offset"
+       inkscape:radius="-1.0054175"
+       inkscape:original="M 21.5 13 L 21.5 35 L 40 24 L 21.5 13 z "
+       style="fill:none;fill-opacity:1;fill-rule:evenodd;stroke:#ffffff;stroke-width:0.99999994;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dashoffset:0.69999992;stroke-opacity:1"
+       id="path7748"
+       d="M 22.5,14.78125 L 22.5,33.21875 L 38.03125,24 L 22.5,14.78125 z"
+       transform="matrix(-1,0,0,1,48,0)" />
+    <rect
+       style="fill:none;fill-opacity:1;fill-rule:evenodd;stroke:#ffffff;stroke-width:1;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0.69999992;stroke-opacity:1"
+       id="rect7750"
+       width="3.0097761"
+       height="21.000002"
+       x="4.5160522"
+       y="13.5"
+       rx="0"
+       ry="0" />
+    <path
+       sodipodi:type="inkscape:offset"
+       inkscape:radius="-0.49442077"
+       inkscape:original="M 54.0625 12.5 C 53.756455 12.5 53.5 12.756455 53.5 13.0625 L 53.5 34.9375 C 53.5 35.243545 53.756457 35.500002 54.0625 35.5 L 57.9375 35.5 C 58.243545 35.5 58.500001 35.243545 58.5 34.9375 L 58.5 24.3125 L 76.5 35 L 76.5 24.3125 L 94.5 35 L 94.5 13 L 76.5 23.6875 L 76.5 13 L 58.5 23.6875 L 58.5 13.0625 C 58.5 12.756455 58.243544 12.5 57.9375 12.5 L 54.0625 12.5 z "
+       style="opacity:0.15;fill:url(#linearGradient8506);fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:1;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0.69999992;stroke-opacity:1"
+       id="path6332"
+       d="M 54.0625,13 C 54.03266,13 54,13.03266 54,13.0625 L 54,34.9375 C 54,34.967338 54.032668,35 54.0625,35 L 57.9375,35 C 57.96734,35 58,34.967338 58,34.9375 L 58,24.3125 C 58.003842,24.196921 58.048073,24.086345 58.125,24 C 58.048073,23.913655 58.003842,23.803079 58,23.6875 L 58,13.0625 C 58,13.032661 57.967338,13 57.9375,13 L 54.0625,13 z M 76,13.875 L 58.96875,24 L 76,34.125 L 76,24.3125 C 76.003842,24.196921 76.048073,24.086345 76.125,24 C 76.048073,23.913655 76.003842,23.803079 76,23.6875 L 76,13.875 z M 94,13.875 L 76.96875,24 L 94,34.125 L 94,13.875 z"
+       transform="matrix(1,0,0,-1,-50,48)" />
+  </g>
+</svg>

Added: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_icons/scalable/previous-frame.svg
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_icons/scalable/previous-frame.svg	2009-07-23 18:18:50 UTC (rev 5134)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_icons/scalable/previous-frame.svg	2009-07-23 18:18:52 UTC (rev 5135)
@@ -0,0 +1,322 @@
+<?xml version="1.0" encoding="UTF-8" standalone="no"?>
+<!-- Created with Inkscape (http://www.inkscape.org/) -->
+<svg
+   xmlns:dc="http://purl.org/dc/elements/1.1/"
+   xmlns:cc="http://creativecommons.org/ns#"
+   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
+   xmlns:svg="http://www.w3.org/2000/svg"
+   xmlns="http://www.w3.org/2000/svg"
+   xmlns:xlink="http://www.w3.org/1999/xlink"
+   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"
+   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"
+   width="48"
+   height="48"
+   id="svg7854"
+   sodipodi:version="0.32"
+   inkscape:version="0.46"
+   version="1.0"
+   sodipodi:docbase="/home/dobey/Projects/gnome-icon-theme/scalable/actions"
+   sodipodi:docname="previous-frame.svg"
+   inkscape:output_extension="org.inkscape.output.svg.inkscape"
+   inkscape:export-filename="/data/Avidemux/nove ikony/previous-frame.png"
+   inkscape:export-xdpi="76.153847"
+   inkscape:export-ydpi="76.153847">
+  <defs
+     id="defs7856">
+    <inkscape:perspective
+       sodipodi:type="inkscape:persp3d"
+       inkscape:vp_x="0 : 24 : 1"
+       inkscape:vp_y="0 : 1000 : 0"
+       inkscape:vp_z="48 : 24 : 1"
+       inkscape:persp3d-origin="24 : 16 : 1"
+       id="perspective54" />
+    <linearGradient
+       id="linearGradient7577">
+      <stop
+         style="stop-color:#000000;stop-opacity:0.3137255;"
+         offset="0"
+         id="stop7579" />
+      <stop
+         style="stop-color:#ffffff;stop-opacity:1"
+         offset="1"
+         id="stop7581" />
+    </linearGradient>
+    <linearGradient
+       id="linearGradient7305">
+      <stop
+         style="stop-color:#ffffff;stop-opacity:1"
+         offset="0"
+         id="stop7307" />
+      <stop
+         id="stop7313"
+         offset="0.20971029"
+         style="stop-color:#ffffff;stop-opacity:0;" />
+      <stop
+         style="stop-color:#ffffff;stop-opacity:0.81065089;"
+         offset="0.34936365"
+         id="stop7329" />
+      <stop
+         id="stop7321"
+         offset="0.42850056"
+         style="stop-color:#ffffff;stop-opacity:0;" />
+      <stop
+         style="stop-color:#ffffff;stop-opacity:1;"
+         offset="0.52134049"
+         id="stop7323" />
+      <stop
+         id="stop7317"
+         offset="0.55746967"
+         style="stop-color:#ffffff;stop-opacity:0;" />
+      <stop
+         style="stop-color:#ffffff;stop-opacity:0.56804734;"
+         offset="0.71001518"
+         id="stop7319" />
+      <stop
+         id="stop7416"
+         offset="0.74394959"
+         style="stop-color:#ffffff;stop-opacity:0;" />
+      <stop
+         style="stop-color:#ffffff;stop-opacity:0"
+         offset="1"
+         id="stop7309" />
+    </linearGradient>
+    <linearGradient
+       id="linearGradient7344">
+      <stop
+         id="stop7346"
+         offset="0"
+         style="stop-color:#ffffff;stop-opacity:1;" />
+      <stop
+         id="stop7348"
+         offset="1"
+         style="stop-color:#3465a4;stop-opacity:1;" />
+    </linearGradient>
+    <linearGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient7305"
+       id="linearGradient6232"
+       gradientUnits="userSpaceOnUse"
+       gradientTransform="matrix(-1,0,0,-1,58,48)"
+       x1="0.17084506"
+       y1="10.331141"
+       x2="47.954166"
+       y2="37.918854" />
+    <radialGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient7344"
+       id="radialGradient6239"
+       gradientUnits="userSpaceOnUse"
+       gradientTransform="matrix(2.2246612,0,0,2.3034327,-78.62956,-41.851943)"
+       cx="28.541149"
+       cy="31.678772"
+       fx="28.541149"
+       fy="31.678772"
+       r="12.000001" />
+    <linearGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient7577"
+       id="linearGradient6242"
+       gradientUnits="userSpaceOnUse"
+       gradientTransform="matrix(-1,0,0,1,-42,0)"
+       x1="-77.711723"
+       y1="13.246527"
+       x2="-74.288277"
+       y2="26.023027" />
+    <radialGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient7344"
+       id="radialGradient6248"
+       gradientUnits="userSpaceOnUse"
+       gradientTransform="matrix(-1.8811669,0,0,1.5641941,95.830769,0.3959845)"
+       cx="36.455379"
+       cy="17.414564"
+       fx="36.455379"
+       fy="17.414564"
+       r="13.55237" />
+  </defs>
+  <sodipodi:namedview
+     id="base"
+     pagecolor="#ffffff"
+     bordercolor="#afafaf"
+     borderopacity="1"
+     gridtolerance="10000"
+     guidetolerance="10"
+     objecttolerance="10"
+     inkscape:pageopacity="0"
+     inkscape:pageshadow="2"
+     inkscape:zoom="22.627417"
+     inkscape:cx="33.932427"
+     inkscape:cy="24.760801"
+     inkscape:document-units="px"
+     inkscape:current-layer="layer1"
+     width="48px"
+     height="48px"
+     inkscape:showpageshadow="false"
+     inkscape:window-width="1440"
+     inkscape:window-height="850"
+     inkscape:window-x="0"
+     inkscape:window-y="0"
+     showgrid="false"
+     inkscape:grid-points="true"
+     showborder="true"
+     showguides="false"
+     inkscape:guide-bbox="true"
+     borderlayer="true">
+    <sodipodi:guide
+       orientation="horizontal"
+       position="13.125"
+       id="guide7377" />
+    <sodipodi:guide
+       orientation="horizontal"
+       position="5.4800776"
+       id="guide7379" />
+    <sodipodi:guide
+       orientation="horizontal"
+       position="35"
+       id="guide7492" />
+    <sodipodi:guide
+       orientation="horizontal"
+       position="48"
+       id="guide7046" />
+    <sodipodi:guide
+       orientation="horizontal"
+       position="-17.5"
+       id="guide7233" />
+    <sodipodi:guide
+       orientation="horizontal"
+       position="-29"
+       id="guide7235" />
+    <sodipodi:guide
+       orientation="horizontal"
+       position="22.097087"
+       id="guide7556" />
+    <sodipodi:guide
+       orientation="vertical"
+       position="-76.125"
+       id="guide7644" />
+    <sodipodi:guide
+       orientation="vertical"
+       position="-26.125"
+       id="guide7646" />
+    <sodipodi:guide
+       orientation="vertical"
+       position="24"
+       id="guide7648" />
+    <sodipodi:guide
+       orientation="vertical"
+       position="-125.28125"
+       id="guide7665" />
+    <sodipodi:guide
+       orientation="vertical"
+       position="-175.125"
+       id="guide7667" />
+    <sodipodi:guide
+       orientation="vertical"
+       position="-225.83223"
+       id="guide7685" />
+    <sodipodi:guide
+       orientation="vertical"
+       position="-326.06462"
+       id="guide7695" />
+    <inkscape:grid
+       id="GridFromPre046Settings"
+       type="xygrid"
+       originx="0px"
+       originy="0px"
+       spacingx="0.5px"
+       spacingy="0.5px"
+       color="#0000ff"
+       empcolor="#0000ff"
+       opacity="0.2"
+       empopacity="0.4"
+       empspacing="2" />
+  </sodipodi:namedview>
+  <metadata
+     id="metadata7859">
+    <rdf:RDF>
+      <cc:Work
+         rdf:about="">
+        <dc:format>image/svg+xml</dc:format>
+        <dc:type
+           rdf:resource="http://purl.org/dc/dcmitype/StillImage" />
+        <dc:creator>
+          <cc:Agent>
+            <dc:title>Lapo Calamandrei</dc:title>
+          </cc:Agent>
+        </dc:creator>
+        <dc:source />
+        <cc:license
+           rdf:resource="http://creativecommons.org/licenses/GPL/2.0/" />
+        <dc:title>Next Song</dc:title>
+        <dc:subject>
+          <rdf:Bag>
+            <rdf:li>skip</rdf:li>
+            <rdf:li>forward</rdf:li>
+            <rdf:li>next</rdf:li>
+          </rdf:Bag>
+        </dc:subject>
+      </cc:Work>
+      <cc:License
+         rdf:about="http://creativecommons.org/licenses/GPL/2.0/">
+        <cc:permits
+           rdf:resource="http://web.resource.org/cc/Reproduction" />
+        <cc:permits
+           rdf:resource="http://web.resource.org/cc/Distribution" />
+        <cc:requires
+           rdf:resource="http://web.resource.org/cc/Notice" />
+        <cc:permits
+           rdf:resource="http://web.resource.org/cc/DerivativeWorks" />
+        <cc:requires
+           rdf:resource="http://web.resource.org/cc/ShareAlike" />
+        <cc:requires
+           rdf:resource="http://web.resource.org/cc/SourceCode" />
+      </cc:License>
+    </rdf:RDF>
+  </metadata>
+  <g
+     inkscape:label="Layer 1"
+     inkscape:groupmode="layer"
+     id="layer1">
+    <path
+       style="opacity:0.4;fill:url(#linearGradient6242);fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:1;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0.69999992;stroke-opacity:1"
+       d="M 17.9375,11 C 19.083327,11 20,11.916673 20,13.0625 L 20,21.0625 L 35.71875,11.71875 C 36.182222,11.438527 36.746531,11.422281 37.21875,11.6875 C 37.690968,11.952719 37.998098,12.458403 38,13 L 38,21.0625 L 38,26.9375 L 38,35 C 37.998098,35.541597 37.690969,36.047281 37.21875,36.3125 C 36.746531,36.577717 36.182222,36.561473 35.71875,36.28125 L 20,26.9375 L 20,34.9375 C 20,36.083333 19.083342,37.000007 17.9375,37 L 14.0625,37 C 12.916673,37 11.999996,36.083333 12,34.9375 L 12,13.0625 C 12,11.91667 12.916672,11 14.0625,11 L 17.9375,11 z"
+       id="path7638" />
+    <rect
+       style="fill:url(#radialGradient6239);fill-opacity:1;fill-rule:evenodd;stroke:#204a87;stroke-width:1;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0.69999992000000000;stroke-opacity:1"
+       id="rect7623"
+       width="4.9886603"
+       height="23.000002"
+       x="-18.488663"
+       y="12.5"
+       rx="0.55242717"
+       ry="0.55242717"
+       transform="scale(-1,1)" />
+    <path
+       style="fill:url(#radialGradient6248);fill-opacity:1;fill-rule:evenodd;stroke:#204a87;stroke-width:0.99999994000000003;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dashoffset:0.69999992000000000;stroke-opacity:1"
+       d="M 36.5,35 L 36.5,13.000461 L 18.00423,24.010194 L 36.5,35 z"
+       id="path7621"
+       sodipodi:nodetypes="cccc" />
+    <path
+       sodipodi:type="inkscape:offset"
+       inkscape:radius="-1.0054175"
+       inkscape:original="M 21.5 13 L 21.5 35 L 40 24 L 21.5 13 z "
+       style="fill:none;fill-opacity:1;fill-rule:evenodd;stroke:#ffffff;stroke-width:0.99999994;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dashoffset:0.69999992;stroke-opacity:1"
+       id="path7627"
+       d="M 22.5,14.78125 L 22.5,33.21875 L 38.03125,24 L 22.5,14.78125 z"
+       transform="matrix(-1,0,0,1,58,0)" />
+    <rect
+       style="fill:none;fill-opacity:1;fill-rule:evenodd;stroke:#ffffff;stroke-width:1;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0.69999992;stroke-opacity:1"
+       id="rect7625"
+       width="3.0097761"
+       height="21.000002"
+       x="-17.483948"
+       y="13.5"
+       rx="0"
+       ry="0"
+       transform="scale(-1,1)" />
+    <path
+       style="opacity:0.15;fill:url(#linearGradient6232);fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:1;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0.69999992;stroke-opacity:1"
+       d="M 17.9375,13 C 17.964216,13 18,13.035779 18,13.0625 L 18,23.6875 C 18.004306,23.802981 18.048476,23.913406 18.125,24 C 18.048476,24.086594 18.004306,24.197019 18,24.3125 L 18,34.9375 C 18,34.964223 17.964223,35 17.9375,35 L 14.0625,35 C 14.035779,35 14,34.964222 14,34.9375 L 14,13.0625 C 14,13.035779 14.035777,13 14.0625,13 L 17.9375,13 z M 36,13.875 L 36,23.6875 C 36.004306,23.802981 36.048476,23.913406 36.125,24 C 36.048476,24.086594 36.004306,24.197019 36,24.3125 L 36,34.125 L 18.96875,24 L 36,13.875 z M 38,23.375 L 38,24.625 L 36.96875,24 L 38,23.375 z"
+       id="path7386" />
+  </g>
+</svg>

Added: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_icons/scalable/previous-key-frame.svg
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_icons/scalable/previous-key-frame.svg	2009-07-23 18:18:50 UTC (rev 5134)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_icons/scalable/previous-key-frame.svg	2009-07-23 18:18:52 UTC (rev 5135)
@@ -0,0 +1,320 @@
+<?xml version="1.0" encoding="UTF-8" standalone="no"?>
+<!-- Created with Inkscape (http://www.inkscape.org/) -->
+<svg
+   xmlns:dc="http://purl.org/dc/elements/1.1/"
+   xmlns:cc="http://creativecommons.org/ns#"
+   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
+   xmlns:svg="http://www.w3.org/2000/svg"
+   xmlns="http://www.w3.org/2000/svg"
+   xmlns:xlink="http://www.w3.org/1999/xlink"
+   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"
+   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"
+   width="48"
+   height="48"
+   id="svg7854"
+   sodipodi:version="0.32"
+   inkscape:version="0.46"
+   version="1.0"
+   sodipodi:docbase="/home/dobey/Projects/gnome-icon-theme/scalable/actions"
+   sodipodi:docname="previous-key-frame.svg"
+   inkscape:output_extension="org.inkscape.output.svg.inkscape"
+   inkscape:export-filename="/data/Avidemux/nove ikony/previous-key-frame-2.png"
+   inkscape:export-xdpi="79.777641"
+   inkscape:export-ydpi="79.777641">
+  <defs
+     id="defs7856">
+    <inkscape:perspective
+       sodipodi:type="inkscape:persp3d"
+       inkscape:vp_x="0 : 24 : 1"
+       inkscape:vp_y="0 : 1000 : 0"
+       inkscape:vp_z="48 : 24 : 1"
+       inkscape:persp3d-origin="24 : 16 : 1"
+       id="perspective4725" />
+    <linearGradient
+       id="linearGradient7577">
+      <stop
+         style="stop-color:#000000;stop-opacity:0.3137255;"
+         offset="0"
+         id="stop7579" />
+      <stop
+         style="stop-color:#ffffff;stop-opacity:1"
+         offset="1"
+         id="stop7581" />
+    </linearGradient>
+    <linearGradient
+       id="linearGradient7305">
+      <stop
+         style="stop-color:#ffffff;stop-opacity:1"
+         offset="0"
+         id="stop7307" />
+      <stop
+         id="stop7313"
+         offset="0.20971029"
+         style="stop-color:#ffffff;stop-opacity:0;" />
+      <stop
+         style="stop-color:#ffffff;stop-opacity:0.81065089;"
+         offset="0.34936365"
+         id="stop7329" />
+      <stop
+         id="stop7321"
+         offset="0.42850056"
+         style="stop-color:#ffffff;stop-opacity:0;" />
+      <stop
+         style="stop-color:#ffffff;stop-opacity:1;"
+         offset="0.52134049"
+         id="stop7323" />
+      <stop
+         id="stop7317"
+         offset="0.55746967"
+         style="stop-color:#ffffff;stop-opacity:0;" />
+      <stop
+         style="stop-color:#ffffff;stop-opacity:0.56804734;"
+         offset="0.71001518"
+         id="stop7319" />
+      <stop
+         id="stop7416"
+         offset="0.74394959"
+         style="stop-color:#ffffff;stop-opacity:0;" />
+      <stop
+         style="stop-color:#ffffff;stop-opacity:0"
+         offset="1"
+         id="stop7309" />
+    </linearGradient>
+    <linearGradient
+       id="linearGradient7344">
+      <stop
+         id="stop7346"
+         offset="0"
+         style="stop-color:#ffffff;stop-opacity:1;" />
+      <stop
+         id="stop7348"
+         offset="1"
+         style="stop-color:#3466a4;stop-opacity:1;" />
+    </linearGradient>
+    <linearGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient7577"
+       id="linearGradient8098"
+       gradientUnits="userSpaceOnUse"
+       gradientTransform="matrix(-1,0,0,1,-250.51531,0)"
+       x1="-127.01692"
+       y1="12.838128"
+       x2="-123.49838"
+       y2="25.969481" />
+    <linearGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient7305"
+       id="linearGradient6680"
+       gradientUnits="userSpaceOnUse"
+       gradientTransform="matrix(1,0,0,-1,-52,48)"
+       x1="52.331951"
+       y1="10.440893"
+       x2="100.16806"
+       y2="38.059086" />
+    <radialGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient7344"
+       id="radialGradient6703"
+       gradientUnits="userSpaceOnUse"
+       gradientTransform="matrix(1.9143326,0,0,1.5917714,-54.35131,1.6193442e-2)"
+       cx="38.40033"
+       cy="17.833462"
+       fx="38.40033"
+       fy="17.833462"
+       r="13.55237" />
+    <radialGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient7344"
+       id="radialGradient7218"
+       gradientUnits="userSpaceOnUse"
+       gradientTransform="matrix(1.9143326,0,0,1.5917714,-36.35131,1.6193442e-2)"
+       cx="38.40033"
+       cy="17.833462"
+       fx="38.40033"
+       fy="17.833462"
+       r="13.55237" />
+  </defs>
+  <sodipodi:namedview
+     id="base"
+     pagecolor="#ffffff"
+     bordercolor="#afafaf"
+     borderopacity="1"
+     gridtolerance="10000"
+     guidetolerance="10"
+     objecttolerance="10"
+     inkscape:pageopacity="0"
+     inkscape:pageshadow="2"
+     inkscape:zoom="17.319859"
+     inkscape:cx="21.863631"
+     inkscape:cy="23.212645"
+     inkscape:document-units="px"
+     inkscape:current-layer="layer1"
+     width="48px"
+     height="48px"
+     inkscape:showpageshadow="false"
+     inkscape:window-width="1179"
+     inkscape:window-height="846"
+     inkscape:window-x="150"
+     inkscape:window-y="0"
+     showgrid="false"
+     inkscape:grid-points="true"
+     showborder="true"
+     showguides="false"
+     inkscape:guide-bbox="true"
+     borderlayer="true">
+    <sodipodi:guide
+       orientation="horizontal"
+       position="13.125"
+       id="guide7377" />
+    <sodipodi:guide
+       orientation="horizontal"
+       position="5.4800776"
+       id="guide7379" />
+    <sodipodi:guide
+       orientation="horizontal"
+       position="35"
+       id="guide7492" />
+    <sodipodi:guide
+       orientation="horizontal"
+       position="48"
+       id="guide7046" />
+    <sodipodi:guide
+       orientation="horizontal"
+       position="-17.5"
+       id="guide7233" />
+    <sodipodi:guide
+       orientation="horizontal"
+       position="-29"
+       id="guide7235" />
+    <sodipodi:guide
+       orientation="horizontal"
+       position="22.097087"
+       id="guide7556" />
+    <sodipodi:guide
+       orientation="vertical"
+       position="-76.125"
+       id="guide7644" />
+    <sodipodi:guide
+       orientation="vertical"
+       position="-26.125"
+       id="guide7646" />
+    <sodipodi:guide
+       orientation="vertical"
+       position="24"
+       id="guide7648" />
+    <sodipodi:guide
+       orientation="vertical"
+       position="-125.28125"
+       id="guide7665" />
+    <sodipodi:guide
+       orientation="vertical"
+       position="-175.125"
+       id="guide7667" />
+    <sodipodi:guide
+       orientation="vertical"
+       position="-225.83223"
+       id="guide7685" />
+    <sodipodi:guide
+       orientation="vertical"
+       position="-326.06462"
+       id="guide7695" />
+    <inkscape:grid
+       id="GridFromPre046Settings"
+       type="xygrid"
+       originx="0px"
+       originy="0px"
+       spacingx="0.5px"
+       spacingy="0.5px"
+       color="#0000ff"
+       empcolor="#0000ff"
+       opacity="0.2"
+       empopacity="0.4"
+       empspacing="2" />
+  </sodipodi:namedview>
+  <metadata
+     id="metadata7859">
+    <rdf:RDF>
+      <cc:Work
+         rdf:about="">
+        <dc:format>image/svg+xml</dc:format>
+        <dc:type
+           rdf:resource="http://purl.org/dc/dcmitype/StillImage" />
+        <dc:creator>
+          <cc:Agent>
+            <dc:title>Lapo Calamandrei</dc:title>
+          </cc:Agent>
+        </dc:creator>
+        <dc:source />
+        <cc:license
+           rdf:resource="http://creativecommons.org/licenses/GPL/2.0/" />
+        <dc:title>Rewind</dc:title>
+        <dc:subject>
+          <rdf:Bag>
+            <rdf:li>rewind</rdf:li>
+            <rdf:li>seek</rdf:li>
+            <rdf:li>backward</rdf:li>
+          </rdf:Bag>
+        </dc:subject>
+      </cc:Work>
+      <cc:License
+         rdf:about="http://creativecommons.org/licenses/GPL/2.0/">
+        <cc:permits
+           rdf:resource="http://web.resource.org/cc/Reproduction" />
+        <cc:permits
+           rdf:resource="http://web.resource.org/cc/Distribution" />
+        <cc:requires
+           rdf:resource="http://web.resource.org/cc/Notice" />
+        <cc:permits
+           rdf:resource="http://web.resource.org/cc/DerivativeWorks" />
+        <cc:requires
+           rdf:resource="http://web.resource.org/cc/ShareAlike" />
+        <cc:requires
+           rdf:resource="http://web.resource.org/cc/SourceCode" />
+      </cc:License>
+    </rdf:RDF>
+  </metadata>
+  <g
+     inkscape:label="Layer 1"
+     inkscape:groupmode="layer"
+     id="layer1">
+    <path
+       sodipodi:type="inkscape:offset"
+       inkscape:radius="1.484375"
+       inkscape:original="M -143.5 13 L -143.5 35 L -125.5 24.3125 L -125.5 35 L -107 24 L -125.5 13 L -125.5 23.6875 L -143.5 13 z "
+       style="opacity:0.4;fill:url(#linearGradient8098);fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:0.99999994;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dashoffset:0.69999992;stroke-opacity:1"
+       id="path7681"
+       d="M -143.75,11.53125 C -144.47126,11.646642 -145.00141,12.269567 -145,13 L -145,35 C -145.00337,35.536848 -144.71663,36.033688 -144.25011,36.299347 C -143.78358,36.565005 -143.20998,36.558085 -142.75,36.28125 L -127,26.9375 L -127,35 C -127.00337,35.536848 -126.71663,36.033688 -126.25011,36.299347 C -125.78358,36.565005 -125.20998,36.558085 -124.75,36.28125 L -106.25,25.28125 C -105.79494,25.014944 -105.51528,24.527253 -105.51528,24 C -105.51528,23.472747 -105.79494,22.985056 -106.25,22.71875 L -124.75,11.71875 C -125.20998,11.441915 -125.78358,11.434995 -126.25011,11.700653 C -126.71663,11.966312 -127.00337,12.463152 -127,13 L -127,21.0625 L -142.75,11.71875 C -143.05084,11.540409 -143.40499,11.474007 -143.75,11.53125 L -143.75,11.53125 z"
+       transform="matrix(-1,0,0,1,-101.01531,0)" />
+    <path
+       style="fill:url(#radialGradient7218);fill-opacity:1;fill-rule:evenodd;stroke:#204a87;stroke-width:0.99999994000000003;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dashoffset:0.69999992000000000;stroke-opacity:1"
+       d="M 42.5,35 L 42.5,13.000461 L 24.004233,24.010194 L 42.5,35 z"
+       id="path7954"
+       sodipodi:nodetypes="cccc" />
+    <path
+       sodipodi:type="inkscape:offset"
+       inkscape:radius="-1.0054175"
+       inkscape:original="M 21.5 13 L 21.5 35 L 40 24 L 21.5 13 z "
+       style="fill:none;fill-opacity:1;fill-rule:evenodd;stroke:#ffffff;stroke-width:0.99999994;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dashoffset:0.69999992;stroke-opacity:1"
+       id="path7956"
+       d="M 22.5,14.78125 L 22.5,33.21875 L 38.03125,24 L 22.5,14.78125 z"
+       transform="matrix(-1,0,0,1,64,0)" />
+    <path
+       style="fill:url(#radialGradient6703);fill-opacity:1;fill-rule:evenodd;stroke:#204a87;stroke-width:0.99999994000000003;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dashoffset:0.69999992000000000;stroke-opacity:1"
+       d="M 24.5,35 L 24.5,13.000461 L 6.004233,24.010194 L 24.5,35 z"
+       id="path7960"
+       sodipodi:nodetypes="cccc" />
+    <path
+       sodipodi:type="inkscape:offset"
+       inkscape:radius="-1.0054175"
+       inkscape:original="M 21.5 13 L 21.5 35 L 40 24 L 21.5 13 z "
+       style="fill:none;fill-opacity:1;fill-rule:evenodd;stroke:#ffffff;stroke-width:0.99999994;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dashoffset:0.69999992;stroke-opacity:1"
+       id="path7962"
+       d="M 22.5,14.78125 L 22.5,33.21875 L 38.03125,24 L 22.5,14.78125 z"
+       transform="matrix(-1,0,0,1,46,0)" />
+    <path
+       style="opacity:0.15;fill:url(#linearGradient6680);fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:1;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dashoffset:0.69999992;stroke-opacity:1"
+       d="M 24,34.125 L 6.96875,24 L 24,13.875 L 24,23.6875 C 24.00384,23.803079 24.04807,23.913655 24.125,24 C 24.04807,24.086345 24.00384,24.196921 24,24.3125 L 24,34.125 z M 42,34.125 L 24.96875,24 L 42,13.875 L 42,34.125 z"
+       id="path7331"
+       sodipodi:nodetypes="ccccccccccc" />
+  </g>
+</svg>

Added: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_icons/scalable/stop.svg
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_icons/scalable/stop.svg	2009-07-23 18:18:50 UTC (rev 5134)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_icons/scalable/stop.svg	2009-07-23 18:18:52 UTC (rev 5135)
@@ -0,0 +1,333 @@
+<?xml version="1.0" encoding="UTF-8" standalone="no"?>
+<!-- Created with Inkscape (http://www.inkscape.org/) -->
+<svg
+   xmlns:dc="http://purl.org/dc/elements/1.1/"
+   xmlns:cc="http://creativecommons.org/ns#"
+   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
+   xmlns:svg="http://www.w3.org/2000/svg"
+   xmlns="http://www.w3.org/2000/svg"
+   xmlns:xlink="http://www.w3.org/1999/xlink"
+   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"
+   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"
+   width="48"
+   height="48"
+   id="svg7854"
+   sodipodi:version="0.32"
+   inkscape:version="0.46"
+   version="1.0"
+   sodipodi:docbase="/home/dobey/Projects/gnome-icon-theme/scalable/actions"
+   sodipodi:docname="stop.svg"
+   inkscape:output_extension="org.inkscape.output.svg.inkscape"
+   inkscape:export-filename="/data/Avidemux/nove ikony/stop.png"
+   inkscape:export-xdpi="76.153847"
+   inkscape:export-ydpi="76.153847">
+  <defs
+     id="defs7856">
+    <inkscape:perspective
+       sodipodi:type="inkscape:persp3d"
+       inkscape:vp_x="0 : 24 : 1"
+       inkscape:vp_y="0 : 1000 : 0"
+       inkscape:vp_z="48 : 24 : 1"
+       inkscape:persp3d-origin="24 : 16 : 1"
+       id="perspective7477" />
+    <linearGradient
+       id="linearGradient7577">
+      <stop
+         style="stop-color:#000000;stop-opacity:0.3137255;"
+         offset="0"
+         id="stop7579" />
+      <stop
+         style="stop-color:#ffffff;stop-opacity:1"
+         offset="1"
+         id="stop7581" />
+    </linearGradient>
+    <linearGradient
+       id="linearGradient7305">
+      <stop
+         style="stop-color:#ffffff;stop-opacity:1"
+         offset="0"
+         id="stop7307" />
+      <stop
+         id="stop7313"
+         offset="0.20971029"
+         style="stop-color:#ffffff;stop-opacity:0;" />
+      <stop
+         style="stop-color:#ffffff;stop-opacity:0.81065089;"
+         offset="0.34936365"
+         id="stop7329" />
+      <stop
+         id="stop7321"
+         offset="0.42850056"
+         style="stop-color:#ffffff;stop-opacity:0;" />
+      <stop
+         style="stop-color:#ffffff;stop-opacity:1;"
+         offset="0.52134049"
+         id="stop7323" />
+      <stop
+         id="stop7317"
+         offset="0.55746967"
+         style="stop-color:#ffffff;stop-opacity:0;" />
+      <stop
+         style="stop-color:#ffffff;stop-opacity:0.56804734;"
+         offset="0.71001518"
+         id="stop7319" />
+      <stop
+         id="stop7416"
+         offset="0.74394959"
+         style="stop-color:#ffffff;stop-opacity:0;" />
+      <stop
+         style="stop-color:#ffffff;stop-opacity:0"
+         offset="1"
+         id="stop7309" />
+    </linearGradient>
+    <linearGradient
+       id="linearGradient7344">
+      <stop
+         id="stop7346"
+         offset="0"
+         style="stop-color:#ffffff;stop-opacity:1;" />
+      <stop
+         id="stop7348"
+         offset="1"
+         style="stop-color:#cc0000;stop-opacity:1;" />
+    </linearGradient>
+    <linearGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient7577"
+       id="linearGradient7469"
+       gradientUnits="userSpaceOnUse"
+       x1="22.28924"
+       y1="12.965953"
+       x2="25.71076"
+       y2="25.735243" />
+    <radialGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient7344"
+       id="radialGradient7471"
+       gradientUnits="userSpaceOnUse"
+       gradientTransform="matrix(3.8208255,0,0,2.3034327,-81.08966,-41.851943)"
+       cx="28.541149"
+       cy="31.678772"
+       fx="28.541149"
+       fy="31.678772"
+       r="12.000001" />
+    <linearGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient7305"
+       id="linearGradient7473"
+       gradientUnits="userSpaceOnUse"
+       x1="-0.24809971"
+       y1="9.9014263"
+       x2="48.156212"
+       y2="37.847668" />
+    <radialGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient7344"
+       id="radialGradient7484"
+       gradientUnits="userSpaceOnUse"
+       gradientTransform="matrix(3.8208255,0,0,2.3034327,-81.08966,-41.851943)"
+       cx="28.541149"
+       cy="31.678772"
+       fx="28.541149"
+       fy="31.678772"
+       r="12.000001" />
+    <linearGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient7305"
+       id="linearGradient7486"
+       gradientUnits="userSpaceOnUse"
+       x1="-0.24809971"
+       y1="9.9014263"
+       x2="48.156212"
+       y2="37.847668" />
+    <radialGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient7344"
+       id="radialGradient7491"
+       gradientUnits="userSpaceOnUse"
+       gradientTransform="matrix(3.8208255,0,0,2.3034327,-81.08966,-41.851943)"
+       cx="28.541149"
+       cy="31.678772"
+       fx="28.541149"
+       fy="31.678772"
+       r="12.000001" />
+  </defs>
+  <sodipodi:namedview
+     id="base"
+     pagecolor="#ffffff"
+     bordercolor="#afafaf"
+     borderopacity="1"
+     gridtolerance="10000"
+     guidetolerance="10"
+     objecttolerance="10"
+     inkscape:pageopacity="0"
+     inkscape:pageshadow="2"
+     inkscape:zoom="13.12"
+     inkscape:cx="36.17117"
+     inkscape:cy="17.898862"
+     inkscape:document-units="px"
+     inkscape:current-layer="layer1"
+     width="48px"
+     height="48px"
+     inkscape:showpageshadow="false"
+     inkscape:window-width="1358"
+     inkscape:window-height="846"
+     inkscape:window-x="72"
+     inkscape:window-y="0"
+     showgrid="false"
+     inkscape:grid-points="true"
+     showborder="true"
+     showguides="false"
+     inkscape:guide-bbox="true"
+     borderlayer="true">
+    <sodipodi:guide
+       orientation="horizontal"
+       position="13.125"
+       id="guide7377" />
+    <sodipodi:guide
+       orientation="horizontal"
+       position="5.4800776"
+       id="guide7379" />
+    <sodipodi:guide
+       orientation="horizontal"
+       position="35"
+       id="guide7492" />
+    <sodipodi:guide
+       orientation="horizontal"
+       position="48"
+       id="guide7046" />
+    <sodipodi:guide
+       orientation="horizontal"
+       position="-17.5"
+       id="guide7233" />
+    <sodipodi:guide
+       orientation="horizontal"
+       position="-29"
+       id="guide7235" />
+    <sodipodi:guide
+       orientation="horizontal"
+       position="22.097087"
+       id="guide7556" />
+    <sodipodi:guide
+       orientation="vertical"
+       position="-76.125"
+       id="guide7644" />
+    <sodipodi:guide
+       orientation="vertical"
+       position="-26.125"
+       id="guide7646" />
+    <sodipodi:guide
+       orientation="vertical"
+       position="24"
+       id="guide7648" />
+    <sodipodi:guide
+       orientation="vertical"
+       position="-125.28125"
+       id="guide7665" />
+    <sodipodi:guide
+       orientation="vertical"
+       position="-175.125"
+       id="guide7667" />
+    <sodipodi:guide
+       orientation="vertical"
+       position="-225.83223"
+       id="guide7685" />
+    <sodipodi:guide
+       orientation="vertical"
+       position="-326.06462"
+       id="guide7695" />
+    <inkscape:grid
+       id="GridFromPre046Settings"
+       type="xygrid"
+       originx="0px"
+       originy="0px"
+       spacingx="0.5px"
+       spacingy="0.5px"
+       color="#0000ff"
+       empcolor="#0000ff"
+       opacity="0.2"
+       empopacity="0.4"
+       empspacing="2" />
+  </sodipodi:namedview>
+  <metadata
+     id="metadata7859">
+    <rdf:RDF>
+      <cc:Work
+         rdf:about="">
+        <dc:format>image/svg+xml</dc:format>
+        <dc:type
+           rdf:resource="http://purl.org/dc/dcmitype/StillImage" />
+        <dc:creator>
+          <cc:Agent>
+            <dc:title>Lapo Calamandrei</dc:title>
+          </cc:Agent>
+        </dc:creator>
+        <dc:source />
+        <cc:license
+           rdf:resource="http://creativecommons.org/licenses/GPL/2.0/" />
+        <dc:title>Stop</dc:title>
+        <dc:subject>
+          <rdf:Bag>
+            <rdf:li>stop</rdf:li>
+            <rdf:li>end</rdf:li>
+            <rdf:li>playback</rdf:li>
+          </rdf:Bag>
+        </dc:subject>
+      </cc:Work>
+      <cc:License
+         rdf:about="http://creativecommons.org/licenses/GPL/2.0/">
+        <cc:permits
+           rdf:resource="http://web.resource.org/cc/Reproduction" />
+        <cc:permits
+           rdf:resource="http://web.resource.org/cc/Distribution" />
+        <cc:requires
+           rdf:resource="http://web.resource.org/cc/Notice" />
+        <cc:permits
+           rdf:resource="http://web.resource.org/cc/DerivativeWorks" />
+        <cc:requires
+           rdf:resource="http://web.resource.org/cc/ShareAlike" />
+        <cc:requires
+           rdf:resource="http://web.resource.org/cc/SourceCode" />
+      </cc:License>
+    </rdf:RDF>
+  </metadata>
+  <g
+     inkscape:label="Layer 1"
+     inkscape:groupmode="layer"
+     id="layer1">
+    <g
+       id="g7422"
+       transform="translate(-88,0)" />
+    <path
+       sodipodi:type="inkscape:offset"
+       inkscape:radius="1.4999211"
+       inkscape:original="M 13 12.5 C 12.718439 12.5 12.5 12.718439 12.5 13 L 12.5 35 C 12.5 35.281561 12.718439 35.500002 13 35.5 L 35 35.5 C 35.281561 35.5 35.500002 35.281562 35.5 35 L 35.5 13 C 35.5 12.718439 35.281562 12.5 35 12.5 L 13 12.5 z "
+       style="opacity:0.4;fill:url(#linearGradient7469);fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:0.99999994;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0.69999992;stroke-opacity:1"
+       id="path7573"
+       d="M 13,11 C 11.942666,11 11,11.942666 11,13 L 11,35 C 11,36.057334 11.942653,37.000008 13,37 L 35,37 C 36.057331,37 37.000008,36.057345 37,35 L 37,13 C 37,11.942669 36.057333,11 35,11 L 13,11 z" />
+    <rect
+       style="fill:url(#radialGradient7491);fill-opacity:1;fill-rule:evenodd;stroke:#a40000;stroke-width:0.99999994000000003;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0.69999992000000000;stroke-opacity:1"
+       id="rect7340"
+       width="23.000002"
+       height="23.000002"
+       x="12.5"
+       y="12.5"
+       rx="0.50823301"
+       ry="0.50823301" />
+    <rect
+       style="fill:none;fill-opacity:1;fill-rule:evenodd;stroke:#ffffff;stroke-width:1;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0.69999992;stroke-opacity:1"
+       id="rect7354"
+       width="20.999998"
+       height="20.999998"
+       x="13.500002"
+       y="13.500002" />
+    <path
+       sodipodi:type="inkscape:offset"
+       inkscape:radius="-0.5"
+       inkscape:original="M 13 12.5 C 12.718439 12.5 12.5 12.718439 12.5 13 L 12.5 35 C 12.5 35.281561 12.718439 35.500002 13 35.5 L 35 35.5 C 35.281561 35.5 35.500002 35.281562 35.5 35 L 35.5 13 C 35.5 12.718439 35.281562 12.5 35 12.5 L 13 12.5 z "
+       style="opacity:0.15;fill:url(#linearGradient7486);fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:0.99999994;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0.69999992;stroke-opacity:1"
+       id="path7410"
+       d="M 13,13 L 13,35 L 35,35 L 35,13 L 13,13 z"
+       transform="matrix(1,0,0,-1,0,48)" />
+  </g>
+</svg>

Added: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_icons/stop.png
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_icons/stop.png	2009-07-23 18:18:50 UTC (rev 5134)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_icons/stop.png	2009-07-23 18:18:52 UTC (rev 5135)
@@ -0,0 +1,5 @@
+?PNG
+
+
+8???%<??\??0??h2?B?O???_???W???????g??B at f`??4??{??T???G?rw|?????~p?.^???????/_??}?
+r@?S??p;?????y3|??????????????~<???v????????(c????
\ No newline at end of file

Modified: branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/glade/main/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/glade/main/CMakeLists.txt	2009-07-23 18:18:50 UTC (rev 5134)
+++ branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/glade/main/CMakeLists.txt	2009-07-23 18:18:52 UTC (rev 5135)
@@ -1,28 +1,11 @@
 # Install glade file into FOO/lib/ADM_glade/
 set(ADM_glade
 gtk2_build.glade
-about.xpm
-avidemux_icon.xpm
-backward.xpm
-begin.xpm
-end.xpm
-forward.xpm
-gnome-calculator.png
-gnome-calculator_small.xpm
-gnome-calculator.xpm
-Kbackward.xpm
-Kforward.xpm
-markA.xpm
-markB.xpm
-play.xpm
-stop.xpm
-systray2.xpm
-systray.xpm
-xpm_nextblack.xpm
-xpm_prevblack.xpm
 avidemux_icon_small.png
 audio-volume-medium.png
 )
-INSTALL(FILES ${ADM_glade} DESTINATION "${CMAKE_INSTALL_PREFIX}/lib/ADM_glade/main")
 
+FILE(GLOB ADM_icons ${AVIDEMUX_TOP_SOURCE_DIR}/avidemux/common/ADM_icons/*.png)
+INSTALL(FILES ${ADM_glade} ${ADM_icons} DESTINATION "${CMAKE_INSTALL_PREFIX}/lib/ADM_glade/main")
 
+

Deleted: branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/glade/main/Kbackward.xpm
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/glade/main/Kbackward.xpm	2009-07-23 18:18:50 UTC (rev 5134)
+++ branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/glade/main/Kbackward.xpm	2009-07-23 18:18:52 UTC (rev 5135)
@@ -1,48 +0,0 @@
-/* XPM */
-static const char * xpm_Kbackward[] = {
-"32 20 25 1",
-" 	c None",
-".	c #000000",
-"+	c #D9D9D9",
-"@	c #FFFFFF",
-"#	c #696867",
-"$	c #5B5A59",
-"%	c #9C9C9A",
-"&	c #636261",
-"*	c #C5C4C3",
-"=	c #6F6E6C",
-"-	c #959491",
-";	c #D3D3D1",
-">	c #BBBBBB",
-",	c #A2A09F",
-"'	c #BDBCB9",
-")	c #D4D3D2",
-"!	c #A6A4A2",
-"~	c #A3A2A0",
-"{	c #B7B6B3",
-"]	c #D4D4D3",
-"^	c #A8A7A5",
-"/	c #DFDFDD",
-"(	c #C4C4C2",
-"_	c #DFDFDE",
-":	c #D4D3D1",
-"                                ",
-"                                ",
-"                                ",
-"               .+    .+         ",
-"              ..@   ..@         ",
-"             .#.@  .#.@         ",
-"            .$%.@ .$%.@         ",
-"           .&*.@ .&*.@          ",
-"          .=-;.>.=-;.@          ",
-"         .,'). at .,!).@           ",
-"          .~{]. at .~{].@          ",
-"           .^/.@ .^/.@          ",
-"           @.(_.@@.(_.@         ",
-"            @.:.@ @.:.@         ",
-"              ..@   ..@         ",
-"              @.@   @.@         ",
-"                                ",
-"                                ",
-"                                ",
-"                                "};

Deleted: branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/glade/main/Kforward.xpm
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/glade/main/Kforward.xpm	2009-07-23 18:18:50 UTC (rev 5134)
+++ branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/glade/main/Kforward.xpm	2009-07-23 18:18:52 UTC (rev 5135)
@@ -1,46 +0,0 @@
-/* XPM */
-static const char * xpm_Kforward[] = {
-"32 20 23 1",
-" 	c None",
-".	c #000000",
-"+	c #727170",
-"@	c #7B7B7A",
-"#	c #6C6B6A",
-"$	c #7F7E7D",
-"%	c #7D7C7B",
-"&	c #828180",
-"*	c #B0AFAC",
-"=	c #908F8D",
-"-	c #8C8B89",
-";	c #BDBCB9",
-">	c #D0CECC",
-",	c #FFFFFF",
-"'	c #8F8E8C",
-")	c #C7C6C3",
-"!	c #D2D1CE",
-"~	c #989898",
-"{	c #9D9C9A",
-"]	c #D8D7D5",
-"^	c #A19F9D",
-"/	c #C7C6C4",
-"(	c #A7A6A3",
-"                                ",
-"                                ",
-"                                ",
-"          .     .               ",
-"          ..    ..              ",
-"          .+.   .+.             ",
-"          .@#.  .@#.            ",
-"           .$%.  .$%.           ",
-"           .&*=...&*=.          ",
-"            .-;>. .-;>.,        ",
-"           .')!.~.')!.,         ",
-"           .{]., .{].,          ",
-"          .^/., .^/.,           ",
-"          .(.,  .(.,            ",
-"          ..,   ..,             ",
-"          .,    .,              ",
-"          ,     ,               ",
-"                                ",
-"                                ",
-"                                "};

Deleted: branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/glade/main/about.xpm
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/glade/main/about.xpm	2009-07-23 18:18:50 UTC (rev 5134)
+++ branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/glade/main/about.xpm	2009-07-23 18:18:52 UTC (rev 5135)
@@ -1,244 +0,0 @@
-/* XPM */
-static const char *xpm_about[] = {
-"210 200 41 1",
-" 	c None",
-".	c #030303",
-"+	c #72BBD2",
-"@	c #2983B6",
-"#	c #1170B6",
-"$	c #2C4858",
-"%	c #9BCCDD",
-"&	c #343638",
-"*	c #6A8695",
-"=	c #306991",
-"-	c #292A2C",
-";	c #DADEE0",
-">	c #699CAD",
-",	c #999A9C",
-"'	c #202224",
-")	c #5B5C5C",
-"!	c #E6E8E9",
-"~	c #1D1E1F",
-"{	c #4A7186",
-"]	c #5DB1CA",
-"^	c #191A1C",
-"/	c #86C0D4",
-"(	c #76ACC8",
-"_	c #EFF0F1",
-":	c #141619",
-"<	c #444444",
-"[	c #686869",
-"}	c #A3A4A5",
-"|	c #53A3C1",
-"1	c #101215",
-"2	c #4D8BA7",
-"3	c #BBC0C2",
-"4	c #4F5051",
-"5	c #747576",
-"6	c #FDFDFD",
-"7	c #CCD0D2",
-"8	c #868687",
-"9	c #AEB0B1",
-"0	c #929292",
-"a	c #0C0E11",
-"b	c #6AB5CD",
-"..................................................................................................................................................................................................................",
-"..................................................................................................................................................................................................................",
-"..................................................................................................................................................................................................................",
-"..................................................................................................................................................................................................................",
-"..................................................................................................................................................................................................................",
-"..................................................~5555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555&....",
-"..................................................<666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666____6_66666666666666666666666666666666666666666666666665....",
-"..................................................<666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666__!!!!!!!!___6666666666666666666666666666666666666666666665....",
-"............a:::aa................................<666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666___!;;777777;;!!__66666666666666666666666666666666666666666665....",
-"...........1~-&-'^:a................aaaa..........<66666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666__!;77399}}993377;;!!__6666666666666666666666666666666666666665....",
-"..........a~&<4)$&-~aa...........aa1:^~~1a........<666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666__!;739},8885880,99377;;!!__6666666666666666666666666666666666665....",
-"..........:-<[5**{$$-:aa........a:~-$$$$':........<66666666666666666666666666666666666666666666666666666666666666666666666666666666666666666_!;779}055[[[[))[588,}9337;;!!___666666666666666666666666666666665....",
-"..........^&)8>>>0*{$$~1aa...aa1'$$===#=&'a.......<66666666666666666666666666666666666666666666666666666666666666666666666666666666666666__!!779}05[))5888[)44))[500}99377;!!__6666666666666666666666666666665....",
-".........a~<[0}|2>>>*=$&':11::'-$={*>2##=-a.......<6666666666666666666666666666666666666666666666666666666666666666666666666666666666666_!!773}08[)4[8}333}085)44))[58,}}3377;!!__6666666666666666666666666665....",
-"..........~<5,(|@@2|>>*=$$'--$$#{2>2@##@$-:.......<6666666666666666666666666666666666666666666666666666666666666666666666666666666666___!;73}08[4445}337993399}85)444)[580,}9377;!!_66666666666666666666666665....",
-".........a^<[}/|2@@@@>>*2=====2*>|@####@#-:.......<6666666666666666666666666666666666666666666666666666666666666666666666666666666666_!;739,8[)44[,939}08580,9939}85)4444[580,}937;!__666666666666666666666665....",
-"..........~<[,9]2@@##@@>>,2**>(>@######@=-:.......<6666666666666666666666666666666666666666666666666666666666666666666666666666666__!;739,85[44[0933}8[)44)))50,9339}0[)4444[580}977!!666666666666666666666665....",
-".........a:&[09%b|@@@###|(/3/(2@#####@2{='1.......<666666666666666666666666666666666666666666666666666666666666666666666666666666_!;739,05))4[0973905)4<<<<4<4)[50,9333}08[)44)[50}37!__6666666666666666666665....",
-"..........:-)8977/>@@#####|(|#######|((2$'1.......<666666666666666666666666666666666666666666666666666666666666666666666666666__!!773}05[)4)897739085[)44)[)))44))[888,999908[)))58}37!_6666666666666666666665....",
-"..........1-45}3;_;/|@############2+%7(=$:a.......<66666666666666666666666666666666666666666666666666666666666666666666666666__!;73}08[)4)5}37739}}9}85[[588555[[)4)))[58,}999}05[[8}3;__666666666666666666665....",
-"..........1~<[,3;!__%(@#########2+%6!%0=-:a.......<666666666666666666666666666666666666666666666666666666666666666666666666__!;73},8[)4)[,97339}93773}88588,,088555))4<<4)[80}3790[5097!_666666666666666666665....",
-"..........a'<[03;!66_/2#########]!6_;3>=$:........<66666666666666666666666666666666666666666666666666666666666666666666666!!;739,85)4)[,93339997;!!;33}0880,}},00885[[)<<<<<4503;35[5}3;!666666666666666666665....",
-"..........a-45,3;!_;%|@#########@|%;;%>=-:a.......<66666666666666666666666666666666666666666666666666666666666666666666__!;739,05[4)[897739}997;___;779},0,}}}},00885[))<<&<&<[0370)[097!666666666666666666665....",
-"..........1-4897;!%b2@@@##@@######@]%3({$^a.......<6666666666666666666666666666666666666666666666666666666666666666666_!!773}05[44)893779}}93;_666!;7779},,}}}}},0885[))4<<&&-&)03}[)8}7;__6666666666666666665....",
-"..........^&[037%/]||@@@2|%%b@######@](2$'a.......<6666666666666666666666666666666666666666666666666666666666666666__!!;73}08[)4)5,3339}}}37!__666!!;7739},,}9}},08855[44<<&&&-&5}9[45,3;_66666666666666666665....",
-".........a^<[,3%b]|||2||/37%7/]@######@@#-a.......<666666666666666666666666666666666666666666666666666666666666666__!;73908[)44503339},}93;!_6666_!;;;779},,}}},,0885[))<<<&&---40984[09;!_6666666666666666665....",
-"..........~<5}3b|]|||b/773(}9/7%|@#####@=-1a......<6666666666666666666666666666666666666666666666666666666666666__!;73},85)44509339,00}97!_66666__!;;;773}}0,}},,8855[)44<&&&&-~&590))897!_6666666666666666665....",
-".........a'459%+]|]+%;_;3}>*>}%7;%|@###@=-1.......<666666666666666666666666666666666666666666666666666666666666_!;739,05)44[0333}0880}7;__6666666!;;;;;739,00,},0855[[44<<<&&&-'-[9,))5,7;_6666666666666666665....",
-"..........'<593+]+%!_6!;3,***>97!_!%|##@=-:a......<666666666666666666666666666666666666666666666666666666666__!!733}05[44[893790888,97;_66666666_!;;;77779,080000855))44<&&&&----)}9[45,3;!6666666666666666665....",
-".........a'489%/%;_66__73}8**>/%;_6_;(2#=-a.......<66666666666666666666666666666666666666666666666666666666__!773}88[)4)5}339,8558097!666666666_!;;7;77739,08880885[)44<<<&&&&-'-<0984[097!_666666666666666665....",
-"..........'<897;!_6_6__;79,0,}%;___6_;/{$'1.......<666666666666666666666666666666666666666666666666666666__!;73},8[)445,939085588,}3;_666666666_;777777733}8558885[[)4<<<&&&&&&-~&590)4897!_666666666666666665....",
-".........a~459;_666666_!;3399%7;!6__;7(@$'a.......<6666666666666666666666666666666666666666666666666666_!!7739,85)445099}85[)55880,7!666666666_!7737773739}05[5555[))4<<<<&&&-&---59})45}3;_666666666666666665....",
-".........a~4597;%!;;%;;%7%/((//%%___!%0=&:a.......<66666666666666666666666666666666666666666666666666__!;739,85)4)[09390[[))[55880};_666666666_77333333333}85[)[5[[)4<<<&&&&&&--'-)}954[,3;!666666666666666665....",
-".........a~<89%+]]]]]]]||22@@##@@+%;;%*=$:........<6666666666666666666666666666666666666666666666666__;;33}05[4<[8933}5[4)555558809;_666666666;33993333399}0[)44[))44<<<<&&&&&&&--<8984[097!_66666666666666665....",
-".........a'<59%+]]]]]|||||@@@@####@]%%>='1a.......<6666666666666666666666666666666666666666666666__!!;79}05[44)5}39}8[))58,85[558,7!666666666_799}99999999}8[4<<4))44<<&&<&&&----~&89,4)897!_66666666666666665....",
-".........a~459%+]]]]]]]||||2@@@#####2(>=$:........<666666666666666666666666666666666666666666666__!;33908[)4)5}99}8[))589398[5[58};_666666666!3}}}}}}99}9}}0[<&-<<44<<<<&&&&&&-&-'-599)45}3;_66666666666666665....",
-".........a^<5,3/+++++b]]]]||22@@#####2>{$1a.......<6666666666666666666666666666666666666666666__!;73908[)4)5,99}8[)4[5}7;;95[[[583!666666666_79000,}}}}},}00[<&-'<<<<<<&<&&&&&&---&),954[,3;!66666666666666665....",
-"..........^&)0}/3%3%%3%3/99((((|2@####@2$'a.......<66666666666666666666666666666666666666666__!;739,85)44[09330[44)509;!!70[)[)5,7_666666666_3,88880000,00085<'^^-<<<<<&<&<&-&-&--'<8384)097!_6666666666666665....",
-"..........:-4[80,},}},,,,00080,9/(@###@*='a.......<666666666666666666666666666666666666666__!;739}05[44)8973}8)4)[097!__!}5[))[5}!6666666666;98858888800088854'1a^-&<&<&<&&&&&----'&5904)8}7!_6666666666666665....",
-"..........a^&<)[[[[[[[[[[)[))){*,3|####@#-1.......<66666666666666666666666666666666666666_!!773}05[4445}33,8[))[8}7!_66_70[)))[89!666666666_7,55558588888888[)-aaa^~--&&&&&&&&&-&-~-),})45}3;_6666666666666665....",
-"...........a~--&<&<&<&&&&&&&&&4)*(9####2=-:a......<666666666666666666666666666666666666__!;73}08[)445}33,8[4)[8}7!__66_;}5))))[}7_666666666!385555555555555[[4~a...aa^~---&&--&----~<8954[037_6666666666666665....",
-"...........aa1^~~'~~~'''~^^~'-&4{,(@###@=-1.......<6666666666666666666666666666666666_!!773}08[)4)5,33,8[4<)5}7;__6666_70)))))59!666666666_;}8[[[55555555[[4<-:......aaa^^~---&----~&8984)097!_666666666666665....",
-"............aaa111:^:11::11:^'&$50(@###@=&:a......<66666666666666666666666666666666__!;739,85)44[0979,[4<<4[};!_666_6_;}[))))[07_666666666_305[5[5[55[[[44&'^aa........aaaa1^~'----~&59,4)8}7;_666666666666665....",
-"............a::^~^^^^^^^^^^~'-&4{,(@###@=-1.......<6666666666666666666666666666666_!;739,85)44)8939}5)<<<<)87!6_6_6_6!38[4)4)[,;__6_666_6_!385[[[[[[[)4<-~aa....aaa.......aaaaa^^~-~-4,}[45,3;_666666666666665....",
-"..........aa^'-&&&&&&&&-&-&&<<)589(@###@{-:a......<6666666666666666666666666666__!!773}05[44[5}99}8[4<<<<4[};_6_6_6__;}5))4))89!666_6_66__;,5[[[[[[4<&~^aaa..a1~-'~~^11a.a...a.aaa1^~<8954[,37_666666666666665....",
-"..........a^-<44))))))))))))[5*,97(#=#@@=-a.......<666666666666666666666666666__!773}08[)4[5}99}85[)4<<<<)87!__6_6__!38))4)4[07!___6_6_6_!705[[[)<<-^aa....a^~&<<4<<&&&--~^:aaaaa.aa1&8984)897!_66666666666665....",
-"..........1'<)500,,,,,,0,00,,}933/2###@*=-1.......<6666666666666666666666666__!;73}08[)4)5,99},888084<<<<[};_____6__7}[4)4))59!_66___6___;98))4<--1aaa..a:~-&<44))))))44<<<&&-'^^:aaa-[9,))897!_66666666666665....",
-".........a^&)8}993939339393933%3/|@##@2*='1.......<66666666666666666666666__!7739,8[)445,979,00999954<<<483!__6____!38))44))87!____6_!_;798[<&-^aaaa..a:'-<<44)))))))[)[))[))444<&-^1~4,}[)5}3;_66666666666665....",
-"..........~<5,3/+/+/++++++++bb(|2@@@#2(*$'1.......<666666666666666666666__!;739,85[44)0933}}}97;;7,[<<<<[};________7}[44)4)[,;_____!!7390[4&~:aaaa..1~-&<444))))))))))[)[[)[[[))4<&^a~)}98)5}7;_66666666666665....",
-".........1~<5}3+b]b]bbbb]]]]]||||2@@|%32$'a.......<66666666666666666666_!;779}05[44)89339}}37;!!!954&<<453!_______!98)4444)59;__!!73908[<-^aaa...a1'-&<<44)44)44))))))[))[[)))4<-~1a^&5970[5}3;!66666666666665....",
-".........a~<593+b]b]]]]]]]]]|]||@|2(7;/*$'a.......<66666666666666666__!!;33}05[)4)5}33}}}37;!!_!70)<<<<)07!_______7}[444)4[07!!;79}8[4&~1aaa..aa^'&&4444444))4)))))))))[)))4<-'1aa1-<[}770[5}3!_66666666666665....",
-".........a~<5,%+++b+b+b+bb]]]]]]]+%!_;32='a.......<6666666666666666_!!773}08[)4)5}399}937;!!_!!;9[<<&<<59;_!____!!95)44444[,779}054&':a.....aa~-&<<4<4444444)4)4))))))))4<&-^aaa:-&[8}77385897;_66666666666665....",
-"..........~&[09////%/%///%//%/%;!666_;32$-1a......<6666666666666___!;73908[)44503390097;!!!_!!!304<&<<487!!_!!_!!7,[4444))[0,05)<&^1......1^'-&<<<4<444444)44)4))4))44<&-~aaa:~&<)0}373905509;!_66666666666665....",
-".........a:&450}999999999993377;___6_7(@=-a.......<666666666666__!;739,85)44)833}0[[}7;!!!!!!!;9[<<&<<[};!!_!!_!;954444444)[)4&'^a.....a1^-&<<<<4<44<44444444)4)444<<-~:11:~&<)50}999,5[)5893;__66666666666665....",
-"..........a'&4[[555555585888,93;!__6!b#@{-:a......<6666666666__!;739,05[4))8}990[4459;!!!!!!!;384<&<&483;!!!!!!!70[4<4<44<<&-~1......1^~-&&<<<<<<4<44444444)4444<<-~^aa1~&<)50}99}}8[)4)58}37!_666666666666665....",
-"...........:'-&<<<<4<<<<<44[5093;__!/@@@=-a.......<666666666__!773}05[44)8}990[4&&)07;!!!!!!;;9[<&&<<)}7!!!!!!!;9544<4<<&&~^......a1~~&&&<&<<<<<<<<<4<4444444<<&'~1a11-&)50}999,8[)44)[80937!__666666666666665....",
-"............1^^^~~~~~~~~'-&<[8}3;_!/@@#2=&:a......<6666666__!;73}05[)4)8,990[4&&-<[9;!!!!!!;;384<&<&483;!!!!!!;70)4<<&&-^aa.....a^~--&&<<<<<<<<<4<4<4<44<4<<--^111:~&<)8,939,8[)44))580}377!!_6666666666666665....",
-"..............a.aa.aa.aa1^-&)8}7;;%22@@@=-a.......<6666666_!;39,85)445,93}5)&---&403;;;;!;!;7}[<&&<&)}7;!;!;;73}5<<&-~aa.....aa^~-&&&<&&<&<&<<<<<<<<4<<<<&-~^a1^~&<[50}99}85)44))580}9977;!__66666666666666665....",
-"........................a1-<[897;%||@@@{{-1a......<66666__!;3905[44[893}84<-----&59;;!;!;!;;384&&<&453;!;;;7790[<&'^aaa....a1~---&&&<&&<&<<<<<<<<<4<<<&-~^1::~&<)80}99905[444)[88,}937;;!!_6666666666666666665....",
-"........................a~&48977%|||2@@*=-a.......<666666!;79,5)4)893,84<-'-''--403;;;;;;;;30)<&&<&),7;;;77}8[4&~aa......a^~--&&&&&&<&&<&&<&<<<<<<<&--^1aa^&<)50}939,8[)<4)[58,}9377;;!__666666666666666666665....",
-".......................a^&)5}37%]||@||,{$:a.......<6666__;73,5[[89390)&-'''''-'&[97;;;;;;;79[<&&&&<59;773}8[<-^aaa....a1~'---&&&&&&&&&<&<&<<&<<&&&-^1aa^~&<50}333}8[444)[580}9337;;!!__66666666666666666666665....",
-"......................a^&45,37%]]||||90=&:........<66666_;79855977,[&-~''''''--<03;;;;;;;7384&&&&<)0379}8)<'1a......a1~'--&-&---&&&&&&&<&<&<&&&-~1aa^~-<[5,93390[4<44)550,9337;;!___66666666666666666666666665....",
-".....................a^-45}37%]]]||b/,[$:a........<6666_!;3}55,77})-~~~~~''-'-&[97;;;;;;;7})&&&&&<[,}8[4-~aa.....a1^'------&-&&&&&&&<&&&<&&&-~:aa^~&<[80}399}54<<4)[500}9377;;!!__6666666666666666666666666665....",
-"....................a^-)5}37%]]]]]+3}8$'1.........<66666!;3}5[,735&~^~~~'~~~--<03;7;;;;;738<&&&&&<)5)<~1a......a1^~-'------&---&-&&&&&&-&-~^1aa^-<)80}399}8)4<<4[580,}9377;!!__6666666666666666666666666666665....",
-"...................a^&45,3;%b]]|]+798)-:a.........<6666_!;3}8)8395&^~^~~~~-~~&[97;;7;7;77})&&&-&-&&-~aaa....a1:~~'''--------&-&-&&&&&---^111^-&<509939}8[4<<4)55880}}93377;!!_66666666666666666666666666666665....",
-"..................a^-)5}37%b]]]]/330[&^a..........<66666!;7}8)[}30<^:~~~~~~~-<8377;;7;;798<-&---~^aa......a1:^^-~-''''-------&&-&----~111^-&<[80}39}8[4<<44[[5880,,}999337;;!!___66666666666666666666666666665....",
-".................a^&45}373b]]]]/73,[$'a...........<6666__!790[)53}[-:^~~~~-~&[}77;77;777})&--'~aaaa....aa1^~~~~~'''-'-------&-----~^11^-&<[80}99}8[4<&<<))[58888808000,}}9377;!___6666666666666666666666666665....",
-"................a^-)5}37%+]b]]/73,5<'a............<66666_!;3,5)4030<^^^~~~~-<837;7;7779}[<-~:aaa.....a11:^^~^~~~~''''~--------'^^1a^-&<[80999}05)<&<<4))[5[55555[5[[[[5580,}937;;!!__6666666666666666666666665....",
-"...............a^&45}3;%+]]]+/;7}54-:a............<66666__;798[<59}[-1^~~~'-[}777777798)<^aaaaa...aa11^^^^^^~~~~'~'-'-'----~~^1a1^-<)80999905)<<&<<<4))[)[[))))44444))))))580,}937;;!!_66666666666666666666665....",
-"..............a^-)5}37%b]b]b/;798[&~a.............<666666_!;3,544038<^1^~~-<89777779,8<~aaa.....aa1111:^^^^^^~~~~'~''''~'~^111^~<<[8}339}5)<&&--<<<444444<44<<<4)[[50,05)444[580}9977;;!__66666666666666666665....",
-".............a~&45}3;3+]b]b%!;3}54-:a.............<666666__;790[<[995&^^~~-)}3773905<-^aaa...a.1a11^1111^1^^~~~~~'''-~~^^aa1~<<[80993,8)&-----<<&<<<<<<<<<4)[580}9977733}8[<<4)[580}9377;;!__66666666666666665....",
-"............1~&48}37%+b]]]%!_;3,54-'1a............<6666666_!;3}5)403})-^~'<8939}8)<~aaa.....a111aaa111^1^^^^^~~~~~~^^1aaa^~&)8}}3990)&-~-~-----&&&&&&4)[80}99399}}}}}9}3333,5)4<4)[580}937;;!!__66666666666665....",
-"...........a~&45,3;%+]]]+%___;3}5)<&-~:a..........<66666666_!790[<[330<^^-409,84-^aaa....aaa1aaaa1111:1^::^:^~~~~^^1aaa~&4[8}939,[<-^^^^~---&&&<4[58093399}}},8[444444)50}3379054444[[50,}937;;!!_666666666665....",
-"..........a:&45}37%b]]+]%!66_!79,8[)4<&':a........<66666666_!;3}8)<87}[-^-<[[<^aaa.....aaaaaaaaaa11111:^~::1a^^^aaaa^~<)8,999}[<-111^^---&<[[8,}3379}}}}05[44<<-~^^1^^~&<)50}333905444))580}}337;!!__666666665....",
-"..........a'<5,37%+b]+]%__66__!73},8*5)$-1........<666666666_!790[4)930<^1~-:aaa....aa.aaaaaaaaa1::aaa1^^:aaaaaa~'-<4[8,99}54-^1^~--&4[50}937339}},05[)))<&&&&--~11aaa^^'-<4[809933}8)4444[580}937;!_666666665....",
-".........a:&)897%+]]]++!_____!;773399}8{$'a.......<666666666_!;7}8)<83}[-aaaa.....a111...aaaaaaa^^^aaaa^-------&4[[8}}9},[<---&<)580,93339},}}085[[[4444444<444<<-^1a^~&&&&&<4)[80}339,5)444)[50,937;!_6666665....",
-"..........^<[,37+b]+]]]]]]]]]]]]]|]||@@2)-1.......<6666666666_!73054[}30<~aa..aaaa1:1aaa1^^^a1^-&-&&-&&<)[555[550}999},8)4[[880,9939,00,0855[55[[[[[[[5558588888[<'~^~&4[))4<<<<4)[8}933905))44[50}37;_6666665....",
-".........a^<5}3/]+]]+]]+]]]]]]]]]]||||@2=&1.......<6666666666_!;7}8[<8398<~aa.1^11^^^11--&&&&<4[58555[58,9}},0080,,}}00000}999,88885[))[[[[[[5588800,,}}9999939}84&---4[88885[)4<<<4[80}933}05)4)[8,37;__66665....",
-"..........~<593+]]]+]]]]]+]]]]]]||||@@22)&:.......<66666666666_!;3,54),798<&^^'&&<&<&<<[5888550}99},8888888888808800}99,85555[)<&<<<<4))55880,}}9993777777;7;773,[<--&450,,,0085[)4<<<4[58,933905[[5}3;!666665....",
-".........a^<[}%%++++++++]]]]]]]]]]]|||@@=-1.......<66666666666_!;798[4[373054<458888888,999}088858[)<<[[5588800,05[5[[[[<&&-&--~--<<)[580,9993777;7;;;;;;!;;;;77}[4&&<[8,}9}9}},885[)<<<<4[8}9773,5[897;_66665....",
-"..........^&)03;;;;!!;%%]]+]]/%;%%%//(>5$-1.......<666666666666_!73,5)407;79,00}939908555[)4<&&-<4)))50000}05[[)4-------^^^^~--&<4)580}93777;;;!!!!!!____!_!!;;7}54<<<[8}9999999},0885)4<&&<)8,3;70[5}3;!66665....",
-"..........:-48}%!_____%+]]]]/!!;7799}05=$^a.......<666666666666_!77}8[4),97390855[)4&----~-&<4)58},00,08[))4&-~-~^1^^^~~---<<4)[580}93777;!!!!!_____________!;;7954<<450}93939999}},0085[)<<&<)03;}[[03;__6665....",
-"..........1'<[,3;____%++]]+/!_;399088[)$'1a.......<6666666666666_;798[4<<[44&-~~^^^:^^-<)[8,}}},}}8[)))<'''~~:^^^~~--&<<4)55588,999377;;!!!______6_66_66_____!;7}8)<44509933333999}}},0888[)4&&[}7})[097!66665....",
-"..........a~&[0/;__6%++]]]%!_!73}88[=4$-^a........<666666666666_!;390[<&-~^^1:1^~<4)50}93}}}}05)44<-~^~^^^~~~--&<<<)[[5880,,}99993777;;!!_____6_66_666_666___!;795)44)5,9993333399}},},08885[&'<83,))897!_6665....",
-"...........~&)037__%++]]]%!__!79}85[)$$-^1........<666666666666_!;3}8)4&---&4[58}939},,,0844<<-~^~~^~~'--&<<44)[88880}}}9999993333777;;!!__6_6_6_66_6666_6___!;7}8)44)5,93333393999}},,,0885[<~&53,))897__6665....",
-"..........a~<[03;_%+]]]++!66_!73}0*5)=$$'1........<666666666666_;790[))[58,9333},008)4<<<&~^^~~~~---<<4))[58800,,}9999999993939333777;;!!_!___6_6_666_666_66_!;7}5[44)5}9333339399}}},,00888[<~&53,4)897!_6665....",
-"..........:-4897;%++]]]%___6__;73},8*[=$-^a.......<666666666666_!398[597739,088[4<<&-^^~~'---&&<44))558800,}}}}9999999393939393333377;;;!!______6_66666666___!!7}5))4[8,9333333999}}},,08885[&~&8904)897__6665....",
-"..........^&)03;%+]]+]+!_6_6_!!;7399}>*=$'a.......<66666666666_!;3}5[,7730[4<<&-~~~~'---&<<4))[55880,,}}}9}999999999993993939393333777;;;;!!_!____6__66_6_6__!;795))4)8}9333333999},,,008885[&^&530))897!_6665....",
-".........a^<[}3%+]]]]]+]]]]]|||2|@@#####='1.......<666666666666!;9,[[,7984&-^~----&<<44)[[588800,}}}}}9}99999999999399939939939393337777;;;;!!!_!__6_6666_6__!;7}5[4)[8,933333999,,,00088855)&~&5904)09;!66665....",
-".........a'<59%/+]+]]]]]]]]]||||@@#@##=#=-:.......<66666666666_;;90[)030)-'--&<44))[[888800,,}}}}}9}9}999999999999999999993999939333337777;;;;;!!!_____66_6__!;7}8))4[8}99333999},,008888585)&^&5384)097!_6665....",
-"..........'4593/]]]]]]]]]]||||@@@@@####@=-:a......<66666666666_!790))095<&<4))[5888000,,}}}}}}}}9}}9}99}}99999999999999999999399939333377777;;;;!!!__6_6_6___!;7}5[4)[5}9339399}},008888585[)-1-8984[83;!66665....",
-".........a~<83%%]++]+]]]]]]]||||@@#@###@=$:.......<666666666666!798)4095<<)[58800,,,},}}}}}}}}9}}}9}}9}99}9}999999999999999999999993933333737777;;!!____6_6__!;7}5[4)[8}999399}},0888585555[4-:-8984[097!66665....",
-".........a'<59;_!;;!!%_;%!%;%%%%///+++(>='1a......<66666666666_!790[4895<<)5800,,},}}}}}}}}}}}}}9}}}9}9}}9}9}}99}99999999999999999993993333337777;;!!___6____!;7}8))))8,993999},08885555555[4-a-8984[03;__6665....",
-"..........-489;_____6_66666666_6_6___!3,=$:.......<66666666666_!;98)4895<<)[800,,},},,},}}}}}}}}}}}}}}}}}}}}9}}}9}}9}99999999999999999999933333777;;!!______!!77}5)4))8}9999}}}00885855555[[4':-5984[03;!66665....",
-".........a~<89%%/%%!_66666_6_6__!_;|@@@2=-1a......<66666666666_!790[4895&&<)5800,,,,},},,},}}}}}}}}}}}}}}}}}}}}9}}9}}}}}}}9}99}999999999939993333777;!!_____!!;3}5[44[5,}999}}0088555555[5[[<'a&5954[,3;!66665....",
-".........a'453%+]]+%6666!/++/;__!_%@###@=-1.......<666666666666!738[4895<-<4)580,,,,,,,},,},,},,},,},}}}}}}}}}}}}}}}}}9}}9}}}9}9}}9}99999999999333777;!!!__!!!73,5)44)8,9}9}},,8888555[5[5[[<~a&5984[,3;!66665....",
-".........a~453%/]]+!6666%]|||%_!!!%@###@{-:a......<66666666666__790[4595&&&<4[5800,,,,,,,,,,},,,,},,},},}}}}}}}}}}}}}}}}}}}9}}}9}9}}9}9}9}99999393777;;;!!!!!;;30[444)50}}}}}00885555[5[5[5[<^a&595<5,3;_66665....",
-".........a'<89%+]++%6666%|||]%_!!_%@###@=$:.......<666666666666!;30[4895<-&&<4[58000,,0,,,,0,0},,,,,,,,,,,,},,},}}}}}}}}}}}}}}}}}}}}}9}}99}99999393377;;;;!!;7798)<<<)50}}},,,8885555[5[5[[[<^a&5})<5}3;_66665....",
-".........a'<89%/]]+!6666;|@@];__!_%@###@=-1a......<66666666666__730[4595&-&&<<)[8800000,00,,0,0,,,,,,,,,,},,,},,,,},},}},}}}}}}}}}}}}}}9}}}}}}999933377;;;;;;77,54<&<<58,,,,00885555[5[5[5[[<:a-5,)<5,3!_66665....",
-".........a'453%+]]+%6666%||@|%___6%@###@=-:.......<666666666666!73,[4595<-&&&<44[5880000000,0,0,00,,0,,,0,,,,,,},,,,,,,},},},}}}}}}}}}}}}}}9}}}99993337777;7773,[<&&<<[8,,,008885555[555[5[)<^a&50)45}3;_66665....",
-".........a~4897++]+!6666;|@@]%6_66%@###@=&:a......<66666666666__;3054[}5&&&&&&&4)[58800000000000,000,000,,0,,,,0},,,},,,,,,},,,}}},}}}}}}}}}}}9}9999333777777790)&---<[80000888555[55[5[5[5)<1a-50)45}7;_66665....",
-".........a'<59%+]]]]]]]||||@@@#########@#-1.......<666666666666!;3,[4),5&--&&&&<<)[588880000000000000,000,0000,00,,0,,,,,,,,},,,,},,},,},}}}}}}}}9999333377733984--~-<)880808585555[5[55[5[)<^a&50445,7;_66665....",
-".........a'459%/]]]]]|]||@@@###########@{-:a......<666666666666_;3,5<),5&-&&&&&&<<)[[8888808080000000000000,000,000,0,,0,,,,0,,,,,,,,},}},,},}}}}}999933333333}5<-^^~-)58888855555[5[5[[55[)<1a-58)4597;_66665....",
-".........a'<89%+]]]]]]||||@@@##########@=-:.......<666666666666!;3,5<)05&--&&&&&&<<))[588888088880808000000000000,0000,0,0,0,0,,,,,,0,,0},,},,}}}}}99999333339}5&~11^-455858585555[5[555[5[)&:1&88)45}7!_66665....",
-"..........'<5}3++]]]]||||@@@############=-1a......<66666666666__;3}5<)05-~--&&&&&&<<4[[55888880880808088080000000000000000,00,00,,,,,0,,0,,,,},}}}}}9999993999,[&^111-4[55855555[55[5[[[5[5)<:~400448}7;_66665....",
-".........a^<[}3%;%;%;%;%%%%%/+++bbbb]|2@$'a.......<666666666666_;3}54405----&&&&&&&<<4)[555888888888808808888808080000000000000000000,0,0,,,,,,,}}}}}999999399,[-1aa1-4[55555[55[[5[5555[5[)&^-[9,)48}7!_66665....",
-"..........:&)897;__6___66666666666!!7%0=$^a.......<66666666666__;3}54405-~-&&&&&&&&&&<<4)[55588888888888880880808088080000000000000,000,00,0,,},}}}}}}999999990[-1aaa~<[555555[5[5[5[[[[5[[)&~-530)4897!_66665....",
-"..........a'<[03;!_666666666666666_!%,@$-:........<666666666666_;3}54485&~---&&&&&&&&&<<44[[[5585888888888888888808808888800800000000000000000,0,,}}}}}999999}0[-aaaa-4[[[5[[5[5[5[5[55[55[)&^-5304)897!_66665....",
-"..........a^&)8}3!_66_%%|@@@@@|%6_!;/>=$^1........<66666666666__!7}5)408<~-&&-&&&&&&&&&<<<4)[[[5555585888888888888888880808808808000000000000,0,},}}}}}9}9999}0)-aa.a~<[[5[[5[[5[5[[5[[5[[[)&:-5904)897__66665....",
-"...........:-45}%;!_;]|||@@####@@/_73*$$:a........<666666666666_;7}8440,)&---&&-&&&&&&&&<<<<<)[[[555855585858888888888888888888088808080000000000,,,}}}}9}99}}0['a.aa'<[[[[[5[[[[[5[[[[5[[[4-^-5904)897!_66665....",
-"...........1'<5,3!!%]||@@@@######@|%%>=':a........<66666666666__!7}5)4,9[&-&&-&&&&&&<&&&&&<<<<4))[[[55555558555858588588888888888888880880800000,0,},}}}}9}9}}0)-a..a~<[[[[[[[[[[[[[[[[[[[[4-^-5304[09;!666665....",
-"..........a:&4597;/]||||@@@########29>=$:a........<66666666666__;7}8)4,9[&---&-&-&-&&&&&<&&<<<<<4)))[[[[5555555555555555585888888888888880888000,0,,,}}}}}}9}}8)-a.aa'<[[[[[[[[[[[[[[[[[[[[4-^-5984)097!_66665....",
-"...........^&[037/]]|||@||]]|@######@(*$'a........<666666666666_!7}8)4095&--&-&-&&&&&&&&&&<&&<<<<<444)))[)[[[[[[5[5[5555555558588888888888880800000,,},}}}9}}}0)-a...-<)[[[[[[[[[[[[[[[[[[)<-1-5984[03;__66665....",
-"..........1'<5,7%]]|]|+%39,0((+|#####2*#-1........<66666666666__;7}8)4,9[&--&-&-&&-&&&&&&&&&&&<&<<<<<<4444)))[))))[))[)[[[5[55855858888888888880000,0,,}}}}}},8)'a..a~<)[)[)[)[[)[[)[[)[[[[<~:-5984[037!666665....",
-"..........:&)897/]]]]+73}*{{{*0+|####@2{$:a.......<666666666666_!798)4095&---&-&&&&&&&&&&&<&&<&<&&<<<<<<44<44444444)44))))[[[[[558585885888888800000,,,,}}}}},8)-...a~<))[)[)[))[)[[)[[))[)<~1-5984[03;!666665....",
-".........a:&[,7%]]]|+;3,[$&&$${*/]####@2$'a.......<666666666666_;798)409[&----&--&-&&&&<&-<&&&&<<&<&<<<<<<<<<<<4<4<4<4<44444)[[[[555585858588888800000,,,}}}},8)'a.aa'<))[)[))[)[))[))[)[))<~:-5984[03;!666665....",
-"..........~<[}7/]]|+%7}5$-~:^&${>(@###@>='a.......<66666666666_6!790)409[&--&--&&-&&-&&-&<&&<&<&&<<&<&<<<<<<<<<<<<4<4<4444444)))[[5555585858588880800,,,,,},}08)'...a~<))))))[)))[)))[)))))<^a-5954[,3;_666665....",
-".........a^<5}7/]]]/;30)&^11::&=*/b###@@#-:.......<666666666666_!790[489[&--&-----&&-&&&&&&&&&&<&<&<<&<&<<<<<<<4<<4<4<4<44444<)4))[[555555585888880000,0},,},05)'...a~<))[)))))))))))))[))4&^1-5}[4[,3;!666665....",
-".........a~<8}%+]]]%;3*4-^1a1:-$*}(@###@=-:a......<6666666666666!790)4895-~---&-&--&&&-&&&&&<&&&<&<&<<&<<<<<<<4<<4<4<4<44<444444)4)[[[555855585888800000,,,,,054~...a~<4)))))))))))))))))))&^a-50)<5,3!_666665....",
-".........a'4593+]]+%;38=$'::^'$$*(+@###@=$:.......<666666666666_!790[4895-^---&--&-&-&&-&&&-&<&&&<&<&<<<&<<<<<<<<<<4<4<4444444444)4))[5[5555585888880000,,,,,05<~..aa~<4))))))))))))))))))4&^a-5,)<5}3;!666665....",
-"..........~<89%+]]b%!3}[$&'--$$=>9/@###@=-1a......<6666666666666!;90[489[-~-----&--&-&-&&&&&&&&<&&<&<&<&<<<<<<<<<4<<4<4<4<44444444)4))[[[5555558588880000,,,085&:...a~<4)4))4)))4)))4)4))44&1a-50)45,3!_666665....",
-".........a'4593+|]b7!;30{==$$={>(7/@###@=-:.......<666666666666_!;90[<895-^------&--&&-&-&&&&&&&&&&&<&<<<&<<<<<<<<<4<<4<444444444444)))[[[5[555858888800000,08[-a..aa-<44)44)44)44)4)4)4)44&1a-[0445}3;_666665....",
-".........a~<89%+]]b%_!73}**2**(97;%@###@=&:a......<6666666666666!;30[45}5-^-----&-&-&-&&&&&&&&&&<&<&<&<&<<<&<<<<<4<<4<<4<4<4444444)444))[[[555555858880800,008)-....a~<444)44))4)44)4)4)4)4-1a-58)45}7;_666665....",
-"..........-<593+]]]]|||@@@#######@#####@#-:.......<666666666666_!73,[<)}[-~~------&-&-&-&-&&&&&&&&&&<&&<&<<<<<<<<<<<<4<4<44<44444444)44))[[[[55555888880000008)-a..aa'<444444444)44)4444444-1a&58)45}7;_666665....",
-".........a~459%+|]|||2@@###############@{-:a......<6666666666666!;30[4),5-^---------&-&-&&&&&&&&&&<&&<&<&<&<<<<<<<<<4<<<4<444444444444)4))[[[[5555588888000088)-....a-<444444444444444)444<-1^<80)48}7;_666665....",
-".........a'<893+]|]|||@@@=#############@=$:.......<666666666666_!;3,[<)05-~~-----&---&-&-&-&&&&&&&&&&&&&<<&<&<<<<<<<<<<4<<4<<444444444)44))[[[5555558888880088)'a..aa'<44444444444444444444-:')}0)48}7!_666665....",
-".........a'<893+]]|||@@@###############@=-1a......<6666666666666_;3,54)0[-~~----------&-&-&&-&&&&&<&<&<&<&<<&<<<<<<<4<<4<4<44<444444)444)4))[[[555585888800885)'....a-<<444444444444444444<-^-[9,)48}7!_666665....",
-".........a'45}7;%%%%%%%/+bb]b]]]]]]]]b|2=-:.......<666666666666_!;3}[4)0[-~~~--------&--&--&-&&&&&&&&&&&<&&<<&<<<<<<<<<<<4<4<4<444444)44)4)))[[[55558588880805)-...aa-<<4<4<4<4<4<4<4<4<44<-^-59,448}7!_666665....",
-"..........~<897_666666_______6_6_____!%({-:a......<6666666666666_;3,54)0[-~~----------&-&-&&&&&&&&&&&<&<&<<&<<&<<<<<<<<4<<4<4<444444444444))))[[[55558588888884'....a-<<4<4<4<4<4<44<4<4<4<-^-590))897!_666665....",
-".........a'4597__66666666666666666666_7(=$:.......<666666666666_!;3}5<)0[-~~-~----------&--&-&-&&&<&&&&&&&&<&<<&<<<<<<<<4<<4<4<4<444444)444)))[[[[555588880885)~a..aa-<<<<4<<<4<4<<4<4<4<<<-1'5904)897!_666665....",
-".........a~<897%%%%//++]]|||||||||||||22=-:a......<6666666666666_;3}54)8[-~~~---------&--&--&&-&&-&&&&<&&<&<&<&<<<<<<<<<<<4<4<4<44<44444)44)))[[[[555585888885)~....1-<<<<<4<<<<<<<<<<4<<4&-1-5904)897__666665....",
-".........a'<59%+]]]||2@@###############@=$1.......<6666666666666!;3}54408&~-~~-~-------&--&&-&-&&&&&&&&&&&&<&<&<&<<<<<<<<<<<<4<4<4444444)44444)[[[[55585888885)'...a1-<<<<<<4<<<<4<<<<<<<<&-1-[904[897!_666665....",
-".........a'4593+]||||@@@###############@='1a......<6666666666666_!7}54)004~~-~----------&---&-&-&&&&&&<&<&<&<&<&<<<<<<<<<<4<4<4<44<4444444)4))))[[[555585888854'....:-<<<<<<<<<<<<<<<<<<<<&~a-5984[83;!6666665....",
-".........a'<89%b]||||@@@################=-1.......<6666666666666!;3}84),}[-~~~~-~--------&-&-&&-&-&&&&&&&&&&<&<&<&&<<<<<<<<<4<<4<44<4444444444))[[[[55585888854~a..a^-&<<<<<<<<<<<<<<<<<<<&~1-[984[097!6666665....",
-"..........'<597//++]]||2@@@@@@@@@@@@@@@=$':a......<6666666666666_!7}84),}[-~~-~--~---------&-&-&&&-&-&&&&&<&&<&<&<<<<<<<<<<<<<4<4<444<44444)4)4))[[555585888554'....:&<<&<&<<<<&<<<<<<<<&<-^a-5984[03;!_666665....",
-".........a'4597!!__!;73(>*2@@{@{@@@{@==#$^a.......<6666666666666!;3}84)}}[-~~-~~-~----------&-&--&&&&&&&&&&<&&<&<&<&<<<<<<<4<<<<4<<4444444444)4))[[[55585588854'...a^-&<&<&<&&<<&<&&<&<<&<-^a-5}84[09;!6666665....",
-".........a~<89%;_6__!79*5=$4$$$$$$$$$$$'~1a.......<6666666666666_!7984)09[-~~~-~---~-------&--&-<--&&&&&<-&&&<&<&<&<<<<<<<<<<<4<4<44<4444444444))[[[55558885554~...a:&<&<&<&<&<&<&<<&<&<&&-^a-[}54[,3;!6666665....",
-".........a'<59%/%___;30{$&-'''''~~'''^^:aa........<6666666666666_;7}8))09[~~~~~-~~-----------&---&&-&&&&&&<&&&&&<&<&<&<<<<<<<<<<4<<4<4<4444)4444))[[[55558885[4~...a1&&&&<&&<&&&<&&&<&&<<&-1a-[,[<[03;!6666665....",
-"..........'4593++%6!79*4&^:111aaaaaaaaaaa.........<666666666666__!798)409[-~~~~~---~----------&-&&-&-&-&&&&&<&<&<&<&<<<<<<<<<<<4<4<44<444444444)))[[5558585[[)<^....:-&<&&&<&&<&&&<&&&<-&&-1a-[,)4[,3;_6666665....",
-".........a~459%+]]%!;9*$-:1a..aaaaaaaa............<6666666666666_;798)40}[-~~~-~~~-~------------&-&-&&&&&&&&&&&&&&<&&<&<<<<<<<<<<4<<4<4<4<4444444))[555558)-)<<~..aa1--&<&&&&&&&&&&&&&&<&&-aa-[0)4[,3;!6666665....",
-".........a~<593+]]]/;3*=-:aa.......a..............<666666666666_6!790))09[-~~~~~--~--~-----~~~-~~~~-&-&-&&&&&<&<<&&<&<<&<<<<<<<<<<^~~<~~~&444444)))[[55585&5b&<^....1'&^1^~&&&&&&^^^~&&&&-'aa-[0)45,3!_6666665....",
-".........a'<5}/+||||/3}{$'aa......................<6666666666666_!798)40}[~~~~-~~-~~------~<}<~^}5~&&-&&&&&&&&&&&<&<&&<&<<<<<<<<<&4}<<~95-4444444))[[55554<+{-<^..aa1~-:}5~&&&&&&195~&&&&-~aa-[0)45}3;!6666665....",
-"..........~<5}3/]]|||(9*=-^aaa....................<66666666666666!790[489[-~~~~~~-~-~-~-~-~<9<~^}5~-&-&-&&&&&&&&<&&&<<&<<<<<<<<<<&4(4&~}*-44444444)[[558[&{+<<<:....1~&^(*^&-&-&&1(*~&-&&-'aa-58)45,3!_6666665....",
-".........a:&)09%+|||@2>(*=-1aa....................<66666670[[[[[[)94&-~<<-^^^~~~~~~~~~~~^~~<(<~:(5~-&&--^~^~^^^^~&-~~&&&~~-&<-~~~^4(4&'~~-<<-~~~~-<)[555<4b{--:a...aaa11:1~--^^1:1b5~&-^^1aaa'5[-~&<4576666665....",
-"..........:-45}33+||@@@>>*$-:aa...................<66666_[*>bbb((59[}9}}}9}}},<^^5}}}}}0<1~<+<'^(*^--&&-<}}}9}}[^-&5<-<-<5&&-~[,((+b4&~(*-<~<89(,)~&[[5)&>|&<*b-....,('1(*~-1<8((++{~-1&8(((5-)<)>(+>[[3666665....",
-"..........a'&)8}3%]||@@@2({#-:a...................<6666675b+****8[9{b{=42b=$4(}1a&$$$$)>(~'$b<':(5~------$$$$$294-<}<-<-4}<&^*b{4${b4&~+5-~4bb22((8')[5&)b)&&4b{...']*1:b5^1<b>$$$b*^:<b|)$$-<<*b]*2+b*5666665....",
-"...........1'&)5}3%(@@@#@2>*$-'aa.................<666667*]*[373339[b4-${b$1a=+<:^^~^:14+$'$b$~:+5~&-&-----&-'-b*~4b<-<-4b4-&(=^&&$b$<~b*-'>(-~''2(<<[)-]>&[)'|b...{b-:1b*:1>21^-1b{~1>+':^1~<)b2'&<)]([;66665....",
-"...........a1-&)5,9%|@@##@2>{#-:a.................<666667*+>[[[[[59{b=&4)b$a1&b<:a~$$$${b$~$b$'1(5~--&--^:<$$$$+{~$(4-&&$b<'{b~-<&$+$&^b*-&b='<4-$b[&)&{b$<55-4b$..+2a'ab{^&+$:--1b*^&+211aaa<2b&&8})*b5766665....",
-".............1~&45,99|#@###|>{$$:a................<666667[]bbb+b([0{b4<4{]$.1$b$a&bbbbbbb$~$b$'1b*^---&~'>++bbb+2'$+<&&-<+$-*b~<<&4+$<~b2-4b4&44<'b2&<&(2&555&1b2.$+$a-1+21$+$~--1b{^$bb+bbb{<2+'4598*]*766665....",
-".............a1~&4589(2####@2>{#-^a...............<6666665[>>>>>b*8{b=&<)b$aa$b$a||~aaa$b$^$b$~ab5~----~{b$1:::]*'$b4-&&$+$~2b^-<&$+$&^b2&$]4-4<&~b*&-{b<<85541=+'2|.^'ab{:$b$:''1b2:$+2$$$$&<2b'<895{b*766665....",
-"...............a^-4[8}(2#####|>{$$1aa.............<66666_79,,,8[+>8{b)&4{]$.a&b$a+{1^^:$b$~$b$~ab{~--&-~*]:~--:b2'$b4~--$+$')]=^&-$+4&^b{-&b|^-&'=b$&&b{&55554::b2+$a^'1+2:'b21^~1b{:'b2:^:1~<{+)-))4(b)766665....",
-"................a^-$)*,(@#####2>{=-:a.............<666667[5****2+*8{])&4)+$.a$b$a2+$$$${b$^$b$'1+5~----1=+{$$$$b{':+])$${+$-->b=$${b$&~b2-^{b2$4{]>'~>]-4585[4'. at +b.a~~ab{1a2+{$$$b2:a2b{$$$&<<]b=){>b*[666665....",
-".................a^-<)*,(2####@2({='^a............<666667*b]bbbb([,{+)&4=b4a.$]$a~2bbb]bb$^$b$~a+{^----'1{]bbbb+2~:$|bb+bb$&~-2++++b$<^b2--~{]bbb{~'$]{&5585[4'.-b=.1~~ab211a{bbbbb{^1a=]b]]{<4<2b+b]*)3666665....",
-".................a:~-$)>9/@#####2>@$$:a...........<666667[[[[[[[[894$&<4<<-^a.aa:1.aaaaaaa~aaa~11:^-----^11::::11'-~::::^^:&&'~:^~~~~&~~~-<&~~'~'~&'>>-45555[4~.....1^'aaa1~:aaaaaaa:':aaa1.a<}4'-&<4536666665....",
-"...............aaa1~-$4*(7/2#####|({='^a..........<6666666666666__!3}54)}9[~aa1:^~^~^~~~~~''''''-'-----&---&-&-&&&&&&&&&&&&&<&<<&<<<&<<<<<<<<<4<4<<&$&&[5855[<'.....:^~~~~~~~~~~''~~~~~'~^:1'[98)[037!66666665....",
-"...........a1^^^~''--$)*}%!%@#####2>{#-:a.........<66666666666666_;7}8)[}35&a.aa1:^^~^~~~'''''---'----------&-&&-&-&&&&&<&&<&&&&$<&<<<<<<<<<4<<4<4<<<<4[5555[<^....a:~^~^^~^^~~~~~~~~~~^~^1a'[}84)837__6666665....",
-"...........1'-&<&<<<44{*97!_%|####@|>{$-:a........<66666666666666_!790)[}7,[-a.a.a1:^^~~~~''-''''-'------------&-&&&&&&&&&&&<<&<&<&<&<<<<<<<<<<4<4<444)[5555[<~.....:^~^^~^^^^^^^~^^^^~^~:aa-[}54[037_66666665....",
-"..........1~<4[5555[5*0}%;_6_%@#####2(@$'a........<666666666666666!7305[};30[&~aa..aa1^~~~'~~'~-''-''-----&-&-&-&--&&&&&&&<&&&<&<&<<<&<<<<<<4<<<4<4<<4))[555)<^....a:^^^^:^^^^^^^:^^^^^^::aa'[,54[03;!66666665....",
-"..........^-450,}}}}}}9%7!__6_%|####@2>=$:a.......<66666666666666__;3}8[03;3,54&-^a..aa1:^~~''''-'---'--&-----&-&&-&-&&&&&&&&&<&<&&<<<&<<<<<<<4<<<44<44)5555[<^.....^^^:^^::::::^:^^:^:^:1aa'[0[<[037_66666665....",
-"..........^<[09((((>|222|2||||@#######@2$'a.......<666666666666666_!7985[8}339,5[<:1aa....^.aa1''aaa^--'----&-----&&&&&&&&&<&&&&&<&<&<<<<<<<<<<<4<<''^-'-&--&<^....a:^::::::::::::::^:^::a.a'[0[4[03;__6666665....",
-".........a^<5,9+|||@2@@################2='1.......<666666666666666_!;3}8[)[50}3995)b4~a({aa.(*a~'a(51-'-------&&-&--&&&&&&&&&&<&&<&<&<&<<<<<<<<<<<&->]+b--+2&<^....a^^1:1::::::1::::1:1::1.a'[8[<5,3;_66666665....",
-"..........~<5}%b]|||@@@################@=$:a......<6666666666666666_!;3}05))))5,9,{]))'b*aa.+{a^^a]*:--'---------&-&-&-&&&&&&&&<&&<&<&<<&<<<<<<<4<-{b{$4--b*&<^....a^^111111111:111111111a..-[0)4[03;!66666665....",
-".........a~&5,9]|]|@|@################@>=$1a......<6666666666666666675)4<<&<)&-'-&{b{0&&--:1b{...aa.::11a::::~-&~^1^1^:::&&&&&-^::^:^::<&'^~~~'&&'~2b'''--b2-^a....aaaaaaaaaa.a..a.a.aaa....a&8)&&<4))[6666665....",
-"..........~&)8}9////((>>222>>((/%%%%%%/|{$'a......<66666666666666663[5>bbb*)4&{>bbbb)8<b>)*b+++b&.+{a:{b(bbb{1'~:4>bbbb(:&&&&-^{|+bbb+:&~&2bb|)~-$bbbbb22+bb+b$.{$.aa{4.a.{4a.b+bbbb*^.a{++b2&<--{bbb+[6666665....",
-"..........:-4[80}}9}}085{52*>937;_66_7|22$'1......<66666666666666665*b(*5*[5<*+24){b$4&b*5){b>4$'a+{a.*b$$$>b$~1{b2$$$>b:&&&&~4+>$$$$$^^$++22|b2~-$|b$$<$4b|4$^.+{.1a+{aa.b{..&$&$&=b2.a{+$$+><&(b*{5*[6666665....",
-"..........a~-<)[5555[)4$$$$={2>%7!_6;|@@*#'1......<666666666666666;[]+[59990{b{<[)=+4<~b2<5<]>)5)'b2aa{b.1a&b*:1b]:^-:2b1&&&&~2+-~&&&&&~||-:~^2b$&'2+'&&<-b2&&:.+{.aa+{.a.+{aaa.a.aa2+.a{b.a2b<{b{<89336666665....",
-"...........1~'-&<444$&-''''&${*9%!_;|##22$':a.....<66666666666666675b>[[[[[8*+),30{b=)-b2&4-b2[9}<b2&-2baaa.b{:&b{^--^{+:&-&&'2]$:::::'&+=~&<-&b{--2b'<44-]2&&^.b{.aab{aa.b{...'$$&$2b..2ba12b<|b&<4)[[6666665....",
-"............a1:^~''-'::11:~'&=*(%;;|###@2$'a......<6666666666666667*+bbbbb>,>b);;}{b[8&b2<)'b2<8}<b*)42b:':a+{a$b$^-&~2b1&&&&~&bb+bbb2^$b4-<<&~]2-'2b~<44'b2&&1.+{.a.+{.a.+{..2b]]bbb+..{+.:'<<+bbbb+b[6666665....",
-"................a11a1aaaaa:'$$2}7%|####2{$^a......<6666666666666667*]]****5,>b[9_35b{}4b248-b2&4[-b2[52+&)<1b2.$b$1'-^{b:-&--&:&2{22>b&$b$'<&-~b{--2b~<44'b2-'a.b at ...+@...+ at .-]{....{+.a{+.'[}&+b=[{*5[6666665....",
-"....................a...a1:'$=>/%|@####@=$:a......<6666666666666667[b>[}777,*+*[9}*b*94b>[}<b*&<<'+2<)2b4}8-]2^~b2.a:^{+:-&&&--~''~~$+$-+2:--^=b4-'2b~<<4'b*'^..+{...+{...+{.$b$...a{b..2ba'[}<>b<)}9376666665....",
-".......................aaa'$=*}/2#####@2$-1.......<666666666666666_[>b>5**5,{]b***>]*3)b>834]|{)$-b2-&*b<994b2<-2b2$&$2+1---&~&$$$$$2b$:{b2$<{b2^&-2]~<<4'|>=$:.{b$$&b2$&$]{.1b|$$$$2b..{ba~[}4$+|{{**[6666665....",
-".......................a:'-={(b|####@@>{$^a.......<6666666666666666,[>]b]]>}55]bb]bb57[b>8![5]bb[&b*<&2b-[8<b>[)&{bbbbbba~---^2b+b+b]{:-^{|+b+{~'<~2b~<<<-4]bb$.:@b]bb+]]b+{..&2]]]]+b..{b.')95'4>bb]b[6666665....",
-".....................aa1'$$*,(2#####@(2=-:a.......<66666666666666666}[[[[[[,_8[[[[[[[7[[[0_35))444<&)<&''44--&[}5<&&'~2b.1:~'^:::::^::'&-~^:^^:-<<'~^~<<4<-~^a...........................a.')904-&<)))[6666665....",
-".....................a:'-={((|#####|(>=$^a........<6666666666666666666666666666666666666666___!!;7739}0055)444)[[>>>>2b>~-~:::~'-&&&&&<&&&&&<&<<&<<<<<<<<444&^...........................a1'[}0))097!_66666665....",
-"....................a:'$={,(2#####@(>{$'1a........<6666666666666666666666666666666666666666666____!;7739}085[)4<42>>>>{4454&~::1:'--&&&&<<&&<&<<&<&<<<<<<444<:............................a-[98))09;!666666665....",
-"...................a1'&4{,(|#####|(({=-:a.........<6666666666666666666666666666666666666666666666___!;;7339}0854&&-&<4[899,5)<&'^:^''--&&&&<&&&<<&<<<<<<<<44&^.......................aaa..:<890)[09;!_66666665....",
-"..................aa'&${,(2#####@(>5=-^1a.........<6666666666666666666666666666666666666666666666666__!!;;7399,055)444)50999,05)<&-'^~'--&&&<&<&<<&&<<<<<<44&^...........................a-[}384[,3;!666666665....",
-"..................1^&45>(|#####@(>{$$':...........<6666666666666666666666666666666666666666666666666666__!!;7733},88[)444[8,999,05)<&':1~--&&&&<&&<<<&<<<<<<&a'&........................a'40335)5,3;_666666665....",
-"................a1'&4{0(2#####|>>=$$::aa..........<666666666666666666666666666666666675[[[[,6666666666666_6_!;;773}[<&&-'~~--4<<<4,05<11a1aa1:&&<&-:^^&&<<4<~-b$..............a....a.a1~-483735)8}3;_666666665....",
-"................1'$)50(2@####@>0=$-'1a............<66666666666666666666666666666666665*bbb>,66666666666666666_!!;7))*(bbbbbb'-2b(459954b*~1bba--&&~2b$&<<<<<:2|.$]$..b{....a...a.a1^'-<)[0977}[[097!_666666665....",
-"..............a:-<)8,}|#####|+>{$$::1aa...........<6666666666666666666666666666666666[(b**5,6666666666666666666__8[]b]*>2*2*&&*bb{&8}0{b2<-bba~~--~*b$&<<<<~&+$.&]&..b{aaa..a..1^-&4[[8,9999,5[5}3;!_666666665....",
-".............a:-<[8}9>@@###|%9*=$':1a.a...........<66666666666666666666666666666666,[[b>[[[735[[[[0;6,[[[[[8_6666[>b>)[585[[)42b]b<-[[)b>[<b+~&-~^a2b<-&&<-^]2..$]$a.a.......a1^&[4))899))44&<459380,366666665....",
-"............a^-<[893]2@##@|%7(*=-'':::1aa.........<66666666666666666666666666666666,>bbbbb*,[*bbb>5[7,>bbb>586667[b+[0_!!;733[2b)|]'<<$+2)4bb&5[4&:{+$-&&&'=b-..$]&..b{..{+bbbb*<84>{)85'*)&[2)4}[5>>366666665....",
-"...........1~-4[093(|@@@#|7!79*#$$-'--^:1.........<66666666666666666666666666666666,5*+|**[[>bb>>+b*5,>b**+>[6667*b>[,[[)))))5>b{[b{-44b*&-bb49}05&2b$^~-~']{a..&]$..b2~'2b)=)|b{[&b*&44'b2<)2b[[)((5366666665....",
-"...........^&4[093+|2@@@|;__7/,{=$$$$$$-'a........<66666666666666666666666666666666;7[b>8795+>[5[5]([,>b[[>+[6667*b>,,>b++bb)0>]{42b44=b2&~+b&,933[2b4&-~a{b~...$]$^:b2<<2+<044b2&'b2&[[&b2[[)]([>b*5_66666665....",
-"..........1'<[,97/|||@@|;66_!79(22@@{@#$$:a.......<6666666666666666666666666666666666[+>,6,>b5,6!**+5,>+[,>b[6663*b>,,*>>>bb[8>+58)b><{b*<-bb~4[8,[>b{[[-'b=a1a1$+$4&b2[[>b<5)'b*&']*48,<b>53[[b]]>[7666666665....",
-"..........^&)893/]||@2@]/++++]|>222222@=$'a.......<6666666666666666666666666666666666[b>,6,>][_669*b*,>b[,[[[6667*b>[3,,,[bb[,>b*3)*b{{b>)<bb-)444<2b{00&2(--<<&)]{8<b>)42b'44'b2<&b2[934b>8!7[2+>[96666666665....",
-".........a^&[,3/]|||||@@@@@@@@#@#########-1.......<6666666666666666666666666666666666[b>,6,>b[3668*b*,>b[66666667[b+[,666[+b[,>]*79)b]5]>5<b+&)5)4-2b)5))b{48005{b[8<b2&&2b-)5&b*[<b>[77)b>0!55b(b*[7666666665....",
-"..........~<[}3+]]||@@@@###############@4-:.......<6666666666666666666666666666666666[b>,6,*+*[38[>b[,>b[66666666[>b>[5,,[bb[,>b*3655b]b>8)>b5<[[&&|b&<-|]<83398{b)4~b2-&2b&0,<b25)b>)03)b>0,[]][>b*5,[[[66665....",
-".........a~&[,/b|||||@@@#################-1.......<6666666666666666666666666666666666[b>,63[]+***|+2[,>b[66666666,5]bb>>>|bb[,>b*76;[>bb>08{]b2[{5]b2--=b<&8008)$b$<'b*442b<934+>8)>b>5**b>,[>b*5[(b58>+[66665....",
-"..........^&)09/b]]]||@@@######@#@@#@@#{$-:a......<6666666666666666666666666666666666[+>,665[>bbbb*[3,>b[66666666!55>]b+bbbb[,>b*766}5]b>,7[*(bbbbb2<4&>>'4)[[)<)b=)&b2[[>b)7;)+>00[>+b]bb>,>b*[755bb5>b[66665....",
-"..........1-45,}9/(((>>22222 at 2@@@@@@@@=#$'a.......<6666666666666666666666666666666666[[[,66_,[[[[[576,[[[666666666_}5[[[[[[[[,[[[766_5[[[,635[5{*5)4852b<455555)&&&8<44584))__[)[,_,[[[[[[[,[[[76_5555[[[66665....",
-"...........^-4[8800885[[)=$4=$)=44=4$4$$:1a.......<666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666;73333!;05{<}},,,,}993377;;!____666666666666666666666666666666665....",
-"...........a~-<4)))44$&&'-----'-'----''':a........<66666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666___3993773733377;;!_____666666666666666666666666666666666665....",
-"............a:'-----''^:111111::11:::11aa.........<6666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666_6_!!!;;;;!;!!!___6666666666666666666666666666666666666665....",
-"..............aa111aa.aa.a..aaaaaaaaaaa...........<6666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666_6___________666666666666666666666666666666666666666665....",
-"...............................a.a.a.a............'8585858585858585858585858585855855855855585558555855855855855855855585558555855855855855585558555555555555555585585558558555855585585585585585858585858585&....",
-"..................................................................................................................................................................................................................",
-"..................................................................................................................................................................................................................",
-".................................................................................................................................................................................................................."};

Deleted: branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/glade/main/avidemux_icon.xpm
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/glade/main/avidemux_icon.xpm	2009-07-23 18:18:50 UTC (rev 5134)
+++ branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/glade/main/avidemux_icon.xpm	2009-07-23 18:18:52 UTC (rev 5135)
@@ -1,891 +0,0 @@
-/* XPM */
-static const char * avidemux_icon_xpm[] = {
-"64 64 824 2",
-"  	c None",
-". 	c #000000",
-"+ 	c #080808",
-"@ 	c #313131",
-"# 	c #0F0F0F",
-"$ 	c #2A2A2A",
-"% 	c #010101",
-"& 	c #505050",
-"* 	c #101010",
-"= 	c #858585",
-"- 	c #262626",
-"; 	c #212121",
-"> 	c #0C0C0C",
-", 	c #161616",
-"' 	c #383838",
-") 	c #686868",
-"! 	c #2C2C2C",
-"~ 	c #252525",
-"{ 	c #454545",
-"] 	c #474747",
-"^ 	c #272727",
-"/ 	c #2F2F2F",
-"( 	c #1A1A1A",
-"_ 	c #353535",
-": 	c #0D0D0D",
-"< 	c #4A4A4A",
-"[ 	c #303030",
-"} 	c #1F1F1F",
-"| 	c #222222",
-"1 	c #141414",
-"2 	c #575757",
-"3 	c #363636",
-"4 	c #5D5D5D",
-"5 	c #484848",
-"6 	c #111111",
-"7 	c #121212",
-"8 	c #666666",
-"9 	c #767676",
-"0 	c #343434",
-"a 	c #1C1C1C",
-"b 	c #292929",
-"c 	c #2B2B2B",
-"d 	c #2D2D2D",
-"e 	c #5F5F5F",
-"f 	c #1B1B1B",
-"g 	c #6F6F6F",
-"h 	c #787878",
-"i 	c #AAAAAA",
-"j 	c #868686",
-"k 	c #5E5E5E",
-"l 	c #373737",
-"m 	c #737373",
-"n 	c #727272",
-"o 	c #8A8A8A",
-"p 	c #818181",
-"q 	c #707070",
-"r 	c #ADADAD",
-"s 	c #8E8E8E",
-"t 	c #ACACAC",
-"u 	c #717171",
-"v 	c #7A7A7A",
-"w 	c #9C9C9C",
-"x 	c #494949",
-"y 	c #4D4D4D",
-"z 	c #797979",
-"A 	c #151515",
-"B 	c #181818",
-"C 	c #747474",
-"D 	c #626262",
-"E 	c #6C6C6C",
-"F 	c #676767",
-"G 	c #7E7E7E",
-"H 	c #7C7C7C",
-"I 	c #777777",
-"J 	c #7D7D7D",
-"K 	c #838383",
-"L 	c #5B5B5B",
-"M 	c #AEAEAE",
-"N 	c #A2A2A2",
-"O 	c #1D1D1D",
-"P 	c #282828",
-"Q 	c #020202",
-"R 	c #242424",
-"S 	c #0B0B0B",
-"T 	c #0A0A0A",
-"U 	c #131313",
-"V 	c #030303",
-"W 	c #323232",
-"X 	c #060606",
-"Y 	c #424242",
-"Z 	c #040404",
-"` 	c #E7E7E7",
-" .	c #FFFFFF",
-"..	c #646464",
-"+.	c #B0B0B0",
-"@.	c #B9B9B9",
-"#.	c #B3B3B3",
-"$.	c #B1B1B1",
-"%.	c #070707",
-"&.	c #D7D7D7",
-"*.	c #757575",
-"=.	c #929292",
-"-.	c #888888",
-";.	c #9D9D9D",
-">.	c #D8D8D8",
-",.	c #F0F0F0",
-"'.	c #595959",
-").	c #ABABAB",
-"!.	c #0E0E0E",
-"~.	c #A5A5A5",
-"{.	c #F5F5F5",
-"].	c #A3A3A3",
-"^.	c #6B6B6B",
-"/.	c #C9C9C9",
-"(.	c #6A6A6A",
-"_.	c #090909",
-":.	c #919191",
-"<.	c #FCFCFC",
-"[.	c #949494",
-"}.	c #171717",
-"|.	c #050505",
-"1.	c #1E1E1E",
-"2.	c #464646",
-"3.	c #7B7B7B",
-"4.	c #808080",
-"5.	c #7F7F7F",
-"6.	c #848484",
-"7.	c #959595",
-"8.	c #8D8D8D",
-"9.	c #D8D6D8",
-"0.	c #BABAB9",
-"a.	c #BFBFBE",
-"b.	c #181612",
-"c.	c #0E0B07",
-"d.	c #34322E",
-"e.	c #383934",
-"f.	c #555451",
-"g.	c #B3B1AF",
-"h.	c #F8F8F8",
-"i.	c #747471",
-"j.	c #1A1A15",
-"k.	c #2F2E28",
-"l.	c #282822",
-"m.	c #32312C",
-"n.	c #3A3A33",
-"o.	c #292722",
-"p.	c #757572",
-"q.	c #F0EFEE",
-"r.	c #C5C2C5",
-"s.	c #A2A0A2",
-"t.	c #9D9B9D",
-"u.	c #9B9999",
-"v.	c #9B9798",
-"w.	c #C2BDBE",
-"x.	c #F4EBEC",
-"y.	c #D2D1D1",
-"z.	c #5F5E5B",
-"A.	c #878680",
-"B.	c #403F3A",
-"C.	c #2E2D28",
-"D.	c #2B2A25",
-"E.	c #3F3D39",
-"F.	c #2C2B26",
-"G.	c #55534F",
-"H.	c #D6D6D5",
-"I.	c #FCF4F4",
-"J.	c #C1BDBC",
-"K.	c #939192",
-"L.	c #A1A1A1",
-"M.	c #9F9F9F",
-"N.	c #989898",
-"O.	c #7E7F7F",
-"P.	c #757475",
-"Q.	c #B4B0B3",
-"R.	c #919290",
-"S.	c #6E6D69",
-"T.	c #F1F0EB",
-"U.	c #FFFFFA",
-"V.	c #E0DDD8",
-"W.	c #807F7A",
-"X.	c #2F2E29",
-"Y.	c #201F1A",
-"Z.	c #3B3934",
-"`.	c #363530",
-" +	c #5C5B57",
-".+	c #D5D5D4",
-"++	c #F8F3F6",
-"@+	c #A09EA0",
-"#+	c #8D8F8D",
-"$+	c #A4A4A4",
-"%+	c #939393",
-"&+	c #8C8B8C",
-"*+	c #6B6B6A",
-"=+	c #979797",
-"-+	c #F9F9F9",
-";+	c #CECFCD",
-">+	c #4D4B47",
-",+	c #21201A",
-"'+	c #4B4A45",
-")+	c #BBB9B4",
-"!+	c #FAF7F2",
-"~+	c #FBF7F3",
-"{+	c #F5F4EF",
-"]+	c #BDBCB7",
-"^+	c #43433F",
-"/+	c #292823",
-"(+	c #3C3B34",
-"_+	c #A0A19F",
-":+	c #9E9E9E",
-"<+	c #A9A9A9",
-"[+	c #3D3D3D",
-"}+	c #656565",
-"|+	c #656566",
-"1+	c #A5A5A4",
-"2+	c #EBEAEB",
-"3+	c #8A8A88",
-"4+	c #5A5A55",
-"5+	c #31322B",
-"6+	c #595752",
-"7+	c #AAA9A5",
-"8+	c #787772",
-"9+	c #33322E",
-"0+	c #24231F",
-"a+	c #31302B",
-"b+	c #272621",
-"c+	c #15130E",
-"d+	c #666561",
-"e+	c #F0F1EF",
-"f+	c #FFFDFE",
-"g+	c #BCB4B5",
-"h+	c #7B7A7A",
-"i+	c #BFBFBF",
-"j+	c #535353",
-"k+	c #565656",
-"l+	c #A8A8A8",
-"m+	c #B3B2B1",
-"n+	c #7A7A77",
-"o+	c #CFCFCD",
-"p+	c #E2E1DB",
-"q+	c #84837E",
-"r+	c #373731",
-"s+	c #181712",
-"t+	c #14130E",
-"u+	c #2A2924",
-"v+	c #3D3C37",
-"w+	c #3E3D38",
-"x+	c #2D2C27",
-"y+	c #1D1B16",
-"z+	c #444440",
-"A+	c #AEAFAE",
-"B+	c #FCFAFA",
-"C+	c #EEEAEA",
-"D+	c #767576",
-"E+	c #5D5E5D",
-"F+	c #A7A7A7",
-"G+	c #606060",
-"H+	c #E4E3E3",
-"I+	c #D0CECF",
-"J+	c #62605F",
-"K+	c #4B4946",
-"L+	c #B7B5B0",
-"M+	c #F8F7F1",
-"N+	c #FFFFFC",
-"O+	c #C3C2BE",
-"P+	c #1F1E19",
-"Q+	c #3B3A36",
-"R+	c #44443E",
-"S+	c #3C3B36",
-"T+	c #272620",
-"U+	c #302F2B",
-"V+	c #848281",
-"W+	c #D1D1CF",
-"X+	c #B5B4B4",
-"Y+	c #545353",
-"Z+	c #DADADA",
-"`+	c #636363",
-" @	c #B2B2B1",
-".@	c #4C4C4C",
-"+@	c #252424",
-"@@	c #939193",
-"#@	c #DFDDDE",
-"$@	c #868584",
-"%@	c #535451",
-"&@	c #32322D",
-"*@	c #22211B",
-"=@	c #22211C",
-"-@	c #464541",
-";@	c #4B4944",
-">@	c #21201C",
-",@	c #383732",
-"'@	c #43433D",
-")@	c #35342F",
-"!@	c #1B1A15",
-"~@	c #2E2D27",
-"{@	c #8F8E8C",
-"]@	c #ECECEC",
-"^@	c #FFFEFF",
-"/@	c #DCDCDC",
-"(@	c #464647",
-"_@	c #0E0F11",
-":@	c #CBCBCC",
-"<@	c #949596",
-"[@	c #B6B7B8",
-"}@	c #FBFBFB",
-"|@	c #B2B2B2",
-"1@	c #909090",
-"2@	c #404040",
-"3@	c #545355",
-"4@	c #E9E5E5",
-"5@	c #A5A2A1",
-"6@	c #70706E",
-"7@	c #D4D4D4",
-"8@	c #FEFEFF",
-"9@	c #9C9B98",
-"0@	c #191913",
-"a@	c #393833",
-"b@	c #43423C",
-"c@	c #2F2D28",
-"d@	c #15140F",
-"e@	c #2B2A24",
-"f@	c #F8F9F9",
-"g@	c #D3D2D2",
-"h@	c #4F4F4F",
-"i@	c #3B3B3B",
-"j@	c #DDDDE1",
-"k@	c #C5C7D3",
-"l@	c #C4BD8C",
-"m@	c #F6F5E7",
-"n@	c #A7A9B0",
-"o@	c #78797A",
-"p@	c #D6D6D6",
-"q@	c #616161",
-"r@	c #2E2E2E",
-"s@	c #333434",
-"t@	c #C2C1C1",
-"u@	c #D3D2D1",
-"v@	c #5B5C59",
-"w@	c #828280",
-"x@	c #F3F3F3",
-"y@	c #C5C4BF",
-"z@	c #45443F",
-"A@	c #33322D",
-"B@	c #3A3934",
-"C@	c #282722",
-"D@	c #10100A",
-"E@	c #2E2E2B",
-"F@	c #AFB1AF",
-"G@	c #C8C6C6",
-"H@	c #424141",
-"I@	c #959596",
-"J@	c #D0D2D3",
-"K@	c #BAB55D",
-"L@	c #E3BF00",
-"M@	c #F3BC25",
-"N@	c #F2EAE0",
-"O@	c #EAECEF",
-"P@	c #D2D2D2",
-"Q@	c #191919",
-"R@	c #747375",
-"S@	c #9D9D9B",
-"T@	c #191915",
-"U@	c #3D3C36",
-"V@	c #555450",
-"W@	c #24231E",
-"X@	c #0F0E09",
-"Y@	c #30302E",
-"Z@	c #A1A1A2",
-"`@	c #EEEEEE",
-" #	c #FDFDFF",
-".#	c #F7E957",
-"+#	c #FFD200",
-"@#	c #FFB000",
-"##	c #9A7D4E",
-"$#	c #B0B1B5",
-"%#	c #CACACA",
-"&#	c #EDEDED",
-"*#	c #BEBEBE",
-"=#	c #8E8D8F",
-"-#	c #C1C1BF",
-";#	c #40403C",
-">#	c #0E0D07",
-",#	c #1F1E18",
-"'#	c #23221D",
-")#	c #2A2925",
-"!#	c #9A9A9A",
-"~#	c #E4E4E4",
-"{#	c #565454",
-"]#	c #969696",
-"^#	c #FDFDFD",
-"/#	c #F7EC82",
-"(#	c #FFC900",
-"_#	c #D89907",
-":#	c #ADAEB7",
-"<#	c #F6F6F6",
-"[#	c #B8B8B8",
-"}#	c #3A3A3A",
-"|#	c #979896",
-"1#	c #4A4A44",
-"2#	c #020100",
-"3#	c #080702",
-"4#	c #060500",
-"5#	c #AAA9A9",
-"6#	c #DADADB",
-"7#	c #D8D8D9",
-"8#	c #D4D4D3",
-"9#	c #D6D5D6",
-"0#	c #DEDCDD",
-"a#	c #E3E2E4",
-"b#	c #E9E7EA",
-"c#	c #EAE6E9",
-"d#	c #EBE7EA",
-"e#	c #E5E1E3",
-"f#	c #E4E1E3",
-"g#	c #F7F7F6",
-"h#	c #515151",
-"i#	c #DEDEDE",
-"j#	c #F8EEC4",
-"k#	c #FFBA00",
-"l#	c #9A8151",
-"m#	c #E8EBF4",
-"n#	c #FEFEFE",
-"o#	c #F1F1F1",
-"p#	c #A6A6A6",
-"q#	c #232323",
-"r#	c #9B9B9C",
-"s#	c #646462",
-"t#	c #504F4B",
-"u#	c #C0BFB9",
-"v#	c #DEDDD8",
-"w#	c #ABAAA4",
-"x#	c #3B3A34",
-"y#	c #12110B",
-"z#	c #1C1B18",
-"A#	c #71706A",
-"B#	c #696964",
-"C#	c #383731",
-"D#	c #0B0A06",
-"E#	c #0B0A05",
-"F#	c #1E1D19",
-"G#	c #514F4A",
-"H#	c #33312C",
-"I#	c #1C1B15",
-"J#	c #5C5B56",
-"K#	c #B1B0AD",
-"L#	c #EDEDEC",
-"M#	c #C2C2C2",
-"N#	c #B7B7B7",
-"O#	c #FAF7EF",
-"P#	c #D4A538",
-"Q#	c #B3B6B8",
-"R#	c #FBFCFF",
-"S#	c #F4F4F4",
-"T#	c #EFEFEF",
-"U#	c #EBEBEB",
-"V#	c #80807E",
-"W#	c #BAB9B6",
-"X#	c #EBEAE6",
-"Y#	c #7A7974",
-"Z#	c #605F5A",
-"`#	c #777471",
-" $	c #E5E5DF",
-".$	c #FCFBF6",
-"+$	c #8C8B85",
-"@$	c #767570",
-"#$	c #70706A",
-"$$	c #CFCEC9",
-"%$	c #F2F1EC",
-"&$	c #C4C3BE",
-"*$	c #4C4B46",
-"=$	c #45433E",
-"-$	c #24231D",
-";$	c #444341",
-">$	c #CCCBCB",
-",$	c #C5BEC7",
-"'$	c #C1B3C1",
-")$	c #B3ACB2",
-"!$	c #939291",
-"~$	c #DFDFDF",
-"{$	c #FAFAFA",
-"]$	c #FCFCFD",
-"^$	c #FAFCFF",
-"/$	c #D9D4C6",
-"($	c #E9EBEF",
-"_$	c #F9FAFA",
-":$	c #E9E9E9",
-"<$	c #E6E6E6",
-"[$	c #AFAFAF",
-"}$	c #6D6D6D",
-"|$	c #9A9A97",
-"1$	c #ACADA7",
-"2$	c #D1D0CC",
-"3$	c #7F7E78",
-"4$	c #4E4D48",
-"5$	c #51504B",
-"6$	c #BFBCB7",
-"7$	c #FFFBF6",
-"8$	c #FAF8F2",
-"9$	c #8A8A85",
-"0$	c #D2D0CC",
-"a$	c #E7E5E0",
-"b$	c #82817C",
-"c$	c #464540",
-"d$	c #73726D",
-"e$	c #5C5B58",
-"f$	c #CFCFCC",
-"g$	c #FFFBFF",
-"h$	c #D2C1CE",
-"i$	c #CECBCE",
-"j$	c #F7F7F7",
-"k$	c #F8F8F9",
-"l$	c #F7F7F8",
-"m$	c #F5F6F6",
-"n$	c #E2E2E2",
-"o$	c #E0E0E0",
-"p$	c #CBCBCB",
-"q$	c #5A5A5A",
-"r$	c #6C6B6C",
-"s$	c #9C9B99",
-"t$	c #2E2D29",
-"u$	c #282622",
-"v$	c #3A3834",
-"w$	c #53524D",
-"x$	c #7C7B76",
-"y$	c #A9A7A2",
-"z$	c #5E5D59",
-"A$	c #666460",
-"B$	c #A09F9A",
-"C$	c #FDFBF7",
-"D$	c #F9F8F3",
-"E$	c #A7A6A1",
-"F$	c #35332F",
-"G$	c #5F5F5A",
-"H$	c #D7D7D6",
-"I$	c #F1F0F2",
-"J$	c #F2F2F2",
-"K$	c #E3E3E3",
-"L$	c #A7A6A6",
-"M$	c #9D9899",
-"N$	c #FFFDFF",
-"O$	c #9B9393",
-"P$	c #2C2C26",
-"Q$	c #363330",
-"R$	c #494843",
-"S$	c #5A5954",
-"T$	c #54534E",
-"U$	c #494743",
-"V$	c #6B6A65",
-"W$	c #6F6E69",
-"X$	c #45453F",
-"Y$	c #666661",
-"Z$	c #E1E1E1",
-"`$	c #FBFAFA",
-" %	c #E9EAEA",
-".%	c #EAEAEA",
-"+%	c #D4D3D3",
-"@%	c #CCCDCC",
-"#%	c #E3E5E5",
-"$%	c #FFEDF3",
-"%%	c #98878A",
-"&%	c #333430",
-"*%	c #373631",
-"=%	c #3F3E39",
-"-%	c #4D4C47",
-";%	c #504F4A",
-">%	c #474741",
-",%	c #41413B",
-"'%	c #3E3C38",
-")%	c #343330",
-"!%	c #23221F",
-"~%	c #474641",
-"{%	c #565550",
-"]%	c #2D2B27",
-"^%	c #666465",
-"/%	c #E9E8EA",
-"(%	c #F7F5F7",
-"_%	c #EAE9E9",
-":%	c #E8E8E8",
-"<%	c #E5E5E5",
-"[%	c #D5D5D5",
-"}%	c #C3C3C3",
-"|%	c #C5C5C5",
-"1%	c #FFEEF3",
-"2%	c #918283",
-"3%	c #2F2F29",
-"4%	c #34332E",
-"5%	c #41403B",
-"6%	c #44433E",
-"7%	c #43423D",
-"8%	c #42413C",
-"9%	c #252420",
-"0%	c #494742",
-"a%	c #1F1E1A",
-"b%	c #6A6967",
-"c%	c #F1EFF0",
-"d%	c #E1E1E2",
-"e%	c #E6E7E7",
-"f%	c #DEDFDF",
-"g%	c #DBDCDE",
-"h%	c #D6D8DC",
-"i%	c #D2D4D9",
-"j%	c #CBCDD1",
-"k%	c #BCBFC1",
-"l%	c #D7D7D8",
-"m%	c #FFEFF4",
-"n%	c #857777",
-"o%	c #272822",
-"p%	c #262620",
-"q%	c #393933",
-"r%	c #3B3A35",
-"s%	c #383632",
-"t%	c #3D3B37",
-"u%	c #191814",
-"v%	c #6C6C6B",
-"w%	c #F2F2F3",
-"x%	c #F8FAFE",
-"y%	c #E2E4EC",
-"z%	c #DCDEE3",
-"A%	c #DFE1E6",
-"B%	c #DFE1E7",
-"C%	c #DEE3E9",
-"D%	c #E1E2E5",
-"E%	c #DFDFE0",
-"F%	c #DEDEDF",
-"G%	c #DBDDDE",
-"H%	c #D8DADC",
-"I%	c #D5D2CE",
-"J%	c #DCC3A2",
-"K%	c #DEC190",
-"L%	c #CEB48F",
-"M%	c #C4BCB1",
-"N%	c #F7FAFF",
-"O%	c #FFF1F6",
-"P%	c #7D6F6F",
-"Q%	c #1D1E18",
-"R%	c #2D2D27",
-"S%	c #302F2A",
-"T%	c #11100C",
-"U%	c #6E6C6C",
-"V%	c #FBF6FE",
-"W%	c #F9E9D8",
-"X%	c #FBD085",
-"Y%	c #FBC25D",
-"Z%	c #FAC258",
-"`%	c #F4C262",
-" &	c #E8C895",
-".&	c #DDD5CF",
-"+&	c #DBDBE1",
-"@&	c #D8D9DD",
-"#&	c #D6D3D4",
-"$&	c #EAC98E",
-"%&	c #FCD06B",
-"&&	c #FFDF9F",
-"*&	c #FFE7B1",
-"=&	c #FED88B",
-"-&	c #FDBC55",
-";&	c #FFDFB5",
-">&	c #FEF6F9",
-",&	c #736A69",
-"'&	c #171711",
-")&	c #25241F",
-"!&	c #262520",
-"~&	c #2E2E28",
-"{&	c #282723",
-"]&	c #1F1D1A",
-"^&	c #33312D",
-"/&	c #0E0D09",
-"(&	c #6E6E6E",
-"_&	c #F5F5F7",
-":&	c #FDEDDE",
-"<&	c #FCC43D",
-"[&	c #FDC714",
-"}&	c #FFE371",
-"|&	c #FCF4C4",
-"1&	c #FDF9DF",
-"2&	c #FDEFC2",
-"3&	c #F5C665",
-"4&	c #DBCED1",
-"5&	c #CDD2E0",
-"6&	c #F1BE47",
-"7&	c #FFE785",
-"8&	c #FEF4C0",
-"9&	c #FCEFA9",
-"0&	c #FEE46C",
-"a&	c #FECF2E",
-"b&	c #FDAA00",
-"c&	c #FDB445",
-"d&	c #FEF8F3",
-"e&	c #706E6B",
-"f&	c #161510",
-"g&	c #1A1914",
-"h&	c #1D1C17",
-"i&	c #2B2825",
-"j&	c #0C0C06",
-"k&	c #706E6F",
-"l&	c #F6F5F8",
-"m&	c #FDEDCF",
-"n&	c #FDCD2D",
-"o&	c #FFD400",
-"p&	c #FEDF00",
-"q&	c #FEE300",
-"r&	c #FEE216",
-"s&	c #FFD92C",
-"t&	c #FFBF0B",
-"u&	c #E6B865",
-"v&	c #D9C192",
-"w&	c #FFCB00",
-"x&	c #FFDF06",
-"y&	c #FEE705",
-"z&	c #FEE700",
-"A&	c #FFDE00",
-"B&	c #FECF00",
-"C&	c #FEB700",
-"D&	c #FEC465",
-"E&	c #FFFDFC",
-"F&	c #EEEDED",
-"G&	c #90908D",
-"H&	c #14120D",
-"I&	c #11110B",
-"J&	c #1E1D18",
-"K&	c #21201B",
-"L&	c #161511",
-"M&	c #1E1C18",
-"N&	c #191813",
-"O&	c #080602",
-"P&	c #6F6E6E",
-"Q&	c #F7F5F8",
-"R&	c #FBECED",
-"S&	c #F8D06F",
-"T&	c #FCDA06",
-"U&	c #FEF200",
-"V&	c #FFF900",
-"W&	c #FEED00",
-"X&	c #FEDB00",
-"Y&	c #FCBF00",
-"Z&	c #DABD7A",
-"`&	c #DAC494",
-" *	c #FEEB00",
-".*	c #FFF800",
-"+*	c #FFFA00",
-"@*	c #FEEC00",
-"#*	c #FDD700",
-"$*	c #FDCF52",
-"%*	c #FEF3E8",
-"&*	c #D1D0D0",
-"**	c #888885",
-"=*	c #3D3B36",
-"-*	c #12100B",
-";*	c #171611",
-">*	c #22201C",
-",*	c #24221E",
-"'*	c #151612",
-")*	c #1A1913",
-"!*	c #040300",
-"~*	c #686869",
-"{*	c #F2F2F5",
-"]*	c #FCF7FC",
-"^*	c #F7DCEB",
-"/*	c #F7CDA4",
-"(*	c #FCD649",
-"_*	c #FFEE1B",
-":*	c #FEE80E",
-"<*	c #FED823",
-"[*	c #F5C870",
-"}*	c #EDDBE4",
-"|*	c #EDE0EF",
-"1*	c #FBCF6E",
-"2*	c #FDE310",
-"3*	c #FEE100",
-"4*	c #FCE600",
-"5*	c #FDDF35",
-"6*	c #F7CE8B",
-"7*	c #F8E4EB",
-"8*	c #949391",
-"9*	c #43423F",
-"0*	c #13120E",
-"a*	c #16150F",
-"b*	c #1F1D19",
-"c*	c #21211C",
-"d*	c #211F1B",
-"e*	c #151410",
-"f*	c #11100B",
-"g*	c #030200",
-"h*	c #5D5D5B",
-"i*	c #FDFEFF",
-"j*	c #FFF7FE",
-"k*	c #FBFBFF",
-"l*	c #F4F2F6",
-"m*	c #F4F2F7",
-"n*	c #FDFCFF",
-"o*	c #FFF8FF",
-"p*	c #FFECEA",
-"q*	c #FFF2F4",
-"r*	c #FEFDFF",
-"s*	c #FAFBFF",
-"t*	c #ECECED",
-"u*	c #ACABAB",
-"v*	c #5A5A57",
-"w*	c #0D0C08",
-"x*	c #11100A",
-"y*	c #12120A",
-"z*	c #100F0B",
-"A*	c #0D0C07",
-"B*	c #828080",
-"C*	c #AEAEAC",
-"D*	c #6F6F6D",
-"E*	c #1D1D1A",
-"F*	c #0C0B06",
-"G*	c #0E0F09",
-"H*	c #565754",
-"I*	c #D0CFD0",
-"J*	c #FFFFFE",
-"K*	c #C3C2C1",
-"L*	c #8B8A89",
-"M*	c #B9B7B6",
-"N*	c #878787",
-"O*	c #444444",
-"P*	c #898989",
-"Q*	c #434343",
-"R*	c #B5B5B5",
-"S*	c #8F8F8F",
-"T*	c #999999",
-"U*	c #D9D9D9",
-"V*	c #C7C7C7",
-"W*	c #333333",
-". . . . . . . . . . . . . . . . . . . . . . + @ # $ % . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . ",
-"& * = - ; > , ' ) ! ~ - { ' ] ^ / - ( ! / _ : < [ } | . . . . . . . . . . . . . . . . . . . . 1 2 3 4 5 6 7 8 9 0 a b } c d ( } ",
-"e f g h i j k l m n o p q h r s h t u v w x 1 4 y z A . . . . . . . . . . . . . . . . . . . . B C D E o F 3 G H I J K L n M N x ",
-". . * ^ O . . . . . 7 P } . . . . . Q R $ # . . . . S 3 $ T . . . . U / ' V . . . . , _ W Q . . . . X & Y , Q . . . . | $ . . . ",
-". Z `  . .... . . , +. . .D . . . . @. . .o . . . 1 #. . .p . . . . $. . .I %.. . . &. . .*.. . . # =. . .-.. . . . ;. . .N % . ",
-". . >. .,.'.. . . * N  . .2 . . . . ). . .G . . . !.~. .{.*.. . . . ]. . .^.Q . . . /. . .(.. . . _.j  . .G . . . . :.<. .[.. . ",
-". . >. .,.'.. . . * N  . .2 . . . . ). . .G . . . !.~. .{.*.. . . . ]. . .^.Q . . . /. . .(.. . . _.j  . .G . . . . :.<. .[.. . ",
-". . >. .,.'.. . . * N  . .2 . . . . ). . .G . . . !.~. .{.*.. . . . ]. . .^.Q . . . /. . .(.. . . _.j  . .G . . . . :.<. .[.. . ",
-". Z `  . .... . . }.+. . .D . . . . @. . .o . . . 1 #. . .p . . . . $. . .I %.. . . &. . .*.. . . # [. . .o . . . . ;. . .N % . ",
-". . > ~ f . . . . . |.- O . . . . . . | P . . . . . . ^ ( . . . . . V } P . . . . . X ~ | . . . . . . ^ 1.. . . . . . 1.^ . . . ",
-"V 2.K v 3.J 4.4.4.5.H v v J 5.4.4.5.H v v J 5.4.4.5.H v v J 5.4.4.5.H v v J 5.4.4.5.H v v J 5.4.4.5.H v v J 5.4.4.5.J v v 6.2.V ",
-"X 7. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .7.X ",
-"X 8. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .8.X ",
-"X 8. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .8.X ",
-"X 8. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .8.X ",
-"X 8. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .8.X ",
-"X 8. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .8.X ",
-"X 8. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .8.X ",
-"X 8. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .9.0. . . . . . . . . . . . . . .8.X ",
-"X 8. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .a.b.c.d.e.f.g. . . . . . . . . . .8.X ",
-"X 8. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .h.i.j.k.l.m.n.o.p. . . . . . . . . . .8.X ",
-"X 8. . . . . . . . . . . . . . . .q.r.s.t.u.v.w.x. . . . . . . . . . . . . . . . . .y.z.A.B.C.D.D.E.F.G.H. . . . . . . . . .8.X ",
-"X 8. . . . . . . . . . . . . .I.J.K.[.L.].M.N.O.P.Q. . . . . . . . . . . . . . . .R.S.T.U.V.W.X.Y.Z.`. +.+ . . . . . . . . .8.X ",
-"X 8. . . . . . . . . . . . .++ at +#+w ~.i t $+:.%+&+*+=+-+ . . . . . . . . . . .;+>+,+'+)+!+~+{+]+^+/+`.(+_+ . . . . . . . . .8.X ",
-"X 8. . . . . . . . . . . . .M.p :.N.:+<+j W < [+}+h |+1+ . . . . . . . . .2+3+4+5+D.C.C.6+7+8+9+0+a+b+c+d+e+ . . . . . . . .8.X ",
-"X 8. . . . . . . . . . .f+g+h+J $+i+r s 0 G j h j+k+D { l+ . . . . . . .m+n+o+ .p+q+r+b+s+t+u+v+w+x+y+z+A+B+ . . . . . . . .8.X ",
-"X 8. . . . . . . . . . .C+D+E+F+-+ . .8.G+s s j h ' k 3 j+H+ . . . .I+J+m.K+L+M+N+O+v+P+Q+R+S+T+U+V+W+ . . . . . . . . . . .8.X ",
-"X 8. . . . . . . . . . .X+Y+G+Z+ . at .`+ @y i+#.4 ' P .@@ +@@@ . .#@$@%@&@*@=@Y.-@;@>@,@'@)@!@~@{@]@ . . . . . . . . . . . . .8.X ",
-"X 8. . . . . . . . . .^@h+/ k+/@ .(@_@:@<@[@}@8.|@1 at 2@! !.3 at 4@5 at 6@7@ .8 at 9@)@0 at Y.a@b at c@d at e@M.f@ . . . . . . . . . . . . . . .8.X ",
-"X 8. . . . . . . . . .g at h@| i at M.}@j at k@l at m@n at o@<+p at q@r at a !.s at t@u at v@w at x@ .y at z@A at B@C at D@E at F@ . . . . . . . . . . . . . . . . . .8.X ",
-"X 8. . . . . . . . . .G at H@a ^ d I at J@K at L@M at N@O at P@8.} Q at A > S R@ .S at T@U at V@F.C at W@X at Y@Z@ . . . . . . . . . . . . . . . . . . . .8.X ",
-"X 8. . . . . . . . . .$.r at 6 O z `@ #.#+#@###$#%#&#*#r at X + . > =#-#;#>#,#'#d@)#!# . . . . . . . . . . . . . . . . . . . . . .8.X ",
-"X 8. . . . . . . . .~#{#Q : ]#^# . ./#(#_#:# .^#h.<#[#O . . . }#|#1#2#3#4#Q+5#6#7#8#9#0#a#b#c#d#e#f#g# . . . . . . . . . . .8.X ",
-"X 8. . . . . . . . .8.|.. h#i# . . .j#k#l#m#n#{.x at o#`@p#!.. . q#r#s#t#u#v#w#x#y#z#A#B#C#D#E#F#f.G#H#I#J#K#L# . . . . . . . .8.X ",
-"X 8. . . . . . . .M#0 . Q at N# .n#^#8 at O#P#Q#R#h.S#T#U#U#Z+) . . * -.V#W# .X#Y#Z#`# $ ..$+$@$#$$$%$&$*$a@=$-$;$>$ . . . . . . .8.X ",
-"X 8. . . . . . .^#,$'$)$!$~$}@-+{$]$^$/$($_$S#o#&#:$<$<$[$; W }$M.|$1$2$3$4$5$6$7$8$9$W.W.0$.$a$b$/+c$d$J#e$f$ . . . . . . .8.X ",
-"X 8. . . . . . . . .g$h$i${.<#j$j$-+k$l$m${.o#`@U#` n$o$p$q$r$ . .s$t$'#u$v$w$x$y$+$z$A$B$C$D$E$- at F$w$8+5$G$H$ . . . . . . .8.X ",
-"X 8. . . . . . . . . .g$I$`@T#o#x at S#S#J$J$,.`@U#` K$~$/@/@L$M$ .N$O$r+P$A at Q$B.R$*$S$J#T$U$'+V$4$m.C at 5$W$X$Y$Z$ . . . . . . .8.X ",
-"X 8. . . . . . . . . .`$T# %U#&#T#,.T#`@`@]@.%<$K$~$/@&.+%@%#% .$%%%&%x+a+`.*%=%X$-%;%;%>%,%'%v+)%!%~%{%]%^%/% . . . . . . .8.X ",
-"X 8. . . . . . . . . . .(%_%:%:$U#U#U#.%:$` <%n$~$/@>.[%}%|%h. .1%2%3%F.X.a+4%)@B at 5%6%7%8%B.=%v+9+9%z at 0%a%b%c% . . . . . . .8.X ",
-"X 8. . . . . . . . . . .n#:$d%~#e%<$<$<%~#K$o$f%g%h%i%j%k%l% . .m%n%o%p%]%F.X.a+)@q%B at r%a at s%a at t%4%'#r%U at u%v%w% . . . . . . .8.X ",
-"X 8. . . . . . . . . . . .x%y%z%A%B%C%D%E%F%G%H%I%J%K%L%M%N% . .O%P%Q%W at b+C@/+x+R%m.S%A at A@m.X.4%a+'#`.S%T%U%S# . . . . . . .8.X ",
-"X 8. . . . . . . . . . .V%W%X%Y%Z%`% &.&+&@&#&$&%&&&*&=&-&;& . .>&,&'&Y.'#)&!&b+D.F.x+/+F.~&x+F.{&]&^&F./&(&_& . . . . . . .8.X ",
-"X 8. . . . . . . . . . .:&<&[&}&|&1&2&3&4&5&6&7&8&9&0&a&b&c&d& .{.e&f&g&h&=@=@W@!&C at l.C@W at b+/+i&W at s+)&=@j&k&l& . . . . . . .8.X ",
-"X 8. . . . . . . . . . .m&n&o&p&q&r&s&t&u&v&w&x&y&z&A&B&C&D&E& .F&G&x+H&I&s+!@J&K&!&W@)&W at Y.W@C@)&L&M&N&O&P&Q& . . . . . . .8.X ",
-"X 8. . . . . . . . . . .R&S&T&U&V&W&X&Y&Z&`&+# *.*+*@*#*$*%* . . . . .&***=*N&-*;*h&Y.P+>*K&P+'#,*'*)*d@!*~*{* . . . . . . .8.X ",
-"X 8. . . . . . . . . . .]*^*/*(*_*:*<*[*}*|*1*2*3*4*5*6*7* . . . . . . . . .E%8*9*L&0*a*g&b*P+c*d*e*L&f*g*h*:% . . . . . . .8.X ",
-"X 8. . . . . . . . . . . . . #i*g$j* .k*l*m*n*o*p*q*r*s*i* . . . . . . . . . . . .t*u*v*w*x*y*s+!@T%z*A*N&B*,. . . . . . . .8.X ",
-"X 8. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . ._$C*D*E*F*2#G*H*I* . . . . . . . . .8.X ",
-"X 8. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .J*K*L*M* . . . . . . . . . . .8.X ",
-"X 8. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .8.X ",
-"X 8. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .8.X ",
-"X :+ . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .:+X ",
-". . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . ",
-". . '.j C O . . . . ] N*G R . . . . O*4.P*c . . . V Q*-.*.r at . . . . 2.4.o ~ . . . . & j 4.q#. . . . l -.5.0 . . . . }#v P*' . . ",
-". % n$ .^#G+. . . A t  . .e . . . . R* . .j . . . 7 [$ . .J . . . . t  . .m X . . . P@ . .n . . . : S* . .j . . . . T* . .;.. . ",
-". . >. .,.'.. . . * N  . .2 . . . . ). . .G . . . !.~. .{.*.. . . . ]. . .^.Q . . . /. . .(.. . . _.j  . .G . . . . :.<. .[.. . ",
-". . >. .,.'.. . . * N  . .2 . . . . ). . .G . . . !.~. .{.*.. . . . ]. . .^.Q . . . /. . .(.. . . _.j  . .G . . . . :.<. .[.. . ",
-". . U* .o#q$. . . 6 ]. . .2 . . . . t  . .G . . . # ~. .{.9 . . . . $+ . .^.V . . . /. . .^.. . . T N* . .G . . . . =.<. .7.. . ",
-". Z U* . .2 . . . !.i  . .k . . . . ). . .z . . . !.p# . .I . . . . F+ . .E Z . . . V* . .8 . . . T o  . .K . . . . :. . .%+% . ",
-". . . . . . . . . . . . . . . . . . . . . . . i at _.c . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . ",
-". . . . . . . . . . . . . . . . . . . . . . 6 < [ } | . . . . . . . . . . . . . . . . . . . . . . . . . . . r at j+2 W*(&}.. . . . ",
-". . . . . . . . . . . . . . . . . . . . . . ( 4 y v Q at . . . . . . . . . . . . . . . . . . . . . . . . . . . | < ^.(&6.2 S . . . ",
-". . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . "};

Deleted: branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/glade/main/backward.xpm
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/glade/main/backward.xpm	2009-07-23 18:18:50 UTC (rev 5134)
+++ branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/glade/main/backward.xpm	2009-07-23 18:18:52 UTC (rev 5135)
@@ -1,48 +0,0 @@
-/* XPM */
-static const char * xpm_backward[] = {
-"32 20 25 1",
-" 	c None",
-".	c #000000",
-"+	c #D9D9D9",
-"@	c #FFFFFF",
-"#	c #696867",
-"$	c #5B5A59",
-"%	c #9C9C9A",
-"&	c #636261",
-"*	c #908F8D",
-"=	c #6F6E6C",
-"-	c #959491",
-";	c #C0BFBD",
-">	c #F7F7F7",
-",	c #A2A09F",
-"'	c #A6A4A2",
-")	c #BDBCB9",
-"!	c #F6F6F6",
-"~	c #A3A2A0",
-"{	c #B7B6B3",
-"]	c #D0CFCD",
-"^	c #A8A7A5",
-"/	c #D5D5D3",
-"(	c #C4C4C2",
-"_	c #DFDFDE",
-":	c #D4D3D1",
-"                                ",
-"                                ",
-"                                ",
-"                 .+             ",
-"                ..@             ",
-"               .#.@             ",
-"              .$%.@             ",
-"             .&*.@              ",
-"            .=-;.>              ",
-"           .,').!               ",
-"            .~{].@              ",
-"             .^/.@              ",
-"             @.(_.@             ",
-"              @.:.@             ",
-"                ..@             ",
-"                @.@             ",
-"                                ",
-"                                ",
-"                                ",
-"                                "};

Deleted: branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/glade/main/begin.xpm
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/glade/main/begin.xpm	2009-07-23 18:18:50 UTC (rev 5134)
+++ branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/glade/main/begin.xpm	2009-07-23 18:18:52 UTC (rev 5135)
@@ -1,79 +0,0 @@
-/* XPM */
-static const char * xpm_begin[] = {
-"32 20 56 1",
-" 	c None",
-".	c #000000",
-"+	c #FFFFFF",
-"@	c #D9D9D9",
-"#	c #737372",
-"$	c #848483",
-"%	c #888887",
-"&	c #7E7E7D",
-"*	c #A8A7A6",
-"=	c #A4A4A3",
-"-	c #696867",
-";	c #A6A5A4",
-">	c #B5B4B3",
-",	c #5B5A59",
-"'	c #9C9C9A",
-")	c #858483",
-"!	c #AAA9A7",
-"~	c #C0BFBE",
-"{	c #636261",
-"]	c #908F8D",
-"^	c #C5C4C3",
-"/	c #91908E",
-"(	c #AFAEAC",
-"_	c #CACAC8",
-":	c #6F6E6C",
-"<	c #959491",
-"[	c #C0BFBD",
-"}	c #D3D3D1",
-"|	c #E4E4E4",
-"1	c #A2A09F",
-"2	c #A6A4A2",
-"3	c #BDBCB9",
-"4	c #C6C5C3",
-"5	c #D4D3D2",
-"6	c #A3A2A0",
-"7	c #B7B6B3",
-"8	c #D0CFCD",
-"9	c #D4D4D3",
-"0	c #A6A5A2",
-"a	c #BBBAB7",
-"b	c #A8A7A5",
-"c	c #D5D5D3",
-"d	c #DFDFDD",
-"e	c #AEADA9",
-"f	c #BFBDBA",
-"g	c #D7D5D3",
-"h	c #C4C4C2",
-"i	c #DFDFDE",
-"j	c #B2B0AD",
-"k	c #C3C1BE",
-"l	c #D9D8D6",
-"m	c #D4D3D1",
-"n	c #B5B3B0",
-"o	c #D1CFCC",
-"p	c #DEDDDB",
-"q	c #F3F3F3",
-"                                ",
-"                                ",
-"                                ",
-"          .....+      .@        ",
-"          .#$%.+     ..+        ",
-"          .&*=.+    .-.+        ",
-"          .&;>.+   .,'.+        ",
-"          .)!~.+  .{]^.+        ",
-"          ./(_.+ .:<[}.+        ",
-"          ./(_.|.12345.+        ",
-"          ./(_.+ .6789.+        ",
-"          .0a5.+  .bcd.+        ",
-"          .efg.+  +.hi.+        ",
-"          .jkl.+   +.m.+        ",
-"          .nop.+     ..+        ",
-"          .....+     +.+        ",
-"          +++++q                ",
-"                                ",
-"                                ",
-"                                "};

Deleted: branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/glade/main/end.xpm
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/glade/main/end.xpm	2009-07-23 18:18:50 UTC (rev 5134)
+++ branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/glade/main/end.xpm	2009-07-23 18:18:52 UTC (rev 5135)
@@ -1,78 +0,0 @@
-/* XPM */
-static const char * xpm_end[] = {
-"32 20 55 1",
-" 	c None",
-".	c #000000",
-"+	c #FFFFFF",
-"@	c #737372",
-"#	c #848483",
-"$	c #888887",
-"%	c #727170",
-"&	c #7E7E7D",
-"*	c #A8A7A6",
-"=	c #A4A4A3",
-"-	c #7B7B7A",
-";	c #6C6B6A",
-">	c #A6A5A4",
-",	c #B5B4B3",
-"'	c #7F7E7D",
-")	c #999996",
-"!	c #7D7C7B",
-"~	c #858483",
-"{	c #AAA9A7",
-"]	c #C0BFBE",
-"^	c #828180",
-"/	c #9D9C9A",
-"(	c #B0AFAC",
-"_	c #908F8D",
-":	c #91908E",
-"<	c #AFAEAC",
-"[	c #CACAC8",
-"}	c #8C8B89",
-"|	c #A9A8A5",
-"1	c #BDBCB9",
-"2	c #C5C3C0",
-"3	c #D0CECC",
-"4	c #CDCDCD",
-"5	c #8F8E8C",
-"6	c #B5B3B1",
-"7	c #C7C6C3",
-"8	c #D2D1CE",
-"9	c #B9B6B4",
-"0	c #D8D7D5",
-"a	c #A6A5A2",
-"b	c #BBBAB7",
-"c	c #D4D3D2",
-"d	c #A19F9D",
-"e	c #C7C6C4",
-"f	c #AEADA9",
-"g	c #BFBDBA",
-"h	c #D7D5D3",
-"i	c #A7A6A3",
-"j	c #B2B0AD",
-"k	c #C3C1BE",
-"l	c #D9D8D6",
-"m	c #B5B3B0",
-"n	c #D1CFCC",
-"o	c #DEDDDB",
-"p	c #F3F3F3",
-"                                ",
-"                                ",
-"                                ",
-"          .       .....+        ",
-"          ..      .@#$.+        ",
-"          .%.     .&*=.+        ",
-"          .-;.    .&>,.+        ",
-"          .')!.   .~{].+        ",
-"          .^/(_.  .:<[.+        ",
-"          .}|123.4.:<[.+        ",
-"          .5678.+ .:<[.+        ",
-"          ./90.+  .abc.+        ",
-"          .de.+   .fgh.+        ",
-"          .i.+    .jkl.+        ",
-"          ..+     .mno.+        ",
-"          .+      .....+        ",
-"          +       +++++p        ",
-"                                ",
-"                                ",
-"                                "};

Deleted: branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/glade/main/forward.xpm
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/glade/main/forward.xpm	2009-07-23 18:18:50 UTC (rev 5134)
+++ branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/glade/main/forward.xpm	2009-07-23 18:18:52 UTC (rev 5135)
@@ -1,46 +0,0 @@
-/* XPM */
-static const char * xpm_forward[] = {
-"32 20 23 1",
-" 	c None",
-".	c #000000",
-"+	c #727170",
-"@	c #7B7B7A",
-"#	c #6C6B6A",
-"$	c #7F7E7D",
-"%	c #7D7C7B",
-"&	c #828180",
-"*	c #B0AFAC",
-"=	c #908F8D",
-"-	c #8C8B89",
-";	c #C5C3C0",
-">	c #D0CECC",
-",	c #CDCDCD",
-"'	c #8F8E8C",
-")	c #C7C6C3",
-"!	c #D2D1CE",
-"~	c #FFFFFF",
-"{	c #9D9C9A",
-"]	c #D8D7D5",
-"^	c #A19F9D",
-"/	c #C7C6C4",
-"(	c #A7A6A3",
-"                                ",
-"                                ",
-"                                ",
-"             .                  ",
-"             ..                 ",
-"             .+.                ",
-"             .@#.               ",
-"              .$%.              ",
-"              .&*=.             ",
-"               .-;>.,           ",
-"              .')!.~            ",
-"              .{].~             ",
-"             .^/.~              ",
-"             .(.~               ",
-"             ..~                ",
-"             .~                 ",
-"             ~                  ",
-"                                ",
-"                                ",
-"                                "};

Deleted: branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/glade/main/gnome-calculator.xpm
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/glade/main/gnome-calculator.xpm	2009-07-23 18:18:50 UTC (rev 5134)
+++ branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/glade/main/gnome-calculator.xpm	2009-07-23 18:18:52 UTC (rev 5135)
@@ -1,202 +0,0 @@
-/* XPM */
-static const char * gnome_calculator_xpm[] = {
-"24 24 175 2",
-"  	c None",
-". 	c #000000",
-"+ 	c #030404",
-"@ 	c #D6D6D6",
-"# 	c #CDCDCD",
-"$ 	c #C3C3C3",
-"% 	c #B9B9B9",
-"& 	c #AFAFAF",
-"* 	c #A5A5A5",
-"= 	c #9B9B9B",
-"- 	c #929292",
-"; 	c #888888",
-"> 	c #7E7E7E",
-", 	c #757575",
-"' 	c #747474",
-") 	c #7F7F7F",
-"! 	c #939393",
-"~ 	c #18191A",
-"{ 	c #CCCCCC",
-"] 	c #394339",
-"^ 	c #A6A6A6",
-"/ 	c #181819",
-"( 	c #343C34",
-"_ 	c #576457",
-": 	c #535F53",
-"< 	c #4E5A4E",
-"[ 	c #4B564B",
-"} 	c #949494",
-"| 	c #A7A7A7",
-"1 	c #181818",
-"2 	c #384038",
-"3 	c #363E36",
-"4 	c #323932",
-"5 	c #353D35",
-"6 	c #A8A8A8",
-"7 	c #171718",
-"8 	c #CBCBCB",
-"9 	c #C1C1C1",
-"0 	c #B8B8B8",
-"a 	c #AEAEAE",
-"b 	c #A4A4A4",
-"c 	c #919191",
-"d 	c #878787",
-"e 	c #7D7D7D",
-"f 	c #828282",
-"g 	c #959595",
-"h 	c #40403F",
-"i 	c #3E3E3C",
-"j 	c #484846",
-"k 	c #4B4B4A",
-"l 	c #161617",
-"m 	c #7C8080",
-"n 	c #545656",
-"o 	c #525354",
-"p 	c #4A4A4B",
-"q 	c #494A4A",
-"r 	c #484A4A",
-"s 	c #48494A",
-"t 	c #484849",
-"u 	c #474848",
-"v 	c #474748",
-"w 	c #464648",
-"x 	c #464647",
-"y 	c #464646",
-"z 	c #4D4C4E",
-"A 	c #656466",
-"B 	c #848889",
-"C 	c #454849",
-"D 	c #1F2121",
-"E 	c #1F2021",
-"F 	c #5A5E5F",
-"G 	c #424446",
-"H 	c #1E1F1F",
-"I 	c #1D1E1F",
-"J 	c #57585A",
-"K 	c #404142",
-"L 	c #1D1D1E",
-"M 	c #1C1D1D",
-"N 	c #545456",
-"O 	c #3D3D3E",
-"P 	c #1B1B1C",
-"Q 	c #575659",
-"R 	c #161616",
-"S 	c #838788",
-"T 	c #282828",
-"U 	c #A3A3A3",
-"V 	c #808080",
-"W 	c #2A2B2C",
-"X 	c #A9A9A9",
-"Y 	c #7B7B7B",
-"Z 	c #2A2A2A",
-"` 	c #7C7C7C",
-" .	c #272728",
-"..	c #373737",
-"+.	c #C0C0C0",
-"@.	c #282829",
-"#.	c #161516",
-"$.	c #828687",
-"%.	c #212121",
-"&.	c #5F5F5F",
-"*.	c #2B2C2C",
-"=.	c #ADADAD",
-"-.	c #29292A",
-";.	c #838383",
-">.	c #323232",
-",.	c #818485",
-"'.	c #323233",
-").	c #4A4B4D",
-"!.	c #313132",
-"~.	c #48484A",
-"{.	c #303031",
-"].	c #4A494B",
-"^.	c #3A393B",
-"/.	c #1A191B",
-"(.	c #19191A",
-"_.	c #535154",
-":.	c #151415",
-"<.	c #808384",
-"[.	c #B2B2B2",
-"}.	c #6B6B6B",
-"|.	c #2B2B2C",
-"1.	c #A0A0A0",
-"2.	c #797979",
-"3.	c #404042",
-"4.	c #ABABAB",
-"5.	c #BFBFBF",
-"6.	c #B7B7B7",
-"7.	c #282628",
-"8.	c #808284",
-"9.	c #191A1A",
-"0.	c #787878",
-"a.	c #727272",
-"b.	c #353637",
-"c.	c #191919",
-"d.	c #4B4B4D",
-"e.	c #191819",
-"f.	c #8B8B8B",
-"g.	c #333233",
-"h.	c #BDBDBD",
-"i.	c #141415",
-"j.	c #7F8183",
-"k.	c #282929",
-"l.	c #595A5C",
-"m.	c #47484A",
-"n.	c #515054",
-"o.	c #454446",
-"p.	c #282728",
-"q.	c #4E4C4F",
-"r.	c #9D9D9D",
-"s.	c #141314",
-"t.	c #7F8082",
-"u.	c #8F8F8F",
-"v.	c #1C1C1D",
-"w.	c #242425",
-"x.	c #979797",
-"y.	c #242324",
-"z.	c #272627",
-"A.	c #78797A",
-"B.	c #6C6C6C",
-"C.	c #868686",
-"D.	c #141214",
-"E.	c #56585A",
-"F.	c #292929",
-"G.	c #525254",
-"H.	c #464547",
-"I.	c #292829",
-"J.	c #4F4D50",
-"K.	c #3E3C3E",
-"L.	c #252426",
-"M.	c #545154",
-"N.	c #5D595D",
-"O.	c #242424",
-"P.	c #4C494C",
-"Q.	c #111011",
-"R.	c #080909",
-"                                                ",
-"                                                ",
-"    . . . . . . . . . . . . . . . . . +         ",
-"  . @ # $ % & * = - ; > , ' ' ' ) ! * ~         ",
-"  . @ { ] ] ] ] ] ] ] ] ] ] ] ] ] ! ^ /         ",
-"  . @ { ( _ _ _ _ _ _ : < < [ [ ( } | 1         ",
-"  . @ { ] ] ] ] ] ] ] 2 ( ( 3 4 5 } 6 7         ",
-"  . @ 8 9 0 a b = c d e ' ' ' ' f g 6 7         ",
-"  . h i j j j j j j j j j j j j j j k l         ",
-"  . . . . . . . . . . . . . . . . . . .         ",
-"  . m n o p q r s s t t u v w x y z A 7         ",
-"  . B C D E F G H I J K L M N O P P Q R         ",
-"  . S T U V W T X Y Z T U `  ...+.X @.#.        ",
-"  . $.%.Y &.*.%.=.` -.%.;.&.-.>.| - T #.        ",
-"  . ,.'.Z %.).!.T %.~.{.T %.].^./.(._.:.        ",
-"  . <.T [.}.|.T 1.2.3.T 4.Y @...5.6.7.:.        ",
-"  . 8.9.0.a.b.c.2.Y d.e.f.Y g...h.} 7.i.        ",
-"  . j.).W k.l.m.Z  .n.o.-.p.q...9 r.7.s.        ",
-"  . t.T u.a.v.T u.a.w.T x.) y...0 } z.s.        ",
-"  . A.%.2.&.v.%.) B. at .%.C.' p.g.0 } z.D.        ",
-"  . E.~.Z F.G.H.I. at .J.K.z.L.M.N.O.O.P.Q.        ",
-"    . . . . . . . . . . . . . . . . . R.        ",
-"                                                ",
-"                                                "};

Deleted: branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/glade/main/gnome-calculator_small.xpm
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/glade/main/gnome-calculator_small.xpm	2009-07-23 18:18:50 UTC (rev 5134)
+++ branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/glade/main/gnome-calculator_small.xpm	2009-07-23 18:18:52 UTC (rev 5135)
@@ -1,113 +0,0 @@
-/* XPM */
-static const char * gnome_calculator_small_xpm[] = {
-"16 16 94 2",
-"  	c None",
-". 	c #000000",
-"+ 	c #D6D6D6",
-"@ 	c #CDCDCD",
-"# 	c #B9B9B9",
-"$ 	c #AFAFAF",
-"% 	c #9B9B9B",
-"& 	c #929292",
-"* 	c #7E7E7E",
-"= 	c #757575",
-"- 	c #747474",
-"; 	c #939393",
-"> 	c #A5A5A5",
-", 	c #CCCCCC",
-"' 	c #576457",
-") 	c #535F53",
-"! 	c #4E5A4E",
-"~ 	c #4B564B",
-"{ 	c #949494",
-"] 	c #A7A7A7",
-"^ 	c #394339",
-"/ 	c #384038",
-"( 	c #343C34",
-"_ 	c #363E36",
-": 	c #323932",
-"< 	c #A8A8A8",
-"[ 	c #40403F",
-"} 	c #3E3E3C",
-"| 	c #484846",
-"1 	c #4B4B4A",
-"2 	c #848889",
-"3 	c #454849",
-"4 	c #1F2021",
-"5 	c #5A5E5F",
-"6 	c #1E1F1F",
-"7 	c #1D1E1F",
-"8 	c #404142",
-"9 	c #1D1D1E",
-"0 	c #545456",
-"a 	c #3D3D3E",
-"b 	c #1B1B1C",
-"c 	c #575659",
-"d 	c #838788",
-"e 	c #282828",
-"f 	c #808080",
-"g 	c #2A2B2C",
-"h 	c #A9A9A9",
-"i 	c #7B7B7B",
-"j 	c #A3A3A3",
-"k 	c #272728",
-"l 	c #373737",
-"m 	c #282829",
-"n 	c #818485",
-"o 	c #323233",
-"p 	c #212121",
-"q 	c #4A4B4D",
-"r 	c #303031",
-"s 	c #4A494B",
-"t 	c #3A393B",
-"u 	c #19191A",
-"v 	c #535154",
-"w 	c #808384",
-"x 	c #6B6B6B",
-"y 	c #2B2B2C",
-"z 	c #A0A0A0",
-"A 	c #797979",
-"B 	c #ABABAB",
-"C 	c #B7B7B7",
-"D 	c #282628",
-"E 	c #7F8183",
-"F 	c #282929",
-"G 	c #595A5C",
-"H 	c #2A2A2A",
-"I 	c #454446",
-"J 	c #29292A",
-"K 	c #4E4C4F",
-"L 	c #9D9D9D",
-"M 	c #7F8082",
-"N 	c #727272",
-"O 	c #1C1C1D",
-"P 	c #8F8F8F",
-"Q 	c #979797",
-"R 	c #242324",
-"S 	c #272627",
-"T 	c #56585A",
-"U 	c #48484A",
-"V 	c #292929",
-"W 	c #525254",
-"X 	c #292829",
-"Y 	c #3E3C3E",
-"Z 	c #545154",
-"` 	c #5D595D",
-" .	c #242424",
-"..	c #4C494C",
-"                                ",
-"  . . . . . . . . . . . .       ",
-"  + @ # $ % & * = - - ; >       ",
-"  + , ' ' ' ' ) ! ~ ~ { ]       ",
-"  + , ^ ^ ^ ^ / ( _ : { <       ",
-"  [ } | | | | | | | | | 1       ",
-"  . . . . . . . . . . . .       ",
-"  2 3 4 5 6 7 8 9 0 a b c       ",
-"  d e f g h i e j k l h m       ",
-"  n o p q e p r e s t u v       ",
-"  w e x y z A e B m l C D       ",
-"  E q F G H k I J K l L D       ",
-"  M e N O P N e Q R l { S       ",
-"  T U V W X m Y S Z `  ...      ",
-"  . . . . . . . . . . . .       ",
-"                                "};

Modified: branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/glade/main/gtk2_build.glade
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/glade/main/gtk2_build.glade	2009-07-23 18:18:50 UTC (rev 5134)
+++ branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/glade/main/gtk2_build.glade	2009-07-23 18:18:52 UTC (rev 5135)
@@ -1440,7 +1440,7 @@
                         <child>
                           <widget class="GtkImage" id="image591">
                             <property name="visible">True</property>
-                            <property name="pixbuf">play.xpm</property>
+                            <property name="pixbuf">play.png</property>
                           </widget>
                         </child>
                       </widget>
@@ -1461,7 +1461,7 @@
                         <child>
                           <widget class="GtkImage" id="image5056">
                             <property name="visible">True</property>
-                            <property name="pixbuf">stop.xpm</property>
+                            <property name="pixbuf">stop.png</property>
                           </widget>
                         </child>
                       </widget>
@@ -1483,7 +1483,7 @@
                         <child>
                           <widget class="GtkImage" id="image593">
                             <property name="visible">True</property>
-                            <property name="pixbuf">backward.xpm</property>
+                            <property name="pixbuf">previous-frame.png</property>
                           </widget>
                         </child>
                       </widget>
@@ -1505,7 +1505,7 @@
                         <child>
                           <widget class="GtkImage" id="image594">
                             <property name="visible">True</property>
-                            <property name="pixbuf">forward.xpm</property>
+                            <property name="pixbuf">next-frame.png</property>
                           </widget>
                         </child>
                       </widget>
@@ -1527,7 +1527,7 @@
                         <child>
                           <widget class="GtkImage" id="image595">
                             <property name="visible">True</property>
-                            <property name="pixbuf">Kbackward.xpm</property>
+                            <property name="pixbuf">previous-key-frame.png</property>
                           </widget>
                         </child>
                       </widget>
@@ -1549,7 +1549,7 @@
                         <child>
                           <widget class="GtkImage" id="image596">
                             <property name="visible">True</property>
-                            <property name="pixbuf">Kforward.xpm</property>
+                            <property name="pixbuf">next-key-frame.png</property>
                           </widget>
                         </child>
                       </widget>
@@ -1570,7 +1570,7 @@
                         <child>
                           <widget class="GtkImage" id="image2306">
                             <property name="visible">True</property>
-                            <property name="pixbuf">markA.xpm</property>
+                            <property name="pixbuf">markA.png</property>
                           </widget>
                         </child>
                       </widget>
@@ -1591,7 +1591,7 @@
                         <child>
                           <widget class="GtkImage" id="image2307">
                             <property name="visible">True</property>
-                            <property name="pixbuf">markB.xpm</property>
+                            <property name="pixbuf">markB.png</property>
                           </widget>
                         </child>
                       </widget>
@@ -1612,7 +1612,7 @@
                         <child>
                           <widget class="GtkImage" id="image2308">
                             <property name="visible">True</property>
-                            <property name="pixbuf">xpm_prevblack.xpm</property>
+                            <property name="pixbuf">previous-black-frame.png</property>
                           </widget>
                         </child>
                       </widget>
@@ -1633,7 +1633,7 @@
                         <child>
                           <widget class="GtkImage" id="image2309">
                             <property name="visible">True</property>
-                            <property name="pixbuf">xpm_nextblack.xpm</property>
+                            <property name="pixbuf">next-black-frame.png</property>
                           </widget>
                         </child>
                       </widget>
@@ -1654,7 +1654,7 @@
                         <child>
                           <widget class="GtkImage" id="image5057">
                             <property name="visible">True</property>
-                            <property name="pixbuf">begin.xpm</property>
+                            <property name="pixbuf">first-frame.png</property>
                           </widget>
                         </child>
                       </widget>
@@ -1675,7 +1675,7 @@
                         <child>
                           <widget class="GtkImage" id="image2245">
                             <property name="visible">True</property>
-                            <property name="pixbuf">end.xpm</property>
+                            <property name="pixbuf">last-frame.png</property>
                           </widget>
                         </child>
                       </widget>

Deleted: branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/glade/main/markA.xpm
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/glade/main/markA.xpm	2009-07-23 18:18:50 UTC (rev 5134)
+++ branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/glade/main/markA.xpm	2009-07-23 18:18:52 UTC (rev 5135)
@@ -1,34 +0,0 @@
-/* XPM */
-static const char * xpm_markA[] = {
-"32 20 11 1",
-" 	c None",
-".	c #000000",
-"+	c #050707",
-"@	c #AFD8D5",
-"#	c #1B2121",
-"$	c #3F4D4C",
-"%	c #6C8684",
-"&	c #98BCB9",
-"*	c #020303",
-"=	c #0F1212",
-"-	c #27302F",
-"                                ",
-"                  .             ",
-"                  .             ",
-"      ..          .             ",
-"     ...    . . . ...........   ",
-"     ...          +@@@@@@@@@@   ",
-"     . ..         #@@@@@@@@@@   ",
-"    .. ..        .$@@@@@@@@@@   ",
-"    .   .        .%@@@@@@@@@@   ",
-"    .   ..       .&@@@@@@@@@@   ",
-"   .......       *@@@@@@@@@@@   ",
-"   .     .       =@@@@@@@@@@@   ",
-"   .     ..      -@@@@@@@@@@@   ",
-"  ..     .. . . .............   ",
-"                .      .        ",
-"                .      ..       ",
-"                ..........      ",
-"                .      ..       ",
-"                       .        ",
-"                                "};

Deleted: branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/glade/main/markB.xpm
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/glade/main/markB.xpm	2009-07-23 18:18:50 UTC (rev 5134)
+++ branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/glade/main/markB.xpm	2009-07-23 18:18:52 UTC (rev 5135)
@@ -1,37 +0,0 @@
-/* XPM */
-static const char * xpm_markB[] = {
-"32 20 14 1",
-" 	c None",
-".	c #000000",
-"+	c #AFD8D5",
-"@	c #526564",
-"#	c #010101",
-"$	c #2D3837",
-"%	c #1E2625",
-"&	c #0D100F",
-"*	c #98BCB9",
-"=	c #020202",
-"-	c #728C8A",
-";	c #050606",
-">	c #526664",
-",	c #040505",
-"                                ",
-"              .                 ",
-"              .                 ",
-"              .        .....    ",
-"  ............. . . .  .   ..   ",
-"  +++++++++++@#        .    .   ",
-"  +++++++++++$.        .    .   ",
-"  +++++++++++%         .   ..   ",
-"  +++++++++++&         .....    ",
-"  +++++++++++#         .   ..   ",
-"  ++++++++++*=         .    ..  ",
-"  ++++++++++-;         .     .  ",
-"  ++++++++++>,         .    ..  ",
-"  ........... . . . .  ......   ",
-"        .   .                   ",
-"        ..  .                   ",
-"  ......... .                   ",
-"        ..  .                   ",
-"        .                       ",
-"                                "};

Deleted: branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/glade/main/play.xpm
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/glade/main/play.xpm	2009-07-23 18:18:50 UTC (rev 5134)
+++ branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/glade/main/play.xpm	2009-07-23 18:18:52 UTC (rev 5135)
@@ -1,76 +0,0 @@
-/* XPM */
-static const char * xpm_play[] = {
-"32 20 53 1",
-" 	c None",
-".	c #000000",
-"+	c #FFFFFF",
-"@	c #737372",
-"#	c #848483",
-"$	c #888887",
-"%	c #7E7E7D",
-"&	c #A8A7A6",
-"*	c #A4A4A3",
-"=	c #727170",
-"-	c #A6A5A4",
-";	c #B5B4B3",
-">	c #7B7B7A",
-",	c #6C6B6A",
-"'	c #858483",
-")	c #AAA9A7",
-"!	c #C0BFBE",
-"~	c #7F7E7D",
-"{	c #999996",
-"]	c #7D7C7B",
-"^	c #91908E",
-"/	c #AFAEAC",
-"(	c #CACAC8",
-"_	c #828180",
-":	c #9D9C9A",
-"<	c #B0AFAC",
-"[	c #908F8D",
-"}	c #8C8B89",
-"|	c #A9A8A5",
-"1	c #BDBCB9",
-"2	c #C5C3C0",
-"3	c #D0CECC",
-"4	c #A6A5A2",
-"5	c #BBBAB7",
-"6	c #D4D3D2",
-"7	c #8F8E8C",
-"8	c #B5B3B1",
-"9	c #C7C6C3",
-"0	c #D2D1CE",
-"a	c #B9B6B4",
-"b	c #D8D7D5",
-"c	c #AEADA9",
-"d	c #BFBDBA",
-"e	c #D7D5D3",
-"f	c #A19F9D",
-"g	c #C7C6C4",
-"h	c #B2B0AD",
-"i	c #C3C1BE",
-"j	c #D9D8D6",
-"k	c #A7A6A3",
-"l	c #B5B3B0",
-"m	c #D1CFCC",
-"n	c #DEDDDB",
-"                                ",
-"                                ",
-"                                ",
-"        ........+ .             ",
-"        .@#$$$$.+ ..            ",
-"        .%&****.+ .=.           ",
-"        .%-;;;;.+ .>,.          ",
-"        .')!!!!.+ .~{].         ",
-"        .^/((((.+ ._:<[.        ",
-"        .^/((((.+ .}|123.+      ",
-"        .456666.+ .7890.+       ",
-"        .456666.+ .:ab.+        ",
-"        .cdeeee.+ .fg.+         ",
-"        .hijjjj.+ .k.+          ",
-"        .lmnnnn.+ ..+           ",
-"        ........+ .+            ",
-"        +++++++++ +             ",
-"                                ",
-"                                ",
-"                                "};

Deleted: branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/glade/main/stop.xpm
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/glade/main/stop.xpm	2009-07-23 18:18:50 UTC (rev 5134)
+++ branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/glade/main/stop.xpm	2009-07-23 18:18:52 UTC (rev 5135)
@@ -1,53 +0,0 @@
-/* XPM */
-static const char * xpm_stop[] = {
-"32 20 30 1",
-" 	c None",
-".	c #000000",
-"+	c #D9D9D9",
-"@	c #737372",
-"#	c #848483",
-"$	c #888887",
-"%	c #FFFFFF",
-"&	c #7E7E7D",
-"*	c #A8A7A6",
-"=	c #A4A4A3",
-"-	c #A6A5A4",
-";	c #B5B4B3",
-">	c #858483",
-",	c #AAA9A7",
-"'	c #C0BFBE",
-")	c #91908E",
-"!	c #AFAEAC",
-"~	c #CACAC8",
-"{	c #A6A5A2",
-"]	c #BBBAB7",
-"^	c #D4D3D2",
-"/	c #AEADA9",
-"(	c #BFBDBA",
-"_	c #D7D5D3",
-":	c #B2B0AD",
-"<	c #C3C1BE",
-"[	c #D9D8D6",
-"}	c #B5B3B0",
-"|	c #D1CFCC",
-"1	c #DEDDDB",
-"                                ",
-"                                ",
-"                                ",
-"         .............+         ",
-"         .@#$$$$$$$$$.%         ",
-"         .&*=========.%         ",
-"         .&-;;;;;;;;;.%         ",
-"         .>,'''''''''.%         ",
-"         .)!~~~~~~~~~.%         ",
-"         .)!~~~~~~~~~.%         ",
-"         .{]^^^^^^^^^.%         ",
-"         .{]^^^^^^^^^.%         ",
-"         ./(_________.%         ",
-"         .:<[[[[[[[[[.%         ",
-"         .}|111111111.%         ",
-"         .............%         ",
-"         %%%%%%%%%%%%%%         ",
-"                                ",
-"                                ",
-"                                "};

Deleted: branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/glade/main/systray.xpm
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/glade/main/systray.xpm	2009-07-23 18:18:50 UTC (rev 5134)
+++ branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/glade/main/systray.xpm	2009-07-23 18:18:52 UTC (rev 5135)
@@ -1,314 +0,0 @@
-/* XPM */
-static const char * systray_xpm[] = {
-"22 23 288 2",
-"  	c None",
-". 	c #DDD4DC",
-"+ 	c #9F9D9F",
-"@ 	c #9B9A9B",
-"# 	c #9B9A9A",
-"$ 	c #ABA6A8",
-"% 	c #F2D8DF",
-"& 	c #C57986",
-"* 	c #E5C9CB",
-"= 	c #ABA7A7",
-"- 	c #A2A1A2",
-"; 	c #A1A1A1",
-"> 	c #9F9F9F",
-", 	c #9D9C9D",
-"' 	c #939292",
-") 	c #7B7677",
-"! 	c #BFACB0",
-"~ 	c #C0ADB3",
-"{ 	c #868586",
-"] 	c #9B9B9B",
-"^ 	c #A4A4A4",
-"/ 	c #A6A6A6",
-"( 	c #949494",
-"_ 	c #898989",
-": 	c #8B8B8B",
-"< 	c #7C7B7B",
-"[ 	c #A09899",
-"} 	c #CDA9B0",
-"| 	c #D2BDC0",
-"1 	c #7C7C7C",
-"2 	c #919292",
-"3 	c #999999",
-"4 	c #A3A3A3",
-"5 	c #656565",
-"6 	c #6A6A6A",
-"7 	c #565656",
-"8 	c #575757",
-"9 	c #797979",
-"0 	c #646465",
-"a 	c #8D8486",
-"b 	c #6F6E6E",
-"c 	c #818181",
-"d 	c #E0E0E0",
-"e 	c #CCCCCC",
-"f 	c #787878",
-"g 	c #828282",
-"h 	c #7E7E7E",
-"i 	c #696969",
-"j 	c #333333",
-"k 	c #393939",
-"l 	c #4E4A49",
-"m 	c #5F5D5E",
-"n 	c #636363",
-"o 	c #FBFBFB",
-"p 	c #F3F3F3",
-"q 	c #D7D7D7",
-"r 	c #9D9D9D",
-"s 	c #878787",
-"t 	c #BCBCBC",
-"u 	c #A8A8A8",
-"v 	c #737373",
-"w 	c #3F3F3F",
-"x 	c #525252",
-"y 	c #3D3C3C",
-"z 	c #D4BBC4",
-"A 	c #656263",
-"B 	c #565757",
-"C 	c #FAFAFA",
-"D 	c #7D7D7D",
-"E 	c #3E3E3E",
-"F 	c #B2B2B0",
-"G 	c #F7F7F7",
-"H 	c #CDCDCD",
-"I 	c #626262",
-"J 	c #4A4A4A",
-"K 	c #2B2B2B",
-"L 	c #1B1B1B",
-"M 	c #8A8288",
-"N 	c #C3B7B8",
-"O 	c #303030",
-"P 	c #353535",
-"Q 	c #6F6F6F",
-"R 	c #F9F9F9",
-"S 	c #C5C5C5",
-"T 	c #7E7E7D",
-"U 	c #C0C0B1",
-"V 	c #B7B8B1",
-"W 	c #757575",
-"X 	c #BBBBBB",
-"Y 	c #B8B8B8",
-"Z 	c #3C3C3C",
-"` 	c #232323",
-" .	c #141414",
-"..	c #3B3B3B",
-"+.	c #C7C3C3",
-"@.	c #1F1F1F",
-"#.	c #282828",
-"$.	c #8F8F8F",
-"%.	c #CCCAA3",
-"&.	c #D8B92A",
-"*.	c #F1D895",
-"=.	c #E7E4E2",
-"-.	c #DCDCDC",
-";.	c #CECECE",
-">.	c #454545",
-",.	c #181818",
-"'.	c #0E0E0E",
-").	c #161616",
-"!.	c #BCBABA",
-"~.	c #8E8D8D",
-"{.	c #171717",
-"].	c #1E1E1E",
-"^.	c #595959",
-"/.	c #CFCFCF",
-"(.	c #EEEEEE",
-"_.	c #E5DC72",
-":.	c #FCCD00",
-"<.	c #EEA704",
-"[.	c #B4ADA6",
-"}.	c #CACACA",
-"|.	c #B0B0B0",
-"1.	c #535353",
-"2.	c #111111",
-"3.	c #090909",
-"4.	c #040404",
-"5.	c #1C1C1C",
-"6.	c #B5B3B4",
-"7.	c #C7BAC6",
-"8.	c #131314",
-"9.	c #0F0F0F",
-"0.	c #2F2F2F",
-"a.	c #EAEAEA",
-"b.	c #FFFFFF",
-"c.	c #FFFFFE",
-"d.	c #F6EDAD",
-"e.	c #FDC302",
-"f.	c #B69032",
-"g.	c #D4D3D4",
-"h.	c #F6F6F6",
-"i.	c #F4F4F4",
-"j.	c #EFEFEF",
-"k.	c #D9D9D9",
-"l.	c #292929",
-"m.	c #080808",
-"n.	c #000000",
-"o.	c #C5C5C4",
-"p.	c #E2C5E0",
-"q.	c #433D42",
-"r.	c #030303",
-"s.	c #D5D5D5",
-"t.	c #FCFCFC",
-"u.	c #FEFEFE",
-"v.	c #FAF1D4",
-"w.	c #E6B01B",
-"x.	c #B4A991",
-"y.	c #F2F2F2",
-"z.	c #E8E8E8",
-"A.	c #E2E2E2",
-"B.	c #010101",
-"C.	c #373737",
-"D.	c #91808E",
-"E.	c #6F6C71",
-"F.	c #606060",
-"G.	c #707070",
-"H.	c #F8F4EA",
-"I.	c #CFBE98",
-"J.	c #DFE0DD",
-"K.	c #EBEBEB",
-"L.	c #E6E6E6",
-"M.	c #939393",
-"N.	c #2D2D2D",
-"O.	c #A09F9F",
-"P.	c #827D80",
-"Q.	c #D8AACD",
-"R.	c #EBE6E9",
-"S.	c #F5F5F5",
-"T.	c #F8F8F8",
-"U.	c #F7F7F6",
-"V.	c #EEEEEC",
-"W.	c #F0F0F0",
-"X.	c #ECECEC",
-"Y.	c #E4E4E4",
-"Z.	c #DEDEDE",
-"`.	c #464646",
-" +	c #BDBDBD",
-".+	c #D6CED1",
-"++	c #E5E4E4",
-"@+	c #EED4EB",
-"#+	c #E7E7E7",
-"$+	c #F1F1F1",
-"%+	c #EDEDED",
-"&+	c #E9E9E9",
-"*+	c #E5E5E5",
-"=+	c #DADADA",
-"-+	c #D4D4D4",
-";+	c #D3BFC4",
-">+	c #B5ABB0",
-",+	c #EBECEB",
-"'+	c #E1E1E1",
-")+	c #D1D1D1",
-"!+	c #AFAEAE",
-"~+	c #D6B4BC",
-"{+	c #E2DEDE",
-"]+	c #E3E3E3",
-"^+	c #D8D8D8",
-"/+	c #D3D3D3",
-"(+	c #C7C7C7",
-"_+	c #CAC2C3",
-":+	c #D0C2C4",
-"<+	c #E3E2E2",
-"[+	c #D2D3D3",
-"}+	c #CECFCE",
-"|+	c #BCBDBD",
-"1+	c #B6B8B7",
-"2+	c #BCA0A4",
-"3+	c #E8E5E3",
-"4+	c #EEBD84",
-"5+	c #EDC178",
-"6+	c #E4C18B",
-"7+	c #E0DFE2",
-"8+	c #DDDDDD",
-"9+	c #DBD8D6",
-"0+	c #E4C08E",
-"a+	c #E9D591",
-"b+	c #E6D8B2",
-"c+	c #E2D4B1",
-"d+	c #D5B175",
-"e+	c #FDF0EB",
-"f+	c #DAB39C",
-"g+	c #FAC63C",
-"h+	c #FBD47C",
-"i+	c #FBE5B9",
-"j+	c #F7E6C0",
-"k+	c #F6DDA0",
-"l+	c #E4CC94",
-"m+	c #D5D3DD",
-"n+	c #D6D1CC",
-"o+	c #EACE89",
-"p+	c #FAE3AC",
-"q+	c #FBF0CA",
-"r+	c #FBEDB8",
-"s+	c #FADB7B",
-"t+	c #FCB019",
-"u+	c #FAA125",
-"v+	c #F1BF69",
-"w+	c #FDC902",
-"x+	c #FDD803",
-"y+	c #FCE320",
-"z+	c #FDE554",
-"A+	c #FDE16F",
-"B+	c #FDC13E",
-"C+	c #D6C9A1",
-"D+	c #E2BE76",
-"E+	c #FDD41C",
-"F+	c #FDE537",
-"G+	c #FCE622",
-"H+	c #FDDE0C",
-"I+	c #FECE01",
-"J+	c #FEB902",
-"K+	c #FDBD70",
-"L+	c #F4C395",
-"M+	c #FCD631",
-"N+	c #FBEA01",
-"O+	c #FDF101",
-"P+	c #FEEA00",
-"Q+	c #FCD800",
-"R+	c #F9BF0A",
-"S+	c #D5C5A1",
-"T+	c #EAC660",
-"U+	c #FDDB01",
-"V+	c #FEED00",
-"W+	c #FEF300",
-"X+	c #FBD800",
-"Y+	c #FCBF2D",
-"Z+	c #D8A5B7",
-"`+	c #E8C1AF",
-" @	c #FBDF7A",
-".@	c #FCEB3E",
-"+@	c #FDE423",
-"@@	c #FDDF40",
-"#@	c #F3CD8D",
-"$@	c #E2CDD0",
-"%@	c #EBD1BF",
-"&@	c #FBD757",
-"*@	c #FDDB0F",
-"=@	c #FBE00C",
-"-@	c #FDD837",
-";@	c #F6E5AF",
-"                . + @ # $ %                 ",
-"          & * = - ; > , ' ) !               ",
-"          ~ { ] ^ / / ( _ : < [ }           ",
-"        | 1 2 3 > 4 5 6 7 8 9 0 a           ",
-"        b c / d e f 5 g h i j 6 k l         ",
-"      m n : o p q r s t u v w x j y z       ",
-"      A B h C D E F x G H I 6 J K L M       ",
-"    N O P Q R S T U V 5 W X Y Z `  ...      ",
-"    +. at .#.E $.d %.&.*.=.-.;.>.#.,.'.).!.    ",
-"    ~.{.].^./.(._.:.<.[.q }.|.1.2.3.4.5.6.  ",
-"  7.8.9.0.a.b.c.d.e.f.g.h.i.j.k.l.m.n.4.1.o.",
-"p.q.r.L s.t.u.u.v.w.x.h.h.y.(.z.A.{.n.B.C.3 ",
-"D.E.F.G.p R o o H.I.J.h.p j.K.L.d M.n.O N.O.",
-"P.Q.R.;.p S.G T.U.V.y.p W.X.z.Y.Z.e `. +.+++",
-"    @+#+j.$+p i.i.p $+W.%+&+*+d =+-+v ;+    ",
-"    >+,+K.%+(.j.j.(.%+K.z.Y.'+-.q )+!+~+    ",
-"      {+#+z.&+&+&+&+#+L.]+d -.^+/+(+_+      ",
-"      :+<+A.]+Y.*+]+A.d Z.=+q [+}+|+1+      ",
-"      2+3+4+5+6+7+8+8+=+9+0+a+b+c+d+e+      ",
-"      f+g+h+i+j+k+l+m+n+o+p+q+r+s+t+u+      ",
-"      v+w+x+y+z+A+B+C+D+E+F+G+H+I+J+K+      ",
-"      L+M+N+O+P+Q+R+S+T+U+V+W+P+X+Y+        ",
-"      Z+`+ @. at +@@@#@$@%@&@*@=@-@;@          "};

Deleted: branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/glade/main/systray2.xpm
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/glade/main/systray2.xpm	2009-07-23 18:18:50 UTC (rev 5134)
+++ branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/glade/main/systray2.xpm	2009-07-23 18:18:52 UTC (rev 5135)
@@ -1,314 +0,0 @@
-/* XPM */
-static const char * systray2_xpm[] = {
-"22 23 288 2",
-"  	c None",
-". 	c #F2D8DF",
-"+ 	c #ABA6A8",
-"@ 	c #9B9A9A",
-"# 	c #9B9A9B",
-"$ 	c #9F9D9F",
-"% 	c #DDD4DC",
-"& 	c #BFACB0",
-"* 	c #7B7677",
-"= 	c #939292",
-"- 	c #9D9C9D",
-"; 	c #9F9F9F",
-"> 	c #A1A1A1",
-", 	c #A2A1A2",
-"' 	c #ABA7A7",
-") 	c #E5C9CB",
-"! 	c #C57986",
-"~ 	c #CDA9B0",
-"{ 	c #A09899",
-"] 	c #7C7B7B",
-"^ 	c #8B8B8B",
-"/ 	c #898989",
-"( 	c #949494",
-"_ 	c #A6A6A6",
-": 	c #A4A4A4",
-"< 	c #9B9B9B",
-"[ 	c #868586",
-"} 	c #C0ADB3",
-"| 	c #8D8486",
-"1 	c #646465",
-"2 	c #797979",
-"3 	c #575757",
-"4 	c #565656",
-"5 	c #6A6A6A",
-"6 	c #656565",
-"7 	c #A3A3A3",
-"8 	c #999999",
-"9 	c #919292",
-"0 	c #7C7C7C",
-"a 	c #D2BDC0",
-"b 	c #4E4A49",
-"c 	c #393939",
-"d 	c #333333",
-"e 	c #696969",
-"f 	c #7E7E7E",
-"g 	c #828282",
-"h 	c #787878",
-"i 	c #CCCCCC",
-"j 	c #E0E0E0",
-"k 	c #818181",
-"l 	c #6F6E6E",
-"m 	c #D4BBC4",
-"n 	c #3D3C3C",
-"o 	c #525252",
-"p 	c #3F3F3F",
-"q 	c #737373",
-"r 	c #A8A8A8",
-"s 	c #BCBCBC",
-"t 	c #878787",
-"u 	c #9D9D9D",
-"v 	c #D7D7D7",
-"w 	c #F3F3F3",
-"x 	c #FBFBFB",
-"y 	c #636363",
-"z 	c #5F5D5E",
-"A 	c #8A8288",
-"B 	c #1B1B1B",
-"C 	c #2B2B2B",
-"D 	c #4A4A4A",
-"E 	c #626262",
-"F 	c #CDCDCD",
-"G 	c #F7F7F7",
-"H 	c #B2B2B0",
-"I 	c #3E3E3E",
-"J 	c #7D7D7D",
-"K 	c #FAFAFA",
-"L 	c #565757",
-"M 	c #656263",
-"N 	c #3B3B3B",
-"O 	c #141414",
-"P 	c #232323",
-"Q 	c #3C3C3C",
-"R 	c #B8B8B8",
-"S 	c #BBBBBB",
-"T 	c #757575",
-"U 	c #B7B8B1",
-"V 	c #C0C0B1",
-"W 	c #7E7E7D",
-"X 	c #C5C5C5",
-"Y 	c #F9F9F9",
-"Z 	c #6F6F6F",
-"` 	c #353535",
-" .	c #303030",
-"..	c #C3B7B8",
-"+.	c #BCBABA",
-"@.	c #161616",
-"#.	c #0E0E0E",
-"$.	c #181818",
-"%.	c #282828",
-"&.	c #454545",
-"*.	c #CECECE",
-"=.	c #DCDCDC",
-"-.	c #E7E4E2",
-";.	c #F1D895",
-">.	c #D8B92A",
-",.	c #CCCAA3",
-"'.	c #8F8F8F",
-").	c #1F1F1F",
-"!.	c #C7C3C3",
-"~.	c #B5B3B4",
-"{.	c #1C1C1C",
-"].	c #040404",
-"^.	c #090909",
-"/.	c #111111",
-"(.	c #535353",
-"_.	c #B0B0B0",
-":.	c #CACACA",
-"<.	c #B4ADA6",
-"[.	c #EEA704",
-"}.	c #FCCD00",
-"|.	c #E5DC72",
-"1.	c #EEEEEE",
-"2.	c #CFCFCF",
-"3.	c #595959",
-"4.	c #1E1E1E",
-"5.	c #171717",
-"6.	c #8E8D8D",
-"7.	c #C5C5C4",
-"8.	c #000000",
-"9.	c #080808",
-"0.	c #292929",
-"a.	c #D9D9D9",
-"b.	c #EFEFEF",
-"c.	c #F4F4F4",
-"d.	c #F6F6F6",
-"e.	c #D4D3D4",
-"f.	c #B69032",
-"g.	c #FDC302",
-"h.	c #F6EDAD",
-"i.	c #FFFFFE",
-"j.	c #FFFFFF",
-"k.	c #EAEAEA",
-"l.	c #2F2F2F",
-"m.	c #0F0F0F",
-"n.	c #131314",
-"o.	c #C7BAC6",
-"p.	c #373737",
-"q.	c #010101",
-"r.	c #E2E2E2",
-"s.	c #E8E8E8",
-"t.	c #F2F2F2",
-"u.	c #B4A991",
-"v.	c #E6B01B",
-"w.	c #FAF1D4",
-"x.	c #FEFEFE",
-"y.	c #FCFCFC",
-"z.	c #D5D5D5",
-"A.	c #030303",
-"B.	c #433D42",
-"C.	c #E2C5E0",
-"D.	c #A09F9F",
-"E.	c #2D2D2D",
-"F.	c #939393",
-"G.	c #E6E6E6",
-"H.	c #EBEBEB",
-"I.	c #DFE0DD",
-"J.	c #CFBE98",
-"K.	c #F8F4EA",
-"L.	c #707070",
-"M.	c #606060",
-"N.	c #6F6C71",
-"O.	c #91808E",
-"P.	c #E5E4E4",
-"Q.	c #D6CED1",
-"R.	c #BDBDBD",
-"S.	c #464646",
-"T.	c #DEDEDE",
-"U.	c #E4E4E4",
-"V.	c #ECECEC",
-"W.	c #F0F0F0",
-"X.	c #EEEEEC",
-"Y.	c #F7F7F6",
-"Z.	c #F8F8F8",
-"`.	c #F5F5F5",
-" +	c #EBE6E9",
-".+	c #D8AACD",
-"++	c #827D80",
-"@+	c #D3BFC4",
-"#+	c #D4D4D4",
-"$+	c #DADADA",
-"%+	c #E5E5E5",
-"&+	c #E9E9E9",
-"*+	c #EDEDED",
-"=+	c #F1F1F1",
-"-+	c #E7E7E7",
-";+	c #EED4EB",
-">+	c #D6B4BC",
-",+	c #AFAEAE",
-"'+	c #D1D1D1",
-")+	c #E1E1E1",
-"!+	c #EBECEB",
-"~+	c #B5ABB0",
-"{+	c #CAC2C3",
-"]+	c #C7C7C7",
-"^+	c #D3D3D3",
-"/+	c #D8D8D8",
-"(+	c #E3E3E3",
-"_+	c #E2DEDE",
-":+	c #B6B8B7",
-"<+	c #BCBDBD",
-"[+	c #CECFCE",
-"}+	c #D2D3D3",
-"|+	c #E3E2E2",
-"1+	c #D0C2C4",
-"2+	c #FDF0EB",
-"3+	c #D5B175",
-"4+	c #E2D4B1",
-"5+	c #E6D8B2",
-"6+	c #E9D591",
-"7+	c #E4C08E",
-"8+	c #DBD8D6",
-"9+	c #DDDDDD",
-"0+	c #E0DFE2",
-"a+	c #E4C18B",
-"b+	c #EDC178",
-"c+	c #EEBD84",
-"d+	c #E8E5E3",
-"e+	c #BCA0A4",
-"f+	c #FAA125",
-"g+	c #FCB019",
-"h+	c #FADB7B",
-"i+	c #FBEDB8",
-"j+	c #FBF0CA",
-"k+	c #FAE3AC",
-"l+	c #EACE89",
-"m+	c #D6D1CC",
-"n+	c #D5D3DD",
-"o+	c #E4CC94",
-"p+	c #F6DDA0",
-"q+	c #F7E6C0",
-"r+	c #FBE5B9",
-"s+	c #FBD47C",
-"t+	c #FAC63C",
-"u+	c #DAB39C",
-"v+	c #FDBD70",
-"w+	c #FEB902",
-"x+	c #FECE01",
-"y+	c #FDDE0C",
-"z+	c #FCE622",
-"A+	c #FDE537",
-"B+	c #FDD41C",
-"C+	c #E2BE76",
-"D+	c #D6C9A1",
-"E+	c #FDC13E",
-"F+	c #FDE16F",
-"G+	c #FDE554",
-"H+	c #FCE320",
-"I+	c #FDD803",
-"J+	c #FDC902",
-"K+	c #F1BF69",
-"L+	c #FCBF2D",
-"M+	c #FBD800",
-"N+	c #FEEA00",
-"O+	c #FEF300",
-"P+	c #FEED00",
-"Q+	c #FDDB01",
-"R+	c #EAC660",
-"S+	c #D5C5A1",
-"T+	c #F9BF0A",
-"U+	c #FCD800",
-"V+	c #FDF101",
-"W+	c #FBEA01",
-"X+	c #FCD631",
-"Y+	c #F4C395",
-"Z+	c #F6E5AF",
-"`+	c #FDD837",
-" @	c #FBE00C",
-".@	c #FDDB0F",
-"+@	c #FBD757",
-"@@	c #EBD1BF",
-"#@	c #E2CDD0",
-"$@	c #F3CD8D",
-"%@	c #FDDF40",
-"&@	c #FDE423",
-"*@	c #FCEB3E",
-"=@	c #FBDF7A",
-"-@	c #E8C1AF",
-";@	c #D8A5B7",
-"                . + @ # $ %                 ",
-"              & * = - ; > , ' ) !           ",
-"          ~ { ] ^ / ( _ _ : < [ }           ",
-"          | 1 2 3 4 5 6 7 ; 8 9 0 a         ",
-"        b c 5 d e f g 6 h i j _ k l         ",
-"      m n d o p q r s t u v w x ^ y z       ",
-"      A B C D 5 E F G o H I J K f L M       ",
-"      N O P Q R S T 6 U V W X Y Z `  ...    ",
-"    +. at .#.$.%.&.*.=.-.;.>.,.j '.I %.).!.    ",
-"  ~.{.].^./.(._.:.v <.[.}.|.1.2.3.4.5.6.    ",
-"7.(.].8.9.0.a.b.c.d.e.f.g.h.i.j.k.l.m.n.o.  ",
-"8 p.q.8.5.r.s.1.t.d.d.u.v.w.x.x.y.z.B A.B.C.",
-"D.E. .8.F.j G.H.b.w d.I.J.K.x x Y w L.M.N.O.",
-"P.Q.R.S.i T.U.s.V.W.w t.X.Y.Z.G `.w *. +.+++",
-"    @+q #+$+j %+&+*+W.=+w c.c.w =+b.-+;+    ",
-"    >+,+'+v =.)+U.s.H.*+1.b.b.1.*+H.!+~+    ",
-"      {+]+^+/+=.j (+G.-+&+&+&+&+s.-+_+      ",
-"      :+<+[+}+v $+T.j r.(+%+U.(+r.|+1+      ",
-"      2+3+4+5+6+7+8+$+9+9+0+a+b+c+d+e+      ",
-"      f+g+h+i+j+k+l+m+n+o+p+q+r+s+t+u+      ",
-"      v+w+x+y+z+A+B+C+D+E+F+G+H+I+J+K+      ",
-"        L+M+N+O+P+Q+R+S+T+U+N+V+W+X+Y+      ",
-"          Z+`+ @. at +@@@#@$@%@&@*@=@-@;@      "};

Deleted: branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/glade/main/xpm_nextblack.xpm
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/glade/main/xpm_nextblack.xpm	2009-07-23 18:18:50 UTC (rev 5134)
+++ branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/glade/main/xpm_nextblack.xpm	2009-07-23 18:18:52 UTC (rev 5135)
@@ -1,72 +0,0 @@
-/* XPM */
-static const char * xpm_nextblack[] = {
-"32 20 49 1",
-" 	c None",
-".	c #000000",
-"+	c #FFFFFF",
-"@	c #010101",
-"#	c #030303",
-"$	c #040404",
-"%	c #727170",
-"&	c #030302",
-"*	c #0E0D0D",
-"=	c #0C0C0C",
-"-	c #7B7B7A",
-";	c #6C6B6A",
-">	c #0D0C0C",
-",	c #151514",
-"'	c #7F7E7D",
-")	c #7D7C7B",
-"!	c #0F0E0D",
-"~	c #1E1D1C",
-"{	c #828180",
-"]	c #B0AFAC",
-"^	c #908F8D",
-"/	c #060605",
-"(	c #111110",
-"_	c #292926",
-":	c #8C8B89",
-"<	c #BDBCB9",
-"[	c #D0CECC",
-"}	c #CDCDCD",
-"|	c #8F8E8C",
-"1	c #C7C6C3",
-"2	c #D2D1CE",
-"3	c #9D9C9A",
-"4	c #D8D7D5",
-"5	c #0D0C0B",
-"6	c #1A1917",
-"7	c #363533",
-"8	c #A19F9D",
-"9	c #C7C6C4",
-"0	c #11100E",
-"a	c #1D1C19",
-"b	c #3B3835",
-"c	c #A7A6A3",
-"d	c #131210",
-"e	c #211F1C",
-"f	c #3E3C39",
-"g	c #151412",
-"h	c #322F2B",
-"i	c #474542",
-"j	c #F3F3F3",
-"                                ",
-"                                ",
-"                                ",
-"          .       .....+        ",
-"          ..      .@#$.+        ",
-"          .%.     .&*=.+        ",
-"          .-;.    .&>,.+        ",
-"           .').   .#!~.+        ",
-"           .{]^.  ./(_.+        ",
-"            .:<[.}./(_.+        ",
-"           .|12.+ ./(_.+        ",
-"           .34.+  .567.+        ",
-"          .89.+   .0ab.+        ",
-"          .c.+    .def.+        ",
-"          ..+     .ghi.+        ",
-"          .+      .....+        ",
-"          +       +++++j        ",
-"                                ",
-"                                ",
-"                                "};

Deleted: branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/glade/main/xpm_prevblack.xpm
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/glade/main/xpm_prevblack.xpm	2009-07-23 18:18:50 UTC (rev 5134)
+++ branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/glade/main/xpm_prevblack.xpm	2009-07-23 18:18:52 UTC (rev 5135)
@@ -1,71 +0,0 @@
-/* XPM */
-static const char * xpm_prevblack[] = {
-"32 20 48 1",
-" 	c None",
-".	c #000000",
-"+	c #FFFFFF",
-"@	c #D9D9D9",
-"#	c #010101",
-"$	c #020202",
-"%	c #090909",
-"&	c #080808",
-"*	c #696867",
-"=	c #090808",
-"-	c #0F0E0E",
-";	c #5B5A59",
-">	c #9C9C9A",
-",	c #0A0A09",
-"'	c #161514",
-")	c #636261",
-"!	c #C5C4C3",
-"~	c #040303",
-"{	c #0C0C0B",
-"]	c #1E1E1C",
-"^	c #6F6E6C",
-"/	c #959491",
-"(	c #D3D3D1",
-"_	c #E4E4E4",
-":	c #A2A09F",
-"<	c #A6A4A2",
-"[	c #D4D3D2",
-"}	c #A3A2A0",
-"|	c #B7B6B3",
-"1	c #D4D4D3",
-"2	c #090807",
-"3	c #121210",
-"4	c #282726",
-"5	c #A8A7A5",
-"6	c #DFDFDD",
-"7	c #0C0B0A",
-"8	c #151412",
-"9	c #2C2A27",
-"0	c #C4C4C2",
-"a	c #DFDFDE",
-"b	c #0D0C0B",
-"c	c #181614",
-"d	c #2F2E2B",
-"e	c #D4D3D1",
-"f	c #0F0E0C",
-"g	c #252320",
-"h	c #363532",
-"i	c #F3F3F3",
-"                                ",
-"                                ",
-"                                ",
-"          .....+      .@        ",
-"          .#$$.+     ..+        ",
-"          .#%&.+    .*.+        ",
-"          .#=-.+   .;>.+        ",
-"          .$,'.+  .)!.+         ",
-"          .~{].+ .^/(.+         ",
-"          .~{]._.:<[.+          ",
-"          .~{].+ .}|1.+         ",
-"          .234.+  .56.+         ",
-"          .789.+  +.0a.+        ",
-"          .bcd.+   +.e.+        ",
-"          .fgh.+     ..+        ",
-"          .....+     +.+        ",
-"          +++++i                ",
-"                                ",
-"                                ",
-"                                "};



From gruntster at mail.berlios.de  Fri Jul 24 20:24:42 2009
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Fri, 24 Jul 2009 20:24:42 +0200
Subject: [Avidemux-svn-commit] r5136 -
	branches/avidemux_2.5_branch_gruntster/avidemux/ADM_plugin
Message-ID: <200907241824.n6OIOgiD029211@sheep.berlios.de>

Author: gruntster
Date: 2009-07-24 20:24:37 +0200 (Fri, 24 Jul 2009)
New Revision: 5136

Modified:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_plugin/ADM_vidEnc_plugin.h
Log:
[win32] fix linker error

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_plugin/ADM_vidEnc_plugin.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_plugin/ADM_vidEnc_plugin.h	2009-07-23 18:18:52 UTC (rev 5135)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_plugin/ADM_vidEnc_plugin.h	2009-07-24 18:24:37 UTC (rev 5136)
@@ -45,7 +45,7 @@
 
 #define ADM_CSP_YV12 1
 #define ADM_CSP_I422 2
-#include "ADM_default.h"
+
 #include "DIA_uiTypes.h"
 
 #define ADM_VIDENC_FLAG_GLOBAL_HEADER 1



From gruntster at mail.berlios.de  Fri Jul 24 20:32:59 2009
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Fri, 24 Jul 2009 20:32:59 +0200
Subject: [Avidemux-svn-commit] r5137 - in
	branches/avidemux_2.5_branch_gruntster/avidemux:
	ADM_UIs/ADM_CLI/src ADM_UIs/ADM_GTK/src ADM_UIs/ADM_QT4/src
	ADM_coreUI/include ADM_coreUI/src
Message-ID: <200907241832.n6OIWxMa030249@sheep.berlios.de>

Author: gruntster
Date: 2009-07-24 20:32:40 +0200 (Fri, 24 Jul 2009)
New Revision: 5137

Modified:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_CLI/src/FAC_toggle.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_GTK/src/DIA_filesel.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_GTK/src/FAC_bar.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_GTK/src/FAC_button.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_GTK/src/FAC_float.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_GTK/src/FAC_frame.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_GTK/src/FAC_hex.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_GTK/src/FAC_integer.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_GTK/src/FAC_matrix.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_GTK/src/FAC_notch.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_GTK/src/FAC_readOnlyText.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_GTK/src/FAC_slider.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_GTK/src/FAC_threadCount.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/FAC_aspectRatio.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/FAC_bar.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/FAC_float.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/FAC_frame.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/FAC_hex.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/FAC_integer.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/FAC_matrix.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/FAC_readOnlyText.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/T_bitrate.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/T_bitrate.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/T_button.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/T_configMenu.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/T_configMenu.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/T_filesel.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/T_notch.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/T_slider.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/T_threadCount.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/T_threadCount.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/include/DIA_factory.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/include/DIA_factoryStubs.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/src/DIA_factory.cpp
Log:
[dlgFactory] all dialogFactory controls must now support an updateMe method

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_CLI/src/FAC_toggle.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_CLI/src/FAC_toggle.cpp	2009-07-24 18:24:37 UTC (rev 5136)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_CLI/src/FAC_toggle.cpp	2009-07-24 18:32:40 UTC (rev 5137)
@@ -78,6 +78,7 @@
 }
 void diaElemInteger::enable(uint32_t onoff) {}
 int diaElemInteger::getRequiredLayout(void) { return 0; }
+void diaElemInteger::updateMe(void) {}
 
 //******************************************************
 diaElemUInteger::diaElemUInteger(uint32_t *intValue,const char *toggleTitle, uint32_t min, uint32_t max,const char *tip)
@@ -99,6 +100,7 @@
 }
 void diaElemUInteger::enable(uint32_t onoff) {}
 int diaElemUInteger::getRequiredLayout(void) { return 0; }
+void diaElemUInteger::updateMe(void) {}
 
 //******************************************************
 
@@ -122,6 +124,7 @@
 }
 void diaElemFloat::enable(uint32_t onoff) {}
 int diaElemFloat::getRequiredLayout(void) { return 0; }
+void diaElemFloat::updateMe(void) {}
 
 //******************************************************
 
@@ -144,6 +147,7 @@
 }
 
 int diaElemBar::getRequiredLayout(void) { return 0; }
+void diaElemBar::updateMe(void) {}
 
 //******************************************************
 
@@ -200,8 +204,10 @@
 {
  
 }
-void   diaElemFile::enable(uint32_t onoff)
-{}
+void   diaElemFile::enable(uint32_t onoff) {}
+int diaElemFile::getRequiredLayout(void) { return 0; }
+void diaElemFile::updateMe(void) {}
+
 #include "ADM_encoder/ADM_vidEncode.hxx"
   diaElemBitrate::diaElemBitrate(COMPRES_PARAMS *p,const char *toggleTitle,const char *tip)
   : diaElemBitrateBase()
@@ -209,8 +215,6 @@
   
 }
 
-int diaElemFile::getRequiredLayout(void) { return 0; }
-
 diaElemBitrate::~diaElemBitrate()
 {
   
@@ -241,6 +245,7 @@
 void diaElemBitrate::setMaxQz(uint32_t qz)
 {
 }
+void diaElemBitrate::updateMe(void) {}
 //******************************************************
 diaElemReadOnlyText::diaElemReadOnlyText(const char *readyOnly,const char *toggleTitle,const char *tip)
   : diaElem(ELEM_ROTEXT)
@@ -262,6 +267,7 @@
 }
 
 int diaElemReadOnlyText::getRequiredLayout(void) { return 0; }
+void diaElemReadOnlyText::updateMe(void) {}
 
 //******************************************************
 diaElemNotch::diaElemNotch(uint32_t yes,const char *toggleTitle, const char *tip)
@@ -281,6 +287,7 @@
  void diaElemNotch::getMe(void) {};
 
 int diaElemNotch::getRequiredLayout(void) { return 0; }
+void diaElemNotch::updateMe(void) {}
 
 //******************************************************
 diaElemDirSelect::diaElemDirSelect(char **filename,const char *toggleTitle,const char *tip)  : diaElemDirSelectBase() {}
@@ -291,6 +298,7 @@
 void diaElemDirSelect::changeFile(void) {}
 void   diaElemDirSelect::enable(uint32_t onoff){}
 int diaElemDirSelect::getRequiredLayout(void) { return 0; }
+void diaElemDirSelect::updateMe(void) {}
 //******************************************************
 diaElemText::diaElemText(char **text,const char *toggleTitle,const char *tip)
     : diaElem(ELEM_NOTCH) {}
@@ -299,6 +307,7 @@
 void diaElemText::getMe(void) {}  
 void diaElemText::enable(uint32_t onoff) {};
 int diaElemText::getRequiredLayout(void) { return 0; }
+void diaElemText::updateMe(void) {}
 //******************************************************
 diaElemMenuDynamic::diaElemMenuDynamic(uint32_t *intValue,const char *itle, uint32_t nb, 
                 diaMenuEntryDynamic **menu,const char *tip)
@@ -361,6 +370,7 @@
 }
 
 int diaElemFrame::getRequiredLayout(void) { return 0; }
+void diaElemFrame::updateMe(void) {}
 //**************************
 
   
@@ -370,6 +380,7 @@
   void diaElemHex::getMe(void) {} ;
   void diaElemHex::finalize(void) {};
   int diaElemHex::getRequiredLayout(void) { return 0; }
+  void diaElemHex::updateMe(void) {}
 //**************************
 diaElemToggleUint::diaElemToggleUint(uint32_t *toggleValue,const char *toggleTitle, uint32_t *uintval, const char *name,uint32_t min,uint32_t max,const char *tip)
   : diaElem(ELEM_TOGGLE_UINT)
@@ -433,6 +444,7 @@
 void   diaElemToggleInt::enable(uint32_t onoff)
 {
 }
+void diaElemToggleInt::updateMe(void) {}
 //*********************************************************
 diaElemButton:: diaElemButton(const char *toggleTitle, ADM_FAC_CALLBACK *cb,void *cookie,const char *tip)
   : diaElem(ELEM_BUTTON)
@@ -458,6 +470,7 @@
 }
 
 int diaElemButton::getRequiredLayout(void) { return 0; }
+void diaElemButton::updateMe(void) {}
 
 //***
 #if 0
@@ -518,13 +531,14 @@
  }
 
 int diaElemMatrix::getRequiredLayout(void) { return 0; }
+void diaElemMatrix::updateMe(void) {}
 
-
 //***
 diaElemThreadCount::diaElemThreadCount(uint32_t *value, const char *title, const char *tip) : diaElem(ELEM_THREAD_COUNT) {}
 diaElemThreadCount::~diaElemThreadCount() {}
 void diaElemThreadCount::setMe(void *dialog, void *opaque, uint32_t line) {}
 void diaElemThreadCount::getMe(void) {}
 int diaElemThreadCount::getRequiredLayout(void) { return 0; }
+void diaElemThreadCount::updateMe(void) {}
 
 //EOF

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_GTK/src/DIA_filesel.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_GTK/src/DIA_filesel.cpp	2009-07-24 18:24:37 UTC (rev 5136)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_GTK/src/DIA_filesel.cpp	2009-07-24 18:32:40 UTC (rev 5137)
@@ -34,6 +34,7 @@
   void   changeFile(void);
   void   enable(uint32_t onoff);
   int getRequiredLayout(void);
+  void updateMe(void);
 };
 class diaElemDirSelect : public diaElemDirSelectBase
 {
@@ -48,6 +49,7 @@
   void changeFile(void);
   void   enable(uint32_t onoff);
   int getRequiredLayout(void);
+  void updateMe(void);
 };
 static void fileRead(void *w,void *p);
 static void dirSel(void *w,void *p);
@@ -209,6 +211,7 @@
 }
 
 int diaElemFile::getRequiredLayout(void) { return 0; }
+void diaElemFile::updateMe(void) {}
 
 void fileRead(void *w,void *p)
 {
@@ -340,6 +343,7 @@
 }
 
 int diaElemDirSelect::getRequiredLayout(void) { return 0; }
+void diaElemDirSelect::updateMe(void) {}
 
 void dirSel(void *w,void *p)
 {

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_GTK/src/FAC_bar.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_GTK/src/FAC_bar.cpp	2009-07-24 18:24:37 UTC (rev 5136)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_GTK/src/FAC_bar.cpp	2009-07-24 18:32:40 UTC (rev 5137)
@@ -28,6 +28,7 @@
   void setMe(void *dialog, void *opaque,uint32_t line);
   void getMe(void);
   int getRequiredLayout(void);
+  void updateMe(void);
 };
 
 diaElemBar::diaElemBar(uint32_t percent,const char *toggleTitle)
@@ -76,6 +77,7 @@
 }
 
 int diaElemBar::getRequiredLayout(void) { return 0; }
+void diaElemBar::updateMe(void) {}
 } // End of namespace
 //****************************Hoook*****************
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_GTK/src/FAC_button.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_GTK/src/FAC_button.cpp	2009-07-24 18:24:37 UTC (rev 5136)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_GTK/src/FAC_button.cpp	2009-07-24 18:32:40 UTC (rev 5137)
@@ -32,6 +32,7 @@
   void      getMe(void);
   void      enable(uint32_t onoff) ;
   int getRequiredLayout(void);
+  void updateMe(void);
 };
 
 
@@ -83,6 +84,8 @@
   button->_callBack(button->_cookie);
 }
 
+void diaElemButton::updateMe(void) {}
+
 } // End of namespace
 //****************************Hoook*****************
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_GTK/src/FAC_float.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_GTK/src/FAC_float.cpp	2009-07-24 18:24:37 UTC (rev 5136)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_GTK/src/FAC_float.cpp	2009-07-24 18:32:40 UTC (rev 5137)
@@ -34,6 +34,7 @@
   void getMe(void);
   void      enable(uint32_t onoff) ;
   int getRequiredLayout(void);
+  void updateMe(void);
 };
 
 diaElemFloat::diaElemFloat(ELEM_TYPE_FLOAT *intValue,const char *toggleTitle, 
@@ -104,6 +105,12 @@
 }
 
 int diaElemFloat::getRequiredLayout(void) { return 0; }
+
+void diaElemFloat::updateMe(void)
+{
+	gtk_spin_button_set_value(GTK_SPIN_BUTTON((GtkWidget*)myWidget), *(ELEM_TYPE_FLOAT*)param);
+}
+
 } // End of namespace
 //****************************Hoook*****************
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_GTK/src/FAC_frame.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_GTK/src/FAC_frame.cpp	2009-07-24 18:24:37 UTC (rev 5136)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_GTK/src/FAC_frame.cpp	2009-07-24 18:32:40 UTC (rev 5137)
@@ -30,6 +30,7 @@
   void enable(uint32_t onoff);
   void finalize(void);
   int getRequiredLayout(void);
+  void updateMe(void);
 };
 diaElemFrame::diaElemFrame(const char *toggleTitle, const char *tip)
   : diaElemFrameBase()
@@ -118,6 +119,7 @@
 }
 
 int diaElemFrame::getRequiredLayout(void) { return 0; }
+void diaElemFrame::updateMe(void) {}
 } // End of namespace
 //****************************Hoook*****************
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_GTK/src/FAC_hex.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_GTK/src/FAC_hex.cpp	2009-07-24 18:24:37 UTC (rev 5136)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_GTK/src/FAC_hex.cpp	2009-07-24 18:32:40 UTC (rev 5137)
@@ -30,6 +30,7 @@
   void getMe(void) ;
   void finalize(void);
   int getRequiredLayout(void);
+  void updateMe(void);
 };
 
 #define HEX_NB_LINE   8
@@ -44,7 +45,7 @@
     uint32_t  curOffset;
 }hexStruct;
 
-static void updateMe(hexStruct *s);
+static void update(hexStruct *s);
 static void prev(void *z,hexStruct *s);
 static void next(void *z,hexStruct *s);
 
@@ -174,21 +175,21 @@
   g_signal_connect(GTK_OBJECT(buttonN), "clicked",
                     GTK_SIGNAL_FUNC(next),  s);
 #endif
-  updateMe(s);
+  update(s);
 }
 void prev(void *z,hexStruct *s)
 {
   if(s->curOffset>=HEX_NB_COLUMN*4)
       s->curOffset-=HEX_NB_COLUMN*4;
-  updateMe(s);
+  update(s);
   
 }
 void next(void *z,hexStruct *s)
 {
       s->curOffset+=HEX_NB_COLUMN*4;
-  updateMe(s);
+  update(s);
 }
-void updateMe(hexStruct *s)
+void update(hexStruct *s)
 {
   uint8_t *tail=s->data+s->size;
   uint8_t *cur;
@@ -225,9 +226,10 @@
 void diaElemHex::finalize(void) 
 {
 
-};
+}
 
 int diaElemHex::getRequiredLayout(void) { return 0; }
+void diaElemHex::updateMe(void) {}
 
 } // End of namespace
 //****************************Hoook*****************

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_GTK/src/FAC_integer.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_GTK/src/FAC_integer.cpp	2009-07-24 18:24:37 UTC (rev 5136)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_GTK/src/FAC_integer.cpp	2009-07-24 18:32:40 UTC (rev 5137)
@@ -31,6 +31,7 @@
   void getMe(void);
   void      enable(uint32_t onoff) ;
   int getRequiredLayout(void);
+  void updateMe(void);
 };
 /* Same but unsigned */
 class diaElemUInteger : public diaElem
@@ -44,6 +45,7 @@
   void getMe(void);
   void      enable(uint32_t onoff) ;
   int getRequiredLayout(void);
+  void updateMe(void);
   
 };
 
@@ -118,6 +120,13 @@
 
 int diaElemInteger::getRequiredLayout(void) { return 0; }
 
+void diaElemInteger::updateMe(void)
+{
+	GtkWidget *widget = (GtkWidget*)myWidget;
+	int32_t val = *(int32_t*)param;
+
+	gtk_spin_button_set_value(GTK_SPIN_BUTTON(widget), val);
+}
 //**********************************************************************************
 
 diaElemUInteger::diaElemUInteger(uint32_t *intValue,const char *toggleTitle, uint32_t min, uint32_t max,const char *tip)
@@ -192,6 +201,14 @@
 
 int diaElemUInteger::getRequiredLayout(void) { return 0; }
 
+void diaElemUInteger::updateMe(void)
+{
+	GtkWidget *widget = (GtkWidget*)myWidget;
+	uint32_t val = *(uint32_t*)param;
+
+	gtk_spin_button_set_value(GTK_SPIN_BUTTON(widget), val);
+}
+
 //****************************************************
 } // End of namespace
 //****************************Hoook*****************

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_GTK/src/FAC_matrix.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_GTK/src/FAC_matrix.cpp	2009-07-24 18:24:37 UTC (rev 5136)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_GTK/src/FAC_matrix.cpp	2009-07-24 18:32:40 UTC (rev 5137)
@@ -29,6 +29,7 @@
   void      getMe(void);
   void      enable(uint32_t onoff) ;
   int getRequiredLayout(void);
+  void updateMe(void);
 };
 
 diaElemMatrix::diaElemMatrix(uint8_t *trix,const char *toggleTitle, uint32_t trixSize,const char *tip)
@@ -131,6 +132,8 @@
 }
 
 int diaElemMatrix::getRequiredLayout(void) { return 0; }
+void diaElemMatrix::updateMe(void) {}
+
 } // End of namespace
 //****************************Hoook*****************
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_GTK/src/FAC_notch.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_GTK/src/FAC_notch.cpp	2009-07-24 18:24:37 UTC (rev 5136)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_GTK/src/FAC_notch.cpp	2009-07-24 18:32:40 UTC (rev 5137)
@@ -30,6 +30,7 @@
   void setMe(void *dialog, void *opaque,uint32_t line);
   void getMe(void) {};
   int getRequiredLayout(void);
+  void updateMe(void);
 };
 
 
@@ -74,6 +75,7 @@
 }
 
 int diaElemNotch::getRequiredLayout(void) { return 0; }
+void diaElemNotch::updateMe(void) {}
 } // End of namespace
 //****************************Hoook*****************
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_GTK/src/FAC_readOnlyText.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_GTK/src/FAC_readOnlyText.cpp	2009-07-24 18:24:37 UTC (rev 5136)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_GTK/src/FAC_readOnlyText.cpp	2009-07-24 18:32:40 UTC (rev 5137)
@@ -28,6 +28,7 @@
   void setMe(void *dialog, void *opaque,uint32_t line);
   void getMe(void);
   int getRequiredLayout(void);
+  void updateMe(void);
 };
 
 class diaElemText : public diaElem
@@ -41,6 +42,7 @@
   void getMe(void);
   void enable(uint32_t onoff);
   int getRequiredLayout(void);
+  void updateMe(void);
 };
 
 
@@ -93,6 +95,7 @@
 }
 
 int diaElemReadOnlyText::getRequiredLayout(void) { return 0; }
+void diaElemReadOnlyText::updateMe(void) {}
 
 /***************************************************************/
 diaElemText::diaElemText(char **text,const char *toggleTitle,const char *tip)
@@ -154,6 +157,13 @@
 }
 
 int diaElemText::getRequiredLayout(void) { return 0; }
+
+void diaElemText::updateMe(void)
+{
+	char **input = (char **)param;
+
+	gtk_write_entry_string((GtkWidget*)myWidget, *input);
+}
 } // End of namespace
 //****************************Hoook*****************
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_GTK/src/FAC_slider.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_GTK/src/FAC_slider.cpp	2009-07-24 18:24:37 UTC (rev 5136)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_GTK/src/FAC_slider.cpp	2009-07-24 18:32:40 UTC (rev 5137)
@@ -33,7 +33,7 @@
   void      getMe(void);
   void      enable(uint32_t onoff) ;
   int getRequiredLayout(void);
-  
+  void updateMe(void);
 };
 class diaElemSlider : public diaElemSliderBase
 {
@@ -48,6 +48,7 @@
   void      getMe(void);
   void      enable(uint32_t onoff) ;
   int getRequiredLayout(void);
+  void updateMe(void);
 };
 
 //****************************************************
@@ -124,10 +125,10 @@
 void diaElemSlider::getMe(void)
 {
   GtkWidget *widget=(GtkWidget *)myWidget;
-  uint32_t *val=(uint32_t *)param;
+  int32_t *val=(int32_t *)param;
   ADM_assert(widget);
   GtkAdjustment *adj = gtk_range_get_adjustment (GTK_RANGE(widget));
-  *val = (uint32_t)GTK_ADJUSTMENT(adj)->value;
+  *val = (int32_t)GTK_ADJUSTMENT(adj)->value;
   if(*val<min) *val=min;
   if(*val>max) *val=max;
 }
@@ -140,6 +141,16 @@
 
 int diaElemSlider::getRequiredLayout(void) { return 0; }
 
+void diaElemSlider::updateMe(void)
+{
+	int32_t val = *(int32_t*)param;
+	GtkWidget *widget = (GtkWidget*)myWidget;
+	GtkAdjustment *adj = gtk_range_get_adjustment(GTK_RANGE(widget));
+
+	GTK_ADJUSTMENT(adj)->value = val;
+
+	gtk_range_set_adjustment(GTK_RANGE(widget), adj);
+}
 //********************** USLIDER***********
 
 
@@ -230,6 +241,17 @@
 
 int diaElemUSlider::getRequiredLayout(void) { return 0; }
 
+void diaElemUSlider::updateMe(void)
+{
+	uint32_t val = *(uint32_t*)param;
+	GtkWidget *widget = (GtkWidget*)myWidget;
+	GtkAdjustment *adj = gtk_range_get_adjustment(GTK_RANGE(widget));
+
+	GTK_ADJUSTMENT(adj)->value = val;
+
+	gtk_range_set_adjustment(GTK_RANGE(widget), adj);
+}
+
 //****************************************************
 } // End of namespace
 //****************************Hoook*****************

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_GTK/src/FAC_threadCount.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_GTK/src/FAC_threadCount.cpp	2009-07-24 18:24:37 UTC (rev 5136)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_GTK/src/FAC_threadCount.cpp	2009-07-24 18:32:40 UTC (rev 5137)
@@ -30,6 +30,7 @@
   void setMe(void *dialog, void *opaque, uint32_t line);
   void getMe(void);
   int getRequiredLayout(void);
+  void updateMe(void);
 };
 
 static void customToggled(void *widget, void *userData);
@@ -123,23 +124,29 @@
 
 	myWidget = (void *)w;
 
+	updateMe();
+}
+
+int diaElemThreadCount::getRequiredLayout(void) { return 0; }
+
+void diaElemThreadCount::updateMe(void)
+{
 	uint32_t val = *(uint32_t *)param;
+	GtkWidget **widgets = (GtkWidget**)myWidget;
 
-	gtk_widget_set_sensitive(GTK_WIDGET(spinbutton1), val > 1);
+	gtk_widget_set_sensitive(GTK_WIDGET(widgets[3]), val > 1);
 
 	if (val == 0)
-		gtk_toggle_button_set_active (GTK_TOGGLE_BUTTON (radiobutton2), TRUE);
+		gtk_toggle_button_set_active(GTK_TOGGLE_BUTTON(widgets[1]), TRUE);
 	else if (val == 1)
-		gtk_toggle_button_set_active (GTK_TOGGLE_BUTTON (radiobutton1), TRUE);
+		gtk_toggle_button_set_active(GTK_TOGGLE_BUTTON(widgets[0]), TRUE);
 	else
 	{
-		gtk_toggle_button_set_active (GTK_TOGGLE_BUTTON (radiobutton3), TRUE);
-		gtk_spin_button_set_value (GTK_SPIN_BUTTON(spinbutton1), val);
+		gtk_toggle_button_set_active (GTK_TOGGLE_BUTTON(widgets[2]), TRUE);
+		gtk_spin_button_set_value (GTK_SPIN_BUTTON(widgets[3]), val);
 	}
 }
 
-int diaElemThreadCount::getRequiredLayout(void) { return 0; }
-
 void customToggled(void *widget, void *userData)
 {
 	diaElemThreadCount *elem = (diaElemThreadCount*)userData;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/FAC_aspectRatio.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/FAC_aspectRatio.cpp	2009-07-24 18:24:37 UTC (rev 5136)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/FAC_aspectRatio.cpp	2009-07-24 18:32:40 UTC (rev 5137)
@@ -38,6 +38,7 @@
 	void getMe(void);
 	void enable(uint32_t onoff);
 	int getRequiredLayout(void);
+	void updateMe(void);
 };
 
 diaElemAspectRatio::diaElemAspectRatio(uint32_t *num, uint32_t *den, const char *title, const char *tip) : diaElem(ELEM_ASPECT_RATIO)
@@ -108,6 +109,12 @@
 }
 
 int diaElemAspectRatio::getRequiredLayout(void) { return FAC_QT_GRIDLAYOUT; }
+
+void diaElemAspectRatio::updateMe(void)
+{
+	((QSpinBox*)myWidget)->setValue(*(uint32_t*)param);
+	((QSpinBox*)this->denControl)->setValue(*(uint32_t*)den);
+}
 } // End of namespace
 //****************************Hoook*****************
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/FAC_bar.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/FAC_bar.cpp	2009-07-24 18:24:37 UTC (rev 5136)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/FAC_bar.cpp	2009-07-24 18:32:40 UTC (rev 5137)
@@ -37,6 +37,7 @@
   void setMe(void *dialog, void *opaque,uint32_t line);
   void getMe(void);
   int getRequiredLayout(void);
+  void updateMe(void);
 };
 
 //********************************************************************
@@ -73,6 +74,7 @@
 }
 
 int diaElemBar::getRequiredLayout(void) { return FAC_QT_GRIDLAYOUT; }
+void diaElemBar::updateMe(void) {};
 } // nameapsce
 
 diaElem  *qt4CreateBar(uint32_t percent,const char *toggleTitle)

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/FAC_float.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/FAC_float.cpp	2009-07-24 18:24:37 UTC (rev 5136)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/FAC_float.cpp	2009-07-24 18:32:40 UTC (rev 5137)
@@ -42,6 +42,7 @@
   void getMe(void);
   void      enable(uint32_t onoff) ;
   int getRequiredLayout(void);
+  void updateMe(void);
 };
 
 
@@ -108,6 +109,14 @@
 }
 
 int diaElemFloat::getRequiredLayout(void) { return FAC_QT_GRIDLAYOUT; }
+
+void diaElemFloat::updateMe(void)
+{
+	QDoubleSpinBox *box = (QDoubleSpinBox*)myWidget;
+
+	box->setValue(*(ELEM_TYPE_FLOAT*)param);
+}
+
 } // End of namespace
 //****************************Hoook*****************
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/FAC_frame.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/FAC_frame.cpp	2009-07-24 18:24:37 UTC (rev 5136)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/FAC_frame.cpp	2009-07-24 18:32:40 UTC (rev 5137)
@@ -40,6 +40,7 @@
   void enable(uint32_t onoff);
   void finalize(void);
   int getRequiredLayout(void);
+  void updateMe(void);
 };
 
 diaElemFrame::diaElemFrame(const char *toggleTitle, const char *tip)
@@ -127,6 +128,7 @@
 }
 
 int diaElemFrame::getRequiredLayout(void) { return FAC_QT_VBOXLAYOUT; }
+void diaElemFrame::updateMe(void) {};
 } // End of namespace
 //****************************Hoook*****************
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/FAC_hex.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/FAC_hex.cpp	2009-07-24 18:24:37 UTC (rev 5136)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/FAC_hex.cpp	2009-07-24 18:32:40 UTC (rev 5137)
@@ -33,6 +33,7 @@
   void getMe(void) ;
   void finalize(void);
   int getRequiredLayout(void);
+  void updateMe(void);
 };
 extern const char *shortkey(const char *);
   diaElemHex::diaElemHex(const char *toggleTitle, uint32_t dataSize,uint8_t *data) :diaElem(ELEM_HEXDUMP){};
@@ -41,6 +42,7 @@
   void diaElemHex::getMe(void) {} ;
   void diaElemHex::finalize(void) {};
   int diaElemHex::getRequiredLayout(void) { return FAC_QT_GRIDLAYOUT; }
+  void diaElemHex::updateMe(void) {}
 //******************************************************
 } // End of namespace
 //****************************Hoook*****************

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/FAC_integer.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/FAC_integer.cpp	2009-07-24 18:24:37 UTC (rev 5136)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/FAC_integer.cpp	2009-07-24 18:32:40 UTC (rev 5137)
@@ -38,6 +38,7 @@
   void getMe(void);
   void      enable(uint32_t onoff) ;
   int getRequiredLayout(void);
+  void updateMe(void);
 };
 /* Same but unsigned */
 class diaElemUInteger : public diaElem
@@ -51,6 +52,7 @@
   void getMe(void);
   void      enable(uint32_t onoff) ;
   int getRequiredLayout(void);
+  void updateMe(void);
 };
 
 //********************************************************************
@@ -114,6 +116,12 @@
 
 int diaElemInteger::getRequiredLayout(void) { return FAC_QT_GRIDLAYOUT; }
 
+void diaElemInteger::updateMe(void)
+{
+	QSpinBox *box = (QSpinBox*)myWidget;
+	box->setValue(*(int32_t *)param);
+}
+
 //******************************************************
 diaElemUInteger::diaElemUInteger(uint32_t *intValue,const char *toggleTitle, uint32_t min, uint32_t max,const char *tip)
   : diaElem(ELEM_TOGGLE)
@@ -177,6 +185,11 @@
 
 int diaElemUInteger::getRequiredLayout(void) { return FAC_QT_GRIDLAYOUT; }
 
+void diaElemUInteger::updateMe(void)
+{
+	QSpinBox *box = (QSpinBox*)myWidget;
+	box->setValue(*(uint32_t *)param);
+}
 //********************************************
 //****************************************************
 } // End of namespace

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/FAC_matrix.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/FAC_matrix.cpp	2009-07-24 18:24:37 UTC (rev 5136)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/FAC_matrix.cpp	2009-07-24 18:32:40 UTC (rev 5137)
@@ -38,6 +38,7 @@
   void      getMe(void);
   void      enable(uint32_t onoff) ;
   int getRequiredLayout(void);
+  void updateMe(void);
 };
 
 
@@ -122,6 +123,7 @@
 }
 
 int diaElemMatrix::getRequiredLayout(void) { return FAC_QT_GRIDLAYOUT; }
+void diaElemMatrix::updateMe(void) {}
 }
 //****************************Hoook*****************
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/FAC_readOnlyText.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/FAC_readOnlyText.cpp	2009-07-24 18:24:37 UTC (rev 5136)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/FAC_readOnlyText.cpp	2009-07-24 18:32:40 UTC (rev 5137)
@@ -37,6 +37,7 @@
   void setMe(void *dialog, void *opaque,uint32_t line);
   void getMe(void);
   int getRequiredLayout(void);
+  void updateMe(void);
 };
 
 class diaElemText : public diaElem
@@ -50,6 +51,7 @@
   void getMe(void);
   void enable(uint32_t onoff);
   int getRequiredLayout(void);
+  void updateMe(void);
 };
 
 //********************************************************************
@@ -88,7 +90,7 @@
 }
 
 int diaElemReadOnlyText::getRequiredLayout(void) { return FAC_QT_GRIDLAYOUT; }
-
+void diaElemReadOnlyText::updateMe(void) {};
 //*********************************
 
 diaElemText::diaElemText(char **text,const char *toggleTitle,const char *tip)
@@ -140,6 +142,14 @@
 }
 
 int diaElemText::getRequiredLayout(void) { return FAC_QT_GRIDLAYOUT; }
+
+void diaElemText::updateMe(void)
+{
+	char **c=(char **)param;
+	QLineEdit *lineEdit=(QLineEdit *)myWidget;
+
+	lineEdit->setText(*c);
+}
 } // End of namespace
 //****************************Hoook*****************
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/T_bitrate.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/T_bitrate.cpp	2009-07-24 18:24:37 UTC (rev 5136)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/T_bitrate.cpp	2009-07-24 18:32:40 UTC (rev 5137)
@@ -43,7 +43,7 @@
 	_minQ=minQ;
 	maxQ=mq;
 	int index=0,set=-1;
-#define add(x,z,y) if(compress->capabilities & ADM_ENC_CAP_##x) {combo->addItem(QString::fromUtf8(y));\
+#define add(x,z,y) if(compress->capabilities & ADM_ENC_CAP_##x) {combo->addItem(QString::fromUtf8(y), COMPRESS_##z);\
 	if(p->mode==COMPRESS_##z) set=index;\
 	index++;}
 
@@ -134,58 +134,72 @@
           ADM_assert(0);
   }
 }
-void ADM_Qbitrate::comboChanged(int i)
+
+void ADM_Qbitrate::updateMe()
 {
-  printf("Changed\n"); 
+	updateCombo(compress->mode);
+}
+
+void ADM_Qbitrate::updateCombo(COMPRESSION_MODE mode)
+{
 #define P(x) text2->setText(QString::fromUtf8(x))
 #define M(x,y) box->setMinimum  (x);box->setMaximum  (y);
 #define S(x)   box->setValue(x);
-  COMPRESSION_MODE mode=readPulldown(compress,i);
-    switch(mode)
-  {
-    case COMPRESS_CBR: //CBR
-          P(QT_TR_NOOP("Target bitrate (kb/s)"));
-          M(0,20000);
-          S(compress->bitrate);
-          break; 
-    case COMPRESS_CQ:// CQ
-          P(QT_TR_NOOP("Quantizer"));
-          M(_minQ,maxQ);
-          S(compress->qz);
-          break;
-    case COMPRESS_2PASS : // 2pass Filesize
-          P(QT_TR_NOOP("Target video size (MB)"));
-          M(1,8000);
-          S(compress->finalsize);
-          break;
-    case COMPRESS_2PASS_BITRATE : // 2pass Avg
-          P(QT_TR_NOOP("Average bitrate (kb/s)"));
-          M(0,20000);
-          S(compress->avg_bitrate);
-          break;
-    case COMPRESS_SAME : // Same Qz as input
-          P(QT_TR_NOOP("-"));
-          M(0,0);
-          break;
-    case COMPRESS_AQ : // AQ
-          P(QT_TR_NOOP("Quantizer"));
-          M(_minQ,maxQ);
-          S(compress->qz);
-          break;
-    default:ADM_assert(0);
-  }
+
+	for (int i = 0; i < combo->count(); i++)
+	{
+		if (combo->itemData(i).toInt() == mode)
+		{
+			if (combo->currentIndex() != i)
+				combo->setCurrentIndex(i);
+
+			break;
+		}
+	}
+
+	switch(mode)
+	{
+		case COMPRESS_CBR: //CBR
+			P(QT_TR_NOOP("Target bitrate (kb/s)"));
+			M(0,20000);
+			S(compress->bitrate);
+			break; 
+		case COMPRESS_CQ:// CQ
+			P(QT_TR_NOOP("Quantizer"));
+			M(_minQ,maxQ);
+			S(compress->qz);
+			break;
+		case COMPRESS_2PASS : // 2pass Filesize
+			P(QT_TR_NOOP("Target video size (MB)"));
+			M(1,8000);
+			S(compress->finalsize);
+			break;
+		case COMPRESS_2PASS_BITRATE : // 2pass Avg
+			P(QT_TR_NOOP("Average bitrate (kb/s)"));
+			M(0,20000);
+			S(compress->avg_bitrate);
+			break;
+		case COMPRESS_SAME : // Same Qz as input
+			P(QT_TR_NOOP("-"));
+			M(0,0);
+			break;
+		case COMPRESS_AQ : // AQ
+			P(QT_TR_NOOP("Quantizer"));
+			M(_minQ,maxQ);
+			S(compress->qz);
+			break;
+		default:
+			ADM_assert(0);
+	}
 }
-ADM_Qbitrate::~ADM_Qbitrate()
+
+void ADM_Qbitrate::comboChanged(int i)
 {
-#define DEL(x) if(x) {delete x;x=NULL;}
-#if 0 // Automatically deleted
-                 DEL(text1)
-                 DEL(text2)
-                 DEL(box) 
-                 DEL(combo) 
-#endif
-};
+	updateCombo(readPulldown(compress,i));
+}
 
+ADM_Qbitrate::~ADM_Qbitrate() {}
+
 //**********************************
 diaElemBitrate::diaElemBitrate(COMPRES_PARAMS *p,const char *toggleTitle,const char *tip)
   : diaElemBitrateBase()
@@ -227,6 +241,12 @@
 }
 
 int diaElemBitrate::getRequiredLayout(void) { return FAC_QT_GRIDLAYOUT; }
+
+void diaElemBitrate::updateMe(void)
+{
+	memcpy(&copy, param, sizeof(copy));
+	((ADM_Qbitrate*)myWidget)->updateMe();
+}
 } // End of namespace
 //****************************Hoook*****************
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/T_bitrate.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/T_bitrate.h	2009-07-24 18:24:37 UTC (rev 5136)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/T_bitrate.h	2009-07-24 18:32:40 UTC (rev 5137)
@@ -15,6 +15,9 @@
 	{
 		Q_OBJECT
 
+	private:
+		void updateCombo(COMPRESSION_MODE mode);
+
 	public slots:
 		void comboChanged(int i);
 
@@ -27,6 +30,7 @@
 		uint32_t        maxQ, _minQ;
 
 		ADM_Qbitrate(COMPRES_PARAMS *p, uint32_t minQ, uint32_t mq, QGridLayout *layout, int line);
+		void updateMe();
 		virtual ~ADM_Qbitrate();
 		void readBack(void);
 	};

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/T_button.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/T_button.cpp	2009-07-24 18:24:37 UTC (rev 5136)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/T_button.cpp	2009-07-24 18:32:40 UTC (rev 5137)
@@ -32,6 +32,7 @@
   void      getMe(void);
   void      enable(uint32_t onoff) ;
   int getRequiredLayout(void);
+  void updateMe(void);
 };
 
 ADM_Qbutton::ADM_Qbutton(QWidget *z,QGridLayout *layout,const char *blah,int line,ADM_FAC_CALLBACK *cb, void *cookie) : QWidget(z) 
@@ -89,7 +90,7 @@
 }
 
 int diaElemButton::getRequiredLayout(void) { return FAC_QT_GRIDLAYOUT; }
-
+void diaElemButton::updateMe(void) {}
 }; // End of namespace
 //****************************Hoook*****************
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/T_configMenu.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/T_configMenu.cpp	2009-07-24 18:24:37 UTC (rev 5136)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/T_configMenu.cpp	2009-07-24 18:32:40 UTC (rev 5137)
@@ -56,11 +56,11 @@
 		layout->addWidget(deleteButton, line, 4);
 		layout->addItem(spacer2, line, 5);
 
+		fillConfigurationComboBox();
+
 		QObject::connect(deleteButton, SIGNAL(clicked(bool)), this, SLOT(deleteClicked(bool)));
 		QObject::connect(saveAsButton, SIGNAL(clicked(bool)), this, SLOT(saveAsClicked(bool)));
 		QObject::connect(combobox, SIGNAL(currentIndexChanged(int)), this, SLOT(comboboxIndexChanged(int)));
-
-		fillConfigurationComboBox();
 	}
 
 	ADM_QconfigMenu::~ADM_QconfigMenu() 
@@ -69,6 +69,7 @@
 
 	void ADM_QconfigMenu::fillConfigurationComboBox(void)
 	{
+		bool origDisableGenericSlots = disableGenericSlots;
 		QMap<QString, int> configs;
 		QStringList filter("*.xml");
 		QStringList list = QDir(this->userConfigDir).entryList(filter, QDir::Files | QDir::Readable);
@@ -92,11 +93,14 @@
 			combobox->addItem(mapIterator.key(), mapIterator.value());
 			mapIterator++;
 		}
+
+		disableGenericSlots = origDisableGenericSlots;
 	}
 
 	bool ADM_QconfigMenu::selectConfiguration(QString *selectFile, ConfigMenuType configurationType)
 	{
 		bool success = false;
+		bool origDisableGenericSlots = disableGenericSlots;
 
 		if (configurationType == CONFIG_MENU_DEFAULT)
 		{
@@ -119,6 +123,8 @@
 				combobox->setCurrentIndex(1);
 		}
 
+		disableGenericSlots = origDisableGenericSlots;
+
 		return success;
 	}
 
@@ -168,32 +174,43 @@
 
 	void ADM_QconfigMenu::comboboxIndexChanged(int index)
 	{
+		bool origDisableGenericSlots = disableGenericSlots;
 		ConfigMenuType configType = (ConfigMenuType)combobox->itemData(index).toInt();
 
+		disableGenericSlots = true;
 		deleteButton->setEnabled(configType == CONFIG_MENU_USER);
 
 		if (changedFunc)
-			changedFunc(combobox->itemText(index).toUtf8().constData(), configType);
+		{
+			if (!changedFunc(combobox->itemText(index).toUtf8().constData(), configType))
+				combobox->setCurrentIndex(0);
+
+			for (int i = 0; i < this->controlCount; i++)
+				this->controls[i]->updateMe();
+		}
+
+		disableGenericSlots = origDisableGenericSlots;
 	}
 
-	class diaElemConfigMenu : public diaElem
-	{
-	protected:
-		const char *userConfigDir, *systemConfigDir;
-		diaElem **controls;
-		unsigned int controlCount;
-
+	class diaElemConfigMenu : public diaElem
+	{
+	protected:
+		const char *userConfigDir, *systemConfigDir;
+		diaElem **controls;
+		unsigned int controlCount;
+
 		CONFIG_MENU_CHANGED_T *changedFunc;
 		CONFIG_MENU_SERIALIZE_T *serializeFunc;
-
-	public:
+
+	public:
 		diaElemConfigMenu(const char* userConfigDir, const char* systemConfigDir, CONFIG_MENU_CHANGED_T *changedFunc,
-				CONFIG_MENU_SERIALIZE_T *serializeFunc, diaElem **controls, unsigned int controlCount);
-		~diaElemConfigMenu();
-		void setMe(void *dialog, void *opaque, uint32_t line);
-		void getMe(void);
-		void enable(uint32_t onoff);
-		int getRequiredLayout(void);
+				CONFIG_MENU_SERIALIZE_T *serializeFunc, diaElem **controls, unsigned int controlCount);
+		~diaElemConfigMenu();
+		void setMe(void *dialog, void *opaque, uint32_t line);
+		void getMe(void);
+		void enable(uint32_t onoff);
+		int getRequiredLayout(void);
+		void updateMe(void);
 	};
 
 	diaElemConfigMenu::diaElemConfigMenu(const char* userConfigDir, const char* systemConfigDir, CONFIG_MENU_CHANGED_T *changedFunc,
@@ -243,6 +260,10 @@
 	{
 		return FAC_QT_GRIDLAYOUT;
 	}
+
+	void diaElemConfigMenu::updateMe(void)
+	{
+	}
 }
 
 diaElem* qt4CreateConfigMenu(const char* userConfigDir, const char* systemConfigDir, CONFIG_MENU_CHANGED_T *changedFunc, 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/T_configMenu.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/T_configMenu.h	2009-07-24 18:24:37 UTC (rev 5136)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/T_configMenu.h	2009-07-24 18:32:40 UTC (rev 5137)
@@ -14,8 +14,9 @@
 
 	private:
 		const char *userConfigDir, *systemConfigDir;
-		diaElem **controls;
+		diaElem **controls;
 		unsigned int controlCount;
+		bool disableGenericSlots;
 
 		CONFIG_MENU_CHANGED_T *changedFunc;
 		CONFIG_MENU_SERIALIZE_T *serializeFunc;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/T_filesel.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/T_filesel.cpp	2009-07-24 18:24:37 UTC (rev 5136)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/T_filesel.cpp	2009-07-24 18:32:40 UTC (rev 5137)
@@ -42,6 +42,7 @@
   void   changeFile(void);
   void   enable(uint32_t onoff);
   int getRequiredLayout(void);
+  void updateMe(void);
 };
 class diaElemDirSelect : public diaElemDirSelectBase
 {
@@ -56,6 +57,7 @@
   void changeFile(void);
   void   enable(uint32_t onoff);
   int getRequiredLayout(void);
+  void updateMe(void);
 };
 
 void ADM_Qfilesel::buttonPressed(QAbstractButton *s)
@@ -191,6 +193,7 @@
 void diaElemFile::changeFile(void) {}
 
 int diaElemFile::getRequiredLayout(void) { return FAC_QT_GRIDLAYOUT; }
+void diaElemFile::updateMe(void) {};
 
 //****************************
 diaElemDirSelect::diaElemDirSelect(char **filename,const char *toggleTitle,const char *selectDirDesc) :
@@ -243,6 +246,7 @@
 void diaElemDirSelect::changeFile(void) {}
 
 int diaElemDirSelect::getRequiredLayout(void) { return FAC_QT_GRIDLAYOUT; }
+void diaElemDirSelect::updateMe(void) {};
 } // End of namespace
 //****************************Hoook*****************
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/T_notch.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/T_notch.cpp	2009-07-24 18:24:37 UTC (rev 5136)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/T_notch.cpp	2009-07-24 18:32:40 UTC (rev 5137)
@@ -44,6 +44,7 @@
   void setMe(void *dialog, void *opaque,uint32_t line);
   void getMe(void) {};
   int getRequiredLayout(void);
+  void updateMe(void);
 };
 
 diaElemNotch::diaElemNotch(uint32_t yes,const char *toggleTitle, const char *tip)
@@ -74,6 +75,7 @@
 }
 
 int diaElemNotch::getRequiredLayout(void) { return FAC_QT_GRIDLAYOUT; }
+void diaElemNotch::updateMe(void) {}
 } // End of namespace
 //****************************Hoook*****************
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/T_slider.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/T_slider.cpp	2009-07-24 18:24:37 UTC (rev 5136)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/T_slider.cpp	2009-07-24 18:32:40 UTC (rev 5137)
@@ -37,6 +37,7 @@
   void      getMe(void);
   void      enable(uint32_t onoff) ;
   int getRequiredLayout(void);
+  void updateMe(void);
   
 };
 class diaElemSlider : public diaElemSliderBase
@@ -52,6 +53,7 @@
   void      getMe(void);
   void      enable(uint32_t onoff) ;
   int getRequiredLayout(void);
+  void updateMe(void);
 };
 
 int SpinSlider::value()
@@ -152,6 +154,13 @@
 
 int diaElemUSlider::getRequiredLayout(void) { return FAC_QT_GRIDLAYOUT; }
 
+void diaElemUSlider::updateMe(void)
+{
+	SpinSlider *slider = (SpinSlider*)myWidget;
+
+	slider->setValue(*(uint32_t*)param);
+}
+
 diaElemSlider::diaElemSlider(int32_t *value,const char *toggleTitle, int32_t min,int32_t max,int32_t incr,const char *tip)
   : diaElemSliderBase()
 {
@@ -208,6 +217,13 @@
 }
 
 int diaElemSlider::getRequiredLayout(void) { return FAC_QT_GRIDLAYOUT; }
+
+void diaElemSlider::updateMe(void)
+{
+	SpinSlider *slider = (SpinSlider*)myWidget;
+
+	slider->setValue(*(int32_t*)param);
+}
 //****************************************************
 } // End of namespace
 //****************************Hoook*****************

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/T_threadCount.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/T_threadCount.cpp	2009-07-24 18:24:37 UTC (rev 5136)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/T_threadCount.cpp	2009-07-24 18:32:40 UTC (rev 5137)
@@ -33,6 +33,7 @@
   void setMe(void *dialog, void *opaque, uint32_t line);
   void getMe(void);
   int getRequiredLayout(void);
+  void updateMe(void);
 };
 
 void ADM_QthreadCount::radioGroupChanged(QAbstractButton *s)
@@ -68,6 +69,15 @@
 
 	QObject::connect(buttonGroup, SIGNAL(buttonClicked(QAbstractButton*)), this, SLOT(radioGroupChanged(QAbstractButton*)));
 
+	updateMe(value);
+}
+
+ADM_QthreadCount::~ADM_QthreadCount() 
+{
+}
+
+void ADM_QthreadCount::updateMe(uint32_t value)
+{
 	spinBox->setEnabled(value > 1);
 
 	if (value == 0)
@@ -81,27 +91,6 @@
 	}
 }
 
-ADM_QthreadCount::~ADM_QthreadCount() 
-{
-	if (buttonGroup)
-		delete buttonGroup;
-
-	if (radiobutton1)
-		delete radiobutton1;
-
-	if (radiobutton2)
-		delete radiobutton2;
-
-	if (radiobutton3)
-		delete radiobutton3;
-
-	if (spinBox)
-		delete spinBox;
-
-	if (text)
-		delete text;
-}
-
 diaElemThreadCount::diaElemThreadCount(uint32_t *value, const char *title, const char *tip) : diaElem(ELEM_THREAD_COUNT)
 {
 	param = (void*)value;
@@ -138,6 +127,11 @@
 
 int diaElemThreadCount::getRequiredLayout(void) { return FAC_QT_GRIDLAYOUT; }
 
+void diaElemThreadCount::updateMe(void)
+{
+	((ADM_QthreadCount*)myWidget)->updateMe(*(uint32_t *)param);
+}
+
 //**********************
 } // End of namesapce
 //**********************

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/T_threadCount.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/T_threadCount.h	2009-07-24 18:24:37 UTC (rev 5136)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/T_threadCount.h	2009-07-24 18:32:40 UTC (rev 5137)
@@ -27,6 +27,7 @@
 
 		ADM_QthreadCount(QWidget *widget, const char *title, uint32_t value, QGridLayout *layout, int line);
 		~ADM_QthreadCount();
+		void updateMe(uint32_t value);
 	};
 }
 #endif	// T_threadCount_h

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/include/DIA_factory.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/include/DIA_factory.h	2009-07-24 18:24:37 UTC (rev 5136)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/include/DIA_factory.h	2009-07-24 18:32:40 UTC (rev 5137)
@@ -82,6 +82,7 @@
   virtual void enable(uint32_t onoff) {}
   virtual void finalize(void) {} // in case some widget needs some stuff just before using them
   virtual int getRequiredLayout(void)=0;
+  virtual void updateMe(void) = 0;
 };
 /*********************************************/
 #define MENU_MAX_lINK 10
@@ -110,6 +111,7 @@
   void      getMe(void);
   void      enable(uint32_t onoff) ;
   int getRequiredLayout(void);
+  void updateMe(void);
 };
 
 /*********************************************/
@@ -127,6 +129,7 @@
   void      getMe(void);
   void      enable(uint32_t onoff) ;
   int getRequiredLayout(void);
+  void updateMe(void);
 };
 /************************************/
 class diaElemSliderBase : public diaElem
@@ -154,6 +157,7 @@
   void      enable(uint32_t onoff) ;
   uint8_t   setDigits(uint32_t digits) ;
   int getRequiredLayout(void);
+  void updateMe(void);
 };
 class diaElemSlider : public diaElemSliderBase
 {
@@ -169,6 +173,7 @@
   void      enable(uint32_t onoff) ;
   uint8_t   setDigits(uint32_t digits) ;
   int getRequiredLayout(void);
+  void updateMe(void);
 };
 /*********************************************/
 typedef diaElem *CREATE_TOGGLE(uint32_t *toggleValue,const char *toggleTitle, const char *tip);
@@ -254,6 +259,7 @@
   void getMe(void);
   void      enable(uint32_t onoff) ;
   int getRequiredLayout(void);
+  void updateMe(void);
 };
 /* Same but unsigned */
 class diaElemUInteger : public diaElem
@@ -267,6 +273,7 @@
   void getMe(void);
   void      enable(uint32_t onoff) ;
   int getRequiredLayout(void);
+  void updateMe(void);
 };
 /*************************************************/
 typedef diaElem  *(CREATE_BAR_T)(uint32_t percent,const char *toggleTitle);
@@ -282,6 +289,7 @@
   void setMe(void *dialog, void *opaque,uint32_t line);
   void getMe(void);
   int getRequiredLayout(void);
+  void updateMe(void);
 };
 
 /*********************************************/
@@ -301,6 +309,7 @@
   void getMe(void);
   void      enable(uint32_t onoff) ;
   int getRequiredLayout(void);
+  void updateMe(void);
 };
 /*************************************************/
 typedef struct diaMenuEntry
@@ -469,6 +478,7 @@
   void   changeFile(void);
   void   enable(uint32_t onoff);
   int getRequiredLayout(void);
+  void updateMe(void);
 };
 /*************************************************/
 typedef diaElem *CREATE_DIR_T(char **filename,const char *toggleTitle,const char *tip);
@@ -494,6 +504,7 @@
   void changeFile(void);
   void   enable(uint32_t onoff);
   int getRequiredLayout(void);
+  void updateMe(void);
 };
 /*************************************************/
 /* The text MUST be copied internally ! */
@@ -508,6 +519,7 @@
   void setMe(void *dialog, void *opaque,uint32_t line);
   void getMe(void);
   int getRequiredLayout(void);
+  void updateMe(void);
 };
 /*************************************************/
 typedef diaElem *(CREATE_TEXT_T )(char **readOnly,const char *toggleTitle, const char *tip);
@@ -523,6 +535,7 @@
   void getMe(void);
   void enable(uint32_t onoff);
   int getRequiredLayout(void);
+  void updateMe(void);
 };
 
 /*********************************************/
@@ -537,6 +550,7 @@
   void setMe(void *dialog, void *opaque,uint32_t line);
   void getMe(void) ;
   int getRequiredLayout(void);
+  void updateMe(void);
 };
 /*********************************************/
 typedef diaElem *(CREATE_TAB_T )(const char *toggleTitle, uint32_t nb, diaElem **content);
@@ -586,6 +600,7 @@
   void enable(uint32_t onoff);
   void finalize(void);
   int getRequiredLayout(void);
+  void updateMe(void);
 };
 /**********************************************/
 typedef diaElem *(CREATE_HEX_T )(const char *toggleTitle, uint32_t dataSize,uint8_t *data);
@@ -602,6 +617,7 @@
   void getMe(void) ;
   void finalize(void);
   int getRequiredLayout(void);
+  void updateMe(void);
 };
 /**********************************************/
 typedef diaElem *(CREATE_THREADCOUNT_T)(uint32_t *value, const char *title, const char *tip = NULL);
@@ -615,6 +631,7 @@
   void setMe(void *dialog, void *opaque, uint32_t line);
   void getMe(void);
   int getRequiredLayout(void);
+  void updateMe(void);
 };
 /**********************************************/
 typedef diaElem *(CREATE_ASPECTRATIO_T)(uint32_t *value, const char *title, const char *tip = NULL);
@@ -630,6 +647,7 @@
 	void getMe(void);
 	void enable(uint32_t onoff);
 	int getRequiredLayout(void);
+	void updateMe(void);
 };
 /*********************************************/
 typedef enum
@@ -663,6 +681,7 @@
 	void getMe(void);
 	void enable(uint32_t onoff);
 	int getRequiredLayout(void);
+	void updateMe(void);
 };
 /*********************************************/
 uint8_t diaFactoryRun(const char *title,uint32_t nb,diaElem **elems);

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/include/DIA_factoryStubs.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/include/DIA_factoryStubs.h	2009-07-24 18:24:37 UTC (rev 5136)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/include/DIA_factoryStubs.h	2009-07-24 18:32:40 UTC (rev 5137)
@@ -32,5 +32,10 @@
 	{ \
 	ADM_assert(internalPointer); \
 	return internalPointer->getRequiredLayout(); \
-	} 
+	} \
+void      aClass::updateMe(void)\
+	{ \
+	ADM_assert(internalPointer); \
+	return internalPointer->updateMe(); \
+	}
 #endif

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/src/DIA_factory.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/src/DIA_factory.cpp	2009-07-24 18:24:37 UTC (rev 5136)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/src/DIA_factory.cpp	2009-07-24 18:32:40 UTC (rev 5137)
@@ -265,11 +265,7 @@
 	diaElemMenuBase *cast=(diaElemMenuBase *)internalPointer;
 	cast->link(entry,onoff,w);
 }
-void      diaElemMenu::updateMe(void)
-{
-	
 
-}
 void   diaElemMenu::finalize(void)
 {
 	internalPointer->finalize();
@@ -303,12 +299,7 @@
 {
 	internalPointer->finalize();
 }
-void      diaElemMenuDynamic::updateMe(void)
-{
-	
 
-}
-
 DIA_MKSTUBS(diaElemMenuDynamic)
 // ****************** diaElemMatrix ********************
 diaElemThreadCount ::diaElemThreadCount(uint32_t *value, const char *title, const char *tip):
@@ -348,10 +339,7 @@
 	ADM_assert(internalPointer); 
 	internalPointer->setSize(size); 
 }
-void diaElemBitrate::updateMe()
-{
-	
-}
+
 void diaElemBitrate::setMaxQz(uint32_t qz)
 {
 	diaElemBitrateBase *cast=(diaElemBitrateBase *)internalPointer;



From gruntster at mail.berlios.de  Fri Jul 24 21:00:49 2009
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Fri, 24 Jul 2009 21:00:49 +0200
Subject: [Avidemux-svn-commit] r5138 - in
	branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder:
	ADM_vidEnc_x264/qt4 ADM_vidEnc_xvid/qt4
Message-ID: <200907241900.n6OJ0nhG000330@sheep.berlios.de>

Author: gruntster
Date: 2009-07-24 21:00:42 +0200 (Fri, 24 Jul 2009)
New Revision: 5138

Modified:
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidConfigDialog.cpp
Log:
[vidEnc] cosmetics

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp	2009-07-24 18:32:40 UTC (rev 5137)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp	2009-07-24 19:00:42 UTC (rev 5138)
@@ -288,7 +288,6 @@
 	else
 	{
 		PluginConfigType configType = (PluginConfigType)ui.configurationComboBox->itemData(index).toInt();
-		QString configFileName;
 
 		ui.deleteButton->setEnabled(configType == PLUGIN_CONFIG_USER);
 

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidConfigDialog.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidConfigDialog.cpp	2009-07-24 18:32:40 UTC (rev 5137)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidConfigDialog.cpp	2009-07-24 19:00:42 UTC (rev 5138)
@@ -178,7 +178,6 @@
 	else
 	{
 		PluginConfigType configType = (PluginConfigType)ui.configurationComboBox->itemData(index).toInt();
-		QString configFileName;
 
 		ui.deleteButton->setEnabled(configType == PLUGIN_CONFIG_USER);
 



From gruntster at mail.berlios.de  Fri Jul 24 23:02:00 2009
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Fri, 24 Jul 2009 23:02:00 +0200
Subject: [Avidemux-svn-commit] r5139 - in
	branches/avidemux_2.5_branch_gruntster/avidemux: ADM_encoder
	ADM_filter
Message-ID: <200907242102.n6OL209W012125@sheep.berlios.de>

Author: gruntster
Date: 2009-07-24 23:01:55 +0200 (Fri, 24 Jul 2009)
New Revision: 5139

Modified:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/ADM_pluginLoad.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_filter/filter.cpp
Log:
[plugin] fix small memory leaks when loading plugins

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/ADM_pluginLoad.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/ADM_pluginLoad.cpp	2009-07-24 19:00:42 UTC (rev 5138)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/ADM_pluginLoad.cpp	2009-07-24 21:01:55 UTC (rev 5139)
@@ -186,7 +186,10 @@
 		printf("[ADM_vidEnc_plugin] Cannot parse plugin\n");
 
 	for (int i = 0; i < nbFile; i++)
+	{
 		loadVideoEncoderPlugin(uiType, files[i]);
+		ADM_dealloc(files[i]);
+	}
 
 	printf("[ADM_vidEnc_plugin] Scanning done, found %d codec\n", ADM_videoEncoderPlugins.size());
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_filter/filter.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_filter/filter.cpp	2009-07-24 19:00:42 UTC (rev 5138)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_filter/filter.cpp	2009-07-24 21:01:55 UTC (rev 5139)
@@ -208,7 +208,10 @@
 	}
 
 	for(int i=0;i<nbFile;i++)
+	{
 		tryLoadingFilterPlugin(files[i]);
+		ADM_dealloc(files[i]);
+	}
 
 	printf("[ADM_vf_plugin] Scanning done\n");
 



From gruntster at mail.berlios.de  Sat Jul 25 12:30:48 2009
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Sat, 25 Jul 2009 12:30:48 +0200
Subject: [Avidemux-svn-commit] r5140 -
	branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog
Message-ID: <200907251030.n6PAUm7j025024@sheep.berlios.de>

Author: gruntster
Date: 2009-07-25 12:30:43 +0200 (Sat, 25 Jul 2009)
New Revision: 5140

Modified:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/TLK_filesel.cpp
Log:
[GTK] fix open dialogs performing save and vice versa

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/TLK_filesel.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/TLK_filesel.cpp	2009-07-24 21:01:55 UTC (rev 5139)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/TLK_filesel.cpp	2009-07-25 10:30:43 UTC (rev 5140)
@@ -473,8 +473,8 @@
 	ADM_GTK_fileSel::GUI_FileSelWrite,
 	ADM_GTK_fileSel::GUI_FileSelRead,
 	ADM_GTK_fileSel::GUI_FileSelWrite,
+	ADM_GTK_fileSel::FileSel_SelectRead,
 	ADM_GTK_fileSel::FileSel_SelectWrite,
-	ADM_GTK_fileSel::FileSel_SelectRead,
 	ADM_GTK_fileSel::FileSel_SelectDir
 };
 



From mean at mail.berlios.de  Sat Jul 25 15:21:33 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sat, 25 Jul 2009 15:21:33 +0200
Subject: [Avidemux-svn-commit] r5141 -
	branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS
Message-ID: <200907251321.n6PDLXfA025930@sheep.berlios.de>

Author: mean
Date: 2009-07-25 15:21:32 +0200 (Sat, 25 Jul 2009)
New Revision: 5141

Modified:
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/ADM_tsReadIndex.cpp
Log:
[Demux/ts] increase line size for Ts index, fixes 005)

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/ADM_tsReadIndex.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/ADM_tsReadIndex.cpp	2009-07-25 10:30:43 UTC (rev 5140)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/ADM_tsReadIndex.cpp	2009-07-25 13:21:32 UTC (rev 5141)
@@ -21,6 +21,7 @@
 #include "ADM_ts.h"
 
 #include <math.h>
+#define TS_MAX_LINE 10000
 /**
         \fn readIndex
         \brief Read the [video] section of the index file
@@ -28,14 +29,14 @@
 */
 bool    tsHeader::readIndex(indexFile *index)
 {
-char buffer[2000];
+char buffer[TS_MAX_LINE];
 bool firstAudio=true;
         printf("[TsDemuxerer] Reading index\n");
         if(!index->goToSection("Data")) return false;
       
         while(1)
         {
-            if(!index->readString(2000,(uint8_t *)buffer)) return true;
+            if(!index->readString(TS_MAX_LINE,(uint8_t *)buffer)) return true;
             if(buffer[0]=='[') return true;
             if(buffer[0]==0xa || buffer[0]==0xd) continue; // blank line
             // Now split the line
@@ -261,4 +262,4 @@
     }
     return true;
 }
-//EOF
\ No newline at end of file
+//EOF



From mean at mail.berlios.de  Sat Jul 25 15:24:12 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sat, 25 Jul 2009 15:24:12 +0200
Subject: [Avidemux-svn-commit] r5142 -
	branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS
Message-ID: <200907251324.n6PDOChs026199@sheep.berlios.de>

Author: mean
Date: 2009-07-25 15:24:12 +0200 (Sat, 25 Jul 2009)
New Revision: 5142

Modified:
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/ADM_tsReadIndex.cpp
Log:
[Demux/ts] update header, fixes #5

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/ADM_tsReadIndex.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/ADM_tsReadIndex.cpp	2009-07-25 13:21:32 UTC (rev 5141)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/ADM_tsReadIndex.cpp	2009-07-25 13:24:12 UTC (rev 5142)
@@ -1,4 +1,7 @@
 /***************************************************************************
+        \file ADM_tsReadIndex.cpp
+        \brief Read ts index
+
     copyright            : (C) 2007/2009 by mean
     email                : fixounet at free.fr
     



From mean at mail.berlios.de  Sat Jul 25 15:47:05 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sat, 25 Jul 2009 15:47:05 +0200
Subject: [Avidemux-svn-commit] r5143 -
	branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS
Message-ID: <200907251347.n6PDl500029023@sheep.berlios.de>

Author: mean
Date: 2009-07-25 15:47:05 +0200 (Sat, 25 Jul 2009)
New Revision: 5143

Modified:
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/ADM_tsReadIndex.cpp
Log:
[Demux/ts] update header, fixes #5

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/ADM_tsReadIndex.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/ADM_tsReadIndex.cpp	2009-07-25 13:24:12 UTC (rev 5142)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/ADM_tsReadIndex.cpp	2009-07-25 13:47:05 UTC (rev 5143)
@@ -3,8 +3,6 @@
         \brief Read ts index
 
     copyright            : (C) 2007/2009 by mean
-    email                : fixounet at free.fr
-    
 
  ***************************************************************************/
 



From mean at mail.berlios.de  Sat Jul 25 15:51:24 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sat, 25 Jul 2009 15:51:24 +0200
Subject: [Avidemux-svn-commit] r5144 - branches/avidemux_2.5_branch_gruntster
Message-ID: <200907251351.n6PDpOUw029306@sheep.berlios.de>

Author: mean
Date: 2009-07-25 15:51:24 +0200 (Sat, 25 Jul 2009)
New Revision: 5144

Modified:
   branches/avidemux_2.5_branch_gruntster/bootStrap.sh
Log:
[Check] closes #2 , dummy bug

Modified: branches/avidemux_2.5_branch_gruntster/bootStrap.sh
===================================================================
--- branches/avidemux_2.5_branch_gruntster/bootStrap.sh	2009-07-25 13:47:05 UTC (rev 5143)
+++ branches/avidemux_2.5_branch_gruntster/bootStrap.sh	2009-07-25 13:51:24 UTC (rev 5144)
@@ -1,4 +1,5 @@
 #!/bin/bash
+#
 fail()
 {
         echo "*** fail $1 ***"



From gruntster at mail.berlios.de  Sat Jul 25 16:33:44 2009
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Sat, 25 Jul 2009 16:33:44 +0200
Subject: [Avidemux-svn-commit] r5145 -
	branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/src
Message-ID: <200907251433.n6PEXi1F000762@sheep.berlios.de>

Author: gruntster
Date: 2009-07-25 16:33:39 +0200 (Sat, 25 Jul 2009)
New Revision: 5145

Modified:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/src/ADM_fileio.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/src/ADM_misc.cpp
Log:
[core] move fileExist function to be included with other file I/O functions

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/src/ADM_fileio.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/src/ADM_fileio.cpp	2009-07-25 13:51:24 UTC (rev 5144)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/src/ADM_fileio.cpp	2009-07-25 14:33:39 UTC (rev 5145)
@@ -56,6 +56,18 @@
 extern int wideCharStringToUtf8(const wchar_t *wideCharString, int wideCharStringLength, char *utf8String);
 #endif
 
+uint8_t ADM_fileExist(char *name)
+{
+	FILE *file = fopen(name, "rb");
+
+	if (!file)
+		return 0;
+
+	fclose(file);
+
+	return 1;
+}
+
 size_t ADM_fread (void *ptr, size_t size, size_t n, FILE *sstream)
 {
 	return fread(ptr,size,n,sstream);
@@ -682,7 +694,7 @@
 const char *ADM_GetFileName(const char *str)
 {
 	const char *filename;
-	char *filename2;
+	const char *filename2;
 
 #ifndef __WIN32
 	filename = strrchr(str, '/');

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/src/ADM_misc.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/src/ADM_misc.cpp	2009-07-25 13:51:24 UTC (rev 5144)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/src/ADM_misc.cpp	2009-07-25 14:33:39 UTC (rev 5145)
@@ -219,15 +219,6 @@
 
 }
 
-uint8_t         ADM_fileExist(char *name)
-{
-FILE *file;
-                file=fopen(name,"rb");
-                if(!file) return 0;
-                fclose(file);
-                return 1;
-
-}
 /*
     In some case (e.g. javascript), the reader expects unixish path 
     c:/foo/bar/c.c



From gruntster at mail.berlios.de  Sat Jul 25 16:35:40 2009
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Sat, 25 Jul 2009 16:35:40 +0200
Subject: [Avidemux-svn-commit] r5146 -
	branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_GTK/src
Message-ID: <200907251435.n6PEZeZW001027@sheep.berlios.de>

Author: gruntster
Date: 2009-07-25 16:35:32 +0200 (Sat, 25 Jul 2009)
New Revision: 5146

Added:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_GTK/src/FAC_configMenu.cpp
Modified:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_GTK/src/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_GTK/src/DIA_dialogFactory.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_GTK/src/FAC_bitrate.cpp
Log:
[dlgFactory] more work on config menu dialog factory control

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_GTK/src/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_GTK/src/CMakeLists.txt	2009-07-25 14:33:39 UTC (rev 5145)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_GTK/src/CMakeLists.txt	2009-07-25 14:35:32 UTC (rev 5146)
@@ -18,6 +18,7 @@
 	FAC_threadCount.cpp
 	FAC_slider.cpp
 	FAC_matrix.cpp
+	FAC_configMenu.cpp
         ADM_gladeSupport.cpp  
         choice.cpp       
         toolkit_dialog.cpp

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_GTK/src/DIA_dialogFactory.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_GTK/src/DIA_dialogFactory.cpp	2009-07-25 14:33:39 UTC (rev 5145)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_GTK/src/DIA_dialogFactory.cpp	2009-07-25 14:35:32 UTC (rev 5146)
@@ -19,8 +19,11 @@
 
 static uint8_t  buildOneTab(GtkWidget *nb,int index, diaElemTabs *tab);
 static uint8_t  readOneTab(int index, diaElemTabs *tab);
+static void addControls(GtkWidget *dialog, GtkWidget *vbox, diaElem **controls, unsigned int controlCount);
+static void addButtonBox(GtkWidget *dialog);
 //
 static uint8_t gtkDiaFactoryRunTabs(const char *title,uint32_t nb,diaElemTabs **tabs);
+static uint8_t gtkDiaFactoryRunTabs2(const char *title, unsigned int headerControlCount, diaElem **headerControls, unsigned int tabControlCount, diaElemTabs **tabControls);
 static uint8_t gtkDiaFactoryRun(const char *title,uint32_t nb,diaElem **elems);
 //
 
@@ -79,61 +82,9 @@
   gtk_container_add (GTK_CONTAINER (dialog_vbox1), vbox1);
   gtk_widget_show (vbox1);
   
-  int line=0;
-  int i=0;  
-  while (i<nb)
-  {
-	  if (elems[i]->mySelf == ELEM_FRAME)
-	  {
-		  addLine(elems[i],dialog,vbox1,line);
-		  i++;
-	  }
-	  else
-	  {
-		  line = 0;
-		  int nbLine=0;
-		  while (i+nbLine<nb && elems[i+nbLine]->mySelf != ELEM_FRAME) 
-			  nbLine++;
-		  table1 = gtk_table_new (nbLine, 2, FALSE);
-		  gtk_table_set_col_spacings (GTK_TABLE (table1), 12);
-		  gtk_table_set_row_spacings (GTK_TABLE (table1), 6);
-		  gtk_box_pack_start (GTK_BOX(vbox1), table1, FALSE, FALSE, 0);
-		  gtk_widget_show (table1);
-                  
-		  while (i<nb && elems[i]->mySelf != ELEM_FRAME)
-		  {
-			  addLine(elems[i],dialog,table1,line);
-			  line+=elems[i]->getSize();
-			  i++;
-		  }
-	  }
-  }
-  
-  // Add a Close button
-  GtkWidget *okbutton1;
-  GtkWidget *cancelbutton1;
+  addControls(dialog, vbox1, elems, nb);
+  addButtonBox(dialog);
 
-  cancelbutton1 = gtk_button_new_from_stock ("gtk-cancel");
-  gtk_widget_show (cancelbutton1);
-  gtk_dialog_add_action_widget (GTK_DIALOG (dialog), cancelbutton1, GTK_RESPONSE_CANCEL);
-  
-  okbutton1 = gtk_button_new_from_stock ("gtk-ok");
-  gtk_widget_show (okbutton1);
-  gtk_dialog_add_action_widget (GTK_DIALOG (dialog), okbutton1, GTK_RESPONSE_OK);
-  GTK_WIDGET_SET_FLAGS (okbutton1, GTK_CAN_DEFAULT);
-  gtk_dialog_set_default_response (GTK_DIALOG (dialog), GTK_RESPONSE_OK);
-  
-  gtk_dialog_set_alternative_button_order(GTK_DIALOG(dialog),
-										GTK_RESPONSE_OK,
-										GTK_RESPONSE_CANCEL,
-										-1);
-
-  /* Finalize them */
-  for(int i=0;i<nb;i++)
-  {
-    elems[i]->finalize();
-  }
-  
   // Show it & run
   gtk_register_dialog(dialog);
   if(GTK_RESPONSE_OK==gtk_dialog_run(GTK_DIALOG(dialog)))
@@ -158,84 +109,120 @@
 */
 uint8_t gtkDiaFactoryRunTabs(const char *title,uint32_t nb,diaElemTabs **tabs)
 {
-  uint8_t ret=0;
-  ADM_assert(tabs);
-  ADM_assert(nb);
-  ADM_assert(title);
-  
-  /* First there was a dialog ...*/
-  GtkWidget *dialog=gtk_dialog_new ();
-  GtkWidget *dialog_vbox1;
-  GtkWidget *table1;
-  GtkWidget *notebook1;
-  
-  gtk_window_set_title (GTK_WINDOW (dialog),title );
-  gtk_window_set_resizable (GTK_WINDOW (dialog), FALSE);
-  gtk_container_set_border_width (GTK_CONTAINER (dialog), 6);
-  gtk_dialog_set_has_separator (GTK_DIALOG (dialog), FALSE);
-  dialog_vbox1 = GTK_DIALOG (dialog)->vbox;
-  gtk_box_set_spacing (GTK_BOX(dialog_vbox1), 12);
-  gtk_widget_show (dialog_vbox1);
-   // Ok  create our tabs
-  notebook1 = gtk_notebook_new ();
-  gtk_widget_show (notebook1);
-  gtk_box_pack_start (GTK_BOX (dialog_vbox1), notebook1, FALSE, FALSE, 0);
-  gtk_container_set_border_width (GTK_CONTAINER (notebook1), 6);
-  
-  // And fill them
-  for(int i=0;i<nb;i++)
-  {
-    buildOneTab(notebook1,i,tabs[i]); 
-  }
-  
-  diaElemTabs *itab;
-  for(int i=0;i<nb;i++)
-  {
-    itab=(tabs[i]);
-    for(int j=0;j<itab->nbElems;j++)
-    {
-      itab->dias[j]->finalize();
-    }
-  }
-  // Add a Close button
-  GtkWidget *okbutton1;
-  GtkWidget *cancelbutton1;
+	return gtkDiaFactoryRunTabs2(title, 0, NULL, nb, tabs);
+}
 
-  cancelbutton1 = gtk_button_new_from_stock ("gtk-cancel");
-  gtk_widget_show (cancelbutton1);
-  gtk_dialog_add_action_widget (GTK_DIALOG (dialog), cancelbutton1, GTK_RESPONSE_CANCEL);
-  
-  okbutton1 = gtk_button_new_from_stock ("gtk-ok");
-  gtk_widget_show (okbutton1);
-  gtk_dialog_add_action_widget (GTK_DIALOG (dialog), okbutton1, GTK_RESPONSE_OK);
-  GTK_WIDGET_SET_FLAGS (okbutton1, GTK_CAN_DEFAULT);
-  gtk_dialog_set_default_response (GTK_DIALOG (dialog), GTK_RESPONSE_OK);
+uint8_t gtkDiaFactoryRunTabs2(const char *title, unsigned int headerControlCount, diaElem **headerControls, unsigned int tabControlCount, diaElemTabs **tabControls)
+{
+	uint8_t ret = 0;
 
-  gtk_dialog_set_alternative_button_order(GTK_DIALOG(dialog),
-										GTK_RESPONSE_OK,
-										GTK_RESPONSE_CANCEL,
-										-1);
+	ADM_assert(tabControls);
+	ADM_assert(tabControlCount);
+	ADM_assert(title);
 
-  // Show it & run
-  gtk_register_dialog(dialog);
-  if(GTK_RESPONSE_OK==gtk_dialog_run(GTK_DIALOG(dialog)))
-  {
-    for(int i=0;i<nb;i++)
-    {
-      readOneTab(i,tabs[i]);
-    }
-    ret=1;
-  }
+	GtkWidget *dialog = gtk_dialog_new();
+	GtkWidget *dialog_vbox1;
+	GtkWidget *table1;
+	GtkWidget *notebook1;
 
-  // Cleanup
-  gtk_unregister_dialog(dialog);
-  gtk_widget_destroy(dialog);
-  return ret;
-  
+	gtk_window_set_title(GTK_WINDOW(dialog),title);
+	gtk_window_set_resizable(GTK_WINDOW(dialog), FALSE);
+	gtk_container_set_border_width(GTK_CONTAINER(dialog), 6);
+	gtk_dialog_set_has_separator(GTK_DIALOG(dialog), FALSE);
+	dialog_vbox1 = GTK_DIALOG(dialog)->vbox;
+	gtk_box_set_spacing(GTK_BOX(dialog_vbox1), 12);
+	gtk_widget_show(dialog_vbox1);
+
+	if (headerControls)
+		addControls(dialog, dialog_vbox1, headerControls, headerControlCount);
+
+	notebook1 = gtk_notebook_new();
+	gtk_widget_show(notebook1);
+	gtk_box_pack_start(GTK_BOX(dialog_vbox1), notebook1, FALSE, FALSE, 0);
+	gtk_container_set_border_width(GTK_CONTAINER(notebook1), 6);
+
+	for (int i = 0; i < tabControlCount; i++)
+		buildOneTab(notebook1, i, tabControls[i]); 
+
+	addButtonBox(dialog);
+
+	// Show it & run
+	gtk_register_dialog(dialog);
+
+	if (GTK_RESPONSE_OK == gtk_dialog_run(GTK_DIALOG(dialog)))
+	{
+		for (int i = 0; i < tabControlCount; i++)
+			readOneTab(i, tabControls[i]);
+
+		ret = 1;
+	}
+
+	gtk_unregister_dialog(dialog);
+	gtk_widget_destroy(dialog);
+
+	return ret;
 }
-/**
 
-*/
+void addControls(GtkWidget *dialog, GtkWidget *vbox, diaElem **controls, unsigned int controlCount)
+{
+	GtkWidget *table;
+	int line = 0;
+	int i = 0;
+
+	while (i < controlCount)
+	{
+		if (controls[i]->mySelf == ELEM_FRAME)
+		{
+			addLine(controls[i], dialog, vbox, line);
+			i++;
+		}
+		else
+		{
+			int nbLine = 0;
+
+			line = 0;
+
+			while (i + nbLine < controlCount && controls[i + nbLine]->mySelf != ELEM_FRAME) 
+				nbLine++;
+
+			table = gtk_table_new(nbLine, 2, FALSE);
+			gtk_table_set_col_spacings(GTK_TABLE(table), 12);
+			gtk_table_set_row_spacings(GTK_TABLE(table), 6);
+			gtk_box_pack_start(GTK_BOX(vbox), table, FALSE, FALSE, 0);
+			gtk_widget_show(table);
+
+			while (i < controlCount && controls[i]->mySelf != ELEM_FRAME)
+			{
+				addLine(controls[i], dialog, table, line);
+				line += controls[i]->getSize();
+				i++;
+			}
+		}
+	}
+
+	for(int i = 0; i < controlCount; i++)
+	{
+		controls[i]->finalize();
+	}
+}
+
+void addButtonBox(GtkWidget *dialog)
+{
+	GtkWidget *okbutton1;
+	GtkWidget *cancelbutton1;
+
+	cancelbutton1 = gtk_button_new_from_stock("gtk-cancel");
+	gtk_widget_show(cancelbutton1);
+	gtk_dialog_add_action_widget(GTK_DIALOG(dialog), cancelbutton1, GTK_RESPONSE_CANCEL);
+
+	okbutton1 = gtk_button_new_from_stock("gtk-ok");
+	gtk_widget_show(okbutton1);
+	gtk_dialog_add_action_widget(GTK_DIALOG(dialog), okbutton1, GTK_RESPONSE_OK);
+	GTK_WIDGET_SET_FLAGS(okbutton1, GTK_CAN_DEFAULT);
+	gtk_dialog_set_default_response(GTK_DIALOG(dialog), GTK_RESPONSE_OK);
+	gtk_dialog_set_alternative_button_order(GTK_DIALOG(dialog), GTK_RESPONSE_OK, GTK_RESPONSE_CANCEL, -1);
+}
+
 uint8_t  buildOneTab(GtkWidget *nb,int index, diaElemTabs *tab)
 {
   GtkWidget *table1,*vbox1,*label;
@@ -246,44 +233,12 @@
   gtk_container_add (GTK_CONTAINER (nb), vbox1);
   gtk_widget_show (vbox1);
 
-  int line=0;
-  int i=0;
-  while (i<tab->nbElems)
-  {
-	  if (tab->dias[i]->mySelf == ELEM_FRAME)
-	  {
-		  addLine(tab->dias[i],nb,vbox1,line);
-		  i++;
-	  }
-	  else
-	  {
-                  line = 0;
-                  int nbLine=0;
-                   while (i+nbLine<tab->nbElems && tab->dias[i+nbLine]->mySelf != ELEM_FRAME) 
-                    nbLine++;
-                  table1 = gtk_table_new (nbLine, 2, FALSE);
-                  gtk_table_set_col_spacings (GTK_TABLE (table1), 12);
-                  gtk_table_set_row_spacings (GTK_TABLE (table1), 6);
-                  gtk_box_pack_start (GTK_BOX(vbox1), table1, FALSE, FALSE, 0);
-                  gtk_widget_show (table1);
-                  
-                  while (i<tab->nbElems && tab->dias[i]->mySelf != ELEM_FRAME)
-                  {
-                          addLine(tab->dias[i],nb,table1,line);
-						  line+=tab->dias[i]->getSize();
-						  i++;
-                  }
-	  }
-  }
+  addControls(nb, vbox1, tab->dias, tab->nbElems);
   
-
-  
   label = gtk_label_new (tab->title);
   gtk_widget_show (label);
   gtk_notebook_set_tab_label (GTK_NOTEBOOK (nb), gtk_notebook_get_nth_page (GTK_NOTEBOOK (nb), index), label);
 
-  
-
   return 1; 
 }
 /**
@@ -348,6 +303,8 @@
 extern DELETE_DIA_ELEM_T    gtkDestroyUSlider;
 extern 	CREATE_SLIDER_T     gtkCreateSlider;
 extern 	DELETE_DIA_ELEM_T   gtkDestroySlider;
+extern CREATE_CONFIG_MENU_T gtkCreateConfigMenu;
+extern DELETE_DIA_ELEM_T    gtkDestroyConfigMenu;
 /**
  *  \fn gtkFactoryGetVersion
  * 	\brief returns the version this has been compiled with
@@ -365,7 +322,7 @@
 	&gtkFactoryGetVersion,
 	&gtkDiaFactoryRun,
 	&gtkDiaFactoryRunTabs,
-	NULL,
+	&gtkDiaFactoryRunTabs2,
 	// Buttons
 	&gtkCreateButton,
 	&gtkDeleteButton,
@@ -430,8 +387,8 @@
 	&gtkCreateSlider,
 	&gtkDestroySlider,
 	// Config Menu
-	NULL,
-	NULL
+	&gtkCreateConfigMenu,
+	&gtkDestroyConfigMenu
 };
 
 /**

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_GTK/src/FAC_bitrate.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_GTK/src/FAC_bitrate.cpp	2009-07-25 14:33:39 UTC (rev 5145)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_GTK/src/FAC_bitrate.cpp	2009-07-25 14:35:32 UTC (rev 5146)
@@ -96,7 +96,6 @@
  */
 void diaElemBitrate::setMe(void *dialog, void *opaque,uint32_t line)
 {
-  GtkWidget *widget;
   GtkObject *adj;
   GtkWidget *label1;
   GtkWidget *label2;

Added: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_GTK/src/FAC_configMenu.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_GTK/src/FAC_configMenu.cpp	2009-07-25 14:33:39 UTC (rev 5145)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_GTK/src/FAC_configMenu.cpp	2009-07-25 14:35:32 UTC (rev 5146)
@@ -0,0 +1,313 @@
+/***************************************************************************
+FAC_configMenu.cpp
+Handle dialog factory element : Config Menu
+(C) 2009 Gruntster 
+***************************************************************************/
+
+/***************************************************************************
+*                                                                         *
+*   This program is free software; you can redistribute it and/or modify  *
+*   it under the terms of the GNU General Public License as published by  *
+*   the Free Software Foundation; either version 2 of the License, or     *
+*   (at your option) any later version.                                   *
+*                                                                         *
+***************************************************************************/
+
+#include <string>
+#include <map>
+
+#include "ADM_toolkitGtk.h"
+#include "DIA_factory.h"
+#include "DIA_coreToolkit.h"
+#include "DIA_fileSel.h"
+
+using namespace std;
+
+extern "C"
+{
+#include "ADM_plugin/ADM_vidEnc_plugin.h"
+}
+
+namespace ADM_GtkFactory
+{
+	class diaElemConfigMenuData
+	{
+	public:
+		GtkComboBox *combo;
+		GtkButton *deleteButton;
+
+		diaElem **controls;
+		unsigned int controlCount;
+
+		map<string, int> *configs;
+		const char *userConfigDir;
+		const char *systemConfigDir;
+
+		CONFIG_MENU_CHANGED_T *changedFunc;
+		CONFIG_MENU_SERIALIZE_T *serializeFunc;
+	};
+
+	static map<string, int>* fillConfigurationComboBox(GtkComboBox *combo, const char* userConfigDir, const char* systemConfigDir)
+	{
+#define MAX_CONFIG 100
+
+		uint32_t fileCount;
+		char *files[MAX_CONFIG];
+		map<string, int> *configs = new map<string, int>();
+
+		buildDirectoryContent(&fileCount, userConfigDir, files, MAX_CONFIG, "xml");
+
+		for (int i = 0; i < fileCount; i++)
+		{
+			files[i][strlen(files[i]) - 4] = 0;	// clip extension
+			configs->insert(pair<string, ConfigMenuType>(string(ADM_GetFileName(files[i])), CONFIG_MENU_USER));
+
+			ADM_dealloc(files[i]);
+		}
+
+		buildDirectoryContent(&fileCount, systemConfigDir, files, MAX_CONFIG, "xml");
+
+		for (int i = 0; i < fileCount; i++)
+		{
+			files[i][strlen(files[i]) - 4] = 0;	// clip extension
+			configs->insert(pair<string, ConfigMenuType>(string(ADM_GetFileName(files[i])), CONFIG_MENU_USER));
+
+			ADM_dealloc(files[i]);
+		}
+
+		GtkTreeModel* model = gtk_combo_box_get_model(combo);
+
+		gtk_list_store_clear(GTK_LIST_STORE(model));
+		gtk_combo_box_append_text(combo, QT_TR_NOOP("<default>"));
+		gtk_combo_box_append_text(combo, QT_TR_NOOP("<custom>"));
+
+		for (map<string, int>::iterator it = configs->begin(); it != configs->end(); it++)
+			gtk_combo_box_append_text(combo, it->first.c_str());
+
+		gtk_combo_box_set_active(combo, 0);
+
+		return configs;
+	}
+
+	static bool selectConfiguration(GtkComboBox *combo, map<string, int> *configs, const char *selectFile, ConfigMenuType configurationType)
+	{
+		bool success = false;
+
+		if (configurationType == CONFIG_MENU_DEFAULT)
+		{
+			gtk_combo_box_set_active(combo, 0);
+			success = true;
+		}
+		else
+		{
+			GtkTreeModel* model = gtk_combo_box_get_model(combo);
+			GtkTreeIter iter;
+			char *config;
+			int index = 0;
+
+			if (gtk_tree_model_get_iter_first(model, &iter))
+			{
+				do
+				{
+					map<string, int>::iterator it = configs->find(string(selectFile));
+
+					gtk_tree_model_get(model, &iter, 0, &config, -1);
+
+					if (strcmp(config, selectFile) == 0 && it->second == configurationType)
+					{
+						gtk_combo_box_set_active(combo, index);
+						success = true;
+						break;
+					}
+
+					index++;
+				}
+				while (gtk_tree_model_iter_next(model, &iter));
+			}
+
+			if (!success)
+				gtk_combo_box_set_active(combo, 1);
+		}
+
+		return success;
+	}
+
+	static void saveAsClicked(GtkWidget *widget, gpointer *data)
+	{
+		diaElemConfigMenuData *menuData = (diaElemConfigMenuData*)data;
+
+		if (menuData->serializeFunc)
+		{
+			ADM_mkdir(menuData->userConfigDir);
+
+			char filename[1024];
+
+			if (FileSel_SelectWrite(QT_TR_NOOP("Save As"), filename, 1023, menuData->userConfigDir))
+			{
+				for (int i = 0; i < menuData->controlCount; i++)
+					menuData->controls[i]->getMe();
+
+				char *configData = menuData->serializeFunc();
+
+				FILE *fd = fopen(filename, "w");
+
+				fwrite(configData, 1, strlen(configData), fd);
+				fclose(fd);
+
+				delete menuData->configs;
+				menuData->configs = fillConfigurationComboBox(menuData->combo, menuData->userConfigDir, menuData->systemConfigDir);
+
+				const char* baseName = ADM_GetFileName(filename);
+				char *ext = strrchr(baseName, '.');
+
+				if (ext)
+					*ext = 0;
+
+				selectConfiguration(menuData->combo, menuData->configs, baseName, CONFIG_MENU_USER);
+
+				delete [] configData;
+			}
+		}
+	}
+
+	static void deleteClicked(GtkWidget *widget, gpointer *data)
+	{
+		diaElemConfigMenuData *menuData = (diaElemConfigMenuData*)data;
+		const char* selectedConfig = gtk_combo_box_get_active_text(menuData->combo);
+		map<string, int>::iterator it = menuData->configs->find(string((selectedConfig)));
+
+		if (it->second == CONFIG_MENU_USER)
+		{
+			char path[strlen(menuData->userConfigDir) + strlen(selectedConfig) + 5];
+
+			strcpy(path, menuData->userConfigDir);
+			strcat(path, selectedConfig);
+			strcat(path, ".xml");
+
+			if (GUI_Question(QT_TR_NOOP("Are you sure you wish to delete the selected configuration?")) && ADM_fileExist(path))
+			{
+				ADM_unlink(path);
+				menuData->configs->erase(it);
+				gtk_combo_box_remove_text(menuData->combo, gtk_combo_box_get_active(menuData->combo));
+				gtk_combo_box_set_active(menuData->combo, 0);	// default
+			}
+		}
+	}
+
+	void comboChanged(GtkWidget *widget, gpointer *data)
+	{
+		diaElemConfigMenuData *menuData = (diaElemConfigMenuData*)data;
+		const char* selectedConfig = gtk_combo_box_get_active_text(menuData->combo);
+		map<string, int>::iterator it = menuData->configs->find(string((selectedConfig)));
+
+		gtk_widget_set_sensitive(GTK_WIDGET(menuData->deleteButton), it->second == CONFIG_MENU_USER);
+
+		if (menuData->changedFunc)
+		{
+			if (!menuData->changedFunc(selectedConfig, (ConfigMenuType)it->second))
+				gtk_combo_box_set_active(menuData->combo, 0);
+
+			for (int i = 0; i < menuData->controlCount; i++)
+				menuData->controls[i]->updateMe();
+		}
+	}
+
+	class diaElemConfigMenu : public diaElem
+	{
+	protected:
+		const char *userConfigDir, *systemConfigDir;
+		diaElem **controls;
+		unsigned int controlCount;
+
+		CONFIG_MENU_CHANGED_T *changedFunc;
+		CONFIG_MENU_SERIALIZE_T *serializeFunc;
+
+	public:
+		diaElemConfigMenu(const char* userConfigDir, const char* systemConfigDir, CONFIG_MENU_CHANGED_T *changedFunc,
+				CONFIG_MENU_SERIALIZE_T *serializeFunc, diaElem **controls, unsigned int controlCount);
+		~diaElemConfigMenu();
+		void setMe(void *dialog, void *opaque, uint32_t line);
+		void getMe(void);
+		void enable(uint32_t onoff);
+		int getRequiredLayout(void);
+		void updateMe(void);
+	};
+
+	diaElemConfigMenu::diaElemConfigMenu(const char* userConfigDir, const char* systemConfigDir, CONFIG_MENU_CHANGED_T *changedFunc,
+				CONFIG_MENU_SERIALIZE_T *serializeFunc, diaElem **controls, unsigned int controlCount) : diaElem(ELEM_CONFIG_MENU)
+	{
+		this->userConfigDir = userConfigDir;
+		this->systemConfigDir = systemConfigDir;
+
+		this->changedFunc = changedFunc;
+		this->serializeFunc = serializeFunc;
+
+		this->controls = controls;
+		this->controlCount = controlCount;
+	}
+
+	diaElemConfigMenu::~diaElemConfigMenu()
+	{
+		diaElemConfigMenuData *data = (diaElemConfigMenuData*)myWidget;
+
+		delete data->configs;
+		delete data;
+	}
+
+	void diaElemConfigMenu::setMe(void *dialog, void *opaque, uint32_t line)
+	{
+		GtkWidget *label = gtk_label_new_with_mnemonic(QT_TR_NOOP("Configuration:"));
+		gtk_misc_set_alignment(GTK_MISC(label), 0.0, 0.5);
+		gtk_widget_show(label);
+		gtk_table_attach(GTK_TABLE(opaque), label, 0, 1, line, line + 1, (GtkAttachOptions)(GTK_EXPAND | GTK_FILL), (GtkAttachOptions)0, 0, 0);
+
+		GtkComboBox *combo = GTK_COMBO_BOX(gtk_combo_box_new_text());
+		gtk_widget_show(GTK_WIDGET(combo));
+		gtk_label_set_mnemonic_widget(GTK_LABEL(label), GTK_WIDGET(combo));
+		gtk_table_attach(GTK_TABLE(opaque), GTK_WIDGET(combo), 1, 2, line, line + 1, (GtkAttachOptions)(GTK_EXPAND | GTK_FILL), (GtkAttachOptions)0, 0, 0);
+
+		GtkWidget *button1 = gtk_button_new_from_stock(QT_TR_NOOP("Save As"));
+		gtk_widget_show(button1);
+		gtk_table_attach(GTK_TABLE(opaque), button1, 2, 3, line, line + 1, (GtkAttachOptions)(GTK_EXPAND | GTK_FILL), (GtkAttachOptions)0, 0, 0);
+
+		GtkButton *button2 = GTK_BUTTON(gtk_button_new_from_stock(QT_TR_NOOP("Delete")));
+		gtk_widget_show(GTK_WIDGET(button2));
+		gtk_table_attach(GTK_TABLE(opaque), GTK_WIDGET(button2), 3, 4, line, line + 1, (GtkAttachOptions)(GTK_EXPAND | GTK_FILL), (GtkAttachOptions)0, 0, 0);
+
+		diaElemConfigMenuData *data = new diaElemConfigMenuData();
+
+		data->combo = combo;
+		data->deleteButton = button2;
+		data->configs = fillConfigurationComboBox(combo, this->userConfigDir, this->systemConfigDir);
+		data->controls = controls;
+		data->controlCount = controlCount;
+		data->userConfigDir = userConfigDir;
+		data->systemConfigDir = systemConfigDir;
+		data->changedFunc = changedFunc;
+		data->serializeFunc = serializeFunc;
+
+		myWidget = (void*)data;
+
+		g_signal_connect(GTK_OBJECT(button1), "clicked", G_CALLBACK(saveAsClicked), myWidget);
+		g_signal_connect(GTK_OBJECT(button2), "clicked", G_CALLBACK(deleteClicked), myWidget);
+		g_signal_connect(GTK_OBJECT(combo), "changed", G_CALLBACK(comboChanged), myWidget);
+	}
+
+	void diaElemConfigMenu::getMe(void)	{ }
+	void diaElemConfigMenu::enable(uint32_t onoff) { }
+	int diaElemConfigMenu::getRequiredLayout(void) { return 0; }
+	void diaElemConfigMenu::updateMe(void) { }
+}
+
+diaElem* gtkCreateConfigMenu(const char* userConfigDir, const char* systemConfigDir, CONFIG_MENU_CHANGED_T *changedFunc, 
+							 CONFIG_MENU_SERIALIZE_T *serializeFunc, diaElem **controls, unsigned int controlCount)
+{
+	return new ADM_GtkFactory::diaElemConfigMenu(userConfigDir, systemConfigDir, changedFunc, serializeFunc, controls, controlCount);
+}
+
+void gtkDestroyConfigMenu(diaElem *e)
+{
+	ADM_GtkFactory::diaElemConfigMenu *a = (ADM_GtkFactory::diaElemConfigMenu*)e;
+
+	delete a;
+}



From gruntster at mail.berlios.de  Sat Jul 25 18:10:07 2009
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Sat, 25 Jul 2009 18:10:07 +0200
Subject: [Avidemux-svn-commit] r5147 -
	branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec
Message-ID: <200907251610.n6PGA7dD009567@sheep.berlios.de>

Author: gruntster
Date: 2009-07-25 18:10:00 +0200 (Sat, 25 Jul 2009)
New Revision: 5147

Modified:
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/mpeg1Encoder.cpp
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/mpeg1Encoder.h
Log:
[mpeg1] add config menu control to plugin config window

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/mpeg1Encoder.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/mpeg1Encoder.cpp	2009-07-25 14:35:32 UTC (rev 5146)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/mpeg1Encoder.cpp	2009-07-25 16:10:00 UTC (rev 5147)
@@ -19,9 +19,14 @@
 #include "DIA_factory.h"
 
 extern int _uiType;
+static bool changedConfig(const char* fileName, ConfigMenuType configType);
+static char *serializeConfig(void);
+static Mpeg1Encoder *encoder = NULL;
 
 Mpeg1Encoder::Mpeg1Encoder(void)
 {
+	encoder = this;
+
 	init(CODEC_ID_MPEG1VIDEO, ADM_CSP_YV12);
 
 	_encodeOptions.structSize = sizeof(vidEncOptions);
@@ -76,20 +81,8 @@
 
 int Mpeg1Encoder::configure(vidEncConfigParameters *configParameters, vidEncVideoProperties *properties)
 {
-	unsigned int minBitrate = _options.getMinBitrate();
-	unsigned int maxBitrate = _options.getMaxBitrate();
-	unsigned int useXvidRateControl = _options.getXvidRateControl();
-	unsigned int bufferSize = _options.getBufferSize();
-	unsigned int widescreen = _options.getWidescreen();
-	unsigned int interlaced = _options.getInterlaced();
-	unsigned int userMatrix = _options.getMatrix();
-	unsigned int gopSize = _options.getGopSize();
+	loadSettings(&_encodeOptions, &_options);
 
-	_bitrateParam.avg_bitrate = 1000;
-	_bitrateParam.finalsize = 700;
-
-	updateEncodeProperties(properties);
-
 	diaMenuEntry wideM[] = {
 		{0, "4:3"},
 		{1, "16:9"}};
@@ -108,53 +101,128 @@
 	};
 
 	diaElemBitrate ctlBitrate(&_bitrateParam, NULL);
-	diaElemUInteger ctlMaxb(&maxBitrate, "Ma_x. bitrate:", 100, 9000);
-	diaElemUInteger ctlMinb(&minBitrate, "Mi_n. bitrate:", 0, 9000);
-	diaElemToggle ctlXvid(&useXvidRateControl, "_Use Xvid rate control");
-	diaElemUInteger ctlVbv(&bufferSize, "_Buffer size:", 1, 1024);
-	diaElemMenu ctlWidescreen(&widescreen, "Aspect _ratio:", 2, wideM);
-	diaElemMenu ctlMatrix(&userMatrix, "_Matrices:", 4, matrixM);
-	diaElemUInteger ctlGop(&gopSize, "_GOP size:", 1, 30);
-	diaElemMenu ctlInterW(&interlaced, "_Interlacing:", 3, interM);
+	diaElemUInteger ctlMaxb(&_maxBitrate, "Ma_x. bitrate:", 100, 9000);
+	diaElemUInteger ctlMinb(&_minBitrate, "Mi_n. bitrate:", 0, 9000);
+	diaElemToggle ctlXvid(&_useXvidRateControl, "_Use Xvid rate control");
+	diaElemUInteger ctlVbv(&_bufferSize, "_Buffer size:", 1, 1024);
+	diaElemMenu ctlWidescreen(&_widescreen, "Aspect _ratio:", 2, wideM);
+	diaElemMenu ctlMatrix(&_userMatrix, "_Matrices:", 4, matrixM);
+	diaElemUInteger ctlGop(&_gopSize, "_GOP size:", 1, 30);
+	diaElemMenu ctlInterW(&_interlaced, "_Interlacing:", 3, interM);
+	diaElem *elmGeneral[9]= {&ctlBitrate, &ctlMinb, &ctlMaxb, &ctlXvid, &ctlVbv, &ctlWidescreen, &ctlInterW, &ctlMatrix, &ctlGop};
 
-	diaElem *elems[9]= {&ctlBitrate, &ctlMinb, &ctlMaxb, &ctlXvid, &ctlVbv, &ctlWidescreen, &ctlInterW, &ctlMatrix, &ctlGop};
+	diaElemConfigMenu ctlConfigMenu(_options.getUserConfigDirectory(), _options.getSystemConfigDirectory(), changedConfig, serializeConfig, elmGeneral, 9);
+	diaElem *elmHeader[1] = {&ctlConfigMenu};
 
-	if (diaFactoryRun("avcodec MPEG-1 Configuration", 9, elems))
+	diaElemTabs tabGeneral("User Interface", 9, elmGeneral);
+	diaElemTabs *tabs[] = {&tabGeneral};
+
+	if (diaFactoryRunTabs("avcodec MPEG-1 Configuration", 1, elmHeader, 1, tabs))
 	{
-		switch (_bitrateParam.mode)
-		{
-			case COMPRESS_CQ:
-				_encodeOptions.encodeMode = ADM_VIDENC_MODE_CQP;
-				_encodeOptions.encodeModeParameter = _bitrateParam.qz;
+		saveSettings(&_encodeOptions, &_options);
 
-				break;
-			case COMPRESS_2PASS:
-				_encodeOptions.encodeMode = ADM_VIDENC_MODE_2PASS_SIZE;
-				_encodeOptions.encodeModeParameter = _bitrateParam.finalsize;
+		return 1;
+	}
 
-				break;
-			case COMPRESS_2PASS_BITRATE:
-				_encodeOptions.encodeMode = COMPRESS_2PASS_BITRATE;
-				_encodeOptions.encodeModeParameter = _bitrateParam.avg_bitrate;
+	return 0;
+}
 
-				break;
-		}
+void Mpeg1Encoder::loadSettings(vidEncOptions *encodeOptions, Mpeg1EncoderOptions *options)
+{
+	_minBitrate = options->getMinBitrate();
+	_maxBitrate = options->getMaxBitrate();
+	_useXvidRateControl = options->getXvidRateControl();
+	_bufferSize = options->getBufferSize();
+	_widescreen = options->getWidescreen();
+	_interlaced = options->getInterlaced();
+	_userMatrix = options->getMatrix();
+	_gopSize = options->getGopSize();
 
-		_options.setMinBitrate(minBitrate);
-		_options.setMaxBitrate(maxBitrate);
-		_options.setXvidRateControl(useXvidRateControl);
-		_options.setBufferSize(bufferSize);
-		_options.setWidescreen(widescreen);
-		_options.setInterlaced((InterlacedMode)interlaced);
-		_options.setMatrix((MatrixMode)userMatrix);
-		_options.setGopSize(gopSize);
+	_bitrateParam.qz = 1000;
+	_bitrateParam.finalsize = 700;
 
-		return 1;
+	updateEncodeProperties(encodeOptions, NULL);
+}
+
+void Mpeg1Encoder::saveSettings(vidEncOptions *encodeOptions, Mpeg1EncoderOptions *options)
+{
+	switch (_bitrateParam.mode)
+	{
+		case COMPRESS_CQ:
+			encodeOptions->encodeMode = ADM_VIDENC_MODE_CQP;
+			encodeOptions->encodeModeParameter = _bitrateParam.qz;
+
+			break;
+		case COMPRESS_2PASS:
+			encodeOptions->encodeMode = ADM_VIDENC_MODE_2PASS_SIZE;
+			encodeOptions->encodeModeParameter = _bitrateParam.finalsize;
+
+			break;
+		case COMPRESS_2PASS_BITRATE:
+			encodeOptions->encodeMode = COMPRESS_2PASS_BITRATE;
+			encodeOptions->encodeModeParameter = _bitrateParam.avg_bitrate;
+
+			break;
 	}
 
-	return 0;
+	options->setMinBitrate(_minBitrate);
+	options->setMaxBitrate(_maxBitrate);
+	options->setXvidRateControl(_useXvidRateControl);
+	options->setBufferSize(_bufferSize);
+	options->setWidescreen(_widescreen);
+	options->setInterlaced((InterlacedMode)_interlaced);
+	options->setMatrix((MatrixMode)_userMatrix);
+	options->setGopSize(_gopSize);
 }
 
+bool changedConfig(const char* configName, ConfigMenuType configType)
+{
+	bool failure = false;
+
+	if (configType == CONFIG_MENU_DEFAULT)
+	{
+		Mpeg1EncoderOptions defaultOptions;
+		vidEncOptions *defaultEncodeOptions = defaultOptions.getEncodeOptions();
+
+		encoder->loadSettings(defaultEncodeOptions, &defaultOptions);
+
+		delete defaultEncodeOptions;
+	}
+	else if (configType != CONFIG_MENU_CUSTOM)
+	{
+		Mpeg1EncoderOptions options;
+		vidEncOptions *encodeOptions;
+
+		options.setPresetConfiguration(configName, (PluginConfigType)configType);
+
+		if (options.loadPresetConfiguration())
+		{
+			encodeOptions = options.getEncodeOptions();
+
+			encoder->loadSettings(encodeOptions, &options);
+
+			delete encodeOptions;
+		}
+		else
+		{
+			failure = true;
+		}
+	}
+
+	return !failure;
+}
+
+char *serializeConfig(void)
+{
+	vidEncOptions encodeOptions;
+	Mpeg1EncoderOptions options;
+
+	encoder->saveSettings(&encodeOptions, &options);
+	options.setEncodeOptions(&encodeOptions);
+
+	return options.toXml(PLUGIN_XML_EXTERNAL);
+}
+
 int Mpeg1Encoder::getOptions(vidEncOptions *encodeOptions, char *pluginOptions, int bufferSize)
 {
 	char* xml = _options.toXml(PLUGIN_XML_INTERNAL);
@@ -190,7 +258,7 @@
 	if (encodeOptions && success)
 	{
 		memcpy(&_encodeOptions, encodeOptions, sizeof(vidEncOptions));
-		updateEncodeProperties(NULL);
+		updateEncodeProperties(encodeOptions, NULL);
 	}
 
 	if (success)
@@ -214,22 +282,22 @@
 	return ret;
 }
 
-void Mpeg1Encoder::updateEncodeProperties(vidEncVideoProperties *properties)
+void Mpeg1Encoder::updateEncodeProperties(vidEncOptions *encodeOptions, vidEncVideoProperties *properties)
 {
-	switch (_encodeOptions.encodeMode)
+	switch (encodeOptions->encodeMode)
 	{
 		case ADM_VIDENC_MODE_CQP:
 			_passCount = 1;
 
 			_bitrateParam.mode = COMPRESS_CQ;
-			_bitrateParam.qz = _encodeOptions.encodeModeParameter;
+			_bitrateParam.qz = encodeOptions->encodeModeParameter;
 
 			break;
 		case ADM_VIDENC_MODE_2PASS_SIZE:
 			_passCount = 2;
 
 			_bitrateParam.mode = COMPRESS_2PASS;
-			_bitrateParam.finalsize = _encodeOptions.encodeModeParameter;
+			_bitrateParam.finalsize = encodeOptions->encodeModeParameter;
 
 			//if (properties)
 				//bitrateParam->bitrate = calculateBitrate(properties->fpsNum, properties->fpsDen, properties->frameCount, _encodeOptions.encodeModeParameter) / 1000;					
@@ -241,7 +309,7 @@
 			_passCount = 2;
 
 			_bitrateParam.mode = COMPRESS_2PASS_BITRATE;
-			_bitrateParam.avg_bitrate = _encodeOptions.encodeModeParameter;
+			_bitrateParam.avg_bitrate = encodeOptions->encodeModeParameter;
 
 			break;
 	}

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/mpeg1Encoder.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/mpeg1Encoder.h	2009-07-25 14:35:32 UTC (rev 5146)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/mpeg1Encoder.h	2009-07-25 16:10:00 UTC (rev 5147)
@@ -31,10 +31,12 @@
 {
 	private:
 		COMPRES_PARAMS _bitrateParam;
+		unsigned int _minBitrate, _maxBitrate, _useXvidRateControl, _bufferSize, _widescreen, _interlaced, _userMatrix, _gopSize;
+
 		Mpeg1EncoderOptions _options;
 		vidEncOptions _encodeOptions;
 
-		void updateEncodeProperties(vidEncVideoProperties *properties);
+		void updateEncodeProperties(vidEncOptions *encodeOptions, vidEncVideoProperties *properties);
 		unsigned int calculateBitrate(unsigned int fpsNum, unsigned int fpsDen, unsigned int frameCount, unsigned int sizeInMb);
 
 	public:
@@ -46,6 +48,8 @@
 		const char* getEncoderGuid(void);
 		int isConfigurable(void);
 		int configure(vidEncConfigParameters *configParameters, vidEncVideoProperties *properties);
+		void loadSettings(vidEncOptions *encodeOptions, Mpeg1EncoderOptions *options);
+		void saveSettings(vidEncOptions *encodeOptions, Mpeg1EncoderOptions *options);
 		int getOptions(vidEncOptions *encodeOptions, char *pluginOptions, int bufferSize);
 		int setOptions(vidEncOptions *encodeOptions, char *pluginOptions);
 		int beginPass(vidEncPassParameters *passParameters);



From mean at mail.berlios.de  Sat Jul 25 18:38:55 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sat, 25 Jul 2009 18:38:55 +0200
Subject: [Avidemux-svn-commit] r5148 - in
	branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces:
	ADM_dialog ADM_gui
Message-ID: <200907251638.n6PGctXv018831@sheep.berlios.de>

Author: mean
Date: 2009-07-25 18:38:54 +0200 (Sat, 25 Jul 2009)
New Revision: 5148

Modified:
   branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_dialog/Q_jobs.cpp
   branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_gui/ADM_qslider.cpp
Log:
[qt4] mingw/gcc 4.4 fixes

Modified: branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_dialog/Q_jobs.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_dialog/Q_jobs.cpp	2009-07-25 16:10:00 UTC (rev 5147)
+++ branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_dialog/Q_jobs.cpp	2009-07-25 16:38:54 UTC (rev 5148)
@@ -2,7 +2,8 @@
     Jobs dialog
     (c) Mean 2007
 */
-
+#include <stdio.h>
+#include <stdlib.h>
 #include "Q_jobs.h"
 #include "DIA_coreToolkit.h"
 

Modified: branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_gui/ADM_qslider.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_gui/ADM_qslider.cpp	2009-07-25 16:10:00 UTC (rev 5147)
+++ branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_gui/ADM_qslider.cpp	2009-07-25 16:38:54 UTC (rev 5148)
@@ -11,10 +11,11 @@
 *   (at your option) any later version.                                   *
 *                                                                         *
 ***************************************************************************/
+#include <stdio.h>
+#include <stdlib.h>
 
 #include <QtGui/QPainter>
 #include <QtGui/QSlider>
-
 #include "ADM_qslider.h"
 
 ADM_QSlider::ADM_QSlider(QWidget *parent) : QSlider(parent)



From gruntster at mail.berlios.de  Sat Jul 25 18:43:36 2009
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Sat, 25 Jul 2009 18:43:36 +0200
Subject: [Avidemux-svn-commit] r5149 -
	branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_GTK/src
Message-ID: <200907251643.n6PGhaPS023070@sheep.berlios.de>

Author: gruntster
Date: 2009-07-25 18:43:31 +0200 (Sat, 25 Jul 2009)
New Revision: 5149

Modified:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_GTK/src/FAC_bitrate.cpp
Log:
[dlgFactory] make updateMe method of GTK bitrate control work

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_GTK/src/FAC_bitrate.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_GTK/src/FAC_bitrate.cpp	2009-07-25 16:38:54 UTC (rev 5148)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_GTK/src/FAC_bitrate.cpp	2009-07-25 16:43:31 UTC (rev 5149)
@@ -61,6 +61,29 @@
 	return mode;
 }
 
+static void updatePulldown(COMPRES_PARAMS *copy, GtkComboBox *combo)
+{
+	int index = 0, set = -1;
+
+#undef LOOKUP
+#define LOOKUP(A,B) \
+	if(copy->capabilities & ADM_ENC_CAP_##A) \
+	{ \
+		if (copy->mode == COMPRESS_##B) set = index; \
+			index++; \
+	} \
+
+	LOOKUP(CBR, CBR);
+	LOOKUP(CQ, CQ);
+	LOOKUP(SAME, SAME);
+	LOOKUP(AQ, AQ);
+	LOOKUP(2PASS, 2PASS);
+	LOOKUP(2PASS_BR, 2PASS_BITRATE);
+
+	if (set != -1)
+		gtk_combo_box_set_active(combo, set);
+}
+
  diaElemBitrate::diaElemBitrate(COMPRES_PARAMS *p,const char *toggleTitle,const char *tip)
   : diaElemBitrateBase()
 {
@@ -175,26 +198,10 @@
   w[3]=spin;
   myWidget=(void *)w;
   
-  int index=0,set=-1;
-#undef LOOKUP
-#define LOOKUP(A,B) \
-  if(copy.capabilities & ADM_ENC_CAP_##A) \
-  { \
-	  if(copy.mode==COMPRESS_##B) set=index; \
-	  index++; \
-  } \
-  
-  LOOKUP(CBR,CBR);
-  LOOKUP(CQ,CQ);
-  LOOKUP(SAME,SAME);
-  LOOKUP(AQ,AQ);
-  LOOKUP(2PASS,2PASS);
-  LOOKUP(2PASS_BR,2PASS_BITRATE);
-  if(set!=-1) gtk_combo_box_set_active(GTK_COMBO_BOX(combo),set);
+  updatePulldown(&copy, GTK_COMBO_BOX(combo));
 }
 
 
-
 void diaElemBitrate::getMe(void)
 {
   
@@ -262,43 +269,45 @@
 
 void diaElemBitrate::updateMe(void)
 {
+  memcpy(&copy, param, sizeof(copy));
+
   // Read current value
   GtkWidget **w=(GtkWidget **)myWidget;
   GtkComboBox *combo=(GtkComboBox *)w[2];
   GtkSpinButton *spin=(GtkSpinButton*)w[3];
   GtkLabel *label=(GtkLabel*)w[1];
-  int rank=gtk_combo_box_get_active(GTK_COMBO_BOX(combo));
-  COMPRESSION_MODE mode=readPulldown(&copy,rank);
-  
-//#undef P
+  int index = 0, set = 0;
+
 #undef M
 #undef S
-//#define P(x) gtk_label_set_text_with_mnemonic(GTK_LABEL(label),QT_TR_NOOP(#x));
 #define M(x,y) gtk_spin_button_set_range  (GTK_SPIN_BUTTON(spin),x,y)
 #define S(x)   gtk_spin_button_set_value  (GTK_SPIN_BUTTON(spin),x)
-  switch(mode)
+
+  updatePulldown(&copy, GTK_COMBO_BOX(combo));
+
+  switch (copy.mode)
   {
-    case COMPRESS_CBR: //CBR
+    case COMPRESS_CBR:
           gtk_label_set_text_with_mnemonic(GTK_LABEL(label),QT_TR_NOOP("_Bitrate (kb/s):"));
           M(0,20000);
           S(copy.bitrate);
           break; 
-    case COMPRESS_CQ:// CQ
+    case COMPRESS_CQ:
           gtk_label_set_text_with_mnemonic(GTK_LABEL(label),QT_TR_NOOP("_Quantizer:"));
           M(minQ,maxQ);
           S(copy.qz);
           break;
-    case COMPRESS_AQ:// CQ
-              gtk_label_set_text_with_mnemonic(GTK_LABEL(label),QT_TR_NOOP("A_vg Quantizer:"));
-              M(2,64);
-              S(copy.qz);
-              break;
-    case COMPRESS_2PASS : // 2pass Filesize
+    case COMPRESS_AQ:
+          gtk_label_set_text_with_mnemonic(GTK_LABEL(label),QT_TR_NOOP("A_vg Quantizer:"));
+          M(2,64);
+          S(copy.qz);
+          break;
+    case COMPRESS_2PASS:
           gtk_label_set_text_with_mnemonic(GTK_LABEL(label),QT_TR_NOOP("_Video size (MB):"));
           M(1,8000);
           S(copy.finalsize);
           break;
-    case COMPRESS_2PASS_BITRATE : // 2pass Avg
+    case COMPRESS_2PASS_BITRATE:
           gtk_label_set_text_with_mnemonic(GTK_LABEL(label),QT_TR_NOOP("_Average bitrate (kb/s):"));
           M(0,20000);
           S(copy.avg_bitrate);



From gruntster at mail.berlios.de  Sat Jul 25 18:53:18 2009
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Sat, 25 Jul 2009 18:53:18 +0200
Subject: [Avidemux-svn-commit] r5150 -
	branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_GTK/src
Message-ID: <200907251653.n6PGrIme030105@sheep.berlios.de>

Author: gruntster
Date: 2009-07-25 18:53:04 +0200 (Sat, 25 Jul 2009)
New Revision: 5150

Modified:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_GTK/src/FAC_toggle.cpp
Log:
[dlgFactory] make updateMe method of GTK toggle control work

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_GTK/src/FAC_toggle.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_GTK/src/FAC_toggle.cpp	2009-07-25 16:43:31 UTC (rev 5149)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_GTK/src/FAC_toggle.cpp	2009-07-25 16:53:04 UTC (rev 5150)
@@ -127,10 +127,6 @@
 }
 void   diaElemToggle::finalize(void)
 {
-  updateMe(); 
-}
-void   diaElemToggle::updateMe(void)
-{
   GtkWidget *widget=(GtkWidget *)myWidget;
   uint32_t val;
   uint32_t rank;
@@ -154,6 +150,14 @@
       if(l->onoff==rank)  l->widget->enable(1);
   }
 }
+void diaElemToggle::updateMe(void)
+{
+	GtkWidget *widget = (GtkWidget *)myWidget;
+
+	gtk_toggle_button_set_active(GTK_TOGGLE_BUTTON(myWidget), *(int32_t *)param);
+	this->finalize();
+}
+
 void   diaElemToggle::enable(uint32_t onoff)
 {
   gtk_widget_set_sensitive(GTK_WIDGET(myWidget),onoff);  
@@ -165,7 +169,7 @@
 void cb_menu(void *w,void *p)
 {
   diaElemToggle *me=(diaElemToggle *)p;
-  me->updateMe();
+  me->finalize();
 }
 //*************************************************************************
 diaElemToggleUint::diaElemToggleUint(uint32_t *toggleValue,const char *toggleTitle, uint32_t *uintval, const char *name,uint32_t min,uint32_t max,const char *tip)
@@ -232,21 +236,24 @@
 }
 void   diaElemToggleUint::finalize(void)
 {
-  updateMe();
-}
-void   diaElemToggleUint::updateMe(void)
-{
   GtkWidget *widget=(GtkWidget *)myWidget;
   GtkWidget *wuint=(GtkWidget *)widgetUint;
   uint32_t val;
   uint32_t rank;
   ADM_assert(widget);
   
-  
   rank=gtk_toggle_button_get_active (GTK_TOGGLE_BUTTON (widget));
   gtk_widget_set_sensitive(GTK_WIDGET(wuint),rank);
-    
 }
+
+void   diaElemToggleUint::updateMe(void)
+{
+	GtkWidget *widget = (GtkWidget *)myWidget;
+
+	gtk_toggle_button_set_active(GTK_TOGGLE_BUTTON(myWidget), *(uint32_t *)param);
+	this->finalize();
+}
+
 void   diaElemToggleUint::enable(uint32_t onoff)
 {
    GtkWidget *widget=(GtkWidget *)myWidget;
@@ -262,7 +269,7 @@
 void cb_menu2(void *w,void *p)
 {
   diaElemToggleUint *me=(diaElemToggleUint *)p;
-  me->updateMe();
+  me->finalize();
 }
 //*************************************************************************
 diaElemToggleInt::diaElemToggleInt(uint32_t *toggleValue,const char *toggleTitle, int32_t *uintval, const char *name,int32_t min,int32_t max,const char *tip)



From gruntster at mail.berlios.de  Sat Jul 25 19:00:16 2009
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Sat, 25 Jul 2009 19:00:16 +0200
Subject: [Avidemux-svn-commit] r5151 -
	branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_GTK/src
Message-ID: <200907251700.n6PH0G8M005697@sheep.berlios.de>

Author: gruntster
Date: 2009-07-25 19:00:11 +0200 (Sat, 25 Jul 2009)
New Revision: 5151

Modified:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_GTK/src/FAC_configMenu.cpp
Log:
[dlgFactory] fix default profile support of GTK config menu control

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_GTK/src/FAC_configMenu.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_GTK/src/FAC_configMenu.cpp	2009-07-25 16:53:04 UTC (rev 5150)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_GTK/src/FAC_configMenu.cpp	2009-07-25 17:00:11 UTC (rev 5151)
@@ -84,6 +84,9 @@
 		for (map<string, int>::iterator it = configs->begin(); it != configs->end(); it++)
 			gtk_combo_box_append_text(combo, it->first.c_str());
 
+		configs->insert(pair<string, ConfigMenuType>(string(QT_TR_NOOP("<default>")), CONFIG_MENU_DEFAULT));
+		configs->insert(pair<string, ConfigMenuType>(string(QT_TR_NOOP("<custom>")), CONFIG_MENU_CUSTOM));
+
 		gtk_combo_box_set_active(combo, 0);
 
 		return configs;



From gruntster at mail.berlios.de  Sat Jul 25 19:15:35 2009
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Sat, 25 Jul 2009 19:15:35 +0200
Subject: [Avidemux-svn-commit] r5152 -
	branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_GTK/src
Message-ID: <200907251715.n6PHFZQh022914@sheep.berlios.de>

Author: gruntster
Date: 2009-07-25 19:15:24 +0200 (Sat, 25 Jul 2009)
New Revision: 5152

Modified:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_GTK/src/FAC_configMenu.cpp
Log:
[dlgFactory] fix crashing when saving profile using GTK config menu control

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_GTK/src/FAC_configMenu.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_GTK/src/FAC_configMenu.cpp	2009-07-25 17:00:11 UTC (rev 5151)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_GTK/src/FAC_configMenu.cpp	2009-07-25 17:15:24 UTC (rev 5152)
@@ -108,7 +108,7 @@
 			char *config;
 			int index = 0;
 
-			if (gtk_tree_model_get_iter_first(model, &iter))
+			if (gtk_tree_model_get_iter_first(model, &iter) && selectFile)
 			{
 				do
 				{
@@ -201,17 +201,21 @@
 	{
 		diaElemConfigMenuData *menuData = (diaElemConfigMenuData*)data;
 		const char* selectedConfig = gtk_combo_box_get_active_text(menuData->combo);
-		map<string, int>::iterator it = menuData->configs->find(string((selectedConfig)));
 
-		gtk_widget_set_sensitive(GTK_WIDGET(menuData->deleteButton), it->second == CONFIG_MENU_USER);
-
-		if (menuData->changedFunc)
+		if (selectedConfig)
 		{
-			if (!menuData->changedFunc(selectedConfig, (ConfigMenuType)it->second))
-				gtk_combo_box_set_active(menuData->combo, 0);
+			map<string, int>::iterator it = menuData->configs->find(string((selectedConfig)));
 
-			for (int i = 0; i < menuData->controlCount; i++)
-				menuData->controls[i]->updateMe();
+			gtk_widget_set_sensitive(GTK_WIDGET(menuData->deleteButton), it->second == CONFIG_MENU_USER);
+
+			if (menuData->changedFunc)
+			{
+				if (!menuData->changedFunc(selectedConfig, (ConfigMenuType)it->second))
+					gtk_combo_box_set_active(menuData->combo, 0);
+
+				for (int i = 0; i < menuData->controlCount; i++)
+					menuData->controls[i]->updateMe();
+			}
 		}
 	}
 



From gruntster at mail.berlios.de  Sat Jul 25 22:56:16 2009
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Sat, 25 Jul 2009 22:56:16 +0200
Subject: [Avidemux-svn-commit] r5153 -
	branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src
Message-ID: <200907252056.n6PKuGRm021757@sheep.berlios.de>

Author: gruntster
Date: 2009-07-25 22:56:11 +0200 (Sat, 25 Jul 2009)
New Revision: 5153

Modified:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/T_toggle.cpp
Log:
[dlgFactory] make updateMe method of Qt toggle control work

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/T_toggle.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/T_toggle.cpp	2009-07-25 17:15:24 UTC (rev 5152)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/T_toggle.cpp	2009-07-25 20:56:11 UTC (rev 5153)
@@ -82,11 +82,11 @@
 	switch(_type)
 	{
 		case TT_TOGGLE:
-			((diaElemToggle *)_toggle)->updateMe();break;
+			((diaElemToggle *)_toggle)->finalize();break;
 		case TT_TOGGLE_UINT:
-			((diaElemToggleUint *)_toggle)->updateMe();break;
+			((diaElemToggleUint *)_toggle)->finalize();break;
 		case TT_TOGGLE_INT:
-			((diaElemToggleInt *)_toggle)->updateMe();break;
+			((diaElemToggleInt *)_toggle)->finalize();break;
 		default:
 			ADM_assert(0);
 	}
@@ -156,12 +156,7 @@
 
 void   diaElemToggle::finalize(void)
 {
-  updateMe(); 
-}
-void   diaElemToggle::updateMe(void)
-{
- 
-  uint32_t val;
+uint32_t val;
   uint32_t rank=0;
   if(!nbLink) return;
   ADM_assert(myWidget);
@@ -188,6 +183,18 @@
   }
 }
 
+void   diaElemToggle::updateMe(void)
+{
+	ADM_QCheckBox *box = (ADM_QCheckBox *)myWidget;
+
+	if( *(uint32_t *)param)
+		box->setCheckState(Qt::Checked);
+	else
+		box->setCheckState(Qt::Unchecked);
+
+	this->finalize();
+}
+
 uint8_t   diaElemToggle::link(uint32_t onoff,diaElem *w)
 {
     ADM_assert(nbLink<MENU_MAX_lINK);



From mean at mail.berlios.de  Sun Jul 26 09:13:10 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sun, 26 Jul 2009 09:13:10 +0200
Subject: [Avidemux-svn-commit] r5154 -
	branches/avidemux_2.5_branch_gruntster/po
Message-ID: <200907260713.n6Q7DAPc016856@sheep.berlios.de>

Author: mean
Date: 2009-07-26 09:13:08 +0200 (Sun, 26 Jul 2009)
New Revision: 5154

Modified:
   branches/avidemux_2.5_branch_gruntster/po/avidemux_zh_TW.ts
   branches/avidemux_2.5_branch_gruntster/po/zh_TW.po
Log:
[po] Traditional Chinese update by Dong-Jun Wu

Modified: branches/avidemux_2.5_branch_gruntster/po/avidemux_zh_TW.ts
===================================================================
--- branches/avidemux_2.5_branch_gruntster/po/avidemux_zh_TW.ts	2009-07-25 20:56:11 UTC (rev 5153)
+++ branches/avidemux_2.5_branch_gruntster/po/avidemux_zh_TW.ts	2009-07-26 07:13:08 UTC (rev 5154)
@@ -9,7 +9,7 @@
     </message>
     <message>
         <source>Joint stereo</source>
-        <translation>?????</translation>
+        <translation type="obsolete">?????</translation>
     </message>
     <message>
         <source>Mono</source>
@@ -17,27 +17,27 @@
     </message>
     <message>
         <source>C_hannel mode:</source>
-        <translation>????(_H):</translation>
+        <translation type="obsolete">????(_H):</translation>
     </message>
     <message>
         <source>CBR</source>
-        <translation>CBR</translation>
+        <translation type="obsolete">CBR</translation>
     </message>
     <message>
         <source>ABR</source>
-        <translation>ABR</translation>
+        <translation type="obsolete">ABR</translation>
     </message>
     <message>
         <source>Extreme</source>
-        <translation>??</translation>
+        <translation type="obsolete">??</translation>
     </message>
     <message>
         <source>Bit_rate mode:</source>
-        <translation>?????(_R):</translation>
+        <translation type="obsolete">?????(_R):</translation>
     </message>
     <message>
         <source>_Bitrate:</source>
-        <translation>???(_B):</translation>
+        <translation type="obsolete">???(_B):</translation>
     </message>
     <message>
         <source>_Quality:</source>
@@ -45,27 +45,27 @@
     </message>
     <message>
         <source>_Disable reservoir</source>
-        <translation>?????(_D)</translation>
+        <translation type="obsolete">?????(_D)</translation>
     </message>
     <message>
         <source>LAME Configuration</source>
-        <translation>LAME ??</translation>
+        <translation type="obsolete">LAME ??</translation>
     </message>
     <message>
         <source>VBR</source>
-        <translation>VBR</translation>
+        <translation type="obsolete">VBR</translation>
     </message>
     <message>
         <source>Quality based</source>
-        <translation>????</translation>
+        <translation type="obsolete">????</translation>
     </message>
     <message>
         <source>_Mode:</source>
-        <translation>??(_M):</translation>
+        <translation type="obsolete">??(_M):</translation>
     </message>
     <message>
         <source>Vorbis Configuration</source>
-        <translation>Vorbis ??</translation>
+        <translation type="obsolete">Vorbis ??</translation>
     </message>
     <message>
         <source>Codec Error</source>
@@ -74,12 +74,12 @@
     <message>
         <source>The number of channels is greater than what the selected audio codec can do.
 Either change codec or use the mixer filter to have less channels.</source>
-        <translation>??????????????????????
-????????????????????????</translation>
+        <translation>????????????????????
+????????????????????????</translation>
     </message>
     <message>
         <source>Encoder initialization failed</source>
-        <translation>????????</translation>
+        <translation type="obsolete">????????</translation>
     </message>
     <message>
         <source>Not activated.</source>
@@ -87,7 +87,7 @@
     </message>
     <message>
         <source>Internal error finding codec &apos;&apos;</source>
-        <translation>???????????? &apos;&apos;</translation>
+        <translation type="obsolete">???????????? &apos;&apos;</translation>
     </message>
     <message>
         <source>Internal error opening codec</source>
@@ -96,8 +96,8 @@
     <message>
         <source>Internal error with context for  codec.
  Did you use too low / too high target for 2 pass ?</source>
-        <translation>????????????????
-???????????/????? ?</translation>
+        <translation>?????????????
+???????/?????????? ?</translation>
     </message>
     <message>
         <source>Avidemux detected VBR MP3 audio in this file. For keeping audio/video in sync, time map is needed. Build it now?
@@ -177,7 +177,7 @@
     </message>
     <message>
         <source>DV (lavc)</source>
-        <translation>DV (lavc)</translation>
+        <translation type="obsolete">DV (lavc)</translation>
     </message>
     <message>
         <source>FLV1 (lavc)</source>
@@ -185,19 +185,19 @@
     </message>
     <message>
         <source>Snow (lavc)</source>
-        <translation>Snow (lavc)</translation>
+        <translation type="obsolete">Snow (lavc)</translation>
     </message>
     <message>
         <source>FF Huffyuv (lavc)</source>
-        <translation>FF Huffyuv (lavc)</translation>
+        <translation type="obsolete">FF Huffyuv (lavc)</translation>
     </message>
     <message>
         <source>Huffyuv (lavc)</source>
-        <translation>Huffyuv (lavc)</translation>
+        <translation type="obsolete">Huffyuv (lavc)</translation>
     </message>
     <message>
         <source>FFV1 (lavc)</source>
-        <translation>FFV1 (lavc)</translation>
+        <translation type="obsolete">FFV1 (lavc)</translation>
     </message>
     <message>
         <source>MJPEG (lavc)</source>
@@ -205,7 +205,7 @@
     </message>
     <message>
         <source>Y800 (lavc)</source>
-        <translation>Y800 (lavc)</translation>
+        <translation type="obsolete">Y800 (lavc)</translation>
     </message>
     <message>
         <source>VCD (lavc)</source>
@@ -237,11 +237,11 @@
     </message>
     <message>
         <source>MPEG-4 ASP (Xvid4)</source>
-        <translation>MPEG-4 ASP (Xvid4)</translation>
+        <translation type="obsolete">MPEG-4 ASP (Xvid4)</translation>
     </message>
     <message>
         <source>MPEG-4 AVC (x264)</source>
-        <translation>MPEG-4 AVC (x264)</translation>
+        <translation type="obsolete">MPEG-4 AVC (x264)</translation>
     </message>
     <message>
         <source>dummy</source>
@@ -253,19 +253,19 @@
     </message>
     <message>
         <source>Wrong output format</source>
-        <translation>???????</translation>
+        <translation type="obsolete">???????</translation>
     </message>
     <message>
         <source>Select MPEG as the output.</source>
-        <translation>?? MPEG ?????</translation>
+        <translation type="obsolete">?? MPEG ?????</translation>
     </message>
     <message>
         <source>Wrong video codec</source>
-        <translation>?????????</translation>
+        <translation type="obsolete">?????????</translation>
     </message>
     <message>
         <source>Select DVD as the video codec for MPEG TS output.</source>
-        <translation>?? DVD ?? MPEG TS ??????????</translation>
+        <translation type="obsolete">?? DVD ?? MPEG TS ??????????</translation>
     </message>
     <message>
         <source>Only QCIF and subQCIF are allowed for H.263</source>
@@ -273,499 +273,499 @@
     </message>
     <message>
         <source>Fatal error</source>
-        <translation>????</translation>
+        <translation type="obsolete">????</translation>
     </message>
     <message>
         <source>Crop</source>
-        <translation>??</translation>
+        <translation type="obsolete">??</translation>
     </message>
     <message>
         <source>Remove lines from top/bottom/left/right.</source>
-        <translation>???/??/??/??????</translation>
+        <translation type="obsolete">???/??/??/??????</translation>
     </message>
     <message>
         <source>MPlayer resize</source>
-        <translation>MPlayer ????</translation>
+        <translation type="obsolete">MPlayer ????</translation>
     </message>
     <message>
         <source>Change image size. Faster than Avisynth&apos;s Resize.</source>
-        <translation>???????? Avisynth ???????</translation>
+        <translation type="obsolete">???????? Avisynth ???????</translation>
     </message>
     <message>
         <source>Resize</source>
-        <translation>????</translation>
+        <translation type="obsolete">????</translation>
     </message>
     <message>
         <source>Picture resizer ported from Avisynth.</source>
-        <translation>? Avisynth ???????????</translation>
+        <translation type="obsolete">? Avisynth ???????????</translation>
     </message>
     <message>
         <source>Add black borders</source>
-        <translation>??</translation>
+        <translation type="obsolete">??</translation>
     </message>
     <message>
         <source>Add pure black border(s). Enlarges the picture.</source>
-        <translation>????????????</translation>
+        <translation type="obsolete">????????????</translation>
     </message>
     <message>
         <source>Blacken borders</source>
-        <translation>????</translation>
+        <translation type="obsolete">????</translation>
     </message>
     <message>
         <source>Fill borders with pure black. Doesn&apos;t alter size.</source>
-        <translation>??????????????</translation>
+        <translation type="obsolete">??????????????</translation>
     </message>
     <message>
         <source>Vertical flip</source>
-        <translation>????</translation>
+        <translation type="obsolete">????</translation>
     </message>
     <message>
         <source>Vertically flip the picture.</source>
-        <translation>???????</translation>
+        <translation type="obsolete">???????</translation>
     </message>
     <message>
         <source>Rotate</source>
-        <translation>??</translation>
+        <translation type="obsolete">??</translation>
     </message>
     <message>
         <source>Rotate the picture by 90, 180 or 270 degrees.</source>
-        <translation>???? 90?180 ? 270 ??</translation>
+        <translation type="obsolete">???? 90?180 ? 270 ??</translation>
     </message>
     <message>
         <source>Resample fps</source>
-        <translation>???? fps</translation>
+        <translation type="obsolete">???? fps</translation>
     </message>
     <message>
         <source>Change framerate while keeping duration.</source>
-        <translation>?????????????</translation>
+        <translation type="obsolete">?????????????</translation>
     </message>
     <message>
         <source>Reverse</source>
-        <translation>??</translation>
+        <translation type="obsolete">??</translation>
     </message>
     <message>
         <source>Play video backward.</source>
-        <translation>???????</translation>
+        <translation type="obsolete">???????</translation>
     </message>
     <message>
         <source>Fade</source>
-        <translation>??</translation>
+        <translation type="obsolete">??</translation>
     </message>
     <message>
         <source>Fade in/out.</source>
-        <translation>??/??</translation>
+        <translation type="obsolete">??/??</translation>
     </message>
     <message>
         <source>yadif</source>
-        <translation>yadif</translation>
+        <translation type="obsolete">yadif</translation>
     </message>
     <message>
         <source>Yet Another DeInterlacer. Ported from MPlayer.</source>
-        <translation>? MPlayer ???????????</translation>
+        <translation type="obsolete">????????? MPlayer ?????</translation>
     </message>
     <message>
         <source>mcDeinterlace</source>
-        <translation>mcDeinterlace</translation>
+        <translation type="obsolete">mcDeinterlace</translation>
     </message>
     <message>
         <source>Motion compensation deinterlacer. Ported from MPlayer.</source>
-        <translation>? MPlayer ????????????</translation>
+        <translation type="obsolete">? MPlayer ????????????</translation>
     </message>
     <message>
         <source>Deinterlace</source>
-        <translation>Deinterlace</translation>
+        <translation type="obsolete">Deinterlace</translation>
     </message>
     <message>
         <source>Mask interlacing artifacts. Port of Smart deinterlace.</source>
-        <translation>?????????????????</translation>
+        <translation type="obsolete">?????????????????</translation>
     </message>
     <message>
         <source>KernelDeint</source>
-        <translation>KernelDeint</translation>
+        <translation type="obsolete">KernelDeint</translation>
     </message>
     <message>
         <source>Kernel deinterlacer by Donald Graft.</source>
-        <translation>?????????? Donald Graft?</translation>
+        <translation type="obsolete">?????????? Donald Graft?</translation>
     </message>
     <message>
         <source>TDeint</source>
-        <translation>TDeint</translation>
+        <translation type="obsolete">TDeint</translation>
     </message>
     <message>
         <source>Motion adaptative deinterlacer by Tritical.</source>
-        <translation>???????????? Tritical?</translation>
+        <translation type="obsolete">???????????? Tritical?</translation>
     </message>
     <message>
         <source>libavcodec deinterlacer</source>
-        <translation>libavcodec ????</translation>
+        <translation type="obsolete">libavcodec ????</translation>
     </message>
     <message>
         <source>All FFmpeg deinterlace filters (bicubic, median, ...).</source>
-        <translation>?? FFmpeg ????? (????????...)?</translation>
+        <translation type="obsolete">?? FFmpeg ????? (????????...)?</translation>
     </message>
     <message>
         <source>Decomb Telecide</source>
-        <translation>??????????</translation>
+        <translation type="obsolete">??????????</translation>
     </message>
     <message>
         <source>Great deinterlacing package including IVTC.</source>
-        <translation>???? IVTC ???????</translation>
+        <translation type="obsolete">???? IVTC ???????</translation>
     </message>
     <message>
         <source>Decomb Decimate</source>
-        <translation>Decomb ?????</translation>
+        <translation type="obsolete">Decomb ?????</translation>
     </message>
     <message>
         <source>Useful to remove dupes left by Telecide.</source>
-        <translation>?????????????</translation>
+        <translation type="obsolete">?????????????</translation>
     </message>
     <message>
         <source>Pulldown</source>
-        <translation>Pulldown</translation>
+        <translation type="obsolete">Pulldown</translation>
     </message>
     <message>
         <source>Convert 24 fps to 30 fps by repeating fields.</source>
-        <translation>??????? 24 fps ?? 30 fps?</translation>
+        <translation type="obsolete">??????? 24 fps ?? 30 fps?</translation>
     </message>
     <message>
         <source>Bobber - convert each field into a full sized frame.</source>
-        <translation>Bobber - ??????????????????</translation>
+        <translation type="obsolete">Bobber - ??????????????????</translation>
     </message>
     <message>
         <source>PAL field shift</source>
-        <translation>PAL ????</translation>
+        <translation type="obsolete">PAL ????</translation>
     </message>
     <message>
         <source>Shift fields by one. Useful for some PAL movies.</source>
-        <translation>???????????????? PAL ???</translation>
+        <translation type="obsolete">???????????????? PAL ???</translation>
     </message>
     <message>
         <source>PAL smart</source>
-        <translation>PAL ???</translation>
+        <translation type="obsolete">PAL ???</translation>
     </message>
     <message>
         <source>Smartly revert non constant PAL field shift.</source>
-        <translation>???????? PAL ?????</translation>
+        <translation type="obsolete">???????? PAL ?????</translation>
     </message>
     <message>
         <source>Drop</source>
-        <translation>??</translation>
+        <translation type="obsolete">??</translation>
     </message>
     <message>
         <source>Drop damaged fields (e.g. from VHS capture).</source>
-        <translation>??????? (???? VHS ??)?</translation>
+        <translation type="obsolete">??????? (???? VHS ??)?</translation>
     </message>
     <message>
         <source>Swap fields</source>
-        <translation>????</translation>
+        <translation type="obsolete">????</translation>
     </message>
     <message>
         <source>Swap top and bottom fields.</source>
-        <translation>???????????</translation>
+        <translation type="obsolete">???????????</translation>
     </message>
     <message>
         <source>Smart swap fields</source>
-        <translation>???????</translation>
+        <translation type="obsolete">???????</translation>
     </message>
     <message>
         <source>Smartly swap fields. Needed when field order changes.</source>
-        <translation>?????????????????</translation>
+        <translation type="obsolete">?????????????????</translation>
     </message>
     <message>
         <source>Keep even fields</source>
-        <translation>??????</translation>
+        <translation type="obsolete">??????</translation>
     </message>
     <message>
         <source>Keep top fields. Gives a half height picture.</source>
-        <translation>??????????????????</translation>
+        <translation type="obsolete">??????????????????</translation>
     </message>
     <message>
         <source>Keep odd fields</source>
-        <translation>??????</translation>
+        <translation type="obsolete">??????</translation>
     </message>
     <message>
         <source>Keep bottom fileds. Gives a half height picture.</source>
-        <translation>??????????????????</translation>
+        <translation type="obsolete">??????????????????</translation>
     </message>
     <message>
         <source>Separate fields</source>
-        <translation>????</translation>
+        <translation type="obsolete">????</translation>
     </message>
     <message>
         <source>Each field becomes full picture, half sized.</source>
-        <translation>?????????????????????</translation>
+        <translation type="obsolete">?????????????????????</translation>
     </message>
     <message>
         <source>Merge fields</source>
-        <translation>????</translation>
+        <translation type="obsolete">????</translation>
     </message>
     <message>
         <source>Merge two pictures as if they were two fields.</source>
-        <translation>????????????????</translation>
+        <translation type="obsolete">????????????????</translation>
     </message>
     <message>
         <source>Hz Stack fields</source>
-        <translation>Hz ????</translation>
+        <translation type="obsolete">Hz ????</translation>
     </message>
     <message>
         <source>Put botj fields side by side.</source>
-        <translation>? botj ???????</translation>
+        <translation type="obsolete">? botj ???????</translation>
     </message>
     <message>
         <source>Stack fields</source>
-        <translation>????</translation>
+        <translation type="obsolete">????</translation>
     </message>
     <message>
         <source>Put two fields on top of one another.</source>
-        <translation>????????????</translation>
+        <translation type="obsolete">????????????</translation>
     </message>
     <message>
         <source>Unstack fields</source>
-        <translation>?????</translation>
+        <translation type="obsolete">?????</translation>
     </message>
     <message>
         <source>Interleave top and bottom part of the picture.</source>
-        <translation>????????????</translation>
+        <translation type="obsolete">????????????</translation>
     </message>
     <message>
         <source>MPlayer eq2</source>
-        <translation>MPlayer eq2</translation>
+        <translation type="obsolete">MPlayer eq2</translation>
     </message>
     <message>
         <source>Adjust contrast, brightness, saturation and gamma.</source>
-        <translation>???????????????</translation>
+        <translation type="obsolete">???????????????</translation>
     </message>
     <message>
         <source>MPlayer hue</source>
-        <translation>MPlayer ??</translation>
+        <translation type="obsolete">MPlayer ??</translation>
     </message>
     <message>
         <source>Adjust hue and saturation.</source>
-        <translation>?????????</translation>
+        <translation type="obsolete">?????????</translation>
     </message>
     <message>
         <source>Contrast</source>
-        <translation>??</translation>
+        <translation type="obsolete">??</translation>
     </message>
     <message>
         <source>Adjust contrast, brightness and colors.</source>
-        <translation>???????????</translation>
+        <translation type="obsolete">???????????</translation>
     </message>
     <message>
         <source>Luma equalizer</source>
-        <translation>????</translation>
+        <translation type="obsolete">????</translation>
     </message>
     <message>
         <source>Luma correction filter with histogram.</source>
-        <translation>??????????</translation>
+        <translation type="obsolete">??????????</translation>
     </message>
     <message>
         <source>Swap U and V</source>
-        <translation>?? U ? V</translation>
+        <translation type="obsolete">?? U ? V</translation>
     </message>
     <message>
         <source>Invert chroma U and chroma V.</source>
-        <translation>?? U ? V ????</translation>
+        <translation type="obsolete">?? U ? V ????</translation>
     </message>
     <message>
         <source>Chroma shift</source>
-        <translation>????</translation>
+        <translation type="obsolete">????</translation>
     </message>
     <message>
         <source>Shift chroma U/V to fix badly synced luma/chroma.</source>
-        <translation>???? U/V ????????/?????</translation>
+        <translation type="obsolete">???? U/V ????????/?????</translation>
     </message>
     <message>
         <source>Luma only</source>
-        <translation>????</translation>
+        <translation type="obsolete">????</translation>
     </message>
     <message>
         <source>Convert picture to greyscale (black and white).</source>
-        <translation>??????? (?????)?</translation>
+        <translation type="obsolete">??????? (?????)?</translation>
     </message>
     <message>
         <source>Chroma U only</source>
-        <translation>???? U</translation>
+        <translation type="obsolete">???? U</translation>
     </message>
     <message>
         <source>Convert picture to grey, keeping only chroma U.</source>
-        <translation>????????????? U?</translation>
+        <translation type="obsolete">????????????? U?</translation>
     </message>
     <message>
         <source>Chroma V only</source>
-        <translation>???? V</translation>
+        <translation type="obsolete">???? V</translation>
     </message>
     <message>
         <source>Convert picture to grey, keeping only chroma V.</source>
-        <translation>????????????? V?</translation>
+        <translation type="obsolete">????????????? V?</translation>
     </message>
     <message>
         <source>Luma delta</source>
-        <translation>????</translation>
+        <translation type="obsolete">????</translation>
     </message>
     <message>
         <source>Difference between current and previous picture.</source>
-        <translation>????????????????</translation>
+        <translation type="obsolete">????????????????</translation>
     </message>
     <message>
         <source>Avisynth ColorYUV</source>
-        <translation>Avisynth ColorYUV</translation>
+        <translation type="obsolete">Avisynth ColorYUV</translation>
     </message>
     <message>
         <source>Alter colors (auto white balance etc...). Ported from Avisynth.</source>
-        <translation>???? (??????...)?? Avisynth ???</translation>
+        <translation type="obsolete">???? (??????...)?? Avisynth ?????</translation>
     </message>
     <message>
         <source>MPlayer denoise3d</source>
-        <translation>MPlayer denoise3d</translation>
+        <translation type="obsolete">MPlayer denoise3d</translation>
     </message>
     <message>
         <source>Reduce noise, smooth image, increase compressibility.</source>
-        <translation>????????????????</translation>
+        <translation type="obsolete">????????????????</translation>
     </message>
     <message>
         <source>MPlayer hqdn3d</source>
-        <translation>MPlayer hqdn3d</translation>
+        <translation type="obsolete">MPlayer hqdn3d</translation>
     </message>
     <message>
         <source>High quality version of denoise3d. Slower but more precise.</source>
-        <translation>denoise3d ??????? ???????</translation>
+        <translation type="obsolete">denoise3d ??????? ???????</translation>
     </message>
     <message>
         <source>FluxSmooth</source>
-        <translation>????</translation>
+        <translation type="obsolete">????</translation>
     </message>
     <message>
         <source>Spatio-temporal cleaner by Ross Thomas.</source>
-        <translation>??-????????? Ross Thomas?</translation>
+        <translation type="obsolete">??-????????? Ross Thomas?</translation>
     </message>
     <message>
         <source>Temporal Cleaner</source>
-        <translation>?????</translation>
+        <translation type="obsolete">?????</translation>
     </message>
     <message>
         <source>Vlad59&apos;s Avisynth port of Jim Casaburi&apos;s denoiser.</source>
-        <translation>Vlad59 ? Avisynth ?? Jim Casaburi ????????</translation>
+        <translation type="obsolete">Vlad59 ? Avisynth ?? Jim Casaburi ??????????</translation>
     </message>
     <message>
         <source>Denoise</source>
-        <translation>???</translation>
+        <translation type="obsolete">???</translation>
     </message>
     <message>
         <source>Port of Transcode DNR.</source>
-        <translation>? DNR ?????</translation>
+        <translation type="obsolete">? DNR ???????</translation>
     </message>
     <message>
         <source>Stabilize</source>
-        <translation>??</translation>
+        <translation type="obsolete">??</translation>
     </message>
     <message>
         <source>Light denoiser.</source>
-        <translation>???????</translation>
+        <translation type="obsolete">???????</translation>
     </message>
     <message>
         <source>Cnr2</source>
-        <translation>Cnr2</translation>
+        <translation type="obsolete">Cnr2</translation>
     </message>
     <message>
         <source>Chroma noise reduction filter by MarcFD/Tritical.</source>
-        <translation>???????????? MarcFD/Tritical?</translation>
+        <translation type="obsolete">???????????? MarcFD/Tritical?</translation>
     </message>
     <message>
         <source>MSmooth by Donald Graft</source>
-        <translation>MSmooth ?????? Donald Graft</translation>
+        <translation type="obsolete">MSmooth ?????? Donald Graft</translation>
     </message>
     <message>
         <source>Smooth the image, don&apos;t blur edges. Useful on anime.</source>
-        <translation>??????????????????</translation>
+        <translation type="obsolete">??????????????????</translation>
     </message>
     <message>
         <source>Soften</source>
-        <translation>??</translation>
+        <translation type="obsolete">??</translation>
     </message>
     <message>
         <source>A variant of stabilize.</source>
-        <translation>????????</translation>
+        <translation type="obsolete">????????</translation>
     </message>
     <message>
         <source>Sharpen</source>
-        <translation>???</translation>
+        <translation type="obsolete">???</translation>
     </message>
     <message>
         <source>Enhance difference between near pixels.</source>
-        <translation>?????????</translation>
+        <translation type="obsolete">?????????</translation>
     </message>
     <message>
         <source>MSharpen</source>
-        <translation>MSharpen</translation>
+        <translation type="obsolete">MSharpen</translation>
     </message>
     <message>
         <source>Sharpen edges without amplifying noise. By Donald Graft.</source>
-        <translation>???????????????? Donald Graft?</translation>
+        <translation type="obsolete">???????????????? Donald Graft?</translation>
     </message>
     <message>
         <source>asharp</source>
-        <translation>asharp</translation>
+        <translation type="obsolete">asharp</translation>
     </message>
     <message>
         <source>Adaptative sharpener by MarcFD.</source>
-        <translation>?????????? MarcFD?</translation>
+        <translation type="obsolete">?????????? MarcFD?</translation>
     </message>
     <message>
         <source>Gauss smooth</source>
-        <translation>????</translation>
+        <translation type="obsolete">????</translation>
     </message>
     <message>
         <source>Gaussian smooth. Blur the picture.</source>
-        <translation>??????????</translation>
+        <translation type="obsolete">??????????</translation>
     </message>
     <message>
         <source>Mean</source>
-        <translation>??</translation>
+        <translation type="obsolete">??</translation>
     </message>
     <message>
         <source>Mean (blur) kernel.</source>
-        <translation>??(??)???</translation>
+        <translation type="obsolete">??(??)???</translation>
     </message>
     <message>
         <source>Median</source>
-        <translation>???</translation>
+        <translation type="obsolete">???</translation>
     </message>
     <message>
         <source>Median kernel 3x3. Remove high frequency noise.</source>
-        <translation>????? 3x3?????????</translation>
+        <translation type="obsolete">????? 3x3?????????</translation>
     </message>
     <message>
         <source>Median (5x5)</source>
-        <translation>??? (5x5)</translation>
+        <translation type="obsolete">??? (5x5)</translation>
     </message>
     <message>
         <source>Median kernel 5x5. Good for reducing chroma noise.</source>
-        <translation>????? 5x5???????????</translation>
+        <translation type="obsolete">????? 5x5???????????</translation>
     </message>
     <message>
         <source>Forced postprocessing</source>
-        <translation>???????</translation>
+        <translation type="obsolete">???????</translation>
     </message>
     <message>
         <source>Apply blind postprocessing.</source>
-        <translation>?????????</translation>
+        <translation type="obsolete">?????????</translation>
     </message>
     <message>
         <source>Subtitler</source>
-        <translation>Subtitler</translation>
+        <translation type="obsolete">Subtitler</translation>
     </message>
     <message>
         <source>Add srt/sub subtitles to the picture.</source>
-        <translation>?? srt/sub ??????</translation>
+        <translation type="obsolete">?? srt/sub ??????</translation>
     </message>
     <message>
         <source>ASS</source>
-        <translation>ASS</translation>
+        <translation type="obsolete">ASS</translation>
     </message>
     <message>
         <source>Add ASS/SSA subtitles to the picture.</source>
-        <translation>?? ASS/SSA ??????</translation>
+        <translation type="obsolete">?? ASS/SSA ??????</translation>
     </message>
     <message>
         <source>VobSub</source>
@@ -785,59 +785,59 @@
     </message>
     <message>
         <source>Blend remover</source>
-        <translation>?????</translation>
+        <translation type="obsolete">?????</translation>
     </message>
     <message>
         <source>Remove blend between previous and next picture.</source>
-        <translation>???????????</translation>
+        <translation type="obsolete">???????????</translation>
     </message>
     <message>
         <source>Hard pulldown removal</source>
-        <translation>???? Pulldown</translation>
+        <translation type="obsolete">???? Pulldown</translation>
     </message>
     <message>
         <source>Remove IVTC that has been analog captured or resized.</source>
-        <translation>?? IVTC ???????????</translation>
+        <translation type="obsolete">?? IVTC ???????????</translation>
     </message>
     <message>
         <source>Whirl</source>
-        <translation>??</translation>
+        <translation type="obsolete">??</translation>
     </message>
     <message>
         <source>Useless whirlwind effect.</source>
-        <translation>????????</translation>
+        <translation type="obsolete">????????</translation>
     </message>
     <message>
         <source>Mosaic</source>
-        <translation>???</translation>
+        <translation type="obsolete">???</translation>
     </message>
     <message>
         <source>Split the picture into tiny thumbnails.</source>
-        <translation>??????????????</translation>
+        <translation type="obsolete">??????????????</translation>
     </message>
     <message>
         <source>MPlayer delogo</source>
-        <translation>Mplayer ???</translation>
+        <translation type="obsolete">Mplayer ???</translation>
     </message>
     <message>
         <source>Blend a logo by interpolating its surrounding box.</source>
-        <translation>?????????????????</translation>
+        <translation type="obsolete">?????????????????</translation>
     </message>
     <message>
         <source>Logo</source>
-        <translation>??</translation>
+        <translation type="obsolete">??</translation>
     </message>
     <message>
         <source>Add a png as logo.</source>
-        <translation>???? png ?????</translation>
+        <translation type="obsolete">???? png ?????</translation>
     </message>
     <message>
         <source>Animated Menu</source>
-        <translation>?????</translation>
+        <translation type="obsolete">?????</translation>
     </message>
     <message>
         <source>Create a video made of 6 mini windows, very useful to do DVD menus.</source>
-        <translation>? 6 ??????????????? DVD ???????</translation>
+        <translation type="obsolete">? 6 ??????????????? DVD ???????</translation>
     </message>
     <message>
         <source>Compute Average</source>
@@ -1017,13 +1017,13 @@
     </message>
     <message>
         <source>Fatal Error</source>
-        <translation>????</translation>
+        <translation type="obsolete">????</translation>
     </message>
     <message>
         <source>A fatal error has occurred.
 
 Click OK to generate debug information. This may take a few minutes to complete.</source>
-        <translation>?????????
+        <translation type="obsolete">?????????
 
 ?? ?? ??????????????????</translation>
     </message>
@@ -1033,13 +1033,13 @@
     </message>
     <message>
         <source>Crash file</source>
-        <translation>???</translation>
+        <translation>???</translation>
     </message>
     <message>
         <source>I have detected a crash file. 
 Do you want to load it  ?
 (It will be deleted in all cases, you should save it if you want to keep it)</source>
-        <translation>?????????
+        <translation>?????????
 ????? ?
 (????????????????????????)</translation>
     </message>
@@ -1049,23 +1049,23 @@
     </message>
     <message>
         <source>can&apos;t create custom directory (%s).</source>
-        <translation>?????????(%s)?</translation>
+        <translation type="obsolete">?????????(%s)?</translation>
     </message>
     <message>
         <source>can&apos;t create job directory (%s).</source>
-        <translation>?????????(%s)?</translation>
+        <translation type="obsolete">?????????(%s)?</translation>
     </message>
     <message>
         <source>Can&apos;t determine the Application Data folder.</source>
-        <translation>??????????????</translation>
+        <translation type="obsolete">??????????????</translation>
     </message>
     <message>
         <source>can&apos;t determine $HOME.</source>
-        <translation>???? $HOME?</translation>
+        <translation type="obsolete">???? $HOME?</translation>
     </message>
     <message>
         <source>Cannot create the .avidemux directory</source>
-        <translation>???? .avidemux ???</translation>
+        <translation type="obsolete">???? .avidemux ???</translation>
     </message>
     <message>
         <source>Cannot open &quot;%s&quot;.</source>
@@ -1125,7 +1125,7 @@
     </message>
     <message>
         <source>_Split every MB:</source>
-        <translation>????????MB(_S):</translation>
+        <translation>????????MB(_S):</translation>
     </message>
     <message>
         <source>Mux _every x video frames:</source>
@@ -1280,7 +1280,7 @@
     <message>
         <source>
  Reuse the existing log-file ?</source>
-        <translation>???????????</translation>
+        <translation type="obsolete">???????????</translation>
     </message>
     <message>
         <source>1st Pass</source>
@@ -1388,7 +1388,7 @@
     </message>
     <message>
         <source>Reuse log file ?</source>
-        <translation>????????</translation>
+        <translation type="obsolete">????????</translation>
     </message>
     <message>
         <source>Pass 1/2</source>
@@ -1452,95 +1452,95 @@
     </message>
     <message>
         <source>Main</source>
-        <translation>??</translation>
+        <translation type="obsolete">??</translation>
     </message>
     <message>
         <source>1  - Extremely Low (Fastest)</source>
-        <translation>1  - ???? (??)</translation>
+        <translation type="obsolete">1  - ???? (??)</translation>
     </message>
     <message>
         <source>2  - Very Low</source>
-        <translation>2  - ???</translation>
+        <translation type="obsolete">2  - ???</translation>
     </message>
     <message>
         <source>3  - Low</source>
-        <translation>3  - ?</translation>
+        <translation type="obsolete">3  - ?</translation>
     </message>
     <message>
         <source>4  - Medium</source>
-        <translation>4  - ?</translation>
+        <translation type="obsolete">4  - ?</translation>
     </message>
     <message>
         <source>5  - High (Default)</source>
-        <translation>5  - ? (??)</translation>
+        <translation type="obsolete">5  - ? (??)</translation>
     </message>
     <message>
         <source>6  - Very High</source>
-        <translation>6  - ???</translation>
+        <translation type="obsolete">6  - ???</translation>
     </message>
     <message>
         <source>6B - Very High (RDO on Bframes)</source>
-        <translation>6B - ??? (B-??? RDO)</translation>
+        <translation type="obsolete">6B - ??? (B-??? RDO)</translation>
     </message>
     <message>
         <source>7 - Ultra High</source>
-        <translation>7 - ??</translation>
+        <translation type="obsolete">7 - ??</translation>
     </message>
     <message>
         <source>7B - Ultra High (RDO on Bframes)</source>
-        <translation>7B - ?? (B-??? RDO)</translation>
+        <translation type="obsolete">7B - ?? (B-??? RDO)</translation>
     </message>
     <message>
         <source>Partition Decision</source>
-        <translation>????</translation>
+        <translation type="obsolete">????</translation>
     </message>
     <message>
         <source>Diamond search</source>
-        <translation>????</translation>
+        <translation type="obsolete">????</translation>
     </message>
     <message>
         <source>Hexagonal search</source>
-        <translation>?????</translation>
+        <translation type="obsolete">?????</translation>
     </message>
     <message>
         <source>Uneven multi hexagon</source>
-        <translation>????????</translation>
+        <translation type="obsolete">????????</translation>
     </message>
     <message>
         <source>Exhaustive search</source>
-        <translation>????</translation>
+        <translation type="obsolete">????</translation>
     </message>
     <message>
         <source>VHQ Mode</source>
-        <translation>VHQ ??</translation>
+        <translation type="obsolete">VHQ ??</translation>
     </message>
     <message>
         <source>Max Ref Frames</source>
-        <translation>???????</translation>
+        <translation type="obsolete">???????</translation>
     </message>
     <message>
         <source>Max B Frames</source>
-        <translation>?? B ???</translation>
+        <translation type="obsolete">?? B ???</translation>
     </message>
     <message>
         <source>Chroma ME</source>
-        <translation>??????</translation>
+        <translation type="obsolete">??????</translation>
     </message>
     <message>
         <source>Mixed Refs</source>
-        <translation>????</translation>
+        <translation type="obsolete">????</translation>
     </message>
     <message>
         <source>Fast P Skip</source>
-        <translation>?? P ??</translation>
+        <translation type="obsolete">?? P ??</translation>
     </message>
     <message>
         <source>DCT Decimate</source>
-        <translation>??????(DCT)????</translation>
+        <translation type="obsolete">??????(DCT)????</translation>
     </message>
     <message>
         <source>Interlaced</source>
-        <translation>??</translation>
+        <translation type="obsolete">??</translation>
     </message>
     <message>
         <source>Motion Estimation</source>
@@ -1548,11 +1548,11 @@
     </message>
     <message>
         <source>Motion</source>
-        <translation>??</translation>
+        <translation type="obsolete">??</translation>
     </message>
     <message>
         <source>Disabled</source>
-        <translation>??</translation>
+        <translation type="obsolete">??</translation>
     </message>
     <message>
         <source>Low</source>
@@ -1564,291 +1564,291 @@
     </message>
     <message>
         <source>Trellis</source>
-        <translation>??</translation>
+        <translation type="obsolete">??</translation>
     </message>
     <message>
         <source>CABAC</source>
-        <translation>CABAC</translation>
+        <translation type="obsolete">CABAC</translation>
     </message>
     <message>
         <source>Noise Reduction</source>
-        <translation>????</translation>
+        <translation type="obsolete">????</translation>
     </message>
     <message>
         <source>Deblocking Filter</source>
-        <translation>???????</translation>
+        <translation type="obsolete">???????</translation>
     </message>
     <message>
         <source>Strength</source>
-        <translation>??</translation>
+        <translation type="obsolete">??</translation>
     </message>
     <message>
         <source>Misc</source>
-        <translation>??</translation>
+        <translation type="obsolete">??</translation>
     </message>
     <message>
         <source>8x8 Transform</source>
-        <translation>8x8 ??</translation>
+        <translation type="obsolete">8x8 ??</translation>
     </message>
     <message>
         <source>8x8P Transform</source>
-        <translation>8x8P ??</translation>
+        <translation type="obsolete">8x8P ??</translation>
     </message>
     <message>
         <source>8x8B Transform</source>
-        <translation>8x8B ??</translation>
+        <translation type="obsolete">8x8B ??</translation>
     </message>
     <message>
         <source>_4x4 Transform</source>
-        <translation>_4x4 ??</translation>
+        <translation type="obsolete">_4x4 ??</translation>
     </message>
     <message>
         <source>_8x8I Transform</source>
-        <translation>_8x8I ??</translation>
+        <translation type="obsolete">_8x8I ??</translation>
     </message>
     <message>
         <source>_4x4I Transform</source>
-        <translation>_4x4I ??</translation>
+        <translation type="obsolete">_4x4I ??</translation>
     </message>
     <message>
         <source>Transform</source>
-        <translation>??</translation>
+        <translation type="obsolete">??</translation>
     </message>
     <message>
         <source>B Frames</source>
-        <translation>B ???</translation>
+        <translation type="obsolete">B ???</translation>
     </message>
     <message>
         <source>X264 Configuration</source>
-        <translation>X264 ??</translation>
+        <translation type="obsolete">X264 ??</translation>
     </message>
     <message>
         <source>Bitrate</source>
-        <translation>???</translation>
+        <translation type="obsolete">???</translation>
     </message>
     <message>
         <source>1 - QPel SAD (Fastest)</source>
-        <translation>1 - 1/4 ?? SAD (??)</translation>
+        <translation type="obsolete">1 - 1/4 ?? SAD (??)</translation>
     </message>
     <message>
         <source>2 - QPel SATD</source>
-        <translation>2 - 1/4 ?? SATD</translation>
+        <translation type="obsolete">2 - 1/4 ?? SATD</translation>
     </message>
     <message>
         <source>3 - HPel on MB then QPel</source>
-        <translation>3 - MB ??? 1/2 ???? 1/4 ??</translation>
+        <translation type="obsolete">3 - MB ??? 1/2 ???? 1/4 ??</translation>
     </message>
     <message>
         <source>4 - Always QPel</source>
-        <translation>4 - ???? 1/4 ??</translation>
+        <translation type="obsolete">4 - ???? 1/4 ??</translation>
     </message>
     <message>
         <source>5 - QPel + Bidirectional ME</source>
-        <translation>5 - QPel + ???????</translation>
+        <translation type="obsolete">5 - QPel + ???????</translation>
     </message>
     <message>
         <source>6 - RD on I/P frames (Default)</source>
-        <translation>6 - I/P ????????? (??)</translation>
+        <translation type="obsolete">6 - I/P ????????? (??)</translation>
     </message>
     <message>
         <source>7 - RD on all frames</source>
-        <translation>7B - ???????????</translation>
+        <translation type="obsolete">7B - ???????????</translation>
     </message>
     <message>
         <source>8 - RD refinement on I/P frames</source>
-        <translation>8 - I/P ?????????????</translation>
+        <translation type="obsolete">8 - I/P ?????????????</translation>
     </message>
     <message>
         <source>9 - RD refinement on all frames</source>
-        <translation>9 - ???????????????</translation>
+        <translation type="obsolete">9 - ???????????????</translation>
     </message>
     <message>
         <source>5  - High</source>
-        <translation>5  - ?</translation>
+        <translation type="obsolete">5  - ?</translation>
     </message>
     <message>
         <source>6  - High (Default)</source>
-        <translation>6  - ? (??)</translation>
+        <translation type="obsolete">6  - ? (??)</translation>
     </message>
     <message>
         <source>6B - Very High (RDO on B-frames)</source>
-        <translation>6B - ??? (B-??? RDO)</translation>
+        <translation type="obsolete">6B - ??? (B-??? RDO)</translation>
     </message>
     <message>
         <source>7  - Ultra High</source>
-        <translation>7  - ??</translation>
+        <translation type="obsolete">7  - ??</translation>
     </message>
     <message>
         <source>7B - Ultra High (RDO on B-frames)</source>
-        <translation>7B - ?? (B-??? RDO)</translation>
+        <translation type="obsolete">7B - ?? (B-??? RDO)</translation>
     </message>
     <message>
         <source>Diamond Search</source>
-        <translation>????</translation>
+        <translation type="obsolete">????</translation>
     </message>
     <message>
         <source>Hexagonal Search</source>
-        <translation>?????</translation>
+        <translation type="obsolete">?????</translation>
     </message>
     <message>
         <source>Uneven Multi-hexagon</source>
-        <translation>???????</translation>
+        <translation type="obsolete">???????</translation>
     </message>
     <message>
         <source>Exhaustive Search</source>
-        <translation>????</translation>
+        <translation type="obsolete">????</translation>
     </message>
     <message>
         <source>Hadamard Exhaustive Search</source>
-        <translation>????????</translation>
+        <translation type="obsolete">????????</translation>
     </message>
     <message>
         <source>Range</source>
-        <translation>??</translation>
+        <translation type="obsolete">??</translation>
     </message>
     <message>
         <source>Pixel Aspect Ratio</source>
-        <translation>??????</translation>
+        <translation type="obsolete">??????</translation>
     </message>
     <message>
         <source>As Input</source>
-        <translation>????</translation>
+        <translation type="obsolete">????</translation>
     </message>
     <message>
         <source>Aspect Ratio:</source>
-        <translation>????:</translation>
+        <translation type="obsolete">????:</translation>
     </message>
     <message>
         <source>Adaptive Quantisation</source>
-        <translation>????</translation>
+        <translation type="obsolete">????</translation>
     </message>
     <message>
         <source>Variance AQ</source>
-        <translation>???????</translation>
+        <translation type="obsolete">???????</translation>
     </message>
     <message>
         <source>8x8, 8x16 and 16x8 P-frame search</source>
-        <translation>8x8, 8x16 ? 16x8 P-????</translation>
+        <translation type="obsolete">8x8, 8x16 ? 16x8 P-????</translation>
     </message>
     <message>
         <source>8x8, 8x16 and 16x8 B-frame search</source>
-        <translation>8x8, 8x16 ? 16x8 B-????</translation>
+        <translation type="obsolete">8x8, 8x16 ? 16x8 B-????</translation>
     </message>
     <message>
         <source>4x4, 4x8 and 8x4 P-frame search</source>
-        <translation>4x4, 4x8 ? 8x4 P-????</translation>
+        <translation type="obsolete">4x4, 4x8 ? 8x4 P-????</translation>
     </message>
     <message>
         <source>8x8 Intra search</source>
-        <translation>8x8 ????</translation>
+        <translation type="obsolete">8x8 ????</translation>
     </message>
     <message>
         <source>4x4 Intra search</source>
-        <translation>4x4 ????</translation>
+        <translation type="obsolete">4x4 ????</translation>
     </message>
     <message>
         <source>Partition Macroblocks</source>
-        <translation>??????</translation>
+        <translation type="obsolete">??????</translation>
     </message>
     <message>
         <source>Max. Consecutive</source>
-        <translation>????</translation>
+        <translation type="obsolete">????</translation>
     </message>
     <message>
         <source>Bias</source>
-        <translation>??</translation>
+        <translation type="obsolete">??</translation>
     </message>
     <message>
         <source>Use as Reference</source>
-        <translation>??????</translation>
+        <translation type="obsolete">??????</translation>
     </message>
     <message>
         <source>Bidirectional ME</source>
-        <translation>???????</translation>
+        <translation type="obsolete">???????</translation>
     </message>
     <message>
         <source>Weighted Biprediction</source>
-        <translation>??????</translation>
+        <translation type="obsolete">??????</translation>
     </message>
     <message>
         <source>Fast</source>
-        <translation>?</translation>
+        <translation type="obsolete">?</translation>
     </message>
     <message>
         <source>Optimal</source>
-        <translation>????</translation>
+        <translation type="obsolete">????</translation>
     </message>
     <message>
         <source>Adaptive DCT</source>
-        <translation>?? DCT</translation>
+        <translation type="obsolete">?? DCT</translation>
     </message>
     <message>
         <source>Spatial</source>
-        <translation>???</translation>
+        <translation type="obsolete">???</translation>
     </message>
     <message>
         <source>Temporal</source>
-        <translation>???</translation>
+        <translation type="obsolete">???</translation>
     </message>
     <message>
         <source>Auto</source>
-        <translation>??</translation>
+        <translation type="obsolete">??</translation>
     </message>
     <message>
         <source>Direct Mode</source>
-        <translation>????</translation>
+        <translation type="obsolete">????</translation>
     </message>
     <message>
         <source>B-Frames</source>
-        <translation>B-??</translation>
+        <translation type="obsolete">B-??</translation>
     </message>
     <message>
         <source>Partitions &amp;&amp; Frames</source>
-        <translation>???????(&amp;&amp;)</translation>
+        <translation type="obsolete">???????(&amp;&amp;)</translation>
     </message>
     <message>
         <source>Keyframe Boost (%)</source>
-        <translation>?????? (%)</translation>
+        <translation type="obsolete">?????? (%)</translation>
     </message>
     <message>
         <source>B-frame Reduction (%)</source>
-        <translation>B-???? (%)</translation>
+        <translation type="obsolete">B-???? (%)</translation>
     </message>
     <message>
         <source>Bitrate Variability (%)</source>
-        <translation>?????? (%)</translation>
+        <translation type="obsolete">?????? (%)</translation>
     </message>
     <message>
         <source>Min QP</source>
-        <translation>?? QP</translation>
+        <translation type="obsolete">?? QP</translation>
     </message>
     <message>
         <source>Max QP</source>
-        <translation>?? QP</translation>
+        <translation type="obsolete">?? QP</translation>
     </message>
     <message>
         <source>Max QP Step</source>
-        <translation>?? QP ???</translation>
+        <translation type="obsolete">?? QP ???</translation>
     </message>
     <message>
         <source>Quantisation Limits</source>
-        <translation>??????</translation>
+        <translation type="obsolete">??????</translation>
     </message>
     <message>
         <source>Scene Cut Threshold</source>
-        <translation>???????</translation>
+        <translation type="obsolete">???????</translation>
     </message>
     <message>
         <source>Min IDR Frame Interval</source>
-        <translation>?? IDR ??????</translation>
+        <translation type="obsolete">?? IDR ??????</translation>
     </message>
     <message>
         <source>Max IDR Frame Interval</source>
-        <translation>?? IDR ??????</translation>
+        <translation type="obsolete">?? IDR ??????</translation>
     </message>
     <message>
         <source>More Rate Settings</source>
-        <translation>??????</translation>
+        <translation type="obsolete">??????</translation>
     </message>
     <message>
         <source>Rate Control</source>
@@ -1856,99 +1856,99 @@
     </message>
     <message>
         <source>Maximum Local Bitrate</source>
-        <translation>????????</translation>
+        <translation type="obsolete">????????</translation>
     </message>
     <message>
         <source>VBV Buffer Size</source>
-        <translation>VBV ????</translation>
+        <translation type="obsolete">VBV ????</translation>
     </message>
     <message>
         <source>Initial VBV Buffer (%)</source>
-        <translation>?? VBV ?? (%)</translation>
+        <translation type="obsolete">?? VBV ?? (%)</translation>
     </message>
     <message>
         <source>Video Buffer Verifier</source>
-        <translation>???????</translation>
+        <translation type="obsolete">???????</translation>
     </message>
     <message>
         <source>VBV</source>
-        <translation>VBV</translation>
+        <translation type="obsolete">VBV</translation>
     </message>
     <message>
         <source>x264 Configuration</source>
-        <translation>x264 ??</translation>
+        <translation type="obsolete">x264 ??</translation>
     </message>
     <message>
         <source>_Interlaced</source>
-        <translation>??(_I)</translation>
+        <translation type="obsolete">??(_I)</translation>
     </message>
     <message>
         <source>Ca_rtoon mode</source>
-        <translation>????(_R)</translation>
+        <translation type="obsolete">????(_R)</translation>
     </message>
     <message>
         <source>_Greyscale</source>
-        <translation>??(_G)</translation>
+        <translation type="obsolete">??(_G)</translation>
     </message>
     <message>
         <source>Turbo mode</source>
-        <translation>??????</translation>
+        <translation type="obsolete">??????</translation>
     </message>
     <message>
         <source>C_hroma optimizer</source>
-        <translation>?????</translation>
+        <translation type="obsolete">?????</translation>
     </message>
     <message>
         <source>Very Low</source>
-        <translation>???</translation>
+        <translation type="obsolete">???</translation>
     </message>
     <message>
         <source>Medium</source>
-        <translation>?</translation>
+        <translation type="obsolete">?</translation>
     </message>
     <message>
         <source>Very High</source>
-        <translation>???</translation>
+        <translation type="obsolete">???</translation>
     </message>
     <message>
         <source>Ultra High</source>
-        <translation>??</translation>
+        <translation type="obsolete">??</translation>
     </message>
     <message>
         <source>Motion Search Precision</source>
-        <translation>???????</translation>
+        <translation type="obsolete">???????</translation>
     </message>
     <message>
         <source>Off</source>
-        <translation>??</translation>
+        <translation type="obsolete">??</translation>
     </message>
     <message>
         <source>Mode Decision</source>
-        <translation>????</translation>
+        <translation type="obsolete">????</translation>
     </message>
     <message>
         <source>Limited Search</source>
-        <translation>????</translation>
+        <translation type="obsolete">????</translation>
     </message>
     <message>
         <source>Medium Search</source>
-        <translation>????</translation>
+        <translation type="obsolete">????</translation>
     </message>
     <message>
         <source>Wide Search</source>
-        <translation>????</translation>
+        <translation type="obsolete">????</translation>
     </message>
     <message>
         <source>Quarter Pixel</source>
-        <translation>1/4 ??</translation>
+        <translation type="obsolete">1/4 ??</translation>
     </message>
     <message>
         <source>GMC</source>
-        <translation>GMC</translation>
+        <translation type="obsolete">GMC</translation>
     </message>
     <message>
         <source>BVHQ</source>
-        <translation>BVHQ</translation>
+        <translation type="obsolete">BVHQ</translation>
     </message>
     <message>
         <source>Advanced Simple Profile</source>
@@ -1956,43 +1956,43 @@
     </message>
     <message>
         <source>4MV</source>
-        <translation>4MV</translation>
+        <translation type="obsolete">4MV</translation>
     </message>
     <message>
         <source>HQ AC</source>
-        <translation>HQ AC</translation>
+        <translation type="obsolete">HQ AC</translation>
     </message>
     <message>
         <source>More Search</source>
-        <translation>????</translation>
+        <translation type="obsolete">????</translation>
     </message>
     <message>
         <source>Min Gop Size</source>
-        <translation>?? Gop ??</translation>
+        <translation type="obsolete">?? Gop ??</translation>
     </message>
     <message>
         <source>Max Gop Size</source>
-        <translation>?? Gop ??</translation>
+        <translation type="obsolete">?? Gop ??</translation>
     </message>
     <message>
         <source>GOP Size</source>
-        <translation>GOP ??</translation>
+        <translation type="obsolete">GOP ??</translation>
     </message>
     <message>
         <source>H263</source>
-        <translation>H263</translation>
+        <translation type="obsolete">H263</translation>
     </message>
     <message>
         <source>Mpeg</source>
-        <translation>Mpeg</translation>
+        <translation type="obsolete">Mpeg</translation>
     </message>
     <message>
         <source>Quantization Matrix</source>
-        <translation>??????</translation>
+        <translation type="obsolete">??????</translation>
     </message>
     <message>
         <source>Trellis Quantization</source>
-        <translation>??????</translation>
+        <translation type="obsolete">??????</translation>
     </message>
     <message>
         <source>Quantization</source>
@@ -2000,51 +2000,51 @@
     </message>
     <message>
         <source>Two Pass Tuning</source>
-        <translation>??????</translation>
+        <translation type="obsolete">??????</translation>
     </message>
     <message>
         <source>Key Frame Boost(%)</source>
-        <translation>?????? (%)</translation>
+        <translation type="obsolete">?????? (%)</translation>
     </message>
     <message>
         <source>I-frames closer than...</source>
-        <translation>I-??????...</translation>
+        <translation type="obsolete">I-??????...</translation>
     </message>
     <message>
         <source>.. are reduced by(%)</source>
-        <translation>.. ??(%)</translation>
+        <translation type="obsolete">.. ??(%)</translation>
     </message>
     <message>
         <source>Max Overflow Improvement(%)</source>
-        <translation>??????(%)</translation>
+        <translation type="obsolete">??????(%)</translation>
     </message>
     <message>
         <source>Max Overglow Degradation(%)</source>
-        <translation>??????(%)</translation>
+        <translation type="obsolete">??????(%)</translation>
     </message>
     <message>
         <source>Curve Compression</source>
-        <translation>????</translation>
+        <translation type="obsolete">????</translation>
     </message>
     <message>
         <source>High Bitrate Scenes (%)</source>
-        <translation>??????(%)</translation>
+        <translation type="obsolete">??????(%)</translation>
     </message>
     <message>
         <source>Low Bitrate Scenes (%)</source>
-        <translation>??????(%)</translation>
+        <translation type="obsolete">??????(%)</translation>
     </message>
     <message>
         <source>Overflow Control Strength</source>
-        <translation>??????(%)</translation>
+        <translation type="obsolete">??????(%)</translation>
     </message>
     <message>
         <source>Two Pass</source>
-        <translation>????</translation>
+        <translation type="obsolete">????</translation>
     </message>
     <message>
         <source>Xvid4 Configuration</source>
-        <translation>Xvid4 ??</translation>
+        <translation type="obsolete">Xvid4 ??</translation>
     </message>
     <message>
         <source>Ready</source>
@@ -2104,7 +2104,7 @@
     </message>
     <message>
         <source>Configure child</source>
-        <translation>?????</translation>
+        <translation>?????</translation>
     </message>
     <message>
         <source>Partial Video Filter</source>
@@ -2228,39 +2228,39 @@
     </message>
     <message>
         <source>libavcodec MPEG-2 Configuration</source>
-        <translation>libavcodec MPEG-2 ??</translation>
+        <translation>libavcodec MPEG-2 ??</translation>
     </message>
     <message>
         <source>MPEG-2 Configuration</source>
-        <translation>MPEG-2 ??</translation>
+        <translation>MPEG-2 ??</translation>
     </message>
     <message>
         <source>_Background Image:</source>
-        <translation>????(_B):</translation>
+        <translation type="obsolete">????(_B):</translation>
     </message>
     <message>
         <source>Select background image</source>
-        <translation>??????</translation>
+        <translation type="obsolete">??????</translation>
     </message>
     <message>
         <source>_NTSC (default is PAL):</source>
-        <translation>_NTSC (??? PAL):</translation>
+        <translation type="obsolete">_NTSC (??? PAL):</translation>
     </message>
     <message>
         <source>Vignette _Width:</source>
-        <translation>????(_W):</translation>
+        <translation type="obsolete">????(_W):</translation>
     </message>
     <message>
         <source>Vignette _Height:</source>
-        <translation>????(_H):</translation>
+        <translation type="obsolete">????(_H):</translation>
     </message>
     <message>
         <source>Vignette frame number</source>
-        <translation>???????</translation>
+        <translation type="obsolete">???????</translation>
     </message>
     <message>
         <source>Timecode:</source>
-        <translation>???:</translation>
+        <translation type="obsolete">???:</translation>
     </message>
     <message>
         <source>_Dynamic range compression</source>
@@ -2360,11 +2360,11 @@
     </message>
     <message>
         <source>Audio Configuration</source>
-        <translation>????</translation>
+        <translation type="obsolete">????</translation>
     </message>
     <message>
         <source>No data</source>
-        <translation>????</translation>
+        <translation>????</translation>
     </message>
     <message>
         <source>Max. bitrate:</source>
@@ -2408,43 +2408,43 @@
     </message>
     <message>
         <source>Audio Codecs</source>
-        <translation>??????</translation>
+        <translation type="obsolete">??????</translation>
     </message>
     <message>
         <source>Aften</source>
-        <translation>Aften</translation>
+        <translation type="obsolete">Aften</translation>
     </message>
     <message>
         <source>amrnb</source>
-        <translation>amrnb</translation>
+        <translation type="obsolete">amrnb</translation>
     </message>
     <message>
         <source>FAAC</source>
-        <translation>FAAC</translation>
+        <translation type="obsolete">FAAC</translation>
     </message>
     <message>
         <source>FAAD2</source>
-        <translation>FAAD2</translation>
+        <translation type="obsolete">FAAD2</translation>
     </message>
     <message>
         <source>LAME</source>
-        <translation>LAME</translation>
+        <translation type="obsolete">LAME</translation>
     </message>
     <message>
         <source>liba52</source>
-        <translation>liba52</translation>
+        <translation type="obsolete">liba52</translation>
     </message>
     <message>
         <source>libdca</source>
-        <translation>libdca</translation>
+        <translation type="obsolete">libdca</translation>
     </message>
     <message>
         <source>MAD</source>
-        <translation>MAD</translation>
+        <translation type="obsolete">MAD</translation>
     </message>
     <message>
         <source>Vorbis</source>
-        <translation>Vorbis</translation>
+        <translation type="obsolete">Vorbis</translation>
     </message>
     <message>
         <source>aRts</source>
@@ -2520,7 +2520,7 @@
     </message>
     <message>
         <source>FLV1 Configuration</source>
-        <translation>FLV1 ??</translation>
+        <translation>FLV1 ??</translation>
     </message>
     <message>
         <source>_Hours:</source>
@@ -2668,7 +2668,7 @@
     </message>
     <message>
         <source>libavcodec MPEG-4 configuration</source>
-        <translation>libavcodec MPEG-4 ??</translation>
+        <translation>libavcodec MPEG-4 ??</translation>
     </message>
     <message>
         <source>_Swap U&amp;V</source>
@@ -2676,7 +2676,7 @@
     </message>
     <message>
         <source>MJPEG Configuration</source>
-        <translation>MJPEG ??</translation>
+        <translation>MJPEG ??</translation>
     </message>
     <message>
         <source>Select idx file:</source>
@@ -2684,7 +2684,7 @@
     </message>
     <message>
         <source>Use GlyphSet (optional):</source>
-        <translation>????(???):</translation>
+        <translation>????(???):</translation>
     </message>
     <message>
         <source>Select GlyphSet file</source>
@@ -2740,7 +2740,7 @@
     </message>
     <message>
         <source>Use glyphset (optional):</source>
-        <translation>????(???):</translation>
+        <translation type="obsolete">????(???):</translation>
     </message>
     <message>
         <source>Please Select a valid TS file.</source>
@@ -2780,7 +2780,7 @@
     </message>
     <message>
         <source>_Use libavcodec MPEG-2 decoder</source>
-        <translation>?? libavcodec MPEG-2 ???(_U)</translation>
+        <translation type="obsolete">?? libavcodec MPEG-2 ???(_U)</translation>
     </message>
     <message>
         <source>Create _OpenDML files</source>
@@ -2796,7 +2796,7 @@
     </message>
     <message>
         <source>_Disable NUV audio sync</source>
-        <translation>?? NUV ????(_D)</translation>
+        <translation>?? NUV ????(_D)</translation>
     </message>
     <message>
         <source>Automatically _build VBR map</source>
@@ -2856,11 +2856,11 @@
     </message>
     <message>
         <source>_x264 threads:</source>
-        <translation>_x264 ???:</translation>
+        <translation type="obsolete">_x264 ???:</translation>
     </message>
     <message>
         <source>X_vid threads:</source>
-        <translation>X_vid ???:</translation>
+        <translation type="obsolete">X_vid ???:</translation>
     </message>
     <message>
         <source>Multi-threading</source>
@@ -2960,27 +2960,27 @@
     </message>
     <message>
         <source>Core Audio</source>
-        <translation>Core Audio</translation>
+        <translation type="obsolete">Core Audio</translation>
     </message>
     <message>
         <source>JACK</source>
-        <translation>JACK</translation>
+        <translation type="obsolete">JACK</translation>
     </message>
     <message>
         <source>Pulse Audio</source>
-        <translation>Pulse Audio</translation>
+        <translation type="obsolete">Pulse Audio</translation>
     </message>
     <message>
         <source>Win32</source>
-        <translation>Win32</translation>
+        <translation type="obsolete">Win32</translation>
     </message>
     <message>
         <source>_Audio output:</source>
-        <translation>????(_A):</translation>
+        <translation type="obsolete">????(_A):</translation>
     </message>
     <message>
         <source>ALSA _device:</source>
-        <translation>ALSA ??(_D):</translation>
+        <translation type="obsolete">ALSA ??(_D):</translation>
     </message>
     <message>
         <source>De_ringing</source>
@@ -3052,11 +3052,11 @@
     </message>
     <message>
         <source>_Shrink Factor:</source>
-        <translation>????(_S):</translation>
+        <translation>????(_S):</translation>
     </message>
     <message>
         <source>Requant Configuration</source>
-        <translation>??????</translation>
+        <translation>??????</translation>
     </message>
     <message>
         <source>VCD</source>
@@ -3100,239 +3100,239 @@
     </message>
     <message>
         <source>Arabic</source>
-        <translation>???</translation>
+        <translation type="obsolete">???</translation>
     </message>
     <message>
         <source>Baltic</source>
-        <translation>????</translation>
+        <translation type="obsolete">????</translation>
     </message>
     <message>
         <source>Chinese Simplified (GB2312)</source>
-        <translation>???? (GB2312)</translation>
+        <translation type="obsolete">???? (GB2312)</translation>
     </message>
     <message>
         <source>Chinese Traditional (Big5)</source>
-        <translation>???? (Big5)</translation>
+        <translation type="obsolete">???? (Big5)</translation>
     </message>
     <message>
         <source>Cyrillic</source>
-        <translation>?????</translation>
+        <translation type="obsolete">?????</translation>
     </message>
     <message>
         <source>Latin-1 (Western European)</source>
-        <translation>??-1 (??)</translation>
+        <translation type="obsolete">??-1 (??)</translation>
     </message>
     <message>
         <source>Latin-2 (Central European)</source>
-        <translation>??-2 (??)</translation>
+        <translation type="obsolete">??-2 (??)</translation>
     </message>
     <message>
         <source>Greek</source>
-        <translation>??</translation>
+        <translation type="obsolete">??</translation>
     </message>
     <message>
         <source>Hebrew</source>
-        <translation>???</translation>
+        <translation type="obsolete">???</translation>
     </message>
     <message>
         <source>Slovene</source>
-        <translation>?????</translation>
+        <translation type="obsolete">?????</translation>
     </message>
     <message>
         <source>Turkish</source>
-        <translation>???</translation>
+        <translation type="obsolete">???</translation>
     </message>
     <message>
         <source>UTF-8</source>
-        <translation>UTF-8</translation>
+        <translation type="obsolete">UTF-8</translation>
     </message>
     <message>
         <source>UTF-16</source>
-        <translation>UTF-16</translation>
+        <translation type="obsolete">UTF-16</translation>
     </message>
     <message>
         <source>_Subtitle file:</source>
-        <translation>???(_S):</translation>
+        <translation type="obsolete">???(_S):</translation>
     </message>
     <message>
         <source>Select Subtitle file</source>
-        <translation>?????</translation>
+        <translation type="obsolete">?????</translation>
     </message>
     <message>
         <source>_Font (TTF):</source>
-        <translation>?? (TT_F):</translation>
+        <translation type="obsolete">?? (TT_F):</translation>
     </message>
     <message>
         <source>Select TTF file</source>
-        <translation>?? TTF ?</translation>
+        <translation type="obsolete">?? TTF ?</translation>
     </message>
     <message>
         <source>_Encoding:</source>
-        <translation>??(_E):</translation>
+        <translation type="obsolete">??(_E):</translation>
     </message>
     <message>
         <source>S_elect C_olor</source>
-        <translation>????</translation>
+        <translation type="obsolete">????</translation>
     </message>
     <message>
         <source>Set Size and _Position</source>
-        <translation>???????(_P)</translation>
+        <translation type="obsolete">???????(_P)</translation>
     </message>
     <message>
         <source>_Auto split</source>
-        <translation>????(_A)</translation>
+        <translation type="obsolete">????(_A)</translation>
     </message>
     <message>
         <source>_Delay (ms):</source>
-        <translation>?? (ms)(_D):</translation>
+        <translation type="obsolete">?? (ms)(_D):</translation>
     </message>
     <message>
         <source>Auto (might not work)</source>
-        <translation>?? (????)</translation>
+        <translation type="obsolete">?? (????)</translation>
     </message>
     <message>
         <source>Top field first</source>
-        <translation>??????</translation>
+        <translation type="obsolete">??????</translation>
     </message>
     <message>
         <source>Bottom field first</source>
-        <translation>??????</translation>
+        <translation type="obsolete">??????</translation>
     </message>
     <message>
         <source>Bottom field (keep top)</source>
-        <translation>????(????)</translation>
+        <translation type="obsolete">????(????)</translation>
     </message>
     <message>
         <source>Top field (keep bottom)</source>
-        <translation>????(????)</translation>
+        <translation type="obsolete">????(????)</translation>
     </message>
     <message>
         <source>Cubic interpolation</source>
-        <translation>?????</translation>
+        <translation type="obsolete">?????</translation>
     </message>
     <message>
         <source>Modified ELA</source>
-        <translation>??? ELA</translation>
+        <translation type="obsolete">??? ELA</translation>
     </message>
     <message>
         <source>Kernel interpolation</source>
-        <translation>?????</translation>
+        <translation type="obsolete">?????</translation>
     </message>
     <message>
         <source>Modified ELA-2</source>
-        <translation>??? ELA-2</translation>
+        <translation type="obsolete">??? ELA-2</translation>
     </message>
     <message>
         <source>4 fields check</source>
-        <translation>4 ????</translation>
+        <translation type="obsolete">4 ????</translation>
     </message>
     <message>
         <source>5 fields check</source>
-        <translation>5 ????</translation>
+        <translation type="obsolete">5 ????</translation>
     </message>
     <message>
         <source>4 fields check (no avg)</source>
-        <translation>4 ???? (?? avg)</translation>
+        <translation type="obsolete">4 ???? (?? avg)</translation>
     </message>
     <message>
         <source>5 fields check (no avg)</source>
-        <translation>5 ???? (?? avg)</translation>
+        <translation type="obsolete">5 ???? (?? avg)</translation>
     </message>
     <message>
         <source>No link</source>
-        <translation>????</translation>
+        <translation type="obsolete">????</translation>
     </message>
     <message>
         <source>Full link</source>
-        <translation>????</translation>
+        <translation type="obsolete">????</translation>
     </message>
     <message>
         <source>Y to UV</source>
-        <translation>Y ?? UV</translation>
+        <translation type="obsolete">Y ?? UV</translation>
     </message>
     <message>
         <source>UV to Y</source>
-        <translation>UV ?? Y</translation>
+        <translation type="obsolete">UV ?? Y</translation>
     </message>
     <message>
         <source>0</source>
-        <translation>0</translation>
+        <translation type="obsolete">0</translation>
     </message>
     <message>
         <source>1</source>
-        <translation>1</translation>
+        <translation type="obsolete">1</translation>
     </message>
     <message>
         <source>2</source>
-        <translation>2</translation>
+        <translation type="obsolete">2</translation>
     </message>
     <message>
         <source>_Field order:</source>
-        <translation>??????(_F):</translation>
+        <translation type="obsolete">??????(_F):</translation>
     </message>
     <message>
         <source>_Interpolate:</source>
-        <translation>??(_I):</translation>
+        <translation type="obsolete">??(_I):</translation>
     </message>
     <message>
         <source>_Type:</source>
-        <translation>??(_T):</translation>
+        <translation type="obsolete">??(_T):</translation>
     </message>
     <message>
         <source>_MntMode:</source>
-        <translation>_Mnt ??:</translation>
+        <translation type="obsolete">_Mnt ??:</translation>
     </message>
     <message>
         <source>_Link:</source>
-        <translation>??(_L):</translation>
+        <translation type="obsolete">??(_L):</translation>
     </message>
     <message>
         <source>_AP type:</source>
-        <translation>_AP ??:</translation>
+        <translation type="obsolete">_AP ??:</translation>
     </message>
     <message>
         <source>Use ch_roma to evalute</source>
-        <translation>???????(_R)</translation>
+        <translation type="obsolete">???????(_R)</translation>
     </message>
     <message>
         <source>Try _weave</source>
-        <translation>????(_W)</translation>
+        <translation type="obsolete">????(_W)</translation>
     </message>
     <message>
         <source>_Denoise</source>
-        <translation>????(_D)</translation>
+        <translation type="obsolete">????(_D)</translation>
     </message>
     <message>
         <source>_Sharp</source>
-        <translation>??(_S)</translation>
+        <translation type="obsolete">??(_S)</translation>
     </message>
     <message>
         <source>_Evalute all frames</source>
-        <translation>???????(_E)</translation>
+        <translation type="obsolete">???????(_E)</translation>
     </message>
     <message>
         <source>Motion threshold, l_uma:</source>
-        <translation>????????(_U):</translation>
+        <translation type="obsolete">????????(_U):</translation>
     </message>
     <message>
         <source>Motion threshold, c_hroma:</source>
-        <translation>????????(_H):</translation>
+        <translation type="obsolete">????????(_H):</translation>
     </message>
     <message>
         <source>Area com_bing threshold:</source>
-        <translation>?????????(_B):</translation>
+        <translation type="obsolete">?????????(_B):</translation>
     </message>
     <message>
         <source>Combe_d threshold:</source>
-        <translation>???????(_D):</translation>
+        <translation type="obsolete">???????(_D):</translation>
     </message>
     <message>
         <source>Artefact _protection threshold:</source>
-        <translation>???????(_P):</translation>
+        <translation type="obsolete">???????(_P):</translation>
     </message>
     <message>
         <source>Debug:</source>
-        <translation>??:</translation>
+        <translation type="obsolete">??:</translation>
     </message>
     <message>
         <source>_VOB file(s):</source>
@@ -3372,11 +3372,11 @@
     </message>
     <message>
         <source>Width and height cannot be 0</source>
-        <translation>?????? 0</translation>
+        <translation type="obsolete">?????? 0</translation>
     </message>
     <message>
         <source>Width and height cannot be odd</source>
-        <translation>????????</translation>
+        <translation type="obsolete">????????</translation>
     </message>
     <message>
         <source>Something very wrong happened when building joblist.</source>
@@ -3405,7 +3405,7 @@
     <message>
         <source>This is to be used to undo packed VOP on MPEG-4.
 Continue ?</source>
-        <translation>? MPEG-4 ????????? VOP ?
+        <translation>??????? MPEG-4 ????? VOP ?
 ????</translation>
     </message>
     <message>
@@ -3712,7 +3712,7 @@
     </message>
     <message>
         <source>Switch audio codec to Copy.</source>
-        <translation>??????????????</translation>
+        <translation>??????????????</translation>
     </message>
     <message>
         <source>Cannot delete the selection.</source>
@@ -3776,7 +3776,7 @@
     </message>
     <message>
         <source>Audio track %d (%s/%d channels/%d kbit per s/%d ms shift)</source>
-        <translation>?? %d (%s/%d ??? s/%d ms ?? /%d kbit )</translation>
+        <translation>?? %d (%s/%d ??? s/%d ms ?? /%d kbit )</translation>
     </message>
     <message>
         <source>_Track from video:</source>
@@ -3866,7 +3866,7 @@
     </message>
     <message>
         <source>Xvid4 and FAAC support is required for the iPod profile.</source>
-        <translation>iPod ???????? Xvid4 ? FAAC?</translation>
+        <translation type="obsolete">iPod ???????? Xvid4 ? FAAC?</translation>
     </message>
     <message>
         <source>Cannot select the MPEG-4 SP codec.</source>
@@ -3960,12 +3960,74 @@
     </message>
     <message>
         <source>_Q factor (set 4):</source>
-        <translation>_Q ?? (??? 4):</translation>
+        <translation>_Q ?? (??? 4):</translation>
     </message>
     <message>
         <source>Trouble initializing audio device</source>
-        <translation>????????????</translation>
+        <translation>????????????</translation>
     </message>
+    <message>
+        <source>[BuildChain] Encoder initialization failed</source>
+        <translation>[???] ????????</translation>
+    </message>
+    <message>
+        <source>Internal error finding codec</source>
+        <translation>?????????????</translation>
+    </message>
+    <message>
+        <source>AMR-WB</source>
+        <translation>AMR-WB</translation>
+    </message>
+    <message>
+        <source>Reuse the existing log file?</source>
+        <translation>???????????</translation>
+    </message>
+    <message>
+        <source>Audio Plugins</source>
+        <translation>??????</translation>
+    </message>
+    <message>
+        <source>Video Encoder Plugins</source>
+        <translation>?????????</translation>
+    </message>
+    <message>
+        <source>Video Encoder</source>
+        <translation>?????</translation>
+    </message>
+    <message>
+        <source>Audio Device Plugins</source>
+        <translation>????????</translation>
+    </message>
+    <message>
+        <source>Audio Device</source>
+        <translation>????</translation>
+    </message>
+    <message>
+        <source>Audio Encoder Plugins</source>
+        <translation>?????????</translation>
+    </message>
+    <message>
+        <source>Audio Encoders</source>
+        <translation>?????</translation>
+    </message>
+    <message>
+        <source>Plugins Info</source>
+        <translation>??????</translation>
+    </message>
+    <message>
+        <source>_AudioDevice</source>
+        <translation>????(_A)</translation>
+    </message>
+    <message>
+        <source>No AAC audio encoder plugin found.</source>
+        <translation>??????????</translation>
+    </message>
+    <message>
+        <source>The MP3 codec does not allow disabling reservoir.
+Install lame plugin</source>
+        <translation>? MP3 ?????????????
+?? lame ????</translation>
+    </message>
 </context>
 <context>
     <name>ADMImage</name>
@@ -4041,38 +4103,38 @@
     <name>ADMVideoDenoise</name>
     <message>
         <source>_Luma lock:</source>
-        <translation>????(_L):</translation>
+        <translation type="obsolete">????(_L):</translation>
     </message>
     <message>
         <source>C_hroma lock:</source>
-        <translation>????(_H):</translation>
+        <translation type="obsolete">????(_H):</translation>
     </message>
     <message>
         <source>L_uma threshold:</source>
-        <translation>?????(_U):</translation>
+        <translation type="obsolete">?????(_U):</translation>
     </message>
     <message>
         <source>Ch_roma threshold:</source>
-        <translation>?????(_R):</translation>
+        <translation type="obsolete">?????(_R):</translation>
     </message>
     <message>
         <source>_Scene change:</source>
-        <translation>????(_S):</translation>
+        <translation type="obsolete">????(_S):</translation>
     </message>
     <message>
         <source>Denoise</source>
-        <translation>????</translation>
+        <translation type="obsolete">????</translation>
     </message>
 </context>
 <context>
     <name>ADMVideoDropOut</name>
     <message>
         <source>DropOut Threshold</source>
-        <translation>?????</translation>
+        <translation type="obsolete">?????</translation>
     </message>
     <message>
         <source>Drop Out</source>
-        <translation>??</translation>
+        <translation type="obsolete">??</translation>
     </message>
 </context>
 <context>
@@ -4131,11 +4193,11 @@
     </message>
     <message>
         <source>Eraser _Data File:</source>
-        <translation>??????(_D):</translation>
+        <translation>??????(_D):</translation>
     </message>
     <message>
         <source>Select data file</source>
-        <translation>?????</translation>
+        <translation>?????</translation>
     </message>
     <message>
         <source>_Debugging settings (bits):</source>
@@ -4143,287 +4205,287 @@
     </message>
     <message>
         <source>Eraser Configuration</source>
-        <translation>?????</translation>
+        <translation>?????</translation>
     </message>
 </context>
 <context>
     <name>ADMVideoFields</name>
     <message>
         <source>Motion Threshold</source>
-        <translation>?????</translation>
+        <translation type="obsolete">?????</translation>
     </message>
     <message>
         <source>Blend Threshold</source>
-        <translation>?????</translation>
+        <translation type="obsolete">?????</translation>
     </message>
 </context>
 <context>
     <name>ADMVideoFlux</name>
     <message>
         <source>_Temporal threshold:</source>
-        <translation>?????(_T):</translation>
+        <translation type="obsolete">?????(_T):</translation>
     </message>
     <message>
         <source>_Spatial threshold:</source>
-        <translation>?????(_S):</translation>
+        <translation type="obsolete">?????(_S):</translation>
     </message>
     <message>
         <source>FluxSmooth</source>
-        <translation>????</translation>
+        <translation type="obsolete">????</translation>
     </message>
 </context>
 <context>
     <name>ADMVideoForcedPP</name>
     <message>
         <source>_Filter strength:</source>
-        <translation>????(_F):</translation>
+        <translation type="obsolete">????(_F):</translation>
     </message>
     <message>
         <source>_Quantizer:</source>
-        <translation>???(_Q):</translation>
+        <translation type="obsolete">???(_Q):</translation>
     </message>
     <message>
         <source>_Horizontal deblocking</source>
-        <translation>??????????(_H)</translation>
+        <translation type="obsolete">??????????(_H)</translation>
     </message>
     <message>
         <source>_Vertical deblocking</source>
-        <translation>??????????(_V)</translation>
+        <translation type="obsolete">??????????(_V)</translation>
     </message>
     <message>
         <source>_Deringing</source>
-        <translation>??????(_D)</translation>
+        <translation type="obsolete">??????(_D)</translation>
     </message>
     <message>
         <source>Forced Postprocessing</source>
-        <translation>???????</translation>
+        <translation type="obsolete">???????</translation>
     </message>
 </context>
 <context>
     <name>ADMVideoKernelDeint</name>
     <message>
         <source>Top</source>
-        <translation>??</translation>
+        <translation type="obsolete">??</translation>
     </message>
     <message>
         <source>Bottom</source>
-        <translation>??</translation>
+        <translation type="obsolete">??</translation>
     </message>
     <message>
         <source>_Field order:</source>
-        <translation>??????(_F):</translation>
+        <translation type="obsolete">??????(_F):</translation>
     </message>
     <message>
         <source>_Threshold:</source>
-        <translation>???(_T):</translation>
+        <translation type="obsolete">???(_T):</translation>
     </message>
     <message>
         <source>Smaller means more deinterlacing</source>
-        <translation>??????????</translation>
+        <translation type="obsolete">??????????</translation>
     </message>
     <message>
         <source>_Sharp</source>
-        <translation>??(_S)</translation>
+        <translation type="obsolete">??(_S)</translation>
     </message>
     <message>
         <source>_Sharper engine:</source>
-        <translation>?????(_S):</translation>
+        <translation type="obsolete">?????(_S):</translation>
     </message>
     <message>
         <source>T_woway</source>
-        <translation>??(_W)</translation>
+        <translation type="obsolete">??(_W)</translation>
     </message>
     <message>
         <source>Extrapolate better (better not to use it)</source>
-        <translation>????? (??????)</translation>
+        <translation type="obsolete">????? (??????)</translation>
     </message>
     <message>
         <source>_Map</source>
-        <translation>??(_M)</translation>
+        <translation type="obsolete">??(_M)</translation>
     </message>
     <message>
         <source>Show interlaced areas (for test!)</source>
-        <translation>???????(????)</translation>
+        <translation type="obsolete">???????(????)</translation>
     </message>
     <message>
         <source>KernelDeint</source>
-        <translation>KernelDeint</translation>
+        <translation type="obsolete">KernelDeint</translation>
     </message>
 </context>
 <context>
     <name>ADMVideoLargeMedian</name>
     <message>
         <source>_Process luma</source>
-        <translation>????(_P)</translation>
+        <translation type="obsolete">????(_P)</translation>
     </message>
     <message>
         <source>Process luma plane</source>
-        <translation>??????</translation>
+        <translation type="obsolete">??????</translation>
     </message>
     <message>
         <source>P_rocess chroma</source>
-        <translation>????(_R)</translation>
+        <translation type="obsolete">????(_R)</translation>
     </message>
     <message>
         <source>Large Median 5x5</source>
-        <translation>????? 5x5</translation>
+        <translation type="obsolete">????? 5x5</translation>
     </message>
 </context>
 <context>
     <name>ADMVideoLavPPDeint</name>
     <message>
         <source>None</source>
-        <translation>?</translation>
+        <translation type="obsolete">?</translation>
     </message>
     <message>
         <source>Linear blend</source>
-        <translation>????</translation>
+        <translation type="obsolete">????</translation>
     </message>
     <message>
         <source>Linear interpolate</source>
-        <translation>????</translation>
+        <translation type="obsolete">????</translation>
     </message>
     <message>
         <source>Cubic interpolate</source>
-        <translation>????</translation>
+        <translation type="obsolete">????</translation>
     </message>
     <message>
         <source>Median interpolate</source>
-        <translation>????</translation>
+        <translation type="obsolete">????</translation>
     </message>
     <message>
         <source>FFmpeg deint</source>
-        <translation>FFmpeg deint</translation>
+        <translation type="obsolete">FFmpeg deint</translation>
     </message>
     <message>
         <source>_Deinterlacing:</source>
-        <translation>???(_D):</translation>
+        <translation type="obsolete">???(_D):</translation>
     </message>
     <message>
         <source>_Autolevel</source>
-        <translation>????(_A)</translation>
+        <translation type="obsolete">????(_A)</translation>
     </message>
     <message>
         <source>libavcodec deinterlacer</source>
-        <translation>libavcodec ????</translation>
+        <translation type="obsolete">libavcodec ????</translation>
     </message>
 </context>
 <context>
     <name>ADMVideoLogo</name>
     <message>
         <source>_Logo (jpg file):</source>
-        <translation>??(_L)(jpg ?):</translation>
+        <translation type="obsolete">??(_L)(jpg ?):</translation>
     </message>
     <message>
         <source>Select JPEG file</source>
-        <translation>?? JPEG ??</translation>
+        <translation type="obsolete">?? JPEG ??</translation>
     </message>
     <message>
         <source>_X Position:</source>
-        <translation>_X ??:</translation>
+        <translation type="obsolete">_X ??:</translation>
     </message>
     <message>
         <source>_Y Position:</source>
-        <translation>_Y ??:</translation>
+        <translation type="obsolete">_Y ??:</translation>
     </message>
     <message>
         <source>_Alpha:</source>
-        <translation>_Alpha:</translation>
+        <translation type="obsolete">_Alpha:</translation>
     </message>
     <message>
         <source>Logo</source>
-        <translation>??</translation>
+        <translation type="obsolete">??</translation>
     </message>
 </context>
 <context>
     <name>ADMVideoMPD3D</name>
     <message>
         <source>_Spatial luma strength:</source>
-        <translation>???????(_S):</translation>
+        <translation type="obsolete">???????(_S):</translation>
     </message>
     <message>
         <source>S_patial chroma strength:</source>
-        <translation>???????(_P):</translation>
+        <translation type="obsolete">???????(_P):</translation>
     </message>
     <message>
         <source>_Temporal strength:</source>
-        <translation>????(_T):</translation>
+        <translation type="obsolete">????(_T):</translation>
     </message>
     <message>
         <source>MPlayer hqdn3d</source>
-        <translation>MPlayer hqdn3d</translation>
+        <translation type="obsolete">MPlayer hqdn3d</translation>
     </message>
 </context>
 <context>
     <name>ADMVideoMPD3Dlow</name>
     <message>
         <source>_Spatial luma strength:</source>
-        <translation>???????(_S):</translation>
+        <translation type="obsolete">???????(_S):</translation>
     </message>
     <message>
         <source>S_patial chroma strength:</source>
-        <translation>???????(_P):</translation>
+        <translation type="obsolete">???????(_P):</translation>
     </message>
     <message>
         <source>_Temporal strength:</source>
-        <translation>????(_T):</translation>
+        <translation type="obsolete">????(_T):</translation>
     </message>
     <message>
         <source>MPlayer denoise3d</source>
-        <translation>MPlayer denoise3d</translation>
+        <translation type="obsolete">MPlayer denoise3d</translation>
     </message>
 </context>
 <context>
     <name>ADMVideoMaskedSoften</name>
     <message>
         <source>_Luma threshold:</source>
-        <translation>?????(_L):</translation>
+        <translation type="obsolete">?????(_L):</translation>
     </message>
     <message>
         <source>C_hroma threshold:</source>
-        <translation>?????(_H):</translation>
+        <translation type="obsolete">?????(_H):</translation>
     </message>
     <message>
         <source>_Radius:</source>
-        <translation>??(_R):</translation>
+        <translation type="obsolete">??(_R):</translation>
     </message>
     <message>
         <source>Soften</source>
-        <translation>??</translation>
+        <translation type="obsolete">??</translation>
     </message>
 </context>
 <context>
     <name>ADMVideoMosaic</name>
     <message>
         <source>_Horizontal stacking:</source>
-        <translation>????(_H):</translation>
+        <translation type="obsolete">????(_H):</translation>
     </message>
     <message>
         <source>_Vertical stacking:</source>
-        <translation>????(_V):</translation>
+        <translation type="obsolete">????(_V):</translation>
     </message>
     <message>
         <source>_Shrink factor:</source>
-        <translation>????(_S):</translation>
+        <translation type="obsolete">????(_S):</translation>
     </message>
     <message>
         <source>Show _frame</source>
-        <translation>????(_F)</translation>
+        <translation type="obsolete">????(_F)</translation>
     </message>
     <message>
         <source>Mosaic</source>
-        <translation>???</translation>
+        <translation type="obsolete">???</translation>
     </message>
 </context>
 <context>
     <name>ADMVideoPalShift</name>
     <message>
         <source>_Try reverse</source>
-        <translation>????(_T)</translation>
+        <translation type="obsolete">????(_T)</translation>
     </message>
     <message>
         <source>Pal Field Shift</source>
-        <translation>Pal ???</translation>
+        <translation type="obsolete">Pal ???</translation>
     </message>
 </context>
 <context>
@@ -4493,107 +4555,107 @@
     <name>ADMVideoResampleFPS</name>
     <message>
         <source>_New frame rate:</source>
-        <translation>????(_N):</translation>
+        <translation type="obsolete">????(_N):</translation>
     </message>
     <message>
         <source>_Blend</source>
-        <translation>??(_B)</translation>
+        <translation type="obsolete">??(_B)</translation>
     </message>
     <message>
         <source>Resample fps</source>
-        <translation>???? fps</translation>
+        <translation type="obsolete">???? fps</translation>
     </message>
 </context>
 <context>
     <name>ADMVideoRotate</name>
     <message>
         <source>None</source>
-        <translation>?</translation>
+        <translation type="obsolete">?</translation>
     </message>
     <message>
         <source>90 degrees</source>
-        <translation>90 ?</translation>
+        <translation type="obsolete">90 ?</translation>
     </message>
     <message>
         <source>90??</source>
-        <translation>90??</translation>
+        <translation type="obsolete">90??</translation>
     </message>
     <message>
         <source>180 degrees</source>
-        <translation>180 ?</translation>
+        <translation type="obsolete">180 ?</translation>
     </message>
     <message>
         <source>180??</source>
-        <translation>180??</translation>
+        <translation type="obsolete">180??</translation>
     </message>
     <message>
         <source>270 degrees</source>
-        <translation>270 ?</translation>
+        <translation type="obsolete">270 ?</translation>
     </message>
     <message>
         <source>270??</source>
-        <translation>270??</translation>
+        <translation type="obsolete">270??</translation>
     </message>
     <message>
         <source>_Angle:</source>
-        <translation>??(_A):</translation>
+        <translation type="obsolete">??(_A):</translation>
     </message>
     <message>
         <source>Rotate</source>
-        <translation>??</translation>
+        <translation type="obsolete">??</translation>
     </message>
 </context>
 <context>
     <name>ADMVideoStabilize</name>
     <message>
         <source>Stabilize Threshold</source>
-        <translation>?????</translation>
+        <translation type="obsolete">?????</translation>
     </message>
     <message>
         <source>Stabilize</source>
-        <translation>??</translation>
+        <translation type="obsolete">??</translation>
     </message>
 </context>
 <context>
     <name>ADMVideoSubASS</name>
     <message>
         <source>_Subtitle file (ASS/SSA):</source>
-        <translation>???(A_SS/SSA):</translation>
+        <translation type="obsolete">???(A_SS/SSA):</translation>
     </message>
     <message>
         <source>Select Subtitle file</source>
-        <translation>?????</translation>
+        <translation type="obsolete">?????</translation>
     </message>
     <message>
         <source>_Line spacing:</source>
-        <translation>??(_L):</translation>
+        <translation type="obsolete">??(_L):</translation>
     </message>
     <message>
         <source>_Font scale:</source>
-        <translation>????(_F):</translation>
+        <translation type="obsolete">????(_F):</translation>
     </message>
     <message>
         <source>_Top margin:</source>
-        <translation>????(_T):</translation>
+        <translation type="obsolete">????(_T):</translation>
     </message>
     <message>
         <source>Botto_m margin</source>
-        <translation>????(_M)</translation>
+        <translation type="obsolete">????(_M)</translation>
     </message>
     <message>
         <source>ASS</source>
-        <translation>ASS</translation>
+        <translation type="obsolete">ASS</translation>
     </message>
 </context>
 <context>
     <name>ADMVideoSubtitle</name>
     <message>
         <source>Could not open subtitle file</source>
-        <translation>???????</translation>
+        <translation type="obsolete">???????</translation>
     </message>
     <message>
         <source>Cannot identify subtitle format</source>
-        <translation>????????</translation>
+        <translation type="obsolete">????????</translation>
     </message>
 </context>
 <context>
@@ -4728,7 +4790,7 @@
     </message>
     <message>
         <source>_Histogram every N frames (0 to disable):</source>
-        <translation>? N ??????? (0 ???)(_H):</translation>
+        <translation>? N ??????? (0 ???)(_H):</translation>
     </message>
     <message>
         <source>_Debugging settings (bits):</source>
@@ -4736,7 +4798,7 @@
     </message>
     <message>
         <source>Swiss Army Knife Configuration</source>
-        <translation>??????</translation>
+        <translation>??????</translation>
     </message>
 </context>
 <context>
@@ -4767,57 +4829,57 @@
     </message>
     <message>
         <source>Threshold Configuration</source>
-        <translation>?????</translation>
+        <translation>?????</translation>
     </message>
 </context>
 <context>
     <name>ADMVideoYadif</name>
     <message>
         <source>Temporal &amp; spatial check</source>
-        <translation>?? &amp; ????</translation>
+        <translation type="obsolete">?? &amp; ????</translation>
     </message>
     <message>
         <source>Bob, temporal &amp; spatial check</source>
-        <translation>??????? &amp; ????</translation>
+        <translation type="obsolete">??????? &amp; ????</translation>
     </message>
     <message>
         <source>Skip spatial temporal check</source>
-        <translation>????????</translation>
+        <translation type="obsolete">????????</translation>
     </message>
     <message>
         <source>Bob, skip spatial temporal check</source>
-        <translation>?????????????</translation>
+        <translation type="obsolete">?????????????</translation>
     </message>
     <message>
         <source>Bottom field first</source>
-        <translation>?????</translation>
+        <translation type="obsolete">?????</translation>
     </message>
     <message>
         <source>Top field first</source>
-        <translation>?????</translation>
+        <translation type="obsolete">?????</translation>
     </message>
     <message>
         <source>_Mode:</source>
-        <translation>??(_M):</translation>
+        <translation type="obsolete">??(_M):</translation>
     </message>
     <message>
         <source>_Order:</source>
-        <translation>??(_O):</translation>
+        <translation type="obsolete">??(_O):</translation>
     </message>
     <message>
         <source>yadif</source>
-        <translation>yadif</translation>
+        <translation type="obsolete">yadif</translation>
     </message>
 </context>
 <context>
     <name>ADM_AudiocodecAMR</name>
     <message>
         <source>Internal error</source>
-        <translation>????</translation>
+        <translation type="obsolete">????</translation>
     </message>
     <message>
         <source>Cannot open AMR codec.</source>
-        <translation>???? AMR ?????</translation>
+        <translation type="obsolete">???? AMR ?????</translation>
     </message>
 </context>
 <context>
@@ -4911,7 +4973,7 @@
         <source>If the file is using B-frames as reference it can lead to a crash or stuttering.
 Avidemux can use another mode which is safe but YOU WILL LOSE FRAME ACCURACY.
 Do you want to use that mode?</source>
-        <translation>???????? B-?????????????????????
+        <translation>???????? B-????????????????????????
 Avidemux ??????????????&lt;b&gt;??????????&lt;/b&gt;?
 ????????? ?</translation>
     </message>
@@ -4941,11 +5003,11 @@
     </message>
     <message>
         <source>Troubles ahead</source>
-        <translation>???</translation>
+        <translation type="obsolete">???</translation>
     </message>
     <message>
         <source>This a VOP packed AVI.</source>
-        <translation>????????? VOP ? AVI?</translation>
+        <translation type="obsolete">????????? VOP ? AVI?</translation>
     </message>
     <message>
         <source>Index is not up to date</source>
@@ -4970,10 +5032,65 @@
     <name>ADM_Qbitrate</name>
     <message>
         <source>Constant Bitrate</source>
-        <translation>?????</translation>
+        <translation type="obsolete">?????</translation>
     </message>
     <message>
         <source>Constant Quantiser</source>
+        <translation type="obsolete">?????</translation>
+    </message>
+    <message>
+        <source>Same Quantiser as Input</source>
+        <translation type="obsolete">??????????</translation>
+    </message>
+    <message>
+        <source>Constant Rate Factor</source>
+        <translation type="obsolete">???????</translation>
+    </message>
+    <message>
+        <source>Two Pass - Video Size</source>
+        <translation type="obsolete">???? - ????</translation>
+    </message>
+    <message>
+        <source>Two Pass - Average Bitrate</source>
+        <translation type="obsolete">???? - ?????</translation>
+    </message>
+    <message>
+        <source>Encoding mode</source>
+        <translation type="obsolete">????</translation>
+    </message>
+    <message>
+        <source>Bitrate</source>
+        <translation type="obsolete">???</translation>
+    </message>
+    <message>
+        <source>Target bitrate (kb/s)</source>
+        <translation type="obsolete">????? (kb/s)</translation>
+    </message>
+    <message>
+        <source>Quantizer</source>
+        <translation type="obsolete">???</translation>
+    </message>
+    <message>
+        <source>Target video size (MB)</source>
+        <translation type="obsolete">?????? (MB)</translation>
+    </message>
+    <message>
+        <source>Average bitrate (kb/s)</source>
+        <translation type="obsolete">????? (kb/s)</translation>
+    </message>
+    <message>
+        <source>-</source>
+        <translation type="obsolete">-</translation>
+    </message>
+</context>
+<context>
+    <name>ADM_Qt4Factory::ADM_Qbitrate</name>
+    <message>
+        <source>Constant Bitrate</source>
+        <translation>?????</translation>
+    </message>
+    <message>
+        <source>Constant Quantiser</source>
         <translation>?????</translation>
     </message>
     <message>
@@ -4982,7 +5099,7 @@
     </message>
     <message>
         <source>Constant Rate Factor</source>
-        <translation>???????</translation>
+        <translation>???????</translation>
     </message>
     <message>
         <source>Two Pass - Video Size</source>
@@ -5022,18 +5139,49 @@
     </message>
 </context>
 <context>
+    <name>ADM_Qt4Factory::ADM_QconfigMenu</name>
+    <message>
+        <source>Configuration:</source>
+        <translation>??:</translation>
+    </message>
+    <message>
+        <source>Save As</source>
+        <translation>??</translation>
+    </message>
+    <message>
+        <source>Delete</source>
+        <translation>??</translation>
+    </message>
+    <message>
+        <source>&lt;default&gt;</source>
+        <translation>&lt;??&gt;</translation>
+    </message>
+    <message>
+        <source>&lt;custom&gt;</source>
+        <translation>&lt;??&gt;</translation>
+    </message>
+    <message>
+        <source>Are you sure you wish to delete the selected configuration?</source>
+        <translation>????????????</translation>
+    </message>
+    <message>
+        <source>Configuration File (*.xml)</source>
+        <translation>??? (*.xml)</translation>
+    </message>
+</context>
+<context>
     <name>ADM_QthreadCount</name>
     <message>
         <source>Disabled</source>
-        <translation>??</translation>
+        <translation type="obsolete">??</translation>
     </message>
     <message>
         <source>Auto-detect</source>
-        <translation>????</translation>
+        <translation type="obsolete">????</translation>
     </message>
     <message>
         <source>Custom</source>
-        <translation>??</translation>
+        <translation type="obsolete">??</translation>
     </message>
 </context>
 <context>
@@ -5087,7 +5235,7 @@
     <message>
         <source>
  Reuse the existing log-file ?</source>
-        <translation>
+        <translation type="obsolete">
 ?????????? ?</translation>
     </message>
     <message>
@@ -5102,8 +5250,27 @@
         <source>Encoding</source>
         <translation>????</translation>
     </message>
+    <message>
+        <source>Reuse the existing log file?</source>
+        <translation>???????????</translation>
+    </message>
 </context>
 <context>
+    <name>ADM_qt4Factory::ADM_QthreadCount</name>
+    <message>
+        <source>Disabled</source>
+        <translation>??</translation>
+    </message>
+    <message>
+        <source>Auto-detect</source>
+        <translation>????</translation>
+    </message>
+    <message>
+        <source>Custom</source>
+        <translation>??</translation>
+    </message>
+</context>
+<context>
     <name>ADM_qtray</name>
     <message>
         <source>Open Avidemux</source>
@@ -5114,19 +5281,19 @@
     <name>AVDMFastVideoConvolution</name>
     <message>
         <source>_Process luma</source>
-        <translation>????(_P)</translation>
+        <translation type="obsolete">????(_P)</translation>
     </message>
     <message>
         <source>Process luma plane</source>
-        <translation>??????</translation>
+        <translation type="obsolete">??????</translation>
     </message>
     <message>
         <source>P_rocess chroma</source>
-        <translation>????(_R)</translation>
+        <translation type="obsolete">????(_R)</translation>
     </message>
     <message>
         <source>Fast Convolution</source>
-        <translation>????</translation>
+        <translation type="obsolete">????</translation>
     </message>
 </context>
 <context>
@@ -5140,174 +5307,174 @@
     <name>AVDMVideoAddBorder</name>
     <message>
         <source>_Left border:</source>
-        <translation>????(_L):</translation>
+        <translation type="obsolete">????(_L):</translation>
     </message>
     <message>
         <source>_Right border:</source>
-        <translation>????(_R):</translation>
+        <translation type="obsolete">????(_R):</translation>
     </message>
     <message>
         <source>_Top border:</source>
-        <translation>????(_T):</translation>
+        <translation type="obsolete">????(_T):</translation>
     </message>
     <message>
         <source>_Bottom border:</source>
-        <translation>????(_B):</translation>
+        <translation type="obsolete">????(_B):</translation>
     </message>
     <message>
         <source>Add Borders</source>
-        <translation>????</translation>
+        <translation type="obsolete">????</translation>
     </message>
     <message>
         <source>Incorrect parameters</source>
-        <translation>??????</translation>
+        <translation type="obsolete">??????</translation>
     </message>
     <message>
         <source>All parameters must be even and within range.</source>
-        <translation>???????????????</translation>
+        <translation type="obsolete">???????????????</translation>
     </message>
 </context>
 <context>
     <name>AVDMVideoMCDeint</name>
     <message>
         <source>Fast</source>
-        <translation>?</translation>
+        <translation type="obsolete">?</translation>
     </message>
     <message>
         <source>Medium</source>
-        <translation>?</translation>
+        <translation type="obsolete">?</translation>
     </message>
     <message>
         <source>Slow iterative motion search</source>
-        <translation>?????????</translation>
+        <translation type="obsolete">?????????</translation>
     </message>
     <message>
         <source>Extra slow (same as 3+multiple reference frames)</source>
-        <translation>??? (??3?3??????????)</translation>
+        <translation type="obsolete">??? (??3?3??????????)</translation>
     </message>
     <message>
         <source>Top</source>
-        <translation>??</translation>
+        <translation type="obsolete">??</translation>
     </message>
     <message>
         <source>Bottom</source>
-        <translation>??</translation>
+        <translation type="obsolete">??</translation>
     </message>
     <message>
         <source>_Mode:</source>
-        <translation>??(_M):</translation>
+        <translation type="obsolete">??(_M):</translation>
     </message>
     <message>
         <source>_Field dominance:</source>
-        <translation>????(_F):</translation>
+        <translation type="obsolete">????(_F):</translation>
     </message>
     <message>
         <source>_Qp:</source>
-        <translation>_Qp:</translation>
+        <translation type="obsolete">_Qp:</translation>
     </message>
     <message>
         <source>mcDeinterlace</source>
-        <translation>mcDeinterlace</translation>
+        <translation type="obsolete">mcDeinterlace</translation>
     </message>
 </context>
 <context>
     <name>AVDMVideoStreamBSMear</name>
     <message>
         <source>_Left border:</source>
-        <translation>????(_L):</translation>
+        <translation type="obsolete">????(_L):</translation>
     </message>
     <message>
         <source>_Right border:</source>
-        <translation>????(_R):</translation>
+        <translation type="obsolete">????(_R):</translation>
     </message>
     <message>
         <source>_Top border:</source>
-        <translation>????(_T):</translation>
+        <translation type="obsolete">????(_T):</translation>
     </message>
     <message>
         <source>_Bottom border:</source>
-        <translation>????(_B):</translation>
+        <translation type="obsolete">????(_B):</translation>
     </message>
     <message>
         <source>Blacken Borders</source>
-        <translation>????</translation>
+        <translation type="obsolete">????</translation>
     </message>
     <message>
         <source>Incorrect parameters</source>
-        <translation>??????</translation>
+        <translation type="obsolete">??????</translation>
     </message>
     <message>
         <source>All parameters must be even and within range.</source>
-        <translation>???????????????</translation>
+        <translation type="obsolete">???????????????</translation>
     </message>
 </context>
 <context>
     <name>AVDMVideoStreamCrop</name>
     <message>
         <source>Crop Settings</source>
-        <translation>????</translation>
+        <translation type="obsolete">????</translation>
     </message>
 </context>
 <context>
     <name>AVDMVideoVlad</name>
     <message>
         <source>_Luma temporal threshold:</source>
-        <translation>???????(_L):</translation>
+        <translation type="obsolete">???????(_L):</translation>
     </message>
     <message>
         <source>Ch_roma temporal threshold:</source>
-        <translation>???????(_R):</translation>
+        <translation type="obsolete">???????(_R):</translation>
     </message>
     <message>
         <source>Temporal Cleaner</source>
-        <translation>?????</translation>
+        <translation type="obsolete">?????</translation>
     </message>
 </context>
 <context>
     <name>AVDM_Fade</name>
     <message>
         <source>Out</source>
-        <translation>?</translation>
+        <translation type="obsolete">?</translation>
     </message>
     <message>
         <source>Fade out</source>
-        <translation>??</translation>
+        <translation type="obsolete">??</translation>
     </message>
     <message>
         <source>In</source>
-        <translation>?</translation>
+        <translation type="obsolete">?</translation>
     </message>
     <message>
         <source>Fade in</source>
-        <translation>??</translation>
+        <translation type="obsolete">??</translation>
     </message>
     <message>
         <source>_Fade type:</source>
-        <translation>????(_F):</translation>
+        <translation type="obsolete">????(_F):</translation>
     </message>
     <message>
         <source>_Start frame:</source>
-        <translation>????(_S):</translation>
+        <translation type="obsolete">????(_S):</translation>
     </message>
     <message>
         <source>_End frame:</source>
-        <translation>????(_E):</translation>
+        <translation type="obsolete">????(_E):</translation>
     </message>
     <message>
         <source>Fade to _black</source>
-        <translation>???????(_B)</translation>
+        <translation type="obsolete">???????(_B)</translation>
     </message>
     <message>
         <source>Fade</source>
-        <translation>??</translation>
+        <translation type="obsolete">??</translation>
     </message>
     <message>
         <source>Parameter Error</source>
-        <translation>????</translation>
+        <translation type="obsolete">????</translation>
     </message>
     <message>
         <source>Start must be before end, and both within video # of frames.</source>
-        <translation>??????????????????? # ???</translation>
+        <translation type="obsolete">??????????????????? # ???</translation>
     </message>
 </context>
 <context>
@@ -5418,7 +5585,7 @@
     </message>
     <message>
         <source>Bits Per Pixel:</source>
-        <translation>??????:</translation>
+        <translation>??????:</translation>
     </message>
     <message>
         <source>Video Bitrate:</source>
@@ -5429,205 +5596,205 @@
     <name>Cnr2Dialog</name>
     <message>
         <source>Chroma Noise Reducer 2</source>
-        <translation>??????? 2</translation>
+        <translation type="obsolete">??????? 2</translation>
     </message>
     <message>
         <source>Scene Change</source>
-        <translation>????</translation>
+        <translation type="obsolete">????</translation>
     </message>
     <message>
         <source>0%</source>
-        <translation>0%</translation>
+        <translation type="obsolete">0%</translation>
     </message>
     <message>
         <source>Scene Change Threshold</source>
-        <translation>???????</translation>
+        <translation type="obsolete">???????</translation>
     </message>
     <message>
         <source>100%</source>
-        <translation>100%</translation>
+        <translation type="obsolete">100%</translation>
     </message>
     <message>
         <source>Use chroma to also detect scene change</source>
-        <translation>????????????</translation>
+        <translation type="obsolete">????????????</translation>
     </message>
     <message>
         <source>Settings</source>
-        <translation>??</translation>
+        <translation type="obsolete">??</translation>
     </message>
     <message>
         <source>Wide</source>
-        <translation>??</translation>
+        <translation type="obsolete">??</translation>
     </message>
     <message>
         <source>Narrow</source>
-        <translation>??</translation>
+        <translation type="obsolete">??</translation>
     </message>
     <message>
         <source>Mode</source>
-        <translation>??</translation>
+        <translation type="obsolete">??</translation>
     </message>
     <message>
         <source>Luma Y:</source>
-        <translation>?? Y:</translation>
+        <translation type="obsolete">?? Y:</translation>
     </message>
     <message>
         <source>Chroma V:</source>
-        <translation>?? V:</translation>
+        <translation type="obsolete">?? V:</translation>
     </message>
     <message>
         <source>Maximum</source>
-        <translation>???</translation>
+        <translation type="obsolete">???</translation>
     </message>
     <message>
         <source>Chroma U:</source>
-        <translation>?? U:</translation>
+        <translation type="obsolete">?? U:</translation>
     </message>
     <message>
         <source>Sensibility</source>
-        <translation>???</translation>
+        <translation type="obsolete">???</translation>
     </message>
 </context>
 <context>
     <name>ColorYuvDialog</name>
     <message>
         <source>Avisynth ColorYUV</source>
-        <translation>Avisynth ColorYUV</translation>
+        <translation type="obsolete">Avisynth ColorYUV</translation>
     </message>
     <message>
         <source>Colour Correction Matrix</source>
-        <translation>??????</translation>
+        <translation type="obsolete">??????</translation>
     </message>
     <message>
         <source>Contrast</source>
-        <translation>??</translation>
+        <translation type="obsolete">??</translation>
     </message>
     <message>
         <source>Chroma U:</source>
-        <translation>?? U:</translation>
+        <translation type="obsolete">?? U:</translation>
     </message>
     <message>
         <source>Chroma V:</source>
-        <translation>?? V:</translation>
+        <translation type="obsolete">?? V:</translation>
     </message>
     <message>
         <source>Luma Y:</source>
-        <translation>?? Y:</translation>
+        <translation type="obsolete">?? Y:</translation>
     </message>
     <message>
         <source>Brightness</source>
-        <translation>??</translation>
+        <translation type="obsolete">??</translation>
     </message>
     <message>
         <source>Gain</source>
-        <translation>??</translation>
+        <translation type="obsolete">??</translation>
     </message>
     <message>
         <source>Gamma</source>
-        <translation>??</translation>
+        <translation type="obsolete">??</translation>
     </message>
     <message>
         <source>Note: all values are normalised to 256</source>
-        <translation>??: ????????????? 256</translation>
+        <translation type="obsolete">??: ????????????? 256</translation>
     </message>
     <message>
         <source>Parameters</source>
-        <translation>??</translation>
+        <translation type="obsolete">??</translation>
     </message>
     <message>
         <source>Matrix:</source>
-        <translation>??:</translation>
+        <translation type="obsolete">??:</translation>
     </message>
     <message>
         <source>None</source>
-        <translation>?</translation>
+        <translation type="obsolete">?</translation>
     </message>
     <message>
         <source>TV -&gt; PC</source>
-        <translation>TV ?? PC</translation>
+        <translation type="obsolete">TV ?? PC</translation>
     </message>
     <message>
         <source>PC -&gt; TV</source>
-        <translation>PC ?? TV</translation>
+        <translation type="obsolete">PC ?? TV</translation>
     </message>
     <message>
         <source>PC -&gt; TV.Y</source>
-        <translation>PC ?? TV.Y</translation>
+        <translation type="obsolete">PC ?? TV.Y</translation>
     </message>
     <message>
         <source>Level:</source>
-        <translation>??:</translation>
+        <translation type="obsolete">??:</translation>
     </message>
     <message>
         <source>Rec.709</source>
-        <translation>Rec.709</translation>
+        <translation type="obsolete">Rec.709</translation>
     </message>
     <message>
         <source>Coring</source>
-        <translation>????</translation>
+        <translation type="obsolete">????</translation>
     </message>
     <message>
         <source>Opt:</source>
-        <translation>??:</translation>
+        <translation type="obsolete">??:</translation>
     </message>
     <message>
         <source>Auto Gain</source>
-        <translation>????</translation>
+        <translation type="obsolete">????</translation>
     </message>
     <message>
         <source>Display Colour Statistics</source>
-        <translation>??????</translation>
+        <translation type="obsolete">??????</translation>
     </message>
     <message>
         <source>Centre Colour Offsets</source>
-        <translation>??????</translation>
+        <translation type="obsolete">??????</translation>
     </message>
 </context>
 <context>
     <name>DGbob</name>
     <message>
         <source>Top</source>
-        <translation>??</translation>
+        <translation type="obsolete">??</translation>
     </message>
     <message>
         <source>Bottom</source>
-        <translation>??</translation>
+        <translation type="obsolete">??</translation>
     </message>
     <message>
         <source>Keep nb of frames and fps</source>
-        <translation>????? fps ???</translation>
+        <translation type="obsolete">????? fps ???</translation>
     </message>
     <message>
         <source>Double nb of frames and fps</source>
-        <translation>????? fps ???</translation>
+        <translation type="obsolete">????? fps ???</translation>
     </message>
     <message>
         <source>Double nb of frames (slow motion)</source>
-        <translation>???????(???)</translation>
+        <translation type="obsolete">???????(???)</translation>
     </message>
     <message>
         <source>_Field order:</source>
-        <translation>??????(_F):</translation>
+        <translation type="obsolete">??????(_F):</translation>
     </message>
     <message>
         <source>_Mode:</source>
-        <translation>??(_M):</translation>
+        <translation type="obsolete">??(_M):</translation>
     </message>
     <message>
         <source>_Threshold:</source>
-        <translation>???(_T):</translation>
+        <translation type="obsolete">???(_T):</translation>
     </message>
     <message>
         <source>_Extra</source>
-        <translation>??(_E)</translation>
+        <translation type="obsolete">??(_E)</translation>
     </message>
     <message>
         <source>Extra check, avoid using it</source>
-        <translation>????????????</translation>
+        <translation type="obsolete">????????????</translation>
     </message>
     <message>
         <source>DGBob</source>
-        <translation>DGBob</translation>
+        <translation type="obsolete">DGBob</translation>
     </message>
 </context>
 <context>
@@ -5664,59 +5831,59 @@
     <name>Decimate</name>
     <message>
         <source>Discard closer</source>
-        <translation>??????</translation>
+        <translation type="obsolete">??????</translation>
     </message>
     <message>
         <source>Replace (interpolate)</source>
-        <translation>?? (??)</translation>
+        <translation type="obsolete">?? (??)</translation>
     </message>
     <message>
         <source>Discard longer dupe (anim??s)</source>
-        <translation>?? longer dupe (anim?s)</translation>
+        <translation type="obsolete">?? longer dupe (anim?s)</translation>
     </message>
     <message>
         <source>Pulldown dupe removal</source>
-        <translation>?? Pulldown ??</translation>
+        <translation type="obsolete">?? Pulldown ??</translation>
     </message>
     <message>
         <source>Fastest (no chroma, partial luma)</source>
-        <translation>?? (??????????)</translation>
+        <translation type="obsolete">?? (??????????)</translation>
     </message>
     <message>
         <source>Fast (partial luma and chroma)</source>
-        <translation>? (?????????)</translation>
+        <translation type="obsolete">? (?????????)</translation>
     </message>
     <message>
         <source>Medium (full luma, no chroma)</source>
-        <translation>? (??????????)</translation>
+        <translation type="obsolete">? (??????????)</translation>
     </message>
     <message>
         <source>Slow (full luma and chroma)</source>
-        <translation>? (????????)</translation>
+        <translation type="obsolete">? (????????)</translation>
     </message>
     <message>
         <source>_Mode:</source>
-        <translation>??(_M):</translation>
+        <translation type="obsolete">??(_M):</translation>
     </message>
     <message>
         <source>_Quality:</source>
-        <translation>??(_Q):</translation>
+        <translation type="obsolete">??(_Q):</translation>
     </message>
     <message>
         <source>_Threshold 1:</source>
-        <translation>??? 1(_T):</translation>
+        <translation type="obsolete">??? 1(_T):</translation>
     </message>
     <message>
         <source>T_hreshold 2:</source>
-        <translation>??? 2(_H):</translation>
+        <translation type="obsolete">??? 2(_H):</translation>
     </message>
     <message>
         <source>C_ycle:</source>
-        <translation>??(_Y):</translation>
+        <translation type="obsolete">??(_Y):</translation>
     </message>
     <message>
         <source>Decomb Decimate</source>
-        <translation>???????????</translation>
+        <translation type="obsolete">???????????</translation>
     </message>
 </context>
 <context>
@@ -5735,538 +5902,538 @@
     </message>
     <message>
         <source>ASharp</source>
-        <translation>ASharp</translation>
+        <translation type="obsolete">ASharp</translation>
     </message>
     <message>
         <source>Strength</source>
-        <translation>??</translation>
+        <translation type="obsolete">??</translation>
     </message>
     <message>
         <source>Threshold</source>
-        <translation>???</translation>
+        <translation type="obsolete">???</translation>
     </message>
     <message>
         <source>Block Adaptative</source>
-        <translation>????</translation>
+        <translation type="obsolete">????</translation>
     </message>
     <message>
         <source>Unknown flag</source>
-        <translation>?????</translation>
+        <translation type="obsolete">?????</translation>
     </message>
     <message>
         <source>ChromaShift</source>
-        <translation>????</translation>
+        <translation type="obsolete">????</translation>
     </message>
     <message>
         <source>V Shift</source>
-        <translation>V ??</translation>
+        <translation type="obsolete">V ??</translation>
     </message>
     <message>
         <source>U Shift</source>
-        <translation>U ??</translation>
+        <translation type="obsolete">U ??</translation>
     </message>
     <message>
         <source>Contrast</source>
-        <translation>??</translation>
+        <translation type="obsolete">??</translation>
     </message>
     <message>
         <source>Luma</source>
-        <translation>??</translation>
+        <translation type="obsolete">??</translation>
     </message>
     <message>
         <source>ChromaU</source>
-        <translation>??U</translation>
+        <translation type="obsolete">??U</translation>
     </message>
     <message>
         <source>ChromaV</source>
-        <translation>??V</translation>
+        <translation type="obsolete">??V</translation>
     </message>
     <message>
         <source>Brightness</source>
-        <translation>??</translation>
+        <translation type="obsolete">??</translation>
     </message>
     <message>
         <source>Crop</source>
-        <translation>??</translation>
+        <translation type="obsolete">??</translation>
     </message>
     <message>
         <source>Right:</source>
-        <translation>?:</translation>
+        <translation type="obsolete">?:</translation>
     </message>
     <message>
         <source>Top:</source>
-        <translation>??:</translation>
+        <translation type="obsolete">??:</translation>
     </message>
     <message>
         <source>Reset</source>
-        <translation>??</translation>
+        <translation type="obsolete">??</translation>
     </message>
     <message>
         <source>Bottom:</source>
-        <translation>??:</translation>
+        <translation type="obsolete">??:</translation>
     </message>
     <message>
         <source>Left:</source>
-        <translation>?:</translation>
+        <translation type="obsolete">?:</translation>
     </message>
     <message>
         <source>Auto Crop</source>
-        <translation>????</translation>
+        <translation type="obsolete">????</translation>
     </message>
     <message>
         <source>Encoding...</source>
-        <translation>????...</translation>
+        <translation type="obsolete">????...</translation>
     </message>
     <message>
         <source>Phase:</source>
-        <translation>??:</translation>
+        <translation type="obsolete">??:</translation>
     </message>
     <message>
         <source>Video Codec:</source>
-        <translation>??????:</translation>
+        <translation type="obsolete">??????:</translation>
     </message>
     <message>
         <source>None</source>
-        <translation>?</translation>
+        <translation type="obsolete">?</translation>
     </message>
     <message>
         <source>Unknown</source>
-        <translation>??</translation>
+        <translation type="obsolete">??</translation>
     </message>
     <message>
         <source>Container:</source>
-        <translation>??:</translation>
+        <translation type="obsolete">??:</translation>
     </message>
     <message>
         <source>Audio Codec:</source>
-        <translation>??????:</translation>
+        <translation type="obsolete">??????:</translation>
     </message>
     <message>
         <source>0</source>
-        <translation>0</translation>
+        <translation type="obsolete">0</translation>
     </message>
     <message>
         <source>00:00:00</source>
-        <translation>00:00:00</translation>
+        <translation type="obsolete">00:00:00</translation>
     </message>
     <message>
         <source>Elapsed:</source>
-        <translation>????:</translation>
+        <translation type="obsolete">????:</translation>
     </message>
     <message>
         <source>Time Remaining:</source>
-        <translation>????:</translation>
+        <translation type="obsolete">????:</translation>
     </message>
     <message>
         <source>Frames/sec:</source>
-        <translation>??/?:</translation>
+        <translation type="obsolete">??/?:</translation>
     </message>
     <message>
         <source>0 MB</source>
-        <translation>0 MB</translation>
+        <translation type="obsolete">0 MB</translation>
     </message>
     <message>
         <source>Total Size:</source>
-        <translation>???:</translation>
+        <translation type="obsolete">???:</translation>
     </message>
     <message>
         <source>Audio Size:</source>
-        <translation>????:</translation>
+        <translation type="obsolete">????:</translation>
     </message>
     <message>
         <source>Video Size:</source>
-        <translation>????:</translation>
+        <translation type="obsolete">????:</translation>
     </message>
     <message>
         <source>Processed Frames:</source>
-        <translation>???????:</translation>
+        <translation type="obsolete">???????:</translation>
     </message>
     <message>
         <source>Total Frames:</source>
-        <translation>????:</translation>
+        <translation type="obsolete">????:</translation>
     </message>
     <message>
         <source>0 kB/s</source>
-        <translation>0 kB/s</translation>
+        <translation type="obsolete">0 kB/s</translation>
     </message>
     <message>
         <source>Average Bitrate:</source>
-        <translation>?????:</translation>
+        <translation type="obsolete">?????:</translation>
     </message>
     <message>
         <source>Quantiser:</source>
-        <translation>???:</translation>
+        <translation type="obsolete">???:</translation>
     </message>
     <message>
         <source>Shut down computer when finished</source>
-        <translation>???????</translation>
+        <translation type="obsolete">???????</translation>
     </message>
     <message>
         <source>Priority:</source>
-        <translation>???:</translation>
+        <translation type="obsolete">???:</translation>
     </message>
     <message>
         <source>High</source>
-        <translation>?</translation>
+        <translation type="obsolete">?</translation>
     </message>
     <message>
         <source>Above Normal</source>
-        <translation>????</translation>
+        <translation type="obsolete">????</translation>
     </message>
     <message>
         <source>Normal</source>
-        <translation>??</translation>
+        <translation type="obsolete">??</translation>
     </message>
     <message>
         <source>Below Normal</source>
-        <translation>????</translation>
+        <translation type="obsolete">????</translation>
     </message>
     <message>
         <source>Low</source>
-        <translation>?</translation>
+        <translation type="obsolete">?</translation>
     </message>
     <message>
         <source>Hue</source>
-        <translation>??</translation>
+        <translation type="obsolete">??</translation>
     </message>
     <message>
         <source>Saturation</source>
-        <translation>???</translation>
+        <translation type="obsolete">???</translation>
     </message>
     <message>
         <source>Properties</source>
-        <translation>??</translation>
+        <translation type="obsolete">??</translation>
     </message>
     <message>
         <source>Video</source>
-        <translation>??</translation>
+        <translation type="obsolete">??</translation>
     </message>
     <message>
         <source>TextLabel</source>
-        <translation>????</translation>
+        <translation type="obsolete">????</translation>
     </message>
     <message>
         <source>Frame Rate:</source>
-        <translation>???:</translation>
+        <translation type="obsolete">???:</translation>
     </message>
     <message>
         <source>Frame Count: </source>
-        <translation>????: </translation>
+        <translation type="obsolete">????: </translation>
     </message>
     <message>
         <source>Total Duration:</source>
-        <translation>?????:</translation>
+        <translation type="obsolete">?????:</translation>
     </message>
     <message>
         <source>Aspect Ratio:</source>
-        <translation>????:</translation>
+        <translation type="obsolete">????:</translation>
     </message>
     <message>
         <source>Image Size:</source>
-        <translation>????:</translation>
+        <translation type="obsolete">????:</translation>
     </message>
     <message>
         <source>Codec 4CC:</source>
-        <translation>???? 4CC:</translation>
+        <translation type="obsolete">???? 4CC:</translation>
     </message>
     <message>
         <source>Extra Video Properties</source>
-        <translation>???????</translation>
+        <translation type="obsolete">???????</translation>
     </message>
     <message>
         <source>Global Motion Compensation:</source>
-        <translation>??????:</translation>
+        <translation type="obsolete">??????:</translation>
     </message>
     <message>
         <source>Packed Bitstream:</source>
-        <translation>???????:</translation>
+        <translation type="obsolete">???????:</translation>
     </message>
     <message>
         <source>Quarter Pixel:</source>
-        <translation>1/4 ??:</translation>
+        <translation type="obsolete">1/4 ??:</translation>
     </message>
     <message>
         <source>Audio</source>
-        <translation>??</translation>
+        <translation type="obsolete">??</translation>
     </message>
     <message>
         <source>File Size:</source>
-        <translation>????:</translation>
+        <translation type="obsolete">????:</translation>
     </message>
     <message>
         <source>Frequency:</source>
-        <translation>??:</translation>
+        <translation type="obsolete">??:</translation>
     </message>
     <message>
         <source>Variable Bitrate:</source>
-        <translation>?????:</translation>
+        <translation type="obsolete">?????:</translation>
     </message>
     <message>
         <source>Bitrate:</source>
-        <translation>???:</translation>
+        <translation type="obsolete">???:</translation>
     </message>
     <message>
         <source>Channels:</source>
-        <translation>??:</translation>
+        <translation type="obsolete">??:</translation>
     </message>
     <message>
         <source>Codec:</source>
-        <translation>????:</translation>
+        <translation type="obsolete">????:</translation>
     </message>
     <message>
         <source>Resize</source>
-        <translation>????</translation>
+        <translation type="obsolete">????</translation>
     </message>
     <message>
         <source>Aspect Ratio</source>
-        <translation>????</translation>
+        <translation type="obsolete">????</translation>
     </message>
     <message>
         <source>Lock Aspect Ratio</source>
-        <translation>??????</translation>
+        <translation type="obsolete">??????</translation>
     </message>
     <message>
         <source>Source:</source>
-        <translation>??:</translation>
+        <translation type="obsolete">??:</translation>
     </message>
     <message>
         <source>1:1</source>
-        <translation>1:1</translation>
+        <translation type="obsolete">1:1</translation>
     </message>
     <message>
         <source>4:3</source>
-        <translation>4:3</translation>
+        <translation type="obsolete">4:3</translation>
     </message>
     <message>
         <source>16:9</source>
-        <translation>16:9</translation>
+        <translation type="obsolete">16:9</translation>
     </message>
     <message>
         <source>Destination:</source>
-        <translation>???:</translation>
+        <translation type="obsolete">???:</translation>
     </message>
     <message>
         <source>Resize Dimensions</source>
-        <translation>??????</translation>
+        <translation type="obsolete">??????</translation>
     </message>
     <message>
         <source>Width:</source>
-        <translation>??:</translation>
+        <translation type="obsolete">??:</translation>
     </message>
     <message>
         <source>Height:</source>
-        <translation>??:</translation>
+        <translation type="obsolete">??:</translation>
     </message>
     <message>
         <source>Round to the Nearest Multiple of 16</source>
-        <translation>?????? 16 ???</translation>
+        <translation type="obsolete">?????? 16 ???</translation>
     </message>
     <message>
         <source>1%</source>
-        <translation>1%</translation>
+        <translation type="obsolete">1%</translation>
     </message>
     <message>
         <source>Percent</source>
-        <translation>???</translation>
+        <translation type="obsolete">???</translation>
     </message>
     <message>
         <source>200%</source>
-        <translation>200%</translation>
+        <translation type="obsolete">200%</translation>
     </message>
     <message>
         <source>Error X / Y:</source>
-        <translation>?? X / Y:</translation>
+        <translation type="obsolete">?? X / Y:</translation>
     </message>
     <message>
         <source>0.00 / 0.00</source>
-        <translation>0.00 / 0.00</translation>
+        <translation type="obsolete">0.00 / 0.00</translation>
     </message>
     <message>
         <source>Resize Method:</source>
-        <translation>??????:</translation>
+        <translation type="obsolete">??????:</translation>
     </message>
     <message>
         <source>Bilinear</source>
-        <translation>???</translation>
+        <translation type="obsolete">???</translation>
     </message>
     <message>
         <source>Bicubic</source>
-        <translation>???</translation>
+        <translation type="obsolete">???</translation>
     </message>
     <message>
         <source>Lanzcos3</source>
-        <translation>Lanzcos3</translation>
+        <translation type="obsolete">Lanzcos3</translation>
     </message>
     <message>
         <source>Subtitle Font Size and Position</source>
-        <translation>?????????</translation>
+        <translation type="obsolete">?????????</translation>
     </message>
     <message>
         <source>Font Size :</source>
-        <translation>???? :</translation>
+        <translation type="obsolete">???? :</translation>
     </message>
     <message>
         <source>Processing</source>
-        <translation>???</translation>
+        <translation type="obsolete">???</translation>
     </message>
     <message>
         <source>Video Filter Manager</source>
-        <translation>???????</translation>
+        <translation type="obsolete">???????</translation>
     </message>
     <message>
         <source>&amp;SVCD Res</source>
-        <translation>&amp;SVCD ??</translation>
+        <translation type="obsolete">&amp;SVCD ??</translation>
     </message>
     <message>
         <source>&amp;VCD Res</source>
-        <translation>&amp;VCD ??</translation>
+        <translation type="obsolete">&amp;VCD ??</translation>
     </message>
     <message>
         <source>&amp;Half D1 Res</source>
-        <translation>&amp;Half D1 ??</translation>
+        <translation type="obsolete">&amp;Half D1 ??</translation>
     </message>
     <message>
         <source>&amp;DVD Res</source>
-        <translation>&amp;DVD ??</translation>
+        <translation type="obsolete">&amp;DVD ??</translation>
     </message>
     <message>
         <source>Transform</source>
-        <translation>??</translation>
+        <translation type="obsolete">??</translation>
     </message>
     <message>
         <source>Interlacing</source>
-        <translation>??</translation>
+        <translation type="obsolete">??</translation>
     </message>
     <message>
         <source>Colors</source>
-        <translation>??</translation>
+        <translation type="obsolete">??</translation>
     </message>
     <message>
         <source>Noise</source>
-        <translation>??</translation>
+        <translation type="obsolete">??</translation>
     </message>
     <message>
         <source>Sharpness</source>
-        <translation>??</translation>
+        <translation type="obsolete">??</translation>
     </message>
     <message>
         <source>Subtitles</source>
-        <translation>??</translation>
+        <translation type="obsolete">??</translation>
     </message>
     <message>
         <source>Miscellaneous</source>
-        <translation>??</translation>
+        <translation type="obsolete">??</translation>
     </message>
     <message>
         <source>External</source>
-        <translation>???</translation>
+        <translation type="obsolete">???</translation>
     </message>
     <message>
         <source>&lt;big&gt;&lt;b&gt;Active Filters&lt;/b&gt;&lt;/big&gt;</source>
-        <translation>&lt;big&gt;&lt;b&gt;??????&lt;/b&gt;&lt;/big&gt;</translation>
+        <translation type="obsolete">&lt;big&gt;&lt;b&gt;??????&lt;/b&gt;&lt;/big&gt;</translation>
     </message>
     <message>
         <source>C&amp;onfigure</source>
-        <translation>??(&amp;O)</translation>
+        <translation type="obsolete">??(&amp;O)</translation>
     </message>
     <message>
         <source>P&amp;artial</source>
-        <translation>???(&amp;A)</translation>
+        <translation type="obsolete">???(&amp;A)</translation>
     </message>
     <message>
         <source>Open Script</source>
-        <translation>????</translation>
+        <translation type="obsolete">????</translation>
     </message>
     <message>
         <source>Load</source>
-        <translation>??</translation>
+        <translation type="obsolete">??</translation>
     </message>
     <message>
         <source>Save Script As</source>
-        <translation>?????</translation>
+        <translation type="obsolete">?????</translation>
     </message>
     <message>
         <source>Save Script</source>
-        <translation>????</translation>
+        <translation type="obsolete">????</translation>
     </message>
     <message>
         <source>Move Filter Down</source>
-        <translation>????</translation>
+        <translation type="obsolete">????</translation>
     </message>
     <message>
         <source>Down</source>
-        <translation>?</translation>
+        <translation type="obsolete">?</translation>
     </message>
     <message>
         <source>Move Filter Up</source>
-        <translation>????</translation>
+        <translation type="obsolete">????</translation>
     </message>
     <message>
         <source>Up</source>
-        <translation>?</translation>
+        <translation type="obsolete">?</translation>
     </message>
     <message>
         <source>Remove Filter</source>
-        <translation>????</translation>
+        <translation type="obsolete">????</translation>
     </message>
     <message>
         <source>Remove</source>
-        <translation>??</translation>
+        <translation type="obsolete">??</translation>
     </message>
     <message>
         <source>Add Filter</source>
-        <translation>????</translation>
+        <translation type="obsolete">????</translation>
     </message>
     <message>
         <source>Add</source>
-        <translation>??</translation>
+        <translation type="obsolete">??</translation>
     </message>
     <message>
         <source>&lt;big&gt;&lt;b&gt;Available Filters&lt;/b&gt;&lt;/big&gt;</source>
-        <translation>&lt;big&gt;&lt;b&gt;?????&lt;/b&gt;&lt;/big&gt;</translation>
+        <translation type="obsolete">&lt;big&gt;&lt;b&gt;?????&lt;/b&gt;&lt;/big&gt;</translation>
     </message>
     <message>
         <source>&amp;Preview</source>
-        <translation>??(&amp;P)</translation>
+        <translation type="obsolete">??(&amp;P)</translation>
     </message>
 </context>
 <context>
     <name>DialogEq2</name>
     <message>
         <source>Contrast</source>
-        <translation>??</translation>
+        <translation type="obsolete">??</translation>
     </message>
     <message>
         <source>&lt;b&gt;Gamma&lt;/b&gt;</source>
-        <translation>&lt;b&gt;??&lt;/b&gt;</translation>
+        <translation type="obsolete">&lt;b&gt;??&lt;/b&gt;</translation>
     </message>
     <message>
         <source>Saturation</source>
-        <translation>???</translation>
+        <translation type="obsolete">???</translation>
     </message>
     <message>
         <source>Brightness</source>
-        <translation>??</translation>
+        <translation type="obsolete">??</translation>
     </message>
     <message>
         <source>Blue</source>
-        <translation>?</translation>
+        <translation type="obsolete">?</translation>
     </message>
     <message>
         <source>Red</source>
-        <translation>?</translation>
+        <translation type="obsolete">?</translation>
     </message>
     <message>
         <source>Initial</source>
-        <translation>??</translation>
+        <translation type="obsolete">??</translation>
     </message>
     <message>
         <source>Weight</source>
-        <translation>??</translation>
+        <translation type="obsolete">??</translation>
     </message>
     <message>
         <source>Green</source>
-        <translation>?</translation>
+        <translation type="obsolete">?</translation>
     </message>
 </context>
 <context>
@@ -6320,19 +6487,19 @@
     <name>DialogVobSub</name>
     <message>
         <source>VobSub Settings</source>
-        <translation>VobSub ??</translation>
+        <translation type="obsolete">VobSub ??</translation>
     </message>
     <message>
         <source>Language:</source>
-        <translation>??:</translation>
+        <translation type="obsolete">??:</translation>
     </message>
     <message>
         <source>Idx File:</source>
-        <translation>Idx ??:</translation>
+        <translation type="obsolete">Idx ??:</translation>
     </message>
     <message>
         <source>Delay:</source>
-        <translation>??:</translation>
+        <translation type="obsolete">??:</translation>
     </message>
 </context>
 <context>
@@ -6346,7 +6513,7 @@
     <name>EncoderDivx</name>
     <message>
         <source>DivX</source>
-        <translation>DivX</translation>
+        <translation type="obsolete">DivX</translation>
     </message>
 </context>
 <context>
@@ -6360,11 +6527,11 @@
     <name>EncoderFFMPEGDV</name>
     <message>
         <source>Incompatible settings</source>
-        <translation>??????</translation>
+        <translation type="obsolete">??????</translation>
     </message>
     <message>
         <source>At the moment, the DV codec only accepts 720*576 at 25</source>
-        <translation>???? DV ??????? 720*576 at 25</translation>
+        <translation type="obsolete">???? DV ??????? 720*576 at 25</translation>
     </message>
 </context>
 <context>
@@ -6392,28 +6559,28 @@
     <name>EncoderX264</name>
     <message>
         <source>x264</source>
-        <translation>x264</translation>
+        <translation type="obsolete">x264</translation>
     </message>
 </context>
 <context>
     <name>EncoderXvid</name>
     <message>
         <source>Xvid</source>
-        <translation>Xvid</translation>
+        <translation type="obsolete">Xvid</translation>
     </message>
 </context>
 <context>
     <name>EncoderXvid4</name>
     <message>
         <source>Xvid4</source>
-        <translation>Xvid4</translation>
+        <translation type="obsolete">Xvid4</translation>
     </message>
 </context>
 <context>
     <name>EncoderY800</name>
     <message>
         <source>Y800</source>
-        <translation>Y800</translation>
+        <translation type="obsolete">Y800</translation>
     </message>
 </context>
 <context>
@@ -6427,15 +6594,15 @@
     <name>EqualiserDialog</name>
     <message>
         <source>Equaliser</source>
-        <translation>???</translation>
+        <translation type="obsolete">???</translation>
     </message>
     <message>
         <source>Settings</source>
-        <translation>??</translation>
+        <translation type="obsolete">??</translation>
     </message>
     <message>
         <source>Histogram</source>
-        <translation>???</translation>
+        <translation type="obsolete">???</translation>
     </message>
 </context>
 <context>
@@ -6513,7 +6680,7 @@
     <message>
         <source>
  Reuse the existing log-file ?</source>
-        <translation>
+        <translation type="obsolete">
  ???????????</translation>
     </message>
     <message>
@@ -6532,6 +6699,10 @@
         <source>2nd Pass</source>
         <translation>?????</translation>
     </message>
+    <message>
+        <source>Reuse the existing log file?</source>
+        <translation>???????????</translation>
+    </message>
 </context>
 <context>
     <name>GenericAviSaveSmart</name>
@@ -6602,23 +6773,23 @@
     <name>Jobs</name>
     <message>
         <source>Jobs</source>
-        <translation>??</translation>
+        <translation type="obsolete">??</translation>
     </message>
     <message>
         <source>Delete Sel. Job</source>
-        <translation>???????</translation>
+        <translation type="obsolete">???????</translation>
     </message>
     <message>
         <source>Delete All Jobs</source>
-        <translation>??????</translation>
+        <translation type="obsolete">??????</translation>
     </message>
     <message>
         <source>Run All Jobs</source>
-        <translation>??????</translation>
+        <translation type="obsolete">??????</translation>
     </message>
     <message>
         <source>Run Selected Job</source>
-        <translation>???????</translation>
+        <translation type="obsolete">???????</translation>
     </message>
 </context>
 <context>
@@ -6636,27 +6807,27 @@
     <name>MPDelogoDialog</name>
     <message>
         <source>MPlayer Delogo</source>
-        <translation>MPlayer ???</translation>
+        <translation type="obsolete">MPlayer ???</translation>
     </message>
     <message>
         <source>Band:</source>
-        <translation>??:</translation>
+        <translation type="obsolete">??:</translation>
     </message>
     <message>
         <source>Height:</source>
-        <translation>??:</translation>
+        <translation type="obsolete">??:</translation>
     </message>
     <message>
         <source>Width:</source>
-        <translation>??:</translation>
+        <translation type="obsolete">??:</translation>
     </message>
     <message>
         <source>Y:</source>
-        <translation>Y:</translation>
+        <translation type="obsolete">Y:</translation>
     </message>
     <message>
         <source>X:</source>
-        <translation>X:</translation>
+        <translation type="obsolete">X:</translation>
     </message>
 </context>
 <context>
@@ -6675,7 +6846,7 @@
     </message>
     <message>
         <source>Configure</source>
-        <translation>??</translation>
+        <translation>??</translation>
     </message>
     <message>
         <source>Filters</source>
@@ -7373,6 +7544,10 @@
         <source>&amp;AVI Muxer Options...</source>
         <translation>&amp;AVI ?????...</translation>
     </message>
+    <message>
+        <source>&amp;Plugins...</source>
+        <translation>????(&amp;P)...</translation>
+    </message>
 </context>
 <context>
     <name>MpegMuxer</name>
@@ -7393,46 +7568,46 @@
     <name>Msharpen</name>
     <message>
         <source>_Mask</source>
-        <translation>??(_M)</translation>
+        <translation type="obsolete">??(_M)</translation>
     </message>
     <message>
         <source>_High Q</source>
-        <translation>? Q(_H)</translation>
+        <translation type="obsolete">? Q(_H)</translation>
     </message>
     <message>
         <source>_Threshold:</source>
-        <translation>???(_T):</translation>
+        <translation type="obsolete">???(_T):</translation>
     </message>
     <message>
         <source>_Strength:</source>
-        <translation>??(_S):</translation>
+        <translation type="obsolete">??(_S):</translation>
     </message>
     <message>
         <source>MSharpen</source>
-        <translation>MSharpen</translation>
+        <translation type="obsolete">MSharpen</translation>
     </message>
 </context>
 <context>
     <name>Msmooth</name>
     <message>
         <source>_High quality</source>
-        <translation>???(_H)</translation>
+        <translation type="obsolete">???(_H)</translation>
     </message>
     <message>
         <source>Show _mask</source>
-        <translation>????(_M)</translation>
+        <translation type="obsolete">????(_M)</translation>
     </message>
     <message>
         <source>_Threshold:</source>
-        <translation>???(_T):</translation>
+        <translation type="obsolete">???(_T):</translation>
     </message>
     <message>
         <source>_Strength:</source>
-        <translation>??(_S):</translation>
+        <translation type="obsolete">??(_S):</translation>
     </message>
     <message>
         <source>MSmooth</source>
-        <translation>MSmooth</translation>
+        <translation type="obsolete">MSmooth</translation>
     </message>
 </context>
 <context>
@@ -7454,115 +7629,115 @@
     <name>Telecide</name>
     <message>
         <source>No strategy</source>
-        <translation>???</translation>
+        <translation type="obsolete">???</translation>
     </message>
     <message>
         <source>3:2 pulldown</source>
-        <translation>3:2 pulldown</translation>
+        <translation type="obsolete">3:2 pulldown</translation>
     </message>
     <message>
         <source>PAL/SECAM</source>
-        <translation>PAL/SECAM</translation>
+        <translation type="obsolete">PAL/SECAM</translation>
     </message>
     <message>
         <source>NTSC converted from PAL</source>
-        <translation>? PAL ?? NTSC</translation>
+        <translation type="obsolete">? PAL ?? NTSC</translation>
     </message>
     <message>
         <source>Top</source>
-        <translation>??</translation>
+        <translation type="obsolete">??</translation>
     </message>
     <message>
         <source>Bottom</source>
-        <translation>??</translation>
+        <translation type="obsolete">??</translation>
     </message>
     <message>
         <source>Never</source>
-        <translation>??</translation>
+        <translation type="obsolete">??</translation>
     </message>
     <message>
         <source>If still combed</source>
-        <translation>?????????</translation>
+        <translation type="obsolete">?????????</translation>
     </message>
     <message>
         <source>Always</source>
-        <translation>??</translation>
+        <translation type="obsolete">??</translation>
     </message>
     <message>
         <source>None</source>
-        <translation>?</translation>
+        <translation type="obsolete">?</translation>
     </message>
     <message>
         <source>None but compute</source>
-        <translation>????</translation>
+        <translation type="obsolete">????</translation>
     </message>
     <message>
         <source>Postproc on best match</source>
-        <translation>????????????</translation>
+        <translation type="obsolete">????????????</translation>
     </message>
     <message>
         <source>Postproc and show zones (debug)</source>
-        <translation>????????? (??)</translation>
+        <translation type="obsolete">????????? (??)</translation>
     </message>
     <message>
         <source>Process image (not fields)</source>
-        <translation>???? (???)</translation>
+        <translation type="obsolete">???? (???)</translation>
     </message>
     <message>
         <source>Process image (not fields), debug</source>
-        <translation>???? (???)???</translation>
+        <translation type="obsolete">???? (???)???</translation>
     </message>
     <message>
         <source>_Strategy:</source>
-        <translation>??(_S):</translation>
+        <translation type="obsolete">??(_S):</translation>
     </message>
     <message>
         <source>_Field order:</source>
-        <translation>??????(_F):</translation>
+        <translation type="obsolete">??????(_F):</translation>
     </message>
     <message>
         <source>_Postprocessing:</source>
-        <translation>????(_P):</translation>
+        <translation type="obsolete">????(_P):</translation>
     </message>
     <message>
         <source>_Try backward:</source>
-        <translation>????(_T):</translation>
+        <translation type="obsolete">????(_T):</translation>
     </message>
     <message>
         <source>_Direct threshold:</source>
-        <translation>?????(_D):</translation>
+        <translation type="obsolete">?????(_D):</translation>
     </message>
     <message>
         <source>_Backward threshold:</source>
-        <translation>?????(_B):</translation>
+        <translation type="obsolete">?????(_B):</translation>
     </message>
     <message>
         <source>_Noise threshold:</source>
-        <translation>?????(_N):</translation>
+        <translation type="obsolete">?????(_N):</translation>
     </message>
     <message>
         <source>Postp_rocessing threshold:</source>
-        <translation>???????(_R):</translation>
+        <translation type="obsolete">???????(_R):</translation>
     </message>
     <message>
         <source>_Use chroma to decide</source>
-        <translation>???????(_U)</translation>
+        <translation type="obsolete">???????(_U)</translation>
     </message>
     <message>
         <source>Sho_w info</source>
-        <translation>????(_W)</translation>
+        <translation type="obsolete">????(_W)</translation>
     </message>
     <message>
         <source>Debu_g</source>
-        <translation>??(_G)</translation>
+        <translation type="obsolete">??(_G)</translation>
     </message>
     <message>
         <source>Bl_end</source>
-        <translation>??(_E)</translation>
+        <translation type="obsolete">??(_E)</translation>
     </message>
     <message>
         <source>Decomb Telecide</source>
-        <translation>??????????</translation>
+        <translation type="obsolete">??????????</translation>
     </message>
 </context>
 <context>
@@ -7595,7 +7770,7 @@
     </message>
     <message utf8="true">
         <source>? 2001 - 2008  Mean</source>
-        <translation>? 2001 - 2008  Mean</translation>
+        <translation type="obsolete">? 2001 - 2008  Mean</translation>
     </message>
     <message>
         <source>http://www.avidemux.org</source>
@@ -7605,6 +7780,10 @@
         <source>&amp;License</source>
         <translation>??(&amp;L)</translation>
     </message>
+    <message utf8="true">
+        <source>? 2001 - 2009  Mean</source>
+        <translation>? 2001 - 2009  Mean</translation>
+    </message>
 </context>
 <context>
     <name>dmxHeader</name>
@@ -7622,6 +7801,121 @@
     </message>
 </context>
 <context>
+    <name>encodingDialog</name>
+    <message>
+        <source>Encoding...</source>
+        <translation>????...</translation>
+    </message>
+    <message>
+        <source>Phase:</source>
+        <translation>??:</translation>
+    </message>
+    <message>
+        <source>Video Codec:</source>
+        <translation>??????:</translation>
+    </message>
+    <message>
+        <source>None</source>
+        <translation>?</translation>
+    </message>
+    <message>
+        <source>Unknown</source>
+        <translation>??</translation>
+    </message>
+    <message>
+        <source>Container:</source>
+        <translation>??:</translation>
+    </message>
+    <message>
+        <source>Audio Codec:</source>
+        <translation>??????:</translation>
+    </message>
+    <message>
+        <source>0</source>
+        <translation>0</translation>
+    </message>
+    <message>
+        <source>00:00:00</source>
+        <translation>00:00:00</translation>
+    </message>
+    <message>
+        <source>Elapsed:</source>
+        <translation>????:</translation>
+    </message>
+    <message>
+        <source>Time Remaining:</source>
+        <translation>????:</translation>
+    </message>
+    <message>
+        <source>Frames/sec:</source>
+        <translation>??/?:</translation>
+    </message>
+    <message>
+        <source>0 MB</source>
+        <translation>0 MB</translation>
+    </message>
+    <message>
+        <source>Total Size:</source>
+        <translation>???:</translation>
+    </message>
+    <message>
+        <source>Audio Size:</source>
+        <translation>????:</translation>
+    </message>
+    <message>
+        <source>Video Size:</source>
+        <translation>????:</translation>
+    </message>
+    <message>
+        <source>Processed Frames:</source>
+        <translation>???????:</translation>
+    </message>
+    <message>
+        <source>Total Frames:</source>
+        <translation>????:</translation>
+    </message>
+    <message>
+        <source>0 kB/s</source>
+        <translation>0 kB/s</translation>
+    </message>
+    <message>
+        <source>Average Bitrate:</source>
+        <translation>?????:</translation>
+    </message>
+    <message>
+        <source>Quantiser:</source>
+        <translation>???:</translation>
+    </message>
+    <message>
+        <source>Shut down computer when finished</source>
+        <translation>???????</translation>
+    </message>
+    <message>
+        <source>Priority:</source>
+        <translation>???:</translation>
+    </message>
+    <message>
+        <source>High</source>
+        <translation>?</translation>
+    </message>
+    <message>
+        <source>Above Normal</source>
+        <translation>????</translation>
+    </message>
+    <message>
+        <source>Normal</source>
+        <translation>??</translation>
+    </message>
+    <message>
+        <source>Below Normal</source>
+        <translation>????</translation>
+    </message>
+    <message>
+        <source>Low</source>
+        <translation>?</translation>
+    </message>
+</context>
+<context>
     <name>encodingWindow</name>
     <message>
         <source>Privileges Required</source>
@@ -7663,6 +7957,29 @@
     </message>
 </context>
 <context>
+    <name>jobsDialog</name>
+    <message>
+        <source>Jobs</source>
+        <translation>??</translation>
+    </message>
+    <message>
+        <source>Delete Sel. Job</source>
+        <translation>???????</translation>
+    </message>
+    <message>
+        <source>Delete All Jobs</source>
+        <translation>??????</translation>
+    </message>
+    <message>
+        <source>Run All Jobs</source>
+        <translation>??????</translation>
+    </message>
+    <message>
+        <source>Run Selected Job</source>
+        <translation>???????</translation>
+    </message>
+</context>
+<context>
     <name>jobsWindow</name>
     <message>
         <source>Job Name</source>
@@ -7724,6 +8041,129 @@
     </message>
 </context>
 <context>
+    <name>mainFilterDialog</name>
+    <message>
+        <source>Video Filter Manager</source>
+        <translation>???????</translation>
+    </message>
+    <message>
+        <source>&amp;SVCD Res</source>
+        <translation>&amp;SVCD ??</translation>
+    </message>
+    <message>
+        <source>&amp;VCD Res</source>
+        <translation>&amp;VCD ??</translation>
+    </message>
+    <message>
+        <source>&amp;Half D1 Res</source>
+        <translation>&amp;Half D1 ??</translation>
+    </message>
+    <message>
+        <source>&amp;DVD Res</source>
+        <translation>&amp;DVD ??</translation>
+    </message>
+    <message>
+        <source>Transform</source>
+        <translation>??</translation>
+    </message>
+    <message>
+        <source>Interlacing</source>
+        <translation>??</translation>
+    </message>
+    <message>
+        <source>Colors</source>
+        <translation>??</translation>
+    </message>
+    <message>
+        <source>Noise</source>
+        <translation>??</translation>
+    </message>
+    <message>
+        <source>Sharpness</source>
+        <translation>??</translation>
+    </message>
+    <message>
+        <source>Subtitles</source>
+        <translation>??</translation>
+    </message>
+    <message>
+        <source>Miscellaneous</source>
+        <translation>??</translation>
+    </message>
+    <message>
+        <source>External</source>
+        <translation>???</translation>
+    </message>
+    <message>
+        <source>&lt;big&gt;&lt;b&gt;Active Filters&lt;/b&gt;&lt;/big&gt;</source>
+        <translation>&lt;big&gt;&lt;b&gt;??????&lt;/b&gt;&lt;/big&gt;</translation>
+    </message>
+    <message>
+        <source>C&amp;onfigure</source>
+        <translation>??(&amp;O)</translation>
+    </message>
+    <message>
+        <source>P&amp;artial</source>
+        <translation>???(&amp;A)</translation>
+    </message>
+    <message>
+        <source>Open Script</source>
+        <translation>????</translation>
+    </message>
+    <message>
+        <source>Load</source>
+        <translation>??</translation>
+    </message>
+    <message>
+        <source>Save Script As</source>
+        <translation>?????</translation>
+    </message>
+    <message>
+        <source>Save Script</source>
+        <translation>????</translation>
+    </message>
+    <message>
+        <source>Move Filter Down</source>
+        <translation>????</translation>
+    </message>
+    <message>
+        <source>Down</source>
+        <translation>?</translation>
+    </message>
+    <message>
+        <source>Move Filter Up</source>
+        <translation>????</translation>
+    </message>
+    <message>
+        <source>Up</source>
+        <translation>?</translation>
+    </message>
+    <message>
+        <source>Remove Filter</source>
+        <translation>????</translation>
+    </message>
+    <message>
+        <source>Remove</source>
+        <translation>??</translation>
+    </message>
+    <message>
+        <source>Add Filter</source>
+        <translation>????</translation>
+    </message>
+    <message>
+        <source>Add</source>
+        <translation>??</translation>
+    </message>
+    <message>
+        <source>&lt;big&gt;&lt;b&gt;Available Filters&lt;/b&gt;&lt;/big&gt;</source>
+        <translation>&lt;big&gt;&lt;b&gt;?????&lt;/b&gt;&lt;/big&gt;</translation>
+    </message>
+    <message>
+        <source>&amp;Preview</source>
+        <translation>??(&amp;P)</translation>
+    </message>
+</context>
+<context>
     <name>nuvHeader</name>
     <message>
         <source>Opening Nuppel video</source>
@@ -7735,11 +8175,11 @@
     </message>
     <message>
         <source>Size mismatch</source>
-        <translation>?????</translation>
+        <translation>?????</translation>
     </message>
     <message>
         <source>Expect a crash.</source>
-        <translation>???????</translation>
+        <translation>?????????</translation>
     </message>
     <message>
         <source>Do you want to save an index ?</source>
@@ -7761,11 +8201,11 @@
     <name>ossAudioDevice</name>
     <message>
         <source>Could not open OSS audio device</source>
-        <translation>???? OSS ????</translation>
+        <translation type="obsolete">???? OSS ????</translation>
     </message>
     <message>
         <source>Check the permissions for /dev/dsp.</source>
-        <translation>?? dev/dsp ????</translation>
+        <translation type="obsolete">?? dev/dsp ????</translation>
     </message>
 </context>
 <context>
@@ -7819,10 +8259,93 @@
     </message>
 </context>
 <context>
+    <name>propsDialog</name>
+    <message>
+        <source>Properties</source>
+        <translation>??</translation>
+    </message>
+    <message>
+        <source>Video</source>
+        <translation>??</translation>
+    </message>
+    <message>
+        <source>TextLabel</source>
+        <translation>????</translation>
+    </message>
+    <message>
+        <source>Frame Rate:</source>
+        <translation>???:</translation>
+    </message>
+    <message>
+        <source>Frame Count: </source>
+        <translation>????: </translation>
+    </message>
+    <message>
+        <source>Total Duration:</source>
+        <translation>?????:</translation>
+    </message>
+    <message>
+        <source>Aspect Ratio:</source>
+        <translation>????:</translation>
+    </message>
+    <message>
+        <source>Image Size:</source>
+        <translation>????:</translation>
+    </message>
+    <message>
+        <source>Codec 4CC:</source>
+        <translation>???? 4CC:</translation>
+    </message>
+    <message>
+        <source>Extra Video Properties</source>
+        <translation>???????</translation>
+    </message>
+    <message>
+        <source>Global Motion Compensation:</source>
+        <translation>??????:</translation>
+    </message>
+    <message>
+        <source>Packed Bitstream:</source>
+        <translation>???????:</translation>
+    </message>
+    <message>
+        <source>Quarter Pixel:</source>
+        <translation>1/4 ??:</translation>
+    </message>
+    <message>
+        <source>Audio</source>
+        <translation>??</translation>
+    </message>
+    <message>
+        <source>File Size:</source>
+        <translation>????:</translation>
+    </message>
+    <message>
+        <source>Frequency:</source>
+        <translation>??:</translation>
+    </message>
+    <message>
+        <source>Variable Bitrate:</source>
+        <translation>?????:</translation>
+    </message>
+    <message>
+        <source>Bitrate:</source>
+        <translation>???:</translation>
+    </message>
+    <message>
+        <source>Channels:</source>
+        <translation>??:</translation>
+    </message>
+    <message>
+        <source>Codec:</source>
+        <translation>????:</translation>
+    </message>
+</context>
+<context>
     <name>resizeWindow</name>
     <message>
         <source>Width and height cannot be odd</source>
-        <translation>??????????</translation>
+        <translation type="obsolete">??????????</translation>
     </message>
 </context>
 <context>
@@ -7836,86 +8359,124 @@
     <name>vidBlendRemoval</name>
     <message>
         <source>_Threshold:</source>
-        <translation>???(_T):</translation>
+        <translation type="obsolete">???(_T):</translation>
     </message>
     <message>
         <source>If value is smaller than threshold it is considered valid.Smaller value might mean more false positive.</source>
-        <translation>?????????????????????????????????</translation>
+        <translation type="obsolete">?????????????????????????????????</translation>
     </message>
     <message>
         <source>_Noise:</source>
-        <translation>??(_N):</translation>
+        <translation type="obsolete">??(_N):</translation>
     </message>
     <message>
         <source>If pixels are closer than noise, they are considered to be the same</source>
-        <translation>?????????????????</translation>
+        <translation type="obsolete">?????????????????</translation>
     </message>
     <message>
         <source>I_dentical:</source>
-        <translation>??(_D):</translation>
+        <translation type="obsolete">??(_D):</translation>
     </message>
     <message>
         <source>If metric is less than identical, images are considered identical</source>
-        <translation>???????????????????</translation>
+        <translation type="obsolete">???????????????????</translation>
     </message>
     <message>
         <source>_Show metrics</source>
-        <translation>????(_S)</translation>
+        <translation type="obsolete">????(_S)</translation>
     </message>
     <message>
         <source>Show metric in image (debug)</source>
-        <translation>?????? (??)</translation>
+        <translation type="obsolete">?????? (??)</translation>
     </message>
     <message>
         <source>Blend Removal</source>
-        <translation>????</translation>
+        <translation type="obsolete">????</translation>
     </message>
 </context>
 <context>
     <name>vidHardPDRemoval</name>
     <message>
         <source>Metrics</source>
-        <translation>??</translation>
+        <translation type="obsolete">??</translation>
     </message>
     <message>
         <source>Do you want to print metrics on screen ?</source>
-        <translation>?????????????</translation>
+        <translation type="obsolete">?????????????</translation>
     </message>
     <message>
         <source>_Threshold:</source>
-        <translation>???(_T):</translation>
+        <translation type="obsolete">???(_T):</translation>
     </message>
     <message>
         <source>If value is smaller than threshold it is considered valid. Smaller value might mean more false positive</source>
-        <translation>????????????????????????????????</translation>
+        <translation type="obsolete">????????????????????????????????</translation>
     </message>
     <message>
         <source>_Noise:</source>
-        <translation>??(_N):</translation>
+        <translation type="obsolete">??(_N):</translation>
     </message>
     <message>
         <source>If pixels are closer than noise, they are considered to be the same</source>
-        <translation>?????????????????</translation>
+        <translation type="obsolete">?????????????????</translation>
     </message>
     <message>
         <source>_Identical:</source>
-        <translation>??(_I):</translation>
+        <translation type="obsolete">??(_I):</translation>
     </message>
     <message>
         <source>If metric is less than identical, images are considered identical</source>
-        <translation>???????????????????</translation>
+        <translation type="obsolete">???????????????????</translation>
     </message>
     <message>
         <source>_Show metrics</source>
-        <translation>????(_S)</translation>
+        <translation type="obsolete">????(_S)</translation>
     </message>
     <message>
         <source>Show metric in image (debug)</source>
-        <translation>?????? (??)</translation>
+        <translation type="obsolete">?????? (??)</translation>
     </message>
     <message>
         <source>Hard IVTC Removal</source>
-        <translation>??? IVTC</translation>
+        <translation type="obsolete">??? IVTC</translation>
     </message>
 </context>
+<context>
+    <name>vobSubDialog</name>
+    <message>
+        <source>VobSub Settings</source>
+        <translation>VobSub ??</translation>
+    </message>
+    <message>
+        <source>Language:</source>
+        <translation>??:</translation>
+    </message>
+    <message>
+        <source>Idx File:</source>
+        <translation>Idx ??:</translation>
+    </message>
+    <message>
+        <source>Delay:</source>
+        <translation>??:</translation>
+    </message>
+</context>
+<context>
+    <name>workingDialog</name>
+    <message>
+        <source>Processing</source>
+        <translation>???</translation>
+    </message>
+    <message>
+        <source>Elapsed:</source>
+        <translation>????:</translation>
+    </message>
+    <message>
+        <source>Time Remaining:</source>
+        <translation>????:</translation>
+    </message>
+    <message>
+        <source>00:00:00</source>
+        <translation>00:00:00</translation>
+    </message>
+</context>
 </TS>

Modified: branches/avidemux_2.5_branch_gruntster/po/zh_TW.po
===================================================================
--- branches/avidemux_2.5_branch_gruntster/po/zh_TW.po	2009-07-25 20:56:11 UTC (rev 5153)
+++ branches/avidemux_2.5_branch_gruntster/po/zh_TW.po	2009-07-26 07:13:08 UTC (rev 5154)
@@ -3,8 +3,8 @@
 msgstr ""
 "Project-Id-Version: zh_TW\n"
 "Report-Msgid-Bugs-To: \n"
-"POT-Creation-Date: 2009-06-02 23:58+0800\n"
-"PO-Revision-Date: 2009-06-13 13:27+0800\n"
+"POT-Creation-Date: 2009-07-21 14:00+0800\n"
+"PO-Revision-Date: 2009-07-22 10:45+0800\n"
 "Last-Translator: Dong-Jun Wu <ziyawu at gmail.com>\n"
 "Language-Team: Traditional Chinese <ziyawu at gmail.com>\n"
 "MIME-Version: 1.0\n"
@@ -46,7 +46,7 @@
 
 #: avidemux/ADM_editor/ADM_outputfmt.h:50
 #: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:494
-#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:120
+#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:118
 msgid "MP4"
 msgstr "MP4"
 
@@ -67,7 +67,7 @@
 msgstr "FLV"
 
 #: avidemux/ADM_editor/ADM_outputfmt.h:54
-#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:121
+#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:119
 msgid "MKV"
 msgstr "MKV"
 
@@ -79,10 +79,6 @@
 msgid "YV12"
 msgstr "YV12"
 
-#: avidemux/ADM_encoder/adm_encdivx.h:53
-msgid "DivX"
-msgstr "DivX"
-
 #: avidemux/ADM_encoder/adm_encmjpeg.h:61
 msgid "MJPEG"
 msgstr "MJPEG"
@@ -93,11 +89,6 @@
 msgid "MPEG"
 msgstr "MPEG"
 
-#: avidemux/ADM_encoder/adm_encxvid.h:61
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp:127
-msgid "Xvid"
-msgstr "Xvid"
-
 #: avidemux/ADM_encoder/adm_encffmpeg.h:48
 msgid "LavCodec"
 msgstr "LavCodec"
@@ -118,81 +109,57 @@
 msgid "MPEG-4 ASP (lavc)"
 msgstr "MPEG-4 ASP (lavc)"
 
-#: avidemux/ADM_encoder/ADM_encCodecDesc.h:160
-msgid "DV (lavc)"
-msgstr "DV (lavc)"
-
-#: avidemux/ADM_encoder/ADM_encCodecDesc.h:176
+#: avidemux/ADM_encoder/ADM_encCodecDesc.h:161
 msgid "FLV1 (lavc)"
 msgstr "FLV1 (lavc)"
 
-#: avidemux/ADM_encoder/ADM_encCodecDesc.h:192
-msgid "Snow (lavc)"
-msgstr "Snow (lavc)"
-
-#: avidemux/ADM_encoder/ADM_encCodecDesc.h:208
-msgid "FF Huffyuv (lavc)"
-msgstr "FF Huffyuv (lavc)"
-
-#: avidemux/ADM_encoder/ADM_encCodecDesc.h:224
-msgid "Huffyuv (lavc)"
-msgstr "Huffyuv (lavc)"
-
-#: avidemux/ADM_encoder/ADM_encCodecDesc.h:240
-msgid "FFV1 (lavc)"
-msgstr "FFV1 (lavc)"
-
-#: avidemux/ADM_encoder/ADM_encCodecDesc.h:258
+#: avidemux/ADM_encoder/ADM_encCodecDesc.h:180
 msgid "MJPEG (lavc)"
 msgstr "MJPEG (lavc)"
 
-#: avidemux/ADM_encoder/ADM_encCodecDesc.h:315
+#: avidemux/ADM_encoder/ADM_encCodecDesc.h:237
 msgid "VCD (lavc)"
 msgstr "VCD (lavc)"
 
-#: avidemux/ADM_encoder/ADM_encCodecDesc.h:375
+#: avidemux/ADM_encoder/ADM_encCodecDesc.h:297
 msgid "DVD (lavc)"
 msgstr "DVD (lavc)"
 
-#: avidemux/ADM_encoder/ADM_encCodecDesc.h:435
+#: avidemux/ADM_encoder/ADM_encCodecDesc.h:357
 msgid "SVCD (lavc)"
 msgstr "SVCD (lavc)"
 
-#: avidemux/ADM_encoder/ADM_encCodecDesc.h:462
+#: avidemux/ADM_encoder/ADM_encCodecDesc.h:384
 msgid "VCD (mpeg2enc)"
 msgstr "VCD (mpeg2enc)"
 
-#: avidemux/ADM_encoder/ADM_encCodecDesc.h:494
+#: avidemux/ADM_encoder/ADM_encCodecDesc.h:416
 msgid "SVCD (mpeg2enc)"
 msgstr "SVCD (mpeg2enc)"
 
-#: avidemux/ADM_encoder/ADM_encCodecDesc.h:513
+#: avidemux/ADM_encoder/ADM_encCodecDesc.h:435
 msgid "MPEG-2 requant"
 msgstr "MPEG-2 requant"
 
-#: avidemux/ADM_encoder/ADM_encCodecDesc.h:540
+#: avidemux/ADM_encoder/ADM_encCodecDesc.h:462
 msgid "DVD (mpeg2enc)"
 msgstr "DVD (mpeg2enc)"
 
-#: avidemux/ADM_encoder/ADM_encCodecDesc.h:672
-msgid "MPEG-4 ASP (Xvid4)"
-msgstr "MPEG-4 ASP (Xvid4)"
-
-#: avidemux/ADM_encoder/ADM_encCodecDesc.h:689
+#: avidemux/ADM_encoder/ADM_encCodecDesc.h:478
 msgid "dummy"
 msgstr "??"
 
-#: avidemux/ADM_encoder/ADM_encCodecDesc.h:692
+#: avidemux/ADM_encoder/ADM_encCodecDesc.h:481
 #: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:272
 #: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:368
-#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:155
-#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:243
-#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:255
+#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:153
+#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:241
+#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:253
 #: avidemux/ADM_outputs/oplug_mpeg/op_mpegpass.cpp:173
 #: avidemux/ADM_outputs/oplug_mpeg/op_mpegpass.cpp:177
 #: avidemux/ADM_outputs/oplug_dummy/oplug_dummy.cpp:136
 #: avidemux/ADM_outputs/oplug_dummy/oplug_dummy.cpp:168
-#: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:365
+#: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:308
 #: avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp:182
 #: avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp:228
 #: avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp:249
@@ -204,19 +171,15 @@
 msgid "Copy"
 msgstr "????"
 
-#: avidemux/ADM_encoder/adm_encXvid4.h:63
-msgid "Xvid4"
-msgstr "Xvid4"
-
 #: avidemux/guiplay.cpp:352
 msgid "Trouble initializing audio device"
-msgstr "???????????"
+msgstr "???????????"
 
-#: avidemux/ADM_audiocodec/ADM_codecwma.cpp:88
+#: avidemux/ADM_audiocodec/ADM_codecwma.cpp:91
 msgid "Internal error"
 msgstr "????"
 
-#: avidemux/ADM_audiocodec/ADM_codecwma.cpp:88
+#: avidemux/ADM_audiocodec/ADM_codecwma.cpp:91
 msgid "Cannot open WMA2 codec."
 msgstr "???? WMA2 ?????"
 
@@ -252,7 +215,7 @@
 msgid "No more supported."
 msgstr "?????"
 
-#: avidemux/ADM_editor/ADM_edit.cpp:72
+#: avidemux/ADM_editor/ADM_edit.cpp:69
 msgid ""
 "Avidemux detected VBR MP3 audio in this file. For keeping audio/video in sync, time map is needed. Build it now?\n"
 "\n"
@@ -262,24 +225,24 @@
 "\n"
 "??????? \"?? -> ?? VBR ????\" ????"
 
-#: avidemux/ADM_editor/ADM_edit.cpp:397
+#: avidemux/ADM_editor/ADM_edit.cpp:394
 msgid "File type identified but no loader support detected..."
 msgstr "???????????????????..."
 
-#: avidemux/ADM_editor/ADM_edit.cpp:398
+#: avidemux/ADM_editor/ADM_edit.cpp:395
 msgid "May be related to an old index file."
 msgstr "???????????"
 
-#: avidemux/ADM_editor/ADM_edit.cpp:405
+#: avidemux/ADM_editor/ADM_edit.cpp:402
 #, c-format
 msgid "Attempt to open %s failed!"
 msgstr "????? %s ???"
 
-#: avidemux/ADM_editor/ADM_edit.cpp:421
+#: avidemux/ADM_editor/ADM_edit.cpp:418
 msgid "Video dimensions don't match."
 msgstr "????????"
 
-#: avidemux/ADM_editor/ADM_edit.cpp:421
+#: avidemux/ADM_editor/ADM_edit.cpp:418
 msgid ""
 "You cannot mix different video dimensions yet. Using the partial video filter later will not work around this problem. The workaround is:\n"
 "\n"
@@ -291,73 +254,65 @@
 "1.) \"????\" / \"????\" / \"??\" ????????????\n"
 "2.) ??????"
 
-#: avidemux/ADM_editor/ADM_edit.cpp:533
+#: avidemux/ADM_editor/ADM_edit.cpp:530
 msgid "Build Time Map"
 msgstr "??????"
 
-#: avidemux/ADM_editor/ADM_edit.cpp:533
+#: avidemux/ADM_editor/ADM_edit.cpp:530
 msgid "Build VBR time map?"
-msgstr "????????(VBR)?????"
+msgstr "???????? (VBR) ?????"
 
-#: avidemux/ADM_editor/ADM_edit.cpp:567
+#: avidemux/ADM_editor/ADM_edit.cpp:564
 msgid "Use safe mode"
 msgstr "??????"
 
-#: avidemux/ADM_editor/ADM_edit.cpp:567
+#: avidemux/ADM_editor/ADM_edit.cpp:564
 msgid "H.264 detected"
 msgstr "??? H.264"
 
-#: avidemux/ADM_editor/ADM_edit.cpp:567
+#: avidemux/ADM_editor/ADM_edit.cpp:564
 msgid ""
 "If the file is using B-frames as reference it can lead to a crash or stuttering.\n"
 "Avidemux can use another mode which is safe but YOU WILL LOSE FRAME ACCURACY.\n"
 "Do you want to use that mode?"
 msgstr ""
-"???????? B-?????????????????????\n"
-"Avidemux ??????????????<b>??????????</b>?\n"
+"???????? B-????????????????????????\n"
+"Avidemux ???????????????????????????\n"
 "????????? ?"
 
-#: avidemux/ADM_editor/ADM_edit.cpp:697
+#: avidemux/ADM_editor/ADM_edit.cpp:694
 msgid "Packed Bitstream detected"
 msgstr "??????????"
 
-#: avidemux/ADM_editor/ADM_edit.cpp:698
+#: avidemux/ADM_editor/ADM_edit.cpp:695
 msgid "Do you want me to unpack it ?"
 msgstr "????????"
 
-#: avidemux/ADM_editor/ADM_edit.cpp:718
+#: avidemux/ADM_editor/ADM_edit.cpp:715
 msgid "Could not unpack the video"
 msgstr "??????????"
 
-#: avidemux/ADM_editor/ADM_edit.cpp:718
+#: avidemux/ADM_editor/ADM_edit.cpp:715
 msgid "Using backup decoder - not frame accurate."
 msgstr "??????? - ???????"
 
-#: avidemux/ADM_editor/ADM_edit.cpp:723
+#: avidemux/ADM_editor/ADM_edit.cpp:719
 msgid "Weird"
 msgstr "???"
 
-#: avidemux/ADM_editor/ADM_edit.cpp:723
+#: avidemux/ADM_editor/ADM_edit.cpp:719
 msgid "The unpacking succeedeed but the index is still not up to date."
 msgstr "?????????????????"
 
-#: avidemux/ADM_editor/ADM_edit.cpp:729
-msgid "Troubles ahead"
-msgstr "???"
-
-#: avidemux/ADM_editor/ADM_edit.cpp:729
-msgid "This a VOP packed AVI."
-msgstr "???????? VOP ? AVI?"
-
-#: avidemux/ADM_editor/ADM_edit.cpp:740
+#: avidemux/ADM_editor/ADM_edit.cpp:732
 msgid "Index is not up to date"
 msgstr "???????"
 
-#: avidemux/ADM_editor/ADM_edit.cpp:740
+#: avidemux/ADM_editor/ADM_edit.cpp:732
 msgid "You should use Tool->Rebuild frame. Do it now ?"
 msgstr "????? ??->?????????????"
 
-#: avidemux/ADM_editor/ADM_edit.cpp:1502
+#: avidemux/ADM_editor/ADM_edit.cpp:1494
 msgid ""
 "This looks like mpeg\n"
 " Do you want to index it?"
@@ -365,7 +320,7 @@
 "????? mpeg\n"
 " ??????"
 
-#: avidemux/ADM_editor/ADM_edit.cpp:1554
+#: avidemux/ADM_editor/ADM_edit.cpp:1546
 msgid "Indexing failed"
 msgstr "????"
 
@@ -388,18 +343,18 @@
 "Width is not a multiple of 8\n"
 " continue anyway ?"
 msgstr ""
-"??? 8 ???\n"
+"???? 8 ???\n"
 " ?????????? ?"
 
 #: avidemux/ADM_outputs/oplug_avi/op_saveprocess.cpp:92
-#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:173
-#: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:238
+#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:171
+#: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:181
 #: avidemux/ADM_outputs/oplug_ogm/op_ogsaveprocess.cpp:78
 msgid "Reuse the existing log file?"
 msgstr "???????????"
 
 #: avidemux/ADM_outputs/oplug_avi/op_saveprocess.cpp:101
-#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:180
+#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:178
 #: avidemux/ADM_outputs/oplug_dummy/oplug_dummy.cpp:142
 #: avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp:188
 #: avidemux/ADM_outputs/oplug_ogm/op_ogsaveprocess.cpp:87
@@ -407,7 +362,7 @@
 msgstr "???????"
 
 #: avidemux/ADM_outputs/oplug_avi/op_saveprocess.cpp:132
-#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:420
+#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:418
 msgid "1st Pass"
 msgstr "?????"
 
@@ -416,21 +371,21 @@
 msgstr "??"
 
 #: avidemux/ADM_outputs/oplug_avi/op_saveprocess.cpp:262
-#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:191
+#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:189
 #: avidemux/ADM_outputs/oplug_dummy/oplug_dummy.cpp:146
-#: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:359
+#: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:302
 #: avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp:192
 #: avidemux/ADM_outputs/oplug_ogm/op_ogsaveprocess.cpp:165
 msgid "Encoding"
 msgstr "???"
 
 #: avidemux/ADM_outputs/oplug_avi/op_saveprocess.cpp:264
-#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:493
+#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:491
 msgid "2nd Pass"
 msgstr "?????"
 
 #: avidemux/ADM_outputs/oplug_avi/op_savesmart.cpp:97
-#: avidemux/gui_savenew.cpp:342
+#: avidemux/gui_savenew.cpp:341
 msgid "Smart Copy"
 msgstr "?????"
 
@@ -450,19 +405,19 @@
 
 #: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:69
 msgid "Muxing _type:"
-msgstr "????(_T):"
+msgstr "???? (_T):"
 
 #: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:70
 msgid "_Split every MB:"
-msgstr "?????????MB(_S):"
+msgstr "?????????MB (_S):"
 
 #: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:72
 msgid "Mux _every x video frames:"
-msgstr "???? x ????(_E):"
+msgstr "???? x ???? (_E):"
 
 #: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:73
 msgid "Mux in _blocks of x bytes:"
-msgstr "? x ?????????(_B):"
+msgstr "? x ????????? (_B):"
 
 #: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:80
 msgid "AVI Muxer Options"
@@ -477,8 +432,8 @@
 msgstr "???????????"
 
 #: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:257
-#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:153
-#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:247
+#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:151
+#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:245
 #: avidemux/ADM_outputs/oplug_dummy/oplug_dummy.cpp:134
 #: avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp:180
 #: avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp:232
@@ -547,45 +502,49 @@
 msgstr "AMR-NB"
 
 #: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:498
+msgid "AMR-WB"
+msgstr "AMR-WB"
+
+#: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:499
 msgid "MSADPCM"
 msgstr "MSADPCM"
 
-#: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:499
+#: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:500
 msgid "ULAW"
 msgstr "ULAW"
 
-#: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:500
+#: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:501
 msgid "IMA ADPCM"
 msgstr "IMA ADPCM"
 
-#: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:501
+#: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:502
 msgid "8-bit PCM"
 msgstr "8-?? PCM"
 
-#: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:503
+#: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:504
 msgid "Unknown codec"
 msgstr "???????"
 
-#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:119
+#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:117
 msgid "PSP"
 msgstr "PSP"
 
-#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:145
+#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:143
 #: avidemux/ADM_outputs/oplug_dummy/oplug_dummy.cpp:128
 #: avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp:174
 msgid "Cannot initialize the video stream"
 msgstr "?????????"
 
-#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:216
+#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:214
 #: avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp:217
 msgid "Cannot initialize the audio stream"
 msgstr "?????????"
 
-#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:234
+#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:232
 msgid "Invalid audio stream detected"
 msgstr "?????????"
 
-#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:234
+#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:232
 msgid ""
 "The audio stream may be invalid for this container.\n"
 "\n"
@@ -595,23 +554,23 @@
 "\n"
 "??????????"
 
-#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:302
-#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:454
+#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:300
+#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:452
 #: avidemux/ADM_outputs/oplug_mpeg/op_mpegpass.cpp:304
 #: avidemux/ADM_outputs/oplug_dummy/oplug_dummy.cpp:199
 #: avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp:313
 msgid "Error while encoding"
 msgstr "????????"
 
-#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:309
-#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:461
+#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:307
+#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:459
 #: avidemux/ADM_outputs/oplug_dummy/oplug_dummy.cpp:206
 #: avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp:320
 msgid "KeyFrame error"
 msgstr "??????"
 
-#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:309
-#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:461
+#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:307
+#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:459
 #: avidemux/ADM_outputs/oplug_dummy/oplug_dummy.cpp:206
 #: avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp:320
 msgid ""
@@ -630,8 +589,8 @@
 msgstr "?????????????"
 
 #: avidemux/ADM_outputs/oplug_mpeg/op_mpegpass.cpp:84
-#: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:128
-#: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:139
+#: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:109
+#: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:120
 msgid "There is no audio track"
 msgstr "????"
 
@@ -644,7 +603,7 @@
 msgstr "?? &lt;&lt; ? &gt;&gt; ???????????????"
 
 #: avidemux/ADM_outputs/oplug_mpeg/op_mpegpass.cpp:103
-#: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:149
+#: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:130
 msgid "Audio track is not suitable"
 msgstr "????"
 
@@ -657,22 +616,22 @@
 msgstr "---"
 
 #: avidemux/ADM_outputs/oplug_mpeg/op_mpegpass.cpp:182
-#: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:282
+#: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:225
 msgid "MPEG TS"
 msgstr "MPEG TS"
 
 #: avidemux/ADM_outputs/oplug_mpeg/op_mpegpass.cpp:183
-#: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:283
+#: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:226
 msgid "MPEG VCD"
 msgstr "MPEG VCD"
 
 #: avidemux/ADM_outputs/oplug_mpeg/op_mpegpass.cpp:184
-#: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:284
+#: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:227
 msgid "MPEG SVCD"
 msgstr "MPEG SVCD"
 
 #: avidemux/ADM_outputs/oplug_mpeg/op_mpegpass.cpp:185
-#: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:285
+#: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:228
 msgid "MPEG DVD"
 msgstr "MPEG DVD"
 
@@ -680,60 +639,60 @@
 msgid "Dummy"
 msgstr "??"
 
-#: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:159
+#: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:140
 msgid "For VCD, audio must be 44.1 kHz MP2."
 msgstr "VCD ?????? 44.1 kHz MP2?"
 
-#: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:179
+#: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:160
 #: avidemux/ADM_libraries/ADM_lvemux/ADM_muxer.cpp:75
 msgid "Incompatible audio"
 msgstr "??????"
 
-#: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:179
+#: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:160
 msgid "For DVD, audio must be 48 kHz MP2, AC3 or LPCM."
 msgstr "DVD ?????? 48 kHz MP2, AC3 ? LPCM?"
 
-#: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:255
+#: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:198
 msgid "libmpeg2enc VCD"
 msgstr "libmpeg2enc VCD"
 
-#: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:258
+#: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:201
 msgid "libmpeg2enc SVCD"
 msgstr "libmpeg2enc SVCD"
 
-#: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:261
+#: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:204
 msgid "libmpeg2enc DVD"
 msgstr "libmpeg2enc DVD"
 
-#: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:264
+#: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:207
 msgid "FFmpeg MPEG-1 VBR"
 msgstr "FFmpeg MPEG-1 VBR"
 
-#: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:267
+#: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:210
 msgid "FFmpeg MPEG-2 SVCD VBR"
 msgstr "FFmpeg MPEG-2 SVCD VBR"
 
-#: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:270
+#: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:213
 msgid "FFmpeg MPEG-2 DVD VBR"
 msgstr "FFmpeg MPEG-2 DVD VBR"
 
-#: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:273
+#: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:216
 msgid "MPEG Requantizer"
 msgstr "MPEG ??????"
 
-#: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:281
+#: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:224
 msgid "MPEG ES"
 msgstr "MPEG ES"
 
-#: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:297
+#: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:240
 msgid "Pass 1/2"
 msgstr "?? 1/2"
 
-#: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:306
+#: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:249
 msgid "Error in pass 1"
 msgstr "??? 1 ?????"
 
-#: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:352
+#: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:295
 #: avidemux/ADM_outputs/oplug_ogm/op_ogsave.cpp:101
 #: avidemux/gtk_gui.cpp:889
 #: avidemux/gtk_gui.cpp:1499
@@ -751,7 +710,7 @@
 msgid "File error"
 msgstr "????"
 
-#: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:352
+#: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:295
 #: avidemux/ADM_outputs/oplug_ogm/op_ogsave.cpp:101
 #: avidemux/gtk_gui.cpp:1499
 #: avidemux/gtk_gui.cpp:2607
@@ -759,11 +718,11 @@
 msgid "Cannot open \"%s\" for writing."
 msgstr "???? \"%s\" ????"
 
-#: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:357
+#: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:300
 msgid "Pass 2/2"
 msgstr "?? 2/2"
 
-#: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:449
+#: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:392
 msgid "Error in pass 2"
 msgstr "??? 2 ?????"
 
@@ -881,7 +840,7 @@
 
 #: avidemux/ADM_inputs/ADM_nuv/ADM_nuv.cpp:754
 msgid "Expect a crash."
-msgstr "???????"
+msgstr "?????????"
 
 #: avidemux/ADM_inputs/ADM_nuv/ADM_nuv.cpp:1046
 msgid "Do you want to save an index ?"
@@ -987,7 +946,7 @@
 
 #: avidemux/gtk_gui.cpp:670
 msgid "_Go to frame:"
-msgstr "????(_G):"
+msgstr "???? (_G):"
 
 #: avidemux/gtk_gui.cpp:675
 msgid "Out of bounds"
@@ -1025,7 +984,7 @@
 
 #: avidemux/gtk_gui.cpp:775
 msgid "_Frames per second"
-msgstr "?????(_F)"
+msgstr "????? (_F)"
 
 #: avidemux/gtk_gui.cpp:778
 msgid "PAL - 25 FPS"
@@ -1338,7 +1297,7 @@
 
 #: avidemux/gtk_gui.cpp:2025
 msgid "_Track from video:"
-msgstr "??????(_T):"
+msgstr "?????? (_T):"
 
 #: avidemux/gtk_gui.cpp:2035
 msgid "Main Audio Track"
@@ -1464,15 +1423,15 @@
 
 #: avidemux/gui_autodrive.cpp:78
 msgid "No AAC audio encoder plugin found."
-msgstr "???? AAC ??????????"
+msgstr "???? AAC ??????????"
 
 #: avidemux/gui_autodrive.cpp:110
 msgid ""
 "The MP3 codec does not allow disabling reservoir.\n"
 "Install lame plugin"
 msgstr ""
-"? MP3 ?????????????\n"
-"?? lame ????"
+"? MP3 ?????????????\n"
+"?? lame ????"
 
 #: avidemux/gui_autodrive.cpp:116
 msgid ""
@@ -1513,13 +1472,13 @@
 
 #: avidemux/ADM_UIs/ADM_GTK/src/FAC_bitrate.cpp:111
 msgid "_Encoding mode:"
-msgstr "????(_E):"
+msgstr "???? (_E):"
 
 #: avidemux/ADM_UIs/ADM_GTK/src/FAC_bitrate.cpp:121
 #: avidemux/ADM_UIs/ADM_GTK/src/FAC_bitrate.cpp:283
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flv1.cpp:36
 msgid "_Bitrate (kb/s):"
-msgstr "???(_B) (kb/s):"
+msgstr "??? (_B) (kb/s):"
 
 #: avidemux/ADM_UIs/ADM_GTK/src/FAC_bitrate.cpp:135
 msgid "Single pass - bitrate"
@@ -1569,12 +1528,12 @@
 #: avidemux/ADM_UIs/ADM_GTK/src/FAC_hex.cpp:103
 #: avidemux/ADM_UIs/ADM_GTK/src/FAC_hex.cpp:137
 msgid "_Previous"
-msgstr "???(_P)"
+msgstr "??? (_P)"
 
 #: avidemux/ADM_UIs/ADM_GTK/src/FAC_hex.cpp:111
 #: avidemux/ADM_UIs/ADM_GTK/src/FAC_hex.cpp:167
 msgid "_Next"
-msgstr "???(_N)"
+msgstr "??? (_N)"
 
 #: avidemux/ADM_UIs/ADM_GTK/src/DIA_color.cpp:51
 msgid "Select Color"
@@ -1583,7 +1542,7 @@
 #: avidemux/ADM_UIs/ADM_GTK/src/DIA_filesel.cpp:119
 #: avidemux/ADM_UIs/ADM_GTK/src/DIA_filesel.cpp:279
 msgid "_Browse..."
-msgstr "??...(_B)"
+msgstr "??... (_B)"
 
 #: avidemux/ADM_audio/audiotimeline.cpp:78
 #: avidemux/ADM_audio/audiotimeline.cpp:89
@@ -1594,55 +1553,47 @@
 msgid "Requant"
 msgstr "????"
 
-#: avidemux/ADM_encoder/adm_encConfig.cpp:619
+#: avidemux/ADM_encoder/adm_encConfig.cpp:595
 msgid "Only QCIF and subQCIF are allowed for H.263"
 msgstr "H.263 ??? QCIF ? subQCIF"
 
-#: avidemux/ADM_encoder/adm_encffmpeg.cpp:266
-msgid "Incompatible settings"
-msgstr "?????"
-
-#: avidemux/ADM_encoder/adm_encffmpeg.cpp:266
-msgid "At the moment, the DV codec only accepts 720*576 at 25"
-msgstr "???? DV ??????? 720*576 at 25"
-
-#: avidemux/gui_savenew.cpp:79
+#: avidemux/gui_savenew.cpp:78
 msgid "Dual audio can only be used in copy mode"
 msgstr "??????? ???? ???"
 
-#: avidemux/gui_savenew.cpp:79
+#: avidemux/gui_savenew.cpp:78
 msgid "Select Copy as the video codec."
 msgstr "?? ???? ??????????"
 
-#: avidemux/gui_savenew.cpp:199
-#: avidemux/gui_savenew.cpp:215
-#: avidemux/gui_savenew.cpp:228
+#: avidemux/gui_savenew.cpp:198
+#: avidemux/gui_savenew.cpp:214
+#: avidemux/gui_savenew.cpp:227
 msgid "Incompatible output format"
 msgstr "????????"
 
-#: avidemux/gui_savenew.cpp:249
+#: avidemux/gui_savenew.cpp:248
 msgid "There is no second track"
 msgstr "??????"
 
-#: avidemux/gui_savenew.cpp:249
+#: avidemux/gui_savenew.cpp:248
 msgid "Select a second audio track in the Audio menu."
 msgstr "??????????????"
 
-#: avidemux/gui_savenew.cpp:253
+#: avidemux/gui_savenew.cpp:252
 msgid "Select dual audio AVI to write"
 msgstr "???? AVI ????"
 
-#: avidemux/gui_savenew.cpp:275
-#: avidemux/gui_savenew.cpp:293
+#: avidemux/gui_savenew.cpp:274
+#: avidemux/gui_savenew.cpp:292
 msgid "This cannot have packed VOP"
 msgstr "??????? VOP"
 
-#: avidemux/gui_savenew.cpp:275
-#: avidemux/gui_savenew.cpp:293
+#: avidemux/gui_savenew.cpp:274
+#: avidemux/gui_savenew.cpp:292
 msgid "It is not MPEG-4 video. File will not be saved."
 msgstr "?? MPEG-4 ???????????"
 
-#: avidemux/gui_savenew.cpp:339
+#: avidemux/gui_savenew.cpp:338
 msgid ""
 "You may need smart copy.\n"
 "Enable it?"
@@ -1650,7 +1601,7 @@
 "??????????\n"
 " ???? ?"
 
-#: avidemux/gui_savenew.cpp:342
+#: avidemux/gui_savenew.cpp:341
 msgid "_Q factor (set 4):"
 msgstr "_Q ?? (?? 4):"
 
@@ -1665,95 +1616,95 @@
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:290
 #: avidemux/ADM_libraries/ADM_utilities/ADM_gettext.cpp:46
 msgid "_File"
-msgstr "??(_F)"
+msgstr "?? (_F)"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:297
 msgid "_Open..."
-msgstr "??...(_O)"
+msgstr "??... (_O)"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:308
 msgid "_Append..."
-msgstr "??...(_A)"
+msgstr "??... (_A)"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:319
 msgid "_Save"
-msgstr "??(_S)"
+msgstr "?? (_S)"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:330
 msgid "Save _Video..."
-msgstr "????...(_V)"
+msgstr "????... (_V)"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:342
 msgid "Save _BMP Image..."
-msgstr "???BMP ??...(_B)"
+msgstr "???BMP ??... (_B)"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:346
 msgid "Save _JPEG Image..."
-msgstr "???JPEG ??...(_J)"
+msgstr "???JPEG ??... (_J)"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:350
 msgid "Save _Selection as JPEG Images..."
-msgstr "????????JPEG ??...(_S)"
+msgstr "????????JPEG ??... (_S)"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:363
 msgid "Save _Project"
-msgstr "????(_P)"
+msgstr "???? (_P)"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:371
 msgid "Save P_roject As..."
-msgstr "?????...(_R)"
+msgstr "?????... (_R)"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:379
 msgid "_Load/Run Project..."
-msgstr "??/?? ??...(_L)"
+msgstr "??/????... (_L)"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:387
 msgid "A_dd to Joblist..."
-msgstr "???????...(_D)"
+msgstr "???????... (_D)"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:391
 msgid "Show _Joblist"
-msgstr "??????(_J)"
+msgstr "?????? (_J)"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:403
 msgid "Co_nnect to avsproxy"
-msgstr "??? avsproxy(_N)"
+msgstr "??? avsproxy (_N)"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:412
 msgid "Proper_ties"
-msgstr "??(_T)"
+msgstr "?? (_T)"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:423
 msgid "AVI _Muxer Options"
-msgstr "AVI ?????(_M)"
+msgstr "AVI ????? (_M)"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:432
 msgid "_Quit"
-msgstr "??(_Q)"
+msgstr "?? (_Q)"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:443
 msgid "_Edit"
-msgstr "??(_E)"
+msgstr "?? (_E)"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:450
 msgid "_Reset Edits"
-msgstr "????(_R)"
+msgstr "???? (_R)"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:463
 msgid "Cu_t"
-msgstr "??(_T)"
+msgstr "?? (_T)"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:474
 msgid "_Copy"
-msgstr "??(_C)"
+msgstr "?? (_C)"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:485
 msgid "_Paste"
-msgstr "??(_P)"
+msgstr "?? (_P)"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:496
 msgid "_Delete"
-msgstr "??(_D)"
+msgstr "?? (_D)"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:512
 msgid "Set Marker _A"
@@ -1765,27 +1716,27 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:531
 msgid "Pre_ferences"
-msgstr "????(_F)"
+msgstr "???? (_F)"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:539
 msgid "_View"
-msgstr "??(_V)"
+msgstr "?? (_V)"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:546
 msgid "_Main Toolbar"
-msgstr "????(_M)"
+msgstr "???? (_M)"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:551
 msgid "_A/V Sidebar"
-msgstr "??/?? ??(_A)"
+msgstr "??/???? (_A)"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:561
 msgid "_Zoom 1:4"
-msgstr "??? 1:4(_Z)"
+msgstr "??? 1:4 (_Z)"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:568
 msgid "Z_oom 1:2"
-msgstr "??? 1:2(_O)"
+msgstr "??? 1:2 (_O)"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:575
 msgid "Zoom _1:1"
@@ -1797,15 +1748,15 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:589
 msgid "Vi_deo"
-msgstr "??(_D)"
+msgstr "?? (_D)"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:596
 msgid "_Decoder Options"
-msgstr "?????(_D)"
+msgstr "????? (_D)"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:603
 msgid "_Postprocessing"
-msgstr "????(_P)"
+msgstr "???? (_P)"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:606
 msgid "Select postprocessing level"
@@ -1813,56 +1764,56 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:616
 msgid "P_review"
-msgstr "??(_R)"
+msgstr "?? (_R)"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:623
 msgid "Display _Output"
-msgstr "????(_O)"
+msgstr "???? (_O)"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:635
 msgid "_Frame Rate"
-msgstr "???(_F)"
+msgstr "??? (_F)"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:639
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:688
 msgid "_Encoder"
-msgstr "???(_E)"
+msgstr "??? (_E)"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:646
 msgid "Fil_ters"
-msgstr "??(_F)"
+msgstr "?? (_F)"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:653
 msgid "_Audio"
-msgstr "??(_A)"
+msgstr "?? (_A)"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:660
 msgid "_Main Track"
-msgstr "???(_M)"
+msgstr "??? (_M)"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:664
 msgid "_Second Track"
-msgstr "???(_S)"
+msgstr "??? (_S)"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:668
 msgid "_Build VBR Time Map"
-msgstr "???????(VBR)????(_B)"
+msgstr "??????? (VBR) ???? (_B)"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:677
 msgid "S_ave..."
-msgstr "??...(_A)"
+msgstr "??... (_A)"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:695
 msgid "_Filters"
-msgstr "??(_F)"
+msgstr "?? (_F)"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:699
 msgid "_Tools"
-msgstr "??(_T)"
+msgstr "?? (_T)"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:706
 msgid "_Calculator"
-msgstr "???(_C)"
+msgstr "??? (_C)"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:722
 msgid "_Rebuild Frames (I & B)"
@@ -1874,11 +1825,11 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:730
 msgid "_Bitrate Histogram"
-msgstr "??????(_B)"
+msgstr "?????? (_B)"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:734
 msgid "_Scan for Black Frames..."
-msgstr "?????...(_S)"
+msgstr "?????... (_S)"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:743
 msgid "_VOB -> VobSub"
@@ -1894,15 +1845,15 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:755
 msgid "_Edit Glyph"
-msgstr "????(_E)"
+msgstr "???? (_E)"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:764
 msgid "_Frame Hex Dump"
-msgstr "???????(_F)"
+msgstr "??????? (_F)"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:768
 msgid "A_uto"
-msgstr "??(_U)"
+msgstr "?? (_U)"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:775
 msgid "_VCD"
@@ -1934,43 +1885,43 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:803
 msgid "_Go"
-msgstr "??(_G)"
+msgstr "?? (_G)"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:810
 msgid "_Play/Stop"
-msgstr "??/??(_P)"
+msgstr "??/?? (_P)"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:821
 msgid "P_revious Frame"
-msgstr "???(_R)"
+msgstr "??? (_R)"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:832
 msgid "_Next Frame"
-msgstr "???(_N)"
+msgstr "??? (_N)"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:843
 msgid "Pr_evious Intra Frame"
-msgstr "??????(_E)"
+msgstr "?????? (_E)"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:854
 msgid "Next _Intra Frame"
-msgstr "??????(_I)"
+msgstr "?????? (_I)"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:865
 msgid "Previou_s Black Frame"
-msgstr "?????(_S)"
+msgstr "????? (_S)"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:869
 msgid "Ne_xt Black Frame"
-msgstr "?????(_X)"
+msgstr "????? (_X)"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:873
 msgid "_First Frame"
-msgstr "???(_F)"
+msgstr "??? (_F)"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:884
 msgid "_Last Frame"
-msgstr "????(_L)"
+msgstr "???? (_L)"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:900
 msgid "Go to Marker _A"
@@ -1982,31 +1933,31 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:919
 msgid "Go to Fra_me..."
-msgstr "????...(_M)"
+msgstr "????... (_M)"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:930
 msgid "Go to _Time..."
-msgstr "????...(_T)"
+msgstr "????... (_T)"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:941
 msgid "_Custom"
-msgstr "??(_C)"
+msgstr "?? (_C)"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:945
 msgid "_Help"
-msgstr "??(_H)"
+msgstr "?? (_H)"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:952
 msgid "_Plugins"
-msgstr "????(_P)"
+msgstr "???? (_P)"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:956
 msgid "_Built-in Support"
-msgstr "?????(_B)"
+msgstr "????? (_B)"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:960
 msgid "_About"
-msgstr "??(_A)"
+msgstr "?? (_A)"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:978
 msgid "Open a file"
@@ -2018,7 +1969,7 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:994
 msgid "Audio/video file information"
-msgstr "??/?? ??"
+msgstr "??/????"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1002
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:391
@@ -2027,7 +1978,7 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1005
 msgid "Bitrate/size calculator"
-msgstr "???/?? ???"
+msgstr "???/?????"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1066
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:298
@@ -2243,7 +2194,7 @@
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_bindings.cpp:723
 #, c-format
 msgid "Frame:%c(%02d)"
-msgstr "??:%c(%02d)"
+msgstr "??:%c (%02d)"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/ADM_tray_gtk.cpp:53
 msgid "Open Avidemux"
@@ -2298,7 +2249,7 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filterlist.cpp:100
 msgid "Transformation"
-msgstr "??"
+msgstr "??"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filterlist.cpp:125
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager_dialog.cpp:286
@@ -2353,11 +2304,11 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager_dialog.cpp:146
 msgid "Open filter list [Ctrl-O]"
-msgstr "?????? [Ctrl-O]"
+msgstr "?????? [Ctrl-O]"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager_dialog.cpp:155
 msgid "Save filter list [Ctrl-S]"
-msgstr "?????? [Ctrl-S]"
+msgstr "?????? [Ctrl-S]"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager_dialog.cpp:163
 msgid "Save Script"
@@ -2401,7 +2352,7 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager_dialog.cpp:261
 msgid "Transform"
-msgstr "??"
+msgstr "??"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager_dialog.cpp:334
 msgid "Noise"
@@ -2413,7 +2364,7 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager_dialog.cpp:406
 msgid "Misc"
-msgstr "??"
+msgstr "??"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager_dialog.cpp:417
 msgid "External"
@@ -2421,7 +2372,7 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager_dialog.cpp:428
 msgid "Add selected filter to the Active Filters list"
-msgstr "?????????????????"
+msgstr "??????????????????"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager_dialog.cpp:434
 msgid "<b>Available Filters</b>"
@@ -2441,7 +2392,7 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager_dialog.cpp:503
 msgid "P_artial"
-msgstr "??(_A)"
+msgstr "?? (_A)"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager_dialog.cpp:506
 msgid "Apply the current filter only to a part of the file"
@@ -2453,7 +2404,7 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager_dialog.cpp:521
 msgid "C_onfigure"
-msgstr "??(_O)"
+msgstr "?? (_O)"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager_dialog.cpp:525
 msgid "<b >Active Filters</b>"
@@ -2461,7 +2412,7 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager_dialog.cpp:552
 msgid "_Preview"
-msgstr "??(_P)"
+msgstr "?? (_P)"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_threshold.cpp:194
 #: avidemux/ADM_videoFilter/ADM_vidThreshold.cpp:152
@@ -2509,26 +2460,6 @@
 msgid "Retry"
 msgstr "??"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_exLame.cpp:63
-msgid "Lame command"
-msgstr "Lame ??"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_exLame.cpp:72
-msgid "Enter parameters (i.e. -b 192 -m s ...)"
-msgstr "???? (i.e. -b 192 -m s ...)"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_pipe.cpp:78
-msgid "Pipe to"
-msgstr "???"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_pipe.cpp:87
-msgid "Application path/name (/usr/bin/sox...)"
-msgstr "???????/?? (/usr/bin/sox...)"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_pipe.cpp:96
-msgid "Full parameter line"
-msgstr "?????"
-
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/toolkit_dialog.cpp:481
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/toolkit_dialog.cpp:559
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/toolkit_dialog.cpp:627
@@ -2772,7 +2703,7 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_ocr.cpp:160
 msgid "_Calibrate"
-msgstr "??(_C)"
+msgstr "?? (_C)"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_ocr.cpp:164
 msgid "If the glyphs are too thin, enter a lower value here"
@@ -2796,7 +2727,7 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_ocr.cpp:178
 msgid "_Ignore glyph"
-msgstr "????(_I)"
+msgstr "???? (_I)"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_ocr.cpp:182
 msgid "This glyph will be ignored from now on"
@@ -2826,16 +2757,16 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:451
 msgid "_Medium:"
-msgstr "??(_M):"
+msgstr "?? (_M):"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:462
 msgid "_Format:"
-msgstr "??(_F):"
+msgstr "?? (_F):"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:473
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:531
 msgid "Total size (custom)"
-msgstr "???(??)"
+msgstr "??? (??)"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:483
 msgid "_Custom size (MB):"
@@ -2966,7 +2897,7 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:609
 msgid "<b>Processed Frames:</b>"
-msgstr "<b>???????</b>"
+msgstr "<b>???????</b>"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:617
 msgid "<b>Total Frames:</b>"
@@ -3858,7 +3789,7 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_about.cpp:62
 msgid "translator-credits"
-msgstr "??? (ziyawu at gmail.com)"
+msgstr "??? (Dong-Jun Wu) <ziyawu at gmail.com>"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_idx_pg.cpp:39
 msgid "Continue indexing"
@@ -4084,6 +4015,10 @@
 msgid "Video Codecs"
 msgstr "??????"
 
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp:127
+msgid "Xvid"
+msgstr "Xvid"
+
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp:128
 msgid "x264"
 msgstr "x264"
@@ -4162,11 +4097,11 @@
 #: plugins/ADM_audioEncoders/vorbis/audioencoder_vorbis.cpp:320
 #: plugins/ADM_audioEncoders/lame/audioencoder_lame.cpp:317
 msgid "_Quality:"
-msgstr "??(_Q):"
+msgstr "?? (_Q):"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_mjpeg.cpp:31
 msgid "_Swap U&V"
-msgstr "?? U&V(_S)"
+msgstr "?? U&V (_S)"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_mjpeg.cpp:33
 msgid "MJPEG Configuration"
@@ -4175,7 +4110,7 @@
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_postproc.cpp:21
 #: plugins/ADM_videoFilters/ForcedPP/ADM_vidForcedPP.cpp:44
 msgid "_Filter strength:"
-msgstr "????(_S):"
+msgstr "???? (_S):"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_postproc.cpp:22
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavDecoder.cpp:27
@@ -4186,18 +4121,18 @@
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:298
 #: plugins/ADM_videoFilters/ForcedPP/ADM_vidForcedPP.cpp:56
 msgid "_Horizontal deblocking"
-msgstr "??????????(_H)"
+msgstr "?????????? (_H)"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_postproc.cpp:33
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:299
 #: plugins/ADM_videoFilters/ForcedPP/ADM_vidForcedPP.cpp:57
 msgid "_Vertical deblocking"
-msgstr "??????????(_V)"
+msgstr "?????????? (_V)"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_postproc.cpp:34
 #: plugins/ADM_videoFilters/ForcedPP/ADM_vidForcedPP.cpp:58
 msgid "_Deringing"
-msgstr "??????(_D)"
+msgstr "?????? (_D)"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_postproc.cpp:38
 msgid "Postprocessing"
@@ -4205,7 +4140,7 @@
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:48
 msgid "_Dynamic range compression"
-msgstr "??????(_D)"
+msgstr "?????? (_D)"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:50
 msgid "_Time shift (ms):"
@@ -4217,7 +4152,7 @@
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:58
 msgid "R_esampling (Hz):"
-msgstr "????(_E) (Hz):"
+msgstr "???? (_E) (Hz):"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:58
 msgid "Resampling frequency (Hz)"
@@ -4233,7 +4168,7 @@
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:71
 msgid "_Frame rate change:"
-msgstr "?????(_F):"
+msgstr "????? (_F):"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:76
 msgid "Automatic (max -3 dB)"
@@ -4245,11 +4180,11 @@
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:79
 msgid "_Gain mode:"
-msgstr "????(_G):"
+msgstr "???? (_G):"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:81
 msgid "G_ain value:"
-msgstr "???(_A):"
+msgstr "??? (_A):"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:83
 #: plugins/ADM_videoFilters/colorYUV/gtk/DIA_coloryuv.cpp:183
@@ -4294,7 +4229,7 @@
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:101
 msgid "_Mixer:"
-msgstr "???(_M):"
+msgstr "??? (_M):"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:105
 msgid "Audio Filters"
@@ -4302,15 +4237,15 @@
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_gototime.cpp:9
 msgid "_Hours:"
-msgstr "??(_H):"
+msgstr "?? (_H):"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_gototime.cpp:10
 msgid "_Minutes:"
-msgstr "??(_M):"
+msgstr "?? (_M):"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_gototime.cpp:11
 msgid "_Seconds:"
-msgstr "?(_S):"
+msgstr "? (_S):"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_gototime.cpp:14
 msgid "Go to Time"
@@ -4318,7 +4253,7 @@
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavDecoder.cpp:28
 msgid "Show motion _vectors"
-msgstr "??????(_V)"
+msgstr "?????? (_V)"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavDecoder.cpp:30
 msgid "Decoder Options"
@@ -4366,15 +4301,15 @@
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:60
 msgid "Mi_n. quantizer:"
-msgstr "?????(_N):"
+msgstr "????? (_N):"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:61
 msgid "Ma_x. quantizer:"
-msgstr "?????(_X):"
+msgstr "????? (_X):"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:62
 msgid "Max. quantizer _difference:"
-msgstr "??????(_D):"
+msgstr "?????? (_D):"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:64
 msgid "4_MV"
@@ -4382,11 +4317,11 @@
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:65
 msgid "_Trellis quantization"
-msgstr "??????(_T)"
+msgstr "?????? (_T)"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:67
 msgid "_Quarter pixel"
-msgstr "1/4 ??(_Q)"
+msgstr "1/4 ?? (_Q)"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:68
 msgid "_GMC"
@@ -4394,15 +4329,15 @@
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:71
 msgid "_Number of B frames:"
-msgstr "B ????(_N):"
+msgstr "B ???? (_N):"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:72
 msgid "_Quantization type:"
-msgstr "??????(_Q):"
+msgstr "?????? (_Q):"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:74
 msgid "_Macroblock decision:"
-msgstr "??????(_M):"
+msgstr "?????? (_M):"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:76
 msgid "_Filesize tolerance (kb):"
@@ -4410,11 +4345,11 @@
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:78
 msgid "_Quantizer compression:"
-msgstr "????(_Q):"
+msgstr "???? (_Q):"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:79
 msgid "Quantizer _blur:"
-msgstr "????(_B):"
+msgstr "???? (_B):"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:84
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:326
@@ -4479,12 +4414,12 @@
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_SVCD.cpp:57
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp:70
 msgid "Aspect _ratio:"
-msgstr "????(_R):"
+msgstr "???? (_R):"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_SVCD.cpp:58
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp:71
 msgid "_Matrices:"
-msgstr "??(_M):"
+msgstr "?? (_M):"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_SVCD.cpp:59
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp:72
@@ -4500,7 +4435,7 @@
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_SVCD.cpp:66
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp:78
 msgid "_Interlacing:"
-msgstr "??(_I):"
+msgstr "?? (_I):"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_SVCD.cpp:70
 msgid "MPEG-2 Configuration"
@@ -4508,7 +4443,7 @@
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_plugins.cpp:45
 msgid "Audio Plugins"
-msgstr "??????"
+msgstr "??????"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_plugins.cpp:68
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:344
@@ -4519,7 +4454,7 @@
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_plugins.cpp:74
 msgid "Video Encoder Plugins"
-msgstr "?????????"
+msgstr "?????????"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_plugins.cpp:98
 msgid "Video Encoder"
@@ -4527,15 +4462,15 @@
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_plugins.cpp:103
 msgid "Audio Device Plugins"
-msgstr "????????"
+msgstr "????????"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_plugins.cpp:125
 msgid "Audio Device"
-msgstr "????"
+msgstr "????"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_plugins.cpp:132
 msgid "Audio Encoder Plugins"
-msgstr "?????????"
+msgstr "?????????"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_plugins.cpp:154
 msgid "Audio Encoders"
@@ -4543,7 +4478,7 @@
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_plugins.cpp:161
 msgid "Plugins Info"
-msgstr "??????"
+msgstr "??????"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_v2v.cpp:35
 msgid "_VOB file(s):"
@@ -4584,7 +4519,7 @@
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_requant.cpp:39
 msgid "_Shrink Factor:"
-msgstr "????(_S):"
+msgstr "???? (_S):"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_requant.cpp:42
 msgid "Requant Configuration"
@@ -4597,7 +4532,7 @@
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:82
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:198
 msgid "Use GlyphSet (optional):"
-msgstr "???? (???):"
+msgstr "???? (???):"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:82
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:198
@@ -4688,7 +4623,7 @@
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp:66
 msgid "_Use Xvid rate control"
-msgstr "?? Xvid ?????(_U)"
+msgstr "?? Xvid ????? (_U)"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp:68
 msgid "_Buffer size:"
@@ -4700,11 +4635,11 @@
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:175
 msgid "_Use systray while encoding"
-msgstr "????????(_U)"
+msgstr "???????? (_U)"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:176
 msgid "_Accept non-standard audio frequency for DVD"
-msgstr "??? DVD ??????????(_A)"
+msgstr "??? DVD ?????????? (_A)"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:177
 msgid "Create _OpenDML files"
@@ -4712,27 +4647,27 @@
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:178
 msgid "Automatically _index MPEG files"
-msgstr "???? MPEG ?(_I)"
+msgstr "???? MPEG ? (_I)"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:179
 msgid "Automatically _swap A and B if A>B"
-msgstr "?? A>B ?????? A ? B(_S)"
+msgstr "?? A>B ?????? A ? B (_S)"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:180
 msgid "_Disable NUV audio sync"
-msgstr "?? NUV ????(_D)"
+msgstr "?? NUV ???? (_D)"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:182
 msgid "Automatically _build VBR map"
-msgstr "?????????(VBR)??(_B)"
+msgstr "????????? (VBR) ?? (_B)"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:183
 msgid "Automatically _rebuild index"
-msgstr "????????(_R)"
+msgstr "???????? (_R)"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:184
 msgid "Automatically remove _packed bitstream"
-msgstr "????????????(_P)"
+msgstr "???????????? (_P)"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:186
 msgid "SIMD"
@@ -4792,15 +4727,15 @@
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:229
 msgid "_Encoding priority:"
-msgstr "?????(_E):"
+msgstr "????? (_E):"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:230
 msgid "_Indexing/unpacking priority:"
-msgstr "??/????????(_I):"
+msgstr "??/???????? (_I):"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:231
 msgid "_Playback priority:"
-msgstr "???????(_P):"
+msgstr "??????? (_P):"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:233
 msgid "Prioritisation"
@@ -4812,7 +4747,7 @@
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:240
 msgid "_Use alternative tag for MP3 in .mp4"
-msgstr "? .mp4 ? MP3 ????????(_U)"
+msgstr "? .mp4 ? MP3 ???????? (_U)"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:244
 msgid "XVideo (best)"
@@ -4832,7 +4767,7 @@
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:255
 msgid "Video _display:"
-msgstr "????(_D):"
+msgstr "???? (_D):"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:260
 msgid "No alerts"
@@ -4848,7 +4783,7 @@
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:264
 msgid "_Message level:"
-msgstr "????(_M):"
+msgstr "???? (_M):"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:270
 msgid "Master"
@@ -4856,7 +4791,7 @@
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:271
 msgid "_Volume control:"
-msgstr "????(_V):"
+msgstr "???? (_V):"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:276
 msgid "No downmixing"
@@ -4872,21 +4807,21 @@
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:281
 msgid "_Local playback downmixing:"
-msgstr "??????(_L):"
+msgstr "?????? (_L):"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:295
 msgid "_AudioDevice"
-msgstr "????(_A)"
+msgstr "???? (_A)"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:300
 msgid "De_ringing"
-msgstr "??????(_R)"
+msgstr "?????? (_R)"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:301
 #: plugins/ADM_videoFilters/MSharpen/ADM_vidMSharpen.cpp:160
 #: plugins/ADM_videoFilters/MSmooth/ADM_vidMsmooth.cpp:184
 msgid "_Strength:"
-msgstr "??(_S):"
+msgstr "?? (_S):"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:302
 msgid "Default Postprocessing"
@@ -4894,7 +4829,7 @@
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:316
 msgid "_Filter directory:"
-msgstr "????(_F):"
+msgstr "???? (_F):"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:316
 msgid "Select filter directory"
@@ -4902,15 +4837,15 @@
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:317
 msgid "_Load external filters"
-msgstr "??????(_L)"
+msgstr "?????? (_L)"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:320
 msgid "Use _Global GlyphSet"
-msgstr "??????(_G)"
+msgstr "?????? (_G)"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:321
 msgid "Gl_yphSet:"
-msgstr "??(_Y):"
+msgstr "?? (_Y):"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:330
 msgid "Automation"
@@ -4995,15 +4930,15 @@
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_resizeWiz.cpp:53
 msgid "_Target type:"
-msgstr "????(_T):"
+msgstr "???? (_T):"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_resizeWiz.cpp:54
 msgid "_Source aspect ratio:"
-msgstr "???????(_S):"
+msgstr "??????? (_S):"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_resizeWiz.cpp:55
 msgid "_Destination aspect ratio:"
-msgstr "?????????(_D):"
+msgstr "????????? (_D):"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_resizeWiz.cpp:60
 msgid "Auto Wizard"
@@ -5011,11 +4946,11 @@
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_jobs_save.cpp:7
 msgid "_Job name:"
-msgstr "????(_J):"
+msgstr "???? (_J):"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_jobs_save.cpp:8
 msgid "Output _File:"
-msgstr "????(_F):"
+msgstr "???? (_F):"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_jobs_save.cpp:8
 msgid "Select Video To Write"
@@ -5072,7 +5007,7 @@
 
 #: avidemux/ADM_osSupport/ADM_crashHook.cpp:64
 msgid "Crash file"
-msgstr "???"
+msgstr "???"
 
 #: avidemux/ADM_osSupport/ADM_crashHook.cpp:65
 msgid ""
@@ -5080,7 +5015,7 @@
 "Do you want to load it  ?\n"
 "(It will be deleted in all cases, you should save it if you want to keep it)"
 msgstr ""
-"?????????\n"
+"?????????\n"
 "????? ?\n"
 "(????????????????????????)"
 
@@ -5134,7 +5069,7 @@
 
 #: avidemux/ADM_filter/filter_declaration.cpp:52
 msgid "Particle List"
-msgstr "????"
+msgstr "????"
 
 #: avidemux/ADM_filter/filter_declaration.cpp:52
 msgid "Identify 'particles' (groups of pixels)"
@@ -5219,11 +5154,11 @@
 
 #: avidemux/ADM_videoFilter/ADM_vidThreshold.cpp:135
 msgid "Mi_nimum value to be in-range:"
-msgstr "????????(_N):"
+msgstr "???????? (_N):"
 
 #: avidemux/ADM_videoFilter/ADM_vidThreshold.cpp:136
 msgid "Ma_ximum value to be in-range:"
-msgstr "????????(_X):"
+msgstr "???????? (_X):"
 
 #: avidemux/ADM_videoFilter/ADM_vidThreshold.cpp:139
 msgid "In-range values go white, out-of-range go black"
@@ -5255,7 +5190,7 @@
 #: avidemux/ADM_videoFilter/ADM_vidComputeAverage.cpp:179
 #: avidemux/ADM_videoFilter/ADM_vidParticle.cpp:187
 msgid "_Output File:"
-msgstr "???(_O):"
+msgstr "??? (_O):"
 
 #: avidemux/ADM_videoFilter/ADM_vidComputeAverage.cpp:179
 msgid "Select output file"
@@ -5279,7 +5214,7 @@
 
 #: avidemux/ADM_videoFilter/ADM_vidComputeAverage.cpp:193
 msgid "Display _Mode:"
-msgstr "????(_M):"
+msgstr "???? (_M):"
 
 #: avidemux/ADM_videoFilter/ADM_vidComputeAverage.cpp:198
 msgid "ComputeAverage"
@@ -5303,15 +5238,15 @@
 
 #: avidemux/ADM_videoFilter/ADM_vidParticle.cpp:141
 msgid "Output _Format:"
-msgstr "????(_F):"
+msgstr "???? (_F):"
 
 #: avidemux/ADM_videoFilter/ADM_vidParticle.cpp:166
 msgid "Mi_nimum area for a particle to be detected:"
-msgstr "???????????(_N):"
+msgstr "??????????? (_N):"
 
 #: avidemux/ADM_videoFilter/ADM_vidParticle.cpp:169
 msgid "Ma_ximum area for a particle to be detected:"
-msgstr "???????????(_X):"
+msgstr "??????????? (_X):"
 
 #: avidemux/ADM_videoFilter/ADM_vidParticle.cpp:173
 msgid "_Left side crop (ignore particles in):"
@@ -5331,7 +5266,7 @@
 
 #: avidemux/ADM_videoFilter/ADM_vidParticle.cpp:190
 msgid "_Camera number:"
-msgstr "?????(_C):"
+msgstr "????? (_C):"
 
 #: avidemux/ADM_videoFilter/ADM_vidEraser.cpp:187
 msgid "Erase"
@@ -5375,11 +5310,11 @@
 
 #: avidemux/ADM_videoFilter/ADM_vidEraser.cpp:203
 msgid "Brush _Mode:"
-msgstr "????(_M):"
+msgstr "???? (_M):"
 
 #: avidemux/ADM_videoFilter/ADM_vidEraser.cpp:207
 msgid "Brush _Size:"
-msgstr "????(_S):"
+msgstr "???? (_S):"
 
 #: avidemux/ADM_videoFilter/ADM_vidEraser.cpp:240
 msgid "Output \"_Color\" for all masked pixels:"
@@ -5387,7 +5322,7 @@
 
 #: avidemux/ADM_videoFilter/ADM_vidEraser.cpp:246
 msgid "Eraser _Data File:"
-msgstr "??????(_D):"
+msgstr "?????? (_D):"
 
 #: avidemux/ADM_videoFilter/ADM_vidEraser.cpp:246
 msgid "Select data file"
@@ -5439,7 +5374,7 @@
 
 #: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:272
 msgid "A = convolve(P); Load convolution kernel from file"
-msgstr "A = ??(P); ?????????"
+msgstr "A = ?? (P); ?????????"
 
 #: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:274
 msgid "A = pixel from image file as float; Load image from file"
@@ -5459,11 +5394,11 @@
 
 #: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:285
 msgid "Select _Operation on each pixel P and input A:"
-msgstr "??????? P ?????? A(_O):"
+msgstr "??????? P ?????? A (_O):"
 
 #: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:290
 msgid "Input _Type:"
-msgstr "????(_T):"
+msgstr "???? (_T):"
 
 #: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:321
 msgid "Input _File (image or convolution kernel):"
@@ -5487,7 +5422,7 @@
 
 #: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:335
 msgid "Input _Constant:"
-msgstr "?????(_C):"
+msgstr "????? (_C):"
 
 #: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:339
 msgid ""
@@ -5547,7 +5482,7 @@
 #: avidemux/gui_navigate.cpp:112
 #: avidemux/gui_navigate.cpp:430
 msgid "Cannot decode keyframe."
-msgstr "????????"
+msgstr "?????????"
 
 #: avidemux/gui_navigate.cpp:238
 msgid "Seeking"
@@ -5630,7 +5565,7 @@
 
 #: avidemux/GUI_jobs.cpp:37
 msgid "Something very wrong happened when building joblist."
-msgstr "????????????????"
+msgstr "????????????????"
 
 #: avidemux/GUI_jobs.cpp:42
 msgid "There are no jobs stored"
@@ -5711,7 +5646,7 @@
 
 #: plugins/ADM_videoFilters/Deinterlace/ADM_vidDeinterlace.cpp:39
 msgid "Mask interlacing artifacts. Port of Smart deinterlace."
-msgstr "???????????????????"
+msgstr "?????????????????"
 
 #: plugins/ADM_videoFilters/AddBorders/ADM_vidAddBorder.cpp:32
 msgid "Add black borders"
@@ -5724,22 +5659,22 @@
 #: plugins/ADM_videoFilters/AddBorders/ADM_vidAddBorder.cpp:214
 #: plugins/ADM_videoFilters/BlackenBorders/ADM_vidBlackenBorders.cpp:211
 msgid "_Left border:"
-msgstr "???(_L):"
+msgstr "??? (_L):"
 
 #: plugins/ADM_videoFilters/AddBorders/ADM_vidAddBorder.cpp:215
 #: plugins/ADM_videoFilters/BlackenBorders/ADM_vidBlackenBorders.cpp:212
 msgid "_Right border:"
-msgstr "???(_R):"
+msgstr "??? (_R):"
 
 #: plugins/ADM_videoFilters/AddBorders/ADM_vidAddBorder.cpp:216
 #: plugins/ADM_videoFilters/BlackenBorders/ADM_vidBlackenBorders.cpp:213
 msgid "_Top border:"
-msgstr "????(_T):"
+msgstr "???? (_T):"
 
 #: plugins/ADM_videoFilters/AddBorders/ADM_vidAddBorder.cpp:217
 #: plugins/ADM_videoFilters/BlackenBorders/ADM_vidBlackenBorders.cpp:214
 msgid "_Bottom border:"
-msgstr "????(_B):"
+msgstr "???? (_B):"
 
 #: plugins/ADM_videoFilters/AddBorders/ADM_vidAddBorder.cpp:220
 msgid "Add Borders"
@@ -5808,11 +5743,11 @@
 
 #: plugins/ADM_videoFilters/ResampleFps/ADM_vidResampleFPS.cpp:71
 msgid "_New frame rate:"
-msgstr "????(_N):"
+msgstr "???? (_N):"
 
 #: plugins/ADM_videoFilters/ResampleFps/ADM_vidResampleFPS.cpp:72
 msgid "_Blend"
-msgstr "??(_B)"
+msgstr "?? (_B)"
 
 #: plugins/ADM_videoFilters/MPDelogo/ADM_vidMPdelogo.cpp:43
 msgid "MPlayer delogo"
@@ -5893,19 +5828,19 @@
 #: plugins/ADM_videoFilters/McDeint/ADM_vidMcDeint.cpp:100
 #: plugins/ADM_audioEncoders/vorbis/audioencoder_vorbis.cpp:304
 msgid "_Mode:"
-msgstr "??(_M):"
+msgstr "?? (_M):"
 
 #: plugins/ADM_videoFilters/Decimate/ADM_vidDecDec.cpp:185
 msgid "_Threshold 1:"
-msgstr "??? 1(_T):"
+msgstr "??? 1 (_T):"
 
 #: plugins/ADM_videoFilters/Decimate/ADM_vidDecDec.cpp:186
 msgid "T_hreshold 2:"
-msgstr "??? 2(_H):"
+msgstr "??? 2 (_H):"
 
 #: plugins/ADM_videoFilters/Decimate/ADM_vidDecDec.cpp:187
 msgid "C_ycle:"
-msgstr "??(_Y):"
+msgstr "?? (_Y):"
 
 #: plugins/ADM_videoFilters/Pulldown/ADM_vidPulldown.cpp:38
 msgid "Pulldown"
@@ -6002,7 +5937,7 @@
 
 #: plugins/ADM_videoFilters/Logo/ADM_vidLogo.cpp:82
 msgid "_Alpha:"
-msgstr "??(_A):"
+msgstr "?? (_A):"
 
 #: plugins/ADM_videoFilters/Yadif/ADM_vidYadif.cpp:76
 #: plugins/ADM_videoFilters/Yadif/ADM_vidYadif.cpp:151
@@ -6011,7 +5946,7 @@
 
 #: plugins/ADM_videoFilters/Yadif/ADM_vidYadif.cpp:79
 msgid "Yet Another DeInterlacer. Ported from MPlayer."
-msgstr "? MPlayer ?????????????"
+msgstr "????????? MPlayer ?????"
 
 #: plugins/ADM_videoFilters/Yadif/ADM_vidYadif.cpp:136
 msgid "Temporal & spatial check"
@@ -6041,31 +5976,31 @@
 
 #: plugins/ADM_videoFilters/Yadif/ADM_vidYadif.cpp:147
 msgid "_Order:"
-msgstr "??(_O):"
+msgstr "?? (_O):"
 
 #: plugins/ADM_videoFilters/Denoise/ADM_vidDenoise.cpp:43
 msgid "Port of Transcode DNR."
-msgstr "? DNR ???????"
+msgstr "? DNR ???????"
 
 #: plugins/ADM_videoFilters/Denoise/ADM_vidDenoise.cpp:382
 msgid "_Luma lock:"
-msgstr "????(_L):"
+msgstr "???? (_L):"
 
 #: plugins/ADM_videoFilters/Denoise/ADM_vidDenoise.cpp:383
 msgid "C_hroma lock:"
-msgstr "????(_H):"
+msgstr "???? (_H):"
 
 #: plugins/ADM_videoFilters/Denoise/ADM_vidDenoise.cpp:384
 msgid "L_uma threshold:"
-msgstr "?????(_U):"
+msgstr "????? (_U):"
 
 #: plugins/ADM_videoFilters/Denoise/ADM_vidDenoise.cpp:385
 msgid "Ch_roma threshold:"
-msgstr "?????(_R):"
+msgstr "????? (_R):"
 
 #: plugins/ADM_videoFilters/Denoise/ADM_vidDenoise.cpp:387
 msgid "_Scene change:"
-msgstr "????(_S):"
+msgstr "???? (_S):"
 
 #: plugins/ADM_videoFilters/MSharpen/ADM_vidMSharpen.cpp:81
 #: plugins/ADM_videoFilters/MSharpen/ADM_vidMSharpen.cpp:165
@@ -6078,11 +6013,11 @@
 
 #: plugins/ADM_videoFilters/MSharpen/ADM_vidMSharpen.cpp:156
 msgid "_Mask"
-msgstr "??(_M)"
+msgstr "?? (_M)"
 
 #: plugins/ADM_videoFilters/MSharpen/ADM_vidMSharpen.cpp:157
 msgid "_High Q"
-msgstr "? Q(_H)"
+msgstr "? Q (_H)"
 
 #: plugins/ADM_videoFilters/MSharpen/ADM_vidMSharpen.cpp:159
 #: plugins/ADM_videoFilters/DgBob/ADM_vidDGbob.cpp:86
@@ -6128,7 +6063,7 @@
 
 #: plugins/ADM_videoFilters/Rotate/ADM_vidRotate.cpp:264
 msgid "_Angle:"
-msgstr "??(_A):"
+msgstr "?? (_A):"
 
 #: plugins/ADM_videoFilters/TemporalCleaner/ADM_vidVlad.cpp:72
 #: plugins/ADM_videoFilters/TemporalCleaner/ADM_vidVlad.cpp:96
@@ -6137,15 +6072,15 @@
 
 #: plugins/ADM_videoFilters/TemporalCleaner/ADM_vidVlad.cpp:75
 msgid "Vlad59's Avisynth port of Jim Casaburi's denoiser."
-msgstr "Vlad59 ? Avisynth ? Jim Casaburi ??????????"
+msgstr "Vlad59 ? Avisynth ?? Jim Casaburi ??????????"
 
 #: plugins/ADM_videoFilters/TemporalCleaner/ADM_vidVlad.cpp:91
 msgid "_Luma temporal threshold:"
-msgstr "???????(_L):"
+msgstr "??????? (_L):"
 
 #: plugins/ADM_videoFilters/TemporalCleaner/ADM_vidVlad.cpp:92
 msgid "Ch_roma temporal threshold:"
-msgstr "???????(_R):"
+msgstr "??????? (_R):"
 
 #: plugins/ADM_videoFilters/Delta/ADM_vidDelta.cpp:40
 msgid "Luma delta"
@@ -6195,11 +6130,11 @@
 
 #: plugins/ADM_videoFilters/lavDeinterlace/ADM_lavpp_deint.cpp:115
 msgid "_Deinterlacing:"
-msgstr "???(_D):"
+msgstr "??? (_D):"
 
 #: plugins/ADM_videoFilters/lavDeinterlace/ADM_lavpp_deint.cpp:116
 msgid "_Autolevel"
-msgstr "????(_A)"
+msgstr "???? (_A)"
 
 #: plugins/ADM_videoFilters/Telecide/ADM_vidDecTelecide.cpp:53
 #: plugins/ADM_videoFilters/Telecide/ADM_vidDecTelecide.cpp:123
@@ -6263,54 +6198,54 @@
 
 #: plugins/ADM_videoFilters/Telecide/ADM_vidDecTelecide.cpp:102
 msgid "_Strategy:"
-msgstr "??(_S):"
+msgstr "?? (_S):"
 
 #: plugins/ADM_videoFilters/Telecide/ADM_vidDecTelecide.cpp:103
 #: plugins/ADM_videoFilters/Tdeint/DIA_tdeint.cpp:77
 #: plugins/ADM_videoFilters/DgBob/ADM_vidDGbob.cpp:84
 #: plugins/ADM_videoFilters/KernelDeint/ADM_vidKernelDeint.cpp:74
 msgid "_Field order:"
-msgstr "??????(_F):"
+msgstr "?????? (_F):"
 
 #: plugins/ADM_videoFilters/Telecide/ADM_vidDecTelecide.cpp:104
 msgid "_Postprocessing:"
-msgstr "????(_P):"
+msgstr "???? (_P):"
 
 #: plugins/ADM_videoFilters/Telecide/ADM_vidDecTelecide.cpp:105
 msgid "_Try backward:"
-msgstr "????(_T):"
+msgstr "???? (_T):"
 
 #: plugins/ADM_videoFilters/Telecide/ADM_vidDecTelecide.cpp:107
 msgid "_Direct threshold:"
-msgstr "?????(_D):"
+msgstr "????? (_D):"
 
 #: plugins/ADM_videoFilters/Telecide/ADM_vidDecTelecide.cpp:108
 msgid "_Backward threshold:"
-msgstr "?????(_B):"
+msgstr "????? (_B):"
 
 #: plugins/ADM_videoFilters/Telecide/ADM_vidDecTelecide.cpp:109
 msgid "_Noise threshold:"
-msgstr "?????(_N):"
+msgstr "????? (_N):"
 
 #: plugins/ADM_videoFilters/Telecide/ADM_vidDecTelecide.cpp:110
 msgid "Postp_rocessing threshold:"
-msgstr "???????(_R):"
+msgstr "??????? (_R):"
 
 #: plugins/ADM_videoFilters/Telecide/ADM_vidDecTelecide.cpp:112
 msgid "_Use chroma to decide"
-msgstr "???????(_U)"
+msgstr "??????? (_U)"
 
 #: plugins/ADM_videoFilters/Telecide/ADM_vidDecTelecide.cpp:113
 msgid "Sho_w info"
-msgstr "????(_W)"
+msgstr "???? (_W)"
 
 #: plugins/ADM_videoFilters/Telecide/ADM_vidDecTelecide.cpp:114
 msgid "Debu_g"
-msgstr "??(_D)"
+msgstr "?? (_D)"
 
 #: plugins/ADM_videoFilters/Telecide/ADM_vidDecTelecide.cpp:115
 msgid "Bl_end"
-msgstr "??(_E)"
+msgstr "?? (_E)"
 
 #: plugins/ADM_videoFilters/BlackenBorders/ADM_vidBlackenBorders.cpp:58
 msgid "Blacken borders"
@@ -6404,12 +6339,12 @@
 
 #: plugins/ADM_videoFilters/Tdeint/DIA_tdeint.cpp:78
 msgid "_Interpolate:"
-msgstr "??(_I):"
+msgstr "?? (_I):"
 
 #: plugins/ADM_videoFilters/Tdeint/DIA_tdeint.cpp:80
 #: plugins/ADM_videoFilters/TIsophote/ADM_vidTisophote.cpp:66
 msgid "_Type:"
-msgstr "??(_T):"
+msgstr "?? (_T):"
 
 #: plugins/ADM_videoFilters/Tdeint/DIA_tdeint.cpp:81
 msgid "_MntMode:"
@@ -6417,7 +6352,7 @@
 
 #: plugins/ADM_videoFilters/Tdeint/DIA_tdeint.cpp:82
 msgid "_Link:"
-msgstr "??(_L):"
+msgstr "?? (_L):"
 
 #: plugins/ADM_videoFilters/Tdeint/DIA_tdeint.cpp:83
 msgid "_AP type:"
@@ -6425,44 +6360,44 @@
 
 #: plugins/ADM_videoFilters/Tdeint/DIA_tdeint.cpp:86
 msgid "Use ch_roma to evalute"
-msgstr "???????(_R)"
+msgstr "??????? (_R)"
 
 #: plugins/ADM_videoFilters/Tdeint/DIA_tdeint.cpp:87
 msgid "Try _weave"
-msgstr "????(_W)"
+msgstr "???? (_W)"
 
 #: plugins/ADM_videoFilters/Tdeint/DIA_tdeint.cpp:88
 msgid "_Denoise"
-msgstr "????(_D)"
+msgstr "???? (_D)"
 
 #: plugins/ADM_videoFilters/Tdeint/DIA_tdeint.cpp:89
 #: plugins/ADM_videoFilters/KernelDeint/ADM_vidKernelDeint.cpp:76
 msgid "_Sharp"
-msgstr "??(_S)"
+msgstr "?? (_S)"
 
 #: plugins/ADM_videoFilters/Tdeint/DIA_tdeint.cpp:90
 msgid "_Evalute all frames"
-msgstr "???????(_E)"
+msgstr "??????? (_E)"
 
 #: plugins/ADM_videoFilters/Tdeint/DIA_tdeint.cpp:93
 msgid "Motion threshold, l_uma:"
-msgstr "????????(_U):"
+msgstr "???????? (_U):"
 
 #: plugins/ADM_videoFilters/Tdeint/DIA_tdeint.cpp:94
 msgid "Motion threshold, c_hroma:"
-msgstr "????????(_H):"
+msgstr "???????? (_H):"
 
 #: plugins/ADM_videoFilters/Tdeint/DIA_tdeint.cpp:95
 msgid "Area com_bing threshold:"
-msgstr "?????????(_B):"
+msgstr "????????? (_B):"
 
 #: plugins/ADM_videoFilters/Tdeint/DIA_tdeint.cpp:96
 msgid "Combe_d threshold:"
-msgstr "???????(_D):"
+msgstr "??????? (_D):"
 
 #: plugins/ADM_videoFilters/Tdeint/DIA_tdeint.cpp:97
 msgid "Artefact _protection threshold:"
-msgstr "???????(_P):"
+msgstr "??????? (_P):"
 
 #: plugins/ADM_videoFilters/Tdeint/DIA_tdeint.cpp:98
 msgid "Debug:"
@@ -6486,7 +6421,7 @@
 
 #: plugins/ADM_videoFilters/PalShift/ADM_vidPalShift.cpp:67
 msgid "_Try reverse"
-msgstr "????(_T)"
+msgstr "???? (_T)"
 
 #: plugins/ADM_videoFilters/PalShift/ADM_vidPalShift.cpp:71
 msgid "Pal Field Shift"
@@ -6498,7 +6433,7 @@
 
 #: plugins/ADM_videoFilters/TIsophote/ADM_vidTisophote.cpp:49
 msgid "Port of TIsophote by tritical ."
-msgstr "? TIsophote  ???????? Tritical? "
+msgstr "? TIsophote  ?????? Tritical? "
 
 #: plugins/ADM_videoFilters/TIsophote/ADM_vidTisophote.cpp:60
 msgid "Simple"
@@ -6515,7 +6450,7 @@
 
 #: plugins/ADM_videoFilters/TIsophote/ADM_vidTisophote.cpp:67
 msgid "_Iterations:"
-msgstr "??(_I):"
+msgstr "?? (_I):"
 
 #: plugins/ADM_videoFilters/TIsophote/ADM_vidTisophote.cpp:67
 #: plugins/ADM_videoFilters/KernelDeint/ADM_vidKernelDeint.cpp:75
@@ -6524,7 +6459,7 @@
 
 #: plugins/ADM_videoFilters/TIsophote/ADM_vidTisophote.cpp:68
 msgid "_Chroma:"
-msgstr "??(_C):"
+msgstr "?? (_C):"
 
 #: plugins/ADM_videoFilters/TIsophote/ADM_vidTisophote.cpp:68
 msgid "Process chroma."
@@ -6532,7 +6467,7 @@
 
 #: plugins/ADM_videoFilters/TIsophote/ADM_vidTisophote.cpp:69
 msgid "_Step:"
-msgstr "??(_S):"
+msgstr "?? (_S):"
 
 #: plugins/ADM_videoFilters/TIsophote/ADM_vidTisophote.cpp:69
 msgid "Step."
@@ -6570,11 +6505,11 @@
 
 #: plugins/ADM_videoFilters/DgBob/ADM_vidDGbob.cpp:81
 msgid "Double nb of frames (slow motion)"
-msgstr "???????(???)"
+msgstr "??????? (???)"
 
 #: plugins/ADM_videoFilters/DgBob/ADM_vidDGbob.cpp:87
 msgid "_Extra"
-msgstr "???(_E)"
+msgstr "?? (_E)"
 
 #: plugins/ADM_videoFilters/DgBob/ADM_vidDGbob.cpp:87
 msgid "Extra check, avoid using it"
@@ -6600,7 +6535,7 @@
 #: plugins/ADM_videoFilters/BlendRemover/ADM_vidBlendRemoval.cpp:71
 #: plugins/ADM_videoFilters/BlendRemover/ADM_vidHardIvtcRemoval.cpp:81
 msgid "_Noise:"
-msgstr "??(_N):"
+msgstr "?? (_N):"
 
 #: plugins/ADM_videoFilters/BlendRemover/ADM_vidBlendRemoval.cpp:71
 #: plugins/ADM_videoFilters/BlendRemover/ADM_vidHardIvtcRemoval.cpp:81
@@ -6609,7 +6544,7 @@
 
 #: plugins/ADM_videoFilters/BlendRemover/ADM_vidBlendRemoval.cpp:72
 msgid "I_dentical:"
-msgstr "??(_D):"
+msgstr "?? (_D):"
 
 #: plugins/ADM_videoFilters/BlendRemover/ADM_vidBlendRemoval.cpp:72
 #: plugins/ADM_videoFilters/BlendRemover/ADM_vidHardIvtcRemoval.cpp:82
@@ -6619,7 +6554,7 @@
 #: plugins/ADM_videoFilters/BlendRemover/ADM_vidBlendRemoval.cpp:73
 #: plugins/ADM_videoFilters/BlendRemover/ADM_vidHardIvtcRemoval.cpp:83
 msgid "_Show metrics"
-msgstr "????(_S)"
+msgstr "???? (_S)"
 
 #: plugins/ADM_videoFilters/BlendRemover/ADM_vidBlendRemoval.cpp:73
 #: plugins/ADM_videoFilters/BlendRemover/ADM_vidHardIvtcRemoval.cpp:83
@@ -6636,7 +6571,7 @@
 
 #: plugins/ADM_videoFilters/BlendRemover/ADM_vidHardIvtcRemoval.cpp:82
 msgid "_Identical:"
-msgstr "??(_I):"
+msgstr "?? (_I):"
 
 #: plugins/ADM_videoFilters/BlendRemover/ADM_vidHardIvtcRemoval.cpp:87
 msgid "Hard IVTC Removal"
@@ -6665,11 +6600,11 @@
 
 #: plugins/ADM_videoFilters/Animated/DIA_animated.cpp:39
 msgid "Vignette _Width:"
-msgstr "????(_W):"
+msgstr "???? (_W):"
 
 #: plugins/ADM_videoFilters/Animated/DIA_animated.cpp:40
 msgid "Vignette _Height:"
-msgstr "????(_H):"
+msgstr "???? (_H):"
 
 #: plugins/ADM_videoFilters/Animated/DIA_animated.cpp:43
 msgid "Vignette frame number"
@@ -6685,11 +6620,11 @@
 
 #: plugins/ADM_videoFilters/KernelDeint/ADM_vidKernelDeint.cpp:76
 msgid "_Sharper engine:"
-msgstr "?????(_S):"
+msgstr "????? (_S):"
 
 #: plugins/ADM_videoFilters/KernelDeint/ADM_vidKernelDeint.cpp:77
 msgid "T_woway"
-msgstr "??(_W)"
+msgstr "?? (_W)"
 
 #: plugins/ADM_videoFilters/KernelDeint/ADM_vidKernelDeint.cpp:77
 msgid "Extrapolate better (better not to use it)"
@@ -6697,11 +6632,11 @@
 
 #: plugins/ADM_videoFilters/KernelDeint/ADM_vidKernelDeint.cpp:78
 msgid "_Map"
-msgstr "??(_M)"
+msgstr "?? (_M)"
 
 #: plugins/ADM_videoFilters/KernelDeint/ADM_vidKernelDeint.cpp:78
 msgid "Show interlaced areas (for test!)"
-msgstr "???????(????)"
+msgstr "??????? (????)"
 
 #: plugins/ADM_videoFilters/Soften/ADM_vidSoften.cpp:55
 #: plugins/ADM_videoFilters/Soften/ADM_vidSoften.cpp:75
@@ -6714,15 +6649,15 @@
 
 #: plugins/ADM_videoFilters/Soften/ADM_vidSoften.cpp:69
 msgid "_Luma threshold:"
-msgstr "?????(_L):"
+msgstr "????? (_L):"
 
 #: plugins/ADM_videoFilters/Soften/ADM_vidSoften.cpp:70
 msgid "C_hroma threshold:"
-msgstr "?????(_H):"
+msgstr "????? (_H):"
 
 #: plugins/ADM_videoFilters/Soften/ADM_vidSoften.cpp:71
 msgid "_Radius:"
-msgstr "??(_R):"
+msgstr "?? (_R):"
 
 #: plugins/ADM_videoFilters/Mosaic/ADM_vidMosaic.cpp:64
 msgid "mosaic"
@@ -6734,19 +6669,19 @@
 
 #: plugins/ADM_videoFilters/Mosaic/ADM_vidMosaic.cpp:76
 msgid "_Horizontal stacking:"
-msgstr "????(_H):"
+msgstr "???? (_H):"
 
 #: plugins/ADM_videoFilters/Mosaic/ADM_vidMosaic.cpp:77
 msgid "_Vertical stacking:"
-msgstr "????(_V):"
+msgstr "???? (_V):"
 
 #: plugins/ADM_videoFilters/Mosaic/ADM_vidMosaic.cpp:78
 msgid "_Shrink factor:"
-msgstr "????(_S):"
+msgstr "???? (_S):"
 
 #: plugins/ADM_videoFilters/Mosaic/ADM_vidMosaic.cpp:79
 msgid "Show _frame"
-msgstr "????(_F)"
+msgstr "???? (_F)"
 
 #: plugins/ADM_videoFilters/Mosaic/ADM_vidMosaic.cpp:84
 msgid "Mosaic"
@@ -6778,7 +6713,7 @@
 #: plugins/ADM_videoFilters/LargeMedian/ADM_vidLargeMedian.cpp:293
 #: plugins/ADM_videoFilters/FastConvolution/ADM_vidFastConvolution.cpp:175
 msgid "_Process luma"
-msgstr "????(_P)"
+msgstr "???? (_P)"
 
 #: plugins/ADM_videoFilters/LargeMedian/ADM_vidLargeMedian.cpp:293
 #: plugins/ADM_videoFilters/FastConvolution/ADM_vidFastConvolution.cpp:175
@@ -6788,7 +6723,7 @@
 #: plugins/ADM_videoFilters/LargeMedian/ADM_vidLargeMedian.cpp:294
 #: plugins/ADM_videoFilters/FastConvolution/ADM_vidFastConvolution.cpp:176
 msgid "P_rocess chroma"
-msgstr "????(_R)"
+msgstr "???? (_R)"
 
 #: plugins/ADM_videoFilters/LargeMedian/ADM_vidLargeMedian.cpp:298
 msgid "Large Median 5x5"
@@ -6803,7 +6738,7 @@
 
 #: plugins/ADM_videoFilters/AvisynthResize/ADM_vidResize.cpp:42
 msgid "Picture resizer ported from Avisynth (C Version, slow)."
-msgstr "? Avisynth ????????????(C ????)?"
+msgstr "? Avisynth ?????????? (C ????)?"
 
 #: plugins/ADM_videoFilters/AvisynthResize/ADM_vidResize.cpp:243
 #: plugins/ADM_videoFilters/MplayerResize/ADM_vidMPLResize.cpp:131
@@ -6886,35 +6821,35 @@
 
 #: plugins/ADM_videoFilters/Eq2/gtk/DIA_eq2.cpp:222
 msgid "Brigh_tness:"
-msgstr "??(_T):"
+msgstr "?? (_T):"
 
 #: plugins/ADM_videoFilters/Eq2/gtk/DIA_eq2.cpp:230
 msgid "_Saturation:"
-msgstr "???(_S):"
+msgstr "??? (_S):"
 
 #: plugins/ADM_videoFilters/Eq2/gtk/DIA_eq2.cpp:265
 msgid "_Contrast:"
-msgstr "??(_C):"
+msgstr "?? (_C):"
 
 #: plugins/ADM_videoFilters/Eq2/gtk/DIA_eq2.cpp:291
 msgid "_Initial:"
-msgstr "??(_I):"
+msgstr "?? (_I):"
 
 #: plugins/ADM_videoFilters/Eq2/gtk/DIA_eq2.cpp:317
 msgid "_Red:"
-msgstr "?(_R):"
+msgstr "? (_R):"
 
 #: plugins/ADM_videoFilters/Eq2/gtk/DIA_eq2.cpp:334
 msgid "_Green:"
-msgstr "?(_G):"
+msgstr "? (_G):"
 
 #: plugins/ADM_videoFilters/Eq2/gtk/DIA_eq2.cpp:342
 msgid "_Blue:"
-msgstr "?(_B):"
+msgstr "? (_B):"
 
 #: plugins/ADM_videoFilters/Eq2/gtk/DIA_eq2.cpp:350
 msgid "_Weight:"
-msgstr "??(_W):"
+msgstr "?? (_W):"
 
 #: plugins/ADM_videoFilters/Eq2/gtk/DIA_eq2.cpp:376
 msgid "<b>Gamma</b>"
@@ -6935,7 +6870,7 @@
 
 #: plugins/ADM_videoFilters/McDeint/ADM_vidMcDeint.cpp:78
 msgid "Motion compensation deinterlacer. Ported from MPlayer."
-msgstr "? MPlayer ??????????????"
+msgstr "? MPlayer ????????????"
 
 #: plugins/ADM_videoFilters/McDeint/ADM_vidMcDeint.cpp:91
 msgid "Fast"
@@ -6951,7 +6886,7 @@
 
 #: plugins/ADM_videoFilters/McDeint/ADM_vidMcDeint.cpp:101
 msgid "_Field dominance:"
-msgstr "????(_F):"
+msgstr "???? (_F):"
 
 #: plugins/ADM_videoFilters/McDeint/ADM_vidMcDeint.cpp:102
 msgid "_Qp:"
@@ -7074,19 +7009,19 @@
 
 #: plugins/ADM_videoFilters/Ass/ADM_vidASS.cpp:85
 msgid "_Line spacing:"
-msgstr "??(_L):"
+msgstr "?? (_L):"
 
 #: plugins/ADM_videoFilters/Ass/ADM_vidASS.cpp:86
 msgid "_Font scale:"
-msgstr "????(_F):"
+msgstr "???? (_F):"
 
 #: plugins/ADM_videoFilters/Ass/ADM_vidASS.cpp:87
 msgid "_Top margin:"
-msgstr "????(_T):"
+msgstr "???? (_T):"
 
 #: plugins/ADM_videoFilters/Ass/ADM_vidASS.cpp:88
 msgid "Botto_m margin"
-msgstr "????(_M)"
+msgstr "???? (_M)"
 
 #: plugins/ADM_videoFilters/SwapUV/ADM_vidUVSwap.cpp:28
 msgid "Swap U and V"
@@ -7148,17 +7083,17 @@
 #: plugins/ADM_videoFilters/MplayerDenoise3D/ADM_vidMPLD3D.cpp:60
 #: plugins/ADM_videoFilters/MplayerDenoise3D/ADM_vidMPLD3Dlow.cpp:60
 msgid "_Spatial luma strength:"
-msgstr "???????(_S):"
+msgstr "??????? (_S):"
 
 #: plugins/ADM_videoFilters/MplayerDenoise3D/ADM_vidMPLD3D.cpp:61
 #: plugins/ADM_videoFilters/MplayerDenoise3D/ADM_vidMPLD3Dlow.cpp:61
 msgid "S_patial chroma strength:"
-msgstr "???????(_P):"
+msgstr "??????? (_P):"
 
 #: plugins/ADM_videoFilters/MplayerDenoise3D/ADM_vidMPLD3D.cpp:62
 #: plugins/ADM_videoFilters/MplayerDenoise3D/ADM_vidMPLD3Dlow.cpp:62
 msgid "_Temporal strength:"
-msgstr "????(_T):"
+msgstr "???? (_T):"
 
 #: plugins/ADM_videoFilters/MplayerDenoise3D/ADM_vidMPLD3Dlow.cpp:33
 #: plugins/ADM_videoFilters/MplayerDenoise3D/ADM_vidMPLD3Dlow.cpp:66
@@ -7257,7 +7192,7 @@
 
 #: plugins/ADM_videoFilters/Srt/DIA_srt.cpp:84
 msgid "_Subtitle file:"
-msgstr "???(_S):"
+msgstr "??? (_S):"
 
 #: plugins/ADM_videoFilters/Srt/DIA_srt.cpp:85
 msgid "_Font (TTF):"
@@ -7269,7 +7204,7 @@
 
 #: plugins/ADM_videoFilters/Srt/DIA_srt.cpp:100
 msgid "_Encoding:"
-msgstr "??(_E):"
+msgstr "?? (_E):"
 
 #: plugins/ADM_videoFilters/Srt/DIA_srt.cpp:102
 msgid "S_elect C_olor"
@@ -7277,11 +7212,11 @@
 
 #: plugins/ADM_videoFilters/Srt/DIA_srt.cpp:103
 msgid "Set Size and _Position"
-msgstr "???????(_P)"
+msgstr "??????? (_P)"
 
 #: plugins/ADM_videoFilters/Srt/DIA_srt.cpp:104
 msgid "_Auto split"
-msgstr "????(_A)"
+msgstr "???? (_A)"
 
 #: plugins/ADM_videoFilters/Srt/DIA_srt.cpp:105
 msgid "_Delay (ms):"
@@ -7330,11 +7265,11 @@
 
 #: plugins/ADM_videoFilters/FluxSmooth/ADM_vidFlux.cpp:122
 msgid "_Temporal threshold:"
-msgstr "?????(_T):"
+msgstr "????? (_T):"
 
 #: plugins/ADM_videoFilters/FluxSmooth/ADM_vidFlux.cpp:123
 msgid "_Spatial threshold:"
-msgstr "?????(_S):"
+msgstr "????? (_S):"
 
 #: plugins/ADM_videoFilters/MSmooth/ADM_vidMsmooth.cpp:103
 msgid "MSmooth by Donald Graft"
@@ -7346,11 +7281,11 @@
 
 #: plugins/ADM_videoFilters/MSmooth/ADM_vidMsmooth.cpp:181
 msgid "_High quality"
-msgstr "???(_H)"
+msgstr "??? (_H)"
 
 #: plugins/ADM_videoFilters/MSmooth/ADM_vidMsmooth.cpp:182
 msgid "Show _mask"
-msgstr "????(_M)"
+msgstr "???? (_M)"
 
 #: plugins/ADM_videoFilters/MSmooth/ADM_vidMsmooth.cpp:188
 msgid "MSmooth"
@@ -7362,7 +7297,7 @@
 
 #: plugins/ADM_videoFilters/colorYUV/ADM_vidColorYuv.cpp:72
 msgid "Alter colors (auto white balance etc...). Ported from Avisynth."
-msgstr "???? (??????...)?? Avisynth ?????"
+msgstr "???? (??????...)?? Avisynth ?????"
 
 #: plugins/ADM_videoFilters/colorYUV/gtk/DIA_coloryuv.cpp:138
 msgid "ColorYuv (From avisynth)"
@@ -7478,19 +7413,19 @@
 
 #: plugins/ADM_videoFilters/Fade/ADM_vidFade.cpp:57
 msgid "_Fade type:"
-msgstr "????(_F):"
+msgstr "???? (_F):"
 
 #: plugins/ADM_videoFilters/Fade/ADM_vidFade.cpp:58
 msgid "_Start frame:"
-msgstr "????(_S):"
+msgstr "???? (_S):"
 
 #: plugins/ADM_videoFilters/Fade/ADM_vidFade.cpp:59
 msgid "_End frame:"
-msgstr "????(_E):"
+msgstr "???? (_E):"
 
 #: plugins/ADM_videoFilters/Fade/ADM_vidFade.cpp:60
 msgid "Fade to _black"
-msgstr "???????(_B)"
+msgstr "??????? (_B)"
 
 #: plugins/ADM_videoFilters/Fade/ADM_vidFade.cpp:69
 msgid "Parameter Error"
@@ -7509,19 +7444,19 @@
 msgstr "????"
 
 #: plugins/ADM_audioEncoders/vorbis/audioencoder_vorbis.cpp:318
-#: plugins/ADM_audioEncoders/lavcodec/audioencoder_lavcodec.cpp:226
+#: plugins/ADM_audioEncoders/lavcodec/audioencoder_lavcodec.cpp:225
 #: plugins/ADM_audioEncoders/twolame/audioencoder_twolame.cpp:226
 #: plugins/ADM_audioEncoders/aften/audioencoder_aften.cpp:218
 #: plugins/ADM_audioEncoders/lame/audioencoder_lame.cpp:315
 #: plugins/ADM_audioEncoders/faac/audioencoder_faac.cpp:268
 msgid "_Bitrate:"
-msgstr "???(_B):"
+msgstr "??? (_B):"
 
 #: plugins/ADM_audioEncoders/vorbis/audioencoder_vorbis.cpp:327
 msgid "Vorbis Configuration"
 msgstr "Vorbis ??"
 
-#: plugins/ADM_audioEncoders/lavcodec/audioencoder_lavcodec.cpp:232
+#: plugins/ADM_audioEncoders/lavcodec/audioencoder_lavcodec.cpp:231
 #: plugins/ADM_audioEncoders/aften/audioencoder_aften.cpp:224
 #: plugins/ADM_audioEncoders/faac/audioencoder_faac.cpp:274
 msgid "Aften Configuration"
@@ -7555,69 +7490,69 @@
 
 #: plugins/ADM_audioEncoders/lame/audioencoder_lame.cpp:299
 msgid "Bit_rate mode:"
-msgstr "?????(_R):"
+msgstr "????? (_R):"
 
 #: plugins/ADM_audioEncoders/lame/audioencoder_lame.cpp:319
 msgid "_Disable reservoir"
-msgstr "?????(_D)"
+msgstr "????? (_D)"
 
 #: plugins/ADM_audioEncoders/lame/audioencoder_lame.cpp:323
 msgid "LAME Configuration"
 msgstr "LAME ??"
 
-#: plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidConfigDialog.cpp:113
-#: plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp:188
+#: plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidConfigDialog.cpp:112
+#: plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp:192
 msgid "<default>"
 msgstr "<??>"
 
-#: plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidConfigDialog.cpp:114
-#: plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp:189
+#: plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidConfigDialog.cpp:113
+#: plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp:193
 msgid "<custom>"
 msgstr "<??>"
 
-#: plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidConfigDialog.cpp:222
-#: plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp:327
+#: plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidConfigDialog.cpp:211
+#: plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp:321
 msgid "Save As"
 msgstr "??"
 
-#: plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidConfigDialog.cpp:222
+#: plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidConfigDialog.cpp:211
 msgid "Xvid Configuration File (*.xml)"
 msgstr "Xvid ??? (*.xml)"
 
-#: plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidConfigDialog.cpp:253
-#: plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp:358
+#: plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidConfigDialog.cpp:242
+#: plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp:355
 msgid "Are you sure you wish to delete the selected configuration?"
 msgstr "?????????? ?"
 
-#: plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidConfigDialog.cpp:273
-#: plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp:376
+#: plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidConfigDialog.cpp:262
+#: plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp:373
 msgid "Target Bitrate:"
 msgstr "?????:"
 
-#: plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidConfigDialog.cpp:274
-#: plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidConfigDialog.cpp:294
-#: plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp:377
-#: plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp:395
+#: plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidConfigDialog.cpp:263
+#: plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidConfigDialog.cpp:283
+#: plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp:374
+#: plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp:392
 msgid "kbit/s"
 msgstr "kbit/s"
 
-#: plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidConfigDialog.cpp:280
-#: plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp:381
+#: plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidConfigDialog.cpp:269
+#: plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp:378
 msgid "Quantiser:"
 msgstr "???:"
 
-#: plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidConfigDialog.cpp:286
-#: plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp:389
+#: plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidConfigDialog.cpp:275
+#: plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp:386
 msgid "Target Video Size:"
 msgstr "??????:"
 
-#: plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidConfigDialog.cpp:287
-#: plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp:390
+#: plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidConfigDialog.cpp:276
+#: plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp:387
 msgid "MB"
 msgstr "MB"
 
-#: plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidConfigDialog.cpp:293
-#: plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp:394
+#: plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidConfigDialog.cpp:282
+#: plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp:391
 msgid "Average Bitrate:"
 msgstr "?????:"
 
@@ -7646,31 +7581,31 @@
 msgid "Bitrate Factor"
 msgstr "?????"
 
-#: plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp:83
+#: plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp:82
 msgid "Hadamard Exhaustive Search"
 msgstr "????????"
 
-#: plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp:88
+#: plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp:87
 msgid "9 (Best)"
 msgstr "9 (??)"
 
-#: plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp:108
+#: plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp:107
 msgid "Disabled"
 msgstr "???"
 
-#: plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp:109
+#: plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp:108
 msgid "Enabled"
 msgstr "???"
 
-#: plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp:327
+#: plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp:321
 msgid "x264 Configuration File (*.xml)"
 msgstr "x264 ??? (*.xml)"
 
-#: plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp:385
+#: plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp:382
 msgid "Quality:"
 msgstr "??:"
 
-#: plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp:475
+#: plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp:472
 msgid ""
 "Trellis optimisation isn't possible without CABAC coding enabled.  Trellis optimisation will automatically be disabled.\n"
 "\n"
@@ -7680,7 +7615,7 @@
 "\n"
 " ???????"
 
-#: plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp:485
+#: plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp:482
 msgid ""
 "Trellis optimisation requires CABAC coding to be enabled.  CABAC coding will automatically be enabled.\n"
 "\n"
@@ -7690,7 +7625,7 @@
 "\n"
 "???????"
 
-#: plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp:516
+#: plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp:515
 msgid "Are you sure you wish to delete the selected zone?"
 msgstr "??????????? ?"
 
@@ -7710,6 +7645,40 @@
 msgid "Value"
 msgstr "??"
 
+#~ msgid "DivX"
+#~ msgstr "DivX"
+#~ msgid "DV (lavc)"
+#~ msgstr "DV (lavc)"
+#~ msgid "Snow (lavc)"
+#~ msgstr "Snow (lavc)"
+#~ msgid "FF Huffyuv (lavc)"
+#~ msgstr "FF Huffyuv (lavc)"
+#~ msgid "Huffyuv (lavc)"
+#~ msgstr "Huffyuv (lavc)"
+#~ msgid "FFV1 (lavc)"
+#~ msgstr "FFV1 (lavc)"
+#~ msgid "MPEG-4 ASP (Xvid4)"
+#~ msgstr "MPEG-4 ASP (Xvid4)"
+#~ msgid "Xvid4"
+#~ msgstr "Xvid4"
+#~ msgid "Troubles ahead"
+#~ msgstr "???"
+#~ msgid "This a VOP packed AVI."
+#~ msgstr "???????? VOP ? AVI?"
+#~ msgid "Incompatible settings"
+#~ msgstr "?????"
+#~ msgid "At the moment, the DV codec only accepts 720*576 at 25"
+#~ msgstr "???? DV ??????? 720*576 at 25"
+#~ msgid "Lame command"
+#~ msgstr "Lame ??"
+#~ msgid "Enter parameters (i.e. -b 192 -m s ...)"
+#~ msgstr "???? (i.e. -b 192 -m s ...)"
+#~ msgid "Pipe to"
+#~ msgstr "???"
+#~ msgid "Application path/name (/usr/bin/sox...)"
+#~ msgstr "???????/?? (/usr/bin/sox...)"
+#~ msgid "Full parameter line"
+#~ msgstr "?????"
 #~ msgid "Y800 (lavc)"
 #~ msgstr "Y800 (lavc)"
 #~ msgid "MPEG-4 AVC (x264)"



From mean at mail.berlios.de  Sun Jul 26 09:14:08 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sun, 26 Jul 2009 09:14:08 +0200
Subject: [Avidemux-svn-commit] r5155 -
	branches/avidemux_2.5_branch_gruntster/po
Message-ID: <200907260714.n6Q7E8ls016918@sheep.berlios.de>

Author: mean
Date: 2009-07-26 09:14:07 +0200 (Sun, 26 Jul 2009)
New Revision: 5155

Added:
   branches/avidemux_2.5_branch_gruntster/po/qt_zh_TW.ts
Log:
[po] Traditional Chinese update by Dong-Jun Wu

Added: branches/avidemux_2.5_branch_gruntster/po/qt_zh_TW.ts
===================================================================
--- branches/avidemux_2.5_branch_gruntster/po/qt_zh_TW.ts	2009-07-26 07:13:08 UTC (rev 5154)
+++ branches/avidemux_2.5_branch_gruntster/po/qt_zh_TW.ts	2009-07-26 07:14:07 UTC (rev 5155)
@@ -0,0 +1,6027 @@
+<?xml version="1.0" encoding="utf-8"?>
+<!DOCTYPE TS>
+<TS version="2.0" language="zh_TW">
+<context>
+    <name>QWidget</name>
+    <message>
+        <source>*</source>
+        <translation>+</translation>
+    </message>
+</context>
+<context>
+    <name>QShortcut</name>
+    <message>
+        <source>+</source>
+        <translation>+</translation>
+    </message>
+    <message>
+        <source>No</source>
+        <translation>?</translation>
+    </message>
+    <message>
+        <source>Up</source>
+        <translation>??</translation>
+    </message>
+    <message>
+        <source>Alt</source>
+        <translation>Alt</translation>
+    </message>
+    <message>
+        <source>F%1</source>
+        <translation>F%1</translation>
+    </message>
+    <message>
+        <source>Del</source>
+        <translation>Del</translation>
+    </message>
+    <message>
+        <source>End</source>
+        <translation>End</translation>
+    </message>
+    <message>
+        <source>Esc</source>
+        <translation>Esc</translation>
+    </message>
+    <message>
+        <source>Ins</source>
+        <translation>Ins</translation>
+    </message>
+    <message>
+        <source>Tab</source>
+        <translation>Tab</translation>
+    </message>
+    <message>
+        <source>Yes</source>
+        <translation>?</translation>
+    </message>
+    <message>
+        <source>Back</source>
+        <translation>??</translation>
+    </message>
+    <message>
+        <source>Call</source>
+        <translation>??</translation>
+    </message>
+    <message>
+        <source>Ctrl</source>
+        <translation>Ctrl</translation>
+    </message>
+    <message>
+        <source>Down</source>
+        <translation>??</translation>
+    </message>
+    <message>
+        <source>Flip</source>
+        <translation>??</translation>
+    </message>
+    <message>
+        <source>Help</source>
+        <translation>??</translation>
+    </message>
+    <message>
+        <source>Home</source>
+        <translation>Home</translation>
+    </message>
+    <message>
+        <source>Left</source>
+        <translation>??</translation>
+    </message>
+    <message>
+        <source>Menu</source>
+        <translation>??</translation>
+    </message>
+    <message>
+        <source>Meta</source>
+        <translation>Meta</translation>
+    </message>
+    <message>
+        <source>PgUp</source>
+        <translation>PgUp</translation>
+    </message>
+    <message>
+        <source>Stop</source>
+        <translation>??</translation>
+    </message>
+    <message>
+        <source>Enter</source>
+        <translation>Enter</translation>
+    </message>
+    <message>
+        <source>Pause</source>
+        <translation>Pause</translation>
+    </message>
+    <message>
+        <source>Print</source>
+        <translation>Print</translation>
+    </message>
+    <message>
+        <source>Right</source>
+        <translation>??</translation>
+    </message>
+    <message>
+        <source>Shift</source>
+        <translation>Shift</translation>
+    </message>
+    <message>
+        <source>Space</source>
+        <translation>???</translation>
+    </message>
+    <message>
+        <source>Media Record</source>
+        <translation>????</translation>
+    </message>
+    <message>
+        <source>Print Screen</source>
+        <translation>????</translation>
+    </message>
+    <message>
+        <source>Treble Down</source>
+        <translation>Treble Down</translation>
+    </message>
+    <message>
+        <source>Scroll Lock</source>
+        <translation>????</translation>
+    </message>
+    <message>
+        <source>Volume Down</source>
+        <translation>????</translation>
+    </message>
+    <message>
+        <source>Volume Mute</source>
+        <translation>??</translation>
+    </message>
+    <message>
+        <source>Media Previous</source>
+        <translation>?????</translation>
+    </message>
+    <message>
+        <source>Home Page</source>
+        <translation>??</translation>
+    </message>
+    <message>
+        <source>Volume Up</source>
+        <translation>????</translation>
+    </message>
+    <message>
+        <source>Launch (6)</source>
+        <translation>???6?</translation>
+    </message>
+    <message>
+        <source>Launch (7)</source>
+        <translation>???7?</translation>
+    </message>
+    <message>
+        <source>Launch (8)</source>
+        <translation>???8?</translation>
+    </message>
+    <message>
+        <source>Launch (9)</source>
+        <translation>???9?</translation>
+    </message>
+    <message>
+        <source>Launch (2)</source>
+        <translation>???2?</translation>
+    </message>
+    <message>
+        <source>Launch (3)</source>
+        <translation>???3?</translation>
+    </message>
+    <message>
+        <source>Launch (4)</source>
+        <translation>???4?</translation>
+    </message>
+    <message>
+        <source>Launch (5)</source>
+        <translation>???5?</translation>
+    </message>
+    <message>
+        <source>Launch (0)</source>
+        <translation>???0?</translation>
+    </message>
+    <message>
+        <source>Launch (1)</source>
+        <translation>???1?</translation>
+    </message>
+    <message>
+        <source>Launch (F)</source>
+        <translation>???F?</translation>
+    </message>
+    <message>
+        <source>Launch (B)</source>
+        <translation>???B?</translation>
+    </message>
+    <message>
+        <source>Launch (C)</source>
+        <translation>???C?</translation>
+    </message>
+    <message>
+        <source>Launch (D)</source>
+        <translation>???D?</translation>
+    </message>
+    <message>
+        <source>Launch (E)</source>
+        <translation>???E?</translation>
+    </message>
+    <message>
+        <source>Launch (A)</source>
+        <translation>???A?</translation>
+    </message>
+    <message>
+        <source>Delete</source>
+        <translation>??</translation>
+    </message>
+    <message>
+        <source>Escape</source>
+        <translation>Escape</translation>
+    </message>
+    <message>
+        <source>Hangup</source>
+        <translation>??</translation>
+    </message>
+    <message>
+        <source>Insert</source>
+        <translation>??</translation>
+    </message>
+    <message>
+        <source>Bass Boost</source>
+        <translation>???</translation>
+    </message>
+    <message>
+        <source>PgDown</source>
+        <translation>PgDown</translation>
+    </message>
+    <message>
+        <source>Return</source>
+        <translation>Return</translation>
+    </message>
+    <message>
+        <source>Search</source>
+        <translation>??</translation>
+    </message>
+    <message>
+        <source>Select</source>
+        <translation>??</translation>
+    </message>
+    <message>
+        <source>SysReq</source>
+        <translation>SysReq</translation>
+    </message>
+    <message>
+        <source>NumLock</source>
+        <translation>????</translation>
+    </message>
+    <message>
+        <source>ScrollLock</source>
+        <translation>????</translation>
+    </message>
+    <message>
+        <source>Context1</source>
+        <translation>??1</translation>
+    </message>
+    <message>
+        <source>Context2</source>
+        <translation>??2</translation>
+    </message>
+    <message>
+        <source>Context3</source>
+        <translation>??3</translation>
+    </message>
+    <message>
+        <source>Context4</source>
+        <translation>??4</translation>
+    </message>
+    <message>
+        <source>Page Up</source>
+        <translation>????</translation>
+    </message>
+    <message>
+        <source>Open URL</source>
+        <translation>????</translation>
+    </message>
+    <message>
+        <source>Caps Lock</source>
+        <translation>????</translation>
+    </message>
+    <message>
+        <source>System Request</source>
+        <translation>???? SysRq</translation>
+    </message>
+    <message>
+        <source>CapsLock</source>
+        <translation>????</translation>
+    </message>
+    <message>
+        <source>Backtab</source>
+        <translation>Backtab</translation>
+    </message>
+    <message>
+        <source>Bass Up</source>
+        <translation>Bass Up</translation>
+    </message>
+    <message>
+        <source>Refresh</source>
+        <translation>??</translation>
+    </message>
+    <message>
+        <source>Launch Mail</source>
+        <translation>??????</translation>
+    </message>
+    <message>
+        <source>Backspace</source>
+        <translation>Backspace</translation>
+    </message>
+    <message>
+        <source>Bass Down</source>
+        <translation>Bass Down</translation>
+    </message>
+    <message>
+        <source>Standby</source>
+        <translation>??</translation>
+    </message>
+    <message>
+        <source>Treble Up</source>
+        <translation>Treble Up</translation>
+    </message>
+    <message>
+        <source>Num Lock</source>
+        <translation>????</translation>
+    </message>
+    <message>
+        <source>Number Lock</source>
+        <translation>????</translation>
+    </message>
+    <message>
+        <source>Favorites</source>
+        <translation>????</translation>
+    </message>
+    <message>
+        <source>Forward</source>
+        <translation>??</translation>
+    </message>
+    <message>
+        <source>Page Down</source>
+        <translation>????</translation>
+    </message>
+    <message>
+        <source>Media Play</source>
+        <translation>????</translation>
+    </message>
+    <message>
+        <source>Media Stop</source>
+        <translation>????</translation>
+    </message>
+    <message>
+        <source>Media Next</source>
+        <translation>?????</translation>
+    </message>
+    <message>
+        <source>Launch Media</source>
+        <translation>??????</translation>
+    </message>
+</context>
+<context>
+    <name>QPrintDialog</name>
+    <message>
+        <source>A0</source>
+        <translation>A0</translation>
+    </message>
+    <message>
+        <source>A1</source>
+        <translation>A1</translation>
+    </message>
+    <message>
+        <source>A2</source>
+        <translation>A2</translation>
+    </message>
+    <message>
+        <source>A3</source>
+        <translation>A3</translation>
+    </message>
+    <message>
+        <source>A4</source>
+        <translation>A4</translation>
+    </message>
+    <message>
+        <source>A5</source>
+        <translation>A5</translation>
+    </message>
+    <message>
+        <source>A6</source>
+        <translation>A6</translation>
+    </message>
+    <message>
+        <source>A7</source>
+        <translation>A7</translation>
+    </message>
+    <message>
+        <source>A8</source>
+        <translation>A8</translation>
+    </message>
+    <message>
+        <source>A9</source>
+        <translation>A9</translation>
+    </message>
+    <message>
+        <source>B0</source>
+        <translation>B0</translation>
+    </message>
+    <message>
+        <source>B1</source>
+        <translation>B1</translation>
+    </message>
+    <message>
+        <source>B2</source>
+        <translation>B2</translation>
+    </message>
+    <message>
+        <source>B3</source>
+        <translation>B3</translation>
+    </message>
+    <message>
+        <source>B4</source>
+        <translation>B4</translation>
+    </message>
+    <message>
+        <source>B5</source>
+        <translation>B5</translation>
+    </message>
+    <message>
+        <source>B6</source>
+        <translation>B6</translation>
+    </message>
+    <message>
+        <source>B7</source>
+        <translation>B7</translation>
+    </message>
+    <message>
+        <source>B8</source>
+        <translation>B8</translation>
+    </message>
+    <message>
+        <source>B9</source>
+        <translation>B9</translation>
+    </message>
+    <message>
+        <source>OK</source>
+        <translation>??</translation>
+    </message>
+    <message>
+        <source>B10</source>
+        <translation>B10</translation>
+    </message>
+    <message>
+        <source>C5E</source>
+        <translation>C5E</translation>
+    </message>
+    <message>
+        <source>DLE</source>
+        <translation>DLE</translation>
+    </message>
+    <message>
+        <source>A6 (105 x 148 mm)</source>
+        <translation>A6 (105 x 148 mm)</translation>
+    </message>
+    <message>
+        <source>Legal (8.5 x 14 inches, 216 x 356 mm)</source>
+        <translation>Legal (8.5 x 14 ??, 216 x 356 mm)</translation>
+    </message>
+    <message>
+        <source>Folio</source>
+        <translation>Folio</translation>
+    </message>
+    <message>
+        <source>Legal</source>
+        <translation>Legal</translation>
+    </message>
+    <message>
+        <source>Print all</source>
+        <translation>????</translation>
+    </message>
+    <message>
+        <source>Print</source>
+        <translation>??</translation>
+    </message>
+    <message>
+        <source>&amp;Options &lt;&lt;</source>
+        <translation>?? (&amp;O) &lt;&lt;</translation>
+    </message>
+    <message>
+        <source>&amp;Options &gt;&gt;</source>
+        <translation>?? (&amp;O) &gt;&gt;</translation>
+    </message>
+    <message>
+        <source>B6 (125 x 176 mm)</source>
+        <translation>B6 (125 x 176 mm)</translation>
+    </message>
+    <message>
+        <source>B8 (62 x 88 mm)</source>
+        <translation>B8 (62 x 88 mm)</translation>
+    </message>
+    <message>
+        <source>A8 (52 x 74 mm)</source>
+        <translation>A8 (52 x 74 mm)</translation>
+    </message>
+    <message>
+        <source>B9 (44 x 62 mm)</source>
+        <translation>B9 (44 x 62 mm)</translation>
+    </message>
+    <message>
+        <source>A9 (37 x 52 mm)</source>
+        <translation>A9 (37 x 52 mm)</translation>
+    </message>
+    <message>
+        <source>B0 (1000 x 1414 mm)</source>
+        <translation>B0 (1000 x 1414 mm)</translation>
+    </message>
+    <message>
+        <source>A5 (148 x 210 mm)</source>
+        <translation>A5 (148 x 210 mm)</translation>
+    </message>
+    <message>
+        <source>Tabloid (279 x 432 mm)</source>
+        <translation>Tabloid (279 x 432 mm)</translation>
+    </message>
+    <message>
+        <source>B10 (31 x 44 mm)</source>
+        <translation>B10 (31 x 44 mm)</translation>
+    </message>
+    <message>
+        <source>B2 (500 x 707 mm)</source>
+        <translation>B2 (500 x 707 mm)</translation>
+    </message>
+    <message>
+        <source>&amp;Print</source>
+        <translation>??(&amp;P)</translation>
+    </message>
+    <message>
+        <source>A3 (297 x 420 mm)</source>
+        <translation>A3 (297 x 420 mm)</translation>
+    </message>
+    <message>
+        <source>Print selection</source>
+        <translation>?????</translation>
+    </message>
+    <message>
+        <source>Print to File (Postscript)</source>
+        <translation>??????Postscript?</translation>
+    </message>
+    <message>
+        <source>B4 (250 x 353 mm)</source>
+        <translation>B4 (250 x 353 mm)</translation>
+    </message>
+    <message>
+        <source>%1 already exists.
+Do you want to overwrite it?</source>
+        <translation>%1 ????
+???????</translation>
+    </message>
+    <message>
+        <source>A1 (594 x 841 mm)</source>
+        <translation>A1 (594 x 841 mm)</translation>
+    </message>
+    <message>
+        <source>Custom</source>
+        <translation>??</translation>
+    </message>
+    <message>
+        <source>B1 (707 x 1000 mm)</source>
+        <translation>B1 (707 x 1000 mm)</translation>
+    </message>
+    <message>
+        <source>Folio (210 x 330 mm)</source>
+        <translation>?? (210 x 330 mm)</translation>
+    </message>
+    <message>
+        <source>Ledger</source>
+        <translation>Ledger</translation>
+    </message>
+    <message>
+        <source>Letter</source>
+        <translation>Letter</translation>
+    </message>
+    <message>
+        <source>DLE (110 x 220 mm)</source>
+        <translation>DLE (110 x 220 mm)</translation>
+    </message>
+    <message>
+        <source>C5E (163 x 229 mm)</source>
+        <translation>C5E (163 x 229 mm)</translation>
+    </message>
+    <message>
+        <source>B5 (176 x 250 mm, 6.93 x 9.84 inches)</source>
+        <translation>B5 (176 x 250 mm, 6.93 x 9.84 ??)</translation>
+    </message>
+    <message>
+        <source>Print range</source>
+        <translation>????</translation>
+    </message>
+    <message>
+        <source>File exists</source>
+        <translation>?????</translation>
+    </message>
+    <message>
+        <source>Write %1 file</source>
+        <translation>?? %1 ??</translation>
+    </message>
+    <message>
+        <source>A0 (841 x 1189 mm)</source>
+        <translation>A0 (841 x 1189 mm)</translation>
+    </message>
+    <message>
+        <source>Local file</source>
+        <translation>?????</translation>
+    </message>
+    <message>
+        <source>locally connected</source>
+        <translation>????</translation>
+    </message>
+    <message>
+        <source>Ledger (432 x 279 mm)</source>
+        <translation>Ledger (432 x 279 mm)</translation>
+    </message>
+    <message>
+        <source>Aliases: %1</source>
+        <translation>???%1</translation>
+    </message>
+    <message>
+        <source>Print to File (PDF)</source>
+        <translation>??????PDF?</translation>
+    </message>
+    <message>
+        <source>Print To File ...</source>
+        <translation>?????...</translation>
+    </message>
+    <message>
+        <source>US Common #10 Envelope (105 x 241 mm)</source>
+        <translation>US ?? 10 ??? (105x241 mm)</translation>
+    </message>
+    <message>
+        <source>Tabloid</source>
+        <translation>Tabloid</translation>
+    </message>
+    <message>
+        <source>A4 (210 x 297 mm, 8.26 x 11.7 inches)</source>
+        <translation>A4 (210 x 297 mm, 8.26 x 11.7 ??)</translation>
+    </message>
+    <message>
+        <source>Executive</source>
+        <translation>Executive</translation>
+    </message>
+    <message>
+        <source>unknown</source>
+        <translation>??</translation>
+    </message>
+    <message>
+        <source>&lt;qt&gt;Do you want to overwrite it?&lt;/qt&gt;</source>
+        <translation>&lt;qt&gt;???????&lt;/qt&gt;</translation>
+    </message>
+    <message>
+        <source>Executive (7.5 x 10 inches, 191 x 254 mm)</source>
+        <translation>Executive (7.5 x 10 ??, 191 x 254 mm)</translation>
+    </message>
+    <message>
+        <source>Letter (8.5 x 11 inches, 216 x 279 mm)</source>
+        <translation>Letter (8.5 x 11 ??, 216 x 279 mm)</translation>
+    </message>
+    <message>
+        <source>The &apos;From&apos; value cannot be greater than the &apos;To&apos; value.</source>
+        <translation>?????????????</translation>
+    </message>
+    <message>
+        <source>US Common #10 Envelope</source>
+        <translation>US Common #10 Envelope</translation>
+    </message>
+    <message>
+        <source>%1 is a directory.
+Please choose a different file name.</source>
+        <translation>%1 ??????
+????????</translation>
+    </message>
+    <message>
+        <source>File %1 is not writable.
+Please choose a different file name.</source>
+        <translation>?? %1 ?????
+????????</translation>
+    </message>
+    <message>
+        <source>B3 (353 x 500 mm)</source>
+        <translation>B3 (353 x 500 mm)</translation>
+    </message>
+    <message>
+        <source>A7 (74 x 105 mm)</source>
+        <translation>A7 (74 x 105 mm)</translation>
+    </message>
+    <message>
+        <source>A2 (420 x 594 mm)</source>
+        <translation>A2 (420 x 594 mm)</translation>
+    </message>
+    <message>
+        <source>B7 (88 x 125 mm)</source>
+        <translation>B7 (88 x 125 mm)</translation>
+    </message>
+</context>
+<context>
+    <name>QDateTimeEdit</name>
+    <message>
+        <source>AM</source>
+        <translation>AM</translation>
+    </message>
+    <message>
+        <source>PM</source>
+        <translation>PM</translation>
+    </message>
+    <message>
+        <source>am</source>
+        <translation>am</translation>
+    </message>
+    <message>
+        <source>pm</source>
+        <translation>pm</translation>
+    </message>
+</context>
+<context>
+    <name>Q3TabDialog</name>
+    <message>
+        <source>OK</source>
+        <translation>??</translation>
+    </message>
+    <message>
+        <source>Help</source>
+        <translation>??</translation>
+    </message>
+    <message>
+        <source>Apply</source>
+        <translation>??</translation>
+    </message>
+    <message>
+        <source>Cancel</source>
+        <translation>??</translation>
+    </message>
+    <message>
+        <source>Defaults</source>
+        <translation>??</translation>
+    </message>
+</context>
+<context>
+    <name>QAxSelect</name>
+    <message>
+        <source>OK</source>
+        <translation>??</translation>
+    </message>
+    <message>
+        <source>COM &amp;Object:</source>
+        <translation>COM ??(&amp;O):</translation>
+    </message>
+    <message>
+        <source>&amp;Cancel</source>
+        <translation>??(&amp;C)</translation>
+    </message>
+    <message>
+        <source>Select ActiveX Control</source>
+        <translation>?? ActiveX ??</translation>
+    </message>
+</context>
+<context>
+    <name>QDialogButtonBox</name>
+    <message>
+        <source>OK</source>
+        <translation>??</translation>
+    </message>
+    <message>
+        <source>&amp;OK</source>
+        <translation>??(&amp;O)</translation>
+    </message>
+    <message>
+        <source>&amp;No</source>
+        <translation>?(&amp;N)</translation>
+    </message>
+    <message>
+        <source>&amp;Yes</source>
+        <translation>?(&amp;Y)</translation>
+    </message>
+    <message>
+        <source>Help</source>
+        <translation>??</translation>
+    </message>
+    <message>
+        <source>Open</source>
+        <translation>??</translation>
+    </message>
+    <message>
+        <source>Save</source>
+        <translation>??</translation>
+    </message>
+    <message>
+        <source>&amp;Save</source>
+        <translation>??(&amp;S)</translation>
+    </message>
+    <message>
+        <source>Abort</source>
+        <translation>??</translation>
+    </message>
+    <message>
+        <source>Apply</source>
+        <translation>??</translation>
+    </message>
+    <message>
+        <source>Close</source>
+        <translation>??</translation>
+    </message>
+    <message>
+        <source>Reset</source>
+        <translation>??</translation>
+    </message>
+    <message>
+        <source>Retry</source>
+        <translation>??</translation>
+    </message>
+    <message>
+        <source>Restore Defaults</source>
+        <translation>?????</translation>
+    </message>
+    <message>
+        <source>&amp;Close</source>
+        <translation>??(&amp;C)</translation>
+    </message>
+    <message>
+        <source>Cancel</source>
+        <translation>??</translation>
+    </message>
+    <message>
+        <source>Ignore</source>
+        <translation>??</translation>
+    </message>
+    <message>
+        <source>Close without Saving</source>
+        <translation>??????</translation>
+    </message>
+    <message>
+        <source>N&amp;o to All</source>
+        <translation>?????(&amp;O)</translation>
+    </message>
+    <message>
+        <source>Save All</source>
+        <translation>????</translation>
+    </message>
+    <message>
+        <source>&amp;Cancel</source>
+        <translation>??(&amp;C)</translation>
+    </message>
+    <message>
+        <source>Discard</source>
+        <translation>??</translation>
+    </message>
+    <message>
+        <source>Yes to &amp;All</source>
+        <translation>?????(&amp;A)</translation>
+    </message>
+    <message>
+        <source>Don&apos;t Save</source>
+        <translation>????</translation>
+    </message>
+</context>
+<context>
+    <name>QMessageBox</name>
+    <message>
+        <source>OK</source>
+        <translation>??</translation>
+    </message>
+    <message>
+        <source>Help</source>
+        <translation>??</translation>
+    </message>
+    <message>
+        <source>Show Details...</source>
+        <translation>????...</translation>
+    </message>
+    <message>
+        <source>&lt;p&gt;This program uses Qt Open Source Edition version %1.&lt;/p&gt;&lt;p&gt;Qt Open Source Edition is intended for the development of Open Source applications. You need a commercial Qt license for development of proprietary (closed source) applications.&lt;/p&gt;&lt;p&gt;Please see &lt;a href=&quot;http://qtsoftware.com/company/model/&quot;&gt;qtsoftware.com/company/model/&lt;/a&gt; for an overview of Qt licensing.&lt;/p&gt;</source>
+        <translation>&lt;p&gt;??????? Qt ?????? %1?&lt;/p&gt;&lt;p&gt;Qt ??????????????????????????????????????????????? Qt ??????&lt;/p&gt;&lt;p&gt;Qt ???????? &lt;a href=&quot;http://qtsoftware.com/company/model/&quot;&gt;qtsoftware.com/company/model/&lt;/a&gt;?&lt;/p&gt;</translation>
+    </message>
+    <message>
+        <source>About Qt</source>
+        <translation>?? Qt</translation>
+    </message>
+    <message>
+        <source>Hide Details...</source>
+        <translation>????...</translation>
+    </message>
+    <message>
+        <source>&lt;h3&gt;About Qt&lt;/h3&gt;%1&lt;p&gt;Qt is a C++ toolkit for cross-platform application development.&lt;/p&gt;&lt;p&gt;Qt provides single-source portability across MS&amp;nbsp;Windows, Mac&amp;nbsp;OS&amp;nbsp;X, Linux, and all major commercial Unix variants. Qt is also available for embedded devices as Qt for Embedded Linux and Qt for Windows CE.&lt;/p&gt;&lt;p&gt;Qt is a Nokia product. See &lt;a href=&quot;http://qtsoftware.com/qt/&quot;&gt;qtsoftware.com/qt/&lt;/a&gt; for more information.&lt;/p&gt;</source>
+        <translation>&lt;h3&gt;?? Qt&lt;/h3&gt;%1&lt;p&gt;Qt ??????? C++ ?????&lt;/p&gt;&lt;p&gt;Qt ??????????????????????? MS&amp;nbsp;Windows?Mac&amp;nbsp;OS&amp;nbsp;X?Linux ??????? Unix ??????Qt ??????? Linux ? Windows CE ????&lt;/p&gt;&lt;p&gt;Qt ? Nokia ????????? &lt;a href=&quot;http://qtsoftware.com/qt/&quot;&gt;qtsoftware.com/qt/&lt;/a&gt;?&lt;/p&gt;</translation>
+    </message>
+    <message>
+        <source>&lt;p&gt;This program uses Qt version %1.&lt;/p&gt;</source>
+        <translation>&lt;p&gt; ?????? Qt ?? %1&lt;/p&gt;</translation>
+    </message>
+</context>
+<context>
+    <name>QSql</name>
+    <message>
+        <source>No</source>
+        <translation>?</translation>
+    </message>
+    <message>
+        <source>Yes</source>
+        <translation>?</translation>
+    </message>
+    <message>
+        <source>Cancel</source>
+        <translation>??</translation>
+    </message>
+    <message>
+        <source>Delete</source>
+        <translation>??</translation>
+    </message>
+    <message>
+        <source>Insert</source>
+        <translation>??</translation>
+    </message>
+    <message>
+        <source>Update</source>
+        <translation>??</translation>
+    </message>
+    <message>
+        <source>Delete this record?</source>
+        <translation>?????????</translation>
+    </message>
+    <message>
+        <source>Save edits?</source>
+        <translation>???????????</translation>
+    </message>
+    <message>
+        <source>Confirm</source>
+        <translation>??</translation>
+    </message>
+    <message>
+        <source>Cancel your edits?</source>
+        <translation>???????</translation>
+    </message>
+</context>
+<context>
+    <name>QPrintSettingsOutput</name>
+    <message>
+        <source>to</source>
+        <translation>?</translation>
+    </message>
+    <message>
+        <source>Form</source>
+        <translation>??</translation>
+    </message>
+    <message>
+        <source>None</source>
+        <translation>?</translation>
+    </message>
+    <message>
+        <source>Color</source>
+        <translation>??</translation>
+    </message>
+    <message>
+        <source>Print all</source>
+        <translation>????</translation>
+    </message>
+    <message>
+        <source>Selection</source>
+        <translation>???</translation>
+    </message>
+    <message>
+        <source>Long side</source>
+        <translation>??</translation>
+    </message>
+    <message>
+        <source>Copies</source>
+        <translation>??</translation>
+    </message>
+    <message>
+        <source>Print range</source>
+        <translation>????</translation>
+    </message>
+    <message>
+        <source>Color Mode</source>
+        <translation>????</translation>
+    </message>
+    <message>
+        <source>Options</source>
+        <translation>??</translation>
+    </message>
+    <message>
+        <source>Output Settings</source>
+        <translation>????</translation>
+    </message>
+    <message>
+        <source>Reverse</source>
+        <translation>??</translation>
+    </message>
+    <message>
+        <source>Grayscale</source>
+        <translation>??</translation>
+    </message>
+    <message>
+        <source>Short side</source>
+        <translation>??</translation>
+    </message>
+    <message>
+        <source>Collate</source>
+        <translation>??</translation>
+    </message>
+    <message>
+        <source>Copies:</source>
+        <translation>??:</translation>
+    </message>
+    <message>
+        <source>Pages from</source>
+        <translation>??????</translation>
+    </message>
+    <message>
+        <source>Duplex Printing</source>
+        <translation>????</translation>
+    </message>
+</context>
+<context>
+    <name>QPrintPreviewDialog</name>
+    <message>
+        <source>%1%</source>
+        <translation>%1%</translation>
+    </message>
+    <message>
+        <source>Print Preview</source>
+        <translation>????</translation>
+    </message>
+    <message>
+        <source>Close</source>
+        <translation>??</translation>
+    </message>
+    <message>
+        <source>Print</source>
+        <translation>??</translation>
+    </message>
+    <message>
+        <source>Fit page</source>
+        <translation>????</translation>
+    </message>
+    <message>
+        <source>Zoom in</source>
+        <translation>??</translation>
+    </message>
+    <message>
+        <source>Landscape</source>
+        <translation>??</translation>
+    </message>
+    <message>
+        <source>Zoom out</source>
+        <translation>??</translation>
+    </message>
+    <message>
+        <source>Fit width</source>
+        <translation>????</translation>
+    </message>
+    <message>
+        <source>Portrait</source>
+        <translation>??</translation>
+    </message>
+    <message>
+        <source>Page Setup</source>
+        <translation>????</translation>
+    </message>
+    <message>
+        <source>Page setup</source>
+        <translation>????</translation>
+    </message>
+    <message>
+        <source>Show overview of all pages</source>
+        <translation>????????</translation>
+    </message>
+    <message>
+        <source>First page</source>
+        <translation>???</translation>
+    </message>
+    <message>
+        <source>Last page</source>
+        <translation>????</translation>
+    </message>
+    <message>
+        <source>Show single page</source>
+        <translation>??????</translation>
+    </message>
+    <message>
+        <source>Export to PDF</source>
+        <translation>??? PDF ?</translation>
+    </message>
+    <message>
+        <source>Previous page</source>
+        <translation>???</translation>
+    </message>
+    <message>
+        <source>Next page</source>
+        <translation>???</translation>
+    </message>
+    <message>
+        <source>Show facing pages</source>
+        <translation>????</translation>
+    </message>
+    <message>
+        <source>Export to PostScript</source>
+        <translation>??? PostScript ?</translation>
+    </message>
+</context>
+<context>
+    <name>Q3FileDialog</name>
+    <message>
+        <source>&amp;OK</source>
+        <translation>??(&amp;O)</translation>
+    </message>
+    <message>
+        <source>&amp;No</source>
+        <translation>?(&amp;N)</translation>
+    </message>
+    <message>
+        <source>Dir</source>
+        <translation>??</translation>
+    </message>
+    <message>
+        <source>&amp;Yes</source>
+        <translation>?(&amp;Y)</translation>
+    </message>
+    <message>
+        <source>Back</source>
+        <translation>??</translation>
+    </message>
+    <message>
+        <source>Date</source>
+        <translation>??</translation>
+    </message>
+    <message>
+        <source>File</source>
+        <translation>??</translation>
+    </message>
+    <message>
+        <source>Name</source>
+        <translation>??</translation>
+    </message>
+    <message>
+        <source>Open</source>
+        <translation>??</translation>
+    </message>
+    <message>
+        <source>Size</source>
+        <translation>??</translation>
+    </message>
+    <message>
+        <source>Sort</source>
+        <translation>??</translation>
+    </message>
+    <message>
+        <source>Type</source>
+        <translation>??</translation>
+    </message>
+    <message>
+        <source>&amp;Open</source>
+        <translation>??(&amp;O)</translation>
+    </message>
+    <message>
+        <source>&amp;Save</source>
+        <translation>??(&amp;S)</translation>
+    </message>
+    <message>
+        <source>Error</source>
+        <translation>??</translation>
+    </message>
+    <message>
+        <source>Open </source>
+        <translation>?? </translation>
+    </message>
+    <message>
+        <source>Write: %1</source>
+        <translation>???%1</translation>
+    </message>
+    <message>
+        <source>Sort by &amp;Size</source>
+        <translation>?????(&amp;S)</translation>
+    </message>
+    <message>
+        <source>Sort by &amp;Date</source>
+        <translation>?????(&amp;D)</translation>
+    </message>
+    <message>
+        <source>Sort by &amp;Name</source>
+        <translation>?????(&amp;N)</translation>
+    </message>
+    <message>
+        <source>New Folder 1</source>
+        <translation>???? 1</translation>
+    </message>
+    <message>
+        <source>the directory</source>
+        <translation>???</translation>
+    </message>
+    <message>
+        <source>File &amp;type:</source>
+        <translation>????(&amp;T):</translation>
+    </message>
+    <message>
+        <source>File &amp;name:</source>
+        <translation>??(&amp;N):</translation>
+    </message>
+    <message>
+        <source>Delete %1</source>
+        <translation>?? %1</translation>
+    </message>
+    <message>
+        <source>Cancel</source>
+        <translation>??</translation>
+    </message>
+    <message>
+        <source>R&amp;eload</source>
+        <translation>????(&amp;E)</translation>
+    </message>
+    <message>
+        <source>New Folder</source>
+        <translation>????</translation>
+    </message>
+    <message>
+        <source>&amp;Unsorted</source>
+        <translation>???(&amp;U)</translation>
+    </message>
+    <message>
+        <source>Look &amp;in:</source>
+        <translation>???(&amp;I):</translation>
+    </message>
+    <message>
+        <source>Preview File Contents</source>
+        <translation>??????</translation>
+    </message>
+    <message>
+        <source>New Folder %1</source>
+        <translation>???? %1</translation>
+    </message>
+    <message>
+        <source>Read-write</source>
+        <translation>???</translation>
+    </message>
+    <message>
+        <source>Read-only</source>
+        <translation>??</translation>
+    </message>
+    <message>
+        <source>Copy or Move a File</source>
+        <translation>???????</translation>
+    </message>
+    <message>
+        <source>&lt;qt&gt;Are you sure you wish to delete %1 &quot;%2&quot;?&lt;/qt&gt;</source>
+        <translation>&lt;qt&gt;?????? %1 &quot;%2&quot; ??&lt;/qt&gt;</translation>
+    </message>
+    <message>
+        <source>Find Directory</source>
+        <translation>????</translation>
+    </message>
+    <message>
+        <source>Attributes</source>
+        <translation>??</translation>
+    </message>
+    <message>
+        <source>Show &amp;hidden files</source>
+        <translation>?????(&amp;H)</translation>
+    </message>
+    <message>
+        <source>Save As</source>
+        <translation>????</translation>
+    </message>
+    <message>
+        <source>Inaccessible</source>
+        <translation>????</translation>
+    </message>
+    <message>
+        <source>%1
+File not found.
+Check path and filename.</source>
+        <translation>%1
+??????
+?????????</translation>
+    </message>
+    <message>
+        <source>List View</source>
+        <translation>????</translation>
+    </message>
+    <message>
+        <source>Special</source>
+        <translation>????</translation>
+    </message>
+    <message>
+        <source>Write-only</source>
+        <translation>??</translation>
+    </message>
+    <message>
+        <source>the symlink</source>
+        <translation>?????</translation>
+    </message>
+    <message>
+        <source>&amp;Delete</source>
+        <translation>??(&amp;D)</translation>
+    </message>
+    <message>
+        <source>All Files (*)</source>
+        <translation>???? (*)</translation>
+    </message>
+    <message>
+        <source>Directories</source>
+        <translation>??</translation>
+    </message>
+    <message>
+        <source>Symlink to Special</source>
+        <translation>??????????</translation>
+    </message>
+    <message>
+        <source>Select a Directory</source>
+        <translation>???????</translation>
+    </message>
+    <message>
+        <source>All Files (*.*)</source>
+        <translation>???? (*.*)</translation>
+    </message>
+    <message>
+        <source>Read: %1</source>
+        <translation>???%1</translation>
+    </message>
+    <message>
+        <source>&amp;Rename</source>
+        <translation>????(&amp;R)</translation>
+    </message>
+    <message>
+        <source>Directory:</source>
+        <translation>??:</translation>
+    </message>
+    <message>
+        <source>One directory up</source>
+        <translation>??????</translation>
+    </message>
+    <message>
+        <source>Preview File Info</source>
+        <translation>??????</translation>
+    </message>
+    <message>
+        <source>the file</source>
+        <translation>???</translation>
+    </message>
+    <message>
+        <source>Create New Folder</source>
+        <translation>??????</translation>
+    </message>
+    <message>
+        <source>Symlink to File</source>
+        <translation>????????</translation>
+    </message>
+    <message>
+        <source>Symlink to Directory</source>
+        <translation>????????</translation>
+    </message>
+    <message>
+        <source>Detail View</source>
+        <translation>????</translation>
+    </message>
+</context>
+<context>
+    <name>QErrorMessage</name>
+    <message>
+        <source>&amp;OK</source>
+        <translation>??(&amp;O)</translation>
+    </message>
+    <message>
+        <source>Fatal Error:</source>
+        <translation>????:</translation>
+    </message>
+    <message>
+        <source>&amp;Show this message again</source>
+        <translation>???????(&amp;S)</translation>
+    </message>
+    <message>
+        <source>Debug Message:</source>
+        <translation>????:</translation>
+    </message>
+    <message>
+        <source>Warning:</source>
+        <translation>??:</translation>
+    </message>
+</context>
+<context>
+    <name>QPrintWidget</name>
+    <message>
+        <source>...</source>
+        <translation>...</translation>
+    </message>
+    <message>
+        <source>Form</source>
+        <translation>??</translation>
+    </message>
+    <message>
+        <source>Type:</source>
+        <translation>??:</translation>
+    </message>
+    <message>
+        <source>&amp;Name:</source>
+        <translation>??(&amp;N):</translation>
+    </message>
+    <message>
+        <source>Output &amp;file:</source>
+        <translation>????(&amp;F):</translation>
+    </message>
+    <message>
+        <source>P&amp;roperties</source>
+        <translation>??(&amp;R)</translation>
+    </message>
+    <message>
+        <source>Preview</source>
+        <translation>??</translation>
+    </message>
+    <message>
+        <source>Printer</source>
+        <translation>???</translation>
+    </message>
+    <message>
+        <source>Location:</source>
+        <translation>??:</translation>
+    </message>
+</context>
+<context>
+    <name>QFontDatabase</name>
+    <message>
+        <source>Any</source>
+        <translation>??</translation>
+    </message>
+    <message>
+        <source>Lao</source>
+        <translation>??</translation>
+    </message>
+    <message>
+        <source>Bold</source>
+        <translation>??</translation>
+    </message>
+    <message>
+        <source>Demi</source>
+        <translation>??</translation>
+    </message>
+    <message>
+        <source>Thai</source>
+        <translation>??</translation>
+    </message>
+    <message>
+        <source>Black</source>
+        <translation>??</translation>
+    </message>
+    <message>
+        <source>Greek</source>
+        <translation>??</translation>
+    </message>
+    <message>
+        <source>Khmer</source>
+        <translation>??</translation>
+    </message>
+    <message>
+        <source>Latin</source>
+        <translation>??</translation>
+    </message>
+    <message>
+        <source>Light</source>
+        <translation>??</translation>
+    </message>
+    <message>
+        <source>Ogham</source>
+        <translation>??</translation>
+    </message>
+    <message>
+        <source>Oriya</source>
+        <translation>Oriya</translation>
+    </message>
+    <message>
+        <source>Runic</source>
+        <translation>??</translation>
+    </message>
+    <message>
+        <source>Tamil</source>
+        <translation>???</translation>
+    </message>
+    <message>
+        <source>Cyrillic</source>
+        <translation>???</translation>
+    </message>
+    <message>
+        <source>Kannada</source>
+        <translation>???</translation>
+    </message>
+    <message>
+        <source>Malayalam</source>
+        <translation>???</translation>
+    </message>
+    <message>
+        <source>Simplified Chinese</source>
+        <translation>????</translation>
+    </message>
+    <message>
+        <source>Demi Bold</source>
+        <translation>???</translation>
+    </message>
+    <message>
+        <source>Arabic</source>
+        <translation>???</translation>
+    </message>
+    <message>
+        <source>Hebrew</source>
+        <translation>???</translation>
+    </message>
+    <message>
+        <source>Myanmar</source>
+        <translation>??</translation>
+    </message>
+    <message>
+        <source>Italic</source>
+        <translation>??</translation>
+    </message>
+    <message>
+        <source>Korean</source>
+        <translation>??</translation>
+    </message>
+    <message>
+        <source>Normal</source>
+        <translation>??</translation>
+    </message>
+    <message>
+        <source>Oblique</source>
+        <translation>???</translation>
+    </message>
+    <message>
+        <source>Telugu</source>
+        <translation>Telugu</translation>
+    </message>
+    <message>
+        <source>Thaana</source>
+        <translation>Thaana</translation>
+    </message>
+    <message>
+        <source>Symbol</source>
+        <translation>??</translation>
+    </message>
+    <message>
+        <source>Syriac</source>
+        <translation>???</translation>
+    </message>
+    <message>
+        <source>Devanagari</source>
+        <translation>Devanagari</translation>
+    </message>
+    <message>
+        <source>Japanese</source>
+        <translation>??</translation>
+    </message>
+    <message>
+        <source>Bengali</source>
+        <translation>???</translation>
+    </message>
+    <message>
+        <source>Armenian</source>
+        <translation>????</translation>
+    </message>
+    <message>
+        <source>Sinhala</source>
+        <translation>??</translation>
+    </message>
+    <message>
+        <source>Tibetan</source>
+        <translation>??</translation>
+    </message>
+    <message>
+        <source>Vietnamese</source>
+        <translation>??</translation>
+    </message>
+    <message>
+        <source>Gujarati</source>
+        <translation>Gujarati</translation>
+    </message>
+    <message>
+        <source>Traditional Chinese</source>
+        <translation>????</translation>
+    </message>
+    <message>
+        <source>Georgian</source>
+        <translation>???</translation>
+    </message>
+    <message>
+        <source>Gurmukhi</source>
+        <translation>Gurmukhi</translation>
+    </message>
+</context>
+<context>
+    <name>QWebPage</name>
+    <message>
+        <source>Cut</source>
+        <translation>??</translation>
+    </message>
+    <message>
+        <source>LTR</source>
+        <translation>???</translation>
+    </message>
+    <message>
+        <source>RTL</source>
+        <translation>???</translation>
+    </message>
+    <message>
+        <source>Top</source>
+        <translation>??</translation>
+    </message>
+    <message>
+        <source>Bold</source>
+        <translation>??</translation>
+    </message>
+    <message>
+        <source>Copy</source>
+        <translation>??</translation>
+    </message>
+    <message>
+        <source>Stop</source>
+        <translation>??</translation>
+    </message>
+    <message>
+        <source>Open Frame</source>
+        <translation>????</translation>
+    </message>
+    <message>
+        <source>Open Image</source>
+        <translation>????</translation>
+    </message>
+    <message>
+        <source>Fonts</source>
+        <translation>??</translation>
+    </message>
+    <message>
+        <source>Paste</source>
+        <translation>??</translation>
+    </message>
+    <message>
+        <source>Reset</source>
+        <translation>??</translation>
+    </message>
+    <message>
+        <source>Inspect</source>
+        <translation>??</translation>
+    </message>
+    <message>
+        <source>Select to the start of the block</source>
+        <translation>???????????</translation>
+    </message>
+    <message>
+        <source>Move the cursor to the end of the block</source>
+        <translation>?????????????</translation>
+    </message>
+    <message>
+        <source>Select to the start of the line</source>
+        <translation>?????????</translation>
+    </message>
+    <message>
+        <source>Look Up In Dictionary</source>
+        <translation>??????</translation>
+    </message>
+    <message>
+        <source>Search The Web</source>
+        <translation>????</translation>
+    </message>
+    <message>
+        <source>Check Spelling While Typing</source>
+        <translation>?????????</translation>
+    </message>
+    <message>
+        <source>Add To Dictionary</source>
+        <translation>?????</translation>
+    </message>
+    <message>
+        <source>Delete to the start of the word</source>
+        <translation>?????????</translation>
+    </message>
+    <message>
+        <source>Recent searches</source>
+        <translation>?????</translation>
+    </message>
+    <message>
+        <source>Move the cursor to the next word</source>
+        <translation>??????????</translation>
+    </message>
+    <message>
+        <source>Move the cursor to the next line</source>
+        <translation>????????</translation>
+    </message>
+    <message>
+        <source>JavaScript Alert - %1</source>
+        <translation>JavaScript ?? ? %1</translation>
+    </message>
+    <message>
+        <source>Scroll down</source>
+        <translation>????</translation>
+    </message>
+    <message>
+        <source>Scroll here</source>
+        <translation>????</translation>
+    </message>
+    <message>
+        <source>Scroll left</source>
+        <translation>????</translation>
+    </message>
+    <message>
+        <source>Move the cursor to the start of the block</source>
+        <translation>?????????????</translation>
+    </message>
+    <message>
+        <source>Text Direction</source>
+        <translation>????</translation>
+    </message>
+    <message>
+        <source>Bottom</source>
+        <translation>??</translation>
+    </message>
+    <message>
+        <source>Ignore</source>
+        <translation>??</translation>
+    </message>
+    <message>
+        <source>Italic</source>
+        <translation>??</translation>
+    </message>
+    <message>
+        <source>Move the cursor to the end of the line</source>
+        <translation>???????????</translation>
+    </message>
+    <message>
+        <source>Move the cursor to the start of the line</source>
+        <translation>???????????</translation>
+    </message>
+    <message>
+        <source>Reload</source>
+        <translation>????</translation>
+    </message>
+    <message>
+        <source>JavaScript Confirm - %1</source>
+        <translation>JavaScript ?? ? %1</translation>
+    </message>
+    <message>
+        <source>Submit</source>
+        <translation>??</translation>
+    </message>
+    <message>
+        <source>Web Inspector - %2</source>
+        <translation>??????%2</translation>
+    </message>
+    <message>
+        <source>Page up</source>
+        <translation>????</translation>
+    </message>
+    <message>
+        <source>Spelling</source>
+        <translation>??</translation>
+    </message>
+    <message>
+        <source>Outline</source>
+        <translation>???</translation>
+    </message>
+    <message>
+        <source>Check Grammar With Spelling</source>
+        <translation>???????</translation>
+    </message>
+    <message>
+        <source>No file selected</source>
+        <translation>???????</translation>
+    </message>
+    <message>
+        <source>Ignore</source>
+        <comment>Ignore Grammar context menu item</comment>
+        <translation>??</translation>
+    </message>
+    <message>
+        <source>Save Image</source>
+        <translation>????</translation>
+    </message>
+    <message>
+        <source>Save Link...</source>
+        <translation>????...</translation>
+    </message>
+    <message>
+        <source>No recent searches</source>
+        <translation>???????</translation>
+    </message>
+    <message>
+        <source>Page right</source>
+        <translation>????</translation>
+    </message>
+    <message>
+        <source>Move the cursor to the start of the document</source>
+        <translation>?????????????</translation>
+    </message>
+    <message>
+        <source>Move the cursor to the next character</source>
+        <translation>??????????</translation>
+    </message>
+    <message>
+        <source>JavaScript Prompt - %1</source>
+        <translation>JavaScript ?? ? %1</translation>
+    </message>
+    <message>
+        <source>Copy Link</source>
+        <translation>????</translation>
+    </message>
+    <message>
+        <source>Select to the previous line</source>
+        <translation>??????</translation>
+    </message>
+    <message>
+        <source>Select to the previous word</source>
+        <translation>????????</translation>
+    </message>
+    <message>
+        <source>Check Spelling</source>
+        <translation>????</translation>
+    </message>
+    <message>
+        <source>Select to the next character</source>
+        <translation>????????</translation>
+    </message>
+    <message>
+        <source>Show Spelling and Grammar</source>
+        <translation>???????</translation>
+    </message>
+    <message>
+        <source>Delete to the end of the word</source>
+        <translation>?????????</translation>
+    </message>
+    <message>
+        <source>Direction</source>
+        <translation>??</translation>
+    </message>
+    <message>
+        <source>Select to the end of the line</source>
+        <translation>?????????</translation>
+    </message>
+    <message>
+        <source>Submit</source>
+        <comment>Submit (input element) alt text for &lt;input&gt; elements with no alt, title, or value</comment>
+        <translation>??</translation>
+    </message>
+    <message>
+        <source>Choose File</source>
+        <translation>????</translation>
+    </message>
+    <message>
+        <source>Scroll up</source>
+        <translation>????</translation>
+    </message>
+    <message>
+        <source>Clear recent searches</source>
+        <translation>???????</translation>
+    </message>
+    <message>
+        <source>Select to the start of the document</source>
+        <translation>???????????</translation>
+    </message>
+    <message>
+        <source>Default</source>
+        <translation>??</translation>
+    </message>
+    <message>
+        <source>Underline</source>
+        <translation>??</translation>
+    </message>
+    <message>
+        <source>Move the cursor to the previous character</source>
+        <translation>??????????</translation>
+    </message>
+    <message>
+        <source>Copy Image</source>
+        <translation>????</translation>
+    </message>
+    <message>
+        <source>Select to the end of the document</source>
+        <translation>???????????</translation>
+    </message>
+    <message>
+        <source>Select to the end of the block</source>
+        <translation>???????????</translation>
+    </message>
+    <message>
+        <source>Scroll right</source>
+        <translation>????</translation>
+    </message>
+    <message>
+        <source>No Guesses Found</source>
+        <translation>????????</translation>
+    </message>
+    <message>
+        <source>Open Link</source>
+        <translation>????</translation>
+    </message>
+    <message>
+        <source>Bad HTTP request</source>
+        <translation>??? HTTP ??</translation>
+    </message>
+    <message>
+        <source>Unknown</source>
+        <translation>??</translation>
+    </message>
+    <message>
+        <source>Move the cursor to the previous word</source>
+        <translation>??????????</translation>
+    </message>
+    <message>
+        <source>Move the cursor to the previous line</source>
+        <translation>????????</translation>
+    </message>
+    <message>
+        <source>%n file(s)</source>
+        <translation>%n ???</translation>
+    </message>
+    <message>
+        <source>Left edge</source>
+        <translation>???</translation>
+    </message>
+    <message>
+        <source>Go Forward</source>
+        <translation>??</translation>
+    </message>
+    <message>
+        <source>Page down</source>
+        <translation>????</translation>
+    </message>
+    <message>
+        <source>Page left</source>
+        <translation>????</translation>
+    </message>
+    <message>
+        <source>This is a searchable index. Enter search keywords: </source>
+        <translation>???????????????: </translation>
+    </message>
+    <message>
+        <source>Select to the previous character</source>
+        <translation>????????</translation>
+    </message>
+    <message>
+        <source>Go Back</source>
+        <translation>??</translation>
+    </message>
+    <message>
+        <source>Open in New Window</source>
+        <translation>??????</translation>
+    </message>
+    <message>
+        <source>Right edge</source>
+        <translation>???</translation>
+    </message>
+    <message>
+        <source>Move the cursor to the end of the document</source>
+        <translation>?????????????</translation>
+    </message>
+    <message>
+        <source>Hide Spelling and Grammar</source>
+        <translation>???????</translation>
+    </message>
+    <message>
+        <source>%1 (%2x%3 pixels)</source>
+        <translation>%1?%2x%3 ???</translation>
+    </message>
+    <message>
+        <source>Select to the next word</source>
+        <translation>????????</translation>
+    </message>
+    <message>
+        <source>Select to the next line</source>
+        <translation>??????</translation>
+    </message>
+</context>
+<context>
+    <name>QScrollBar</name>
+    <message>
+        <source>Top</source>
+        <translation>??</translation>
+    </message>
+    <message>
+        <source>Scroll down</source>
+        <translation>????</translation>
+    </message>
+    <message>
+        <source>Scroll here</source>
+        <translation>????</translation>
+    </message>
+    <message>
+        <source>Scroll left</source>
+        <translation>????</translation>
+    </message>
+    <message>
+        <source>Line up</source>
+        <translation>????</translation>
+    </message>
+    <message>
+        <source>Line down</source>
+        <translation>????</translation>
+    </message>
+    <message>
+        <source>Bottom</source>
+        <translation>??</translation>
+    </message>
+    <message>
+        <source>Page up</source>
+        <translation>????</translation>
+    </message>
+    <message>
+        <source>Position</source>
+        <translation>??</translation>
+    </message>
+    <message>
+        <source>Page right</source>
+        <translation>????</translation>
+    </message>
+    <message>
+        <source>Scroll up</source>
+        <translation>????</translation>
+    </message>
+    <message>
+        <source>Scroll right</source>
+        <translation>????</translation>
+    </message>
+    <message>
+        <source>Left edge</source>
+        <translation>???</translation>
+    </message>
+    <message>
+        <source>Page down</source>
+        <translation>????</translation>
+    </message>
+    <message>
+        <source>Page left</source>
+        <translation>????</translation>
+    </message>
+    <message>
+        <source>Right edge</source>
+        <translation>???</translation>
+    </message>
+</context>
+<context>
+    <name>QInputContext</name>
+    <message>
+        <source>XIM</source>
+        <translation>XIM</translation>
+    </message>
+    <message>
+        <source>Windows input method</source>
+        <translation>Windows ???</translation>
+    </message>
+    <message>
+        <source>XIM input method</source>
+        <translation>XIM ???</translation>
+    </message>
+    <message>
+        <source>Mac OS X input method</source>
+        <translation>Mac OS X ???</translation>
+    </message>
+</context>
+<context>
+    <name>QFileDialog</name>
+    <message>
+        <source>Back</source>
+        <translation>??</translation>
+    </message>
+    <message>
+        <source>File</source>
+        <translation>??</translation>
+    </message>
+    <message>
+        <source>Open</source>
+        <translation>??</translation>
+    </message>
+    <message>
+        <source>&amp;Open</source>
+        <translation>??(&amp;O)</translation>
+    </message>
+    <message>
+        <source>&amp;Save</source>
+        <translation>??(&amp;S)</translation>
+    </message>
+    <message>
+        <source>Drive</source>
+        <translation>??</translation>
+    </message>
+    <message>
+        <source>Show </source>
+        <translation>?? </translation>
+    </message>
+    <message>
+        <source>&apos;%1&apos; is write protected.
+Do you want to delete it anyway?</source>
+        <translation>%1 ??????
+?????????</translation>
+    </message>
+    <message>
+        <source>File &amp;name:</source>
+        <translation>??(&amp;N):</translation>
+    </message>
+    <message>
+        <source>New Folder</source>
+        <translation>????</translation>
+    </message>
+    <message>
+        <source>Parent Directory</source>
+        <translation>???</translation>
+    </message>
+    <message>
+        <source>&amp;New Folder</source>
+        <translation>?????(&amp;N)</translation>
+    </message>
+    <message>
+        <source>Remove</source>
+        <translation>??</translation>
+    </message>
+    <message>
+        <source>My Computer</source>
+        <translation>????</translation>
+    </message>
+    <message>
+        <source>Look in:</source>
+        <translation>??:</translation>
+    </message>
+    <message>
+        <source>Files of type:</source>
+        <translation>????:</translation>
+    </message>
+    <message>
+        <source>Find Directory</source>
+        <translation>????</translation>
+    </message>
+    <message>
+        <source>Show &amp;hidden files</source>
+        <translation>?????(&amp;H)</translation>
+    </message>
+    <message>
+        <source>Are sure you want to delete &apos;%1&apos;?</source>
+        <translation>?????? %1 ??</translation>
+    </message>
+    <message>
+        <source>Save As</source>
+        <translation>????</translation>
+    </message>
+    <message>
+        <source>%1
+Directory not found.
+Please verify the correct directory name was given.</source>
+        <translation>%1
+??????
+????????????</translation>
+    </message>
+    <message>
+        <source>List View</source>
+        <translation>????</translation>
+    </message>
+    <message>
+        <source>&amp;Choose</source>
+        <translation>??(&amp;C)</translation>
+    </message>
+    <message>
+        <source>&amp;Delete</source>
+        <translation>??(&amp;D)</translation>
+    </message>
+    <message>
+        <source>All Files (*)</source>
+        <translation>???? (*)</translation>
+    </message>
+    <message>
+        <source>Directories</source>
+        <translation>??</translation>
+    </message>
+    <message>
+        <source>All Files (*.*)</source>
+        <translation>???? (*.*)</translation>
+    </message>
+    <message>
+        <source>&amp;Rename</source>
+        <translation>????(&amp;R)</translation>
+    </message>
+    <message>
+        <source>Could not delete directory.</source>
+        <translation>???????</translation>
+    </message>
+    <message>
+        <source>Directory:</source>
+        <translation>??:</translation>
+    </message>
+    <message>
+        <source>Unknown</source>
+        <translation>??</translation>
+    </message>
+    <message>
+        <source>%1 already exists.
+Do you want to replace it?</source>
+        <translation>%1 ???
+???????</translation>
+    </message>
+    <message>
+        <source>Forward</source>
+        <translation>??</translation>
+    </message>
+    <message>
+        <source>Recent Places</source>
+        <translation>?????</translation>
+    </message>
+    <message>
+        <source>Create New Folder</source>
+        <translation>??????</translation>
+    </message>
+    <message>
+        <source>Detail View</source>
+        <translation>????</translation>
+    </message>
+    <message>
+        <source>%1
+File not found.
+Please verify the correct file name was given.</source>
+        <translation>%1
+??????
+??????????</translation>
+    </message>
+</context>
+<context>
+    <name>Q3TextEdit</name>
+    <message>
+        <source>Cu&amp;t</source>
+        <translation>??(&amp;T)</translation>
+    </message>
+    <message>
+        <source>&amp;Copy</source>
+        <translation>??(&amp;C)</translation>
+    </message>
+    <message>
+        <source>&amp;Redo</source>
+        <translation>??(&amp;R)</translation>
+    </message>
+    <message>
+        <source>&amp;Undo</source>
+        <translation>??(&amp;U)</translation>
+    </message>
+    <message>
+        <source>Clear</source>
+        <translation>??</translation>
+    </message>
+    <message>
+        <source>&amp;Paste</source>
+        <translation>??(&amp;P)</translation>
+    </message>
+    <message>
+        <source>Select All</source>
+        <translation>????</translation>
+    </message>
+</context>
+<context>
+    <name>QLineEdit</name>
+    <message>
+        <source>Cu&amp;t</source>
+        <translation>??(&amp;T)</translation>
+    </message>
+    <message>
+        <source>&amp;Copy</source>
+        <translation>??(&amp;C)</translation>
+    </message>
+    <message>
+        <source>&amp;Redo</source>
+        <translation>??(&amp;R)</translation>
+    </message>
+    <message>
+        <source>&amp;Undo</source>
+        <translation>??(&amp;U)</translation>
+    </message>
+    <message>
+        <source>&amp;Paste</source>
+        <translation>??(&amp;P)</translation>
+    </message>
+    <message>
+        <source>Delete</source>
+        <translation>??</translation>
+    </message>
+    <message>
+        <source>Select All</source>
+        <translation>????</translation>
+    </message>
+</context>
+<context>
+    <name>QTextControl</name>
+    <message>
+        <source>Cu&amp;t</source>
+        <translation>??(&amp;T)</translation>
+    </message>
+    <message>
+        <source>&amp;Copy</source>
+        <translation>??(&amp;C)</translation>
+    </message>
+    <message>
+        <source>&amp;Redo</source>
+        <translation>??(&amp;R)</translation>
+    </message>
+    <message>
+        <source>&amp;Undo</source>
+        <translation>??(&amp;U)</translation>
+    </message>
+    <message>
+        <source>&amp;Paste</source>
+        <translation>??(&amp;P)</translation>
+    </message>
+    <message>
+        <source>Delete</source>
+        <translation>??</translation>
+    </message>
+    <message>
+        <source>Select All</source>
+        <translation>????</translation>
+    </message>
+    <message>
+        <source>Copy &amp;Link Location</source>
+        <translation>??????(&amp;L)</translation>
+    </message>
+</context>
+<context>
+    <name>QDockWidget</name>
+    <message>
+        <source>Dock</source>
+        <translation>??</translation>
+    </message>
+    <message>
+        <source>Close</source>
+        <translation>??</translation>
+    </message>
+    <message>
+        <source>Float</source>
+        <translation>??</translation>
+    </message>
+</context>
+<context>
+    <name>QDialog</name>
+    <message>
+        <source>Done</source>
+        <translation>??</translation>
+    </message>
+    <message>
+        <source>What&apos;s This?</source>
+        <translation>?????</translation>
+    </message>
+</context>
+<context>
+    <name>QWizard</name>
+    <message>
+        <source>Done</source>
+        <translation>??</translation>
+    </message>
+    <message>
+        <source>Help</source>
+        <translation>??</translation>
+    </message>
+    <message>
+        <source>&amp;Help</source>
+        <translation>??(&amp;H)</translation>
+    </message>
+    <message>
+        <source>&amp;Next</source>
+        <translation>???(&amp;N)</translation>
+    </message>
+    <message>
+        <source>Cancel</source>
+        <translation>??</translation>
+    </message>
+    <message>
+        <source>Commit</source>
+        <translation>??</translation>
+    </message>
+    <message>
+        <source>Continue</source>
+        <translation>??</translation>
+    </message>
+    <message>
+        <source>&amp;Finish</source>
+        <translation>??(&amp;F)</translation>
+    </message>
+    <message>
+        <source>&amp;Next &gt;</source>
+        <translation>???(&amp;N)?</translation>
+    </message>
+    <message>
+        <source>Go Back</source>
+        <translation>??</translation>
+    </message>
+    <message>
+        <source>&lt; &amp;Back</source>
+        <translation>???(&amp;B)</translation>
+    </message>
+</context>
+<context>
+    <name>QPageSetupWidget</name>
+    <message>
+        <source>Form</source>
+        <translation>??</translation>
+    </message>
+    <message>
+        <source>bottom margin</source>
+        <translation>??</translation>
+    </message>
+    <message>
+        <source>Paper</source>
+        <translation>??</translation>
+    </message>
+    <message>
+        <source>Paper source:</source>
+        <translation>????:</translation>
+    </message>
+    <message>
+        <source>Centimeters (cm)</source>
+        <translation>??</translation>
+    </message>
+    <message>
+        <source>right margin</source>
+        <translation>??</translation>
+    </message>
+    <message>
+        <source>Margins</source>
+        <translation>??</translation>
+    </message>
+    <message>
+        <source>Landscape</source>
+        <translation>??</translation>
+    </message>
+    <message>
+        <source>Width:</source>
+        <translation>??:</translation>
+    </message>
+    <message>
+        <source>Orientation</source>
+        <translation>??</translation>
+    </message>
+    <message>
+        <source>Portrait</source>
+        <translation>??</translation>
+    </message>
+    <message>
+        <source>top margin</source>
+        <translation>??</translation>
+    </message>
+    <message>
+        <source>left margin</source>
+        <translation>??</translation>
+    </message>
+    <message>
+        <source>Page size:</source>
+        <translation>????:</translation>
+    </message>
+    <message>
+        <source>Reverse portrait</source>
+        <translation>????</translation>
+    </message>
+    <message>
+        <source>Millimeters (mm)</source>
+        <translation>??</translation>
+    </message>
+    <message>
+        <source>Points (pt)</source>
+        <translation>?</translation>
+    </message>
+    <message>
+        <source>Inches (in)</source>
+        <translation>??</translation>
+    </message>
+    <message>
+        <source>Reverse landscape</source>
+        <translation>????</translation>
+    </message>
+    <message>
+        <source>Height:</source>
+        <translation>??:</translation>
+    </message>
+</context>
+<context>
+    <name>QPrintPropertiesWidget</name>
+    <message>
+        <source>Form</source>
+        <translation>??</translation>
+    </message>
+    <message>
+        <source>Page</source>
+        <translation>??</translation>
+    </message>
+    <message>
+        <source>Advanced</source>
+        <translation>??</translation>
+    </message>
+</context>
+<context>
+    <name>QMdiSubWindow</name>
+    <message>
+        <source>Help</source>
+        <translation>??</translation>
+    </message>
+    <message>
+        <source>Menu</source>
+        <translation>??</translation>
+    </message>
+    <message>
+        <source>&amp;Move</source>
+        <translation>??(&amp;M)</translation>
+    </message>
+    <message>
+        <source>&amp;Size</source>
+        <translation>??(&amp;S)</translation>
+    </message>
+    <message>
+        <source>Close</source>
+        <translation>??</translation>
+    </message>
+    <message>
+        <source>Minimize</source>
+        <translation>???</translation>
+    </message>
+    <message>
+        <source>Shade</source>
+        <translation>??</translation>
+    </message>
+    <message>
+        <source>Stay on &amp;Top</source>
+        <translation>????(&amp;T)</translation>
+    </message>
+    <message>
+        <source>&amp;Close</source>
+        <translation>??(&amp;C)</translation>
+    </message>
+    <message>
+        <source>- [%1]</source>
+        <translation>- [%1]</translation>
+    </message>
+    <message>
+        <source>%1 - [%2]</source>
+        <translation>%1 - [%2]</translation>
+    </message>
+    <message>
+        <source>&amp;Restore</source>
+        <translation>??(&amp;R)</translation>
+    </message>
+    <message>
+        <source>Restore</source>
+        <translation>??</translation>
+    </message>
+    <message>
+        <source>Maximize</source>
+        <translation>???</translation>
+    </message>
+    <message>
+        <source>Unshade</source>
+        <translation>????</translation>
+    </message>
+    <message>
+        <source>Mi&amp;nimize</source>
+        <translation>???(&amp;N)</translation>
+    </message>
+    <message>
+        <source>Ma&amp;ximize</source>
+        <translation>???(&amp;X)</translation>
+    </message>
+    <message>
+        <source>Restore Down</source>
+        <translation>????</translation>
+    </message>
+</context>
+<context>
+    <name>QObject</name>
+    <message>
+        <source>Home</source>
+        <translation>??</translation>
+    </message>
+    <message>
+        <source>Protocol error: packet of size 0 received</source>
+        <translation>??????????? 0 ???</translation>
+    </message>
+    <message>
+        <source>Invalid URI: %1</source>
+        <translation>???????%1</translation>
+    </message>
+    <message>
+        <source>Socket error on %1: %2</source>
+        <translation>%1 ??? socket ???%2</translation>
+    </message>
+    <message>
+        <source>No host name given</source>
+        <translation>?????</translation>
+    </message>
+    <message>
+        <source>Read error reading from %1: %2</source>
+        <translation>? %1 ?????%2</translation>
+    </message>
+    <message>
+        <source>Remote host closed the connection prematurely on %1</source>
+        <translation>? %1 ??????????????</translation>
+    </message>
+    <message>
+        <source>Operation not supported on %1</source>
+        <translation>? %1 ???????</translation>
+    </message>
+    <message>
+        <source>Write error writing to %1: %2</source>
+        <translation>?? %1 ??????%2</translation>
+    </message>
+</context>
+<context>
+    <name>QDirModel</name>
+    <message>
+        <source>Kind</source>
+        <translation>??</translation>
+    </message>
+    <message>
+        <source>Name</source>
+        <translation>??</translation>
+    </message>
+    <message>
+        <source>Size</source>
+        <translation>??</translation>
+    </message>
+    <message>
+        <source>Type</source>
+        <translation>??</translation>
+    </message>
+    <message>
+        <source>Date Modified</source>
+        <translation>????</translation>
+    </message>
+</context>
+<context>
+    <name>QFileSystemModel</name>
+    <message>
+        <source>Kind</source>
+        <translation>??</translation>
+    </message>
+    <message>
+        <source>Name</source>
+        <translation>??</translation>
+    </message>
+    <message>
+        <source>Size</source>
+        <translation>??</translation>
+    </message>
+    <message>
+        <source>Type</source>
+        <translation>??</translation>
+    </message>
+    <message>
+        <source>%1 GB</source>
+        <translation>%1 GB</translation>
+    </message>
+    <message>
+        <source>%1 KB</source>
+        <translation>%1 KB</translation>
+    </message>
+    <message>
+        <source>%1 MB</source>
+        <translation>%1 MB</translation>
+    </message>
+    <message>
+        <source>%1 TB</source>
+        <translation>%1 TB</translation>
+    </message>
+    <message>
+        <source>&lt;b&gt;The name &quot;%1&quot; can not be used.&lt;/b&gt;&lt;p&gt;Try using another name, with fewer characters or no punctuations marks.</source>
+        <translation>&lt;b&gt;?????? &quot;%1&quot;?&lt;/b&gt;&lt;p&gt;?????????????????????????</translation>
+    </message>
+    <message>
+        <source>%1 bytes</source>
+        <translation>%1 ???</translation>
+    </message>
+    <message>
+        <source>My Computer</source>
+        <translation>????</translation>
+    </message>
+    <message>
+        <source>Computer</source>
+        <translation>??</translation>
+    </message>
+    <message>
+        <source>Invalid filename</source>
+        <translation>??????</translation>
+    </message>
+    <message>
+        <source>Date Modified</source>
+        <translation>????</translation>
+    </message>
+</context>
+<context>
+    <name>QDoubleSpinBox</name>
+    <message>
+        <source>Less</source>
+        <translation>??</translation>
+    </message>
+    <message>
+        <source>More</source>
+        <translation>??</translation>
+    </message>
+</context>
+<context>
+    <name>QSpinBox</name>
+    <message>
+        <source>Less</source>
+        <translation>??</translation>
+    </message>
+    <message>
+        <source>More</source>
+        <translation>??</translation>
+    </message>
+</context>
+<context>
+    <name>QPPDOptionsModel</name>
+    <message>
+        <source>Name</source>
+        <translation>??</translation>
+    </message>
+    <message>
+        <source>Value</source>
+        <translation>?</translation>
+    </message>
+</context>
+<context>
+    <name>QComboBox</name>
+    <message>
+        <source>Open</source>
+        <translation>??</translation>
+    </message>
+    <message>
+        <source>True</source>
+        <translation>?</translation>
+    </message>
+    <message>
+        <source>Close</source>
+        <translation>??</translation>
+    </message>
+    <message>
+        <source>False</source>
+        <translation>?</translation>
+    </message>
+</context>
+<context>
+    <name>QMenu</name>
+    <message>
+        <source>Open</source>
+        <translation>??</translation>
+    </message>
+    <message>
+        <source>Close</source>
+        <translation>??</translation>
+    </message>
+    <message>
+        <source>Execute</source>
+        <translation>??</translation>
+    </message>
+</context>
+<context>
+    <name>QPushButton</name>
+    <message>
+        <source>Open</source>
+        <translation>??</translation>
+    </message>
+</context>
+<context>
+    <name>QToolButton</name>
+    <message>
+        <source>Open</source>
+        <translation>??</translation>
+    </message>
+    <message>
+        <source>Press</source>
+        <translation>??</translation>
+    </message>
+</context>
+<context>
+    <name>QUndoGroup</name>
+    <message>
+        <source>Redo</source>
+        <translation>??</translation>
+    </message>
+    <message>
+        <source>Undo</source>
+        <translation>??</translation>
+    </message>
+</context>
+<context>
+    <name>QUndoStack</name>
+    <message>
+        <source>Redo</source>
+        <translation>??</translation>
+    </message>
+    <message>
+        <source>Undo</source>
+        <translation>??</translation>
+    </message>
+</context>
+<context>
+    <name>Q3DataTable</name>
+    <message>
+        <source>True</source>
+        <translation>?</translation>
+    </message>
+    <message>
+        <source>False</source>
+        <translation>?</translation>
+    </message>
+    <message>
+        <source>Delete</source>
+        <translation>??</translation>
+    </message>
+    <message>
+        <source>Insert</source>
+        <translation>??</translation>
+    </message>
+    <message>
+        <source>Update</source>
+        <translation>??</translation>
+    </message>
+</context>
+<context>
+    <name>QSslSocket</name>
+    <message>
+        <source>Error creating SSL session: %1</source>
+        <translation>?? SSL ??????????%1</translation>
+    </message>
+    <message>
+        <source>Error creating SSL session, %1</source>
+        <translation>?? SSL ??????????%1</translation>
+    </message>
+    <message>
+        <source>Cannot provide a certificate with no key, %1</source>
+        <translation>???????????%1</translation>
+    </message>
+    <message>
+        <source>Unable to write data: %1</source>
+        <translation>???????%1</translation>
+    </message>
+    <message>
+        <source>Error during SSL handshake: %1</source>
+        <translation>SSL ????????%1</translation>
+    </message>
+    <message>
+        <source>Error loading local certificate, %1</source>
+        <translation>????????????%1</translation>
+    </message>
+    <message>
+        <source>Invalid or empty cipher list (%1)</source>
+        <translation>????????????%1?</translation>
+    </message>
+    <message>
+        <source>Private key does not certificate public key, %1</source>
+        <translation>?????????????%1</translation>
+    </message>
+    <message>
+        <source>Error creating SSL context (%1)</source>
+        <translation>?? SSL ????????%1?</translation>
+    </message>
+    <message>
+        <source>Error while reading: %1</source>
+        <translation>????????%1</translation>
+    </message>
+    <message>
+        <source>Error loading private key, %1</source>
+        <translation>??????????%1</translation>
+    </message>
+</context>
+<context>
+    <name>QLocalSocket</name>
+    <message>
+        <source>%1: Connection error</source>
+        <translation>%1?????</translation>
+    </message>
+    <message>
+        <source>%1: Connection refused</source>
+        <translation>%1?????</translation>
+    </message>
+    <message>
+        <source>%1: Unknown error %2</source>
+        <translation>%1?????? %2</translation>
+    </message>
+    <message>
+        <source>%1: Socket access error</source>
+        <translation>%1?Socket ????</translation>
+    </message>
+    <message>
+        <source>%1: Socket resource error</source>
+        <translation>%1?Socket ????</translation>
+    </message>
+    <message>
+        <source>%1: The socket operation is not supported</source>
+        <translation>%1?socket ?????</translation>
+    </message>
+    <message>
+        <source>%1: Invalid name</source>
+        <translation>%1???????</translation>
+    </message>
+    <message>
+        <source>%1: Unknown error</source>
+        <translation>%1??????</translation>
+    </message>
+    <message>
+        <source>%1: Socket operation timed out</source>
+        <translation>%1?Socket ????</translation>
+    </message>
+    <message>
+        <source>%1: Datagram too large</source>
+        <translation>%1??????</translation>
+    </message>
+    <message>
+        <source>%1: Remote closed</source>
+        <translation>%1??????</translation>
+    </message>
+</context>
+<context>
+    <name>QtXmlPatterns</name>
+    <message>
+        <source>A comment cannot contain %1</source>
+        <translation>?????? %1</translation>
+    </message>
+    <message>
+        <source>Version %1 is not supported. The supported XQuery version is 1.0.</source>
+        <translation>?? %1 ??????? XQuery ??? 1.0?</translation>
+    </message>
+    <message>
+        <source>The root node of the second argument to function %1 must be a document node. %2 is not a document node.</source>
+        <translation>?? %1 ??????????????????%2 ???????</translation>
+    </message>
+    <message>
+        <source>The parameter %1 is required, but no corresponding %2 is supplied.</source>
+        <translation>???? %1?????????? %2?</translation>
+    </message>
+    <message>
+        <source>Namespace declarations must occur before function, variable, and option declarations.</source>
+        <translation>??????????????????????</translation>
+    </message>
+    <message>
+        <source>empty</source>
+        <translation>??</translation>
+    </message>
+    <message>
+        <source>The namespace URI cannot be the empty string when binding to a prefix, %1.</source>
+        <translation>?????? %1 ????????????????</translation>
+    </message>
+    <message>
+        <source>A comment cannot end with a %1.</source>
+        <translation>????? %1 ????</translation>
+    </message>
+    <message>
+        <source>Top level stylesheet elements must be in a non-null namespace, which %1 isn&apos;t.</source>
+        <translation>???????????????????? %1 ???</translation>
+    </message>
+    <message>
+        <source>Integer division (%1) by zero (%2) is undefined.</source>
+        <translation>???? %1 ????%2????????</translation>
+    </message>
+    <message>
+        <source>A library module cannot be evaluated directly. It must be imported from a main module.</source>
+        <translation>?????????????????????</translation>
+    </message>
+    <message>
+        <source>Time %1:%2:%3.%4 is invalid.</source>
+        <translation>?? %1:%2:%3.%4 ????</translation>
+    </message>
+    <message>
+        <source>Attribute %1 cannot appear on the element %2. Only the standard attributes can appear.</source>
+        <translation>?? %1 ??????? %2?????????</translation>
+    </message>
+    <message>
+        <source>A value of type %1 must contain an even number of digits. The value %2 does not.</source>
+        <translation>?? %1 ?????????????? %2 ???????</translation>
+    </message>
+    <message>
+        <source>Modulus division (%1) by zero (%2) is undefined.</source>
+        <translation>???? %1 ????%2????????</translation>
+    </message>
+    <message>
+        <source>No function with signature %1 is available</source>
+        <translation>????? %1 ??????</translation>
+    </message>
+    <message>
+        <source>None of the pragma expressions are supported. Therefore, a fallback expression must be present</source>
+        <translation>??? pragma ??????????????</translation>
+    </message>
+    <message>
+        <source>In the replacement string, %1 can only be used to escape itself or %2, not %3</source>
+        <translation>???????%1 ??????? %2 ?????? %3</translation>
+    </message>
+    <message>
+        <source>The codepoint %1, occurring in %2 using encoding %3, is an invalid XML character.</source>
+        <translation>? %2 ????? %1??? %3???????? XML ???</translation>
+    </message>
+    <message>
+        <source>Network timeout.</source>
+        <translation>?????</translation>
+    </message>
+    <message>
+        <source>No casting is possible with %1 as the target type.</source>
+        <translation>????? %1 ???</translation>
+    </message>
+    <message>
+        <source>The Schema Import feature is not supported, and therefore %1 declarations cannot occur.</source>
+        <translation>????????????? %1 ????????</translation>
+    </message>
+    <message>
+        <source>Attribute %1 and %2 are mutually exclusive.</source>
+        <translation>?? %1 ? %2 ?????</translation>
+    </message>
+    <message>
+        <source>Parse error: %1</source>
+        <translation>?????%1</translation>
+    </message>
+    <message>
+        <source>If the first argument is the empty sequence or a zero-length string (no namespace), a prefix cannot be specified. Prefix %1 was specified.</source>
+        <translation>????????????????? 0 ???????????????????????????? %1?</translation>
+    </message>
+    <message>
+        <source>In an XSL-T pattern, the first argument to function %1 must be a literal or a variable reference, when used for matching.</source>
+        <translation>? XSL-T ?????? %1 ????????????????????????</translation>
+    </message>
+    <message>
+        <source>At least one component must be present.</source>
+        <translation>???????????</translation>
+    </message>
+    <message>
+        <source>In a namespace constructor, the value for a namespace value cannot be an empty string.</source>
+        <translation>???????????????????????</translation>
+    </message>
+    <message>
+        <source>An attribute by name %1 has already been created.</source>
+        <translation>?? %1 ????????</translation>
+    </message>
+    <message>
+        <source>An argument by name %1 has already been declared. Every argument name must be unique.</source>
+        <translation>??? %1 ???????????????????</translation>
+    </message>
+    <message>
+        <source>%1 is an invalid flag for regular expressions. Valid flags are:</source>
+        <translation>%1 ????????????????????:</translation>
+    </message>
+    <message>
+        <source>At least one %1-element must occur inside %2.</source>
+        <translation>?????? %1 ???? %2 ???</translation>
+    </message>
+    <message>
+        <source>Only the Unicode Codepoint Collation is supported(%1). %2 is unsupported.</source>
+        <translation>??? Unicode Codepoint Collation?%1??%2 ????</translation>
+    </message>
+    <message>
+        <source>Matches are case insensitive</source>
+        <translation>????????</translation>
+    </message>
+    <message>
+        <source>The name of an extension expression must be in a namespace.</source>
+        <translation>????????????????</translation>
+    </message>
+    <message>
+        <source>Each name of a template parameter must be unique; %1 is duplicated.</source>
+        <translation>??????????????%1 ??????</translation>
+    </message>
+    <message>
+        <source>At least one mode must be specified in the %1-attribute on element %2.</source>
+        <translation>??? %2 ? %1 ?????????????</translation>
+    </message>
+    <message>
+        <source>%1 matches newline characters</source>
+        <translation>%1 ???????</translation>
+    </message>
+    <message>
+        <source>Year %1 is invalid because it begins with %2.</source>
+        <translation>?? %1 ???????? %2 ????</translation>
+    </message>
+    <message>
+        <source>The second argument to %1 cannot be of type %2. It must be of type %3, %4, or %5.</source>
+        <translation>?? %1 ????????? %2 ?????? %3?%4 ? %5 ???</translation>
+    </message>
+    <message>
+        <source>Element %1 cannot have children.</source>
+        <translation>?? %1 ???????</translation>
+    </message>
+    <message>
+        <source>Attribute %1 cannot appear on the element %2. Only %3 is allowed, and the standard attributes.</source>
+        <translation>?? %1 ??????? %2???? %3 ???????</translation>
+    </message>
+    <message>
+        <source>Only one %1-element can appear.</source>
+        <translation>???????? %1?</translation>
+    </message>
+    <message>
+        <source>The name for a computed attribute cannot have the namespace URI %1 with the local name %2.</source>
+        <translation>???????????????????? %1 ?????? %2?</translation>
+    </message>
+    <message>
+        <source>A positional predicate must evaluate to a single numeric value.</source>
+        <translation>????????????????</translation>
+    </message>
+    <message>
+        <source>Element %1 can&apos;t be serialized because it appears outside the document element.</source>
+        <translation>?? %1 ???????????????????</translation>
+    </message>
+    <message>
+        <source>%1 and %2 match the start and end of a line.</source>
+        <translation>%1 ? %2 ????????????</translation>
+    </message>
+    <message>
+        <source>Running an XSL-T 1.0 stylesheet with a 2.0 processor.</source>
+        <translation>?? 2.0 ????? XSL-T 1.0 ?????</translation>
+    </message>
+    <message>
+        <source>A stylesheet function must have a prefixed name.</source>
+        <translation>?????????????</translation>
+    </message>
+    <message>
+        <source>%1 cannot be retrieved</source>
+        <translation>%1 ????</translation>
+    </message>
+    <message>
+        <source>It&apos;s not possible to cast the value %1 of type %2 to %3</source>
+        <translation>?????? %2 ??? %1 ? %3</translation>
+    </message>
+    <message>
+        <source>The value of the XSL-T version attribute must be a value of type %1, which %2 isn&apos;t.</source>
+        <translation>XLS-T ??????????? %1 ???? %2 ???</translation>
+    </message>
+    <message>
+        <source>The prefix %1 cannot be bound.</source>
+        <translation>???? %1 ??????</translation>
+    </message>
+    <message>
+        <source>The prefix must be a valid %1, which %2 is not.</source>
+        <translation>?????????? %1?? %2 ???</translation>
+    </message>
+    <message>
+        <source>The keyword %1 cannot occur with any other mode name.</source>
+        <translation>??? %1 ????????????????</translation>
+    </message>
+    <message>
+        <source>Type error in cast, expected %1, received %2.</source>
+        <translation>????????? %1 ???? %2?</translation>
+    </message>
+    <message>
+        <source>%1 is not a valid numeric literal.</source>
+        <translation>%1 ????????</translation>
+    </message>
+    <message>
+        <source>%1 takes at most %n argument(s). %2 is therefore invalid.</source>
+        <translation>%1 ????? %n ?????? %2 ??????</translation>
+    </message>
+    <message>
+        <source>Circularity detected</source>
+        <translation>?????</translation>
+    </message>
+    <message>
+        <source>A variable by name %1 has already been declared.</source>
+        <translation>?? %1 ????????</translation>
+    </message>
+    <message>
+        <source>The prefix %1 can not be bound. By default, it is already bound to the namespace %2.</source>
+        <translation>???? %1 ??????????????? %2 ???</translation>
+    </message>
+    <message>
+        <source>An %1-attribute must have a valid %2 as value, which %3 isn&apos;t.</source>
+        <translation>?? %1 ?????? %2 ???? %3 ??????</translation>
+    </message>
+    <message>
+        <source>If element %1 has no attribute %2, it cannot have attribute %3 or %4.</source>
+        <translation>??? %1 ???? %2???????? %3 ? %4?</translation>
+    </message>
+    <message>
+        <source>A function already exists with the signature %1.</source>
+        <translation>?????? %1 ??????</translation>
+    </message>
+    <message>
+        <source>When casting to %1 from %2, the source value cannot be %3.</source>
+        <translation>? %2 ????? %1 ??????????? %3?</translation>
+    </message>
+    <message>
+        <source>Attribute %1 can&apos;t be serialized because it appears at the top level.</source>
+        <translation>???? %1 ???????????????</translation>
+    </message>
+    <message>
+        <source>No comparisons can be done involving the type %1.</source>
+        <translation>???? %1 ???????</translation>
+    </message>
+    <message>
+        <source>No value is available for the external variable by name %1.</source>
+        <translation>?? %1 ????????????</translation>
+    </message>
+    <message>
+        <source>The value of attribute %1 must of type %2, which %3 isn&apos;t.</source>
+        <translation>?? %1 ??????? %2?? %3 ???</translation>
+    </message>
+    <message>
+        <source>The item %1 did not match the required type %2.</source>
+        <translation>?? %1 ???????? %2?</translation>
+    </message>
+    <message>
+        <source>Element %1 cannot have a sequence constructor.</source>
+        <translation>?? %1?????????</translation>
+    </message>
+    <message>
+        <source>When attribute %1 is present on %2, a sequence constructor cannot be used.</source>
+        <translation>??? %1 ??? %2 ?????????????</translation>
+    </message>
+    <message>
+        <source>one or more</source>
+        <translation>????</translation>
+    </message>
+    <message>
+        <source>The encoding %1 is invalid. It must contain Latin characters only, must not contain whitespace, and must match the regular expression %2.</source>
+        <translation>?? %1 ?????????????????????????????? %2?</translation>
+    </message>
+    <message>
+        <source>%1 requires at least %n argument(s). %2 is therefore invalid.</source>
+        <translation>%1 ???? %n ?????? %2 ??????</translation>
+    </message>
+    <message>
+        <source>The target name in a processing instruction cannot be %1 in any combination of upper and lower case. Therefore, is %2 invalid.</source>
+        <translation>???????????????????? %1????%2 ???????</translation>
+    </message>
+    <message>
+        <source>The focus is undefined.</source>
+        <translation>??????</translation>
+    </message>
+    <message>
+        <source>%1 is an unknown schema type.</source>
+        <translation>%1 ?????????</translation>
+    </message>
+    <message>
+        <source>The value for attribute %1 on element %2 must either be %3 or %4, not %5.</source>
+        <translation>?? %2 ??? %1 ????? %3 ? %4???? %5?</translation>
+    </message>
+    <message>
+        <source>In the replacement string, %1 must be followed by at least one digit when not escaped.</source>
+        <translation>??????????????? %1 ???????????</translation>
+    </message>
+    <message>
+        <source>In an XSL-T pattern, axis %1 cannot be used, only axis %2 or %3 can.</source>
+        <translation>? XSL-T ??????? %1 ????? %2 ? %3?</translation>
+    </message>
+    <message>
+        <source>The namespace for a user defined function cannot be empty (try the predefined prefix %1 which exists for cases like this)</source>
+        <translation>??????????????????????????????? %1?</translation>
+    </message>
+    <message>
+        <source>The first operand in an integer division, %1, cannot be infinity (%2).</source>
+        <translation>???????????? %1 ???????%2??</translation>
+    </message>
+    <message>
+        <source>%1 is not a valid value of type %2.</source>
+        <translation>%1 ????? %2 ?????</translation>
+    </message>
+    <message>
+        <source>Multiplication of a value of type %1 by %2 or %3 (plus or minus infinity) is not allowed.</source>
+        <translation>??? %1 ?? %2 ? %3??????????????</translation>
+    </message>
+    <message>
+        <source>The variable %1 is unused</source>
+        <translation>?? %1 ???</translation>
+    </message>
+    <message>
+        <source>The %1-axis is unsupported in XQuery</source>
+        <translation>XQuery ???? %1 ?</translation>
+    </message>
+    <message>
+        <source>A direct element constructor is not well-formed. %1 is ended with %2.</source>
+        <translation>??????????????%1 ? %2 ???</translation>
+    </message>
+    <message>
+        <source>Dividing a value of type %1 by %2 or %3 (plus or minus zero) is not allowed.</source>
+        <translation>??? %1 ?? %2 ? %3????????????</translation>
+    </message>
+    <message>
+        <source>Attribute %1 cannot have the value %2.</source>
+        <translation>?? %1 ????? %2?</translation>
+    </message>
+    <message>
+        <source>It will not be possible to retrieve %1.</source>
+        <translation>???? %1?</translation>
+    </message>
+    <message>
+        <source>In an XSL-T pattern, function %1 cannot have a third argument.</source>
+        <translation>? XSL-T ?????? %1 ??????????</translation>
+    </message>
+    <message>
+        <source>The namespace URI in the name for a computed attribute cannot be %1.</source>
+        <translation>??????????????????? %1?</translation>
+    </message>
+    <message>
+        <source>%1 is not a valid target name in a processing instruction. It must be a %2 value, e.g. %3.</source>
+        <translation>%1 ???????????????????? %2 ????? %3?</translation>
+    </message>
+    <message>
+        <source>%1 is an complex type. Casting to complex types is not possible. However, casting to atomic types such as %2 works.</source>
+        <translation>%1 ??????????????????????????? %2 ?????</translation>
+    </message>
+    <message>
+        <source>zero or one</source>
+        <translation>0 ? 1 ?</translation>
+    </message>
+    <message>
+        <source>No operand in an integer division, %1, can be %2.</source>
+        <translation>???????????%1???? %2?</translation>
+    </message>
+    <message>
+        <source>The element with local name %1 does not exist in XSL-T.</source>
+        <translation>????? %1 ???? XSL-T ?????</translation>
+    </message>
+    <message>
+        <source>Two namespace declaration attributes have the same name: %1.</source>
+        <translation>???????????????????%1?</translation>
+    </message>
+    <message>
+        <source>Effective Boolean Value cannot be calculated for a sequence containing two or more atomic values.</source>
+        <translation>??????Effective Boolean?????????????????atomic value?????</translation>
+    </message>
+    <message>
+        <source>%1 is an invalid %2</source>
+        <translation>%1 ????? %2</translation>
+    </message>
+    <message>
+        <source>The first argument to %1 cannot be of type %2. It must be a numeric type, xs:yearMonthDuration or xs:dayTimeDuration.</source>
+        <translation>?? %1 ????????? %2 ???????????xs.yearMonthDuration ? xs.dayTimeDuration?</translation>
+    </message>
+    <message>
+        <source>Division (%1) by zero (%2) is undefined.</source>
+        <translation>?? %1 ????%2????????</translation>
+    </message>
+    <message>
+        <source>No template by name %1 exists.</source>
+        <translation>???? %1 ??????</translation>
+    </message>
+    <message>
+        <source>The attribute %1 must appear on element %2.</source>
+        <translation>?? %1 ????? %2 ????</translation>
+    </message>
+    <message>
+        <source>An attribute by name %1 has already appeared on this element.</source>
+        <translation>?? %1 ???????????</translation>
+    </message>
+    <message>
+        <source>The default collection is undefined</source>
+        <translation>????????</translation>
+    </message>
+    <message>
+        <source>Only the prefix %1 can be bound to %2 and vice versa.</source>
+        <translation>?????? %1 ?? %2 ????????</translation>
+    </message>
+    <message>
+        <source>Value %1 of type %2 exceeds maximum (%3).</source>
+        <translation>?? %2 ??? %1 ???????%3??</translation>
+    </message>
+    <message>
+        <source>Whitespace characters are removed, except when they appear in character classes</source>
+        <translation>???????????????????</translation>
+    </message>
+    <message>
+        <source>Casting to %1 is not possible because it is an abstract type, and can therefore never be instantiated.</source>
+        <translation>????? %1 ??????????????????</translation>
+    </message>
+    <message>
+        <source>Operator %1 cannot be used on type %2.</source>
+        <translation>??? %1 ?????? %2?</translation>
+    </message>
+    <message>
+        <source>The namespace %1 is reserved; therefore user defined functions may not use it. Try the predefined prefix %2, which exists for these cases.</source>
+        <translation>???? %1 ?????????????????????????????? %2?</translation>
+    </message>
+    <message>
+        <source>The target namespace of a %1 cannot be empty.</source>
+        <translation>%1 ?????????????</translation>
+    </message>
+    <message>
+        <source>%1 must be followed by %2 or %3, not at the end of the replacement string.</source>
+        <translation>%1 ?????? %2 ? %3???????????</translation>
+    </message>
+    <message>
+        <source>%1 is an invalid namespace URI.</source>
+        <translation>%1 ????????????</translation>
+    </message>
+    <message>
+        <source>The attribute %1 cannot appear on %2, when it is a child of %3.</source>
+        <translation>?? %1 ????? %2????? %3 ?????</translation>
+    </message>
+    <message>
+        <source>The attribute %1 can only appear on the first %2 element.</source>
+        <translation>?? %1 ?????? %2 ?????</translation>
+    </message>
+    <message>
+        <source>Element %1 must have either a %2-attribute or a sequence constructor.</source>
+        <translation>?? %1 ????????? %2 ?????????</translation>
+    </message>
+    <message>
+        <source>Module imports must occur before function, variable, and option declarations.</source>
+        <translation>????????????????????</translation>
+    </message>
+    <message>
+        <source>Day %1 is outside the range %2..%3.</source>
+        <translation>?? %1 ??? %2 ? %3 ????</translation>
+    </message>
+    <message>
+        <source>%1 contains octets which are disallowed in the requested encoding %2.</source>
+        <translation>%1 ????????? %2 ??????????</translation>
+    </message>
+    <message>
+        <source>When a parameter is required, a default value cannot be supplied through a %1-attribute or a sequence constructor.</source>
+        <translation>????????????? %1 ????????????</translation>
+    </message>
+    <message>
+        <source>In an XSL-T pattern, the first argument to function %1 must be a string literal, when used for matching.</source>
+        <translation>? XSL-T ?????? %1 ???????????????????</translation>
+    </message>
+    <message>
+        <source>Text nodes are not allowed at this location.</source>
+        <translation>???????????</translation>
+    </message>
+    <message>
+        <source>A value of type %1 cannot be a predicate. A predicate must have either a numeric type or an Effective Boolean Value type.</source>
+        <translation>?? %1 ????????predicate????????????????????</translation>
+    </message>
+    <message>
+        <source>%1 is not a valid name for a processing-instruction.</source>
+        <translation>%1 ????????????</translation>
+    </message>
+    <message>
+        <source>%1 was called.</source>
+        <translation>%1 ?????</translation>
+    </message>
+    <message>
+        <source>It&apos;s not possible to add attributes after any other kind of node.</source>
+        <translation>???????????????????</translation>
+    </message>
+    <message>
+        <source>At least one %1-element must occur before %2.</source>
+        <translation>?????? %1 ???? %2 ???</translation>
+    </message>
+    <message>
+        <source>The normalization form %1 is unsupported. The supported forms are %2, %3, %4, and %5, and none, i.e. the empty string (no normalization).</source>
+        <translation>???????? %1??????? %2?%3?%4?%5??????????????????</translation>
+    </message>
+    <message>
+        <source>When casting to %1 or types derived from it, the source value must be of the same type, or it must be a string literal. Type %2 is not allowed.</source>
+        <translation>????? %1 ???????????????????????????? %2 ???????</translation>
+    </message>
+    <message>
+        <source>A parameter in a function cannot be declared to be a tunnel.</source>
+        <translation>???????????????tunnel??</translation>
+    </message>
+    <message>
+        <source>XSL-T attributes on XSL-T elements must be in the null namespace, not in the XSL-T namespace which %1 is.</source>
+        <translation>XSL-T ???? XSL-T ????????null??????????? %1 ? XSL-T ?????</translation>
+    </message>
+    <message>
+        <source>The namespace of a user defined function in a library module must be equivalent to the module namespace. In other words, it should be %1 instead of %2</source>
+        <translation>??????????????????????????????????????? %1 ??? %2</translation>
+    </message>
+    <message>
+        <source>Day %1 is invalid for month %2.</source>
+        <translation>?? %2 ????? %1?</translation>
+    </message>
+    <message>
+        <source>Overflow: Can&apos;t represent date %1.</source>
+        <translation>????????? %1?</translation>
+    </message>
+    <message>
+        <source>In a simplified stylesheet module, attribute %1 must be present.</source>
+        <translation>????????????? %1 ?????</translation>
+    </message>
+    <message>
+        <source>Unknown XSL-T attribute %1.</source>
+        <translation>??? XSL-T ?? %1?</translation>
+    </message>
+    <message>
+        <source>It is not possible to redeclare prefix %1.</source>
+        <translation>????????? %1?</translation>
+    </message>
+    <message>
+        <source>exactly one</source>
+        <translation>????</translation>
+    </message>
+    <message>
+        <source>%1 is an invalid regular expression pattern: %2</source>
+        <translation>%1 ?????????????%2</translation>
+    </message>
+    <message>
+        <source>Element %1 is not allowed at this location.</source>
+        <translation>?? %1 ???????</translation>
+    </message>
+    <message>
+        <source>The Schema Validation Feature is not supported. Hence, %1-expressions may not be used.</source>
+        <translation>??????????%1 ???????</translation>
+    </message>
+    <message>
+        <source>At least one %1 element must appear as child of %2.</source>
+        <translation>%2 ?????????? %1?</translation>
+    </message>
+    <message>
+        <source>This processor is not Schema-aware and therefore %1 cannot be used.</source>
+        <translation>?????? Schema-aware??????? %1?</translation>
+    </message>
+    <message>
+        <source>Attribute %1 cannot appear on the element %2. Allowed is %3, and the standard attributes.</source>
+        <translation>?? %1 ??????? %2???? %3 ???????</translation>
+    </message>
+    <message>
+        <source>Dividing a value of type %1 by %2 (not-a-number) is not allowed.</source>
+        <translation>??? %1 ?? %2???????????</translation>
+    </message>
+    <message>
+        <source>Required cardinality is %1; got cardinality %2.</source>
+        <translation>?????? %1????? %2?</translation>
+    </message>
+    <message>
+        <source>A construct was encountered which only is allowed in XQuery.</source>
+        <translation>?????????????? XQuery ??</translation>
+    </message>
+    <message>
+        <source>No function by name %1 is available.</source>
+        <translation>???? %1 ????</translation>
+    </message>
+    <message>
+        <source>The URI cannot have a fragment</source>
+        <translation>URI ?????</translation>
+    </message>
+    <message>
+        <source>%1 is not an atomic type. Casting is only possible to atomic types.</source>
+        <translation>%1 ?????????????????</translation>
+    </message>
+    <message>
+        <source>The first argument to %1 cannot be of type %2.</source>
+        <translation>?? %1 ????????? %2 ???</translation>
+    </message>
+    <message>
+        <source>The namespace URI must be a constant and cannot use enclosed expressions.</source>
+        <translation>???????????????????????</translation>
+    </message>
+    <message>
+        <source>Prefix %1 is already declared in the prolog.</source>
+        <translation>???? %1 ?? prolog ????</translation>
+    </message>
+    <message>
+        <source>Ambiguous rule match.</source>
+        <translation>?????????</translation>
+    </message>
+    <message>
+        <source>Promoting %1 to %2 may cause loss of precision.</source>
+        <translation>? %1 ??? %2 ?????????</translation>
+    </message>
+    <message>
+        <source>In an XSL-T pattern, only function %1 and %2, not %3, can be used for matching.</source>
+        <translation>? XSL-T ???????? %1?%2 ???????%3 ???</translation>
+    </message>
+    <message>
+        <source>A default namespace declaration must occur before function, variable, and option declarations.</source>
+        <translation>?????????????????????????</translation>
+    </message>
+    <message>
+        <source>Operator %1 cannot be used on atomic values of type %2 and %3.</source>
+        <translation>??? %1 ?????? %2 ? %3 ?????</translation>
+    </message>
+    <message>
+        <source>The module import feature is not supported</source>
+        <translation>?????????</translation>
+    </message>
+    <message>
+        <source>The parameter %1 is passed, but no corresponding %2 exists.</source>
+        <translation>?? %1 ??????????? %2?</translation>
+    </message>
+    <message>
+        <source>A value of type %1 cannot have an Effective Boolean Value.</source>
+        <translation>?? %1 ?????????</translation>
+    </message>
+    <message>
+        <source>The data of a processing instruction cannot contain the string %1</source>
+        <translation>????????????? %1</translation>
+    </message>
+    <message>
+        <source>Time 24:%1:%2.%3 is invalid. Hour is 24, but minutes, seconds, and milliseconds are not all 0; </source>
+        <translation>?? 24:%1:%2.%3 ??????? 24 ??????????? 0; </translation>
+    </message>
+    <message>
+        <source>A template by name %1 has already been declared.</source>
+        <translation>?? %1 ????????</translation>
+    </message>
+    <message>
+        <source>It is not possible to bind to the prefix %1</source>
+        <translation>??????? %1 ??</translation>
+    </message>
+    <message>
+        <source>Value %1 of type %2 is below minimum (%3).</source>
+        <translation>?? %2 ??? %1 ???????%3??</translation>
+    </message>
+    <message>
+        <source>Required type is %1, but %2 was found.</source>
+        <translation>?????? %1???? %2?</translation>
+    </message>
+    <message>
+        <source>%1 is an unsupported encoding.</source>
+        <translation>%1 ??????????</translation>
+    </message>
+    <message>
+        <source>The name of an option must have a prefix. There is no default namespace for options.</source>
+        <translation>????????????????????????</translation>
+    </message>
+    <message>
+        <source>Element %1 must come last.</source>
+        <translation>?? %1 ???????</translation>
+    </message>
+    <message>
+        <source>Attribute %1 cannot appear on the element %2. Allowed is %3, %4, and the standard attributes.</source>
+        <translation>?? %1 ??????? %2???? %3?%4 ???????</translation>
+    </message>
+    <message>
+        <source>No namespace binding exists for the prefix %1 in %2</source>
+        <translation>? %2 ????? %1 ????????</translation>
+    </message>
+    <message>
+        <source>The name %1 does not refer to any schema type.</source>
+        <translation>?? %1 ??????????</translation>
+    </message>
+    <message>
+        <source>Prefix %1 can only be bound to %2 (and it is, in either case, pre-declared).</source>
+        <translation>???? %1 ??? %2 ???????????????</translation>
+    </message>
+    <message>
+        <source>The initialization of variable %1 depends on itself</source>
+        <translation>?? %1 ?????????</translation>
+    </message>
+    <message>
+        <source>An attribute node cannot be a child of a document node. Therefore, the attribute %1 is out of place.</source>
+        <translation>???????????????????? %1 ???????</translation>
+    </message>
+    <message>
+        <source>Month %1 is outside the range %2..%3.</source>
+        <translation>?? %1 ??? %2 ? %3 ????</translation>
+    </message>
+    <message>
+        <source>The name of a variable bound in a for-expression must be different from the positional variable. Hence, the two variables named %1 collide.</source>
+        <translation>? for ??????????????????????????? %1 ???????</translation>
+    </message>
+    <message>
+        <source>No namespace binding exists for the prefix %1</source>
+        <translation>???? %1 ????????</translation>
+    </message>
+    <message>
+        <source>An %1-attribute with value %2 has already been declared.</source>
+        <translation>????? %1 ??? %2?</translation>
+    </message>
+    <message>
+        <source>%1 is not valid as a value of type %2.</source>
+        <translation>%1 ????? %2 ?????</translation>
+    </message>
+    <message>
+        <source>zero or more</source>
+        <translation>0 ???</translation>
+    </message>
+    <message>
+        <source>%1 is not in the in-scope attribute declarations. Note that the schema import feature is not supported.</source>
+        <translation>%1 ??????????????????????</translation>
+    </message>
+    <message>
+        <source>When function %1 is used for matching inside a pattern, the argument must be a variable reference or a string literal.</source>
+        <translation>??? %1 ?????????????????????</translation>
+    </message>
+    <message>
+        <source>%1 is an invalid template mode name.</source>
+        <translation>%1 ????????????</translation>
+    </message>
+    <message>
+        <source>At least one time component must appear after the %1-delimiter.</source>
+        <translation>???? %1 ?????????????</translation>
+    </message>
+    <message>
+        <source>Overflow: Date can&apos;t be represented.</source>
+        <translation>??????????</translation>
+    </message>
+    <message>
+        <source>Operator %1 is not available between atomic values of type %2 and %3.</source>
+        <translation>??? %1 ?????? %2 ? %3 ?????</translation>
+    </message>
+    <message>
+        <source>A zone offset must be in the range %1..%2 inclusive. %3 is out of range.</source>
+        <translation>???????? %1 ? %2 ?????%3 ??????</translation>
+    </message>
+    <message>
+        <source>%1 is not a valid XML 1.0 character.</source>
+        <translation>%1 ????? XML 1.0 ???</translation>
+    </message>
+    <message>
+        <source>The first argument to %1 cannot be of type %2. It must be of type %3, %4, or %5.</source>
+        <translation>?? %1 ????????? %2 ?????? %3?%4 ? %5 ???</translation>
+    </message>
+    <message>
+        <source>%1 is not a whole number of minutes.</source>
+        <translation>%1 ????????</translation>
+    </message>
+    <message>
+        <source>Failure when casting from %1 to %2: %3</source>
+        <translation>? %1 ??? %2 ????%3</translation>
+    </message>
+    <message>
+        <source>It is not possible to cast from %1 to %2.</source>
+        <translation>??? %1 ??? %2?</translation>
+    </message>
+    <message>
+        <source>No variable by name %1 exists</source>
+        <translation>???? %1 ?????</translation>
+    </message>
+    <message>
+        <source>Namespace %1 can only be bound to %2 (and it is, in either case, pre-declared).</source>
+        <translation>???? %1 ??? %2 ???????????????</translation>
+    </message>
+    <message>
+        <source>The second operand in a division, %1, cannot be zero (%2).</source>
+        <translation>???????????? %1 ?????%2??</translation>
+    </message>
+    <message>
+        <source>Only one %1 declaration can occur in the query prolog.</source>
+        <translation>???? %1 ?????????</translation>
+    </message>
+    <message>
+        <source>Element %1 must have at least one of the attributes %2 or %3.</source>
+        <translation>?? %1 ??????? %2 ? %3 ?????</translation>
+    </message>
+    <message>
+        <source>If both values have zone offsets, they must have the same zone offset. %1 and %2 are not the same.</source>
+        <translation>????????????????????????%1 ? %2 ?????</translation>
+    </message>
+    <message>
+        <source>No external functions are supported. All supported functions can be used directly, without first declaring them as external</source>
+        <translation>?????????????????????????????????</translation>
+    </message>
+    <message>
+        <source>The last step in a path must contain either nodes or atomic values. It cannot be a mixture between the two.</source>
+        <translation>?????????????????????????</translation>
+    </message>
+</context>
+<context>
+    <name>QFontDialog</name>
+    <message>
+        <source>&amp;Font</source>
+        <translation>??(&amp;F)</translation>
+    </message>
+    <message>
+        <source>&amp;Size</source>
+        <translation>??(&amp;S)</translation>
+    </message>
+    <message>
+        <source>Sample</source>
+        <translation>??</translation>
+    </message>
+    <message>
+        <source>Font st&amp;yle</source>
+        <translation>????(&amp;Y)</translation>
+    </message>
+    <message>
+        <source>Wr&amp;iting System</source>
+        <translation>????(&amp;I)</translation>
+    </message>
+    <message>
+        <source>Select Font</source>
+        <translation>????</translation>
+    </message>
+    <message>
+        <source>&amp;Underline</source>
+        <translation>??(&amp;U)</translation>
+    </message>
+    <message>
+        <source>Effects</source>
+        <translation>??</translation>
+    </message>
+    <message>
+        <source>Stri&amp;keout</source>
+        <translation>???(&amp;K)</translation>
+    </message>
+</context>
+<context>
+    <name>Q3Wizard</name>
+    <message>
+        <source>&amp;Help</source>
+        <translation>??(&amp;H)</translation>
+    </message>
+    <message>
+        <source>&amp;Cancel</source>
+        <translation>??(&amp;C)</translation>
+    </message>
+    <message>
+        <source>&amp;Finish</source>
+        <translation>??(&amp;F)</translation>
+    </message>
+    <message>
+        <source>&amp;Next &gt;</source>
+        <translation>???(&amp;N)?</translation>
+    </message>
+    <message>
+        <source>&lt; &amp;Back</source>
+        <translation>???(&amp;B)</translation>
+    </message>
+</context>
+<context>
+    <name>QWorkspace</name>
+    <message>
+        <source>&amp;Move</source>
+        <translation>??(&amp;M)</translation>
+    </message>
+    <message>
+        <source>&amp;Size</source>
+        <translation>??(&amp;S)</translation>
+    </message>
+    <message>
+        <source>Close</source>
+        <translation>??</translation>
+    </message>
+    <message>
+        <source>Minimize</source>
+        <translation>???</translation>
+    </message>
+    <message>
+        <source>Stay on &amp;Top</source>
+        <translation>????(&amp;T)</translation>
+    </message>
+    <message>
+        <source>&amp;Close</source>
+        <translation>??(&amp;C)</translation>
+    </message>
+    <message>
+        <source>%1 - [%2]</source>
+        <translation>%1 - [%2]</translation>
+    </message>
+    <message>
+        <source>Sh&amp;ade</source>
+        <translation>??(&amp;A)</translation>
+    </message>
+    <message>
+        <source>&amp;Restore</source>
+        <translation>??(&amp;R)</translation>
+    </message>
+    <message>
+        <source>&amp;Unshade</source>
+        <translation>????(&amp;U)</translation>
+    </message>
+    <message>
+        <source>Mi&amp;nimize</source>
+        <translation>???(&amp;N)</translation>
+    </message>
+    <message>
+        <source>Ma&amp;ximize</source>
+        <translation>???(&amp;X)</translation>
+    </message>
+    <message>
+        <source>Restore Down</source>
+        <translation>????</translation>
+    </message>
+</context>
+<context>
+    <name>QColorDialog</name>
+    <message>
+        <source>&amp;Red:</source>
+        <translation>?(&amp;R):</translation>
+    </message>
+    <message>
+        <source>&amp;Sat:</source>
+        <translation>???(&amp;S):</translation>
+    </message>
+    <message>
+        <source>&amp;Val:</source>
+        <translation>??(&amp;V):</translation>
+    </message>
+    <message>
+        <source>Hu&amp;e:</source>
+        <translation>??(&amp;E):</translation>
+    </message>
+    <message>
+        <source>Select Color</source>
+        <translation>????</translation>
+    </message>
+    <message>
+        <source>&amp;Add to Custom Colors</source>
+        <translation>???????(&amp;A)</translation>
+    </message>
+    <message>
+        <source>Bl&amp;ue:</source>
+        <translation>?(&amp;U):</translation>
+    </message>
+    <message>
+        <source>&amp;Green:</source>
+        <translation>?(&amp;G):</translation>
+    </message>
+    <message>
+        <source>&amp;Basic colors</source>
+        <translation>????(&amp;B)</translation>
+    </message>
+    <message>
+        <source>&amp;Custom colors</source>
+        <translation>????(&amp;C)</translation>
+    </message>
+    <message>
+        <source>A&amp;lpha channel:</source>
+        <translation>Alpha ??(&amp;L):</translation>
+    </message>
+</context>
+<context>
+    <name>QSharedMemory</name>
+    <message>
+        <source>%1: system-imposed size restrictions</source>
+        <translation>%1???????</translation>
+    </message>
+    <message>
+        <source>%1: unix key file doesn&apos;t exists</source>
+        <translation>%1?unix ??????</translation>
+    </message>
+    <message>
+        <source>%1: doesn&apos;t exists</source>
+        <translation>%1????</translation>
+    </message>
+    <message>
+        <source>%1: key is empty</source>
+        <translation>%1??????</translation>
+    </message>
+    <message>
+        <source>%1: key error</source>
+        <translation>%1?????</translation>
+    </message>
+    <message>
+        <source>%1: create size is less then 0</source>
+        <translation>%1??????? 0</translation>
+    </message>
+    <message>
+        <source>%1: already exists</source>
+        <translation>%1????</translation>
+    </message>
+    <message>
+        <source>%1: unknown error %2</source>
+        <translation>%1?????? %2</translation>
+    </message>
+    <message>
+        <source>%1: invalid size</source>
+        <translation>%1???????</translation>
+    </message>
+    <message>
+        <source>%1: unable to make key</source>
+        <translation>%1???????</translation>
+    </message>
+    <message>
+        <source>%1: unable to set key on lock</source>
+        <translation>%1???????</translation>
+    </message>
+    <message>
+        <source>%1: unable to unlock</source>
+        <translation>%1???????</translation>
+    </message>
+    <message>
+        <source>%1: permission denied</source>
+        <translation>%1?????</translation>
+    </message>
+    <message>
+        <source>%1: ftok failed</source>
+        <translation>%1?ftok ??</translation>
+    </message>
+    <message>
+        <source>%1: out of resources</source>
+        <translation>%1?????</translation>
+    </message>
+    <message>
+        <source>%1: not attached</source>
+        <translation>%1????</translation>
+    </message>
+    <message>
+        <source>%1: size query failed</source>
+        <translation>%1???????</translation>
+    </message>
+    <message>
+        <source>%1: unable to lock</source>
+        <translation>%1?????</translation>
+    </message>
+</context>
+<context>
+    <name>QXmlStream</name>
+    <message>
+        <source>Reference to unparsed entity &apos;%1&apos;.</source>
+        <translation>????????? %1?</translation>
+    </message>
+    <message>
+        <source>Unexpected character &apos;%1&apos; in public id literal.</source>
+        <translation>???????????????? %1?</translation>
+    </message>
+    <message>
+        <source>Illegal namespace declaration.</source>
+        <translation>???????????</translation>
+    </message>
+    <message>
+        <source>Invalid XML character.</source>
+        <translation>???? XML ???</translation>
+    </message>
+    <message>
+        <source>Expected character data.</source>
+        <translation>????????</translation>
+    </message>
+    <message>
+        <source>Standalone accepts only yes or no.</source>
+        <translation>??????? yes ? no?</translation>
+    </message>
+    <message>
+        <source>Invalid XML version string.</source>
+        <translation>???? XML ?????</translation>
+    </message>
+    <message>
+        <source>Invalid processing instruction name.</source>
+        <translation>???????????</translation>
+    </message>
+    <message>
+        <source>Namespace prefix &apos;%1&apos; not declared</source>
+        <translation>????????? %1 ???</translation>
+    </message>
+    <message>
+        <source>Entity &apos;%1&apos; not declared.</source>
+        <translation>?? %1 ????</translation>
+    </message>
+    <message>
+        <source>%1 is an invalid processing instruction name.</source>
+        <translation>%1 ????????????</translation>
+    </message>
+    <message>
+        <source>The standalone pseudo attribute must appear after the encoding.</source>
+        <translation>?????????????????</translation>
+    </message>
+    <message>
+        <source>Sequence &apos;]]&gt;&apos; not allowed in content.</source>
+        <translation>?????????? &quot;]]&gt;&quot;?</translation>
+    </message>
+    <message>
+        <source>%1 is an invalid encoding name.</source>
+        <translation>%1 ??????????</translation>
+    </message>
+    <message>
+        <source>, but got &apos;</source>
+        <translation>??????? </translation>
+    </message>
+    <message>
+        <source>Start tag expected.</source>
+        <translation>?????????</translation>
+    </message>
+    <message>
+        <source>Invalid character reference.</source>
+        <translation>?????????</translation>
+    </message>
+    <message>
+        <source>Reference to external entity &apos;%1&apos; in attribute value.</source>
+        <translation>???????????? %1?</translation>
+    </message>
+    <message>
+        <source>Expected </source>
+        <translation>???? </translation>
+    </message>
+    <message>
+        <source>Invalid document.</source>
+        <translation>???????</translation>
+    </message>
+    <message>
+        <source>Opening and ending tag mismatch.</source>
+        <translation>????????????</translation>
+    </message>
+    <message>
+        <source>Encountered incorrectly encoded content.</source>
+        <translation>???????????</translation>
+    </message>
+    <message>
+        <source>Invalid attribute in XML declaration.</source>
+        <translation>XML ???????????</translation>
+    </message>
+    <message>
+        <source>Attribute redefined.</source>
+        <translation>??????</translation>
+    </message>
+    <message>
+        <source>%1 is an invalid PUBLIC identifier.</source>
+        <translation>%1 ????? PUBLIC ????</translation>
+    </message>
+    <message>
+        <source>Extra content at end of document.</source>
+        <translation>???????????</translation>
+    </message>
+    <message>
+        <source>Invalid XML name.</source>
+        <translation>???? XML ???</translation>
+    </message>
+    <message>
+        <source>Premature end of document.</source>
+        <translation>????????</translation>
+    </message>
+    <message>
+        <source>XML declaration not at start of document.</source>
+        <translation>XML ???????????</translation>
+    </message>
+    <message>
+        <source>Recursive entity detected.</source>
+        <translation>????????</translation>
+    </message>
+    <message>
+        <source>Unsupported XML version.</source>
+        <translation>???? XML ???</translation>
+    </message>
+    <message>
+        <source>Unexpected &apos;</source>
+        <translation>???</translation>
+    </message>
+    <message>
+        <source>Invalid entity value.</source>
+        <translation>????????</translation>
+    </message>
+    <message>
+        <source>Encoding %1 is unsupported</source>
+        <translation>?? %1 ???</translation>
+    </message>
+    <message>
+        <source>NDATA in parameter entity declaration.</source>
+        <translation>???????? NDATA?</translation>
+    </message>
+</context>
+<context>
+    <name>QProcess</name>
+    <message>
+        <source>Error writing to process</source>
+        <translation>?????????</translation>
+    </message>
+    <message>
+        <source>Resource error (fork failure): %1</source>
+        <translation>?????fork ????%1</translation>
+    </message>
+    <message>
+        <source>Error reading from process</source>
+        <translation>??????????</translation>
+    </message>
+    <message>
+        <source>Process failed to start</source>
+        <translation>??????</translation>
+    </message>
+    <message>
+        <source>Could not open input redirection for reading</source>
+        <translation>???????????</translation>
+    </message>
+    <message>
+        <source>Could not open output redirection for writing</source>
+        <translation>???????????</translation>
+    </message>
+    <message>
+        <source>Process operation timed out</source>
+        <translation>??????</translation>
+    </message>
+    <message>
+        <source>Process crashed</source>
+        <translation>?????</translation>
+    </message>
+</context>
+<context>
+    <name>QNativeSocketEngine</name>
+    <message>
+        <source>The proxy type is invalid for this operation</source>
+        <translation>??????????????</translation>
+    </message>
+    <message>
+        <source>Network operation timed out</source>
+        <translation>??????</translation>
+    </message>
+    <message>
+        <source>The remote host closed the connection</source>
+        <translation>?????????</translation>
+    </message>
+    <message>
+        <source>Invalid socket descriptor</source>
+        <translation>???? socket ???</translation>
+    </message>
+    <message>
+        <source>Host unreachable</source>
+        <translation>???????</translation>
+    </message>
+    <message>
+        <source>Protocol type not supported</source>
+        <translation>???????</translation>
+    </message>
+    <message>
+        <source>Datagram was too large to send</source>
+        <translation>????????</translation>
+    </message>
+    <message>
+        <source>Attempt to use IPv6 socket on a platform with no IPv6 support</source>
+        <translation>????? IPv6 ???????? IPv6 socket</translation>
+    </message>
+    <message>
+        <source>Unable to receive a message</source>
+        <translation>??????</translation>
+    </message>
+    <message>
+        <source>Permission denied</source>
+        <translation>????</translation>
+    </message>
+    <message>
+        <source>Connection refused</source>
+        <translation>????</translation>
+    </message>
+    <message>
+        <source>Unable to write</source>
+        <translation>????</translation>
+    </message>
+    <message>
+        <source>Another socket is already listening on the same port</source>
+        <translation>??? socket ???????????</translation>
+    </message>
+    <message>
+        <source>Unable to send a message</source>
+        <translation>??????</translation>
+    </message>
+    <message>
+        <source>The bound address is already in use</source>
+        <translation>???????????</translation>
+    </message>
+    <message>
+        <source>Connection timed out</source>
+        <translation>????</translation>
+    </message>
+    <message>
+        <source>Network error</source>
+        <translation>????</translation>
+    </message>
+    <message>
+        <source>Unsupported socket operation</source>
+        <translation>???? socket ??</translation>
+    </message>
+    <message>
+        <source>Operation on non-socket</source>
+        <translation>?? socket ??</translation>
+    </message>
+    <message>
+        <source>Unable to initialize broadcast socket</source>
+        <translation>??????? socket</translation>
+    </message>
+    <message>
+        <source>Unknown error</source>
+        <translation>?????</translation>
+    </message>
+    <message>
+        <source>Unable to initialize non-blocking socket</source>
+        <translation>????????? socket</translation>
+    </message>
+    <message>
+        <source>The address is protected</source>
+        <translation>???????</translation>
+    </message>
+    <message>
+        <source>Network unreachable</source>
+        <translation>??????</translation>
+    </message>
+    <message>
+        <source>The address is not available</source>
+        <translation>??????</translation>
+    </message>
+    <message>
+        <source>Out of resources</source>
+        <translation>????</translation>
+    </message>
+</context>
+<context>
+    <name>QNetworkAccessFtpBackend</name>
+    <message>
+        <source>No suitable proxy found</source>
+        <translation>???????????</translation>
+    </message>
+    <message>
+        <source>Error while downloading %1: %2</source>
+        <translation>?? %1 ??????%2</translation>
+    </message>
+    <message>
+        <source>Error while uploading %1: %2</source>
+        <translation>?? %1 ??????%2</translation>
+    </message>
+    <message>
+        <source>Cannot open %1: is a directory</source>
+        <translation>???? %1??????</translation>
+    </message>
+    <message>
+        <source>Logging in to %1 failed: authentication required</source>
+        <translation>?? %1 ???????</translation>
+    </message>
+</context>
+<context>
+    <name>QNetworkAccessHttpBackend</name>
+    <message>
+        <source>No suitable proxy found</source>
+        <translation>???????????</translation>
+    </message>
+</context>
+<context>
+    <name>QCheckBox</name>
+    <message>
+        <source>Check</source>
+        <translation>??</translation>
+    </message>
+    <message>
+        <source>Toggle</source>
+        <translation>??</translation>
+    </message>
+    <message>
+        <source>Uncheck</source>
+        <translation>????</translation>
+    </message>
+</context>
+<context>
+    <name>QRadioButton</name>
+    <message>
+        <source>Check</source>
+        <translation>??</translation>
+    </message>
+</context>
+<context>
+    <name>Q3TitleBar</name>
+    <message>
+        <source>Close</source>
+        <translation>??</translation>
+    </message>
+    <message>
+        <source>Minimize</source>
+        <translation>???</translation>
+    </message>
+    <message>
+        <source>Puts a minimized back to normal</source>
+        <translation>???????????</translation>
+    </message>
+    <message>
+        <source>Displays the name of the window and contains controls to manipulate it</source>
+        <translation>??????????????????</translation>
+    </message>
+    <message>
+        <source>Makes the window full screen</source>
+        <translation>?????????</translation>
+    </message>
+    <message>
+        <source>System</source>
+        <translation>??</translation>
+    </message>
+    <message>
+        <source>Maximize</source>
+        <translation>???</translation>
+    </message>
+    <message>
+        <source>Contains commands to manipulate the window</source>
+        <translation>???????????</translation>
+    </message>
+    <message>
+        <source>Restore up</source>
+        <translation>????</translation>
+    </message>
+    <message>
+        <source>Closes the window</source>
+        <translation>????</translation>
+    </message>
+    <message>
+        <source>Puts a maximized window back to normal</source>
+        <translation>???????????</translation>
+    </message>
+    <message>
+        <source>Moves the window out of the way</source>
+        <translation>?????</translation>
+    </message>
+    <message>
+        <source>Restore down</source>
+        <translation>????</translation>
+    </message>
+</context>
+<context>
+    <name>Phonon::</name>
+    <message>
+        <source>Games</source>
+        <translation>??</translation>
+    </message>
+    <message>
+        <source>Music</source>
+        <translation>??</translation>
+    </message>
+    <message>
+        <source>Video</source>
+        <translation>??</translation>
+    </message>
+    <message>
+        <source>Communication</source>
+        <translation>??</translation>
+    </message>
+    <message>
+        <source>Accessibility</source>
+        <translation>????</translation>
+    </message>
+    <message>
+        <source>Notifications</source>
+        <translation>??</translation>
+    </message>
+</context>
+<context>
+    <name>VolumeSlider</name>
+    <message>
+        <source>Muted</source>
+        <translation>??</translation>
+    </message>
+    <message>
+        <source>Volume: %1%</source>
+        <translation>???%1%</translation>
+    </message>
+</context>
+<context>
+    <name>Q3LocalFs</name>
+    <message>
+        <source>Could not open
+%1</source>
+        <translation>????
+%1</translation>
+    </message>
+    <message>
+        <source>Could not remove file or directory
+%1</source>
+        <translation>??????
+%1</translation>
+    </message>
+    <message>
+        <source>Could not create directory
+%1</source>
+        <translation>??????
+%1</translation>
+    </message>
+    <message>
+        <source>Could not read directory
+%1</source>
+        <translation>??????
+%1</translation>
+    </message>
+    <message>
+        <source>Could not rename
+%1
+to
+%2</source>
+        <translation>???
+%1
+?????
+%2</translation>
+    </message>
+    <message>
+        <source>Could not write
+%1</source>
+        <translation>????
+%1</translation>
+    </message>
+</context>
+<context>
+    <name>QDial</name>
+    <message>
+        <source>QDial</source>
+        <translation>QDial</translation>
+    </message>
+    <message>
+        <source>SliderHandle</source>
+        <translation>SliderHandle</translation>
+    </message>
+    <message>
+        <source>SpeedoMeter</source>
+        <translation>SpeedoMeter</translation>
+    </message>
+</context>
+<context>
+    <name>QSocks5SocketEngine</name>
+    <message>
+        <source>Network operation timed out</source>
+        <translation>??????</translation>
+    </message>
+    <message>
+        <source>Connection to proxy closed prematurely</source>
+        <translation>?????????????</translation>
+    </message>
+    <message>
+        <source>Proxy authentication failed: %1</source>
+        <translation>??????????%1</translation>
+    </message>
+    <message>
+        <source>Proxy authentication failed</source>
+        <translation>?????????</translation>
+    </message>
+    <message>
+        <source>General SOCKSv5 server failure</source>
+        <translation>??? SOCKSv5 ?????</translation>
+    </message>
+    <message>
+        <source>Unknown SOCKSv5 proxy error code 0x%1</source>
+        <translation>??? SOCKSv5 ????????? 0x%1</translation>
+    </message>
+    <message>
+        <source>Connection not allowed by SOCKSv5 server</source>
+        <translation>???? SOCKSv5 ?????</translation>
+    </message>
+    <message>
+        <source>SOCKSv5 command not supported</source>
+        <translation>SOCKSv5 ??????</translation>
+    </message>
+    <message>
+        <source>Connection to proxy timed out</source>
+        <translation>?????????</translation>
+    </message>
+    <message>
+        <source>Proxy host not found</source>
+        <translation>????????</translation>
+    </message>
+    <message>
+        <source>TTL expired</source>
+        <translation>TTL ??</translation>
+    </message>
+    <message>
+        <source>Address type not supported</source>
+        <translation>????????</translation>
+    </message>
+    <message>
+        <source>Connection to proxy refused</source>
+        <translation>?????????</translation>
+    </message>
+    <message>
+        <source>SOCKS version 5 protocol error</source>
+        <translation>SOCKS 5 ?????</translation>
+    </message>
+</context>
+<context>
+    <name>QWhatsThisAction</name>
+    <message>
+        <source>What&apos;s This?</source>
+        <translation>?????</translation>
+    </message>
+</context>
+<context>
+    <name>Q3UrlOperator</name>
+    <message>
+        <source>The protocol `%1&apos; does not support getting files</source>
+        <translation>?? %1 ???????</translation>
+    </message>
+    <message>
+        <source>The protocol `%1&apos; does not support renaming files or directories</source>
+        <translation>?? %1 ????????????</translation>
+    </message>
+    <message>
+        <source>The protocol `%1&apos; does not support listing directories</source>
+        <translation>?? %1 ???????</translation>
+    </message>
+    <message>
+        <source>(unknown)</source>
+        <translation>????</translation>
+    </message>
+    <message>
+        <source>The protocol `%1&apos; does not support removing files or directories</source>
+        <translation>?? %1 ??????????</translation>
+    </message>
+    <message>
+        <source>The protocol `%1&apos; does not support putting files</source>
+        <translation>?? %1 ???????</translation>
+    </message>
+    <message>
+        <source>The protocol `%1&apos; is not supported</source>
+        <translation>?? %1 ???</translation>
+    </message>
+    <message>
+        <source>The protocol `%1&apos; does not support copying or moving files or directories</source>
+        <translation>?? %1 ?????????????</translation>
+    </message>
+    <message>
+        <source>The protocol `%1&apos; does not support creating new directories</source>
+        <translation>?? %1 ????????</translation>
+    </message>
+</context>
+<context>
+    <name>QFtp</name>
+    <message>
+        <source>Listing directory failed:
+%1</source>
+        <translation>????????
+%1</translation>
+    </message>
+    <message>
+        <source>Creating directory failed:
+%1</source>
+        <translation>????????
+%1</translation>
+    </message>
+    <message>
+        <source>Not connected</source>
+        <translation>???</translation>
+    </message>
+    <message>
+        <source>Connection refused for data connection</source>
+        <translation>??????</translation>
+    </message>
+    <message>
+        <source>Login failed:
+%1</source>
+        <translation>?????
+%1</translation>
+    </message>
+    <message>
+        <source>Downloading file failed:
+%1</source>
+        <translation>????????
+%1</translation>
+    </message>
+    <message>
+        <source>Connected to host</source>
+        <translation>??????</translation>
+    </message>
+    <message>
+        <source>Connection timed out to host %1</source>
+        <translation>????? %1 ??</translation>
+    </message>
+    <message>
+        <source>Connected to host %1</source>
+        <translation>?????? %1</translation>
+    </message>
+    <message>
+        <source>Connecting to host failed:
+%1</source>
+        <translation>????????
+%1</translation>
+    </message>
+    <message>
+        <source>Host %1 not found</source>
+        <translation>????? %1</translation>
+    </message>
+    <message>
+        <source>Uploading file failed:
+%1</source>
+        <translation>????????
+%1</translation>
+    </message>
+    <message>
+        <source>Changing directory failed:
+%1</source>
+        <translation>????????
+%1</translation>
+    </message>
+    <message>
+        <source>Host found</source>
+        <translation>????</translation>
+    </message>
+    <message>
+        <source>Removing directory failed:
+%1</source>
+        <translation>????????
+%1</translation>
+    </message>
+    <message>
+        <source>Connection refused to host %1</source>
+        <translation>????? %1 ??</translation>
+    </message>
+    <message>
+        <source>Connection to %1 closed</source>
+        <translation>? %1 ??????</translation>
+    </message>
+    <message>
+        <source>Removing file failed:
+%1</source>
+        <translation>????????
+%1</translation>
+    </message>
+    <message>
+        <source>Host %1 found</source>
+        <translation>???? %1</translation>
+    </message>
+    <message>
+        <source>Unknown error</source>
+        <translation>?????</translation>
+    </message>
+    <message>
+        <source>Connection closed</source>
+        <translation>?????</translation>
+    </message>
+</context>
+<context>
+    <name>QDB2Driver</name>
+    <message>
+        <source>Unable to commit transaction</source>
+        <translation>??????</translation>
+    </message>
+    <message>
+        <source>Unable to set autocommit</source>
+        <translation>????????</translation>
+    </message>
+    <message>
+        <source>Unable to connect</source>
+        <translation>????</translation>
+    </message>
+    <message>
+        <source>Unable to rollback transaction</source>
+        <translation>??????</translation>
+    </message>
+</context>
+<context>
+    <name>QIBaseDriver</name>
+    <message>
+        <source>Unable to commit transaction</source>
+        <translation>??????</translation>
+    </message>
+    <message>
+        <source>Could not start transaction</source>
+        <translation>??????</translation>
+    </message>
+    <message>
+        <source>Error opening database</source>
+        <translation>?????????</translation>
+    </message>
+    <message>
+        <source>Unable to rollback transaction</source>
+        <translation>??????</translation>
+    </message>
+</context>
+<context>
+    <name>QIBaseResult</name>
+    <message>
+        <source>Unable to commit transaction</source>
+        <translation>??????</translation>
+    </message>
+    <message>
+        <source>Unable to open BLOB</source>
+        <translation>???? BLOB</translation>
+    </message>
+    <message>
+        <source>Could not describe statement</source>
+        <translation>??????</translation>
+    </message>
+    <message>
+        <source>Could not describe input statement</source>
+        <translation>????????</translation>
+    </message>
+    <message>
+        <source>Could not allocate statement</source>
+        <translation>??????</translation>
+    </message>
+    <message>
+        <source>Unable to write BLOB</source>
+        <translation>???? BLOB</translation>
+    </message>
+    <message>
+        <source>Could not start transaction</source>
+        <translation>??????</translation>
+    </message>
+    <message>
+        <source>Unable to close statement</source>
+        <translation>??????</translation>
+    </message>
+    <message>
+        <source>Could not get query info</source>
+        <translation>????????</translation>
+    </message>
+    <message>
+        <source>Could not find array</source>
+        <translation>?????</translation>
+    </message>
+    <message>
+        <source>Could not get array data</source>
+        <translation>????????</translation>
+    </message>
+    <message>
+        <source>Unable to execute query</source>
+        <translation>??????</translation>
+    </message>
+    <message>
+        <source>Could not prepare statement</source>
+        <translation>??????</translation>
+    </message>
+    <message>
+        <source>Could not fetch next item</source>
+        <translation>?????????</translation>
+    </message>
+    <message>
+        <source>Could not get statement info</source>
+        <translation>????????</translation>
+    </message>
+    <message>
+        <source>Unable to create BLOB</source>
+        <translation>???? BLOB</translation>
+    </message>
+    <message>
+        <source>Unable to read BLOB</source>
+        <translation>???? BLOB</translation>
+    </message>
+</context>
+<context>
+    <name>QMYSQLDriver</name>
+    <message>
+        <source>Unable to commit transaction</source>
+        <translation>??????</translation>
+    </message>
+    <message>
+        <source>Unable to open database &apos;</source>
+        <translation>???????</translation>
+    </message>
+    <message>
+        <source>Unable to connect</source>
+        <translation>????</translation>
+    </message>
+    <message>
+        <source>Unable to rollback transaction</source>
+        <translation>??????</translation>
+    </message>
+    <message>
+        <source>Unable to begin transaction</source>
+        <translation>??????</translation>
+    </message>
+</context>
+<context>
+    <name>QOCIDriver</name>
+    <message>
+        <source>Unable to commit transaction</source>
+        <translation>??????</translation>
+    </message>
+    <message>
+        <source>Unable to initialize</source>
+        <translation>?????</translation>
+    </message>
+    <message>
+        <source>Unable to logon</source>
+        <translation>????</translation>
+    </message>
+    <message>
+        <source>Unable to rollback transaction</source>
+        <translation>??????</translation>
+    </message>
+    <message>
+        <source>Unable to begin transaction</source>
+        <translation>??????</translation>
+    </message>
+</context>
+<context>
+    <name>QODBCDriver</name>
+    <message>
+        <source>Unable to commit transaction</source>
+        <translation>??????</translation>
+    </message>
+    <message>
+        <source>Unable to enable autocommit</source>
+        <translation>??????????</translation>
+    </message>
+    <message>
+        <source>Unable to connect - Driver doesn&apos;t support all needed functionality</source>
+        <translation>????????????????????</translation>
+    </message>
+    <message>
+        <source>Unable to disable autocommit</source>
+        <translation>??????????</translation>
+    </message>
+    <message>
+        <source>Unable to connect</source>
+        <translation>????</translation>
+    </message>
+    <message>
+        <source>Unable to rollback transaction</source>
+        <translation>??????</translation>
+    </message>
+</context>
+<context>
+    <name>QSQLite2Driver</name>
+    <message>
+        <source>Unable to commit transaction</source>
+        <translation>??????</translation>
+    </message>
+    <message>
+        <source>Error to open database</source>
+        <translation>??????????</translation>
+    </message>
+    <message>
+        <source>Unable to rollback Transaction</source>
+        <translation>??????</translation>
+    </message>
+    <message>
+        <source>Unable to begin transaction</source>
+        <translation>??????</translation>
+    </message>
+</context>
+<context>
+    <name>QSQLiteDriver</name>
+    <message>
+        <source>Unable to commit transaction</source>
+        <translation>??????</translation>
+    </message>
+    <message>
+        <source>Error closing database</source>
+        <translation>?????????</translation>
+    </message>
+    <message>
+        <source>Error opening database</source>
+        <translation>?????????</translation>
+    </message>
+    <message>
+        <source>Unable to rollback transaction</source>
+        <translation>??????</translation>
+    </message>
+    <message>
+        <source>Unable to begin transaction</source>
+        <translation>??????</translation>
+    </message>
+</context>
+<context>
+    <name>QAbstractSocket</name>
+    <message>
+        <source>Host not found</source>
+        <translation>?????</translation>
+    </message>
+    <message>
+        <source>Connection refused</source>
+        <translation>????</translation>
+    </message>
+    <message>
+        <source>Connection timed out</source>
+        <translation>????</translation>
+    </message>
+    <message>
+        <source>Socket is not connected</source>
+        <translation>Socket ???</translation>
+    </message>
+    <message>
+        <source>Socket operation timed out</source>
+        <translation>Socket ????</translation>
+    </message>
+    <message>
+        <source>Network unreachable</source>
+        <translation>??????</translation>
+    </message>
+    <message>
+        <source>Operation on socket is not supported</source>
+        <translation>Socket ???????</translation>
+    </message>
+</context>
+<context>
+    <name>QHostInfoAgent</name>
+    <message>
+        <source>Host not found</source>
+        <translation>?????</translation>
+    </message>
+    <message>
+        <source>Unknown address type</source>
+        <translation>???????</translation>
+    </message>
+    <message>
+        <source>Unknown error</source>
+        <translation>?????</translation>
+    </message>
+</context>
+<context>
+    <name>Phonon::Gstreamer::MediaObject</name>
+    <message>
+        <source>Could not open media source.</source>
+        <translation>?????????</translation>
+    </message>
+    <message>
+        <source>Could not decode media source.</source>
+        <translation>?????????</translation>
+    </message>
+    <message>
+        <source>Invalid source type.</source>
+        <translation>?????????</translation>
+    </message>
+    <message>
+        <source>Cannot start playback. 
+
+Check your Gstreamer installation and make sure you 
+have libgstreamer-plugins-base installed.</source>
+        <translation>???????
+
+????? Gstreamer ??????????
+libgstreamer-plugins-base ???</translation>
+    </message>
+    <message>
+        <source>Could not open audio device. The device is already in use.</source>
+        <translation>?????????????????</translation>
+    </message>
+    <message>
+        <source>A required codec is missing. You need to install the following codec(s) to play this content: %0</source>
+        <translation>????????????????????????????%0</translation>
+    </message>
+    <message>
+        <source>Could not locate media source.</source>
+        <translation>?????????</translation>
+    </message>
+</context>
+<context>
+    <name>QLibrary</name>
+    <message>
+        <source>Could not unmap &apos;%1&apos;: %2</source>
+        <translation>?? unmap &apos;%1&apos;?%2</translation>
+    </message>
+    <message>
+        <source>Cannot unload library %1: %2</source>
+        <translation>??????? %1?%2</translation>
+    </message>
+    <message>
+        <source>Cannot load library %1: %2</source>
+        <translation>??????? %1?%2</translation>
+    </message>
+    <message>
+        <source>The plugin &apos;%1&apos; uses incompatible Qt library. (%2.%3.%4) [%5]</source>
+        <translation>???? %1 ?????? Qt ????%2.%3.%4??%5?</translation>
+    </message>
+    <message>
+        <source>Cannot resolve symbol &quot;%1&quot; in %2: %3</source>
+        <translation>???? %2 ???? %1?%3</translation>
+    </message>
+    <message>
+        <source>Plugin verification data mismatch in &apos;%1&apos;</source>
+        <translation>? %1 ?????????????</translation>
+    </message>
+    <message>
+        <source>The plugin &apos;%1&apos; uses incompatible Qt library. (Cannot mix debug and release libraries.)</source>
+        <translation>???? %1 ?????? Qt ????????????????????????</translation>
+    </message>
+    <message>
+        <source>The file &apos;%1&apos; is not a valid Qt plugin.</source>
+        <translation>?? %1 ????? Qt ?????</translation>
+    </message>
+    <message>
+        <source>The shared library was not found.</source>
+        <translation>?????????</translation>
+    </message>
+    <message>
+        <source>Unknown error</source>
+        <translation>?????</translation>
+    </message>
+    <message>
+        <source>The plugin &apos;%1&apos; uses incompatible Qt library. Expected build key &quot;%2&quot;, got &quot;%3&quot;</source>
+        <translation>???? %1 ?????? Qt ????????? %2???? %3</translation>
+    </message>
+    <message>
+        <source>Could not mmap &apos;%1&apos;: %2</source>
+        <translation>?? mmap &apos;%1&apos;?%2</translation>
+    </message>
+</context>
+<context>
+    <name>QHttp</name>
+    <message>
+        <source>Connection refused (or timed out)</source>
+        <translation>???????????</translation>
+    </message>
+    <message>
+        <source>Data corrupted</source>
+        <translation>?????</translation>
+    </message>
+    <message>
+        <source>Connected to host</source>
+        <translation>??????</translation>
+    </message>
+    <message>
+        <source>Connected to host %1</source>
+        <translation>?????? %1</translation>
+    </message>
+    <message>
+        <source>Host %1 not found</source>
+        <translation>????? %1</translation>
+    </message>
+    <message>
+        <source>Host requires authentication</source>
+        <translation>??????</translation>
+    </message>
+    <message>
+        <source>Error writing response to device</source>
+        <translation>????????????</translation>
+    </message>
+    <message>
+        <source>HTTPS connection requested but SSL support not compiled in</source>
+        <translation>HTTPS ????? SSL ????????</translation>
+    </message>
+    <message>
+        <source>Host found</source>
+        <translation>????</translation>
+    </message>
+    <message>
+        <source>Connection refused</source>
+        <translation>????</translation>
+    </message>
+    <message>
+        <source>Proxy authentication required</source>
+        <translation>?????????</translation>
+    </message>
+    <message>
+        <source>Unknown protocol specified</source>
+        <translation>????????</translation>
+    </message>
+    <message>
+        <source>HTTP request failed</source>
+        <translation>HTTP ????</translation>
+    </message>
+    <message>
+        <source>Proxy requires authentication</source>
+        <translation>?????????</translation>
+    </message>
+    <message>
+        <source>Authentication required</source>
+        <translation>????</translation>
+    </message>
+    <message>
+        <source>SSL handshake failed</source>
+        <translation>SSL ????</translation>
+    </message>
+    <message>
+        <source>Connection to %1 closed</source>
+        <translation>? %1 ??????</translation>
+    </message>
+    <message>
+        <source>Invalid HTTP chunked body</source>
+        <translation>???? HTTP ????</translation>
+    </message>
+    <message>
+        <source>Host %1 found</source>
+        <translation>???? %1</translation>
+    </message>
+    <message>
+        <source>Wrong content length</source>
+        <translation>???????</translation>
+    </message>
+    <message>
+        <source>Unknown error</source>
+        <translation>?????</translation>
+    </message>
+    <message>
+        <source>Invalid HTTP response header</source>
+        <translation>???? HTTP ????</translation>
+    </message>
+    <message>
+        <source>Connection closed</source>
+        <translation>?????</translation>
+    </message>
+    <message>
+        <source>No server set to connect to</source>
+        <translation>?????????????</translation>
+    </message>
+    <message>
+        <source>Server closed connection unexpectedly</source>
+        <translation>??????????</translation>
+    </message>
+    <message>
+        <source>Request aborted</source>
+        <translation>????</translation>
+    </message>
+</context>
+<context>
+    <name>QXml</name>
+    <message>
+        <source>unparsed entity reference in wrong context</source>
+        <translation>????????????????</translation>
+    </message>
+    <message>
+        <source>external parsed general entity reference not allowed in DTD</source>
+        <translation>? DTD ???????????????</translation>
+    </message>
+    <message>
+        <source>wrong value for standalone declaration</source>
+        <translation>?????????</translation>
+    </message>
+    <message>
+        <source>encoding declaration or standalone declaration expected while reading the XML declaration</source>
+        <translation>?? XML ??????????????</translation>
+    </message>
+    <message>
+        <source>no error occurred</source>
+        <translation>??????</translation>
+    </message>
+    <message>
+        <source>error occurred while parsing reference</source>
+        <translation>?????????</translation>
+    </message>
+    <message>
+        <source>standalone declaration expected while reading the XML declaration</source>
+        <translation>?? XML ?????????</translation>
+    </message>
+    <message>
+        <source>invalid name for processing instruction</source>
+        <translation>???????????</translation>
+    </message>
+    <message>
+        <source>error triggered by consumer</source>
+        <translation>???????</translation>
+    </message>
+    <message>
+        <source>error occurred while parsing element</source>
+        <translation>?????????</translation>
+    </message>
+    <message>
+        <source>unexpected character</source>
+        <translation>??????</translation>
+    </message>
+    <message>
+        <source>tag mismatch</source>
+        <translation>?????</translation>
+    </message>
+    <message>
+        <source>error occurred while parsing content</source>
+        <translation>?????????</translation>
+    </message>
+    <message>
+        <source>error occurred while parsing comment</source>
+        <translation>?????????</translation>
+    </message>
+    <message>
+        <source>internal general entity reference not allowed in DTD</source>
+        <translation>? DTD ?????????????</translation>
+    </message>
+    <message>
+        <source>recursive entities</source>
+        <translation>?????</translation>
+    </message>
+    <message>
+        <source>more than one document type definition</source>
+        <translation>????????????</translation>
+    </message>
+    <message>
+        <source>version expected while reading the XML declaration</source>
+        <translation>?? XML ????????</translation>
+    </message>
+    <message>
+        <source>letter is expected</source>
+        <translation>??????</translation>
+    </message>
+    <message>
+        <source>unexpected end of file</source>
+        <translation>?????????</translation>
+    </message>
+    <message>
+        <source>external parsed general entity reference not allowed in attribute value</source>
+        <translation>???????????????????</translation>
+    </message>
+    <message>
+        <source>error in the text declaration of an external entity</source>
+        <translation>??????????????</translation>
+    </message>
+    <message>
+        <source>error occurred while parsing document type definition</source>
+        <translation>?????????????</translation>
+    </message>
+</context>
+<context>
+    <name>QSystemSemaphore</name>
+    <message>
+        <source>%1: does not exist</source>
+        <translation>%1????</translation>
+    </message>
+    <message>
+        <source>%1: already exists</source>
+        <translation>%1????</translation>
+    </message>
+    <message>
+        <source>%1: unknown error %2</source>
+        <translation>%1?????? %2</translation>
+    </message>
+    <message>
+        <source>%1: permission denied</source>
+        <translation>%1?????</translation>
+    </message>
+    <message>
+        <source>%1: out of resources</source>
+        <translation>%1?????</translation>
+    </message>
+</context>
+<context>
+    <name>QSQLiteResult</name>
+    <message>
+        <source>Unable to fetch row</source>
+        <translation>?????</translation>
+    </message>
+    <message>
+        <source>No query</source>
+        <translation>????</translation>
+    </message>
+    <message>
+        <source>Unable to execute statement</source>
+        <translation>??????</translation>
+    </message>
+    <message>
+        <source>Unable to bind parameters</source>
+        <translation>??????</translation>
+    </message>
+    <message>
+        <source>Unable to reset statement</source>
+        <translation>??????</translation>
+    </message>
+    <message>
+        <source>Parameter count mismatch</source>
+        <translation>???????</translation>
+    </message>
+</context>
+<context>
+    <name>QApplication</name>
+    <message>
+        <source>Activates the program&apos;s main window</source>
+        <translation>????????</translation>
+    </message>
+    <message>
+        <source>QT_LAYOUT_DIRECTION</source>
+        <translation>LTR</translation>
+    </message>
+    <message>
+        <source>Activate</source>
+        <translation>??</translation>
+    </message>
+    <message>
+        <source>Executable &apos;%1&apos; requires Qt %2, found Qt %3.</source>
+        <translation>??? %1 ?? Qt %2????? Qt %3?</translation>
+    </message>
+    <message>
+        <source>Incompatible Qt Library Error</source>
+        <translation>Qt ?????????</translation>
+    </message>
+</context>
+<context>
+    <name>QUnicodeControlCharacterMenu</name>
+    <message>
+        <source>RLE Start of right-to-left embedding</source>
+        <translation>RLE ???????</translation>
+    </message>
+    <message>
+        <source>ZWSP Zero width space</source>
+        <translation>ZWSP ?????</translation>
+    </message>
+    <message>
+        <source>Insert Unicode control character</source>
+        <translation>?????????</translation>
+    </message>
+    <message>
+        <source>LRO Start of left-to-right override</source>
+        <translation>LRO ???????</translation>
+    </message>
+    <message>
+        <source>LRE Start of left-to-right embedding</source>
+        <translation>LRE ???????</translation>
+    </message>
+    <message>
+        <source>RLM Right-to-left mark</source>
+        <translation>RLM ?????</translation>
+    </message>
+    <message>
+        <source>PDF Pop directional formatting</source>
+        <translation>PDF ??????</translation>
+    </message>
+    <message>
+        <source>ZWNJ Zero width non-joiner</source>
+        <translation>ZWNJ ???????</translation>
+    </message>
+    <message>
+        <source>RLO Start of right-to-left override</source>
+        <translation>RLO ???????</translation>
+    </message>
+    <message>
+        <source>ZWJ Zero width joiner</source>
+        <translation>ZWJ ??????</translation>
+    </message>
+    <message>
+        <source>LRM Left-to-right mark</source>
+        <translation>LRM ?????</translation>
+    </message>
+</context>
+<context>
+    <name>QWebFrame</name>
+    <message>
+        <source>Request blocked</source>
+        <translation>??????</translation>
+    </message>
+    <message>
+        <source>Request cancelled</source>
+        <translation>?????</translation>
+    </message>
+    <message>
+        <source>Cannot show URL</source>
+        <translation>??????</translation>
+    </message>
+    <message>
+        <source>Frame load interruped by policy change</source>
+        <translation>????????????</translation>
+    </message>
+    <message>
+        <source>File does not exist</source>
+        <translation>?????</translation>
+    </message>
+    <message>
+        <source>Cannot show mimetype</source>
+        <translation>???? MIME ??</translation>
+    </message>
+</context>
+<context>
+    <name>QRegExp</name>
+    <message>
+        <source>bad lookahead syntax</source>
+        <translation>??? lookahead ??</translation>
+    </message>
+    <message>
+        <source>no error occurred</source>
+        <translation>??????</translation>
+    </message>
+    <message>
+        <source>missing left delim</source>
+        <translation>????????</translation>
+    </message>
+    <message>
+        <source>bad char class syntax</source>
+        <translation>?????????</translation>
+    </message>
+    <message>
+        <source>disabled feature used</source>
+        <translation>????????</translation>
+    </message>
+    <message>
+        <source>invalid octal value</source>
+        <translation>????????</translation>
+    </message>
+    <message>
+        <source>bad repetition syntax</source>
+        <translation>???????</translation>
+    </message>
+    <message>
+        <source>met internal limit</source>
+        <translation>??????</translation>
+    </message>
+    <message>
+        <source>unexpected end</source>
+        <translation>???????</translation>
+    </message>
+</context>
+<context>
+    <name>QHttpSocketEngine</name>
+    <message>
+        <source>Proxy connection refused</source>
+        <translation>?????????</translation>
+    </message>
+    <message>
+        <source>Proxy denied connection</source>
+        <translation>?????????</translation>
+    </message>
+    <message>
+        <source>Proxy server not found</source>
+        <translation>????????</translation>
+    </message>
+    <message>
+        <source>Proxy server connection timed out</source>
+        <translation>?????????</translation>
+    </message>
+    <message>
+        <source>Did not receive HTTP response from proxy</source>
+        <translation>?????????? HTTP ??</translation>
+    </message>
+    <message>
+        <source>Proxy connection closed prematurely</source>
+        <translation>?????????????</translation>
+    </message>
+    <message>
+        <source>Error communicating with HTTP proxy</source>
+        <translation>? HTTP ????????????</translation>
+    </message>
+    <message>
+        <source>Authentication required</source>
+        <translation>????</translation>
+    </message>
+    <message>
+        <source>Error parsing authentication request from proxy</source>
+        <translation>????????????????????</translation>
+    </message>
+</context>
+<context>
+    <name>QOCIResult</name>
+    <message>
+        <source>Unable to alloc statement</source>
+        <translation>??????</translation>
+    </message>
+    <message>
+        <source>Unable to goto next</source>
+        <translation>???????</translation>
+    </message>
+    <message>
+        <source>Unable to execute statement</source>
+        <translation>??????</translation>
+    </message>
+    <message>
+        <source>Unable to bind column for batch execute</source>
+        <translation>????????????</translation>
+    </message>
+    <message>
+        <source>Unable to execute select statement</source>
+        <translation>?????????</translation>
+    </message>
+    <message>
+        <source>Unable to prepare statement</source>
+        <translation>??????</translation>
+    </message>
+    <message>
+        <source>Unable to execute batch statement</source>
+        <translation>????????</translation>
+    </message>
+    <message>
+        <source>Unable to bind value</source>
+        <translation>??????</translation>
+    </message>
+</context>
+<context>
+    <name>QNetworkReply</name>
+    <message>
+        <source>Error downloading %1 - server replied: %2</source>
+        <translation>?? %1 ????????????%2</translation>
+    </message>
+    <message>
+        <source>Protocol &quot;%1&quot; is unknown</source>
+        <translation>????? %1</translation>
+    </message>
+</context>
+<context>
+    <name>QAbstractSpinBox</name>
+    <message>
+        <source>Step &amp;down</source>
+        <translation>????(&amp;D)</translation>
+    </message>
+    <message>
+        <source>&amp;Step up</source>
+        <translation>????(&amp;S)</translation>
+    </message>
+    <message>
+        <source>&amp;Select All</source>
+        <translation>????(&amp;S)</translation>
+    </message>
+</context>
+<context>
+    <name>QDB2Result</name>
+    <message>
+        <source>Unable to bind variable</source>
+        <translation>??????</translation>
+    </message>
+    <message>
+        <source>Unable to execute statement</source>
+        <translation>??????</translation>
+    </message>
+    <message>
+        <source>Unable to fetch next</source>
+        <translation>???????</translation>
+    </message>
+    <message>
+        <source>Unable to prepare statement</source>
+        <translation>??????</translation>
+    </message>
+    <message>
+        <source>Unable to fetch record %1</source>
+        <translation>?????? %1</translation>
+    </message>
+    <message>
+        <source>Unable to fetch first</source>
+        <translation>???????</translation>
+    </message>
+</context>
+<context>
+    <name>QODBCResult</name>
+    <message>
+        <source>Unable to bind variable</source>
+        <translation>??????</translation>
+    </message>
+    <message>
+        <source>Unable to execute statement</source>
+        <translation>??????</translation>
+    </message>
+    <message>
+        <source>Unable to fetch next</source>
+        <translation>???????</translation>
+    </message>
+    <message>
+        <source>Unable to fetch last</source>
+        <translation>????????</translation>
+    </message>
+    <message>
+        <source>Unable to prepare statement</source>
+        <translation>??????</translation>
+    </message>
+    <message>
+        <source>Unable to fetch previous</source>
+        <translation>???????</translation>
+    </message>
+    <message>
+        <source>Unable to fetch</source>
+        <translation>????</translation>
+    </message>
+    <message>
+        <source>QODBCResult::reset: Unable to set &apos;SQL_CURSOR_STATIC&apos; as statement attribute. Please check your ODBC driver configuration</source>
+        <translation>QODBCResult::reset: ???? SQL_CURSOR_STATIC ???????????? ODBC ???????</translation>
+    </message>
+    <message>
+        <source>Unable to fetch first</source>
+        <translation>???????</translation>
+    </message>
+</context>
+<context>
+    <name>QPSQLDriver</name>
+    <message>
+        <source>Unable to subscribe</source>
+        <translation>????</translation>
+    </message>
+    <message>
+        <source>Could not begin transaction</source>
+        <translation>??????</translation>
+    </message>
+    <message>
+        <source>Could not rollback transaction</source>
+        <translation>??????</translation>
+    </message>
+    <message>
+        <source>Could not commit transaction</source>
+        <translation>??????</translation>
+    </message>
+    <message>
+        <source>Unable to connect</source>
+        <translation>????</translation>
+    </message>
+    <message>
+        <source>Unable to unsubscribe</source>
+        <translation>??????</translation>
+    </message>
+</context>
+<context>
+    <name>QInputDialog</name>
+    <message>
+        <source>Enter a value:</source>
+        <translation>????:</translation>
+    </message>
+</context>
+<context>
+    <name>QCoreApplication</name>
+    <message>
+        <source>%1: key is empty</source>
+        <translation>%1??????</translation>
+    </message>
+    <message>
+        <source>%1: unable to make key</source>
+        <translation>%1???????</translation>
+    </message>
+    <message>
+        <source>%1: ftok failed</source>
+        <translation>%1?ftok ??</translation>
+    </message>
+</context>
+<context>
+    <name>QIODevice</name>
+    <message>
+        <source>No such file or directory</source>
+        <translation>?????????</translation>
+    </message>
+    <message>
+        <source>Permission denied</source>
+        <translation>????</translation>
+    </message>
+    <message>
+        <source>No space left on device</source>
+        <translation>???????</translation>
+    </message>
+    <message>
+        <source>Unknown error</source>
+        <translation>?????</translation>
+    </message>
+    <message>
+        <source>Too many open files</source>
+        <translation>??????</translation>
+    </message>
+</context>
+<context>
+    <name>QMultiInputContext</name>
+    <message>
+        <source>Select IM</source>
+        <translation>?????</translation>
+    </message>
+</context>
+<context>
+    <name>QTabBar</name>
+    <message>
+        <source>Scroll Left</source>
+        <translation>????</translation>
+    </message>
+    <message>
+        <source>Scroll Right</source>
+        <translation>????</translation>
+    </message>
+</context>
+<context>
+    <name>QUndoModel</name>
+    <message>
+        <source>&lt;empty&gt;</source>
+        <translation>????</translation>
+    </message>
+</context>
+<context>
+    <name>QNetworkAccessCacheBackend</name>
+    <message>
+        <source>Error opening %1</source>
+        <translation>?? %1 ????</translation>
+    </message>
+</context>
+<context>
+    <name>QMYSQLResult</name>
+    <message>
+        <source>Unable to execute statement</source>
+        <translation>??????</translation>
+    </message>
+    <message>
+        <source>Unable to store statement results</source>
+        <translation>????????</translation>
+    </message>
+    <message>
+        <source>Unable to execute next query</source>
+        <translation>?????????</translation>
+    </message>
+    <message>
+        <source>Unable to bind outvalues</source>
+        <translation>???????</translation>
+    </message>
+    <message>
+        <source>Unable to store next result</source>
+        <translation>?????????</translation>
+    </message>
+    <message>
+        <source>Unable to fetch data</source>
+        <translation>??????</translation>
+    </message>
+    <message>
+        <source>Unable to prepare statement</source>
+        <translation>??????</translation>
+    </message>
+    <message>
+        <source>Unable to store result</source>
+        <translation>??????</translation>
+    </message>
+    <message>
+        <source>Unable to bind value</source>
+        <translation>??????</translation>
+    </message>
+    <message>
+        <source>Unable to execute query</source>
+        <translation>??????</translation>
+    </message>
+    <message>
+        <source>Unable to reset statement</source>
+        <translation>??????</translation>
+    </message>
+</context>
+<context>
+    <name>QSQLite2Result</name>
+    <message>
+        <source>Unable to execute statement</source>
+        <translation>??????</translation>
+    </message>
+    <message>
+        <source>Unable to fetch results</source>
+        <translation>??????</translation>
+    </message>
+</context>
+<context>
+    <name>Q3MainWindow</name>
+    <message>
+        <source>Line up</source>
+        <translation>??</translation>
+    </message>
+    <message>
+        <source>Customize...</source>
+        <translation>??...</translation>
+    </message>
+</context>
+<context>
+    <name>QUdpSocket</name>
+    <message>
+        <source>This platform does not support IPv6</source>
+        <translation>?????? IPv6</translation>
+    </message>
+</context>
+<context>
+    <name>Phonon::Gstreamer::Backend</name>
+    <message>
+        <source>Warning: You do not seem to have the base GStreamer plugins installed.
+          All audio and video support has been disabled</source>
+        <translation>?????????? GStreamer ?????          ?????????????</translation>
+    </message>
+    <message>
+        <source>Warning: You do not seem to have the package gstreamer0.10-plugins-good installed.
+          Some video features have been disabled.</source>
+        <translation>?????????? gstreamer0.10-plugins-good?
+          ????????????</translation>
+    </message>
+</context>
+<context>
+    <name>QLocalServer</name>
+    <message>
+        <source>%1: Name error</source>
+        <translation>%1?????</translation>
+    </message>
+    <message>
+        <source>%1: Unknown error %2</source>
+        <translation>%1?????? %2</translation>
+    </message>
+    <message>
+        <source>%1: Permission denied</source>
+        <translation>%1?????</translation>
+    </message>
+    <message>
+        <source>%1: Address in use</source>
+        <translation>%1??????</translation>
+    </message>
+</context>
+<context>
+    <name>Phonon::VolumeSlider</name>
+    <message>
+        <source>Volume: %1%</source>
+        <translation>???%1%</translation>
+    </message>
+    <message>
+        <source>Use this slider to adjust the volume. The leftmost position is 0%, the rightmost is %1%</source>
+        <translation>??????????????????? 0%?????? %1%</translation>
+    </message>
+</context>
+<context>
+    <name>Q3ToolBar</name>
+    <message>
+        <source>More...</source>
+        <translation>??...</translation>
+    </message>
+</context>
+<context>
+    <name>QMultiInputContextPlugin</name>
+    <message>
+        <source>Multiple input method switcher that uses the context menu of the text widgets</source>
+        <translation>?????????????????????</translation>
+    </message>
+    <message>
+        <source>Multiple input method switcher</source>
+        <translation>????????</translation>
+    </message>
+</context>
+<context>
+    <name>Q3ProgressDialog</name>
+    <message>
+        <source>Cancel</source>
+        <translation>??</translation>
+    </message>
+</context>
+<context>
+    <name>QProgressDialog</name>
+    <message>
+        <source>Cancel</source>
+        <translation>??</translation>
+    </message>
+</context>
+<context>
+    <name>QFile</name>
+    <message>
+        <source>Cannot create %1 for output</source>
+        <translation>???? %1 ???</translation>
+    </message>
+    <message>
+        <source>Failure to write block</source>
+        <translation>???????</translation>
+    </message>
+    <message>
+        <source>Cannot open %1 for input</source>
+        <translation>???? %1 ???</translation>
+    </message>
+    <message>
+        <source>Destination file exists</source>
+        <translation>??????</translation>
+    </message>
+    <message>
+        <source>Cannot open for output</source>
+        <translation>????????</translation>
+    </message>
+</context>
+<context>
+    <name>QTDSDriver</name>
+    <message>
+        <source>Unable to open connection</source>
+        <translation>??????</translation>
+    </message>
+    <message>
+        <source>Unable to use database</source>
+        <translation>???????</translation>
+    </message>
+</context>
+<context>
+    <name>AudioOutput</name>
+    <message>
+        <source>&lt;html&gt;The audio playback device &lt;b&gt;%1&lt;/b&gt; does not work.&lt;br/&gt;Falling back to &lt;b&gt;%2&lt;/b&gt;.&lt;/html&gt;</source>
+        <translation>&lt;html&gt;?????? &lt;b&gt;%1&lt;/b&gt; ?????&lt;br/&gt;?????? &lt;b&gt;%2&lt;/b&gt;?&lt;/html&gt;</translation>
+    </message>
+    <message>
+        <source>Revert back to device &apos;%1&apos;</source>
+        <translation>????? %1</translation>
+    </message>
+    <message>
+        <source>&lt;html&gt;Switching to the audio playback device &lt;b&gt;%1&lt;/b&gt;&lt;br/&gt;which just became available and has higher preference.&lt;/html&gt;</source>
+        <translation>&lt;html&gt;?????? &lt;b&gt;%1&lt;/b&gt; ????????????????????????&lt;/html&gt;</translation>
+    </message>
+</context>
+<context>
+    <name>QPluginLoader</name>
+    <message>
+        <source>The plugin was not loaded.</source>
+        <translation>????????</translation>
+    </message>
+    <message>
+        <source>Unknown error</source>
+        <translation>?????</translation>
+    </message>
+</context>
+<context>
+    <name>QSlider</name>
+    <message>
+        <source>Page up</source>
+        <translation>????</translation>
+    </message>
+    <message>
+        <source>Position</source>
+        <translation>??</translation>
+    </message>
+    <message>
+        <source>Page right</source>
+        <translation>????</translation>
+    </message>
+    <message>
+        <source>Page down</source>
+        <translation>????</translation>
+    </message>
+    <message>
+        <source>Page left</source>
+        <translation>????</translation>
+    </message>
+</context>
+<context>
+    <name>CloseButton</name>
+    <message>
+        <source>Close Tab</source>
+        <translation>????</translation>
+    </message>
+</context>
+<context>
+    <name>QPSQLResult</name>
+    <message>
+        <source>Unable to prepare statement</source>
+        <translation>??????</translation>
+    </message>
+    <message>
+        <source>Unable to create query</source>
+        <translation>??????</translation>
+    </message>
+</context>
+<context>
+    <name>QNetworkAccessFileBackend</name>
+    <message>
+        <source>Request for opening non-local file %1</source>
+        <translation>?????????? %1</translation>
+    </message>
+    <message>
+        <source>Read error reading from %1: %2</source>
+        <translation>? %1 ?????%2</translation>
+    </message>
+    <message>
+        <source>Cannot open %1: Path is a directory</source>
+        <translation>???? %1?????????</translation>
+    </message>
+    <message>
+        <source>Error opening %1: %2</source>
+        <translation>?? %1 ?????%2</translation>
+    </message>
+    <message>
+        <source>Write error writing to %1: %2</source>
+        <translation>?? %1 ??????%2</translation>
+    </message>
+</context>
+<context>
+    <name>QNetworkReplyImpl</name>
+    <message>
+        <source>Operation canceled</source>
+        <translation>????</translation>
+    </message>
+</context>
+<context>
+    <name>Q3NetworkProtocol</name>
+    <message>
+        <source>Operation stopped by the user</source>
+        <translation>????????</translation>
+    </message>
+</context>
+<context>
+    <name>QMdiArea</name>
+    <message>
+        <source>(Untitled)</source>
+        <translation>?????</translation>
+    </message>
+</context>
+<context>
+    <name>QHostInfo</name>
+    <message>
+        <source>Unknown error</source>
+        <translation>?????</translation>
+    </message>
+</context>
+<context>
+    <name>Q3Accel</name>
+    <message>
+        <source>%1, %2 not defined</source>
+        <translation>%1?%2 ???</translation>
+    </message>
+    <message>
+        <source>Ambiguous %1 not handled</source>
+        <translation>???? %1 ????</translation>
+    </message>
+</context>
+<context>
+    <name>QTcpServer</name>
+    <message>
+        <source>Operation on socket is not supported</source>
+        <translation>Socket ???????</translation>
+    </message>
+</context>
+</TS>



From mean at mail.berlios.de  Sun Jul 26 09:20:58 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sun, 26 Jul 2009 09:20:58 +0200
Subject: [Avidemux-svn-commit] r5156 -
	branches/avidemux_2.5_branch_gruntster/po
Message-ID: <200907260720.n6Q7KwX7017864@sheep.berlios.de>

Author: mean
Date: 2009-07-26 09:20:58 +0200 (Sun, 26 Jul 2009)
New Revision: 5156

Added:
   branches/avidemux_2.5_branch_gruntster/po/zh_TW_gtk20.mo
Log:
[po] Traditional Chinese update by Dong-Jun Wu, not sure that file is needed

Added: branches/avidemux_2.5_branch_gruntster/po/zh_TW_gtk20.mo
===================================================================
--- branches/avidemux_2.5_branch_gruntster/po/zh_TW_gtk20.mo	2009-07-26 07:14:07 UTC (rev 5155)
+++ branches/avidemux_2.5_branch_gruntster/po/zh_TW_gtk20.mo	2009-07-26 07:20:58 UTC (rev 5156)
@@ -0,0 +1,3411 @@
+msgid ""
+msgstr ""
+"Project-Id-Version: gtk+ 2.15.5\n"
+"Report-Msgid-Bugs-To: \n"
+"POT-Creation-Date: 2009-07-18 00:26-0400\n"
+"PO-Revision-Date: 2009-02-23 20:23+0800\n"
+"Last-Translator: Chao-Hsiung Liao <j_h_liau at yahoo.com.tw>\n"
+"Language-Team: Chinese (Taiwan) <zh-l10n at lists.linux.org.tw>\n"
+"MIME-Version: 1.0\n"
+"Content-Type: text/plain; charset=UTF-8\n"
+"Content-Transfer-Encoding: 8bit\n"
+"Plural-Forms: nplurals=1; plural=0;\n"
+
+msgid ""
+"\"%s\" could not be converted to a value of type \"%s\" for attribute \"%s\""
+msgstr "?%s???????????%s??????%s?"
+
+msgid "\"%s\" is not a valid attribute name"
+msgstr "?%s? ???????????"
+
+msgid "\"%s\" is not a valid attribute type"
+msgstr "?%s? ???????????"
+
+msgid "\"%s\" is not a valid value for attribute \"%s\""
+msgstr "?%s? ????????%s??????"
+
+msgid "\"Deepness\" of the color."
+msgstr "???????????"
+
+msgid "%1$s on %2$s"
+msgstr "%1$s ? %2$s"
+
+msgid "%H:%M"
+msgstr "%H:%M"
+
+msgid "%s job #%d"
+msgstr "%s ??? #%d"
+
+msgid "(Empty)"
+msgstr "(??)"
+
+msgid "(None)"
+msgstr "????"
+
+msgid "(disabled)"
+msgstr "?????"
+
+msgid "(unknown)"
+msgstr "????"
+
+msgid "--- No Tip ---"
+msgstr "--- ??? ---"
+
+msgid "<%s> element has invalid id \"%s\""
+msgstr "<%s> ?????? id?%s?"
+
+msgid "<%s> element has neither a \"name\" nor an \"id\" attribute"
+msgstr "<%s> ??????name???id???"
+
+msgid ""
+"<b>Any Printer</b>\n"
+"For portable documents"
+msgstr ""
+"<b>?????</b>\n"
+"??????"
+
+msgid "A <%s> element has already been specified"
+msgstr "<%s> ??????"
+
+msgid "A <text> element can't occur before a <tags> element"
+msgstr "<text> ??????? <tags> ???"
+
+msgid "A file named \"%s\" already exists.  Do you want to replace it?"
+msgstr "???%s???????????????"
+
+msgid "A_t:"
+msgstr "?(_T)?"
+
+msgid "About %s"
+msgstr "?? %s"
+
+msgctxt "Accelerator"
+msgid "Disabled"
+msgstr "???"
+
+msgid "Add Cover Page"
+msgstr "????"
+
+msgid "Add the current folder to the bookmarks"
+msgstr "???????????"
+
+msgid "Add the folder '%s' to the bookmarks"
+msgstr "?????%s?????"
+
+msgid "Add the selected folder to the Bookmarks"
+msgstr "???????????"
+
+msgid "Add the selected folders to the bookmarks"
+msgstr "???????????"
+
+msgid "Adjusts the volume"
+msgstr "????"
+
+msgid "Advanced"
+msgstr "??"
+
+msgid "After"
+msgstr "??"
+
+msgid "All sheets"
+msgstr "????"
+
+msgid "Amharic (EZ+)"
+msgstr "?????? (EZ+)"
+
+msgid "Amount of blue light in the color."
+msgstr "?????????"
+
+msgid "Amount of green light in the color."
+msgstr "?????????"
+
+msgid "Amount of red light in the color."
+msgstr "?????????"
+
+msgid "Anonymous tag found and tags can not be created."
+msgstr "????????????????"
+
+msgid "Application"
+msgstr "????"
+
+msgid "Artwork by"
+msgstr "????"
+
+msgid "Attribute \"%s\" is invalid on <%s> element in this context"
+msgstr "???????????%s?? <%s> ???????"
+
+msgid "Attribute \"%s\" repeated twice on the same <%s> element"
+msgstr "???%s????? <%s> ????????"
+
+msgid "Auto Select"
+msgstr "????"
+
+msgid "Axes"
+msgstr "?"
+
+msgid "BMP image has bogus header data"
+msgstr "BMP ???????????"
+
+msgid "BMP image has unsupported header size"
+msgstr "????? BMP ???????"
+
+msgid "Bad code encountered"
+msgstr "?????????"
+
+msgid "Be_fore:"
+msgstr "????(_F)?"
+
+msgid "Before"
+msgstr "??"
+
+msgid "Billing Info"
+msgstr "????"
+
+msgid "Bits per channel of PNG image is invalid."
+msgstr "PNG ?????????????????"
+
+msgid "Bits per channel of transformed PNG is not 8."
+msgstr "???? PNG ???????????????? 8?"
+
+msgid "Both \"id\" and \"name\" were found on the <%s> element"
+msgstr "?id???name??? <%s> ?????"
+
+msgid "Bottom to top, left to right"
+msgstr "?????????"
+
+msgid "Bottom to top, right to left"
+msgstr "?????????"
+
+msgid "Brightness of the color."
+msgstr "??????"
+
+msgid "CLASS"
+msgstr "??"
+
+msgid "COLORS"
+msgstr "??"
+
+msgid "C_ollate"
+msgstr "??(_O)"
+
+msgid "C_reate"
+msgstr "??(_R)"
+
+msgid "C_redits"
+msgstr "??(_R)"
+
+msgid "C_urrent Page"
+msgstr "????(_U)"
+
+msgid "Cache file created successfully.\n"
+msgstr "?????????\n"
+
+msgid "Cannot allocate TGA header memory"
+msgstr "???? TGA ????????"
+
+msgid "Cannot allocate colormap entries"
+msgstr "??????????????"
+
+msgid "Cannot allocate colormap structure"
+msgstr "??????????????"
+
+msgid "Cannot allocate memory for IOBuffer data"
+msgstr "???? IOBuffer ????????"
+
+msgid "Cannot allocate memory for IOBuffer struct"
+msgstr "???? IOBuffer ????????"
+
+msgid "Cannot allocate memory for TGA context struct"
+msgstr "?????????? TGA ????"
+
+msgid "Cannot allocate memory for loading PNM image"
+msgstr "?????????? PNM ??"
+
+msgid "Cannot allocate memory for loading XPM image"
+msgstr "?????????? XPM ??"
+
+msgid "Cannot allocate new pixbuf"
+msgstr "?????? pixbuf"
+
+msgid "Cannot allocate temporary IOBuffer data"
+msgstr "???????? IOBuffer ??"
+
+msgid "Cannot change to folder because it is not local"
+msgstr "??????????????????"
+
+msgid "Cannot open display: %s"
+msgstr "???????%s"
+
+msgid "Cannot read XPM colormap"
+msgstr "???? XPM ??"
+
+msgid "Cannot realloc IOBuffer data"
+msgstr "?? realloc IOBuffer ??"
+
+msgid "Caps Lock is on"
+msgstr "Cpas Lock ???"
+
+msgid "Cedilla"
+msgstr "??? (Cedilla)"
+
+msgid "Circular table entry in GIF file"
+msgstr "GIF ????????????"
+
+msgid "Cl_ear"
+msgstr "??(_E)"
+
+msgid "Classified"
+msgstr "???"
+
+msgid ""
+"Click the eyedropper, then click a color anywhere on your screen to select "
+"that color."
+msgstr "?????????????????????"
+
+msgid ""
+"Click this palette entry to make it the current color. To change this entry, "
+"drag a color swatch here or right-click it and select \"Save color here.\""
+msgstr ""
+"?????????????????????????????????????\n"
+"????????????????"
+
+msgid "Co_nnect"
+msgstr "??(_N)"
+
+msgid "Color"
+msgstr "??"
+
+msgid "Color Selection"
+msgstr "????"
+
+msgid "Color Wheel"
+msgstr "????"
+
+msgid "Color _name:"
+msgstr "????(_N)?"
+
+msgid "Command Line"
+msgstr "???"
+
+msgid "Complete, but not unique"
+msgstr "?????????"
+
+msgid "Completing..."
+msgstr "????..."
+
+msgid "Compressed icons are not supported"
+msgstr "?????????"
+
+msgid "Confidential"
+msgstr "??"
+
+msgid "Connect _anonymously"
+msgstr "????(_A)"
+
+msgid "Connect as u_ser:"
+msgstr "??????(_S):"
+
+msgid "Convert to PS level 1"
+msgstr "??? PS ?? 1"
+
+msgid "Convert to PS level 2"
+msgstr "??? PS ?? 2"
+
+msgid "Copie_s:"
+msgstr "??(_S)?"
+
+msgid "Copies"
+msgstr "????"
+
+msgid "Copy URL"
+msgstr "?? URL"
+
+msgid "Copy _Location"
+msgstr "????(_L)"
+
+msgid "Could not add a bookmark"
+msgstr "??????"
+
+msgid "Could not allocate memory: %s"
+msgstr "???????? %s"
+
+msgid "Could not clear list"
+msgstr "??????"
+
+msgid "Could not create stream: %s"
+msgstr "??????? %s"
+
+msgid "Could not decode ICNS file"
+msgstr "???? ICNS ??"
+
+msgid ""
+"Could not find the icon '%s'. The '%s' theme\n"
+"was not found either, perhaps you need to install it.\n"
+"You can get a copy from:\n"
+"\t%s"
+msgstr ""
+"??????%s???????%s?\n"
+"??????????????\n"
+"???????????\n"
+"\t%s"
+
+msgid "Could not get image height (bad TIFF file)"
+msgstr "?????????TIFF ????"
+
+msgid "Could not get image width (bad TIFF file)"
+msgstr "?????????TIFF ????"
+
+msgid "Could not get information for file '%s': %s"
+msgstr "???????%s?????%s"
+
+msgid "Could not mount %s"
+msgstr "???? %s"
+
+msgid "Could not obtain root folder"
+msgstr "????????"
+
+msgid "Could not read from stream: %s"
+msgstr "???????%s"
+
+msgid "Could not remove bookmark"
+msgstr "??????"
+
+msgid "Could not remove item"
+msgstr "??????"
+
+msgid "Could not rename %s back to %s: %s.\n"
+msgstr "??? %s ????? %s?%s?\n"
+
+msgid "Could not rename %s to %s: %s\n"
+msgstr "??? %s ?????? %s?%s\n"
+
+msgid "Could not rename %s to %s: %s, removing %s then.\n"
+msgstr "??? %s ?????? %s?%s????? %s?\n"
+
+msgid "Could not retrieve information about the file"
+msgstr "???????????"
+
+msgid "Could not seek stream: %s"
+msgstr "??????? %s"
+
+msgid "Could not select file"
+msgstr "??????"
+
+msgid "Could not send the search request"
+msgstr "????????"
+
+msgid "Could not start the search process"
+msgstr "????????"
+
+msgid "Couldn't allocate memory for color profile"
+msgstr "??????????????"
+
+msgid "Couldn't allocate memory for context buffer"
+msgstr "??????????????"
+
+msgid "Couldn't allocate memory for header"
+msgstr "??????????????"
+
+msgid "Couldn't allocate memory for line data"
+msgstr "???? line data ??????"
+
+msgid "Couldn't allocate memory for loading JPEG file"
+msgstr "?????????? JPEG ??"
+
+msgid "Couldn't allocate memory for paletted data"
+msgstr "??????????????"
+
+msgid "Couldn't allocate memory for saving BMP file"
+msgstr "?????????? BMP ?"
+
+msgid "Couldn't allocate memory for stream"
+msgstr "??????????"
+
+msgid "Couldn't allocate memory to buffer image data"
+msgstr "???????????????"
+
+msgid "Couldn't convert filename"
+msgstr "????????"
+
+msgid "Couldn't create new pixbuf"
+msgstr "?????? pixbuf"
+
+msgid "Couldn't decode image"
+msgstr "???????"
+
+msgid "Couldn't load bitmap"
+msgstr "???????"
+
+msgid "Couldn't load metafile"
+msgstr "????????"
+
+msgid "Couldn't recognize the image file format for file '%s'"
+msgstr "????????%s??????"
+
+msgid "Couldn't save"
+msgstr "????"
+
+msgid "Couldn't save the rest"
+msgstr "????????"
+
+msgid "Couldn't write to BMP file"
+msgstr "???? BMP ??"
+
+msgid "Couldn't write to TIFF file"
+msgstr "???? TIFF ??"
+
+msgid "Create Fo_lder"
+msgstr "?????(_L)"
+
+msgid "Create in _folder:"
+msgstr "??????(_F)?"
+
+msgid "Credits"
+msgstr "??"
+
+msgid "Cursor hotspot outside image"
+msgstr "?????????"
+
+msgid "Custom %sx%s"
+msgstr "?? %sx%s"
+
+msgid "Custom Size %d"
+msgstr "???? %d"
+
+msgid "Custom size"
+msgstr "????"
+
+msgid "Cyrillic (Transliterated)"
+msgstr "?????????"
+
+msgid "DISPLAY"
+msgstr "??"
+
+msgid "De_lete File"
+msgstr "????(_L)"
+
+msgid "Decreases the volume"
+msgstr "????"
+
+msgid "Delete File"
+msgstr "????"
+
+msgid "Desktop"
+msgstr "??"
+
+msgid "Didn't get all lines of PCX image"
+msgstr "??? PIX ????????"
+
+msgid "Dimensions of TIFF image too large"
+msgstr "TIFF ???????"
+
+msgid "Disabled"
+msgstr "???"
+
+msgid "Do use the Wintab API [default]"
+msgstr "?? Wintab API [??]"
+
+msgid "Documented by"
+msgstr "????"
+
+msgid "Don't batch GDI requests"
+msgstr "???????? GDI ??"
+
+msgid "Don't check for the existence of index.theme"
+msgstr "??? index.theme ????"
+
+msgid "Don't include image data in the cache"
+msgstr "????????????"
+
+msgid "Don't use the Wintab API for tablet support"
+msgstr "??? Wintab API ?? tablet PC ???"
+
+msgid "Down Path"
+msgstr "????"
+
+msgid "Element <%s> is not allowed below <%s>"
+msgstr "?? <%s> ???? <%s> ??"
+
+msgid "Embed GhostScript fonts only"
+msgstr "????? GhostScript ??"
+
+msgid "Empty"
+msgstr "??"
+
+msgid "Error creating folder '%s': %s"
+msgstr "??????%s??????%s"
+
+msgid "Error creating print preview"
+msgstr "???????????"
+
+msgid "Error deleting file '%s': %s"
+msgstr "?????%s???????%s"
+
+msgid "Error from StartDoc"
+msgstr "?? StartDoc ???"
+
+msgid "Error interpreting JPEG image file (%s)"
+msgstr "?? JPEG ???????? (%s)"
+
+msgid "Error launching preview"
+msgstr "?????????"
+
+msgid "Error loading icon: %s"
+msgstr "??????????%s"
+
+msgid "Error parsing option --gdk-debug"
+msgstr "???? --gdk-debug ????"
+
+msgid "Error parsing option --gdk-no-debug"
+msgstr "???? --gdk-no-debug ?????"
+
+msgid "Error printing"
+msgstr "????"
+
+msgid "Error reading ICNS image: %s"
+msgstr "?? ICNS ?????????%s"
+
+msgid "Error renaming file \"%s\" to \"%s\": %s"
+msgstr "?????%s??????%s???????%s"
+
+msgid "Error renaming file \"%s\": %s"
+msgstr "?????%s??????????%s"
+
+msgid "Error renaming file to \"%s\": %s"
+msgstr "????????%s???????%s"
+
+msgid "Error writing to image file: %s"
+msgstr "?????????? (%s)"
+
+msgid "Error writing to image stream"
+msgstr "???????????"
+
+msgid "Even sheets"
+msgstr "???"
+
+msgid "Excess data in file"
+msgstr "?????????"
+
+msgid "FLAGS"
+msgstr "??"
+
+msgid ""
+"Failed to close '%s' while writing image, all data may not have been saved: %"
+"s"
+msgstr "??????????%s??????????????%s"
+
+msgid "Failed to load RGB data from TIFF file"
+msgstr "???? TIFF ??? RGB ??"
+
+msgid "Failed to load TIFF image"
+msgstr "???? TIFF ??"
+
+msgid ""
+"Failed to load animation '%s': reason not known, probably a corrupt "
+"animation file"
+msgstr "????????%s????????????????"
+
+msgid "Failed to load icon"
+msgstr "??????"
+
+msgid "Failed to load image '%s': %s"
+msgstr "???????%s??%s"
+
+msgid ""
+"Failed to load image '%s': reason not known, probably a corrupt image file"
+msgstr "????????%s???????????????"
+
+msgid "Failed to open '%s' for writing: %s"
+msgstr "?????%s????????%s"
+
+msgid "Failed to open TIFF image"
+msgstr "???? TIFF ??"
+
+msgid "Failed to open file %s : %s\n"
+msgstr "?????%s????%s\n"
+
+msgid "Failed to open file '%s': %s"
+msgstr "?????%s????%s"
+
+msgid "Failed to open temporary file"
+msgstr "???????"
+
+msgid "Failed to read from temporary file"
+msgstr "???????"
+
+msgid "Failed to rewrite header\n"
+msgstr "??????\n"
+
+msgid "Failed to save TIFF image"
+msgstr "???? TIFF ??"
+
+msgid "Failed to write TIFF data"
+msgstr "???? TIFF ??"
+
+msgid "Failed to write cache file: %s\n"
+msgstr "?????????%s\n"
+
+msgid "Failed to write folder index\n"
+msgstr "?????????\n"
+
+msgid "Failed to write hash table\n"
+msgstr "?? hash table ??\n"
+
+msgid "Failed to write header\n"
+msgstr "??????\n"
+
+msgid "Failed to write to temporary file when loading XBM image"
+msgstr "??? XBM ??????????"
+
+msgid "Failed to write to temporary file when loading XPM image"
+msgstr "??? XPM ??????????"
+
+msgid "Failure reading GIF: %s"
+msgstr "???? GIF?%s"
+
+msgid "Fatal error in PNG image file: %s"
+msgstr "PNG ??????????%s"
+
+msgid "Fatal error reading PNG image file"
+msgstr "?? PNG ??????????"
+
+msgid "Fatal error reading PNG image file: %s"
+msgstr "?? PNG ???????????%s"
+
+msgid "File"
+msgstr "??"
+
+msgid "File System"
+msgstr "????"
+
+msgid "File System Root"
+msgstr "?????"
+
+msgid "File does not appear to be a GIF file"
+msgstr "????? GIF ?"
+
+msgid "File not found: %s\n"
+msgstr "??????%s\n"
+
+msgid "Files"
+msgstr "??"
+
+msgid "Finishing"
+msgstr "????"
+
+msgid "Fol_ders"
+msgstr "???(_D)"
+
+msgid "Folder unreadable: %s"
+msgstr "????????%s"
+
+msgid "Folders"
+msgstr "???"
+
+msgid "Font"
+msgstr "??"
+
+msgid "Font Selection"
+msgstr "????"
+
+msgid "Forget password _immediately"
+msgstr "??????(_I)"
+
+msgid "Full Volume"
+msgstr "????"
+
+msgid "GIF file was missing some data (perhaps it was truncated somehow?)"
+msgstr "GIF ?????????????????????"
+
+msgid ""
+"GIF image has no global colormap, and a frame inside it has no local "
+"colormap."
+msgstr "GIF ??????????????????????????????"
+
+msgid "GIF image is corrupt (incorrect LZW compression)"
+msgstr "GIF ?????????? LZW ?????"
+
+msgid "GIF image loader cannot understand this image."
+msgstr "GIF ??????????????"
+
+msgid "GIF image was truncated or incomplete."
+msgstr "GIF ???????????"
+
+msgid "GTK+ Options"
+msgstr "GTK+ ??"
+
+msgid "GTK+ debugging flags to set"
+msgstr "????? GTK+ ????"
+
+msgid "GTK+ debugging flags to unset"
+msgstr "????? GTK+ ????"
+
+msgid "Gamma"
+msgstr "Gamma"
+
+msgid "Gdk debugging flags to set"
+msgstr "????? Gdk ????"
+
+msgid "Gdk debugging flags to unset"
+msgstr "????? Gdk ????"
+
+msgid "General"
+msgstr "??"
+
+msgid "GhostScript pre-filtering"
+msgstr "GhostScript ?????"
+
+msgid "High"
+msgstr "?"
+
+msgid "Hold the job until it is explicitly released"
+msgstr "??????????????"
+
+msgid "IPA"
+msgstr "????"
+
+msgid "Icon '%s' not present in theme"
+msgstr "???%s??????????"
+
+msgid "Icon has zero height"
+msgstr "???????"
+
+msgid "Icon has zero width"
+msgstr "???????"
+
+msgid "Image Quality"
+msgstr "????"
+
+msgid "Image file '%s' contains no data"
+msgstr "????%s?????"
+
+msgid "Image format unknown"
+msgstr "??????"
+
+msgid "Image has invalid width and/or height"
+msgstr "??????/?????"
+
+msgid "Image has unsupported bpp"
+msgstr "???????????"
+
+msgid "Image has unsupported number of %d-bit planes"
+msgstr "????????? %d-????(bit planes)"
+
+msgid "Image has zero height"
+msgstr "??????"
+
+msgid "Image has zero width"
+msgstr "??????"
+
+msgid "Image header corrupt"
+msgstr "??????"
+
+msgid "Image pixel data corrupt"
+msgstr "????????"
+
+msgid "Image too large to be saved as ICO"
+msgstr "???????? ICO ??"
+
+msgid "Image type '%s' is not supported"
+msgstr "????????%s?"
+
+msgid "Image type currently not supported"
+msgstr "?????????"
+
+msgid ""
+"Image-loading module %s does not export the proper interface; perhaps it's "
+"from a different GTK version?"
+msgstr "?????? %s ?????????????????? GTK ???"
+
+msgid "Incomplete hostname; end it with '/'"
+msgstr "????????????/???"
+
+msgid "Increases the volume"
+msgstr "????"
+
+msgid "Incremental loading of image type '%s' is not supported"
+msgstr "???????????????%s?"
+
+msgid "Input"
+msgstr "??"
+
+msgid "Input _Methods"
+msgstr "???(_M)"
+
+msgid "Insufficient memory to load PNG file"
+msgstr "???????? PNG ?"
+
+msgid "Insufficient memory to load PNM context struct"
+msgstr "?????????? PNM ????"
+
+msgid "Insufficient memory to load PNM file"
+msgstr "???????? PNM ?"
+
+msgid "Insufficient memory to load XBM image file"
+msgstr "???????? XBM ???"
+
+msgid ""
+"Insufficient memory to load image, try exiting some applications to free "
+"memory"
+msgstr "????????????????????????????"
+
+msgid "Insufficient memory to open JPEG 2000 file"
+msgstr "???????? JPEG 2000 ?"
+
+msgid "Insufficient memory to open TIFF file"
+msgstr "???????? TIFF ?"
+
+msgid "Insufficient memory to save image into a buffer"
+msgstr "??????????????"
+
+msgid "Insufficient memory to save image to callback"
+msgstr "??????????? callback"
+
+msgid ""
+"Insufficient memory to store a %ld by %ld image; try exiting some "
+"applications to reduce memory usage"
+msgstr ""
+"??????????? %ld?%ld ????\n"
+"????????????????????"
+
+msgid "Internal error in the GIF loader (%s)"
+msgstr "GIF ?????????? (%s)"
+
+msgid ""
+"Internal error: Image loader module '%s' failed to complete an operation, "
+"but didn't give a reason for the failure"
+msgstr "????????????%s?????????????????"
+
+msgid "Inuktitut (Transliterated)"
+msgstr "?????????"
+
+msgid "Invalid URI"
+msgstr "??? URI"
+
+msgid "Invalid UTF-8"
+msgstr "??? UTF-8 ??"
+
+msgid "Invalid XBM file"
+msgstr "??? XBM ?"
+
+msgid "Invalid XPM header"
+msgstr "??? XPM ??"
+
+msgid "Invalid argument to CreateDC"
+msgstr "? CreateDC ?????"
+
+msgid "Invalid argument to PrintDlgEx"
+msgstr "? PrintDlgEx ?????"
+
+msgid "Invalid file name"
+msgstr "???????"
+
+msgid "Invalid handle to PrintDlgEx"
+msgstr "? PrintDlgEx ?????"
+
+msgid "Invalid header in animation"
+msgstr "??????????"
+
+msgid "Invalid header in icon"
+msgstr "?????????"
+
+msgid "Invalid path"
+msgstr "?????"
+
+msgid "Invalid pointer to PrintDlgEx"
+msgstr "? PrintDlgEx ?????"
+
+msgid "Invalid root element: '%s'"
+msgstr "????????%s?"
+
+msgid ""
+"JPEG quality must be a value between 0 and 100; value '%d' is not allowed."
+msgstr "JPEG ????? 0 ? 100 ???????????%d??"
+
+msgid ""
+"JPEG quality must be a value between 0 and 100; value '%s' could not be "
+"parsed."
+msgstr "JPEG ????? 0 ? 100 ??????????%s??"
+
+msgid "Job"
+msgstr "????"
+
+msgid "Job Details"
+msgstr "????????"
+
+msgid "Job Priority"
+msgstr "?????:"
+
+msgid "Keys"
+msgstr "??"
+
+msgid "Keys for PNG text chunks must be ASCII characters."
+msgstr "PNG text ????????? ASCII ???"
+
+msgid ""
+"Keys for PNG text chunks must have at least 1 and at most 79 characters."
+msgstr "PNG text ????????? 1 ? 79 ?????"
+
+msgid "LRE Left-to-right _embedding"
+msgstr "LR_E ?????"
+
+msgid "LRM _Left-to-right mark"
+msgstr "_LRM ?????"
+
+msgid "LRO Left-to-right _override"
+msgstr "LR_O ?????"
+
+msgid "Layout"
+msgstr "??"
+
+msgid "Left to right"
+msgstr "???"
+
+msgid "Left to right, bottom to top"
+msgstr "?????????"
+
+msgid "Left to right, top to bottom"
+msgstr "?????????"
+
+msgid "License"
+msgstr "????"
+
+msgid "Load additional GTK+ modules"
+msgstr "????? GTK+ ??"
+
+msgid "Location"
+msgstr "??"
+
+msgid "Long Edge (Standard)"
+msgstr "??????"
+
+msgid "Low"
+msgstr "?"
+
+msgid "MODULES"
+msgstr "??"
+
+msgid "Make X calls synchronous"
+msgstr "???????? X ??"
+
+msgid "Make all warnings fatal"
+msgstr "???????????????"
+
+msgid "Malformed chunk in animation"
+msgstr "?????????????"
+
+msgid "Manage Custom Sizes"
+msgstr "??????"
+
+msgid "Manage Custom Sizes..."
+msgstr "??????..."
+
+msgid "Margins from Printer..."
+msgstr "?????..."
+
+msgid ""
+"Margins:\n"
+" Left: %s %s\n"
+" Right: %s %s\n"
+" Top: %s %s\n"
+" Bottom: %s %s"
+msgstr ""
+"???\n"
+" ??%s %s\n"
+" ??%s %s\n"
+" ??%s %s\n"
+" ??%s %s"
+
+msgid "Maximum color value in PNM file is 0"
+msgstr "PNM ?????????? 0"
+
+msgid "Maximum color value in PNM file is too large"
+msgstr "PNM ???????????"
+
+msgid "Medium"
+msgstr "?"
+
+msgid "Miscellaneous"
+msgstr "??"
+
+msgid "Modified"
+msgstr "???"
+
+msgid "Multipress"
+msgstr "Multipress"
+
+msgid "Muted"
+msgstr "???"
+
+msgid "NAME"
+msgstr "??"
+
+msgid "Name"
+msgstr "??"
+
+msgid "Name too long"
+msgstr "????"
+
+msgid "Need user intervention"
+msgstr "???????"
+
+msgid "New Folder"
+msgstr "?????"
+
+msgid "New accelerator..."
+msgstr "?????..."
+
+msgid "No XPM header found"
+msgstr "??? XPM ??"
+
+msgid "No deserialize function found for format %s"
+msgstr "????? %s ?????"
+
+msgid "No extended input devices"
+msgstr "????????"
+
+msgid "No item for URI '%s' found"
+msgstr "??? URI?%s????"
+
+msgid "No items found"
+msgstr "?????"
+
+msgid "No match"
+msgstr "????"
+
+msgid "No palette found at end of PCX data"
+msgstr "PCX ??????????"
+
+msgid "No pre-filtering"
+msgstr "??????"
+
+msgid "No printer found"
+msgstr "??????"
+
+msgid "No recently used resource found with URI `%s'"
+msgstr "? URI ?%s? ????????????"
+
+msgid ""
+"No theme index file in '%s'.\n"
+"If you really want to create an icon cache here, use --ignore-theme-index.\n"
+msgstr ""
+"??%s?????????????\n"
+"????????????????? --ignore-theme-index ???\n"
+
+msgid "No theme index file."
+msgstr "?????????"
+
+msgid "None"
+msgstr "??"
+
+msgid "Not a valid icon cache: %s\n"
+msgstr "????????%s\n"
+
+msgid "Not a valid page setup file"
+msgstr "???????????"
+
+msgid "Not available"
+msgstr "???"
+
+msgid "Not enough free memory"
+msgstr "?????"
+
+msgid "Not enough memory to composite a frame in GIF file"
+msgstr "?????????? GIF ?????"
+
+msgid "Not enough memory to load GIF file"
+msgstr "???????? GIF ?"
+
+msgid "Not enough memory to load ICO file"
+msgstr "???????? ICO ?"
+
+msgid "Not enough memory to load RAS image"
+msgstr "???????? RAS ??"
+
+msgid "Not enough memory to load animation"
+msgstr "??????????"
+
+msgid "Not enough memory to load bitmap image"
+msgstr "????????????"
+
+msgid "Not enough memory to load icon"
+msgstr "??????????"
+
+msgid "Not enough memory to load image"
+msgstr "??????????"
+
+msgid "Odd sheets"
+msgstr "???"
+
+msgid "On _hold"
+msgstr "??(_H)"
+
+msgid "One Sided"
+msgstr "??"
+
+msgid "Only local files may be selected"
+msgstr "?????????"
+
+msgid "Op_acity:"
+msgstr "???(_A)?"
+
+msgid "Open '%s'"
+msgstr "???%s?"
+
+msgid "Opening %d Item"
+msgid_plural "Opening %d Items"
+msgstr[0] "???? %d ???"
+
+msgid "Opening %s"
+msgstr "???? %s"
+
+msgid "Other..."
+msgstr "??..."
+
+msgid "Out of paper"
+msgstr "???"
+
+msgid "Outermost element in text must be <text_view_markup> not <%s>"
+msgstr "? text ??????? <text_view_markup>??? <%s>"
+
+msgid "Output Tray"
+msgstr "???"
+
+msgid "Output a C header file"
+msgstr "?? C ?????"
+
+msgid "Output t_ray:"
+msgstr "???(_R)?"
+
+msgid "Overwrite an existing cache, even if up to date"
+msgstr "???????????????"
+
+msgid "PDF"
+msgstr "PDF"
+
+msgid "PDF _Pop directional formatting"
+msgstr "_PDF ??????"
+
+msgid ""
+"PNG compression level must be a value between 0 and 9; value '%d' is not "
+"allowed."
+msgstr "PNG ??????? 0 ? 9 ???????????%d??"
+
+msgid ""
+"PNG compression level must be a value between 0 and 9; value '%s' could not "
+"be parsed."
+msgstr "PNG ??????? 0 ? 9 ??????????%s??"
+
+msgid "PNM file has an image height of 0"
+msgstr "PNM ?????? 0"
+
+msgid "PNM file has an image width of 0"
+msgstr "PNM ?????? 0"
+
+msgid "PNM file has an incorrect initial byte"
+msgstr "PNM ???????????"
+
+msgid "PNM file is not in a recognized PNM subformat"
+msgstr "?????? PNM ?????"
+
+msgid "PNM image loader does not support this PNM subformat"
+msgstr "PNM ????????? PNM ?????"
+
+msgid "PNM loader expected to find an integer, but didn't"
+msgstr "PNM ????????????"
+
+msgid "Pag_es:"
+msgstr "??(_E):"
+
+msgid "Page %u"
+msgstr "? %u ?"
+
+msgid "Page Ordering"
+msgstr "????"
+
+msgid "Page Setup"
+msgstr "????"
+
+msgid "Page or_dering:"
+msgstr "????(_D):"
+
+msgid "Pages Per Sheet"
+msgstr "??????"
+
+msgid "Pages per Sheet"
+msgstr "????"
+
+msgid "Pages per _sheet:"
+msgstr "??????(_S)"
+
+msgid "Pages per _side:"
+msgstr "??????(_S):"
+
+msgid "Paper"
+msgstr "??"
+
+msgid "Paper Margins"
+msgstr "????"
+
+msgid "Paper Size"
+msgstr "????"
+
+msgid "Paper Source"
+msgstr "????"
+
+msgid "Paper Type"
+msgstr "????"
+
+msgid "Paper _source:"
+msgstr "????(_S)?"
+
+msgid "Paper _type:"
+msgstr "????(_T)?"
+
+msgid "Path does not exist"
+msgstr "?????"
+
+msgid "Paused"
+msgstr "???"
+
+msgid "Paused ; Rejecting Jobs"
+msgstr "??????????"
+
+msgid "Pick a Color"
+msgstr "????"
+
+msgid "Pick a Font"
+msgstr "?????"
+
+msgid "Places"
+msgstr "??"
+
+msgid "Position on the color wheel."
+msgstr "???????"
+
+msgid "Postscript"
+msgstr "Postscript"
+
+msgid "Premature end-of-file encountered"
+msgstr "??????"
+
+msgid "Preparing"
+msgstr "????"
+
+msgid "Preparing %d"
+msgstr "???? %d"
+
+msgid "Pri_ority:"
+msgstr "???(_O):"
+
+msgid "Print"
+msgstr "??"
+
+msgid "Print Document"
+msgstr "????"
+
+msgid "Print at"
+msgstr "???"
+
+msgid "Print at time"
+msgstr "???????"
+
+msgid "Print to File"
+msgstr "?????"
+
+msgid "Print to LPR"
+msgstr "??? LPR"
+
+msgid "Print to Test Printer"
+msgstr "????????"
+
+msgid "Printer"
+msgstr "???"
+
+msgid "Printer '%s' has no toner left."
+msgstr "????%s???/?????"
+
+msgid "Printer '%s' is currently off-line."
+msgstr "????%s??????"
+
+msgid "Printer '%s' is low on at least one marker supply."
+msgstr "????%s????????/?????"
+
+msgid "Printer '%s' is low on developer."
+msgstr "????%s???????"
+
+msgid "Printer '%s' is low on paper."
+msgstr "????%s??????"
+
+msgid "Printer '%s' is low on toner."
+msgstr "????%s???/?????"
+
+msgid "Printer '%s' is out of at least one marker supply."
+msgstr "????%s????????/?????"
+
+msgid "Printer '%s' is out of developer."
+msgstr "????%s???????"
+
+msgid "Printer '%s' is out of paper."
+msgstr "????%s??????"
+
+msgid "Printer '%s' may not be connected."
+msgstr "????%s????????"
+
+msgid "Printer Default"
+msgstr "?????"
+
+msgid "Printer offline"
+msgstr "?????"
+
+msgid "Printing %d"
+msgstr "???? %d"
+
+msgid "Program class as used by the window manager"
+msgstr "?????????????"
+
+msgid "Program name as used by the window manager"
+msgstr "????????????"
+
+msgid "RAS image has bogus header data"
+msgstr "RAS ???????????"
+
+msgid "RAS image has unknown type"
+msgstr "RAS ??????"
+
+msgid "RLE Right-to-left e_mbedding"
+msgstr "RL_E ?????"
+
+msgid "RLM _Right-to-left mark"
+msgstr "_RLM ?????"
+
+msgid "RLO Right-to-left o_verride"
+msgstr "RL_O ?????"
+
+msgid "Range"
+msgstr "??"
+
+msgid "Raw PNM formats require exactly one whitespace before sample data"
+msgstr "?? PNM ???????????????(whitespace)"
+
+msgid "Raw PNM image type is invalid"
+msgstr "?? PNM ???????"
+
+msgid "Really delete file \"%s\"?"
+msgstr "?????????%s??"
+
+msgid "Received invalid color data\n"
+msgstr "??????????\n"
+
+msgid "Recently Used"
+msgstr "?????"
+
+msgid "Rejecting Jobs"
+msgstr "??????"
+
+msgid "Remember _forever"
+msgstr "??????(_F)"
+
+msgid "Remember password until you _logout"
+msgstr "?????????(_L)"
+
+msgid "Remove"
+msgstr "??"
+
+msgid "Remove the bookmark '%s'"
+msgstr "?????%s?"
+
+msgid "Remove the selected bookmark"
+msgstr "???????"
+
+msgid "Rename File"
+msgstr "??????"
+
+msgid "Rename file \"%s\" to:"
+msgstr "????%s????????"
+
+msgid "Rename..."
+msgstr "????..."
+
+msgid "Resolution"
+msgstr "???"
+
+msgid "Right to left"
+msgstr "???"
+
+msgid "Right to left, bottom to top"
+msgstr "?????????"
+
+msgid "Right to left, top to bottom"
+msgstr "?????????"
+
+msgid "SCREEN"
+msgstr "??"
+
+msgid "Same as --no-wintab"
+msgstr "? --no-wintab ??"
+
+msgid "Sans 12"
+msgstr "Sans 12"
+
+msgid "Save in _folder:"
+msgstr "??????(_F):"
+
+msgid "Sc_ale:"
+msgstr "??(_A)?"
+
+msgid "Screen"
+msgstr "??"
+
+msgid "Search"
+msgstr "??"
+
+msgid "Secret"
+msgstr "?"
+
+msgid "Select A File"
+msgstr "????"
+
+msgid ""
+"Select the color you want from the outer ring. Select the darkness or "
+"lightness of that color using the inner triangle."
+msgstr ""
+"?????????????\n"
+"????????????????????"
+
+msgid "Select which type of documents are shown"
+msgstr "???????????"
+
+msgid "Select which types of files are shown"
+msgstr "???????????"
+
+msgid "Serialized data is malformed"
+msgstr "??????????"
+
+msgid ""
+"Serialized data is malformed. First section isn't GTKTEXTBUFFERCONTENTS-0001"
+msgstr "????????????????? GTKTEXTBUFFERCONTENTS-0001"
+
+msgid "Short Edge (Flip)"
+msgstr "??????"
+
+msgid "Shortcut %s already exists"
+msgstr "?? %s ????"
+
+msgid "Shortcut %s does not exist"
+msgstr "?? %s ???"
+
+msgid "Show GTK+ Options"
+msgstr "?? GTK+ ??"
+
+msgid "Show _Hidden Files"
+msgstr "?????(_H)"
+
+msgid "Show _Private Resources"
+msgstr "??????(_P)"
+
+msgid "Show _Size Column"
+msgstr "??????(_S)"
+
+msgid "Si_ze:"
+msgstr "??(_Z)?"
+
+msgid "Simple"
+msgstr "??"
+
+msgid "Size"
+msgstr "??"
+
+msgid "Size of the palette in 8 bit mode"
+msgstr "8 ????????????"
+
+msgid "Sole completion"
+msgstr "????"
+
+msgid "Some of the settings in the dialog conflict"
+msgstr "????????????"
+
+msgid ""
+"Specify one or more page ranges,\n"
+" e.g. 1-3,7,11"
+msgstr ""
+"???????????\n"
+"?? 1-3,7,11"
+
+msgid ""
+"Specify the time of print,\n"
+" e.g. 15:30, 2:35 pm, 14:15:20, 11:46:30 am, 4 pm"
+msgstr ""
+"??????????\n"
+" ?? 15:30, 2:35 pm, 14:15:20, 11:46:30 am, 4 pm"
+
+msgid "Stack overflow"
+msgstr "????"
+
+msgid "Standard"
+msgstr "??"
+
+msgid "Starting %s"
+msgstr "???? %s"
+
+msgid "Status"
+msgstr "??"
+
+msgctxt "Stock label"
+msgid "Best _Fit"
+msgstr "????(_F)"
+
+msgctxt "Stock label"
+msgid "C_onnect"
+msgstr "??(_O)"
+
+msgctxt "Stock label"
+msgid "Cu_t"
+msgstr "??(_T)"
+
+msgctxt "Stock label"
+msgid "Decrease Indent"
+msgstr "????"
+
+msgctxt "Stock label"
+msgid "Error"
+msgstr "??"
+
+msgctxt "Stock label"
+msgid "Find and _Replace"
+msgstr "?????(_R)"
+
+msgctxt "Stock label"
+msgid "Increase Indent"
+msgstr "????"
+
+msgctxt "Stock label"
+msgid "Information"
+msgstr "Information"
+
+msgctxt "Stock label"
+msgid "Landscape"
+msgstr "??"
+
+msgctxt "Stock label"
+msgid "Page Set_up"
+msgstr "????(_U)"
+
+msgctxt "Stock label"
+msgid "Portrait"
+msgstr "??"
+
+msgctxt "Stock label"
+msgid "Print Pre_view"
+msgstr "????(_V)"
+
+msgctxt "Stock label"
+msgid "Question"
+msgstr "??"
+
+msgctxt "Stock label"
+msgid "Reverse landscape"
+msgstr "????"
+
+msgctxt "Stock label"
+msgid "Reverse portrait"
+msgstr "????"
+
+msgctxt "Stock label"
+msgid "Save _As"
+msgstr "????(_A)"
+
+msgctxt "Stock label"
+msgid "Select _All"
+msgstr "????(_A)"
+
+msgctxt "Stock label"
+msgid "Warning"
+msgstr "??"
+
+msgctxt "Stock label"
+msgid "Zoom _In"
+msgstr "??(_I)"
+
+msgctxt "Stock label"
+msgid "Zoom _Out"
+msgstr "??(_O)"
+
+msgctxt "Stock label"
+msgid "_About"
+msgstr "??(_A)"
+
+msgctxt "Stock label"
+msgid "_Add"
+msgstr "??(_A)"
+
+msgctxt "Stock label"
+msgid "_Apply"
+msgstr "??(_A)"
+
+msgctxt "Stock label"
+msgid "_Ascending"
+msgstr "??(_A)"
+
+msgctxt "Stock label"
+msgid "_Bold"
+msgstr "??(_B)"
+
+msgctxt "Stock label"
+msgid "_CD-Rom"
+msgstr "_CD-ROM"
+
+msgctxt "Stock label"
+msgid "_Cancel"
+msgstr "??(_C)"
+
+msgctxt "Stock label"
+msgid "_Center"
+msgstr "??(_C)"
+
+msgctxt "Stock label"
+msgid "_Clear"
+msgstr "??(_C)"
+
+msgctxt "Stock label"
+msgid "_Close"
+msgstr "??(_C)"
+
+msgctxt "Stock label"
+msgid "_Color"
+msgstr "??(_C)"
+
+msgctxt "Stock label"
+msgid "_Convert"
+msgstr "??(_C)"
+
+msgctxt "Stock label"
+msgid "_Copy"
+msgstr "??(_C)"
+
+msgctxt "Stock label"
+msgid "_Delete"
+msgstr "??(_D)"
+
+msgctxt "Stock label"
+msgid "_Descending"
+msgstr "??(_D)"
+
+msgctxt "Stock label"
+msgid "_Discard"
+msgstr "??(_D)"
+
+msgctxt "Stock label"
+msgid "_Disconnect"
+msgstr "??(_D)"
+
+msgctxt "Stock label"
+msgid "_Edit"
+msgstr "??(_E)"
+
+msgctxt "Stock label"
+msgid "_Execute"
+msgstr "??(_E)"
+
+msgctxt "Stock label"
+msgid "_Fill"
+msgstr "????(_F)"
+
+msgctxt "Stock label"
+msgid "_Find"
+msgstr "??(_F)"
+
+msgctxt "Stock label"
+msgid "_Floppy"
+msgstr "??(_F)"
+
+msgctxt "Stock label"
+msgid "_Font"
+msgstr "??(_F)"
+
+msgctxt "Stock label"
+msgid "_Fullscreen"
+msgstr "???(_F)"
+
+msgctxt "Stock label"
+msgid "_Harddisk"
+msgstr "??(_H)"
+
+msgctxt "Stock label"
+msgid "_Help"
+msgstr "??(_H)"
+
+msgctxt "Stock label"
+msgid "_Home"
+msgstr "??(_H)"
+
+msgctxt "Stock label"
+msgid "_Index"
+msgstr "??(_I)"
+
+msgctxt "Stock label"
+msgid "_Information"
+msgstr "??(_I)"
+
+msgctxt "Stock label"
+msgid "_Italic"
+msgstr "??(_I)"
+
+msgctxt "Stock label"
+msgid "_Jump to"
+msgstr "???(_J)"
+
+msgctxt "Stock label"
+msgid "_Leave Fullscreen"
+msgstr "?????(_L)"
+
+msgctxt "Stock label"
+msgid "_Left"
+msgstr "??(_L)"
+
+msgctxt "Stock label"
+msgid "_Network"
+msgstr "??(_N)"
+
+msgctxt "Stock label"
+msgid "_New"
+msgstr "??(_N)"
+
+msgctxt "Stock label"
+msgid "_No"
+msgstr "?(_N)"
+
+msgctxt "Stock label"
+msgid "_Normal Size"
+msgstr "????(_N)"
+
+msgctxt "Stock label"
+msgid "_OK"
+msgstr "??(_O)"
+
+msgctxt "Stock label"
+msgid "_Open"
+msgstr "??(_O)"
+
+msgctxt "Stock label"
+msgid "_Paste"
+msgstr "??(_P)"
+
+msgctxt "Stock label"
+msgid "_Preferences"
+msgstr "????(_P)"
+
+msgctxt "Stock label"
+msgid "_Print"
+msgstr "??(_P)"
+
+msgctxt "Stock label"
+msgid "_Properties"
+msgstr "??(_P)"
+
+msgctxt "Stock label"
+msgid "_Quit"
+msgstr "??(_Q)"
+
+msgctxt "Stock label"
+msgid "_Redo"
+msgstr "????(_R)"
+
+msgctxt "Stock label"
+msgid "_Refresh"
+msgstr "????(_R)"
+
+msgctxt "Stock label"
+msgid "_Remove"
+msgstr "??(_R)"
+
+msgctxt "Stock label"
+msgid "_Revert"
+msgstr "??(_R)"
+
+msgctxt "Stock label"
+msgid "_Right"
+msgstr "??(_R)"
+
+msgctxt "Stock label"
+msgid "_Save"
+msgstr "??(_S)"
+
+msgctxt "Stock label"
+msgid "_Spell Check"
+msgstr "????(_S)"
+
+msgctxt "Stock label"
+msgid "_Stop"
+msgstr "??(_S)"
+
+msgctxt "Stock label"
+msgid "_Strikethrough"
+msgstr "???(_S)"
+
+msgctxt "Stock label"
+msgid "_Undelete"
+msgstr "????(_U)"
+
+msgctxt "Stock label"
+msgid "_Underline"
+msgstr "??(_U)"
+
+msgctxt "Stock label"
+msgid "_Undo"
+msgstr "??(_U)"
+
+msgctxt "Stock label"
+msgid "_Yes"
+msgstr "?(_Y)"
+
+msgctxt "Stock label, media"
+msgid "P_ause"
+msgstr "??(_A)"
+
+msgctxt "Stock label, media"
+msgid "Pre_vious"
+msgstr "???(_V)"
+
+msgctxt "Stock label, media"
+msgid "R_ewind"
+msgstr "??(_E)"
+
+msgctxt "Stock label, media"
+msgid "_Forward"
+msgstr "??(_F)"
+
+msgctxt "Stock label, media"
+msgid "_Next"
+msgstr "???(_N)"
+
+msgctxt "Stock label, media"
+msgid "_Play"
+msgstr "??(_P)"
+
+msgctxt "Stock label, media"
+msgid "_Record"
+msgstr "??(_R)"
+
+msgctxt "Stock label, media"
+msgid "_Stop"
+msgstr "??(_S)"
+
+msgctxt "Stock label, navigation"
+msgid "_Back"
+msgstr "??(_B)"
+
+msgctxt "Stock label, navigation"
+msgid "_Bottom"
+msgstr "??(_B)"
+
+msgctxt "Stock label, navigation"
+msgid "_Down"
+msgstr "??(_D)"
+
+msgctxt "Stock label, navigation"
+msgid "_First"
+msgstr "???(_F)"
+
+msgctxt "Stock label, navigation"
+msgid "_Forward"
+msgstr "??(_F)"
+
+msgctxt "Stock label, navigation"
+msgid "_Last"
+msgstr "???(_L)"
+
+msgctxt "Stock label, navigation"
+msgid "_Top"
+msgstr "??(_T)"
+
+msgctxt "Stock label, navigation"
+msgid "_Up"
+msgstr "??(_U)"
+
+msgid "TGA image has invalid dimensions"
+msgstr "TGA ???????"
+
+msgid "TGA image type not supported"
+msgstr "??????? TGA ??"
+
+msgid "TIFFClose operation failed"
+msgstr "TIFFClose ????"
+
+msgid "T_wo-sided:"
+msgstr "??(_W)?"
+
+msgid "Tag \"%s\" already defined"
+msgstr "???%s????"
+
+msgid "Tag \"%s\" does not exist in buffer and tags can not be created."
+msgstr "???%s???????????????"
+
+msgid "Tag \"%s\" has invalid priority \"%s\""
+msgstr "???%s???????????%s?"
+
+msgid "Tag \"%s\" has not been defined."
+msgstr "???%s????"
+
+msgid "Thai-Lao"
+msgstr "??-???"
+
+msgid "The ANI image format"
+msgstr "ANI ????"
+
+msgid "The BMP image format"
+msgstr "BMP ????"
+
+msgid "The EMF image format"
+msgstr "EMF ????"
+
+msgid "The GIF image format"
+msgstr "GIF ????"
+
+msgid "The ICNS image format"
+msgstr "ICNS ????"
+
+msgid "The ICO image format"
+msgstr "ICO ????"
+
+msgid "The JPEG 2000 image format"
+msgstr "JPEG 2000 ????"
+
+msgid "The JPEG image format"
+msgstr "JPEG ????"
+
+msgid "The PCX image format"
+msgstr "PCX ????"
+
+msgid "The PNG image format"
+msgstr "PNG ????"
+
+msgid "The PNM/PBM/PGM/PPM image format family"
+msgstr "PNM/PBM/PGM/PPM ??????"
+
+msgid "The Sun raster image format"
+msgstr "Sun raster ????"
+
+msgid "The TIFF image format"
+msgstr "TIFF ????"
+
+msgid "The Targa image format"
+msgstr "Targa ????"
+
+msgid "The WBMP image format"
+msgstr "WBMP ????"
+
+msgid "The WMF image format"
+msgstr "WMF ????"
+
+msgid "The XBM image format"
+msgstr "XBM ????"
+
+msgid "The XPM image format"
+msgstr "XPM ????"
+
+msgid "The attribute \"%s\" was found twice on the <%s> element"
+msgstr "???%s????? <%s> ????????"
+
+msgid ""
+"The color you've chosen. You can drag this color to a palette entry to save "
+"it for use in the future."
+msgstr "??????????????????????????????"
+
+msgid "The cover is open on printer '%s'."
+msgstr "????%s?????????"
+
+msgid "The door is open on printer '%s'."
+msgstr "????%s??????????"
+
+msgid ""
+"The file \"%s\" resides on another machine (called %s) and may not be "
+"available to this program.\n"
+"Are you sure that you want to select it?"
+msgstr ""
+"???%s????????????? %s?????????????????\n"
+"??????????"
+
+msgid ""
+"The file already exists in \"%s\".  Replacing it will overwrite its contents."
+msgstr "????????%s?????????????"
+
+msgid "The filename \"%s\" contains symbols that are not allowed in filenames"
+msgstr "?????%s?????????????????"
+
+msgid ""
+"The filename \"%s\" couldn't be converted to UTF-8. (try setting the "
+"environment variable G_FILENAME_ENCODING): %s"
+msgstr ""
+"?????%s?????? UTF-8?????????? G_FILENAME_ENCODING??%s"
+
+msgid "The folder contents could not be displayed"
+msgstr "?????????"
+
+msgid "The folder could not be created"
+msgstr "???????"
+
+msgid ""
+"The folder could not be created, as a file with the same name already "
+"exists.  Try using a different name for the folder, or rename the file first."
+msgstr ""
+"??????????????????????????????????????"
+"?????????"
+
+msgid ""
+"The folder name \"%s\" contains symbols that are not allowed in filenames"
+msgstr "??????%s????????????????"
+
+msgid "The generated cache was invalid.\n"
+msgstr "???????????\n"
+
+msgid "The license of the program"
+msgstr "???????"
+
+msgid "The most probable reason is that a temporary file could not be created."
+msgstr "????????????????"
+
+msgid ""
+"The previously-selected color, for comparison to the color you're selecting "
+"now. You can drag this color to a palette entry, or select this color as "
+"current by dragging it to the other color swatch alongside."
+msgstr ""
+"?????????????????????????????????????\n"
+"???????????????????????????????"
+
+msgid ""
+"The program was not able to create a connection to the indexer daemon.  "
+"Please make sure it is running."
+msgstr "???????? indexer ??????????????????"
+
+msgid "There is a problem on printer '%s'."
+msgstr "????%s??????"
+
+msgid "This build of gdk-pixbuf does not support saving the image format: %s"
+msgstr "? gdk-pixbuf ???????????????%s"
+
+msgid "This function is not implemented for widgets of class '%s'"
+msgstr "??????????????%s????"
+
+msgid "Tigrigna-Eritrean (EZ+)"
+msgstr "??????[?????] (EZ+)"
+
+msgid "Tigrigna-Ethiopian (EZ+)"
+msgstr "??????[????] (EZ+)"
+
+msgid "Top Secret"
+msgstr "????"
+
+msgid "Top to bottom, left to right"
+msgstr "?????????"
+
+msgid "Top to bottom, right to left"
+msgstr "?????????"
+
+msgid "Topdown BMP images cannot be compressed"
+msgstr "??????? BMP ???????"
+
+msgid "Transformed JPEG has zero width or height."
+msgstr "???? JPEG ????????"
+
+msgid "Transformed JPEG2000 has zero width or height"
+msgstr "???? JPEG2000 ???????"
+
+msgid "Transformed PNG has unsupported number of channels, must be 3 or 4."
+msgstr "???? PNG ??????????????? 3 ? 4?"
+
+msgid "Transformed PNG has zero width or height."
+msgstr "???? PNG ?????????"
+
+msgid "Transformed PNG not RGB or RGBA."
+msgstr "???? PNG ??????? RGB ? RGBA?"
+
+msgid "Translated by"
+msgstr "??"
+
+msgid "Transparency of the color."
+msgstr "???????????"
+
+msgid "Turn off verbose output"
+msgstr "??????"
+
+msgid "Turns volume down or up"
+msgstr "???????"
+
+msgid "Two Sided"
+msgstr "??"
+
+msgid "Type a file name"
+msgstr "??????"
+
+msgid "Type name of new folder"
+msgstr "?????????"
+
+msgid "Unable to find an item with URI '%s'"
+msgstr "????? URI ?%s? ???"
+
+msgid "Unable to find include file: \"%s\""
+msgstr "???????????%s?"
+
+msgid "Unable to load image-loading module: %s: %s"
+msgstr "??????????????%s?%s"
+
+msgid "Unable to locate image file in pixmap_path: \"%s\""
+msgstr "??? pixmap_path ????????%s?"
+
+msgid "Unable to locate theme engine in module_path: \"%s\","
+msgstr "??? module_path ???????????%s??"
+
+msgid "Unclassified"
+msgstr "???"
+
+msgid "Unexpected bitdepth for colormap entries"
+msgstr "????????????"
+
+msgid "Unexpected character data on line %d char %d"
+msgstr "? %d ?? %d ??????????"
+
+msgid "Unexpected end of PNM image data"
+msgstr "PNM ????????"
+
+msgid "Unexpected icon chunk in animation"
+msgstr "?????????????"
+
+msgid "Unexpected start tag '%s' on line %d char %d"
+msgstr "? %2$d ?? %3$d ???????????%1$s?"
+
+msgid "Unhandled tag: '%s'"
+msgstr "????????%s?"
+
+msgid "Unknown"
+msgstr "??"
+
+msgid "Unknown error when trying to deserialize %s"
+msgstr "???? %s ????????"
+
+msgid "Unknown item"
+msgstr "????"
+
+msgid "Unrecognized image file format"
+msgstr "??????????"
+
+msgid "Unspecified error"
+msgstr "???????"
+
+msgid "Unsupported JPEG color space (%s)"
+msgstr "???? JPEG ???? (%s)"
+
+msgid "Unsupported animation type"
+msgstr "????????"
+
+msgid "Unsupported depth for ICO file: %d"
+msgstr "ICO ????????????%d"
+
+msgid "Unsupported icon type"
+msgstr "????????"
+
+msgid "Unsupported image format for GDI+"
+msgstr "???? GDI+ ????"
+
+msgid "Untitled filter"
+msgstr "????????"
+
+msgid "Up Path"
+msgstr "????"
+
+msgid "Urgent"
+msgstr "??"
+
+msgid "Validate existing icon cache"
+msgstr "?????????"
+
+msgid "Value for PNG text chunk %s cannot be converted to ISO-8859-1 encoding."
+msgstr "PNG text ????? %s ????? ISO-8859-1 ???"
+
+msgid "Version %s of the GIF file format is not supported"
+msgstr "??? %s ??? GIF ????"
+
+msgid "Vietnamese (VIQR)"
+msgstr "??? (VIQR)"
+
+msgid "Volume"
+msgstr "??"
+
+msgid "Volume Down"
+msgstr "????"
+
+msgid "Volume Up"
+msgstr "????"
+
+msgid "Width or height of TIFF image is zero"
+msgstr "TIFF ??????????"
+
+msgid "Window"
+msgstr "??"
+
+msgid "Written by"
+msgstr "????"
+
+msgid "X Input Method"
+msgstr "????? (XIM)"
+
+msgid "X _tilt:"
+msgstr "X ??(_T)?"
+
+msgid "X display to use"
+msgstr "??? X ??"
+
+msgid "X screen to use"
+msgstr "??? X ??"
+
+msgid "XPM file has image height <= 0"
+msgstr "XPM ??????? 0"
+
+msgid "XPM file has image width <= 0"
+msgstr "XPM ??????? 0"
+
+msgid "XPM file has invalid number of colors"
+msgstr "XPM ??????????"
+
+msgid "XPM has invalid number of chars per pixel"
+msgstr "XPM ???????????????"
+
+msgid "Y t_ilt:"
+msgstr "X ??(_I)?"
+
+msgid "Yesterday at %H:%M"
+msgstr "??? %H:%M"
+
+msgid ""
+"You can enter an HTML-style hexadecimal color value, or simply a color name "
+"such as 'orange' in this entry."
+msgstr ""
+"??????? HTML ??? 16 ??????????orange?????????"
+
+msgid "ZWJ Zero width _joiner"
+msgstr "ZW_J ??????"
+
+msgid "ZWNJ Zero width _non-joiner"
+msgstr "ZW_NJ ???????"
+
+msgid "ZWS _Zero width space"
+msgstr "_ZWS ?????"
+
+msgid "_Add"
+msgstr "??(_A)"
+
+msgid "_Add to Bookmarks"
+msgstr "????(_A)"
+
+msgid "_After:"
+msgstr "????(_A):"
+
+msgid "_All Pages"
+msgstr "????(_A)"
+
+msgid "_Billing info:"
+msgstr "????(_B)?"
+
+msgid "_Blue:"
+msgstr "?(_B):"
+
+msgid "_Bottom:"
+msgstr "?(_B):"
+
+msgid "_Browse for other folders"
+msgstr "???????(_B)"
+
+msgid "_Clear List"
+msgstr "????(_C)"
+
+msgid "_Device:"
+msgstr "??(_D):"
+
+msgid "_Domain:"
+msgstr "??(_D):"
+
+msgid "_Family:"
+msgstr "??(_F)?"
+
+msgid "_Files"
+msgstr "??(_F)"
+
+msgid "_Folder name:"
+msgstr "?????(_F)?"
+
+msgid "_Format for:"
+msgstr "??(_F)"
+
+msgid "_Gamma value"
+msgstr "_Gamma ?"
+
+msgid "_Green:"
+msgstr "?(_G):"
+
+msgid "_Height:"
+msgstr "??(_H):"
+
+msgid "_Hue:"
+msgstr "??(_H):"
+
+msgid "_Insert Unicode Control Character"
+msgstr "?????????(_I)"
+
+msgid "_Left:"
+msgstr "?(_L):"
+
+msgid "_License"
+msgstr "????(_L)"
+
+msgid "_Location:"
+msgstr "??(_L):"
+
+msgid "_Mode:"
+msgstr "??(_M)?"
+
+msgid "_Name:"
+msgstr "??(_N):"
+
+msgid "_New Folder"
+msgstr "?????(_N)"
+
+msgid "_Now"
+msgstr "??(_N)"
+
+msgid "_Only print:"
+msgstr "????(_O)?"
+
+msgid "_Orientation:"
+msgstr "??(_O):"
+
+msgid "_Output format"
+msgstr "????(_O)"
+
+msgid "_Palette:"
+msgstr "???(_P)?"
+
+msgid "_Paper size:"
+msgstr "????(_P):"
+
+msgid "_Password:"
+msgstr "??(_P):"
+
+msgid "_Places"
+msgstr "??(_P)"
+
+msgid "_Pressure:"
+msgstr "??(_P)?"
+
+msgid "_Preview:"
+msgstr "??(_P)?"
+
+msgid "_Red:"
+msgstr "?(_R):"
+
+msgid "_Remove"
+msgstr "??(_R)"
+
+msgid "_Remove From List"
+msgstr "??????(_R)"
+
+msgid "_Rename"
+msgstr "????(_R)"
+
+msgid "_Rename File"
+msgstr "??????(_R)"
+
+msgid "_Replace"
+msgstr "??(_R)"
+
+msgid "_Reverse"
+msgstr "??(_R)"
+
+msgid "_Right:"
+msgstr "?(_R):"
+
+msgid "_Saturation:"
+msgstr "??(_S):"
+
+msgid "_Save color here"
+msgstr "???????(_S)"
+
+msgid "_Save in folder:"
+msgstr "???????(_S)?"
+
+msgid "_Search:"
+msgstr "??(_S):"
+
+msgid "_Selection: "
+msgstr "????(_S): "
+
+msgid "_Style:"
+msgstr "??(_S):"
+
+msgid "_Top:"
+msgstr "?(_T):"
+
+msgid "_Username:"
+msgstr "?????(_U):"
+
+msgid "_Value:"
+msgstr "??(_V):"
+
+msgid "_Wheel:"
+msgstr "??(_W)?"
+
+msgid "_Width:"
+msgstr "??(_W):"
+
+msgid "_X:"
+msgstr "_X:"
+
+msgid "_Y:"
+msgstr "_Y:"
+
+msgid "abcdefghijk ABCDEFGHIJK"
+msgstr "abcd ABCD ??????"
+
+msgctxt "calendar year format"
+msgid "%Y"
+msgstr "%Y"
+
+msgid "calendar:MY"
+msgstr "calendar:YM"
+
+msgctxt "calendar:day:digits"
+msgid "%d"
+msgstr "%d"
+
+msgctxt "calendar:week:digits"
+msgid "%d"
+msgstr "%d"
+
+msgid "calendar:week_start:0"
+msgstr "calendar:week_start:0"
+
+msgid "default:LTR"
+msgstr "default:LTR"
+
+msgid "default:mm"
+msgstr "default:mm"
+
+msgid "different idatas found for symlinked '%s' and '%s'\n"
+msgstr "? symlinked?%s???%s??????? idatas\n"
+
+msgid "failed to allocate image buffer of %u byte"
+msgid_plural "failed to allocate image buffer of %u bytes"
+msgstr[0] "???? %u ?????????"
+
+msgid "inch"
+msgstr "??"
+
+msgctxt "input method menu"
+msgid "System"
+msgstr "??"
+
+msgctxt "input method menu"
+msgid "System (%s)"
+msgstr "?? (%s)"
+
+msgctxt "keyboard label"
+msgid "Alt"
+msgstr "Alt"
+
+msgctxt "keyboard label"
+msgid "BackSpace"
+msgstr "BackSpace"
+
+msgctxt "keyboard label"
+msgid "Backslash"
+msgstr "Backslash"
+
+msgctxt "keyboard label"
+msgid "Begin"
+msgstr "??"
+
+msgctxt "keyboard label"
+msgid "Ctrl"
+msgstr "Ctrl"
+
+msgctxt "keyboard label"
+msgid "Delete"
+msgstr "Delete"
+
+msgctxt "keyboard label"
+msgid "Down"
+msgstr "Down"
+
+msgctxt "keyboard label"
+msgid "End"
+msgstr "End"
+
+msgctxt "keyboard label"
+msgid "Escape"
+msgstr "Escape"
+
+msgctxt "keyboard label"
+msgid "Home"
+msgstr "Home"
+
+msgctxt "keyboard label"
+msgid "Hyper"
+msgstr "Hyper"
+
+msgctxt "keyboard label"
+msgid "Insert"
+msgstr "Insert"
+
+msgctxt "keyboard label"
+msgid "KP_Begin"
+msgstr "KP_Begin"
+
+msgctxt "keyboard label"
+msgid "KP_Delete"
+msgstr "KP_Delete"
+
+msgctxt "keyboard label"
+msgid "KP_Down"
+msgstr "KP_Down"
+
+msgctxt "keyboard label"
+msgid "KP_End"
+msgstr "KP_End"
+
+msgctxt "keyboard label"
+msgid "KP_Enter"
+msgstr "KP_Enter"
+
+msgctxt "keyboard label"
+msgid "KP_Home"
+msgstr "KP_Home"
+
+msgctxt "keyboard label"
+msgid "KP_Insert"
+msgstr "KP_Insert"
+
+msgctxt "keyboard label"
+msgid "KP_Left"
+msgstr "KP_Left"
+
+msgctxt "keyboard label"
+msgid "KP_Next"
+msgstr "KP_Next"
+
+msgctxt "keyboard label"
+msgid "KP_Page_Down"
+msgstr "KP_Page_Down"
+
+msgctxt "keyboard label"
+msgid "KP_Page_Up"
+msgstr "KP_Page_Up"
+
+msgctxt "keyboard label"
+msgid "KP_Prior"
+msgstr "KP_Prior"
+
+msgctxt "keyboard label"
+msgid "KP_Right"
+msgstr "KP_Right"
+
+msgctxt "keyboard label"
+msgid "KP_Space"
+msgstr "KP_Space"
+
+msgctxt "keyboard label"
+msgid "KP_Tab"
+msgstr "KP_Tab"
+
+msgctxt "keyboard label"
+msgid "KP_Up"
+msgstr "KP_Up"
+
+msgctxt "keyboard label"
+msgid "Left"
+msgstr "Left"
+
+msgctxt "keyboard label"
+msgid "Meta"
+msgstr "Meta"
+
+msgctxt "keyboard label"
+msgid "Multi_key"
+msgstr "Multi_key"
+
+msgctxt "keyboard label"
+msgid "Num_Lock"
+msgstr "Num_Lock"
+
+msgctxt "keyboard label"
+msgid "Page_Down"
+msgstr "Page_Down"
+
+msgctxt "keyboard label"
+msgid "Page_Up"
+msgstr "Page_Up"
+
+msgctxt "keyboard label"
+msgid "Pause"
+msgstr "Pause"
+
+msgctxt "keyboard label"
+msgid "Print"
+msgstr "Print"
+
+msgctxt "keyboard label"
+msgid "Return"
+msgstr "Return"
+
+msgctxt "keyboard label"
+msgid "Right"
+msgstr "Right"
+
+msgctxt "keyboard label"
+msgid "Scroll_Lock"
+msgstr "Scroll_Lock"
+
+msgctxt "keyboard label"
+msgid "Shift"
+msgstr "Shift"
+
+msgctxt "keyboard label"
+msgid "Space"
+msgstr "Space"
+
+msgctxt "keyboard label"
+msgid "Super"
+msgstr "Super"
+
+msgctxt "keyboard label"
+msgid "Sys_Req"
+msgstr "Sys_Req"
+
+msgctxt "keyboard label"
+msgid "Tab"
+msgstr "Tab"
+
+msgctxt "keyboard label"
+msgid "Up"
+msgstr "Up"
+
+msgid "mm"
+msgstr "??"
+
+msgid "none"
+msgstr "??"
+
+msgid "output.%s"
+msgstr "output.%s"
+
+msgctxt "paper size"
+msgid "#10 Envelope"
+msgstr "10 ???"
+
+msgctxt "paper size"
+msgid "#11 Envelope"
+msgstr "11 ???"
+
+msgctxt "paper size"
+msgid "#12 Envelope"
+msgstr "12 ??"
+
+msgctxt "paper size"
+msgid "#14 Envelope"
+msgstr "14 ???"
+
+msgctxt "paper size"
+msgid "#9 Envelope"
+msgstr "9 ???"
+
+msgctxt "paper size"
+msgid "10x11"
+msgstr "10x11"
+
+msgctxt "paper size"
+msgid "10x13"
+msgstr "10x13"
+
+msgctxt "paper size"
+msgid "10x14"
+msgstr "10x14"
+
+msgctxt "paper size"
+msgid "10x15"
+msgstr "10x15"
+
+msgctxt "paper size"
+msgid "11x12"
+msgstr "11x12"
+
+msgctxt "paper size"
+msgid "11x15"
+msgstr "11x15"
+
+msgctxt "paper size"
+msgid "12x19"
+msgstr "12x19"
+
+msgctxt "paper size"
+msgid "5x7"
+msgstr "5x7"
+
+msgctxt "paper size"
+msgid "6x9 Envelope"
+msgstr "6x9 ????"
+
+msgctxt "paper size"
+msgid "7x9 Envelope"
+msgstr "7x9 ????"
+
+msgctxt "paper size"
+msgid "9x11 Envelope"
+msgstr "9x11 ????"
+
+msgctxt "paper size"
+msgid "A0"
+msgstr "A0"
+
+msgctxt "paper size"
+msgid "A0x2"
+msgstr "A0x2"
+
+msgctxt "paper size"
+msgid "A0x3"
+msgstr "A0x3"
+
+msgctxt "paper size"
+msgid "A1"
+msgstr "A1"
+
+msgctxt "paper size"
+msgid "A10"
+msgstr "A10"
+
+msgctxt "paper size"
+msgid "A1x3"
+msgstr "A1x3"
+
+msgctxt "paper size"
+msgid "A1x4"
+msgstr "A1x4"
+
+msgctxt "paper size"
+msgid "A2"
+msgstr "A2"
+
+msgctxt "paper size"
+msgid "A2x3"
+msgstr "A2x3"
+
+msgctxt "paper size"
+msgid "A2x4"
+msgstr "A2x4"
+
+msgctxt "paper size"
+msgid "A2x5"
+msgstr "A2x5"
+
+msgctxt "paper size"
+msgid "A3"
+msgstr "A3"
+
+msgctxt "paper size"
+msgid "A3 Extra"
+msgstr "A3 Extra"
+
+msgctxt "paper size"
+msgid "A3x3"
+msgstr "A3x3"
+
+msgctxt "paper size"
+msgid "A3x4"
+msgstr "A3x4"
+
+msgctxt "paper size"
+msgid "A3x5"
+msgstr "A3x5"
+
+msgctxt "paper size"
+msgid "A3x6"
+msgstr "A3x6"
+
+msgctxt "paper size"
+msgid "A3x7"
+msgstr "A3x7"
+
+msgctxt "paper size"
+msgid "A4"
+msgstr "A4"
+
+msgctxt "paper size"
+msgid "A4 Extra"
+msgstr "?????"
+
+msgctxt "paper size"
+msgid "A4 Tab"
+msgstr "??????(_D)"
+
+msgctxt "paper size"
+msgid "A4x3"
+msgstr "A4x3"
+
+msgctxt "paper size"
+msgid "A4x4"
+msgstr "A4x4"
+
+msgctxt "paper size"
+msgid "A4x5"
+msgstr "A4x5"
+
+msgctxt "paper size"
+msgid "A4x6"
+msgstr "A4x6"
+
+msgctxt "paper size"
+msgid "A4x7"
+msgstr "A4x7"
+
+msgctxt "paper size"
+msgid "A4x8"
+msgstr "A4x8"
+
+msgctxt "paper size"
+msgid "A4x9"
+msgstr "A4x9"
+
+msgctxt "paper size"
+msgid "A5"
+msgstr "A5"
+
+msgctxt "paper size"
+msgid "A5 Extra"
+msgstr "?????"
+
+msgctxt "paper size"
+msgid "A6"
+msgstr "A6"
+
+msgctxt "paper size"
+msgid "A7"
+msgstr "A7"
+
+msgctxt "paper size"
+msgid "A8"
+msgstr "A8"
+
+msgctxt "paper size"
+msgid "A9"
+msgstr "A9"
+
+msgctxt "paper size"
+msgid "Arch A"
+msgstr "Arch A"
+
+msgctxt "paper size"
+msgid "Arch B"
+msgstr "Arch B"
+
+msgctxt "paper size"
+msgid "Arch C"
+msgstr "Arch C"
+
+msgctxt "paper size"
+msgid "Arch D"
+msgstr "Arch D"
+
+msgctxt "paper size"
+msgid "Arch E"
+msgstr "Arch E"
+
+msgctxt "paper size"
+msgid "B0"
+msgstr "B0"
+
+msgctxt "paper size"
+msgid "B1"
+msgstr "B1"
+
+msgctxt "paper size"
+msgid "B10"
+msgstr "B10"
+
+msgctxt "paper size"
+msgid "B2"
+msgstr "B2"
+
+msgctxt "paper size"
+msgid "B3"
+msgstr "B3"
+
+msgctxt "paper size"
+msgid "B4"
+msgstr "B4"
+
+msgctxt "paper size"
+msgid "B5"
+msgstr "B5"
+
+msgctxt "paper size"
+msgid "B5 Extra"
+msgstr "?????"
+
+msgctxt "paper size"
+msgid "B6"
+msgstr "B6"
+
+msgctxt "paper size"
+msgid "B6/C4"
+msgstr "B6/C4"
+
+msgctxt "paper size"
+msgid "B7"
+msgstr "B7"
+
+msgctxt "paper size"
+msgid "B8"
+msgstr "B8"
+
+msgctxt "paper size"
+msgid "B9"
+msgstr "B9"
+
+msgctxt "paper size"
+msgid "C0"
+msgstr "C0"
+
+msgctxt "paper size"
+msgid "C1"
+msgstr "C1"
+
+msgctxt "paper size"
+msgid "C10"
+msgstr "C10"
+
+msgctxt "paper size"
+msgid "C2"
+msgstr "C2"
+
+msgctxt "paper size"
+msgid "C3"
+msgstr "C3"
+
+msgctxt "paper size"
+msgid "C4"
+msgstr "C4"
+
+msgctxt "paper size"
+msgid "C5"
+msgstr "C5"
+
+msgctxt "paper size"
+msgid "C6"
+msgstr "C6"
+
+msgctxt "paper size"
+msgid "C6/C5"
+msgstr "C6/C5"
+
+msgctxt "paper size"
+msgid "C7"
+msgstr "C7"
+
+msgctxt "paper size"
+msgid "C7/C6"
+msgstr "C7/C6"
+
+msgctxt "paper size"
+msgid "C8"
+msgstr "C8"
+
+msgctxt "paper size"
+msgid "C9"
+msgstr "C9"
+
+msgctxt "paper size"
+msgid "Choukei 2 Envelope"
+msgstr "Choukei 2 ??"
+
+msgctxt "paper size"
+msgid "Choukei 3 Envelope"
+msgstr "Choukei 3 ??"
+
+msgctxt "paper size"
+msgid "Choukei 4 Envelope"
+msgstr "Choukei 4 ??"
+
+msgctxt "paper size"
+msgid "DL Envelope"
+msgstr "DL ??"
+
+msgctxt "paper size"
+msgid "Dai-pa-kai"
+msgstr "Dai-pa-kai"
+
+msgctxt "paper size"
+msgid "European edp"
+msgstr "????"
+
+msgctxt "paper size"
+msgid "Executive"
+msgstr "Executive"
+
+msgctxt "paper size"
+msgid "FanFold European"
+msgstr "FanFold European"
+
+msgctxt "paper size"
+msgid "FanFold German Legal"
+msgstr "FanFold German Legal"
+
+msgctxt "paper size"
+msgid "FanFold US"
+msgstr "FanFold US"
+
+msgctxt "paper size"
+msgid "Folio"
+msgstr "Folio"
+
+msgctxt "paper size"
+msgid "Folio sp"
+msgstr "Folio sp"
+
+msgctxt "paper size"
+msgid "Government Legal"
+msgstr "Government Legal"
+
+msgctxt "paper size"
+msgid "Government Letter"
+msgstr "Government Letter"
+
+msgctxt "paper size"
+msgid "Index 3x5"
+msgstr "Index 3x5"
+
+msgctxt "paper size"
+msgid "Index 4x6 (postcard)"
+msgstr "Index 4x6?????"
+
+msgctxt "paper size"
+msgid "Index 4x6 ext"
+msgstr "Index 4x6 ext"
+
+msgctxt "paper size"
+msgid "Index 5x8"
+msgstr "Index 5x8"
+
+msgctxt "paper size"
+msgid "Invite Envelope"
+msgstr "????"
+
+msgctxt "paper size"
+msgid "Invoice"
+msgstr "???"
+
+msgctxt "paper size"
+msgid "Italian Envelope"
+msgstr "?????"
+
+msgctxt "paper size"
+msgid "JB0"
+msgstr "JB0"
+
+msgctxt "paper size"
+msgid "JB1"
+msgstr "JB1"
+
+msgctxt "paper size"
+msgid "JB10"
+msgstr "JB10"
+
+msgctxt "paper size"
+msgid "JB2"
+msgstr "JB2"
+
+msgctxt "paper size"
+msgid "JB3"
+msgstr "JB3"
+
+msgctxt "paper size"
+msgid "JB4"
+msgstr "JB4"
+
+msgctxt "paper size"
+msgid "JB5"
+msgstr "JB5"
+
+msgctxt "paper size"
+msgid "JB6"
+msgstr "JB6"
+
+msgctxt "paper size"
+msgid "JB7"
+msgstr "JB7"
+
+msgctxt "paper size"
+msgid "JB8"
+msgstr "JB8"
+
+msgctxt "paper size"
+msgid "JB9"
+msgstr "JB9"
+
+msgctxt "paper size"
+msgid "Monarch Envelope"
+msgstr "Monarch Envelope"
+
+msgctxt "paper size"
+msgid "Personal Envelope"
+msgstr "????"
+
+msgctxt "paper size"
+msgid "Postfix Envelope"
+msgstr "Postfix ??"
+
+msgctxt "paper size"
+msgid "Quarto"
+msgstr "Quarto"
+
+msgctxt "paper size"
+msgid "RA0"
+msgstr "RA0"
+
+msgctxt "paper size"
+msgid "RA1"
+msgstr "RA1"
+
+msgctxt "paper size"
+msgid "RA2"
+msgstr "RA2"
+
+msgctxt "paper size"
+msgid "ROC 16k"
+msgstr "ROC 16k"
+
+msgctxt "paper size"
+msgid "ROC 8k"
+msgstr "ROC 8k"
+
+msgctxt "paper size"
+msgid "SRA0"
+msgstr "SRA0"
+
+msgctxt "paper size"
+msgid "SRA1"
+msgstr "SRA1"
+
+msgctxt "paper size"
+msgid "SRA2"
+msgstr "SRA2"
+
+msgctxt "paper size"
+msgid "Small Photo"
+msgstr "???"
+
+msgctxt "paper size"
+msgid "Super A"
+msgstr "Super A"
+
+msgctxt "paper size"
+msgid "Super B"
+msgstr "Super B"
+
+msgctxt "paper size"
+msgid "Tabloid"
+msgstr "Tabloid"
+
+msgctxt "paper size"
+msgid "US Legal"
+msgstr "US Legal"
+
+msgctxt "paper size"
+msgid "US Legal Extra"
+msgstr "US Legal Extra"
+
+msgctxt "paper size"
+msgid "US Letter"
+msgstr "US Letter"
+
+msgctxt "paper size"
+msgid "US Letter Extra"
+msgstr "US Letter Extra"
+
+msgctxt "paper size"
+msgid "US Letter Plus"
+msgstr "US Letter Plus"
+
+msgctxt "paper size"
+msgid "Wide Format"
+msgstr "???"
+
+msgctxt "paper size"
+msgid "a2 Envelope"
+msgstr "a2 ??"
+
+msgctxt "paper size"
+msgid "asme_f"
+msgstr "asme_f"
+
+msgctxt "paper size"
+msgid "b-plus"
+msgstr "b-plus"
+
+msgctxt "paper size"
+msgid "c"
+msgstr "c"
+
+msgctxt "paper size"
+msgid "c5 Envelope"
+msgstr "c5 ??"
+
+msgctxt "paper size"
+msgid "d"
+msgstr "d"
+
+msgctxt "paper size"
+msgid "e"
+msgstr "e"
+
+msgctxt "paper size"
+msgid "edp"
+msgstr "edp"
+
+msgctxt "paper size"
+msgid "f"
+msgstr "f"
+
+msgctxt "paper size"
+msgid "hagaki (postcard)"
+msgstr "hagaki?????"
+
+msgctxt "paper size"
+msgid "jis exec"
+msgstr "jis exec"
+
+msgctxt "paper size"
+msgid "juuro-ku-kai"
+msgstr "juuro-ku-kai"
+
+msgctxt "paper size"
+msgid "kahu Envelope"
+msgstr "kahu ??"
+
+msgctxt "paper size"
+msgid "kaku2 Envelope"
+msgstr "kahu2 ??"
+
+msgctxt "paper size"
+msgid "oufuku (reply postcard)"
+msgstr "oufuku (?????)"
+
+msgctxt "paper size"
+msgid "pa-kai"
+msgstr "pa-kai"
+
+msgctxt "paper size"
+msgid "prc 16k"
+msgstr "prc 16k"
+
+msgctxt "paper size"
+msgid "prc 32k"
+msgstr "prc 32k"
+
+msgctxt "paper size"
+msgid "prc1 Envelope"
+msgstr "prc1 ??"
+
+msgctxt "paper size"
+msgid "prc10 Envelope"
+msgstr "prc10 ??"
+
+msgctxt "paper size"
+msgid "prc2 Envelope"
+msgstr "prc2 ??"
+
+msgctxt "paper size"
+msgid "prc3 Envelope"
+msgstr "prc3 ??"
+
+msgctxt "paper size"
+msgid "prc4 Envelope"
+msgstr "prc4 ??"
+
+msgctxt "paper size"
+msgid "prc5 Envelope"
+msgstr "prc5 ??"
+
+msgctxt "paper size"
+msgid "prc6 Envelope"
+msgstr "prc6 ??"
+
+msgctxt "paper size"
+msgid "prc7 Envelope"
+msgstr "prc7 ??"
+
+msgctxt "paper size"
+msgid "prc8 Envelope"
+msgstr "prc8 ??"
+
+msgctxt "paper size"
+msgid "you4 Envelope"
+msgstr "you4 ??"
+
+msgctxt "print operation status"
+msgid "Blocking on issue"
+msgstr "??????"
+
+msgctxt "print operation status"
+msgid "Finished"
+msgstr "???"
+
+msgctxt "print operation status"
+msgid "Finished with error"
+msgstr "????????"
+
+msgctxt "print operation status"
+msgid "Generating data"
+msgstr "??????"
+
+msgctxt "print operation status"
+msgid "Initial state"
+msgstr "?????"
+
+msgctxt "print operation status"
+msgid "Preparing to print"
+msgstr "??????"
+
+msgctxt "print operation status"
+msgid "Printing"
+msgstr "????"
+
+msgctxt "print operation status"
+msgid "Sending data"
+msgstr "??????"
+
+msgctxt "print operation status"
+msgid "Waiting"
+msgstr "????"
+
+msgctxt "progress bar label"
+msgid "%d %%"
+msgstr "%d %%"
+
+msgctxt "recent menu label"
+msgid "%d. %s"
+msgstr "%d. %s"
+
+msgctxt "recent menu label"
+msgid "_%d. %s"
+msgstr "_%d. %s"
+
+msgid "test-output.%s"
+msgstr "test-output.%s"
+
+msgid "unsupported RAS image variation"
+msgstr "???? RAS ????"
+
+msgctxt "volume percentage"
+msgid "%d %%"
+msgstr "%d %%"
+
+msgctxt "year measurement template"
+msgid "2000"
+msgstr "2000"



From mean at mail.berlios.de  Sun Jul 26 12:45:41 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sun, 26 Jul 2009 12:45:41 +0200
Subject: [Avidemux-svn-commit] r5157 - in
	branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder:
	ADM_vidEnc_x264/qt4 ADM_vidEnc_xvid/qt4
Message-ID: <200907261045.n6QAjfvF014950@sheep.berlios.de>

Author: mean
Date: 2009-07-26 12:45:40 +0200 (Sun, 26 Jul 2009)
New Revision: 5157

Modified:
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.h
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidConfigDialog.h
Log:
[plugins] Fix build with gcc 4.4

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.h	2009-07-26 07:20:58 UTC (rev 5156)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.h	2009-07-26 10:45:40 UTC (rev 5157)
@@ -1,7 +1,8 @@
 #ifndef x264ConfigDialog_h
 #define x264ConfigDialog_h
-
 #include "ui_x264ConfigDialog.h"
+#define ADM_LEGACY_PROGGY
+#include "ADM_default.h"
 #include "../x264Options.h"
 #include "x264ZoneTableModel.h"
 #include "x264ZoneTableDelegate.h"

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidConfigDialog.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidConfigDialog.h	2009-07-26 07:20:58 UTC (rev 5156)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidConfigDialog.h	2009-07-26 10:45:40 UTC (rev 5157)
@@ -2,6 +2,8 @@
 #define XvidConfigDialog_h
 
 #include "ui_xvidConfigDialog.h"
+#define ADM_LEGACY_PROGGY
+#include "ADM_default.h"
 #include "../xvidOptions.h"
 
 extern "C"



From gruntster at mail.berlios.de  Sun Jul 26 13:26:59 2009
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Sun, 26 Jul 2009 13:26:59 +0200
Subject: [Avidemux-svn-commit] r5158 -
	branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreImage/src
Message-ID: <200907261126.n6QBQxIO028673@sheep.berlios.de>

Author: gruntster
Date: 2009-07-26 13:26:46 +0200 (Sun, 26 Jul 2009)
New Revision: 5158

Modified:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreImage/src/CMakeLists.txt
Log:
[cmake] add ffmpeg as dependency for coreImage so Make can run using multiple jobs

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreImage/src/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreImage/src/CMakeLists.txt	2009-07-26 10:45:40 UTC (rev 5157)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreImage/src/CMakeLists.txt	2009-07-26 11:26:46 UTC (rev 5158)
@@ -26,4 +26,5 @@
 ENDIF (APPLE)
 
 TARGET_LINK_LIBRARIES(ADM_coreImage ADM_core ADM_coreUI ADM_libswscale ADM_libpostproc)
+add_dependencies(ADM_coreImage ffmpeg)
 INSTALL(TARGETS ADM_coreImage RUNTIME DESTINATION ${BIN_DIR}  LIBRARY DESTINATION lib  ARCHIVE DESTINATION lib)



From mean at mail.berlios.de  Sun Jul 26 19:14:19 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sun, 26 Jul 2009 19:14:19 +0200
Subject: [Avidemux-svn-commit] r5159 -
	branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_GTK/src
Message-ID: <200907261714.n6QHEJaA015060@sheep.berlios.de>

Author: mean
Date: 2009-07-26 19:14:16 +0200 (Sun, 26 Jul 2009)
New Revision: 5159

Modified:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_GTK/src/FAC_configMenu.cpp
Log:
[Gtk/Menu] Fix const char/char mixup

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_GTK/src/FAC_configMenu.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_GTK/src/FAC_configMenu.cpp	2009-07-26 11:26:46 UTC (rev 5158)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_GTK/src/FAC_configMenu.cpp	2009-07-26 17:14:16 UTC (rev 5159)
@@ -160,7 +160,7 @@
 				delete menuData->configs;
 				menuData->configs = fillConfigurationComboBox(menuData->combo, menuData->userConfigDir, menuData->systemConfigDir);
 
-				const char* baseName = ADM_GetFileName(filename);
+				char* baseName = (char *)ADM_GetFileName(filename);
 				char *ext = strrchr(baseName, '.');
 
 				if (ext)



From mean at mail.berlios.de  Sun Jul 26 20:38:46 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sun, 26 Jul 2009 20:38:46 +0200
Subject: [Avidemux-svn-commit] r5160 - in branches/avidemux_2.6_branch_mean:
	avidemux_core/ADM_coreMuxer/include avidemux_core/ADM_coreMuxer/src
	avidemux_plugins/ADM_muxers/muxerAvi
	avidemux_plugins/ADM_muxers/muxerFlv
	avidemux_plugins/ADM_muxers/muxerRaw
Message-ID: <200907261838.n6QIckUq026353@sheep.berlios.de>

Author: mean
Date: 2009-07-26 20:38:44 +0200 (Sun, 26 Jul 2009)
New Revision: 5160

Modified:
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreMuxer/include/ADM_muxer.h
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreMuxer/src/ADM_muxerUtils.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerAvi/muxerAvi.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerFlv/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerFlv/muxerFlv.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerRaw/muxerRaw.cpp
Log:
[muxers] Add progress bar to base class, refs #4

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreMuxer/include/ADM_muxer.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreMuxer/include/ADM_muxer.h	2009-07-26 17:14:16 UTC (rev 5159)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreMuxer/include/ADM_muxer.h	2009-07-26 18:38:44 UTC (rev 5160)
@@ -9,6 +9,9 @@
 #include "ADM_default.h"
 #include "ADM_audioStream.h"
 #include "DIA_working.h"
+#include "DIA_coreToolkit.h"
+#include "DIA_encoding.h"
+
 /**
     \class ADM_videoStream
 
@@ -19,6 +22,8 @@
             uint32_t width,height,averageFps1000;
             uint32_t fourCC;
             bool     isCFR;
+
+
             DIA_workingBase *encoding;
 public:
                       ADM_videoStream() {};
@@ -45,19 +50,25 @@
                 ADM_videoStream *vStream;       // Internal copy of the parameters
                 ADM_audioStream  **aStreams;
                 uint32_t         nbAStreams;
+
+
+                uint64_t videoIncrement; // Used/set by initUI
+                uint64_t videoDuration;
                 DIA_workingBase  *encoding;
                 
 public:
                           ADM_muxer() {vStream=NULL;aStreams=NULL;nbAStreams=0;encoding=NULL;};
-        virtual           ~ADM_muxer() {if(encoding) delete encoding;encoding=NULL;};
+        virtual           ~ADM_muxer() {closeUI();};
         virtual bool      open(const char *filename,   ADM_videoStream *videoStream,
                                 uint32_t nbAudioTrack, ADM_audioStream **audioStreams)=0;
 
         virtual  bool     save(void)=0;
         virtual  bool     close(void)=0; 
         
+        virtual  bool     initUI(const char *title);
+        virtual  bool     updateUI(uint64_t time);
+        virtual  bool     closeUI(void);
 
-
 };
 #endif
 

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreMuxer/src/ADM_muxerUtils.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreMuxer/src/ADM_muxerUtils.cpp	2009-07-26 17:14:16 UTC (rev 5159)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreMuxer/src/ADM_muxerUtils.cpp	2009-07-26 18:38:44 UTC (rev 5160)
@@ -61,3 +61,47 @@
     i*=scale->num;
     return i;
 }
+/**
+    \fn     initUI
+    \brief  initialize the progress bar
+*/
+bool     ADM_muxer::initUI(const char *title)
+{
+ float f=(float)vStream->getAvgFps1000();
+        f=1000./f;
+        f*=1000000;
+        videoIncrement=(uint64_t)f;  // Video increment in AVI-Tick
+        videoDuration=vStream->getVideoDuration();
+
+        encoding=createWorking(title);
+        return true;
+}
+/**
+        \fn updateUI
+        \brief Update the progress bar
+        @return false if abort request, true if keep going
+*/
+
+bool     ADM_muxer::updateUI(uint64_t time)
+{
+            ADM_assert(encoding);
+            uint32_t  percent=(100*time)/videoDuration;
+            if(percent>100) percent=100;
+            encoding->update(percent);
+            if(!encoding->isAlive()) 
+            {
+                return false;
+            }
+            return true;
+}
+/**
+        \fn closeUI
+*/
+
+bool     ADM_muxer::closeUI(void)
+{
+        if(encoding) delete encoding;
+        encoding=NULL;
+        return true;
+}
+// EOF

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerAvi/muxerAvi.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerAvi/muxerAvi.cpp	2009-07-26 17:14:16 UTC (rev 5159)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerAvi/muxerAvi.cpp	2009-07-26 18:38:44 UTC (rev 5160)
@@ -20,10 +20,8 @@
 #include "ADM_default.h"
 #include "fourcc.h"
 #include "muxerAvi.h"
-#include "DIA_coreToolkit.h"
-#include "DIA_encoding.h"
-//#include "DIA_encoding.h"
 
+
 #define ADM_NO_PTS 0xFFFFFFFFFFFFFFFFLL // FIXME
 #define AUDIO_BUFFER_SIZE 48000*6*sizeof(float)
 // Fwd ref
@@ -146,14 +144,9 @@
     uint32_t len,flags;
     uint64_t pts,dts,rawDts;
     uint64_t lastVideoDts=0;
-    uint64_t videoIncrement;
-    uint64_t videoDuration=vStream->getVideoDuration();
     int ret;
     int written=0;
-    float f=(float)vStream->getAvgFps1000();
-    f=1000./f;
-    f*=1000000;
-    videoIncrement=(uint64_t)f;  // Video increment in AVI-Tick
+   
 
     audioBuffer=new uint8_t[AUDIO_BUFFER_SIZE];
     videoBuffer=new uint8_t[bufSize];
@@ -165,7 +158,8 @@
     if(dts==ADM_NO_PTS) dts=0;
     lastVideoDts=dts;
 
-    encoding=createWorking("Saving avi");
+    initUI("Saving Avi");
+    
 
     while(1)
     {
@@ -190,28 +184,23 @@
 
             fillAudio(aviTime+videoIncrement);    // and matching audio
 
-
-            uint32_t  percent=(100*aviTime)/videoDuration;
-            if(percent>100) percent=100;
-            
-            encoding->update(percent);
-            if(!encoding->isAlive()) 
-            {
+            if(updateUI(aviTime)==false)
+            {  
                 result=false;
                 goto abt;
             }
-
+           
             written++;
             aviTime+=videoIncrement;
     }
 abt:
+    closeUI();
     writter.setEnd();
     delete [] videoBuffer;
     videoBuffer=NULL;
     delete [] audioBuffer;
     audioBuffer=NULL;
     printf("[AviMuxer] Wrote %d frames, nb audio streams %d\n",written,nbAStreams);
-    
     return result;
 }
 /**

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerFlv/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerFlv/CMakeLists.txt	2009-07-26 17:14:16 UTC (rev 5159)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerFlv/CMakeLists.txt	2009-07-26 18:38:44 UTC (rev 5160)
@@ -6,7 +6,7 @@
 )
 
 ADD_LIBRARY(ADM_mx_flv SHARED ${ADM_flv_SRCS})
-TARGET_LINK_LIBRARIES(ADM_mx_flv  ADM_libavutil6 ADM_libavformat6)
+TARGET_LINK_LIBRARIES(ADM_mx_flv  ADM_libavutil6 ADM_libavformat6 ADM_libavcodec6)
 INCLUDE_DIRECTORIES("${AVIDEMUX_SOURCE_DIR}/avidemux/ADM_libraries/ADM_ffmpeg")
 
 INIT_MUXER(ADM_mx_flv)

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerFlv/muxerFlv.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerFlv/muxerFlv.cpp	2009-07-26 17:14:16 UTC (rev 5159)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerFlv/muxerFlv.cpp	2009-07-26 18:38:44 UTC (rev 5160)
@@ -302,19 +302,16 @@
     uint32_t len,flags;
     uint64_t pts,dts,rawDts;
     uint64_t lastVideoDts=0;
-    uint64_t videoIncrement;
     int ret;
+    bool result=true;
     int written=0;
-    float f=(float)vStream->getAvgFps1000();
-    f=1000./f;
-    f*=1000000;
-    videoIncrement=(uint64_t)f;
 #define AUDIO_BUFFER_SIZE 48000*6*sizeof(float)
     uint8_t *audioBuffer=new uint8_t[AUDIO_BUFFER_SIZE];
 
 
     printf("[FLV]avg fps=%u\n",vStream->getAvgFps1000());
     AVRational *scale=&(video_st->codec->time_base);
+    initUI("Saving Flv file..");
     while(true==vStream->getPacket(&len, buffer, bufSize,&pts,&dts,&flags))
     {
 	AVPacket pkt;
@@ -327,6 +324,11 @@
             {
                 lastVideoDts=dts;
             }
+            if(false==updateUI(lastVideoDts))
+            {
+                result=false;
+                goto abt;
+             }
 #define RESCALE(x) x=rescaleLavPts(x,scale);
 
             dts=lastVideoDts/1000;
@@ -394,10 +396,12 @@
             }
 
     }
+abt:
+    closeUI();
     delete [] buffer;
     delete [] audioBuffer;
     printf("[FLV] Wrote %d frames, nb audio streams %d\n",written,nbAStreams);
-    return true;
+    return result;
 }
 /**
     \fn close

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerRaw/muxerRaw.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerRaw/muxerRaw.cpp	2009-07-26 17:14:16 UTC (rev 5159)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerRaw/muxerRaw.cpp	2009-07-26 18:38:44 UTC (rev 5160)
@@ -78,29 +78,29 @@
     uint64_t pts,dts,rawDts;
     uint64_t lastVideoDts=0;
     int written=0;
-    uint64_t videoDuration=vStream->getVideoDuration();
+    bool result=true;
 
-    encoding=createWorking("Saving raw video");
+    initUI("Saving raw video");
     while(true==vStream->getPacket(&len, buffer, bufSize,&pts,&dts,&flags))
     {
-            float p=0.5;
-            if(videoDuration && dts!=ADM_NO_PTS)
-                    p=dts/videoDuration;
-            p=p*100;
-            encoding->update((uint32_t)p);
-            if(!encoding->isAlive()) 
-            {
-                break;
-            }
+        if(dts==ADM_NO_PTS)
+            dts=lastVideoDts+videoIncrement;
+        if(updateUI(dts)==false)
+        {
+            result=false;
+            goto abt;
+        }
         fwrite(buffer,len,1,file);
         written++;
 
     }
+abt:
+    closeUI();
     delete [] buffer;
     fclose(file);
     file=NULL;
     printf("[RAW] Wrote %d frames \n",written);
-    return true;
+    return result;
 }
 /**
     \fn close



From mean at mail.berlios.de  Mon Jul 27 19:43:05 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Mon, 27 Jul 2009 19:43:05 +0200
Subject: [Avidemux-svn-commit] r5161 - in branches/avidemux_2.6_branch_mean:
	avidemux_core/ADM_coreAudio/src
	avidemux_plugins/ADM_audioEncoders/lame
Message-ID: <200907271743.n6RHh5Ab023382@sheep.berlios.de>

Author: mean
Date: 2009-07-27 19:43:04 +0200 (Mon, 27 Jul 2009)
New Revision: 5161

Modified:
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreAudio/src/ADM_audioStreamBuffered.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioEncoders/lame/audioencoder_lame.cpp
Log:
[Mp3/Lame] Accept mp3 packet spawning across several read (fixes #1) + cosmetic on lame

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreAudio/src/ADM_audioStreamBuffered.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreAudio/src/ADM_audioStreamBuffered.cpp	2009-07-26 18:38:44 UTC (rev 5160)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreAudio/src/ADM_audioStreamBuffered.cpp	2009-07-27 17:43:04 UTC (rev 5161)
@@ -120,11 +120,11 @@
 */
 bool      ADM_audioStreamBuffered::needBytes(uint32_t nbBytes)
 {
-    if((limit-start)>=nbBytes) return true;
-    refill();
-    if((limit-start)>=nbBytes) return true;
-    return false;
-
+    while(1)
+    {
+        if((limit-start)>=nbBytes) return true;
+        if(false==refill()) return false;
+    }
 }
 /**
     \fn skipBytes

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioEncoders/lame/audioencoder_lame.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioEncoders/lame/audioencoder_lame.cpp	2009-07-26 18:38:44 UTC (rev 5160)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioEncoders/lame/audioencoder_lame.cpp	2009-07-27 17:43:04 UTC (rev 5161)
@@ -220,17 +220,19 @@
     }
   dither16 (&(tmpbuffer[tmphead]), _chunk, wavheader.channels);
   ADM_assert (tmptail >= tmphead);
+  int16_t *sample16=(int16_t *)& (tmpbuffer[tmphead]);
   if (wavheader.channels == 1)
     {
-      nbout =	lame_encode_buffer (MYFLAGS, (int16_t *) & (tmpbuffer[tmphead]),
-			    (int16_t *) & (tmpbuffer[tmphead]), _chunk, dest,
+      nbout =	lame_encode_buffer (MYFLAGS, 
+                sample16,
+			    sample16, _chunk, dest,
 			    16 * 1024);
 
     }
   else
     {
       nbout =	lame_encode_buffer_interleaved (MYFLAGS,
-					(int16_t *) & (tmpbuffer[tmphead]),
+					sample16,
 					_chunk / 2, dest, 16 * 1024);
     }
   tmphead += _chunk;



From gruntster at mail.berlios.de  Mon Jul 27 21:19:31 2009
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Mon, 27 Jul 2009 21:19:31 +0200
Subject: [Avidemux-svn-commit] r5162 - in
	branches/avidemux_2.5_branch_gruntster: cmake
	plugins/ADM_audioDecoders
Message-ID: <200907271919.n6RJJVqp002607@sheep.berlios.de>

Author: gruntster
Date: 2009-07-27 21:19:24 +0200 (Mon, 27 Jul 2009)
New Revision: 5162

Removed:
   branches/avidemux_2.5_branch_gruntster/cmake/admCheckAmrnb.cmake
   branches/avidemux_2.5_branch_gruntster/cmake/admCheckDca.cmake
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_audioDecoders/ADM_ad_amrnb/
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_audioDecoders/ADM_ad_dca/
Modified:
   branches/avidemux_2.5_branch_gruntster/cmake/admPluginConfigSummary.cmake
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_audioDecoders/CMakeLists.txt
Log:
[audiodec] remove libamrnb and libdca plugins. They have been replaced by opencore-amrnb and ffmpeg's dca decoder

Deleted: branches/avidemux_2.5_branch_gruntster/cmake/admCheckAmrnb.cmake
===================================================================
--- branches/avidemux_2.5_branch_gruntster/cmake/admCheckAmrnb.cmake	2009-07-27 17:43:04 UTC (rev 5161)
+++ branches/avidemux_2.5_branch_gruntster/cmake/admCheckAmrnb.cmake	2009-07-27 19:19:24 UTC (rev 5162)
@@ -1,20 +0,0 @@
-MACRO(checkAmrnb)
-	IF (NOT AMRNB_CHECKED)
-		OPTION(AMRNB "" ON)
-
-		MESSAGE(STATUS "Checking for amrnb")
-		MESSAGE(STATUS "******************")
-
-		IF (AMRNB)
-			FIND_HEADER_AND_LIB(AMRNB amrnb/interf_dec.h amrnb GP3Decoder_Interface_Decode)
-			PRINT_LIBRARY_INFO("amrnb" AMRNB_FOUND "${AMRNB_INCLUDE_DIR}" "${AMRNB_LIBRARY_DIR}")
-		ELSE (AMRNB)
-			MESSAGE("${MSG_DISABLE_OPTION}")
-		ENDIF (AMRNB)
-
-		SET(ENV{ADM_HAVE_AMRNB} ${AMRNB_FOUND})
-		SET(AMRNB_CHECKED 1)
-
-		MESSAGE("")
-	ENDIF (NOT AMRNB_CHECKED)
-ENDMACRO(checkAmrnb)
\ No newline at end of file

Deleted: branches/avidemux_2.5_branch_gruntster/cmake/admCheckDca.cmake
===================================================================
--- branches/avidemux_2.5_branch_gruntster/cmake/admCheckDca.cmake	2009-07-27 17:43:04 UTC (rev 5161)
+++ branches/avidemux_2.5_branch_gruntster/cmake/admCheckDca.cmake	2009-07-27 19:19:24 UTC (rev 5162)
@@ -1,42 +0,0 @@
-########################################
-# libdca
-########################################
-MACRO(checkDca)
-	IF (NOT LIBDCA_CHECKED)
-		OPTION(LIBDCA "" ON)
-
-		MESSAGE(STATUS "Checking for libdca")
-		MESSAGE(STATUS "*******************")
-
-		IF (LIBDCA)
-			IF (UNIX)
-				SET(LIBDCA_REQUIRED_FLAGS "-lm")
-			ENDIF (UNIX)
-
-			SET(LIBDCA_VERSION 005)
-
-			FIND_HEADER_AND_LIB(LIBDCA_005 dca.h dca dca_init ${LIBDCA_REQUIRED_FLAGS})
-
-			IF (NOT LIBDCA_005_FOUND)
-				SET(LIBDCA_VERSION 002)
-				FIND_HEADER_AND_LIB(LIBDCA_002 dts.h dts dts_init ${LIBDCA_REQUIRED_FLAGS})
-			ENDIF (NOT LIBDCA_005_FOUND)
-
-			IF (LIBDCA_${LIBDCA_VERSION}_FOUND)
-				SET(LIBDCA_FOUND 1)
-				SET(USE_LIBDCA_${LIBDCA_VERSION} 1)
-				SET(LIBDCA_INCLUDE_DIR "${LIBDCA_${LIBDCA_VERSION}_INCLUDE_DIR}")
-				SET(LIBDCA_LIBRARY_DIR "${LIBDCA_${LIBDCA_VERSION}_LIBRARY_DIR}")
-			ENDIF (LIBDCA_${LIBDCA_VERSION}_FOUND)
-
-			PRINT_LIBRARY_INFO("libdca" LIBDCA_FOUND "${LIBDCA_INCLUDE_DIR}" "${LIBDCA_LIBRARY_DIR}")
-		ELSE (LIBDCA)
-			MESSAGE("${MSG_DISABLE_OPTION}")
-		ENDIF (LIBDCA)
-
-		SET(ENV{ADM_HAVE_LIBDCA} ${LIBDCA_FOUND})
-		SET(LIBDCA_CHECKED 1)
-
-		MESSAGE("")
-	ENDIF (NOT LIBDCA_CHECKED)
-ENDMACRO(checkDca)
\ No newline at end of file

Modified: branches/avidemux_2.5_branch_gruntster/cmake/admPluginConfigSummary.cmake
===================================================================
--- branches/avidemux_2.5_branch_gruntster/cmake/admPluginConfigSummary.cmake	2009-07-27 17:43:04 UTC (rev 5161)
+++ branches/avidemux_2.5_branch_gruntster/cmake/admPluginConfigSummary.cmake	2009-07-27 19:19:24 UTC (rev 5162)
@@ -25,10 +25,9 @@
 ADM_DISPLAY("Xvid          " "$ENV{ADM_HAVE_XVID}")
 
 MESSAGE("***    Audio Codec    ***")
-ADM_DISPLAY("amrnb         " "$ENV{ADM_HAVE_AMRNB}")
 ADM_DISPLAY("FAAD          " "$ENV{ADM_HAVE_FAAD}")
-ADM_DISPLAY("libdca        " "$ENV{ADM_HAVE_LIBDCA}")
 ADM_DISPLAY("opencore-amrnb" "$ENV{ADM_HAVE_OPENCORE_AMRNB}")
+ADM_DISPLAY("opencore-amrwb" "$ENV{ADM_HAVE_OPENCORE_AMRWB}")
 
 MESSAGE("***   Miscellaneous   ***")
 ADM_DISPLAY("FontConfig    " "$ENV{ADM_HAVE_FONTCONFIG}")

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_audioDecoders/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_audioDecoders/CMakeLists.txt	2009-07-27 17:43:04 UTC (rev 5161)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_audioDecoders/CMakeLists.txt	2009-07-27 19:19:24 UTC (rev 5162)
@@ -2,7 +2,5 @@
 ADD_SUBDIRECTORY(ADM_ad_faad)
 ADD_SUBDIRECTORY(ADM_ad_mad)
 ADD_SUBDIRECTORY(ADM_ad_vorbis)
-ADD_SUBDIRECTORY(ADM_ad_dca)
-ADD_SUBDIRECTORY(ADM_ad_amrnb)
 ADD_SUBDIRECTORY(ADM_ad_opencore_amrnb)
 ADD_SUBDIRECTORY(ADM_ad_opencore_amrwb)
\ No newline at end of file



From gruntster at mail.berlios.de  Mon Jul 27 22:47:07 2009
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Mon, 27 Jul 2009 22:47:07 +0200
Subject: [Avidemux-svn-commit] r5163 - in
	branches/avidemux_2.5_branch_gruntster:
	avidemux/ADM_UIs/ADM_GTK/src avidemux/ADM_UIs/ADM_QT4/src
	avidemux/ADM_coreUI/include avidemux/ADM_coreUI/src
	plugins/ADM_videoEncoder/ADM_vidEnc_avcodec
Message-ID: <200907272047.n6RKl7Aq014447@sheep.berlios.de>

Author: gruntster
Date: 2009-07-27 22:46:59 +0200 (Mon, 27 Jul 2009)
New Revision: 5163

Modified:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_GTK/src/DIA_dialogFactory.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_GTK/src/FAC_configMenu.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/T_configMenu.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/T_configMenu.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/T_dialogFactory.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/T_menu.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/T_menu.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/include/DIA_factory.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/src/DIA_factory.cpp
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/mpeg1Encoder.cpp
Log:
[dlgFactory] trigger custom profile on Qt config menu

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_GTK/src/DIA_dialogFactory.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_GTK/src/DIA_dialogFactory.cpp	2009-07-27 19:19:24 UTC (rev 5162)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_GTK/src/DIA_dialogFactory.cpp	2009-07-27 20:46:59 UTC (rev 5163)
@@ -133,7 +133,7 @@
 	gtk_box_set_spacing(GTK_BOX(dialog_vbox1), 12);
 	gtk_widget_show(dialog_vbox1);
 
-	if (headerControls)
+	if (headerControls)
 		addControls(dialog, dialog_vbox1, headerControls, headerControlCount);
 
 	notebook1 = gtk_notebook_new();
@@ -142,8 +142,11 @@
 	gtk_container_set_border_width(GTK_CONTAINER(notebook1), 6);
 
 	for (int i = 0; i < tabControlCount; i++)
-		buildOneTab(notebook1, i, tabControls[i]); 
+		buildOneTab(notebook1, i, tabControls[i]);
 
+	for (int i = 0; i < headerControlCount; i++)
+		headerControls[i]->finalize();
+
 	addButtonBox(dialog);
 
 	// Show it & run
@@ -303,7 +306,7 @@
 extern DELETE_DIA_ELEM_T    gtkDestroyUSlider;
 extern 	CREATE_SLIDER_T     gtkCreateSlider;
 extern 	DELETE_DIA_ELEM_T   gtkDestroySlider;
-extern CREATE_CONFIG_MENU_T gtkCreateConfigMenu;
+extern CREATE_CONFIG_MENU_T gtkCreateConfigMenu;
 extern DELETE_DIA_ELEM_T    gtkDestroyConfigMenu;
 /**
  *  \fn gtkFactoryGetVersion

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_GTK/src/FAC_configMenu.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_GTK/src/FAC_configMenu.cpp	2009-07-27 19:19:24 UTC (rev 5162)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_GTK/src/FAC_configMenu.cpp	2009-07-27 20:46:59 UTC (rev 5163)
@@ -238,6 +238,7 @@
 		void enable(uint32_t onoff);
 		int getRequiredLayout(void);
 		void updateMe(void);
+		void finalize(void);
 	};
 
 	diaElemConfigMenu::diaElemConfigMenu(const char* userConfigDir, const char* systemConfigDir, CONFIG_MENU_CHANGED_T *changedFunc,
@@ -304,6 +305,11 @@
 	void diaElemConfigMenu::enable(uint32_t onoff) { }
 	int diaElemConfigMenu::getRequiredLayout(void) { return 0; }
 	void diaElemConfigMenu::updateMe(void) { }
+
+	void diaElemConfigMenu::finalize(void)
+	{
+
+	}
 }
 
 diaElem* gtkCreateConfigMenu(const char* userConfigDir, const char* systemConfigDir, CONFIG_MENU_CHANGED_T *changedFunc, 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/T_configMenu.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/T_configMenu.cpp	2009-07-27 19:19:24 UTC (rev 5162)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/T_configMenu.cpp	2009-07-27 20:46:59 UTC (rev 5163)
@@ -13,7 +13,9 @@
 *                                                                         *
 ***************************************************************************/
 
+#include <QtGui/QApplication>
 #include <QtGui/QFileDialog>
+
 #include "T_configMenu.h"
 #include "ADM_dialogFactoryQt4.h"
 #include "ADM_files.h"
@@ -32,6 +34,8 @@
 		const char* userConfigDir, const char* systemConfigDir, CONFIG_MENU_CHANGED_T *changedFunc, 
 		CONFIG_MENU_SERIALIZE_T *serializeFunc, diaElem **controls, unsigned int controlCount) : QWidget(widget) 
 	{
+		disableGenericSlots = false;
+
 		this->userConfigDir = userConfigDir;
 		this->systemConfigDir = systemConfigDir;
 
@@ -67,6 +71,36 @@
 	{
 	}
 
+	void ADM_QconfigMenu::generic_currentIndexChanged(int index)
+	{
+		if (!disableGenericSlots)
+			combobox->setCurrentIndex(1);
+	}
+
+	void ADM_QconfigMenu::generic_valueChanged(int value)
+	{
+		if (!disableGenericSlots)
+			combobox->setCurrentIndex(1);
+	}
+
+	void ADM_QconfigMenu::generic_valueChanged(double value)
+	{
+		if (!disableGenericSlots)
+			combobox->setCurrentIndex(1);
+	}
+
+	void ADM_QconfigMenu::generic_pressed(void)
+	{
+		if (!disableGenericSlots)
+			combobox->setCurrentIndex(1);
+	}
+
+	void ADM_QconfigMenu::generic_textEdited(QString text)
+	{
+		if (!disableGenericSlots)
+			combobox->setCurrentIndex(1);
+	}
+
 	void ADM_QconfigMenu::fillConfigurationComboBox(void)
 	{
 		bool origDisableGenericSlots = disableGenericSlots;
@@ -74,6 +108,8 @@
 		QStringList filter("*.xml");
 		QStringList list = QDir(this->userConfigDir).entryList(filter, QDir::Files | QDir::Readable);
 
+		disableGenericSlots = true;
+
 		for (int item = 0; item < list.size(); item++)
 			configs.insert(QFileInfo(list[item]).completeBaseName(), CONFIG_MENU_USER);
 
@@ -102,6 +138,8 @@
 		bool success = false;
 		bool origDisableGenericSlots = disableGenericSlots;
 
+		disableGenericSlots = true;
+
 		if (configurationType == CONFIG_MENU_DEFAULT)
 		{
 			combobox->setCurrentIndex(0);
@@ -180,13 +218,18 @@
 		disableGenericSlots = true;
 		deleteButton->setEnabled(configType == CONFIG_MENU_USER);
 
+		for (int i = 0; i < this->controlCount; i++)
+			this->controls[i]->getMe();
+
 		if (changedFunc)
 		{
-			if (!changedFunc(combobox->itemText(index).toUtf8().constData(), configType))
+			if (changedFunc(combobox->itemText(index).toUtf8().constData(), configType))
+			{
+				for (int i = 0; i < this->controlCount; i++)
+					this->controls[i]->updateMe();
+			}
+			else
 				combobox->setCurrentIndex(0);
-
-			for (int i = 0; i < this->controlCount; i++)
-				this->controls[i]->updateMe();
 		}
 
 		disableGenericSlots = origDisableGenericSlots;
@@ -211,6 +254,7 @@
 		void enable(uint32_t onoff);
 		int getRequiredLayout(void);
 		void updateMe(void);
+		void finalize(void);
 	};
 
 	diaElemConfigMenu::diaElemConfigMenu(const char* userConfigDir, const char* systemConfigDir, CONFIG_MENU_CHANGED_T *changedFunc,
@@ -241,15 +285,6 @@
 
 	void diaElemConfigMenu::getMe(void)
 	{
-		/*ADM_QconfigMenu *configMenu = (ADM_QconfigMenu*)myWidget;
-		uint32_t *val = (uint32_t*)param;
-
-		if ((configMenu->radiobutton1)->isChecked())
-			*val = 1;
-		else if ((configMenu->radiobutton2)->isChecked())
-			*val = 0;
-		else
-			*val = (configMenu->spinBox)->value(); */
 	}
 
 	void diaElemConfigMenu::enable(uint32_t onoff)
@@ -264,6 +299,44 @@
 	void diaElemConfigMenu::updateMe(void)
 	{
 	}
+
+	void diaElemConfigMenu::finalize(void)
+	{
+		ADM_QconfigMenu *configMenu = (ADM_QconfigMenu*)myWidget;
+		QWidgetList widgetList = QApplication::allWidgets();
+
+		for (int widgetIndex = 0; widgetIndex < widgetList.size(); widgetIndex++)
+		{
+			QWidget *widget = widgetList.at(widgetIndex);
+			QWidget *parentWidget = widget;
+
+			if (widget != configMenu->combobox && widget != configMenu->label && 
+				widget != configMenu->deleteButton && widget != configMenu->saveAsButton)
+			{
+				do
+				{
+					if (parentWidget == configMenu->combobox->parent())
+					{
+						if (widget->inherits("QComboBox"))
+							QObject::connect(widget, SIGNAL(currentIndexChanged(int)), configMenu, SLOT(generic_currentIndexChanged(int)));
+						else if (widget->inherits("QSpinBox"))
+							QObject::connect(widget, SIGNAL(valueChanged(int)), configMenu, SLOT(generic_valueChanged(int)));
+						else if (widget->inherits("QDoubleSpinBox"))
+							QObject::connect(widget, SIGNAL(valueChanged(double)), configMenu, SLOT(generic_valueChanged(double)));
+						else if (widget->inherits("QCheckBox"))
+							QObject::connect(widget, SIGNAL(pressed()), configMenu, SLOT(generic_pressed()));
+						else if (widget->inherits("QRadioButton"))
+							QObject::connect(widget, SIGNAL(pressed()), configMenu, SLOT(generic_pressed()));
+						else if (widget->inherits("QLineEdit"))
+							QObject::connect(widget, SIGNAL(textEdited(QString)), configMenu, SLOT(generic_textEdited(QString)));
+					}
+
+					parentWidget = (QWidget*)parentWidget->parent();
+				}
+				while (parentWidget != NULL);
+			}
+		}
+	}
 }
 
 diaElem* qt4CreateConfigMenu(const char* userConfigDir, const char* systemConfigDir, CONFIG_MENU_CHANGED_T *changedFunc, 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/T_configMenu.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/T_configMenu.h	2009-07-27 19:19:24 UTC (rev 5162)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/T_configMenu.h	2009-07-27 20:46:59 UTC (rev 5163)
@@ -21,7 +21,6 @@
 		CONFIG_MENU_CHANGED_T *changedFunc;
 		CONFIG_MENU_SERIALIZE_T *serializeFunc;
 
-		void fillConfigurationComboBox(void);
 		bool selectConfiguration(QString *selectFile, ConfigMenuType configurationType);
 
 	public slots:
@@ -29,6 +28,12 @@
 		void saveAsClicked(bool checked);
 		void comboboxIndexChanged(int index);
 
+		void generic_currentIndexChanged(int index);
+		void generic_valueChanged(int value);
+		void generic_valueChanged(double value);
+		void generic_pressed(void);
+		void generic_textEdited(QString text);
+
 	public:
 		QLabel *label;
 		QComboBox *combobox;
@@ -39,6 +44,7 @@
 			const char* userConfigDir, const char* systemConfigDir, CONFIG_MENU_CHANGED_T *changedFunc,
 			CONFIG_MENU_SERIALIZE_T *serializeFunc, diaElem **controls, unsigned int controlCount);
 		~ADM_QconfigMenu();
+		void fillConfigurationComboBox(void);
 	};
 }
 #endif	// T_configMenu_h

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/T_dialogFactory.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/T_dialogFactory.cpp	2009-07-27 19:19:24 UTC (rev 5162)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/T_dialogFactory.cpp	2009-07-27 20:46:59 UTC (rev 5163)
@@ -113,7 +113,7 @@
   QVBoxLayout *vboxLayout = new QVBoxLayout();
   QGridLayout *layout = new QGridLayout();
   QSpacerItem *spacer = new QSpacerItem(20, 16, QSizePolicy::Minimum, QSizePolicy::Fixed);
-  QTabWidget *wtabs = new QTabWidget();
+  QTabWidget *wtabs = new QTabWidget(&dialog);
   QDialogButtonBox *buttonBox = new QDialogButtonBox();
 
   if (headerControls)
@@ -125,6 +125,9 @@
         insertTab(i,tabControls[i],wtabs);
       }
 
+	 for (int i = 0; i < headerControlCount; i++)
+		 headerControls[i]->finalize();
+
 	 buttonBox->setStandardButtons(QDialogButtonBox::Ok | QDialogButtonBox::Cancel);
 
      QObject::connect(buttonBox, SIGNAL(accepted()), &dialog, SLOT(accept()));

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/T_menu.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/T_menu.cpp	2009-07-27 19:19:24 UTC (rev 5162)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/T_menu.cpp	2009-07-27 20:46:59 UTC (rev 5163)
@@ -46,7 +46,7 @@
 
 /**/
 
-ADM_QComboBox::ADM_QComboBox(diaElemMenuDynamic *menu)
+ADM_QComboBox::ADM_QComboBox(QWidget *parent, diaElemMenuDynamic *menu) : QComboBox(parent)
 {
 	_menu=menu;
 }
@@ -145,7 +145,7 @@
 }
 void diaElemMenuDynamic::setMe(void *dialog, void *opaque,uint32_t line)
 {
-  ADM_QComboBox *combo=new ADM_QComboBox(this);
+  ADM_QComboBox *combo=new ADM_QComboBox((QWidget*)dialog, this);
 
   QGridLayout *layout=(QGridLayout*) opaque;
      myWidget=(void *)combo; 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/T_menu.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/T_menu.h	2009-07-27 19:19:24 UTC (rev 5162)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/T_menu.h	2009-07-27 20:46:59 UTC (rev 5163)
@@ -34,7 +34,7 @@
 		diaElemMenuDynamic *_menu;
 
 	public:
-		ADM_QComboBox(diaElemMenuDynamic *menu);
+		ADM_QComboBox(QWidget *parent, diaElemMenuDynamic *menu);
 		void connectMe(void);
 	};
 }

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/include/DIA_factory.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/include/DIA_factory.h	2009-07-27 19:19:24 UTC (rev 5162)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/include/DIA_factory.h	2009-07-27 20:46:59 UTC (rev 5163)
@@ -1,691 +1,692 @@
-/***************************************************************************
-                          DIA_factory.h
-  Handles univeral dialog
-  
-  DO NOT USE TEMPLATE HERE!
-  
-  (C) Mean 2006 fixounet at free.fr
-
- ***************************************************************************/
-
-/***************************************************************************
- *                                                                         *
- *   This program is free software; you can redistribute it and/or modify  *
- *   it under the terms of the GNU General Public License as published by  *
- *   the Free Software Foundation; either version 2 of the License, or     *
- *   (at your option) any later version.                                   *
- *                                                                         *
- ***************************************************************************/
-#ifndef DIA_FACTORY_H
-#define DIA_FACTORY_H
-
-#include "ADM_assert.h"
-
-#define ADM_COREUI_MAJOR 1
-#define ADM_COREUI_MINOR 0
-#define ADM_COREUI_PATCH 1
-
-typedef enum 
-{
-  ELEM_INVALID=0,
-  ELEM_TOGGLE,
-  ELEM_INTEGER,
-  ELEM_FLOAT,
-  ELEM_MENU,
-  ELEM_FILE_READ,
-  ELEM_BITRATE,
-  ELEM_BAR,
-  ELEM_ROTEXT,
-  ELEM_NOTCH,
-  ELEM_DIR_SELECT,
-  ELEM_TEXT,
-  ELEM_FRAME,
-  ELEM_HEXDUMP,
-  ELEM_TOGGLE_UINT,
-  ELEM_TOGGLE_INT,
-  ELEM_BUTTON,
-  ELEM_SLIDER,
-  ELEM_THREAD_COUNT,
-  ELEM_MATRIX,
-  ELEM_ASPECT_RATIO,
-  ELEM_CONFIG_MENU,
-  ELEM_COUNT,
-  ELEM_MAX=ELEM_COUNT-1
-}elemEnum;
-typedef void ADM_FAC_CALLBACK(void *cookie);
-
-#define ELEM_TYPE_FLOAT float
-
-/*********************************************/
-class diaElem
-{
-  protected:
-    int     readOnly;
-    diaElem    *internalPointer;
-public:
-  void *param;
-  void *myWidget;
-  const char *paramTitle;
-  const char *tip;
-  elemEnum mySelf;
-  int       size; // Size of the widget in line
-
-  diaElem(elemEnum num) {paramTitle=NULL;param=NULL;mySelf=num;myWidget=NULL;size=1;readOnly=0;internalPointer=NULL;};
-  virtual int getSize(void) {return size;};
-  virtual void setSize(int z) {size=z;};
-  virtual ~diaElem() {};
-  virtual void setMe(void *dialog, void *opaque,uint32_t line)=0;
-  virtual void getMe(void)=0;
-  virtual void setRo(void) {readOnly=1;}
-  virtual void setRw(void) {readOnly=0;}
-          
-  virtual void enable(uint32_t onoff) {}
-  virtual void finalize(void) {} // in case some widget needs some stuff just before using them
-  virtual int getRequiredLayout(void)=0;
-  virtual void updateMe(void) = 0;
-};
-/*********************************************/
-#define MENU_MAX_lINK 10
-typedef struct dialElemLink
-{
-  uint32_t  value;
-  uint32_t  onoff;
-  diaElem  *widget;
-}dialElemLink;
-/*********************************************/
-
-typedef void      DELETE_DIA_ELEM_T(diaElem *widget);
-typedef void      FINALIZE_DIA_ELEM_T(void);
-typedef void      COREUI_GET_VERSION(uint32_t *maj,uint32_t *min,uint32_t *patch);
-/*********************************************/
-typedef diaElem  *(CREATE_BUTTON_T)(const char *toggleTitle, ADM_FAC_CALLBACK *cb,void *cookie,const char *tip);
-class diaElemButton : public diaElem
-{
-  protected:
-  public:
-    void            *_cookie;
-    ADM_FAC_CALLBACK *_callBack;
-            diaElemButton(const char *toggleTitle, ADM_FAC_CALLBACK *cb,void *cookie,const char *tip=NULL);
-  virtual   ~diaElemButton() ;
-  void      setMe(void *dialog, void *opaque,uint32_t line);
-  void      getMe(void);
-  void      enable(uint32_t onoff) ;
-  int getRequiredLayout(void);
-  void updateMe(void);
-};
-
-/*********************************************/
-typedef diaElem  *(CREATE_MATRIX_T)(uint8_t *trix,const char *toggleTitle, uint32_t trixSize,const char *tip);
-
-class diaElemMatrix : public diaElem
-{
-  protected:
-  public:
-    uint8_t *_matrix;
-    uint32_t _matrixSize;
-    		diaElemMatrix(uint8_t *trix,const char *toggleTitle, uint32_t trixSize,const char *tip=NULL);
-  virtual   ~diaElemMatrix() ;
-  void      setMe(void *dialog, void *opaque,uint32_t line);
-  void      getMe(void);
-  void      enable(uint32_t onoff) ;
-  int getRequiredLayout(void);
-  void updateMe(void);
-};
-/************************************/
-class diaElemSliderBase : public diaElem
-{
-  protected:
-    
-      uint32_t digits;
-public:
-	                diaElemSliderBase() : diaElem(ELEM_SLIDER) {}
-  virtual           ~diaElemSliderBase() {};
-  virtual uint8_t   setDigits(uint32_t digits) { this->digits = digits; }
-};
-
-typedef diaElem *CREATE_USLIDER_T(uint32_t *value,const char *toggleTitle, uint32_t min,uint32_t max,uint32_t incr , const char *tip);
-typedef diaElem *CREATE_SLIDER_T(int32_t *value,const char *toggleTitle, int32_t min,int32_t max,int32_t incr , const char *tip);
-class diaElemUSlider : public diaElemSliderBase
-{
-  protected:
-	  uint32_t min,max,incr;
-public:
-	diaElemUSlider(uint32_t *value,const char *toggleTitle, uint32_t min,uint32_t max,uint32_t incr = 1, const char *tip=NULL);
-  virtual   ~diaElemUSlider() ;
-  void      setMe(void *dialog, void *opaque,uint32_t line);
-  void      getMe(void);
-  void      enable(uint32_t onoff) ;
-  uint8_t   setDigits(uint32_t digits) ;
-  int getRequiredLayout(void);
-  void updateMe(void);
-};
-class diaElemSlider : public diaElemSliderBase
-{
-  protected:
-    
-	  int32_t min,max,incr;
-    
-public:
-	diaElemSlider(int32_t *value,const char *toggleTitle, int32_t min,int32_t max,int32_t incr = 1, const char *tip=NULL);
-  virtual   ~diaElemSlider() ;
-  void      setMe(void *dialog, void *opaque,uint32_t line);
-  void      getMe(void);
-  void      enable(uint32_t onoff) ;
-  uint8_t   setDigits(uint32_t digits) ;
-  int getRequiredLayout(void);
-  void updateMe(void);
-};
-/*********************************************/
-typedef diaElem *CREATE_TOGGLE(uint32_t *toggleValue,const char *toggleTitle, const char *tip);
-class diaElemToggleBase : public diaElem
-{
-  protected:
-    dialElemLink        links[MENU_MAX_lINK];
-    uint32_t            nbLink;
-    
-public:
-			diaElemToggleBase() :diaElem(ELEM_TOGGLE)
-						{};
-  virtual   ~diaElemToggleBase() {};
-  virtual uint8_t   link(uint32_t onoff,diaElem *w)=0;
-};
-typedef diaElem *CREATE_TOGGLE_T(uint32_t *toggleValue,const char *toggleTitle, const char *tip);
-class diaElemToggle : public diaElemToggleBase
-{
-  protected:
-public:
-            diaElemToggle(uint32_t *toggleValue,const char *toggleTitle, const char *tip=NULL);
-  virtual   ~diaElemToggle() ;
-  void      setMe(void *dialog, void *opaque,uint32_t line);
-  void      getMe(void);
-  void      enable(uint32_t onoff) ;
-  void      finalize(void);
-  void      updateMe();
-  uint8_t   link(uint32_t onoff,diaElem *w);
-  int getRequiredLayout(void);
-};
-/*********************************************/
-typedef diaElem *CREATE_TOGGLE_UINT(uint32_t *toggleValue,const char *toggleTitle, uint32_t *uintval, 
-								const char *name,uint32_t min,uint32_t max,const char *tip=NULL);
-class diaElemToggleUint : public diaElem
-{
-  protected:
-        uint32_t *emb;
-        const char *embName;
-        void *widgetUint;
-        uint32_t _min,_max;
-public:
-            diaElemToggleUint(uint32_t *toggleValue,const char *toggleTitle, uint32_t *uintval,
-            					const char *name,uint32_t min,uint32_t max,const char *tip=NULL);
-  virtual   ~diaElemToggleUint() ;
-  void      setMe(void *dialog, void *opaque,uint32_t line);
-  void      getMe(void);
-  void      enable(uint32_t onoff) ;
-  void      finalize(void);
-  void      updateMe();
-  int getRequiredLayout(void);
-};
-typedef diaElem *CREATE_TOGGLE_INT(uint32_t *toggleValue,const char *toggleTitle, int32_t *intval, 
-									const char *name,int32_t min,int32_t max,const char *tip=NULL);
-class diaElemToggleInt : public diaElem
-{
-  protected:
-	  		 int32_t *emb;
-	         const char *embName;
-	         void *widgetUint;
-	         int32_t _min,_max;
-public:
-            diaElemToggleInt(uint32_t *toggleValue,const char *toggleTitle, int32_t *uintval,
-            				const char *name,int32_t min,int32_t max,const char *tip=NULL);
-  virtual   ~diaElemToggleInt() ;
-  void      setMe(void *dialog, void *opaque,uint32_t line);
-  void      getMe(void);
-  void      finalize(void);
-  int getRequiredLayout(void);
-  void      updateMe();
-  void      enable(uint32_t onoff) ;
-};
-/*********************************************/
-typedef diaElem  *(CREATE_INTEGER_T)(int32_t *intValue,const char *toggleTitle,int32_t min, int32_t max,const char *tip);
-typedef diaElem  *(CREATE_UINTEGER_T)(uint32_t *intValue,const char *toggleTitle,uint32_t min, uint32_t max,const char *tip);
-class diaElemInteger : public diaElem
-{
-
-public:
-  int32_t min,max;
-  diaElemInteger(int32_t *intValue,const char *toggleTitle, int32_t min, int32_t max,const char *tip=NULL);
-  virtual ~diaElemInteger() ;
-  void setMe(void *dialog, void *opaque,uint32_t line);
-  void getMe(void);
-  void      enable(uint32_t onoff) ;
-  int getRequiredLayout(void);
-  void updateMe(void);
-};
-/* Same but unsigned */
-class diaElemUInteger : public diaElem
-{
-
-public:
-  uint32_t min,max;
-  diaElemUInteger(uint32_t *intValue,const char *toggleTitle, uint32_t min, uint32_t max,const char *tip=NULL);
-  virtual ~diaElemUInteger() ;
-  void setMe(void *dialog, void *opaque,uint32_t line);
-  void getMe(void);
-  void      enable(uint32_t onoff) ;
-  int getRequiredLayout(void);
-  void updateMe(void);
-};
-/*************************************************/
-typedef diaElem  *(CREATE_BAR_T)(uint32_t percent,const char *toggleTitle);
-
-class diaElemBar : public diaElem
-{
-  protected :
-        uint32_t per;
-public:
-  
-  diaElemBar(uint32_t percent,const char *toggleTitle);
-  virtual ~diaElemBar() ;
-  void setMe(void *dialog, void *opaque,uint32_t line);
-  void getMe(void);
-  int getRequiredLayout(void);
-  void updateMe(void);
-};
-
-/*********************************************/
-typedef diaElem  *(CREATE_FLOAT_T)(ELEM_TYPE_FLOAT *intValue,const char *toggleTitle, ELEM_TYPE_FLOAT min,
-        ELEM_TYPE_FLOAT max,const char *tip, int decimals);
-class diaElemFloat : public diaElem
-{
-protected:
-	int decimals;
-
-public:
-  ELEM_TYPE_FLOAT min,max;
-  diaElemFloat(ELEM_TYPE_FLOAT *intValue,const char *toggleTitle, ELEM_TYPE_FLOAT min, 
-               ELEM_TYPE_FLOAT max,const char *tip=NULL, int decimals = 2);
-  virtual ~diaElemFloat() ;
-  void setMe(void *dialog, void *opaque,uint32_t line);
-  void getMe(void);
-  void      enable(uint32_t onoff) ;
-  int getRequiredLayout(void);
-  void updateMe(void);
-};
-/*************************************************/
-typedef struct diaMenuEntry
-{
-  public:
-    uint32_t    val;
-    const char *text;
-    const char *desc;
-  public:
-}diaMenuEntry;
-
-class diaMenuEntryDynamic : public diaMenuEntry
-{
-  public:
-  public:
-    diaMenuEntryDynamic(uint32_t v,const char *t,const char *d) 
-      {
-          val=v;
-          text=ADM_strdup(t);
-          desc=ADM_strdup(d);
-      }
-    ~diaMenuEntryDynamic() 
-      { 
-          ADM_dealloc(text);
-          ADM_dealloc(desc);
-      }
-    
-};
-//*******************************
-// static (i.e. hardcoded) menu
-//*******************************
-
-
-
-//*******************************
-// Same but for dynamic menus
-//*******************************
-typedef diaElem  *(CREATE_MENU_T)(uint32_t *intValue,const char *itle, uint32_t nb, 
-        const diaMenuEntry *menu,const char *tip);
-typedef diaElem  *(CREATE_MENUDYNAMIC_T)(uint32_t *intValue,const char *itle, uint32_t nb, 
-         diaMenuEntryDynamic **menu,const char *tip);
-
-class diaElemMenuDynamicBase : public diaElem
-{
-protected:	
-diaMenuEntryDynamic **menu;
-uint32_t            nbMenu;
-dialElemLink        links[MENU_MAX_lINK];
-uint32_t            nbLink;
-
-public:
-	diaElemMenuDynamicBase() : diaElem(ELEM_MENU) {};
-  
-  virtual   ~diaElemMenuDynamicBase() {};
-  virtual uint8_t   link(diaMenuEntryDynamic *entry,uint32_t onoff,diaElem *w)=0;
-};
-
-class diaElemMenuDynamic : public diaElemMenuDynamicBase
-{
-public:
-  diaElemMenuDynamic(uint32_t *intValue,const char *itle, uint32_t nb, 
-               diaMenuEntryDynamic **menu,const char *tip=NULL);
-  
-  virtual   ~diaElemMenuDynamic() ;
-  void      setMe(void *dialog, void *opaque,uint32_t line);
-  void      getMe(void);
-  virtual uint8_t   link(diaMenuEntryDynamic *entry,uint32_t onoff,diaElem *w);
-  virtual void      updateMe(void);
-  virtual void      enable(uint32_t onoff) ;
-  virtual void      finalize(void);
-  int getRequiredLayout(void);
-};
-
-class diaElemMenuBase : public diaElem
-{
-protected:
-	const diaMenuEntry  *menu;
-	uint32_t            nbMenu;
-	dialElemLink        links[MENU_MAX_lINK];
-	uint32_t            nbLink;
-public:	
-	diaElemMenuBase(void) : diaElem(ELEM_MENU) {};
-	virtual ~diaElemMenuBase(void) {};
-	virtual uint8_t   link(diaMenuEntry *entry,uint32_t onoff,diaElem *w)=0;
-};
-class diaElemMenu : public diaElemMenuBase
-{
-
-diaElemMenuDynamic  *dyna;
-diaMenuEntryDynamic  **menus;
-public:
-  diaElemMenu(uint32_t *intValue,const char *itle, uint32_t nb, 
-               const diaMenuEntry *menu,const char *tip=NULL);
-  
-  virtual ~diaElemMenu() ;
-  void setMe(void *dialog, void *opaque,uint32_t line);
-  void getMe(void);
-  virtual uint8_t   link(diaMenuEntry *entry,uint32_t onoff,diaElem *w);
-  virtual void      updateMe(void);
-  void      enable(uint32_t onoff) ;
-  void      finalize(void);;
-  int getRequiredLayout(void);
-};
-
-/*************************************************/
-#ifndef ADM_MINIMAL_UI_INTERFACE
-#include "../../ADM_encoder/ADM_vidEncode.hxx"
-typedef diaElem  *(CREATE_BITRATE_T)(COMPRES_PARAMS *p,const char *toggleTitle,const char *tip);
-class diaElemBitrateBase : public diaElem
-{
-  protected:
-    COMPRES_PARAMS    copy;
-    uint32_t maxQ, minQ;
-public:
-  
-	diaElemBitrateBase(void) : diaElem(ELEM_BITRATE) {};
-  virtual ~diaElemBitrateBase() {} ;
-  virtual void setMaxQz(uint32_t qz)=0;
-};
-class diaElemBitrate : public diaElemBitrateBase
-{
-  protected:
-public:
-  
-  diaElemBitrate(COMPRES_PARAMS *p,const char *toggleTitle,const char *tip=NULL);
-  virtual ~diaElemBitrate() ;
-  void setMe(void *dialog, void *opaque,uint32_t line);
-  void getMe(void);
-  void setMaxQz(uint32_t qz);
-  void setMinQz(uint32_t qz);
-  int getSize(void);
-  void setSize(int size);
-  
-  void updateMe(void);
-  int getRequiredLayout(void);
-};
-#endif
-/*************************************************/
-typedef diaElem *CREATE_FILE_T(uint32_t writeMode,char **filename,const char *toggleTitle,  const char *defaultSuffix ,const char *tip);
-class diaElemFileBase : public diaElem
-{
-
-protected:
-    const char * defaultSuffix;
-public:
-  
-	diaElemFileBase(void) : diaElem(ELEM_FILE_READ){};
-  virtual ~diaElemFileBase() {};
-  virtual void   changeFile(void)=0;
-  uint32_t _write;
-
-};
-class diaElemFile : public diaElemFileBase
-{
-
-protected:
-    
-public:
-  
-  diaElemFile(uint32_t writeMode,char **filename,const char *toggleTitle,
-              const char *defaultSuffix = 0,const char *tip=NULL);
-  virtual ~diaElemFile() ;
-  void setMe(void *dialog, void *opaque,uint32_t line);
-  void getMe(void);
-  
-  void   changeFile(void);
-  void   enable(uint32_t onoff);
-  int getRequiredLayout(void);
-  void updateMe(void);
-};
-/*************************************************/
-typedef diaElem *CREATE_DIR_T(char **filename,const char *toggleTitle,const char *tip);
-class diaElemDirSelectBase : public diaElem
-{
-
-public:
-  
-	diaElemDirSelectBase(void) :diaElem(ELEM_DIR_SELECT) {};
-  virtual ~diaElemDirSelectBase() {} ;
-  virtual void changeFile(void)=0;
-};
-class diaElemDirSelect : public diaElemDirSelectBase
-{
-
-public:
-  
-  diaElemDirSelect(char **filename,const char *toggleTitle,const char *tip=NULL);
-  virtual ~diaElemDirSelect() ;
-  void setMe(void *dialog, void *opaque,uint32_t line);
-  void getMe(void);
-  
-  void changeFile(void);
-  void   enable(uint32_t onoff);
-  int getRequiredLayout(void);
-  void updateMe(void);
-};
-/*************************************************/
-/* The text MUST be copied internally ! */
-typedef diaElem *(CREATE_READONLYTEXT_T )(const char *readOnly,const char *toggleTitle, const char *tip);
-class diaElemReadOnlyText : public diaElem
-{
-
-public:
-  
-  diaElemReadOnlyText(const char *readyOnly,const char *toggleTitle,const char *tip=NULL);
-  virtual ~diaElemReadOnlyText() ;
-  void setMe(void *dialog, void *opaque,uint32_t line);
-  void getMe(void);
-  int getRequiredLayout(void);
-  void updateMe(void);
-};
-/*************************************************/
-typedef diaElem *(CREATE_TEXT_T )(char **readOnly,const char *toggleTitle, const char *tip);
-/* The text MUST be copied internally ! */
-class diaElemText : public diaElem
-{
-
-public:
-  
-  diaElemText(char **text,const char *toggleTitle,const char *tip=NULL);
-  virtual ~diaElemText() ;
-  void setMe(void *dialog, void *opaque,uint32_t line);
-  void getMe(void);
-  void enable(uint32_t onoff);
-  int getRequiredLayout(void);
-  void updateMe(void);
-};
-
-/*********************************************/
-typedef diaElem *(CREATE_NOTCH_T )(uint32_t yes,const char *toggleTitle, const char *tip);
-class diaElemNotch : public diaElem
-{
-  uint32_t yesno;
-public:
-  
-  diaElemNotch(uint32_t yes,const char *toggleTitle, const char *tip=NULL);
-  virtual ~diaElemNotch() ;
-  void setMe(void *dialog, void *opaque,uint32_t line);
-  void getMe(void) ;
-  int getRequiredLayout(void);
-  void updateMe(void);
-};
-/*********************************************/
-typedef diaElem *(CREATE_TAB_T )(const char *toggleTitle, uint32_t nb, diaElem **content);
-class diaElemTabs 
-{
-  public:
-    
-  uint32_t nbElems;
-  diaElem  **dias;
-  const char *title;
-  
-  diaElemTabs(const char *toggleTitle, uint32_t nb, diaElem **content)
-  {
-      nbElems=nb;
-      dias=content; 
-      title=toggleTitle;
-  }
-  virtual ~diaElemTabs() 
-  {
-  }
-};
-/**********************************************/
-#define DIA_MAX_FRAME 10
-class diaElemFrameBase :public diaElem
-{
-protected:
-  uint32_t frameSize;
-  uint32_t nbElems;
-  diaElem  *elems[DIA_MAX_FRAME];
-public:
-  
-	diaElemFrameBase(void) : diaElem(ELEM_FRAME) {};
-  virtual ~diaElemFrameBase() {};
-  virtual void swallow(diaElem *widget)=0;
-};
-typedef diaElem *(CREATE_FRAME_T )(const char *toggleTitle, const char *tip);
-class diaElemFrame : public diaElemFrameBase
-{
-  
-public:
-  
-  diaElemFrame(const char *toggleTitle, const char *tip=NULL);
-  virtual ~diaElemFrame() ;
-  void setMe(void *dialog, void *opaque,uint32_t line);
-  void getMe(void) ;
-  void swallow(diaElem *widget);
-  void enable(uint32_t onoff);
-  void finalize(void);
-  int getRequiredLayout(void);
-  void updateMe(void);
-};
-/**********************************************/
-typedef diaElem *(CREATE_HEX_T )(const char *toggleTitle, uint32_t dataSize,uint8_t *data);
-class diaElemHex : public diaElem
-{
-  uint32_t dataSize;
-  uint8_t  *data;
-  
-public:
-  
-  diaElemHex(const char *toggleTitle, uint32_t dataSize,uint8_t *data);
-  virtual ~diaElemHex() ;
-  void setMe(void *dialog, void *opaque,uint32_t line);
-  void getMe(void) ;
-  void finalize(void);
-  int getRequiredLayout(void);
-  void updateMe(void);
-};
-/**********************************************/
-typedef diaElem *(CREATE_THREADCOUNT_T)(uint32_t *value, const char *title, const char *tip = NULL);
-class diaElemThreadCount : public diaElem
-{
-
-public:
-  
-  diaElemThreadCount(uint32_t *value, const char *title, const char *tip = NULL);
-  virtual ~diaElemThreadCount() ;
-  void setMe(void *dialog, void *opaque, uint32_t line);
-  void getMe(void);
-  int getRequiredLayout(void);
-  void updateMe(void);
-};
-/**********************************************/
-typedef diaElem *(CREATE_ASPECTRATIO_T)(uint32_t *value, const char *title, const char *tip = NULL);
-class diaElemAspectRatio : public diaElem
-{
-public:
-	uint32_t *den;
-	void *denControl, *label;
-
-	diaElemAspectRatio(uint32_t *num, uint32_t *den, const char *title, const char *tip = NULL);
-	virtual ~diaElemAspectRatio();
-	void setMe(void *dialog, void *opaque, uint32_t line);
-	void getMe(void);
-	void enable(uint32_t onoff);
-	int getRequiredLayout(void);
-	void updateMe(void);
-};
-/*********************************************/
+/***************************************************************************
+                          DIA_factory.h
+  Handles univeral dialog
+  
+  DO NOT USE TEMPLATE HERE!
+  
+  (C) Mean 2006 fixounet at free.fr
+
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+#ifndef DIA_FACTORY_H
+#define DIA_FACTORY_H
+
+#include "ADM_assert.h"
+
+#define ADM_COREUI_MAJOR 1
+#define ADM_COREUI_MINOR 0
+#define ADM_COREUI_PATCH 1
+
+typedef enum 
+{
+  ELEM_INVALID=0,
+  ELEM_TOGGLE,
+  ELEM_INTEGER,
+  ELEM_FLOAT,
+  ELEM_MENU,
+  ELEM_FILE_READ,
+  ELEM_BITRATE,
+  ELEM_BAR,
+  ELEM_ROTEXT,
+  ELEM_NOTCH,
+  ELEM_DIR_SELECT,
+  ELEM_TEXT,
+  ELEM_FRAME,
+  ELEM_HEXDUMP,
+  ELEM_TOGGLE_UINT,
+  ELEM_TOGGLE_INT,
+  ELEM_BUTTON,
+  ELEM_SLIDER,
+  ELEM_THREAD_COUNT,
+  ELEM_MATRIX,
+  ELEM_ASPECT_RATIO,
+  ELEM_CONFIG_MENU,
+  ELEM_COUNT,
+  ELEM_MAX=ELEM_COUNT-1
+}elemEnum;
+typedef void ADM_FAC_CALLBACK(void *cookie);
+
+#define ELEM_TYPE_FLOAT float
+
+/*********************************************/
+class diaElem
+{
+  protected:
+    int     readOnly;
+    diaElem    *internalPointer;
+public:
+  void *param;
+  void *myWidget;
+  const char *paramTitle;
+  const char *tip;
+  elemEnum mySelf;
+  int       size; // Size of the widget in line
+
+  diaElem(elemEnum num) {paramTitle=NULL;param=NULL;mySelf=num;myWidget=NULL;size=1;readOnly=0;internalPointer=NULL;};
+  virtual int getSize(void) {return size;};
+  virtual void setSize(int z) {size=z;};
+  virtual ~diaElem() {};
+  virtual void setMe(void *dialog, void *opaque,uint32_t line)=0;
+  virtual void getMe(void)=0;
+  virtual void setRo(void) {readOnly=1;}
+  virtual void setRw(void) {readOnly=0;}
+          
+  virtual void enable(uint32_t onoff) {}
+  virtual void finalize(void) {} // in case some widget needs some stuff just before using them
+  virtual int getRequiredLayout(void)=0;
+  virtual void updateMe(void) = 0;
+};
+/*********************************************/
+#define MENU_MAX_lINK 10
+typedef struct dialElemLink
+{
+  uint32_t  value;
+  uint32_t  onoff;
+  diaElem  *widget;
+}dialElemLink;
+/*********************************************/
+
+typedef void      DELETE_DIA_ELEM_T(diaElem *widget);
+typedef void      FINALIZE_DIA_ELEM_T(void);
+typedef void      COREUI_GET_VERSION(uint32_t *maj,uint32_t *min,uint32_t *patch);
+/*********************************************/
+typedef diaElem  *(CREATE_BUTTON_T)(const char *toggleTitle, ADM_FAC_CALLBACK *cb,void *cookie,const char *tip);
+class diaElemButton : public diaElem
+{
+  protected:
+  public:
+    void            *_cookie;
+    ADM_FAC_CALLBACK *_callBack;
+            diaElemButton(const char *toggleTitle, ADM_FAC_CALLBACK *cb,void *cookie,const char *tip=NULL);
+  virtual   ~diaElemButton() ;
+  void      setMe(void *dialog, void *opaque,uint32_t line);
+  void      getMe(void);
+  void      enable(uint32_t onoff) ;
+  int getRequiredLayout(void);
+  void updateMe(void);
+};
+
+/*********************************************/
+typedef diaElem  *(CREATE_MATRIX_T)(uint8_t *trix,const char *toggleTitle, uint32_t trixSize,const char *tip);
+
+class diaElemMatrix : public diaElem
+{
+  protected:
+  public:
+    uint8_t *_matrix;
+    uint32_t _matrixSize;
+    		diaElemMatrix(uint8_t *trix,const char *toggleTitle, uint32_t trixSize,const char *tip=NULL);
+  virtual   ~diaElemMatrix() ;
+  void      setMe(void *dialog, void *opaque,uint32_t line);
+  void      getMe(void);
+  void      enable(uint32_t onoff) ;
+  int getRequiredLayout(void);
+  void updateMe(void);
+};
+/************************************/
+class diaElemSliderBase : public diaElem
+{
+  protected:
+    
+      uint32_t digits;
+public:
+	                diaElemSliderBase() : diaElem(ELEM_SLIDER) {}
+  virtual           ~diaElemSliderBase() {};
+  virtual uint8_t   setDigits(uint32_t digits) { this->digits = digits; }
+};
+
+typedef diaElem *CREATE_USLIDER_T(uint32_t *value,const char *toggleTitle, uint32_t min,uint32_t max,uint32_t incr , const char *tip);
+typedef diaElem *CREATE_SLIDER_T(int32_t *value,const char *toggleTitle, int32_t min,int32_t max,int32_t incr , const char *tip);
+class diaElemUSlider : public diaElemSliderBase
+{
+  protected:
+	  uint32_t min,max,incr;
+public:
+	diaElemUSlider(uint32_t *value,const char *toggleTitle, uint32_t min,uint32_t max,uint32_t incr = 1, const char *tip=NULL);
+  virtual   ~diaElemUSlider() ;
+  void      setMe(void *dialog, void *opaque,uint32_t line);
+  void      getMe(void);
+  void      enable(uint32_t onoff) ;
+  uint8_t   setDigits(uint32_t digits) ;
+  int getRequiredLayout(void);
+  void updateMe(void);
+};
+class diaElemSlider : public diaElemSliderBase
+{
+  protected:
+    
+	  int32_t min,max,incr;
+    
+public:
+	diaElemSlider(int32_t *value,const char *toggleTitle, int32_t min,int32_t max,int32_t incr = 1, const char *tip=NULL);
+  virtual   ~diaElemSlider() ;
+  void      setMe(void *dialog, void *opaque,uint32_t line);
+  void      getMe(void);
+  void      enable(uint32_t onoff) ;
+  uint8_t   setDigits(uint32_t digits) ;
+  int getRequiredLayout(void);
+  void updateMe(void);
+};
+/*********************************************/
+typedef diaElem *CREATE_TOGGLE(uint32_t *toggleValue,const char *toggleTitle, const char *tip);
+class diaElemToggleBase : public diaElem
+{
+  protected:
+    dialElemLink        links[MENU_MAX_lINK];
+    uint32_t            nbLink;
+    
+public:
+			diaElemToggleBase() :diaElem(ELEM_TOGGLE)
+						{};
+  virtual   ~diaElemToggleBase() {};
+  virtual uint8_t   link(uint32_t onoff,diaElem *w)=0;
+};
+typedef diaElem *CREATE_TOGGLE_T(uint32_t *toggleValue,const char *toggleTitle, const char *tip);
+class diaElemToggle : public diaElemToggleBase
+{
+  protected:
+public:
+            diaElemToggle(uint32_t *toggleValue,const char *toggleTitle, const char *tip=NULL);
+  virtual   ~diaElemToggle() ;
+  void      setMe(void *dialog, void *opaque,uint32_t line);
+  void      getMe(void);
+  void      enable(uint32_t onoff) ;
+  void      finalize(void);
+  void      updateMe();
+  uint8_t   link(uint32_t onoff,diaElem *w);
+  int getRequiredLayout(void);
+};
+/*********************************************/
+typedef diaElem *CREATE_TOGGLE_UINT(uint32_t *toggleValue,const char *toggleTitle, uint32_t *uintval, 
+								const char *name,uint32_t min,uint32_t max,const char *tip=NULL);
+class diaElemToggleUint : public diaElem
+{
+  protected:
+        uint32_t *emb;
+        const char *embName;
+        void *widgetUint;
+        uint32_t _min,_max;
+public:
+            diaElemToggleUint(uint32_t *toggleValue,const char *toggleTitle, uint32_t *uintval,
+            					const char *name,uint32_t min,uint32_t max,const char *tip=NULL);
+  virtual   ~diaElemToggleUint() ;
+  void      setMe(void *dialog, void *opaque,uint32_t line);
+  void      getMe(void);
+  void      enable(uint32_t onoff) ;
+  void      finalize(void);
+  void      updateMe();
+  int getRequiredLayout(void);
+};
+typedef diaElem *CREATE_TOGGLE_INT(uint32_t *toggleValue,const char *toggleTitle, int32_t *intval, 
+									const char *name,int32_t min,int32_t max,const char *tip=NULL);
+class diaElemToggleInt : public diaElem
+{
+  protected:
+	  		 int32_t *emb;
+	         const char *embName;
+	         void *widgetUint;
+	         int32_t _min,_max;
+public:
+            diaElemToggleInt(uint32_t *toggleValue,const char *toggleTitle, int32_t *uintval,
+            				const char *name,int32_t min,int32_t max,const char *tip=NULL);
+  virtual   ~diaElemToggleInt() ;
+  void      setMe(void *dialog, void *opaque,uint32_t line);
+  void      getMe(void);
+  void      finalize(void);
+  int getRequiredLayout(void);
+  void      updateMe();
+  void      enable(uint32_t onoff) ;
+};
+/*********************************************/
+typedef diaElem  *(CREATE_INTEGER_T)(int32_t *intValue,const char *toggleTitle,int32_t min, int32_t max,const char *tip);
+typedef diaElem  *(CREATE_UINTEGER_T)(uint32_t *intValue,const char *toggleTitle,uint32_t min, uint32_t max,const char *tip);
+class diaElemInteger : public diaElem
+{
+
+public:
+  int32_t min,max;
+  diaElemInteger(int32_t *intValue,const char *toggleTitle, int32_t min, int32_t max,const char *tip=NULL);
+  virtual ~diaElemInteger() ;
+  void setMe(void *dialog, void *opaque,uint32_t line);
+  void getMe(void);
+  void      enable(uint32_t onoff) ;
+  int getRequiredLayout(void);
+  void updateMe(void);
+};
+/* Same but unsigned */
+class diaElemUInteger : public diaElem
+{
+
+public:
+  uint32_t min,max;
+  diaElemUInteger(uint32_t *intValue,const char *toggleTitle, uint32_t min, uint32_t max,const char *tip=NULL);
+  virtual ~diaElemUInteger() ;
+  void setMe(void *dialog, void *opaque,uint32_t line);
+  void getMe(void);
+  void      enable(uint32_t onoff) ;
+  int getRequiredLayout(void);
+  void updateMe(void);
+};
+/*************************************************/
+typedef diaElem  *(CREATE_BAR_T)(uint32_t percent,const char *toggleTitle);
+
+class diaElemBar : public diaElem
+{
+  protected :
+        uint32_t per;
+public:
+  
+  diaElemBar(uint32_t percent,const char *toggleTitle);
+  virtual ~diaElemBar() ;
+  void setMe(void *dialog, void *opaque,uint32_t line);
+  void getMe(void);
+  int getRequiredLayout(void);
+  void updateMe(void);
+};
+
+/*********************************************/
+typedef diaElem  *(CREATE_FLOAT_T)(ELEM_TYPE_FLOAT *intValue,const char *toggleTitle, ELEM_TYPE_FLOAT min,
+        ELEM_TYPE_FLOAT max,const char *tip, int decimals);
+class diaElemFloat : public diaElem
+{
+protected:
+	int decimals;
+
+public:
+  ELEM_TYPE_FLOAT min,max;
+  diaElemFloat(ELEM_TYPE_FLOAT *intValue,const char *toggleTitle, ELEM_TYPE_FLOAT min, 
+               ELEM_TYPE_FLOAT max,const char *tip=NULL, int decimals = 2);
+  virtual ~diaElemFloat() ;
+  void setMe(void *dialog, void *opaque,uint32_t line);
+  void getMe(void);
+  void      enable(uint32_t onoff) ;
+  int getRequiredLayout(void);
+  void updateMe(void);
+};
+/*************************************************/
+typedef struct diaMenuEntry
+{
+  public:
+    uint32_t    val;
+    const char *text;
+    const char *desc;
+  public:
+}diaMenuEntry;
+
+class diaMenuEntryDynamic : public diaMenuEntry
+{
+  public:
+  public:
+    diaMenuEntryDynamic(uint32_t v,const char *t,const char *d) 
+      {
+          val=v;
+          text=ADM_strdup(t);
+          desc=ADM_strdup(d);
+      }
+    ~diaMenuEntryDynamic() 
+      { 
+          ADM_dealloc(text);
+          ADM_dealloc(desc);
+      }
+    
+};
+//*******************************
+// static (i.e. hardcoded) menu
+//*******************************
+
+
+
+//*******************************
+// Same but for dynamic menus
+//*******************************
+typedef diaElem  *(CREATE_MENU_T)(uint32_t *intValue,const char *itle, uint32_t nb, 
+        const diaMenuEntry *menu,const char *tip);
+typedef diaElem  *(CREATE_MENUDYNAMIC_T)(uint32_t *intValue,const char *itle, uint32_t nb, 
+         diaMenuEntryDynamic **menu,const char *tip);
+
+class diaElemMenuDynamicBase : public diaElem
+{
+protected:	
+diaMenuEntryDynamic **menu;
+uint32_t            nbMenu;
+dialElemLink        links[MENU_MAX_lINK];
+uint32_t            nbLink;
+
+public:
+	diaElemMenuDynamicBase() : diaElem(ELEM_MENU) {};
+  
+  virtual   ~diaElemMenuDynamicBase() {};
+  virtual uint8_t   link(diaMenuEntryDynamic *entry,uint32_t onoff,diaElem *w)=0;
+};
+
+class diaElemMenuDynamic : public diaElemMenuDynamicBase
+{
+public:
+  diaElemMenuDynamic(uint32_t *intValue,const char *itle, uint32_t nb, 
+               diaMenuEntryDynamic **menu,const char *tip=NULL);
+  
+  virtual   ~diaElemMenuDynamic() ;
+  void      setMe(void *dialog, void *opaque,uint32_t line);
+  void      getMe(void);
+  virtual uint8_t   link(diaMenuEntryDynamic *entry,uint32_t onoff,diaElem *w);
+  virtual void      updateMe(void);
+  virtual void      enable(uint32_t onoff) ;
+  virtual void      finalize(void);
+  int getRequiredLayout(void);
+};
+
+class diaElemMenuBase : public diaElem
+{
+protected:
+	const diaMenuEntry  *menu;
+	uint32_t            nbMenu;
+	dialElemLink        links[MENU_MAX_lINK];
+	uint32_t            nbLink;
+public:	
+	diaElemMenuBase(void) : diaElem(ELEM_MENU) {};
+	virtual ~diaElemMenuBase(void) {};
+	virtual uint8_t   link(diaMenuEntry *entry,uint32_t onoff,diaElem *w)=0;
+};
+class diaElemMenu : public diaElemMenuBase
+{
+
+diaElemMenuDynamic  *dyna;
+diaMenuEntryDynamic  **menus;
+public:
+  diaElemMenu(uint32_t *intValue,const char *itle, uint32_t nb, 
+               const diaMenuEntry *menu,const char *tip=NULL);
+  
+  virtual ~diaElemMenu() ;
+  void setMe(void *dialog, void *opaque,uint32_t line);
+  void getMe(void);
+  virtual uint8_t   link(diaMenuEntry *entry,uint32_t onoff,diaElem *w);
+  virtual void      updateMe(void);
+  void      enable(uint32_t onoff) ;
+  void      finalize(void);;
+  int getRequiredLayout(void);
+};
+
+/*************************************************/
+#ifndef ADM_MINIMAL_UI_INTERFACE
+#include "../../ADM_encoder/ADM_vidEncode.hxx"
+typedef diaElem  *(CREATE_BITRATE_T)(COMPRES_PARAMS *p,const char *toggleTitle,const char *tip);
+class diaElemBitrateBase : public diaElem
+{
+  protected:
+    COMPRES_PARAMS    copy;
+    uint32_t maxQ, minQ;
+public:
+  
+	diaElemBitrateBase(void) : diaElem(ELEM_BITRATE) {};
+  virtual ~diaElemBitrateBase() {} ;
+  virtual void setMaxQz(uint32_t qz)=0;
+};
+class diaElemBitrate : public diaElemBitrateBase
+{
+  protected:
+public:
+  
+  diaElemBitrate(COMPRES_PARAMS *p,const char *toggleTitle,const char *tip=NULL);
+  virtual ~diaElemBitrate() ;
+  void setMe(void *dialog, void *opaque,uint32_t line);
+  void getMe(void);
+  void setMaxQz(uint32_t qz);
+  void setMinQz(uint32_t qz);
+  int getSize(void);
+  void setSize(int size);
+  
+  void updateMe(void);
+  int getRequiredLayout(void);
+};
+#endif
+/*************************************************/
+typedef diaElem *CREATE_FILE_T(uint32_t writeMode,char **filename,const char *toggleTitle,  const char *defaultSuffix ,const char *tip);
+class diaElemFileBase : public diaElem
+{
+
+protected:
+    const char * defaultSuffix;
+public:
+  
+	diaElemFileBase(void) : diaElem(ELEM_FILE_READ){};
+  virtual ~diaElemFileBase() {};
+  virtual void   changeFile(void)=0;
+  uint32_t _write;
+
+};
+class diaElemFile : public diaElemFileBase
+{
+
+protected:
+    
+public:
+  
+  diaElemFile(uint32_t writeMode,char **filename,const char *toggleTitle,
+              const char *defaultSuffix = 0,const char *tip=NULL);
+  virtual ~diaElemFile() ;
+  void setMe(void *dialog, void *opaque,uint32_t line);
+  void getMe(void);
+  
+  void   changeFile(void);
+  void   enable(uint32_t onoff);
+  int getRequiredLayout(void);
+  void updateMe(void);
+};
+/*************************************************/
+typedef diaElem *CREATE_DIR_T(char **filename,const char *toggleTitle,const char *tip);
+class diaElemDirSelectBase : public diaElem
+{
+
+public:
+  
+	diaElemDirSelectBase(void) :diaElem(ELEM_DIR_SELECT) {};
+  virtual ~diaElemDirSelectBase() {} ;
+  virtual void changeFile(void)=0;
+};
+class diaElemDirSelect : public diaElemDirSelectBase
+{
+
+public:
+  
+  diaElemDirSelect(char **filename,const char *toggleTitle,const char *tip=NULL);
+  virtual ~diaElemDirSelect() ;
+  void setMe(void *dialog, void *opaque,uint32_t line);
+  void getMe(void);
+  
+  void changeFile(void);
+  void   enable(uint32_t onoff);
+  int getRequiredLayout(void);
+  void updateMe(void);
+};
+/*************************************************/
+/* The text MUST be copied internally ! */
+typedef diaElem *(CREATE_READONLYTEXT_T )(const char *readOnly,const char *toggleTitle, const char *tip);
+class diaElemReadOnlyText : public diaElem
+{
+
+public:
+  
+  diaElemReadOnlyText(const char *readyOnly,const char *toggleTitle,const char *tip=NULL);
+  virtual ~diaElemReadOnlyText() ;
+  void setMe(void *dialog, void *opaque,uint32_t line);
+  void getMe(void);
+  int getRequiredLayout(void);
+  void updateMe(void);
+};
+/*************************************************/
+typedef diaElem *(CREATE_TEXT_T )(char **readOnly,const char *toggleTitle, const char *tip);
+/* The text MUST be copied internally ! */
+class diaElemText : public diaElem
+{
+
+public:
+  
+  diaElemText(char **text,const char *toggleTitle,const char *tip=NULL);
+  virtual ~diaElemText() ;
+  void setMe(void *dialog, void *opaque,uint32_t line);
+  void getMe(void);
+  void enable(uint32_t onoff);
+  int getRequiredLayout(void);
+  void updateMe(void);
+};
+
+/*********************************************/
+typedef diaElem *(CREATE_NOTCH_T )(uint32_t yes,const char *toggleTitle, const char *tip);
+class diaElemNotch : public diaElem
+{
+  uint32_t yesno;
+public:
+  
+  diaElemNotch(uint32_t yes,const char *toggleTitle, const char *tip=NULL);
+  virtual ~diaElemNotch() ;
+  void setMe(void *dialog, void *opaque,uint32_t line);
+  void getMe(void) ;
+  int getRequiredLayout(void);
+  void updateMe(void);
+};
+/*********************************************/
+typedef diaElem *(CREATE_TAB_T )(const char *toggleTitle, uint32_t nb, diaElem **content);
+class diaElemTabs 
+{
+  public:
+    
+  uint32_t nbElems;
+  diaElem  **dias;
+  const char *title;
+  
+  diaElemTabs(const char *toggleTitle, uint32_t nb, diaElem **content)
+  {
+      nbElems=nb;
+      dias=content; 
+      title=toggleTitle;
+  }
+  virtual ~diaElemTabs() 
+  {
+  }
+};
+/**********************************************/
+#define DIA_MAX_FRAME 10
+class diaElemFrameBase :public diaElem
+{
+protected:
+  uint32_t frameSize;
+  uint32_t nbElems;
+  diaElem  *elems[DIA_MAX_FRAME];
+public:
+  
+	diaElemFrameBase(void) : diaElem(ELEM_FRAME) {};
+  virtual ~diaElemFrameBase() {};
+  virtual void swallow(diaElem *widget)=0;
+};
+typedef diaElem *(CREATE_FRAME_T )(const char *toggleTitle, const char *tip);
+class diaElemFrame : public diaElemFrameBase
+{
+  
+public:
+  
+  diaElemFrame(const char *toggleTitle, const char *tip=NULL);
+  virtual ~diaElemFrame() ;
+  void setMe(void *dialog, void *opaque,uint32_t line);
+  void getMe(void) ;
+  void swallow(diaElem *widget);
+  void enable(uint32_t onoff);
+  void finalize(void);
+  int getRequiredLayout(void);
+  void updateMe(void);
+};
+/**********************************************/
+typedef diaElem *(CREATE_HEX_T )(const char *toggleTitle, uint32_t dataSize,uint8_t *data);
+class diaElemHex : public diaElem
+{
+  uint32_t dataSize;
+  uint8_t  *data;
+  
+public:
+  
+  diaElemHex(const char *toggleTitle, uint32_t dataSize,uint8_t *data);
+  virtual ~diaElemHex() ;
+  void setMe(void *dialog, void *opaque,uint32_t line);
+  void getMe(void) ;
+  void finalize(void);
+  int getRequiredLayout(void);
+  void updateMe(void);
+};
+/**********************************************/
+typedef diaElem *(CREATE_THREADCOUNT_T)(uint32_t *value, const char *title, const char *tip = NULL);
+class diaElemThreadCount : public diaElem
+{
+
+public:
+  
+  diaElemThreadCount(uint32_t *value, const char *title, const char *tip = NULL);
+  virtual ~diaElemThreadCount() ;
+  void setMe(void *dialog, void *opaque, uint32_t line);
+  void getMe(void);
+  int getRequiredLayout(void);
+  void updateMe(void);
+};
+/**********************************************/
+typedef diaElem *(CREATE_ASPECTRATIO_T)(uint32_t *value, const char *title, const char *tip = NULL);
+class diaElemAspectRatio : public diaElem
+{
+public:
+	uint32_t *den;
+	void *denControl, *label;
+
+	diaElemAspectRatio(uint32_t *num, uint32_t *den, const char *title, const char *tip = NULL);
+	virtual ~diaElemAspectRatio();
+	void setMe(void *dialog, void *opaque, uint32_t line);
+	void getMe(void);
+	void enable(uint32_t onoff);
+	int getRequiredLayout(void);
+	void updateMe(void);
+};
+/*********************************************/
 typedef enum
 {
 	CONFIG_MENU_CUSTOM,
 	CONFIG_MENU_DEFAULT,
 	CONFIG_MENU_USER,
 	CONFIG_MENU_SYSTEM
-} ConfigMenuType;
-
-typedef char *(CONFIG_MENU_SERIALIZE_T)(void);
-typedef bool (CONFIG_MENU_CHANGED_T)(const char* configName, ConfigMenuType configType);
-typedef diaElem *(CREATE_CONFIG_MENU_T)(const char* userConfigDir, const char* systemConfigDir,	CONFIG_MENU_CHANGED_T *changedFunc, 
-										CONFIG_MENU_SERIALIZE_T *serializeFunc, diaElem **controls, unsigned int controlCount);
-
-class diaElemConfigMenu : public diaElem
-{
-protected:
-	const char *userConfigDir, *systemConfigDir;
-	diaElem **controls;
-	unsigned int controlCount;
-
+} ConfigMenuType;
+
+typedef char *(CONFIG_MENU_SERIALIZE_T)(void);
+typedef bool (CONFIG_MENU_CHANGED_T)(const char* configName, ConfigMenuType configType);
+typedef diaElem *(CREATE_CONFIG_MENU_T)(const char* userConfigDir, const char* systemConfigDir,	CONFIG_MENU_CHANGED_T *changedFunc, 
+										CONFIG_MENU_SERIALIZE_T *serializeFunc, diaElem **controls, unsigned int controlCount);
+
+class diaElemConfigMenu : public diaElem
+{
+protected:
+	const char *userConfigDir, *systemConfigDir;
+	diaElem **controls;
+	unsigned int controlCount;
+
 	CONFIG_MENU_CHANGED_T *changedFunc;
-	CONFIG_MENU_SERIALIZE_T *serializeFunc;
-
-public:
+	CONFIG_MENU_SERIALIZE_T *serializeFunc;
+
+public:
 	diaElemConfigMenu(const char* userConfigDir, const char* systemConfigDir, CONFIG_MENU_CHANGED_T *changedFunc,
-			CONFIG_MENU_SERIALIZE_T *serializeFunc, diaElem **controls, unsigned int controlCount);
-	~diaElemConfigMenu();
-	void setMe(void *dialog, void *opaque, uint32_t line);
-	void getMe(void);
-	void enable(uint32_t onoff);
-	int getRequiredLayout(void);
-	void updateMe(void);
-};
-/*********************************************/
-uint8_t diaFactoryRun(const char *title,uint32_t nb,diaElem **elems);
-uint8_t diaFactoryRunTabs(const char *title,uint32_t nb,diaElemTabs **tabs);
-uint8_t diaFactoryRunTabs(const char *title, unsigned int headerControlCount, diaElem **headerControls, unsigned int tabControlCount, diaElemTabs **tabControls);
-/*********************************************/
-#endif
+			CONFIG_MENU_SERIALIZE_T *serializeFunc, diaElem **controls, unsigned int controlCount);
+	~diaElemConfigMenu();
+	void setMe(void *dialog, void *opaque, uint32_t line);
+	void getMe(void);
+	void enable(uint32_t onoff);
+	int getRequiredLayout(void);
+	void updateMe(void);
+	void finalize(void);
+};
+/*********************************************/
+uint8_t diaFactoryRun(const char *title,uint32_t nb,diaElem **elems);
+uint8_t diaFactoryRunTabs(const char *title,uint32_t nb,diaElemTabs **tabs);
+uint8_t diaFactoryRunTabs(const char *title, unsigned int headerControlCount, diaElem **headerControls, unsigned int tabControlCount, diaElemTabs **tabControls);
+/*********************************************/
+#endif

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/src/DIA_factory.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/src/DIA_factory.cpp	2009-07-27 19:19:24 UTC (rev 5162)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/src/DIA_factory.cpp	2009-07-27 20:46:59 UTC (rev 5163)
@@ -580,4 +580,10 @@
 	internalPointer->enable(onoff);
 }
 
+void diaElemConfigMenu::finalize(void)
+{
+	ADM_assert(internalPointer);
+	internalPointer->finalize();
+}
+
 DIA_MKSTUBS(diaElemConfigMenu)

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/mpeg1Encoder.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/mpeg1Encoder.cpp	2009-07-27 19:19:24 UTC (rev 5162)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/mpeg1Encoder.cpp	2009-07-27 20:46:59 UTC (rev 5163)
@@ -34,6 +34,9 @@
 	_encodeOptions.encodeModeParameter = DEFAULT_ENCODE_MODE_PARAMETER;
 
 	_bitrateParam.capabilities = ADM_ENC_CAP_CQ | ADM_ENC_CAP_2PASS | ADM_ENC_CAP_2PASS_BR;
+	_bitrateParam.qz = DEFAULT_ENCODE_MODE_PARAMETER;
+	_bitrateParam.avg_bitrate = 1000;
+	_bitrateParam.finalsize = 700;
 }
 
 void Mpeg1Encoder::initContext(vidEncVideoProperties *properties)
@@ -138,9 +141,6 @@
 	_userMatrix = options->getMatrix();
 	_gopSize = options->getGopSize();
 
-	_bitrateParam.qz = 1000;
-	_bitrateParam.finalsize = 700;
-
 	updateEncodeProperties(encodeOptions, NULL);
 }
 
@@ -209,7 +209,7 @@
 		}
 	}
 
-	return !failure;
+	return configType == CONFIG_MENU_CUSTOM | !failure;
 }
 
 char *serializeConfig(void)



From mean at mail.berlios.de  Tue Jul 28 20:33:07 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Tue, 28 Jul 2009 20:33:07 +0200
Subject: [Avidemux-svn-commit] r5164 -
	branches/avidemux_2.6_branch_mean/cmake
Message-ID: <200907281833.n6SIX7cO005965@sheep.berlios.de>

Author: mean
Date: 2009-07-28 20:33:06 +0200 (Tue, 28 Jul 2009)
New Revision: 5164

Modified:
   branches/avidemux_2.6_branch_mean/cmake/FindGitSvn.cmake
Log:
[Build] Hack to FindGitSvn so that it works with copies of the git-svn (hudson)

Modified: branches/avidemux_2.6_branch_mean/cmake/FindGitSvn.cmake
===================================================================
--- branches/avidemux_2.6_branch_mean/cmake/FindGitSvn.cmake	2009-07-27 20:46:59 UTC (rev 5163)
+++ branches/avidemux_2.6_branch_mean/cmake/FindGitSvn.cmake	2009-07-28 18:33:06 UTC (rev 5164)
@@ -8,14 +8,14 @@
         #SET(EXE  "cd ${AVIDEMUX_TOP_SOURCE_DIR}&& ${GIT_EXECUTABLE} svn log | head -2  | grep '^r' | sed 's/ .*$//g'" )
         MESSAGE(STATUS "Getting git-svn version from ${AVIDEMUX_TOP_SOURCE_DIR}")
 
-      EXECUTE_PROCESS(COMMAND /usr/bin/git svn log --oneline --limit=1   
+      EXECUTE_PROCESS(COMMAND /usr/bin/git log -n 1   
         WORKING_DIRECTORY ${AVIDEMUX_TOP_SOURCE_DIR} 
         RESULT_VARIABLE result 
         OUTPUT_VARIABLE output
         )
-        STRING(REGEX REPLACE " .*$" "" ADM_GIT_SVN_REVISION "${output}")
-        STRING(REGEX REPLACE "^r" "" ADM_GIT_SVN_REVISION "${ADM_GIT_SVN_REVISION}")
-        MESSAGE(STATUS "Git Svn Revision : ${ADM_GIT_SVN_REVISION}")
+        STRING(REGEX REPLACE ".*branch_mean@" "" ADM_GIT_SVN_REVISION "${output}")
+        STRING(REGEX REPLACE " .*$" "" ADM_GIT_SVN_REVISION "${ADM_GIT_SVN_REVISION}")
+        MESSAGE(STATUS "Git Svn Revision : <${ADM_GIT_SVN_REVISION}>")
 ELSE(GIT_EXECUTABLE)
         SET(ADM_GIT_SVN_REVISION 0)
 ENDIF(GIT_EXECUTABLE)



From gruntster at mail.berlios.de  Tue Jul 28 20:45:36 2009
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Tue, 28 Jul 2009 20:45:36 +0200
Subject: [Avidemux-svn-commit] r5165 - in
	branches/avidemux_2.5_branch_gruntster: . cmake
Message-ID: <200907281845.n6SIjaqf007769@sheep.berlios.de>

Author: gruntster
Date: 2009-07-28 20:45:31 +0200 (Tue, 28 Jul 2009)
New Revision: 5165

Modified:
   branches/avidemux_2.5_branch_gruntster/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/cmake/admCheckGtk.cmake
   branches/avidemux_2.5_branch_gruntster/cmake/admCheckQt4.cmake
Log:
[cmake] correctly report existence of Qt and GTK in plugin cmake summary

Modified: branches/avidemux_2.5_branch_gruntster/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/CMakeLists.txt	2009-07-28 18:33:06 UTC (rev 5164)
+++ branches/avidemux_2.5_branch_gruntster/CMakeLists.txt	2009-07-28 18:45:31 UTC (rev 5165)
@@ -131,14 +131,7 @@
 INCLUDE(admCheckQt4)
 
 checkGtk()
-IF (NOT GTK_FOUND OR NOT GTHREAD_FOUND)
-	SET(ADM_UI_GTK 0)
-ENDIF (NOT GTK_FOUND OR NOT GTHREAD_FOUND)
-
 checkQt4()
-IF (NOT QT4_FOUND)
-	SET(ADM_UI_QT4 0)
-ENDIF (NOT QT4_FOUND)
 
 #INCLUDE(admCheckAudioCodecLibs)
 #INCLUDE(admCheckAudioDeviceLibs)

Modified: branches/avidemux_2.5_branch_gruntster/cmake/admCheckGtk.cmake
===================================================================
--- branches/avidemux_2.5_branch_gruntster/cmake/admCheckGtk.cmake	2009-07-28 18:33:06 UTC (rev 5164)
+++ branches/avidemux_2.5_branch_gruntster/cmake/admCheckGtk.cmake	2009-07-28 18:45:31 UTC (rev 5165)
@@ -44,6 +44,12 @@
 			MESSAGE("${MSG_DISABLE_OPTION}")
 		ENDIF (GTK)
 
+		IF (GTK_FOUND AND GTHREAD_FOUND)
+			SET(ADM_UI_GTK 1)
+		ELSE (GTK_FOUND AND GTHREAD_FOUND)
+			SET(ADM_UI_GTK 0)
+		ENDIF (GTK_FOUND AND GTHREAD_FOUND)
+
 		SET(GTK_CHECKED 1)
 
 		MESSAGE("")

Modified: branches/avidemux_2.5_branch_gruntster/cmake/admCheckQt4.cmake
===================================================================
--- branches/avidemux_2.5_branch_gruntster/cmake/admCheckQt4.cmake	2009-07-28 18:33:06 UTC (rev 5164)
+++ branches/avidemux_2.5_branch_gruntster/cmake/admCheckQt4.cmake	2009-07-28 18:45:31 UTC (rev 5165)
@@ -24,6 +24,12 @@
 			MESSAGE("${MSG_DISABLE_OPTION}")
 		ENDIF (QT4)
 
+		IF (QT4_FOUND)
+			SET(ADM_UI_QT4 1)
+		ELSE (QT4_FOUND)
+			SET(ADM_UI_QT4 0)
+		ENDIF (QT4_FOUND)
+
 		SET(QT4_CHECKED 1)
 
 		MESSAGE("")



From gruntster at mail.berlios.de  Tue Jul 28 23:36:02 2009
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Tue, 28 Jul 2009 23:36:02 +0200
Subject: [Avidemux-svn-commit] r5166 - in
	branches/avidemux_2.5_branch_gruntster/avidemux:
	ADM_UIs/ADM_QT4/src ADM_userInterfaces/ADM_QT4/ADM_dialog
Message-ID: <200907282136.n6SLa2Po006182@sheep.berlios.de>

Author: gruntster
Date: 2009-07-28 23:35:56 +0200 (Tue, 28 Jul 2009)
New Revision: 5166

Added:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/DIA_color.cpp
Removed:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/DIA_none.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_color.cpp
Modified:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/CMakeLists.txt
Log:
[Qt] fix colour chooser dialog

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/CMakeLists.txt	2009-07-28 18:45:31 UTC (rev 5165)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/CMakeLists.txt	2009-07-28 21:35:56 UTC (rev 5166)
@@ -13,7 +13,7 @@
 SET(${ADM_LIB}_SRCS
 	FAC_bar.cpp    FAC_frame.cpp  FAC_integer.cpp  FAC_aspectRatio.cpp
 	FAC_float.cpp  FAC_hex.cpp    FAC_readOnlyText.cpp  toolkit.cpp
-	FAC_matrix.cpp  DIA_none.cpp  ${${ADM_LIB}_source}  ${${ADM_LIB}_T})
+	FAC_matrix.cpp  DIA_color.cpp  ${${ADM_LIB}_source}  ${${ADM_LIB}_T})
 
 INCLUDE_DIRECTORIES(${CMAKE_CURRENT_BINARY_DIR} ${QT_INCLUDE_DIR})
 INCLUDE_DIRECTORIES(${CMAKE_CURRENT_SOURCE_DIR}/../include)

Copied: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/DIA_color.cpp (from rev 5163, branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_color.cpp)

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/DIA_none.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/DIA_none.cpp	2009-07-28 18:45:31 UTC (rev 5165)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/DIA_none.cpp	2009-07-28 21:35:56 UTC (rev 5166)
@@ -1,3 +0,0 @@
-#include "ADM_inttype.h"
-
-int DIA_colorSel(uint8_t *r, uint8_t *g, uint8_t *b) {return 0;}

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/CMakeLists.txt	2009-07-28 18:45:31 UTC (rev 5165)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/CMakeLists.txt	2009-07-28 21:35:56 UTC (rev 5166)
@@ -16,7 +16,7 @@
 	${${ADM_LIB}_headers}  ${${ADM_LIB}_source}  ${${ADM_LIB}_resource}  Q_about.cpp  
 	Q_calculator.cpp  Q_encoding.cpp  Q_license.cpp
 	Q_jobs.cpp  Q_props.cpp   Q_vobsub.cpp  Q_working.cpp   T_index_pg.cpp
-	alert_qt4.cpp  DIA_busy.cpp  DIA_none.cpp  OCR_none.cpp  DIA_color.cpp)
+	alert_qt4.cpp  DIA_busy.cpp  DIA_none.cpp  OCR_none.cpp)
 
 ADD_DEFINITIONS(-DADM_SUBVERSION=${ADM_SUBVERSION})
 INCLUDE_DIRECTORIES(${CMAKE_CURRENT_BINARY_DIR})

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_color.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_color.cpp	2009-07-28 18:45:31 UTC (rev 5165)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_color.cpp	2009-07-28 21:35:56 UTC (rev 5166)
@@ -1,20 +0,0 @@
-#include <QtGui/QColorDialog>
-
-#include "ADM_toolkitQt.h"
-#include "ADM_default.h"
-int DIA_colorSel(uint8_t *r, uint8_t *g, uint8_t *b)
-{
-	QColor initialColor = QColor(*r, *g, *b);
-	QColor color = QColorDialog::getColor(initialColor, qtLastRegisteredDialog());
-
-	if (color.isValid())
-	{
-		*r = color.red();
-		*g = color.green();
-		*b = color.blue();
-
-		return 1;
-	}
-
-	return 0;
-}



From gruntster at mail.berlios.de  Thu Jul 30 19:14:41 2009
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Thu, 30 Jul 2009 19:14:41 +0200
Subject: [Avidemux-svn-commit] r5168 -
	branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui
Message-ID: <200907301714.n6UHEftV013578@sheep.berlios.de>

Author: gruntster
Date: 2009-07-30 19:14:35 +0200 (Thu, 30 Jul 2009)
New Revision: 5168

Modified:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/Q_gui2.cpp
Log:
[Qt] disable configure button when video codec doesn't have settings

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/Q_gui2.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/Q_gui2.cpp	2009-07-29 17:32:12 UTC (rev 5167)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/Q_gui2.cpp	2009-07-30 17:14:35 UTC (rev 5168)
@@ -39,6 +39,7 @@
 extern uint8_t UI_getPhysicalScreenSize(void* window, uint32_t *w,uint32_t *h);
 extern int automation(void );
 extern void HandleAction(Action a);
+extern bool isVideoCodecConfigurable(void);
 extern int encoderGetEncoderCount (void);
 extern const char *encoderGetIndexedName (uint32_t i);
 uint32_t audioEncoderGetNumberOfEncoders(void);
@@ -107,32 +108,23 @@
 
 void MainWindow::comboChanged(int z)
 {
-	const char *source=qPrintable(sender()->objectName());
-
-	if(!strcmp(source,"comboBoxVideo"))  
+	if (sender() == ui.comboBoxVideo)
 	{
-		bool b=FALSE;
-		if(ui.comboBoxVideo->currentIndex())
-		{
-			b=TRUE;
-		}
-		ui.pushButtonVideoConf->setEnabled(b);
+		bool b = (ui.comboBoxVideo->currentIndex() != 0);
+
 		ui.pushButtonVideoFilter->setEnabled(b);
-		HandleAction (ACT_VideoCodecChanged) ;
+		HandleAction (ACT_VideoCodecChanged);
+
+		ui.pushButtonVideoConf->setEnabled(b && isVideoCodecConfigurable());
 	}
-	else if(!strcmp(source,"comboBoxAudio"))  
+	else if (sender() == ui.comboBoxAudio)
 	{
-		bool b=FALSE;
-		if(ui.comboBoxAudio->currentIndex())
-		{
-			b=TRUE;
-		}
+		bool b = (ui.comboBoxAudio->currentIndex() != 0);
+
 		ui.pushButtonAudioConf->setEnabled(b);
 		ui.pushButtonAudioFilter->setEnabled(b);
-		HandleAction (ACT_AudioCodecChanged) ;
+		HandleAction(ACT_AudioCodecChanged);
 	}
-	else
-		printf("From +: %s\n",source);
 }
 
 void MainWindow::sliderValueChanged(int u) 
@@ -255,8 +247,8 @@
 	connect(ui.actionNext_intra_frame, SIGNAL(triggered()), this, SLOT(nextIntraFrame()));
 
 	//ACT_VideoCodecChanged
-	connect( ui.comboBoxVideo,SIGNAL(activated(int)),this,SLOT(comboChanged(int)));
-	connect( ui.comboBoxAudio,SIGNAL(activated(int)),this,SLOT(comboChanged(int)));
+	connect( ui.comboBoxVideo,SIGNAL(currentIndexChanged(int)),this,SLOT(comboChanged(int)));
+	connect( ui.comboBoxAudio,SIGNAL(currentIndexChanged(int)),this,SLOT(comboChanged(int)));
 
 	// Slider
 	slider=ui.horizontalSlider;
@@ -1067,11 +1059,7 @@
 
 void UI_setVideoCodec( int i)
 {
-	int b=!!i;
 	WIDGET(comboBoxVideo)->setCurrentIndex(i);
-
-	WIDGET(pushButtonVideoConf)->setEnabled(b);
-	WIDGET(pushButtonVideoFilter)->setEnabled(b);
 }
 /**
     \fn     UI_getCurrentACodec(void)



From gruntster at mail.berlios.de  Thu Jul 30 19:15:46 2009
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Thu, 30 Jul 2009 19:15:46 +0200
Subject: [Avidemux-svn-commit] r5169 -
	branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder
Message-ID: <200907301715.n6UHFkkq015320@sheep.berlios.de>

Author: gruntster
Date: 2009-07-30 19:15:39 +0200 (Thu, 30 Jul 2009)
New Revision: 5169

Modified:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encConfig.cpp
Log:
[Qt] disable configure button when video codec doesn't have settings

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encConfig.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encConfig.cpp	2009-07-30 17:14:35 UTC (rev 5168)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encConfig.cpp	2009-07-30 17:15:39 UTC (rev 5169)
@@ -503,6 +503,20 @@
 	}
 }
 
+bool isVideoCodecConfigurable(void)
+{
+	COMPRES_PARAMS *param = &AllVideoCodec[currentCodecIndex];
+
+	if (param->codec == CodecExternal)
+	{
+		ADM_vidEnc_plugin *plugin = getVideoEncoderPlugin(param->extra_param);
+
+		return plugin->isConfigurable(plugin->encoderId);
+	}
+	else
+		return param->configure != NULL;
+}
+
 /*___________________________________________________________
 	Set mode param and extra data for the currently selected codec
 	The extradata is a free binary chunk (->memcpy of codec.specific part)



From mean at mail.berlios.de  Thu Jul 30 19:46:18 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Thu, 30 Jul 2009 19:46:18 +0200
Subject: [Avidemux-svn-commit] r5170 -
	branches/avidemux_2.5_branch_gruntster/avidemux/ADM_icons/xpm
Message-ID: <200907301746.n6UHkIMB031121@sheep.berlios.de>

Author: mean
Date: 2009-07-30 19:46:17 +0200 (Thu, 30 Jul 2009)
New Revision: 5170

Removed:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_icons/xpm/audio-volume-medium.inc
Log:
[icons] delete audio-volum-medium

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_icons/xpm/audio-volume-medium.inc
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_icons/xpm/audio-volume-medium.inc	2009-07-30 17:15:39 UTC (rev 5169)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_icons/xpm/audio-volume-medium.inc	2009-07-30 17:46:17 UTC (rev 5170)
@@ -1,61 +0,0 @@
-/* GdkPixbuf RGBA C-Source image dump */
-
-#ifdef __SUNPRO_C
-#pragma align 4 (audio-volume-medium)
-#endif
-#ifdef __GNUC__
-static const guint8 audio_volume_medium[] __attribute__ ((__aligned__ (4))) = 
-#else
-static const guint8 audio_volume_medium[] = 
-#endif
-{ ""
-  /* Pixbuf magic (0x47646b50) */
-  "GdkP"
-  /* length: header (24) + pixel_data (1024) */
-  "\0\0\4\30"
-  /* pixdata_type (0x1010002) */
-  "\1\1\0\2"
-  /* rowstride (64) */
-  "\0\0\0@"
-  /* width (16) */
-  "\0\0\0\20"
-  /* height (16) */
-  "\0\0\0\20"
-  /* pixel_data: */
-  "\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0"
-  "\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0"
-  "\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\210\212\205L\0\0\0\0"
-  "\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0"
-  "\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\210\212\205LUWS\377\0\0\0\1\0\0"
-  "\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0"
-  "\0\0\0\0\0\0\0\0\0\0\0\0\210\212\205LUWS\377UWS\377\0\0\0\6\0\0\0\0\0"
-  "\0\0\0\0\0\0\0\40J\207\225\40J\207\31\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0"
-  "\0\0\0\0\0\0\0\0\210\212\205LUWS\377\247\251\245\377UWS\377\0\0\0\0\0"
-  "\0\0\0\0\0\0\0\0\0\0\0\40J\207\31\40J\207\225\40J\207\31\0\0\0\0UWS\377"
-  "UWS\377UWS\377\210\212\205LUWS\377\247\251\245\377\330\331\327\377UW"
-  "S\377\0\0\0\0\0\0\0\0\40J\207\377\40J\207+\0\0\0\0\40J\207c\40J\207."
-  "\0\0\0\0UWS\377\265\267\264\377\233\234\232\377UWS\377\247\251\245\377"
-  "\337\340\336\377\365\365\365\377UWS\377UWSL\0\0\0\0\40J\207+\40J\207"
-  "\377\0\0\0\0\40J\207.\40J\207c\0\0\0\0UWS\377\351\351\350\377\331\332"
-  "\331\377\253\254\252\377\354\354\354\377\356\356\356\377\276\277\275"
-  "\377UWS\377UWS\247\0\0\0\0\0\0\0\0\40J\207\377\0\0\0\0\40J\207\31\40"
-  "J\207z\0\0\0\0UWS\377\246\250\244\377\212\214\210\377\341\341\340\377"
-  "\307\310\306\377\257\261\255\377\267\270\266\377UWS\377UWS\340\0\0\0"
-  "\0\0\0\0\0\40J\207\377\0\0\0\0\0\0\0\0\40J\207\225\0\0\0\0UWS\377\223"
-  "\225\221\377y{w\377\263\264\261\377\225\227\223\377\246\250\244\377\246"
-  "\250\244\377UWS\377UWS\247\0\0\0\0\0\0\0\0\40J\207\377\0\0\0\0\40J\207"
-  "\31\40J\207z\0\0\0\0UWS\377\262\264\260\377\256\260\255\377UWS\377\312"
-  "\313\311\377\225\227\223\377\225\227\223\377UWS\377UWSL\0\0\0\0\40J\207"
-  "+\40J\207\377\0\0\0\0\40J\207.\40J\207c\0\0\0\0UWS\377UWS\377UWS\377"
-  "\210\212\205LUWS\377\302\303\301\377\264\265\263\377UWS\377\0\0\0\0\0"
-  "\0\0\0\40J\207\377\40J\207+\0\0\0\0\40J\207c\40J\207.\0\0\0\0\0\0\0\0"
-  "\0\0\0\0\0\0\0\0\0\0\0\0\210\212\205LUWS\377\335\335\334\377UWS\377\0"
-  "\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\40J\207\31\40J\207z\40J\207\31\0\0\0\0"
-  "\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\210\212\205LUWS\377UWS\377\0"
-  "\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\40J\207\225\40J\207\31\0\0\0\0\0\0\0\0"
-  "\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\210\212\205LUWS\377"
-  "\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0"
-  "\0\0\0\0\0\0\0\0\0\3\0\0\0\2\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0"
-  "\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0"};
-
-



From mean at mail.berlios.de  Thu Jul 30 19:46:20 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Thu, 30 Jul 2009 19:46:20 +0200
Subject: [Avidemux-svn-commit] r5171 - in
	branches/avidemux_2.5_branch_gruntster: . cmake
Message-ID: <200907301746.n6UHkK6P031131@sheep.berlios.de>

Author: mean
Date: 2009-07-30 19:46:19 +0200 (Thu, 30 Jul 2009)
New Revision: 5171

Added:
   branches/avidemux_2.5_branch_gruntster/cmake/FindGitSvn.cmake
   branches/avidemux_2.5_branch_gruntster/cmake/admGetRevision.cmake
Modified:
   branches/avidemux_2.5_branch_gruntster/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/bootStrap.sh
Log:
[build] Fetch version for svn AND git

Modified: branches/avidemux_2.5_branch_gruntster/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/CMakeLists.txt	2009-07-30 17:46:17 UTC (rev 5170)
+++ branches/avidemux_2.5_branch_gruntster/CMakeLists.txt	2009-07-30 17:46:19 UTC (rev 5171)
@@ -98,29 +98,20 @@
 # Subversion
 ########################################
 OPTION(SVN "" ON)
+SET(ADM_SUBVERSION 0)
 
-IF (SVN AND NOT CMAKE_BUILD_TYPE STREQUAL "Debug" AND EXISTS "${CMAKE_SOURCE_DIR}/.svn")
-	MESSAGE(STATUS "Checking for Subversion")
-	MESSAGE(STATUS "***********************")
+#IF ( CMAKE_BUILD_TYPE STREQUAL "Debug" )
+	MESSAGE(STATUS "Checking for SCM Revision")
+	MESSAGE(STATUS "*************************")
 
 	SET(Subversion_FIND_REQUIRED OFF)
-	FIND_PACKAGE(Subversion)
-
-	IF (Subversion_FOUND)
-		Subversion_WC_INFO(${PROJECT_SOURCE_DIR} Project)
-		MESSAGE(STATUS "  revision: ${Project_WC_REVISION}")
-		SET(ADM_SUBVERSION ${Project_WC_REVISION})
-	ELSE (Subversion_FOUND)
-		MESSAGE(STATUS "Could not find Subversion")
-	ENDIF (Subversion_FOUND)
+        include (admGetRevision)
+        admGetRevision( ${PROJECT_SOURCE_DIR} ADM_SUBVERSION)
+        MESSAGE(STATUS "  revision: ${ADM_SUBVERSION}")
 	
 	MESSAGE("")
-ENDIF (SVN AND NOT CMAKE_BUILD_TYPE STREQUAL "Debug" AND EXISTS "${CMAKE_SOURCE_DIR}/.svn")
+#ENDIF ( CMAKE_BUILD_TYPE STREQUAL "Debug" )
 
-IF (NOT Subversion_FOUND)
-	SET(ADM_SUBVERSION 0)
-ENDIF (NOT Subversion_FOUND)
-
 ########################################
 # Check for libraries
 ########################################

Modified: branches/avidemux_2.5_branch_gruntster/bootStrap.sh
===================================================================
--- branches/avidemux_2.5_branch_gruntster/bootStrap.sh	2009-07-30 17:46:17 UTC (rev 5170)
+++ branches/avidemux_2.5_branch_gruntster/bootStrap.sh	2009-07-30 17:46:19 UTC (rev 5171)
@@ -16,7 +16,7 @@
 mkdir -p buildMain
 cd buildMain
 cmake -DCMAKE_INSTALL_PREFIX=$PREFIX -DAVIDEMUX_INSTALL_PREFIX=$PREFIX .. || fail cmake
-make  || fail make_main
+make -j 3 || fail make_main
 sudo make install || fail install_main
 sudo ldconfig
 echo "*  Main Ok*"
@@ -26,7 +26,7 @@
 mkdir -p buildPlugins
 cd buildPlugins
 cmake -DCMAKE_INSTALL_PREFIX=$PREFIX -DAVIDEMUX_INSTALL_PREFIX=$PREFIX  -DAVIDEMUX_SOURCE_DIR=$TOP/  -DAVIDEMUX_CORECONFIG_DIR=$TOP/buildMain/config ../plugins || fail cmake_plugins
-make   || fail make_plugins
+make -j 3  || fail make_plugins
 sudo make install
 echo "*  All Done  *"
 

Added: branches/avidemux_2.5_branch_gruntster/cmake/FindGitSvn.cmake
===================================================================
--- branches/avidemux_2.5_branch_gruntster/cmake/FindGitSvn.cmake	2009-07-30 17:46:17 UTC (rev 5170)
+++ branches/avidemux_2.5_branch_gruntster/cmake/FindGitSvn.cmake	2009-07-30 17:46:19 UTC (rev 5171)
@@ -0,0 +1,28 @@
+# - Extract information from a subversion working copy
+MACRO(admGetGitRevision _dir _rev)
+
+FIND_PROGRAM(GIT_EXECUTABLE git
+  DOC "git command line client")
+MARK_AS_ADVANCED(GIT_EXECUTABLE)
+
+IF(GIT_EXECUTABLE)
+        
+        #SET(EXE  "cd ${_dir}&& ${GIT_EXECUTABLE} svn log | head -2  | grep '^r' | sed 's/ .*$//g'" )
+        MESSAGE(STATUS "Getting git-svn version from ${_dir}")
+
+      EXECUTE_PROCESS(COMMAND ${GIT_EXECUTABLE} log -n 1   
+        WORKING_DIRECTORY ${_dir} 
+        RESULT_VARIABLE result 
+        OUTPUT_VARIABLE output
+        )
+        STRING(REGEX REPLACE ".*branch_gruntster@" "" rev "${output}")
+        STRING(REGEX REPLACE " .*$" "" rev "${rev}")
+        MESSAGE(STATUS "Git Svn Revision : <${rev}>")
+        SET( ${_rev} ${rev})
+ELSE(GIT_EXECUTABLE)
+        SET(ADM_GIT_SVN_REVISION 0)
+ENDIF(GIT_EXECUTABLE)
+
+ENDMACRO(admGetGitRevision _dir _rev)
+
+# FindSubversion.cmake ends here.

Added: branches/avidemux_2.5_branch_gruntster/cmake/admGetRevision.cmake
===================================================================
--- branches/avidemux_2.5_branch_gruntster/cmake/admGetRevision.cmake	2009-07-30 17:46:17 UTC (rev 5170)
+++ branches/avidemux_2.5_branch_gruntster/cmake/admGetRevision.cmake	2009-07-30 17:46:19 UTC (rev 5171)
@@ -0,0 +1,23 @@
+#
+# Set ADM_SUBVERSION either using subversion or git SVN to 
+#  get the revision
+#
+MACRO(admGetRevision _dir _rev)
+if (EXISTS "${_dir}/.svn")
+        MESSAGE(STATUS "Seems to be SVN...")
+        FIND_PACKAGE( Subversion)
+        Subversion_WC_INFO( ${_dir} ADM_SVN)
+        SET(${_rev} ${ADM_SVN_WC_REVISION})
+else (EXISTS "${_dir}/.svn")
+        if (EXISTS "${_dir}/.git")
+                MESSAGE(STATUS "Seems to be git svn...")
+                include( FindGitSvn)
+                admGetGitRevision( ${_dir} ADM_GIT_SVN_REVISION)
+                SET(${_rev} ${ADM_GIT_SVN_REVISION})
+        else (EXISTS "${_dir}/.git")
+                MESSAGE(STATUS "Dont know what SCM is used")
+                SET(${_rev} "0")
+        endif (EXISTS "${_dir}/.git")
+endif (EXISTS "${_dir}/.svn")
+                #MESSAGE( STATUS "revision : ${${_rev}}" )
+ENDMACRO(admGetRevision _dir _rev)



From mean at mail.berlios.de  Thu Jul 30 19:46:22 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Thu, 30 Jul 2009 19:46:22 +0200
Subject: [Avidemux-svn-commit] r5172 -
	branches/avidemux_2.5_branch_gruntster/cmake
Message-ID: <200907301746.n6UHkMph031145@sheep.berlios.de>

Author: mean
Date: 2009-07-30 19:46:21 +0200 (Thu, 30 Jul 2009)
New Revision: 5172

Modified:
   branches/avidemux_2.5_branch_gruntster/cmake/FindGitSvn.cmake
   branches/avidemux_2.5_branch_gruntster/cmake/FindSubversion.cmake
Log:
[build] Also check git/git svn to get the rev number, fixes #7

Modified: branches/avidemux_2.5_branch_gruntster/cmake/FindGitSvn.cmake
===================================================================
--- branches/avidemux_2.5_branch_gruntster/cmake/FindGitSvn.cmake	2009-07-30 17:46:19 UTC (rev 5171)
+++ branches/avidemux_2.5_branch_gruntster/cmake/FindGitSvn.cmake	2009-07-30 17:46:21 UTC (rev 5172)
@@ -10,12 +10,15 @@
         #SET(EXE  "cd ${_dir}&& ${GIT_EXECUTABLE} svn log | head -2  | grep '^r' | sed 's/ .*$//g'" )
         MESSAGE(STATUS "Getting git-svn version from ${_dir}")
 
-      EXECUTE_PROCESS(COMMAND ${GIT_EXECUTABLE} log -n 1   
+      EXECUTE_PROCESS(COMMAND ${GIT_EXECUTABLE} log -n 50 ${_dir}
+        COMMAND grep git-svn-id
+	COMMAND head -1
         WORKING_DIRECTORY ${_dir} 
         RESULT_VARIABLE result 
         OUTPUT_VARIABLE output
         )
-        STRING(REGEX REPLACE ".*branch_gruntster@" "" rev "${output}")
+        #MESSAGE(STATUS "Git Svn Revision : <${output}>")
+        STRING(REGEX REPLACE ".*branch_.*@" "" rev "${output}")
         STRING(REGEX REPLACE " .*$" "" rev "${rev}")
         MESSAGE(STATUS "Git Svn Revision : <${rev}>")
         SET( ${_rev} ${rev})

Modified: branches/avidemux_2.5_branch_gruntster/cmake/FindSubversion.cmake
===================================================================
--- branches/avidemux_2.5_branch_gruntster/cmake/FindSubversion.cmake	2009-07-30 17:46:19 UTC (rev 5171)
+++ branches/avidemux_2.5_branch_gruntster/cmake/FindSubversion.cmake	2009-07-30 17:46:21 UTC (rev 5172)
@@ -87,8 +87,8 @@
     ENDIF(NOT ${Subversion_svn_info_result} EQUAL 0)
 
     EXECUTE_PROCESS(COMMAND
-      ${Subversion_SVN_EXECUTABLE} log -r BASE .
-      WORKING_DIRECTORY ${PROJECT_SOURCE_DIR}
+      ${Subversion_SVN_EXECUTABLE} log -r BASE ${dir} 
+      WORKING_DIRECTORY ${dir}
       OUTPUT_VARIABLE Subversion_LAST_CHANGED_LOG
       ERROR_VARIABLE Subversion_svn_log_error
       RESULT_VARIABLE Subversion_svn_log_result



From mean at mail.berlios.de  Thu Jul 30 19:46:23 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Thu, 30 Jul 2009 19:46:23 +0200
Subject: [Avidemux-svn-commit] r5173 -
	branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk
Message-ID: <200907301746.n6UHkNSx031158@sheep.berlios.de>

Author: mean
Date: 2009-07-30 19:46:23 +0200 (Thu, 30 Jul 2009)
New Revision: 5173

Modified:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/ADM_icons.cpp
Log:
[Gtk] Fix crash when doing about, introduced by commit 5167

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/ADM_icons.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/ADM_icons.cpp	2009-07-30 17:46:21 UTC (rev 5172)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/ADM_icons.cpp	2009-07-30 17:46:23 UTC (rev 5173)
@@ -100,7 +100,7 @@
         {A_ICON_PNG,"6.png",(void *) x6},
         {A_ICON_PNG,"7.png",(void *) x7},
 #endif
-        {A_ICON_XPM,"avidemux_icon.xpm",        (void *) avidemux_icon},
+        {A_ICON_PNG,"avidemux_icon.xpm",        (void *) avidemux_icon},
         {A_ICON_PNG,"avidemux_icon_small.png",  (void *) avidemux_icon_small},
         {A_ICON_PNG,"systray.png",              (void *) systray},
         {A_ICON_PNG,"audio-volume-medium.png",  (void *) audio_volume_medium},



From mean at mail.berlios.de  Thu Jul 30 20:05:01 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Thu, 30 Jul 2009 20:05:01 +0200
Subject: [Avidemux-svn-commit] r5175 -
	branches/avidemux_2.6_branch_mean/avidemux
Message-ID: <200907301805.n6UI51Qa001762@sheep.berlios.de>

Author: mean
Date: 2009-07-30 20:05:00 +0200 (Thu, 30 Jul 2009)
New Revision: 5175

Modified:
   branches/avidemux_2.6_branch_mean/avidemux/commonCmakeApplication.cmake
Log:
[build] Use updated getgitrevision from 2.5

Modified: branches/avidemux_2.6_branch_mean/avidemux/commonCmakeApplication.cmake
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/commonCmakeApplication.cmake	2009-07-30 18:04:59 UTC (rev 5174)
+++ branches/avidemux_2.6_branch_mean/avidemux/commonCmakeApplication.cmake	2009-07-30 18:05:00 UTC (rev 5175)
@@ -70,14 +70,14 @@
 include(FindThreads)
 INCLUDE(admCheckRequiredLibs)
 include(admCheckMiscLibs)
+include( admGetRevision)
 ########################################
 # Subversion
 ########################################
 MESSAGE("")
 MESSAGE(STATUS "Checking for SCM")
 MESSAGE(STATUS "****************")
-include( admGetRevision)
-admGetRevision()
+admGetRevision( ${AVIDEMUX_TOP_SOURCE_DIR} ADM_SUBVERSION)
 MESSAGE("")
 ########################################
 # Add include dirs



From mean at mail.berlios.de  Thu Jul 30 20:05:02 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Thu, 30 Jul 2009 20:05:02 +0200
Subject: [Avidemux-svn-commit] r5176 -
	branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/ADM_dialog
Message-ID: <200907301805.n6UI52MS001787@sheep.berlios.de>

Author: mean
Date: 2009-07-30 20:05:02 +0200 (Thu, 30 Jul 2009)
New Revision: 5176

Modified:
   branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/ADM_dialog/DIA_about.cpp
Log:
[gtk] The icons are no longer in xpm, so remove it from dialog box temporarily

Modified: branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/ADM_dialog/DIA_about.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/ADM_dialog/DIA_about.cpp	2009-07-30 18:05:00 UTC (rev 5175)
+++ branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/ADM_dialog/DIA_about.cpp	2009-07-30 18:05:02 UTC (rev 5176)
@@ -62,9 +62,10 @@
   gtk_about_dialog_set_authors (GTK_ABOUT_DIALOG (aboutdialog1), authors);
   gtk_about_dialog_set_artists (GTK_ABOUT_DIALOG (aboutdialog1), artists);
   gtk_about_dialog_set_translator_credits (GTK_ABOUT_DIALOG (aboutdialog1), QT_TR_NOOP("translator-credits"));
+#if 0
   aboutdialog1_logo_pixbuf = create_pixbuf ("avidemux_icon.xpm");
   gtk_about_dialog_set_logo (GTK_ABOUT_DIALOG (aboutdialog1), aboutdialog1_logo_pixbuf);
-
+#endif
   /* Store pointers to all widgets, for use by lookup_widget(). */
   GLADE_HOOKUP_OBJECT_NO_REF (aboutdialog1, aboutdialog1, "aboutdialog1");
 



From mean at mail.berlios.de  Thu Jul 30 20:04:59 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Thu, 30 Jul 2009 20:04:59 +0200
Subject: [Avidemux-svn-commit] r5174 - in branches/avidemux_2.6_branch_mean:
	avidemux_core cmake
Message-ID: <200907301804.n6UI4xxa001750@sheep.berlios.de>

Author: mean
Date: 2009-07-30 20:04:59 +0200 (Thu, 30 Jul 2009)
New Revision: 5174

Modified:
   branches/avidemux_2.6_branch_mean/avidemux_core/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/cmake/FindGitSvn.cmake
   branches/avidemux_2.6_branch_mean/cmake/admGetRevision.cmake
Log:
[build] Use updated getgitrevision from 2.5

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/CMakeLists.txt	2009-07-30 17:46:23 UTC (rev 5173)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/CMakeLists.txt	2009-07-30 18:04:59 UTC (rev 5174)
@@ -34,6 +34,7 @@
 ENDIF (${Avidemux_SOURCE_DIR} MATCHES ${Avidemux_BINARY_DIR})
 
 INCLUDE(admConfigHelper)
+include( admGetRevision)
 
 IF (FRESH_BUILD)
 	MESSAGE("")
@@ -105,8 +106,7 @@
 MESSAGE("")
 MESSAGE(STATUS "Checking for SCM")
 MESSAGE(STATUS "****************")
-include( admGetRevision)
-admGetRevision()
+admGetRevision( ${AVIDEMUX_TOP_SOURCE_DIR} ADM_SUBVERSION)
 MESSAGE("")
 
 

Modified: branches/avidemux_2.6_branch_mean/cmake/FindGitSvn.cmake
===================================================================
--- branches/avidemux_2.6_branch_mean/cmake/FindGitSvn.cmake	2009-07-30 17:46:23 UTC (rev 5173)
+++ branches/avidemux_2.6_branch_mean/cmake/FindGitSvn.cmake	2009-07-30 18:04:59 UTC (rev 5174)
@@ -1,23 +1,31 @@
 # - Extract information from a subversion working copy
+MACRO(admGetGitRevision _dir _rev)
+
 FIND_PROGRAM(GIT_EXECUTABLE git
   DOC "git command line client")
 MARK_AS_ADVANCED(GIT_EXECUTABLE)
 
 IF(GIT_EXECUTABLE)
         
-        #SET(EXE  "cd ${AVIDEMUX_TOP_SOURCE_DIR}&& ${GIT_EXECUTABLE} svn log | head -2  | grep '^r' | sed 's/ .*$//g'" )
-        MESSAGE(STATUS "Getting git-svn version from ${AVIDEMUX_TOP_SOURCE_DIR}")
+        #SET(EXE  "cd ${_dir}&& ${GIT_EXECUTABLE} svn log | head -2  | grep '^r' | sed 's/ .*$//g'" )
+        MESSAGE(STATUS "Getting git-svn version from ${_dir}")
 
-      EXECUTE_PROCESS(COMMAND /usr/bin/git log -n 1   
-        WORKING_DIRECTORY ${AVIDEMUX_TOP_SOURCE_DIR} 
+      EXECUTE_PROCESS(COMMAND ${GIT_EXECUTABLE} log -n 50 ${_dir}
+        COMMAND grep git-svn-id
+	COMMAND head -1
+        WORKING_DIRECTORY ${_dir} 
         RESULT_VARIABLE result 
         OUTPUT_VARIABLE output
         )
-        STRING(REGEX REPLACE ".*branch_mean@" "" ADM_GIT_SVN_REVISION "${output}")
-        STRING(REGEX REPLACE " .*$" "" ADM_GIT_SVN_REVISION "${ADM_GIT_SVN_REVISION}")
-        MESSAGE(STATUS "Git Svn Revision : <${ADM_GIT_SVN_REVISION}>")
+        #MESSAGE(STATUS "Git Svn Revision : <${output}>")
+        STRING(REGEX REPLACE ".*branch_.*@" "" rev "${output}")
+        STRING(REGEX REPLACE " .*$" "" rev "${rev}")
+        MESSAGE(STATUS "Git Svn Revision : <${rev}>")
+        SET( ${_rev} ${rev})
 ELSE(GIT_EXECUTABLE)
         SET(ADM_GIT_SVN_REVISION 0)
 ENDIF(GIT_EXECUTABLE)
 
+ENDMACRO(admGetGitRevision _dir _rev)
+
 # FindSubversion.cmake ends here.

Modified: branches/avidemux_2.6_branch_mean/cmake/admGetRevision.cmake
===================================================================
--- branches/avidemux_2.6_branch_mean/cmake/admGetRevision.cmake	2009-07-30 17:46:23 UTC (rev 5173)
+++ branches/avidemux_2.6_branch_mean/cmake/admGetRevision.cmake	2009-07-30 18:04:59 UTC (rev 5174)
@@ -2,21 +2,22 @@
 # Set ADM_SUBVERSION either using subversion or git SVN to 
 #  get the revision
 #
-MACRO(admGetRevision)
-if (EXISTS "${AVIDEMUX_TOP_SOURCE_DIR}/.svn")
+MACRO(admGetRevision _dir _rev)
+if (EXISTS "${_dir}/.svn")
         MESSAGE(STATUS "Seems to be SVN...")
         FIND_PACKAGE( Subversion)
-        Subversion_WC_INFO( ${AVIDEMUX_TOP_SOURCE_DIR} ADM_SVN)
-        SET(ADM_SUBVERSION ${ADM_SVN_WC_REVISION})
-else (EXISTS "${AVIDEMUX_TOP_SOURCE_DIR}/.svn")
-        if (EXISTS "${AVIDEMUX_TOP_SOURCE_DIR}/.git")
+        Subversion_WC_INFO( ${_dir} ADM_SVN)
+        SET(${_rev} ${ADM_SVN_WC_REVISION})
+else (EXISTS "${_dir}/.svn")
+        if (EXISTS "${_dir}/.git")
                 MESSAGE(STATUS "Seems to be git svn...")
                 include( FindGitSvn)
-                SET(ADM_SUBVERSION ${ADM_GIT_SVN_REVISION})
-        else (EXISTS "${AVIDEMUX_TOP_SOURCE_DIR}/.git")
+                admGetGitRevision( ${_dir} ADM_GIT_SVN_REVISION)
+                SET(${_rev} ${ADM_GIT_SVN_REVISION})
+        else (EXISTS "${_dir}/.git")
                 MESSAGE(STATUS "Dont know what SCM is used")
-                SET(ADM_SUBVERSION "0")
-        endif (EXISTS "${AVIDEMUX_TOP_SOURCE_DIR}/.git")
-endif (EXISTS "${AVIDEMUX_TOP_SOURCE_DIR}/.svn")
-                MESSAGE( STATUS "revision : ${ADM_SUBVERSION}" )
-ENDMACRO(admGetRevision)
+                SET(${_rev} "0")
+        endif (EXISTS "${_dir}/.git")
+endif (EXISTS "${_dir}/.svn")
+                #MESSAGE( STATUS "revision : ${${_rev}}" )
+ENDMACRO(admGetRevision _dir _rev)



From gruntster at mail.berlios.de  Thu Jul 30 20:20:21 2009
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Thu, 30 Jul 2009 20:20:21 +0200
Subject: [Avidemux-svn-commit] r5177 -
	branches/avidemux_2.5_branch_gruntster/avidemux
Message-ID: <200907301820.n6UIKLAT004439@sheep.berlios.de>

Author: gruntster
Date: 2009-07-30 20:20:15 +0200 (Thu, 30 Jul 2009)
New Revision: 5177

Modified:
   branches/avidemux_2.5_branch_gruntster/avidemux/CMakeLists.txt
Log:
[win32] fix linking

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/CMakeLists.txt	2009-07-30 18:05:02 UTC (rev 5176)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/CMakeLists.txt	2009-07-30 18:20:15 UTC (rev 5177)
@@ -451,14 +451,14 @@
 
 	ADD_LIB_ALL_TARGETS(winmm)
 
-	ADD_TARGET_LDFLAGS(avidemux2_cli "-Wl,-subsystem,console ${CMAKE_SOURCE_DIR}/avidemux/xpm/adm.o")
+	ADD_TARGET_LDFLAGS(avidemux2_cli "-Wl,-subsystem,console ${CMAKE_SOURCE_DIR}/avidemux/ADM_icons/xpm/adm.o")
 
 	IF (ADM_UI_GTK)
-		ADD_TARGET_LDFLAGS(avidemux2_gtk "-mwindows ${CMAKE_SOURCE_DIR}/avidemux/xpm/adm.o")
+		ADD_TARGET_LDFLAGS(avidemux2_gtk "-mwindows ${CMAKE_SOURCE_DIR}/avidemux/ADM_icons/xpm/adm.o")
 	ENDIF (ADM_UI_GTK)
 
 	IF (ADM_UI_QT4)
-		ADD_TARGET_LDFLAGS(avidemux2_qt4 "-mwindows ${CMAKE_SOURCE_DIR}/avidemux/xpm/avidemux.o")
+		ADD_TARGET_LDFLAGS(avidemux2_qt4 "-mwindows ${CMAKE_SOURCE_DIR}/avidemux/ADM_icons/xpm/avidemux.o")
 	ENDIF (ADM_UI_QT4)
 ENDIF (WIN32)
 



From gruntster at mail.berlios.de  Thu Jul 30 20:38:42 2009
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Thu, 30 Jul 2009 20:38:42 +0200
Subject: [Avidemux-svn-commit] r5178 - in
	branches/avidemux_2.5_branch_gruntster:
	avidemux/ADM_UIs/ADM_GTK/src avidemux/ADM_UIs/ADM_QT4/src
	avidemux/ADM_coreUI/include avidemux/ADM_coreUI/src
	plugins/ADM_videoEncoder/ADM_vidEnc_avcodec
Message-ID: <200907301838.n6UIcg18007180@sheep.berlios.de>

Author: gruntster
Date: 2009-07-30 20:38:30 +0200 (Thu, 30 Jul 2009)
New Revision: 5178

Modified:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_GTK/src/FAC_configMenu.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/T_configMenu.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/T_configMenu.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/T_dialogFactory.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/include/DIA_factory.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/src/DIA_factory.cpp
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/mpeg1Encoder.cpp
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/mpeg1Encoder.h
Log:
[dlgFactory] load/save profile on Qt config menu

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_GTK/src/FAC_configMenu.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_GTK/src/FAC_configMenu.cpp	2009-07-30 18:20:15 UTC (rev 5177)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_GTK/src/FAC_configMenu.cpp	2009-07-30 18:38:30 UTC (rev 5178)
@@ -230,8 +230,8 @@
 		CONFIG_MENU_SERIALIZE_T *serializeFunc;
 
 	public:
-		diaElemConfigMenu(const char* userConfigDir, const char* systemConfigDir, CONFIG_MENU_CHANGED_T *changedFunc,
-				CONFIG_MENU_SERIALIZE_T *serializeFunc, diaElem **controls, unsigned int controlCount);
+		diaElemConfigMenu(char *configName, ConfigMenuType *configType, const char* userConfigDir, const char* systemConfigDir, 
+			CONFIG_MENU_CHANGED_T *changedFunc, CONFIG_MENU_SERIALIZE_T *serializeFunc, diaElem **controls, unsigned int controlCount);
 		~diaElemConfigMenu();
 		void setMe(void *dialog, void *opaque, uint32_t line);
 		void getMe(void);
@@ -241,8 +241,9 @@
 		void finalize(void);
 	};
 
-	diaElemConfigMenu::diaElemConfigMenu(const char* userConfigDir, const char* systemConfigDir, CONFIG_MENU_CHANGED_T *changedFunc,
-				CONFIG_MENU_SERIALIZE_T *serializeFunc, diaElem **controls, unsigned int controlCount) : diaElem(ELEM_CONFIG_MENU)
+	diaElemConfigMenu::diaElemConfigMenu(char *configName, ConfigMenuType *configType, const char* userConfigDir,
+		const char* systemConfigDir, CONFIG_MENU_CHANGED_T *changedFunc, CONFIG_MENU_SERIALIZE_T *serializeFunc,
+		diaElem **controls, unsigned int controlCount) : diaElem(ELEM_CONFIG_MENU)
 	{
 		this->userConfigDir = userConfigDir;
 		this->systemConfigDir = systemConfigDir;
@@ -312,10 +313,12 @@
 	}
 }
 
-diaElem* gtkCreateConfigMenu(const char* userConfigDir, const char* systemConfigDir, CONFIG_MENU_CHANGED_T *changedFunc, 
-							 CONFIG_MENU_SERIALIZE_T *serializeFunc, diaElem **controls, unsigned int controlCount)
+diaElem* gtkCreateConfigMenu(char *configName, ConfigMenuType *configType, const char* userConfigDir, const char* systemConfigDir,
+							 CONFIG_MENU_CHANGED_T *changedFunc, CONFIG_MENU_SERIALIZE_T *serializeFunc, diaElem **controls, 
+							 unsigned int controlCount)
 {
-	return new ADM_GtkFactory::diaElemConfigMenu(userConfigDir, systemConfigDir, changedFunc, serializeFunc, controls, controlCount);
+	return new ADM_GtkFactory::diaElemConfigMenu(configName, configType, userConfigDir, systemConfigDir, changedFunc,
+		serializeFunc, controls, controlCount);
 }
 
 void gtkDestroyConfigMenu(diaElem *e)

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/T_configMenu.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/T_configMenu.cpp	2009-07-30 18:20:15 UTC (rev 5177)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/T_configMenu.cpp	2009-07-30 18:38:30 UTC (rev 5178)
@@ -30,9 +30,9 @@
 
 namespace ADM_Qt4Factory
 {
-	ADM_QconfigMenu::ADM_QconfigMenu(QWidget *widget, QGridLayout *layout, int line, 
-		const char* userConfigDir, const char* systemConfigDir, CONFIG_MENU_CHANGED_T *changedFunc, 
-		CONFIG_MENU_SERIALIZE_T *serializeFunc, diaElem **controls, unsigned int controlCount) : QWidget(widget) 
+	ADM_QconfigMenu::ADM_QconfigMenu(QWidget *widget, QGridLayout *layout, int line, const char* userConfigDir,
+		const char* systemConfigDir, CONFIG_MENU_CHANGED_T *changedFunc, CONFIG_MENU_SERIALIZE_T *serializeFunc,
+		diaElem **controls,	unsigned int controlCount) : QWidget(widget) 
 	{
 		disableGenericSlots = false;
 
@@ -133,6 +133,13 @@
 		disableGenericSlots = origDisableGenericSlots;
 	}
 
+	void ADM_QconfigMenu::getConfiguration(char *configName, ConfigMenuType *configType)
+	{
+		strcpy(configName, combobox->currentText().toUtf8().constData());
+
+		*configType = (ConfigMenuType)combobox->itemData(combobox->currentIndex()).toInt();
+	}
+
 	bool ADM_QconfigMenu::selectConfiguration(QString *selectFile, ConfigMenuType configurationType)
 	{
 		bool success = false;
@@ -238,6 +245,9 @@
 	class diaElemConfigMenu : public diaElem
 	{
 	protected:
+		char *configName;
+		ConfigMenuType *configType;
+
 		const char *userConfigDir, *systemConfigDir;
 		diaElem **controls;
 		unsigned int controlCount;
@@ -246,8 +256,9 @@
 		CONFIG_MENU_SERIALIZE_T *serializeFunc;
 
 	public:
-		diaElemConfigMenu(const char* userConfigDir, const char* systemConfigDir, CONFIG_MENU_CHANGED_T *changedFunc,
-				CONFIG_MENU_SERIALIZE_T *serializeFunc, diaElem **controls, unsigned int controlCount);
+		diaElemConfigMenu(char *configName, ConfigMenuType *configType, const char* userConfigDir,
+			const char* systemConfigDir, CONFIG_MENU_CHANGED_T *changedFunc, CONFIG_MENU_SERIALIZE_T *serializeFunc,
+			diaElem **controls, unsigned int controlCount);
 		~diaElemConfigMenu();
 		void setMe(void *dialog, void *opaque, uint32_t line);
 		void getMe(void);
@@ -257,9 +268,13 @@
 		void finalize(void);
 	};
 
-	diaElemConfigMenu::diaElemConfigMenu(const char* userConfigDir, const char* systemConfigDir, CONFIG_MENU_CHANGED_T *changedFunc,
-				CONFIG_MENU_SERIALIZE_T *serializeFunc, diaElem **controls, unsigned int controlCount) : diaElem(ELEM_CONFIG_MENU)
+	diaElemConfigMenu::diaElemConfigMenu(char *configName, ConfigMenuType *configType, const char* userConfigDir,
+		const char* systemConfigDir, CONFIG_MENU_CHANGED_T *changedFunc, CONFIG_MENU_SERIALIZE_T *serializeFunc,
+		diaElem **controls, unsigned int controlCount) : diaElem(ELEM_CONFIG_MENU)
 	{
+		this->configName = configName;
+		this->configType = configType;
+
 		this->userConfigDir = userConfigDir;
 		this->systemConfigDir = systemConfigDir;
 
@@ -285,6 +300,9 @@
 
 	void diaElemConfigMenu::getMe(void)
 	{
+		ADM_QconfigMenu *configMenu = (ADM_QconfigMenu*)myWidget;
+
+		configMenu->getConfiguration(configName, configType);
 	}
 
 	void diaElemConfigMenu::enable(uint32_t onoff)
@@ -298,6 +316,9 @@
 
 	void diaElemConfigMenu::updateMe(void)
 	{
+		ADM_QconfigMenu *configMenu = (ADM_QconfigMenu*)myWidget;
+
+		configMenu->selectConfiguration(&QString(configName), *configType);
 	}
 
 	void diaElemConfigMenu::finalize(void)
@@ -336,13 +357,17 @@
 				while (parentWidget != NULL);
 			}
 		}
+
+		configMenu->selectConfiguration(&QString(configName), *configType);
 	}
 }
 
-diaElem* qt4CreateConfigMenu(const char* userConfigDir, const char* systemConfigDir, CONFIG_MENU_CHANGED_T *changedFunc, 
-							 CONFIG_MENU_SERIALIZE_T *serializeFunc, diaElem **controls, unsigned int controlCount)
+diaElem* qt4CreateConfigMenu(char *configName, ConfigMenuType *configType, const char* userConfigDir, const char* systemConfigDir,
+							 CONFIG_MENU_CHANGED_T *changedFunc, CONFIG_MENU_SERIALIZE_T *serializeFunc, diaElem **controls,
+							 unsigned int controlCount)
 {
-	return new ADM_Qt4Factory::diaElemConfigMenu(userConfigDir, systemConfigDir, changedFunc, serializeFunc, controls, controlCount);
+	return new ADM_Qt4Factory::diaElemConfigMenu(configName, configType, userConfigDir, systemConfigDir, changedFunc, 
+		serializeFunc, controls, controlCount);
 }
 
 void qt4DestroyConfigMenu(diaElem *e)

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/T_configMenu.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/T_configMenu.h	2009-07-30 18:20:15 UTC (rev 5177)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/T_configMenu.h	2009-07-30 18:38:30 UTC (rev 5178)
@@ -21,7 +21,7 @@
 		CONFIG_MENU_CHANGED_T *changedFunc;
 		CONFIG_MENU_SERIALIZE_T *serializeFunc;
 
-		bool selectConfiguration(QString *selectFile, ConfigMenuType configurationType);
+		void fillConfigurationComboBox(void);
 
 	public slots:
 		void deleteClicked(bool checked);
@@ -40,11 +40,13 @@
 		QPushButton *saveAsButton;
 		QPushButton *deleteButton;
 
-		ADM_QconfigMenu(QWidget *widget, QGridLayout *layout, int line,
-			const char* userConfigDir, const char* systemConfigDir, CONFIG_MENU_CHANGED_T *changedFunc,
+		ADM_QconfigMenu(QWidget *widget, QGridLayout *layout, int line,	const char* userConfigDir,
+			const char* systemConfigDir, CONFIG_MENU_CHANGED_T *changedFunc,
 			CONFIG_MENU_SERIALIZE_T *serializeFunc, diaElem **controls, unsigned int controlCount);
 		~ADM_QconfigMenu();
-		void fillConfigurationComboBox(void);
+
+		void getConfiguration(char *configName, ConfigMenuType *configType);
+		bool selectConfiguration(QString *selectFile, ConfigMenuType configurationType);
 	};
 }
 #endif	// T_configMenu_h

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/T_dialogFactory.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/T_dialogFactory.cpp	2009-07-30 18:20:15 UTC (rev 5177)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/T_dialogFactory.cpp	2009-07-30 18:38:30 UTC (rev 5178)
@@ -51,8 +51,11 @@
 
   addControls(&dialog, vboxLayout, elems, nb);
 
+  for(int i = 0; i < nb; i++)
+	  elems[i]->finalize(); 
+
   // Add buttons
-   buttonBox->setStandardButtons(QDialogButtonBox::Ok | QDialogButtonBox::Cancel);
+  buttonBox->setStandardButtons(QDialogButtonBox::Ok | QDialogButtonBox::Cancel);
 
    QObject::connect(buttonBox, SIGNAL(accepted()), &dialog, SLOT(accept()));
    QObject::connect(buttonBox, SIGNAL(rejected()), &dialog, SLOT(reject()));
@@ -123,6 +126,9 @@
      {
         ADM_assert(tabControls[i]);
         insertTab(i,tabControls[i],wtabs);
+
+		for(int j = 0; j < tabControls[i]->nbElems; j++)
+			tabControls[i]->dias[j]->finalize(); 
       }
 
 	 for (int i = 0; i < headerControlCount; i++)
@@ -208,9 +214,6 @@
 
 	if (layout)
 		vboxLayout->addLayout(layout);
-
-	for(int i = 0; i < controlCount; i++)
-		controls[i]->finalize(); 
 }
 
 void insertTab(uint32_t index, diaElemTabs *tab, QTabWidget *wtab)

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/include/DIA_factory.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/include/DIA_factory.h	2009-07-30 18:20:15 UTC (rev 5177)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/include/DIA_factory.h	2009-07-30 18:38:30 UTC (rev 5178)
@@ -660,12 +660,16 @@
 
 typedef char *(CONFIG_MENU_SERIALIZE_T)(void);
 typedef bool (CONFIG_MENU_CHANGED_T)(const char* configName, ConfigMenuType configType);
-typedef diaElem *(CREATE_CONFIG_MENU_T)(const char* userConfigDir, const char* systemConfigDir,	CONFIG_MENU_CHANGED_T *changedFunc, 
-										CONFIG_MENU_SERIALIZE_T *serializeFunc, diaElem **controls, unsigned int controlCount);
+typedef diaElem *(CREATE_CONFIG_MENU_T)(char *configName, ConfigMenuType *configType, const char* userConfigDir, const char* systemConfigDir,
+										CONFIG_MENU_CHANGED_T *changedFunc, CONFIG_MENU_SERIALIZE_T *serializeFunc, diaElem **controls, 
+										unsigned int controlCount);
 
 class diaElemConfigMenu : public diaElem
 {
 protected:
+	char *configName;
+	ConfigMenuType *configType;
+
 	const char *userConfigDir, *systemConfigDir;
 	diaElem **controls;
 	unsigned int controlCount;
@@ -674,8 +678,8 @@
 	CONFIG_MENU_SERIALIZE_T *serializeFunc;
 
 public:
-	diaElemConfigMenu(const char* userConfigDir, const char* systemConfigDir, CONFIG_MENU_CHANGED_T *changedFunc,
-			CONFIG_MENU_SERIALIZE_T *serializeFunc, diaElem **controls, unsigned int controlCount);
+	diaElemConfigMenu(char *configName, ConfigMenuType *configType, const char* userConfigDir, const char* systemConfigDir,
+		CONFIG_MENU_CHANGED_T *changedFunc,	CONFIG_MENU_SERIALIZE_T *serializeFunc, diaElem **controls, unsigned int controlCount);
 	~diaElemConfigMenu();
 	void setMe(void *dialog, void *opaque, uint32_t line);
 	void getMe(void);

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/src/DIA_factory.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/src/DIA_factory.cpp	2009-07-30 18:20:15 UTC (rev 5177)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/src/DIA_factory.cpp	2009-07-30 18:38:30 UTC (rev 5178)
@@ -560,11 +560,13 @@
 }
 DIA_MKSTUBS(diaElemSlider)
 // ****************** diaElemConfigMenu ********************
-diaElemConfigMenu::diaElemConfigMenu(const char* userConfigDir, const char* systemConfigDir, CONFIG_MENU_CHANGED_T *changedFunc, 
-									 CONFIG_MENU_SERIALIZE_T *serializeFunc, diaElem **controls, unsigned int controlCount) : diaElem(ELEM_CONFIG_MENU)
+diaElemConfigMenu::diaElemConfigMenu(char *configName, ConfigMenuType *configType, const char* userConfigDir, const char* systemConfigDir,
+									 CONFIG_MENU_CHANGED_T *changedFunc, CONFIG_MENU_SERIALIZE_T *serializeFunc, diaElem **controls,
+									 unsigned int controlCount) : diaElem(ELEM_CONFIG_MENU)
 {
 	ADM_assert(Factory);
-	internalPointer = Factory->CreateConfigMenu(userConfigDir, systemConfigDir, changedFunc, serializeFunc, controls, controlCount);
+	internalPointer = Factory->CreateConfigMenu(configName, configType, userConfigDir, systemConfigDir, changedFunc, 
+		serializeFunc, controls, controlCount);
 }
 
 diaElemConfigMenu::~diaElemConfigMenu()

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/mpeg1Encoder.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/mpeg1Encoder.cpp	2009-07-30 18:20:15 UTC (rev 5177)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/mpeg1Encoder.cpp	2009-07-30 18:38:30 UTC (rev 5178)
@@ -16,7 +16,6 @@
 #include <libxml/tree.h>
 #include "ADM_inttype.h"
 #include "mpeg1Encoder.h"
-#include "DIA_factory.h"
 
 extern int _uiType;
 static bool changedConfig(const char* fileName, ConfigMenuType configType);
@@ -114,7 +113,8 @@
 	diaElemMenu ctlInterW(&_interlaced, "_Interlacing:", 3, interM);
 	diaElem *elmGeneral[9]= {&ctlBitrate, &ctlMinb, &ctlMaxb, &ctlXvid, &ctlVbv, &ctlWidescreen, &ctlInterW, &ctlMatrix, &ctlGop};
 
-	diaElemConfigMenu ctlConfigMenu(_options.getUserConfigDirectory(), _options.getSystemConfigDirectory(), changedConfig, serializeConfig, elmGeneral, 9);
+	diaElemConfigMenu ctlConfigMenu(configName, &configType, _options.getUserConfigDirectory(), _options.getSystemConfigDirectory(),
+		changedConfig, serializeConfig, elmGeneral, 9);
 	diaElem *elmHeader[1] = {&ctlConfigMenu};
 
 	diaElemTabs tabGeneral("User Interface", 9, elmGeneral);
@@ -132,20 +132,35 @@
 
 void Mpeg1Encoder::loadSettings(vidEncOptions *encodeOptions, Mpeg1EncoderOptions *options)
 {
-	_minBitrate = options->getMinBitrate();
-	_maxBitrate = options->getMaxBitrate();
-	_useXvidRateControl = options->getXvidRateControl();
-	_bufferSize = options->getBufferSize();
-	_widescreen = options->getWidescreen();
-	_interlaced = options->getInterlaced();
-	_userMatrix = options->getMatrix();
-	_gopSize = options->getGopSize();
+	char *configurationName;
 
-	updateEncodeProperties(encodeOptions, NULL);
+	options->getPresetConfiguration(&configurationName, (PluginConfigType*)&configType);
+
+	if (configurationName)
+	{
+		strcpy(this->configName, configurationName);
+		delete [] configurationName;
+	}
+
+	if (configType != CONFIG_MENU_CUSTOM)
+	{
+		_minBitrate = options->getMinBitrate();
+		_maxBitrate = options->getMaxBitrate();
+		_useXvidRateControl = options->getXvidRateControl();
+		_bufferSize = options->getBufferSize();
+		_widescreen = options->getWidescreen();
+		_interlaced = options->getInterlaced();
+		_userMatrix = options->getMatrix();
+		_gopSize = options->getGopSize();
+
+		updateEncodeProperties(encodeOptions, NULL);
+	}
 }
 
 void Mpeg1Encoder::saveSettings(vidEncOptions *encodeOptions, Mpeg1EncoderOptions *options)
 {
+	options->setPresetConfiguration(&configName[0], (PluginConfigType)configType);
+
 	switch (_bitrateParam.mode)
 	{
 		case COMPRESS_CQ:
@@ -188,25 +203,31 @@
 
 		delete defaultEncodeOptions;
 	}
-	else if (configType != CONFIG_MENU_CUSTOM)
+	else
 	{
 		Mpeg1EncoderOptions options;
-		vidEncOptions *encodeOptions;
 
 		options.setPresetConfiguration(configName, (PluginConfigType)configType);
 
-		if (options.loadPresetConfiguration())
+		if (configType == CONFIG_MENU_CUSTOM)
+			encoder->loadSettings(NULL, &options);
+		else
 		{
-			encodeOptions = options.getEncodeOptions();
+			vidEncOptions *encodeOptions;
 
-			encoder->loadSettings(encodeOptions, &options);
+			if (options.loadPresetConfiguration())
+			{
+				encodeOptions = options.getEncodeOptions();
 
-			delete encodeOptions;
+				encoder->loadSettings(encodeOptions, &options);
+
+				delete encodeOptions;
+			}
+			else
+			{
+				failure = true;
+			}
 		}
-		else
-		{
-			failure = true;
-		}
 	}
 
 	return configType == CONFIG_MENU_CUSTOM | !failure;

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/mpeg1Encoder.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/mpeg1Encoder.h	2009-07-30 18:20:15 UTC (rev 5177)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/mpeg1Encoder.h	2009-07-30 18:38:30 UTC (rev 5178)
@@ -26,6 +26,7 @@
 #include "encoder.h"
 #include "mpeg1EncoderOptions.h"
 #include "../../ADM_encoder/ADM_vidEncode.hxx"
+#include "DIA_factory.h"
 
 class Mpeg1Encoder : public AvcodecEncoder
 {
@@ -33,6 +34,9 @@
 		COMPRES_PARAMS _bitrateParam;
 		unsigned int _minBitrate, _maxBitrate, _useXvidRateControl, _bufferSize, _widescreen, _interlaced, _userMatrix, _gopSize;
 
+		char configName[MAX_PATH];
+		ConfigMenuType configType;
+
 		Mpeg1EncoderOptions _options;
 		vidEncOptions _encodeOptions;
 



From gruntster at mail.berlios.de  Thu Jul 30 21:31:44 2009
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Thu, 30 Jul 2009 21:31:44 +0200
Subject: [Avidemux-svn-commit] r5179 -
	branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_GTK/src
Message-ID: <200907301931.n6UJViR6015712@sheep.berlios.de>

Author: gruntster
Date: 2009-07-30 21:31:39 +0200 (Thu, 30 Jul 2009)
New Revision: 5179

Modified:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_GTK/src/DIA_dialogFactory.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_GTK/src/FAC_configMenu.cpp
Log:
[dlgFactory] load/save profile on GTK config menu

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_GTK/src/DIA_dialogFactory.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_GTK/src/DIA_dialogFactory.cpp	2009-07-30 18:38:30 UTC (rev 5178)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_GTK/src/DIA_dialogFactory.cpp	2009-07-30 19:31:39 UTC (rev 5179)
@@ -83,6 +83,10 @@
   gtk_widget_show (vbox1);
   
   addControls(dialog, vbox1, elems, nb);
+
+  for(int i = 0; i < nb; i++)
+	  elems[i]->finalize(); 
+
   addButtonBox(dialog);
 
   // Show it & run
@@ -142,8 +146,13 @@
 	gtk_container_set_border_width(GTK_CONTAINER(notebook1), 6);
 
 	for (int i = 0; i < tabControlCount; i++)
+	{
 		buildOneTab(notebook1, i, tabControls[i]);
 
+		for(int j = 0; j < tabControls[i]->nbElems; j++)
+			tabControls[i]->dias[j]->finalize();
+	}
+
 	for (int i = 0; i < headerControlCount; i++)
 		headerControls[i]->finalize();
 
@@ -202,11 +211,6 @@
 			}
 		}
 	}
-
-	for(int i = 0; i < controlCount; i++)
-	{
-		controls[i]->finalize();
-	}
 }
 
 void addButtonBox(GtkWidget *dialog)

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_GTK/src/FAC_configMenu.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_GTK/src/FAC_configMenu.cpp	2009-07-30 18:38:30 UTC (rev 5178)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_GTK/src/FAC_configMenu.cpp	2009-07-30 19:31:39 UTC (rev 5179)
@@ -33,6 +33,7 @@
 	class diaElemConfigMenuData
 	{
 	public:
+		bool disableSignals;
 		GtkComboBox *combo;
 		GtkButton *deleteButton;
 
@@ -47,15 +48,16 @@
 		CONFIG_MENU_SERIALIZE_T *serializeFunc;
 	};
 
-	static map<string, int>* fillConfigurationComboBox(GtkComboBox *combo, const char* userConfigDir, const char* systemConfigDir)
+	static map<string, int>* fillConfigurationComboBox(diaElemConfigMenuData *menuData)
 	{
 #define MAX_CONFIG 100
 
 		uint32_t fileCount;
 		char *files[MAX_CONFIG];
 		map<string, int> *configs = new map<string, int>();
+		bool origDisableSignals = menuData->disableSignals;
 
-		buildDirectoryContent(&fileCount, userConfigDir, files, MAX_CONFIG, "xml");
+		buildDirectoryContent(&fileCount, menuData->userConfigDir, files, MAX_CONFIG, "xml");
 
 		for (int i = 0; i < fileCount; i++)
 		{
@@ -65,7 +67,7 @@
 			ADM_dealloc(files[i]);
 		}
 
-		buildDirectoryContent(&fileCount, systemConfigDir, files, MAX_CONFIG, "xml");
+		buildDirectoryContent(&fileCount, menuData->systemConfigDir, files, MAX_CONFIG, "xml");
 
 		for (int i = 0; i < fileCount; i++)
 		{
@@ -75,50 +77,53 @@
 			ADM_dealloc(files[i]);
 		}
 
-		GtkTreeModel* model = gtk_combo_box_get_model(combo);
+		GtkTreeModel* model = gtk_combo_box_get_model(menuData->combo);
 
 		gtk_list_store_clear(GTK_LIST_STORE(model));
-		gtk_combo_box_append_text(combo, QT_TR_NOOP("<default>"));
-		gtk_combo_box_append_text(combo, QT_TR_NOOP("<custom>"));
+		gtk_combo_box_append_text(menuData->combo, QT_TR_NOOP("<default>"));
+		gtk_combo_box_append_text(menuData->combo, QT_TR_NOOP("<custom>"));
 
 		for (map<string, int>::iterator it = configs->begin(); it != configs->end(); it++)
-			gtk_combo_box_append_text(combo, it->first.c_str());
+			gtk_combo_box_append_text(menuData->combo, it->first.c_str());
 
 		configs->insert(pair<string, ConfigMenuType>(string(QT_TR_NOOP("<default>")), CONFIG_MENU_DEFAULT));
 		configs->insert(pair<string, ConfigMenuType>(string(QT_TR_NOOP("<custom>")), CONFIG_MENU_CUSTOM));
 
-		gtk_combo_box_set_active(combo, 0);
+		gtk_combo_box_set_active(menuData->combo, 0);
 
+		menuData->disableSignals = origDisableSignals;
+
 		return configs;
 	}
 
-	static bool selectConfiguration(GtkComboBox *combo, map<string, int> *configs, const char *selectFile, ConfigMenuType configurationType)
+	static bool selectConfiguration(diaElemConfigMenuData *menuData, const char *selectFile, ConfigMenuType configurationType)
 	{
 		bool success = false;
+		bool origDisableSignals = menuData->disableSignals;
 
 		if (configurationType == CONFIG_MENU_DEFAULT)
 		{
-			gtk_combo_box_set_active(combo, 0);
+			gtk_combo_box_set_active(menuData->combo, 0);
 			success = true;
 		}
 		else
 		{
-			GtkTreeModel* model = gtk_combo_box_get_model(combo);
+			GtkTreeModel* model = gtk_combo_box_get_model(menuData->combo);
 			GtkTreeIter iter;
-			char *config;
+			const char *config;
 			int index = 0;
 
 			if (gtk_tree_model_get_iter_first(model, &iter) && selectFile)
 			{
 				do
 				{
-					map<string, int>::iterator it = configs->find(string(selectFile));
+					map<string, int>::iterator it = menuData->configs->find(string(selectFile));
 
 					gtk_tree_model_get(model, &iter, 0, &config, -1);
 
 					if (strcmp(config, selectFile) == 0 && it->second == configurationType)
 					{
-						gtk_combo_box_set_active(combo, index);
+						gtk_combo_box_set_active(menuData->combo, index);
 						success = true;
 						break;
 					}
@@ -129,9 +134,11 @@
 			}
 
 			if (!success)
-				gtk_combo_box_set_active(combo, 1);
+				gtk_combo_box_set_active(menuData->combo, 1);
 		}
 
+		menuData->disableSignals = origDisableSignals;
+
 		return success;
 	}
 
@@ -158,7 +165,7 @@
 				fclose(fd);
 
 				delete menuData->configs;
-				menuData->configs = fillConfigurationComboBox(menuData->combo, menuData->userConfigDir, menuData->systemConfigDir);
+				menuData->configs = fillConfigurationComboBox(menuData);
 
 				char* baseName = (char *)ADM_GetFileName(filename);
 				char *ext = strrchr(baseName, '.');
@@ -166,7 +173,7 @@
 				if (ext)
 					*ext = 0;
 
-				selectConfiguration(menuData->combo, menuData->configs, baseName, CONFIG_MENU_USER);
+				selectConfiguration(menuData, baseName, CONFIG_MENU_USER);
 
 				delete [] configData;
 			}
@@ -201,6 +208,7 @@
 	{
 		diaElemConfigMenuData *menuData = (diaElemConfigMenuData*)data;
 		const char* selectedConfig = gtk_combo_box_get_active_text(menuData->combo);
+		bool origDisableSignals = menuData->disableSignals;
 
 		if (selectedConfig)
 		{
@@ -217,11 +225,16 @@
 					menuData->controls[i]->updateMe();
 			}
 		}
+
+		menuData->disableSignals = origDisableSignals;
 	}
 
 	class diaElemConfigMenu : public diaElem
 	{
 	protected:
+		char *configName;
+		ConfigMenuType *configType;
+
 		const char *userConfigDir, *systemConfigDir;
 		diaElem **controls;
 		unsigned int controlCount;
@@ -245,6 +258,9 @@
 		const char* systemConfigDir, CONFIG_MENU_CHANGED_T *changedFunc, CONFIG_MENU_SERIALIZE_T *serializeFunc,
 		diaElem **controls, unsigned int controlCount) : diaElem(ELEM_CONFIG_MENU)
 	{
+		this->configName = configName;
+		this->configType = configType;
+
 		this->userConfigDir = userConfigDir;
 		this->systemConfigDir = systemConfigDir;
 
@@ -287,13 +303,14 @@
 
 		data->combo = combo;
 		data->deleteButton = button2;
-		data->configs = fillConfigurationComboBox(combo, this->userConfigDir, this->systemConfigDir);
 		data->controls = controls;
 		data->controlCount = controlCount;
 		data->userConfigDir = userConfigDir;
 		data->systemConfigDir = systemConfigDir;
 		data->changedFunc = changedFunc;
 		data->serializeFunc = serializeFunc;
+		data->disableSignals = false;
+		data->configs = fillConfigurationComboBox(data);
 
 		myWidget = (void*)data;
 
@@ -302,15 +319,30 @@
 		g_signal_connect(GTK_OBJECT(combo), "changed", G_CALLBACK(comboChanged), myWidget);
 	}
 
-	void diaElemConfigMenu::getMe(void)	{ }
+	void diaElemConfigMenu::getMe(void)
+	{
+		diaElemConfigMenuData *menuData = (diaElemConfigMenuData*)myWidget;
+		const char* selectedConfig = gtk_combo_box_get_active_text(menuData->combo);
+		map<string, int>::iterator it = menuData->configs->find(string((selectedConfig)));
+
+		strcpy(this->configName, selectedConfig);
+		*this->configType = (ConfigMenuType)it->second;
+	}
+
 	void diaElemConfigMenu::enable(uint32_t onoff) { }
 	int diaElemConfigMenu::getRequiredLayout(void) { return 0; }
-	void diaElemConfigMenu::updateMe(void) { }
 
-	void diaElemConfigMenu::finalize(void)
+	void diaElemConfigMenu::updateMe(void)
 	{
+		diaElemConfigMenuData *menuData = (diaElemConfigMenuData*)myWidget;
 
+		selectConfiguration(menuData, this->configName, *this->configType);
 	}
+
+	void diaElemConfigMenu::finalize(void)
+	{
+		this->updateMe();
+	}
 }
 
 diaElem* gtkCreateConfigMenu(char *configName, ConfigMenuType *configType, const char* userConfigDir, const char* systemConfigDir,



From gruntster at mail.berlios.de  Thu Jul 30 21:35:09 2009
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Thu, 30 Jul 2009 21:35:09 +0200
Subject: [Avidemux-svn-commit] r5180 -
	branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec
Message-ID: <200907301935.n6UJZ9au016031@sheep.berlios.de>

Author: gruntster
Date: 2009-07-30 21:35:02 +0200 (Thu, 30 Jul 2009)
New Revision: 5180

Modified:
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/mpeg1Encoder.h
Log:
[mpeg1] unix build fix

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/mpeg1Encoder.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/mpeg1Encoder.h	2009-07-30 19:31:39 UTC (rev 5179)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/mpeg1Encoder.h	2009-07-30 19:35:02 UTC (rev 5180)
@@ -23,6 +23,7 @@
 	#include "ADM_vidEnc_plugin.h"
 }
 
+#include <stdlib.h>
 #include "encoder.h"
 #include "mpeg1EncoderOptions.h"
 #include "../../ADM_encoder/ADM_vidEncode.hxx"



From gruntster at mail.berlios.de  Thu Jul 30 22:06:25 2009
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Thu, 30 Jul 2009 22:06:25 +0200
Subject: [Avidemux-svn-commit] r5181 -
	branches/avidemux_2.5_branch_gruntster/cmake
Message-ID: <200907302006.n6UK6PH7021046@sheep.berlios.de>

Author: gruntster
Date: 2009-07-30 22:06:21 +0200 (Thu, 30 Jul 2009)
New Revision: 5181

Modified:
   branches/avidemux_2.5_branch_gruntster/cmake/admWin32.rc.in
Log:
[win32] fix icon reference in resource file

Modified: branches/avidemux_2.5_branch_gruntster/cmake/admWin32.rc.in
===================================================================
--- branches/avidemux_2.5_branch_gruntster/cmake/admWin32.rc.in	2009-07-30 19:35:02 UTC (rev 5180)
+++ branches/avidemux_2.5_branch_gruntster/cmake/admWin32.rc.in	2009-07-30 20:06:21 UTC (rev 5181)
@@ -28,4 +28,4 @@
     END
 END
 
-100 ICON "${CMAKE_SOURCE_DIR}/avidemux/xpm/${AVIDEMUX_ICON}"
\ No newline at end of file
+100 ICON "${CMAKE_SOURCE_DIR}/avidemux/ADM_icons/xpm/${AVIDEMUX_ICON}"
\ No newline at end of file



From gruntster at mail.berlios.de  Thu Jul 30 23:41:19 2009
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Thu, 30 Jul 2009 23:41:19 +0200
Subject: [Avidemux-svn-commit] r5182 -
	branches/avidemux_2.5_branch_gruntster/platforms/windows/installer
Message-ID: <200907302141.n6ULfJUP031669@sheep.berlios.de>

Author: gruntster
Date: 2009-07-30 23:41:13 +0200 (Thu, 30 Jul 2009)
New Revision: 5182

Modified:
   branches/avidemux_2.5_branch_gruntster/platforms/windows/installer/avidemux.nsi
Log:
[win32] fix icon reference in installer script

Modified: branches/avidemux_2.5_branch_gruntster/platforms/windows/installer/avidemux.nsi
===================================================================
--- branches/avidemux_2.5_branch_gruntster/platforms/windows/installer/avidemux.nsi	2009-07-30 20:06:21 UTC (rev 5181)
+++ branches/avidemux_2.5_branch_gruntster/platforms/windows/installer/avidemux.nsi	2009-07-30 21:41:13 UTC (rev 5182)
@@ -71,9 +71,9 @@
 !define MUI_WELCOMEFINISHPAGE_BITMAP "${NSIDIR}\WelcomeFinishStrip.bmp"
 !define MUI_UNWELCOMEFINISHPAGE_BITMAP "${NSIDIR}\WelcomeFinishStrip.bmp"
 !ifdef INST_GTK
-!define MUI_UNICON "${NSIDIR}\..\..\..\avidemux\xpm\adm.ico"
+!define MUI_UNICON "${NSIDIR}\..\..\..\avidemux\ADM_icons\xpm\adm.ico"
 !else
-!define MUI_UNICON "${NSIDIR}\..\..\..\avidemux\xpm\avidemux.ico"
+!define MUI_UNICON "${NSIDIR}\..\..\..\avidemux\ADM_icons\xpm\avidemux.ico"
 !endif
 !define MUI_COMPONENTSPAGE_NODESC
 



From gruntster at mail.berlios.de  Thu Jul 30 23:41:44 2009
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Thu, 30 Jul 2009 23:41:44 +0200
Subject: [Avidemux-svn-commit] r5183 -
	branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec
Message-ID: <200907302141.n6ULfiB5031682@sheep.berlios.de>

Author: gruntster
Date: 2009-07-30 23:41:40 +0200 (Thu, 30 Jul 2009)
New Revision: 5183

Modified:
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/mpeg1Encoder.h
Log:
[mpeg1] another attempt at unix build fix

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/mpeg1Encoder.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/mpeg1Encoder.h	2009-07-30 21:41:13 UTC (rev 5182)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/mpeg1Encoder.h	2009-07-30 21:41:40 UTC (rev 5183)
@@ -23,7 +23,6 @@
 	#include "ADM_vidEnc_plugin.h"
 }
 
-#include <stdlib.h>
 #include "encoder.h"
 #include "mpeg1EncoderOptions.h"
 #include "../../ADM_encoder/ADM_vidEncode.hxx"
@@ -35,7 +34,7 @@
 		COMPRES_PARAMS _bitrateParam;
 		unsigned int _minBitrate, _maxBitrate, _useXvidRateControl, _bufferSize, _widescreen, _interlaced, _userMatrix, _gopSize;
 
-		char configName[MAX_PATH];
+		char configName[PATH_MAX];
 		ConfigMenuType configType;
 
 		Mpeg1EncoderOptions _options;



