<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Avidemux-svn-commit] r7172 - in branches/avidemux_2.6_branch_mean:	avidemux/common avidemux/common/ADM_audioFilter/src	avidemux/common/ADM_commonUI avidemux/common/ADM_editor	avidemux/common/ADM_script2/include/scriptDialogFactory	avidemux/common/ADM_script2/js avidemux/common/ADM_toolkit	avidemux/common/ADM_videoCodec/src avidemux/qt4/ADM_UIs/src	avidemux/qt4/ADM_userInterfaces/ADM_gui	avidemux_core/ADM_coreAudioDevice/src	avidemux_core/ADM_coreImage/include avidemux_core/ADM_coreImage/src	avidemux_core/ADM_coreJson/src	avidemux_core/ADM_coreUI/include avidemux_core/ADM_coreUI/src	avidemux_core/ADM_coreUtils/include avidemux_core/ADM_coreUtils/src	avidemux_core/ADM_coreVideoCodec/src
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/avidemux-svn-commit/2011-April/index.html" >
   <LINK REL="made" HREF="mailto:avidemux-svn-commit%40lists.berlios.de?Subject=Re%3A%20%5BAvidemux-svn-commit%5D%20r7172%20-%20in%20branches/avidemux_2.6_branch_mean%3A%0A%09avidemux/common%20avidemux/common/ADM_audioFilter/src%0A%09avidemux/common/ADM_commonUI%20avidemux/common/ADM_editor%0A%09avidemux/common/ADM_script2/include/scriptDialogFactory%0A%09avidemux/common/ADM_script2/js%20avidemux/common/ADM_toolkit%0A%09avidemux/common/ADM_videoCodec/src%20avidemux/qt4/ADM_UIs/src%0A%09avidemux/qt4/ADM_userInterfaces/ADM_gui%0A%09avidemux_core/ADM_coreAudioDevice/src%0A%09avidemux_core/ADM_coreImage/include%20avidemux_core/ADM_coreImage/src%0A%09avidemux_core/ADM_coreJson/src%0A%09avidemux_core/ADM_coreUI/include%20avidemux_core/ADM_coreUI/src%0A%09avidemux_core/ADM_coreUtils/include%20avidemux_core/ADM_coreUtils/src%0A%09avidemux_core/ADM_coreVideoCodec/src&In-Reply-To=%3C20110430191937.652E148137F%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="004327.html">
   <LINK REL="Next"  HREF="004329.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Avidemux-svn-commit] r7172 - in branches/avidemux_2.6_branch_mean:	avidemux/common avidemux/common/ADM_audioFilter/src	avidemux/common/ADM_commonUI avidemux/common/ADM_editor	avidemux/common/ADM_script2/include/scriptDialogFactory	avidemux/common/ADM_script2/js avidemux/common/ADM_toolkit	avidemux/common/ADM_videoCodec/src avidemux/qt4/ADM_UIs/src	avidemux/qt4/ADM_userInterfaces/ADM_gui	avidemux_core/ADM_coreAudioDevice/src	avidemux_core/ADM_coreImage/include avidemux_core/ADM_coreImage/src	avidemux_core/ADM_coreJson/src	avidemux_core/ADM_coreUI/include avidemux_core/ADM_coreUI/src	avidemux_core/ADM_coreUtils/include avidemux_core/ADM_coreUtils/src	avidemux_core/ADM_coreVideoCodec/src</H1>
    <B>mean at mail.berlios.de</B> 
    <A HREF="mailto:avidemux-svn-commit%40lists.berlios.de?Subject=Re%3A%20%5BAvidemux-svn-commit%5D%20r7172%20-%20in%20branches/avidemux_2.6_branch_mean%3A%0A%09avidemux/common%20avidemux/common/ADM_audioFilter/src%0A%09avidemux/common/ADM_commonUI%20avidemux/common/ADM_editor%0A%09avidemux/common/ADM_script2/include/scriptDialogFactory%0A%09avidemux/common/ADM_script2/js%20avidemux/common/ADM_toolkit%0A%09avidemux/common/ADM_videoCodec/src%20avidemux/qt4/ADM_UIs/src%0A%09avidemux/qt4/ADM_userInterfaces/ADM_gui%0A%09avidemux_core/ADM_coreAudioDevice/src%0A%09avidemux_core/ADM_coreImage/include%20avidemux_core/ADM_coreImage/src%0A%09avidemux_core/ADM_coreJson/src%0A%09avidemux_core/ADM_coreUI/include%20avidemux_core/ADM_coreUI/src%0A%09avidemux_core/ADM_coreUtils/include%20avidemux_core/ADM_coreUtils/src%0A%09avidemux_core/ADM_coreVideoCodec/src&In-Reply-To=%3C20110430191937.652E148137F%40sheep.berlios.de%3E"
       TITLE="[Avidemux-svn-commit] r7172 - in branches/avidemux_2.6_branch_mean:	avidemux/common avidemux/common/ADM_audioFilter/src	avidemux/common/ADM_commonUI avidemux/common/ADM_editor	avidemux/common/ADM_script2/include/scriptDialogFactory	avidemux/common/ADM_script2/js avidemux/common/ADM_toolkit	avidemux/common/ADM_videoCodec/src avidemux/qt4/ADM_UIs/src	avidemux/qt4/ADM_userInterfaces/ADM_gui	avidemux_core/ADM_coreAudioDevice/src	avidemux_core/ADM_coreImage/include avidemux_core/ADM_coreImage/src	avidemux_core/ADM_coreJson/src	avidemux_core/ADM_coreUI/include avidemux_core/ADM_coreUI/src	avidemux_core/ADM_coreUtils/include avidemux_core/ADM_coreUtils/src	avidemux_core/ADM_coreVideoCodec/src">mean at mail.berlios.de
       </A><BR>
    <I>Sat Apr 30 21:19:37 CEST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="004327.html">[Avidemux-svn-commit] r7171 -	branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/src
</A></li>
        <LI>Next message: <A HREF="004329.html">[Avidemux-svn-commit] r7173 -	branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/src
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4328">[ date ]</a>
              <a href="thread.html#4328">[ thread ]</a>
              <a href="subject.html#4328">[ subject ]</a>
              <a href="author.html#4328">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: mean
Date: 2011-04-30 21:19:37 +0200 (Sat, 30 Apr 2011)
New Revision: 7172

Modified:
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_audioFilter/src/audiofilter.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_commonUI/DIA_audioFilter.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_commonUI/DIA_postproc.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_commonUI/DIA_prefs.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edLoadSave.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edPySave.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edRender.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edit.hxx
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/include/scriptDialogFactory/ADM_scriptDFToggle.h
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/js/ADM_jsTestFactory.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_toolkit/automation.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoCodec/src/ADM_ffmpeg_vdpau.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/gtk_gui.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/main.cpp
   branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_UIs/src/T_toggle.cpp
   branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_gui/file_qt4.cpp
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreAudioDevice/src/ADM_audiodevice.cpp
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreImage/include/ADM_image.h
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreImage/src/ADM_colorspace.cpp
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreImage/src/ADM_image.cpp
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreJson/src/ADM_json.cpp
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUI/include/DIA_factory.h
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUI/src/DIA_factory.cpp
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/include/prefs.h
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/src/pref_gen.py
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/src/prefs.cpp
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/src/prefs2.conf
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/src/prefs2.h
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/src/prefs2_desc.cpp
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/src/prefs2_json.cpp
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/src/prefs2_pref.h
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoCodec/src/ADM_ffmp43.cpp
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoCodec/src/DIA_lavDecoder.cpp
Log:
[all] use bool as native type for prefs + diaFactory toggle, continue switching from pref1 to pref2, still incomplete

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_audioFilter/src/audiofilter.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_audioFilter/src/audiofilter.cpp	2011-04-30 19:19:31 UTC (rev 7171)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_audioFilter/src/audiofilter.cpp	2011-04-30 19:19:37 UTC (rev 7172)
@@ -45,7 +45,7 @@
     playback.startTimeInUs=startTime;
     playback.shiftInMs=shift;
     playback.mixerEnabled=true;
-    if(prefs-&gt;get(DOWNMIXING_PROLOGIC,&amp;downmix)!=RC_OK)
+    if(prefs-&gt;get(DEFAULT_DOWNMIXING,&amp;downmix)!=RC_OK)
     {
       downmix=0;
     }

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_commonUI/DIA_audioFilter.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_commonUI/DIA_audioFilter.cpp	2011-04-30 19:19:31 UTC (rev 7171)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_commonUI/DIA_audioFilter.cpp	2011-04-30 19:19:37 UTC (rev 7172)
@@ -65,7 +65,8 @@
      eGain.link(&amp;(menuGain[2]),1,&amp;eGainValue);
   //****************************
  diaElemMenu      eMixer(&amp;vChan,QT_TR_NOOP(&quot;_Mixer:&quot;),11,menuMixer);
- diaElemToggle    tMixer(PX(mixerEnabled),QT_TR_NOOP(&quot;Remix:&quot;));
+ bool bMixer=config-&gt;mixerEnabled;
+ diaElemToggle    tMixer(&amp;bMixer,QT_TR_NOOP(&quot;Remix:&quot;));
  tMixer.link(1,&amp;eMixer);
  /************************************/
  diaElem *elems[]={&amp;eFPS, &amp;tMixer,&amp;eMixer, &amp;eResample,&amp;eGain,&amp;eGainValue};
@@ -75,6 +76,7 @@
         config-&gt;film2pal=(FILMCONV)vFilm;
         config-&gt;gainParam.mode=(ADM_GAINMode)vGainMode;
         config-&gt;gainParam.gain10=vGainValue*10;
+        config-&gt;mixerEnabled=bMixer;
       return true;
     }
     

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_commonUI/DIA_postproc.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_commonUI/DIA_postproc.cpp	2011-04-30 19:19:31 UTC (rev 7171)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_commonUI/DIA_postproc.cpp	2011-04-30 19:19:37 UTC (rev 7172)
@@ -18,7 +18,7 @@
 
 #include &quot;DIA_factory.h&quot;
 
-int DIA_getMPParams( uint32_t *pplevel, uint32_t *ppstrength,uint32_t *swap)
+int DIA_getMPParams( uint32_t *pplevel, uint32_t *ppstrength,bool *swap)
 {
         
 
@@ -27,7 +27,7 @@
     diaElemUInteger   postProcStrength(PX(ppstrength),QT_TR_NOOP(&quot;_Filter strength:&quot;),0,5);
     diaElemToggle     swapuv(PX(swap),QT_TR_NOOP(&quot;_Swap U and V&quot;));
     
-    uint32_t hzd,vzd,dring;
+    bool hzd,vzd,dring;
     
 #define DOME(x,y) if(*pplevel &amp; x) y=1;else y=0;
     

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_commonUI/DIA_prefs.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_commonUI/DIA_prefs.cpp	2011-04-30 19:19:31 UTC (rev 7171)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_commonUI/DIA_prefs.cpp	2011-04-30 19:19:37 UTC (rev 7172)
@@ -41,38 +41,36 @@
 {
 uint32_t olddevice,newdevice;
 
-uint32_t        use_odml=0;
-uint32_t	autosplit=0;
+bool     use_odml=0;
+uint32_t autosplit=0;
 uint32_t render;
-uint32_t useTray=0;
-uint32_t useMaster=0;
+bool     useTray=0;
 
-uint32_t useSwap=0;
 
+bool     useSwap=0;
+
 uint32_t lavcThreads=0;
 uint32_t encodePriority=2;
 uint32_t indexPriority=2;
 uint32_t playbackPriority=0;
 uint32_t downmix;
-uint32_t mpeg_no_limit=0;
+bool     mpeg_no_limit=0;
 uint32_t msglevel=2;
 
 uint32_t mixer=0;
-char     *filterPath=NULL;
+
 char     *alsaDevice=NULL;
 
+bool     balternate_mp3_tag=true;
 
-
-uint32_t alternate_mp3_tag=1;
 uint32_t pp_type=3;
 uint32_t pp_value=5;
-uint32_t vdpau=0;
-uint32_t hzd,vzd,dring;
-uint32_t capsMMX,capsMMXEXT,caps3DNOW,caps3DNOWEXT,capsSSE,capsSSE2,capsSSE3,capsSSSE3,capsAll;
 
-uint32_t useGlobalGlyph=0;
-char     *globalGlyphName=NULL;
+bool     bvdpau=false;
+bool     hzd,vzd,dring;
+bool     capsMMX,capsMMXEXT,caps3DNOW,caps3DNOWEXT,capsSSE,capsSSE2,capsSSE3,capsSSSE3,capsAll;
 
+
 	olddevice=newdevice=AVDM_getCurrentDevice();
 
         // Default pp
@@ -103,28 +101,24 @@
                 alsaDevice = ADM_strdup(&quot;plughw:0,0&quot;);
 #endif
         // vdpau
-        prefs-&gt;get(FEATURE_VDPAU,&amp;vdpau);
-        // Global glyph
-        prefs-&gt;get(FEATURE_GLOBAL_GLYPH_ACTIVE,&amp;useGlobalGlyph);
-        prefs-&gt;get(FEATURE_GLOBAL_GLYPH_NAME,&amp;globalGlyphName);
-
+        prefs-&gt;get(FEATURES_VDPAU,&amp;bvdpau);
         
         // Alternate mp3 tag (haali)
-        prefs-&gt;get(FEATURE_ALTERNATE_MP3_TAG,&amp;alternate_mp3_tag);
+        prefs-&gt;get(FEATURES_ALTERNATE_MP3_TAG,&amp;balternate_mp3_tag);
         
         // Video renderer
-        if(prefs-&gt;get(DEVICE_VIDEODEVICE,&amp;render)!=RC_OK)
+        if(prefs-&gt;get(VIDEODEVICE,&amp;render)!=RC_OK)
         {       
                 render=(uint32_t)RENDER_GTK;
         }
         // SysTray
-        if(!prefs-&gt;get(FEATURE_USE_SYSTRAY,&amp;useTray)) 
+        if(!prefs-&gt;get(FEATURES_USE_SYSTRAY,&amp;useTray)) 
                 useTray=0;
         // Accept mpeg for DVD when fq!=48 kHz
-        if(!prefs-&gt;get(FEATURE_MPEG_NO_LIMIT,&amp;mpeg_no_limit)) mpeg_no_limit=0;
+        if(!prefs-&gt;get(FEATURES_MPEG_NO_LIMIT,&amp;mpeg_no_limit)) mpeg_no_limit=0;
 
         // Multithreads
-        prefs-&gt;get(FEATURE_THREADING_LAVC, &amp;lavcThreads);
+        prefs-&gt;get(FEATURES_THREADING_LAVC, &amp;lavcThreads);
 
 
 		// Encoding priority
@@ -138,32 +132,32 @@
                 playbackPriority=0;
 
         // VCD/SVCD split point		
-        if(!prefs-&gt;get(SETTINGS_MPEGSPLIT, &amp;autosplit))
+        if(!prefs-&gt;get(MPEGSPLIT_AUTOSPLIT, &amp;autosplit))
                 autosplit=690;		
                         
         // Open DML (Gmv)
-        if(!prefs-&gt;get(FEATURE_USE_ODML, &amp;use_odml))
+        if(!prefs-&gt;get(FEATURES_USE_ODML, &amp;use_odml))
           use_odml=0;
 #if defined(ALSA_SUPPORT) || defined (OSS_SUPPORT)
 		// Master or PCM for audio
-        if(!prefs-&gt;get(FEATURE_AUDIOBAR_USES_MASTER, &amp;useMaster))
+        if(!prefs-&gt;get(FEATURES_AUDIOBAR_USES_MASTER, &amp;useMaster))
                 useMaster=0;
 #endif
 
         // SWAP A&amp;B if A&gt;B
-        if(!prefs-&gt;get(FEATURE_SWAP_IF_A_GREATER_THAN_B, &amp;useSwap))
+        if(!prefs-&gt;get(FEATURES_SWAP_IF_A_GREATER_THAN_B, &amp;useSwap))
                 useSwap=0;
         // Get level of message verbosity
         prefs-&gt;get(MESSAGE_LEVEL,&amp;msglevel);
         // Downmix default
-        if(prefs-&gt;get(DOWNMIXING_PROLOGIC,&amp;downmix)!=RC_OK)
+        if(prefs-&gt;get(DEFAULT_DOWNMIXING,&amp;downmix)!=RC_OK)
         {       
             downmix=0;
         }
         olddevice=newdevice=AVDM_getCurrentDevice();
         // Audio device
         /************************ Build diaelems ****************************************/
-        diaElemToggle useVdpau(&amp;vdpau,QT_TR_NOOP(&quot;_Use VDPAU for decoding H264&quot;));
+        diaElemToggle useVdpau(&amp;bvdpau,QT_TR_NOOP(&quot;_Use VDPAU for decoding H264&quot;));
         diaElemToggle useSysTray(&amp;useTray,QT_TR_NOOP(&quot;_Use systray while encoding&quot;));
         diaElemToggle allowAnyMpeg(&amp;mpeg_no_limit,QT_TR_NOOP(&quot;_Accept non-standard audio frequency for DVD&quot;));
         diaElemToggle openDml(&amp;use_odml,QT_TR_NOOP(&quot;Create _OpenDML files&quot;));
@@ -224,7 +218,7 @@
 
         diaElemUInteger autoSplit(&amp;autosplit,QT_TR_NOOP(&quot;_Split MPEG files every (MB):&quot;),10,4096);
         
-        diaElemToggle   togTagMp3(&amp;alternate_mp3_tag,QT_TR_NOOP(&quot;_Use alternative tag for MP3 in .mp4&quot;));
+        diaElemToggle   togTagMp3(&amp;balternate_mp3_tag,QT_TR_NOOP(&quot;_Use alternative tag for MP3 in .mp4&quot;));
         
         diaMenuEntry videoMode[]={
                              {RENDER_GTK,      QT_TR_NOOP(&quot;GTK+ (slow)&quot;),NULL}
@@ -301,18 +295,7 @@
      framePP.swallow(&amp;fdring);
      framePP.swallow(&amp;postProcStrength);
      
-        // Filter path
-        if( prefs-&gt;get(FILTERS_AUTOLOAD_PATH, &amp;filterPath) != RC_OK )
-#ifndef __WIN32
-               filterPath = ADM_strdup(&quot;/tmp&quot;);
-#else
-               filterPath = ADM_strdup(&quot;c:\\&quot;);
-#endif
 
-		diaElemToggle togGlobalGlyph(&amp;useGlobalGlyph, QT_TR_NOOP(&quot;Use _Global GlyphSet&quot;));
-		diaElemFile  entryGLyphPath(0,&amp;globalGlyphName,QT_TR_NOOP(&quot;Gl_yphSet:&quot;), NULL, QT_TR_NOOP(&quot;Select GlyphSet file&quot;));
-		togGlobalGlyph.link(1, &amp;entryGLyphPath);
-
         /* User Interface */
         diaElem *diaUser[]={&amp;useSysTray,&amp;menuMessage};
         diaElemTabs tabUser(QT_TR_NOOP(&quot;User Interface&quot;),2,diaUser);
@@ -353,13 +336,11 @@
 		diaElemTabs tabThreading(QT_TR_NOOP(&quot;Threading&quot;),2,(diaElem **)diaThreading);
 
         /* Global Glyph tab */
-        diaElem *diaGlyph[]={&amp;togGlobalGlyph,&amp;entryGLyphPath};
-        diaElemTabs tabGlyph(QT_TR_NOOP(&quot;Global GlyphSet&quot;),2,(diaElem **)diaGlyph);
 
                                     
 // SET
-        diaElemTabs *tabs[]={&amp;tabUser,&amp;tabOutput,&amp;tabAudio,&amp;tabVideo,&amp;tabCpu,&amp;tabThreading,&amp;tabGlyph};
-        if( diaFactoryRunTabs(QT_TR_NOOP(&quot;Preferences&quot;),7,tabs))
+        diaElemTabs *tabs[]={&amp;tabUser,&amp;tabOutput,&amp;tabAudio,&amp;tabVideo,&amp;tabCpu,&amp;tabThreading};
+        if( diaFactoryRunTabs(QT_TR_NOOP(&quot;Preferences&quot;),6,tabs))
 	{
         	
         	// cpu caps
@@ -380,12 +361,8 @@
         	    	CPU_CAPS(SSE3);
         	    	CPU_CAPS(SSSE3);
         		}
-        		prefs-&gt;set(FEATURE_CPU_CAPS,CpuCaps::myCpuMask);
+        		prefs-&gt;set(FEATURES_CPU_CAPS,CpuCaps::myCpuMask);
 
-        		// Glyphs
-               prefs-&gt;set(FEATURE_GLOBAL_GLYPH_ACTIVE,useGlobalGlyph);
-               prefs-&gt;set(FEATURE_GLOBAL_GLYPH_NAME,globalGlyphName);
-
                 // Postproc
                 #undef DOME
                 #define DOME(x,y) if(y) pp_type |=x;
@@ -414,22 +391,22 @@
                       AVDM_audioInit();                     // Respawn
                 }
                 // Downmixing (default)
-                prefs-&gt;set(DOWNMIXING_PROLOGIC,downmix);
+                prefs-&gt;set(DEFAULT_DOWNMIXING,downmix);
 #if defined(ALSA_SUPPORT) || defined (OSS_SUPPORT)
                 // Master or PCM
-                prefs-&gt;set(FEATURE_AUDIOBAR_USES_MASTER, useMaster);
+                prefs-&gt;set(FEATURES_AUDIOBAR_USES_MASTER, useMaster);
 #endif
                 // allow non std audio fq for dvd
-                prefs-&gt;set(FEATURE_MPEG_NO_LIMIT, mpeg_no_limit);
+                prefs-&gt;set(FEATURES_MPEG_NO_LIMIT, mpeg_no_limit);
                 // Video render
-                prefs-&gt;set(DEVICE_VIDEODEVICE,render);
+                prefs-&gt;set(VIDEODEVICE,render);
                 // Odml
-                prefs-&gt;set(FEATURE_USE_ODML, use_odml);
+                prefs-&gt;set(FEATURES_USE_ODML, use_odml);
 				// Split
-                prefs-&gt;set(SETTINGS_MPEGSPLIT, autosplit);
+                prefs-&gt;set(MPEGSPLIT_AUTOSPLIT, autosplit);
                 
                 // number of threads
-                prefs-&gt;set(FEATURE_THREADING_LAVC, lavcThreads);
+                prefs-&gt;set(FEATURES_THREADING_LAVC, lavcThreads);
 
 				// Encoding priority
 				prefs-&gt;set(PRIORITY_ENCODING, encodePriority);
@@ -439,18 +416,16 @@
 				prefs-&gt;set(PRIORITY_PLAYBACK, playbackPriority);
 
                 // Auto swap A/B
-                prefs-&gt;set(FEATURE_SWAP_IF_A_GREATER_THAN_B, useSwap);
+                prefs-&gt;set(FEATURES_SWAP_IF_A_GREATER_THAN_B, useSwap);
                 //
                 prefs-&gt;set(MESSAGE_LEVEL,msglevel);
                 // Use tray while encoding
-                prefs-&gt;set(FEATURE_USE_SYSTRAY,useTray);
+                prefs-&gt;set(FEATURES_USE_SYSTRAY,useTray);
 
                 // VDPAU
-                prefs-&gt;set(FEATURE_VDPAU,vdpau);
-                if(filterPath)
-                  prefs-&gt;set(FILTERS_AUTOLOAD_PATH, filterPath);
+                prefs-&gt;set(FEATURES_VDPAU,bvdpau);
                 // Alternate mp3 tag (haali)
-                prefs-&gt;set(FEATURE_ALTERNATE_MP3_TAG,alternate_mp3_tag);
+                prefs-&gt;set(FEATURES_ALTERNATE_MP3_TAG,balternate_mp3_tag);
 
 			#if defined(__WIN32) &amp;&amp; defined(USE_SDL)
 				// Initialise SDL again as driver may have changed
@@ -464,15 +439,16 @@
             delete audioDeviceItems[i];
         }
         delete [] audioDeviceItems;
-	ADM_dealloc(filterPath);
-	ADM_dealloc(globalGlyphName);
 
+
+
 	return 1;
 }
-extern int DIA_getMPParams( uint32_t *pplevel, uint32_t *ppstrength,uint32_t *swap);
+extern int DIA_getMPParams( uint32_t *pplevel, uint32_t *ppstrength,bool *swap);
 void setpp(void)
 {
-        uint32_t type,strength,uv=0;
+        uint32_t type,strength;
+        bool uv=0;
 
         if(!prefs-&gt;get(DEFAULT_POSTPROC_TYPE,&amp;type)) type=3;
         if(!prefs-&gt;get(DEFAULT_POSTPROC_VALUE,&amp;strength)) strength=3;

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edLoadSave.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edLoadSave.cpp	2011-04-30 19:19:31 UTC (rev 7171)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edLoadSave.cpp	2011-04-30 19:19:37 UTC (rev 7172)
@@ -123,7 +123,8 @@
 // postproc
 //___________________________
 
-uint32_t pptype, ppstrength,ppswap;
+uint32_t pptype, ppstrength;
+bool ppswap;
         video_body-&gt;getPostProc( &amp;pptype, &amp;ppstrength, &amp;ppswap);
         qfprintf(fd,&quot;\n//** Postproc **\n&quot;);
         qfprintf(fd,&quot;adm.setPostProc(%d,%d,%d);\n&quot;,pptype,ppstrength,ppswap);

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edPySave.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edPySave.cpp	2011-04-30 19:19:31 UTC (rev 7171)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edPySave.cpp	2011-04-30 19:19:37 UTC (rev 7172)
@@ -132,7 +132,8 @@
 // postproc
 //___________________________
 
-uint32_t pptype, ppstrength,ppswap;
+uint32_t pptype, ppstrength;
+bool ppswap;
         video_body-&gt;getPostProc( &amp;pptype, &amp;ppstrength, &amp;ppswap);
         qfprintf(fd,&quot;\n#** Postproc **\n&quot;);
         qfprintf(fd,&quot;adm.setPostProc(%d,%d,%d)\n&quot;,pptype,ppstrength,ppswap);

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edRender.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edRender.cpp	2011-04-30 19:19:31 UTC (rev 7171)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edRender.cpp	2011-04-30 19:19:37 UTC (rev 7172)
@@ -514,7 +514,7 @@
 /**
     \fn setPostProc
 */
-uint8_t ADM_Composer::setPostProc( uint32_t type, uint32_t strength, uint32_t swapuv)
+uint8_t ADM_Composer::setPostProc( uint32_t type, uint32_t strength, bool swapuv)
 {
 	if(!_segments.getNbRefVideos()) return 0;
     if(!_pp) return false;
@@ -528,7 +528,7 @@
     \fn getPostProc
 */
 
-uint8_t ADM_Composer::getPostProc( uint32_t *type, uint32_t *strength, uint32_t *swapuv)
+uint8_t ADM_Composer::getPostProc( uint32_t *type, uint32_t *strength, bool *swapuv)
 {
 	if(!_segments.getNbRefVideos()) return 0;
     if(!_pp) return false;

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edit.hxx
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edit.hxx	2011-04-30 19:19:31 UTC (rev 7171)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edit.hxx	2011-04-30 19:19:37 UTC (rev 7172)
@@ -214,8 +214,8 @@
                                         /// Returns pts-dts for given frame
                     bool		        getPtsDtsDelta(uint64_t *frameTime);
 /******************************* Post Processing ************************************/
-                    uint8_t             setPostProc( uint32_t type, uint32_t strength,	uint32_t swapuv);
-                    uint8_t             getPostProc( uint32_t *type, uint32_t *strength,uint32_t *swapuv);
+                    uint8_t             setPostProc( uint32_t type, uint32_t strength,	bool swapuv);
+                    uint8_t             getPostProc( uint32_t *type, uint32_t *strength,bool  *swapuv);
 /******************************* /Post Processing ************************************/	
 /******************************* Editing ************************************/	
                     bool                remove(uint64_t start,uint64_t end);

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/include/scriptDialogFactory/ADM_scriptDFToggle.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/include/scriptDialogFactory/ADM_scriptDFToggle.h	2011-04-30 19:19:31 UTC (rev 7171)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/include/scriptDialogFactory/ADM_scriptDFToggle.h	2011-04-30 19:19:37 UTC (rev 7172)
@@ -26,7 +26,7 @@
 {
 private:
 	char                *_title;
-	uint32_t            _value;
+	bool                 _value;
 
 public:
                      ADM_scriptDFToggleHelper(const char *title);

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/js/ADM_jsTestFactory.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/js/ADM_jsTestFactory.cpp	2011-04-30 19:19:31 UTC (rev 7171)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/js/ADM_jsTestFactory.cpp	2011-04-30 19:19:37 UTC (rev 7172)
@@ -62,7 +62,7 @@
 */
 int jsTestFacToggle(void)
 {
-  uint32_t tog=0;
+  bool tog=0;
   uint32_t test=0;
    diaElemToggle blend(&amp;tog,QT_TR_NOOP(&quot;Toggle&quot;));
     diaElemUInteger     bt(&amp;test,&quot;Entry&quot;,0,10);

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_toolkit/automation.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_toolkit/automation.cpp	2011-04-30 19:19:31 UTC (rev 7171)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_toolkit/automation.cpp	2011-04-30 19:19:37 UTC (rev 7172)
@@ -88,7 +88,7 @@
 //static void call_v2v(char *a,char *b,char *c);
 static void call_probePat(char *p);
 static void save(char*name);
-static void set_autoindex(char *p);
+
 //extern uint8_t A_setContainer(const char *cont);
 
 static int call_bframe(void);
@@ -158,7 +158,7 @@
         {&quot;reuse-2pass-log&quot;,	0	,&quot;reuse 2pass logfile if it exists&quot;,	(one_arg_type)set_reuse_2pass_log},
         {&quot;autosplit&quot;,		1	,&quot;split every N MBytes&quot;,(one_arg_type)call_autosplit},
         {&quot;info&quot;,		0	,&quot;show information about loaded video and audio streams&quot;, (one_arg_type)show_info},
-        {&quot;autoindex&quot;,		0	,&quot;try to generate required index files&quot;, (one_arg_type)set_autoindex},
+        
 
         {&quot;output-format&quot;,	1	,&quot;set output format (AVI|OGM|ES|PS|AVI_DUAL|AVI_UNP|...)&quot;, (one_arg_type )set_output_format},
         {&quot;rebuild-index&quot;,       0       ,&quot;rebuild index with correct frame type&quot;, (one_arg_type)A_rebuildKeyFrame},
@@ -454,10 +454,6 @@
 }
 
 
-void set_autoindex(char *p){
-	UNUSED_ARG(p);
-	prefs-&gt;set(FEATURE_TRYAUTOIDX,(unsigned int)1);
-}
 
 void show_info(char *p){
    UNUSED_ARG(p);
@@ -646,6 +642,6 @@
 }
 
 void set_reuse_2pass_log(char *p){
-   prefs-&gt;set(FEATURE_REUSE_2PASS_LOG,1);
+   prefs-&gt;set(FEATURES_REUSE_2PASS_LOG,true);
 }
 //EOF

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoCodec/src/ADM_ffmpeg_vdpau.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoCodec/src/ADM_ffmpeg_vdpau.cpp	2011-04-30 19:19:31 UTC (rev 7171)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoCodec/src/ADM_ffmpeg_vdpau.cpp	2011-04-30 19:19:37 UTC (rev 7172)
@@ -60,9 +60,9 @@
 */
 bool vdpauUsable(void)
 {
-    uint32_t v=false;
+    bool v=false;
     if(!vdpauWorking) return false;
-    if(!prefs-&gt;get(FEATURE_VDPAU,&amp;v)) v=false;
+    if(!prefs-&gt;get(FEATURES_VDPAU,&amp;v)) v=false;
     return v;
 }
 /**

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/gtk_gui.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/gtk_gui.cpp	2011-04-30 19:19:31 UTC (rev 7171)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/gtk_gui.cpp	2011-04-30 19:19:37 UTC (rev 7172)
@@ -231,8 +231,8 @@
         prefs-&gt;save ();
         return;
     case ACT_EXIT:
-      { uint32_t saveprefsonexit;
-         prefs-&gt;get(FEATURE_SAVEPREFSONEXIT,&amp;saveprefsonexit);
+      { bool saveprefsonexit;
+         prefs-&gt;get(FEATURES_SAVEPREFSONEXIT,&amp;saveprefsonexit);
          if( saveprefsonexit )
             prefs-&gt;save ();
       }
@@ -353,7 +353,7 @@
       uint32_t swapit=0;
       uint64_t markA,markB;
       uint64_t pts=admPreview::getCurrentPts();
-      if( prefs-&gt;get(FEATURE_SWAP_IF_A_GREATER_THAN_B, &amp;swapit) != RC_OK )     swapit = 1;
+      if( prefs-&gt;get(FEATURES_SWAP_IF_A_GREATER_THAN_B, &amp;swapit) != RC_OK )     swapit = 1;
 
       markA=video_body-&gt;getMarkerAPts();
       markB=video_body-&gt;getMarkerBPts();
@@ -832,13 +832,14 @@
 
 
 }
-extern int DIA_getMPParams( uint32_t *pplevel, uint32_t *ppstrength,uint32_t *swap);
+extern int DIA_getMPParams( uint32_t *pplevel, uint32_t *ppstrength,bool *swap);
 //
 
 //
 void	A_setPostproc( void )
 {
-uint32_t type,strength,swap;
+uint32_t type,strength;
+bool swap;
 	if(!avifileinfo) return;
 
 	video_body-&gt;getPostProc(&amp;type,&amp;strength,&amp;swap);
@@ -1144,7 +1145,7 @@
         }
 #endif
 
-        if(prefs-&gt;get(DEVICE_VIDEODEVICE,&amp;renderI)!=RC_OK)
+        if(prefs-&gt;get(VIDEODEVICE,&amp;renderI)!=RC_OK)
         {
                 render=RENDER_GTK;
         }else

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/main.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/main.cpp	2011-04-30 19:19:31 UTC (rev 7171)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/main.cpp	2011-04-30 19:19:37 UTC (rev 7172)
@@ -204,7 +204,7 @@
 #ifdef USE_SDL
 	uint32_t videoDevice = RENDER_LAST;
 
-	prefs-&gt;get(DEVICE_VIDEODEVICE, &amp;videoDevice);
+	prefs-&gt;get(VIDEODEVICE, &amp;videoDevice);
 
 	initSdl(videoDevice);
 #endif

Modified: branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_UIs/src/T_toggle.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_UIs/src/T_toggle.cpp	2011-04-30 19:19:31 UTC (rev 7171)
+++ branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_UIs/src/T_toggle.cpp	2011-04-30 19:19:37 UTC (rev 7172)
@@ -29,7 +29,7 @@
 {
   protected:
 public:
-            diaElemToggle(uint32_t *toggleValue,const char *toggleTitle, const char *tip=NULL);
+            diaElemToggle(bool *toggleValue,const char *toggleTitle, const char *tip=NULL);
   virtual   ~diaElemToggle() ;
   void      setMe(void *dialog, void *opaque,uint32_t line);
   void      getMe(void);
@@ -103,7 +103,7 @@
 	QObject::connect(this, SIGNAL(stateChanged(int)), this, SLOT(changed(int )));
 }
 
-diaElemToggle::diaElemToggle(uint32_t *toggleValue,const char *toggleTitle, const char *tip)
+diaElemToggle::diaElemToggle(bool *toggleValue,const char *toggleTitle, const char *tip)
   : diaElemToggleBase()
 {
   param=(void *)toggleValue;
@@ -126,7 +126,7 @@
  ADM_QCheckBox *box=new ADM_QCheckBox(QString::fromUtf8(paramTitle),(QWidget *)dialog,this,TT_TOGGLE);
  QVBoxLayout *layout=(QVBoxLayout*) opaque;
  myWidget=(void *)box; 
- if( *(uint32_t *)param)
+ if( *(bool *)param)
  {
     box-&gt;setCheckState(Qt::Checked); 
  }
@@ -137,12 +137,12 @@
 void diaElemToggle::getMe(void)
 {
   ADM_QCheckBox *box=(ADM_QCheckBox *)myWidget;
-  uint32_t *val=(uint32_t *)param;
+  bool *val=(bool *)param;
   if(Qt::Checked==box-&gt;checkState())
   {
-    *val=1; 
+    *val=true; 
   }else
-    *val=0;
+    *val=false;
 }
 void diaElemToggle::enable(uint32_t onoff) 
 {
@@ -437,7 +437,7 @@
 	ADM_qt4Factory::diaElemToggleInt *a=(ADM_qt4Factory::diaElemToggleInt *)e;
 	delete a;
 }
-diaElem  *qt4CreateToggle(uint32_t *toggleValue,const char *toggleTitle, const char *tip)
+diaElem  *qt4CreateToggle(bool *toggleValue,const char *toggleTitle, const char *tip)
 {
 	return new  ADM_qt4Factory::diaElemToggle(toggleValue,toggleTitle, tip);
 }

Modified: branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_gui/file_qt4.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_gui/file_qt4.cpp	2011-04-30 19:19:31 UTC (rev 7171)
+++ branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_gui/file_qt4.cpp	2011-04-30 19:19:37 UTC (rev 7172)
@@ -33,14 +33,14 @@
 	{
 		char *tmpname = NULL;
 		char *str = NULL;
-		options pref_entry = LASTDIR_READ;
+		options pref_entry = LASTFILES_LASTDIR_READ;
 
 		*name = NULL;
 
 		if (access)
-			pref_entry = LASTDIR_WRITE;
+			pref_entry = LASTFILES_LASTDIR_WRITE;
 
-		if (prefs-&gt;get(pref_entry,(ADM_filename **)&amp;tmpname))
+		if (prefs-&gt;get(pref_entry,&amp;tmpname))
 		{
 			DIR *dir;
 			str = ADM_PathCanonize(tmpname);

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreAudioDevice/src/ADM_audiodevice.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreAudioDevice/src/ADM_audiodevice.cpp	2011-04-30 19:19:31 UTC (rev 7171)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreAudioDevice/src/ADM_audiodevice.cpp	2011-04-30 19:19:37 UTC (rev 7172)
@@ -134,7 +134,7 @@
 {
 const char *string;
 		string=ADM_audioById(currentDevice);
-		prefs-&gt;set(DEVICE_AUDIODEVICE, string);
+		prefs-&gt;set(AUDIO_DEVICE_AUDIODEVICE, string);
 }
 /**
     \fn ADM_audioByName
@@ -182,7 +182,7 @@
 char *name=NULL;
 AUDIO_DEVICE id=0;
 
-		if(prefs-&gt;get(DEVICE_AUDIODEVICE, &amp;name))
+		if(prefs-&gt;get(AUDIO_DEVICE_AUDIODEVICE, &amp;name))
 		{
 		id=ADM_audioByName(name);
 		ADM_dealloc(name);

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreImage/include/ADM_image.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreImage/include/ADM_image.h	2011-04-30 19:19:31 UTC (rev 7171)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreImage/include/ADM_image.h	2011-04-30 19:19:37 UTC (rev 7172)
@@ -66,6 +66,9 @@
 */
 class ADMImage
 {
+public: // half public/protected, only in  ADMImageRef case it is really public
+        uint8_t         *_planes[3];     /// In case of linked data store y/u/v pointers
+        uint32_t        _planeStride[3]; /// Same story
 public:
         uint32_t	    _width;		/// Width of image
         uint32_t	    _height;	/// Height of image
@@ -152,8 +155,6 @@
 class ADMImageRef: public ADMImage
 {
 public:
-        uint8_t         *_planes[3];     /// In case of linked data store y/u/v pointers
-        uint32_t        _planeStride[3]; /// Same story
 
 public:
                         ADMImageRef(uint32_t w, uint32_t h);

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreImage/src/ADM_colorspace.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreImage/src/ADM_colorspace.cpp	2011-04-30 19:19:31 UTC (rev 7171)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreImage/src/ADM_colorspace.cpp	2011-04-30 19:19:37 UTC (rev 7172)
@@ -268,12 +268,8 @@
     default: ADM_assert(0);
     }
 
-    if(dh!=sh)
     {
         FLAGS();
-    }else
-    {
-        ADM_warning(&quot;Same height for source and destination, disabling assembly\n&quot;);
     }
   
     srcWidth=sw;

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreImage/src/ADM_image.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreImage/src/ADM_image.cpp	2011-04-30 19:19:31 UTC (rev 7171)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreImage/src/ADM_image.cpp	2011-04-30 19:19:37 UTC (rev 7172)
@@ -107,7 +107,14 @@
 */
 ADMImageDefault::ADMImageDefault(uint32_t w, uint32_t h) : ADMImage(w,h,ADM_IMAGE_DEFAULT)
 {
-    data=new uint8_t [(w*h*3)/2];
+    uint32_t pitch=(w+31)&amp;(~31);
+    data=new uint8_t [32+(pitch*h*3)/2];
+    _planes[0]=data;
+    _planes[1]=data+pitch*h;
+    _planes[2]=data+pitch*h +((pitch*h)&gt;&gt;2);
+    _planeStride[0]=pitch;
+    _planeStride[1]=pitch/2;
+    _planeStride[2]=pitch/2;
 }
 /**
     \fn ADMImageDefault
@@ -121,19 +128,12 @@
 bool           ADMImageDefault::isWrittable(void) {return true;}
 uint32_t       ADMImageDefault::GetPitch(ADM_PLANE plane)
                     {
-                            if(plane==PLANAR_Y) return _width;
-                            return _width/2;
+                            return _planeStride[plane];
                         }
 uint8_t        *ADMImageDefault::GetWritePtr(ADM_PLANE plane) {return GetReadPtr(plane);}
 uint8_t        *ADMImageDefault::GetReadPtr(ADM_PLANE plane)
 {
-    int xplane=_width*_height;
-    switch(plane)
-    {
-        case PLANAR_Y: return data;
-        case PLANAR_U: return data+xplane;
-        case PLANAR_V: return data+(5*xplane)/4;
-    }
+    return _planes[plane];
 }
 //****************************************
 /**

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreJson/src/ADM_json.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreJson/src/ADM_json.cpp	2011-04-30 19:19:31 UTC (rev 7171)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreJson/src/ADM_json.cpp	2011-04-30 19:19:37 UTC (rev 7172)
@@ -214,7 +214,7 @@
         int l=readItems.size();
         for(int i=0;i&lt;l;i++)
         {
-            printf(&quot; %s =&gt; %s\n&quot;,readItems[i].key.c_str(),readItems[i].value.c_str());
+           // printf(&quot; %s =&gt; %s\n&quot;,readItems[i].key.c_str(),readItems[i].value.c_str());
         }
         //
         CONFcouple *c=new CONFcouple(l);

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUI/include/DIA_factory.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUI/include/DIA_factory.h	2011-04-30 19:19:31 UTC (rev 7171)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUI/include/DIA_factory.h	2011-04-30 19:19:37 UTC (rev 7172)
@@ -170,7 +170,7 @@
   int getRequiredLayout(void);
 };
 /*********************************************/
-typedef diaElem *CREATE_TOGGLE(uint32_t *toggleValue,const char *toggleTitle, const char *tip);
+typedef diaElem *CREATE_TOGGLE(bool *toggleValue,const char *toggleTitle, const char *tip);
 class diaElemToggleBase : public diaElem
 {
   protected:
@@ -183,12 +183,12 @@
   virtual   ~diaElemToggleBase() {};
   virtual uint8_t   link(uint32_t onoff,diaElem *w)=0;
 };
-typedef diaElem *CREATE_TOGGLE_T(uint32_t *toggleValue,const char *toggleTitle, const char *tip);
+typedef diaElem *CREATE_TOGGLE_T(bool *toggleValue,const char *toggleTitle, const char *tip);
 class diaElemToggle : public diaElemToggleBase
 {
   protected:
 public:
-            diaElemToggle(uint32_t *toggleValue,const char *toggleTitle, const char *tip=NULL);
+            diaElemToggle(bool *toggleValue,const char *toggleTitle, const char *tip=NULL);
   virtual   ~diaElemToggle() ;
   void      setMe(void *dialog, void *opaque,uint32_t line);
   void      getMe(void);

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUI/src/DIA_factory.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUI/src/DIA_factory.cpp	2011-04-30 19:19:31 UTC (rev 7171)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUI/src/DIA_factory.cpp	2011-04-30 19:19:37 UTC (rev 7172)
@@ -478,7 +478,7 @@
 	}
 DIA_MKSTUBS(diaElemToggleInt)
 // ****************** diaElemToggle ********************
-diaElemToggle ::diaElemToggle(uint32_t *toggleValue,const char *toggleTitle, const char *tip):
+diaElemToggle ::diaElemToggle(bool *toggleValue,const char *toggleTitle, const char *tip):
 	diaElemToggleBase()
 {
 	ADM_assert(Factory); 

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/include/prefs.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/include/prefs.h	2011-04-30 19:19:31 UTC (rev 7171)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/include/prefs.h	2011-04-30 19:19:37 UTC (rev 7172)
@@ -3,133 +3,46 @@
 
 #include &quot;ADM_default.h&quot;
 
-#define RC_OK     1
-#define RC_FAILED 0
+#define RC_OK     true
+#define RC_FAILED false
 
 // &lt;prefs_gen&gt;
 typedef enum {
-	CODECS_SVCD_ENCTYPE,
-	CODECS_SVCD_BITRATE,
-	CODECS_SVCD_QUANTIZER,
-	CODECS_SVCD_FINALSIZE,
-	CODECS_SVCD_INTERLACED,
-	CODECS_SVCD_BFF,
-	CODECS_SVCD_WIDESCREEN,
-	CODECS_SVCD_MATRIX,
-	CODECS_SVCD_GOPSIZE,
-	CODECS_SVCD_MAXBITRATE,
-	CODECS_DVD_ENCTYPE,
-	CODECS_DVD_BITRATE,
-	CODECS_DVD_QUANTIZER,
-	CODECS_DVD_FINALSIZE,
-	CODECS_DVD_INTERLACED,
-	CODECS_DVD_BFF,
-	CODECS_DVD_WIDESCREEN,
-	CODECS_DVD_MATRIX,
-	CODECS_DVD_GOPSIZE,
-	CODECS_DVD_MAXBITRATE,
-	CODECS_XVID_ENCTYPE,
-	CODECS_XVID_QUANTIZER,
-	CODECS_XVID_BITRATE,
-	CODECS_XVID_FINALSIZE,
-	CODECS_PREFERREDCODEC,
-	FILTERS_SUBTITLE_FONTNAME,
-	FILTERS_SUBTITLE_CHARSET,
-	FILTERS_SUBTITLE_FONTSIZE,
-	FILTERS_SUBTITLE_YPERCENT,
-	FILTERS_SUBTITLE_UPERCENT,
-	FILTERS_SUBTITLE_VPERCENT,
-	FILTERS_SUBTITLE_SELFADJUSTABLE,
-	FILTERS_SUBTITLE_USEBACKGROUNDCOLOR,
-	FILTERS_AVSFILTER_AVS_SCRIPT,
-	FILTERS_AVSFILTER_AVS_LOADER,
-	FILTERS_AVSFILTER_PIPE_TIMEOUT,
-	FILTERS_AVSFILTER_DEBUG_MSG,
-	SETTINGS_MPEGSPLIT,
-	DEVICE_AUDIODEVICE,
-	DEVICE_AUDIO_ALSA_DEVICE,
-	DEVICE_VIDEODEVICE,
-	DEFAULT_POSTPROC_TYPE,
-	DEFAULT_POSTPROC_VALUE,
-	LASTFILES_FILE1,
-	LASTFILES_FILE2,
-	LASTFILES_FILE3,
-	LASTFILES_FILE4,
-	LASTDIR_READ,
-	LASTDIR_WRITE,
-	LAME_CLI,
-	PIPE_CMD,
-	PIPE_PARAM,
-	LAME_PATH,
-	TOOLAME_PATH,
-	LVEMUX_PATH,
-	REQUANT_PATH,
-	MESSAGE_LEVEL,
-	FEATURE_SWAP_IF_A_GREATER_THAN_B,
-	FEATURE_SVCDRES_PREFEREDSOURCERATIO,
-	FEATURE_SAVEPREFSONEXIT,
-	FEATURE_IGNORESAVEDMARKERS,
-	FEATURE_DISABLE_NUV_RESYNC,
-	FEATURE_TRYAUTOIDX,
-	FEATURE_USE_ODML,
-	FEATURE_USE_SYSTRAY,
-	FEATURE_REUSE_2PASS_LOG,
-	FEATURE_AUDIOBAR_USES_MASTER,
-	FEATURE_THREADING_LAVC,
-	FEATURE_CPU_CAPS,
-	FEATURE_MPEG_NO_LIMIT,
-	FEATURE_AUTO_BUILDMAP,
-	FEATURE_AUTO_REBUILDINDEX,
-	FEATURE_AUTO_UNPACK,
-	DOWNMIXING_PROLOGIC,
-	FILTERS_AUTOLOAD_PATH,
-	FILTERS_AUTOLOAD_ACTIVE,
-	FEATURE_ALTERNATE_MP3_TAG,
-	FEATURE_VDPAU,
-	FEATURE_GLOBAL_GLYPH_ACTIVE,
-	FEATURE_GLOBAL_GLYPH_NAME,
-	PRIORITY_ENCODING,
-	PRIORITY_INDEXING,
-	PRIORITY_PLAYBACK
+#include &quot;prefs2_list.h&quot;
+LAST_PREF
 } options;
 // &lt;/prefs_gen&gt;
 
 class preferences {
 	private:
 		char *internal_lastfiles[5];
-		int save_xml_to_file();
+		const char * get_str_min(options option);
+		const char * get_str_max(options option);
+
 	public:
 		preferences();
 		~preferences();
-		int load();
-		int save();
-		int get(options option, unsigned int *val);
-		int get(options option,          int *val);
-		int get(options option, unsigned long *val);
-		int get(options option,          long *val);
-		int get(options option, float *val);
-		int get(options option, char **val);
-                int get(options option, ADM_filename **val);
-		int get(options option, uint8_t *val);
-		int get(options option, uint16_t *val);
-		const char * get_str_min(options option);
-		const char * get_str_max(options option);
-		// handled by compiler: const uint8_t is full handled by any 
-		//    method that can handle const unsigned int
-		// int set(options option, const uint8_t val);
-		// int set(options option, const uint16_t val);
-		int set(options option, const unsigned int val);
-		int set(options option, const          int val);
-		int set(options option, const unsigned long val);
-		int set(options option, const          long val);
-		int set(options option, const          float val);
-		int set(options option, const          char * val);
-                int set(options option, const ADM_filename * val);
+		bool load();
+		bool save();
+		bool get(options option, uint32_t *);
+		bool get(options option, int32_t  *);
+		bool get(options option, float *val);
+		bool get(options option, char **val);
+		bool get(options option, bool *val);
+
+
+		bool set(options option, const uint32_t val);
+		bool set(options option, const int32_t  val);
+		bool set(options option, const float    val);
+		bool set(options option, const char    *val);
+		bool set(options option, const bool     val);
+		
+
 		int set_lastfile(const char* file);
 		const char **get_lastfiles(void);
 };
 
 extern preferences *prefs;
-int initPrefs(  void );
-int destroyPrefs(  void );
+bool initPrefs(  void );
+bool destroyPrefs(  void );
 #endif

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/src/pref_gen.py
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/src/pref_gen.py	2011-04-30 19:19:31 UTC (rev 7171)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/src/pref_gen.py	2011-04-30 19:19:37 UTC (rev 7172)
@@ -96,7 +96,7 @@
     out=out+&quot;\t,&quot;+str(default)+&quot;,\t&quot;+str(min)+&quot;,\t&quot;+str(max)
     out=out+&quot;,\tNULL},&quot;
     outputJson(out)
-    outputList(fullName.upper())
+    outputList(fullName.upper()+&quot;, \t//&quot;+str(varType))
 ###################################################################################################################################
 
 def writeJsonHead():
@@ -129,7 +129,7 @@
     print &quot;no such file &quot;+str(inputFile)
     exit(1)
 jsonFileName=re.sub(r'.conf',r'_pref.h',inputFile)
-listFileName=str(&quot;../include/&quot;+re.sub(r'.conf',r'_list.h',intputFile)
+listFileName=str(&quot;../include/&quot;)+re.sub(r'.conf',r'_list.h',inputFile)
 print(&quot;Generating &quot;+jsonFileName)
 jsonFile=open(jsonFileName,'w')
 print(&quot;Generating &quot;+listFileName)

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/src/prefs.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/src/prefs.cpp	2011-04-30 19:19:31 UTC (rev 7171)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/src/prefs.cpp	2011-04-30 19:19:37 UTC (rev 7172)
@@ -48,7 +48,7 @@
 
 typedef struct
 {
-   const char *name;
+   int        enumerate;
    const char *name2;
    ADM_paramType  type;
    const char *defaultValue;
@@ -62,7 +62,7 @@
 /**
     \fn initPrefs
 */
-int initPrefs(  void )
+bool initPrefs(  void )
 {
   prefs = new preferences();
   return 1;
@@ -70,7 +70,7 @@
 /**
     \fn destroyPrefs
 */
-int destroyPrefs(void)
+bool destroyPrefs(void)
 {
 	delete prefs;
 	prefs = NULL;
@@ -84,6 +84,24 @@
         if(!strcmp(myOptions[i].name2,name)) return i;
     return -1;
 }
+static int searchDescByName(const char *name)
+{
+    int nb=sizeof( my_prefs_struct_param) /sizeof(ADM_paramList  );
+    for(int i=0;i&lt;nb;i++)
+        if(!strcmp(my_prefs_struct_param[i].paramName,name)) return i;
+    return -1;
+}
+
+
+static int searchOptionByEnum(int value)
+{
+    int nb=sizeof( myOptions)/sizeof(optionDesc);
+    for(int i=0;i&lt;nb;i++)
+        if(myOptions[i].enumerate==value) return i;
+    return -1;
+}
+
+
 /**
     \fn ctor
 */
@@ -153,7 +171,7 @@
     \fn load
     \brief load prefs from file.. Should be called only once
 */
-int preferences::load()
+bool preferences::load()
 {
 
    char *home;
@@ -186,7 +204,7 @@
 /**
     \fn save
 */
-int preferences::save()
+bool preferences::save()
 {
    char *home;
    char *dir_adm;
@@ -213,80 +231,111 @@
     return RC_FAILED;
 }
 
-//--------
-int preferences::get(options option, uint8_t *val)
-{
-	return RC_FAILED;
-}
 
 
-int preferences::get(options option, uint16_t *val)
+static bool lookupOption(options option, const ADM_paramList **desc, const optionDesc **tpl)
 {
-	return RC_FAILED;
+    int d=searchOptionByEnum(option);
+    ADM_assert(d!=-1);
+    const optionDesc *o=myOptions+d;
+    // Get full name
+    d=searchDescByName(o-&gt;name2);
+    ADM_assert(d!=-1);
+    const ADM_paramList *dsc=my_prefs_struct_param+d;
+
+    *tpl=o;
+    *desc=dsc;
+    return true;
 }
 
-int preferences::get(options option, unsigned int *val)
+/**
+    \fn get
+*/
+bool preferences::get(options option, uint32_t *v)
 {
-	return RC_FAILED; // wrong input for conversion or EOF
+  const ADM_paramList *desc;
+  const optionDesc *tpl;
+
+    lookupOption(option,&amp;desc,&amp;tpl);
+
+    ADM_assert(desc-&gt;type==ADM_param_uint32_t);
+    int offset=desc-&gt;offset;
+    char *dummy=(char *)&myPrefs;
+    *v=*(uint32_t *)(dummy+offset);
+    return true;
+    
 }
-
-int preferences::get(options option,          int *val)
+/**
+    \fn get
+*/
+bool preferences::get(options option, float *v)
 {
+ const ADM_paramList *desc;
+  const optionDesc *tpl;
 
-	return RC_FAILED; // wrong input for conversion or EOF
+    lookupOption(option,&amp;desc,&amp;tpl);
+
+    ADM_assert(desc-&gt;type==ADM_param_float);
+    int offset=desc-&gt;offset;
+    char *dummy=(char *)&myPrefs;
+    *v=*(float *)(dummy+offset);
+    return true;
 }
-
-int preferences::get(options option, unsigned long *val)
+/**
+    \fn get
+*/
+bool preferences::get(options option, bool *v)
 {
+  const ADM_paramList *desc;
+  const optionDesc *tpl;
 
-	return RC_FAILED; // wrong input for conversion or EOF
+    lookupOption(option,&amp;desc,&amp;tpl);
+
+    ADM_assert(desc-&gt;type==ADM_param_bool);
+    int offset=desc-&gt;offset;
+    char *dummy=(char *)&myPrefs;
+    *v=*(bool *)(dummy+offset);
+    return true;
 }
+/**
+    \fn get
+*/
+bool preferences::get(options option, char **v)
+{
 
-int preferences::get(options option, long *val)
-{
-	return RC_FAILED; // wrong input for conversion or EOF
 }
 
-int preferences::get(options option, float *val)
+
+/**
+    \fn set
+*/
+bool preferences::set(options option, const uint32_t v)
 {
-	return RC_FAILED; // wrong input for conversion or EOF
-}
 
-int preferences::get(options option, char **val)
-{
-	return RC_FAILED; // strdup() out of memory
 }
-
-int preferences::set(options option, const unsigned int val)
+/**
+    \fn set
+*/
+bool preferences::set(options option, const float v)
 {
-	return RC_OK;
-}
 
-int preferences::set(options option, const int val)
-{
-	return RC_OK;
 }
-
-int preferences::set(options option, const unsigned long val)
+/**
+    \fn set
+*/
+bool preferences::set(options option, const bool v)
 {
-	return RC_OK;
-}
 
-int preferences::set(options option, const long val)
-{
-	return RC_OK;
 }
-
-int preferences::set(options option, const float val)
+/**
+    \fn set
+*/
+bool preferences::set(options option, const char *v)
 {
-	return RC_OK;
-}
 
-int preferences::set(options option, const char * val)
-{
-	return RC_OK;
 }
 
+
 #define PRT_LAFI(x,y,z) fprintf(stderr,&quot;Prefs: %s%u %s\n&quot;,x,y,(z?z:&quot;NULL&quot;))
 
 int preferences::set_lastfile(const char* file)

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/src/prefs2.conf
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/src/prefs2.conf	2011-04-30 19:19:31 UTC (rev 7171)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/src/prefs2.conf	2011-04-30 19:19:37 UTC (rev 7172)
@@ -15,15 +15,15 @@
 my_prefs_struct{
 features{
 bool:swap_if_A_greater_than_B,	       1,      0,      1
-bool:saveprefsonexit,		       1,	    0,	    1
-bool:ignoresavedmarkers,	       0,	    0,	    1
-uint32_t:use_odml,                     0,      0,      1
-uint32_t:use_systray,                  0,      0,      1
+bool:saveprefsonexit,		       1,      0,	    1
+bool:ignoresavedmarkers,	       0,      0,	    1
+bool:use_odml,                         0,      0,      1
+bool:use_systray,                      0,      0,      1
 bool:reuse_2pass_log,                  0,      0,      1
 bool:audiobar_uses_master,             0,      0,      1
 uint32_t:threading_lavc,               0,      0,      32
 uint32_t:cpu_caps,  	              4294967295,      0,      4294967295
-uint32_t:mpeg_no_limit,                0,      0,      1
+bool:mpeg_no_limit,                    0,      0,      1
 bool:alternate_mp3_tag,                1,      0,      1
 bool:vdpau,                            0,      0,      1
 }

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/src/prefs2.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/src/prefs2.h	2011-04-30 19:19:31 UTC (rev 7171)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/src/prefs2.h	2011-04-30 19:19:37 UTC (rev 7172)
@@ -6,13 +6,13 @@
 	bool swap_if_A_greater_than_B;
 	bool saveprefsonexit;
 	bool ignoresavedmarkers;
-	uint32_t use_odml;
-	uint32_t use_systray;
+	bool use_odml;
+	bool use_systray;
 	bool reuse_2pass_log;
 	bool audiobar_uses_master;
 	uint32_t threading_lavc;
 	uint32_t cpu_caps;
-	uint32_t mpeg_no_limit;
+	bool mpeg_no_limit;
 	bool alternate_mp3_tag;
 	bool vdpau;
 }features;

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/src/prefs2_desc.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/src/prefs2_desc.cpp	2011-04-30 19:19:31 UTC (rev 7171)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/src/prefs2_desc.cpp	2011-04-30 19:19:37 UTC (rev 7172)
@@ -3,13 +3,13 @@
  {&quot;features.swap_if_A_greater_than_B&quot;,offsetof(my_prefs_struct,features.swap_if_A_greater_than_B),&quot;bool&quot;,ADM_param_bool},
  {&quot;features.saveprefsonexit&quot;,offsetof(my_prefs_struct,features.saveprefsonexit),&quot;bool&quot;,ADM_param_bool},
  {&quot;features.ignoresavedmarkers&quot;,offsetof(my_prefs_struct,features.ignoresavedmarkers),&quot;bool&quot;,ADM_param_bool},
- {&quot;features.use_odml&quot;,offsetof(my_prefs_struct,features.use_odml),&quot;uint32_t&quot;,ADM_param_uint32_t},
- {&quot;features.use_systray&quot;,offsetof(my_prefs_struct,features.use_systray),&quot;uint32_t&quot;,ADM_param_uint32_t},
+ {&quot;features.use_odml&quot;,offsetof(my_prefs_struct,features.use_odml),&quot;bool&quot;,ADM_param_bool},
+ {&quot;features.use_systray&quot;,offsetof(my_prefs_struct,features.use_systray),&quot;bool&quot;,ADM_param_bool},
  {&quot;features.reuse_2pass_log&quot;,offsetof(my_prefs_struct,features.reuse_2pass_log),&quot;bool&quot;,ADM_param_bool},
  {&quot;features.audiobar_uses_master&quot;,offsetof(my_prefs_struct,features.audiobar_uses_master),&quot;bool&quot;,ADM_param_bool},
  {&quot;features.threading_lavc&quot;,offsetof(my_prefs_struct,features.threading_lavc),&quot;uint32_t&quot;,ADM_param_uint32_t},
  {&quot;features.cpu_caps&quot;,offsetof(my_prefs_struct,features.cpu_caps),&quot;uint32_t&quot;,ADM_param_uint32_t},
- {&quot;features.mpeg_no_limit&quot;,offsetof(my_prefs_struct,features.mpeg_no_limit),&quot;uint32_t&quot;,ADM_param_uint32_t},
+ {&quot;features.mpeg_no_limit&quot;,offsetof(my_prefs_struct,features.mpeg_no_limit),&quot;bool&quot;,ADM_param_bool},
  {&quot;features.alternate_mp3_tag&quot;,offsetof(my_prefs_struct,features.alternate_mp3_tag),&quot;bool&quot;,ADM_param_bool},
  {&quot;features.vdpau&quot;,offsetof(my_prefs_struct,features.vdpau),&quot;bool&quot;,ADM_param_bool},
  {&quot;lastfiles.lastdir_read&quot;,offsetof(my_prefs_struct,lastfiles.lastdir_read),&quot;char *&quot;,ADM_param_string},

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/src/prefs2_json.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/src/prefs2_json.cpp	2011-04-30 19:19:31 UTC (rev 7171)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/src/prefs2_json.cpp	2011-04-30 19:19:37 UTC (rev 7172)
@@ -9,13 +9,13 @@
 json.addBool(&quot;swap_if_A_greater_than_B&quot;,key-&gt;features.swap_if_A_greater_than_B);
 json.addBool(&quot;saveprefsonexit&quot;,key-&gt;features.saveprefsonexit);
 json.addBool(&quot;ignoresavedmarkers&quot;,key-&gt;features.ignoresavedmarkers);
-json.addUint32(&quot;use_odml&quot;,key-&gt;features.use_odml);
-json.addUint32(&quot;use_systray&quot;,key-&gt;features.use_systray);
+json.addBool(&quot;use_odml&quot;,key-&gt;features.use_odml);
+json.addBool(&quot;use_systray&quot;,key-&gt;features.use_systray);
 json.addBool(&quot;reuse_2pass_log&quot;,key-&gt;features.reuse_2pass_log);
 json.addBool(&quot;audiobar_uses_master&quot;,key-&gt;features.audiobar_uses_master);
 json.addUint32(&quot;threading_lavc&quot;,key-&gt;features.threading_lavc);
 json.addUint32(&quot;cpu_caps&quot;,key-&gt;features.cpu_caps);
-json.addUint32(&quot;mpeg_no_limit&quot;,key-&gt;features.mpeg_no_limit);
+json.addBool(&quot;mpeg_no_limit&quot;,key-&gt;features.mpeg_no_limit);
 json.addBool(&quot;alternate_mp3_tag&quot;,key-&gt;features.alternate_mp3_tag);
 json.addBool(&quot;vdpau&quot;,key-&gt;features.vdpau);
 json.endNode();

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/src/prefs2_pref.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/src/prefs2_pref.h	2011-04-30 19:19:31 UTC (rev 7171)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/src/prefs2_pref.h	2011-04-30 19:19:37 UTC (rev 7172)
@@ -14,13 +14,13 @@
 { FEATURES_SWAP_IF_A_GREATER_THAN_B,&quot;features.swap_if_A_greater_than_B&quot;,	ADM_param_bool    	,&quot;1&quot;,	&quot;0&quot;,	&quot;1&quot;,	NULL},
 { FEATURES_SAVEPREFSONEXIT,&quot;features.saveprefsonexit&quot;,	ADM_param_bool    	,&quot;1&quot;,	&quot;0&quot;,	&quot;1&quot;,	NULL},
 { FEATURES_IGNORESAVEDMARKERS,&quot;features.ignoresavedmarkers&quot;,	ADM_param_bool    	,&quot;0&quot;,	&quot;0&quot;,	&quot;1&quot;,	NULL},
-{ FEATURES_USE_ODML,&quot;features.use_odml&quot;,	ADM_param_uint32_t	,&quot;0&quot;,	&quot;0&quot;,	&quot;1&quot;,	NULL},
-{ FEATURES_USE_SYSTRAY,&quot;features.use_systray&quot;,	ADM_param_uint32_t	,&quot;0&quot;,	&quot;0&quot;,	&quot;1&quot;,	NULL},
+{ FEATURES_USE_ODML,&quot;features.use_odml&quot;,	ADM_param_bool    	,&quot;0&quot;,	&quot;0&quot;,	&quot;1&quot;,	NULL},
+{ FEATURES_USE_SYSTRAY,&quot;features.use_systray&quot;,	ADM_param_bool    	,&quot;0&quot;,	&quot;0&quot;,	&quot;1&quot;,	NULL},
 { FEATURES_REUSE_2PASS_LOG,&quot;features.reuse_2pass_log&quot;,	ADM_param_bool    	,&quot;0&quot;,	&quot;0&quot;,	&quot;1&quot;,	NULL},
 { FEATURES_AUDIOBAR_USES_MASTER,&quot;features.audiobar_uses_master&quot;,	ADM_param_bool    	,&quot;0&quot;,	&quot;0&quot;,	&quot;1&quot;,	NULL},
 { FEATURES_THREADING_LAVC,&quot;features.threading_lavc&quot;,	ADM_param_uint32_t	,&quot;0&quot;,	&quot;0&quot;,	&quot;32&quot;,	NULL},
 { FEATURES_CPU_CAPS,&quot;features.cpu_caps&quot;,	ADM_param_uint32_t	,&quot;4294967295&quot;,	&quot;0&quot;,	&quot;4294967295&quot;,	NULL},
-{ FEATURES_MPEG_NO_LIMIT,&quot;features.mpeg_no_limit&quot;,	ADM_param_uint32_t	,&quot;0&quot;,	&quot;0&quot;,	&quot;1&quot;,	NULL},
+{ FEATURES_MPEG_NO_LIMIT,&quot;features.mpeg_no_limit&quot;,	ADM_param_bool    	,&quot;0&quot;,	&quot;0&quot;,	&quot;1&quot;,	NULL},
 { FEATURES_ALTERNATE_MP3_TAG,&quot;features.alternate_mp3_tag&quot;,	ADM_param_bool    	,&quot;1&quot;,	&quot;0&quot;,	&quot;1&quot;,	NULL},
 { FEATURES_VDPAU,&quot;features.vdpau&quot;,	ADM_param_bool    	,&quot;0&quot;,	&quot;0&quot;,	&quot;1&quot;,	NULL},
 { LASTFILES_LASTDIR_READ,&quot;lastfiles.lastdir_read&quot;,	ADM_param_string  	,&quot;&quot;,	NULL,	NULL,	NULL},

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoCodec/src/ADM_ffmp43.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoCodec/src/ADM_ffmp43.cpp	2011-04-30 19:19:31 UTC (rev 7171)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoCodec/src/ADM_ffmp43.cpp	2011-04-30 19:19:37 UTC (rev 7172)
@@ -50,7 +50,7 @@
 
 
 //****************************
-extern uint8_t DIA_lavDecoder (uint32_t * swapUv, uint32_t * showU);
+extern uint8_t DIA_lavDecoder (bool  * swapUv, bool * showU);
 extern &quot;C&quot;
 {
   int av_is_voppacked (AVCodecContext * avctx, int *vop_packed, int *gmc,
@@ -145,7 +145,12 @@
 //________________________________________________
 bool  decoderFF::setParam (void)
 {
-  DIA_lavDecoder (&amp;_swapUV, &amp;_showMv);
+    bool buv=_swapUV;
+    bool bmv=_showMv;
+    DIA_lavDecoder (&amp;buv, &amp;bmv);
+    _swapUV=buv;
+    _showMv=bmv;
+    
   return true;			// no param for ffmpeg
 }
 

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoCodec/src/DIA_lavDecoder.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoCodec/src/DIA_lavDecoder.cpp	2011-04-30 19:19:31 UTC (rev 7171)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoCodec/src/DIA_lavDecoder.cpp	2011-04-30 19:19:37 UTC (rev 7172)
@@ -19,7 +19,7 @@
       \fn DIA_lavDecoder
       \brief Dialog for lavcodec *DECODER* option
 */
-uint8_t DIA_lavDecoder(uint32_t *swapUv, uint32_t *showU)
+uint8_t DIA_lavDecoder(bool  *swapUv, bool *showU)
 {
 int ret=0;	
          


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="004327.html">[Avidemux-svn-commit] r7171 -	branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/src
</A></li>
	<LI>Next message: <A HREF="004329.html">[Avidemux-svn-commit] r7173 -	branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/src
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4328">[ date ]</a>
              <a href="thread.html#4328">[ thread ]</a>
              <a href="subject.html#4328">[ subject ]</a>
              <a href="author.html#4328">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">More information about the Avidemux-svn-commit
mailing list</a><br>
</body></html>
