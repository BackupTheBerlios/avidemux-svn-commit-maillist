From mean at mail.berlios.de  Mon Jun  1 10:38:41 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Mon, 1 Jun 2009 10:38:41 +0200
Subject: [Avidemux-svn-commit] r4877 - in
	branches/avidemux_2.6_branch_mean/avidemux: . ADM_codecs
	ADM_coreUtils/include ADM_coreUtils/src ADM_coreVideoEncoder
	ADM_coreVideoEncoder/include ADM_coreVideoEncoder/src
	ADM_coreVideoFilter/include ADM_coreVideoFilter/src
	ADM_editor ADM_encoder ADM_muxerGate/include ADM_muxerGate/src
Message-ID: <200906010838.n518cf4t006863@sheep.berlios.de>

Author: mean
Date: 2009-06-01 10:38:39 +0200 (Mon, 01 Jun 2009)
New Revision: 4877

Added:
   branches/avidemux_2.6_branch_mean/avidemux/ADM_coreVideoEncoder/
   branches/avidemux_2.6_branch_mean/avidemux/ADM_coreVideoEncoder/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux/ADM_coreVideoEncoder/include/
   branches/avidemux_2.6_branch_mean/avidemux/ADM_coreVideoEncoder/include/ADM_coreVideoEncoder.h
   branches/avidemux_2.6_branch_mean/avidemux/ADM_coreVideoEncoder/include/ADM_yv12Encoder.h
   branches/avidemux_2.6_branch_mean/avidemux/ADM_coreVideoEncoder/src/
   branches/avidemux_2.6_branch_mean/avidemux/ADM_coreVideoEncoder/src/ADM_VideoEncoders.cpp
   branches/avidemux_2.6_branch_mean/avidemux/ADM_coreVideoEncoder/src/ADM_coreVideoEncoder.cpp
   branches/avidemux_2.6_branch_mean/avidemux/ADM_coreVideoEncoder/src/ADM_yv12Encoder.cpp
   branches/avidemux_2.6_branch_mean/avidemux/ADM_coreVideoEncoder/src/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux/ADM_muxerGate/include/ADM_videoProcess.h
   branches/avidemux_2.6_branch_mean/avidemux/ADM_muxerGate/src/ADM_videoProcess.cpp
Modified:
   branches/avidemux_2.6_branch_mean/avidemux/ADM_codecs/ADM_ffmpeg.cpp
   branches/avidemux_2.6_branch_mean/avidemux/ADM_coreUtils/include/ADM_bitstream.h
   branches/avidemux_2.6_branch_mean/avidemux/ADM_coreUtils/src/ADM_bitstream.cpp
   branches/avidemux_2.6_branch_mean/avidemux/ADM_coreVideoFilter/include/ADM_videoFilterBridge.h
   branches/avidemux_2.6_branch_mean/avidemux/ADM_coreVideoFilter/src/ADM_videoFilterBridge.cpp
   branches/avidemux_2.6_branch_mean/avidemux/ADM_coreVideoFilter/src/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux/ADM_editor/ADM_edit.cpp
   branches/avidemux_2.6_branch_mean/avidemux/ADM_editor/ADM_edit.hxx
   branches/avidemux_2.6_branch_mean/avidemux/ADM_encoder/ADM_externalEncoder.cpp
   branches/avidemux_2.6_branch_mean/avidemux/ADM_encoder/adm_encCopy.cpp
   branches/avidemux_2.6_branch_mean/avidemux/ADM_encoder/adm_encRequant.cpp
   branches/avidemux_2.6_branch_mean/avidemux/ADM_muxerGate/include/ADM_videoCopy.h
   branches/avidemux_2.6_branch_mean/avidemux/ADM_muxerGate/src/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux/CMakeLists.txt
Log:
[Encoder] simple skeleton to test it out

Modified: branches/avidemux_2.6_branch_mean/avidemux/ADM_codecs/ADM_ffmpeg.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/ADM_codecs/ADM_ffmpeg.cpp	2009-05-30 21:43:30 UTC (rev 4876)
+++ branches/avidemux_2.6_branch_mean/avidemux/ADM_codecs/ADM_ffmpeg.cpp	2009-06-01 08:38:39 UTC (rev 4877)
@@ -77,7 +77,7 @@
 /*****************************************/
 void ffmpegEncoder::postAmble (ADMBitstream * out, uint32_t sz)
 {
-  out->ptsFrame = _context->coded_frame->display_picture_number; //real_pict_num;;
+//  out->ptsFrame = _context->coded_frame->display_picture_number; //real_pict_num;;
  //printf("Out : %u\n",out->ptsFrame);
   out->len = (uint32_t) sz;
   out->flags = frameType ();;

Modified: branches/avidemux_2.6_branch_mean/avidemux/ADM_coreUtils/include/ADM_bitstream.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/ADM_coreUtils/include/ADM_bitstream.h	2009-05-30 21:43:30 UTC (rev 4876)
+++ branches/avidemux_2.6_branch_mean/avidemux/ADM_coreUtils/include/ADM_bitstream.h	2009-06-01 08:38:39 UTC (rev 4877)
@@ -1,4 +1,20 @@
+/***************************************************************************
+                          \fn ADM_bitstream.h
+                          \brief Class to handle compressed data
+                             -------------------
+    
+    copyright            : (C) 2002/2009 by mean
+    email                : fixounet at free.fr
+ ***************************************************************************/
 
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
 #ifndef ADM_BITSTREAM_H
 #define ADM_BITSTREAM_H
 #define ADM_NO_TIMING 0xffffffff
@@ -7,20 +23,21 @@
     BIG WARNING : BUFFER SIZE MUST BE SET: SOME CODECS CHECK& USE IT
     ESPECIALLY LAVCODEC!
 */
+/**
+    \class ADMBitstream
 
+*/
 class ADMBitstream
 {
     public:
-        uint32_t len;
-        uint32_t bufferSize;
-        uint8_t *data;
-        uint32_t flags;
+        uint32_t len;                   // Size of the payload
+        uint32_t bufferSize;            // Total size of the data field
+        uint8_t *data;                  // Where to store data
+        uint32_t flags;                 // frame type (I/P/B/...)
         uint32_t in_quantizer;          // Quantizer asked
         uint32_t out_quantizer;         // Quantizer of the image, in case of encoding the real Q
-        uint32_t ptsFrame;              // Frame number in display order
-        uint32_t dtsFrame;              // Frame number in container order (decoding order)
-        uint64_t pts;			// in ms
-        uint64_t dts;			// in ms
+        uint64_t pts;			        // in us
+        uint64_t dts;			        // in us
 
         ADMBitstream (uint32_t buffersize=0);
         ~ADMBitstream ();

Modified: branches/avidemux_2.6_branch_mean/avidemux/ADM_coreUtils/src/ADM_bitstream.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/ADM_coreUtils/src/ADM_bitstream.cpp	2009-05-30 21:43:30 UTC (rev 4876)
+++ branches/avidemux_2.6_branch_mean/avidemux/ADM_coreUtils/src/ADM_bitstream.cpp	2009-06-01 08:38:39 UTC (rev 4877)
@@ -26,11 +26,11 @@
 }
 void ADMBitstream::cleanup (uint32_t framenum)
 {
-    ptsFrame=dtsFrame=0;
+//    ptsFrame=dtsFrame=0;
     pts=dts=0;
     out_quantizer=0;
     flags=0;
     len=0;
-    dtsFrame=framenum;
+//    dtsFrame=framenum;
 }
 

Added: branches/avidemux_2.6_branch_mean/avidemux/ADM_coreVideoEncoder/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/ADM_coreVideoEncoder/CMakeLists.txt	2009-05-30 21:43:30 UTC (rev 4876)
+++ branches/avidemux_2.6_branch_mean/avidemux/ADM_coreVideoEncoder/CMakeLists.txt	2009-06-01 08:38:39 UTC (rev 4877)
@@ -0,0 +1 @@
+ADD_SUBDIRECTORY(src)

Added: branches/avidemux_2.6_branch_mean/avidemux/ADM_coreVideoEncoder/include/ADM_coreVideoEncoder.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/ADM_coreVideoEncoder/include/ADM_coreVideoEncoder.h	2009-05-30 21:43:30 UTC (rev 4876)
+++ branches/avidemux_2.6_branch_mean/avidemux/ADM_coreVideoEncoder/include/ADM_coreVideoEncoder.h	2009-06-01 08:38:39 UTC (rev 4877)
@@ -0,0 +1,65 @@
+/***************************************************************************
+                          \fn ADM_coreVideoEncoder
+                          \brief Base class for video encoder plugin
+                             -------------------
+    
+    copyright            : (C) 2002/2009 by mean
+    email                : fixounet at free.fr
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+#ifndef ADM_CORE_VIDEO_ENCODER_H
+#define ADM_CORE_VIDEO_ENCODER_H
+
+#include "ADM_coreVideoFilter.h"
+#include "ADM_bitstream.h"
+
+typedef enum
+{
+    ADM_ENCODER_OPTION_MOV_MODE=1
+
+}ADM_coreEncoderOption;
+
+/**
+    \class ADM_coreVideoEncoder
+    \brief base class for VideoEncoder
+*/
+class ADM_coreVideoEncoder
+{
+protected:
+                            ADM_coreVideoFilter *source;
+                            ADMImage            *image;
+public:
+                            ADM_coreVideoEncoder(ADM_coreVideoFilter *src);
+                            ~ADM_coreVideoEncoder();
+virtual        bool         encode (ADMBitstream * out)=0;
+
+virtual        bool         setOption(ADM_coreEncoderOption option, int32_t val) {return true;} /// Set external header mode (ESDS atom & friends)
+virtual        bool         setFreeOption(const char *option, void *data) {return true;} /// Set external header mode (ESDS atom & friends)
+
+
+virtual        bool         isDualPass(void) {return false;}
+virtual        bool         startPass2(void) {return true;}
+virtual        bool         getExtraData(uint32_t *l,uint8_t **d) {*l=0;*d=NULL;return true;}
+
+virtual        const char *getDisplayName(void)=0;       /// E.g. FFmpeg mpeg4      
+virtual        const char *getCodecName(void)=0;         /// aka fourcc
+virtual        const char *getFCCHandler(void)=0;        /// fourcc 2, needed to build AVI header
+
+virtual        bool        configure(void)=0;           /// Pop-up UI
+virtual        bool        getConfiguration(uint32_t *l,uint8_t **d)=0; /// Get current conf to save it
+virtual        bool        setConfiguration(uint32_t l,uint8_t *d)=0;   /// Set conf, call it just after creation
+               uint32_t    getWidth(void) {return source->getInfo()->width;}
+               uint32_t    getHeight(void) {return source->getInfo()->height;}
+               uint32_t    getFrameIncrement(void) {return source->getInfo()->frameIncrement;}
+               uint64_t    getTotalDuration(void) {return source->getInfo()->totalDuration;}
+};
+
+#endif
\ No newline at end of file

Added: branches/avidemux_2.6_branch_mean/avidemux/ADM_coreVideoEncoder/include/ADM_yv12Encoder.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/ADM_coreVideoEncoder/include/ADM_yv12Encoder.h	2009-05-30 21:43:30 UTC (rev 4876)
+++ branches/avidemux_2.6_branch_mean/avidemux/ADM_coreVideoEncoder/include/ADM_yv12Encoder.h	2009-06-01 08:38:39 UTC (rev 4877)
@@ -0,0 +1,47 @@
+/***************************************************************************
+                          \fn ADM_VideoEncoders
+                          \brief Internal handling of video encoders
+                             -------------------
+    
+    copyright            : (C) 2002/2009 by mean
+    email                : fixounet at free.fr
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+#ifndef ADM_YV12_ENCODER_H
+#define ADM_YV12_ENCODER_H
+#include "ADM_coreVideoEncoder.h"
+
+
+/**
+        \class ADM_yv12Encoder
+        \brief Dummy encoder that does nothing
+
+*/
+class ADM_yv12Encoder : public ADM_coreVideoEncoder
+{
+protected:
+               int plane;
+public:
+
+                            ADM_yv12Encoder(ADM_coreVideoFilter *src);
+                            ~ADM_yv12Encoder();
+virtual        bool         encode (ADMBitstream * out);
+virtual        const char *getDisplayName(void)=0;       /// E.g. FFmpeg mpeg4      
+virtual        const char *getCodecName(void)=0;         /// aka fourcc
+virtual        const char *getFCCHandler(void)=0;        /// fourcc 2, needed to build AVI header
+
+virtual        bool        configure(void)=0;           /// Pop-up UI
+virtual        bool        getConfiguration(uint32_t *l,uint8_t **d)=0; /// Get current conf to save it
+virtual        bool        setConfiguration(uint32_t l,uint8_t *d)=0;   /// Set conf, call it just after creation
+};
+
+
+#endif
\ No newline at end of file

Copied: branches/avidemux_2.6_branch_mean/avidemux/ADM_coreVideoEncoder/src/ADM_VideoEncoders.cpp (from rev 4875, branches/avidemux_2.6_branch_mean/avidemux/ADM_coreUtils/src/ADM_bitstream.cpp)
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/ADM_coreUtils/src/ADM_bitstream.cpp	2009-05-30 15:46:29 UTC (rev 4875)
+++ branches/avidemux_2.6_branch_mean/avidemux/ADM_coreVideoEncoder/src/ADM_VideoEncoders.cpp	2009-06-01 08:38:39 UTC (rev 4877)
@@ -0,0 +1,22 @@
+/***************************************************************************
+                          \fn ADM_VideoEncoders
+                          \brief Internal handling of video encoders
+                             -------------------
+    
+    copyright            : (C) 2002/2009 by mean
+    email                : fixounet at free.fr
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+#include "ADM_default.h"
+#include "ADM_coreVideoEncoder.cpp"
+#include "ADM_yv12Encoder.h"
+
+

Copied: branches/avidemux_2.6_branch_mean/avidemux/ADM_coreVideoEncoder/src/ADM_coreVideoEncoder.cpp (from rev 4875, branches/avidemux_2.6_branch_mean/avidemux/ADM_coreUtils/src/ADM_bitstream.cpp)
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/ADM_coreUtils/src/ADM_bitstream.cpp	2009-05-30 15:46:29 UTC (rev 4875)
+++ branches/avidemux_2.6_branch_mean/avidemux/ADM_coreVideoEncoder/src/ADM_coreVideoEncoder.cpp	2009-06-01 08:38:39 UTC (rev 4877)
@@ -0,0 +1,39 @@
+/***************************************************************************
+                          \fn ADM_coreVideoEncoder
+                          \brief Base class for video encoder plugin
+                             -------------------
+    
+    copyright            : (C) 2002/2009 by mean
+    email                : fixounet at free.fr
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+#include "ADM_default.h"
+#include "ADM_coreVideoEncoder.h"
+
+/**
+    \fn ADM_coreVideoEncoder
+*/                          
+ADM_coreVideoEncoder::ADM_coreVideoEncoder(ADM_coreVideoFilter *src)
+{
+    source=src;
+    image=NULL;
+
+}
+
+/**
+    \fn ADM_coreVideoEncoder
+*/                          
+ADM_coreVideoEncoder::~ADM_coreVideoEncoder()
+{
+    if(image) delete image;
+    image=NULL;
+}
+// EOF
\ No newline at end of file

Added: branches/avidemux_2.6_branch_mean/avidemux/ADM_coreVideoEncoder/src/ADM_yv12Encoder.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/ADM_coreVideoEncoder/src/ADM_yv12Encoder.cpp	2009-05-30 21:43:30 UTC (rev 4876)
+++ branches/avidemux_2.6_branch_mean/avidemux/ADM_coreVideoEncoder/src/ADM_yv12Encoder.cpp	2009-06-01 08:38:39 UTC (rev 4877)
@@ -0,0 +1,108 @@
+/***************************************************************************
+                          \fn ADM_VideoEncoders
+                          \brief Internal handling of video encoders
+                             -------------------
+    
+    copyright            : (C) 2002/2009 by mean
+    email                : fixounet at free.fr
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+#include "ADM_default.h"
+#include "ADM_yv12Encoder.h"
+
+/**
+        \fn ADM_yv12Encoder
+*/
+ADM_yv12Encoder::ADM_yv12Encoder(ADM_coreVideoFilter *src) : ADM_coreVideoEncoder(src)
+{
+    printf("[YV12Encoder] Creating.\n");
+    int w,h;
+    FilterInfo *info=src->getInfo();
+    w=info->width;
+    h=info->height;
+    image=new ADMImage(w,h);
+    plane=(w*h*3)/2;
+}
+/** 
+    \fn ~ADM_yv12Encoder
+*/
+ADM_yv12Encoder::~ADM_yv12Encoder()
+{
+    printf("[YV12Encoder] Destroying.\n");
+}
+/**
+    \fn getDisplayName
+*/
+
+const char *ADM_yv12Encoder::getDisplayName(void)
+{
+    return "YV12 Encoder";
+
+}
+/**
+    \fn getCodecName
+*/
+
+const char *ADM_yv12Encoder::getCodecName(void)
+{
+    return "yv12";
+}
+/**
+    \fn getFCCHandler
+*/
+
+const char *ADM_yv12Encoder::getFCCHandler(void)
+{
+    return "yv12";
+
+}
+/**
+    \fn configure
+*/
+bool        ADM_yv12Encoder::configure(void)
+{
+    return true;
+}
+
+/**
+    \fn getConfiguration
+*/
+bool        ADM_yv12Encoder::getConfiguration(uint32_t *l,uint8_t **d)
+{
+        *l=0;
+        *d=NULL;
+        return true;
+}
+
+/**
+    \fn setConfiguration
+*/
+bool        ADM_yv12Encoder::setConfiguration(uint32_t l,uint8_t *d)
+{
+        return true;
+}
+
+/**
+    \fn encode
+*/
+bool         ADM_yv12Encoder::encode (ADMBitstream * out)
+{
+    if(source->getNextFrame(image)==false)
+    {
+        printf("[YV12] Cannot get next image\n");
+        return false;
+    }
+    memcpy(out->data,image->data,plane);
+    out->pts=out->dts=image->Pts;
+    return true;
+}
+
+// EOF
\ No newline at end of file

Added: branches/avidemux_2.6_branch_mean/avidemux/ADM_coreVideoEncoder/src/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/ADM_coreVideoEncoder/src/CMakeLists.txt	2009-05-30 21:43:30 UTC (rev 4876)
+++ branches/avidemux_2.6_branch_mean/avidemux/ADM_coreVideoEncoder/src/CMakeLists.txt	2009-06-01 08:38:39 UTC (rev 4877)
@@ -0,0 +1,14 @@
+SET(ADM_CoreVideoEncoder_SRCS 
+	ADM_coreVideoEncoder.cpp
+)
+
+ADD_LIBRARY(ADM_coreVideoEncoder SHARED ${ADM_CoreVideoEncoder_SRCS})
+TARGET_LINK_LIBRARIES(ADM_coreVideoEncoder ADM_core)
+
+INSTALL(TARGETS ADM_coreVideoEncoder RUNTIME DESTINATION ${BIN_DIR}  LIBRARY DESTINATION lib  ARCHIVE DESTINATION lib)
+
+SET(ADM_internalVideoEncoder_SRCS 
+	ADM_VideoEncoders.cpp
+        ADM_yv12Encoder.cpp
+)
+ADD_LIBRARY(ADM_internalVideoEncoder STATIC ${ADM_internalVideoEncoder_SRCS})

Modified: branches/avidemux_2.6_branch_mean/avidemux/ADM_coreVideoFilter/include/ADM_videoFilterBridge.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/ADM_coreVideoFilter/include/ADM_videoFilterBridge.h	2009-05-30 21:43:30 UTC (rev 4876)
+++ branches/avidemux_2.6_branch_mean/avidemux/ADM_coreVideoFilter/include/ADM_videoFilterBridge.h	2009-06-01 08:38:39 UTC (rev 4877)
@@ -0,0 +1,44 @@
+/***************************************************************************
+                          \fn ADM_videoFilterBridge.h
+                          \brief Base class for Video Filters
+                           (c) Mean 2009
+
+
+
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+#ifndef ADM_VIDEO_FILTER_BRIDGE_H
+#define ADM_VIDEO_FILTER_BRIDGE_H
+
+#include "ADM_coreVideoFilter.h"
+/**
+    \class ADM_videoFilterBridge
+    \brief Class that transform Editor API to coreVideoFilter API
+
+*/
+class ADM_videoFilterBridge : public ADM_coreVideoFilter
+{
+protected:
+        uint64_t            startTime,endTime;
+        FilterInfo          bridgeInfo;
+public:
+                            ADM_videoFilterBridge(uint64_t startTime, uint64_t endTime);
+                            ~ADM_videoFilterBridge();
+
+       virtual bool         getNextFrame(ADMImage *image);    /// Return the next image
+	   virtual FilterInfo  *getInfo(void);                                      /// Return picture parameters after this filter
+	   virtual bool         getCoupledConf(CONFcouple **couples) {*couples=NULL;return true;} ; /// Return the current filter configuration
+
+        bool                rewind(void);
+
+};
+
+#endif

Modified: branches/avidemux_2.6_branch_mean/avidemux/ADM_coreVideoFilter/src/ADM_videoFilterBridge.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/ADM_coreVideoFilter/src/ADM_videoFilterBridge.cpp	2009-05-30 21:43:30 UTC (rev 4876)
+++ branches/avidemux_2.6_branch_mean/avidemux/ADM_coreVideoFilter/src/ADM_videoFilterBridge.cpp	2009-06-01 08:38:39 UTC (rev 4877)
@@ -0,0 +1,75 @@
+/***************************************************************************
+                          \fn ADM_videoFilterBridge
+                          \brief Interface between editor & filter chain
+                           (c) Mean 2009
+
+
+
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+
+#include "ADM_default.h"
+#include "ADM_videoFilterBridge.h"
+#include "ADM_editor/ADM_edit.hxx"
+extern ADM_Composer *video_body;
+/**
+    \fn ADM_videoFilterBridge
+
+*/
+ADM_videoFilterBridge::ADM_videoFilterBridge(uint64_t startTime, uint64_t endTime) : ADM_coreVideoFilter(NULL,NULL)
+{
+    this->startTime=startTime;
+    this->endTime=endTime;
+    
+    aviInfo fo;
+    video_body->getVideoInfo(&fo);
+    bridgeInfo.width=fo.width;
+    bridgeInfo.height=fo.height;
+    bridgeInfo.frameIncrement=video_body->getFrameIncrement();
+    bridgeInfo.totalDuration=video_body->getVideoDuration();
+    bridgeInfo.frameIncrement=video_body->getFrameIncrement();
+    rewind();
+}
+/**
+    \fn rewind
+    \brief go or return to the original position...
+*/
+bool ADM_videoFilterBridge::rewind(void)
+{
+    video_body->GoToTime(startTime);
+    return true;
+}
+
+/**
+    \fn ADM_videoFilterBridge
+
+*/
+ADM_videoFilterBridge::~ADM_videoFilterBridge()
+{
+
+}
+/**
+    \fn getNextFrame
+    \brief
+*/
+bool         ADM_videoFilterBridge::getNextFrame(ADMImage *image)
+{
+    return   video_body->NextPicture(image);
+}
+/**
+    \fn ADM_videoFilterBridge
+
+*/
+FilterInfo  *ADM_videoFilterBridge::getInfo(void)
+{
+    return &bridgeInfo;
+}
+// EOF

Modified: branches/avidemux_2.6_branch_mean/avidemux/ADM_coreVideoFilter/src/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/ADM_coreVideoFilter/src/CMakeLists.txt	2009-05-30 21:43:30 UTC (rev 4876)
+++ branches/avidemux_2.6_branch_mean/avidemux/ADM_coreVideoFilter/src/CMakeLists.txt	2009-06-01 08:38:39 UTC (rev 4877)
@@ -6,3 +6,8 @@
 TARGET_LINK_LIBRARIES(ADM_coreVideoFilter ADM_core)
 
 INSTALL(TARGETS ADM_coreVideoFilter RUNTIME DESTINATION ${BIN_DIR}  LIBRARY DESTINATION lib  ARCHIVE DESTINATION lib)
+
+SET(ADM_internalVideoFilter_SRCS 
+	ADM_videoFilterBridge.cpp
+)
+ADD_LIBRARY(ADM_internalVideoFilter STATIC ${ADM_internalVideoFilter_SRCS})

Modified: branches/avidemux_2.6_branch_mean/avidemux/ADM_editor/ADM_edit.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/ADM_editor/ADM_edit.cpp	2009-05-30 21:43:30 UTC (rev 4876)
+++ branches/avidemux_2.6_branch_mean/avidemux/ADM_editor/ADM_edit.cpp	2009-06-01 08:38:39 UTC (rev 4877)
@@ -585,8 +585,15 @@
   return 1;
 
 }
-
 /**
+    \fn getFrameIncrement
+*/
+uint64_t ADM_Composer::getFrameIncrement(void)
+{
+    if (!_nb_video) return 0;
+    return _videos[0].timeIncrementInUs;
+}
+/**
 	Set decoder settings (post process/swap u&v...)
 	for the segment referred by frame
 

Modified: branches/avidemux_2.6_branch_mean/avidemux/ADM_editor/ADM_edit.hxx
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/ADM_editor/ADM_edit.hxx	2009-05-30 21:43:30 UTC (rev 4876)
+++ branches/avidemux_2.6_branch_mean/avidemux/ADM_editor/ADM_edit.hxx	2009-06-01 08:38:39 UTC (rev 4877)
@@ -292,16 +292,18 @@
                     // /other audio stuff
 
 			     		uint8_t 			setDecodeParam( uint32_t frame );
+/**************************************** Video Info **************************/
 	 				AVIStreamHeader 	*getVideoStreamHeader(void ) ;
 	 				MainAVIHeader 		*getMainHeader(void );
 	 				ADM_BITMAPINFOHEADER 	*getBIH(void ) ;
 
 	  				uint8_t			getVideoInfo(aviInfo *info);
                     uint64_t        getVideoDuration(void);
+                    uint64_t        getFrameIncrement(void); /// Returns the # of us between 2 frames or the smaller value of them
 
+/**************************************** /Video Info **************************/					
 					
 					
-					
                   //
                   //	Coder/decoder
                   //

Modified: branches/avidemux_2.6_branch_mean/avidemux/ADM_encoder/ADM_externalEncoder.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/ADM_encoder/ADM_externalEncoder.cpp	2009-05-30 21:43:30 UTC (rev 4876)
+++ branches/avidemux_2.6_branch_mean/avidemux/ADM_encoder/ADM_externalEncoder.cpp	2009-06-01 08:38:39 UTC (rev 4877)
@@ -100,7 +100,7 @@
 		memcpy(out->data, params.encodedData, params.encodedDataSize);
 
 		out->len = params.encodedDataSize;
-		out->ptsFrame = params.ptsFrame;
+//		out->ptsFrame = params.ptsFrame;
 		out->out_quantizer = params.quantiser;
 
 		switch (params.frameType)

Modified: branches/avidemux_2.6_branch_mean/avidemux/ADM_encoder/adm_encCopy.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/ADM_encoder/adm_encCopy.cpp	2009-05-30 21:43:30 UTC (rev 4876)
+++ branches/avidemux_2.6_branch_mean/avidemux/ADM_encoder/adm_encCopy.cpp	2009-06-01 08:38:39 UTC (rev 4877)
@@ -132,7 +132,7 @@
 {
   uint8_t ret = 0;
   uint8_t seq;
-  out->dtsFrame = frame;
+//  out->dtsFrame = frame;
   
   if (frame >= _total)
     {
@@ -154,7 +154,7 @@
         out->ptsFrame = frame+video_body->ptsDtsDelta(frameStart+frame);
       }else
 #endif
-        out->ptsFrame = frame;
+//        out->ptsFrame = frame;
       return ret;
     }
   // it has PTS/DTS stuff so we need to reorder it
@@ -174,7 +174,7 @@
           out->len=img.dataLength;
           out->flags=img.flags;
           _lastIPFrameSent = forward;
-          out->ptsFrame = forward - _frameStart;
+//          out->ptsFrame = forward - _frameStart;
         }
     else
         {
@@ -185,7 +185,7 @@
             ret =video_body->getFrame (_frameStart + frame - 1, &img,&seq);
             out->len=img.dataLength;
             out->flags=img.flags;
-            out->ptsFrame = frame - 1;
+//            out->ptsFrame = frame - 1;
         }
     }
   else	     // it is not a B frame and we have nothing on hold, sent it..
@@ -198,7 +198,7 @@
             ret=video_body->getFrame (_frameStart+frame - 1,&img,&seq);
             out->len=img.dataLength;
             out->flags=img.flags;
-            out->ptsFrame  = frame - 1;
+//            out->ptsFrame  = frame - 1;
 
         }
       else
@@ -208,7 +208,7 @@
         ret=video_body->getFrame (_frameStart+frame, &img,&seq);
         out->len=img.dataLength;
         out->flags=img.flags;
-        out->ptsFrame  = frame;
+//        out->ptsFrame  = frame;
 
 	}
     }

Modified: branches/avidemux_2.6_branch_mean/avidemux/ADM_encoder/adm_encRequant.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/ADM_encoder/adm_encRequant.cpp	2009-05-30 21:43:30 UTC (rev 4876)
+++ branches/avidemux_2.6_branch_mean/avidemux/ADM_encoder/adm_encRequant.cpp	2009-06-01 08:38:39 UTC (rev 4877)
@@ -157,7 +157,7 @@
 EncoderRequant::encode (uint32_t frame, ADMBitstream *out)
 {
   uint8_t ret = 0;
-  out->dtsFrame = frame;
+//  out->dtsFrame = frame;
 
   if (frame >= _total)
     {
@@ -174,7 +174,7 @@
     {
 
           ret =code(_frameStart + frame, out->data, &out->len);
-          out->ptsFrame = frame;
+//          out->ptsFrame = frame;
           return ret;
     }
   // it has PTS/DTS stuff so we need to reorder it
@@ -193,7 +193,7 @@
           ret =code(forward, out->data, &out->len);
           //ret = video_body->getRaw (forward, out->data, &out->len);
           _lastIPFrameSent = forward;
-          out->ptsFrame = forward - _frameStart;
+//          out->ptsFrame = forward - _frameStart;
         }
     else
         {
@@ -204,7 +204,7 @@
             ret =code(_frameStart + frame - 1, out->data, &out->len);
 //             ret =video_body->getFrameNoAlloc (_frameStart + frame - 1, out->data,
 //                                               &out->len,&out->flags);
-            out->ptsFrame = frame - 1;
+//            out->ptsFrame = frame - 1;
         }
     }
   else	     // it is not a B frame and we have nothing on hold, sent it..
@@ -216,7 +216,7 @@
                     _frameStart + frame - 1);
             //ret=video_body->getFrameNoAlloc (_frameStart+frame - 1,out->data,&out->len,&out->flags);
             ret =code(_frameStart + frame - 1, out->data, &out->len);
-            out->ptsFrame  = frame - 1;
+//            out->ptsFrame  = frame - 1;
 
         }
       else
@@ -225,7 +225,7 @@
                     _lastIPFrameSent);
             ret =code(_frameStart + frame , out->data, &out->len);
               //  ret=video_body->getFrameNoAlloc (_frameStart+frame, out->data,&out->len,&out->flags);
-            out->ptsFrame  = frame;
+//            out->ptsFrame  = frame;
             if(!frame) // First frame ?
             {
                   // It does not start by a seqstart, add it if possible

Modified: branches/avidemux_2.6_branch_mean/avidemux/ADM_muxerGate/include/ADM_videoCopy.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/ADM_muxerGate/include/ADM_videoCopy.h	2009-05-30 21:43:30 UTC (rev 4876)
+++ branches/avidemux_2.6_branch_mean/avidemux/ADM_muxerGate/include/ADM_videoCopy.h	2009-06-01 08:38:39 UTC (rev 4877)
@@ -9,6 +9,7 @@
 
 */
 #include "ADM_compressedImage.h"
+
 class ADM_videoStreamCopy: public ADM_videoStream
 {
 protected:
@@ -24,4 +25,5 @@
 virtual     bool     providePts(void) {return false;}
 virtual     uint64_t getVideoDuration(void);
 };
+
 #endif

Copied: branches/avidemux_2.6_branch_mean/avidemux/ADM_muxerGate/include/ADM_videoProcess.h (from rev 4875, branches/avidemux_2.6_branch_mean/avidemux/ADM_muxerGate/include/ADM_videoCopy.h)
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/ADM_muxerGate/include/ADM_videoCopy.h	2009-05-30 15:46:29 UTC (rev 4875)
+++ branches/avidemux_2.6_branch_mean/avidemux/ADM_muxerGate/include/ADM_videoProcess.h	2009-06-01 08:38:39 UTC (rev 4877)
@@ -0,0 +1,35 @@
+/**
+
+*/
+#ifndef ADM_VIDEOPROCESS_H
+#define ADM_VIDEOPROCESS_H
+#include "ADM_muxer.h"
+/**
+    \class ADM_videoStream
+
+*/
+#include "ADM_compressedImage.h"
+#include "ADM_coreVideoEncoder.h"
+/**
+    \class ADM_videoStreamProcess
+    \brief Wrapper around encoder
+
+*/
+class ADM_videoStreamProcess: public ADM_videoStream
+{
+protected:
+            
+            ADMBitstream         *bitstream;
+            ADM_coreVideoEncoder *encoder;
+public:
+             ADM_videoStreamProcess(ADM_coreVideoEncoder *encoder);
+    virtual ~ADM_videoStreamProcess();
+
+virtual     bool     getPacket(uint32_t *len, uint8_t *data, uint32_t maxLen,uint64_t *pts,uint64_t *dts,
+                                    uint32_t *flags);
+virtual     bool     getExtraData(uint32_t *extraLen, uint8_t **extraData) ;
+virtual     bool     providePts(void) {return false;}
+virtual     uint64_t getVideoDuration(void);
+};
+
+#endif

Added: branches/avidemux_2.6_branch_mean/avidemux/ADM_muxerGate/src/ADM_videoProcess.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/ADM_muxerGate/src/ADM_videoProcess.cpp	2009-05-30 21:43:30 UTC (rev 4876)
+++ branches/avidemux_2.6_branch_mean/avidemux/ADM_muxerGate/src/ADM_videoProcess.cpp	2009-06-01 08:38:39 UTC (rev 4877)
@@ -0,0 +1,73 @@
+/**
+    \file ADM_videoProcess
+    \brief Wrapper around encoders
+    (c) Mean 2008/GPLv2
+
+*/
+
+#include "ADM_default.h"
+#include "ADM_videoProcess.h"
+#include "fourcc.h"
+#include "ADM_bitstream.h"
+/**
+    \fn ADM_videoStreamProcess
+*/
+ADM_videoStreamProcess::ADM_videoStreamProcess(ADM_coreVideoEncoder *encoder)
+{
+    this->encoder=encoder;
+    
+
+    width=encoder->getWidth();
+    height=encoder->getHeight();
+    fourCC=fourCC::get((uint8_t *)encoder->getFCCHandler());
+    float f=encoder->getFrameIncrement();
+    if(f) f=1000000000./f;
+        else f=25000;
+    averageFps1000=(uint32_t)f;
+    isCFR=false;
+    bitstream=new ADMBitstream(width*height*4);
+}
+/**
+    \fn ADM_videoStreamProcess
+*/
+ADM_videoStreamProcess::~ADM_videoStreamProcess()
+{
+    if(bitstream)
+        delete bitstream;
+    bitstream=NULL;
+}
+/**
+    \fn getExtraData
+*/
+bool     ADM_videoStreamProcess::getExtraData(uint32_t *extraLen, uint8_t **extraData)
+{
+
+  return encoder->getExtraData(extraLen,extraData);
+}
+ 
+/**
+    \fn getPacket
+*/
+bool  ADM_videoStreamProcess::getPacket(uint32_t *len, uint8_t *data, uint32_t maxLen,
+                    uint64_t *pts,uint64_t *dts,
+                    uint32_t *flags)
+{
+    if(false==encoder->encode(bitstream)) return false;
+    ADM_assert(bitstream->len<maxLen);
+    memcpy(data,bitstream->data,bitstream->len);
+    *len=bitstream->len;
+    *pts=bitstream->pts;
+    *dts=bitstream->dts;
+    *flags=bitstream->flags;
+    return true;
+}
+/**
+    \fn getVideoDuration
+*/
+uint64_t        ADM_videoStreamProcess::getVideoDuration(void)
+{
+    return encoder->getTotalDuration();
+
+}
+// EOF
+     

Modified: branches/avidemux_2.6_branch_mean/avidemux/ADM_muxerGate/src/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/ADM_muxerGate/src/CMakeLists.txt	2009-05-30 21:43:30 UTC (rev 4876)
+++ branches/avidemux_2.6_branch_mean/avidemux/ADM_muxerGate/src/CMakeLists.txt	2009-06-01 08:38:39 UTC (rev 4877)
@@ -1,5 +1,6 @@
 SET(ADM_muxerGate_SRCS
 ADM_videoCopy.cpp
+ADM_videoProcess.cpp
 )
 include_directories(../include)
 ADD_LIBRARY(ADM_muxerGate STATIC ${ADM_muxerGate_SRCS})

Modified: branches/avidemux_2.6_branch_mean/avidemux/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/CMakeLists.txt	2009-05-30 21:43:30 UTC (rev 4876)
+++ branches/avidemux_2.6_branch_mean/avidemux/CMakeLists.txt	2009-06-01 08:38:39 UTC (rev 4877)
@@ -82,6 +82,7 @@
         ADM_coreUtils
         ADM_coreMuxer
         ADM_coreVideoFilter
+        ADM_coreVideoEncoder
 )
 FOREACH(_current ${ADM_CORES})
         INCLUDE_DIRECTORIES(${_current}/include)
@@ -202,7 +203,10 @@
 	ADD_SUBDIRECTORY(${_current})
 	ADD_LIB_ALL_TARGETS(${_current})
 ENDFOREACH(_current ${ADM_SUBDIR})
-
+########################################################
+# The part of the video filter that is inside avidemux
+########################################################
+ADD_LIB_ALL_TARGETS(ADM_internalVideoFilter)
 ###########################################
 # Construct ADM_UIs
 ###########################################
@@ -419,7 +423,7 @@
 # OS Specific
 ###########################################
 IF (WIN32)
-	ADD_ADMLIB_ALL_TARGETS(ADM_osSupport)
+	ADD_LIB_ALL_TARGETS(ADM_osSupport)
 
 	IF (MINGW)
 		ADD_LIB_ALL_TARGETS(-mno-cygwin)



From mean at mail.berlios.de  Mon Jun  1 10:38:44 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Mon, 1 Jun 2009 10:38:44 +0200
Subject: [Avidemux-svn-commit] r4878 - in
	branches/avidemux_2.6_branch_mean/avidemux: .
	ADM_coreVideoEncoder/include ADM_coreVideoEncoder/src
	ADM_coreVideoFilter/include ADM_coreVideoFilter/src
	ADM_muxerGate/include ADM_muxerGate/src
Message-ID: <200906010838.n518ciH5006873@sheep.berlios.de>

Author: mean
Date: 2009-06-01 10:38:43 +0200 (Mon, 01 Jun 2009)
New Revision: 4878

Added:
   branches/avidemux_2.6_branch_mean/avidemux/ADM_coreVideoFilter/include/ADM_filterChain.h
   branches/avidemux_2.6_branch_mean/avidemux/ADM_coreVideoFilter/src/ADM_filterChain.cpp
   branches/avidemux_2.6_branch_mean/avidemux/ADM_muxerGate/src/ADM_createStreams.cpp
Modified:
   branches/avidemux_2.6_branch_mean/avidemux/ADM_coreVideoEncoder/include/ADM_yv12Encoder.h
   branches/avidemux_2.6_branch_mean/avidemux/ADM_coreVideoEncoder/src/ADM_VideoEncoders.cpp
   branches/avidemux_2.6_branch_mean/avidemux/ADM_coreVideoFilter/src/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux/ADM_muxerGate/include/ADM_videoProcess.h
   branches/avidemux_2.6_branch_mean/avidemux/ADM_muxerGate/src/ADM_videoCopy.cpp
   branches/avidemux_2.6_branch_mean/avidemux/ADM_muxerGate/src/ADM_videoProcess.cpp
   branches/avidemux_2.6_branch_mean/avidemux/ADM_muxerGate/src/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux/gui_savenew.cpp
Log:
[Encoder/filter] More skeleton

Modified: branches/avidemux_2.6_branch_mean/avidemux/ADM_coreVideoEncoder/include/ADM_yv12Encoder.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/ADM_coreVideoEncoder/include/ADM_yv12Encoder.h	2009-06-01 08:38:39 UTC (rev 4877)
+++ branches/avidemux_2.6_branch_mean/avidemux/ADM_coreVideoEncoder/include/ADM_yv12Encoder.h	2009-06-01 08:38:43 UTC (rev 4878)
@@ -34,13 +34,13 @@
                             ADM_yv12Encoder(ADM_coreVideoFilter *src);
                             ~ADM_yv12Encoder();
 virtual        bool         encode (ADMBitstream * out);
-virtual        const char *getDisplayName(void)=0;       /// E.g. FFmpeg mpeg4      
-virtual        const char *getCodecName(void)=0;         /// aka fourcc
-virtual        const char *getFCCHandler(void)=0;        /// fourcc 2, needed to build AVI header
+virtual        const char *getDisplayName(void);       /// E.g. FFmpeg mpeg4      
+virtual        const char *getCodecName(void);         /// aka fourcc
+virtual        const char *getFCCHandler(void);        /// fourcc 2, needed to build AVI header
 
-virtual        bool        configure(void)=0;           /// Pop-up UI
-virtual        bool        getConfiguration(uint32_t *l,uint8_t **d)=0; /// Get current conf to save it
-virtual        bool        setConfiguration(uint32_t l,uint8_t *d)=0;   /// Set conf, call it just after creation
+virtual        bool        configure(void);           /// Pop-up UI
+virtual        bool        getConfiguration(uint32_t *l,uint8_t **d); /// Get current conf to save it
+virtual        bool        setConfiguration(uint32_t l,uint8_t *d);   /// Set conf, call it just after creation
 };
 
 

Modified: branches/avidemux_2.6_branch_mean/avidemux/ADM_coreVideoEncoder/src/ADM_VideoEncoders.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/ADM_coreVideoEncoder/src/ADM_VideoEncoders.cpp	2009-06-01 08:38:39 UTC (rev 4877)
+++ branches/avidemux_2.6_branch_mean/avidemux/ADM_coreVideoEncoder/src/ADM_VideoEncoders.cpp	2009-06-01 08:38:43 UTC (rev 4878)
@@ -16,7 +16,16 @@
  *                                                                         *
  ***************************************************************************/
 #include "ADM_default.h"
-#include "ADM_coreVideoEncoder.cpp"
+#include "ADM_coreVideoEncoder.h"
 #include "ADM_yv12Encoder.h"
-
-
+#include "ADM_filterChain.h"
+/**
+    \fn createVideoEncoder
+*/
+ADM_coreVideoEncoder *createVideoEncoder(ADM_coreVideoFilter *chain)
+{
+    // 1- Create encoder itself...
+    ADM_yv12Encoder *yv=new ADM_yv12Encoder(chain);
+    return yv;
+}
+// EOF

Copied: branches/avidemux_2.6_branch_mean/avidemux/ADM_coreVideoFilter/include/ADM_filterChain.h (from rev 4877, branches/avidemux_2.6_branch_mean/avidemux/ADM_coreVideoEncoder/src/ADM_VideoEncoders.cpp)
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/ADM_coreVideoEncoder/src/ADM_VideoEncoders.cpp	2009-06-01 08:38:39 UTC (rev 4877)
+++ branches/avidemux_2.6_branch_mean/avidemux/ADM_coreVideoFilter/include/ADM_filterChain.h	2009-06-01 08:38:43 UTC (rev 4878)
@@ -0,0 +1,30 @@
+/***************************************************************************
+                          \fn ADM_filterChain.h
+                          \brief Base class for Video Filters
+                           (c) Mean 2009
+
+
+
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+
+#ifndef ADM_filterChain_H
+#define ADM_filterChain_H
+#include "ADM_coreVideoFilter.h"
+#include <vector>
+typedef std::vector <ADM_coreVideoFilter *>ADM_videoFilterChain;
+
+
+ADM_videoFilterChain *createVideoFilterChain(uint64_t startAt,uint64_t endAt);
+bool                 destroyVideoFilterChain(ADM_videoFilterChain *chain);
+
+
+#endif
\ No newline at end of file

Added: branches/avidemux_2.6_branch_mean/avidemux/ADM_coreVideoFilter/src/ADM_filterChain.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/ADM_coreVideoFilter/src/ADM_filterChain.cpp	2009-06-01 08:38:39 UTC (rev 4877)
+++ branches/avidemux_2.6_branch_mean/avidemux/ADM_coreVideoFilter/src/ADM_filterChain.cpp	2009-06-01 08:38:43 UTC (rev 4878)
@@ -0,0 +1,50 @@
+/***************************************************************************
+                          \fn ADM_filterChain.cpp
+                          \brief Base class for Video Filters
+                           (c) Mean 2009
+
+
+
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+#include "ADM_default.h"
+#include "ADM_coreVideoFilter.h"
+#include "ADM_filterChain.h"
+#include "ADM_videoFilterBridge.h"
+/**
+    \fn createVideoFilterChain
+    \brief Create a filter chain
+*/
+ADM_videoFilterChain *createVideoFilterChain(uint64_t startAt,uint64_t endAt)
+{
+    ADM_videoFilterChain *chain=new ADM_videoFilterChain;
+    // 1- Add bridge always # 1
+    ADM_videoFilterBridge *bridge=new ADM_videoFilterBridge(startAt,endAt);
+    chain->push_back(bridge);
+    return chain;
+}
+/**
+        \fn destroyVideoFilterChain
+        \brief Destroy a filter chain
+*/
+bool                 destroyVideoFilterChain(ADM_videoFilterChain *chain)
+{
+    ADM_assert(chain->size());
+    for(int i=0;i<chain->size();i++)
+    {
+        ADM_coreVideoFilter *filter=(*chain)[i];
+        delete filter;
+    }
+    chain->erase(chain->begin(),chain->end()-1);
+    return true;
+}
+
+// EOF

Modified: branches/avidemux_2.6_branch_mean/avidemux/ADM_coreVideoFilter/src/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/ADM_coreVideoFilter/src/CMakeLists.txt	2009-06-01 08:38:39 UTC (rev 4877)
+++ branches/avidemux_2.6_branch_mean/avidemux/ADM_coreVideoFilter/src/CMakeLists.txt	2009-06-01 08:38:43 UTC (rev 4878)
@@ -9,5 +9,6 @@
 
 SET(ADM_internalVideoFilter_SRCS 
 	ADM_videoFilterBridge.cpp
+        ADM_filterChain.cpp
 )
 ADD_LIBRARY(ADM_internalVideoFilter STATIC ${ADM_internalVideoFilter_SRCS})

Modified: branches/avidemux_2.6_branch_mean/avidemux/ADM_muxerGate/include/ADM_videoProcess.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/ADM_muxerGate/include/ADM_videoProcess.h	2009-06-01 08:38:39 UTC (rev 4877)
+++ branches/avidemux_2.6_branch_mean/avidemux/ADM_muxerGate/include/ADM_videoProcess.h	2009-06-01 08:38:43 UTC (rev 4878)
@@ -1,6 +1,16 @@
 /**
+    \file ADM_videoProcess.h
+    \brief Wrap an encoder as a VideoStream
+*/
 
-*/
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
 #ifndef ADM_VIDEOPROCESS_H
 #define ADM_VIDEOPROCESS_H
 #include "ADM_muxer.h"
@@ -13,6 +23,7 @@
 /**
     \class ADM_videoStreamProcess
     \brief Wrapper around encoder
+    @warning After creation, the VideoStream becomes the owner of the encoder and it will deleted here
 
 */
 class ADM_videoStreamProcess: public ADM_videoStream

Added: branches/avidemux_2.6_branch_mean/avidemux/ADM_muxerGate/src/ADM_createStreams.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/ADM_muxerGate/src/ADM_createStreams.cpp	2009-06-01 08:38:39 UTC (rev 4877)
+++ branches/avidemux_2.6_branch_mean/avidemux/ADM_muxerGate/src/ADM_createStreams.cpp	2009-06-01 08:38:43 UTC (rev 4878)
@@ -0,0 +1,45 @@
+/***************************************************************************
+                          \fn ADM_createStreams.cpp
+                          \brief Take a filterChain & create a stream with it
+                           (c) Mean 2009
+
+
+
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+#include "ADM_default.h"
+#include "ADM_coreVideoFilter.h"
+#include "ADM_filterChain.h"
+#include "ADM_coreVideoEncoder.h"
+#include "ADM_muxer.h"
+#include "ADM_videoProcess.h"
+
+extern ADM_coreVideoEncoder *createVideoEncoder(ADM_coreVideoFilter *chain);
+/**
+    \fn createVideoEncoder
+    \brief Create encoder then VideoStream from filterChain
+    @return created VideoStream
+*/
+ADM_videoStream  *createVideoEncoder(ADM_videoFilterChain *chain)
+{
+    int sz=chain->size();
+    ADM_assert(sz);
+    ADM_coreVideoFilter *filter=(*chain)[sz-1];
+    ADM_assert(filter);
+    ADM_coreVideoEncoder *encoder=createVideoEncoder(filter);
+    if(!encoder)
+    {
+        printf("[createVideoEncoder] Cannot create encoder\n");
+        return NULL;
+    }
+    ADM_videoStreamProcess *stream=new ADM_videoStreamProcess(encoder);
+    return stream;
+}
\ No newline at end of file

Modified: branches/avidemux_2.6_branch_mean/avidemux/ADM_muxerGate/src/ADM_videoCopy.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/ADM_muxerGate/src/ADM_videoCopy.cpp	2009-06-01 08:38:39 UTC (rev 4877)
+++ branches/avidemux_2.6_branch_mean/avidemux/ADM_muxerGate/src/ADM_videoCopy.cpp	2009-06-01 08:38:43 UTC (rev 4878)
@@ -5,6 +5,14 @@
 
 */
 
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
 #include "ADM_default.h"
 #include "ADM_videoCopy.h"
 #include "ADM_editor/ADM_edit.hxx"

Modified: branches/avidemux_2.6_branch_mean/avidemux/ADM_muxerGate/src/ADM_videoProcess.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/ADM_muxerGate/src/ADM_videoProcess.cpp	2009-06-01 08:38:39 UTC (rev 4877)
+++ branches/avidemux_2.6_branch_mean/avidemux/ADM_muxerGate/src/ADM_videoProcess.cpp	2009-06-01 08:38:43 UTC (rev 4878)
@@ -5,6 +5,14 @@
 
 */
 
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
 #include "ADM_default.h"
 #include "ADM_videoProcess.h"
 #include "fourcc.h"
@@ -35,6 +43,8 @@
     if(bitstream)
         delete bitstream;
     bitstream=NULL;
+    if(encoder) delete encoder;
+    encoder=NULL;
 }
 /**
     \fn getExtraData

Modified: branches/avidemux_2.6_branch_mean/avidemux/ADM_muxerGate/src/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/ADM_muxerGate/src/CMakeLists.txt	2009-06-01 08:38:39 UTC (rev 4877)
+++ branches/avidemux_2.6_branch_mean/avidemux/ADM_muxerGate/src/CMakeLists.txt	2009-06-01 08:38:43 UTC (rev 4878)
@@ -1,6 +1,7 @@
 SET(ADM_muxerGate_SRCS
 ADM_videoCopy.cpp
 ADM_videoProcess.cpp
+ADM_createStreams.cpp
 )
 include_directories(../include)
 ADD_LIBRARY(ADM_muxerGate STATIC ${ADM_muxerGate_SRCS})

Modified: branches/avidemux_2.6_branch_mean/avidemux/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/CMakeLists.txt	2009-06-01 08:38:39 UTC (rev 4877)
+++ branches/avidemux_2.6_branch_mean/avidemux/CMakeLists.txt	2009-06-01 08:38:43 UTC (rev 4878)
@@ -207,6 +207,7 @@
 # The part of the video filter that is inside avidemux
 ########################################################
 ADD_LIB_ALL_TARGETS(ADM_internalVideoFilter)
+ADD_LIB_ALL_TARGETS(ADM_internalVideoEncoder)
 ###########################################
 # Construct ADM_UIs
 ###########################################

Modified: branches/avidemux_2.6_branch_mean/avidemux/gui_savenew.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/gui_savenew.cpp	2009-06-01 08:38:39 UTC (rev 4877)
+++ branches/avidemux_2.6_branch_mean/avidemux/gui_savenew.cpp	2009-06-01 08:38:43 UTC (rev 4878)
@@ -36,32 +36,29 @@
 #include "ADM_userInterfaces/ADM_commonUI/GUI_ui.h"
 #include "ADM_muxer.h"
 #include "ADM_videoCopy.h"
+#include "ADM_filterChain.h"
 
-static uint8_t  A_SaveAudioNVideo(const char *name);
- extern int A_SaveUnpackedVop(const char *name);
- extern uint8_t oplug_dummy(const char *name);
- extern int A_SavePackedVop(const char *name);
- extern uint8_t ogmSave(const char *name);
- extern uint8_t ADM_saveRaw(const char *name);
- uint8_t A_SaveAudioDualAudio(const char *name);
- extern uint8_t mpeg_passthrough(const char *name,ADM_OUT_FORMAT format);
-ADM_muxer *ADM_MuxerSpawnFromIndex(int index);
-
-extern ADM_audioStream *createEncodingStream(uint64_t startTime,int32_t shift);
-
+ADM_muxer               *ADM_MuxerSpawnFromIndex(int index);
+extern ADM_audioStream  *createEncodingStream(uint64_t startTime,int32_t shift);
+extern ADM_videoStream  *createVideoEncoder(ADM_videoFilterChain *chain);
 /**
     \fn A_Save
+    \brief Instantiate & initiate streams to feed muxer
 */
 int A_Save(const char *name)
 {
     int ret=1;
     ADM_muxer *muxer=NULL;
     int index=UI_GetCurrentFormat();
+    bool process=true;
+    ADM_videoFilterChain *chain=NULL;
+    
     if(!(muxer=ADM_MuxerSpawnFromIndex(index)))
     {
         GUI_Error_HIG("Muxer","Cannot instantiante muxer");
         return 0;
     }
+
     // Audio Stream ?
     ADM_audioStream *audio=NULL;
     int nbAStream=1;
@@ -72,9 +69,32 @@
         audio=NULL;
         nbAStream=0; // FIXME
     }
-    
-    // Video Stream ?
-    ADM_videoStream *video=new ADM_videoStreamCopy();
+    ADM_videoStream *video=NULL;
+    // Video Stream 
+    if(process) // Copy
+    {
+        video=new ADM_videoStreamCopy();
+    }else
+    {
+        // 1- create filter chain
+        chain=createVideoFilterChain(0,10000000000);
+        if(!chain)
+        {
+                GUI_Error_HIG("Video","Cannot instantiante video Chain");
+                delete muxer;
+                return 0;
+        }
+        // 2- Create Encoder
+        video=createVideoEncoder(chain);
+        if(!video)
+        {
+                GUI_Error_HIG("Video","Cannot create encoder");
+                destroyVideoFilterChain(chain);
+                delete muxer;
+                return 0;
+        }
+        
+    }
     //
     ADM_audioStream *astreams[1];
     if (!audioProcessMode())
@@ -87,8 +107,6 @@
             // Access..
             ADM_audioStream *access=createEncodingStream(0,0); // FIXME LEAK
             astreams[0]=access;
-
-            
         }
     }
     if(!muxer->open(name,video,nbAStream,astreams))
@@ -105,315 +123,21 @@
     if(muxer) delete muxer;
     if (!audioProcessMode() && astreams[0])
         delete astreams[0];
+    delete video;
     return ret;
 }
-#if 0
-uint32_t end;
-int ret=0;
-	// depending on the type we save a avi, a mpeg or a XVCD
-	CodecFamilty family;
-	family= videoCodecGetFamily();
-	// in case of copy mode, we stick to avi file format
-	if(!videoProcessMode())
-	{
-		family=CodecFamilyAVI;
-		if( UI_GetCurrentFormat()==ADM_PS ||UI_GetCurrentFormat()==ADM_TS )  // exception
-		{
-			family=CodecFamilyMpeg;
-		}
-                        
-	}
-        else
-        {
-                if(UI_GetCurrentFormat()==ADM_AVI_DUAL)
-                {
-                  GUI_Error_HIG(QT_TR_NOOP("Dual audio can only be used in copy mode"),QT_TR_NOOP( "Select Copy as the video codec."));
-                        return 0;
-                }
-        }
-	printf("**saving:**\n");
-	// Check if we need to do a sanity B frame check
-	if(!videoProcessMode())
-	{	
-		uint32_t pb;
-		end=avifileinfo->nb_frames;
-		// if the last frame is the last frame (!)
-		// we add one to keep it, else we systematically skip
-		// the last frame
-#if 0					
-		if(frameEnd==end-1) end=frameEnd+1;
-		else
-			end=frameEnd;
-
-		if(!video_body->sanityCheckRef(frameStart,end,&pb))
-		{
-			if(pb)
-			{
-				GUI_Error_HIG("Cannot save the file", "The video starts/ends with a lonely B-frame. Please remove it.");
-				return 0;
-			}
-			if(!GUI_Question("Warning !\n Bframe has lost its reference frame\nContinue ?"))
-				return 0;
-		}
-#endif
-		// Alter frameEnd so that it is not a B frame	
-		// as frameEnd -1 position	
-		uint32_t tgt=frameEnd;;
-		uint32_t flag=0,found=0;
-		
-		// need to do something ?
-		if(frameEnd>frameStart)
-		{
-			tgt=frameEnd;
-			if(tgt==end-1) tgt++;
-			video_body->getFlags(tgt-1,&flag);
-			if((frameEnd&AVI_B_FRAME))
-			{
-				printf("Last frame is a B frame, choosing better candidate\n");
-				 // The last real one is not a I/P Frame
-				 // Go forward or rewind
-				 if(tgt<end-1)
-				{	// Try next if possible
-					video_body->getFlags(tgt,&flag);
-					if(!(flag&AVI_B_FRAME))
-					{
-						printf("Taking next frame as last frame %lu\n",tgt+1);
-				 		frameEnd=tgt+1;
-				 		found=1;
-					}
-				}
-				if(!found) // next frame not possible, rewind
-				{
-					if(tgt>=end-2) tgt=end-2;
-					while(tgt>frameStart)
-					{
-						printf("Trying :%lu\n",tgt);
-						video_body->getFlags(tgt,&flag);
-						if(!(flag&AVI_B_FRAME))
-						{
-							printf("Taking previous frame as last frame %lu\n",tgt+1);
-				 			frameEnd=tgt+1;
-				 			found=1;
-							break;
-						}
-						else tgt--;
-					}
-				}
-				ADM_assert(found);
-			}
-		}
-		
-		
-		
-	}
-        printf("Output format:%d\n",UI_GetCurrentFormat());
-	switch(family)
-	{
-		case CodecFamilyAVI:
-					printf(" AVI family\n");
-					switch(UI_GetCurrentFormat())
-					{
-                        case ADM_AVI:
-								ret=A_SaveAudioNVideo(name);
-								break;
-#if 0
-						case ADM_DUMMY:
-					                            			ret=oplug_dummy(name);
-					                            			break;
-						case ADM_FLV:
-                            			ret=oplug_flv(name);
-                            			break;
-                        case ADM_MP4:
-                        case ADM_PSP:
-                        case ADM_MATROSKA:
-                        
-                                                    ret=oplug_mp4(name,UI_GetCurrentFormat());
-                                                    break;
-						
-						case ADM_OGM:
-//								ret=ogmSave(name);
-								break;
-						case ADM_ES:
-								ret=ADM_saveRaw(name);
-								break;
-						case ADM_AVI_DUAL:
-								ret=A_SaveAudioDualAudio(name);
-								break;
-                                                case ADM_AVI_PAK:
-								ret=A_SavePackedVop(name);
-								break;
-
-						case ADM_AVI_UNP:
-								ret=A_SaveUnpackedVop(name);
-								break;
-#endif
-						default:
-                                                  GUI_Error_HIG(QT_TR_NOOP("Incompatible output format"), NULL);
-					}
-					break;
-		case CodecFamilyMpeg:
-					printf(" MPEG family\n");
-					if(!videoProcessMode())
-					{
-						
-						printf("Using pass through\n");
-                                                switch(UI_GetCurrentFormat())
-                                                {
-                                                  case ADM_PS:
-                                                  case ADM_TS:
-						     //     ret=mpeg_passthrough(name,UI_GetCurrentFormat());
-                                                          break;
-                                                  default:
-                                                    GUI_Error_HIG(QT_TR_NOOP("Incompatible output format"), NULL);
-                                                }
-                                                break;
-                                        } // THERE IS NO BREAK HERE, NOT A MISTAKE!
-		case CodecFamilyXVCD:
-                    switch(UI_GetCurrentFormat())
-                    {
-                        case ADM_TS:
-                        case ADM_PS:
-                        case ADM_ES:
-                             //   ret=oplug_mpegff(name,UI_GetCurrentFormat());;
-                                break;
-                        default:
-                          GUI_Error_HIG(QT_TR_NOOP("Incompatible output format"), NULL);
-                    }
-                    break;
-                default:
-                            ADM_assert(0);
-                            return 0;
-        }
-        getFirstVideoFilter(0,avifileinfo->nb_frames);
-        return ret;
-#endif
-
+// Leftovers....
 uint8_t  A_SaveAudioDualAudio(const char *inname)
 {
-#if 0
-GenericAviSaveCopyDualAudio *nw;
-const char *name;
-uint8_t ret=0;
-
-		if(! secondaudiostream)
-		{
-                  GUI_Error_HIG(QT_TR_NOOP("There is no second track"), QT_TR_NOOP("Select a second audio track in the Audio menu."));
-				  	return 0;
-		}
-		if(!inname)
-                  GUI_FileSelWrite(QT_TR_NOOP("Select dual audio AVI to write"), (char**)& name);
-		else
-			name=inname;
-			
-		if(!name) return 0;
-
-//     		nw=new   GenericAviSaveCopyDualAudio(secondaudiostream);
-	//	ret=nw->saveAvi(name);
-      // 		delete nw;
-                return ret;
-#endif
 }
 //___________________________________
 int A_SaveUnpackedVop(const char *name)
 {
-#if 0
-  aviInfo info;
-GenericAviSave	*nw;
-int ret;
-
-	video_body->getVideoInfo(&info);
-	if( !isMpeg4Compatible(  info.fcc))
-	{
-          GUI_Error_HIG(QT_TR_NOOP("This cannot have packed VOP"),QT_TR_NOOP( "It is not MPEG-4 video. File will not be saved."));
-		return 0;
-        }
-	//
-	nw=new   GenericAviSaveCopyUnpack();
-	ret=nw->saveAvi(name);
-	delete nw;
-	return ret;
-#endif
 }
 int A_SavePackedVop(const char *name)
 {
-#if 0
-  aviInfo info;
-GenericAviSave	*nw;
-int ret;
-
-	video_body->getVideoInfo(&info);
-	if( !isMpeg4Compatible(  info.fcc))
-	{
-          GUI_Error_HIG(QT_TR_NOOP("This cannot have packed VOP"),QT_TR_NOOP( "It is not MPEG-4 video. File will not be saved."));
-		return 0;
-        }
-	//
-	nw=new   GenericAviSaveCopyPack();
-	ret=nw->saveAvi(name);
-	delete nw;
-	return ret;
-#endif
 }
 //___________________________________
 uint8_t  A_SaveAudioNVideo(const char *name)
 {
-#if 0
-     uint32_t needSmart=0,fl;
-     GenericAviSave	*nw=NULL;
-     aviInfo info;
-     uint8_t ret=0;
-
-     video_body->getVideoInfo(&info);
-
-     printf("\n video process mode : %d",videoProcessMode());
-     if (!videoProcessMode())
-     {
-          if(video_body->isMultiSeg()) needSmart=1;
-                  video_body->getFlags(frameStart,&fl);
-          if(!(fl&AVI_KEY_FRAME)) needSmart=1;
-
-          if(needSmart) printf("\n probably need smart copy mode\n");
-      
-          if( !isMpeg4Compatible(  info.fcc)
-                && !isMSMpeg4Compatible(info.fcc))
-             {
-                    printf("\n not encodable, cancelling smart mode\n");
-                    needSmart=0;
-               }
-
-
-               int value=video_body->getEnv(ENV_EDITOR_SMART);
-               nw=NULL;
-               if(needSmart)
-               {
-                  if(value)
-                  {
-                     nw=new   GenericAviSaveSmart(3);
-                  }
-                  else
-                  {
-                    if(GUI_Question(QT_TR_NOOP("You may need smart copy.\n Enable it ?")))
-                    {
-                        value=4;
-                        if( ! DIA_GetIntegerValue(&value, 2, 31, "_Q factor (set 4):",""))
-                                      return 0;
-                        nw=new   GenericAviSaveSmart(value);
-                    }
-                }
-               }
-              if(!nw)
-                    nw=new   GenericAviSaveCopy;
-               
-       }
-       else
-       {
-
-              printf("\n Process mode\n");
-              nw=new   GenericAviSaveProcess;
-        }
-     ret=nw->saveAvi(name);
-     delete nw;
-
-return ret;
-#endif
 }



From mean at mail.berlios.de  Mon Jun  1 10:38:46 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Mon, 1 Jun 2009 10:38:46 +0200
Subject: [Avidemux-svn-commit] r4879 -
	branches/avidemux_2.6_branch_mean/plugins/ADM_demuxers/MpegPS
Message-ID: <200906010838.n518ckkR006886@sheep.berlios.de>

Author: mean
Date: 2009-06-01 10:38:45 +0200 (Mon, 01 Jun 2009)
New Revision: 4879

Modified:
   branches/avidemux_2.6_branch_mean/plugins/ADM_demuxers/MpegPS/ADM_psReadIndex.cpp
Log:
[PS] Make index reading more robust

Modified: branches/avidemux_2.6_branch_mean/plugins/ADM_demuxers/MpegPS/ADM_psReadIndex.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/plugins/ADM_demuxers/MpegPS/ADM_psReadIndex.cpp	2009-06-01 08:38:43 UTC (rev 4878)
+++ branches/avidemux_2.6_branch_mean/plugins/ADM_demuxers/MpegPS/ADM_psReadIndex.cpp	2009-06-01 08:38:45 UTC (rev 4879)
@@ -113,11 +113,12 @@
                 char *next;
                 uint32_t len;
                 type=*cur;
-                if(type==0x0a || type==0x0d) break;
+                if(type==0x0a || type==0x0d || !type) break;
                 cur++;
                 if(*(cur)!=':')
                 {
                     printf("[psDemux]  instead of : (%c %x %x):\n",*cur,*(cur-1),*cur);
+                    break;
                 }
                 *cur++;
                 next=strstr(start," ");



From mean at mail.berlios.de  Mon Jun  1 10:38:49 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Mon, 1 Jun 2009 10:38:49 +0200
Subject: [Avidemux-svn-commit] r4880 - in
	branches/avidemux_2.6_branch_mean/avidemux: . ADM_codecs
	ADM_coreVideoEncoder/include ADM_coreVideoEncoder/src
	ADM_muxerGate/include ADM_muxerGate/src
Message-ID: <200906010838.n518cnBD006899@sheep.berlios.de>

Author: mean
Date: 2009-06-01 10:38:48 +0200 (Mon, 01 Jun 2009)
New Revision: 4880

Modified:
   branches/avidemux_2.6_branch_mean/avidemux/ADM_codecs/ADM_codec.h
   branches/avidemux_2.6_branch_mean/avidemux/ADM_codecs/ADM_codecs.cpp
   branches/avidemux_2.6_branch_mean/avidemux/ADM_coreVideoEncoder/include/ADM_coreVideoEncoder.h
   branches/avidemux_2.6_branch_mean/avidemux/ADM_coreVideoEncoder/src/ADM_yv12Encoder.cpp
   branches/avidemux_2.6_branch_mean/avidemux/ADM_muxerGate/include/ADM_videoProcess.h
   branches/avidemux_2.6_branch_mean/avidemux/ADM_muxerGate/src/ADM_videoProcess.cpp
   branches/avidemux_2.6_branch_mean/avidemux/gui_savenew.cpp
Log:
[Encoder] Dummy YV12 encoder

Modified: branches/avidemux_2.6_branch_mean/avidemux/ADM_codecs/ADM_codec.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/ADM_codecs/ADM_codec.h	2009-06-01 08:38:45 UTC (rev 4879)
+++ branches/avidemux_2.6_branch_mean/avidemux/ADM_codecs/ADM_codec.h	2009-06-01 08:38:48 UTC (rev 4880)
@@ -32,6 +32,10 @@
 
 #include "ADM_bitstream.h"
 #include "ADM_compressedImage.h"
+/**
+    \class decoders
+    \brief base class for video decoders
+*/
 class decoders
 {
 protected:

Modified: branches/avidemux_2.6_branch_mean/avidemux/ADM_codecs/ADM_codecs.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/ADM_codecs/ADM_codecs.cpp	2009-06-01 08:38:45 UTC (rev 4879)
+++ branches/avidemux_2.6_branch_mean/avidemux/ADM_codecs/ADM_codecs.cpp	2009-06-01 08:38:48 UTC (rev 4880)
@@ -88,8 +88,11 @@
   return (decoders *) (new decoderFFH264 (w, h, extraLen, extraData,0));
 
 }
-decoders *
-getDecoder (uint32_t fcc, uint32_t w, uint32_t h, uint32_t extraLen,
+/**
+    \fn getDecoder
+    \brief returns the correct decoder for a stream
+*/
+decoders *getDecoder (uint32_t fcc, uint32_t w, uint32_t h, uint32_t extraLen,
 	    uint8_t * extraData,uint32_t bpp)
 {
   printf("\nSearching decoder (%d x %d, extradataSize:%d)...\n",w,h,extraLen);
@@ -240,6 +243,7 @@
 
     }
   if (fourCC::check (fcc, (uint8_t *) "YV12")
+      || fourCC::check (fcc, (uint8_t *) "yv12")
       || fourCC::check (fcc, (uint8_t *) "I420"))
     {
       printf ("\n using null codec\n");

Modified: branches/avidemux_2.6_branch_mean/avidemux/ADM_coreVideoEncoder/include/ADM_coreVideoEncoder.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/ADM_coreVideoEncoder/include/ADM_coreVideoEncoder.h	2009-06-01 08:38:45 UTC (rev 4879)
+++ branches/avidemux_2.6_branch_mean/avidemux/ADM_coreVideoEncoder/include/ADM_coreVideoEncoder.h	2009-06-01 08:38:48 UTC (rev 4880)
@@ -20,7 +20,7 @@
 
 #include "ADM_coreVideoFilter.h"
 #include "ADM_bitstream.h"
-
+#include "ADM_frameType.h"
 typedef enum
 {
     ADM_ENCODER_OPTION_MOV_MODE=1

Modified: branches/avidemux_2.6_branch_mean/avidemux/ADM_coreVideoEncoder/src/ADM_yv12Encoder.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/ADM_coreVideoEncoder/src/ADM_yv12Encoder.cpp	2009-06-01 08:38:45 UTC (rev 4879)
+++ branches/avidemux_2.6_branch_mean/avidemux/ADM_coreVideoEncoder/src/ADM_yv12Encoder.cpp	2009-06-01 08:38:48 UTC (rev 4880)
@@ -100,8 +100,11 @@
         printf("[YV12] Cannot get next image\n");
         return false;
     }
+    ADM_assert(out->bufferSize>plane);
     memcpy(out->data,image->data,plane);
+    out->len=plane;
     out->pts=out->dts=image->Pts;
+    out->flags=AVI_KEY_FRAME;
     return true;
 }
 

Modified: branches/avidemux_2.6_branch_mean/avidemux/ADM_muxerGate/include/ADM_videoProcess.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/ADM_muxerGate/include/ADM_videoProcess.h	2009-06-01 08:38:45 UTC (rev 4879)
+++ branches/avidemux_2.6_branch_mean/avidemux/ADM_muxerGate/include/ADM_videoProcess.h	2009-06-01 08:38:48 UTC (rev 4880)
@@ -32,6 +32,7 @@
             
             ADMBitstream         *bitstream;
             ADM_coreVideoEncoder *encoder;
+            uint8_t              *data;
 public:
              ADM_videoStreamProcess(ADM_coreVideoEncoder *encoder);
     virtual ~ADM_videoStreamProcess();

Modified: branches/avidemux_2.6_branch_mean/avidemux/ADM_muxerGate/src/ADM_videoProcess.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/ADM_muxerGate/src/ADM_videoProcess.cpp	2009-06-01 08:38:45 UTC (rev 4879)
+++ branches/avidemux_2.6_branch_mean/avidemux/ADM_muxerGate/src/ADM_videoProcess.cpp	2009-06-01 08:38:48 UTC (rev 4880)
@@ -23,17 +23,21 @@
 ADM_videoStreamProcess::ADM_videoStreamProcess(ADM_coreVideoEncoder *encoder)
 {
     this->encoder=encoder;
-    
+    const char *fcc;
 
     width=encoder->getWidth();
     height=encoder->getHeight();
-    fourCC=fourCC::get((uint8_t *)encoder->getFCCHandler());
+    fcc=encoder->getFCCHandler();
+    printf("[StreamProcess] Stream %"LU"x%"LU", codec : %s\n",width,height,fcc);
+    fourCC=fourCC::get((uint8_t *)fcc);
     float f=encoder->getFrameIncrement();
     if(f) f=1000000000./f;
         else f=25000;
     averageFps1000=(uint32_t)f;
     isCFR=false;
     bitstream=new ADMBitstream(width*height*4);
+    data=new uint8_t [width*height*4];
+    bitstream->data=data;
 }
 /**
     \fn ADM_videoStreamProcess
@@ -45,6 +49,8 @@
     bitstream=NULL;
     if(encoder) delete encoder;
     encoder=NULL;
+    if(data) delete [] data;
+    data=NULL;
 }
 /**
     \fn getExtraData

Modified: branches/avidemux_2.6_branch_mean/avidemux/gui_savenew.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/gui_savenew.cpp	2009-06-01 08:38:45 UTC (rev 4879)
+++ branches/avidemux_2.6_branch_mean/avidemux/gui_savenew.cpp	2009-06-01 08:38:48 UTC (rev 4880)
@@ -53,6 +53,8 @@
     bool process=true;
     ADM_videoFilterChain *chain=NULL;
     
+    printf("[A_Save] Saving..\n");
+
     if(!(muxer=ADM_MuxerSpawnFromIndex(index)))
     {
         GUI_Error_HIG("Muxer","Cannot instantiante muxer");
@@ -71,7 +73,7 @@
     }
     ADM_videoStream *video=NULL;
     // Video Stream 
-    if(process) // Copy
+    if(!process) // Copy
     {
         video=new ADM_videoStreamCopy();
     }else



From mean at mail.berlios.de  Mon Jun  1 10:38:52 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Mon, 1 Jun 2009 10:38:52 +0200
Subject: [Avidemux-svn-commit] r4881 - in branches/avidemux_2.6_branch_mean:
	avidemux avidemux/ADM_coreVideoEncoder/include
	avidemux/ADM_coreVideoEncoder/src
	avidemux/ADM_userInterfaces/ADM_commonUI cmake
	plugins/ADM_videoEncoder plugins/ADM_videoEncoder/yv12
Message-ID: <200906010838.n518cqTN006928@sheep.berlios.de>

Author: mean
Date: 2009-06-01 10:38:51 +0200 (Mon, 01 Jun 2009)
New Revision: 4881

Added:
   branches/avidemux_2.6_branch_mean/avidemux/ADM_coreVideoEncoder/include/ADM_coreVideoEncoderInternal.h
   branches/avidemux_2.6_branch_mean/avidemux/ADM_coreVideoEncoder/src/ADM_dynVideoEncoder.cpp
   branches/avidemux_2.6_branch_mean/cmake/ve_plugin.cmake
   branches/avidemux_2.6_branch_mean/plugins/ADM_videoEncoder/yv12/
   branches/avidemux_2.6_branch_mean/plugins/ADM_videoEncoder/yv12/ADM_yv12Encoder.cpp
   branches/avidemux_2.6_branch_mean/plugins/ADM_videoEncoder/yv12/ADM_yv12Encoder.h
   branches/avidemux_2.6_branch_mean/plugins/ADM_videoEncoder/yv12/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/plugins/ADM_videoEncoder/yv12/yv12Plugin.cpp
Modified:
   branches/avidemux_2.6_branch_mean/avidemux/ADM_coreVideoEncoder/src/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_plugins.cpp
   branches/avidemux_2.6_branch_mean/avidemux/main.cpp
   branches/avidemux_2.6_branch_mean/plugins/ADM_videoEncoder/CMakeLists.txt
Log:
[VideoEncoder6] FrameWork for encoder

Added: branches/avidemux_2.6_branch_mean/avidemux/ADM_coreVideoEncoder/include/ADM_coreVideoEncoderInternal.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/ADM_coreVideoEncoder/include/ADM_coreVideoEncoderInternal.h	2009-06-01 08:38:48 UTC (rev 4880)
+++ branches/avidemux_2.6_branch_mean/avidemux/ADM_coreVideoEncoder/include/ADM_coreVideoEncoderInternal.h	2009-06-01 08:38:51 UTC (rev 4881)
@@ -0,0 +1,125 @@
+/**
+    \file  ADM_coreVideoEncoderInternal.h
+    \brief interface to video encoder plugins
+
+*/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+#ifndef VIDEOENCODERINTERNAL_H
+#define VIDEOENCODERINTERNAL_H
+
+#define ADM_VIDEO_ENCODER_API_VERSION 1
+#include "ADM_coreVideoEncoder.h"
+#include "DIA_uiTypes.h"
+
+/*!
+  This structure defines a video encoder
+  \param encoder Encoder attached to this descriptor
+  \param name The name of the codec
+  \param configure Function to call to configure the codec
+  \param param : An opaque structure that contains the codec specific configuration datas
+*/
+typedef struct
+{
+    const char   *encoderName;        // Internal name (tag)
+    const char   *menuName;         // Displayed name (in menu)
+    const char   *fourCC;
+    const char   *description;      // Short description
+
+    uint32_t     apiVersion;            // const
+    ADM_coreVideoEncoder *(*create)(ADM_coreVideoFilter *head);  
+    void         (*destroy)(ADM_coreVideoEncoder *codec);
+    bool         (*configure)(void);                                // Call UI to set it up
+    bool         (*getConfigurationData)(uint32_t *l, uint8_t **d); // Get the encoder private conf
+    bool         (*setConfigurationData)(uint32_t l, uint8_t *d);   // Set the encoder private conf
+
+    ADM_UI_TYPE  UIType;                // Type of UI
+    uint32_t     major,minor,patch;     // Version of the plugin
+
+    void         *opaque;               // Hide stuff in here
+}ADM_videoEncoderDesc;
+
+// Macros to declare audio encoder
+/**************************************************************************/
+#define ADM_DECLARE_VIDEO_ENCODER_PREAMBLE(Class) \
+static bool getConfigurationData (uint32_t * l, uint8_t ** d); \
+static bool setConfigurationData (uint32_t l, uint8_t * d);\
+\
+static ADM_coreVideoEncoder * create (ADM_coreVideoFilter * head) \
+{ \
+  return new Class (head); \
+} \
+static void destroy (ADM_coreVideoEncoder * in) \
+{\
+  Class *z = (Class *) in; \
+  delete z; \
+} 
+//******************************************************
+#define ADM_DECLARE_VIDEO_ENCODER_CONFIG(configData) \
+bool getConfigurationData (uint32_t * l, uint8_t ** d)\
+{\
+  *l = sizeof (configData); \
+  *d = (uint8_t *) & configData; \
+  return 1; \
+} \
+bool setConfigurationData (uint32_t l, uint8_t * d)\
+{\
+  if (sizeof (configData) != l) \
+    {\
+      GUI_Error_HIG ("Audio Encoder",\
+		     "The configuration size does not match the codec size"); \
+      return 0; \
+    }\
+  memcpy (&configData, d, l); \
+  return 1;\
+}
+
+
+// Use that one is the encoder has not configuration
+
+#define ADM_DECLARE_VIDEO_ENCODER_NO_CONFIG() \
+bool getConfigurationData (uint32_t * l, uint8_t ** d)\
+{\
+  *l =0; \
+  *d = NULL; \
+  return 1; \
+} \
+bool setConfigurationData (uint32_t l, uint8_t * d)\
+{\
+  return 1;\
+}
+
+
+#define ADM_DECLARE_VIDEO_ENCODER_MAIN(name,menuName,fourcc,desc,configure,uiType,maj,minV,patch) \
+static ADM_videoEncoderDesc encoderDesc={\
+    name,\
+    menuName,\
+    fourcc,\
+    desc,\
+    ADM_VIDEO_ENCODER_API_VERSION,\
+    &create,\
+    &destroy,\
+    configure,\
+    getConfigurationData,\
+    setConfigurationData,\
+    uiType,\
+    maj,minV,patch,\
+    NULL\
+};\
+extern "C" ADM_videoEncoderDesc *getInfo (void) \
+{ \
+  return &encoderDesc; \
+}  \
+
+#ifndef QT_TR_NOOP
+#define QT_TR_NOOP(x) x
+#endif
+#endif
+//EOF

Added: branches/avidemux_2.6_branch_mean/avidemux/ADM_coreVideoEncoder/src/ADM_dynVideoEncoder.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/ADM_coreVideoEncoder/src/ADM_dynVideoEncoder.cpp	2009-06-01 08:38:48 UTC (rev 4880)
+++ branches/avidemux_2.6_branch_mean/avidemux/ADM_coreVideoEncoder/src/ADM_dynVideoEncoder.cpp	2009-06-01 08:38:51 UTC (rev 4881)
@@ -0,0 +1,145 @@
+/***************************************************************************
+                             ADM_dynVideoEncoder.cpp
+
+    begin                : Mon Apr 14 2008
+    copyright            : (C) 2008 2009 by gruntster/mean
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+
+
+#include "ADM_default.h"
+#include <vector>
+
+#include "DIA_fileSel.h"
+
+#include "ADM_coreVideoEncoder.h"
+#include "ADM_coreVideoEncoderInternal.h"
+#include "DIA_uiTypes.h"
+#include "ADM_dynamicLoading.h"
+/**
+    \class ADM_videoEncoder6
+    \brief Plugin Wrapper Class
+
+*/
+class ADM_videoEncoder6 :public ADM_LibWrapper
+{
+public:
+        int                  initialised;
+        ADM_videoEncoderDesc *desc;
+        ADM_videoEncoderDesc  *(*getInfo)();
+        ADM_videoEncoder6(const char *file) : ADM_LibWrapper()
+        {
+			initialised = (loadLibrary(file) && getSymbols(1,
+				&getInfo, "getInfo"));
+                if(initialised)
+                {
+                    desc=getInfo();
+                    printf("[videoEncoder6]Name :%s ApiVersion :%d Description :%s\n",
+                                                        desc->encoderName,
+                                                        desc->apiVersion,
+                                                        desc->description);
+                }else
+                {
+                    printf("[videoEncoder6]Symbol loading failed for %s\n",file);
+                }
+        }
+};
+
+std::vector <ADM_videoEncoder6 *> ListOfEncoders;
+
+
+/**
+        \fn ADM_ve6_getNbDemuxers
+        \brief Returns the number of demuxers plugins except one
+*/
+uint32_t ADM_ve6_getNbDemuxers(void)
+{
+    return ListOfEncoders.size();
+}
+/**
+    \fn     ADM_dm_getDemuxerInfo
+    \brief  Get Infos about the demuxer #th plugin
+*/
+bool     ADM_ve6_getDemuxerInfo(int filter, const char **name, uint32_t *major,uint32_t *minor,uint32_t *patch)
+{
+    ADM_assert(filter<ListOfEncoders.size());
+    ADM_videoEncoderDesc *desc=ListOfEncoders[filter]->desc;
+    ADM_assert(desc);
+    *name=desc->menuName;
+    *major=desc->major;
+    *minor=desc->minor;
+    *patch=desc->patch;
+    return true;
+}
+/**
+    \fn tryLoadingFilterPlugin
+    \brief Try loading the file given as argument as an audio device plugin
+
+*/
+#define Fail(x) {printf("%s:"#x"\n",file);goto er;}
+static bool tryLoadingEncoderPlugin(const char *file)
+{
+	ADM_videoEncoder6 *dll=new ADM_videoEncoder6(file);
+    if(!dll->initialised) Fail(CannotLoad);
+    if(dll->desc->apiVersion!=ADM_VIDEO_ENCODER_API_VERSION) Fail(WrongApiVersion);
+//fixme todo also check uiType    
+    ListOfEncoders.push_back(dll); // Needed for cleanup. FIXME TODO Delete it.
+    printf("[VideoEncoder6] Registered filter %s as  %s\n",file,dll->desc->description);
+    return true;
+	// Fail!
+er:
+	delete dll;
+	return false;
+
+}
+/**
+ * 	\fn ADM_ve6_loadPlugins
+ *  \brief load all audio device plugins
+ */
+uint8_t ADM_ve6_loadPlugins(const char *path)
+{
+#define MAX_EXTERNAL_FILTER 100
+// FIXME Factorize
+
+	char *files[MAX_EXTERNAL_FILTER];
+	uint32_t nbFile;
+
+	memset(files,0,sizeof(char *)*MAX_EXTERNAL_FILTER);
+	printf("[ADM_ve6_plugin] Scanning directory %s\n",path);
+
+	if(!buildDirectoryContent(&nbFile, path, files, MAX_EXTERNAL_FILTER, SHARED_LIB_EXT))
+	{
+		printf("[ADM_ve6_plugin] Cannot parse plugin\n");
+		return 0;
+	}
+
+	for(int i=0;i<nbFile;i++)
+		tryLoadingEncoderPlugin(files[i]);
+
+	printf("[ADM_ve6_plugin] Scanning done\n");
+
+	return 1;
+}
+/**
+        \fn ADM_ve6_cleanup
+        \brief Current device is no longer used, delete
+*/
+void ADM_ve6_cleanup(void)
+{
+        int nb=ListOfEncoders.size();
+        for(int i=0;i<nb;i++)
+                {
+                        if(ListOfEncoders[i]) delete ListOfEncoders[i];
+                        ListOfEncoders[i]=NULL;
+                }
+}
+
+//EOF

Modified: branches/avidemux_2.6_branch_mean/avidemux/ADM_coreVideoEncoder/src/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/ADM_coreVideoEncoder/src/CMakeLists.txt	2009-06-01 08:38:48 UTC (rev 4880)
+++ branches/avidemux_2.6_branch_mean/avidemux/ADM_coreVideoEncoder/src/CMakeLists.txt	2009-06-01 08:38:51 UTC (rev 4881)
@@ -10,5 +10,6 @@
 SET(ADM_internalVideoEncoder_SRCS 
 	ADM_VideoEncoders.cpp
         ADM_yv12Encoder.cpp
+        ADM_dynVideoEncoder.cpp
 )
 ADD_LIBRARY(ADM_internalVideoEncoder STATIC ${ADM_internalVideoEncoder_SRCS})

Modified: branches/avidemux_2.6_branch_mean/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_plugins.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_plugins.cpp	2009-06-01 08:38:48 UTC (rev 4880)
+++ branches/avidemux_2.6_branch_mean/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_plugins.cpp	2009-06-01 08:38:51 UTC (rev 4881)
@@ -30,6 +30,8 @@
 bool     ADM_dm_getDemuxerInfo(int filter, const char **name, uint32_t *major,uint32_t *minor,uint32_t *patch);
 uint32_t ADM_mx_getNbMuxers(void);
 bool     ADM_mx_getMuxerInfo(int filter, const char **name, uint32_t *major,uint32_t *minor,uint32_t *patch);
+bool     ADM_ve6_getDemuxerInfo(int filter, const char **name, uint32_t *major,uint32_t *minor,uint32_t *patch);
+uint32_t ADM_ve6_getNbDemuxers(void);
 #define QT_TR_NOOP(x) x
 
 /* /Functions */
@@ -41,11 +43,11 @@
 uint8_t DIA_pluginsInfo(void)
 {
     uint32_t aNbPlugin=ADM_ad_getNbFilters();
-    uint32_t veNbPlugin=ADM_ve_getNbEncoders();
     uint32_t avNbPlugin=ADM_av_getNbDevices();
     uint32_t aeNbPlugin=ADM_ae_getPluginNbEncoders();
     uint32_t dmNbPlugin=ADM_dm_getNbDemuxers();
     uint32_t mxNbPlugin=ADM_mx_getNbMuxers();
+    uint32_t ve6NbPlugin=ADM_ve6_getNbDemuxers();
 
     // Audio Plugins
 
@@ -78,19 +80,19 @@
     // /Audio
 
     // Encoder
-    printf("[VideoEncoder Plugins] Found %u plugins\n",veNbPlugin);
-    diaElemReadOnlyText *veText[veNbPlugin];
+    printf("[VideoEncoder6 Plugins] Found %u plugins\n",ve6NbPlugin);
+    diaElemReadOnlyText *veText[ve6NbPlugin];
     diaElemFrame frameVE(QT_TR_NOOP("Video Encoder Plugins"));
         
        
-    for(int i=0;i<veNbPlugin;i++)
+    for(int i=0;i<ve6NbPlugin;i++)
     {
         const char *name;
         uint32_t major,minor,patch;
         char versionString[256];
         char infoString[256];
         char *end;
-            ADM_ve_getEncoderInfo(i, &name,&major,&minor,&patch);
+            ADM_ve6_getDemuxerInfo(i, &name,&major,&minor,&patch);
             snprintf(versionString,255,"%02d.%02d.%02d",major,minor,patch);
             strncpy(infoString,name,255);
             if(strlen(infoString))
@@ -228,7 +230,7 @@
 
     for(int i=0;i<aNbPlugin;i++)
         delete aText[i];
-    for(int i=0;i<veNbPlugin;i++)
+    for(int i=0;i<ve6NbPlugin;i++)
         delete veText[i];
     for(int i=0;i<avNbPlugin;i++)
         delete avText[i];

Modified: branches/avidemux_2.6_branch_mean/avidemux/main.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/main.cpp	2009-06-01 08:38:48 UTC (rev 4880)
+++ branches/avidemux_2.6_branch_mean/avidemux/main.cpp	2009-06-01 08:38:51 UTC (rev 4881)
@@ -77,7 +77,7 @@
 extern uint8_t ADM_ae_loadPlugins(const char *path);
 extern uint8_t ADM_dm_loadPlugins(const char *path);
 extern uint8_t ADM_mx_loadPlugins(const char *path);
-
+extern uint8_t ADM_ve6_loadPlugins(const char *path);
 extern bool vdpauProbe(void);
 extern void loadPlugins(void);
 extern void InitFactory(void);
@@ -236,11 +236,12 @@
     const char *startDir="lib";
 #endif
 	char *adPlugins = ADM_getInstallRelativePath(startDir,"ADM_plugins6","audioDecoder");
-	char *vfPlugins = ADM_getInstallRelativePath(startDir,"ADM_plugins6","videoFilter");
     char *avPlugins = ADM_getInstallRelativePath(startDir,"ADM_plugins6","audioDevices");    
     char *aePlugins = ADM_getInstallRelativePath(startDir,"ADM_plugins6","audioEncoders");    
     char *dmPlugins = ADM_getInstallRelativePath(startDir,"ADM_plugins6","demuxers");    
     char *mxPlugins = ADM_getInstallRelativePath(startDir,"ADM_plugins6","muxers");    
+    char *vePlugins = ADM_getInstallRelativePath(startDir,"ADM_plugins6","videoEncoders");    
+    char *vfPlugins = ADM_getInstallRelativePath(startDir,"ADM_plugins6","videoFilter");
 
     ADM_mx_loadPlugins(mxPlugins);
     delete [] mxPlugins;
@@ -260,6 +261,10 @@
 	ADM_dm_loadPlugins(dmPlugins);
     delete [] dmPlugins;
 
+    ADM_ve6_loadPlugins(vePlugins);
+    delete [] vePlugins;
+
+
     // load local audio decoder plugins
 	adPlugins=ADM_getHomeRelativePath("plugins6","audioDecoder");
 	ADM_ad_loadPlugins(adPlugins);

Added: branches/avidemux_2.6_branch_mean/cmake/ve_plugin.cmake
===================================================================
--- branches/avidemux_2.6_branch_mean/cmake/ve_plugin.cmake	2009-06-01 08:38:48 UTC (rev 4880)
+++ branches/avidemux_2.6_branch_mean/cmake/ve_plugin.cmake	2009-06-01 08:38:51 UTC (rev 4881)
@@ -0,0 +1,18 @@
+#
+#  Macro to declare an video encoder plugin
+#
+MACRO(INIT_VIDEO_ENCODER _lib)
+	INCLUDE_DIRECTORIES("${AVIDEMUX_SOURCE_DIR}/avidemux/ADM_core/include")
+	INCLUDE_DIRECTORIES("${AVIDEMUX_SOURCE_DIR}/avidemux/ADM_coreVideoEncoder/include")
+	INCLUDE_DIRECTORIES("${AVIDEMUX_SOURCE_DIR}/avidemux/ADM_coreUI/include")
+	INCLUDE_DIRECTORIES("${AVIDEMUX_SOURCE_DIR}/avidemux/ADM_coreUtils/include/")
+	INCLUDE_DIRECTORIES("${AVIDEMUX_SOURCE_DIR}/avidemux/ADM_coreVideoFilter/include/")
+	INCLUDE_DIRECTORIES("${AVIDEMUX_SOURCE_DIR}/avidemux/ADM_coreImage/include/")
+    ADD_DEFINITIONS("-DADM_MINIMAL_UI_INTERFACE")
+
+ENDMACRO(INIT_VIDEO_ENCODER)
+
+MACRO(INSTALL_VIDEO_ENCODER _lib)
+	INSTALL(TARGETS ${_lib} DESTINATION "${CMAKE_INSTALL_PREFIX}/lib/ADM_plugins6/videoEncoders/")
+	TARGET_LINK_LIBRARIES(${_lib} ADM_core ADM_coreUI ADM_coreVideoEncoder )
+ENDMACRO(INSTALL_VIDEO_ENCODER)

Modified: branches/avidemux_2.6_branch_mean/plugins/ADM_videoEncoder/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/plugins/ADM_videoEncoder/CMakeLists.txt	2009-06-01 08:38:48 UTC (rev 4880)
+++ branches/avidemux_2.6_branch_mean/plugins/ADM_videoEncoder/CMakeLists.txt	2009-06-01 08:38:51 UTC (rev 4881)
@@ -1,2 +1,3 @@
 #ADD_SUBDIRECTORY(ADM_vidEnc_x264)
 #ADD_SUBDIRECTORY(ADM_vidEnc_xvid)
+ADD_SUBDIRECTORY(yv12)

Added: branches/avidemux_2.6_branch_mean/plugins/ADM_videoEncoder/yv12/ADM_yv12Encoder.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/plugins/ADM_videoEncoder/yv12/ADM_yv12Encoder.cpp	2009-06-01 08:38:48 UTC (rev 4880)
+++ branches/avidemux_2.6_branch_mean/plugins/ADM_videoEncoder/yv12/ADM_yv12Encoder.cpp	2009-06-01 08:38:51 UTC (rev 4881)
@@ -0,0 +1,111 @@
+/***************************************************************************
+                          \fn ADM_VideoEncoders
+                          \brief Internal handling of video encoders
+                             -------------------
+    
+    copyright            : (C) 2002/2009 by mean
+    email                : fixounet at free.fr
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+#include "ADM_default.h"
+#include "ADM_yv12Encoder.h"
+
+/**
+        \fn ADM_yv12Encoder
+*/
+ADM_yv12Encoder::ADM_yv12Encoder(ADM_coreVideoFilter *src) : ADM_coreVideoEncoder(src)
+{
+    printf("[YV12Encoder] Creating.\n");
+    int w,h;
+    FilterInfo *info=src->getInfo();
+    w=info->width;
+    h=info->height;
+    image=new ADMImage(w,h);
+    plane=(w*h*3)/2;
+}
+/** 
+    \fn ~ADM_yv12Encoder
+*/
+ADM_yv12Encoder::~ADM_yv12Encoder()
+{
+    printf("[YV12Encoder] Destroying.\n");
+}
+/**
+    \fn getDisplayName
+*/
+
+const char *ADM_yv12Encoder::getDisplayName(void)
+{
+    return "YV12 Encoder";
+
+}
+/**
+    \fn getCodecName
+*/
+
+const char *ADM_yv12Encoder::getCodecName(void)
+{
+    return "yv12";
+}
+/**
+    \fn getFCCHandler
+*/
+
+const char *ADM_yv12Encoder::getFCCHandler(void)
+{
+    return "yv12";
+
+}
+/**
+    \fn configure
+*/
+bool        ADM_yv12Encoder::configure(void)
+{
+    return true;
+}
+
+/**
+    \fn getConfiguration
+*/
+bool        ADM_yv12Encoder::getConfiguration(uint32_t *l,uint8_t **d)
+{
+        *l=0;
+        *d=NULL;
+        return true;
+}
+
+/**
+    \fn setConfiguration
+*/
+bool        ADM_yv12Encoder::setConfiguration(uint32_t l,uint8_t *d)
+{
+        return true;
+}
+
+/**
+    \fn encode
+*/
+bool         ADM_yv12Encoder::encode (ADMBitstream * out)
+{
+    if(source->getNextFrame(image)==false)
+    {
+        printf("[YV12] Cannot get next image\n");
+        return false;
+    }
+    ADM_assert(out->bufferSize>plane);
+    memcpy(out->data,image->data,plane);
+    out->len=plane;
+    out->pts=out->dts=image->Pts;
+    out->flags=AVI_KEY_FRAME;
+    return true;
+}
+
+// EOF
\ No newline at end of file

Added: branches/avidemux_2.6_branch_mean/plugins/ADM_videoEncoder/yv12/ADM_yv12Encoder.h
===================================================================
--- branches/avidemux_2.6_branch_mean/plugins/ADM_videoEncoder/yv12/ADM_yv12Encoder.h	2009-06-01 08:38:48 UTC (rev 4880)
+++ branches/avidemux_2.6_branch_mean/plugins/ADM_videoEncoder/yv12/ADM_yv12Encoder.h	2009-06-01 08:38:51 UTC (rev 4881)
@@ -0,0 +1,47 @@
+/***************************************************************************
+                          \fn ADM_VideoEncoders
+                          \brief Internal handling of video encoders
+                             -------------------
+    
+    copyright            : (C) 2002/2009 by mean
+    email                : fixounet at free.fr
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+#ifndef ADM_YV12_ENCODER_H
+#define ADM_YV12_ENCODER_H
+#include "ADM_coreVideoEncoder.h"
+
+
+/**
+        \class ADM_yv12Encoder
+        \brief Dummy encoder that does nothing
+
+*/
+class ADM_yv12Encoder : public ADM_coreVideoEncoder
+{
+protected:
+               int plane;
+public:
+
+                            ADM_yv12Encoder(ADM_coreVideoFilter *src);
+                            ~ADM_yv12Encoder();
+virtual        bool         encode (ADMBitstream * out);
+virtual        const char *getDisplayName(void);       /// E.g. FFmpeg mpeg4      
+virtual        const char *getCodecName(void);         /// aka fourcc
+virtual        const char *getFCCHandler(void);        /// fourcc 2, needed to build AVI header
+
+virtual        bool        configure(void);           /// Pop-up UI
+virtual        bool        getConfiguration(uint32_t *l,uint8_t **d); /// Get current conf to save it
+virtual        bool        setConfiguration(uint32_t l,uint8_t *d);   /// Set conf, call it just after creation
+};
+
+
+#endif
\ No newline at end of file

Added: branches/avidemux_2.6_branch_mean/plugins/ADM_videoEncoder/yv12/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/plugins/ADM_videoEncoder/yv12/CMakeLists.txt	2009-06-01 08:38:48 UTC (rev 4880)
+++ branches/avidemux_2.6_branch_mean/plugins/ADM_videoEncoder/yv12/CMakeLists.txt	2009-06-01 08:38:51 UTC (rev 4881)
@@ -0,0 +1,12 @@
+INCLUDE(ve_plugin)
+
+SET(YV12_SRCS 
+        yv12Plugin.cpp
+        ADM_yv12Encoder.cpp
+)
+INCLUDE_DIRECTORIES(${CMAKE_CURRENT_BINARY_DIR})
+
+ADD_LIBRARY(ADM_ve_yv12 SHARED ${YV12_SRCS})
+
+INIT_VIDEO_ENCODER(ADM_ve_yv12)
+INSTALL_VIDEO_ENCODER(ADM_ve_yv12)

Added: branches/avidemux_2.6_branch_mean/plugins/ADM_videoEncoder/yv12/yv12Plugin.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/plugins/ADM_videoEncoder/yv12/yv12Plugin.cpp	2009-06-01 08:38:48 UTC (rev 4880)
+++ branches/avidemux_2.6_branch_mean/plugins/ADM_videoEncoder/yv12/yv12Plugin.cpp	2009-06-01 08:38:51 UTC (rev 4881)
@@ -0,0 +1,31 @@
+/***************************************************************************
+                          \fn     yv12Plugin
+                          \brief  Plugin for YV12 dummy encoder
+                             -------------------
+    
+    copyright            : (C) 2002/2009 by mean
+    email                : fixounet at free.fr
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+#include "ADM_default.h"
+#include "ADM_yv12Encoder.h"
+#include "ADM_coreVideoEncoderInternal.h"
+
+
+ADM_DECLARE_VIDEO_ENCODER_PREAMBLE(ADM_yv12Encoder);
+ADM_DECLARE_VIDEO_ENCODER_NO_CONFIG();
+ADM_DECLARE_VIDEO_ENCODER_MAIN("YV12Encoder",
+                               "YV12 Encoder",
+                               "YV12",
+                               "Simple YV12 Encoder (c) 2009 Mean",
+                                NULL, // No configuration
+                                ADM_UI_ALL,
+                                1,0,0);
\ No newline at end of file



From mean at mail.berlios.de  Mon Jun  1 11:04:30 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Mon, 1 Jun 2009 11:04:30 +0200
Subject: [Avidemux-svn-commit] r4882 - in
	branches/avidemux_2.6_branch_mean/avidemux: .
	ADM_coreVideoEncoder/include ADM_coreVideoEncoder/src
	ADM_muxerGate/src ADM_userInterfaces/ADM_GTK/ADM_gui2
	ADM_userInterfaces/ADM_commonUI
Message-ID: <200906010904.n5194UOk009788@sheep.berlios.de>

Author: mean
Date: 2009-06-01 11:04:30 +0200 (Mon, 01 Jun 2009)
New Revision: 4882

Removed:
   branches/avidemux_2.6_branch_mean/avidemux/ADM_coreVideoEncoder/include/ADM_yv12Encoder.h
   branches/avidemux_2.6_branch_mean/avidemux/ADM_coreVideoEncoder/src/ADM_yv12Encoder.cpp
Modified:
   branches/avidemux_2.6_branch_mean/avidemux/ADM_coreVideoEncoder/include/ADM_coreVideoEncoder.h
   branches/avidemux_2.6_branch_mean/avidemux/ADM_coreVideoEncoder/src/ADM_VideoEncoders.cpp
   branches/avidemux_2.6_branch_mean/avidemux/ADM_coreVideoEncoder/src/ADM_dynVideoEncoder.cpp
   branches/avidemux_2.6_branch_mean/avidemux/ADM_coreVideoEncoder/src/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux/ADM_muxerGate/src/ADM_createStreams.cpp
   branches/avidemux_2.6_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_bindings.cpp
   branches/avidemux_2.6_branch_mean/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_plugins.cpp
   branches/avidemux_2.6_branch_mean/avidemux/gui_savenew.cpp
Log:
[GTK] Bind encoder to menu

Modified: branches/avidemux_2.6_branch_mean/avidemux/ADM_coreVideoEncoder/include/ADM_coreVideoEncoder.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/ADM_coreVideoEncoder/include/ADM_coreVideoEncoder.h	2009-06-01 08:38:51 UTC (rev 4881)
+++ branches/avidemux_2.6_branch_mean/avidemux/ADM_coreVideoEncoder/include/ADM_coreVideoEncoder.h	2009-06-01 09:04:30 UTC (rev 4882)
@@ -61,5 +61,7 @@
                uint32_t    getFrameIncrement(void) {return source->getInfo()->frameIncrement;}
                uint64_t    getTotalDuration(void) {return source->getInfo()->totalDuration;}
 };
+// Spawn a new encoder using the index from the menu = the index in the vector
+ADM_coreVideoEncoder *createVideoEncoderFromIndex(ADM_coreVideoFilter *chain,int index);
 
 #endif
\ No newline at end of file

Deleted: branches/avidemux_2.6_branch_mean/avidemux/ADM_coreVideoEncoder/include/ADM_yv12Encoder.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/ADM_coreVideoEncoder/include/ADM_yv12Encoder.h	2009-06-01 08:38:51 UTC (rev 4881)
+++ branches/avidemux_2.6_branch_mean/avidemux/ADM_coreVideoEncoder/include/ADM_yv12Encoder.h	2009-06-01 09:04:30 UTC (rev 4882)
@@ -1,47 +0,0 @@
-/***************************************************************************
-                          \fn ADM_VideoEncoders
-                          \brief Internal handling of video encoders
-                             -------------------
-    
-    copyright            : (C) 2002/2009 by mean
-    email                : fixounet at free.fr
- ***************************************************************************/
-
-/***************************************************************************
- *                                                                         *
- *   This program is free software; you can redistribute it and/or modify  *
- *   it under the terms of the GNU General Public License as published by  *
- *   the Free Software Foundation; either version 2 of the License, or     *
- *   (at your option) any later version.                                   *
- *                                                                         *
- ***************************************************************************/
-#ifndef ADM_YV12_ENCODER_H
-#define ADM_YV12_ENCODER_H
-#include "ADM_coreVideoEncoder.h"
-
-
-/**
-        \class ADM_yv12Encoder
-        \brief Dummy encoder that does nothing
-
-*/
-class ADM_yv12Encoder : public ADM_coreVideoEncoder
-{
-protected:
-               int plane;
-public:
-
-                            ADM_yv12Encoder(ADM_coreVideoFilter *src);
-                            ~ADM_yv12Encoder();
-virtual        bool         encode (ADMBitstream * out);
-virtual        const char *getDisplayName(void);       /// E.g. FFmpeg mpeg4      
-virtual        const char *getCodecName(void);         /// aka fourcc
-virtual        const char *getFCCHandler(void);        /// fourcc 2, needed to build AVI header
-
-virtual        bool        configure(void);           /// Pop-up UI
-virtual        bool        getConfiguration(uint32_t *l,uint8_t **d); /// Get current conf to save it
-virtual        bool        setConfiguration(uint32_t l,uint8_t *d);   /// Set conf, call it just after creation
-};
-
-
-#endif
\ No newline at end of file

Modified: branches/avidemux_2.6_branch_mean/avidemux/ADM_coreVideoEncoder/src/ADM_VideoEncoders.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/ADM_coreVideoEncoder/src/ADM_VideoEncoders.cpp	2009-06-01 08:38:51 UTC (rev 4881)
+++ branches/avidemux_2.6_branch_mean/avidemux/ADM_coreVideoEncoder/src/ADM_VideoEncoders.cpp	2009-06-01 09:04:30 UTC (rev 4882)
@@ -19,13 +19,4 @@
 #include "ADM_coreVideoEncoder.h"
 #include "ADM_yv12Encoder.h"
 #include "ADM_filterChain.h"
-/**
-    \fn createVideoEncoder
-*/
-ADM_coreVideoEncoder *createVideoEncoder(ADM_coreVideoFilter *chain)
-{
-    // 1- Create encoder itself...
-    ADM_yv12Encoder *yv=new ADM_yv12Encoder(chain);
-    return yv;
-}
 // EOF

Modified: branches/avidemux_2.6_branch_mean/avidemux/ADM_coreVideoEncoder/src/ADM_dynVideoEncoder.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/ADM_coreVideoEncoder/src/ADM_dynVideoEncoder.cpp	2009-06-01 08:38:51 UTC (rev 4881)
+++ branches/avidemux_2.6_branch_mean/avidemux/ADM_coreVideoEncoder/src/ADM_dynVideoEncoder.cpp	2009-06-01 09:04:30 UTC (rev 4882)
@@ -24,6 +24,8 @@
 #include "ADM_coreVideoEncoderInternal.h"
 #include "DIA_uiTypes.h"
 #include "ADM_dynamicLoading.h"
+
+static int currentVideoCodec=0;
 /**
     \class ADM_videoEncoder6
     \brief Plugin Wrapper Class
@@ -54,21 +56,38 @@
 };
 
 std::vector <ADM_videoEncoder6 *> ListOfEncoders;
+// 
+ADM_videoEncoderDesc copyDesc={
+        "Copy",
+        "Copy",
+        "Copy",
+        "Copy encoder",
+        ADM_VIDEO_ENCODER_API_VERSION, //uint32_t     apiVersion;            // const
 
+        NULL, //ADM_coreVideoEncoder *(*create)(ADM_coreVideoFilter *head);  
+        NULL, //void         (*destroy)(ADM_coreVideoEncoder *codec);
+        NULL, //bool         (*configure)(void);                                // Call UI to set it up
+        NULL, //bool         (*getConfigurationData)(uint32_t *l, uint8_t **d); // Get the encoder private conf
+        NULL, //bool         (*setConfigurationData)(uint32_t l, uint8_t *d);   // Set the encoder private conf
 
+        ADM_UI_ALL, //ADM_UI_TYPE  UIType;                // Type of UI
+        1,0,0, //uint32_t     major,minor,patch;     // Version of the plugin
+        NULL  //void         *opaque;               // Hide stuff in here
+};
+
 /**
-        \fn ADM_ve6_getNbDemuxers
+        \fn ADM_ve6_getNbEncoders
         \brief Returns the number of demuxers plugins except one
 */
-uint32_t ADM_ve6_getNbDemuxers(void)
+uint32_t ADM_ve6_getNbEncoders(void)
 {
     return ListOfEncoders.size();
 }
 /**
-    \fn     ADM_dm_getDemuxerInfo
+    \fn     ADM_ve6_getEncoderInfo
     \brief  Get Infos about the demuxer #th plugin
 */
-bool     ADM_ve6_getDemuxerInfo(int filter, const char **name, uint32_t *major,uint32_t *minor,uint32_t *patch)
+bool     ADM_ve6_getEncoderInfo(int filter, const char **name, uint32_t *major,uint32_t *minor,uint32_t *patch)
 {
     ADM_assert(filter<ListOfEncoders.size());
     ADM_videoEncoderDesc *desc=ListOfEncoders[filter]->desc;
@@ -120,10 +139,14 @@
 		printf("[ADM_ve6_plugin] Cannot parse plugin\n");
 		return 0;
 	}
+    // Add our copy encoder....
+    ADM_videoEncoder6 *dll=new ADM_videoEncoder6("copyADM");
+    dll->desc=&copyDesc;
+    ListOfEncoders.push_back(dll);
 
 	for(int i=0;i<nbFile;i++)
 		tryLoadingEncoderPlugin(files[i]);
-
+    
 	printf("[ADM_ve6_plugin] Scanning done\n");
 
 	return 1;
@@ -142,4 +165,43 @@
                 }
 }
 
+/**
+    \fn ADM_ve6_getMenuName
+    \brief IT starts from 0, ignoring the copy one
+*/
+const char *ADM_ve6_getMenuName(uint32_t i)
+{
+	 int nb=ListOfEncoders.size();
+
+	ADM_assert(i < nb);
+
+	return ListOfEncoders[i]->desc->menuName;
+}
+/**
+    \fn ADM_ve6_Changed
+*/
+void ADM_ve6_Changed(int newCodecIndex)
+{
+	int nb=ListOfEncoders.size();
+	ADM_assert(newCodecIndex < nb);
+
+	currentVideoCodec=newCodecIndex;
+}
+
+
+/**
+    \fn createVideoEncoder
+*/
+ADM_coreVideoEncoder *createVideoEncoderFromIndex(ADM_coreVideoFilter *chain,int index)
+{
+    int nb=ListOfEncoders.size();
+	ADM_assert(index < nb);
+    ADM_assert(index); // 0 is for copy, should not get it through here
+    ADM_videoEncoder6 *plugin=ListOfEncoders[index];
+
+    ADM_coreVideoEncoder *enc=plugin->desc->create(chain);
+    return enc;
+}
+
+
 //EOF

Deleted: branches/avidemux_2.6_branch_mean/avidemux/ADM_coreVideoEncoder/src/ADM_yv12Encoder.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/ADM_coreVideoEncoder/src/ADM_yv12Encoder.cpp	2009-06-01 08:38:51 UTC (rev 4881)
+++ branches/avidemux_2.6_branch_mean/avidemux/ADM_coreVideoEncoder/src/ADM_yv12Encoder.cpp	2009-06-01 09:04:30 UTC (rev 4882)
@@ -1,111 +0,0 @@
-/***************************************************************************
-                          \fn ADM_VideoEncoders
-                          \brief Internal handling of video encoders
-                             -------------------
-    
-    copyright            : (C) 2002/2009 by mean
-    email                : fixounet at free.fr
- ***************************************************************************/
-
-/***************************************************************************
- *                                                                         *
- *   This program is free software; you can redistribute it and/or modify  *
- *   it under the terms of the GNU General Public License as published by  *
- *   the Free Software Foundation; either version 2 of the License, or     *
- *   (at your option) any later version.                                   *
- *                                                                         *
- ***************************************************************************/
-#include "ADM_default.h"
-#include "ADM_yv12Encoder.h"
-
-/**
-        \fn ADM_yv12Encoder
-*/
-ADM_yv12Encoder::ADM_yv12Encoder(ADM_coreVideoFilter *src) : ADM_coreVideoEncoder(src)
-{
-    printf("[YV12Encoder] Creating.\n");
-    int w,h;
-    FilterInfo *info=src->getInfo();
-    w=info->width;
-    h=info->height;
-    image=new ADMImage(w,h);
-    plane=(w*h*3)/2;
-}
-/** 
-    \fn ~ADM_yv12Encoder
-*/
-ADM_yv12Encoder::~ADM_yv12Encoder()
-{
-    printf("[YV12Encoder] Destroying.\n");
-}
-/**
-    \fn getDisplayName
-*/
-
-const char *ADM_yv12Encoder::getDisplayName(void)
-{
-    return "YV12 Encoder";
-
-}
-/**
-    \fn getCodecName
-*/
-
-const char *ADM_yv12Encoder::getCodecName(void)
-{
-    return "yv12";
-}
-/**
-    \fn getFCCHandler
-*/
-
-const char *ADM_yv12Encoder::getFCCHandler(void)
-{
-    return "yv12";
-
-}
-/**
-    \fn configure
-*/
-bool        ADM_yv12Encoder::configure(void)
-{
-    return true;
-}
-
-/**
-    \fn getConfiguration
-*/
-bool        ADM_yv12Encoder::getConfiguration(uint32_t *l,uint8_t **d)
-{
-        *l=0;
-        *d=NULL;
-        return true;
-}
-
-/**
-    \fn setConfiguration
-*/
-bool        ADM_yv12Encoder::setConfiguration(uint32_t l,uint8_t *d)
-{
-        return true;
-}
-
-/**
-    \fn encode
-*/
-bool         ADM_yv12Encoder::encode (ADMBitstream * out)
-{
-    if(source->getNextFrame(image)==false)
-    {
-        printf("[YV12] Cannot get next image\n");
-        return false;
-    }
-    ADM_assert(out->bufferSize>plane);
-    memcpy(out->data,image->data,plane);
-    out->len=plane;
-    out->pts=out->dts=image->Pts;
-    out->flags=AVI_KEY_FRAME;
-    return true;
-}
-
-// EOF
\ No newline at end of file

Modified: branches/avidemux_2.6_branch_mean/avidemux/ADM_coreVideoEncoder/src/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/ADM_coreVideoEncoder/src/CMakeLists.txt	2009-06-01 08:38:51 UTC (rev 4881)
+++ branches/avidemux_2.6_branch_mean/avidemux/ADM_coreVideoEncoder/src/CMakeLists.txt	2009-06-01 09:04:30 UTC (rev 4882)
@@ -9,7 +9,6 @@
 
 SET(ADM_internalVideoEncoder_SRCS 
 	ADM_VideoEncoders.cpp
-        ADM_yv12Encoder.cpp
         ADM_dynVideoEncoder.cpp
 )
 ADD_LIBRARY(ADM_internalVideoEncoder STATIC ${ADM_internalVideoEncoder_SRCS})

Modified: branches/avidemux_2.6_branch_mean/avidemux/ADM_muxerGate/src/ADM_createStreams.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/ADM_muxerGate/src/ADM_createStreams.cpp	2009-06-01 08:38:51 UTC (rev 4881)
+++ branches/avidemux_2.6_branch_mean/avidemux/ADM_muxerGate/src/ADM_createStreams.cpp	2009-06-01 09:04:30 UTC (rev 4882)
@@ -22,19 +22,19 @@
 #include "ADM_muxer.h"
 #include "ADM_videoProcess.h"
 
-extern ADM_coreVideoEncoder *createVideoEncoder(ADM_coreVideoFilter *chain);
+extern ADM_coreVideoEncoder *createVideoEncoderFromIndex(ADM_coreVideoFilter *chain,int index);
 /**
-    \fn createVideoEncoder
+    \fn createVideoStream
     \brief Create encoder then VideoStream from filterChain
     @return created VideoStream
 */
-ADM_videoStream  *createVideoEncoder(ADM_videoFilterChain *chain)
+ADM_videoStream  *createVideoStream(ADM_videoFilterChain *chain,int index)
 {
     int sz=chain->size();
     ADM_assert(sz);
     ADM_coreVideoFilter *filter=(*chain)[sz-1];
     ADM_assert(filter);
-    ADM_coreVideoEncoder *encoder=createVideoEncoder(filter);
+    ADM_coreVideoEncoder *encoder=createVideoEncoderFromIndex(filter,index);
     if(!encoder)
     {
         printf("[createVideoEncoder] Cannot create encoder\n");

Modified: branches/avidemux_2.6_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_bindings.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_bindings.cpp	2009-06-01 08:38:51 UTC (rev 4881)
+++ branches/avidemux_2.6_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_bindings.cpp	2009-06-01 09:04:30 UTC (rev 4882)
@@ -94,6 +94,8 @@
 extern uint32_t ADM_mx_getNbMuxers(void);
 extern const char *ADM_mx_getDisplayName(uint32_t i);
 
+extern const char *ADM_ve6_getMenuName(uint32_t index);
+extern uint32_t    ADM_ve6_getNbEncoders(void);
 
 #ifdef HAVE_AUDIO
 extern uint8_t AVDM_setVolume(int volume);
@@ -497,13 +499,13 @@
 	const char *name;
         GtkComboBox     *combo_box;
 
-                nbVid=encoderGetEncoderCount();
+                nbVid=ADM_ve6_getNbEncoders();
                 combo_box=GTK_COMBO_BOX(glade.getWidget(VIDEO_WIDGET));
                 gtk_combo_box_remove_text(combo_box,0);
                 printf("Found %d video encoder\n",nbVid);
                 for(uint32_t i=0;i<nbVid;i++)
                 {
-                        name=encoderGetIndexedName(i);
+                        name=ADM_ve6_getMenuName(i);
                         gtk_combo_box_append_text      (combo_box,QT_TR_NOOP(name));
                 }
 

Modified: branches/avidemux_2.6_branch_mean/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_plugins.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_plugins.cpp	2009-06-01 08:38:51 UTC (rev 4881)
+++ branches/avidemux_2.6_branch_mean/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_plugins.cpp	2009-06-01 09:04:30 UTC (rev 4882)
@@ -30,8 +30,8 @@
 bool     ADM_dm_getDemuxerInfo(int filter, const char **name, uint32_t *major,uint32_t *minor,uint32_t *patch);
 uint32_t ADM_mx_getNbMuxers(void);
 bool     ADM_mx_getMuxerInfo(int filter, const char **name, uint32_t *major,uint32_t *minor,uint32_t *patch);
-bool     ADM_ve6_getDemuxerInfo(int filter, const char **name, uint32_t *major,uint32_t *minor,uint32_t *patch);
-uint32_t ADM_ve6_getNbDemuxers(void);
+bool     ADM_ve6_getEncoderInfo(int filter, const char **name, uint32_t *major,uint32_t *minor,uint32_t *patch);
+uint32_t ADM_ve6_getNbEncoders(void);
 #define QT_TR_NOOP(x) x
 
 /* /Functions */
@@ -47,7 +47,7 @@
     uint32_t aeNbPlugin=ADM_ae_getPluginNbEncoders();
     uint32_t dmNbPlugin=ADM_dm_getNbDemuxers();
     uint32_t mxNbPlugin=ADM_mx_getNbMuxers();
-    uint32_t ve6NbPlugin=ADM_ve6_getNbDemuxers();
+    uint32_t ve6NbPlugin=ADM_ve6_getNbEncoders();
 
     // Audio Plugins
 
@@ -92,7 +92,7 @@
         char versionString[256];
         char infoString[256];
         char *end;
-            ADM_ve6_getDemuxerInfo(i, &name,&major,&minor,&patch);
+            ADM_ve6_getEncoderInfo(i, &name,&major,&minor,&patch);
             snprintf(versionString,255,"%02d.%02d.%02d",major,minor,patch);
             strncpy(infoString,name,255);
             if(strlen(infoString))

Modified: branches/avidemux_2.6_branch_mean/avidemux/gui_savenew.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/gui_savenew.cpp	2009-06-01 08:38:51 UTC (rev 4881)
+++ branches/avidemux_2.6_branch_mean/avidemux/gui_savenew.cpp	2009-06-01 09:04:30 UTC (rev 4882)
@@ -40,7 +40,7 @@
 
 ADM_muxer               *ADM_MuxerSpawnFromIndex(int index);
 extern ADM_audioStream  *createEncodingStream(uint64_t startTime,int32_t shift);
-extern ADM_videoStream  *createVideoEncoder(ADM_videoFilterChain *chain);
+extern ADM_videoStream  *createVideoStream(ADM_videoFilterChain *chain,int index);
 /**
     \fn A_Save
     \brief Instantiate & initiate streams to feed muxer
@@ -87,7 +87,7 @@
                 return 0;
         }
         // 2- Create Encoder
-        video=createVideoEncoder(chain);
+        video=createVideoStream(chain,1);
         if(!video)
         {
                 GUI_Error_HIG("Video","Cannot create encoder");



From mean at mail.berlios.de  Mon Jun  1 13:22:26 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Mon, 1 Jun 2009 13:22:26 +0200
Subject: [Avidemux-svn-commit] r4884 -
	branches/avidemux_2.6_branch_mean/avidemux/ADM_coreVideoEncoder/include
Message-ID: <200906011122.n51BMQxH007991@sheep.berlios.de>

Author: mean
Date: 2009-06-01 13:22:26 +0200 (Mon, 01 Jun 2009)
New Revision: 4884

Added:
   branches/avidemux_2.6_branch_mean/avidemux/ADM_coreVideoEncoder/include/ADM_encoderConf.h
Log:
[Encoder] Header for basic configuration

Added: branches/avidemux_2.6_branch_mean/avidemux/ADM_coreVideoEncoder/include/ADM_encoderConf.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/ADM_coreVideoEncoder/include/ADM_encoderConf.h	2009-06-01 11:22:15 UTC (rev 4883)
+++ branches/avidemux_2.6_branch_mean/avidemux/ADM_coreVideoEncoder/include/ADM_encoderConf.h	2009-06-01 11:22:26 UTC (rev 4884)
@@ -0,0 +1,58 @@
+/***************************************************************************
+                          ADM_vidEncode.hxx  -  description
+                             -------------------
+    begin                : Sun May 5 2002
+    copyright            : (C) 2002 by mean
+    email                : fixounet at free.fr
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+#ifndef ADM_VIDENCODE
+#define ADM_VIDENCODE
+
+typedef enum
+{
+  COMPRESS_CQ,
+  COMPRESS_CBR,
+  COMPRESS_2PASS,
+  COMPRESS_SAME,
+  COMPRESS_2PASS_BITRATE,
+  COMPRESS_AQ,
+  COMPRESS_MAX
+} COMPRESSION_MODE;
+
+#define ADM_ENC_CAP_CBR    		0x001
+#define ADM_ENC_CAP_CQ     		0x002
+#define ADM_ENC_CAP_AQ     		0x080
+#define ADM_ENC_CAP_2PASS  		0x004
+#define ADM_ENC_CAP_GLOBAL 		0x008
+#define ADM_ENC_CAP_2PASS_BR  	0x010
+#define ADM_ENC_CAP_SAME  		0x020
+
+#define ADM_EXTRA_PARAM_JS 0x100
+#define ADM_EXTRA_PARAM    0x200
+
+struct COMPRES_PARAMS
+{
+  const char *menuName;
+  const char *tagName;
+  const char *descriptor;
+  COMPRESSION_MODE mode;
+  uint32_t qz, bitrate, finalsize,avg_bitrate;  // avg_bitrate is in kb/s!!
+  uint32_t capabilities;
+  uint32_t extra_param;
+  void *extraSettings;
+  uint32_t extraSettingsLen;
+  uint8_t (*configure) (struct COMPRES_PARAMS * par);
+};
+
+//typedef struct COMPRES_PARAMS;
+
+#endif



From mean at mail.berlios.de  Mon Jun  1 14:50:23 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Mon, 1 Jun 2009 14:50:23 +0200
Subject: [Avidemux-svn-commit] r4885 -
	branches/avidemux_2.6_branch_mean/avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui
Message-ID: <200906011250.n51CoNww013392@sheep.berlios.de>

Author: mean
Date: 2009-06-01 14:50:23 +0200 (Mon, 01 Jun 2009)
New Revision: 4885

Modified:
   branches/avidemux_2.6_branch_mean/avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/Q_gui2.cpp
   branches/avidemux_2.6_branch_mean/avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/T_preview.cpp
Log:
[QT4] Change the way QT4 is initalized so that VDPAU can be probed

Modified: branches/avidemux_2.6_branch_mean/avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/Q_gui2.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/Q_gui2.cpp	2009-06-01 11:22:26 UTC (rev 4884)
+++ branches/avidemux_2.6_branch_mean/avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/Q_gui2.cpp	2009-06-01 12:50:23 UTC (rev 4885)
@@ -69,6 +69,10 @@
 static int currentFrame = 0;
 bool     ADM_ve6_getEncoderInfo(int filter, const char **name, uint32_t *major,uint32_t *minor,uint32_t *patch);
 uint32_t ADM_ve6_getNbEncoders(void);
+void UI_refreshCustomMenu(void);
+QWidget *QuiMainWindows=NULL;
+QGraphicsView *drawWindow=NULL;
+uint8_t UI_updateRecentMenu( void );
 
 #ifdef HAVE_AUDIO
 extern uint8_t AVDM_setVolume(int volume);
@@ -561,19 +565,42 @@
         UI_getDrawWidget,
         UI_getPreferredRender
         
-    };
+    };
+QApplication *myApplication=NULL;
+/**
+    \fn  UI_Init
+    \brief First part of UI initialization
+
+*/
 int UI_Init(int nargc,char **nargv)
 {
 	initTranslator();
 
 	global_argc=nargc;
 	global_argv=nargv;
-	ADM_renderLibInit(&UI_Hooks);
+	ADM_renderLibInit(&UI_Hooks);
+    Q_INIT_RESOURCE(avidemux);
+	Q_INIT_RESOURCE(filter);
+
+	myApplication=new QApplication (global_argc, global_argv);
+	myApplication->connect(myApplication, SIGNAL(lastWindowClosed()), myApplication, SLOT(quit()));
+
+	loadTranslator();
+
+	MainWindow *mw = new MainWindow();
+	mw->show();
+
+	QuiMainWindows = (QWidget*)mw;
+
+	uint32_t w, h;
+
+	UI_getPhysicalScreenSize(QuiMainWindows, &w,&h);
+	printf("The screen seems to be %u x %u px\n",w,h);
+
+	UI_QT4VideoWidget(mw->ui.frame_video);  // Add the widget that will handle video display
+	UI_updateRecentMenu();
 	return 0;
 }
-QWidget *QuiMainWindows=NULL;
-QGraphicsView *drawWindow=NULL;
-uint8_t UI_updateRecentMenu( void );
 
 void UI_refreshCustomMenu(void)
 {
@@ -633,35 +660,18 @@
 */
 int UI_RunApp(void)
 {
-	Q_INIT_RESOURCE(avidemux);
-	Q_INIT_RESOURCE(filter);
-
-	QApplication a(global_argc, global_argv);
-	a.connect(&a, SIGNAL(lastWindowClosed()), &a, SLOT(quit()));
-
-	loadTranslator();
-
-	MainWindow *mw = new MainWindow();
-	mw->show();
-
-	QuiMainWindows = (QWidget*)mw;
-
-	uint32_t w, h;
-
-	UI_getPhysicalScreenSize(QuiMainWindows, &w,&h);
-	printf("The screen seems to be %u x %u px\n",w,h);
-
-	UI_QT4VideoWidget(mw->ui.frame_video);  // Add the widget that will handle video display
-	UI_updateRecentMenu();
+	
 	setupMenus();
 	checkCrashFile();
 
 	if (global_argc >= 2)
 		automation();
 
-	a.exec();
+	myApplication->exec();
 
-	destroyTranslator();
+	destroyTranslator();
+    delete myApplication;
+    myApplication=NULL;
 }
 /**
     \fn searchTranslationTable(const char *name))

Modified: branches/avidemux_2.6_branch_mean/avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/T_preview.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/T_preview.cpp	2009-06-01 11:22:26 UTC (rev 4884)
+++ branches/avidemux_2.6_branch_mean/avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/T_preview.cpp	2009-06-01 12:50:23 UTC (rev 4885)
@@ -165,6 +165,7 @@
 */
 void UI_getWindowInfo(void *draw, GUI_WindowInfo *xinfo)
 {
+    ADM_assert(videoWindow);
 	QWidget* widget = videoWindow->parentWidget();
 
 #if defined(__WIN32)



From mean at mail.berlios.de  Mon Jun  1 15:17:10 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Mon, 1 Jun 2009 15:17:10 +0200
Subject: [Avidemux-svn-commit] r4886 -
	branches/avidemux_2.6_branch_mean/avidemux/ADM_coreVideoEncoder/src
Message-ID: <200906011317.n51DHArB020327@sheep.berlios.de>

Author: mean
Date: 2009-06-01 15:17:10 +0200 (Mon, 01 Jun 2009)
New Revision: 4886

Modified:
   branches/avidemux_2.6_branch_mean/avidemux/ADM_coreVideoEncoder/src/CMakeLists.txt
Log:
[win32]

Modified: branches/avidemux_2.6_branch_mean/avidemux/ADM_coreVideoEncoder/src/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/ADM_coreVideoEncoder/src/CMakeLists.txt	2009-06-01 12:50:23 UTC (rev 4885)
+++ branches/avidemux_2.6_branch_mean/avidemux/ADM_coreVideoEncoder/src/CMakeLists.txt	2009-06-01 13:17:10 UTC (rev 4886)
@@ -3,7 +3,7 @@
 )
 
 ADD_LIBRARY(ADM_coreVideoEncoder SHARED ${ADM_CoreVideoEncoder_SRCS})
-TARGET_LINK_LIBRARIES(ADM_coreVideoEncoder ADM_core)
+TARGET_LINK_LIBRARIES(ADM_coreVideoEncoder ADM_core ADM_coreImage)
 
 INSTALL(TARGETS ADM_coreVideoEncoder RUNTIME DESTINATION ${BIN_DIR}  LIBRARY DESTINATION lib  ARCHIVE DESTINATION lib)
 



From mean at mail.berlios.de  Mon Jun  1 15:24:04 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Mon, 1 Jun 2009 15:24:04 +0200
Subject: [Avidemux-svn-commit] r4887 - in
	branches/avidemux_2.6_branch_mean/avidemux: .
	ADM_userInterfaces/ADM_QT4/ADM_filters
Message-ID: <200906011324.n51DO4ql020793@sheep.berlios.de>

Author: mean
Date: 2009-06-01 15:24:04 +0200 (Mon, 01 Jun 2009)
New Revision: 4887

Modified:
   branches/avidemux_2.6_branch_mean/avidemux/ADM_userInterfaces/ADM_QT4/ADM_filters/Q_mainfilter.cpp
   branches/avidemux_2.6_branch_mean/avidemux/gui_savenew.cpp
Log:
[win32]

Modified: branches/avidemux_2.6_branch_mean/avidemux/ADM_userInterfaces/ADM_QT4/ADM_filters/Q_mainfilter.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/ADM_userInterfaces/ADM_QT4/ADM_filters/Q_mainfilter.cpp	2009-06-01 13:17:10 UTC (rev 4886)
+++ branches/avidemux_2.6_branch_mean/avidemux/ADM_userInterfaces/ADM_QT4/ADM_filters/Q_mainfilter.cpp	2009-06-01 13:24:04 UTC (rev 4887)
@@ -519,10 +519,12 @@
     connect((ui.toolButtonDown),SIGNAL(clicked(bool)),this,SLOT(down(bool)));
     connect((ui.toolButtonPartial),SIGNAL(clicked(bool)),this,SLOT(partial(bool)));
     connect(ui.buttonClose, SIGNAL(clicked(bool)), this, SLOT(accept()));
+#if 0
     connect(ui.pushButtonDVD, SIGNAL(clicked(bool)), this, SLOT(DVD(bool)));
     connect(ui.pushButtonVCD, SIGNAL(clicked(bool)), this, SLOT(VCD(bool)));
     connect(ui.pushButtonSVCD, SIGNAL(clicked(bool)), this, SLOT(SVCD(bool)));
     connect(ui.pushButtonHalfDVD, SIGNAL(clicked(bool)), this, SLOT(halfD1(bool)));
+#endif
 	connect(ui.pushButtonPreview, SIGNAL(clicked(bool)), this, SLOT(preview(bool)));
 
 	activeList->setItemDelegate(new FilterItemDelegate(activeList));

Modified: branches/avidemux_2.6_branch_mean/avidemux/gui_savenew.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/gui_savenew.cpp	2009-06-01 13:17:10 UTC (rev 4886)
+++ branches/avidemux_2.6_branch_mean/avidemux/gui_savenew.cpp	2009-06-01 13:24:04 UTC (rev 4887)
@@ -79,7 +79,7 @@
     }else
     {
         // 1- create filter chain
-        chain=createVideoFilterChain(0,10000000000);
+        chain=createVideoFilterChain(0,10000000000LL);
         if(!chain)
         {
                 GUI_Error_HIG("Video","Cannot instantiante video Chain");



From mean at mail.berlios.de  Mon Jun  1 15:28:18 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Mon, 1 Jun 2009 15:28:18 +0200
Subject: [Avidemux-svn-commit] r4888 -
	branches/avidemux_2.6_branch_mean/avidemux/ADM_userInterfaces/ADM_QT4/ADM_filters
Message-ID: <200906011328.n51DSIcN021128@sheep.berlios.de>

Author: mean
Date: 2009-06-01 15:28:18 +0200 (Mon, 01 Jun 2009)
New Revision: 4888

Modified:
   branches/avidemux_2.6_branch_mean/avidemux/ADM_userInterfaces/ADM_QT4/ADM_filters/Q_mainfilter.cpp
Log:
[win32]

Modified: branches/avidemux_2.6_branch_mean/avidemux/ADM_userInterfaces/ADM_QT4/ADM_filters/Q_mainfilter.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/ADM_userInterfaces/ADM_QT4/ADM_filters/Q_mainfilter.cpp	2009-06-01 13:24:04 UTC (rev 4887)
+++ branches/avidemux_2.6_branch_mean/avidemux/ADM_userInterfaces/ADM_QT4/ADM_filters/Q_mainfilter.cpp	2009-06-01 13:28:18 UTC (rev 4888)
@@ -243,7 +243,11 @@
             }
   
 }
+#if 1
 #define MAKE_BUTTON(button,call) \
+void filtermainWindow::button( bool b)  {}
+#else
+#define MAKE_BUTTON(button,call) \
 void filtermainWindow::button( bool b) \
 { \
     call(); \
@@ -251,10 +255,11 @@
     buildActiveFilterList ();  \
 	setSelected(nb_active_filter - 1); \
 }
-//MAKE_BUTTON(DVD,setDVD)
-//MAKE_BUTTON(VCD,setVCD)
-//MAKE_BUTTON(SVCD,setSVCD)
-//MAKE_BUTTON(halfD1,setHalfD1)
+#endif
+MAKE_BUTTON(DVD,setDVD)
+MAKE_BUTTON(VCD,setVCD)
+MAKE_BUTTON(SVCD,setSVCD)
+MAKE_BUTTON(halfD1,setHalfD1)
 /**
         \fn     configure( bool b)
         \brief  Configure the selected active filter



From mean at mail.berlios.de  Mon Jun  1 15:43:39 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Mon, 1 Jun 2009 15:43:39 +0200
Subject: [Avidemux-svn-commit] r4889 -
	branches/avidemux_2.6_branch_mean/cmake
Message-ID: <200906011343.n51DhdNH022109@sheep.berlios.de>

Author: mean
Date: 2009-06-01 15:43:39 +0200 (Mon, 01 Jun 2009)
New Revision: 4889

Modified:
   branches/avidemux_2.6_branch_mean/cmake/ve_plugin.cmake
Log:
[win32]

Modified: branches/avidemux_2.6_branch_mean/cmake/ve_plugin.cmake
===================================================================
--- branches/avidemux_2.6_branch_mean/cmake/ve_plugin.cmake	2009-06-01 13:28:18 UTC (rev 4888)
+++ branches/avidemux_2.6_branch_mean/cmake/ve_plugin.cmake	2009-06-01 13:43:39 UTC (rev 4889)
@@ -14,5 +14,5 @@
 
 MACRO(INSTALL_VIDEO_ENCODER _lib)
 	INSTALL(TARGETS ${_lib} DESTINATION "${CMAKE_INSTALL_PREFIX}/lib/ADM_plugins6/videoEncoders/")
-	TARGET_LINK_LIBRARIES(${_lib} ADM_core ADM_coreUI ADM_coreVideoEncoder )
+	TARGET_LINK_LIBRARIES(${_lib} ADM_core ADM_coreUI ADM_coreVideoEncoder ADM_coreImage)
 ENDMACRO(INSTALL_VIDEO_ENCODER)



From mean at mail.berlios.de  Thu Jun  4 19:49:10 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Thu, 4 Jun 2009 19:49:10 +0200
Subject: [Avidemux-svn-commit] r4892 - in
	branches/avidemux_2.6_branch_mean/plugins/ADM_videoEncoder: .
	jpeg png
Message-ID: <200906041749.n54HnAhc030500@sheep.berlios.de>

Author: mean
Date: 2009-06-04 19:49:09 +0200 (Thu, 04 Jun 2009)
New Revision: 4892

Added:
   branches/avidemux_2.6_branch_mean/plugins/ADM_videoEncoder/jpeg/
   branches/avidemux_2.6_branch_mean/plugins/ADM_videoEncoder/jpeg/ADM_jpegEncoder.cpp
   branches/avidemux_2.6_branch_mean/plugins/ADM_videoEncoder/jpeg/ADM_jpegEncoder.h
   branches/avidemux_2.6_branch_mean/plugins/ADM_videoEncoder/jpeg/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/plugins/ADM_videoEncoder/jpeg/jpegPlugin.cpp
   branches/avidemux_2.6_branch_mean/plugins/ADM_videoEncoder/png/
   branches/avidemux_2.6_branch_mean/plugins/ADM_videoEncoder/png/ADM_pngEncoder.cpp
   branches/avidemux_2.6_branch_mean/plugins/ADM_videoEncoder/png/ADM_pngEncoder.h
   branches/avidemux_2.6_branch_mean/plugins/ADM_videoEncoder/png/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/plugins/ADM_videoEncoder/png/pngPlugin.cpp
Log:
[Encoder] Dummy or simple encoder

Added: branches/avidemux_2.6_branch_mean/plugins/ADM_videoEncoder/jpeg/ADM_jpegEncoder.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/plugins/ADM_videoEncoder/jpeg/ADM_jpegEncoder.cpp	2009-06-04 17:49:05 UTC (rev 4891)
+++ branches/avidemux_2.6_branch_mean/plugins/ADM_videoEncoder/jpeg/ADM_jpegEncoder.cpp	2009-06-04 17:49:09 UTC (rev 4892)
@@ -0,0 +1,111 @@
+/***************************************************************************
+                          \fn ADM_VideoEncoders
+                          \brief Internal handling of video encoders
+                             -------------------
+    
+    copyright            : (C) 2002/2009 by mean
+    email                : fixounet at free.fr
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+#include "ADM_default.h"
+#include "ADM_jpegEncoder.h"
+
+/**
+        \fn ADM_jpegEncoder
+*/
+ADM_jpegEncoder::ADM_jpegEncoder(ADM_coreVideoFilter *src) : ADM_coreVideoEncoder(src)
+{
+    printf("[jpegEncoder] Creating.\n");
+    int w,h;
+    FilterInfo *info=src->getInfo();
+    w=info->width;
+    h=info->height;
+    image=new ADMImage(w,h);
+    plane=(w*h*3)/2;
+}
+/** 
+    \fn ~ADM_jpegEncoder
+*/
+ADM_jpegEncoder::~ADM_jpegEncoder()
+{
+    printf("[jpegEncoder] Destroying.\n");
+}
+/**
+    \fn getDisplayName
+*/
+
+const char *ADM_jpegEncoder::getDisplayName(void)
+{
+    return "jpeg Encoder";
+
+}
+/**
+    \fn getCodecName
+*/
+
+const char *ADM_jpegEncoder::getCodecName(void)
+{
+    return "jpeg";
+}
+/**
+    \fn getFCCHandler
+*/
+
+const char *ADM_jpegEncoder::getFCCHandler(void)
+{
+    return "jpeg";
+
+}
+/**
+    \fn configure
+*/
+bool        ADM_jpegEncoder::configure(void)
+{
+    return true;
+}
+
+/**
+    \fn getConfiguration
+*/
+bool        ADM_jpegEncoder::getConfiguration(uint32_t *l,uint8_t **d)
+{
+        *l=0;
+        *d=NULL;
+        return true;
+}
+
+/**
+    \fn setConfiguration
+*/
+bool        ADM_jpegEncoder::setConfiguration(uint32_t l,uint8_t *d)
+{
+        return true;
+}
+
+/**
+    \fn encode
+*/
+bool         ADM_jpegEncoder::encode (ADMBitstream * out)
+{
+    if(source->getNextFrame(image)==false)
+    {
+        printf("[jpeg] Cannot get next image\n");
+        return false;
+    }
+    ADM_assert(out->bufferSize>plane);
+    memcpy(out->data,image->data,plane);
+    out->len=plane;
+    out->pts=out->dts=image->Pts;
+    out->flags=AVI_KEY_FRAME;
+    return true;
+}
+
+// EOF

Added: branches/avidemux_2.6_branch_mean/plugins/ADM_videoEncoder/jpeg/ADM_jpegEncoder.h
===================================================================
--- branches/avidemux_2.6_branch_mean/plugins/ADM_videoEncoder/jpeg/ADM_jpegEncoder.h	2009-06-04 17:49:05 UTC (rev 4891)
+++ branches/avidemux_2.6_branch_mean/plugins/ADM_videoEncoder/jpeg/ADM_jpegEncoder.h	2009-06-04 17:49:09 UTC (rev 4892)
@@ -0,0 +1,47 @@
+/***************************************************************************
+                          \fn ADM_VideoEncoders
+                          \brief Internal handling of video encoders
+                             -------------------
+    
+    copyright            : (C) 2002/2009 by mean
+    email                : fixounet at free.fr
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+#ifndef ADM_jpeg_ENCODER_H
+#define ADM_jpeg_ENCODER_H
+#include "ADM_coreVideoEncoder.h"
+
+
+/**
+        \class ADM_jpegEncoder
+        \brief Dummy encoder that does nothing
+
+*/
+class ADM_jpegEncoder : public ADM_coreVideoEncoder
+{
+protected:
+               int plane;
+public:
+
+                            ADM_jpegEncoder(ADM_coreVideoFilter *src);
+                            ~ADM_jpegEncoder();
+virtual        bool         encode (ADMBitstream * out);
+virtual        const char *getDisplayName(void);       /// E.g. FFmpeg mpeg4      
+virtual        const char *getCodecName(void);         /// aka fourcc
+virtual        const char *getFCCHandler(void);        /// fourcc 2, needed to build AVI header
+
+virtual        bool        configure(void);           /// Pop-up UI
+virtual        bool        getConfiguration(uint32_t *l,uint8_t **d); /// Get current conf to save it
+virtual        bool        setConfiguration(uint32_t l,uint8_t *d);   /// Set conf, call it just after creation
+};
+
+
+#endif

Added: branches/avidemux_2.6_branch_mean/plugins/ADM_videoEncoder/jpeg/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/plugins/ADM_videoEncoder/jpeg/CMakeLists.txt	2009-06-04 17:49:05 UTC (rev 4891)
+++ branches/avidemux_2.6_branch_mean/plugins/ADM_videoEncoder/jpeg/CMakeLists.txt	2009-06-04 17:49:09 UTC (rev 4892)
@@ -0,0 +1,12 @@
+INCLUDE(ve_plugin)
+
+SET(jpeg_SRCS 
+        jpegPlugin.cpp
+        ADM_jpegEncoder.cpp
+)
+INCLUDE_DIRECTORIES(${CMAKE_CURRENT_BINARY_DIR})
+
+ADD_LIBRARY(ADM_ve_jpeg SHARED ${jpeg_SRCS})
+
+INIT_VIDEO_ENCODER(ADM_ve_jpeg)
+INSTALL_VIDEO_ENCODER(ADM_ve_jpeg)

Added: branches/avidemux_2.6_branch_mean/plugins/ADM_videoEncoder/jpeg/jpegPlugin.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/plugins/ADM_videoEncoder/jpeg/jpegPlugin.cpp	2009-06-04 17:49:05 UTC (rev 4891)
+++ branches/avidemux_2.6_branch_mean/plugins/ADM_videoEncoder/jpeg/jpegPlugin.cpp	2009-06-04 17:49:09 UTC (rev 4892)
@@ -0,0 +1,31 @@
+/***************************************************************************
+                          \fn     jpegPlugin
+                          \brief  Plugin for jpeg dummy encoder
+                             -------------------
+    
+    copyright            : (C) 2002/2009 by mean
+    email                : fixounet at free.fr
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+#include "ADM_default.h"
+#include "ADM_jpegEncoder.h"
+#include "ADM_coreVideoEncoderInternal.h"
+
+
+ADM_DECLARE_VIDEO_ENCODER_PREAMBLE(ADM_jpegEncoder);
+ADM_DECLARE_VIDEO_ENCODER_NO_CONFIG();
+ADM_DECLARE_VIDEO_ENCODER_MAIN("Mjpeg",
+                               "Mjpeg Encoder",
+                               "jpeg",
+                               "Simple jpeg Encoder (c) 2009 Mean",
+                                NULL, // No configuration
+                                ADM_UI_ALL,
+                                1,0,0);

Added: branches/avidemux_2.6_branch_mean/plugins/ADM_videoEncoder/png/ADM_pngEncoder.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/plugins/ADM_videoEncoder/png/ADM_pngEncoder.cpp	2009-06-04 17:49:05 UTC (rev 4891)
+++ branches/avidemux_2.6_branch_mean/plugins/ADM_videoEncoder/png/ADM_pngEncoder.cpp	2009-06-04 17:49:09 UTC (rev 4892)
@@ -0,0 +1,111 @@
+/***************************************************************************
+                          \fn ADM_VideoEncoders
+                          \brief Internal handling of video encoders
+                             -------------------
+    
+    copyright            : (C) 2002/2009 by mean
+    email                : fixounet at free.fr
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+#include "ADM_default.h"
+#include "ADM_pngEncoder.h"
+
+/**
+        \fn ADM_pngEncoder
+*/
+ADM_pngEncoder::ADM_pngEncoder(ADM_coreVideoFilter *src) : ADM_coreVideoEncoder(src)
+{
+    printf("[YV12Encoder] Creating.\n");
+    int w,h;
+    FilterInfo *info=src->getInfo();
+    w=info->width;
+    h=info->height;
+    image=new ADMImage(w,h);
+    plane=(w*h*3)/2;
+}
+/** 
+    \fn ~ADM_pngEncoder
+*/
+ADM_pngEncoder::~ADM_pngEncoder()
+{
+    printf("[YV12Encoder] Destroying.\n");
+}
+/**
+    \fn getDisplayName
+*/
+
+const char *ADM_pngEncoder::getDisplayName(void)
+{
+    return "YV12 Encoder";
+
+}
+/**
+    \fn getCodecName
+*/
+
+const char *ADM_pngEncoder::getCodecName(void)
+{
+    return "yv12";
+}
+/**
+    \fn getFCCHandler
+*/
+
+const char *ADM_pngEncoder::getFCCHandler(void)
+{
+    return "yv12";
+
+}
+/**
+    \fn configure
+*/
+bool        ADM_pngEncoder::configure(void)
+{
+    return true;
+}
+
+/**
+    \fn getConfiguration
+*/
+bool        ADM_pngEncoder::getConfiguration(uint32_t *l,uint8_t **d)
+{
+        *l=0;
+        *d=NULL;
+        return true;
+}
+
+/**
+    \fn setConfiguration
+*/
+bool        ADM_pngEncoder::setConfiguration(uint32_t l,uint8_t *d)
+{
+        return true;
+}
+
+/**
+    \fn encode
+*/
+bool         ADM_pngEncoder::encode (ADMBitstream * out)
+{
+    if(source->getNextFrame(image)==false)
+    {
+        printf("[YV12] Cannot get next image\n");
+        return false;
+    }
+    ADM_assert(out->bufferSize>plane);
+    memcpy(out->data,image->data,plane);
+    out->len=plane;
+    out->pts=out->dts=image->Pts;
+    out->flags=AVI_KEY_FRAME;
+    return true;
+}
+
+// EOF
\ No newline at end of file

Added: branches/avidemux_2.6_branch_mean/plugins/ADM_videoEncoder/png/ADM_pngEncoder.h
===================================================================
--- branches/avidemux_2.6_branch_mean/plugins/ADM_videoEncoder/png/ADM_pngEncoder.h	2009-06-04 17:49:05 UTC (rev 4891)
+++ branches/avidemux_2.6_branch_mean/plugins/ADM_videoEncoder/png/ADM_pngEncoder.h	2009-06-04 17:49:09 UTC (rev 4892)
@@ -0,0 +1,47 @@
+/***************************************************************************
+                          \fn ADM_VideoEncoders
+                          \brief Internal handling of video encoders
+                             -------------------
+    
+    copyright            : (C) 2002/2009 by mean
+    email                : fixounet at free.fr
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+#ifndef ADM_PNG_ENCODER_H
+#define ADM_PNG_ENCODER_H
+#include "ADM_coreVideoEncoder.h"
+
+
+/**
+        \class ADM_pngEncoder
+        \brief Dummy encoder that does nothing
+
+*/
+class ADM_pngEncoder : public ADM_coreVideoEncoder
+{
+protected:
+               int plane;
+public:
+
+                            ADM_pngEncoder(ADM_coreVideoFilter *src);
+                            ~ADM_pngEncoder();
+virtual        bool         encode (ADMBitstream * out);
+virtual        const char *getDisplayName(void);       /// E.g. FFmpeg mpeg4      
+virtual        const char *getCodecName(void);         /// aka fourcc
+virtual        const char *getFCCHandler(void);        /// fourcc 2, needed to build AVI header
+
+virtual        bool        configure(void);           /// Pop-up UI
+virtual        bool        getConfiguration(uint32_t *l,uint8_t **d); /// Get current conf to save it
+virtual        bool        setConfiguration(uint32_t l,uint8_t *d);   /// Set conf, call it just after creation
+};
+
+
+#endif
\ No newline at end of file

Added: branches/avidemux_2.6_branch_mean/plugins/ADM_videoEncoder/png/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/plugins/ADM_videoEncoder/png/CMakeLists.txt	2009-06-04 17:49:05 UTC (rev 4891)
+++ branches/avidemux_2.6_branch_mean/plugins/ADM_videoEncoder/png/CMakeLists.txt	2009-06-04 17:49:09 UTC (rev 4892)
@@ -0,0 +1,12 @@
+INCLUDE(ve_plugin)
+
+SET(png_SRCS 
+        pngPlugin.cpp
+        ADM_pngEncoder.cpp
+)
+INCLUDE_DIRECTORIES(${CMAKE_CURRENT_BINARY_DIR})
+
+ADD_LIBRARY(ADM_ve_png SHARED ${png_SRCS})
+TARGET_LINK_LIBRARIES(ADM_ve_png ${PNG_LIBRARIES})
+INIT_VIDEO_ENCODER(ADM_ve_png)
+INSTALL_VIDEO_ENCODER(ADM_ve_png)

Added: branches/avidemux_2.6_branch_mean/plugins/ADM_videoEncoder/png/pngPlugin.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/plugins/ADM_videoEncoder/png/pngPlugin.cpp	2009-06-04 17:49:05 UTC (rev 4891)
+++ branches/avidemux_2.6_branch_mean/plugins/ADM_videoEncoder/png/pngPlugin.cpp	2009-06-04 17:49:09 UTC (rev 4892)
@@ -0,0 +1,31 @@
+/***************************************************************************
+                          \fn     yv12Plugin
+                          \brief  Plugin for YV12 dummy encoder
+                             -------------------
+    
+    copyright            : (C) 2002/2009 by mean
+    email                : fixounet at free.fr
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+#include "ADM_default.h"
+#include "ADM_pngEncoder.h"
+#include "ADM_coreVideoEncoderInternal.h"
+
+
+ADM_DECLARE_VIDEO_ENCODER_PREAMBLE(ADM_pngEncoder);
+ADM_DECLARE_VIDEO_ENCODER_NO_CONFIG();
+ADM_DECLARE_VIDEO_ENCODER_MAIN("PNG",
+                               "PNG Encoder",
+                               "PNG ",
+                               "Simple PNG Encoder (c) 2009 Mean",
+                                NULL, // No configuration
+                                ADM_UI_ALL,
+                                1,0,0);
\ No newline at end of file



From mean at mail.berlios.de  Thu Jun  4 19:49:12 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Thu, 4 Jun 2009 19:49:12 +0200
Subject: [Avidemux-svn-commit] r4893 - in branches/avidemux_2.6_branch_mean:
	cmake plugins/ADM_videoEncoder plugins/ADM_videoEncoder/x264
	plugins/ADM_videoEncoder/x264/gtk
Message-ID: <200906041749.n54HnCEH030510@sheep.berlios.de>

Author: mean
Date: 2009-06-04 19:49:11 +0200 (Thu, 04 Jun 2009)
New Revision: 4893

Modified:
   branches/avidemux_2.6_branch_mean/cmake/ve_plugin.cmake
   branches/avidemux_2.6_branch_mean/plugins/ADM_videoEncoder/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/plugins/ADM_videoEncoder/x264/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/plugins/ADM_videoEncoder/x264/gtk/CMakeLists.txt
Log:
[Encoder] Dummy or simple encoder

Modified: branches/avidemux_2.6_branch_mean/cmake/ve_plugin.cmake
===================================================================
--- branches/avidemux_2.6_branch_mean/cmake/ve_plugin.cmake	2009-06-04 17:49:09 UTC (rev 4892)
+++ branches/avidemux_2.6_branch_mean/cmake/ve_plugin.cmake	2009-06-04 17:49:11 UTC (rev 4893)
@@ -1,6 +1,7 @@
 #
 #  Macro to declare an video encoder plugin
 #
+SET(VE_PLUGIN_DIR "${CMAKE_INSTALL_PREFIX}/lib/ADM_plugins6/videoEncoders/")
 MACRO(INIT_VIDEO_ENCODER _lib)
 	INCLUDE_DIRECTORIES("${AVIDEMUX_SOURCE_DIR}/avidemux/ADM_core/include")
 	INCLUDE_DIRECTORIES("${AVIDEMUX_SOURCE_DIR}/avidemux/ADM_coreVideoEncoder/include")
@@ -13,6 +14,7 @@
 ENDMACRO(INIT_VIDEO_ENCODER)
 
 MACRO(INSTALL_VIDEO_ENCODER _lib)
-	INSTALL(TARGETS ${_lib} DESTINATION "${CMAKE_INSTALL_PREFIX}/lib/ADM_plugins6/videoEncoders/")
+	INSTALL(TARGETS ${_lib} DESTINATION "${VE_PLUGIN_DIR}")
 	TARGET_LINK_LIBRARIES(${_lib} ADM_core ADM_coreUI ADM_coreVideoEncoder ADM_coreImage)
 ENDMACRO(INSTALL_VIDEO_ENCODER)
+

Modified: branches/avidemux_2.6_branch_mean/plugins/ADM_videoEncoder/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/plugins/ADM_videoEncoder/CMakeLists.txt	2009-06-04 17:49:09 UTC (rev 4892)
+++ branches/avidemux_2.6_branch_mean/plugins/ADM_videoEncoder/CMakeLists.txt	2009-06-04 17:49:11 UTC (rev 4893)
@@ -1,3 +1,6 @@
 #ADD_SUBDIRECTORY(ADM_vidEnc_x264)
 #ADD_SUBDIRECTORY(ADM_vidEnc_xvid)
+#ADD_SUBDIRECTORY(x264)
 ADD_SUBDIRECTORY(yv12)
+ADD_SUBDIRECTORY(png)
+ADD_SUBDIRECTORY(jpeg)

Modified: branches/avidemux_2.6_branch_mean/plugins/ADM_videoEncoder/x264/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/plugins/ADM_videoEncoder/x264/CMakeLists.txt	2009-06-04 17:49:09 UTC (rev 4892)
+++ branches/avidemux_2.6_branch_mean/plugins/ADM_videoEncoder/x264/CMakeLists.txt	2009-06-04 17:49:11 UTC (rev 4893)
@@ -18,13 +18,13 @@
 
 		CONFIGURE_FILE("${CMAKE_CURRENT_SOURCE_DIR}/config.h.cmake" "${CMAKE_CURRENT_BINARY_DIR}/config.h")
 
-		ADD_SUBDIRECTORY(gtk)
-		ADD_SUBDIRECTORY(qt4)
+		#ADD_SUBDIRECTORY(gtk)
+		#ADD_SUBDIRECTORY(qt4)
 		ADD_SUBDIRECTORY(xml)
-                ADD_LIBRARY(ADM_ve_x264 shared ADM_ve_x264_SRCS)
+                ADD_LIBRARY(ADM_ve_x264 SHARED ${ADM_ve_x264_SRCS})
                 INIT_VIDEO_ENCODER(ADM_ve_x264)
 		TARGET_LINK_LIBRARIES(ADM_ve_x264 ADM_core ${X264_LIBRARY_DIR} ${LIBXML2_LIBRARIES})
 		INSTALL_VIDEO_ENCODER(ADM_ve_x264)
-		INSTALL(FILES x264Param.xsd DESTINATION "${CMAKE_INSTALL_PREFIX}/lib/ADM_plugins6/videoEncoders/")
+		INSTALL(FILES x264Param.xsd DESTINATION "${VE_PLUGIN_DIR}")
 	ENDIF (LIBXML2_FOUND)
 ENDIF (X264_FOUND)

Modified: branches/avidemux_2.6_branch_mean/plugins/ADM_videoEncoder/x264/gtk/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/plugins/ADM_videoEncoder/x264/gtk/CMakeLists.txt	2009-06-04 17:49:09 UTC (rev 4892)
+++ branches/avidemux_2.6_branch_mean/plugins/ADM_videoEncoder/x264/gtk/CMakeLists.txt	2009-06-04 17:49:11 UTC (rev 4893)
@@ -1,6 +1,6 @@
 INCLUDE(admCheckGtk)
 INCLUDE(admCheckGettext)
-INCLUDE(admPluginVideoEncoder)
+INCLUDE(ve_plugin)
 
 checkGtk()
 
@@ -23,5 +23,5 @@
 	ENDIF(GETTEXT_FOUND)
 
 	INIT_VIDEO_ENCODER_PLUGIN(${GTK_PLUGIN_NAME})
-	INSTALL(TARGETS ${GTK_PLUGIN_NAME} DESTINATION "${VIDENC_INSTALL_DIR}${PLUGIN_SUBDIR}")
-ENDIF (GTK_FOUND AND GTHREAD_FOUND)
\ No newline at end of file
+	INSTALL(TARGETS ${GTK_PLUGIN_NAME} DESTINATION "${VE_PLUGIN_DIR}")
+ENDIF (GTK_FOUND AND GTHREAD_FOUND)



From mean at mail.berlios.de  Thu Jun  4 19:49:15 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Thu, 4 Jun 2009 19:49:15 +0200
Subject: [Avidemux-svn-commit] r4894 - in branches/avidemux_2.6_branch_mean:
	avidemux avidemux/ADM_coreVideoEncoder/include
	avidemux/ADM_coreVideoEncoder/src avidemux/ADM_muxerGate/src
	plugins/ADM_videoEncoder/jpeg plugins/ADM_videoEncoder/png
	plugins/ADM_videoEncoder/yv12
Message-ID: <200906041749.n54HnFpf030523@sheep.berlios.de>

Author: mean
Date: 2009-06-04 19:49:14 +0200 (Thu, 04 Jun 2009)
New Revision: 4894

Modified:
   branches/avidemux_2.6_branch_mean/avidemux/ADM_coreVideoEncoder/include/ADM_coreVideoEncoder.h
   branches/avidemux_2.6_branch_mean/avidemux/ADM_coreVideoEncoder/include/ADM_coreVideoEncoderInternal.h
   branches/avidemux_2.6_branch_mean/avidemux/ADM_coreVideoEncoder/src/ADM_dynVideoEncoder.cpp
   branches/avidemux_2.6_branch_mean/avidemux/ADM_lavcodec.h
   branches/avidemux_2.6_branch_mean/avidemux/ADM_muxerGate/src/ADM_videoProcess.cpp
   branches/avidemux_2.6_branch_mean/avidemux/gui_savenew.cpp
   branches/avidemux_2.6_branch_mean/plugins/ADM_videoEncoder/jpeg/ADM_jpegEncoder.cpp
   branches/avidemux_2.6_branch_mean/plugins/ADM_videoEncoder/jpeg/ADM_jpegEncoder.h
   branches/avidemux_2.6_branch_mean/plugins/ADM_videoEncoder/jpeg/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/plugins/ADM_videoEncoder/jpeg/jpegPlugin.cpp
   branches/avidemux_2.6_branch_mean/plugins/ADM_videoEncoder/png/ADM_pngEncoder.cpp
   branches/avidemux_2.6_branch_mean/plugins/ADM_videoEncoder/png/ADM_pngEncoder.h
   branches/avidemux_2.6_branch_mean/plugins/ADM_videoEncoder/png/pngPlugin.cpp
   branches/avidemux_2.6_branch_mean/plugins/ADM_videoEncoder/yv12/ADM_yv12Encoder.cpp
   branches/avidemux_2.6_branch_mean/plugins/ADM_videoEncoder/yv12/ADM_yv12Encoder.h
   branches/avidemux_2.6_branch_mean/plugins/ADM_videoEncoder/yv12/yv12Plugin.cpp
Log:
[encoder] First lavcodec based encoder : mjpeg

Modified: branches/avidemux_2.6_branch_mean/avidemux/ADM_coreVideoEncoder/include/ADM_coreVideoEncoder.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/ADM_coreVideoEncoder/include/ADM_coreVideoEncoder.h	2009-06-04 17:49:11 UTC (rev 4893)
+++ branches/avidemux_2.6_branch_mean/avidemux/ADM_coreVideoEncoder/include/ADM_coreVideoEncoder.h	2009-06-04 17:49:14 UTC (rev 4894)
@@ -39,23 +39,13 @@
 public:
                             ADM_coreVideoEncoder(ADM_coreVideoFilter *src);
                             ~ADM_coreVideoEncoder();
+virtual        bool         setup(void) {return true;}    /// Call once before using            
 virtual        bool         encode (ADMBitstream * out)=0;
 
-virtual        bool         setOption(ADM_coreEncoderOption option, int32_t val) {return true;} /// Set external header mode (ESDS atom & friends)
-virtual        bool         setFreeOption(const char *option, void *data) {return true;} /// Set external header mode (ESDS atom & friends)
-
-
 virtual        bool         isDualPass(void) {return false;}
 virtual        bool         startPass2(void) {return true;}
 virtual        bool         getExtraData(uint32_t *l,uint8_t **d) {*l=0;*d=NULL;return true;}
-
-virtual        const char *getDisplayName(void)=0;       /// E.g. FFmpeg mpeg4      
-virtual        const char *getCodecName(void)=0;         /// aka fourcc
-virtual        const char *getFCCHandler(void)=0;        /// fourcc 2, needed to build AVI header
-
-virtual        bool        configure(void)=0;           /// Pop-up UI
-virtual        bool        getConfiguration(uint32_t *l,uint8_t **d)=0; /// Get current conf to save it
-virtual        bool        setConfiguration(uint32_t l,uint8_t *d)=0;   /// Set conf, call it just after creation
+virtual const  char         *getFourcc(void) =0;
                uint32_t    getWidth(void) {return source->getInfo()->width;}
                uint32_t    getHeight(void) {return source->getInfo()->height;}
                uint32_t    getFrameIncrement(void) {return source->getInfo()->frameIncrement;}

Modified: branches/avidemux_2.6_branch_mean/avidemux/ADM_coreVideoEncoder/include/ADM_coreVideoEncoderInternal.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/ADM_coreVideoEncoder/include/ADM_coreVideoEncoderInternal.h	2009-06-04 17:49:11 UTC (rev 4893)
+++ branches/avidemux_2.6_branch_mean/avidemux/ADM_coreVideoEncoder/include/ADM_coreVideoEncoderInternal.h	2009-06-04 17:49:14 UTC (rev 4894)
@@ -30,7 +30,6 @@
 {
     const char   *encoderName;        // Internal name (tag)
     const char   *menuName;         // Displayed name (in menu)
-    const char   *fourCC;
     const char   *description;      // Short description
 
     uint32_t     apiVersion;            // const
@@ -97,11 +96,10 @@
 }
 
 
-#define ADM_DECLARE_VIDEO_ENCODER_MAIN(name,menuName,fourcc,desc,configure,uiType,maj,minV,patch) \
+#define ADM_DECLARE_VIDEO_ENCODER_MAIN(name,menuName,desc,configure,uiType,maj,minV,patch) \
 static ADM_videoEncoderDesc encoderDesc={\
     name,\
     menuName,\
-    fourcc,\
     desc,\
     ADM_VIDEO_ENCODER_API_VERSION,\
     &create,\

Modified: branches/avidemux_2.6_branch_mean/avidemux/ADM_coreVideoEncoder/src/ADM_dynVideoEncoder.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/ADM_coreVideoEncoder/src/ADM_dynVideoEncoder.cpp	2009-06-04 17:49:11 UTC (rev 4893)
+++ branches/avidemux_2.6_branch_mean/avidemux/ADM_coreVideoEncoder/src/ADM_dynVideoEncoder.cpp	2009-06-04 17:49:14 UTC (rev 4894)
@@ -60,7 +60,6 @@
 ADM_videoEncoderDesc copyDesc={
         "Copy",
         "Copy",
-        "Copy",
         "Copy encoder",
         ADM_VIDEO_ENCODER_API_VERSION, //uint32_t     apiVersion;            // const
 
@@ -200,6 +199,15 @@
     ADM_videoEncoder6 *plugin=ListOfEncoders[index];
 
     ADM_coreVideoEncoder *enc=plugin->desc->create(chain);
+    if(enc)
+    {
+        if(false==enc->setup())
+        {
+            printf("[createVideoEncoderFromIndex] Cannot setup encoder\n");
+            delete enc;
+            return NULL;
+        }
+    }
     return enc;
 }
 /**

Modified: branches/avidemux_2.6_branch_mean/avidemux/ADM_lavcodec.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/ADM_lavcodec.h	2009-06-04 17:49:11 UTC (rev 4893)
+++ branches/avidemux_2.6_branch_mean/avidemux/ADM_lavcodec.h	2009-06-04 17:49:14 UTC (rev 4894)
@@ -18,6 +18,7 @@
   #define  __ADM_LAVC
   extern "C"
   {  
+  #define __STDC_CONSTANT_MACROS // Lavcodec crap
   #include "ADM_libraries/ADM_ffmpeg/libavcodec/avcodec.h"
   };
 #endif

Modified: branches/avidemux_2.6_branch_mean/avidemux/ADM_muxerGate/src/ADM_videoProcess.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/ADM_muxerGate/src/ADM_videoProcess.cpp	2009-06-04 17:49:11 UTC (rev 4893)
+++ branches/avidemux_2.6_branch_mean/avidemux/ADM_muxerGate/src/ADM_videoProcess.cpp	2009-06-04 17:49:14 UTC (rev 4894)
@@ -27,7 +27,7 @@
 
     width=encoder->getWidth();
     height=encoder->getHeight();
-    fcc=encoder->getFCCHandler();
+    fcc=encoder->getFourcc();
     printf("[StreamProcess] Stream %"LU"x%"LU", codec : %s\n",width,height,fcc);
     fourCC=fourCC::get((uint8_t *)fcc);
     float f=encoder->getFrameIncrement();

Modified: branches/avidemux_2.6_branch_mean/avidemux/gui_savenew.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/gui_savenew.cpp	2009-06-04 17:49:11 UTC (rev 4893)
+++ branches/avidemux_2.6_branch_mean/avidemux/gui_savenew.cpp	2009-06-04 17:49:14 UTC (rev 4894)
@@ -87,7 +87,7 @@
                 return 0;
         }
         // 2- Create Encoder
-        video=createVideoStream(chain,1);
+        video=createVideoStream(chain,UI_GetCurrentFormat());
         if(!video)
         {
                 GUI_Error_HIG("Video","Cannot create encoder");

Modified: branches/avidemux_2.6_branch_mean/plugins/ADM_videoEncoder/jpeg/ADM_jpegEncoder.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/plugins/ADM_videoEncoder/jpeg/ADM_jpegEncoder.cpp	2009-06-04 17:49:11 UTC (rev 4893)
+++ branches/avidemux_2.6_branch_mean/plugins/ADM_videoEncoder/jpeg/ADM_jpegEncoder.cpp	2009-06-04 17:49:14 UTC (rev 4894)
@@ -15,9 +15,13 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
+#include "ADM_lavcodec.h"
 #include "ADM_default.h"
 #include "ADM_jpegEncoder.h"
 
+
+static int Quantizer=2;
+static ADM_colorspace color=ADM_COLOR_RGB24; //ADM_COLOR_YUV422;
 /**
         \fn ADM_jpegEncoder
 */
@@ -30,64 +34,84 @@
     h=info->height;
     image=new ADMImage(w,h);
     plane=(w*h*3)/2;
-}
-/** 
-    \fn ~ADM_jpegEncoder
-*/
-ADM_jpegEncoder::~ADM_jpegEncoder()
-{
-    printf("[jpegEncoder] Destroying.\n");
-}
-/**
-    \fn getDisplayName
-*/
+    _context = avcodec_alloc_context ();
+    ADM_assert (_context);
+    memset (&_frame, 0, sizeof (_frame));
+    _frame.pts = AV_NOPTS_VALUE;
+    _context->width = w;
+    _context->height = h;
+    _context->strict_std_compliance = -1;
+    // YV12
+    switch(color)
+    {
+        case ADM_COLOR_YUV422: _frame.linesize[0] = w*2; _context->pix_fmt =PIX_FMT_YUYV422;break;
+        case ADM_COLOR_RGB24 : _frame.linesize[0] = w*3; _context->pix_fmt =PIX_FMT_RGB24;break;
+        default: ADM_assert(0);
 
-const char *ADM_jpegEncoder::getDisplayName(void)
-{
-    return "jpeg Encoder";
-
+    }
+    _frame.linesize[1] = 0;//w >> 1;
+    _frame.linesize[2] = 0;//w >> 1;
+    //   
+    _frame.quality = (int) floor (FF_QP2LAMBDA * Quantizer+ 0.5);
+    rgbBuffer=new uint8_t [(w+7)*(h+7)*4];
 }
 /**
-    \fn getCodecName
+    \fn setup
 */
-
-const char *ADM_jpegEncoder::getCodecName(void)
+bool ADM_jpegEncoder::setup(void)
 {
-    return "jpeg";
-}
-/**
-    \fn getFCCHandler
-*/
-
-const char *ADM_jpegEncoder::getFCCHandler(void)
-{
-    return "jpeg";
-
-}
-/**
-    \fn configure
-*/
-bool        ADM_jpegEncoder::configure(void)
-{
+int res;
+AVCodec *codec=avcodec_find_encoder(CODEC_ID_MJPEG);
+if(!codec) 
+    {
+        printf("[Jpeg] Cannot find codec\n");
+        return false;
+    }
+   // capabilities = codec->capabilities & CODEC_CAP_DELAY ? ADM_ENC_REQ_NULL_FLUSH : 0; 
+   res=avcodec_open(_context, codec); 
+   if(res<0) 
+    {   printf("[Jpeg] Cannot open codec\n");
+        return false;
+    }
+    _context->flags |= CODEC_FLAG_QSCALE;
+    // Now allocate colorspace
+    int w,h;
+    FilterInfo *info=source->getInfo();
+    w=info->width;
+    h=info->height;
+    
+    colorSpace=new ADMColorspace(w,h,ADM_COLOR_YV12,color);
+    if(!colorSpace)
+    {
+        printf("[ADM_jpegEncoder] Cannot allocate colorspace\n");
+        return false;
+    }
     return true;
 }
 
-/**
-    \fn getConfiguration
-*/
-bool        ADM_jpegEncoder::getConfiguration(uint32_t *l,uint8_t **d)
-{
-        *l=0;
-        *d=NULL;
-        return true;
-}
 
-/**
-    \fn setConfiguration
+/** 
+    \fn ~ADM_jpegEncoder
 */
-bool        ADM_jpegEncoder::setConfiguration(uint32_t l,uint8_t *d)
+ADM_jpegEncoder::~ADM_jpegEncoder()
 {
-        return true;
+    printf("[jpegEncoder] Destroying.\n");
+    if (_context)
+    {
+        avcodec_close (_context);
+        ADM_dealloc (_context);
+        _context = NULL;
+    }
+    if(colorSpace)
+    {
+        delete colorSpace;
+        colorSpace=NULL;
+    }   
+    if(rgbBuffer)
+    {
+        delete [] rgbBuffer;
+        rgbBuffer=NULL;
+    }
 }
 
 /**
@@ -100,9 +124,25 @@
         printf("[jpeg] Cannot get next image\n");
         return false;
     }
-    ADM_assert(out->bufferSize>plane);
-    memcpy(out->data,image->data,plane);
-    out->len=plane;
+    // 1- Convert to RGB24
+     if(!colorSpace->convert(image->data,rgbBuffer))
+        {
+            printf("[ADM_jpegEncoder::encode] Colorconversion failed\n");
+            return false;
+        }
+           
+    _frame.data[0] = rgbBuffer;
+    _frame.data[2] = NULL;
+    _frame.data[1] = NULL;
+
+    int sz=0;
+    if ((sz = avcodec_encode_video (_context, out->data, out->bufferSize, &_frame)) < 0)
+    {
+        printf("[jpeg] Error %d encoding video\n",sz);
+        return false;
+    }
+    
+    out->len=sz;
     out->pts=out->dts=image->Pts;
     out->flags=AVI_KEY_FRAME;
     return true;

Modified: branches/avidemux_2.6_branch_mean/plugins/ADM_videoEncoder/jpeg/ADM_jpegEncoder.h
===================================================================
--- branches/avidemux_2.6_branch_mean/plugins/ADM_videoEncoder/jpeg/ADM_jpegEncoder.h	2009-06-04 17:49:11 UTC (rev 4893)
+++ branches/avidemux_2.6_branch_mean/plugins/ADM_videoEncoder/jpeg/ADM_jpegEncoder.h	2009-06-04 17:49:14 UTC (rev 4894)
@@ -18,8 +18,11 @@
 #ifndef ADM_jpeg_ENCODER_H
 #define ADM_jpeg_ENCODER_H
 #include "ADM_coreVideoEncoder.h"
-
-
+#include "ADM_colorspace.h"
+extern "C" 
+{
+#include "ADM_lavcodec.h"
+}
 /**
         \class ADM_jpegEncoder
         \brief Dummy encoder that does nothing
@@ -28,19 +31,18 @@
 class ADM_jpegEncoder : public ADM_coreVideoEncoder
 {
 protected:
-               int plane;
+               int              plane;
+               AVCodecContext   *_context;
+               AVFrame          _frame;
+               ADMColorspace    *colorSpace;
+               uint8_t          *rgbBuffer;
 public:
 
                             ADM_jpegEncoder(ADM_coreVideoFilter *src);
                             ~ADM_jpegEncoder();
-virtual        bool         encode (ADMBitstream * out);
-virtual        const char *getDisplayName(void);       /// E.g. FFmpeg mpeg4      
-virtual        const char *getCodecName(void);         /// aka fourcc
-virtual        const char *getFCCHandler(void);        /// fourcc 2, needed to build AVI header
-
-virtual        bool        configure(void);           /// Pop-up UI
-virtual        bool        getConfiguration(uint32_t *l,uint8_t **d); /// Get current conf to save it
-virtual        bool        setConfiguration(uint32_t l,uint8_t *d);   /// Set conf, call it just after creation
+virtual        bool        setup(void); 
+virtual        bool        encode (ADMBitstream * out);
+virtual const  char         *getFourcc(void) {return "jpeg";}
 };
 
 

Modified: branches/avidemux_2.6_branch_mean/plugins/ADM_videoEncoder/jpeg/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/plugins/ADM_videoEncoder/jpeg/CMakeLists.txt	2009-06-04 17:49:11 UTC (rev 4893)
+++ branches/avidemux_2.6_branch_mean/plugins/ADM_videoEncoder/jpeg/CMakeLists.txt	2009-06-04 17:49:14 UTC (rev 4894)
@@ -9,4 +9,7 @@
 ADD_LIBRARY(ADM_ve_jpeg SHARED ${jpeg_SRCS})
 
 INIT_VIDEO_ENCODER(ADM_ve_jpeg)
-INSTALL_VIDEO_ENCODER(ADM_ve_jpeg)
+INSTALL_VIDEO_ENCODER(ADM_ve_jpeg)
+
+INCLUDE_DIRECTORIES("${AVIDEMUX_SOURCE_DIR}/avidemux/")
+INCLUDE_DIRECTORIES("${AVIDEMUX_SOURCE_DIR}/avidemux/ADM_libraries/ADM_ffmpeg")

Modified: branches/avidemux_2.6_branch_mean/plugins/ADM_videoEncoder/jpeg/jpegPlugin.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/plugins/ADM_videoEncoder/jpeg/jpegPlugin.cpp	2009-06-04 17:49:11 UTC (rev 4893)
+++ branches/avidemux_2.6_branch_mean/plugins/ADM_videoEncoder/jpeg/jpegPlugin.cpp	2009-06-04 17:49:14 UTC (rev 4894)
@@ -24,7 +24,6 @@
 ADM_DECLARE_VIDEO_ENCODER_NO_CONFIG();
 ADM_DECLARE_VIDEO_ENCODER_MAIN("Mjpeg",
                                "Mjpeg Encoder",
-                               "jpeg",
                                "Simple jpeg Encoder (c) 2009 Mean",
                                 NULL, // No configuration
                                 ADM_UI_ALL,

Modified: branches/avidemux_2.6_branch_mean/plugins/ADM_videoEncoder/png/ADM_pngEncoder.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/plugins/ADM_videoEncoder/png/ADM_pngEncoder.cpp	2009-06-04 17:49:11 UTC (rev 4893)
+++ branches/avidemux_2.6_branch_mean/plugins/ADM_videoEncoder/png/ADM_pngEncoder.cpp	2009-06-04 17:49:14 UTC (rev 4894)
@@ -38,59 +38,9 @@
 {
     printf("[YV12Encoder] Destroying.\n");
 }
-/**
-    \fn getDisplayName
-*/
 
-const char *ADM_pngEncoder::getDisplayName(void)
-{
-    return "YV12 Encoder";
 
-}
 /**
-    \fn getCodecName
-*/
-
-const char *ADM_pngEncoder::getCodecName(void)
-{
-    return "yv12";
-}
-/**
-    \fn getFCCHandler
-*/
-
-const char *ADM_pngEncoder::getFCCHandler(void)
-{
-    return "yv12";
-
-}
-/**
-    \fn configure
-*/
-bool        ADM_pngEncoder::configure(void)
-{
-    return true;
-}
-
-/**
-    \fn getConfiguration
-*/
-bool        ADM_pngEncoder::getConfiguration(uint32_t *l,uint8_t **d)
-{
-        *l=0;
-        *d=NULL;
-        return true;
-}
-
-/**
-    \fn setConfiguration
-*/
-bool        ADM_pngEncoder::setConfiguration(uint32_t l,uint8_t *d)
-{
-        return true;
-}
-
-/**
     \fn encode
 */
 bool         ADM_pngEncoder::encode (ADMBitstream * out)

Modified: branches/avidemux_2.6_branch_mean/plugins/ADM_videoEncoder/png/ADM_pngEncoder.h
===================================================================
--- branches/avidemux_2.6_branch_mean/plugins/ADM_videoEncoder/png/ADM_pngEncoder.h	2009-06-04 17:49:11 UTC (rev 4893)
+++ branches/avidemux_2.6_branch_mean/plugins/ADM_videoEncoder/png/ADM_pngEncoder.h	2009-06-04 17:49:14 UTC (rev 4894)
@@ -34,13 +34,7 @@
                             ADM_pngEncoder(ADM_coreVideoFilter *src);
                             ~ADM_pngEncoder();
 virtual        bool         encode (ADMBitstream * out);
-virtual        const char *getDisplayName(void);       /// E.g. FFmpeg mpeg4      
-virtual        const char *getCodecName(void);         /// aka fourcc
-virtual        const char *getFCCHandler(void);        /// fourcc 2, needed to build AVI header
-
-virtual        bool        configure(void);           /// Pop-up UI
-virtual        bool        getConfiguration(uint32_t *l,uint8_t **d); /// Get current conf to save it
-virtual        bool        setConfiguration(uint32_t l,uint8_t *d);   /// Set conf, call it just after creation
+virtual const  char         *getFourcc(void) {return "png ";}
 };
 
 

Modified: branches/avidemux_2.6_branch_mean/plugins/ADM_videoEncoder/png/pngPlugin.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/plugins/ADM_videoEncoder/png/pngPlugin.cpp	2009-06-04 17:49:11 UTC (rev 4893)
+++ branches/avidemux_2.6_branch_mean/plugins/ADM_videoEncoder/png/pngPlugin.cpp	2009-06-04 17:49:14 UTC (rev 4894)
@@ -24,7 +24,6 @@
 ADM_DECLARE_VIDEO_ENCODER_NO_CONFIG();
 ADM_DECLARE_VIDEO_ENCODER_MAIN("PNG",
                                "PNG Encoder",
-                               "PNG ",
                                "Simple PNG Encoder (c) 2009 Mean",
                                 NULL, // No configuration
                                 ADM_UI_ALL,

Modified: branches/avidemux_2.6_branch_mean/plugins/ADM_videoEncoder/yv12/ADM_yv12Encoder.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/plugins/ADM_videoEncoder/yv12/ADM_yv12Encoder.cpp	2009-06-04 17:49:11 UTC (rev 4893)
+++ branches/avidemux_2.6_branch_mean/plugins/ADM_videoEncoder/yv12/ADM_yv12Encoder.cpp	2009-06-04 17:49:14 UTC (rev 4894)
@@ -38,59 +38,9 @@
 {
     printf("[YV12Encoder] Destroying.\n");
 }
-/**
-    \fn getDisplayName
-*/
 
-const char *ADM_yv12Encoder::getDisplayName(void)
-{
-    return "YV12 Encoder";
 
-}
 /**
-    \fn getCodecName
-*/
-
-const char *ADM_yv12Encoder::getCodecName(void)
-{
-    return "yv12";
-}
-/**
-    \fn getFCCHandler
-*/
-
-const char *ADM_yv12Encoder::getFCCHandler(void)
-{
-    return "yv12";
-
-}
-/**
-    \fn configure
-*/
-bool        ADM_yv12Encoder::configure(void)
-{
-    return true;
-}
-
-/**
-    \fn getConfiguration
-*/
-bool        ADM_yv12Encoder::getConfiguration(uint32_t *l,uint8_t **d)
-{
-        *l=0;
-        *d=NULL;
-        return true;
-}
-
-/**
-    \fn setConfiguration
-*/
-bool        ADM_yv12Encoder::setConfiguration(uint32_t l,uint8_t *d)
-{
-        return true;
-}
-
-/**
     \fn encode
 */
 bool         ADM_yv12Encoder::encode (ADMBitstream * out)

Modified: branches/avidemux_2.6_branch_mean/plugins/ADM_videoEncoder/yv12/ADM_yv12Encoder.h
===================================================================
--- branches/avidemux_2.6_branch_mean/plugins/ADM_videoEncoder/yv12/ADM_yv12Encoder.h	2009-06-04 17:49:11 UTC (rev 4893)
+++ branches/avidemux_2.6_branch_mean/plugins/ADM_videoEncoder/yv12/ADM_yv12Encoder.h	2009-06-04 17:49:14 UTC (rev 4894)
@@ -34,13 +34,7 @@
                             ADM_yv12Encoder(ADM_coreVideoFilter *src);
                             ~ADM_yv12Encoder();
 virtual        bool         encode (ADMBitstream * out);
-virtual        const char *getDisplayName(void);       /// E.g. FFmpeg mpeg4      
-virtual        const char *getCodecName(void);         /// aka fourcc
-virtual        const char *getFCCHandler(void);        /// fourcc 2, needed to build AVI header
-
-virtual        bool        configure(void);           /// Pop-up UI
-virtual        bool        getConfiguration(uint32_t *l,uint8_t **d); /// Get current conf to save it
-virtual        bool        setConfiguration(uint32_t l,uint8_t *d);   /// Set conf, call it just after creation
+virtual const  char         *getFourcc(void) {return "YV12";}
 };
 
 

Modified: branches/avidemux_2.6_branch_mean/plugins/ADM_videoEncoder/yv12/yv12Plugin.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/plugins/ADM_videoEncoder/yv12/yv12Plugin.cpp	2009-06-04 17:49:11 UTC (rev 4893)
+++ branches/avidemux_2.6_branch_mean/plugins/ADM_videoEncoder/yv12/yv12Plugin.cpp	2009-06-04 17:49:14 UTC (rev 4894)
@@ -24,7 +24,6 @@
 ADM_DECLARE_VIDEO_ENCODER_NO_CONFIG();
 ADM_DECLARE_VIDEO_ENCODER_MAIN("YV12Encoder",
                                "YV12 Encoder",
-                               "YV12",
                                "Simple YV12 Encoder (c) 2009 Mean",
                                 NULL, // No configuration
                                 ADM_UI_ALL,



From mean at mail.berlios.de  Fri Jun  5 20:06:55 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Fri, 5 Jun 2009 20:06:55 +0200
Subject: [Avidemux-svn-commit] r4895 -
	branches/avidemux_2.6_branch_mean/plugins/ADM_videoEncoder/jpeg
Message-ID: <200906051806.n55I6tn7010586@sheep.berlios.de>

Author: mean
Date: 2009-06-05 20:06:55 +0200 (Fri, 05 Jun 2009)
New Revision: 4895

Modified:
   branches/avidemux_2.6_branch_mean/plugins/ADM_videoEncoder/jpeg/ADM_jpegEncoder.cpp
   branches/avidemux_2.6_branch_mean/plugins/ADM_videoEncoder/jpeg/ADM_jpegEncoder.h
Log:
[mjpeg] basic mjpeg encoder

Modified: branches/avidemux_2.6_branch_mean/plugins/ADM_videoEncoder/jpeg/ADM_jpegEncoder.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/plugins/ADM_videoEncoder/jpeg/ADM_jpegEncoder.cpp	2009-06-04 17:49:14 UTC (rev 4894)
+++ branches/avidemux_2.6_branch_mean/plugins/ADM_videoEncoder/jpeg/ADM_jpegEncoder.cpp	2009-06-05 18:06:55 UTC (rev 4895)
@@ -21,7 +21,7 @@
 
 
 static int Quantizer=2;
-static ADM_colorspace color=ADM_COLOR_RGB24; //ADM_COLOR_YUV422;
+static ADM_colorspace color=ADM_COLOR_YV12; //ADM_COLOR_RGB32A; //ADM_COLOR_YV12;
 /**
         \fn ADM_jpegEncoder
 */
@@ -42,18 +42,38 @@
     _context->height = h;
     _context->strict_std_compliance = -1;
     // YV12
-    switch(color)
+  
+    rgbBuffer=new uint8_t [(w+7)*(h+7)*4];
+}
+/**
+    \fn prolog
+
+*/
+
+bool ADM_jpegEncoder::prolog(void)
+{
+  uint32_t w=getWidth();
+  switch(color)
     {
-        case ADM_COLOR_YUV422: _frame.linesize[0] = w*2; _context->pix_fmt =PIX_FMT_YUYV422;break;
-        case ADM_COLOR_RGB24 : _frame.linesize[0] = w*3; _context->pix_fmt =PIX_FMT_RGB24;break;
+        case ADM_COLOR_YV12:    _frame.linesize[0] = w; 
+                                _frame.linesize[1] = w>>1; 
+                                _frame.linesize[2] = w>>1; 
+                                _context->pix_fmt =PIX_FMT_YUV420P;break;
+        case ADM_COLOR_RGB32A : _frame.linesize[0] = w*4;
+                                _frame.linesize[1] = 0;//w >> 1;
+                                _frame.linesize[2] = 0;//w >> 1;
+                                _context->pix_fmt =PIX_FMT_RGB32;break;
         default: ADM_assert(0);
 
     }
-    _frame.linesize[1] = 0;//w >> 1;
-    _frame.linesize[2] = 0;//w >> 1;
-    //   
     _frame.quality = (int) floor (FF_QP2LAMBDA * Quantizer+ 0.5);
-    rgbBuffer=new uint8_t [(w+7)*(h+7)*4];
+    // Eval fps
+    uint64_t f=source->getInfo()->frameIncrement;
+    if(!f) f=40000;
+    _context->time_base.den=f;
+    _context->time_base.num=1000000;
+    
+    return true;
 }
 /**
     \fn setup
@@ -68,6 +88,7 @@
         return false;
     }
    // capabilities = codec->capabilities & CODEC_CAP_DELAY ? ADM_ENC_REQ_NULL_FLUSH : 0; 
+   prolog();
    res=avcodec_open(_context, codec); 
    if(res<0) 
     {   printf("[Jpeg] Cannot open codec\n");
@@ -79,12 +100,14 @@
     FilterInfo *info=source->getInfo();
     w=info->width;
     h=info->height;
-    
-    colorSpace=new ADMColorspace(w,h,ADM_COLOR_YV12,color);
-    if(!colorSpace)
+    if(color!=ADM_COLOR_YV12)
     {
-        printf("[ADM_jpegEncoder] Cannot allocate colorspace\n");
-        return false;
+        colorSpace=new ADMColorspace(w,h,ADM_COLOR_YV12,color);
+        if(!colorSpace)
+        {
+            printf("[ADM_jpegEncoder] Cannot allocate colorspace\n");
+            return false;
+        }
     }
     return true;
 }
@@ -119,22 +142,34 @@
 */
 bool         ADM_jpegEncoder::encode (ADMBitstream * out)
 {
+uint8_t *from;
     if(source->getNextFrame(image)==false)
     {
         printf("[jpeg] Cannot get next image\n");
         return false;
     }
-    // 1- Convert to RGB24
-     if(!colorSpace->convert(image->data,rgbBuffer))
-        {
-            printf("[ADM_jpegEncoder::encode] Colorconversion failed\n");
-            return false;
-        }
-           
-    _frame.data[0] = rgbBuffer;
-    _frame.data[2] = NULL;
-    _frame.data[1] = NULL;
-
+    prolog();
+    switch(color)
+    {
+        case ADM_COLOR_YV12:      
+                _frame.data[0] = image->GetWritePtr(PLANAR_Y);
+                _frame.data[2] = image->GetWritePtr(PLANAR_U);
+                _frame.data[1] = image->GetWritePtr(PLANAR_V);
+                break;
+        case ADM_COLOR_RGB32A:
+          
+                if(!colorSpace->convert(image->data,rgbBuffer))
+                {
+                    printf("[ADM_jpegEncoder::encode] Colorconversion failed\n");
+                    return false;
+                }
+                _frame.data[0] = rgbBuffer;
+                _frame.data[2] = NULL;
+                _frame.data[1] = NULL;
+                break;
+        default:
+                ADM_assert(0);
+    }
     int sz=0;
     if ((sz = avcodec_encode_video (_context, out->data, out->bufferSize, &_frame)) < 0)
     {

Modified: branches/avidemux_2.6_branch_mean/plugins/ADM_videoEncoder/jpeg/ADM_jpegEncoder.h
===================================================================
--- branches/avidemux_2.6_branch_mean/plugins/ADM_videoEncoder/jpeg/ADM_jpegEncoder.h	2009-06-04 17:49:14 UTC (rev 4894)
+++ branches/avidemux_2.6_branch_mean/plugins/ADM_videoEncoder/jpeg/ADM_jpegEncoder.h	2009-06-05 18:06:55 UTC (rev 4895)
@@ -36,6 +36,7 @@
                AVFrame          _frame;
                ADMColorspace    *colorSpace;
                uint8_t          *rgbBuffer;
+                bool            prolog(void);
 public:
 
                             ADM_jpegEncoder(ADM_coreVideoFilter *src);



From mean at mail.berlios.de  Fri Jun  5 20:06:57 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Fri, 5 Jun 2009 20:06:57 +0200
Subject: [Avidemux-svn-commit] r4896 - in branches/avidemux_2.6_branch_mean:
	avidemux/ADM_coreImage/src
	avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2
	plugins/ADM_videoEncoder/jpeg
Message-ID: <200906051806.n55I6vCA010596@sheep.berlios.de>

Author: mean
Date: 2009-06-05 20:06:57 +0200 (Fri, 05 Jun 2009)
New Revision: 4896

Modified:
   branches/avidemux_2.6_branch_mean/avidemux/ADM_coreImage/src/ADM_colorspace.cpp
   branches/avidemux_2.6_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_bindings.cpp
   branches/avidemux_2.6_branch_mean/plugins/ADM_videoEncoder/jpeg/ADM_jpegEncoder.cpp
   branches/avidemux_2.6_branch_mean/plugins/ADM_videoEncoder/jpeg/jpegPlugin.cpp
Log:
[encoder] Simple mjpeg encoder + support more colorspace

Modified: branches/avidemux_2.6_branch_mean/avidemux/ADM_coreImage/src/ADM_colorspace.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/ADM_coreImage/src/ADM_colorspace.cpp	2009-06-05 18:06:55 UTC (rev 4895)
+++ branches/avidemux_2.6_branch_mean/avidemux/ADM_coreImage/src/ADM_colorspace.cpp	2009-06-05 18:06:57 UTC (rev 4896)
@@ -52,6 +52,7 @@
   {
     case ADM_COLOR_YV12: return PIX_FMT_YUV420P;
     case ADM_COLOR_YUV422P: return PIX_FMT_YUV422P;
+    case ADM_COLOR_RGB32A: return PIX_FMT_RGB32;
     default : ADM_assert(0); 
   }
   return PIX_FMT_YUV420P;
@@ -80,7 +81,14 @@
             srcStride[1]=width>>1;
             srcStride[2]=width>>1;
             break;
-
+    case ADM_COLOR_RGB32A:
+            srcData[0]=from;
+            srcData[1]=NULL;
+            srcData[2]=NULL;
+            srcStride[0]=width*4;
+            srcStride[1]=0;
+            srcStride[2]=0;
+            break;
     default:
         ADM_assert(0);
   }

Modified: branches/avidemux_2.6_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_bindings.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_bindings.cpp	2009-06-05 18:06:55 UTC (rev 4895)
+++ branches/avidemux_2.6_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_bindings.cpp	2009-06-05 18:06:57 UTC (rev 4896)
@@ -186,7 +186,7 @@
 
 	{"buttonFilters"		,"clicked"		,ACT_VideoParameter},
 	{"buttonAudioFilter"	,"clicked"		,ACT_AudioFilters},
-	{"buttonConfV"			,"clicked"		,ACT_SetMuxParam},
+	{"buttonConfV"			,"clicked"		,ACT_VideoConfigure},
 	{"buttonConfA"			,"clicked"		,ACT_AudioCodec},
 	{"buttonConfF"			,"clicked"		,ACT_SetMuxParam},
 

Modified: branches/avidemux_2.6_branch_mean/plugins/ADM_videoEncoder/jpeg/ADM_jpegEncoder.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/plugins/ADM_videoEncoder/jpeg/ADM_jpegEncoder.cpp	2009-06-05 18:06:55 UTC (rev 4895)
+++ branches/avidemux_2.6_branch_mean/plugins/ADM_videoEncoder/jpeg/ADM_jpegEncoder.cpp	2009-06-05 18:06:57 UTC (rev 4896)
@@ -18,10 +18,10 @@
 #include "ADM_lavcodec.h"
 #include "ADM_default.h"
 #include "ADM_jpegEncoder.h"
+#include "DIA_factory.h"
 
-
-static int Quantizer=2;
-static ADM_colorspace color=ADM_COLOR_YV12; //ADM_COLOR_RGB32A; //ADM_COLOR_YV12;
+static uint32_t Quantizer=2;
+static ADM_colorspace color=ADM_COLOR_YUV422P; //ADM_COLOR_YUV422P; //ADM_COLOR_YV12;
 /**
         \fn ADM_jpegEncoder
 */
@@ -29,9 +29,10 @@
 {
     printf("[jpegEncoder] Creating.\n");
     int w,h;
-    FilterInfo *info=src->getInfo();
-    w=info->width;
-    h=info->height;
+   
+    w=getWidth();
+    h=getHeight();
+
     image=new ADMImage(w,h);
     plane=(w*h*3)/2;
     _context = avcodec_alloc_context ();
@@ -41,8 +42,7 @@
     _context->width = w;
     _context->height = h;
     _context->strict_std_compliance = -1;
-    // YV12
-  
+    // For RGB we need a temp buffer...  
     rgbBuffer=new uint8_t [(w+7)*(h+7)*4];
 }
 /**
@@ -52,13 +52,19 @@
 
 bool ADM_jpegEncoder::prolog(void)
 {
-  uint32_t w=getWidth();
+  int w=getWidth();
+  int h=getHeight();
+
   switch(color)
     {
         case ADM_COLOR_YV12:    _frame.linesize[0] = w; 
                                 _frame.linesize[1] = w>>1; 
                                 _frame.linesize[2] = w>>1; 
                                 _context->pix_fmt =PIX_FMT_YUV420P;break;
+        case ADM_COLOR_YUV422P: _frame.linesize[0] = w; 
+                                _frame.linesize[1] = w>>1;
+                                _frame.linesize[2] = w>>1;
+                                _context->pix_fmt =PIX_FMT_YUV422P;break;
         case ADM_COLOR_RGB32A : _frame.linesize[0] = w*4;
                                 _frame.linesize[1] = 0;//w >> 1;
                                 _frame.linesize[2] = 0;//w >> 1;
@@ -156,8 +162,23 @@
                 _frame.data[2] = image->GetWritePtr(PLANAR_U);
                 _frame.data[1] = image->GetWritePtr(PLANAR_V);
                 break;
+
+        case ADM_COLOR_YUV422P:
+        {
+              int w=getWidth();
+              int h=getHeight();
+
+                if(!colorSpace->convert(image->data,rgbBuffer))
+                {
+                    printf("[ADM_jpegEncoder::encode] Colorconversion failed\n");
+                    return false;
+                }
+                _frame.data[0] = rgbBuffer;
+                _frame.data[2] = rgbBuffer+(w*h);
+                _frame.data[1] = rgbBuffer+(w*h*3)/2;
+                break;
+        }
         case ADM_COLOR_RGB32A:
-          
                 if(!colorSpace->convert(image->data,rgbBuffer))
                 {
                     printf("[ADM_jpegEncoder::encode] Colorconversion failed\n");
@@ -182,5 +203,32 @@
     out->flags=AVI_KEY_FRAME;
     return true;
 }
+/**
+    \fn jpegConfigure
+    \brief UI configuration for jpeg encoder
+*/
+static const diaMenuEntry colorMenus[2]=
+    {
+	{ADM_COLOR_YUV422P,QT_TR_NOOP("YUV422")},
+	{ADM_COLOR_YV12,QT_TR_NOOP("YUV420")},
+};
 
+bool         jpegConfigure(void)
+{
+uint32_t colorM;
+    printf("[jpeg] Configure\n");
+    colorM=(uint32_t)color;
+
+    diaElemUInteger  q(&(Quantizer),QT_TR_NOOP("_Quantizer:"),2,31);
+    diaElemMenu      c(&colorM,QT_TR_NOOP("_ColorSpace:"),2,colorMenus);
+
+    diaElem *elems[2]={&q,&c};
+    
+  if( diaFactoryRun(QT_TR_NOOP("Mjpeg Configuration"),2 ,elems))
+  {
+    color=(ADM_colorspace)colorM;
+    return false;
+  }
+  return true;
+}
 // EOF

Modified: branches/avidemux_2.6_branch_mean/plugins/ADM_videoEncoder/jpeg/jpegPlugin.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/plugins/ADM_videoEncoder/jpeg/jpegPlugin.cpp	2009-06-05 18:06:55 UTC (rev 4895)
+++ branches/avidemux_2.6_branch_mean/plugins/ADM_videoEncoder/jpeg/jpegPlugin.cpp	2009-06-05 18:06:57 UTC (rev 4896)
@@ -19,12 +19,13 @@
 #include "ADM_jpegEncoder.h"
 #include "ADM_coreVideoEncoderInternal.h"
 
+extern bool         jpegConfigure(void);
 
 ADM_DECLARE_VIDEO_ENCODER_PREAMBLE(ADM_jpegEncoder);
 ADM_DECLARE_VIDEO_ENCODER_NO_CONFIG();
 ADM_DECLARE_VIDEO_ENCODER_MAIN("Mjpeg",
                                "Mjpeg Encoder",
                                "Simple jpeg Encoder (c) 2009 Mean",
-                                NULL, // No configuration
+                                jpegConfigure, // No configuration
                                 ADM_UI_ALL,
                                 1,0,0);



From mean at mail.berlios.de  Sat Jun  6 21:00:00 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sat, 6 Jun 2009 21:00:00 +0200
Subject: [Avidemux-svn-commit] r4897 -
	branches/avidemux_2.6_branch_mean/plugins/ADM_videoEncoder/jpeg
Message-ID: <200906061900.n56J00Cp019315@sheep.berlios.de>

Author: mean
Date: 2009-06-06 21:00:00 +0200 (Sat, 06 Jun 2009)
New Revision: 4897

Modified:
   branches/avidemux_2.6_branch_mean/plugins/ADM_videoEncoder/jpeg/CMakeLists.txt
Log:
[jpeg] Need to link to liavcodec

Modified: branches/avidemux_2.6_branch_mean/plugins/ADM_videoEncoder/jpeg/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/plugins/ADM_videoEncoder/jpeg/CMakeLists.txt	2009-06-05 18:06:57 UTC (rev 4896)
+++ branches/avidemux_2.6_branch_mean/plugins/ADM_videoEncoder/jpeg/CMakeLists.txt	2009-06-06 19:00:00 UTC (rev 4897)
@@ -10,6 +10,6 @@
 
 INIT_VIDEO_ENCODER(ADM_ve_jpeg)
 INSTALL_VIDEO_ENCODER(ADM_ve_jpeg)
-
+TARGET_LINK_LIBRARIES(ADM_ve_jpeg ADM_libavcodec ADM_libavutil)
 INCLUDE_DIRECTORIES("${AVIDEMUX_SOURCE_DIR}/avidemux/")
 INCLUDE_DIRECTORIES("${AVIDEMUX_SOURCE_DIR}/avidemux/ADM_libraries/ADM_ffmpeg")



From mean at mail.berlios.de  Sat Jun  6 21:00:02 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sat, 6 Jun 2009 21:00:02 +0200
Subject: [Avidemux-svn-commit] r4898 -
	branches/avidemux_2.6_branch_mean/plugins/ADM_muxers/muxerAvi
Message-ID: <200906061900.n56J02vs019352@sheep.berlios.de>

Author: mean
Date: 2009-06-06 21:00:02 +0200 (Sat, 06 Jun 2009)
New Revision: 4898

Modified:
   branches/avidemux_2.6_branch_mean/plugins/ADM_muxers/muxerAvi/muxerAvi.cpp
Log:
[AviMuxer] Silence

Modified: branches/avidemux_2.6_branch_mean/plugins/ADM_muxers/muxerAvi/muxerAvi.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/plugins/ADM_muxers/muxerAvi/muxerAvi.cpp	2009-06-06 19:00:00 UTC (rev 4897)
+++ branches/avidemux_2.6_branch_mean/plugins/ADM_muxers/muxerAvi/muxerAvi.cpp	2009-06-06 19:00:02 UTC (rev 4898)
@@ -116,7 +116,7 @@
 
                 while(a->getPacket(audioBuffer,&audioSize, AUDIO_BUFFER_SIZE,&nbSample,&audioDts))
                 {
-                    printf("[Audio] Packet size %"LU" sample:%"LU" dts:%"LLU" target :%"LLU"\n",audioSize,nbSample,audioDts,targetDts);
+                    aprintf("[Audio] Packet size %"LU" sample:%"LU" dts:%"LLU" target :%"LLU"\n",audioSize,nbSample,audioDts,targetDts);
                     if(audioDts!=ADM_NO_PTS)
                         if( abs(audioDts-clk->getTimeUs())>5000)
                         {



From mean at mail.berlios.de  Sat Jun  6 21:00:03 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sat, 6 Jun 2009 21:00:03 +0200
Subject: [Avidemux-svn-commit] r4899 -
	branches/avidemux_2.6_branch_mean/avidemux
Message-ID: <200906061900.n56J03Ri019364@sheep.berlios.de>

Author: mean
Date: 2009-06-06 21:00:03 +0200 (Sat, 06 Jun 2009)
New Revision: 4899

Modified:
   branches/avidemux_2.6_branch_mean/avidemux/gui_savenew.cpp
Log:
[Muxers] Use muxer for muxing and video for video-ing

Modified: branches/avidemux_2.6_branch_mean/avidemux/gui_savenew.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/gui_savenew.cpp	2009-06-06 19:00:02 UTC (rev 4898)
+++ branches/avidemux_2.6_branch_mean/avidemux/gui_savenew.cpp	2009-06-06 19:00:03 UTC (rev 4899)
@@ -50,7 +50,7 @@
     int ret=1;
     ADM_muxer *muxer=NULL;
     int index=UI_GetCurrentFormat();
-    bool process=true;
+    int process=UI_getCurrentVCodec();
     ADM_videoFilterChain *chain=NULL;
     
     printf("[A_Save] Saving..\n");
@@ -87,7 +87,7 @@
                 return 0;
         }
         // 2- Create Encoder
-        video=createVideoStream(chain,UI_GetCurrentFormat());
+        video=createVideoStream(chain,process);
         if(!video)
         {
                 GUI_Error_HIG("Video","Cannot create encoder");



From mean at mail.berlios.de  Sat Jun  6 21:00:06 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sat, 6 Jun 2009 21:00:06 +0200
Subject: [Avidemux-svn-commit] r4901 -
	branches/avidemux_2.6_branch_mean/avidemux
Message-ID: <200906061900.n56J06pR019393@sheep.berlios.de>

Author: mean
Date: 2009-06-06 21:00:06 +0200 (Sat, 06 Jun 2009)
New Revision: 4901

Modified:
   branches/avidemux_2.6_branch_mean/avidemux/gui_savenew.cpp
Log:
[Saving] When to destroy was inverted

Modified: branches/avidemux_2.6_branch_mean/avidemux/gui_savenew.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/gui_savenew.cpp	2009-06-06 19:00:05 UTC (rev 4900)
+++ branches/avidemux_2.6_branch_mean/avidemux/gui_savenew.cpp	2009-06-06 19:00:06 UTC (rev 4901)
@@ -123,7 +123,7 @@
     //
 
     if(muxer) delete muxer;
-    if (!audioProcessMode() && astreams[0])
+    if (audioProcessMode() && astreams[0])
         delete astreams[0];
     delete video;
     return ret;



From mean at mail.berlios.de  Sat Jun  6 21:00:10 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sat, 6 Jun 2009 21:00:10 +0200
Subject: [Avidemux-svn-commit] r4902 - in branches/avidemux_2.6_branch_mean:
	avidemux/ADM_coreMuxer/include plugins/ADM_muxers/muxerAvi
	plugins/ADM_muxers/muxerMp4 plugins/ADM_muxers/muxerRaw
Message-ID: <200906061900.n56J0ATd019477@sheep.berlios.de>

Author: mean
Date: 2009-06-06 21:00:09 +0200 (Sat, 06 Jun 2009)
New Revision: 4902

Modified:
   branches/avidemux_2.6_branch_mean/avidemux/ADM_coreMuxer/include/ADM_muxer.h
   branches/avidemux_2.6_branch_mean/plugins/ADM_muxers/muxerAvi/muxerAvi.cpp
   branches/avidemux_2.6_branch_mean/plugins/ADM_muxers/muxerMp4/muxerMP4.cpp
   branches/avidemux_2.6_branch_mean/plugins/ADM_muxers/muxerRaw/muxerRaw.cpp
Log:
[Muxer] add a progress bar (simple for now)

Modified: branches/avidemux_2.6_branch_mean/avidemux/ADM_coreMuxer/include/ADM_muxer.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/ADM_coreMuxer/include/ADM_muxer.h	2009-06-06 19:00:06 UTC (rev 4901)
+++ branches/avidemux_2.6_branch_mean/avidemux/ADM_coreMuxer/include/ADM_muxer.h	2009-06-06 19:00:09 UTC (rev 4902)
@@ -8,6 +8,7 @@
 #define ADM_muxer_H
 #include "ADM_default.h"
 #include "ADM_audioStream.h"
+#include "DIA_working.h"
 /**
     \class ADM_videoStream
 
@@ -18,6 +19,7 @@
             uint32_t width,height,averageFps1000;
             uint32_t fourCC;
             bool     isCFR;
+            DIA_workingBase *encoding;
 public:
                       ADM_videoStream() {};
             virtual ~ADM_videoStream() {};
@@ -43,10 +45,11 @@
                 ADM_videoStream *vStream;       // Internal copy of the parameters
                 ADM_audioStream  **aStreams;
                 uint32_t         nbAStreams;
+                DIA_workingBase  *encoding;
                 
 public:
-                          ADM_muxer() {vStream=NULL;aStreams=NULL;nbAStreams=0;};
-        virtual           ~ADM_muxer() {};
+                          ADM_muxer() {vStream=NULL;aStreams=NULL;nbAStreams=0;encoding=NULL;};
+        virtual           ~ADM_muxer() {if(encoding) delete encoding;encoding=NULL;};
         virtual bool      open(const char *filename,   ADM_videoStream *videoStream,
                                 uint32_t nbAudioTrack, ADM_audioStream **audioStreams)=0;
 

Modified: branches/avidemux_2.6_branch_mean/plugins/ADM_muxers/muxerAvi/muxerAvi.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/plugins/ADM_muxers/muxerAvi/muxerAvi.cpp	2009-06-06 19:00:06 UTC (rev 4901)
+++ branches/avidemux_2.6_branch_mean/plugins/ADM_muxers/muxerAvi/muxerAvi.cpp	2009-06-06 19:00:09 UTC (rev 4902)
@@ -142,7 +142,7 @@
 {
     printf("[AviMuxer] Saving\n");
     uint32_t bufSize=vStream->getWidth()*vStream->getHeight()*3;
-
+    bool result=true;
     uint32_t len,flags;
     uint64_t pts,dts,rawDts;
     uint64_t lastVideoDts=0;
@@ -159,13 +159,14 @@
     videoBuffer=new uint8_t[bufSize];
 
     printf("[AviMuxer]avg fps=%u\n",vStream->getAvgFps1000());
-    DIA_encodingBase  *progress=createEncoding(vStream->getAvgFps1000());
-    progress->setContainer("AVI");
 
     uint64_t aviTime=0;
     if(false==vStream->getPacket(&len, videoBuffer, bufSize,&pts,&dts,&flags)) goto abt;
     if(dts==ADM_NO_PTS) dts=0;
     lastVideoDts=dts;
+
+    encoding=createWorking("Saving avi");
+
     while(1)
     {
             if(dts>aviTime+videoIncrement)
@@ -176,6 +177,7 @@
                 if(!writter.saveVideoFrame( len, flags,videoBuffer))  // Put our real video
                 {
                         printf("[AviMuxer] Error writting video frame\n");
+                        result=false;
                         goto abt;
                 }
                 if(false==vStream->getPacket(&len, videoBuffer, bufSize,&pts,&dts,&flags)) goto abt;
@@ -191,21 +193,26 @@
 
             uint32_t  percent=(100*aviTime)/videoDuration;
             if(percent>100) percent=100;
-            progress->setPercent(percent);
+            
+            encoding->update(percent);
+            if(!encoding->isAlive()) 
+            {
+                result=false;
+                goto abt;
+            }
 
             written++;
             aviTime+=videoIncrement;
     }
 abt:
     writter.setEnd();
-
     delete [] videoBuffer;
     videoBuffer=NULL;
     delete [] audioBuffer;
     audioBuffer=NULL;
     printf("[AviMuxer] Wrote %d frames, nb audio streams %d\n",written,nbAStreams);
-    delete progress;
-    return true;
+    
+    return result;
 }
 /**
     \fn close

Modified: branches/avidemux_2.6_branch_mean/plugins/ADM_muxers/muxerMp4/muxerMP4.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/plugins/ADM_muxers/muxerMp4/muxerMP4.cpp	2009-06-06 19:00:06 UTC (rev 4901)
+++ branches/avidemux_2.6_branch_mean/plugins/ADM_muxers/muxerMp4/muxerMP4.cpp	2009-06-06 19:00:09 UTC (rev 4902)
@@ -308,6 +308,8 @@
     uint64_t videoIncrement;
     int ret;
     int written=0;
+    bool result=true;
+
     float f=(float)vStream->getAvgFps1000();
     f=1000./f;
     f*=1000000;
@@ -318,9 +320,28 @@
 
     printf("[MP4]avg fps=%u\n",vStream->getAvgFps1000());
     AVRational *scale=&(video_st->codec->time_base);
+    uint64_t videoDuration=vStream->getVideoDuration();
+
+    char *title=QT_TR_NOOP("Saving mp4");
+    if(muxerConfig.muxerType==MP4_MUXER_PSP) title=QT_TR_NOOP("Saving PSP");
+    encoding=createWorking(title);
+
     while(true==vStream->getPacket(&len, buffer, bufSize,&pts,&dts,&flags))
     {
 	AVPacket pkt;
+
+            float p=0.5;
+            if(videoDuration)
+                    p=lastVideoDts/videoDuration;
+            p=p*100;
+            encoding->update((uint32_t)p);
+            if(!encoding->isAlive()) 
+            {
+                result=false;
+                break;
+            }
+
+
             aprintf("[MP5] LastDts:%08lu Dts:%08lu (%04.4lu) Delta : %u\n",lastVideoDts,dts,dts/1000000,dts-lastVideoDts);
             rawDts=dts;
             if(rawDts==ADM_NO_PTS)
@@ -402,7 +423,7 @@
     delete [] buffer;
     delete [] audioBuffer;
     printf("[MP4] Wrote %d frames, nb audio streams %d\n",written,nbAStreams);
-    return true;
+    return result;
 }
 /**
     \fn close

Modified: branches/avidemux_2.6_branch_mean/plugins/ADM_muxers/muxerRaw/muxerRaw.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/plugins/ADM_muxers/muxerRaw/muxerRaw.cpp	2009-06-06 19:00:06 UTC (rev 4901)
+++ branches/avidemux_2.6_branch_mean/plugins/ADM_muxers/muxerRaw/muxerRaw.cpp	2009-06-06 19:00:09 UTC (rev 4902)
@@ -20,9 +20,9 @@
 #include "fourcc.h"
 #include "muxerRaw.h"
 #include "DIA_coreToolkit.h"
+#define ADM_NO_PTS 0xFFFFFFFFFFFFFFFFLL // FIXME
 
 
-
 #if 1
 #define aprintf(...) {}
 #else
@@ -78,10 +78,20 @@
     uint64_t pts,dts,rawDts;
     uint64_t lastVideoDts=0;
     int written=0;
-    
+    uint64_t videoDuration=vStream->getVideoDuration();
 
+    encoding=createWorking("Saving raw video");
     while(true==vStream->getPacket(&len, buffer, bufSize,&pts,&dts,&flags))
     {
+            float p=0.5;
+            if(videoDuration && dts!=ADM_NO_PTS)
+                    p=dts/videoDuration;
+            p=p*100;
+            encoding->update((uint32_t)p);
+            if(!encoding->isAlive()) 
+            {
+                break;
+            }
         fwrite(buffer,len,1,file);
         written++;
 



From mean at mail.berlios.de  Sat Jun  6 21:00:05 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sat, 6 Jun 2009 21:00:05 +0200
Subject: [Avidemux-svn-commit] r4900 -
	branches/avidemux_2.6_branch_mean/plugins/ADM_videoEncoder/jpeg
Message-ID: <200906061900.n56J05Lf019375@sheep.berlios.de>

Author: mean
Date: 2009-06-06 21:00:05 +0200 (Sat, 06 Jun 2009)
New Revision: 4900

Modified:
   branches/avidemux_2.6_branch_mean/plugins/ADM_videoEncoder/jpeg/ADM_jpegEncoder.cpp
Log:
[Jpeg] Put qscale each time to be on the safe side

Modified: branches/avidemux_2.6_branch_mean/plugins/ADM_videoEncoder/jpeg/ADM_jpegEncoder.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/plugins/ADM_videoEncoder/jpeg/ADM_jpegEncoder.cpp	2009-06-06 19:00:03 UTC (rev 4899)
+++ branches/avidemux_2.6_branch_mean/plugins/ADM_videoEncoder/jpeg/ADM_jpegEncoder.cpp	2009-06-06 19:00:05 UTC (rev 4900)
@@ -78,6 +78,7 @@
     if(!f) f=40000;
     _context->time_base.den=f;
     _context->time_base.num=1000000;
+    _context->flags |= CODEC_FLAG_QSCALE;
     
     return true;
 }
@@ -100,7 +101,7 @@
     {   printf("[Jpeg] Cannot open codec\n");
         return false;
     }
-    _context->flags |= CODEC_FLAG_QSCALE;
+   
     // Now allocate colorspace
     int w,h;
     FilterInfo *info=source->getInfo();



From mean at mail.berlios.de  Sun Jun  7 16:46:45 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sun, 7 Jun 2009 16:46:45 +0200
Subject: [Avidemux-svn-commit] r4903 - in branches/avidemux_2.6_branch_mean:
	avidemux/ADM_coreVideoEncoder/include
	avidemux/ADM_coreVideoEncoder/src plugins/ADM_videoEncoder
	plugins/ADM_videoEncoder/huff plugins/ADM_videoEncoder/jpeg
Message-ID: <200906071446.n57EkjX5009198@sheep.berlios.de>

Author: mean
Date: 2009-06-07 16:46:44 +0200 (Sun, 07 Jun 2009)
New Revision: 4903

Added:
   branches/avidemux_2.6_branch_mean/avidemux/ADM_coreVideoEncoder/include/ADM_coreVideoEncoderFFmpeg.h
   branches/avidemux_2.6_branch_mean/avidemux/ADM_coreVideoEncoder/src/ADM_coreVideoEncoderFFmpeg.cpp
   branches/avidemux_2.6_branch_mean/plugins/ADM_videoEncoder/huff/
   branches/avidemux_2.6_branch_mean/plugins/ADM_videoEncoder/huff/ADM_huffEncoder.cpp
   branches/avidemux_2.6_branch_mean/plugins/ADM_videoEncoder/huff/ADM_huffEncoder.h
   branches/avidemux_2.6_branch_mean/plugins/ADM_videoEncoder/huff/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/plugins/ADM_videoEncoder/huff/huffPlugin.cpp
Modified:
   branches/avidemux_2.6_branch_mean/avidemux/ADM_coreVideoEncoder/src/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/plugins/ADM_videoEncoder/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/plugins/ADM_videoEncoder/jpeg/ADM_jpegEncoder.cpp
   branches/avidemux_2.6_branch_mean/plugins/ADM_videoEncoder/jpeg/ADM_jpegEncoder.h
Log:
[encoder] FFmpeg base + jpeg + huff

Copied: branches/avidemux_2.6_branch_mean/avidemux/ADM_coreVideoEncoder/include/ADM_coreVideoEncoderFFmpeg.h (from rev 4902, branches/avidemux_2.6_branch_mean/plugins/ADM_videoEncoder/jpeg/ADM_jpegEncoder.h)
===================================================================
--- branches/avidemux_2.6_branch_mean/plugins/ADM_videoEncoder/jpeg/ADM_jpegEncoder.h	2009-06-06 19:00:09 UTC (rev 4902)
+++ branches/avidemux_2.6_branch_mean/avidemux/ADM_coreVideoEncoder/include/ADM_coreVideoEncoderFFmpeg.h	2009-06-07 14:46:44 UTC (rev 4903)
@@ -0,0 +1,50 @@
+/***************************************************************************
+                          \fn ADM_coreVideoEncoder
+                          \brief Base class for video encoder plugin
+                             -------------------
+    
+    copyright            : (C) 2002/2009 by mean
+    email                : fixounet at free.fr
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+#ifndef ADM_CORE_VIDEO_ENCODER_FF_H
+#define ADM_CORE_VIDEO_ENCODER_FF_H
+
+#include "ADM_coreVideoEncoder.h"
+#include "ADM_colorspace.h"
+extern "C" 
+{
+#include "ADM_lavcodec.h"
+}
+
+/**
+    \class ADM_coreVideoEncoderFFmpeg
+    \brief base class for VideoEncoder based on libavcodec
+*/
+class ADM_coreVideoEncoderFFmpeg :public ADM_coreVideoEncoder
+{
+protected:
+               AVCodecContext   *_context;      // Contect 
+               AVFrame          _frame;     
+               ADMColorspace    *colorSpace;    // Colorspace converter if needed
+               uint8_t          *rgbBuffer;     // Buffer for colorspace converter if needed
+               ADM_colorspace   targetColorSpace; // Wanted colorspace
+protected:
+    virtual               bool             prolog(void); 
+    virtual               bool             preEncode(void); 
+    virtual               bool             setup(CodecID codecId);
+
+public:
+                            ADM_coreVideoEncoderFFmpeg(ADM_coreVideoFilter *src);
+                            ~ADM_coreVideoEncoderFFmpeg();
+
+};
+#endif
\ No newline at end of file

Copied: branches/avidemux_2.6_branch_mean/avidemux/ADM_coreVideoEncoder/src/ADM_coreVideoEncoderFFmpeg.cpp (from rev 4902, branches/avidemux_2.6_branch_mean/plugins/ADM_videoEncoder/jpeg/ADM_jpegEncoder.cpp)
===================================================================
--- branches/avidemux_2.6_branch_mean/plugins/ADM_videoEncoder/jpeg/ADM_jpegEncoder.cpp	2009-06-06 19:00:09 UTC (rev 4902)
+++ branches/avidemux_2.6_branch_mean/avidemux/ADM_coreVideoEncoder/src/ADM_coreVideoEncoderFFmpeg.cpp	2009-06-07 14:46:44 UTC (rev 4903)
@@ -0,0 +1,193 @@
+/***************************************************************************
+                          \fn ADM_coreVideoEncoder
+                          \brief Base class for video encoder plugin
+                             -------------------
+    
+    copyright            : (C) 2002/2009 by mean
+    email                : fixounet at free.fr
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+#define __STDC_CONSTANT_MACROS
+#include "ADM_default.h"
+#include "ADM_coreVideoEncoderFFmpeg.h"
+/**
+    \fn ADM_coreVideoEncoderFFmpeg
+    \brief Constructor
+
+*/
+
+ADM_coreVideoEncoderFFmpeg::ADM_coreVideoEncoderFFmpeg(ADM_coreVideoFilter *src) : ADM_coreVideoEncoder(src)
+{
+uint32_t w,h;
+    targetColorSpace=ADM_COLOR_YV12;
+    w=getWidth();
+    h=getHeight();
+
+    image=new ADMImage(w,h);
+    _context = avcodec_alloc_context ();
+    ADM_assert (_context);
+    memset (&_frame, 0, sizeof (_frame));
+    _frame.pts = AV_NOPTS_VALUE;
+    _context->width = w;
+    _context->height = h;
+    _context->strict_std_compliance = -1;
+    rgbBuffer=new uint8_t [(w+7)*(h+7)*4];
+
+}
+/**
+    \fn ADM_coreVideoEncoderFFmpeg
+    \brief Destructor
+*/
+ADM_coreVideoEncoderFFmpeg::~ADM_coreVideoEncoderFFmpeg()
+{
+    if (_context)
+    {
+        avcodec_close (_context);
+        ADM_dealloc (_context);
+        _context = NULL;
+    }
+    if(colorSpace)
+    {
+        delete colorSpace;
+        colorSpace=NULL;
+    }   
+    if(rgbBuffer)
+    {
+        delete [] rgbBuffer;
+        rgbBuffer=NULL;
+    }
+
+}
+/**
+    \fn prolog
+*/
+
+bool             ADM_coreVideoEncoderFFmpeg::prolog(void)
+{
+    int w=getWidth();
+    int h=getHeight();
+
+  switch(targetColorSpace)
+    {
+        case ADM_COLOR_YV12:    _frame.linesize[0] = w; 
+                                _frame.linesize[1] = w>>1; 
+                                _frame.linesize[2] = w>>1; 
+                                _context->pix_fmt =PIX_FMT_YUV420P;break;
+        case ADM_COLOR_YUV422P: _frame.linesize[0] = w; 
+                                _frame.linesize[1] = w>>1;
+                                _frame.linesize[2] = w>>1;
+                                _context->pix_fmt =PIX_FMT_YUV422P;break;
+        case ADM_COLOR_RGB32A : _frame.linesize[0] = w*4;
+                                _frame.linesize[1] = 0;//w >> 1;
+                                _frame.linesize[2] = 0;//w >> 1;
+                                _context->pix_fmt =PIX_FMT_RGB32;break;
+        default: ADM_assert(0);
+
+    }
+    
+    // Eval fps
+    uint64_t f=source->getInfo()->frameIncrement;
+    if(!f) f=40000;
+    _context->time_base.den=f;
+    _context->time_base.num=1000000;
+   
+    return true;
+}
+/**
+    \fn pre-encoder
+    
+*/
+bool             ADM_coreVideoEncoderFFmpeg::preEncode(void)
+{
+
+    uint8_t *from;
+    if(source->getNextFrame(image)==false)
+    {
+        printf("[ff] Cannot get next image\n");
+        return false;
+    }
+    prolog();
+  
+    switch(targetColorSpace)
+    {
+        case ADM_COLOR_YV12:      
+                _frame.data[0] = image->GetWritePtr(PLANAR_Y);
+                _frame.data[2] = image->GetWritePtr(PLANAR_U);
+                _frame.data[1] = image->GetWritePtr(PLANAR_V);
+                break;
+
+        case ADM_COLOR_YUV422P:
+        {
+              int w=getWidth();
+              int h=getHeight();
+
+                if(!colorSpace->convert(image->data,rgbBuffer))
+                {
+                    printf("[ADM_jpegEncoder::encode] Colorconversion failed\n");
+                    return false;
+                }
+                _frame.data[0] = rgbBuffer;
+                _frame.data[2] = rgbBuffer+(w*h);
+                _frame.data[1] = rgbBuffer+(w*h*3)/2;
+                break;
+        }
+        case ADM_COLOR_RGB32A:
+                if(!colorSpace->convert(image->data,rgbBuffer))
+                {
+                    printf("[ADM_jpegEncoder::encode] Colorconversion failed\n");
+                    return false;
+                }
+                _frame.data[0] = rgbBuffer;
+                _frame.data[2] = NULL;
+                _frame.data[1] = NULL;
+                break;
+        default:
+                ADM_assert(0);
+    }
+    return true;
+}
+/**
+    \fn setup
+*/
+bool ADM_coreVideoEncoderFFmpeg::setup(CodecID codecId)
+{
+    int res;
+    AVCodec *codec=avcodec_find_encoder(codecId);
+    if(!codec) 
+    {
+        printf("[ff] Cannot find codec\n");
+        return false;
+    }
+   prolog();
+   res=avcodec_open(_context, codec); 
+   if(res<0) 
+    {   printf("[ff] Cannot open codec\n");
+        return false;
+    }
+   
+    // Now allocate colorspace
+    int w,h;
+    FilterInfo *info=source->getInfo();
+    w=info->width;
+    h=info->height;
+    if(targetColorSpace!=ADM_COLOR_YV12)
+    {
+        colorSpace=new ADMColorspace(w,h,ADM_COLOR_YV12,targetColorSpace);
+        if(!colorSpace)
+        {
+            printf("[ADM_jpegEncoder] Cannot allocate colorspace\n");
+            return false;
+        }
+    }
+    return true;
+
+}
+// EOF
\ No newline at end of file

Modified: branches/avidemux_2.6_branch_mean/avidemux/ADM_coreVideoEncoder/src/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/ADM_coreVideoEncoder/src/CMakeLists.txt	2009-06-06 19:00:09 UTC (rev 4902)
+++ branches/avidemux_2.6_branch_mean/avidemux/ADM_coreVideoEncoder/src/CMakeLists.txt	2009-06-07 14:46:44 UTC (rev 4903)
@@ -1,5 +1,6 @@
 SET(ADM_CoreVideoEncoder_SRCS 
 	ADM_coreVideoEncoder.cpp
+        ADM_coreVideoEncoderFFmpeg.cpp
 )
 
 ADD_LIBRARY(ADM_coreVideoEncoder SHARED ${ADM_CoreVideoEncoder_SRCS})

Modified: branches/avidemux_2.6_branch_mean/plugins/ADM_videoEncoder/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/plugins/ADM_videoEncoder/CMakeLists.txt	2009-06-06 19:00:09 UTC (rev 4902)
+++ branches/avidemux_2.6_branch_mean/plugins/ADM_videoEncoder/CMakeLists.txt	2009-06-07 14:46:44 UTC (rev 4903)
@@ -4,3 +4,4 @@
 ADD_SUBDIRECTORY(yv12)
 ADD_SUBDIRECTORY(png)
 ADD_SUBDIRECTORY(jpeg)
+ADD_SUBDIRECTORY(huff)

Added: branches/avidemux_2.6_branch_mean/plugins/ADM_videoEncoder/huff/ADM_huffEncoder.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/plugins/ADM_videoEncoder/huff/ADM_huffEncoder.cpp	2009-06-06 19:00:09 UTC (rev 4902)
+++ branches/avidemux_2.6_branch_mean/plugins/ADM_videoEncoder/huff/ADM_huffEncoder.cpp	2009-06-07 14:46:44 UTC (rev 4903)
@@ -0,0 +1,124 @@
+/***************************************************************************
+                          \file ADM_huffEncoder.cpp
+                          \brief (FF)Huffyuv lavcodec based 
+                             -------------------
+    
+    copyright            : (C) 2002/2009 by mean
+    email                : fixounet at free.fr
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+#include "ADM_lavcodec.h"
+#include "ADM_default.h"
+#include "ADM_huffEncoder.h"
+#include "DIA_factory.h"
+
+typedef enum
+{
+    ADM_HUFF_YUV,
+    ADM_FF_HUFF_YUV
+};
+int huffType=ADM_HUFF_YUV;
+//
+/**
+        \fn ADM_huffEncoder
+*/
+ADM_huffEncoder::ADM_huffEncoder(ADM_coreVideoFilter *src) : ADM_coreVideoEncoderFFmpeg(src)
+{
+    printf("[huffEncoder] Creating.\n");
+    if(huffType==ADM_HUFF_YUV)
+        targetColorSpace=ADM_COLOR_YUV422P;
+    else
+        targetColorSpace=ADM_COLOR_YV12;
+}
+/**
+    \fn setup
+*/
+bool ADM_huffEncoder::setup(void)
+{
+    CodecID id=CODEC_ID_HUFFYUV;
+    if(huffType==ADM_FF_HUFF_YUV) id=CODEC_ID_FFVHUFF;
+    return ADM_coreVideoEncoderFFmpeg::setup(id);
+}
+
+
+/** 
+    \fn ~ADM_huffEncoder
+*/
+ADM_huffEncoder::~ADM_huffEncoder()
+{
+    printf("[huffEncoder] Destroying.\n");
+    
+}
+/**
+    \fn getFourcc
+*/
+const  char        *ADM_huffEncoder::getFourcc(void)
+{
+    if(huffType==ADM_HUFF_YUV) return "HFYU";
+    else return "FFVH";
+
+}
+/**
+    \fn getExtraData
+
+*/
+bool         ADM_huffEncoder::getExtraData(uint32_t *l,uint8_t **d)
+{
+     *l=_context->extradata_size;
+     *d=_context-> extradata;
+     return true;
+};
+/**
+    \fn encode
+*/
+bool         ADM_huffEncoder::encode (ADMBitstream * out)
+{
+    if(false==preEncode()) return false;
+    int sz=0;
+    if ((sz = avcodec_encode_video (_context, out->data, out->bufferSize, &_frame)) < 0)
+    {
+        printf("[huff] Error %d encoding video\n",sz);
+        return false;
+    }
+    
+    out->len=sz;
+    out->pts=out->dts=image->Pts;
+    out->flags=AVI_KEY_FRAME;
+    return true;
+}
+/**
+    \fn huffConfigure
+    \brief UI configuration for huff encoder
+*/
+    
+static const diaMenuEntry colorMenus[2]=
+    {
+	{ADM_HUFF_YUV,QT_TR_NOOP("HUFFYUV")},
+	{ADM_FF_HUFF_YUV,QT_TR_NOOP("FF HUFFYUV")},
+};
+
+bool         huffConfigure(void)
+{
+uint32_t colorM;
+    printf("[huff] Configure\n");
+    colorM=(uint32_t)huffType;
+
+    diaElemMenu      c(&colorM,QT_TR_NOOP("Type:"),2,colorMenus);
+    diaElem *elems[1]={&c};
+    
+      if( diaFactoryRun(QT_TR_NOOP("HuffYUV Configuration"),1 ,elems))
+      {
+        huffType=colorM;
+        return false;
+      }
+      return true;
+}
+// EOF

Copied: branches/avidemux_2.6_branch_mean/plugins/ADM_videoEncoder/huff/ADM_huffEncoder.h (from rev 4902, branches/avidemux_2.6_branch_mean/plugins/ADM_videoEncoder/jpeg/ADM_jpegEncoder.h)
===================================================================
--- branches/avidemux_2.6_branch_mean/plugins/ADM_videoEncoder/jpeg/ADM_jpegEncoder.h	2009-06-06 19:00:09 UTC (rev 4902)
+++ branches/avidemux_2.6_branch_mean/plugins/ADM_videoEncoder/huff/ADM_huffEncoder.h	2009-06-07 14:46:44 UTC (rev 4903)
@@ -0,0 +1,41 @@
+/***************************************************************************
+                          \fn ADM_VideoEncoders
+                          \brief Internal handling of video encoders
+                             -------------------
+    
+    copyright            : (C) 2002/2009 by mean
+    email                : fixounet at free.fr
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+#ifndef ADM_huff_ENCODER_H
+#define ADM_huff_ENCODER_H
+#include "ADM_coreVideoEncoderFFmpeg.h"
+/**
+        \class ADM_huffEncoder
+        \brief Dummy encoder that does nothing
+
+*/
+class ADM_huffEncoder : public ADM_coreVideoEncoderFFmpeg
+{
+protected:
+               int              plane;
+public:
+
+                           ADM_huffEncoder(ADM_coreVideoFilter *src);
+                           ~ADM_huffEncoder();
+virtual        bool        setup(void); 
+virtual        bool        encode (ADMBitstream * out);
+virtual const  char        *getFourcc(void);
+virtual        bool         getExtraData(uint32_t *l,uint8_t **d);
+};
+
+
+#endif

Added: branches/avidemux_2.6_branch_mean/plugins/ADM_videoEncoder/huff/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/plugins/ADM_videoEncoder/huff/CMakeLists.txt	2009-06-06 19:00:09 UTC (rev 4902)
+++ branches/avidemux_2.6_branch_mean/plugins/ADM_videoEncoder/huff/CMakeLists.txt	2009-06-07 14:46:44 UTC (rev 4903)
@@ -0,0 +1,15 @@
+INCLUDE(ve_plugin)
+
+SET(huff_SRCS 
+        huffPlugin.cpp
+        ADM_huffEncoder.cpp
+)
+INCLUDE_DIRECTORIES(${CMAKE_CURRENT_BINARY_DIR})
+
+ADD_LIBRARY(ADM_ve_huff SHARED ${huff_SRCS})
+
+INIT_VIDEO_ENCODER(ADM_ve_huff)
+INSTALL_VIDEO_ENCODER(ADM_ve_huff)
+TARGET_LINK_LIBRARIES(ADM_ve_huff ADM_libavcodec ADM_libavutil)
+INCLUDE_DIRECTORIES("${AVIDEMUX_SOURCE_DIR}/avidemux/")
+INCLUDE_DIRECTORIES("${AVIDEMUX_SOURCE_DIR}/avidemux/ADM_libraries/ADM_ffmpeg")

Added: branches/avidemux_2.6_branch_mean/plugins/ADM_videoEncoder/huff/huffPlugin.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/plugins/ADM_videoEncoder/huff/huffPlugin.cpp	2009-06-06 19:00:09 UTC (rev 4902)
+++ branches/avidemux_2.6_branch_mean/plugins/ADM_videoEncoder/huff/huffPlugin.cpp	2009-06-07 14:46:44 UTC (rev 4903)
@@ -0,0 +1,31 @@
+/***************************************************************************
+                          \fn     jpegPlugin
+                          \brief  Plugin for jpeg dummy encoder
+                             -------------------
+    
+    copyright            : (C) 2002/2009 by mean
+    email                : fixounet at free.fr
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+#include "ADM_default.h"
+#include "ADM_huffEncoder.h"
+#include "ADM_coreVideoEncoderInternal.h"
+
+extern bool         huffConfigure(void);
+
+ADM_DECLARE_VIDEO_ENCODER_PREAMBLE(ADM_huffEncoder);
+ADM_DECLARE_VIDEO_ENCODER_NO_CONFIG();
+ADM_DECLARE_VIDEO_ENCODER_MAIN("HUFFYUV",
+                               "(FF)HuffYUV",
+                               "FF Huffyuv (c) 2009 Mean",
+                                huffConfigure, // No configuration
+                                ADM_UI_ALL,
+                                1,0,0);

Modified: branches/avidemux_2.6_branch_mean/plugins/ADM_videoEncoder/jpeg/ADM_jpegEncoder.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/plugins/ADM_videoEncoder/jpeg/ADM_jpegEncoder.cpp	2009-06-06 19:00:09 UTC (rev 4902)
+++ branches/avidemux_2.6_branch_mean/plugins/ADM_videoEncoder/jpeg/ADM_jpegEncoder.cpp	2009-06-07 14:46:44 UTC (rev 4903)
@@ -21,102 +21,21 @@
 #include "DIA_factory.h"
 
 static uint32_t Quantizer=2;
-static ADM_colorspace color=ADM_COLOR_YUV422P; //ADM_COLOR_YUV422P; //ADM_COLOR_YV12;
+static ADM_colorspace jpegColor=ADM_COLOR_YV12; //ADM_COLOR_YUV422P; //ADM_COLOR_YV12;
 /**
         \fn ADM_jpegEncoder
 */
-ADM_jpegEncoder::ADM_jpegEncoder(ADM_coreVideoFilter *src) : ADM_coreVideoEncoder(src)
+ADM_jpegEncoder::ADM_jpegEncoder(ADM_coreVideoFilter *src) : ADM_coreVideoEncoderFFmpeg(src)
 {
     printf("[jpegEncoder] Creating.\n");
-    int w,h;
-   
-    w=getWidth();
-    h=getHeight();
-
-    image=new ADMImage(w,h);
-    plane=(w*h*3)/2;
-    _context = avcodec_alloc_context ();
-    ADM_assert (_context);
-    memset (&_frame, 0, sizeof (_frame));
-    _frame.pts = AV_NOPTS_VALUE;
-    _context->width = w;
-    _context->height = h;
-    _context->strict_std_compliance = -1;
-    // For RGB we need a temp buffer...  
-    rgbBuffer=new uint8_t [(w+7)*(h+7)*4];
+    targetColorSpace=jpegColor;
 }
 /**
-    \fn prolog
-
-*/
-
-bool ADM_jpegEncoder::prolog(void)
-{
-  int w=getWidth();
-  int h=getHeight();
-
-  switch(color)
-    {
-        case ADM_COLOR_YV12:    _frame.linesize[0] = w; 
-                                _frame.linesize[1] = w>>1; 
-                                _frame.linesize[2] = w>>1; 
-                                _context->pix_fmt =PIX_FMT_YUV420P;break;
-        case ADM_COLOR_YUV422P: _frame.linesize[0] = w; 
-                                _frame.linesize[1] = w>>1;
-                                _frame.linesize[2] = w>>1;
-                                _context->pix_fmt =PIX_FMT_YUV422P;break;
-        case ADM_COLOR_RGB32A : _frame.linesize[0] = w*4;
-                                _frame.linesize[1] = 0;//w >> 1;
-                                _frame.linesize[2] = 0;//w >> 1;
-                                _context->pix_fmt =PIX_FMT_RGB32;break;
-        default: ADM_assert(0);
-
-    }
-    _frame.quality = (int) floor (FF_QP2LAMBDA * Quantizer+ 0.5);
-    // Eval fps
-    uint64_t f=source->getInfo()->frameIncrement;
-    if(!f) f=40000;
-    _context->time_base.den=f;
-    _context->time_base.num=1000000;
-    _context->flags |= CODEC_FLAG_QSCALE;
-    
-    return true;
-}
-/**
     \fn setup
 */
 bool ADM_jpegEncoder::setup(void)
 {
-int res;
-AVCodec *codec=avcodec_find_encoder(CODEC_ID_MJPEG);
-if(!codec) 
-    {
-        printf("[Jpeg] Cannot find codec\n");
-        return false;
-    }
-   // capabilities = codec->capabilities & CODEC_CAP_DELAY ? ADM_ENC_REQ_NULL_FLUSH : 0; 
-   prolog();
-   res=avcodec_open(_context, codec); 
-   if(res<0) 
-    {   printf("[Jpeg] Cannot open codec\n");
-        return false;
-    }
-   
-    // Now allocate colorspace
-    int w,h;
-    FilterInfo *info=source->getInfo();
-    w=info->width;
-    h=info->height;
-    if(color!=ADM_COLOR_YV12)
-    {
-        colorSpace=new ADMColorspace(w,h,ADM_COLOR_YV12,color);
-        if(!colorSpace)
-        {
-            printf("[ADM_jpegEncoder] Cannot allocate colorspace\n");
-            return false;
-        }
-    }
-    return true;
+    return ADM_coreVideoEncoderFFmpeg::setup(CODEC_ID_MJPEG);
 }
 
 
@@ -126,22 +45,7 @@
 ADM_jpegEncoder::~ADM_jpegEncoder()
 {
     printf("[jpegEncoder] Destroying.\n");
-    if (_context)
-    {
-        avcodec_close (_context);
-        ADM_dealloc (_context);
-        _context = NULL;
-    }
-    if(colorSpace)
-    {
-        delete colorSpace;
-        colorSpace=NULL;
-    }   
-    if(rgbBuffer)
-    {
-        delete [] rgbBuffer;
-        rgbBuffer=NULL;
-    }
+    
 }
 
 /**
@@ -149,49 +53,9 @@
 */
 bool         ADM_jpegEncoder::encode (ADMBitstream * out)
 {
-uint8_t *from;
-    if(source->getNextFrame(image)==false)
-    {
-        printf("[jpeg] Cannot get next image\n");
-        return false;
-    }
-    prolog();
-    switch(color)
-    {
-        case ADM_COLOR_YV12:      
-                _frame.data[0] = image->GetWritePtr(PLANAR_Y);
-                _frame.data[2] = image->GetWritePtr(PLANAR_U);
-                _frame.data[1] = image->GetWritePtr(PLANAR_V);
-                break;
-
-        case ADM_COLOR_YUV422P:
-        {
-              int w=getWidth();
-              int h=getHeight();
-
-                if(!colorSpace->convert(image->data,rgbBuffer))
-                {
-                    printf("[ADM_jpegEncoder::encode] Colorconversion failed\n");
-                    return false;
-                }
-                _frame.data[0] = rgbBuffer;
-                _frame.data[2] = rgbBuffer+(w*h);
-                _frame.data[1] = rgbBuffer+(w*h*3)/2;
-                break;
-        }
-        case ADM_COLOR_RGB32A:
-                if(!colorSpace->convert(image->data,rgbBuffer))
-                {
-                    printf("[ADM_jpegEncoder::encode] Colorconversion failed\n");
-                    return false;
-                }
-                _frame.data[0] = rgbBuffer;
-                _frame.data[2] = NULL;
-                _frame.data[1] = NULL;
-                break;
-        default:
-                ADM_assert(0);
-    }
+    if(false==preEncode()) return false;
+    _context->flags |= CODEC_FLAG_QSCALE;
+    _frame.quality = (int) floor (FF_QP2LAMBDA * Quantizer+ 0.5);
     int sz=0;
     if ((sz = avcodec_encode_video (_context, out->data, out->bufferSize, &_frame)) < 0)
     {
@@ -218,7 +82,7 @@
 {
 uint32_t colorM;
     printf("[jpeg] Configure\n");
-    colorM=(uint32_t)color;
+    colorM=(uint32_t)jpegColor;
 
     diaElemUInteger  q(&(Quantizer),QT_TR_NOOP("_Quantizer:"),2,31);
     diaElemMenu      c(&colorM,QT_TR_NOOP("_ColorSpace:"),2,colorMenus);
@@ -227,7 +91,7 @@
     
   if( diaFactoryRun(QT_TR_NOOP("Mjpeg Configuration"),2 ,elems))
   {
-    color=(ADM_colorspace)colorM;
+    jpegColor=(ADM_colorspace)colorM;
     return false;
   }
   return true;

Modified: branches/avidemux_2.6_branch_mean/plugins/ADM_videoEncoder/jpeg/ADM_jpegEncoder.h
===================================================================
--- branches/avidemux_2.6_branch_mean/plugins/ADM_videoEncoder/jpeg/ADM_jpegEncoder.h	2009-06-06 19:00:09 UTC (rev 4902)
+++ branches/avidemux_2.6_branch_mean/plugins/ADM_videoEncoder/jpeg/ADM_jpegEncoder.h	2009-06-07 14:46:44 UTC (rev 4903)
@@ -17,33 +17,23 @@
  ***************************************************************************/
 #ifndef ADM_jpeg_ENCODER_H
 #define ADM_jpeg_ENCODER_H
-#include "ADM_coreVideoEncoder.h"
-#include "ADM_colorspace.h"
-extern "C" 
-{
-#include "ADM_lavcodec.h"
-}
+#include "ADM_coreVideoEncoderFFmpeg.h"
 /**
         \class ADM_jpegEncoder
         \brief Dummy encoder that does nothing
 
 */
-class ADM_jpegEncoder : public ADM_coreVideoEncoder
+class ADM_jpegEncoder : public ADM_coreVideoEncoderFFmpeg
 {
 protected:
                int              plane;
-               AVCodecContext   *_context;
-               AVFrame          _frame;
-               ADMColorspace    *colorSpace;
-               uint8_t          *rgbBuffer;
-                bool            prolog(void);
 public:
 
-                            ADM_jpegEncoder(ADM_coreVideoFilter *src);
-                            ~ADM_jpegEncoder();
+                           ADM_jpegEncoder(ADM_coreVideoFilter *src);
+                           ~ADM_jpegEncoder();
 virtual        bool        setup(void); 
 virtual        bool        encode (ADMBitstream * out);
-virtual const  char         *getFourcc(void) {return "jpeg";}
+virtual const  char        *getFourcc(void) {return "jpeg";}
 };
 
 



From mean at mail.berlios.de  Sun Jun  7 18:04:35 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sun, 7 Jun 2009 18:04:35 +0200
Subject: [Avidemux-svn-commit] r4904 -
	branches/avidemux_2.6_branch_mean/avidemux/ADM_coreVideoEncoder/src
Message-ID: <200906071604.n57G4Zpg016288@sheep.berlios.de>

Author: mean
Date: 2009-06-07 18:04:35 +0200 (Sun, 07 Jun 2009)
New Revision: 4904

Modified:
   branches/avidemux_2.6_branch_mean/avidemux/ADM_coreVideoEncoder/src/CMakeLists.txt
Log:
[Win32] resolve dll

Modified: branches/avidemux_2.6_branch_mean/avidemux/ADM_coreVideoEncoder/src/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/ADM_coreVideoEncoder/src/CMakeLists.txt	2009-06-07 14:46:44 UTC (rev 4903)
+++ branches/avidemux_2.6_branch_mean/avidemux/ADM_coreVideoEncoder/src/CMakeLists.txt	2009-06-07 16:04:35 UTC (rev 4904)
@@ -4,7 +4,7 @@
 )
 
 ADD_LIBRARY(ADM_coreVideoEncoder SHARED ${ADM_CoreVideoEncoder_SRCS})
-TARGET_LINK_LIBRARIES(ADM_coreVideoEncoder ADM_core ADM_coreImage)
+TARGET_LINK_LIBRARIES(ADM_coreVideoEncoder ADM_core ADM_coreImage ADM_libavcodec ADM_libavutil )
 
 INSTALL(TARGETS ADM_coreVideoEncoder RUNTIME DESTINATION ${BIN_DIR}  LIBRARY DESTINATION lib  ARCHIVE DESTINATION lib)
 



From mean at mail.berlios.de  Tue Jun  9 07:21:03 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Tue, 9 Jun 2009 07:21:03 +0200
Subject: [Avidemux-svn-commit] r4905 -
	branches/avidemux_2.6_branch_mean/avidemux/ADM_core/src
Message-ID: <200906090521.n595L3GP006689@sheep.berlios.de>

Author: mean
Date: 2009-06-09 07:20:53 +0200 (Tue, 09 Jun 2009)
New Revision: 4905

Modified:
   branches/avidemux_2.6_branch_mean/avidemux/ADM_core/src/ADM_crashdump.cpp
Log:
[Core] Use libc demangler

Modified: branches/avidemux_2.6_branch_mean/avidemux/ADM_core/src/ADM_crashdump.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/ADM_core/src/ADM_crashdump.cpp	2009-06-07 16:04:35 UTC (rev 4904)
+++ branches/avidemux_2.6_branch_mean/avidemux/ADM_core/src/ADM_crashdump.cpp	2009-06-09 05:20:53 UTC (rev 4905)
@@ -24,7 +24,9 @@
 #ifdef __MINGW32__
 #include <windows.h>
 #include <excpt.h>
-#include <imagehlp.h>
+#include <imagehlp.h>
+#else
+#include <cxxabi.h>
 #endif
 
 #include "ADM_default.h"
@@ -272,94 +274,7 @@
     signal(11, sig_segfault_handler); // show stacktrace on default
 }
 
-static int lenCount(uint8_t *start,uint8_t *end,int *d)
-{
-  int val=0;
-  int digit=0;
-  *d=0;
-  while(*start>='0' && *start<='9' && start<end) 
-  {
-    val=val*10+*start-'0'; 
-    start++;
-    digit++;
-  }
-  *d=digit;
-  return val;
-}
 
-static int decodeOne(uint8_t *start, uint8_t *end,int *cons)
-{
-  *cons=0;
-  int len,digit;
-  uint8_t *org=start;
-  if(start+2>=end) return 0;
-  switch(*start )
-  {
-    case 'Z':
-    case 'P':  
-      
-        len=lenCount(start+1,end,&digit);
-        start+=1+digit;
-        for(int z=0;z<len;z++) printf("%c",*start++);
-        break;
-  }
-  return (int)((uint64_t)start-(uint64_t)org);
-}
-static int demangle(int i,  uint8_t *string)
-{
- // Search 1st (
-  if(!string) return 0;
-  int len=strlen((char *)string);
-  if(!len) return 0;
-   
-  uint8_t *end=string+len;
-  uint8_t *start=string;
-  
-  while(*start!='(' && start+3<end) start++;
-  if(*start!='(') return 0;
-  start++;
-  
-  //  _qt(_Z9crashTestP9JSContextP8JSObjectjPlS3_+0) [0x4acf80]
-  
-  if(*start!='_' || start[1]!='Z')
-  {
-    return 0;
-  }
-  // Seems good !
-  start++;
-  start++;  
-  int digit;
-  // Function name..
-  int l=lenCount(start,end,&digit);
-  printf("\t<");
-  for(int i=0;i<l;i++)
-  {
-    printf("%c",start[digit+i]); 
-  }
-  printf(">(");
-  start+=digit+l;
-  
-  // Parama
-  int first=0;
-  while(start+2<end && *start=='P')
-  {
-    if(!first)  first=1;
-    else
-        printf(",");
-    
-      
-    start++;
-    l=lenCount(start,end,&digit);
-    for(int i=0;i<l;i++)
-    {
-      printf("%c",start[digit+i]); 
-    }
-    start+=digit+l;
-  }
-  printf(")\n");
-  return 1;
-}
-
 /**
       \fn sig_segfault_handler
       \brief our segfault handler
@@ -380,7 +295,9 @@
 
 void ADM_backTrack(const char *info,int lineno,const char *file)
 {
-	char wholeStuff[2048];
+	char wholeStuff[2048];
+    char buffer[2048];
+    char in[2048];
 	void *stack[20];
 	char **functions;
 	int count, i;
@@ -396,12 +313,24 @@
 	count = backtrace(stack, 20);
 	functions = backtrace_symbols(stack, count);
 	sprintf(wholeStuff,"%s\n at line %d, file %s",info,lineno,file);
-
+    int status;
+    size_t size=2047;
+    // it looks like that xxxx (functionName+0x***) XXXX
 	for (i=0; i < count; i++) 
 	{
-		printf("Frame %2d: %s \n", i, functions[i]);
-		demangle(i,(uint8_t *)functions[i]);
-		strcat(wholeStuff,functions[i]);
+        char *s=strstr(functions[i],"(");
+        buffer[0]=0;
+        if(s && strstr(s+1,"+"))
+        {
+            strcpy(in,s+1);
+            char *e=strstr(in,"+");
+            *e=0;                
+            __cxxabiv1::__cxa_demangle(in,buffer,&size,&status);
+            if(status) strcpy(buffer,in);
+        }else       
+            strcpy(buffer,functions[i]);
+        printf("%s:%d:<%s>:%d\n",functions[i],i,buffer,status);
+		strcat(wholeStuff,buffer);
 		strcat(wholeStuff,"\n");
 	}
 



From mean at mail.berlios.de  Wed Jun 10 19:56:44 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Wed, 10 Jun 2009 19:56:44 +0200
Subject: [Avidemux-svn-commit] r4906 - in
	branches/avidemux_2.6_branch_mean/avidemux: .
	ADM_coreVideoFilter/src ADM_editor
Message-ID: <200906101756.n5AHuior025846@sheep.berlios.de>

Author: mean
Date: 2009-06-10 19:56:44 +0200 (Wed, 10 Jun 2009)
New Revision: 4906

Modified:
   branches/avidemux_2.6_branch_mean/avidemux/ADM_coreVideoFilter/src/ADM_videoFilterBridge.cpp
   branches/avidemux_2.6_branch_mean/avidemux/ADM_editor/ADM_edRender.cpp
   branches/avidemux_2.6_branch_mean/avidemux/gui_savenew.cpp
Log:
[audio/video] Fix encoding from anywhere but the start

Modified: branches/avidemux_2.6_branch_mean/avidemux/ADM_coreVideoFilter/src/ADM_videoFilterBridge.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/ADM_coreVideoFilter/src/ADM_videoFilterBridge.cpp	2009-06-09 05:20:53 UTC (rev 4905)
+++ branches/avidemux_2.6_branch_mean/avidemux/ADM_coreVideoFilter/src/ADM_videoFilterBridge.cpp	2009-06-10 17:56:44 UTC (rev 4906)
@@ -26,6 +26,7 @@
 */
 ADM_videoFilterBridge::ADM_videoFilterBridge(uint64_t startTime, uint64_t endTime) : ADM_coreVideoFilter(NULL,NULL)
 {
+    printf("[VideoFilterBridge] Creating bridge from %"LU" s to %"LU" s\n",(uint32_t)(startTime/1000000LL),(uint32_t)(endTime/1000000LL));
     this->startTime=startTime;
     this->endTime=endTime;
     
@@ -62,7 +63,24 @@
 */
 bool         ADM_videoFilterBridge::getNextFrame(ADMImage *image)
 {
-    return   video_body->NextPicture(image);
+again:
+    bool r=   video_body->NextPicture(image);
+    if(r==false) return false;
+    // Translate pts if any
+    int64_t pts=image->Pts;
+    if(pts>endTime)
+    {
+        printf("[VideoBridge] This frame is too late (%"LU" vs %"LU")\n",pts,startTime);
+        return false;
+    }
+    if(pts<startTime) 
+    {
+            printf("[VideoBridge] This frame is too early (%"LU" vs %"LU")\n",pts,endTime);
+            goto again;
+    }
+    // Rescale time
+    image->Pts-=startTime;
+    return true;
 }
 /**
     \fn ADM_videoFilterBridge

Modified: branches/avidemux_2.6_branch_mean/avidemux/ADM_editor/ADM_edRender.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/ADM_editor/ADM_edRender.cpp	2009-06-09 05:20:53 UTC (rev 4905)
+++ branches/avidemux_2.6_branch_mean/avidemux/ADM_editor/ADM_edRender.cpp	2009-06-10 17:56:44 UTC (rev 4906)
@@ -57,7 +57,19 @@
 */
 bool        ADM_Composer::GoToTime(uint64_t time)
 {
-    return GoToIntra(0);
+    // 1st go to the previous intra...
+      uint32_t frame=searchFrameBefore(time+1);
+      while(frame)
+      {
+            uint32_t flags;
+                getFlags(frame,&flags);
+                if(flags & AVI_KEY_FRAME) break;
+                frame--;
+      }
+        // Now go forward if needed
+#warning todo fixme!
+    printf("[Composer:GoToTime] Going to frame %"LU"\n",frame);
+    return GoToIntra(frame);
 }
 /**
     \fn NextPicture

Modified: branches/avidemux_2.6_branch_mean/avidemux/gui_savenew.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/gui_savenew.cpp	2009-06-09 05:20:53 UTC (rev 4905)
+++ branches/avidemux_2.6_branch_mean/avidemux/gui_savenew.cpp	2009-06-10 17:56:44 UTC (rev 4906)
@@ -52,7 +52,9 @@
     int index=UI_GetCurrentFormat();
     int process=UI_getCurrentVCodec();
     ADM_videoFilterChain *chain=NULL;
-    
+     uint64_t markerA,markerB;
+        markerA=video_body->getMarkerAPts();
+        markerB=video_body->getMarkerBPts();
     printf("[A_Save] Saving..\n");
 
     if(!(muxer=ADM_MuxerSpawnFromIndex(index)))
@@ -79,7 +81,8 @@
     }else
     {
         // 1- create filter chain
-        chain=createVideoFilterChain(0,10000000000LL);
+       
+        chain=createVideoFilterChain(markerA,markerB);
         if(!chain)
         {
                 GUI_Error_HIG("Video","Cannot instantiante video Chain");
@@ -107,7 +110,7 @@
         if(audio)
         {
             // Access..
-            ADM_audioStream *access=createEncodingStream(0,0); // FIXME LEAK
+            ADM_audioStream *access=createEncodingStream(markerA,0); // FIXME LEAK
             astreams[0]=access;
         }
     }



From mean at mail.berlios.de  Thu Jun 11 19:46:27 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Thu, 11 Jun 2009 19:46:27 +0200
Subject: [Avidemux-svn-commit] r4907 - in
	branches/avidemux_2.6_branch_mean/avidemux: .
	ADM_muxerGate/include ADM_muxerGate/src
Message-ID: <200906111746.n5BHkRr7029335@sheep.berlios.de>

Author: mean
Date: 2009-06-11 19:46:27 +0200 (Thu, 11 Jun 2009)
New Revision: 4907

Modified:
   branches/avidemux_2.6_branch_mean/avidemux/ADM_muxerGate/include/ADM_videoCopy.h
   branches/avidemux_2.6_branch_mean/avidemux/ADM_muxerGate/src/ADM_videoCopy.cpp
   branches/avidemux_2.6_branch_mean/avidemux/gui_savenew.cpp
Log:
[Save] make it work for video in copy mode too

Modified: branches/avidemux_2.6_branch_mean/avidemux/ADM_muxerGate/include/ADM_videoCopy.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/ADM_muxerGate/include/ADM_videoCopy.h	2009-06-10 17:56:44 UTC (rev 4906)
+++ branches/avidemux_2.6_branch_mean/avidemux/ADM_muxerGate/include/ADM_videoCopy.h	2009-06-11 17:46:27 UTC (rev 4907)
@@ -13,10 +13,13 @@
 class ADM_videoStreamCopy: public ADM_videoStream
 {
 protected:
-            uint32_t start,end;
+            uint64_t startTime,endTime;
+            uint32_t currentFrame;
             ADMCompressedImage image;
+            bool eofMet;
+            uint64_t  rescaleTs(uint64_t in);
 public:
-             ADM_videoStreamCopy();
+             ADM_videoStreamCopy(uint64_t startTime,uint64_t endTime);
     virtual ~ADM_videoStreamCopy();
 
 virtual     bool     getPacket(uint32_t *len, uint8_t *data, uint32_t maxLen,uint64_t *pts,uint64_t *dts,

Modified: branches/avidemux_2.6_branch_mean/avidemux/ADM_muxerGate/src/ADM_videoCopy.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/ADM_muxerGate/src/ADM_videoCopy.cpp	2009-06-10 17:56:44 UTC (rev 4906)
+++ branches/avidemux_2.6_branch_mean/avidemux/ADM_muxerGate/src/ADM_videoCopy.cpp	2009-06-11 17:46:27 UTC (rev 4907)
@@ -21,7 +21,7 @@
 /**
     \fn ADM_videoStreamCopy
 */
-ADM_videoStreamCopy::ADM_videoStreamCopy()
+ADM_videoStreamCopy::ADM_videoStreamCopy(uint64_t startTime,uint64_t endTime)
 {
     aviInfo info;
     video_body->getVideoInfo(&info);
@@ -30,9 +30,18 @@
     fourCC=info.fcc;
     averageFps1000=info.fps1000;
     isCFR=false;
-    start=0;
-    end=100; // FIXME
-
+    // Estimate start frame
+    currentFrame= video_body->searchFrameBefore(startTime+1);
+    while(currentFrame)
+    {
+        uint32_t flags;
+        video_body->getFlags(currentFrame,&flags);
+        if(flags&AVI_KEY_FRAME) break;
+        currentFrame--;
+    }
+    eofMet=false;
+    this->startTime=startTime;
+    this->endTime=endTime;
 }
 /**
     \fn ADM_videoStreamCopy
@@ -49,26 +58,44 @@
 
   return video_body->getExtraHeaderData(extraLen,extraData);
 }
- 
 /**
+    \fn rescaleTs
+*/
+uint64_t  ADM_videoStreamCopy::rescaleTs(uint64_t in)
+{
+    if(in==ADM_NO_PTS) return in;
+    if(in>startTime) return in-startTime;
+    return 0;
+}
+/**
     \fn getPacket
 */
 bool  ADM_videoStreamCopy::getPacket(uint32_t *len, uint8_t *data, uint32_t maxLen,
                     uint64_t *pts,uint64_t *dts,
                     uint32_t *flags)
 {
+    if(true==eofMet) return false;
     image.data=data;
-    if(false==video_body->getCompressedPicure(start,&image))
+    if(false==video_body->getCompressedPicure(currentFrame,&image))
     {
-            printf("[StreamCopy] Get packet failed for frame %d\n",start);
+            printf("[StreamCopy] Get packet failed for frame %d\n",currentFrame);
             return false;
     }
     *len=image.dataLength;
     ADM_assert(*len<maxLen);
-    *pts=image.demuxerPts;
-    *dts=image.demuxerDts;
+    
+    *pts=rescaleTs(image.demuxerPts);
+    *dts=rescaleTs(image.demuxerDts);
+    if(image.demuxerDts!=ADM_NO_PTS)
+    {
+        if(image.demuxerDts>endTime ) 
+        {
+            eofMet=true;
+            return false;
+        }   
+    }
     *flags=image.flags;
-    start++;
+    currentFrame++;
     return true;
 }
 /**

Modified: branches/avidemux_2.6_branch_mean/avidemux/gui_savenew.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/gui_savenew.cpp	2009-06-10 17:56:44 UTC (rev 4906)
+++ branches/avidemux_2.6_branch_mean/avidemux/gui_savenew.cpp	2009-06-11 17:46:27 UTC (rev 4907)
@@ -77,7 +77,7 @@
     // Video Stream 
     if(!process) // Copy
     {
-        video=new ADM_videoStreamCopy();
+        video=new ADM_videoStreamCopy(markerA,markerB);
     }else
     {
         // 1- create filter chain



From mean at mail.berlios.de  Sat Jun 13 15:13:36 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sat, 13 Jun 2009 15:13:36 +0200
Subject: [Avidemux-svn-commit] r4908 - branches/avidemux_2.6_branch_mean
Message-ID: <200906131313.n5DDDarJ016538@sheep.berlios.de>

Author: mean
Date: 2009-06-13 15:13:36 +0200 (Sat, 13 Jun 2009)
New Revision: 4908

Modified:
   branches/avidemux_2.6_branch_mean/CMakeLists.txt
Log:
[Build] Add debian packaging

Modified: branches/avidemux_2.6_branch_mean/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/CMakeLists.txt	2009-06-11 17:46:27 UTC (rev 4907)
+++ branches/avidemux_2.6_branch_mean/CMakeLists.txt	2009-06-13 13:13:36 UTC (rev 4908)
@@ -210,4 +210,8 @@
 # Config Summary
 ########################################
 INCLUDE(admConfigSummary)
+#
+# Packaging
+#
+INCLUDE(./avidemux/avidemuxPackageDebian.cmake)
 MESSAGE("")



From mean at mail.berlios.de  Sat Jun 13 15:13:38 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sat, 13 Jun 2009 15:13:38 +0200
Subject: [Avidemux-svn-commit] r4909 -
	branches/avidemux_2.6_branch_mean/avidemux
Message-ID: <200906131313.n5DDDc2V016549@sheep.berlios.de>

Author: mean
Date: 2009-06-13 15:13:38 +0200 (Sat, 13 Jun 2009)
New Revision: 4909

Added:
   branches/avidemux_2.6_branch_mean/avidemux/avidemuxPackageDebian.cmake
Log:
[build] Debian cmake control file, useful to do personal .deb

Added: branches/avidemux_2.6_branch_mean/avidemux/avidemuxPackageDebian.cmake
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/avidemuxPackageDebian.cmake	2009-06-13 13:13:36 UTC (rev 4908)
+++ branches/avidemux_2.6_branch_mean/avidemux/avidemuxPackageDebian.cmake	2009-06-13 13:13:38 UTC (rev 4909)
@@ -0,0 +1,32 @@
+##############################
+# DEBIAN
+##############################
+SET(CPACK_DEBIAN_PACKAGE_NAME "avidemux")
+SET (CPACK_GENERATOR "DEB")
+# ARCH
+IF (X86_64_SUPPORTED)
+SET(CPACK_DEBIAN_PACKAGE_ARCHITECTURE "amd64")
+ELSE (X86_64_SUPPORTED)
+SET(CPACK_DEBIAN_PACKAGE_ARCHITECTURE "i386")
+ENDIF (X86_64_SUPPORTED)
+# Mandatory
+SET(CPACK_DEBIAN_PACKAGE_MAINTAINER "mean")
+SET(CPACK_DEBIAN_PACKAGE_DESCRIPTION "Simple video editor")
+
+# Build our deps list
+# Build deps SET(DEPS "debhelper (>> 4), libfreetype6-dev, libxml2-dev,  libxv-dev, dpatch , cmake, desktop-file-utils")
+SET(DEPS "libc6 (>=2.4),libglib2.0-0 (>=2.14.0),libstdc++6 (>=4.2.1),libx11-6, libext6, libxml2 (>=2.6.27), libxv1, zlib1g (>=1:1.1.4)")
+# Add optional DEPS here
+SET(CPACK_DEBIAN_PACKAGE_DEPENDS "${DEPS}")
+#
+SET(CPACK_DEBIAN_PACKAGE_SECTION "extra")
+SET(CPACK_DEBIAN_PACKAGE_PRIORITY "optional")
+# Some more infos
+SET(CPACK_PACKAGE_VERSION_MAJOR "2")
+SET(CPACK_PACKAGE_VERSION_MINOR "6")
+SET(CPACK_PACKAGE_VERSION_PATCH "0")
+#
+SET(CPACK_PACKAGE_NAME "avidemux")
+#
+
+include(CPack)



From mean at mail.berlios.de  Sat Jun 13 15:17:12 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sat, 13 Jun 2009 15:17:12 +0200
Subject: [Avidemux-svn-commit] r4911 -
	branches/avidemux_2.6_branch_mean/avidemux_core
Message-ID: <200906131317.n5DDHCnU017120@sheep.berlios.de>

Author: mean
Date: 2009-06-13 15:17:12 +0200 (Sat, 13 Jun 2009)
New Revision: 4911

Added:
   branches/avidemux_2.6_branch_mean/avidemux_core/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux_core/corePackageDebian.cmake
Log:
[Cores] build + deb packaging

Added: branches/avidemux_2.6_branch_mean/avidemux_core/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/CMakeLists.txt	2009-06-13 13:13:52 UTC (rev 4910)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/CMakeLists.txt	2009-06-13 13:17:12 UTC (rev 4911)
@@ -0,0 +1,222 @@
+MESSAGE("#########################################")
+MESSAGE("Configure for avidemux core libs Started")
+MESSAGE("#########################################")
+MESSAGE("")
+
+CMAKE_MINIMUM_REQUIRED(VERSION 2.4.7 FATAL_ERROR)
+
+if (COMMAND cmake_policy)
+	cmake_policy(VERSION 2.4)
+	cmake_policy(SET CMP0003 NEW)
+endif (COMMAND cmake_policy)
+
+SET(CMAKE_MODULE_PATH "${CMAKE_SOURCE_DIR}/../cmake" "${CMAKE_MODULE_PATH}")
+
+IF (NOT CMAKE_CXX_COMPILER_WORKS MATCHES "^${CMAKE_CXX_COMPILER_WORKS}$")
+	SET(FRESH_BUILD 1)
+ENDIF (NOT CMAKE_CXX_COMPILER_WORKS MATCHES "^${CMAKE_CXX_COMPILER_WORKS}$")
+
+# need for shared cmake script between avidemux & plugins
+SET(AVIDEMUX_TOP_SOURCE_DIR ${CMAKE_SOURCE_DIR}/..)
+SET(AVIDEMUX_SOURCE_DIR ${CMAKE_SOURCE_DIR})
+MESSAGE(STATUS "Source dir is ${AVIDEMUX_TOP_SOURCE_DIR}")
+MESSAGE("")
+
+PROJECT(Avidemux_core)
+
+IF (${Avidemux_SOURCE_DIR} MATCHES ${Avidemux_BINARY_DIR})
+	MESSAGE("Please do an out-of-tree build:")
+	MESSAGE("rm CMakeCache.txt; mkdir build; cd build; cmake ..; make")
+	MESSAGE(FATAL_ERROR "in-tree-build detected")
+ENDIF (${Avidemux_SOURCE_DIR} MATCHES ${Avidemux_BINARY_DIR})
+
+INCLUDE(admConfigHelper)
+
+IF (FRESH_BUILD)
+	MESSAGE("")
+ENDIF (FRESH_BUILD)
+
+########################################
+# Global options
+########################################
+OPTION(VERBOSE "" OFF)
+
+IF (NOT CMAKE_BUILD_TYPE)
+	SET(CMAKE_BUILD_TYPE "Release")
+ENDIF (NOT CMAKE_BUILD_TYPE)
+
+########################################
+# Avidemux system specific tweaks
+########################################
+INCLUDE(admDetermineSystem)
+
+IF (CYGWIN)
+	SET(CMAKE_C_FLAGS "${CMAKE_C_FLAGS} -mwin32")
+	SET(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} -mwin32")
+ENDIF (CYGWIN)
+
+IF (ADM_CPU_ALTIVEC)
+	SET(CMAKE_C_FLAGS "${CMAKE_C_FLAGS} ${ADM_ALTIVEC_FLAGS}")
+	SET(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} ${ADM_ALTIVEC_FLAGS}")
+ENDIF (ADM_CPU_ALTIVEC)
+
+IF (UNIX AND NOT APPLE)
+	# jog shuttle is only available on Linux due to its interface
+	SET(USE_JOG 1)
+ENDIF (UNIX AND NOT APPLE)
+
+IF (WIN32)
+	SET(BIN_DIR .)
+	SET(CMAKE_SHARED_LINKER_FLAGS "${CMAKE_SHARED_LINKER_FLAGS} -Wl,-enable-auto-image-base -Wl,-enable-auto-import")
+	SET(CMAKE_EXE_LINKER_FLAGS "${CMAKE_EXE_LINKER_FLAGS} -Wl,-enable-auto-import")
+
+	IF (CMAKE_BUILD_TYPE STREQUAL "Release")
+		SET(CMAKE_EXE_LINKER_FLAGS "${CMAKE_EXE_LINKER_FLAGS} -Wl,-s")
+		SET(CMAKE_SHARED_LINKER_FLAGS "${CMAKE_SHARED_LINKER_FLAGS} -Wl,-s")
+	ENDIF (CMAKE_BUILD_TYPE STREQUAL "Release")
+ELSE (WIN32)
+	SET(BIN_DIR bin)
+ENDIF (WIN32)
+
+########################################
+# Standard Avidemux defines
+########################################
+SET(VERSION 2.6.0)
+
+# Define internal flags for GTK+ and Qt4 builds.  These are turned off
+# if a showstopper is found.  CLI is automatically assumed as possible
+# since it uses the minimum set of required libraries and CMake will 
+# fail if these aren't met.
+SET(ADM_UI_GTK 1)
+SET(ADM_UI_QT4 1)
+
+SET(ADM_INSTALL_DIR "${CMAKE_INSTALL_PREFIX}")
+
+IF (CMAKE_BUILD_TYPE STREQUAL "Debug")
+	SET(ADM_DEBUG 1)
+ENDIF (CMAKE_BUILD_TYPE STREQUAL "Debug")
+
+########################################
+# Subversion
+########################################
+OPTION(SVN "" ON)
+
+IF (SVN AND NOT CMAKE_BUILD_TYPE STREQUAL "Debug" AND EXISTS "${CMAKE_SOURCE_DIR}/.svn")
+	MESSAGE(STATUS "Checking for Subversion")
+	MESSAGE(STATUS "***********************")
+
+	SET(Subversion_FIND_REQUIRED OFF)
+	FIND_PACKAGE(Subversion)
+
+	IF (Subversion_FOUND)
+		Subversion_WC_INFO(${PROJECT_SOURCE_DIR} Project)
+		MESSAGE(STATUS "  revision: ${Project_WC_REVISION}")
+		SET(ADM_SUBVERSION ${Project_WC_REVISION})
+	ELSE (Subversion_FOUND)
+		MESSAGE(STATUS "Could not find Subversion")
+	ENDIF (Subversion_FOUND)
+	
+	MESSAGE("")
+ENDIF (SVN AND NOT CMAKE_BUILD_TYPE STREQUAL "Debug" AND EXISTS "${CMAKE_SOURCE_DIR}/.svn")
+
+IF (NOT Subversion_FOUND)
+	SET(ADM_SUBVERSION 0)
+ENDIF (NOT Subversion_FOUND)
+
+########################################
+# Check for libraries
+########################################
+SET(MSG_DISABLE_OPTION "Disabled per request")
+
+INCLUDE(admCheckRequiredLibs)
+INCLUDE(admCheckMiscLibs)
+INCLUDE(admCheckVDPAU)
+
+########################################
+# Check functions and includes
+########################################
+IF (NOT SYSTEM_HEADERS_CHECKED)
+	MESSAGE(STATUS "Checking system headers")
+	MESSAGE(STATUS "***********************")
+
+	INCLUDE(CheckIncludeFiles)
+	INCLUDE(CheckFunctionExists)
+
+	CHECK_FUNCTION_EXISTS(gettimeofday HAVE_GETTIMEOFDAY)
+
+	CHECK_INCLUDE_FILES(byteswap.h   HAVE_BYTESWAP_H)	# libavutil
+	CHECK_INCLUDE_FILES(inttypes.h   HAVE_INTTYPES_H)	# internal use, mpeg2enc, mplex
+	CHECK_INCLUDE_FILES(stdint.h     HAVE_STDINT_H)		# internal use, mpeg2enc, mplex
+	CHECK_INCLUDE_FILES(sys/types.h  HAVE_SYS_TYPES_H)	# mad, mpeg2enc
+	CHECK_INCLUDE_FILES(malloc.h     HAVE_MALLOC_H)		# libavcodec, libavutil, libpostproc, libswscale, mplex
+	SET(SYSTEM_HEADERS_CHECKED 1 CACHE BOOL "")
+	MARK_AS_ADVANCED(SYSTEM_HEADERS_CHECKED)
+
+	MESSAGE("")
+ENDIF (NOT SYSTEM_HEADERS_CHECKED)
+########################################
+# VDPAU
+########################################
+checkVDPAU()
+########################################
+# Debug Summary
+########################################
+IF (VERBOSE)
+	INCLUDE(adm_log)
+	MESSAGE("")
+ENDIF (VERBOSE)
+
+########################################
+# Generate config.h
+########################################
+CONFIGURE_FILE("${AVIDEMUX_TOP_SOURCE_DIR}/cmake/ADM_coreConfig.h.cmake" "${CMAKE_BINARY_DIR}/config/ADM_coreConfig.h")
+MESSAGE(STATUS "ADM_coreConfig.h generated")
+MESSAGE("")
+########################################
+# Add include dirs
+########################################
+INCLUDE_DIRECTORIES(${AVIDEMUX_SOURCE_DIR}/)
+INCLUDE_DIRECTORIES(${AVIDEMUX_SOURCE_DIR}/ADM_core/include)
+INCLUDE_DIRECTORIES(${AVIDEMUX_SOURCE_DIR}/ADM_ffmpeg)
+INCLUDE_DIRECTORIES(${AVIDEMUX_SOURCE_DIR}/ADM_coreAudioFilter/include)
+INCLUDE_DIRECTORIES(${AVIDEMUX_SOURCE_DIR}/ADM_coreAudioParser/include)
+INCLUDE_DIRECTORIES(${AVIDEMUX_SOURCE_DIR}/ADM_coreAudio/include)
+INCLUDE_DIRECTORIES(${AVIDEMUX_SOURCE_DIR}/ADM_coreAudioDevice/include)
+INCLUDE_DIRECTORIES(${AVIDEMUX_SOURCE_DIR}/ADM_coreAudioEncoder/include)
+INCLUDE_DIRECTORIES(${AVIDEMUX_SOURCE_DIR}/ADM_coreDemuxer/include)
+INCLUDE_DIRECTORIES(${AVIDEMUX_SOURCE_DIR}/ADM_coreDemuxerMpeg/include)
+INCLUDE_DIRECTORIES(${AVIDEMUX_SOURCE_DIR}/ADM_coreImage/include)
+INCLUDE_DIRECTORIES(${AVIDEMUX_SOURCE_DIR}/ADM_coreMuxer/include)
+INCLUDE_DIRECTORIES(${AVIDEMUX_SOURCE_DIR}/ADM_coreUI/include)
+INCLUDE_DIRECTORIES(${AVIDEMUX_SOURCE_DIR}/ADM_coreUtils/include)
+INCLUDE_DIRECTORIES(${AVIDEMUX_SOURCE_DIR}/ADM_coreVideoEncoder/include)
+INCLUDE_DIRECTORIES(${AVIDEMUX_SOURCE_DIR}/ADM_coreVideoFilter/include)
+INCLUDE_DIRECTORIES(${AVIDEMUX_SOURCE_DIR}/ADM_ffmpeg)
+INCLUDE_DIRECTORIES(${CMAKE_BINARY_DIR}/config)
+########################################
+# Directories to build
+########################################
+ADD_SUBDIRECTORY(ADM_core)
+ADD_SUBDIRECTORY(ADM_coreAudioParser)
+ADD_SUBDIRECTORY(ADM_coreAudio)
+ADD_SUBDIRECTORY(ADM_coreAudioDevice)
+ADD_SUBDIRECTORY(ADM_coreAudioEncoder)
+ADD_SUBDIRECTORY(ADM_coreDemuxer)
+ADD_SUBDIRECTORY(ADM_coreDemuxerMpeg)
+ADD_SUBDIRECTORY(ADM_coreImage)
+ADD_SUBDIRECTORY(ADM_coreMuxer)
+ADD_SUBDIRECTORY(ADM_coreUI)
+ADD_SUBDIRECTORY(ADM_coreUtils)
+ADD_SUBDIRECTORY(ADM_coreVideoEncoder)
+ADD_SUBDIRECTORY(ADM_coreVideoFilter)
+ADD_SUBDIRECTORY(ADM_ffmpeg)
+
+########################################
+# Config Summary
+########################################
+INCLUDE(admConfigSummary)
+#
+# Packaging
+#
+INCLUDE(./corePackageDebian.cmake)
+MESSAGE("")

Added: branches/avidemux_2.6_branch_mean/avidemux_core/corePackageDebian.cmake
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/corePackageDebian.cmake	2009-06-13 13:13:52 UTC (rev 4910)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/corePackageDebian.cmake	2009-06-13 13:17:12 UTC (rev 4911)
@@ -0,0 +1,32 @@
+##############################
+# DEBIAN
+##############################
+SET(CPACK_DEBIAN_PACKAGE_NAME "avidemux")
+SET (CPACK_GENERATOR "DEB")
+# ARCH
+IF (X86_64_SUPPORTED)
+SET(CPACK_DEBIAN_PACKAGE_ARCHITECTURE "amd64")
+ELSE (X86_64_SUPPORTED)
+SET(CPACK_DEBIAN_PACKAGE_ARCHITECTURE "i386")
+ENDIF (X86_64_SUPPORTED)
+# Mandatory
+SET(CPACK_DEBIAN_PACKAGE_MAINTAINER "mean")
+SET(CPACK_DEBIAN_PACKAGE_DESCRIPTION "Simple video editor")
+
+# Build our deps list
+# Build deps SET(DEPS "debhelper (>> 4), libfreetype6-dev, libxml2-dev,  libxv-dev, dpatch , cmake, desktop-file-utils")
+SET(DEPS "libc6 (>=2.4),libglib2.0-0 (>=2.14.0),libstdc++6 (>=4.2.1),libx11-6, libext6, libxml2 (>=2.6.27), libxv1, zlib1g (>=1:1.1.4)")
+# Add optional DEPS here
+SET(CPACK_DEBIAN_PACKAGE_DEPENDS "${DEPS}")
+#
+SET(CPACK_DEBIAN_PACKAGE_SECTION "extra")
+SET(CPACK_DEBIAN_PACKAGE_PRIORITY "optional")
+# Some more infos
+SET(CPACK_PACKAGE_VERSION_MAJOR "2")
+SET(CPACK_PACKAGE_VERSION_MINOR "6")
+SET(CPACK_PACKAGE_VERSION_PATCH "0")
+#
+SET(CPACK_PACKAGE_NAME "avidemux")
+#
+
+include(CPack)



From mean at mail.berlios.de  Sat Jun 13 15:17:13 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sat, 13 Jun 2009 15:17:13 +0200
Subject: [Avidemux-svn-commit] r4912 -
	branches/avidemux_2.6_branch_mean/avidemux_core
Message-ID: <200906131317.n5DDHDhd017130@sheep.berlios.de>

Author: mean
Date: 2009-06-13 15:17:13 +0200 (Sat, 13 Jun 2009)
New Revision: 4912

Modified:
   branches/avidemux_2.6_branch_mean/avidemux_core/corePackageDebian.cmake
Log:
[debian] Package core

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/corePackageDebian.cmake
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/corePackageDebian.cmake	2009-06-13 13:17:12 UTC (rev 4911)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/corePackageDebian.cmake	2009-06-13 13:17:13 UTC (rev 4912)
@@ -1,7 +1,7 @@
 ##############################
 # DEBIAN
 ##############################
-SET(CPACK_DEBIAN_PACKAGE_NAME "avidemux")
+SET(CPACK_DEBIAN_PACKAGE_NAME "avidemuxi-core")
 SET (CPACK_GENERATOR "DEB")
 # ARCH
 IF (X86_64_SUPPORTED)
@@ -11,7 +11,7 @@
 ENDIF (X86_64_SUPPORTED)
 # Mandatory
 SET(CPACK_DEBIAN_PACKAGE_MAINTAINER "mean")
-SET(CPACK_DEBIAN_PACKAGE_DESCRIPTION "Simple video editor")
+SET(CPACK_DEBIAN_PACKAGE_DESCRIPTION "Simple video editori,core libraries")
 
 # Build our deps list
 # Build deps SET(DEPS "debhelper (>> 4), libfreetype6-dev, libxml2-dev,  libxv-dev, dpatch , cmake, desktop-file-utils")
@@ -26,7 +26,7 @@
 SET(CPACK_PACKAGE_VERSION_MINOR "6")
 SET(CPACK_PACKAGE_VERSION_PATCH "0")
 #
-SET(CPACK_PACKAGE_NAME "avidemux")
+SET(CPACK_PACKAGE_NAME "avidemux-core")
 #
 
 include(CPack)



From mean at mail.berlios.de  Sat Jun 13 19:25:34 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sat, 13 Jun 2009 19:25:34 +0200
Subject: [Avidemux-svn-commit] r4913 - in branches/avidemux_2.6_branch_mean:
	avidemux/ADM_audioFilter/src avidemux_core
	avidemux_core/ADM_coreAudioFilter
	avidemux_core/ADM_coreAudioFilter/src
Message-ID: <200906131725.n5DHPYsv000417@sheep.berlios.de>

Author: mean
Date: 2009-06-13 19:25:33 +0200 (Sat, 13 Jun 2009)
New Revision: 4913

Added:
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreAudioFilter/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreAudioFilter/src/
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreAudioFilter/src/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreAudioFilter/src/audiofilterAPI.cpp
Removed:
   branches/avidemux_2.6_branch_mean/avidemux/ADM_audioFilter/src/audiofilterAPI.cpp
Modified:
   branches/avidemux_2.6_branch_mean/avidemux/ADM_audioFilter/src/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux_core/CMakeLists.txt
Log:
[audio] Dispatch audioFilter core to core libs

Modified: branches/avidemux_2.6_branch_mean/avidemux/ADM_audioFilter/src/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/ADM_audioFilter/src/CMakeLists.txt	2009-06-13 13:17:13 UTC (rev 4912)
+++ branches/avidemux_2.6_branch_mean/avidemux/ADM_audioFilter/src/CMakeLists.txt	2009-06-13 17:25:33 UTC (rev 4913)
@@ -26,13 +26,5 @@
 ADD_DEFINITIONS(-I${CMAKE_CURRENT_SOURCE_DIR})
 
 #
-# API
-SET(ADM_audioFilterAPI_SRCS
-audiofilterAPI.cpp
-)
 ADD_LIBRARY(ADM_audioFilter STATIC ${ADM_audioFilter_SRCS})
-# For the API part, needed by coreAudioEncoder
-ADD_LIBRARY(ADM_coreAudioFilterAPI SHARED ${ADM_audioFilterAPI_SRCS})
-TARGET_LINK_LIBRARIES(ADM_coreAudioFilterAPI ADM_core ADM_coreUI  )
-INSTALL(TARGETS ADM_coreAudioFilterAPI RUNTIME DESTINATION ${BIN_DIR}  LIBRARY DESTINATION lib  ARCHIVE DESTINATION lib)
 # END

Deleted: branches/avidemux_2.6_branch_mean/avidemux/ADM_audioFilter/src/audiofilterAPI.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/ADM_audioFilter/src/audiofilterAPI.cpp	2009-06-13 13:17:13 UTC (rev 4912)
+++ branches/avidemux_2.6_branch_mean/avidemux/ADM_audioFilter/src/audiofilterAPI.cpp	2009-06-13 17:25:33 UTC (rev 4913)
@@ -1,98 +0,0 @@
-/***************************************************************************
-                          audioeng_process
-                             -------------------
-    copyright            : (C) 2002/2006 by mean
-    email                : fixounet at free.fr
- ***************************************************************************/
-
-/***************************************************************************
- *                                                                         *
- *   This program is free software; you can redistribute it and/or modify  *
- *   it under the terms of the GNU General Public License as published by  *
- *   the Free Software Foundation; either version 2 of the License, or     *
- *   (at your option) any later version.                                   *
- *                                                                         *
- ***************************************************************************/
-
-#include <math.h>
-
-#include "ADM_default.h"
-
-#include "ADM_audioFilter.h"
-
-#include "ADM_osSupport/ADM_debugID.h"
-#define MODULE_NAME MODULE_AUDIO_FILTER
-#include "ADM_osSupport/ADM_debug.h"
-
-
-
-AUDMAudioFilter::AUDMAudioFilter(AUDMAudioFilter *previous)
-{
-  _previous=previous;
-  if(_previous)
-  {
-      memcpy(&_wavHeader,_previous->getInfo(),sizeof(_wavHeader));
-      _wavHeader.bitspersample=16; // We deal with PCM here...
-      _length=previous->getLength();
-  }
-  _head=_tail=0; 
-}
-AUDMAudioFilter::~AUDMAudioFilter()
-{
-}
-
-uint8_t  AUDMAudioFilter::rewind(void)
-{
-  _head=_tail=0;
-  return _previous->rewind();
-}
-
-uint8_t AUDMAudioFilter::shrink(void)
-{
-  if(_tail>AUD_PROCESS_BUFFER_SIZE/2)
-  {
-    memmove(&_incomingBuffer[0],&_incomingBuffer[_head],sizeof(float)*(_tail-_head));
-    _tail-=_head;
-    _head=0;
-  }
-  if(_head==_tail)
-  {
-    _head=_tail=0;
-  }
-  return 1;
-}
-/*
-    If the incoming data is getting low (less than 1/4) fill it up 
-*/
-uint8_t AUDMAudioFilter::fillIncomingBuffer(AUD_Status *status)
-{
-  uint32_t asked;
-  *status=AUD_OK;
-  // Hysteresis
-  if((_tail-_head)<(AUD_PROCESS_BUFFER_SIZE>>2)) // Less than 1/4 full
- {
-
-  while ((  _tail < (3*AUD_PROCESS_BUFFER_SIZE)/5)) // Fill up to 3/5--3/4
-  {
-      // don't ask too much front.
-    asked = (3*AUD_PROCESS_BUFFER_SIZE)/4-_tail;
-    //asked = _incoming->readDecompress(asked, &(_incomingBuffer[_tail]));
-    asked=_previous->fill(asked,&(_incomingBuffer[_tail]),status);
-
-    if (!asked )
-    {
-      *status=AUD_END_OF_STREAM;
-      break;
-    }
-    _tail+=asked;
-  }
- }
- return 1;
-}
-
-
-WAVHeader  *AUDMAudioFilter::getInfo(void)
-{
-  return &(_wavHeader);
-}
-//EOF

Added: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreAudioFilter/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreAudioFilter/CMakeLists.txt	2009-06-13 13:17:13 UTC (rev 4912)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreAudioFilter/CMakeLists.txt	2009-06-13 17:25:33 UTC (rev 4913)
@@ -0,0 +1,2 @@
+ADD_SUBDIRECTORY(src)
+

Added: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreAudioFilter/src/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreAudioFilter/src/CMakeLists.txt	2009-06-13 13:17:13 UTC (rev 4912)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreAudioFilter/src/CMakeLists.txt	2009-06-13 17:25:33 UTC (rev 4913)
@@ -0,0 +1,10 @@
+#
+# API
+SET(ADM_audioFilterAPI_SRCS
+audiofilterAPI.cpp
+)
+# For the API part, needed by coreAudioEncoder
+ADD_LIBRARY(ADM_coreAudioFilterAPI SHARED ${ADM_audioFilterAPI_SRCS})
+TARGET_LINK_LIBRARIES(ADM_coreAudioFilterAPI ADM_core ADM_coreUI  )
+INSTALL(TARGETS ADM_coreAudioFilterAPI RUNTIME DESTINATION ${BIN_DIR}  LIBRARY DESTINATION lib  ARCHIVE DESTINATION lib)
+# END

Copied: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreAudioFilter/src/audiofilterAPI.cpp (from rev 4912, branches/avidemux_2.6_branch_mean/avidemux/ADM_audioFilter/src/audiofilterAPI.cpp)
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/ADM_audioFilter/src/audiofilterAPI.cpp	2009-06-13 13:17:13 UTC (rev 4912)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreAudioFilter/src/audiofilterAPI.cpp	2009-06-13 17:25:33 UTC (rev 4913)
@@ -0,0 +1,98 @@
+/***************************************************************************
+                          audioeng_process
+                             -------------------
+    copyright            : (C) 2002/2006 by mean
+    email                : fixounet at free.fr
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+
+#include <math.h>
+
+#include "ADM_default.h"
+
+#include "ADM_audioFilter.h"
+
+#include "ADM_debugID.h"
+#define MODULE_NAME MODULE_AUDIO_FILTER
+#include "ADM_debug.h"
+
+
+
+AUDMAudioFilter::AUDMAudioFilter(AUDMAudioFilter *previous)
+{
+  _previous=previous;
+  if(_previous)
+  {
+      memcpy(&_wavHeader,_previous->getInfo(),sizeof(_wavHeader));
+      _wavHeader.bitspersample=16; // We deal with PCM here...
+      _length=previous->getLength();
+  }
+  _head=_tail=0; 
+}
+AUDMAudioFilter::~AUDMAudioFilter()
+{
+}
+
+uint8_t  AUDMAudioFilter::rewind(void)
+{
+  _head=_tail=0;
+  return _previous->rewind();
+}
+
+uint8_t AUDMAudioFilter::shrink(void)
+{
+  if(_tail>AUD_PROCESS_BUFFER_SIZE/2)
+  {
+    memmove(&_incomingBuffer[0],&_incomingBuffer[_head],sizeof(float)*(_tail-_head));
+    _tail-=_head;
+    _head=0;
+  }
+  if(_head==_tail)
+  {
+    _head=_tail=0;
+  }
+  return 1;
+}
+/*
+    If the incoming data is getting low (less than 1/4) fill it up 
+*/
+uint8_t AUDMAudioFilter::fillIncomingBuffer(AUD_Status *status)
+{
+  uint32_t asked;
+  *status=AUD_OK;
+  // Hysteresis
+  if((_tail-_head)<(AUD_PROCESS_BUFFER_SIZE>>2)) // Less than 1/4 full
+ {
+
+  while ((  _tail < (3*AUD_PROCESS_BUFFER_SIZE)/5)) // Fill up to 3/5--3/4
+  {
+      // don't ask too much front.
+    asked = (3*AUD_PROCESS_BUFFER_SIZE)/4-_tail;
+    //asked = _incoming->readDecompress(asked, &(_incomingBuffer[_tail]));
+    asked=_previous->fill(asked,&(_incomingBuffer[_tail]),status);
+
+    if (!asked )
+    {
+      *status=AUD_END_OF_STREAM;
+      break;
+    }
+    _tail+=asked;
+  }
+ }
+ return 1;
+}
+
+
+WAVHeader  *AUDMAudioFilter::getInfo(void)
+{
+  return &(_wavHeader);
+}
+//EOF

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/CMakeLists.txt	2009-06-13 13:17:13 UTC (rev 4912)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/CMakeLists.txt	2009-06-13 17:25:33 UTC (rev 4913)
@@ -199,6 +199,7 @@
 ADD_SUBDIRECTORY(ADM_core)
 ADD_SUBDIRECTORY(ADM_coreAudioParser)
 ADD_SUBDIRECTORY(ADM_coreAudio)
+ADD_SUBDIRECTORY(ADM_coreAudioFilter)
 ADD_SUBDIRECTORY(ADM_coreAudioDevice)
 ADD_SUBDIRECTORY(ADM_coreAudioEncoder)
 ADD_SUBDIRECTORY(ADM_coreDemuxer)



From mean at mail.berlios.de  Sun Jun 14 22:05:04 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sun, 14 Jun 2009 22:05:04 +0200
Subject: [Avidemux-svn-commit] r4916 - in branches/avidemux_2.6_branch_mean:
	. avidemux
Message-ID: <200906142005.n5EK54hA030066@sheep.berlios.de>

Author: mean
Date: 2009-06-14 22:05:03 +0200 (Sun, 14 Jun 2009)
New Revision: 4916

Removed:
   branches/avidemux_2.6_branch_mean/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux/libcheck.sh
   branches/avidemux_2.6_branch_mean/avidemux/subdirs
Log:
[All] Move directories around

Deleted: branches/avidemux_2.6_branch_mean/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/CMakeLists.txt	2009-06-14 20:01:10 UTC (rev 4915)
+++ branches/avidemux_2.6_branch_mean/CMakeLists.txt	2009-06-14 20:05:03 UTC (rev 4916)
@@ -1,228 +0,0 @@
-MESSAGE("#####################################")
-MESSAGE("Configure Started")
-MESSAGE("#####################################")
-MESSAGE("")
-
-CMAKE_MINIMUM_REQUIRED(VERSION 2.4.7 FATAL_ERROR)
-
-if (COMMAND cmake_policy)
-	cmake_policy(VERSION 2.4)
-	cmake_policy(SET CMP0003 NEW)
-endif (COMMAND cmake_policy)
-
-SET(CMAKE_MODULE_PATH "${CMAKE_SOURCE_DIR}/cmake" "${CMAKE_MODULE_PATH}")
-
-IF (NOT CMAKE_CXX_COMPILER_WORKS MATCHES "^${CMAKE_CXX_COMPILER_WORKS}$")
-	SET(FRESH_BUILD 1)
-ENDIF (NOT CMAKE_CXX_COMPILER_WORKS MATCHES "^${CMAKE_CXX_COMPILER_WORKS}$")
-
-# need for shared cmake script between avidemux & plugins
-SET(AVIDEMUX_SOURCE_DIR ${CMAKE_SOURCE_DIR})
-MESSAGE(STATUS "Source dir is ${AVIDEMUX_SOURCE_DIR}")
-MESSAGE("")
-
-PROJECT(Avidemux)
-
-IF (${Avidemux_SOURCE_DIR} MATCHES ${Avidemux_BINARY_DIR})
-	MESSAGE("Please do an out-of-tree build:")
-	MESSAGE("rm CMakeCache.txt; mkdir build; cd build; cmake ..; make")
-	MESSAGE(FATAL_ERROR "in-tree-build detected")
-ENDIF (${Avidemux_SOURCE_DIR} MATCHES ${Avidemux_BINARY_DIR})
-
-INCLUDE(admConfigHelper)
-
-IF (FRESH_BUILD)
-	MESSAGE("")
-ENDIF (FRESH_BUILD)
-
-########################################
-# Global options
-########################################
-OPTION(VERBOSE "" OFF)
-
-IF (NOT CMAKE_BUILD_TYPE)
-	SET(CMAKE_BUILD_TYPE "Release")
-ENDIF (NOT CMAKE_BUILD_TYPE)
-
-########################################
-# Avidemux system specific tweaks
-########################################
-INCLUDE(admDetermineSystem)
-
-IF (CYGWIN)
-	SET(CMAKE_C_FLAGS "${CMAKE_C_FLAGS} -mwin32")
-	SET(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} -mwin32")
-ENDIF (CYGWIN)
-
-IF (ADM_CPU_ALTIVEC)
-	SET(CMAKE_C_FLAGS "${CMAKE_C_FLAGS} ${ADM_ALTIVEC_FLAGS}")
-	SET(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} ${ADM_ALTIVEC_FLAGS}")
-ENDIF (ADM_CPU_ALTIVEC)
-
-IF (UNIX AND NOT APPLE)
-	# jog shuttle is only available on Linux due to its interface
-	SET(USE_JOG 1)
-ENDIF (UNIX AND NOT APPLE)
-
-IF (WIN32)
-	SET(BIN_DIR .)
-	SET(CMAKE_SHARED_LINKER_FLAGS "${CMAKE_SHARED_LINKER_FLAGS} -Wl,-enable-auto-image-base -Wl,-enable-auto-import")
-	SET(CMAKE_EXE_LINKER_FLAGS "${CMAKE_EXE_LINKER_FLAGS} -Wl,-enable-auto-import")
-
-	IF (CMAKE_BUILD_TYPE STREQUAL "Release")
-		SET(CMAKE_EXE_LINKER_FLAGS "${CMAKE_EXE_LINKER_FLAGS} -Wl,-s")
-		SET(CMAKE_SHARED_LINKER_FLAGS "${CMAKE_SHARED_LINKER_FLAGS} -Wl,-s")
-	ENDIF (CMAKE_BUILD_TYPE STREQUAL "Release")
-ELSE (WIN32)
-	SET(BIN_DIR bin)
-ENDIF (WIN32)
-
-########################################
-# Standard Avidemux defines
-########################################
-SET(VERSION 2.6.0)
-
-# Define internal flags for GTK+ and Qt4 builds.  These are turned off
-# if a showstopper is found.  CLI is automatically assumed as possible
-# since it uses the minimum set of required libraries and CMake will 
-# fail if these aren't met.
-SET(ADM_UI_GTK 1)
-SET(ADM_UI_QT4 1)
-
-SET(ADM_INSTALL_DIR "${CMAKE_INSTALL_PREFIX}")
-
-IF (CMAKE_BUILD_TYPE STREQUAL "Debug")
-	SET(ADM_DEBUG 1)
-ENDIF (CMAKE_BUILD_TYPE STREQUAL "Debug")
-
-########################################
-# Subversion
-########################################
-OPTION(SVN "" ON)
-
-IF (SVN AND NOT CMAKE_BUILD_TYPE STREQUAL "Debug" AND EXISTS "${CMAKE_SOURCE_DIR}/.svn")
-	MESSAGE(STATUS "Checking for Subversion")
-	MESSAGE(STATUS "***********************")
-
-	SET(Subversion_FIND_REQUIRED OFF)
-	FIND_PACKAGE(Subversion)
-
-	IF (Subversion_FOUND)
-		Subversion_WC_INFO(${PROJECT_SOURCE_DIR} Project)
-		MESSAGE(STATUS "  revision: ${Project_WC_REVISION}")
-		SET(ADM_SUBVERSION ${Project_WC_REVISION})
-	ELSE (Subversion_FOUND)
-		MESSAGE(STATUS "Could not find Subversion")
-	ENDIF (Subversion_FOUND)
-	
-	MESSAGE("")
-ENDIF (SVN AND NOT CMAKE_BUILD_TYPE STREQUAL "Debug" AND EXISTS "${CMAKE_SOURCE_DIR}/.svn")
-
-IF (NOT Subversion_FOUND)
-	SET(ADM_SUBVERSION 0)
-ENDIF (NOT Subversion_FOUND)
-
-########################################
-# Check for libraries
-########################################
-SET(MSG_DISABLE_OPTION "Disabled per request")
-
-INCLUDE(admCheckRequiredLibs)
-INCLUDE(admCheckGtk)
-INCLUDE(admCheckQt4)
-
-checkGtk()
-IF (NOT GTK_FOUND OR NOT GTHREAD_FOUND)
-	SET(ADM_UI_GTK 0)
-ENDIF (NOT GTK_FOUND OR NOT GTHREAD_FOUND)
-
-checkQt4()
-IF (NOT QT4_FOUND)
-	SET(ADM_UI_QT4 0)
-ENDIF (NOT QT4_FOUND)
-
-#INCLUDE(admCheckAudioCodecLibs)
-#INCLUDE(admCheckAudioDeviceLibs)
-INCLUDE(admCheckMiscLibs)
-INCLUDE(admCheckVDPAU)
-
-########################################
-# Check functions and includes
-########################################
-IF (NOT SYSTEM_HEADERS_CHECKED)
-	MESSAGE(STATUS "Checking system headers")
-	MESSAGE(STATUS "***********************")
-
-	INCLUDE(CheckIncludeFiles)
-	INCLUDE(CheckFunctionExists)
-
-	CHECK_FUNCTION_EXISTS(gettimeofday HAVE_GETTIMEOFDAY)
-
-	CHECK_INCLUDE_FILES(byteswap.h   HAVE_BYTESWAP_H)	# libavutil
-	CHECK_INCLUDE_FILES(inttypes.h   HAVE_INTTYPES_H)	# internal use, mpeg2enc, mplex
-	CHECK_INCLUDE_FILES(stdint.h     HAVE_STDINT_H)		# internal use, mpeg2enc, mplex
-	CHECK_INCLUDE_FILES(sys/types.h  HAVE_SYS_TYPES_H)	# mad, mpeg2enc
-	CHECK_INCLUDE_FILES(malloc.h     HAVE_MALLOC_H)		# libavcodec, libavutil, libpostproc, libswscale, mplex
-	SET(SYSTEM_HEADERS_CHECKED 1 CACHE BOOL "")
-	MARK_AS_ADVANCED(SYSTEM_HEADERS_CHECKED)
-
-	MESSAGE("")
-ENDIF (NOT SYSTEM_HEADERS_CHECKED)
-########################################
-# VDPAU
-########################################
-checkVDPAU()
-########################################
-# Debug Summary
-########################################
-IF (VERBOSE)
-	INCLUDE(adm_log)
-	MESSAGE("")
-ENDIF (VERBOSE)
-
-########################################
-# Generate config.h
-########################################
-CONFIGURE_FILE("${CMAKE_SOURCE_DIR}/cmake/ADM_coreConfig.h.cmake" "${CMAKE_BINARY_DIR}/config/ADM_coreConfig.h")
-MESSAGE(STATUS "ADM_coreConfig.h generated")
-
-SET(CONFIG_HEADER_TYPE ADM_BUILD_CLI)
-CONFIGURE_FILE("${CMAKE_SOURCE_DIR}/cmake/config.h.cmake" "${CMAKE_BINARY_DIR}/config/cli/config.h")
-MESSAGE(STATUS "CLI config.h generated")
-
-SET(CONFIG_HEADER_TYPE ADM_BUILD_GTK)
-CONFIGURE_FILE("${CMAKE_SOURCE_DIR}/cmake/config.h.cmake" "${CMAKE_BINARY_DIR}/config/gtk/config.h")
-MESSAGE(STATUS "GTK config.h generated")
-
-SET(CONFIG_HEADER_TYPE ADM_BUILD_QT4)
-CONFIGURE_FILE("${CMAKE_SOURCE_DIR}/cmake/config.h.cmake" "${CMAKE_BINARY_DIR}/config/qt4/config.h")
-MESSAGE(STATUS "Qt4 config.h generated")
-
-MESSAGE("")
-
-########################################
-# Directories to build
-########################################
-
-ADD_SUBDIRECTORY(ADM_core)
-ADD_SUBDIRECTORY(ADM_coreAudio)
-ADD_SUBDIRECTORY(ADM_coreAudioDevice)
-ADD_SUBDIRECTORY(ADM_coreAudioEncoder)
-ADD_SUBDIRECTORY(ADM_coreDemuxer)
-ADD_SUBDIRECTORY(ADM_coreDemuxerMpeg)
-ADD_SUBDIRECTORY(ADM_coreImage)
-ADD_SUBDIRECTORY(ADM_coreMuxer)
-ADD_SUBDIRECTORY(ADM_coreUI)
-ADD_SUBDIRECTORY(ADM_coreUtils)
-ADD_SUBDIRECTORY(ADM_coreVideoEncoder)
-ADD_SUBDIRECTORY(ADM_coreVideoFilter)
-ADD_SUBDIRECTORY(ADM_ffmpeg)
-########################################
-# Config Summary
-########################################
-INCLUDE(admConfigSummary)
-#
-# Packaging
-#
-INCLUDE(./avidemux/avidemuxPackageDebian.cmake)
-MESSAGE("")

Deleted: branches/avidemux_2.6_branch_mean/avidemux/libcheck.sh
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/libcheck.sh	2009-06-14 20:01:10 UTC (rev 4915)
+++ branches/avidemux_2.6_branch_mean/avidemux/libcheck.sh	2009-06-14 20:05:03 UTC (rev 4916)
@@ -1,17 +0,0 @@
-#!/bin/bash
-echo  "*************************"
-echo "Checking malloc..."
-echo  "*************************"
-find . -name "*.a" | xargs nm -AC | grep "malloc\|free"| grep   " U " | grep -v ".* U .*_.*" | grep -v "::"
-echo  "*************************"
-echo "Checking fread/fwrite..."
-echo  "*************************"
-find . -name "*.a" | xargs nm -AC | grep "fread\|fwrite"| grep   " U " | grep -v ".* U .*_.*"
-echo  "*************************"
-echo "Checking fopen/close..."
-echo  "*************************"
-find . -name "*.a" | xargs nm -AC | grep "fopen\|fclose"| grep   " U " | grep -v ".* U .*_.*" | grep -v qf
-echo  "*************************"
-echo "Checking GTK..."
-echo  "*************************"
-find . -name "*.a" | grep -vi gtk | xargs nm -AC | grep "gtk_"| grep   " U " 

Deleted: branches/avidemux_2.6_branch_mean/avidemux/subdirs
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/subdirs	2009-06-14 20:01:10 UTC (rev 4915)
+++ branches/avidemux_2.6_branch_mean/avidemux/subdirs	2009-06-14 20:05:03 UTC (rev 4916)
@@ -1,25 +0,0 @@
-ADM_audio
-ADM_audiocodec
-ADM_audiodevice
-ADM_audiofilter
-ADM_codecs
-ADM_colorspace
-ADM_editor
-ADM_encoder
-ADM_filter
-ADM_gui
-ADM_inpics
-ADM_library
-ADM_mpeg
-ADM_mpeg2dec
-ADM_mpegindexer
-ADM_nuv
-ADM_toolkit
-ADM_video
-ADM_vp32
-libMpeg2Dec
-oplug_avi
-oplug_mpeg
-oplug_mpegFF
-templates
-xpm



From mean at mail.berlios.de  Sun Jun 14 22:05:06 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sun, 14 Jun 2009 22:05:06 +0200
Subject: [Avidemux-svn-commit] r4917 - branches/avidemux_2.6_branch_mean
Message-ID: <200906142005.n5EK56H6030099@sheep.berlios.de>

Author: mean
Date: 2009-06-14 22:05:05 +0200 (Sun, 14 Jun 2009)
New Revision: 4917

Modified:
   branches/avidemux_2.6_branch_mean/.gitignore
Log:
[git] Add ffconf to gitignore

Modified: branches/avidemux_2.6_branch_mean/.gitignore
===================================================================
--- branches/avidemux_2.6_branch_mean/.gitignore	2009-06-14 20:05:03 UTC (rev 4916)
+++ branches/avidemux_2.6_branch_mean/.gitignore	2009-06-14 20:05:05 UTC (rev 4917)
@@ -4,3 +4,4 @@
 [tT]ags
 Doxyfile
 *.kdev*
+ffconf



From mean at mail.berlios.de  Sun Jun 14 22:05:09 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sun, 14 Jun 2009 22:05:09 +0200
Subject: [Avidemux-svn-commit] r4918 - in branches/avidemux_2.6_branch_mean:
	avidemux/common avidemux/common/ADM_codecs avidemux/gtk
	avidemux_core cmake
Message-ID: <200906142005.n5EK59K7030125@sheep.berlios.de>

Author: mean
Date: 2009-06-14 22:05:07 +0200 (Sun, 14 Jun 2009)
New Revision: 4918

Added:
   branches/avidemux_2.6_branch_mean/avidemux/gtk/CMakeLists.txt
Removed:
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_codecs/ADM_ffmpeg.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_codecs/ADM_ffmpeg.h
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_codecs/ADM_ffmpegConfig.h
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_codecs/ADM_mjpegEncode.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_codecs/ADM_mjpegEncode.h
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_codecs/ADM_xvid.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_codecs/ADM_xvid.h
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_codecs/ADM_xvid4.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_codecs/ADM_xvid4.h
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_codecs/ADM_xvid4param.h
Modified:
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_codecs/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_preview.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_preview.h
   branches/avidemux_2.6_branch_mean/avidemux/common/gtk_gui.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/gui_autodrive.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/gui_blackframes.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/gui_misc.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/gui_navigate.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/gui_play.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/gui_save.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/gui_savenew.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/main.cpp
   branches/avidemux_2.6_branch_mean/avidemux_core/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/cmake/config.h.cmake
Log:
[Gtk] Build .o files (no static libs)

Deleted: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_codecs/ADM_ffmpeg.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_codecs/ADM_ffmpeg.cpp	2009-06-14 20:05:05 UTC (rev 4917)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_codecs/ADM_ffmpeg.cpp	2009-06-14 20:05:07 UTC (rev 4918)
@@ -1,966 +0,0 @@
-/***************************************************************************
-                          ADM_ffmpeg.cpp  -  description
-                             -------------------
-
-	Encoder for ffmpeg
-	Reverse enginereed from mplayer & transcode
-
-
-    begin                : Tue Sep 10 2002
-    copyright            : (C) 2002 by mean
-    email                : fixounet at free.fr
- ***************************************************************************/
-
-/***************************************************************************
- *                                                                         *
- *   This program is free software; you can redistribute it and/or modify  *
- *   it under the terms of the GNU General Public License as published by  *
- *   the Free Software Foundation; either version 2 of the License, or     *
- *   (at your option) any later version.                                   *
- *                                                                         *
- ***************************************************************************/
-#include "config.h"
-
-
-
-#define __STDC_CONSTANT_MACROS // Lavcodec crap
-
-#include <stdio.h>
-#include <stdlib.h>
-#include <string.h>
-#include <math.h>
-
-#include "ADM_lavcodec.h"
-#include "avi_vars.h"
-#include "DIA_coreToolkit.h"
-#include "ADM_assert.h"
-#include "ADM_codecs/ADM_ffmpeg.h"
-
-#include "prefs.h"
-
-#include "ADM_video/ADM_vidMisc.h"
-//#define TEST_NOB 1
-
-extern int ADM_cpu_num_processors(void);
-static char LogName[500];
-
-#define WRAP_Open(x) \
-{\
-AVCodec *codec=avcodec_find_encoder(x);\
-if(!codec) {GUI_Error_HIG("Codec",QT_TR_NOOP("Internal error opening codec"#x));ADM_assert(0);} \
-  res=avcodec_open(_context, codec); \
-  if(res<0) {GUI_Error_HIG("Codec",QT_TR_NOOP("Internal error with context for  codec"#x".\n Did you use too low / too high target for 2 pass ?"));return 0;} \
-}
-/*****************************************/
-uint8_t ffmpegEncoder::stopEncoder(void)
-{
-    printf("[lavc] stopEncoder (%x)\n",_context);
-    if (_context)
-    {
-        avcodec_close (_context);
-        ADM_dealloc (_context);
-        _context = NULL;
-    }
-    return 1;
-}
-/*****************************************/
-ffmpegEncoderCQ::~ffmpegEncoderCQ ()
-  {
-    printf("[LAVCODEC]Deleting ffmpegCQencoder\n");
-    //stopEncoder ();
-    if (_statfile)
-      {
-        fflush(_statfile);
-	fclose (_statfile);
-      }
-  }
-/*****************************************/
-void ffmpegEncoder::postAmble (ADMBitstream * out, uint32_t sz)
-{
-//  out->ptsFrame = _context->coded_frame->display_picture_number; //real_pict_num;;
- //printf("Out : %u\n",out->ptsFrame);
-  out->len = (uint32_t) sz;
-  out->flags = frameType ();;
-  if(!_context->coded_frame->quality)
-      out->out_quantizer=(int) floor (_frame.quality / (float) FF_QP2LAMBDA);
-  else
-      out->out_quantizer =(int) floor (_context->coded_frame->quality / (float) FF_QP2LAMBDA);
-
-}
-//static myENC_RESULT res;
-/*****************************************/
-ffmpegEncoder::ffmpegEncoder (uint32_t width, uint32_t height, FF_CODEC_ID id,PixelFormat format):encoder (width,
-	 height)
-{
-  printf ("[LAVCODEC]Build: %d, colorspace :%x\n", LIBAVCODEC_BUILD,format);
-  _targetColorSpace=format;//PIX_FMT_YUV420P
-  _id = id;
-  _swap = 0;
-  _context = NULL;
-  _settingsPresence = 0;
-
-  _context = avcodec_alloc_context ();
-
-  ADM_assert (_context);
-  memset (&_frame, 0, sizeof (_frame));
-  _frame.pts = AV_NOPTS_VALUE;
-  _context->width = _w;
-  _context->height = _h;
-
-  _isMT = 0;
-  encodePreamble(NULL);
-
-};
-/*****************************************/
-uint8_t   ffmpegEncoder::encode(ADMImage *in,ADMBitstream *out)
-{
-    int32_t sz = 0;
-    ADM_assert(out->bufferSize);
-    encodePreamble (in->data);
-    if ((sz = avcodec_encode_video (_context, out->data, out->bufferSize, &_frame)) < 0)
-        return 0;
-    postAmble(out,sz);
-    return 1;
-}
-/*****************************************/
-ffmpegEncoder::~ffmpegEncoder ()
-{
-  printf ("[lavc] encoder destroying..\n");
-  if (_isMT && _context)
-    {
-      printf ("[lavc] killing threads\n");
-      avcodec_thread_free (_context);
-      _isMT = 0;
-    }
-  stopEncoder ();
-}
-
-/*
-   	Initialize codec in Q mode
-
-*/
-
-uint8_t
-ffmpegEncoder::encodePreamble (uint8_t * in)
-{
-  _frame.key_frame = 0;
-  _frame.pict_type = 0;
-
-  switch(_targetColorSpace)
-  {
-    case PIX_FMT_YUV420P:
-        _frame.linesize[0] = _w;
-        _frame.linesize[1] = _w >> 1;
-        _frame.linesize[2] = _w >> 1;
-        _frame.data[0] = in;
-        _frame.data[2] = in + _w * _h;
-        _frame.data[1] = in + _w * _h + ((_w * _h) >> 2);
-        break;
- case PIX_FMT_YUV422P:
-        _frame.linesize[0] = _w;
-        _frame.linesize[1] = _w >> 1;
-        _frame.linesize[2] = _w >> 1;
-        _frame.data[0] = in;
-        _frame.data[2] = in + _w * _h;
-        _frame.data[1] = in + _w * _h + ((_w * _h) >> 1);
-
-        break;
-    default:
-      ADM_assert(0);
-  }
-  return 1;
-}
-
-uint32_t
-ffmpegEncoder::frameType (void)
-{
-  int k, t;
-
-  k = _context->coded_frame->key_frame;
-  t = _context->coded_frame->pict_type;
-
-  //printf(" Kf: %d type :%d \n",k,t);
-  if (k == 1)
-    return AVI_KEY_FRAME;
-  if (t == FF_B_TYPE)
-    return AVI_B_FRAME;
-  //if(t==FF_I_TYPE) return AVI_KEY_FRAME;
-  return 0;
-
-}
-
-/*
-	This is called for mpeg1/2 initContext
-	Set some specific stuff.
-
-*/
-uint8_t
-ffmpegEncoder::gopMpeg1 (void)
-{
-  // small gop, 2 b frames allowed
-  // min bitrate 500 max bitrate 2200
-  int rate;
-
-  rate = _context->time_base.den;
-  rate = rate * 1000;
-  rate /= _context->time_base.num;
-
-  _context->me_range = 255;	// Fix motion vector for picky players (pioneer)
-
-  if (_id == FF_MPEG2)
-    {
-      if (FRAME_FILM == identMovieType (rate))
-	{
-	  printf ("[LAVCODEC]Pulldown activated...\n");
-	  _context->flags2 |= CODEC_FLAG2_32_PULLDOWN;
-	}
-    }
-#ifdef  TEST_NOB		// disable B frames
-  _context->max_b_frames = 0;
-#else
-  _context->max_b_frames = 2;
-#endif
-  printf ("[LAVCODEC]Using 2 b frames\n");
-  if (_id == FF_MPEG2)
-    {
-      _context->mpeg_quant = 1;	//1; // Should be mpeg quant
-    }
-  else
-    {
-      _context->mpeg_quant = 0;	//1; // Should be mpeg quant
-    }
-  if (_settingsPresence)
-    {
-      if (_settings.widescreen)
-	{
-          printf("[LAVCODEC]WideScreen\n");
-	  _context->sample_aspect_ratio.num = 16;
-	  _context->sample_aspect_ratio.den = 9;
-	}
-      else
-	{
-	  _context->sample_aspect_ratio.num = 4;
-	  _context->sample_aspect_ratio.den = 3;
-	}
-
-      _context->rc_max_rate_header = _settings.maxBitrate * 1000;//1800*1000;// 2400 max, 700 min
-      _context->rc_buffer_size_header = _settings.bufferSize * 8 * 1024;
-      // If we don't have a maxrate, don't set buffer_size
-      if (1 && !_settings.override_ratecontrol)	// FIXME
-
-	{
-	  _context->rc_buffer_size = _context->rc_buffer_size_header;
-	  _context->rc_max_rate = _context->rc_max_rate_header;
-	}
-      else
-	{
-	  _context->rc_buffer_size = 0;	// for xvid, no VBV so no ratecontrol
-	  _context->rc_max_rate = 0;
-	}
-      _context->gop_size = _settings.gop_size;
-
-    }
-  else
-    {
-      _context->rc_buffer_size = 200 * 8 * 1024;	// 40 for VCD  & 200 for SVCD
-      _context->gop_size = _settings.gop_size;
-
-    }
-  _context->rc_buffer_aggressivity = 1.0;
-  _context->rc_initial_cplx = 3;
-  _context->qmin = 2;
-  _context->qmax = 31;
-
-  _context->scenechange_threshold = 0xfffffff;	// Don't insert I frame out of order
-
-  _frame.interlaced_frame = _settings.interlaced;
-  if (_settings.interlaced)
-    _frame.top_field_first = !_settings.bff;
-
-#if defined(CODEC_FLAG_INTERLACED_DCT)
-  _context->flags |= _settings.interlaced ? CODEC_FLAG_INTERLACED_DCT : 0;
-#endif
-#if defined(CODEC_FLAG_INTERLACED_ME)
-  _context->flags |= _settings.interlaced ? CODEC_FLAG_INTERLACED_ME : 0;
-#endif
-
-  //
-  //_context->dsp_mask= FF_MM_FORCE;
-  printf ("[LAVCODEC]Mpeg12 settings:\n____________\n");
-  printf ("[LAVCODEC]FF Max rate   (header) : %"LU" kbps\n",
-	  (_context->rc_max_rate_header) / 1000);
-  printf ("[LAVCODEC]FF Buffer Size(header) : %"LU" bits / %"LU" kB\n",
-	  (_context->rc_buffer_size_header),
-	  _context->rc_buffer_size_header / (8 * 1024));
-  printf ("[LAVCODEC]FF Max rate   (rc) : %"LU" kbps\n", (_context->rc_max_rate) / 1000);
-  printf ("[LAVCODEC]FF Buffer Size(rc) : %"LU" bits / %"LU" kB\n",
-	  (_context->rc_buffer_size), _context->rc_buffer_size / (8 * 1024));
-
-  printf ("[LAVCODEC]FF GOP Size    : %"LU"\n", _context->gop_size);
-  printf ("[LAVCODEC]FF Bitrate    : %"LU" (kb/s)\n", _context->bit_rate/1000);
-
-  return 1;
-}
-
-uint8_t
-ffmpegEncoder::initContext (void)
-{
-  int res = 0;
-
-  // set a gop size close to what's requested for most
-  // player compatiblity
-  if (_id == FF_MPEG1 || _id == FF_MPEG2)
-    gopMpeg1 ();
-  // if (_id == FF_HUFF || _id == FF_FFV1)
-  _context->strict_std_compliance = -1;
-  if (_id == FF_HUFF || _id == FF_FFV1 ||_id == FF_FFHUFF )
-    _context->strict_std_compliance = -2;
-
-  switch (_id)
-    {
-    case FF_MPEG4:
-      encoderMT ();
-      WRAP_Open (CODEC_ID_MPEG4);
-      break;
-    case FF_MSMP4V3:
-      WRAP_Open (CODEC_ID_MSMPEG4V3);
-      break;
-    case FF_MPEG1:
-      encoderMT ();
-      WRAP_Open (CODEC_ID_MPEG1VIDEO);
-      break;
-    case FF_MPEG2:
-      encoderMT ();
-      WRAP_Open (CODEC_ID_MPEG2VIDEO);
-      break;
-    case FF_H263:
-      WRAP_Open (CODEC_ID_H263);
-      break;
-    case FF_H263P:
-      WRAP_Open (CODEC_ID_H263P);
-      break;
-    case FF_FLV1:
-      WRAP_Open (CODEC_ID_FLV1);
-      break;
-    case FF_HUFF:
-      WRAP_Open (CODEC_ID_HUFFYUV);
-      break;
-    case FF_FFV1:
-      WRAP_Open (CODEC_ID_FFV1);
-      break;
-    case FF_MJPEG:
-      WRAP_Open (CODEC_ID_MJPEG);
-      break;
-    case FF_FFHUFF:
-      WRAP_Open (CODEC_ID_FFVHUFF);
-      break;
-    case FF_SNOW:
-      WRAP_Open (CODEC_ID_SNOW);
-      break;
-
-    case FF_DV:
-      if(_context->width!=720 || _context->height!=576)
-            return 0; // should be caught by upper layers before going here...
-      WRAP_Open (CODEC_ID_DVVIDEO);
-      break;
-
-    default:
-      ADM_assert (0);
-    }
-
-  if (res < 0)
-    {
-      printf ("[lavc] Problem opening codec\n");
-      return 0;
-    }
-  return 1;
-
-}
-
-void ffmpegEncoder::encoderMT (void)
-{
-  uint32_t threads = 0;
-
-  prefs->get(FEATURE_THREADING_LAVC, &threads);
-
-  if (threads == 0)
-	  threads = ADM_cpu_num_processors();
-
-  if (threads == 1)
-	  threads = 0;
-
-  if (threads)
-  {
-      printf ("[lavc] Enabling MT encoder with %u threads\n", threads);
-
-      if (avcodec_thread_init (_context, threads) == -1)
-	      printf ("[lavc] Failed!!\n");
-	  else
-          _isMT = 1;
-  }
-}
-
-/*
-		Set user selected matrices.
-
-*/
-uint8_t
-ffmpegEncoder::setCustomMatrices (uint16_t * intra, uint16_t * inter)
-{
-  _context->intra_matrix = intra;
-  _context->inter_matrix = inter;
-  return 1;
-}
-
-uint8_t
-ffmpegEncoder::setGopSize (uint32_t size)
-{
-
-  _context->gop_size = size;
-  printf ("[LAVCODEC]Gop size is now %d\n", _context->gop_size);
-  return 1;
-
-}
-
-uint8_t
-ffmpegEncoder::setLogFile (const char *name)
-{
-  strcpy (LogName, name);
-  return 1;
-
-}
-
-uint8_t
-ffmpegEncoder::setConfig (FFcodecSetting * set)
-{
-  memcpy (&_settings, set, sizeof (_settings));
-  _settingsPresence = 1;
-  return 1;
-
-}
-
-uint8_t
-ffmpegEncoderCQ::init (uint32_t val, uint32_t fps1000, uint8_t vbr)
-{
-  printf ("[LAVCODEC] Using Q=%u\n",val);
-  mplayer_init ();
-  _qual = val;
-  _vbr = vbr;
-  _context->flags |= CODEC_FLAG_QSCALE;
-
-  if (_vbr)
-    {
-      _context->flags |= CODEC_FLAG_PASS1;
-      _statfile = NULL;
-
-    }
-  _context->time_base = (AVRational)  {  1000, fps1000};
-/*
-  _context->frame_rate_base = 1000;
-  _context->frame_rate = fps1000;
-*/
-  _context->bit_rate = 0;
-  _context->bit_rate_tolerance = 1024 * 8 * 1000;
-
-  return initContext ();
-}
-
-uint32_t ffmpegEncoder::getCodedFrame (void)
-{
-  return _last_coded_frame;
-}
-
-uint8_t ffmpegEncoderCQ::encode (ADMImage * in, ADMBitstream * out)
-{
-  int32_t    sz = 0;
-  uint32_t    f;
-  uint8_t    r=0;
-
-  _frame.quality = (int) floor (FF_QP2LAMBDA * _qual + 0.5);
-  r=ffmpegEncoder::encode(in,out);
-  out->out_quantizer=_qual;
-  if (_vbr)			// update for lavcodec internal
-    {
-      if (!_statfile)
-	{
-	  printf ("[lavc] using %s as log file\n", LogName);
-	  _statfile = fopen (LogName, "wb");
-	}
-
-      if (!_statfile)
-	{
-	  printf
-	    ("[lavc] cannot open log file for writing! (%s)\n",
-	     LogName);
-	  return 0;
-	}
-      if (_context->stats_out)
-	fprintf (_statfile, "%s", _context->stats_out);
-    }
-
-  return 1;
-
-}
-
-/*
-_____________________________________________
-*/
-/*
-   	Initialize codec in CBR mode
-
-*/
-
-uint8_t ffmpegEncoderCBR::init (uint32_t val, uint32_t fps1000)
-{
-//       mpeg4_encoder
-  //
-//              now init our stuff
-//
-  _br = val;
-  mplayer_init ();
-/*  _context->frame_rate_base = 1000;
-  _context->frame_rate = fps1000;*/
-  _context->time_base = (AVRational)
-  {
-  1000, fps1000};
-
-  if(_id==FF_MPEG2 || _id==FF_MPEG1)
-	  _context->bit_rate = _br;
-  else
-	  _context->bit_rate = _br*1000;
-
-  printf ("[LAVCODEC] Using  bitrate in context :%"LU" kbps",_context->bit_rate/1000);
-
-  return initContext ();
-
-}
-
-
-//------------------------------------------------------------------------------
-//              VBR
-//------------------------------------------------------------------------------
-uint8_t ffmpegEncoderVBR::encode (ADMImage * in, ADMBitstream * out)
-{
-    uint16_t q;
-    uint8_t kf;
-
-    q=out->in_quantizer;
-    _frame.quality = (int) floor (FF_QP2LAMBDA * q + 0.5);
-    return ffmpegEncoder::encode(in,out);
-
-}
-/*
-   			val is the average bitrate wanted, else it is useless
-*/
-uint8_t
-ffmpegEncoderVBR::init (uint32_t val, uint32_t fps1000)
-{
-  uint32_t statSize;
-  FILE *_statfile;
-
-  printf ("[lavc] initializing in VBR mode\n");
-  _qual = val;
-  mplayer_init ();
-
-//   _context->frame_rate_base = 1000;
-//   _context->frame_rate = fps1000;
-
-  _context->time_base = (AVRational)  {  1000, fps1000};
-
-  /* If internal 2 passes mode is selected ... */
-  _context->flags |= CODEC_FLAG_PASS2;
-
-  _statfile = fopen (LogName, "rb");
-  if (!_statfile)
-    {
-      printf ("internal file does not exists ?\n");
-      return 0;
-    }
-
-  fseek (_statfile, 0, SEEK_END);
-  statSize = ftello (_statfile);
-  fseek (_statfile, 0, SEEK_SET);
-  _context->stats_in = (char *) ADM_alloc (statSize + 1);
-  _context->stats_in[statSize] = 0;
-  fread (_context->stats_in, statSize, 1, _statfile);
-  fclose(_statfile);
-
-  _context->bit_rate = val;	// bitrate
-
-  return initContext ();
-
-}
-
-ffmpegEncoderVBR::~ffmpegEncoderVBR ()
-{
-
-
-  ADM_dealloc (_context->stats_in);
-
-}
-
-//--------------------- FFmpeg VBR, external Qzation engine ------------------
-uint8_t
-ffmpegEncoderVBRExternal::encode (ADMImage * in, ADMBitstream * out)
-{
-    uint8_t r;
-    uint32_t q;
-  q=out->in_quantizer;
-  _frame.quality = (int) floor (FF_QP2LAMBDA * q + 0.5);
-  r= ffmpegEncoder::encode(in,out);
-  out->out_quantizer=q;
-  return r;
-}
-
-
-/**
-	This is used only for Mpeg1, so it is a bit tuned for it
-*/
-uint8_t
-ffmpegEncoderVBRExternal::init (uint32_t val, uint32_t fps1000)
-{
-
-  printf ("[lavc] initializing in VBRExternal mode\n");
-  _qual = val;
-  mplayer_init ();
-
-/*  _context->frame_rate_base = 1000;
-  _context->frame_rate = fps1000;*/
-  _context->time_base = (AVRational) {  1000, fps1000};
-  _context->flags |= CODEC_FLAG_QSCALE;;
-  _context->bit_rate = 0;
-  _context->bit_rate_tolerance = 1024 * 8 * 1000;
-  _context->max_qdiff = 10;
-
-  // since this is used only for mpeg1 ...
-  // PAL ?
-  _context->bit_rate = 2500 * 1000 * 8;
-  _context->sample_aspect_ratio.num = 4;
-  _context->sample_aspect_ratio.den = 3;
-
-  return initContext ();;
-}
-
-ffmpegEncoderVBRExternal::~ffmpegEncoderVBRExternal ()
-{
-
-
-
-}
-
-//--------------------- FFmpeg VBR, external Qzation engine ------------------
-
-void
-ffmpegEncoder::mplayer_init (void)
-{
-  /*
-     default values : Copy/past from mplayer
-   */
-  _context->pix_fmt = _targetColorSpace;
-
-  if (!_settingsPresence)
-    {
-      printf ("[lavc] using default encode settings \n");
-      _context->qmin = 2;
-      _context->qmax = 31;
-      _context->max_b_frames = 0;
-      _context->mpeg_quant = 0;
-      _context->me_method = ME_EPZS;
-      _context->flags = 0;
-      _context->max_qdiff = 3;
-      _context->luma_elim_threshold = 0;
-      _context->chroma_elim_threshold = 0;
-      _context->lumi_masking = 0.0;;
-      _context->dark_masking = 0.0;
-      _context->qcompress = 0.5;
-      _context->qblur = 0.5;
-      _context->gop_size = 250;
-    }
-  else
-    {
-      if (_id == FF_MPEG1 || _id == FF_MPEG2 || _id == FF_FLV1)
-	{
-	  _context->gop_size = _settings.gop_size;
-	}
-      else
-	{
-	  _context->gop_size = 250;
-	}
-#define SETX(x) _context->x=_settings.x; printf("[LAVCODEC]"#x" : %d\n",_settings.x);
-#define SETX_COND(x) if(_settings.is_##x) {_context->x=_settings.x; printf("[LAVCODEC]"#x" : %d\n",_settings.x);} else\
-		{ printf(#x" is not activated\n");}
-      SETX (me_method);
-      SETX (qmin);
-      SETX (qmax);
-      SETX (max_b_frames);
-      SETX (mpeg_quant);
-      SETX (max_qdiff);
-      SETX_COND (luma_elim_threshold);
-      SETX_COND (chroma_elim_threshold);
-
-#undef SETX
-#undef SETX_COND
-
-#define SETX(x)  _context->x=_settings.x; printf("[LAVCODEC]"#x" : %f\n",_settings.x);
-#define SETX_COND(x)  if(_settings.is_##x) {_context->x=_settings.x; printf("[LAVCODEC]"#x" : %f\n",_settings.x);} else  \
-									{printf("[LAVCODEC]"#x" No activated\n");}
-      SETX_COND (lumi_masking);
-      SETX_COND (dark_masking);
-      SETX (qcompress);
-      SETX (qblur);
-      SETX_COND (temporal_cplx_masking);
-      SETX_COND (spatial_cplx_masking);
-
-#undef SETX
-#undef SETX_COND
-
-#define SETX(x) if(_settings.x){ _context->flags|=CODEC_FLAG##x;printf("[LAVCODEC]"#x" is set\n");}
-      SETX (_GMC);
-
-
-      switch (_settings.mb_eval)
-	{
-	case 0:
-	  _context->mb_decision = FF_MB_DECISION_SIMPLE;
-	  break;
-	case 1:
-	  _context->mb_decision = FF_MB_DECISION_BITS;
-	  break;
-	case 2:
-	  _context->mb_decision = FF_MB_DECISION_RD;
-	  break;
-	default:
-	  ADM_assert (0);
-
-
-	}
-      //SETX(_HQ);
-      SETX (_4MV);
-      SETX (_QPEL);
-      //SETX (_TRELLIS_QUANT);
-#warning FIXME TRELLIS
-      if(_settings._TRELLIS_QUANT)
-        { 
-            _context->trellis=1;printf("[LAVCODEC] trellisis set\n");
-        }
-      SETX (_NORMALIZE_AQP);
-
-      if (_settings.widescreen)
-	{
-	  _context->sample_aspect_ratio.num = 16;
-	  _context->sample_aspect_ratio.den = 9;
-	  printf ("[LAVCODEC]16/9 aspect ratio is set.\n");
-
-	}
-#undef SETX
-    }
-  if ((_id == FF_H263) || (_id == FF_H263P))
-    _context->bit_rate_tolerance = 4000;
-  else
-    _context->bit_rate_tolerance = 8000000;
-
-
-  _context->b_quant_factor = 1.25;
-  _context->rc_strategy = 2;
-  _context->b_frame_strategy = 0;
-  _context->b_quant_offset = 1.25;
-  _context->rtp_payload_size = 0;
-  _context->strict_std_compliance = 0;
-  _context->i_quant_factor = 0.8;
-  _context->i_quant_offset = 0.0;
-  _context->rc_qsquish = 1.0;
-  _context->rc_qmod_amp = 0;
-  _context->rc_qmod_freq = 0;
-  _context->rc_eq = const_cast < char *>("tex^qComp");
-  _context->rc_max_rate = 000;
-  _context->rc_min_rate = 000;
-  _context->rc_buffer_size = 000;
-  _context->rc_buffer_aggressivity = 1.0;
-  _context->rc_initial_cplx = 0;
-  _context->dct_algo = 0;
-  _context->idct_algo = 0;
-  _context->p_masking = 0.0;
-
-  _context->bit_rate = 0;
-
-}
-
-uint8_t
-ffmpegEncoder::init (uint32_t val, uint32_t fps1000)
-{
-  UNUSED_ARG (val);
-  UNUSED_ARG (fps1000);
-  return 0;
-}
-
-uint8_t
-ffmpegEncoder::init (uint32_t val, uint32_t fps1000, uint8_t sw)
-{
-  UNUSED_ARG (sw);
-  return init (val, fps1000);
-}
-
-//------------------------------
-uint8_t
-ffmpegEncoderHuff::init (uint32_t val, uint32_t fps1000, uint8_t vbr)
-{
-  UNUSED_ARG (val);
-  UNUSED_ARG (vbr);
-  mplayer_init ();
-
-  _context->time_base = (AVRational)
-  {
-  1000, fps1000};
-//   _context->frame_rate_base = 1000;
-//   _context->frame_rate = fps1000;
-
-
-  _context->bit_rate = 0;
-  _context->bit_rate_tolerance = 1024 * 8 * 1000;
-  _context->gop_size = 250;
-
-  return initContext ();
-}
-//__________________________________
-/**
-
-*/
-
-ffmpegEncoderHuff::ffmpegEncoderHuff (uint32_t width, uint32_t height,FF_CODEC_ID id)
-  :   ffmpegEncoder (width,height, id,PIX_FMT_YUV422P)
-{
-  // Allocate our resampler & intermediate
-  yuy2=new uint8_t[width*height*2];
-  // And Color converted
-    convert=new ADMColorspace(width,height, ADM_COLOR_YV12,ADM_COLOR_YUV422P);
-}
-/**
-
-*/
-
-ffmpegEncoderHuff::~ffmpegEncoderHuff()
-{
-  if(yuy2)
-  {
-    delete [] yuy2;
-    yuy2=NULL;
-  }
-  if(convert)
-  {
-   delete convert;
-    convert=NULL;
-  }
-  stopEncoder ();
-}
-/**
-
-*/
-  uint8_t   ffmpegEncoderHuff::encode(ADMImage *in,ADMBitstream *out)
-{
-    int32_t sz = 0;
-    ADM_assert(out->bufferSize);
-    encodePreamble(yuy2);
-    /* Convert */
-   convert->convert(in->data,yuy2);
-
-    /***/
-    if ((sz = avcodec_encode_video (_context, out->data, out->bufferSize, &_frame)) < 0)
-        return 0;
-    postAmble(out,sz);
-    return 1;
-}
-//------------------------------
-uint8_t
-  ffmpegEncoderFFHuff::init (uint32_t val, uint32_t fps1000, uint8_t vbr)
-{
-  UNUSED_ARG (val);
-  UNUSED_ARG (vbr);
-  mplayer_init ();
-
-/*  _context->frame_rate_base = 1000;
-  _context->frame_rate = fps1000;*/
-  _context->time_base = (AVRational)
-  {
-  1000, fps1000};
-
-  _context->bit_rate = 0;
-  _context->bit_rate_tolerance = 1024 * 8 * 1000;
-  _context->gop_size = 250;
-
-  return initContext ();
-}
-
-//_______________________________________
-uint8_t
-ffmpegEncoder::getExtraData (uint32_t * l, uint8_t ** d)
-{
-  *d = (uint8_t *) _context->extradata;
-  *l = _context->extradata_size;
-  printf ("[LAVCODEC]We got some extra data: %"LU"\n", *l);
-  if (*l)
-    return 1;
-
-  else
-    return 0;
-}
-
-//----
-//------------------------------
-uint8_t
-ffmpegEncoderFFV1::init (uint32_t val, uint32_t fps1000, uint8_t vbr)
-{
-  UNUSED_ARG (val);
-  UNUSED_ARG (vbr);
-  mplayer_init ();
-  _context->time_base = (AVRational)
-  {
-  1000, fps1000};
-//   _context->frame_rate_base = 1000;
-//   _context->frame_rate = fps1000;
-
-
-  _context->bit_rate = 0;
-  _context->bit_rate_tolerance = 1024 * 8 * 1000;
-  _context->gop_size = 250;
-  printf ("[LAVCODEC]FFV1 codec initializing...\n");
-  return initContext ();
-}
-
-/*---
-*/
-uint8_t
-  ffmpegEncoderFFMjpeg::init (uint32_t val, uint32_t fps1000, uint8_t vbr)
-{
-  UNUSED_ARG (val);
-  UNUSED_ARG (vbr);
-  mplayer_init ();
-
-  float f;
-
-  f = val;
-  f = 31. - (29. * f / 100.);
-
-  _qual = (uint32_t) floor (f);
-
-//   _context->frame_rate_base = 1000;
-//   _context->frame_rate = fps1000;
-  _context->time_base = (AVRational)
-  {
-  1000, fps1000};
-  _context->flags = CODEC_FLAG_QSCALE;
-  _context->bit_rate = 0;
-  _context->bit_rate_tolerance = 1024 * 8 * 1000;
-  _context->gop_size = 250;
-  printf ("[LAVCODEC]FF Mjpeg codec initializing %d %% -> q =%d...\n", val, _qual);
-  return initContext ();
-}
-
-
-
-uint8_t
-ffmpegEncoderFFMjpeg::encode (ADMImage * in, ADMBitstream * out)
-{
-  _frame.quality = (int) floor (FF_QP2LAMBDA * _qual + 0.5);
-  return ffmpegEncoder::encode(in,out);
-}
-

Deleted: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_codecs/ADM_ffmpeg.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_codecs/ADM_ffmpeg.h	2009-06-14 20:05:05 UTC (rev 4917)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_codecs/ADM_ffmpeg.h	2009-06-14 20:05:07 UTC (rev 4918)
@@ -1,226 +0,0 @@
-/***************************************************************************
-                          ADM_ffmpeg.h  -  description
-                             -------------------
-                             
-                             
-	Mpeg4 ****encoder******** using ffmpeg
-	                             
-    begin                : Tue Sep 10 2002
-    copyright            : (C) 2002 by mean
-    email                : fixounet at free.fr
- ***************************************************************************/
-
-/***************************************************************************
- *                                                                         *
- *   This program is free software; you can redistribute it and/or modify  *
- *   it under the terms of the GNU General Public License as published by  *
- *   the Free Software Foundation; either version 2 of the License, or     *
- *   (at your option) any later version.                                   *
- *                                                                         *
- ***************************************************************************/
-
-#ifndef __FFMPEG_ENC__
-#define   __FFMPEG_ENC__
-#include "ADM_colorspace.h"
-typedef enum
-{
-  FF_MSMP4V3 = 1,
-  FF_MPEG4 = 2,
-  FF_MPEG1 = 3,
-  FF_H263 = 4,
-  FF_H263P = 5,
-  FF_HUFF = 6,
-  FF_FFV1 = 7,
-  FF_MJPEG = 8,
-  FF_MPEG2 = 9,
-  FF_SNOW = 10,
-  FF_FFHUFF = 11,
-  FF_DV=12,
-  FF_FLV1=13,
-} FF_CODEC_ID;
-
-/*
-	Some of FFmpeg internal options as encoder
-	User tunable
-*/
-
-#include "ADM_codecs/ADM_ffmpegConfig.h"
-
-class ffmpegEncoder:public encoder
-{
-protected:
-  void postAmble (ADMBitstream * out, uint32_t sz);
-  uint8_t _init;
-  uint8_t _swap;
-  AVCodecContext *_context;
-  AVFrame _frame;
-  FF_CODEC_ID _id;
-  uint32_t _last_coded_frame;
-  uint8_t _settingsPresence;
-  uint8_t _isMT;
-  FFcodecSetting _settings;
-  void mplayer_init (void);
-  uint8_t initContext (void);
-  uint8_t gopMpeg1 (void);
-  uint32_t frameType (void);
-  uint8_t encodePreamble (uint8_t * in);
-  PixelFormat _targetColorSpace;
-
-public:
-    uint8_t setConfig (FFcodecSetting * set);
-  uint8_t setLogFile (const char *name);
-  void encoderMT (void);
-    ffmpegEncoder (uint32_t width, uint32_t height, FF_CODEC_ID id,PixelFormat format=PIX_FMT_YUV420P);
-   virtual ~ffmpegEncoder ();
-
-  virtual uint8_t stopEncoder (void);
-  
-  virtual uint8_t init (uint32_t val, uint32_t fps1000);
-  virtual uint8_t init (uint32_t val, uint32_t fps1000, uint8_t sw);
-  virtual uint8_t encode (ADMImage * in, ADMBitstream * out);
-  virtual uint8_t getExtraData (uint32_t * l, uint8_t ** d);
-  virtual uint8_t setCustomMatrices (uint16_t * intra, uint16_t * inter);
-  virtual uint8_t setGopSize (uint32_t size);	// !!! IT DOES NOT WORK, DONE TOO LATE!!!!
-  uint32_t getCodedFrame (void);
-};
-
-class ffmpegEncoderCQ:public ffmpegEncoder
-{
-protected:uint32_t _qual;
-  uint8_t _vbr;
-  FILE *_statfile;
-
-public:  ffmpegEncoderCQ (uint32_t width, uint32_t height,
-		     FF_CODEC_ID id):ffmpegEncoder (width, height, id)
-  {
-    _qual = 3;
-    _vbr = 0;
-    _statfile = NULL;
-  };
-
-  virtual uint8_t init (uint32_t val, uint32_t fps1000, uint8_t vbr = 0);
-  virtual uint8_t encode (ADMImage * in, ADMBitstream * out);
-  virtual ~ ffmpegEncoderCQ ();
-  
-};
-
-
-class ffmpegEncoderCBR:public ffmpegEncoder
-{
-protected:uint32_t _br;
-public:ffmpegEncoderCBR (uint32_t width, uint32_t height,
-		    FF_CODEC_ID id):ffmpegEncoder (width, height, id)
-  {
-    _br = 1000;
-  };
-
-  virtual ~ ffmpegEncoderCBR ()
-  {
-    stopEncoder ();
-  }
-  virtual uint8_t init (uint32_t val, uint32_t fps1000);
-
-
-};
-
-class ffmpegEncoderVBR:public ffmpegEncoderCQ
-{
-protected:
-    uint8_t _internal;
-
-public:  virtual uint8_t init (uint32_t val, uint32_t fps1000);
-    ffmpegEncoderVBR (uint32_t width, uint32_t height,
-		      FF_CODEC_ID id):ffmpegEncoderCQ (width, height, id)
-  {
-    _internal = 1;
-  }
-  ffmpegEncoderVBR (uint32_t width, uint32_t height, uint8_t inter,
-		    FF_CODEC_ID id):ffmpegEncoderCQ (width, height, id)
-  {
-    _internal = inter;
-  }
-  virtual uint8_t encode (ADMImage * in, ADMBitstream * out);
-  virtual ~ ffmpegEncoderVBR ();
-};
-
-
-class ffmpegEncoderVBRExternal:public ffmpegEncoderCQ
-{
-protected:
-public:
-        virtual uint8_t init (uint32_t val, uint32_t fps1000);
-                        ffmpegEncoderVBRExternal(uint32_t width,uint32_t height,FF_CODEC_ID id):
-                                ffmpegEncoderCQ (width, height,id)
-  {
-  }
-  virtual uint8_t encode (ADMImage * in, ADMBitstream * out);
-  virtual ~ ffmpegEncoderVBRExternal ();
-};
-//*********************************************************
-class ffmpegEncoderHuff:public ffmpegEncoder
-{
-protected: 
-            uint8_t *yuy2;
-            ADMColorspace *convert;
-
-public:
-                ffmpegEncoderHuff (uint32_t width, uint32_t height,FF_CODEC_ID id);
-                        
-
-  virtual uint8_t init (uint32_t val, uint32_t fps1000, uint8_t vbr = 0);
-          uint8_t encode(ADMImage *in,ADMBitstream *out);
-  virtual ~ ffmpegEncoderHuff ();
-};
-//*********************************************************
-class ffmpegEncoderFFHuff:public ffmpegEncoder
-{
-protected: 
-public:
-        ffmpegEncoderFFHuff (uint32_t width, uint32_t height,FF_CODEC_ID id):
-                                ffmpegEncoder (width,height, id)
-  {
-
-  };
-
-  virtual uint8_t init (uint32_t val, uint32_t fps1000, uint8_t vbr = 0);
-  virtual ~ ffmpegEncoderFFHuff ()
-  {
-    stopEncoder ();
-  }
-};
-
-
-class ffmpegEncoderFFV1:public ffmpegEncoder
-{
-protected: public:ffmpegEncoderFFV1 (uint32_t width, uint32_t height,FF_CODEC_ID id)
-    :ffmpegEncoder (width,height, id) {}
-  virtual uint8_t init (uint32_t val, uint32_t fps1000, uint8_t vbr = 0);
-  virtual ~ ffmpegEncoderFFV1 ()
-  {
-    stopEncoder ();
-
-  }
-};
-class ffmpegEncoderFFMjpeg:public ffmpegEncoder
-{
-protected:uint32_t _qual;
-
-public:ffmpegEncoderFFMjpeg (uint32_t width, uint32_t height,FF_CODEC_ID id)
-    :ffmpegEncoder (width, height,id)
-  {
-    _qual = 4;
-  };
-
-  virtual uint8_t init (uint32_t val, uint32_t fps1000, uint8_t vbr = 0);
-  virtual uint8_t encode (ADMImage * in, ADMBitstream * out);
-  virtual ~ ffmpegEncoderFFMjpeg ()
-  {
-    stopEncoder ();
-
-  }
-};
-
-
-
-
-#endif

Deleted: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_codecs/ADM_ffmpegConfig.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_codecs/ADM_ffmpegConfig.h	2009-06-14 20:05:05 UTC (rev 4917)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_codecs/ADM_ffmpegConfig.h	2009-06-14 20:05:07 UTC (rev 4918)
@@ -1,79 +0,0 @@
-/***************************************************************************
-                          ADM_ffmpegConfig -  description
-                             -------------------
-	Fine tuning for lavcodec encoder			     
-			     
-    begin                : 19-01-2003
-    copyright            : (C) 2003 by mean
-    email                : fixounet at free.fr
-
-   
-
- ***************************************************************************/
-
-/***************************************************************************
- *                                                                         *
- *   This program is free software; you can redistribute it and/or modify  *
- *   it under the terms of the GNU General Public License as published by  *
- *   the Free Software Foundation; either version 2 of the License, or     *
- *   (at your option) any later version.                                   *
- *                                                                         *
- ***************************************************************************/
-#ifndef ADM_FFCONFIG
-#define ADM_FFCONFIG
-#include "avcodec.h"
-typedef struct FFcodecSetting
-{
-  Motion_Est_ID me_method;
-  uint32_t _GMC;
-  uint32_t _4MV;
-  uint32_t _QPEL;
-  uint32_t _TRELLIS_QUANT;
-  uint32_t qmin;			// 2-31
-  uint32_t qmax;			// 2-31
-  uint32_t max_qdiff;		// 1-31
-  uint32_t max_b_frames;		// 0-1
-  uint32_t mpeg_quant;		// 0-1
-  uint32_t is_luma_elim_threshold;
-  uint32_t luma_elim_threshold;	// -99--99
-  uint32_t is_chroma_elim_threshold;	// -99--99           
-  uint32_t chroma_elim_threshold;	// -99--99      
-
-  float lumi_masking;		// -1--1        
-  int32_t is_lumi_masking;		// -1--1
-  float dark_masking;		// -1--1        
-  int32_t is_dark_masking;		// -1--1
-  float qcompress;		// 0.0--1.0
-  float qblur;			// 0.0--1.0
-  uint32_t minBitrate;          // In kBits/s
-  uint32_t maxBitrate;          // In kBits/s
-  uint32_t user_matrix;		// 0 normal / 1 tmpgenc / 2 anime / 3 kvcd / 4 hr-tmpgenc
-  uint32_t gop_size;			// For mpeg1/2 , 12 is good
-  uint16_t *intra_matrix;
-  uint16_t *inter_matrix;
-  uint32_t interlaced;
-  uint32_t bff;			// WLA: bottom field first flag
-  uint32_t widescreen;          //0 4/3  1 16/9
-
-  // new stuff from jakub ui
-  uint32_t mb_eval;			// Replace hq 0..2
-  uint32_t vratetol;			// filesize tolerance in kb
-
-  uint32_t is_temporal_cplx_masking;	// temporal masking 0--1        
-  float temporal_cplx_masking;	// temporal masking 0--1
-
-  uint32_t is_spatial_cplx_masking;	// spatial masking 0--1
-  float spatial_cplx_masking;	// spatial masking 0--1
-  uint32_t _NORMALIZE_AQP;		// normalize adap quantiz
-
-  //
-  uint32_t use_xvid_ratecontrol;
-  uint32_t bufferSize;		// in KBYTES !!!!
-  uint32_t override_ratecontrol;
-  uint32_t dummy;
-
-} FFcodecSetting;
-
-
-
-#endif

Deleted: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_codecs/ADM_mjpegEncode.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_codecs/ADM_mjpegEncode.cpp	2009-06-14 20:05:05 UTC (rev 4917)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_codecs/ADM_mjpegEncode.cpp	2009-06-14 20:05:07 UTC (rev 4918)
@@ -1,130 +0,0 @@
-#if 0
-/***************************************************************************
-                          ADM_mjpegEncode.cpp  -  description
-                             -------------------
-    begin                : Tue Jul 23 2002
-    copyright            : (C) 2002 by mean
-    email                : fixounet at free.fr
- ***************************************************************************/
-
-/***************************************************************************
- *                                                                         *
- *   This program is free software; you can redistribute it and/or modify  *
- *   it under the terms of the GNU General Public License as published by  *
- *   the Free Software Foundation; either version 2 of the License, or     *
- *   (at your option) any later version.                                   *
- *                                                                         *
- ***************************************************************************/
-
-
-#include <stdio.h>
-#include <stdlib.h>
-#include "ADM_assert.h"
-#include <string.h>
-#include <math.h>
-#include "avi_vars.h"
-#include "prototype.h"
-#include "config.h"
-
-#ifdef USE_MJPEG
-#include "ADM_codecs/ADM_codec.h"
-#include "ADM_colorspace/colorspace.h"
-
-
-extern "C"
-{
-#include "mjpegtools/jpegutils.h"
-}
-
-//#include "ADM_codecs/ADM_divxEncode.h"
-#include "ADM_codecs/ADM_mjpegEncode.h"
-
-//
-//      The given parameter is the compression ratio of jpeg
-//
-uint8_t
-mjpegEncoder::init (uint32_t val, uint32_t fps1000)
-{
-  UNUSED_ARG (fps1000);
-  _qual = val;
-  return 1;
-}
-uint8_t mjpegEncoder::init (uint32_t val, uint32_t fps1000, uint8_t s)
-{
-  UNUSED_ARG (fps1000);
-  _qual = val;
-  _swap = s;
-  return 1;
-}
-
-uint8_t mjpegEncoder::stopEncoder (void)
-{
-
-  return 1;
-}
- /*
-  * jpeg_data:       buffer with input / output jpeg
-  * len:             Length of jpeg buffer
-  * itype:           LAV_INTER_NONE: Not interlaced
-  *                  LAV_INTER_TOP_FIRST: Interlaced, top-field-first
-  *                  LAV_INTER_BOTTOM_FIRST: Interlaced, bottom-field-first
-  * ctype            Chroma format for decompression.
-  *                  Currently always 420 and hence ignored.
-  * raw0             buffer with input / output raw Y channel
-  * raw1             buffer with input / output raw U/Cb channel
-  * raw2             buffer with input / output raw V/Cr channel
-  * width            width of Y channel (width of U/V is width/2)
-  * height           height of Y channel (height of U/V is height/2)
-
-
-  int decode_jpeg_raw (unsigned char *jpeg_data, int len,
-  int itype, int ctype, int width, int height,
-  unsigned char *raw0, unsigned char *raw1,
-  unsigned char *raw2);
-
-  */
-
-uint8_t
-  mjpegEncoder::encode (uint8_t * in,
-			uint8_t * out, uint32_t * len, uint32_t * flags)
-{
-  uint8_t *y, *u, *v;
-  uint32_t delta;
-  int l;
-
-  //
-  delta = _w * _h;
-  // separate planes
-  y = (uint8_t *) in;
-
-  if (!_swap)
-    {
-      u = y + delta;
-      v = u + (delta >> 2);
-    }
-  else
-    {
-      v = y + delta;
-      u = v + (delta >> 2);
-    }
-
-  l = encode_jpeg_raw ((unsigned char *) out, delta,	// insize /2 , should be enough as buffering
-		       _qual,	// int quality, ??
-		       0, 0,	// ctype /i type
-		       _w, _h, y, u, v);
-  //      printf("\n size: %d",l);
-  *len = l;
-  *flags = AVI_KEY_FRAME;
-
-  return 1;
-}
-
-uint8_t mjpegEncoder::getResult (void *ress)
-{				// for dual pass only
-  ADM_assert (0);
-  UNUSED_ARG (ress);
-
-}
-
-#endif
-#endif

Deleted: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_codecs/ADM_mjpegEncode.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_codecs/ADM_mjpegEncode.h	2009-06-14 20:05:05 UTC (rev 4917)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_codecs/ADM_mjpegEncode.h	2009-06-14 20:05:07 UTC (rev 4918)
@@ -1,39 +0,0 @@
-/***************************************************************************
-                          ADM_mjpegEncode.h  -  description
-                             -------------------
-    begin                : Tue Jul 23 2002
-    copyright            : (C) 2002 by mean
-    email                : fixounet at free.fr
- ***************************************************************************/
-
-/***************************************************************************
- *                                                                         *
- *   This program is free software; you can redistribute it and/or modify  *
- *   it under the terms of the GNU General Public License as published by  *
- *   the Free Software Foundation; either version 2 of the License, or     *
- *   (at your option) any later version.                                   *
- *                                                                         *
- ***************************************************************************/
-#ifndef __MJPEG_ENC__
-#define   __MJPEG_ENC__
-
-class mjpegEncoder:public encoder
-{
-protected:uint8_t _qual;
-  uint8_t _swap;
-public:  mjpegEncoder (uint32_t width, uint32_t height):encoder (width,
-							    height)
-  {
-    _qual = 75;
-    _swap = 0;
-
-  };
-  uint8_t stopEncoder (void);
-  virtual uint8_t init (uint32_t val, uint32_t fps1000);
-  uint8_t init (uint32_t val, uint32_t fps1000, uint8_t sw);
-  virtual uint8_t encode (uint8_t * in,
-			  uint8_t * out, uint32_t * len, uint32_t * flags);
-
-};
-
-#endif

Deleted: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_codecs/ADM_xvid.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_codecs/ADM_xvid.cpp	2009-06-14 20:05:05 UTC (rev 4917)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_codecs/ADM_xvid.cpp	2009-06-14 20:05:07 UTC (rev 4918)
@@ -1,493 +0,0 @@
-/***************************************************************************
-                          ADM_xvid.cpp  -  description
-                             -------------------
-
-	Use dlopen to open xvid and use it as a separate encoder
- 	Decoding is still done by divx
-
-    begin                : Fri Jul 12 2002
-    copyright            : (C) 2002 by mean
-    email                : fixounet at free.fr
- ***************************************************************************/
-
-/***************************************************************************
- *                                                                         *
- *   This program is free software; you can redistribute it and/or modify  *
- *   it under the terms of the GNU General Public License as published by  *
- *   the Free Software Foundation; either version 2 of the License, or     *
- *   (at your option) any later version.                                   *
- *                                                                         *
- ***************************************************************************/
-#include "config.h"
-
-#include <stdio.h>
-#include <stdlib.h>
-
-#include <string.h>
-#include <math.h>
-
-#include "ADM_default.h"
-
-#include "ADM_codecs/ADM_codec.h"
-//#include "ADM_gui/GUI_xvidparam.h"
-
-#include "ADM_assert.h"
-
-//static myENC_RESULT xvid_res;
-
-
-#ifdef USE_XX_XVID
-#include "ADM_codecs/ADM_xvid.h"
-#include "xvid.h"
-
-void *dllHandle = NULL;
-
-// api v2.0
-/*
-typedef int(*XVID_PROTO) (void *handle, int opt,  void *param1, void *param2);
-
-XVID_PROTO xx_xvid_init=NULL;
-XVID_PROTO xx_xvid_encore=NULL;
-XVID_PROTO xx_xvid_decore=NULL;
-*/
-//
-static XVID_ENC_FRAME fr;
-static XVID_ENC_PARAM xparam;
-static XVID_ENC_STATS xstats;
-
-
-
-
-
-/*
-		Returns stat in Xvid Format 
-*/
-void *
-xvidEncoder::getXvidStat (void)
-{
-
-  return (void *) &xstats;
-
-}
-//____________________________________________
-//
-//  Initialize the compressor
-//
-uint8_t xvidEncoder::stopEncoder (void)
-{
-  int
-    ret;
-
-  ADM_assert (_init);
-
-  ret = xvid_encore (_handle, XVID_ENC_DESTROY, 0, 0);
-  _init = 0;
-  _handle = NULL;
-  if (ret == XVID_ERR_OK)
-    return 1;
-  return 0;
-}
-// Take from Xvid VFW code
-static int const
-  divx4_motion_presets[7] = {
-  0,
-  PMV_EARLYSTOP16,
-  PMV_EARLYSTOP16 | PMV_ADVANCEDDIAMOND16,
-  PMV_EARLYSTOP16 | PMV_HALFPELREFINE16,
-  PMV_EARLYSTOP16 | PMV_HALFPELREFINE16 | PMV_EARLYSTOP8 | PMV_HALFPELREFINE8,
-  PMV_EARLYSTOP16 | PMV_HALFPELREFINE16 | PMV_EARLYSTOP8 | PMV_HALFPELREFINE8,
-  PMV_EARLYSTOP16 | PMV_HALFPELREFINE16 | PMV_EXTSEARCH16 | PMV_EARLYSTOP8 |
-    PMV_HALFPELREFINE8
-};
-
-
-/* Divx4 quality to general encoder flag presets */
-static int const
-  divx4_general_presets[7] = {
-  0,
-  0,
-  0,
-  0 | XVID_HALFPEL,
-  0 | XVID_INTER4V | XVID_HALFPEL,
-  0 | XVID_INTER4V | XVID_HALFPEL,
-  0 | XVID_INTER4V | XVID_HALFPEL
-};
-
-
-
-void
-xvidEncoder::checkFlags (xvidEncParam * extend)
-{
-
-  if (!extend)
-    {
-      // default : HPel & H263Quant
-      encode_flags = 0;
-      encode_flags |= XVID_HALFPEL;
-      encode_flags |= XVID_H263QUANT;
-      motion_flags = divx4_motion_presets[4];
-      return;
-    }
-  //
-  encode_flags = 0;
-  encode_flags |= extend->quantizer;
-  encode_flags |= divx4_general_presets[extend->gui_option];
-  motion_flags = divx4_motion_presets[extend->gui_option];
-  if (extend->interlaced)
-    encode_flags |= XVID_INTERLACING;
-}
-
-void
-xvidEncoder::dumpConf (void)
-{
-
-#define CHK(x) if( encode_flags & XVID_##x) printf("\n"#x" is set");
-
-  CHK (CUSTOM_QMATRIX);
-  CHK (H263QUANT);
-  CHK (MPEGQUANT);
-  CHK (HALFPEL);
-  CHK (ADAPTIVEQUANT);
-  CHK (LUMIMASKING);
-//CHK(LATEINTRA                   );
-
-  CHK (INTERLACING);
-  CHK (TOPFIELDFIRST);
-  CHK (ALTERNATESCAN);
-  CHK (HINTEDME_GET);
-  CHK (HINTEDME_SET);
-  CHK (INTER4V);
-  CHK (ME_ZERO);
-  CHK (ME_LOGARITHMIC);
-  CHK (ME_FULLSEARCH);
-  CHK (ME_PMVFAST);
-  CHK (ME_EPZS);
-
-#undef CHK
-#define CHK(x) if( motion_flags & PMV_##x) printf("\n"#x" is set");
-  CHK (EARLYSTOP16);
-  CHK (ADVANCEDDIAMOND16);
-  CHK (HALFPELREFINE16);
-  CHK (EARLYSTOP8);
-  CHK (HALFPELREFINE8);
-  CHK (EXTSEARCH16);
-
-  printf ("Max key interval : %d\n", xparam.max_key_interval);
-}
-
-// *************************************************
-// *************************************************
-//                                                                      CBR
-// *************************************************
-// *************************************************
-uint8_t xvidEncoderCBR::init (uint32_t br, uint32_t fps1000)
-{
-  UNUSED_ARG (fps1000);
-  return initExtented (br, NULL);
-}
-uint8_t xvidEncoderCBR::init (uint32_t br, uint32_t fps1000, uint32_t extra)
-{
-  UNUSED_ARG (fps1000);
-  UNUSED_ARG (extra);
-  return initExtented (br, NULL);
-}
-
-uint8_t xvidEncoderCBR::initExtented (uint32_t br, xvidEncParam * extend)
-{
-  XVID_INIT_PARAM
-    xinit;
-  int
-    xerr;
-  encode_flags = 0;
-  checkFlags (extend);
-
-
-  memset (&xinit, 0, sizeof (xinit));
-  memset (&fr, 0, sizeof (fr));
-  //---
-  _br = br;
-  printf (" Xvid : Compressing %lu x %lu video in CBR %lu\n", _w, _h, _br);
-  ADM_assert (0 == _init);
-
-  xinit.cpu_flags = XVID_CPU_MMX;
-  xvid_init (NULL, 0, &xinit, NULL);
-
-  xparam.width = _w;
-  xparam.height = _h;
-  xparam.fincr = 1;
-  xparam.fbase = 25;
-
-  xparam.rc_bitrate = _br;
-  xparam.rc_reaction_delay_factor = 16;
-  xparam.rc_averaging_period = 100;
-  xparam.rc_buffer = 100;
-
-  xparam.min_quantizer = 2;
-  xparam.max_quantizer = 31;
-  xparam.max_key_interval = extend->max_key_interval;
-  xerr = xvid_encore (NULL, XVID_ENC_CREATE, &xparam, NULL);
-  if (XVID_ERR_OK != xerr)
-    {
-      printf ("\n Error initializing xvid !!!");
-      return 0;
-    }
-
-  _handle = xparam.handle;
-  dumpConf ();
-  return 1;
-}
-
-
-//
-//      Encode a single frame
-//
-uint8_t
-  xvidEncoderCBR::encode (ADMImage * in,
-			  uint8_t * out, uint32_t * len, uint32_t * flags)
-{
-
-  XVID_ENC_FRAME xframe;
-
-  int xerr;
-
-  // general features
-
-  xframe.general = encode_flags;
-  xframe.motion = motion_flags;
-
-  xframe.bitstream = out;
-  xframe.length = -1;		// this is written by the routine
-
-  xframe.image = in->data;
-  xframe.colorspace = XVID_CSP_YV12;	// defined in <xvid.h>
-
-  xframe.intra = -1;		// let the codec decide between I-frame (1) and P-frame (0)
-  xframe.quant = 0;
-//        xframe.quant = QUANTI;        // is quant != 0, use a fixed quant (and ignore bitrate)
-
-
-  xerr = xvid_encore (_handle, XVID_ENC_ENCODE, &xframe, &xstats);
-
-/*	        enc_result->is_key_frame = xframe.intra;
-	        enc_result->quantizer = xframe.quant;
-	        enc_result->total_bits = xframe.length * 8;
-	        enc_result->motion_bits = xstats.hlength * 8;
-	        enc_result->texture_bits = enc_result->total_bits - enc_result->motion_bits;
-*/
-
-  xvid_res.is_key_frame = xframe.intra;
-  xvid_res.out_quantizer = xstats.quant;
-  xvid_res.quantizer = xframe.quant;
-  xvid_res.total_bits = xframe.length * 8;
-  xvid_res.motion_bits = xstats.hlength * 8;
-  xvid_res.texture_bits = xvid_res.total_bits - xvid_res.motion_bits;
-/*  This is statictical data, e.g. for 2-pass.
-    If you are not interested in any of this, you can use NULL instead of &xstats
-*/
-
-  *len = xframe.length;
-
-  *flags = 0;
-  if (xerr != XVID_ERR_OK)
-    return 0;
-  if (xframe.intra)
-    {
-      *flags = AVI_KEY_FRAME;
-    }
-
-  return 1;
-}
-
-// *************************************************
-// *************************************************
-//                                                                      CQ
-// *************************************************
-// *************************************************
-
-uint8_t xvidEncoderCQ::init (uint32_t q, uint32_t fps1000)
-{
-  UNUSED_ARG (fps1000);
-  return initExtented (q, NULL);
-}
-uint8_t xvidEncoderCQ::init (uint32_t q, uint32_t fps1000, uint32_t extra)
-{
-  UNUSED_ARG (fps1000);
-  UNUSED_ARG (extra);
-  return initExtented (q, NULL);
-}
-
-uint8_t xvidEncoderCQ::initExtented (uint32_t q, xvidEncParam * extend)
-{
-  XVID_INIT_PARAM
-    xinit;
-  int
-    xerr;
-
-  checkFlags (extend);
-  memset (&xinit, 0, sizeof (xinit));
-  memset (&fr, 0, sizeof (fr));
-  //xinit.cpu_flags=XVID_CPU_FORCE;
-  xinit.cpu_flags = XVID_CPU_MMX;
-  //---
-  _q = q;
-  printf (" Xvid : Compressing %lu x %lu video in CQ %lu\n", _w, _h, _q);
-  ADM_assert (0 == _init);
-
-
-  xvid_init (NULL, 0, &xinit, NULL);
-
-  xparam.width = _w;
-  xparam.height = _h;
-  xparam.fincr = 1;
-  xparam.fbase = 25;
-
-  xparam.rc_bitrate = 1000;
-  xparam.rc_reaction_delay_factor = 16;
-  xparam.rc_averaging_period = 100;
-  xparam.rc_buffer = 100;
-
-
-  xparam.min_quantizer = _q;
-  xparam.max_quantizer = _q;
-  xparam.max_key_interval = extend->max_key_interval;
-
-  xerr = xvid_encore (NULL, XVID_ENC_CREATE, &xparam, NULL);
-  if (XVID_ERR_OK != xerr)
-    {
-      printf ("\n Error initializing xvid !!!");
-      return 0;
-    }
-  _handle = xparam.handle;
-  dumpConf ();
-  return 1;
-}
-
-//
-
-uint8_t
-  xvidEncoderCQ::encode (ADMImage * in,
-			 uint8_t * out, uint32_t * len, uint32_t * flags)
-{
-
-  XVID_ENC_FRAME xframe;
-
-  int xerr;
-
-  memset (&xframe, 0, sizeof (xframe));
-
-  xframe.general = encode_flags;
-  xframe.motion = motion_flags;
-
-  xframe.bitstream = out;
-  xframe.length = -1;		// this is written by the routine
-
-  xframe.image = in->data;
-  xframe.colorspace = XVID_CSP_YV12;	// defined in <xvid.h>
-
-  xframe.intra = -1;		// let the codec decide between I-frame (1) and P-frame (0)
-  xframe.quant = _q;
-//        xframe.quant = QUANTI;        // is quant != 0, use a fixed quant (and ignore bitrate)
-
-
-  xerr = xvid_encore (_handle, XVID_ENC_ENCODE, &xframe, &xstats);
-
-/*	        enc_result->is_key_frame = xframe.intra;
-	        enc_result->quantizer = xframe.quant;
-	        enc_result->total_bits = xframe.length * 8;
-	        enc_result->motion_bits = xstats.hlength * 8;
-	        enc_result->texture_bits = enc_result->total_bits - enc_result->motion_bits;
-*/
-  xvid_res.is_key_frame = xframe.intra;
-  xvid_res.quantizer = xframe.quant;
-  xvid_res.total_bits = xframe.length * 8;
-  xvid_res.motion_bits = xstats.hlength * 8;
-  xvid_res.texture_bits = xvid_res.total_bits - xvid_res.motion_bits;
-  xvid_res.out_quantizer = xstats.quant;
-/*  This is statictical data, e.g. for 2-pass.
-    If you are not interested in any of this, you can use NULL instead of &xstats
-*/
-
-  *len = xframe.length;
-
-  *flags = 0;
-  if (xerr != XVID_ERR_OK)
-    return 0;
-  if (xframe.intra)
-    {
-      *flags = AVI_KEY_FRAME;
-    }
-
-  return 1;
-
-}
-// *************************************************
-// *************************************************
-//                                                                      CQ
-// *************************************************
-// *************************************************
-
-uint8_t
-  xvidEncoderVBR::encode (ADMImage * in,
-			  uint8_t * out, uint32_t * len, uint32_t * flags)
-{
-  uint16_t q;
-  uint8_t kf;
-
-  q = (*flags) >> 8;
-  kf = (*flags) & 1;
-  return encodeVBR (in, out, len, flags, q, kf);
-
-
-}
-uint8_t
-  xvidEncoderVBR::encodeVBR (ADMImage * in,
-			     uint8_t * out,
-			     uint32_t * len,
-			     uint32_t * flags, uint16_t nq, uint8_t forcekey)
-{
-
-  XVID_ENC_FRAME xframe;
-
-  int xerr;
-
-  memset (&xframe, 0, sizeof (xframe));
-
-  xframe.general = encode_flags;
-  xframe.motion = motion_flags;
-
-  xframe.bitstream = out;
-  xframe.length = -1;		// this is written by the routine
-
-  xframe.image = in->data;
-  xframe.colorspace = XVID_CSP_YV12;	// defined in <xvid.h>
-
-  if (forcekey)
-    xframe.intra = 1;		// let the codec decide between I-frame (1) and P-frame (0)
-  else
-    xframe.intra = 0;		// let the codec decide between I-frame (1) and P-frame (0)
-
-  xframe.quant = nq;
-  xerr = xvid_encore (_handle, XVID_ENC_ENCODE, &xframe, &xstats);
-
-  xvid_res.is_key_frame = xframe.intra;
-  xvid_res.quantizer = xframe.quant;
-  xvid_res.out_quantizer = xstats.quant;
-  xvid_res.total_bits = xframe.length * 8;
-  xvid_res.motion_bits = xstats.hlength * 8;
-  xvid_res.texture_bits = xvid_res.total_bits - xvid_res.motion_bits;
-
-  *len = xframe.length;
-
-  *flags = 0;
-  if (xerr != XVID_ERR_OK)
-    return 0;
-  if (xframe.intra)
-    {
-      *flags = AVI_KEY_FRAME;
-    }
-
-  return 1;
-
-}
-
-#endif

Deleted: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_codecs/ADM_xvid.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_codecs/ADM_xvid.h	2009-06-14 20:05:05 UTC (rev 4917)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_codecs/ADM_xvid.h	2009-06-14 20:05:07 UTC (rev 4918)
@@ -1,102 +0,0 @@
-/***************************************************************************
-                          ADM_xvid.h.h  -  description
-                             -------------------
-    begin                : Fri Jul 12 2002
-    copyright            : (C) 2002 by mean
-    email                : fixounet at free.fr
- ***************************************************************************/
-
-/***************************************************************************
- *                                                                         *
- *   This program is free software; you can redistribute it and/or modify  *
- *   it under the terms of the GNU General Public License as published by  *
- *   the Free Software Foundation; either version 2 of the License, or     *
- *   (at your option) any later version.                                   *
- *                                                                         *
- ***************************************************************************/
-
-#ifdef USE_XX_XVID
-
-
-
-#include "ADM_gui/GUI_xvidparam.h"
-
-class xvidEncoder
-{
-protected:uint32_t _w, _h;
-  uint8_t _init;
-  void *_handle;
-  uint32_t encode_flags;
-  uint32_t motion_flags;
-
-  void dumpConf (void);
-  void checkFlags (xvidEncParam * extend = NULL);
-
-public:void *getXvidStat (void);
-    xvidEncoder (uint32_t width, uint32_t height)
-    // : divxEncoder(width,height)
-  {
-    _w = width;
-    _h = height;
-    _init = 0;
-  };
-  uint8_t stopEncoder (void);
-  virtual uint8_t init (uint32_t val, uint32_t fps1000) = 0;
-  virtual uint8_t init (uint32_t val, uint32_t fps1000, uint32_t extra) = 0;
-  virtual uint8_t initExtented (uint32_t val, xvidEncParam * extend = NULL) =
-    0;
-  virtual uint8_t encode (ADMImage * in,
-			  uint8_t * out,
-			  uint32_t * len, uint32_t * flags) = 0;
-
-
-};
-class xvidEncoderCBR:public xvidEncoder
-{
-protected:uint32_t _br;
-public:xvidEncoderCBR (uint32_t width, uint32_t height):xvidEncoder (width,
-								height)
-  {
-  };
-  virtual uint8_t initExtented (uint32_t val, xvidEncParam * extend = NULL);
-  virtual uint8_t init (uint32_t val, uint32_t fps1000);
-  virtual uint8_t init (uint32_t val, uint32_t fps1000, uint32_t extra);
-  virtual uint8_t encode (ADMImage * in,
-			  uint8_t * out, uint32_t * len, uint32_t * flags);
-};
-class xvidEncoderCQ:public xvidEncoder
-{
-protected:uint32_t _q;
-
-
-public:xvidEncoderCQ (uint32_t width, uint32_t height):xvidEncoder (width,
-							       height)
-  {
-
-  };
-  virtual uint8_t initExtented (uint32_t val, xvidEncParam * extend = NULL);
-  virtual uint8_t init (uint32_t val, uint32_t fps1000);
-  virtual uint8_t init (uint32_t val, uint32_t fps1000, uint32_t extra);
-  virtual uint8_t encode (ADMImage * in,
-			  uint8_t * out, uint32_t * len, uint32_t * flags);
-};
-class xvidEncoderVBR:public xvidEncoderCQ
-{
-protected: public:xvidEncoderVBR (uint32_t width,
-		  uint32_t height):xvidEncoderCQ (width,
-						  height)
-  {
-
-  };
-
-  virtual uint8_t encode (ADMImage * in,
-			  uint8_t * out, uint32_t * len, uint32_t * flags);
-  uint8_t encodeVBR (ADMImage * in,
-		     uint8_t * out,
-		     uint32_t * len,
-		     uint32_t * flags, uint16_t nq, uint8_t forcekey);
-
-};
-
-
-#endif

Deleted: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_codecs/ADM_xvid4.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_codecs/ADM_xvid4.cpp	2009-06-14 20:05:05 UTC (rev 4917)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_codecs/ADM_xvid4.cpp	2009-06-14 20:05:07 UTC (rev 4918)
@@ -1,762 +0,0 @@
-/***************************************************************************
-                          ADM_xvid4.cpp  -  description
-                             -------------------
-
-	Xvid4 api
-
-    begin                : Fri Jul 12 2002
-    copyright            : (C) 2002 by mean
-    email                : fixounet at free.fr
- ***************************************************************************/
-
-/***************************************************************************
- *                                                                         *
- *   This program is free software; you can redistribute it and/or modify  *
- *   it under the terms of the GNU General Public License as published by  *
- *   the Free Software Foundation; either version 2 of the License, or     *
- *   (at your option) any later version.                                   *
- *                                                                         *
- ***************************************************************************/
-#include "config.h"
-
-#include <stdio.h>
-#include <stdlib.h>
-#include <string.h>
-#include <math.h>
-
-#include "ADM_default.h"
-#include "ADM_codecs/ADM_codec.h"
-#ifdef USE_XVID_4
-
-#include "ADM_codecs/ADM_xvid4param.h"
-#include "ADM_codecs/ADM_xvid4.h"
-#include "xvid.h"
-#include "ADM_assert.h"
-#include "prefs.h"
-
-#include "ADM_editor/ADM_edit.hxx"
-extern ADM_Composer *video_body;
-
-static const int motion_presets[] = {
-  0,
-  0,
-  0,
-  0,
-  XVID_ME_HALFPELREFINE16,
-  XVID_ME_HALFPELREFINE16 | XVID_ME_ADVANCEDDIAMOND16,
-  XVID_ME_HALFPELREFINE16 | XVID_ME_EXTSEARCH16 |
-    XVID_ME_HALFPELREFINE8 | XVID_ME_USESQUARES16
-};
-
-#define ME_ELEMENTS (sizeof(motion_presets)/sizeof(motion_presets[0]))
-
-
-#define VOP_ELEMENTS (sizeof(vop_presets)/sizeof(vop_presets[0]))
-
-
-static xvid_gbl_init_t xvid_gbl_init2;
-static xvid_enc_create_t xvid_enc_create;
-static xvid_plugin_single_t single;
-static xvid_plugin_2pass1_t pass1;
-static xvid_plugin_2pass2_t pass2;
-static xvid_enc_plugin_t plugins[7];
-static xvid_enc_frame_t xvid_enc_frame;
-static xvid_enc_stats_t xvid_enc_stats;
-static xvid_gbl_info_t xvid_gbl_info;
-static uint32_t xvid_framenum;
-#define MMSET(x) memset(&x,0,sizeof(x))
-
-/******/
-static int
-adm_hook (void *handle, int opt, void *param1, void *param2)
-{
-  xvid_plg_data_t *data = (xvid_plg_data_t *) param1;
-  // printf("Pass %d value %d\n",opt,data->frame_num);
-  if (opt == XVID_PLG_FRAME)
-    {
-
-      xvid_framenum = data->frame_num;
-      //printf("Before called with %u\n",xvid_framenum);
-    }
-
-
-  return 0;
-}
-uint8_t xvid4Encoder::encode(ADMImage * in,ADMBitstream * out)
-{
-    int  ret=0;
-    /* Encode the frame */
-    xvid_enc_frame.bitstream = out->data;
-    preAmble (in->data);
-    ret = xvid_encore (_handle, XVID_ENC_ENCODE, &xvid_enc_frame,
-                       &xvid_enc_stats);
-    if (ret < 0)
-    {
-        printf ("[xvid] Error calling xvid4 %d\n", ret);
-        return 0;
-
-    }
-    postAmble (out);
-
-    out->len = ret;
-    if (!ret)
-        printf ("[xvid] Skipped\n");
-    return 1;
-
-}
-
-
-void xvid4_init (void);
-/*
-	System wide init, do it once for all
-*/
-void
-xvid4_init (void)
-{
-  MMSET (xvid_gbl_init2);
-  MMSET (xvid_gbl_info);
-
-  printf ("[xvid] Initializing global Xvid 4\n");
-  xvid_gbl_init2.version = XVID_VERSION;
-  xvid_global (NULL, XVID_GBL_INIT, &xvid_gbl_init2, NULL);
-  xvid_gbl_info.version = XVID_VERSION;
-  xvid_global (NULL, XVID_GBL_INFO, &xvid_gbl_info, NULL);
-
-  if (xvid_gbl_info.build)
-      printf ("[xvid] Build: %s\n", xvid_gbl_info.build);
-
-  printf ("[xvid] SIMD supported: (%x)\n", xvid_gbl_info.cpu_flags);
-#define CPUF(x) if(xvid_gbl_info.cpu_flags  & XVID_CPU_##x) printf("\t\t"#x"\n");
-#ifdef ADM_CPU_X86
-  CPUF (MMX);
-  CPUF (MMXEXT);
-  CPUF (SSE);
-  CPUF (SSE2);
-  CPUF (3DNOW);
-  CPUF (3DNOWEXT);
-#endif
-#ifdef ADM_CPU_ALTIVEC
-  CPUF (ALTIVEC);
-#endif
-
-}
-xvid4Encoder::~xvid4Encoder ()
-{
-  stopEncoder ();
-}
-//--------------------------------------------------
-
-uint8_t
-  xvid4Encoder::init (uint32_t q, uint32_t fps1000, xvid4EncParam * param)
-{
-  return 0;
-}
-
-
-void
-xvid4Encoder::createUpdate (void)
-{
-  uint32_t threads = 0;
-
-  prefs->get(FEATURE_THREADING_XVID, &threads);
-
-  if (threads == 0)
-	  xvid_enc_create.num_threads = xvid_gbl_info.num_threads;
-  else if (threads > 1)
-	  xvid_enc_create.num_threads = threads;
-  else
-      xvid_enc_create.num_threads = 0;
-
-  if (xvid_enc_create.num_threads)
-      printf ("[xvid] using %u threads\n", xvid_enc_create.num_threads);
-
-  xvid_enc_create.max_bframes = _param.bframes;
-  xvid_enc_create.max_key_interval = _param.max_key_interval;
-  xvid_enc_create.bquant_ratio = _param.bquant_ratio;
-  xvid_enc_create.bquant_offset = _param.bquant_offset;
-
-  if (_param.packed)
-    xvid_enc_create.global |=XVID_GLOBAL_PACKED;
-
-  if (_param.closed_gop)
-    xvid_enc_create.global |=XVID_GLOBAL_CLOSED_GOP;
-
-  for (uint32_t i = 0; i < 3; i++)
-    {
-      xvid_enc_create.min_quant[i] = _param.qmin[i];
-      xvid_enc_create.max_quant[i] = _param.qmax[i];
-    }
-
-  preAmble (NULL);
-#define C_VOP(x) if(xvid_enc_frame.vop_flags& XVID_VOP_##x) printf("[xvid] Vop: "#x" is set\n");
-#define C_VOL(x) if(xvid_enc_frame.vol_flags& XVID_VOL_##x) printf("[xvid] Vol: "#x" is set\n");
-#define C_ME(x) if(xvid_enc_frame.motion& XVID_ME_##x) printf("[xvid] ME: "#x" is set\n");
-
-  C_VOP (DEBUG);
-  C_VOP (CHROMAOPT);
-  C_VOP (HALFPEL);
-  C_VOP (INTER4V);
-  C_VOP (TRELLISQUANT);
-  C_VOP (CHROMAOPT);
-  C_VOP (CARTOON);
-  C_VOP (GREYSCALE);
-  C_VOP (HQACPRED);
-  C_VOP (MODEDECISION_RD);
-
-  C_VOL (MPEGQUANT);
-  C_VOL (EXTRASTATS);
-  C_VOL (GMC);
-  C_VOL (QUARTERPEL);
-  C_VOL (INTERLACING);
-
-  C_ME (ADVANCEDDIAMOND16);
-  C_ME (ADVANCEDDIAMOND8);
-
-  C_ME (USESQUARES16);
-  C_ME (USESQUARES8);
-
-  C_ME (HALFPELREFINE16);
-  C_ME (HALFPELREFINE8);
-
-  // Turbo Mode
-  C_ME (FASTREFINE16);
-  C_ME (FASTREFINE8);
-  C_ME (SKIP_DELTASEARCH);
-  C_ME (FAST_MODEINTERPOLATE);
-  C_ME (BFRAME_EARLYSTOP);
-
-  C_ME (GME_REFINE);
-  C_ME (QUARTERPELREFINE8);
-  C_ME (QUARTERPELREFINE16);
-  C_ME (EXTSEARCH16);
-  C_ME (EXTSEARCH8);
-  C_ME (CHROMA_BVOP);
-  C_ME (CHROMA_PVOP);
-  MMSET (xvid_enc_frame);
-
-
-}
-
-void
-xvid4Encoder::dump (void)
-{
-  printf ("[xvid] Configuration:\n");
-  if (_param.mpegQuantizer)
-    printf ("\t\tMPEGQUANT\n");
-  if (_param.interlaced)
-    printf ("\t\tINTERLACED\n");
-
-
-#define ST(x,y) \
-	if(_param.x) printf("\t\t"#y"\n");
-
-
-  ST (inter4mv, INTER4V);
-  ST (trellis, TRELLISQUANT);
-  ST (cartoon, CARTOON);
-  ST (greyscale, GREYSCALE);
-#undef ST
-
-}
-//____________________________________________
-//
-//  Initialize the compressor
-//
-uint8_t
-xvid4Encoder::stopEncoder (void)
-{
-  if (_handle)
-    {
-      xvid_encore (_handle, XVID_ENC_DESTROY, NULL, NULL);
-      printf ("[xvid] Destroying\n");
-      _handle = NULL;
-    }
-  return 1;
-}
-uint8_t
-xvid4Encoder::preAmble (uint8_t * in)
-{
-/* Version for the frame and the stats */
-  //MMSET (xvid_enc_frame);
-  MMSET (xvid_enc_stats);
-
-  xvid_enc_frame.version = XVID_VERSION;
-  xvid_enc_stats.version = XVID_VERSION;
-
-  /* Bind output buffer */
-
-  xvid_enc_frame.length = 0;
-  if (_param.mpegQuantizer || _param.useCustomIntra || _param.useCustomInter)
-    xvid_enc_frame.vol_flags |= XVID_VOL_MPEGQUANT;
-  if (_param.interlaced)
-    xvid_enc_frame.vol_flags |= XVID_VOL_INTERLACING;
-
-
-#define SVOP(x,y) if(_param.x) xvid_enc_frame.vop_flags|=XVID_VOP_##y
-
-
-  xvid_enc_frame.motion = motion_presets[_param.guiLevel];
-
-  SVOP (inter4mv, INTER4V);
-  SVOP (trellis, TRELLISQUANT);
-  SVOP (hqac, HQACPRED);
-#if  XVID_API==XVID_MAKE_API(4, 1)
-  SVOP (bvhq, RD_BVOP);
-#endif
-
-  SVOP (greyscale, GREYSCALE);
-  SVOP (cartoon, CARTOON);
-  SVOP (chroma_opt, CHROMAOPT);
-  //SVOP(  1      ,HALFPEL);
-  xvid_enc_frame.vop_flags |= XVID_VOP_HALFPEL;
-  // ME
-  if (_param.chroma_me)
-    {
-      xvid_enc_frame.motion |= XVID_ME_CHROMA_BVOP;
-      xvid_enc_frame.motion |= XVID_ME_CHROMA_PVOP;
-    }
-  if (_param.cartoon)
-    {
-      xvid_enc_frame.motion |= XVID_ME_DETECT_STATIC_MOTION;
-    }
-  //printf("Vhq mode : %d\n",_param.vhqmode);
-#define VHME(x) xvid_enc_frame.motion|=	XVID_ME_##x
-  switch (_param.vhqmode)
-    {
-    case 4:
-      VHME (EXTSEARCH_RD);
-    case 3:
-      VHME (HALFPELREFINE8_RD);
-      VHME (QUARTERPELREFINE8_RD);
-      VHME (CHECKPREDICTION_RD);
-
-    case 2:
-      VHME (HALFPELREFINE16_RD);
-      VHME (QUARTERPELREFINE16_RD);
-    case 1:
-      SVOP (vhqmode, MODEDECISION_RD);
-    case 0:
-      break;
-    default:
-      ADM_assert (0);
-    }
-  if (_param.qpel)
-    {
-      xvid_enc_frame.vol_flags |= XVID_VOL_QUARTERPEL;
-
-      xvid_enc_frame.motion |= XVID_ME_QUARTERPELREFINE16;
-      xvid_enc_frame.motion |= XVID_ME_QUARTERPELREFINE8;
-    }
-
-  if (_param.gmc)
-    {
-      xvid_enc_frame.vol_flags |= XVID_VOL_GMC;
-      xvid_enc_frame.motion |= XVID_ME_GME_REFINE;
-    }
-
-  if (_param.turbo)
-    {
-      xvid_enc_frame.motion |= XVID_ME_FASTREFINE16;
-      xvid_enc_frame.motion |= XVID_ME_FASTREFINE8;
-      xvid_enc_frame.motion |= XVID_ME_SKIP_DELTASEARCH;
-      xvid_enc_frame.motion |= XVID_ME_FAST_MODEINTERPOLATE;
-      xvid_enc_frame.motion |= XVID_ME_BFRAME_EARLYSTOP;
-    }
-
-  xvid_enc_frame.bframe_threshold = _param.bframe_threshold;
-
-  xvid_enc_frame.input.csp = XVID_CSP_YV12;
-  xvid_enc_frame.input.stride[0] = _w;
-  xvid_enc_frame.input.stride[1] = _w >> 1;
-  xvid_enc_frame.input.stride[2] = _w >> 1;
-  xvid_enc_frame.type = XVID_TYPE_AUTO;
-
-
-  /* Set up motion estimation flags */
-  xvid_enc_frame.input.plane[0] = in;
-  xvid_enc_frame.input.plane[1] = in + (_w * _h);
-  xvid_enc_frame.input.plane[2] = in + ((_w * _h * 5) >> 2);
-
-  xvid_enc_frame.par_width = _param.par_width;
-  xvid_enc_frame.par_height = _param.par_height;
-  //printf("Using AR : %u x %u\n",xvid_enc_frame.par_width,xvid_enc_frame.par_height );
-  if (xvid_enc_frame.par_width != xvid_enc_frame.par_height)
-      xvid_enc_frame.par = XVID_PAR_EXT;
-  else
-      xvid_enc_frame.par = XVID_PAR_11_VGA;
-
-  /* Custome matrices */
-  if(_param.useCustomIntra)
-  {
-  if(!xvid_enc_frame.quant_intra_matrix)
-      printf("[xvid] Using custom intra matrix\n");
-      xvid_enc_frame.quant_intra_matrix=_param.intraMatrix;
-  }
-  if(_param.useCustomInter)
-  {
-    if(!xvid_enc_frame.quant_inter_matrix)
-      printf("[xvid] Using custom inter matrix\n");
-     xvid_enc_frame.quant_inter_matrix=_param.interMatrix;
-  }
-  return 1;
-}
-
-uint8_t
-xvid4Encoder::postAmble (ADMBitstream * out)
-{
-  out->flags = 0;
-  if (xvid_enc_frame.out_flags & XVID_KEYFRAME)
-    {
-      out->flags = AVI_KEY_FRAME;
-    }
-  else if (xvid_enc_stats.type == XVID_TYPE_BVOP)
-    {
-      out->flags = AVI_B_FRAME;
-
-    }
-  out->out_quantizer = xvid_enc_stats.quant;
-  out->ptsFrame= xvid_framenum;
-  return 1;
-}
-
-// *************************************************
-// *************************************************
-//                                                                      CQ
-// *************************************************
-// *************************************************
-uint8_t
-  xvid4EncoderCQ::init (uint32_t q, uint32_t fps1000, xvid4EncParam * param)
-{
-  int xerr;
-  printf ("[xvid] CQ mode = %lu (%d x %d)\n", q, _w, _h);
-  _q = q;
-  _fps1000 = fps1000;
-  memcpy (&_param, param, sizeof (_param));
-  dump ();
-  // Here we go...
-  MMSET (xvid_enc_create);
-  xvid_enc_create.version = XVID_VERSION;
-  xvid_enc_create.width = _w;
-  xvid_enc_create.height = _h;
-  MMSET (single);
-
-
-  plugins[0].func = xvid_plugin_single;
-  plugins[0].param = &single;
-
-  plugins[1].func = adm_hook;
-  plugins[1].param = NULL;
-
-
-  single.version = XVID_VERSION;
-  single.bitrate = 1500;
-
-  xvid_enc_create.plugins = plugins;
-  xvid_enc_create.num_plugins = 2;
-
-  //Framerate
-  xvid_enc_create.fincr = 1000;
-  xvid_enc_create.fbase = _fps1000;
-  //
-  createUpdate ();
-  xerr = xvid_encore (NULL, XVID_ENC_CREATE, &xvid_enc_create, NULL);
-  if (xerr < 0)
-    {
-      printf ("[xvid] init error: %d\n", xerr);
-      return 0;
-
-    }
-
-  _handle = xvid_enc_create.handle;
-
-  printf ("[xvid] CQ init Ok\n");
-
-  return 1;
-}
-
-
-uint8_t
-xvid4EncoderCQ::encode (ADMImage * in, ADMBitstream * out)
-{
-  int ret;
-
-  xvid_enc_frame.quant = _q;
-  return xvid4Encoder::encode(in,out);
-
-}
-// *************************************************
-// *************************************************
-//              CQ but Q is controlled externally
-// *************************************************
-// *************************************************
-
-uint8_t
-  xvid4EncoderVBRExternal::init (uint32_t q, uint32_t fps1000,
-				 xvid4EncParam * param)
-{
-  int xerr;
-  printf ("[xvid] CQ mode = %lu (%d x %d)\n", q, _w, _h);
-  _q = q;
-  _fps1000 = fps1000;
-  memcpy (&_param, param, sizeof (_param));
-  dump ();
-  // Here we go...
-  MMSET (xvid_enc_create);
-  xvid_enc_create.version = XVID_VERSION;
-  xvid_enc_create.width = _w;
-  xvid_enc_create.height = _h;
-  MMSET (single);
-
-
-  plugins[0].func = xvid_plugin_single;
-  plugins[0].param = &single;
-
-  plugins[1].func = adm_hook;
-  plugins[1].param = NULL;
-
-  single.version = XVID_VERSION;
-  single.bitrate = 1500;
-
-  xvid_enc_create.plugins = plugins;
-  xvid_enc_create.num_plugins = 2;
-
-  //Framerate
-  xvid_enc_create.fincr = 1000;
-  xvid_enc_create.fbase = _fps1000;
-  //
-  createUpdate ();
-  xerr = xvid_encore (NULL, XVID_ENC_CREATE, &xvid_enc_create, NULL);
-  if (xerr < 0)
-    {
-      printf ("[xvid] init error: %d\n", xerr);
-      return 0;
-
-    }
-
-  _handle = xvid_enc_create.handle;
-
-  printf ("[xvid] CQ init Ok\n");
-
-  return 1;
-}
-
-
-
-
-uint8_t
-  xvid4EncoderVBRExternal::encode (ADMImage * in,
-				      ADMBitstream * out)
-{
-  xvid_enc_frame.quant = out->in_quantizer;
-  if (out->flags & AVI_KEY_FRAME)
-    {
-      xvid_enc_frame.type = XVID_TYPE_IVOP;
-    }
-  else if (out->flags & AVI_B_FRAME)
-    {
-      xvid_enc_frame.type = XVID_TYPE_BVOP;
-    }
-  else
-    {				//P
-      xvid_enc_frame.type = XVID_TYPE_PVOP;
-    }
-    return xvid4Encoder::encode(in,out);
-}
-// *************************************************
-// *************************************************
-//              CBR
-// *************************************************
-// *************************************************
-uint8_t
-  xvid4EncoderCBR::init (uint32_t br, uint32_t fps1000, xvid4EncParam * param)
-{
-  int xerr;
-  printf ("[xvid] CBR mode = %lu kbps\n", br);
-  _bitrate = br;
-  _fps1000 = fps1000;
-  memcpy (&_param, param, sizeof (_param));
-  dump ();
-  // Here we go...
-  MMSET (single);
-  MMSET (xvid_enc_create);
-
-  xvid_enc_create.version = XVID_VERSION;
-  xvid_enc_create.width = _w;
-  xvid_enc_create.height = _h;
-
-
-  plugins[0].func = xvid_plugin_single;
-  plugins[0].param = &single;
-
-  plugins[1].func = adm_hook;
-  plugins[1].param = NULL;
-
-  single.version = XVID_VERSION;
-  single.bitrate = _bitrate * 1000;	// Kb->bit
-
-  xvid_enc_create.plugins = plugins;
-  xvid_enc_create.num_plugins = 2;
-
-  //Framerate
-  xvid_enc_create.fincr = 1000;
-  xvid_enc_create.fbase = _fps1000;
-  //
-  createUpdate ();
-  xerr = xvid_encore (NULL, XVID_ENC_CREATE, &xvid_enc_create, NULL);
-  if (xerr < 0)
-    {
-      printf ("[xvid] Init error: %d\n", xerr);
-      return 0;
-
-    }
-
-  _handle = xvid_enc_create.handle;
-
-  printf ("[xvid] CBR init Ok\n");
-
-  return 1;
-}
-
-
-uint8_t
-xvid4EncoderCBR::encode (ADMImage * in, ADMBitstream * out)
-{
-  xvid_enc_frame.quant = 0;
-  return xvid4Encoder::encode(in,out);
-}
-// *************************************************
-// *************************************************
-//              Pass1
-// *************************************************
-// *************************************************
-uint8_t
-  xvid4EncoderPass1::init (uint32_t br, uint32_t fps1000,
-			   xvid4EncParam * param)
-{
-  int xerr;
-  printf ("[xvid] Pass 1 of 2 (log: %s)\n",
-	  (char *) param->logName);
-
-  _fps1000 = fps1000;
-  memcpy (&_param, param, sizeof (_param));
-  dump ();
-  // Here we go...
-  MMSET (xvid_enc_create);
-  MMSET (pass1);
-
-  xvid_enc_create.version = XVID_VERSION;
-  xvid_enc_create.width = _w;
-  xvid_enc_create.height = _h;
-
-
-
-  plugins[0].func = xvid_plugin_2pass1;
-  plugins[0].param = &pass1;
-
-
-  pass1.version = XVID_VERSION;
-  pass1.filename = (char *) _param.logName;
-
-  xvid_enc_create.plugins = plugins;
-  xvid_enc_create.num_plugins = 1;
-
-
-  //Framerate
-  xvid_enc_create.fincr = 1000;
-  xvid_enc_create.fbase = _fps1000;
-  //
-  createUpdate ();
-  // Force Qz=2 !
-  xerr = xvid_encore (NULL, XVID_ENC_CREATE, &xvid_enc_create, NULL);
-  if (xerr < 0)
-    {
-      printf ("[xvid] Init error: %d\n", xerr);
-      return 0;
-
-    }
-
-  _handle = xvid_enc_create.handle;
-
-  printf ("[xvid] Pass 1 init Ok\n");
-
-  return 1;
-}
-
-
-
-// *************************************************
-// *************************************************
-//              Pass2
-// *************************************************
-// *************************************************
-uint8_t
-  xvid4EncoderPass2::init (uint32_t br, uint32_t fps1000,
-			   xvid4EncParam * param)
-{
-  int xerr;
-  printf
-    ("[xvid] Pass 2 of 2, average bitrate = %lu\n",
-     br);
-  _bitrate = br;
-  _fps1000 = fps1000;
-  memcpy (&_param, param, sizeof (_param));
-  dump ();
-  // Here we go...
-  MMSET (xvid_enc_create);
-  MMSET (pass2);
-
-  xvid_enc_create.version = XVID_VERSION;
-  xvid_enc_create.width = _w;
-  xvid_enc_create.height = _h;
-
-
-
-  plugins[0].func = xvid_plugin_2pass2;
-  plugins[0].param = &pass2;
-  plugins[1].func = adm_hook;
-  plugins[1].param = NULL;
-
-  pass2.version = XVID_VERSION;
-  pass2.filename = (char *) _param.logName;
-
-  pass2.bitrate = br;		// Average bitrate
-#define CPY(x) pass2.x=_param.x;printf("[xvid] "#x"=%d\n",pass2.x);
-
-  CPY (keyframe_boost);
-  CPY (curve_compression_high);
-  CPY (curve_compression_low);
-  CPY (overflow_control_strength);
-  CPY (max_overflow_improvement);
-  CPY (max_overflow_degradation);
-  CPY (kfreduction);
-  CPY (kfthreshold);
-
-  CPY (container_frame_overhead);
-
-
-
-  xvid_enc_create.plugins = plugins;
-  xvid_enc_create.num_plugins = 2;
-
-  //Framerate
-  xvid_enc_create.fincr = 1000;
-  xvid_enc_create.fbase = _fps1000;
-  //
-  createUpdate ();
-  xerr = xvid_encore (NULL, XVID_ENC_CREATE, &xvid_enc_create, NULL);
-  if (xerr < 0)
-    {
-      printf ("[xvid] Init error: %d\n", xerr);
-      return 0;
-
-    }
-
-  _handle = xvid_enc_create.handle;
-
-  printf ("[xvid] Init Ok\n");
-
-  return 1;
-}
-
-
-#endif

Deleted: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_codecs/ADM_xvid4.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_codecs/ADM_xvid4.h	2009-06-14 20:05:05 UTC (rev 4917)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_codecs/ADM_xvid4.h	2009-06-14 20:05:07 UTC (rev 4918)
@@ -1,133 +0,0 @@
-/***************************************************************************
-                          ADM_xvid4.h.h  -  description
-			  	DevAPI4 xvid encoder
-                             -------------------
-    begin                : Fri Jul 12 2002
-    copyright            : (C) 2002 by mean
-    email                : fixounet at free.fr
- ***************************************************************************/
-
-/***************************************************************************
- *                                                                         *
- *   This program is free software; you can redistribute it and/or modify  *
- *   it under the terms of the GNU General Public License as published by  *
- *   the Free Software Foundation; either version 2 of the License, or     *
- *   (at your option) any later version.                                   *
- *                                                                         *
- ***************************************************************************/
-
-#ifdef USE_XVID_4
-
-
-
-#include "ADM_codecs/ADM_xvid4param.h"
-
-class xvid4Encoder:public encoder
-{
-protected:uint8_t _init;
-  void *_handle;
-  uint32_t encode_flags;
-  uint32_t motion_flags;
-  uint32_t _fps1000;
-  xvid4EncParam _param;
-  void dumpConf (void);
-  void checkFlags (xvid4EncParam * extend = NULL);
-  void createUpdate (void);
-
-  uint8_t preAmble (uint8_t * in);
-  uint8_t postAmble (ADMBitstream * out);
-  void dump (void);
-
-public:  xvid4Encoder (uint32_t width, uint32_t height):encoder (width,
-							    height)
-  {
-    _init = 0;
-    _handle = NULL;
-  };
-  ~xvid4Encoder ();
-  void *getXvidStat (void);
-  uint8_t stopEncoder (void);
-  virtual uint8_t init (uint32_t val, uint32_t fps1000,
-			xvid4EncParam * param);
-
-  uint8_t init (uint32_t a, uint32_t b)
-  {
-    return 0;
-  }				// not used
-  virtual uint8_t encode (ADMImage * in, ADMBitstream * out) ;
-};
-
-class xvid4EncoderCQ:public xvid4Encoder
-{
-protected:uint32_t _q;
-
-public:xvid4EncoderCQ (uint32_t width, uint32_t height):xvid4Encoder (width,
-								 height)
-  {
-
-  };
-
-  virtual uint8_t init (uint32_t val, uint32_t fps1000,
-			xvid4EncParam * param);
-  virtual uint8_t encode (ADMImage * in, ADMBitstream * out);
-};
-class xvid4EncoderVBRExternal:public xvid4Encoder
-{
-protected:uint32_t _q;
-
-public:xvid4EncoderVBRExternal (uint32_t width,
-			   uint32_t height):xvid4Encoder (width,
-							  height)
-  {
-
-  };
-
-  virtual uint8_t init (uint32_t val, uint32_t fps1000,
-			xvid4EncParam * param);
-  virtual uint8_t encode (ADMImage * in, ADMBitstream * out);
-  
-};
-class xvid4EncoderCBR:public xvid4Encoder
-{
-protected:uint32_t _bitrate;	// In kBits!         
-
-public:xvid4EncoderCBR (uint32_t width,
-		   uint32_t height):xvid4Encoder (width, height)
-  {
-
-  };
-
-  virtual uint8_t init (uint32_t val, uint32_t fps1000,
-			xvid4EncParam * param);
-  virtual uint8_t encode (ADMImage * in, ADMBitstream * out);
-};
-class xvid4EncoderPass1:public xvid4Encoder
-{
-protected: public:xvid4EncoderPass1 (uint32_t width,
-		     uint32_t height):xvid4Encoder (width,
-						    height)
-  {
-
-  };
-
-  virtual uint8_t init (uint32_t val, uint32_t fps1000,
-			xvid4EncParam * param);
-  
-};
-class xvid4EncoderPass2:public xvid4Encoder
-{
-protected:uint32_t _bitrate;
-
-public:xvid4EncoderPass2 (uint32_t width,
-		     uint32_t height):xvid4Encoder (width, height)
-  {
-
-  };
-
-  virtual uint8_t init (uint32_t val, uint32_t fps1000,
-			xvid4EncParam * param);
-  
-};
-
-
-#endif

Deleted: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_codecs/ADM_xvid4param.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_codecs/ADM_xvid4param.h	2009-06-14 20:05:05 UTC (rev 4917)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_codecs/ADM_xvid4param.h	2009-06-14 20:05:07 UTC (rev 4918)
@@ -1,80 +0,0 @@
-/***************************************************************************
-                          GUI_xvidparam.h  -  description
-                             -------------------
-    begin                : Sun Nov 17 2002
-    copyright            : (C) 2002 by mean
-    email                : fixounet at free.fr
- ***************************************************************************/
-
-/***************************************************************************
- *                                                                         *
- *   This program is free software; you can redistribute it and/or modify  *
- *   it under the terms of the GNU General Public License as published by  *
- *   the Free Software Foundation; either version 2 of the License, or     *
- *   (at your option) any later version.                                   *
- *                                                                         *
- ***************************************************************************/
-
-#ifndef XVID4ENCPARAM__
-#define XVID4ENCPARAM__
-
-typedef struct xvid4EncParam
-{
-
-  uint32_t guiLevel;			// equivalent to divx level : Fast/medium/insane
-
-  uint32_t min_key_interval;
-  uint32_t max_key_interval;
-  uint32_t bframes;
-
-  uint32_t mpegQuantizer;		// 0 h263/ 1 Mpeg quantizer
-  uint32_t interlaced;
-  uint32_t inter4mv;
-  uint32_t trellis;
-  uint32_t cartoon;
-  uint32_t greyscale;
-
-  uint32_t qpel;
-  uint32_t gmc;
-  uint32_t bvhq;
-  uint32_t hqac;
-
-  uint32_t   chroma_opt;
-  uint32_t qmin[3];			// IPB
-  uint32_t qmax[3];			// IPB
-
-  uint32_t par_as_input;
-  uint32_t par_width;
-  uint32_t par_height;
-
-
-  // This if for 2 pass   
-  uint32_t keyframe_boost;
-  uint32_t curve_compression_high;
-  uint32_t curve_compression_low;
-  uint32_t overflow_control_strength;
-  uint32_t max_overflow_improvement;
-  uint32_t max_overflow_degradation;
-  uint32_t kfreduction;
-  uint32_t kfthreshold;
-
-  int container_frame_overhead;
-  //
-  uint32_t bquant_ratio;
-  uint32_t bquant_offset;
-  uint32_t vhqmode;
-  uint32_t chroma_me;
-  uint32_t turbo;
-  uint32_t packed;
-  uint32_t closed_gop;
-  uint32_t bframe_threshold;
-  uint32_t useCustomIntra;
-  uint32_t useCustomInter;
-  uint8_t  intraMatrix[64];
-  uint8_t  interMatrix[64];
-  char logName[200];
-} xvid4EncParam;
-
-
-
-#endif

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_codecs/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_codecs/CMakeLists.txt	2009-06-14 20:05:05 UTC (rev 4917)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_codecs/CMakeLists.txt	2009-06-14 20:05:07 UTC (rev 4918)
@@ -1,7 +1,12 @@
 SET(ADM_codecs_SRCS 
-	ADM_codecs.cpp  ADM_ffmpeg.cpp  ADM_mjpegEncode.cpp  ADM_png.cpp    ADM_theora_dec.cpp   ADM_xvid.cpp
-	ADM_ffmp43.cpp  ADM_mjpeg.cpp   ADM_rgb16.cpp  ADM_uyvy.cpp        ADM_xvid4.cpp
-        ADM_ffmpeg_vdpau.cpp
+ADM_codecs.cpp
+ADM_png.cpp
+ADM_theora_dec.cpp
+ADM_ffmp43.cpp
+ADM_mjpeg.cpp
+ADM_rgb16.cpp
+ADM_uyvy.cpp
+ADM_ffmpeg_vdpau.cpp
 )
 
 ADD_ADM_LIB_ALL_TARGETS(ADM_codecs ${ADM_codecs_SRCS})
@@ -10,8 +15,4 @@
 	 ADD_SOURCE_CFLAGS(ADM_png.cpp ${PNG_CFLAGS})
 ENDIF (USE_PNG)
 
-IF (USE_XVID_4)
-	ADD_SOURCE_CFLAGS(ADM_xvid4.cpp -I${XVID_INCLUDE_DIR})
-ENDIF (USE_XVID_4)
-
 REMOVE_DEFINITIONS(-DHAVE_CONFIG_H)

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_preview.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_preview.cpp	2009-06-14 20:05:05 UTC (rev 4917)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_preview.cpp	2009-06-14 20:05:07 UTC (rev 4918)
@@ -39,13 +39,13 @@
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_videoFilter.h"
 #include "ADM_videoFilter_internal.h"
-#include "ADM_userInterfaces/ADM_render/GUI_render.h"
+#include "ADM_render/GUI_render.h"
 
-#include "ADM_osSupport/ADM_debugID.h"
+#include "ADM_debugID.h"
 #define MODULE_NAME MODULE_PREVIEW
-#include "ADM_osSupport/ADM_debug.h"
-#include "ADM_libraries/ADM_ffmpeg/libswscale/ADM_mp.h"
-#include "ADM_userInterfaces/ADM_commonUI/GUI_ui.h"
+#include "ADM_debug.h"
+#include "ADM_ffmpeg/libswscale/ADM_mp.h"
+#include "ADM_commonUI/GUI_ui.h"
 #include "ADM_preview.h"
 #define MAX(a,b) ( (a)>(b) ? (a) : (b) )
 

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_preview.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_preview.h	2009-06-14 20:05:05 UTC (rev 4917)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_preview.h	2009-06-14 20:05:07 UTC (rev 4918)
@@ -5,7 +5,7 @@
 */
 #ifndef ADM_PREVIEW_H
 #define ADM_PREVIEW_H
-#include "ADM_userInterfaces/ADM_render/GUI_render.h"
+#include "ADM_render/GUI_render.h"
 typedef enum 
 {
     ADM_PREVIEW_NONE, 

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/gtk_gui.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/gtk_gui.cpp	2009-06-14 20:05:05 UTC (rev 4917)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/gtk_gui.cpp	2009-06-14 20:05:07 UTC (rev 4918)
@@ -35,20 +35,20 @@
 
 #include "audioeng_buildfilters.h"
 #include "prefs.h"
-#include "ADM_userInterfaces/ADM_render/GUI_render.h"
-#include "ADM_userInterfaces/ADM_commonUI/GUI_ui.h"
+#include "ADM_render/GUI_render.h"
+#include "ADM_commonUI/GUI_ui.h"
 
 #include "audio_out.h"
 
-#include "ADM_userInterfaces/ADM_commonUI/DIA_busy.h"
+#include "ADM_commonUI/DIA_busy.h"
 #include "DIA_working.h"
 #include "DIA_factory.h"
 #include "DIA_enter.h"
 
 #include "ADM_videoFilter.h"
 #include "ADM_videoFilter_internal.h"
-#include "ADM_codecs/ADM_ffmpeg.h"
-#include "ADM_video/ADM_vidMisc.h"
+
+#include "ADM_vidMisc.h"
 #include "ADM_preview.h"
 #include "ADM_coreVideoEncoder.h"
 

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/gui_autodrive.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/gui_autodrive.cpp	2009-06-14 20:05:05 UTC (rev 4917)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/gui_autodrive.cpp	2009-06-14 20:05:07 UTC (rev 4918)
@@ -23,7 +23,7 @@
 #include <math.h>
 
 #include "avi_vars.h"
-#include "ADM_userInterfaces/ADM_commonUI/GUI_ui.h"
+#include "ADM_commonUI/GUI_ui.h"
 #include "DIA_coreToolkit.h"
 #include "ADM_assert.h"
 

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/gui_blackframes.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/gui_blackframes.cpp	2009-06-14 20:05:05 UTC (rev 4917)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/gui_blackframes.cpp	2009-06-14 20:05:07 UTC (rev 4918)
@@ -32,14 +32,14 @@
 #include "gui_action.hxx"
 #include "gtkgui.h"
 #include "DIA_coreToolkit.h"
-#include "ADM_userInterfaces/ADM_render/GUI_render.h"
+#include "ADM_render/GUI_render.h"
 #include "DIA_working.h"
 #include "ADM_videoFilter.h"
 #include "ADM_videoFilter_internal.h"
-#include "ADM_userInterfaces/ADM_commonUI/DIA_busy.h"
-#include "ADM_userInterfaces/ADM_commonUI/GUI_ui.h"
+#include "ADM_commonUI/DIA_busy.h"
+#include "ADM_commonUI/GUI_ui.h"
 
-#include "ADM_video/ADM_vidMisc.h"
+#include "ADM_vidMisc.h"
 #include "ADM_preview.h"
 
 

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/gui_misc.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/gui_misc.cpp	2009-06-14 20:05:05 UTC (rev 4917)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/gui_misc.cpp	2009-06-14 20:05:07 UTC (rev 4918)
@@ -9,7 +9,7 @@
 #include "ADM_colorspace.h"
 #include "ADM_bitstream.h"
 #include "ADM_codecs/ADM_codec.h"
-#include "ADM_codecs/ADM_ffmpeg.h"
+//#include "ADM_codecs/ADM_ffmpeg.h"
 /**
     \fn saveAsBmp
     \brief save current image into filename, into bmp format
@@ -110,6 +110,7 @@
 */
 uint8_t  ADMImage::saveAsJpg(const char *filename)
 {
+    #if 0
  ffmpegEncoderFFMjpeg *codec=NULL;
   FILE *fd;
   uint8_t *buffer=NULL;
@@ -141,4 +142,7 @@
         fclose(fd);
         delete [] buffer;
         return 1;
+        #endif
+#warning save as jpeg disabled
+        return false;
 }
\ No newline at end of file

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/gui_navigate.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/gui_navigate.cpp	2009-06-14 20:05:05 UTC (rev 4917)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/gui_navigate.cpp	2009-06-14 20:05:07 UTC (rev 4918)
@@ -27,11 +27,11 @@
 #include "gtkgui.h"
 
 #include "DIA_coreToolkit.h"
-#include "ADM_userInterfaces/ADM_commonUI/DIA_busy.h"
-#include "ADM_userInterfaces/ADM_commonUI/GUI_ui.h"
+#include "ADM_commonUI/DIA_busy.h"
+#include "ADM_commonUI/GUI_ui.h"
 #include "DIA_enter.h"
 
-#include "ADM_video/ADM_vidMisc.h"
+#include "ADM_vidMisc.h"
 #include "ADM_preview.h"
 
 extern void UI_purge(void);

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/gui_play.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/gui_play.cpp	2009-06-14 20:05:05 UTC (rev 4917)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/gui_play.cpp	2009-06-14 20:05:07 UTC (rev 4918)
@@ -24,7 +24,7 @@
 #include "ADM_videoFilter.h"
 #include "ADM_videoFilter_internal.h"
 #include "gtkgui.h"
-#include "ADM_userInterfaces/ADM_render/GUI_render.h"
+#include "ADM_render/GUI_render.h"
 #include "avidemutils.h"
 #include "ADM_preview.h"
 #include "audiofilter.h"

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/gui_save.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/gui_save.cpp	2009-06-14 20:05:05 UTC (rev 4917)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/gui_save.cpp	2009-06-14 20:05:07 UTC (rev 4918)
@@ -24,10 +24,10 @@
 #include "gtkgui.h"
 
 #include "DIA_coreToolkit.h"
-#include "ADM_userInterfaces/ADM_commonUI/GUI_ui.h"
+#include "ADM_commonUI/GUI_ui.h"
 #include "DIA_enter.h"
 
-#include "ADM_video/ADM_vidMisc.h"
+#include "ADM_vidMisc.h"
 #include "DIA_fileSel.h"
 #include "DIA_working.h"
 // Local prototypes

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/gui_savenew.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/gui_savenew.cpp	2009-06-14 20:05:05 UTC (rev 4917)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/gui_savenew.cpp	2009-06-14 20:05:07 UTC (rev 4918)
@@ -33,9 +33,9 @@
 
 
 #include "DIA_fileSel.h"
-#include "ADM_userInterfaces/ADM_commonUI/GUI_ui.h"
+#include "ADM_commonUI/GUI_ui.h"
 #include "ADM_muxer.h"
-#include "ADM_videoCopy.h"
+#include "ADM_muxerGate/include/ADM_videoCopy.h"
 #include "ADM_filterChain.h"
 
 ADM_muxer               *ADM_MuxerSpawnFromIndex(int index);

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/main.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/main.cpp	2009-06-14 20:05:05 UTC (rev 4917)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/main.cpp	2009-06-14 20:05:07 UTC (rev 4918)
@@ -52,7 +52,7 @@
 	#include "SDL.h"
 }
 
-#include "ADM_userInterfaces/ADM_render/GUI_sdlRender.h"
+#include "ADM_render/GUI_sdlRender.h"
 #endif
 
 
@@ -127,12 +127,12 @@
 
     printf("*************************\n");
     printf("  Avidemux v" VERSION);
-
+#if 0
   	if(ADM_SUBVERSION)
 	{
 		printf(" (r%04u)", ADM_SUBVERSION);
 	}
-
+#endif
     printf("\n*************************\n");
     printf(" http://www.avidemux.org\n");
     printf(" Code      : Mean, JSC, Gruntster \n");

Added: branches/avidemux_2.6_branch_mean/avidemux/gtk/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/gtk/CMakeLists.txt	2009-06-14 20:05:05 UTC (rev 4917)
+++ branches/avidemux_2.6_branch_mean/avidemux/gtk/CMakeLists.txt	2009-06-14 20:05:07 UTC (rev 4918)
@@ -0,0 +1,169 @@
+MESSAGE("#########################################")
+MESSAGE("Configure for avidemux Gtk Started")
+MESSAGE("#########################################")
+MESSAGE("")
+PROJECT(Avidemux_gtk)
+
+CMAKE_MINIMUM_REQUIRED(VERSION 2.4.7 FATAL_ERROR)
+
+if (COMMAND cmake_policy)
+	cmake_policy(VERSION 2.4)
+	cmake_policy(SET CMP0003 NEW)
+endif (COMMAND cmake_policy)
+########################################
+# Definitions and Includes
+########################################
+ADD_DEFINITIONS(-D_FILE_OFFSET_BITS=64 -D_LARGE_FILES)
+ADD_DEFINITIONS(-DHAVE_CONFIG_H)
+########################################
+# Where is the config.h dir
+########################################
+IF (NOT AVIDEMUX_CORE_BUILD_DIR)
+	MESSAGE(FATAL_ERROR "Please add -DAVIDEMUX_CORECONFIG_DIR=path_to_avidemux_core_build_dir")
+ELSE (NOT AVIDEMUX_CORE_BUILD_DIR)
+	SET(AVIDEMUX_CORE_BUILD_DIR "${AVIDEMUX_CORE_BUILD_DIR}" CACHE STRING "")
+ENDIF (NOT AVIDEMUX_CORE_BUILD_DIR)
+#
+# Access to our cmake lib
+#
+SET(AVIDEMUX_TOP_SOURCE_DIR ${CMAKE_SOURCE_DIR}/../..)
+SET(CMAKE_MODULE_PATH "${AVIDEMUX_TOP_SOURCE_DIR}/cmake" "${CMAKE_MODULE_PATH}")
+MESSAGE(STATUS "Avidemux cmake scripts are in ${CMAKE_MODULE_PATH}")
+#
+#
+#
+
+IF (ADM_DEBUG)
+	ADD_DEFINITIONS(-DADM_DEBUG)
+ENDIF (ADM_DEBUG)
+###########################################
+# Check Gtk & friends
+###########################################
+include(admConfigHelper)
+INCLUDE(admCheckRequiredLibs)
+include(admCheckMiscLibs)
+include(admCheckGtk)
+include(admCheckGlade)
+#
+checkGtk()
+checkGlade()
+########################################
+# Add include dirs
+########################################
+include(admCoreIncludes)
+
+INCLUDE_DIRECTORIES("${CMAKE_CURRENT_SOURCE_DIR}/ADM_muxerGate/include/")
+
+IF (GETTEXT_FOUND)
+	INCLUDE_DIRECTORIES(${GETTEXT_INCLUDE_DIR})
+ENDIF (GETTEXT_FOUND)
+INCLUDE_DIRECTORIES("${CMAKE_CURRENT_SOURCE_DIR}/../common/")
+INCLUDE_DIRECTORIES("${CMAKE_CURRENT_SOURCE_DIR}/../common/ADM_audioFilter_old")
+##########################################
+# Config
+##########################################
+
+SET(CONFIG_HEADER_TYPE ADM_BUILD_GTK)
+CONFIGURE_FILE("${AVIDEMUX_TOP_SOURCE_DIR}/cmake/config.h.cmake" "${CMAKE_BINARY_DIR}/config/gtk/config.h")
+MESSAGE(STATUS "GTK config.h generated")
+
+INCLUDE_DIRECTORIES("${CMAKE_BINARY_DIR}/config/gtk/")
+INCLUDE_DIRECTORIES("${AVIDEMUX_CORE_BUILD_DIR}/config")
+########################################
+# Add subdirectories 
+########################################
+ADD_SUBDIRECTORY(../common ./common)
+ADD_SUBDIRECTORY(ADM_UIs)
+ADD_SUBDIRECTORY(ADM_userInterfaces)
+#
+# Add main source
+#
+SET(ADM_EXE_SRCS 
+../common/ADM_preview.cpp  
+../common/gtk_gui.cpp  
+../common/gui_autodrive.cpp  
+../common/GUI_jobs.cpp  
+../common/gui_navigate.cpp  
+../common/gui_play.cpp  
+../common/gui_save.cpp  
+../common/gui_savenew.cpp  
+../common/gui_misc.cpp
+../common/main.cpp  
+../common/gui_action.cpp
+../common/gui_blackframes.cpp
+../common/ADM_imageLoader.cpp  
+../common/ADM_gettext.cpp
+)
+# Executable
+ADD_EXECUTABLE(avidemux2_gtk ${ADM_EXE_SRCS})
+ADD_TARGET_CFLAGS(avidemux2_gtk "-I${CMAKE_BINARY_DIR}/config/gtk")
+
+SDLify(../common/main.cpp)
+ADD_SOURCE_CFLAGS(../common/main.cpp "-DADM_SUBVERSION=${ADM_SUBVERSION}")
+###########################################
+# Construct ADM_libraries
+###########################################
+
+IF (ADM_DEBUG AND FIND_LEAKS)
+	ADD_ADMLIB_ALL_TARGETS(ADM_nvwa)
+ENDIF (ADM_DEBUG AND FIND_LEAKS)
+
+
+###########################################
+# External libs
+###########################################
+# gettext
+IF (GETTEXT_FOUND)
+	TARGET_LINK_LIBRARIES(avidemux2_gtk ${GETTEXT_LIBRARY_DIR})
+ENDIF (GETTEXT_FOUND)
+
+# pthreads
+IF (UNIX AND PTHREAD_FOUND)
+        TARGET_LINK_LIBRARIES(avidemux2_gtk ${PTHREAD_LIBRARIES})
+ENDIF (UNIX AND PTHREAD_FOUND)
+
+# PNG
+IF (USE_PNG)
+        TARGET_LINK_LIBRARIES(avidemux2_gtk ${PNG_LIBRARIES})
+	
+ENDIF (USE_PNG)
+
+
+# XVideo
+IF (USE_XV)
+        TARGET_LINK_LIBRARIES(avidemux2_gtk ${XVIDEO_LIBRARY_DIR})
+ENDIF (USE_XV)
+
+# SDL
+IF (USE_SDL)
+        TARGET_LINK_LIBRARIES(avidemux2_gtk ${SDL_LIBRARY})
+ENDIF (USE_SDL)
+
+###########################################
+# UI Specific
+###########################################
+ADD_TARGET_LDFLAGS(avidemux2_gtk ${GTK_LDFLAGS} ${GTHREAD_LDFLAGS})
+
+
+###########################################
+# OS Specific
+###########################################
+IF (WIN32)
+	ADD_LIB_ALL_TARGETS(ADM_osSupport)
+
+	IF (MINGW)
+		ADD_LIB_ALL_TARGETS(-mno-cygwin)
+	ENDIF (MINGW)
+
+	ADD_LIB_ALL_TARGETS(winmm)
+
+	ADD_TARGET_LDFLAGS(avidemux2_cli "-Wl,-subsystem,console")
+
+        ADD_TARGET_LDFLAGS(avidemux2_gtk "-mwindows")
+
+ENDIF (WIN32)
+
+###########################################
+# Install
+###########################################
+#INSTALL(TARGETS avidemux2_gtk RUNTIME DESTINATION ${BIN_DIR} LIBRARY DESTINATION lib)

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/CMakeLists.txt	2009-06-14 20:05:05 UTC (rev 4917)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/CMakeLists.txt	2009-06-14 20:05:07 UTC (rev 4918)
@@ -10,16 +10,19 @@
 	cmake_policy(SET CMP0003 NEW)
 endif (COMMAND cmake_policy)
 
-SET(CMAKE_MODULE_PATH "${CMAKE_SOURCE_DIR}/../cmake" "${CMAKE_MODULE_PATH}")
 
 IF (NOT CMAKE_CXX_COMPILER_WORKS MATCHES "^${CMAKE_CXX_COMPILER_WORKS}$")
 	SET(FRESH_BUILD 1)
 ENDIF (NOT CMAKE_CXX_COMPILER_WORKS MATCHES "^${CMAKE_CXX_COMPILER_WORKS}$")
 
 # need for shared cmake script between avidemux & plugins
-SET(AVIDEMUX_TOP_SOURCE_DIR ${CMAKE_SOURCE_DIR}/..)
 SET(AVIDEMUX_SOURCE_DIR ${CMAKE_SOURCE_DIR})
-MESSAGE(STATUS "Source dir is ${AVIDEMUX_TOP_SOURCE_DIR}")
+SET(AVIDEMUX_TOP_SOURCE_DIR ${CMAKE_SOURCE_DIR}/..)
+SET(AVIDEMUX_CORE_BUILD_DIR ${CMAKE_BINARY_DIR})
+#
+SET(CMAKE_MODULE_PATH "${AVIDEMUX_TOP_SOURCE_DIR}/cmake" "${CMAKE_MODULE_PATH}")
+#
+MESSAGE(STATUS "Top Source dir is ${AVIDEMUX_TOP_SOURCE_DIR}")
 MESSAGE("")
 
 PROJECT(Avidemux_core)
@@ -175,24 +178,7 @@
 ########################################
 # Add include dirs
 ########################################
-INCLUDE_DIRECTORIES(${AVIDEMUX_SOURCE_DIR}/)
-INCLUDE_DIRECTORIES(${AVIDEMUX_SOURCE_DIR}/ADM_core/include)
-INCLUDE_DIRECTORIES(${AVIDEMUX_SOURCE_DIR}/ADM_ffmpeg)
-INCLUDE_DIRECTORIES(${AVIDEMUX_SOURCE_DIR}/ADM_coreAudioFilter/include)
-INCLUDE_DIRECTORIES(${AVIDEMUX_SOURCE_DIR}/ADM_coreAudioParser/include)
-INCLUDE_DIRECTORIES(${AVIDEMUX_SOURCE_DIR}/ADM_coreAudio/include)
-INCLUDE_DIRECTORIES(${AVIDEMUX_SOURCE_DIR}/ADM_coreAudioDevice/include)
-INCLUDE_DIRECTORIES(${AVIDEMUX_SOURCE_DIR}/ADM_coreAudioEncoder/include)
-INCLUDE_DIRECTORIES(${AVIDEMUX_SOURCE_DIR}/ADM_coreDemuxer/include)
-INCLUDE_DIRECTORIES(${AVIDEMUX_SOURCE_DIR}/ADM_coreDemuxerMpeg/include)
-INCLUDE_DIRECTORIES(${AVIDEMUX_SOURCE_DIR}/ADM_coreImage/include)
-INCLUDE_DIRECTORIES(${AVIDEMUX_SOURCE_DIR}/ADM_coreMuxer/include)
-INCLUDE_DIRECTORIES(${AVIDEMUX_SOURCE_DIR}/ADM_coreUI/include)
-INCLUDE_DIRECTORIES(${AVIDEMUX_SOURCE_DIR}/ADM_coreUtils/include)
-INCLUDE_DIRECTORIES(${AVIDEMUX_SOURCE_DIR}/ADM_coreVideoEncoder/include)
-INCLUDE_DIRECTORIES(${AVIDEMUX_SOURCE_DIR}/ADM_coreVideoFilter/include)
-INCLUDE_DIRECTORIES(${AVIDEMUX_SOURCE_DIR}/ADM_ffmpeg)
-INCLUDE_DIRECTORIES(${CMAKE_BINARY_DIR}/config)
+include(admCoreIncludes)
 ########################################
 # Directories to build
 ########################################

Modified: branches/avidemux_2.6_branch_mean/cmake/config.h.cmake
===================================================================
--- branches/avidemux_2.6_branch_mean/cmake/config.h.cmake	2009-06-14 20:05:05 UTC (rev 4917)
+++ branches/avidemux_2.6_branch_mean/cmake/config.h.cmake	2009-06-14 20:05:07 UTC (rev 4918)
@@ -1,7 +1,7 @@
 #ifndef ADM_CONFIG_H
 #define ADM_CONFIG_H
 
-#include "../ADM_coreConfig.h"
+#include "ADM_coreConfig.h"
 
 #define ADM_BUILD_CLI 1
 #define ADM_BUILD_GTK 2



From mean at mail.berlios.de  Sun Jun 14 22:05:11 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sun, 14 Jun 2009 22:05:11 +0200
Subject: [Avidemux-svn-commit] r4919 -
	branches/avidemux_2.6_branch_mean/avidemux/common
Message-ID: <200906142005.n5EK5Bla030137@sheep.berlios.de>

Author: mean
Date: 2009-06-14 22:05:10 +0200 (Sun, 14 Jun 2009)
New Revision: 4919

Added:
   branches/avidemux_2.6_branch_mean/avidemux/common/CMakeLists.txt
Log:
[gtk] Build subdirs

Added: branches/avidemux_2.6_branch_mean/avidemux/common/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/CMakeLists.txt	2009-06-14 20:05:07 UTC (rev 4918)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/CMakeLists.txt	2009-06-14 20:05:10 UTC (rev 4919)
@@ -0,0 +1,24 @@
+ADM_audiocodec
+ADM_audioFilter
+ADM_audioFilter_old
+ADM_codecs
+ADM_commonUI
+ADM_editor
+ADM_filter
+ADM_gettext.cpp
+ADM_imageLoader.cpp
+ADM_infoExtractor
+ADM_libraries
+ADM_mpegIndexer
+ADM_muxerGate
+ADM_ocr
+ADM_osSupport
+ADM_plugin
+ADM_preview.cpp
+ADM_preview.h
+ADM_render
+ADM_requant
+ADM_script
+ADM_toolkit
+ADM_video
+ADM_videoFilter



From mean at mail.berlios.de  Sun Jun 14 22:05:15 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sun, 14 Jun 2009 22:05:15 +0200
Subject: [Avidemux-svn-commit] r4920 - in
	branches/avidemux_2.6_branch_mean/avidemux: common
	common/ADM_audioFilter_old common/ADM_audiocodec
	common/ADM_editor common/ADM_filter common/ADM_libraries
	common/ADM_osSupport common/ADM_requant common/ADM_script
	common/ADM_toolkit common/ADM_video gtk
Message-ID: <200906142005.n5EK5Egx030171@sheep.berlios.de>

Author: mean
Date: 2009-06-14 22:05:13 +0200 (Sun, 14 Jun 2009)
New Revision: 4920

Modified:
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_audioFilter_old/audiodeng_buildfilters.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_audiocodec/ADM_codecimaadpcm.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_audiocodec/ADM_codecmsadpcm.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edCache.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edit.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADMedAVIAUD.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_filter/filter.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_filter/vidVCD.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_libraries/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_osSupport/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_requant/tcrequant.c
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script/ADM_JSAvidemux.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script/ADM_JSAvidemux.h
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script/ADM_JSAvidemuxAudio.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script/ADM_JSAvidemuxAudio.h
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script/ADM_JSAvidemuxVideo.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script/ADM_JSAvidemuxVideo.h
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script/ADM_JSDirectorySearch.h
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script/ADM_JSGlobal.h
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_toolkit/automation.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_video/ADM_vidNull.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux/gtk/CMakeLists.txt
Log:
[build/gtk] Also link core libs + fix path

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_audioFilter_old/audiodeng_buildfilters.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_audioFilter_old/audiodeng_buildfilters.cpp	2009-06-14 20:05:10 UTC (rev 4919)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_audioFilter_old/audiodeng_buildfilters.cpp	2009-06-14 20:05:13 UTC (rev 4920)
@@ -37,9 +37,9 @@
 
 #include "prefs.h"
 
-#include "ADM_osSupport/ADM_debugID.h"
+#include "ADM_debugID.h"
 #define MODULE_NAME MODULE_AUDIO_FILTER
-#include "ADM_osSupport/ADM_debug.h"
+#include "ADM_debug.h"
 
 extern void UI_setAProcessToggleStatus( uint8_t status );
 extern uint8_t DIA_audioCodec( int *codec );

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_audiocodec/ADM_codecimaadpcm.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_audiocodec/ADM_codecimaadpcm.cpp	2009-06-14 20:05:10 UTC (rev 4919)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_audiocodec/ADM_codecimaadpcm.cpp	2009-06-14 20:05:13 UTC (rev 4920)
@@ -17,13 +17,12 @@
 */
 
 #include "ADM_default.h"
-#include "common.h"
 #define ADM_NO_CONFIG_H
-#include "bswap.h"
 #include "ADM_assert.h"
 #include "ADM_coreAudio.h"
 #include "ADM_audiocodec.h"
 
+extern uint16_t le2me_16(uint16_t x);
 
 #define MS_IMA_ADPCM_PREAMBLE_SIZE 4
 

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_audiocodec/ADM_codecmsadpcm.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_audiocodec/ADM_codecmsadpcm.cpp	2009-06-14 20:05:10 UTC (rev 4919)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_audiocodec/ADM_codecmsadpcm.cpp	2009-06-14 20:05:13 UTC (rev 4920)
@@ -14,8 +14,6 @@
 
 #include "ADM_default.h"
 #define ADM_NO_CONFIG_H
-#include "common.h"
-#include "bswap.h"
 #include "ADM_coreAudio.h"
 #include "ADM_audiocodec.h"
 

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edCache.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edCache.cpp	2009-06-14 20:05:10 UTC (rev 4919)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edCache.cpp	2009-06-14 20:05:13 UTC (rev 4920)
@@ -12,9 +12,9 @@
 #include "ADM_editor/ADM_edCache.h"
 
 
-#include "ADM_osSupport/ADM_debugID.h"
+#include "ADM_debugID.h"
 #define MODULE_NAME MODULE_EDITOR
-#include "ADM_osSupport/ADM_debug.h"
+#include "ADM_debug.h"
 #undef aprintf
 #if 1
 #define aprintf(...) {}

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edit.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edit.cpp	2009-06-14 20:05:10 UTC (rev 4919)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edit.cpp	2009-06-14 20:05:13 UTC (rev 4920)
@@ -48,9 +48,9 @@
 #include "ADM_videoFilter.h"
 #include "prefs.h"
 
-#include "ADM_osSupport/ADM_debugID.h"
+#include "ADM_debugID.h"
 #define MODULE_NAME MODULE_EDITOR
-#include "ADM_osSupport/ADM_debug.h"
+#include "ADM_debug.h"
 
 #//include "ADM_inputs/ADM_mpegdemuxer/dmx_indexer.h"
 #include "ADM_outputfmt.h"

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADMedAVIAUD.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADMedAVIAUD.cpp	2009-06-14 20:05:10 UTC (rev 4919)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADMedAVIAUD.cpp	2009-06-14 20:05:13 UTC (rev 4920)
@@ -33,9 +33,9 @@
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_editor/ADM_edAudio.hxx"
 
-#include "ADM_osSupport/ADM_debugID.h"
+#include "ADM_debugID.h"
 #define MODULE_NAME MODULE_AUDIO_EDITOR
-#include "ADM_osSupport/ADM_debug.h"
+#include "ADM_debug.h"
 
 
 #define AUDIOSEG 	_segments[_audioseg]._reference

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_filter/filter.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_filter/filter.cpp	2009-06-14 20:05:10 UTC (rev 4919)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_filter/filter.cpp	2009-06-14 20:05:13 UTC (rev 4920)
@@ -26,11 +26,11 @@
 #include "ADM_videoFilter_internal.h"
 #include "ADM_videoFilterDynamic.h"
 #include "ADM_video/ADM_vidPartial.h"
-#include "ADM_userInterfaces/ADM_render/GUI_render.h"
+#include "ADM_render/GUI_render.h"
 
-#include "ADM_osSupport/ADM_debugID.h"
+#include "ADM_debugID.h"
 #define MODULE_NAME MODULE_PREVIEW
-#include "ADM_osSupport/ADM_debug.h"
+#include "ADM_debug.h"
 #include "ADM_quota.h"
 #include "ADM_preview.h"
 //

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_filter/vidVCD.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_filter/vidVCD.cpp	2009-06-14 20:05:10 UTC (rev 4919)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_filter/vidVCD.cpp	2009-06-14 20:05:13 UTC (rev 4920)
@@ -38,8 +38,8 @@
 #include "ADM_videoFilter_internal.h"
 #include "ADM_filter/vidVCD.h"
 #include "prefs.h"
-#include "ADM_userInterfaces/ADM_commonUI/DIA_resizeWiz.h"
-#include "ADM_video/ADM_vidMisc.h"
+#include "ADM_commonUI/DIA_resizeWiz.h"
+#include "ADM_vidMisc.h"
 //___________________________________________
 extern FILTER videofilters[VF_MAX_FILTER];
 extern uint32_t nb_active_filter;

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_libraries/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_libraries/CMakeLists.txt	2009-06-14 20:05:10 UTC (rev 4919)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_libraries/CMakeLists.txt	2009-06-14 20:05:13 UTC (rev 4920)
@@ -1,4 +1,4 @@
-subdirs (PREORDER ADM_ffmpeg)
+#subdirs (PREORDER ADM_ffmpeg)
 #subdirs (PREORDER ADM_libmpeg2enc)
 #subdirs (PREORDER ADM_lvemux)
 #subdirs (PREORDER ADM_mplex)

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_osSupport/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_osSupport/CMakeLists.txt	2009-06-14 20:05:10 UTC (rev 4919)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_osSupport/CMakeLists.txt	2009-06-14 20:05:13 UTC (rev 4920)
@@ -1,6 +1,5 @@
 SET(ADM_osSupport_SRCS 
 ADM_crashHook.cpp 
-ADM_debug.cpp    
 ADM_misc.cpp 
 ADM_queue.cpp 
 )

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_requant/tcrequant.c
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_requant/tcrequant.c	2009-06-14 20:05:10 UTC (rev 4919)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_requant/tcrequant.c	2009-06-14 20:05:13 UTC (rev 4920)
@@ -55,9 +55,9 @@
 // MEANX
 #include "tcrequant.h"
 
-#include "ADM_osSupport/ADM_debugID.h"
+#include "ADM_debugID.h"
 #define MODULE_NAME MODULE_TCREQUANT
-#include "ADM_osSupport/ADM_debug.h"
+#include "ADM_debug.h"
 
 
 // / MEANX

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script/ADM_JSAvidemux.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script/ADM_JSAvidemux.cpp	2009-06-14 20:05:10 UTC (rev 4919)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script/ADM_JSAvidemux.cpp	2009-06-14 20:05:13 UTC (rev 4920)
@@ -16,12 +16,12 @@
 #include "ADM_JSAvidemux.h"
 #include "avi_vars.h"
 #include "DIA_coreToolkit.h"
-#include "../ADM_userInterfaces/ADM_commonUI/GUI_ui.h"
+#include "ADM_commonUI/GUI_ui.h"
 #include "ADM_script/ADM_container.h"
 
-#include "ADM_osSupport/ADM_debugID.h"
+#include "ADM_debugID.h"
 #define MODULE_NAME MODULE_SCRIPT
-#include "ADM_osSupport/ADM_debug.h"
+#include "ADM_debug.h"
 
 extern int A_openAvi (const char *name);
 extern int A_Save (const char *name);

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script/ADM_JSAvidemux.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script/ADM_JSAvidemux.h	2009-06-14 20:05:10 UTC (rev 4919)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script/ADM_JSAvidemux.h	2009-06-14 20:05:13 UTC (rev 4920)
@@ -5,7 +5,7 @@
 
 
 // Spidermonkey
-#include "ADM_libraries/ADM_smjs/jsapi.h"
+#include "ADM_smjs/jsapi.h"
 #include "ADM_Avidemux.h"
 class ADM_JSAvidemux
 {

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script/ADM_JSAvidemuxAudio.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script/ADM_JSAvidemuxAudio.cpp	2009-06-14 20:05:10 UTC (rev 4919)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script/ADM_JSAvidemuxAudio.cpp	2009-06-14 20:05:13 UTC (rev 4920)
@@ -15,7 +15,7 @@
 #include "ADM_JSGlobal.h"
 #include "ADM_JSAvidemuxAudio.h"
 
-#include "../ADM_userInterfaces/ADM_commonUI/GUI_ui.h"
+#include "ADM_commonUI/GUI_ui.h"
 #include "audioeng_buildfilters.h"
 #include "avi_vars.h"
 #include "gui_action.hxx"

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script/ADM_JSAvidemuxAudio.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script/ADM_JSAvidemuxAudio.h	2009-06-14 20:05:10 UTC (rev 4919)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script/ADM_JSAvidemuxAudio.h	2009-06-14 20:05:13 UTC (rev 4920)
@@ -6,7 +6,7 @@
 
 
 // Spidermonkey
-#include "ADM_libraries/ADM_smjs/jsapi.h"
+#include "ADM_smjs/jsapi.h"
 #include "ADM_AvidemuxAudio.h"
 
 class ADM_JSAvidemuxAudio

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script/ADM_JSAvidemuxVideo.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script/ADM_JSAvidemuxVideo.cpp	2009-06-14 20:05:10 UTC (rev 4919)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script/ADM_JSAvidemuxVideo.cpp	2009-06-14 20:05:13 UTC (rev 4920)
@@ -16,7 +16,7 @@
 #include "ADM_JSGlobal.h"
 
 
-#include "../ADM_userInterfaces/ADM_commonUI/GUI_ui.h"
+#include "ADM_commonUI/GUI_ui.h"
 #include "audioeng_buildfilters.h"
 #include "avi_vars.h"
 #include "gui_action.hxx"
@@ -26,7 +26,7 @@
 //#include "ADM_encoder/adm_encoder.h"
 //#include "ADM_encoder/adm_encConfig.h"
 #include "ADM_editor/ADM_outputfmt.h"
-#include "../ADM_userInterfaces/ADM_commonUI/GUI_ui.h"
+#include "ADM_commonUI/GUI_ui.h"
 #include "ADM_script/ADM_container.h"
 
 extern VF_FILTERS filterGetTagFromName(const char *inname);

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script/ADM_JSAvidemuxVideo.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script/ADM_JSAvidemuxVideo.h	2009-06-14 20:05:10 UTC (rev 4919)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script/ADM_JSAvidemuxVideo.h	2009-06-14 20:05:13 UTC (rev 4920)
@@ -4,7 +4,7 @@
 #pragma once
 
 // Spidermonkey
-#include "ADM_libraries/ADM_smjs/jsapi.h"
+#include "ADM_smjs/jsapi.h"
 #include "ADM_AvidemuxVideo.h"
 
 class ADM_JSAvidemuxVideo

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script/ADM_JSDirectorySearch.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script/ADM_JSDirectorySearch.h	2009-06-14 20:05:10 UTC (rev 4919)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script/ADM_JSDirectorySearch.h	2009-06-14 20:05:13 UTC (rev 4920)
@@ -6,7 +6,7 @@
 
 
 // Spidermonkey
-#include "ADM_libraries/ADM_smjs/jsapi.h"
+#include "ADM_smjs/jsapi.h"
 #include <string.h>
 #include "DirectorySearch.h"
 

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script/ADM_JSGlobal.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script/ADM_JSGlobal.h	2009-06-14 20:05:10 UTC (rev 4919)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script/ADM_JSGlobal.h	2009-06-14 20:05:13 UTC (rev 4920)
@@ -3,7 +3,7 @@
 
 // Spidermonkey
 
-#include "ADM_libraries/ADM_smjs/jsapi.h"
+#include "ADM_smjs/jsapi.h"
 #include <pthread.h>
 
 // javscript debugging helper

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_toolkit/automation.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_toolkit/automation.cpp	2009-06-14 20:05:10 UTC (rev 4919)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_toolkit/automation.cpp	2009-06-14 20:05:13 UTC (rev 4920)
@@ -37,13 +37,13 @@
 #include "gtkgui.h"
 
 
-#include "ADM_osSupport/ADM_debugID.h"
+#include "ADM_debugID.h"
 #define MODULE_NAME  MODULE_COMMANDLINE
-#include "ADM_osSupport/ADM_debug.h"
+#include "ADM_debug.h"
 #include "avidemutils.h"
 
 #include "ADM_filter/vidVCD.h"
-#include "ADM_video/ADM_vidMisc.h"
+#include "ADM_vidMisc.h"
 #include "ADM_coreVideoEncoder.h"
 
 extern void filterListAll(void );

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_video/ADM_vidNull.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_video/ADM_vidNull.cpp	2009-06-14 20:05:10 UTC (rev 4919)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_video/ADM_vidNull.cpp	2009-06-14 20:05:13 UTC (rev 4920)
@@ -24,11 +24,11 @@
 #include "ADM_default.h"
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_videoFilter.h"
-#include "ADM_video/ADM_videoNull.h"
+#include "ADM_videoNull.h"
 
-#include "ADM_osSupport/ADM_debugID.h"
+#include "ADM_debugID.h"
 #define MODULE_NAME MODULE_FILTER
-#include "ADM_osSupport/ADM_debug.h"
+#include "ADM_debug.h"
 
 
 

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/CMakeLists.txt	2009-06-14 20:05:10 UTC (rev 4919)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/CMakeLists.txt	2009-06-14 20:05:13 UTC (rev 4920)
@@ -1,24 +1,20 @@
-ADM_audiocodec
-ADM_audioFilter
-ADM_audioFilter_old
-ADM_codecs
-ADM_commonUI
-ADM_editor
-ADM_filter
-ADM_gettext.cpp
-ADM_imageLoader.cpp
-ADM_infoExtractor
-ADM_libraries
-ADM_mpegIndexer
-ADM_muxerGate
-ADM_ocr
-ADM_osSupport
-ADM_plugin
-ADM_preview.cpp
-ADM_preview.h
-ADM_render
-ADM_requant
-ADM_script
-ADM_toolkit
-ADM_video
-ADM_videoFilter
+ADD_SUBDIRECTORY(ADM_audiocodec)
+ADD_SUBDIRECTORY(ADM_audioFilter)
+ADD_SUBDIRECTORY(ADM_audioFilter_old)
+ADD_SUBDIRECTORY(ADM_codecs)
+ADD_SUBDIRECTORY(ADM_commonUI)
+ADD_SUBDIRECTORY(ADM_editor)
+ADD_SUBDIRECTORY(ADM_filter)
+ADD_SUBDIRECTORY(ADM_infoExtractor)
+ADD_SUBDIRECTORY(ADM_libraries)
+ADD_SUBDIRECTORY(ADM_mpegIndexer)
+ADD_SUBDIRECTORY(ADM_muxerGate)
+ADD_SUBDIRECTORY(ADM_ocr)
+ADD_SUBDIRECTORY(ADM_osSupport)
+ADD_SUBDIRECTORY(ADM_plugin)
+ADD_SUBDIRECTORY(ADM_render)
+ADD_SUBDIRECTORY(ADM_requant)
+ADD_SUBDIRECTORY(ADM_script)
+ADD_SUBDIRECTORY(ADM_toolkit)
+ADD_SUBDIRECTORY(ADM_video)
+ADD_SUBDIRECTORY(ADM_videoFilter)

Modified: branches/avidemux_2.6_branch_mean/avidemux/gtk/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/gtk/CMakeLists.txt	2009-06-14 20:05:10 UTC (rev 4919)
+++ branches/avidemux_2.6_branch_mean/avidemux/gtk/CMakeLists.txt	2009-06-14 20:05:13 UTC (rev 4920)
@@ -59,6 +59,7 @@
 ENDIF (GETTEXT_FOUND)
 INCLUDE_DIRECTORIES("${CMAKE_CURRENT_SOURCE_DIR}/../common/")
 INCLUDE_DIRECTORIES("${CMAKE_CURRENT_SOURCE_DIR}/../common/ADM_audioFilter_old")
+# 
 ##########################################
 # Config
 ##########################################
@@ -108,7 +109,50 @@
 	ADD_ADMLIB_ALL_TARGETS(ADM_nvwa)
 ENDIF (ADM_DEBUG AND FIND_LEAKS)
 
+SET(commonLibs
+ADM_audiocodec 
+ADM_audioFilter_old 
+ADM_editor 
+ADM_filter 
+ADM_osSupport 
+ADM_requant 
+ADM_script 
+ADM_toolkit 
+ADM_video 
+ADM_videoFilter )
+FOREACH (_libName ${commonLibs})
+        TARGET_LINK_LIBRARIES(avidemux2_gtk ${_libName})
+ENDFOREACH (_libName ${commonLibs})
 
+#############################################
+# Add core libs
+#############################################
+SET(coreLibs
+ADM_core
+ADM_audioParser
+ADM_coreAudio
+ADM_coreAudioFilterAPI
+ADM_coreAudioDevice
+ADM_coreAudioEncoder
+ADM_coreDemuxer
+ADM_coreDemuxerMpeg
+ADM_coreImage
+ADM_coreMuxer
+ADM_coreUI
+ADM_coreUtils
+ADM_coreVideoEncoder
+ADM_coreVideoFilter
+ADM_libavcodec
+ADM_libavformat
+ADM_libavutil
+ADM_libswscale
+ADM_libpostproc
+ADM_smjs
+)
+FOREACH (_libName ${coreLibs})
+        TARGET_LINK_LIBRARIES(avidemux2_gtk ${_libName})
+ENDFOREACH (_libName ${commonLibs})
+
 ###########################################
 # External libs
 ###########################################



From mean at mail.berlios.de  Mon Jun 15 19:47:19 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Mon, 15 Jun 2009 19:47:19 +0200
Subject: [Avidemux-svn-commit] r4921 - in
	branches/avidemux_2.6_branch_mean/avidemux: common/ADM_render
	gtk gtk/ADM_userInterfaces gtk/ADM_userInterfaces/ADM_dialog
	gtk/ADM_userInterfaces/ADM_filters gtk/ADM_userInterfaces/ADM_gui2
	gtk/ADM_userInterfaces/ADM_ocr
	gtk/ADM_userInterfaces/ADM_toolkit_gtk
Message-ID: <200906151747.n5FHlJV7014347@sheep.berlios.de>

Author: mean
Date: 2009-06-15 19:47:18 +0200 (Mon, 15 Jun 2009)
New Revision: 4921

Modified:
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_render/GUI_renderInternal.h
   branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/ADM_dialog/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/ADM_dialog/DIA_about.cpp
   branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/ADM_dialog/DIA_calculator.cpp
   branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/ADM_dialog/DIA_encoding.cpp
   branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/ADM_dialog/DIA_properties.cpp
   branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/ADM_dialog/DIA_resize.cpp
   branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/ADM_dialog/DIA_working.cpp
   branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/ADM_filters/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/ADM_gui2/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/ADM_gui2/GUI_bindings.cpp
   branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/ADM_gui2/GUI_gtkRender.cpp
   branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/ADM_ocr/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/ADM_toolkit_gtk/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux/gtk/CMakeLists.txt
Log:
[All] Build gtk

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_render/GUI_renderInternal.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_render/GUI_renderInternal.h	2009-06-14 20:05:13 UTC (rev 4920)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_render/GUI_renderInternal.h	2009-06-15 17:47:18 UTC (rev 4921)
@@ -17,7 +17,7 @@
 #define GUI_RENDER_INTERNAL_H
 
 #define ADM_RENDER_API_VERSION_NUMBER 2
-#include "ADM_userInterfaces/ADM_render/GUI_render.h"
+#include "GUI_render.h"
 typedef struct
 {
   int   apiVersion;

Modified: branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/ADM_dialog/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/ADM_dialog/CMakeLists.txt	2009-06-14 20:05:13 UTC (rev 4920)
+++ branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/ADM_dialog/CMakeLists.txt	2009-06-15 17:47:18 UTC (rev 4921)
@@ -41,5 +41,5 @@
 
 
 )
-ADD_ADM_LIB_GTK_TARGET(${ADM_LIB} ${${ADM_LIB}_SRCS})
-ADD_CFLAGS_GTK_TARGET(${ADM_LIB} ${GTK_CFLAGS} -DADM_SUBVERSION=${ADM_SUBVERSION})
+ADD_LIBRARY(${ADM_LIB} STATIC ${${ADM_LIB}_SRCS})
+ADD_DEFINITIONS( -DADM_SUBVERSION=${ADM_SUBVERSION})

Modified: branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/ADM_dialog/DIA_about.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/ADM_dialog/DIA_about.cpp	2009-06-14 20:05:13 UTC (rev 4920)
+++ branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/ADM_dialog/DIA_about.cpp	2009-06-15 17:47:18 UTC (rev 4921)
@@ -42,12 +42,12 @@
   GdkPixbuf *aboutdialog1_logo_pixbuf;
   // MEANX : PATCH SVN VERSION
   char subversion[1024];
-
+#if 0
   if(!ADM_SUBVERSION)
 	strcpy(subversion,VERSION);
   else
 	sprintf(subversion,"%s (r%04u):",VERSION,ADM_SUBVERSION);
-
+#endif
   aboutdialog1 = gtk_about_dialog_new ();
   gtk_about_dialog_set_version (GTK_ABOUT_DIALOG (aboutdialog1), subversion);
 // /MEANX

Modified: branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/ADM_dialog/DIA_calculator.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/ADM_dialog/DIA_calculator.cpp	2009-06-14 20:05:13 UTC (rev 4920)
+++ branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/ADM_dialog/DIA_calculator.cpp	2009-06-15 17:47:18 UTC (rev 4921)
@@ -29,7 +29,7 @@
 #include "audioeng_buildfilters.h"
 
 
-#include "ADM_video/ADM_vidMisc.h"
+#include "ADM_vidMisc.h"
 #include "avi_vars.h"
 
 void DIA_Calculator(uint32_t *sizeInMeg, uint32_t *avgBitrate );

Modified: branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/ADM_dialog/DIA_encoding.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/ADM_dialog/DIA_encoding.cpp	2009-06-14 20:05:13 UTC (rev 4920)
+++ branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/ADM_dialog/DIA_encoding.cpp	2009-06-15 17:47:18 UTC (rev 4921)
@@ -16,7 +16,7 @@
 #include "avidemutils.h"
 #include "DIA_working.h"
 #include "DIA_encoding.h"
-#include "ADM_video/ADM_vidMisc.h"
+#include "ADM_vidMisc.h"
 
 /**
     \class DIA_encodingGtk

Modified: branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/ADM_dialog/DIA_properties.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/ADM_dialog/DIA_properties.cpp	2009-06-14 20:05:13 UTC (rev 4920)
+++ branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/ADM_dialog/DIA_properties.cpp	2009-06-15 17:47:18 UTC (rev 4921)
@@ -6,7 +6,7 @@
 #include "ADM_toolkitGtk.h"
 
 #include "avidemutils.h"
-#include "ADM_video/ADM_vidMisc.h"
+#include "ADM_vidMisc.h"
 
 #include "avi_vars.h"
 #define FILL_ENTRY(x) gtk_label_set_text((GtkLabel *) lookup_widget(dialog,#x),text);

Modified: branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/ADM_dialog/DIA_resize.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/ADM_dialog/DIA_resize.cpp	2009-06-14 20:05:13 UTC (rev 4920)
+++ branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/ADM_dialog/DIA_resize.cpp	2009-06-15 17:47:18 UTC (rev 4921)
@@ -14,9 +14,9 @@
 #include <math.h>
 
 #include "ADM_toolkitGtk.h"
-#include "ADM_osSupport/ADM_debugID.h"
+#include "ADM_debugID.h"
 #define MODULE_NAME MODULE_UI
-#include "ADM_osSupport/ADM_debug.h"
+#include "ADM_debug.h"
 
 
 #define FILL_ENTRY(widget_name,string) 		{r=-1;   \

Modified: branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/ADM_dialog/DIA_working.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/ADM_dialog/DIA_working.cpp	2009-06-14 20:05:13 UTC (rev 4920)
+++ branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/ADM_dialog/DIA_working.cpp	2009-06-15 17:47:18 UTC (rev 4921)
@@ -23,12 +23,12 @@
 
 #include "ADM_misc.h"
 
-#include "ADM_osSupport/ADM_debugID.h"
+#include "ADM_debugID.h"
 #define MODULE_NAME MODULE_CLOCKnTIMELEFT
-#include "ADM_osSupport/ADM_debug.h"
+#include "ADM_debug.h"
 
 #include "DIA_working.h"
-#include "ADM_video/ADM_vidMisc.h"
+#include "ADM_vidMisc.h"
 
 static GtkWidget	*create_dialog1 (void);
 static void on_work_abort(GtkObject * object, gpointer user_data);

Modified: branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/ADM_filters/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/ADM_filters/CMakeLists.txt	2009-06-14 20:05:13 UTC (rev 4920)
+++ branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/ADM_filters/CMakeLists.txt	2009-06-15 17:47:18 UTC (rev 4921)
@@ -3,5 +3,4 @@
 SET(${ADM_LIB}_SRCS
 	gui_filtermanager.cpp  gui_filtermanager_dialog.cpp)
 
-ADD_ADM_LIB_GTK_TARGET(${ADM_LIB} ${${ADM_LIB}_SRCS})
-ADD_CFLAGS_GTK_TARGET(${ADM_LIB} ${GTK_CFLAGS})
+ADD_LIBRARY(${ADM_LIB} STATIC ${${ADM_LIB}_SRCS})

Modified: branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/ADM_gui2/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/ADM_gui2/CMakeLists.txt	2009-06-14 20:05:13 UTC (rev 4920)
+++ branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/ADM_gui2/CMakeLists.txt	2009-06-15 17:47:18 UTC (rev 4921)
@@ -7,6 +7,5 @@
 	SET(${ADM_LIB}_SRCS ${${ADM_LIB}_SRCS} GUI_gtkRenderHelper.m)
 ENDIF (APPLE)
 
-ADD_ADM_LIB_GTK_TARGET(${ADM_LIB} ${${ADM_LIB}_SRCS})
-ADD_CFLAGS_GTK_TARGET(${ADM_LIB} ${GTK_CFLAGS})
+ADD_LIBRARY(${ADM_LIB} STATIC  ${${ADM_LIB}_SRCS})
 ADD_DEFINITIONS("-DTARGET_DIR='\"${CMAKE_INSTALL_PREFIX}/lib/ADM_glade/\"' -DSOURCE_DIR='\"${CMAKE_CURRENT_SOURCE_DIR}\"'")

Modified: branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/ADM_gui2/GUI_bindings.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/ADM_gui2/GUI_bindings.cpp	2009-06-14 20:05:13 UTC (rev 4920)
+++ branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/ADM_gui2/GUI_bindings.cpp	2009-06-15 17:47:18 UTC (rev 4921)
@@ -20,9 +20,9 @@
 #include "../ADM_render/GUI_render.h"
 #include "gui_action.hxx"
 
-#include "ADM_osSupport/ADM_debugID.h"
+#include "ADM_debugID.h"
 #define MODULE_NAME MODULE_UI
-#include "ADM_osSupport/ADM_debug.h"
+#include "ADM_debug.h"
 
 #include "ADM_codecs/ADM_codec.h"
 #include "../ADM_commonUI/GUI_ui.h"
@@ -36,8 +36,8 @@
 #include "../ADM_toolkit_gtk/ADM_jogshuttle.h"
 #include "gtkgui.h"
 #include "DIA_coreToolkit.h"
-#include "ADM_userInterfaces/ADM_render/GUI_renderInternal.h"
-#include "ADM_video/ADM_vidMisc.h"
+#include "ADM_render/GUI_renderInternal.h"
+#include "ADM_vidMisc.h"
 #include "GUI_glade.h"
 
 extern uint8_t UI_getPhysicalScreenSize(void* window, uint32_t *w,uint32_t *h);

Modified: branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/ADM_gui2/GUI_gtkRender.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/ADM_gui2/GUI_gtkRender.cpp	2009-06-14 20:05:13 UTC (rev 4920)
+++ branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/ADM_gui2/GUI_gtkRender.cpp	2009-06-15 17:47:18 UTC (rev 4921)
@@ -36,7 +36,7 @@
 #include "../ADM_render/GUI_accelRender.h"
 
 #include "ADM_colorspace.h"
-#include "ADM_libraries/ADM_ffmpeg/libswscale/ADM_mp.h"
+#include "ADM_ffmpeg/libswscale/ADM_mp.h"
 
 void GUI_gtk_grow_off(int onff);
 

Modified: branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/ADM_ocr/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/ADM_ocr/CMakeLists.txt	2009-06-14 20:05:13 UTC (rev 4920)
+++ branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/ADM_ocr/CMakeLists.txt	2009-06-15 17:47:18 UTC (rev 4921)
@@ -4,5 +4,4 @@
 	adm_ocr.cpp
 	adm_editglyph.cpp)
 
-ADD_ADM_LIB_GTK_TARGET(${ADM_LIB} ${${ADM_LIB}_SRCS})
-ADD_CFLAGS_GTK_TARGET(${ADM_LIB} ${GTK_CFLAGS})
\ No newline at end of file
+ADD_LIBRARY(${ADM_LIB} STATIC  ${${ADM_LIB}_SRCS})

Modified: branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/ADM_toolkit_gtk/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/ADM_toolkit_gtk/CMakeLists.txt	2009-06-14 20:05:13 UTC (rev 4920)
+++ branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/ADM_toolkit_gtk/CMakeLists.txt	2009-06-15 17:47:18 UTC (rev 4921)
@@ -7,5 +7,4 @@
 
 )
 
-ADD_ADM_LIB_GTK_TARGET(${ADM_LIB} ${${ADM_LIB}_SRCS})
-ADD_CFLAGS_GTK_TARGET(${ADM_LIB} ${GTK_CFLAGS})
+ADD_LIBRARY(${ADM_LIB} STATIC ${${ADM_LIB}_SRCS})

Modified: branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/CMakeLists.txt	2009-06-14 20:05:13 UTC (rev 4920)
+++ branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/CMakeLists.txt	2009-06-15 17:47:18 UTC (rev 4921)
@@ -1,9 +1,10 @@
+include(${CMAKE_CURRENT_SOURCE_DIR}/../gtkIncludes.cmake)
+
 SET(ADM_LIB ADM_UI_GTK)
 SET(${ADM_LIB}_SRCS ui_support.cpp)
 
-ADD_ADM_LIB_GTK_TARGET(${ADM_LIB} ${${ADM_LIB}_SRCS})
-ADD_CFLAGS_GTK_TARGET(${ADM_LIB} ${GTK_CFLAGS})
-INCLUDE_DIRECTORIES(${CMAKE_CURRENT_SOURCE_DIR}/../../ADM_UIs/ADM_GTK/include)
+ADD_LIBRARY(${ADM_LIB} STATIC ${${ADM_LIB}_SRCS})
+ADD_DEFINITIONS(${GTK_CFLAGS})
 
 ADD_SUBDIRECTORY(ADM_dialog)
 ADD_SUBDIRECTORY(ADM_filters)

Modified: branches/avidemux_2.6_branch_mean/avidemux/gtk/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/gtk/CMakeLists.txt	2009-06-14 20:05:13 UTC (rev 4920)
+++ branches/avidemux_2.6_branch_mean/avidemux/gtk/CMakeLists.txt	2009-06-15 17:47:18 UTC (rev 4921)
@@ -15,6 +15,7 @@
 ########################################
 ADD_DEFINITIONS(-D_FILE_OFFSET_BITS=64 -D_LARGE_FILES)
 ADD_DEFINITIONS(-DHAVE_CONFIG_H)
+ADD_DEFINITIONS(-DADM_UI_TYPE_BUILD=ADM_UI_GTK)
 ########################################
 # Where is the config.h dir
 ########################################
@@ -59,6 +60,7 @@
 ENDIF (GETTEXT_FOUND)
 INCLUDE_DIRECTORIES("${CMAKE_CURRENT_SOURCE_DIR}/../common/")
 INCLUDE_DIRECTORIES("${CMAKE_CURRENT_SOURCE_DIR}/../common/ADM_audioFilter_old")
+INCLUDE_DIRECTORIES("${CMAKE_CURRENT_SOURCE_DIR}/../common/ADM_commonUI")
 # 
 ##########################################
 # Config
@@ -74,8 +76,8 @@
 # Add subdirectories 
 ########################################
 ADD_SUBDIRECTORY(../common ./common)
-ADD_SUBDIRECTORY(ADM_UIs)
-ADD_SUBDIRECTORY(ADM_userInterfaces)
+ADD_SUBDIRECTORY(ADM_UIs ./ADM_UIsGtk)
+ADD_SUBDIRECTORY(ADM_userInterfaces ./ADM_userInterfacesGtk)
 #
 # Add main source
 #
@@ -102,7 +104,7 @@
 SDLify(../common/main.cpp)
 ADD_SOURCE_CFLAGS(../common/main.cpp "-DADM_SUBVERSION=${ADM_SUBVERSION}")
 ###########################################
-# Construct ADM_libraries
+# Construct common libraries
 ###########################################
 
 IF (ADM_DEBUG AND FIND_LEAKS)
@@ -153,6 +155,16 @@
         TARGET_LINK_LIBRARIES(avidemux2_gtk ${_libName})
 ENDFOREACH (_libName ${commonLibs})
 
+#############################################
+# Add gtk specific libs
+#############################################
+TARGET_LINK_LIBRARIES(avidemux2_gtk ADM_UIGtk)
+TARGET_LINK_LIBRARIES(avidemux2_gtk ADM_dialogGtk)
+TARGET_LINK_LIBRARIES(avidemux2_gtk ADM_filtersGtk)
+TARGET_LINK_LIBRARIES(avidemux2_gtk ADM_gui2Gtk)
+TARGET_LINK_LIBRARIES(avidemux2_gtk ADM_ocrGtk)
+TARGET_LINK_LIBRARIES(avidemux2_gtk ADM_toolkitGtk)
+
 ###########################################
 # External libs
 ###########################################



From mean at mail.berlios.de  Mon Jun 15 19:47:22 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Mon, 15 Jun 2009 19:47:22 +0200
Subject: [Avidemux-svn-commit] r4922 - in branches/avidemux_2.6_branch_mean:
	avidemux/common avidemux/common/ADM_audioFilter/src
	avidemux/common/ADM_videoEncoder
	avidemux/common/ADM_videoFilter2 avidemux/gtk
	avidemux_core/ADM_coreVideoEncoder/src
	avidemux_core/ADM_coreVideoFilter/src cmake
Message-ID: <200906151747.n5FHlM0T014362@sheep.berlios.de>

Author: mean
Date: 2009-06-15 19:47:21 +0200 (Mon, 15 Jun 2009)
New Revision: 4922

Added:
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoEncoder/
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoEncoder/ADM_VideoEncoders.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoEncoder/ADM_dynVideoEncoder.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoEncoder/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoFilter2/
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoFilter2/ADM_filterChain.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoFilter2/ADM_videoFilterBridge.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoFilter2/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux/gtk/gtkIncludes.cmake
   branches/avidemux_2.6_branch_mean/cmake/admCoreIncludes.cmake
Removed:
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoEncoder/src/ADM_VideoEncoders.cpp
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoEncoder/src/ADM_dynVideoEncoder.cpp
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoFilter/src/ADM_filterChain.cpp
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoFilter/src/ADM_videoFilterBridge.cpp
Modified:
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_audioFilter/src/audiofilter_bridge.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux/gtk/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoEncoder/src/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoFilter/src/CMakeLists.txt
Log:
[Build] Gtk (follow up)

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_audioFilter/src/audiofilter_bridge.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_audioFilter/src/audiofilter_bridge.cpp	2009-06-15 17:47:18 UTC (rev 4921)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_audioFilter/src/audiofilter_bridge.cpp	2009-06-15 17:47:21 UTC (rev 4922)
@@ -19,9 +19,9 @@
 #include "ADM_audioFilter.h"
 #include "audiofilter_bridge.h"
 
-#include "ADM_osSupport/ADM_debugID.h"
+#include "ADM_debugID.h"
 #define MODULE_NAME MODULE_AUDIO_FILTER
-#include "ADM_osSupport/ADM_debug.h"
+#include "ADM_debug.h"
 
 /**
     \fn AUDMAudioFilter_Bridge

Copied: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoEncoder/ADM_VideoEncoders.cpp (from rev 4921, branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoEncoder/src/ADM_VideoEncoders.cpp)
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoEncoder/src/ADM_VideoEncoders.cpp	2009-06-15 17:47:18 UTC (rev 4921)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoEncoder/ADM_VideoEncoders.cpp	2009-06-15 17:47:21 UTC (rev 4922)
@@ -0,0 +1,21 @@
+/***************************************************************************
+                          \fn ADM_VideoEncoders
+                          \brief Internal handling of video encoders
+                             -------------------
+    
+    copyright            : (C) 2002/2009 by mean
+    email                : fixounet at free.fr
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+#include "ADM_default.h"
+#include "ADM_coreVideoEncoder.h"
+#include "ADM_filterChain.h"
+// EOF

Copied: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoEncoder/ADM_dynVideoEncoder.cpp (from rev 4921, branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoEncoder/src/ADM_dynVideoEncoder.cpp)
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoEncoder/src/ADM_dynVideoEncoder.cpp	2009-06-15 17:47:18 UTC (rev 4921)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoEncoder/ADM_dynVideoEncoder.cpp	2009-06-15 17:47:21 UTC (rev 4922)
@@ -0,0 +1,251 @@
+/***************************************************************************
+                             ADM_dynVideoEncoder.cpp
+
+    begin                : Mon Apr 14 2008
+    copyright            : (C) 2008 2009 by gruntster/mean
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+
+
+#include "ADM_default.h"
+#include <vector>
+
+#include "DIA_fileSel.h"
+
+#include "ADM_coreVideoEncoder.h"
+#include "ADM_coreVideoEncoderInternal.h"
+#include "DIA_uiTypes.h"
+#include "ADM_dynamicLoading.h"
+
+static int currentVideoCodec=0;
+/**
+    \class ADM_videoEncoder6
+    \brief Plugin Wrapper Class
+
+*/
+class ADM_videoEncoder6 :public ADM_LibWrapper
+{
+public:
+        int                  initialised;
+        ADM_videoEncoderDesc *desc;
+        ADM_videoEncoderDesc  *(*getInfo)();
+        ADM_videoEncoder6(const char *file) : ADM_LibWrapper()
+        {
+			initialised = (loadLibrary(file) && getSymbols(1,
+				&getInfo, "getInfo"));
+                if(initialised)
+                {
+                    desc=getInfo();
+                    printf("[videoEncoder6]Name :%s ApiVersion :%d Description :%s\n",
+                                                        desc->encoderName,
+                                                        desc->apiVersion,
+                                                        desc->description);
+                }else
+                {
+                    printf("[videoEncoder6]Symbol loading failed for %s\n",file);
+                }
+        }
+};
+
+std::vector <ADM_videoEncoder6 *> ListOfEncoders;
+// 
+ADM_videoEncoderDesc copyDesc={
+        "Copy",
+        "Copy",
+        "Copy encoder",
+        ADM_VIDEO_ENCODER_API_VERSION, //uint32_t     apiVersion;            // const
+
+        NULL, //ADM_coreVideoEncoder *(*create)(ADM_coreVideoFilter *head);  
+        NULL, //void         (*destroy)(ADM_coreVideoEncoder *codec);
+        NULL, //bool         (*configure)(void);                                // Call UI to set it up
+        NULL, //bool         (*getConfigurationData)(uint32_t *l, uint8_t **d); // Get the encoder private conf
+        NULL, //bool         (*setConfigurationData)(uint32_t l, uint8_t *d);   // Set the encoder private conf
+
+        ADM_UI_ALL, //ADM_UI_TYPE  UIType;                // Type of UI
+        1,0,0, //uint32_t     major,minor,patch;     // Version of the plugin
+        NULL  //void         *opaque;               // Hide stuff in here
+};
+
+/**
+        \fn ADM_ve6_getNbEncoders
+        \brief Returns the number of demuxers plugins except one
+*/
+uint32_t ADM_ve6_getNbEncoders(void)
+{
+    return ListOfEncoders.size();
+}
+/**
+    \fn     ADM_ve6_getEncoderInfo
+    \brief  Get Infos about the demuxer #th plugin
+*/
+bool     ADM_ve6_getEncoderInfo(int filter, const char **name, uint32_t *major,uint32_t *minor,uint32_t *patch)
+{
+    ADM_assert(filter<ListOfEncoders.size());
+    ADM_videoEncoderDesc *desc=ListOfEncoders[filter]->desc;
+    ADM_assert(desc);
+    *name=desc->menuName;
+    *major=desc->major;
+    *minor=desc->minor;
+    *patch=desc->patch;
+    return true;
+}
+/**
+    \fn tryLoadingFilterPlugin
+    \brief Try loading the file given as argument as an audio device plugin
+
+*/
+#define Fail(x) {printf("%s:"#x"\n",file);goto er;}
+static bool tryLoadingEncoderPlugin(const char *file)
+{
+	ADM_videoEncoder6 *dll=new ADM_videoEncoder6(file);
+    if(!dll->initialised) Fail(CannotLoad);
+    if(dll->desc->apiVersion!=ADM_VIDEO_ENCODER_API_VERSION) Fail(WrongApiVersion);
+//fixme todo also check uiType    
+    ListOfEncoders.push_back(dll); // Needed for cleanup. FIXME TODO Delete it.
+    printf("[VideoEncoder6] Registered filter %s as  %s\n",file,dll->desc->description);
+    return true;
+	// Fail!
+er:
+	delete dll;
+	return false;
+
+}
+/**
+ * 	\fn ADM_ve6_loadPlugins
+ *  \brief load all audio device plugins
+ */
+uint8_t ADM_ve6_loadPlugins(const char *path)
+{
+#define MAX_EXTERNAL_FILTER 100
+// FIXME Factorize
+
+	char *files[MAX_EXTERNAL_FILTER];
+	uint32_t nbFile;
+
+	memset(files,0,sizeof(char *)*MAX_EXTERNAL_FILTER);
+	printf("[ADM_ve6_plugin] Scanning directory %s\n",path);
+
+	if(!buildDirectoryContent(&nbFile, path, files, MAX_EXTERNAL_FILTER, SHARED_LIB_EXT))
+	{
+		printf("[ADM_ve6_plugin] Cannot parse plugin\n");
+		return 0;
+	}
+    // Add our copy encoder....
+    ADM_videoEncoder6 *dll=new ADM_videoEncoder6("copyADM");
+    dll->desc=&copyDesc;
+    ListOfEncoders.push_back(dll);
+
+	for(int i=0;i<nbFile;i++)
+		tryLoadingEncoderPlugin(files[i]);
+    
+	printf("[ADM_ve6_plugin] Scanning done\n");
+
+	return 1;
+}
+/**
+        \fn ADM_ve6_cleanup
+        \brief Current device is no longer used, delete
+*/
+void ADM_ve6_cleanup(void)
+{
+        int nb=ListOfEncoders.size();
+        for(int i=0;i<nb;i++)
+                {
+                        if(ListOfEncoders[i]) delete ListOfEncoders[i];
+                        ListOfEncoders[i]=NULL;
+                }
+}
+
+/**
+    \fn ADM_ve6_getMenuName
+    \brief IT starts from 0, ignoring the copy one
+*/
+const char *ADM_ve6_getMenuName(uint32_t i)
+{
+	 int nb=ListOfEncoders.size();
+
+	ADM_assert(i < nb);
+
+	return ListOfEncoders[i]->desc->menuName;
+}
+/**
+    \fn ADM_ve6_Changed
+*/
+void ADM_ve6_Changed(int newCodecIndex)
+{
+	int nb=ListOfEncoders.size();
+	ADM_assert(newCodecIndex < nb);
+
+	currentVideoCodec=newCodecIndex;
+}
+
+
+/**
+    \fn createVideoEncoder
+*/
+ADM_coreVideoEncoder *createVideoEncoderFromIndex(ADM_coreVideoFilter *chain,int index)
+{
+    int nb=ListOfEncoders.size();
+	ADM_assert(index < nb);
+    ADM_assert(index); // 0 is for copy, should not get it through here
+    ADM_videoEncoder6 *plugin=ListOfEncoders[index];
+
+    ADM_coreVideoEncoder *enc=plugin->desc->create(chain);
+    if(enc)
+    {
+        if(false==enc->setup())
+        {
+            printf("[createVideoEncoderFromIndex] Cannot setup encoder\n");
+            delete enc;
+            return NULL;
+        }
+    }
+    return enc;
+}
+/**
+    \fn videoEncoder6SelectByName
+*/
+bool videoEncoder6SelectByName(const char *name)
+{
+    int nb=ListOfEncoders.size();
+    for(int i=0;i<nb;i++)
+    {
+        ADM_videoEncoderDesc *desc=ListOfEncoders[i]->desc;
+        if(!strcasecmp(name,desc->encoderName))
+        {
+            currentVideoCodec=i;
+            return true;
+        }
+    }
+    return false;
+}
+/**
+    \fn videoEncoder6Configure
+
+*/
+bool                  videoEncoder6Configure(void)
+{
+    ADM_videoEncoderDesc *desc=ListOfEncoders[currentVideoCodec]->desc;
+    if(desc->configure) return desc->configure();
+    return true;
+}
+/**
+    \fn videoEncoder6_SetCurrentEncoder
+
+*/
+bool                  videoEncoder6_SetCurrentEncoder(uint32_t index)
+{
+      int nb=ListOfEncoders.size();
+      if(index>=nb) return false;
+      currentVideoCodec=index;
+      return true;
+}
+//EOF

Added: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoEncoder/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoEncoder/CMakeLists.txt	2009-06-15 17:47:18 UTC (rev 4921)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoEncoder/CMakeLists.txt	2009-06-15 17:47:21 UTC (rev 4922)
@@ -0,0 +1,5 @@
+SET(ADM_internalVideoEncoder_SRCS 
+	ADM_VideoEncoders.cpp
+        ADM_dynVideoEncoder.cpp
+)
+ADD_LIBRARY(ADM_videoEncoder STATIC ${ADM_internalVideoEncoder_SRCS})

Copied: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoFilter2/ADM_filterChain.cpp (from rev 4921, branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoFilter/src/ADM_filterChain.cpp)
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoFilter/src/ADM_filterChain.cpp	2009-06-15 17:47:18 UTC (rev 4921)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoFilter2/ADM_filterChain.cpp	2009-06-15 17:47:21 UTC (rev 4922)
@@ -0,0 +1,50 @@
+/***************************************************************************
+                          \fn ADM_filterChain.cpp
+                          \brief Base class for Video Filters
+                           (c) Mean 2009
+
+
+
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+#include "ADM_default.h"
+#include "ADM_coreVideoFilter.h"
+#include "ADM_filterChain.h"
+#include "ADM_videoFilterBridge.h"
+/**
+    \fn createVideoFilterChain
+    \brief Create a filter chain
+*/
+ADM_videoFilterChain *createVideoFilterChain(uint64_t startAt,uint64_t endAt)
+{
+    ADM_videoFilterChain *chain=new ADM_videoFilterChain;
+    // 1- Add bridge always # 1
+    ADM_videoFilterBridge *bridge=new ADM_videoFilterBridge(startAt,endAt);
+    chain->push_back(bridge);
+    return chain;
+}
+/**
+        \fn destroyVideoFilterChain
+        \brief Destroy a filter chain
+*/
+bool                 destroyVideoFilterChain(ADM_videoFilterChain *chain)
+{
+    ADM_assert(chain->size());
+    for(int i=0;i<chain->size();i++)
+    {
+        ADM_coreVideoFilter *filter=(*chain)[i];
+        delete filter;
+    }
+    chain->erase(chain->begin(),chain->end()-1);
+    return true;
+}
+
+// EOF

Copied: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoFilter2/ADM_videoFilterBridge.cpp (from rev 4921, branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoFilter/src/ADM_videoFilterBridge.cpp)
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoFilter/src/ADM_videoFilterBridge.cpp	2009-06-15 17:47:18 UTC (rev 4921)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoFilter2/ADM_videoFilterBridge.cpp	2009-06-15 17:47:21 UTC (rev 4922)
@@ -0,0 +1,93 @@
+/***************************************************************************
+                          \fn ADM_videoFilterBridge
+                          \brief Interface between editor & filter chain
+                           (c) Mean 2009
+
+
+
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+
+#include "ADM_default.h"
+#include "ADM_videoFilterBridge.h"
+#include "ADM_editor/ADM_edit.hxx"
+extern ADM_Composer *video_body;
+/**
+    \fn ADM_videoFilterBridge
+
+*/
+ADM_videoFilterBridge::ADM_videoFilterBridge(uint64_t startTime, uint64_t endTime) : ADM_coreVideoFilter(NULL,NULL)
+{
+    printf("[VideoFilterBridge] Creating bridge from %"LU" s to %"LU" s\n",(uint32_t)(startTime/1000000LL),(uint32_t)(endTime/1000000LL));
+    this->startTime=startTime;
+    this->endTime=endTime;
+    
+    aviInfo fo;
+    video_body->getVideoInfo(&fo);
+    bridgeInfo.width=fo.width;
+    bridgeInfo.height=fo.height;
+    bridgeInfo.frameIncrement=video_body->getFrameIncrement();
+    bridgeInfo.totalDuration=video_body->getVideoDuration();
+    bridgeInfo.frameIncrement=video_body->getFrameIncrement();
+    rewind();
+}
+/**
+    \fn rewind
+    \brief go or return to the original position...
+*/
+bool ADM_videoFilterBridge::rewind(void)
+{
+    video_body->GoToTime(startTime);
+    return true;
+}
+
+/**
+    \fn ADM_videoFilterBridge
+
+*/
+ADM_videoFilterBridge::~ADM_videoFilterBridge()
+{
+
+}
+/**
+    \fn getNextFrame
+    \brief
+*/
+bool         ADM_videoFilterBridge::getNextFrame(ADMImage *image)
+{
+again:
+    bool r=   video_body->NextPicture(image);
+    if(r==false) return false;
+    // Translate pts if any
+    int64_t pts=image->Pts;
+    if(pts>endTime)
+    {
+        printf("[VideoBridge] This frame is too late (%"LU" vs %"LU")\n",pts,startTime);
+        return false;
+    }
+    if(pts<startTime) 
+    {
+            printf("[VideoBridge] This frame is too early (%"LU" vs %"LU")\n",pts,endTime);
+            goto again;
+    }
+    // Rescale time
+    image->Pts-=startTime;
+    return true;
+}
+/**
+    \fn ADM_videoFilterBridge
+
+*/
+FilterInfo  *ADM_videoFilterBridge::getInfo(void)
+{
+    return &bridgeInfo;
+}
+// EOF

Added: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoFilter2/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoFilter2/CMakeLists.txt	2009-06-15 17:47:18 UTC (rev 4921)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoFilter2/CMakeLists.txt	2009-06-15 17:47:21 UTC (rev 4922)
@@ -0,0 +1,5 @@
+SET(ADM_internalVideoFilter_SRCS 
+	ADM_videoFilterBridge.cpp
+        ADM_filterChain.cpp
+)
+ADD_LIBRARY(ADM_internalVideoFilter STATIC ${ADM_internalVideoFilter_SRCS})

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/CMakeLists.txt	2009-06-15 17:47:18 UTC (rev 4921)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/CMakeLists.txt	2009-06-15 17:47:21 UTC (rev 4922)
@@ -18,3 +18,5 @@
 ADD_SUBDIRECTORY(ADM_toolkit)
 ADD_SUBDIRECTORY(ADM_video)
 ADD_SUBDIRECTORY(ADM_videoFilter)
+ADD_SUBDIRECTORY(ADM_videoEncoder)
+ADD_SUBDIRECTORY(ADM_videoFilter2)

Modified: branches/avidemux_2.6_branch_mean/avidemux/gtk/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/gtk/CMakeLists.txt	2009-06-15 17:47:18 UTC (rev 4921)
+++ branches/avidemux_2.6_branch_mean/avidemux/gtk/CMakeLists.txt	2009-06-15 17:47:21 UTC (rev 4922)
@@ -113,6 +113,7 @@
 
 SET(commonLibs
 ADM_audiocodec 
+ADM_audioFilter
 ADM_audioFilter_old 
 ADM_editor 
 ADM_filter 
@@ -120,8 +121,11 @@
 ADM_requant 
 ADM_script 
 ADM_toolkit 
+ADM_videoEncoder 
 ADM_video 
-ADM_videoFilter )
+ADM_videoFilter 
+ADM_internalVideoFilter
+)
 FOREACH (_libName ${commonLibs})
         TARGET_LINK_LIBRARIES(avidemux2_gtk ${_libName})
 ENDFOREACH (_libName ${commonLibs})
@@ -164,7 +168,7 @@
 TARGET_LINK_LIBRARIES(avidemux2_gtk ADM_gui2Gtk)
 TARGET_LINK_LIBRARIES(avidemux2_gtk ADM_ocrGtk)
 TARGET_LINK_LIBRARIES(avidemux2_gtk ADM_toolkitGtk)
-
+TARGET_LINK_LIBRARIES(avidemux2_gtk ADM_UI_GTK)
 ###########################################
 # External libs
 ###########################################

Added: branches/avidemux_2.6_branch_mean/avidemux/gtk/gtkIncludes.cmake
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/gtk/gtkIncludes.cmake	2009-06-15 17:47:18 UTC (rev 4921)
+++ branches/avidemux_2.6_branch_mean/avidemux/gtk/gtkIncludes.cmake	2009-06-15 17:47:21 UTC (rev 4922)
@@ -0,0 +1,2 @@
+include_directories(${AVIDEMUX_TOP_SOURCE_DIR}/avidemux/gtk/ADM_userInterfaces/ADM_toolkitGtk)
+include_directories(${AVIDEMUX_TOP_SOURCE_DIR}/avidemux/gtk/ADM_UIs/include)

Deleted: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoEncoder/src/ADM_VideoEncoders.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoEncoder/src/ADM_VideoEncoders.cpp	2009-06-15 17:47:18 UTC (rev 4921)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoEncoder/src/ADM_VideoEncoders.cpp	2009-06-15 17:47:21 UTC (rev 4922)
@@ -1,21 +0,0 @@
-/***************************************************************************
-                          \fn ADM_VideoEncoders
-                          \brief Internal handling of video encoders
-                             -------------------
-    
-    copyright            : (C) 2002/2009 by mean
-    email                : fixounet at free.fr
- ***************************************************************************/
-
-/***************************************************************************
- *                                                                         *
- *   This program is free software; you can redistribute it and/or modify  *
- *   it under the terms of the GNU General Public License as published by  *
- *   the Free Software Foundation; either version 2 of the License, or     *
- *   (at your option) any later version.                                   *
- *                                                                         *
- ***************************************************************************/
-#include "ADM_default.h"
-#include "ADM_coreVideoEncoder.h"
-#include "ADM_filterChain.h"
-// EOF

Deleted: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoEncoder/src/ADM_dynVideoEncoder.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoEncoder/src/ADM_dynVideoEncoder.cpp	2009-06-15 17:47:18 UTC (rev 4921)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoEncoder/src/ADM_dynVideoEncoder.cpp	2009-06-15 17:47:21 UTC (rev 4922)
@@ -1,251 +0,0 @@
-/***************************************************************************
-                             ADM_dynVideoEncoder.cpp
-
-    begin                : Mon Apr 14 2008
-    copyright            : (C) 2008 2009 by gruntster/mean
- ***************************************************************************/
-
-/***************************************************************************
- *                                                                         *
- *   This program is free software; you can redistribute it and/or modify  *
- *   it under the terms of the GNU General Public License as published by  *
- *   the Free Software Foundation; either version 2 of the License, or     *
- *   (at your option) any later version.                                   *
- *                                                                         *
- ***************************************************************************/
-
-
-#include "ADM_default.h"
-#include <vector>
-
-#include "DIA_fileSel.h"
-
-#include "ADM_coreVideoEncoder.h"
-#include "ADM_coreVideoEncoderInternal.h"
-#include "DIA_uiTypes.h"
-#include "ADM_dynamicLoading.h"
-
-static int currentVideoCodec=0;
-/**
-    \class ADM_videoEncoder6
-    \brief Plugin Wrapper Class
-
-*/
-class ADM_videoEncoder6 :public ADM_LibWrapper
-{
-public:
-        int                  initialised;
-        ADM_videoEncoderDesc *desc;
-        ADM_videoEncoderDesc  *(*getInfo)();
-        ADM_videoEncoder6(const char *file) : ADM_LibWrapper()
-        {
-			initialised = (loadLibrary(file) && getSymbols(1,
-				&getInfo, "getInfo"));
-                if(initialised)
-                {
-                    desc=getInfo();
-                    printf("[videoEncoder6]Name :%s ApiVersion :%d Description :%s\n",
-                                                        desc->encoderName,
-                                                        desc->apiVersion,
-                                                        desc->description);
-                }else
-                {
-                    printf("[videoEncoder6]Symbol loading failed for %s\n",file);
-                }
-        }
-};
-
-std::vector <ADM_videoEncoder6 *> ListOfEncoders;
-// 
-ADM_videoEncoderDesc copyDesc={
-        "Copy",
-        "Copy",
-        "Copy encoder",
-        ADM_VIDEO_ENCODER_API_VERSION, //uint32_t     apiVersion;            // const
-
-        NULL, //ADM_coreVideoEncoder *(*create)(ADM_coreVideoFilter *head);  
-        NULL, //void         (*destroy)(ADM_coreVideoEncoder *codec);
-        NULL, //bool         (*configure)(void);                                // Call UI to set it up
-        NULL, //bool         (*getConfigurationData)(uint32_t *l, uint8_t **d); // Get the encoder private conf
-        NULL, //bool         (*setConfigurationData)(uint32_t l, uint8_t *d);   // Set the encoder private conf
-
-        ADM_UI_ALL, //ADM_UI_TYPE  UIType;                // Type of UI
-        1,0,0, //uint32_t     major,minor,patch;     // Version of the plugin
-        NULL  //void         *opaque;               // Hide stuff in here
-};
-
-/**
-        \fn ADM_ve6_getNbEncoders
-        \brief Returns the number of demuxers plugins except one
-*/
-uint32_t ADM_ve6_getNbEncoders(void)
-{
-    return ListOfEncoders.size();
-}
-/**
-    \fn     ADM_ve6_getEncoderInfo
-    \brief  Get Infos about the demuxer #th plugin
-*/
-bool     ADM_ve6_getEncoderInfo(int filter, const char **name, uint32_t *major,uint32_t *minor,uint32_t *patch)
-{
-    ADM_assert(filter<ListOfEncoders.size());
-    ADM_videoEncoderDesc *desc=ListOfEncoders[filter]->desc;
-    ADM_assert(desc);
-    *name=desc->menuName;
-    *major=desc->major;
-    *minor=desc->minor;
-    *patch=desc->patch;
-    return true;
-}
-/**
-    \fn tryLoadingFilterPlugin
-    \brief Try loading the file given as argument as an audio device plugin
-
-*/
-#define Fail(x) {printf("%s:"#x"\n",file);goto er;}
-static bool tryLoadingEncoderPlugin(const char *file)
-{
-	ADM_videoEncoder6 *dll=new ADM_videoEncoder6(file);
-    if(!dll->initialised) Fail(CannotLoad);
-    if(dll->desc->apiVersion!=ADM_VIDEO_ENCODER_API_VERSION) Fail(WrongApiVersion);
-//fixme todo also check uiType    
-    ListOfEncoders.push_back(dll); // Needed for cleanup. FIXME TODO Delete it.
-    printf("[VideoEncoder6] Registered filter %s as  %s\n",file,dll->desc->description);
-    return true;
-	// Fail!
-er:
-	delete dll;
-	return false;
-
-}
-/**
- * 	\fn ADM_ve6_loadPlugins
- *  \brief load all audio device plugins
- */
-uint8_t ADM_ve6_loadPlugins(const char *path)
-{
-#define MAX_EXTERNAL_FILTER 100
-// FIXME Factorize
-
-	char *files[MAX_EXTERNAL_FILTER];
-	uint32_t nbFile;
-
-	memset(files,0,sizeof(char *)*MAX_EXTERNAL_FILTER);
-	printf("[ADM_ve6_plugin] Scanning directory %s\n",path);
-
-	if(!buildDirectoryContent(&nbFile, path, files, MAX_EXTERNAL_FILTER, SHARED_LIB_EXT))
-	{
-		printf("[ADM_ve6_plugin] Cannot parse plugin\n");
-		return 0;
-	}
-    // Add our copy encoder....
-    ADM_videoEncoder6 *dll=new ADM_videoEncoder6("copyADM");
-    dll->desc=&copyDesc;
-    ListOfEncoders.push_back(dll);
-
-	for(int i=0;i<nbFile;i++)
-		tryLoadingEncoderPlugin(files[i]);
-    
-	printf("[ADM_ve6_plugin] Scanning done\n");
-
-	return 1;
-}
-/**
-        \fn ADM_ve6_cleanup
-        \brief Current device is no longer used, delete
-*/
-void ADM_ve6_cleanup(void)
-{
-        int nb=ListOfEncoders.size();
-        for(int i=0;i<nb;i++)
-                {
-                        if(ListOfEncoders[i]) delete ListOfEncoders[i];
-                        ListOfEncoders[i]=NULL;
-                }
-}
-
-/**
-    \fn ADM_ve6_getMenuName
-    \brief IT starts from 0, ignoring the copy one
-*/
-const char *ADM_ve6_getMenuName(uint32_t i)
-{
-	 int nb=ListOfEncoders.size();
-
-	ADM_assert(i < nb);
-
-	return ListOfEncoders[i]->desc->menuName;
-}
-/**
-    \fn ADM_ve6_Changed
-*/
-void ADM_ve6_Changed(int newCodecIndex)
-{
-	int nb=ListOfEncoders.size();
-	ADM_assert(newCodecIndex < nb);
-
-	currentVideoCodec=newCodecIndex;
-}
-
-
-/**
-    \fn createVideoEncoder
-*/
-ADM_coreVideoEncoder *createVideoEncoderFromIndex(ADM_coreVideoFilter *chain,int index)
-{
-    int nb=ListOfEncoders.size();
-	ADM_assert(index < nb);
-    ADM_assert(index); // 0 is for copy, should not get it through here
-    ADM_videoEncoder6 *plugin=ListOfEncoders[index];
-
-    ADM_coreVideoEncoder *enc=plugin->desc->create(chain);
-    if(enc)
-    {
-        if(false==enc->setup())
-        {
-            printf("[createVideoEncoderFromIndex] Cannot setup encoder\n");
-            delete enc;
-            return NULL;
-        }
-    }
-    return enc;
-}
-/**
-    \fn videoEncoder6SelectByName
-*/
-bool videoEncoder6SelectByName(const char *name)
-{
-    int nb=ListOfEncoders.size();
-    for(int i=0;i<nb;i++)
-    {
-        ADM_videoEncoderDesc *desc=ListOfEncoders[i]->desc;
-        if(!strcasecmp(name,desc->encoderName))
-        {
-            currentVideoCodec=i;
-            return true;
-        }
-    }
-    return false;
-}
-/**
-    \fn videoEncoder6Configure
-
-*/
-bool                  videoEncoder6Configure(void)
-{
-    ADM_videoEncoderDesc *desc=ListOfEncoders[currentVideoCodec]->desc;
-    if(desc->configure) return desc->configure();
-    return true;
-}
-/**
-    \fn videoEncoder6_SetCurrentEncoder
-
-*/
-bool                  videoEncoder6_SetCurrentEncoder(uint32_t index)
-{
-      int nb=ListOfEncoders.size();
-      if(index>=nb) return false;
-      currentVideoCodec=index;
-      return true;
-}
-//EOF

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoEncoder/src/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoEncoder/src/CMakeLists.txt	2009-06-15 17:47:18 UTC (rev 4921)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoEncoder/src/CMakeLists.txt	2009-06-15 17:47:21 UTC (rev 4922)
@@ -8,8 +8,3 @@
 
 INSTALL(TARGETS ADM_coreVideoEncoder RUNTIME DESTINATION ${BIN_DIR}  LIBRARY DESTINATION lib  ARCHIVE DESTINATION lib)
 
-SET(ADM_internalVideoEncoder_SRCS 
-	ADM_VideoEncoders.cpp
-        ADM_dynVideoEncoder.cpp
-)
-#ADD_LIBRARY(ADM_internalVideoEncoder STATIC ${ADM_internalVideoEncoder_SRCS})

Deleted: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoFilter/src/ADM_filterChain.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoFilter/src/ADM_filterChain.cpp	2009-06-15 17:47:18 UTC (rev 4921)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoFilter/src/ADM_filterChain.cpp	2009-06-15 17:47:21 UTC (rev 4922)
@@ -1,50 +0,0 @@
-/***************************************************************************
-                          \fn ADM_filterChain.cpp
-                          \brief Base class for Video Filters
-                           (c) Mean 2009
-
-
-
- ***************************************************************************/
-
-/***************************************************************************
- *                                                                         *
- *   This program is free software; you can redistribute it and/or modify  *
- *   it under the terms of the GNU General Public License as published by  *
- *   the Free Software Foundation; either version 2 of the License, or     *
- *   (at your option) any later version.                                   *
- *                                                                         *
- ***************************************************************************/
-#include "ADM_default.h"
-#include "ADM_coreVideoFilter.h"
-#include "ADM_filterChain.h"
-#include "ADM_videoFilterBridge.h"
-/**
-    \fn createVideoFilterChain
-    \brief Create a filter chain
-*/
-ADM_videoFilterChain *createVideoFilterChain(uint64_t startAt,uint64_t endAt)
-{
-    ADM_videoFilterChain *chain=new ADM_videoFilterChain;
-    // 1- Add bridge always # 1
-    ADM_videoFilterBridge *bridge=new ADM_videoFilterBridge(startAt,endAt);
-    chain->push_back(bridge);
-    return chain;
-}
-/**
-        \fn destroyVideoFilterChain
-        \brief Destroy a filter chain
-*/
-bool                 destroyVideoFilterChain(ADM_videoFilterChain *chain)
-{
-    ADM_assert(chain->size());
-    for(int i=0;i<chain->size();i++)
-    {
-        ADM_coreVideoFilter *filter=(*chain)[i];
-        delete filter;
-    }
-    chain->erase(chain->begin(),chain->end()-1);
-    return true;
-}
-
-// EOF

Deleted: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoFilter/src/ADM_videoFilterBridge.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoFilter/src/ADM_videoFilterBridge.cpp	2009-06-15 17:47:18 UTC (rev 4921)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoFilter/src/ADM_videoFilterBridge.cpp	2009-06-15 17:47:21 UTC (rev 4922)
@@ -1,93 +0,0 @@
-/***************************************************************************
-                          \fn ADM_videoFilterBridge
-                          \brief Interface between editor & filter chain
-                           (c) Mean 2009
-
-
-
- ***************************************************************************/
-
-/***************************************************************************
- *                                                                         *
- *   This program is free software; you can redistribute it and/or modify  *
- *   it under the terms of the GNU General Public License as published by  *
- *   the Free Software Foundation; either version 2 of the License, or     *
- *   (at your option) any later version.                                   *
- *                                                                         *
- ***************************************************************************/
-
-#include "ADM_default.h"
-#include "ADM_videoFilterBridge.h"
-#include "ADM_editor/ADM_edit.hxx"
-extern ADM_Composer *video_body;
-/**
-    \fn ADM_videoFilterBridge
-
-*/
-ADM_videoFilterBridge::ADM_videoFilterBridge(uint64_t startTime, uint64_t endTime) : ADM_coreVideoFilter(NULL,NULL)
-{
-    printf("[VideoFilterBridge] Creating bridge from %"LU" s to %"LU" s\n",(uint32_t)(startTime/1000000LL),(uint32_t)(endTime/1000000LL));
-    this->startTime=startTime;
-    this->endTime=endTime;
-    
-    aviInfo fo;
-    video_body->getVideoInfo(&fo);
-    bridgeInfo.width=fo.width;
-    bridgeInfo.height=fo.height;
-    bridgeInfo.frameIncrement=video_body->getFrameIncrement();
-    bridgeInfo.totalDuration=video_body->getVideoDuration();
-    bridgeInfo.frameIncrement=video_body->getFrameIncrement();
-    rewind();
-}
-/**
-    \fn rewind
-    \brief go or return to the original position...
-*/
-bool ADM_videoFilterBridge::rewind(void)
-{
-    video_body->GoToTime(startTime);
-    return true;
-}
-
-/**
-    \fn ADM_videoFilterBridge
-
-*/
-ADM_videoFilterBridge::~ADM_videoFilterBridge()
-{
-
-}
-/**
-    \fn getNextFrame
-    \brief
-*/
-bool         ADM_videoFilterBridge::getNextFrame(ADMImage *image)
-{
-again:
-    bool r=   video_body->NextPicture(image);
-    if(r==false) return false;
-    // Translate pts if any
-    int64_t pts=image->Pts;
-    if(pts>endTime)
-    {
-        printf("[VideoBridge] This frame is too late (%"LU" vs %"LU")\n",pts,startTime);
-        return false;
-    }
-    if(pts<startTime) 
-    {
-            printf("[VideoBridge] This frame is too early (%"LU" vs %"LU")\n",pts,endTime);
-            goto again;
-    }
-    // Rescale time
-    image->Pts-=startTime;
-    return true;
-}
-/**
-    \fn ADM_videoFilterBridge
-
-*/
-FilterInfo  *ADM_videoFilterBridge::getInfo(void)
-{
-    return &bridgeInfo;
-}
-// EOF

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoFilter/src/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoFilter/src/CMakeLists.txt	2009-06-15 17:47:18 UTC (rev 4921)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoFilter/src/CMakeLists.txt	2009-06-15 17:47:21 UTC (rev 4922)
@@ -7,8 +7,3 @@
 
 INSTALL(TARGETS ADM_coreVideoFilter RUNTIME DESTINATION ${BIN_DIR}  LIBRARY DESTINATION lib  ARCHIVE DESTINATION lib)
 
-SET(ADM_internalVideoFilter_SRCS 
-	ADM_videoFilterBridge.cpp
-        ADM_filterChain.cpp
-)
-#ADD_LIBRARY(ADM_internalVideoFilter STATIC ${ADM_internalVideoFilter_SRCS})

Added: branches/avidemux_2.6_branch_mean/cmake/admCoreIncludes.cmake
===================================================================
--- branches/avidemux_2.6_branch_mean/cmake/admCoreIncludes.cmake	2009-06-15 17:47:18 UTC (rev 4921)
+++ branches/avidemux_2.6_branch_mean/cmake/admCoreIncludes.cmake	2009-06-15 17:47:21 UTC (rev 4922)
@@ -0,0 +1,19 @@
+INCLUDE_DIRECTORIES(${AVIDEMUX_TOP_SOURCE_DIR}/avidemux_core)
+INCLUDE_DIRECTORIES(${AVIDEMUX_TOP_SOURCE_DIR}/avidemux_core/ADM_core/include)
+INCLUDE_DIRECTORIES(${AVIDEMUX_TOP_SOURCE_DIR}/avidemux_core/ADM_ffmpeg)
+INCLUDE_DIRECTORIES(${AVIDEMUX_TOP_SOURCE_DIR}/avidemux_core/ADM_coreAudioFilter/include)
+INCLUDE_DIRECTORIES(${AVIDEMUX_TOP_SOURCE_DIR}/avidemux_core/ADM_coreAudioParser/include)
+INCLUDE_DIRECTORIES(${AVIDEMUX_TOP_SOURCE_DIR}/avidemux_core/ADM_coreAudio/include)
+INCLUDE_DIRECTORIES(${AVIDEMUX_TOP_SOURCE_DIR}/avidemux_core/ADM_coreAudioDevice/include)
+INCLUDE_DIRECTORIES(${AVIDEMUX_TOP_SOURCE_DIR}/avidemux_core/ADM_coreAudioEncoder/include)
+INCLUDE_DIRECTORIES(${AVIDEMUX_TOP_SOURCE_DIR}/avidemux_core/ADM_coreDemuxer/include)
+INCLUDE_DIRECTORIES(${AVIDEMUX_TOP_SOURCE_DIR}/avidemux_core/ADM_coreDemuxerMpeg/include)
+INCLUDE_DIRECTORIES(${AVIDEMUX_TOP_SOURCE_DIR}/avidemux_core/ADM_coreImage/include)
+INCLUDE_DIRECTORIES(${AVIDEMUX_TOP_SOURCE_DIR}/avidemux_core/ADM_coreMuxer/include)
+INCLUDE_DIRECTORIES(${AVIDEMUX_TOP_SOURCE_DIR}/avidemux_core/ADM_coreUI/include)
+INCLUDE_DIRECTORIES(${AVIDEMUX_TOP_SOURCE_DIR}/avidemux_core/ADM_coreUtils/include)
+INCLUDE_DIRECTORIES(${AVIDEMUX_TOP_SOURCE_DIR}/avidemux_core/ADM_coreVideoEncoder/include)
+INCLUDE_DIRECTORIES(${AVIDEMUX_TOP_SOURCE_DIR}/avidemux_core/ADM_coreVideoFilter/include)
+INCLUDE_DIRECTORIES(${AVIDEMUX_TOP_SOURCE_DIR}/avidemux_core/ADM_ffmpeg)
+INCLUDE_DIRECTORIES(${AVIDEMUX_CORE_BUILD_DIR}/config)
+



From mean at mail.berlios.de  Tue Jun 16 07:34:31 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Tue, 16 Jun 2009 07:34:31 +0200
Subject: [Avidemux-svn-commit] r4923 - in
	branches/avidemux_2.6_branch_mean/avidemux: common
	common/ADM_audiocodec common/ADM_codecs common/ADM_commonUI
	common/ADM_libraries/ADM_xvidratectl common/ADM_mpegIndexer gtk
Message-ID: <200906160534.n5G5YVgG018560@sheep.berlios.de>

Author: mean
Date: 2009-06-16 07:34:28 +0200 (Tue, 16 Jun 2009)
New Revision: 4923

Modified:
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_audiocodec/ADM_codecimaadpcm.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_codecs/ADM_ffmp43.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_codecs/ADM_ffmpeg_vdpau.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_codecs/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_commonUI/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_commonUI/DIA_prefs.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_libraries/ADM_xvidratectl/ADM_xvidratectl.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_libraries/ADM_xvidratectl/ADM_xvidratectlVBV.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_mpegIndexer/dmx_indexer.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_mpegIndexer/dmx_indexer_h264.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_mpegIndexer/dmx_indexer_mpeg2.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux/gtk/CMakeLists.txt
Log:
[Gtk] Back to building binaries

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_audiocodec/ADM_codecimaadpcm.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_audiocodec/ADM_codecimaadpcm.cpp	2009-06-15 17:47:21 UTC (rev 4922)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_audiocodec/ADM_codecimaadpcm.cpp	2009-06-16 05:34:28 UTC (rev 4923)
@@ -16,14 +16,17 @@
     0x1100736d: IMA ADPCM coded like in MS AVI/ASF/WAV found in QT files
 */
 
+
+#define ADM_NO_CONFIG_H
 #include "ADM_default.h"
-#define ADM_NO_CONFIG_H
+#include "ADM_ffmpeg/libavutil/bswap.h"
+
 #include "ADM_assert.h"
 #include "ADM_coreAudio.h"
 #include "ADM_audiocodec.h"
 
-extern uint16_t le2me_16(uint16_t x);
 
+
 #define MS_IMA_ADPCM_PREAMBLE_SIZE 4
 
 #define QT_IMA_ADPCM_PREAMBLE_SIZE 2

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_codecs/ADM_ffmp43.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_codecs/ADM_ffmp43.cpp	2009-06-15 17:47:21 UTC (rev 4922)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_codecs/ADM_ffmp43.cpp	2009-06-16 05:34:28 UTC (rev 4923)
@@ -31,9 +31,9 @@
 #include "ADM_codecs/ADM_ffmp43.h"
 #include "DIA_coreToolkit.h"
 
-#include "ADM_osSupport/ADM_debugID.h"
+#include "ADM_debugID.h"
 #define MODULE_NAME  MODULE_CODEC
-#include "ADM_osSupport/ADM_debug.h"
+#include "ADM_debug.h"
 #include "ADM_videoInfoExtractor.h"
 
 extern int ADM_cpu_num_processors(void);

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_codecs/ADM_ffmpeg_vdpau.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_codecs/ADM_ffmpeg_vdpau.cpp	2009-06-15 17:47:21 UTC (rev 4922)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_codecs/ADM_ffmpeg_vdpau.cpp	2009-06-16 05:34:28 UTC (rev 4923)
@@ -26,7 +26,7 @@
 #include "ADM_default.h"
 #ifdef USE_VDPAU
 extern "C" {
- #include "ADM_libraries/ADM_ffmpeg/libavcodec/vdpau.h"
+ #include "ADM_ffmpeg/libavcodec/vdpau.h"
 }
 
 #include "vdpau/vdpau_x11.h"
@@ -35,7 +35,7 @@
 #include "ADM_codecs/ADM_ffmp43.h"
 #include "DIA_coreToolkit.h"
 #include "ADM_dynamicLoading.h"
-#include "ADM_userInterfaces/ADM_render/GUI_render.h"
+#include "ADM_render/GUI_render.h"
 #include "ADM_ffmpeg_vdpau_internal.h"
 #include "prefs.h"
 

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_codecs/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_codecs/CMakeLists.txt	2009-06-15 17:47:21 UTC (rev 4922)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_codecs/CMakeLists.txt	2009-06-16 05:34:28 UTC (rev 4923)
@@ -9,7 +9,7 @@
 ADM_ffmpeg_vdpau.cpp
 )
 
-ADD_ADM_LIB_ALL_TARGETS(ADM_codecs ${ADM_codecs_SRCS})
+ADD_LIBRARY(ADM_codecs STATIC ${ADM_codecs_SRCS})
 
 IF (USE_PNG)
 	 ADD_SOURCE_CFLAGS(ADM_png.cpp ${PNG_CFLAGS})

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_commonUI/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_commonUI/CMakeLists.txt	2009-06-15 17:47:21 UTC (rev 4922)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_commonUI/CMakeLists.txt	2009-06-16 05:34:28 UTC (rev 4923)
@@ -1,15 +1,12 @@
 SET(ADM_LIB ADM_commonUI)
 
 SET(${ADM_LIB}_SRCS
-DIA_DVDff.cpp           
-DIA_mjpeg.cpp     
 DIA_resizeWiz.cpp  
 DIA_v2v.cpp
 DIA_audioFilter.cpp   
 DIA_gototime.cpp    
 DIA_postproc.cpp  
 DIA_bitrateHisto.cpp  
-DIA_lavcodec.cpp    
 DIA_prefs.cpp     
 DIA_SVCD.cpp       
 DIA_builtin.cpp       
@@ -23,6 +20,9 @@
 )
 
 SET(OBSOLETE_SRCS
+DIA_mjpeg.cpp     
+DIA_DVDff.cpp           
+DIA_lavcodec.cpp    
 DIA_flyThreshold.cpp 
 DIA_flyParticle.cpp 
 DIA_flyEraser.cpp 
@@ -37,5 +37,5 @@
 
 )
 
-ADD_ADM_LIB_ALL_TARGETS(${ADM_LIB} ${${ADM_LIB}_SRCS})
+ADD_LIBRARY(${ADM_LIB} STATIC ${${ADM_LIB}_SRCS})
 

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_commonUI/DIA_prefs.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_commonUI/DIA_prefs.cpp	2009-06-15 17:47:21 UTC (rev 4922)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_commonUI/DIA_prefs.cpp	2009-06-16 05:34:28 UTC (rev 4923)
@@ -18,7 +18,7 @@
 
 #include "audio_out.h"
 #include "ADM_assert.h"
-#include "ADM_userInterfaces/ADM_render/GUI_render.h"
+#include "ADM_render/GUI_render.h"
 
 
 #include "DIA_factory.h"

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_libraries/ADM_xvidratectl/ADM_xvidratectl.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_libraries/ADM_xvidratectl/ADM_xvidratectl.cpp	2009-06-15 17:47:21 UTC (rev 4922)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_libraries/ADM_xvidratectl/ADM_xvidratectl.cpp	2009-06-16 05:34:28 UTC (rev 4923)
@@ -53,9 +53,9 @@
 #include "ADM_quota.h"
 #include "ADM_assert.h"
 #include "ADM_xvidr_internal.h"
-#include "ADM_osSupport/ADM_debugID.h"
+#include "ADM_debugID.h"
 #define MODULE_NAME  MODULE_XVID_RCTL
-#include "ADM_osSupport/ADM_debug.h"
+#include "ADM_debug.h"
 
 // Glueing to avidemux
 #define DPRINTF(a,b, args...) aprintf(b,## args);

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_libraries/ADM_xvidratectl/ADM_xvidratectlVBV.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_libraries/ADM_xvidratectl/ADM_xvidratectlVBV.cpp	2009-06-15 17:47:21 UTC (rev 4922)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_libraries/ADM_xvidratectl/ADM_xvidratectlVBV.cpp	2009-06-16 05:34:28 UTC (rev 4923)
@@ -18,9 +18,9 @@
 #include <limits.h>
 #include "ADM_assert.h"
 
-#include "ADM_osSupport/ADM_debugID.h"
+#include "ADM_debugID.h"
 #define MODULE_NAME  MODULE_XVID_RCTL
-#include "ADM_osSupport/ADM_debug.h"
+#include "ADM_debug.h"
 
 #include "ADM_ratecontrol.h"
 

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_mpegIndexer/dmx_indexer.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_mpegIndexer/dmx_indexer.cpp	2009-06-15 17:47:21 UTC (rev 4922)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_mpegIndexer/dmx_indexer.cpp	2009-06-16 05:34:28 UTC (rev 4923)
@@ -24,13 +24,13 @@
 #include "DIA_coreToolkit.h"
 #include "DIA_fileSel.h"
 #include "ADM_quota.h"
-#include "ADM_userInterfaces/ADM_commonUI/DIA_idx_pg.h"
+#include "ADM_commonUI/DIA_idx_pg.h"
 #include "avidemutils.h"
 
 
-#include "ADM_osSupport/ADM_debugID.h"
+#include "ADM_debugID.h"
 #define MODULE_NAME MODULE_MPEG
-#include "ADM_osSupport/ADM_debug.h"
+#include "ADM_debug.h"
 #include "dmx_demuxerEs.h"
 #include "dmx_demuxerPS.h"
 #include "dmx_demuxerTS.h"
@@ -38,9 +38,6 @@
 #include "dmx_identify.h"
 
 #define MIN_DELTA_PTS 150 // autofix in ms
-#include "ADM_osSupport/ADM_debugID.h"
-#define MODULE_NAME MODULE_MPEG
-#include "ADM_osSupport/ADM_debug.h"
 
 #include "dmx_indexer_internal.h"
 

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_mpegIndexer/dmx_indexer_h264.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_mpegIndexer/dmx_indexer_h264.cpp	2009-06-15 17:47:21 UTC (rev 4922)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_mpegIndexer/dmx_indexer_h264.cpp	2009-06-16 05:34:28 UTC (rev 4923)
@@ -21,13 +21,13 @@
 
 #include "DIA_fileSel.h"
 #include "ADM_quota.h"
-#include "ADM_userInterfaces/ADM_commonUI/DIA_idx_pg.h"
+#include "ADM_commonUI/DIA_idx_pg.h"
 
 
 
-#include "ADM_osSupport/ADM_debugID.h"
+#include "ADM_debugID.h"
 #define MODULE_NAME MODULE_MPEG
-#include "ADM_osSupport/ADM_debug.h"
+#include "ADM_debug.h"
 #include "dmx_demuxerEs.h"
 #include "dmx_demuxerPS.h"
 #include "dmx_demuxerTS.h"
@@ -35,9 +35,6 @@
 #include "dmx_identify.h"
 
 #define MIN_DELTA_PTS 150 // autofix in ms
-#include "ADM_osSupport/ADM_debugID.h"
-#define MODULE_NAME MODULE_MPEG
-#include "ADM_osSupport/ADM_debug.h"
 
 #include "dmx_indexer_internal.h"
 

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_mpegIndexer/dmx_indexer_mpeg2.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_mpegIndexer/dmx_indexer_mpeg2.cpp	2009-06-15 17:47:21 UTC (rev 4922)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_mpegIndexer/dmx_indexer_mpeg2.cpp	2009-06-16 05:34:28 UTC (rev 4923)
@@ -20,13 +20,13 @@
 
 #include "DIA_fileSel.h"
 #include "ADM_quota.h"
-#include "ADM_userInterfaces/ADM_commonUI/DIA_idx_pg.h"
+#include "ADM_commonUI/DIA_idx_pg.h"
 
 
 
-#include "ADM_osSupport/ADM_debugID.h"
+#include "ADM_debugID.h"
 #define MODULE_NAME MODULE_MPEG
-#include "ADM_osSupport/ADM_debug.h"
+#include "ADM_debug.h"
 #include "dmx_demuxerEs.h"
 #include "dmx_demuxerPS.h"
 #include "dmx_demuxerTS.h"
@@ -34,9 +34,6 @@
 #include "dmx_identify.h"
 
 #define MIN_DELTA_PTS 150 // autofix in ms
-#include "ADM_osSupport/ADM_debugID.h"
-#define MODULE_NAME MODULE_MPEG
-#include "ADM_osSupport/ADM_debug.h"
 
 #include "dmx_indexer_internal.h"
 

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/CMakeLists.txt	2009-06-15 17:47:21 UTC (rev 4922)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/CMakeLists.txt	2009-06-16 05:34:28 UTC (rev 4923)
@@ -9,7 +9,7 @@
 ADD_SUBDIRECTORY(ADM_libraries)
 ADD_SUBDIRECTORY(ADM_mpegIndexer)
 ADD_SUBDIRECTORY(ADM_muxerGate)
-ADD_SUBDIRECTORY(ADM_ocr)
+#ADD_SUBDIRECTORY(ADM_ocr)
 ADD_SUBDIRECTORY(ADM_osSupport)
 ADD_SUBDIRECTORY(ADM_plugin)
 ADD_SUBDIRECTORY(ADM_render)

Modified: branches/avidemux_2.6_branch_mean/avidemux/gtk/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/gtk/CMakeLists.txt	2009-06-15 17:47:21 UTC (rev 4922)
+++ branches/avidemux_2.6_branch_mean/avidemux/gtk/CMakeLists.txt	2009-06-16 05:34:28 UTC (rev 4923)
@@ -112,10 +112,14 @@
 ENDIF (ADM_DEBUG AND FIND_LEAKS)
 
 SET(commonLibs
-ADM_audiocodec 
+ADM_muxerGate 
 ADM_audioFilter
 ADM_audioFilter_old 
 ADM_editor 
+ADM_audiocodec 
+ADM_codecs 
+ADM_commonUI
+ADM_filtersGtk
 ADM_filter 
 ADM_osSupport 
 ADM_requant 
@@ -164,9 +168,9 @@
 #############################################
 TARGET_LINK_LIBRARIES(avidemux2_gtk ADM_UIGtk)
 TARGET_LINK_LIBRARIES(avidemux2_gtk ADM_dialogGtk)
-TARGET_LINK_LIBRARIES(avidemux2_gtk ADM_filtersGtk)
+#TARGET_LINK_LIBRARIES(avidemux2_gtk ADM_filtersGtk)
 TARGET_LINK_LIBRARIES(avidemux2_gtk ADM_gui2Gtk)
-TARGET_LINK_LIBRARIES(avidemux2_gtk ADM_ocrGtk)
+#TARGET_LINK_LIBRARIES(avidemux2_gtk ADM_ocrGtk)
 TARGET_LINK_LIBRARIES(avidemux2_gtk ADM_toolkitGtk)
 TARGET_LINK_LIBRARIES(avidemux2_gtk ADM_UI_GTK)
 ###########################################



From mean at mail.berlios.de  Tue Jun 16 19:54:42 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Tue, 16 Jun 2009 19:54:42 +0200
Subject: [Avidemux-svn-commit] r4924 - in
	branches/avidemux_2.6_branch_mean/avidemux: . gtk
Message-ID: <200906161754.n5GHsgK6032764@sheep.berlios.de>

Author: mean
Date: 2009-06-16 19:54:42 +0200 (Tue, 16 Jun 2009)
New Revision: 4924

Added:
   branches/avidemux_2.6_branch_mean/avidemux/commonCmakeApplication.cmake
   branches/avidemux_2.6_branch_mean/avidemux/gtk/corePackageDebian.cmake
Modified:
   branches/avidemux_2.6_branch_mean/avidemux/gtk/CMakeLists.txt
Log:
[build] Factorize

Added: branches/avidemux_2.6_branch_mean/avidemux/commonCmakeApplication.cmake
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/commonCmakeApplication.cmake	2009-06-16 05:34:28 UTC (rev 4923)
+++ branches/avidemux_2.6_branch_mean/avidemux/commonCmakeApplication.cmake	2009-06-16 17:54:42 UTC (rev 4924)
@@ -0,0 +1,99 @@
+
+CMAKE_MINIMUM_REQUIRED(VERSION 2.4.7 FATAL_ERROR)
+
+if (COMMAND cmake_policy)
+	cmake_policy(VERSION 2.4)
+	cmake_policy(SET CMP0003 NEW)
+endif (COMMAND cmake_policy)
+########################################
+# Definitions and Includes
+########################################
+ADD_DEFINITIONS(-D_FILE_OFFSET_BITS=64 -D_LARGE_FILES)
+ADD_DEFINITIONS(-DHAVE_CONFIG_H)
+ADD_DEFINITIONS(-DADM_UI_TYPE_BUILD=ADM_UI_GTK)
+########################################
+# Where is the config.h dir
+########################################
+IF (NOT AVIDEMUX_CORE_BUILD_DIR)
+	MESSAGE(FATAL_ERROR "Please add -DAVIDEMUX_CORECONFIG_DIR=path_to_avidemux_core_build_dir")
+ELSE (NOT AVIDEMUX_CORE_BUILD_DIR)
+	SET(AVIDEMUX_CORE_BUILD_DIR "${AVIDEMUX_CORE_BUILD_DIR}" CACHE STRING "")
+ENDIF (NOT AVIDEMUX_CORE_BUILD_DIR)
+#
+# Access to our cmake lib
+#
+SET(AVIDEMUX_TOP_SOURCE_DIR ${CMAKE_SOURCE_DIR}/../..)
+SET(CMAKE_MODULE_PATH "${AVIDEMUX_TOP_SOURCE_DIR}/cmake" "${CMAKE_MODULE_PATH}")
+MESSAGE(STATUS "Avidemux cmake scripts are in ${CMAKE_MODULE_PATH}")
+#
+#
+#
+
+IF (ADM_DEBUG)
+	ADD_DEFINITIONS(-DADM_DEBUG)
+ENDIF (ADM_DEBUG)
+###########################################
+#  Basic cmake helper script
+###########################################
+include(admConfigHelper)
+INCLUDE(admCheckRequiredLibs)
+include(admCheckMiscLibs)
+########################################
+# Add include dirs
+########################################
+include(admCoreIncludes)
+
+INCLUDE_DIRECTORIES("${CMAKE_CURRENT_SOURCE_DIR}/ADM_muxerGate/include/")
+
+IF (GETTEXT_FOUND)
+	INCLUDE_DIRECTORIES(${GETTEXT_INCLUDE_DIR})
+ENDIF (GETTEXT_FOUND)
+INCLUDE_DIRECTORIES("${CMAKE_CURRENT_SOURCE_DIR}/../common/")
+INCLUDE_DIRECTORIES("${CMAKE_CURRENT_SOURCE_DIR}/../common/ADM_audioFilter_old")
+INCLUDE_DIRECTORIES("${CMAKE_CURRENT_SOURCE_DIR}/../common/ADM_commonUI")
+#
+# Add main source
+#
+SET(ADM_EXE_SRCS 
+../common/ADM_preview.cpp  
+../common/gtk_gui.cpp  
+../common/gui_autodrive.cpp  
+../common/GUI_jobs.cpp  
+../common/gui_navigate.cpp  
+../common/gui_play.cpp  
+../common/gui_save.cpp  
+../common/gui_savenew.cpp  
+../common/gui_misc.cpp
+../common/main.cpp  
+../common/gui_action.cpp
+../common/gui_blackframes.cpp
+../common/ADM_imageLoader.cpp  
+../common/ADM_gettext.cpp
+)
+
+#############################################
+# Add core libs
+#############################################
+SET(coreLibs
+ADM_core
+ADM_audioParser
+ADM_coreAudio
+ADM_coreAudioFilterAPI
+ADM_coreAudioDevice
+ADM_coreAudioEncoder
+ADM_coreDemuxer
+ADM_coreDemuxerMpeg
+ADM_coreImage
+ADM_coreMuxer
+ADM_coreUI
+ADM_coreUtils
+ADM_coreVideoEncoder
+ADM_coreVideoFilter
+ADM_libavcodec
+ADM_libavformat
+ADM_libavutil
+ADM_libswscale
+ADM_libpostproc
+ADM_smjs
+)
+# END

Modified: branches/avidemux_2.6_branch_mean/avidemux/gtk/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/gtk/CMakeLists.txt	2009-06-16 05:34:28 UTC (rev 4923)
+++ branches/avidemux_2.6_branch_mean/avidemux/gtk/CMakeLists.txt	2009-06-16 17:54:42 UTC (rev 4924)
@@ -3,65 +3,12 @@
 MESSAGE("#########################################")
 MESSAGE("")
 PROJECT(Avidemux_gtk)
-
-CMAKE_MINIMUM_REQUIRED(VERSION 2.4.7 FATAL_ERROR)
-
-if (COMMAND cmake_policy)
-	cmake_policy(VERSION 2.4)
-	cmake_policy(SET CMP0003 NEW)
-endif (COMMAND cmake_policy)
-########################################
-# Definitions and Includes
-########################################
-ADD_DEFINITIONS(-D_FILE_OFFSET_BITS=64 -D_LARGE_FILES)
-ADD_DEFINITIONS(-DHAVE_CONFIG_H)
-ADD_DEFINITIONS(-DADM_UI_TYPE_BUILD=ADM_UI_GTK)
-########################################
-# Where is the config.h dir
-########################################
-IF (NOT AVIDEMUX_CORE_BUILD_DIR)
-	MESSAGE(FATAL_ERROR "Please add -DAVIDEMUX_CORECONFIG_DIR=path_to_avidemux_core_build_dir")
-ELSE (NOT AVIDEMUX_CORE_BUILD_DIR)
-	SET(AVIDEMUX_CORE_BUILD_DIR "${AVIDEMUX_CORE_BUILD_DIR}" CACHE STRING "")
-ENDIF (NOT AVIDEMUX_CORE_BUILD_DIR)
-#
-# Access to our cmake lib
-#
-SET(AVIDEMUX_TOP_SOURCE_DIR ${CMAKE_SOURCE_DIR}/../..)
-SET(CMAKE_MODULE_PATH "${AVIDEMUX_TOP_SOURCE_DIR}/cmake" "${CMAKE_MODULE_PATH}")
-MESSAGE(STATUS "Avidemux cmake scripts are in ${CMAKE_MODULE_PATH}")
-#
-#
-#
-
-IF (ADM_DEBUG)
-	ADD_DEFINITIONS(-DADM_DEBUG)
-ENDIF (ADM_DEBUG)
-###########################################
-# Check Gtk & friends
-###########################################
-include(admConfigHelper)
-INCLUDE(admCheckRequiredLibs)
-include(admCheckMiscLibs)
+include(../commonCmakeApplication.cmake)
 include(admCheckGtk)
 include(admCheckGlade)
 #
 checkGtk()
 checkGlade()
-########################################
-# Add include dirs
-########################################
-include(admCoreIncludes)
-
-INCLUDE_DIRECTORIES("${CMAKE_CURRENT_SOURCE_DIR}/ADM_muxerGate/include/")
-
-IF (GETTEXT_FOUND)
-	INCLUDE_DIRECTORIES(${GETTEXT_INCLUDE_DIR})
-ENDIF (GETTEXT_FOUND)
-INCLUDE_DIRECTORIES("${CMAKE_CURRENT_SOURCE_DIR}/../common/")
-INCLUDE_DIRECTORIES("${CMAKE_CURRENT_SOURCE_DIR}/../common/ADM_audioFilter_old")
-INCLUDE_DIRECTORIES("${CMAKE_CURRENT_SOURCE_DIR}/../common/ADM_commonUI")
-# 
 ##########################################
 # Config
 ##########################################
@@ -72,34 +19,18 @@
 
 INCLUDE_DIRECTORIES("${CMAKE_BINARY_DIR}/config/gtk/")
 INCLUDE_DIRECTORIES("${AVIDEMUX_CORE_BUILD_DIR}/config")
+###########################################
+# Executable
+###########################################
+ADD_EXECUTABLE(avidemux2_gtk ${ADM_EXE_SRCS})
+ADD_TARGET_CFLAGS(avidemux2_gtk "-I${CMAKE_BINARY_DIR}/config/gtk")
 ########################################
 # Add subdirectories 
 ########################################
 ADD_SUBDIRECTORY(../common ./common)
 ADD_SUBDIRECTORY(ADM_UIs ./ADM_UIsGtk)
 ADD_SUBDIRECTORY(ADM_userInterfaces ./ADM_userInterfacesGtk)
-#
-# Add main source
-#
-SET(ADM_EXE_SRCS 
-../common/ADM_preview.cpp  
-../common/gtk_gui.cpp  
-../common/gui_autodrive.cpp  
-../common/GUI_jobs.cpp  
-../common/gui_navigate.cpp  
-../common/gui_play.cpp  
-../common/gui_save.cpp  
-../common/gui_savenew.cpp  
-../common/gui_misc.cpp
-../common/main.cpp  
-../common/gui_action.cpp
-../common/gui_blackframes.cpp
-../common/ADM_imageLoader.cpp  
-../common/ADM_gettext.cpp
-)
 # Executable
-ADD_EXECUTABLE(avidemux2_gtk ${ADM_EXE_SRCS})
-ADD_TARGET_CFLAGS(avidemux2_gtk "-I${CMAKE_BINARY_DIR}/config/gtk")
 
 SDLify(../common/main.cpp)
 ADD_SOURCE_CFLAGS(../common/main.cpp "-DADM_SUBVERSION=${ADM_SUBVERSION}")
@@ -108,7 +39,7 @@
 ###########################################
 
 IF (ADM_DEBUG AND FIND_LEAKS)
-	ADD_ADMLIB_ALL_TARGETS(ADM_nvwa)
+	TARGET_LINK_LIBRARIES(avidemux2_gtk ADM_nvwa)
 ENDIF (ADM_DEBUG AND FIND_LEAKS)
 
 SET(commonLibs
@@ -133,32 +64,6 @@
 FOREACH (_libName ${commonLibs})
         TARGET_LINK_LIBRARIES(avidemux2_gtk ${_libName})
 ENDFOREACH (_libName ${commonLibs})
-
-#############################################
-# Add core libs
-#############################################
-SET(coreLibs
-ADM_core
-ADM_audioParser
-ADM_coreAudio
-ADM_coreAudioFilterAPI
-ADM_coreAudioDevice
-ADM_coreAudioEncoder
-ADM_coreDemuxer
-ADM_coreDemuxerMpeg
-ADM_coreImage
-ADM_coreMuxer
-ADM_coreUI
-ADM_coreUtils
-ADM_coreVideoEncoder
-ADM_coreVideoFilter
-ADM_libavcodec
-ADM_libavformat
-ADM_libavutil
-ADM_libswscale
-ADM_libpostproc
-ADM_smjs
-)
 FOREACH (_libName ${coreLibs})
         TARGET_LINK_LIBRARIES(avidemux2_gtk ${_libName})
 ENDFOREACH (_libName ${commonLibs})
@@ -213,16 +118,13 @@
 # OS Specific
 ###########################################
 IF (WIN32)
-	ADD_LIB_ALL_TARGETS(ADM_osSupport)
+	target_link_libraries(ADM_osSupport)
 
 	IF (MINGW)
-		ADD_LIB_ALL_TARGETS(-mno-cygwin)
+		target_link_libraries(avidemux2_gtk -mno-cygwin)
 	ENDIF (MINGW)
 
-	ADD_LIB_ALL_TARGETS(winmm)
-
-	ADD_TARGET_LDFLAGS(avidemux2_cli "-Wl,-subsystem,console")
-
+	target_link_libraries(avidemux2_gtk winmm)
         ADD_TARGET_LDFLAGS(avidemux2_gtk "-mwindows")
 
 ENDIF (WIN32)
@@ -230,4 +132,5 @@
 ###########################################
 # Install
 ###########################################
-#INSTALL(TARGETS avidemux2_gtk RUNTIME DESTINATION ${BIN_DIR} LIBRARY DESTINATION lib)
+INSTALL(TARGETS avidemux2_gtk RUNTIME DESTINATION ${CMAKE_INSTALL_PREFIX}/bin LIBRARY DESTINATION lib)
+include(./corePackageDebian.cmake)

Added: branches/avidemux_2.6_branch_mean/avidemux/gtk/corePackageDebian.cmake
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/gtk/corePackageDebian.cmake	2009-06-16 05:34:28 UTC (rev 4923)
+++ branches/avidemux_2.6_branch_mean/avidemux/gtk/corePackageDebian.cmake	2009-06-16 17:54:42 UTC (rev 4924)
@@ -0,0 +1,32 @@
+##############################
+# DEBIAN
+##############################
+SET(CPACK_DEBIAN_PACKAGE_NAME "avidemux2-gtk")
+SET (CPACK_GENERATOR "DEB")
+# ARCH
+IF (X86_64_SUPPORTED)
+SET(CPACK_DEBIAN_PACKAGE_ARCHITECTURE "amd64")
+ELSE (X86_64_SUPPORTED)
+SET(CPACK_DEBIAN_PACKAGE_ARCHITECTURE "i386")
+ENDIF (X86_64_SUPPORTED)
+# Mandatory
+SET(CPACK_DEBIAN_PACKAGE_MAINTAINER "mean")
+SET(CPACK_DEBIAN_PACKAGE_DESCRIPTION "Simple video editori,main program gtk version ")
+
+# Build our deps list
+# Build deps SET(DEPS "debhelper (>> 4), libfreetype6-dev, libxml2-dev,  libxv-dev, dpatch , cmake, desktop-file-utils")
+SET(DEPS "libc6 (>=2.4),libglib2.0-0 (>=2.14.0),libstdc++6 (>=4.2.1),libx11-6, libext6, libxml2 (>=2.6.27), libxv1, zlib1g (>=1:1.1.4), avidemux2_core (>=2.6.0)")
+# Add optional DEPS here
+SET(CPACK_DEBIAN_PACKAGE_DEPENDS "${DEPS}")
+#
+SET(CPACK_DEBIAN_PACKAGE_SECTION "extra")
+SET(CPACK_DEBIAN_PACKAGE_PRIORITY "optional")
+# Some more infos
+SET(CPACK_PACKAGE_VERSION_MAJOR "2")
+SET(CPACK_PACKAGE_VERSION_MINOR "6")
+SET(CPACK_PACKAGE_VERSION_PATCH "0")
+#
+SET(CPACK_PACKAGE_NAME "avidemux2-gtk")
+#
+
+include(CPack)



From mean at mail.berlios.de  Wed Jun 17 07:45:58 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Wed, 17 Jun 2009 07:45:58 +0200
Subject: [Avidemux-svn-commit] r4926 - in
	branches/avidemux_2.6_branch_mean/avidemux: . gtk qt4
	qt4/ADM_UIs/src qt4/ADM_userInterfaces
	qt4/ADM_userInterfaces/ADM_dialog qt4/ADM_userInterfaces/ADM_filters
	qt4/ADM_userInterfaces/ADM_gui qt4/ADM_userInterfaces/ADM_ocr
Message-ID: <200906170545.n5H5jwHx027358@sheep.berlios.de>

Author: mean
Date: 2009-06-17 07:45:55 +0200 (Wed, 17 Jun 2009)
New Revision: 4926

Modified:
   branches/avidemux_2.6_branch_mean/avidemux/commonCmakeApplication.cmake
   branches/avidemux_2.6_branch_mean/avidemux/gtk/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_UIs/src/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_dialog/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_dialog/Q_about.cpp
   branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_dialog/Q_props.cpp
   branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_dialog/Q_working.cpp
   branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_dialog/T_index_pg.cpp
   branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_filters/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_filters/Q_mainfilter.cpp
   branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_gui/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_gui/CMakeLists.txt.orig
   branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_gui/Q_gui2.cpp
   branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_ocr/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux/qt4/CMakeLists.txt
Log:
[build] compile all qt4, no link yet

Modified: branches/avidemux_2.6_branch_mean/avidemux/commonCmakeApplication.cmake
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/commonCmakeApplication.cmake	2009-06-16 17:54:45 UTC (rev 4925)
+++ branches/avidemux_2.6_branch_mean/avidemux/commonCmakeApplication.cmake	2009-06-17 05:45:55 UTC (rev 4926)
@@ -10,7 +10,6 @@
 ########################################
 ADD_DEFINITIONS(-D_FILE_OFFSET_BITS=64 -D_LARGE_FILES)
 ADD_DEFINITIONS(-DHAVE_CONFIG_H)
-ADD_DEFINITIONS(-DADM_UI_TYPE_BUILD=ADM_UI_GTK)
 ########################################
 # Where is the config.h dir
 ########################################

Modified: branches/avidemux_2.6_branch_mean/avidemux/gtk/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/gtk/CMakeLists.txt	2009-06-16 17:54:45 UTC (rev 4925)
+++ branches/avidemux_2.6_branch_mean/avidemux/gtk/CMakeLists.txt	2009-06-17 05:45:55 UTC (rev 4926)
@@ -12,7 +12,7 @@
 ##########################################
 # Config
 ##########################################
-
+ADD_DEFINITIONS(-DADM_UI_TYPE_BUILD=ADM_UI_GTK)
 SET(CONFIG_HEADER_TYPE ADM_BUILD_GTK)
 CONFIGURE_FILE("${AVIDEMUX_TOP_SOURCE_DIR}/cmake/config.h.cmake" "${CMAKE_BINARY_DIR}/config/gtk/config.h")
 MESSAGE(STATUS "GTK config.h generated")

Modified: branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_UIs/src/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_UIs/src/CMakeLists.txt	2009-06-16 17:54:45 UTC (rev 4925)
+++ branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_UIs/src/CMakeLists.txt	2009-06-17 05:45:55 UTC (rev 4926)
@@ -18,7 +18,5 @@
 INCLUDE_DIRECTORIES(${CMAKE_CURRENT_BINARY_DIR} ${QT_INCLUDE_DIR})
 INCLUDE_DIRECTORIES(${CMAKE_CURRENT_SOURCE_DIR}/../include)
 ADD_LIBRARY(${ADM_LIB} SHARED ${${ADM_LIB}_SRCS})
-ADD_SOURCE_CFLAGS(T_flyDialogQt4.cpp " -DADM_UI_TYPE_BUILD=4")
-ADD_SOURCE_CFLAGS(T_QCanvas.cpp " -DADM_UI_TYPE_BUILD=4")
 TARGET_LINK_LIBRARIES(${ADM_LIB} ADM_core ADM_coreUI ${QT_QTGUI_LIBRARY} ${QT_QTCORE_LIBRARY} ADM_render_qt4)
 INSTALL(TARGETS ${ADM_LIB} RUNTIME DESTINATION ${BIN_DIR}  LIBRARY DESTINATION lib  ARCHIVE DESTINATION lib)

Modified: branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_dialog/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_dialog/CMakeLists.txt	2009-06-16 17:54:45 UTC (rev 4925)
+++ branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_dialog/CMakeLists.txt	2009-06-17 05:45:55 UTC (rev 4926)
@@ -39,4 +39,4 @@
 ADD_DEFINITIONS(-DADM_SUBVERSION=${ADM_SUBVERSION})
 INCLUDE_DIRECTORIES(${CMAKE_CURRENT_BINARY_DIR})
 INCLUDE_DIRECTORIES("${CMAKE_SOURCE_DIR}/avidemux/ADM_UIs/ADM_QT4/include")
-ADD_ADM_LIB_QT4_TARGET(${ADM_LIB} ${${ADM_LIB}_SRCS})
+ADD_LIBRARY(${ADM_LIB} STATIC ${${ADM_LIB}_SRCS})

Modified: branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_dialog/Q_about.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_dialog/Q_about.cpp	2009-06-16 17:54:45 UTC (rev 4925)
+++ branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_dialog/Q_about.cpp	2009-06-17 05:45:55 UTC (rev 4926)
@@ -30,12 +30,12 @@
 	connect(ui.licenseButton, SIGNAL(clicked(bool)), this, SLOT(licenseButton_clicked(bool)));
 
 	char subversion[20];
-
+#if 0
 	if (!ADM_SUBVERSION)
 		strcpy(subversion, VERSION);
 	else
 		sprintf(subversion,"%s (r%04u)", VERSION, ADM_SUBVERSION);
-
+#endif
 	ui.versionLabel->setText(ui.versionLabel->text() + subversion);
 }
 

Modified: branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_dialog/Q_props.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_dialog/Q_props.cpp	2009-06-16 17:54:45 UTC (rev 4925)
+++ branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_dialog/Q_props.cpp	2009-06-17 05:45:55 UTC (rev 4926)
@@ -17,7 +17,7 @@
 #include "Q_props.h"
 #include "avi_vars.h"
 #include "avidemutils.h"
-#include "ADM_video/ADM_vidMisc.h"
+#include "ADM_vidMisc.h"
 
 static const char *yesno[2]={QT_TR_NOOP("No"),QT_TR_NOOP("Yes")};
 extern const char *getStrFromAudioCodec( uint32_t codec);

Modified: branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_dialog/Q_working.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_dialog/Q_working.cpp	2009-06-16 17:54:45 UTC (rev 4925)
+++ branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_dialog/Q_working.cpp	2009-06-17 05:45:55 UTC (rev 4926)
@@ -15,7 +15,7 @@
 
 #include "Q_working.h"
 #include "ADM_default.h"
-#include "ADM_video/ADM_vidMisc.h"
+#include "ADM_vidMisc.h"
 #include "DIA_working.h"
 
 extern void UI_purge(void);

Modified: branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_dialog/T_index_pg.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_dialog/T_index_pg.cpp	2009-06-16 17:54:45 UTC (rev 4925)
+++ branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_dialog/T_index_pg.cpp	2009-06-17 05:45:55 UTC (rev 4926)
@@ -25,7 +25,7 @@
 //#include "ADM_encoderConf.h"
 //#include "ADM_encoder/adm_encoder.h"
 #include "DIA_idx_pg.h"
-#include "ADM_video/ADM_vidMisc.h"
+#include "ADM_vidMisc.h"
 
 extern void UI_purge( void );
 

Modified: branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_filters/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_filters/CMakeLists.txt	2009-06-16 17:54:45 UTC (rev 4925)
+++ branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_filters/CMakeLists.txt	2009-06-17 05:45:55 UTC (rev 4926)
@@ -8,4 +8,4 @@
 	filter_none.cpp  Q_mainfilter.cpp Q_seekablePreview.cpp ${${ADM_LIB}_header}  ${${ADM_LIB}_source}  ${${ADM_LIB}_resource})
 
 INCLUDE_DIRECTORIES(${CMAKE_CURRENT_BINARY_DIR})
-ADD_ADM_LIB_QT4_TARGET(${ADM_LIB} ${${ADM_LIB}_SRCS})
+ADD_LIBRARY(${ADM_LIB} STATIC ${${ADM_LIB}_SRCS})

Modified: branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_filters/Q_mainfilter.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_filters/Q_mainfilter.cpp	2009-06-16 17:54:45 UTC (rev 4925)
+++ branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_filters/Q_mainfilter.cpp	2009-06-17 05:45:55 UTC (rev 4926)
@@ -33,7 +33,7 @@
 # include "prefs.h"
 //#include "ADM_audiodevice/audio_out.h"
 
-#include "ADM_userInterfaces/ADM_render/GUI_render.h"
+#include "ADM_render/GUI_render.h"
 
 #include "DIA_coreToolkit.h"
 #include "ADM_editor/ADM_edit.hxx"

Modified: branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_gui/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_gui/CMakeLists.txt	2009-06-16 17:54:45 UTC (rev 4925)
+++ branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_gui/CMakeLists.txt	2009-06-17 05:45:55 UTC (rev 4926)
@@ -14,4 +14,4 @@
 INCLUDE_DIRECTORIES(${CMAKE_CURRENT_BINARY_DIR}  ${CMAKE_CURRENT_SOURCE_DIR})
 INCLUDE_DIRECTORIES(${CMAKE_CURRENT_SOURCE_DIR}/../ADM_filters  )
 INCLUDE_DIRECTORIES(${CMAKE_CURRENT_BINARY_DIR}/../ADM_filters  )
-ADD_ADM_LIB_QT4_TARGET(${ADM_LIB} ${${ADM_LIB}_SRCS})
+ADD_LIBRARY(${ADM_LIB} STATIC ${${ADM_LIB}_SRCS})

Modified: branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_gui/CMakeLists.txt.orig
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_gui/CMakeLists.txt.orig	2009-06-16 17:54:45 UTC (rev 4925)
+++ branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_gui/CMakeLists.txt.orig	2009-06-17 05:45:55 UTC (rev 4926)
@@ -9,4 +9,4 @@
 	${${ADM_LIB}_header}  ${${ADM_LIB}_source}  ${${ADM_LIB}_resource})
 
 INCLUDE_DIRECTORIES(${CMAKE_CURRENT_BINARY_DIR}  ${CMAKE_CURRENT_SOURCE_DIR})
-ADD_ADM_LIB_QT4_TARGET(${ADM_LIB} ${${ADM_LIB}_SRCS})
\ No newline at end of file
+ADD_LIBRARY(${ADM_LIB} STATIC ${${ADM_LIB}_SRCS})

Modified: branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_gui/Q_gui2.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_gui/Q_gui2.cpp	2009-06-16 17:54:45 UTC (rev 4925)
+++ branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_gui/Q_gui2.cpp	2009-06-17 05:45:55 UTC (rev 4926)
@@ -25,11 +25,11 @@
 #include "gui_action.hxx"
 #include "ADM_editor/ADM_outputfmt.h"
 #include "DIA_fileSel.h"
-#include "ADM_video/ADM_vidMisc.h"
+#include "ADM_vidMisc.h"
 #include "prefs.h"
 #include "avi_vars.h"
 
-#include "ADM_userInterfaces/ADM_render/GUI_renderInternal.h"
+#include "ADM_render/GUI_renderInternal.h"
 #include "ADM_coreVideoEncoderInternal.h"
 extern int global_argc;
 extern char **global_argv;

Modified: branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_ocr/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_ocr/CMakeLists.txt	2009-06-16 17:54:45 UTC (rev 4925)
+++ branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_ocr/CMakeLists.txt	2009-06-17 05:45:55 UTC (rev 4926)
@@ -9,4 +9,4 @@
 INCLUDE_DIRECTORIES(${CMAKE_CURRENT_BINARY_DIR})
 INCLUDE_DIRECTORIES(${CMAKE_CURRENT_BINARY_DIR})
 INCLUDE_DIRECTORIES("${CMAKE_SOURCE_DIR}/avidemux/ADM_UIs/ADM_QT4/include")
-ADD_ADM_LIB_QT4_TARGET(${ADM_LIB} ${${ADM_LIB}_SRCS})
+ADD_LIBRARY(${ADM_LIB} STATIC ${${ADM_LIB}_SRCS})

Modified: branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/CMakeLists.txt	2009-06-16 17:54:45 UTC (rev 4925)
+++ branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/CMakeLists.txt	2009-06-17 05:45:55 UTC (rev 4926)
@@ -1,10 +1,10 @@
 SET(ADM_LIB ADM_UI_QT4)
 SET(${ADM_LIB}_SRCS ui_support.cpp)
 
-ADD_ADM_LIB_QT4_TARGET(${ADM_LIB} ${${ADM_LIB}_SRCS})
+ADD_LIBRARY(${ADM_LIB} STATIC ${${ADM_LIB}_SRCS})
 INCLUDE_DIRECTORIES(${QT_INCLUDE_DIR}  ${CMAKE_CURRENT_SOURCE_DIR}/../../ADM_UIs/ADM_QT4/include)
-
+INCLUDE_DIRECTORIES(ADM_UIs/include/)
 ADD_SUBDIRECTORY(ADM_dialog)
 ADD_SUBDIRECTORY(ADM_filters)
 ADD_SUBDIRECTORY(ADM_gui)
-ADD_SUBDIRECTORY(ADM_ocr)
+#ADD_SUBDIRECTORY(ADM_ocr)

Modified: branches/avidemux_2.6_branch_mean/avidemux/qt4/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/qt4/CMakeLists.txt	2009-06-16 17:54:45 UTC (rev 4925)
+++ branches/avidemux_2.6_branch_mean/avidemux/qt4/CMakeLists.txt	2009-06-17 05:45:55 UTC (rev 4926)
@@ -20,6 +20,7 @@
 ##########################################
 
 SET(CONFIG_HEADER_TYPE ADM_BUILD_QT4)
+ADD_DEFINITIONS(-DADM_UI_TYPE_BUILD=ADM_UI_QT4)
 CONFIGURE_FILE("${AVIDEMUX_TOP_SOURCE_DIR}/cmake/config.h.cmake" "${CMAKE_BINARY_DIR}/config/qt4/config.h")
 MESSAGE(STATUS "QT4 config.h generated")
 
@@ -32,6 +33,7 @@
 ########################################
 # Add subdirectories 
 ########################################
+INCLUDE_DIRECTORIES(ADM_UIs/include/)
 ADD_SUBDIRECTORY(../common ./common)
 ADD_SUBDIRECTORY(ADM_UIs ./ADM_UIsQt4)
 ADD_SUBDIRECTORY(ADM_userInterfaces ./ADM_userInterfacesQt4)
@@ -62,13 +64,13 @@
 #############################################
 # Add qt specific libs
 #############################################
-#TARGET_LINK_LIBRARIES(avidemux2_qt4 ADM_UIGtk)
-#TARGET_LINK_LIBRARIES(avidemux2_qt4 ADM_dialogGtk)
-#TARGET_LINK_LIBRARIES(avidemux2_qt4 ADM_filtersGtk)
-#TARGET_LINK_LIBRARIES(avidemux2_qt4 ADM_gui2Gtk)
+TARGET_LINK_LIBRARIES(avidemux2_qt4 ADM_UIQT4)
+TARGET_LINK_LIBRARIES(avidemux2_qt4 ADM_dialogQt4)
+TARGET_LINK_LIBRARIES(avidemux2_qt4 ADM_filtersQt4)
+#TARGET_LINK_LIBRARIES(avidemux2_qt4 ADM_guiQt4)
 #TARGET_LINK_LIBRARIES(avidemux2_qt4 ADM_ocrGtk)
 #TARGET_LINK_LIBRARIES(avidemux2_qt4 ADM_toolkitGtk)
-#TARGET_LINK_LIBRARIES(avidemux2_qt4 ADM_UI_GTK)
+TARGET_LINK_LIBRARIES(avidemux2_qt4 ADM_UI_QT4)
 ###########################################
 # External libs
 ###########################################



From mean at mail.berlios.de  Wed Jun 17 20:11:37 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Wed, 17 Jun 2009 20:11:37 +0200
Subject: [Avidemux-svn-commit] r4927 - in
	branches/avidemux_2.6_branch_mean/avidemux: . gtk qt4
	qt4/ADM_userInterfaces
Message-ID: <200906171811.n5HIBbQM016374@sheep.berlios.de>

Author: mean
Date: 2009-06-17 20:11:37 +0200 (Wed, 17 Jun 2009)
New Revision: 4927

Added:
   branches/avidemux_2.6_branch_mean/avidemux/gtk/gtkPackageDebian.cmake
Removed:
   branches/avidemux_2.6_branch_mean/avidemux/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux/avidemuxPackageDebian.cmake
   branches/avidemux_2.6_branch_mean/avidemux/gtkPackageDebian.cmake
Modified:
   branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux/qt4/CMakeLists.txt
Log:
[build] Fix qt4 on linux

Deleted: branches/avidemux_2.6_branch_mean/avidemux/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/CMakeLists.txt	2009-06-17 05:45:55 UTC (rev 4926)
+++ branches/avidemux_2.6_branch_mean/avidemux/CMakeLists.txt	2009-06-17 18:11:37 UTC (rev 4927)
@@ -1,466 +0,0 @@
-########################################
-# Macros
-########################################
-MACRO (ADD_ADMLIB_ALL_TARGETS)
-	FOREACH (_libName ${ARGV})
-		TARGET_LINK_LIBRARIES(avidemux2_cli ${_libName}_cli)
-
-		IF (ADM_UI_GTK)
-			TARGET_LINK_LIBRARIES(avidemux2_gtk ${_libName}_gtk)
-		ENDIF (ADM_UI_GTK)
-
-		IF (ADM_UI_QT4)
-			TARGET_LINK_LIBRARIES(avidemux2_qt4 ${_libName}_qt4)
-		ENDIF (ADM_UI_QT4)
-	ENDFOREACH (_libName ${ARGV})
-ENDMACRO (ADD_ADMLIB_ALL_TARGETS)
-
-
-MACRO (ADD_LIB_ALL_TARGETS)
-	TARGET_LINK_LIBRARIES(avidemux2_cli ${ARGV})
-
-	IF (ADM_UI_GTK)
-		TARGET_LINK_LIBRARIES(avidemux2_gtk ${ARGV})
-	ENDIF (ADM_UI_GTK)
-
-	IF (ADM_UI_QT4)
-		TARGET_LINK_LIBRARIES(avidemux2_qt4 ${ARGV})
-	ENDIF (ADM_UI_QT4)
-ENDMACRO (ADD_LIB_ALL_TARGETS)
-
-
-MACRO (ADD_LDFLAGS_ALL_TARGETS)
-	ADD_TARGET_LDFLAGS(avidemux2_cli ${ARGV})
-
-	IF (ADM_UI_GTK)
-		ADD_TARGET_LDFLAGS(avidemux2_gtk ${ARGV})
-	ENDIF (ADM_UI_GTK)
-
-	IF (ADM_UI_QT4)
-		ADD_TARGET_LDFLAGS(avidemux2_qt4 ${ARGV})
-	ENDIF (ADM_UI_QT4)
-ENDMACRO (ADD_LDFLAGS_ALL_TARGETS)
-
-########################################
-# Definitions and Includes
-########################################
-ADD_DEFINITIONS(-D_FILE_OFFSET_BITS=64 -D_LARGE_FILES)
-ADD_DEFINITIONS(-DHAVE_CONFIG_H)
-
-IF (ADM_DEBUG)
-	ADD_DEFINITIONS(-DADM_DEBUG)
-ENDIF (ADM_DEBUG)
-
-INCLUDE_DIRECTORIES("${CMAKE_CURRENT_SOURCE_DIR}")
-INCLUDE_DIRECTORIES("${CMAKE_BINARY_DIR}/config")
-# temp
-INCLUDE_DIRECTORIES("${CMAKE_CURRENT_SOURCE_DIR}/ADM_audioFilter_old/")
-INCLUDE_DIRECTORIES("${CMAKE_CURRENT_SOURCE_DIR}/ADM_libraries/")
-INCLUDE_DIRECTORIES("${CMAKE_CURRENT_SOURCE_DIR}/ADM_libraries/ADM_ffmpeg/libavutil")
-INCLUDE_DIRECTORIES("${CMAKE_CURRENT_SOURCE_DIR}/ADM_libraries/ADM_ffmpeg/")
-INCLUDE_DIRECTORIES("${CMAKE_CURRENT_SOURCE_DIR}/ADM_libraries/ADM_ffmpeg/libavcodec")
-INCLUDE_DIRECTORIES("${CMAKE_CURRENT_SOURCE_DIR}/ADM_muxerGate/include/")
-
-IF (GETTEXT_FOUND)
-	INCLUDE_DIRECTORIES(${GETTEXT_INCLUDE_DIR})
-ENDIF (GETTEXT_FOUND)
-
-###########################################
-#  Our own shared libs
-###########################################
-SET(ADM_CORES
-        ADM_core
-        ADM_coreUI
-        ADM_coreImage
-        ADM_audioParser
-        ADM_coreAudioEncoder
-        ADM_coreAudio
-        ADM_audioFilter
-        ADM_coreDemuxer
-        ADM_coreDemuxerMpeg
-        ADM_coreAudioDevice
-        ADM_coreUtils
-        ADM_coreMuxer
-        ADM_coreVideoFilter
-        ADM_coreVideoEncoder
-)
-FOREACH(_current ${ADM_CORES})
-        INCLUDE_DIRECTORIES(${_current}/include)
-ENDFOREACH(_current ${ADM_CORES})
-
-
-########################################
-# Embed resources for executables
-########################################
-IF (APPLE)
-	# add icon
-	SET(ADM_EXE_SRCS ${ADM_EXE_SRCS} ${CMAKE_CURRENT_SOURCE_DIR}/xpm/avidemux.icns)
-	SET_SOURCE_FILES_PROPERTIES(${CMAKE_CURRENT_SOURCE_DIR}/xpm/avidemux.icns PROPERTIES MACOSX_PACKAGE_LOCATION Resources)
-
-	# bundle version info
-	SET(ADM_OSX_VERSION "${VERSION}")
-
-	IF (Subversion_FOUND)
-		SET(ADM_OSX_VERSION "${ADM_OSX_VERSION} (r${ADM_SUBVERSION})")
-	ENDIF (Subversion_FOUND)
-
-	SET(MACOSX_BUNDLE_ICON_FILE avidemux.icns)
-	SET(MACOSX_BUNDLE_INFO_STRING "Avidemux ${ADM_OSX_VERSION}")
-	SET(MACOSX_BUNDLE_LONG_VERSION_STRING "${ADM_OSX_VERSION}") 
-	SET(MACOSX_BUNDLE_SHORT_VERSION_STRING "${ADM_OSX_VERSION}")
-	SET(MACOSX_BUNDLE_VERSION "${ADM_OSX_VERSION}")
-
-	# include translation files in bundle
-	# this isn't the cleanest approach but there's not much we can do until the po directory is under the avidemux directory
-	FILE(GLOB PO_FILES ${CMAKE_SOURCE_DIR}/po/*.po)
-
-	FOREACH(_file ${PO_FILES})
-		GET_FILENAME_COMPONENT(_filename ${_file} NAME_WE)
-		SET(_mofile "${CMAKE_BINARY_DIR}/po/${_filename}/avidemux.mo")
-
-		SET(MO_FILES ${MO_FILES} ${_mofile})
-		SET_SOURCE_FILES_PROPERTIES(${_mofile} PROPERTIES GENERATED TRUE MACOSX_PACKAGE_LOCATION "Resources/locale/${_filename}/LC_MESSAGES")
-	ENDFOREACH(_file)
-
-	FILE(GLOB TS_FILES ${CMAKE_SOURCE_DIR}/po/*.ts)
-
-	FOREACH(_file ${TS_FILES})
-		GET_FILENAME_COMPONENT(_filename ${_file} NAME_WE)
-		SET(_qmfile "${CMAKE_BINARY_DIR}/po/${_filename}.qm")
-
-		SET(QM_FILES ${QM_FILES} ${_qmfile})
-		SET_SOURCE_FILES_PROPERTIES(${_qmfile} PROPERTIES GENERATED TRUE MACOSX_PACKAGE_LOCATION "Resources/locale")
-	ENDFOREACH(_file)
-ENDIF (APPLE)
-
-IF (WIN32)
-	# add icon and version info
-	SET(FILEVERSION_STRING "${VERSION}.${ADM_SUBVERSION}")
-	SET(PRODUCTVERSION_STRING "${VERSION}")
-	STRING(REPLACE "." "," FILEVERSION ${FILEVERSION_STRING})
-	STRING(REPLACE "." "," PRODUCTVERSION ${PRODUCTVERSION_STRING})
-	SET(PRODUCTVERSION "${PRODUCTVERSION},0")
-
-	#CONFIGURE_FILE("${CMAKE_SOURCE_DIR}/cmake/admWin32.rc.in" ${CMAKE_CURRENT_BINARY_DIR}/admWin32.rc IMMEDIATE)
-	#ADD_CUSTOM_COMMAND(OUTPUT ${CMAKE_CURRENT_BINARY_DIR}/admWin32.obj COMMAND windres.exe -i ${CMAKE_CURRENT_BINARY_DIR}/admWin32.rc -o ${CMAKE_CURRENT_BINARY_DIR}/admWin32.obj -O coff --define VS_VERSION_INFO=1)
-
-	#SET(ADM_EXE_SRCS ${ADM_EXE_SRCS} "${CMAKE_CURRENT_BINARY_DIR}/admWin32.obj")
-ENDIF (WIN32)
-
-########################################
-# Our exectuables
-########################################
-SET(ADM_EXE_SRCS ${ADM_EXE_SRCS} ADM_preview.cpp  
-gtk_gui.cpp  
-gui_autodrive.cpp  
-GUI_jobs.cpp  
-gui_navigate.cpp  
-gui_play.cpp  
-gui_save.cpp  
-gui_savenew.cpp  
-gui_misc.cpp
-main.cpp  
-gui_action.cpp
-gui_blackframes.cpp
-ADM_imageLoader.cpp  
-ADM_gettext.cpp
-)
-
-ADD_EXECUTABLE(avidemux2_cli MACOSX_BUNDLE ${ADM_EXE_SRCS} ${MO_FILES})
-ADD_TARGET_CFLAGS(avidemux2_cli "-I${CMAKE_BINARY_DIR}/config/cli")
-ADD_DEPENDENCIES(avidemux2_cli mofiles)
-
-IF (ADM_UI_GTK)
-	ADD_EXECUTABLE(avidemux2_gtk MACOSX_BUNDLE ${ADM_EXE_SRCS} ${MO_FILES})
-	ADD_TARGET_CFLAGS(avidemux2_gtk "-I${CMAKE_BINARY_DIR}/config/gtk")
-	ADD_DEPENDENCIES(avidemux2_gtk mofiles)
-ENDIF (ADM_UI_GTK)
-
-IF (ADM_UI_QT4)
-	ADD_EXECUTABLE(avidemux2_qt4 MACOSX_BUNDLE ${ADM_EXE_SRCS} ${QM_FILES})
-	ADD_TARGET_CFLAGS(avidemux2_qt4 "-I${CMAKE_BINARY_DIR}/config/qt4")
-	ADD_DEPENDENCIES(avidemux2_qt4 qmfiles)
-ENDIF (ADM_UI_QT4)
-
-SDLify(main.cpp)
-ADD_SOURCE_CFLAGS(main.cpp "-DADM_SUBVERSION=${ADM_SUBVERSION}")
-
-########################################
-# Compile and link general subdirs
-########################################
-SET(ADM_SUBDIR 
-	ADM_audioFilter_old
-	ADM_editor
-	ADM_muxerGate
-	ADM_audiocodec
-	#ADM_audio
-	ADM_script
-	ADM_filter
-	ADM_videoFilter
-	ADM_video
-)
-FOREACH(_current ${ADM_SUBDIR})
-	ADD_SUBDIRECTORY(${_current})
-	ADD_LIB_ALL_TARGETS(${_current})
-ENDFOREACH(_current ${ADM_SUBDIR})
-########################################################
-# The part of the video filter that is inside avidemux
-########################################################
-ADD_LIB_ALL_TARGETS(ADM_internalVideoFilter)
-ADD_LIB_ALL_TARGETS(ADM_internalVideoEncoder)
-###########################################
-# Construct ADM_UIs
-###########################################
-ADD_SUBDIRECTORY(ADM_UIs)
-
-
-#########################################
-# Tails
-#########################################
-SET(ADM_TAILS
-	ADM_osSupport
-	#ADM_encoder
-	ADM_toolkit
-	ADM_requant
-	)
-
-FOREACH(_current ${ADM_TAILS})
-	ADD_SUBDIRECTORY(${_current})
-	ADD_LIB_ALL_TARGETS(${_current})
-ENDFOREACH(_current ${ADM_TAILS})
-#
-# These libs depend (for now) on config.h
-# so we have to build them for each UI
-#
-	ADD_SUBDIRECTORY(ADM_codecs)
-	ADD_ADMLIB_ALL_TARGETS(ADM_codecs)
-###########################################
-# Construct ADM_libraries
-###########################################
-ADD_SUBDIRECTORY(ADM_libraries)
-
-ADD_LIB_ALL_TARGETS(
-	#ADM_libmpeg2enc
-	ADM_xvidratectl
-)
-ADD_LIB_ALL_TARGETS(
-	ADM_smjs
-	ADM_libavutil
-	ADM_libpostproc
-	ADM_libswscale
-	ADM_libavcodec
-	ADM_libavformat)
-
-
-IF (ADM_DEBUG AND FIND_LEAKS)
-	ADD_ADMLIB_ALL_TARGETS(ADM_nvwa)
-ENDIF (ADM_DEBUG AND FIND_LEAKS)
-
-IF (APPLE AND USE_SDL)
-	IF (ADM_UI_GTK)
-		TARGET_LINK_LIBRARIES(avidemux2_gtk ADM_libsdl_gtk)
-	ENDIF (ADM_UI_GTK)
-
-	IF (ADM_UI_QT4)
-		TARGET_LINK_LIBRARIES(avidemux2_qt4 ADM_libsdl_qt4)
-	ENDIF (ADM_UI_QT4)
-ENDIF (APPLE AND USE_SDL)
-
-###########################################
-# Construct ADM_userInterface
-###########################################
-ADD_SUBDIRECTORY(ADM_userInterfaces)
-
-TARGET_LINK_LIBRARIES(avidemux2_cli
-	ADM_UI_None_cli
-	ADM_commonUI_cli
-	#ADM_ocr_cli
-	ADM_dialogNone_cli
-	ADM_dialogFiltersNone_cli
-	ADM_dialogGuiNone_cli
-        ADM_UICli
-        ADM_render_cli
-)
-
-IF (ADM_UI_GTK)
-	TARGET_LINK_LIBRARIES(avidemux2_gtk
-		ADM_UI_GTK_gtk
-		ADM_commonUI_gtk
-		#ADM_ocr_gtk
-		#ADM_ocrGtk_gtk
-		ADM_dialogGtk_gtk
-		ADM_filtersGtk_gtk
-		ADM_gui2Gtk_gtk
-		ADM_commonUI_gtk
-                ADM_toolkitGtk_gtk
-                ADM_UIGtk
-                ADM_render_gtk
-                )
-ENDIF (ADM_UI_GTK)
-
-IF (ADM_UI_QT4)
-	TARGET_LINK_LIBRARIES(avidemux2_qt4
-		ADM_UI_QT4_qt4
-		ADM_commonUI_qt4
-		#ADM_ocr_qt4
-		#ADM_ocrQt4_qt4
-		ADM_dialogQt4_qt4
-		ADM_guiQt4_qt4
-		ADM_filtersQt4_qt4
-		ADM_commonUI_qt4
-		ADM_dialogQt4_qt4
-                ADM_UIQT4
-                ADM_render_qt4
-)
-ENDIF (ADM_UI_QT4)
-# Add the core libs
-FOREACH(_current ${ADM_CORES})
-	ADD_SUBDIRECTORY(${_current})
-	ADD_LIB_ALL_TARGETS(${_current})
-ENDFOREACH(_current ${ADM_CORES})
-
-# To be removed
-#ADD_SUBDIRECTORY(ADM_audioEncoder)
-
-###########################################
-# External libs
-###########################################
-# gettext
-IF (GETTEXT_FOUND)
-	TARGET_LINK_LIBRARIES(avidemux2_cli ${GETTEXT_LIBRARY_DIR})
-
-	IF (ADM_UI_GTK)
-		TARGET_LINK_LIBRARIES(avidemux2_gtk ${GETTEXT_LIBRARY_DIR})
-	ENDIF (ADM_UI_GTK)
-ENDIF (GETTEXT_FOUND)
-
-# pthreads
-IF (UNIX AND PTHREAD_FOUND)
-	ADD_LIB_ALL_TARGETS("${PTHREAD_LIBRARIES}")
-ENDIF (UNIX AND PTHREAD_FOUND)
-
-# PNG
-IF (USE_PNG)
-	TARGET_LINK_LIBRARIES(avidemux2_cli ${PNG_LIBRARIES})
-	
-	IF (ADM_UI_GTK)
-		TARGET_LINK_LIBRARIES(avidemux2_gtk ${PNG_LIBRARIES})
-	ENDIF (ADM_UI_GTK)
-	
-	IF (ADM_UI_QT4)
-		IF (APPLE AND NOT QT_USE_FRAMEWORKS)
-			TARGET_LINK_LIBRARIES(avidemux2_qt4 ${PNG_LIBRARIES})
-		ELSEIF (NOT APPLE)
-			TARGET_LINK_LIBRARIES(avidemux2_qt4 ${PNG_LIBRARIES})
-		ENDIF (APPLE AND NOT QT_USE_FRAMEWORKS)
-	ENDIF (ADM_UI_QT4)
-ENDIF (USE_PNG)
-
-
-# XVideo
-IF (USE_XV)
-	IF (ADM_UI_GTK)
-		TARGET_LINK_LIBRARIES(avidemux2_gtk ${XVIDEO_LIBRARY_DIR})
-	ENDIF (ADM_UI_GTK)
-
-	IF (ADM_UI_QT4)
-		TARGET_LINK_LIBRARIES(avidemux2_qt4 ${XVIDEO_LIBRARY_DIR})
-	ENDIF (ADM_UI_QT4)
-ENDIF (USE_XV)
-
-# SDL
-IF (USE_SDL)
-	IF (ADM_UI_GTK)
-		TARGET_LINK_LIBRARIES(avidemux2_gtk ${SDL_LIBRARY})
-	ENDIF (ADM_UI_GTK)
-
-	IF (ADM_UI_QT4)
-		TARGET_LINK_LIBRARIES(avidemux2_qt4 ${SDL_LIBRARY})
-	ENDIF (ADM_UI_QT4)
-ENDIF (USE_SDL)
-# LAME
-IF (HAVE_LIBMP3LAME)
-	ADD_LIB_ALL_TARGETS("${LAME_LIBRARY_DIR}")
-ENDIF (HAVE_LIBMP3LAME)
-
-# Vorbis
-IF (USE_VORBIS)
-	ADD_LIB_ALL_TARGETS("${VORBIS_LIBRARY_DIR}")
-	ADD_LIB_ALL_TARGETS("${VORBISENC_LIBRARY_DIR}")
-ENDIF (USE_VORBIS)
-
-# FAAC
-IF (USE_FAAC)
-	ADD_LIB_ALL_TARGETS("${FAAC_LIBRARY_DIR}")
-ENDIF (USE_FAAC)
-
-# Aften
-IF (USE_AFTEN)
-	ADD_LIB_ALL_TARGETS("${AFTEN_LIBRARY_DIR}")
-ENDIF (USE_AFTEN)
-
-# Secret Rabbit Code
-IF (USE_SRC)
-	ADD_LIB_ALL_TARGETS("${SRC_LIBRARY_DIR}")
-ENDIF (USE_SRC)
-
-# Xvid
-IF (USE_XVID_4)
-	ADD_LIB_ALL_TARGETS("${XVID_LIBRARY_DIR}")
-ENDIF (USE_XVID_4)
-
-###########################################
-# UI Specific
-###########################################
-IF (ADM_UI_GTK)
-	ADD_TARGET_LDFLAGS(avidemux2_gtk ${GTK_LDFLAGS} ${GTHREAD_LDFLAGS})
-ENDIF (ADM_UI_GTK)
-
-IF (ADM_UI_QT4)
-	TARGET_LINK_LIBRARIES(avidemux2_qt4 ${QT_QTGUI_LIBRARY} ${QT_QTCORE_LIBRARY})
-ENDIF (ADM_UI_QT4)
-
-###########################################
-# OS Specific
-###########################################
-IF (WIN32)
-	ADD_LIB_ALL_TARGETS(ADM_osSupport)
-
-	IF (MINGW)
-		ADD_LIB_ALL_TARGETS(-mno-cygwin)
-	ENDIF (MINGW)
-
-	ADD_LIB_ALL_TARGETS(winmm)
-
-	ADD_TARGET_LDFLAGS(avidemux2_cli "-Wl,-subsystem,console")
-
-	IF (ADM_UI_GTK)
-		ADD_TARGET_LDFLAGS(avidemux2_gtk "-mwindows")
-	ENDIF (ADM_UI_GTK)
-
-	IF (ADM_UI_QT4)
-		ADD_TARGET_LDFLAGS(avidemux2_qt4 "-mwindows")
-	ENDIF (ADM_UI_QT4)
-ENDIF (WIN32)
-
-IF (APPLE)
-	ADD_LIB_ALL_TARGETS("-framework CoreServices -framework CoreAudio -framework AudioUnit -framework Carbon -framework Cocoa")
-
-	# for Leopard but it doesn't hurt Tiger
-	ADD_LIB_ALL_TARGETS("-Wl,-dylib_file,/System/Library/Frameworks/OpenGL.framework/Versions/A/Libraries/libGL.dylib:/System/Library/Frameworks/OpenGL.framework/Versions/A/Libraries/libGL.dylib")
-ENDIF (APPLE)
-
-###########################################
-# Install
-###########################################
-SET(ADM_EXES avidemux2_cli)
-
-IF (ADM_UI_GTK)
-	SET(ADM_EXES ${ADM_EXES} avidemux2_gtk)
-ENDIF (ADM_UI_GTK)
-
-IF (ADM_UI_QT4)
-	SET(ADM_EXES ${ADM_EXES} avidemux2_qt4)
-ENDIF (ADM_UI_QT4)
-
-INSTALL(TARGETS ${ADM_EXES} RUNTIME DESTINATION ${BIN_DIR} LIBRARY DESTINATION lib)

Deleted: branches/avidemux_2.6_branch_mean/avidemux/avidemuxPackageDebian.cmake
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/avidemuxPackageDebian.cmake	2009-06-17 05:45:55 UTC (rev 4926)
+++ branches/avidemux_2.6_branch_mean/avidemux/avidemuxPackageDebian.cmake	2009-06-17 18:11:37 UTC (rev 4927)
@@ -1,32 +0,0 @@
-##############################
-# DEBIAN
-##############################
-SET(CPACK_DEBIAN_PACKAGE_NAME "avidemux")
-SET (CPACK_GENERATOR "DEB")
-# ARCH
-IF (X86_64_SUPPORTED)
-SET(CPACK_DEBIAN_PACKAGE_ARCHITECTURE "amd64")
-ELSE (X86_64_SUPPORTED)
-SET(CPACK_DEBIAN_PACKAGE_ARCHITECTURE "i386")
-ENDIF (X86_64_SUPPORTED)
-# Mandatory
-SET(CPACK_DEBIAN_PACKAGE_MAINTAINER "mean")
-SET(CPACK_DEBIAN_PACKAGE_DESCRIPTION "Simple video editor")
-
-# Build our deps list
-# Build deps SET(DEPS "debhelper (>> 4), libfreetype6-dev, libxml2-dev,  libxv-dev, dpatch , cmake, desktop-file-utils")
-SET(DEPS "libc6 (>=2.4),libglib2.0-0 (>=2.14.0),libstdc++6 (>=4.2.1),libx11-6, libext6, libxml2 (>=2.6.27), libxv1, zlib1g (>=1:1.1.4)")
-# Add optional DEPS here
-SET(CPACK_DEBIAN_PACKAGE_DEPENDS "${DEPS}")
-#
-SET(CPACK_DEBIAN_PACKAGE_SECTION "extra")
-SET(CPACK_DEBIAN_PACKAGE_PRIORITY "optional")
-# Some more infos
-SET(CPACK_PACKAGE_VERSION_MAJOR "2")
-SET(CPACK_PACKAGE_VERSION_MINOR "6")
-SET(CPACK_PACKAGE_VERSION_PATCH "0")
-#
-SET(CPACK_PACKAGE_NAME "avidemux")
-#
-
-include(CPack)

Copied: branches/avidemux_2.6_branch_mean/avidemux/gtk/gtkPackageDebian.cmake (from rev 4926, branches/avidemux_2.6_branch_mean/avidemux/gtkPackageDebian.cmake)
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/gtkPackageDebian.cmake	2009-06-17 05:45:55 UTC (rev 4926)
+++ branches/avidemux_2.6_branch_mean/avidemux/gtk/gtkPackageDebian.cmake	2009-06-17 18:11:37 UTC (rev 4927)
@@ -0,0 +1,32 @@
+##############################
+# DEBIAN
+##############################
+SET(CPACK_DEBIAN_PACKAGE_NAME "avidemux2-gtk")
+SET (CPACK_GENERATOR "DEB")
+# ARCH
+IF (X86_64_SUPPORTED)
+SET(CPACK_DEBIAN_PACKAGE_ARCHITECTURE "amd64")
+ELSE (X86_64_SUPPORTED)
+SET(CPACK_DEBIAN_PACKAGE_ARCHITECTURE "i386")
+ENDIF (X86_64_SUPPORTED)
+# Mandatory
+SET(CPACK_DEBIAN_PACKAGE_MAINTAINER "mean")
+SET(CPACK_DEBIAN_PACKAGE_DESCRIPTION "Simple video editori,main program gtk version ")
+
+# Build our deps list
+# Build deps SET(DEPS "debhelper (>> 4), libfreetype6-dev, libxml2-dev,  libxv-dev, dpatch , cmake, desktop-file-utils")
+SET(DEPS "libc6 (>=2.4),libglib2.0-0 (>=2.14.0),libstdc++6 (>=4.2.1),libx11-6, libext6, libxml2 (>=2.6.27), libxv1, zlib1g (>=1:1.1.4), avidemux2_core (>=2.6.0)")
+# Add optional DEPS here
+SET(CPACK_DEBIAN_PACKAGE_DEPENDS "${DEPS}")
+#
+SET(CPACK_DEBIAN_PACKAGE_SECTION "extra")
+SET(CPACK_DEBIAN_PACKAGE_PRIORITY "optional")
+# Some more infos
+SET(CPACK_PACKAGE_VERSION_MAJOR "2")
+SET(CPACK_PACKAGE_VERSION_MINOR "6")
+SET(CPACK_PACKAGE_VERSION_PATCH "0")
+#
+SET(CPACK_PACKAGE_NAME "avidemux2-gtk")
+#
+
+include(CPack)

Deleted: branches/avidemux_2.6_branch_mean/avidemux/gtkPackageDebian.cmake
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/gtkPackageDebian.cmake	2009-06-17 05:45:55 UTC (rev 4926)
+++ branches/avidemux_2.6_branch_mean/avidemux/gtkPackageDebian.cmake	2009-06-17 18:11:37 UTC (rev 4927)
@@ -1,32 +0,0 @@
-##############################
-# DEBIAN
-##############################
-SET(CPACK_DEBIAN_PACKAGE_NAME "avidemux2-gtk")
-SET (CPACK_GENERATOR "DEB")
-# ARCH
-IF (X86_64_SUPPORTED)
-SET(CPACK_DEBIAN_PACKAGE_ARCHITECTURE "amd64")
-ELSE (X86_64_SUPPORTED)
-SET(CPACK_DEBIAN_PACKAGE_ARCHITECTURE "i386")
-ENDIF (X86_64_SUPPORTED)
-# Mandatory
-SET(CPACK_DEBIAN_PACKAGE_MAINTAINER "mean")
-SET(CPACK_DEBIAN_PACKAGE_DESCRIPTION "Simple video editori,main program gtk version ")
-
-# Build our deps list
-# Build deps SET(DEPS "debhelper (>> 4), libfreetype6-dev, libxml2-dev,  libxv-dev, dpatch , cmake, desktop-file-utils")
-SET(DEPS "libc6 (>=2.4),libglib2.0-0 (>=2.14.0),libstdc++6 (>=4.2.1),libx11-6, libext6, libxml2 (>=2.6.27), libxv1, zlib1g (>=1:1.1.4), avidemux2_core (>=2.6.0)")
-# Add optional DEPS here
-SET(CPACK_DEBIAN_PACKAGE_DEPENDS "${DEPS}")
-#
-SET(CPACK_DEBIAN_PACKAGE_SECTION "extra")
-SET(CPACK_DEBIAN_PACKAGE_PRIORITY "optional")
-# Some more infos
-SET(CPACK_PACKAGE_VERSION_MAJOR "2")
-SET(CPACK_PACKAGE_VERSION_MINOR "6")
-SET(CPACK_PACKAGE_VERSION_PATCH "0")
-#
-SET(CPACK_PACKAGE_NAME "avidemux2-gtk")
-#
-
-include(CPack)

Modified: branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/CMakeLists.txt	2009-06-17 05:45:55 UTC (rev 4926)
+++ branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/CMakeLists.txt	2009-06-17 18:11:37 UTC (rev 4927)
@@ -1,10 +1,9 @@
 SET(ADM_LIB ADM_UI_QT4)
 SET(${ADM_LIB}_SRCS ui_support.cpp)
-
 ADD_LIBRARY(${ADM_LIB} STATIC ${${ADM_LIB}_SRCS})
+
 INCLUDE_DIRECTORIES(${QT_INCLUDE_DIR}  ${CMAKE_CURRENT_SOURCE_DIR}/../../ADM_UIs/ADM_QT4/include)
 INCLUDE_DIRECTORIES(ADM_UIs/include/)
+subdirs (PREORDER ADM_filters)
 ADD_SUBDIRECTORY(ADM_dialog)
-ADD_SUBDIRECTORY(ADM_filters)
 ADD_SUBDIRECTORY(ADM_gui)
-#ADD_SUBDIRECTORY(ADM_ocr)

Modified: branches/avidemux_2.6_branch_mean/avidemux/qt4/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/qt4/CMakeLists.txt	2009-06-17 05:45:55 UTC (rev 4926)
+++ branches/avidemux_2.6_branch_mean/avidemux/qt4/CMakeLists.txt	2009-06-17 18:11:37 UTC (rev 4927)
@@ -36,7 +36,7 @@
 INCLUDE_DIRECTORIES(ADM_UIs/include/)
 ADD_SUBDIRECTORY(../common ./common)
 ADD_SUBDIRECTORY(ADM_UIs ./ADM_UIsQt4)
-ADD_SUBDIRECTORY(ADM_userInterfaces ./ADM_userInterfacesQt4)
+ADD_SUBDIRECTORY(ADM_userInterfaces ./ADM_userInterfacesQT4)
 # Executable
 
 SDLify(../common/main.cpp)
@@ -60,16 +60,16 @@
 FOREACH (_libName ${coreLibs})
         TARGET_LINK_LIBRARIES(avidemux2_qt4 ${_libName})
 ENDFOREACH (_libName ${commonLibs})
+        TARGET_LINK_LIBRARIES(avidemux2_qt4 ADM_filter)
 
 #############################################
 # Add qt specific libs
 #############################################
 TARGET_LINK_LIBRARIES(avidemux2_qt4 ADM_UIQT4)
 TARGET_LINK_LIBRARIES(avidemux2_qt4 ADM_dialogQt4)
+TARGET_LINK_LIBRARIES(avidemux2_qt4 ADM_guiQt4)
 TARGET_LINK_LIBRARIES(avidemux2_qt4 ADM_filtersQt4)
-#TARGET_LINK_LIBRARIES(avidemux2_qt4 ADM_guiQt4)
-#TARGET_LINK_LIBRARIES(avidemux2_qt4 ADM_ocrGtk)
-#TARGET_LINK_LIBRARIES(avidemux2_qt4 ADM_toolkitGtk)
+TARGET_LINK_LIBRARIES(avidemux2_qt4 ADM_guiQt4)
 TARGET_LINK_LIBRARIES(avidemux2_qt4 ADM_UI_QT4)
 ###########################################
 # External libs



From mean at mail.berlios.de  Thu Jun 18 19:42:55 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Thu, 18 Jun 2009 19:42:55 +0200
Subject: [Avidemux-svn-commit] r4928 -
	branches/avidemux_2.6_branch_mean/avidemux/common/ADM_commonUI
Message-ID: <200906181742.n5IHgtf0015432@sheep.berlios.de>

Author: mean
Date: 2009-06-18 19:42:54 +0200 (Thu, 18 Jun 2009)
New Revision: 4928

Modified:
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_commonUI/DIA_prefs.cpp
Log:
[Win32] fix

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_commonUI/DIA_prefs.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_commonUI/DIA_prefs.cpp	2009-06-17 18:11:37 UTC (rev 4927)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_commonUI/DIA_prefs.cpp	2009-06-18 17:42:54 UTC (rev 4928)
@@ -24,7 +24,7 @@
 #include "DIA_factory.h"
 
 #ifdef __WIN32
-#include "ADM_userInterfaces/ADM_render/GUI_sdlRender.h"
+#include "ADM_render/GUI_sdlRender.h"
 #endif
 
 extern void 		AVDM_audioPref( void );



From mean at mail.berlios.de  Thu Jun 18 19:50:31 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Thu, 18 Jun 2009 19:50:31 +0200
Subject: [Avidemux-svn-commit] r4929 -
	branches/avidemux_2.6_branch_mean/avidemux
Message-ID: <200906181750.n5IHoVOj016379@sheep.berlios.de>

Author: mean
Date: 2009-06-18 19:50:31 +0200 (Thu, 18 Jun 2009)
New Revision: 4929

Removed:
   branches/avidemux_2.6_branch_mean/avidemux/ADM_UIs/
   branches/avidemux_2.6_branch_mean/avidemux/ADM_audio/
   branches/avidemux_2.6_branch_mean/avidemux/ADM_audioFilter/
   branches/avidemux_2.6_branch_mean/avidemux/ADM_audioFilter_old/
   branches/avidemux_2.6_branch_mean/avidemux/ADM_audioParser/
   branches/avidemux_2.6_branch_mean/avidemux/ADM_audiocodec/
   branches/avidemux_2.6_branch_mean/avidemux/ADM_codecs/
   branches/avidemux_2.6_branch_mean/avidemux/ADM_core/
   branches/avidemux_2.6_branch_mean/avidemux/ADM_coreAudio/
   branches/avidemux_2.6_branch_mean/avidemux/ADM_coreAudioDevice/
   branches/avidemux_2.6_branch_mean/avidemux/ADM_coreAudioEncoder/
   branches/avidemux_2.6_branch_mean/avidemux/ADM_coreDemuxer/
   branches/avidemux_2.6_branch_mean/avidemux/ADM_coreDemuxerMpeg/
   branches/avidemux_2.6_branch_mean/avidemux/ADM_coreImage/
   branches/avidemux_2.6_branch_mean/avidemux/ADM_coreMuxer/
   branches/avidemux_2.6_branch_mean/avidemux/ADM_coreUI/
   branches/avidemux_2.6_branch_mean/avidemux/ADM_coreUtils/
   branches/avidemux_2.6_branch_mean/avidemux/ADM_coreVideoEncoder/
   branches/avidemux_2.6_branch_mean/avidemux/ADM_coreVideoFilter/
   branches/avidemux_2.6_branch_mean/avidemux/ADM_editor/
   branches/avidemux_2.6_branch_mean/avidemux/ADM_encoder/
   branches/avidemux_2.6_branch_mean/avidemux/ADM_filter/
   branches/avidemux_2.6_branch_mean/avidemux/ADM_infoExtractor/
   branches/avidemux_2.6_branch_mean/avidemux/ADM_inputs/
   branches/avidemux_2.6_branch_mean/avidemux/ADM_libraries/
   branches/avidemux_2.6_branch_mean/avidemux/ADM_mpegIndexer/
   branches/avidemux_2.6_branch_mean/avidemux/ADM_muxerGate/
   branches/avidemux_2.6_branch_mean/avidemux/ADM_ocr/
   branches/avidemux_2.6_branch_mean/avidemux/ADM_osSupport/
   branches/avidemux_2.6_branch_mean/avidemux/ADM_outputs/
   branches/avidemux_2.6_branch_mean/avidemux/ADM_plugin/
   branches/avidemux_2.6_branch_mean/avidemux/ADM_requant/
   branches/avidemux_2.6_branch_mean/avidemux/ADM_script/
   branches/avidemux_2.6_branch_mean/avidemux/ADM_toolkit/
   branches/avidemux_2.6_branch_mean/avidemux/ADM_userInterfaces/
   branches/avidemux_2.6_branch_mean/avidemux/ADM_video/
   branches/avidemux_2.6_branch_mean/avidemux/ADM_videoFilter/
Log:
[cleanup] Remove moved directories



From mean at mail.berlios.de  Sat Jun 20 09:39:21 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sat, 20 Jun 2009 09:39:21 +0200
Subject: [Avidemux-svn-commit] r4930 - in branches/avidemux_2.6_branch_mean:
	avidemux_core avidemux_core/ADM_core/src
	avidemux_core/ADM_coreAudio/src
	avidemux_core/ADM_coreAudioDevice/src
	avidemux_core/ADM_coreAudioEncoder/src
	avidemux_core/ADM_coreAudioFilter/src
	avidemux_core/ADM_coreAudioParser/src
	avidemux_core/ADM_coreDemuxer/src
	avidemux_core/ADM_coreDemuxerMpeg/src
	avidemux_core/ADM_coreImage/src
	avidemux_core/ADM_coreMuxer/src avidemux_core/ADM_coreUI/src
	avidemux_core/ADM_coreUtils/src
	avidemux_core/ADM_coreVideoEncoder/src
	avidemux_core/ADM_coreVideoFilter/src cmake
Message-ID: <200906200739.n5K7dLvh012561@sheep.berlios.de>

Author: mean
Date: 2009-06-20 09:39:20 +0200 (Sat, 20 Jun 2009)
New Revision: 4930

Added:
   branches/avidemux_2.6_branch_mean/cmake/admInstallDir.cmake
Modified:
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_core/src/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreAudio/src/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreAudioDevice/src/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreAudioEncoder/src/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreAudioFilter/src/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreAudioParser/src/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreDemuxer/src/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreDemuxerMpeg/src/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreImage/src/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreMuxer/src/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUI/src/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/src/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoEncoder/src/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoFilter/src/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux_core/CMakeLists.txt
Log:
[Install] Proper install, part 1

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_core/src/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_core/src/CMakeLists.txt	2009-06-18 17:50:31 UTC (rev 4929)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_core/src/CMakeLists.txt	2009-06-20 07:39:20 UTC (rev 4930)
@@ -16,4 +16,4 @@
 
 REMOVE_DEFINITIONS(-DHAVE_CONFIG_H)
 
-INSTALL(TARGETS ADM_core RUNTIME DESTINATION ${BIN_DIR}  LIBRARY DESTINATION lib  ARCHIVE DESTINATION lib)
+ADM_INSTALL_LIB(ADM_core)

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreAudio/src/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreAudio/src/CMakeLists.txt	2009-06-18 17:50:31 UTC (rev 4929)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreAudio/src/CMakeLists.txt	2009-06-20 07:39:20 UTC (rev 4930)
@@ -12,4 +12,4 @@
 INCLUDE_DIRECTORIES(${CMAKE_SOURCE_DIR}/avidemux/ADM_coreAudio/include)
 TARGET_LINK_LIBRARIES(ADM_coreAudio ADM_core ADM_coreUI ADM_audioParser)
 
-INSTALL(TARGETS ADM_coreAudio RUNTIME DESTINATION ${BIN_DIR}  LIBRARY DESTINATION lib  ARCHIVE DESTINATION lib)
+ADM_INSTALL_LIB(ADM_coreAudio)

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreAudioDevice/src/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreAudioDevice/src/CMakeLists.txt	2009-06-18 17:50:31 UTC (rev 4929)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreAudioDevice/src/CMakeLists.txt	2009-06-20 07:39:20 UTC (rev 4930)
@@ -5,4 +5,4 @@
 ADD_LIBRARY(ADM_coreAudioDevice SHARED ${ADM_audiodevice_SRCS})
 TARGET_LINK_LIBRARIES(ADM_coreAudioDevice ADM_core ADM_coreUI ADM_coreAudio ADM_coreUtils)
 INCLUDE_DIRECTORIES(${CMAKE_SOURCE_DIR}/avidemux/ADM_coreAudio/include)
-INSTALL(TARGETS ADM_coreAudioDevice RUNTIME DESTINATION ${BIN_DIR}  LIBRARY DESTINATION lib  ARCHIVE DESTINATION lib)
+ADM_INSTALL_LIB(ADM_coreAudioDevice)

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreAudioEncoder/src/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreAudioEncoder/src/CMakeLists.txt	2009-06-18 17:50:31 UTC (rev 4929)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreAudioEncoder/src/CMakeLists.txt	2009-06-20 07:39:20 UTC (rev 4930)
@@ -7,4 +7,4 @@
 ADD_LIBRARY(ADM_coreAudioEncoder SHARED ${ADMaudioCoreEncoder_SRCS})
 TARGET_LINK_LIBRARIES(ADM_coreAudioEncoder ADM_core ADM_coreAudio ADM_coreAudioFilterAPI ADM_coreUI)
 
-INSTALL(TARGETS ADM_coreAudioEncoder RUNTIME DESTINATION ${BIN_DIR}  LIBRARY DESTINATION lib  ARCHIVE DESTINATION lib)
+ADM_INSTALL_LIB(ADM_coreAudioEncoder)

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreAudioFilter/src/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreAudioFilter/src/CMakeLists.txt	2009-06-18 17:50:31 UTC (rev 4929)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreAudioFilter/src/CMakeLists.txt	2009-06-20 07:39:20 UTC (rev 4930)
@@ -6,5 +6,5 @@
 # For the API part, needed by coreAudioEncoder
 ADD_LIBRARY(ADM_coreAudioFilterAPI SHARED ${ADM_audioFilterAPI_SRCS})
 TARGET_LINK_LIBRARIES(ADM_coreAudioFilterAPI ADM_core ADM_coreUI  )
-INSTALL(TARGETS ADM_coreAudioFilterAPI RUNTIME DESTINATION ${BIN_DIR}  LIBRARY DESTINATION lib  ARCHIVE DESTINATION lib)
+ADM_INSTALL_LIB(ADM_coreAudioFilterAPI)
 # END

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreAudioParser/src/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreAudioParser/src/CMakeLists.txt	2009-06-18 17:50:31 UTC (rev 4929)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreAudioParser/src/CMakeLists.txt	2009-06-20 07:39:20 UTC (rev 4930)
@@ -15,4 +15,4 @@
 ADD_LIBRARY(ADM_audioParser SHARED ${ADMaudioParser_SRCS})
 TARGET_LINK_LIBRARIES(ADM_audioParser ADM_core ADM_coreUI)
 
-INSTALL(TARGETS ADM_audioParser RUNTIME DESTINATION ${BIN_DIR}  LIBRARY DESTINATION lib  ARCHIVE DESTINATION lib)
+ADM_INSTALL_LIB(ADM_audioParser)

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreDemuxer/src/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreDemuxer/src/CMakeLists.txt	2009-06-18 17:50:31 UTC (rev 4929)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreDemuxer/src/CMakeLists.txt	2009-06-20 07:39:20 UTC (rev 4930)
@@ -8,4 +8,4 @@
 INCLUDE_DIRECTORIES(${CMAKE_SOURCE_DIR}/avidemux/ADM_coreAudio/include)
 TARGET_LINK_LIBRARIES(ADM_coreDemuxer ADM_coreImage ADM_coreAudio ADM_core)
 
-INSTALL(TARGETS ADM_coreDemuxer RUNTIME DESTINATION ${BIN_DIR}  LIBRARY DESTINATION lib  ARCHIVE DESTINATION lib)
+ADM_INSTALL_LIB(ADM_coreDemuxer)

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreDemuxerMpeg/src/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreDemuxerMpeg/src/CMakeLists.txt	2009-06-18 17:50:31 UTC (rev 4929)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreDemuxerMpeg/src/CMakeLists.txt	2009-06-20 07:39:20 UTC (rev 4930)
@@ -13,4 +13,4 @@
 ADD_LIBRARY(ADM_coreDemuxerMpeg SHARED ${ADMcoreDemuxerMpeg_SRCS})
 TARGET_LINK_LIBRARIES(ADM_coreDemuxerMpeg ADM_core)
 INCLUDE_DIRECTORIES(${CMAKE_CURRENT_SOURCE_DIR}/../include)
-INSTALL(TARGETS ADM_coreDemuxerMpeg RUNTIME DESTINATION ${BIN_DIR}  LIBRARY DESTINATION lib  ARCHIVE DESTINATION lib)
+ADM_INSTALL_LIB(ADM_coreDemuxerMpeg)

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreImage/src/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreImage/src/CMakeLists.txt	2009-06-18 17:50:31 UTC (rev 4929)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreImage/src/CMakeLists.txt	2009-06-20 07:39:20 UTC (rev 4930)
@@ -26,4 +26,4 @@
 ENDIF (APPLE)
 
 TARGET_LINK_LIBRARIES(ADM_coreImage ADM_core ADM_coreUI ADM_libswscale ADM_libpostproc)
-INSTALL(TARGETS ADM_coreImage RUNTIME DESTINATION ${BIN_DIR}  LIBRARY DESTINATION lib  ARCHIVE DESTINATION lib)
+ADM_INSTALL_LIB(ADM_coreImage)

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreMuxer/src/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreMuxer/src/CMakeLists.txt	2009-06-18 17:50:31 UTC (rev 4929)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreMuxer/src/CMakeLists.txt	2009-06-20 07:39:20 UTC (rev 4930)
@@ -10,4 +10,4 @@
 INCLUDE_DIRECTORIES(${CMAKE_SOURCE_DIR}/avidemux/ADM_libraries/ADM_ffmpeg)
 TARGET_LINK_LIBRARIES(ADM_coreMuxer ADM_coreImage ADM_coreAudio ADM_core ADM_libavcodec ADM_libavformat ADM_libavutil)
 
-INSTALL(TARGETS ADM_coreMuxer RUNTIME DESTINATION ${BIN_DIR}  LIBRARY DESTINATION lib  ARCHIVE DESTINATION lib)
+ADM_INSTALL_LIB(ADM_coreMuxer)

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUI/src/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUI/src/CMakeLists.txt	2009-06-18 17:50:31 UTC (rev 4929)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUI/src/CMakeLists.txt	2009-06-20 07:39:20 UTC (rev 4930)
@@ -9,4 +9,4 @@
 ADD_LIBRARY(ADM_coreUI SHARED ${ADM_coreUI_SRCS})
 TARGET_LINK_LIBRARIES(ADM_coreUI ADM_core)
 
-INSTALL(TARGETS ADM_coreUI RUNTIME DESTINATION ${BIN_DIR}  LIBRARY DESTINATION lib  ARCHIVE DESTINATION lib)
+ADM_INSTALL_LIB(ADM_coreUI)

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/src/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/src/CMakeLists.txt	2009-06-18 17:50:31 UTC (rev 4929)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/src/CMakeLists.txt	2009-06-20 07:39:20 UTC (rev 4930)
@@ -16,4 +16,4 @@
 
 ADD_SOURCE_CFLAGS(prefs.cpp -I${LIBXML2_INCLUDE_DIR} ${LIBXML2_DEFINITIONS})
 ADD_SOURCE_CFLAGS(ADM_quota.cpp -I${LIBXML2_INCLUDE_DIR} ${LIBXML2_DEFINITIONS})
-INSTALL(TARGETS ADM_coreUtils RUNTIME DESTINATION ${BIN_DIR}  LIBRARY DESTINATION lib  ARCHIVE DESTINATION lib)
+ADM_INSTALL_LIB(ADM_coreUtils)

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoEncoder/src/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoEncoder/src/CMakeLists.txt	2009-06-18 17:50:31 UTC (rev 4929)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoEncoder/src/CMakeLists.txt	2009-06-20 07:39:20 UTC (rev 4930)
@@ -6,5 +6,5 @@
 ADD_LIBRARY(ADM_coreVideoEncoder SHARED ${ADM_CoreVideoEncoder_SRCS})
 TARGET_LINK_LIBRARIES(ADM_coreVideoEncoder ADM_core ADM_coreImage ADM_libavcodec ADM_libavutil )
 
-INSTALL(TARGETS ADM_coreVideoEncoder RUNTIME DESTINATION ${BIN_DIR}  LIBRARY DESTINATION lib  ARCHIVE DESTINATION lib)
+ADM_INSTALL_LIB(ADM_coreVideoEncoder)
 

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoFilter/src/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoFilter/src/CMakeLists.txt	2009-06-18 17:50:31 UTC (rev 4929)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoFilter/src/CMakeLists.txt	2009-06-20 07:39:20 UTC (rev 4930)
@@ -5,5 +5,5 @@
 ADD_LIBRARY(ADM_coreVideoFilter SHARED ${ADM_CoreVideoFilter_SRCS})
 TARGET_LINK_LIBRARIES(ADM_coreVideoFilter ADM_core)
 
-INSTALL(TARGETS ADM_coreVideoFilter RUNTIME DESTINATION ${BIN_DIR}  LIBRARY DESTINATION lib  ARCHIVE DESTINATION lib)
+ADM_INSTALL_LIB(ADM_coreVideoFilter)
 

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/CMakeLists.txt	2009-06-18 17:50:31 UTC (rev 4929)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/CMakeLists.txt	2009-06-20 07:39:20 UTC (rev 4930)
@@ -90,15 +90,14 @@
 # if a showstopper is found.  CLI is automatically assumed as possible
 # since it uses the minimum set of required libraries and CMake will 
 # fail if these aren't met.
-SET(ADM_UI_GTK 1)
-SET(ADM_UI_QT4 1)
 
-SET(ADM_INSTALL_DIR "${CMAKE_INSTALL_PREFIX}")
+SET(AVIDEMUX_INSTALL_DIR "${CMAKE_INSTALL_PREFIX}")
+MARK_AS_ADVANCED(AVIDEMUX_INSTALL_DIR)
+include(admInstallDir)
 
 IF (CMAKE_BUILD_TYPE STREQUAL "Debug")
 	SET(ADM_DEBUG 1)
 ENDIF (CMAKE_BUILD_TYPE STREQUAL "Debug")
-
 ########################################
 # Subversion
 ########################################

Added: branches/avidemux_2.6_branch_mean/cmake/admInstallDir.cmake
===================================================================
--- branches/avidemux_2.6_branch_mean/cmake/admInstallDir.cmake	2009-06-18 17:50:31 UTC (rev 4929)
+++ branches/avidemux_2.6_branch_mean/cmake/admInstallDir.cmake	2009-06-20 07:39:20 UTC (rev 4930)
@@ -0,0 +1,38 @@
+        MESSAGE(STATUS "CMAKE_INSTALL_PREFIX: ${CMAKE_INSTALL_PREFIX}")
+        MESSAGE(STATUS "AVIDEMUX_INSTALL_DIR: ${AVIDEMUX_INSTALL_DIR}")
+
+IF(WIN32)
+        IF(NOT AVIDEMUX_INSTALL_DIR )
+                MESSAGE(FATAL_ERROR "Please define AVIDEMUX_INSTALL_DIR using -DAVIDEMUX_INSTALL_DIR=foobar")
+        ENDIF(NOT AVIDEMUX_INSTALL_DIR )
+
+        SET(AVIDEMUX_BIN_DIR ${AVIDEMUX_INSTALL_DIR})
+        SET(AVIDEMUX_LIB_DIR ${AVIDEMUX_INSTALL_DIR})
+ELSE(WIN32)
+# Unix
+        IF(NOT AVIDEMUX_INSTALL_DIR )
+                SET(AVIDEMUX_INSTALL_DIR "/usr/local")
+                MESSAGE(STATUS "No install dir provided, using /usr/local")
+        ENDIF(NOT AVIDEMUX_INSTALL_DIR )
+        SET(AVIDEMUX_BIN_DIR ${AVIDEMUX_INSTALL_DIR}/bin)
+        SET(AVIDEMUX_LIB_DIR ${AVIDEMUX_INSTALL_DIR}/lib)
+ENDIF(WIN32)
+SET(AVIDEMUX_INCLUDE_DIR ${AVIDEMUX_INSTALL_DIR}/include)
+#
+MESSAGE(STATUS "AVIDEMUX_BIN_DIR    : ${AVIDEMUX_BIN_DIR}")
+MESSAGE(STATUS "AVIDEMUX_LIB_DIR    : ${AVIDEMUX_LIB_DIR}")
+MESSAGE(STATUS "AVIDEMUX_INCLUDE_DIR: ${AVIDEMUX_INCLUDE_DIR}")
+#
+# MACRO TO INSTALL REGULAR LIBS
+#
+MACRO(ADM_INSTALL_LIB lib)
+        INSTALL(TARGETS ${lib} RUNTIME DESTINATION ${AVIDEMUX_BIN_DIR}  LIBRARY DESTINATION ${AVIDEMUX_LIB_DIR}  ARCHIVE DESTINATION ${AVIDEMUX_LIB_DIR})
+ENDMACRO(ADM_INSTALL_LIB )
+#
+# MACRO TO INSTALL REGULAR BIN
+#
+MACRO(ADM_INSTALL_BIN lib)
+        INSTALL(TARGETS ${lib} RUNTIME DESTINATION ${AVIDEMUX_BIN_DIR}  LIBRARY DESTINATION ${AVIDEMUX_LIB_DIR}  ARCHIVE DESTINATION ${AVIDEMUX_LIB_DIR})
+ENDMACRO(ADM_INSTALL_BIN )
+#
+



From mean at mail.berlios.de  Sat Jun 20 09:39:24 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sat, 20 Jun 2009 09:39:24 +0200
Subject: [Avidemux-svn-commit] r4931 - in branches/avidemux_2.6_branch_mean:
	avidemux avidemux/common/ADM_render avidemux/gtk
	avidemux/gtk/ADM_UIs/src avidemux/qt4
	avidemux/qt4/ADM_UIs/src avidemux_core cmake
Message-ID: <200906200739.n5K7dOCi012571@sheep.berlios.de>

Author: mean
Date: 2009-06-20 09:39:23 +0200 (Sat, 20 Jun 2009)
New Revision: 4931

Modified:
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_render/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux/commonCmakeApplication.cmake
   branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_UIs/src/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux/gtk/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_UIs/src/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux/qt4/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux_core/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/cmake/admCoreIncludes.cmake
Log:
[Build] Install dir part 2

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_render/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_render/CMakeLists.txt	2009-06-20 07:39:20 UTC (rev 4930)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_render/CMakeLists.txt	2009-06-20 07:39:23 UTC (rev 4931)
@@ -1,4 +1,4 @@
-SET(ADM_LIB ADM_render)
+SET(ADM_LIB ADM_render_${UI_SUFFIX})
 
 SET(${ADM_LIB}_SRCS
 GUI_render.cpp
@@ -10,32 +10,6 @@
 	SET(${ADM_LIB}_SRCS ${${ADM_LIB}_SRCS} GUI_sdlRenderHelper.m)
 ENDIF (APPLE)
 
-ADD_ADM_SHARED_LIB_ALL_TARGETS(${ADM_LIB} ${${ADM_LIB}_SRCS})
+ADD_LIBRARY(${ADM_LIB} SHARED ${${ADM_LIB}_SRCS})
 SDLify(GUI_sdlRender.cpp)
-ADM_TARGET_LINK_LIBARIES_ALL_TARGET(${ADM_LIB} ADM_core ADM_coreUI ADM_coreImage)
-
-IF (ADM_UI_GTK)
-	IF (GETTEXT_FOUND)
-		TARGET_LINK_LIBRARIES(${ADM_LIB}_gtk ${GETTEXT_LIBRARY_DIR})
-	ENDIF (GETTEXT_FOUND)
-
-	IF (USE_SDL)
-		TARGET_LINK_LIBRARIES(${ADM_LIB}_gtk ${SDL_LIBRARY})
-	ENDIF (USE_SDL)
-
-	INSTALL(TARGETS ${ADM_LIB}_gtk RUNTIME DESTINATION ${BIN_DIR}  LIBRARY DESTINATION lib  ARCHIVE DESTINATION lib)
-ENDIF (ADM_UI_GTK)
-
-IF (ADM_UI_QT4)
-	IF (USE_SDL)
-		TARGET_LINK_LIBRARIES(${ADM_LIB}_qt4 ${SDL_LIBRARY})
-	ENDIF (USE_SDL)
-
-	INSTALL(TARGETS ${ADM_LIB}_qt4 RUNTIME DESTINATION ${BIN_DIR}  LIBRARY DESTINATION lib  ARCHIVE DESTINATION lib)
-ENDIF (ADM_UI_QT4)
-
-IF (GETTEXT_FOUND)
-	TARGET_LINK_LIBRARIES(${ADM_LIB}_cli ${GETTEXT_LIBRARY_DIR})
-ENDIF (GETTEXT_FOUND)
-
-INSTALL(TARGETS ${ADM_LIB}_cli RUNTIME DESTINATION ${BIN_DIR}  LIBRARY DESTINATION lib  ARCHIVE DESTINATION lib)
\ No newline at end of file
+ADM_INSTALL_LIB(${ADM_LIB})

Modified: branches/avidemux_2.6_branch_mean/avidemux/commonCmakeApplication.cmake
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/commonCmakeApplication.cmake	2009-06-20 07:39:20 UTC (rev 4930)
+++ branches/avidemux_2.6_branch_mean/avidemux/commonCmakeApplication.cmake	2009-06-20 07:39:23 UTC (rev 4931)
@@ -13,11 +13,6 @@
 ########################################
 # Where is the config.h dir
 ########################################
-IF (NOT AVIDEMUX_CORE_BUILD_DIR)
-	MESSAGE(FATAL_ERROR "Please add -DAVIDEMUX_CORECONFIG_DIR=path_to_avidemux_core_build_dir")
-ELSE (NOT AVIDEMUX_CORE_BUILD_DIR)
-	SET(AVIDEMUX_CORE_BUILD_DIR "${AVIDEMUX_CORE_BUILD_DIR}" CACHE STRING "")
-ENDIF (NOT AVIDEMUX_CORE_BUILD_DIR)
 #
 # Access to our cmake lib
 #
@@ -40,8 +35,12 @@
 ########################################
 # Add include dirs
 ########################################
+SET(AVIDEMUX_INSTALL_DIR "${CMAKE_INSTALL_PREFIX}")
+MARK_AS_ADVANCED(AVIDEMUX_INSTALL_DIR)
+include(admInstallDir)
 include(admCoreIncludes)
-
+LINK_DIRECTORIES("${AVIDEMUX_LIB_DIR}")
+#
 INCLUDE_DIRECTORIES("${CMAKE_CURRENT_SOURCE_DIR}/ADM_muxerGate/include/")
 
 IF (GETTEXT_FOUND)

Modified: branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_UIs/src/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_UIs/src/CMakeLists.txt	2009-06-20 07:39:20 UTC (rev 4930)
+++ branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_UIs/src/CMakeLists.txt	2009-06-20 07:39:23 UTC (rev 4931)
@@ -29,4 +29,4 @@
 TARGET_LINK_LIBRARIES(${ADM_LIB} ${GTK_LDFLAGS} ADM_core ADM_coreUI ADM_render_gtk)
 ADD_TARGET_CFLAGS(${ADM_LIB} ${GTK_CFLAGS})
 ADD_SOURCE_CFLAGS(DIA_flyDialogGtk.cpp " -DADM_UI_TYPE_BUILD=2")
-INSTALL(TARGETS ${ADM_LIB} RUNTIME DESTINATION ${BIN_DIR}  LIBRARY DESTINATION lib  ARCHIVE DESTINATION lib)
\ No newline at end of file
+ADM_INSTALL_LIB( ${ADM_LIB})

Modified: branches/avidemux_2.6_branch_mean/avidemux/gtk/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/gtk/CMakeLists.txt	2009-06-20 07:39:20 UTC (rev 4930)
+++ branches/avidemux_2.6_branch_mean/avidemux/gtk/CMakeLists.txt	2009-06-20 07:39:23 UTC (rev 4931)
@@ -14,11 +14,12 @@
 ##########################################
 ADD_DEFINITIONS(-DADM_UI_TYPE_BUILD=ADM_UI_GTK)
 SET(CONFIG_HEADER_TYPE ADM_BUILD_GTK)
+SET(UI_SUFFIX gtk)
+#
 CONFIGURE_FILE("${AVIDEMUX_TOP_SOURCE_DIR}/cmake/config.h.cmake" "${CMAKE_BINARY_DIR}/config/gtk/config.h")
 MESSAGE(STATUS "GTK config.h generated")
 
 INCLUDE_DIRECTORIES("${CMAKE_BINARY_DIR}/config/gtk/")
-INCLUDE_DIRECTORIES("${AVIDEMUX_CORE_BUILD_DIR}/config")
 ###########################################
 # Executable
 ###########################################
@@ -119,5 +120,5 @@
 ###########################################
 # Install
 ###########################################
-INSTALL(TARGETS avidemux2_gtk RUNTIME DESTINATION ${CMAKE_INSTALL_PREFIX}/bin LIBRARY DESTINATION lib)
+ADM_INSTALL_BIN(avidemux2_gtk)
 include(./gtkPackageDebian.cmake)

Modified: branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_UIs/src/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_UIs/src/CMakeLists.txt	2009-06-20 07:39:20 UTC (rev 4930)
+++ branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_UIs/src/CMakeLists.txt	2009-06-20 07:39:23 UTC (rev 4931)
@@ -19,4 +19,5 @@
 INCLUDE_DIRECTORIES(${CMAKE_CURRENT_SOURCE_DIR}/../include)
 ADD_LIBRARY(${ADM_LIB} SHARED ${${ADM_LIB}_SRCS})
 TARGET_LINK_LIBRARIES(${ADM_LIB} ADM_core ADM_coreUI ${QT_QTGUI_LIBRARY} ${QT_QTCORE_LIBRARY} ADM_render_qt4)
-INSTALL(TARGETS ${ADM_LIB} RUNTIME DESTINATION ${BIN_DIR}  LIBRARY DESTINATION lib  ARCHIVE DESTINATION lib)
+#INSTALL(TARGETS ${ADM_LIB} RUNTIME DESTINATION ${BIN_DIR}  LIBRARY DESTINATION lib  ARCHIVE DESTINATION lib)
+ADM_INSTALL_LIB( ${ADM_LIB})

Modified: branches/avidemux_2.6_branch_mean/avidemux/qt4/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/qt4/CMakeLists.txt	2009-06-20 07:39:20 UTC (rev 4930)
+++ branches/avidemux_2.6_branch_mean/avidemux/qt4/CMakeLists.txt	2009-06-20 07:39:23 UTC (rev 4931)
@@ -20,12 +20,13 @@
 ##########################################
 
 SET(CONFIG_HEADER_TYPE ADM_BUILD_QT4)
+SET(UI_SUFFIX qt4)
+#
 ADD_DEFINITIONS(-DADM_UI_TYPE_BUILD=ADM_UI_QT4)
 CONFIGURE_FILE("${AVIDEMUX_TOP_SOURCE_DIR}/cmake/config.h.cmake" "${CMAKE_BINARY_DIR}/config/qt4/config.h")
 MESSAGE(STATUS "QT4 config.h generated")
 
 INCLUDE_DIRECTORIES("${CMAKE_BINARY_DIR}/config/qt4/")
-INCLUDE_DIRECTORIES("${AVIDEMUX_CORE_BUILD_DIR}/config")
 ###########################################
 # Executable
 ###########################################
@@ -125,5 +126,5 @@
 ###########################################
 # Install
 ###########################################
-INSTALL(TARGETS avidemux2_qt4 RUNTIME DESTINATION ${CMAKE_INSTALL_PREFIX}/bin LIBRARY DESTINATION lib)
+ADM_INSTALL_BIN(avidemux2_qt4)
 include(./qt4PackageDebian.cmake)

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/CMakeLists.txt	2009-06-20 07:39:20 UTC (rev 4930)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/CMakeLists.txt	2009-06-20 07:39:23 UTC (rev 4931)
@@ -206,4 +206,5 @@
 # Packaging
 #
 INCLUDE(./corePackageDebian.cmake)
+INSTALL(FILES ${CMAKE_BINARY_DIR}/config/ADM_coreConfig.h DESTINATION "${AVIDEMUX_INCLUDE_DIR}/avidemux/2.6") 
 MESSAGE("")

Modified: branches/avidemux_2.6_branch_mean/cmake/admCoreIncludes.cmake
===================================================================
--- branches/avidemux_2.6_branch_mean/cmake/admCoreIncludes.cmake	2009-06-20 07:39:20 UTC (rev 4930)
+++ branches/avidemux_2.6_branch_mean/cmake/admCoreIncludes.cmake	2009-06-20 07:39:23 UTC (rev 4931)
@@ -15,5 +15,5 @@
 INCLUDE_DIRECTORIES(${AVIDEMUX_TOP_SOURCE_DIR}/avidemux_core/ADM_coreVideoEncoder/include)
 INCLUDE_DIRECTORIES(${AVIDEMUX_TOP_SOURCE_DIR}/avidemux_core/ADM_coreVideoFilter/include)
 INCLUDE_DIRECTORIES(${AVIDEMUX_TOP_SOURCE_DIR}/avidemux_core/ADM_ffmpeg)
-INCLUDE_DIRECTORIES(${AVIDEMUX_CORE_BUILD_DIR}/config)
+INCLUDE_DIRECTORIES(${AVIDEMUX_INCLUDE_DIR}/avidemux/2.6/)
 



From mean at mail.berlios.de  Sat Jun 20 09:39:25 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sat, 20 Jun 2009 09:39:25 +0200
Subject: [Avidemux-svn-commit] r4932 - in branches/avidemux_2.6_branch_mean:
	avidemux/gtk avidemux/qt4 avidemux_core
Message-ID: <200906200739.n5K7dPf1012581@sheep.berlios.de>

Author: mean
Date: 2009-06-20 09:39:25 +0200 (Sat, 20 Jun 2009)
New Revision: 4932

Modified:
   branches/avidemux_2.6_branch_mean/avidemux/gtk/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux/qt4/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux_core/CMakeLists.txt
Log:
[build] Also install config.h

Modified: branches/avidemux_2.6_branch_mean/avidemux/gtk/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/gtk/CMakeLists.txt	2009-06-20 07:39:23 UTC (rev 4931)
+++ branches/avidemux_2.6_branch_mean/avidemux/gtk/CMakeLists.txt	2009-06-20 07:39:25 UTC (rev 4932)
@@ -121,4 +121,5 @@
 # Install
 ###########################################
 ADM_INSTALL_BIN(avidemux2_gtk)
+INSTALL(FILES ${CMAKE_BINARY_DIR}/config/gtk/config.h DESTINATION "${AVIDEMUX_INCLUDE_DIR}/avidemux/2.6/gtk") 
 include(./gtkPackageDebian.cmake)

Modified: branches/avidemux_2.6_branch_mean/avidemux/qt4/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/qt4/CMakeLists.txt	2009-06-20 07:39:23 UTC (rev 4931)
+++ branches/avidemux_2.6_branch_mean/avidemux/qt4/CMakeLists.txt	2009-06-20 07:39:25 UTC (rev 4932)
@@ -127,4 +127,5 @@
 # Install
 ###########################################
 ADM_INSTALL_BIN(avidemux2_qt4)
+INSTALL(FILES ${CMAKE_BINARY_DIR}/config/qt4/config.h DESTINATION "${AVIDEMUX_INCLUDE_DIR}/avidemux/2.6/qt4") 
 include(./qt4PackageDebian.cmake)

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/CMakeLists.txt	2009-06-20 07:39:23 UTC (rev 4931)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/CMakeLists.txt	2009-06-20 07:39:25 UTC (rev 4932)
@@ -172,6 +172,7 @@
 # Generate config.h
 ########################################
 CONFIGURE_FILE("${AVIDEMUX_TOP_SOURCE_DIR}/cmake/ADM_coreConfig.h.cmake" "${CMAKE_BINARY_DIR}/config/ADM_coreConfig.h")
+include_directories( "${CMAKE_BINARY_DIR}/config")
 MESSAGE(STATUS "ADM_coreConfig.h generated")
 MESSAGE("")
 ########################################



From mean at mail.berlios.de  Sat Jun 20 10:02:54 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sat, 20 Jun 2009 10:02:54 +0200
Subject: [Avidemux-svn-commit] r4933 -
	branches/avidemux_2.6_branch_mean/avidemux/common/ADM_render
Message-ID: <200906200802.n5K82swh013844@sheep.berlios.de>

Author: mean
Date: 2009-06-20 10:02:54 +0200 (Sat, 20 Jun 2009)
New Revision: 4933

Modified:
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_render/CMakeLists.txt
Log:
[render] Put back proper link dependancy

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_render/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_render/CMakeLists.txt	2009-06-20 07:39:25 UTC (rev 4932)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_render/CMakeLists.txt	2009-06-20 08:02:54 UTC (rev 4933)
@@ -11,5 +11,14 @@
 ENDIF (APPLE)
 
 ADD_LIBRARY(${ADM_LIB} SHARED ${${ADM_LIB}_SRCS})
+TARGET_LINK_LIBRARIES( ${ADM_LIB} ADM_core ADM_coreUI ADM_coreImage)
 SDLify(GUI_sdlRender.cpp)
+IF (GETTEXT_FOUND)
+        TARGET_LINK_LIBRARIES(${ADM_LIB}  ${GETTEXT_LIBRARY_DIR})
+ENDIF (GETTEXT_FOUND)
+
+IF (USE_SDL)
+        TARGET_LINK_LIBRARIES(${ADM_LIB}  ${SDL_LIBRARY})
+ENDIF (USE_SDL)
+
 ADM_INSTALL_LIB(${ADM_LIB})



From mean at mail.berlios.de  Sat Jun 20 10:19:39 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sat, 20 Jun 2009 10:19:39 +0200
Subject: [Avidemux-svn-commit] r4934 - in
	branches/avidemux_2.6_branch_mean/avidemux: gtk qt4
Message-ID: <200906200819.n5K8Jdvi017157@sheep.berlios.de>

Author: mean
Date: 2009-06-20 10:19:38 +0200 (Sat, 20 Jun 2009)
New Revision: 4934

Modified:
   branches/avidemux_2.6_branch_mean/avidemux/gtk/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux/qt4/CMakeLists.txt
Log:
[Build] Add libxml2

Modified: branches/avidemux_2.6_branch_mean/avidemux/gtk/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/gtk/CMakeLists.txt	2009-06-20 08:02:54 UTC (rev 4933)
+++ branches/avidemux_2.6_branch_mean/avidemux/gtk/CMakeLists.txt	2009-06-20 08:19:38 UTC (rev 4934)
@@ -116,7 +116,10 @@
         ADD_TARGET_LDFLAGS(avidemux2_gtk "-mwindows")
 
 ENDIF (WIN32)
-
+#
+# libxml2
+#
+TARGET_LINK_LIBRARIES(avidemux2_gtk ${LIBXML2_LIBRARIES})
 ###########################################
 # Install
 ###########################################

Modified: branches/avidemux_2.6_branch_mean/avidemux/qt4/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/qt4/CMakeLists.txt	2009-06-20 08:02:54 UTC (rev 4933)
+++ branches/avidemux_2.6_branch_mean/avidemux/qt4/CMakeLists.txt	2009-06-20 08:19:38 UTC (rev 4934)
@@ -122,6 +122,10 @@
         ADD_TARGET_LDFLAGS(avidemux2_qt4 "-mwindows")
 
 ENDIF (WIN32)
+#
+# xml
+#
+TARGET_LINK_LIBRARIES(avidemux2_qt4 ${LIBXML2_LIBRARIES})
 
 ###########################################
 # Install



From mean at mail.berlios.de  Sat Jun 20 11:37:56 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sat, 20 Jun 2009 11:37:56 +0200
Subject: [Avidemux-svn-commit] r4935 - in
	branches/avidemux_2.6_branch_mean/avidemux: . gtk qt4
Message-ID: <200906200937.n5K9bu5S021402@sheep.berlios.de>

Author: mean
Date: 2009-06-20 11:37:55 +0200 (Sat, 20 Jun 2009)
New Revision: 4935

Modified:
   branches/avidemux_2.6_branch_mean/avidemux/commonCmakeApplication.cmake
   branches/avidemux_2.6_branch_mean/avidemux/gtk/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux/qt4/CMakeLists.txt
Log:
[Pthread]

Modified: branches/avidemux_2.6_branch_mean/avidemux/commonCmakeApplication.cmake
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/commonCmakeApplication.cmake	2009-06-20 08:19:38 UTC (rev 4934)
+++ branches/avidemux_2.6_branch_mean/avidemux/commonCmakeApplication.cmake	2009-06-20 09:37:55 UTC (rev 4935)
@@ -32,6 +32,7 @@
 include(admConfigHelper)
 INCLUDE(admCheckRequiredLibs)
 include(admCheckMiscLibs)
+include(FindThreads)
 ########################################
 # Add include dirs
 ########################################

Modified: branches/avidemux_2.6_branch_mean/avidemux/gtk/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/gtk/CMakeLists.txt	2009-06-20 08:19:38 UTC (rev 4934)
+++ branches/avidemux_2.6_branch_mean/avidemux/gtk/CMakeLists.txt	2009-06-20 09:37:55 UTC (rev 4935)
@@ -120,6 +120,13 @@
 # libxml2
 #
 TARGET_LINK_LIBRARIES(avidemux2_gtk ${LIBXML2_LIBRARIES})
+# pthread
+IF (WIN32)
+        TARGET_LINK_LIBRARIES(avidemux2_gtk "${PTHREAD_LIBRARIES}")
+ENDIF (WIN32)
+IF (UNIX AND PTHREAD_FOUND)
+        TARGET_LINK_LIBRARIES(avidemux2_gtk "${PTHREAD_LIBRARIES}")
+ENDIF (UNIX AND PTHREAD_FOUND)
 ###########################################
 # Install
 ###########################################

Modified: branches/avidemux_2.6_branch_mean/avidemux/qt4/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/qt4/CMakeLists.txt	2009-06-20 08:19:38 UTC (rev 4934)
+++ branches/avidemux_2.6_branch_mean/avidemux/qt4/CMakeLists.txt	2009-06-20 09:37:55 UTC (rev 4935)
@@ -106,8 +106,8 @@
 # UI Specific
 ###########################################
 ADD_TARGET_LDFLAGS(avidemux2_qt4  ${GTHREAD_LDFLAGS})
+TARGET_LINK_LIBRARIES(avidemux2_qt4 ${QT_QTGUI_LIBRARY} ${QT_QTCORE_LIBRARY})
 
-
 ###########################################
 # OS Specific
 ###########################################
@@ -126,6 +126,13 @@
 # xml
 #
 TARGET_LINK_LIBRARIES(avidemux2_qt4 ${LIBXML2_LIBRARIES})
+# pthread
+IF (WIN32)
+        TARGET_LINK_LIBRARIES(avidemux2_qt4 "${PTHREAD_LIBRARIES}")
+ENDIF (WIN32)
+IF (UNIX AND PTHREAD_FOUND)
+        TARGET_LINK_LIBRARIES(avidemux2_qt4 "${PTHREAD_LIBRARIES}")
+ENDIF (UNIX AND PTHREAD_FOUND)
 
 ###########################################
 # Install



From mean at mail.berlios.de  Sat Jun 20 11:46:14 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sat, 20 Jun 2009 11:46:14 +0200
Subject: [Avidemux-svn-commit] r4936 - in
	branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg:
	libavcodec libavformat libavutil libpostproc libswscale
Message-ID: <200906200946.n5K9kEX6024103@sheep.berlios.de>

Author: mean
Date: 2009-06-20 11:46:12 +0200 (Sat, 20 Jun 2009)
New Revision: 4936

Modified:
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavcodec/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavformat/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavutil/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libpostproc/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libswscale/CMakeLists.txt
Log:
[ffmpeg] correct install dir for libs

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavcodec/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavcodec/CMakeLists.txt	2009-06-20 09:37:55 UTC (rev 4935)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavcodec/CMakeLists.txt	2009-06-20 09:46:12 UTC (rev 4936)
@@ -66,6 +66,6 @@
 	ADD_SOURCE_CFLAGS(x86/snowdsp_mmx.c -O2)
 ENDIF (ADM_DEBUG AND ADM_CPU_X86_32)
 
-TARGET_LINK_LIBRARIES(${ADM_LIB} ADM_core ADM_libavutil ${ZLIB_LIBRARY})
+ADM_INSTALL_LIB(${ADM_LIB} ADM_core ADM_libavutil ${ZLIB_LIBRARY})
 
-INSTALL(TARGETS ${ADM_LIB} RUNTIME DESTINATION ${BIN_DIR}  LIBRARY DESTINATION lib  ARCHIVE DESTINATION lib)
+ADM_INSTALL_LIB(${ADM_LIB} )

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavformat/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavformat/CMakeLists.txt	2009-06-20 09:37:55 UTC (rev 4935)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavformat/CMakeLists.txt	2009-06-20 09:46:12 UTC (rev 4936)
@@ -10,4 +10,4 @@
 ADD_LIBRARY(${ADM_LIB} SHARED ${${ADM_LIB}_SRCS})
 TARGET_LINK_LIBRARIES(${ADM_LIB} ADM_core ADM_libavutil ADM_libavcodec)
 
-INSTALL(TARGETS ${ADM_LIB} RUNTIME DESTINATION ${BIN_DIR}  LIBRARY DESTINATION lib  ARCHIVE DESTINATION lib)
+ADM_INSTALL_LIB(${ADM_LIB} )

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavutil/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavutil/CMakeLists.txt	2009-06-20 09:37:55 UTC (rev 4935)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavutil/CMakeLists.txt	2009-06-20 09:46:12 UTC (rev 4936)
@@ -28,4 +28,4 @@
 ADD_LIBRARY(${ADM_LIB} SHARED ${${ADM_LIB}_SRCS})
 TARGET_LINK_LIBRARIES(${ADM_LIB} ADM_core)
 
-INSTALL(TARGETS ${ADM_LIB} RUNTIME DESTINATION ${BIN_DIR}  LIBRARY DESTINATION lib  ARCHIVE DESTINATION lib)
+ADM_INSTALL_LIB(${ADM_LIB} )

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libpostproc/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libpostproc/CMakeLists.txt	2009-06-20 09:37:55 UTC (rev 4935)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libpostproc/CMakeLists.txt	2009-06-20 09:46:12 UTC (rev 4936)
@@ -10,4 +10,4 @@
 
 TARGET_LINK_LIBRARIES(${ADM_LIB} ADM_core ADM_libavutil)
 
-INSTALL(TARGETS ${ADM_LIB} RUNTIME DESTINATION ${BIN_DIR}  LIBRARY DESTINATION lib  ARCHIVE DESTINATION lib)
+ADM_INSTALL_LIB(${ADM_LIB} )

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libswscale/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libswscale/CMakeLists.txt	2009-06-20 09:37:55 UTC (rev 4935)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libswscale/CMakeLists.txt	2009-06-20 09:46:12 UTC (rev 4936)
@@ -13,4 +13,4 @@
 
 TARGET_LINK_LIBRARIES(${ADM_LIB} ADM_core ADM_libavutil)
 
-INSTALL(TARGETS ${ADM_LIB} RUNTIME DESTINATION ${BIN_DIR}  LIBRARY DESTINATION lib  ARCHIVE DESTINATION lib)
+ADM_INSTALL_LIB(${ADM_LIB} )



From mean at mail.berlios.de  Sat Jun 20 12:01:42 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sat, 20 Jun 2009 12:01:42 +0200
Subject: [Avidemux-svn-commit] r4937 - in
	branches/avidemux_2.6_branch_mean/avidemux_core:
	ADM_ffmpeg/libavcodec ADM_smjs
Message-ID: <200906201001.n5KA1gnl028220@sheep.berlios.de>

Author: mean
Date: 2009-06-20 12:01:39 +0200 (Sat, 20 Jun 2009)
New Revision: 4937

Modified:
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavcodec/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_smjs/CMakeLists.txt
Log:
[smjs] Fix install dir

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavcodec/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavcodec/CMakeLists.txt	2009-06-20 09:46:12 UTC (rev 4936)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavcodec/CMakeLists.txt	2009-06-20 10:01:39 UTC (rev 4937)
@@ -66,6 +66,6 @@
 	ADD_SOURCE_CFLAGS(x86/snowdsp_mmx.c -O2)
 ENDIF (ADM_DEBUG AND ADM_CPU_X86_32)
 
-ADM_INSTALL_LIB(${ADM_LIB} ADM_core ADM_libavutil ${ZLIB_LIBRARY})
+TARGET_LINK_LIBRARIES(${ADM_LIB} ADM_core ADM_libavutil ${ZLIB_LIBRARY})
 
 ADM_INSTALL_LIB(${ADM_LIB} )

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_smjs/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_smjs/CMakeLists.txt	2009-06-20 09:46:12 UTC (rev 4936)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_smjs/CMakeLists.txt	2009-06-20 10:01:39 UTC (rev 4937)
@@ -22,4 +22,4 @@
 
 TARGET_LINK_LIBRARIES(${ADM_LIB} ADM_core)
 
-INSTALL(TARGETS ${ADM_LIB} RUNTIME DESTINATION ${BIN_DIR}  LIBRARY DESTINATION lib  ARCHIVE DESTINATION lib)
\ No newline at end of file
+ADM_INSTALL_LIB(${ADM_LIB} )



From mean at mail.berlios.de  Sat Jun 20 15:58:44 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sat, 20 Jun 2009 15:58:44 +0200
Subject: [Avidemux-svn-commit] r4938 - in branches/avidemux_2.6_branch_mean:
	avidemux avidemux/gtk avidemux/qt4 avidemux_core
	avidemux_core/ADM_core/src
Message-ID: <200906201358.n5KDwiUF023592@sheep.berlios.de>

Author: mean
Date: 2009-06-20 15:58:44 +0200 (Sat, 20 Jun 2009)
New Revision: 4938

Modified:
   branches/avidemux_2.6_branch_mean/avidemux/commonCmakeApplication.cmake
   branches/avidemux_2.6_branch_mean/avidemux/gtk/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux/qt4/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_core/src/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux_core/CMakeLists.txt
Log:
[Core] Link thread to ADM_core only

Modified: branches/avidemux_2.6_branch_mean/avidemux/commonCmakeApplication.cmake
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/commonCmakeApplication.cmake	2009-06-20 10:01:39 UTC (rev 4937)
+++ branches/avidemux_2.6_branch_mean/avidemux/commonCmakeApplication.cmake	2009-06-20 13:58:44 UTC (rev 4938)
@@ -32,7 +32,6 @@
 include(admConfigHelper)
 INCLUDE(admCheckRequiredLibs)
 include(admCheckMiscLibs)
-include(FindThreads)
 ########################################
 # Add include dirs
 ########################################

Modified: branches/avidemux_2.6_branch_mean/avidemux/gtk/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/gtk/CMakeLists.txt	2009-06-20 10:01:39 UTC (rev 4937)
+++ branches/avidemux_2.6_branch_mean/avidemux/gtk/CMakeLists.txt	2009-06-20 13:58:44 UTC (rev 4938)
@@ -73,12 +73,6 @@
 IF (GETTEXT_FOUND)
 	TARGET_LINK_LIBRARIES(avidemux2_gtk ${GETTEXT_LIBRARY_DIR})
 ENDIF (GETTEXT_FOUND)
-
-# pthreads
-IF (UNIX AND PTHREAD_FOUND)
-        TARGET_LINK_LIBRARIES(avidemux2_gtk ${PTHREAD_LIBRARIES})
-ENDIF (UNIX AND PTHREAD_FOUND)
-
 # PNG
 IF (USE_PNG)
         TARGET_LINK_LIBRARIES(avidemux2_gtk ${PNG_LIBRARIES})
@@ -120,13 +114,6 @@
 # libxml2
 #
 TARGET_LINK_LIBRARIES(avidemux2_gtk ${LIBXML2_LIBRARIES})
-# pthread
-IF (WIN32)
-        TARGET_LINK_LIBRARIES(avidemux2_gtk "${PTHREAD_LIBRARIES}")
-ENDIF (WIN32)
-IF (UNIX AND PTHREAD_FOUND)
-        TARGET_LINK_LIBRARIES(avidemux2_gtk "${PTHREAD_LIBRARIES}")
-ENDIF (UNIX AND PTHREAD_FOUND)
 ###########################################
 # Install
 ###########################################

Modified: branches/avidemux_2.6_branch_mean/avidemux/qt4/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/qt4/CMakeLists.txt	2009-06-20 10:01:39 UTC (rev 4937)
+++ branches/avidemux_2.6_branch_mean/avidemux/qt4/CMakeLists.txt	2009-06-20 13:58:44 UTC (rev 4938)
@@ -80,10 +80,6 @@
 	TARGET_LINK_LIBRARIES(avidemux2_qt4 ${GETTEXT_LIBRARY_DIR})
 ENDIF (GETTEXT_FOUND)
 
-# pthreads
-IF (UNIX AND PTHREAD_FOUND)
-        TARGET_LINK_LIBRARIES(avidemux2_qt4 ${PTHREAD_LIBRARIES})
-ENDIF (UNIX AND PTHREAD_FOUND)
 
 # PNG
 IF (USE_PNG)
@@ -126,13 +122,6 @@
 # xml
 #
 TARGET_LINK_LIBRARIES(avidemux2_qt4 ${LIBXML2_LIBRARIES})
-# pthread
-IF (WIN32)
-        TARGET_LINK_LIBRARIES(avidemux2_qt4 "${PTHREAD_LIBRARIES}")
-ENDIF (WIN32)
-IF (UNIX AND PTHREAD_FOUND)
-        TARGET_LINK_LIBRARIES(avidemux2_qt4 "${PTHREAD_LIBRARIES}")
-ENDIF (UNIX AND PTHREAD_FOUND)
 
 ###########################################
 # Install

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_core/src/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_core/src/CMakeLists.txt	2009-06-20 10:01:39 UTC (rev 4937)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_core/src/CMakeLists.txt	2009-06-20 13:58:44 UTC (rev 4938)
@@ -16,4 +16,13 @@
 
 REMOVE_DEFINITIONS(-DHAVE_CONFIG_H)
 
+# pthreads
+IF (WIN32)
+        TARGET_LINK_LIBRARIES(avidemux2_gtk "${PTHREAD_LIBRARIES}")
+ENDIF (WIN32)
+IF (UNIX AND PTHREAD_FOUND)
+        TARGET_LINK_LIBRARIES(ADM_core ${PTHREAD_LIBRARIES})
+ENDIF (UNIX AND PTHREAD_FOUND)
+
+
 ADM_INSTALL_LIB(ADM_core)

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/CMakeLists.txt	2009-06-20 10:01:39 UTC (rev 4937)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/CMakeLists.txt	2009-06-20 13:58:44 UTC (rev 4938)
@@ -133,6 +133,7 @@
 INCLUDE(admCheckRequiredLibs)
 INCLUDE(admCheckMiscLibs)
 INCLUDE(admCheckVDPAU)
+INCLUDE(FindThreads)
 
 ########################################
 # Check functions and includes



From mean at mail.berlios.de  Sat Jun 20 15:59:51 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sat, 20 Jun 2009 15:59:51 +0200
Subject: [Avidemux-svn-commit] r4939 -
	branches/avidemux_2.6_branch_mean/avidemux_core/ADM_core/src
Message-ID: <200906201359.n5KDxp9H023644@sheep.berlios.de>

Author: mean
Date: 2009-06-20 15:59:51 +0200 (Sat, 20 Jun 2009)
New Revision: 4939

Modified:
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_core/src/CMakeLists.txt
Log:
[Core] Link thread to ADM_core only (fix)

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_core/src/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_core/src/CMakeLists.txt	2009-06-20 13:58:44 UTC (rev 4938)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_core/src/CMakeLists.txt	2009-06-20 13:59:51 UTC (rev 4939)
@@ -18,7 +18,7 @@
 
 # pthreads
 IF (WIN32)
-        TARGET_LINK_LIBRARIES(avidemux2_gtk "${PTHREAD_LIBRARIES}")
+        TARGET_LINK_LIBRARIES(ADM_core "${PTHREAD_LIBRARIES}")
 ENDIF (WIN32)
 IF (UNIX AND PTHREAD_FOUND)
         TARGET_LINK_LIBRARIES(ADM_core ${PTHREAD_LIBRARIES})



From mean at mail.berlios.de  Sat Jun 20 16:23:46 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sat, 20 Jun 2009 16:23:46 +0200
Subject: [Avidemux-svn-commit] r4940 - in branches/avidemux_2.6_branch_mean:
	avidemux avidemux/gtk avidemux/qt4 avidemux_core/ADM_core/src cmake
Message-ID: <200906201423.n5KENkKO026530@sheep.berlios.de>

Author: mean
Date: 2009-06-20 16:23:46 +0200 (Sat, 20 Jun 2009)
New Revision: 4940

Modified:
   branches/avidemux_2.6_branch_mean/avidemux/commonCmakeApplication.cmake
   branches/avidemux_2.6_branch_mean/avidemux/gtk/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux/qt4/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_core/src/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/cmake/FindThreads.cmake
Log:
[thread] Factorize + fix, linking is needed on win32

Modified: branches/avidemux_2.6_branch_mean/avidemux/commonCmakeApplication.cmake
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/commonCmakeApplication.cmake	2009-06-20 13:59:51 UTC (rev 4939)
+++ branches/avidemux_2.6_branch_mean/avidemux/commonCmakeApplication.cmake	2009-06-20 14:23:46 UTC (rev 4940)
@@ -30,6 +30,7 @@
 #  Basic cmake helper script
 ###########################################
 include(admConfigHelper)
+include(FindThreads)
 INCLUDE(admCheckRequiredLibs)
 include(admCheckMiscLibs)
 ########################################

Modified: branches/avidemux_2.6_branch_mean/avidemux/gtk/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/gtk/CMakeLists.txt	2009-06-20 13:59:51 UTC (rev 4939)
+++ branches/avidemux_2.6_branch_mean/avidemux/gtk/CMakeLists.txt	2009-06-20 14:23:46 UTC (rev 4940)
@@ -117,6 +117,7 @@
 ###########################################
 # Install
 ###########################################
+ADM_LINK_THREAD(avidemux2_gtk)
 ADM_INSTALL_BIN(avidemux2_gtk)
 INSTALL(FILES ${CMAKE_BINARY_DIR}/config/gtk/config.h DESTINATION "${AVIDEMUX_INCLUDE_DIR}/avidemux/2.6/gtk") 
 include(./gtkPackageDebian.cmake)

Modified: branches/avidemux_2.6_branch_mean/avidemux/qt4/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/qt4/CMakeLists.txt	2009-06-20 13:59:51 UTC (rev 4939)
+++ branches/avidemux_2.6_branch_mean/avidemux/qt4/CMakeLists.txt	2009-06-20 14:23:46 UTC (rev 4940)
@@ -126,6 +126,7 @@
 ###########################################
 # Install
 ###########################################
+ADM_LINK_THREAD(avidemux2_qt4)
 ADM_INSTALL_BIN(avidemux2_qt4)
 INSTALL(FILES ${CMAKE_BINARY_DIR}/config/qt4/config.h DESTINATION "${AVIDEMUX_INCLUDE_DIR}/avidemux/2.6/qt4") 
 include(./qt4PackageDebian.cmake)

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_core/src/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_core/src/CMakeLists.txt	2009-06-20 13:59:51 UTC (rev 4939)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_core/src/CMakeLists.txt	2009-06-20 14:23:46 UTC (rev 4940)
@@ -17,12 +17,6 @@
 REMOVE_DEFINITIONS(-DHAVE_CONFIG_H)
 
 # pthreads
-IF (WIN32)
-        TARGET_LINK_LIBRARIES(ADM_core "${PTHREAD_LIBRARIES}")
-ENDIF (WIN32)
-IF (UNIX AND PTHREAD_FOUND)
-        TARGET_LINK_LIBRARIES(ADM_core ${PTHREAD_LIBRARIES})
-ENDIF (UNIX AND PTHREAD_FOUND)
 
-
+ADM_LINK_THREAD(ADM_core)
 ADM_INSTALL_LIB(ADM_core)

Modified: branches/avidemux_2.6_branch_mean/cmake/FindThreads.cmake
===================================================================
--- branches/avidemux_2.6_branch_mean/cmake/FindThreads.cmake	2009-06-20 13:59:51 UTC (rev 4939)
+++ branches/avidemux_2.6_branch_mean/cmake/FindThreads.cmake	2009-06-20 14:23:46 UTC (rev 4940)
@@ -64,4 +64,13 @@
 	IF (PTHREAD_LIBRARIES)
 		SET(PTHREAD_FOUND 1)
 	ENDIF (PTHREAD_LIBRARIES)
-ENDIF(PTHREAD_INCLUDE_DIR)
\ No newline at end of file
+ENDIF(PTHREAD_INCLUDE_DIR)
+
+MACRO(ADM_LINK_THREAD target)
+        IF (WIN32)
+                TARGET_LINK_LIBRARIES(${target} "${PTHREAD_LIBRARIES}")
+        ENDIF (WIN32)
+        IF (UNIX AND PTHREAD_FOUND)
+                TARGET_LINK_LIBRARIES(${target} ${PTHREAD_LIBRARIES})
+        ENDIF (UNIX AND PTHREAD_FOUND)
+ENDMACRO(ADM_LINK_THREAD )



From mean at mail.berlios.de  Sat Jun 20 17:31:51 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sat, 20 Jun 2009 17:31:51 +0200
Subject: [Avidemux-svn-commit] r4941 - in
	branches/avidemux_2.6_branch_mean/avidemux: gtk qt4
Message-ID: <200906201531.n5KFVoB8031713@sheep.berlios.de>

Author: mean
Date: 2009-06-20 17:31:50 +0200 (Sat, 20 Jun 2009)
New Revision: 4941

Modified:
   branches/avidemux_2.6_branch_mean/avidemux/gtk/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux/qt4/CMakeLists.txt
Log:
[build] Fix build on win32

Modified: branches/avidemux_2.6_branch_mean/avidemux/gtk/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/gtk/CMakeLists.txt	2009-06-20 14:23:46 UTC (rev 4940)
+++ branches/avidemux_2.6_branch_mean/avidemux/gtk/CMakeLists.txt	2009-06-20 15:31:50 UTC (rev 4941)
@@ -1,123 +1,123 @@
-MESSAGE("#########################################")
-MESSAGE("Configure for avidemux Gtk Started")
-MESSAGE("#########################################")
-MESSAGE("")
-PROJECT(Avidemux_gtk)
-include(../commonCmakeApplication.cmake)
-include(admCheckGtk)
-include(admCheckGlade)
-#
-checkGtk()
-checkGlade()
-##########################################
-# Config
-##########################################
-ADD_DEFINITIONS(-DADM_UI_TYPE_BUILD=ADM_UI_GTK)
-SET(CONFIG_HEADER_TYPE ADM_BUILD_GTK)
-SET(UI_SUFFIX gtk)
-#
-CONFIGURE_FILE("${AVIDEMUX_TOP_SOURCE_DIR}/cmake/config.h.cmake" "${CMAKE_BINARY_DIR}/config/gtk/config.h")
-MESSAGE(STATUS "GTK config.h generated")
-
-INCLUDE_DIRECTORIES("${CMAKE_BINARY_DIR}/config/gtk/")
-###########################################
-# Executable
-###########################################
-ADD_EXECUTABLE(avidemux2_gtk ${ADM_EXE_SRCS})
-ADD_TARGET_CFLAGS(avidemux2_gtk "-I${CMAKE_BINARY_DIR}/config/gtk")
-########################################
-# Add subdirectories 
-########################################
-ADD_SUBDIRECTORY(../common ./common)
-ADD_SUBDIRECTORY(ADM_UIs ./ADM_UIsGtk)
-ADD_SUBDIRECTORY(ADM_userInterfaces ./ADM_userInterfacesGtk)
-# Executable
-
-SDLify(../common/main.cpp)
-ADD_SOURCE_CFLAGS(../common/main.cpp "-DADM_SUBVERSION=${ADM_SUBVERSION}")
-###########################################
-# Construct common libraries
-###########################################
-
-IF (ADM_DEBUG AND FIND_LEAKS)
-	TARGET_LINK_LIBRARIES(avidemux2_gtk ADM_nvwa)
-ENDIF (ADM_DEBUG AND FIND_LEAKS)
-
-FOREACH (_libName ${commonLibs1})
-        TARGET_LINK_LIBRARIES(avidemux2_gtk ${_libName})
-ENDFOREACH (_libName ${commonLibs})
-
-TARGET_LINK_LIBRARIES(avidemux2_gtk ADM_filtersGtk)
-
-FOREACH (_libName ${commonLibs2})
-        TARGET_LINK_LIBRARIES(avidemux2_gtk ${_libName})
-ENDFOREACH (_libName ${commonLibs})
-FOREACH (_libName ${coreLibs})
-        TARGET_LINK_LIBRARIES(avidemux2_gtk ${_libName})
-ENDFOREACH (_libName ${commonLibs})
-
-#############################################
-# Add gtk specific libs
-#############################################
-TARGET_LINK_LIBRARIES(avidemux2_gtk ADM_UIGtk)
-TARGET_LINK_LIBRARIES(avidemux2_gtk ADM_dialogGtk)
-#TARGET_LINK_LIBRARIES(avidemux2_gtk ADM_filtersGtk)
-TARGET_LINK_LIBRARIES(avidemux2_gtk ADM_gui2Gtk)
-#TARGET_LINK_LIBRARIES(avidemux2_gtk ADM_ocrGtk)
-TARGET_LINK_LIBRARIES(avidemux2_gtk ADM_toolkitGtk)
-TARGET_LINK_LIBRARIES(avidemux2_gtk ADM_UI_GTK)
-###########################################
-# External libs
-###########################################
-# gettext
-IF (GETTEXT_FOUND)
-	TARGET_LINK_LIBRARIES(avidemux2_gtk ${GETTEXT_LIBRARY_DIR})
-ENDIF (GETTEXT_FOUND)
-# PNG
-IF (USE_PNG)
-        TARGET_LINK_LIBRARIES(avidemux2_gtk ${PNG_LIBRARIES})
-	
-ENDIF (USE_PNG)
-
-
-# XVideo
-IF (USE_XV)
-        TARGET_LINK_LIBRARIES(avidemux2_gtk ${XVIDEO_LIBRARY_DIR})
-ENDIF (USE_XV)
-
-# SDL
-IF (USE_SDL)
-        TARGET_LINK_LIBRARIES(avidemux2_gtk ${SDL_LIBRARY})
-ENDIF (USE_SDL)
-
-###########################################
-# UI Specific
-###########################################
-ADD_TARGET_LDFLAGS(avidemux2_gtk ${GTK_LDFLAGS} ${GTHREAD_LDFLAGS})
-
-
-###########################################
-# OS Specific
-###########################################
-IF (WIN32)
-	target_link_libraries(ADM_osSupport)
-
-	IF (MINGW)
-		target_link_libraries(avidemux2_gtk -mno-cygwin)
-	ENDIF (MINGW)
-
-	target_link_libraries(avidemux2_gtk winmm)
-        ADD_TARGET_LDFLAGS(avidemux2_gtk "-mwindows")
-
-ENDIF (WIN32)
-#
-# libxml2
-#
-TARGET_LINK_LIBRARIES(avidemux2_gtk ${LIBXML2_LIBRARIES})
-###########################################
-# Install
-###########################################
-ADM_LINK_THREAD(avidemux2_gtk)
-ADM_INSTALL_BIN(avidemux2_gtk)
-INSTALL(FILES ${CMAKE_BINARY_DIR}/config/gtk/config.h DESTINATION "${AVIDEMUX_INCLUDE_DIR}/avidemux/2.6/gtk") 
-include(./gtkPackageDebian.cmake)
+MESSAGE("#########################################")
+MESSAGE("Configure for avidemux Gtk Started")
+MESSAGE("#########################################")
+MESSAGE("")
+PROJECT(Avidemux_gtk)
+include(../commonCmakeApplication.cmake)
+include(admCheckGtk)
+include(admCheckGlade)
+#
+checkGtk()
+checkGlade()
+##########################################
+# Config
+##########################################
+ADD_DEFINITIONS(-DADM_UI_TYPE_BUILD=ADM_UI_GTK)
+SET(CONFIG_HEADER_TYPE ADM_BUILD_GTK)
+SET(UI_SUFFIX gtk)
+#
+CONFIGURE_FILE("${AVIDEMUX_TOP_SOURCE_DIR}/cmake/config.h.cmake" "${CMAKE_BINARY_DIR}/config/gtk/config.h")
+MESSAGE(STATUS "GTK config.h generated")
+
+INCLUDE_DIRECTORIES("${CMAKE_BINARY_DIR}/config/gtk/")
+###########################################
+# Executable
+###########################################
+ADD_EXECUTABLE(avidemux2_gtk ${ADM_EXE_SRCS})
+ADD_TARGET_CFLAGS(avidemux2_gtk "-I${CMAKE_BINARY_DIR}/config/gtk")
+########################################
+# Add subdirectories 
+########################################
+ADD_SUBDIRECTORY(../common ./common)
+ADD_SUBDIRECTORY(ADM_UIs ./ADM_UIsGtk)
+ADD_SUBDIRECTORY(ADM_userInterfaces ./ADM_userInterfacesGtk)
+# Executable
+
+SDLify(../common/main.cpp)
+ADD_SOURCE_CFLAGS(../common/main.cpp "-DADM_SUBVERSION=${ADM_SUBVERSION}")
+###########################################
+# Construct common libraries
+###########################################
+
+IF (ADM_DEBUG AND FIND_LEAKS)
+	TARGET_LINK_LIBRARIES(avidemux2_gtk ADM_nvwa)
+ENDIF (ADM_DEBUG AND FIND_LEAKS)
+
+FOREACH (_libName ${commonLibs1})
+        TARGET_LINK_LIBRARIES(avidemux2_gtk ${_libName})
+ENDFOREACH (_libName ${commonLibs})
+
+TARGET_LINK_LIBRARIES(avidemux2_gtk ADM_filtersGtk)
+
+FOREACH (_libName ${commonLibs2})
+        TARGET_LINK_LIBRARIES(avidemux2_gtk ${_libName})
+ENDFOREACH (_libName ${commonLibs})
+FOREACH (_libName ${coreLibs})
+        TARGET_LINK_LIBRARIES(avidemux2_gtk ${_libName})
+ENDFOREACH (_libName ${commonLibs})
+
+#############################################
+# Add gtk specific libs
+#############################################
+TARGET_LINK_LIBRARIES(avidemux2_gtk ADM_UIGtk)
+TARGET_LINK_LIBRARIES(avidemux2_gtk ADM_dialogGtk)
+#TARGET_LINK_LIBRARIES(avidemux2_gtk ADM_filtersGtk)
+TARGET_LINK_LIBRARIES(avidemux2_gtk ADM_gui2Gtk)
+#TARGET_LINK_LIBRARIES(avidemux2_gtk ADM_ocrGtk)
+TARGET_LINK_LIBRARIES(avidemux2_gtk ADM_toolkitGtk)
+TARGET_LINK_LIBRARIES(avidemux2_gtk ADM_UI_GTK)
+###########################################
+# External libs
+###########################################
+# gettext
+IF (GETTEXT_FOUND)
+	TARGET_LINK_LIBRARIES(avidemux2_gtk ${GETTEXT_LIBRARY_DIR})
+ENDIF (GETTEXT_FOUND)
+# PNG
+IF (USE_PNG)
+        TARGET_LINK_LIBRARIES(avidemux2_gtk ${PNG_LIBRARIES})
+	
+ENDIF (USE_PNG)
+
+
+# XVideo
+IF (USE_XV)
+        TARGET_LINK_LIBRARIES(avidemux2_gtk ${XVIDEO_LIBRARY_DIR})
+ENDIF (USE_XV)
+
+# SDL
+IF (USE_SDL)
+        TARGET_LINK_LIBRARIES(avidemux2_gtk ${SDL_LIBRARY})
+ENDIF (USE_SDL)
+
+###########################################
+# UI Specific
+###########################################
+ADD_TARGET_LDFLAGS(avidemux2_gtk ${GTK_LDFLAGS} ${GTHREAD_LDFLAGS})
+
+
+###########################################
+# OS Specific
+###########################################
+IF (WIN32)
+	target_link_libraries(ADM_osSupport)
+
+	IF (MINGW)
+		target_link_libraries(avidemux2_gtk -mno-cygwin)
+	ENDIF (MINGW)
+
+	target_link_libraries(avidemux2_gtk winmm)
+        ADD_TARGET_LDFLAGS(avidemux2_gtk "-mwindows")
+
+ENDIF (WIN32)
+#
+# libxml2
+#
+TARGET_LINK_LIBRARIES(avidemux2_gtk ${LIBXML2_LIBRARIES})
+###########################################
+# Install
+###########################################
+ADM_LINK_THREAD(avidemux2_gtk)
+ADM_INSTALL_BIN(avidemux2_gtk)
+INSTALL(FILES ${CMAKE_BINARY_DIR}/config/gtk/config.h DESTINATION "${AVIDEMUX_INCLUDE_DIR}/avidemux/2.6/gtk") 
+include(./gtkPackageDebian.cmake)

Modified: branches/avidemux_2.6_branch_mean/avidemux/qt4/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/qt4/CMakeLists.txt	2009-06-20 14:23:46 UTC (rev 4940)
+++ branches/avidemux_2.6_branch_mean/avidemux/qt4/CMakeLists.txt	2009-06-20 15:31:50 UTC (rev 4941)
@@ -1,132 +1,138 @@
-MESSAGE("#########################################")
-MESSAGE("Configure for avidemux Qt4 Started")
-MESSAGE("#########################################")
-MESSAGE("")
-PROJECT(Avidemux_qt4)
-include(../commonCmakeApplication.cmake)
-INCLUDE(admCheckQt4)
-checkQt4()
-IF (NOT QT4_FOUND)
-        MESSAGE(FATAL_ERROR "Qt4 NOT FOUND")
-ENDIF (NOT QT4_FOUND)
-
-#include(admCheckGtk)
-#include(admCheckGlade)
-#
-#checkGtk()
-#checkGlade()
-##########################################
-# Config
-##########################################
-
-SET(CONFIG_HEADER_TYPE ADM_BUILD_QT4)
-SET(UI_SUFFIX qt4)
-#
-ADD_DEFINITIONS(-DADM_UI_TYPE_BUILD=ADM_UI_QT4)
-CONFIGURE_FILE("${AVIDEMUX_TOP_SOURCE_DIR}/cmake/config.h.cmake" "${CMAKE_BINARY_DIR}/config/qt4/config.h")
-MESSAGE(STATUS "QT4 config.h generated")
-
-INCLUDE_DIRECTORIES("${CMAKE_BINARY_DIR}/config/qt4/")
-###########################################
-# Executable
-###########################################
-ADD_EXECUTABLE(avidemux2_qt4 ${ADM_EXE_SRCS})
-########################################
-# Add subdirectories 
-########################################
-INCLUDE_DIRECTORIES(ADM_UIs/include/)
-ADD_SUBDIRECTORY(../common ./common)
-ADD_SUBDIRECTORY(ADM_UIs ./ADM_UIsQt4)
-ADD_SUBDIRECTORY(ADM_userInterfaces ./ADM_userInterfacesQT4)
-# Executable
-
-SDLify(../common/main.cpp)
-ADD_SOURCE_CFLAGS(../common/main.cpp "-DADM_SUBVERSION=${ADM_SUBVERSION}")
-###########################################
-# Construct common libraries
-###########################################
-
-IF (ADM_DEBUG AND FIND_LEAKS)
-	TARGET_LINK_LIBRARIES(avidemux2_qt4 ADM_nvwa)
-ENDIF (ADM_DEBUG AND FIND_LEAKS)
-
-FOREACH (_libName ${commonLibs1})
-        TARGET_LINK_LIBRARIES(avidemux2_qt4 ${_libName})
-ENDFOREACH (_libName ${commonLibs})
-
-
-FOREACH (_libName ${commonLibs2})
-        TARGET_LINK_LIBRARIES(avidemux2_qt4 ${_libName})
-ENDFOREACH (_libName ${commonLibs})
-FOREACH (_libName ${coreLibs})
-        TARGET_LINK_LIBRARIES(avidemux2_qt4 ${_libName})
-ENDFOREACH (_libName ${commonLibs})
-        TARGET_LINK_LIBRARIES(avidemux2_qt4 ADM_filter)
-
-#############################################
-# Add qt specific libs
-#############################################
-TARGET_LINK_LIBRARIES(avidemux2_qt4 ADM_UIQT4)
-TARGET_LINK_LIBRARIES(avidemux2_qt4 ADM_dialogQt4)
-TARGET_LINK_LIBRARIES(avidemux2_qt4 ADM_guiQt4)
-TARGET_LINK_LIBRARIES(avidemux2_qt4 ADM_filtersQt4)
-TARGET_LINK_LIBRARIES(avidemux2_qt4 ADM_guiQt4)
-TARGET_LINK_LIBRARIES(avidemux2_qt4 ADM_UI_QT4)
-###########################################
-# External libs
-###########################################
-# gettext
-IF (GETTEXT_FOUND)
-	TARGET_LINK_LIBRARIES(avidemux2_qt4 ${GETTEXT_LIBRARY_DIR})
-ENDIF (GETTEXT_FOUND)
-
-
-# PNG
-IF (USE_PNG)
-        TARGET_LINK_LIBRARIES(avidemux2_qt4 ${PNG_LIBRARIES})
-	
-ENDIF (USE_PNG)
-
-
-# XVideo
-IF (USE_XV)
-        TARGET_LINK_LIBRARIES(avidemux2_qt4 ${XVIDEO_LIBRARY_DIR})
-ENDIF (USE_XV)
-
-# SDL
-IF (USE_SDL)
-        TARGET_LINK_LIBRARIES(avidemux2_qt4 ${SDL_LIBRARY})
-ENDIF (USE_SDL)
-
-###########################################
-# UI Specific
-###########################################
-ADD_TARGET_LDFLAGS(avidemux2_qt4  ${GTHREAD_LDFLAGS})
-TARGET_LINK_LIBRARIES(avidemux2_qt4 ${QT_QTGUI_LIBRARY} ${QT_QTCORE_LIBRARY})
-
-###########################################
-# OS Specific
-###########################################
-IF (WIN32)
-	target_link_libraries(ADM_osSupport)
-
-	IF (MINGW)
-		target_link_libraries(avidemux2_qt4 -mno-cygwin)
-	ENDIF (MINGW)
-
-	target_link_libraries(avidemux2_qt4 winmm)
-        ADD_TARGET_LDFLAGS(avidemux2_qt4 "-mwindows")
-
-ENDIF (WIN32)
-#
-# xml
-#
-TARGET_LINK_LIBRARIES(avidemux2_qt4 ${LIBXML2_LIBRARIES})
-
-###########################################
-# Install
-###########################################
-ADM_LINK_THREAD(avidemux2_qt4)
-ADM_INSTALL_BIN(avidemux2_qt4)
-INSTALL(FILES ${CMAKE_BINARY_DIR}/config/qt4/config.h DESTINATION "${AVIDEMUX_INCLUDE_DIR}/avidemux/2.6/qt4") 
-include(./qt4PackageDebian.cmake)
+MESSAGE("#########################################")
+MESSAGE("Configure for avidemux Qt4 Started")
+MESSAGE("#########################################")
+MESSAGE("")
+PROJECT(Avidemux_qt4)
+include(../commonCmakeApplication.cmake)
+INCLUDE(admCheckQt4)
+checkQt4()
+IF (NOT QT4_FOUND)
+        MESSAGE(FATAL_ERROR "Qt4 NOT FOUND")
+ENDIF (NOT QT4_FOUND)
+
+#include(admCheckGtk)
+#include(admCheckGlade)
+#
+#checkGtk()
+#checkGlade()
+##########################################
+# Config
+##########################################
+
+SET(CONFIG_HEADER_TYPE ADM_BUILD_QT4)
+SET(UI_SUFFIX qt4)
+#
+ADD_DEFINITIONS(-DADM_UI_TYPE_BUILD=ADM_UI_QT4)
+CONFIGURE_FILE("${AVIDEMUX_TOP_SOURCE_DIR}/cmake/config.h.cmake" "${CMAKE_BINARY_DIR}/config/qt4/config.h")
+MESSAGE(STATUS "QT4 config.h generated")
+
+INCLUDE_DIRECTORIES("${CMAKE_BINARY_DIR}/config/qt4/")
+###########################################
+# Executable
+###########################################
+ADD_EXECUTABLE(avidemux2_qt4 ${ADM_EXE_SRCS})
+########################################
+# Add subdirectories 
+########################################
+INCLUDE_DIRECTORIES(ADM_UIs/include/)
+ADD_SUBDIRECTORY(../common ./commonQt4)
+ADD_SUBDIRECTORY(ADM_UIs ./ADM_UIsQt4)
+ADD_SUBDIRECTORY(ADM_userInterfaces ./ADM_userInterfacesQT4)
+# Executable
+
+SDLify(../common/main.cpp)
+ADD_SOURCE_CFLAGS(../common/main.cpp "-DADM_SUBVERSION=${ADM_SUBVERSION}")
+###########################################
+# Construct common libraries
+###########################################
+
+IF (ADM_DEBUG AND FIND_LEAKS)
+	TARGET_LINK_LIBRARIES(avidemux2_qt4 ADM_nvwa)
+ENDIF (ADM_DEBUG AND FIND_LEAKS)
+
+FOREACH (_libName ${commonLibs1})
+        TARGET_LINK_LIBRARIES(avidemux2_qt4 ${_libName})
+ENDFOREACH (_libName ${commonLibs})
+
+
+FOREACH (_libName ${commonLibs2})
+        TARGET_LINK_LIBRARIES(avidemux2_qt4 ${_libName})
+ENDFOREACH (_libName ${commonLibs})
+TARGET_LINK_LIBRARIES(avidemux2_qt4 ADM_filter)
+#############################################
+# Add qt specific libs
+#############################################
+TARGET_LINK_LIBRARIES(avidemux2_qt4 ADM_UIQT4)
+TARGET_LINK_LIBRARIES(avidemux2_qt4 ADM_dialogQt4)
+TARGET_LINK_LIBRARIES(avidemux2_qt4 ADM_guiQt4)
+TARGET_LINK_LIBRARIES(avidemux2_qt4 ADM_filtersQt4)
+TARGET_LINK_LIBRARIES(avidemux2_qt4 ADM_UIQT4)
+TARGET_LINK_LIBRARIES(avidemux2_qt4 ADM_guiQt4)
+TARGET_LINK_LIBRARIES(avidemux2_qt4 ADM_UI_QT4)
+###########################################
+# Construct Core libraries
+###########################################
+
+FOREACH (_libName ${coreLibs})
+        TARGET_LINK_LIBRARIES(avidemux2_qt4 ${_libName})
+ENDFOREACH (_libName ${commonLibs})
+        
+
+###########################################
+# External libs
+###########################################
+# gettext
+IF (GETTEXT_FOUND)
+	TARGET_LINK_LIBRARIES(avidemux2_qt4 ${GETTEXT_LIBRARY_DIR})
+ENDIF (GETTEXT_FOUND)
+
+
+# PNG
+IF (USE_PNG)
+        TARGET_LINK_LIBRARIES(avidemux2_qt4 ${PNG_LIBRARIES})
+	
+ENDIF (USE_PNG)
+
+
+# XVideo
+IF (USE_XV)
+        TARGET_LINK_LIBRARIES(avidemux2_qt4 ${XVIDEO_LIBRARY_DIR})
+ENDIF (USE_XV)
+
+# SDL
+IF (USE_SDL)
+        TARGET_LINK_LIBRARIES(avidemux2_qt4 ${SDL_LIBRARY})
+ENDIF (USE_SDL)
+
+###########################################
+# UI Specific
+###########################################
+ADD_TARGET_LDFLAGS(avidemux2_qt4  ${GTHREAD_LDFLAGS})
+TARGET_LINK_LIBRARIES(avidemux2_qt4 ${QT_QTGUI_LIBRARY} ${QT_QTCORE_LIBRARY})
+
+###########################################
+# OS Specific
+###########################################
+IF (WIN32)
+	target_link_libraries(ADM_osSupport)
+
+	IF (MINGW)
+		target_link_libraries(avidemux2_qt4 -mno-cygwin)
+	ENDIF (MINGW)
+
+	target_link_libraries(avidemux2_qt4 winmm)
+        ADD_TARGET_LDFLAGS(avidemux2_qt4 "-mwindows")
+
+ENDIF (WIN32)
+#
+# xml
+#
+TARGET_LINK_LIBRARIES(avidemux2_qt4 ${LIBXML2_LIBRARIES})
+
+###########################################
+# Install
+###########################################
+ADM_LINK_THREAD(avidemux2_qt4)
+ADM_INSTALL_BIN(avidemux2_qt4)
+INSTALL(FILES ${CMAKE_BINARY_DIR}/config/qt4/config.h DESTINATION "${AVIDEMUX_INCLUDE_DIR}/avidemux/2.6/qt4") 
+include(./qt4PackageDebian.cmake)



From mean at mail.berlios.de  Sat Jun 20 17:45:40 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sat, 20 Jun 2009 17:45:40 +0200
Subject: [Avidemux-svn-commit] r4942 - in branches/avidemux_2.6_branch_mean:
	. avidemux_plugins cmake
Message-ID: <200906201545.n5KFjeNN032575@sheep.berlios.de>

Author: mean
Date: 2009-06-20 17:45:39 +0200 (Sat, 20 Jun 2009)
New Revision: 4942

Modified:
   branches/avidemux_2.6_branch_mean/.gitignore
   branches/avidemux_2.6_branch_mean/avidemux_plugins/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/cmake/ad_plugin.cmake
   branches/avidemux_2.6_branch_mean/cmake/ae_plugin.cmake
   branches/avidemux_2.6_branch_mean/cmake/dm_plugin.cmake
   branches/avidemux_2.6_branch_mean/cmake/mx_plugin.cmake
Log:
[Build] Change plugin build script

Modified: branches/avidemux_2.6_branch_mean/.gitignore
===================================================================
--- branches/avidemux_2.6_branch_mean/.gitignore	2009-06-20 15:31:50 UTC (rev 4941)
+++ branches/avidemux_2.6_branch_mean/.gitignore	2009-06-20 15:45:39 UTC (rev 4942)
@@ -5,3 +5,4 @@
 Doxyfile
 *.kdev*
 ffconf
+*.sw*

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/CMakeLists.txt	2009-06-20 15:31:50 UTC (rev 4941)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/CMakeLists.txt	2009-06-20 15:45:39 UTC (rev 4942)
@@ -28,33 +28,24 @@
 IF (NOT AVIDEMUX_SOURCE_DIR)
 	MESSAGE(FATAL_ERROR "Please add -DAVIDEMUX_SOURCE_DIR=path_to_avidemux_source")
 ELSE (NOT AVIDEMUX_SOURCE_DIR)
+        # We need TOP_SOURCE_DIR 
 	SET(AVIDEMUX_SOURCE_DIR "${AVIDEMUX_SOURCE_DIR}" CACHE STRING "")
+	SET(AVIDEMUX_TOP_SOURCE_DIR "${AVIDEMUX_SOURCE_DIR}" CACHE STRING "")
 ENDIF (NOT AVIDEMUX_SOURCE_DIR)
 
-INCLUDE_DIRECTORIES(${AVIDEMUX_SOURCE_DIR})
-
+SET(CMAKE_MODULE_PATH "${AVIDEMUX_TOP_SOURCE_DIR}/cmake" "${CMAKE_MODULE_PATH}")
 ########################################
-# Where are the libraries
+# Add include dirs
 ########################################
-IF(NOT AVIDEMUX_LIB_DIR)
-	MESSAGE(FATAL_ERROR "Please add -DAVIDEMUX_LIB_DIR=path_to_avidemux_libs")
-ELSE (NOT AVIDEMUX_LIB_DIR)
-	SET(AVIDEMUX_LIB_DIR "${AVIDEMUX_LIB_DIR}" CACHE STRING "")
-ENDIF(NOT AVIDEMUX_LIB_DIR)
+SET(AVIDEMUX_INSTALL_DIR "${CMAKE_INSTALL_PREFIX}")
+MARK_AS_ADVANCED(AVIDEMUX_INSTALL_DIR)
+include(admInstallDir)
+include(admCoreIncludes)
+LINK_DIRECTORIES("${AVIDEMUX_LIB_DIR}")
 
-LINK_DIRECTORIES(${AVIDEMUX_LIB_DIR})
 
-########################################
-# Where is coreConfig ?
-########################################
-IF(NOT AVIDEMUX_CORECONFIG_DIR)
-	MESSAGE(FATAL_ERROR "Please add -DAVIDEMUX_CORECONFIG_DIR=path_to_ADM_coreConfig.h")
-ELSE (NOT AVIDEMUX_CORECONFIG_DIR)
-	SET(AVIDEMUX_CORECONFIG_DIR "${AVIDEMUX_CORECONFIG_DIR}" CACHE STRING "")
-ENDIF(NOT AVIDEMUX_CORECONFIG_DIR)
+INCLUDE_DIRECTORIES(${AVIDEMUX_INCLUDE_DIR}/avidemux/2.6/)
 
-INCLUDE_DIRECTORIES(${AVIDEMUX_CORECONFIG_DIR})
-
 SET(CMAKE_MODULE_PATH "${AVIDEMUX_SOURCE_DIR}/cmake" "${CMAKE_MODULE_PATH}")
 
 include(admConfigHelper)
@@ -101,8 +92,7 @@
 ########################################
 # Standard Avidemux defines
 ########################################
-SET(VERSION 2.5.0)
-SET(ADM_INSTALL_DIR "${CMAKE_INSTALL_PREFIX}")
+SET(VERSION 2.6.0)
 
 IF (CMAKE_BUILD_TYPE STREQUAL "Debug")
 	SET(ADM_DEBUG 1)

Modified: branches/avidemux_2.6_branch_mean/cmake/ad_plugin.cmake
===================================================================
--- branches/avidemux_2.6_branch_mean/cmake/ad_plugin.cmake	2009-06-20 15:31:50 UTC (rev 4941)
+++ branches/avidemux_2.6_branch_mean/cmake/ad_plugin.cmake	2009-06-20 15:45:39 UTC (rev 4942)
@@ -1,9 +1,5 @@
 MACRO(INIT_AUDIO_PLUGIN _lib)
-	INCLUDE_DIRECTORIES("${AVIDEMUX_CORECONFIG_DIR}/config")
-	INCLUDE_DIRECTORIES("${AVIDEMUX_TOP_SOURCE_DIR}/avidemux/ADM_core/include")
-	INCLUDE_DIRECTORIES("${AVIDEMUX_TOP_SOURCE_DIR}/avidemux/ADM_coreAudio/include")
-	INCLUDE_DIRECTORIES("${AVIDEMUX_TOP_SOURCE_DIR}/avidemux/ADM_audiocodec")
-	INCLUDE_DIRECTORIES("${AVIDEMUX_TOP_SOURCE_DIR}/avidemux/ADM_coreUtils/include")
+	INCLUDE_DIRECTORIES("${AVIDEMUX_TOP_SOURCE_DIR}/avidemux/common/ADM_audiocodec")
 ENDMACRO(INIT_AUDIO_PLUGIN)
 
 MACRO(INSTALL_AUDIODECODER _lib)

Modified: branches/avidemux_2.6_branch_mean/cmake/ae_plugin.cmake
===================================================================
--- branches/avidemux_2.6_branch_mean/cmake/ae_plugin.cmake	2009-06-20 15:31:50 UTC (rev 4941)
+++ branches/avidemux_2.6_branch_mean/cmake/ae_plugin.cmake	2009-06-20 15:45:39 UTC (rev 4942)
@@ -2,11 +2,7 @@
 #  Macro to declare an audio encoder plugin
 #
 MACRO(INIT_AUDIO_ENCODER _lib)
-	INCLUDE_DIRECTORIES("${AVIDEMUX_TOP_SOURCE_DIR}/avidemux/ADM_core/include")
-	INCLUDE_DIRECTORIES("${AVIDEMUX_TOP_SOURCE_DIR}/avidemux/ADM_coreAudio/include")
-	INCLUDE_DIRECTORIES("${AVIDEMUX_TOP_SOURCE_DIR}/avidemux/ADM_coreUI/include")
-	INCLUDE_DIRECTORIES("${AVIDEMUX_TOP_SOURCE_DIR}/avidemux/ADM_audioFilter/include")
-    INCLUDE_DIRECTORIES("${AVIDEMUX_TOP_SOURCE_DIR}/avidemux/ADM_coreAudioEncoder/include")
+	INCLUDE_DIRECTORIES("${AVIDEMUX_TOP_SOURCE_DIR}/avidemux/common/ADM_audioFilter/include")
 
     ADD_DEFINITIONS("-DADM_MINIMAL_UI_INTERFACE")
 

Modified: branches/avidemux_2.6_branch_mean/cmake/dm_plugin.cmake
===================================================================
--- branches/avidemux_2.6_branch_mean/cmake/dm_plugin.cmake	2009-06-20 15:31:50 UTC (rev 4941)
+++ branches/avidemux_2.6_branch_mean/cmake/dm_plugin.cmake	2009-06-20 15:45:39 UTC (rev 4942)
@@ -1,11 +1,4 @@
 MACRO(INIT_DEMUXER _lib)
-    INCLUDE_DIRECTORIES("${AVIDEMUX_TOP_SOURCE_DIR}/avidemux/ADM_core/include")
-    INCLUDE_DIRECTORIES("${AVIDEMUX_TOP_SOURCE_DIR}/avidemux/ADM_coreAudio/include")
-    INCLUDE_DIRECTORIES("${AVIDEMUX_TOP_SOURCE_DIR}/avidemux/ADM_coreDemuxer/include")
-    INCLUDE_DIRECTORIES("${AVIDEMUX_TOP_SOURCE_DIR}/avidemux/ADM_coreUI/include")
-    INCLUDE_DIRECTORIES("${AVIDEMUX_TOP_SOURCE_DIR}/avidemux/ADM_coreImage/include")
-    INCLUDE_DIRECTORIES("${AVIDEMUX_TOP_SOURCE_DIR}/avidemux/ADM_coreUtils/include")
-    INCLUDE_DIRECTORIES("${AVIDEMUX_TOP_SOURCE_DIR}/avidemux/ADM_audioParser/include")
 ENDMACRO(INIT_DEMUXER)
 
 MACRO(INSTALL_DEMUXER _lib)

Modified: branches/avidemux_2.6_branch_mean/cmake/mx_plugin.cmake
===================================================================
--- branches/avidemux_2.6_branch_mean/cmake/mx_plugin.cmake	2009-06-20 15:31:50 UTC (rev 4941)
+++ branches/avidemux_2.6_branch_mean/cmake/mx_plugin.cmake	2009-06-20 15:45:39 UTC (rev 4942)
@@ -1,10 +1,4 @@
 MACRO(INIT_MUXER _lib)
-    INCLUDE_DIRECTORIES("${AVIDEMUX_TOP_SOURCE_DIR}/avidemux/ADM_core/include")
-    INCLUDE_DIRECTORIES("${AVIDEMUX_TOP_SOURCE_DIR}/avidemux/ADM_coreAudio/include")
-    INCLUDE_DIRECTORIES("${AVIDEMUX_TOP_SOURCE_DIR}/avidemux/ADM_coreMuxer/include")
-    INCLUDE_DIRECTORIES("${AVIDEMUX_TOP_SOURCE_DIR}/avidemux/ADM_coreUI/include")
-    INCLUDE_DIRECTORIES("${AVIDEMUX_TOP_SOURCE_DIR}/avidemux/ADM_coreImage/include")
-    INCLUDE_DIRECTORIES("${AVIDEMUX_TOP_SOURCE_DIR}/avidemux/ADM_coreUtils/include")
 ENDMACRO(INIT_MUXER)
 
 MACRO(INSTALL_MUXER _lib)



From gruntster at mail.berlios.de  Sat Jun 20 19:18:25 2009
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Sat, 20 Jun 2009 19:18:25 +0200
Subject: [Avidemux-svn-commit] r4943 -
	branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries
Message-ID: <200906201718.n5KHIPRN018936@sheep.berlios.de>

Author: gruntster
Date: 2009-06-20 19:17:34 +0200 (Sat, 20 Jun 2009)
New Revision: 4943

Added:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ffmpeg_r18940.tar.gz
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/libswscale_r29319.tar.gz
Log:
[ffmpeg] ffmpeg tarballs

Added: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ffmpeg_r18940.tar.gz
===================================================================
(Binary files differ)


Property changes on: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ffmpeg_r18940.tar.gz
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/libswscale_r29319.tar.gz
===================================================================
(Binary files differ)


Property changes on: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/libswscale_r29319.tar.gz
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream



From mean at mail.berlios.de  Sun Jun 21 09:19:21 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sun, 21 Jun 2009 09:19:21 +0200
Subject: [Avidemux-svn-commit] r4944 - tags
Message-ID: <200906210719.n5L7JL8Z011400@sheep.berlios.de>

Author: mean
Date: 2009-06-21 09:19:21 +0200 (Sun, 21 Jun 2009)
New Revision: 4944

Added:
   tags/avidemux_2.5.0/
Log:


Copied: tags/avidemux_2.5.0 (from rev 4943, branches/avidemux_2.5_branch_gruntster)



From mean at mail.berlios.de  Sun Jun 21 10:51:57 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sun, 21 Jun 2009 10:51:57 +0200
Subject: [Avidemux-svn-commit] r4945 -
	branches/avidemux_2.5_branch_gruntster/po
Message-ID: <200906210851.n5L8puWf018926@sheep.berlios.de>

Author: mean
Date: 2009-06-21 10:51:45 +0200 (Sun, 21 Jun 2009)
New Revision: 4945

Modified:
   branches/avidemux_2.5_branch_gruntster/po/zh_TW.po
Log:
[po] traditional chinese update by Dong-Jun Wu

Modified: branches/avidemux_2.5_branch_gruntster/po/zh_TW.po
===================================================================
--- branches/avidemux_2.5_branch_gruntster/po/zh_TW.po	2009-06-21 07:19:21 UTC (rev 4944)
+++ branches/avidemux_2.5_branch_gruntster/po/zh_TW.po	2009-06-21 08:51:45 UTC (rev 4945)
@@ -1,291 +1,246 @@
+# Dong-Jun Wu <ziyawu at gmail.com>, 2009.
 msgid ""
 msgstr ""
-"Project-Id-Version: \n"
+"Project-Id-Version: zh_TW\n"
 "Report-Msgid-Bugs-To: \n"
-"POT-Creation-Date: 2009-02-23 12:13+0800\n"
-"PO-Revision-Date: 2009-04-09 17:50+0800\n"
+"POT-Creation-Date: 2009-06-02 23:58+0800\n"
+"PO-Revision-Date: 2009-06-13 13:27+0800\n"
 "Last-Translator: Dong-Jun Wu <ziyawu at gmail.com>\n"
-"Language-Team: \n"
+"Language-Team: Traditional Chinese <ziyawu at gmail.com>\n"
 "MIME-Version: 1.0\n"
 "Content-Type: text/plain; charset=UTF-8\n"
 "Content-Transfer-Encoding: 8bit\n"
 "X-Poedit-Language: Chinese (traditional)\n"
 "X-Poedit-Country: TAIWAN\n"
+"Plural-Forms: nplurals=2; plural=n != 1;\n"
 
-#: avidemux/ADM_editor/ADM_outputfmt.h:42
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:515
-#: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:380
+#: avidemux/ADM_editor/ADM_outputfmt.h:43
+#: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:370
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:501
 msgid "AVI"
 msgstr "AVI"
 
-#: avidemux/ADM_editor/ADM_outputfmt.h:43
+#: avidemux/ADM_editor/ADM_outputfmt.h:44
 msgid "AVI, dual audio"
 msgstr "AVI, ??"
 
-#: avidemux/ADM_editor/ADM_outputfmt.h:44
+#: avidemux/ADM_editor/ADM_outputfmt.h:45
 msgid "AVI, pack VOP"
 msgstr "AVI, ???? VOP"
 
-#: avidemux/ADM_editor/ADM_outputfmt.h:45
+#: avidemux/ADM_editor/ADM_outputfmt.h:46
 msgid "AVI, unpack VOP"
 msgstr "AVI, ???? VOP"
 
-#: avidemux/ADM_editor/ADM_outputfmt.h:46
+#: avidemux/ADM_editor/ADM_outputfmt.h:47
 msgid "MPEG-PS (A+V)"
 msgstr "MPEG-PS (A+V)"
 
-#: avidemux/ADM_editor/ADM_outputfmt.h:47
+#: avidemux/ADM_editor/ADM_outputfmt.h:48
 msgid "MPEG-TS (A+V)"
 msgstr "MPEG-TS (A+V)"
 
-#: avidemux/ADM_editor/ADM_outputfmt.h:48
+#: avidemux/ADM_editor/ADM_outputfmt.h:49
 msgid "MPEG video"
 msgstr "MPEG ??"
 
-#: avidemux/ADM_editor/ADM_outputfmt.h:49
-#: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:504
-#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:130
+#: avidemux/ADM_editor/ADM_outputfmt.h:50
+#: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:494
+#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:120
 msgid "MP4"
 msgstr "MP4"
 
-#: avidemux/ADM_editor/ADM_outputfmt.h:50
+#: avidemux/ADM_editor/ADM_outputfmt.h:51
 msgid "MP4 (PSP)"
 msgstr "MP4 (PSP)"
 
-#: avidemux/ADM_editor/ADM_outputfmt.h:51
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:519
-#: avidemux/ADM_outputs/oplug_ogm/op_ogsave.cpp:120
+#: avidemux/ADM_editor/ADM_outputfmt.h:52
+#: avidemux/ADM_outputs/oplug_ogm/op_ogsave.cpp:108
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:505
 msgid "OGM"
 msgstr "OGM"
 
-#: avidemux/ADM_editor/ADM_outputfmt.h:52
-#: avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp:187
-#: avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp:254
+#: avidemux/ADM_editor/ADM_outputfmt.h:53
+#: avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp:179
+#: avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp:246
 msgid "FLV"
 msgstr "FLV"
 
-#: avidemux/ADM_editor/ADM_outputfmt.h:53
-#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:131
+#: avidemux/ADM_editor/ADM_outputfmt.h:54
+#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:121
 msgid "MKV"
 msgstr "MKV"
 
-#: avidemux/ADM_editor/ADM_outputfmt.h:54
+#: avidemux/ADM_editor/ADM_outputfmt.h:55
 msgid "DUMMY"
 msgstr "??"
 
-#: avidemux/ADM_encoder/ADM_encCodecDesc.h:13
+#: avidemux/ADM_encoder/adm_encyv12.h:70
+msgid "YV12"
+msgstr "YV12"
+
+#: avidemux/ADM_encoder/adm_encdivx.h:53
+msgid "DivX"
+msgstr "DivX"
+
+#: avidemux/ADM_encoder/adm_encmjpeg.h:61
+msgid "MJPEG"
+msgstr "MJPEG"
+
+#: avidemux/ADM_encoder/adm_encmpeg2enc.h:58
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:509
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:47
+msgid "MPEG"
+msgstr "MPEG"
+
+#: avidemux/ADM_encoder/adm_encxvid.h:61
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp:127
+msgid "Xvid"
+msgstr "Xvid"
+
+#: avidemux/ADM_encoder/adm_encffmpeg.h:48
+msgid "LavCodec"
+msgstr "LavCodec"
+
+#: avidemux/ADM_encoder/ADM_encCodecDesc.h:14
 msgid "YV12 (raw)"
 msgstr "YV12 (raw)"
 
-#: avidemux/ADM_encoder/ADM_encCodecDesc.h:111
+#: avidemux/ADM_encoder/ADM_encCodecDesc.h:112
 msgid "H.263 (lavc)"
 msgstr "H.263 (lavc)"
 
-#: avidemux/ADM_encoder/ADM_encCodecDesc.h:127
+#: avidemux/ADM_encoder/ADM_encCodecDesc.h:128
 msgid "H.263+ (lavc)"
 msgstr "H.263+ (lavc)"
 
-#: avidemux/ADM_encoder/ADM_encCodecDesc.h:143
+#: avidemux/ADM_encoder/ADM_encCodecDesc.h:144
 msgid "MPEG-4 ASP (lavc)"
 msgstr "MPEG-4 ASP (lavc)"
 
-#: avidemux/ADM_encoder/ADM_encCodecDesc.h:159
+#: avidemux/ADM_encoder/ADM_encCodecDesc.h:160
 msgid "DV (lavc)"
 msgstr "DV (lavc)"
 
-#: avidemux/ADM_encoder/ADM_encCodecDesc.h:175
+#: avidemux/ADM_encoder/ADM_encCodecDesc.h:176
 msgid "FLV1 (lavc)"
 msgstr "FLV1 (lavc)"
 
-#: avidemux/ADM_encoder/ADM_encCodecDesc.h:191
+#: avidemux/ADM_encoder/ADM_encCodecDesc.h:192
 msgid "Snow (lavc)"
 msgstr "Snow (lavc)"
 
-#: avidemux/ADM_encoder/ADM_encCodecDesc.h:207
+#: avidemux/ADM_encoder/ADM_encCodecDesc.h:208
 msgid "FF Huffyuv (lavc)"
 msgstr "FF Huffyuv (lavc)"
 
-#: avidemux/ADM_encoder/ADM_encCodecDesc.h:223
+#: avidemux/ADM_encoder/ADM_encCodecDesc.h:224
 msgid "Huffyuv (lavc)"
 msgstr "Huffyuv (lavc)"
 
-#: avidemux/ADM_encoder/ADM_encCodecDesc.h:239
+#: avidemux/ADM_encoder/ADM_encCodecDesc.h:240
 msgid "FFV1 (lavc)"
 msgstr "FFV1 (lavc)"
 
-#: avidemux/ADM_encoder/ADM_encCodecDesc.h:257
+#: avidemux/ADM_encoder/ADM_encCodecDesc.h:258
 msgid "MJPEG (lavc)"
 msgstr "MJPEG (lavc)"
 
-#: avidemux/ADM_encoder/ADM_encCodecDesc.h:272
-msgid "Y800 (lavc)"
-msgstr "Y800 (lavc)"
-
-#: avidemux/ADM_encoder/ADM_encCodecDesc.h:332
+#: avidemux/ADM_encoder/ADM_encCodecDesc.h:315
 msgid "VCD (lavc)"
 msgstr "VCD (lavc)"
 
-#: avidemux/ADM_encoder/ADM_encCodecDesc.h:392
+#: avidemux/ADM_encoder/ADM_encCodecDesc.h:375
 msgid "DVD (lavc)"
 msgstr "DVD (lavc)"
 
-#: avidemux/ADM_encoder/ADM_encCodecDesc.h:452
+#: avidemux/ADM_encoder/ADM_encCodecDesc.h:435
 msgid "SVCD (lavc)"
 msgstr "SVCD (lavc)"
 
-#: avidemux/ADM_encoder/ADM_encCodecDesc.h:479
+#: avidemux/ADM_encoder/ADM_encCodecDesc.h:462
 msgid "VCD (mpeg2enc)"
 msgstr "VCD (mpeg2enc)"
 
-#: avidemux/ADM_encoder/ADM_encCodecDesc.h:511
+#: avidemux/ADM_encoder/ADM_encCodecDesc.h:494
 msgid "SVCD (mpeg2enc)"
 msgstr "SVCD (mpeg2enc)"
 
-#: avidemux/ADM_encoder/ADM_encCodecDesc.h:530
+#: avidemux/ADM_encoder/ADM_encCodecDesc.h:513
 msgid "MPEG-2 requant"
 msgstr "MPEG-2 requant"
 
-#: avidemux/ADM_encoder/ADM_encCodecDesc.h:557
+#: avidemux/ADM_encoder/ADM_encCodecDesc.h:540
 msgid "DVD (mpeg2enc)"
 msgstr "DVD (mpeg2enc)"
 
-#: avidemux/ADM_encoder/ADM_encCodecDesc.h:689
+#: avidemux/ADM_encoder/ADM_encCodecDesc.h:672
 msgid "MPEG-4 ASP (Xvid4)"
 msgstr "MPEG-4 ASP (Xvid4)"
 
-#: avidemux/ADM_encoder/ADM_encCodecDesc.h:833
-msgid "MPEG-4 AVC (x264)"
-msgstr "MPEG-4 AVC (x264)"
-
-#: avidemux/ADM_encoder/ADM_encCodecDesc.h:850
+#: avidemux/ADM_encoder/ADM_encCodecDesc.h:689
 msgid "dummy"
 msgstr "??"
 
-#: avidemux/ADM_encoder/ADM_encCodecDesc.h:853
-#: avidemux/ADM_encoder/adm_encCopy.cpp:94
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1082
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1122
-#: avidemux/ADM_outputs/oplug_mpeg/op_mpegpass.cpp:221
-#: avidemux/ADM_outputs/oplug_mpeg/op_mpegpass.cpp:225
-#: avidemux/ADM_outputs/oplug_dummy/oplug_dummy.cpp:143
-#: avidemux/ADM_outputs/oplug_dummy/oplug_dummy.cpp:175
-#: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:282
-#: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:378
-#: avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp:190
-#: avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp:236
-#: avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp:257
-#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:165
-#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:239
-#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:251
-#: avidemux/ADM_outputs/oplug_ogm/op_ogsavecopy.cpp:69
-#: avidemux/ADM_outputs/oplug_ogm/op_ogaudio.cpp:90
-#: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:379
+#: avidemux/ADM_encoder/ADM_encCodecDesc.h:692
+#: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:272
+#: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:368
+#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:155
+#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:243
+#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:255
+#: avidemux/ADM_outputs/oplug_mpeg/op_mpegpass.cpp:173
+#: avidemux/ADM_outputs/oplug_mpeg/op_mpegpass.cpp:177
+#: avidemux/ADM_outputs/oplug_dummy/oplug_dummy.cpp:136
+#: avidemux/ADM_outputs/oplug_dummy/oplug_dummy.cpp:168
+#: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:365
+#: avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp:182
+#: avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp:228
+#: avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp:249
+#: avidemux/ADM_outputs/oplug_ogm/op_ogaudio.cpp:86
+#: avidemux/ADM_outputs/oplug_ogm/op_ogsavecopy.cpp:55
+#: avidemux/ADM_encoder/adm_encCopy.cpp:85
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1084
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1124
 msgid "Copy"
 msgstr "????"
 
-#: avidemux/ADM_encoder/adm_encmjpeg.h:61
-msgid "MJPEG"
-msgstr "MJPEG"
-
-#: avidemux/ADM_encoder/adm_encdivx.h:53
-msgid "DivX"
-msgstr "DivX"
-
 #: avidemux/ADM_encoder/adm_encXvid4.h:63
 msgid "Xvid4"
 msgstr "Xvid4"
 
-#: avidemux/ADM_encoder/adm_encmpeg2enc.h:58
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:61
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:523
-msgid "MPEG"
-msgstr "MPEG"
+#: avidemux/guiplay.cpp:352
+msgid "Trouble initializing audio device"
+msgstr "???????????"
 
-#: avidemux/ADM_encoder/adm_encx264.h:67
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp:130
-msgid "x264"
-msgstr "x264"
+#: avidemux/ADM_audiocodec/ADM_codecwma.cpp:88
+msgid "Internal error"
+msgstr "????"
 
-#: avidemux/ADM_encoder/adm_ency800.h:58
-msgid "Y800"
-msgstr "Y800"
+#: avidemux/ADM_audiocodec/ADM_codecwma.cpp:88
+msgid "Cannot open WMA2 codec."
+msgstr "???? WMA2 ?????"
 
-#: avidemux/ADM_encoder/adm_encxvid.h:61
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp:129
-msgid "Xvid"
-msgstr "Xvid"
+#: avidemux/ADM_editor/ADM_edFrameType.cpp:56
+msgid "No video loaded"
+msgstr "??????"
 
-#: avidemux/ADM_encoder/adm_encyv12.h:70
-msgid "YV12"
-msgstr "YV12"
+#: avidemux/ADM_editor/ADM_edFrameType.cpp:61
+msgid "Not indexable"
+msgstr "?????"
 
-#: avidemux/ADM_encoder/adm_encffmpeg.h:48
-msgid "LavCodec"
-msgstr "Lav ????"
+#: avidemux/ADM_editor/ADM_edFrameType.cpp:61
+msgid "DivX 5 + packed?"
+msgstr "DivX 5 + ?????"
 
-#: avidemux/gui_autodrive.cpp:52
-msgid "No audio track"
-msgstr "????"
+#: avidemux/ADM_editor/ADM_edFrameType.cpp:91
+msgid "Rebuilding Frames"
+msgstr "??????"
 
-#: avidemux/gui_autodrive.cpp:52
-msgid "An audio track is necessary to create such file"
-msgstr "???????????????"
+#: avidemux/ADM_editor/ADM_edFrameType.cpp:127
+msgid "Aborted"
+msgstr "???"
 
-#: avidemux/gui_autodrive.cpp:62
-#: avidemux/gui_autodrive.cpp:72
-#: avidemux/gui_autodrive.cpp:113
-#: avidemux/gui_autodrive.cpp:128
-#: avidemux/gui_autodrive.cpp:155
-#: avidemux/gui_autodrive.cpp:189
-#: avidemux/ADM_audiofilter/audiofilter_buildchain.cpp:322
-msgid "Codec Error"
-msgstr "??????"
-
-#: avidemux/gui_autodrive.cpp:63
-msgid "Xvid4 and FAAC support is required for the iPod profile."
-msgstr "iPod ??????? Xvid4 ? FAAC?"
-
-#: avidemux/gui_autodrive.cpp:72
-msgid "Cannot select the MPEG-4 SP codec."
-msgstr "????? MPEG-4 SP ?????"
-
-#: avidemux/gui_autodrive.cpp:114
-msgid ""
-"You don't have LAME!.\n"
-"It is needed to create FLV  video."
-msgstr ""
-"????? LAME?.\n"
-"?? FLV ???????"
-
-#: avidemux/gui_autodrive.cpp:128
-msgid "Cannot select FLV1  codec."
-msgstr "???? FLV1  ???"
-
-#: avidemux/gui_autodrive.cpp:155
-msgid "Cannot select mpeg4 sp codec."
-msgstr "???? mpeg4 sp ???"
-
-#: avidemux/gui_autodrive.cpp:190
-msgid ""
-"You don't have FAAC!.\n"
-"It is needed to create PSP compatible video."
-msgstr ""
-"????? FAAC?.\n"
-"?? PSP ?????????"
-
-#: avidemux/ADM_codecs/ADM_ffmpeg.cpp:49
-msgid "Internal error opening codec"
-msgstr "????????????"
-
-#: avidemux/ADM_codecs/ADM_ffmpeg.cpp:52
-msgid "Internal error with context for  codec"
-msgstr "???????????????"
-
-#: avidemux/ADM_codecs/ADM_ffmp43.cpp:45
-msgid "Internal error finding codec '"
-msgstr "?????????????"
-
-#: avidemux/ADM_editor/ADM_edLoadSave.cpp:74
+#: avidemux/ADM_editor/ADM_edLoadSave.cpp:70
 msgid "Unsupported"
 msgstr "????"
 
@@ -297,27 +252,7 @@
 msgid "No more supported."
 msgstr "?????"
 
-#: avidemux/ADM_editor/ADM_edFrameType.cpp:58
-msgid "No video loaded"
-msgstr "??????"
-
-#: avidemux/ADM_editor/ADM_edFrameType.cpp:63
-msgid "Not indexable"
-msgstr "?????"
-
-#: avidemux/ADM_editor/ADM_edFrameType.cpp:63
-msgid "DivX 5 + packed?"
-msgstr "DivX 5 + ?????"
-
-#: avidemux/ADM_editor/ADM_edFrameType.cpp:93
-msgid "Rebuilding Frames"
-msgstr "??????"
-
-#: avidemux/ADM_editor/ADM_edFrameType.cpp:129
-msgid "Aborted"
-msgstr "???"
-
-#: avidemux/ADM_editor/ADM_edit.cpp:82
+#: avidemux/ADM_editor/ADM_edit.cpp:72
 msgid ""
 "Avidemux detected VBR MP3 audio in this file. For keeping audio/video in sync, time map is needed. Build it now?\n"
 "\n"
@@ -327,24 +262,24 @@
 "\n"
 "??????? \"?? -> ?? VBR ????\" ????"
 
-#: avidemux/ADM_editor/ADM_edit.cpp:407
+#: avidemux/ADM_editor/ADM_edit.cpp:397
 msgid "File type identified but no loader support detected..."
 msgstr "???????????????????..."
 
-#: avidemux/ADM_editor/ADM_edit.cpp:408
+#: avidemux/ADM_editor/ADM_edit.cpp:398
 msgid "May be related to an old index file."
 msgstr "???????????"
 
-#: avidemux/ADM_editor/ADM_edit.cpp:415
+#: avidemux/ADM_editor/ADM_edit.cpp:405
 #, c-format
 msgid "Attempt to open %s failed!"
 msgstr "????? %s ???"
 
-#: avidemux/ADM_editor/ADM_edit.cpp:431
+#: avidemux/ADM_editor/ADM_edit.cpp:421
 msgid "Video dimensions don't match."
 msgstr "????????"
 
-#: avidemux/ADM_editor/ADM_edit.cpp:431
+#: avidemux/ADM_editor/ADM_edit.cpp:421
 msgid ""
 "You cannot mix different video dimensions yet. Using the partial video filter later will not work around this problem. The workaround is:\n"
 "\n"
@@ -356,23 +291,23 @@
 "1.) \"????\" / \"????\" / \"??\" ????????????\n"
 "2.) ??????"
 
-#: avidemux/ADM_editor/ADM_edit.cpp:543
+#: avidemux/ADM_editor/ADM_edit.cpp:533
 msgid "Build Time Map"
 msgstr "??????"
 
-#: avidemux/ADM_editor/ADM_edit.cpp:543
+#: avidemux/ADM_editor/ADM_edit.cpp:533
 msgid "Build VBR time map?"
 msgstr "????????(VBR)?????"
 
-#: avidemux/ADM_editor/ADM_edit.cpp:577
+#: avidemux/ADM_editor/ADM_edit.cpp:567
 msgid "Use safe mode"
 msgstr "??????"
 
-#: avidemux/ADM_editor/ADM_edit.cpp:577
+#: avidemux/ADM_editor/ADM_edit.cpp:567
 msgid "H.264 detected"
 msgstr "??? H.264"
 
-#: avidemux/ADM_editor/ADM_edit.cpp:577
+#: avidemux/ADM_editor/ADM_edit.cpp:567
 msgid ""
 "If the file is using B-frames as reference it can lead to a crash or stuttering.\n"
 "Avidemux can use another mode which is safe but YOU WILL LOSE FRAME ACCURACY.\n"
@@ -382,47 +317,47 @@
 "Avidemux ??????????????<b>??????????</b>?\n"
 "????????? ?"
 
-#: avidemux/ADM_editor/ADM_edit.cpp:707
+#: avidemux/ADM_editor/ADM_edit.cpp:697
 msgid "Packed Bitstream detected"
 msgstr "??????????"
 
-#: avidemux/ADM_editor/ADM_edit.cpp:708
+#: avidemux/ADM_editor/ADM_edit.cpp:698
 msgid "Do you want me to unpack it ?"
 msgstr "????????"
 
-#: avidemux/ADM_editor/ADM_edit.cpp:728
+#: avidemux/ADM_editor/ADM_edit.cpp:718
 msgid "Could not unpack the video"
 msgstr "??????????"
 
-#: avidemux/ADM_editor/ADM_edit.cpp:728
+#: avidemux/ADM_editor/ADM_edit.cpp:718
 msgid "Using backup decoder - not frame accurate."
 msgstr "??????? - ???????"
 
-#: avidemux/ADM_editor/ADM_edit.cpp:733
+#: avidemux/ADM_editor/ADM_edit.cpp:723
 msgid "Weird"
 msgstr "???"
 
-#: avidemux/ADM_editor/ADM_edit.cpp:733
+#: avidemux/ADM_editor/ADM_edit.cpp:723
 msgid "The unpacking succeedeed but the index is still not up to date."
 msgstr "?????????????????"
 
-#: avidemux/ADM_editor/ADM_edit.cpp:739
+#: avidemux/ADM_editor/ADM_edit.cpp:729
 msgid "Troubles ahead"
 msgstr "???"
 
-#: avidemux/ADM_editor/ADM_edit.cpp:739
+#: avidemux/ADM_editor/ADM_edit.cpp:729
 msgid "This a VOP packed AVI."
-msgstr "??????? VOP ? AVI?"
+msgstr "???????? VOP ? AVI?"
 
-#: avidemux/ADM_editor/ADM_edit.cpp:750
+#: avidemux/ADM_editor/ADM_edit.cpp:740
 msgid "Index is not up to date"
 msgstr "???????"
 
-#: avidemux/ADM_editor/ADM_edit.cpp:750
+#: avidemux/ADM_editor/ADM_edit.cpp:740
 msgid "You should use Tool->Rebuild frame. Do it now ?"
 msgstr "????? ??->?????????????"
 
-#: avidemux/ADM_editor/ADM_edit.cpp:1512
+#: avidemux/ADM_editor/ADM_edit.cpp:1502
 msgid ""
 "This looks like mpeg\n"
 " Do you want to index it?"
@@ -430,3811 +365,2808 @@
 "????? mpeg\n"
 " ??????"
 
-#: avidemux/ADM_editor/ADM_edit.cpp:1564
+#: avidemux/ADM_editor/ADM_edit.cpp:1554
 msgid "Indexing failed"
 msgstr "????"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:54
-msgid "Crop"
-msgstr "??"
+#: avidemux/ADM_outputs/oplug_avi/op_avisavecopy_pack.cpp:118
+#: avidemux/ADM_outputs/oplug_avi/op_avisavecopy_unpack.cpp:92
+#: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:447
+#: avidemux/ADM_outputs/oplug_avi/op_avisavecopy.cpp:90
+msgid "Cannot initiate save"
+msgstr "??????"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:54
-msgid "Remove lines from top/bottom/left/right."
-msgstr "???/??/??/??????"
+#: avidemux/ADM_outputs/oplug_avi/op_avisavecopy_pack.cpp:131
+#: avidemux/ADM_outputs/oplug_avi/op_avisavecopy_unpack.cpp:105
+#: avidemux/ADM_outputs/oplug_avi/op_avisavecopy.cpp:103
+#: avidemux/ADM_outputs/oplug_mpeg/op_mpegpass.cpp:175
+msgid "Saving"
+msgstr "???"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:55
-msgid "MPlayer resize"
-msgstr "MPlayer ????"
+#: avidemux/ADM_outputs/oplug_avi/op_saveprocess.cpp:67
+msgid ""
+"Width is not a multiple of 8\n"
+" continue anyway ?"
+msgstr ""
+"??? 8 ???\n"
+" ?????????? ?"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:55
-msgid "Change image size. Faster than Avisynth's Resize."
-msgstr "???????? Avisynth ???????"
+#: avidemux/ADM_outputs/oplug_avi/op_saveprocess.cpp:92
+#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:173
+#: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:238
+#: avidemux/ADM_outputs/oplug_ogm/op_ogsaveprocess.cpp:78
+msgid "Reuse the existing log file?"
+msgstr "???????????"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:56
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_resize.cpp:319
-msgid "Resize"
-msgstr "????"
+#: avidemux/ADM_outputs/oplug_avi/op_saveprocess.cpp:101
+#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:180
+#: avidemux/ADM_outputs/oplug_dummy/oplug_dummy.cpp:142
+#: avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp:188
+#: avidemux/ADM_outputs/oplug_ogm/op_ogsaveprocess.cpp:87
+msgid "Filter init failed"
+msgstr "???????"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:56
-msgid "Picture resizer ported from Avisynth."
-msgstr "? Avisynth ???????????"
+#: avidemux/ADM_outputs/oplug_avi/op_saveprocess.cpp:132
+#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:420
+msgid "1st Pass"
+msgstr "?????"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:57
-msgid "Add black borders"
-msgstr "??"
+#: avidemux/ADM_outputs/oplug_avi/op_saveprocess.cpp:147
+msgid "Aborting"
+msgstr "??"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:57
-msgid "Add pure black border(s). Enlarges the picture."
-msgstr "????????????"
+#: avidemux/ADM_outputs/oplug_avi/op_saveprocess.cpp:262
+#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:191
+#: avidemux/ADM_outputs/oplug_dummy/oplug_dummy.cpp:146
+#: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:359
+#: avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp:192
+#: avidemux/ADM_outputs/oplug_ogm/op_ogsaveprocess.cpp:165
+msgid "Encoding"
+msgstr "???"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:58
-msgid "Blacken borders"
-msgstr "????"
+#: avidemux/ADM_outputs/oplug_avi/op_saveprocess.cpp:264
+#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:493
+msgid "2nd Pass"
+msgstr "?????"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:58
-msgid "Fill borders with pure black. Doesn't alter size."
-msgstr "??????????????"
+#: avidemux/ADM_outputs/oplug_avi/op_savesmart.cpp:97
+#: avidemux/gui_savenew.cpp:342
+msgid "Smart Copy"
+msgstr "?????"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:59
-msgid "Vertical flip"
-msgstr "????"
+#: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:64
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:832
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:225
+msgid "Normal"
+msgstr "??"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:59
-msgid "Vertically flip the picture."
-msgstr "???????"
+#: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:65
+msgid "Mux every N video frames"
+msgstr "???? N ????"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:60
-#: avidemux/ADM_videoFilter/ADM_vidRotate.cpp:269
-msgid "Rotate"
-msgstr "??"
+#: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:66
+msgid "Mux by packet size"
+msgstr "?????????"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:60
-msgid "Rotate the picture by 90, 180 or 270 degrees."
-msgstr "???? 90?180 ? 270 ??"
+#: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:69
+msgid "Muxing _type:"
+msgstr "????(_T):"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:62
-#: avidemux/ADM_videoFilter/ADM_vidResampleFPS.cpp:90
-msgid "Resample fps"
-msgstr "???? fps"
+#: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:70
+msgid "_Split every MB:"
+msgstr "?????????MB(_S):"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:62
-msgid "Change framerate while keeping duration."
-msgstr "?????????????"
+#: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:72
+msgid "Mux _every x video frames:"
+msgstr "???? x ????(_E):"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:63
-msgid "Reverse"
-msgstr "??"
+#: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:73
+msgid "Mux in _blocks of x bytes:"
+msgstr "? x ?????????(_B):"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:63
-msgid "Play video backward."
-msgstr "???????"
+#: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:80
+msgid "AVI Muxer Options"
+msgstr "AVI ?????"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:64
-#: avidemux/ADM_videoFilter/ADM_vidFade.cpp:78
-msgid "Fade"
-msgstr "??"
+#: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:179
+msgid "Error initalizing audio filters"
+msgstr "???????????"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:64
-msgid "Fade in/out."
-msgstr "??/??"
+#: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:188
+msgid "Error initalizing video filters"
+msgstr "???????????"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:70
-#: avidemux/ADM_videoFilter/ADM_vidYadif.cpp:184
-msgid "yadif"
-msgstr "yadif"
+#: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:257
+#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:153
+#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:247
+#: avidemux/ADM_outputs/oplug_dummy/oplug_dummy.cpp:134
+#: avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp:180
+#: avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp:232
+#: avidemux/ADM_outputs/oplug_ogm/op_ogaudio.cpp:66
+#: avidemux/gtk_gui.cpp:1999
+#: avidemux/gtk_gui.cpp:2098
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:540
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:555
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:570
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_vobsub.cpp:211
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:66
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:75
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:37
+#: plugins/ADM_videoFilters/Rotate/ADM_vidRotate.cpp:259
+#: plugins/ADM_videoFilters/lavDeinterlace/ADM_lavpp_deint.cpp:106
+#: plugins/ADM_videoFilters/Telecide/ADM_vidDecTelecide.cpp:93
+#: plugins/ADM_videoFilters/colorYUV/gtk/DIA_coloryuv.cpp:356
+#: plugins/ADM_videoFilters/colorYUV/gtk/DIA_coloryuv.cpp:364
+#: plugins/ADM_videoFilters/colorYUV/gtk/DIA_coloryuv.cpp:372
+msgid "None"
+msgstr "?"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:70
-msgid "Yet Another DeInterlacer. Ported from MPlayer."
-msgstr "? MPlayer ???????????"
+#: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:486
+msgid "DTS"
+msgstr "DTS"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:71
-#: avidemux/ADM_videoFilter/ADM_vidMcDeint.cpp:117
-msgid "mcDeinterlace"
-msgstr "mcDeinterlace"
+#: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:487
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:269
+msgid "PCM"
+msgstr "PCM"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:71
-msgid "Motion compensation deinterlacer. Ported from MPlayer."
-msgstr "? MPlayer ????????????"
+#: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:488
+msgid "MP2"
+msgstr "MP2"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:72
-msgid "Deinterlace"
-msgstr "Deinterlace"
+#: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:489
+msgid "MP3"
+msgstr "MP3"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:72
-msgid "Mask interlacing artifacts. Port of Smart deinterlace."
-msgstr "?????????????????"
+#: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:490
+msgid "WMA"
+msgstr "WMA"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:73
-#: avidemux/ADM_videoFilter/ADM_vidKernelDeint.cpp:100
-msgid "KernelDeint"
-msgstr "KernelDeint"
+#: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:491
+msgid "LPCM"
+msgstr "LPCM"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:73
-msgid "Kernel deinterlacer by Donald Graft."
-msgstr "?????????? Donald Graft?"
+#: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:492
+msgid "AC3"
+msgstr "AC3"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:74
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:121
-msgid "TDeint"
-msgstr "TDeint"
+#: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:493
+msgid "Ogg Vorbis"
+msgstr "Ogg Vorbis"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:74
-msgid "Motion adaptative deinterlacer by Tritical."
-msgstr "???????????? Tritical?"
+#: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:495
+msgid "AAC"
+msgstr "AAC"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:75
-#: avidemux/ADM_videoFilter/ADM_lavpp_deint.cpp:119
-msgid "libavcodec deinterlacer"
-msgstr "libavcodec ????"
+#: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:496
+msgid "QDM2"
+msgstr "QDM2"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:75
-msgid "All FFmpeg deinterlace filters (bicubic, median, ...)."
-msgstr "?? FFmpeg ????? (????????...)?"
+#: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:497
+msgid "AMR-NB"
+msgstr "AMR-NB"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:76
-#: avidemux/ADM_videoFilter/ADM_vidDecTelecide.cpp:131
-msgid "Decomb Telecide"
-msgstr "??????????"
+#: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:498
+msgid "MSADPCM"
+msgstr "MSADPCM"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:76
-msgid "Great deinterlacing package including IVTC."
-msgstr "???? IVTC ???????"
+#: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:499
+msgid "ULAW"
+msgstr "ULAW"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:77
-#: avidemux/ADM_videoFilter/ADM_vidDecDec.cpp:211
-msgid "Decomb Decimate"
-msgstr "???????????"
+#: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:500
+msgid "IMA ADPCM"
+msgstr "IMA ADPCM"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:77
-msgid "Useful to remove dupes left by Telecide."
-msgstr "?????????????"
+#: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:501
+msgid "8-bit PCM"
+msgstr "8-?? PCM"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:78
-msgid "Pulldown"
-msgstr "Pulldown"
+#: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:503
+msgid "Unknown codec"
+msgstr "???????"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:78
-msgid "Convert 24 fps to 30 fps by repeating fields."
-msgstr "??????? 24 fps ?? 30 fps?"
+#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:119
+msgid "PSP"
+msgstr "PSP"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:80
-msgid "Bobber - convert each field into a full sized frame."
-msgstr "Bobber - ??????????????????"
+#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:145
+#: avidemux/ADM_outputs/oplug_dummy/oplug_dummy.cpp:128
+#: avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp:174
+msgid "Cannot initialize the video stream"
+msgstr "?????????"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:82
-msgid "PAL field shift"
-msgstr "PAL ????"
+#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:216
+#: avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp:217
+msgid "Cannot initialize the audio stream"
+msgstr "?????????"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:82
-msgid "Shift fields by one. Useful for some PAL movies."
-msgstr "???????????????? PAL ???"
+#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:234
+msgid "Invalid audio stream detected"
+msgstr "?????????"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:83
-msgid "PAL smart"
-msgstr "PAL ???"
+#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:234
+msgid ""
+"The audio stream may be invalid for this container.\n"
+"\n"
+"Continue anyway?"
+msgstr ""
+"??????????????????\n"
+"\n"
+"??????????"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:83
-msgid "Smartly revert non constant PAL field shift."
-msgstr "???????? PAL ?????"
+#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:302
+#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:454
+#: avidemux/ADM_outputs/oplug_mpeg/op_mpegpass.cpp:304
+#: avidemux/ADM_outputs/oplug_dummy/oplug_dummy.cpp:199
+#: avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp:313
+msgid "Error while encoding"
+msgstr "????????"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:88
-msgid "Drop"
-msgstr "??"
+#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:309
+#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:461
+#: avidemux/ADM_outputs/oplug_dummy/oplug_dummy.cpp:206
+#: avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp:320
+msgid "KeyFrame error"
+msgstr "??????"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:88
-msgid "Drop damaged fields (e.g. from VHS capture)."
-msgstr "??????? (???? VHS ??)?"
+#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:309
+#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:461
+#: avidemux/ADM_outputs/oplug_dummy/oplug_dummy.cpp:206
+#: avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp:320
+msgid ""
+"The beginning frame is not a key frame.\n"
+"Please move the A marker."
+msgstr ""
+"??????????????\n"
+"????? A ?"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:89
-msgid "Swap fields"
-msgstr "????"
+#: avidemux/ADM_outputs/oplug_mpeg/op_mpegpass.cpp:79
+msgid "This is not MPEG compatible"
+msgstr "??????? MPEG"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:89
-msgid "Swap top and bottom fields."
-msgstr "???????????"
+#: avidemux/ADM_outputs/oplug_mpeg/op_mpegpass.cpp:79
+msgid "You can't use the Copy codec."
+msgstr "?????????????"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:90
-msgid "Smart swap fields"
-msgstr "???????"
+#: avidemux/ADM_outputs/oplug_mpeg/op_mpegpass.cpp:84
+#: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:128
+#: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:139
+msgid "There is no audio track"
+msgstr "????"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:90
-msgid "Smartly swap fields. Needed when field order changes."
-msgstr "?????????????????"
+#: avidemux/ADM_outputs/oplug_mpeg/op_mpegpass.cpp:91
+msgid "The first frame is not intra frame"
+msgstr "???????????"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:92
-msgid "Keep even fields"
-msgstr "??????"
+#: avidemux/ADM_outputs/oplug_mpeg/op_mpegpass.cpp:91
+msgid "Use the &lt;&lt; and the &gt;&gt; buttons to move using Intra frames."
+msgstr "?? &lt;&lt; ? &gt;&gt; ???????????????"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:92
-msgid "Keep top fields. Gives a half height picture."
-msgstr "??????????????????"
+#: avidemux/ADM_outputs/oplug_mpeg/op_mpegpass.cpp:103
+#: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:149
+msgid "Audio track is not suitable"
+msgstr "????"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:93
-msgid "Keep odd fields"
-msgstr "??????"
+#: avidemux/ADM_outputs/oplug_mpeg/op_mpegpass.cpp:135
+msgid "For DVD, audio must be 48 kHz MP2(stereo), AC3, DTS or LPCM (stereo)."
+msgstr "DVD ?????? 48 kHz MP2(??), AC3, DTS ? LPCM (??)?"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:93
-msgid "Keep bottom fileds. Gives a half height picture."
-msgstr "??????????????????"
+#: avidemux/ADM_outputs/oplug_mpeg/op_mpegpass.cpp:174
+msgid "---"
+msgstr "---"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:94
-msgid "Separate fields"
-msgstr "????"
+#: avidemux/ADM_outputs/oplug_mpeg/op_mpegpass.cpp:182
+#: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:282
+msgid "MPEG TS"
+msgstr "MPEG TS"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:94
-msgid "Each field becomes full picture, half sized."
-msgstr "?????????????????????"
+#: avidemux/ADM_outputs/oplug_mpeg/op_mpegpass.cpp:183
+#: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:283
+msgid "MPEG VCD"
+msgstr "MPEG VCD"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:95
-msgid "Merge fields"
-msgstr "????"
+#: avidemux/ADM_outputs/oplug_mpeg/op_mpegpass.cpp:184
+#: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:284
+msgid "MPEG SVCD"
+msgstr "MPEG SVCD"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:95
-msgid "Merge two pictures as if they were two fields."
-msgstr "????????????????"
+#: avidemux/ADM_outputs/oplug_mpeg/op_mpegpass.cpp:185
+#: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:285
+msgid "MPEG DVD"
+msgstr "MPEG DVD"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:98
-msgid "Hz Stack fields"
-msgstr "Hz ????"
+#: avidemux/ADM_outputs/oplug_dummy/oplug_dummy.cpp:133
+msgid "Dummy"
+msgstr "??"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:98
-msgid "Put botj fields side by side."
-msgstr "? botj ???????"
+#: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:159
+msgid "For VCD, audio must be 44.1 kHz MP2."
+msgstr "VCD ?????? 44.1 kHz MP2?"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:101
-msgid "Stack fields"
-msgstr "????"
+#: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:179
+#: avidemux/ADM_libraries/ADM_lvemux/ADM_muxer.cpp:75
+msgid "Incompatible audio"
+msgstr "??????"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:101
-msgid "Put two fields on top of one another."
-msgstr "????????????"
+#: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:179
+msgid "For DVD, audio must be 48 kHz MP2, AC3 or LPCM."
+msgstr "DVD ?????? 48 kHz MP2, AC3 ? LPCM?"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:102
-msgid "Unstack fields"
-msgstr "?????"
+#: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:255
+msgid "libmpeg2enc VCD"
+msgstr "libmpeg2enc VCD"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:102
-msgid "Interleave top and bottom part of the picture."
-msgstr "????????????"
+#: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:258
+msgid "libmpeg2enc SVCD"
+msgstr "libmpeg2enc SVCD"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:106
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_eq2.cpp:209
-msgid "MPlayer eq2"
-msgstr "MPlayer eq2"
+#: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:261
+msgid "libmpeg2enc DVD"
+msgstr "libmpeg2enc DVD"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:106
-msgid "Adjust contrast, brightness, saturation and gamma."
-msgstr "???????????????"
+#: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:264
+msgid "FFmpeg MPEG-1 VBR"
+msgstr "FFmpeg MPEG-1 VBR"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:107
-msgid "MPlayer hue"
-msgstr "MPlayer ??"
+#: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:267
+msgid "FFmpeg MPEG-2 SVCD VBR"
+msgstr "FFmpeg MPEG-2 SVCD VBR"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:107
-msgid "Adjust hue and saturation."
-msgstr "?????????"
+#: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:270
+msgid "FFmpeg MPEG-2 DVD VBR"
+msgstr "FFmpeg MPEG-2 DVD VBR"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:108
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_coloryuv.cpp:183
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_contrast.cpp:76
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_contrast.cpp:198
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_contrast.cpp:216
-msgid "Contrast"
-msgstr "??"
+#: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:273
+msgid "MPEG Requantizer"
+msgstr "MPEG ??????"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:108
-msgid "Adjust contrast, brightness and colors."
-msgstr "???????????"
+#: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:281
+msgid "MPEG ES"
+msgstr "MPEG ES"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:109
-msgid "Luma equalizer"
-msgstr "????"
+#: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:297
+msgid "Pass 1/2"
+msgstr "?? 1/2"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:109
-msgid "Luma correction filter with histogram."
-msgstr "??????????"
+#: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:306
+msgid "Error in pass 1"
+msgstr "??? 1 ?????"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:111
-msgid "Swap U and V"
-msgstr "?? U ? V"
+#: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:352
+#: avidemux/ADM_outputs/oplug_ogm/op_ogsave.cpp:101
+#: avidemux/gtk_gui.cpp:889
+#: avidemux/gtk_gui.cpp:1499
+#: avidemux/gtk_gui.cpp:2607
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:103
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:108
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:115
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:124
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:221
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:227
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:234
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:243
+#: avidemux/ADM_ocr/adm_glyph.cpp:217
+#: avidemux/ADM_coreUI/src/DIA_fileSel.cpp:129
+msgid "File error"
+msgstr "????"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:111
-msgid "Invert chroma U and chroma V."
-msgstr "?? U ? V ????"
+#: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:352
+#: avidemux/ADM_outputs/oplug_ogm/op_ogsave.cpp:101
+#: avidemux/gtk_gui.cpp:1499
+#: avidemux/gtk_gui.cpp:2607
+#, c-format
+msgid "Cannot open \"%s\" for writing."
+msgstr "???? \"%s\" ????"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:112
-msgid "Chroma shift"
-msgstr "????"
+#: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:357
+msgid "Pass 2/2"
+msgstr "?? 2/2"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:112
-msgid "Shift chroma U/V to fix badly synced luma/chroma."
-msgstr "???? U/V ????????/?????"
+#: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:449
+msgid "Error in pass 2"
+msgstr "??? 2 ?????"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:114
-msgid "Luma only"
-msgstr "????"
+#: avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp:136
+msgid "Unsupported video"
+msgstr "??????"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:114
-msgid "Convert picture to greyscale (black and white)."
-msgstr "??????? (?????)?"
+#: avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp:136
+msgid "Only FLV1 and VP6 video are supported"
+msgstr "??? FLV1 ? VP6 ??"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:115
-msgid "Chroma U only"
-msgstr "???? U"
+#: avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp:158
+#: avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp:163
+msgid "Unsupported audio"
+msgstr "??????"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:115
-msgid "Convert picture to grey, keeping only chroma U."
-msgstr "????????????? U?"
+#: avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp:158
+msgid "Audio must be mp3 for flv output."
+msgstr "flv ???????? mp3?"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:116
-msgid "Chroma V only"
-msgstr "???? V"
+#: avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp:163
+msgid "Frequency must be 44100, 22050 or 11025 Hz."
+msgstr "????? 44100, 22050 ? 11025 Hz?"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:116
-msgid "Convert picture to grey, keeping only chroma V."
-msgstr "????????????? V?"
+#: avidemux/ADM_outputs/ADM_lavformat.cpp:377
+msgid "Incompatible frame rate"
+msgstr "???????"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:118
-msgid "Luma delta"
-msgstr "????"
+#: avidemux/ADM_outputs/oplug_ogm/op_ogsave.cpp:115
+msgid "Could not initialize video"
+msgstr "???????"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:118
-msgid "Difference between current and previous picture."
-msgstr "????????????????"
+#: avidemux/ADM_outputs/oplug_ogm/op_ogsave.cpp:123
+msgid "Could not initialize audio"
+msgstr "???????"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:119
-msgid "Avisynth ColorYUV"
-msgstr "Avisynth ColorYUV"
+#: avidemux/ADM_outputs/oplug_ogm/op_ogsavecopy.cpp:56
+msgid "Saving..."
+msgstr "??..."
 
-#: avidemux/ADM_filter/filter_declaration.cpp:119
-msgid "Alter colors (auto white balance etc...). Ported from Avisynth."
-msgstr "???? (??????...)?? Avisynth ???"
+#: avidemux/ADM_outputs/oplug_ogm/op_ogsaveprocess.cpp:112
+msgid "Pass one"
+msgstr "Pass 1"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:129
-#: avidemux/ADM_videoFilter/ADM_vidMPLD3Dlow.cpp:78
-msgid "MPlayer denoise3d"
-msgstr "MPlayer denoise3d"
+#: avidemux/ADM_outputs/oplug_ogm/op_ogsaveprocess.cpp:161
+msgid "Pass 2"
+msgstr "Pass 2"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:129
-msgid "Reduce noise, smooth image, increase compressibility."
-msgstr "????????????????"
+#: avidemux/ADM_inputs/ADM_mp4/ADM_mp4Analyzer.cpp:626
+msgid "Problem reading SVQ3 headers"
+msgstr "?? SVQ3 ???????"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:130
-#: avidemux/ADM_videoFilter/ADM_vidMPLD3D.cpp:78
-msgid "MPlayer hqdn3d"
-msgstr "MPlayer hqdn3d"
+#: avidemux/ADM_inputs/ADM_mp4/ADM_mp4Indexer.cpp:341
+msgid "No stts table"
+msgstr "?? stts ?"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:130
-msgid "High quality version of denoise3d. Slower but more precise."
-msgstr "denoise3d ??????? ???????"
+#: avidemux/ADM_inputs/ADM_openDML/ADM_openDMLDepack.cpp:86
+msgid "Unpacking bitstream"
+msgstr "?????????"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:131
-#: avidemux/ADM_videoFilter/ADM_vidFlux.cpp:139
-msgid "FluxSmooth"
-msgstr "????"
+#: avidemux/ADM_inputs/ADM_openDML/ADM_opendml_reindex.cpp:60
+msgid "Indexing"
+msgstr "??"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:131
-msgid "Spatio-temporal cleaner by Ross Thomas."
-msgstr "??-????????? Ross Thomas?"
+#: avidemux/ADM_inputs/ADM_openDML/ADM_openDML.cpp:270
+#: avidemux/ADM_inputs/ADM_openDML/ADM_openDML.cpp:352
+#: avidemux/ADM_inputs/ADM_openDML/ADM_openDML.cpp:487
+msgid "Malformed header"
+msgstr "??????"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:133
-#: avidemux/ADM_videoFilter/ADM_vidVlad.cpp:104
-msgid "Temporal Cleaner"
-msgstr "?????"
+#: avidemux/ADM_inputs/ADM_mpegdemuxer/dmx_indexer.cpp:144
+msgid "There is several mpeg file, append them ?"
+msgstr "??? mpeg ????????"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:133
-msgid "Vlad59's Avisynth port of Jim Casaburi's denoiser."
-msgstr "Vlad59 ? Avisynth ? Jim Casaburi ????????"
+#: avidemux/ADM_inputs/ADM_mpegdemuxer/dmx_indexer.cpp:239
+msgid "Can't determine aspect ratio"
+msgstr "????????"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:135
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filterlist.cpp:173
-#: avidemux/ADM_videoFilter/ADM_vidDenoise.cpp:395
-msgid "Denoise"
-msgstr "???"
+#: avidemux/ADM_inputs/ADM_mpegdemuxer/dmx_video.cpp:348
+msgid "Out of memory"
+msgstr "?????"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:135
-msgid "Port of Transcode DNR."
-msgstr "? DNR ?????"
+#: avidemux/ADM_inputs/ADM_mpegdemuxer/dmx_video.cpp:363
+msgid "Opening MPEG"
+msgstr "???? MPEG"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:136
-#: avidemux/ADM_videoFilter/ADM_vidStabilize.cpp:64
-msgid "Stabilize"
-msgstr "??"
+#: avidemux/ADM_inputs/ADM_mpegdemuxer/dmx_video.cpp:532
+msgid "MPEG renumbering error"
+msgstr "MPEG ??????"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:136
-msgid "Light denoiser."
-msgstr "???????"
-
-#: avidemux/ADM_filter/filter_declaration.cpp:138
-msgid "Cnr2"
-msgstr "Cnr2"
-
-#: avidemux/ADM_filter/filter_declaration.cpp:138
-msgid "Chroma noise reduction filter by MarcFD/Tritical."
-msgstr "???????????? MarcFD/Tritical?"
-
-#: avidemux/ADM_filter/filter_declaration.cpp:140
-msgid "MSmooth by Donald Graft"
-msgstr "MSmooth ?????? Donald Graft"
-
-#: avidemux/ADM_filter/filter_declaration.cpp:140
-msgid "Smooth the image, don't blur edges. Useful on anime."
-msgstr "??????????????????"
-
-#: avidemux/ADM_filter/filter_declaration.cpp:141
-#: avidemux/ADM_videoFilter/ADM_vidSoften.cpp:74
-msgid "Soften"
-msgstr "??"
-
-#: avidemux/ADM_filter/filter_declaration.cpp:141
-msgid "A variant of stabilize."
-msgstr "????????"
-
-#: avidemux/ADM_filter/filter_declaration.cpp:146
-msgid "Sharpen"
-msgstr "???"
-
-#: avidemux/ADM_filter/filter_declaration.cpp:146
-msgid "Enhance difference between near pixels."
-msgstr "?????????"
-
-#: avidemux/ADM_filter/filter_declaration.cpp:147
-#: avidemux/ADM_videoFilter/ADM_vidMSharpen.cpp:172
-msgid "MSharpen"
-msgstr "MSharpen"
-
-#: avidemux/ADM_filter/filter_declaration.cpp:147
-msgid "Sharpen edges without amplifying noise. By Donald Graft."
-msgstr "???????????????? Donald Graft?"
-
-#: avidemux/ADM_filter/filter_declaration.cpp:148
-msgid "asharp"
-msgstr "asharp"
-
-#: avidemux/ADM_filter/filter_declaration.cpp:148
-msgid "Adaptative sharpener by MarcFD."
-msgstr "?????????? MarcFD?"
-
-#: avidemux/ADM_filter/filter_declaration.cpp:150
-msgid "Gauss smooth"
-msgstr "????"
-
-#: avidemux/ADM_filter/filter_declaration.cpp:150
-msgid "Gaussian smooth. Blur the picture."
-msgstr "??????????"
-
-#: avidemux/ADM_filter/filter_declaration.cpp:151
-msgid "Mean"
-msgstr "??"
-
-#: avidemux/ADM_filter/filter_declaration.cpp:151
-msgid "Mean (blur) kernel."
-msgstr "?? (??) ???"
-
-#: avidemux/ADM_filter/filter_declaration.cpp:152
-msgid "Median"
-msgstr "???"
-
-#: avidemux/ADM_filter/filter_declaration.cpp:152
-msgid "Median kernel 3x3. Remove high frequency noise."
-msgstr "????? 3x3?????????"
-
-#: avidemux/ADM_filter/filter_declaration.cpp:153
-msgid "Median (5x5)"
-msgstr "??? (5x5)"
-
-#: avidemux/ADM_filter/filter_declaration.cpp:153
-msgid "Median kernel 5x5. Good for reducing chroma noise."
-msgstr "????? 5x5???????????"
-
-#: avidemux/ADM_filter/filter_declaration.cpp:154
-msgid "Forced postprocessing"
-msgstr "???????"
-
-#: avidemux/ADM_filter/filter_declaration.cpp:154
-msgid "Apply blind postprocessing."
-msgstr "?????????"
-
-#: avidemux/ADM_filter/filter_declaration.cpp:159
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_srt.cpp:122
-msgid "Subtitler"
-msgstr "Subtitler"
-
-#: avidemux/ADM_filter/filter_declaration.cpp:159
-msgid "Add srt/sub subtitles to the picture."
-msgstr "?? srt/sub ??????"
-
-#: avidemux/ADM_filter/filter_declaration.cpp:160
-#: avidemux/ADM_videoFilter/ADM_vidASS.cpp:95
-msgid "ASS"
-msgstr "ASS"
-
-#: avidemux/ADM_filter/filter_declaration.cpp:160
-msgid "Add ASS/SSA subtitles to the picture."
-msgstr "?? ASS/SSA ??????"
-
-#: avidemux/ADM_filter/filter_declaration.cpp:163
-msgid "VobSub"
-msgstr "VobSub"
-
-#: avidemux/ADM_filter/filter_declaration.cpp:163
-msgid "Embed VobSub subtitles into picture."
-msgstr "?? VobSub ???????"
-
-#: avidemux/ADM_filter/filter_declaration.cpp:165
-msgid "DVB sub"
-msgstr "DVB sub"
-
-#: avidemux/ADM_filter/filter_declaration.cpp:165
-msgid "Embed DVB-T subtitle."
-msgstr "?? DVB-T ???"
-
-#: avidemux/ADM_filter/filter_declaration.cpp:176
-msgid "Blend remover"
-msgstr "?????"
-
-#: avidemux/ADM_filter/filter_declaration.cpp:176
-msgid "Remove blend between previous and next picture."
-msgstr "???????????"
-
-#: avidemux/ADM_filter/filter_declaration.cpp:177
-msgid "Hard pulldown removal"
-msgstr "???? Pulldown"
-
-#: avidemux/ADM_filter/filter_declaration.cpp:177
-msgid "Remove IVTC that has been analog captured or resized."
-msgstr "?? IVTC ???????????"
-
-#: avidemux/ADM_filter/filter_declaration.cpp:178
-msgid "Whirl"
-msgstr "??"
-
-#: avidemux/ADM_filter/filter_declaration.cpp:178
-msgid "Useless whirlwind effect."
-msgstr "????????"
-
-#: avidemux/ADM_filter/filter_declaration.cpp:179
-#: avidemux/ADM_videoFilter/ADM_vidMosaic.cpp:98
-msgid "Mosaic"
-msgstr "???"
-
-#: avidemux/ADM_filter/filter_declaration.cpp:179
-msgid "Split the picture into tiny thumbnails."
-msgstr "??????????????"
-
-#: avidemux/ADM_filter/filter_declaration.cpp:180
-msgid "MPlayer delogo"
-msgstr "Mplayer ???"
-
-#: avidemux/ADM_filter/filter_declaration.cpp:180
-msgid "Blend a logo by interpolating its surrounding box."
-msgstr "?????????????????"
-
-#: avidemux/ADM_filter/filter_declaration.cpp:181
-#: avidemux/ADM_videoFilter/ADM_vidLogo.cpp:94
-msgid "Logo"
-msgstr "??"
-
-#: avidemux/ADM_filter/filter_declaration.cpp:181
-msgid "Add a png as logo."
-msgstr "???? png ?????"
-
-#: avidemux/ADM_filter/filter_declaration.cpp:182
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_animated.cpp:53
-msgid "Animated Menu"
-msgstr "?????"
-
-#: avidemux/ADM_filter/filter_declaration.cpp:183
-msgid "Create a video made of 6 mini windows, very useful to do DVD menus."
-msgstr "? 6 ??????????????? DVD ???????"
-
-#: avidemux/ADM_filter/filter_declaration.cpp:185
-msgid "Compute Average"
-msgstr "?????"
-
-#: avidemux/ADM_filter/filter_declaration.cpp:185
-msgid "Compute average luma value for each pixel throughout all frames, and save to file"
-msgstr "?????????????????????????????"
-
-#: avidemux/ADM_filter/filter_declaration.cpp:186
-msgid "Eraser"
-msgstr "???"
-
-#: avidemux/ADM_filter/filter_declaration.cpp:186
-msgid "\"Erase\" arbitrary areas of each frame"
-msgstr "\"??\" ?????????"
-
-#: avidemux/ADM_filter/filter_declaration.cpp:187
-msgid "Swiss Army Knife"
-msgstr "????"
-
-#: avidemux/ADM_filter/filter_declaration.cpp:187
-msgid "Apply operation like P'=P*A, P-A, P+A, etc. using a convolution, rolling average, image from file, or constant"
-msgstr "????? P'=P*A, P-A, P+A ?????????????????????"
-
-#: avidemux/ADM_filter/filter_declaration.cpp:188
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_threshold.cpp:407
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:997
-msgid "Threshold"
-msgstr "???"
-
-#: avidemux/ADM_filter/filter_declaration.cpp:188
-msgid "Force too-bright/too-dim pixels to 0 and the rest to 255 or vice-versa"
-msgstr "?? ??/?? ???? 0 ?????? 255 ?????"
-
-#: avidemux/ADM_filter/filter_declaration.cpp:189
-msgid "Particle List"
-msgstr "????"
-
-#: avidemux/ADM_filter/filter_declaration.cpp:189
-msgid "Identify 'particles' (groups of pixels)"
-msgstr "?? '??' (?????)"
-
-#: avidemux/ADM_filter/filter_declaration.cpp:190
-msgid "Add Framenumber"
-msgstr "??????"
-
-#: avidemux/ADM_filter/filter_declaration.cpp:190
-msgid "Print frame number directly in image"
-msgstr "???????????"
-
-#: avidemux/ADM_filter/filter_declaration.cpp:195
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_partial.cpp:128
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtersub.cpp:144
-msgid "Partial"
-msgstr "??"
-
-#: avidemux/ADM_filter/filter_saveload.cpp:155
-msgid "Problem reading XML filters"
-msgstr "?? XML ???????"
-
-#: avidemux/ADM_filter/filter_saveload.cpp:163
-msgid "No filter found"
-msgstr "????????"
-
-#: avidemux/ADM_filter/filter_saveload.cpp:199
-msgid "Could not find a filter"
-msgstr "??????"
-
-#: avidemux/ADM_filter/filter_saveload.cpp:207
-msgid "No tag found"
-msgstr "????????"
-
-#: avidemux/ADM_filter/filter_saveload.cpp:287
-msgid "Node not found"
-msgstr "??????"
-
-#: avidemux/ADM_inputs/ADM_h263/ADM_h263.cpp:258
+#: avidemux/ADM_inputs/ADM_h263/ADM_h263.cpp:256
 msgid "Size is not (s)QCIF"
 msgstr "???? (s)QCIF"
 
-#: avidemux/ADM_inputs/ADM_mp4/ADM_mp4Indexer.cpp:345
-msgid "No stts table"
-msgstr "?? stts ?"
-
-#: avidemux/ADM_inputs/ADM_mp4/ADM_mp4Analyzer.cpp:631
-msgid "Problem reading SVQ3 headers"
-msgstr "?? SVQ3 ???????"
-
-#: avidemux/ADM_inputs/ADM_ogm/ADM_ogm.cpp:346
+#: avidemux/ADM_inputs/ADM_ogm/ADM_ogm.cpp:340
 msgid "Take second track ?"
 msgstr "???????"
 
-#: avidemux/ADM_inputs/ADM_ogm/ADM_ogm.cpp:426
+#: avidemux/ADM_inputs/ADM_ogm/ADM_ogm.cpp:420
 msgid "Scanning OGM"
 msgstr "?? OGM"
 
-#: avidemux/ADM_inputs/ADM_nuv/ADM_nuv.cpp:542
-#: avidemux/ADM_inputs/ADM_nuv/ADM_nuv.cpp:571
+#: avidemux/ADM_inputs/ADM_nuv/ADM_nuv.cpp:538
+#: avidemux/ADM_inputs/ADM_nuv/ADM_nuv.cpp:567
 msgid "Opening Nuppel video"
 msgstr "?? Nuppel ??"
 
-#: avidemux/ADM_inputs/ADM_nuv/ADM_nuv.cpp:547
+#: avidemux/ADM_inputs/ADM_nuv/ADM_nuv.cpp:543
 msgid "Sure you want to abort ?"
 msgstr "??????"
 
-#: avidemux/ADM_inputs/ADM_nuv/ADM_nuv.cpp:758
+#: avidemux/ADM_inputs/ADM_nuv/ADM_nuv.cpp:754
 msgid "Size mismatch"
-msgstr "?????"
+msgstr "?????"
 
-#: avidemux/ADM_inputs/ADM_nuv/ADM_nuv.cpp:758
+#: avidemux/ADM_inputs/ADM_nuv/ADM_nuv.cpp:754
 msgid "Expect a crash."
 msgstr "???????"
 
-#: avidemux/ADM_inputs/ADM_nuv/ADM_nuv.cpp:1050
+#: avidemux/ADM_inputs/ADM_nuv/ADM_nuv.cpp:1046
 msgid "Do you want to save an index ?"
 msgstr "?????? ?"
 
-#: avidemux/ADM_inputs/ADM_openDML/ADM_openDML.cpp:281
-#: avidemux/ADM_inputs/ADM_openDML/ADM_openDML.cpp:363
-#: avidemux/ADM_inputs/ADM_openDML/ADM_openDML.cpp:498
-msgid "Malformed header"
-msgstr "??????"
+#: avidemux/ADM_codecs/ADM_ffmp43.cpp:44
+msgid "Internal error finding codec"
+msgstr "?????????????"
 
-#: avidemux/ADM_inputs/ADM_openDML/ADM_openDMLDepack.cpp:93
-msgid "Unpacking bitstream"
-msgstr "?????????"
+#: avidemux/ADM_codecs/ADM_ffmpeg.cpp:50
+msgid "Internal error opening codec"
+msgstr "?????????????"
 
-#: avidemux/ADM_inputs/ADM_openDML/ADM_opendml_reindex.cpp:68
-msgid "Indexing"
-msgstr "??"
+#: avidemux/ADM_codecs/ADM_ffmpeg.cpp:53
+msgid "Internal error with context for  codec"
+msgstr "??????????????"
 
-#: avidemux/ADM_inputs/ADM_mpegdemuxer/dmx_indexer.cpp:149
-msgid "There is several mpeg file, append them ?"
-msgstr "??? mpeg ????????"
+#: avidemux/gtk_gui.cpp:246
+msgid "Select ECMAScript to Run"
+msgstr "?? ECMAScript ???"
 
-#: avidemux/ADM_inputs/ADM_mpegdemuxer/dmx_indexer.cpp:244
-msgid "Can't determine aspect ratio"
-msgstr "????????"
+#: avidemux/gtk_gui.cpp:313
+msgid "Obsolete"
+msgstr "??"
 
-#: avidemux/ADM_inputs/ADM_mpegdemuxer/dmx_video.cpp:355
-msgid "Out of memory"
-msgstr "?????"
+#: avidemux/gtk_gui.cpp:341
+msgid "Not coded in this version"
+msgstr "????????"
 
-#: avidemux/ADM_inputs/ADM_mpegdemuxer/dmx_video.cpp:370
-msgid "Opening MPEG"
-msgstr "???? MPEG"
+#: avidemux/gtk_gui.cpp:356
+msgid "Select Video/Image File..."
+msgstr "????/????..."
 
-#: avidemux/ADM_inputs/ADM_mpegdemuxer/dmx_video.cpp:539
-msgid "MPEG renumbering error"
-msgstr "MPEG ??????"
+#: avidemux/gtk_gui.cpp:409
+msgid ""
+"This is to be used to undo packed VOP on MPEG-4.\n"
+"Continue ?"
+msgstr ""
+"??????? MPEG-4 ????? VOP ?\n"
+"????"
 
-#: avidemux/GUI_jobs.cpp:37
-#: avidemux/ADM_osSupport/ADM_fileio.cpp:239
-#: avidemux/ADM_osSupport/ADM_fileio.cpp:263
-#: avidemux/ADM_osSupport/ADM_fileio.cpp:292
-#: avidemux/ADM_osSupport/ADM_fileio.cpp:305
-#: avidemux/ADM_osSupport/ADM_fileio.cpp:318
-msgid "Oops"
-msgstr "Oops"
+#: avidemux/gtk_gui.cpp:411
+msgid "Select AVI File to Write"
+msgstr "?? AVI ?????"
 
-#: avidemux/GUI_jobs.cpp:37
-msgid "Something very wrong happened when building joblist."
-msgstr "????????????????"
+#: avidemux/gtk_gui.cpp:417
+msgid "Select OGM File to Write"
+msgstr "?? OGM ?????"
 
-#: avidemux/GUI_jobs.cpp:42
-msgid "There are no jobs stored"
-msgstr "????????"
+#: avidemux/gtk_gui.cpp:421
+#: avidemux/gtk_gui.cpp:433
+msgid "Select Workbench to Save"
+msgstr "?????????"
 
-#: avidemux/ADM_encoder/adm_encConfig.cpp:192
-msgid "Wrong output format"
-msgstr "???????"
+#: avidemux/gtk_gui.cpp:463
+msgid "Select Raw File to Save"
+msgstr "?? RAW ?????"
 
-#: avidemux/ADM_encoder/adm_encConfig.cpp:192
-msgid "Select MPEG as the output."
-msgstr "?? MPEG ?????"
+#: avidemux/gtk_gui.cpp:473
+msgid "Select AVI File..."
+msgstr "?? AVI ??..."
 
-#: avidemux/ADM_encoder/adm_encConfig.cpp:197
-msgid "Wrong video codec"
-msgstr "????????"
+#: avidemux/gtk_gui.cpp:476
+msgid "Select AVI File to Append..."
+msgstr "?? AVI ?????..."
 
-#: avidemux/ADM_encoder/adm_encConfig.cpp:198
-msgid "Select DVD as the video codec for MPEG TS output."
-msgstr "?? DVD ??????????? MPEG TS"
+#: avidemux/gtk_gui.cpp:480
+msgid "Select File to Save Audio"
+msgstr "?????????"
 
-#: avidemux/ADM_encoder/adm_encConfig.cpp:719
-msgid "Only QCIF and subQCIF are allowed for H.263"
-msgstr "H.263 ??? QCIF ? subQCIF"
+#: avidemux/gtk_gui.cpp:514
+msgid "Select JPEG Sequence to Save"
+msgstr "?? JPEG ??????"
 
-#: avidemux/ADM_encoder/adm_encConfig.cpp:911
-msgid "Fatal error"
-msgstr "????"
+#: avidemux/gtk_gui.cpp:517
+msgid "Select BMP to Save"
+msgstr "?? BMP ????"
 
-#: avidemux/ADM_encoder/adm_encffmpeg.cpp:278
-msgid "Incompatible settings"
-msgstr "?????"
+#: avidemux/gtk_gui.cpp:521
+msgid "Select JPEG to Save"
+msgstr "?? JPG ????"
 
-#: avidemux/ADM_encoder/adm_encffmpeg.cpp:278
-msgid "At the moment, the DV codec only accepts 720*576 at 25"
-msgstr "???? DV ??????? 720*576 at 25"
+#: avidemux/gtk_gui.cpp:574
+#: avidemux/gtk_gui.cpp:683
+msgid "Select File to Save"
+msgstr "????????"
 
-#: avidemux/ADM_encoder/adm_encRequant.cpp:101
-msgid "Requant"
-msgstr "????"
+#: avidemux/gtk_gui.cpp:626
+msgid "Select MP3 to Load"
+msgstr "?? MP3 ????"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_srt.cpp:51
-msgid "Arabic"
-msgstr "???"
+#: avidemux/gtk_gui.cpp:629
+msgid "Select AC3 to Load"
+msgstr "?? AC3 ????"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_srt.cpp:52
-msgid "Baltic"
-msgstr "????"
+#: avidemux/gtk_gui.cpp:632
+msgid "Select WAV to Load"
+msgstr "?? WAV ????"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_srt.cpp:53
-msgid "Chinese Simplified (GB2312)"
-msgstr "???? (GB2312)"
+#: avidemux/gtk_gui.cpp:670
+msgid "Go to Frame"
+msgstr "????"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_srt.cpp:54
-msgid "Chinese Traditional (Big5)"
-msgstr "???? (Big5)"
+#: avidemux/gtk_gui.cpp:670
+msgid "_Go to frame:"
+msgstr "????(_G):"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_srt.cpp:55
-msgid "Cyrillic"
-msgstr "?????"
+#: avidemux/gtk_gui.cpp:675
+msgid "Out of bounds"
+msgstr "????"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_srt.cpp:56
-msgid "Latin-1 (Western European)"
-msgstr "??-1 (??)"
+#: avidemux/gtk_gui.cpp:681
+#: avidemux/gtk_gui.cpp:689
+#: avidemux/gtk_gui.cpp:1909
+msgid "Marker A > B"
+msgstr "?? A > B"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_srt.cpp:57
-msgid "Latin-2 (Central European)"
-msgstr "??-2 (??)"
+#: avidemux/gtk_gui.cpp:681
+msgid "An invalid frame range has been selected.  Make sure marker A is placed before marker B."
+msgstr "?????????????  ???? A ???? B ????"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_srt.cpp:58
-msgid "Greek"
-msgstr "??"
+#: avidemux/gtk_gui.cpp:689
+msgid "Cannot copy."
+msgstr "????"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_srt.cpp:59
-msgid "Hebrew"
-msgstr "???"
+#: avidemux/gtk_gui.cpp:701
+msgid "Something bad happened (II))"
+msgstr "??????? (II))"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_srt.cpp:60
-msgid "Slovene"
-msgstr "?????"
+#: avidemux/gtk_gui.cpp:715
+msgid "Are you sure?"
+msgstr "????"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_srt.cpp:61
-msgid "Turkish"
-msgstr "???"
+#: avidemux/gtk_gui.cpp:774
+msgid "Use custom value"
+msgstr "?????"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_srt.cpp:62
-msgid "UTF-8"
-msgstr "UTF-8"
+#: avidemux/gtk_gui.cpp:775
+msgid "Frame Rate"
+msgstr "???"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_srt.cpp:63
-msgid "UTF-16"
-msgstr "UTF-16"
+#: avidemux/gtk_gui.cpp:775
+msgid "_Frames per second"
+msgstr "?????(_F)"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_srt.cpp:98
-msgid "_Subtitle file:"
-msgstr "???(_S):"
+#: avidemux/gtk_gui.cpp:778
+msgid "PAL - 25 FPS"
+msgstr "PAL - 25 FPS"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_srt.cpp:98
-#: avidemux/ADM_videoFilter/ADM_vidASS.cpp:87
-msgid "Select Subtitle file"
-msgstr "?????"
+#: avidemux/gtk_gui.cpp:779
+msgid "FILM - 24 FPS"
+msgstr "FILM - 24 FPS"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_srt.cpp:99
-msgid "_Font (TTF):"
-msgstr "?? (TT_F):"
+#: avidemux/gtk_gui.cpp:780
+msgid "NTSC - 30 FPS"
+msgstr "NTSC - 30 FPS"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_srt.cpp:99
-msgid "Select TTF file"
-msgstr "?? TTF ?"
+#: avidemux/gtk_gui.cpp:782
+msgid "Standard Frame Rate:"
+msgstr "?????:"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_srt.cpp:114
-msgid "_Encoding:"
-msgstr "??(_E):"
+#: avidemux/gtk_gui.cpp:788
+msgid "Change Frame Rate"
+msgstr "?????"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_srt.cpp:116
-msgid "S_elect C_olor"
-msgstr "????"
+#: avidemux/gtk_gui.cpp:819
+msgid "Width is not a multiple of 8"
+msgstr "??? 8 ???"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_srt.cpp:117
-msgid "Set Size and _Position"
-msgstr "???????(_P)"
+#: avidemux/gtk_gui.cpp:820
+msgid "This will make trouble for AVI files."
+msgstr "???? AVI ??????"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_srt.cpp:118
-msgid "_Auto split"
-msgstr "????(_A)"
+#: avidemux/gtk_gui.cpp:830
+msgid "Rebuild all Keyframes?"
+msgstr "??????????"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_srt.cpp:119
-msgid "_Delay (ms):"
-msgstr "?? (ms)(_D):"
+#: avidemux/gtk_gui.cpp:886
+msgid "Permission error"
+msgstr "??????"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_bitrateHisto.cpp:59
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_bitrateHisto.cpp:128
-msgid "No data"
-msgstr "????"
+#: avidemux/gtk_gui.cpp:886
+#: avidemux/ADM_coreUI/src/DIA_fileSel.cpp:129
+#, c-format
+msgid "Cannot open \"%s\"."
+msgstr "???? \"%s\"."
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_bitrateHisto.cpp:214
-msgid "Max. bitrate:"
-msgstr "?????:"
+#: avidemux/gtk_gui.cpp:889
+#, c-format
+msgid "\"%s\" does not exist."
+msgstr "\"%s\" ????"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_bitrateHisto.cpp:215
-msgid "Average bitrate:"
-msgstr "?????:"
+#: avidemux/gtk_gui.cpp:892
+msgid "Error opening file"
+msgstr "??????"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_bitrateHisto.cpp:216
-msgid "Number of I frames:"
-msgstr "I ????:"
+#: avidemux/gtk_gui.cpp:892
+#, c-format
+msgid "Error opening \"%s\"."
+msgstr "?? \"%s\" ???"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_bitrateHisto.cpp:217
-msgid "Number of P frames:"
-msgstr "P ????:"
+#: avidemux/gtk_gui.cpp:936
+msgid "Cannot open project using the video loader."
+msgstr "???????????????"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_bitrateHisto.cpp:218
-msgid "Number of B frames:"
-msgstr "B ????:"
+#: avidemux/gtk_gui.cpp:937
+msgid "Try 'File' -> 'Load/Run Project...'"
+msgstr "?? '??' -> '??/?? ??...'"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_bitrateHisto.cpp:219
-msgid "Max. B frames:"
-msgstr "?? B ???:"
+#: avidemux/gtk_gui.cpp:939
+msgid "Could not open the file"
+msgstr "???????"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_bitrateHisto.cpp:232
-msgid "Bitrate Histogram"
-msgstr "??????"
+#: avidemux/gtk_gui.cpp:973
+msgid "Multiple Audio Tracks"
+msgstr "???"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_mjpeg.cpp:36
-#: avidemux/ADM_audiofilter/audioencoder_vorbis.cpp:290
-#: avidemux/ADM_audiofilter/audioencoder_lame.cpp:251
-#: avidemux/ADM_videoFilter/ADM_vidDecDec.cpp:204
-msgid "_Quality:"
-msgstr "??(_Q):"
+#: avidemux/gtk_gui.cpp:973
+msgid ""
+"The file you just loaded contains several audio tracks.\n"
+"Go to Audio->MainTrack to select the active one."
+msgstr ""
+"????????????????\n"
+"?? ??->???? ??????????"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_mjpeg.cpp:37
-msgid "_Swap U&V"
-msgstr "?? U&V(_S)"
+#: avidemux/gtk_gui.cpp:1027
+msgid "No audio decoder found for this file"
+msgstr "?????????????????"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_mjpeg.cpp:39
-msgid "MJPEG Configuration"
-msgstr "MJPEG ??"
+#: avidemux/gtk_gui.cpp:1028
+msgid "Save (A+V) will generate bad AVI. Save audio will work."
+msgstr "?? (A+V) ?????? AVI??????????"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:85
-msgid "Select idx file:"
-msgstr "?? idx ??:"
+#: avidemux/gtk_gui.cpp:1087
+msgid "Something failed when appending"
+msgstr "??????????"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:86
-msgid "Use GlyphSet (optional):"
-msgstr "???? (???):"
+#: avidemux/gtk_gui.cpp:1098
+#: avidemux/gtk_gui.cpp:1928
+msgid "Something bad happened (II)"
+msgstr "??????? (II)"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:86
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:202
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:373
-msgid "Select GlyphSet file"
-msgstr "?????"
+#: avidemux/gtk_gui.cpp:1162
+msgid "Cannot save the audio in copy mode"
+msgstr "??? ???? ???????"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:87
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:203
-msgid "Output SRT file"
-msgstr "?? SRT ??"
+#: avidemux/gtk_gui.cpp:1162
+msgid "Select WAV PCM as the audio codec, otherwise the audio file would be raw PCM."
+msgstr "?? WAV PCM ???????????????????? PCM?"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:87
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:203
-msgid "Save SRT file"
-msgstr "?? SRT ?"
+#: avidemux/gtk_gui.cpp:1170
+#: avidemux/gtk_gui.cpp:1538
+msgid "Saving audio"
+msgstr "??????"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:97
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:214
-msgid "Select input and ouput files"
-msgstr "??????????"
+#: avidemux/gtk_gui.cpp:1247
+msgid "Get Frame"
+msgstr "????"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:107
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:112
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:119
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:128
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:225
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:231
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:238
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:247
-#: avidemux/ADM_osSupport/ADM_fileio.cpp:618
-#: avidemux/ADM_ocr/adm_glyph.cpp:221
-#: avidemux/ADM_libraries/ADM_utilities/ADM_imageUtils.cpp:481
-#: avidemux/gtk_gui.cpp:905
-#: avidemux/gtk_gui.cpp:1515
-#: avidemux/ADM_outputs/oplug_ogm/op_ogsave.cpp:113
-#: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:366
-msgid "File error"
-msgstr "????"
+#: avidemux/gtk_gui.cpp:1247
+msgid "Cannot get this frame to save"
+msgstr "???????????"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:107
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:119
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:238
-msgid "The idx/sub file does not exist."
-msgstr "idx/sub ?????"
+#: avidemux/gtk_gui.cpp:1285
+msgid "Mark A > B"
+msgstr "?? A > B"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:112
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:231
-msgid "Please Select a valid output SRT file."
-msgstr "???????? SRT ????"
+#: avidemux/gtk_gui.cpp:1285
+msgid "Set your markers correctly."
+msgstr "??????????"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:128
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:247
-msgid "Cannot load the glyphset file."
-msgstr "?????????"
+#: avidemux/gtk_gui.cpp:1294
+msgid "Saving as set of jpegs"
+msgstr "??????? jpeg ?"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:147
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:268
-msgid "GlyphSet filename"
-msgstr "????"
+#: avidemux/gtk_gui.cpp:1300
+msgid "Cannot decode frame"
+msgstr "??????"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:147
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:268
-msgid "Save GlyphSet file"
-msgstr "?????"
+#: avidemux/gtk_gui.cpp:1300
+msgid "Aborting."
+msgstr "?????"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:149
-msgid "Save Glyph"
-msgstr "????"
+#: avidemux/gtk_gui.cpp:1311
+#: avidemux/gtk_gui.cpp:1330
+#: avidemux/gtk_gui.cpp:2272
+msgid "Done"
+msgstr "??"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:200
-msgid "Input TS:"
-msgstr "?? TS:"
+#: avidemux/gtk_gui.cpp:1311
+#, c-format
+msgid "Saved %d images."
+msgstr "??? %d ????"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:200
-msgid "Select TS file"
-msgstr "?? TS ?"
+#: avidemux/gtk_gui.cpp:1313
+msgid "Error"
+msgstr "??"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:201
-msgid "Subtitle PID:"
-msgstr "?? PID:"
+#: avidemux/gtk_gui.cpp:1313
+msgid "Could not save all images."
+msgstr "?????????"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:202
-msgid "Use glyphset (optional):"
-msgstr "???? (???):"
+#: avidemux/gtk_gui.cpp:1330
+#, c-format
+msgid "Saved \"%s\"."
+msgstr "??? \"%s\"?"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:225
-msgid "Please Select a valid TS file."
-msgstr "???????? TS ?"
+#: avidemux/gtk_gui.cpp:1332
+msgid "BMP op failed"
+msgstr "BMP ????"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:270
-msgid "Save GlyphSet"
-msgstr "????"
+#: avidemux/gtk_gui.cpp:1332
+#, c-format
+msgid "Saving %s as a BMP file failed."
+msgstr "?? %s ? BMP ????"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp:48
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_SVCD.cpp:42
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_resizeWiz.cpp:44
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_resize.cpp:387
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_resize.cpp:409
-msgid "4:3"
-msgstr "4:3"
+#: avidemux/gtk_gui.cpp:1354
+#: avidemux/gtk_gui.cpp:1420
+msgid "Failed to open the file"
+msgstr "???????"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp:49
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_SVCD.cpp:43
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_resizeWiz.cpp:45
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_resize.cpp:391
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_resize.cpp:413
-msgid "16:9"
-msgstr "16:9"
+#: avidemux/gtk_gui.cpp:1354
+#: avidemux/gtk_gui.cpp:1420
+msgid "Not a WAV file?"
+msgstr "???? WAV ??"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp:51
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_SVCD.cpp:45
-msgid "Default"
-msgstr "??"
+#: avidemux/gtk_gui.cpp:1355
+msgid "WAV open file failed..."
+msgstr "WAV ??????..."
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp:52
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_SVCD.cpp:46
-msgid "TMPGEnc"
-msgstr "TMPGEnc"
+#: avidemux/gtk_gui.cpp:1492
+msgid "Cannot decompress audio frame"
+msgstr "????????"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp:53
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_SVCD.cpp:47
-msgid "Anime"
-msgstr "??"
+#: avidemux/gtk_gui.cpp:1506
+msgid "Memory Error"
+msgstr "?????"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp:54
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_SVCD.cpp:48
-msgid "KVCD"
-msgstr "KVCD"
+#: avidemux/gtk_gui.cpp:1559
+msgid "No frames to encode"
+msgstr "??????????"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp:57
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_SVCD.cpp:51
-msgid "Progressive"
-msgstr "???"
+#: avidemux/gtk_gui.cpp:1559
+msgid "Please check markers. Is \"A>\" == \">B\"?"
+msgstr "?????? ? \"A>\" == \">B\"?"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp:58
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_SVCD.cpp:52
-msgid "Interlaced TFF"
-msgstr "??? TFF"
+#: avidemux/gtk_gui.cpp:1698
+msgid "Saving raw video stream"
+msgstr "??????????"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp:59
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_SVCD.cpp:53
-msgid "Interlaced BFF"
-msgstr "??? BFF"
+#: avidemux/gtk_gui.cpp:1844
+msgid "Checking video"
+msgstr "??????"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp:63
-msgid "VCD 40 kB"
-msgstr "VCD 40 kB"
+#: avidemux/gtk_gui.cpp:1860
+msgid "No error found"
+msgstr "??????"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp:64
-msgid "SVCD 112 kB"
-msgstr "SVCD 112 kB"
+#: avidemux/gtk_gui.cpp:1864
+#, c-format
+msgid "Errors found in %u frames"
+msgstr "? %u ??????"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp:65
-msgid "DVD 224 kB"
-msgstr "DVD 224 kB"
+#: avidemux/gtk_gui.cpp:1882
+msgid "Cannot decompress the audio stream"
+msgstr "?????????"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp:70
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_SVCD.cpp:60
-msgid "Ma_x. bitrate:"
-msgstr "?????:"
+#: avidemux/gtk_gui.cpp:1882
+msgid "Switch audio codec to Copy."
+msgstr "???????????????"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp:71
-msgid "Mi_n. bitrate:"
-msgstr "?????:"
+#: avidemux/gtk_gui.cpp:1909
+msgid "Cannot delete the selection."
+msgstr "??????????"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp:72
-msgid "_Use Xvid rate control"
-msgstr "?? Xvid ?????(_U)"
+#: avidemux/gtk_gui.cpp:1914
+msgid "You can't remove all frames"
+msgstr "??????????"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp:74
-msgid "_Buffer size:"
-msgstr "????(_B):"
+#: avidemux/gtk_gui.cpp:1921
+#: avidemux/gtk_gui.cpp:2543
+msgid "Something bad happened"
+msgstr "???????"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp:76
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_SVCD.cpp:57
-msgid "Aspect _ratio:"
-msgstr "????(_R):"
+#: avidemux/gtk_gui.cpp:1990
+msgid "Could not get tracks info"
+msgstr "????????"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp:77
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_SVCD.cpp:58
-msgid "_Matrices:"
-msgstr "??(_M):"
+#: avidemux/gtk_gui.cpp:1998
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:358
+msgid "Video"
+msgstr "??"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp:78
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_SVCD.cpp:59
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flv1.cpp:45
-msgid "_GOP size:"
-msgstr "_GOP ??:"
+#: avidemux/gtk_gui.cpp:1998
+msgid "Take audio from video file"
+msgstr "???????"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp:84
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_SVCD.cpp:66
-msgid "_Interlacing:"
-msgstr "??(_I):"
+#: avidemux/gtk_gui.cpp:1999
+#: avidemux/gtk_gui.cpp:2098
+msgid "No audio"
+msgstr "????"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp:88
-msgid "libavcodec MPEG-2 Configuration"
-msgstr "libavcodec MPEG-2 ??"
+#: avidemux/gtk_gui.cpp:2000
+#: avidemux/gtk_gui.cpp:2099
+msgid "External AC3"
+msgstr "??? AC3"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:190
-msgid "_Use systray while encoding"
-msgstr "????????(_U)"
+#: avidemux/gtk_gui.cpp:2000
+#: avidemux/gtk_gui.cpp:2099
+msgid "Take audio from external AC3 file"
+msgstr "???? AC3 ?????"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:191
-msgid "_Accept non-standard audio frequency for DVD"
-msgstr "??? DVD ??????????(_A)"
+#: avidemux/gtk_gui.cpp:2001
+#: avidemux/gtk_gui.cpp:2100
+msgid "External MP3"
+msgstr "??? MP3"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:192
-msgid "_Use libavcodec MPEG-2 decoder"
-msgstr "?? libavcodec MPEG-2 ???(_U)"
+#: avidemux/gtk_gui.cpp:2001
+#: avidemux/gtk_gui.cpp:2100
+msgid "Take audio from external MP3 file"
+msgstr "???? MP3 ?????"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:193
-msgid "Create _OpenDML files"
-msgstr "?? _OpenDML ??"
+#: avidemux/gtk_gui.cpp:2002
+#: avidemux/gtk_gui.cpp:2101
+msgid "External WAV"
+msgstr "??? WAV"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:194
-msgid "Automatically _index MPEG files"
-msgstr "???? MPEG ?(_I)"
+#: avidemux/gtk_gui.cpp:2002
+#: avidemux/gtk_gui.cpp:2101
+msgid "Take audio from external WAV file"
+msgstr "???? WAV ?????"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:195
-msgid "Automatically _swap A and B if A>B"
-msgstr "?? A>B ?????? A ? B(_S)"
+#: avidemux/gtk_gui.cpp:2006
+#: avidemux/gtk_gui.cpp:2106
+msgid "_Audio source:"
+msgstr "????(_A):"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:196
-msgid "_Disable NUV audio sync"
-msgstr "?? NUV ????(_D)"
+#: avidemux/gtk_gui.cpp:2010
+#: avidemux/gtk_gui.cpp:2107
+msgid "_External file:"
+msgstr "????(_E):"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:198
-msgid "Automatically _build VBR map"
-msgstr "?????????(VBR)??(_B)"
+#: avidemux/gtk_gui.cpp:2010
+#: avidemux/gtk_gui.cpp:2107
+#: avidemux/ADM_videoFilter/ADM_vidParticle.cpp:187
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:321
+msgid "Select file"
+msgstr "????"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:199
-msgid "Automatically _rebuild index"
-msgstr "????????(_R)"
+#: avidemux/gtk_gui.cpp:2019
+#, c-format
+msgid "Audio track %d (%s/%d channels/%d kbit per s/%d ms shift)"
+msgstr "?? %d (%s/%d ??? s/%d ms ?? /%d kbit )"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:200
-msgid "Automatically remove _packed bitstream"
-msgstr "????????????(_P)"
+#: avidemux/gtk_gui.cpp:2025
+msgid "_Track from video:"
+msgstr "??????(_T):"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:202
-msgid "SIMD"
-msgstr "SIMD"
+#: avidemux/gtk_gui.cpp:2035
+msgid "Main Audio Track"
+msgstr "????"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:204
-msgid "Enable all SIMD"
-msgstr "???? SIMD"
+#: avidemux/gtk_gui.cpp:2041
+#: avidemux/gtk_gui.cpp:2119
+msgid "Cannot load"
+msgstr "????"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:205
-msgid "Enable MMX"
-msgstr "?? MMX"
+#: avidemux/gtk_gui.cpp:2041
+#: avidemux/gtk_gui.cpp:2119
+msgid "The selected audio file does not exist."
+msgstr "??????????"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:206
-msgid "Enable MMXEXT"
-msgstr "?? MMXEXT"
+#: avidemux/gtk_gui.cpp:2116
+msgid "Second Audio Track"
+msgstr "????"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:207
-msgid "Enable 3DNOW"
-msgstr "?? 3DNOW"
+#: avidemux/gtk_gui.cpp:2148
+msgid "Error loading the MP3 file"
+msgstr "?? MP3 ????"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:208
-msgid "Enable 3DNOWEXT"
-msgstr "?? 3DNOWEXT"
+#: avidemux/gtk_gui.cpp:2157
+#: avidemux/gtk_gui.cpp:2179
+#: avidemux/gtk_gui.cpp:2201
+msgid "Second track loaded"
+msgstr "???????"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:209
-msgid "Enable SSE"
-msgstr "?? SSE"
+#: avidemux/gtk_gui.cpp:2171
+msgid "Error loading the AC3 file"
+msgstr "?? AC3 ????"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:210
-msgid "Enable SSE2"
-msgstr "?? SSE2"
+#: avidemux/gtk_gui.cpp:2193
+msgid "Error loading the WAV file"
+msgstr "?? WAV ????"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:211
-msgid "Enable SSE3"
-msgstr "?? SSE3"
+#: avidemux/gtk_gui.cpp:2260
+msgid "Saving failed"
+msgstr "????"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:212
-msgid "Enable SSSE3"
-msgstr "?? SSSE3"
+#: avidemux/gtk_gui.cpp:2260
+msgid "Saving the job failed. Maybe you have permission issue with ~/.avidemux"
+msgstr "???????????????? ~/.avidemux"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:233
-msgid "_lavc threads:"
-msgstr "_lavc ???:"
+#: avidemux/gtk_gui.cpp:2272
+#, c-format
+msgid "File %s has been successfully saved."
+msgstr "?? %s ????????"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:234
-msgid "_x264 threads:"
-msgstr "_x264 ???:"
+#: avidemux/gtk_gui.cpp:2276
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs.cpp:8
+msgid "Failed"
+msgstr "??"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:235
-msgid "X_vid threads:"
-msgstr "X_vid ???:"
+#: avidemux/gtk_gui.cpp:2276
+#, c-format
+msgid "File %s was NOT saved correctly."
+msgstr "?? %s ??????"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:237
-msgid "Multi-threading"
-msgstr "????"
+#: avidemux/gtk_gui.cpp:2442
+msgid "AvsProxy"
+msgstr "AvsProxy"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:243
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:845
-msgid "High"
-msgstr "?"
+#: avidemux/gtk_gui.cpp:2442
+msgid ""
+"Failed to connect to avsproxy.\n"
+"Is it running ?"
+msgstr ""
+"????? avsproxy?\n"
+"???????"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:244
-msgid "Above normal"
-msgstr "????"
+#: avidemux/gtk_gui.cpp:2447
+msgid "avsproxy"
+msgstr "avsproxy"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:245
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:847
-#: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:74
-msgid "Normal"
-msgstr "??"
+#: avidemux/gtk_gui.cpp:2475
+msgid "Frame type:"
+msgstr "????:"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:246
-msgid "Below normal"
-msgstr "????"
+#: avidemux/gtk_gui.cpp:2476
+msgid "Frame size:"
+msgstr "????:"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:247
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:849
-msgid "Low"
-msgstr "?"
+#: avidemux/gtk_gui.cpp:2478
+msgid "Frame Hex Dump"
+msgstr "??16 ????"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:249
-msgid "_Encoding priority:"
-msgstr "??????(_E):"
+#: avidemux/gtk_gui.cpp:2529
+msgid "Memory error"
+msgstr "?????"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:250
-msgid "_Indexing/unpacking priority:"
-msgstr "??/?????????(_I):"
+#: avidemux/gtk_gui.cpp:2536
+msgid "Error converting to BMP"
+msgstr "?? BMP ??"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:251
-msgid "_Playback priority:"
-msgstr "??????(_P):"
+#: avidemux/gtk_gui.cpp:2598
+msgid "Cannot encode the frame"
+msgstr "???????"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:253
-msgid "Prioritisation"
-msgstr "??"
+#: avidemux/gui_autodrive.cpp:48
+msgid "No audio track"
+msgstr "????"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:258
-msgid "_Split MPEG files every (MB):"
-msgstr "MPEG ???????? (MB)(_S):"
+#: avidemux/gui_autodrive.cpp:48
+msgid "An audio track is necessary to create such file"
+msgstr "???????????????"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:260
-msgid "_Use alternative tag for MP3 in .mp4"
-msgstr "? .mp4 ? MP3 ????????(_U)"
+#: avidemux/gui_autodrive.cpp:64
+#: avidemux/gui_autodrive.cpp:78
+#: avidemux/gui_autodrive.cpp:109
+#: avidemux/gui_autodrive.cpp:115
+#: avidemux/gui_autodrive.cpp:130
+#: avidemux/gui_autodrive.cpp:157
+#: avidemux/gui_autodrive.cpp:192
+#: avidemux/ADM_audiofilter/audiofilter_buildchain.cpp:290
+msgid "Codec Error"
+msgstr "??????"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:264
-msgid "XVideo (best)"
-msgstr "XVideo (??)"
+#: avidemux/gui_autodrive.cpp:64
+msgid "Cannot select the MPEG-4 SP codec."
+msgstr "????? MPEG-4 SP ?????"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:268
-msgid "SDL (MS Windows GDI)"
-msgstr "SDL (MS Windows GDI)"
+#: avidemux/gui_autodrive.cpp:78
+msgid "No AAC audio encoder plugin found."
+msgstr "???? AAC ??????????"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:269
-msgid "SDL (MS Windows DirectX)"
-msgstr "SDL (MS Windows DirectX)"
+#: avidemux/gui_autodrive.cpp:110
+msgid ""
+"The MP3 codec does not allow disabling reservoir.\n"
+"Install lame plugin"
+msgstr ""
+"? MP3 ?????????????\n"
+"?? lame ????"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:271
-msgid "SDL (good)"
-msgstr "SDL (?)"
+#: avidemux/gui_autodrive.cpp:116
+msgid ""
+"You don't have LAME!.\n"
+"It is needed to create FLV  video."
+msgstr ""
+"????? LAME?.\n"
+"?? FLV ???????"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:275
-msgid "Video _display:"
-msgstr "????(_D):"
+#: avidemux/gui_autodrive.cpp:130
+msgid "Cannot select FLV1  codec."
+msgstr "???? FLV1  ?????"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:280
-msgid "No alerts"
-msgstr "???????"
+#: avidemux/gui_autodrive.cpp:157
+msgid "Cannot select mpeg4 sp codec."
+msgstr "???? mpeg4 sp ?????"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:281
-msgid "Display only error alerts"
-msgstr "???????"
+#: avidemux/gui_autodrive.cpp:193
+msgid ""
+"You don't have FAAC!.\n"
+"It is needed to create PSP compatible video."
+msgstr ""
+"????? FAAC?.\n"
+"?? PSP ?????????"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:282
-msgid "Display all alerts"
-msgstr "??????"
+#: avidemux/ADM_UIs/ADM_GTK/src/FAC_threadCount.cpp:87
+msgid "Disable"
+msgstr "??"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:284
-msgid "_Message level:"
-msgstr "????(_M):"
+#: avidemux/ADM_UIs/ADM_GTK/src/FAC_threadCount.cpp:91
+msgid "Auto-detect"
+msgstr "????"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:289
-#: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:497
-msgid "PCM"
-msgstr "PCM"
+#: avidemux/ADM_UIs/ADM_GTK/src/FAC_threadCount.cpp:99
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:549
+msgid "Custom"
+msgstr "??"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:290
-msgid "Master"
-msgstr "??"
+#: avidemux/ADM_UIs/ADM_GTK/src/FAC_bitrate.cpp:111
+msgid "_Encoding mode:"
+msgstr "????(_E):"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:291
-msgid "_Volume control:"
-msgstr "????(_V):"
+#: avidemux/ADM_UIs/ADM_GTK/src/FAC_bitrate.cpp:121
+#: avidemux/ADM_UIs/ADM_GTK/src/FAC_bitrate.cpp:283
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flv1.cpp:36
+msgid "_Bitrate (kb/s):"
+msgstr "???(_B) (kb/s):"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:296
-msgid "No downmixing"
-msgstr "????"
+#: avidemux/ADM_UIs/ADM_GTK/src/FAC_bitrate.cpp:135
+msgid "Single pass - bitrate"
+msgstr "???? - ???"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:297
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:104
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:103
-#: avidemux/ADM_audiofilter/audioencoder_lame.cpp:220
-msgid "Stereo"
-msgstr "???"
+#: avidemux/ADM_UIs/ADM_GTK/src/FAC_bitrate.cpp:137
+msgid "Single pass - constant quality"
+msgstr "???? - ????"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:298
-msgid "Pro Logic"
-msgstr "????"
+#: avidemux/ADM_UIs/ADM_GTK/src/FAC_bitrate.cpp:139
+msgid "Single pass - same qz as input"
+msgstr "???? - ????????"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:299
-msgid "Pro Logic II"
-msgstr "???????"
+#: avidemux/ADM_UIs/ADM_GTK/src/FAC_bitrate.cpp:141
+msgid "Single pass - Average quantizer"
+msgstr "???? - ?????"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:301
-msgid "_Local playback downmixing:"
-msgstr "??????(_L):"
+#: avidemux/ADM_UIs/ADM_GTK/src/FAC_bitrate.cpp:144
+msgid "Two pass - video size"
+msgstr "???? - ????"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:306
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp:161
-msgid "ALSA"
-msgstr "ALSA"
+#: avidemux/ADM_UIs/ADM_GTK/src/FAC_bitrate.cpp:146
+msgid "Two pass - average bitrate"
+msgstr "???? - ?????"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:309
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp:156
-msgid "aRts"
-msgstr "aRts"
+#: avidemux/ADM_UIs/ADM_GTK/src/FAC_bitrate.cpp:288
+#: plugins/ADM_videoFilters/ForcedPP/ADM_vidForcedPP.cpp:45
+msgid "_Quantizer:"
+msgstr "???:"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:312
-msgid "Core Audio"
-msgstr "Core Audio"
+#: avidemux/ADM_UIs/ADM_GTK/src/FAC_bitrate.cpp:293
+msgid "A_vg Quantizer:"
+msgstr "?????:"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:315
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp:157
-msgid "ESD"
-msgstr "ESD"
+#: avidemux/ADM_UIs/ADM_GTK/src/FAC_bitrate.cpp:298
+msgid "_Video size (MB):"
+msgstr "???? (MB):"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:318
-msgid "JACK"
-msgstr "JACK"
+#: avidemux/ADM_UIs/ADM_GTK/src/FAC_bitrate.cpp:303
+msgid "_Average bitrate (kb/s):"
+msgstr "????? (kb/s):"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:321
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp:162
-msgid "OSS"
-msgstr "OSS"
+#: avidemux/ADM_UIs/ADM_GTK/src/FAC_bitrate.cpp:308
+msgid "-"
+msgstr "-"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:324
-msgid "Pulse Audio"
-msgstr "Pulse Audio"
+#: avidemux/ADM_UIs/ADM_GTK/src/FAC_hex.cpp:103
+#: avidemux/ADM_UIs/ADM_GTK/src/FAC_hex.cpp:137
+msgid "_Previous"
+msgstr "???(_P)"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:328
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp:163
-msgid "SDL"
-msgstr "SDL"
+#: avidemux/ADM_UIs/ADM_GTK/src/FAC_hex.cpp:111
+#: avidemux/ADM_UIs/ADM_GTK/src/FAC_hex.cpp:167
+msgid "_Next"
+msgstr "???(_N)"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:331
-msgid "Win32"
-msgstr "Win32"
+#: avidemux/ADM_UIs/ADM_GTK/src/DIA_color.cpp:51
+msgid "Select Color"
+msgstr "????"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:333
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:51
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:80
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:89
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_vobsub.cpp:225
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_coloryuv.cpp:377
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_coloryuv.cpp:385
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_coloryuv.cpp:393
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1206
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:555
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:570
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:585
-#: avidemux/gtk_gui.cpp:2015
-#: avidemux/gtk_gui.cpp:2114
-#: avidemux/ADM_outputs/oplug_dummy/oplug_dummy.cpp:141
-#: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:267
-#: avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp:188
-#: avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp:240
-#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:163
-#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:243
-#: avidemux/ADM_outputs/oplug_ogm/op_ogaudio.cpp:70
-#: avidemux/ADM_videoFilter/ADM_vidDecTelecide.cpp:101
-#: avidemux/ADM_videoFilter/ADM_lavpp_deint.cpp:105
-#: avidemux/ADM_videoFilter/ADM_vidRotate.cpp:262
-msgid "None"
-msgstr "?"
+#: avidemux/ADM_UIs/ADM_GTK/src/DIA_filesel.cpp:119
+#: avidemux/ADM_UIs/ADM_GTK/src/DIA_filesel.cpp:279
+msgid "_Browse..."
+msgstr "??...(_B)"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:336
-msgid "_Audio output:"
-msgstr "????(_A):"
+#: avidemux/ADM_audio/audiotimeline.cpp:78
+#: avidemux/ADM_audio/audiotimeline.cpp:89
+msgid "Building VBR map"
+msgstr "???????(VBR)??"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:339
-msgid "ALSA _device:"
-msgstr "ALSA??(_D):"
+#: avidemux/ADM_encoder/adm_encRequant.cpp:93
+msgid "Requant"
+msgstr "????"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:350
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_postproc.cpp:32
-#: avidemux/ADM_videoFilter/ADM_vidForcedPP.cpp:72
-msgid "_Horizontal deblocking"
-msgstr "??????????(_H)"
+#: avidemux/ADM_encoder/adm_encConfig.cpp:619
+msgid "Only QCIF and subQCIF are allowed for H.263"
+msgstr "H.263 ??? QCIF ? subQCIF"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:351
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_postproc.cpp:33
-#: avidemux/ADM_videoFilter/ADM_vidForcedPP.cpp:73
-msgid "_Vertical deblocking"
-msgstr "??????????(_V)"
+#: avidemux/ADM_encoder/adm_encffmpeg.cpp:266
+msgid "Incompatible settings"
+msgstr "?????"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:352
-msgid "De_ringing"
-msgstr "??????(_R)"
+#: avidemux/ADM_encoder/adm_encffmpeg.cpp:266
+msgid "At the moment, the DV codec only accepts 720*576 at 25"
+msgstr "???? DV ??????? 720*576 at 25"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:353
-#: avidemux/ADM_videoFilter/ADM_vidMSharpen.cpp:167
-#: avidemux/ADM_videoFilter/ADM_vidMsmooth.cpp:197
-msgid "_Strength:"
-msgstr "??(_S):"
+#: avidemux/gui_savenew.cpp:79
+msgid "Dual audio can only be used in copy mode"
+msgstr "??????? ???? ???"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:354
-msgid "Default Postprocessing"
-msgstr "???????"
+#: avidemux/gui_savenew.cpp:79
+msgid "Select Copy as the video codec."
+msgstr "?? ???? ??????????"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:368
-msgid "_Filter directory:"
-msgstr "?????(_F):"
+#: avidemux/gui_savenew.cpp:199
+#: avidemux/gui_savenew.cpp:215
+#: avidemux/gui_savenew.cpp:228
+msgid "Incompatible output format"
+msgstr "????????"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:368
-msgid "Select filter directory"
-msgstr "???????"
+#: avidemux/gui_savenew.cpp:249
+msgid "There is no second track"
+msgstr "??????"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:369
-msgid "_Load external filters"
-msgstr "??????(_L)"
+#: avidemux/gui_savenew.cpp:249
+msgid "Select a second audio track in the Audio menu."
+msgstr "??????????????"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:372
-msgid "Use _Global GlyphSet"
-msgstr "??????(_G)"
+#: avidemux/gui_savenew.cpp:253
+msgid "Select dual audio AVI to write"
+msgstr "???? AVI ????"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:373
-msgid "Gl_yphSet:"
-msgstr "??(_Y):"
+#: avidemux/gui_savenew.cpp:275
+#: avidemux/gui_savenew.cpp:293
+msgid "This cannot have packed VOP"
+msgstr "??????? VOP"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:378
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:98
-msgid "User Interface"
-msgstr "?????"
+#: avidemux/gui_savenew.cpp:275
+#: avidemux/gui_savenew.cpp:293
+msgid "It is not MPEG-4 video. File will not be saved."
+msgstr "?? MPEG-4 ???????????"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:382
-msgid "Automation"
-msgstr "???"
+#: avidemux/gui_savenew.cpp:339
+msgid ""
+"You may need smart copy.\n"
+"Enable it?"
+msgstr ""
+"??????????\n"
+" ???? ?"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:386
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_bindings.cpp:539
-msgid "Input"
-msgstr "??"
+#: avidemux/gui_savenew.cpp:342
+msgid "_Q factor (set 4):"
+msgstr "_Q ?? (?? 4):"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:390
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_bindings.cpp:540
-msgid "Output"
-msgstr "??"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ui_support.cpp:54
+msgid "GTK+"
+msgstr "GTK+"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:395
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:398
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:401
-msgid "Audio"
-msgstr "??"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:273
+msgid "Avidemux"
+msgstr "Avidemux"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:406
-#: avidemux/gtk_gui.cpp:2014
-msgid "Video"
-msgstr "??"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:290
+#: avidemux/ADM_libraries/ADM_utilities/ADM_gettext.cpp:46
+msgid "_File"
+msgstr "??(_F)"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:410
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp:178
-msgid "CPU"
-msgstr "CPU"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:297
+msgid "_Open..."
+msgstr "??...(_O)"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:414
-msgid "Threading"
-msgstr "???"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:308
+msgid "_Append..."
+msgstr "??...(_A)"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:418
-msgid "Global GlyphSet"
-msgstr "????"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:319
+msgid "_Save"
+msgstr "??(_S)"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:422
-msgid "External Filters"
-msgstr "????"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:330
+msgid "Save _Video..."
+msgstr "????...(_V)"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:426
-msgid "Preferences"
-msgstr "????"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:342
+msgid "Save _BMP Image..."
+msgstr "???BMP ??...(_B)"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_SVCD.cpp:70
-msgid "MPEG-2 Configuration"
-msgstr "MPEG-2 ??"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:346
+msgid "Save _JPEG Image..."
+msgstr "???JPEG ??...(_J)"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_gototime.cpp:27
-msgid "_Hours:"
-msgstr "??(_H):"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:350
+msgid "Save _Selection as JPEG Images..."
+msgstr "????????JPEG ??...(_S)"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_gototime.cpp:28
-msgid "_Minutes:"
-msgstr "??(_M):"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:363
+msgid "Save _Project"
+msgstr "????(_P)"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_gototime.cpp:29
-msgid "_Seconds:"
-msgstr "?(_S):"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:371
+msgid "Save P_roject As..."
+msgstr "?????...(_R)"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_gototime.cpp:32
-msgid "Go to Time"
-msgstr "?????"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:379
+msgid "_Load/Run Project..."
+msgstr "??/?? ??...(_L)"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:52
-msgid "Full"
-msgstr "??"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:387
+msgid "A_dd to Joblist..."
+msgstr "???????...(_D)"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:53
-msgid "Log"
-msgstr "Log"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:391
+msgid "Show _Joblist"
+msgstr "??????(_J)"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:54
-msgid "Phods"
-msgstr "Phods"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:403
+msgid "Co_nnect to avsproxy"
+msgstr "??? avsproxy(_N)"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:55
-msgid "EPZS"
-msgstr "EPZS"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:412
+msgid "Proper_ties"
+msgstr "??(_T)"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:56
-msgid "X1"
-msgstr "X1"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:423
+msgid "AVI _Muxer Options"
+msgstr "AVI ?????(_M)"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:60
-msgid "H.263"
-msgstr "H.263"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:432
+msgid "_Quit"
+msgstr "??(_Q)"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:65
-msgid "MB comparison"
-msgstr "MB ??"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:443
+msgid "_Edit"
+msgstr "??(_E)"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:66
-msgid "Fewest bits (vhq)"
-msgstr "????? (vhq)"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:450
+msgid "_Reset Edits"
+msgstr "????(_R)"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:67
-msgid "Rate distortion"
-msgstr "?????"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:463
+msgid "Cu_t"
+msgstr "??(_T)"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:73
-msgid "Matrices"
-msgstr "??"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:474
+msgid "_Copy"
+msgstr "??(_C)"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:74
-msgid "Mi_n. quantizer:"
-msgstr "?????(_N):"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:485
+msgid "_Paste"
+msgstr "??(_P)"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:75
-msgid "Ma_x. quantizer:"
-msgstr "?????(_X):"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:496
+msgid "_Delete"
+msgstr "??(_D)"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:76
-msgid "Max. quantizer _difference:"
-msgstr "??????(_D):"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:512
+msgid "Set Marker _A"
+msgstr "???? _A"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:78
-msgid "4_MV"
-msgstr "4_MV"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:519
+msgid "Set Marker _B"
+msgstr "???? _B"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:79
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1242
-msgid "_Trellis quantization"
-msgstr "??????(_T)"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:531
+msgid "Pre_ferences"
+msgstr "????(_F)"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:81
-msgid "_Quarter pixel"
-msgstr "1/4 ??(_Q)"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:539
+msgid "_View"
+msgstr "??(_V)"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:82
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1025
-msgid "_GMC"
-msgstr "_GMC"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:546
+msgid "_Main Toolbar"
+msgstr "????(_M)"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:85
-msgid "_Number of B frames:"
-msgstr "B ????(_N):"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:551
+msgid "_A/V Sidebar"
+msgstr "??/?? ??(_A)"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:86
-msgid "_Quantization type:"
-msgstr "??????(_Q):"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:561
+msgid "_Zoom 1:4"
+msgstr "??? 1:4(_Z)"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:88
-msgid "_Macroblock decision:"
-msgstr "??????(_M):"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:568
+msgid "Z_oom 1:2"
+msgstr "??? 1:2(_O)"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:90
-msgid "_Filesize tolerance (kb):"
-msgstr "????????? (kb):"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:575
+msgid "Zoom _1:1"
+msgstr "??? _1:1"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:92
-msgid "_Quantizer compression:"
-msgstr "????(_Q):"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:582
+msgid "Zoom _2:1"
+msgstr "??? _2:1"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:93
-msgid "Quantizer _blur:"
-msgstr "????(_B):"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:589
+msgid "Vi_deo"
+msgstr "??(_D)"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:101
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1035
-msgid "Advanced Simple Profile"
-msgstr "????????"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:596
+msgid "_Decoder Options"
+msgstr "?????(_D)"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:108
-msgid "Motion Estimation"
-msgstr "????"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:603
+msgid "_Postprocessing"
+msgstr "????(_P)"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:112
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1247
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid.cpp:313
-msgid "Quantization"
-msgstr "????"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:606
+msgid "Select postprocessing level"
+msgstr "????????"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:117
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1501
-msgid "Rate Control"
-msgstr "????"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:616
+msgid "P_review"
+msgstr "??(_R)"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:120
-msgid "libavcodec MPEG-4 configuration"
-msgstr "libavcodec MPEG-4 ??"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:623
+msgid "Display _Output"
+msgstr "????(_O)"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_postproc.cpp:21
-#: avidemux/ADM_videoFilter/ADM_vidForcedPP.cpp:60
-msgid "_Filter strength:"
-msgstr "????(_S):"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:635
+msgid "_Frame Rate"
+msgstr "???(_F)"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_postproc.cpp:22
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavDecoder.cpp:26
-msgid "_Swap U and V"
-msgstr "?? U ? V (_S)"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:639
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:688
+msgid "_Encoder"
+msgstr "???(_E)"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_postproc.cpp:34
-#: avidemux/ADM_videoFilter/ADM_vidForcedPP.cpp:74
-msgid "_Deringing"
-msgstr "??????(_D)"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:646
+msgid "Fil_ters"
+msgstr "??(_F)"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_postproc.cpp:38
-msgid "Postprocessing"
-msgstr "????"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:653
+msgid "_Audio"
+msgstr "??(_A)"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavDecoder.cpp:27
-msgid "Show motion _vectors"
-msgstr "??????(_V)"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:660
+msgid "_Main Track"
+msgstr "???(_M)"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavDecoder.cpp:29
-msgid "Decoder Options"
-msgstr "?????"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:664
+msgid "_Second Track"
+msgstr "???(_S)"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:45
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:51
-msgid "Auto (might not work)"
-msgstr "?? (????)"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:668
+msgid "_Build VBR Time Map"
+msgstr "???????(VBR)????(_B)"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:46
-#: avidemux/ADM_videoFilter/ADM_vidYadif.cpp:176
-msgid "Top field first"
-msgstr "??????"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:677
+msgid "S_ave..."
+msgstr "??...(_A)"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:47
-#: avidemux/ADM_videoFilter/ADM_vidYadif.cpp:175
-msgid "Bottom field first"
-msgstr "??????"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:695
+msgid "_Filters"
+msgstr "??(_F)"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:52
-msgid "Bottom field (keep top)"
-msgstr "????(????)"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:699
+msgid "_Tools"
+msgstr "??(_T)"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:53
-msgid "Top field (keep bottom)"
-msgstr "????(????)"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:706
+msgid "_Calculator"
+msgstr "???(_C)"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:58
-msgid "Cubic interpolation"
-msgstr "?????"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:722
+msgid "_Rebuild Frames (I & B)"
+msgstr "?????? (I & B)"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:59
-msgid "Modified ELA"
-msgstr "??? ELA"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:726
+msgid "C_heck Frames (slow)"
+msgstr "???? (?)(_H)"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:60
-msgid "Kernel interpolation"
-msgstr "?????"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:730
+msgid "_Bitrate Histogram"
+msgstr "??????(_B)"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:61
-msgid "Modified ELA-2"
-msgstr "??? ELA-2"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:734
+msgid "_Scan for Black Frames..."
+msgstr "?????...(_S)"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:66
-msgid "4 fields check"
-msgstr "4 ????"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:743
+msgid "_VOB -> VobSub"
+msgstr "_VOB ?? VobSub"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:67
-msgid "5 fields check"
-msgstr "5 ????"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:747
+msgid "_OCR (VobSub -> srt)"
+msgstr "_OCR (VobSub ?? srt)"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:68
-msgid "4 fields check (no avg)"
-msgstr "4 ???? (?? avg)"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:751
+msgid "OCR (TS->srt)"
+msgstr "OCR (TS ?? srt)"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:69
-msgid "5 fields check (no avg)"
-msgstr "5 ???? (?? avg)"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:755
+msgid "_Edit Glyph"
+msgstr "????(_E)"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:75
-msgid "No link"
-msgstr "????"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:764
+msgid "_Frame Hex Dump"
+msgstr "???????(_F)"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:76
-msgid "Full link"
-msgstr "????"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:768
+msgid "A_uto"
+msgstr "??(_U)"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:77
-msgid "Y to UV"
-msgstr "Y ?? UV"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:775
+msgid "_VCD"
+msgstr "_VCD"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:78
-msgid "UV to Y"
-msgstr "UV ?? Y"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:779
+msgid "_SVCD"
+msgstr "_SVCD"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:82
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:636
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:652
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:668
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:698
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_resize.cpp:426
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_resize.cpp:440
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_ocr.cpp:79
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_ocr.cpp:93
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:663
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:670
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:677
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:790
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_idx_pg.cpp:166
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_idx_pg.cpp:206
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1218
-msgid "0"
-msgstr "0"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:783
+msgid "_DVD"
+msgstr "_DVD"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:83
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:862
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:873
-msgid "1"
-msgstr "1"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:787
+msgid "_PSP"
+msgstr "_PSP"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:84
-msgid "2"
-msgstr "2"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:791
+msgid "PSP (_H.264)"
+msgstr "PSP (_H.264)"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:91
-#: avidemux/ADM_videoFilter/ADM_vidDGbob.cpp:90
-#: avidemux/ADM_videoFilter/ADM_vidDecTelecide.cpp:111
-#: avidemux/ADM_videoFilter/ADM_vidKernelDeint.cpp:92
-msgid "_Field order:"
-msgstr "??????(_F):"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:795
+msgid "F_LV"
+msgstr "F_LV"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:92
-msgid "_Interpolate:"
-msgstr "??(_I):"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:799
+msgid "IPOD (mpeg4)"
+msgstr "IPOD (mpeg4)"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:94
-msgid "_Type:"
-msgstr "??(_T):"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:803
+msgid "_Go"
+msgstr "??(_G)"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:95
-msgid "_MntMode:"
-msgstr "_Mnt ??:"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:810
+msgid "_Play/Stop"
+msgstr "??/??(_P)"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:96
-msgid "_Link:"
-msgstr "??(_L):"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:821
+msgid "P_revious Frame"
+msgstr "???(_R)"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:97
-msgid "_AP type:"
-msgstr "_AP ??:"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:832
+msgid "_Next Frame"
+msgstr "???(_N)"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:100
-msgid "Use ch_roma to evalute"
-msgstr "???????(_R)"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:843
+msgid "Pr_evious Intra Frame"
+msgstr "??????(_E)"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:101
-msgid "Try _weave"
-msgstr "????(_W)"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:854
+msgid "Next _Intra Frame"
+msgstr "??????(_I)"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:102
-msgid "_Denoise"
-msgstr "????(_D)"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:865
+msgid "Previou_s Black Frame"
+msgstr "?????(_S)"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:103
-#: avidemux/ADM_videoFilter/ADM_vidKernelDeint.cpp:94
-msgid "_Sharp"
-msgstr "??(_S)"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:869
+msgid "Ne_xt Black Frame"
+msgstr "?????(_X)"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:104
-msgid "_Evalute all frames"
-msgstr "???????(_E)"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:873
+msgid "_First Frame"
+msgstr "???(_F)"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:107
-msgid "Motion threshold, l_uma:"
-msgstr "????????(_U):"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:884
+msgid "_Last Frame"
+msgstr "????(_L)"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:108
-msgid "Motion threshold, c_hroma:"
-msgstr "????????(_H):"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:900
+msgid "Go to Marker _A"
+msgstr "???? _A"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:109
-msgid "Area com_bing threshold:"
-msgstr "?????????(_B):"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:907
+msgid "Go to Marker _B"
+msgstr "???? _B"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:110
-msgid "Combe_d threshold:"
-msgstr "???????(_D):"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:919
+msgid "Go to Fra_me..."
+msgstr "????...(_M)"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:111
-msgid "Artefact _protection threshold:"
-msgstr "???????(_P):"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:930
+msgid "Go to _Time..."
+msgstr "????...(_T)"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:112
-msgid "Debug:"
-msgstr "??:"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:941
+msgid "_Custom"
+msgstr "??(_C)"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flv1.cpp:44
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_bitrate.cpp:116
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_bitrate.cpp:278
-msgid "_Bitrate (kb/s):"
-msgstr "???(_B) (kb/s):"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:945
+msgid "_Help"
+msgstr "??(_H)"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flv1.cpp:49
-msgid "FLV1 Configuration"
-msgstr "FLV1 ??"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:952
+msgid "_Plugins"
+msgstr "????(_P)"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_v2v.cpp:34
-msgid "_VOB file(s):"
-msgstr "_VOB ??:"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:956
+msgid "_Built-in Support"
+msgstr "?????(_B)"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_v2v.cpp:34
-msgid "Select VOB file(s)"
-msgstr "?? VOB ?"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:960
+msgid "_About"
+msgstr "??(_A)"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_v2v.cpp:35
-msgid "_IFO file:"
-msgstr "_IFO ??:"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:978
+msgid "Open a file"
+msgstr "????"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_v2v.cpp:35
-msgid "Select IFO file"
-msgstr "?? IFO ?:"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:988
+msgid "Save the file"
+msgstr "????"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_v2v.cpp:36
-msgid "VobSub file:"
-msgstr "VobSub ?:"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:994
+msgid "Audio/video file information"
+msgstr "??/?? ??"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_v2v.cpp:36
-msgid "Select VobSub file"
-msgstr "?? VobSub ?"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1002
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:391
+msgid "Calculator"
+msgstr "???"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_v2v.cpp:41
-msgid "VOB to VobSub"
-msgstr "VOB ?? VobSub"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1005
+msgid "Bitrate/size calculator"
+msgstr "???/?? ???"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_v2v.cpp:45
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_v2v.cpp:50
-msgid "The selected vobfile does not exist"
-msgstr "??? vob ????"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1066
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:298
+msgid "<b>Video</b>"
+msgstr "<b>??</b>"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_v2v.cpp:55
-msgid "Please select a correct VobSub path/dir"
-msgstr "???????? VobSub ??/???"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1086
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1126
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_vcodec.cpp:92
+msgid "Configure"
+msgstr "??"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_jobs_save.cpp:6
-msgid "_Job name:"
-msgstr "????(_J):"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1089
+msgid "Configure video encoder"
+msgstr "??????"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_jobs_save.cpp:7
-msgid "Output _File:"
-msgstr "????(_F):"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1094
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1150
+msgid "Filters"
+msgstr "??"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_jobs_save.cpp:7
-msgid "Select Video To Write"
-msgstr "???????"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1097
+msgid "Video filters"
+msgstr "????"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_jobs_save.cpp:10
-msgid "Save Job"
-msgstr "????"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1106
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:476
+msgid "<b>Audio</b>"
+msgstr "<b>??</b>"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_resizeWiz.cpp:33
-msgid "VCD"
-msgstr "VCD"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1129
+msgid "Configure audio encoder"
+msgstr "??????"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_resizeWiz.cpp:34
-msgid "SVCD"
-msgstr "SVCD"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1137
+msgid "Audio filters"
+msgstr "????"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_resizeWiz.cpp:35
-msgid "DVD"
-msgstr "DVD"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1158
+msgid "Shift:"
+msgstr "??:"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_resizeWiz.cpp:36
-msgid "DVD half D1"
-msgstr "DVD half D1"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1161
+msgid "Enable time shift"
+msgstr "??????"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_resizeWiz.cpp:37
-msgid "PSP (480 * 272)"
-msgstr "PSP (480 * 272)"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1167
+msgid "Audio/video time shift (ms)"
+msgstr "??/?? ???? (ms)"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_resizeWiz.cpp:38
-msgid "PSP full res. (720 * 480)"
-msgstr "PSP ?????? (720*480)"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1170
+msgid "ms"
+msgstr "ms"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_resizeWiz.cpp:43
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_resize.cpp:383
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_resize.cpp:405
-#: avidemux/ADM_libraries/ADM_utilities/avidemutils.cpp:332
-msgid "1:1"
-msgstr "1:1"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1178
+msgid "<b>Format</b>"
+msgstr "<b>??</b>"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_resizeWiz.cpp:54
-msgid "_Target type:"
-msgstr "????(_T):"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1211
+msgid "Frame: "
+msgstr "??:"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_resizeWiz.cpp:55
-msgid "_Source aspect ratio:"
-msgstr "???????(_S):"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1218
+msgid "Current frame"
+msgstr "????"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_resizeWiz.cpp:56
-msgid "_Destination aspect ratio:"
-msgstr "?????????(_D):"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1220
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_resize.cpp:411
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_resize.cpp:425
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_ocr.cpp:63
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_ocr.cpp:77
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:622
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:638
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:654
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:684
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:648
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:655
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:662
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:775
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_idx_pg.cpp:154
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_idx_pg.cpp:194
+#: plugins/ADM_videoFilters/Tdeint/DIA_tdeint.cpp:68
+#: plugins/ADM_videoFilters/AvisynthResize/gtk/gtk_resize.cpp:408
+#: plugins/ADM_videoFilters/AvisynthResize/gtk/gtk_resize.cpp:422
+#: plugins/ADM_videoFilters/MplayerResize/gtk/gtk_resize.cpp:408
+#: plugins/ADM_videoFilters/MplayerResize/gtk/gtk_resize.cpp:422
+msgid "0"
+msgstr "0"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_resizeWiz.cpp:61
-msgid "Auto Wizard"
-msgstr "????"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1223
+msgid "/ 0000000"
+msgstr "/ 0000000"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioconfig.cpp:52
-#: avidemux/ADM_audiofilter/audioencoder_vorbis.cpp:288
-#: avidemux/ADM_audiofilter/audioencoder_lame.cpp:246
-msgid "_Bitrate:"
-msgstr "???(_B):"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1230
+msgid "Time: "
+msgstr "??:"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioconfig.cpp:56
-msgid "Audio Configuration"
-msgstr "????"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1237
+msgid "Current time"
+msgstr "????"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:62
-msgid "_Dynamic range compression"
-msgstr "??????(_D)"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1238
+msgid "00:00:00.000"
+msgstr "00:00:00.000"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:64
-msgid "_Time shift (ms):"
-msgstr "???? (ms)(_T):"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1241
+msgid "/ 00:00:00,000"
+msgstr "/ 00:00:00,000"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:64
-msgid "Time shift value (ms)"
-msgstr "????? (ms)"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1248
+msgid "Frame: ?"
+msgstr "??:?"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:72
-msgid "R_esampling (Hz):"
-msgstr "????(_E) (Hz):"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1272
+msgid "Play"
+msgstr "??"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:72
-msgid "Resampling frequency (Hz)"
-msgstr "?????? (Hz)"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1286
+msgid "Stop"
+msgstr "??"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:81
-msgid "Film to PAL"
-msgstr "Film ?? PAL"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1298
+msgid "Previous frame"
+msgstr "???"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:82
-msgid "PAL to Film"
-msgstr "PAL ?? Film"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1313
+msgid "Next frame"
+msgstr "???"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:85
-msgid "_Frame rate change:"
-msgstr "?????(_F):"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1328
+msgid "Previous keyframe"
+msgstr "??????"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:90
-msgid "Automatic (max -3 dB)"
-msgstr "?? (??? -3 dB)"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1343
+msgid "Next keyframe"
+msgstr "??????"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:91
-msgid "Manual"
-msgstr "??"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1357
+msgid "Selection: start"
+msgstr "????:??"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:93
-msgid "_Gain mode:"
-msgstr "????(_G):"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1368
+msgid "Selection: end"
+msgstr "????:??"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:95
-msgid "G_ain value:"
-msgstr "???(_A):"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1379
+msgid "Previous black frame"
+msgstr "?????"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:97
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_coloryuv.cpp:204
-msgid "Gain"
-msgstr "??"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1390
+msgid "Next black frame"
+msgstr "?????"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:102
-msgid "No change"
-msgstr "????"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1401
+msgid "First frame"
+msgstr "???"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:103
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:100
-#: avidemux/ADM_audiofilter/audioencoder_lame.cpp:222
-msgid "Mono"
-msgstr "??"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1412
+msgid "Last frame"
+msgstr "????"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:105
-msgid "Stereo+surround"
-msgstr "??+??"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1426
+msgid "<b>Selection</b>"
+msgstr "<b>????</b>"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:106
-msgid "Stereo+center"
-msgstr "??+??"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1443
+msgid "B:"
+msgstr "B:"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:107
-msgid "Stereo+center+surround"
-msgstr "??+??+??"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1450
+msgid "Go to marker B"
+msgstr "???? B"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:108
-msgid "Stereo front+stereo rear"
-msgstr "????+????"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1452
+msgid "A:"
+msgstr "A:"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:109
-msgid "5 channels"
-msgstr "5 ??"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1459
+msgid "Go to marker A"
+msgstr "???? A"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:110
-msgid "5.1"
-msgstr "5.1"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1461
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1469
+msgid " 0000000"
+msgstr " 0000000"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:111
-msgid "Dolby Pro Logic"
-msgstr "??????"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_bindings.cpp:534
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:334
+msgid "Input"
+msgstr "??"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:112
-msgid "Dolby Pro Logic II"
-msgstr "?????????"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_bindings.cpp:535
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:338
+msgid "Output"
+msgstr "??"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:115
-msgid "_Mixer:"
-msgstr "???(_M):"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_bindings.cpp:536
+msgid "Side"
+msgstr "????"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:119
-msgid "Audio Filters"
-msgstr "????"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_bindings.cpp:537
+#: plugins/ADM_videoFilters/Telecide/ADM_vidDecTelecide.cpp:82
+#: plugins/ADM_videoFilters/DgBob/ADM_vidDGbob.cpp:75
+#: plugins/ADM_videoFilters/KernelDeint/ADM_vidKernelDeint.cpp:69
+#: plugins/ADM_videoFilters/McDeint/ADM_vidMcDeint.cpp:96
+msgid "Top"
+msgstr "????"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp:128
-msgid "Video Codecs"
-msgstr "?????"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_bindings.cpp:538
+msgid "Separate"
+msgstr "????"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp:135
-msgid "Audio Codecs"
-msgstr "?????"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_bindings.cpp:723
+#, c-format
+msgid "Frame:%c(%02d)"
+msgstr "??:%c(%02d)"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp:136
-msgid "Aften"
-msgstr "Aften"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/ADM_tray_gtk.cpp:53
+msgid "Open Avidemux"
+msgstr "?? Avidemux"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp:137
-msgid "amrnb"
-msgstr "amrnb"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/ADM_icons.cpp:228
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/ADM_icons.cpp:252
+#, c-format
+msgid "Couldn't find pixmap file: %s"
+msgstr "???????: %s"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp:138
-msgid "FAAC"
-msgstr "FAAC"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtersub.cpp:53
+msgid "Video Filters"
+msgstr "????"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp:139
-msgid "FAAD2"
-msgstr "FAAD2"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtersub.cpp:113
+msgid "VCD res"
+msgstr "VCD ??"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp:140
-msgid "LAME"
-msgstr "LAME"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtersub.cpp:119
+msgid "SVCD res"
+msgstr "SVCD ??"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp:141
-msgid "liba52"
-msgstr "liba52"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtersub.cpp:125
+msgid "DVD res"
+msgstr "DVD ??"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp:142
-msgid "libdca"
-msgstr "libdca"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtersub.cpp:131
+msgid "Half D1 res"
+msgstr "Half D1 ??"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp:143
-msgid "MAD"
-msgstr "MAD"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtersub.cpp:145
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_partial.cpp:110
+#: avidemux/ADM_filter/filter_declaration.cpp:57
+msgid "Partial"
+msgstr "??"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp:144
-msgid "Vorbis"
-msgstr "Vorbis"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtersub.cpp:151
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager.cpp:332
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_threshold.cpp:536
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_preview.cpp:175
+msgid "Preview"
+msgstr "??"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp:158
-msgid "Fontconfig"
-msgstr "Fontconfig"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtersub.cpp:157
+msgid "Save as script"
+msgstr "?????"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp:159
-msgid "FreeType 2"
-msgstr "FreeType 2"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filterlist.cpp:66
+msgid "Add Video Filter"
+msgstr "??????"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp:160
-msgid "Gettext"
-msgstr "Gettext"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filterlist.cpp:100
+msgid "Transformation"
+msgstr "??"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp:164
-msgid "XVideo"
-msgstr "XVideo"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filterlist.cpp:125
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager_dialog.cpp:286
+msgid "Interlacing"
+msgstr "??"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp:166
-msgid "AltiVec"
-msgstr "AltiVec"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filterlist.cpp:150
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager_dialog.cpp:310
+msgid "Colors"
+msgstr "??"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp:167
-msgid "PowerPC"
-msgstr "PowerPC"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filterlist.cpp:175
+#: plugins/ADM_videoFilters/Denoise/ADM_vidDenoise.cpp:40
+#: plugins/ADM_videoFilters/Denoise/ADM_vidDenoise.cpp:393
+msgid "Denoise"
+msgstr "???"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp:168
-msgid "x86"
-msgstr "x86"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filterlist.cpp:200
+msgid "Sharpen/Blur"
+msgstr "??/??"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp:169
-msgid "x86-64"
-msgstr "x86-64"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filterlist.cpp:225
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager_dialog.cpp:382
+msgid "Subtitles"
+msgstr "??"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp:176
-msgid "Codecs"
-msgstr "???"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filterlist.cpp:250
+msgid "Miscellaneous"
+msgstr "????"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp:177
-msgid "Libraries"
-msgstr "???"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager.cpp:240
+msgid "The filter is already partial"
+msgstr "?????????"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp:182
-msgid "Built-in Support"
-msgstr "?????"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager.cpp:338
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager.cpp:340
+msgid "Load set of filters"
+msgstr "???????"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_requant.cpp:48
-msgid "_Shrink Factor:"
-msgstr "????(_S):"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager.cpp:353
+msgid "Nothing to save"
+msgstr "??????????"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_requant.cpp:51
-msgid "Requant Configuration"
-msgstr "??????"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager.cpp:357
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager.cpp:359
+msgid "Save set of filters"
+msgstr "???????"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_animated.cpp:36
-msgid "_Background Image:"
-msgstr "????:"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager_dialog.cpp:124
+msgid "Video Filter Manager"
+msgstr "???????"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_animated.cpp:36
-msgid "Select background image"
-msgstr "??????"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager_dialog.cpp:146
+msgid "Open filter list [Ctrl-O]"
+msgstr "?????? [Ctrl-O]"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_animated.cpp:37
-msgid "_NTSC (default is PAL):"
-msgstr "NTSC (??? PAL)(_N):"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager_dialog.cpp:155
+msgid "Save filter list [Ctrl-S]"
+msgstr "?????? [Ctrl-S]"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_animated.cpp:38
-msgid "Vignette _Width:"
-msgstr "????(_W):"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager_dialog.cpp:163
+msgid "Save Script"
+msgstr "????"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_animated.cpp:39
-msgid "Vignette _Height:"
-msgstr "????(_H):"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager_dialog.cpp:166
+msgid "Save as script [Ctrl-J]"
+msgstr "????? [Ctrl-J]"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_animated.cpp:42
-msgid "Vignette frame number"
-msgstr "???????"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager_dialog.cpp:174
+msgid "DVD Res"
+msgstr "DVD ??"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_animated.cpp:46
-msgid "Timecode:"
-msgstr "???:"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager_dialog.cpp:177
+msgid "DVD resolution [Ctrl-1]"
+msgstr "DVD ??? [Ctrl-1]"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ui_support.cpp:37
-msgid "GTK+"
-msgstr "GTK+"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager_dialog.cpp:185
+msgid "Half D1 Res"
+msgstr "Half D1 ??"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_vobsub.cpp:95
-msgid "none"
-msgstr "?"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager_dialog.cpp:188
+msgid "Half D1 resolution [Ctrl-2]"
+msgstr "Half D1 ??? [Ctrl-2]"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_vobsub.cpp:104
-msgid "Select .idx file"
-msgstr "?? .idx ?"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager_dialog.cpp:196
+msgid "SVCD Res"
+msgstr "SVCD ??"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_vobsub.cpp:115
-msgid "Wrong VobSub parametering"
-msgstr "??? VobSub ??"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager_dialog.cpp:199
+msgid "SVCD resolution [Ctrl-3]"
+msgstr "SVCD ??? [Ctrl-3]"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_vobsub.cpp:115
-msgid "The idx/sub file does not set."
-msgstr "? idx/sub ?????"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager_dialog.cpp:207
+msgid "VCD Res"
+msgstr "VCD ??"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_vobsub.cpp:202
-msgid "VobSub Settings"
-msgstr "VobSub ??"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager_dialog.cpp:210
+msgid "VCD resolution [Ctrl-4]"
+msgstr "VCD ??? [Ctrl-4]"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_vobsub.cpp:219
-msgid "Select .idx"
-msgstr "?? .idx"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager_dialog.cpp:261
+msgid "Transform"
+msgstr "??"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_vobsub.cpp:233
-msgid "Select Language :"
-msgstr "???? :"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager_dialog.cpp:334
+msgid "Noise"
+msgstr "??"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_vobsub.cpp:247
-msgid "Select Sub"
-msgstr "?? Sub"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager_dialog.cpp:358
+msgid "Sharpness"
+msgstr "???"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_vobsub.cpp:260
-msgid "Extra Shrink Factor :"
-msgstr "???????:"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager_dialog.cpp:406
+msgid "Misc"
+msgstr "??"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_vobsub.cpp:275
-msgid "Shift (ms) :"
-msgstr "?? (ms) :"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager_dialog.cpp:417
+msgid "External"
+msgstr "???"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_vobsub.cpp:289
-msgid "Extra Settings"
-msgstr "?????"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager_dialog.cpp:428
+msgid "Add selected filter to the Active Filters list"
+msgstr "?????????????????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_asharp.cpp:75
-msgid "ASHARP"
-msgstr "ASHARP"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager_dialog.cpp:434
+msgid "<b>Available Filters</b>"
+msgstr "<b>?????</b>"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_asharp.cpp:187
-msgid "ASharp by MarcFD"
-msgstr "ASharp ??? MarcFD"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager_dialog.cpp:479
+msgid "Remove filter"
+msgstr "????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_asharp.cpp:200
-msgid "Threshold :"
-msgstr "???:"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager_dialog.cpp:488
+msgid "Move filter down"
+msgstr "????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_asharp.cpp:208
-msgid "Strength :"
-msgstr "??:"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager_dialog.cpp:497
+msgid "Move filter up"
+msgstr "????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_asharp.cpp:216
-msgid "Block Adaptative :"
-msgstr "????:"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager_dialog.cpp:503
+msgid "P_artial"
+msgstr "??(_A)"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_asharp.cpp:224
-msgid "Unknown flag :"
-msgstr "?????:"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager_dialog.cpp:506
+msgid "Apply the current filter only to a part of the file"
+msgstr "????????????????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_asharp.cpp:256
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_ocr.cpp:161
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:255
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:276
-msgid " "
-msgstr " "
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager_dialog.cpp:511
+msgid "Configure filter"
+msgstr "????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_srt.cpp:97
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_srt.cpp:228
-msgid "Subtitle Size and Position"
-msgstr "???????"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager_dialog.cpp:521
+msgid "C_onfigure"
+msgstr "??(_O)"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_srt.cpp:242
-msgid "Font Size:"
-msgstr "????:"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager_dialog.cpp:525
+msgid "<b >Active Filters</b>"
+msgstr "<b >??????</b>"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_cnr2.cpp:141
-msgid "Chroma Noise Reduction 2"
-msgstr "?????? 2"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager_dialog.cpp:552
+msgid "_Preview"
+msgstr "??(_P)"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_cnr2.cpp:166
-msgid "<b>Scene change Treshold</b>"
-msgstr "<b>???????</b>"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_cnr2.cpp:185
-msgid "Sensibility"
-msgstr "???"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_cnr2.cpp:193
-msgid "Max"
-msgstr "??"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_cnr2.cpp:208
-msgid "Luma :"
-msgstr "??:"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_cnr2.cpp:215
-msgid "Chroma U :"
-msgstr "?? U :"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_cnr2.cpp:222
-msgid "Chroma V :"
-msgstr "?? V :"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_cnr2.cpp:265
-msgid "Narrow"
-msgstr "??"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_cnr2.cpp:290
-msgid "<b>Settings</b>"
-msgstr "<b>??</b>"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_cnr2.cpp:309
-msgid "Use also chroma to detect scene change"
-msgstr "????????????"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_cnr2.cpp:313
-msgid "<b>Mode</b>"
-msgstr "<b>??</b>"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_coloryuv.cpp:159
-msgid "ColorYuv (From avisynth)"
-msgstr "??????(? avisynth)"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_coloryuv.cpp:190
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_contrast.cpp:225
-msgid "Brightness"
-msgstr "??"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_coloryuv.cpp:197
-msgid "Gamma"
-msgstr "Gamma"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_coloryuv.cpp:211
-msgid "Luma Y"
-msgstr "?? Y"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_coloryuv.cpp:218
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_contrast.cpp:243
-msgid "Chroma U"
-msgstr "?? U"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_coloryuv.cpp:225
-msgid "Chroma V"
-msgstr "?? V"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_coloryuv.cpp:328
-msgid "<b>Color Correction Matrix</b>"
-msgstr "<b>??????</b>"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_coloryuv.cpp:351
-msgid "Matrix"
-msgstr "??"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_coloryuv.cpp:358
-msgid "Opt"
-msgstr "??"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_coloryuv.cpp:365
-msgid "Level"
-msgstr "??"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_coloryuv.cpp:378
-msgid "Rec.709"
-msgstr "Rec.709"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_coloryuv.cpp:386
-msgid "Coring"
-msgstr "????"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_coloryuv.cpp:394
-msgid "TV->PC"
-msgstr "TV ?? PC"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_coloryuv.cpp:395
-msgid "PC->TV"
-msgstr "PC ?? TV"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_coloryuv.cpp:396
-msgid "PC->TV.Y"
-msgstr "PC ?? TV.Y"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_coloryuv.cpp:402
-msgid ""
-"<b>Matrix Warning :</b>\n"
-"all above values are normalized to 256!"
-msgstr ""
-"<b>???? :</b>\n"
-"????????????? 256!"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_coloryuv.cpp:408
-msgid "AutoGain"
-msgstr "????"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_coloryuv.cpp:412
-msgid "Display Stats"
-msgstr "????"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_coloryuv.cpp:416
-msgid "AutoWhite"
-msgstr "????"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_coloryuv.cpp:420
-msgid "<b>frame2</b>"
-msgstr "<b>??2</b>"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_threshold.cpp:206
-#: avidemux/ADM_videoFilter/ADM_vidThreshold.cpp:163
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_threshold.cpp:194
+#: avidemux/ADM_videoFilter/ADM_vidThreshold.cpp:152
 msgid "Threshold Configuration"
-msgstr "?????"
+msgstr "?????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_threshold.cpp:429
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_threshold.cpp:395
+#: avidemux/ADM_filter/filter_declaration.cpp:51
+msgid "Threshold"
+msgstr "???"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_threshold.cpp:417
 msgid "Minimum value to be in-range:"
 msgstr "????????:"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_threshold.cpp:462
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_threshold.cpp:450
 msgid "Maximum value to be in-range:"
 msgstr "????????:"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_threshold.cpp:493
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_threshold.cpp:481
 msgid "Output values:   "
 msgstr "???:"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_threshold.cpp:500
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_threshold.cpp:488
 msgid "In-range values go black, out-of-range values go white"
 msgstr "?????????????????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_threshold.cpp:501
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_threshold.cpp:489
 msgid "In-range values go white, out-of-range values go black"
 msgstr "?????????????????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_threshold.cpp:507
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_threshold.cpp:495
 msgid "Debugging settings (bits):   "
 msgstr "???? (??):"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_threshold.cpp:548
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_preview.cpp:180
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtersub.cpp:150
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager.cpp:337
-msgid "Preview"
-msgstr "??"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_quota.cpp:69
+msgid "Filesystem full / quota exceeded"
+msgstr "?????? / ?????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:405
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1000
-msgid "Calculator"
-msgstr "???"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_quota.cpp:112
+msgid "Ignore"
+msgstr "??"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:418
-msgid "<b>Target</b>"
-msgstr "<b>??</b>"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_quota.cpp:134
+msgid "Retry"
+msgstr "??"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:445
-msgid "Duration:"
-msgstr "????:"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_exLame.cpp:63
+msgid "Lame command"
+msgstr "Lame ??"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:451
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:804
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_idx_pg.cpp:198
-msgid "00:00:00"
-msgstr "00:00:00"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_exLame.cpp:72
+msgid "Enter parameters (i.e. -b 192 -m s ...)"
+msgstr "???? (i.e. -b 192 -m s ...)"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:465
-msgid "_Medium:"
-msgstr "??(_M):"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_pipe.cpp:78
+msgid "Pipe to"
+msgstr "???"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:476
-msgid "_Format:"
-msgstr "??(_F):"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_pipe.cpp:87
+msgid "Application path/name (/usr/bin/sox...)"
+msgstr "???????/?? (/usr/bin/sox...)"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:487
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:545
-msgid "Total size (custom)"
-msgstr "???(??)"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_pipe.cpp:96
+msgid "Full parameter line"
+msgstr "?????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:497
-msgid "_Custom size (MB):"
-msgstr "???? (MB)(_C):"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/toolkit_dialog.cpp:481
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/toolkit_dialog.cpp:559
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/toolkit_dialog.cpp:627
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/toolkit_dialog.cpp:687
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/toolkit_dialog.cpp:750
+msgid "label1"
+msgstr "??1"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:511
-msgid "Output container format"
-msgstr "??????"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/toolkit_dialog.cpp:614
+msgid "Alert"
+msgstr "??"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:538
-msgid "Total size"
-msgstr "???"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_working.cpp:138
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:368
+#, c-format
+msgid "%d%%"
+msgstr "%d%%"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:542
-msgid "1x 80 min. CD"
-msgstr "1x 80 ?? CD"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_working.cpp:211
+msgid "Processing"
+msgstr "???"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:547
-msgid "2x 80 min. CD"
-msgstr "2x 80 ?? CD"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_working.cpp:232
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:751
+msgid "<b>Elapsed:</b>"
+msgstr "<b>????:</b>"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:551
-msgid "1x 74 min. CD"
-msgstr "1x 74 ?? CD"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_working.cpp:247
+msgid "<b>Time remaining:</b>"
+msgstr "<b>????:</b>"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:555
-msgid "2x 74 min. CD"
-msgstr "2x 74 ?? CD"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_SwissArmyKnife.cpp:505
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:385
+msgid "Swiss Army Knife Configuration"
+msgstr "??????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:559
-msgid "DVD5"
-msgstr "DVD5"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_vcodec.cpp:78
+msgid "Video encoder"
+msgstr "?????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:563
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:876
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_threadCount.cpp:87
-msgid "Custom"
-msgstr "??"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_pause.cpp:76
+msgid "Paused"
+msgstr "???"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:575
-msgid "Track _1:"
-msgstr "?? _1:"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_pause.cpp:92
+msgid ""
+"<b>Encoding is paused.</b>\n"
+"\n"
+"You can either resume or Abort it."
+msgstr ""
+"<b>??????</b>\n"
+"\n"
+"?????????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:583
-msgid "Audio bitrate in kb/s for track 1 (0 for no audio)"
-msgstr "?? 1  ?????? kb/s (0 ????)"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_pause.cpp:119
+msgid "Abort"
+msgstr "??"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:590
-msgid "Track _2: "
-msgstr "?? _2: "
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_pause.cpp:141
+msgid "Resume"
+msgstr "??"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:598
-msgid "Audio bitrate in kb/s for track 2 (optional)"
-msgstr "?? 2  ?????? kb/s (????)"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_particle.cpp:269
+msgid "Particle Analysis Configuration"
+msgstr "??????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:602
-msgid "<b>Audio Bitrate</b>"
-msgstr "<b>?????</b>"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/TLK_filesel.cpp:95
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/TLK_filesel.cpp:199
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/TLK_filesel.cpp:383
+msgid "Cannot open directory as a file"
+msgstr "???????????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:628
-msgid "Audio size (MB):"
-msgstr "???? (MB):"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/TLK_filesel.cpp:437
+msgid "Images"
+msgstr "??"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:644
-msgid "Video size (MB):"
-msgstr "???? (MB):"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/TLK_filesel.cpp:448
+msgid "All"
+msgstr "??"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:660
-msgid "Total size (MB):"
-msgstr "??? (MB):"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_partial.cpp:124
+msgid "Start frame for partial :"
+msgstr "???????:"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:682
-msgid "Video bitrate:"
-msgstr "?????:"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_partial.cpp:131
+msgid "End frame for partial :"
+msgstr "???????:"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:690
-msgid "Bits per pixel:"
-msgstr "??????:"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_partial.cpp:154
+msgid "Configure partialized filter"
+msgstr "???????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:706
-msgid "0.0"
-msgstr "0.0"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_busy.cpp:102
+msgid "Busy"
+msgstr "??"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:714
-msgid "<b>Result</b>"
-msgstr "<b>??</b>"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_recent.cpp:90
+msgid "Recent files"
+msgstr "???????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:113
-msgid "1 - QPel SAD (Fastest)"
-msgstr "1 - 1/4 ?? SAD (??)"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_resize.cpp:304
+#: plugins/ADM_videoFilters/AvisynthResize/ADM_vidResize.cpp:39
+#: plugins/ADM_videoFilters/AvisynthResize/gtk/gtk_resize.cpp:301
+#: plugins/ADM_videoFilters/MplayerResize/gtk/gtk_resize.cpp:301
+msgid "Resize"
+msgstr "????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:114
-msgid "2 - QPel SATD"
-msgstr "2 - 1/4 ?? SATD"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:115
-msgid "3 - HPel on MB then QPel"
-msgstr "3 - MB ??? 1/2 ???? 1/4 ??"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:116
-msgid "4 - Always QPel"
-msgstr "4 - ???? 1/4 ??"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:117
-msgid "5 - QPel + Bidirectional ME"
-msgstr "5 - QPel + ???????"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:118
-msgid "6 - RD on I/P frames (Default)"
-msgstr "6 - I/P ????????? (??)"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:119
-msgid "7 - RD on all frames"
-msgstr "7B - ???????????"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:120
-msgid "8 - RD refinement on I/P frames"
-msgstr "8 - I/P ?????????????"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:121
-msgid "9 - RD refinement on all frames"
-msgstr "9 - ???????????????"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:125
-msgid "1  - Extremely Low (Fastest)"
-msgstr "1  - ???? (??)"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:126
-msgid "2  - Very Low"
-msgstr "2  - ???"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:127
-msgid "3  - Low"
-msgstr "3  - ?"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:128
-msgid "4  - Medium"
-msgstr "4  - ?"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:129
-msgid "5  - High"
-msgstr "5  - ?"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:130
-msgid "6  - High (Default)"
-msgstr "6  - ? (??)"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:131
-msgid "6B - Very High (RDO on B-frames)"
-msgstr "6B - ??? (B-??? RDO)"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:132
-msgid "7  - Ultra High"
-msgstr "7  - ??"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:133
-msgid "7B - Ultra High (RDO on B-frames)"
-msgstr "7B - ?? (B-??? RDO)"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:140
-msgid "Hadamard Exhaustive Search"
-msgstr "????????"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:626
-msgid "x264 Configuration"
-msgstr "x264 ??"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:647
-msgid "Encoding Mode"
-msgstr "????"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:654
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid.cpp:484
-msgid "Quantizer"
-msgstr "???"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:661
-msgid "Target Size"
-msgstr "????"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:674
-msgid "Constant Quantizer - Each frame will have the same compression. Low numbers equal higher quality while high numbers equal lower quality."
-msgstr "????? - ?????????????????????????????????"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:682
-msgid "Target bitrate or file size"
-msgstr "???????????"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:690
-msgid "Single Pass - Quality Quantizer (Average)"
-msgstr "???? - ?????? (???)"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:691
-msgid "Single Pass - Quality Quantizer (Constant)"
-msgstr "???? - ?????? (???)"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:692
-msgid "Single Pass - Bitrate (Average)"
-msgstr "???? - ??? (???)"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:693
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:775
-msgid "Two Pass - Video Size"
-msgstr "???? - ????"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:694
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:779
-msgid "Two Pass - Average Bitrate"
-msgstr "???? - ?????"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:696
-msgid "Bitrate"
-msgstr "???"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:729
-msgid "Partition Decision"
-msgstr "????"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:736
-msgid "Method"
-msgstr "??"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:754
-msgid "Diamond Search"
-msgstr "????"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:755
-msgid "Hexagonal Search"
-msgstr "?????"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:756
-msgid "Uneven Multi-hexagon"
-msgstr "???????"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:757
-msgid "Exhaustive Search"
-msgstr "????"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:765
-msgid "Max. Ref. Frames"
-msgstr "???????"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:772
-msgid "Range"
-msgstr "??"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:785
-msgid "Define how many pixels are analysed for motion estimation. The higher the range the more accurate the analysis but the slower the encoding time."
-msgstr "??????????????????????????????"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:794
-msgid "Set how many previous frames can be referenced by a P/B-frame. Numbers above 5 do not seem to improve quality greatly. Numbers 3 to 5 are recommended."
-msgstr "????????????? P/B-????????? 5 ????????????????? 3 ? 5?"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:797
-msgid "Chroma ME"
-msgstr "??????"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:802
-msgid "Use color information for detecting motion to improve quality"
-msgstr "????????????????"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:805
-msgid "Mixed Refs"
-msgstr "????"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:810
-msgid "Calculate referencing individually based on each partition"
-msgstr "????????????????"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:816
-msgid "Fast P-Skip"
-msgstr "?? P-??"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:819
-msgid "Early skip detection on P-frames to speedup encoding. Quality will be slightly reduced."
-msgstr "? P-?????????????????????????"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:822
-msgid "DCT Decimate"
-msgstr "??????(DCT)????"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:827
-msgid "Interlaced"
-msgstr "???"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:830
-msgid "Input video is interlaced"
-msgstr "?????"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:832
-msgid "<b>Motion Estimation</b>"
-msgstr "<b>????</b>"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:861
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:872
-msgid "Enforce the size of a decoded pixel decoded to a certain value. Set this to 1:1 for non-anamorphic video."
-msgstr "???????????????????????????? 1:1 ???????"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:865
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1058
-msgid ":"
-msgstr ":"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:881
-msgid "Set a custom aspect ratio. The default 1:1 is recommended for most video."
-msgstr "???????????????????????1:1?"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:886
-msgid "Predefined Aspect Ratio"
-msgstr "????????"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:891
-msgid "Set a common predefined aspect ratio"
-msgstr "????????????????"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:895
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1047
-msgid "As Input"
-msgstr "????"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:916
-msgid "<b>Sample Aspect Ratio</b>"
-msgstr "<b>??????</b>"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:943
-msgid "CABAC"
-msgstr "CABAC"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:946
-msgid "Lossless compression technique that reduces bitrate by approximately 10%. Increases encoding and decoding time."
-msgstr "??????????? 10% ???????????????"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:953
-msgid "Trellis"
-msgstr "??"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:962
-msgid "Use Trellis Rate Distortion Optimisation to find optimal encoding for each block. Level 0 equals disabled, level 1 equals normal and level 2 equals high."
-msgstr "???????????????????????????? 0 ??????? 1 ??????? 2 ????"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:969
-msgid "Noise Reduction"
-msgstr "????"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:978
-msgid "Set the amount of noise reduction"
-msgstr "????????"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:985
-msgid "Deblocking Filter"
-msgstr "???????"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:988
-msgid "Enable in-loop deblocking to filter the video"
-msgstr "?????????????"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1005
-msgid "Strength"
-msgstr "??"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1019
-msgid "Threshold for block detection. Positive values will detect more blocks, negative values will detect less."
-msgstr "???????????????????????????"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1028
-msgid "Positive values will soften the video, negative values will sharpen"
-msgstr "??????????????????"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1031
-msgid "<b>Misc. Options</b>"
-msgstr "<b>??. ???</b>"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1036
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1073
-msgid "Motion & Misc"
-msgstr "?? & ??"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1062
-msgid "8x8 Transform"
-msgstr "8x8 ??"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1065
-msgid "General block breakdown transformation"
-msgstr "????????"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1068
-msgid "8x8, 8x16 and 16x8 P-frame search"
-msgstr "8x8, 8x16 ? 16x8 P-????"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1071
-msgid "Improve the P-frame quality"
-msgstr "?? P-?????"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1074
-msgid "8x8, 8x16 and 16x8 B-frame search"
-msgstr "8x8, 8x16 ? 16x8 B-????"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1077
-msgid "Improve the B-frame quality"
-msgstr "?? B-?????"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1080
-msgid "4x4, 4x8 and 8x4 P-frame search"
-msgstr "4x4, 4x8 ? 8x4 P-????"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1083
-msgid "Further improve the P-frame quality"
-msgstr "?????? P-?????"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1085
-msgid "8x8 Intra search"
-msgstr "8x8 ????"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1088
-msgid "Enable DCT Intra block search to improve quality"
-msgstr "?? DCT ???????????"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1091
-msgid "4x4 Intra search"
-msgstr "4x4 ????"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1094
-msgid "Further enable DCT Intra block search to improve quality"
-msgstr "????? DCT ???????????"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1097
-msgid "<b>Partition Macroblocks</b>"
-msgstr "<b>??????</b>"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1121
-msgid "Bias"
-msgstr "??"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1128
-msgid "Max Consecutive"
-msgstr "????"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1141
-msgid "Increase / decrease probability for how often B-frames are used. It will not violate the maximum consecutive frame limit."
-msgstr "?? / ?? ???????? B-??????????????????????"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1150
-msgid "Set the maximum number of consecutive B-frames. This defines how many duplicate frames can be dropped. Numbers 2 to 5 are recommended. This greatly improves the use of bitrate and quality."
-msgstr "???? B-?????????????????????????????? 2 ? 5?????????????????"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1164
-msgid "Bidirectional ME"
-msgstr "??? ME"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1169
-msgid "Optimise both motion vectors in B-frames. This will improve quality but take more time for encoding."
-msgstr "? B-??????????????????????????????????"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1171
-msgid "Weighted Biprediction"
-msgstr "??????"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1176
-msgid "Enables weighting of B-frames to help fades"
-msgstr "?? B-?????????????"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1179
-msgid "Adaptative DCT"
-msgstr "??? DCT"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1184
-msgid "Use fewer B-frames if needed. This is always recommended. If not enabled, the codec will always use the maximum number of consecutive B-frames."
-msgstr "????????? B-????????????????????????????? B-???????"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1187
-msgid "Use as Reference"
-msgstr "??????"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1192
-msgid "Allow B-frames to make references non-linearly to another B-frame (instead of creating a duplicate copy)"
-msgstr "?? B-??????? B-????????(???????????)"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1198
-msgid "B-Frame Direct Mode"
-msgstr "B-??????"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1207
-msgid "Spatial"
-msgstr "????"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1208
-msgid "Temporal"
-msgstr "???"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1209
-msgid "Auto"
-msgstr "??"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1211
-msgid "<b>B-Frames</b>"
-msgstr "<b>B-??</b>"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1216
-msgid "Partitions & Frames"
-msgstr "???????"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1251
-msgid "Set how much \"bitrate bonus\" a keyframe can get"
-msgstr "????????????? \"??????\""
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1260
-msgid "Set how much bitrate is deducted from a B-frame as compared to the previous P-frame"
-msgstr "???????????? B-????????? P-??"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1269
-msgid "Define how much the bitrate can fluctuate over the entire video. 0% results in a constant bitrate stream, while 100% results in a pure quality based bitrate stream."
-msgstr "??????????????????????????????? 0%???????????????? 100%?"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1272
-msgid "Keyframe Boost (%)"
-msgstr "?????? (%)"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1279
-msgid "B-frame Reduction (%)"
-msgstr "B-???? (%)"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1286
-msgid "Bitrate Variability (%)"
-msgstr "?????? (%)"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1293
-msgid "<b>Bitrate</b>"
-msgstr "<b>???</b>"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1313
-msgid "Min QP"
-msgstr "?? QP"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1320
-msgid "Max QP"
-msgstr "?? QP"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1327
-msgid "Max QP Step"
-msgstr "?? QP ???"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1341
-msgid "Enforce a minimum quantizer level"
-msgstr "??????????"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1350
-msgid "Enforce a maximum quantizer level"
-msgstr "??????????"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1359
-msgid "Define how much the quantizer rate can change between two consecutive frames"
-msgstr "????????????????????"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1362
-msgid "<b>Quantization Limits</b>"
-msgstr "<b>??????</b>"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1389
-msgid "Increase / decrease sensitivity for detecting scene changes. Improves I-frame usage and quality."
-msgstr "??/?? ????????????????? I-????????????"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1392
-msgid "Scene Cut Threshold"
-msgstr "???????"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1399
-msgid "Min IDR Frame Interval"
-msgstr "?? IDR ??????"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1412
-msgid "Set minimum frame interval between IDR frames. Defines the minimum amount a frame can be reused and referenced by other frames before a new IDR frame is established."
-msgstr "??? IDR ?????????????????????????????????????????????????"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1421
-msgid "Set maximum frame interval between IDR frames. Defines the maximum amount a frame can be reused and referenced by other frames before a new IDR frame is established."
-msgstr "??? IDR ?????????????????????????????????????????????????"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1424
-msgid "Max IDR Frame Interval"
-msgstr "?? IDR ??????"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1431
-msgid "<b>More Rate Settings</b>"
-msgstr "<b>??????</b>"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1451
-msgid "VBV Buffer Size"
-msgstr "VBV ????"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1458
-msgid "Initial VBV Buffer (%)"
-msgstr "?? VBV ?? (%)"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1465
-msgid "Maximum Local Bitrate"
-msgstr "????????"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1496
-msgid "<b>Video Buffer Verifier</b>"
-msgstr "<b>???????</b>"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1529
-msgid "Bitrate Variance"
-msgstr "?????"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1542
-msgid "Allowed variance of average bitrate. Lower values mean less variance. Higher values mean more variance."
-msgstr "???????????????????????????????????"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1551
-msgid "Allowed variance of average quantizer or quality. Lower values mean less variance. Higher values mean more variance. Note that 0 means constant quality while 1 means constant fluctuation. Recommended 0.6."
-msgstr "??????????????????????????????????????????0???????????1??????????? 0.6?"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1560
-msgid "Reduced fluctuations in Quantizer (before curve compression)"
-msgstr "??????? (???????)"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1571
-msgid "Quantizer Compression"
-msgstr "?????"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1578
-msgid "Temp. Blur of Est. Frame Complexity"
-msgstr "?????????????????"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1585
-msgid "Temp. Blur of Quant. after CC"
-msgstr "??????????????????"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1592
-msgid "<b>Misc</b>"
-msgstr "<b>??</b>"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1618
-msgid "Quantization factors used between I and P-frames"
-msgstr "I-??? P-?? ??????????"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1627
-msgid "Quantization used between P and B-frames"
-msgstr "P-??? B-??????????"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1636
-msgid "Quantization difference between chroma (color) and luma (brightness)"
-msgstr "??? (??) ? ?? (??)?????????"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1639
-msgid "Factor between I and P-frame Quants"
-msgstr "I-??? P-?????????"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1646
-msgid "Factor between P and B-frame Quants"
-msgstr "P-??? B-?????????"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1653
-msgid "Chroma QP Offset"
-msgstr "?? QP ???"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1660
-msgid "<b>Quantizers</b>"
-msgstr "<b>???</b>"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1678
-msgid "Flat Matrix"
-msgstr "????"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1685
-msgid "JVT Matrix"
-msgstr "JVT ??"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1695
-msgid "Custom Matrix"
-msgstr "????"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1705
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1135
-msgid "Open CQM file"
-msgstr "?? CQM ?"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1713
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1143
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1575
-msgid "Edit Custom Matrix"
-msgstr "??????"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1716
-msgid "Edit loaded custom quantization matrix file"
-msgstr "??????????????"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1718
-msgid "<b>Quantization Matrices</b>"
-msgstr "<b>??????</b>"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1723
-msgid "More"
-msgstr "??"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1731
-msgid "_Defaults"
-msgstr "??(_D)"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_resize.cpp:333
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_resize.cpp:318
+#: plugins/ADM_videoFilters/AvisynthResize/gtk/gtk_resize.cpp:315
+#: plugins/ADM_videoFilters/MplayerResize/gtk/gtk_resize.cpp:315
 msgid " Width "
 msgstr "?"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_resize.cpp:340
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_resize.cpp:325
+#: plugins/ADM_videoFilters/AvisynthResize/gtk/gtk_resize.cpp:322
+#: plugins/ADM_videoFilters/MplayerResize/gtk/gtk_resize.cpp:322
 msgid " Height "
 msgstr "?"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_resize.cpp:363
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_resize.cpp:348
+#: plugins/ADM_videoFilters/AvisynthResize/gtk/gtk_resize.cpp:345
+#: plugins/ADM_videoFilters/MplayerResize/gtk/gtk_resize.cpp:345
 msgid "Source :"
 msgstr "?? :"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_resize.cpp:369
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_resize.cpp:354
+#: plugins/ADM_videoFilters/AvisynthResize/gtk/gtk_resize.cpp:351
+#: plugins/ADM_videoFilters/MplayerResize/gtk/gtk_resize.cpp:351
 msgid "Destination"
 msgstr "???"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_resize.cpp:419
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_resize.cpp:368
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_resize.cpp:390
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_resizeWiz.cpp:42
+#: avidemux/ADM_libraries/ADM_utilities/avidemutils.cpp:326
+#: plugins/ADM_videoFilters/AvisynthResize/gtk/gtk_resize.cpp:365
+#: plugins/ADM_videoFilters/AvisynthResize/gtk/gtk_resize.cpp:387
+#: plugins/ADM_videoFilters/MplayerResize/gtk/gtk_resize.cpp:365
+#: plugins/ADM_videoFilters/MplayerResize/gtk/gtk_resize.cpp:387
+msgid "1:1"
+msgstr "1:1"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_resize.cpp:372
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_resize.cpp:394
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_SVCD.cpp:42
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp:42
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_resizeWiz.cpp:43
+#: plugins/ADM_videoFilters/AvisynthResize/gtk/gtk_resize.cpp:369
+#: plugins/ADM_videoFilters/AvisynthResize/gtk/gtk_resize.cpp:391
+#: plugins/ADM_videoFilters/MplayerResize/gtk/gtk_resize.cpp:369
+#: plugins/ADM_videoFilters/MplayerResize/gtk/gtk_resize.cpp:391
+msgid "4:3"
+msgstr "4:3"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_resize.cpp:376
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_resize.cpp:398
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_SVCD.cpp:43
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp:43
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_resizeWiz.cpp:44
+#: plugins/ADM_videoFilters/AvisynthResize/gtk/gtk_resize.cpp:373
+#: plugins/ADM_videoFilters/AvisynthResize/gtk/gtk_resize.cpp:395
+#: plugins/ADM_videoFilters/MplayerResize/gtk/gtk_resize.cpp:373
+#: plugins/ADM_videoFilters/MplayerResize/gtk/gtk_resize.cpp:395
+msgid "16:9"
+msgstr "16:9"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_resize.cpp:404
+#: plugins/ADM_videoFilters/AvisynthResize/gtk/gtk_resize.cpp:401
+#: plugins/ADM_videoFilters/MplayerResize/gtk/gtk_resize.cpp:401
 msgid " Error X:"
 msgstr "?? X:"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_resize.cpp:433
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_resize.cpp:418
+#: plugins/ADM_videoFilters/AvisynthResize/gtk/gtk_resize.cpp:415
+#: plugins/ADM_videoFilters/MplayerResize/gtk/gtk_resize.cpp:415
 msgid " Error Y:"
 msgstr "?? Y:"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_resize.cpp:447
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_resize.cpp:432
+#: plugins/ADM_videoFilters/AvisynthResize/gtk/gtk_resize.cpp:429
+#: plugins/ADM_videoFilters/MplayerResize/gtk/gtk_resize.cpp:429
 msgid "16 round up"
 msgstr "16 ??"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_resize.cpp:461
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_resize.cpp:446
+#: plugins/ADM_videoFilters/AvisynthResize/gtk/gtk_resize.cpp:443
+#: plugins/ADM_videoFilters/MplayerResize/gtk/gtk_resize.cpp:443
 msgid "Bilinear"
 msgstr "???"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_resize.cpp:465
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_resize.cpp:450
+#: plugins/ADM_videoFilters/AvisynthResize/gtk/gtk_resize.cpp:447
+#: plugins/ADM_videoFilters/MplayerResize/gtk/gtk_resize.cpp:447
 msgid "Bicubic"
 msgstr "???"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_resize.cpp:469
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_resize.cpp:454
+#: plugins/ADM_videoFilters/AvisynthResize/gtk/gtk_resize.cpp:451
+#: plugins/ADM_videoFilters/MplayerResize/gtk/gtk_resize.cpp:451
 msgid "Lanczos3"
 msgstr "Lanczos3"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_equalizer.cpp:455
-msgid "Equalizer"
-msgstr "???"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_pipe.cpp:95
-msgid "Pipe to"
-msgstr "???"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_pipe.cpp:104
-msgid "Application path/name (/usr/bin/sox...)"
-msgstr "???????/?? (/usr/bin/sox...)"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_pipe.cpp:113
-msgid "Full parameter line"
-msgstr "?????"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs.cpp:25
-msgid "Ready"
-msgstr "??"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs.cpp:25
-msgid "Succeeded"
-msgstr "??"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs.cpp:25
-#: avidemux/gtk_gui.cpp:2292
-msgid "Failed"
-msgstr "??"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs.cpp:25
-msgid "Deleted"
-msgstr "??"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs.cpp:25
-msgid "Running"
-msgstr "???"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs.cpp:104
-msgid "  Job Name  "
-msgstr "  ????  "
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs.cpp:109
-msgid "Started at"
-msgstr "???"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs.cpp:113
-msgid "Finished at"
-msgstr "???"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs.cpp:140
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs.cpp:178
-msgid "Sure!"
-msgstr "???"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs.cpp:140
-msgid "Delete ALL jobs"
-msgstr "??????"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs.cpp:140
-msgid "Are you sure you want to delete all jobs ?"
-msgstr "?????????"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs.cpp:178
-msgid "Delete job"
-msgstr "????"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs.cpp:178
-#, c-format
-msgid "Are you sure you want to delete %s job ?"
-msgstr "????? %s ?? ?"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs.cpp:187
-msgid "Unknown event"
-msgstr "?????"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs.cpp:268
-msgid "Jobs"
-msgstr "??"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs.cpp:294
-msgid "Delete All Jobs"
-msgstr "??????"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs.cpp:299
-msgid "Delete Job"
-msgstr "????"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs.cpp:304
-msgid "Run all jobs"
-msgstr "??????"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs.cpp:309
-msgid "Run Job"
-msgstr "????"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_ocr.cpp:61
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_ocr.cpp:45
 msgid "Mini OCR"
 msgstr "Mini OCR"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_ocr.cpp:86
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_ocr.cpp:70
 msgid "0:0:0"
 msgstr "0:0:0"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_ocr.cpp:100
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_ocr.cpp:84
 msgid "# of lines"
 msgstr "?? #"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_ocr.cpp:108
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_ocr.cpp:92
 msgid "TimeCode:"
 msgstr "???:"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_ocr.cpp:116
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_ocr.cpp:100
 msgid "# of Glyphs :"
 msgstr "??? #:"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_ocr.cpp:124
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_ocr.cpp:108
 msgid "<b>Stats</b>"
 msgstr "<b>??</b>"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_ocr.cpp:141
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_ocr.cpp:125
 msgid "Current Glyph"
 msgstr "????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_ocr.cpp:154
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_ocr.cpp:138
 msgid " Text:"
 msgstr "??:"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_ocr.cpp:176
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_ocr.cpp:145
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:242
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:263
+#: plugins/ADM_videoFilters/ASharp/gtk/DIA_asharp.cpp:246
+msgid " "
+msgstr " "
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_ocr.cpp:160
 msgid "_Calibrate"
 msgstr "??(_C)"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_ocr.cpp:180
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_ocr.cpp:164
 msgid "If the glyphs are too thin, enter a lower value here"
 msgstr "?????????????????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_ocr.cpp:182
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_ocr.cpp:166
 msgid "S_kip all"
 msgstr "????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_ocr.cpp:186
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_ocr.cpp:170
 msgid "Skip the whole image"
 msgstr "??????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_ocr.cpp:188
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_ocr.cpp:172
 msgid "Skip Glyph"
 msgstr "????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_ocr.cpp:192
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_ocr.cpp:176
 msgid "Skip the current letter/glyph"
 msgstr "???? ??/??"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_ocr.cpp:194
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_ocr.cpp:178
 msgid "_Ignore glyph"
 msgstr "????(_I)"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_ocr.cpp:198
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_ocr.cpp:182
 msgid "This glyph will be ignored from now on"
 msgstr "?????????????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_ocr.cpp:200
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_ocr.cpp:184
 msgid "Ok"
 msgstr "??"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_ocr.cpp:214
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_ocr.cpp:198
 msgid "<b>Bitmap</b>"
 msgstr "<b>???</b>"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_acodec.cpp:141
-msgid "AudioCodec"
-msgstr "?????"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:404
+msgid "<b>Target</b>"
+msgstr "<b>??</b>"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_acodec.cpp:166
-msgid "Configure codec"
-msgstr "?????"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:431
+msgid "Duration:"
+msgstr "????:"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_quota.cpp:90
-msgid "Filesystem full / quota exceeded"
-msgstr "?????? / ?????"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:437
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:789
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_idx_pg.cpp:186
+msgid "00:00:00"
+msgstr "00:00:00"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_quota.cpp:133
-msgid "Ignore"
-msgstr "??"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:451
+msgid "_Medium:"
+msgstr "??(_M):"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_quota.cpp:155
-msgid "Retry"
-msgstr "??"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:462
+msgid "_Format:"
+msgstr "??(_F):"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_particle.cpp:274
-msgid "Particle Analysis Configuration"
-msgstr "??????"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:473
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:531
+msgid "Total size (custom)"
+msgstr "???(??)"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_partial.cpp:142
-msgid "Start frame for partial :"
-msgstr "???????:"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:483
+msgid "_Custom size (MB):"
+msgstr "???? (MB)(_C):"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_partial.cpp:149
-msgid "End frame for partial :"
-msgstr "???????:"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:497
+msgid "Output container format"
+msgstr "??????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_partial.cpp:172
-msgid "Configure partialized filter"
-msgstr "???????"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:524
+msgid "Total size"
+msgstr "???"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:163
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:185
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:528
+msgid "1x 80 min. CD"
+msgstr "1x 80 ?? CD"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:533
+msgid "2x 80 min. CD"
+msgstr "2x 80 ?? CD"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:537
+msgid "1x 74 min. CD"
+msgstr "1x 74 ?? CD"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:541
+msgid "2x 74 min. CD"
+msgstr "2x 74 ?? CD"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:545
+msgid "DVD5"
+msgstr "DVD5"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:561
+msgid "Track _1:"
+msgstr "?? _1:"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:569
+msgid "Audio bitrate in kb/s for track 1 (0 for no audio)"
+msgstr "?? 1  ?????? kb/s (0 ????)"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:576
+msgid "Track _2: "
+msgstr "?? _2: "
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:584
+msgid "Audio bitrate in kb/s for track 2 (optional)"
+msgstr "?? 2  ?????? kb/s (????)"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:588
+msgid "<b>Audio Bitrate</b>"
+msgstr "<b>?????</b>"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:614
+msgid "Audio size (MB):"
+msgstr "???? (MB):"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:630
+msgid "Video size (MB):"
+msgstr "???? (MB):"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:646
+msgid "Total size (MB):"
+msgstr "??? (MB):"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:668
+msgid "Video bitrate:"
+msgstr "?????:"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:676
+msgid "Bits per pixel:"
+msgstr "???????:"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:692
+msgid "0.0"
+msgstr "0.0"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:700
+msgid "<b>Result</b>"
+msgstr "<b>??</b>"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:148
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:170
 msgid "Privileges Required"
 msgstr "??????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:163
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:185
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:148
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:170
 msgid "Root privileges are required to perform this operation."
 msgstr "?? Root ??????????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:206
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:191
 msgid "Shutting down"
 msgstr "???"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:383
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_working.cpp:150
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:391
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:398
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:405
 #, c-format
-msgid "%d%%"
-msgstr "%d%%"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:406
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:413
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:420
-#, c-format
 msgid "%lu MB"
 msgstr "%lu MB"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:516
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:501
 msgid "Encoding..."
 msgstr "???..."
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:547
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:532
 msgid "<b>Phase:</b>"
 msgstr "<b>??:</b>"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:562
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:547
 msgid "<b>Video Codec:</b>"
-msgstr "<b>?????:</b>"
+msgstr "<b>??????:</b>"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:577
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:562
 msgid "<b>Audio Codec:</b>"
-msgstr "<b>?????:</b>"
+msgstr "<b>??????:</b>"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:592
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:577
 msgid "<b>Container:</b>"
 msgstr "<b>??:</b>"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:600
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:797
-#: avidemux/ADM_libraries/ADM_utilities/avidemutils.cpp:334
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:585
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:782
+#: avidemux/ADM_libraries/ADM_utilities/avidemutils.cpp:328
 msgid "Unknown"
 msgstr "??"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:624
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:609
 msgid "<b>Processed Frames:</b>"
 msgstr "<b>???????</b>"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:632
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:617
 msgid "<b>Total Frames:</b>"
 msgstr "<b>????:</b>"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:640
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:625
 msgid "<b>Quantiser:</b>"
-msgstr "<b>???:</b>"
+msgstr "<b>???:</b>"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:648
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:633
 msgid "<b>Average Bitrate:</b>"
 msgstr "<b>?????:</b>"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:656
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:641
 msgid "0 kB/s"
 msgstr "0 kB/s"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:701
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:686
 msgid "<b>Video Size:</b>"
 msgstr "<b>????:</b>"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:709
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:694
 msgid "<b>Audio Size:</b>"
 msgstr "<b>????:</b>"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:717
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:702
 msgid "<b>Total Size:</b>"
 msgstr "<b>???:</b>"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:725
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:733
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:741
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:710
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:718
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:726
 msgid "0 MB"
 msgstr "0 MB"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:766
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_working.cpp:244
-msgid "<b>Elapsed:</b>"
-msgstr "<b>????:</b>"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:774
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:759
 msgid "<b>Time Remaining:</b>"
 msgstr "<b>????:</b>"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:782
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:767
 msgid "<b>Frames/sec:</b>"
 msgstr "<b>??/?:</b>"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:828
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:813
 msgid "Shut down computer when finished"
 msgstr "???????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:836
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:821
 msgid "Priority:"
 msgstr "???:"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:846
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:830
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:223
+msgid "High"
+msgstr "?"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:831
 msgid "Above Normal"
 msgstr "????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:848
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:833
 msgid "Below Normal"
 msgstr "????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:886
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:834
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:227
+msgid "Low"
+msgstr "?"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:871
 msgid "Pause / Abort"
 msgstr "?? / ??"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_hue.cpp:78
-msgid "Hue"
-msgstr "??"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs.cpp:8
+msgid "Ready"
+msgstr "??"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_hue.cpp:175
-msgid "Hue/Saturation"
-msgstr "??/???"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs.cpp:8
+msgid "Succeeded"
+msgstr "??"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_hue.cpp:189
-msgid "<b>Hue:</b>"
-msgstr "<b>??:</b>"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs.cpp:8
+msgid "Deleted"
+msgstr "??"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_hue.cpp:197
-msgid "<b>Saturation:</b>"
-msgstr "<b>???:</b>"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs.cpp:8
+msgid "Running"
+msgstr "???"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_pause.cpp:98
-msgid "Paused"
-msgstr "???"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs.cpp:87
+msgid "  Job Name  "
+msgstr "  ????  "
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_pause.cpp:114
-msgid ""
-"<b>Encoding is paused.</b>\n"
-"\n"
-"You can either resume or Abort it."
-msgstr ""
-"<b>??????</b>\n"
-"\n"
-"?????????"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs.cpp:92
+msgid "Started at"
+msgstr "???"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_pause.cpp:141
-msgid "Abort"
-msgstr "??"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs.cpp:96
+msgid "Finished at"
+msgstr "???"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_pause.cpp:163
-msgid "Resume"
-msgstr "??"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs.cpp:123
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs.cpp:161
+msgid "Sure!"
+msgstr "???"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_vcodec.cpp:109
-msgid "Video encoder"
-msgstr "?????"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs.cpp:123
+msgid "Delete ALL jobs"
+msgstr "??????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_vcodec.cpp:123
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1084
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1124
-msgid "Configure"
-msgstr "??"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs.cpp:123
+msgid "Are you sure you want to delete all jobs ?"
+msgstr "?????????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_busy.cpp:120
-msgid "Busy"
-msgstr "??"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs.cpp:161
+msgid "Delete job"
+msgstr "????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_chromaShift.cpp:72
-msgid "Chroma Shift"
-msgstr "????"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_chromaShift.cpp:189
-msgid "ChromaShift"
-msgstr "????"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_chromaShift.cpp:203
-msgid "U Shift :"
-msgstr "U ??:"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_chromaShift.cpp:210
-msgid "V Shift :"
-msgstr "V ??:"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_chromaShift.cpp:252
-msgid "<b>Preview</b>"
-msgstr "<b>??</b>"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:40
-msgid "No"
-msgstr "?"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:40
-msgid "Yes"
-msgstr "?"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:60
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs.cpp:161
 #, c-format
-msgid "%lu x %lu"
-msgstr "%lu x %lu"
+msgid "Are you sure you want to delete %s job ?"
+msgstr "????? %s ?? ?"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:63
-#, c-format
-msgid "%2.3f fps"
-msgstr "%2.3f fps"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs.cpp:170
+msgid "Unknown event"
+msgstr "?????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:66
-#, c-format
-msgid "%ld frames"
-msgstr "%ld ??"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs.cpp:251
+msgid "Jobs"
+msgstr "??"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:76
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:126
-#, c-format
-msgid "%02d:%02d:%02d.%03d"
-msgstr "%02d:%02d:%02d.%03d"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs.cpp:277
+msgid "Delete All Jobs"
+msgstr "??????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:89
-#, c-format
-msgid "%s (%u:%u)"
-msgstr "%s (%u:%u)"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs.cpp:282
+msgid "Delete Job"
+msgstr "????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:111
-#, c-format
-msgid "%lu Hz"
-msgstr "%lu Hz"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs.cpp:287
+msgid "Run all jobs"
+msgstr "??????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:113
-#, c-format
-msgid "%lu Bps / %lu kbps"
-msgstr "%lu Bps / %lu kbps"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs.cpp:292
+msgid "Run Job"
+msgstr "????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:129
-#, c-format
-msgid "%.2f MB"
-msgstr "%.2f MB"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_vobsub.cpp:81
+msgid "none"
+msgstr "?"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:198
-msgid "Properties"
-msgstr "??"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_vobsub.cpp:90
+msgid "Select .idx file"
+msgstr "?? .idx ?"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:227
-msgid "Frame Rate:"
-msgstr "???:"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_vobsub.cpp:101
+msgid "Wrong VobSub parametering"
+msgstr "??? VobSub ??"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:234
-msgid "Frame Count:"
-msgstr "???:"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_vobsub.cpp:101
+msgid "The idx/sub file does not set."
+msgstr "? idx/sub ?????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:241
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:419
-msgid "Total Duration:"
-msgstr "?????:"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_vobsub.cpp:188
+msgid "VobSub Settings"
+msgstr "VobSub ??"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:262
-msgid "Image Size:"
-msgstr "????:"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_vobsub.cpp:205
+msgid "Select .idx"
+msgstr "?? .idx"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:283
-msgid "Codec 4CC:"
-msgstr "??? 4CC:"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_vobsub.cpp:219
+msgid "Select Language :"
+msgstr "???? :"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:297
-msgid "Aspect Ratio:"
-msgstr "????:"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_vobsub.cpp:233
+msgid "Select Sub"
+msgstr "?? Sub"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:311
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1064
-msgid "<b>Video</b>"
-msgstr "<b>??</b>"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_vobsub.cpp:246
+msgid "Extra Shrink Factor :"
+msgstr "???????:"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:330
-msgid "Global Motion Compensation:"
-msgstr "??????:"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_vobsub.cpp:261
+msgid "Shift (ms) :"
+msgstr "?? (ms) :"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:344
-msgid "Packed Bitstream:"
-msgstr "???????:"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_vobsub.cpp:275
+msgid "Extra Settings"
+msgstr "?????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:358
-msgid "Quarter Pixel:"
-msgstr "??????:"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:372
-msgid "<b>Extra Video Properties</b>"
-msgstr "<b>???????</b>"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:391
-msgid "Codec:"
-msgstr "???:"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:398
-msgid "Channels:"
-msgstr "??:"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:405
-msgid "Bitrate:"
-msgstr "???:"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:412
-msgid "Frequency:"
-msgstr "??:"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:461
-msgid "File Size:"
-msgstr "????:"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:475
-msgid "Variable Bitrate:"
-msgstr "?????:"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:489
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1104
-msgid "<b>Audio</b>"
-msgstr "<b>??</b>"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_crop.cpp:252
-#: avidemux/ADM_videoFilter/ADM_vidCrop.cpp:193
-msgid "Crop Settings"
-msgstr "????"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_crop.cpp:277
-msgid "Crop Left:"
-msgstr "????:"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_crop.cpp:284
-msgid "Crop Right:"
-msgstr "????:"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_crop.cpp:291
-msgid "Crop Top:"
-msgstr "????:"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_crop.cpp:298
-msgid "Crop Bottom:"
-msgstr "????:"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_crop.cpp:341
-msgid "Auto Crop"
-msgstr "????"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_about.cpp:46
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_about.cpp:33
 msgid "and all the others."
-msgstr "??????"
+msgstr "???????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_about.cpp:69
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_about.cpp:56
 msgid "Multi-platform Video Editor"
 msgstr "?????????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_about.cpp:70
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_about.cpp:57
 msgid ""
 "Avidemux is free software; you can redistribute it and/or modify it\n"
 "under the terms of the GNU General Public License version 2\n"
@@ -4581,9 +3513,9 @@
 "library.  If this is what you want to do, use the GNU Library General\n"
 "Public License instead of this License."
 msgstr ""
-"Avidemux ??????????????????/(Free Software Foundation)/\n"
+"Avidemux ??????????????????(Free Software Foundation)\n"
 "??? GNU ????????? (GNU General Public License) ??????\n"
-"??????????\n"
+"?(?)?????????\n"
 "\n"
 "\t\t    GNU GENERAL PUBLIC LICENSE\n"
 "\t\t       Version 2, June 1991\n"
@@ -4920,3936 +3852,4633 @@
 "  <signature of Ty Coon>, 1 April 1989\n"
 "  Ty Coon, President of Vice\n"
 "\n"
-"This General Public License does not permit incorporating your program into\n"
-"proprietary programs.  If your program is a subroutine library, you may\n"
-"consider it more useful to permit linking proprietary applications with the\n"
-"library.  If this is what you want to do, use the GNU Library General\n"
-"Public License instead of this License."
+"??????????????????????????????????\n"
+"??????????????????????????????????\n"
+"????????????????? GNU ??????????????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_about.cpp:75
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_about.cpp:62
 msgid "translator-credits"
 msgstr "??? (ziyawu at gmail.com)"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_SwissArmyKnife.cpp:511
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:388
-msgid "Swiss Army Knife Configuration"
-msgstr "??????"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_idx_pg.cpp:39
+msgid "Continue indexing"
+msgstr "????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:114
-msgid "Select Xvid matrix file to load"
-msgstr "?? Xvid ???????"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_idx_pg.cpp:39
+msgid "Abort Requested"
+msgstr "?????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:126
-msgid "Error Loading"
-msgstr "????"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_idx_pg.cpp:39
+msgid "Do you want to abort indexing ?"
+msgstr "????????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:126
-msgid "Error loadind the custom matrix file."
-msgstr "????????????"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_idx_pg.cpp:141
+msgid "Indexing..."
+msgstr "???..."
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:144
-msgid "Matrix Loaded"
-msgstr "?????"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_idx_pg.cpp:162
+msgid "Time left :"
+msgstr "????:"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:144
-msgid "The custom matrix file has been successfully loaded."
-msgstr "???????????"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_idx_pg.cpp:170
+msgid "Timecode :"
+msgstr "???:"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:181
-msgid "Size (MBytes):"
-msgstr "?? (MBytes):"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_idx_pg.cpp:178
+msgid "Nb pictures seen :"
+msgstr "??????:"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:187
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:371
-msgid "Average bitrate (kb/s):"
-msgstr "????? (kb/s):"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_idx_pg.cpp:202
+msgid "Indexing :"
+msgstr "??:"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:356
-msgid "Target bitrate (kb/s):"
-msgstr "?????? (kb/s):"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_idx_pg.cpp:210
+msgid "/dev/null"
+msgstr "/dev/null"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:364
-msgid "Target video size (MB):"
-msgstr "?????? (MBytes):"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:27
+msgid "No"
+msgstr "?"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:486
-msgid "Select Custom Matrix File to write"
-msgstr "????????????"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:27
+msgid "Yes"
+msgstr "?"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:491
-msgid "Error Writing"
-msgstr "????"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:47
+#, c-format
+msgid "%lu x %lu"
+msgstr "%lu x %lu"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:491
-msgid "Error writing the custom matrix file."
-msgstr "???????????"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:50
+#, c-format
+msgid "%2.3f fps"
+msgstr "%2.3f fps"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:707
-msgid "XviD encoding options"
-msgstr "XviD ????"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:53
+#, c-format
+msgid "%ld frames"
+msgstr "%ld ??"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:741
-msgid "Encoding type:"
-msgstr "????:"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:63
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:113
+#, c-format
+msgid "%02d:%02d:%02d.%03d"
+msgstr "%02d:%02d:%02d.%03d"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:746
-msgid "Bitrate (kb/s):"
-msgstr "??? (kb/s):"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:76
+#, c-format
+msgid "%s (%u:%u)"
+msgstr "%s (%u:%u)"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:751
-msgid "Quantizer:"
-msgstr "???:"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:87
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:89
+#: plugins/ADM_audioEncoders/twolame/audioencoder_twolame.cpp:212
+#: plugins/ADM_audioEncoders/lame/audioencoder_lame.cpp:286
+msgid "Mono"
+msgstr "??"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:763
-msgid "Select 1-pass or 2-pass encoding"
-msgstr "?? 1-pass ? 2-pass ??"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:90
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:90
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:277
+#: plugins/ADM_audioEncoders/twolame/audioencoder_twolame.cpp:210
+#: plugins/ADM_audioEncoders/lame/audioencoder_lame.cpp:284
+msgid "Stereo"
+msgstr "???"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:767
-msgid "Single Pass - Bitrate"
-msgstr "???? - ???"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:98
+#, c-format
+msgid "%lu Hz"
+msgstr "%lu Hz"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:771
-msgid "Single Pass - Quantizer"
-msgstr "???? - ???"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:100
+#, c-format
+msgid "%lu Bps / %lu kbps"
+msgstr "%lu Bps / %lu kbps"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:783
-msgid "Same Quantizer as Input"
-msgstr "??????????"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:116
+#, c-format
+msgid "%.2f MB"
+msgstr "%.2f MB"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:792
-msgid "Target video bitrate"
-msgstr "???????"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:185
+msgid "Properties"
+msgstr "??"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:799
-msgid "Constant quantizer - each frame will get the same compression"
-msgstr "????? - ???????????"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:214
+msgid "Frame Rate:"
+msgstr "???:"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:801
-msgid "Variable bitrate mode"
-msgstr "???????"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:221
+msgid "Frame Count:"
+msgstr "???:"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:813
-msgid "_Interlaced"
-msgstr "??(_I)"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:228
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:406
+msgid "Total Duration:"
+msgstr "?????:"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:816
-msgid "Enables interlaced frame support - use only if your source contains interlacing artifacts (i.e. fields instead of progressive frames)"
-msgstr "?????????? - ?????????????????(???????????)"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:249
+msgid "Image Size:"
+msgstr "????:"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:818
-msgid "_Greyscale"
-msgstr "??(_G)"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:270
+msgid "Codec 4CC:"
+msgstr "???? 4CC:"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:821
-msgid "Encode in black & white"
-msgstr "??????"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:284
+msgid "Aspect Ratio:"
+msgstr "????:"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:827
-msgid "Ca_rtoon mode"
-msgstr "????"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:317
+msgid "Global Motion Compensation:"
+msgstr "??????:"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:830
-msgid "Enables special motion estimation features for cartoons/anime"
-msgstr "??? ??/?? ????????"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:331
+msgid "Packed Bitstream:"
+msgstr "???????:"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:832
-msgid "C_hroma optimizer"
-msgstr "?????(_H)"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:345
+msgid "Quarter Pixel:"
+msgstr "1/4 ??:"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:835
-msgid "Enables a chroma optimizer prefilter"
-msgstr "?????????????"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:359
+msgid "<b>Extra Video Properties</b>"
+msgstr "<b>???????</b>"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:841
-msgid "Turbo Mode"
-msgstr "??????"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:378
+msgid "Codec:"
+msgstr "????:"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:844
-msgid "Enables fast 1st pass encoding"
-msgstr "??????????"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:385
+msgid "Channels:"
+msgstr "??:"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:846
-msgid "Packed bitstream"
-msgstr "???????"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:392
+msgid "Bitrate:"
+msgstr "???:"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:849
-msgid "Enables Divx like packed vop, DO NOT SET, it is ugly"
-msgstr "?? Divx ????? VOP???????????"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:399
+msgid "Frequency:"
+msgstr "??:"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:851
-msgid "Main"
-msgstr "??"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:448
+msgid "File Size:"
+msgstr "????:"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:870
-msgid "Motion search precision:"
-msgstr "???????:"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:462
+msgid "Variable Bitrate:"
+msgstr "?????:"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:874
-msgid "VHQ mode:"
-msgstr "VHQ ??:"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_acodec.cpp:119
+msgid "AudioCodec"
+msgstr "??????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:887
-msgid "Higher settings give higher quality results, at the cost of slower encoding"
-msgstr "?????????????????????????"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_acodec.cpp:147
+msgid "Configure codec"
+msgstr "??????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:891
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid.cpp:361
-msgid "0 - None"
-msgstr "0 - ?"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_ocr/adm_editglyph.cpp:43
+msgid "Select GlyphFile to edit"
+msgstr "?????????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:895
-msgid "1 - Very low"
-msgstr "1 - ???"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_ocr/adm_editglyph.cpp:111
+msgid "String"
+msgstr "??"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:899
-msgid "2 - Low"
-msgstr "2 - ?"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_ocr/adm_editglyph.cpp:113
+msgid "Search string"
+msgstr "????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:903
-msgid "3 - Medium"
-msgstr "3 - ??"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_ocr/adm_editglyph.cpp:139
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_ocr/adm_editglyph.cpp:182
+msgid "End reached"
+msgstr "?????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:907
-msgid "4 - High"
-msgstr "4 - ?"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_ocr/adm_editglyph.cpp:139
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_ocr/adm_editglyph.cpp:182
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_ocr/adm_editglyph.cpp:206
+msgid "No more glyphs"
+msgstr "??????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:911
-msgid "5 - Very high"
-msgstr "5 - ???"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_ocr/adm_editglyph.cpp:206
+msgid "Head reached"
+msgstr "???????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:915
-msgid "6 - Ultra high"
-msgstr "6 - ??"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_ocr/adm_editglyph.cpp:334
+msgid "dialog1"
+msgstr "??1"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:924
-msgid "VHQ enables an additional search process to increase quality"
-msgstr "VHQ ????????????????"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_ocr/adm_editglyph.cpp:386
+msgid "Prev. Empty"
+msgstr "??????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:928
-msgid "0 - Off"
-msgstr "0 - ??"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_ocr/adm_editglyph.cpp:408
+msgid "Next Empty"
+msgstr "??????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:932
-msgid "1 - Mode decision"
-msgstr "1 - ????"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_ocr/adm_ocr.cpp:156
+msgid "Sure ?"
+msgstr "???"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:936
-msgid "2 - Limited search"
-msgstr "2 - ????"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp:126
+msgid "Video Codecs"
+msgstr "??????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:940
-msgid "3 - Medium search"
-msgstr "3 - ????"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp:128
+msgid "x264"
+msgstr "x264"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:944
-msgid "4 - Wide search"
-msgstr "4 - ????"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp:136
+msgid "aRts"
+msgstr "aRts"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:954
-msgid "C_hroma motion"
-msgstr "????(_H)"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp:137
+msgid "ESD"
+msgstr "ESD"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:957
-msgid "Use chroma information to estimate motion"
-msgstr "???????????"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp:138
+msgid "Fontconfig"
+msgstr "Fontconfig"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:959
-msgid "_4MV"
-msgstr "4MV"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp:139
+msgid "FreeType 2"
+msgstr "FreeType 2"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:962
-msgid "Use 4 motion vectors per macroblock, might give better compression"
-msgstr "????????4???????????????"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp:140
+msgid "Gettext"
+msgstr "Gettext"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:964
-msgid "HQ _AC"
-msgstr "HQ _AC"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp:141
+msgid "ALSA"
+msgstr "ALSA"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:967
-msgid "Enable a better prediction of AC component. Turns on Lumi masking - applies more compression to dark/light areas that the eye cannot notice easily"
-msgstr "??????? AC ??????? Lumi  ??  - ? ?/? ?(?????????)??????"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp:142
+msgid "OSS"
+msgstr "OSS"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:973
-msgid "I-frame interval - Min:"
-msgstr "I-???? - ???:"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp:143
+msgid "SDL"
+msgstr "SDL"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:981
-msgid "Minimum space between I-frames, 1 will disable forced I-frame spacing"
-msgstr "I-??????????1 ?????? I-????"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp:144
+msgid "XVideo"
+msgstr "XVideo"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:983
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1201
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1206
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1211
-msgid "Max:"
-msgstr "??:"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp:146
+msgid "AltiVec"
+msgstr "AltiVec"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:991
-msgid "Maximum number of frames allowed between I-frames"
-msgstr "??? I-??????????"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp:147
+msgid "PowerPC"
+msgstr "PowerPC"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1006
-msgid "Number of B-frames:"
-msgstr "B-?????:"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp:148
+msgid "x86"
+msgstr "x86"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1014
-msgid "Maximum number of sequential B-frames (when set to 0, the original I/P encoder is used)"
-msgstr "??? B-??????? (???? 0??????? I/P ???)"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp:149
+msgid "x86-64"
+msgstr "x86-64"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1020
-msgid "_Qpel"
-msgstr "_Qpel"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp:156
+msgid "Codecs"
+msgstr "????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1023
-msgid "Use Quarter pixel resolution for a more precise motion estimation"
-msgstr "??????????????????????"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp:157
+msgid "Libraries"
+msgstr "???"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1028
-msgid "Global Motion Compensation can save bits on camera pans, zooming and rotation"
-msgstr "???????????????????????????"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp:158
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:362
+msgid "CPU"
+msgstr "CPU"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1030
-msgid "_BVHQ"
-msgstr "_BVHQ"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp:162
+msgid "Built-in Support"
+msgstr "?????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1033
-msgid "Produces nicer-looking B-frames"
-msgstr "???????? B-??"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_mjpeg.cpp:30
+#: plugins/ADM_videoFilters/Decimate/ADM_vidDecDec.cpp:184
+#: plugins/ADM_audioEncoders/vorbis/audioencoder_vorbis.cpp:320
+#: plugins/ADM_audioEncoders/lame/audioencoder_lame.cpp:317
+msgid "_Quality:"
+msgstr "??(_Q):"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1050
-msgid "Get PAR from input video file"
-msgstr "????????? PAR"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_mjpeg.cpp:31
+msgid "_Swap U&V"
+msgstr "?? U&V(_S)"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1056
-msgid "Pixel Width"
-msgstr "???"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_mjpeg.cpp:33
+msgid "MJPEG Configuration"
+msgstr "MJPEG ??"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1067
-msgid "Pixel Height"
-msgstr "???"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_postproc.cpp:21
+#: plugins/ADM_videoFilters/ForcedPP/ADM_vidForcedPP.cpp:44
+msgid "_Filter strength:"
+msgstr "????(_S):"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1068
-msgid "Pixel Aspect Ratio"
-msgstr "??????"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_postproc.cpp:22
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavDecoder.cpp:27
+msgid "_Swap U and V"
+msgstr "?? U ? V (_S)"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1086
-msgid "Quantization type:"
-msgstr "??????:"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_postproc.cpp:32
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:298
+#: plugins/ADM_videoFilters/ForcedPP/ADM_vidForcedPP.cpp:56
+msgid "_Horizontal deblocking"
+msgstr "??????????(_H)"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1090
-msgid "_H.263"
-msgstr "_H.263"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_postproc.cpp:33
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:299
+#: plugins/ADM_videoFilters/ForcedPP/ADM_vidForcedPP.cpp:57
+msgid "_Vertical deblocking"
+msgstr "??????????(_V)"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1093
-msgid "H.263 quantizers smooth the picture (useful at lower bitrates)"
-msgstr "H.263 ???????? (????????)"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_postproc.cpp:34
+#: plugins/ADM_videoFilters/ForcedPP/ADM_vidForcedPP.cpp:58
+msgid "_Deringing"
+msgstr "??????(_D)"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1097
-msgid "_MPEG"
-msgstr "_MPEG"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_postproc.cpp:38
+msgid "Postprocessing"
+msgstr "????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1100
-msgid "MPEG quantizers (slightly slower) produce sharper picture (useful at higher bitrates)"
-msgstr "MPEG ??? (????) ???????? (????????)"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:48
+msgid "_Dynamic range compression"
+msgstr "??????(_D)"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1104
-msgid "_Custom Matrix"
-msgstr "????(_C)"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:50
+msgid "_Time shift (ms):"
+msgstr "???? (ms)(_T):"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1114
-msgid "Load Custom Matrix:  "
-msgstr "??????  "
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:50
+msgid "Time shift value (ms)"
+msgstr "????? (ms)"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1160
-msgid "I-frame quantizer - Min:"
-msgstr "I-????? - ??:"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:58
+msgid "R_esampling (Hz):"
+msgstr "????(_E) (Hz):"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1165
-msgid "P-frame quantizer - Min:"
-msgstr "P-????? - ??:"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:58
+msgid "Resampling frequency (Hz)"
+msgstr "?????? (Hz)"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1170
-msgid "B-frame quantizer - Min:"
-msgstr "B-????? - ??:"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:67
+msgid "Film to PAL"
+msgstr "Film ?? PAL"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1183
-msgid "Minimum quantizer allowed for I-frames"
-msgstr "I-??????????"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:68
+msgid "PAL to Film"
+msgstr "PAL ?? Film"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1189
-msgid "Minimum quantizer allowed for P-frames"
-msgstr "P-??????????"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:71
+msgid "_Frame rate change:"
+msgstr "?????(_F):"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1195
-msgid "Minimum quantizer allowed for B-frames"
-msgstr "B-??????????"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:76
+msgid "Automatic (max -3 dB)"
+msgstr "?? (??? -3 dB)"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1224
-msgid "Maximum quantizer allowed for I-frames"
-msgstr "I-??????????"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:77
+msgid "Manual"
+msgstr "??"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1230
-msgid "Maximum quantizer allowed for P-frames"
-msgstr "P-??????????"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:79
+msgid "_Gain mode:"
+msgstr "????(_G):"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1236
-msgid "Maximum quantizer allowed for B-frames"
-msgstr "B-??????????"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:81
+msgid "G_ain value:"
+msgstr "???(_A):"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1238
-msgid "Quantizer restrictions"
-msgstr "?????"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:83
+#: plugins/ADM_videoFilters/colorYUV/gtk/DIA_coloryuv.cpp:183
+msgid "Gain"
+msgstr "??"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1245
-msgid "Rate distortion quantization, will find optimal encoding for each block"
-msgstr "????????????????????????"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:88
+msgid "No change"
+msgstr "????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1275
-msgid "I-frame boost (%):"
-msgstr "I-???? (%):"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:91
+msgid "Stereo+surround"
+msgstr "??+??"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1280
-msgid "I-frames closer than ... frames..."
-msgstr "I-?????? ... ??..."
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:92
+msgid "Stereo+center"
+msgstr "??+??"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1285
-msgid "...are reduced by (%):"
-msgstr "...??(%):"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:93
+msgid "Stereo+center+surround"
+msgstr "??+??+??"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1290
-msgid "Max overflow improvement (%):"
-msgstr "??????(%):"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:94
+msgid "Stereo front+stereo rear"
+msgstr "????+????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1295
-msgid "Max overflow degradation (%):"
-msgstr "??????(%):"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:95
+msgid "5 channels"
+msgstr "5 ??"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1307
-#, c-format
-msgid "A value of 20 will give 20% more bits to every I-frame"
-msgstr "20 ?????? 2 ??????? I-??"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:96
+msgid "5.1"
+msgstr "5.1"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1313
-msgid "I-frames appearing in the range below this value will be treated as consecutive keyframes"
-msgstr "??????? I-???????????????????????"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:97
+msgid "Dolby Pro Logic"
+msgstr "??????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1318
-msgid "Reduction of bitrate for the first consecutive I-frames. The last I-frame will get treated normally"
-msgstr "?????? I-??????????? I-????????"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:98
+msgid "Dolby Pro Logic II"
+msgstr "?????????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1323
-msgid "How much of the overflow the codec can eat into during undersized sections - larger values will bridge the gap faster"
-msgstr "???????????????????? - ????????????"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:101
+msgid "_Mixer:"
+msgstr "???(_M):"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1328
-msgid "How much of the overflow the codec can eat into during oversized sections - larger values will bridge the gap faster"
-msgstr "???????????????????? - ????????????"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:105
+msgid "Audio Filters"
+msgstr "????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1330
-msgid "Two pass tuning"
-msgstr "??????"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_gototime.cpp:9
+msgid "_Hours:"
+msgstr "??(_H):"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1347
-msgid "High bitrate scenes (%):"
-msgstr "??????(%):"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_gototime.cpp:10
+msgid "_Minutes:"
+msgstr "??(_M):"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1352
-msgid "Low bitrate scenes (%):"
-msgstr "??????(%):"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_gototime.cpp:11
+msgid "_Seconds:"
+msgstr "?(_S):"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1357
-msgid "Overflow control strength (%):"
-msgstr "??????(%):"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_gototime.cpp:14
+msgid "Go to Time"
+msgstr "?????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1369
-msgid "The higher this value, the more bits get taken from frames larger than the average size, and redistributed to others"
-msgstr "????????????????????????????????"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavDecoder.cpp:28
+msgid "Show motion _vectors"
+msgstr "??????(_V)"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1374
-msgid "The higher this value, the more bits get assigned to frames below the average frame size"
-msgstr "?????????????????????????"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavDecoder.cpp:30
+msgid "Decoder Options"
+msgstr "?????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1379
-msgid "0 = default from core (let XviD decide), else overflow payback percent per frame"
-msgstr "0 = ????(? XviD ??)????????????"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:38
+msgid "Full"
+msgstr "??"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1381
-msgid "Curve compression"
-msgstr "?????"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:39
+msgid "Log"
+msgstr "Log"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1385
-msgid "Second Pass"
-msgstr "?????"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:40
+msgid "Phods"
+msgstr "Phods"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1598
-msgid "<b>Intra Matrix</b>"
-msgstr "<b>????</b>"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:41
+msgid "EPZS"
+msgstr "EPZS"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1616
-msgid "<b>Inter Matrix</b>"
-msgstr "<b>????</b>"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:42
+msgid "X1"
+msgstr "X1"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_working.cpp:223
-msgid "Processing"
-msgstr "???"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:46
+msgid "H.263"
+msgstr "H.263"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_working.cpp:259
-msgid "<b>Time remaining:</b>"
-msgstr "<b>????:</b>"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:51
+msgid "MB comparison"
+msgstr "MB ??"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_idx_pg.cpp:51
-msgid "Continue indexing"
-msgstr "????"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:52
+msgid "Fewest bits (vhq)"
+msgstr "????? (vhq)"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_idx_pg.cpp:51
-msgid "Abort Requested"
-msgstr "?????"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:53
+msgid "Rate distortion"
+msgstr "?????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_idx_pg.cpp:51
-msgid "Do you want to abort indexing ?"
-msgstr "????????"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:59
+msgid "Matrices"
+msgstr "??"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_idx_pg.cpp:153
-msgid "Indexing..."
-msgstr "???..."
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:60
+msgid "Mi_n. quantizer:"
+msgstr "?????(_N):"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_idx_pg.cpp:174
-msgid "Time left :"
-msgstr "????:"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:61
+msgid "Ma_x. quantizer:"
+msgstr "?????(_X):"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_idx_pg.cpp:182
-msgid "Timecode :"
-msgstr "???:"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:62
+msgid "Max. quantizer _difference:"
+msgstr "??????(_D):"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_idx_pg.cpp:190
-msgid "Nb pictures seen :"
-msgstr "??????:"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:64
+msgid "4_MV"
+msgstr "4_MV"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_idx_pg.cpp:214
-msgid "Indexing :"
-msgstr "??:"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:65
+msgid "_Trellis quantization"
+msgstr "??????(_T)"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_idx_pg.cpp:222
-msgid "/dev/null"
-msgstr "/dev/null"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:67
+msgid "_Quarter pixel"
+msgstr "1/4 ??(_Q)"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_mpdelogo.cpp:209
-msgid "Mplayer Delogo"
-msgstr "Mplayer Delogo"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:68
+msgid "_GMC"
+msgstr "_GMC"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_mpdelogo.cpp:227
-msgid "X"
-msgstr "X"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:71
+msgid "_Number of B frames:"
+msgstr "B ????(_N):"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_mpdelogo.cpp:234
-msgid "Y"
-msgstr "Y"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:72
+msgid "_Quantization type:"
+msgstr "??????(_Q):"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_mpdelogo.cpp:241
-msgid "W"
-msgstr "W"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:74
+msgid "_Macroblock decision:"
+msgstr "??????(_M):"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_mpdelogo.cpp:248
-msgid "H"
-msgstr "H"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:76
+msgid "_Filesize tolerance (kb):"
+msgstr "????????? (kb):"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_mpdelogo.cpp:255
-msgid "Band"
-msgstr "??"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:78
+msgid "_Quantizer compression:"
+msgstr "????(_Q):"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid.cpp:241
-msgid "Xvid Encoder"
-msgstr "Xvid ???"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:79
+msgid "Quantizer _blur:"
+msgstr "????(_B):"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid.cpp:254
-msgid "Constant Quantizer"
-msgstr "?????"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:84
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:326
+msgid "User Interface"
+msgstr "?????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid.cpp:262
-msgid "Constant Bitrate (kbps)"
-msgstr "?????? (kbps)"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:87
+msgid "Advanced Simple Profile"
+msgstr "????????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid.cpp:270
-msgid "Dual pass (MBytes)"
-msgstr "???? (MBytes)"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:94
+msgid "Motion Estimation"
+msgstr "????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid.cpp:296
-msgid "Basic"
-msgstr "??"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:98
+msgid "Quantization"
+msgstr "????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid.cpp:305
-msgid "Motion Search"
-msgstr "????"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:103
+msgid "Rate Control"
+msgstr "????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid.cpp:321
-msgid "Max I frame interval "
-msgstr "?? I ????"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:106
+msgid "libavcodec MPEG-4 configuration"
+msgstr "libavcodec MPEG-4 ??"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid.cpp:337
-msgid "Min I frame interval"
-msgstr "?? I ????"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_SVCD.cpp:45
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp:45
+msgid "Default"
+msgstr "??"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid.cpp:365
-msgid "1- Very low"
-msgstr "1- ???"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_SVCD.cpp:46
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp:46
+msgid "TMPGEnc"
+msgstr "TMPGEnc"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid.cpp:369
-msgid "2- Low"
-msgstr "2- ?"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_SVCD.cpp:47
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp:47
+msgid "Anime"
+msgstr "??"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid.cpp:373
-msgid "3- Medium"
-msgstr "3- ??"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_SVCD.cpp:48
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp:48
+msgid "KVCD"
+msgstr "KVCD"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid.cpp:377
-msgid "4- High"
-msgstr "4- ?"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_SVCD.cpp:51
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp:51
+msgid "Progressive"
+msgstr "???"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid.cpp:381
-msgid "5- Very High"
-msgstr "5- ???"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_SVCD.cpp:52
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp:52
+msgid "Interlaced TFF"
+msgstr "??? TFF"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid.cpp:385
-msgid "6- Ultra High"
-msgstr "6- ??"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_SVCD.cpp:53
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp:53
+msgid "Interlaced BFF"
+msgstr "??? BFF"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid.cpp:399
-msgid "H263 Quantizer"
-msgstr "H263 ???"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_SVCD.cpp:57
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp:70
+msgid "Aspect _ratio:"
+msgstr "????(_R):"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid.cpp:404
-msgid "MPEG Quantizer"
-msgstr "MPEG ???"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_SVCD.cpp:58
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp:71
+msgid "_Matrices:"
+msgstr "??(_M):"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid.cpp:411
-msgid "Advanced"
-msgstr "??"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_SVCD.cpp:59
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp:72
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flv1.cpp:37
+msgid "_GOP size:"
+msgstr "_GOP ??:"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid.cpp:420
-msgid "Min I Frame Qzer"
-msgstr "??? I ?????"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_SVCD.cpp:60
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp:64
+msgid "Ma_x. bitrate:"
+msgstr "?????:"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid.cpp:428
-msgid "Max I Frame Qzer"
-msgstr "??? I ?????"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_SVCD.cpp:66
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp:78
+msgid "_Interlacing:"
+msgstr "??(_I):"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid.cpp:436
-msgid "Min P Frame Qzer"
-msgstr "??? P ?????"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_SVCD.cpp:70
+msgid "MPEG-2 Configuration"
+msgstr "MPEG-2 ??"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid.cpp:444
-msgid "Max P Frame Qzer"
-msgstr "??? P ?????"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_plugins.cpp:45
+msgid "Audio Plugins"
+msgstr "??????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid.cpp:489
-msgid "Not Yet!"
-msgstr "????"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_plugins.cpp:68
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:344
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:347
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:352
+msgid "Audio"
+msgstr "??"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid.cpp:494
-msgid "B Frames"
-msgstr "B ??"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_plugins.cpp:74
+msgid "Video Encoder Plugins"
+msgstr "?????????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_recent.cpp:102
-msgid "Recent files"
-msgstr "???????"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_plugins.cpp:98
+msgid "Video Encoder"
+msgstr "?????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_exLame.cpp:80
-msgid "Lame command"
-msgstr "Lame ??"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_plugins.cpp:103
+msgid "Audio Device Plugins"
+msgstr "????????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_exLame.cpp:89
-msgid "Enter parameters (i.e. -b 192 -m s ...)"
-msgstr "???? (i.e. -b 192 -m s ...)"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_plugins.cpp:125
+msgid "Audio Device"
+msgstr "????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_eq2.cpp:235
-msgid "Brigh_tness:"
-msgstr "??(_T):"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_plugins.cpp:132
+msgid "Audio Encoder Plugins"
+msgstr "?????????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_eq2.cpp:243
-msgid "_Saturation:"
-msgstr "???(_S):"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_plugins.cpp:154
+msgid "Audio Encoders"
+msgstr "?????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_eq2.cpp:278
-msgid "_Contrast:"
-msgstr "??(_C):"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_plugins.cpp:161
+msgid "Plugins Info"
+msgstr "??????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_eq2.cpp:304
-msgid "_Initial:"
-msgstr "??(_I):"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_v2v.cpp:35
+msgid "_VOB file(s):"
+msgstr "_VOB ??:"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_eq2.cpp:330
-msgid "_Red:"
-msgstr "?(_R):"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_v2v.cpp:35
+msgid "Select VOB file(s)"
+msgstr "?? VOB ?"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_eq2.cpp:347
-msgid "_Green:"
-msgstr "?(_G):"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_v2v.cpp:36
+msgid "_IFO file:"
+msgstr "_IFO ??:"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_eq2.cpp:355
-msgid "_Blue:"
-msgstr "?(_B):"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_v2v.cpp:36
+msgid "Select IFO file"
+msgstr "?? IFO ?:"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_eq2.cpp:363
-msgid "_Weight:"
-msgstr "??(_W):"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_v2v.cpp:37
+msgid "VobSub file:"
+msgstr "VobSub ?:"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_eq2.cpp:389
-msgid "<b>Gamma</b>"
-msgstr "<b>Gamma</b>"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_v2v.cpp:37
+msgid "Select VobSub file"
+msgstr "?? VobSub ?"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_contrast.cpp:239
-msgid "Luma"
-msgstr "??"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_v2v.cpp:42
+msgid "VOB to VobSub"
+msgstr "VOB ?? VobSub"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_contrast.cpp:247
-msgid "Chroma v"
-msgstr "?? v"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_v2v.cpp:46
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_v2v.cpp:51
+msgid "The selected vobfile does not exist"
+msgstr "??? vob ????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:275
-msgid "Avidemux"
-msgstr "Avidemux"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_v2v.cpp:56
+msgid "Please select a correct VobSub path/dir"
+msgstr "???????? VobSub ??/???"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:292
-#: avidemux/ADM_libraries/ADM_utilities/ADM_gettext.cpp:52
-msgid "_File"
-msgstr "??(_F)"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_requant.cpp:39
+msgid "_Shrink Factor:"
+msgstr "????(_S):"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:299
-msgid "_Open..."
-msgstr "??...(_O)"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_requant.cpp:42
+msgid "Requant Configuration"
+msgstr "??????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:310
-msgid "_Append..."
-msgstr "??...(_A)"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:81
+msgid "Select idx file:"
+msgstr "?? idx ??:"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:321
-msgid "_Save"
-msgstr "??(_S)"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:82
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:198
+msgid "Use GlyphSet (optional):"
+msgstr "???? (???):"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:332
-msgid "Save _Video..."
-msgstr "????...(_V)"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:82
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:198
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:321
+msgid "Select GlyphSet file"
+msgstr "?????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:344
-msgid "Save _BMP Image..."
-msgstr "???BMP ??...(_B)"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:83
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:199
+msgid "Output SRT file"
+msgstr "?? SRT ??"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:348
-msgid "Save _JPEG Image..."
-msgstr "???JPEG ??...(_J)"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:83
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:199
+msgid "Save SRT file"
+msgstr "?? SRT ?"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:352
-msgid "Save _Selection as JPEG Images..."
-msgstr "????????JPEG ??...(_S)"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:93
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:210
+msgid "Select input and ouput files"
+msgstr "??????????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:365
-msgid "Save _Project"
-msgstr "????(_P)"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:103
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:115
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:234
+msgid "The idx/sub file does not exist."
+msgstr "idx/sub ?????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:373
-msgid "Save P_roject As..."
-msgstr "?????...(_R)"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:108
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:227
+msgid "Please Select a valid output SRT file."
+msgstr "???????? SRT ????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:381
-msgid "_Load/Run Project..."
-msgstr "??/?? ??...(_L)"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:124
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:243
+msgid "Cannot load the glyphset file."
+msgstr "?????????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:389
-msgid "A_dd to Joblist..."
-msgstr "???????...(_D)"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:143
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:264
+msgid "GlyphSet filename"
+msgstr "????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:393
-msgid "Show _Joblist"
-msgstr "??????(_J)"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:143
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:264
+msgid "Save GlyphSet file"
+msgstr "?????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:405
-msgid "Co_nnect to avsproxy"
-msgstr "?? avsproxy(_N)"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:145
+msgid "Save Glyph"
+msgstr "????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:414
-msgid "Proper_ties"
-msgstr "??(_T)"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:196
+msgid "Input TS:"
+msgstr "?? TS:"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:425
-msgid "AVI _Muxer Options"
-msgstr "AVI ?????(_M)"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:196
+msgid "Select TS file"
+msgstr "?? TS ?"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:434
-msgid "_Quit"
-msgstr "??(_Q)"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:197
+msgid "Subtitle PID:"
+msgstr "?? PID:"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:445
-msgid "_Edit"
-msgstr "??(_E)"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:221
+msgid "Please Select a valid TS file."
+msgstr "???????? TS ?"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:452
-msgid "_Reset Edits"
-msgstr "????(_R)"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:266
+msgid "Save GlyphSet"
+msgstr "????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:465
-msgid "Cu_t"
-msgstr "??(_T)"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp:57
+msgid "VCD 40 kB"
+msgstr "VCD 40 kB"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:476
-msgid "_Copy"
-msgstr "??(_C)"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp:58
+msgid "SVCD 112 kB"
+msgstr "SVCD 112 kB"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:487
-msgid "_Paste"
-msgstr "??(_P)"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp:59
+msgid "DVD 224 kB"
+msgstr "DVD 224 kB"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:498
-msgid "_Delete"
-msgstr "??(_D)"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp:65
+msgid "Mi_n. bitrate:"
+msgstr "?????:"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:514
-msgid "Set Marker _A"
-msgstr "???? _A"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp:66
+msgid "_Use Xvid rate control"
+msgstr "?? Xvid ?????(_U)"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:521
-msgid "Set Marker _B"
-msgstr "???? _B"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp:68
+msgid "_Buffer size:"
+msgstr "????(_B):"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:533
-msgid "Pre_ferences"
-msgstr "????(_F)"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp:82
+msgid "libavcodec MPEG-2 Configuration"
+msgstr "libavcodec MPEG-2 ??"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:541
-msgid "_View"
-msgstr "??(_V)"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:175
+msgid "_Use systray while encoding"
+msgstr "????????(_U)"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:548
-msgid "_Main Toolbar"
-msgstr "????(_M)"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:176
+msgid "_Accept non-standard audio frequency for DVD"
+msgstr "??? DVD ??????????(_A)"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:553
-msgid "_A/V Sidebar"
-msgstr "??/?? ??(_A)"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:177
+msgid "Create _OpenDML files"
+msgstr "?? _OpenDML ??"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:563
-msgid "_Zoom 1:4"
-msgstr "??? 1:4(_Z)"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:178
+msgid "Automatically _index MPEG files"
+msgstr "???? MPEG ?(_I)"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:570
-msgid "Z_oom 1:2"
-msgstr "??? 1:2(_O)"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:179
+msgid "Automatically _swap A and B if A>B"
+msgstr "?? A>B ?????? A ? B(_S)"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:577
-msgid "Zoom _1:1"
-msgstr "??? _1:1"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:180
+msgid "_Disable NUV audio sync"
+msgstr "?? NUV ????(_D)"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:584
-msgid "Zoom _2:1"
-msgstr "??? _2:1"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:182
+msgid "Automatically _build VBR map"
+msgstr "?????????(VBR)??(_B)"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:591
-msgid "Vi_deo"
-msgstr "??(_D)"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:183
+msgid "Automatically _rebuild index"
+msgstr "????????(_R)"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:598
-msgid "_Decoder Options"
-msgstr "?????(_D)"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:184
+msgid "Automatically remove _packed bitstream"
+msgstr "????????????(_P)"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:605
-msgid "_Postprocessing"
-msgstr "????(_P)"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:186
+msgid "SIMD"
+msgstr "SIMD"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:608
-msgid "Select postprocessing level"
-msgstr "????????"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:188
+msgid "Enable all SIMD"
+msgstr "???? SIMD"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:618
-msgid "P_review"
-msgstr "??(_R)"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:189
+msgid "Enable MMX"
+msgstr "?? MMX"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:625
-msgid "Display _Output"
-msgstr "????(_O)"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:190
+msgid "Enable MMXEXT"
+msgstr "?? MMXEXT"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:637
-msgid "_Frame Rate"
-msgstr "???(_F)"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:191
+msgid "Enable 3DNOW"
+msgstr "?? 3DNOW"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:641
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:690
-msgid "_Encoder"
-msgstr "???(_E)"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:192
+msgid "Enable 3DNOWEXT"
+msgstr "?? 3DNOWEXT"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:648
-msgid "Fil_ters"
-msgstr "??(_F)"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:193
+msgid "Enable SSE"
+msgstr "?? SSE"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:655
-msgid "_Audio"
-msgstr "??(_A)"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:194
+msgid "Enable SSE2"
+msgstr "?? SSE2"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:662
-msgid "_Main Track"
-msgstr "???(_M)"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:195
+msgid "Enable SSE3"
+msgstr "?? SSE3"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:666
-msgid "_Second Track"
-msgstr "???(_S)"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:196
+msgid "Enable SSSE3"
+msgstr "?? SSSE3"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:670
-msgid "_Build VBR Time Map"
-msgstr "???????(VBR)????(_B)"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:217
+msgid "_lavc threads:"
+msgstr "_lavc ???:"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:679
-msgid "S_ave..."
-msgstr "??...(_A)"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:219
+msgid "Multi-threading"
+msgstr "????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:697
-msgid "_Filters"
-msgstr "??(_F)"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:224
+msgid "Above normal"
+msgstr "????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:701
-msgid "_Tools"
-msgstr "??(_T)"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:226
+msgid "Below normal"
+msgstr "????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:708
-msgid "_Calculator"
-msgstr "???(_C)"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:229
+msgid "_Encoding priority:"
+msgstr "?????(_E):"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:724
-msgid "_Rebuild Frames (I & B)"
-msgstr "?????? (I & B)"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:230
+msgid "_Indexing/unpacking priority:"
+msgstr "??/????????(_I):"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:728
-msgid "C_heck Frames (slow)"
-msgstr "???? (?)(_H)"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:231
+msgid "_Playback priority:"
+msgstr "???????(_P):"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:732
-msgid "_Bitrate Histogram"
-msgstr "??????(_B)"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:233
+msgid "Prioritisation"
+msgstr "??"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:736
-msgid "_Scan for Black Frames..."
-msgstr "?????...(_S)"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:238
+msgid "_Split MPEG files every (MB):"
+msgstr "MPEG ???????? (MB)(_S):"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:745
-msgid "_VOB -> VobSub"
-msgstr "_VOB ?? VobSub"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:240
+msgid "_Use alternative tag for MP3 in .mp4"
+msgstr "? .mp4 ? MP3 ????????(_U)"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:749
-msgid "_OCR (VobSub -> srt)"
-msgstr "_OCR (VobSub ?? srt)"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:244
+msgid "XVideo (best)"
+msgstr "XVideo (??)"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:753
-msgid "OCR (TS->srt)"
-msgstr "OCR (TS ?? srt)"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:248
+msgid "SDL (MS Windows GDI)"
+msgstr "SDL (MS Windows GDI)"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:757
-msgid "_Edit Glyph"
-msgstr "????(_E)"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:249
+msgid "SDL (MS Windows DirectX)"
+msgstr "SDL (MS Windows DirectX)"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:766
-msgid "_Frame Hex Dump"
-msgstr "???????(_F)"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:251
+msgid "SDL (good)"
+msgstr "SDL (?)"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:770
-msgid "A_uto"
-msgstr "??(_U)"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:255
+msgid "Video _display:"
+msgstr "????(_D):"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:777
-msgid "_VCD"
-msgstr "_VCD"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:260
+msgid "No alerts"
+msgstr "???????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:781
-msgid "_SVCD"
-msgstr "_SVCD"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:261
+msgid "Display only error alerts"
+msgstr "???????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:785
-msgid "_DVD"
-msgstr "_DVD"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:262
+msgid "Display all alerts"
+msgstr "??????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:789
-msgid "_PSP"
-msgstr "_PSP"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:264
+msgid "_Message level:"
+msgstr "????(_M):"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:793
-msgid "PSP (_H.264)"
-msgstr "PSP (_H.264)"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:270
+msgid "Master"
+msgstr "??"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:797
-msgid "F_LV"
-msgstr "F_LV"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:271
+msgid "_Volume control:"
+msgstr "????(_V):"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:801
-msgid "IPOD (mpeg4)"
-msgstr "IPOD (mpeg4)"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:276
+msgid "No downmixing"
+msgstr "????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:805
-msgid "_Go"
-msgstr "??(_G)"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:278
+msgid "Pro Logic"
+msgstr "????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:812
-msgid "_Play/Stop"
-msgstr "??/??(_P)"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:279
+msgid "Pro Logic II"
+msgstr "???????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:823
-msgid "P_revious Frame"
-msgstr "???(_R)"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:281
+msgid "_Local playback downmixing:"
+msgstr "??????(_L):"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:834
-msgid "_Next Frame"
-msgstr "???(_N)"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:295
+msgid "_AudioDevice"
+msgstr "????(_A)"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:845
-msgid "Pr_evious Intra Frame"
-msgstr "??????(_E)"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:300
+msgid "De_ringing"
+msgstr "??????(_R)"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:856
-msgid "Next _Intra Frame"
-msgstr "??????(_I)"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:301
+#: plugins/ADM_videoFilters/MSharpen/ADM_vidMSharpen.cpp:160
+#: plugins/ADM_videoFilters/MSmooth/ADM_vidMsmooth.cpp:184
+msgid "_Strength:"
+msgstr "??(_S):"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:867
-msgid "Previou_s Black Frame"
-msgstr "?????(_S)"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:302
+msgid "Default Postprocessing"
+msgstr "???????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:871
-msgid "Ne_xt Black Frame"
-msgstr "?????(_X)"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:316
+msgid "_Filter directory:"
+msgstr "????(_F):"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:875
-msgid "_First Frame"
-msgstr "???(_F)"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:316
+msgid "Select filter directory"
+msgstr "??????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:886
-msgid "_Last Frame"
-msgstr "????(_L)"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:317
+msgid "_Load external filters"
+msgstr "??????(_L)"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:902
-msgid "Go to Marker _A"
-msgstr "???? _A"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:320
+msgid "Use _Global GlyphSet"
+msgstr "??????(_G)"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:909
-msgid "Go to Marker _B"
-msgstr "???? _B"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:321
+msgid "Gl_yphSet:"
+msgstr "??(_Y):"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:921
-msgid "Go to Fra_me..."
-msgstr "????...(_M)"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:330
+msgid "Automation"
+msgstr "???"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:932
-msgid "Go to _Time..."
-msgstr "????...(_T)"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:366
+msgid "Threading"
+msgstr "???"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:943
-msgid "_Custom"
-msgstr "??(_C)"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:370
+msgid "Global GlyphSet"
+msgstr "????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:947
-msgid "_Help"
-msgstr "??(_H)"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:374
+msgid "External Filters"
+msgstr "????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:954
-msgid "_Built-in Support"
-msgstr "?????(_B)"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:378
+msgid "Preferences"
+msgstr "????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:958
-msgid "_About"
-msgstr "??(_A)"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_bitrateHisto.cpp:55
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_bitrateHisto.cpp:124
+msgid "No data"
+msgstr "???"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:976
-msgid "Open a file"
-msgstr "????"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_bitrateHisto.cpp:210
+msgid "Max. bitrate:"
+msgstr "?????:"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:986
-msgid "Save the file"
-msgstr "????"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_bitrateHisto.cpp:211
+msgid "Average bitrate:"
+msgstr "?????:"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:992
-msgid "Audio/video file information"
-msgstr "??/?? ??"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_bitrateHisto.cpp:212
+msgid "Number of I frames:"
+msgstr "I ????:"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1003
-msgid "Bitrate/size calculator"
-msgstr "???/?? ???"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_bitrateHisto.cpp:213
+msgid "Number of P frames:"
+msgstr "P ????:"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1087
-msgid "Configure video encoder"
-msgstr "??????"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_bitrateHisto.cpp:214
+msgid "Number of B frames:"
+msgstr "B ????:"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1092
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1148
-msgid "Filters"
-msgstr "??"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_bitrateHisto.cpp:215
+msgid "Max. B frames:"
+msgstr "?? B ???:"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1095
-msgid "Video filters"
-msgstr "????"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_bitrateHisto.cpp:228
+msgid "Bitrate Histogram"
+msgstr "??????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1127
-msgid "Configure audio encoder"
-msgstr "??????"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flv1.cpp:41
+msgid "FLV1 Configuration"
+msgstr "FLV1 ??"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1135
-msgid "Audio filters"
-msgstr "????"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_resizeWiz.cpp:32
+msgid "VCD"
+msgstr "VCD"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1156
-msgid "Shift:"
-msgstr "??:"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_resizeWiz.cpp:33
+msgid "SVCD"
+msgstr "SVCD"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1159
-msgid "Enable time shift"
-msgstr "??????"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_resizeWiz.cpp:34
+msgid "DVD"
+msgstr "DVD"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1165
-msgid "Audio/video time shift (ms)"
-msgstr "??/?? ???? (ms)"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_resizeWiz.cpp:35
+msgid "DVD half D1"
+msgstr "DVD half D1"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1168
-msgid "ms"
-msgstr "ms"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_resizeWiz.cpp:36
+msgid "PSP (480 * 272)"
+msgstr "PSP (480 * 272)"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1176
-msgid "<b>Format</b>"
-msgstr "<b>??</b>"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_resizeWiz.cpp:37
+msgid "PSP full res. (720 * 480)"
+msgstr "PSP ?????? (720*480)"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1209
-msgid "Frame: "
-msgstr "??:"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_resizeWiz.cpp:53
+msgid "_Target type:"
+msgstr "????(_T):"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1216
-msgid "Current frame"
-msgstr "????"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_resizeWiz.cpp:54
+msgid "_Source aspect ratio:"
+msgstr "???????(_S):"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1221
-msgid "/ 0000000"
-msgstr "/ 0000000"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_resizeWiz.cpp:55
+msgid "_Destination aspect ratio:"
+msgstr "?????????(_D):"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1228
-msgid "Time: "
-msgstr "??:"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_resizeWiz.cpp:60
+msgid "Auto Wizard"
+msgstr "????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1235
-msgid "Current time"
-msgstr "????"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_jobs_save.cpp:7
+msgid "_Job name:"
+msgstr "????(_J):"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1236
-msgid "00:00:00.000"
-msgstr "00:00:00.000"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_jobs_save.cpp:8
+msgid "Output _File:"
+msgstr "????(_F):"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1239
-msgid "/ 00:00:00,000"
-msgstr "/ 00:00:00,000"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_jobs_save.cpp:8
+msgid "Select Video To Write"
+msgstr "???????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1246
-msgid "Frame: ?"
-msgstr "??:?"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_jobs_save.cpp:11
+msgid "Save Job"
+msgstr "????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1270
-msgid "Play"
-msgstr "??"
+#: avidemux/ADM_script/ADM_JSFunctions.cpp:242
+msgid "Select a directory"
+msgstr "??????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1284
-msgid "Stop"
-msgstr "??"
+#: avidemux/ADM_script/ADM_JSFunctions.cpp:513
+msgid "Uinteger"
+msgstr "???"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1296
-msgid "Previous frame"
-msgstr "???"
+#: avidemux/ADM_script/ADM_JSFunctions.cpp:516
+msgid "Test uinteger"
+msgstr "?????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1311
-msgid "Next frame"
-msgstr "???"
+#: avidemux/ADM_script/ADM_JSFunctions.cpp:528
+msgid "Float"
+msgstr "??"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1326
-msgid "Previous keyframe"
-msgstr "??????"
+#: avidemux/ADM_script/ADM_JSFunctions.cpp:546
+msgid "Toggle"
+msgstr "??"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1341
-msgid "Next keyframe"
-msgstr "??????"
+#: avidemux/ADM_script/ADM_JSFunctions.cpp:568
+msgid "No Strategy"
+msgstr "???"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1355
-msgid "Selection: start"
-msgstr "????:??"
+#: avidemux/ADM_script/ADM_JSFunctions.cpp:569
+msgid "3:2 Pulldown"
+msgstr "3:2 Pulldown"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1366
-msgid "Selection: end"
-msgstr "????:??"
+#: avidemux/ADM_script/ADM_JSFunctions.cpp:570
+msgid "Pal/Secam"
+msgstr "Pal/Secam"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1377
-msgid "Previous black frame"
-msgstr "?????"
+#: avidemux/ADM_script/ADM_JSFunctions.cpp:571
+#: plugins/ADM_videoFilters/Telecide/ADM_vidDecTelecide.cpp:78
+msgid "NTSC converted from PAL"
+msgstr "? PAL ?? NTSC"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1388
-msgid "Next black frame"
-msgstr "?????"
+#: avidemux/ADM_script/ADM_JSFunctions.cpp:573
+msgid "menu"
+msgstr "??"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1399
-msgid "First frame"
-msgstr "???"
+#: avidemux/ADM_osSupport/ADM_crashHook.cpp:64
+msgid "Load it"
+msgstr "???"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1410
-msgid "Last frame"
-msgstr "????"
+#: avidemux/ADM_osSupport/ADM_crashHook.cpp:64
+msgid "Crash file"
+msgstr "???"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1424
-msgid "<b>Selection</b>"
-msgstr "<b>????</b>"
+#: avidemux/ADM_osSupport/ADM_crashHook.cpp:65
+msgid ""
+"I have detected a crash file. \n"
+"Do you want to load it  ?\n"
+"(It will be deleted in all cases, you should save it if you want to keep it)"
+msgstr ""
+"?????????\n"
+"????? ?\n"
+"(????????????????????????)"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1441
-msgid "B:"
-msgstr "B:"
+#: avidemux/ADM_osSupport/ADM_misc.cpp:15
+#, c-format
+msgid "%lu minutes"
+msgstr "%lu ??"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1448
-msgid "Go to marker B"
-msgstr "???? B"
+#: avidemux/ADM_osSupport/ADM_misc.cpp:19
+#, c-format
+msgid "%lu minute"
+msgstr "%lu ?"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1450
-msgid "A:"
-msgstr "A:"
+#: avidemux/ADM_osSupport/ADM_misc.cpp:27
+#, c-format
+msgid "%lu second"
+msgstr "%lu ?"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1457
-msgid "Go to marker A"
-msgstr "???? A"
+#: avidemux/ADM_osSupport/ADM_misc.cpp:31
+#, c-format
+msgid "%lu seconds"
+msgstr "%lu ?"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1459
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1467
-msgid " 0000000"
-msgstr " 0000000"
+#: avidemux/ADM_filter/filter_declaration.cpp:46
+msgid "VobSub"
+msgstr "VobSub"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_bindings.cpp:541
-msgid "Side"
-msgstr "????"
+#: avidemux/ADM_filter/filter_declaration.cpp:46
+msgid "Embed VobSub subtitles into picture."
+msgstr "?? VobSub ???????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_bindings.cpp:542
-#: avidemux/ADM_videoFilter/ADM_vidDGbob.cpp:81
-#: avidemux/ADM_videoFilter/ADM_vidDecTelecide.cpp:90
-#: avidemux/ADM_videoFilter/ADM_vidKernelDeint.cpp:87
-#: avidemux/ADM_videoFilter/ADM_vidMcDeint.cpp:107
-msgid "Top"
-msgstr "????"
+#: avidemux/ADM_filter/filter_declaration.cpp:47
+msgid "DVB sub"
+msgstr "DVB sub"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_bindings.cpp:543
-msgid "Separate"
-msgstr "????"
+#: avidemux/ADM_filter/filter_declaration.cpp:47
+msgid "Embed DVB-T subtitle."
+msgstr "?? DVB-T ???"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_bindings.cpp:728
-#, c-format
-msgid "Frame:%c(%02d)"
-msgstr "??:%c(%02d)"
+#: avidemux/ADM_filter/filter_declaration.cpp:50
+msgid "Compute Average"
+msgstr "?????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/TLK_filesel.cpp:106
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/TLK_filesel.cpp:213
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/TLK_filesel.cpp:400
-msgid "Cannot open directory as a file"
-msgstr "??????????????"
+#: avidemux/ADM_filter/filter_declaration.cpp:50
+msgid "Compute average luma value for each pixel throughout all frames, and save to file"
+msgstr "?????????????????????????????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/TLK_filesel.cpp:455
-msgid "Images"
-msgstr "??"
+#: avidemux/ADM_filter/filter_declaration.cpp:51
+msgid "Force too-bright/too-dim pixels to 0 and the rest to 255 or vice-versa"
+msgstr "?? ??/?? ???? 0 ?????? 255 ?????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/TLK_filesel.cpp:467
-msgid "All"
-msgstr "??"
+#: avidemux/ADM_filter/filter_declaration.cpp:52
+msgid "Particle List"
+msgstr "????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/ADM_tray_gtk.cpp:55
-msgid "Open Avidemux"
-msgstr "?? Avidemux"
+#: avidemux/ADM_filter/filter_declaration.cpp:52
+msgid "Identify 'particles' (groups of pixels)"
+msgstr "?? '??' (?????)"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/ADM_gladeSupport.cpp:252
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/ADM_gladeSupport.cpp:276
-#, c-format
-msgid "Couldn't find pixmap file: %s"
-msgstr "???????: %s"
+#: avidemux/ADM_filter/filter_declaration.cpp:53
+msgid "Eraser"
+msgstr "???"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/toolkit_dialog.cpp:574
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/toolkit_dialog.cpp:652
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/toolkit_dialog.cpp:720
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/toolkit_dialog.cpp:780
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/toolkit_dialog.cpp:843
-msgid "label1"
-msgstr "??1"
+#: avidemux/ADM_filter/filter_declaration.cpp:53
+msgid "\"Erase\" arbitrary areas of each frame"
+msgstr "\"??\" ?????????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/toolkit_dialog.cpp:707
-msgid "Alert"
-msgstr "??"
+#: avidemux/ADM_filter/filter_declaration.cpp:54
+msgid "Swiss Army Knife"
+msgstr "????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtersub.cpp:52
-msgid "Video Filters"
-msgstr "????"
+#: avidemux/ADM_filter/filter_declaration.cpp:54
+msgid "Apply operation like P'=P*A, P-A, P+A, etc. using a convolution, rolling average, image from file, or constant"
+msgstr "????? P'=P*A, P-A, P+A ?????????????????????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtersub.cpp:112
-msgid "VCD res"
-msgstr "VCD ??"
+#: avidemux/ADM_filter/filter_declaration.cpp:58
+msgid "Add Framenumber"
+msgstr "??????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtersub.cpp:118
-msgid "SVCD res"
-msgstr "SVCD ??"
+#: avidemux/ADM_filter/filter_declaration.cpp:58
+msgid "Print frame number directly in image"
+msgstr "???????????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtersub.cpp:124
-msgid "DVD res"
-msgstr "DVD ??"
+#: avidemux/ADM_filter/filter_saveload.cpp:149
+msgid "Problem reading XML filters"
+msgstr "?? XML ???????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtersub.cpp:130
-msgid "Half D1 res"
-msgstr "Half D1 ??"
+#: avidemux/ADM_filter/filter_saveload.cpp:157
+msgid "No filter found"
+msgstr "????????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtersub.cpp:156
-msgid "Save as script"
-msgstr "?????"
+#: avidemux/ADM_filter/filter_saveload.cpp:193
+msgid "Could not find a filter"
+msgstr "??????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager_dialog.cpp:123
-msgid "Video Filter Manager"
-msgstr "???????"
+#: avidemux/ADM_filter/filter_saveload.cpp:201
+msgid "No tag found"
+msgstr "????????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager_dialog.cpp:145
-msgid "Open filter list [Ctrl-O]"
-msgstr "?????? [Ctrl-O]"
+#: avidemux/ADM_filter/filter_saveload.cpp:281
+msgid "Node not found"
+msgstr "??????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager_dialog.cpp:154
-msgid "Save filter list [Ctrl-S]"
-msgstr "?????? [Ctrl-S]"
+#: avidemux/ADM_libraries/ADM_utilities/ADM_imageLoader.cpp:184
+msgid "Wrong Colorspace"
+msgstr "?????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager_dialog.cpp:162
-msgid "Save Script"
-msgstr "????"
+#: avidemux/ADM_libraries/ADM_utilities/ADM_imageLoader.cpp:184
+msgid "Only YV12/I420 or YUY2/I422 JPegs are supported"
+msgstr "??? YV12/I420 ? YUY2/I422 JPEG"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager_dialog.cpp:165
-msgid "Save as script [Ctrl-J]"
-msgstr "????? [Ctrl-J]"
+#: avidemux/ADM_libraries/ADM_utilities/avidemutils.cpp:321
+msgid "NTSC 4:3"
+msgstr "NTSC 4:3"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager_dialog.cpp:173
-msgid "DVD Res"
-msgstr "DVD ??"
+#: avidemux/ADM_libraries/ADM_utilities/avidemutils.cpp:322
+#: avidemux/ADM_libraries/ADM_utilities/avidemutils.cpp:323
+msgid "NTSC 16:9"
+msgstr "NTSC 16:9"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager_dialog.cpp:176
-msgid "DVD resolution [Ctrl-1]"
-msgstr "DVD ??? [Ctrl-1]"
+#: avidemux/ADM_libraries/ADM_utilities/avidemutils.cpp:324
+msgid "PAL 4:3"
+msgstr "PAL 4:3"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager_dialog.cpp:184
-msgid "Half D1 Res"
-msgstr "Half D1 ??"
+#: avidemux/ADM_libraries/ADM_utilities/avidemutils.cpp:325
+msgid "PAL 16:9"
+msgstr "PAL 16:9"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager_dialog.cpp:187
-msgid "Half D1 resolution [Ctrl-2]"
-msgstr "Half D1 ??? [Ctrl-2]"
+#: avidemux/ADM_libraries/ADM_lvemux/ADM_muxer.cpp:75
+msgid "For DVD, audio must be MP2 or AC3."
+msgstr "DVD ?????? MP2 ? AC3"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager_dialog.cpp:195
-msgid "SVCD Res"
-msgstr "SVCD ??"
+#: avidemux/ADM_libraries/ADM_lvemux/ADM_muxer.cpp:82
+msgid "lvemux init failed"
+msgstr "lvemux ?????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager_dialog.cpp:198
-msgid "SVCD resolution [Ctrl-3]"
-msgstr "SVCD ??? [Ctrl-3]"
+#: avidemux/ADM_videoFilter/ADM_vidThreshold.cpp:135
+msgid "Mi_nimum value to be in-range:"
+msgstr "????????(_N):"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager_dialog.cpp:206
-msgid "VCD Res"
-msgstr "VCD ??"
+#: avidemux/ADM_videoFilter/ADM_vidThreshold.cpp:136
+msgid "Ma_ximum value to be in-range:"
+msgstr "????????(_X):"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager_dialog.cpp:209
-msgid "VCD resolution [Ctrl-4]"
-msgstr "VCD ??? [Ctrl-4]"
+#: avidemux/ADM_videoFilter/ADM_vidThreshold.cpp:139
+msgid "In-range values go white, out-of-range go black"
+msgstr "?????????????????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager_dialog.cpp:260
-msgid "Transform"
-msgstr "??"
+#: avidemux/ADM_videoFilter/ADM_vidThreshold.cpp:140
+msgid "In-range values go black, out-of-range go white"
+msgstr "?????????????????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager_dialog.cpp:285
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filterlist.cpp:123
-msgid "Interlacing"
-msgstr "??"
+#: avidemux/ADM_videoFilter/ADM_vidThreshold.cpp:145
+msgid "Output values:"
+msgstr "???:"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager_dialog.cpp:309
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filterlist.cpp:148
-msgid "Colors"
-msgstr "??"
+#: avidemux/ADM_videoFilter/ADM_vidThreshold.cpp:148
+#: avidemux/ADM_videoFilter/ADM_vidParticle.cpp:192
+#: avidemux/ADM_videoFilter/ADM_vidEraser.cpp:251
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:375
+msgid "_Debugging settings (bits):"
+msgstr "???? (bits)(_D):"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager_dialog.cpp:333
-msgid "Noise"
-msgstr "??"
+#: avidemux/ADM_videoFilter/ADM_vidComputeAverage.cpp:171
+msgid "_Start Frame (first frame # to include in average):"
+msgstr "???? (??????????? #)(_S):"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager_dialog.cpp:357
-msgid "Sharpness"
-msgstr "???"
+#: avidemux/ADM_videoFilter/ADM_vidComputeAverage.cpp:175
+msgid "_End Frame (last frame # to include), -1 = last:"
+msgstr "???? (???????? #), -1 = ??(_E):"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager_dialog.cpp:381
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filterlist.cpp:223
-msgid "Subtitles"
-msgstr "??"
+#: avidemux/ADM_videoFilter/ADM_vidComputeAverage.cpp:179
+#: avidemux/ADM_videoFilter/ADM_vidParticle.cpp:187
+msgid "_Output File:"
+msgstr "???(_O):"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager_dialog.cpp:405
-msgid "Misc"
-msgstr "??"
+#: avidemux/ADM_videoFilter/ADM_vidComputeAverage.cpp:179
+msgid "Select output file"
+msgstr "?????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager_dialog.cpp:416
-msgid "External"
-msgstr "???"
+#: avidemux/ADM_videoFilter/ADM_vidComputeAverage.cpp:182
+msgid "_Bias (only for display; use 0 for average, 128 for frame minus average):"
+msgstr "?? (???????? 0 ?????128 ????????)(_B):"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager_dialog.cpp:427
-msgid "Add selected filter to the Active Filters list"
-msgstr "?????????????????"
+#: avidemux/ADM_videoFilter/ADM_vidComputeAverage.cpp:186
+msgid "Current frame minus average so far"
+msgstr "??????????????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager_dialog.cpp:433
-msgid "<b>Available Filters</b>"
-msgstr "<b>?????</b>"
+#: avidemux/ADM_videoFilter/ADM_vidComputeAverage.cpp:187
+msgid "Average so far"
+msgstr "????????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager_dialog.cpp:478
-msgid "Remove filter"
-msgstr "????"
+#: avidemux/ADM_videoFilter/ADM_vidComputeAverage.cpp:189
+msgid "Display nothing (fast for batch processing)"
+msgstr "????? (???????????)"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager_dialog.cpp:487
-msgid "Move filter down"
-msgstr "????"
+#: avidemux/ADM_videoFilter/ADM_vidComputeAverage.cpp:193
+msgid "Display _Mode:"
+msgstr "????(_M):"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager_dialog.cpp:496
-msgid "Move filter up"
-msgstr "????"
+#: avidemux/ADM_videoFilter/ADM_vidComputeAverage.cpp:198
+msgid "ComputeAverage"
+msgstr "?????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager_dialog.cpp:502
-msgid "P_artial"
-msgstr "??(_A)"
+#: avidemux/ADM_videoFilter/ADM_vidParticle.cpp:131
+msgid "New format, preferred, good for Tracker3D"
+msgstr "????? Tracker3D ?????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager_dialog.cpp:505
-msgid "Apply the current filter only to a part of the file"
-msgstr "????????????????"
+#: avidemux/ADM_videoFilter/ADM_vidParticle.cpp:133
+msgid "DG at UWA format (includes shape info & bounding box)"
+msgstr "DG at UWA ?? (???????????)"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager_dialog.cpp:510
-msgid "Configure filter"
-msgstr "????"
+#: avidemux/ADM_videoFilter/ADM_vidParticle.cpp:135
+msgid "AB at ODU format (includes shape info)"
+msgstr "AB at ODU ?? (??????)"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager_dialog.cpp:520
-msgid "C_onfigure"
-msgstr "??(_O)"
+#: avidemux/ADM_videoFilter/ADM_vidParticle.cpp:137
+msgid "Old format that Tracker3D can't read directly"
+msgstr "????????? Tracker3D"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager_dialog.cpp:524
-msgid "<b >Active Filters</b>"
-msgstr "<b >??????</b>"
+#: avidemux/ADM_videoFilter/ADM_vidParticle.cpp:141
+msgid "Output _Format:"
+msgstr "????(_F):"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager_dialog.cpp:551
-msgid "_Preview"
-msgstr "??(_P)"
+#: avidemux/ADM_videoFilter/ADM_vidParticle.cpp:166
+msgid "Mi_nimum area for a particle to be detected:"
+msgstr "???????????(_N):"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager.cpp:245
-msgid "The filter is already partial"
-msgstr "?????????"
+#: avidemux/ADM_videoFilter/ADM_vidParticle.cpp:169
+msgid "Ma_ximum area for a particle to be detected:"
+msgstr "???????????(_X):"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager.cpp:343
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager.cpp:345
-msgid "Load set of filters"
-msgstr "???????"
+#: avidemux/ADM_videoFilter/ADM_vidParticle.cpp:173
+msgid "_Left side crop (ignore particles in):"
+msgstr "???? (???????)(_L):"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager.cpp:358
-msgid "Nothing to save"
-msgstr "??????????"
+#: avidemux/ADM_videoFilter/ADM_vidParticle.cpp:176
+msgid "_Right side crop (ignore particles in):"
+msgstr "???? (???????)(_R):"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager.cpp:362
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager.cpp:364
-msgid "Save set of filters"
-msgstr "???????"
+#: avidemux/ADM_videoFilter/ADM_vidParticle.cpp:179
+msgid "_Top crop (ignore particles in):"
+msgstr "???? (???????)(_T):"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filterlist.cpp:64
-msgid "Add Video Filter"
-msgstr "??????"
+#: avidemux/ADM_videoFilter/ADM_vidParticle.cpp:182
+msgid "_Bottom crop (ignore particles in):"
+msgstr "???? (???????)(_B):"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filterlist.cpp:98
-msgid "Transformation"
-msgstr "??"
+#: avidemux/ADM_videoFilter/ADM_vidParticle.cpp:190
+msgid "_Camera number:"
+msgstr "?????(_C):"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filterlist.cpp:198
-msgid "Sharpen/Blur"
-msgstr "??/??"
+#: avidemux/ADM_videoFilter/ADM_vidEraser.cpp:187
+msgid "Erase"
+msgstr "??"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filterlist.cpp:248
-msgid "Miscellaneous"
-msgstr "????"
+#: avidemux/ADM_videoFilter/ADM_vidEraser.cpp:188
+msgid "Un-Erase"
+msgstr "???"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_ocr/adm_ocr.cpp:181
-msgid "Sure ?"
-msgstr "???"
+#: avidemux/ADM_videoFilter/ADM_vidEraser.cpp:192
+msgid "1x1"
+msgstr "1x1"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_ocr/adm_editglyph.cpp:53
-msgid "Select GlyphFile to edit"
-msgstr "?????????"
+#: avidemux/ADM_videoFilter/ADM_vidEraser.cpp:193
+msgid "3x3"
+msgstr "3x3"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_ocr/adm_editglyph.cpp:121
-msgid "String"
-msgstr "??"
+#: avidemux/ADM_videoFilter/ADM_vidEraser.cpp:194
+msgid "5x5"
+msgstr "5x5"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_ocr/adm_editglyph.cpp:123
-msgid "Search string"
-msgstr "????"
+#: avidemux/ADM_videoFilter/ADM_vidEraser.cpp:195
+msgid "7x7"
+msgstr "7x7"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_ocr/adm_editglyph.cpp:149
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_ocr/adm_editglyph.cpp:192
-msgid "End reached"
-msgstr "?????"
+#: avidemux/ADM_videoFilter/ADM_vidEraser.cpp:196
+msgid "9x9"
+msgstr "9x9"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_ocr/adm_editglyph.cpp:149
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_ocr/adm_editglyph.cpp:192
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_ocr/adm_editglyph.cpp:216
-msgid "No more glyphs"
-msgstr "??????"
+#: avidemux/ADM_videoFilter/ADM_vidEraser.cpp:197
+msgid "11x11"
+msgstr "11x11"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_ocr/adm_editglyph.cpp:216
-msgid "Head reached"
-msgstr "???????"
+#: avidemux/ADM_videoFilter/ADM_vidEraser.cpp:198
+msgid "15x15"
+msgstr "15x15"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_ocr/adm_editglyph.cpp:344
-msgid "dialog1"
-msgstr "??1"
+#: avidemux/ADM_videoFilter/ADM_vidEraser.cpp:199
+msgid "21x21"
+msgstr "21x21"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_ocr/adm_editglyph.cpp:396
-msgid "Prev. Empty"
-msgstr "??????"
+#: avidemux/ADM_videoFilter/ADM_vidEraser.cpp:203
+msgid "Brush _Mode:"
+msgstr "????(_M):"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_ocr/adm_editglyph.cpp:418
-msgid "Next Empty"
-msgstr "??????"
+#: avidemux/ADM_videoFilter/ADM_vidEraser.cpp:207
+msgid "Brush _Size:"
+msgstr "????(_S):"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_threadCount.cpp:75
-msgid "Disable"
-msgstr "??"
+#: avidemux/ADM_videoFilter/ADM_vidEraser.cpp:240
+msgid "Output \"_Color\" for all masked pixels:"
+msgstr "??????????? \"??\" (_C):"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_threadCount.cpp:79
-msgid "Auto-detect"
-msgstr "????"
+#: avidemux/ADM_videoFilter/ADM_vidEraser.cpp:246
+msgid "Eraser _Data File:"
+msgstr "??????(_D):"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/DIA_color.cpp:70
-msgid "Select Color"
-msgstr "????"
+#: avidemux/ADM_videoFilter/ADM_vidEraser.cpp:246
+msgid "Select data file"
+msgstr "?????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/DIA_filesel.cpp:90
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/DIA_filesel.cpp:247
-msgid "_Browse..."
-msgstr "??...(_B)"
+#: avidemux/ADM_videoFilter/ADM_vidEraser.cpp:257
+msgid "Eraser Configuration"
+msgstr "?????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_bitrate.cpp:106
-msgid "_Encoding mode:"
-msgstr "????(_E):"
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:258
+msgid "P' = A"
+msgstr "P' = A"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_bitrate.cpp:130
-msgid "Single pass - bitrate"
-msgstr "???? - ???"
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:259
+msgid "P' = P"
+msgstr "P' = P"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_bitrate.cpp:132
-msgid "Single pass - constant quality"
-msgstr "???? - ????"
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:260
+msgid "P' = P - A"
+msgstr "P' = P - A"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_bitrate.cpp:134
-msgid "Single pass - same qz as input"
-msgstr "???? - ????????"
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:261
+msgid "P' = A - P"
+msgstr "P' = A - P"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_bitrate.cpp:136
-msgid "Single pass - Average quantizer"
-msgstr "???? - ?????"
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:262
+msgid "P' = P + A"
+msgstr "P' = P + A"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_bitrate.cpp:139
-msgid "Two pass - video size"
-msgstr "???? - ????"
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:263
+msgid "P' = P * A"
+msgstr "P' = P * A"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_bitrate.cpp:141
-msgid "Two pass - average bitrate"
-msgstr "???? - ?????"
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:264
+msgid "P' = P / A"
+msgstr "P' = P / A"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_bitrate.cpp:283
-#: avidemux/ADM_videoFilter/ADM_vidForcedPP.cpp:61
-msgid "_Quantizer:"
-msgstr "???:"
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:265
+msgid "P' = A / P"
+msgstr "P' = A / P"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_bitrate.cpp:288
-msgid "A_vg Quantizer:"
-msgstr "?????:"
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:266
+msgid "P' = min (P, A)"
+msgstr "P' = min (P, A)"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_bitrate.cpp:293
-msgid "_Video size (MB):"
-msgstr "???? (MB):"
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:267
+msgid "P' = max (P, A)"
+msgstr "P' = max (P, A)"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_bitrate.cpp:298
-msgid "_Average bitrate (kb/s):"
-msgstr "????? (kb/s):"
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:272
+msgid "A = convolve(P); Load convolution kernel from file"
+msgstr "A = ??(P); ?????????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_bitrate.cpp:303
-msgid "-"
-msgstr "-"
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:274
+msgid "A = pixel from image file as float; Load image from file"
+msgstr "A = ???????????; ???????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_hex.cpp:100
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_hex.cpp:134
-msgid "_Previous"
-msgstr "???(_P)"
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:276
+msgid "A = pixel from image file as integer; Load image from file"
+msgstr "A = ??????????; ???????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_hex.cpp:108
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_hex.cpp:164
-msgid "_Next"
-msgstr "???(_N)"
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:278
+msgid "A = floating point constant value"
+msgstr "A = ??????"
 
-#: avidemux/ADM_osSupport/ADM_crashdump.cpp:210
-#: avidemux/ADM_osSupport/ADM_crashdump.cpp:236
-msgid "Fatal Error"
-msgstr "????"
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:280
+msgid "A = rolling average of pixel: A = A*(1-alpha)+(P*alpha)"
+msgstr "A = ????????: A = A*(1-alpha)+(P*alpha)"
 
-#: avidemux/ADM_osSupport/ADM_crashdump.cpp:210
-#: avidemux/ADM_osSupport/ADM_crashdump.cpp:236
-msgid ""
-"A fatal error has occurred.\n"
-"\n"
-"Click OK to generate debug information. This may take a few minutes to complete."
-msgstr ""
-"?????????\n"
-"\n"
-"?? ?? ??????????????????"
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:285
+msgid "Select _Operation on each pixel P and input A:"
+msgstr "??????? P ?????? A(_O):"
 
-#: avidemux/ADM_osSupport/ADM_crashdump.cpp:437
-msgid "Load it"
-msgstr "???"
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:290
+msgid "Input _Type:"
+msgstr "????(_T):"
 
-#: avidemux/ADM_osSupport/ADM_crashdump.cpp:437
-msgid "Crash file"
-msgstr "???"
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:321
+msgid "Input _File (image or convolution kernel):"
+msgstr "??? (???????)(_F):"
 
-#: avidemux/ADM_osSupport/ADM_crashdump.cpp:438
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:324
 msgid ""
-"I have detected a crash file. \n"
-"Do you want to load it  ?\n"
-"(It will be deleted in all cases, you should save it if you want to keep it)"
+"_Load Bias (added to each pixel\n"
+"in file image when loaded):"
 msgstr ""
-"?????????\n"
-"????? ?\n"
-"(????????????????????????)"
+"????(????\n"
+"????????????)(_L):"
 
-#: avidemux/ADM_osSupport/ADM_fileio.cpp:239
-#, c-format
-msgid "can't create custom directory (%s)."
-msgstr "?????????? (%s)."
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:329
+msgid ""
+"Load _Multiplier (each pixel in\n"
+"file image mult. by this when loaded):"
+msgstr ""
+"????? (????\n"
+"??????????????)(_M):"
 
-#: avidemux/ADM_osSupport/ADM_fileio.cpp:263
-#, c-format
-msgid "can't create job directory (%s)."
-msgstr "????????? (%s)"
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:335
+msgid "Input _Constant:"
+msgstr "?????(_C):"
 
-#: avidemux/ADM_osSupport/ADM_fileio.cpp:292
-msgid "Can't determine the Application Data folder."
-msgstr "??????????????"
-
-#: avidemux/ADM_osSupport/ADM_fileio.cpp:305
-msgid "can't determine $HOME."
-msgstr "???? $HOME."
-
-#: avidemux/ADM_osSupport/ADM_fileio.cpp:318
-msgid "Cannot create the .avidemux directory"
-msgstr "???? .avidemux ???"
-
-#: avidemux/ADM_osSupport/ADM_fileio.cpp:618
-#: avidemux/gtk_gui.cpp:902
-#, c-format
-msgid "Cannot open \"%s\"."
-msgstr "???? \"%s\"."
-
-#: avidemux/ADM_osSupport/ADM_fileio.cpp:631
-#, c-format
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:339
 msgid ""
-"%s already exists.\n"
-"\n"
-"Do you want to replace it?"
+"Memory constant _alpha\n"
+"(where A = (1-alpha)*A + alpha*(curr_frame + lookahead)):"
 msgstr ""
-"%s ?????\n"
-"\n"
-"??????"
+"????? _alpha ???\n"
+"(?? A = (1-alpha)*A + alpha*(????+?????)):"
 
-#: avidemux/ADM_osSupport/ADM_fileio.cpp:658
-#: avidemux/ADM_osSupport/ADM_fileio.cpp:672
-msgid "It is possible that you are trying to overwrite an input file!"
-msgstr "?????????????"
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:344
+msgid "Look ahead _N frames:"
+msgstr "??? _N ??:"
 
-#: avidemux/ADM_osSupport/ADM_fileio.cpp:683
-msgid "Cannot write the file"
-msgstr "??????"
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:348
+msgid "Init _Start Frame (first frame # to use for head start):"
+msgstr "??????? (????? # ?????)(_S):"
 
-#: avidemux/ADM_osSupport/ADM_fileio.cpp:683
-#, c-format
-msgid "No write access to \"%s\"."
-msgstr "??????????? \"%s\"?"
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:352
+msgid "Init _End Frame (last frame # to use for head start):"
+msgstr "??????? (???? # ?????)(_E):"
 
-#: avidemux/ADM_osSupport/ADM_misc.cpp:215
-#, c-format
-msgid "%lu minutes"
-msgstr "%lu ??"
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:356
+msgid "Init By _Rolling (compute head start using a rolling average rather than a straight average)"
+msgstr "???????(??????????????????????)(_R)"
 
-#: avidemux/ADM_osSupport/ADM_misc.cpp:219
-#, c-format
-msgid "%lu minute"
-msgstr "%lu ?"
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:361
+msgid "_Bias (will be added to result):"
+msgstr "?? (??????)(_B):"
 
-#: avidemux/ADM_osSupport/ADM_misc.cpp:227
-#, c-format
-msgid "%lu second"
-msgstr "%lu ?"
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:364
+msgid "_Result Bias (added to each result pixel):"
+msgstr "???? (??????)(_R):"
 
-#: avidemux/ADM_osSupport/ADM_misc.cpp:231
-#, c-format
-msgid "%lu seconds"
-msgstr "%lu ?"
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:368
+msgid ""
+"Result _Multiplier (each result pixel\n"
+"multiplied by this):"
+msgstr ""
+"??? (????\n"
+"??????????????)(_M):"
 
-#: avidemux/ADM_script/ADM_JSFunctions.cpp:238
-msgid "Select a directory"
-msgstr "?????"
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:373
+msgid "_Histogram every N frames (0 to disable):"
+msgstr "? N ??????? (0 ???)(_H):"
 
-#: avidemux/ADM_script/ADM_JSFunctions.cpp:504
-msgid "Uinteger"
-msgstr "???"
+#: avidemux/gui_navigate.cpp:74
+#: avidemux/gui_navigate.cpp:112
+#: avidemux/gui_navigate.cpp:394
+#: avidemux/gui_navigate.cpp:430
+msgid "Decompressing error"
+msgstr "????"
 
-#: avidemux/ADM_script/ADM_JSFunctions.cpp:507
-msgid "Test uinteger"
-msgstr "?????"
+#: avidemux/gui_navigate.cpp:74
+msgid "Cannot decode next frame."
+msgstr "?????????"
 
-#: avidemux/ADM_script/ADM_JSFunctions.cpp:519
-msgid "Float"
-msgstr "??"
+#: avidemux/gui_navigate.cpp:112
+#: avidemux/gui_navigate.cpp:430
+msgid "Cannot decode keyframe."
+msgstr "????????"
 
-#: avidemux/ADM_script/ADM_JSFunctions.cpp:537
-msgid "Toggle"
-msgstr "??"
+#: avidemux/gui_navigate.cpp:238
+msgid "Seeking"
+msgstr "???"
 
-#: avidemux/ADM_script/ADM_JSFunctions.cpp:558
-msgid "No Strategy"
-msgstr "???"
+#: avidemux/gui_navigate.cpp:319
+msgid "Finding black frames"
+msgstr "?????"
 
-#: avidemux/ADM_script/ADM_JSFunctions.cpp:559
-msgid "3:2 Pulldown"
-msgstr "3:2 Pulldown"
+#: avidemux/gui_navigate.cpp:394
+msgid "Cannot decode the frame."
+msgstr "???????"
 
-#: avidemux/ADM_script/ADM_JSFunctions.cpp:560
-msgid "Pal/Secam"
-msgstr "Pal/Secam"
-
-#: avidemux/ADM_script/ADM_JSFunctions.cpp:561
-#: avidemux/ADM_videoFilter/ADM_vidDecTelecide.cpp:86
-msgid "NTSC converted from PAL"
-msgstr "? PAL ?? NTSC"
-
-#: avidemux/ADM_script/ADM_JSFunctions.cpp:563
-msgid "menu"
-msgstr "??"
-
-#: avidemux/gui_savenew.cpp:88
-msgid "Dual audio can only be used in copy mode"
-msgstr "??????? ???? ???"
-
-#: avidemux/gui_savenew.cpp:88
-msgid "Select Copy as the video codec."
-msgstr "?? ???? ?????????"
-
-#: avidemux/gui_savenew.cpp:208
-#: avidemux/gui_savenew.cpp:224
-#: avidemux/gui_savenew.cpp:237
-msgid "Incompatible output format"
-msgstr "????????"
-
-#: avidemux/gui_savenew.cpp:258
-msgid "There is no second track"
-msgstr "??????"
-
-#: avidemux/gui_savenew.cpp:258
-msgid "Select a second audio track in the Audio menu."
-msgstr "??????????????"
-
-#: avidemux/gui_savenew.cpp:262
-msgid "Select dual audio AVI to write"
-msgstr "???? AVI ????"
-
-#: avidemux/gui_savenew.cpp:284
-#: avidemux/gui_savenew.cpp:302
-msgid "This cannot have packed VOP"
-msgstr "??????? VOP"
-
-#: avidemux/gui_savenew.cpp:284
-#: avidemux/gui_savenew.cpp:302
-msgid "It is not MPEG-4 video. File will not be saved."
-msgstr "?? MPEG-4 ???????????"
-
-#: avidemux/gui_savenew.cpp:348
-msgid ""
-"You may need smart copy.\n"
-"Enable it?"
-msgstr ""
-"??????????\n"
-" ???? ?"
-
-#: avidemux/gui_savenew.cpp:351
-#: avidemux/ADM_outputs/oplug_avi/op_savesmart.cpp:107
-msgid "Smart Copy"
-msgstr "?????"
-
-#: avidemux/gui_savenew.cpp:351
-msgid "_Q factor (set 4):"
-msgstr "_Q ?? (?? 4):"
-
-#: avidemux/ADM_ocr/ADM_ocrEngine.cpp:78
+#: avidemux/ADM_ocr/ADM_ocrEngine.cpp:75
 msgid "Output file error"
 msgstr "??????"
 
-#: avidemux/ADM_ocr/ADM_ocrEngine.cpp:78
+#: avidemux/ADM_ocr/ADM_ocrEngine.cpp:75
 #, c-format
 msgid "Could not open \"%s\" for writing."
 msgstr "????????? \"%s\""
 
-#: avidemux/ADM_ocr/ADM_ocrEngine.cpp:86
-#: avidemux/ADM_ocr/ADM_ocrEngine.cpp:92
+#: avidemux/ADM_ocr/ADM_ocrEngine.cpp:83
+#: avidemux/ADM_ocr/ADM_ocrEngine.cpp:89
 msgid "Input file error"
 msgstr "??????"
 
-#: avidemux/ADM_ocr/ADM_ocrEngine.cpp:86
+#: avidemux/ADM_ocr/ADM_ocrEngine.cpp:83
 msgid "Unknown source type"
 msgstr "???????"
 
-#: avidemux/ADM_ocr/ADM_ocrEngine.cpp:92
+#: avidemux/ADM_ocr/ADM_ocrEngine.cpp:89
 msgid "Bitmap source failed"
 msgstr "???????"
 
-#: avidemux/ADM_ocr/ADM_ocrEngine.cpp:100
+#: avidemux/ADM_ocr/ADM_ocrEngine.cpp:97
 msgid "Problem loading sub"
 msgstr "?? sub ?????"
 
-#: avidemux/ADM_ocr/ADM_ocrEngine.cpp:100
+#: avidemux/ADM_ocr/ADM_ocrEngine.cpp:97
 msgid "No subs"
 msgstr "?? sub"
 
-#: avidemux/ADM_ocr/ADM_vob2vobsub.cpp:254
+#: avidemux/ADM_ocr/ADM_vob2vobsub.cpp:250
 msgid "Ifo error"
 msgstr "Ifo ??"
 
-#: avidemux/ADM_ocr/ADM_vob2vobsub.cpp:254
+#: avidemux/ADM_ocr/ADM_vob2vobsub.cpp:250
 msgid "Error reading ifo file, aborting."
 msgstr "?? ifo ???????????"
 
-#: avidemux/ADM_ocr/ADM_vob2vobsub.cpp:262
+#: avidemux/ADM_ocr/ADM_vob2vobsub.cpp:258
 msgid "Cannot write .idx"
 msgstr "???? .idx"
 
-#: avidemux/ADM_ocr/ADM_vob2vobsub.cpp:275
+#: avidemux/ADM_ocr/ADM_vob2vobsub.cpp:271
 msgid "Cannot write .sub"
 msgstr "???? .sub"
 
-#: avidemux/ADM_ocr/ADM_vob2vobsub.cpp:287
+#: avidemux/ADM_ocr/ADM_vob2vobsub.cpp:283
 msgid "Problem opening the mpeg files"
 msgstr "?? mpeg ??????"
 
-#: avidemux/ADM_ocr/ADM_vob2vobsub.cpp:300
+#: avidemux/ADM_ocr/ADM_vob2vobsub.cpp:296
 msgid "Generating VobSub file"
 msgstr "???? VobSub ?"
 
-#: avidemux/ADM_ocr/adm_glyph.cpp:173
+#: avidemux/ADM_ocr/adm_glyph.cpp:169
 msgid "Could not write the file"
 msgstr "??????"
 
-#: avidemux/ADM_ocr/adm_glyph.cpp:221
+#: avidemux/ADM_ocr/adm_glyph.cpp:217
 #, c-format
 msgid "Could not read \"%s\"."
 msgstr "???? \"%s\"."
 
-#: avidemux/ADM_audiodevice/ADM_deviceoss.cpp:118
-msgid "Could not open OSS audio device"
-msgstr "???? OSS ????"
+#: avidemux/GUI_jobs.cpp:37
+msgid "Oops"
+msgstr "Oops"
 
-#: avidemux/ADM_audiodevice/ADM_deviceoss.cpp:118
-msgid "Check the permissions for /dev/dsp."
-msgstr "?? /dev/dsp ???"
+#: avidemux/GUI_jobs.cpp:37
+msgid "Something very wrong happened when building joblist."
+msgstr "????????????????"
 
-#: avidemux/ADM_audiofilter/audiofilter_buildchain.cpp:322
+#: avidemux/GUI_jobs.cpp:42
+msgid "There are no jobs stored"
+msgstr "????????"
+
+#: avidemux/ADM_audiofilter/audiofilter_buildchain.cpp:290
 msgid ""
 "The number of channels is greater than what the selected audio codec can do.\n"
 "Either change codec or use the mixer filter to have less channels."
 msgstr ""
-"??????????????????????\n"
-"????????????????????????"
+"????????????????????\n"
+"????????????????????????"
 
-#: avidemux/ADM_audiofilter/audiofilter_buildchain.cpp:417
-msgid "Encoder initialization failed"
-msgstr "?????????"
+#: avidemux/ADM_audiofilter/audiofilter_buildchain.cpp:301
+msgid "[BuildChain] Encoder initialization failed"
+msgstr "[???] ????????"
 
-#: avidemux/ADM_audiofilter/audiofilter_buildchain.cpp:417
+#: avidemux/ADM_audiofilter/audiofilter_buildchain.cpp:301
 msgid "Not activated."
 msgstr "?????"
 
-#: avidemux/ADM_audiofilter/audioencoder_vorbis.cpp:271
-msgid "VBR"
-msgstr "VBR"
+#: avidemux/ADM_coreUI/src/DIA_fileSel.cpp:142
+#, c-format
+msgid ""
+"%s already exists.\n"
+"\n"
+"Do you want to replace it?"
+msgstr ""
+"%s ?????\n"
+"\n"
+"??????"
 
-#: avidemux/ADM_audiofilter/audioencoder_vorbis.cpp:272
-msgid "Quality based"
-msgstr "????"
+#: avidemux/ADM_coreUI/src/DIA_fileSel.cpp:169
+#: avidemux/ADM_coreUI/src/DIA_fileSel.cpp:183
+msgid "It is possible that you are trying to overwrite an input file!"
+msgstr "?????????????"
 
-#: avidemux/ADM_audiofilter/audioencoder_vorbis.cpp:274
-#: avidemux/ADM_videoFilter/ADM_vidDGbob.cpp:91
-#: avidemux/ADM_videoFilter/ADM_vidMcDeint.cpp:111
-#: avidemux/ADM_videoFilter/ADM_vidDecDec.cpp:203
-#: avidemux/ADM_videoFilter/ADM_vidYadif.cpp:179
-msgid "_Mode:"
-msgstr "??(_M):"
+#: avidemux/ADM_coreUI/src/DIA_fileSel.cpp:194
+msgid "Cannot write the file"
+msgstr "??????"
 
-#: avidemux/ADM_audiofilter/audioencoder_vorbis.cpp:297
-msgid "Vorbis Configuration"
-msgstr "Vorbis ??"
+#: avidemux/ADM_coreUI/src/DIA_fileSel.cpp:194
+#, c-format
+msgid "No write access to \"%s\"."
+msgstr "??????????? \"%s\"?"
 
-#: avidemux/ADM_audiofilter/audioencoder_lame.cpp:221
-msgid "Joint stereo"
-msgstr "?????"
+#: plugins/ADM_videoFilters/ChromaShift/ADM_vidChromaShift.cpp:36
+msgid "Chroma shift"
+msgstr "????"
 
-#: avidemux/ADM_audiofilter/audioencoder_lame.cpp:224
-msgid "C_hannel mode:"
-msgstr "????(_H):"
+#: plugins/ADM_videoFilters/ChromaShift/ADM_vidChromaShift.cpp:39
+msgid "Shift chroma U/V to fix badly synced luma/chroma."
+msgstr "???? U/V ????????/?????"
 
-#: avidemux/ADM_audiofilter/audioencoder_lame.cpp:227
-msgid "CBR"
-msgstr "CBR"
+#: plugins/ADM_videoFilters/ChromaShift/gtk/DIA_chromaShift.cpp:63
+msgid "Chroma Shift"
+msgstr "????"
 
-#: avidemux/ADM_audiofilter/audioencoder_lame.cpp:228
-msgid "ABR"
-msgstr "ABR"
+#: plugins/ADM_videoFilters/ChromaShift/gtk/DIA_chromaShift.cpp:180
+msgid "ChromaShift"
+msgstr "????"
 
-#: avidemux/ADM_audiofilter/audioencoder_lame.cpp:230
-msgid "Extreme"
-msgstr "??"
+#: plugins/ADM_videoFilters/ChromaShift/gtk/DIA_chromaShift.cpp:194
+msgid "U Shift :"
+msgstr "U ??:"
 
-#: avidemux/ADM_audiofilter/audioencoder_lame.cpp:233
-msgid "Bit_rate mode:"
-msgstr "?????(_R):"
+#: plugins/ADM_videoFilters/ChromaShift/gtk/DIA_chromaShift.cpp:201
+msgid "V Shift :"
+msgstr "V ??:"
 
-#: avidemux/ADM_audiofilter/audioencoder_lame.cpp:252
-msgid "_Disable reservoir"
-msgstr "?????(_D)"
+#: plugins/ADM_videoFilters/ChromaShift/gtk/DIA_chromaShift.cpp:243
+msgid "<b>Preview</b>"
+msgstr "<b>??</b>"
 
-#: avidemux/ADM_audiofilter/audioencoder_lame.cpp:256
-msgid "LAME Configuration"
-msgstr "LAME ??"
+#: plugins/ADM_videoFilters/Deinterlace/ADM_vidDeinterlace.cpp:36
+msgid "Deinterlace"
+msgstr "Deinterlace"
 
-#: avidemux/gui_navigate.cpp:73
-#: avidemux/gui_navigate.cpp:111
-#: avidemux/gui_navigate.cpp:393
-#: avidemux/gui_navigate.cpp:429
-msgid "Decompressing error"
-msgstr "????"
+#: plugins/ADM_videoFilters/Deinterlace/ADM_vidDeinterlace.cpp:39
+msgid "Mask interlacing artifacts. Port of Smart deinterlace."
+msgstr "???????????????????"
 
-#: avidemux/gui_navigate.cpp:73
-msgid "Cannot decode next frame."
-msgstr "?????????"
+#: plugins/ADM_videoFilters/AddBorders/ADM_vidAddBorder.cpp:32
+msgid "Add black borders"
+msgstr "??"
 
-#: avidemux/gui_navigate.cpp:111
-#: avidemux/gui_navigate.cpp:429
-msgid "Cannot decode keyframe."
-msgstr "????????"
+#: plugins/ADM_videoFilters/AddBorders/ADM_vidAddBorder.cpp:35
+msgid "Add pure black border(s)."
+msgstr "???????"
 
-#: avidemux/gui_navigate.cpp:237
-msgid "Seeking"
-msgstr "???"
+#: plugins/ADM_videoFilters/AddBorders/ADM_vidAddBorder.cpp:214
+#: plugins/ADM_videoFilters/BlackenBorders/ADM_vidBlackenBorders.cpp:211
+msgid "_Left border:"
+msgstr "???(_L):"
 
-#: avidemux/gui_navigate.cpp:318
-msgid "Finding black frames"
-msgstr "?????"
+#: plugins/ADM_videoFilters/AddBorders/ADM_vidAddBorder.cpp:215
+#: plugins/ADM_videoFilters/BlackenBorders/ADM_vidBlackenBorders.cpp:212
+msgid "_Right border:"
+msgstr "???(_R):"
 
-#: avidemux/gui_navigate.cpp:393
-msgid "Cannot decode the frame."
-msgstr "???????"
+#: plugins/ADM_videoFilters/AddBorders/ADM_vidAddBorder.cpp:216
+#: plugins/ADM_videoFilters/BlackenBorders/ADM_vidBlackenBorders.cpp:213
+msgid "_Top border:"
+msgstr "????(_T):"
 
-#: avidemux/ADM_libraries/ADM_lvemux/ADM_muxer.cpp:85
-#: avidemux/ADM_outputs/oplug_mpeg/op_mpegpass.cpp:153
-#: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:193
-msgid "Incompatible audio"
-msgstr "??????"
+#: plugins/ADM_videoFilters/AddBorders/ADM_vidAddBorder.cpp:217
+#: plugins/ADM_videoFilters/BlackenBorders/ADM_vidBlackenBorders.cpp:214
+msgid "_Bottom border:"
+msgstr "????(_B):"
 
-#: avidemux/ADM_libraries/ADM_lvemux/ADM_muxer.cpp:85
-msgid "For DVD, audio must be MP2 or AC3."
-msgstr "DVD ?????? MP2 ? AC3"
+#: plugins/ADM_videoFilters/AddBorders/ADM_vidAddBorder.cpp:220
+msgid "Add Borders"
+msgstr "????"
 
-#: avidemux/ADM_libraries/ADM_lvemux/ADM_muxer.cpp:92
-msgid "lvemux init failed"
-msgstr "lvemux ?????"
+#: plugins/ADM_videoFilters/AddBorders/ADM_vidAddBorder.cpp:224
+#: plugins/ADM_videoFilters/BlackenBorders/ADM_vidBlackenBorders.cpp:222
+msgid "Incorrect parameters"
+msgstr "??????"
 
-#: avidemux/ADM_libraries/ADM_utilities/ADM_imageUtils.cpp:403
-msgid "Memory error"
-msgstr "?????"
+#: plugins/ADM_videoFilters/AddBorders/ADM_vidAddBorder.cpp:224
+#: plugins/ADM_videoFilters/BlackenBorders/ADM_vidBlackenBorders.cpp:222
+msgid "All parameters must be even and within range."
+msgstr "????????????????"
 
-#: avidemux/ADM_libraries/ADM_utilities/ADM_imageUtils.cpp:410
-msgid "Error converting to BMP"
-msgstr "?? BMP ??"
+#: plugins/ADM_videoFilters/KeepField/ADM_vidMergeField.cpp:36
+msgid "Merge fields"
+msgstr "????"
 
-#: avidemux/ADM_libraries/ADM_utilities/ADM_imageUtils.cpp:417
-#: avidemux/gtk_gui.cpp:1937
-msgid "Something bad happened"
-msgstr "???????"
+#: plugins/ADM_videoFilters/KeepField/ADM_vidMergeField.cpp:39
+msgid "Merge two pictures as if they were two fields."
+msgstr "????????????????"
 
-#: avidemux/ADM_libraries/ADM_utilities/ADM_imageUtils.cpp:472
-msgid "Cannot encode the frame"
-msgstr "???????"
+#: plugins/ADM_videoFilters/KeepField/ADM_vidStackField.cpp:35
+msgid "Stack fields"
+msgstr "????"
 
-#: avidemux/ADM_libraries/ADM_utilities/ADM_imageUtils.cpp:481
-#: avidemux/gtk_gui.cpp:1515
-#: avidemux/ADM_outputs/oplug_ogm/op_ogsave.cpp:113
-#: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:366
-#, c-format
-msgid "Cannot open \"%s\" for writing."
-msgstr "???? \"%s\" ????"
+#: plugins/ADM_videoFilters/KeepField/ADM_vidStackField.cpp:38
+msgid "Put two fields on top of one another."
+msgstr "????????????"
 
-#: avidemux/ADM_libraries/ADM_utilities/ADM_imageLoader.cpp:193
-msgid "Wrong Colorspace"
-msgstr "?????"
+#: plugins/ADM_videoFilters/KeepField/ADM_vidUnstackField.cpp:34
+msgid "Unstack fields"
+msgstr "?????"
 
-#: avidemux/ADM_libraries/ADM_utilities/ADM_imageLoader.cpp:193
-msgid "Only YV12/I420 or YUY2/I422 JPegs are supported"
-msgstr "??? YV12/I420 ? YUY2/I422 JPEG"
+#: plugins/ADM_videoFilters/KeepField/ADM_vidUnstackField.cpp:37
+msgid "Interleave top and bottom part of the picture."
+msgstr "????????????"
 
-#: avidemux/ADM_libraries/ADM_utilities/avidemutils.cpp:327
-msgid "NTSC 4:3"
-msgstr "NTSC 4:3"
+#: plugins/ADM_videoFilters/KeepField/ADM_vidHzStackField.cpp:33
+msgid "separatefields"
+msgstr "????"
 
-#: avidemux/ADM_libraries/ADM_utilities/avidemutils.cpp:328
-#: avidemux/ADM_libraries/ADM_utilities/avidemutils.cpp:329
-msgid "NTSC 16:9"
-msgstr "NTSC 16:9"
+#: plugins/ADM_videoFilters/KeepField/ADM_vidHzStackField.cpp:36
+msgid "Put botj fields side by side."
+msgstr "? botj ???????"
 
-#: avidemux/ADM_libraries/ADM_utilities/avidemutils.cpp:330
-msgid "PAL 4:3"
-msgstr "PAL 4:3"
+#: plugins/ADM_videoFilters/KeepField/ADM_vidSeparateField.cpp:34
+#: plugins/ADM_videoFilters/Fade/ADM_vidFade.cpp:41
+#: plugins/ADM_videoFilters/Fade/ADM_vidFade.cpp:64
+msgid "Fade"
+msgstr "??"
 
-#: avidemux/ADM_libraries/ADM_utilities/avidemutils.cpp:331
-msgid "PAL 16:9"
-msgstr "PAL 16:9"
+#: plugins/ADM_videoFilters/KeepField/ADM_vidSeparateField.cpp:37
+msgid "Each field becomes full picture, half sized."
+msgstr "?????????????????????"
 
-#: avidemux/ADM_libraries/ADM_lavformat/ADM_lavformat.cpp:381
-msgid "Incompatible frame rate"
-msgstr "???????"
+#: plugins/ADM_videoFilters/ResampleFps/ADM_vidResampleFPS.cpp:53
+#: plugins/ADM_videoFilters/ResampleFps/ADM_vidResampleFPS.cpp:76
+msgid "Resample fps"
+msgstr "???? fps"
 
-#: avidemux/guiplay.cpp:359
-msgid "Trouble initializing audio device"
-msgstr "???????????"
+#: plugins/ADM_videoFilters/ResampleFps/ADM_vidResampleFPS.cpp:56
+msgid "Change framerate while keeping duration."
+msgstr "?????????????"
 
-#: avidemux/ADM_audiocodec/ADM_codecwma.cpp:88
-#: avidemux/ADM_audiocodec/ADM_codecwma.cpp:200
-msgid "Internal error"
-msgstr "????"
+#: plugins/ADM_videoFilters/ResampleFps/ADM_vidResampleFPS.cpp:71
+msgid "_New frame rate:"
+msgstr "????(_N):"
 
-#: avidemux/ADM_audiocodec/ADM_codecwma.cpp:88
-msgid "Cannot open WMA2 codec."
-msgstr "???? WMA2 ????"
+#: plugins/ADM_videoFilters/ResampleFps/ADM_vidResampleFPS.cpp:72
+msgid "_Blend"
+msgstr "??(_B)"
 
-#: avidemux/ADM_audiocodec/ADM_codecwma.cpp:200
-msgid "Cannot open AMR codec."
-msgstr "???? AMR ????"
+#: plugins/ADM_videoFilters/MPDelogo/ADM_vidMPdelogo.cpp:43
+msgid "MPlayer delogo"
+msgstr "Mplayer ???"
 
-#: avidemux/gtk_gui.cpp:248
-msgid "Select ECMAScript to Run"
-msgstr "?? ECMAScript ???"
+#: plugins/ADM_videoFilters/MPDelogo/ADM_vidMPdelogo.cpp:46
+msgid "Blend a logo by interpolating its surrounding box."
+msgstr "?????????????????"
 
-#: avidemux/gtk_gui.cpp:329
-msgid "Obsolete"
-msgstr "??"
+#: plugins/ADM_videoFilters/MPDelogo/gtk/DIA_mpdelogo.cpp:203
+msgid "Mplayer Delogo"
+msgstr "Mplayer Delogo"
 
-#: avidemux/gtk_gui.cpp:357
-msgid "Not coded in this version"
-msgstr "????????"
+#: plugins/ADM_videoFilters/MPDelogo/gtk/DIA_mpdelogo.cpp:221
+msgid "X"
+msgstr "X"
 
-#: avidemux/gtk_gui.cpp:372
-msgid "Select Video/Image File..."
-msgstr "????/????..."
+#: plugins/ADM_videoFilters/MPDelogo/gtk/DIA_mpdelogo.cpp:228
+msgid "Y"
+msgstr "Y"
 
-#: avidemux/gtk_gui.cpp:425
-msgid ""
-"This is to be used to undo packed VOP on MPEG-4.\n"
-"Continue ?"
-msgstr ""
-"? MPEG-4 ????????? VOP ?\n"
-"????"
+#: plugins/ADM_videoFilters/MPDelogo/gtk/DIA_mpdelogo.cpp:235
+msgid "W"
+msgstr "W"
 
-#: avidemux/gtk_gui.cpp:427
-msgid "Select AVI File to Write"
-msgstr "?? AVI ?????"
+#: plugins/ADM_videoFilters/MPDelogo/gtk/DIA_mpdelogo.cpp:242
+msgid "H"
+msgstr "H"
 
-#: avidemux/gtk_gui.cpp:433
-msgid "Select OGM File to Write"
-msgstr "?? OGM ?????"
+#: plugins/ADM_videoFilters/MPDelogo/gtk/DIA_mpdelogo.cpp:249
+msgid "Band"
+msgstr "??"
 
-#: avidemux/gtk_gui.cpp:437
-#: avidemux/gtk_gui.cpp:449
-msgid "Select Workbench to Save"
-msgstr "?????????"
+#: plugins/ADM_videoFilters/Decimate/ADM_vidDecDec.cpp:154
+#: plugins/ADM_videoFilters/Decimate/ADM_vidDecDec.cpp:191
+msgid "Decomb Decimate"
+msgstr "???????????"
 
-#: avidemux/gtk_gui.cpp:479
-msgid "Select Raw File to Save"
-msgstr "?? RAW ?????"
+#: plugins/ADM_videoFilters/Decimate/ADM_vidDecDec.cpp:157
+msgid "Useful to remove dupes left by Telecide."
+msgstr "?????????????"
 
-#: avidemux/gtk_gui.cpp:489
-msgid "Select AVI File..."
-msgstr "?? AVI ??..."
+#: plugins/ADM_videoFilters/Decimate/ADM_vidDecDec.cpp:170
+msgid "Discard closer"
+msgstr "??????"
 
-#: avidemux/gtk_gui.cpp:492
-msgid "Select AVI File to Append..."
-msgstr "?? AVI ?????..."
+#: plugins/ADM_videoFilters/Decimate/ADM_vidDecDec.cpp:171
+msgid "Replace (interpolate)"
+msgstr "?? (??)"
 
-#: avidemux/gtk_gui.cpp:496
-msgid "Select File to Save Audio"
-msgstr "?????????"
+#: plugins/ADM_videoFilters/Decimate/ADM_vidDecDec.cpp:172
+msgid "Discard longer dupe (anim?s)"
+msgstr "?? longer dupe (anim?s)"
 
-#: avidemux/gtk_gui.cpp:530
-msgid "Select JPEG Sequence to Save"
-msgstr "?? JPEG ??????"
+#: plugins/ADM_videoFilters/Decimate/ADM_vidDecDec.cpp:173
+msgid "Pulldown dupe removal"
+msgstr "?? Pulldown ??"
 
-#: avidemux/gtk_gui.cpp:533
-msgid "Select BMP to Save"
-msgstr "?? BMP ????"
+#: plugins/ADM_videoFilters/Decimate/ADM_vidDecDec.cpp:176
+msgid "Fastest (no chroma, partial luma)"
+msgstr "?? (??????????)"
 
-#: avidemux/gtk_gui.cpp:537
-msgid "Select JPEG to Save"
-msgstr "?? JPG ????"
+#: plugins/ADM_videoFilters/Decimate/ADM_vidDecDec.cpp:177
+msgid "Fast (partial luma and chroma)"
+msgstr "? (?????????)"
 
-#: avidemux/gtk_gui.cpp:590
-#: avidemux/gtk_gui.cpp:699
-msgid "Select File to Save"
-msgstr "????????"
+#: plugins/ADM_videoFilters/Decimate/ADM_vidDecDec.cpp:178
+msgid "Medium (full luma, no chroma)"
+msgstr "? (??????????)"
 
-#: avidemux/gtk_gui.cpp:642
-msgid "Select MP3 to Load"
-msgstr "?? MP3 ????"
+#: plugins/ADM_videoFilters/Decimate/ADM_vidDecDec.cpp:179
+msgid "Slow (full luma and chroma)"
+msgstr "? (????????)"
 
-#: avidemux/gtk_gui.cpp:645
-msgid "Select AC3 to Load"
-msgstr "?? AC3 ????"
+#: plugins/ADM_videoFilters/Decimate/ADM_vidDecDec.cpp:183
+#: plugins/ADM_videoFilters/Yadif/ADM_vidYadif.cpp:146
+#: plugins/ADM_videoFilters/DgBob/ADM_vidDGbob.cpp:85
+#: plugins/ADM_videoFilters/McDeint/ADM_vidMcDeint.cpp:100
+#: plugins/ADM_audioEncoders/vorbis/audioencoder_vorbis.cpp:304
+msgid "_Mode:"
+msgstr "??(_M):"
 
-#: avidemux/gtk_gui.cpp:648
-msgid "Select WAV to Load"
-msgstr "?? WAV ????"
+#: plugins/ADM_videoFilters/Decimate/ADM_vidDecDec.cpp:185
+msgid "_Threshold 1:"
+msgstr "??? 1(_T):"
 
-#: avidemux/gtk_gui.cpp:686
-msgid "Go to Frame"
-msgstr "????"
+#: plugins/ADM_videoFilters/Decimate/ADM_vidDecDec.cpp:186
+msgid "T_hreshold 2:"
+msgstr "??? 2(_H):"
 
-#: avidemux/gtk_gui.cpp:686
-msgid "_Go to frame:"
-msgstr "????(_G):"
+#: plugins/ADM_videoFilters/Decimate/ADM_vidDecDec.cpp:187
+msgid "C_ycle:"
+msgstr "??(_Y):"
 
-#: avidemux/gtk_gui.cpp:691
-msgid "Out of bounds"
-msgstr "????"
+#: plugins/ADM_videoFilters/Pulldown/ADM_vidPulldown.cpp:38
+msgid "Pulldown"
+msgstr "Pulldown"
 
-#: avidemux/gtk_gui.cpp:697
-#: avidemux/gtk_gui.cpp:705
-#: avidemux/gtk_gui.cpp:1925
-msgid "Marker A > B"
-msgstr "?? A > B"
+#: plugins/ADM_videoFilters/Pulldown/ADM_vidPulldown.cpp:41
+msgid "Convert 24 fps to 30 fps by repeating fields."
+msgstr "??????? 24 fps ?? 30 fps?"
 
-#: avidemux/gtk_gui.cpp:697
-msgid "An invalid frame range has been selected.  Make sure marker A is placed before marker B."
-msgstr "?????????????  ???? A ???? B ????"
+#: plugins/ADM_videoFilters/CNR2/ADM_vidCNR2.cpp:82
+msgid "Cnr2"
+msgstr "Cnr2"
 
-#: avidemux/gtk_gui.cpp:705
-msgid "Cannot copy."
-msgstr "????"
+#: plugins/ADM_videoFilters/CNR2/ADM_vidCNR2.cpp:85
+msgid "Chroma noise reduction filter by MarcFD/Tritical.."
+msgstr "???????????? MarcFD/Tritical.."
 
-#: avidemux/gtk_gui.cpp:717
-msgid "Something bad happened (II))"
-msgstr "??????? (II))"
+#: plugins/ADM_videoFilters/CNR2/gtk/DIA_cnr2.cpp:122
+msgid "Chroma Noise Reduction 2"
+msgstr "?????? 2"
 
-#: avidemux/gtk_gui.cpp:731
-msgid "Are you sure?"
-msgstr "????"
+#: plugins/ADM_videoFilters/CNR2/gtk/DIA_cnr2.cpp:147
+msgid "<b>Scene change Treshold</b>"
+msgstr "<b>???????</b>"
 
-#: avidemux/gtk_gui.cpp:790
-msgid "Use custom value"
-msgstr "?????"
+#: plugins/ADM_videoFilters/CNR2/gtk/DIA_cnr2.cpp:166
+msgid "Sensibility"
+msgstr "???"
 
-#: avidemux/gtk_gui.cpp:791
-msgid "Frame Rate"
-msgstr "???"
+#: plugins/ADM_videoFilters/CNR2/gtk/DIA_cnr2.cpp:174
+msgid "Max"
+msgstr "??"
 
-#: avidemux/gtk_gui.cpp:791
-msgid "_Frames per second"
-msgstr "?????(_F)"
+#: plugins/ADM_videoFilters/CNR2/gtk/DIA_cnr2.cpp:189
+msgid "Luma :"
+msgstr "??:"
 
-#: avidemux/gtk_gui.cpp:794
-msgid "PAL - 25 FPS"
-msgstr "PAL - 25 FPS"
+#: plugins/ADM_videoFilters/CNR2/gtk/DIA_cnr2.cpp:196
+msgid "Chroma U :"
+msgstr "?? U :"
 
-#: avidemux/gtk_gui.cpp:795
-msgid "FILM - 24 FPS"
-msgstr "FILM - 24 FPS"
+#: plugins/ADM_videoFilters/CNR2/gtk/DIA_cnr2.cpp:203
+msgid "Chroma V :"
+msgstr "?? V :"
 
-#: avidemux/gtk_gui.cpp:796
-msgid "NTSC - 30 FPS"
-msgstr "NTSC - 30 FPS"
+#: plugins/ADM_videoFilters/CNR2/gtk/DIA_cnr2.cpp:246
+msgid "Narrow"
+msgstr "??"
 
-#: avidemux/gtk_gui.cpp:798
-msgid "Standard Frame Rate:"
-msgstr "?????:"
+#: plugins/ADM_videoFilters/CNR2/gtk/DIA_cnr2.cpp:271
+msgid "<b>Settings</b>"
+msgstr "<b>??</b>"
 
-#: avidemux/gtk_gui.cpp:804
-msgid "Change Frame Rate"
-msgstr "?????"
+#: plugins/ADM_videoFilters/CNR2/gtk/DIA_cnr2.cpp:290
+msgid "Use also chroma to detect scene change"
+msgstr "????????????"
 
-#: avidemux/gtk_gui.cpp:835
-msgid "Width is not a multiple of 8"
-msgstr "??? 8 ???"
+#: plugins/ADM_videoFilters/CNR2/gtk/DIA_cnr2.cpp:294
+msgid "<b>Mode</b>"
+msgstr "<b>??</b>"
 
-#: avidemux/gtk_gui.cpp:836
-msgid "This will make trouble for AVI files."
-msgstr "???? AVI ??????"
+#: plugins/ADM_videoFilters/PulldownRemoval/ADM_vidFieldUnblend.cpp:73
+msgid "Metrics"
+msgstr "??"
 
-#: avidemux/gtk_gui.cpp:846
-msgid "Rebuild all Keyframes?"
-msgstr "??????????"
+#: plugins/ADM_videoFilters/PulldownRemoval/ADM_vidFieldUnblend.cpp:73
+msgid "Do you want to print metrics on screen ?"
+msgstr "?????????????"
 
-#: avidemux/gtk_gui.cpp:902
-msgid "Permission error"
-msgstr "??????"
+#: plugins/ADM_videoFilters/Logo/ADM_vidLogo.cpp:64
+#: plugins/ADM_videoFilters/Logo/ADM_vidLogo.cpp:86
+msgid "Logo"
+msgstr "??"
 
-#: avidemux/gtk_gui.cpp:905
-#, c-format
-msgid "\"%s\" does not exist."
-msgstr "\"%s\" ????"
+#: plugins/ADM_videoFilters/Logo/ADM_vidLogo.cpp:67
+msgid "Add a png as logo."
+msgstr "???? png ?????"
 
-#: avidemux/gtk_gui.cpp:908
-msgid "Error opening file"
-msgstr "??????"
+#: plugins/ADM_videoFilters/Logo/ADM_vidLogo.cpp:79
+msgid "_Logo (jpg file):"
+msgstr "?? (jpg ?)(_L):"
 
-#: avidemux/gtk_gui.cpp:908
-#, c-format
-msgid "Error opening \"%s\"."
-msgstr "?? \"%s\" ???"
+#: plugins/ADM_videoFilters/Logo/ADM_vidLogo.cpp:79
+msgid "Select JPEG file"
+msgstr "?? JPEG ?"
 
-#: avidemux/gtk_gui.cpp:952
-msgid "Cannot open project using the video loader."
-msgstr "???????????????"
+#: plugins/ADM_videoFilters/Logo/ADM_vidLogo.cpp:80
+msgid "_X Position:"
+msgstr "_X ??:"
 
-#: avidemux/gtk_gui.cpp:953
-msgid "Try 'File' -> 'Load/Run Project...'"
-msgstr "?? '??' -> '??/?? ??...'"
+#: plugins/ADM_videoFilters/Logo/ADM_vidLogo.cpp:81
+msgid "_Y Position:"
+msgstr "_Y ??:"
 
-#: avidemux/gtk_gui.cpp:955
-msgid "Could not open the file"
-msgstr "???????"
+#: plugins/ADM_videoFilters/Logo/ADM_vidLogo.cpp:82
+msgid "_Alpha:"
+msgstr "??(_A):"
 
-#: avidemux/gtk_gui.cpp:989
-msgid "Multiple Audio Tracks"
-msgstr "???"
+#: plugins/ADM_videoFilters/Yadif/ADM_vidYadif.cpp:76
+#: plugins/ADM_videoFilters/Yadif/ADM_vidYadif.cpp:151
+msgid "yadif"
+msgstr "yadif"
 
-#: avidemux/gtk_gui.cpp:989
-msgid ""
-"The file you just loaded contains several audio tracks.\n"
-"Go to Audio->MainTrack to select the active one."
-msgstr ""
-"????????????????\n"
-"?? ??->???? ??????????"
+#: plugins/ADM_videoFilters/Yadif/ADM_vidYadif.cpp:79
+msgid "Yet Another DeInterlacer. Ported from MPlayer."
+msgstr "? MPlayer ?????????????"
 
-#: avidemux/gtk_gui.cpp:1043
-msgid "No audio decoder found for this file"
-msgstr "?????????????????"
+#: plugins/ADM_videoFilters/Yadif/ADM_vidYadif.cpp:136
+msgid "Temporal & spatial check"
+msgstr "???????"
 
-#: avidemux/gtk_gui.cpp:1044
-msgid "Save (A+V) will generate bad AVI. Save audio will work."
-msgstr "?? (A+V) ?????? AVI??????????"
+#: plugins/ADM_videoFilters/Yadif/ADM_vidYadif.cpp:137
+msgid "Bob, temporal & spatial check"
+msgstr "????????????"
 
-#: avidemux/gtk_gui.cpp:1103
-msgid "Something failed when appending"
-msgstr "??????????"
+#: plugins/ADM_videoFilters/Yadif/ADM_vidYadif.cpp:138
+msgid "Skip spatial temporal check"
+msgstr "????????"
 
-#: avidemux/gtk_gui.cpp:1114
-#: avidemux/gtk_gui.cpp:1944
-msgid "Something bad happened (II)"
-msgstr "??????? (II)"
+#: plugins/ADM_videoFilters/Yadif/ADM_vidYadif.cpp:139
+msgid "Bob, skip spatial temporal check"
+msgstr "?????????????"
 
-#: avidemux/gtk_gui.cpp:1178
-msgid "Cannot save the audio in copy mode"
-msgstr "??? ???? ???????"
+#: plugins/ADM_videoFilters/Yadif/ADM_vidYadif.cpp:142
+#: plugins/ADM_videoFilters/Tdeint/DIA_tdeint.cpp:33
+msgid "Bottom field first"
+msgstr "??????"
 
-#: avidemux/gtk_gui.cpp:1178
-msgid "Select WAV PCM as the audio codec, otherwise the audio file would be raw PCM."
-msgstr "?? WAV PCM ???????????????????? PCM?"
+#: plugins/ADM_videoFilters/Yadif/ADM_vidYadif.cpp:143
+#: plugins/ADM_videoFilters/Tdeint/DIA_tdeint.cpp:32
+msgid "Top field first"
+msgstr "??????"
 
-#: avidemux/gtk_gui.cpp:1186
-#: avidemux/gtk_gui.cpp:1554
-msgid "Saving audio"
-msgstr "??????"
+#: plugins/ADM_videoFilters/Yadif/ADM_vidYadif.cpp:147
+msgid "_Order:"
+msgstr "??(_O):"
 
-#: avidemux/gtk_gui.cpp:1263
-msgid "Get Frame"
-msgstr "????"
+#: plugins/ADM_videoFilters/Denoise/ADM_vidDenoise.cpp:43
+msgid "Port of Transcode DNR."
+msgstr "? DNR ???????"
 
-#: avidemux/gtk_gui.cpp:1263
-msgid "Cannot get this frame to save"
-msgstr "???????????"
+#: plugins/ADM_videoFilters/Denoise/ADM_vidDenoise.cpp:382
+msgid "_Luma lock:"
+msgstr "????(_L):"
 
-#: avidemux/gtk_gui.cpp:1301
-msgid "Mark A > B"
-msgstr "?? A > B"
+#: plugins/ADM_videoFilters/Denoise/ADM_vidDenoise.cpp:383
+msgid "C_hroma lock:"
+msgstr "????(_H):"
 
-#: avidemux/gtk_gui.cpp:1301
-msgid "Set your markers correctly."
-msgstr "??????????"
+#: plugins/ADM_videoFilters/Denoise/ADM_vidDenoise.cpp:384
+msgid "L_uma threshold:"
+msgstr "?????(_U):"
 
-#: avidemux/gtk_gui.cpp:1310
-msgid "Saving as set of jpegs"
-msgstr "??????? jpeg ?"
+#: plugins/ADM_videoFilters/Denoise/ADM_vidDenoise.cpp:385
+msgid "Ch_roma threshold:"
+msgstr "?????(_R):"
 
-#: avidemux/gtk_gui.cpp:1316
-msgid "Cannot decode frame"
-msgstr "??????"
+#: plugins/ADM_videoFilters/Denoise/ADM_vidDenoise.cpp:387
+msgid "_Scene change:"
+msgstr "????(_S):"
 
-#: avidemux/gtk_gui.cpp:1316
-msgid "Aborting."
-msgstr "?????"
+#: plugins/ADM_videoFilters/MSharpen/ADM_vidMSharpen.cpp:81
+#: plugins/ADM_videoFilters/MSharpen/ADM_vidMSharpen.cpp:165
+msgid "MSharpen"
+msgstr "MSharpen"
 
-#: avidemux/gtk_gui.cpp:1327
-#: avidemux/gtk_gui.cpp:1346
-#: avidemux/gtk_gui.cpp:2288
-msgid "Done"
-msgstr "??"
+#: plugins/ADM_videoFilters/MSharpen/ADM_vidMSharpen.cpp:84
+msgid "Sharpen edges without amplifying noise. By Donald Graft."
+msgstr "???????????????? Donald Graft?"
 
-#: avidemux/gtk_gui.cpp:1327
-#, c-format
-msgid "Saved %d images."
-msgstr "??? %d ????"
+#: plugins/ADM_videoFilters/MSharpen/ADM_vidMSharpen.cpp:156
+msgid "_Mask"
+msgstr "??(_M)"
 
-#: avidemux/gtk_gui.cpp:1329
-msgid "Error"
-msgstr "??"
+#: plugins/ADM_videoFilters/MSharpen/ADM_vidMSharpen.cpp:157
+msgid "_High Q"
+msgstr "? Q(_H)"
 
-#: avidemux/gtk_gui.cpp:1329
-msgid "Could not save all images."
-msgstr "?????????"
+#: plugins/ADM_videoFilters/MSharpen/ADM_vidMSharpen.cpp:159
+#: plugins/ADM_videoFilters/DgBob/ADM_vidDGbob.cpp:86
+#: plugins/ADM_videoFilters/BlendRemover/ADM_vidBlendRemoval.cpp:68
+#: plugins/ADM_videoFilters/BlendRemover/ADM_vidHardIvtcRemoval.cpp:78
+#: plugins/ADM_videoFilters/KernelDeint/ADM_vidKernelDeint.cpp:75
+#: plugins/ADM_videoFilters/MSmooth/ADM_vidMsmooth.cpp:183
+msgid "_Threshold:"
+msgstr "???:"
 
-#: avidemux/gtk_gui.cpp:1346
-#, c-format
-msgid "Saved \"%s\"."
-msgstr "??? \"%s\"?"
+#: plugins/ADM_videoFilters/Rotate/ADM_vidRotate.cpp:53
+#: plugins/ADM_videoFilters/Rotate/ADM_vidRotate.cpp:266
+msgid "Rotate"
+msgstr "??"
 
-#: avidemux/gtk_gui.cpp:1348
-msgid "BMP op failed"
-msgstr "BMP ????"
+#: plugins/ADM_videoFilters/Rotate/ADM_vidRotate.cpp:56
+msgid "Rotate the picture by 90, 180 or 270 degrees."
+msgstr "???? 90?180 ? 270 ??"
 
-#: avidemux/gtk_gui.cpp:1348
-#, c-format
-msgid "Saving %s as a BMP file failed."
-msgstr "?? %s ? BMP ????"
+#: plugins/ADM_videoFilters/Rotate/ADM_vidRotate.cpp:260
+msgid "90 degrees"
+msgstr "90 ?"
 
-#: avidemux/gtk_gui.cpp:1370
-#: avidemux/gtk_gui.cpp:1436
-msgid "Failed to open the file"
-msgstr "???????"
+#: plugins/ADM_videoFilters/Rotate/ADM_vidRotate.cpp:260
+msgid "90?"
+msgstr "90?"
 
-#: avidemux/gtk_gui.cpp:1370
-#: avidemux/gtk_gui.cpp:1436
-msgid "Not a WAV file?"
-msgstr "???? WAV ??"
+#: plugins/ADM_videoFilters/Rotate/ADM_vidRotate.cpp:261
+msgid "180 degrees"
+msgstr "180 ?"
 
-#: avidemux/gtk_gui.cpp:1371
-msgid "WAV open file failed..."
-msgstr "WAV ??????..."
+#: plugins/ADM_videoFilters/Rotate/ADM_vidRotate.cpp:261
+msgid "180?"
+msgstr "180?"
 
-#: avidemux/gtk_gui.cpp:1508
-msgid "Cannot decompress audio frame"
-msgstr "????????"
+#: plugins/ADM_videoFilters/Rotate/ADM_vidRotate.cpp:262
+msgid "270 degrees"
+msgstr "270 ?"
 
-#: avidemux/gtk_gui.cpp:1522
-msgid "Memory Error"
-msgstr "?????"
+#: plugins/ADM_videoFilters/Rotate/ADM_vidRotate.cpp:262
+msgid "270?"
+msgstr "270?"
 
-#: avidemux/gtk_gui.cpp:1575
-msgid "No frames to encode"
-msgstr "??????????"
+#: plugins/ADM_videoFilters/Rotate/ADM_vidRotate.cpp:264
+msgid "_Angle:"
+msgstr "??(_A):"
 
-#: avidemux/gtk_gui.cpp:1575
-msgid "Please check markers. Is \"A>\" == \">B\"?"
-msgstr "?????? ? \"A>\" == \">B\"?"
+#: plugins/ADM_videoFilters/TemporalCleaner/ADM_vidVlad.cpp:72
+#: plugins/ADM_videoFilters/TemporalCleaner/ADM_vidVlad.cpp:96
+msgid "Temporal Cleaner"
+msgstr "?????"
 
-#: avidemux/gtk_gui.cpp:1714
-msgid "Saving raw video stream"
-msgstr "??????????"
+#: plugins/ADM_videoFilters/TemporalCleaner/ADM_vidVlad.cpp:75
+msgid "Vlad59's Avisynth port of Jim Casaburi's denoiser."
+msgstr "Vlad59 ? Avisynth ? Jim Casaburi ??????????"
 
-#: avidemux/gtk_gui.cpp:1860
-msgid "Checking video"
-msgstr "??????"
+#: plugins/ADM_videoFilters/TemporalCleaner/ADM_vidVlad.cpp:91
+msgid "_Luma temporal threshold:"
+msgstr "???????(_L):"
 
-#: avidemux/gtk_gui.cpp:1876
-msgid "No error found"
-msgstr "??????"
+#: plugins/ADM_videoFilters/TemporalCleaner/ADM_vidVlad.cpp:92
+msgid "Ch_roma temporal threshold:"
+msgstr "???????(_R):"
 
-#: avidemux/gtk_gui.cpp:1880
-#, c-format
-msgid "Errors found in %u frames"
-msgstr "? %u ??????"
+#: plugins/ADM_videoFilters/Delta/ADM_vidDelta.cpp:40
+msgid "Luma delta"
+msgstr "????"
 
-#: avidemux/gtk_gui.cpp:1898
-msgid "Cannot decompress the audio stream"
-msgstr "?????????"
+#: plugins/ADM_videoFilters/Delta/ADM_vidDelta.cpp:43
+msgid "Difference between current and previous picture."
+msgstr "????????????????"
 
-#: avidemux/gtk_gui.cpp:1898
-msgid "Switch audio codec to Copy."
-msgstr "??????????????"
+#: plugins/ADM_videoFilters/Unblend/ADM_vidUnblend.cpp:47
+#: plugins/ADM_videoFilters/LargeMedian/ADM_vidLargeMedian.cpp:33
+msgid "Median (5x5)"
+msgstr "??? (5x5)"
 
-#: avidemux/gtk_gui.cpp:1925
-msgid "Cannot delete the selection."
-msgstr "??????????"
+#: plugins/ADM_videoFilters/Unblend/ADM_vidUnblend.cpp:50
+msgid "Unblend by Bach"
+msgstr "? Bach ???"
 
-#: avidemux/gtk_gui.cpp:1930
-msgid "You can't remove all frames"
-msgstr "??????????"
+#: plugins/ADM_videoFilters/lavDeinterlace/ADM_lavpp_deint.cpp:90
+#: plugins/ADM_videoFilters/lavDeinterlace/ADM_lavpp_deint.cpp:120
+msgid "libavcodec deinterlacer"
+msgstr "libavcodec ????"
 
-#: avidemux/gtk_gui.cpp:2006
-msgid "Could not get tracks info"
-msgstr "????????"
+#: plugins/ADM_videoFilters/lavDeinterlace/ADM_lavpp_deint.cpp:93
+msgid "All FFmpeg deinterlace filters (bicubic, median, ...)."
+msgstr "?? FFmpeg ????? (????????...)?"
 
-#: avidemux/gtk_gui.cpp:2014
-msgid "Take audio from video file"
-msgstr "???????"
+#: plugins/ADM_videoFilters/lavDeinterlace/ADM_lavpp_deint.cpp:107
+msgid "Linear blend"
+msgstr "????"
 
-#: avidemux/gtk_gui.cpp:2015
-#: avidemux/gtk_gui.cpp:2114
-msgid "No audio"
-msgstr "????"
+#: plugins/ADM_videoFilters/lavDeinterlace/ADM_lavpp_deint.cpp:108
+msgid "Linear interpolate"
+msgstr "????"
 
-#: avidemux/gtk_gui.cpp:2016
-#: avidemux/gtk_gui.cpp:2115
-msgid "External AC3"
-msgstr "??? AC3"
+#: plugins/ADM_videoFilters/lavDeinterlace/ADM_lavpp_deint.cpp:109
+msgid "Cubic interpolate"
+msgstr "????"
 
-#: avidemux/gtk_gui.cpp:2016
-#: avidemux/gtk_gui.cpp:2115
-msgid "Take audio from external AC3 file"
-msgstr "???? AC3 ?????"
+#: plugins/ADM_videoFilters/lavDeinterlace/ADM_lavpp_deint.cpp:110
+msgid "Median interpolate"
+msgstr "????"
 
-#: avidemux/gtk_gui.cpp:2017
-#: avidemux/gtk_gui.cpp:2116
-msgid "External MP3"
-msgstr "??? MP3"
+#: plugins/ADM_videoFilters/lavDeinterlace/ADM_lavpp_deint.cpp:111
+msgid "FFmpeg deint"
+msgstr "FFmpeg ???"
 
-#: avidemux/gtk_gui.cpp:2017
-#: avidemux/gtk_gui.cpp:2116
-msgid "Take audio from external MP3 file"
-msgstr "???? MP3 ?????"
+#: plugins/ADM_videoFilters/lavDeinterlace/ADM_lavpp_deint.cpp:115
+msgid "_Deinterlacing:"
+msgstr "???(_D):"
 
-#: avidemux/gtk_gui.cpp:2018
-#: avidemux/gtk_gui.cpp:2117
-msgid "External WAV"
-msgstr "??? WAV"
+#: plugins/ADM_videoFilters/lavDeinterlace/ADM_lavpp_deint.cpp:116
+msgid "_Autolevel"
+msgstr "????(_A)"
 
-#: avidemux/gtk_gui.cpp:2018
-#: avidemux/gtk_gui.cpp:2117
-msgid "Take audio from external WAV file"
-msgstr "???? WAV ?????"
+#: plugins/ADM_videoFilters/Telecide/ADM_vidDecTelecide.cpp:53
+#: plugins/ADM_videoFilters/Telecide/ADM_vidDecTelecide.cpp:123
+msgid "Decomb Telecide"
+msgstr "??????????"
 
-#: avidemux/gtk_gui.cpp:2022
-#: avidemux/gtk_gui.cpp:2122
-msgid "_Audio source:"
-msgstr "????(_A):"
+#: plugins/ADM_videoFilters/Telecide/ADM_vidDecTelecide.cpp:56
+msgid "Great deinterlacing package including IVTC."
+msgstr "???? IVTC ???????"
 
-#: avidemux/gtk_gui.cpp:2026
-#: avidemux/gtk_gui.cpp:2123
-msgid "_External file:"
-msgstr "????(_E):"
+#: plugins/ADM_videoFilters/Telecide/ADM_vidDecTelecide.cpp:75
+msgid "No strategy"
+msgstr "????"
 
-#: avidemux/gtk_gui.cpp:2026
-#: avidemux/gtk_gui.cpp:2123
-#: avidemux/ADM_videoFilter/ADM_vidParticle.cpp:191
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:324
-msgid "Select file"
-msgstr "????"
+#: plugins/ADM_videoFilters/Telecide/ADM_vidDecTelecide.cpp:76
+msgid "3:2 pulldown"
+msgstr "3:2 pulldown"
 
-#: avidemux/gtk_gui.cpp:2035
-#, c-format
-msgid "Audio track %d (%s/%d channels/%d kbit per s/%d ms shift)"
-msgstr "?? %d (%s/%d ??? s/%d ms ?? /%d kbit )"
+#: plugins/ADM_videoFilters/Telecide/ADM_vidDecTelecide.cpp:77
+msgid "PAL/SECAM"
+msgstr "PAL/SECAM"
 
-#: avidemux/gtk_gui.cpp:2041
-msgid "_Track from video:"
-msgstr "??????(_T):"
+#: plugins/ADM_videoFilters/Telecide/ADM_vidDecTelecide.cpp:83
+#: plugins/ADM_videoFilters/DgBob/ADM_vidDGbob.cpp:76
+#: plugins/ADM_videoFilters/KernelDeint/ADM_vidKernelDeint.cpp:70
+#: plugins/ADM_videoFilters/McDeint/ADM_vidMcDeint.cpp:97
+msgid "Bottom"
+msgstr "??"
 
-#: avidemux/gtk_gui.cpp:2051
-msgid "Main Audio Track"
-msgstr "????"
+#: plugins/ADM_videoFilters/Telecide/ADM_vidDecTelecide.cpp:87
+msgid "Never"
+msgstr "??"
 
-#: avidemux/gtk_gui.cpp:2057
-#: avidemux/gtk_gui.cpp:2135
-msgid "Cannot load"
-msgstr "????"
+#: plugins/ADM_videoFilters/Telecide/ADM_vidDecTelecide.cpp:88
+msgid "If still combed"
+msgstr "?????????"
 
-#: avidemux/gtk_gui.cpp:2057
-#: avidemux/gtk_gui.cpp:2135
-msgid "The selected audio file does not exist."
-msgstr "??????????"
+#: plugins/ADM_videoFilters/Telecide/ADM_vidDecTelecide.cpp:89
+msgid "Always"
+msgstr "??"
 
-#: avidemux/gtk_gui.cpp:2132
-msgid "Second Audio Track"
-msgstr "????"
+#: plugins/ADM_videoFilters/Telecide/ADM_vidDecTelecide.cpp:94
+msgid "None but compute"
+msgstr "????"
 
-#: avidemux/gtk_gui.cpp:2164
-msgid "Error loading the MP3 file"
-msgstr "?? MP3 ????"
+#: plugins/ADM_videoFilters/Telecide/ADM_vidDecTelecide.cpp:95
+msgid "Postproc on best match"
+msgstr "????????????"
 
-#: avidemux/gtk_gui.cpp:2173
-#: avidemux/gtk_gui.cpp:2195
-#: avidemux/gtk_gui.cpp:2217
-msgid "Second track loaded"
-msgstr "???????"
+#: plugins/ADM_videoFilters/Telecide/ADM_vidDecTelecide.cpp:96
+msgid "Postproc and show zones (debug)"
+msgstr "????????? (??)"
 
-#: avidemux/gtk_gui.cpp:2187
-msgid "Error loading the AC3 file"
-msgstr "?? AC3 ????"
+#: plugins/ADM_videoFilters/Telecide/ADM_vidDecTelecide.cpp:97
+msgid "Process image (not fields)"
+msgstr "???? (???)"
 
-#: avidemux/gtk_gui.cpp:2209
-msgid "Error loading the WAV file"
-msgstr "?? WAV ????"
+#: plugins/ADM_videoFilters/Telecide/ADM_vidDecTelecide.cpp:98
+msgid "Process image (not fields), debug"
+msgstr "???? (???)???"
 
-#: avidemux/gtk_gui.cpp:2276
-msgid "Saving failed"
-msgstr "????"
+#: plugins/ADM_videoFilters/Telecide/ADM_vidDecTelecide.cpp:102
+msgid "_Strategy:"
+msgstr "??(_S):"
 
-#: avidemux/gtk_gui.cpp:2276
-msgid "Saving the job failed. Maybe you have permission issue with ~/.avidemux"
-msgstr "???????????????? ~/.avidemux"
+#: plugins/ADM_videoFilters/Telecide/ADM_vidDecTelecide.cpp:103
+#: plugins/ADM_videoFilters/Tdeint/DIA_tdeint.cpp:77
+#: plugins/ADM_videoFilters/DgBob/ADM_vidDGbob.cpp:84
+#: plugins/ADM_videoFilters/KernelDeint/ADM_vidKernelDeint.cpp:74
+msgid "_Field order:"
+msgstr "??????(_F):"
 
-#: avidemux/gtk_gui.cpp:2288
-#, c-format
-msgid "File %s has been successfully saved."
-msgstr "?? %s ????????"
+#: plugins/ADM_videoFilters/Telecide/ADM_vidDecTelecide.cpp:104
+msgid "_Postprocessing:"
+msgstr "????(_P):"
 
-#: avidemux/gtk_gui.cpp:2292
-#, c-format
-msgid "File %s was NOT saved correctly."
-msgstr "?? %s ??????"
+#: plugins/ADM_videoFilters/Telecide/ADM_vidDecTelecide.cpp:105
+msgid "_Try backward:"
+msgstr "????(_T):"
 
-#: avidemux/gtk_gui.cpp:2458
-msgid "AvsProxy"
-msgstr "AvsProxy"
+#: plugins/ADM_videoFilters/Telecide/ADM_vidDecTelecide.cpp:107
+msgid "_Direct threshold:"
+msgstr "?????(_D):"
 
-#: avidemux/gtk_gui.cpp:2458
-msgid ""
-"Failed to connect to avsproxy.\n"
-"Is it running ?"
-msgstr ""
-"????? avsproxy?\n"
-"???????"
+#: plugins/ADM_videoFilters/Telecide/ADM_vidDecTelecide.cpp:108
+msgid "_Backward threshold:"
+msgstr "?????(_B):"
 
-#: avidemux/gtk_gui.cpp:2463
-msgid "avsproxy"
-msgstr "avsproxy"
+#: plugins/ADM_videoFilters/Telecide/ADM_vidDecTelecide.cpp:109
+msgid "_Noise threshold:"
+msgstr "?????(_N):"
 
-#: avidemux/gtk_gui.cpp:2491
-msgid "Frame type:"
-msgstr "????:"
+#: plugins/ADM_videoFilters/Telecide/ADM_vidDecTelecide.cpp:110
+msgid "Postp_rocessing threshold:"
+msgstr "???????(_R):"
 
-#: avidemux/gtk_gui.cpp:2492
-msgid "Frame size:"
-msgstr "????:"
+#: plugins/ADM_videoFilters/Telecide/ADM_vidDecTelecide.cpp:112
+msgid "_Use chroma to decide"
+msgstr "???????(_U)"
 
-#: avidemux/gtk_gui.cpp:2494
-msgid "Frame Hex Dump"
-msgstr "??16 ????"
+#: plugins/ADM_videoFilters/Telecide/ADM_vidDecTelecide.cpp:113
+msgid "Sho_w info"
+msgstr "????(_W)"
 
-#: avidemux/ADM_outputs/oplug_mpeg/op_mpegpass.cpp:89
-msgid "This is not MPEG compatible"
-msgstr "??????? MPEG"
+#: plugins/ADM_videoFilters/Telecide/ADM_vidDecTelecide.cpp:114
+msgid "Debu_g"
+msgstr "??(_D)"
 
-#: avidemux/ADM_outputs/oplug_mpeg/op_mpegpass.cpp:89
-msgid "You can't use the Copy codec."
-msgstr "????????????"
+#: plugins/ADM_videoFilters/Telecide/ADM_vidDecTelecide.cpp:115
+msgid "Bl_end"
+msgstr "??(_E)"
 
-#: avidemux/ADM_outputs/oplug_mpeg/op_mpegpass.cpp:94
-#: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:142
-#: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:153
-msgid "There is no audio track"
-msgstr "????"
+#: plugins/ADM_videoFilters/BlackenBorders/ADM_vidBlackenBorders.cpp:58
+msgid "Blacken borders"
+msgstr "????"
 
-#: avidemux/ADM_outputs/oplug_mpeg/op_mpegpass.cpp:101
-msgid "The first frame is not intra frame"
-msgstr "???????????"
+#: plugins/ADM_videoFilters/BlackenBorders/ADM_vidBlackenBorders.cpp:61
+msgid "Fill borders with pure black. Doesn't alter size."
+msgstr "??????????????"
 
-#: avidemux/ADM_outputs/oplug_mpeg/op_mpegpass.cpp:101
-msgid "Use the &lt;&lt; and the &gt;&gt; buttons to move using Intra frames."
-msgstr "?? &lt;&lt; ? &gt;&gt; ???????????????"
+#: plugins/ADM_videoFilters/BlackenBorders/ADM_vidBlackenBorders.cpp:217
+msgid "Blacken Borders"
+msgstr "????"
 
-#: avidemux/ADM_outputs/oplug_mpeg/op_mpegpass.cpp:113
-#: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:163
-msgid "Audio track is not suitable"
-msgstr "????"
+#: plugins/ADM_videoFilters/Tdeint/ADM_vidTdeint.cpp:152
+#: plugins/ADM_videoFilters/Tdeint/DIA_tdeint.cpp:107
+msgid "TDeint"
+msgstr "TDeint"
 
-#: avidemux/ADM_outputs/oplug_mpeg/op_mpegpass.cpp:153
-#: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:173
-msgid "For VCD, audio must be 44.1 kHz MP2."
-msgstr "VCD ?????? 44.1 kHz MP2?"
+#: plugins/ADM_videoFilters/Tdeint/ADM_vidTdeint.cpp:155
+msgid "Motion adaptative deinterlacer by Tritical."
+msgstr "???????????? Tritical?"
 
-#: avidemux/ADM_outputs/oplug_mpeg/op_mpegpass.cpp:182
-msgid "For DVD, audio must be 48 kHz MP2(stereo), AC3, DTS or LPCM (stereo)."
-msgstr "DVD ?????? 48 kHz MP2(??), AC3, DTS ? LPCM (??)?"
+#: plugins/ADM_videoFilters/Tdeint/DIA_tdeint.cpp:31
+#: plugins/ADM_videoFilters/Tdeint/DIA_tdeint.cpp:37
+msgid "Auto (might not work)"
+msgstr "?? (????)"
 
-#: avidemux/ADM_outputs/oplug_mpeg/op_mpegpass.cpp:222
-msgid "---"
-msgstr "---"
+#: plugins/ADM_videoFilters/Tdeint/DIA_tdeint.cpp:38
+msgid "Bottom field (keep top)"
+msgstr "????(????)"
 
-#: avidemux/ADM_outputs/oplug_mpeg/op_mpegpass.cpp:223
-#: avidemux/ADM_outputs/oplug_avi/op_avisavecopy.cpp:109
-#: avidemux/ADM_outputs/oplug_avi/op_avisavecopy_unpack.cpp:111
-#: avidemux/ADM_outputs/oplug_avi/op_avisavecopy_pack.cpp:134
-msgid "Saving"
-msgstr "???"
+#: plugins/ADM_videoFilters/Tdeint/DIA_tdeint.cpp:39
+msgid "Top field (keep bottom)"
+msgstr "????(????)"
 
-#: avidemux/ADM_outputs/oplug_mpeg/op_mpegpass.cpp:230
-#: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:287
-msgid "MPEG TS"
-msgstr "MPEG TS"
+#: plugins/ADM_videoFilters/Tdeint/DIA_tdeint.cpp:44
+msgid "Cubic interpolation"
+msgstr "?????"
 
-#: avidemux/ADM_outputs/oplug_mpeg/op_mpegpass.cpp:231
-#: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:288
-msgid "MPEG VCD"
-msgstr "MPEG VCD"
+#: plugins/ADM_videoFilters/Tdeint/DIA_tdeint.cpp:45
+msgid "Modified ELA"
+msgstr "??? ELA"
 
-#: avidemux/ADM_outputs/oplug_mpeg/op_mpegpass.cpp:232
-#: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:289
-msgid "MPEG SVCD"
-msgstr "MPEG SVCD"
+#: plugins/ADM_videoFilters/Tdeint/DIA_tdeint.cpp:46
+msgid "Kernel interpolation"
+msgstr "?????"
 
-#: avidemux/ADM_outputs/oplug_mpeg/op_mpegpass.cpp:233
-#: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:290
-msgid "MPEG DVD"
-msgstr "MPEG DVD"
+#: plugins/ADM_videoFilters/Tdeint/DIA_tdeint.cpp:47
+msgid "Modified ELA-2"
+msgstr "??? ELA-2"
 
-#: avidemux/ADM_outputs/oplug_mpeg/op_mpegpass.cpp:352
-#: avidemux/ADM_outputs/oplug_dummy/oplug_dummy.cpp:206
-#: avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp:321
-#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:300
-#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:464
-msgid "Error while encoding"
-msgstr "????????"
+#: plugins/ADM_videoFilters/Tdeint/DIA_tdeint.cpp:52
+msgid "4 fields check"
+msgstr "4 ????"
 
-#: avidemux/ADM_outputs/oplug_dummy/oplug_dummy.cpp:135
-#: avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp:182
-#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:155
-msgid "Cannot initialize the video stream"
-msgstr "?????????"
+#: plugins/ADM_videoFilters/Tdeint/DIA_tdeint.cpp:53
+msgid "5 fields check"
+msgstr "5 ????"
 
-#: avidemux/ADM_outputs/oplug_dummy/oplug_dummy.cpp:140
-msgid "Dummy"
-msgstr "??"
+#: plugins/ADM_videoFilters/Tdeint/DIA_tdeint.cpp:54
+msgid "4 fields check (no avg)"
+msgstr "4 ???? (?? avg)"
 
-#: avidemux/ADM_outputs/oplug_dummy/oplug_dummy.cpp:149
-#: avidemux/ADM_outputs/oplug_avi/op_saveprocess.cpp:93
-#: avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp:196
-#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:175
-#: avidemux/ADM_outputs/oplug_ogm/op_ogsaveprocess.cpp:78
-msgid "Filter init failed"
-msgstr "???????"
+#: plugins/ADM_videoFilters/Tdeint/DIA_tdeint.cpp:55
+msgid "5 fields check (no avg)"
+msgstr "5 ???? (?? avg)"
 
-#: avidemux/ADM_outputs/oplug_dummy/oplug_dummy.cpp:153
-#: avidemux/ADM_outputs/oplug_avi/op_saveprocess.cpp:267
-#: avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp:200
-#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:187
-#: avidemux/ADM_outputs/oplug_ogm/op_ogsaveprocess.cpp:167
-#: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:373
-msgid "Encoding"
-msgstr "???"
+#: plugins/ADM_videoFilters/Tdeint/DIA_tdeint.cpp:61
+msgid "No link"
+msgstr "????"
 
-#: avidemux/ADM_outputs/oplug_dummy/oplug_dummy.cpp:213
-#: avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp:328
-#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:307
-#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:471
-msgid "KeyFrame error"
-msgstr "??????"
+#: plugins/ADM_videoFilters/Tdeint/DIA_tdeint.cpp:62
+msgid "Full link"
+msgstr "????"
 
-#: avidemux/ADM_outputs/oplug_dummy/oplug_dummy.cpp:213
-#: avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp:328
-#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:307
-#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:471
-msgid ""
-"The beginning frame is not a key frame.\n"
-"Please move the A marker."
-msgstr ""
-"??????????????\n"
-"????? A ?"
+#: plugins/ADM_videoFilters/Tdeint/DIA_tdeint.cpp:63
+msgid "Y to UV"
+msgstr "Y ?? UV"
 
-#: avidemux/ADM_outputs/oplug_avi/op_avisavecopy.cpp:96
-#: avidemux/ADM_outputs/oplug_avi/op_avisavecopy_unpack.cpp:98
-#: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:457
-#: avidemux/ADM_outputs/oplug_avi/op_avisavecopy_pack.cpp:121
-msgid "Cannot initiate save"
-msgstr "??????"
+#: plugins/ADM_videoFilters/Tdeint/DIA_tdeint.cpp:64
+msgid "UV to Y"
+msgstr "UV ?? Y"
 
-#: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:75
-msgid "Mux every N video frames"
-msgstr "???? N ????"
+#: plugins/ADM_videoFilters/Tdeint/DIA_tdeint.cpp:69
+msgid "1"
+msgstr "1"
 
-#: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:76
-msgid "Mux by packet size"
-msgstr "?????????"
+#: plugins/ADM_videoFilters/Tdeint/DIA_tdeint.cpp:70
+msgid "2"
+msgstr "2"
 
-#: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:79
-msgid "Muxing _type:"
-msgstr "????(_T):"
+#: plugins/ADM_videoFilters/Tdeint/DIA_tdeint.cpp:78
+msgid "_Interpolate:"
+msgstr "??(_I):"
 
-#: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:80
-msgid "_Split every MB:"
-msgstr "????????MB(_S):"
+#: plugins/ADM_videoFilters/Tdeint/DIA_tdeint.cpp:80
+#: plugins/ADM_videoFilters/TIsophote/ADM_vidTisophote.cpp:66
+msgid "_Type:"
+msgstr "??(_T):"
 
-#: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:82
-msgid "Mux _every x video frames:"
-msgstr "???? x ????(_E):"
+#: plugins/ADM_videoFilters/Tdeint/DIA_tdeint.cpp:81
+msgid "_MntMode:"
+msgstr "_Mnt ??:"
 
-#: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:83
-msgid "Mux in _blocks of x bytes:"
-msgstr "? x ?????????(_B):"
+#: plugins/ADM_videoFilters/Tdeint/DIA_tdeint.cpp:82
+msgid "_Link:"
+msgstr "??(_L):"
 
-#: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:90
-msgid "AVI Muxer Options"
-msgstr "AVI ?????"
+#: plugins/ADM_videoFilters/Tdeint/DIA_tdeint.cpp:83
+msgid "_AP type:"
+msgstr "_AP ??:"
 
-#: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:189
-msgid "Error initalizing audio filters"
-msgstr "???????????"
+#: plugins/ADM_videoFilters/Tdeint/DIA_tdeint.cpp:86
+msgid "Use ch_roma to evalute"
+msgstr "???????(_R)"
 
-#: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:198
-msgid "Error initalizing video filters"
-msgstr "???????????"
+#: plugins/ADM_videoFilters/Tdeint/DIA_tdeint.cpp:87
+msgid "Try _weave"
+msgstr "????(_W)"
 
-#: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:496
-msgid "DTS"
-msgstr "DTS"
+#: plugins/ADM_videoFilters/Tdeint/DIA_tdeint.cpp:88
+msgid "_Denoise"
+msgstr "????(_D)"
 
-#: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:498
-msgid "MP2"
-msgstr "MP2"
+#: plugins/ADM_videoFilters/Tdeint/DIA_tdeint.cpp:89
+#: plugins/ADM_videoFilters/KernelDeint/ADM_vidKernelDeint.cpp:76
+msgid "_Sharp"
+msgstr "??(_S)"
 
-#: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:499
-msgid "MP3"
-msgstr "MP3"
+#: plugins/ADM_videoFilters/Tdeint/DIA_tdeint.cpp:90
+msgid "_Evalute all frames"
+msgstr "???????(_E)"
 
-#: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:500
-msgid "WMA"
-msgstr "WMA"
+#: plugins/ADM_videoFilters/Tdeint/DIA_tdeint.cpp:93
+msgid "Motion threshold, l_uma:"
+msgstr "????????(_U):"
 
-#: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:501
-msgid "LPCM"
-msgstr "LPCM"
+#: plugins/ADM_videoFilters/Tdeint/DIA_tdeint.cpp:94
+msgid "Motion threshold, c_hroma:"
+msgstr "????????(_H):"
 
-#: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:502
-msgid "AC3"
-msgstr "AC3"
+#: plugins/ADM_videoFilters/Tdeint/DIA_tdeint.cpp:95
+msgid "Area com_bing threshold:"
+msgstr "?????????(_B):"
 
-#: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:503
-msgid "Ogg Vorbis"
-msgstr "Ogg Vorbis"
+#: plugins/ADM_videoFilters/Tdeint/DIA_tdeint.cpp:96
+msgid "Combe_d threshold:"
+msgstr "???????(_D):"
 
-#: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:505
-msgid "AAC"
-msgstr "AAC"
+#: plugins/ADM_videoFilters/Tdeint/DIA_tdeint.cpp:97
+msgid "Artefact _protection threshold:"
+msgstr "???????(_P):"
 
-#: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:506
-msgid "QDM2"
-msgstr "QDM2"
+#: plugins/ADM_videoFilters/Tdeint/DIA_tdeint.cpp:98
+msgid "Debug:"
+msgstr "??:"
 
-#: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:507
-msgid "AMR-NB"
-msgstr "AMR-NB"
+#: plugins/ADM_videoFilters/PalShift/ADM_vidPalSmart.cpp:41
+msgid "PAL smart"
+msgstr "PAL ???"
 
-#: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:508
-msgid "MSADPCM"
-msgstr "MSADPCM"
+#: plugins/ADM_videoFilters/PalShift/ADM_vidPalSmart.cpp:44
+msgid "Smartly revert non constant PAL field shift."
+msgstr "???????? PAL ?????"
 
-#: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:509
-msgid "ULAW"
-msgstr "ULAW"
+#: plugins/ADM_videoFilters/PalShift/ADM_vidPalShift.cpp:31
+msgid "PAL field shift"
+msgstr "PAL ????"
 
-#: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:510
-msgid "IMA ADPCM"
-msgstr "IMA ADPCM"
+#: plugins/ADM_videoFilters/PalShift/ADM_vidPalShift.cpp:34
+msgid "Shift fields by one. Useful for some PAL movies."
+msgstr "???????????????? PAL ???"
 
-#: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:511
-msgid "8-bit PCM"
-msgstr "8-?? PCM"
+#: plugins/ADM_videoFilters/PalShift/ADM_vidPalShift.cpp:67
+msgid "_Try reverse"
+msgstr "????(_T)"
 
-#: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:513
-msgid "Unknown codec"
-msgstr "???????"
+#: plugins/ADM_videoFilters/PalShift/ADM_vidPalShift.cpp:71
+msgid "Pal Field Shift"
+msgstr "Pal ???"
 
-#: avidemux/ADM_outputs/oplug_avi/op_saveprocess.cpp:73
-msgid ""
-"Width is not a multiple of 8\n"
-" continue anyway ?"
-msgstr ""
-"??? 8 ???\n"
-" ?????????? ?"
+#: plugins/ADM_videoFilters/TIsophote/ADM_vidTisophote.cpp:46
+msgid "TIsophote"
+msgstr "TIsophote"
 
-#: avidemux/ADM_outputs/oplug_avi/op_saveprocess.cpp:128
-#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:420
-#: avidemux/ADM_outputs/oplug_ogm/op_ogsaveprocess.cpp:103
-msgid ""
-"\n"
-" Reuse the existing log-file ?"
-msgstr ""
-"\n"
-" ???????????"
+#: plugins/ADM_videoFilters/TIsophote/ADM_vidTisophote.cpp:49
+msgid "Port of TIsophote by tritical ."
+msgstr "? TIsophote  ???????? Tritical? "
 
-#: avidemux/ADM_outputs/oplug_avi/op_saveprocess.cpp:137
-#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:428
-msgid "1st Pass"
-msgstr "?????"
+#: plugins/ADM_videoFilters/TIsophote/ADM_vidTisophote.cpp:60
+msgid "Simple"
+msgstr "??"
 
-#: avidemux/ADM_outputs/oplug_avi/op_saveprocess.cpp:152
-msgid "Aborting"
-msgstr "??"
+#: plugins/ADM_videoFilters/TIsophote/ADM_vidTisophote.cpp:61
+#: plugins/ADM_videoFilters/McDeint/ADM_vidMcDeint.cpp:92
+msgid "Medium"
+msgstr "?"
 
-#: avidemux/ADM_outputs/oplug_avi/op_saveprocess.cpp:269
-#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:503
-msgid "2nd Pass"
-msgstr "?????"
+#: plugins/ADM_videoFilters/TIsophote/ADM_vidTisophote.cpp:62
+msgid "Slow"
+msgstr "?"
 
-#: avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp:144
-msgid "Unsupported video"
-msgstr "??????"
+#: plugins/ADM_videoFilters/TIsophote/ADM_vidTisophote.cpp:67
+msgid "_Iterations:"
+msgstr "??(_I):"
 
-#: avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp:144
-msgid "Only FLV1 and VP6 video are supported"
-msgstr "??? FLV1 ? VP6 ??"
+#: plugins/ADM_videoFilters/TIsophote/ADM_vidTisophote.cpp:67
+#: plugins/ADM_videoFilters/KernelDeint/ADM_vidKernelDeint.cpp:75
+msgid "Smaller means more deinterlacing"
+msgstr "??????????"
 
-#: avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp:166
-#: avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp:171
-msgid "Unsupported audio"
-msgstr "??????"
+#: plugins/ADM_videoFilters/TIsophote/ADM_vidTisophote.cpp:68
+msgid "_Chroma:"
+msgstr "??(_C):"
 
-#: avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp:166
-msgid "Audio must be mp3 for flv output."
-msgstr "flv ???????? mp3?"
+#: plugins/ADM_videoFilters/TIsophote/ADM_vidTisophote.cpp:68
+msgid "Process chroma."
+msgstr "?????"
 
-#: avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp:171
-msgid "Frequency must be 44100, 22050 or 11025 Hz."
-msgstr "????? 44100, 22050 ? 11025 Hz?"
+#: plugins/ADM_videoFilters/TIsophote/ADM_vidTisophote.cpp:69
+msgid "_Step:"
+msgstr "??(_S):"
 
-#: avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp:225
-#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:212
-msgid "Cannot initialize the audio stream"
-msgstr "?????????"
+#: plugins/ADM_videoFilters/TIsophote/ADM_vidTisophote.cpp:69
+msgid "Step."
+msgstr "???"
 
-#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:129
-msgid "PSP"
-msgstr "PSP"
+#: plugins/ADM_videoFilters/TIsophote/ADM_vidTisophote.cpp:73
+#: plugins/ADM_videoFilters/KernelDeint/ADM_vidKernelDeint.cpp:48
+#: plugins/ADM_videoFilters/KernelDeint/ADM_vidKernelDeint.cpp:82
+msgid "KernelDeint"
+msgstr "KernelDeint"
 
-#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:230
-msgid "Invalid audio stream detected"
-msgstr "?????????"
+#: plugins/ADM_videoFilters/Whirl/ADM_vidWhirl.cpp:60
+msgid "Whirl"
+msgstr "??"
 
-#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:230
-msgid ""
-"The audio stream may be invalid for this container.\n"
-"\n"
-"Continue anyway?"
-msgstr ""
-"??????????????????\n"
-"\n"
-"??????????"
+#: plugins/ADM_videoFilters/Whirl/ADM_vidWhirl.cpp:63
+msgid "Useless whirlwind effect."
+msgstr "????????"
 
-#: avidemux/ADM_outputs/oplug_ogm/op_ogsave.cpp:127
-msgid "Could not initialize video"
-msgstr "???????"
+#: plugins/ADM_videoFilters/DgBob/ADM_vidDGbob.cpp:63
+msgid "DG Bob"
+msgstr "DG Bob"
 
-#: avidemux/ADM_outputs/oplug_ogm/op_ogsave.cpp:135
-msgid "Could not initialize audio"
-msgstr "???????"
+#: plugins/ADM_videoFilters/DgBob/ADM_vidDGbob.cpp:66
+msgid "Donald Graft Bob."
+msgstr "Donald Graft Bob."
 
-#: avidemux/ADM_outputs/oplug_ogm/op_ogsavecopy.cpp:70
-msgid "Saving..."
-msgstr "??..."
+#: plugins/ADM_videoFilters/DgBob/ADM_vidDGbob.cpp:79
+msgid "Keep nb of frames and fps"
+msgstr "????? fps ???"
 
-#: avidemux/ADM_outputs/oplug_ogm/op_ogsaveprocess.cpp:114
-msgid "Pass one"
-msgstr "Pass 1"
+#: plugins/ADM_videoFilters/DgBob/ADM_vidDGbob.cpp:80
+msgid "Double nb of frames and fps"
+msgstr "????? fps ???"
 
-#: avidemux/ADM_outputs/oplug_ogm/op_ogsaveprocess.cpp:163
-msgid "Pass 2"
-msgstr "Pass 2"
+#: plugins/ADM_videoFilters/DgBob/ADM_vidDGbob.cpp:81
+msgid "Double nb of frames (slow motion)"
+msgstr "???????(???)"
 
-#: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:193
-msgid "For DVD, audio must be 48 kHz MP2, AC3 or LPCM."
-msgstr "DVD ?????? 48 kHz MP2, AC3 ? LPCM?"
+#: plugins/ADM_videoFilters/DgBob/ADM_vidDGbob.cpp:87
+msgid "_Extra"
+msgstr "???(_E)"
 
-#: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:260
-msgid "libmpeg2enc VCD"
-msgstr "libmpeg2enc VCD"
+#: plugins/ADM_videoFilters/DgBob/ADM_vidDGbob.cpp:87
+msgid "Extra check, avoid using it"
+msgstr "???????????"
 
-#: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:263
-msgid "libmpeg2enc SVCD"
-msgstr "libmpeg2enc SVCD"
+#: plugins/ADM_videoFilters/DgBob/ADM_vidDGbob.cpp:90
+msgid "DGBob"
+msgstr "DGBob"
 
-#: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:266
-msgid "libmpeg2enc DVD"
-msgstr "libmpeg2enc DVD"
+#: plugins/ADM_videoFilters/BlendRemover/ADM_vidBlendRemoval.cpp:56
+#: plugins/ADM_videoFilters/BlendRemover/ADM_vidBlendRemoval.cpp:77
+msgid "Blend Removal"
+msgstr "????"
 
-#: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:269
-msgid "FFmpeg MPEG-1 VBR"
-msgstr "FFmpeg MPEG-1 VBR"
+#: plugins/ADM_videoFilters/BlendRemover/ADM_vidBlendRemoval.cpp:59
+msgid "Try to remove blending."
+msgstr "???????"
 
-#: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:272
-msgid "FFmpeg MPEG-2 SVCD VBR"
-msgstr "FFmpeg MPEG-2 SVCD VBR"
+#: plugins/ADM_videoFilters/BlendRemover/ADM_vidBlendRemoval.cpp:69
+msgid "If value is smaller than threshold it is considered valid.Smaller value might mean more false positive."
+msgstr "?????????????????????????????????"
 
-#: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:275
-msgid "FFmpeg MPEG-2 DVD VBR"
-msgstr "FFmpeg MPEG-2 DVD VBR"
+#: plugins/ADM_videoFilters/BlendRemover/ADM_vidBlendRemoval.cpp:71
+#: plugins/ADM_videoFilters/BlendRemover/ADM_vidHardIvtcRemoval.cpp:81
+msgid "_Noise:"
+msgstr "??(_N):"
 
-#: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:278
-msgid "MPEG Requantizer"
-msgstr "MPEG ??????"
+#: plugins/ADM_videoFilters/BlendRemover/ADM_vidBlendRemoval.cpp:71
+#: plugins/ADM_videoFilters/BlendRemover/ADM_vidHardIvtcRemoval.cpp:81
+msgid "If pixels are closer than noise, they are considered to be the same"
+msgstr "?????????????????"
 
-#: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:286
-msgid "MPEG ES"
-msgstr "MPEG ES"
+#: plugins/ADM_videoFilters/BlendRemover/ADM_vidBlendRemoval.cpp:72
+msgid "I_dentical:"
+msgstr "??(_D):"
 
-#: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:305
-msgid "Reuse log file ?"
-msgstr "????????"
+#: plugins/ADM_videoFilters/BlendRemover/ADM_vidBlendRemoval.cpp:72
+#: plugins/ADM_videoFilters/BlendRemover/ADM_vidHardIvtcRemoval.cpp:82
+msgid "If metric is less than identical, images are considered identical"
+msgstr "???????????????????"
 
-#: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:311
-msgid "Pass 1/2"
-msgstr "?? 1/2"
+#: plugins/ADM_videoFilters/BlendRemover/ADM_vidBlendRemoval.cpp:73
+#: plugins/ADM_videoFilters/BlendRemover/ADM_vidHardIvtcRemoval.cpp:83
+msgid "_Show metrics"
+msgstr "????(_S)"
 
-#: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:320
-msgid "Error in pass 1"
-msgstr "??? 1 ?????"
+#: plugins/ADM_videoFilters/BlendRemover/ADM_vidBlendRemoval.cpp:73
+#: plugins/ADM_videoFilters/BlendRemover/ADM_vidHardIvtcRemoval.cpp:83
+msgid "Show metric in image (debug)"
+msgstr "?????? (??)"
 
-#: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:371
-msgid "Pass 2/2"
-msgstr "?? 2/2"
+#: plugins/ADM_videoFilters/BlendRemover/ADM_vidHardIvtcRemoval.cpp:69
+msgid "Remove IVTC that has been analog captured or resized."
+msgstr "?? IVTC ???????????"
 
-#: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:463
-msgid "Error in pass 2"
-msgstr "??? 2 ?????"
+#: plugins/ADM_videoFilters/BlendRemover/ADM_vidHardIvtcRemoval.cpp:79
+msgid "If value is smaller than threshold it is considered valid. Smaller value might mean more false positive"
+msgstr "????????????????????????????????"
 
-#: avidemux/ADM_audio/audiotimeline.cpp:85
-#: avidemux/ADM_audio/audiotimeline.cpp:96
-msgid "Building VBR map"
-msgstr "???????(VBR)??"
+#: plugins/ADM_videoFilters/BlendRemover/ADM_vidHardIvtcRemoval.cpp:82
+msgid "_Identical:"
+msgstr "??(_I):"
 
-#: avidemux/ADM_video/ADM_vidFieldUnblend.cpp:81
-msgid "Metrics"
-msgstr "??"
+#: plugins/ADM_videoFilters/BlendRemover/ADM_vidHardIvtcRemoval.cpp:87
+msgid "Hard IVTC Removal"
+msgstr "??? IVTC"
 
-#: avidemux/ADM_video/ADM_vidFieldUnblend.cpp:81
-msgid "Do you want to print metrics on screen ?"
-msgstr "?????????????"
+#: plugins/ADM_videoFilters/Animated/ADM_vidAnimated.cpp:35
+#: plugins/ADM_videoFilters/Animated/DIA_animated.cpp:54
+msgid "Animated Menu"
+msgstr "?????"
 
-#: avidemux/ADM_videoFilter/ADM_vidDGbob.cpp:82
-#: avidemux/ADM_videoFilter/ADM_vidDecTelecide.cpp:91
-#: avidemux/ADM_videoFilter/ADM_vidKernelDeint.cpp:88
-#: avidemux/ADM_videoFilter/ADM_vidMcDeint.cpp:108
-msgid "Bottom"
-msgstr "??"
+#: plugins/ADM_videoFilters/Animated/ADM_vidAnimated.cpp:38
+msgid "Create a video made of 6 mini windows, very useful to do DVD menus."
+msgstr "? 6 ??????????????? DVD ???????"
 
-#: avidemux/ADM_videoFilter/ADM_vidDGbob.cpp:85
-msgid "Keep nb of frames and fps"
-msgstr "????? fps ???"
+#: plugins/ADM_videoFilters/Animated/DIA_animated.cpp:37
+msgid "_Background Image:"
+msgstr "????:"
 
-#: avidemux/ADM_videoFilter/ADM_vidDGbob.cpp:86
-msgid "Double nb of frames and fps"
-msgstr "????? fps ???"
+#: plugins/ADM_videoFilters/Animated/DIA_animated.cpp:37
+msgid "Select background image"
+msgstr "??????"
 
-#: avidemux/ADM_videoFilter/ADM_vidDGbob.cpp:87
-msgid "Double nb of frames (slow motion)"
-msgstr "???????(???)"
+#: plugins/ADM_videoFilters/Animated/DIA_animated.cpp:38
+msgid "_NTSC (default is PAL):"
+msgstr "NTSC (??? PAL)(_N):"
 
-#: avidemux/ADM_videoFilter/ADM_vidDGbob.cpp:92
-#: avidemux/ADM_videoFilter/ADM_vidMSharpen.cpp:166
-#: avidemux/ADM_videoFilter/ADM_vidMsmooth.cpp:196
-#: avidemux/ADM_videoFilter/ADM_vidBlendRemoval.cpp:82
-#: avidemux/ADM_videoFilter/ADM_vidKernelDeint.cpp:93
-#: avidemux/ADM_videoFilter/ADM_vidHardIvtcRemoval.cpp:87
-msgid "_Threshold:"
-msgstr "???:"
+#: plugins/ADM_videoFilters/Animated/DIA_animated.cpp:39
+msgid "Vignette _Width:"
+msgstr "????(_W):"
 
-#: avidemux/ADM_videoFilter/ADM_vidDGbob.cpp:93
-msgid "_Extra"
-msgstr "???(_E)"
+#: plugins/ADM_videoFilters/Animated/DIA_animated.cpp:40
+msgid "Vignette _Height:"
+msgstr "????(_H):"
 
-#: avidemux/ADM_videoFilter/ADM_vidDGbob.cpp:93
-msgid "Extra check, avoid using it"
-msgstr "???????????"
+#: plugins/ADM_videoFilters/Animated/DIA_animated.cpp:43
+msgid "Vignette frame number"
+msgstr "???????"
 
-#: avidemux/ADM_videoFilter/ADM_vidDGbob.cpp:96
-msgid "DGBob"
-msgstr "DGBob"
+#: plugins/ADM_videoFilters/Animated/DIA_animated.cpp:47
+msgid "Timecode:"
+msgstr "???:"
 
-#: avidemux/ADM_videoFilter/ADM_vidDecTelecide.cpp:83
-msgid "No strategy"
-msgstr "????"
+#: plugins/ADM_videoFilters/KernelDeint/ADM_vidKernelDeint.cpp:51
+msgid "Kernel deinterlacer by Donald Graft."
+msgstr "?????????? Donald Graft?"
 
-#: avidemux/ADM_videoFilter/ADM_vidDecTelecide.cpp:84
-msgid "3:2 pulldown"
-msgstr "3:2 pulldown"
+#: plugins/ADM_videoFilters/KernelDeint/ADM_vidKernelDeint.cpp:76
+msgid "_Sharper engine:"
+msgstr "?????(_S):"
 
-#: avidemux/ADM_videoFilter/ADM_vidDecTelecide.cpp:85
-msgid "PAL/SECAM"
-msgstr "PAL/SECAM"
+#: plugins/ADM_videoFilters/KernelDeint/ADM_vidKernelDeint.cpp:77
+msgid "T_woway"
+msgstr "??(_W)"
 
-#: avidemux/ADM_videoFilter/ADM_vidDecTelecide.cpp:95
-msgid "Never"
-msgstr "??"
+#: plugins/ADM_videoFilters/KernelDeint/ADM_vidKernelDeint.cpp:77
+msgid "Extrapolate better (better not to use it)"
+msgstr "????? (??????)"
 
-#: avidemux/ADM_videoFilter/ADM_vidDecTelecide.cpp:96
-msgid "If still combed"
-msgstr "?????????"
+#: plugins/ADM_videoFilters/KernelDeint/ADM_vidKernelDeint.cpp:78
+msgid "_Map"
+msgstr "??(_M)"
 
-#: avidemux/ADM_videoFilter/ADM_vidDecTelecide.cpp:97
-msgid "Always"
-msgstr "??"
+#: plugins/ADM_videoFilters/KernelDeint/ADM_vidKernelDeint.cpp:78
+msgid "Show interlaced areas (for test!)"
+msgstr "???????(????)"
 
-#: avidemux/ADM_videoFilter/ADM_vidDecTelecide.cpp:102
-msgid "None but compute"
-msgstr "????"
+#: plugins/ADM_videoFilters/Soften/ADM_vidSoften.cpp:55
+#: plugins/ADM_videoFilters/Soften/ADM_vidSoften.cpp:75
+msgid "Soften"
+msgstr "??"
 
-#: avidemux/ADM_videoFilter/ADM_vidDecTelecide.cpp:103
-msgid "Postproc on best match"
-msgstr "????????????"
+#: plugins/ADM_videoFilters/Soften/ADM_vidSoften.cpp:58
+msgid "A variant of stabilize."
+msgstr "????????"
 
-#: avidemux/ADM_videoFilter/ADM_vidDecTelecide.cpp:104
-msgid "Postproc and show zones (debug)"
-msgstr "????????? (??)"
+#: plugins/ADM_videoFilters/Soften/ADM_vidSoften.cpp:69
+msgid "_Luma threshold:"
+msgstr "?????(_L):"
 
-#: avidemux/ADM_videoFilter/ADM_vidDecTelecide.cpp:105
-msgid "Process image (not fields)"
-msgstr "???? (???)"
+#: plugins/ADM_videoFilters/Soften/ADM_vidSoften.cpp:70
+msgid "C_hroma threshold:"
+msgstr "?????(_H):"
 
-#: avidemux/ADM_videoFilter/ADM_vidDecTelecide.cpp:106
-msgid "Process image (not fields), debug"
-msgstr "???? (???)???"
+#: plugins/ADM_videoFilters/Soften/ADM_vidSoften.cpp:71
+msgid "_Radius:"
+msgstr "??(_R):"
 
-#: avidemux/ADM_videoFilter/ADM_vidDecTelecide.cpp:110
-msgid "_Strategy:"
-msgstr "??(_S):"
+#: plugins/ADM_videoFilters/Mosaic/ADM_vidMosaic.cpp:64
+msgid "mosaic"
+msgstr "???"
 
-#: avidemux/ADM_videoFilter/ADM_vidDecTelecide.cpp:112
-msgid "_Postprocessing:"
-msgstr "????(_P):"
+#: plugins/ADM_videoFilters/Mosaic/ADM_vidMosaic.cpp:67
+msgid "Split the picture into tiny thumbnails."
+msgstr "??????????????"
 
-#: avidemux/ADM_videoFilter/ADM_vidDecTelecide.cpp:113
-msgid "_Try backward:"
-msgstr "????(_T):"
+#: plugins/ADM_videoFilters/Mosaic/ADM_vidMosaic.cpp:76
+msgid "_Horizontal stacking:"
+msgstr "????(_H):"
 
-#: avidemux/ADM_videoFilter/ADM_vidDecTelecide.cpp:115
-msgid "_Direct threshold:"
-msgstr "?????(_D):"
+#: plugins/ADM_videoFilters/Mosaic/ADM_vidMosaic.cpp:77
+msgid "_Vertical stacking:"
+msgstr "????(_V):"
 
-#: avidemux/ADM_videoFilter/ADM_vidDecTelecide.cpp:116
-msgid "_Backward threshold:"
-msgstr "?????(_B):"
+#: plugins/ADM_videoFilters/Mosaic/ADM_vidMosaic.cpp:78
+msgid "_Shrink factor:"
+msgstr "????(_S):"
 
-#: avidemux/ADM_videoFilter/ADM_vidDecTelecide.cpp:117
-msgid "_Noise threshold:"
-msgstr "?????(_N):"
+#: plugins/ADM_videoFilters/Mosaic/ADM_vidMosaic.cpp:79
+msgid "Show _frame"
+msgstr "????(_F)"
 
-#: avidemux/ADM_videoFilter/ADM_vidDecTelecide.cpp:118
-msgid "Postp_rocessing threshold:"
-msgstr "???????(_R):"
+#: plugins/ADM_videoFilters/Mosaic/ADM_vidMosaic.cpp:84
+msgid "Mosaic"
+msgstr "???"
 
-#: avidemux/ADM_videoFilter/ADM_vidDecTelecide.cpp:120
-msgid "_Use chroma to decide"
-msgstr "???????(_U)"
+#: plugins/ADM_videoFilters/Chroma/ADM_vidChromaU.cpp:30
+#: plugins/ADM_videoFilters/Contrast/gtk/DIA_contrast.cpp:220
+#: plugins/ADM_videoFilters/colorYUV/gtk/DIA_coloryuv.cpp:197
+msgid "Chroma U"
+msgstr "?? U"
 
-#: avidemux/ADM_videoFilter/ADM_vidDecTelecide.cpp:121
-msgid "Sho_w info"
-msgstr "????(_W)"
+#: plugins/ADM_videoFilters/Chroma/ADM_vidChromaU.cpp:33
+msgid "Keep chroma U only."
+msgstr "????? U?"
 
-#: avidemux/ADM_videoFilter/ADM_vidDecTelecide.cpp:122
-msgid "Debu_g"
-msgstr "??(_D)"
+#: plugins/ADM_videoFilters/Chroma/ADM_vidChromaV.cpp:30
+#: plugins/ADM_videoFilters/colorYUV/gtk/DIA_coloryuv.cpp:204
+msgid "Chroma V"
+msgstr "?? V"
 
-#: avidemux/ADM_videoFilter/ADM_vidDecTelecide.cpp:123
-msgid "Bl_end"
-msgstr "??(_E)"
+#: plugins/ADM_videoFilters/Chroma/ADM_vidChromaV.cpp:33
+msgid "Keep chroma V only."
+msgstr "????? V?"
 
-#: avidemux/ADM_videoFilter/ADM_vidMSharpen.cpp:163
-msgid "_Mask"
-msgstr "??(_M)"
+#: plugins/ADM_videoFilters/LargeMedian/ADM_vidLargeMedian.cpp:36
+msgid "Median kernel 5x5. Good for reducing chroma noise."
+msgstr "????? 5x5???????????"
 
-#: avidemux/ADM_videoFilter/ADM_vidMSharpen.cpp:164
-msgid "_High Q"
-msgstr "? Q(_H)"
+#: plugins/ADM_videoFilters/LargeMedian/ADM_vidLargeMedian.cpp:293
+#: plugins/ADM_videoFilters/FastConvolution/ADM_vidFastConvolution.cpp:175
+msgid "_Process luma"
+msgstr "????(_P)"
 
-#: avidemux/ADM_videoFilter/ADM_vidMPLResize.cpp:143
-#: avidemux/ADM_videoFilter/ADM_guiResize.cpp:96
-msgid "Width and height cannot be 0"
-msgstr "?????? 0"
+#: plugins/ADM_videoFilters/LargeMedian/ADM_vidLargeMedian.cpp:293
+#: plugins/ADM_videoFilters/FastConvolution/ADM_vidFastConvolution.cpp:175
+msgid "Process luma plane"
+msgstr "??????"
 
-#: avidemux/ADM_videoFilter/ADM_vidMPLResize.cpp:145
-#: avidemux/ADM_videoFilter/ADM_guiResize.cpp:98
+#: plugins/ADM_videoFilters/LargeMedian/ADM_vidLargeMedian.cpp:294
+#: plugins/ADM_videoFilters/FastConvolution/ADM_vidFastConvolution.cpp:176
+msgid "P_rocess chroma"
+msgstr "????(_R)"
+
+#: plugins/ADM_videoFilters/LargeMedian/ADM_vidLargeMedian.cpp:298
+msgid "Large Median 5x5"
+msgstr "????? 5x5"
+
+#: plugins/ADM_videoFilters/AvisynthResize/qt4/Q_resize.cpp:246
+#: plugins/ADM_videoFilters/AvisynthResize/ADM_vidResize.cpp:245
+#: plugins/ADM_videoFilters/MplayerResize/ADM_vidMPLResize.cpp:133
+#: plugins/ADM_videoFilters/MplayerResize/qt4/Q_resize.cpp:246
 msgid "Width and height cannot be odd"
 msgstr "????????"
 
-#: avidemux/ADM_videoFilter/ADM_vidMsmooth.cpp:194
-msgid "_High quality"
-msgstr "???(_H)"
+#: plugins/ADM_videoFilters/AvisynthResize/ADM_vidResize.cpp:42
+msgid "Picture resizer ported from Avisynth (C Version, slow)."
+msgstr "? Avisynth ????????????(C ????)?"
 
-#: avidemux/ADM_videoFilter/ADM_vidMsmooth.cpp:195
-msgid "Show _mask"
-msgstr "????(_M)"
+#: plugins/ADM_videoFilters/AvisynthResize/ADM_vidResize.cpp:243
+#: plugins/ADM_videoFilters/MplayerResize/ADM_vidMPLResize.cpp:131
+msgid "Width and height cannot be 0"
+msgstr "?????? 0"
 
-#: avidemux/ADM_videoFilter/ADM_vidMsmooth.cpp:201
-msgid "MSmooth"
-msgstr "MSmooth"
+#: plugins/ADM_videoFilters/Hue/ADM_vidHue.cpp:49
+msgid "MPlayer hue"
+msgstr "MPlayer ??"
 
-#: avidemux/ADM_videoFilter/ADM_vidBlendRemoval.cpp:83
-msgid "If value is smaller than threshold it is considered valid.Smaller value might mean more false positive."
-msgstr "?????????????????????????????????"
+#: plugins/ADM_videoFilters/Hue/ADM_vidHue.cpp:52
+msgid "Adjust hue and saturation."
+msgstr "?????????"
 
-#: avidemux/ADM_videoFilter/ADM_vidBlendRemoval.cpp:85
-#: avidemux/ADM_videoFilter/ADM_vidHardIvtcRemoval.cpp:90
-msgid "_Noise:"
-msgstr "??(_N):"
+#: plugins/ADM_videoFilters/Hue/gtk/DIA_hue.cpp:62
+msgid "Hue"
+msgstr "??"
 
-#: avidemux/ADM_videoFilter/ADM_vidBlendRemoval.cpp:85
-#: avidemux/ADM_videoFilter/ADM_vidHardIvtcRemoval.cpp:90
-msgid "If pixels are closer than noise, they are considered to be the same"
-msgstr "?????????????????"
+#: plugins/ADM_videoFilters/Hue/gtk/DIA_hue.cpp:159
+msgid "Hue/Saturation"
+msgstr "??/???"
 
-#: avidemux/ADM_videoFilter/ADM_vidBlendRemoval.cpp:86
-msgid "I_dentical:"
-msgstr "??(_D):"
+#: plugins/ADM_videoFilters/Hue/gtk/DIA_hue.cpp:173
+msgid "<b>Hue:</b>"
+msgstr "<b>??:</b>"
 
-#: avidemux/ADM_videoFilter/ADM_vidBlendRemoval.cpp:86
-#: avidemux/ADM_videoFilter/ADM_vidHardIvtcRemoval.cpp:91
-msgid "If metric is less than identical, images are considered identical"
-msgstr "???????????????????"
+#: plugins/ADM_videoFilters/Hue/gtk/DIA_hue.cpp:181
+msgid "<b>Saturation:</b>"
+msgstr "<b>???:</b>"
 
-#: avidemux/ADM_videoFilter/ADM_vidBlendRemoval.cpp:87
-#: avidemux/ADM_videoFilter/ADM_vidHardIvtcRemoval.cpp:92
-msgid "_Show metrics"
-msgstr "????(_S)"
+#: plugins/ADM_videoFilters/ForcedPP/ADM_vidForcedPP.cpp:32
+msgid "Forced postprocessing"
+msgstr "???????"
 
-#: avidemux/ADM_videoFilter/ADM_vidBlendRemoval.cpp:87
-#: avidemux/ADM_videoFilter/ADM_vidHardIvtcRemoval.cpp:92
-msgid "Show metric in image (debug)"
-msgstr "?????? (??)"
+#: plugins/ADM_videoFilters/ForcedPP/ADM_vidForcedPP.cpp:35
+msgid "Apply blind postprocessing.."
+msgstr "??????????.."
 
-#: avidemux/ADM_videoFilter/ADM_vidBlendRemoval.cpp:91
-msgid "Blend Removal"
-msgstr "????"
+#: plugins/ADM_videoFilters/ForcedPP/ADM_vidForcedPP.cpp:65
+msgid "Forced Postprocessing"
+msgstr "???????"
 
-#: avidemux/ADM_videoFilter/ADM_vidSoften.cpp:68
-msgid "_Luma threshold:"
-msgstr "?????(_L):"
+#: plugins/ADM_videoFilters/Stabilize/ADM_vidStabilize.cpp:31
+#: plugins/ADM_videoFilters/Stabilize/ADM_vidStabilize.cpp:34
+msgid "Light denoiser."
+msgstr "???????"
 
-#: avidemux/ADM_videoFilter/ADM_vidSoften.cpp:69
-msgid "C_hroma threshold:"
-msgstr "?????(_H):"
+#: plugins/ADM_videoFilters/Stabilize/ADM_vidStabilize.cpp:70
+msgid "Stabilize Threshold"
+msgstr "?????"
 
-#: avidemux/ADM_videoFilter/ADM_vidSoften.cpp:70
-msgid "_Radius:"
-msgstr "??(_R):"
+#: plugins/ADM_videoFilters/Stabilize/ADM_vidStabilize.cpp:73
+msgid "Stabilize"
+msgstr "??"
 
-#: avidemux/ADM_videoFilter/ADM_lavpp_deint.cpp:106
-msgid "Linear blend"
-msgstr "????"
+#: plugins/ADM_videoFilters/DropOut/ADM_vidDropOut.cpp:29
+msgid "Drop"
+msgstr "??"
 
-#: avidemux/ADM_videoFilter/ADM_lavpp_deint.cpp:107
-msgid "Linear interpolate"
-msgstr "????"
+#: plugins/ADM_videoFilters/DropOut/ADM_vidDropOut.cpp:32
+msgid "Drop damaged fields (e.g. from VHS capture)."
+msgstr "??????? (???? VHS ??)?"
 
-#: avidemux/ADM_videoFilter/ADM_lavpp_deint.cpp:108
-msgid "Cubic interpolate"
-msgstr "????"
+#: plugins/ADM_videoFilters/DropOut/ADM_vidDropOut.cpp:51
+msgid "DropOut Threshold"
+msgstr "?????"
 
-#: avidemux/ADM_videoFilter/ADM_lavpp_deint.cpp:109
-msgid "Median interpolate"
-msgstr "????"
+#: plugins/ADM_videoFilters/DropOut/ADM_vidDropOut.cpp:54
+msgid "Drop Out"
+msgstr "??"
 
-#: avidemux/ADM_videoFilter/ADM_lavpp_deint.cpp:110
-msgid "FFmpeg deint"
-msgstr "FFmpeg ???"
+#: plugins/ADM_videoFilters/Eq2/ADM_vidEq2.cpp:57
+#: plugins/ADM_videoFilters/Eq2/gtk/DIA_eq2.cpp:196
+msgid "MPlayer eq2"
+msgstr "MPlayer eq2"
 
-#: avidemux/ADM_videoFilter/ADM_lavpp_deint.cpp:114
-msgid "_Deinterlacing:"
-msgstr "???(_D):"
+#: plugins/ADM_videoFilters/Eq2/ADM_vidEq2.cpp:60
+msgid "Adjust contrast, brightness, saturation and gamma."
+msgstr "???????????????"
 
-#: avidemux/ADM_videoFilter/ADM_lavpp_deint.cpp:115
-msgid "_Autolevel"
-msgstr "????(_A)"
+#: plugins/ADM_videoFilters/Eq2/gtk/DIA_eq2.cpp:222
+msgid "Brigh_tness:"
+msgstr "??(_T):"
 
-#: avidemux/ADM_videoFilter/ADM_vidParticle.cpp:135
-msgid "New format, preferred, good for Tracker3D"
-msgstr "????? Tracker3D ?????"
+#: plugins/ADM_videoFilters/Eq2/gtk/DIA_eq2.cpp:230
+msgid "_Saturation:"
+msgstr "???(_S):"
 
-#: avidemux/ADM_videoFilter/ADM_vidParticle.cpp:137
-msgid "DG at UWA format (includes shape info & bounding box)"
-msgstr "DG at UWA ?? (???????????)"
+#: plugins/ADM_videoFilters/Eq2/gtk/DIA_eq2.cpp:265
+msgid "_Contrast:"
+msgstr "??(_C):"
 
-#: avidemux/ADM_videoFilter/ADM_vidParticle.cpp:139
-msgid "AB at ODU format (includes shape info)"
-msgstr "AB at ODU ?? (??????)"
+#: plugins/ADM_videoFilters/Eq2/gtk/DIA_eq2.cpp:291
+msgid "_Initial:"
+msgstr "??(_I):"
 
-#: avidemux/ADM_videoFilter/ADM_vidParticle.cpp:141
-msgid "Old format that Tracker3D can't read directly"
-msgstr "????????? Tracker3D"
+#: plugins/ADM_videoFilters/Eq2/gtk/DIA_eq2.cpp:317
+msgid "_Red:"
+msgstr "?(_R):"
 
-#: avidemux/ADM_videoFilter/ADM_vidParticle.cpp:145
-msgid "Output _Format:"
-msgstr "????(_F):"
+#: plugins/ADM_videoFilters/Eq2/gtk/DIA_eq2.cpp:334
+msgid "_Green:"
+msgstr "?(_G):"
 
-#: avidemux/ADM_videoFilter/ADM_vidParticle.cpp:170
-msgid "Mi_nimum area for a particle to be detected:"
-msgstr "???????????(_N):"
+#: plugins/ADM_videoFilters/Eq2/gtk/DIA_eq2.cpp:342
+msgid "_Blue:"
+msgstr "?(_B):"
 
-#: avidemux/ADM_videoFilter/ADM_vidParticle.cpp:173
-msgid "Ma_ximum area for a particle to be detected:"
-msgstr "???????????(_X):"
+#: plugins/ADM_videoFilters/Eq2/gtk/DIA_eq2.cpp:350
+msgid "_Weight:"
+msgstr "??(_W):"
 
-#: avidemux/ADM_videoFilter/ADM_vidParticle.cpp:177
-msgid "_Left side crop (ignore particles in):"
-msgstr "???? (???????)(_L):"
+#: plugins/ADM_videoFilters/Eq2/gtk/DIA_eq2.cpp:376
+msgid "<b>Gamma</b>"
+msgstr "<b>Gamma</b>"
 
-#: avidemux/ADM_videoFilter/ADM_vidParticle.cpp:180
-msgid "_Right side crop (ignore particles in):"
-msgstr "???? (???????)(_R):"
+#: plugins/ADM_videoFilters/Reverse/ADM_vidReverse.cpp:33
+msgid "Reverse"
+msgstr "??"
 
-#: avidemux/ADM_videoFilter/ADM_vidParticle.cpp:183
-msgid "_Top crop (ignore particles in):"
-msgstr "???? (???????)(_T):"
+#: plugins/ADM_videoFilters/Reverse/ADM_vidReverse.cpp:36
+msgid "Play video backward."
+msgstr "???????"
 
-#: avidemux/ADM_videoFilter/ADM_vidParticle.cpp:186
-msgid "_Bottom crop (ignore particles in):"
-msgstr "???? (???????)(_B):"
+#: plugins/ADM_videoFilters/McDeint/ADM_vidMcDeint.cpp:75
+#: plugins/ADM_videoFilters/McDeint/ADM_vidMcDeint.cpp:106
+msgid "mcDeinterlace"
+msgstr "mcDeinterlace"
 
-#: avidemux/ADM_videoFilter/ADM_vidParticle.cpp:191
-#: avidemux/ADM_videoFilter/ADM_vidComputeAverage.cpp:189
-msgid "_Output File:"
-msgstr "???(_O):"
+#: plugins/ADM_videoFilters/McDeint/ADM_vidMcDeint.cpp:78
+msgid "Motion compensation deinterlacer. Ported from MPlayer."
+msgstr "? MPlayer ??????????????"
 
-#: avidemux/ADM_videoFilter/ADM_vidParticle.cpp:194
-msgid "_Camera number:"
-msgstr "?????(_C):"
+#: plugins/ADM_videoFilters/McDeint/ADM_vidMcDeint.cpp:91
+msgid "Fast"
+msgstr "??"
 
-#: avidemux/ADM_videoFilter/ADM_vidParticle.cpp:196
-#: avidemux/ADM_videoFilter/ADM_vidEraser.cpp:255
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:378
-#: avidemux/ADM_videoFilter/ADM_vidThreshold.cpp:159
-msgid "_Debugging settings (bits):"
-msgstr "???? (bits)(_D):"
+#: plugins/ADM_videoFilters/McDeint/ADM_vidMcDeint.cpp:93
+msgid "Slow iterative motion search"
+msgstr "????????"
 
-#: avidemux/ADM_videoFilter/ADM_vidLogo.cpp:87
-msgid "_Logo (jpg file):"
-msgstr "?? (jpg ?)(_L):"
+#: plugins/ADM_videoFilters/McDeint/ADM_vidMcDeint.cpp:94
+msgid "Extra slow (same as 3+multiple reference frames)"
+msgstr "??? (??3?3??????????)"
 
-#: avidemux/ADM_videoFilter/ADM_vidLogo.cpp:87
-msgid "Select JPEG file"
-msgstr "?? JPEG ?"
+#: plugins/ADM_videoFilters/McDeint/ADM_vidMcDeint.cpp:101
+msgid "_Field dominance:"
+msgstr "????(_F):"
 
-#: avidemux/ADM_videoFilter/ADM_vidLogo.cpp:88
-msgid "_X Position:"
-msgstr "_X ??:"
+#: plugins/ADM_videoFilters/McDeint/ADM_vidMcDeint.cpp:102
+msgid "_Qp:"
+msgstr "_Qp:"
 
-#: avidemux/ADM_videoFilter/ADM_vidLogo.cpp:89
-msgid "_Y Position:"
-msgstr "_Y ??:"
+#: plugins/ADM_videoFilters/Contrast/gtk/DIA_contrast.cpp:53
+#: plugins/ADM_videoFilters/Contrast/gtk/DIA_contrast.cpp:175
+#: plugins/ADM_videoFilters/Contrast/gtk/DIA_contrast.cpp:193
+#: plugins/ADM_videoFilters/Contrast/ADM_vidContrast.cpp:30
+#: plugins/ADM_videoFilters/colorYUV/gtk/DIA_coloryuv.cpp:162
+msgid "Contrast"
+msgstr "??"
 
-#: avidemux/ADM_videoFilter/ADM_vidLogo.cpp:90
-msgid "_Alpha:"
-msgstr "??(_A):"
+#: plugins/ADM_videoFilters/Contrast/gtk/DIA_contrast.cpp:202
+#: plugins/ADM_videoFilters/colorYUV/gtk/DIA_coloryuv.cpp:169
+msgid "Brightness"
+msgstr "??"
 
-#: avidemux/ADM_videoFilter/ADM_vidLargeMedian.cpp:304
-#: avidemux/ADM_videoFilter/ADM_vidFastConvolution.cpp:467
-msgid "_Process luma"
-msgstr "????(_P)"
+#: plugins/ADM_videoFilters/Contrast/gtk/DIA_contrast.cpp:216
+msgid "Luma"
+msgstr "??"
 
-#: avidemux/ADM_videoFilter/ADM_vidLargeMedian.cpp:304
-#: avidemux/ADM_videoFilter/ADM_vidFastConvolution.cpp:467
-msgid "Process luma plane"
-msgstr "??????"
+#: plugins/ADM_videoFilters/Contrast/gtk/DIA_contrast.cpp:224
+msgid "Chroma v"
+msgstr "?? v"
 
-#: avidemux/ADM_videoFilter/ADM_vidLargeMedian.cpp:305
-#: avidemux/ADM_videoFilter/ADM_vidFastConvolution.cpp:468
-msgid "P_rocess chroma"
-msgstr "????(_R)"
+#: plugins/ADM_videoFilters/Contrast/ADM_vidContrast.cpp:33
+msgid "Adjust contrast, brightness and colors."
+msgstr "???????????"
 
-#: avidemux/ADM_videoFilter/ADM_vidLargeMedian.cpp:309
-msgid "Large Median 5x5"
-msgstr "????? 5x5"
+#: plugins/ADM_videoFilters/Crop/gtk/DIA_crop.cpp:246
+msgid "Crop Settings"
+msgstr "????"
 
-#: avidemux/ADM_videoFilter/ADM_vidAddBorder.cpp:222
-#: avidemux/ADM_videoFilter/ADM_vidBSmear.cpp:200
-msgid "_Left border:"
-msgstr "???(_L):"
+#: plugins/ADM_videoFilters/Crop/gtk/DIA_crop.cpp:271
+msgid "Crop Left:"
+msgstr "????:"
 
-#: avidemux/ADM_videoFilter/ADM_vidAddBorder.cpp:223
-#: avidemux/ADM_videoFilter/ADM_vidBSmear.cpp:201
-msgid "_Right border:"
-msgstr "???(_R):"
+#: plugins/ADM_videoFilters/Crop/gtk/DIA_crop.cpp:278
+msgid "Crop Right:"
+msgstr "????:"
 
-#: avidemux/ADM_videoFilter/ADM_vidAddBorder.cpp:224
-#: avidemux/ADM_videoFilter/ADM_vidBSmear.cpp:202
-msgid "_Top border:"
-msgstr "????(_T):"
+#: plugins/ADM_videoFilters/Crop/gtk/DIA_crop.cpp:285
+msgid "Crop Top:"
+msgstr "????:"
 
-#: avidemux/ADM_videoFilter/ADM_vidAddBorder.cpp:225
-#: avidemux/ADM_videoFilter/ADM_vidBSmear.cpp:203
-msgid "_Bottom border:"
-msgstr "????(_B):"
+#: plugins/ADM_videoFilters/Crop/gtk/DIA_crop.cpp:292
+msgid "Crop Bottom:"
+msgstr "????:"
 
-#: avidemux/ADM_videoFilter/ADM_vidAddBorder.cpp:228
-msgid "Add Borders"
-msgstr "????"
+#: plugins/ADM_videoFilters/Crop/gtk/DIA_crop.cpp:335
+msgid "Auto Crop"
+msgstr "????"
 
-#: avidemux/ADM_videoFilter/ADM_vidAddBorder.cpp:232
-#: avidemux/ADM_videoFilter/ADM_vidBSmear.cpp:211
-msgid "Incorrect parameters"
-msgstr "??????"
+#: plugins/ADM_videoFilters/Crop/ADM_vidCrop.cpp:52
+msgid "Crop"
+msgstr "??"
 
-#: avidemux/ADM_videoFilter/ADM_vidAddBorder.cpp:232
-#: avidemux/ADM_videoFilter/ADM_vidBSmear.cpp:211
-msgid "All parameters must be even and within range."
-msgstr "????????????????"
+#: plugins/ADM_videoFilters/Crop/ADM_vidCrop.cpp:55
+msgid "Remove lines from top/bottom/left/right."
+msgstr "???/??/??/??????"
 
-#: avidemux/ADM_videoFilter/ADM_vidEraser.cpp:191
-msgid "Erase"
-msgstr "??"
+#: plugins/ADM_videoFilters/FastConvolution/Sharpen.cpp:26
+msgid "Sharpen"
+msgstr "???"
 
-#: avidemux/ADM_videoFilter/ADM_vidEraser.cpp:192
-msgid "Un-Erase"
-msgstr "???"
+#: plugins/ADM_videoFilters/FastConvolution/Sharpen.cpp:29
+msgid "Enhance difference between near pixels."
+msgstr "?????????"
 
-#: avidemux/ADM_videoFilter/ADM_vidEraser.cpp:196
-msgid "1x1"
-msgstr "1x1"
+#: plugins/ADM_videoFilters/FastConvolution/Mean.cpp:26
+#: plugins/ADM_videoFilters/FastConvolution/Gauss.cpp:27
+msgid "Gauss smooth"
+msgstr "????"
 
-#: avidemux/ADM_videoFilter/ADM_vidEraser.cpp:197
-msgid "3x3"
-msgstr "3x3"
+#: plugins/ADM_videoFilters/FastConvolution/Mean.cpp:26
+#: plugins/ADM_videoFilters/FastConvolution/Gauss.cpp:30
+msgid "Gaussian smooth. Blur the picture."
+msgstr "??????????"
 
-#: avidemux/ADM_videoFilter/ADM_vidEraser.cpp:198
-msgid "5x5"
-msgstr "5x5"
+#: plugins/ADM_videoFilters/FastConvolution/Mean.cpp:27
+#: plugins/ADM_videoFilters/FastConvolution/Median.cpp:27
+msgid "Median"
+msgstr "???"
 
-#: avidemux/ADM_videoFilter/ADM_vidEraser.cpp:199
-msgid "7x7"
-msgstr "7x7"
+#: plugins/ADM_videoFilters/FastConvolution/Mean.cpp:27
+#: plugins/ADM_videoFilters/FastConvolution/Median.cpp:30
+msgid "Median kernel 3x3. Remove high frequency noise."
+msgstr "????? 3x3?????????"
 
-#: avidemux/ADM_videoFilter/ADM_vidEraser.cpp:200
-msgid "9x9"
-msgstr "9x9"
+#: plugins/ADM_videoFilters/FastConvolution/Mean.cpp:31
+msgid "Mean"
+msgstr "??"
 
-#: avidemux/ADM_videoFilter/ADM_vidEraser.cpp:201
-msgid "11x11"
-msgstr "11x11"
+#: plugins/ADM_videoFilters/FastConvolution/Mean.cpp:34
+msgid "Mean (blur) kernel."
+msgstr "?? (??) ???"
 
-#: avidemux/ADM_videoFilter/ADM_vidEraser.cpp:202
-msgid "15x15"
-msgstr "15x15"
+#: plugins/ADM_videoFilters/FastConvolution/ADM_vidFastConvolution.cpp:180
+msgid "Fast Convolution"
+msgstr "????"
 
-#: avidemux/ADM_videoFilter/ADM_vidEraser.cpp:203
-msgid "21x21"
-msgstr "21x21"
+#: plugins/ADM_videoFilters/Ass/ADM_vidASS.cpp:47
+#: plugins/ADM_videoFilters/Ass/ADM_vidASS.cpp:92
+msgid "ASS"
+msgstr "ASS"
 
-#: avidemux/ADM_videoFilter/ADM_vidEraser.cpp:207
-msgid "Brush _Mode:"
-msgstr "????(_M):"
+#: plugins/ADM_videoFilters/Ass/ADM_vidASS.cpp:50
+msgid "Add ASS/SSA subtitles to the picture."
+msgstr "?? ASS/SSA ??????"
 
-#: avidemux/ADM_videoFilter/ADM_vidEraser.cpp:211
-msgid "Brush _Size:"
-msgstr "????(_S):"
+#: plugins/ADM_videoFilters/Ass/ADM_vidASS.cpp:84
+msgid "_Subtitle file (ASS/SSA):"
+msgstr "??? (ASS/SSA)(_S):"
 
-#: avidemux/ADM_videoFilter/ADM_vidEraser.cpp:244
-msgid "Output \"_Color\" for all masked pixels:"
-msgstr "??????????? \"??\" (_C):"
+#: plugins/ADM_videoFilters/Ass/ADM_vidASS.cpp:84
+#: plugins/ADM_videoFilters/Srt/DIA_srt.cpp:84
+msgid "Select Subtitle file"
+msgstr "?????"
 
-#: avidemux/ADM_videoFilter/ADM_vidEraser.cpp:250
-msgid "Eraser _Data File:"
-msgstr "??????(_D):"
+#: plugins/ADM_videoFilters/Ass/ADM_vidASS.cpp:85
+msgid "_Line spacing:"
+msgstr "??(_L):"
 
-#: avidemux/ADM_videoFilter/ADM_vidEraser.cpp:250
-msgid "Select data file"
-msgstr "?????"
+#: plugins/ADM_videoFilters/Ass/ADM_vidASS.cpp:86
+msgid "_Font scale:"
+msgstr "????(_F):"
 
-#: avidemux/ADM_videoFilter/ADM_vidEraser.cpp:261
-msgid "Eraser Configuration"
-msgstr "?????"
+#: plugins/ADM_videoFilters/Ass/ADM_vidASS.cpp:87
+msgid "_Top margin:"
+msgstr "????(_T):"
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:261
-msgid "P' = A"
-msgstr "P' = A"
+#: plugins/ADM_videoFilters/Ass/ADM_vidASS.cpp:88
+msgid "Botto_m margin"
+msgstr "????(_M)"
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:262
-msgid "P' = P"
-msgstr "P' = P"
+#: plugins/ADM_videoFilters/SwapUV/ADM_vidUVSwap.cpp:28
+msgid "Swap U and V"
+msgstr "?? U ? V"
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:263
-msgid "P' = P - A"
-msgstr "P' = P - A"
+#: plugins/ADM_videoFilters/SwapUV/ADM_vidUVSwap.cpp:31
+msgid "Invert chroma U and chroma V."
+msgstr "?? U ? V ????"
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:264
-msgid "P' = A - P"
-msgstr "P' = A - P"
+#: plugins/ADM_videoFilters/SwapField/ADM_vidKeepOddFields.cpp:37
+msgid "Keep odd fields"
+msgstr "??????"
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:265
-msgid "P' = P + A"
-msgstr "P' = P + A"
+#: plugins/ADM_videoFilters/SwapField/ADM_vidKeepOddFields.cpp:40
+msgid "Keep bottom fields. Gives a half height picture.."
+msgstr "????????????????.."
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:266
-msgid "P' = P * A"
-msgstr "P' = P * A"
+#: plugins/ADM_videoFilters/SwapField/ADM_vidKeepEvenFields.cpp:36
+msgid "Keep even fields"
+msgstr "??????"
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:267
-msgid "P' = P / A"
-msgstr "P' = P / A"
+#: plugins/ADM_videoFilters/SwapField/ADM_vidKeepEvenFields.cpp:39
+msgid "Keep top fields. Gives a half height picture.."
+msgstr "????????????????.."
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:268
-msgid "P' = A / P"
-msgstr "P' = A / P"
+#: plugins/ADM_videoFilters/SwapField/ADM_vidSwapFields.cpp:33
+msgid "Swap fields"
+msgstr "????"
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:269
-msgid "P' = min (P, A)"
-msgstr "P' = min (P, A)"
+#: plugins/ADM_videoFilters/SwapField/ADM_vidSwapFields.cpp:36
+msgid "Swap top and bottom fields."
+msgstr "???????????"
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:270
-msgid "P' = max (P, A)"
-msgstr "P' = max (P, A)"
+#: plugins/ADM_videoFilters/SwapField/ADM_vidSwapSmart.cpp:36
+msgid "Smart swap fields"
+msgstr "???????"
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:275
-msgid "A = convolve(P); Load convolution kernel from file"
-msgstr "A = ??(P); ?????????"
+#: plugins/ADM_videoFilters/SwapField/ADM_vidSwapSmart.cpp:39
+msgid "Smartly swap fields. Needed when field order changes."
+msgstr "?????????????????"
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:277
-msgid "A = pixel from image file as float; Load image from file"
-msgstr "A = ???????????; ???????"
+#: plugins/ADM_videoFilters/MplayerResize/ADM_vidMPLResize.cpp:84
+msgid "MPlayer resize"
+msgstr "MPlayer ????"
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:279
-msgid "A = pixel from image file as integer; Load image from file"
-msgstr "A = ??????????; ???????"
+#: plugins/ADM_videoFilters/MplayerResize/ADM_vidMPLResize.cpp:87
+msgid "Change image size. Faster than Avisynth's Resize."
+msgstr "???????? Avisynth ???????"
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:281
-msgid "A = floating point constant value"
-msgstr "A = ??????"
+#: plugins/ADM_videoFilters/MplayerDenoise3D/ADM_vidMPLD3D.cpp:32
+#: plugins/ADM_videoFilters/MplayerDenoise3D/ADM_vidMPLD3D.cpp:66
+msgid "MPlayer hqdn3d"
+msgstr "MPlayer hqdn3d"
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:283
-msgid "A = rolling average of pixel: A = A*(1-alpha)+(P*alpha)"
-msgstr "A = ????????: A = A*(1-alpha)+(P*alpha)"
+#: plugins/ADM_videoFilters/MplayerDenoise3D/ADM_vidMPLD3D.cpp:35
+msgid "High quality version of denoise3d. Slower but more precise."
+msgstr "denoise3d ??????? ???????"
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:288
-msgid "Select _Operation on each pixel P and input A:"
-msgstr "??????? P ?????? A(_O):"
+#: plugins/ADM_videoFilters/MplayerDenoise3D/ADM_vidMPLD3D.cpp:60
+#: plugins/ADM_videoFilters/MplayerDenoise3D/ADM_vidMPLD3Dlow.cpp:60
+msgid "_Spatial luma strength:"
+msgstr "???????(_S):"
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:293
-msgid "Input _Type:"
-msgstr "????(_T):"
+#: plugins/ADM_videoFilters/MplayerDenoise3D/ADM_vidMPLD3D.cpp:61
+#: plugins/ADM_videoFilters/MplayerDenoise3D/ADM_vidMPLD3Dlow.cpp:61
+msgid "S_patial chroma strength:"
+msgstr "???????(_P):"
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:324
-msgid "Input _File (image or convolution kernel):"
-msgstr "??? (???????)(_F):"
+#: plugins/ADM_videoFilters/MplayerDenoise3D/ADM_vidMPLD3D.cpp:62
+#: plugins/ADM_videoFilters/MplayerDenoise3D/ADM_vidMPLD3Dlow.cpp:62
+msgid "_Temporal strength:"
+msgstr "????(_T):"
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:327
-msgid ""
-"_Load Bias (added to each pixel\n"
-"in file image when loaded):"
-msgstr ""
-"????(????\n"
-"????????????)(_L):"
+#: plugins/ADM_videoFilters/MplayerDenoise3D/ADM_vidMPLD3Dlow.cpp:33
+#: plugins/ADM_videoFilters/MplayerDenoise3D/ADM_vidMPLD3Dlow.cpp:66
+msgid "MPlayer denoise3d"
+msgstr "MPlayer denoise3d"
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:332
-msgid ""
-"Load _Multiplier (each pixel in\n"
-"file image mult. by this when loaded):"
-msgstr ""
-"????? (????\n"
-"??????????????)(_M):"
+#: plugins/ADM_videoFilters/MplayerDenoise3D/ADM_vidMPLD3Dlow.cpp:36
+msgid "Reduce noise, smooth image, increase compressibility."
+msgstr "????????????????"
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:338
-msgid "Input _Constant:"
-msgstr "?????(_C):"
+#: plugins/ADM_videoFilters/VerticalFlip/ADM_vidFlipV.cpp:47
+msgid "Vertical flip"
+msgstr "????"
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:342
-msgid ""
-"Memory constant _alpha\n"
-"(where A = (1-alpha)*A + alpha*(curr_frame + lookahead)):"
-msgstr ""
-"????? _alpha ???\n"
-"(?? A = (1-alpha)*A + alpha*(????+?????)):"
+#: plugins/ADM_videoFilters/VerticalFlip/ADM_vidFlipV.cpp:50
+msgid "Vertically flip the picture."
+msgstr "???????"
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:347
-msgid "Look ahead _N frames:"
-msgstr "??? _N ??:"
+#: plugins/ADM_videoFilters/Srt/ADM_vidSRT.cpp:37
+#: plugins/ADM_videoFilters/Srt/DIA_srt.cpp:108
+msgid "Subtitler"
+msgstr "Subtitler"
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:351
-msgid "Init _Start Frame (first frame # to use for head start):"
-msgstr "??????? (????? # ?????)(_S):"
+#: plugins/ADM_videoFilters/Srt/ADM_vidSRT.cpp:40
+msgid "Add srt/sub subtitles to the picture."
+msgstr "?? srt/sub ??????"
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:355
-msgid "Init _End Frame (last frame # to use for head start):"
-msgstr "??????? (???? # ?????)(_E):"
+#: plugins/ADM_videoFilters/Srt/ADM_vidSRT.cpp:191
+msgid "Could not open subtitle file"
+msgstr "???????"
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:359
-msgid "Init By _Rolling (compute head start using a rolling average rather than a straight average)"
-msgstr "???????(??????????????????????)(_R)"
+#: plugins/ADM_videoFilters/Srt/ADM_vidSRT.cpp:211
+msgid "Cannot identify subtitle format"
+msgstr "?????????"
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:364
-msgid "_Bias (will be added to result):"
-msgstr "?? (??????)(_B):"
+#: plugins/ADM_videoFilters/Srt/gtk/DIA_srt.cpp:65
+#: plugins/ADM_videoFilters/Srt/gtk/DIA_srt.cpp:196
+msgid "Subtitle Size and Position"
+msgstr "???????"
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:367
-msgid "_Result Bias (added to each result pixel):"
-msgstr "???? (??????)(_R):"
+#: plugins/ADM_videoFilters/Srt/gtk/DIA_srt.cpp:210
+msgid "Font Size:"
+msgstr "????:"
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:371
-msgid ""
-"Result _Multiplier (each result pixel\n"
-"multiplied by this):"
-msgstr ""
-"??? (????\n"
-"??????????????)(_M):"
+#: plugins/ADM_videoFilters/Srt/DIA_srt.cpp:37
+msgid "Arabic"
+msgstr "???"
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:376
-msgid "_Histogram every N frames (0 to disable):"
-msgstr "? N ??????? (0 ???)(_H):"
+#: plugins/ADM_videoFilters/Srt/DIA_srt.cpp:38
+msgid "Baltic"
+msgstr "????"
 
-#: avidemux/ADM_videoFilter/ADM_vidThreshold.cpp:146
-msgid "Mi_nimum value to be in-range:"
-msgstr "????????(_N):"
+#: plugins/ADM_videoFilters/Srt/DIA_srt.cpp:39
+msgid "Chinese Simplified (GB2312)"
+msgstr "???? (GB2312)"
 
-#: avidemux/ADM_videoFilter/ADM_vidThreshold.cpp:147
-msgid "Ma_ximum value to be in-range:"
-msgstr "????????(_X):"
+#: plugins/ADM_videoFilters/Srt/DIA_srt.cpp:40
+msgid "Chinese Traditional (Big5)"
+msgstr "???? (Big5)"
 
-#: avidemux/ADM_videoFilter/ADM_vidThreshold.cpp:150
-msgid "In-range values go white, out-of-range go black"
-msgstr "?????????????????"
+#: plugins/ADM_videoFilters/Srt/DIA_srt.cpp:41
+msgid "Cyrillic"
+msgstr "?????"
 
-#: avidemux/ADM_videoFilter/ADM_vidThreshold.cpp:151
-msgid "In-range values go black, out-of-range go white"
-msgstr "?????????????????"
+#: plugins/ADM_videoFilters/Srt/DIA_srt.cpp:42
+msgid "Latin-1 (Western European)"
+msgstr "??-1 (??)"
 
-#: avidemux/ADM_videoFilter/ADM_vidThreshold.cpp:156
-msgid "Output values:"
-msgstr "???:"
+#: plugins/ADM_videoFilters/Srt/DIA_srt.cpp:43
+msgid "Latin-2 (Central European)"
+msgstr "??-2 (??)"
 
-#: avidemux/ADM_videoFilter/ADM_vidFlux.cpp:134
-msgid "_Temporal threshold:"
-msgstr "?????(_T):"
+#: plugins/ADM_videoFilters/Srt/DIA_srt.cpp:44
+msgid "Greek"
+msgstr "??"
 
-#: avidemux/ADM_videoFilter/ADM_vidFlux.cpp:135
-msgid "_Spatial threshold:"
-msgstr "?????(_S):"
+#: plugins/ADM_videoFilters/Srt/DIA_srt.cpp:45
+msgid "Hebrew"
+msgstr "???"
 
-#: avidemux/ADM_videoFilter/ADM_vidDropOut.cpp:61
-msgid "DropOut Threshold"
-msgstr "?????"
+#: plugins/ADM_videoFilters/Srt/DIA_srt.cpp:46
+msgid "Slovene"
+msgstr "?????"
 
-#: avidemux/ADM_videoFilter/ADM_vidDropOut.cpp:64
-msgid "Drop Out"
-msgstr "??"
+#: plugins/ADM_videoFilters/Srt/DIA_srt.cpp:47
+msgid "Turkish"
+msgstr "???"
 
-#: avidemux/ADM_videoFilter/ADM_vidSRT.cpp:208
-msgid "Could not open subtitle file"
-msgstr "???????"
+#: plugins/ADM_videoFilters/Srt/DIA_srt.cpp:48
+msgid "UTF-8"
+msgstr "UTF-8"
 
-#: avidemux/ADM_videoFilter/ADM_vidSRT.cpp:228
-msgid "Cannot identify subtitle format"
-msgstr "?????????"
+#: plugins/ADM_videoFilters/Srt/DIA_srt.cpp:49
+msgid "UTF-16"
+msgstr "UTF-16"
 
-#: avidemux/ADM_videoFilter/ADM_vidMPLD3D.cpp:72
-#: avidemux/ADM_videoFilter/ADM_vidMPLD3Dlow.cpp:72
-msgid "_Spatial luma strength:"
-msgstr "???????(_S):"
+#: plugins/ADM_videoFilters/Srt/DIA_srt.cpp:84
+msgid "_Subtitle file:"
+msgstr "???(_S):"
 
-#: avidemux/ADM_videoFilter/ADM_vidMPLD3D.cpp:73
-#: avidemux/ADM_videoFilter/ADM_vidMPLD3Dlow.cpp:73
-msgid "S_patial chroma strength:"
-msgstr "???????(_P):"
+#: plugins/ADM_videoFilters/Srt/DIA_srt.cpp:85
+msgid "_Font (TTF):"
+msgstr "?? (TT_F):"
 
-#: avidemux/ADM_videoFilter/ADM_vidMPLD3D.cpp:74
-#: avidemux/ADM_videoFilter/ADM_vidMPLD3Dlow.cpp:74
-msgid "_Temporal strength:"
-msgstr "????(_T):"
+#: plugins/ADM_videoFilters/Srt/DIA_srt.cpp:85
+msgid "Select TTF file"
+msgstr "?? TTF ?"
 
-#: avidemux/ADM_videoFilter/ADM_vidForcedPP.cpp:81
-msgid "Forced Postprocessing"
-msgstr "???????"
+#: plugins/ADM_videoFilters/Srt/DIA_srt.cpp:100
+msgid "_Encoding:"
+msgstr "??(_E):"
 
-#: avidemux/ADM_videoFilter/ADM_vidFade.cpp:65
-msgid "Out"
-msgstr "?"
+#: plugins/ADM_videoFilters/Srt/DIA_srt.cpp:102
+msgid "S_elect C_olor"
+msgstr "????"
 
-#: avidemux/ADM_videoFilter/ADM_vidFade.cpp:65
-msgid "Fade out"
-msgstr "??"
+#: plugins/ADM_videoFilters/Srt/DIA_srt.cpp:103
+msgid "Set Size and _Position"
+msgstr "???????(_P)"
 
-#: avidemux/ADM_videoFilter/ADM_vidFade.cpp:65
-msgid "In"
-msgstr "?"
+#: plugins/ADM_videoFilters/Srt/DIA_srt.cpp:104
+msgid "_Auto split"
+msgstr "????(_A)"
 
-#: avidemux/ADM_videoFilter/ADM_vidFade.cpp:65
-msgid "Fade in"
-msgstr "??"
+#: plugins/ADM_videoFilters/Srt/DIA_srt.cpp:105
+msgid "_Delay (ms):"
+msgstr "?? (ms)(_D):"
 
-#: avidemux/ADM_videoFilter/ADM_vidFade.cpp:71
-msgid "_Fade type:"
-msgstr "????(_F):"
+#: plugins/ADM_videoFilters/ASharp/gtk/DIA_asharp.cpp:65
+msgid "ASHARP"
+msgstr "ASHARP"
 
-#: avidemux/ADM_videoFilter/ADM_vidFade.cpp:72
-msgid "_Start frame:"
-msgstr "????(_S):"
+#: plugins/ADM_videoFilters/ASharp/gtk/DIA_asharp.cpp:177
+msgid "ASharp by MarcFD"
+msgstr "ASharp ??? MarcFD"
 
-#: avidemux/ADM_videoFilter/ADM_vidFade.cpp:73
-msgid "_End frame:"
-msgstr "????(_E):"
+#: plugins/ADM_videoFilters/ASharp/gtk/DIA_asharp.cpp:190
+msgid "Threshold :"
+msgstr "???:"
 
-#: avidemux/ADM_videoFilter/ADM_vidFade.cpp:74
-msgid "Fade to _black"
-msgstr "???????(_B)"
+#: plugins/ADM_videoFilters/ASharp/gtk/DIA_asharp.cpp:198
+msgid "Strength :"
+msgstr "??:"
 
-#: avidemux/ADM_videoFilter/ADM_vidFade.cpp:83
-msgid "Parameter Error"
-msgstr "????"
+#: plugins/ADM_videoFilters/ASharp/gtk/DIA_asharp.cpp:206
+msgid "Block Adaptative :"
+msgstr "????:"
 
-#: avidemux/ADM_videoFilter/ADM_vidFade.cpp:83
-msgid "Start must be before end, and both within video # of frames."
-msgstr "??????????????????? # ???"
+#: plugins/ADM_videoFilters/ASharp/gtk/DIA_asharp.cpp:214
+msgid "Unknown flag :"
+msgstr "?????:"
 
-#: avidemux/ADM_videoFilter/ADM_vidKernelDeint.cpp:93
-msgid "Smaller means more deinterlacing"
-msgstr "??????????"
+#: plugins/ADM_videoFilters/ASharp/ADM_vidAsharp.cpp:59
+msgid "asharp"
+msgstr "asharp"
 
-#: avidemux/ADM_videoFilter/ADM_vidKernelDeint.cpp:94
-msgid "_Sharper engine:"
-msgstr "?????(_S):"
+#: plugins/ADM_videoFilters/ASharp/ADM_vidAsharp.cpp:62
+msgid "Adaptative sharpener by MarcFD."
+msgstr "?????????? MarcFD?"
 
-#: avidemux/ADM_videoFilter/ADM_vidKernelDeint.cpp:95
-msgid "T_woway"
-msgstr "??(_W)"
+#: plugins/ADM_videoFilters/FluxSmooth/ADM_vidFlux.cpp:56
+#: plugins/ADM_videoFilters/FluxSmooth/ADM_vidFlux.cpp:127
+msgid "FluxSmooth"
+msgstr "????"
 
-#: avidemux/ADM_videoFilter/ADM_vidKernelDeint.cpp:95
-msgid "Extrapolate better (better not to use it)"
-msgstr "????? (??????)"
+#: plugins/ADM_videoFilters/FluxSmooth/ADM_vidFlux.cpp:59
+msgid "Spatio-temporal cleaner by Ross Thomas."
+msgstr "??-????????? Ross Thomas?"
 
-#: avidemux/ADM_videoFilter/ADM_vidKernelDeint.cpp:96
-msgid "_Map"
-msgstr "??(_M)"
+#: plugins/ADM_videoFilters/FluxSmooth/ADM_vidFlux.cpp:122
+msgid "_Temporal threshold:"
+msgstr "?????(_T):"
 
-#: avidemux/ADM_videoFilter/ADM_vidKernelDeint.cpp:96
-msgid "Show interlaced areas (for test!)"
-msgstr "???????(????)"
+#: plugins/ADM_videoFilters/FluxSmooth/ADM_vidFlux.cpp:123
+msgid "_Spatial threshold:"
+msgstr "?????(_S):"
 
-#: avidemux/ADM_videoFilter/ADM_vidResampleFPS.cpp:85
-msgid "_New frame rate:"
-msgstr "????(_N):"
+#: plugins/ADM_videoFilters/MSmooth/ADM_vidMsmooth.cpp:103
+msgid "MSmooth by Donald Graft"
+msgstr "MSmooth ?????? Donald Graft"
 
-#: avidemux/ADM_videoFilter/ADM_vidResampleFPS.cpp:86
-msgid "_Blend"
-msgstr "??(_B)"
+#: plugins/ADM_videoFilters/MSmooth/ADM_vidMsmooth.cpp:106
+msgid "Smooth the image, don't blur edges. Useful on anime."
+msgstr "??????????????????"
 
-#: avidemux/ADM_videoFilter/ADM_vidDenoise.cpp:384
-msgid "_Luma lock:"
-msgstr "????(_L):"
+#: plugins/ADM_videoFilters/MSmooth/ADM_vidMsmooth.cpp:181
+msgid "_High quality"
+msgstr "???(_H)"
 
-#: avidemux/ADM_videoFilter/ADM_vidDenoise.cpp:385
-msgid "C_hroma lock:"
-msgstr "????(_H):"
+#: plugins/ADM_videoFilters/MSmooth/ADM_vidMsmooth.cpp:182
+msgid "Show _mask"
+msgstr "????(_M)"
 
-#: avidemux/ADM_videoFilter/ADM_vidDenoise.cpp:386
-msgid "L_uma threshold:"
-msgstr "?????(_U):"
+#: plugins/ADM_videoFilters/MSmooth/ADM_vidMsmooth.cpp:188
+msgid "MSmooth"
+msgstr "MSmooth"
 
-#: avidemux/ADM_videoFilter/ADM_vidDenoise.cpp:387
-msgid "Ch_roma threshold:"
-msgstr "?????(_R):"
+#: plugins/ADM_videoFilters/colorYUV/ADM_vidColorYuv.cpp:69
+msgid "Avisynth ColorYUV"
+msgstr "Avisynth ColorYUV"
 
-#: avidemux/ADM_videoFilter/ADM_vidDenoise.cpp:389
-msgid "_Scene change:"
-msgstr "????(_S):"
+#: plugins/ADM_videoFilters/colorYUV/ADM_vidColorYuv.cpp:72
+msgid "Alter colors (auto white balance etc...). Ported from Avisynth."
+msgstr "???? (??????...)?? Avisynth ?????"
 
-#: avidemux/ADM_videoFilter/ADM_vidHardIvtcRemoval.cpp:88
-msgid "If value is smaller than threshold it is considered valid. Smaller value might mean more false positive"
-msgstr "????????????????????????????????"
+#: plugins/ADM_videoFilters/colorYUV/gtk/DIA_coloryuv.cpp:138
+msgid "ColorYuv (From avisynth)"
+msgstr "??????(? avisynth)"
 
-#: avidemux/ADM_videoFilter/ADM_vidHardIvtcRemoval.cpp:91
-msgid "_Identical:"
-msgstr "??(_I):"
+#: plugins/ADM_videoFilters/colorYUV/gtk/DIA_coloryuv.cpp:176
+msgid "Gamma"
+msgstr "Gamma"
 
-#: avidemux/ADM_videoFilter/ADM_vidHardIvtcRemoval.cpp:96
-msgid "Hard IVTC Removal"
-msgstr "??? IVTC"
+#: plugins/ADM_videoFilters/colorYUV/gtk/DIA_coloryuv.cpp:190
+msgid "Luma Y"
+msgstr "?? Y"
 
-#: avidemux/ADM_videoFilter/ADM_vidMcDeint.cpp:102
-msgid "Fast"
-msgstr "??"
+#: plugins/ADM_videoFilters/colorYUV/gtk/DIA_coloryuv.cpp:307
+msgid "<b>Color Correction Matrix</b>"
+msgstr "<b>??????</b>"
 
-#: avidemux/ADM_videoFilter/ADM_vidMcDeint.cpp:103
-msgid "Medium"
-msgstr "??"
+#: plugins/ADM_videoFilters/colorYUV/gtk/DIA_coloryuv.cpp:330
+msgid "Matrix"
+msgstr "??"
 
-#: avidemux/ADM_videoFilter/ADM_vidMcDeint.cpp:104
-msgid "Slow iterative motion search"
-msgstr "????????"
+#: plugins/ADM_videoFilters/colorYUV/gtk/DIA_coloryuv.cpp:337
+msgid "Opt"
+msgstr "??"
 
-#: avidemux/ADM_videoFilter/ADM_vidMcDeint.cpp:105
-msgid "Extra slow (same as 3+multiple reference frames)"
-msgstr "??? (??3?3??????????)"
+#: plugins/ADM_videoFilters/colorYUV/gtk/DIA_coloryuv.cpp:344
+msgid "Level"
+msgstr "??"
 
-#: avidemux/ADM_videoFilter/ADM_vidMcDeint.cpp:112
-msgid "_Field dominance:"
-msgstr "????(_F):"
+#: plugins/ADM_videoFilters/colorYUV/gtk/DIA_coloryuv.cpp:357
+msgid "Rec.709"
+msgstr "Rec.709"
 
-#: avidemux/ADM_videoFilter/ADM_vidMcDeint.cpp:113
-msgid "_Qp:"
-msgstr "_Qp:"
+#: plugins/ADM_videoFilters/colorYUV/gtk/DIA_coloryuv.cpp:365
+msgid "Coring"
+msgstr "????"
 
-#: avidemux/ADM_videoFilter/ADM_vidFields.cpp:229
-msgid "Motion Threshold"
-msgstr "?????"
+#: plugins/ADM_videoFilters/colorYUV/gtk/DIA_coloryuv.cpp:373
+msgid "TV->PC"
+msgstr "TV ?? PC"
 
-#: avidemux/ADM_videoFilter/ADM_vidFields.cpp:231
-msgid "Blend Threshold"
-msgstr "?????"
+#: plugins/ADM_videoFilters/colorYUV/gtk/DIA_coloryuv.cpp:374
+msgid "PC->TV"
+msgstr "PC ?? TV"
 
-#: avidemux/ADM_videoFilter/ADM_vidStabilize.cpp:61
-msgid "Stabilize Threshold"
-msgstr "?????"
+#: plugins/ADM_videoFilters/colorYUV/gtk/DIA_coloryuv.cpp:375
+msgid "PC->TV.Y"
+msgstr "PC ?? TV.Y"
 
-#: avidemux/ADM_videoFilter/ADM_vidFastConvolution.cpp:472
-msgid "Fast Convolution"
-msgstr "????"
+#: plugins/ADM_videoFilters/colorYUV/gtk/DIA_coloryuv.cpp:381
+msgid ""
+"<b>Matrix Warning :</b>\n"
+"all above values are normalized to 256!"
+msgstr ""
+"<b>???? :</b>\n"
+"????????????? 256!"
 
-#: avidemux/ADM_videoFilter/ADM_vidComputeAverage.cpp:181
-msgid "_Start Frame (first frame # to include in average):"
-msgstr "????(??????????? #)(_S):"
+#: plugins/ADM_videoFilters/colorYUV/gtk/DIA_coloryuv.cpp:387
+msgid "AutoGain"
+msgstr "????"
 
-#: avidemux/ADM_videoFilter/ADM_vidComputeAverage.cpp:185
-msgid "_End Frame (last frame # to include), -1 = last:"
-msgstr "???? (???????? #), -1 = ??(_E):"
+#: plugins/ADM_videoFilters/colorYUV/gtk/DIA_coloryuv.cpp:391
+msgid "Display Stats"
+msgstr "????"
 
-#: avidemux/ADM_videoFilter/ADM_vidComputeAverage.cpp:189
-msgid "Select output file"
-msgstr "?????"
+#: plugins/ADM_videoFilters/colorYUV/gtk/DIA_coloryuv.cpp:395
+msgid "AutoWhite"
+msgstr "????"
 
-#: avidemux/ADM_videoFilter/ADM_vidComputeAverage.cpp:192
-msgid "_Bias (only for display; use 0 for average, 128 for frame minus average):"
-msgstr "?? (???????? 0 ?????128 ????????)(_B):"
+#: plugins/ADM_videoFilters/colorYUV/gtk/DIA_coloryuv.cpp:399
+msgid "<b>frame2</b>"
+msgstr "<b>??2</b>"
 
-#: avidemux/ADM_videoFilter/ADM_vidComputeAverage.cpp:196
-msgid "Current frame minus average so far"
-msgstr "??????????????"
+#: plugins/ADM_videoFilters/Equalizer/gtk/DIA_equalizer.cpp:436
+msgid "Equalizer"
+msgstr "???"
 
-#: avidemux/ADM_videoFilter/ADM_vidComputeAverage.cpp:197
-msgid "Average so far"
-msgstr "????????"
+#: plugins/ADM_videoFilters/Equalizer/ADM_vidEqualizer.cpp:23
+msgid "Luma equalizer"
+msgstr "????"
 
-#: avidemux/ADM_videoFilter/ADM_vidComputeAverage.cpp:199
-msgid "Display nothing (fast for batch processing)"
-msgstr "????? (???????????)"
+#: plugins/ADM_videoFilters/Equalizer/ADM_vidEqualizer.cpp:26
+msgid "Luma correction filter with histogram."
+msgstr "??????????"
 
-#: avidemux/ADM_videoFilter/ADM_vidComputeAverage.cpp:203
-msgid "Display _Mode:"
-msgstr "????(_M):"
+#: plugins/ADM_videoFilters/LumaOnly/ADM_vidLuma.cpp:28
+msgid "Luma only"
+msgstr "????"
 
-#: avidemux/ADM_videoFilter/ADM_vidComputeAverage.cpp:208
-msgid "ComputeAverage"
-msgstr "?????"
+#: plugins/ADM_videoFilters/LumaOnly/ADM_vidLuma.cpp:31
+msgid "Convert picture to greyscale (black and white)."
+msgstr "??????? (?????)?"
 
-#: avidemux/ADM_videoFilter/ADM_vidMosaic.cpp:90
-msgid "_Horizontal stacking:"
-msgstr "????(_H):"
+#: plugins/ADM_videoFilters/Fade/ADM_vidFade.cpp:44
+msgid "Fade in/out."
+msgstr "??/??"
 
-#: avidemux/ADM_videoFilter/ADM_vidMosaic.cpp:91
-msgid "_Vertical stacking:"
-msgstr "????(_V):"
+#: plugins/ADM_videoFilters/Fade/ADM_vidFade.cpp:51
+msgid "Out"
+msgstr "?"
 
-#: avidemux/ADM_videoFilter/ADM_vidMosaic.cpp:92
-msgid "_Shrink factor:"
-msgstr "????(_S):"
+#: plugins/ADM_videoFilters/Fade/ADM_vidFade.cpp:51
+msgid "Fade out"
+msgstr "??"
 
-#: avidemux/ADM_videoFilter/ADM_vidMosaic.cpp:93
-msgid "Show _frame"
-msgstr "????(_F)"
+#: plugins/ADM_videoFilters/Fade/ADM_vidFade.cpp:51
+msgid "In"
+msgstr "?"
 
-#: avidemux/ADM_videoFilter/ADM_vidVlad.cpp:99
-msgid "_Luma temporal threshold:"
-msgstr "???????(_L):"
+#: plugins/ADM_videoFilters/Fade/ADM_vidFade.cpp:51
+msgid "Fade in"
+msgstr "??"
 
-#: avidemux/ADM_videoFilter/ADM_vidVlad.cpp:100
-msgid "Ch_roma temporal threshold:"
-msgstr "???????(_R):"
+#: plugins/ADM_videoFilters/Fade/ADM_vidFade.cpp:57
+msgid "_Fade type:"
+msgstr "????(_F):"
 
-#: avidemux/ADM_videoFilter/ADM_vidRotate.cpp:263
-msgid "90 degrees"
-msgstr "90 ?"
+#: plugins/ADM_videoFilters/Fade/ADM_vidFade.cpp:58
+msgid "_Start frame:"
+msgstr "????(_S):"
 
-#: avidemux/ADM_videoFilter/ADM_vidRotate.cpp:263
-msgid "90?"
-msgstr "90?"
+#: plugins/ADM_videoFilters/Fade/ADM_vidFade.cpp:59
+msgid "_End frame:"
+msgstr "????(_E):"
 
-#: avidemux/ADM_videoFilter/ADM_vidRotate.cpp:264
-msgid "180 degrees"
-msgstr "180 ?"
+#: plugins/ADM_videoFilters/Fade/ADM_vidFade.cpp:60
+msgid "Fade to _black"
+msgstr "???????(_B)"
 
-#: avidemux/ADM_videoFilter/ADM_vidRotate.cpp:264
-msgid "180?"
-msgstr "180?"
+#: plugins/ADM_videoFilters/Fade/ADM_vidFade.cpp:69
+msgid "Parameter Error"
+msgstr "????"
 
-#: avidemux/ADM_videoFilter/ADM_vidRotate.cpp:265
-msgid "270 degrees"
-msgstr "270 ?"
+#: plugins/ADM_videoFilters/Fade/ADM_vidFade.cpp:69
+msgid "Start must be before end, and both within video # of frames."
+msgstr "??????????????????? # ???"
 
-#: avidemux/ADM_videoFilter/ADM_vidRotate.cpp:265
-msgid "270?"
-msgstr "270?"
+#: plugins/ADM_audioEncoders/vorbis/audioencoder_vorbis.cpp:301
+msgid "VBR"
+msgstr "VBR"
 
-#: avidemux/ADM_videoFilter/ADM_vidRotate.cpp:267
-msgid "_Angle:"
-msgstr "??(_A):"
+#: plugins/ADM_audioEncoders/vorbis/audioencoder_vorbis.cpp:302
+msgid "Quality based"
+msgstr "????"
 
-#: avidemux/ADM_videoFilter/ADM_vidBSmear.cpp:206
-msgid "Blacken Borders"
-msgstr "????"
+#: plugins/ADM_audioEncoders/vorbis/audioencoder_vorbis.cpp:318
+#: plugins/ADM_audioEncoders/lavcodec/audioencoder_lavcodec.cpp:226
+#: plugins/ADM_audioEncoders/twolame/audioencoder_twolame.cpp:226
+#: plugins/ADM_audioEncoders/aften/audioencoder_aften.cpp:218
+#: plugins/ADM_audioEncoders/lame/audioencoder_lame.cpp:315
+#: plugins/ADM_audioEncoders/faac/audioencoder_faac.cpp:268
+msgid "_Bitrate:"
+msgstr "???(_B):"
 
-#: avidemux/ADM_videoFilter/ADM_vidASS.cpp:87
-msgid "_Subtitle file (ASS/SSA):"
-msgstr "??? (ASS/SSA)(_S):"
+#: plugins/ADM_audioEncoders/vorbis/audioencoder_vorbis.cpp:327
+msgid "Vorbis Configuration"
+msgstr "Vorbis ??"
 
-#: avidemux/ADM_videoFilter/ADM_vidASS.cpp:88
-msgid "_Line spacing:"
-msgstr "??(_L):"
+#: plugins/ADM_audioEncoders/lavcodec/audioencoder_lavcodec.cpp:232
+#: plugins/ADM_audioEncoders/aften/audioencoder_aften.cpp:224
+#: plugins/ADM_audioEncoders/faac/audioencoder_faac.cpp:274
+msgid "Aften Configuration"
+msgstr "Aften ??"
 
-#: avidemux/ADM_videoFilter/ADM_vidASS.cpp:89
-msgid "_Font scale:"
-msgstr "????(_F):"
+#: plugins/ADM_audioEncoders/twolame/audioencoder_twolame.cpp:211
+#: plugins/ADM_audioEncoders/lame/audioencoder_lame.cpp:285
+msgid "Joint stereo"
+msgstr "?????"
 
-#: avidemux/ADM_videoFilter/ADM_vidASS.cpp:90
-msgid "_Top margin:"
-msgstr "????(_T):"
+#: plugins/ADM_audioEncoders/twolame/audioencoder_twolame.cpp:228
+#: plugins/ADM_audioEncoders/lame/audioencoder_lame.cpp:289
+msgid "C_hannel mode:"
+msgstr "????(_H):"
 
-#: avidemux/ADM_videoFilter/ADM_vidASS.cpp:91
-msgid "Botto_m margin"
-msgstr "????(_M)"
+#: plugins/ADM_audioEncoders/twolame/audioencoder_twolame.cpp:232
+msgid "TwoLame Configuration"
+msgstr "TwoLame ??"
 
-#: avidemux/ADM_videoFilter/ADM_vidDecDec.cpp:190
-msgid "Discard closer"
-msgstr "??????"
+#: plugins/ADM_audioEncoders/lame/audioencoder_lame.cpp:293
+msgid "CBR"
+msgstr "CBR"
 
-#: avidemux/ADM_videoFilter/ADM_vidDecDec.cpp:191
-msgid "Replace (interpolate)"
-msgstr "?? (??)"
+#: plugins/ADM_audioEncoders/lame/audioencoder_lame.cpp:294
+msgid "ABR"
+msgstr "ABR"
 
-#: avidemux/ADM_videoFilter/ADM_vidDecDec.cpp:192
-msgid "Discard longer dupe (anim?s)"
-msgstr "?? longer dupe (anim?s)"
+#: plugins/ADM_audioEncoders/lame/audioencoder_lame.cpp:296
+msgid "Extreme"
+msgstr "??"
 
-#: avidemux/ADM_videoFilter/ADM_vidDecDec.cpp:193
-msgid "Pulldown dupe removal"
-msgstr "?? Pulldown ??"
+#: plugins/ADM_audioEncoders/lame/audioencoder_lame.cpp:299
+msgid "Bit_rate mode:"
+msgstr "?????(_R):"
 
-#: avidemux/ADM_videoFilter/ADM_vidDecDec.cpp:196
-msgid "Fastest (no chroma, partial luma)"
-msgstr "?? (??????????)"
+#: plugins/ADM_audioEncoders/lame/audioencoder_lame.cpp:319
+msgid "_Disable reservoir"
+msgstr "?????(_D)"
 
-#: avidemux/ADM_videoFilter/ADM_vidDecDec.cpp:197
-msgid "Fast (partial luma and chroma)"
-msgstr "? (?????????)"
+#: plugins/ADM_audioEncoders/lame/audioencoder_lame.cpp:323
+msgid "LAME Configuration"
+msgstr "LAME ??"
 
-#: avidemux/ADM_videoFilter/ADM_vidDecDec.cpp:198
-msgid "Medium (full luma, no chroma)"
-msgstr "? (??????????)"
+#: plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidConfigDialog.cpp:113
+#: plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp:188
+msgid "<default>"
+msgstr "<??>"
 
-#: avidemux/ADM_videoFilter/ADM_vidDecDec.cpp:199
-msgid "Slow (full luma and chroma)"
-msgstr "? (????????)"
+#: plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidConfigDialog.cpp:114
+#: plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp:189
+msgid "<custom>"
+msgstr "<??>"
 
-#: avidemux/ADM_videoFilter/ADM_vidDecDec.cpp:205
-msgid "_Threshold 1:"
-msgstr "??? 1(_T):"
+#: plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidConfigDialog.cpp:222
+#: plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp:327
+msgid "Save As"
+msgstr "??"
 
-#: avidemux/ADM_videoFilter/ADM_vidDecDec.cpp:206
-msgid "T_hreshold 2:"
-msgstr "??? 2(_H):"
+#: plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidConfigDialog.cpp:222
+msgid "Xvid Configuration File (*.xml)"
+msgstr "Xvid ??? (*.xml)"
 
-#: avidemux/ADM_videoFilter/ADM_vidDecDec.cpp:207
-msgid "C_ycle:"
-msgstr "??(_Y):"
+#: plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidConfigDialog.cpp:253
+#: plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp:358
+msgid "Are you sure you wish to delete the selected configuration?"
+msgstr "?????????? ?"
 
-#: avidemux/ADM_videoFilter/ADM_vidPalShift.cpp:74
-msgid "_Try reverse"
-msgstr "????(_T)"
+#: plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidConfigDialog.cpp:273
+#: plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp:376
+msgid "Target Bitrate:"
+msgstr "?????:"
 
-#: avidemux/ADM_videoFilter/ADM_vidPalShift.cpp:78
-msgid "Pal Field Shift"
-msgstr "Pal ???"
+#: plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidConfigDialog.cpp:274
+#: plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidConfigDialog.cpp:294
+#: plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp:377
+#: plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp:395
+msgid "kbit/s"
+msgstr "kbit/s"
 
-#: avidemux/ADM_videoFilter/ADM_vidYadif.cpp:169
-msgid "Temporal & spatial check"
-msgstr "???????"
+#: plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidConfigDialog.cpp:280
+#: plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp:381
+msgid "Quantiser:"
+msgstr "???:"
 
-#: avidemux/ADM_videoFilter/ADM_vidYadif.cpp:170
-msgid "Bob, temporal & spatial check"
-msgstr "????????????"
+#: plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidConfigDialog.cpp:286
+#: plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp:389
+msgid "Target Video Size:"
+msgstr "??????:"
 
-#: avidemux/ADM_videoFilter/ADM_vidYadif.cpp:171
-msgid "Skip spatial temporal check"
-msgstr "????????"
+#: plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidConfigDialog.cpp:287
+#: plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp:390
+msgid "MB"
+msgstr "MB"
 
-#: avidemux/ADM_videoFilter/ADM_vidYadif.cpp:172
-msgid "Bob, skip spatial temporal check"
-msgstr "?????????????"
+#: plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidConfigDialog.cpp:293
+#: plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp:394
+msgid "Average Bitrate:"
+msgstr "?????:"
 
-#: avidemux/ADM_videoFilter/ADM_vidYadif.cpp:180
-msgid "_Order:"
-msgstr "??(_O):"
+#: plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidCustomMatrixDialog.cpp:41
+#: plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264CustomMatrixDialog.cpp:49
+msgid "Select Matrix File"
+msgstr "?????"
 
-#~ msgid "GTK+ (slow)"
-#~ msgstr "GTK+ (?)"
-#~ msgid "6  - Very High"
-#~ msgstr "6  - ???"
+#: plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidCustomMatrixDialog.cpp:48
+#: plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264CustomMatrixDialog.cpp:60
+msgid "Read Error"
+msgstr "??????"
+
+#: plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidCustomMatrixDialog.cpp:48
+#: plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264CustomMatrixDialog.cpp:60
+msgid "Error reading custom matrix file."
+msgstr "????????????"
+
+#: plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ZoneTableDelegate.cpp:51
+#: plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ZoneTableModel.cpp:76
+msgid "Quantiser"
+msgstr "???"
+
+#: plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ZoneTableDelegate.cpp:52
+#: plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ZoneTableModel.cpp:78
+msgid "Bitrate Factor"
+msgstr "?????"
+
+#: plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp:83
+msgid "Hadamard Exhaustive Search"
+msgstr "????????"
+
+#: plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp:88
+msgid "9 (Best)"
+msgstr "9 (??)"
+
+#: plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp:108
+msgid "Disabled"
+msgstr "???"
+
+#: plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp:109
+msgid "Enabled"
+msgstr "???"
+
+#: plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp:327
+msgid "x264 Configuration File (*.xml)"
+msgstr "x264 ??? (*.xml)"
+
+#: plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp:385
+msgid "Quality:"
+msgstr "??:"
+
+#: plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp:475
+msgid ""
+"Trellis optimisation isn't possible without CABAC coding enabled.  Trellis optimisation will automatically be disabled.\n"
+"\n"
+" Do you wish to continue?"
+msgstr ""
+"??????????? CABAC ???????????????\n"
+"\n"
+" ???????"
+
+#: plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp:485
+msgid ""
+"Trellis optimisation requires CABAC coding to be enabled.  CABAC coding will automatically be enabled.\n"
+"\n"
+"Do you wish to continue?"
+msgstr ""
+"????????? CABAC ????????? CABAC ???\n"
+"\n"
+"???????"
+
+#: plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp:516
+msgid "Are you sure you wish to delete the selected zone?"
+msgstr "??????????? ?"
+
+#: plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ZoneTableModel.cpp:110
+msgid "Frame Start"
+msgstr "????"
+
+#: plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ZoneTableModel.cpp:112
+msgid "Frame End"
+msgstr "????"
+
+#: plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ZoneTableModel.cpp:114
+msgid "Mode"
+msgstr "??"
+
+#: plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ZoneTableModel.cpp:116
+msgid "Value"
+msgstr "??"
+
+#~ msgid "Y800 (lavc)"
+#~ msgstr "Y800 (lavc)"
+#~ msgid "MPEG-4 AVC (x264)"
+#~ msgstr "MPEG-4 AVC (x264)"
+#~ msgid "Y800"
+#~ msgstr "Y800"
+#~ msgid "Xvid4 and FAAC support is required for the iPod profile."
+#~ msgstr "iPod ??????? Xvid4 ? FAAC?"
+#~ msgid "Add pure black border(s). Enlarges the picture."
+#~ msgstr "????????????"
+#~ msgid "Bobber - convert each field into a full sized frame."
+#~ msgstr "Bobber - ??????????????????"
+#~ msgid "Hz Stack fields"
+#~ msgstr "Hz ????"
+#~ msgid "Convert picture to grey, keeping only chroma U."
+#~ msgstr "????????????? U?"
+#~ msgid "Convert picture to grey, keeping only chroma V."
+#~ msgstr "????????????? V?"
+#~ msgid "Blend remover"
+#~ msgstr "?????"
+#~ msgid "Remove blend between previous and next picture."
+#~ msgstr "???????????"
+#~ msgid "Hard pulldown removal"
+#~ msgstr "???? Pulldown"
+#~ msgid "Wrong output format"
+#~ msgstr "???????"
+#~ msgid "Select MPEG as the output."
+#~ msgstr "?? MPEG ?????"
+#~ msgid "Wrong video codec"
+#~ msgstr "????????"
+#~ msgid "Select DVD as the video codec for MPEG TS output."
+#~ msgstr "?? DVD ??????????? MPEG TS"
+#~ msgid "Fatal error"
+#~ msgstr "????"
+#~ msgid "Use glyphset (optional):"
+#~ msgstr "???? (???):"
+#~ msgid "_Use libavcodec MPEG-2 decoder"
+#~ msgstr "?? libavcodec MPEG-2 ???(_U)"
+#~ msgid "_x264 threads:"
+#~ msgstr "_x264 ???:"
+#~ msgid "X_vid threads:"
+#~ msgstr "X_vid ???:"
+#~ msgid "Core Audio"
+#~ msgstr "Core Audio"
+#~ msgid "JACK"
+#~ msgstr "JACK"
+#~ msgid "Pulse Audio"
+#~ msgstr "Pulse Audio"
+#~ msgid "Win32"
+#~ msgstr "Win32"
+#~ msgid "_Audio output:"
+#~ msgstr "????(_A):"
+#~ msgid "ALSA _device:"
+#~ msgstr "ALSA??(_D):"
+#~ msgid "Aften"
+#~ msgstr "Aften"
+#~ msgid "amrnb"
+#~ msgstr "amrnb"
+#~ msgid "FAAC"
+#~ msgstr "FAAC"
+#~ msgid "FAAD2"
+#~ msgstr "FAAD2"
+#~ msgid "LAME"
+#~ msgstr "LAME"
+#~ msgid "liba52"
+#~ msgstr "liba52"
+#~ msgid "libdca"
+#~ msgstr "libdca"
+#~ msgid "MAD"
+#~ msgstr "MAD"
+#~ msgid "Vorbis"
+#~ msgstr "Vorbis"
+#~ msgid "1 - QPel SAD (Fastest)"
+#~ msgstr "1 - 1/4 ?? SAD (??)"
+#~ msgid "2 - QPel SATD"
+#~ msgstr "2 - 1/4 ?? SATD"
+#~ msgid "3 - HPel on MB then QPel"
+#~ msgstr "3 - MB ??? 1/2 ???? 1/4 ??"
+#~ msgid "4 - Always QPel"
+#~ msgstr "4 - ???? 1/4 ??"
+#~ msgid "5 - QPel + Bidirectional ME"
+#~ msgstr "5 - QPel + ???????"
+#~ msgid "6 - RD on I/P frames (Default)"
+#~ msgstr "6 - I/P ????????? (??)"
+#~ msgid "7 - RD on all frames"
+#~ msgstr "7B - ???????????"
+#~ msgid "8 - RD refinement on I/P frames"
+#~ msgstr "8 - I/P ?????????????"
+#~ msgid "9 - RD refinement on all frames"
+#~ msgstr "9 - ???????????????"
+#~ msgid "1  - Extremely Low (Fastest)"
+#~ msgstr "1  - ???? (??)"
+#~ msgid "2  - Very Low"
+#~ msgstr "2  - ???"
+#~ msgid "3  - Low"
+#~ msgstr "3  - ?"
+#~ msgid "4  - Medium"
+#~ msgstr "4  - ?"
+#~ msgid "5  - High"
+#~ msgstr "5  - ?"
+#~ msgid "6  - High (Default)"
+#~ msgstr "6  - ? (??)"
+#~ msgid "6B - Very High (RDO on B-frames)"
+#~ msgstr "6B - ??? (B-??? RDO)"
+#~ msgid "7  - Ultra High"
+#~ msgstr "7  - ??"
+#~ msgid "7B - Ultra High (RDO on B-frames)"
+#~ msgstr "7B - ?? (B-??? RDO)"
+#~ msgid "Encoding Mode"
+#~ msgstr "????"
+#~ msgid "Target Size"
+#~ msgstr "????"
 #~ msgid ""
-#~ ".\n"
-#~ " Did you use too low / too high target for 2 pass ?"
+#~ "Constant Quantizer - Each frame will have the same compression. Low "
+#~ "numbers equal higher quality while high numbers equal lower quality."
 #~ msgstr ""
-#~ ".\n"
-#~ " ???? ??/?? ????????? ?"
-#~ msgid "can't determine $USERPROFILE."
-#~ msgstr "???? $USERPROFILE."
-#~ msgid "? 2001-2007 Mean"
-#~ msgstr "? 2001-2007 Mean"
-#~ msgid "http://www.avidemux.org"
-#~ msgstr "http://www.avidemux.org"
-#~ msgid "Invalid filename"
-#~ msgstr "?????"
-#~ msgid "Please select or enter a valid filename."
-#~ msgstr "?????????????"
-#~ msgid "Invalid jobname"
-#~ msgstr "???????"
-#~ msgid "Please select or enter a valid jobname."
-#~ msgstr "???????????????"
-#~ msgid "Job name displayed in the job list and used as the script filename"
-#~ msgstr "?????????????????????"
-#~ msgid "Filename of the audio/video output"
-#~ msgstr "?? ??/?? ???"
-#~ msgid "Entry input for target file size or bitrate"
-#~ msgstr "?????????????"
-#~ msgid "Quantizer (0-51):"
-#~ msgstr "??? (0-51):"
+#~ "????? - ??????????????????????????????"
+#~ "???"
+#~ msgid "Target bitrate or file size"
+#~ msgstr "???????????"
+#~ msgid "Single Pass - Quality Quantizer (Average)"
+#~ msgstr "???? - ?????? (???)"
+#~ msgid "Single Pass - Quality Quantizer (Constant)"
+#~ msgstr "???? - ?????? (???)"
+#~ msgid "Single Pass - Bitrate (Average)"
+#~ msgstr "???? - ??? (???)"
+#~ msgid "Two Pass - Video Size"
+#~ msgstr "???? - ????"
+#~ msgid "Two Pass - Average Bitrate"
+#~ msgstr "???? - ?????"
+#~ msgid "Bitrate"
+#~ msgstr "???"
+#~ msgid "Partition Decision"
+#~ msgstr "????"
+#~ msgid "Method"
+#~ msgstr "??"
+#~ msgid "Diamond Search"
+#~ msgstr "????"
+#~ msgid "Hexagonal Search"
+#~ msgstr "?????"
+#~ msgid "Uneven Multi-hexagon"
+#~ msgstr "???????"
+#~ msgid "Exhaustive Search"
+#~ msgstr "????"
+#~ msgid "Max. Ref. Frames"
+#~ msgstr "???????"
+#~ msgid "Range"
+#~ msgstr "??"
 #~ msgid ""
-#~ "Uses chroma (color) components for motion for compression and helps the "
-#~ "quality"
-#~ msgstr "??????????(??)????????"
-#~ msgid "Uncheck to enable fast p-skip"
-#~ msgstr "????????? p-skip"
+#~ "Define how many pixels are analysed for motion estimation. The higher the "
+#~ "range the more accurate the analysis but the slower the encoding time."
+#~ msgstr "??????????????????????????????"
 #~ msgid ""
-#~ "Lossless compression method which usually improves the bitrate usage by "
-#~ "15% (especially on high bitrate). Helps the quality a lot but is slower. "
+#~ "Set how many previous frames can be referenced by a P/B-frame. Numbers "
+#~ "above 5 do not seem to improve quality greatly. Numbers 3 to 5 are "
+#~ "recommended."
 #~ msgstr ""
-#~ "?????????? 15% ???????(????????)????????"
-#~ "???????"
+#~ "????????????? P/B-????????? 5 ???????????"
+#~ "?????? 3 ? 5?"
+#~ msgid "Chroma ME"
+#~ msgstr "??????"
+#~ msgid "Use color information for detecting motion to improve quality"
+#~ msgstr "????????????????"
+#~ msgid "Mixed Refs"
+#~ msgstr "????"
+#~ msgid "Calculate referencing individually based on each partition"
+#~ msgstr "????????????????"
+#~ msgid "Fast P-Skip"
+#~ msgstr "?? P-??"
 #~ msgid ""
-#~ "Set the amount of blurring to use for block edges when they are found"
-#~ msgstr "?????????????????"
-#~ msgid "Define the level for when deblocking is applied"
-#~ msgstr "????????????"
-#~ msgid "<i>Threshold</i>"
-#~ msgstr "<i>???</i>"
-#~ msgid "<i>Strength</i>"
-#~ msgstr "<i>??</i>"
-#~ msgid "Reduce fluctuations in QP (after curve compression)"
-#~ msgstr "QP ????(?????)"
-#~ msgid "Custom matrix"
+#~ "Early skip detection on P-frames to speedup encoding. Quality will be "
+#~ "slightly reduced."
+#~ msgstr "? P-?????????????????????????"
+#~ msgid "DCT Decimate"
+#~ msgstr "??????(DCT)????"
+#~ msgid "Interlaced"
+#~ msgstr "???"
+#~ msgid "Input video is interlaced"
+#~ msgstr "?????"
+#~ msgid "<b>Motion Estimation</b>"
+#~ msgstr "<b>????</b>"
+#~ msgid ""
+#~ "Enforce the size of a decoded pixel decoded to a certain value. Set this "
+#~ "to 1:1 for non-anamorphic video."
+#~ msgstr ""
+#~ "???????????????????????????? 1:1 ?????"
+#~ "??"
+#~ msgid ":"
+#~ msgstr ":"
+#~ msgid ""
+#~ "Set a custom aspect ratio. The default 1:1 is recommended for most video."
+#~ msgstr "???????????????????????1:1?"
+#~ msgid "Predefined Aspect Ratio"
+#~ msgstr "????????"
+#~ msgid "Set a common predefined aspect ratio"
+#~ msgstr "????????????????"
+#~ msgid "As Input"
+#~ msgstr "????"
+#~ msgid "<b>Sample Aspect Ratio</b>"
+#~ msgstr "<b>??????</b>"
+#~ msgid "CABAC"
+#~ msgstr "CABAC"
+#~ msgid ""
+#~ "Lossless compression technique that reduces bitrate by approximately 10%. "
+#~ "Increases encoding and decoding time."
+#~ msgstr "??????????? 10% ???????????????"
+#~ msgid "Trellis"
+#~ msgstr "??"
+#~ msgid ""
+#~ "Use Trellis Rate Distortion Optimisation to find optimal encoding for "
+#~ "each block. Level 0 equals disabled, level 1 equals normal and level 2 "
+#~ "equals high."
+#~ msgstr ""
+#~ "???????????????????????????? 0 ??????? "
+#~ "1 ??????? 2 ????"
+#~ msgid "Noise Reduction"
+#~ msgstr "????"
+#~ msgid "Set the amount of noise reduction"
+#~ msgstr "????????"
+#~ msgid "Deblocking Filter"
+#~ msgstr "???????"
+#~ msgid "Enable in-loop deblocking to filter the video"
+#~ msgstr "?????????????"
+#~ msgid "Strength"
+#~ msgstr "??"
+#~ msgid ""
+#~ "Threshold for block detection. Positive values will detect more blocks, "
+#~ "negative values will detect less."
+#~ msgstr "???????????????????????????"
+#~ msgid "Positive values will soften the video, negative values will sharpen"
+#~ msgstr "??????????????????"
+#~ msgid "<b>Misc. Options</b>"
+#~ msgstr "<b>??. ???</b>"
+#~ msgid "Motion & Misc"
+#~ msgstr "?? & ??"
+#~ msgid "8x8 Transform"
+#~ msgstr "8x8 ??"
+#~ msgid "General block breakdown transformation"
+#~ msgstr "????????"
+#~ msgid "8x8, 8x16 and 16x8 P-frame search"
+#~ msgstr "8x8, 8x16 ? 16x8 P-????"
+#~ msgid "Improve the P-frame quality"
+#~ msgstr "?? P-?????"
+#~ msgid "8x8, 8x16 and 16x8 B-frame search"
+#~ msgstr "8x8, 8x16 ? 16x8 B-????"
+#~ msgid "Improve the B-frame quality"
+#~ msgstr "?? B-?????"
+#~ msgid "4x4, 4x8 and 8x4 P-frame search"
+#~ msgstr "4x4, 4x8 ? 8x4 P-????"
+#~ msgid "Further improve the P-frame quality"
+#~ msgstr "?????? P-?????"
+#~ msgid "8x8 Intra search"
+#~ msgstr "8x8 ????"
+#~ msgid "Enable DCT Intra block search to improve quality"
+#~ msgstr "?? DCT ???????????"
+#~ msgid "4x4 Intra search"
+#~ msgstr "4x4 ????"
+#~ msgid "Further enable DCT Intra block search to improve quality"
+#~ msgstr "????? DCT ???????????"
+#~ msgid "<b>Partition Macroblocks</b>"
+#~ msgstr "<b>??????</b>"
+#~ msgid "Bias"
+#~ msgstr "??"
+#~ msgid "Max Consecutive"
+#~ msgstr "????"
+#~ msgid ""
+#~ "Increase / decrease probability for how often B-frames are used. It will "
+#~ "not violate the maximum consecutive frame limit."
+#~ msgstr ""
+#~ "?? / ?? ???????? B-????????????????????"
+#~ "??"
+#~ msgid ""
+#~ "Set the maximum number of consecutive B-frames. This defines how many "
+#~ "duplicate frames can be dropped. Numbers 2 to 5 are recommended. This "
+#~ "greatly improves the use of bitrate and quality."
+#~ msgstr ""
+#~ "???? B-?????????????????????????????? 2 "
+#~ "? 5?????????????????"
+#~ msgid "Bidirectional ME"
+#~ msgstr "??? ME"
+#~ msgid ""
+#~ "Optimise both motion vectors in B-frames. This will improve quality but "
+#~ "take more time for encoding."
+#~ msgstr ""
+#~ "? B-??????????????????????????????????"
+#~ msgid "Weighted Biprediction"
+#~ msgstr "??????"
+#~ msgid "Enables weighting of B-frames to help fades"
+#~ msgstr "?? B-?????????????"
+#~ msgid "Adaptative DCT"
+#~ msgstr "??? DCT"
+#~ msgid ""
+#~ "Use fewer B-frames if needed. This is always recommended. If not enabled, "
+#~ "the codec will always use the maximum number of consecutive B-frames."
+#~ msgstr ""
+#~ "????????? B-??????????????????????????"
+#~ "??? B-???????"
+#~ msgid "Use as Reference"
+#~ msgstr "??????"
+#~ msgid ""
+#~ "Allow B-frames to make references non-linearly to another B-frame "
+#~ "(instead of creating a duplicate copy)"
+#~ msgstr "?? B-??????? B-????????(???????????)"
+#~ msgid "B-Frame Direct Mode"
+#~ msgstr "B-??????"
+#~ msgid "Spatial"
+#~ msgstr "????"
+#~ msgid "Temporal"
+#~ msgstr "???"
+#~ msgid "Auto"
+#~ msgstr "??"
+#~ msgid "<b>B-Frames</b>"
+#~ msgstr "<b>B-??</b>"
+#~ msgid "Partitions & Frames"
+#~ msgstr "???????"
+#~ msgid "Set how much \"bitrate bonus\" a keyframe can get"
+#~ msgstr "????????????? \"??????\""
+#~ msgid ""
+#~ "Set how much bitrate is deducted from a B-frame as compared to the "
+#~ "previous P-frame"
+#~ msgstr "???????????? B-????????? P-??"
+#~ msgid ""
+#~ "Define how much the bitrate can fluctuate over the entire video. 0% "
+#~ "results in a constant bitrate stream, while 100% results in a pure "
+#~ "quality based bitrate stream."
+#~ msgstr ""
+#~ "??????????????????????????????? 0%????"
+#~ "???????????? 100%?"
+#~ msgid "Keyframe Boost (%)"
+#~ msgstr "?????? (%)"
+#~ msgid "B-frame Reduction (%)"
+#~ msgstr "B-???? (%)"
+#~ msgid "Bitrate Variability (%)"
+#~ msgstr "?????? (%)"
+#~ msgid "<b>Bitrate</b>"
+#~ msgstr "<b>???</b>"
+#~ msgid "Min QP"
+#~ msgstr "?? QP"
+#~ msgid "Max QP"
+#~ msgstr "?? QP"
+#~ msgid "Max QP Step"
+#~ msgstr "?? QP ???"
+#~ msgid "Enforce a minimum quantizer level"
+#~ msgstr "??????????"
+#~ msgid "Enforce a maximum quantizer level"
+#~ msgstr "??????????"
+#~ msgid ""
+#~ "Define how much the quantizer rate can change between two consecutive "
+#~ "frames"
+#~ msgstr "????????????????????"
+#~ msgid "<b>Quantization Limits</b>"
+#~ msgstr "<b>??????</b>"
+#~ msgid ""
+#~ "Increase / decrease sensitivity for detecting scene changes. Improves I-"
+#~ "frame usage and quality."
+#~ msgstr ""
+#~ "??/?? ????????????????? I-????????????"
+#~ msgid "Scene Cut Threshold"
+#~ msgstr "???????"
+#~ msgid "Min IDR Frame Interval"
+#~ msgstr "?? IDR ??????"
+#~ msgid ""
+#~ "Set minimum frame interval between IDR frames. Defines the minimum amount "
+#~ "a frame can be reused and referenced by other frames before a new IDR "
+#~ "frame is established."
+#~ msgstr ""
+#~ "??? IDR ???????????????????????????????"
+#~ "??????????????????"
+#~ msgid ""
+#~ "Set maximum frame interval between IDR frames. Defines the maximum amount "
+#~ "a frame can be reused and referenced by other frames before a new IDR "
+#~ "frame is established."
+#~ msgstr ""
+#~ "??? IDR ???????????????????????????????"
+#~ "??????????????????"
+#~ msgid "Max IDR Frame Interval"
+#~ msgstr "?? IDR ??????"
+#~ msgid "<b>More Rate Settings</b>"
+#~ msgstr "<b>??????</b>"
+#~ msgid "VBV Buffer Size"
+#~ msgstr "VBV ????"
+#~ msgid "Initial VBV Buffer (%)"
+#~ msgstr "?? VBV ?? (%)"
+#~ msgid "Maximum Local Bitrate"
+#~ msgstr "????????"
+#~ msgid "<b>Video Buffer Verifier</b>"
+#~ msgstr "<b>???????</b>"
+#~ msgid "Bitrate Variance"
+#~ msgstr "?????"
+#~ msgid ""
+#~ "Allowed variance of average bitrate. Lower values mean less variance. "
+#~ "Higher values mean more variance."
+#~ msgstr ""
+#~ "???????????????????????????????????"
+#~ msgid ""
+#~ "Allowed variance of average quantizer or quality. Lower values mean less "
+#~ "variance. Higher values mean more variance. Note that 0 means constant "
+#~ "quality while 1 means constant fluctuation. Recommended 0.6."
+#~ msgstr ""
+#~ "????????????????????????????????????"
+#~ "??????0???????????1??????????? 0.6?"
+#~ msgid "Reduced fluctuations in Quantizer (before curve compression)"
+#~ msgstr "??????? (???????)"
+#~ msgid "Quantizer Compression"
+#~ msgstr "?????"
+#~ msgid "Temp. Blur of Est. Frame Complexity"
+#~ msgstr "?????????????????"
+#~ msgid "Temp. Blur of Quant. after CC"
+#~ msgstr "??????????????????"
+#~ msgid "<b>Misc</b>"
+#~ msgstr "<b>??</b>"
+#~ msgid "Quantization factors used between I and P-frames"
+#~ msgstr "I-??? P-?? ??????????"
+#~ msgid "Quantization used between P and B-frames"
+#~ msgstr "P-??? B-??????????"
+#~ msgid "Quantization difference between chroma (color) and luma (brightness)"
+#~ msgstr "??? (??) ? ?? (??)?????????"
+#~ msgid "Factor between I and P-frame Quants"
+#~ msgstr "I-??? P-?????????"
+#~ msgid "Factor between P and B-frame Quants"
+#~ msgstr "P-??? B-?????????"
+#~ msgid "Chroma QP Offset"
+#~ msgstr "?? QP ???"
+#~ msgid "<b>Quantizers</b>"
+#~ msgstr "<b>???</b>"
+#~ msgid "Flat Matrix"
+#~ msgstr "????"
+#~ msgid "JVT Matrix"
+#~ msgstr "JVT ??"
+#~ msgid "Custom Matrix"
 #~ msgstr "????"
-#~ msgid "Two pass, final size"
-#~ msgstr "?????????"
-#~ msgid "Two pass, average bitrate"
-#~ msgstr "??????????"
-#~ msgid "Overwrite file ?"
-#~ msgstr "???? ?"
-#~ msgid "Mi_nimum value (will be scaled to 0):"
-#~ msgstr "???? (????? 0):"
-#~ msgid "Ma_ximum value (will be scaled to 255):"
-#~ msgstr "????(????? 255):"
+#~ msgid "Open CQM file"
+#~ msgstr "?? CQM ?"
+#~ msgid "Edit Custom Matrix"
+#~ msgstr "??????"
+#~ msgid "Edit loaded custom quantization matrix file"
+#~ msgstr "??????????????"
+#~ msgid "<b>Quantization Matrices</b>"
+#~ msgstr "<b>??????</b>"
+#~ msgid "More"
+#~ msgstr "??"
+#~ msgid "_Defaults"
+#~ msgstr "??(_D)"
+#~ msgid "Select Xvid matrix file to load"
+#~ msgstr "?? Xvid ???????"
+#~ msgid "Error Loading"
+#~ msgstr "????"
+#~ msgid "Matrix Loaded"
+#~ msgstr "?????"
+#~ msgid "The custom matrix file has been successfully loaded."
+#~ msgstr "???????????"
+#~ msgid "Size (MBytes):"
+#~ msgstr "?? (MBytes):"
+#~ msgid "Average bitrate (kb/s):"
+#~ msgstr "????? (kb/s):"
+#~ msgid "Select Custom Matrix File to write"
+#~ msgstr "????????????"
+#~ msgid "Error Writing"
+#~ msgstr "????"
+#~ msgid "Error writing the custom matrix file."
+#~ msgstr "???????????"
+#~ msgid "XviD encoding options"
+#~ msgstr "XviD ????"
+#~ msgid "Encoding type:"
+#~ msgstr "????:"
+#~ msgid "Bitrate (kb/s):"
+#~ msgstr "??? (kb/s):"
+#~ msgid "Select 1-pass or 2-pass encoding"
+#~ msgstr "?? 1-pass ? 2-pass ??"
+#~ msgid "Single Pass - Bitrate"
+#~ msgstr "???? - ???"
+#~ msgid "Single Pass - Quantizer"
+#~ msgstr "???? - ???"
+#~ msgid "Same Quantizer as Input"
+#~ msgstr "??????????"
+#~ msgid "Target video bitrate"
+#~ msgstr "???????"
+#~ msgid "Constant quantizer - each frame will get the same compression"
+#~ msgstr "????? - ???????????"
+#~ msgid "Variable bitrate mode"
+#~ msgstr "???????"
+#~ msgid "_Interlaced"
+#~ msgstr "??(_I)"
+#~ msgid ""
+#~ "Enables interlaced frame support - use only if your source contains "
+#~ "interlacing artifacts (i.e. fields instead of progressive frames)"
+#~ msgstr ""
+#~ "?????????? - ?????????????????(????????"
+#~ "???)"
+#~ msgid "_Greyscale"
+#~ msgstr "??(_G)"
+#~ msgid "Encode in black & white"
+#~ msgstr "??????"
+#~ msgid "Ca_rtoon mode"
+#~ msgstr "????"
+#~ msgid "Enables special motion estimation features for cartoons/anime"
+#~ msgstr "??? ??/?? ????????"
+#~ msgid "C_hroma optimizer"
+#~ msgstr "?????(_H)"
+#~ msgid "Enables a chroma optimizer prefilter"
+#~ msgstr "?????????????"
+#~ msgid "Turbo Mode"
+#~ msgstr "??????"
+#~ msgid "Enables fast 1st pass encoding"
+#~ msgstr "??????????"
+#~ msgid "Packed bitstream"
+#~ msgstr "???????"
+#~ msgid "Enables Divx like packed vop, DO NOT SET, it is ugly"
+#~ msgstr "?? Divx ????? VOP???????????"
+#~ msgid "Main"
+#~ msgstr "??"
+#~ msgid "Motion search precision:"
+#~ msgstr "???????:"
+#~ msgid "VHQ mode:"
+#~ msgstr "VHQ ??:"
+#~ msgid ""
+#~ "Higher settings give higher quality results, at the cost of slower "
+#~ "encoding"
+#~ msgstr "?????????????????????????"
+#~ msgid "0 - None"
+#~ msgstr "0 - ?"
+#~ msgid "1 - Very low"
+#~ msgstr "1 - ???"
+#~ msgid "2 - Low"
+#~ msgstr "2 - ?"
+#~ msgid "3 - Medium"
+#~ msgstr "3 - ??"
+#~ msgid "4 - High"
+#~ msgstr "4 - ?"
+#~ msgid "5 - Very high"
+#~ msgstr "5 - ???"
+#~ msgid "6 - Ultra high"
+#~ msgstr "6 - ??"
+#~ msgid "VHQ enables an additional search process to increase quality"
+#~ msgstr "VHQ ????????????????"
+#~ msgid "0 - Off"
+#~ msgstr "0 - ??"
+#~ msgid "1 - Mode decision"
+#~ msgstr "1 - ????"
+#~ msgid "2 - Limited search"
+#~ msgstr "2 - ????"
+#~ msgid "3 - Medium search"
+#~ msgstr "3 - ????"
+#~ msgid "4 - Wide search"
+#~ msgstr "4 - ????"
+#~ msgid "C_hroma motion"
+#~ msgstr "????(_H)"
+#~ msgid "Use chroma information to estimate motion"
+#~ msgstr "???????????"
+#~ msgid "_4MV"
+#~ msgstr "4MV"
+#~ msgid "Use 4 motion vectors per macroblock, might give better compression"
+#~ msgstr "????????4???????????????"
+#~ msgid "HQ _AC"
+#~ msgstr "HQ _AC"
+#~ msgid ""
+#~ "Enable a better prediction of AC component. Turns on Lumi masking - "
+#~ "applies more compression to dark/light areas that the eye cannot notice "
+#~ "easily"
+#~ msgstr ""
+#~ "??????? AC ??????? Lumi  ??  - ? ?/? ?(???????"
+#~ "??)??????"
+#~ msgid "I-frame interval - Min:"
+#~ msgstr "I-???? - ???:"
+#~ msgid ""
+#~ "Minimum space between I-frames, 1 will disable forced I-frame spacing"
+#~ msgstr "I-??????????1 ?????? I-????"
+#~ msgid "Max:"
+#~ msgstr "??:"
+#~ msgid "Maximum number of frames allowed between I-frames"
+#~ msgstr "??? I-??????????"
+#~ msgid "Number of B-frames:"
+#~ msgstr "B-?????:"
+#~ msgid ""
+#~ "Maximum number of sequential B-frames (when set to 0, the original I/P "
+#~ "encoder is used)"
+#~ msgstr "??? B-??????? (???? 0??????? I/P ???)"
+#~ msgid "_Qpel"
+#~ msgstr "_Qpel"
+#~ msgid "Use Quarter pixel resolution for a more precise motion estimation"
+#~ msgstr "??????????????????????"
+#~ msgid ""
+#~ "Global Motion Compensation can save bits on camera pans, zooming and "
+#~ "rotation"
+#~ msgstr "???????????????????????????"
+#~ msgid "_BVHQ"
+#~ msgstr "_BVHQ"
+#~ msgid "Produces nicer-looking B-frames"
+#~ msgstr "???????? B-??"
+#~ msgid "Get PAR from input video file"
+#~ msgstr "????????? PAR"
+#~ msgid "Pixel Width"
+#~ msgstr "???"
+#~ msgid "Pixel Height"
+#~ msgstr "???"
+#~ msgid "Pixel Aspect Ratio"
+#~ msgstr "??????"
+#~ msgid "Quantization type:"
+#~ msgstr "??????:"
+#~ msgid "_H.263"
+#~ msgstr "_H.263"
+#~ msgid "H.263 quantizers smooth the picture (useful at lower bitrates)"
+#~ msgstr "H.263 ???????? (????????)"
+#~ msgid "_MPEG"
+#~ msgstr "_MPEG"
+#~ msgid ""
+#~ "MPEG quantizers (slightly slower) produce sharper picture (useful at "
+#~ "higher bitrates)"
+#~ msgstr "MPEG ??? (????) ???????? (????????)"
+#~ msgid "_Custom Matrix"
+#~ msgstr "????(_C)"
+#~ msgid "Load Custom Matrix:  "
+#~ msgstr "??????  "
+#~ msgid "I-frame quantizer - Min:"
+#~ msgstr "I-????? - ??:"
+#~ msgid "P-frame quantizer - Min:"
+#~ msgstr "P-????? - ??:"
+#~ msgid "B-frame quantizer - Min:"
+#~ msgstr "B-????? - ??:"
+#~ msgid "Minimum quantizer allowed for I-frames"
+#~ msgstr "I-??????????"
+#~ msgid "Minimum quantizer allowed for P-frames"
+#~ msgstr "P-??????????"
+#~ msgid "Minimum quantizer allowed for B-frames"
+#~ msgstr "B-??????????"
+#~ msgid "Maximum quantizer allowed for I-frames"
+#~ msgstr "I-??????????"
+#~ msgid "Maximum quantizer allowed for P-frames"
+#~ msgstr "P-??????????"
+#~ msgid "Maximum quantizer allowed for B-frames"
+#~ msgstr "B-??????????"
+#~ msgid "Quantizer restrictions"
+#~ msgstr "?????"
+#~ msgid ""
+#~ "Rate distortion quantization, will find optimal encoding for each block"
+#~ msgstr "????????????????????????"
+#~ msgid "I-frame boost (%):"
+#~ msgstr "I-???? (%):"
+#~ msgid "I-frames closer than ... frames..."
+#~ msgstr "I-?????? ... ??..."
+#~ msgid "...are reduced by (%):"
+#~ msgstr "...??(%):"
+#~ msgid "Max overflow improvement (%):"
+#~ msgstr "??????(%):"
+#~ msgid "Max overflow degradation (%):"
+#~ msgstr "??????(%):"
+#~ msgid "A value of 20 will give 20% more bits to every I-frame"
+#~ msgstr "20 ?????? 2 ??????? I-??"
+#~ msgid ""
+#~ "I-frames appearing in the range below this value will be treated as "
+#~ "consecutive keyframes"
+#~ msgstr "??????? I-???????????????????????"
+#~ msgid ""
+#~ "Reduction of bitrate for the first consecutive I-frames. The last I-frame "
+#~ "will get treated normally"
+#~ msgstr "?????? I-??????????? I-????????"
+#~ msgid ""
+#~ "How much of the overflow the codec can eat into during undersized "
+#~ "sections - larger values will bridge the gap faster"
+#~ msgstr "???????????????????? - ????????????"
+#~ msgid ""
+#~ "How much of the overflow the codec can eat into during oversized sections "
+#~ "- larger values will bridge the gap faster"
+#~ msgstr "???????????????????? - ????????????"
+#~ msgid "Two pass tuning"
+#~ msgstr "??????"
+#~ msgid "High bitrate scenes (%):"
+#~ msgstr "??????(%):"
+#~ msgid "Low bitrate scenes (%):"
+#~ msgstr "??????(%):"
+#~ msgid "Overflow control strength (%):"
+#~ msgstr "??????(%):"
+#~ msgid ""
+#~ "The higher this value, the more bits get taken from frames larger than "
+#~ "the average size, and redistributed to others"
+#~ msgstr "????????????????????????????????"
+#~ msgid ""
+#~ "The higher this value, the more bits get assigned to frames below the "
+#~ "average frame size"
+#~ msgstr "?????????????????????????"
+#~ msgid ""
+#~ "0 = default from core (let XviD decide), else overflow payback percent "
+#~ "per frame"
+#~ msgstr "0 = ????(? XviD ??)????????????"
+#~ msgid "Curve compression"
+#~ msgstr "?????"
+#~ msgid "Second Pass"
+#~ msgstr "?????"
+#~ msgid "<b>Intra Matrix</b>"
+#~ msgstr "<b>????</b>"
+#~ msgid "<b>Inter Matrix</b>"
+#~ msgstr "<b>????</b>"
+#~ msgid "Xvid Encoder"
+#~ msgstr "Xvid ???"
+#~ msgid "Constant Quantizer"
+#~ msgstr "?????"
+#~ msgid "Constant Bitrate (kbps)"
+#~ msgstr "?????? (kbps)"
+#~ msgid "Dual pass (MBytes)"
+#~ msgstr "???? (MBytes)"
+#~ msgid "Basic"
+#~ msgstr "??"
+#~ msgid "Motion Search"
+#~ msgstr "????"
+#~ msgid "Max I frame interval "
+#~ msgstr "?? I ????"
+#~ msgid "Min I frame interval"
+#~ msgstr "?? I ????"
+#~ msgid "1- Very low"
+#~ msgstr "1- ???"
+#~ msgid "2- Low"
+#~ msgstr "2- ?"
+#~ msgid "3- Medium"
+#~ msgstr "3- ??"
+#~ msgid "4- High"
+#~ msgstr "4- ?"
+#~ msgid "5- Very High"
+#~ msgstr "5- ???"
+#~ msgid "6- Ultra High"
+#~ msgstr "6- ??"
+#~ msgid "H263 Quantizer"
+#~ msgstr "H263 ???"
+#~ msgid "MPEG Quantizer"
+#~ msgstr "MPEG ???"
+#~ msgid "Advanced"
+#~ msgstr "??"
+#~ msgid "Min I Frame Qzer"
+#~ msgstr "??? I ?????"
+#~ msgid "Max I Frame Qzer"
+#~ msgstr "??? I ?????"
+#~ msgid "Min P Frame Qzer"
+#~ msgstr "??? P ?????"
+#~ msgid "Max P Frame Qzer"
+#~ msgstr "??? P ?????"
+#~ msgid "Not Yet!"
+#~ msgstr "????"
+#~ msgid "B Frames"
+#~ msgstr "B ??"
+#~ msgid "Fatal Error"
+#~ msgstr "????"
+#~ msgid ""
+#~ "A fatal error has occurred.\n"
+#~ "\n"
+#~ "Click OK to generate debug information. This may take a few minutes to "
+#~ "complete."
+#~ msgstr ""
+#~ "?????????\n"
+#~ "\n"
+#~ "?? ?? ??????????????????"
+#~ msgid "can't create custom directory (%s)."
+#~ msgstr "?????????? (%s)."
+#~ msgid "can't create job directory (%s)."
+#~ msgstr "????????? (%s)"
+#~ msgid "Can't determine the Application Data folder."
+#~ msgstr "??????????????"
+#~ msgid "can't determine $HOME."
+#~ msgstr "???? $HOME."
+#~ msgid "Cannot create the .avidemux directory"
+#~ msgstr "???? .avidemux ???"
+#~ msgid "Could not open OSS audio device"
+#~ msgstr "???? OSS ????"
+#~ msgid "Check the permissions for /dev/dsp."
+#~ msgstr "?? /dev/dsp ???"
+#~ msgid "Cannot open AMR codec."
+#~ msgstr "???? AMR ????"
+#~ msgid "Reuse log file ?"
+#~ msgstr "????????"
+#~ msgid "Motion Threshold"
+#~ msgstr "?????"
+#~ msgid "Blend Threshold"
+#~ msgstr "?????"
 



From mean at mail.berlios.de  Mon Jun 22 07:30:41 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Mon, 22 Jun 2009 07:30:41 +0200
Subject: [Avidemux-svn-commit] r4946 -
	branches/avidemux_2.6_branch_mean/avidemux/common
Message-ID: <200906220530.n5M5UfDZ006283@sheep.berlios.de>

Author: mean
Date: 2009-06-22 07:30:37 +0200 (Mon, 22 Jun 2009)
New Revision: 4946

Modified:
   branches/avidemux_2.6_branch_mean/avidemux/common/CMakeLists.txt
Log:
[cmake] Simplify

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/CMakeLists.txt	2009-06-21 08:51:45 UTC (rev 4945)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/CMakeLists.txt	2009-06-22 05:30:37 UTC (rev 4946)
@@ -7,7 +7,7 @@
 ADD_SUBDIRECTORY(ADM_filter)
 ADD_SUBDIRECTORY(ADM_infoExtractor)
 ADD_SUBDIRECTORY(ADM_libraries)
-ADD_SUBDIRECTORY(ADM_mpegIndexer)
+#ADD_SUBDIRECTORY(ADM_mpegIndexer)
 ADD_SUBDIRECTORY(ADM_muxerGate)
 #ADD_SUBDIRECTORY(ADM_ocr)
 ADD_SUBDIRECTORY(ADM_osSupport)



From mean at mail.berlios.de  Mon Jun 22 07:30:45 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Mon, 22 Jun 2009 07:30:45 +0200
Subject: [Avidemux-svn-commit] r4947 -
	branches/avidemux_2.6_branch_mean/cmake
Message-ID: <200906220530.n5M5UjJ1006318@sheep.berlios.de>

Author: mean
Date: 2009-06-22 07:30:44 +0200 (Mon, 22 Jun 2009)
New Revision: 4947

Modified:
   branches/avidemux_2.6_branch_mean/cmake/admConfigHelper.cmake
Log:
[cmake] Simplify

Modified: branches/avidemux_2.6_branch_mean/cmake/admConfigHelper.cmake
===================================================================
--- branches/avidemux_2.6_branch_mean/cmake/admConfigHelper.cmake	2009-06-22 05:30:37 UTC (rev 4946)
+++ branches/avidemux_2.6_branch_mean/cmake/admConfigHelper.cmake	2009-06-22 05:30:44 UTC (rev 4947)
@@ -182,102 +182,6 @@
 	ENDIF (newflag)
 ENDMACRO (ADD_TARGET_DEFINITIONS)
 
-
-MACRO (ADD_CFLAGS_GTK_TARGET _target)
-	IF (ADM_UI_GTK)
-		ADD_TARGET_CFLAGS(${_target}_gtk ${ARGN})
-	ENDIF (ADM_UI_GTK)
-ENDMACRO (ADD_CFLAGS_GTK_TARGET)
-
-
-MACRO (ADD_CFLAGS_QT4_TARGET _target)
-	IF (ADM_UI_QT4)
-		ADD_TARGET_CFLAGS(${_target}_qt4 ${ARGN})
-	ENDIF (ADM_UI_QT4)
-ENDMACRO (ADD_CFLAGS_QT4_TARGET)
-
-
-MACRO (ADD_CFLAGS_ALL_TARGETS _target)
-	ADD_TARGET_CFLAGS(${_target}_cli ${ARGN})
-	ADD_CFLAGS_GTK_TARGET(${_target} ${ARGN})
-	ADD_CFLAGS_QT4_TARGET(${_target} ${ARGN})
-ENDMACRO (ADD_CFLAGS_ALL_TARGETS)
-
-
-MACRO (ADD_ADM_LIB_CLI_TARGET _libName)
-	ADD_LIBRARY(${_libName}_cli STATIC ${ARGN})
-	ADD_TARGET_CFLAGS(${_libName}_cli "-I${CMAKE_BINARY_DIR}/config/cli")
-	ADD_TARGET_CFLAGS(${_libName}_cli "-DADM_UI_TYPE_BUILD=1")
-ENDMACRO (ADD_ADM_LIB_CLI_TARGET)
-
-
-MACRO (ADD_ADM_LIB_GTK_TARGET _libName)
-	IF (ADM_UI_GTK)
-		ADD_LIBRARY(${_libName}_gtk STATIC ${ARGN})
-		ADD_TARGET_CFLAGS(${_libName}_gtk "-I${CMAKE_BINARY_DIR}/config/gtk")
-		ADD_TARGET_CFLAGS(${_libName}_gtk "-DADM_UI_TYPE_BUILD=2")
-	ENDIF (ADM_UI_GTK)
-ENDMACRO (ADD_ADM_LIB_GTK_TARGET)
-
-
-MACRO (ADD_ADM_LIB_QT4_TARGET _libName)
-	IF (ADM_UI_QT4)
-		ADD_LIBRARY(${_libName}_qt4 STATIC ${ARGN})
-		ADD_TARGET_CFLAGS(${_libName}_qt4 "-I${CMAKE_BINARY_DIR}/config/qt4 ")
-		ADD_TARGET_CFLAGS(${_libName}_qt4 "-DADM_UI_TYPE_BUILD=4")
-	ENDIF (ADM_UI_QT4)
-ENDMACRO (ADD_ADM_LIB_QT4_TARGET)
-
-
-MACRO (ADD_ADM_SHARED_LIB_CLI_TARGET _libName)
-	ADD_LIBRARY(${_libName}_cli SHARED ${ARGN})
-	ADD_TARGET_CFLAGS(${_libName}_cli "-I${CMAKE_BINARY_DIR}/config/cli")
-	ADD_TARGET_CFLAGS(${_libName}_cli "-DADM_UI_TYPE_BUILD=1")
-ENDMACRO (ADD_ADM_SHARED_LIB_CLI_TARGET)
-
-
-MACRO (ADD_ADM_SHARED_LIB_GTK_TARGET _libName)
-	IF (ADM_UI_GTK)
-		ADD_LIBRARY(${_libName}_gtk SHARED ${ARGN})
-		ADD_TARGET_CFLAGS(${_libName}_gtk "-I${CMAKE_BINARY_DIR}/config/gtk")
-		ADD_TARGET_CFLAGS(${_libName}_gtk "-DADM_UI_TYPE_BUILD=2")
-	ENDIF (ADM_UI_GTK)
-ENDMACRO (ADD_ADM_SHARED_LIB_GTK_TARGET)
-
-
-MACRO (ADD_ADM_SHARED_LIB_QT4_TARGET _libName)
-	IF (ADM_UI_QT4)
-		ADD_LIBRARY(${_libName}_qt4 SHARED ${ARGN})
-		ADD_TARGET_CFLAGS(${_libName}_qt4 "-I${CMAKE_BINARY_DIR}/config/qt4")
-		ADD_TARGET_CFLAGS(${_libName}_qt4 "-DADM_UI_TYPE_BUILD=4")
-	ENDIF (ADM_UI_QT4)
-ENDMACRO (ADD_ADM_SHARED_LIB_QT4_TARGET)
-
-
-
-MACRO (ADD_ADM_LIB_ALL_TARGETS _libName)
-	ADD_ADM_LIB_CLI_TARGET(${_libName} ${ARGN})
-	ADD_ADM_LIB_GTK_TARGET(${_libName} ${ARGN})
-	ADD_ADM_LIB_QT4_TARGET(${_libName} ${ARGN})
-ENDMACRO (ADD_ADM_LIB_ALL_TARGETS)
-
-
-MACRO (ADD_ADM_SHARED_LIB_ALL_TARGETS _libName)
-	ADD_ADM_SHARED_LIB_CLI_TARGET(${_libName} ${ARGN})
-	ADD_ADM_SHARED_LIB_GTK_TARGET(${_libName} ${ARGN})
-	ADD_ADM_SHARED_LIB_QT4_TARGET(${_libName} ${ARGN})
-ENDMACRO (ADD_ADM_SHARED_LIB_ALL_TARGETS)
-
-MACRO (ADM_TARGET_LINK_LIBARIES_ALL_TARGET _libName)
-	IF (ADM_UI_QT4)
-		TARGET_LINK_LIBRARIES( ${_libName}_qt4 ${ARGN})
-	ENDIF (ADM_UI_QT4)
-	IF (ADM_UI_GTK)
-		TARGET_LINK_LIBRARIES( ${_libName}_gtk ${ARGN})
-	ENDIF (ADM_UI_GTK)
-	TARGET_LINK_LIBRARIES( ${_libName}_cli ${ARGN})
-ENDMACRO (ADM_TARGET_LINK_LIBARIES_ALL_TARGET)
-
 MACRO (ADD_TARGET_LDFLAGS _target)
 	SET(_flags)
 	APPEND_FLAGS(_flags ${ARGN})



From mean at mail.berlios.de  Mon Jun 22 07:30:54 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Mon, 22 Jun 2009 07:30:54 +0200
Subject: [Avidemux-svn-commit] r4948 -
	branches/avidemux_2.6_branch_mean/avidemux/common/ADM_mpegIndexer
Message-ID: <200906220530.n5M5UsVP006360@sheep.berlios.de>

Author: mean
Date: 2009-06-22 07:30:48 +0200 (Mon, 22 Jun 2009)
New Revision: 4948

Removed:
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_mpegIndexer/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_mpegIndexer/dmx_indexer.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_mpegIndexer/dmx_indexer_h264.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_mpegIndexer/dmx_indexer_internal.h
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_mpegIndexer/dmx_indexer_mpeg2.cpp
Log:
[dir] Remove no longer used mpegIndexer

Deleted: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_mpegIndexer/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_mpegIndexer/CMakeLists.txt	2009-06-22 05:30:44 UTC (rev 4947)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_mpegIndexer/CMakeLists.txt	2009-06-22 05:30:48 UTC (rev 4948)
@@ -1,7 +0,0 @@
-SET(ADM_mpegIndexer_SRCS
-        dmx_indexer.cpp
-        dmx_indexer_h264.cpp
-        dmx_indexer_mpeg2.cpp
-)
-ADD_ADM_LIB_ALL_TARGETS(ADM_mpegIndexer ${ADM_mpegIndexer_SRCS})
-INCLUDE_DIRECTORIES(${CMAKE_CURRENT_SOURCE_DIR}/../ADM_coreDemuxerMpeg/include)

Deleted: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_mpegIndexer/dmx_indexer.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_mpegIndexer/dmx_indexer.cpp	2009-06-22 05:30:44 UTC (rev 4947)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_mpegIndexer/dmx_indexer.cpp	2009-06-22 05:30:48 UTC (rev 4948)
@@ -1,352 +0,0 @@
-/***************************************************************************
-                        2nd gen indexer
-
-
-    copyright            : (C) 2005 by mean
-    email                : fixounet at free.fr
- ***************************************************************************/
-
-/***************************************************************************
- *                                                                         *
- *   This program is free software; you can redistribute it and/or modify  *
- *   it under the terms of the GNU General Public License as published by  *
- *   the Free Software Foundation; either version 2 of the License, or     *
- *   (at your option) any later version.                                   *
- *                                                                         *
- ***************************************************************************/
-#include "config.h"
-
-#include "ADM_default.h"
-#include "prefs.h"
-#include "ADM_assert.h"
-
-
-#include "DIA_coreToolkit.h"
-#include "DIA_fileSel.h"
-#include "ADM_quota.h"
-#include "ADM_commonUI/DIA_idx_pg.h"
-#include "avidemutils.h"
-
-
-#include "ADM_debugID.h"
-#define MODULE_NAME MODULE_MPEG
-#include "ADM_debug.h"
-#include "dmx_demuxerEs.h"
-#include "dmx_demuxerPS.h"
-#include "dmx_demuxerTS.h"
-#include "dmx_demuxerMSDVR.h"
-#include "dmx_identify.h"
-
-#define MIN_DELTA_PTS 150 // autofix in ms
-
-#include "dmx_indexer_internal.h"
-
-
-
-
-static uint32_t computeTimeDifference(TimeStamp *f,TimeStamp *l);
-
-uint8_t dmx_indexer(const char *mpeg,char *file);
-
-/**
-        \fn    dmx_indexer
-        \brief Create index file
-        @param mpeg Name of the file to index
-        @param file Name of the index file to create
-        @param preferedAudio Default audio track
-        @param nbTracks # of tracks, including video
-        @param tracks track descriptor
-        @return 1 on success, 0 on failure
-
-    The incoming file can be mpeg PS/TS/ES or ASF.
-    The payload can be mostly mpeg2, with some work done to support later mpeg4/H264 in TS mostly
-
-*/
-uint8_t dmx_indexer(const char *mpeg,const char *file,uint32_t preferedAudio,uint8_t autosync,uint32_t nbTracks,MPEG_TRACK *tracks)
-{
-        DIA_progressIndexing *work;
-        dmx_demuxer *demuxer;
-
-        char *realname=ADM_PathCanonize(mpeg);
-        FILE *out;
-        DMX_TYPE mpegType;
-        uint8_t  mpegTypeChar;
-        uint32_t multi=0;
-
-        dmx_payloadType payloadType=DMX_PAYLOAD_MPEG2;
-
-
-
-        mpegType=dmxIdentify(realname);
-
-        if(mpegType==DMX_MPG_UNKNOWN)
-        {
-                delete [] realname;
-                return 0;
-        }
-
-
-
-        switch(mpegType)
-        {
-               case DMX_MPG_MSDVR:
-                                {
-                                  dmx_demuxerMSDVR *dmx;
-                                  dmx=new dmx_demuxerMSDVR(nbTracks,tracks,0);
-                                  demuxer=dmx;
-                                  mpegTypeChar='M';
-                                  break;
-                                }
-                case DMX_MPG_TS:
-                case DMX_MPG_TS2:
-                                {
-                                dmx_demuxerTS *dmx;
-                                dmx=new dmx_demuxerTS(nbTracks,tracks,0,mpegType);
-                                demuxer=dmx;
-                                switch(mpegType)
-                                {
-                                  case DMX_MPG_TS :mpegTypeChar='T';break;
-                                  case DMX_MPG_TS2 :mpegTypeChar='S';break;
-                                  default: ADM_assert(0);
-                                }
-                                switch(tracks[0].streamType)
-                                  {
-                                    case ADM_STREAM_H264:       payloadType=DMX_PAYLOAD_H264;break;
-                                    case ADM_STREAM_MPEG4:      payloadType=DMX_PAYLOAD_MPEG4;break;
-                                    case ADM_STREAM_MPEG_VIDEO: payloadType=DMX_PAYLOAD_MPEG2;break;
-                                  default: ADM_assert(0);
-
-                                  }
-                                break;
-                                }
-                case DMX_MPG_ES:
-                                demuxer=new dmx_demuxerES;
-                                mpegTypeChar='E';
-                                break;
-                case DMX_MPG_H264_ES:
-                                payloadType=DMX_PAYLOAD_H264;
-                                demuxer=new dmx_demuxerES;
-                                mpegTypeChar='E';
-                                break;
-                case DMX_MPG_PS:
-                		{
-                		dmx_demuxerPS *dmx;
-                                fileParser    *fp;
-                                FP_TYPE       type=FP_PROBE;
-                                        fp=new fileParser;
-                                        fp->open(realname,&type);
-                                        delete fp;
-                                        if(type==FP_APPEND)
-                                        {
-                                          if(GUI_Question(QT_TR_NOOP("There is several mpeg file, append them ?")))
-                                                        multi=1;
-                                        }
-                                        dmx=new dmx_demuxerPS(nbTracks,tracks,multi);
-                                        demuxer=dmx;
-                                        mpegTypeChar='P';
-                            }
-                                break;
-                default : ADM_assert(0);
-
-        }
-
-        demuxer->open(realname);
-
-        out=qfopen(file,"wt");
-        if(!out)
-        {
-                        printf("\n Error : cannot open index !");
-                        delete demuxer;
-                        delete [] realname;
-                        return 0;
-        }
-        qfprintf(out,"ADMY0003\n");
-        qfprintf(out,"Type     : %c\n",mpegTypeChar); // ES for now
-        qfprintf(out,"File     : %s\n",realname);
-        qfprintf(out,"Append   : %d\n",multi);
-        qfprintf(out,"Image    : %c\n",'P'); // Progressive
-        qfprintf(out,"Picture  : %04lu x %04lu %05lu fps\n",0,0,0); // width...
-        qfprintf(out,"Payload  : %c%c%c%c\n",'M','P','E','G'); // width...
-        qfprintf(out,"Nb Gop   : %08lu \n",0); // width...
-        qfprintf(out,"Nb Images: %010lu \n",0); // width...
-        qfprintf(out,"Nb Audio : %02lu\n",nbTracks-1);
-        qfprintf(out,"Main aud : %02lu\n",preferedAudio);
-        qfprintf(out,"Streams  : ");
-        for(int s=0;s<nbTracks;s++)
-        {
-                if(!s){
-			qfprintf(out,"V%04x:%04x ",tracks[0].pid,tracks[0].pes);
-		}else{
-			qfprintf(out,"A%04x:%04x ",tracks[s].pid,tracks[s].pes);
-		}
-        }
-        qfprintf(out,"\n");
-        qfprintf(out,"# NGop NImg nbImg type:abs:rel:size ...\n");
-
-
-        uint8_t  grabbing=0,seq_found=0;
-
-        uint32_t total_frame=0,val;
-
-		uint32_t originalPriority = getpriority(PRIO_PROCESS, 0);
-		uint32_t priorityLevel;
-
-		prefs->get(PRIORITY_INDEXING,&priorityLevel);
-		setpriority(PRIO_PROCESS, 0, ADM_getNiceValue(priorityLevel));
-
-        work=new DIA_progressIndexing(mpeg);
-
-        printf("*********Indexing started (%d audio tracks)***********\n",nbTracks);
-        dmx_runData run;
-
-        memset(&run,0,sizeof(dmx_runData));
-
-        run.totalFileSize=demuxer->getSize();
-        run.demuxer=demuxer;
-        run.work=work;
-        run.nbTrack=nbTracks;
-        run.fd=out;
-
-        dmx_videoIndexer *idxer=NULL;
-
-        switch(payloadType)
-        {
-          case DMX_PAYLOAD_MPEG2:
-                  {
-                            idxer=new dmx_videoIndexerMpeg2(&run);
-                            break;
-                  }
-          case DMX_PAYLOAD_MPEG4:ADM_assert(0);
-          case DMX_PAYLOAD_H264:
-                            idxer=new dmx_videoIndexerH264(&run);
-                            break;
-          default: ADM_assert(0);
-        }
-
-        idxer->run();
-        idxer->cleanup();
-
-        delete idxer;
-        idxer=NULL;
-
-
-        printf("*********Indexing Ended (%d audio tracks)***********\n",nbTracks);
-
-         switch(run.imageAR)
-         {
-           case 1: 	qfprintf(out,"# Video Aspect Ratio : %s\n", "1:1" );break;
-           case 2: 	qfprintf(out,"# Video Aspect Ratio : %s\n", "4:3" );break;
-           case 3: 	qfprintf(out,"# Video Aspect Ratio : %s\n", "16:9" );break;
-           default:
-              printf("imageAR=%u\n",run.imageAR);
-              GUI_Error_HIG(QT_TR_NOOP("Can't determine aspect ratio"),NULL);
-	}
-
-        /* Now update......... */
-          fseeko(out,0,SEEK_SET);
-        // Update if needed
-        uint32_t compfps,delta=computeTimeDifference(&(run.firstStamp),&(run.lastStamp));
-
-        delta=delta/1000; // in second
-        if(delta)
-        {
-                 compfps= (1000*run.nbImage)/delta;    // 3 Million images should be enough, no overflow
-        }
-        else
-        {
-                compfps=run.imageFPS;
-        }
-
-        // Detect film (i.e. NTSC with computed fps close to 24)
-        if(run.imageFPS==29970 || run.imageFPS==30000)
-        {
-                if(compfps>23800 && compfps < 24200) run.imageFPS=23976;
-        }
-        // Detect interlaced vs progressive
-        // If field encoded, the average fps is about twice as theoritical fps
-        char type='P';
-        float err;
-
-        err=run.imageFPS*2;
-        err-=compfps;
-        err*=100;
-        err/=run.imageFPS*2;
-        if(err<0) err=-err;
-        printf("%"LU" :%"LU" / %"LU" , %f\n",run.imageFPS,run.imageFPS*2,compfps,err);
-
-        if(err<10)
-        {
-                type='I';
-                printf("Seems to be field encoded\n");
-        }
-        else
-        {
-                printf("Seems to be frame encoded\n");
-        }
-
-        // Now dump the delta PTS
-        // *****************Update header*************
-        qfprintf(out,"ADMY0003\n");
-        qfprintf(out,"Type     : %c\n",mpegTypeChar); // ES for now
-        qfprintf(out,"File     : %s\n",realname);
-        qfprintf(out,"Append   : %d\n",multi);
-        qfprintf(out,"Image    : %c\n",type); // Progressive
-        qfprintf(out,"Picture  : %04lu x %04lu %05lu fps\n",run.imageW,run.imageH,run.imageFPS); // width...
-        switch(payloadType)
-        {
-          case DMX_PAYLOAD_MPEG2:
-                            qfprintf(out,"Payload  : MPEG\n"); // MPEG,MP_4,H264
-                            break;
-          case DMX_PAYLOAD_MPEG4:
-                            qfprintf(out,"Payload  : MP_4\n"); // MPEG,MP_4,H264
-                            break;
-          case DMX_PAYLOAD_H264:
-                            qfprintf(out,"Payload  : H264\n"); // MPEG,MP_4,H264
-                            break;
-          default: ADM_assert(0);
-        }
-        qfprintf(out,"Nb Gop   : %08lu \n",run.nbGop); // width...
-        qfprintf(out,"Nb Images: %010lu \n",run.nbImage); // width...
-
-        qfclose(out);
-        delete work;
-
-        printf("*********Indexing stopped***********\n");
-        printf("Found       :%"LU" gop\n",run.nbGop);
-        printf("Found       :%"LU" image\n",run.nbImage);
-        printf("Average fps :%"LU" /1000 fps\n",compfps);
-
-          delete demuxer;
-          delete [] realname;
-
-		  setpriority(PRIO_PROCESS, 0, originalPriority);
-
-          return 1;
-}
-uint32_t computeTimeDifference(TimeStamp *f,TimeStamp *l)
-{
-        uint32_t h,m,s,ms,r=0,result=0;
-#define DOIT(x,next) if(l->x < f->x) \
-                        { \
-                                r=(next-(f->x-l->x));\
-                                result-=1; \
-                        }\
-                         else r=(l->x-f->x);\
-                        result=result*next+r;
-
-#define PRINT(z,x) printf(#z"%02d:%02d:%02d\n",x->hh,x->mm,x->ss,x->ff);
-        DOIT(hh,0);
-        DOIT(mm,60);
-        DOIT(ss,60);
-        DOIT(ff,1000);
-#if 0
-        PRINT(first,f);
-        PRINT(last,l);
-
-#endif
-        printf("Time difference:%lu s\n",result/1000);
-        return result;
-
-}
-
-//

Deleted: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_mpegIndexer/dmx_indexer_h264.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_mpegIndexer/dmx_indexer_h264.cpp	2009-06-22 05:30:44 UTC (rev 4947)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_mpegIndexer/dmx_indexer_h264.cpp	2009-06-22 05:30:48 UTC (rev 4948)
@@ -1,385 +0,0 @@
-/***************************************************************************
-                        2nd gen indexer                                                 
-                             
-    
-    copyright            : (C) 2005 by mean
-    email                : fixounet at free.fr
- ***************************************************************************/
-
-/***************************************************************************
- *                                                                         *
- *   This program is free software; you can redistribute it and/or modify  *
- *   it under the terms of the GNU General Public License as published by  *
- *   the Free Software Foundation; either version 2 of the License, or     *
- *   (at your option) any later version.                                   *
- *                                                                         *
- ***************************************************************************/
-#include "config.h"
-
-#include "ADM_default.h"
-#include "ADM_assert.h"
-
-#include "DIA_fileSel.h"
-#include "ADM_quota.h"
-#include "ADM_commonUI/DIA_idx_pg.h"
-
-
-
-#include "ADM_debugID.h"
-#define MODULE_NAME MODULE_MPEG
-#include "ADM_debug.h"
-#include "dmx_demuxerEs.h"
-#include "dmx_demuxerPS.h"
-#include "dmx_demuxerTS.h"
-#include "dmx_demuxerMSDVR.h"
-#include "dmx_identify.h"
-
-#define MIN_DELTA_PTS 150 // autofix in ms
-
-#include "dmx_indexer_internal.h"
-
-#include "ADM_h264_tag.h"
-#undef aprintf
-#define aprintf printf
-static const char Type[5]={'X','I','P','B','P'};
-
-
-extern uint8_t extractSPSInfo(uint8_t *data, uint32_t len,uint32_t *wwidth,uint32_t *hheight, uint32_t *fps1000);
-
-dmx_videoIndexerH264::dmx_videoIndexerH264(dmx_runData *run) : dmx_videoIndexer(run)
-{
-  _frames=new IndFrame[MAX_PUSHED];
-  firstPicPTS=ADM_NO_PTS;
-  seq_found=0;
-  grabbing=0;
-  
-}
-dmx_videoIndexerH264::~dmx_videoIndexerH264()
-{
-          if(_frames) delete [] _frames;
-          _frames=NULL;
-}
-/**
-      \fn cleanup
-      \brief do cleanup and purge non processed data at the end of the mpeg2 stream
-*/
-void dmx_videoIndexerH264::cleanup(void)
-{
-  uint64_t lastAbs,lastRel;
-          _run->demuxer->getPos(&lastAbs,&lastRel);
-          if(_run->nbPushed)  gopDump(lastAbs,lastRel);
-          dumpPts(firstPicPTS); 
-          
-}
-
-/**
-      \fn run 
-      \brief main indexing loop for mpeg2 payload
-*/
-
-
-// 12 : Filler
-uint8_t   dmx_videoIndexerH264::run  (void)
-{
-dmx_demuxer *demuxer=_run->demuxer;
-uint64_t syncAbs,syncRel;
-uint8_t streamid;   
-uint32_t temporal_ref,ftype,val;
-uint64_t pts,dts;
-uint8_t pic_started=0;
-      
-      
-#if 0
-    FILE *f=fopen("/tmp/foo.h264","wt");
-    uint8_t buffer[80];
-    ADM_assert(f);
-    for(int i=0;i<1024*1024*2;i++)
-    {
-       _run->demuxer->read(buffer,60);
-        fwrite(buffer,60,1,f);
-    }
-    fclose(f);
-    exit(0);  
-
-#endif
-      
-      printf("Starting H264 indexer\n");
-      while(1)
-      {
-
-              if(!demuxer->syncH264(&streamid,&syncAbs,&syncRel,&pts,&dts)) return 0;
-              streamid=streamid & 0x1f;
-              //if(streamid>31) continue;
-             // printf("Found NAL : %d 0x %x\n",streamid,streamid);
-#define T(x) case NAL_##x: printf(#x" found\n");break;
-#if 1
-                switch(streamid)
-                {
-                    T(NON_IDR);
-                    T(IDR);
-                    T(SPS);
-                    T(PPS);
-                    T(SEI);
-                    T(AU_DELIMITER);
-                    T(FILLER);
-                  default :printf("%02x ?\n",streamid);
-                }
-#endif
-                 if((_run->totalFileSize>>16)>50)
-              {
-                    _run->work->update(syncAbs>>16,_run->totalFileSize>>16,
-                               _run->nbImage,_run->lastStamp.hh,_run->lastStamp.mm,_run->lastStamp.ss);
-              }else
-              {
-                    _run->work->update(syncAbs,_run->totalFileSize,_run->nbImage,
-                            _run->lastStamp.hh,_run->lastStamp.mm,_run->lastStamp.ss);
-              }
-              /* Till we have a SPS no need to continue */
-              if(!seq_found && streamid!=NAL_SPS) continue;
-              if(!seq_found)
-              {
-                    // Our firt frame is here
-                    // Important to initialize the mpeg decoder !
-                    _run->imageAR = 1;	// 1:1 to suppress warning
-
-                      uint8_t buffer[60] ; // should be enough
-                      uint64_t xA,xR;
-                      _run->demuxer->getPos(&xA,&xR);
-                      _run->demuxer->read(buffer,60);
-                      if(extractSPSInfo(buffer,60,&( _run->imageW),&( _run->imageH),&(_run->imageFPS)))
-                      {
-                            seq_found=1;
-                            startFrame(1,syncAbs,syncRel);
-                           _run->demuxer->setPos(xA,xR);
-                           _run->demuxer->stamp();
-                      }else
-                        _run->demuxer->setPos(xA,xR);
-                      
-                      grabbing=1;
-                      continue;
-              }
-              
-              // Ignore multiple chunk of the same pic
-              
-              if((streamid==NAL_NON_IDR || streamid==NAL_IDR)&&pic_started) 
-              {
-                aprintf("Still capturing, ignore\n");
-                continue;
-              }
-              if(_run->work->isAborted()) return 0;
-              
-              switch(streamid)
-                      {
-                      case NAL_AU_DELIMITER:
-                              if(pic_started)
-                                  pic_started=0;
-                              grabbing=0;
-                              break;
-                      case NAL_SPS: // 
-                              pic_started=0;
-                              grabbing=1;
-                              aprintf("Sps %d\n",_run->nbGop);
-                              gopDump(syncAbs,syncRel);
-                              break;
-                      case NAL_IDR: // IDR
-                              aprintf("IDR %d\n",_run->nbGop);
-                              uint32_t gop;   
-                              if(grabbing) 
-                              {
-                                aprintf("Grabbing, updating type\n");
-                                updateFrameType(1);
-                                pic_started=1;
-                                grabbing=0;
-                                continue;
-                              }
-                              aprintf("Dumping gop-\n");
-                              gopDump(syncAbs,syncRel);
-                              aprintf("New Frame-\n");
-                              updateFrameType(1);
-                              if(firstPicPTS==ADM_NO_PTS && pts!=ADM_NO_PTS)
-                                      firstPicPTS=pts;
-                              _run->totalFrame++;
-                              pic_started=1;
-                              break;
-                      case NAL_NON_IDR : // picture
-                              
-                              if(grabbing) 
-                              {
-                                updateFrameType(2);
-                                pic_started=1;
-                                grabbing=0;
-                                aprintf("Grabbing, updating type-2-\n");
-                                continue;
-                              }
-                              _run->totalFrame++;
-                              if(_run->nbPushed>MAX_PUSHED/2)
-                              {
-                                aprintf("Gop too big, dumping-\n");
-                                gopDump(syncAbs,syncRel);
-                                updateFrameType(2); 
-                              }else
-                              {
-                                aprintf("Staring new frame-\n");
-                                startFrame(2,syncAbs,syncRel);
-                              }
-                              pic_started=1;
-                              break;
-                      default:
-                        break;
-                      }
-                
-      }
-    _frames[0].type=1; /* Always starts with an infra */
-    return 1; 
-}
-
-
-
-
-/**
-      \fn Push
-      \brief Add a frame to the current gop
-
-*/
-uint8_t dmx_videoIndexerH264::startFrame(uint32_t ftype,uint64_t abs,uint64_t rel)
-{
-                                            
-        _frames[_run->nbPushed].type=ftype;
-        
-        if(_run->nbPushed) // Update previous if it exists
-        {
-                aprintf("Start frame : empty\n");
-                _frames[_run->nbPushed-1].size=_run->demuxer->elapsed();
-        
-        }else
-        {
-         aprintf("Start frame %u  in gop\n",_run->nbPushed); 
-        }
-        _frames[_run->nbPushed].abs=abs;
-        _frames[_run->nbPushed].rel=rel;        
-        _run->demuxer->stamp();
-        _run->nbPushed++;
-        
-        ADM_assert(_run->nbPushed<MAX_PUSHED);
-        return 1;
-
-}
-/**
-    \fn updateFrameType
-    \brief update the current frame type.Needed as we start from SPS if present
-*/
-uint8_t dmx_videoIndexerH264::updateFrameType(uint32_t ftype)
-{
-  ADM_assert(_run->nbPushed);
-  _frames[_run->nbPushed-1].type=ftype;
-  aprintf("updateFrameType %u for frame %u -1 in gop\n",ftype,_run->nbPushed); 
-  return 1;
-}
-/**
-    \fn dumpPts
-    \brief
-
-*/
-uint8_t dmx_videoIndexerH264::dumpPts(uint64_t firstPts)
-{
-uint64_t stats[_run->nbTrack],p;
-double d;
-dmx_demuxer *demuxer=_run->demuxer;
-
-        if(!demuxer->getAllPTS(stats)) return 0;
-        qfprintf(_run->fd,"# Video 1st PTS : %07u\n",firstPts);
-        if(firstPts==ADM_NO_PTS) return 1;
-        for(int i=1;i<_run->nbTrack;i++)
-        {
-                p=stats[i];
-                if(p==ADM_NO_PTS)
-                {
-                        qfprintf(_run->fd,"# track %d no pts\n",i);
-                }
-                else
-                {
-                        
-                        d=firstPts; // it is in 90 khz tick
-                        d-=stats[i];
-                        d/=90.;
-                        qfprintf(_run->fd,"# track %d PTS : %07u ",i,stats[i]);
-                        qfprintf(_run->fd," delta=%04d ms\n",(int)d);
-                }
-
-        }
-        return 1;
-}
-/**
-      \fn       gopDump
-      \brief    Dump the content of a gop into the index file
-*/
-uint8_t dmx_videoIndexerH264::gopDump(uint64_t abs,uint64_t rel)
-{
-  dmx_demuxer *demuxer=_run->demuxer;
-  
-        /* No frame */
-        if(!_run->nbPushed) return 1;
-
-uint64_t stats[_run->nbTrack];
-
-        _frames[_run->nbPushed-1].size=demuxer->elapsed();    // Update previous frame
-        qfprintf(_run->fd,"V %03u %06u %02u ",_run->nbGop,_run->nbImage,_run->nbPushed);
-
-        /* First frame must be IDR */
-        if(!_run->nbGop) _frames[0].type=1;
-        
-        for(uint32_t i=0;i<_run->nbPushed;i++) 
-        {
-
-                qfprintf(_run->fd,"%c:%08"LLX",%05x",
-                        Type[_frames[i].type],
-                        _frames[i].abs,
-                        _frames[i].rel);
-                qfprintf(_run->fd,",%05x ",
-                        _frames[i].size);
-        }
-        
-        qfprintf(_run->fd,"\n");
-
-        // audio if any
-        //*******************************************
-        // Nb image abs_pos audio seen
-        // The Nb image is used to compute a drift
-        //*******************************************
-        if(demuxer->hasAudio() & _run->nbTrack>1)
-        {
-                demuxer->getStats(stats);
-                
-                qfprintf(_run->fd,"A %u %"LLX" ",_run->nbImage,abs);
-                for(uint32_t i=1;i<_run->nbTrack;i++)
-                {
-                        qfprintf(_run->fd,":%"LLX" ",stats[i]);
-                }
-                qfprintf(_run->fd,"\n");
-                
-        }
-        // Print some gop stamp infos, does not hurt
-        qfprintf(_run->fd,"# Timestamp %02d:%02d:%02d,%03d\n",
-                 _run->lastStamp.hh,_run->lastStamp.mm,_run->lastStamp.ss,_run->lastStamp.ff);
-        _run->nbGop++;
-        _run->nbImage+=_run->nbPushed;
-        _run->nbPushed=0;
-        startFrame(2,abs,rel);
-        return 1;
-        
-}
-/**
-      \fn gopUpdate( 
-      \brief Update the timecode hh:mm:ss.xx inside a gop header
-*/
-uint8_t dmx_videoIndexerH264::gopUpdate(void)
-{
-
-        return 1;
-}
-/********************************************************************************************/
-/********************************************************************************************/
-/********************************************************************************************/
-/********************************************************************************************/
-
-//

Deleted: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_mpegIndexer/dmx_indexer_internal.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_mpegIndexer/dmx_indexer_internal.h	2009-06-22 05:30:44 UTC (rev 4947)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_mpegIndexer/dmx_indexer_internal.h	2009-06-22 05:30:48 UTC (rev 4948)
@@ -1,138 +0,0 @@
-/***************************************************************************
-                        3nd gen indexer                                                 
-                             
-    
-    copyright            : (C) 2005 by mean
-    email                : fixounet at free.fr
- ***************************************************************************/
-
-/***************************************************************************
- *                                                                         *
- *   This program is free software; you can redistribute it and/or modify  *
- *   it under the terms of the GNU General Public License as published by  *
- *   the Free Software Foundation; either version 2 of the License, or     *
- *   (at your option) any later version.                                   *
- *                                                                         *
- ***************************************************************************/
-#ifndef DMX_INDEXER_INTERNAL_H
-#define DMX_INDEXER_INTERNAL_H
-
-#define MAX_PUSHED 200
-
-
-typedef struct TimeStamp
-{
-        uint16_t hh,mm,ss,ff;
-}TimeStamp;
-
-
-typedef struct IndFrame
-{
-	uint32_t type;
-	uint32_t size;
-	uint64_t abs;
-	uint64_t rel;
-	
-}IndFrame;
-/*****************************************/
-typedef struct dmx_runData
-{
-  
-      FILE     *fd;
-      dmx_demuxer *demuxer;
-      DIA_progressIndexing *work;
-
-      uint64_t totalFileSize; 
-      uint32_t totalFrame;
-      uint32_t nbImage;
-      uint32_t nbPushed,nbGop;      
-      uint32_t nbTrack;
-      uint32_t imageW,imageH,imageFPS,imageAR;
-      TimeStamp firstStamp,lastStamp; /* Time code hh:mm:ss */
-      
-}dmx_runData;
-
-/*********************************************************************************************/
-/* Base Class for indexer , depending of the payload type, new derivated classes are created */
-/*********************************************************************************************/
-class dmx_videoIndexer
-{
-protected:
-   FILE                 *_fd;
-   uint64_t             _totalFileSize; 
-   uint32_t             _nbTrack;
-   dmx_demuxer          *_demuxer;
-   DIA_progressIndexing *_work;
-   IndFrame             *_frames;
-   dmx_runData          *_run;
-   
-public:
-          dmx_videoIndexer(dmx_runData *run)
-          {
-              _run=run;
-          }
-  virtual uint8_t  run(void)=0;
-  virtual void     cleanup(void)=0;
-  virtual           ~dmx_videoIndexer() 
-              {
-                  if(_frames)
-                  {
-                    delete [] _frames;
-                    _frames=NULL; 
-                  }
-              }
-};
-/**************************************************/
-/* Class to index mpeg2 payload in ES/PS/TS/MSDVR */
-/**************************************************/
-class dmx_videoIndexerMpeg2 :public dmx_videoIndexer
-{
-protected:
-          uint64_t firstPicPTS;
-          uint32_t grabbing;
-          uint32_t seq_found;
-          
-          
-          uint8_t gopDump(uint64_t abs,uint64_t rel);
-          uint8_t gopUpdate(void);
-          uint8_t dumpPts(uint64_t firstPts);
-          uint8_t Push(uint32_t ftype,uint64_t abs,uint64_t rel);
-public:
-                  dmx_videoIndexerMpeg2(dmx_runData *run);
- 
-          uint8_t run(void);
-          void    cleanup(void);
-  virtual         ~dmx_videoIndexerMpeg2();
-             
-};
-/**************************************************/
-/* Class to index H264 payload in ES/PS/TS/MSDVR */
-/**************************************************/
-class dmx_videoIndexerH264 :public dmx_videoIndexer
-{
-protected:
-          uint64_t firstPicPTS;
-          uint32_t grabbing;
-          uint32_t seq_found;
-          
-          
-          uint8_t gopDump(uint64_t abs,uint64_t rel);
-          uint8_t gopUpdate(void);
-          uint8_t dumpPts(uint64_t firstPts);
-          uint8_t startFrame(uint32_t ftype,uint64_t abs,uint64_t rel);
-          uint8_t updateFrameType(uint32_t ftypel);
-public:
-                  dmx_videoIndexerH264(dmx_runData *run);
- 
-          uint8_t run(void);
-          void    cleanup(void);
-  virtual         ~dmx_videoIndexerH264();
-             
-};
-
-/********************************************************/
-
-#endif
-//EOF
-
-

Deleted: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_mpegIndexer/dmx_indexer_mpeg2.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_mpegIndexer/dmx_indexer_mpeg2.cpp	2009-06-22 05:30:44 UTC (rev 4947)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_mpegIndexer/dmx_indexer_mpeg2.cpp	2009-06-22 05:30:48 UTC (rev 4948)
@@ -1,384 +0,0 @@
-/***************************************************************************
-                        2nd gen indexer                                                 
-                             
-    
-    copyright            : (C) 2005 by mean
-    email                : fixounet at free.fr
- ***************************************************************************/
-
-/***************************************************************************
- *                                                                         *
- *   This program is free software; you can redistribute it and/or modify  *
- *   it under the terms of the GNU General Public License as published by  *
- *   the Free Software Foundation; either version 2 of the License, or     *
- *   (at your option) any later version.                                   *
- *                                                                         *
- ***************************************************************************/
-#include "config.h"
-
-#include "ADM_default.h"
-
-#include "DIA_fileSel.h"
-#include "ADM_quota.h"
-#include "ADM_commonUI/DIA_idx_pg.h"
-
-
-
-#include "ADM_debugID.h"
-#define MODULE_NAME MODULE_MPEG
-#include "ADM_debug.h"
-#include "dmx_demuxerEs.h"
-#include "dmx_demuxerPS.h"
-#include "dmx_demuxerTS.h"
-#include "dmx_demuxerMSDVR.h"
-#include "dmx_identify.h"
-
-#define MIN_DELTA_PTS 150 // autofix in ms
-
-#include "dmx_indexer_internal.h"
-
-static const char Type[5]={'X','I','P','B','P'};
-
-static const uint32_t FPS[16]={
-                0,                      // 0
-                23976,          // 1 (23.976 fps) - FILM
-                24000,          // 2 (24.000 fps)
-                25000,          // 3 (25.000 fps) - PAL
-                29970,          // 4 (29.970 fps) - NTSC
-                30000,          // 5 (30.000 fps)
-                50000,          // 6 (50.000 fps) - PAL noninterlaced
-                59940,          // 7 (59.940 fps) - NTSC noninterlaced
-                60000,          // 8 (60.000 fps)
-                0,                      // 9
-                0,                      // 10
-                0,                      // 11
-                0,                      // 12
-                0,                      // 13
-                0,                      // 14
-                0                       // 15
-        };
-
-
-dmx_videoIndexerMpeg2::dmx_videoIndexerMpeg2(dmx_runData *run) : dmx_videoIndexer(run)
-{
-  _frames=new IndFrame[MAX_PUSHED];
-  firstPicPTS=ADM_NO_PTS;
-  seq_found=0;
-  grabbing=0;
-  
-}
-dmx_videoIndexerMpeg2::~dmx_videoIndexerMpeg2()
-{
-          if(_frames) delete [] _frames;
-          _frames=NULL;
-}
-/**
-      \fn cleanup
-      \brief do cleanup and purge non processed data at the end of the mpeg2 stream
-*/
-void dmx_videoIndexerMpeg2::cleanup(void)
-{
-  uint64_t lastAbs,lastRel;
-          _run->demuxer->getPos(&lastAbs,&lastRel);
-          if(_run->nbPushed)  gopDump(lastAbs,lastRel);
-          dumpPts(firstPicPTS); 
-          
-}
-
-/**
-      \fn run 
-      \brief main indexing loop for mpeg2 payload
-*/
-uint8_t   dmx_videoIndexerMpeg2::run  (void)
-{
-dmx_demuxer *demuxer=_run->demuxer;
-uint64_t syncAbs,syncRel;
-uint8_t streamid;   
-uint32_t temporal_ref,ftype,val;
-uint64_t pts,dts;
-
-      
-
-      while(1)
-      {
-
-              if(!demuxer->sync(&streamid,&syncAbs,&syncRel,&pts,&dts)) return 0;   
-              if((_run->totalFileSize>>16)>50)
-              {
-                    _run->work->update(syncAbs>>16,_run->totalFileSize>>16,
-                               _run->nbImage,_run->lastStamp.hh,_run->lastStamp.mm,_run->lastStamp.ss);
-              }else
-              {
-                    _run->work->update(syncAbs,_run->totalFileSize,_run->nbImage,
-                            _run->lastStamp.hh,_run->lastStamp.mm,_run->lastStamp.ss);
-              }
-              if(_run->work->isAborted()) return 0;
-              switch(streamid)
-                      {
-                      case 0xB3: // sequence start
-                              aprintf("Seq %d\n",_run->nbGop);
-                              if(grabbing) continue;
-                              grabbing=1;    
-                              
-                              gopDump(syncAbs,syncRel);
-                              if(seq_found)
-                              {
-                                      demuxer->forward(8);  // Ignore
-                                      continue;
-                              }
-                              // Our firt frame is here
-                              // Important to initialize the mpeg decoder !
-                              _frames[0].abs=syncAbs;
-                              _frames[0].rel=syncRel;
-                              //
-                              seq_found=1;
-                              val=demuxer->read32i();
-                              _run->imageW=val>>20;
-                              _run->imageW=((_run->imageW+15)&~15);
-                              _run->imageH= (((val>>8) & 0xfff)+15)& ~15;
-                              _run->imageAR=(val>>4)&0xf;
-                              _run->imageFPS= FPS[val & 0xf];
-                              demuxer->forward(4);
-                              break;
-                      case 0xb8: // GOP
-                              aprintf("GOP %d\n",_run->nbGop);
-#ifdef SHOW_PTS
-                              if(pts!=ADM_NO_PTS)
-                              {
-                              qfprintf(run->fd,"# %lu\n",pts/90);
-                              }
-#endif
-                              uint32_t gop;   
-                              if(!seq_found) continue;
-                              if(grabbing) 
-                              {         
-                                      gopUpdate();
-                                      continue;;
-                              }
-                              gopDump(syncAbs,syncRel);
-                              gopUpdate();
-                              
-                              break;
-                      case 0x00 : // picture
-                            
-                              aprintf("pic \n");
-                              if(!seq_found)
-                              { 
-                                      continue;
-                                      printf("No sequence start yet, skipping..\n");
-                              }
-                              if(firstPicPTS==ADM_NO_PTS && pts!=ADM_NO_PTS)
-                                      firstPicPTS=pts;
-                              grabbing=0;
-                              _run->totalFrame++;
-                              val=demuxer->read16i();
-                              temporal_ref=val>>6;
-                              ftype=7 & (val>>3);
-                              //aprintf("Temporal ref:%lu\n",temporal_ref);
-                              // skip illegal values
-                              if(ftype<1 || ftype>3)
-                              {
-                                      printf("[Indexer]Met illegal pic at %"LLX" + %"LLX"\n",
-                                                      syncAbs,syncRel);
-                                      continue;
-                              }
-#define USING dts
-#if 0
-                              if(USING!=ADM_NO_PTS)
-                              {
-                                      if(olddts!=ADM_NO_PTS )
-                                      {                
-                                              if(USING>=olddts)
-                                              {
-                                              uint64_t delta,deltaRef;
-                                                      delta=USING-olddts;
-                                                      
-                                                      delta/=90;
-                                                    //  printf("Delta :%llu ms\n",delta);
-                                                      // compute what we should be using
-                                                      deltaRef=nbPushed+nbImage-run->lastRefPic;
-                                                      // in ms
-                                                      deltaRef=(deltaRef*1000*1000)/run->imageFPS;
-                                                      if(abs(delta-deltaRef)>MIN_DELTA_PTS)
-                                                      {
-                                                              printf("Discontinuity %llu %llu!\n",delta,deltaRef);
-                                                      }
-                                              } 
-                                      }
-                                      olddts=USING;
-                                      run->lastRefPic=nbPushed+nbImage;
-                              }
-#endif
-                              
-                              Push(ftype,syncAbs,syncRel);
-                          
-                              break;
-                      default:
-                        break;
-                      }
-      }
-                      return 1; 
-}
-
-
-
-/**** Push a frame
-There is a +- 2 correction when we switch gop
-as in the frame header we read 2 bytes
-Between frames, the error is self cancelling.
-
-**/
-/**
-      \fn Push
-      \brief Add a frame to the current gop
-
-*/
-uint8_t dmx_videoIndexerMpeg2::Push(uint32_t ftype,uint64_t abs,uint64_t rel)
-{
-                                            
-        _frames[_run->nbPushed].type=ftype;
-        
-        if(_run->nbPushed)
-        {                
-                _frames[_run->nbPushed-1].size=_run->demuxer->elapsed();
-                if(_run->nbPushed==1) _frames[_run->nbPushed-1].size-=2;
-                _frames[_run->nbPushed].abs=abs;
-                _frames[_run->nbPushed].rel=rel;        
-                _run->demuxer->stamp();
-        
-        }
-        //aprintf("\tpushed %d %"LLX"\n",nbPushed,abs);
-        _run->nbPushed++;
-        
-        ADM_assert(_run->nbPushed<MAX_PUSHED);
-        return 1;
-
-}
-/**
-    \fn dumpPts
-    \brief
-
-*/
-uint8_t dmx_videoIndexerMpeg2::dumpPts(uint64_t firstPts)
-{
-uint64_t stats[_run->nbTrack],p;
-double d;
-dmx_demuxer *demuxer=_run->demuxer;
-
-        if(!demuxer->getAllPTS(stats)) return 0;
-        qfprintf(_run->fd,"# Video 1st PTS : %07"LLU"\n",firstPts);
-        if(firstPts==ADM_NO_PTS) return 1;
-        for(int i=1;i<_run->nbTrack;i++)
-        {
-                p=stats[i];
-                if(p==ADM_NO_PTS)
-                {
-                        qfprintf(_run->fd,"# track %d no pts\n",i);
-                }
-                else
-                {
-                        
-                        d=firstPts; // it is in 90 khz tick
-                        d-=stats[i];
-                        d/=90.;
-                        qfprintf(_run->fd,"# track %d PTS : %07"LLU" ",i,stats[i]);
-                        qfprintf(_run->fd," delta=%04d ms\n",(int)d);
-                }
-
-        }
-        return 1;
-}
-/**
-      \fn       gopDump
-      \brief    Dump the content of a gop into the index file
-*/
-uint8_t dmx_videoIndexerMpeg2::gopDump(uint64_t abs,uint64_t rel)
-{
-  dmx_demuxer *demuxer=_run->demuxer;
-        if(!_run->nbPushed && !_run->nbImage) demuxer->stamp();
-        if(!_run->nbPushed) return 1;
-
-uint64_t stats[_run->nbTrack];
-
-        _frames[_run->nbPushed-1].size=demuxer->elapsed()+2;
-        qfprintf(_run->fd,"V %03u %06u %02u ",_run->nbGop,_run->nbImage,_run->nbPushed);
-
-        // For each picture Type : abs position : relat position : size
-        for(uint32_t i=0;i<_run->nbPushed;i++) 
-        {
-
-                qfprintf(_run->fd,"%c:%08"LLX",%05"LLX,
-                        Type[_frames[i].type],
-                        _frames[i].abs,
-                        _frames[i].rel);
-                qfprintf(_run->fd,",%05x ",
-                        _frames[i].size);
-        }
-        
-        qfprintf(_run->fd,"\n");
-
-        // audio if any
-        //*******************************************
-        // Nb image abs_pos audio seen
-        // The Nb image is used to compute a drift
-        //*******************************************
-        if(demuxer->hasAudio() & _run->nbTrack>1)
-        {
-                demuxer->getStats(stats);
-                
-                qfprintf(_run->fd,"A %u %"LLX" ",_run->nbImage,abs);
-                for(uint32_t i=1;i<_run->nbTrack;i++)
-                {
-                        qfprintf(_run->fd,":%"LLX" ",stats[i]);
-                }
-                qfprintf(_run->fd,"\n");
-                
-        }
-        // Print some gop stamp infos, does not hurt
-        qfprintf(_run->fd,"# Timestamp %02d:%02d:%02d,%03d\n",
-                 _run->lastStamp.hh,_run->lastStamp.mm,_run->lastStamp.ss,_run->lastStamp.ff);
-        _run->nbGop++;
-        _run->nbImage+=_run->nbPushed;
-        _run->nbPushed=0;
-                
-        _frames[0].abs=abs;
-        _frames[0].rel=rel;
-        demuxer->stamp();
-        return 1;
-        
-}
-/**
-      \fn gopUpdate( 
-      \brief Update the timecode hh:mm:ss.xx inside a gop header
-*/
-uint8_t dmx_videoIndexerMpeg2::gopUpdate(void)
-{
-uint32_t a1,a2,a3,a4;
-uint32_t hh,mm,ss,ff;
-TimeStamp *ts;
-dmx_demuxer *demuxer=_run->demuxer;
-
-        a1=demuxer->read8i();
-        a2=demuxer->read8i();
-        a3=demuxer->read8i();
-        a4=demuxer->read8i();
-        hh=(a1>>2)&0x1f;
-        mm=((a1&3)<<4)+(a2>>4);
-        ss=((a2&7)<<3)+(a3>>5);
-        ff=((a3&0x1f)<<1)+(a4>>7);
-        if(!_run->nbGop)  ts=&(_run->firstStamp);
-                else ts=&(_run->lastStamp);
-        
-        ts->hh=hh;
-        ts->mm=mm;
-        ts->ss=ss;
-        ts->ff=ff;
-        if(!_run->nbGop) memcpy(&(_run->lastStamp),&(_run->firstStamp),sizeof(_run->firstStamp));
-        return 1;
-}
-/********************************************************************************************/
-/********************************************************************************************/
-/********************************************************************************************/
-/********************************************************************************************/
-
-//



From mean at mail.berlios.de  Mon Jun 22 07:30:58 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Mon, 22 Jun 2009 07:30:58 +0200
Subject: [Avidemux-svn-commit] r4949 - in branches/avidemux_2.6_branch_mean:
	avidemux avidemux/gtk avidemux/qt4 avidemux_core
Message-ID: <200906220530.n5M5UwZU006416@sheep.berlios.de>

Author: mean
Date: 2009-06-22 07:30:57 +0200 (Mon, 22 Jun 2009)
New Revision: 4949

Modified:
   branches/avidemux_2.6_branch_mean/avidemux/commonCmakeApplication.cmake
   branches/avidemux_2.6_branch_mean/avidemux/gtk/gtkPackageDebian.cmake
   branches/avidemux_2.6_branch_mean/avidemux/qt4/qt4PackageDebian.cmake
   branches/avidemux_2.6_branch_mean/avidemux_core/corePackageDebian.cmake
Log:
[build] Include subversion rev in deb package

Modified: branches/avidemux_2.6_branch_mean/avidemux/commonCmakeApplication.cmake
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/commonCmakeApplication.cmake	2009-06-22 05:30:48 UTC (rev 4948)
+++ branches/avidemux_2.6_branch_mean/avidemux/commonCmakeApplication.cmake	2009-06-22 05:30:57 UTC (rev 4949)
@@ -34,6 +34,31 @@
 INCLUDE(admCheckRequiredLibs)
 include(admCheckMiscLibs)
 ########################################
+# Subversion
+########################################
+OPTION(SVN "" ON)
+
+IF (SVN AND NOT CMAKE_BUILD_TYPE STREQUAL "Debug" AND EXISTS "${CMAKE_SOURCE_DIR}/.svn")
+	MESSAGE(STATUS "Checking for Subversion")
+	MESSAGE(STATUS "***********************")
+
+	SET(Subversion_FIND_REQUIRED OFF)
+	FIND_PACKAGE(Subversion)
+
+	IF (Subversion_FOUND)
+		Subversion_WC_INFO(${PROJECT_SOURCE_DIR} Project)
+		MESSAGE(STATUS "  revision: ${Project_WC_REVISION}")
+		SET(ADM_SUBVERSION ${Project_WC_REVISION})
+	ELSE (Subversion_FOUND)
+		MESSAGE(STATUS "Could not find Subversion")
+	ENDIF (Subversion_FOUND)
+	
+	MESSAGE("")
+ENDIF (SVN AND NOT CMAKE_BUILD_TYPE STREQUAL "Debug" AND EXISTS "${CMAKE_SOURCE_DIR}/.svn")
+IF (NOT Subversion_FOUND)
+	SET(ADM_SUBVERSION 0)
+ENDIF (NOT Subversion_FOUND)
+########################################
 # Add include dirs
 ########################################
 SET(AVIDEMUX_INSTALL_DIR "${CMAKE_INSTALL_PREFIX}")

Modified: branches/avidemux_2.6_branch_mean/avidemux/gtk/gtkPackageDebian.cmake
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/gtk/gtkPackageDebian.cmake	2009-06-22 05:30:48 UTC (rev 4948)
+++ branches/avidemux_2.6_branch_mean/avidemux/gtk/gtkPackageDebian.cmake	2009-06-22 05:30:57 UTC (rev 4949)
@@ -25,6 +25,9 @@
 SET(CPACK_PACKAGE_VERSION_MAJOR "2")
 SET(CPACK_PACKAGE_VERSION_MINOR "6")
 SET(CPACK_PACKAGE_VERSION_PATCH "0")
+if(Subversion_FOUND)
+        SET(CPACK_PACKAGE_VERSION_PATCH "0-r${ADM_SUBVERSION}")
+endif(Subversion_FOUND)
 #
 SET(CPACK_PACKAGE_NAME "avidemux2-gtk")
 #

Modified: branches/avidemux_2.6_branch_mean/avidemux/qt4/qt4PackageDebian.cmake
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/qt4/qt4PackageDebian.cmake	2009-06-22 05:30:48 UTC (rev 4948)
+++ branches/avidemux_2.6_branch_mean/avidemux/qt4/qt4PackageDebian.cmake	2009-06-22 05:30:57 UTC (rev 4949)
@@ -25,6 +25,9 @@
 SET(CPACK_PACKAGE_VERSION_MAJOR "2")
 SET(CPACK_PACKAGE_VERSION_MINOR "6")
 SET(CPACK_PACKAGE_VERSION_PATCH "0")
+if(Subversion_FOUND)
+        SET(CPACK_PACKAGE_VERSION_PATCH "0-r${ADM_SUBVERSION}")
+endif(Subversion_FOUND)
 #
 SET(CPACK_PACKAGE_NAME "avidemux2-qt4")
 #

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/corePackageDebian.cmake
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/corePackageDebian.cmake	2009-06-22 05:30:48 UTC (rev 4948)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/corePackageDebian.cmake	2009-06-22 05:30:57 UTC (rev 4949)
@@ -25,6 +25,9 @@
 SET(CPACK_PACKAGE_VERSION_MAJOR "2")
 SET(CPACK_PACKAGE_VERSION_MINOR "6")
 SET(CPACK_PACKAGE_VERSION_PATCH "0")
+if(Subversion_FOUND)
+        SET(CPACK_PACKAGE_VERSION_PATCH "0-r${ADM_SUBVERSION}")
+endif(Subversion_FOUND)
 #
 SET(CPACK_PACKAGE_NAME "avidemux-core")
 #



From mean at mail.berlios.de  Mon Jun 22 07:43:21 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Mon, 22 Jun 2009 07:43:21 +0200
Subject: [Avidemux-svn-commit] r4950 - branches/avidemux_2.6_branch_mean
Message-ID: <200906220543.n5M5hLqu020588@sheep.berlios.de>

Author: mean
Date: 2009-06-22 07:43:20 +0200 (Mon, 22 Jun 2009)
New Revision: 4950

Added:
   branches/avidemux_2.6_branch_mean/bootStrap.bash
Log:
[build] Add simple build all script (no plugins for the moment)

Added: branches/avidemux_2.6_branch_mean/bootStrap.bash
===================================================================
--- branches/avidemux_2.6_branch_mean/bootStrap.bash	2009-06-22 05:30:57 UTC (rev 4949)
+++ branches/avidemux_2.6_branch_mean/bootStrap.bash	2009-06-22 05:43:20 UTC (rev 4950)
@@ -0,0 +1,36 @@
+
+
+fail()
+{
+        echo "** Failed at $1**"
+        exit 1
+}
+
+Process()
+{
+        export BUILDDIR=$1
+        export SOURCEDIR=$2
+        echo "Building $BUILDDIR from $SOURCEDIR"
+        rm -Rf $BUILDDIR
+        mkdir $BUILDDIR || fail mkdir
+        cd $BUILDDIR 
+        cmake -DCMAKE_INSTALL_PREFIX=/usr $SOURCEDIR || fail cmake
+        make -j 2 > /tmp/log$BUILDDIR || fail make
+        sudo make install || fail install
+        sudo chown -R `whoami` .
+        fakeroot make package || fail package
+}
+
+export TOP=$PWD
+sudo -v
+echo "**BootStrapping avidemux **"
+echo "** CORE **"
+cd $TOP
+#Process buildCore ../avidemux_core
+echo "** QT4 **"
+cd $TOP
+#Process buildQt4 ../avidemux/qt4
+echo "** GTK **"
+cd $TOP
+Process buildGtk ../avidemux/gtk
+echo "** ALL DONE **"



From mean at mail.berlios.de  Mon Jun 22 19:28:04 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Mon, 22 Jun 2009 19:28:04 +0200
Subject: [Avidemux-svn-commit] r4951 - branches/avidemux_2.6_branch_mean
Message-ID: <200906221728.n5MHS4Wu030631@sheep.berlios.de>

Author: mean
Date: 2009-06-22 19:28:03 +0200 (Mon, 22 Jun 2009)
New Revision: 4951

Modified:
   branches/avidemux_2.6_branch_mean/bootStrap.bash
Log:
[bootStrap] Build all but plugins

Modified: branches/avidemux_2.6_branch_mean/bootStrap.bash
===================================================================
--- branches/avidemux_2.6_branch_mean/bootStrap.bash	2009-06-22 05:43:20 UTC (rev 4950)
+++ branches/avidemux_2.6_branch_mean/bootStrap.bash	2009-06-22 17:28:03 UTC (rev 4951)
@@ -26,10 +26,10 @@
 echo "**BootStrapping avidemux **"
 echo "** CORE **"
 cd $TOP
-#Process buildCore ../avidemux_core
+Process buildCore ../avidemux_core
 echo "** QT4 **"
 cd $TOP
-#Process buildQt4 ../avidemux/qt4
+Process buildQt4 ../avidemux/qt4
 echo "** GTK **"
 cd $TOP
 Process buildGtk ../avidemux/gtk



From mean at mail.berlios.de  Thu Jun 25 07:30:28 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Thu, 25 Jun 2009 07:30:28 +0200
Subject: [Avidemux-svn-commit] r4952 - in branches/avidemux_2.6_branch_mean:
	. avidemux avidemux/common avidemux_core
	avidemux_core/ADM_coreImage/src
Message-ID: <200906250530.n5P5USQB020592@sheep.berlios.de>

Author: mean
Date: 2009-06-25 07:30:24 +0200 (Thu, 25 Jun 2009)
New Revision: 4952

Added:
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreImage/src/ADM_imageSave.cpp
Removed:
   branches/avidemux_2.6_branch_mean/avidemux/common/gui_misc.cpp
Modified:
   branches/avidemux_2.6_branch_mean/avidemux/commonCmakeApplication.cmake
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreImage/src/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux_core/corePackageDebian.cmake
   branches/avidemux_2.6_branch_mean/bootStrap.bash
Log:
[bootstrap] also automatically make deb package in the debs folder

Deleted: branches/avidemux_2.6_branch_mean/avidemux/common/gui_misc.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/gui_misc.cpp	2009-06-22 17:28:03 UTC (rev 4951)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/gui_misc.cpp	2009-06-25 05:30:24 UTC (rev 4952)
@@ -1,148 +0,0 @@
-/**
-      \file gui_misc
-      \brief 2nd part of ADMImage, put here to avoid weird dependancies
-*/
-#include "ADM_default.h"
-#include "ADM_image.h"
-#include "ADM_bitmap.h"
-#include "DIA_coreToolkit.h"
-#include "ADM_colorspace.h"
-#include "ADM_bitstream.h"
-#include "ADM_codecs/ADM_codec.h"
-//#include "ADM_codecs/ADM_ffmpeg.h"
-/**
-    \fn saveAsBmp
-    \brief save current image into filename, into bmp format
-*/
-uint8_t  ADMImage::saveAsBmp(const char *filename)
-{
-  ADM_BITMAPFILEHEADER bmfh;
-  ADM_BITMAPINFOHEADER bmph;
-  FILE *fd;
-  uint32_t sz;
-  uint16_t s16;
-  uint32_t s32;
-
-  sz = _width* _height * 3;
-
-  bmfh.bfReserved1 = bmfh.bfReserved2 = 0;
-  bmfh.bfOffBits = sizeof (bmfh) + sizeof (bmph);
-//_________________________________________
-  bmph.biSize = sizeof (bmph);
-  bmph.biWidth = _width;
-  bmph.biHeight = _height;
-  bmph.biPlanes = 1;
-  bmph.biBitCount = 24;
-  bmph.biCompression = 0;	// COMPRESSION NONE
-  bmph.biSizeImage = sz;
-  bmph.biXPelsPerMeter = 0;
-  bmph.biYPelsPerMeter = 0;
-  bmph.biClrUsed = 0;
-  bmph.biClrImportant = 0;
-/*
-	bmph.resolutionUnits=0;
-	bmph.origin=0;
-	bmph.colorEncoding=0;
-*/
-
-  ADMImage image(_width,_height);
-
-
-  printf ("\n %u x %u=%u\n", bmph.biWidth, bmph.biHeight, sz);
-
-  uint8_t *out;
-
-        out=(uint8_t *)ADM_alloc(sz);
-        if(!out)
-        {
-            GUI_Error_HIG(QT_TR_NOOP("Memory error"), NULL);
-//            ADM_dealloc(out);
-            return 0;
-        }
-
-        if(!COL_yv12rgbBMP(bmph.biWidth, bmph.biHeight,data, out))
-        {
-              GUI_Error_HIG(QT_TR_NOOP("Error converting to BMP"), NULL);
-              ADM_dealloc(out);
-              return 0;
-        }
-        fd = fopen (filename, "wb");
-        if (!fd)
-        {
-                GUI_Error_HIG (QT_TR_NOOP("Something bad happened"), NULL);
-                ADM_dealloc(out);
-                return 0;
-        }
-
-	// Bitmpap file header, not using tructure due to gcc padding it
-#ifdef ADM_BIG_ENDIAN
-	s16 = 0x424D;
-#else
-  	s16 = 0x4D42;
-#endif
-  	s32 = 14 + sizeof (bmph) + sz;
-#ifdef ADM_BIG_ENDIAN
-	#define SWAP32(x) x=R32(x)
-#else
-	#define SWAP32(x) ;
-#endif
-        SWAP32(s32);
-        fwrite (&s16, 2, 1, fd);
-        fwrite (&s32, 4, 1, fd);
-        s32 = 0;
-        fwrite (&s32, 4, 1, fd);
-        s32 = 14 + sizeof (bmph);
-        SWAP32(s32);
-        fwrite (&s32, 4, 1, fd);
-#ifdef ADM_BIG_ENDIAN
-	Endian_BitMapInfo(&bmph);
-#endif
-        fwrite (&bmph, sizeof (bmph), 1, fd);
-        fwrite (out, sz, 1, fd);
-
-        fclose(fd);
-        ADM_dealloc(out);
-        return 1;
-}
-/**
-    \fn saveAsJpg
-    \brief save current image into filename, into jpg format
-*/
-uint8_t  ADMImage::saveAsJpg(const char *filename)
-{
-    #if 0
- ffmpegEncoderFFMjpeg *codec=NULL;
-  FILE *fd;
-  uint8_t *buffer=NULL;
-  uint32_t sz;
-
-
-        sz = _width*_height*3;
-        ADMBitstream bitstream(sz);
-        buffer=new uint8_t[sz];
-        bitstream.data=buffer;
-        codec=new  ffmpegEncoderFFMjpeg(_width,_height,FF_MJPEG)  ;
-        codec->init( 95,25000);
-        if(!codec->encode(this,&bitstream))
-        {
-                GUI_Error_HIG(QT_TR_NOOP("Cannot encode the frame"), NULL);
-                delete [] buffer;
-                delete codec;
-                return 0;
-        }
-        delete codec;
-        fd=fopen(filename,"wb");
-        if(!fd)
-        {
-                GUI_Error_HIG(QT_TR_NOOP("File error"),QT_TR_NOOP( "Cannot open \"%s\" for writing."), filename);
-                delete [] buffer;
-                return 0;
-        }
-        fwrite (buffer, bitstream.len, 1, fd);
-        fclose(fd);
-        delete [] buffer;
-        return 1;
-        #endif
-#warning save as jpeg disabled
-        return false;
-}
\ No newline at end of file

Modified: branches/avidemux_2.6_branch_mean/avidemux/commonCmakeApplication.cmake
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/commonCmakeApplication.cmake	2009-06-22 17:28:03 UTC (rev 4951)
+++ branches/avidemux_2.6_branch_mean/avidemux/commonCmakeApplication.cmake	2009-06-25 05:30:24 UTC (rev 4952)
@@ -87,7 +87,6 @@
 ../common/gui_play.cpp  
 ../common/gui_save.cpp  
 ../common/gui_savenew.cpp  
-../common/gui_misc.cpp
 ../common/main.cpp  
 ../common/gui_action.cpp
 ../common/gui_blackframes.cpp

Copied: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreImage/src/ADM_imageSave.cpp (from rev 4951, branches/avidemux_2.6_branch_mean/avidemux/common/gui_misc.cpp)
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/gui_misc.cpp	2009-06-22 17:28:03 UTC (rev 4951)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreImage/src/ADM_imageSave.cpp	2009-06-25 05:30:24 UTC (rev 4952)
@@ -0,0 +1,145 @@
+/**
+      \file gui_misc
+      \brief 2nd part of ADMImage, put here to avoid weird dependancies
+*/
+#include "ADM_default.h"
+#include "ADM_image.h"
+#include "ADM_bitmap.h"
+#include "DIA_coreToolkit.h"
+#include "ADM_colorspace.h"
+/**
+    \fn saveAsBmp
+    \brief save current image into filename, into bmp format
+*/
+uint8_t  ADMImage::saveAsBmp(const char *filename)
+{
+  ADM_BITMAPFILEHEADER bmfh;
+  ADM_BITMAPINFOHEADER bmph;
+  FILE *fd;
+  uint32_t sz;
+  uint16_t s16;
+  uint32_t s32;
+
+  sz = _width* _height * 3;
+
+  bmfh.bfReserved1 = bmfh.bfReserved2 = 0;
+  bmfh.bfOffBits = sizeof (bmfh) + sizeof (bmph);
+//_________________________________________
+  bmph.biSize = sizeof (bmph);
+  bmph.biWidth = _width;
+  bmph.biHeight = _height;
+  bmph.biPlanes = 1;
+  bmph.biBitCount = 24;
+  bmph.biCompression = 0;	// COMPRESSION NONE
+  bmph.biSizeImage = sz;
+  bmph.biXPelsPerMeter = 0;
+  bmph.biYPelsPerMeter = 0;
+  bmph.biClrUsed = 0;
+  bmph.biClrImportant = 0;
+/*
+	bmph.resolutionUnits=0;
+	bmph.origin=0;
+	bmph.colorEncoding=0;
+*/
+
+  ADMImage image(_width,_height);
+
+
+  printf ("\n %u x %u=%u\n", bmph.biWidth, bmph.biHeight, sz);
+
+  uint8_t *out;
+
+        out=(uint8_t *)ADM_alloc(sz);
+        if(!out)
+        {
+            GUI_Error_HIG(QT_TR_NOOP("Memory error"), NULL);
+//            ADM_dealloc(out);
+            return 0;
+        }
+
+        if(!COL_yv12rgbBMP(bmph.biWidth, bmph.biHeight,data, out))
+        {
+              GUI_Error_HIG(QT_TR_NOOP("Error converting to BMP"), NULL);
+              ADM_dealloc(out);
+              return 0;
+        }
+        fd = fopen (filename, "wb");
+        if (!fd)
+        {
+                GUI_Error_HIG (QT_TR_NOOP("Something bad happened"), NULL);
+                ADM_dealloc(out);
+                return 0;
+        }
+
+	// Bitmpap file header, not using tructure due to gcc padding it
+#ifdef ADM_BIG_ENDIAN
+	s16 = 0x424D;
+#else
+  	s16 = 0x4D42;
+#endif
+  	s32 = 14 + sizeof (bmph) + sz;
+#ifdef ADM_BIG_ENDIAN
+	#define SWAP32(x) x=R32(x)
+#else
+	#define SWAP32(x) ;
+#endif
+        SWAP32(s32);
+        fwrite (&s16, 2, 1, fd);
+        fwrite (&s32, 4, 1, fd);
+        s32 = 0;
+        fwrite (&s32, 4, 1, fd);
+        s32 = 14 + sizeof (bmph);
+        SWAP32(s32);
+        fwrite (&s32, 4, 1, fd);
+#ifdef ADM_BIG_ENDIAN
+	Endian_BitMapInfo(&bmph);
+#endif
+        fwrite (&bmph, sizeof (bmph), 1, fd);
+        fwrite (out, sz, 1, fd);
+
+        fclose(fd);
+        ADM_dealloc(out);
+        return 1;
+}
+/**
+    \fn saveAsJpg
+    \brief save current image into filename, into jpg format
+*/
+uint8_t  ADMImage::saveAsJpg(const char *filename)
+{
+    #if 0
+ ffmpegEncoderFFMjpeg *codec=NULL;
+  FILE *fd;
+  uint8_t *buffer=NULL;
+  uint32_t sz;
+
+
+        sz = _width*_height*3;
+        ADMBitstream bitstream(sz);
+        buffer=new uint8_t[sz];
+        bitstream.data=buffer;
+        codec=new  ffmpegEncoderFFMjpeg(_width,_height,FF_MJPEG)  ;
+        codec->init( 95,25000);
+        if(!codec->encode(this,&bitstream))
+        {
+                GUI_Error_HIG(QT_TR_NOOP("Cannot encode the frame"), NULL);
+                delete [] buffer;
+                delete codec;
+                return 0;
+        }
+        delete codec;
+        fd=fopen(filename,"wb");
+        if(!fd)
+        {
+                GUI_Error_HIG(QT_TR_NOOP("File error"),QT_TR_NOOP( "Cannot open \"%s\" for writing."), filename);
+                delete [] buffer;
+                return 0;
+        }
+        fwrite (buffer, bitstream.len, 1, fd);
+        fclose(fd);
+        delete [] buffer;
+        return 1;
+        #endif
+#warning save as jpeg disabled
+        return false;
+}
\ No newline at end of file

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreImage/src/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreImage/src/CMakeLists.txt	2009-06-22 17:28:03 UTC (rev 4951)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreImage/src/CMakeLists.txt	2009-06-25 05:30:24 UTC (rev 4952)
@@ -17,6 +17,7 @@
         ADM_vidFieldBlend.cpp
         ADM_interlaceUtil.cpp
         DIA_flyDialog.cpp
+        ADM_imageSave.cpp
 )
 
 ADD_LIBRARY(ADM_coreImage SHARED ${ADM_coreImage_SRCS})

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/corePackageDebian.cmake
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/corePackageDebian.cmake	2009-06-22 17:28:03 UTC (rev 4951)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/corePackageDebian.cmake	2009-06-25 05:30:24 UTC (rev 4952)
@@ -15,7 +15,7 @@
 
 # Build our deps list
 # Build deps SET(DEPS "debhelper (>> 4), libfreetype6-dev, libxml2-dev,  libxv-dev, dpatch , cmake, desktop-file-utils")
-SET(DEPS "libc6 (>=2.4),libglib2.0-0 (>=2.14.0),libstdc++6 (>=4.2.1),libx11-6, libext6, libxml2 (>=2.6.27), libxv1, zlib1g (>=1:1.1.4)")
+SET(DEPS "libc6 (>=2.4),libglib2.0-0 (>=2.14.0),libstdc++6 (>=4.2.1),libx11-6, libext6, libxml2 (>=2.6.27), libxv1, zlib1g (>=1:1.1.4), pkg-config, libpng12-0, libxml2")
 # Add optional DEPS here
 SET(CPACK_DEBIAN_PACKAGE_DEPENDS "${DEPS}")
 #

Modified: branches/avidemux_2.6_branch_mean/bootStrap.bash
===================================================================
--- branches/avidemux_2.6_branch_mean/bootStrap.bash	2009-06-22 17:28:03 UTC (rev 4951)
+++ branches/avidemux_2.6_branch_mean/bootStrap.bash	2009-06-25 05:30:24 UTC (rev 4952)
@@ -33,4 +33,11 @@
 echo "** GTK **"
 cd $TOP
 Process buildGtk ../avidemux/gtk
+echo "** Preparing debs **"
+cd $TOP
+rm -Rf debs
+mkdir debs
+find . -name "*.deb" | grep -vi cpa | xargs cp -t debs
+echo "** debs directory ready **"
+ls -l debs
 echo "** ALL DONE **"



From mean at mail.berlios.de  Thu Jun 25 09:05:26 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Thu, 25 Jun 2009 09:05:26 +0200
Subject: [Avidemux-svn-commit] r4953 - in branches/avidemux_2.6_branch_mean:
	avidemux/gtk avidemux/qt4 avidemux_core
Message-ID: <200906250705.n5P75QGD014129@sheep.berlios.de>

Author: mean
Date: 2009-06-25 09:05:26 +0200 (Thu, 25 Jun 2009)
New Revision: 4953

Modified:
   branches/avidemux_2.6_branch_mean/avidemux/gtk/gtkPackageDebian.cmake
   branches/avidemux_2.6_branch_mean/avidemux/qt4/qt4PackageDebian.cmake
   branches/avidemux_2.6_branch_mean/avidemux_core/corePackageDebian.cmake
Log:
[build] Use cmake/cpack destdir, no need to be root anymore

Modified: branches/avidemux_2.6_branch_mean/avidemux/gtk/gtkPackageDebian.cmake
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/gtk/gtkPackageDebian.cmake	2009-06-25 05:30:24 UTC (rev 4952)
+++ branches/avidemux_2.6_branch_mean/avidemux/gtk/gtkPackageDebian.cmake	2009-06-25 07:05:26 UTC (rev 4953)
@@ -1,6 +1,7 @@
 ##############################
 # DEBIAN
 ##############################
+SET(CPACK_SET_DESTDIR "ON")
 SET(CPACK_DEBIAN_PACKAGE_NAME "avidemux2-gtk")
 SET (CPACK_GENERATOR "DEB")
 # ARCH

Modified: branches/avidemux_2.6_branch_mean/avidemux/qt4/qt4PackageDebian.cmake
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/qt4/qt4PackageDebian.cmake	2009-06-25 05:30:24 UTC (rev 4952)
+++ branches/avidemux_2.6_branch_mean/avidemux/qt4/qt4PackageDebian.cmake	2009-06-25 07:05:26 UTC (rev 4953)
@@ -1,6 +1,7 @@
 ##############################
 # DEBIAN
 ##############################
+SET(CPACK_SET_DESTDIR "ON")
 SET(CPACK_DEBIAN_PACKAGE_NAME "avidemux2-qt4")
 SET (CPACK_GENERATOR "DEB")
 # ARCH

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/corePackageDebian.cmake
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/corePackageDebian.cmake	2009-06-25 05:30:24 UTC (rev 4952)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/corePackageDebian.cmake	2009-06-25 07:05:26 UTC (rev 4953)
@@ -1,6 +1,7 @@
 ##############################
 # DEBIAN
 ##############################
+SET(CPACK_SET_DESTDIR "ON")
 SET(CPACK_DEBIAN_PACKAGE_NAME "avidemuxi-core")
 SET (CPACK_GENERATOR "DEB")
 # ARCH



From mean at mail.berlios.de  Thu Jun 25 09:05:27 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Thu, 25 Jun 2009 09:05:27 +0200
Subject: [Avidemux-svn-commit] r4954 - branches/avidemux_2.6_branch_mean
Message-ID: <200906250705.n5P75Rq6014140@sheep.berlios.de>

Author: mean
Date: 2009-06-25 09:05:27 +0200 (Thu, 25 Jun 2009)
New Revision: 4954

Modified:
   branches/avidemux_2.6_branch_mean/bootStrap.bash
Log:
[bootstrap] No need for sudo anymore

Modified: branches/avidemux_2.6_branch_mean/bootStrap.bash
===================================================================
--- branches/avidemux_2.6_branch_mean/bootStrap.bash	2009-06-25 07:05:26 UTC (rev 4953)
+++ branches/avidemux_2.6_branch_mean/bootStrap.bash	2009-06-25 07:05:27 UTC (rev 4954)
@@ -1,5 +1,5 @@
+#!/bin/bash
 
-
 fail()
 {
         echo "** Failed at $1**"
@@ -11,19 +11,17 @@
         export BUILDDIR=$1
         export SOURCEDIR=$2
         echo "Building $BUILDDIR from $SOURCEDIR"
-        rm -Rf $BUILDDIR
+        rm -Rf ./$BUILDDIR
         mkdir $BUILDDIR || fail mkdir
         cd $BUILDDIR 
         cmake -DCMAKE_INSTALL_PREFIX=/usr $SOURCEDIR || fail cmake
         make -j 2 > /tmp/log$BUILDDIR || fail make
-        sudo make install || fail install
-        sudo chown -R `whoami` .
-        fakeroot make package || fail package
+        fakeroot make package DESTDIR=debPack || fail package
 }
 
-export TOP=$PWD
-sudo -v
 echo "**BootStrapping avidemux **"
+export TOP=$PWD
+echo "Top dir : $TOP"
 echo "** CORE **"
 cd $TOP
 Process buildCore ../avidemux_core



From mean at mail.berlios.de  Thu Jun 25 17:19:21 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Thu, 25 Jun 2009 17:19:21 +0200
Subject: [Avidemux-svn-commit] r4955 - in branches/avidemux_2.6_branch_mean:
	avidemux avidemux/gtk avidemux/qt4 avidemux_core
Message-ID: <200906251519.n5PFJLnk001229@sheep.berlios.de>

Author: mean
Date: 2009-06-25 17:19:20 +0200 (Thu, 25 Jun 2009)
New Revision: 4955

Modified:
   branches/avidemux_2.6_branch_mean/avidemux/commonCmakeApplication.cmake
   branches/avidemux_2.6_branch_mean/avidemux/gtk/gtkPackageDebian.cmake
   branches/avidemux_2.6_branch_mean/avidemux/qt4/qt4PackageDebian.cmake
   branches/avidemux_2.6_branch_mean/avidemux_core/corePackageDebian.cmake
Log:
[debs] Fix arch and package names

Modified: branches/avidemux_2.6_branch_mean/avidemux/commonCmakeApplication.cmake
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/commonCmakeApplication.cmake	2009-06-25 07:05:27 UTC (rev 4954)
+++ branches/avidemux_2.6_branch_mean/avidemux/commonCmakeApplication.cmake	2009-06-25 15:19:20 UTC (rev 4955)
@@ -30,6 +30,38 @@
 #  Basic cmake helper script
 ###########################################
 include(admConfigHelper)
+
+########################################
+# Avidemux system specific tweaks
+########################################
+INCLUDE(admDetermineSystem)
+
+IF (CYGWIN)
+	SET(CMAKE_C_FLAGS "${CMAKE_C_FLAGS} -mwin32")
+	SET(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} -mwin32")
+ENDIF (CYGWIN)
+
+IF (ADM_CPU_ALTIVEC)
+	SET(CMAKE_C_FLAGS "${CMAKE_C_FLAGS} ${ADM_ALTIVEC_FLAGS}")
+	SET(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} ${ADM_ALTIVEC_FLAGS}")
+ENDIF (ADM_CPU_ALTIVEC)
+
+IF (UNIX AND NOT APPLE)
+	# jog shuttle is only available on Linux due to its interface
+	SET(USE_JOG 1)
+ENDIF (UNIX AND NOT APPLE)
+
+IF (WIN32)
+	SET(CMAKE_SHARED_LINKER_FLAGS "${CMAKE_SHARED_LINKER_FLAGS} -Wl,-enable-auto-image-base -Wl,-enable-auto-import")
+	SET(CMAKE_EXE_LINKER_FLAGS "${CMAKE_EXE_LINKER_FLAGS} -Wl,-enable-auto-import")
+
+	IF (CMAKE_BUILD_TYPE STREQUAL "Release")
+		SET(CMAKE_EXE_LINKER_FLAGS "${CMAKE_EXE_LINKER_FLAGS} -Wl,-s")
+		SET(CMAKE_SHARED_LINKER_FLAGS "${CMAKE_SHARED_LINKER_FLAGS} -Wl,-s")
+	ENDIF (CMAKE_BUILD_TYPE STREQUAL "Release")
+ENDIF (WIN32)
+
+
 include(FindThreads)
 INCLUDE(admCheckRequiredLibs)
 include(admCheckMiscLibs)

Modified: branches/avidemux_2.6_branch_mean/avidemux/gtk/gtkPackageDebian.cmake
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/gtk/gtkPackageDebian.cmake	2009-06-25 07:05:27 UTC (rev 4954)
+++ branches/avidemux_2.6_branch_mean/avidemux/gtk/gtkPackageDebian.cmake	2009-06-25 15:19:20 UTC (rev 4955)
@@ -16,7 +16,7 @@
 
 # Build our deps list
 # Build deps SET(DEPS "debhelper (>> 4), libfreetype6-dev, libxml2-dev,  libxv-dev, dpatch , cmake, desktop-file-utils")
-SET(DEPS "libc6 (>=2.4),libglib2.0-0 (>=2.14.0),libstdc++6 (>=4.2.1),libx11-6, libext6, libxml2 (>=2.6.27), libxv1, zlib1g (>=1:1.1.4), avidemux2_core (>=2.6.0)")
+SET(DEPS "libc6 (>=2.4),libglib2.0-0 (>=2.14.0),libstdc++6 (>=4.2.1),libx11-6,  libxml2 (>=2.6.27), libxv1, zlib1g (>=1:1.1.4), avidemux2-core (>=2.6.0)")
 # Add optional DEPS here
 SET(CPACK_DEBIAN_PACKAGE_DEPENDS "${DEPS}")
 #

Modified: branches/avidemux_2.6_branch_mean/avidemux/qt4/qt4PackageDebian.cmake
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/qt4/qt4PackageDebian.cmake	2009-06-25 07:05:27 UTC (rev 4954)
+++ branches/avidemux_2.6_branch_mean/avidemux/qt4/qt4PackageDebian.cmake	2009-06-25 15:19:20 UTC (rev 4955)
@@ -16,7 +16,7 @@
 
 # Build our deps list
 # Build deps SET(DEPS "debhelper (>> 4), libfreetype6-dev, libxml2-dev,  libxv-dev, dpatch , cmake, desktop-file-utils")
-SET(DEPS "libc6 (>=2.4),libglib2.0-0 (>=2.14.0),libstdc++6 (>=4.2.1),libx11-6, libext6, libxml2 (>=2.6.27), libxv1, zlib1g (>=1:1.1.4), avidemux2_core (>=2.6.0)")
+SET(DEPS "libc6 (>=2.4),libglib2.0-0 (>=2.14.0),libstdc++6 (>=4.2.1),libx11-6,  libxml2 (>=2.6.27), libxv1, zlib1g (>=1:1.1.4), avidemux2-core (>=2.6.0)")
 # Add optional DEPS here
 SET(CPACK_DEBIAN_PACKAGE_DEPENDS "${DEPS}")
 #

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/corePackageDebian.cmake
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/corePackageDebian.cmake	2009-06-25 07:05:27 UTC (rev 4954)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/corePackageDebian.cmake	2009-06-25 15:19:20 UTC (rev 4955)
@@ -2,7 +2,7 @@
 # DEBIAN
 ##############################
 SET(CPACK_SET_DESTDIR "ON")
-SET(CPACK_DEBIAN_PACKAGE_NAME "avidemuxi-core")
+SET(CPACK_DEBIAN_PACKAGE_NAME "avidemux2-core")
 SET (CPACK_GENERATOR "DEB")
 # ARCH
 IF (X86_64_SUPPORTED)
@@ -16,7 +16,7 @@
 
 # Build our deps list
 # Build deps SET(DEPS "debhelper (>> 4), libfreetype6-dev, libxml2-dev,  libxv-dev, dpatch , cmake, desktop-file-utils")
-SET(DEPS "libc6 (>=2.4),libglib2.0-0 (>=2.14.0),libstdc++6 (>=4.2.1),libx11-6, libext6, libxml2 (>=2.6.27), libxv1, zlib1g (>=1:1.1.4), pkg-config, libpng12-0, libxml2")
+SET(DEPS "libc6 (>=2.4),libglib2.0-0 (>=2.14.0),libstdc++6 (>=4.2.1),libx11-6,  libxml2 (>=2.6.27), libxv1, zlib1g (>=1:1.1.4), pkg-config, libpng12-0, libxml2")
 # Add optional DEPS here
 SET(CPACK_DEBIAN_PACKAGE_DEPENDS "${DEPS}")
 #
@@ -30,7 +30,7 @@
         SET(CPACK_PACKAGE_VERSION_PATCH "0-r${ADM_SUBVERSION}")
 endif(Subversion_FOUND)
 #
-SET(CPACK_PACKAGE_NAME "avidemux-core")
+SET(CPACK_PACKAGE_NAME "avidemux2-core")
 #
 
 include(CPack)



From mean at mail.berlios.de  Thu Jun 25 19:13:00 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Thu, 25 Jun 2009 19:13:00 +0200
Subject: [Avidemux-svn-commit] r4956 -
	branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioDecoders/ADM_ad_mad/ADM_libMad
Message-ID: <200906251713.n5PHD0q1008820@sheep.berlios.de>

Author: mean
Date: 2009-06-25 19:13:00 +0200 (Thu, 25 Jun 2009)
New Revision: 4956

Added:
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioDecoders/ADM_ad_mad/ADM_libMad/config.h
Log:
[Plugin/Mad] Mad need a config.h, lets give hime one

Added: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioDecoders/ADM_ad_mad/ADM_libMad/config.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioDecoders/ADM_ad_mad/ADM_libMad/config.h	2009-06-25 15:19:20 UTC (rev 4955)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioDecoders/ADM_ad_mad/ADM_libMad/config.h	2009-06-25 17:13:00 UTC (rev 4956)
@@ -0,0 +1 @@
+#include "ADM_coreConfig.h"



From mean at mail.berlios.de  Thu Jun 25 19:13:03 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Thu, 25 Jun 2009 19:13:03 +0200
Subject: [Avidemux-svn-commit] r4957 -
	branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreImage/src
Message-ID: <200906251713.n5PHD32N008971@sheep.berlios.de>

Author: mean
Date: 2009-06-25 19:13:02 +0200 (Thu, 25 Jun 2009)
New Revision: 4957

Modified:
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreImage/src/ADM_imageSave.cpp
Log:
[core/image] Begin to reimplement save as jpeg only depends on core

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreImage/src/ADM_imageSave.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreImage/src/ADM_imageSave.cpp	2009-06-25 17:13:00 UTC (rev 4956)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreImage/src/ADM_imageSave.cpp	2009-06-25 17:13:02 UTC (rev 4957)
@@ -1,5 +1,5 @@
 /**
-      \file gui_misc
+      \file A
       \brief 2nd part of ADMImage, put here to avoid weird dependancies
 */
 #include "ADM_default.h"
@@ -7,6 +7,11 @@
 #include "ADM_bitmap.h"
 #include "DIA_coreToolkit.h"
 #include "ADM_colorspace.h"
+extern "C" 
+{
+#include "ADM_lavcodec.h"
+}
+
 /**
     \fn saveAsBmp
     \brief save current image into filename, into bmp format
@@ -107,39 +112,78 @@
 */
 uint8_t  ADMImage::saveAsJpg(const char *filename)
 {
-    #if 0
- ffmpegEncoderFFMjpeg *codec=NULL;
-  FILE *fd;
-  uint8_t *buffer=NULL;
-  uint32_t sz;
 
+AVCodecContext   *context=NULL;   
+AVFrame          frame;     
+bool             result=false;
+AVCodec          *codec=NULL;
+uint8_t          buffer[_width*_height*4];
+int              sz=0,r=0;
 
-        sz = _width*_height*3;
-        ADMBitstream bitstream(sz);
-        buffer=new uint8_t[sz];
-        bitstream.data=buffer;
-        codec=new  ffmpegEncoderFFMjpeg(_width,_height,FF_MJPEG)  ;
-        codec->init( 95,25000);
-        if(!codec->encode(this,&bitstream))
+    context=avcodec_alloc_context();
+    if(!context) 
+    {
+        printf("[saveAsJpg] Cannot allocate context\n");
+        return false;
+    }
+    codec=avcodec_find_encoder(CODEC_ID_MJPEG);
+    if(!codec)
+    {
+        printf("[saveAsJpg] Cannot allocate codec\n");
+        goto jpgCleanup;
+    }
+    context->pix_fmt =PIX_FMT_YUV420P;
+    context->strict_std_compliance = -1;
+    r=avcodec_open(context, codec); 
+    if(r<0)
+    {
+        printf("[saveAsJpg] Cannot mix codec and context\n");
+        ADM_dealloc (context);
+        return false;
+    }
+    // Setup our image & stuff....
+        
+
+        frame.linesize[0] = _width; 
+        frame.linesize[1] = _width>>1; 
+        frame.linesize[2] = _width>>1; 
+        
+        frame.data[0] = GetWritePtr(PLANAR_Y);
+        frame.data[2] = GetWritePtr(PLANAR_U);
+        frame.data[1] = GetWritePtr(PLANAR_V);
+    // Grab a temp buffer
+    
+    // Encode!
+      context->flags |= CODEC_FLAG_QSCALE;
+      frame.quality = (int) floor (FF_QP2LAMBDA * 2+ 0.5);
+        
+        if ((sz = avcodec_encode_video (context, buffer, _width*_height*4, &frame)) < 0)
         {
-                GUI_Error_HIG(QT_TR_NOOP("Cannot encode the frame"), NULL);
-                delete [] buffer;
-                delete codec;
-                return 0;
+            printf("[jpeg] Error %d encoding video\n",sz);
+            goto  jpgCleanup;
         }
-        delete codec;
-        fd=fopen(filename,"wb");
-        if(!fd)
+        // Ok now write our file...
         {
-                GUI_Error_HIG(QT_TR_NOOP("File error"),QT_TR_NOOP( "Cannot open \"%s\" for writing."), filename);
-                delete [] buffer;
-                return 0;
-        }
-        fwrite (buffer, bitstream.len, 1, fd);
-        fclose(fd);
-        delete [] buffer;
-        return 1;
-        #endif
-#warning save as jpeg disabled
-        return false;
+            FILE *f=fopen(filename,"wb");
+            if(f)
+            {
+                fwrite(buffer,sz,1,f);
+                fclose(f);
+                result=true;
+            }else
+            {
+                printf("[saveAsJpeg] Cannot open %s for writing!\n",filename);
+
+            }
+       }
+
+// Cleanup
+jpgCleanup:
+    if(context)
+    {
+        avcodec_close (context);
+        ADM_dealloc (context);
+    }
+    context=NULL;
+    return result;
 }
\ No newline at end of file



From mean at mail.berlios.de  Thu Jun 25 19:13:11 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Thu, 25 Jun 2009 19:13:11 +0200
Subject: [Avidemux-svn-commit] r4958 - in branches/avidemux_2.6_branch_mean:
	avidemux avidemux_plugins cmake
Message-ID: <200906251713.n5PHDBXS009278@sheep.berlios.de>

Author: mean
Date: 2009-06-25 19:13:11 +0200 (Thu, 25 Jun 2009)
New Revision: 4958

Modified:
   branches/avidemux_2.6_branch_mean/avidemux/commonCmakeApplication.cmake
   branches/avidemux_2.6_branch_mean/avidemux_plugins/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/cmake/ADM_coreConfig.h.cmake
Log:
[build/plugin] Begin adapting the plugin build system too

Modified: branches/avidemux_2.6_branch_mean/avidemux/commonCmakeApplication.cmake
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/commonCmakeApplication.cmake	2009-06-25 17:13:02 UTC (rev 4957)
+++ branches/avidemux_2.6_branch_mean/avidemux/commonCmakeApplication.cmake	2009-06-25 17:13:11 UTC (rev 4958)
@@ -16,7 +16,9 @@
 #
 # Access to our cmake lib
 #
-SET(AVIDEMUX_TOP_SOURCE_DIR ${CMAKE_SOURCE_DIR}/../..)
+if(NOT PLUGINS)
+        SET(AVIDEMUX_TOP_SOURCE_DIR ${CMAKE_SOURCE_DIR}/../..)
+endif(NOT PLUGINS)
 SET(CMAKE_MODULE_PATH "${AVIDEMUX_TOP_SOURCE_DIR}/cmake" "${CMAKE_MODULE_PATH}")
 MESSAGE(STATUS "Avidemux cmake scripts are in ${CMAKE_MODULE_PATH}")
 #

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/CMakeLists.txt	2009-06-25 17:13:02 UTC (rev 4957)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/CMakeLists.txt	2009-06-25 17:13:11 UTC (rev 4958)
@@ -3,53 +3,36 @@
 MESSAGE("#####################################")
 MESSAGE("")
 
-CMAKE_MINIMUM_REQUIRED(VERSION 2.4.7 FATAL_ERROR)
-
-if (COMMAND cmake_policy)
-	cmake_policy(VERSION 2.4)
-	cmake_policy(SET CMP0003 NEW)
-endif (COMMAND cmake_policy)
-
-IF (NOT CMAKE_CXX_COMPILER_WORKS MATCHES "^${CMAKE_CXX_COMPILER_WORKS}$")
-	SET(FRESH_BUILD 1)
-ENDIF (NOT CMAKE_CXX_COMPILER_WORKS MATCHES "^${CMAKE_CXX_COMPILER_WORKS}$")
-
 PROJECT(AdmPlugins)
-
-IF (${AdmPlugins_SOURCE_DIR} MATCHES ${AdmPlugins_BINARY_DIR})
-	MESSAGE("Please do an out-of-tree build:")
-	MESSAGE("rm CMakeCache.txt; mkdir build; cd build; cmake ..; make")
-	MESSAGE(FATAL_ERROR "in-tree-build detected")
-ENDIF (${AdmPlugins_SOURCE_DIR} MATCHES ${AdmPlugins_BINARY_DIR})
-
+SET(PLUGINS TRUE)
+CMAKE_MINIMUM_REQUIRED(VERSION 2.4.7 FATAL_ERROR)
 ########################################
-# Where is the top dir
+# Where is the top dir ?
 ########################################
 IF (NOT AVIDEMUX_SOURCE_DIR)
 	MESSAGE(FATAL_ERROR "Please add -DAVIDEMUX_SOURCE_DIR=path_to_avidemux_source")
-ELSE (NOT AVIDEMUX_SOURCE_DIR)
+ELSE (NOT AVIDEMUX_TOP_SOURCE_DIR)
         # We need TOP_SOURCE_DIR 
-	SET(AVIDEMUX_SOURCE_DIR "${AVIDEMUX_SOURCE_DIR}" CACHE STRING "")
 	SET(AVIDEMUX_TOP_SOURCE_DIR "${AVIDEMUX_SOURCE_DIR}" CACHE STRING "")
 ENDIF (NOT AVIDEMUX_SOURCE_DIR)
 
+# Common definitions...
 SET(CMAKE_MODULE_PATH "${AVIDEMUX_TOP_SOURCE_DIR}/cmake" "${CMAKE_MODULE_PATH}")
+include(${AVIDEMUX_TOP_SOURCE_DIR}/avidemux/commonCmakeApplication.cmake)
+
 ########################################
 # Add include dirs
 ########################################
 SET(AVIDEMUX_INSTALL_DIR "${CMAKE_INSTALL_PREFIX}")
 MARK_AS_ADVANCED(AVIDEMUX_INSTALL_DIR)
 include(admInstallDir)
+#########################################
+# Get regular stuff from main app
+#########################################
 include(admCoreIncludes)
 LINK_DIRECTORIES("${AVIDEMUX_LIB_DIR}")
-
-
 INCLUDE_DIRECTORIES(${AVIDEMUX_INCLUDE_DIR}/avidemux/2.6/)
 
-SET(CMAKE_MODULE_PATH "${AVIDEMUX_SOURCE_DIR}/cmake" "${CMAKE_MODULE_PATH}")
-
-include(admConfigHelper)
-
 IF (FRESH_BUILD)
 	MESSAGE("")
 ENDIF (FRESH_BUILD)
@@ -59,60 +42,18 @@
 ########################################
 OPTION(VERBOSE "" OFF)
 
-IF (NOT CMAKE_BUILD_TYPE)
-	SET(CMAKE_BUILD_TYPE "Release")
-ENDIF (NOT CMAKE_BUILD_TYPE)
-
 ########################################
-# Avidemux system specific tweaks
-########################################
-INCLUDE(admDetermineSystem)
-
-IF (CYGWIN)
-	SET(CMAKE_C_FLAGS "${CMAKE_C_FLAGS} -mwin32")
-	SET(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} -mwin32")
-ENDIF (CYGWIN)
-
-IF (ADM_CPU_ALTIVEC)
-	SET(CMAKE_C_FLAGS "${CMAKE_C_FLAGS} ${ADM_ALTIVEC_FLAGS}")
-	SET(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} ${ADM_ALTIVEC_FLAGS}")
-ENDIF (ADM_CPU_ALTIVEC)
-
-IF (WIN32)
-	SET(BIN_DIR .)
-	SET(CMAKE_SHARED_LINKER_FLAGS "${CMAKE_SHARED_LINKER_FLAGS} -Wl,-enable-auto-image-base -Wl,-enable-auto-import")
-
-	IF (CMAKE_BUILD_TYPE STREQUAL "Release")
-		SET(CMAKE_SHARED_LINKER_FLAGS "${CMAKE_SHARED_LINKER_FLAGS} -Wl,-s")
-	ENDIF (CMAKE_BUILD_TYPE STREQUAL "Release")
-ELSE (WIN32)
-	SET(BIN_DIR bin)
-ENDIF (WIN32)
-
-########################################
-# Standard Avidemux defines
-########################################
-SET(VERSION 2.6.0)
-
-IF (CMAKE_BUILD_TYPE STREQUAL "Debug")
-	SET(ADM_DEBUG 1)
-ENDIF (CMAKE_BUILD_TYPE STREQUAL "Debug")
-
-########################################
 # Check for libraries
 ########################################
-SET(MSG_DISABLE_OPTION "Disabled per request")
 
-INCLUDE(admCheckRequiredLibs)
-
 INCLUDE(admCheckGtk)
+INCLUDE(admCheckGlade)
 checkGtk()
+checkGlade()
 
 INCLUDE(admCheckQt4)
 checkQt4()
 
-INCLUDE(admCheckMiscLibs)
-
 ########################################
 # Actual work to do..
 ########################################

Modified: branches/avidemux_2.6_branch_mean/cmake/ADM_coreConfig.h.cmake
===================================================================
--- branches/avidemux_2.6_branch_mean/cmake/ADM_coreConfig.h.cmake	2009-06-25 17:13:02 UTC (rev 4957)
+++ branches/avidemux_2.6_branch_mean/cmake/ADM_coreConfig.h.cmake	2009-06-25 17:13:11 UTC (rev 4958)
@@ -1,7 +1,7 @@
 #ifndef ADM_CORE_H
 #define ADM_CORE_H
 
-#define ADM_INSTALL_DIR "${ADM_INSTALL_DIR}"
+#define ADM_INSTALL_DIR "${CMAKE_INSTALL_PREFIX}"
 
 // GCC - CPU
 #cmakedefine ADM_BIG_ENDIAN



From mean at mail.berlios.de  Thu Jun 25 19:13:14 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Thu, 25 Jun 2009 19:13:14 +0200
Subject: [Avidemux-svn-commit] r4959 - in branches/avidemux_2.6_branch_mean:
	avidemux/common avidemux_core/ADM_coreImage/src
Message-ID: <200906251713.n5PHDEG5009407@sheep.berlios.de>

Author: mean
Date: 2009-06-25 19:13:13 +0200 (Thu, 25 Jun 2009)
New Revision: 4959

Modified:
   branches/avidemux_2.6_branch_mean/avidemux/common/gui_save.cpp
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreImage/src/ADM_imageSave.cpp
Log:
[save as jpeg] Mostly working save as jpeg

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/gui_save.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/gui_save.cpp	2009-06-25 17:13:11 UTC (rev 4958)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/gui_save.cpp	2009-06-25 17:13:13 UTC (rev 4959)
@@ -348,7 +348,12 @@
       GUI_Error_HIG(QT_TR_NOOP("Get Frame"),QT_TR_NOOP("Cannot get this frame to save"));
       return 0;
     }
-    return (int) image.saveAsJpg (name);
+    if(!image.saveAsJpg (name))
+    {
+        GUI_Error_HIG(QT_TR_NOOP("Jpeg"),QT_TR_NOOP("Fail to save as jpeg"));
+        return false;
+    }
+    return true ;
 }
 #else
 /**

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreImage/src/ADM_imageSave.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreImage/src/ADM_imageSave.cpp	2009-06-25 17:13:11 UTC (rev 4958)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreImage/src/ADM_imageSave.cpp	2009-06-25 17:13:13 UTC (rev 4959)
@@ -134,6 +134,10 @@
     }
     context->pix_fmt =PIX_FMT_YUV420P;
     context->strict_std_compliance = -1;
+    context->time_base.den=1;
+    context->time_base.num=1;
+    context->width=_width;
+    context->height=_height;
     r=avcodec_open(context, codec); 
     if(r<0)
     {



From mean at mail.berlios.de  Thu Jun 25 19:35:17 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Thu, 25 Jun 2009 19:35:17 +0200
Subject: [Avidemux-svn-commit] r4960 - in branches/avidemux_2.6_branch_mean:
	. avidemux_plugins
Message-ID: <200906251735.n5PHZH7s003365@sheep.berlios.de>

Author: mean
Date: 2009-06-25 19:35:16 +0200 (Thu, 25 Jun 2009)
New Revision: 4960

Added:
   branches/avidemux_2.6_branch_mean/avidemux_plugins/pluginsPackageDebian.cmake
Modified:
   branches/avidemux_2.6_branch_mean/avidemux_plugins/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/bootStrap.bash
Log:
[plugin] bootstrap plugins too + install core (needed for the other package)

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/CMakeLists.txt	2009-06-25 17:13:13 UTC (rev 4959)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/CMakeLists.txt	2009-06-25 17:35:16 UTC (rev 4960)
@@ -70,3 +70,4 @@
 ########################################
 INCLUDE(admPluginConfigSummary)
 MESSAGE("")
+include(./pluginsPackageDebian.cmake)

Added: branches/avidemux_2.6_branch_mean/avidemux_plugins/pluginsPackageDebian.cmake
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/pluginsPackageDebian.cmake	2009-06-25 17:13:13 UTC (rev 4959)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/pluginsPackageDebian.cmake	2009-06-25 17:35:16 UTC (rev 4960)
@@ -0,0 +1,36 @@
+##############################
+# DEBIAN
+##############################
+SET(CPACK_SET_DESTDIR "ON")
+SET(CPACK_DEBIAN_PACKAGE_NAME "avidemux2-plugins")
+SET (CPACK_GENERATOR "DEB")
+# ARCH
+IF (X86_64_SUPPORTED)
+SET(CPACK_DEBIAN_PACKAGE_ARCHITECTURE "amd64")
+ELSE (X86_64_SUPPORTED)
+SET(CPACK_DEBIAN_PACKAGE_ARCHITECTURE "i386")
+ENDIF (X86_64_SUPPORTED)
+# Mandatory
+SET(CPACK_DEBIAN_PACKAGE_MAINTAINER "mean")
+SET(CPACK_DEBIAN_PACKAGE_DESCRIPTION "Simple video editor, plugins ")
+
+# Build our deps list
+# Build deps SET(DEPS "debhelper (>> 4), libfreetype6-dev, libxml2-dev,  libxv-dev, dpatch , cmake, desktop-file-utils")
+SET(DEPS "libc6 (>=2.4),libglib2.0-0 (>=2.14.0),libstdc++6 (>=4.2.1),libx11-6,  libxml2 (>=2.6.27), libxv1, zlib1g (>=1:1.1.4), avidemux2-core (>=2.6.0)")
+# Add optional DEPS here
+SET(CPACK_DEBIAN_PACKAGE_DEPENDS "${DEPS}")
+#
+SET(CPACK_DEBIAN_PACKAGE_SECTION "extra")
+SET(CPACK_DEBIAN_PACKAGE_PRIORITY "optional")
+# Some more infos
+SET(CPACK_PACKAGE_VERSION_MAJOR "2")
+SET(CPACK_PACKAGE_VERSION_MINOR "6")
+SET(CPACK_PACKAGE_VERSION_PATCH "0")
+if(Subversion_FOUND)
+        SET(CPACK_PACKAGE_VERSION_PATCH "0-r${ADM_SUBVERSION}")
+endif(Subversion_FOUND)
+#
+SET(CPACK_PACKAGE_NAME "avidemux2-plugins")
+#
+
+include(CPack)

Modified: branches/avidemux_2.6_branch_mean/bootStrap.bash
===================================================================
--- branches/avidemux_2.6_branch_mean/bootStrap.bash	2009-06-25 17:13:13 UTC (rev 4959)
+++ branches/avidemux_2.6_branch_mean/bootStrap.bash	2009-06-25 17:35:16 UTC (rev 4960)
@@ -14,7 +14,7 @@
         rm -Rf ./$BUILDDIR
         mkdir $BUILDDIR || fail mkdir
         cd $BUILDDIR 
-        cmake -DCMAKE_INSTALL_PREFIX=/usr $SOURCEDIR || fail cmake
+        cmake -DAVIDEMUX_SOURCE_DIR=$TOP -DCMAKE_INSTALL_PREFIX=/usr $SOURCEDIR || fail cmake
         make -j 2 > /tmp/log$BUILDDIR || fail make
         fakeroot make package DESTDIR=debPack || fail package
 }
@@ -25,12 +25,17 @@
 echo "** CORE **"
 cd $TOP
 Process buildCore ../avidemux_core
+echo " Core needs to be installed, installing through sudo make install ...."
+cd $TOP/buildCore && sudo make install
 echo "** QT4 **"
 cd $TOP
 Process buildQt4 ../avidemux/qt4
 echo "** GTK **"
 cd $TOP
 Process buildGtk ../avidemux/gtk
+echo "** Plugins **"
+cd $TOP
+Process buildPlugins ../avidemux_plugins
 echo "** Preparing debs **"
 cd $TOP
 rm -Rf debs



From mean at mail.berlios.de  Sat Jun 27 15:55:58 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sat, 27 Jun 2009 15:55:58 +0200
Subject: [Avidemux-svn-commit] r4961 -
	branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src
Message-ID: <200906271355.n5RDtwiD018773@sheep.berlios.de>

Author: mean
Date: 2009-06-27 15:55:57 +0200 (Sat, 27 Jun 2009)
New Revision: 4961

Modified:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/T_threadCount.h
Log:
[QT4] Maybe fix build on some linux variant

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/T_threadCount.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/T_threadCount.h	2009-06-25 17:35:16 UTC (rev 4960)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/T_threadCount.h	2009-06-27 13:55:57 UTC (rev 4961)
@@ -1,12 +1,12 @@
 #ifndef T_threadCount_h
 #define T_threadCount_h
-
 #include <QtGui/QButtonGroup>
 #include <QtGui/QGridLayout>
 #include <QtGui/QLabel>
 #include <QtGui/QRadioButton>
 #include <QtGui/QSpinBox>
 #include <QtGui/QWidget>
+#include "ADM_default.h"
 
 namespace ADM_qt4Factory
 {



From mean at mail.berlios.de  Sat Jun 27 15:56:26 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sat, 27 Jun 2009 15:56:26 +0200
Subject: [Avidemux-svn-commit] r4962 -
	branches/avidemux_2.5_branch_gruntster/avidemux/ADM_toolkit
Message-ID: <200906271356.n5RDuQYD018846@sheep.berlios.de>

Author: mean
Date: 2009-06-27 15:56:25 +0200 (Sat, 27 Jun 2009)
New Revision: 4962

Modified:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_toolkit/automation.cpp
Log:
[automation] Also use the couple int %d for sscanf, cast later

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_toolkit/automation.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_toolkit/automation.cpp	2009-06-27 13:55:57 UTC (rev 4961)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_toolkit/automation.cpp	2009-06-27 13:56:25 UTC (rev 4962)
@@ -230,7 +230,7 @@
 static int index;
           argv=global_argv;
           argc=global_argc;
-          printf("\n *** Automated : %d entries*************\n",NB_AUTO);
+          printf("\n *** Automated : %d entries*************\n",(int)NB_AUTO);
           // we need to process
           argc-=1;
           cur=1;
@@ -323,9 +323,9 @@
 
 void call_normalize   (char *p)
 {
-  int32_t i;
+  int i;
   sscanf(p,"%d",&i);
-        audioFilterNormalizeMode(i);	
+        audioFilterNormalizeMode((uint8_t)i);	
 }
 void call_resample    (char *p)
 {
@@ -379,9 +379,9 @@
 void call_setAudio (char *p) 	
 {
 	
-		int32_t i;
-		sscanf(p,"%ld",&i);
-		audioFilterDelay(i);	
+		int i;
+		sscanf(p,"%d",&i);
+		audioFilterDelay((int32_t)i);	
 }
 void call_audiocodec(char *p)
 {
@@ -425,9 +425,9 @@
 void call_audiobitrate(char *p)
 {
 
-		int32_t i;
-		sscanf(p,"%ld",&i);
-		printf("\n Audio bitrate %ld\n",i);
+		int i;
+		sscanf(p,"%d",&i);
+		printf("\n Audio bitrate %d\n",i);
 		audioFilter_SetBitrate(i);
 }
 void call_fps(char *p)
@@ -452,9 +452,9 @@
 void call_autosplit(char *p)
 {
 
-		int32_t i;
-		sscanf(p,"%ld",&i);
-		ADM_aviSetSplitSize(i);
+		int i;
+		sscanf(p,"%d",&i);
+		ADM_aviSetSplitSize((uint32_t)i);
 }
 
 void setBegin(char *p) 
@@ -678,7 +678,7 @@
 
                 }
         }
-        printf("Warning: var [%s] is unknown !\n");
+        printf("Warning: var [%s] is unknown !\n",in);
         return NULL;
 
 }



From mean at mail.berlios.de  Sat Jun 27 17:35:26 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sat, 27 Jun 2009 17:35:26 +0200
Subject: [Avidemux-svn-commit] r4963 -
	branches/avidemux_2.6_branch_mean/avidemux/common
Message-ID: <200906271535.n5RFZQdi025197@sheep.berlios.de>

Author: mean
Date: 2009-06-27 17:35:25 +0200 (Sat, 27 Jun 2009)
New Revision: 4963

Modified:
   branches/avidemux_2.6_branch_mean/avidemux/common/gui_save.cpp
Log:
[image] Fix save as jpeg/save as bmp

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/gui_save.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/gui_save.cpp	2009-06-27 13:56:25 UTC (rev 4962)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/gui_save.cpp	2009-06-27 15:35:25 UTC (rev 4963)
@@ -30,6 +30,7 @@
 #include "ADM_vidMisc.h"
 #include "DIA_fileSel.h"
 #include "DIA_working.h"
+#include "ADM_preview.h"
 // Local prototypes
 void A_saveAudioCopy (char *name);
 int  A_saveJpg (char *name);
@@ -334,7 +335,7 @@
 
 }
 
-#ifndef TEST_MP2
+
 /**
         \fn A_saveJpg
         \brief Save a Jpg image from current display buffer
@@ -342,36 +343,22 @@
 int A_saveJpg (char *name)
 {
   uint8_t fl;
-    ADMImage image(avifileinfo->width, avifileinfo->height);
-    if(!GUI_getFrameContent(&image, curframe))
+    ADMImage *image=admPreview::getBuffer();
+    if(!image)
     {
-      GUI_Error_HIG(QT_TR_NOOP("Get Frame"),QT_TR_NOOP("Cannot get this frame to save"));
-      return 0;
+        printf("[SaveJpeg] No image\n");
+        return false;
+
     }
-    if(!image.saveAsJpg (name))
+    if(!image->saveAsJpg (name))
     {
         GUI_Error_HIG(QT_TR_NOOP("Jpeg"),QT_TR_NOOP("Fail to save as jpeg"));
         return false;
     }
     return true ;
 }
-#else
-/**
-      \fn A_saveJpg
-      \brief Save current image as jpeg 95% qual
 
-*/
-int A_saveJpg (char *name)
-{
-static int b=1;
-         video_body->changeAudioStream(0,b);
-        b^=1;
-        return 1;
 
-}
-#endif
-
-
 /**
       \fn A_saveBunchJpg
       \brief Save the selection  as a bunch of jpeg 95% qual
@@ -429,12 +416,14 @@
 */
 void A_saveImg (const char *name)
 {
+  ADMImage *image=admPreview::getBuffer();
+    if(!image)
+    {
+        printf("[SaveJpeg] No image\n");
+        return ;
 
-  ADMImage image(avifileinfo->width,avifileinfo->height);
-  GUI_getFrameContent(&image, video_body->getCurrentFrame());
-  if(image.saveAsBmp(name))
-        GUI_Info_HIG (ADM_LOG_INFO,QT_TR_NOOP("Done"),QT_TR_NOOP( "Saved \"%s\"."), ADM_GetFileName(name));
-  else
+    }
+  if(!image->saveAsBmp(name))
         GUI_Error_HIG (QT_TR_NOOP("BMP op failed"),QT_TR_NOOP( "Saving %s as a BMP file failed."), ADM_GetFileName(name));
 }
 



From mean at mail.berlios.de  Sat Jun 27 17:35:28 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sat, 27 Jun 2009 17:35:28 +0200
Subject: [Avidemux-svn-commit] r4964 -
	branches/avidemux_2.6_branch_mean/avidemux/common/ADM_toolkit
Message-ID: <200906271535.n5RFZSS9025210@sheep.berlios.de>

Author: mean
Date: 2009-06-27 17:35:28 +0200 (Sat, 27 Jun 2009)
New Revision: 4964

Modified:
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_toolkit/automation.cpp
Log:
[automation] Remove old stuff

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_toolkit/automation.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_toolkit/automation.cpp	2009-06-27 15:35:25 UTC (rev 4963)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_toolkit/automation.cpp	2009-06-27 15:35:28 UTC (rev 4964)
@@ -97,8 +97,6 @@
 extern uint8_t ADM_aviSetSplitSize(uint32_t size);
 extern uint8_t ogmSave(const char *fd);
 static void set_autoindex(char *p);
-extern int A_SaveUnpackedVop(const char *name);
-extern int A_SavePackedVop(const char *name);
 extern int A_saveDVDPS(char *name);
 extern void A_saveWorkbench (const char *name);
 extern uint8_t A_rebuildKeyFrame (void);
@@ -112,7 +110,6 @@
 
 static int call_bframe(void);
 static int call_x264(void);
-static int call_packedvop(void);
 static int call_forcesmart(void);
 static int set_output_format(const char *str);
 static void set_reuse_2pass_log(char *p);
@@ -125,7 +122,7 @@
 
 int global_argc;
 char **global_argv;
-extern uint8_t	ADM_saveRaw(const char *name );
+//extern uint8_t	ADM_saveRaw(const char *name );
 //_________________________________________________________________________
 
 typedef void (*one_arg_type)(char *arg);
@@ -158,11 +155,11 @@
         {"save-jpg",		1,"save a jpeg",			(one_arg_type)A_saveJpg}        ,
         {"begin",		1,"set start frame",			setBegin},
         {"end",			1,"set end frame",			setEnd},
-        {"save-unpacked-vop",	1,"save avi, unpacking vop",(one_arg_type)A_SaveUnpackedVop},
-        {"save-packed-vop",	1,"save avi, packing vop",(one_arg_type)A_SavePackedVop},
+//        {"save-unpacked-vop",	1,"save avi, unpacking vop",(one_arg_type)A_SaveUnpackedVop},
+//        {"save-packed-vop",	1,"save avi, packing vop",(one_arg_type)A_SavePackedVop},
 //        {"save-ogm",		1,"save as ogm file ",			(one_arg_type)ogmSave},
         {"save-raw-audio",	1,"save audio as-is ",			        A_saveAudioCopy},
-        {"save-raw-video",	1,"save raw video stream (mpeg/... ) ",	(one_arg_type)ADM_saveRaw},
+//        {"save-raw-video",	1,"save raw video stream (mpeg/... ) ",	(one_arg_type)ADM_saveRaw},
         {"save-uncompressed-audio",1,"save uncompressed audio",A_saveAudioProcessed},
         {"load",		1,"load video or workbench", (one_arg_type)A_openAvi},
         {"load-workbench",	1,"load workbench file", (one_arg_type)A_openAvi},
@@ -172,8 +169,8 @@
 
         {"force-b-frame",	0,"Force detection of bframe in next loaded file", (one_arg_type)call_bframe},
         {"force-alt-h264",	0,"Force use of alternate read mode for h264", (one_arg_type)call_x264},
-        {"force-unpack",	0,"Force detection of packed vop in next loaded file"
-                                                          ,(one_arg_type)call_packedvop},
+//        {"force-unpack",	0,"Force detection of packed vop in next loaded file"
+//                                                          ,(one_arg_type)call_packedvop},
         {"force-smart",   	0,"Engage smart copy mode with CQ=3 at next save"
                                                           ,(one_arg_type)call_forcesmart},
         {"external-mp3",	1,"load external mpeg audio as audio track",(one_arg_type)A_loadMP3},



From mean at mail.berlios.de  Sat Jun 27 17:35:30 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sat, 27 Jun 2009 17:35:30 +0200
Subject: [Avidemux-svn-commit] r4965 -
	branches/avidemux_2.6_branch_mean/avidemux/common
Message-ID: <200906271535.n5RFZUMK025220@sheep.berlios.de>

Author: mean
Date: 2009-06-27 17:35:29 +0200 (Sat, 27 Jun 2009)
New Revision: 4965

Modified:
   branches/avidemux_2.6_branch_mean/avidemux/common/gui_save.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/gui_savenew.cpp
Log:
[automation] Remove old stuff

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/gui_save.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/gui_save.cpp	2009-06-27 15:35:28 UTC (rev 4964)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/gui_save.cpp	2009-06-27 15:35:29 UTC (rev 4965)
@@ -41,9 +41,7 @@
 int  A_audioSave(char *name);
 int  A_SaveWrapper(char *name);
 void A_saveAudioProcessed (char *name);
-// Xternal prototypes
-int      A_SaveUnpackedVop(const char *name);
-uint8_t  A_SaveAudioDualAudio(const char *inname);
+
 int      A_Save(const char *name);
 uint8_t  GUI_getFrameContent(ADMImage *image, uint32_t frame);
 
@@ -73,7 +71,7 @@
       break;
       
     case ACT_SaveRaw:
-      GUI_FileSelWrite (QT_TR_NOOP("Select Raw File to Save"), (SELFILE_CB *)ADM_saveRaw);
+        GUI_Error_HIG (QT_TR_NOOP("File error"), QT_TR_NOOP("Deprecated function."));        
       break;
     case ACT_SaveWave:
       	{
@@ -427,104 +425,6 @@
         GUI_Error_HIG (QT_TR_NOOP("BMP op failed"),QT_TR_NOOP( "Saving %s as a BMP file failed."), ADM_GetFileName(name));
 }
 
-/*
-	Save a raw video stream without any container
-	Usefull to cut mpeg stream or extract raw h263/mpeg4 stream
-
-*/
-uint8_t ADM_saveRaw (const char *name)
-{
-  uint32_t len, flags;
-  FILE *fd, *fi;
-  uint8_t *buffer = new uint8_t[avifileinfo->width * avifileinfo->height * 3],ret=0;
-  char *idx;
-  DIA_workingBase *work;
-  uint8_t seq;
-  idx = new char[strlen (name) + 8];
-  strcpy (idx, name);
-  strcat (idx, ".idx");
-  fd = fopen (name, "wb");
-  fi = fopen (idx, "wt");
-  if (!fd)
-    return 0;
-  work=createWorking(QT_TR_NOOP("Saving raw video stream"));
-  ADMCompressedImage image;
-  image.data=buffer;
-  image.dataLength=avifileinfo->width * avifileinfo->height * 3;
-  // preamble
-#if 0
-  video_body->getRawStart (frameStart, buffer, &len);
-  fwrite (buffer, len, 1, fd);
-#endif
-  for (uint32_t i = frameStart; i < frameEnd; i++)
-    {
-      work->update (i - frameStart, frameEnd - frameStart);
-      if(!work->isAlive())
-      {
-                 ret=0;
-                 goto _abt;
-      }
-      if(!video_body->getFlags (i, &flags))
-        {
-                if(i==frameEnd-1)
-                {
-                         ret=1;
-                         goto _abt;
-                }
-                ADM_assert (video_body->getFlags (i, &flags));
-        }
-
-      if (flags & AVI_B_FRAME)	// oops
-	{
-	  // se search for the next i /p
-	  uint32_t found = 0;
-
-	  for (uint32_t j = i + 1; j < frameEnd; j++)
-	    {
-	      ADM_assert (video_body->getFlags (j, &flags));
-	      if (!(flags & AVI_B_FRAME))
-		{
-		  found = j;
-		  break;
-		}
-
-	    }
-	  if (!found)
-          {
-            if(abs(i-frameEnd)>2)
-                ret=0;
-            else
-                ret=1;  // Good enough
-	    goto _abt;
-          }
-	  // Write the found frame
-
-	  video_body->getFrame (found, &image, &seq);
-	  fwrite (buffer, len, 1, fd);
-	  // and the B frames
-	  for (uint32_t j = i; j < found; j++)
-	    {
-	      video_body->getFrame (j, &image,&seq);
-	      fwrite (buffer, len, 1, fd);
-	    }
-	  i = found;		// Will be plussed by for
-	}
-      else			// P or I frame
-	{
-	  video_body->getFrame (i, &image, &seq);
-	  fwrite (buffer, len, 1, fd);
-	  fprintf (fi, "%u,\n", len);
-	}
-
-    }
-    ret=1;
-_abt:
-  fclose (fd);
-  fclose (fi);
-  delete work;
-  return ret;
-
-}
 /**
     \fn A_saveWorkbench
     \brief Save current workbench as ecmascript
@@ -540,7 +440,10 @@
      ADM_dealloc(actual_workbench_file);
   actual_workbench_file = ADM_strdup(name);
 }
+/**
+    \fn A_SaveWrapper
 
+*/
 int A_SaveWrapper(char *name)
 {
 

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/gui_savenew.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/gui_savenew.cpp	2009-06-27 15:35:28 UTC (rev 4964)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/gui_savenew.cpp	2009-06-27 15:35:29 UTC (rev 4965)
@@ -135,14 +135,3 @@
 uint8_t  A_SaveAudioDualAudio(const char *inname)
 {
 }
-//___________________________________
-int A_SaveUnpackedVop(const char *name)
-{
-}
-int A_SavePackedVop(const char *name)
-{
-}
-//___________________________________
-uint8_t  A_SaveAudioNVideo(const char *name)
-{
-}



From mean at mail.berlios.de  Sat Jun 27 17:35:31 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sat, 27 Jun 2009 17:35:31 +0200
Subject: [Avidemux-svn-commit] r4966 -
	branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoEncoder/include
Message-ID: <200906271535.n5RFZVbu025230@sheep.berlios.de>

Author: mean
Date: 2009-06-27 17:35:31 +0200 (Sat, 27 Jun 2009)
New Revision: 4966

Modified:
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoEncoder/include/ADM_encoderConf.h
Log:
[Encoder] simplify the COMPRES_PARAMS structure

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoEncoder/include/ADM_encoderConf.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoEncoder/include/ADM_encoderConf.h	2009-06-27 15:35:29 UTC (rev 4965)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoEncoder/include/ADM_encoderConf.h	2009-06-27 15:35:31 UTC (rev 4966)
@@ -38,21 +38,21 @@
 
 #define ADM_EXTRA_PARAM_JS 0x100
 #define ADM_EXTRA_PARAM    0x200
+/**
+    \struct COMPRES_PARAMS
+    \brief Simple declaration of an encoder setting
 
-struct COMPRES_PARAMS
+*/
+typedef struct 
 {
-  const char *menuName;
-  const char *tagName;
-  const char *descriptor;
-  COMPRESSION_MODE mode;
-  uint32_t qz, bitrate, finalsize,avg_bitrate;  // avg_bitrate is in kb/s!!
-  uint32_t capabilities;
-  uint32_t extra_param;
-  void *extraSettings;
-  uint32_t extraSettingsLen;
-  uint8_t (*configure) (struct COMPRES_PARAMS * par);
-};
+  COMPRESSION_MODE  mode;
+  uint32_t          qz;           /// Quantizer
+  uint32_t          bitrate;      /// In kb/s ?
+  uint32_t          finalsize;    /// In ?
+  uint32_t          avg_bitrate;  /// avg_bitrate is in kb/s!!
+  uint32_t          capabilities;
+}COMPRES_PARAMS;
 
-//typedef struct COMPRES_PARAMS;
 
+
 #endif



From mean at mail.berlios.de  Sat Jun 27 17:35:34 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sat, 27 Jun 2009 17:35:34 +0200
Subject: [Avidemux-svn-commit] r4967 - in
	branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder:
	. ffMpeg4
Message-ID: <200906271535.n5RFZYHr025240@sheep.berlios.de>

Author: mean
Date: 2009-06-27 17:35:33 +0200 (Sat, 27 Jun 2009)
New Revision: 4967

Added:
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/ffMpeg4/
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/ffMpeg4/ADM_ffMpeg4.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/ffMpeg4/ADM_ffMpeg4.h
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/ffMpeg4/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/ffMpeg4/ffMpeg4Plugin.cpp
Modified:
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/CMakeLists.txt
Log:
[VideoEncoder] add skeleton for ffmpeg4 encoding

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/CMakeLists.txt	2009-06-27 15:35:31 UTC (rev 4966)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/CMakeLists.txt	2009-06-27 15:35:33 UTC (rev 4967)
@@ -5,3 +5,4 @@
 ADD_SUBDIRECTORY(png)
 ADD_SUBDIRECTORY(jpeg)
 ADD_SUBDIRECTORY(huff)
+ADD_SUBDIRECTORY(ffMpeg4)

Added: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/ffMpeg4/ADM_ffMpeg4.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/ffMpeg4/ADM_ffMpeg4.cpp	2009-06-27 15:35:31 UTC (rev 4966)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/ffMpeg4/ADM_ffMpeg4.cpp	2009-06-27 15:35:33 UTC (rev 4967)
@@ -0,0 +1,325 @@
+/***************************************************************************
+                          \fn ADM_VideoEncoders
+                          \brief Internal handling of video encoders
+                             -------------------
+    
+    copyright            : (C) 2002/2009 by mean
+    email                : fixounet at free.fr
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+#include "ADM_lavcodec.h"
+#include "ADM_default.h"
+#include "ADM_ffMpeg4.h"
+#undef ADM_MINIMAL_UI_INTERFACE // we need the full UI
+#include "DIA_factory.h"
+
+static FFcodecSetting Settings=
+{
+    {
+    COMPRESS_CQ, //COMPRESSION_MODE  mode;
+    2,              // uint32_t          qz;           /// Quantizer
+    1500,           //uint32_t          bitrate;      /// In kb/s 
+    700,            //uint32_t          finalsize;    /// In ?
+    1500,           //uint32_t          avg_bitrate;  /// avg_bitrate is in kb/s!!
+    ADM_ENC_CAP_CBR+ADM_ENC_CAP_CQ+ADM_ENC_CAP_2PASS+ADM_ENC_CAP_GLOBAL+ADM_ENC_CAP_SAME
+    },
+          ME_EPZS,			//     ME
+          0,				//          GMC     
+          1,				// 4MV
+          0,				//           _QPEL;   
+          0,				//           _TREILLIS_QUANT
+          2,				//           qmin;
+          31,				//          qmax;
+          3,				//           max_qdiff;
+          0,				//           max_b_frames;
+          0,				//          mpeg_quant;
+          1,				//
+          -2,				//                 luma_elim_threshold;
+          1,				//
+          -5,				// chroma_elim_threshold;
+          0.05,				//lumi_masking;
+          1,				// is lumi
+          0.01,				//dark_masking; 
+          1,				// is dark
+          0.5,				// qcompress amount of qscale change between easy & hard scenes (0.0-1.0
+          0.5,				// qblur;    amount of qscale smoothing over time (0.0-1.0) 
+          0,				// min bitrate in kB/S
+          0,				// max bitrate
+          0,				// default matrix
+          0,				// no gop size
+          NULL,
+          NULL,
+          0,				// interlaced
+          0,				// WLA: bottom-field-first
+          0,				// wide screen
+          2,				// mb eval = distortion
+          8000,				// vratetol 8Meg
+          0,				// is temporal
+          0.0,				// temporal masking
+          0,				// is spatial
+          0.0,				// spatial masking
+          0,				// NAQ
+          0				// DUMMY 
+};
+/**
+        \fn ADM_ffMpeg4Encoder
+*/
+ADM_ffMpeg4Encoder::ADM_ffMpeg4Encoder(ADM_coreVideoFilter *src) : ADM_coreVideoEncoderFFmpeg(src)
+{
+    printf("[ffMpeg4Encoder] Creating.\n");
+
+}
+/**
+    \fn setup
+*/
+bool ADM_ffMpeg4Encoder::setup(void)
+{
+    if(false== ADM_coreVideoEncoderFFmpeg::setup(CODEC_ID_MPEG4))
+        return false;
+    presetContext(&Settings);
+    printf("[ffMpeg] Setup ok\n");
+    return true;
+}
+
+
+/** 
+    \fn ~ADM_ffMpeg4Encoder
+*/
+ADM_ffMpeg4Encoder::~ADM_ffMpeg4Encoder()
+{
+    printf("[ffMpeg4Encoder] Destroying.\n");
+    
+}
+
+/**
+    \fn encode
+*/
+bool         ADM_ffMpeg4Encoder::encode (ADMBitstream * out)
+{
+    if(false==preEncode()) return false;
+    switch(Settings.params.mode)
+    {
+      case COMPRESS_CQ:
+            _context->flags |= CODEC_FLAG_QSCALE;
+            _frame.quality = (int) floor (FF_QP2LAMBDA * Settings.params.qz+ 0.5);
+            break;
+      case COMPRESS_CBR:
+            _context->flags &= ~CODEC_FLAG_QSCALE;
+            _context->bit_rate=Settings.params.bitrate*1000; // kb->b
+            break;
+     default:
+            return false;
+    }
+    int sz=0;
+    if ((sz = avcodec_encode_video (_context, out->data, out->bufferSize, &_frame)) < 0)
+    {
+        printf("[jpeg] Error %d encoding video\n",sz);
+        return false;
+    }
+    
+    out->len=sz;
+#warning     Update pts dts
+
+    out->pts=out->dts=image->Pts;
+    //if(_frame.
+    out->flags=AVI_KEY_FRAME;
+    return true;
+}
+/**
+    \fn presetContext
+    \brief put sensible values into context
+*/
+bool ADM_ffMpeg4Encoder::presetContext(FFcodecSetting *set)
+{
+	  _context->gop_size = 250;
+	
+#define SETX(x) _context->x=set->x; printf("[LAVCODEC]"#x" : %d\n",set->x);
+#define SETX_COND(x) if(set->is_##x) {_context->x=set->x; printf("[LAVCODEC]"#x" : %d\n",set->x);} else\
+		{ printf(#x" is not activated\n");}
+      SETX (me_method);
+      SETX (qmin);
+      SETX (qmax);
+      SETX (max_b_frames);
+      SETX (mpeg_quant);
+      SETX (max_qdiff);
+      SETX_COND (luma_elim_threshold);
+      SETX_COND (chroma_elim_threshold);
+
+#undef SETX
+#undef SETX_COND
+
+#define SETX(x)  _context->x=set->x; printf("[LAVCODEC]"#x" : %f\n",set->x);
+#define SETX_COND(x)  if(set->is_##x) {_context->x=set->x; printf("[LAVCODEC]"#x" : %f\n",set->x);} else  \
+									{printf("[LAVCODEC]"#x" No activated\n");}
+      SETX_COND (lumi_masking);
+      SETX_COND (dark_masking);
+      SETX (qcompress);
+      SETX (qblur);
+      SETX_COND (temporal_cplx_masking);
+      SETX_COND (spatial_cplx_masking);
+
+#undef SETX
+#undef SETX_COND
+
+#define SETX(x) if(set->x){ _context->flags|=CODEC_FLAG##x;printf("[LAVCODEC]"#x" is set\n");}
+      SETX (_GMC);
+
+
+    switch (set->mb_eval)
+	{
+        case 0:
+          _context->mb_decision = FF_MB_DECISION_SIMPLE;
+          break;
+        case 1:
+          _context->mb_decision = FF_MB_DECISION_BITS;
+          break;
+        case 2:
+          _context->mb_decision = FF_MB_DECISION_RD;
+          break;
+        default:
+          ADM_assert (0);
+	}
+      
+      SETX (_4MV);
+      SETX (_QPEL);
+#warning FIXME TRELLIS
+      //SETX(_HQ);
+      //SETX (_TRELLIS_QUANT);
+      //SETX (_NORMALIZE_AQP);
+
+      if (set->widescreen)
+        {
+          _context->sample_aspect_ratio.num = 16;
+          _context->sample_aspect_ratio.den = 9;
+          printf ("[LAVCODEC]16/9 aspect ratio is set.\n");
+
+        }
+#undef SETX
+    
+  _context->bit_rate_tolerance = 8000000;
+  _context->b_quant_factor = 1.25;
+  _context->rc_strategy = 2;
+  _context->b_frame_strategy = 0;
+  _context->b_quant_offset = 1.25;
+  _context->rtp_payload_size = 0;
+  _context->strict_std_compliance = 0;
+  _context->i_quant_factor = 0.8;
+  _context->i_quant_offset = 0.0;
+  _context->rc_qsquish = 1.0;
+  _context->rc_qmod_amp = 0;
+  _context->rc_qmod_freq = 0;
+  _context->rc_eq = const_cast < char *>("tex^qComp");
+  _context->rc_max_rate = 000;
+  _context->rc_min_rate = 000;
+  _context->rc_buffer_size = 000;
+  _context->rc_buffer_aggressivity = 1.0;
+  _context->rc_initial_cplx = 0;
+  _context->dct_algo = 0;
+  _context->idct_algo = 0;
+  _context->p_masking = 0.0;
+  _context->bit_rate = 0;
+
+  // Compute den/num from source (type ADM_coreVideoFilter)
+  FilterInfo *info=source->getInfo();
+  uint64_t frameIncrement=info->frameIncrement;
+  _context->time_base.num=frameIncrement;
+  _context->time_base.den=1000000LL;
+  printf("[LAVCODEC] Frame increment ~ %d ms\n",(int)(frameIncrement/1000));
+  return true;
+}
+/**
+    \fn jpegConfigure
+    \brief UI configuration for jpeg encoder
+*/
+
+bool         ffMpeg4Configure(void)
+{         
+diaMenuEntry meE[]={
+  {1,QT_TR_NOOP("None")},
+  {2,QT_TR_NOOP("Full")},
+  {3,QT_TR_NOOP("Log")},
+  {4,QT_TR_NOOP("Phods")},
+  {5,QT_TR_NOOP("EPZS")},
+  {6,QT_TR_NOOP("X1")}
+};       
+
+diaMenuEntry qzE[]={
+  {0,QT_TR_NOOP("H.263")},
+  {1,QT_TR_NOOP("MPEG")}
+};       
+
+diaMenuEntry rdE[]={
+  {0,QT_TR_NOOP("MB comparison")},
+  {1,QT_TR_NOOP("Fewest bits (vhq)")},
+  {2,QT_TR_NOOP("Rate distortion")}
+};     
+
+        FFcodecSetting *conf=&Settings;
+
+uint32_t me=(uint32_t)conf->me_method;  
+#define PX(x) &(conf->x)
+
+         diaElemBitrate   bitrate(&(Settings.params),NULL);
+         diaElemMenu      meM(&me,QT_TR_NOOP("Matrices"),4,meE);
+         diaElemUInteger  qminM(PX(qmin),QT_TR_NOOP("Mi_n. quantizer:"),1,31);
+         diaElemUInteger  qmaxM(PX(qmax),QT_TR_NOOP("Ma_x. quantizer:"),1,31);
+         diaElemUInteger  qdiffM(PX(max_qdiff),QT_TR_NOOP("Max. quantizer _difference:"),1,31);
+         
+         diaElemToggle    fourMv(PX(_4MV),QT_TR_NOOP("4_MV"));
+         diaElemToggle    trellis(PX(_TRELLIS_QUANT),QT_TR_NOOP("_Trellis quantization"));
+         
+         diaElemToggle    qpel(PX(_QPEL),QT_TR_NOOP("_Quarter pixel"));
+         diaElemToggle    gmc(PX(_GMC),QT_TR_NOOP("_GMC"));
+
+         
+         diaElemUInteger  max_b_frames(PX(max_b_frames),QT_TR_NOOP("_Number of B frames:"),0,32);
+         diaElemMenu     qzM(PX(mpeg_quant),QT_TR_NOOP("_Quantization type:"),2,qzE);
+         
+         diaElemMenu     rdM(PX(mb_eval),QT_TR_NOOP("_Macroblock decision:"),3,rdE);
+         
+         diaElemUInteger filetol(PX(vratetol),QT_TR_NOOP("_Filesize tolerance (kb):"),0,100000);
+         
+         diaElemFloat    qzComp(PX(qcompress),QT_TR_NOOP("_Quantizer compression:"),0,1);
+         diaElemFloat    qzBlur(PX(qblur),QT_TR_NOOP("Quantizer _blur:"),0,1);
+         
+         
+          /* First Tab : encoding mode */
+        diaElem *diamode[]={&bitrate};
+        diaElemTabs tabMode(QT_TR_NOOP("User Interface"),1,diamode);
+        
+        /* 2nd Tab : ME */
+        diaElemFrame frameMe(QT_TR_NOOP("Advanced Simple Profile"));
+        
+        frameMe.swallow(&max_b_frames);
+        frameMe.swallow(&qpel);
+        frameMe.swallow(&gmc);
+        
+        diaElem *diaME[]={&fourMv,&frameMe};
+        diaElemTabs tabME(QT_TR_NOOP("Motion Estimation"),2,diaME);
+        /* 3nd Tab : Qz */
+        
+         diaElem *diaQze[]={&qzM,&rdM,&qminM,&qmaxM,&qdiffM,&trellis};
+        diaElemTabs tabQz(QT_TR_NOOP("Quantization"),6,diaQze);
+        
+        /* 4th Tab : RControl */
+        
+         diaElem *diaRC[]={&filetol,&qzComp,&qzBlur};
+        diaElemTabs tabRC(QT_TR_NOOP("Rate Control"),3,diaRC);
+        
+         diaElemTabs *tabs[]={&tabMode,&tabME,&tabQz,&tabRC};
+        if( diaFactoryRunTabs(QT_TR_NOOP("libavcodec MPEG-4 configuration"),4,tabs))
+        {
+          conf->me_method=(Motion_Est_ID)me;
+          return true;
+        }
+         return false;
+}
+// EOF

Added: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/ffMpeg4/ADM_ffMpeg4.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/ffMpeg4/ADM_ffMpeg4.h	2009-06-27 15:35:31 UTC (rev 4966)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/ffMpeg4/ADM_ffMpeg4.h	2009-06-27 15:35:33 UTC (rev 4967)
@@ -0,0 +1,101 @@
+/***************************************************************************
+                          \fn ADM_VideoEncoders
+                          \brief Internal handling of video encoders
+                             -------------------
+    
+    copyright            : (C) 2002/2009 by mean
+    email                : fixounet at free.fr
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+#ifndef ADM_ffMpeg4_ENCODER_H
+#define ADM_ffMpeg4_ENCODER_H
+#include "ADM_coreVideoEncoderFFmpeg.h"
+#include "ADM_encoderConf.h"
+
+/**
+    FFcodecSetting
+*/
+typedef struct 
+{
+  COMPRES_PARAMS params;
+//
+
+  Motion_Est_ID me_method;
+  uint32_t _GMC;
+  uint32_t _4MV;
+  uint32_t _QPEL;
+  uint32_t _TRELLIS_QUANT;
+  uint32_t qmin;			// 2-31
+  uint32_t qmax;			// 2-31
+  uint32_t max_qdiff;		// 1-31
+  uint32_t max_b_frames;		// 0-1
+  uint32_t mpeg_quant;		// 0-1
+  uint32_t is_luma_elim_threshold;
+  uint32_t luma_elim_threshold;	// -99--99
+  uint32_t is_chroma_elim_threshold;	// -99--99           
+  uint32_t chroma_elim_threshold;	// -99--99      
+
+  float lumi_masking;		// -1--1        
+  int32_t is_lumi_masking;		// -1--1
+  float dark_masking;		// -1--1        
+  int32_t is_dark_masking;		// -1--1
+  float qcompress;		// 0.0--1.0
+  float qblur;			// 0.0--1.0
+  uint32_t minBitrate;          // In kBits/s
+  uint32_t maxBitrate;          // In kBits/s
+  uint32_t user_matrix;		// 0 normal / 1 tmpgenc / 2 anime / 3 kvcd / 4 hr-tmpgenc
+  uint32_t gop_size;			// For mpeg1/2 , 12 is good
+  uint16_t *intra_matrix;
+  uint16_t *inter_matrix;
+  uint32_t interlaced;
+  uint32_t bff;			// WLA: bottom field first flag
+  uint32_t widescreen;          //0 4/3  1 16/9
+
+  // new stuff from jakub ui
+  uint32_t mb_eval;			// Replace hq 0..2
+  uint32_t vratetol;			// filesize tolerance in kb
+
+  uint32_t is_temporal_cplx_masking;	// temporal masking 0--1        
+  float temporal_cplx_masking;	// temporal masking 0--1
+
+  uint32_t is_spatial_cplx_masking;	// spatial masking 0--1
+  float spatial_cplx_masking;	// spatial masking 0--1
+  uint32_t _NORMALIZE_AQP;		// normalize adap quantiz
+
+  //
+  uint32_t use_xvid_ratecontrol;
+  uint32_t bufferSize;		// in KBYTES !!!!
+  uint32_t override_ratecontrol;
+  uint32_t dummy;
+
+} FFcodecSetting;
+
+
+/**
+        \class ADM_ffMpeg4Encoder
+        \brief Dummy encoder that does nothing
+
+*/
+class ADM_ffMpeg4Encoder : public ADM_coreVideoEncoderFFmpeg
+{
+protected:
+               int              plane;
+               bool            presetContext(FFcodecSetting *set);
+public:
+
+                           ADM_ffMpeg4Encoder(ADM_coreVideoFilter *src);
+                           ~ADM_ffMpeg4Encoder();
+virtual        bool        setup(void); 
+virtual        bool        encode (ADMBitstream * out);
+virtual const  char        *getFourcc(void) {return "DIVX";}
+};
+
+#endif

Added: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/ffMpeg4/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/ffMpeg4/CMakeLists.txt	2009-06-27 15:35:31 UTC (rev 4966)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/ffMpeg4/CMakeLists.txt	2009-06-27 15:35:33 UTC (rev 4967)
@@ -0,0 +1,15 @@
+INCLUDE(ve_plugin)
+
+SET(ffMpeg4_SRCS 
+        ffMpeg4Plugin.cpp
+        ADM_ffMpeg4.cpp
+)
+INCLUDE_DIRECTORIES(${CMAKE_CURRENT_BINARY_DIR})
+
+ADD_LIBRARY(ADM_ve_ffMpeg4 SHARED ${ffMpeg4_SRCS})
+
+INIT_VIDEO_ENCODER(ADM_ve_ffMpeg4)
+INSTALL_VIDEO_ENCODER(ADM_ve_ffMpeg4)
+TARGET_LINK_LIBRARIES(ADM_ve_ffMpeg4 ADM_libavcodec ADM_libavutil)
+INCLUDE_DIRECTORIES("${AVIDEMUX_SOURCE_DIR}/avidemux/")
+INCLUDE_DIRECTORIES("${AVIDEMUX_SOURCE_DIR}/avidemux/ADM_libraries/ADM_ffmpeg")

Added: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/ffMpeg4/ffMpeg4Plugin.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/ffMpeg4/ffMpeg4Plugin.cpp	2009-06-27 15:35:31 UTC (rev 4966)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/ffMpeg4/ffMpeg4Plugin.cpp	2009-06-27 15:35:33 UTC (rev 4967)
@@ -0,0 +1,31 @@
+/***************************************************************************
+                          \fn     jpegPlugin
+                          \brief  Plugin for jpeg dummy encoder
+                             -------------------
+    
+    copyright            : (C) 2002/2009 by mean
+    email                : fixounet at free.fr
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+#include "ADM_default.h"
+#include "ADM_ffMpeg4.h"
+#include "ADM_coreVideoEncoderInternal.h"
+
+extern bool         ffMpeg4Configure(void);
+
+ADM_DECLARE_VIDEO_ENCODER_PREAMBLE(ADM_ffMpeg4Encoder);
+ADM_DECLARE_VIDEO_ENCODER_NO_CONFIG();
+ADM_DECLARE_VIDEO_ENCODER_MAIN("ffMpeg4",
+                               "Mpeg4 ASP (ff)",
+                               "Simple ffmpeg based mpeg4 Encoder (c) 2009 Mean",
+                                ffMpeg4Configure, // No configuration
+                                ADM_UI_ALL,
+                                1,0,0);



From gruntster at mail.berlios.de  Sat Jun 27 19:52:35 2009
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Sat, 27 Jun 2009 19:52:35 +0200
Subject: [Avidemux-svn-commit] r4968 - in
	branches/avidemux_2.5_branch_gruntster/cmake: . patches
Message-ID: <200906271752.n5RHqZnS009515@sheep.berlios.de>

Author: gruntster
Date: 2009-06-27 19:52:21 +0200 (Sat, 27 Jun 2009)
New Revision: 4968

Modified:
   branches/avidemux_2.5_branch_gruntster/cmake/admFFmpegBuild.cmake
   branches/avidemux_2.5_branch_gruntster/cmake/patches/libavcodec_avcodec.h.patch
   branches/avidemux_2.5_branch_gruntster/cmake/patches/libavcodec_h264.c.patch
   branches/avidemux_2.5_branch_gruntster/cmake/patches/libavcodec_mpeg12.c.patch
   branches/avidemux_2.5_branch_gruntster/cmake/patches/libavcodec_mpegvideo.c.patch
   branches/avidemux_2.5_branch_gruntster/cmake/patches/libavcodec_utils.c.patch
   branches/avidemux_2.5_branch_gruntster/cmake/patches/libavformat_isom.c.patch
   branches/avidemux_2.5_branch_gruntster/cmake/patches/libavformat_matroskaenc.c.patch
Log:
[ffmpeg] update FFmpeg to r19285 & libswscale r29406

Modified: branches/avidemux_2.5_branch_gruntster/cmake/admFFmpegBuild.cmake
===================================================================
--- branches/avidemux_2.5_branch_gruntster/cmake/admFFmpegBuild.cmake	2009-06-27 15:35:33 UTC (rev 4967)
+++ branches/avidemux_2.5_branch_gruntster/cmake/admFFmpegBuild.cmake	2009-06-27 17:52:21 UTC (rev 4968)
@@ -1,7 +1,7 @@
 include(admFFmpegUtil)
 
-set(FFMPEG_VERSION 18940)	# http://git.ffmpeg.org/?p=ffmpeg;a=snapshot;h=1e3b68a502b568cc3b486914f0d69be9af919ba6;sf=tgz
-set(SWSCALE_VERSION 29319)	# http://git.ffmpeg.org/?p=libswscale;a=snapshot;h=99683bba2e7148bb028776c2b5fefcb3064d48e9;sf=tgz
+set(FFMPEG_VERSION 19285)	# http://git.ffmpeg.org/?p=ffmpeg;a=snapshot;h=a6262ab9bba80693bedf73a7252415af4e0ef463;sf=tgz
+set(SWSCALE_VERSION 29406)	# http://git.ffmpeg.org/?p=libswscale;a=snapshot;h=e52bf9389e0e77a63c3ee8d3f2ea67b8309207e3;sf=tgz
 
 set(LIBRARY_SOURCE_DIR "${CMAKE_SOURCE_DIR}/avidemux/ADM_libraries")
 set(FFMPEG_SOURCE_DIR "${LIBRARY_SOURCE_DIR}/ffmpeg")

Modified: branches/avidemux_2.5_branch_gruntster/cmake/patches/libavcodec_avcodec.h.patch
===================================================================
--- branches/avidemux_2.5_branch_gruntster/cmake/patches/libavcodec_avcodec.h.patch	2009-06-27 15:35:33 UTC (rev 4967)
+++ branches/avidemux_2.5_branch_gruntster/cmake/patches/libavcodec_avcodec.h.patch	2009-06-27 17:52:21 UTC (rev 4968)
@@ -1,8 +1,8 @@
-*** libavcodec/avcodec.h.old	Mon May 25 14:32:16 2009
---- libavcodec/avcodec.h	Mon May 25 14:32:16 2009
+*** libavcodec/avcodec.h.old	Sat Jun 27 18:45:05 2009
+--- libavcodec/avcodec.h	Sat Jun 27 18:45:04 2009
 ***************
-*** 566,571 ****
---- 566,573 ----
+*** 568,573 ****
+--- 568,575 ----
   #define CODEC_FLAG2_CHUNKS        0x00008000 ///< Input bitstream might be truncated at a packet boundaries instead of only at frame boundaries.
   #define CODEC_FLAG2_NON_LINEAR_QUANT 0x00010000 ///< Use MPEG-2 nonlinear quantizer.
   #define CODEC_FLAG2_BIT_RESERVOIR 0x00020000 ///< Use a bit reservoir when encoding if possible
@@ -12,8 +12,8 @@
   /* Unsupported options :
    *              Syntax Arithmetic coding (SAC)
 ***************
-*** 1412,1417 ****
---- 1414,1420 ----
+*** 1422,1427 ****
+--- 1424,1430 ----
        * - decoding: unused
        */
       int rc_max_rate;
@@ -22,8 +22,8 @@
       /**
        * minimum bitrate
 ***************
-*** 1426,1431 ****
---- 1429,1436 ----
+*** 1436,1441 ****
+--- 1439,1446 ----
        * - decoding: unused
        */
       int rc_buffer_size;

Modified: branches/avidemux_2.5_branch_gruntster/cmake/patches/libavcodec_h264.c.patch
===================================================================
--- branches/avidemux_2.5_branch_gruntster/cmake/patches/libavcodec_h264.c.patch	2009-06-27 15:35:33 UTC (rev 4967)
+++ branches/avidemux_2.5_branch_gruntster/cmake/patches/libavcodec_h264.c.patch	2009-06-27 17:52:21 UTC (rev 4968)
@@ -1,8 +1,8 @@
-*** libavcodec/h264.c.old	Mon May 25 14:32:18 2009
---- libavcodec/h264.c	Mon May 25 14:32:18 2009
+*** libavcodec/h264.c.old	Sat Jun 27 18:45:10 2009
+--- libavcodec/h264.c	Sat Jun 27 18:45:09 2009
 ***************
-*** 8135,8140 ****
---- 8135,8151 ----
+*** 8151,8156 ****
+--- 8151,8167 ----
       return 0;
   }
   

Modified: branches/avidemux_2.5_branch_gruntster/cmake/patches/libavcodec_mpeg12.c.patch
===================================================================
--- branches/avidemux_2.5_branch_gruntster/cmake/patches/libavcodec_mpeg12.c.patch	2009-06-27 15:35:33 UTC (rev 4967)
+++ branches/avidemux_2.5_branch_gruntster/cmake/patches/libavcodec_mpeg12.c.patch	2009-06-27 17:52:21 UTC (rev 4968)
@@ -1,8 +1,8 @@
-*** libavcodec/mpeg12.c.old	Mon May 25 14:32:18 2009
---- libavcodec/mpeg12.c	Mon May 25 14:32:18 2009
+*** libavcodec/mpeg12.c.old	Sat Jun 27 18:45:12 2009
+--- libavcodec/mpeg12.c	Sat Jun 27 18:45:11 2009
 ***************
-*** 1963,1968 ****
---- 1963,1973 ----
+*** 1962,1967 ****
+--- 1962,1972 ----
           ff_er_frame_end(s);
   
           MPV_frame_end(s);

Modified: branches/avidemux_2.5_branch_gruntster/cmake/patches/libavcodec_mpegvideo.c.patch
===================================================================
--- branches/avidemux_2.5_branch_gruntster/cmake/patches/libavcodec_mpegvideo.c.patch	2009-06-27 15:35:33 UTC (rev 4967)
+++ branches/avidemux_2.5_branch_gruntster/cmake/patches/libavcodec_mpegvideo.c.patch	2009-06-27 17:52:21 UTC (rev 4968)
@@ -1,7 +1,7 @@
-*** libavcodec/mpegvideo.c.old	Mon May 25 14:32:19 2009
---- libavcodec/mpegvideo.c	Mon May 25 14:32:19 2009
+*** libavcodec/mpegvideo.c.old	Sat Jun 27 18:45:15 2009
+--- libavcodec/mpegvideo.c	Sat Jun 27 18:45:14 2009
 ***************
-*** 610,616 ****
+*** 613,619 ****
       CHECKED_ALLOCZ(s->prev_pict_types, PREV_PICT_TYPES_BUFFER_SIZE);
   
       s->parse_context.state= -1;
@@ -9,7 +9,7 @@
          s->visualization_buffer[0] = av_malloc((s->mb_width*16 + 2*EDGE_WIDTH) * s->mb_height*16 + 2*EDGE_WIDTH);
          s->visualization_buffer[1] = av_malloc((s->mb_width*16 + 2*EDGE_WIDTH) * s->mb_height*16 + 2*EDGE_WIDTH);
          s->visualization_buffer[2] = av_malloc((s->mb_width*16 + 2*EDGE_WIDTH) * s->mb_height*16 + 2*EDGE_WIDTH);
---- 610,620 ----
+--- 613,623 ----
       CHECKED_ALLOCZ(s->prev_pict_types, PREV_PICT_TYPES_BUFFER_SIZE);
   
       s->parse_context.state= -1;

Modified: branches/avidemux_2.5_branch_gruntster/cmake/patches/libavcodec_utils.c.patch
===================================================================
--- branches/avidemux_2.5_branch_gruntster/cmake/patches/libavcodec_utils.c.patch	2009-06-27 15:35:33 UTC (rev 4967)
+++ branches/avidemux_2.5_branch_gruntster/cmake/patches/libavcodec_utils.c.patch	2009-06-27 17:52:21 UTC (rev 4968)
@@ -1,8 +1,8 @@
-*** libavcodec/utils.c.old	Mon May 25 14:32:20 2009
---- libavcodec/utils.c	Mon May 25 14:32:20 2009
+*** libavcodec/utils.c.old	Sat Jun 27 18:45:21 2009
+--- libavcodec/utils.c	Sat Jun 27 18:45:20 2009
 ***************
-*** 594,603 ****
---- 594,605 ----
+*** 609,618 ****
+--- 609,620 ----
   
       if((avctx->codec->capabilities & CODEC_CAP_DELAY) || avpkt->size){
           //FIXME remove the check below _after_ ensuring that all audio check that the available space is enough
@@ -16,7 +16,7 @@
           *frame_size_ptr < avctx->channels * avctx->frame_size * sizeof(int16_t)){
               av_log(avctx, AV_LOG_ERROR, "buffer %d too small\n", *frame_size_ptr);
 ***************
-*** 1021,1027 ****
+*** 1047,1053 ****
           return -1;
       }
   #if !HAVE_MKSTEMP
@@ -24,7 +24,7 @@
   #else
       snprintf(*filename, len, "/tmp/%sXXXXXX", prefix);
       fd = mkstemp(*filename);
---- 1023,1029 ----
+--- 1049,1055 ----
           return -1;
       }
   #if !HAVE_MKSTEMP

Modified: branches/avidemux_2.5_branch_gruntster/cmake/patches/libavformat_isom.c.patch
===================================================================
--- branches/avidemux_2.5_branch_gruntster/cmake/patches/libavformat_isom.c.patch	2009-06-27 15:35:33 UTC (rev 4967)
+++ branches/avidemux_2.5_branch_gruntster/cmake/patches/libavformat_isom.c.patch	2009-06-27 17:52:21 UTC (rev 4968)
@@ -1,17 +1,17 @@
-*** libavformat/isom.c.old	Mon May 25 14:32:21 2009
---- libavformat/isom.c	Mon May 25 14:32:21 2009
+*** libavformat/isom.c.old	Sat Jun 27 18:45:27 2009
+--- libavformat/isom.c	Sat Jun 27 18:45:27 2009
 ***************
-*** 192,198 ****
-      { CODEC_ID_MACE3, MKTAG('M', 'A', 'C', '3') }, /* Macintosh Audio Compression and Expansion 3:1 */
-      { CODEC_ID_MACE6, MKTAG('M', 'A', 'C', '6') }, /* Macintosh Audio Compression and Expansion 6:1 */
+*** 198,204 ****
+      { CODEC_ID_MP1, MKTAG('.', 'm', 'p', '1') }, /* MPEG layer 1 */
+      { CODEC_ID_MP2, MKTAG('.', 'm', 'p', '2') }, /* MPEG layer 2 */
   
 !     { CODEC_ID_MP3, MKTAG('.', 'm', 'p', '3') }, /* MPEG layer 3 */ /* sample files at http://www.3ivx.com/showcase.html use this tag */
       { CODEC_ID_MP3, 0x6D730055 }, /* MPEG layer 3 */
   
   /*  { CODEC_ID_OGG_VORBIS, MKTAG('O', 'g', 'g', 'S') }, *//* sample files at http://heroinewarrior.com/xmovie.php3 use this tag */
---- 192,201 ----
-      { CODEC_ID_MACE3, MKTAG('M', 'A', 'C', '3') }, /* Macintosh Audio Compression and Expansion 3:1 */
-      { CODEC_ID_MACE6, MKTAG('M', 'A', 'C', '6') }, /* Macintosh Audio Compression and Expansion 6:1 */
+--- 198,207 ----
+      { CODEC_ID_MP1, MKTAG('.', 'm', 'p', '1') }, /* MPEG layer 1 */
+      { CODEC_ID_MP2, MKTAG('.', 'm', 'p', '2') }, /* MPEG layer 2 */
   
 !     //MEANX { CODEC_ID_MP3, MKTAG('.', 'm', 'p', '3') }, /* MPEG layer 3 */ /* sample files at http://www.3ivx.com/showcase.html use this tag */
 !      { CODEC_ID_MP3, MKTAG( 'm', 'p', '4','a') },

Modified: branches/avidemux_2.5_branch_gruntster/cmake/patches/libavformat_matroskaenc.c.patch
===================================================================
--- branches/avidemux_2.5_branch_gruntster/cmake/patches/libavformat_matroskaenc.c.patch	2009-06-27 15:35:33 UTC (rev 4967)
+++ branches/avidemux_2.5_branch_gruntster/cmake/patches/libavformat_matroskaenc.c.patch	2009-06-27 17:52:21 UTC (rev 4968)
@@ -1,5 +1,5 @@
-*** libavformat/matroskaenc.c.old	Wed Apr  1 18:35:42 2009
---- libavformat/matroskaenc.c	Wed Apr  1 18:35:42 2009
+*** libavformat/matroskaenc.c.old	Sat Jun 27 18:45:28 2009
+--- libavformat/matroskaenc.c	Sat Jun 27 18:45:28 2009
 ***************
 *** 395,400 ****
 --- 395,401 ----
@@ -71,7 +71,7 @@
 *** 907,909 ****
 --- 947,959 ----
       .flags = AVFMT_GLOBALHEADER,
-      .codec_tag = (const AVCodecTag* const []){codec_wav_tags, 0},
+      .codec_tag = (const AVCodecTag* const []){ff_codec_wav_tags, 0},
   };
 + // MEANX
 + //



From mean at mail.berlios.de  Sun Jun 28 19:47:45 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sun, 28 Jun 2009 19:47:45 +0200
Subject: [Avidemux-svn-commit] r4969 -
	branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script
Message-ID: <200906281747.n5SHlj7o018042@sheep.berlios.de>

Author: mean
Date: 2009-06-28 19:47:45 +0200 (Sun, 28 Jun 2009)
New Revision: 4969

Added:
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script/ADM_JSFunctionsNonRegFactory.cpp
Modified:
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script/ADM_JSFunctions.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script/CMakeLists.txt
Log:
[factory] Re-enable js non reg function for bitrate factory widget

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script/ADM_JSFunctions.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script/ADM_JSFunctions.cpp	2009-06-27 17:52:21 UTC (rev 4968)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script/ADM_JSFunctions.cpp	2009-06-28 17:47:45 UTC (rev 4969)
@@ -502,369 +502,6 @@
   return JS_TRUE;
 }// end systemExecute
 
-JSBool facInt(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval)
-{
-  uint32_t tog=0;
-   diaElemUInteger blend(&tog,QT_TR_NOOP("Uinteger"),0,255);
-    diaElem *elems[]={&blend   };
-    
-  if(diaFactoryRun(QT_TR_NOOP("Test uinteger"),1,elems))
-  {
-    *rval = BOOLEAN_TO_JSVAL(1);
-    printf("Value : %u\n",tog);
-  }else
-    *rval = BOOLEAN_TO_JSVAL(0);
-  
-  return JS_TRUE;
-}
-JSBool facFloat(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval)
-{
-  ELEM_TYPE_FLOAT tog=0;
-   diaElemFloat blend(&tog,QT_TR_NOOP("Float"),0,255);
-    diaElem *elems[]={&blend   };
-    
-  if(diaFactoryRun("Test float",1,elems))
-  {
-    *rval = BOOLEAN_TO_JSVAL(1);
-    printf("Value : %f\n",(float)tog);
-  }else
-    *rval = BOOLEAN_TO_JSVAL(0);
-  
-  
-  return JS_TRUE;
-}
-
-JSBool facToggle(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval)
-{
-  uint32_t tog=0;
-  uint32_t test=0;
-   diaElemToggle blend(&tog,QT_TR_NOOP("Toggle"));
-    diaElemUInteger     bt(&test,"Entry",0,10);
-    diaElemUInteger     bt2(&test,"Entry",0,10);
-    diaElem *elems[]={&blend,&bt,&bt2   };
-    blend.link(1,&bt);
-    blend.link(0,&bt2);
-    
-  if(diaFactoryRun("Test Toggle",3,elems))
-  {
-    *rval = BOOLEAN_TO_JSVAL(1);
-    printf("Value : %u\n",tog);
-  }else
-    *rval = BOOLEAN_TO_JSVAL(0);
-  return JS_TRUE;
-}
-
-JSBool facMenu(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval)
-{
-   uint32_t tog=4;
-   ELEM_TYPE_FLOAT f=1; 
-   
-    diaMenuEntry menu[]={
-                             {2,   QT_TR_NOOP("No Strategy"),NULL},
-                             {4,     QT_TR_NOOP("3:2 Pulldown"),NULL},
-                             {6,     QT_TR_NOOP("Pal/Secam"),NULL},
-                             {7,  QT_TR_NOOP("NTSC converted from PAL"),NULL}
-                          };
-   diaElemMenu blend(&tog,QT_TR_NOOP("menu"),4,menu);
-    
-    // Link it to another
-    diaElemFloat toggle(&f,"Linked float",1,2);
-    blend.link(&(menu[1]),1,&toggle);
-    //
-diaElem *elems[]={&blend,&toggle   };
-  if(diaFactoryRun("Test Menu",2,elems))
-  {
-    *rval = BOOLEAN_TO_JSVAL(1);
-    printf("Value : %u\n",tog);
-  }else
-    *rval = BOOLEAN_TO_JSVAL(0);
-  return JS_TRUE;
-}
-JSBool facFile(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval)
-{
-   uint32_t tog=0;
-   char *test=ADM_strdup("Entry test1");
-    
-      diaElemFile fread(0,&test,"Entry");
-      diaElem *elems[]={&fread   };
-  if(diaFactoryRun("Test FileRead",1,elems))
-  {
-    *rval = BOOLEAN_TO_JSVAL(1);
-    printf("Value : <%s>\n",test);
-  }else
-    *rval = BOOLEAN_TO_JSVAL(0);
-  if(test) ADM_dealloc(test);
-  return JS_TRUE;
-}
-JSBool facDirSel(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval)
-{
-   uint32_t tog=0;
-   char *test=ADM_strdup("Entry test1");
-    
-      diaElemDirSelect fread(&test,"Entry");
-      diaElem *elems[]={&fread   };
-  if(diaFactoryRun("Test DirSel",1,elems))
-  {
-    *rval = BOOLEAN_TO_JSVAL(1);
-    printf("Value : <%s>\n",test);
-  }else
-    *rval = BOOLEAN_TO_JSVAL(0);
-  if(test) ADM_dealloc(test);
-  return JS_TRUE;
-}
-
-JSBool facBitrate(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval)
-{
-#if 0
-   COMPRES_PARAMS test={
-  CodecYV12,
-  "YV12 (raw)",
-  "YV12",
-  "YV12",
-  COMPRESS_CQ,
-  1,
-  1500,
-  700,
-  1000,
-  ADM_ENC_CAP_CQ,
-  0,
-  NULL,
-  0,
-  NULL
-};
-    
-      diaElemBitrate bt(&test,"Entry");
-      diaElem *elems[]={&bt   };
-  if(diaFactoryRun("Test FileRead",1,elems))
-  {
-    *rval = BOOLEAN_TO_JSVAL(1);
-    
-  }else
-    *rval = BOOLEAN_TO_JSVAL(0);
-#endif  
-  return JS_TRUE;
-}
-#if 0
-JSBool facBar(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval)
-{
-    
-      diaElemBar bar1(25,"25");
-      diaElemBar bar2(65,"65");
-      diaElem *elems[]={&bar1,&bar2   };
-  if(diaFactoryRun("Test FileRead",2,elems))
-  {
-    *rval = BOOLEAN_TO_JSVAL(1);
-    
-  }else
-    *rval = BOOLEAN_TO_JSVAL(0);
-  
-  return JS_TRUE;
-}
-#endif
-void clickMe(void *cookie)
-{
-  GUI_Error_HIG("Button","Button pressed!"); 
-}
-JSBool facButton(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval)
-{
-    
-      diaElemButton bar1("Button",clickMe,NULL);
-      diaElem *elems[]={&bar1   };
-  if(diaFactoryRun("Test Button",1,elems))
-  {
-    *rval = BOOLEAN_TO_JSVAL(1);
-    
-  }else
-    *rval = BOOLEAN_TO_JSVAL(0);
-  
-  return JS_TRUE;
-}
-JSBool facSlider(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval)
-{
-  int32_t val=4;
-      diaElemSlider slide(&val,"foo", 0,10);
-      
-      diaElem *elems[]={&slide   };
-  if(diaFactoryRun("Test Slider",1,elems))
-  {
-    *rval = BOOLEAN_TO_JSVAL(1);
-    
-  }else
-    *rval = BOOLEAN_TO_JSVAL(0);
-  
-  return JS_TRUE;
-}
-JSBool facRoText(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval)
-{
-    
-      diaElemReadOnlyText txt("blah blah","Value:");
-      
-      diaElem *elems[]={&txt   };
-  if(diaFactoryRun("Test FileRead",1,elems))
-  {
-    *rval = BOOLEAN_TO_JSVAL(1);
-    
-  }else
-    *rval = BOOLEAN_TO_JSVAL(0);
-  
-  return JS_TRUE;
-}
-JSBool facText(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval)
-{
-    
-      char *foo=ADM_strdup("blah");
-      diaElemText txt(&foo,"Text",NULL);
-      
-      diaElem *elems[]={&txt   };
-  if(diaFactoryRun("Test FileRead",1,elems))
-  {
-    *rval = BOOLEAN_TO_JSVAL(1);
-    
-  }else
-    *rval = BOOLEAN_TO_JSVAL(0);
-  
-  return JS_TRUE;
-}
-
-JSBool facTab(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval)
-{
-    
-      uint32_t test,test2;
-      
-      diaElemReadOnlyText txt("blah blah","Value:");
-      diaElemUInteger     bt(&test,"Entry",0,10);
-      diaElemUInteger     bt2(&test2,"Entry",0,10);
-      
-      
-      diaElem *elems1[]={&txt   };
-      diaElem *elems2[]={&bt,&bt2   };
-      
-      diaElemTabs tab1("T1",1,(diaElem **)elems1);
-      diaElemTabs tab2("T2",2,(diaElem **)elems2);
-      
-      diaElemTabs *tabs[2]={&tab1,&tab2};
-          
-      
-  if(diaFactoryRunTabs("Test FileRead",2,tabs))
-  {
-    *rval = BOOLEAN_TO_JSVAL(1);
-    
-  }else
-    *rval = BOOLEAN_TO_JSVAL(0);
-  
-  return JS_TRUE;
-}
-JSBool facFrame(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval)
-{
-    
-      uint32_t test,test2;
-      
-      diaElemReadOnlyText align("*****","Value:");
-      diaElemReadOnlyText txt("blah blah","Value:");
-      diaElemUInteger     bt(&test,"Entry1",0,10);
-      diaElemUInteger     bt2(&test2,"Entry2",0,10);
-      diaElemFrame        frm("Frame1");
-      
-      frm.swallow(&txt);
-      frm.swallow(&bt);
-      frm.swallow(&bt2);
-      
-         diaElem *elems[]={&align,&frm   };
-  if(diaFactoryRun("Test frame",2,elems))
-  {
-    *rval = BOOLEAN_TO_JSVAL(1);
-    
-  }else
-    *rval = BOOLEAN_TO_JSVAL(0);
-  
-  return JS_TRUE;
-      
-      
-}
-
-
-JSBool facHex(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval)
-{
-    
-      uint8_t data[100];
-      for(int i=0;i<100;i++) data[i]=i;
-      
-      diaElemHex binhex("*****",100,data);
-      
-      
-         diaElem *elems[]={&binhex   };
-  if(diaFactoryRun("Test binHex",1,elems))
-  {
-    *rval = BOOLEAN_TO_JSVAL(1);
-    
-  }else
-    *rval = BOOLEAN_TO_JSVAL(0);
-  
-  return JS_TRUE;
-      
-      
-}
-JSBool facMatrix(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval)
-{
-    
-      uint8_t data[16];
-      for(int i=0;i<100;i++) data[i]=i;
-      
-      diaElemMatrix Matrix(data,"Matrix",4);
-      
-      
-         diaElem *elems[]={&Matrix   };
-  if(diaFactoryRun("Test Matrix",1,elems))
-  {
-    *rval = BOOLEAN_TO_JSVAL(1);
-    
-  }else
-    *rval = BOOLEAN_TO_JSVAL(0);
-  
-  for(int x=0;x<4*4;x++)
-  {
-	  if(x && !(x&3)) printf("\n");
-	  printf("%02x ",data[x]);
-	  
-  }
-  
-  return JS_TRUE;
-      
-      
-}
-JSBool facThreadCount(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval)
-{
-	uint32_t val=1;
-	diaElemThreadCount threadcount(&val,"ThreadCount");
-      
-    diaElem *elems[]={&threadcount   };
-    
-  if(diaFactoryRun("Test ThreadCount",1,elems))
-  {
-    *rval = BOOLEAN_TO_JSVAL(1);
-    
-  }else
-    *rval = BOOLEAN_TO_JSVAL(0);
-  return JS_TRUE;
-      
-}
-JSBool facNotch(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval)
-{
-    
-	diaElemNotch notch(1,"Notch");
-      
-         diaElem *elems[]={&notch   };
-  if(diaFactoryRun("Test Notch",1,elems))
-  {
-    *rval = BOOLEAN_TO_JSVAL(1);
-    
-  }else
-    *rval = BOOLEAN_TO_JSVAL(0);
-  return JS_TRUE;
-      
-      
-}
-
 JSBool crashTest(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval)
 {
   

Added: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script/ADM_JSFunctionsNonRegFactory.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script/ADM_JSFunctionsNonRegFactory.cpp	2009-06-27 17:52:21 UTC (rev 4968)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script/ADM_JSFunctionsNonRegFactory.cpp	2009-06-28 17:47:45 UTC (rev 4969)
@@ -0,0 +1,428 @@
+// C++ Interface: Spider Monkey interface
+//
+// Description: 
+//
+//
+// Author: Anish Mistry
+//      Some modification by mean
+//
+// Copyright: See COPYING file that comes with this distribution
+//
+//
+#include "ADM_default.h"
+#include <sys/types.h>
+#include <sys/stat.h>
+#if defined( ADM_WIN32 ) || defined(__MINGW32__)
+#define ADM_JS_WIN32
+#endif
+
+#ifndef ADM_JS_WIN32
+#include <sys/wait.h>
+#include <sys/param.h>
+#endif
+#include <errno.h>
+#include <dirent.h>
+#include <limits.h>
+#include <math.h>
+#include <vector>
+#include <string>
+#include "ADM_JSAvidemux.h"
+#include "ADM_JSGlobal.h"
+#include "ADM_default.h"
+#include "DIA_coreToolkit.h"
+#include "ADM_editor/ADM_outputfmt.h"
+#include "audioeng_buildfilters.h"
+#include "adm_scanner.h" 
+#include "avi_vars.h"
+#include "gui_action.hxx"
+
+#include "ADM_videoFilter.h"
+#include "ADM_editor/ADM_outputfmt.h"
+
+#include "ADM_script/ADM_container.h"
+
+#include "ADM_JSGlobal.h"
+#include "DIA_fileSel.h"
+
+#include "DIA_factory.h"
+
+
+extern char **environ;
+extern char *script_getVar(char *in, int *r);
+
+JSBool facInt(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval);
+JSBool facFloat(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval);
+JSBool facToggle(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval);
+JSBool facMenu(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval);
+JSBool facFile(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval);
+JSBool facBitrate(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval);
+JSBool facBar(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval);
+JSBool facRoText(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval);
+JSBool facText(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval);
+JSBool facTab(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval);
+JSBool facFrame(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval);
+JSBool facHex(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval);
+JSBool facDirSel(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval);
+JSBool facButton(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval);
+JSBool facMatrix(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval);
+JSBool facNotch(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval);
+JSBool facThreadCount(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval);
+JSBool facSlider(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval);
+JSBool crashTest(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval);
+JSBool assertTest(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval);
+
+JSBool facInt(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval)
+{
+  uint32_t tog=0;
+   diaElemUInteger blend(&tog,QT_TR_NOOP("Uinteger"),0,255);
+    diaElem *elems[]={&blend   };
+    
+  if(diaFactoryRun(QT_TR_NOOP("Test uinteger"),1,elems))
+  {
+    *rval = BOOLEAN_TO_JSVAL(1);
+    printf("Value : %u\n",tog);
+  }else
+    *rval = BOOLEAN_TO_JSVAL(0);
+  
+  return JS_TRUE;
+}
+JSBool facFloat(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval)
+{
+  ELEM_TYPE_FLOAT tog=0;
+   diaElemFloat blend(&tog,QT_TR_NOOP("Float"),0,255);
+    diaElem *elems[]={&blend   };
+    
+  if(diaFactoryRun("Test float",1,elems))
+  {
+    *rval = BOOLEAN_TO_JSVAL(1);
+    printf("Value : %f\n",(float)tog);
+  }else
+    *rval = BOOLEAN_TO_JSVAL(0);
+  
+  
+  return JS_TRUE;
+}
+
+JSBool facToggle(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval)
+{
+  uint32_t tog=0;
+  uint32_t test=0;
+   diaElemToggle blend(&tog,QT_TR_NOOP("Toggle"));
+    diaElemUInteger     bt(&test,"Entry",0,10);
+    diaElemUInteger     bt2(&test,"Entry",0,10);
+    diaElem *elems[]={&blend,&bt,&bt2   };
+    blend.link(1,&bt);
+    blend.link(0,&bt2);
+    
+  if(diaFactoryRun("Test Toggle",3,elems))
+  {
+    *rval = BOOLEAN_TO_JSVAL(1);
+    printf("Value : %u\n",tog);
+  }else
+    *rval = BOOLEAN_TO_JSVAL(0);
+  return JS_TRUE;
+}
+
+JSBool facMenu(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval)
+{
+   uint32_t tog=4;
+   ELEM_TYPE_FLOAT f=1; 
+   
+    diaMenuEntry menu[]={
+                             {2,   QT_TR_NOOP("No Strategy"),NULL},
+                             {4,     QT_TR_NOOP("3:2 Pulldown"),NULL},
+                             {6,     QT_TR_NOOP("Pal/Secam"),NULL},
+                             {7,  QT_TR_NOOP("NTSC converted from PAL"),NULL}
+                          };
+   diaElemMenu blend(&tog,QT_TR_NOOP("menu"),4,menu);
+    
+    // Link it to another
+    diaElemFloat toggle(&f,"Linked float",1,2);
+    blend.link(&(menu[1]),1,&toggle);
+    //
+diaElem *elems[]={&blend,&toggle   };
+  if(diaFactoryRun("Test Menu",2,elems))
+  {
+    *rval = BOOLEAN_TO_JSVAL(1);
+    printf("Value : %u\n",tog);
+  }else
+    *rval = BOOLEAN_TO_JSVAL(0);
+  return JS_TRUE;
+}
+JSBool facFile(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval)
+{
+   uint32_t tog=0;
+   char *test=ADM_strdup("Entry test1");
+    
+      diaElemFile fread(0,&test,"Entry");
+      diaElem *elems[]={&fread   };
+  if(diaFactoryRun("Test FileRead",1,elems))
+  {
+    *rval = BOOLEAN_TO_JSVAL(1);
+    printf("Value : <%s>\n",test);
+  }else
+    *rval = BOOLEAN_TO_JSVAL(0);
+  if(test) ADM_dealloc(test);
+  return JS_TRUE;
+}
+JSBool facDirSel(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval)
+{
+   uint32_t tog=0;
+   char *test=ADM_strdup("Entry test1");
+    
+      diaElemDirSelect fread(&test,"Entry");
+      diaElem *elems[]={&fread   };
+  if(diaFactoryRun("Test DirSel",1,elems))
+  {
+    *rval = BOOLEAN_TO_JSVAL(1);
+    printf("Value : <%s>\n",test);
+  }else
+    *rval = BOOLEAN_TO_JSVAL(0);
+  if(test) ADM_dealloc(test);
+  return JS_TRUE;
+}
+
+JSBool facBitrate(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval)
+{
+
+   COMPRES_PARAMS test={
+  COMPRESS_CQ,
+  1,
+  1500,
+  700,
+  1000,
+  ADM_ENC_CAP_CQ+ADM_ENC_CAP_2PASS+ADM_ENC_CAP_CBR+ADM_ENC_CAP_SAME
+  };
+    
+      diaElemBitrate bt(&test,"Entry");
+      diaElem *elems[]={&bt   };
+  if(diaFactoryRun("Test BitRate",1,elems))
+  {
+    *rval = BOOLEAN_TO_JSVAL(1);
+    
+  }else
+    *rval = BOOLEAN_TO_JSVAL(0);
+  return JS_TRUE;
+}
+#if 0
+JSBool facBar(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval)
+{
+    
+      diaElemBar bar1(25,"25");
+      diaElemBar bar2(65,"65");
+      diaElem *elems[]={&bar1,&bar2   };
+  if(diaFactoryRun("Test FileRead",2,elems))
+  {
+    *rval = BOOLEAN_TO_JSVAL(1);
+    
+  }else
+    *rval = BOOLEAN_TO_JSVAL(0);
+  
+  return JS_TRUE;
+}
+#endif
+void clickMe(void *cookie)
+{
+  GUI_Error_HIG("Button","Button pressed!"); 
+}
+JSBool facButton(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval)
+{
+    
+      diaElemButton bar1("Button",clickMe,NULL);
+      diaElem *elems[]={&bar1   };
+  if(diaFactoryRun("Test Button",1,elems))
+  {
+    *rval = BOOLEAN_TO_JSVAL(1);
+    
+  }else
+    *rval = BOOLEAN_TO_JSVAL(0);
+  
+  return JS_TRUE;
+}
+JSBool facSlider(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval)
+{
+  int32_t val=4;
+      diaElemSlider slide(&val,"foo", 0,10);
+      
+      diaElem *elems[]={&slide   };
+  if(diaFactoryRun("Test Slider",1,elems))
+  {
+    *rval = BOOLEAN_TO_JSVAL(1);
+    
+  }else
+    *rval = BOOLEAN_TO_JSVAL(0);
+  
+  return JS_TRUE;
+}
+JSBool facRoText(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval)
+{
+    
+      diaElemReadOnlyText txt("blah blah","Value:");
+      
+      diaElem *elems[]={&txt   };
+  if(diaFactoryRun("Test FileRead",1,elems))
+  {
+    *rval = BOOLEAN_TO_JSVAL(1);
+    
+  }else
+    *rval = BOOLEAN_TO_JSVAL(0);
+  
+  return JS_TRUE;
+}
+JSBool facText(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval)
+{
+    
+      char *foo=ADM_strdup("blah");
+      diaElemText txt(&foo,"Text",NULL);
+      
+      diaElem *elems[]={&txt   };
+  if(diaFactoryRun("Test FileRead",1,elems))
+  {
+    *rval = BOOLEAN_TO_JSVAL(1);
+    
+  }else
+    *rval = BOOLEAN_TO_JSVAL(0);
+  
+  return JS_TRUE;
+}
+
+JSBool facTab(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval)
+{
+    
+      uint32_t test,test2;
+      
+      diaElemReadOnlyText txt("blah blah","Value:");
+      diaElemUInteger     bt(&test,"Entry",0,10);
+      diaElemUInteger     bt2(&test2,"Entry",0,10);
+      
+      
+      diaElem *elems1[]={&txt   };
+      diaElem *elems2[]={&bt,&bt2   };
+      
+      diaElemTabs tab1("T1",1,(diaElem **)elems1);
+      diaElemTabs tab2("T2",2,(diaElem **)elems2);
+      
+      diaElemTabs *tabs[2]={&tab1,&tab2};
+          
+      
+  if(diaFactoryRunTabs("Test FileRead",2,tabs))
+  {
+    *rval = BOOLEAN_TO_JSVAL(1);
+    
+  }else
+    *rval = BOOLEAN_TO_JSVAL(0);
+  
+  return JS_TRUE;
+}
+JSBool facFrame(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval)
+{
+    
+      uint32_t test,test2;
+      
+      diaElemReadOnlyText align("*****","Value:");
+      diaElemReadOnlyText txt("blah blah","Value:");
+      diaElemUInteger     bt(&test,"Entry1",0,10);
+      diaElemUInteger     bt2(&test2,"Entry2",0,10);
+      diaElemFrame        frm("Frame1");
+      
+      frm.swallow(&txt);
+      frm.swallow(&bt);
+      frm.swallow(&bt2);
+      
+         diaElem *elems[]={&align,&frm   };
+  if(diaFactoryRun("Test frame",2,elems))
+  {
+    *rval = BOOLEAN_TO_JSVAL(1);
+    
+  }else
+    *rval = BOOLEAN_TO_JSVAL(0);
+  
+  return JS_TRUE;
+      
+      
+}
+
+
+JSBool facHex(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval)
+{
+    
+      uint8_t data[100];
+      for(int i=0;i<100;i++) data[i]=i;
+      
+      diaElemHex binhex("*****",100,data);
+      
+      
+         diaElem *elems[]={&binhex   };
+  if(diaFactoryRun("Test binHex",1,elems))
+  {
+    *rval = BOOLEAN_TO_JSVAL(1);
+    
+  }else
+    *rval = BOOLEAN_TO_JSVAL(0);
+  
+  return JS_TRUE;
+      
+      
+}
+JSBool facMatrix(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval)
+{
+    
+      uint8_t data[16];
+      for(int i=0;i<100;i++) data[i]=i;
+      
+      diaElemMatrix Matrix(data,"Matrix",4);
+      
+      
+         diaElem *elems[]={&Matrix   };
+  if(diaFactoryRun("Test Matrix",1,elems))
+  {
+    *rval = BOOLEAN_TO_JSVAL(1);
+    
+  }else
+    *rval = BOOLEAN_TO_JSVAL(0);
+  
+  for(int x=0;x<4*4;x++)
+  {
+	  if(x && !(x&3)) printf("\n");
+	  printf("%02x ",data[x]);
+	  
+  }
+  
+  return JS_TRUE;
+      
+      
+}
+JSBool facThreadCount(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval)
+{
+	uint32_t val=1;
+	diaElemThreadCount threadcount(&val,"ThreadCount");
+      
+    diaElem *elems[]={&threadcount   };
+    
+  if(diaFactoryRun("Test ThreadCount",1,elems))
+  {
+    *rval = BOOLEAN_TO_JSVAL(1);
+    
+  }else
+    *rval = BOOLEAN_TO_JSVAL(0);
+  return JS_TRUE;
+      
+}
+JSBool facNotch(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval)
+{
+    
+	diaElemNotch notch(1,"Notch");
+      
+         diaElem *elems[]={&notch   };
+  if(diaFactoryRun("Test Notch",1,elems))
+  {
+    *rval = BOOLEAN_TO_JSVAL(1);
+    
+  }else
+    *rval = BOOLEAN_TO_JSVAL(0);
+  return JS_TRUE;
+      
+      
+}
+
+//EOF 

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script/CMakeLists.txt	2009-06-27 17:52:21 UTC (rev 4968)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script/CMakeLists.txt	2009-06-28 17:47:45 UTC (rev 4969)
@@ -1,6 +1,7 @@
 SET(ADM_script_SRCS
 	ADM_AvidemuxAudio.cpp  ADM_AvidemuxVideo.cpp    ADM_JSAvidemux.cpp       ADM_JSDirectorySearch.cpp  ADM_JSGlobal.cpp
-	ADM_Avidemux.cpp       ADM_JSAvidemuxAudio.cpp  ADM_JSAvidemuxVideo.cpp  ADM_JSFunctions.cpp        DirectorySearch.cpp)
+	ADM_Avidemux.cpp       ADM_JSAvidemuxAudio.cpp  ADM_JSAvidemuxVideo.cpp  ADM_JSFunctions.cpp        DirectorySearch.cpp
+        ADM_JSFunctionsNonRegFactory.cpp)
 
 ADD_LIBRARY(ADM_script STATIC ${ADM_script_SRCS})
 ADD_TARGET_CFLAGS(ADM_script "-DJS_THREADSAFE -DXP_UNIX")



From mean at mail.berlios.de  Sun Jun 28 19:47:46 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sun, 28 Jun 2009 19:47:46 +0200
Subject: [Avidemux-svn-commit] r4970 -
	branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/ffMpeg4
Message-ID: <200906281747.n5SHlkZX018058@sheep.berlios.de>

Author: mean
Date: 2009-06-28 19:47:46 +0200 (Sun, 28 Jun 2009)
New Revision: 4970

Modified:
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/ffMpeg4/ADM_ffMpeg4.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/ffMpeg4/ADM_ffMpeg4.h
Log:
[plugin/ffmpeg4] update info + fix trellis

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/ffMpeg4/ADM_ffMpeg4.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/ffMpeg4/ADM_ffMpeg4.cpp	2009-06-28 17:47:45 UTC (rev 4969)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/ffMpeg4/ADM_ffMpeg4.cpp	2009-06-28 17:47:46 UTC (rev 4970)
@@ -119,18 +119,33 @@
             return false;
     }
     int sz=0;
+    _frame.reordered_opaque=image->Pts;
     if ((sz = avcodec_encode_video (_context, out->data, out->bufferSize, &_frame)) < 0)
     {
-        printf("[jpeg] Error %d encoding video\n",sz);
+        printf("[ffmpeg4] Error %d encoding video\n",sz);
         return false;
     }
+    postEncode(out,sz);
     
-    out->len=sz;
-#warning     Update pts dts
+    return true;
+}
+/**
+        \fn postEncode
+        \brief update bitstream info from output of lavcodec
+*/
+bool ADM_ffMpeg4Encoder::postEncode(ADMBitstream *out, uint32_t size)
+{
 
+    out->len=size;
+    out->flags=0;
+    if(_frame.key_frame) 
+        out->flags=AVI_KEY_FRAME;
+    else if(_frame.pict_type==FF_B_TYPE)
+            out->flags=AVI_B_FRAME;
     out->pts=out->dts=image->Pts;
-    //if(_frame.
-    out->flags=AVI_KEY_FRAME;
+    // Update PTS/Dts
+    out->pts=_frame.reordered_opaque;
+    out->dts=-1; // FIXME
     return true;
 }
 /**
@@ -190,9 +205,8 @@
       
       SETX (_4MV);
       SETX (_QPEL);
-#warning FIXME TRELLIS
+      if(set->_TRELLIS_QUANT) _context->trellis=1;
       //SETX(_HQ);
-      //SETX (_TRELLIS_QUANT);
       //SETX (_NORMALIZE_AQP);
 
       if (set->widescreen)

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/ffMpeg4/ADM_ffMpeg4.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/ffMpeg4/ADM_ffMpeg4.h	2009-06-28 17:47:45 UTC (rev 4969)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/ffMpeg4/ADM_ffMpeg4.h	2009-06-28 17:47:46 UTC (rev 4970)
@@ -89,6 +89,7 @@
 protected:
                int              plane;
                bool            presetContext(FFcodecSetting *set);
+               bool            postEncode(ADMBitstream *out, uint32_t size);
 public:
 
                            ADM_ffMpeg4Encoder(ADM_coreVideoFilter *src);



From mean at mail.berlios.de  Sun Jun 28 19:47:49 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sun, 28 Jun 2009 19:47:49 +0200
Subject: [Avidemux-svn-commit] r4971 -
	branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script
Message-ID: <200906281747.n5SHln6T018071@sheep.berlios.de>

Author: mean
Date: 2009-06-28 19:47:48 +0200 (Sun, 28 Jun 2009)
New Revision: 4971

Modified:
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script/ADM_JSFunctions.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script/ADM_JSFunctionsNonRegFactory.cpp
Log:
[factory] Re-enable js function to check bar diaElem

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script/ADM_JSFunctions.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script/ADM_JSFunctions.cpp	2009-06-28 17:47:46 UTC (rev 4970)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script/ADM_JSFunctions.cpp	2009-06-28 17:47:48 UTC (rev 4971)
@@ -112,7 +112,7 @@
   {"dialogFactoryMenu",         facMenu,          0},
   {"dialogFactoryFileSel",      facFile,          0},
   {"dialogFactoryBitrate",      facBitrate,       0},
-//  {"dialogFactoryBar",        facBar,             0},
+  {"dialogFactoryBar",        facBar,             0},
   {"dialogFactoryRoText",     facRoText,          0},
   {"dialogFactoryText",       facText,            0},
   {"dialogFactoryTabs",       facTab,             0},

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script/ADM_JSFunctionsNonRegFactory.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script/ADM_JSFunctionsNonRegFactory.cpp	2009-06-28 17:47:46 UTC (rev 4970)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script/ADM_JSFunctionsNonRegFactory.cpp	2009-06-28 17:47:48 UTC (rev 4971)
@@ -204,7 +204,7 @@
     *rval = BOOLEAN_TO_JSVAL(0);
   return JS_TRUE;
 }
-#if 0
+
 JSBool facBar(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval)
 {
     
@@ -220,7 +220,7 @@
   
   return JS_TRUE;
 }
-#endif
+
 void clickMe(void *cookie)
 {
   GUI_Error_HIG("Button","Button pressed!"); 



From mean at mail.berlios.de  Sun Jun 28 19:47:51 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sun, 28 Jun 2009 19:47:51 +0200
Subject: [Avidemux-svn-commit] r4972 -
	branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/ffMpeg4
Message-ID: <200906281747.n5SHlpDx018081@sheep.berlios.de>

Author: mean
Date: 2009-06-28 19:47:51 +0200 (Sun, 28 Jun 2009)
New Revision: 4972

Modified:
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/ffMpeg4/ADM_ffMpeg4.cpp
Log:
[plugin/mpeg4ff] Slightly better get info from encoded frame

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/ffMpeg4/ADM_ffMpeg4.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/ffMpeg4/ADM_ffMpeg4.cpp	2009-06-28 17:47:48 UTC (rev 4971)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/ffMpeg4/ADM_ffMpeg4.cpp	2009-06-28 17:47:51 UTC (rev 4972)
@@ -126,7 +126,7 @@
         return false;
     }
     postEncode(out,sz);
-    
+    printf("[ffMpeg4] Out Quant :%d\n",out->out_quantizer);
     return true;
 }
 /**
@@ -146,6 +146,12 @@
     // Update PTS/Dts
     out->pts=_frame.reordered_opaque;
     out->dts=-1; // FIXME
+
+    // Update quant
+    if(!_context->coded_frame->quality)
+      out->out_quantizer=(int) floor (_frame.quality / (float) FF_QP2LAMBDA);
+    else
+      out->out_quantizer =(int) floor (_context->coded_frame->quality / (float) FF_QP2LAMBDA);
     return true;
 }
 /**



From mean at mail.berlios.de  Sun Jun 28 19:47:55 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sun, 28 Jun 2009 19:47:55 +0200
Subject: [Avidemux-svn-commit] r4973 - in branches/avidemux_2.6_branch_mean:
	avidemux/gtk/ADM_UIs/include avidemux/gtk/ADM_UIs/src
	avidemux/qt4/ADM_UIs/include avidemux/qt4/ADM_UIs/src
	avidemux_core/ADM_coreImage/include
	avidemux_core/ADM_coreUI/include avidemux_core/ADM_coreUI/src
Message-ID: <200906281747.n5SHltMK018091@sheep.berlios.de>

Author: mean
Date: 2009-06-28 19:47:53 +0200 (Sun, 28 Jun 2009)
New Revision: 4973

Added:
   branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_UIs/include/ADM_dialogFactoryQt4.h
   branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_UIs/include/ADM_toolkitQt.h
   branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_UIs/src/FAC_aspectRatio.cpp
   branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_UIs/src/T_notch.cpp
   branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_UIs/src/T_notch.h
   branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_UIs/src/toolkit.cpp
Modified:
   branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_UIs/include/DIA_flyDialogGtk.h
   branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_UIs/src/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_UIs/src/DIA_dialogFactory.cpp
   branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_UIs/src/DIA_filesel.cpp
   branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_UIs/src/DIA_flyDialogGtk.cpp
   branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_UIs/src/FAC_bar.cpp
   branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_UIs/src/FAC_bitrate.cpp
   branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_UIs/src/FAC_button.cpp
   branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_UIs/src/FAC_float.cpp
   branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_UIs/src/FAC_frame.cpp
   branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_UIs/src/FAC_hex.cpp
   branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_UIs/src/FAC_integer.cpp
   branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_UIs/src/FAC_matrix.cpp
   branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_UIs/src/FAC_menu.cpp
   branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_UIs/src/FAC_notch.cpp
   branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_UIs/src/FAC_readOnlyText.cpp
   branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_UIs/src/FAC_slider.cpp
   branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_UIs/src/FAC_threadCount.cpp
   branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_UIs/src/FAC_toggle.cpp
   branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_UIs/src/toolkit_dialog.cpp
   branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_UIs/include/DIA_flyDialogQt4.h
   branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_UIs/include/DIA_flyDialogQt4_template.h
   branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_UIs/src/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_UIs/src/FAC_bar.cpp
   branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_UIs/src/FAC_float.cpp
   branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_UIs/src/FAC_frame.cpp
   branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_UIs/src/FAC_hex.cpp
   branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_UIs/src/FAC_integer.cpp
   branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_UIs/src/FAC_matrix.cpp
   branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_UIs/src/FAC_readOnlyText.cpp
   branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_UIs/src/T_bitrate.cpp
   branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_UIs/src/T_bitrate.h
   branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_UIs/src/T_button.cpp
   branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_UIs/src/T_dialogFactory.cpp
   branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_UIs/src/T_filesel.cpp
   branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_UIs/src/T_filesel.h
   branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_UIs/src/T_flyDialogQt4.cpp
   branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_UIs/src/T_menu.cpp
   branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_UIs/src/T_menu.h
   branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_UIs/src/T_slider.cpp
   branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_UIs/src/T_slider.h
   branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_UIs/src/T_threadCount.cpp
   branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_UIs/src/T_threadCount.h
   branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_UIs/src/T_toggle.cpp
   branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_UIs/src/T_toggle.h
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreImage/include/DIA_flyDialog.h
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUI/include/DIA_factory.h
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUI/include/DIA_factoryStubs.h
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUI/src/DIA_factory.cpp
Log:
[UI/All] Merge change from 2.5 concerning dialogFactory (GTK/QT4)

Modified: branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_UIs/include/DIA_flyDialogGtk.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_UIs/include/DIA_flyDialogGtk.h	2009-06-28 17:47:51 UTC (rev 4972)
+++ branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_UIs/include/DIA_flyDialogGtk.h	2009-06-28 17:47:53 UTC (rev 4973)
@@ -37,7 +37,6 @@
   virtual uint32_t sliderGet(void);
   virtual uint8_t  sliderSet(uint32_t value);
   virtual void    postInit(uint8_t reInit);
-  virtual uint8_t    sliderChanged(void) {return 0;};
-  };
+};
 
 #endif

Modified: branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_UIs/src/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_UIs/src/CMakeLists.txt	2009-06-28 17:47:51 UTC (rev 4972)
+++ branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_UIs/src/CMakeLists.txt	2009-06-28 17:47:53 UTC (rev 4973)
@@ -28,5 +28,4 @@
 ADD_LIBRARY(${ADM_LIB} SHARED ${${ADM_LIB}_SRCS})
 TARGET_LINK_LIBRARIES(${ADM_LIB} ${GTK_LDFLAGS} ADM_core ADM_coreUI ADM_render_gtk)
 ADD_TARGET_CFLAGS(${ADM_LIB} ${GTK_CFLAGS})
-ADD_SOURCE_CFLAGS(DIA_flyDialogGtk.cpp " -DADM_UI_TYPE_BUILD=2")
-ADM_INSTALL_LIB( ${ADM_LIB})
+ADM_INSTALL_LIB( ${ADM_LIB} )

Modified: branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_UIs/src/DIA_dialogFactory.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_UIs/src/DIA_dialogFactory.cpp	2009-06-28 17:47:51 UTC (rev 4972)
+++ branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_UIs/src/DIA_dialogFactory.cpp	2009-06-28 17:47:53 UTC (rev 4973)
@@ -308,7 +308,7 @@
 extern void 	gtkDeleteButton(diaElem *e);
 extern diaElem  *gtkCreateBar(uint32_t percent,const char *toggleTitle);
 extern void     gtkDeleteBar(diaElem *e);
-extern diaElem  *gtkCreateFloat(ELEM_TYPE_FLOAT *intValue,const char *toggleTitle, ELEM_TYPE_FLOAT min, ELEM_TYPE_FLOAT max,const char *tip);
+extern diaElem  *gtkCreateFloat(ELEM_TYPE_FLOAT *intValue,const char *toggleTitle, ELEM_TYPE_FLOAT min, ELEM_TYPE_FLOAT max,const char *tip, int decimals);
 extern void     gtkDeleteFloat(diaElem *e);
 extern CREATE_INTEGER_T  gtkCreateInteger;
 extern CREATE_UINTEGER_T gtkCreateUInteger;

Modified: branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_UIs/src/DIA_filesel.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_UIs/src/DIA_filesel.cpp	2009-06-28 17:47:51 UTC (rev 4972)
+++ branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_UIs/src/DIA_filesel.cpp	2009-06-28 17:47:53 UTC (rev 4973)
@@ -33,6 +33,7 @@
   
   void   changeFile(void);
   void   enable(uint32_t onoff);
+  int getRequiredLayout(void);
 };
 class diaElemDirSelect : public diaElemDirSelectBase
 {
@@ -46,6 +47,7 @@
   
   void changeFile(void);
   void   enable(uint32_t onoff);
+  int getRequiredLayout(void);
 };
 static void fileRead(void *w,void *p);
 static void dirSel(void *w,void *p);
@@ -206,6 +208,8 @@
      gtk_widget_set_sensitive(GTK_WIDGET(wid[1]),onoff);  
 }
 
+int diaElemFile::getRequiredLayout(void) { return 0; }
+
 void fileRead(void *w,void *p)
 {
   diaElemFile *me=(diaElemFile *)p;
@@ -335,6 +339,8 @@
 
 }
 
+int diaElemDirSelect::getRequiredLayout(void) { return 0; }
+
 void dirSel(void *w,void *p)
 {
   diaElemDirSelect *me=(diaElemDirSelect *)p;

Modified: branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_UIs/src/DIA_flyDialogGtk.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_UIs/src/DIA_flyDialogGtk.cpp	2009-06-28 17:47:51 UTC (rev 4972)
+++ branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_UIs/src/DIA_flyDialogGtk.cpp	2009-06-28 17:47:53 UTC (rev 4973)
@@ -38,7 +38,7 @@
                               void *canvas, void *slider, int yuv, ResizeMethod resizeMethod):
                                 ADM_flyDialog(width,height,in,canvas,slider,yuv,resizeMethod)
   {
-  
+		EndConstructor();
   }
 void ADM_flyDialogGtk::postInit(uint8_t reInit)
 {

Modified: branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_UIs/src/FAC_bar.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_UIs/src/FAC_bar.cpp	2009-06-28 17:47:51 UTC (rev 4972)
+++ branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_UIs/src/FAC_bar.cpp	2009-06-28 17:47:53 UTC (rev 4973)
@@ -27,6 +27,7 @@
   virtual ~diaElemBar() ;
   void setMe(void *dialog, void *opaque,uint32_t line);
   void getMe(void);
+  int getRequiredLayout(void);
 };
 
 diaElemBar::diaElemBar(uint32_t percent,const char *toggleTitle)
@@ -73,6 +74,8 @@
 {
   
 }
+
+int diaElemBar::getRequiredLayout(void) { return 0; }
 } // End of namespace
 //****************************Hoook*****************
 

Modified: branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_UIs/src/FAC_bitrate.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_UIs/src/FAC_bitrate.cpp	2009-06-28 17:47:51 UTC (rev 4972)
+++ branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_UIs/src/FAC_bitrate.cpp	2009-06-28 17:47:53 UTC (rev 4973)
@@ -29,6 +29,7 @@
   void setMaxQz(uint32_t qz);
   void setMinQz(uint32_t qz);
   void updateMe(void);
+  int getRequiredLayout(void);
 };
 
 static void cb_mod(void *w,void *p);
@@ -257,6 +258,9 @@
   }
   memcpy(param,&copy,sizeof(copy));
 }
+
+int diaElemBitrate::getRequiredLayout(void) { return 0; }
+
 void diaElemBitrate::updateMe(void)
 {
   // Read current value

Modified: branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_UIs/src/FAC_button.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_UIs/src/FAC_button.cpp	2009-06-28 17:47:51 UTC (rev 4972)
+++ branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_UIs/src/FAC_button.cpp	2009-06-28 17:47:53 UTC (rev 4973)
@@ -31,6 +31,7 @@
   void      setMe(void *dialog, void *opaque,uint32_t line);
   void      getMe(void);
   void      enable(uint32_t onoff) ;
+  int getRequiredLayout(void);
 };
 
 
@@ -74,6 +75,8 @@
   gtk_widget_set_sensitive(GTK_WIDGET(myWidget),onoff);  
 }
 
+int diaElemButton::getRequiredLayout(void) { return 0; }
+
 void cb_button (GtkWidget *widget,gpointer callback_data)
 {
   diaElemButton *button=(diaElemButton *)callback_data;

Modified: branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_UIs/src/FAC_float.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_UIs/src/FAC_float.cpp	2009-06-28 17:47:51 UTC (rev 4972)
+++ branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_UIs/src/FAC_float.cpp	2009-06-28 17:47:53 UTC (rev 4973)
@@ -22,19 +22,22 @@
 
 class diaElemFloat : public diaElem
 {
+protected:
+	int decimals;
 
 public:
   ELEM_TYPE_FLOAT min,max;
   diaElemFloat(ELEM_TYPE_FLOAT *intValue,const char *toggleTitle, ELEM_TYPE_FLOAT min, 
-               ELEM_TYPE_FLOAT max,const char *tip=NULL);
+               ELEM_TYPE_FLOAT max,const char *tip=NULL, int decimals = 2);
   virtual ~diaElemFloat() ;
   void setMe(void *dialog, void *opaque,uint32_t line);
   void getMe(void);
   void      enable(uint32_t onoff) ;
+  int getRequiredLayout(void);
 };
 
 diaElemFloat::diaElemFloat(ELEM_TYPE_FLOAT *intValue,const char *toggleTitle, 
-                            ELEM_TYPE_FLOAT min, ELEM_TYPE_FLOAT max,const char *tip)
+                            ELEM_TYPE_FLOAT min, ELEM_TYPE_FLOAT max,const char *tip, int decimals)
   : diaElem(ELEM_FLOAT)
 {
   param=(void *)intValue;
@@ -42,6 +45,7 @@
   this->min=min;
   this->max=max;
   this->tip=tip;
+  this->decimals = decimals;
 }
 
 diaElemFloat::~diaElemFloat()
@@ -98,13 +102,15 @@
   GtkWidget *widget=(GtkWidget *)myWidget;
   gtk_widget_set_sensitive(GTK_WIDGET(myWidget),onoff);
 }
+
+int diaElemFloat::getRequiredLayout(void) { return 0; }
 } // End of namespace
 //****************************Hoook*****************
 
 diaElem  *gtkCreateFloat(ELEM_TYPE_FLOAT *intValue,const char *toggleTitle, ELEM_TYPE_FLOAT min,
-        ELEM_TYPE_FLOAT max,const char *tip)
+        ELEM_TYPE_FLOAT max,const char *tip, int decimals)
 {
-	return new  ADM_GtkFactory::diaElemFloat(intValue,toggleTitle,min,max,tip);
+	return new  ADM_GtkFactory::diaElemFloat(intValue,toggleTitle,min,max,tip, decimals);
 }
 void gtkDeleteFloat(diaElem *e)
 {

Modified: branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_UIs/src/FAC_frame.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_UIs/src/FAC_frame.cpp	2009-06-28 17:47:51 UTC (rev 4972)
+++ branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_UIs/src/FAC_frame.cpp	2009-06-28 17:47:53 UTC (rev 4973)
@@ -29,6 +29,7 @@
   void swallow(diaElem *widget);
   void enable(uint32_t onoff);
   void finalize(void);
+  int getRequiredLayout(void);
 };
 diaElemFrame::diaElemFrame(const char *toggleTitle, const char *tip)
   : diaElemFrameBase()
@@ -115,6 +116,8 @@
    GtkWidget *widget=(GtkWidget *)myWidget;
    gtk_widget_set_sensitive(GTK_WIDGET(myWidget),onoff);
 }
+
+int diaElemFrame::getRequiredLayout(void) { return 0; }
 } // End of namespace
 //****************************Hoook*****************
 
@@ -128,4 +131,3 @@
 	delete a;
 }
 //EOF
-//EOF

Modified: branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_UIs/src/FAC_hex.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_UIs/src/FAC_hex.cpp	2009-06-28 17:47:51 UTC (rev 4972)
+++ branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_UIs/src/FAC_hex.cpp	2009-06-28 17:47:53 UTC (rev 4973)
@@ -29,6 +29,7 @@
   void setMe(void *dialog, void *opaque,uint32_t line);
   void getMe(void) ;
   void finalize(void);
+  int getRequiredLayout(void);
 };
 
 #define HEX_NB_LINE   8
@@ -226,6 +227,8 @@
 
 };
 
+int diaElemHex::getRequiredLayout(void) { return 0; }
+
 } // End of namespace
 //****************************Hoook*****************
 
@@ -239,6 +242,3 @@
 	delete a;
 }
 //EOF
-
-
-//EOF

Modified: branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_UIs/src/FAC_integer.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_UIs/src/FAC_integer.cpp	2009-06-28 17:47:51 UTC (rev 4972)
+++ branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_UIs/src/FAC_integer.cpp	2009-06-28 17:47:53 UTC (rev 4973)
@@ -30,6 +30,7 @@
   void setMe(void *dialog, void *opaque,uint32_t line);
   void getMe(void);
   void      enable(uint32_t onoff) ;
+  int getRequiredLayout(void);
 };
 /* Same but unsigned */
 class diaElemUInteger : public diaElem
@@ -42,6 +43,7 @@
   void setMe(void *dialog, void *opaque,uint32_t line);
   void getMe(void);
   void      enable(uint32_t onoff) ;
+  int getRequiredLayout(void);
   
 };
 
@@ -114,6 +116,8 @@
   gtk_widget_set_sensitive(GTK_WIDGET(myWidget),onoff);
 }
 
+int diaElemInteger::getRequiredLayout(void) { return 0; }
+
 //**********************************************************************************
 
 diaElemUInteger::diaElemUInteger(uint32_t *intValue,const char *toggleTitle, uint32_t min, uint32_t max,const char *tip)
@@ -186,6 +190,8 @@
   gtk_widget_set_sensitive(GTK_WIDGET(myWidget),onoff);
 }
 
+int diaElemUInteger::getRequiredLayout(void) { return 0; }
+
 //****************************************************
 } // End of namespace
 //****************************Hoook*****************

Modified: branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_UIs/src/FAC_matrix.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_UIs/src/FAC_matrix.cpp	2009-06-28 17:47:51 UTC (rev 4972)
+++ branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_UIs/src/FAC_matrix.cpp	2009-06-28 17:47:53 UTC (rev 4973)
@@ -28,6 +28,7 @@
   void      setMe(void *dialog, void *opaque,uint32_t line);
   void      getMe(void);
   void      enable(uint32_t onoff) ;
+  int getRequiredLayout(void);
 };
 
 diaElemMatrix::diaElemMatrix(uint8_t *trix,const char *toggleTitle, uint32_t trixSize,const char *tip)
@@ -128,6 +129,8 @@
 			  gtk_widget_set_sensitive( GTK_WIDGET(arrayWidget[index++]),onoff);
 		  }
 }
+
+int diaElemMatrix::getRequiredLayout(void) { return 0; }
 } // End of namespace
 //****************************Hoook*****************
 

Modified: branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_UIs/src/FAC_menu.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_UIs/src/FAC_menu.cpp	2009-06-28 17:47:51 UTC (rev 4972)
+++ branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_UIs/src/FAC_menu.cpp	2009-06-28 17:47:53 UTC (rev 4973)
@@ -37,6 +37,7 @@
   virtual void      updateMe(void);
   virtual void      enable(uint32_t onoff) ;
   virtual void      finalize(void);
+  int getRequiredLayout(void);
 };
 //**********************
 class diaElemMenu : public diaElemMenuBase
@@ -56,7 +57,8 @@
   virtual uint8_t   link(diaMenuEntry *entry,uint32_t onoff,diaElem *w);
   virtual void      updateMe(void);
   void      enable(uint32_t onoff) ;
-  void      finalize(void);;
+  void      finalize(void);
+  int getRequiredLayout(void);
 };
 //**********************
 diaElemMenu::diaElemMenu(uint32_t *intValue,const char *itle, uint32_t nb, 
@@ -116,6 +118,9 @@
 {
   dyna->finalize();
 }
+
+int diaElemMenu::getRequiredLayout(void) { return 0; }
+
 //*******************************
 diaElemMenuDynamic::diaElemMenuDynamic(uint32_t *intValue,const char *itle, uint32_t nb, 
                 diaMenuEntryDynamic **menu,const char *tip)
@@ -249,6 +254,9 @@
 {
   gtk_widget_set_sensitive(GTK_WIDGET(myWidget),onoff);  
 }
+
+int diaElemMenuDynamic::getRequiredLayout(void) { return 0; }
+
 //** C callback **
 void cb_menu(void *w,void *p)
 {

Modified: branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_UIs/src/FAC_notch.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_UIs/src/FAC_notch.cpp	2009-06-28 17:47:51 UTC (rev 4972)
+++ branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_UIs/src/FAC_notch.cpp	2009-06-28 17:47:53 UTC (rev 4973)
@@ -29,6 +29,7 @@
   virtual ~diaElemNotch() ;
   void setMe(void *dialog, void *opaque,uint32_t line);
   void getMe(void) {};
+  int getRequiredLayout(void);
 };
 
 
@@ -71,7 +72,8 @@
                     (GtkAttachOptions) (0), 0, 0);
   
 }
-//****************************************************
+
+int diaElemNotch::getRequiredLayout(void) { return 0; }
 } // End of namespace
 //****************************Hoook*****************
 

Modified: branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_UIs/src/FAC_readOnlyText.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_UIs/src/FAC_readOnlyText.cpp	2009-06-28 17:47:51 UTC (rev 4972)
+++ branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_UIs/src/FAC_readOnlyText.cpp	2009-06-28 17:47:53 UTC (rev 4973)
@@ -27,7 +27,7 @@
   virtual ~diaElemReadOnlyText() ;
   void setMe(void *dialog, void *opaque,uint32_t line);
   void getMe(void);
-  
+  int getRequiredLayout(void);
 };
 
 class diaElemText : public diaElem
@@ -40,6 +40,7 @@
   void setMe(void *dialog, void *opaque,uint32_t line);
   void getMe(void);
   void enable(uint32_t onoff);
+  int getRequiredLayout(void);
 };
 
 
@@ -90,6 +91,9 @@
  
   
 }
+
+int diaElemReadOnlyText::getRequiredLayout(void) { return 0; }
+
 /***************************************************************/
 diaElemText::diaElemText(char **text,const char *toggleTitle,const char *tip)
   : diaElem(ELEM_ROTEXT)
@@ -148,6 +152,8 @@
   GtkWidget *widget=(GtkWidget *)myWidget;
   gtk_widget_set_sensitive(GTK_WIDGET(myWidget),onoff);
 }
+
+int diaElemText::getRequiredLayout(void) { return 0; }
 } // End of namespace
 //****************************Hoook*****************
 

Modified: branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_UIs/src/FAC_slider.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_UIs/src/FAC_slider.cpp	2009-06-28 17:47:51 UTC (rev 4972)
+++ branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_UIs/src/FAC_slider.cpp	2009-06-28 17:47:53 UTC (rev 4973)
@@ -32,6 +32,7 @@
   void      setMe(void *dialog, void *opaque,uint32_t line);
   void      getMe(void);
   void      enable(uint32_t onoff) ;
+  int getRequiredLayout(void);
   
 };
 class diaElemSlider : public diaElemSliderBase
@@ -46,8 +47,7 @@
   void      setMe(void *dialog, void *opaque,uint32_t line);
   void      getMe(void);
   void      enable(uint32_t onoff) ;
-  
-  
+  int getRequiredLayout(void);
 };
 
 //****************************************************
@@ -137,6 +137,9 @@
   GtkWidget *widget=(GtkWidget *)myWidget;
   gtk_widget_set_sensitive(GTK_WIDGET(myWidget),onoff);
 }
+
+int diaElemSlider::getRequiredLayout(void) { return 0; }
+
 //********************** USLIDER***********
 
 
@@ -224,6 +227,9 @@
   GtkWidget *widget=(GtkWidget *)myWidget;
   gtk_widget_set_sensitive(GTK_WIDGET(myWidget),onoff);
 }
+
+int diaElemUSlider::getRequiredLayout(void) { return 0; }
+
 //****************************************************
 } // End of namespace
 //****************************Hoook*****************

Modified: branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_UIs/src/FAC_threadCount.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_UIs/src/FAC_threadCount.cpp	2009-06-28 17:47:51 UTC (rev 4972)
+++ branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_UIs/src/FAC_threadCount.cpp	2009-06-28 17:47:53 UTC (rev 4973)
@@ -29,6 +29,7 @@
   virtual ~diaElemThreadCount() ;
   void setMe(void *dialog, void *opaque, uint32_t line);
   void getMe(void);
+  int getRequiredLayout(void);
 };
 
 static void customToggled(void *widget, void *userData);
@@ -99,7 +100,7 @@
 	gtk_widget_show (radiobutton3);
 	gtk_box_pack_start (GTK_BOX (hbox2), radiobutton3, TRUE, TRUE, 0);
 
-	spinbutton1_adj = gtk_adjustment_new (2, 2, 32, 1, 10, 10);
+	spinbutton1_adj = gtk_adjustment_new (2, 2, 32, 1, 10, 0);
 	spinbutton1 = gtk_spin_button_new (GTK_ADJUSTMENT (spinbutton1_adj), 1, 0);
 	gtk_widget_show (spinbutton1);
 	gtk_box_pack_start (GTK_BOX (hbox2), spinbutton1, TRUE, TRUE, 0);
@@ -137,6 +138,8 @@
 	}
 }
 
+int diaElemThreadCount::getRequiredLayout(void) { return 0; }
+
 void customToggled(void *widget, void *userData)
 {
 	diaElemThreadCount *elem = (diaElemThreadCount*)userData;

Modified: branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_UIs/src/FAC_toggle.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_UIs/src/FAC_toggle.cpp	2009-06-28 17:47:51 UTC (rev 4972)
+++ branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_UIs/src/FAC_toggle.cpp	2009-06-28 17:47:53 UTC (rev 4973)
@@ -30,6 +30,7 @@
   void      finalize(void);
   void      updateMe();
   uint8_t   link(uint32_t onoff,diaElem *w);
+  int getRequiredLayout(void);
 };
 
 class diaElemToggleUint : public diaElem
@@ -48,6 +49,7 @@
   void      enable(uint32_t onoff) ;
   void      finalize(void);
   void      updateMe();
+  int getRequiredLayout(void);
 };
 class diaElemToggleInt : public diaElem
 {
@@ -65,6 +67,7 @@
   void      finalize(void);
   void      updateMe();
   void      enable(uint32_t onoff) ;
+  int getRequiredLayout(void);
 };
 
 static void cb_menu(void *w,void *p);
@@ -156,6 +159,8 @@
   gtk_widget_set_sensitive(GTK_WIDGET(myWidget),onoff);  
 }
 
+int diaElemToggle::getRequiredLayout(void) { return 0; }
+
 //** C callback **
 void cb_menu(void *w,void *p)
 {
@@ -251,6 +256,8 @@
   gtk_widget_set_sensitive(GTK_WIDGET(wuint),onoff);
 }
 
+int diaElemToggleUint::getRequiredLayout(void) { return 0; }
+
 //** C callback **
 void cb_menu2(void *w,void *p)
 {
@@ -321,6 +328,8 @@
   if(*emb>_max) *emb=_max;
 }
 
+int diaElemToggleInt::getRequiredLayout(void) { return 0; }
+
 //** C callback **
 void cb_menu3(void *w,void *p)
 {

Modified: branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_UIs/src/toolkit_dialog.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_UIs/src/toolkit_dialog.cpp	2009-06-28 17:47:51 UTC (rev 4972)
+++ branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_UIs/src/toolkit_dialog.cpp	2009-06-28 17:47:53 UTC (rev 4973)
@@ -47,15 +47,11 @@
         // old one is no longer modal
         if(widgetCount)
         {
-#ifndef __WIN32                
                 gtk_window_set_modal(GTK_WINDOW(widgetStack[widgetCount-1]), 0);
-#endif
                 gtk_window_set_transient_for (GTK_WINDOW(newdialog),GTK_WINDOW(widgetStack[widgetCount-1]));
+				gtk_window_set_modal(GTK_WINDOW(widgetStack[widgetCount]), 1);
         }
-        gtk_window_set_modal(GTK_WINDOW(widgetStack[widgetCount]), 1);
-#ifdef __WIN32
-        gtk_window_set_icon(GTK_WINDOW(widgetStack[widgetCount]), gtk_window_get_icon (GTK_WINDOW(widgetStack[0])));
-#endif
+
         widgetCount++;
 }
 void gtk_unregister_dialog(GtkWidget *newdialog)
@@ -63,15 +59,11 @@
 	ADM_assert(widgetCount);
 	ADM_assert(widgetStack[widgetCount-1]==newdialog);
 	widgetCount--;
-	if(widgetCount)
+	if(widgetCount > 1)
 	{
 		// Reset the old one modal
 		gtk_window_set_modal(GTK_WINDOW(widgetStack[widgetCount-1]), 1);
-#ifdef __WIN32
-		gtk_window_present(GTK_WINDOW(widgetStack[widgetCount-1]));
-#endif
 	}
-
 }
 void		gtk_transient(GtkWidget *widget)
 {

Added: branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_UIs/include/ADM_dialogFactoryQt4.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_UIs/include/ADM_dialogFactoryQt4.h	2009-06-28 17:47:51 UTC (rev 4972)
+++ branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_UIs/include/ADM_dialogFactoryQt4.h	2009-06-28 17:47:53 UTC (rev 4973)
@@ -0,0 +1,2 @@
+#define FAC_QT_GRIDLAYOUT 1
+#define FAC_QT_VBOXLAYOUT 2
\ No newline at end of file

Added: branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_UIs/include/ADM_toolkitQt.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_UIs/include/ADM_toolkitQt.h	2009-06-28 17:47:51 UTC (rev 4972)
+++ branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_UIs/include/ADM_toolkitQt.h	2009-06-28 17:47:53 UTC (rev 4973)
@@ -0,0 +1,8 @@
+#ifndef QT_TOOLKIT_H
+#define QT_TOOLKIT_H
+#include <QtGui/QWidget>
+
+void qtRegisterDialog(QWidget *dialog);
+void qtUnregisterDialog(QWidget *dialog);
+QWidget* qtLastRegisteredDialog();
+#endif

Modified: branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_UIs/include/DIA_flyDialogQt4.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_UIs/include/DIA_flyDialogQt4.h	2009-06-28 17:47:51 UTC (rev 4972)
+++ branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_UIs/include/DIA_flyDialogQt4.h	2009-06-28 17:47:53 UTC (rev 4973)
@@ -19,6 +19,19 @@
 #include "ADM_image.h"
 #include "ADM_videoFilter.h"
 #include "DIA_flyDialog.h"
+
+class FlyDialogEventFilter : public QObject
+{
+	ADM_flyDialog *flyDialog;
+	bool recomputed;
+
+public:
+	FlyDialogEventFilter(ADM_flyDialog *flyDialog);
+
+protected:
+	bool eventFilter(QObject *obj, QEvent *event);
+};
+
 class ADM_flyDialogQt4 : public ADM_flyDialog
 {
 public:
@@ -32,8 +45,6 @@
   virtual uint32_t sliderGet(void);
   virtual uint8_t  sliderSet(uint32_t value);
   virtual void    postInit(uint8_t reInit);
-  virtual uint8_t    sliderChanged(void){return 0;};
-            
 };
 
 

Modified: branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_UIs/include/DIA_flyDialogQt4_template.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_UIs/include/DIA_flyDialogQt4_template.h	2009-06-28 17:47:51 UTC (rev 4972)
+++ branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_UIs/include/DIA_flyDialogQt4_template.h	2009-06-28 17:47:53 UTC (rev 4973)
@@ -46,7 +46,7 @@
  public:
      FLY_NAME *myCrop;
      ADM_QCanvas *canvas;
-     WINDOW_NAME(PARAM_NAME *param,AVDMGenericVideoStream *in);
+     WINDOW_NAME(QWidget *parent, PARAM_NAME *param,AVDMGenericVideoStream *in);
      ~WINDOW_NAME();
      DIALOG_NAME ui;
  public slots:
@@ -88,12 +88,17 @@
 {
         uint8_t ret=0;
         
-        WINDOW_NAME dialog(param,in);        
+        WINDOW_NAME dialog(qtLastRegisteredDialog(), param,in);
+		qtRegisterDialog(&dialog);
+
         if(dialog.exec()==QDialog::Accepted)
         {
             dialog.gather(param); 
             ret=1;
         }
+
+		qtUnregisterDialog(&dialog);
+
         return ret;
 }
 //____________________________________

Modified: branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_UIs/src/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_UIs/src/CMakeLists.txt	2009-06-28 17:47:51 UTC (rev 4972)
+++ branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_UIs/src/CMakeLists.txt	2009-06-28 17:47:53 UTC (rev 4973)
@@ -2,17 +2,17 @@
 
 QT4_WRAP_CPP(${ADM_LIB}_source
 	T_bitrate.h  T_button.h  T_dialogFactory.h  T_filesel.h  T_menu.h  T_slider.h
-	T_threadCount.h  T_toggle.h)
+	T_threadCount.h  T_toggle.h  T_notch.h)
 
 SET(${ADM_LIB}_T
 	T_bitrate.cpp  T_button.cpp  T_dialogFactory.cpp  T_filesel.cpp  T_menu.cpp
-	T_slider.cpp  T_threadCount.cpp  T_toggle.cpp
-        T_flyDialogQt4.cpp T_QCanvas.cpp
+	T_slider.cpp  T_threadCount.cpp  T_toggle.cpp  T_notch.cpp
+    T_flyDialogQt4.cpp T_QCanvas.cpp
 )
 
 SET(${ADM_LIB}_SRCS
-	FAC_bar.cpp    FAC_frame.cpp  FAC_integer.cpp  FAC_notch.cpp
-	FAC_float.cpp  FAC_hex.cpp    FAC_readOnlyText.cpp
+	FAC_bar.cpp    FAC_frame.cpp  FAC_integer.cpp  FAC_aspectRatio.cpp
+	FAC_float.cpp  FAC_hex.cpp    FAC_readOnlyText.cpp  toolkit.cpp
 	FAC_matrix.cpp  DIA_none.cpp  ${${ADM_LIB}_source}  ${${ADM_LIB}_T})
 
 INCLUDE_DIRECTORIES(${CMAKE_CURRENT_BINARY_DIR} ${QT_INCLUDE_DIR})
@@ -20,4 +20,4 @@
 ADD_LIBRARY(${ADM_LIB} SHARED ${${ADM_LIB}_SRCS})
 TARGET_LINK_LIBRARIES(${ADM_LIB} ADM_core ADM_coreUI ${QT_QTGUI_LIBRARY} ${QT_QTCORE_LIBRARY} ADM_render_qt4)
 #INSTALL(TARGETS ${ADM_LIB} RUNTIME DESTINATION ${BIN_DIR}  LIBRARY DESTINATION lib  ARCHIVE DESTINATION lib)
-ADM_INSTALL_LIB( ${ADM_LIB})
+ADM_INSTALL_LIB( ${ADM_LIB} )

Added: branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_UIs/src/FAC_aspectRatio.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_UIs/src/FAC_aspectRatio.cpp	2009-06-28 17:47:51 UTC (rev 4972)
+++ branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_UIs/src/FAC_aspectRatio.cpp	2009-06-28 17:47:53 UTC (rev 4973)
@@ -0,0 +1,123 @@
+/***************************************************************************
+  FAC_aspectRatio.cpp
+  Handle dialog factory element : Aspect Ratio
+  (C) 2008 Gruntster
+***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+
+#include <QtGui/QDialog>
+#include <QtGui/QSpinBox>
+#include <QtGui/QGridLayout>
+#include <QtGui/QLabel>
+
+#include "ADM_default.h"
+#include "DIA_factory.h"
+#include "ADM_dialogFactoryQt4.h"
+
+extern const char *shortkey(const char *);
+
+namespace ADM_qt4Factory
+{
+class diaElemAspectRatio : public diaElem
+{
+public:
+	uint32_t *den;
+	void *denControl, *label;
+
+	diaElemAspectRatio(uint32_t *num, uint32_t *den, const char *title, const char *tip = NULL);
+	virtual ~diaElemAspectRatio();
+	void setMe(void *dialog, void *opaque, uint32_t line);
+	void getMe(void);
+	void enable(uint32_t onoff);
+	int getRequiredLayout(void);
+};
+
+diaElemAspectRatio::diaElemAspectRatio(uint32_t *num, uint32_t *den, const char *title, const char *tip) : diaElem(ELEM_ASPECT_RATIO)
+{
+	param = (void *)num;
+	this->den = den;
+	paramTitle = shortkey(title);
+	this->tip = tip;
+}
+
+diaElemAspectRatio::~diaElemAspectRatio()
+{
+	if(paramTitle)
+		delete paramTitle;
+}
+
+void diaElemAspectRatio::setMe(void *dialog, void *opaque, uint32_t line)
+{
+	QLabel *text = new QLabel(QString::fromUtf8(paramTitle));
+	QSpinBox *numBox = new QSpinBox();
+	QLabel *label = new QLabel(":");
+	QSpinBox *denBox = new QSpinBox();
+	QGridLayout *layout = (QGridLayout*) opaque;
+	QHBoxLayout *hboxLayout = new QHBoxLayout();
+
+	myWidget = (void*)numBox;
+	this->label = (void*)label;
+	this->denControl = (void*)denBox;
+
+	text->setSizePolicy(QSizePolicy::Fixed, QSizePolicy::Fixed);
+	text->setBuddy(numBox);
+
+	numBox->setMinimum(1);
+	numBox->setMaximum(255);
+
+	denBox->setMinimum(1);
+	denBox->setMaximum(255);
+
+	numBox->setValue(*(uint32_t*)param);
+	denBox->setValue(*(uint32_t*)den);
+
+	QSpacerItem *spacer = new QSpacerItem(20, 20, QSizePolicy::Expanding, QSizePolicy::Minimum);
+
+	hboxLayout->addWidget(numBox);
+	hboxLayout->addWidget(label);
+	hboxLayout->addWidget(denBox);
+	hboxLayout->addItem(spacer);
+
+	layout->addWidget(text,line,0);
+	layout->addLayout(hboxLayout,line,1);
+}
+
+void diaElemAspectRatio::getMe(void)
+{
+	*(uint32_t*)param = ((QSpinBox*)myWidget)->value();
+	*(uint32_t*)den = ((QSpinBox*)denControl)->value();
+}
+
+void diaElemAspectRatio::enable(uint32_t onoff) 
+{
+	QSpinBox *numBox = (QSpinBox*)myWidget;
+	QSpinBox *denBox = (QSpinBox*)denControl;
+	QLabel *label = (QLabel*)this->label;
+
+	numBox->setEnabled(onoff);
+	denBox->setEnabled(onoff);
+	label->setEnabled(onoff);
+}
+
+int diaElemAspectRatio::getRequiredLayout(void) { return FAC_QT_GRIDLAYOUT; }
+} // End of namespace
+//****************************Hoook*****************
+
+diaElem  *qt4CreateAspectRatio(uint32_t *num, uint32_t *den, const char *title, const char *tip)
+{
+	return new ADM_qt4Factory::diaElemAspectRatio(num, den, title, tip);
+}
+
+void qt4DestroyAspectRatio(diaElem *e)
+{
+	ADM_qt4Factory::diaElemAspectRatio *a = (ADM_qt4Factory::diaElemAspectRatio *)e;
+	delete a;
+}

Modified: branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_UIs/src/FAC_bar.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_UIs/src/FAC_bar.cpp	2009-06-28 17:47:51 UTC (rev 4972)
+++ branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_UIs/src/FAC_bar.cpp	2009-06-28 17:47:53 UTC (rev 4973)
@@ -20,6 +20,7 @@
 
 #include "ADM_default.h"
 #include "DIA_factory.h"
+#include "ADM_dialogFactoryQt4.h"
 
 extern const char *shortkey(const char *);
 
@@ -35,6 +36,7 @@
   virtual ~diaElemBar() ;
   void setMe(void *dialog, void *opaque,uint32_t line);
   void getMe(void);
+  int getRequiredLayout(void);
 };
 
 //********************************************************************
@@ -69,6 +71,8 @@
 void diaElemBar::getMe(void)
 {
 }
+
+int diaElemBar::getRequiredLayout(void) { return FAC_QT_GRIDLAYOUT; }
 } // nameapsce
 
 diaElem  *qt4CreateBar(uint32_t percent,const char *toggleTitle)

Modified: branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_UIs/src/FAC_float.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_UIs/src/FAC_float.cpp	2009-06-28 17:47:51 UTC (rev 4972)
+++ branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_UIs/src/FAC_float.cpp	2009-06-28 17:47:53 UTC (rev 4973)
@@ -20,6 +20,7 @@
 
 #include "ADM_default.h"
 #include "DIA_factory.h"
+#include "ADM_dialogFactoryQt4.h"
 
 extern const char *shortkey(const char *);
 
@@ -29,20 +30,23 @@
 
 class diaElemFloat : public diaElem
 {
+protected:
+	int decimals;
 
 public:
   ELEM_TYPE_FLOAT min,max;
   diaElemFloat(ELEM_TYPE_FLOAT *intValue,const char *toggleTitle, ELEM_TYPE_FLOAT min, 
-               ELEM_TYPE_FLOAT max,const char *tip=NULL);
+               ELEM_TYPE_FLOAT max,const char *tip=NULL, int decimals = 2);
   virtual ~diaElemFloat() ;
   void setMe(void *dialog, void *opaque,uint32_t line);
   void getMe(void);
   void      enable(uint32_t onoff) ;
+  int getRequiredLayout(void);
 };
 
 
 //********************************************************************
-diaElemFloat::diaElemFloat(ELEM_TYPE_FLOAT *intValue,const char *toggleTitle, ELEM_TYPE_FLOAT min, ELEM_TYPE_FLOAT max,const char *tip)
+diaElemFloat::diaElemFloat(ELEM_TYPE_FLOAT *intValue,const char *toggleTitle, ELEM_TYPE_FLOAT min, ELEM_TYPE_FLOAT max,const char *tip, int decimals)
   : diaElem(ELEM_TOGGLE)
 {
   param=(void *)intValue;
@@ -50,6 +54,7 @@
   this->min=min;
   this->max=max;
   this->tip=tip;
+  this->decimals = decimals;
  }
 
 diaElemFloat::~diaElemFloat()
@@ -61,18 +66,25 @@
 {
   QDoubleSpinBox *box=new QDoubleSpinBox((QWidget *)dialog);
   QGridLayout *layout=(QGridLayout*) opaque;
+  QHBoxLayout *hboxLayout = new QHBoxLayout();
  myWidget=(void *)box; 
    
  box->setMinimum(min);
  box->setMaximum(max);
+ box->setDecimals(decimals);
+ box->setSingleStep(0.1);
  box->setValue(*(ELEM_TYPE_FLOAT *)param);
  
- box->show();
- 
  QLabel *text=new QLabel( QString::fromUtf8(this->paramTitle),(QWidget *)dialog);
  text->setBuddy(box);
+
+ QSpacerItem *spacer = new QSpacerItem(20, 20, QSizePolicy::Expanding, QSizePolicy::Minimum);
+
+ hboxLayout->addWidget(box);
+ hboxLayout->addItem(spacer);
+
  layout->addWidget(text,line,0);
- layout->addWidget(box,line,1);
+ layout->addLayout(hboxLayout,line,1);
  
 }
 void diaElemFloat::getMe(void)
@@ -94,13 +106,15 @@
   else
     box->setDisabled(1);
 }
+
+int diaElemFloat::getRequiredLayout(void) { return FAC_QT_GRIDLAYOUT; }
 } // End of namespace
 //****************************Hoook*****************
 
 diaElem  *qt4CreateFloat(ELEM_TYPE_FLOAT *intValue,const char *toggleTitle, ELEM_TYPE_FLOAT min,
-        ELEM_TYPE_FLOAT max,const char *tip)
+        ELEM_TYPE_FLOAT max,const char *tip, int decimals)
 {
-	return new  ADM_qt4Factory::diaElemFloat(intValue,toggleTitle,min,max,tip);
+	return new  ADM_qt4Factory::diaElemFloat(intValue,toggleTitle,min,max,tip, decimals);
 }
 void qt4DestroyFloat(diaElem *e)
 {

Modified: branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_UIs/src/FAC_frame.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_UIs/src/FAC_frame.cpp	2009-06-28 17:47:51 UTC (rev 4972)
+++ branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_UIs/src/FAC_frame.cpp	2009-06-28 17:47:53 UTC (rev 4973)
@@ -1,6 +1,6 @@
 /***************************************************************************
-  FAC_toggle.cpp
-  Handle dialog factory element : Toggle
+  FAC_frame.cpp
+  Handle dialog factory element : Frame
   (C) 2006 Mean Fixounet at free.fr 
 ***************************************************************************/
 
@@ -16,9 +16,11 @@
 
 #include <QtGui/QGridLayout>
 #include <QtGui/QLabel>
+#include <QtGui/QGroupBox>
 
 #include "ADM_default.h"
 #include "DIA_factory.h"
+#include "ADM_dialogFactoryQt4.h"
 
 extern const char *shortkey(const char *);
 
@@ -37,6 +39,7 @@
   void swallow(diaElem *widget);
   void enable(uint32_t onoff);
   void finalize(void);
+  int getRequiredLayout(void);
 };
 
 diaElemFrame::diaElemFrame(const char *toggleTitle, const char *tip)
@@ -62,30 +65,47 @@
   if(paramTitle)
     delete paramTitle;
 }
+
 void diaElemFrame::setMe(void *dialog, void *opaque,uint32_t line)
 {
-  
-   QGridLayout *layout=(QGridLayout*) opaque;  
-   QGridLayout *layout2;
-   
-   layout2=new QGridLayout((QWidget *)dialog);
-   myWidget=(void *)layout2; 
+	QVBoxLayout *layout = (QVBoxLayout*)opaque;
+	QGroupBox *groupBox = new QGroupBox(QString::fromUtf8(paramTitle));
+	QVBoxLayout *vboxlayout = new QVBoxLayout(groupBox);
+	QLayout *layout2 = NULL;
+	int currentLayout = 0;
+	int v;
 
-    QLabel *text=new QLabel( (QWidget *)dialog);
-    QString string = QString::fromUtf8(paramTitle);
-    
-    string="<b>"+string+"</b>";
-    text->setText(string);
- layout->addWidget(text,line,0);
- layout->addLayout(layout2,line+1,0);
- int  v=0;
-  for(int i=0;i<nbElems;i++)
-  {
-    elems[i]->setMe(dialog,layout2,v); 
-    v+=elems[i]->getSize();
-  }
-  myWidget=(void *)layout2;
+	for (int i = 0; i < nbElems; i++)
+	{
+		if (elems[i]->getRequiredLayout() != currentLayout)
+		{
+			if (layout2)
+				vboxlayout->addLayout(layout2);
+
+			switch (elems[i]->getRequiredLayout())
+			{
+				case FAC_QT_GRIDLAYOUT:
+					layout2 = new QGridLayout();
+					break;
+				case FAC_QT_VBOXLAYOUT:
+					layout2 = new QVBoxLayout();
+					break;
+			}
+
+			currentLayout = elems[i]->getRequiredLayout();
+			v = 0;
+		}
+
+		elems[i]->setMe(groupBox, layout2, v); 
+		v += elems[i]->getSize();
+	}
+
+	if (layout2)
+		vboxlayout->addLayout(layout2);
+
+	layout->addWidget(groupBox);
 }
+
 //*****************************
 void diaElemFrame::getMe(void)
 {
@@ -105,6 +125,8 @@
 {
   
 }
+
+int diaElemFrame::getRequiredLayout(void) { return FAC_QT_VBOXLAYOUT; }
 } // End of namespace
 //****************************Hoook*****************
 

Modified: branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_UIs/src/FAC_hex.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_UIs/src/FAC_hex.cpp	2009-06-28 17:47:51 UTC (rev 4972)
+++ branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_UIs/src/FAC_hex.cpp	2009-06-28 17:47:53 UTC (rev 4973)
@@ -16,6 +16,7 @@
 
 #include "ADM_default.h"
 #include "DIA_factory.h"
+#include "ADM_dialogFactoryQt4.h"
 
 namespace ADM_qt4Factory
 {
@@ -31,6 +32,7 @@
   void setMe(void *dialog, void *opaque,uint32_t line);
   void getMe(void) ;
   void finalize(void);
+  int getRequiredLayout(void);
 };
 extern const char *shortkey(const char *);
   diaElemHex::diaElemHex(const char *toggleTitle, uint32_t dataSize,uint8_t *data) :diaElem(ELEM_HEXDUMP){};
@@ -38,6 +40,7 @@
   void diaElemHex::setMe(void *dialog, void *opaque,uint32_t line) {};
   void diaElemHex::getMe(void) {} ;
   void diaElemHex::finalize(void) {};
+  int diaElemHex::getRequiredLayout(void) { return FAC_QT_GRIDLAYOUT; }
 //******************************************************
 } // End of namespace
 //****************************Hoook*****************

Modified: branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_UIs/src/FAC_integer.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_UIs/src/FAC_integer.cpp	2009-06-28 17:47:51 UTC (rev 4972)
+++ branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_UIs/src/FAC_integer.cpp	2009-06-28 17:47:53 UTC (rev 4973)
@@ -20,6 +20,7 @@
 
 #include "ADM_default.h"
 #include "DIA_factory.h"
+#include "ADM_dialogFactoryQt4.h"
 
 extern const char *shortkey(const char *);
 
@@ -36,6 +37,7 @@
   void setMe(void *dialog, void *opaque,uint32_t line);
   void getMe(void);
   void      enable(uint32_t onoff) ;
+  int getRequiredLayout(void);
 };
 /* Same but unsigned */
 class diaElemUInteger : public diaElem
@@ -48,7 +50,7 @@
   void setMe(void *dialog, void *opaque,uint32_t line);
   void getMe(void);
   void      enable(uint32_t onoff) ;
-  
+  int getRequiredLayout(void);
 };
 
 //********************************************************************
@@ -71,19 +73,24 @@
 {
   QSpinBox *box=new QSpinBox((QWidget *)dialog);
   QGridLayout *layout=(QGridLayout*) opaque;
+  QHBoxLayout *hboxLayout = new QHBoxLayout();
  myWidget=(void *)box; 
    
  box->setMinimum(min);
  box->setMaximum(max);
  box->setValue(*(int32_t *)param);
  
- box->show();
- 
  QLabel *text=new QLabel( QString::fromUtf8(this->paramTitle),(QWidget *)dialog);
+ text->setSizePolicy(QSizePolicy::Fixed, QSizePolicy::Fixed);
  text->setBuddy(box);
+
+ QSpacerItem *spacer = new QSpacerItem(20, 20, QSizePolicy::Expanding, QSizePolicy::Minimum);
+
+ hboxLayout->addWidget(box);
+ hboxLayout->addItem(spacer);
+
  layout->addWidget(text,line,0);
- layout->addWidget(box,line,1);
- 
+ layout->addLayout(hboxLayout,line,1);
 }
 void diaElemInteger::getMe(void)
 {
@@ -104,6 +111,9 @@
   else
     box->setDisabled(1);
 }
+
+int diaElemInteger::getRequiredLayout(void) { return FAC_QT_GRIDLAYOUT; }
+
 //******************************************************
 diaElemUInteger::diaElemUInteger(uint32_t *intValue,const char *toggleTitle, uint32_t min, uint32_t max,const char *tip)
   : diaElem(ELEM_TOGGLE)
@@ -125,18 +135,24 @@
 {
   QSpinBox *box=new QSpinBox((QWidget *)dialog);
   QGridLayout *layout=(QGridLayout*) opaque;
+  QHBoxLayout *hboxLayout = new QHBoxLayout();
  myWidget=(void *)box; 
    
  box->setMinimum(min);
  box->setMaximum(max);
  box->setValue(*(uint32_t *)param);
  
- box->show();
- 
  QLabel *text=new QLabel( QString::fromUtf8(this->paramTitle),(QWidget *)dialog);
+ text->setSizePolicy(QSizePolicy::Fixed, QSizePolicy::Fixed);
  text->setBuddy(box);
+
+ QSpacerItem *spacer = new QSpacerItem(20, 20, QSizePolicy::Expanding, QSizePolicy::Minimum);
+
+ hboxLayout->addWidget(box);
+ hboxLayout->addItem(spacer);
+
  layout->addWidget(text,line,0);
- layout->addWidget(box,line,1);
+ layout->addLayout(hboxLayout,line,1);
 }
 void diaElemUInteger::getMe(void)
 {
@@ -158,6 +174,9 @@
   else
     box->setDisabled(1);
 }
+
+int diaElemUInteger::getRequiredLayout(void) { return FAC_QT_GRIDLAYOUT; }
+
 //********************************************
 //****************************************************
 } // End of namespace

Modified: branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_UIs/src/FAC_matrix.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_UIs/src/FAC_matrix.cpp	2009-06-28 17:47:51 UTC (rev 4972)
+++ branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_UIs/src/FAC_matrix.cpp	2009-06-28 17:47:53 UTC (rev 4973)
@@ -20,6 +20,7 @@
 
 #include "ADM_default.h"
 #include "DIA_factory.h"
+#include "ADM_dialogFactoryQt4.h"
 
 extern const char *shortkey(const char *);
 
@@ -36,6 +37,7 @@
   void      setMe(void *dialog, void *opaque,uint32_t line);
   void      getMe(void);
   void      enable(uint32_t onoff) ;
+  int getRequiredLayout(void);
 };
 
 
@@ -118,6 +120,8 @@
 				  
 			  }
 }
+
+int diaElemMatrix::getRequiredLayout(void) { return FAC_QT_GRIDLAYOUT; }
 }
 //****************************Hoook*****************
 

Modified: branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_UIs/src/FAC_readOnlyText.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_UIs/src/FAC_readOnlyText.cpp	2009-06-28 17:47:51 UTC (rev 4972)
+++ branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_UIs/src/FAC_readOnlyText.cpp	2009-06-28 17:47:53 UTC (rev 4973)
@@ -20,6 +20,7 @@
 
 #include "ADM_default.h"
 #include "DIA_factory.h"
+#include "ADM_dialogFactoryQt4.h"
 
 extern const char *shortkey(const char *);
 
@@ -35,7 +36,7 @@
   virtual ~diaElemReadOnlyText() ;
   void setMe(void *dialog, void *opaque,uint32_t line);
   void getMe(void);
-  
+  int getRequiredLayout(void);
 };
 
 class diaElemText : public diaElem
@@ -48,6 +49,7 @@
   void setMe(void *dialog, void *opaque,uint32_t line);
   void getMe(void);
   void enable(uint32_t onoff);
+  int getRequiredLayout(void);
 };
 
 //********************************************************************
@@ -84,6 +86,9 @@
 
  
 }
+
+int diaElemReadOnlyText::getRequiredLayout(void) { return FAC_QT_GRIDLAYOUT; }
+
 //*********************************
 
 diaElemText::diaElemText(char **text,const char *toggleTitle,const char *tip)
@@ -133,6 +138,8 @@
   else
     lineEdit->setDisabled(TRUE);
 }
+
+int diaElemText::getRequiredLayout(void) { return FAC_QT_GRIDLAYOUT; }
 } // End of namespace
 //****************************Hoook*****************
 
@@ -156,5 +163,3 @@
 	delete a;
 }
 //EOF
-
-//EOF

Modified: branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_UIs/src/T_bitrate.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_UIs/src/T_bitrate.cpp	2009-06-28 17:47:51 UTC (rev 4972)
+++ branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_UIs/src/T_bitrate.cpp	2009-06-28 17:47:53 UTC (rev 4973)
@@ -16,6 +16,7 @@
 #include "T_bitrate.h"
 #include "ADM_default.h"
 #include "DIA_factory.h"
+#include "ADM_dialogFactoryQt4.h"
 
 extern const char *shortkey(const char *);
 
@@ -30,16 +31,16 @@
   void getMe(void);
   void setMaxQz(uint32_t qz);
   void setMinQz(uint32_t qz);
-  
+  int getRequiredLayout(void);
   void updateMe(void);
 };
 
-ADM_Qbitrate::ADM_Qbitrate(QWidget *z,COMPRES_PARAMS *p,uint32_t minQ, uint32_t mq,QGridLayout *layout,int line) : QWidget(z) 
+ADM_Qbitrate::ADM_Qbitrate(COMPRES_PARAMS *p,uint32_t minQ, uint32_t mq,QGridLayout *layout,int line)
 {
 	compress=p;
-	combo=new QComboBox(z);
+	combo=new QComboBox();
 
-	_minQ = minQ;
+	_minQ=minQ;
 	maxQ=mq;
 	int index=0,set=-1;
 #define add(x,z,y) if(compress->capabilities & ADM_ENC_CAP_##x) {combo->addItem(QString::fromUtf8(y));\
@@ -47,37 +48,45 @@
 	index++;}
 
 	add(CBR,CBR,QT_TR_NOOP("Constant Bitrate"));
-	add(CQ,CQ,QT_TR_NOOP("Constant Quality"));
-	add(SAME,SAME,QT_TR_NOOP("Same Quantizer as Input"));
-	add(AQ,AQ,QT_TR_NOOP("Average Quantizer"));
+	add(CQ,CQ,QT_TR_NOOP("Constant Quantiser"));
+	add(SAME,SAME,QT_TR_NOOP("Same Quantiser as Input"));
+	add(AQ,AQ,QT_TR_NOOP("Constant Rate Factor"));
 	add(2PASS,2PASS,QT_TR_NOOP("Two Pass - Video Size"));
 	add(2PASS_BR,2PASS_BITRATE,QT_TR_NOOP("Two Pass - Average Bitrate"));
 
-	combo->show();
-
-	text1=new QLabel( QString::fromUtf8(QT_TR_NOOP("Encoding mode")),z);
+	text1=new QLabel( QString::fromUtf8(QT_TR_NOOP("Encoding mode")));
 	text1->setBuddy(combo);
-	text1->show();
 
-	box=new QSpinBox(z);
-	box->show();
+	box=new QSpinBox();
 
-	text2=new QLabel( QString::fromUtf8(QT_TR_NOOP("Bitrate")),z);
+	text2=new QLabel( QString::fromUtf8(QT_TR_NOOP("Bitrate")));
 	text2->setBuddy(combo);
 
+	QHBoxLayout *hboxLayout = new QHBoxLayout();
+	QHBoxLayout *hboxLayout2 = new QHBoxLayout();
+	QSpacerItem *spacer = new QSpacerItem(20, 20, QSizePolicy::Expanding, QSizePolicy::Minimum);
+	QSpacerItem *spacer2 = new QSpacerItem(20, 20, QSizePolicy::Expanding, QSizePolicy::Minimum);
+
+	hboxLayout->addWidget(combo);
+	hboxLayout->addItem(spacer);
+
 	layout->addWidget(text1,line,0);
-	layout->addWidget(combo,line,1);
+	layout->addItem(hboxLayout,line,1);
 
+	hboxLayout2->addWidget(box);
+	hboxLayout2->addItem(spacer2);
+
 	layout->addWidget(text2,line+1,0);
-	layout->addWidget(box,line+1,1);
+	layout->addItem(hboxLayout2,line+1,1);
 
 	if(set!=-1) 
 	{
 		combo->setCurrentIndex(set);
 		comboChanged(set);
 	}
+	connect(combo, SIGNAL(currentIndexChanged(int )), this, SLOT(comboChanged(int )));
 
-	QObject::connect(combo, SIGNAL(currentIndexChanged(int )), this, SLOT(comboChanged(int )));
+
 }
 
 /**
@@ -120,7 +129,7 @@
     case COMPRESS_2PASS: Mx(COMPRESS_2PASS);Vx(finalsize);break;
     case COMPRESS_2PASS_BITRATE: Mx(COMPRESS_2PASS_BITRATE);Vx(avg_bitrate);break;
     case COMPRESS_SAME: Mx(COMPRESS_SAME);break;
-    case COMPRESS_AQ: Mx(COMPRESS_AQ);break;
+    case COMPRESS_AQ: Mx(COMPRESS_AQ);Vx(qz);break;
     default :
           ADM_assert(0);
   }
@@ -201,22 +210,13 @@
   maxQ=qz; 
 }
 
-diaElemBitrate::~diaElemBitrate()
-{
-  ADM_assert(myWidget);
-#if 0 // Automatically deleted as it is a child of main dialog
-  ADM_Qbitrate *z=(ADM_Qbitrate *)myWidget;
-  
-  if(z) delete z;
+diaElemBitrate::~diaElemBitrate() {};
 
-  myWidget=NULL;
-#endif
-}
 void diaElemBitrate::setMe(void *dialog, void *opaque,uint32_t line)
 {
   QGridLayout *layout=(QGridLayout*) opaque;
   
-  ADM_Qbitrate *b=new ADM_Qbitrate( (QWidget *)dialog,(COMPRES_PARAMS *)&copy,minQ,maxQ,layout,line);
+  ADM_Qbitrate *b=new ADM_Qbitrate((COMPRES_PARAMS *)&copy,minQ,maxQ,layout,line);
   myWidget=(void *)b;
   
 }
@@ -226,6 +226,7 @@
   memcpy(param,&copy,sizeof(copy));
 }
 
+int diaElemBitrate::getRequiredLayout(void) { return FAC_QT_GRIDLAYOUT; }
 } // End of namespace
 //****************************Hoook*****************
 

Modified: branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_UIs/src/T_bitrate.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_UIs/src/T_bitrate.h	2009-06-28 17:47:51 UTC (rev 4972)
+++ branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_UIs/src/T_bitrate.h	2009-06-28 17:47:53 UTC (rev 4973)
@@ -26,7 +26,7 @@
 		COMPRES_PARAMS  *compress;
 		uint32_t        maxQ, _minQ;
 
-		ADM_Qbitrate(QWidget *z, COMPRES_PARAMS *p, uint32_t minQ, uint32_t mq, QGridLayout *layout, int line);
+		ADM_Qbitrate(COMPRES_PARAMS *p, uint32_t minQ, uint32_t mq, QGridLayout *layout, int line);
 		virtual ~ADM_Qbitrate();
 		void readBack(void);
 	};

Modified: branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_UIs/src/T_button.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_UIs/src/T_button.cpp	2009-06-28 17:47:51 UTC (rev 4972)
+++ branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_UIs/src/T_button.cpp	2009-06-28 17:47:53 UTC (rev 4973)
@@ -15,6 +15,7 @@
 
 #include "T_button.h"
 #include "ADM_default.h"
+#include "ADM_dialogFactoryQt4.h"
 
 extern const char *shortkey(const char *);
 namespace ADM_Qt4Factory
@@ -30,6 +31,7 @@
   void      setMe(void *dialog, void *opaque,uint32_t line);
   void      getMe(void);
   void      enable(uint32_t onoff) ;
+  int getRequiredLayout(void);
 };
 
 ADM_Qbutton::ADM_Qbutton(QWidget *z,QGridLayout *layout,const char *blah,int line,ADM_FAC_CALLBACK *cb, void *cookie) : QWidget(z) 
@@ -86,6 +88,8 @@
 
 }
 
+int diaElemButton::getRequiredLayout(void) { return FAC_QT_GRIDLAYOUT; }
+
 }; // End of namespace
 //****************************Hoook*****************
 

Modified: branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_UIs/src/T_dialogFactory.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_UIs/src/T_dialogFactory.cpp	2009-06-28 17:47:51 UTC (rev 4972)
+++ branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_UIs/src/T_dialogFactory.cpp	2009-06-28 17:47:53 UTC (rev 4973)
@@ -22,15 +22,11 @@
 #include "DIA_factory.h"
 #include "DIA_coreToolkit.h"
 #include "DIA_coreUI_internal.h"
+#include "ADM_toolkitQt.h"
+#include "ADM_dialogFactoryQt4.h"
 
 static void insertTab(uint32_t index, diaElemTabs *tab, QTabWidget *wtab);
-factoryWindow::factoryWindow()     : QDialog()
- {
-//     ui.setupUi(this);
-     //connect( (ui.pushButton),SIGNAL(pressed()),this,SLOT(buttonPressed()));
- }
 
-
 /**
     \fn qt4DiaFactoryRun(const char *title,uint32_t nb,diaElem **elems)
     \brief  Run a dialog made of nb elems, each elem being described in the **elems
@@ -39,7 +35,8 @@
 
 uint8_t qt4DiaFactoryRun(const char *title,uint32_t nb,diaElem **elems)
 {
-  factoryWindow dialog;
+  QDialog dialog(qtLastRegisteredDialog());
+  qtRegisterDialog(&dialog);
   
   ADM_assert(title);
   ADM_assert(nb);
@@ -47,38 +44,61 @@
   
   dialog.setWindowTitle(QString::fromUtf8(title));
   
-  QGridLayout layout(&dialog);
-  
-  /* First compute the size of our window */
-  int vsize=0;
-  for(int i=0;i<nb;i++)
-  {
-    ADM_assert(elems[i]);
-     vsize+=elems[i]->getSize(); 
-  }
+  QSpacerItem *spacer = new QSpacerItem(20, 16, QSizePolicy::Minimum, QSizePolicy::Fixed);
+  QDialogButtonBox *buttonBox = new QDialogButtonBox();
+  QVBoxLayout *vboxLayout = new QVBoxLayout();
+  QLayout *layout = NULL;
+  int currentLayout = 0;
 
  int  v=0;
-  for(int i=0;i<nb;i++)
-  {
-    ADM_assert(elems[i]);
-     elems[i]->setMe( (void *)&dialog,&layout,v); 
-     v+=elems[i]->getSize();
-    
-  }
+
+ for(int i=0;i<nb;i++)
+ {
+	 ADM_assert(elems[i]);
+
+	 if (elems[i]->getRequiredLayout() != currentLayout)
+	 {
+		 if (layout)
+			 vboxLayout->addLayout(layout);
+
+		 switch (elems[i]->getRequiredLayout())
+		 {
+			 case FAC_QT_GRIDLAYOUT:
+				 layout = new QGridLayout();
+				 break;
+			 case FAC_QT_VBOXLAYOUT:
+				 layout = new QVBoxLayout();
+				 break;
+		 }
+
+		 currentLayout = elems[i]->getRequiredLayout();
+		 v = 0;
+	 }
+
+	 elems[i]->setMe( (void *)&dialog,layout,v);
+	 v+=elems[i]->getSize();
+ }
+
    for(int i=0;i<nb;i++)
   {
     ADM_assert(elems[i]);
      elems[i]->finalize(); 
   }
+
   // Add buttons
-   QDialogButtonBox buttonBox((QWidget *)&dialog);
-    buttonBox.setStandardButtons(QDialogButtonBox::Ok
-                            | QDialogButtonBox::Cancel);
-     QObject::connect(&buttonBox, SIGNAL(accepted()), &dialog, SLOT(accept()));
-     QObject::connect(&buttonBox, SIGNAL(rejected()), &dialog, SLOT(reject()));
-     layout.addWidget(&buttonBox,vsize,0);
-  // run
-  dialog.setLayout(&layout);
+   buttonBox->setStandardButtons(QDialogButtonBox::Ok | QDialogButtonBox::Cancel);
+
+   QObject::connect(buttonBox, SIGNAL(accepted()), &dialog, SLOT(accept()));
+   QObject::connect(buttonBox, SIGNAL(rejected()), &dialog, SLOT(reject()));
+
+   if (layout)
+	   vboxLayout->addLayout(layout);
+
+   vboxLayout->addItem(spacer);
+   vboxLayout->addWidget(buttonBox);
+
+   dialog.setLayout(vboxLayout);
+
   if(dialog.exec()==QDialog::Accepted)
   {
      for(int i=0;i<nb;i++)
@@ -87,8 +107,14 @@
         elems[i]->getMe(); 
     
       }
+
+	 qtUnregisterDialog(&dialog);
+
     return 1;
   }
+
+  qtUnregisterDialog(&dialog);
+
   return 0;
   
 }
@@ -98,48 +124,58 @@
 */
 const char *shortkey(const char *in)
 {
- char *t=ADM_strdup(in);
- for(int i=0;i<strlen(t);i++)
- {
-    if(t[i]=='_') t[i]='&'; 
- }
-  return t;
+	QString escaped = QString::fromUtf8(in);
+
+	escaped.replace("&", "&&");
+	escaped.replace("_", "&");
+
+	return ADM_strdup(escaped.toUtf8().constData());
 }
+
 /**
  * 	\fn qt4DiaFactoryRunTabs
  */
 uint8_t qt4DiaFactoryRunTabs(const char *title,uint32_t nb,diaElemTabs **tabs)
 {
-    factoryWindow dialog;
+    QDialog dialog(qtLastRegisteredDialog());
+
+	qtRegisterDialog(&dialog);
   
   ADM_assert(title);
   ADM_assert(nb);
   ADM_assert(tabs);
   
   dialog.setWindowTitle(QString::fromUtf8(title));
-  
-  QGridLayout layout(&dialog);
 
-  // Add tabs
-  QTabWidget wtabs((QWidget *)&dialog);
-  // Add buttons
-   QDialogButtonBox buttonBox((QWidget *)&dialog);
-    buttonBox.setStandardButtons(QDialogButtonBox::Ok
-                            | QDialogButtonBox::Cancel);
-     QObject::connect(&buttonBox, SIGNAL(accepted()), &dialog, SLOT(accept()));
-     QObject::connect(&buttonBox, SIGNAL(rejected()), &dialog, SLOT(reject()));
-     
+  QVBoxLayout *vboxLayout = new QVBoxLayout();
+  QGridLayout *layout = new QGridLayout();
+  QSpacerItem *spacer = new QSpacerItem(20, 16, QSizePolicy::Minimum, QSizePolicy::Fixed);
+  QTabWidget *wtabs = new QTabWidget();
+  QDialogButtonBox *buttonBox = new QDialogButtonBox();
+
+    buttonBox->setStandardButtons(QDialogButtonBox::Ok | QDialogButtonBox::Cancel);
+
+     QObject::connect(buttonBox, SIGNAL(accepted()), &dialog, SLOT(accept()));
+     QObject::connect(buttonBox, SIGNAL(rejected()), &dialog, SLOT(reject()));
+
      for(int i=0;i<nb;i++)
      {
         ADM_assert(tabs[i]);
-        insertTab(i,tabs[i],&wtabs); 
-    
+        insertTab(i,tabs[i],wtabs);
       }
-     
-     layout.addWidget(&wtabs,0,0);
-     layout.addWidget(&buttonBox,1,0);
-  // run
-  dialog.setLayout(&layout);
+
+	 vboxLayout->addLayout(layout);
+     vboxLayout->addWidget(wtabs,0,0);
+	 vboxLayout->addItem(spacer);
+     vboxLayout->addWidget(buttonBox,1,0);
+
+	 dialog.setLayout(vboxLayout);
+
+	 // Expand to see all tabs but still allow the window to be resized smaller
+	 wtabs->setUsesScrollButtons(false);
+	 dialog.adjustSize();
+	 wtabs->setUsesScrollButtons(true);
+
   if(dialog.exec()==QDialog::Accepted)
   {
       // Read tabs
@@ -153,8 +189,13 @@
         }
     
       }
+	   qtUnregisterDialog(&dialog);
+
       return 1;
   }
+
+  qtUnregisterDialog(&dialog);
+
   return 0;
   
 }
@@ -162,9 +203,11 @@
 void insertTab(uint32_t index, diaElemTabs *tab, QTabWidget *wtab)
 {
 
-  QWidget *wid=new QWidget;
-  QGridLayout *layout=new QGridLayout(wid);
+  QWidget *wid=new QWidget;  
   QSpacerItem *spacerItem = new QSpacerItem(20, 40, QSizePolicy::Minimum, QSizePolicy::Expanding);
+  int currentLayout = 0;
+  QVBoxLayout *vboxLayout = new QVBoxLayout(wid);
+  QLayout *layout = NULL;
   
   /* First compute the size of our window */
   int vsize=0;
@@ -174,14 +217,34 @@
      vsize+=tab->dias[i]->getSize(); 
   }
 
- int  v=0;
-  for(int i=0;i<tab->nbElems;i++)
-  {
-     ADM_assert(tab->dias[i]);
-     tab->dias[i]->setMe( wid,layout,v); 
-     v+=tab->dias[i]->getSize();
-    
-  }
+	int  v=0;
+
+	for(int i=0;i<tab->nbElems;i++)
+	{
+		ADM_assert(tab->dias[i]);
+
+		if (tab->dias[i]->getRequiredLayout() != currentLayout)
+		{
+			if (layout)
+				vboxLayout->addLayout(layout);
+
+			switch (tab->dias[i]->getRequiredLayout())
+			{
+				case FAC_QT_GRIDLAYOUT:
+					layout = new QGridLayout();
+					break;
+				case FAC_QT_VBOXLAYOUT:
+					layout = new QVBoxLayout();
+					break;
+			}
+
+			currentLayout = tab->dias[i]->getRequiredLayout();
+			v = 0;
+		}
+
+		tab->dias[i]->setMe( wid,layout,v); 
+		v+=tab->dias[i]->getSize();
+	}
   
   wtab->addTab(wid,QString::fromUtf8(tab->title));
   for(int i=0;i<tab->nbElems;i++)
@@ -189,7 +252,10 @@
     tab->dias[i]->finalize(); 
   }
 
-  layout->addItem(spacerItem, v, 0);
+  if (layout)
+	  vboxLayout->addLayout(layout);
+
+  vboxLayout->addItem(spacerItem);
 }
 
 /**

Modified: branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_UIs/src/T_filesel.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_UIs/src/T_filesel.cpp	2009-06-28 17:47:51 UTC (rev 4972)
+++ branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_UIs/src/T_filesel.cpp	2009-06-28 17:47:53 UTC (rev 4973)
@@ -18,6 +18,7 @@
 //#include "prefs.h"
 #include "DIA_factory.h"
 #include "DIA_fileSel.h"
+#include "ADM_dialogFactoryQt4.h"
 
 extern const char *shortkey(const char *);
 void GUI_FileSelRead(const char *label, char * * name);
@@ -40,6 +41,7 @@
   
   void   changeFile(void);
   void   enable(uint32_t onoff);
+  int getRequiredLayout(void);
 };
 class diaElemDirSelect : public diaElemDirSelectBase
 {
@@ -53,6 +55,7 @@
   
   void changeFile(void);
   void   enable(uint32_t onoff);
+  int getRequiredLayout(void);
 };
 
 void ADM_Qfilesel::buttonPressed(QAbstractButton *s)
@@ -106,18 +109,14 @@
 	}
 }
 
-ADM_Qfilesel::ADM_Qfilesel(QWidget *z,const char *title,const char *entry,QGridLayout *layout,int line, ADM_fileMode mode, const char * defaultSuffix, const char* selectDesc) : 
-	QWidget(z), defaultSuffix (defaultSuffix), selectDesc (selectDesc)
+ADM_Qfilesel::ADM_Qfilesel(const char *title,const char *entry,QGridLayout *layout,int line, ADM_fileMode mode, const char * defaultSuffix, const char* selectDesc) : 
+	defaultSuffix (defaultSuffix), selectDesc (selectDesc)
 {          
 	fileMode=mode;
-	edit=new QLineEdit(QString::fromUtf8(entry),z);
+	edit=new QLineEdit(QString::fromUtf8(entry));
+	button=new QDialogButtonBox(QDialogButtonBox::Open,Qt::Horizontal);
+	text=new QLabel(QString::fromUtf8(title));
 
-	edit->show();
-
-	button=new QDialogButtonBox(QDialogButtonBox::Open,Qt::Horizontal,z);
-	button->show();
-
-	text=new QLabel(QString::fromUtf8(title),z);
 	text->setBuddy(edit);
 	layout->addWidget(text,line,0);
 	layout->addWidget(edit,line,1);
@@ -163,9 +162,9 @@
  QGridLayout *layout=(QGridLayout*) opaque;
  ADM_Qfilesel *fs;
   if(_write)
-      fs=new ADM_Qfilesel((QWidget *)dialog,paramTitle, *(const char**)param, layout, line,ADM_FILEMODE_WRITE, defaultSuffix, tip);
+      fs=new ADM_Qfilesel(paramTitle, *(const char**)param, layout, line,ADM_FILEMODE_WRITE, defaultSuffix, tip);
   else
-      fs=new ADM_Qfilesel((QWidget *)dialog,paramTitle, *(const char**)param, layout, line,ADM_FILEMODE_READ, 0, tip);
+      fs=new ADM_Qfilesel(paramTitle, *(const char**)param, layout, line,ADM_FILEMODE_READ, 0, tip);
   myWidget=(void *)fs; 
 }
 
@@ -181,10 +180,18 @@
 
 void diaElemFile::enable(uint32_t onoff)
 {
-  ADM_Qfilesel *fs=(ADM_Qfilesel *)myWidget;
-  fs->setEnabled(onoff);
+	ADM_Qfilesel *fs = (ADM_Qfilesel*)myWidget;
+
+	ADM_assert(fs);
+
+	fs->text->setEnabled(onoff);
+	fs->edit->setEnabled(onoff);
+	fs->button->setEnabled(onoff);
 }
 void diaElemFile::changeFile(void) {}
+
+int diaElemFile::getRequiredLayout(void) { return FAC_QT_GRIDLAYOUT; }
+
 //****************************
 diaElemDirSelect::diaElemDirSelect(char **filename,const char *toggleTitle,const char *selectDirDesc) :
 	diaElemDirSelectBase()
@@ -208,7 +215,7 @@
 {
  QGridLayout *layout=(QGridLayout*) opaque;
   
-  ADM_Qfilesel *fs=new ADM_Qfilesel((QWidget *)dialog, paramTitle, *(char **)param, layout, line, ADM_FILEMODE_DIR, 0, tip);
+  ADM_Qfilesel *fs=new ADM_Qfilesel(paramTitle, *(char **)param, layout, line, ADM_FILEMODE_DIR, 0, tip);
   myWidget=(void *)fs; 
 }
 
@@ -222,9 +229,20 @@
   *n=ADM_strdup(s.toUtf8().constData());
 }
 
-void diaElemDirSelect::enable(uint32_t onoff) {}
-  
+void diaElemDirSelect::enable(uint32_t onoff)
+{
+	ADM_Qfilesel *fs = (ADM_Qfilesel*)myWidget;
+
+	ADM_assert(fs);
+
+	fs->text->setEnabled(onoff);
+	fs->edit->setEnabled(onoff);
+	fs->button->setEnabled(onoff);
+}
+
 void diaElemDirSelect::changeFile(void) {}
+
+int diaElemDirSelect::getRequiredLayout(void) { return FAC_QT_GRIDLAYOUT; }
 } // End of namespace
 //****************************Hoook*****************
 
@@ -249,5 +267,3 @@
 	delete a;
 }
 //EOF
-
-//EOF

Modified: branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_UIs/src/T_filesel.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_UIs/src/T_filesel.h	2009-06-28 17:47:51 UTC (rev 4972)
+++ branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_UIs/src/T_filesel.h	2009-06-28 17:47:53 UTC (rev 4973)
@@ -32,7 +32,7 @@
 		const char *defaultSuffix;
 		const char *selectDesc;
 
-		ADM_Qfilesel(QWidget *z, const char *title, const char *entry, QGridLayout *layout, int line, ADM_fileMode mode, const char * defaultSuffix, const char* selectDesc);
+		ADM_Qfilesel(const char *title, const char *entry, QGridLayout *layout, int line, ADM_fileMode mode, const char * defaultSuffix, const char* selectDesc);
 		~ADM_Qfilesel();
 	};
 }

Modified: branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_UIs/src/T_flyDialogQt4.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_UIs/src/T_flyDialogQt4.cpp	2009-06-28 17:47:51 UTC (rev 4972)
+++ branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_UIs/src/T_flyDialogQt4.cpp	2009-06-28 17:47:53 UTC (rev 4973)
@@ -13,6 +13,8 @@
 ***************************************************************************///
 
 
+#include <QtCore/QEvent>
+#include <QtCore/QCoreApplication>
 #include <QtGui/QGraphicsView>
 #include <QtGui/QSlider>
 
@@ -21,6 +23,33 @@
 #include "ADM_videoFilter.h"
 #include "DIA_flyDialog.h"
 #include "DIA_flyDialogQt4.h"
+
+extern float UI_calcZoomToFitScreen(QWidget* window, QWidget* canvas, uint32_t imageWidth, uint32_t imageHeight);
+extern uint8_t UI_getPhysicalScreenSize(void* window, uint32_t *w, uint32_t *h);
+
+FlyDialogEventFilter::FlyDialogEventFilter(ADM_flyDialog *flyDialog)
+{
+	recomputed = false;
+	this->flyDialog = flyDialog;
+}
+
+bool FlyDialogEventFilter::eventFilter(QObject *obj, QEvent *event)
+{
+	if (event->type() == QEvent::Show && !recomputed)
+	{
+		recomputed = true;
+		QWidget* parent = (QWidget*)obj;
+		uint32_t screenWidth, screenHeight;
+
+		UI_getPhysicalScreenSize(parent, &screenWidth, &screenHeight);
+		flyDialog->recomputeSize();
+		QCoreApplication::processEvents();
+		parent->move((((int)screenWidth) - parent->frameSize().width()) / 2, (((int)screenHeight) - parent->frameSize().height()) / 2);
+	}
+
+	return QObject::eventFilter(obj, event);
+}
+
   ADM_flyDialogQt4::ADM_flyDialogQt4(uint32_t width, uint32_t height, AVDMGenericVideoStream *in,
                               void *canvas, void *slider, int yuv, ResizeMethod resizeMethod):
                                 ADM_flyDialog(width,height,in,canvas,slider,yuv,resizeMethod) 
@@ -32,14 +61,26 @@
 {
 	QWidget *graphicsView = ((ADM_QCanvas*)_canvas)->parentWidget();
 	QSlider  *slider=(QSlider *)_slider;
-	
-	graphicsView->setMinimumSize(_w, _h);
-	graphicsView->resize(_w, _h);
-	uint32_t nbFrames=_in->getInfo()->nb_frames; 
-	slider->setMaximum(nbFrames);
+
+	if (!reInit)
+	{
+		FlyDialogEventFilter *eventFilter = new FlyDialogEventFilter(this);
+
+		if (slider)
+			slider->setMaximum(_in->getInfo()->nb_frames);
+
+		graphicsView->parentWidget()->installEventFilter(eventFilter);
+	}
+
+	((ADM_QCanvas*)_canvas)->changeSize(_zoomW, _zoomH);
+	graphicsView->setMinimumSize(_zoomW, _zoomH);
+	graphicsView->resize(_zoomW, _zoomH);
 }
 
-float ADM_flyDialogQt4::calcZoomFactor(void) {return 1;}
+float ADM_flyDialogQt4::calcZoomFactor(void)
+{
+	return UI_calcZoomToFitScreen(((ADM_QCanvas*)_canvas)->parentWidget()->parentWidget(), ((ADM_QCanvas*)_canvas)->parentWidget(), _w, _h);
+}
 
 uint8_t  ADM_flyDialogQt4::display(void)
 {

Modified: branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_UIs/src/T_menu.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_UIs/src/T_menu.cpp	2009-06-28 17:47:51 UTC (rev 4972)
+++ branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_UIs/src/T_menu.cpp	2009-06-28 17:47:53 UTC (rev 4973)
@@ -15,6 +15,7 @@
 
 #include "T_menu.h"
 #include "ADM_default.h"
+#include "ADM_dialogFactoryQt4.h"
 
 #include <QtGui/QGridLayout>
 #include <QtGui/QLabel>
@@ -40,11 +41,12 @@
   virtual void      updateMe(void);
   void      enable(uint32_t onoff) ;
   void      finalize(void);;
+  int getRequiredLayout(void);
 };
 
 /**/
 
-ADM_QComboBox::ADM_QComboBox(QWidget *root,diaElemMenuDynamic *menu) : QComboBox(root)
+ADM_QComboBox::ADM_QComboBox(diaElemMenuDynamic *menu)
 {
 	_menu=menu;
 }
@@ -117,6 +119,9 @@
 {
   dyna->finalize();
 }
+
+int diaElemMenu::getRequiredLayout(void) { return FAC_QT_GRIDLAYOUT; }
+
 //*********************************
 //* DYNAMIC                       *
 //*********************************
@@ -140,11 +145,15 @@
 }
 void diaElemMenuDynamic::setMe(void *dialog, void *opaque,uint32_t line)
 {
-  ADM_QComboBox *combo=new ADM_QComboBox( (QWidget *)dialog,this);
+  ADM_QComboBox *combo=new ADM_QComboBox(this);
+
   QGridLayout *layout=(QGridLayout*) opaque;
      myWidget=(void *)combo; 
 
-	 QLabel *text=new QLabel( QString::fromUtf8(this->paramTitle),(QWidget *)dialog);
+	 QLabel *text=new QLabel( QString::fromUtf8(this->paramTitle));
+	 text->setSizePolicy(QSizePolicy::Fixed, QSizePolicy::Fixed);
+
+	 QSpacerItem *spacer = new QSpacerItem(20, 20, QSizePolicy::Expanding, QSizePolicy::Minimum);
   
   // Fill in combobox
   int mem=0;
@@ -158,6 +167,7 @@
    text->setBuddy(combo);
    layout->addWidget(text,line,0);
    layout->addWidget(combo,line,1);
+   layout->addItem(spacer,line,2);
    
    combo->connectMe();
 }
@@ -236,7 +246,8 @@
 {
   finalize();
 }
-//********************
+
+int diaElemMenuDynamic::getRequiredLayout(void) { return FAC_QT_GRIDLAYOUT; }
 }; // End of namespace
 
 diaElem  *qt4CreateMenu(uint32_t *intValue,const char *itle, uint32_t nb,         const diaMenuEntry *menu,const char *tip)
@@ -260,5 +271,3 @@
 }
 
 //EOF
-
-//EOF

Modified: branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_UIs/src/T_menu.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_UIs/src/T_menu.h	2009-06-28 17:47:51 UTC (rev 4972)
+++ branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_UIs/src/T_menu.h	2009-06-28 17:47:53 UTC (rev 4973)
@@ -1,13 +1,13 @@
-#ifndef T_menu_h
-#define T_menu_h
-
-#include <QtGui/QComboBox>
-
-#include "ADM_inttype.h"
-#include "DIA_factory.h"
-
+#ifndef T_menu_h
+#define T_menu_h
+
+#include <QtGui/QComboBox>
+
+#include "ADM_inttype.h"
+#include "DIA_factory.h"
+
 namespace ADM_qt4Factory
-{
+{
 	class diaElemMenuDynamic : public diaElemMenuDynamicBase
 	{
 	public:
@@ -20,8 +20,9 @@
 		virtual void      updateMe(void);
 		virtual void      enable(uint32_t onoff) ;
 		virtual void      finalize(void);
-	};
-
+		int getRequiredLayout(void);
+	};
+
 	class ADM_QComboBox : public QComboBox
 	{
 		Q_OBJECT
@@ -33,8 +34,8 @@
 		diaElemMenuDynamic *_menu;
 
 	public:
-		ADM_QComboBox(QWidget *root,diaElemMenuDynamic *menu);
+		ADM_QComboBox(diaElemMenuDynamic *menu);
 		void connectMe(void);
-	};
-}
-#endif	// T_menu_h
+	};
+}
+#endif	// T_menu_h

Copied: branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_UIs/src/T_notch.cpp (from rev 4972, branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_UIs/src/FAC_notch.cpp)
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_UIs/src/FAC_notch.cpp	2009-06-28 17:47:51 UTC (rev 4972)
+++ branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_UIs/src/T_notch.cpp	2009-06-28 17:47:53 UTC (rev 4973)
@@ -0,0 +1,89 @@
+/***************************************************************************
+  FAC_toggle.cpp
+  Handle dialog factory element : Toggle
+  (C) 2006 Mean Fixounet at free.fr 
+***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+
+#include "T_notch.h"
+#include "ADM_default.h"
+#include "DIA_factory.h"
+#include "ADM_dialogFactoryQt4.h"
+
+extern const char *shortkey(const char *);
+
+namespace ADM_qt4Factory
+{
+
+QCheckBoxReadOnly::QCheckBoxReadOnly(QCheckBox *box, bool state)
+{
+	this->box = box;
+	this->state = state;
+}
+
+void QCheckBoxReadOnly::stateChanged(int state)
+{
+	box->setCheckState(this->state ? Qt::Checked : Qt::Unchecked);
+}
+
+class diaElemNotch : public diaElem
+{
+  uint32_t yesno;
+public:
+  
+  diaElemNotch(uint32_t yes,const char *toggleTitle, const char *tip=NULL);
+  virtual ~diaElemNotch() ;
+  void setMe(void *dialog, void *opaque,uint32_t line);
+  void getMe(void) {};
+  int getRequiredLayout(void);
+};
+
+diaElemNotch::diaElemNotch(uint32_t yes,const char *toggleTitle, const char *tip)
+  : diaElem(ELEM_NOTCH)
+{
+  yesno=yes;
+  paramTitle=toggleTitle;
+  this->tip=tip;
+}
+
+diaElemNotch::~diaElemNotch()
+{
+  
+}
+void diaElemNotch::setMe(void *dialog, void *opaque,uint32_t line)
+{
+  QCheckBox *box=new QCheckBox(QString::fromUtf8(paramTitle),(QWidget *)dialog);
+  QCheckBoxReadOnly *readOnlyReceiver = new QCheckBoxReadOnly(box, yesno);
+ QGridLayout *layout=(QGridLayout*) opaque;
+ myWidget=(void *)box; 
+ if( yesno)
+ {
+    box->setCheckState(Qt::Checked); 
+ }
+
+ QObject::connect(box, SIGNAL(stateChanged(int)), readOnlyReceiver, SLOT(stateChanged(int)));
+ layout->addWidget(box,line,0);
+}
+
+int diaElemNotch::getRequiredLayout(void) { return FAC_QT_GRIDLAYOUT; }
+} // End of namespace
+//****************************Hoook*****************
+
+diaElem  *qt4CreateNotch(uint32_t yes,const char *toggleTitle, const char *tip)
+{
+	return new  ADM_qt4Factory::diaElemNotch(yes,toggleTitle, tip);
+}
+void qt4DestroyNotch(diaElem *e)
+{
+	ADM_qt4Factory::diaElemNotch *a=(ADM_qt4Factory::diaElemNotch *)e;
+	delete a;
+}
+//EOF

Added: branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_UIs/src/T_notch.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_UIs/src/T_notch.h	2009-06-28 17:47:51 UTC (rev 4972)
+++ branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_UIs/src/T_notch.h	2009-06-28 17:47:53 UTC (rev 4973)
@@ -0,0 +1,26 @@
+#ifndef T_NOTCH_H
+#define T_NOTCH_H
+
+#include <QtGui/QGridLayout>
+#include <QtGui/QCheckBox>
+
+#include "DIA_factory.h"
+
+namespace ADM_qt4Factory
+{
+	class QCheckBoxReadOnly : public QObject
+	{
+		Q_OBJECT
+
+	private:
+		QCheckBox *box;
+		bool state;
+
+	public:
+		QCheckBoxReadOnly(QCheckBox *box, bool state);
+
+		public slots:
+			void stateChanged(int state);
+	};
+}
+#endif

Modified: branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_UIs/src/T_slider.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_UIs/src/T_slider.cpp	2009-06-28 17:47:51 UTC (rev 4972)
+++ branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_UIs/src/T_slider.cpp	2009-06-28 17:47:53 UTC (rev 4973)
@@ -16,6 +16,7 @@
 #include "T_slider.h"
 #include "ADM_default.h"
 #include "DIA_factory.h"
+#include "ADM_dialogFactoryQt4.h"
 
 #include <QtGui/QGridLayout>
 #include <QtGui/QHBoxLayout>
@@ -35,6 +36,7 @@
   void      setMe(void *dialog, void *opaque,uint32_t line);
   void      getMe(void);
   void      enable(uint32_t onoff) ;
+  int getRequiredLayout(void);
   
 };
 class diaElemSlider : public diaElemSliderBase
@@ -49,8 +51,7 @@
   void      setMe(void *dialog, void *opaque,uint32_t line);
   void      getMe(void);
   void      enable(uint32_t onoff) ;
-  
-  
+  int getRequiredLayout(void);
 };
 
 int SpinSlider::value()
@@ -149,6 +150,8 @@
     box->setDisabled(1);
 }
 
+int diaElemUSlider::getRequiredLayout(void) { return FAC_QT_GRIDLAYOUT; }
+
 diaElemSlider::diaElemSlider(int32_t *value,const char *toggleTitle, int32_t min,int32_t max,int32_t incr,const char *tip)
   : diaElemSliderBase()
 {
@@ -204,6 +207,7 @@
     box->setDisabled(1);
 }
 
+int diaElemSlider::getRequiredLayout(void) { return FAC_QT_GRIDLAYOUT; }
 //****************************************************
 } // End of namespace
 //****************************Hoook*****************

Modified: branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_UIs/src/T_slider.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_UIs/src/T_slider.h	2009-06-28 17:47:51 UTC (rev 4972)
+++ branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_UIs/src/T_slider.h	2009-06-28 17:47:53 UTC (rev 4973)
@@ -1,12 +1,12 @@
-#ifndef T_slider_h
-#define T_slider_h
-
-#include <QtGui/QSlider>
-#include <QtGui/QSpinBox>
-#include <QtGui/QWidget>
-
+#ifndef T_slider_h
+#define T_slider_h
+
+#include <QtGui/QSlider>
+#include <QtGui/QSpinBox>
+#include <QtGui/QWidget>
+
 namespace ADM_qt4Factory
-{
+{
 	class SpinSlider : public QWidget
 	{
 		Q_OBJECT
@@ -26,6 +26,6 @@
 	private:
 		QSlider * slider;
 		QSpinBox * spinner;
-	};
-}
-#endif	// T_slider_h
+	};
+}
+#endif	// T_slider_h

Modified: branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_UIs/src/T_threadCount.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_UIs/src/T_threadCount.cpp	2009-06-28 17:47:51 UTC (rev 4972)
+++ branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_UIs/src/T_threadCount.cpp	2009-06-28 17:47:53 UTC (rev 4973)
@@ -16,6 +16,7 @@
 #include "T_threadCount.h"
 #include "ADM_default.h"
 #include "DIA_factory.h"
+#include "ADM_dialogFactoryQt4.h"
 
 extern const char* shortkey(const char*);
 
@@ -31,6 +32,7 @@
   virtual ~diaElemThreadCount() ;
   void setMe(void *dialog, void *opaque, uint32_t line);
   void getMe(void);
+  int getRequiredLayout(void);
 };
 
 void ADM_QthreadCount::radioGroupChanged(QAbstractButton *s)
@@ -55,11 +57,14 @@
 	text = new QLabel(QString::fromUtf8(title), widget);
 	text->setBuddy(radiobutton1);
 
+	QSpacerItem *spacer = new QSpacerItem(20, 20, QSizePolicy::Expanding, QSizePolicy::Minimum);
+
 	layout->addWidget(text, line, 0);
 	layout->addWidget(radiobutton1, line, 1);
 	layout->addWidget(radiobutton2, line, 2);
 	layout->addWidget(radiobutton3, line, 3);
 	layout->addWidget(spinBox, line, 4);
+	layout->addItem(spacer,line,5);
 
 	QObject::connect(buttonGroup, SIGNAL(buttonClicked(QAbstractButton*)), this, SLOT(radioGroupChanged(QAbstractButton*)));
 
@@ -130,6 +135,9 @@
 	else
 		*val = (threadCount->spinBox)->value();
 }
+
+int diaElemThreadCount::getRequiredLayout(void) { return FAC_QT_GRIDLAYOUT; }
+
 //**********************
 } // End of namesapce
 //**********************

Modified: branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_UIs/src/T_threadCount.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_UIs/src/T_threadCount.h	2009-06-28 17:47:51 UTC (rev 4972)
+++ branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_UIs/src/T_threadCount.h	2009-06-28 17:47:53 UTC (rev 4973)
@@ -1,12 +1,12 @@
 #ifndef T_threadCount_h
 #define T_threadCount_h
-
 #include <QtGui/QButtonGroup>
 #include <QtGui/QGridLayout>
 #include <QtGui/QLabel>
 #include <QtGui/QRadioButton>
 #include <QtGui/QSpinBox>
 #include <QtGui/QWidget>
+#include "ADM_default.h"
 
 namespace ADM_qt4Factory
 {

Modified: branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_UIs/src/T_toggle.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_UIs/src/T_toggle.cpp	2009-06-28 17:47:51 UTC (rev 4972)
+++ branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_UIs/src/T_toggle.cpp	2009-06-28 17:47:53 UTC (rev 4973)
@@ -19,6 +19,7 @@
 #include "T_toggle.h"
 #include "ADM_default.h"
 #include "DIA_factory.h"
+#include "ADM_dialogFactoryQt4.h"
 
 extern const char *shortkey(const char *);
 
@@ -36,6 +37,7 @@
   void      finalize(void);
   void      updateMe();
   uint8_t   link(uint32_t onoff,diaElem *w);
+  int getRequiredLayout(void);
 };
 
 class diaElemToggleUint : public diaElem
@@ -54,6 +56,7 @@
   void      enable(uint32_t onoff) ;
   void      finalize(void);
   void      updateMe();
+  int getRequiredLayout(void);
 };
 class diaElemToggleInt : public diaElem
 {
@@ -71,6 +74,7 @@
   void      finalize(void);
   void      updateMe();
   void      enable(uint32_t onoff) ;
+  int getRequiredLayout(void);
 };
 
 void ADM_QCheckBox::changed(int i)
@@ -120,14 +124,14 @@
 void diaElemToggle::setMe(void *dialog, void *opaque,uint32_t l)
 {
  ADM_QCheckBox *box=new ADM_QCheckBox(QString::fromUtf8(paramTitle),(QWidget *)dialog,this,TT_TOGGLE);
- QGridLayout *layout=(QGridLayout*) opaque;
+ QVBoxLayout *layout=(QVBoxLayout*) opaque;
  myWidget=(void *)box; 
  if( *(uint32_t *)param)
  {
     box->setCheckState(Qt::Checked); 
  }
- box->show();
- layout->addWidget(box,l,0);
+
+ layout->addWidget(box);
  box->connectMe();
 }
 void diaElemToggle::getMe(void)
@@ -192,6 +196,9 @@
     nbLink++;
     return 1;
 }
+
+int diaElemToggle::getRequiredLayout(void) { return FAC_QT_VBOXLAYOUT; }
+
 //******************************************************
 // An UInt and a toggle linked...
 //******************************************************
@@ -217,13 +224,13 @@
 {
  ADM_QCheckBox *box=new ADM_QCheckBox(QString::fromUtf8(paramTitle),(QWidget *)dialog,this,TT_TOGGLE_UINT);
  QGridLayout *layout=(QGridLayout*) opaque;
+ QHBoxLayout *hboxLayout = new QHBoxLayout();
  myWidget=(void *)box; 
  if( *(uint32_t *)param)
  {
     box->setCheckState(Qt::Checked); 
  }
- box->show();
- layout->addWidget(box,line,0);
+
  // Now add spin
  QSpinBox *spin=new QSpinBox((QWidget *)dialog);
  widgetUint=(void *)spin; 
@@ -231,8 +238,14 @@
  spin->setMinimum(_min);
  spin->setMaximum(_max);
  spin->setValue(*(uint32_t *)emb);
- spin->show();
- layout->addWidget(spin,line,1);
+
+ QSpacerItem *spacer = new QSpacerItem(20, 20, QSizePolicy::Expanding, QSizePolicy::Minimum);
+
+ hboxLayout->addWidget(spin);
+ hboxLayout->addItem(spacer);
+
+ layout->addWidget(box,line,0);
+ layout->addLayout(hboxLayout,line,1);
  box->connectMe();
 }
 
@@ -290,6 +303,8 @@
   }
 }
 
+int diaElemToggleUint::getRequiredLayout(void) { return FAC_QT_GRIDLAYOUT; }
+
 //******************************************************
 // An Int and a toggle linked...
 //******************************************************
@@ -315,13 +330,13 @@
 {
  ADM_QCheckBox *box=new ADM_QCheckBox(QString::fromUtf8(paramTitle),(QWidget *)dialog,this,TT_TOGGLE_INT);
  QGridLayout *layout=(QGridLayout*) opaque;
+ QHBoxLayout *hboxLayout = new QHBoxLayout();
  myWidget=(void *)box; 
  if( *(uint32_t *)param)
  {
     box->setCheckState(Qt::Checked); 
  }
- box->show();
- layout->addWidget(box,line,0);
+
  // Now add spin
  QSpinBox *spin=new QSpinBox((QWidget *)dialog);
  widgetUint=(void *)spin; 
@@ -329,8 +344,14 @@
  spin->setMinimum(_min);
  spin->setMaximum(_max);
  spin->setValue(*emb);
- spin->show();
- layout->addWidget(spin,line,1);
+
+ QSpacerItem *spacer = new QSpacerItem(20, 20, QSizePolicy::Expanding, QSizePolicy::Minimum);
+
+ hboxLayout->addWidget(spin);
+ hboxLayout->addItem(spacer);
+
+ layout->addWidget(box,line,0);
+ layout->addLayout(hboxLayout,line,1);
  box->connectMe();
 }
 
@@ -352,6 +373,8 @@
  *emb=u;
 }
 
+int diaElemToggleInt::getRequiredLayout(void) { return FAC_QT_GRIDLAYOUT; }
+
 void   diaElemToggleInt::finalize(void)
 {
   updateMe();

Modified: branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_UIs/src/T_toggle.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_UIs/src/T_toggle.h	2009-06-28 17:47:51 UTC (rev 4972)
+++ branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_UIs/src/T_toggle.h	2009-06-28 17:47:53 UTC (rev 4973)
@@ -1,18 +1,18 @@
-#ifndef T_toggle_h
-#define T_toggle_h
-
-#include <QtGui/QCheckBox>
-#include <QtGui/QWidget>
-
+#ifndef T_toggle_h
+#define T_toggle_h
+
+#include <QtGui/QCheckBox>
+#include <QtGui/QWidget>
+
 namespace ADM_qt4Factory
-{
+{
 	typedef enum
 	{
 		TT_TOGGLE,
 		TT_TOGGLE_UINT,
 		TT_TOGGLE_INT
-	} TOG_TYPE;
-
+	} TOG_TYPE;
+
 	class ADM_QCheckBox : public QCheckBox
 	{
 		Q_OBJECT
@@ -27,6 +27,6 @@
 	public:
 		ADM_QCheckBox(const QString & str, QWidget *root, void *toggle, TOG_TYPE type);
 		void connectMe(void);
-	};
-}
-#endif	// T_toggle_h
+	};
+}
+#endif	// T_toggle_h

Added: branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_UIs/src/toolkit.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_UIs/src/toolkit.cpp	2009-06-28 17:47:51 UTC (rev 4972)
+++ branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_UIs/src/toolkit.cpp	2009-06-28 17:47:53 UTC (rev 4973)
@@ -0,0 +1,73 @@
+#include <QtCore/QStack>
+#include <QtGui/QApplication>
+#include <QtGui/QDesktopWidget>
+
+#include "ADM_toolkitQt.h"
+#include "ADM_assert.h"
+
+static QStack<QWidget*> widgetStack;
+
+void qtRegisterDialog(QWidget *dialog)
+{
+	if (widgetStack.count())
+		dialog->setParent(widgetStack.top(), Qt::Dialog);
+
+	widgetStack.push(dialog);
+}
+
+void qtUnregisterDialog(QWidget *dialog)
+{
+	ADM_assert(widgetStack.top() == dialog);
+	widgetStack.pop();
+}
+
+QWidget* qtLastRegisteredDialog()
+{
+	if (widgetStack.count())
+		return widgetStack.top();
+	else
+		return NULL;
+}
+
+uint8_t UI_getPhysicalScreenSize(void* window, uint32_t *w,uint32_t *h)
+{
+	QRect qrect = QApplication::desktop()->availableGeometry();
+
+	*w = (uint32_t)qrect.width();
+	*h = (uint32_t)qrect.height();
+}
+
+// Calculate the zoom ratio required to fit the whole image on the screen.
+float UI_calcZoomToFitScreen(QWidget* window, QWidget* canvas, uint32_t imageWidth, uint32_t imageHeight)
+{
+	int windowWidth, windowHeight;
+	int drawingWidth, drawingHeight;
+	uint32_t screenWidth, screenHeight;
+
+	windowWidth = window->frameSize().width();
+	windowHeight = window->frameSize().height();
+
+	drawingWidth = canvas->frameSize().width();
+	drawingHeight = canvas->frameSize().height();
+
+	UI_getPhysicalScreenSize(window, &screenWidth, &screenHeight);
+
+	// Take drawing area out of the equation, how much extra do we need for additional controls?
+	windowWidth -= drawingWidth;
+	windowHeight -= drawingHeight;
+
+	// This is the true amount of screen real estate we can work with
+	screenWidth -= windowWidth;
+	screenHeight -= windowHeight;
+
+	// Calculate zoom ratio
+	if (imageWidth > screenWidth || imageHeight > screenHeight)
+	{
+		float widthRatio = (float)screenWidth / (float)imageWidth;
+		float heightRatio = (float)screenHeight / (float)imageHeight;
+
+		return (widthRatio < heightRatio ? widthRatio : heightRatio);
+	}
+	else
+		return 1;
+}

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreImage/include/DIA_flyDialog.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreImage/include/DIA_flyDialog.h	2009-06-28 17:47:51 UTC (rev 4972)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreImage/include/DIA_flyDialog.h	2009-06-28 17:47:53 UTC (rev 4973)
@@ -122,10 +122,9 @@
   virtual uint32_t sliderGet(void)=0;
   virtual uint8_t  sliderSet(uint32_t value) =0;
   virtual void    postInit(uint8_t reInit)=0;
-  virtual uint8_t    sliderChanged(void)=0;
-  
-  
-};          
+  virtual uint8_t sliderChanged(void);
+};
+
 #ifdef ADM_UI_TYPE_BUILD
 #if ADM_UI_TYPE_BUILD == ADM_UI_QT4
   #include "DIA_flyDialogQt4.h"

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUI/include/DIA_factory.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUI/include/DIA_factory.h	2009-06-28 17:47:51 UTC (rev 4972)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUI/include/DIA_factory.h	2009-06-28 17:47:53 UTC (rev 4973)
@@ -48,6 +48,7 @@
   ELEM_THREAD_COUNT,
   ELEM_MATRIX,
   ELEM_COUNT,
+  ELEM_ASPECT_RATIO,
   ELEM_MAX=ELEM_COUNT-1
 }elemEnum;
 typedef void ADM_FAC_CALLBACK(void *cookie);
@@ -79,6 +80,7 @@
           
   virtual void enable(uint32_t onoff) {}
   virtual void finalize(void) {} // in case some widget needs some stuff just before using them
+  virtual int getRequiredLayout(void)=0;
 };
 /*********************************************/
 #define MENU_MAX_lINK 10
@@ -106,6 +108,7 @@
   void      setMe(void *dialog, void *opaque,uint32_t line);
   void      getMe(void);
   void      enable(uint32_t onoff) ;
+  int getRequiredLayout(void);
 };
 
 /*********************************************/
@@ -122,6 +125,7 @@
   void      setMe(void *dialog, void *opaque,uint32_t line);
   void      getMe(void);
   void      enable(uint32_t onoff) ;
+  int getRequiredLayout(void);
 };
 /************************************/
 class diaElemSliderBase : public diaElem
@@ -148,6 +152,7 @@
   void      getMe(void);
   void      enable(uint32_t onoff) ;
   uint8_t   setDigits(uint32_t digits) ;
+  int getRequiredLayout(void);
 };
 class diaElemSlider : public diaElemSliderBase
 {
@@ -162,7 +167,7 @@
   void      getMe(void);
   void      enable(uint32_t onoff) ;
   uint8_t   setDigits(uint32_t digits) ;
-  
+  int getRequiredLayout(void);
 };
 /*********************************************/
 typedef diaElem *CREATE_TOGGLE(uint32_t *toggleValue,const char *toggleTitle, const char *tip);
@@ -191,6 +196,7 @@
   void      finalize(void);
   void      updateMe();
   uint8_t   link(uint32_t onoff,diaElem *w);
+  int getRequiredLayout(void);
 };
 /*********************************************/
 typedef diaElem *CREATE_TOGGLE_UINT(uint32_t *toggleValue,const char *toggleTitle, uint32_t *uintval, 
@@ -211,6 +217,7 @@
   void      enable(uint32_t onoff) ;
   void      finalize(void);
   void      updateMe();
+  int getRequiredLayout(void);
 };
 typedef diaElem *CREATE_TOGGLE_INT(uint32_t *toggleValue,const char *toggleTitle, int32_t *intval, 
 									const char *name,int32_t min,int32_t max,const char *tip=NULL);
@@ -228,6 +235,7 @@
   void      setMe(void *dialog, void *opaque,uint32_t line);
   void      getMe(void);
   void      finalize(void);
+  int getRequiredLayout(void);
   void      updateMe();
   void      enable(uint32_t onoff) ;
 };
@@ -244,6 +252,7 @@
   void setMe(void *dialog, void *opaque,uint32_t line);
   void getMe(void);
   void      enable(uint32_t onoff) ;
+  int getRequiredLayout(void);
 };
 /* Same but unsigned */
 class diaElemUInteger : public diaElem
@@ -256,7 +265,7 @@
   void setMe(void *dialog, void *opaque,uint32_t line);
   void getMe(void);
   void      enable(uint32_t onoff) ;
-  
+  int getRequiredLayout(void);
 };
 /*************************************************/
 typedef diaElem  *(CREATE_BAR_T)(uint32_t percent,const char *toggleTitle);
@@ -271,22 +280,26 @@
   virtual ~diaElemBar() ;
   void setMe(void *dialog, void *opaque,uint32_t line);
   void getMe(void);
+  int getRequiredLayout(void);
 };
 
 /*********************************************/
 typedef diaElem  *(CREATE_FLOAT_T)(ELEM_TYPE_FLOAT *intValue,const char *toggleTitle, ELEM_TYPE_FLOAT min,
-        ELEM_TYPE_FLOAT max,const char *tip);
+        ELEM_TYPE_FLOAT max,const char *tip, int decimals);
 class diaElemFloat : public diaElem
 {
+protected:
+	int decimals;
 
 public:
   ELEM_TYPE_FLOAT min,max;
   diaElemFloat(ELEM_TYPE_FLOAT *intValue,const char *toggleTitle, ELEM_TYPE_FLOAT min, 
-               ELEM_TYPE_FLOAT max,const char *tip=NULL);
+               ELEM_TYPE_FLOAT max,const char *tip=NULL, int decimals = 2);
   virtual ~diaElemFloat() ;
   void setMe(void *dialog, void *opaque,uint32_t line);
   void getMe(void);
   void      enable(uint32_t onoff) ;
+  int getRequiredLayout(void);
 };
 /*************************************************/
 typedef struct diaMenuEntry
@@ -357,6 +370,7 @@
   virtual void      updateMe(void);
   virtual void      enable(uint32_t onoff) ;
   virtual void      finalize(void);
+  int getRequiredLayout(void);
 };
 
 class diaElemMenuBase : public diaElem
@@ -387,6 +401,7 @@
   virtual void      updateMe(void);
   void      enable(uint32_t onoff) ;
   void      finalize(void);;
+  int getRequiredLayout(void);
 };
 
 /*************************************************/
@@ -417,6 +432,7 @@
   void setMinQz(uint32_t qz);
   
   void updateMe(void);
+  int getRequiredLayout(void);
 };
 #endif
 /*************************************************/
@@ -449,6 +465,7 @@
   
   void   changeFile(void);
   void   enable(uint32_t onoff);
+  int getRequiredLayout(void);
 };
 /*************************************************/
 typedef diaElem *CREATE_DIR_T(char **filename,const char *toggleTitle,const char *tip);
@@ -473,6 +490,7 @@
   
   void changeFile(void);
   void   enable(uint32_t onoff);
+  int getRequiredLayout(void);
 };
 /*************************************************/
 /* The text MUST be copied internally ! */
@@ -486,7 +504,7 @@
   virtual ~diaElemReadOnlyText() ;
   void setMe(void *dialog, void *opaque,uint32_t line);
   void getMe(void);
-  
+  int getRequiredLayout(void);
 };
 /*************************************************/
 typedef diaElem *(CREATE_TEXT_T )(char **readOnly,const char *toggleTitle, const char *tip);
@@ -501,6 +519,7 @@
   void setMe(void *dialog, void *opaque,uint32_t line);
   void getMe(void);
   void enable(uint32_t onoff);
+  int getRequiredLayout(void);
 };
 
 /*********************************************/
@@ -514,6 +533,7 @@
   virtual ~diaElemNotch() ;
   void setMe(void *dialog, void *opaque,uint32_t line);
   void getMe(void) ;
+  int getRequiredLayout(void);
 };
 /*********************************************/
 typedef diaElem *(CREATE_TAB_T )(const char *toggleTitle, uint32_t nb, diaElem **content);
@@ -562,6 +582,7 @@
   void swallow(diaElem *widget);
   void enable(uint32_t onoff);
   void finalize(void);
+  int getRequiredLayout(void);
 };
 /**********************************************/
 typedef diaElem *(CREATE_HEX_T )(const char *toggleTitle, uint32_t dataSize,uint8_t *data);
@@ -577,6 +598,7 @@
   void setMe(void *dialog, void *opaque,uint32_t line);
   void getMe(void) ;
   void finalize(void);
+  int getRequiredLayout(void);
 };
 /**********************************************/
 typedef diaElem *(CREATE_THREADCOUNT_T)(uint32_t *value, const char *title, const char *tip = NULL);
@@ -589,7 +611,24 @@
   virtual ~diaElemThreadCount() ;
   void setMe(void *dialog, void *opaque, uint32_t line);
   void getMe(void);
+  int getRequiredLayout(void);
 };
+/**********************************************/
+typedef diaElem *(CREATE_ASPECTRATIO_T)(uint32_t *value, const char *title, const char *tip = NULL);
+class diaElemAspectRatio : public diaElem
+{
+public:
+	uint32_t *den;
+	void *denControl, *label;
+
+	diaElemAspectRatio(uint32_t *num, uint32_t *den, const char *title, const char *tip = NULL);
+	virtual ~diaElemAspectRatio();
+	void setMe(void *dialog, void *opaque, uint32_t line);
+	void getMe(void);
+	void enable(uint32_t onoff);
+	int getRequiredLayout(void);
+};
+
 /*********************************************/
 uint8_t diaFactoryRun(const char *title,uint32_t nb,diaElem **elems);
 uint8_t diaFactoryRunTabs(const char *title,uint32_t nb,diaElemTabs **tabs);

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUI/include/DIA_factoryStubs.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUI/include/DIA_factoryStubs.h	2009-06-28 17:47:51 UTC (rev 4972)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUI/include/DIA_factoryStubs.h	2009-06-28 17:47:53 UTC (rev 4973)
@@ -27,6 +27,10 @@
 	{ \
 	ADM_assert(internalPointer); \
 	internalPointer->getMe(); \
+	} \
+int      aClass::getRequiredLayout(void)\
+	{ \
+	ADM_assert(internalPointer); \
+	return internalPointer->getRequiredLayout(); \
 	} 
-
 #endif

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUI/src/DIA_factory.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUI/src/DIA_factory.cpp	2009-06-28 17:47:51 UTC (rev 4972)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUI/src/DIA_factory.cpp	2009-06-28 17:47:53 UTC (rev 4973)
@@ -93,10 +93,10 @@
 
 // ****************** Buttons ********************
 diaElemFloat ::diaElemFloat(ELEM_TYPE_FLOAT *intValue,const char *toggleTitle, ELEM_TYPE_FLOAT min,
-        ELEM_TYPE_FLOAT max,const char *tip) :diaElem(ELEM_FLOAT)
+        ELEM_TYPE_FLOAT max,const char *tip, int decimals) :diaElem(ELEM_FLOAT)
 {
 	ADM_assert(Factory); 
-	internalPointer=Factory->CreateFloat(intValue,toggleTitle, min,max,tip);
+	internalPointer=Factory->CreateFloat(intValue,toggleTitle, min,max,tip, decimals);
 }
 diaElemFloat ::~diaElemFloat()
 {



From mean at mail.berlios.de  Sun Jun 28 19:58:26 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sun, 28 Jun 2009 19:58:26 +0200
Subject: [Avidemux-svn-commit] r4974 -
	branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreImage/src
Message-ID: <200906281758.n5SHwQrd019238@sheep.berlios.de>

Author: mean
Date: 2009-06-28 19:58:25 +0200 (Sun, 28 Jun 2009)
New Revision: 4974

Modified:
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreImage/src/CMakeLists.txt
Log:
[coreImage] Link deps to libav* (win32)

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreImage/src/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreImage/src/CMakeLists.txt	2009-06-28 17:47:53 UTC (rev 4973)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreImage/src/CMakeLists.txt	2009-06-28 17:58:25 UTC (rev 4974)
@@ -27,4 +27,5 @@
 ENDIF (APPLE)
 
 TARGET_LINK_LIBRARIES(ADM_coreImage ADM_core ADM_coreUI ADM_libswscale ADM_libpostproc)
+TARGET_LINK_LIBRARIES(ADM_coreImage ADM_libavcodec ADM_libavutil )
 ADM_INSTALL_LIB(ADM_coreImage)



From mean at mail.berlios.de  Sun Jun 28 20:33:09 2009
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sun, 28 Jun 2009 20:33:09 +0200
Subject: [Avidemux-svn-commit] r4975 -
	branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_gui
Message-ID: <200906281833.n5SIX9UR022791@sheep.berlios.de>

Author: mean
Date: 2009-06-28 20:33:08 +0200 (Sun, 28 Jun 2009)
New Revision: 4975

Modified:
   branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_gui/gui_none.cpp
Log:
[Qt4] Remove duplitcate getPhysicalScreen

Modified: branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_gui/gui_none.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_gui/gui_none.cpp	2009-06-28 17:58:25 UTC (rev 4974)
+++ branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_gui/gui_none.cpp	2009-06-28 18:33:08 UTC (rev 4975)
@@ -23,11 +23,4 @@
 uint8_t UI_arrow_enabled(void) {return 1;}
 uint8_t UI_arrow_disabled(void) {return 1;}
 
-uint8_t UI_getPhysicalScreenSize(void* window, uint32_t *w,uint32_t *h)
-{
-	QRect qrect = QApplication::desktop()->availableGeometry();
-
-	*w = (uint32_t)qrect.width();
-	*h = (uint32_t)qrect.height();
-}
 // EOF



