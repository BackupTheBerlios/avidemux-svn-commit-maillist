<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Avidemux-svn-commit] r5348 -	branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/KeepField
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/avidemux-svn-commit/2009-September/index.html" >
   <LINK REL="made" HREF="mailto:avidemux-svn-commit%40lists.berlios.de?Subject=Re%3A%20%5BAvidemux-svn-commit%5D%20r5348%20-%0A%09branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/KeepField&In-Reply-To=%3C200909231752.n8NHqBR8022131%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002559.html">
   <LINK REL="Next"  HREF="002560.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Avidemux-svn-commit] r5348 -	branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/KeepField</H1>
    <B>mean at BerliOS</B> 
    <A HREF="mailto:avidemux-svn-commit%40lists.berlios.de?Subject=Re%3A%20%5BAvidemux-svn-commit%5D%20r5348%20-%0A%09branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/KeepField&In-Reply-To=%3C200909231752.n8NHqBR8022131%40sheep.berlios.de%3E"
       TITLE="[Avidemux-svn-commit] r5348 -	branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/KeepField">mean at mail.berlios.de
       </A><BR>
    <I>Wed Sep 23 19:52:11 CEST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="002559.html">[Avidemux-svn-commit] r5347 -	branches/avidemux_2.5_branch_gruntster/avidemux
</A></li>
        <LI>Next message: <A HREF="002560.html">[Avidemux-svn-commit] r5349 -	branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/FastConvolution
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2561">[ date ]</a>
              <a href="thread.html#2561">[ thread ]</a>
              <a href="subject.html#2561">[ subject ]</a>
              <a href="author.html#2561">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: mean
Date: 2009-09-23 19:52:11 +0200 (Wed, 23 Sep 2009)
New Revision: 5348

Modified:
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/KeepField/ADM_vidHzStackField.cpp
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/KeepField/ADM_vidMergeField.cpp
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/KeepField/ADM_vidSeparateField.cpp
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/KeepField/ADM_vidStackField.cpp
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/KeepField/ADM_vidUnstackField.cpp
Log:
[Filter/Field] Cleanup/rename filters, ref #10

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/KeepField/ADM_vidHzStackField.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/KeepField/ADM_vidHzStackField.cpp	2009-09-22 18:21:19 UTC (rev 5347)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/KeepField/ADM_vidHzStackField.cpp	2009-09-23 17:52:11 UTC (rev 5348)
@@ -1,5 +1,5 @@
 /***************************************************************************
-                          Separate Fields.cpp  -  description
+                          Hz stack field Fields.cpp  -  description
                              -------------------
 Convert a x*y * f fps video into -&gt; x*(y/2)*fps/2 video
 
@@ -30,10 +30,10 @@
 //QT_TR_NOOP(&quot;Put botj fields side by side.&quot;),VF_HZSTACKFIELD,1,hzstackfield_create,hzstackfield_script);
 VF_DEFINE_FILTER(AVDMVideoHzStackField,swapParam,
     hzstackfield,
-                QT_TR_NOOP(&quot;separatefields&quot;),
+                QT_TR_NOOP(&quot;Horizontal Stack Field&quot;),
                 1,
                 VF_INTERLACING,
-                QT_TR_NOOP(&quot;Put botj fields side by side.&quot;));
+                QT_TR_NOOP(&quot;Put both fields side by side.&quot;));
 
 //*************************************************************
 //_______________________Hz Stack Fields_______________________

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/KeepField/ADM_vidMergeField.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/KeepField/ADM_vidMergeField.cpp	2009-09-22 18:21:19 UTC (rev 5347)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/KeepField/ADM_vidMergeField.cpp	2009-09-23 17:52:11 UTC (rev 5348)
@@ -1,5 +1,5 @@
 /***************************************************************************
-                          Separate Fields.cpp  -  description
+                          Merge Fields.cpp  -  description
                              -------------------
 Convert a x*y * f fps video into -&gt; x*(y/2)*fps/2 video
 

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/KeepField/ADM_vidSeparateField.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/KeepField/ADM_vidSeparateField.cpp	2009-09-22 18:21:19 UTC (rev 5347)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/KeepField/ADM_vidSeparateField.cpp	2009-09-23 17:52:11 UTC (rev 5348)
@@ -27,11 +27,9 @@
 
 
 static FILTER_PARAM swapParam={0,{&quot;&quot;}};
-//REGISTERX(VF_INTERLACING, &quot;separatefields&quot;,QT_TR_NOOP(&quot;Separate fields&quot;),QT_TR_NOOP
-//(&quot;Each field becomes full picture, half sized.&quot;),VF_SEPARATEFIELDS,1, separatefield_create,separatefield_script);
 VF_DEFINE_FILTER(AVDMVideoSeparateField,swapParam,
                 separatefields,
-                QT_TR_NOOP(&quot;Fade&quot;),
+                QT_TR_NOOP(&quot;Separate Fields&quot;),
                 1,
                 VF_INTERLACING,
                 QT_TR_NOOP(&quot;Each field becomes full picture, half sized.&quot;));
@@ -94,208 +92,4 @@
 		vidCache-&gt;unlockAll();
       return 1;
 }
-//------------------ and merge them ------------------
 
-
-char *AVDMVideoMergeField::printConf( void )
-{
- 	ADM_FILTER_DECLARE_CONF(&quot; Merge fields&quot;);
-        
-}
-
-//_______________________________________________________________
-AVDMVideoMergeField::AVDMVideoMergeField(
-									AVDMGenericVideoStream *in,CONFcouple *setup)
-{
-UNUSED_ARG(setup);
-  	_in=in;
-   	memcpy(&amp;_info,_in-&gt;getInfo(),sizeof(_info));	
-	vidCache=new VideoCache(4,_in);
-	
-
-	_info.height&lt;&lt;=1;
-	_info.fps1000&gt;&gt;=1;
-	_info.nb_frames&gt;&gt;=1;
-
-
-}
-
-// ___ destructor_____________
-AVDMVideoMergeField::~AVDMVideoMergeField()
-{
- 		delete vidCache;
-		vidCache=NULL;
-}
-
-/**
-	Interleave frame*2 and frame*2+1
-*/
-uint8_t AVDMVideoMergeField::getFrameNumberNoAlloc(uint32_t frame,
-				uint32_t *len,
-   				ADMImage *data,
-				uint32_t *flags)
-{
-uint32_t ref,ref2;
-ADMImage *ptr1,*ptr2;
-		if(frame&gt;=_info.nb_frames) return 0;
-
-		ref=frame&lt;&lt;1;
-		ref2=ref+1;
-		ptr1=vidCache-&gt;getImage(ref);
-		ptr2=vidCache-&gt;getImage(ref+1);
-		
-		if(!ptr1 || !ptr2)
-		{
-			printf(&quot;Merge field : cannot read\n&quot;);
-			vidCache-&gt;unlockAll();
-		 	return 0;
-		}
-		 vidFieldMerge(_info.width,_info.height,ptr1-&gt;data,ptr2-&gt;data,data-&gt;data);
-		 vidCache-&gt;unlockAll();
-		
-      return 1;
-}
-//_______________________Stack Fields_______________________
-
-char *AVDMVideoStackField::printConf( void )
-{
- 	ADM_FILTER_DECLARE_CONF(&quot; Stack fields&quot;);
-        
-}
-
-//_______________________________________________________________
-AVDMVideoStackField::AVDMVideoStackField(	AVDMGenericVideoStream *in,CONFcouple *setup)
-{
-UNUSED_ARG(setup);
-  	_in=in;
-   	memcpy(&amp;_info,_in-&gt;getInfo(),sizeof(_info));	
-	_uncompressed=new ADMImage(_info.width,_info.height);	
-
-}
-
-// ___ destructor_____________
-AVDMVideoStackField::~AVDMVideoStackField()
-{
- 		delete _uncompressed;
-		_uncompressed=NULL;
-}
-
-/**
-	Interleave frame*2 and frame*2+1
-*/
-uint8_t AVDMVideoStackField::getFrameNumberNoAlloc(uint32_t frame,
-				uint32_t *len,
-   				ADMImage *data,
-				uint32_t *flags)
-{
-uint32_t ref,ref2;
-ADMImage *ptr1,*ptr2;
-		if(frame&gt;=_info.nb_frames) return 0;
-
-		 if(!_in-&gt;getFrameNumberNoAlloc(frame, len, _uncompressed, flags)) return 0;
-		 
-		  vidFielStack(_info.width ,_info.height,YPLANE(_uncompressed),YPLANE(data));
-		data-&gt;copyInfo(_uncompressed);	
-      return 1;
-}
-
-/****/
-
-//*************************************************************
-//_______________________Hz Stack Fields_______________________
-
-char *AVDMVideoHzStackField::printConf( void )
-{
-       ADM_FILTER_DECLARE_CONF(&quot; Hz Stack fields&quot;);
-        
-}
-
-//_______________________________________________________________
-AVDMVideoHzStackField::AVDMVideoHzStackField(	AVDMGenericVideoStream *in,CONFcouple *setup)
-{
-UNUSED_ARG(setup);
-        _in=in;
-        memcpy(&amp;_info,_in-&gt;getInfo(),sizeof(_info));
-        _info.width&lt;&lt;=1;
-        _info.height&gt;&gt;=1;
-        _uncompressed=new ADMImage(in-&gt;getInfo()-&gt;width,in-&gt;getInfo()-&gt;height);	
-}
-
-// ___ destructor_____________
-AVDMVideoHzStackField::~AVDMVideoHzStackField()
-{
-        delete _uncompressed;
-        _uncompressed=NULL;
-}
-
-/*
-        Put fields side by side	
-*/
-static void fCopy(uint8_t *d, uint8_t *sr, uint32_t w, uint32_t sstride,uint32_t dstride,uint32_t h)
-{
-
-}
-uint8_t AVDMVideoHzStackField::getFrameNumberNoAlloc(uint32_t frame,
-                            uint32_t *len,
-                            ADMImage *data,
-                            uint32_t *flags)
-{
-uint32_t ref,ref2;
-ADMImage *ptr1,*ptr2;
-        if(frame&gt;=_info.nb_frames) return 0;
-        if(!_in-&gt;getFrameNumberNoAlloc(frame, len, _uncompressed, flags)) return 0;
-
-        uint32_t pg=_info.width*_info.height;
-        // Duplicate _uncompressed
-        memcpy(YPLANE(data),YPLANE(_uncompressed),pg);
-        memcpy(UPLANE(data),UPLANE(_uncompressed),pg&gt;&gt;2);
-        memcpy(VPLANE(data),VPLANE(_uncompressed),pg&gt;&gt;2);
-
-
-        return 1;
-}
-
-/****/
-//_______________________UnStack Fields_______________________
-
-char *AVDMVideoUnStackField::printConf( void )
-{
-        ADM_FILTER_DECLARE_CONF(&quot; UnStack fields&quot;);
-        
-}
-
-//______________________Unstack Fields_________________________________________
-AVDMVideoUnStackField::AVDMVideoUnStackField(       AVDMGenericVideoStream *in,CONFcouple *setup)
-{
-UNUSED_ARG(setup);
-        _in=in;
-        memcpy(&amp;_info,_in-&gt;getInfo(),sizeof(_info));    
-        _uncompressed=new ADMImage(_info.width,_info.height);   
-
-}
-
-// ___ destructor_____________
-AVDMVideoUnStackField::~AVDMVideoUnStackField()
-{
-                delete _uncompressed;
-                _uncompressed=NULL;
-}
-//*************************************************************
-/**
-        Interleave frame*2 and frame*2+1
-*/
-uint8_t AVDMVideoUnStackField::getFrameNumberNoAlloc(uint32_t frame,
-                                uint32_t *len,
-                                ADMImage *data,
-                                uint32_t *flags)
-{
-uint32_t ref,ref2;
-ADMImage *ptr1,*ptr2;
-                if(frame&gt;=_info.nb_frames) return 0;
-
-                 if(!_in-&gt;getFrameNumberNoAlloc(frame, len, _uncompressed, flags)) return 0;
-                 
-                  vidFielUnStack(_info.width ,_info.height,YPLANE(_uncompressed),YPLANE(data));
-                data-&gt;copyInfo(_uncompressed);  
-      return 1;
-}

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/KeepField/ADM_vidStackField.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/KeepField/ADM_vidStackField.cpp	2009-09-22 18:21:19 UTC (rev 5347)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/KeepField/ADM_vidStackField.cpp	2009-09-23 17:52:11 UTC (rev 5348)
@@ -1,5 +1,5 @@
 /***************************************************************************
-                          Separate Fields.cpp  -  description
+                          Stack Fields.cpp  -  description
                              -------------------
 Convert a x*y * f fps video into -&gt; x*(y/2)*fps/2 video
 

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/KeepField/ADM_vidUnstackField.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/KeepField/ADM_vidUnstackField.cpp	2009-09-22 18:21:19 UTC (rev 5347)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/KeepField/ADM_vidUnstackField.cpp	2009-09-23 17:52:11 UTC (rev 5348)
@@ -1,5 +1,5 @@
 /***************************************************************************
-                          Separate Fields.cpp  -  description
+                          Unstack Fields.cpp  -  description
                              -------------------
 Convert a x*y * f fps video into -&gt; x*(y/2)*fps/2 video
 


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002559.html">[Avidemux-svn-commit] r5347 -	branches/avidemux_2.5_branch_gruntster/avidemux
</A></li>
	<LI>Next message: <A HREF="002560.html">[Avidemux-svn-commit] r5349 -	branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/FastConvolution
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2561">[ date ]</a>
              <a href="thread.html#2561">[ thread ]</a>
              <a href="subject.html#2561">[ subject ]</a>
              <a href="author.html#2561">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">More information about the Avidemux-svn-commit
mailing list</a><br>
</body></html>
