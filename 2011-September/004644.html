<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Avidemux-svn-commit] r7495 - in branches/avidemux_2.6_branch_mean:	avidemux/common/ADM_videoCodec/src	avidemux/common/ADM_videoEncoder/src	avidemux/common/ADM_videoFilter2/include	avidemux/common/ADM_videoFilter2/src avidemux_core/ADM_core/include	avidemux_core/ADM_coreAudio/include avidemux_core/ADM_coreAudio/src	avidemux_core/ADM_coreAudioDevice/src	avidemux_core/ADM_coreDemuxer/src	avidemux_core/ADM_coreDemuxerMpeg/include	avidemux_core/ADM_coreDemuxerMpeg/src	avidemux_core/ADM_coreMuxer/src avidemux_core/ADM_coreTinyPy/src
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/avidemux-svn-commit/2011-September/index.html" >
   <LINK REL="made" HREF="mailto:avidemux-svn-commit%40lists.berlios.de?Subject=Re%3A%20%5BAvidemux-svn-commit%5D%20r7495%20-%20in%20branches/avidemux_2.6_branch_mean%3A%0A%09avidemux/common/ADM_videoCodec/src%0A%09avidemux/common/ADM_videoEncoder/src%0A%09avidemux/common/ADM_videoFilter2/include%0A%09avidemux/common/ADM_videoFilter2/src%20avidemux_core/ADM_core/include%0A%09avidemux_core/ADM_coreAudio/include%20avidemux_core/ADM_coreAudio/src%0A%09avidemux_core/ADM_coreAudioDevice/src%0A%09avidemux_core/ADM_coreDemuxer/src%0A%09avidemux_core/ADM_coreDemuxerMpeg/include%0A%09avidemux_core/ADM_coreDemuxerMpeg/src%0A%09avidemux_core/ADM_coreMuxer/src%20avidemux_core/ADM_coreTinyPy/src&In-Reply-To=%3C20110910150541.3111C481270%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="004643.html">
   <LINK REL="Next"  HREF="004645.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Avidemux-svn-commit] r7495 - in branches/avidemux_2.6_branch_mean:	avidemux/common/ADM_videoCodec/src	avidemux/common/ADM_videoEncoder/src	avidemux/common/ADM_videoFilter2/include	avidemux/common/ADM_videoFilter2/src avidemux_core/ADM_core/include	avidemux_core/ADM_coreAudio/include avidemux_core/ADM_coreAudio/src	avidemux_core/ADM_coreAudioDevice/src	avidemux_core/ADM_coreDemuxer/src	avidemux_core/ADM_coreDemuxerMpeg/include	avidemux_core/ADM_coreDemuxerMpeg/src	avidemux_core/ADM_coreMuxer/src avidemux_core/ADM_coreTinyPy/src</H1>
    <B>mean at mail.berlios.de</B> 
    <A HREF="mailto:avidemux-svn-commit%40lists.berlios.de?Subject=Re%3A%20%5BAvidemux-svn-commit%5D%20r7495%20-%20in%20branches/avidemux_2.6_branch_mean%3A%0A%09avidemux/common/ADM_videoCodec/src%0A%09avidemux/common/ADM_videoEncoder/src%0A%09avidemux/common/ADM_videoFilter2/include%0A%09avidemux/common/ADM_videoFilter2/src%20avidemux_core/ADM_core/include%0A%09avidemux_core/ADM_coreAudio/include%20avidemux_core/ADM_coreAudio/src%0A%09avidemux_core/ADM_coreAudioDevice/src%0A%09avidemux_core/ADM_coreDemuxer/src%0A%09avidemux_core/ADM_coreDemuxerMpeg/include%0A%09avidemux_core/ADM_coreDemuxerMpeg/src%0A%09avidemux_core/ADM_coreMuxer/src%20avidemux_core/ADM_coreTinyPy/src&In-Reply-To=%3C20110910150541.3111C481270%40sheep.berlios.de%3E"
       TITLE="[Avidemux-svn-commit] r7495 - in branches/avidemux_2.6_branch_mean:	avidemux/common/ADM_videoCodec/src	avidemux/common/ADM_videoEncoder/src	avidemux/common/ADM_videoFilter2/include	avidemux/common/ADM_videoFilter2/src avidemux_core/ADM_core/include	avidemux_core/ADM_coreAudio/include avidemux_core/ADM_coreAudio/src	avidemux_core/ADM_coreAudioDevice/src	avidemux_core/ADM_coreDemuxer/src	avidemux_core/ADM_coreDemuxerMpeg/include	avidemux_core/ADM_coreDemuxerMpeg/src	avidemux_core/ADM_coreMuxer/src avidemux_core/ADM_coreTinyPy/src">mean at mail.berlios.de
       </A><BR>
    <I>Sat Sep 10 17:05:41 CEST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="004643.html">[Avidemux-svn-commit] r7494 - in branches/avidemux_2.6_branch_mean:	avidemux/common/ADM_audioFilter/src	avidemux_plugins/ADM_demuxers/Matroska	avidemux_plugins/ADM_demuxers/MpegPS	avidemux_plugins/ADM_demuxers/OpenDml
</A></li>
        <LI>Next message: <A HREF="004645.html">[Avidemux-svn-commit] r7496 -	branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoCodec/src
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4644">[ date ]</a>
              <a href="thread.html#4644">[ thread ]</a>
              <a href="subject.html#4644">[ subject ]</a>
              <a href="author.html#4644">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: mean
Date: 2011-09-10 17:05:40 +0200 (Sat, 10 Sep 2011)
New Revision: 7495

Modified:
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoCodec/src/ADM_dynVideoDecoder.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoCodec/src/ADM_ffmpeg_vdpau.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoEncoder/src/ADM_dynVideoEncoder.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoFilter2/include/ADM_videoFilters.h
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoFilter2/src/ADM_pluginLoad.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoFilter2/src/ADM_videoFilters.cpp
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_core/include/BVector.h
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreAudio/include/ADM_audioStreamMP3.h
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreAudio/src/ADM_audioStreamMP3.cpp
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreAudioDevice/src/ADM_audiodevice.cpp
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreDemuxer/src/ADM_dynaDemuxer.cpp
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreDemuxerMpeg/include/ADM_indexFile.h
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreDemuxerMpeg/include/dmx_io.h
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreDemuxerMpeg/src/ADM_indexFile.cpp
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreDemuxerMpeg/src/dmx_io.cpp
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreMuxer/src/ADM_dynaMuxer.cpp
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreTinyPy/src/ADM_tinypy.cpp
Log:
[all] Replace vector by BVector continued

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoCodec/src/ADM_dynVideoDecoder.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoCodec/src/ADM_dynVideoDecoder.cpp	2011-09-10 15:05:37 UTC (rev 7494)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoCodec/src/ADM_dynVideoDecoder.cpp	2011-09-10 15:05:40 UTC (rev 7495)
@@ -13,7 +13,7 @@
  *                                                                         *
  ***************************************************************************/
 #include &quot;ADM_default.h&quot;
-#include &lt;vector&gt;
+#include &lt;BVector.h&gt;
 
 #include &quot;DIA_fileSel.h&quot;
 #include &quot;ADM_coreVideoDecoderInternal.h&quot;
@@ -48,7 +48,7 @@
         }
 };
 
-std::vector &lt;ADM_videoDecoder6 *&gt; ListOfDecoders;
+BVector &lt;ADM_videoDecoder6 *&gt; ListOfDecoders;
 // 
 
 /**
@@ -86,7 +86,7 @@
     if(!dll-&gt;initialised) Fail(CannotLoad);
     if(dll-&gt;desc-&gt;apiVersion!=ADM_VIDEO_DECODER_API_VERSION) Fail(WrongApiVersion);
 //fixme todo also check uiType    
-    ListOfDecoders.push_back(dll); // Needed for cleanup. FIXME TODO Delete it.
+    ListOfDecoders.append(dll); // Needed for cleanup. FIXME TODO Delete it.
     printf(&quot;[VideoDecoder6] Registered filter %s as  %s\n&quot;,file,dll-&gt;desc-&gt;description);
     return true;
 	// Fail!

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoCodec/src/ADM_ffmpeg_vdpau.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoCodec/src/ADM_ffmpeg_vdpau.cpp	2011-09-10 15:05:37 UTC (rev 7494)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoCodec/src/ADM_ffmpeg_vdpau.cpp	2011-09-10 15:05:40 UTC (rev 7495)
@@ -21,6 +21,7 @@
  *                                                                         *
  ***************************************************************************/
 #include &quot;ADM_cpp.h&quot;
+#include &quot;BVector.h&quot;
 #include &quot;ADM_default.h&quot;
 
 #ifdef USE_VDPAU
@@ -44,7 +45,7 @@
 static bool         vdpauWorking=false;
 static admMutex     surfaceMutex;
 static bool         destroyingFlag=false;
-static vector   &lt;void *&gt; destroyedList;
+static BVector   &lt;void *&gt; destroyedList;
 #define aprintf(...) {}
 
 typedef enum 
@@ -373,7 +374,7 @@
         ADM_info(&quot;[VDPAU] Cleaning up\n&quot;);
         destroying=true;
         destroyingFlag=true;
-        destroyedList.push_back(VDPAU);
+        destroyedList.append(VDPAU);
         for(int i=0;i&lt;NB_SURFACE;i++)
         {
             if(VDPAU-&gt;renders[i])

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoEncoder/src/ADM_dynVideoEncoder.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoEncoder/src/ADM_dynVideoEncoder.cpp	2011-09-10 15:05:37 UTC (rev 7494)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoEncoder/src/ADM_dynVideoEncoder.cpp	2011-09-10 15:05:40 UTC (rev 7495)
@@ -16,7 +16,7 @@
 
 
 #include &quot;ADM_default.h&quot;
-#include &lt;vector&gt;
+#include &lt;BVector.h&gt;
 
 #include &quot;DIA_fileSel.h&quot;
 
@@ -55,7 +55,7 @@
         }
 };
 
-std::vector &lt;ADM_videoEncoder6 *&gt; ListOfEncoders;
+BVector &lt;ADM_videoEncoder6 *&gt; ListOfEncoders;
 // 
 ADM_videoEncoderDesc copyDesc={
         &quot;Copy&quot;,
@@ -109,7 +109,7 @@
     if(!dll-&gt;initialised) Fail(CannotLoad);
     if(dll-&gt;desc-&gt;apiVersion!=ADM_VIDEO_ENCODER_API_VERSION) Fail(WrongApiVersion);
 //fixme todo also check uiType    
-    ListOfEncoders.push_back(dll); // Needed for cleanup. FIXME TODO Delete it.
+    ListOfEncoders.append(dll); // Needed for cleanup. FIXME TODO Delete it.
     printf(&quot;[VideoEncoder6] Registered filter %s as  %s\n&quot;,file,dll-&gt;desc-&gt;description);
     return true;
 	// Fail!
@@ -141,7 +141,7 @@
     // Add our copy encoder....
     ADM_videoEncoder6 *dll=new ADM_videoEncoder6(&quot;copyADM&quot;);
     dll-&gt;desc=&copyDesc;
-    ListOfEncoders.push_back(dll);
+    ListOfEncoders.append(dll);
 
 	for(int i=0;i&lt;nbFile;i++)
 		tryLoadingEncoderPlugin(files[i]);

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoFilter2/include/ADM_videoFilters.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoFilter2/include/ADM_videoFilters.h	2011-09-10 15:05:37 UTC (rev 7494)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoFilter2/include/ADM_videoFilters.h	2011-09-10 15:05:40 UTC (rev 7495)
@@ -15,7 +15,7 @@
  ***************************************************************************/
 #ifndef ADM_VIDEO_FILTERS_H
 #define ADM_VIDEO_FILTERS_H
-
+#include &quot;BVector.h&quot;
 class ADM_coreVideoFilter;
 /**
     \struct ADM_VideoFilterElment
@@ -26,7 +26,7 @@
     ADM_coreVideoFilter *instance;
 }ADM_VideoFilterElement;
 
-extern std::vector&lt;ADM_VideoFilterElement&gt; ADM_VideoFilters;
+extern BVector&lt;ADM_VideoFilterElement&gt; ADM_VideoFilters;
 
 // Get list
 uint32_t                ADM_vf_getSize(void);

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoFilter2/src/ADM_pluginLoad.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoFilter2/src/ADM_pluginLoad.cpp	2011-09-10 15:05:37 UTC (rev 7494)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoFilter2/src/ADM_pluginLoad.cpp	2011-09-10 15:05:40 UTC (rev 7495)
@@ -17,7 +17,7 @@
 #include &quot;ADM_coreVideoFilterInternal.h&quot;
 #include &quot;ADM_dynamicLoading.h&quot;
 #include &quot;ADM_videoFilterApi.h&quot;
-#include &lt;vector&gt;
+#include &lt;BVector.h&gt;
 
 #if 1
 #define aprintf printf
@@ -75,7 +75,7 @@
 		};
 };
 
-std::vector&lt;ADM_vf_plugin *&gt; ADM_videoFilterPluginsList[VF_MAX];
+BVector&lt;ADM_vf_plugin *&gt; ADM_videoFilterPluginsList[VF_MAX];
 /**
  * 	\fn tryLoadingVideoFilterPlugin
  *  \brief try to load the plugin given as argument..
@@ -128,7 +128,7 @@
     }else   
     {
         plugin-&gt;tag=ADM_videoFilterPluginsList[info-&gt;category].size()+info-&gt;category*100;
-        ADM_videoFilterPluginsList[info-&gt;category].push_back(plugin);
+        ADM_videoFilterPluginsList[info-&gt;category].append(plugin);
     }
 
 	return 1;

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoFilter2/src/ADM_videoFilters.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoFilter2/src/ADM_videoFilters.cpp	2011-09-10 15:05:37 UTC (rev 7494)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoFilter2/src/ADM_videoFilters.cpp	2011-09-10 15:05:40 UTC (rev 7495)
@@ -11,6 +11,7 @@
  *   the Free Software Foundation; either version 2 of the License, or     *
  *   (at your option) any later version.                                   *
  ***************************************************************************/
+#include &quot;BVector.h&quot;
 #include &quot;ADM_default.h&quot;
 #include &quot;ADM_videoFilterApi.h&quot;
 #include &quot;ADM_videoFilters.h&quot;
@@ -19,7 +20,7 @@
 #include &quot;ADM_filterThread.h&quot;
 static ADM_coreVideoFilter *bridge=NULL;
 
-std::vector&lt;ADM_VideoFilterElement&gt; ADM_VideoFilters;
+BVector &lt;ADM_VideoFilterElement&gt; ADM_VideoFilters;
 
 /**
     \fn ADM_vf_getSize
@@ -86,7 +87,7 @@
     ADM_VideoFilterElement e;
     e.tag=tag;
     e.instance=nw;
-    ADM_VideoFilters.push_back(e);
+    ADM_VideoFilters.append(e);
     return true;
 }
 /**
@@ -98,7 +99,7 @@
     ADM_assert(bridge);
     ADM_coreVideoFilter *f=bridge;
     
-    std::vector&lt;ADM_coreVideoFilter *&gt; bin;
+    BVector &lt;ADM_coreVideoFilter *&gt; bin;
     for(int i=0;i&lt;ADM_VideoFilters.size();i++)
     {
             // Get configuration
@@ -108,7 +109,7 @@
             old-&gt;getCoupledConf(&amp;c);
             ADM_coreVideoFilter *nw=ADM_vf_createFromTag(tag,f,c);
             ADM_VideoFilters[i].instance=nw;
-            bin.push_back(old);
+            bin.append(old);
             if(c) delete c;
             f=nw;
     }
@@ -132,7 +133,7 @@
     // last filter, destroy..
     ADM_VideoFilterElement *e=&amp;(ADM_VideoFilters[index]);
     delete e-&gt;instance;
-    ADM_VideoFilters.erase(ADM_VideoFilters.begin() + index);        
+    ADM_VideoFilters.removeAt(index);        
     return ADM_vf_recreateChain();
 }
 /**

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_core/include/BVector.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_core/include/BVector.h	2011-09-10 15:05:37 UTC (rev 7494)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_core/include/BVector.h	2011-09-10 15:05:40 UTC (rev 7495)
@@ -234,8 +234,10 @@
         {
                 return; // no shrink...
         }
+        // Grow by at least 50%
+        int targetCap=(this-&gt;capacity*3)/2;
+        if(targetCap&gt;in_capacity) in_capacity=targetCap;
 
-
         T* nbuffer = new T[in_capacity]; 
 
         memcpy(&amp;nbuffer[0],&amp;this-&gt;buffer[0],sizeof(T)*currentSize);

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreAudio/include/ADM_audioStreamMP3.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreAudio/include/ADM_audioStreamMP3.h	2011-09-10 15:05:37 UTC (rev 7494)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreAudio/include/ADM_audioStreamMP3.h	2011-09-10 15:05:40 UTC (rev 7495)
@@ -17,8 +17,7 @@
 #define ADM_audioStreamMP3_H
 
 #include &quot;ADM_audioStreamBuffered.h&quot;
-#include &lt;vector&gt;
-using namespace std;
+#include &lt;BVector.h&gt;
 
 typedef struct
 {
@@ -34,7 +33,7 @@
 class ADM_audioStreamMP3 : public ADM_audioStreamBuffered
 {
         protected:
-                      vector &lt;MP3_seekPoint *&gt; seekPoints;
+                      BVector &lt;MP3_seekPoint *&gt; seekPoints;
         bool            buildTimeMap(void);
         public:
 /// Default constructor

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreAudio/src/ADM_audioStreamMP3.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreAudio/src/ADM_audioStreamMP3.cpp	2011-09-10 15:05:37 UTC (rev 7494)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreAudio/src/ADM_audioStreamMP3.cpp	2011-09-10 15:05:40 UTC (rev 7495)
@@ -168,7 +168,7 @@
             seek-&gt;offset=access-&gt;getPos();
             seek-&gt;timeStamp=lastDts;
             // Mark this point
-            seekPoints.push_back(seek);
+            seekPoints.append(seek);
             markCounter=0;
         }
 

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreAudioDevice/src/ADM_audiodevice.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreAudioDevice/src/ADM_audiodevice.cpp	2011-09-10 15:05:37 UTC (rev 7494)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreAudioDevice/src/ADM_audiodevice.cpp	2011-09-10 15:05:40 UTC (rev 7495)
@@ -14,14 +14,14 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
-#include &lt;vector&gt;
+#include &lt;BVector.h&gt;
 #include &quot;ADM_default.h&quot;
 #include &quot;ADM_audiodevice.h&quot;
 #include &quot;audio_out.h&quot;
 #include &quot;ADM_audioDeviceInternal.h&quot;
 #include &quot;prefs.h&quot;
 #include &quot;ADM_dynamicLoading.h&quot;
-std::vector &lt;ADM_AudioDevices *&gt; ListOfAudioDevices;
+BVector &lt;ADM_AudioDevices *&gt; ListOfAudioDevices;
 
 
 static audioDeviceThreaded *device=NULL;
@@ -80,7 +80,7 @@
     if(!dll-&gt;initialised) Fail(CannotLoad);
     if(dll-&gt;apiVersion!=ADM_AUDIO_DEVICE_API_VERSION) Fail(WrongApiVersion);
 
-    ListOfAudioDevices.push_back(dll); // Needed for cleanup. FIXME TODO Delete it.
+    ListOfAudioDevices.append(dll); // Needed for cleanup. FIXME TODO Delete it.
     printf(&quot;[Filters] Registered filter %s as  %s\n&quot;,file,dll-&gt;descriptor);
     return true;
 	// Fail!
@@ -107,7 +107,7 @@
                                 DummyCreateAudioDevice,
                                 DummyDeleteAudioDevice);
     
-    ListOfAudioDevices.push_back(dummyDevice); 
+    ListOfAudioDevices.append(dummyDevice); 
 	memset(files,0,sizeof(char *)*MAX_EXTERNAL_FILTER);
 	printf(&quot;[ADM_av_plugin] Scanning directory %s\n&quot;,path);
 

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreDemuxer/src/ADM_dynaDemuxer.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreDemuxer/src/ADM_dynaDemuxer.cpp	2011-09-10 15:05:37 UTC (rev 7494)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreDemuxer/src/ADM_dynaDemuxer.cpp	2011-09-10 15:05:40 UTC (rev 7495)
@@ -13,14 +13,14 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
-#include &lt;vector&gt;
+#include &lt;BVector.h&gt;
 #include &quot;ADM_default.h&quot;
 #include &quot;ADM_demuxerInternal.h&quot;
 bool ADM_dm_cleanup(void);
 void ADM_demuxersCleanup(void);
 vidHeader *ADM_demuxerSpawn(uint32_t magic,const char *name);
 
-std::vector &lt;ADM_demuxer *&gt; ListOfDemuxers;
+BVector &lt;ADM_demuxer *&gt; ListOfDemuxers;
 
 
 /**
@@ -54,7 +54,7 @@
     if(!dll-&gt;initialised) Fail(CannotLoad);
     if(dll-&gt;apiVersion!=ADM_DEMUXER_API_VERSION) Fail(WrongApiVersion);
 
-    ListOfDemuxers.push_back(dll); // Needed for cleanup. FIXME TODO Delete it.
+    ListOfDemuxers.append(dll); // Needed for cleanup. FIXME TODO Delete it.
     printf(&quot;[Demuxers] Registered filter %s as  %s\n&quot;,file,dll-&gt;descriptor);
     return true;
 	// Fail!

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreDemuxerMpeg/include/ADM_indexFile.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreDemuxerMpeg/include/ADM_indexFile.h	2011-09-10 15:05:37 UTC (rev 7494)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreDemuxerMpeg/include/ADM_indexFile.h	2011-09-10 15:05:40 UTC (rev 7495)
@@ -17,7 +17,7 @@
 
 #ifndef ADM_INDEXFILE_H
 #define ADM_INDEXFILE_H
-#include &lt;vector&gt;
+#include &lt;BVector.h&gt;
 /**
     \class indexFile
     \brief Read a index file easily
@@ -57,7 +57,7 @@
     void            purgeTokens(void);
 
     FILE            *file;
-    std::vector &lt;dmxToken *&gt; ListOfTokens;
+    BVector         &lt;dmxToken *&gt; ListOfTokens;
 public:
 
         indexFile();
@@ -74,4 +74,4 @@
 
 };
 
-#endif
\ No newline at end of file
+#endif

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreDemuxerMpeg/include/dmx_io.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreDemuxerMpeg/include/dmx_io.h	2011-09-10 15:05:37 UTC (rev 7494)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreDemuxerMpeg/include/dmx_io.h	2011-09-10 15:05:40 UTC (rev 7495)
@@ -17,8 +17,7 @@
 #ifndef FPARSER_
 #define FPARSER_
 #define DMX_BUFFER 1024*100
-#include &lt;vector&gt;
-using std::vector;
+#include &lt;BVector.h&gt;
 
 /*
         _off is the logical offset in the file
@@ -57,7 +56,7 @@
             uint64_t _off;              // Absolute offset
             
             uint32_t _curFd;        
-            vector &lt;fdIo&gt; listOfFd;
+            BVector &lt;fdIo&gt; listOfFd;
             uint64_t _head,_tail,_size;       
            
         public:

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreDemuxerMpeg/src/ADM_indexFile.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreDemuxerMpeg/src/ADM_indexFile.cpp	2011-09-10 15:05:37 UTC (rev 7494)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreDemuxerMpeg/src/ADM_indexFile.cpp	2011-09-10 15:05:40 UTC (rev 7495)
@@ -92,11 +92,10 @@
 */
 void  indexFile::purgeTokens(void)
 {
-    while(ListOfTokens.size())
-    {
-        delete ListOfTokens[0];
-        ListOfTokens.erase(ListOfTokens.begin());
-    }
+    int nb=ListOfTokens.size();
+    for(int i=0;i&lt;nb;i++)
+        delete ListOfTokens[i];
+    ListOfTokens.clear();
 }
 /**
 
@@ -193,7 +192,7 @@
             *tail=0;
             tail++;
             dmxToken *tk=new dmxToken(head,tail);
-            ListOfTokens.push_back(tk);
+            ListOfTokens.append(tk);
         }
     }
     return true;

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreDemuxerMpeg/src/dmx_io.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreDemuxerMpeg/src/dmx_io.cpp	2011-09-10 15:05:37 UTC (rev 7494)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreDemuxerMpeg/src/dmx_io.cpp	2011-09-10 15:05:40 UTC (rev 7495)
@@ -103,7 +103,7 @@
                 fseeko( f, 0, SEEK_SET );
                  newFd.fileSizeCumul=0;
                 _size=newFd.fileSize;
-                listOfFd.push_back(newFd);
+                listOfFd.append(newFd);
                 aprintf( &quot; file: %s, size: %&quot;LLU&quot;\n&quot;, filename, newFd.fileSize );
                 aprintf( &quot; found 1 files \n&quot; );
                 aprintf( &quot;Done \n&quot; );
@@ -165,7 +165,7 @@
                 aprintf( &quot; file %d: %s, size: %&quot;LLU&quot;\n&quot;, (count + 1), outName.c_str(),
                                             myFd.fileSize );
 
-                listOfFd.push_back(myFd);
+                listOfFd.append(myFd);
                 count++;
                 current++;
         } 

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreMuxer/src/ADM_dynaMuxer.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreMuxer/src/ADM_dynaMuxer.cpp	2011-09-10 15:05:37 UTC (rev 7494)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreMuxer/src/ADM_dynaMuxer.cpp	2011-09-10 15:05:40 UTC (rev 7495)
@@ -14,7 +14,7 @@
  *                                                                         *
  ***************************************************************************/
 
-#include &lt;vector&gt;
+#include &lt;BVector.h&gt;
 #include &quot;ADM_default.h&quot;
 #include &quot;ADM_muxerInternal.h&quot;
 #include &quot;ADM_muxerProto.h&quot;
@@ -22,7 +22,7 @@
 
 ADM_muxer *ADM_muxerSpawn(uint32_t magic,const char *name);
 
-std::vector &lt;ADM_dynMuxer *&gt; ListOfMuxers;
+BVector &lt;ADM_dynMuxer *&gt; ListOfMuxers;
 /**
     \fn ADM_mux_configure
     \brief 
@@ -83,7 +83,7 @@
     if(!dll-&gt;initialised) Fail(CannotLoad);
     if(dll-&gt;apiVersion!=ADM_MUXER_API_VERSION) Fail(WrongApiVersion);
 
-    ListOfMuxers.push_back(dll); // Needed for cleanup. FIXME TODO Delete it.
+    ListOfMuxers.append(dll); // Needed for cleanup. FIXME TODO Delete it.
     printf(&quot;[Muxers] Registered filter %s as  %s\n&quot;,file,dll-&gt;descriptor);
     return true;
 	// Fail!

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreTinyPy/src/ADM_tinypy.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreTinyPy/src/ADM_tinypy.cpp	2011-09-10 15:05:37 UTC (rev 7494)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreTinyPy/src/ADM_tinypy.cpp	2011-09-10 15:05:40 UTC (rev 7495)
@@ -14,6 +14,7 @@
  *                                                                         *
  ***************************************************************************/
 #include &quot;ADM_cpp.h&quot;
+#include &quot;BVector.h&quot;
 #include &quot;ADM_default.h&quot;
 
 #include &lt;stdarg.h&gt;
@@ -37,7 +38,7 @@
                                 {&quot;get_file_size&quot;,tinyPy_getFileSize},
                                 {NULL,NULL}
                         };
-static vector &lt;admPyClassDescriptor&gt; listOfPyClass;;
+static BVector &lt;admPyClassDescriptor&gt; listOfPyClass;;
 
 extern void tp_hook_set_syslib(const char *sysLib);
 /**
@@ -194,7 +195,7 @@
     admPyClassDescriptor  classDesc;
     classDesc.className=string(className);
     classDesc.desc=string(desc);
-    listOfPyClass.push_back(classDesc);
+    listOfPyClass.append(classDesc);
     
     tp_set(INSTANCE, INSTANCE-&gt;builtins, tp_string(className), classPy(INSTANCE));
     return true;


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="004643.html">[Avidemux-svn-commit] r7494 - in branches/avidemux_2.6_branch_mean:	avidemux/common/ADM_audioFilter/src	avidemux_plugins/ADM_demuxers/Matroska	avidemux_plugins/ADM_demuxers/MpegPS	avidemux_plugins/ADM_demuxers/OpenDml
</A></li>
	<LI>Next message: <A HREF="004645.html">[Avidemux-svn-commit] r7496 -	branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoCodec/src
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4644">[ date ]</a>
              <a href="thread.html#4644">[ thread ]</a>
              <a href="subject.html#4644">[ subject ]</a>
              <a href="author.html#4644">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">More information about the Avidemux-svn-commit
mailing list</a><br>
</body></html>
