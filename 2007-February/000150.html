<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Avidemux-svn-commit] r2830 - in branches/avidemux_2.4_branch:	autononreg/dialogFactory avidemux/ADM_script	avidemux/ADM_userInterfaces/ADM_NONE/ADM_dialog	avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog	avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory	avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/avidemux-svn-commit/2007-February/index.html" >
   <LINK REL="made" HREF="mailto:avidemux-svn-commit%40lists.berlios.de?Subject=Re%3A%20%5BAvidemux-svn-commit%5D%20r2830%20-%20in%20branches/avidemux_2.4_branch%3A%0A%09autononreg/dialogFactory%20avidemux/ADM_script%0A%09avidemux/ADM_userInterfaces/ADM_NONE/ADM_dialog%0A%09avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog%0A%09avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory%0A%09avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui&In-Reply-To=%3C200702181617.l1IGHwrb000437%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000149.html">
   <LINK REL="Next"  HREF="000151.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Avidemux-svn-commit] r2830 - in branches/avidemux_2.4_branch:	autononreg/dialogFactory avidemux/ADM_script	avidemux/ADM_userInterfaces/ADM_NONE/ADM_dialog	avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog	avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory	avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui</H1>
    <B>mean at BerliOS</B> 
    <A HREF="mailto:avidemux-svn-commit%40lists.berlios.de?Subject=Re%3A%20%5BAvidemux-svn-commit%5D%20r2830%20-%20in%20branches/avidemux_2.4_branch%3A%0A%09autononreg/dialogFactory%20avidemux/ADM_script%0A%09avidemux/ADM_userInterfaces/ADM_NONE/ADM_dialog%0A%09avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog%0A%09avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory%0A%09avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui&In-Reply-To=%3C200702181617.l1IGHwrb000437%40sheep.berlios.de%3E"
       TITLE="[Avidemux-svn-commit] r2830 - in branches/avidemux_2.4_branch:	autononreg/dialogFactory avidemux/ADM_script	avidemux/ADM_userInterfaces/ADM_NONE/ADM_dialog	avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog	avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory	avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui">mean at mail.berlios.de
       </A><BR>
    <I>Sun Feb 18 17:17:58 CET 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="000149.html">[Avidemux-svn-commit] r2829 - in	branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_filters:	. icons
</A></li>
        <LI>Next message: <A HREF="000151.html">[Avidemux-svn-commit] r2831 - branches/avidemux_2.4_branch
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#150">[ date ]</a>
              <a href="thread.html#150">[ thread ]</a>
              <a href="subject.html#150">[ subject ]</a>
              <a href="author.html#150">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: mean
Date: 2007-02-18 17:17:57 +0100 (Sun, 18 Feb 2007)
New Revision: 2830

Added:
   branches/avidemux_2.4_branch/autononreg/dialogFactory/bar.js
   branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/FAC_bar.cpp
Modified:
   branches/avidemux_2.4_branch/avidemux/ADM_script/ADM_JSFunctions.cpp
   branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_NONE/ADM_dialog/DIA_none.cpp
   branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_none.cpp
   branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/Makefile.am
   branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/translation_table.h
Log:
bar for dialogFactory/QT4

Copied: branches/avidemux_2.4_branch/autononreg/dialogFactory/bar.js (from rev 2822, branches/avidemux_2.4_branch/autononreg/dialogFactory/bitrate.js)
===================================================================
--- branches/avidemux_2.4_branch/autononreg/dialogFactory/bitrate.js	2007-02-14 20:46:44 UTC (rev 2822)
+++ branches/avidemux_2.4_branch/autononreg/dialogFactory/bar.js	2007-02-18 16:17:57 UTC (rev 2830)
@@ -0,0 +1,10 @@
+//AD  &lt;- These first 4 characters need to be the first 4 characters to identify the ECMAScript file to Avidemux
+var app = new Avidemux();
+var file=&quot;/work/samples/2mn.avi&quot;;
+var goodfcc=&quot;DIV3&quot;;
+var fps;
+
+	dialogFactoryBar();
+
+/* End of test
+*/

Modified: branches/avidemux_2.4_branch/avidemux/ADM_script/ADM_JSFunctions.cpp
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_script/ADM_JSFunctions.cpp	2007-02-18 15:37:43 UTC (rev 2829)
+++ branches/avidemux_2.4_branch/avidemux/ADM_script/ADM_JSFunctions.cpp	2007-02-18 16:17:57 UTC (rev 2830)
@@ -73,6 +73,7 @@
 JSBool facMenu(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval);
 JSBool facFile(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval);
 JSBool facBitrate(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval);
+JSBool facBar(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval);
 
 
 static JSFunctionSpec adm_functions[] = {
@@ -96,6 +97,7 @@
   {&quot;dialogFactoryMenu&quot;,         facMenu,        0},
   {&quot;dialogFactoryFileSel&quot;,      facFile,        0},
   {&quot;dialogFactoryBitrate&quot;,      facBitrate,        0},
+  {&quot;dialogFactoryBar&quot;,          facBar,        0},
   {0}
 };
 
@@ -588,5 +590,20 @@
   
   return JS_TRUE;
 }
+JSBool facBar(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval)
+{
+    
+      diaElemBar bar1(25,&quot;25&quot;);
+      diaElemBar bar2(65,&quot;65&quot;);
+      diaElem *elems[]={&amp;bar1,&amp;bar2   };
+  if(diaFactoryRun(&quot;Test FileRead&quot;,2,elems))
+  {
+    *rval = BOOLEAN_TO_JSVAL(1);
+    
+  }else
+    *rval = BOOLEAN_TO_JSVAL(0);
+  
+  return JS_TRUE;
+}
 
 //EOF 

Modified: branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_NONE/ADM_dialog/DIA_none.cpp
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_NONE/ADM_dialog/DIA_none.cpp	2007-02-18 15:37:43 UTC (rev 2829)
+++ branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_NONE/ADM_dialog/DIA_none.cpp	2007-02-18 16:17:57 UTC (rev 2830)
@@ -119,7 +119,6 @@
 void DIA_Calculator(uint32_t *sizeInMeg, uint32_t *avgBitrate ){return ;}
 uint8_t DIA_gotoTime(uint16_t *hh, uint16_t *mm, uint16_t *ss){return 0;}
 void DIA_properties( void){return ;}
-void  GUI_displayBitrate( void ){return ;}
 int GUI_handleVFilter (void){return 0;}
 uint8_t  initFileSelector(void){return 0;}
 uint8_t initGUI( void ){return 1;}

Modified: branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_none.cpp
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_none.cpp	2007-02-18 15:37:43 UTC (rev 2829)
+++ branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_none.cpp	2007-02-18 16:17:57 UTC (rev 2830)
@@ -117,7 +117,6 @@
 uint8_t DIA_about( void ){return 0;}
 void DIA_Calculator(uint32_t *sizeInMeg, uint32_t *avgBitrate ){return ;}
 uint8_t DIA_gotoTime(uint16_t *hh, uint16_t *mm, uint16_t *ss){return 0;}
-void  GUI_displayBitrate( void ){return ;}
 //int GUI_handleVFilter (void){return 0;}
 uint8_t  initFileSelector(void){return 0;}
 uint8_t initGUI( void ){return 1;}

Copied: branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/FAC_bar.cpp (from rev 2818, branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/FAC_integer.cpp)
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/FAC_integer.cpp	2007-02-13 19:16:54 UTC (rev 2818)
+++ branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/FAC_bar.cpp	2007-02-18 16:17:57 UTC (rev 2830)
@@ -0,0 +1,72 @@
+/***************************************************************************
+  FAC_toggle.cpp
+  Handle dialog factory element : Toggle
+  (C) 2006 Mean <A HREF="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">Fixounet at free.fr</A> 
+***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+
+#include &lt;config.h&gt;
+
+
+#include &lt;string.h&gt;
+#include &lt;stdio.h&gt;
+#include &lt;stdlib.h&gt;
+#include &lt;math.h&gt;
+
+#include &lt;QDialog&gt;
+#include &lt;QSpinBox&gt;
+#include &lt;QGridLayout&gt;
+#include &lt;QLabel&gt;
+#include &lt;QProgressBar&gt;
+
+#include &quot;default.h&quot;
+#include &quot;ADM_commonUI/DIA_factory.h&quot;
+#include &quot;ADM_assert.h&quot;
+
+
+extern const char *shortkey(const char *);
+
+
+
+//********************************************************************
+diaElemBar::diaElemBar(uint32_t percent,const char *toggleTitle)
+  : diaElem(ELEM_BAR)
+{
+  per=percent;
+  paramTitle=shortkey(toggleTitle);
+ }
+
+diaElemBar::~diaElemBar()
+{
+  if(paramTitle)
+    delete paramTitle;
+}
+void diaElemBar::setMe(void *dialog, void *opaque,uint32_t line)
+{
+  QProgressBar *box=new QProgressBar((QWidget *)dialog);
+  QGridLayout *layout=(QGridLayout*) opaque;
+ 
+  box-&gt;setMinimum(0);
+  box-&gt;setMaximum(100);
+  box-&gt;setValue(per);
+  box-&gt;show();
+ 
+ QLabel *text=new QLabel( this-&gt;paramTitle,(QWidget *)dialog);
+ text-&gt;setBuddy(box);
+ layout-&gt;addWidget(text,line,0);
+ layout-&gt;addWidget(box,line,1);
+ 
+}
+void diaElemBar::getMe(void)
+{
+}
+
+//EOF

Modified: branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/Makefile.am
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/Makefile.am	2007-02-18 15:37:43 UTC (rev 2829)
+++ branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/Makefile.am	2007-02-18 16:17:57 UTC (rev 2830)
@@ -3,7 +3,7 @@
 
 libADM_dialogFactory_a_METASOURCES = AUTO
 
-libADM_dialogFactory_a_SOURCES = AT_dialogFactory.cpp FAC_toggle.cpp FAC_integer.cpp FAC_menu.cpp FAC_float.cpp FAC_filesel.cpp FAC_bitrate.cpp
+libADM_dialogFactory_a_SOURCES = AT_dialogFactory.cpp FAC_toggle.cpp FAC_integer.cpp FAC_menu.cpp FAC_float.cpp FAC_filesel.cpp FAC_bitrate.cpp FAC_bar.cpp
 
 
 INCLUDES = $(all_includes)  $(XML_CFLAGS)  $(FREETYPE_CFLAGS) -DADM_SUBVERSION=@ADM_SUBVERSION@ \

Modified: branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/translation_table.h
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/translation_table.h	2007-02-18 15:37:43 UTC (rev 2829)
+++ branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/translation_table.h	2007-02-18 16:17:57 UTC (rev 2830)
@@ -38,7 +38,7 @@
 PROCESS(actionFilters_2,ACT_DUMMY) \
 PROCESS(actionCalculator,ACT_DUMMY) \
 PROCESS(actionRebuild_I_B_Frames,ACT_RebuildKF) \
-PROCESS(actionBitrate_histogram,ACT_DUMMY) \
+PROCESS(actionBitrate_histogram,ACT_BitRate) \
 PROCESS(actionScan_for_black_frames,ACT_AllBlackFrames) \
 PROCESS(actionVob_to_vobsub,ACT_DUMMY) \
 PROCESS(actionOCR,ACT_Ocr) \


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000149.html">[Avidemux-svn-commit] r2829 - in	branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_filters:	. icons
</A></li>
	<LI>Next message: <A HREF="000151.html">[Avidemux-svn-commit] r2831 - branches/avidemux_2.4_branch
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#150">[ date ]</a>
              <a href="thread.html#150">[ thread ]</a>
              <a href="subject.html#150">[ subject ]</a>
              <a href="author.html#150">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">More information about the Avidemux-svn-commit
mailing list</a><br>
</body></html>
