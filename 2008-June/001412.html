<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Avidemux-svn-commit] r4157 - in	branches/avidemux_2.5_branch_gruntster: avidemux	avidemux/ADM_audiocodec avidemux/ADM_audiofilter	avidemux/ADM_core/include avidemux/ADM_core/src	avidemux/ADM_editor avidemux/ADM_encoder	avidemux/ADM_inputs/ADM_amv avidemux/ADM_inputs/ADM_asf	avidemux/ADM_inputs/ADM_avsproxy avidemux/ADM_inputs/ADM_flv	avidemux/ADM_inputs/ADM_h263 avidemux/ADM_inputs/ADM_inpics	avidemux/ADM_inputs/ADM_matroska avidemux/ADM_inputs/ADM_mp4	avidemux/ADM_inputs/ADM_mpegdemuxer	avidemux/ADM_inputs/ADM_nuv avidemux/ADM_inputs/ADM_ogm	avidemux/ADM_inputs/ADM_openDML	avidemux/ADM_libraries/ADM_libmpeg2enc avidemux/ADM_osSupport	avidemux/ADM_script avidemux/ADM_toolkit	avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog	avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk	avidemux/ADM_userInterfaces/ADM_commonUI avidemux/xpm po
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/avidemux-svn-commit/2008-June/index.html" >
   <LINK REL="made" HREF="mailto:avidemux-svn-commit%40lists.berlios.de?Subject=Re%3A%20%5BAvidemux-svn-commit%5D%20r4157%20-%20in%0A%09branches/avidemux_2.5_branch_gruntster%3A%20avidemux%0A%09avidemux/ADM_audiocodec%20avidemux/ADM_audiofilter%0A%09avidemux/ADM_core/include%20avidemux/ADM_core/src%0A%09avidemux/ADM_editor%20avidemux/ADM_encoder%0A%09avidemux/ADM_inputs/ADM_amv%20avidemux/ADM_inputs/ADM_asf%0A%09avidemux/ADM_inputs/ADM_avsproxy%20avidemux/ADM_inputs/ADM_flv%0A%09avidemux/ADM_inputs/ADM_h263%20avidemux/ADM_inputs/ADM_inpics%0A%09avidemux/ADM_inputs/ADM_matroska%20avidemux/ADM_inputs/ADM_mp4%0A%09avidemux/ADM_inputs/ADM_mpegdemuxer%0A%09avidemux/ADM_inputs/ADM_nuv%20avidemux/ADM_inputs/ADM_ogm%0A%09avidemux/ADM_inputs/ADM_openDML%0A%09avidemux/ADM_libraries/ADM_libmpeg2enc%20avidemux/ADM_osSupport%0A%09avidemux/ADM_script%20avidemux/ADM_toolkit%0A%09avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog%0A%09avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk%0A%09avidemux/ADM_userInterfaces/ADM_commonUI%20avidemux/xpm%20po&In-Reply-To=%3C200806241946.m5OJkos4020326%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001411.html">
   <LINK REL="Next"  HREF="001413.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Avidemux-svn-commit] r4157 - in	branches/avidemux_2.5_branch_gruntster: avidemux	avidemux/ADM_audiocodec avidemux/ADM_audiofilter	avidemux/ADM_core/include avidemux/ADM_core/src	avidemux/ADM_editor avidemux/ADM_encoder	avidemux/ADM_inputs/ADM_amv avidemux/ADM_inputs/ADM_asf	avidemux/ADM_inputs/ADM_avsproxy avidemux/ADM_inputs/ADM_flv	avidemux/ADM_inputs/ADM_h263 avidemux/ADM_inputs/ADM_inpics	avidemux/ADM_inputs/ADM_matroska avidemux/ADM_inputs/ADM_mp4	avidemux/ADM_inputs/ADM_mpegdemuxer	avidemux/ADM_inputs/ADM_nuv avidemux/ADM_inputs/ADM_ogm	avidemux/ADM_inputs/ADM_openDML	avidemux/ADM_libraries/ADM_libmpeg2enc avidemux/ADM_osSupport	avidemux/ADM_script avidemux/ADM_toolkit	avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog	avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk	avidemux/ADM_userInterfaces/ADM_commonUI avidemux/xpm po</H1>
    <B>gruntster at mail.berlios.de</B> 
    <A HREF="mailto:avidemux-svn-commit%40lists.berlios.de?Subject=Re%3A%20%5BAvidemux-svn-commit%5D%20r4157%20-%20in%0A%09branches/avidemux_2.5_branch_gruntster%3A%20avidemux%0A%09avidemux/ADM_audiocodec%20avidemux/ADM_audiofilter%0A%09avidemux/ADM_core/include%20avidemux/ADM_core/src%0A%09avidemux/ADM_editor%20avidemux/ADM_encoder%0A%09avidemux/ADM_inputs/ADM_amv%20avidemux/ADM_inputs/ADM_asf%0A%09avidemux/ADM_inputs/ADM_avsproxy%20avidemux/ADM_inputs/ADM_flv%0A%09avidemux/ADM_inputs/ADM_h263%20avidemux/ADM_inputs/ADM_inpics%0A%09avidemux/ADM_inputs/ADM_matroska%20avidemux/ADM_inputs/ADM_mp4%0A%09avidemux/ADM_inputs/ADM_mpegdemuxer%0A%09avidemux/ADM_inputs/ADM_nuv%20avidemux/ADM_inputs/ADM_ogm%0A%09avidemux/ADM_inputs/ADM_openDML%0A%09avidemux/ADM_libraries/ADM_libmpeg2enc%20avidemux/ADM_osSupport%0A%09avidemux/ADM_script%20avidemux/ADM_toolkit%0A%09avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog%0A%09avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk%0A%09avidemux/ADM_userInterfaces/ADM_commonUI%20avidemux/xpm%20po&In-Reply-To=%3C200806241946.m5OJkos4020326%40sheep.berlios.de%3E"
       TITLE="[Avidemux-svn-commit] r4157 - in	branches/avidemux_2.5_branch_gruntster: avidemux	avidemux/ADM_audiocodec avidemux/ADM_audiofilter	avidemux/ADM_core/include avidemux/ADM_core/src	avidemux/ADM_editor avidemux/ADM_encoder	avidemux/ADM_inputs/ADM_amv avidemux/ADM_inputs/ADM_asf	avidemux/ADM_inputs/ADM_avsproxy avidemux/ADM_inputs/ADM_flv	avidemux/ADM_inputs/ADM_h263 avidemux/ADM_inputs/ADM_inpics	avidemux/ADM_inputs/ADM_matroska avidemux/ADM_inputs/ADM_mp4	avidemux/ADM_inputs/ADM_mpegdemuxer	avidemux/ADM_inputs/ADM_nuv avidemux/ADM_inputs/ADM_ogm	avidemux/ADM_inputs/ADM_openDML	avidemux/ADM_libraries/ADM_libmpeg2enc avidemux/ADM_osSupport	avidemux/ADM_script avidemux/ADM_toolkit	avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog	avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk	avidemux/ADM_userInterfaces/ADM_commonUI avidemux/xpm po">gruntster at mail.berlios.de
       </A><BR>
    <I>Tue Jun 24 21:46:50 CEST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="001411.html">[Avidemux-svn-commit] r4156 - in	branches/avidemux_2.5_branch_gruntster: avidemux	avidemux/ADM_userInterfaces/ADM_GTK	avidemux/ADM_userInterfaces/ADM_QT4 plugins/ADM_videoFilters/Crop
</A></li>
        <LI>Next message: <A HREF="001413.html">[Avidemux-svn-commit] r4158 - in	branches/avidemux_2.5_branch_gruntster: avidemux	avidemux/ADM_core/src avidemux/ADM_coreImage/include	avidemux/ADM_coreUI/include avidemux/ADM_coreUI/src	avidemux/ADM_filter avidemux/ADM_libraries/ADM_utilities	avidemux/ADM_script avidemux/ADM_toolkit	avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog	avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2	avidemux/ADM_userInterfaces/ADM_NONE/ADM_gui2	avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui	plugins/ADM_videoFilters/Srt
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1412">[ date ]</a>
              <a href="thread.html#1412">[ thread ]</a>
              <a href="subject.html#1412">[ subject ]</a>
              <a href="author.html#1412">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: gruntster
Date: 2008-06-24 21:46:05 +0200 (Tue, 24 Jun 2008)
New Revision: 4157

Removed:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/eggtray_win32.c
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/eggtrayicon.c
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/eggtrayicon.h
Modified:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiocodec/ADM_codecmsadpcm.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiofilter/audiodeng_buildfilters.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/include/ADM_assert.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/include/ADM_misc.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/src/ADM_crashdump.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/src/ADM_fileio.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/src/ADM_misc.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_editor/ADM_Video.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_editor/ADM_Video.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_editor/ADM_edIdentify.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_editor/ADM_edLoadSave.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_editor/ADM_edit.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_editor/ADM_edit.hxx
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encConfig.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_amv/ADM_amv.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_amv/ADM_amv.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_asf/ADM_asf.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_asf/ADM_asf.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_avsproxy/ADM_avsproxy.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_avsproxy/ADM_avsproxy.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_flv/ADM_flv.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_flv/ADM_flv.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_h263/ADM_h263.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_h263/ADM_h263.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_h263/bitsRead.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_h263/bitsRead.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_inpics/ADM_pics.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_inpics/ADM_pics.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_matroska/ADM_mkv.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_matroska/ADM_mkv.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_mp4/ADM_mp4.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_mp4/ADM_mp4.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_mpegdemuxer/dmx_audio.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_mpegdemuxer/dmx_audio.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_mpegdemuxer/dmx_video.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_mpegdemuxer/dmx_video.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_nuv/ADM_nuv.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_nuv/ADM_nuv.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_ogm/ADM_ogm.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_ogm/ADM_ogm.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_ogm/ADM_ogmAudio.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_ogm/ADM_ogmpages.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_ogm/ADM_ogmpages.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_openDML/ADM_openDML.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_openDML/ADM_openDML.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_openDML/ADM_riff.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_openDML/ADM_riff.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libmpeg2enc/ad_layer.cc
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libmpeg2enc/synchrolib.cc
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_osSupport/ADM_crashHook.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_script/ADM_JSAvidemuxVideo.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_toolkit/automation.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/ADM_tray_gtk.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/ADM_tray.h
   branches/avidemux_2.5_branch_gruntster/avidemux/gui_action.names
   branches/avidemux_2.5_branch_gruntster/avidemux/xpm/avidemux_icon.xpm
   branches/avidemux_2.5_branch_gruntster/avidemux/xpm/begin.xpm
   branches/avidemux_2.5_branch_gruntster/avidemux/xpm/end.xpm
   branches/avidemux_2.5_branch_gruntster/avidemux/xpm/gnome-calculator.xpm
   branches/avidemux_2.5_branch_gruntster/avidemux/xpm/gnome-calculator_small.xpm
   branches/avidemux_2.5_branch_gruntster/avidemux/xpm/stop.xpm
   branches/avidemux_2.5_branch_gruntster/avidemux/xpm/systray.xpm
   branches/avidemux_2.5_branch_gruntster/avidemux/xpm/systray2.xpm
   branches/avidemux_2.5_branch_gruntster/po/es.po
Log:
[Merge] integrate changes from 2.4 branch (r4106)

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiocodec/ADM_codecmsadpcm.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiocodec/ADM_codecmsadpcm.cpp	2008-06-24 17:44:25 UTC (rev 4156)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiocodec/ADM_codecmsadpcm.cpp	2008-06-24 19:46:05 UTC (rev 4157)
@@ -226,3 +226,5 @@
         return 1;
   
 }
+
+// EOF

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiofilter/audiodeng_buildfilters.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiofilter/audiodeng_buildfilters.cpp	2008-06-24 17:44:25 UTC (rev 4156)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiofilter/audiodeng_buildfilters.cpp	2008-06-24 19:46:05 UTC (rev 4157)
@@ -56,7 +56,7 @@
 typedef struct externalSource
 {
  AudioSource type;
- const char *name;       
+ const char *name;
 }externalSource;
 
 static const externalSource Sources[]=
@@ -69,7 +69,7 @@
 };
 typedef struct Mixer_String
 {
-  const char   *name;
+  const char         *name;
   CHANNEL_CONF conf;
 };
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/include/ADM_assert.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/include/ADM_assert.h	2008-06-24 17:44:25 UTC (rev 4156)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/include/ADM_assert.h	2008-06-24 19:46:05 UTC (rev 4157)
@@ -99,7 +99,7 @@
         #define LLX &quot;I64x&quot;
         #define LLU &quot;I64u&quot;
         
-		char *ADM_slashToBackSlash(char *in);
+		char *ADM_slashToBackSlash(const char *in);
         #define ADM_cleanupPath(x) ADM_slashToBackSlash(x)
 #else
         #define LLX &quot;llx&quot;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/include/ADM_misc.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/include/ADM_misc.h	2008-06-24 17:44:25 UTC (rev 4156)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/include/ADM_misc.h	2008-06-24 19:46:05 UTC (rev 4157)
@@ -19,7 +19,7 @@
 
 void            TLK_getDate(ADM_date *date);
 // /dir/file.ext -&gt; /dir/file and ext returned values are copies
-void            ADM_PathSplit(char *str, char **root, char **ext);
+void            ADM_PathSplit(const char *str, char **root, char **ext);
 // Returns path only /foo/bar.avi -&gt; /foo INPLACE, no copy done
 void	        ADM_PathStripName(char *str);
 // Get the filename without path. /foo/bar.avi -&gt; bar.avi INPLACE, NO COPY

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/src/ADM_crashdump.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/src/ADM_crashdump.cpp	2008-06-24 17:44:25 UTC (rev 4156)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/src/ADM_crashdump.cpp	2008-06-24 19:46:05 UTC (rev 4157)
@@ -29,9 +29,6 @@
 
 #include &quot;ADM_default.h&quot;
 
-
-#define CRASH_FILE &quot;crash.js&quot;
-
 // Our callback to give UI formatted informations....
 static ADM_saveFunction *mysaveFunction=NULL;
 static ADM_fatalFunction *myFatalFunction=NULL;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/src/ADM_fileio.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/src/ADM_fileio.cpp	2008-06-24 17:44:25 UTC (rev 4156)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/src/ADM_fileio.cpp	2008-06-24 19:46:05 UTC (rev 4157)
@@ -497,7 +497,7 @@
     \brief Split path into absolute path+name and extention i.e. /foo/bar/zee.avi -&gt; /foo/bar/zee,avi.             Copy are returned
 
 */
-void ADM_PathSplit(char *str, char **root, char **ext)
+void ADM_PathSplit(const char *str, char **root, char **ext)
 {
 	char *full;
 	uint32_t l;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/src/ADM_misc.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/src/ADM_misc.cpp	2008-06-24 17:44:25 UTC (rev 4156)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/src/ADM_misc.cpp	2008-06-24 19:46:05 UTC (rev 4157)
@@ -236,7 +236,7 @@
     This function convert the later to the former
 
 */
-extern char *ADM_slashToBackSlash(char *in)
+extern char *ADM_slashToBackSlash(const char *in)
 {
     char *out,*cout;
     int n;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_editor/ADM_Video.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_editor/ADM_Video.cpp	2008-06-24 17:44:25 UTC (rev 4156)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_editor/ADM_Video.cpp	2008-06-24 19:46:05 UTC (rev 4157)
@@ -102,7 +102,7 @@
   return 1;
 }
 
-uint8_t vidHeader::setMyName (char *name)
+uint8_t vidHeader::setMyName (const char *name)
 {
   _name = new char[strlen (name) + 1];
   ADM_assert (_name);

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_editor/ADM_Video.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_editor/ADM_Video.h	2008-06-24 17:44:25 UTC (rev 4156)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_editor/ADM_Video.h	2008-06-24 19:46:05 UTC (rev 4157)
@@ -73,7 +73,7 @@
 virtual   void 			Dump(void)=0;
 virtual	  uint8_t		getExtraHeaderData(uint32_t *len, uint8_t **data);
 // AVI io
-virtual 	uint8_t		open(char *name)=0;
+virtual 	uint8_t		open(const char *name)=0;
 virtual 	uint8_t		close(void)=0;
 virtual	uint8_t			reorder( void ) { return 0;} // by default we don&quot;t do frame re-ordering
 virtual	uint8_t			isReordered( void ) { return 0;} // by default we don&quot;t do frame re-ordering
@@ -83,7 +83,7 @@
   uint8_t			getVideoInfo(aviInfo *info);
   uint32_t			getWidth( void ) { return _mainaviheader.dwWidth;};
   uint32_t			getHeight( void ) { return _mainaviheader.dwHeight;};
-  uint8_t			setMyName( char *name);
+  uint8_t			setMyName( const char *name);
   char				*getMyName( void);
   //__________________________
   //				 Audio

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_editor/ADM_edIdentify.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_editor/ADM_edIdentify.cpp	2008-06-24 17:44:25 UTC (rev 4156)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_editor/ADM_edIdentify.cpp	2008-06-24 19:46:05 UTC (rev 4157)
@@ -43,7 +43,7 @@
 /**
 	Read the magic of a file i.e. its 16 first bytes
 */
-uint8_t ADM_Composer::getMagic (char *name, uint32_t * magic)
+uint8_t ADM_Composer::getMagic (const char *name, uint32_t * magic)
 {
   FILE *    tmp;
   uint8_t    ret =    1;
@@ -66,7 +66,7 @@
 
 */
 
-uint8_t ADM_Composer::identify (char *name, fileType * type)
+uint8_t ADM_Composer::identify (const char *name, fileType * type)
 {
   uint32_t magic[4];
   uint32_t id;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_editor/ADM_edLoadSave.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_editor/ADM_edLoadSave.cpp	2008-06-24 17:44:25 UTC (rev 4156)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_editor/ADM_edLoadSave.cpp	2008-06-24 19:46:05 UTC (rev 4157)
@@ -65,7 +65,7 @@
 // Save the config, including name, segment etc...
 //______________________________________________
 
-uint8_t ADM_Composer::saveWorbench (char *name)
+uint8_t ADM_Composer::saveWorbench (const char *name)
 {
         GUI_Error_HIG(QT_TR_NOOP(&quot;Unsupported&quot;), NULL);
         return 0;
@@ -73,7 +73,7 @@
 /*______________________________________________
         Save the project as a script
 ______________________________________________*/
-uint8_t ADM_Composer::saveAsScript (char *name, char *outputname)
+uint8_t ADM_Composer::saveAsScript (const char *name, const char *outputname)
 {
 const char *truefalse[]={&quot;false&quot;,&quot;true&quot;};
 printf(&quot;\n **Saving script project **\n&quot;);
@@ -293,7 +293,7 @@
 // Save the config, including name, segment etc...
 //______________________________________________
 
-uint8_t ADM_Composer::loadWorbench (char *name)
+uint8_t ADM_Composer::loadWorbench (const char *name)
 {
   GUI_Error_HIG(QT_TR_NOOP(&quot;Old format project file&quot;),QT_TR_NOOP( &quot;No more supported.&quot;));
  return 0;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_editor/ADM_edit.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_editor/ADM_edit.cpp	2008-06-24 17:44:25 UTC (rev 4156)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_editor/ADM_edit.cpp	2008-06-24 19:46:05 UTC (rev 4157)
@@ -66,7 +66,7 @@
 void DIA_indexerPrefill(char *name);
 extern uint8_t indexMpeg (char *mpeg, char *file, uint8_t aid);
 
-extern uint8_t loadVideoCodecConf( char *name);
+extern uint8_t loadVideoCodecConf( const char *name);
 extern uint8_t parseScript(char *name);
 uint8_t UI_SetCurrentFormat( ADM_OUT_FORMAT fmt );
 const char *VBR_MSG = QT_TR_NOOP(&quot;Avidemux detected VBR MP3 audio in this file. For keeping audio/video in sync, time map is needed. Build it now?\n\nYou can do it later with \&quot;Audio -&gt; Build VBR Time Map\&quot;.&quot;);
@@ -252,7 +252,7 @@
         
 
 */
-uint8_t ADM_Composer::addFile (char *name, uint8_t mode,fileType forcedType)
+uint8_t ADM_Composer::addFile (const char *name, uint8_t mode,fileType forcedType)
 {
   uint8_t    ret =    0;
   aviInfo    info;
@@ -582,23 +582,26 @@
 
                 }
 		printf(&quot;\n checking for B-Frames...\n&quot;);
-		if( vid-&gt;_nb_video_frames &gt;12) // 12
+		if( vid-&gt;_nb_video_frames &gt; 12)
 		{
 				uint8_t 		*bufferin;
 				uint32_t 		len,flags;
 				uint8_t 		bframe=0, bconsistency=1;
-				uint32_t		scanned=12;
+				uint32_t		scanned;
                                 ADMImage                *buffer=NULL;
-				//buffer=new uint8_t [info.width* info.height*2];
-				if(vid-&gt;_nb_video_frames&gt;50) scanned=50;
+
+				if(vid-&gt;_nb_video_frames &gt; (info.fps1000 * 5) / 1000)
+					scanned = (info.fps1000 * 5) / 1000;
 				else				scanned=vid-&gt;_nb_video_frames;
+
+				printf(&quot; scanning %lu frames\n&quot;, scanned);
 				
 				bufferin=new uint8_t [info.width* info.height*2];
                                 if(vid-&gt;decoder-&gt;dontcopy())
                                         buffer=new ADMImage(info.width,info.height,1);
                                 else
 				        buffer=new ADMImage(info.width,info.height);
-				// we decode 5 frames..should be enough to get an opinion
+
                                 ADMCompressedImage img;
                                 img.data=bufferin;
 				for(uint32_t i=0;i&lt;scanned;i++)  //10
@@ -1498,7 +1501,7 @@
 //              0 else
 //_________________________________________
 //
-uint8_t         ADM_Composer::tryIndexing(char *name,char *idxname)
+uint8_t         ADM_Composer::tryIndexing(const char *name, const char *idxname)
 {
  unsigned int autoidx = 0;
       prefs-&gt;get(FEATURE_TRYAUTOIDX,&amp;autoidx);

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_editor/ADM_edit.hxx
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_editor/ADM_edit.hxx	2008-06-24 17:44:25 UTC (rev 4156)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_editor/ADM_edit.hxx	2008-06-24 19:46:05 UTC (rev 4157)
@@ -153,10 +153,10 @@
 				       		uint8_t  	updateAudioTrack(uint32_t seg);			   	
 						void 		deleteAllVideos(void );
 
-						uint8_t 	getMagic(char *name,uint32_t *magic);
-						uint8_t 	identify(char *name, fileType *type);
+						uint8_t 	getMagic(const char *name,uint32_t *magic);
+						uint8_t 	identify(const char *name, fileType *type);
 						uint32_t 	searchForwardSeg(uint32_t startframe);
-                                                uint8_t         tryIndexing(char *name,char *idxname=NULL);
+                                                uint8_t         tryIndexing(const char *name, const char *idxname=NULL);
 
   public:
                                                 uint8_t hasVBRVideos(void);
@@ -170,9 +170,9 @@
   				virtual 			~ADM_Composer();
   						void		clean( void );
   						void		dumpSeg(void);
-                                                uint8_t         saveAsScript (char *name,char *out);
-						uint8_t 	saveWorbench(char *name)      ;
-						uint8_t 	loadWorbench(char *name)      ;
+                                                uint8_t         saveAsScript (const char *name, const char *out);
+						uint8_t 	saveWorbench(const char *name);
+						uint8_t 	loadWorbench(const char *name);
 						uint8_t     resetSeg( void );
 						uint8_t	reorder( void );
 						uint8_t	isReordered( uint32_t framenum );
@@ -180,7 +180,7 @@
   				//_______________________
   				// specific to composer
   				//_______________________
-  						uint8_t 	addFile (char *name, uint8_t mode=0,fileType forcedType=Unknown_FileType);
+  						uint8_t 	addFile (const char *name, uint8_t mode=0,fileType forcedType=Unknown_FileType);
   						uint8_t 	cleanup( void);
 			   			uint8_t 	isMultiSeg( void) { if(_nb_segment&gt;1) return 1; else return 0;}
   						uint8_t 	removeFrames(uint32_t start,uint32_t end);

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encConfig.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encConfig.cpp	2008-06-24 17:44:25 UTC (rev 4156)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encConfig.cpp	2008-06-24 19:46:05 UTC (rev 4157)
@@ -638,7 +638,8 @@
 	(given as sole argument)
 
 */
-uint8_t loadVideoCodecConf (char *name)
+uint8_t
+loadVideoCodecConf (const char *name)
 {
 	if (currentCodecType == CodecExternal)
 		videoCodecSetConf(strlen(name), (uint8_t*)name);
@@ -690,7 +691,8 @@
 	return 1;
 }
 
-uint8_t loadVideoCodecConfString(char *cmd)
+uint8_t
+loadVideoCodecConfString (const char *cmd)
 {
 #define MAX_STRING 4000
 	char str[MAX_STRING * 3];

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_amv/ADM_amv.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_amv/ADM_amv.cpp	2008-06-24 17:44:25 UTC (rev 4156)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_amv/ADM_amv.cpp	2008-06-24 19:46:05 UTC (rev 4157)
@@ -83,7 +83,7 @@
       \brief open the flv file, gather infos and build index(es).
 */
 
-uint8_t amvHeader::open(char *name)
+uint8_t amvHeader::open(const char *name)
 {
   uint32_t prevLen, type, size, pts,pos=0;
   

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_amv/ADM_amv.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_amv/ADM_amv.h	2008-06-24 17:44:25 UTC (rev 4156)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_amv/ADM_amv.h	2008-06-24 19:46:05 UTC (rev 4157)
@@ -105,7 +105,7 @@
             amvHeader( void );
    virtual  ~amvHeader(  ) ;
 // AVI io
-    virtual uint8_t  open(char *name);
+    virtual uint8_t  open(const char *name);
     virtual uint8_t  close(void) ;
   //__________________________
   //  Info

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_asf/ADM_asf.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_asf/ADM_asf.cpp	2008-06-24 17:44:25 UTC (rev 4156)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_asf/ADM_asf.cpp	2008-06-24 19:46:05 UTC (rev 4157)
@@ -141,7 +141,7 @@
     __________________________________________________________
 */
 
-uint8_t asfHeader::open(char *name)
+uint8_t asfHeader::open(const char *name)
 {
   _fd=fopen(name,&quot;rb&quot;);
   if(!_fd)

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_asf/ADM_asf.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_asf/ADM_asf.h	2008-06-24 17:44:25 UTC (rev 4156)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_asf/ADM_asf.h	2008-06-24 19:46:05 UTC (rev 4157)
@@ -166,7 +166,7 @@
              asfHeader( void );
     virtual  ~asfHeader(  ) ;
 // AVI io
-    virtual uint8_t  open(char *name);
+    virtual uint8_t  open(const char *name);
     virtual uint8_t  close(void) ;
   //__________________________
   //  Info

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_avsproxy/ADM_avsproxy.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_avsproxy/ADM_avsproxy.cpp	2008-06-24 17:44:25 UTC (rev 4156)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_avsproxy/ADM_avsproxy.cpp	2008-06-24 19:46:05 UTC (rev 4157)
@@ -36,7 +36,7 @@
 }
 
 
-uint8_t avsHeader::open(char *name)
+uint8_t avsHeader::open(const char *name)
 {
     mySocket=0;
     if(!bindMe(9999))

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_avsproxy/ADM_avsproxy.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_avsproxy/ADM_avsproxy.h	2008-06-24 17:44:25 UTC (rev 4156)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_avsproxy/ADM_avsproxy.h	2008-06-24 19:46:05 UTC (rev 4157)
@@ -30,7 +30,7 @@
         avsHeader( void );
         ~avsHeader(  );
 // AVI io
-        virtual 	uint8_t			open(char *name);
+        virtual 	uint8_t			open(const char *name);
         virtual 	uint8_t			close(void) ;
   //__________________________
   //				 Info

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_flv/ADM_flv.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_flv/ADM_flv.cpp	2008-06-24 17:44:25 UTC (rev 4156)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_flv/ADM_flv.cpp	2008-06-24 19:46:05 UTC (rev 4157)
@@ -86,7 +86,7 @@
       \brief open the flv file, gather infos and build index(es).
 */
 
-uint8_t flvHeader::open(char *name)
+uint8_t flvHeader::open(const char *name)
 {
   uint32_t prevLen, type, size, pts,pos=0;
   

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_flv/ADM_flv.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_flv/ADM_flv.h	2008-06-24 17:44:25 UTC (rev 4156)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_flv/ADM_flv.h	2008-06-24 19:46:05 UTC (rev 4157)
@@ -110,7 +110,7 @@
             flvHeader( void );
    virtual  ~flvHeader(  ) ;
 // AVI io
-    virtual uint8_t  open(char *name);
+    virtual uint8_t  open(const char *name);
     virtual uint8_t  close(void) ;
   //__________________________
   //  Info

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_h263/ADM_h263.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_h263/ADM_h263.cpp	2008-06-24 17:44:25 UTC (rev 4156)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_h263/ADM_h263.cpp	2008-06-24 19:46:05 UTC (rev 4157)
@@ -104,7 +104,7 @@
 // Open and index the (small) h263
 //
 //______________________________________
-uint8_t    h263Header::open(char *name)
+uint8_t    h263Header::open(const char *name)
 {
 	uint32_t w,h,res=255,nbImg=0;
 	uint32_t word;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_h263/ADM_h263.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_h263/ADM_h263.h	2008-06-24 17:44:25 UTC (rev 4156)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_h263/ADM_h263.h	2008-06-24 19:46:05 UTC (rev 4157)
@@ -49,7 +49,7 @@
 			h263Header( void ) {_fd=NULL;};
        		    	~h263Header(  ) { };
 // AVI io
-virtual 	uint8_t			open(char *name);
+virtual 	uint8_t			open(const char *name);
 virtual 	uint8_t			close(void) ;
   //__________________________
   //				 Info

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_h263/bitsRead.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_h263/bitsRead.cpp	2008-06-24 17:44:25 UTC (rev 4156)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_h263/bitsRead.cpp	2008-06-24 19:46:05 UTC (rev 4157)
@@ -28,7 +28,6 @@
 #include &quot;ADM_h263.h&quot;
 #include &quot;bitsRead.h&quot;
 
-#include &quot;bitsRead.h&quot;
 const int mask[9]={
 0,
 1,
@@ -125,7 +124,7 @@
 
 			}
 }
-uint8_t bitsReader::open(char *name)
+uint8_t bitsReader::open(const char *name)
 {
 	_fd=fopen(name,&quot;rb&quot;);
 	if(!_fd) return 0;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_h263/bitsRead.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_h263/bitsRead.h	2008-06-24 17:44:25 UTC (rev 4156)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_h263/bitsRead.h	2008-06-24 19:46:05 UTC (rev 4157)
@@ -15,7 +15,7 @@
 
 public:
 			bitsReader(void);
-	uint8_t		open(char *name);
+	uint8_t		open(const char *name);
 			~bitsReader();
 	uint8_t 	forward(uint32_t nbBits);
 	uint8_t 	read(uint32_t nbBits,uint32_t *val);

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_inpics/ADM_pics.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_inpics/ADM_pics.cpp	2008-06-24 17:44:25 UTC (rev 4156)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_inpics/ADM_pics.cpp	2008-06-24 19:46:05 UTC (rev 4157)
@@ -124,7 +124,7 @@
     return i;
 }
 //****************************************************************
-uint8_t picHeader::open(char *inname)
+uint8_t picHeader::open(const char *inname)
 {
     uint32_t nnum;
     uint32_t *fcc;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_inpics/ADM_pics.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_inpics/ADM_pics.h	2008-06-24 17:44:25 UTC (rev 4156)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_inpics/ADM_pics.h	2008-06-24 19:46:05 UTC (rev 4157)
@@ -57,7 +57,7 @@
 			picHeader( void );
        		    ~picHeader(  ) { };
 // AVI io
-virtual 	uint8_t			open(char *name);
+virtual 	uint8_t			open(const char *name);
 virtual 	uint8_t			close(void) ;
   //__________________________
   //				 Info

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_matroska/ADM_mkv.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_matroska/ADM_mkv.cpp	2008-06-24 17:44:25 UTC (rev 4156)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_matroska/ADM_mkv.cpp	2008-06-24 19:46:05 UTC (rev 4157)
@@ -29,7 +29,7 @@
     __________________________________________________________
 */
 
-uint8_t mkvHeader::open(char *name)
+uint8_t mkvHeader::open(const char *name)
 {
 
   ADM_ebml_file ebml;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_matroska/ADM_mkv.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_matroska/ADM_mkv.h	2008-06-24 17:44:25 UTC (rev 4156)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_matroska/ADM_mkv.h	2008-06-24 19:46:05 UTC (rev 4157)
@@ -134,7 +134,7 @@
             mkvHeader( void );
    virtual  ~mkvHeader(  ) ;
 // AVI io
-    virtual uint8_t  open(char *name);
+    virtual uint8_t  open(const char *name);
     virtual uint8_t  close(void) ;
   //__________________________
   //  Info

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_mp4/ADM_mp4.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_mp4/ADM_mp4.cpp	2008-06-24 17:44:25 UTC (rev 4156)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_mp4/ADM_mp4.cpp	2008-06-24 19:46:05 UTC (rev 4157)
@@ -198,7 +198,7 @@
 // other stuff which are pretty useless on
 // 3gp file anyway.
 //______________________________________
-uint8_t    MP4Header::open(char *name)
+uint8_t    MP4Header::open(const char *name)
 {
         printf(&quot;** opening 3gpp files **&quot;);	
         _fd=fopen(name,&quot;rb&quot;);

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_mp4/ADM_mp4.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_mp4/ADM_mp4.h	2008-06-24 17:44:25 UTC (rev 4156)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_mp4/ADM_mp4.h	2008-06-24 19:46:05 UTC (rev 4157)
@@ -157,7 +157,7 @@
                                 MP4Header( void ) ;
 virtual	                        ~MP4Header(  ) ;
 // AVI io
-virtual 	uint8_t	       open(char *name);
+virtual 	uint8_t	       open(const char *name);
 virtual 	uint8_t	       close(void) ;
   //__________________________
   //				 Info

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_mpegdemuxer/dmx_audio.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_mpegdemuxer/dmx_audio.cpp	2008-06-24 17:44:25 UTC (rev 4156)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_mpegdemuxer/dmx_audio.cpp	2008-06-24 19:46:05 UTC (rev 4157)
@@ -75,7 +75,7 @@
   _index=NULL;
 }
 uint8_t
-dmxAudioStream::open (char *name)
+dmxAudioStream::open (const char *name)
 {
   FILE *file;
   uint32_t dummy;		//,audio=0;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_mpegdemuxer/dmx_audio.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_mpegdemuxer/dmx_audio.h	2008-06-24 17:44:25 UTC (rev 4156)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_mpegdemuxer/dmx_audio.h	2008-06-24 19:46:05 UTC (rev 4157)
@@ -56,7 +56,7 @@
                 public:
                 uint32_t        currentTrack;
                                 dmxAudioStream( void);
-                uint8_t         open(char *name);
+                uint8_t         open(const char *name);
         virtual                 ~dmxAudioStream() ;                    
         virtual uint8_t         goTo(uint32_t offset);
         virtual uint32_t        read(uint32_t size,uint8_t *ptr);

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_mpegdemuxer/dmx_video.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_mpegdemuxer/dmx_video.cpp	2008-06-24 17:44:25 UTC (rev 4156)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_mpegdemuxer/dmx_video.cpp	2008-06-24 19:46:05 UTC (rev 4157)
@@ -171,7 +171,7 @@
 
 */
 #define MAX_LINE 4096
-uint8_t                 dmxHeader::open(char *name)
+uint8_t                 dmxHeader::open(const char *name)
 {
                 FILE *file;
         

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_mpegdemuxer/dmx_video.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_mpegdemuxer/dmx_video.h	2008-06-24 17:44:25 UTC (rev 4156)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_mpegdemuxer/dmx_video.h	2008-06-24 19:46:05 UTC (rev 4157)
@@ -42,7 +42,7 @@
 
 
 // AVI io
-        virtual         uint8_t                 open(char *name);
+        virtual         uint8_t                 open(const char *name);
         virtual         uint8_t                 close(void);
   //__________________________
   //                             Info

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_nuv/ADM_nuv.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_nuv/ADM_nuv.cpp	2008-06-24 17:44:25 UTC (rev 4156)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_nuv/ADM_nuv.cpp	2008-06-24 19:46:05 UTC (rev 4157)
@@ -421,7 +421,7 @@
 
 
 */
-uint8_t    nuvHeader::open(char *name)
+uint8_t    nuvHeader::open(const char *name)
 {
 uint32_t a=0,v=0,t=0;
 uint32_t max=0;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_nuv/ADM_nuv.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_nuv/ADM_nuv.h	2008-06-24 17:44:25 UTC (rev 4156)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_nuv/ADM_nuv.h	2008-06-24 19:46:05 UTC (rev 4157)
@@ -107,7 +107,7 @@
 					nuvHeader( void ) ;
 		   virtual  		~nuvHeader(  ) ;
 // AVI io
-virtual 	uint8_t			open(char *name);
+virtual 	uint8_t			open(const char *name);
 virtual 	uint8_t			close(void) ;
   //__________________________
   //				 Info

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_ogm/ADM_ogm.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_ogm/ADM_ogm.cpp	2008-06-24 17:44:25 UTC (rev 4156)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_ogm/ADM_ogm.cpp	2008-06-24 19:46:05 UTC (rev 4157)
@@ -149,7 +149,7 @@
 
 
 
-uint8_t oggHeader::open(char *name)
+uint8_t oggHeader::open(const char *name)
 {
 #ifdef ADM_BIG_ENDIAN
 	#define SWAP64(x) { uint64_t y=x;x=R32((y&gt;&gt;16)&gt;&gt;16)+((R32(y&amp;0x0ffffffff)&lt;&lt;16)&lt;&lt;16);}

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_ogm/ADM_ogm.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_ogm/ADM_ogm.h	2008-06-24 17:44:25 UTC (rev 4156)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_ogm/ADM_ogm.h	2008-06-24 19:46:05 UTC (rev 4157)
@@ -61,7 +61,7 @@
  			
 				
 		public:
-					oggAudio( char *name,OgAudioTrack *tracks,uint8_t trkidx );
+					oggAudio(const char *name,OgAudioTrack *tracks,uint8_t trkidx );
 			virtual 	~oggAudio() ;
 			virtual uint8_t goTo(uint32_t offset);
 			virtual uint32_t read(uint32_t size,uint8_t *ptr);
@@ -101,7 +101,7 @@
 					oggHeader( void ) ;
 		   virtual  		~oggHeader(  ) ;
 // AVI io
-virtual 	uint8_t			open(char *name);
+virtual 	uint8_t			open(const char *name);
 virtual 	uint8_t			close(void) ;
   //__________________________
   //				 Info

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_ogm/ADM_ogmAudio.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_ogm/ADM_ogmAudio.cpp	2008-06-24 17:44:25 UTC (rev 4156)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_ogm/ADM_ogmAudio.cpp	2008-06-24 19:46:05 UTC (rev 4157)
@@ -50,7 +50,7 @@
 
 }
 
-oggAudio::oggAudio( char *name,OgAudioTrack *tracks,uint8_t trkidx )
+oggAudio::oggAudio(const char *name,OgAudioTrack *tracks,uint8_t trkidx )
 {
 uint64_t f;
 	_tracks=tracks;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_ogm/ADM_ogmpages.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_ogm/ADM_ogmpages.cpp	2008-06-24 17:44:25 UTC (rev 4156)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_ogm/ADM_ogmpages.cpp	2008-06-24 19:46:05 UTC (rev 4157)
@@ -40,7 +40,7 @@
 
 }
 
-uint8_t OGMDemuxer::open(char *name)
+uint8_t OGMDemuxer::open(const char *name)
 {
 		_fd=fopen(name,&quot;rb&quot;);
 		if(!_fd) return 0;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_ogm/ADM_ogmpages.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_ogm/ADM_ogmpages.h	2008-06-24 17:44:25 UTC (rev 4156)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_ogm/ADM_ogmpages.h	2008-06-24 19:46:05 UTC (rev 4157)
@@ -36,7 +36,7 @@
 						OGMDemuxer(void);
 						~OGMDemuxer();
 			uint8_t		dumpHeaders(uint8_t *ptr,uint32_t *size);
-			uint8_t 		open(char *file);			
+			uint8_t 		open(const char *file);			
 			uint8_t		setPos( uint64_t pos );
 			uint8_t		readHeader(uint32_t *paySize, uint32_t *flag,uint64_t *frame,
 							uint8_t *id);

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_openDML/ADM_openDML.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_openDML/ADM_openDML.cpp	2008-06-24 17:44:25 UTC (rev 4156)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_openDML/ADM_openDML.cpp	2008-06-24 19:46:05 UTC (rev 4157)
@@ -179,7 +179,7 @@
 // Open and get the headears/index built
 // along way
 //______________________________________
-uint8_t    OpenDMLHeader::open(char *name)
+uint8_t    OpenDMLHeader::open(const char *name)
 {
 uint8_t badAvi=0;
 uint32_t rd;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_openDML/ADM_openDML.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_openDML/ADM_openDML.h	2008-06-24 17:44:25 UTC (rev 4156)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_openDML/ADM_openDML.h	2008-06-24 19:46:05 UTC (rev 4157)
@@ -123,7 +123,7 @@
 					OpenDMLHeader( void ) ;
        		    			~OpenDMLHeader(  ) ;
 // AVI io
-virtual 	uint8_t			open(char *name);
+virtual 	uint8_t			open(const char *name);
 virtual 	uint8_t			close(void) ;
   //__________________________
   //				 Info

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_openDML/ADM_riff.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_openDML/ADM_riff.cpp	2008-06-24 17:44:25 UTC (rev 4156)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_openDML/ADM_riff.cpp	2008-06-24 19:46:05 UTC (rev 4157)
@@ -78,7 +78,7 @@
 		
 	}
 }
-riffParser::riffParser(char *name)
+riffParser::riffParser(const char *name)
 {
 	ADM_assert(fd=fopen(name,&quot;rb&quot;));
 	startPos=0;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_openDML/ADM_riff.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_openDML/ADM_riff.h	2008-06-24 17:44:25 UTC (rev 4156)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_openDML/ADM_riff.h	2008-06-24 19:46:05 UTC (rev 4157)
@@ -9,7 +9,7 @@
 	uint64_t curPos;
 	uint8_t  _root;
 
-	riffParser(char *name);
+	riffParser(const char *name);
 	riffParser(riffParser *o, uint32_t size);
 	~riffParser();
 	uint64_t getPos( void );

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libmpeg2enc/ad_layer.cc
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libmpeg2enc/ad_layer.cc	2008-06-24 17:44:25 UTC (rev 4156)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libmpeg2enc/ad_layer.cc	2008-06-24 19:46:05 UTC (rev 4157)
@@ -36,4 +36,4 @@
 	}
 	nb_alloc=0;
 
-}
\ No newline at end of file
+}

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libmpeg2enc/synchrolib.cc
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libmpeg2enc/synchrolib.cc	2008-06-24 17:44:25 UTC (rev 4156)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libmpeg2enc/synchrolib.cc	2008-06-24 19:46:05 UTC (rev 4157)
@@ -25,4 +25,4 @@
    work properly if the same thread does the locking and unlocking. Gaah!
  */
 
-// MEANX : removed, not used &amp; cause problem on cygwin
\ No newline at end of file
+// MEANX : removed, not used &amp; cause problem on cygwin

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_osSupport/ADM_crashHook.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_osSupport/ADM_crashHook.cpp	2008-06-24 17:44:25 UTC (rev 4156)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_osSupport/ADM_crashHook.cpp	2008-06-24 19:46:05 UTC (rev 4157)
@@ -33,7 +33,7 @@
 void saveCrashProject(void)
 {
   char *baseDir=ADM_getBaseDir();
-  char *name=CRASH_FILE;
+  const char *name=CRASH_FILE;
   static int crashCount=0;
   if(crashCount) return ; // avoid endless looping
   crashCount++;
@@ -53,7 +53,7 @@
 void checkCrashFile(void)
 {
   char *baseDir=ADM_getBaseDir();
-  char *name=CRASH_FILE;
+  const char *name=CRASH_FILE;
   static int crashCount=0;
   char *where=new char[strlen(baseDir)+strlen(name)+2];
   strcpy(where,baseDir);

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_script/ADM_JSAvidemuxVideo.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_script/ADM_JSAvidemuxVideo.cpp	2008-06-24 17:44:25 UTC (rev 4156)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_script/ADM_JSAvidemuxVideo.cpp	2008-06-24 19:46:05 UTC (rev 4157)
@@ -31,10 +31,10 @@
 
 extern VF_FILTERS filterGetTagFromName(const char *inname);
 extern uint8_t A_ListAllBlackFrames( char *file );
-extern uint8_t loadVideoCodecConfString( char *name);
+extern uint8_t loadVideoCodecConfString( const char *name);
 extern uint8_t ADM_saveRaw (const char *name);
 extern int A_saveJpg (char *name);
-extern uint8_t loadVideoCodecConf( char *name);
+extern uint8_t loadVideoCodecConf( const char *name);
 extern void filterCleanUp( void );
 
 JSPropertySpec ADM_JSAvidemuxVideo::avidemuxvideo_properties[] = 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_toolkit/automation.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_toolkit/automation.cpp	2008-06-24 17:44:25 UTC (rev 4156)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_toolkit/automation.cpp	2008-06-24 19:46:05 UTC (rev 4157)
@@ -47,7 +47,7 @@
 
 extern void filterListAll(void );
 
-extern uint8_t loadVideoCodecConf( char *name);
+extern uint8_t loadVideoCodecConf( const char *name);
 extern int A_saveJpg (char *name);
 extern void filterLoadXml(char *n);
 extern int A_openAvi(char *name);

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp	2008-06-24 17:44:25 UTC (rev 4156)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp	2008-06-24 19:46:05 UTC (rev 4157)
@@ -92,20 +92,21 @@
 
         gtk_widget_show(dialog);
 
-        if(useTray)
-        {
-              gtk_window_iconify(GTK_WINDOW(dialog));
-              UI_iconify();
-        }
+		if (useTray)
+		{
+			gtk_window_iconify(GTK_WINDOW(dialog));
+			UI_iconify();
+			tray = new ADM_tray(dialog);
+		}
+		else
+			tray = NULL;
+
         _lastTime=0;
         _lastFrame=0;
         _fps_average=0;
-        tray=NULL;
         _total=1000;
-        if(useTray)
-                tray=new ADM_tray(&quot;Encoding&quot;);
+}
 
-}
 void DIA_encoding::setFps(uint32_t fps)
 {
         _roundup=(uint32_t )floor( (fps+999)/1000);

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/ADM_tray_gtk.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/ADM_tray_gtk.cpp	2008-06-24 17:44:25 UTC (rev 4156)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/ADM_tray_gtk.cpp	2008-06-24 19:46:05 UTC (rev 4157)
@@ -1,13 +1,11 @@
 /***************************************************************************
-                          adm_encdivx.cpp  -  description
-                             -------------------
+                              ADM_tray_gtk.cpp
+                              ----------------
+
     begin                : Sun Jul 14 2002
-    copyright            : (C) 2002 by mean
+    copyright            : (C) 2002 by mean/gruntster
     email                : <A HREF="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">fixounet at free.fr</A>
 
-
-Derived from MLdonkey systray code
-<A HREF="http://savannah.nongnu.org/cvs/?group=mldonkey">http://savannah.nongnu.org/cvs/?group=mldonkey</A>
  ***************************************************************************/
 
 /***************************************************************************
@@ -19,76 +17,108 @@
  *                                                                         *
  ***************************************************************************/
 
+#include &quot;config.h&quot;
+
+#include &lt;string.h&gt;
+#include &lt;stdio.h&gt;
+
 #include &quot;ADM_toolkitGtk.h&quot;
 #include &quot;ADM_tray.h&quot;
-extern &quot;C&quot;
+
+extern void UI_deiconify(void);
+
+static GdkPixbuf **pixbuf = NULL;
+static int lastIcon;
+
+static const char *animated[] = {
+	&quot;film1.png&quot;,&quot;film3.png&quot;,&quot;film5.png&quot;,&quot;film7.png&quot;,&quot;film9.png&quot;,
+	&quot;film11.png&quot;,&quot;film13.png&quot;,&quot;film15.png&quot;,&quot;film17.png&quot;,&quot;film19.png&quot;,
+	&quot;film21.png&quot;,&quot;film23.png&quot;};
+
+void tray_icon_on_click(GtkStatusIcon *status_icon, gpointer user_data)
 {
-#include &quot;systray.h&quot;
+	gtk_window_deiconify(GTK_WINDOW(user_data));
+	UI_deiconify();
 }
-static int nbTray=0;
-static  GdkPixbuf   **pixbuf=NULL;
 
-extern GdkPixbuf        *create_pixbuf                  (const gchar     *filename);
-/*
-class ADM_tray
+static void tray_menu_open_avidemux(GtkStatusIcon *status_icon, gpointer user_data)
 {
-protected:
+	gtk_window_deiconify(GTK_WINDOW(user_data));
+	UI_deiconify();
+}
 
-public:
-        ADM_tray(char *name);
-        ~ADM_tray();
-        setPercent(int percent);
-        setStatus(int working);
+static void tray_icon_popup_menu(GtkStatusIcon *status_icon, guint button, guint activate_time, gpointer user_data)
+{
+	GtkWidget *popupMenu = gtk_menu_new();
+	GtkWidget *item = gtk_menu_item_new_with_label(QT_TR_NOOP(&quot;Open Avidemux&quot;));
 
-};*/
-static const char *animated[]={
-    &quot;film1.png&quot;,&quot;film3.png&quot;,&quot;film5.png&quot;,&quot;film7.png&quot;,&quot;film9.png&quot;,
-    &quot;film11.png&quot;,&quot;film13.png&quot;,&quot;film15.png&quot;,&quot;film17.png&quot;,&quot;film19.png&quot;,
-    &quot;film21.png&quot;,&quot;film23.png&quot;};
-ADM_tray::ADM_tray(char *name)
+	gtk_menu_append(popupMenu, item);
+	g_signal_connect(G_OBJECT(item), &quot;activate&quot;, G_CALLBACK(tray_menu_open_avidemux), user_data);
+
+	gtk_widget_show_all(popupMenu);
+	gtk_menu_popup(GTK_MENU(popupMenu), NULL, NULL, gtk_status_icon_position_menu, status_icon, button, activate_time);
+}
+
+ADM_tray::ADM_tray(void* parent)
 {
-        ADM_assert(!nbTray);
-        nbTray++;
+	_parent = parent;
+	lastIcon = 0;
+	int nb = sizeof(animated) / sizeof(char *);
 
+	if (!pixbuf)
+	{
+		pixbuf = new GdkPixbuf*[nb];
 
-  int nb=sizeof(animated)/sizeof(char *);
-  if(!pixbuf)
-  {
-      pixbuf=new GdkPixbuf*[nb];
-      for(int i=0;i&lt;nb;i++)
-      {
-        pixbuf[i]=create_pixbuf(animated[i]);
-        if(!pixbuf[i])
-        {
-          printf(&quot;Failed to create &lt;%s&gt;\n&quot;,animated[i]);
-          ADM_assert(0);
-        }
-      }
+		for (int i = 0; i &lt; nb; i++)
+		{
+			pixbuf[i] = create_pixbuf(animated[i]);
 
-  }
-  sys=adm_new_systray(pixbuf,nb,name);
+			if (!pixbuf[i])
+			{
+				printf(&quot;Failed to create &lt;%s&gt;\n&quot;, animated[i]);
+				ADM_assert(0);
+			}
+		}
+	}
 
+	sys = gtk_status_icon_new_from_pixbuf(pixbuf[0]);
+
+	g_signal_connect(G_OBJECT(sys), &quot;activate&quot;, G_CALLBACK(tray_icon_on_click), _parent);
+	g_signal_connect(G_OBJECT(sys), &quot;popup-menu&quot;, G_CALLBACK(tray_icon_popup_menu), _parent);
+	gtk_status_icon_set_tooltip((GtkStatusIcon*)sys, &quot;Avidemux&quot;);
+	gtk_status_icon_set_visible((GtkStatusIcon*)sys, TRUE);
 }
+
 ADM_tray::~ADM_tray()
 {
-        nbTray--;
-        ADM_assert(!nbTray);
-        if(sys)
-                adm_delete_systray(sys);
-        sys=NULL;
+	if (sys)
+		gtk_status_icon_set_visible((GtkStatusIcon*)sys, FALSE);
+
+	sys = NULL;
 }
+
 uint8_t ADM_tray::setPercent(int percent)
 {
-char percentS[40];
-        sprintf(percentS,&quot;%d %%&quot;,percent);
-        if(sys)
-        {
-                adm_changeIcon_systray();
-                adm_change_tooltip(sys,percentS);
-        }
-        return 1;
+	char percentS[40];
+
+	sprintf(percentS, &quot;Avidemux [%d%%]&quot;, percent);
+
+	if (sys)
+	{
+		int maxIcons = sizeof(animated) / sizeof(char *);
+		lastIcon++;
+
+		if (lastIcon &gt;= maxIcons)
+			lastIcon = 0;
+
+		gtk_status_icon_set_from_pixbuf((GtkStatusIcon*)sys, pixbuf[lastIcon]);
+		gtk_status_icon_set_tooltip((GtkStatusIcon*)sys, percentS);
+	}
+
+	return 1;
 }
+
 uint8_t ADM_tray::setStatus(int working)
 {
-        return 1;
+	return 1;
 }

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/CMakeLists.txt	2008-06-24 17:44:25 UTC (rev 4156)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/CMakeLists.txt	2008-06-24 19:46:05 UTC (rev 4157)
@@ -2,7 +2,7 @@
 
 SET(${ADM_LIB}_SRCS
 	ADM_tray_gtk.cpp  
-    eggtrayicon.c eggtray_win32.c gtkmarkscale.c jogshuttle.c ADM_jogshuttle.cpp  mediactrl.c
+    gtkmarkscale.c jogshuttle.c ADM_jogshuttle.cpp  mediactrl.c
 ADM_icons.cpp
 
 )

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/eggtray_win32.c
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/eggtray_win32.c	2008-06-24 17:44:25 UTC (rev 4156)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/eggtray_win32.c	2008-06-24 19:46:05 UTC (rev 4157)
@@ -1,287 +0,0 @@
-/*
-    Borrowed from mldonkey
-*/
-/* Copyright 2004 b8_bavard, INRIA */
-/*
-    This file is part of mldonkey.
-
-    mldonkey is free software; you can redistribute it and/or modify
-    it under the terms of the GNU General Public License as published by
-    the Free Software Foundation; either version 2 of the License, or
-    (at your option) any later version.
-
-    mldonkey is distributed in the hope that it will be useful,
-    but WITHOUT ANY WARRANTY; without even the implied warranty of
-    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-    GNU General Public License for more details.
-
-    You should have received a copy of the GNU General Public License
-    along with mldonkey; if not, write to the Free Software
-    Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA
-*/
-
-/* Stub code to interface with Shell_NotifyIcon */
-#include &quot;config.h&quot;
-#ifdef __WIN32
-#include &lt;windows.h&gt;
-#include &lt;wingdi.h&gt;
-
-#include &lt;gdk/gdk.h&gt; 
-#include &lt;gdk/gdkwin32.h&gt;
-#include &lt;gdk-pixbuf/gdk-pixbuf.h&gt;
-
-#include &lt;stdio.h&gt;
-#include &lt;systray.h&gt;
-#define WM_TRAYMESSAGE           WM_USER /* User defined WM Message */
-#define SYSTRAY_LBUTTONDBLCLK    0
-#define SYSTRAY_LBUTTONCLK       1
-#define SYSTRAY_RBUTTONCLK       2
-
-static UINT timerID = 3;
-static NOTIFYICONDATA nid;
-static HWND systray_hwnd=0;
-static HICON systray_hicon=0;
-static int  win32egg_nb=0;
-static GdkPixbuf **win32egg_pixbuf;
-static int flipflop=0;
-LRESULT msg_handler(HWND hWnd, UINT msg, WPARAM wParam, LPARAM lParam)
-{
-  static UINT taskbarRestartMsg; /* static here means value is kept across multiple calls to this func */
-
-  switch(msg) {
-    case WM_CREATE:
-      taskbarRestartMsg = RegisterWindowMessage(&quot;TaskbarCreated&quot;);
-      break;
-
-    case WM_TIMER:
-        #if 0
-      KillTimer(hWnd, timerID);
-      call_caml_systray_clicked(SYSTRAY_LBUTTONCLK);
-      #endif
-      break;
-
-    case WM_DESTROY:
-      break;
-
-    case WM_TRAYMESSAGE:
-#if 0
-      switch (lParam) {
-        case WM_RBUTTONUP:
-          call_caml_systray_clicked(SYSTRAY_RBUTTONCLK);
-          break;
-
-        case WM_LBUTTONDBLCLK:
-          KillTimer(hWnd, timerID);
-          call_caml_systray_clicked(SYSTRAY_LBUTTONDBLCLK);
-          break;
-
-        case WM_LBUTTONDOWN:
-          SetTimer(hWnd, timerID, GetDoubleClickTime(), NULL);
-          break;
-
-      }
-#endif
-    default: 
-      if (msg == taskbarRestartMsg) {
-        /* explorer crashed and left us hanging... 
-           This will put the systray icon back in it's place, when it restarts */
-        Shell_NotifyIcon(NIM_ADD,&amp;nid);
-      }
-      break;
-
-  }/* end switch */
-
-  return DefWindowProc(hWnd, msg, wParam, lParam);
-
-} 
-/* Create hidden window to process systray messages */
-
-static HWND systray_create_hiddenwin(void)
-{
-
-  WNDCLASSEX wcex;
-  TCHAR wname[32];
-
-  strcpy(wname, &quot;Win&quot;);
-
-  wcex.cbSize = sizeof(WNDCLASSEX);
-
-  wcex.style = 0;
-  wcex.lpfnWndProc = (WNDPROC)msg_handler;
-  wcex.cbClsExtra = 0;
-  wcex.cbWndExtra = 0;
-  wcex.hInstance = GetModuleHandle(NULL);
-  wcex.hIcon = NULL;
-  wcex.hCursor = NULL,
-  wcex.hbrBackground = NULL;
-  wcex.lpszMenuName = NULL;
-  wcex.lpszClassName = wname;
-  wcex.hIconSm = NULL;
-
-  RegisterClassEx(&amp;wcex);
-
-  /* Create the window */
-  return (CreateWindow(wname, &quot;&quot;, 0, 0, 0, 0, 0, GetDesktopWindow(), NULL, GetModuleHandle(NULL), 0));
-}
-
-/* taken and modified from gdk/win32/gdkwindow-win32.c */
-
-HICON pixmap_to_hicon (GdkPixmap *pixmap, GdkBitmap *mask)
-{
-  ICONINFO ii;
-  HICON hIcon;
-  gint w = 0, h = 0;
-  HANDLE hpixmap = NULL;
-  HBITMAP hbitmap = NULL;
-
-  /* Create Drawing Context */
-  HDC hdc1 = NULL;
-  HBITMAP hbitmaptmp1 = NULL;
-
-    if (!pixmap) {
-      return NULL;
-    }
-
-    gdk_drawable_get_size (GDK_DRAWABLE (pixmap), &amp;w, &amp;h);
-
-    hpixmap = gdk_win32_drawable_get_handle (pixmap); 
-
-    /* we need the inverted mask for the XOR op */
-    hdc1 = CreateCompatibleDC (NULL);
-    hbitmap = CreateCompatibleBitmap (hdc1, w, h);
-    hbitmaptmp1 = SelectObject (hdc1, hbitmap);
-
-    if (mask) {
-      HANDLE hmask = NULL;
-      HDC hdc2 = NULL;
-      HBITMAP hbitmaptmp2 = NULL;
-
-      hmask = gdk_win32_drawable_get_handle (mask); 
-
-      hdc2 = CreateCompatibleDC (NULL);
-      hbitmaptmp2 = SelectObject (hdc2, hmask);
-
-      BitBlt (hdc1, 0,0,w,h, hdc2, 0,0, NOTSRCCOPY);    
-
-      SelectObject (hdc2, hbitmaptmp2);
-      DeleteDC (hdc2);
-    } else {
-      RECT rect;
-      GetClipBox (hdc1, &amp;rect);
-      FillRect (hdc1, &amp;rect, GetStockObject (WHITE_BRUSH));
-    }
-
-    SelectObject (hdc1, hbitmaptmp1); 
-    DeleteDC (hdc1); 
- 
-    ii.fIcon = TRUE;
-    ii.xHotspot = ii.yHotspot = 0; /* ignored for icons */
-    ii.hbmMask = hbitmap;
-    ii.hbmColor = hpixmap; 
-
-    hIcon = CreateIconIndirect (&amp;ii);
-    if (!hIcon) {
-      return NULL;
-    }
-
-    DeleteObject (hbitmap);
-
-    return hIcon;
-}
-
-NOTIFYICONDATA systray_init(GdkPixbuf *pixbuf,  char* text) 
-{
-  GdkPixmap *pm;
-  GdkBitmap *mask;
-
-  gdk_pixbuf_render_pixmap_and_mask(pixbuf, &amp;pm, &amp;mask, 128);
-
-  char* locenc=NULL;
-
-  ZeroMemory(&amp;nid,sizeof(nid));
-  systray_hicon = pixmap_to_hicon (pm, mask);
-  systray_hwnd = systray_create_hiddenwin();
-
-  nid.cbSize=sizeof(NOTIFYICONDATA);
-  nid.hWnd=systray_hwnd;
-  nid.uID=0;
-  nid.uFlags=NIF_ICON | NIF_MESSAGE | NIF_TIP ;
-  nid.uCallbackMessage=WM_TRAYMESSAGE;
-  nid.hIcon=systray_hicon;
-
-  if(text) {
-    locenc = g_locale_from_utf8(text, -1, NULL, NULL, NULL);
-    lstrcpy(nid.szTip, locenc);
-    g_free(locenc);
-  }
-
-  Shell_NotifyIcon(NIM_ADD,&amp;nid);
-  return nid;
-}
-
-void systray_modify_icon (GdkPixmap *pm, GdkBitmap *mask) 
-{
-
-  systray_hicon = pixmap_to_hicon (pm, mask);
-  nid.hIcon = systray_hicon;
-  Shell_NotifyIcon(NIM_MODIFY,&amp;nid);
-}
-
-void systray_modify_tooltip (const char* text) 
-{
-  char *locenc=NULL;
-
-  if(text) {
-    locenc = g_locale_from_utf8(text, -1, NULL, NULL, NULL);
-    lstrcpy(nid.szTip, locenc);
-    g_free(locenc);
-  }
-  Shell_NotifyIcon(NIM_MODIFY,&amp;nid);
-}
-
-void systray_remove_nid(void) 
-{
-  DestroyWindow(nid.hWnd);
-  Shell_NotifyIcon(NIM_DELETE,&amp;nid);
-}
-//*********************************************************
-//*********************************************************
-//*********************************************************
-void *adm_new_systray(GdkPixbuf *zpixbuf[],int nb, char *name)
-{
-void *r;
-	flipflop=0;
-	win32egg_pixbuf=zpixbuf;
-	win32egg_nb=nb;
-  systray_init(win32egg_pixbuf[0],  name);
-  r=(void *)0xdead;
-  return r;
-
-}
-void adm_delete_systray(void *systray)
-{
- systray_remove_nid() ;
-}
-void adm_change_tooltip(void *systray, const char *tips)
-{
-    systray_modify_tooltip (tips ) ;
-}
-void adm_changeIcon_systray(void)
-{
-  GdkPixmap *pm;
-  GdkBitmap *mask;
-  GdkPixbuf *icon;
-	flipflop=flipflop%win32egg_nb;
-	icon=win32egg_pixbuf[flipflop];
-	//ADM_assert(icon);
-
-  	gdk_pixbuf_render_pixmap_and_mask(icon, &amp;pm, &amp;mask, 128);
-
-
-	systray_modify_icon (pm, mask) ;
-
-		
-	flipflop++;
-	flipflop=flipflop%win32egg_nb;
-}
-#endif

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/eggtrayicon.c
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/eggtrayicon.c	2008-06-24 17:44:25 UTC (rev 4156)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/eggtrayicon.c	2008-06-24 19:46:05 UTC (rev 4157)
@@ -1,520 +0,0 @@
-/* -*- Mode: C; tab-width: 8; indent-tabs-mode: t; c-basic-offset: 8 -*- */
-/* eggtrayicon.c
- * Copyright (C) 2002 Anders Carlsson &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">andersca at gnu.org</A>&gt;
- *
- * This library is free software; you can redistribute it and/or
- * modify it under the terms of the GNU Lesser General Public
- * License as published by the Free Software Foundation; either
- * version 2 of the License, or (at your option) any later version.
- *
- * This library is distributed in the hope that it will be useful,
- * but WITHOUT ANY WARRANTY; without even the implied warranty of
- * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
- * Lesser General Public License for more details.
- *
- * You should have received a copy of the GNU Lesser General Public
- * License along with this library; if not, write to the
- * Free Software Foundation, Inc., 59 Temple Place - Suite 330,
- * Boston, MA 02111-1307, USA.
- */
-#include &quot;config.h&quot;
-
-#ifndef __WIN32
-#ifndef HAVE_GTK_X11
-#include &lt;gtk/gtk.h&gt;
-
-void *adm_new_systray(GdkPixbuf *pixbufA[], int nb, char *name) {}
-void adm_delete_systray(void *systray) {}
-void adm_change_tooltip(void *systray, const char *tips) {}
-void adm_changeIcon_systray(void) {}
-#else
-#include &lt;gtk/gtk.h&gt;
-#include &lt;gtk/gtkversion.h&gt;
-
-#include &quot;eggtrayicon.h&quot;
-#include &lt;string.h&gt;
-#include &quot;systray.h&quot;
-#include &quot;ADM_assert.h&quot;
-#define SYSTEM_TRAY_REQUEST_DOCK    0
-#define SYSTEM_TRAY_BEGIN_MESSAGE   1
-#define SYSTEM_TRAY_CANCEL_MESSAGE  2
-
-#define SYSTEM_TRAY_ORIENTATION_HORZ 0
-#define SYSTEM_TRAY_ORIENTATION_VERT 1
-
-enum {
-  PROP_0,
-  PROP_ORIENTATION
-};
-         
-static GtkPlugClass *parent_class = NULL;
-
-static void egg_tray_icon_init (EggTrayIcon *icon);
-static void egg_tray_icon_class_init (EggTrayIconClass *klass);
-
-static void egg_tray_icon_get_property (GObject    *object,
-                                        guint       prop_id,
-                                        GValue     *value,
-                                        GParamSpec *pspec);
-
-static void egg_tray_icon_realize   (GtkWidget *widget);
-static void egg_tray_icon_unrealize (GtkWidget *widget);
-
-static void egg_tray_icon_update_manager_window (EggTrayIcon *icon);
-
-static GtkWidget   *img=NULL;
-
-static GdkPixbuf **listOfIcons=NULL;
-static int nbListOfIcons=0;
-static int flipflop=0;
-
-GType egg_tray_icon_get_type (void)
-{
-  static GType our_type = 0;
-
-  if (our_type == 0)
-    {
-      static const GTypeInfo our_info =
-      {
-	sizeof (EggTrayIconClass),
-	(GBaseInitFunc) NULL,
-	(GBaseFinalizeFunc) NULL,
-	(GClassInitFunc) egg_tray_icon_class_init,
-	NULL, /* class_finalize */
-	NULL, /* class_data */
-	sizeof (EggTrayIcon),
-	0,    /* n_preallocs */
-	(GInstanceInitFunc) egg_tray_icon_init
-      };
-
-      our_type = g_type_register_static (GTK_TYPE_PLUG, &quot;EggTrayIcon&quot;, &amp;our_info, 0);
-    }
-
-  return our_type;
-}
-
-static void egg_tray_icon_init (EggTrayIcon *icon)
-{
-  icon-&gt;stamp = 1;
-  icon-&gt;orientation = GTK_ORIENTATION_HORIZONTAL;
-  
-  gtk_widget_add_events (GTK_WIDGET (icon), GDK_PROPERTY_CHANGE_MASK);
-}
-
-static void egg_tray_icon_class_init (EggTrayIconClass *klass)
-{
-  GObjectClass *gobject_class = (GObjectClass *)klass;
-  GtkWidgetClass *widget_class = (GtkWidgetClass *)klass;
-
-  parent_class = g_type_class_peek_parent (klass);
-
-  gobject_class-&gt;get_property = egg_tray_icon_get_property;
-
-  widget_class-&gt;realize   = egg_tray_icon_realize;
-  widget_class-&gt;unrealize = egg_tray_icon_unrealize;
-
-  g_object_class_install_property (gobject_class,
-				   PROP_ORIENTATION,
-				   g_param_spec_enum (&quot;orientation&quot;,
-						      &quot;Orientation&quot;,
-						      &quot;The orientation of the tray.&quot;,
-						      GTK_TYPE_ORIENTATION,
-						      GTK_ORIENTATION_HORIZONTAL,
-						      G_PARAM_READABLE));
-}
-
-static void egg_tray_icon_get_property (GObject    *object,
-                            guint       prop_id,
-                            GValue     *value,
-                            GParamSpec *pspec)
-{
-  EggTrayIcon *icon = EGG_TRAY_ICON (object);
-
-  switch (prop_id)
-    {
-    case PROP_ORIENTATION:
-      g_value_set_enum (value, icon-&gt;orientation);
-      break;
-    default:
-      G_OBJECT_WARN_INVALID_PROPERTY_ID (object, prop_id, pspec);
-      break;
-    }
-}
-
-static void egg_tray_icon_get_orientation_property (EggTrayIcon *icon)
-{
-  Display *xdisplay;
-  Atom type;
-  int format;
-	union {
-	  gulong *prop;
-		guchar *prop_ch;
-	} prop = { NULL };
-  gulong nitems;
-  gulong bytes_after;
-  int error, result;
-
-  g_assert (icon-&gt;manager_window != None);
-
-  xdisplay = GDK_DISPLAY_XDISPLAY (gtk_widget_get_display (GTK_WIDGET (icon)));
-
-  gdk_error_trap_push ();
-  type = None;
-  result = XGetWindowProperty (xdisplay,
-			       icon-&gt;manager_window,
-			       icon-&gt;orientation_atom,
-			       0, G_MAXLONG, FALSE,
-			       XA_CARDINAL,
-			       &amp;type, &amp;format, &amp;nitems,
-			       &amp;bytes_after, &amp;(prop.prop_ch));
-  error = gdk_error_trap_pop ();
-
-  if (error || result != Success)
-    return;
-
-  if (type == XA_CARDINAL)
-    {
-      GtkOrientation orientation;
-
-      orientation = (prop.prop [0] == SYSTEM_TRAY_ORIENTATION_HORZ) ?
-					GTK_ORIENTATION_HORIZONTAL :
-					GTK_ORIENTATION_VERTICAL;
-
-      if (icon-&gt;orientation != orientation)
-	{
-	  icon-&gt;orientation = orientation;
-
-	  g_object_notify (G_OBJECT (icon), &quot;orientation&quot;);
-	}
-    }
-
-  if (prop.prop)
-    XFree (prop.prop);
-}
-
-static GdkFilterReturn egg_tray_icon_manager_filter (GdkXEvent *xevent, GdkEvent *event, gpointer user_data)
-{
-  EggTrayIcon *icon = user_data;
-  XEvent *xev = (XEvent *)xevent;
-
-  if (xev-&gt;xany.type == ClientMessage &amp;&amp;
-      xev-&gt;xclient.message_type == icon-&gt;manager_atom &amp;&amp;
-      xev-&gt;xclient.data.l[1] == icon-&gt;selection_atom)
-    {
-      egg_tray_icon_update_manager_window (icon);
-    }
-  else if (xev-&gt;xany.window == icon-&gt;manager_window)
-    {
-      if (xev-&gt;xany.type == PropertyNotify &amp;&amp;
-	  xev-&gt;xproperty.atom == icon-&gt;orientation_atom)
-	{
-	  egg_tray_icon_get_orientation_property (icon);
-	}
-      if (xev-&gt;xany.type == DestroyNotify)
-	{
-	  egg_tray_icon_update_manager_window (icon);
-	}
-    }
-  
-  return GDK_FILTER_CONTINUE;
-}
-
-static void egg_tray_icon_unrealize (GtkWidget *widget)
-{
-  EggTrayIcon *icon = EGG_TRAY_ICON (widget);
-  GdkWindow *root_window;
-
-  if (icon-&gt;manager_window != None)
-    {
-      GdkWindow *gdkwin;
-
-      gdkwin = gdk_window_lookup_for_display (gtk_widget_get_display (widget),
-                                              icon-&gt;manager_window);
-
-      gdk_window_remove_filter (gdkwin, egg_tray_icon_manager_filter, icon);
-    }
-
-  root_window = gdk_screen_get_root_window (gtk_widget_get_screen (widget));
-
-  gdk_window_remove_filter (root_window, egg_tray_icon_manager_filter, icon);
-
-  if (GTK_WIDGET_CLASS (parent_class)-&gt;unrealize)
-    (* GTK_WIDGET_CLASS (parent_class)-&gt;unrealize) (widget);
-}
-
-static void egg_tray_icon_send_manager_message (EggTrayIcon *icon,
-				    long         message,
-				    Window       window,
-				    long         data1,
-				    long         data2,
-				    long         data3)
-{
-  XClientMessageEvent ev;
-  Display *display;
-  
-  ev.type = ClientMessage;
-  ev.window = window;
-  ev.message_type = icon-&gt;system_tray_opcode_atom;
-  ev.format = 32;
-  ev.data.l[0] = gdk_x11_get_server_time (GTK_WIDGET (icon)-&gt;window);
-  ev.data.l[1] = message;
-  ev.data.l[2] = data1;
-  ev.data.l[3] = data2;
-  ev.data.l[4] = data3;
-
-  display = GDK_DISPLAY_XDISPLAY (gtk_widget_get_display (GTK_WIDGET (icon)));
-  
-  gdk_error_trap_push ();
-  XSendEvent (display,
-	      icon-&gt;manager_window, False, NoEventMask, (XEvent *)&amp;ev);
-  XSync (display, False);
-  gdk_error_trap_pop ();
-}
-
-static void egg_tray_icon_send_dock_request (EggTrayIcon *icon)
-{
-  egg_tray_icon_send_manager_message (icon,
-				      SYSTEM_TRAY_REQUEST_DOCK,
-				      icon-&gt;manager_window,
-				      gtk_plug_get_id (GTK_PLUG (icon)),
-				      0, 0);
-}
-
-static void egg_tray_icon_update_manager_window (EggTrayIcon *icon)
-{
-  Display *xdisplay;
-
-  xdisplay = GDK_DISPLAY_XDISPLAY (gtk_widget_get_display (GTK_WIDGET (icon)));
-  
-  if (icon-&gt;manager_window != None)
-    {
-      GdkWindow *gdkwin;
-
-      gdkwin = gdk_window_lookup_for_display (gtk_widget_get_display (GTK_WIDGET (icon)),
-					      icon-&gt;manager_window);
-      
-      gdk_window_remove_filter (gdkwin, egg_tray_icon_manager_filter, icon);
-    }
-  
-  XGrabServer (xdisplay);
-  
-  icon-&gt;manager_window = XGetSelectionOwner (xdisplay,
-					     icon-&gt;selection_atom);
-
-  if (icon-&gt;manager_window != None)
-    XSelectInput (xdisplay,
-		  icon-&gt;manager_window, StructureNotifyMask|PropertyChangeMask);
-
-  XUngrabServer (xdisplay);
-  XFlush (xdisplay);
-  
-  if (icon-&gt;manager_window != None)
-    {
-      GdkWindow *gdkwin;
-
-      gdkwin = gdk_window_lookup_for_display (gtk_widget_get_display (GTK_WIDGET (icon)),
-					      icon-&gt;manager_window);
-      
-      gdk_window_add_filter (gdkwin, egg_tray_icon_manager_filter, icon);
-
-      /* Send a request that we'd like to dock */
-      egg_tray_icon_send_dock_request (icon);
-
-      egg_tray_icon_get_orientation_property (icon);
-    }
-}
-
-static void egg_tray_icon_realize (GtkWidget *widget)
-{
-  EggTrayIcon *icon = EGG_TRAY_ICON (widget);
-  GdkScreen *screen;
-  GdkDisplay *display;
-  Display *xdisplay;
-  char buffer[256];
-  GdkWindow *root_window;
-
-  if (GTK_WIDGET_CLASS (parent_class)-&gt;realize)
-    GTK_WIDGET_CLASS (parent_class)-&gt;realize (widget);
-
-  screen = gtk_widget_get_screen (widget);
-  display = gdk_screen_get_display (screen);
-  xdisplay = gdk_x11_display_get_xdisplay (display);
-
-  /* Now see if there's a manager window around */
-  g_snprintf (buffer, sizeof (buffer),
-	      &quot;_NET_SYSTEM_TRAY_S%d&quot;,
-	      gdk_screen_get_number (screen));
-
-  icon-&gt;selection_atom = XInternAtom (xdisplay, buffer, False);
-  
-  icon-&gt;manager_atom = XInternAtom (xdisplay, &quot;MANAGER&quot;, False);
-  
-  icon-&gt;system_tray_opcode_atom = XInternAtom (xdisplay,
-						   &quot;_NET_SYSTEM_TRAY_OPCODE&quot;,
-						   False);
-
-  icon-&gt;orientation_atom = XInternAtom (xdisplay,
-					&quot;_NET_SYSTEM_TRAY_ORIENTATION&quot;,
-					False);
-
-  egg_tray_icon_update_manager_window (icon);
-
-  root_window = gdk_screen_get_root_window (screen);
-
-  /* Add a root window filter so that we get changes on MANAGER */
-  gdk_window_add_filter (root_window,
-			 egg_tray_icon_manager_filter, icon);
-}
-
-EggTrayIcon *egg_tray_icon_new_for_xscreen (Screen *xscreen, const char *name)
-{
-  GdkDisplay *display;
-  GdkScreen *screen;
-
-  display = gdk_x11_lookup_xdisplay (DisplayOfScreen (xscreen));
-  screen = gdk_display_get_screen (display, XScreenNumberOfScreen (xscreen));
-
-  return egg_tray_icon_new_for_screen (screen, name);
-}
-
-EggTrayIcon *egg_tray_icon_new_for_screen (GdkScreen *screen, const char *name)
-{
-  g_return_val_if_fail (GDK_IS_SCREEN (screen), NULL);
-
-  return g_object_new (EGG_TYPE_TRAY_ICON, &quot;screen&quot;, screen, &quot;title&quot;, name, NULL);
-}
-
-EggTrayIcon *egg_tray_icon_new (const gchar *name)
-{
-  return g_object_new (EGG_TYPE_TRAY_ICON, &quot;title&quot;, name, NULL);
-}
-
-guint egg_tray_icon_send_message (EggTrayIcon *icon,
-			    gint         timeout,
-			    const gchar *message,
-			    gint         len)
-{
-  guint stamp;
-  
-  g_return_val_if_fail (EGG_IS_TRAY_ICON (icon), 0);
-  g_return_val_if_fail (timeout &gt;= 0, 0);
-  g_return_val_if_fail (message != NULL, 0);
-		     
-  if (icon-&gt;manager_window == None)
-    return 0;
-
-  if (len &lt; 0)
-    len = strlen (message);
-
-  stamp = icon-&gt;stamp++;
-  
-  /* Get ready to send the message */
-  egg_tray_icon_send_manager_message (icon, SYSTEM_TRAY_BEGIN_MESSAGE,
-				      (Window)gtk_plug_get_id (GTK_PLUG (icon)),
-				      timeout, len, stamp);
-
-  /* Now to send the actual message */
-  gdk_error_trap_push ();
-  while (len &gt; 0)
-    {
-      XClientMessageEvent ev;
-      Display *xdisplay;
-
-      xdisplay = GDK_DISPLAY_XDISPLAY (gtk_widget_get_display (GTK_WIDGET (icon)));
-      
-      ev.type = ClientMessage;
-      ev.window = (Window)gtk_plug_get_id (GTK_PLUG (icon));
-      ev.format = 8;
-      ev.message_type = XInternAtom (xdisplay,
-				     &quot;_NET_SYSTEM_TRAY_MESSAGE_DATA&quot;, False);
-      if (len &gt; 20)
-	{
-	  memcpy (&amp;ev.data, message, 20);
-	  len -= 20;
-	  message += 20;
-	}
-      else
-	{
-	  memcpy (&amp;ev.data, message, len);
-	  len = 0;
-	}
-
-      XSendEvent (xdisplay,
-		  icon-&gt;manager_window, False, StructureNotifyMask, (XEvent *)&amp;ev);
-      XSync (xdisplay, False);
-    }
-  gdk_error_trap_pop ();
-
-  return stamp;
-}
-
-void egg_tray_icon_cancel_message (EggTrayIcon *icon,
-			      guint        id)
-{
-  g_return_if_fail (EGG_IS_TRAY_ICON (icon));
-  g_return_if_fail (id &gt; 0);
-  
-  egg_tray_icon_send_manager_message (icon, SYSTEM_TRAY_CANCEL_MESSAGE,
-				      (Window)gtk_plug_get_id (GTK_PLUG (icon)),
-				      id, 0, 0);
-}
-
-GtkOrientation egg_tray_icon_get_orientation (EggTrayIcon *icon)
-{
-  g_return_val_if_fail (EGG_IS_TRAY_ICON (icon), GTK_ORIENTATION_HORIZONTAL);
-
-  return icon-&gt;orientation;
-}
-/**************************************************************/
-static GtkWidget   *systray_icon = NULL;
-static GtkWidget   *evbox = NULL;
-static GtkTooltips *systray_icon_tooltips = NULL;
-
-void *adm_new_systray(GdkPixbuf *pixbufA[],int nb , char *name)
-{
-	flipflop=0;
-  systray_icon = GTK_WIDGET (egg_tray_icon_new (&quot;Avidemux&quot;));
-  nbListOfIcons=nb;
-  if(listOfIcons) ADM_dealloc(listOfIcons);
-  listOfIcons=NULL;
-  listOfIcons=ADM_alloc(sizeof( GdkPixbuf *)*nb);
-  memcpy(listOfIcons,pixbufA,sizeof(GdkPixbuf *)*nb);
-  img = gtk_image_new_from_pixbuf (listOfIcons[0]);
-  
-
-  evbox = gtk_event_box_new ();
-  gtk_container_add (GTK_CONTAINER (systray_icon), evbox);
-  gtk_container_add (GTK_CONTAINER (evbox), img);
-  gtk_widget_show_all (systray_icon);
-  gtk_widget_realize (systray_icon);
-  gtk_widget_show (systray_icon);
-
-  systray_icon_tooltips = gtk_tooltips_new ();
-  gtk_tooltips_enable (systray_icon_tooltips);
-
-  gtk_tooltips_set_tip (systray_icon_tooltips, systray_icon, &quot;avidemux&quot;, &quot;&quot;);
-  return (void *)systray_icon;
-}
-void adm_delete_systray(void *systray)
-{
- ADM_assert( (void*)systray_icon==systray);
- gtk_widget_destroy(systray_icon);
-}
-void adm_change_tooltip(void *systray, const char *tips)
-{
- ADM_assert( (void*)systray_icon==systray);
- gtk_tooltips_set_tip (systray_icon_tooltips, systray_icon, tips, &quot;&quot;);
-}
-void adm_changeIcon_systray(void)
-{
-GdkPixbuf *cur;
-	flipflop%=nbListOfIcons; // Double check
-	cur=listOfIcons[flipflop];
-		ADM_assert(cur);
-	flipflop++;
-	flipflop%=nbListOfIcons; // Double check
-  	gtk_image_set_from_pixbuf( GTK_IMAGE(img), GDK_PIXBUF(cur));
-
-}
-#endif	// HAVE_GTK_X11
-#endif	// __WIN32

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/eggtrayicon.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/eggtrayicon.h	2008-06-24 17:44:25 UTC (rev 4156)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/eggtrayicon.h	2008-06-24 19:46:05 UTC (rev 4157)
@@ -1,82 +0,0 @@
-/* -*- Mode: C; tab-width: 8; indent-tabs-mode: t; c-basic-offset: 8 -*- */
-/* eggtrayicon.h
- * Copyright (C) 2002 Anders Carlsson &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">andersca at gnu.org</A>&gt;
- *
- * This library is free software; you can redistribute it and/or
- * modify it under the terms of the GNU Lesser General Public
- * License as published by the Free Software Foundation; either
- * version 2 of the License, or (at your option) any later version.
- *
- * This library is distributed in the hope that it will be useful,
- * but WITHOUT ANY WARRANTY; without even the implied warranty of
- * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
- * Lesser General Public License for more details.
- *
- * You should have received a copy of the GNU Lesser General Public
- * License along with this library; if not, write to the
- * Free Software Foundation, Inc., 59 Temple Place - Suite 330,
- * Boston, MA 02111-1307, USA.
- */
-
-#ifndef __EGG_TRAY_ICON_H__
-#define __EGG_TRAY_ICON_H__
-
-#include &lt;gtk/gtkplug.h&gt;
-#include &lt;gdk/gdkx.h&gt;
-#include &lt;X11/Xatom.h&gt;
-
-G_BEGIN_DECLS
-
-#define EGG_TYPE_TRAY_ICON		(egg_tray_icon_get_type ())
-#define EGG_TRAY_ICON(obj)		(G_TYPE_CHECK_INSTANCE_CAST ((obj), EGG_TYPE_TRAY_ICON, EggTrayIcon))
-#define EGG_TRAY_ICON_CLASS(klass)	(G_TYPE_CHECK_CLASS_CAST ((klass), EGG_TYPE_TRAY_ICON, EggTrayIconClass))
-#define EGG_IS_TRAY_ICON(obj)		(G_TYPE_CHECK_INSTANCE_TYPE ((obj), EGG_TYPE_TRAY_ICON))
-#define EGG_IS_TRAY_ICON_CLASS(klass)	(G_TYPE_CHECK_CLASS_TYPE ((klass), EGG_TYPE_TRAY_ICON))
-#define EGG_TRAY_ICON_GET_CLASS(obj)	(G_TYPE_INSTANCE_GET_CLASS ((obj), EGG_TYPE_TRAY_ICON, EggTrayIconClass))
-
-typedef struct _EggTrayIcon	  EggTrayIcon;
-typedef struct _EggTrayIconClass  EggTrayIconClass;
-
-struct _EggTrayIcon
-{
-  GtkPlug parent_instance;
-
-  guint stamp;
-
-  Atom selection_atom;
-  Atom manager_atom;
-  Atom system_tray_opcode_atom;
-  Atom orientation_atom;
-  Window manager_window;
-
-  GtkOrientation orientation;
-};
-
-struct _EggTrayIconClass
-{
-  GtkPlugClass parent_class;
-};
-
-
-GType        egg_tray_icon_get_type       (void);
-
-EggTrayIcon *egg_tray_icon_new_for_screen (GdkScreen   *screen,
-					   const gchar *name);
-
-
-
-guint        egg_tray_icon_send_message   (EggTrayIcon *icon,
-					   gint         timeout,
-					   const char  *message,
-					   gint         len);
-void         egg_tray_icon_cancel_message (EggTrayIcon *icon,
-					   guint        id);
-
-GtkOrientation egg_tray_icon_get_orientation (EggTrayIcon *icon);
-
-EggTrayIcon *egg_tray_icon_new            (const gchar *name);
-
-G_END_DECLS
-#endif /* __EGG_TRAY_ICON_H__ */
-
-

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/ADM_tray.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/ADM_tray.h	2008-06-24 17:44:25 UTC (rev 4156)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/ADM_tray.h	2008-06-24 19:46:05 UTC (rev 4157)
@@ -22,8 +22,9 @@
 {
 protected:
         void    *sys;
+		void *_parent;
 public:
-                ADM_tray(char *name);
+                ADM_tray(void *parent);
                 ~ADM_tray();
         uint8_t setPercent(int percent);
         uint8_t setStatus(int working);

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/gui_action.names
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/gui_action.names	2008-06-24 17:44:25 UTC (rev 4156)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/gui_action.names	2008-06-24 19:46:05 UTC (rev 4157)
@@ -162,4 +162,4 @@
 ACT(AVS_PROXY)
 ACT(JOG)
 ACT(GLYPHEDIT)
-ACT(PLUGIN_INFO)
\ No newline at end of file
+ACT(PLUGIN_INFO)

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/xpm/avidemux_icon.xpm
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/xpm/avidemux_icon.xpm	2008-06-24 17:44:25 UTC (rev 4156)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/xpm/avidemux_icon.xpm	2008-06-24 19:46:05 UTC (rev 4157)
@@ -1,5 +1,5 @@
 /* XPM */
-static char * avidemux_icon_xpm[] = {
+static const char * avidemux_icon_xpm[] = {
 &quot;64 64 824 2&quot;,
 &quot;  	c None&quot;,
 &quot;. 	c #000000&quot;,

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/xpm/begin.xpm
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/xpm/begin.xpm	2008-06-24 17:44:25 UTC (rev 4156)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/xpm/begin.xpm	2008-06-24 19:46:05 UTC (rev 4157)
@@ -1,5 +1,5 @@
 /* XPM */
-const char * xpm_begin[] = {
+static const char * xpm_begin[] = {
 &quot;32 20 56 1&quot;,
 &quot; 	c None&quot;,
 &quot;.	c #000000&quot;,

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/xpm/end.xpm
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/xpm/end.xpm	2008-06-24 17:44:25 UTC (rev 4156)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/xpm/end.xpm	2008-06-24 19:46:05 UTC (rev 4157)
@@ -1,5 +1,5 @@
 /* XPM */
-const char * xpm_end[] = {
+static const char * xpm_end[] = {
 &quot;32 20 55 1&quot;,
 &quot; 	c None&quot;,
 &quot;.	c #000000&quot;,

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/xpm/gnome-calculator.xpm
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/xpm/gnome-calculator.xpm	2008-06-24 17:44:25 UTC (rev 4156)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/xpm/gnome-calculator.xpm	2008-06-24 19:46:05 UTC (rev 4157)
@@ -1,5 +1,5 @@
 /* XPM */
-static char * gnome_calculator_xpm[] = {
+static const char * gnome_calculator_xpm[] = {
 &quot;24 24 175 2&quot;,
 &quot;  	c None&quot;,
 &quot;. 	c #000000&quot;,

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/xpm/gnome-calculator_small.xpm
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/xpm/gnome-calculator_small.xpm	2008-06-24 17:44:25 UTC (rev 4156)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/xpm/gnome-calculator_small.xpm	2008-06-24 19:46:05 UTC (rev 4157)
@@ -1,5 +1,5 @@
 /* XPM */
-static char * gnome_calculator_small_xpm[] = {
+static const char * gnome_calculator_small_xpm[] = {
 &quot;16 16 94 2&quot;,
 &quot;  	c None&quot;,
 &quot;. 	c #000000&quot;,

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/xpm/stop.xpm
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/xpm/stop.xpm	2008-06-24 17:44:25 UTC (rev 4156)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/xpm/stop.xpm	2008-06-24 19:46:05 UTC (rev 4157)
@@ -1,5 +1,5 @@
 /* XPM */
-static char * xpm_stop[] = {
+static const char * xpm_stop[] = {
 &quot;32 20 30 1&quot;,
 &quot; 	c None&quot;,
 &quot;.	c #000000&quot;,

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/xpm/systray.xpm
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/xpm/systray.xpm	2008-06-24 17:44:25 UTC (rev 4156)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/xpm/systray.xpm	2008-06-24 19:46:05 UTC (rev 4157)
@@ -1,5 +1,5 @@
 /* XPM */
-static char * systray_xpm[] = {
+static const char * systray_xpm[] = {
 &quot;22 23 288 2&quot;,
 &quot;  	c None&quot;,
 &quot;. 	c #DDD4DC&quot;,

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/xpm/systray2.xpm
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/xpm/systray2.xpm	2008-06-24 17:44:25 UTC (rev 4156)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/xpm/systray2.xpm	2008-06-24 19:46:05 UTC (rev 4157)
@@ -1,5 +1,5 @@
 /* XPM */
-static char * systray2_xpm[] = {
+static const char * systray2_xpm[] = {
 &quot;22 23 288 2&quot;,
 &quot;  	c None&quot;,
 &quot;. 	c #F2D8DF&quot;,

Modified: branches/avidemux_2.5_branch_gruntster/po/es.po
===================================================================
--- branches/avidemux_2.5_branch_gruntster/po/es.po	2008-06-24 17:44:25 UTC (rev 4156)
+++ branches/avidemux_2.5_branch_gruntster/po/es.po	2008-06-24 19:46:05 UTC (rev 4157)
@@ -2,8 +2,8 @@
 msgstr &quot;&quot;
 &quot;Project-Id-Version: Avidemux 2.4\n&quot;
 &quot;Report-Msgid-Bugs-To: \n&quot;
-&quot;POT-Creation-Date: 2008-04-24 20:19+0100\n&quot;
-&quot;PO-Revision-Date: 2008-05-03 07:10+0100\n&quot;
+&quot;POT-Creation-Date: 2008-06-12 15:04+0100\n&quot;
+&quot;PO-Revision-Date: 2008-06-16 01:17+0100\n&quot;
 &quot;Last-Translator: Festor Wailon Dacoba &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">festor90 at gmail.com</A>&gt;\n&quot;
 &quot;Language-Team:  &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">juliocesarmartin at msn.com</A>&gt;\n&quot;
 &quot;MIME-Version: 1.0\n&quot;
@@ -62,8 +62,8 @@
 msgstr &quot;PSP&quot;
 
 #: avidemux/ADM_editor/ADM_outputfmt.h:52
-#: avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp:194
-#: avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp:283
+#: avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp:188
+#: avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp:277
 msgid &quot;FLV&quot;
 msgstr &quot;FLV&quot;
 
@@ -89,9 +89,8 @@
 msgstr &quot;H.263+ (lavc)&quot;
 
 #: avidemux/ADM_encoder/ADM_encCodecDesc.h:143
-#, fuzzy
 msgid &quot;MPEG-4 ASP (lavc)&quot;
-msgstr &quot;MPEG-PS (A+V)&quot;
+msgstr &quot;MPEG-4 ASP (lavc)&quot;
 
 #: avidemux/ADM_encoder/ADM_encCodecDesc.h:159
 msgid &quot;DV (lavc)&quot;
@@ -134,9 +133,8 @@
 msgstr &quot;SVCD (lavc)&quot;
 
 #: avidemux/ADM_encoder/ADM_encCodecDesc.h:461
-#, fuzzy
 msgid &quot;VCD (mpeg2enc)&quot;
-msgstr &quot;IPOD (mpeg4)&quot;
+msgstr &quot;VCD (mpeg2enc)&quot;
 
 #: avidemux/ADM_encoder/ADM_encCodecDesc.h:493
 msgid &quot;SVCD (mpeg2enc)&quot;
@@ -148,18 +146,16 @@
 msgstr &quot;Cuantizador MPEG&quot;
 
 #: avidemux/ADM_encoder/ADM_encCodecDesc.h:539
-#, fuzzy
 msgid &quot;DVD (mpeg2enc)&quot;
-msgstr &quot;IPOD (mpeg4)&quot;
+msgstr &quot;DVD (mpeg2enc)&quot;
 
 #: avidemux/ADM_encoder/ADM_encCodecDesc.h:671
 msgid &quot;MPEG-4 ASP (Xvid4)&quot;
 msgstr &quot;MPEG-4 ASP (Xvid4)&quot;
 
 #: avidemux/ADM_encoder/ADM_encCodecDesc.h:812
-#, fuzzy
 msgid &quot;MPEG-4 AVC (x264)&quot;
-msgstr &quot;MPEG-PS (A+V)&quot;
+msgstr &quot;MPEG-4 AVC (x264)&quot;
 
 #: avidemux/ADM_encoder/ADM_encCodecDesc.h:829
 msgid &quot;dummy&quot;
@@ -171,9 +167,9 @@
 #: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:367
 #: avidemux/ADM_outputs/oplug_dummy/oplug_dummy.cpp:143
 #: avidemux/ADM_outputs/oplug_dummy/oplug_dummy.cpp:195
-#: avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp:197
-#: avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp:265
-#: avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp:286
+#: avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp:191
+#: avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp:259
+#: avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp:280
 #: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:166
 #: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:264
 #: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:285
@@ -192,14 +188,12 @@
 msgstr &quot;DivX&quot;
 
 #: avidemux/ADM_encoder/adm_encffmpeg.h:47
-#, fuzzy
 msgid &quot;LavCodec&quot;
-msgstr &quot;Codec:&quot;
+msgstr &quot;LavCodec&quot;
 
 #: avidemux/ADM_encoder/adm_encmjpeg.h:60
-#, fuzzy
 msgid &quot;MJPEG&quot;
-msgstr &quot;MPEG&quot;
+msgstr &quot;MJPEG&quot;
 
 #: avidemux/ADM_encoder/adm_encmpeg2enc.h:57
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:61
@@ -218,9 +212,8 @@
 msgstr &quot;Xvid&quot;
 
 #: avidemux/ADM_encoder/adm_encXvid4.h:62
-#, fuzzy
 msgid &quot;Xvid4&quot;
-msgstr &quot;Xvid&quot;
+msgstr &quot;Xvid4&quot;
 
 #: avidemux/ADM_encoder/adm_encyv12.h:69
 msgid &quot;YV12&quot;
@@ -332,11 +325,11 @@
 
 #: avidemux/ADM_audiofilter/audiofilter_buildchain.cpp:322
 #: avidemux/gui_autodrive.cpp:62
-#: avidemux/gui_autodrive.cpp:74
-#: avidemux/gui_autodrive.cpp:120
-#: avidemux/gui_autodrive.cpp:135
-#: avidemux/gui_autodrive.cpp:162
-#: avidemux/gui_autodrive.cpp:196
+#: avidemux/gui_autodrive.cpp:72
+#: avidemux/gui_autodrive.cpp:113
+#: avidemux/gui_autodrive.cpp:128
+#: avidemux/gui_autodrive.cpp:155
+#: avidemux/gui_autodrive.cpp:189
 msgid &quot;Codec Error&quot;
 msgstr &quot;Error de codec&quot;
 
@@ -389,6 +382,13 @@
 msgid &quot;Aborted&quot;
 msgstr &quot;Abortado&quot;
 
+#: avidemux/ADM_editor/ADM_edit.cpp:82
+msgid &quot;&quot;
+&quot;Avidemux detected VBR MP3 audio in this file. For keeping audio/video in sync, time map is needed. Build it now?\n&quot;
+&quot;\n&quot;
+&quot;You can do it later with \&quot;Audio -&gt; Build VBR Time Map\&quot;.&quot;
+msgstr &quot;&quot;
+
 #: avidemux/ADM_editor/ADM_edit.cpp:407
 msgid &quot;File type identified but no loader support detected...&quot;
 msgstr &quot;Tipo de archivo identificado pero no se ha detectado soporte para cargarlo...&quot;
@@ -421,18 +421,20 @@
 msgstr &quot;&#191;Construir mapa de tiempo VBR?&quot;
 
 #: avidemux/ADM_editor/ADM_edit.cpp:585
-msgid &quot;Use that mode&quot;
+#, fuzzy
+msgid &quot;Use safe mode&quot;
 msgstr &quot;Utilizar este modo&quot;
 
 #: avidemux/ADM_editor/ADM_edit.cpp:585
-msgid &quot;H264 detected&quot;
-msgstr &quot;H264 detectado&quot;
+msgid &quot;H.264 detected&quot;
+msgstr &quot;H.264 detectado&quot;
 
 #: avidemux/ADM_editor/ADM_edit.cpp:585
+#, fuzzy
 msgid &quot;&quot;
-&quot;If the file is using bframe as reference, it can lead to crash or stutteting.\n&quot;
-&quot;Avidemux can use another mode which is safed but &lt;b&gt;YOU WILL LOOSE FRAME ACCURACY&lt;/b&gt;.\n&quot;
-&quot;Do you want to use that mode ?&quot;
+&quot;If the file is using B-frames as reference it can lead to a crash or stuttering.\n&quot;
+&quot;Avidemux can use another mode which is safe but &lt;b&gt;YOU WILL LOSE FRAME ACCURACY&lt;/b&gt;.\n&quot;
+&quot;Do you want to use that mode?&quot;
 msgstr &quot;&quot;
 &quot;Si el archivo utiliza el imagen B como referencia, puede llevar a un cuelgue o malfuncionamiento.\n&quot;
 &quot;Avidemux puede utilizar otro modo de forma segura pero &lt;b&gt;PERDER&#193; LA EXACTITUD DE IMAGEN&lt;/b&gt;.\n&quot;
@@ -911,16 +913,15 @@
 
 #: avidemux/ADM_filter/filter_declaration.cpp:131
 #: avidemux/ADM_videoFilter/ADM_vidMPLD3D.cpp:80
-#, fuzzy
 msgid &quot;MPlayer hqdn3d&quot;
-msgstr &quot;MPlayer eq2&quot;
+msgstr &quot;MPlayer hqdn3d&quot;
 
 #: avidemux/ADM_filter/filter_declaration.cpp:131
 msgid &quot;High quality version of denoise3d. Slower but more precise.&quot;
 msgstr &quot;Versi&#243;n de alta calidad de denoise3d. M&#225;s lento pero preciso.&quot;
 
 #: avidemux/ADM_filter/filter_declaration.cpp:132
-#: avidemux/ADM_videoFilter/ADM_vidFlux.cpp:138
+#: avidemux/ADM_videoFilter/ADM_vidFlux.cpp:139
 msgid &quot;FluxSmooth&quot;
 msgstr &quot;&quot;
 
@@ -1297,7 +1298,7 @@
 msgid &quot;Indexing&quot;
 msgstr &quot;Indexando&quot;
 
-#: avidemux/ADM_libraries/ADM_lavformat/ADM_lavformat.cpp:376
+#: avidemux/ADM_libraries/ADM_lavformat/ADM_lavformat.cpp:379
 msgid &quot;Incompatible frame rate&quot;
 msgstr &quot;Framerate incompatible&quot;
 
@@ -1349,14 +1350,14 @@
 #: avidemux/ADM_ocr/adm_glyph.cpp:221
 #: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:366
 #: avidemux/ADM_outputs/oplug_ogm/op_ogsave.cpp:112
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:115
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:120
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:127
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:136
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:233
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:239
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:246
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:255
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:107
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:112
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:119
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:128
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:225
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:231
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:238
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:247
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/TLK_filesel.cpp:325
 #: avidemux/gtk_gui.cpp:903
 #: avidemux/gtk_gui.cpp:1505
@@ -1410,19 +1411,37 @@
 msgid &quot;Could not read \&quot;%s\&quot;.&quot;
 msgstr &quot;No se pudo leer \&quot;%s\&quot;.&quot;
 
-#: avidemux/ADM_ocr/ADM_ocrEngine.cpp:87
+#: avidemux/ADM_ocr/ADM_ocrEngine.cpp:78
 msgid &quot;Output file error&quot;
 msgstr &quot;Error de archivo de salida&quot;
 
-#: avidemux/ADM_ocr/ADM_ocrEngine.cpp:87
+#: avidemux/ADM_ocr/ADM_ocrEngine.cpp:78
 #, c-format
 msgid &quot;Could not open \&quot;%s\&quot; for writing.&quot;
 msgstr &quot;No se pudo abrir \&quot;%s\&quot; para escritura.&quot;
 
-#: avidemux/ADM_ocr/ADM_ocrEngine.cpp:105
+#: avidemux/ADM_ocr/ADM_ocrEngine.cpp:86
+#: avidemux/ADM_ocr/ADM_ocrEngine.cpp:92
+#, fuzzy
+msgid &quot;Input file error&quot;
+msgstr &quot;Error de archivo de salida&quot;
+
+#: avidemux/ADM_ocr/ADM_ocrEngine.cpp:86
+msgid &quot;Unknown source type&quot;
+msgstr &quot;Tipo de fuente desconocida&quot;
+
+#: avidemux/ADM_ocr/ADM_ocrEngine.cpp:92
+msgid &quot;Bitmap source failed&quot;
+msgstr &quot;&quot;
+
+#: avidemux/ADM_ocr/ADM_ocrEngine.cpp:100
 msgid &quot;Problem loading sub&quot;
 msgstr &quot;Problema cargando sub&quot;
 
+#: avidemux/ADM_ocr/ADM_ocrEngine.cpp:100
+msgid &quot;No subs&quot;
+msgstr &quot;&quot;
+
 #: avidemux/ADM_ocr/ADM_vob2vobsub.cpp:254
 msgid &quot;Ifo error&quot;
 msgstr &quot;Error en Ifo&quot;
@@ -1577,8 +1596,8 @@
 
 #: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:256
 #: avidemux/ADM_outputs/oplug_dummy/oplug_dummy.cpp:141
-#: avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp:195
-#: avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp:269
+#: avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp:189
+#: avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp:263
 #: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:164
 #: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:268
 #: avidemux/ADM_outputs/oplug_ogm/op_ogaudio.cpp:70
@@ -1619,38 +1638,32 @@
 msgstr &quot;PCM&quot;
 
 #: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:487
-#, fuzzy
 msgid &quot;MP2&quot;
-msgstr &quot;MP4&quot;
+msgstr &quot;MP2&quot;
 
 #: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:488
-#, fuzzy
 msgid &quot;MP3&quot;
-msgstr &quot;MP4&quot;
+msgstr &quot;MP3&quot;
 
 #: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:489
-#, fuzzy
 msgid &quot;WMA&quot;
-msgstr &quot;MAD&quot;
+msgstr &quot;WMA&quot;
 
 #: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:490
-#, fuzzy
 msgid &quot;LPCM&quot;
-msgstr &quot;PCM&quot;
+msgstr &quot;LPCM&quot;
 
 #: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:491
 msgid &quot;AC3&quot;
 msgstr &quot;&quot;
 
 #: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:492
-#, fuzzy
 msgid &quot;Ogg Vorbis&quot;
-msgstr &quot;Vorbis&quot;
+msgstr &quot;Ogg Vorbis&quot;
 
 #: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:494
-#, fuzzy
 msgid &quot;AAC&quot;
-msgstr &quot;FAAC&quot;
+msgstr &quot;AAC&quot;
 
 #: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:495
 msgid &quot;QDM2&quot;
@@ -1661,9 +1674,8 @@
 msgstr &quot;&quot;
 
 #: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:497
-#, fuzzy
 msgid &quot;MSADPCM&quot;
-msgstr &quot;MAD&quot;
+msgstr &quot;MSADPCM&quot;
 
 #: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:498
 msgid &quot;ULAW&quot;
@@ -1678,17 +1690,15 @@
 msgstr &quot;&quot;
 
 #: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:502
-#, fuzzy
 msgid &quot;Unknown codec&quot;
-msgstr &quot;Desconocido&quot;
+msgstr &quot;Codec desconocido&quot;
 
 #: avidemux/ADM_outputs/oplug_avi/op_avisavecopy.cpp:109
 #: avidemux/ADM_outputs/oplug_avi/op_avisavecopy_pack.cpp:134
 #: avidemux/ADM_outputs/oplug_avi/op_avisavecopy_unpack.cpp:111
 #: avidemux/ADM_outputs/oplug_mpeg/op_mpegpass.cpp:223
-#, fuzzy
 msgid &quot;Saving&quot;
-msgstr &quot;Guardando audio&quot;
+msgstr &quot;Guardando&quot;
 
 #: avidemux/ADM_outputs/oplug_avi/op_saveprocess.cpp:73
 msgid &quot;&quot;
@@ -1700,7 +1710,7 @@
 
 #: avidemux/ADM_outputs/oplug_avi/op_saveprocess.cpp:93
 #: avidemux/ADM_outputs/oplug_dummy/oplug_dummy.cpp:149
-#: avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp:203
+#: avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp:197
 #: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:176
 #: avidemux/ADM_outputs/oplug_ogm/op_ogsaveprocess.cpp:76
 msgid &quot;Filter init failed&quot;
@@ -1728,26 +1738,24 @@
 
 #: avidemux/ADM_outputs/oplug_avi/op_saveprocess.cpp:246
 #: avidemux/ADM_outputs/oplug_dummy/oplug_dummy.cpp:153
-#: avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp:207
+#: avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp:201
 #: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:188
 #: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:373
 #: avidemux/ADM_outputs/oplug_ogm/op_ogsaveprocess.cpp:143
-#, fuzzy
 msgid &quot;Encoding&quot;
-msgstr &quot;Codificando:&quot;
+msgstr &quot;Codificando&quot;
 
 #: avidemux/ADM_outputs/oplug_avi/op_saveprocess.cpp:250
 #: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:467
-#, fuzzy
 msgid &quot;2nd Pass&quot;
-msgstr &quot;Segunda pasada&quot;
+msgstr &quot;2nd pasada&quot;
 
 #: avidemux/ADM_outputs/oplug_avi/op_savesmart.cpp:107
 msgid &quot;Smart Copy&quot;
 msgstr &quot;&quot;
 
 #: avidemux/ADM_outputs/oplug_dummy/oplug_dummy.cpp:135
-#: avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp:189
+#: avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp:183
 #: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:156
 msgid &quot;Cannot initialize the video stream&quot;
 msgstr &quot;No se puede iniciar la pista de v&#237;deo&quot;
@@ -1758,8 +1766,8 @@
 
 #: avidemux/ADM_outputs/oplug_dummy/oplug_dummy.cpp:179
 #: avidemux/ADM_outputs/oplug_dummy/oplug_dummy.cpp:215
-#: avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp:233
-#: avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp:332
+#: avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp:227
+#: avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp:326
 #: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:214
 #: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:337
 #: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:421
@@ -1768,13 +1776,13 @@
 msgstr &quot;Error durante la codificaci&#243;n&quot;
 
 #: avidemux/ADM_outputs/oplug_dummy/oplug_dummy.cpp:190
-#: avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp:244
+#: avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp:238
 #: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:226
 msgid &quot;KeyFrame error&quot;
 msgstr &quot;Error de Imagen-Clave&quot;
 
 #: avidemux/ADM_outputs/oplug_dummy/oplug_dummy.cpp:190
-#: avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp:244
+#: avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp:238
 #: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:226
 msgid &quot;&quot;
 &quot;The beginning frame is not a key frame.\n&quot;
@@ -1783,28 +1791,28 @@
 &quot;La imagen inicial no es un Imagen-Clave\n&quot;
 &quot;Desplace el marcador A.&quot;
 
-#: avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp:151
+#: avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp:145
 msgid &quot;Unsupported video&quot;
 msgstr &quot;V&#237;deo no soportado&quot;
 
-#: avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp:151
+#: avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp:145
 msgid &quot;Only FLV1 and VP6 video are supported&quot;
 msgstr &quot;S&#243;lo los v&#237;deos FLV1 y VP6 son soportados&quot;
 
-#: avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp:173
-#: avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp:178
+#: avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp:167
+#: avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp:172
 msgid &quot;Unsupported audio&quot;
 msgstr &quot;Audio no soportado&quot;
 
-#: avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp:173
+#: avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp:167
 msgid &quot;Audio must be mp3 for flv output.&quot;
 msgstr &quot;El formato de audio debe ser MP3 para el formato de salida FVL&quot;
 
-#: avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp:178
+#: avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp:172
 msgid &quot;Frequency must be 44100, 22050 or 11025 Hz.&quot;
 msgstr &quot;La frecuencia debe ser 44100, 22050 o 11025 Hz.&quot;
 
-#: avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp:254
+#: avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp:248
 #: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:253
 msgid &quot;Cannot initialize the audio stream&quot;
 msgstr &quot;No se puede inicializar la pista de audio&quot;
@@ -1851,27 +1859,23 @@
 
 #: avidemux/ADM_outputs/oplug_mpeg/op_mpegpass.cpp:230
 #: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:287
-#, fuzzy
 msgid &quot;MPEG TS&quot;
-msgstr &quot;MPEG&quot;
+msgstr &quot;MPEG TS&quot;
 
 #: avidemux/ADM_outputs/oplug_mpeg/op_mpegpass.cpp:231
 #: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:288
-#, fuzzy
 msgid &quot;MPEG VCD&quot;
-msgstr &quot;MPEG&quot;
+msgstr &quot;MPEG VCD&quot;
 
 #: avidemux/ADM_outputs/oplug_mpeg/op_mpegpass.cpp:232
 #: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:289
-#, fuzzy
 msgid &quot;MPEG SVCD&quot;
-msgstr &quot;MPEG&quot;
+msgstr &quot;MPEG SVCD&quot;
 
 #: avidemux/ADM_outputs/oplug_mpeg/op_mpegpass.cpp:233
 #: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:290
-#, fuzzy
 msgid &quot;MPEG DVD&quot;
-msgstr &quot;MPEG&quot;
+msgstr &quot;MPEG DVD&quot;
 
 #: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:193
 msgid &quot;For DVD, audio must be 48 kHz MP2, AC3 or LPCM.&quot;
@@ -1902,14 +1906,12 @@
 msgstr &quot;&quot;
 
 #: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:278
-#, fuzzy
 msgid &quot;MPEG Requantizer&quot;
-msgstr &quot;Cuantizador MPEG&quot;
+msgstr &quot;Recuantizador MPEG&quot;
 
 #: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:286
-#, fuzzy
 msgid &quot;MPEG ES&quot;
-msgstr &quot;MPEG&quot;
+msgstr &quot;MPEG ES&quot;
 
 #: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:305
 msgid &quot;Reuse log file ?&quot;
@@ -1940,9 +1942,8 @@
 msgstr &quot;No se pudo inicializar audio&quot;
 
 #: avidemux/ADM_outputs/oplug_ogm/op_ogsavecopy.cpp:70
-#, fuzzy
 msgid &quot;Saving...&quot;
-msgstr &quot;Guardar&quot;
+msgstr &quot;Guardando...&quot;
 
 #: avidemux/ADM_outputs/oplug_ogm/op_ogsaveprocess.cpp:111
 msgid &quot;Pass one&quot;
@@ -2390,9 +2391,8 @@
 msgstr &quot;Entrelazando:&quot;
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp:88
-#, fuzzy
 msgid &quot;libavcodec MPEG-2 Configuration&quot;
-msgstr &quot;Configuraci&#243;n MPEG-2&quot;
+msgstr &quot;Configuraci&#243;n libavcodec MPEG-2&quot;
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flv1.cpp:44
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_bitrate.cpp:109
@@ -2413,15 +2413,32 @@
 msgstr &quot;_Minutos:&quot;
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_gototime.cpp:29
-#, fuzzy
 msgid &quot;_Seconds:&quot;
-msgstr &quot;Segunda pasada&quot;
+msgstr &quot;Segunda pasada:&quot;
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_gototime.cpp:32
 #, fuzzy
 msgid &quot;Go to Time&quot;
 msgstr &quot;Saltar a _tiempo...&quot;
 
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_jobs_save.cpp:6
+msgid &quot;_Job name:&quot;
+msgstr &quot;Nombre de tarea&quot;
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_jobs_save.cpp:7
+#, fuzzy
+msgid &quot;Output _File:&quot;
+msgstr &quot;Archivo de Salida&quot;
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_jobs_save.cpp:7
+#, fuzzy
+msgid &quot;Select Video To Write&quot;
+msgstr &quot;Seleccione archivo AVI para escribir&quot;
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_jobs_save.cpp:10
+msgid &quot;Save Job&quot;
+msgstr &quot;Guardar tarea&quot;
+
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:52
 msgid &quot;Full&quot;
 msgstr &quot;Completo&quot;
@@ -2544,9 +2561,8 @@
 msgstr &quot;Control de Frecuencia&quot;
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:120
-#, fuzzy
 msgid &quot;libavcodec MPEG-4 configuration&quot;
-msgstr &quot;Configuraci&#243;n MPEG-2&quot;
+msgstr &quot;Configuraci&#243;n libavcodec MPEG-4&quot;
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavDecoder.cpp:26
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_postproc.cpp:41
@@ -2568,97 +2584,96 @@
 msgstr &quot;_Swap U&amp;V:&quot;
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_mjpeg.cpp:39
-#, fuzzy
 msgid &quot;MJPEG Configuration&quot;
-msgstr &quot;Configuraci&#243;n MPEG-2&quot;
+msgstr &quot;Configuraci&#243;n MJPEG&quot;
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:92
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:85
 msgid &quot;Select idx file:&quot;
 msgstr &quot;Seleccionar archivo idx:&quot;
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:93
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:86
 msgid &quot;Use GlyphSet (optional):&quot;
 msgstr &quot;Usar GliphSet (opcional):&quot;
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:93
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:210
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:86
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:202
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:367
 #, fuzzy
 msgid &quot;Select GlyphSet file&quot;
 msgstr &quot;Seleccionar archivo de salida&quot;
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:94
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:211
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:87
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:203
 msgid &quot;Output SRT file&quot;
 msgstr &quot;Archivo SRT de salida&quot;
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:94
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:211
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:87
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:203
 #, fuzzy
 msgid &quot;Save SRT file&quot;
 msgstr &quot;Guardar el archivo&quot;
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:105
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:222
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:97
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:214
 msgid &quot;Select input and ouput files&quot;
 msgstr &quot;Seleccionar archivos de entrada y salida&quot;
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:115
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:127
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:246
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:107
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:119
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:238
 msgid &quot;The idx/sub file does not exist.&quot;
 msgstr &quot;El archivo idx/sub no existe.&quot;
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:120
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:239
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:112
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:231
 msgid &quot;Please Select a valid output SRT file.&quot;
 msgstr &quot;Seleccione o introduzca un archivo SRT v&#225;lido&quot;
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:136
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:255
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:128
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:247
 msgid &quot;Cannot load the glyphset file.&quot;
 msgstr &quot;No se puede cargar el archivo glyphset.&quot;
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:156
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:276
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:147
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:268
 #, fuzzy
 msgid &quot;GlyphSet filename&quot;
 msgstr &quot;Nombre no v&#225;lido&quot;
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:156
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:276
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:147
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:268
 #, fuzzy
 msgid &quot;Save GlyphSet file&quot;
 msgstr &quot;Guardar el archivo&quot;
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:158
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:149
 msgid &quot;Save Glyph&quot;
 msgstr &quot;Guardar Glyph&quot;
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:208
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:200
 #, fuzzy
 msgid &quot;Input TS:&quot;
 msgstr &quot;Entrada&quot;
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:208
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:200
 #, fuzzy
 msgid &quot;Select TS file&quot;
 msgstr &quot;Seleccionar archivo TTF&quot;
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:209
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:201
 msgid &quot;Subtitle PID:&quot;
 msgstr &quot;Subt&#237;tulos PID:&quot;
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:210
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:202
 msgid &quot;Use glyphset (optional):&quot;
 msgstr &quot;Usar glyphset (opcional):&quot;
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:233
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:225
 #, fuzzy
 msgid &quot;Please Select a valid TS file.&quot;
 msgstr &quot;Seleccione o introduzca un archivo SRT v&#225;lido&quot;
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:278
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:270
 #, fuzzy
 msgid &quot;Save GlyphSet&quot;
 msgstr &quot;Guardar Glyph&quot;
@@ -3066,7 +3081,6 @@
 msgstr &quot;Codificando:&quot;
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_srt.cpp:106
-#, fuzzy
 msgid &quot;S_elect C_olor&quot;
 msgstr &quot;Seleccionar color&quot;
 
@@ -4668,57 +4682,6 @@
 msgid &quot;Run Job&quot;
 msgstr &quot;Ejecutar tarea&quot;
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs_save.cpp:49
-#, fuzzy
-msgid &quot;Select Video to Write&quot;
-msgstr &quot;Seleccione archivo AVI para escribir&quot;
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs_save.cpp:63
-msgid &quot;Invalid filename&quot;
-msgstr &quot;Nombre no v&#225;lido&quot;
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs_save.cpp:63
-msgid &quot;Please select or enter a valid filename.&quot;
-msgstr &quot;Seleccione o introduzca un nombre v&#225;lido&quot;
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs_save.cpp:69
-msgid &quot;Invalid jobname&quot;
-msgstr &quot;Nombre no v&#225;lido&quot;
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs_save.cpp:69
-msgid &quot;Please select or enter a valid jobname.&quot;
-msgstr &quot;Seleccione o introduzca un nombre v&#225;lido&quot;
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs_save.cpp:110
-msgid &quot;Save Job&quot;
-msgstr &quot;Guardar tarea&quot;
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs_save.cpp:131
-msgid &quot;Select the output file&quot;
-msgstr &quot;Seleccionar archivo de salida&quot;
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs_save.cpp:145
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/DIA_filesel.cpp:90
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/DIA_filesel.cpp:244
-msgid &quot;_Browse...&quot;
-msgstr &quot;Buscar...&quot;
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs_save.cpp:154
-msgid &quot;Job name displayed in the job list and used as the script filename&quot;
-msgstr &quot;Nombre de tarea mostrado en la lista de tareas y utilizado como nombre del script&quot;
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs_save.cpp:163
-msgid &quot;Filename of the audio/video output&quot;
-msgstr &quot;Nombre del archivo de salida&quot;
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs_save.cpp:166
-msgid &quot;_Job name:&quot;
-msgstr &quot;Nombre de tarea&quot;
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs_save.cpp:173
-msgid &quot;Output _file:&quot;
-msgstr &quot;Archivo de Salida&quot;
-
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_mpdelogo.cpp:379
 msgid &quot;Mplayer Delogo&quot;
 msgstr &quot;Mplayer Delogo&quot;
@@ -5115,7 +5078,7 @@
 msgid &quot;Configure&quot;
 msgstr &quot;Configurar&quot;
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_vobsub.cpp:88
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_vobsub.cpp:89
 msgid &quot;none&quot;
 msgstr &quot;ninguno&quot;
 
@@ -5123,6 +5086,16 @@
 msgid &quot;Select .idx file&quot;
 msgstr &quot;Seleccionar archivo .idx&quot;
 
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_vobsub.cpp:109
+#, fuzzy
+msgid &quot;Wrong VobSub parametering&quot;
+msgstr &quot;Configuraci&#243;n VobSub&quot;
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_vobsub.cpp:109
+#, fuzzy
+msgid &quot;The idx/sub file does not set.&quot;
+msgstr &quot;El archivo idx/sub no existe.&quot;
+
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_vobsub.cpp:196
 msgid &quot;VobSub Settings&quot;
 msgstr &quot;Configuraci&#243;n VobSub&quot;
@@ -6323,6 +6296,11 @@
 msgid &quot;Select Color&quot;
 msgstr &quot;Seleccionar color&quot;
 
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/DIA_filesel.cpp:90
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/DIA_filesel.cpp:244
+msgid &quot;_Browse...&quot;
+msgstr &quot;Buscar...&quot;
+
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_bitrate.cpp:99
 #, fuzzy
 msgid &quot;_Encoding mode:&quot;
@@ -7793,12 +7771,12 @@
 msgid &quot;Blend Threshold&quot;
 msgstr &quot;Umbral de cambio de escena&quot;
 
-#: avidemux/ADM_videoFilter/ADM_vidFlux.cpp:133
+#: avidemux/ADM_videoFilter/ADM_vidFlux.cpp:134
 #, fuzzy
 msgid &quot;_Temporal threshold:&quot;
 msgstr &quot;Umbral:&quot;
 
-#: avidemux/ADM_videoFilter/ADM_vidFlux.cpp:134
+#: avidemux/ADM_videoFilter/ADM_vidFlux.cpp:135
 #, fuzzy
 msgid &quot;_Spatial threshold:&quot;
 msgstr &quot;Umbral:&quot;
@@ -8743,14 +8721,14 @@
 msgstr &quot;Es necesaria una pista de audio para crear ese tipo de archivo&quot;
 
 #: avidemux/gui_autodrive.cpp:63
-msgid &quot;You need Xvid4 and either LAME or FAAC support for the iPod profile&quot;
+msgid &quot;Xvid4 and FAAC support is required for the iPod profile.&quot;
 msgstr &quot;&quot;
 
-#: avidemux/gui_autodrive.cpp:74
+#: avidemux/gui_autodrive.cpp:72
 msgid &quot;Cannot select the MPEG-4 SP codec.&quot;
 msgstr &quot;No se puede seleccionar el codec MPEG4 SP.&quot;
 
-#: avidemux/gui_autodrive.cpp:121
+#: avidemux/gui_autodrive.cpp:114
 msgid &quot;&quot;
 &quot;You don't have LAME!.\n&quot;
 &quot;It is needed to create FLV  video.&quot;
@@ -8758,15 +8736,15 @@
 &quot;Sin soporte para LAME.\n&quot;
 &quot;Es necesario para crear v&#237;deos FLV.&quot;
 
-#: avidemux/gui_autodrive.cpp:135
+#: avidemux/gui_autodrive.cpp:128
 msgid &quot;Cannot select FLV1  codec.&quot;
 msgstr &quot;No se puede seleccionar el codec FLV1.&quot;
 
-#: avidemux/gui_autodrive.cpp:162
+#: avidemux/gui_autodrive.cpp:155
 msgid &quot;Cannot select mpeg4 sp codec.&quot;
 msgstr &quot;No se puede seleccionar el codec MPEG4 SP.&quot;
 
-#: avidemux/gui_autodrive.cpp:197
+#: avidemux/gui_autodrive.cpp:190
 msgid &quot;&quot;
 &quot;You don't have FAAC!.\n&quot;
 &quot;It is needed to create PSP compatible video.&quot;
@@ -8854,3 +8832,20 @@
 &quot;Puede necesitar copia inteligente.\n&quot;
 &quot; &#191;Activar?&quot;
 
+#~ msgid &quot;Invalid filename&quot;
+#~ msgstr &quot;Nombre no v&#225;lido&quot;
+#~ msgid &quot;Please select or enter a valid filename.&quot;
+#~ msgstr &quot;Seleccione o introduzca un nombre v&#225;lido&quot;
+#~ msgid &quot;Invalid jobname&quot;
+#~ msgstr &quot;Nombre no v&#225;lido&quot;
+#~ msgid &quot;Please select or enter a valid jobname.&quot;
+#~ msgstr &quot;Seleccione o introduzca un nombre v&#225;lido&quot;
+#~ msgid &quot;Select the output file&quot;
+#~ msgstr &quot;Seleccionar archivo de salida&quot;
+#~ msgid &quot;Job name displayed in the job list and used as the script filename&quot;
+#~ msgstr &quot;&quot;
+#~ &quot;Nombre de tarea mostrado en la lista de tareas y utilizado como nombre &quot;
+#~ &quot;del script&quot;
+#~ msgid &quot;Filename of the audio/video output&quot;
+#~ msgstr &quot;Nombre del archivo de salida&quot;
+


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001411.html">[Avidemux-svn-commit] r4156 - in	branches/avidemux_2.5_branch_gruntster: avidemux	avidemux/ADM_userInterfaces/ADM_GTK	avidemux/ADM_userInterfaces/ADM_QT4 plugins/ADM_videoFilters/Crop
</A></li>
	<LI>Next message: <A HREF="001413.html">[Avidemux-svn-commit] r4158 - in	branches/avidemux_2.5_branch_gruntster: avidemux	avidemux/ADM_core/src avidemux/ADM_coreImage/include	avidemux/ADM_coreUI/include avidemux/ADM_coreUI/src	avidemux/ADM_filter avidemux/ADM_libraries/ADM_utilities	avidemux/ADM_script avidemux/ADM_toolkit	avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog	avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2	avidemux/ADM_userInterfaces/ADM_NONE/ADM_gui2	avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui	plugins/ADM_videoFilters/Srt
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1412">[ date ]</a>
              <a href="thread.html#1412">[ thread ]</a>
              <a href="subject.html#1412">[ subject ]</a>
              <a href="author.html#1412">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">More information about the Avidemux-svn-commit
mailing list</a><br>
</body></html>
