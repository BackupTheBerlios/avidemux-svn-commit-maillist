<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Avidemux-svn-commit] r4095 - in	branches/avidemux_2.5_branch_gruntster: . avidemux/ADM_codecs	cmake plugins/ADM_videoEncoder	plugins/ADM_videoEncoder/ADM_vidEnc_xvid	plugins/ADM_videoEncoder/ADM_vidEnc_xvid/gtk	plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/avidemux-svn-commit/2008-June/index.html" >
   <LINK REL="made" HREF="mailto:avidemux-svn-commit%40lists.berlios.de?Subject=Re%3A%20%5BAvidemux-svn-commit%5D%20r4095%20-%20in%0A%09branches/avidemux_2.5_branch_gruntster%3A%20.%20avidemux/ADM_codecs%0A%09cmake%20plugins/ADM_videoEncoder%0A%09plugins/ADM_videoEncoder/ADM_vidEnc_xvid%0A%09plugins/ADM_videoEncoder/ADM_vidEnc_xvid/gtk%0A%09plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4&In-Reply-To=%3C200806131218.m5DCIrfH014058%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001350.html">
   <LINK REL="Next"  HREF="001352.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Avidemux-svn-commit] r4095 - in	branches/avidemux_2.5_branch_gruntster: . avidemux/ADM_codecs	cmake plugins/ADM_videoEncoder	plugins/ADM_videoEncoder/ADM_vidEnc_xvid	plugins/ADM_videoEncoder/ADM_vidEnc_xvid/gtk	plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4</H1>
    <B>gruntster at mail.berlios.de</B> 
    <A HREF="mailto:avidemux-svn-commit%40lists.berlios.de?Subject=Re%3A%20%5BAvidemux-svn-commit%5D%20r4095%20-%20in%0A%09branches/avidemux_2.5_branch_gruntster%3A%20.%20avidemux/ADM_codecs%0A%09cmake%20plugins/ADM_videoEncoder%0A%09plugins/ADM_videoEncoder/ADM_vidEnc_xvid%0A%09plugins/ADM_videoEncoder/ADM_vidEnc_xvid/gtk%0A%09plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4&In-Reply-To=%3C200806131218.m5DCIrfH014058%40sheep.berlios.de%3E"
       TITLE="[Avidemux-svn-commit] r4095 - in	branches/avidemux_2.5_branch_gruntster: . avidemux/ADM_codecs	cmake plugins/ADM_videoEncoder	plugins/ADM_videoEncoder/ADM_vidEnc_xvid	plugins/ADM_videoEncoder/ADM_vidEnc_xvid/gtk	plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4">gruntster at mail.berlios.de
       </A><BR>
    <I>Fri Jun 13 14:18:53 CEST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="001350.html">[Avidemux-svn-commit] r4094 - in	branches/avidemux_2.5_branch_gruntster: avidemux	avidemux/ADM_codecs avidemux/ADM_editor avidemux/ADM_ocr	avidemux/ADM_outputs avidemux/ADM_outputs/oplug_flv	avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog	avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui	avidemux/ADM_userInterfaces/ADM_commonUI avidemux/winInstaller po
</A></li>
        <LI>Next message: <A HREF="001352.html">[Avidemux-svn-commit] r4096 - branches/avidemux_2.4_branch/po
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1351">[ date ]</a>
              <a href="thread.html#1351">[ thread ]</a>
              <a href="subject.html#1351">[ subject ]</a>
              <a href="author.html#1351">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: gruntster
Date: 2008-06-13 14:18:36 +0200 (Fri, 13 Jun 2008)
New Revision: 4095

Added:
   branches/avidemux_2.5_branch_gruntster/cmake/admCheckXvid.cmake
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_xvid/
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_xvid/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_xvid/config.h.cmake
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_xvid/configGuiLoader.cpp
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_xvid/configGuiLoader.h
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_xvid/encoder.cpp
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_xvid/encoder.h
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_xvid/gtk/
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_xvid/gtk/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_xvid/gtk/gtkSupport.cpp
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_xvid/gtk/gtkSupport.h
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_xvid/gtk/xvidConfigDialog.cpp
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_xvid/gtk/xvidConfigDialog.h
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_xvid/interface.c
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_xvid/options.cpp
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_xvid/options.h
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidConfigDialog.cpp
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidConfigDialog.h
Removed:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/ADM_xvidcvs.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/ADM_xvideco.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/ADM_xvideco.h
   branches/avidemux_2.5_branch_gruntster/cmake/admCheckVideoCodecLibs.cmake
Modified:
   branches/avidemux_2.5_branch_gruntster/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/ADM_codecs.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/cmake/admConfigSummary.cmake
   branches/avidemux_2.5_branch_gruntster/cmake/admPluginConfigSummary.cmake
   branches/avidemux_2.5_branch_gruntster/cmake/config.h.cmake
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/CMakeLists.txt
Log:
[xvid] plugin skeleton

Modified: branches/avidemux_2.5_branch_gruntster/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/CMakeLists.txt	2008-06-11 11:40:29 UTC (rev 4094)
+++ branches/avidemux_2.5_branch_gruntster/CMakeLists.txt	2008-06-13 12:18:36 UTC (rev 4095)
@@ -141,7 +141,6 @@
 	SET(ADM_UI_QT4 0)
 ENDIF (NOT QT4_FOUND)
 
-INCLUDE(admCheckVideoCodecLibs)
 INCLUDE(admCheckAudioCodecLibs)
 INCLUDE(admCheckAudioDeviceLibs)
 INCLUDE(admCheckMiscLibs)

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/ADM_codecs.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/ADM_codecs.cpp	2008-06-11 11:40:29 UTC (rev 4094)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/ADM_codecs.cpp	2008-06-13 12:18:36 UTC (rev 4095)
@@ -42,7 +42,6 @@
 #include &quot;ADM_codecs/ADM_codecNull.h&quot;
 #include &quot;ADM_codecs/ADM_rgb16.h&quot;
 #include &quot;ADM_codecs/ADM_uyvy.h&quot;
-#include &quot;ADM_codecs/ADM_xvideco.h&quot;
 
 #include &quot;fourcc.h&quot;
 

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/ADM_xvidcvs.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/ADM_xvidcvs.cpp	2008-06-11 11:40:29 UTC (rev 4094)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/ADM_xvidcvs.cpp	2008-06-13 12:18:36 UTC (rev 4095)
@@ -1 +0,0 @@
-// Old

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/ADM_xvideco.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/ADM_xvideco.cpp	2008-06-11 11:40:29 UTC (rev 4094)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/ADM_xvideco.cpp	2008-06-13 12:18:36 UTC (rev 4095)
@@ -1,17 +0,0 @@
-/***************************************************************************
-                          ADM_xvideco.cpp  -  description
-                             -------------------
-    begin                : Fri Aug 23 2002
-    copyright            : (C) 2002 by mean
-    email                : <A HREF="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">fixounet at free.fr</A>
- ***************************************************************************/
-
-/***************************************************************************
- *                                                                         *
- *   This program is free software; you can redistribute it and/or modify  *
- *   it under the terms of the GNU General Public License as published by  *
- *   the Free Software Foundation; either version 2 of the License, or     *
- *   (at your option) any later version.                                   *
- *                                                                         *
- ***************************************************************************/
- //RMED

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/ADM_xvideco.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/ADM_xvideco.h	2008-06-11 11:40:29 UTC (rev 4094)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/ADM_xvideco.h	2008-06-13 12:18:36 UTC (rev 4095)
@@ -1,32 +0,0 @@
-/***************************************************************************
-                          ADM_xvideco.h  -  description
-                             -------------------
-    begin                : Fri Aug 23 2002
-    copyright            : (C) 2002 by mean
-    email                : <A HREF="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">fixounet at free.fr</A>
- ***************************************************************************/
-
-/***************************************************************************
- *                                                                         *
- *   This program is free software; you can redistribute it and/or modify  *
- *   it under the terms of the GNU General Public License as published by  *
- *   the Free Software Foundation; either version 2 of the License, or     *
- *   (at your option) any later version.                                   *
- *                                                                         *
- ***************************************************************************/
-#ifdef USE_XX_XVID
-class decoderXvid:decoders
-{
-protected:
-  void *_handle;
-
-
-public:
-    decoderXvid (uint32_t w, uint32_t h);
-    virtual ~ decoderXvid ();
-  virtual uint8_t uncompress (uint8_t * in, uint8_t * out, uint32_t len,
-			      uint32_t * flag = NULL);
-  virtual void setParam (void);
-};
-
-#endif

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/CMakeLists.txt	2008-06-11 11:40:29 UTC (rev 4094)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/CMakeLists.txt	2008-06-13 12:18:36 UTC (rev 4095)
@@ -1,6 +1,6 @@
 SET(ADM_codecs_SRCS 
-	ADM_codecs.cpp  ADM_ffmpeg.cpp  ADM_mjpegEncode.cpp  ADM_png.cpp    ADM_theora_dec.cpp   ADM_xvid.cpp     ADM_xvideco.cpp
-	ADM_ffmp43.cpp  ADM_mjpeg.cpp   ADM_rgb16.cpp  ADM_uyvy.cpp        ADM_xvid4.cpp  ADM_xvidcvs.cpp)
+	ADM_codecs.cpp  ADM_ffmpeg.cpp  ADM_mjpegEncode.cpp  ADM_png.cpp    ADM_theora_dec.cpp   ADM_xvid.cpp
+	ADM_ffmp43.cpp  ADM_mjpeg.cpp   ADM_rgb16.cpp  ADM_uyvy.cpp        ADM_xvid4.cpp)
 
 ADD_ADM_LIB_ALL_TARGETS(ADM_codecs ${ADM_codecs_SRCS})
 

Deleted: branches/avidemux_2.5_branch_gruntster/cmake/admCheckVideoCodecLibs.cmake
===================================================================
--- branches/avidemux_2.5_branch_gruntster/cmake/admCheckVideoCodecLibs.cmake	2008-06-11 11:40:29 UTC (rev 4094)
+++ branches/avidemux_2.5_branch_gruntster/cmake/admCheckVideoCodecLibs.cmake	2008-06-13 12:18:36 UTC (rev 4095)
@@ -1,20 +0,0 @@
-########################################
-# Xvid
-########################################
-OPTION(XVID &quot;&quot; ON)
-
-MESSAGE(STATUS &quot;Checking for Xvid&quot;)
-MESSAGE(STATUS &quot;*****************&quot;)
-
-IF (XVID)
-	FIND_HEADER_AND_LIB(XVID xvid.h xvidcore xvid_plugin_single)
-	PRINT_LIBRARY_INFO(&quot;Xvid&quot; XVID_FOUND &quot;${XVID_INCLUDE_DIR}&quot; &quot;${XVID_LIBRARY_DIR}&quot;)
-	
-	IF (XVID_FOUND)
-		SET(USE_XVID_4 1)
-	ENDIF (XVID_FOUND)
-ELSE (XVID)
-	MESSAGE(&quot;${MSG_DISABLE_OPTION}&quot;)
-ENDIF (XVID)
-
-MESSAGE(&quot;&quot;)
\ No newline at end of file

Copied: branches/avidemux_2.5_branch_gruntster/cmake/admCheckXvid.cmake (from rev 4091, branches/avidemux_2.5_branch_gruntster/cmake/admCheckVideoCodecLibs.cmake)
===================================================================
--- branches/avidemux_2.5_branch_gruntster/cmake/admCheckVideoCodecLibs.cmake	2008-06-08 18:03:18 UTC (rev 4091)
+++ branches/avidemux_2.5_branch_gruntster/cmake/admCheckXvid.cmake	2008-06-13 12:18:36 UTC (rev 4095)
@@ -0,0 +1,20 @@
+MACRO(checkXvid)
+	IF (NOT XVID_CHECKED)
+		OPTION(XVID &quot;&quot; ON)
+
+		MESSAGE(STATUS &quot;Checking for Xvid&quot;)
+		MESSAGE(STATUS &quot;*****************&quot;)
+
+		IF (XVID)
+			FIND_HEADER_AND_LIB(XVID xvid.h xvidcore xvid_plugin_single)
+			PRINT_LIBRARY_INFO(&quot;Xvid&quot; XVID_FOUND &quot;${XVID_INCLUDE_DIR}&quot; &quot;${XVID_LIBRARY_DIR}&quot;)
+		ELSE (XVID)
+			MESSAGE(&quot;${MSG_DISABLE_OPTION}&quot;)
+		ENDIF (XVID)
+
+		SET(ENV{ADM_HAVE_XVID} ${XVID_FOUND})
+		SET(XVID_CHECKED 1)
+
+		MESSAGE(&quot;&quot;)
+	ENDIF (NOT XVID_CHECKED)
+ENDMACRO(checkXvid)
\ No newline at end of file

Modified: branches/avidemux_2.5_branch_gruntster/cmake/admConfigSummary.cmake
===================================================================
--- branches/avidemux_2.5_branch_gruntster/cmake/admConfigSummary.cmake	2008-06-11 11:40:29 UTC (rev 4094)
+++ branches/avidemux_2.5_branch_gruntster/cmake/admConfigSummary.cmake	2008-06-13 12:18:36 UTC (rev 4095)
@@ -23,9 +23,6 @@
 ADM_DISPLAY(&quot;GTK+      &quot; &quot;${ADM_UI_GTK}&quot;)
 ADM_DISPLAY(&quot;Qt 4      &quot; &quot;${ADM_UI_QT4}&quot;)
 
-MESSAGE(&quot;***  Video Codec  ***&quot;)
-ADM_DISPLAY(&quot;Xvid      &quot; &quot;${USE_XVID_4}&quot;)
-
 MESSAGE(&quot;***  Audio Codec  ***&quot;)
 ADM_DISPLAY(&quot;Aften     &quot; &quot;${USE_AFTEN}&quot;)
 ADM_DISPLAY(&quot;LAME      &quot; &quot;${HAVE_LIBMP3LAME}&quot;)

Modified: branches/avidemux_2.5_branch_gruntster/cmake/admPluginConfigSummary.cmake
===================================================================
--- branches/avidemux_2.5_branch_gruntster/cmake/admPluginConfigSummary.cmake	2008-06-11 11:40:29 UTC (rev 4094)
+++ branches/avidemux_2.5_branch_gruntster/cmake/admPluginConfigSummary.cmake	2008-06-13 12:18:36 UTC (rev 4095)
@@ -22,6 +22,7 @@
 MESSAGE(&quot;*********************&quot;)
 MESSAGE(&quot;***  Video Codec  ***&quot;)
 ADM_DISPLAY(&quot;x264      &quot; &quot;$ENV{ADM_HAVE_X264}&quot;)
+ADM_DISPLAY(&quot;Xvid      &quot; &quot;$ENV{ADM_HAVE_XVID}&quot;)
 
 MESSAGE(&quot;***  Audio Codec  ***&quot;)
 ADM_DISPLAY(&quot;amrnb     &quot; &quot;$ENV{ADM_HAVE_AMRNB}&quot;)

Modified: branches/avidemux_2.5_branch_gruntster/cmake/config.h.cmake
===================================================================
--- branches/avidemux_2.5_branch_gruntster/cmake/config.h.cmake	2008-06-11 11:40:29 UTC (rev 4094)
+++ branches/avidemux_2.5_branch_gruntster/cmake/config.h.cmake	2008-06-13 12:18:36 UTC (rev 4095)
@@ -86,12 +86,6 @@
 #cmakedefine USE_XV
 #endif
 
-/* use Xvid 1.x API */
-#cmakedefine USE_XVID_4
-
-/* use Xvid 0.9 API */
-#cmakedefine USE_XX_XVID
-
 /* Version number of package */
 #define VERSION &quot;${VERSION}&quot;
 

Added: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_xvid/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_xvid/CMakeLists.txt	2008-06-11 11:40:29 UTC (rev 4094)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_xvid/CMakeLists.txt	2008-06-13 12:18:36 UTC (rev 4095)
@@ -0,0 +1,23 @@
+INCLUDE(admCheckXvid)
+INCLUDE(admPluginVideoEncoder)
+
+checkXvid()
+
+IF (XVID_FOUND)
+	INCLUDE_DIRECTORIES(${CMAKE_CURRENT_BINARY_DIR})
+
+	SET(QT_PLUGIN_NAME &quot;ADM_vidEnc_xvid_Qt&quot;)
+	SET(GTK_PLUGIN_NAME &quot;ADM_vidEnc_xvid_Gtk&quot;)
+	SET(PLUGIN_SUBDIR &quot;xvid&quot;)
+	SET(ADM_vidEnc_xvid_SRCS interface.c  encoder.cpp  options.cpp  configGuiLoader.cpp)
+
+	CONFIGURE_FILE(&quot;${CMAKE_CURRENT_SOURCE_DIR}/config.h.cmake&quot; &quot;${CMAKE_CURRENT_BINARY_DIR}/config.h&quot;)
+
+	ADD_SUBDIRECTORY(gtk)
+	ADD_SUBDIRECTORY(qt4)
+	ADD_LIBRARY(ADM_vidEnc_xvid SHARED ${ADM_vidEnc_xvid_SRCS})
+	TARGET_LINK_LIBRARIES(ADM_vidEnc_xvid ADM_core)
+
+	INIT_VIDEO_ENCODER_PLUGIN(ADM_vidEnc_xvid)
+	INSTALL_VIDEO_ENCODER(ADM_vidEnc_xvid)
+ENDIF (XVID_FOUND)
\ No newline at end of file

Added: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_xvid/config.h.cmake
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_xvid/config.h.cmake	2008-06-11 11:40:29 UTC (rev 4094)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_xvid/config.h.cmake	2008-06-13 12:18:36 UTC (rev 4095)
@@ -0,0 +1,11 @@
+#ifndef config_h
+#define config_h
+
+#define QT_PLUGIN_NAME &quot;${QT_PLUGIN_NAME}&quot;
+#define GTK_PLUGIN_NAME &quot;${GTK_PLUGIN_NAME}&quot;
+#define PLUGIN_SUBDIR &quot;${PLUGIN_SUBDIR}&quot;
+
+#define PLUGIN_PREFIX &quot;${CMAKE_SHARED_LIBRARY_PREFIX}&quot;
+#define PLUGIN_SUFFIX &quot;${CMAKE_SHARED_LIBRARY_SUFFIX}&quot;
+
+#endif	// config_h
\ No newline at end of file

Added: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_xvid/configGuiLoader.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_xvid/configGuiLoader.cpp	2008-06-11 11:40:29 UTC (rev 4094)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_xvid/configGuiLoader.cpp	2008-06-13 12:18:36 UTC (rev 4095)
@@ -0,0 +1,7 @@
+#include &quot;ADM_inttype.h&quot;
+#include &quot;configGuiLoader.h&quot;
+
+configGuiLoader::configGuiLoader(const char *file) : ADM_LibWrapper()
+{
+	initialised = (loadLibrary(file) &amp;&amp; getSymbols(1, &amp;showXvidConfigDialog, &quot;showXvidConfigDialog&quot;));
+}

Added: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_xvid/configGuiLoader.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_xvid/configGuiLoader.h	2008-06-11 11:40:29 UTC (rev 4094)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_xvid/configGuiLoader.h	2008-06-13 12:18:36 UTC (rev 4095)
@@ -0,0 +1,22 @@
+#ifndef configGuiLoader_h
+#define configGuiLoader_h
+
+#include &quot;ADM_dynamicLoading.h&quot;
+#include &quot;options.h&quot;
+
+extern &quot;C&quot;
+{
+#include &quot;ADM_vidEnc_plugin.h&quot;
+}
+
+typedef bool _showXvidConfigDialog(vidEncConfigParameters *configParameters, vidEncVideoProperties *properties, vidEncOptions *encodeOptions, xvidOptions *options);
+
+class configGuiLoader : public ADM_LibWrapper
+{
+	public:
+		_showXvidConfigDialog *showXvidConfigDialog;
+
+		configGuiLoader(const char *file);
+};
+
+#endif	// configGuiLoader_h

Added: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_xvid/encoder.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_xvid/encoder.cpp	2008-06-11 11:40:29 UTC (rev 4094)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_xvid/encoder.cpp	2008-06-13 12:18:36 UTC (rev 4095)
@@ -0,0 +1,139 @@
+/***************************************************************************
+                               xvidEncoder.cpp
+
+    begin                : Wed Jun 11 2008
+    copyright            : (C) 2008 by gruntster
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+
+#include &lt;math.h&gt;
+
+#include &quot;config.h&quot;
+#include &quot;ADM_inttype.h&quot;
+#include &quot;ADM_files.h&quot;
+#include &quot;encoder.h&quot;
+
+static xvidEncoder encoder;
+static void* encoders = { &amp;encoder };
+
+extern &quot;C&quot;
+{
+	void *encoders_getPointer(int uiType) { encoder.setUiType(uiType); return &encoders; } 
+	int xvidEncoder_isConfigurable(void) { return encoder.isConfigurable(); }
+	int xvidEncoder_configure(vidEncConfigParameters *configParameters, vidEncVideoProperties *properties) { return encoder.configure(configParameters, properties); }
+	int xvidEncoder_getOptions(vidEncOptions *encodeOptions, char *pluginOptions, int bufferSize) { return encoder.getOptions(encodeOptions, pluginOptions, bufferSize); };
+	int xvidEncoder_setOptions(vidEncOptions *encodeOptions, char *pluginOptions) { return encoder.setOptions(encodeOptions, pluginOptions); };
+	int xvidEncoder_getPassCount(void) { return encoder.getPassCount(); }
+	int xvidEncoder_getCurrentPass(void) { return encoder.getCurrentPass(); }
+	int xvidEncoder_open(vidEncVideoProperties *properties) { return encoder.open(properties); }
+	int xvidEncoder_beginPass(vidEncPassParameters *passParameters) { return encoder.beginPass(passParameters); }
+	int xvidEncoder_encodeFrame(vidEncEncodeParameters *encodeParams) { return encoder.encodeFrame(encodeParams); }
+	int xvidEncoder_finishPass(void) { return encoder.finishPass(); }
+	void xvidEncoder_close(void) { encoder.close(); }
+}
+
+xvidEncoder::xvidEncoder(void)
+{
+
+}
+
+xvidEncoder::~xvidEncoder(void)
+{
+
+}
+
+void xvidEncoder::setUiType(int uiType)
+{
+	_uiType = uiType;
+}
+
+int xvidEncoder::isConfigurable(void)
+{
+	return (_uiType == ADM_UI_GTK || _uiType == ADM_UI_QT4);
+}
+
+int xvidEncoder::configure(vidEncConfigParameters *configParameters, vidEncVideoProperties *properties)
+{
+	if (_loader == NULL)
+	{
+		char* pluginPath = ADM_getPluginPath();
+		const char* configGuiLibName;
+
+		if (_uiType == ADM_UI_GTK)
+			configGuiLibName = GTK_PLUGIN_NAME;
+		else
+			configGuiLibName = QT_PLUGIN_NAME;
+
+		char* configGuiPath = new char[strlen(pluginPath) + 1 + strlen(PLUGIN_SUBDIR) + 1 + strlen(PLUGIN_PREFIX) + strlen(configGuiLibName) + strlen(PLUGIN_SUFFIX) + 1];
+
+		strcpy(configGuiPath, pluginPath);
+		strcat(configGuiPath, PLUGIN_SUBDIR);
+		strcat(configGuiPath, &quot;/&quot;);
+		strcat(configGuiPath, PLUGIN_PREFIX);
+		strcat(configGuiPath, configGuiLibName);
+		strcat(configGuiPath, PLUGIN_SUFFIX);
+
+		_loader = new configGuiLoader(configGuiPath);
+
+		delete [] pluginPath;
+		delete [] configGuiPath;
+	}
+
+	if (_loader-&gt;isAvailable())
+		return _loader-&gt;showXvidConfigDialog(configParameters, properties, &amp;_encodeOptions, &amp;_options);
+	else
+		return 0;
+}
+
+int xvidEncoder::getOptions(vidEncOptions *encodeOptions, char *pluginOptions, int bufferSize)
+{
+
+}
+
+int xvidEncoder::setOptions(vidEncOptions *encodeOptions, char *pluginOptions)
+{
+
+}
+
+int xvidEncoder::getCurrentPass(void)
+{
+	return _currentPass;
+}
+
+int xvidEncoder::getPassCount(void)
+{
+	return _passCount;
+}
+
+int xvidEncoder::open(vidEncVideoProperties *properties)
+{
+
+}
+
+int xvidEncoder::beginPass(vidEncPassParameters *passParameters)
+{
+
+}
+
+int xvidEncoder::encodeFrame(vidEncEncodeParameters *encodeParams)
+{
+
+}
+
+int xvidEncoder::finishPass(void)
+{
+
+}
+
+void xvidEncoder::close(void)
+{
+
+}

Added: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_xvid/encoder.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_xvid/encoder.h	2008-06-11 11:40:29 UTC (rev 4094)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_xvid/encoder.h	2008-06-13 12:18:36 UTC (rev 4095)
@@ -0,0 +1,67 @@
+/***************************************************************************
+                                  encoder.h
+
+    begin                : Wed Jun 11 2008
+    copyright            : (C) 2008 by gruntster
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+
+#ifndef encoder_h
+#define encoder_h
+
+#ifdef __cplusplus
+	#include &quot;configGuiLoader.h&quot;
+
+	extern &quot;C&quot;
+	{
+	#include &quot;ADM_vidEnc_plugin.h&quot;
+	}
+
+	class xvidEncoder
+	{
+	private:
+		int _uiType;
+
+		configGuiLoader *_loader;
+		xvidOptions _options;
+		vidEncOptions _encodeOptions;
+
+		int _currentPass, _passCount;
+
+	public:
+		xvidEncoder(void);
+		~xvidEncoder(void);
+		void setUiType(int uiType);
+		int isConfigurable(void);
+		int configure(vidEncConfigParameters *configParameters, vidEncVideoProperties *properties);
+		int getOptions(vidEncOptions *encodeOptions, char *pluginOptions, int bufferSize);
+		int setOptions(vidEncOptions *encodeOptions, char *pluginOptions);
+		int getCurrentPass(void);
+		int getPassCount(void);
+		int open(vidEncVideoProperties *properties);
+		int beginPass(vidEncPassParameters *passParameters);
+		int encodeFrame(vidEncEncodeParameters *encodeParams);
+		int finishPass(void);
+		void close(void);
+	};
+#else
+	void *encoders_getPointer(int uiType);
+	int xvidEncoder_isConfigurable(void);
+	int xvidEncoder_configure(vidEncConfigParameters *configParameters, vidEncVideoProperties *properties);
+	int xvidEncoder_getOptions(vidEncOptions *encodeOptions, char *pluginOptions, int bufferSize);
+	int xvidEncoder_setOptions(vidEncOptions *encodeOptions, char *pluginOptions);
+	int xvidEncoder_getPassCount(void);
+	int xvidEncoder_getCurrentPass(void);
+	int xvidEncoder_open(vidEncVideoProperties *properties);
+	void xvidEncoder_close(void);
+	int xvidEncoder_encodeFrame(vidEncEncodeParameters *encodeParams);
+#endif	// __cplusplus
+#endif	// encoder_h

Added: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_xvid/gtk/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_xvid/gtk/CMakeLists.txt	2008-06-11 11:40:29 UTC (rev 4094)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_xvid/gtk/CMakeLists.txt	2008-06-13 12:18:36 UTC (rev 4095)
@@ -0,0 +1,27 @@
+INCLUDE(admCheckGtk)
+INCLUDE(admCheckGettext)
+INCLUDE(admPluginVideoEncoder)
+
+checkGtk()
+
+IF (GTK_FOUND AND GTHREAD_FOUND)
+	checkGettext()
+
+	IF (GETTEXT_FOUND)
+		ADD_DEFINITIONS(&quot;-DHAVE_GETTEXT&quot;)
+		INCLUDE_DIRECTORIES(${GETTEXT_INCLUDE_DIR})
+	ENDIF (GETTEXT_FOUND)
+
+	SET(ADM_vidEnc_xvid_Gtk_SRCS gtkSupport.cpp  xvidConfigDialog.cpp)
+
+	ADD_DEFINITIONS(${GTK_CFLAGS})
+	ADD_LIBRARY(${GTK_PLUGIN_NAME} SHARED ${ADM_vidEnc_xvid_Gtk_SRCS})
+	TARGET_LINK_LIBRARIES(${GTK_PLUGIN_NAME} ADM_vidEnc_xvid ${GTK_LDFLAGS} ${GTHREAD_LDFLAGS})
+	
+	IF (GETTEXT_FOUND)
+		TARGET_LINK_LIBRARIES(${GTK_PLUGIN_NAME} ${GETTEXT_LIBRARY_DIR})
+	ENDIF(GETTEXT_FOUND)
+
+	INIT_VIDEO_ENCODER_PLUGIN(ADM_vidEnc_xvid_Gtk)
+	INSTALL(TARGETS ADM_vidEnc_xvid_Gtk DESTINATION &quot;${CMAKE_INSTALL_PREFIX}/lib/ADM_plugins/videoEncoder/${PLUGIN_SUBDIR}&quot;)
+ENDIF (GTK_FOUND AND GTHREAD_FOUND)
\ No newline at end of file

Added: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_xvid/gtk/gtkSupport.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_xvid/gtk/gtkSupport.cpp	2008-06-11 11:40:29 UTC (rev 4094)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_xvid/gtk/gtkSupport.cpp	2008-06-13 12:18:36 UTC (rev 4095)
@@ -0,0 +1,26 @@
+#include &quot;gtkSupport.h&quot;
+
+GtkWidget *lookup_widget(GtkWidget *widget, const gchar *widget_name)
+{
+	GtkWidget *parent, *found_widget;
+
+	for (;;)
+	{
+		if (GTK_IS_MENU (widget))
+			parent = gtk_menu_get_attach_widget (GTK_MENU (widget));
+		else
+			parent = widget-&gt;parent;
+		if (!parent)
+			parent = (GtkWidget *)g_object_get_data (G_OBJECT (widget), &quot;GladeParentKey&quot;);
+		if (parent == NULL)
+			break;
+		widget = parent;
+	}
+
+	found_widget = (GtkWidget*) g_object_get_data (G_OBJECT (widget), widget_name);
+
+	if (!found_widget)
+		g_warning (&quot;Widget not found: %s&quot;, widget_name);
+
+	return found_widget;
+}

Added: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_xvid/gtk/gtkSupport.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_xvid/gtk/gtkSupport.h	2008-06-11 11:40:29 UTC (rev 4094)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_xvid/gtk/gtkSupport.h	2008-06-13 12:18:36 UTC (rev 4095)
@@ -0,0 +1,15 @@
+#ifndef gtkSupport_h
+#define gtkSupport_h
+
+#include &lt;gtk/gtk.h&gt;
+
+GtkWidget *lookup_widget(GtkWidget *widget, const gchar *widget_name);
+
+#define GLADE_HOOKUP_OBJECT(component,widget,name) \
+  g_object_set_data_full (G_OBJECT (component), name, \
+    gtk_widget_ref (widget), (GDestroyNotify) gtk_widget_unref)
+
+#define GLADE_HOOKUP_OBJECT_NO_REF(component,widget,name) \
+  g_object_set_data (G_OBJECT (component), name, widget)
+
+#endif	// gtkSupport_h

Added: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_xvid/gtk/xvidConfigDialog.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_xvid/gtk/xvidConfigDialog.cpp	2008-06-11 11:40:29 UTC (rev 4094)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_xvid/gtk/xvidConfigDialog.cpp	2008-06-13 12:18:36 UTC (rev 4095)
@@ -0,0 +1,1652 @@
+/***************************************************************************
+                    xvidConfigDialog.cpp  -  description
+                    ------------------------------------
+
+                          GUI for configuring Xvid
+
+    begin                : Fri Jun 13 2008
+    copyright            : (C) 2008 by mean/gruntster
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+#ifdef HAVE_GETTEXT
+#include &lt;libintl.h&gt;
+#define _(x) gettext(x)
+#else
+#define _(x) x
+#endif
+
+#include &quot;ADM_inttype.h&quot;
+#include &quot;DIA_coreToolkit.h&quot;
+#include &quot;DIA_fileSel.h&quot;
+
+#include &quot;../options.h&quot;
+
+#include &quot;gtkSupport.h&quot;
+#include &quot;xvidConfigDialog.h&quot;
+
+#define WID(x) lookup_widget(dialog, #x)
+
+//static xvid4EncParam localParam;
+static uint32_t mQ,mB,mS,mA;
+static GtkWidget *dialog=NULL;
+//static COMPRESSION_MODE mMode;
+
+static GtkWidget *create_dialog1 (void);
+static GtkWidget *create_dialog3 (void);
+
+static void xvid4otherUpload(GtkWidget *dialog);
+static void xvid4otherDownload(GtkWidget *dialog);
+static uint8_t editMatrix(uint8_t *inter, uint8_t *intra, GtkWindow *parent);
+static void updateMode( void );
+
+static int cb_mod(GtkObject * object, gpointer user_data);
+static int ch_par_asinput(GtkObject * object, gpointer user_data);
+
+#define CALL_Z(x,y)  gtk_dialog_add_action_widget (GTK_DIALOG (dialog), WID(x),XVID4_RESPONSE_##y);
+
+typedef enum 
+{
+    XVID4_RESPONSE_MODE_CHANGED,
+    XVID4_RESPONSE_EDIT_MATRIX,
+    XVID4_RESPONSE_LOAD_MATRIX,
+    XVID4_RESPONSE_SAVE_MATRIX,
+    XVID4_RESPONSE_LAST,
+}XVID4_CODE;
+
+extern &quot;C&quot; int showXvidConfigDialog(vidEncConfigParameters *configParameters, vidEncVideoProperties *properties, vidEncOptions *encodeOptions, xvidOptions *options)
+{
+	int b;
+	int ret=0;
+	int code;
+	//ADM_assert(incoming-&gt;extraSettingsLen==sizeof(localParam));
+	//memcpy(&amp;localParam,incoming-&gt;extraSettings,sizeof(localParam));
+	dialog=create_dialog1();
+
+	gtk_window_set_modal(GTK_WINDOW(dialog), 1);
+	gtk_window_set_transient_for(GTK_WINDOW(dialog), GTK_WINDOW(configParameters-&gt;parent));
+
+#define HIST_SET(x) gtk_option_menu_set_history(GTK_OPTION_MENU(WID(optionmenuType)), x)
+#define VAL_SET(x) gtk_write_entry(WID(entryEntry), x)
+
+/*	mQ=incoming-&gt;qz;
+	mB=incoming-&gt;bitrate; // in kbits
+	mS=incoming-&gt;finalsize;	
+	mA=incoming-&gt;avg_bitrate;
+	mMode=incoming-&gt;mode;
+	updateMode();
+
+	xvid4otherUpload(dialog); */
+	gtk_signal_connect(GTK_OBJECT(WID(optionmenuType)), &quot;changed&quot;,
+		GTK_SIGNAL_FUNC(cb_mod),                   (void *) 0);
+
+	gtk_signal_connect(GTK_OBJECT(WID(checkbutton_par_asinput)), &quot;clicked&quot;,
+		GTK_SIGNAL_FUNC(ch_par_asinput),                   (void *) 0);
+
+	CALL_Z(buttonCreateCustomMatrix,EDIT_MATRIX);
+	CALL_Z(buttonLoadMatrix,LOAD_MATRIX);
+
+_again:
+	code=gtk_dialog_run(GTK_DIALOG(dialog));
+/*	if(code==XVID4_RESPONSE_EDIT_MATRIX)
+	{
+		uint8_t intra[64],inter[64];
+		memcpy(intra,localParam.intraMatrix,64);
+		memcpy(inter,localParam.interMatrix,64);
+		if(editMatrix(intra,inter))
+		{
+			memcpy(localParam.intraMatrix,intra,64);
+			memcpy(localParam.interMatrix,inter,64);
+		}
+		goto _again;
+	}
+	if(code==XVID4_RESPONSE_LOAD_MATRIX)
+	{
+		uint8_t intra[64],inter[64];
+		char name[1024];
+		FILE *file=NULL;
+
+		if (!FileSel_SelectRead(_(&quot;Select Xvid matrix file to load&quot;), name, 1023, NULL))
+			goto _again;
+
+		printf(&quot;Loading Matrix\n&quot;);
+		file=fopen(name,&quot;rb&quot;);
+		if(!file)
+		{
+_erLoad:
+			if(file) fclose(file);
+			GUI_Error_HIG(_(&quot;Error Loading&quot;),_(&quot;Error loadind the custom matrix file.&quot;));
+			goto _again;
+		}
+		// Read it
+		if(64!=fread(intra,1,64,file))
+		{
+			printf(&quot;Error reading intra\n&quot;);
+			goto _erLoad;
+		}
+		if(64!=fread(inter,1,64,file))
+		{
+			printf(&quot;Error reading inter\n&quot;);
+			goto _erLoad;
+		}
+		// Ok
+		fclose(file);
+		memcpy(localParam.intraMatrix,intra,64);
+		memcpy(localParam.interMatrix,inter,64);
+		GUI_Info_HIG(ADM_LOG_INFO,_(&quot;Matrix Loaded&quot;),_(&quot;The custom matrix file has been successfully loaded.&quot;));
+		goto _again;
+	}
+*/
+	if(code==GTK_RESPONSE_OK)
+	{
+/*		int r,value=0;
+		ret=1;
+		r=getRangeInMenu(WID(optionmenuType));
+		xvid4otherDownload(dialog);
+		memcpy(incoming-&gt;extraSettings,&amp;localParam,sizeof(localParam));
+
+		switch(r)
+		{
+			case 0:
+				incoming-&gt;mode = COMPRESS_CBR;				      
+				value = (uint32_t) gtk_read_entry(WID(entryEntry));
+				incoming-&gt;bitrate = value;
+				ret = 1;
+				gtk_label_set_text(GTK_LABEL(WID(label11)),&quot;Bitrate (kbps):&quot;);
+				break;
+			case 1:
+				incoming-&gt;mode = COMPRESS_CQ;		      			
+				value = (uint32_t) gtk_spin_button_get_value_as_int(
+					GTK_SPIN_BUTTON(WID(spinbuttonQuant)));
+				if (value &gt;= 2 &amp;&amp; value &lt;= 32)
+				{
+					incoming-&gt;qz = value;
+				}
+				break;
+
+			case 2:
+				incoming-&gt;mode = COMPRESS_2PASS;		       				
+				value = (uint32_t) gtk_read_entry(WID(entryEntry));
+				if((value&gt;0)&amp;&amp;(value&lt;4000))
+				{
+					incoming-&gt;finalsize=value;
+
+				}
+				gtk_label_set_text(GTK_LABEL(WID(label11)),_(&quot;Size (MBytes):&quot;));
+				break;
+			case 3:
+				incoming-&gt;mode = COMPRESS_2PASS_BITRATE;	
+				value = (uint32_t) gtk_read_entry(WID(entryEntry));
+				incoming-&gt;avg_bitrate=value;
+				gtk_label_set_text(GTK_LABEL(WID(label11)),_(&quot;Average bitrate (kb/s):&quot;));
+				break;
+
+			case 4:
+				incoming-&gt;mode=COMPRESS_SAME;
+				break;
+			default:
+				ADM_assert(0);
+		} */
+	}
+
+	gtk_widget_destroy(dialog);
+
+	return ret;
+}
+
+// Read the localParam struct and set the ui fields
+// accordingly
+#define SPIN_GET(x,y) {localParam.y= gtk_spin_button_get_value_as_int(GTK_SPIN_BUTTON(WID(x))) ;\
+	printf(#x&quot;:%d\n&quot;,localParam.y);}
+
+#define SPIN_SET(x,y)  {gtk_spin_button_set_value(GTK_SPIN_BUTTON(WID(x)),(gfloat)localParam.y) ; \
+	printf(#x&quot;:%d\n&quot;,localParam.y);}
+
+#define MENU_SET(x,y) { gtk_option_menu_set_history (GTK_OPTION_MENU(WID(x)),localParam.y);}
+#define MENU_GET(x,y) { localParam.y	= getRangeInMenu(WID(x));}
+#define TOGGLE_SET(x,y) {gtk_toggle_button_set_active(GTK_TOGGLE_BUTTON(WID(x)),localParam.y);}
+#define TOGGLE_GET(x,y) {localParam.y=gtk_toggle_button_get_active(GTK_TOGGLE_BUTTON(WID(x)));\
+	printf(#y&quot;:%d\n&quot;,localParam.y);}
+
+#define ENTRY_SET(x,y) {gtk_write_entry(WID(x),(int)localParam.y);}
+#define ENTRY_GET(x,y) {localParam.y=gtk_read_entry(WID(x));\
+	printf(#y&quot;:%d\n&quot;,localParam.y);}
+
+#define CHECK_GET(x,y) {localParam.y=gtk_toggle_button_get_active( GTK_TOGGLE_BUTTON(WID(x)));}
+#define CHECK_SET(x,y) {gtk_toggle_button_set_active( GTK_TOGGLE_BUTTON(WID(x)),localParam.y);}
+
+void xvid4otherUpload(GtkWidget *dialog)
+{
+/*	MENU_SET(optionmenuMS,guiLevel);
+	MENU_SET(optionmenuVHQ,vhqmode);
+	if(localParam.useCustomIntra || localParam.useCustomInter)
+	{
+		RADIO_SET(radiobuttonCustomMatrix,		1);
+	}else
+		if(localParam.mpegQuantizer)
+			RADIO_SET(radiobuttonMpeg,		1);
+		else
+			RADIO_SET(radiobuttonH263,		1);		
+	CHECK_SET(checkbuttonInterlaced,	interlaced);
+	CHECK_SET(checkbutton4MV,		inter4mv);
+	CHECK_SET(checkbuttonTrellis,		trellis);
+	CHECK_SET(checkbuttonCartoon,		cartoon);
+	CHECK_SET(checkbuttonGreyScale,		greyscale);
+	CHECK_SET(checkbuttonChroma,		chroma_opt);
+	CHECK_SET(checkbuttonChromaMotion,	chroma_me);
+	CHECK_SET(checkbuttonGMC,		gmc);
+	CHECK_SET(checkbuttonBVHQ,		bvhq);
+	CHECK_SET(checkbutton_par_asinput,	par_as_input);
+	CHECK_SET(checkbuttonQPel,		qpel);
+	CHECK_SET(checkbuttonHQAC,		hqac);
+
+	CHECK_SET(checkbuttonTurbo,		turbo);
+	CHECK_SET(checkbuttonPacked,		packed);
+
+	SPIN_SET(spinbuttonIMaxPeriod,  max_key_interval);
+	ENTRY_SET(entryIInterv,		min_key_interval);
+	SPIN_SET(spinbuttonBFrame,	bframes);
+	ch_par_asinput(NULL, NULL);
+
+	SPIN_SET(spinbuttonIMax,	qmax[0]);
+	SPIN_SET(spinbuttonPMax,	qmax[1]);
+	SPIN_SET(spinbuttonBMax,	qmax[2]);
+
+	SPIN_SET(spinbuttonIMin,	qmin[0]);
+	SPIN_SET(spinbuttonPMin,	qmin[1]);
+	SPIN_SET(spinbuttonBMin,	qmin[2]);
+
+
+	ENTRY_SET(entryIBoost		,	keyframe_boost		);
+
+	ENTRY_SET(entryHiPass		,	curve_compression_high	);
+	ENTRY_SET(entryLowPass		,	curve_compression_low	);
+	ENTRY_SET(entryOvrControl,		overflow_control_strength	);
+
+	ENTRY_SET(entryMaxOvrImp	,	max_overflow_improvement	);
+	ENTRY_SET(entryMaxOvrDeg	,	max_overflow_degradation	);
+
+	ENTRY_SET(entryIreduction	,	kfreduction			);
+	ENTRY_SET(entryIInterv	,		kfthreshold			);
+	//TOGGLE_SET(toggleHPEL,			halfpel);
+*/
+}
+
+// Read the ui fields and set localParam
+// accordingly
+void xvid4otherDownload(GtkWidget *dialog)
+{
+/*	MENU_GET(optionmenuMS,guiLevel);
+	MENU_GET(optionmenuVHQ,vhqmode);
+
+	localParam.mpegQuantizer=RADIO_GET(radiobuttonMpeg);
+	if(RADIO_GET(radiobuttonCustomMatrix))
+	{
+		localParam.useCustomIntra=1;
+		localParam.useCustomInter=1;
+	}else
+	{
+		localParam.useCustomIntra=0;
+		localParam.useCustomInter=0;
+	}
+	CHECK_GET(checkbuttonInterlaced,	interlaced);
+	CHECK_GET(checkbutton4MV,		inter4mv);
+	CHECK_GET(checkbuttonTrellis,		trellis);
+	CHECK_GET(checkbuttonCartoon,		cartoon);
+	CHECK_GET(checkbuttonGreyScale,		greyscale);
+	CHECK_GET(checkbuttonChroma,		chroma_opt);
+	CHECK_GET(checkbuttonChromaMotion,	chroma_me);
+	CHECK_GET(checkbuttonGMC,		gmc);
+	CHECK_GET(checkbuttonBVHQ,		bvhq);
+	CHECK_GET(checkbutton_par_asinput,	par_as_input);
+	CHECK_GET(checkbuttonQPel,		qpel);
+	CHECK_GET(checkbuttonHQAC,		hqac);
+	CHECK_GET(checkbuttonTurbo,		turbo);
+	CHECK_GET(checkbuttonPacked,		packed);
+
+
+	SPIN_GET(spinbuttonIMaxPeriod,  max_key_interval);	
+	ENTRY_GET(entryIInterv,			kfthreshold);
+	SPIN_GET(spinbuttonBFrame,		bframes);
+
+	SPIN_GET(spinbutton_par_width,	par_width);
+	SPIN_GET(spinbutton_par_height,	par_height);
+
+
+	ENTRY_GET(entryIBoost		,	keyframe_boost		);
+
+	ENTRY_GET(entryHiPass		,	curve_compression_high	);
+	ENTRY_GET(entryLowPass		,	curve_compression_low	);
+	ENTRY_GET(entryOvrControl,		overflow_control_strength	);
+
+	ENTRY_GET(entryMaxOvrImp	,	max_overflow_improvement	);
+	ENTRY_GET(entryMaxOvrDeg	,	max_overflow_degradation	);
+
+	ENTRY_GET(entryIreduction	,	kfreduction			);
+	ENTRY_GET(entryIInterv	,	kfthreshold			);
+	//TOGGLE_SET(toggleHPEL,			halfpel);
+	SPIN_GET(spinbuttonIMax,	qmax[0]);
+	SPIN_GET(spinbuttonPMax,	qmax[1]);
+	SPIN_GET(spinbuttonBMax,	qmax[2]);
+
+	SPIN_GET(spinbuttonIMin,	qmin[0]);
+	SPIN_GET(spinbuttonPMin,	qmin[1]);
+	SPIN_GET(spinbuttonBMin,	qmin[2]);
+*/
+
+}
+
+void updateMode( void )
+{
+/*	uint32_t b;
+	// set the right select button
+	switch (mMode)
+	{
+	case COMPRESS_CBR:
+		HIST_SET(0);			
+		b=mB;
+		VAL_SET(b);
+		gtk_widget_set_sensitive(WID(spinbuttonQuant),0);
+		gtk_widget_set_sensitive(WID(entryEntry),1);
+		gtk_label_set_text(GTK_LABEL(WID(label11)),_(&quot;Target bitrate (kb/s):&quot;));
+		break;
+
+	case COMPRESS_2PASS:
+		HIST_SET(2);
+		VAL_SET(mS);
+		gtk_widget_set_sensitive(WID(spinbuttonQuant),0);
+		gtk_widget_set_sensitive(WID(entryEntry),1);
+		gtk_label_set_text(GTK_LABEL(WID(label11)),_(&quot;Target video size (MB):&quot;));
+		break;
+	case COMPRESS_2PASS_BITRATE:
+		HIST_SET(3);
+		VAL_SET(mA);
+		gtk_widget_set_sensitive(WID(spinbuttonQuant),0);
+		gtk_widget_set_sensitive(WID(entryEntry),1);
+		gtk_label_set_text(GTK_LABEL(WID(label11)),_(&quot;Average bitrate (kb/s):&quot;));
+		break;
+
+	case COMPRESS_CQ:
+		HIST_SET(1);
+		gtk_widget_set_sensitive(WID(entryEntry),0);
+		gtk_widget_set_sensitive(WID(spinbuttonQuant),1);
+		gtk_spin_button_set_value(GTK_SPIN_BUTTON(WID(spinbuttonQuant)),(gfloat)mQ);
+		break;
+	case COMPRESS_SAME:
+		HIST_SET(4);
+		gtk_widget_set_sensitive(WID(entryEntry),0);
+		gtk_widget_set_sensitive(WID(spinbuttonQuant),0);
+
+		break;
+
+	} */
+}
+
+int cb_mod(GtkObject * object, gpointer user_data)
+{
+/*	int r;
+	r=getRangeInMenu(WID(optionmenuType));
+	switch(r)
+	{
+	case 0: mMode=COMPRESS_CBR ;break;
+	case 1: mMode=COMPRESS_CQ ;break;
+	case 2: mMode=COMPRESS_2PASS ;break;
+	case 3: mMode=COMPRESS_2PASS_BITRATE ;break;
+	case 4: mMode=COMPRESS_SAME;break;
+
+	}
+	updateMode();
+	printf(&quot;Changed!!!\n&quot;);
+	return 0;
+*/
+}
+
+int ch_par_asinput(GtkObject * object, gpointer user_data)
+{
+/*	int on = gtk_toggle_button_get_active(GTK_TOGGLE_BUTTON(WID(checkbutton_par_asinput)));
+	gtk_widget_set_sensitive(WID(spinbutton_par_width), on^1);
+	gtk_widget_set_sensitive(WID(spinbutton_par_height), on^1);
+
+	if (on) {
+		SPIN_GET(spinbutton_par_width,	par_width);
+		SPIN_GET(spinbutton_par_height,	par_height);
+		gtk_spin_button_set_value(GTK_SPIN_BUTTON(WID(spinbutton_par_width)), video_body-&gt;getPARWidth());
+		gtk_spin_button_set_value(GTK_SPIN_BUTTON(WID(spinbutton_par_height)), video_body-&gt;getPARHeight());
+	}else{
+		SPIN_SET(spinbutton_par_width,	par_width);
+		SPIN_SET(spinbutton_par_height,	par_height);
+	}
+
+	return 0; */
+}
+
+uint8_t editMatrix(uint8_t *intra, uint8_t *inter, GtkWindow *parent)
+{
+	GtkWidget *dialog=NULL;
+	GtkWidget *spinbutton1;
+	GtkObject *spinbutton1_adj;
+	GtkWidget *intraCell[64],*interCell[64];
+	uint8_t ret=0;
+	int code;
+	int col, row;
+
+	dialog=create_dialog3();
+	gtk_window_set_modal(GTK_WINDOW(dialog), 1);
+	gtk_window_set_transient_for(GTK_WINDOW(dialog), parent);
+
+	for(int i=0;i&lt;64;i++)
+	{  //Intra
+		col=i%8;
+		row=i&gt;&gt;3;
+		spinbutton1_adj = gtk_adjustment_new (intra[i], 8, 255, 1, 10, 10);
+		intraCell[i]=spinbutton1 = gtk_spin_button_new (GTK_ADJUSTMENT (spinbutton1_adj), 1, 0);
+		//     gtk_widget_show (spinbutton1);
+		gtk_table_attach (GTK_TABLE (WID(tableIntra)), spinbutton1, col, col+1, row, row+1,
+			(GtkAttachOptions) (GTK_EXPAND | GTK_FILL),
+			(GtkAttachOptions) (0), 0, 0);
+
+
+	}
+
+	for(int i=0;i&lt;64;i++)
+	{  //Inter
+		col=i%8;
+		row=i&gt;&gt;3;
+		spinbutton1_adj = gtk_adjustment_new (inter[i], 1, 255, 1, 10, 10);
+		interCell[i]=spinbutton1 = gtk_spin_button_new (GTK_ADJUSTMENT (spinbutton1_adj), 1, 0);
+		//    gtk_widget_show (spinbutton1);
+		gtk_table_attach (GTK_TABLE (WID(tableInter)), spinbutton1, col, col+1, row, row+1,
+			(GtkAttachOptions) (GTK_EXPAND | GTK_FILL),
+			(GtkAttachOptions) (0), 0, 0);
+	}
+
+	for(int i=0;i&lt;64;i++)
+	{
+		gtk_widget_show (intraCell[i]);
+		gtk_widget_show (interCell[i]);
+	}
+	//
+
+	CALL_Z(button12,SAVE_MATRIX)
+_loop:
+	code=gtk_dialog_run(GTK_DIALOG(dialog));
+
+	if(code==XVID4_RESPONSE_SAVE_MATRIX)
+	{
+		printf(&quot;Save\n&quot;);
+		char name[1024];
+		FILE *fd;
+
+		if (!FileSel_SelectWrite(_(&quot;Select Custom Matrix File to write&quot;), name, 1023, NULL))
+			goto _loop;
+
+		fd=fopen(name,&quot;wb&quot;);
+		if(!fd)
+		{
+			GUI_Error_HIG(_(&quot;Error Writing&quot;),_(&quot;Error writing the custom matrix file.&quot;));
+			goto _loop;
+		}
+
+		for(int i=0;i&lt;64;i++)
+		{
+			inter[i]=gtk_spin_button_get_value_as_int(GTK_SPIN_BUTTON(interCell[i]));
+			intra[i]=gtk_spin_button_get_value_as_int(GTK_SPIN_BUTTON(intraCell[i]));
+		}
+
+		fwrite(intra,1,64,fd);
+		fwrite(inter,1,64,fd);
+		fclose(fd);
+		goto _loop;
+	}
+
+	if(code==GTK_RESPONSE_OK)
+	{
+		printf(&quot;Accept\n&quot;);
+		ret=1;
+		for(int i=0;i&lt;64;i++)
+		{
+			intra[i]=gtk_spin_button_get_value_as_int(GTK_SPIN_BUTTON(intraCell[i]));
+			inter[i]=gtk_spin_button_get_value_as_int(GTK_SPIN_BUTTON(interCell[i]));
+		}
+	}
+	else
+		printf(&quot;refused\n&quot;);
+
+	gtk_widget_destroy(dialog);
+
+	return ret;
+}
+
+GtkWidget*
+create_dialog1 (void)
+{
+  GtkWidget *dialog1;
+  GtkWidget *dialog_vbox1;
+  GtkWidget *notebook1;
+  GtkWidget *vbox2;
+  GtkWidget *frame1;
+  GtkWidget *vbox3;
+  GtkWidget *hbox19;
+  GtkWidget *vbox21;
+  GtkWidget *label10;
+  GtkWidget *label11;
+  GtkWidget *label12;
+  GtkWidget *vbox22;
+  GtkWidget *optionmenuType;
+  GtkWidget *menu1;
+  GtkWidget *one_pass_cbr1;
+  GtkWidget *one_pass_quantizer1;
+  GtkWidget *two_pass1;
+  GtkWidget *two_pass__average_bitrate1;
+  GtkWidget *same_qz_as_input1;
+  GtkWidget *entryEntry;
+  GtkObject *spinbuttonQuant_adj;
+  GtkWidget *spinbuttonQuant;
+  GtkWidget *label9;
+  GtkWidget *hbox7;
+  GtkWidget *vbox4;
+  GtkWidget *checkbuttonInterlaced;
+  GtkWidget *checkbuttonGreyScale;
+  GtkWidget *vbox5;
+  GtkWidget *checkbuttonCartoon;
+  GtkWidget *checkbuttonChroma;
+  GtkWidget *vbox23;
+  GtkWidget *checkbuttonTurbo;
+  GtkWidget *checkbuttonPacked;
+  GtkWidget *labelMain;
+  GtkWidget *vbox6;
+  GtkWidget *hbox8;
+  GtkWidget *vbox8;
+  GtkWidget *labelMotionSearchPrecision;
+  GtkWidget *labelVHQMode;
+  GtkWidget *vbox7;
+  GtkWidget *optionmenuMS;
+  GtkWidget *menu2;
+  GtkWidget *_0___none1;
+  GtkWidget *_1___very_low1;
+  GtkWidget *_2___low2;
+  GtkWidget *_3___medium1;
+  GtkWidget *_4___high1;
+  GtkWidget *_5___very_high1;
+  GtkWidget *_6___ultra_high1;
+  GtkWidget *optionmenuVHQ;
+  GtkWidget *menu3;
+  GtkWidget *_0___off1;
+  GtkWidget *_1___mode_decision1;
+  GtkWidget *_2___limited_search1;
+  GtkWidget *_3___medium_search1;
+  GtkWidget *_4___wide_search1;
+  GtkWidget *hbox10;
+  GtkWidget *checkbuttonChromaMotion;
+  GtkWidget *checkbutton4MV;
+  GtkWidget *checkbuttonHQAC;
+  GtkWidget *hbox9;
+  GtkWidget *labelIFrameIntervalMin;
+  GtkObject *spinbuttonIMinPeriod_adj;
+  GtkWidget *spinbuttonIMinPeriod;
+  GtkWidget *labelIFrameIntervalMax;
+  GtkObject *spinbuttonIMaxPeriod_adj;
+  GtkWidget *spinbuttonIMaxPeriod;
+  GtkWidget *frameAdvancedSimpleProfile;
+  GtkWidget *vbox9;
+  GtkWidget *hbox11;
+  GtkWidget *labelNumberOfBFrames;
+  GtkObject *spinbuttonBFrame_adj;
+  GtkWidget *spinbuttonBFrame;
+  GtkWidget *hbox12;
+  GtkWidget *checkbuttonQPel;
+  GtkWidget *checkbuttonGMC;
+  GtkWidget *checkbuttonBVHQ;
+  GtkWidget *labelAdvancedSimpleProfile;
+  GtkWidget *labelMotionEstimation;
+  GtkWidget *vbox10;
+  GtkWidget *hbox13;
+  GtkWidget *labelQuantizationType;
+  GtkWidget *radiobuttonH263;
+  GSList *radiobuttonH263_group = NULL;
+  GtkWidget *radiobuttonMpeg;
+  GtkWidget *radiobuttonCustomMatrix;
+  GtkWidget *hbox20;
+  GtkWidget *labelLoadCustomMatrix;
+  GtkWidget *buttonLoadMatrix;
+  GtkWidget *alignment6;
+  GtkWidget *hbox21;
+  GtkWidget *image1;
+  GtkWidget *label13;
+  GtkWidget *vseparator1;
+  GtkWidget *buttonCreateCustomMatrix;
+  GtkWidget *frameQuantizationRestrictions;
+  GtkWidget *hbox14;
+  GtkWidget *vbox11;
+  GtkWidget *labelIFrameQuantizerMin;
+  GtkWidget *labelPFrameQuantizerMin;
+  GtkWidget *labelBFrameQuantizaterMin;
+  GtkWidget *vbox12;
+  GtkObject *spinbuttonIMin_adj;
+  GtkWidget *spinbuttonIMin;
+  GtkObject *spinbuttonPMin_adj;
+  GtkWidget *spinbuttonPMin;
+  GtkObject *spinbuttonBMin_adj;
+  GtkWidget *spinbuttonBMin;
+  GtkWidget *vbox13;
+  GtkWidget *labelIFrameQuantizerMax;
+  GtkWidget *labelPFrameQuantizerMax;
+  GtkWidget *labelBFrameQuantizerMax;
+  GtkWidget *vbox14;
+  GtkObject *spinbuttonIMax_adj;
+  GtkWidget *spinbuttonIMax;
+  GtkObject *spinbuttonPMax_adj;
+  GtkWidget *spinbuttonPMax;
+  GtkObject *spinbuttonBMax_adj;
+  GtkWidget *spinbuttonBMax;
+  GtkWidget *labelQuantizerRestrictions;
+  GtkWidget *checkbuttonTrellis;
+  GtkWidget *labelQuantization;
+  GtkWidget *vbox15;
+  GtkWidget *frameTwoPassTuning;
+  GtkWidget *vbox16;
+  GtkWidget *hbox;
+  GtkWidget *vbox17;
+  GtkWidget *labelIFrameBoost;
+  GtkWidget *labelIFrameCloserThan;
+  GtkWidget *labelAreReducedBy;
+  GtkWidget *labelMaxOverflowImprovement;
+  GtkWidget *labelMaxOverflowDegradation;
+  GtkWidget *vbox18;
+  GtkWidget *entryIBoost;
+  GtkWidget *entryIInterv;
+  GtkWidget *entryIreduction;
+  GtkWidget *entryMaxOvrImp;
+  GtkWidget *entryMaxOvrDeg;
+  GtkWidget *labelTwoPassTuning;
+  GtkWidget *frameCurveCompression;
+  GtkWidget *hbox18;
+  GtkWidget *vbox19;
+  GtkWidget *labelHighBitrateScenes;
+  GtkWidget *labelLowBitrateScenes;
+  GtkWidget *labelOverflowControlStrength;
+  GtkWidget *vbox20;
+  GtkWidget *entryHiPass;
+  GtkWidget *entryLowPass;
+  GtkWidget *entryOvrControl;
+  GtkWidget *labelCurveCompression;
+  GtkWidget *labelSecondPass;
+  GtkWidget *dialog_action_area1;
+  GtkWidget *cancelbutton1;
+  GtkWidget *okbutton1;
+  GtkTooltips *tooltips;
+
+  GtkWidget *frame_par1;
+  GtkWidget *hbox_par1;
+  GtkWidget *label_par1;
+  GtkWidget *label_par2;
+  GtkWidget *checkbutton_par_asinput;
+  GtkObject *spinbutton_par_width_adj;
+  GtkWidget *spinbutton_par_width;
+  GtkObject *spinbutton_par_height_adj;
+  GtkWidget *spinbutton_par_height;
+
+
+  tooltips = gtk_tooltips_new ();
+
+  dialog1 = gtk_dialog_new ();
+  gtk_container_set_border_width (GTK_CONTAINER (dialog1), 2);
+  gtk_window_set_title (GTK_WINDOW (dialog1), _(&quot;XviD encoding options&quot;));
+  gtk_window_set_type_hint (GTK_WINDOW (dialog1), GDK_WINDOW_TYPE_HINT_DIALOG);
+
+  dialog_vbox1 = GTK_DIALOG (dialog1)-&gt;vbox;
+  gtk_widget_show (dialog_vbox1);
+
+  notebook1 = gtk_notebook_new ();
+  gtk_widget_show (notebook1);
+  gtk_box_pack_start (GTK_BOX (dialog_vbox1), notebook1, TRUE, TRUE, 0);
+
+  vbox2 = gtk_vbox_new (FALSE, 5);
+  gtk_widget_show (vbox2);
+  gtk_container_add (GTK_CONTAINER (notebook1), vbox2);
+  gtk_notebook_set_tab_label_packing (GTK_NOTEBOOK (notebook1), vbox2,
+                                      FALSE, FALSE, GTK_PACK_START);
+  gtk_container_set_border_width (GTK_CONTAINER (vbox2), 5);
+
+  frame1 = gtk_frame_new (NULL);
+  gtk_widget_show (frame1);
+  gtk_box_pack_start (GTK_BOX (vbox2), frame1, FALSE, FALSE, 0);
+
+  vbox3 = gtk_vbox_new (FALSE, 5);
+  gtk_widget_show (vbox3);
+  gtk_container_add (GTK_CONTAINER (frame1), vbox3);
+  gtk_container_set_border_width (GTK_CONTAINER (vbox3), 5);
+
+  hbox19 = gtk_hbox_new (FALSE, 10);
+  gtk_widget_show (hbox19);
+  gtk_box_pack_start (GTK_BOX (vbox3), hbox19, TRUE, TRUE, 0);
+
+  vbox21 = gtk_vbox_new (FALSE, 5);
+  gtk_widget_show (vbox21);
+  gtk_box_pack_start (GTK_BOX (hbox19), vbox21, FALSE, FALSE, 0);
+
+  label10 = gtk_label_new (_(&quot;Encoding type:&quot;));
+  gtk_widget_show (label10);
+  gtk_box_pack_start (GTK_BOX (vbox21), label10, TRUE, TRUE, 0);
+  gtk_misc_set_alignment (GTK_MISC (label10), 0, 0.5);
+
+  label11 = gtk_label_new (_(&quot;Bitrate (kb/s):&quot;));
+  gtk_widget_show (label11);
+  gtk_box_pack_start (GTK_BOX (vbox21), label11, TRUE, TRUE, 0);
+  gtk_misc_set_alignment (GTK_MISC (label11), 0, 0.5);
+
+  label12 = gtk_label_new (_(&quot;Quantizer:&quot;));
+  gtk_widget_show (label12);
+  gtk_box_pack_start (GTK_BOX (vbox21), label12, TRUE, TRUE, 0);
+  gtk_misc_set_alignment (GTK_MISC (label12), 0, 0.5);
+
+  vbox22 = gtk_vbox_new (FALSE, 5);
+  gtk_widget_show (vbox22);
+  gtk_box_pack_start (GTK_BOX (hbox19), vbox22, FALSE, FALSE, 0);
+
+  optionmenuType = gtk_option_menu_new ();
+  gtk_widget_show (optionmenuType);
+  gtk_box_pack_start (GTK_BOX (vbox22), optionmenuType, FALSE, FALSE, 0);
+  gtk_tooltips_set_tip (tooltips, optionmenuType, _(&quot;Select 1-pass or 2-pass encoding&quot;), NULL);
+
+  menu1 = gtk_menu_new ();
+
+  one_pass_cbr1 = gtk_menu_item_new_with_mnemonic (_(&quot;Single Pass - Bitrate&quot;));
+  gtk_widget_show (one_pass_cbr1);
+  gtk_container_add (GTK_CONTAINER (menu1), one_pass_cbr1);
+
+  one_pass_quantizer1 = gtk_menu_item_new_with_mnemonic (_(&quot;Single Pass - Quantizer&quot;));
+  gtk_widget_show (one_pass_quantizer1);
+  gtk_container_add (GTK_CONTAINER (menu1), one_pass_quantizer1);
+
+  two_pass1 = gtk_menu_item_new_with_mnemonic (_(&quot;Two Pass - Video Size&quot;));
+  gtk_widget_show (two_pass1);
+  gtk_container_add (GTK_CONTAINER (menu1), two_pass1);
+
+  two_pass__average_bitrate1 = gtk_menu_item_new_with_mnemonic (_(&quot;Two Pass - Average Bitrate&quot;));
+  gtk_widget_show (two_pass__average_bitrate1);
+  gtk_container_add (GTK_CONTAINER (menu1), two_pass__average_bitrate1);
+
+  same_qz_as_input1 = gtk_menu_item_new_with_mnemonic (_(&quot;Same Quantizer as Input&quot;));
+  gtk_widget_show (same_qz_as_input1);
+  gtk_container_add (GTK_CONTAINER (menu1), same_qz_as_input1);
+
+  gtk_option_menu_set_menu (GTK_OPTION_MENU (optionmenuType), menu1);
+
+  entryEntry = gtk_entry_new ();
+  gtk_widget_show (entryEntry);
+  gtk_box_pack_start (GTK_BOX (vbox22), entryEntry, FALSE, FALSE, 0);
+  gtk_tooltips_set_tip (tooltips, entryEntry, _(&quot;Target video bitrate&quot;), NULL);
+  gtk_entry_set_width_chars (GTK_ENTRY (entryEntry), 10);
+
+  spinbuttonQuant_adj = gtk_adjustment_new (4, 1, 31, 0.1, 10, 10);
+  spinbuttonQuant = gtk_spin_button_new (GTK_ADJUSTMENT (spinbuttonQuant_adj), 1, 1);
+  gtk_widget_show (spinbuttonQuant);
+  gtk_box_pack_start (GTK_BOX (vbox22), spinbuttonQuant, FALSE, FALSE, 0);
+  gtk_tooltips_set_tip (tooltips, spinbuttonQuant, _(&quot;Constant quantizer - each frame will get the same compression&quot;), NULL);
+
+  label9 = gtk_label_new (_(&quot;Variable bitrate mode&quot;));
+  gtk_widget_show (label9);
+  gtk_frame_set_label_widget (GTK_FRAME (frame1), label9);
+
+  hbox7 = gtk_hbox_new (FALSE, 10);
+  gtk_widget_show (hbox7);
+  gtk_box_pack_start (GTK_BOX (vbox2), hbox7, FALSE, FALSE, 0);
+
+  vbox4 = gtk_vbox_new (FALSE, 0);
+  gtk_widget_show (vbox4);
+  gtk_box_pack_start (GTK_BOX (hbox7), vbox4, FALSE, FALSE, 0);
+
+  checkbuttonInterlaced = gtk_check_button_new_with_mnemonic (_(&quot;_Interlaced&quot;));
+  gtk_widget_show (checkbuttonInterlaced);
+  gtk_box_pack_start (GTK_BOX (vbox4), checkbuttonInterlaced, FALSE, FALSE, 0);
+  gtk_tooltips_set_tip (tooltips, checkbuttonInterlaced, _(&quot;Enables interlaced frame support - use only if your source contains interlacing artifacts (i.e. fields instead of progressive frames)&quot;), NULL);
+
+  checkbuttonGreyScale = gtk_check_button_new_with_mnemonic (_(&quot;_Greyscale&quot;));
+  gtk_widget_show (checkbuttonGreyScale);
+  gtk_box_pack_start (GTK_BOX (vbox4), checkbuttonGreyScale, FALSE, FALSE, 0);
+  gtk_tooltips_set_tip (tooltips, checkbuttonGreyScale, _(&quot;Encode in black &amp; white&quot;), NULL);
+
+  vbox5 = gtk_vbox_new (FALSE, 0);
+  gtk_widget_show (vbox5);
+  gtk_box_pack_start (GTK_BOX (hbox7), vbox5, FALSE, FALSE, 0);
+
+  checkbuttonCartoon = gtk_check_button_new_with_mnemonic (_(&quot;Ca_rtoon mode&quot;));
+  gtk_widget_show (checkbuttonCartoon);
+  gtk_box_pack_start (GTK_BOX (vbox5), checkbuttonCartoon, FALSE, FALSE, 0);
+  gtk_tooltips_set_tip (tooltips, checkbuttonCartoon, _(&quot;Enables special motion estimation features for cartoons/anime&quot;), NULL);
+
+  checkbuttonChroma = gtk_check_button_new_with_mnemonic (_(&quot;C_hroma optimizer&quot;));
+  gtk_widget_show (checkbuttonChroma);
+  gtk_box_pack_start (GTK_BOX (vbox5), checkbuttonChroma, FALSE, FALSE, 0);
+  gtk_tooltips_set_tip (tooltips, checkbuttonChroma, _(&quot;Enables a chroma optimizer prefilter&quot;), NULL);
+
+  vbox23 = gtk_vbox_new (FALSE, 0);
+  gtk_widget_show (vbox23);
+  gtk_box_pack_start (GTK_BOX (hbox7), vbox23, TRUE, TRUE, 0);
+
+  checkbuttonTurbo = gtk_check_button_new_with_mnemonic (_(&quot;Turbo Mode&quot;));
+  gtk_widget_show (checkbuttonTurbo);
+  gtk_box_pack_start (GTK_BOX (vbox23), checkbuttonTurbo, FALSE, FALSE, 0);
+  gtk_tooltips_set_tip (tooltips, checkbuttonTurbo, _(&quot;Enables fast 1st pass encoding&quot;), NULL);
+
+  checkbuttonPacked = gtk_check_button_new_with_mnemonic (_(&quot;Packed bitstream&quot;));
+  gtk_widget_show (checkbuttonPacked);
+  gtk_box_pack_start (GTK_BOX (vbox23), checkbuttonPacked, FALSE, FALSE, 0);
+  gtk_tooltips_set_tip (tooltips, checkbuttonPacked, _(&quot;Enables Divx like packed vop, DO NOT SET, it is ugly&quot;), NULL);
+
+  labelMain = gtk_label_new (_(&quot;Main&quot;));
+  gtk_widget_show (labelMain);
+  gtk_notebook_set_tab_label (GTK_NOTEBOOK (notebook1), gtk_notebook_get_nth_page (GTK_NOTEBOOK (notebook1), 0), labelMain);
+
+  vbox6 = gtk_vbox_new (FALSE, 5);
+  gtk_widget_show (vbox6);
+  gtk_container_add (GTK_CONTAINER (notebook1), vbox6);
+  gtk_notebook_set_tab_label_packing (GTK_NOTEBOOK (notebook1), vbox6,
+                                      FALSE, FALSE, GTK_PACK_START);
+  gtk_container_set_border_width (GTK_CONTAINER (vbox6), 5);
+
+  hbox8 = gtk_hbox_new (FALSE, 10);
+  gtk_widget_show (hbox8);
+  gtk_box_pack_start (GTK_BOX (vbox6), hbox8, FALSE, FALSE, 0);
+
+  vbox8 = gtk_vbox_new (FALSE, 10);
+  gtk_widget_show (vbox8);
+  gtk_box_pack_start (GTK_BOX (hbox8), vbox8, FALSE, FALSE, 0);
+
+  labelMotionSearchPrecision = gtk_label_new (_(&quot;Motion search precision:&quot;));
+  gtk_widget_show (labelMotionSearchPrecision);
+  gtk_box_pack_start (GTK_BOX (vbox8), labelMotionSearchPrecision, TRUE, TRUE, 0);
+
+  labelVHQMode = gtk_label_new (_(&quot;VHQ mode:&quot;));
+  gtk_widget_show (labelVHQMode);
+  gtk_box_pack_start (GTK_BOX (vbox8), labelVHQMode, TRUE, TRUE, 0);
+  gtk_label_set_justify (GTK_LABEL (labelVHQMode), GTK_JUSTIFY_FILL);
+  gtk_misc_set_alignment (GTK_MISC (labelVHQMode), 0, 0.5);
+
+  vbox7 = gtk_vbox_new (FALSE, 10);
+  gtk_widget_show (vbox7);
+  gtk_box_pack_start (GTK_BOX (hbox8), vbox7, FALSE, FALSE, 0);
+
+  optionmenuMS = gtk_option_menu_new ();
+  gtk_widget_show (optionmenuMS);
+  gtk_box_pack_start (GTK_BOX (vbox7), optionmenuMS, FALSE, FALSE, 0);
+  gtk_tooltips_set_tip (tooltips, optionmenuMS, _(&quot;Higher settings give higher quality results, at the cost of slower encoding&quot;), NULL);
+
+  menu2 = gtk_menu_new ();
+
+  _0___none1 = gtk_menu_item_new_with_mnemonic (_(&quot;0 - None&quot;));
+  gtk_widget_show (_0___none1);
+  gtk_container_add (GTK_CONTAINER (menu2), _0___none1);
+
+  _1___very_low1 = gtk_menu_item_new_with_mnemonic (_(&quot;1 - Very low&quot;));
+  gtk_widget_show (_1___very_low1);
+  gtk_container_add (GTK_CONTAINER (menu2), _1___very_low1);
+
+  _2___low2 = gtk_menu_item_new_with_mnemonic (_(&quot;2 - Low&quot;));
+  gtk_widget_show (_2___low2);
+  gtk_container_add (GTK_CONTAINER (menu2), _2___low2);
+
+  _3___medium1 = gtk_menu_item_new_with_mnemonic (_(&quot;3 - Medium&quot;));
+  gtk_widget_show (_3___medium1);
+  gtk_container_add (GTK_CONTAINER (menu2), _3___medium1);
+
+  _4___high1 = gtk_menu_item_new_with_mnemonic (_(&quot;4 - High&quot;));
+  gtk_widget_show (_4___high1);
+  gtk_container_add (GTK_CONTAINER (menu2), _4___high1);
+
+  _5___very_high1 = gtk_menu_item_new_with_mnemonic (_(&quot;5 - Very high&quot;));
+  gtk_widget_show (_5___very_high1);
+  gtk_container_add (GTK_CONTAINER (menu2), _5___very_high1);
+
+  _6___ultra_high1 = gtk_menu_item_new_with_mnemonic (_(&quot;6 - Ultra high&quot;));
+  gtk_widget_show (_6___ultra_high1);
+  gtk_container_add (GTK_CONTAINER (menu2), _6___ultra_high1);
+
+  gtk_option_menu_set_menu (GTK_OPTION_MENU (optionmenuMS), menu2);
+
+  optionmenuVHQ = gtk_option_menu_new ();
+  gtk_widget_show (optionmenuVHQ);
+  gtk_box_pack_start (GTK_BOX (vbox7), optionmenuVHQ, FALSE, FALSE, 0);
+  gtk_tooltips_set_tip (tooltips, optionmenuVHQ, _(&quot;VHQ enables an additional search process to increase quality&quot;), NULL);
+
+  menu3 = gtk_menu_new ();
+
+  _0___off1 = gtk_menu_item_new_with_mnemonic (_(&quot;0 - Off&quot;));
+  gtk_widget_show (_0___off1);
+  gtk_container_add (GTK_CONTAINER (menu3), _0___off1);
+
+  _1___mode_decision1 = gtk_menu_item_new_with_mnemonic (_(&quot;1 - Mode decision&quot;));
+  gtk_widget_show (_1___mode_decision1);
+  gtk_container_add (GTK_CONTAINER (menu3), _1___mode_decision1);
+
+  _2___limited_search1 = gtk_menu_item_new_with_mnemonic (_(&quot;2 - Limited search&quot;));
+  gtk_widget_show (_2___limited_search1);
+  gtk_container_add (GTK_CONTAINER (menu3), _2___limited_search1);
+
+  _3___medium_search1 = gtk_menu_item_new_with_mnemonic (_(&quot;3 - Medium search&quot;));
+  gtk_widget_show (_3___medium_search1);
+  gtk_container_add (GTK_CONTAINER (menu3), _3___medium_search1);
+
+  _4___wide_search1 = gtk_menu_item_new_with_mnemonic (_(&quot;4 - Wide search&quot;));
+  gtk_widget_show (_4___wide_search1);
+  gtk_container_add (GTK_CONTAINER (menu3), _4___wide_search1);
+
+  gtk_option_menu_set_menu (GTK_OPTION_MENU (optionmenuVHQ), menu3);
+
+  hbox10 = gtk_hbox_new (FALSE, 10);
+  gtk_widget_show (hbox10);
+  gtk_box_pack_start (GTK_BOX (vbox6), hbox10, FALSE, FALSE, 0);
+
+  checkbuttonChromaMotion = gtk_check_button_new_with_mnemonic (_(&quot;C_hroma motion&quot;));
+  gtk_widget_show (checkbuttonChromaMotion);
+  gtk_box_pack_start (GTK_BOX (hbox10), checkbuttonChromaMotion, FALSE, FALSE, 0);
+  gtk_tooltips_set_tip (tooltips, checkbuttonChromaMotion, _(&quot;Use chroma information to estimate motion&quot;), NULL);
+
+  checkbutton4MV = gtk_check_button_new_with_mnemonic (_(&quot;_4MV&quot;));
+  gtk_widget_show (checkbutton4MV);
+  gtk_box_pack_start (GTK_BOX (hbox10), checkbutton4MV, FALSE, FALSE, 0);
+  gtk_tooltips_set_tip (tooltips, checkbutton4MV, _(&quot;Use 4 motion vectors per macroblock, might give better compression&quot;), NULL);
+
+  checkbuttonHQAC = gtk_check_button_new_with_mnemonic (_(&quot;HQ _AC&quot;));
+  gtk_widget_show (checkbuttonHQAC);
+  gtk_box_pack_start (GTK_BOX (hbox10), checkbuttonHQAC, FALSE, FALSE, 0);
+  gtk_tooltips_set_tip (tooltips, checkbuttonHQAC, _(&quot;Enable a better prediction of AC component. Turns on Lumi masking - applies more compression to dark/light areas that the eye cannot notice easily&quot;), NULL);
+
+  hbox9 = gtk_hbox_new (FALSE, 10);
+  gtk_widget_show (hbox9);
+  gtk_box_pack_start (GTK_BOX (vbox6), hbox9, FALSE, FALSE, 0);
+
+  labelIFrameIntervalMin = gtk_label_new (_(&quot;I-frame interval - Min:&quot;));
+  gtk_widget_show (labelIFrameIntervalMin);
+  gtk_box_pack_start (GTK_BOX (hbox9), labelIFrameIntervalMin, FALSE, FALSE, 0);
+
+  spinbuttonIMinPeriod_adj = gtk_adjustment_new (1, 1, 9, 1, 10, 10);
+  spinbuttonIMinPeriod = gtk_spin_button_new (GTK_ADJUSTMENT (spinbuttonIMinPeriod_adj), 1, 0);
+  gtk_widget_show (spinbuttonIMinPeriod);
+  gtk_box_pack_start (GTK_BOX (hbox9), spinbuttonIMinPeriod, FALSE, FALSE, 0);
+  gtk_tooltips_set_tip (tooltips, spinbuttonIMinPeriod, _(&quot;Minimum space between I-frames, 1 will disable forced I-frame spacing&quot;), NULL);
+
+  labelIFrameIntervalMax = gtk_label_new (_(&quot;Max:&quot;));
+  gtk_widget_show (labelIFrameIntervalMax);
+  gtk_box_pack_start (GTK_BOX (hbox9), labelIFrameIntervalMax, FALSE, FALSE, 0);
+
+  spinbuttonIMaxPeriod_adj = gtk_adjustment_new (250, 1, 500, 1, 10, 10);
+  spinbuttonIMaxPeriod = gtk_spin_button_new (GTK_ADJUSTMENT (spinbuttonIMaxPeriod_adj), 1, 0);
+  gtk_widget_show (spinbuttonIMaxPeriod);
+  gtk_box_pack_start (GTK_BOX (hbox9), spinbuttonIMaxPeriod, FALSE, FALSE, 0);
+  gtk_tooltips_set_tip (tooltips, spinbuttonIMaxPeriod, _(&quot;Maximum number of frames allowed between I-frames&quot;), NULL);
+
+  frameAdvancedSimpleProfile = gtk_frame_new (NULL);
+  gtk_widget_show (frameAdvancedSimpleProfile);
+  gtk_box_pack_start (GTK_BOX (vbox6), frameAdvancedSimpleProfile, FALSE, FALSE, 0);
+
+  vbox9 = gtk_vbox_new (FALSE, 5);
+  gtk_widget_show (vbox9);
+  gtk_container_add (GTK_CONTAINER (frameAdvancedSimpleProfile), vbox9);
+  gtk_container_set_border_width (GTK_CONTAINER (vbox9), 5);
+
+  hbox11 = gtk_hbox_new (FALSE, 10);
+  gtk_widget_show (hbox11);
+  gtk_box_pack_start (GTK_BOX (vbox9), hbox11, FALSE, FALSE, 0);
+
+  labelNumberOfBFrames = gtk_label_new (_(&quot;Number of B-frames:&quot;));
+  gtk_widget_show (labelNumberOfBFrames);
+  gtk_box_pack_start (GTK_BOX (hbox11), labelNumberOfBFrames, FALSE, FALSE, 0);
+
+  spinbuttonBFrame_adj = gtk_adjustment_new (1, 0, 3, 1, 1, 1);
+  spinbuttonBFrame = gtk_spin_button_new (GTK_ADJUSTMENT (spinbuttonBFrame_adj), 1, 0);
+  gtk_widget_show (spinbuttonBFrame);
+  gtk_box_pack_start (GTK_BOX (hbox11), spinbuttonBFrame, FALSE, FALSE, 0);
+  gtk_tooltips_set_tip (tooltips, spinbuttonBFrame, _(&quot;Maximum number of sequential B-frames (when set to 0, the original I/P encoder is used)&quot;), NULL);
+
+  hbox12 = gtk_hbox_new (FALSE, 10);
+  gtk_widget_show (hbox12);
+  gtk_box_pack_start (GTK_BOX (vbox9), hbox12, FALSE, FALSE, 0);
+
+  checkbuttonQPel = gtk_check_button_new_with_mnemonic (_(&quot;_Qpel&quot;));
+  gtk_widget_show (checkbuttonQPel);
+  gtk_box_pack_start (GTK_BOX (hbox12), checkbuttonQPel, FALSE, FALSE, 0);
+  gtk_tooltips_set_tip (tooltips, checkbuttonQPel, _(&quot;Use Quarter pixel resolution for a more precise motion estimation&quot;), NULL);
+
+  checkbuttonGMC = gtk_check_button_new_with_mnemonic (_(&quot;_GMC&quot;));
+  gtk_widget_show (checkbuttonGMC);
+  gtk_box_pack_start (GTK_BOX (hbox12), checkbuttonGMC, FALSE, FALSE, 0);
+  gtk_tooltips_set_tip (tooltips, checkbuttonGMC, _(&quot;Global Motion Compensation can save bits on camera pans, zooming and rotation&quot;), NULL);
+
+  checkbuttonBVHQ = gtk_check_button_new_with_mnemonic (_(&quot;_BVHQ&quot;));
+  gtk_widget_show (checkbuttonBVHQ);
+  gtk_box_pack_start (GTK_BOX (hbox12), checkbuttonBVHQ, FALSE, FALSE, 0);
+  gtk_tooltips_set_tip (tooltips, checkbuttonBVHQ, _(&quot;Produces nicer-looking B-frames&quot;), NULL);
+
+  labelAdvancedSimpleProfile = gtk_label_new (_(&quot;Advanced Simple Profile&quot;));
+  gtk_widget_show (labelAdvancedSimpleProfile);
+  gtk_frame_set_label_widget (GTK_FRAME (frameAdvancedSimpleProfile), labelAdvancedSimpleProfile);
+
+  frame_par1 = gtk_frame_new (NULL);
+  gtk_widget_show (frame_par1);
+  gtk_box_pack_start (GTK_BOX (vbox6), frame_par1, TRUE, TRUE, 1);
+  hbox_par1 = gtk_hbox_new (FALSE, 0);
+  gtk_widget_show (hbox_par1);
+  gtk_container_add (GTK_CONTAINER (frame_par1), hbox_par1);
+  gtk_container_set_border_width (GTK_CONTAINER (hbox_par1), 5);
+
+  checkbutton_par_asinput = gtk_check_button_new_with_mnemonic (_(&quot;As Input&quot;));
+  gtk_widget_show (checkbutton_par_asinput);
+  gtk_box_pack_start (GTK_BOX (hbox_par1), checkbutton_par_asinput, FALSE, FALSE, 10);
+  gtk_tooltips_set_tip (tooltips, checkbutton_par_asinput, _(&quot;Get PAR from input video file&quot;), NULL);
+
+  spinbutton_par_width_adj = gtk_adjustment_new (1, 1, 255, 1, 1, 1);
+  spinbutton_par_width = gtk_spin_button_new (GTK_ADJUSTMENT (spinbutton_par_width_adj), 1, 0);
+  gtk_widget_show (spinbutton_par_width);
+  gtk_box_pack_start (GTK_BOX (hbox_par1), spinbutton_par_width, FALSE, FALSE, 0);
+  gtk_tooltips_set_tip (tooltips, spinbutton_par_width, _(&quot;Pixel Width&quot;), NULL);
+
+  label_par1 = gtk_label_new (_(&quot;:&quot;));
+  gtk_widget_show (label_par1);
+  gtk_box_pack_start (GTK_BOX (hbox_par1), label_par1, FALSE, FALSE, 2);
+  gtk_label_set_justify (GTK_LABEL (label_par1), GTK_JUSTIFY_CENTER);
+
+  spinbutton_par_height_adj = gtk_adjustment_new (1, 1, 255, 1, 1, 1);
+  spinbutton_par_height = gtk_spin_button_new (GTK_ADJUSTMENT (spinbutton_par_height_adj), 1, 0);
+  gtk_widget_show (spinbutton_par_height);
+  gtk_box_pack_start (GTK_BOX (hbox_par1), spinbutton_par_height, FALSE, FALSE, 0);
+  gtk_tooltips_set_tip (tooltips, spinbutton_par_height, _(&quot;Pixel Height&quot;), NULL);
+  label_par2 = gtk_label_new (_(&quot;Pixel Aspect Ratio&quot;));
+  gtk_widget_show (label_par2);
+  gtk_frame_set_label_widget (GTK_FRAME (frame_par1), label_par2);
+  gtk_label_set_use_markup (GTK_LABEL (label_par2), TRUE);
+
+  labelMotionEstimation = gtk_label_new (_(&quot;Motion &amp; Misc&quot;));
+  gtk_widget_show (labelMotionEstimation);
+  gtk_notebook_set_tab_label (GTK_NOTEBOOK (notebook1), gtk_notebook_get_nth_page (GTK_NOTEBOOK (notebook1), 1), labelMotionEstimation);
+
+  vbox10 = gtk_vbox_new (FALSE, 5);
+  gtk_widget_show (vbox10);
+  gtk_container_add (GTK_CONTAINER (notebook1), vbox10);
+  gtk_container_set_border_width (GTK_CONTAINER (vbox10), 5);
+
+  hbox13 = gtk_hbox_new (FALSE, 10);
+  gtk_widget_show (hbox13);
+  gtk_box_pack_start (GTK_BOX (vbox10), hbox13, FALSE, FALSE, 0);
+
+  labelQuantizationType = gtk_label_new (_(&quot;Quantization type:&quot;));
+  gtk_widget_show (labelQuantizationType);
+  gtk_box_pack_start (GTK_BOX (hbox13), labelQuantizationType, FALSE, FALSE, 0);
+
+  radiobuttonH263 = gtk_radio_button_new_with_mnemonic (NULL, _(&quot;_H.263&quot;));
+  gtk_widget_show (radiobuttonH263);
+  gtk_box_pack_start (GTK_BOX (hbox13), radiobuttonH263, FALSE, FALSE, 0);
+  gtk_tooltips_set_tip (tooltips, radiobuttonH263, _(&quot;H.263 quantizers smooth the picture (useful at lower bitrates)&quot;), NULL);
+  gtk_radio_button_set_group (GTK_RADIO_BUTTON (radiobuttonH263), radiobuttonH263_group);
+  radiobuttonH263_group = gtk_radio_button_get_group (GTK_RADIO_BUTTON (radiobuttonH263));
+
+  radiobuttonMpeg = gtk_radio_button_new_with_mnemonic (NULL, _(&quot;_MPEG&quot;));
+  gtk_widget_show (radiobuttonMpeg);
+  gtk_box_pack_start (GTK_BOX (hbox13), radiobuttonMpeg, FALSE, FALSE, 0);
+  gtk_tooltips_set_tip (tooltips, radiobuttonMpeg, _(&quot;MPEG quantizers (slightly slower) produce sharper picture (useful at higher bitrates)&quot;), NULL);
+  gtk_radio_button_set_group (GTK_RADIO_BUTTON (radiobuttonMpeg), radiobuttonH263_group);
+  radiobuttonH263_group = gtk_radio_button_get_group (GTK_RADIO_BUTTON (radiobuttonMpeg));
+
+  radiobuttonCustomMatrix = gtk_radio_button_new_with_mnemonic (NULL, _(&quot;_Custom Matrix&quot;));
+  gtk_widget_show (radiobuttonCustomMatrix);
+  gtk_box_pack_start (GTK_BOX (hbox13), radiobuttonCustomMatrix, FALSE, FALSE, 0);
+  gtk_radio_button_set_group (GTK_RADIO_BUTTON (radiobuttonCustomMatrix), radiobuttonH263_group);
+  radiobuttonH263_group = gtk_radio_button_get_group (GTK_RADIO_BUTTON (radiobuttonCustomMatrix));
+
+  hbox20 = gtk_hbox_new (FALSE, 0);
+  gtk_widget_show (hbox20);
+  gtk_box_pack_start (GTK_BOX (vbox10), hbox20, FALSE, TRUE, 0);
+
+  labelLoadCustomMatrix = gtk_label_new (_(&quot;Load Custom Matrix:  &quot;));
+  gtk_widget_show (labelLoadCustomMatrix);
+  gtk_box_pack_start (GTK_BOX (hbox20), labelLoadCustomMatrix, FALSE, FALSE, 0);
+  gtk_label_set_justify (GTK_LABEL (labelLoadCustomMatrix), GTK_JUSTIFY_RIGHT);
+
+  buttonLoadMatrix = gtk_button_new ();
+  gtk_widget_show (buttonLoadMatrix);
+  gtk_box_pack_start (GTK_BOX (hbox20), buttonLoadMatrix, FALSE, FALSE, 0);
+
+  alignment6 = gtk_alignment_new (0.5, 0.5, 0, 0);
+  gtk_widget_show (alignment6);
+  gtk_container_add (GTK_CONTAINER (buttonLoadMatrix), alignment6);
+
+  hbox21 = gtk_hbox_new (FALSE, 2);
+  gtk_widget_show (hbox21);
+  gtk_container_add (GTK_CONTAINER (alignment6), hbox21);
+
+  image1 = gtk_image_new_from_stock (&quot;gtk-open&quot;, GTK_ICON_SIZE_BUTTON);
+  gtk_widget_show (image1);
+  gtk_box_pack_start (GTK_BOX (hbox21), image1, FALSE, FALSE, 0);
+
+  label13 = gtk_label_new_with_mnemonic (_(&quot;Open CQM file&quot;));
+  gtk_widget_show (label13);
+  gtk_box_pack_start (GTK_BOX (hbox21), label13, FALSE, FALSE, 0);
+
+  vseparator1 = gtk_vseparator_new ();
+  gtk_widget_show (vseparator1);
+  gtk_box_pack_start (GTK_BOX (hbox20), vseparator1, FALSE, TRUE, 0);
+
+  buttonCreateCustomMatrix = gtk_button_new_with_mnemonic (_(&quot;Edit Custom Matrix&quot;));
+  gtk_widget_show (buttonCreateCustomMatrix);
+  gtk_box_pack_start (GTK_BOX (hbox20), buttonCreateCustomMatrix, FALSE, FALSE, 0);
+
+  frameQuantizationRestrictions = gtk_frame_new (NULL);
+  gtk_widget_show (frameQuantizationRestrictions);
+  gtk_box_pack_start (GTK_BOX (vbox10), frameQuantizationRestrictions, FALSE, FALSE, 0);
+
+  hbox14 = gtk_hbox_new (FALSE, 10);
+  gtk_widget_show (hbox14);
+  gtk_container_add (GTK_CONTAINER (frameQuantizationRestrictions), hbox14);
+  gtk_container_set_border_width (GTK_CONTAINER (hbox14), 5);
+
+  vbox11 = gtk_vbox_new (FALSE, 5);
+  gtk_widget_show (vbox11);
+  gtk_box_pack_start (GTK_BOX (hbox14), vbox11, FALSE, FALSE, 0);
+
+  labelIFrameQuantizerMin = gtk_label_new (_(&quot;I-frame quantizer - Min:&quot;));
+  gtk_widget_show (labelIFrameQuantizerMin);
+  gtk_box_pack_start (GTK_BOX (vbox11), labelIFrameQuantizerMin, TRUE, TRUE, 0);
+  gtk_misc_set_alignment (GTK_MISC (labelIFrameQuantizerMin), 0, 0.5);
+
+  labelPFrameQuantizerMin = gtk_label_new (_(&quot;P-frame quantizer - Min:&quot;));
+  gtk_widget_show (labelPFrameQuantizerMin);
+  gtk_box_pack_start (GTK_BOX (vbox11), labelPFrameQuantizerMin, TRUE, TRUE, 0);
+  gtk_misc_set_alignment (GTK_MISC (labelPFrameQuantizerMin), 0, 0.5);
+
+  labelBFrameQuantizaterMin = gtk_label_new (_(&quot;B-frame quantizer - Min:&quot;));
+  gtk_widget_show (labelBFrameQuantizaterMin);
+  gtk_box_pack_start (GTK_BOX (vbox11), labelBFrameQuantizaterMin, TRUE, TRUE, 0);
+  gtk_misc_set_alignment (GTK_MISC (labelBFrameQuantizaterMin), 0, 0.5);
+
+  vbox12 = gtk_vbox_new (FALSE, 5);
+  gtk_widget_show (vbox12);
+  gtk_box_pack_start (GTK_BOX (hbox14), vbox12, FALSE, FALSE, 0);
+
+  spinbuttonIMin_adj = gtk_adjustment_new (2, 1, 31, 1, 10, 10);
+  spinbuttonIMin = gtk_spin_button_new (GTK_ADJUSTMENT (spinbuttonIMin_adj), 1, 0);
+  gtk_widget_show (spinbuttonIMin);
+  gtk_box_pack_start (GTK_BOX (vbox12), spinbuttonIMin, FALSE, FALSE, 0);
+  gtk_tooltips_set_tip (tooltips, spinbuttonIMin, _(&quot;Minimum quantizer allowed for I-frames&quot;), NULL);
+
+  spinbuttonPMin_adj = gtk_adjustment_new (2, 1, 31, 1, 10, 10);
+  spinbuttonPMin = gtk_spin_button_new (GTK_ADJUSTMENT (spinbuttonPMin_adj), 1, 0);
+  gtk_widget_show (spinbuttonPMin);
+  gtk_box_pack_start (GTK_BOX (vbox12), spinbuttonPMin, FALSE, FALSE, 0);
+  gtk_tooltips_set_tip (tooltips, spinbuttonPMin, _(&quot;Minimum quantizer allowed for P-frames&quot;), NULL);
+
+  spinbuttonBMin_adj = gtk_adjustment_new (2, 1, 31, 1, 10, 10);
+  spinbuttonBMin = gtk_spin_button_new (GTK_ADJUSTMENT (spinbuttonBMin_adj), 1, 0);
+  gtk_widget_show (spinbuttonBMin);
+  gtk_box_pack_start (GTK_BOX (vbox12), spinbuttonBMin, FALSE, FALSE, 0);
+  gtk_tooltips_set_tip (tooltips, spinbuttonBMin, _(&quot;Minimum quantizer allowed for B-frames&quot;), NULL);
+
+  vbox13 = gtk_vbox_new (FALSE, 5);
+  gtk_widget_show (vbox13);
+  gtk_box_pack_start (GTK_BOX (hbox14), vbox13, FALSE, FALSE, 0);
+
+  labelIFrameQuantizerMax = gtk_label_new (_(&quot;Max:&quot;));
+  gtk_widget_show (labelIFrameQuantizerMax);
+  gtk_box_pack_start (GTK_BOX (vbox13), labelIFrameQuantizerMax, TRUE, TRUE, 0);
+  gtk_misc_set_alignment (GTK_MISC (labelIFrameQuantizerMax), 0, 0.5);
+
+  labelPFrameQuantizerMax = gtk_label_new (_(&quot;Max:&quot;));
+  gtk_widget_show (labelPFrameQuantizerMax);
+  gtk_box_pack_start (GTK_BOX (vbox13), labelPFrameQuantizerMax, TRUE, TRUE, 0);
+  gtk_misc_set_alignment (GTK_MISC (labelPFrameQuantizerMax), 0, 0.5);
+
+  labelBFrameQuantizerMax = gtk_label_new (_(&quot;Max:&quot;));
+  gtk_widget_show (labelBFrameQuantizerMax);
+  gtk_box_pack_start (GTK_BOX (vbox13), labelBFrameQuantizerMax, TRUE, TRUE, 0);
+  gtk_misc_set_alignment (GTK_MISC (labelBFrameQuantizerMax), 0, 0.5);
+
+  vbox14 = gtk_vbox_new (FALSE, 5);
+  gtk_widget_show (vbox14);
+  gtk_box_pack_start (GTK_BOX (hbox14), vbox14, FALSE, FALSE, 0);
+
+  spinbuttonIMax_adj = gtk_adjustment_new (31, 1, 31, 1, 10, 10);
+  spinbuttonIMax = gtk_spin_button_new (GTK_ADJUSTMENT (spinbuttonIMax_adj), 1, 0);
+  gtk_widget_show (spinbuttonIMax);
+  gtk_box_pack_start (GTK_BOX (vbox14), spinbuttonIMax, FALSE, FALSE, 0);
+  gtk_tooltips_set_tip (tooltips, spinbuttonIMax, _(&quot;Maximum quantizer allowed for I-frames&quot;), NULL);
+
+  spinbuttonPMax_adj = gtk_adjustment_new (31, 1, 31, 1, 10, 10);
+  spinbuttonPMax = gtk_spin_button_new (GTK_ADJUSTMENT (spinbuttonPMax_adj), 1, 0);
+  gtk_widget_show (spinbuttonPMax);
+  gtk_box_pack_start (GTK_BOX (vbox14), spinbuttonPMax, FALSE, FALSE, 0);
+  gtk_tooltips_set_tip (tooltips, spinbuttonPMax, _(&quot;Maximum quantizer allowed for P-frames&quot;), NULL);
+
+  spinbuttonBMax_adj = gtk_adjustment_new (31, 1, 31, 1, 10, 10);
+  spinbuttonBMax = gtk_spin_button_new (GTK_ADJUSTMENT (spinbuttonBMax_adj), 1, 0);
+  gtk_widget_show (spinbuttonBMax);
+  gtk_box_pack_start (GTK_BOX (vbox14), spinbuttonBMax, FALSE, FALSE, 0);
+  gtk_tooltips_set_tip (tooltips, spinbuttonBMax, _(&quot;Maximum quantizer allowed for B-frames&quot;), NULL);
+
+  labelQuantizerRestrictions = gtk_label_new (_(&quot;Quantizer restrictions&quot;));
+  gtk_widget_show (labelQuantizerRestrictions);
+  gtk_frame_set_label_widget (GTK_FRAME (frameQuantizationRestrictions), labelQuantizerRestrictions);
+
+  checkbuttonTrellis = gtk_check_button_new_with_mnemonic (_(&quot;_Trellis quantization&quot;));
+  gtk_widget_show (checkbuttonTrellis);
+  gtk_box_pack_start (GTK_BOX (vbox10), checkbuttonTrellis, FALSE, FALSE, 0);
+  gtk_tooltips_set_tip (tooltips, checkbuttonTrellis, _(&quot;Rate distortion quantization, will find optimal encoding for each block&quot;), NULL);
+
+  labelQuantization = gtk_label_new (_(&quot;Quantization&quot;));
+  gtk_widget_show (labelQuantization);
+  gtk_notebook_set_tab_label (GTK_NOTEBOOK (notebook1), gtk_notebook_get_nth_page (GTK_NOTEBOOK (notebook1), 2), labelQuantization);
+
+  vbox15 = gtk_vbox_new (FALSE, 5);
+  gtk_widget_show (vbox15);
+  gtk_container_add (GTK_CONTAINER (notebook1), vbox15);
+  gtk_notebook_set_tab_label_packing (GTK_NOTEBOOK (notebook1), vbox15,
+                                      FALSE, FALSE, GTK_PACK_START);
+  gtk_container_set_border_width (GTK_CONTAINER (vbox15), 5);
+
+  frameTwoPassTuning = gtk_frame_new (NULL);
+  gtk_widget_show (frameTwoPassTuning);
+  gtk_box_pack_start (GTK_BOX (vbox15), frameTwoPassTuning, FALSE, FALSE, 0);
+
+  vbox16 = gtk_vbox_new (FALSE, 10);
+  gtk_widget_show (vbox16);
+  gtk_container_add (GTK_CONTAINER (frameTwoPassTuning), vbox16);
+  gtk_container_set_border_width (GTK_CONTAINER (vbox16), 5);
+
+  hbox = gtk_hbox_new (FALSE, 10);
+  gtk_widget_show (hbox);
+  gtk_box_pack_start (GTK_BOX (vbox16), hbox, FALSE, FALSE, 0);
+
+  vbox17 = gtk_vbox_new (FALSE, 0);
+  gtk_widget_show (vbox17);
+  gtk_box_pack_start (GTK_BOX (hbox), vbox17, TRUE, TRUE, 0);
+
+  labelIFrameBoost = gtk_label_new (_(&quot;I-frame boost (%):&quot;));
+  gtk_widget_show (labelIFrameBoost);
+  gtk_box_pack_start (GTK_BOX (vbox17), labelIFrameBoost, TRUE, TRUE, 0);
+  gtk_misc_set_alignment (GTK_MISC (labelIFrameBoost), 0, 0.5);
+
+  labelIFrameCloserThan = gtk_label_new (_(&quot;I-frames closer than ... frames...&quot;));
+  gtk_widget_show (labelIFrameCloserThan);
+  gtk_box_pack_start (GTK_BOX (vbox17), labelIFrameCloserThan, TRUE, TRUE, 0);
+  gtk_misc_set_alignment (GTK_MISC (labelIFrameCloserThan), 0, 0.5);
+
+  labelAreReducedBy = gtk_label_new (_(&quot;...are reduced by (%):&quot;));
+  gtk_widget_show (labelAreReducedBy);
+  gtk_box_pack_start (GTK_BOX (vbox17), labelAreReducedBy, TRUE, TRUE, 0);
+  gtk_misc_set_alignment (GTK_MISC (labelAreReducedBy), 0, 0.5);
+
+  labelMaxOverflowImprovement = gtk_label_new (_(&quot;Max overflow improvement (%):&quot;));
+  gtk_widget_show (labelMaxOverflowImprovement);
+  gtk_box_pack_start (GTK_BOX (vbox17), labelMaxOverflowImprovement, TRUE, TRUE, 0);
+  gtk_misc_set_alignment (GTK_MISC (labelMaxOverflowImprovement), 0, 0.5);
+
+  labelMaxOverflowDegradation = gtk_label_new (_(&quot;Max overflow degradation (%):&quot;));
+  gtk_widget_show (labelMaxOverflowDegradation);
+  gtk_box_pack_start (GTK_BOX (vbox17), labelMaxOverflowDegradation, TRUE, TRUE, 0);
+  gtk_misc_set_alignment (GTK_MISC (labelMaxOverflowDegradation), 0, 0.5);
+
+  vbox18 = gtk_vbox_new (FALSE, 5);
+  gtk_widget_show (vbox18);
+  gtk_box_pack_start (GTK_BOX (hbox), vbox18, FALSE, FALSE, 0);
+
+  entryIBoost = gtk_entry_new ();
+  gtk_widget_show (entryIBoost);
+  gtk_box_pack_start (GTK_BOX (vbox18), entryIBoost, FALSE, FALSE, 0);
+  gtk_tooltips_set_tip (tooltips, entryIBoost, _(&quot;A value of 20 will give 20% more bits to every I-frame&quot;), NULL);
+
+  entryIInterv = gtk_entry_new ();
+  gtk_widget_show (entryIInterv);
+  gtk_box_pack_start (GTK_BOX (vbox18), entryIInterv, FALSE, FALSE, 0);
+  gtk_widget_set_size_request (entryIInterv, 158, -1);
+  gtk_tooltips_set_tip (tooltips, entryIInterv, _(&quot;I-frames appearing in the range below this value will be treated as consecutive keyframes&quot;), NULL);
+
+  entryIreduction = gtk_entry_new ();
+  gtk_widget_show (entryIreduction);
+  gtk_box_pack_start (GTK_BOX (vbox18), entryIreduction, FALSE, FALSE, 0);
+  gtk_tooltips_set_tip (tooltips, entryIreduction, _(&quot;Reduction of bitrate for the first consecutive I-frames. The last I-frame will get treated normally&quot;), NULL);
+
+  entryMaxOvrImp = gtk_entry_new ();
+  gtk_widget_show (entryMaxOvrImp);
+  gtk_box_pack_start (GTK_BOX (vbox18), entryMaxOvrImp, FALSE, FALSE, 0);
+  gtk_tooltips_set_tip (tooltips, entryMaxOvrImp, _(&quot;How much of the overflow the codec can eat into during undersized sections - larger values will bridge the gap faster&quot;), NULL);
+
+  entryMaxOvrDeg = gtk_entry_new ();
+  gtk_widget_show (entryMaxOvrDeg);
+  gtk_box_pack_start (GTK_BOX (vbox18), entryMaxOvrDeg, FALSE, FALSE, 0);
+  gtk_tooltips_set_tip (tooltips, entryMaxOvrDeg, _(&quot;How much of the overflow the codec can eat into during oversized sections - larger values will bridge the gap faster&quot;), NULL);
+
+  labelTwoPassTuning = gtk_label_new (_(&quot;Two pass tuning&quot;));
+  gtk_widget_show (labelTwoPassTuning);
+  gtk_frame_set_label_widget (GTK_FRAME (frameTwoPassTuning), labelTwoPassTuning);
+
+  frameCurveCompression = gtk_frame_new (NULL);
+  gtk_widget_show (frameCurveCompression);
+  gtk_box_pack_start (GTK_BOX (vbox15), frameCurveCompression, FALSE, FALSE, 0);
+
+  hbox18 = gtk_hbox_new (FALSE, 10);
+  gtk_widget_show (hbox18);
+  gtk_container_add (GTK_CONTAINER (frameCurveCompression), hbox18);
+  gtk_container_set_border_width (GTK_CONTAINER (hbox18), 5);
+
+  vbox19 = gtk_vbox_new (FALSE, 0);
+  gtk_widget_show (vbox19);
+  gtk_box_pack_start (GTK_BOX (hbox18), vbox19, TRUE, TRUE, 0);
+
+  labelHighBitrateScenes = gtk_label_new (_(&quot;High bitrate scenes (%):&quot;));
+  gtk_widget_show (labelHighBitrateScenes);
+  gtk_box_pack_start (GTK_BOX (vbox19), labelHighBitrateScenes, TRUE, TRUE, 0);
+  gtk_misc_set_alignment (GTK_MISC (labelHighBitrateScenes), 0, 0.5);
+
+  labelLowBitrateScenes = gtk_label_new (_(&quot;Low bitrate scenes (%):&quot;));
+  gtk_widget_show (labelLowBitrateScenes);
+  gtk_box_pack_start (GTK_BOX (vbox19), labelLowBitrateScenes, TRUE, TRUE, 0);
+  gtk_misc_set_alignment (GTK_MISC (labelLowBitrateScenes), 0, 0.5);
+
+  labelOverflowControlStrength = gtk_label_new (_(&quot;Overflow control strength (%):&quot;));
+  gtk_widget_show (labelOverflowControlStrength);
+  gtk_box_pack_start (GTK_BOX (vbox19), labelOverflowControlStrength, TRUE, TRUE, 0);
+  gtk_misc_set_alignment (GTK_MISC (labelOverflowControlStrength), 0, 0.5);
+
+  vbox20 = gtk_vbox_new (FALSE, 5);
+  gtk_widget_show (vbox20);
+  gtk_box_pack_start (GTK_BOX (hbox18), vbox20, FALSE, FALSE, 0);
+
+  entryHiPass = gtk_entry_new ();
+  gtk_widget_show (entryHiPass);
+  gtk_box_pack_start (GTK_BOX (vbox20), entryHiPass, FALSE, FALSE, 0);
+  gtk_tooltips_set_tip (tooltips, entryHiPass, _(&quot;The higher this value, the more bits get taken from frames larger than the average size, and redistributed to others&quot;), NULL);
+
+  entryLowPass = gtk_entry_new ();
+  gtk_widget_show (entryLowPass);
+  gtk_box_pack_start (GTK_BOX (vbox20), entryLowPass, FALSE, FALSE, 0);
+  gtk_tooltips_set_tip (tooltips, entryLowPass, _(&quot;The higher this value, the more bits get assigned to frames below the average frame size&quot;), NULL);
+
+  entryOvrControl = gtk_entry_new ();
+  gtk_widget_show (entryOvrControl);
+  gtk_box_pack_start (GTK_BOX (vbox20), entryOvrControl, FALSE, FALSE, 0);
+  gtk_tooltips_set_tip (tooltips, entryOvrControl, _(&quot;0 = default from core (let XviD decide), else overflow payback percent per frame&quot;), NULL);
+
+  labelCurveCompression = gtk_label_new (_(&quot;Curve compression&quot;));
+  gtk_widget_show (labelCurveCompression);
+  gtk_frame_set_label_widget (GTK_FRAME (frameCurveCompression), labelCurveCompression);
+
+  labelSecondPass = gtk_label_new (_(&quot;Second Pass&quot;));
+  gtk_widget_show (labelSecondPass);
+  gtk_notebook_set_tab_label (GTK_NOTEBOOK (notebook1), gtk_notebook_get_nth_page (GTK_NOTEBOOK (notebook1), 3), labelSecondPass);
+
+  dialog_action_area1 = GTK_DIALOG (dialog1)-&gt;action_area;
+  gtk_widget_show (dialog_action_area1);
+  gtk_button_box_set_layout (GTK_BUTTON_BOX (dialog_action_area1), GTK_BUTTONBOX_END);
+
+  cancelbutton1 = gtk_button_new_from_stock (&quot;gtk-cancel&quot;);
+  gtk_widget_show (cancelbutton1);
+  gtk_dialog_add_action_widget (GTK_DIALOG (dialog1), cancelbutton1, GTK_RESPONSE_CANCEL);
+  GTK_WIDGET_SET_FLAGS (cancelbutton1, GTK_CAN_DEFAULT);
+
+  okbutton1 = gtk_button_new_from_stock (&quot;gtk-ok&quot;);
+  gtk_widget_show (okbutton1);
+  gtk_dialog_add_action_widget (GTK_DIALOG (dialog1), okbutton1, GTK_RESPONSE_OK);
+  GTK_WIDGET_SET_FLAGS (okbutton1, GTK_CAN_DEFAULT);
+
+  /* Store pointers to all widgets, for use by lookup_widget(). */
+  GLADE_HOOKUP_OBJECT_NO_REF (dialog1, dialog1, &quot;dialog1&quot;);
+  GLADE_HOOKUP_OBJECT_NO_REF (dialog1, dialog_vbox1, &quot;dialog_vbox1&quot;);
+  GLADE_HOOKUP_OBJECT (dialog1, notebook1, &quot;notebook1&quot;);
+  GLADE_HOOKUP_OBJECT (dialog1, vbox2, &quot;vbox2&quot;);
+  GLADE_HOOKUP_OBJECT (dialog1, frame1, &quot;frame1&quot;);
+  GLADE_HOOKUP_OBJECT (dialog1, vbox3, &quot;vbox3&quot;);
+  GLADE_HOOKUP_OBJECT (dialog1, hbox19, &quot;hbox19&quot;);
+  GLADE_HOOKUP_OBJECT (dialog1, vbox21, &quot;vbox21&quot;);
+  GLADE_HOOKUP_OBJECT (dialog1, label10, &quot;label10&quot;);
+  GLADE_HOOKUP_OBJECT (dialog1, label11, &quot;label11&quot;);
+  GLADE_HOOKUP_OBJECT (dialog1, label12, &quot;label12&quot;);
+  GLADE_HOOKUP_OBJECT (dialog1, vbox22, &quot;vbox22&quot;);
+  GLADE_HOOKUP_OBJECT (dialog1, optionmenuType, &quot;optionmenuType&quot;);
+  GLADE_HOOKUP_OBJECT (dialog1, menu1, &quot;menu1&quot;);
+  GLADE_HOOKUP_OBJECT (dialog1, one_pass_cbr1, &quot;one_pass_cbr1&quot;);
+  GLADE_HOOKUP_OBJECT (dialog1, one_pass_quantizer1, &quot;one_pass_quantizer1&quot;);
+  GLADE_HOOKUP_OBJECT (dialog1, two_pass1, &quot;two_pass1&quot;);
+  GLADE_HOOKUP_OBJECT (dialog1, two_pass__average_bitrate1, &quot;two_pass__average_bitrate1&quot;);
+  GLADE_HOOKUP_OBJECT (dialog1, same_qz_as_input1, &quot;same_qz_as_input1&quot;);
+  GLADE_HOOKUP_OBJECT (dialog1, entryEntry, &quot;entryEntry&quot;);
+  GLADE_HOOKUP_OBJECT (dialog1, spinbuttonQuant, &quot;spinbuttonQuant&quot;);
+  GLADE_HOOKUP_OBJECT (dialog1, label9, &quot;label9&quot;);
+  GLADE_HOOKUP_OBJECT (dialog1, hbox7, &quot;hbox7&quot;);
+  GLADE_HOOKUP_OBJECT (dialog1, vbox4, &quot;vbox4&quot;);
+  GLADE_HOOKUP_OBJECT (dialog1, checkbuttonInterlaced, &quot;checkbuttonInterlaced&quot;);
+  GLADE_HOOKUP_OBJECT (dialog1, checkbuttonGreyScale, &quot;checkbuttonGreyScale&quot;);
+  GLADE_HOOKUP_OBJECT (dialog1, vbox5, &quot;vbox5&quot;);
+  GLADE_HOOKUP_OBJECT (dialog1, checkbuttonCartoon, &quot;checkbuttonCartoon&quot;);
+  GLADE_HOOKUP_OBJECT (dialog1, checkbuttonChroma, &quot;checkbuttonChroma&quot;);
+  GLADE_HOOKUP_OBJECT (dialog1, vbox23, &quot;vbox23&quot;);
+  GLADE_HOOKUP_OBJECT (dialog1, checkbuttonTurbo, &quot;checkbuttonTurbo&quot;);
+  GLADE_HOOKUP_OBJECT (dialog1, checkbuttonPacked, &quot;checkbuttonPacked&quot;);
+  GLADE_HOOKUP_OBJECT (dialog1, labelMain, &quot;labelMain&quot;);
+  GLADE_HOOKUP_OBJECT (dialog1, vbox6, &quot;vbox6&quot;);
+  GLADE_HOOKUP_OBJECT (dialog1, hbox8, &quot;hbox8&quot;);
+  GLADE_HOOKUP_OBJECT (dialog1, vbox8, &quot;vbox8&quot;);
+  GLADE_HOOKUP_OBJECT (dialog1, labelMotionSearchPrecision, &quot;labelMotionSearchPrecision&quot;);
+  GLADE_HOOKUP_OBJECT (dialog1, labelVHQMode, &quot;labelVHQMode&quot;);
+  GLADE_HOOKUP_OBJECT (dialog1, vbox7, &quot;vbox7&quot;);
+  GLADE_HOOKUP_OBJECT (dialog1, optionmenuMS, &quot;optionmenuMS&quot;);
+  GLADE_HOOKUP_OBJECT (dialog1, menu2, &quot;menu2&quot;);
+  GLADE_HOOKUP_OBJECT (dialog1, _0___none1, &quot;_0___none1&quot;);
+  GLADE_HOOKUP_OBJECT (dialog1, _1___very_low1, &quot;_1___very_low1&quot;);
+  GLADE_HOOKUP_OBJECT (dialog1, _2___low2, &quot;_2___low2&quot;);
+  GLADE_HOOKUP_OBJECT (dialog1, _3___medium1, &quot;_3___medium1&quot;);
+  GLADE_HOOKUP_OBJECT (dialog1, _4___high1, &quot;_4___high1&quot;);
+  GLADE_HOOKUP_OBJECT (dialog1, _5___very_high1, &quot;_5___very_high1&quot;);
+  GLADE_HOOKUP_OBJECT (dialog1, _6___ultra_high1, &quot;_6___ultra_high1&quot;);
+  GLADE_HOOKUP_OBJECT (dialog1, optionmenuVHQ, &quot;optionmenuVHQ&quot;);
+  GLADE_HOOKUP_OBJECT (dialog1, menu3, &quot;menu3&quot;);
+  GLADE_HOOKUP_OBJECT (dialog1, _0___off1, &quot;_0___off1&quot;);
+  GLADE_HOOKUP_OBJECT (dialog1, _1___mode_decision1, &quot;_1___mode_decision1&quot;);
+  GLADE_HOOKUP_OBJECT (dialog1, _2___limited_search1, &quot;_2___limited_search1&quot;);
+  GLADE_HOOKUP_OBJECT (dialog1, _3___medium_search1, &quot;_3___medium_search1&quot;);
+  GLADE_HOOKUP_OBJECT (dialog1, _4___wide_search1, &quot;_4___wide_search1&quot;);
+  GLADE_HOOKUP_OBJECT (dialog1, hbox10, &quot;hbox10&quot;);
+  GLADE_HOOKUP_OBJECT (dialog1, checkbuttonChromaMotion, &quot;checkbuttonChromaMotion&quot;);
+  GLADE_HOOKUP_OBJECT (dialog1, checkbutton4MV, &quot;checkbutton4MV&quot;);
+  GLADE_HOOKUP_OBJECT (dialog1, checkbuttonHQAC, &quot;checkbuttonHQAC&quot;);
+  GLADE_HOOKUP_OBJECT (dialog1, hbox9, &quot;hbox9&quot;);
+  GLADE_HOOKUP_OBJECT (dialog1, labelIFrameIntervalMin, &quot;labelIFrameIntervalMin&quot;);
+  GLADE_HOOKUP_OBJECT (dialog1, spinbuttonIMinPeriod, &quot;spinbuttonIMinPeriod&quot;);
+  GLADE_HOOKUP_OBJECT (dialog1, labelIFrameIntervalMax, &quot;labelIFrameIntervalMax&quot;);
+  GLADE_HOOKUP_OBJECT (dialog1, spinbuttonIMaxPeriod, &quot;spinbuttonIMaxPeriod&quot;);
+  GLADE_HOOKUP_OBJECT (dialog1, frameAdvancedSimpleProfile, &quot;frameAdvancedSimpleProfile&quot;);
+  GLADE_HOOKUP_OBJECT (dialog1, vbox9, &quot;vbox9&quot;);
+  GLADE_HOOKUP_OBJECT (dialog1, hbox11, &quot;hbox11&quot;);
+  GLADE_HOOKUP_OBJECT (dialog1, labelNumberOfBFrames, &quot;labelNumberOfBFrames&quot;);
+  GLADE_HOOKUP_OBJECT (dialog1, spinbuttonBFrame, &quot;spinbuttonBFrame&quot;);
+  GLADE_HOOKUP_OBJECT (dialog1, hbox12, &quot;hbox12&quot;);
+  GLADE_HOOKUP_OBJECT (dialog1, checkbuttonQPel, &quot;checkbuttonQPel&quot;);
+  GLADE_HOOKUP_OBJECT (dialog1, checkbuttonGMC, &quot;checkbuttonGMC&quot;);
+  GLADE_HOOKUP_OBJECT (dialog1, checkbuttonBVHQ, &quot;checkbuttonBVHQ&quot;);
+  GLADE_HOOKUP_OBJECT (dialog1, labelAdvancedSimpleProfile, &quot;labelAdvancedSimpleProfile&quot;);
+  GLADE_HOOKUP_OBJECT (dialog1, checkbutton_par_asinput, &quot;checkbutton_par_asinput&quot;);
+  GLADE_HOOKUP_OBJECT (dialog1, spinbutton_par_width, &quot;spinbutton_par_width&quot;);
+  GLADE_HOOKUP_OBJECT (dialog1, spinbutton_par_height, &quot;spinbutton_par_height&quot;);
+  GLADE_HOOKUP_OBJECT (dialog1, labelMotionEstimation, &quot;labelMotionEstimation&quot;);
+  GLADE_HOOKUP_OBJECT (dialog1, vbox10, &quot;vbox10&quot;);
+  GLADE_HOOKUP_OBJECT (dialog1, hbox13, &quot;hbox13&quot;);
+  GLADE_HOOKUP_OBJECT (dialog1, labelQuantizationType, &quot;labelQuantizationType&quot;);
+  GLADE_HOOKUP_OBJECT (dialog1, radiobuttonH263, &quot;radiobuttonH263&quot;);
+  GLADE_HOOKUP_OBJECT (dialog1, radiobuttonMpeg, &quot;radiobuttonMpeg&quot;);
+  GLADE_HOOKUP_OBJECT (dialog1, radiobuttonCustomMatrix, &quot;radiobuttonCustomMatrix&quot;);
+  GLADE_HOOKUP_OBJECT (dialog1, hbox20, &quot;hbox20&quot;);
+  GLADE_HOOKUP_OBJECT (dialog1, labelLoadCustomMatrix, &quot;labelLoadCustomMatrix&quot;);
+  GLADE_HOOKUP_OBJECT (dialog1, buttonLoadMatrix, &quot;buttonLoadMatrix&quot;);
+  GLADE_HOOKUP_OBJECT (dialog1, alignment6, &quot;alignment6&quot;);
+  GLADE_HOOKUP_OBJECT (dialog1, hbox21, &quot;hbox21&quot;);
+  GLADE_HOOKUP_OBJECT (dialog1, image1, &quot;image1&quot;);
+  GLADE_HOOKUP_OBJECT (dialog1, label13, &quot;label13&quot;);
+  GLADE_HOOKUP_OBJECT (dialog1, vseparator1, &quot;vseparator1&quot;);
+  GLADE_HOOKUP_OBJECT (dialog1, buttonCreateCustomMatrix, &quot;buttonCreateCustomMatrix&quot;);
+  GLADE_HOOKUP_OBJECT (dialog1, frameQuantizationRestrictions, &quot;frameQuantizationRestrictions&quot;);
+  GLADE_HOOKUP_OBJECT (dialog1, hbox14, &quot;hbox14&quot;);
+  GLADE_HOOKUP_OBJECT (dialog1, vbox11, &quot;vbox11&quot;);
+  GLADE_HOOKUP_OBJECT (dialog1, labelIFrameQuantizerMin, &quot;labelIFrameQuantizerMin&quot;);
+  GLADE_HOOKUP_OBJECT (dialog1, labelPFrameQuantizerMin, &quot;labelPFrameQuantizerMin&quot;);
+  GLADE_HOOKUP_OBJECT (dialog1, labelBFrameQuantizaterMin, &quot;labelBFrameQuantizaterMin&quot;);
+  GLADE_HOOKUP_OBJECT (dialog1, vbox12, &quot;vbox12&quot;);
+  GLADE_HOOKUP_OBJECT (dialog1, spinbuttonIMin, &quot;spinbuttonIMin&quot;);
+  GLADE_HOOKUP_OBJECT (dialog1, spinbuttonPMin, &quot;spinbuttonPMin&quot;);
+  GLADE_HOOKUP_OBJECT (dialog1, spinbuttonBMin, &quot;spinbuttonBMin&quot;);
+  GLADE_HOOKUP_OBJECT (dialog1, vbox13, &quot;vbox13&quot;);
+  GLADE_HOOKUP_OBJECT (dialog1, labelIFrameQuantizerMax, &quot;labelIFrameQuantizerMax&quot;);
+  GLADE_HOOKUP_OBJECT (dialog1, labelPFrameQuantizerMax, &quot;labelPFrameQuantizerMax&quot;);
+  GLADE_HOOKUP_OBJECT (dialog1, labelBFrameQuantizerMax, &quot;labelBFrameQuantizerMax&quot;);
+  GLADE_HOOKUP_OBJECT (dialog1, vbox14, &quot;vbox14&quot;);
+  GLADE_HOOKUP_OBJECT (dialog1, spinbuttonIMax, &quot;spinbuttonIMax&quot;);
+  GLADE_HOOKUP_OBJECT (dialog1, spinbuttonPMax, &quot;spinbuttonPMax&quot;);
+  GLADE_HOOKUP_OBJECT (dialog1, spinbuttonBMax, &quot;spinbuttonBMax&quot;);
+  GLADE_HOOKUP_OBJECT (dialog1, labelQuantizerRestrictions, &quot;labelQuantizerRestrictions&quot;);
+  GLADE_HOOKUP_OBJECT (dialog1, checkbuttonTrellis, &quot;checkbuttonTrellis&quot;);
+  GLADE_HOOKUP_OBJECT (dialog1, labelQuantization, &quot;labelQuantization&quot;);
+  GLADE_HOOKUP_OBJECT (dialog1, vbox15, &quot;vbox15&quot;);
+  GLADE_HOOKUP_OBJECT (dialog1, frameTwoPassTuning, &quot;frameTwoPassTuning&quot;);
+  GLADE_HOOKUP_OBJECT (dialog1, vbox16, &quot;vbox16&quot;);
+  GLADE_HOOKUP_OBJECT (dialog1, hbox, &quot;hbox&quot;);
+  GLADE_HOOKUP_OBJECT (dialog1, vbox17, &quot;vbox17&quot;);
+  GLADE_HOOKUP_OBJECT (dialog1, labelIFrameBoost, &quot;labelIFrameBoost&quot;);
+  GLADE_HOOKUP_OBJECT (dialog1, labelIFrameCloserThan, &quot;labelIFrameCloserThan&quot;);
+  GLADE_HOOKUP_OBJECT (dialog1, labelAreReducedBy, &quot;labelAreReducedBy&quot;);
+  GLADE_HOOKUP_OBJECT (dialog1, labelMaxOverflowImprovement, &quot;labelMaxOverflowImprovement&quot;);
+  GLADE_HOOKUP_OBJECT (dialog1, labelMaxOverflowDegradation, &quot;labelMaxOverflowDegradation&quot;);
+  GLADE_HOOKUP_OBJECT (dialog1, vbox18, &quot;vbox18&quot;);
+  GLADE_HOOKUP_OBJECT (dialog1, entryIBoost, &quot;entryIBoost&quot;);
+  GLADE_HOOKUP_OBJECT (dialog1, entryIInterv, &quot;entryIInterv&quot;);
+  GLADE_HOOKUP_OBJECT (dialog1, entryIreduction, &quot;entryIreduction&quot;);
+  GLADE_HOOKUP_OBJECT (dialog1, entryMaxOvrImp, &quot;entryMaxOvrImp&quot;);
+  GLADE_HOOKUP_OBJECT (dialog1, entryMaxOvrDeg, &quot;entryMaxOvrDeg&quot;);
+  GLADE_HOOKUP_OBJECT (dialog1, labelTwoPassTuning, &quot;labelTwoPassTuning&quot;);
+  GLADE_HOOKUP_OBJECT (dialog1, frameCurveCompression, &quot;frameCurveCompression&quot;);
+  GLADE_HOOKUP_OBJECT (dialog1, hbox18, &quot;hbox18&quot;);
+  GLADE_HOOKUP_OBJECT (dialog1, vbox19, &quot;vbox19&quot;);
+  GLADE_HOOKUP_OBJECT (dialog1, labelHighBitrateScenes, &quot;labelHighBitrateScenes&quot;);
+  GLADE_HOOKUP_OBJECT (dialog1, labelLowBitrateScenes, &quot;labelLowBitrateScenes&quot;);
+  GLADE_HOOKUP_OBJECT (dialog1, labelOverflowControlStrength, &quot;labelOverflowControlStrength&quot;);
+  GLADE_HOOKUP_OBJECT (dialog1, vbox20, &quot;vbox20&quot;);
+  GLADE_HOOKUP_OBJECT (dialog1, entryHiPass, &quot;entryHiPass&quot;);
+  GLADE_HOOKUP_OBJECT (dialog1, entryLowPass, &quot;entryLowPass&quot;);
+  GLADE_HOOKUP_OBJECT (dialog1, entryOvrControl, &quot;entryOvrControl&quot;);
+  GLADE_HOOKUP_OBJECT (dialog1, labelCurveCompression, &quot;labelCurveCompression&quot;);
+  GLADE_HOOKUP_OBJECT (dialog1, labelSecondPass, &quot;labelSecondPass&quot;);
+  GLADE_HOOKUP_OBJECT_NO_REF (dialog1, dialog_action_area1, &quot;dialog_action_area1&quot;);
+  GLADE_HOOKUP_OBJECT (dialog1, cancelbutton1, &quot;cancelbutton1&quot;);
+  GLADE_HOOKUP_OBJECT (dialog1, okbutton1, &quot;okbutton1&quot;);
+  GLADE_HOOKUP_OBJECT_NO_REF (dialog1, tooltips, &quot;tooltips&quot;);
+
+  return dialog1;
+}
+
+GtkWidget*
+create_dialog3 (void)
+{
+  GtkWidget *dialog3;
+  GtkWidget *dialog_vbox3;
+  GtkWidget *vbox26;
+  GtkWidget *frame7;
+  GtkWidget *alignment12;
+  GtkWidget *tableIntra;
+  GtkWidget *label19;
+  GtkWidget *frame6;
+  GtkWidget *alignment11;
+  GtkWidget *tableInter;
+  GtkWidget *label18;
+  GtkWidget *dialog_action_area4;
+  GtkWidget *button12;
+  GtkWidget *button13;
+  GtkWidget *button14;
+
+  dialog3 = gtk_dialog_new ();
+  gtk_window_set_title (GTK_WINDOW (dialog3), _(&quot;Edit Custom Matrix&quot;));
+  gtk_window_set_type_hint (GTK_WINDOW (dialog3), GDK_WINDOW_TYPE_HINT_DIALOG);
+
+  dialog_vbox3 = GTK_DIALOG (dialog3)-&gt;vbox;
+  gtk_widget_show (dialog_vbox3);
+
+  vbox26 = gtk_vbox_new (FALSE, 0);
+  gtk_widget_show (vbox26);
+  gtk_box_pack_start (GTK_BOX (dialog_vbox3), vbox26, TRUE, TRUE, 0);
+
+  frame7 = gtk_frame_new (NULL);
+  gtk_widget_show (frame7);
+  gtk_box_pack_start (GTK_BOX (vbox26), frame7, TRUE, TRUE, 0);
+
+  alignment12 = gtk_alignment_new (0.5, 0.5, 1, 1);
+  gtk_widget_show (alignment12);
+  gtk_container_add (GTK_CONTAINER (frame7), alignment12);
+  gtk_alignment_set_padding (GTK_ALIGNMENT (alignment12), 0, 0, 12, 0);
+
+  tableIntra = gtk_table_new (8, 8, FALSE);
+  gtk_widget_show (tableIntra);
+  gtk_container_add (GTK_CONTAINER (alignment12), tableIntra);
+
+  label19 = gtk_label_new (_(&quot;&lt;b&gt;Intra Matrix&lt;/b&gt;&quot;));
+  gtk_widget_show (label19);
+  gtk_frame_set_label_widget (GTK_FRAME (frame7), label19);
+  gtk_label_set_use_markup (GTK_LABEL (label19), TRUE);
+
+  frame6 = gtk_frame_new (NULL);
+  gtk_widget_show (frame6);
+  gtk_box_pack_start (GTK_BOX (vbox26), frame6, TRUE, TRUE, 0);
+
+  alignment11 = gtk_alignment_new (0.5, 0.5, 1, 1);
+  gtk_widget_show (alignment11);
+  gtk_container_add (GTK_CONTAINER (frame6), alignment11);
+  gtk_alignment_set_padding (GTK_ALIGNMENT (alignment11), 0, 0, 12, 0);
+
+  tableInter = gtk_table_new (8, 8, FALSE);
+  gtk_widget_show (tableInter);
+  gtk_container_add (GTK_CONTAINER (alignment11), tableInter);
+
+  label18 = gtk_label_new (_(&quot;&lt;b&gt;Inter Matrix&lt;/b&gt;&quot;));
+  gtk_widget_show (label18);
+  gtk_frame_set_label_widget (GTK_FRAME (frame6), label18);
+  gtk_label_set_use_markup (GTK_LABEL (label18), TRUE);
+
+  dialog_action_area4 = GTK_DIALOG (dialog3)-&gt;action_area;
+  gtk_widget_show (dialog_action_area4);
+  gtk_button_box_set_layout (GTK_BUTTON_BOX (dialog_action_area4), GTK_BUTTONBOX_END);
+
+  button12 = gtk_button_new_from_stock (&quot;gtk-save&quot;);
+  gtk_widget_show (button12);
+  gtk_dialog_add_action_widget (GTK_DIALOG (dialog3), button12, 0);
+  GTK_WIDGET_SET_FLAGS (button12, GTK_CAN_DEFAULT);
+
+  button13 = gtk_button_new_from_stock (&quot;gtk-cancel&quot;);
+  gtk_widget_show (button13);
+  gtk_dialog_add_action_widget (GTK_DIALOG (dialog3), button13, GTK_RESPONSE_CANCEL);
+  GTK_WIDGET_SET_FLAGS (button13, GTK_CAN_DEFAULT);
+
+  button14 = gtk_button_new_from_stock (&quot;gtk-ok&quot;);
+  gtk_widget_show (button14);
+  gtk_dialog_add_action_widget (GTK_DIALOG (dialog3), button14, GTK_RESPONSE_OK);
+  GTK_WIDGET_SET_FLAGS (button14, GTK_CAN_DEFAULT);
+
+  /* Store pointers to all widgets, for use by lookup_widget(). */
+  GLADE_HOOKUP_OBJECT_NO_REF (dialog3, dialog3, &quot;dialog3&quot;);
+  GLADE_HOOKUP_OBJECT_NO_REF (dialog3, dialog_vbox3, &quot;dialog_vbox3&quot;);
+  GLADE_HOOKUP_OBJECT (dialog3, vbox26, &quot;vbox26&quot;);
+  GLADE_HOOKUP_OBJECT (dialog3, frame7, &quot;frame7&quot;);
+  GLADE_HOOKUP_OBJECT (dialog3, alignment12, &quot;alignment12&quot;);
+  GLADE_HOOKUP_OBJECT (dialog3, tableIntra, &quot;tableIntra&quot;);
+  GLADE_HOOKUP_OBJECT (dialog3, label19, &quot;label19&quot;);
+  GLADE_HOOKUP_OBJECT (dialog3, frame6, &quot;frame6&quot;);
+  GLADE_HOOKUP_OBJECT (dialog3, alignment11, &quot;alignment11&quot;);
+  GLADE_HOOKUP_OBJECT (dialog3, tableInter, &quot;tableInter&quot;);
+  GLADE_HOOKUP_OBJECT (dialog3, label18, &quot;label18&quot;);
+  GLADE_HOOKUP_OBJECT_NO_REF (dialog3, dialog_action_area4, &quot;dialog_action_area4&quot;);
+  GLADE_HOOKUP_OBJECT (dialog3, button12, &quot;button12&quot;);
+  GLADE_HOOKUP_OBJECT (dialog3, button13, &quot;button13&quot;);
+  GLADE_HOOKUP_OBJECT (dialog3, button14, &quot;button14&quot;);
+
+  return dialog3;
+}

Added: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_xvid/gtk/xvidConfigDialog.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_xvid/gtk/xvidConfigDialog.h	2008-06-11 11:40:29 UTC (rev 4094)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_xvid/gtk/xvidConfigDialog.h	2008-06-13 12:18:36 UTC (rev 4095)
@@ -0,0 +1,9 @@
+#ifndef xvidConfigDialog_h
+#define xvidConfigDialog_h
+
+extern &quot;C&quot;
+{
+#include &quot;ADM_vidEnc_plugin.h&quot;
+}
+
+#endif	// xvidConfigDialog_h

Added: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_xvid/interface.c
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_xvid/interface.c	2008-06-11 11:40:29 UTC (rev 4094)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_xvid/interface.c	2008-06-13 12:18:36 UTC (rev 4095)
@@ -0,0 +1,127 @@
+/***************************************************************************
+                                 interface.c
+
+    begin                : Wed Jun 11 2008
+    copyright            : (C) 2008 by gruntster
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+
+#include &quot;ADM_inttype.h&quot;
+#include &quot;ADM_vidEnc_plugin.h&quot;
+#include &quot;encoder.h&quot;
+
+int vidEncGetEncoders(int uiType, int** encoderIds)
+{
+	if (uiType == ADM_UI_CLI || uiType == ADM_UI_GTK || uiType == ADM_UI_QT4)
+	{
+		*encoderIds = encoders_getPointer(uiType);
+		return ADM_VIDENC_ERR_SUCCESS;
+	}
+	else
+	{
+		*encoderIds = NULL;
+		return ADM_VIDENC_ERR_FAILED;
+	}
+}
+
+const char* vidEncGetEncoderName(int encoderId)
+{
+	return &quot;Xvid&quot;;
+}
+
+const char* vidEncGetEncoderType(int encoderId)
+{
+	return &quot;MPEG-4 ASP&quot;;
+}
+
+const char* vidEncGetEncoderDescription(int encoderId)
+{
+	return &quot;Xvid video encoder plugin for Avidemux (c) Mean/Gruntster&quot;;
+}
+
+const char* vidEncGetFourCC(int encoderId)
+{
+	return &quot;xvid&quot;;
+}
+
+int vidEncGetEncoderApiVersion(int encoderId)
+{
+	return ADM_VIDENC_API_VERSION;
+}
+
+void vidEncGetEncoderVersion(int encoderId, int* major, int* minor, int* patch)
+{
+	*major = 1;
+	*minor = 0;
+	*patch = 0;
+}
+
+const char* vidEncGetEncoderGuid(int encoderId)
+{
+	return &quot;92B544BE-59A3-4720-86F0-6AD5A2526FD2&quot;;
+}
+
+int vidEncIsConfigurable(int encoderId)
+{
+	return xvidEncoder_isConfigurable();
+}
+
+int vidEncConfigure(int encoderId, vidEncConfigParameters *configParameters, vidEncVideoProperties *properties)
+{
+	return xvidEncoder_configure(configParameters, properties);
+}
+
+int vidEncGetOptions(int encoderId, vidEncOptions *encodeOptions, char *pluginOptions, int bufferSize)
+{
+	return xvidEncoder_getOptions(encodeOptions, pluginOptions, bufferSize);
+}
+
+int vidEncSetOptions(int encoderId, vidEncOptions *encodeOptions, char *pluginOptions)
+{
+	return xvidEncoder_setOptions(encodeOptions, pluginOptions);
+}
+
+int vidEncGetPassCount(int encoderId)
+{
+	return xvidEncoder_getPassCount();
+}
+
+int vidEncGetCurrentPass(int encoderId)
+{
+	return xvidEncoder_getCurrentPass();
+}
+
+int vidEncOpen(int encoderId, vidEncVideoProperties *properties)
+{
+	return xvidEncoder_open(properties);
+}
+
+int vidEncBeginPass(int encoderId, vidEncPassParameters *passParameters)
+{
+	return xvidEncoder_beginPass(passParameters);
+}
+
+int vidEncEncodeFrame(int encoderId, vidEncEncodeParameters *encodeParams)
+{
+	return xvidEncoder_encodeFrame(encodeParams);
+}
+
+int vidEncFinishPass(int encoderId)
+{
+	return xvidEncoder_finishPass();
+}
+
+int vidEncClose(int encoderId)
+{
+	xvidEncoder_close();
+
+	return ADM_VIDENC_ERR_SUCCESS;
+}

Added: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_xvid/options.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_xvid/options.cpp	2008-06-11 11:40:29 UTC (rev 4094)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_xvid/options.cpp	2008-06-13 12:18:36 UTC (rev 4095)
@@ -0,0 +1,34 @@
+ /***************************************************************************
+                               xvidOptions.cpp
+
+	These settings are intended for scripting and can contain a Preset 
+	Configuration block.  If this block exists then &quot;internal&quot; settings are
+	ignored and an external configuration file should be read instead, 
+	e.g. PlayStation Portable profile.  However, if the external file is 
+	missing, internal settings have to be used and will reflect a snapshot
+	of the external configuration file at the time the script was generated.
+
+    begin                : Fri Jun 13 2008
+    copyright            : (C) 2008 by gruntster
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+
+#include &quot;options.h&quot;
+
+xvidOptions::xvidOptions(void)
+{
+
+}
+
+xvidOptions::~xvidOptions(void)
+{
+
+}

Added: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_xvid/options.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_xvid/options.h	2008-06-11 11:40:29 UTC (rev 4094)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_xvid/options.h	2008-06-13 12:18:36 UTC (rev 4095)
@@ -0,0 +1,27 @@
+/***************************************************************************
+                                xvidOptions.h
+
+    begin                : Fri Jun 13 2008
+    copyright            : (C) 2008 by gruntster
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+
+#ifndef options_h
+#define options_h
+
+class xvidOptions
+{
+public:
+	xvidOptions(void);
+	~xvidOptions(void);
+};
+
+#endif	// options_h

Added: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/CMakeLists.txt	2008-06-11 11:40:29 UTC (rev 4094)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/CMakeLists.txt	2008-06-13 12:18:36 UTC (rev 4095)
@@ -0,0 +1,15 @@
+INCLUDE(admCheckQt4)
+INCLUDE(admPluginVideoEncoder)
+
+checkQt4()
+
+IF (QT4_FOUND)
+	SET(ADM_vidEnc_xvid_Qt_SRCS xvidConfigDialog.cpp)
+
+	INCLUDE_DIRECTORIES(${QT_INCLUDE_DIR} ${AVIDEMUX_SOURCE_DIR}/avidemux)
+	ADD_LIBRARY(${QT_PLUGIN_NAME} SHARED ${ADM_vidEnc_xvid_Qt_SRCS})
+	TARGET_LINK_LIBRARIES(${QT_PLUGIN_NAME} ADM_vidEnc_xvid ADM_coreUI ${QT_QTGUI_LIBRARY} ${QT_QTCORE_LIBRARY})
+
+	INIT_VIDEO_ENCODER_PLUGIN(ADM_vidEnc_xvid_Qt)
+	INSTALL(TARGETS ADM_vidEnc_xvid_Qt DESTINATION &quot;${CMAKE_INSTALL_PREFIX}/lib/ADM_plugins/videoEncoder/${PLUGIN_SUBDIR}&quot;)
+ENDIF (QT4_FOUND)
\ No newline at end of file

Added: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidConfigDialog.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidConfigDialog.cpp	2008-06-11 11:40:29 UTC (rev 4094)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidConfigDialog.cpp	2008-06-13 12:18:36 UTC (rev 4095)
@@ -0,0 +1,141 @@
+/***************************************************************************
+                    xvidConfigDialog.cpp  -  description
+                    ------------------------------------
+
+                          GUI for configuring Xvid
+
+    begin                : Fri Jun 13 2008
+    copyright            : (C) 2008 by mean/gruntster
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+#include &lt;QtCore/QtGlobal&gt;
+
+#include &quot;ADM_inttype.h&quot;
+#include &quot;DIA_factory.h&quot;
+
+#include &quot;../options.h&quot;
+
+#include &quot;xvidConfigDialog.h&quot;
+
+extern &quot;C&quot; int showXvidConfigDialog(vidEncConfigParameters *configParameters, vidEncVideoProperties *properties, vidEncOptions *encodeOptions, xvidOptions *options)
+{
+	int b;
+	int ret=0;
+	int code;
+	uint32_t dummy;
+//	xvid4EncParam localParam;
+//	ADM_assert(incoming-&gt;extraSettingsLen==sizeof(localParam));
+//	memcpy(&amp;localParam,incoming-&gt;extraSettings,sizeof(localParam));
+#define PX(x) &amp;dummy
+	// Our tabs
+	/* Tab 1 main */
+	//diaElemBitrate bitrate(NULL,NULL);
+#define MKTOGGLE(y,x)           diaElemToggle  t_##x(PX(x),y)
+	MKTOGGLE(QT_TR_NOOP(&quot;_Interlaced&quot;),	    interlaced);
+	MKTOGGLE(QT_TR_NOOP(&quot;Ca_rtoon mode&quot;),      cartoon);
+	MKTOGGLE(QT_TR_NOOP(&quot;_Greyscale&quot;),         greyscale);
+	MKTOGGLE(QT_TR_NOOP(&quot;Turbo mode&quot;),      turbo);
+	MKTOGGLE(QT_TR_NOOP(&quot;C_hroma optimizer&quot;),         chroma_opt);
+	//diaElem *main[]={&amp;bitrate,&amp;t_interlaced,&amp;t_cartoon,&amp;t_greyscale,&amp;t_turbo,&amp;t_chroma_opt};
+	diaElem *main[]={&amp;t_interlaced,&amp;t_cartoon,&amp;t_greyscale,&amp;t_turbo,&amp;t_chroma_opt};
+	diaElemTabs tabMain(QT_TR_NOOP(&quot;Main&quot;),5,main);
+	/* Tab 2 motion */
+	diaMenuEntry motionMenu[] = {
+		{0,       QT_TR_NOOP(&quot;None&quot;),NULL}
+		,{1,      QT_TR_NOOP(&quot;Very Low&quot;),NULL}
+		,{2,      QT_TR_NOOP(&quot;Low&quot;),NULL}
+		,{3,      QT_TR_NOOP(&quot;Medium&quot;),NULL}
+		,{4,      QT_TR_NOOP(&quot;High&quot;),NULL}
+		,{5,      QT_TR_NOOP(&quot;Very High&quot;),NULL}
+		,{6,      QT_TR_NOOP(&quot;Ultra High&quot;),NULL}};
+
+	diaElemMenu motion(PX(guiLevel),QT_TR_NOOP(&quot;Motion Search Precision&quot;),7,motionMenu);
+
+	diaMenuEntry vhqMenu[] = {
+		{0,       QT_TR_NOOP(&quot;Off&quot;),NULL}
+		,{1,      QT_TR_NOOP(&quot;Mode Decision&quot;),NULL}
+		,{2,      QT_TR_NOOP(&quot;Limited Search&quot;),NULL}
+		,{3,      QT_TR_NOOP(&quot;Medium Search&quot;),NULL}
+		,{4,      QT_TR_NOOP(&quot;Wide Search&quot;),NULL} };
+
+	diaElemMenu vhq(PX(vhqmode),QT_TR_NOOP(&quot;VHQ Mode&quot;),5,vhqMenu);
+
+	/* Tab2-ASP */
+	diaElemUInteger  bframe(PX(bframes),QT_TR_NOOP(&quot;Max B Frames&quot;),0,3);
+	diaElemToggle    qpel(PX(qpel),QT_TR_NOOP(&quot;Quarter Pixel&quot;));
+	diaElemToggle    gmc(PX(gmc),QT_TR_NOOP(&quot;GMC&quot;));
+	diaElemToggle    bvhq(PX(bvhq),QT_TR_NOOP(&quot;BVHQ&quot;));
+	diaElemFrame  frameASP(QT_TR_NOOP(&quot;Advanced Simple Profile&quot;));
+	frameASP.swallow(&amp;bframe);
+	frameASP.swallow(&amp;qpel);
+	frameASP.swallow(&amp;gmc);
+	frameASP.swallow(&amp;bvhq);
+
+	/* Tab 2 motion extra */
+	diaElemToggle    inter4mv(PX(inter4mv),QT_TR_NOOP(&quot;4MV&quot;));
+	diaElemToggle    chroma_me(PX(chroma_me),QT_TR_NOOP(&quot;Chroma ME&quot;));
+	diaElemToggle    hqac(PX(chroma_me),QT_TR_NOOP(&quot;HQ AC&quot;));
+	diaElemFrame  frameMore(QT_TR_NOOP(&quot;More Search&quot;));
+	frameMore.swallow(&amp;inter4mv);
+	frameMore.swallow(&amp;chroma_me);
+	frameMore.swallow(&amp;hqac);
+	/* Tab 2 gop size */
+	diaElemUInteger  min_key_interval(PX(min_key_interval),QT_TR_NOOP(&quot;Min Gop Size&quot;),1,900);
+	diaElemUInteger  max_key_interval(PX(max_key_interval),QT_TR_NOOP(&quot;Max Gop Size&quot;),1,900);
+	diaElemFrame  frameGop(QT_TR_NOOP(&quot;GOP Size&quot;));
+	frameGop.swallow(&amp;min_key_interval);
+	frameGop.swallow(&amp;max_key_interval);
+
+	diaElem *motions[]={&amp;motion,&amp;vhq,&amp;frameMore,&amp;frameGop,&amp;frameASP};
+	diaElemTabs tabMotion(QT_TR_NOOP(&quot;Motion&quot;),5,motions);
+
+	/* Tab 3 Qz*/
+	diaMenuEntry qzMenu[] = {
+		{0,       QT_TR_NOOP(&quot;H263&quot;),NULL}
+		,{1,      QT_TR_NOOP(&quot;Mpeg&quot;),NULL}}                            ;
+	diaElemMenu h263(PX(mpegQuantizer),QT_TR_NOOP(&quot;Quantization Matrix&quot;),2,qzMenu);
+	diaElemToggle    trellis(PX(trellis),QT_TR_NOOP(&quot;Trellis Quantization&quot;));
+
+	diaElem *qz[]={&amp;h263,&amp;trellis};
+	diaElemTabs tabQz(QT_TR_NOOP(&quot;Quantization&quot;),2,qz);
+
+		/* Tab 4 : 2nd pass */
+#define MKENTRY(y,x) diaElemUInteger x(PX(x),y,0,100); frameOne.swallow(&amp;x);
+	diaElemFrame  frameOne(QT_TR_NOOP(&quot;Two Pass Tuning&quot;)); 
+
+	MKENTRY(QT_TR_NOOP(&quot;Key Frame Boost(%)&quot;), keyframe_boost);
+
+	MKENTRY(QT_TR_NOOP(&quot;I-frames closer than...&quot;), kfthreshold);
+	MKENTRY(QT_TR_NOOP(&quot;.. are reduced by(%)&quot;), kfreduction);
+	MKENTRY(QT_TR_NOOP(&quot;Max Overflow Improvement(%)&quot;), max_overflow_improvement);
+	MKENTRY(QT_TR_NOOP(&quot;Max Overglow Degradation(%)&quot;), max_overflow_degradation);
+
+#undef MKENTRY
+#define MKENTRY(y,x) diaElemUInteger  x(PX(x),y,0,100);frameTwo.swallow(&amp;x);
+	diaElemFrame  frameTwo(QT_TR_NOOP(&quot;Curve Compression&quot;));
+
+	MKENTRY(QT_TR_NOOP(&quot;High Bitrate Scenes (%)&quot;), curve_compression_high);
+	MKENTRY(QT_TR_NOOP(&quot;Low Bitrate Scenes (%)&quot;), curve_compression_low);
+	MKENTRY(QT_TR_NOOP(&quot;Overflow Control Strength&quot;), overflow_control_strength);
+
+	diaElem *twopass[]={&amp;frameOne,&amp;frameTwo};
+	diaElemTabs tabPass(QT_TR_NOOP(&quot;Two Pass&quot;),2,twopass);
+
+	/* End of tabs */
+	diaElemTabs *tabs[4]={&amp;tabMain,&amp;tabMotion,&amp;tabQz,&amp;tabPass};
+	if( diaFactoryRunTabs(QT_TR_NOOP(&quot;Xvid4 Configuration&quot;),4,tabs))
+	{
+		//memcpy(incoming-&gt;extraSettings,&amp;localParam,sizeof(localParam));
+		return 1;
+	}
+
+	return 0;
+}

Added: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidConfigDialog.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidConfigDialog.h	2008-06-11 11:40:29 UTC (rev 4094)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidConfigDialog.h	2008-06-13 12:18:36 UTC (rev 4095)
@@ -0,0 +1,9 @@
+#ifndef xvidConfigDialog_h
+#define xvidConfigDialog_h
+
+extern &quot;C&quot;
+{
+#include &quot;ADM_vidEnc_plugin.h&quot;
+}
+
+#endif	// xvidConfigDialog_h

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/CMakeLists.txt	2008-06-11 11:40:29 UTC (rev 4094)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/CMakeLists.txt	2008-06-13 12:18:36 UTC (rev 4095)
@@ -1 +1,2 @@
-ADD_SUBDIRECTORY(ADM_vidEnc_x264)
\ No newline at end of file
+ADD_SUBDIRECTORY(ADM_vidEnc_x264)
+ADD_SUBDIRECTORY(ADM_vidEnc_xvid)
\ No newline at end of file


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001350.html">[Avidemux-svn-commit] r4094 - in	branches/avidemux_2.5_branch_gruntster: avidemux	avidemux/ADM_codecs avidemux/ADM_editor avidemux/ADM_ocr	avidemux/ADM_outputs avidemux/ADM_outputs/oplug_flv	avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog	avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui	avidemux/ADM_userInterfaces/ADM_commonUI avidemux/winInstaller po
</A></li>
	<LI>Next message: <A HREF="001352.html">[Avidemux-svn-commit] r4096 - branches/avidemux_2.4_branch/po
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1351">[ date ]</a>
              <a href="thread.html#1351">[ thread ]</a>
              <a href="subject.html#1351">[ subject ]</a>
              <a href="author.html#1351">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">More information about the Avidemux-svn-commit
mailing list</a><br>
</body></html>
